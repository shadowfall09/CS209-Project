{"items":[{"tags":["java","concurrency"],"answers":[{"comments":[{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":0,"creation_date":1357812024,"post_id":14255075,"comment_id":19782852,"body_markdown":"It&#39;s almost good. But I can&#39;t wait for it to be zero from what I know.","body":"It&#39;s almost good. But I can&#39;t wait for it to be zero from what I know."},{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":0,"creation_date":1357812047,"post_id":14255075,"comment_id":19782865,"body_markdown":"also acquire() is the same as acquire(1)","body":"also acquire() is the same as acquire(1)"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1357812095,"post_id":14255075,"comment_id":19782895,"body_markdown":"@assylias: Thanks, updated (I just take what Google gives me when I search the class name)","body":"@assylias: Thanks, updated (I just take what Google gives me when I search the class name)"},{"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"score":0,"creation_date":1357812123,"post_id":14255075,"comment_id":19782912,"body_markdown":"according to documentation.","body":"according to documentation."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1357812149,"post_id":14255075,"comment_id":19782933,"body_markdown":"You can wait for it to be zero by acquiring a lease (and releasing it immediately after if you don&#39;t want to block others).","body":"You can wait for it to be zero by acquiring a lease (and releasing it immediately after if you don&#39;t want to block others)."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":3,"creation_date":1357812232,"post_id":14255075,"comment_id":19782992,"body_markdown":"Stackoverflow could use some support to automatically transform/include JDK Javadoc links to the newest version...","body":"Stackoverflow could use some support to automatically transform/include JDK Javadoc links to the newest version..."},{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":1,"creation_date":1357812337,"post_id":14255075,"comment_id":19783045,"body_markdown":"@Thilo I&#39;m not sure what you are saying works, or I&#39;m not understanding properly what you said. If you call acquire you get a lease, but I need to wait for all leases to be taken by some other threads.","body":"@Thilo I&#39;m not sure what you are saying works, or I&#39;m not understanding properly what you said. If you call acquire you get a lease, but I need to wait for all leases to be taken by some other threads."},{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":0,"creation_date":1357812784,"post_id":14255075,"comment_id":19783325,"body_markdown":"@Thilo Yeah, I&#39;ve been thinking of using AbstractQueuedSynchronizer to implement a custom latch/semaphore. But I don&#39;t think I can use that either since I have two opposing ways in which the threads can block (one happens if the value is zero and one if the value is not zero). So I probably have to go lower and use LockSupport to implement it.","body":"@Thilo Yeah, I&#39;ve been thinking of using AbstractQueuedSynchronizer to implement a custom latch/semaphore. But I don&#39;t think I can use that either since I have two opposing ways in which the threads can block (one happens if the value is zero and one if the value is not zero). So I probably have to go lower and use LockSupport to implement it."}],"tags":[],"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"comment_count":8,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1357812595,"creation_date":1357811822,"answer_id":14255075,"question_id":14255019,"body_markdown":"[java.util.concurrent.Semaphore][1] seems to fit the bill.\r\n\r\n\r\n   * acquire() or acquire(n)\r\n   * &lt;strike&gt;also acquire()  (not sure I understand what the difference is here)&lt;/strike&gt; (*)\r\n   * release() or release(n)\r\n\r\n\r\n(*) Okay, there is no built-in method to wait until the semaphore becomes *unavailable*. I suppose you&#39;d write your own wrapper for `acquire` that does a `tryAcquire` first and if that fails triggers your &quot;busy event&quot; (and continues using the normal `acquire`). Everyone would need to call your wrapper. Maybe subclass Semaphore?\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html","title":"Latch that can be incremented","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html\" rel=\"noreferrer\">java.util.concurrent.Semaphore</a> seems to fit the bill.</p>\n\n<ul>\n<li>acquire() or acquire(n)</li>\n<li><strike>also acquire()  (not sure I understand what the difference is here)</strike> (*)</li>\n<li>release() or release(n)</li>\n</ul>\n\n<p>(*) Okay, there is no built-in method to wait until the semaphore becomes <em>unavailable</em>. I suppose you'd write your own wrapper for <code>acquire</code> that does a <code>tryAcquire</code> first and if that fails triggers your \"busy event\" (and continues using the normal <code>acquire</code>). Everyone would need to call your wrapper. Maybe subclass Semaphore?</p>\n"},{"comments":[{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":0,"creation_date":1357830345,"post_id":14260716,"comment_id":19792829,"body_markdown":"Yeah, that would work. But I would like something that doesn&#39;t use 2 synchronizer objects to achieve this. I have implemented one using LockSupport and am currently testing it to see if it works and performs okay (AQS didn&#39;t seem to be good for this either).","body":"Yeah, that would work. But I would like something that doesn&#39;t use 2 synchronizer objects to achieve this. I have implemented one using LockSupport and am currently testing it to see if it works and performs okay (AQS didn&#39;t seem to be good for this either)."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1502869510,"post_id":14260716,"comment_id":78373594,"body_markdown":"@dead10ck why not?","body":"@dead10ck why not?"},{"owner":{"account_id":6467251,"reputation":85,"user_id":5008705,"accept_rate":20,"display_name":"Arunim Chopra"},"score":0,"creation_date":1612363280,"post_id":14260716,"comment_id":116743719,"body_markdown":"you can use semaphore as well.","body":"you can use semaphore as well."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1612372871,"post_id":14260716,"comment_id":116748827,"body_markdown":"@ArunimChopra It may not be straightforward, see the comments below Thilo&#39;s answer.","body":"@ArunimChopra It may not be straightforward, see the comments below Thilo&#39;s answer."},{"owner":{"account_id":6467251,"reputation":85,"user_id":5008705,"accept_rate":20,"display_name":"Arunim Chopra"},"score":1,"creation_date":1612379181,"post_id":14260716,"comment_id":116751579,"body_markdown":"@assylias by the comment, I meant combination of CountDownLatch and Semaphore. Only using semaphore alone would not work. In place of synchronized, we can use semaphore with permit as 1.","body":"@assylias by the comment, I meant combination of CountDownLatch and Semaphore. Only using semaphore alone would not work. In place of synchronized, we can use semaphore with permit as 1."},{"owner":{"account_id":6467251,"reputation":85,"user_id":5008705,"accept_rate":20,"display_name":"Arunim Chopra"},"score":0,"creation_date":1612379520,"post_id":14260716,"comment_id":116751713,"body_markdown":"Also, inside waitUntilZero() method , we can simply use latch.await(). This is basically available out-of-the-box.","body":"Also, inside waitUntilZero() method , we can simply use latch.await(). This is basically available out-of-the-box."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1612384625,"post_id":14260716,"comment_id":116753784,"body_markdown":"@ArunimChopra I see, good point indeed, thanks.","body":"@ArunimChopra I see, good point indeed, thanks."}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":7,"down_vote_count":2,"up_vote_count":9,"is_accepted":true,"score":7,"last_activity_date":1357829825,"creation_date":1357829825,"answer_id":14260716,"question_id":14255019,"body_markdown":"Instead of starting back from AQS, you could use a simple implementation like below. It is somewhat naive (it is synchronized vs. AQS lock-free algorithms) but unless you expect to use it in a contented scenario it could be good enough.\r\n\r\n    public class CountUpAndDownLatch {\r\n        private CountDownLatch latch;\r\n        private final Object lock = new Object();\r\n        \r\n        public CountUpAndDownLatch(int count) {\r\n            this.latch = new CountDownLatch(count);\r\n        }\r\n        \r\n        public void countDownOrWaitIfZero() throws InterruptedException {\r\n            synchronized(lock) {\r\n                while(latch.getCount() == 0) {\r\n                    lock.wait();\r\n                }\r\n                latch.countDown();\r\n                lock.notifyAll();\r\n            }\r\n        }\r\n        \r\n        public void waitUntilZero() throws InterruptedException {\r\n            synchronized(lock) {\r\n                while(latch.getCount() != 0) {\r\n                    lock.wait();\r\n                }\r\n            }\r\n        }\r\n\r\n        public void countUp() { //should probably check for Integer.MAX_VALUE\r\n            synchronized(lock) {\r\n                latch = new CountDownLatch((int) latch.getCount() + 1);\r\n                lock.notifyAll();\r\n            }\r\n        }\r\n\r\n        public int getCount() {\r\n            synchronized(lock) {\r\n                return (int) latch.getCount();\r\n            }\r\n        }\r\n    }\r\n\r\nNote: I have not tested it in depth but it seems to behave as expected:\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        final CountUpAndDownLatch latch = new CountUpAndDownLatch(1);\r\n        Runnable up = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;IN UP &quot; + latch.getCount());\r\n                    latch.countUp();\r\n                    System.out.println(&quot;UP &quot; + latch.getCount());\r\n                } catch (InterruptedException ex) {\r\n                }\r\n            }\r\n        };\r\n\r\n        Runnable downOrWait = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;IN DOWN &quot; + latch.getCount());\r\n                    latch.countDownOrWaitIfZero();\r\n                    System.out.println(&quot;DOWN &quot; + latch.getCount());\r\n                } catch (InterruptedException ex) {\r\n                }\r\n            }\r\n        };\r\n\r\n        Runnable waitFor0 = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;WAIT FOR ZERO &quot; + latch.getCount());\r\n                    latch.waitUntilZero();\r\n                    System.out.println(&quot;ZERO &quot; + latch.getCount());\r\n                } catch (InterruptedException ex) {\r\n                }\r\n            }\r\n        };\r\n        new Thread(waitFor0).start();\r\n        up.run();\r\n        downOrWait.run();\r\n        Thread.sleep(100);\r\n        downOrWait.run();\r\n        new Thread(up).start();\r\n        downOrWait.run();\r\n    }\r\n\r\nOutput:\r\n\r\n    IN UP 1\r\n    UP 2\r\n    WAIT FOR ZERO 1\r\n    IN DOWN 2\r\n    DOWN 1\r\n    IN DOWN 1\r\n    ZERO 0\r\n    DOWN 0\r\n    IN DOWN 0\r\n    IN UP 0\r\n    DOWN 0\r\n    UP 0","title":"Latch that can be incremented","body":"<p>Instead of starting back from AQS, you could use a simple implementation like below. It is somewhat naive (it is synchronized vs. AQS lock-free algorithms) but unless you expect to use it in a contented scenario it could be good enough.</p>\n\n<pre><code>public class CountUpAndDownLatch {\n    private CountDownLatch latch;\n    private final Object lock = new Object();\n\n    public CountUpAndDownLatch(int count) {\n        this.latch = new CountDownLatch(count);\n    }\n\n    public void countDownOrWaitIfZero() throws InterruptedException {\n        synchronized(lock) {\n            while(latch.getCount() == 0) {\n                lock.wait();\n            }\n            latch.countDown();\n            lock.notifyAll();\n        }\n    }\n\n    public void waitUntilZero() throws InterruptedException {\n        synchronized(lock) {\n            while(latch.getCount() != 0) {\n                lock.wait();\n            }\n        }\n    }\n\n    public void countUp() { //should probably check for Integer.MAX_VALUE\n        synchronized(lock) {\n            latch = new CountDownLatch((int) latch.getCount() + 1);\n            lock.notifyAll();\n        }\n    }\n\n    public int getCount() {\n        synchronized(lock) {\n            return (int) latch.getCount();\n        }\n    }\n}\n</code></pre>\n\n<p>Note: I have not tested it in depth but it seems to behave as expected:</p>\n\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    final CountUpAndDownLatch latch = new CountUpAndDownLatch(1);\n    Runnable up = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                System.out.println(\"IN UP \" + latch.getCount());\n                latch.countUp();\n                System.out.println(\"UP \" + latch.getCount());\n            } catch (InterruptedException ex) {\n            }\n        }\n    };\n\n    Runnable downOrWait = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                System.out.println(\"IN DOWN \" + latch.getCount());\n                latch.countDownOrWaitIfZero();\n                System.out.println(\"DOWN \" + latch.getCount());\n            } catch (InterruptedException ex) {\n            }\n        }\n    };\n\n    Runnable waitFor0 = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                System.out.println(\"WAIT FOR ZERO \" + latch.getCount());\n                latch.waitUntilZero();\n                System.out.println(\"ZERO \" + latch.getCount());\n            } catch (InterruptedException ex) {\n            }\n        }\n    };\n    new Thread(waitFor0).start();\n    up.run();\n    downOrWait.run();\n    Thread.sleep(100);\n    downOrWait.run();\n    new Thread(up).start();\n    downOrWait.run();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>IN UP 1\nUP 2\nWAIT FOR ZERO 1\nIN DOWN 2\nDOWN 1\nIN DOWN 1\nZERO 0\nDOWN 0\nIN DOWN 0\nIN UP 0\nDOWN 0\nUP 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1836471,"reputation":416,"user_id":1666753,"display_name":"Guido Medina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691532584,"creation_date":1378138025,"answer_id":18577140,"question_id":14255019,"body_markdown":"I needed one and built it using the same strategy as CountDownLatch which uses AQS (non-blocking), this class is also very similar (If not exact) to one created for Apache Camel, I think it is also lighter than JDK Phaser, this will act just like CountDownLact from JDK, it won&#39;t let you count down below zero and will allow you count down and up:\r\n\r\n    \r\n\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.concurrent.locks.AbstractQueuedSynchronizer;\r\n        \r\n    public class CountingLatch\r\n    {\r\n      /**\r\n       * Synchronization control for CountingLatch.\r\n       * Uses AQS state to represent count.\r\n       */\r\n      private static final class Sync extends AbstractQueuedSynchronizer\r\n      {\r\n        private Sync()\r\n        {\r\n        }\r\n    \r\n        private Sync(final int initialState)\r\n        {\r\n          setState(initialState);\r\n        }\r\n    \r\n        int getCount()\r\n        {\r\n          return getState();\r\n        }\r\n    \r\n        protected int tryAcquireShared(final int acquires)\r\n        {\r\n          return getState()==0 ? 1 : -1;\r\n        }\r\n    \r\n        protected boolean tryReleaseShared(final int delta)\r\n        {\r\n          // Decrement count; signal when transition to zero\r\n          for(; ; ){\r\n            final int c=getState();\r\n            final int nextc=c+delta;\r\n            if(nextc&lt;0){\r\n              return false;\r\n            }\r\n            if(compareAndSetState(c,nextc)){\r\n              return nextc==0;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    \r\n      private final Sync sync;\r\n    \r\n      public CountingLatch()\r\n      {\r\n        sync=new Sync();\r\n      }\r\n    \r\n      public CountingLatch(final int initialCount)\r\n      {\r\n        sync=new Sync(initialCount);\r\n      }\r\n    \r\n      public void increment()\r\n      {\r\n        sync.releaseShared(1);\r\n      }\r\n    \r\n      public int getCount()\r\n      {\r\n        return sync.getCount();\r\n      }\r\n    \r\n      public void decrement()\r\n      {\r\n        sync.releaseShared(-1);\r\n      }\r\n    \r\n      public void await() throws InterruptedException\r\n      {\r\n        sync.acquireSharedInterruptibly(1);\r\n      }\r\n    \r\n      public boolean await(final long timeout) throws InterruptedException\r\n      {\r\n        return sync.tryAcquireSharedNanos(1,TimeUnit.MILLISECONDS.toNanos(timeout));\r\n      }\r\n    }\r\n\r\n","title":"Latch that can be incremented","body":"<p>I needed one and built it using the same strategy as CountDownLatch which uses AQS (non-blocking), this class is also very similar (If not exact) to one created for Apache Camel, I think it is also lighter than JDK Phaser, this will act just like CountDownLact from JDK, it won't let you count down below zero and will allow you count down and up:</p>\n<pre><code>import java.util.concurrent.TimeUnit;\nimport java.util.concurrent.locks.AbstractQueuedSynchronizer;\n    \npublic class CountingLatch\n{\n  /**\n   * Synchronization control for CountingLatch.\n   * Uses AQS state to represent count.\n   */\n  private static final class Sync extends AbstractQueuedSynchronizer\n  {\n    private Sync()\n    {\n    }\n\n    private Sync(final int initialState)\n    {\n      setState(initialState);\n    }\n\n    int getCount()\n    {\n      return getState();\n    }\n\n    protected int tryAcquireShared(final int acquires)\n    {\n      return getState()==0 ? 1 : -1;\n    }\n\n    protected boolean tryReleaseShared(final int delta)\n    {\n      // Decrement count; signal when transition to zero\n      for(; ; ){\n        final int c=getState();\n        final int nextc=c+delta;\n        if(nextc&lt;0){\n          return false;\n        }\n        if(compareAndSetState(c,nextc)){\n          return nextc==0;\n        }\n      }\n    }\n  }\n\n  private final Sync sync;\n\n  public CountingLatch()\n  {\n    sync=new Sync();\n  }\n\n  public CountingLatch(final int initialCount)\n  {\n    sync=new Sync(initialCount);\n  }\n\n  public void increment()\n  {\n    sync.releaseShared(1);\n  }\n\n  public int getCount()\n  {\n    return sync.getCount();\n  }\n\n  public void decrement()\n  {\n    sync.releaseShared(-1);\n  }\n\n  public void await() throws InterruptedException\n  {\n    sync.acquireSharedInterruptibly(1);\n  }\n\n  public boolean await(final long timeout) throws InterruptedException\n  {\n    return sync.tryAcquireSharedNanos(1,TimeUnit.MILLISECONDS.toNanos(timeout));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263613,"reputation":1759,"user_id":549296,"accept_rate":80,"display_name":"Michael-7"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1433490701,"creation_date":1433490701,"answer_id":30661185,"question_id":14255019,"body_markdown":"For those needing an AQS based solution, here&#39;s one that worked for me:\r\n\r\n    public class CountLatch {\r\n    \r\n        private class Sync extends AbstractQueuedSynchronizer {\r\n            private static final long serialVersionUID = 1L;\r\n    \r\n            public Sync() {\r\n            }\r\n    \r\n            @Override\r\n            protected int tryAcquireShared(int arg) {\r\n                return count.get() == releaseValue ? 1 : -1;\r\n            }\r\n    \r\n            @Override\r\n            protected boolean tryReleaseShared(int arg) {\r\n                return true;\r\n            }\r\n        }\r\n    \r\n        private final Sync sync;\r\n        private final AtomicLong count;\r\n        private volatile long releaseValue;\r\n    \r\n        public CountLatch(final long initial, final long releaseValue) {\r\n            this.releaseValue = releaseValue;\r\n            this.count = new AtomicLong(initial);\r\n            this.sync = new Sync();\r\n        }\r\n    \r\n        public void await() throws InterruptedException {\r\n            sync.acquireSharedInterruptibly(1);\r\n        }\r\n    \r\n        public long countUp() {\r\n            final long current = count.incrementAndGet();\r\n            if (current == releaseValue) {\r\n                sync.releaseShared(0);\r\n            }\r\n            return current;\r\n        }\r\n    \r\n        public long countDown() {\r\n            final long current = count.decrementAndGet();\r\n            if (current == releaseValue) {\r\n                sync.releaseShared(0);\r\n            }\r\n            return current;\r\n        }\r\n    \r\n        public long getCount() {\r\n            return count.get();\r\n        }\r\n    }\r\n\r\nYou initialize the synchronizer with an initial and target value. Once the target value has been reached (by counting up and / or down), the waiting threads will be released.","title":"Latch that can be incremented","body":"<p>For those needing an AQS based solution, here's one that worked for me:</p>\n\n<pre><code>public class CountLatch {\n\n    private class Sync extends AbstractQueuedSynchronizer {\n        private static final long serialVersionUID = 1L;\n\n        public Sync() {\n        }\n\n        @Override\n        protected int tryAcquireShared(int arg) {\n            return count.get() == releaseValue ? 1 : -1;\n        }\n\n        @Override\n        protected boolean tryReleaseShared(int arg) {\n            return true;\n        }\n    }\n\n    private final Sync sync;\n    private final AtomicLong count;\n    private volatile long releaseValue;\n\n    public CountLatch(final long initial, final long releaseValue) {\n        this.releaseValue = releaseValue;\n        this.count = new AtomicLong(initial);\n        this.sync = new Sync();\n    }\n\n    public void await() throws InterruptedException {\n        sync.acquireSharedInterruptibly(1);\n    }\n\n    public long countUp() {\n        final long current = count.incrementAndGet();\n        if (current == releaseValue) {\n            sync.releaseShared(0);\n        }\n        return current;\n    }\n\n    public long countDown() {\n        final long current = count.decrementAndGet();\n        if (current == releaseValue) {\n            sync.releaseShared(0);\n        }\n        return current;\n    }\n\n    public long getCount() {\n        return count.get();\n    }\n}\n</code></pre>\n\n<p>You initialize the synchronizer with an initial and target value. Once the target value has been reached (by counting up and / or down), the waiting threads will be released.</p>\n"},{"comments":[{"owner":{"account_id":9464893,"reputation":440,"user_id":7037600,"accept_rate":100,"display_name":"donlys"},"score":1,"creation_date":1484166526,"post_id":32442754,"comment_id":70402983,"body_markdown":"I found this lot more flexible than any other options.","body":"I found this lot more flexible than any other options."},{"owner":{"account_id":3895961,"reputation":989,"user_id":3225001,"display_name":"Gurupad Mamadapur"},"score":2,"creation_date":1545992900,"post_id":32442754,"comment_id":94751747,"body_markdown":"*Note for Android* : `Phaser` is not available below Android SDK 21. If you&#39;re using Kotlin the lint doesn&#39;t warn you, neither does the compiler.","body":"<i>Note for Android</i> : <code>Phaser</code> is not available below Android SDK 21. If you&#39;re using Kotlin the lint doesn&#39;t warn you, neither does the compiler."},{"owner":{"account_id":8465416,"reputation":23499,"user_id":7365866,"display_name":"Ben Butterworth"},"score":4,"creation_date":1616535589,"post_id":32442754,"comment_id":118032606,"body_markdown":"It took me a while to wrap my head around what a Phaser is doing. I would say there are 2 concepts, registered and awaiting. To await (make a thread wait), you need to be registered.That&#39;s why `Michael-7` (OP) initialized `Phaser(1)` instead of `Phaser()`. If he just did `Phaser()`, he also needs to call `phaser.register()`.","body":"It took me a while to wrap my head around what a Phaser is doing. I would say there are 2 concepts, registered and awaiting. To await (make a thread wait), you need to be registered.That&#39;s why <code>Michael-7</code> (OP) initialized <code>Phaser(1)</code> instead of <code>Phaser()</code>. If he just did <code>Phaser()</code>, he also needs to call <code>phaser.register()</code>."}],"tags":[],"owner":{"account_id":263613,"reputation":1759,"user_id":549296,"accept_rate":80,"display_name":"Michael-7"},"comment_count":3,"down_vote_count":0,"up_vote_count":97,"is_accepted":false,"score":97,"last_activity_date":1671862762,"creation_date":1441642820,"answer_id":32442754,"question_id":14255019,"body_markdown":"You could also use a [Phaser (java.util.concurrent.Phaser)][1]\r\n\r\n    final Phaser phaser = new Phaser(1); // register self\r\n    while (/* some condition */) {\r\n        phaser.register(); // Equivalent to countUp\r\n        // do some work asynchronously, invoking\r\n        // phaser.arriveAndDeregister() (equiv to countDown) in a finally block\r\n    }\r\n    phaser.arriveAndAwaitAdvance(); // await any async tasks to complete\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Phaser.html","title":"Latch that can be incremented","body":"<p>You could also use a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Phaser.html\" rel=\"noreferrer\">Phaser (java.util.concurrent.Phaser)</a></p>\n<pre><code>final Phaser phaser = new Phaser(1); // register self\nwhile (/* some condition */) {\n    phaser.register(); // Equivalent to countUp\n    // do some work asynchronously, invoking\n    // phaser.arriveAndDeregister() (equiv to countDown) in a finally block\n}\nphaser.arriveAndAwaitAdvance(); // await any async tasks to complete\n</code></pre>\n"},{"tags":[],"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456869941,"creation_date":1456869941,"answer_id":35734537,"question_id":14255019,"body_markdown":"This is a variation on `CounterLatch`, available from the Apache site.  \r\n\r\nTheir version, for reasons best known to themselves, blocks the caller thread **while** the variable (`AtomicInteger`) is at a given value.  \r\n\r\nBut it is the height of easiness to tweak this code so that you can choose either just what the Apache version does, or... to say &quot;wait here **until** the counter reaches a certain value&quot;.  Arguably the latter is going to have more applicability.  In my particular case I rustled this up because I wanted to check that all &quot;chunks&quot; had been published in `SwingWorker.process()`... but I have since found other uses for it.\r\n\r\nHere it is written in Jython, officially the best language in the world (TM). I am going to rustle up a Java version in due course.\r\n\r\n    class CounterLatch():\r\n        def __init__( self, initial = 0, wait_value = 0, lift_on_reached = True ):\r\n            self.count = java.util.concurrent.atomic.AtomicLong( initial )\r\n            self.signal = java.util.concurrent.atomic.AtomicLong( wait_value )\r\n    \r\n            class Sync( java.util.concurrent.locks.AbstractQueuedSynchronizer ):\r\n                def tryAcquireShared( sync_self, arg ):\r\n                    if lift_on_reached:\r\n                        return -1 if (( not self.released.get() ) and self.count.get() != self.signal.get() ) else 1\r\n                    else:\r\n                        return -1 if (( not self.released.get() ) and self.count.get() == self.signal.get() ) else 1\r\n                def tryReleaseShared( self, args ):\r\n                    return True\r\n    \r\n            self.sync = Sync()\r\n            self.released = java.util.concurrent.atomic.AtomicBoolean() # initialised at False\r\n    \r\n        def await( self, *args ):\r\n            if args:\r\n                assert len( args ) == 2\r\n                assert type( args[ 0 ] ) is int\r\n                timeout = args[ 0 ]\r\n                assert type( args[ 1 ] ) is java.util.concurrent.TimeUnit\r\n                unit = args[ 1 ]\r\n                return self.sync.tryAcquireSharedNanos(1, unit.toNanos(timeout))\r\n            else:\r\n                self.sync.acquireSharedInterruptibly( 1 )\r\n    \r\n        def count_relative( self, n ):\r\n            previous = self.count.addAndGet( n )\r\n            if previous == self.signal.get():\r\n                self.sync.releaseShared( 0 )\r\n            return previous\r\n\r\nNB the Apache version uses the keyword `volatile` for `signal` and `released`.  In Jython I don&#39;t think this exists as such, but using `AtomicInteger` and `AtomicBoolean` should ensure that no values are &quot;out of date&quot; in any thread.\r\n\r\nExample usage:\r\n\r\nIn the SwingWorker constructor:\r\n\r\n    self.publication_counter_latch = CounterLatch() \r\n\r\nIn SW.publish:\r\n\r\n    # increase counter value BEFORE publishing chunks\r\n    self.publication_counter_latch.count_relative( len( chunks ) )\r\n    self.super__publish( chunks )\r\n\r\nIn SW.process:\r\n\r\n    # ... do sthg [HERE] with the chunks!\r\n    # AFTER having done what you want to do with your chunks:\r\n    self.publication_counter_latch.count_relative( - len( chunks ) )\r\n\r\nIn the thread waiting for chunk processing to stop:\r\n\r\n    worker.publication_counter_latch.await()\r\n\r\n","title":"Latch that can be incremented","body":"<p>This is a variation on <code>CounterLatch</code>, available from the Apache site.  </p>\n\n<p>Their version, for reasons best known to themselves, blocks the caller thread <strong>while</strong> the variable (<code>AtomicInteger</code>) is at a given value.  </p>\n\n<p>But it is the height of easiness to tweak this code so that you can choose either just what the Apache version does, or... to say \"wait here <strong>until</strong> the counter reaches a certain value\".  Arguably the latter is going to have more applicability.  In my particular case I rustled this up because I wanted to check that all \"chunks\" had been published in <code>SwingWorker.process()</code>... but I have since found other uses for it.</p>\n\n<p>Here it is written in Jython, officially the best language in the world (TM). I am going to rustle up a Java version in due course.</p>\n\n<pre><code>class CounterLatch():\n    def __init__( self, initial = 0, wait_value = 0, lift_on_reached = True ):\n        self.count = java.util.concurrent.atomic.AtomicLong( initial )\n        self.signal = java.util.concurrent.atomic.AtomicLong( wait_value )\n\n        class Sync( java.util.concurrent.locks.AbstractQueuedSynchronizer ):\n            def tryAcquireShared( sync_self, arg ):\n                if lift_on_reached:\n                    return -1 if (( not self.released.get() ) and self.count.get() != self.signal.get() ) else 1\n                else:\n                    return -1 if (( not self.released.get() ) and self.count.get() == self.signal.get() ) else 1\n            def tryReleaseShared( self, args ):\n                return True\n\n        self.sync = Sync()\n        self.released = java.util.concurrent.atomic.AtomicBoolean() # initialised at False\n\n    def await( self, *args ):\n        if args:\n            assert len( args ) == 2\n            assert type( args[ 0 ] ) is int\n            timeout = args[ 0 ]\n            assert type( args[ 1 ] ) is java.util.concurrent.TimeUnit\n            unit = args[ 1 ]\n            return self.sync.tryAcquireSharedNanos(1, unit.toNanos(timeout))\n        else:\n            self.sync.acquireSharedInterruptibly( 1 )\n\n    def count_relative( self, n ):\n        previous = self.count.addAndGet( n )\n        if previous == self.signal.get():\n            self.sync.releaseShared( 0 )\n        return previous\n</code></pre>\n\n<p>NB the Apache version uses the keyword <code>volatile</code> for <code>signal</code> and <code>released</code>.  In Jython I don't think this exists as such, but using <code>AtomicInteger</code> and <code>AtomicBoolean</code> should ensure that no values are \"out of date\" in any thread.</p>\n\n<p>Example usage:</p>\n\n<p>In the SwingWorker constructor:</p>\n\n<pre><code>self.publication_counter_latch = CounterLatch() \n</code></pre>\n\n<p>In SW.publish:</p>\n\n<pre><code># increase counter value BEFORE publishing chunks\nself.publication_counter_latch.count_relative( len( chunks ) )\nself.super__publish( chunks )\n</code></pre>\n\n<p>In SW.process:</p>\n\n<pre><code># ... do sthg [HERE] with the chunks!\n# AFTER having done what you want to do with your chunks:\nself.publication_counter_latch.count_relative( - len( chunks ) )\n</code></pre>\n\n<p>In the thread waiting for chunk processing to stop:</p>\n\n<pre><code>worker.publication_counter_latch.await()\n</code></pre>\n"}],"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20224,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":14260716,"answer_count":6,"score":37,"last_activity_date":1691532584,"creation_date":1357811680,"question_id":14255019,"body_markdown":"Does anyone know if there is any latch implementation that does the following:\r\n\r\n* has a method to decrement the latch value, or wait if the value is zero\r\n* has a method for waiting for the latch value to be zero\r\n* has a method for adding a number to the latch&#39;s value\r\n","title":"Latch that can be incremented","body":"<p>Does anyone know if there is any latch implementation that does the following:</p>\n\n<ul>\n<li>has a method to decrement the latch value, or wait if the value is zero</li>\n<li>has a method for waiting for the latch value to be zero</li>\n<li>has a method for adding a number to the latch's value</li>\n</ul>\n"},{"tags":["java","swing","user-interface","highdpi"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1691530729,"post_id":76862844,"comment_id":135503682,"body_markdown":"I&#39;m curious as to the reason for creating a &quot;off screen buffer&quot; image within `paintComponent`, which is already double buffered, but lets, for the moment, just assume that this is a demonstration of the problem and not the actual implementation.  You could make use of the `Graphics` current transformation, `Graphics2D#getTransform` and it&#39;s `getScaleX/getScaleY` methods - you could then generate an image and apply this scaling to it (based on what I&#39;ve read)","body":"I&#39;m curious as to the reason for creating a &quot;off screen buffer&quot; image within <code>paintComponent</code>, which is already double buffered, but lets, for the moment, just assume that this is a demonstration of the problem and not the actual implementation.  You could make use of the <code>Graphics</code> current transformation, <code>Graphics2D#getTransform</code> and it&#39;s <code>getScaleX&#47;getScaleY</code> methods - you could then generate an image and apply this scaling to it (based on what I&#39;ve read)"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1691530839,"post_id":76862844,"comment_id":135503692,"body_markdown":"https://stackoverflow.com/questions/43057457/jdk-9-high-dpi-disable-for-specific-panel might help a bit","body":"<a href=\"https://stackoverflow.com/questions/43057457/jdk-9-high-dpi-disable-for-specific-panel\" title=\"jdk 9 high dpi disable for specific panel\">stackoverflow.com/questions/43057457/&hellip;</a> might help a bit"}],"answers":[{"comments":[{"owner":{"account_id":4449358,"reputation":163,"user_id":9312586,"display_name":"COTO"},"score":0,"creation_date":1691537339,"post_id":76863397,"comment_id":135504407,"body_markdown":"Curious that the rendering results aren&#39;t identical, as you say. But the result looks nice. The content being rendered by `drawIn()` is provided by multiple subroutines in my case, rather than being static. But I can adapt this to my needs by having the class compile a list of `Graphics2D` operations to perform when `drawIn()` is invoked (rather than performing them immediately), and dispatch them all at once. Thanks for the advice.","body":"Curious that the rendering results aren&#39;t identical, as you say. But the result looks nice. The content being rendered by <code>drawIn()</code> is provided by multiple subroutines in my case, rather than being static. But I can adapt this to my needs by having the class compile a list of <code>Graphics2D</code> operations to perform when <code>drawIn()</code> is invoked (rather than performing them immediately), and dispatch them all at once. Thanks for the advice."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1691537417,"post_id":76863397,"comment_id":135504413,"body_markdown":"@VGR Just an FYI, I think Java 1.4 (or so), a `Graphics` context been passed to a Swing component is guaranteed to be an instance of `Graphics2D`","body":"@VGR Just an FYI, I think Java 1.4 (or so), a <code>Graphics</code> context been passed to a Swing component is guaranteed to be an instance of <code>Graphics2D</code>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1691555938,"post_id":76863397,"comment_id":135505876,"body_markdown":"@MadProgrammer I’m aware, but the instanceof check was in the question, and I didn’t want to change the code more than I had to.","body":"@MadProgrammer I’m aware, but the instanceof check was in the question, and I didn’t want to change the code more than I had to."}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691531163,"creation_date":1691531163,"answer_id":76863397,"question_id":76862844,"body_markdown":"There is something like scalingAwareBuffer.  It’s the [RenderableImage](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/renderable/RenderableImage.html) interface.\r\n\r\nI’m not certain this will help, but in theory it should.  RenderableImage looks like it has a lot of methods, but most of them are very simple.  The important ones are the three create… methods.\r\n\r\nEven this won’t produce an identical copy from the image (due to the use of the GPU when drawing directly to the screen?), but the image should at least scale properly.\r\n\r\n    import java.util.Vector;\r\n    import java.util.Map;\r\n\r\n    import java.awt.Container;\r\n    import java.awt.Color;\r\n    import java.awt.Font;\r\n    import java.awt.Image;\r\n    import java.awt.Shape;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.BasicStroke;\r\n    import java.awt.RenderingHints;\r\n    import java.awt.EventQueue;\r\n\r\n    import java.awt.geom.Line2D;\r\n    import java.awt.geom.Point2D;\r\n    import java.awt.geom.Rectangle2D;\r\n    import java.awt.geom.AffineTransform;\r\n\r\n    import java.awt.image.BufferedImage;\r\n    import java.awt.image.RenderedImage;\r\n    import java.awt.image.renderable.RenderableImage;\r\n    import java.awt.image.renderable.RenderContext;\r\n\r\n    import javax.swing.JComponent;\r\n    import javax.swing.JFrame;\r\n\r\n    public class ScaledImageRenderExample1 {\r\n        public static void main(String[] args) {\r\n            EventQueue.invokeLater(() -&gt; {\r\n                JFrame jf = new JFrame(&quot;Demo&quot;);\r\n                Container cp = jf.getContentPane();\r\n                MyCanvas tl = new MyCanvas();\r\n                cp.add(tl);\r\n                jf.setSize(500, 250);\r\n                jf.setLocationByPlatform( true );\r\n                jf.setVisible(true);\r\n                jf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n            });\r\n        }\r\n\r\n        static class MyCanvas extends JComponent {\r\n            private static final long serialVersionUID = 1;\r\n\r\n            @Override\r\n            public void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                if( g instanceof Graphics2D g2 ) {\r\n                    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n                        RenderingHints.VALUE_ANTIALIAS_ON);\r\n\r\n                    g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n                    g2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\r\n                    g2.setStroke( new BasicStroke( 2.3f ) );\r\n                    g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n\r\n                    g2.drawRenderableImage(new CakeImage(),\r\n                        AffineTransform.getTranslateInstance(0, 130));\r\n                }\r\n            }\r\n        }\r\n\r\n        static class CakeImage implements RenderableImage {\r\n            private static final int DEFAULT_WIDTH = 500;\r\n            private static final int DEFAULT_HEIGHT = 150;\r\n\r\n            private static final RenderingHints DEFAULT_HINTS =\r\n                new RenderingHints(Map.of(\r\n                    RenderingHints.KEY_ANTIALIASING,\r\n                    RenderingHints.VALUE_ANTIALIAS_ON,\r\n\r\n                    RenderingHints.KEY_TEXT_ANTIALIASING,\r\n                    RenderingHints.VALUE_TEXT_ANTIALIAS_ON,\r\n\r\n                    RenderingHints.KEY_FRACTIONALMETRICS,\r\n                    RenderingHints.VALUE_FRACTIONALMETRICS_ON,\r\n\r\n                    RenderingHints.KEY_RESOLUTION_VARIANT,\r\n                    RenderingHints.VALUE_RESOLUTION_VARIANT_SIZE_FIT,\r\n\r\n                    RenderingHints.KEY_RENDERING,\r\n                    RenderingHints.VALUE_RENDER_QUALITY,\r\n\r\n                    RenderingHints.KEY_INTERPOLATION,\r\n                    RenderingHints.VALUE_INTERPOLATION_BICUBIC,\r\n\r\n                    RenderingHints.KEY_STROKE_CONTROL,\r\n                    RenderingHints.VALUE_STROKE_PURE,\r\n\r\n                    RenderingHints.KEY_COLOR_RENDERING,\r\n                    RenderingHints.VALUE_COLOR_RENDER_QUALITY\r\n            ));\r\n\r\n\r\n            private final float x;\r\n            private final float y;\r\n\r\n            CakeImage() {\r\n                this(0, 0);\r\n            }\r\n\r\n            CakeImage(float x,\r\n                      float y) {\r\n\r\n                this.x = x;\r\n                this.y = y;\r\n            }\r\n\r\n            @Override\r\n            public float getMinX() {\r\n                return x;\r\n            }\r\n\r\n            @Override\r\n            public float getMinY() {\r\n                return y;\r\n            }\r\n\r\n            @Override\r\n            public float getWidth() {\r\n                return DEFAULT_WIDTH;\r\n            }\r\n\r\n            @Override\r\n            public float getHeight() {\r\n                return DEFAULT_HEIGHT;\r\n            }\r\n\r\n            @Override\r\n            public boolean isDynamic() {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public Object getProperty(String name) {\r\n                return Image.UndefinedProperty;\r\n            }\r\n\r\n            @Override\r\n            public String[] getPropertyNames() {\r\n                return new String[0];\r\n            }\r\n\r\n            @Override\r\n            public Vector&lt;RenderableImage&gt; getSources() {\r\n                return null;\r\n            }\r\n\r\n            private void drawIn(Graphics2D g2) {\r\n                g2.setColor( Color.BLACK );\r\n                g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n                g2.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\r\n                g2.setStroke( new BasicStroke( 2.3f ) );\r\n                g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n            }\r\n\r\n            @Override\r\n            public RenderedImage createDefaultRendering() {\r\n                BufferedImage image = new BufferedImage(\r\n                    DEFAULT_WIDTH, DEFAULT_HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\r\n                Graphics2D g2 = (Graphics2D) image.getGraphics();\r\n                RenderingHints hints = g2.getRenderingHints();\r\n                hints.putAll(DEFAULT_HINTS);\r\n                g2.setRenderingHints(hints);\r\n                drawIn(g2);\r\n                g2.dispose();\r\n\r\n                return image;\r\n            }\r\n\r\n            @Override\r\n            public RenderedImage createScaledRendering(int width,\r\n                                                       int height,\r\n                                                       RenderingHints hints) {\r\n\r\n                BufferedImage image = new BufferedImage(width, height,\r\n                    BufferedImage.TYPE_INT_ARGB);\r\n\r\n                Graphics2D g2 = (Graphics2D) image.getGraphics();\r\n                g2.setRenderingHints(hints);\r\n                g2.scale((double) width / DEFAULT_WIDTH,\r\n                         (double) height / DEFAULT_HEIGHT);\r\n                drawIn(g2);\r\n                g2.dispose();\r\n\r\n                return image;\r\n            }\r\n\r\n            @Override\r\n            public RenderedImage createRendering(RenderContext context) {\r\n                Point2D size = new Point2D.Float(getWidth(), getHeight());\r\n\r\n                Shape shape = context.getAreaOfInterest();\r\n                if (shape != null) {\r\n                    Rectangle2D bounds = shape.getBounds2D();\r\n                    size = new Point2D.Double(\r\n                        bounds.getWidth(), bounds.getHeight());\r\n                }\r\n\r\n                context.getTransform().transform(size, size);\r\n\r\n                BufferedImage image = new BufferedImage(\r\n                    (int) Math.ceil(size.getX()),\r\n                    (int) Math.ceil(size.getY()),\r\n                    BufferedImage.TYPE_INT_ARGB);\r\n\r\n                Graphics2D g2 = (Graphics2D) image.getGraphics();\r\n                RenderingHints hints = context.getRenderingHints();\r\n                if (hints != null) {\r\n                    g2.setRenderingHints(hints);\r\n                } else {\r\n                    hints = g2.getRenderingHints();\r\n                    hints.putAll(DEFAULT_HINTS);\r\n                    g2.setRenderingHints(hints);\r\n                }\r\n                g2.setTransform(context.getTransform());\r\n                drawIn(g2);\r\n                g2.dispose();\r\n\r\n                return image;\r\n            }\r\n        }\r\n    }\r\n","title":"How can I avoid garbled text and vector graphics in Java Swing with UI scaling and off-screen buffering?","body":"<p>There is something like scalingAwareBuffer.  It’s the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/renderable/RenderableImage.html\" rel=\"nofollow noreferrer\">RenderableImage</a> interface.</p>\n<p>I’m not certain this will help, but in theory it should.  RenderableImage looks like it has a lot of methods, but most of them are very simple.  The important ones are the three create… methods.</p>\n<p>Even this won’t produce an identical copy from the image (due to the use of the GPU when drawing directly to the screen?), but the image should at least scale properly.</p>\n<pre><code>import java.util.Vector;\nimport java.util.Map;\n\nimport java.awt.Container;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.Image;\nimport java.awt.Shape;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.BasicStroke;\nimport java.awt.RenderingHints;\nimport java.awt.EventQueue;\n\nimport java.awt.geom.Line2D;\nimport java.awt.geom.Point2D;\nimport java.awt.geom.Rectangle2D;\nimport java.awt.geom.AffineTransform;\n\nimport java.awt.image.BufferedImage;\nimport java.awt.image.RenderedImage;\nimport java.awt.image.renderable.RenderableImage;\nimport java.awt.image.renderable.RenderContext;\n\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\n\npublic class ScaledImageRenderExample1 {\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; {\n            JFrame jf = new JFrame(&quot;Demo&quot;);\n            Container cp = jf.getContentPane();\n            MyCanvas tl = new MyCanvas();\n            cp.add(tl);\n            jf.setSize(500, 250);\n            jf.setLocationByPlatform( true );\n            jf.setVisible(true);\n            jf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n        });\n    }\n\n    static class MyCanvas extends JComponent {\n        private static final long serialVersionUID = 1;\n\n        @Override\n        public void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            if( g instanceof Graphics2D g2 ) {\n                g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                    RenderingHints.VALUE_ANTIALIAS_ON);\n\n                g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n                g2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\n                g2.setStroke( new BasicStroke( 2.3f ) );\n                g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n\n                g2.drawRenderableImage(new CakeImage(),\n                    AffineTransform.getTranslateInstance(0, 130));\n            }\n        }\n    }\n\n    static class CakeImage implements RenderableImage {\n        private static final int DEFAULT_WIDTH = 500;\n        private static final int DEFAULT_HEIGHT = 150;\n\n        private static final RenderingHints DEFAULT_HINTS =\n            new RenderingHints(Map.of(\n                RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON,\n\n                RenderingHints.KEY_TEXT_ANTIALIASING,\n                RenderingHints.VALUE_TEXT_ANTIALIAS_ON,\n\n                RenderingHints.KEY_FRACTIONALMETRICS,\n                RenderingHints.VALUE_FRACTIONALMETRICS_ON,\n\n                RenderingHints.KEY_RESOLUTION_VARIANT,\n                RenderingHints.VALUE_RESOLUTION_VARIANT_SIZE_FIT,\n\n                RenderingHints.KEY_RENDERING,\n                RenderingHints.VALUE_RENDER_QUALITY,\n\n                RenderingHints.KEY_INTERPOLATION,\n                RenderingHints.VALUE_INTERPOLATION_BICUBIC,\n\n                RenderingHints.KEY_STROKE_CONTROL,\n                RenderingHints.VALUE_STROKE_PURE,\n\n                RenderingHints.KEY_COLOR_RENDERING,\n                RenderingHints.VALUE_COLOR_RENDER_QUALITY\n        ));\n\n\n        private final float x;\n        private final float y;\n\n        CakeImage() {\n            this(0, 0);\n        }\n\n        CakeImage(float x,\n                  float y) {\n\n            this.x = x;\n            this.y = y;\n        }\n\n        @Override\n        public float getMinX() {\n            return x;\n        }\n\n        @Override\n        public float getMinY() {\n            return y;\n        }\n\n        @Override\n        public float getWidth() {\n            return DEFAULT_WIDTH;\n        }\n\n        @Override\n        public float getHeight() {\n            return DEFAULT_HEIGHT;\n        }\n\n        @Override\n        public boolean isDynamic() {\n            return false;\n        }\n\n        @Override\n        public Object getProperty(String name) {\n            return Image.UndefinedProperty;\n        }\n\n        @Override\n        public String[] getPropertyNames() {\n            return new String[0];\n        }\n\n        @Override\n        public Vector&lt;RenderableImage&gt; getSources() {\n            return null;\n        }\n\n        private void drawIn(Graphics2D g2) {\n            g2.setColor( Color.BLACK );\n            g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n            g2.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\n            g2.setStroke( new BasicStroke( 2.3f ) );\n            g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n        }\n\n        @Override\n        public RenderedImage createDefaultRendering() {\n            BufferedImage image = new BufferedImage(\n                DEFAULT_WIDTH, DEFAULT_HEIGHT, BufferedImage.TYPE_INT_ARGB);\n\n            Graphics2D g2 = (Graphics2D) image.getGraphics();\n            RenderingHints hints = g2.getRenderingHints();\n            hints.putAll(DEFAULT_HINTS);\n            g2.setRenderingHints(hints);\n            drawIn(g2);\n            g2.dispose();\n\n            return image;\n        }\n\n        @Override\n        public RenderedImage createScaledRendering(int width,\n                                                   int height,\n                                                   RenderingHints hints) {\n\n            BufferedImage image = new BufferedImage(width, height,\n                BufferedImage.TYPE_INT_ARGB);\n\n            Graphics2D g2 = (Graphics2D) image.getGraphics();\n            g2.setRenderingHints(hints);\n            g2.scale((double) width / DEFAULT_WIDTH,\n                     (double) height / DEFAULT_HEIGHT);\n            drawIn(g2);\n            g2.dispose();\n\n            return image;\n        }\n\n        @Override\n        public RenderedImage createRendering(RenderContext context) {\n            Point2D size = new Point2D.Float(getWidth(), getHeight());\n\n            Shape shape = context.getAreaOfInterest();\n            if (shape != null) {\n                Rectangle2D bounds = shape.getBounds2D();\n                size = new Point2D.Double(\n                    bounds.getWidth(), bounds.getHeight());\n            }\n\n            context.getTransform().transform(size, size);\n\n            BufferedImage image = new BufferedImage(\n                (int) Math.ceil(size.getX()),\n                (int) Math.ceil(size.getY()),\n                BufferedImage.TYPE_INT_ARGB);\n\n            Graphics2D g2 = (Graphics2D) image.getGraphics();\n            RenderingHints hints = context.getRenderingHints();\n            if (hints != null) {\n                g2.setRenderingHints(hints);\n            } else {\n                hints = g2.getRenderingHints();\n                hints.putAll(DEFAULT_HINTS);\n                g2.setRenderingHints(hints);\n            }\n            g2.setTransform(context.getTransform());\n            drawIn(g2);\n            g2.dispose();\n\n            return image;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4449358,"reputation":163,"user_id":9312586,"display_name":"COTO"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691531163,"creation_date":1691524553,"question_id":76862844,"body_markdown":"I&#39;m developing a Java application where several `JPanel`s (*not* `JFrame`s) have complex animations that necessitate drawing to an off-screen buffer before blitting to the display surface. A problem I&#39;m having is that Swing is performing UI scaling for high-DPI screens, and the off-screen buffer (a raster) isn&#39;t &quot;aware&quot; of the scaling. Consequently, when text or graphics are rendered to the buffer, and the buffer is blitted to the `JPanel`, Swing scales the graphic as a raster and the result looks like garbage.\r\n\r\nA simple example is:\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.geom.Line2D;\r\n\r\nimport javax.swing.JComponent;\r\nimport javax.swing.JFrame;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tJFrame jf = new JFrame(&quot;Demo&quot;);\r\n\t\tContainer cp = jf.getContentPane();\r\n\t\tMyCanvas tl = new MyCanvas();\r\n\t\tcp.add(tl);\r\n\t\tjf.setSize(500, 250);\r\n\t\tjf.setVisible(true);\r\n\t\tjf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n\t}\r\n}\r\n\r\nclass MyCanvas extends JComponent {\r\n\r\n\t@Override\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tif( g instanceof Graphics2D g2 ) {\r\n\t\t\tg2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n\t\t\t\tRenderingHints.VALUE_ANTIALIAS_ON);\r\n\r\n\t\t\tg2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n\t\t\tg2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\r\n\t\t\tg2.setStroke( new BasicStroke( 2.3f ) );\r\n\t\t\tg2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n\r\n\t\t\tImage I = createImage( 500, 150 );\r\n\t\t\tGraphics2D g2_ = (Graphics2D)I.getGraphics();\r\n\t\t\tg2_.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n\t\t\t\tRenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\t\tg2_.setColor( Color.BLACK );\r\n\t\t\tg2_.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n\t\t\tg2_.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\r\n\t\t\tg2_.setStroke( new BasicStroke( 2.3f ) );\r\n\t\t\tg2_.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n\t\t\tg2_.dispose();\r\n\t\t\tg2.drawImage( I, 0, 130, null );\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nFrom this, compiling with JDK 20 on my Windows 11 machine, I get:\r\n\r\n[![example of poor UI scaling in Java Swing][1]][1]\r\n\r\nOn the top is text and graphics rendered directly to the `JPanel`. On the bottom is the same content rendered via an intermediary image.\r\n\r\nIdeally, I&#39;m looking for a method, e.g., `Image createScalingAwareBuffer( JPanel jp, int width, int height )` that returns an image `I`, in the same vein as `JPanel.createImage( ... )` but where the returned `Image` is *vector* scaling aware, such that `jp.drawImage( I )` or equivalent displays the lower graphic content identically to the upper content.\r\n\r\nI suspect that rendering to the back buffer in a double-buffered Swing component has this kind of &quot;awareness&quot;, but this isn&#39;t an option in my case since I need to precisely control when buffer flips occur on a panel-by-panel basis, which (insofar as I know) is impossible in Swing.\r\n\r\nIs there any solution for this without a radical rewrite (i.e., migrating away from Swing, etc.)?\r\n\r\nI should also note that I **don&#39;t** want to disable the UI scaling (e.g., using `-Dsun.java2d.uiScale=1` in VM options), hence &quot;just disable UI scaling&quot; isn&#39;t really a solution.\r\n\r\n  [1]: https://i.stack.imgur.com/HG05E.png","title":"How can I avoid garbled text and vector graphics in Java Swing with UI scaling and off-screen buffering?","body":"<p>I'm developing a Java application where several <code>JPanel</code>s (<em>not</em> <code>JFrame</code>s) have complex animations that necessitate drawing to an off-screen buffer before blitting to the display surface. A problem I'm having is that Swing is performing UI scaling for high-DPI screens, and the off-screen buffer (a raster) isn't &quot;aware&quot; of the scaling. Consequently, when text or graphics are rendered to the buffer, and the buffer is blitted to the <code>JPanel</code>, Swing scales the graphic as a raster and the result looks like garbage.</p>\n<p>A simple example is:</p>\n<pre><code>import java.awt.*;\nimport java.awt.geom.Line2D;\n\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\n\npublic class Main {\n    public static void main(String[] args) {\n        JFrame jf = new JFrame(&quot;Demo&quot;);\n        Container cp = jf.getContentPane();\n        MyCanvas tl = new MyCanvas();\n        cp.add(tl);\n        jf.setSize(500, 250);\n        jf.setVisible(true);\n        jf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n    }\n}\n\nclass MyCanvas extends JComponent {\n\n    @Override\n    public void paintComponent(Graphics g) {\n        if( g instanceof Graphics2D g2 ) {\n            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n\n            g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n            g2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\n            g2.setStroke( new BasicStroke( 2.3f ) );\n            g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n\n            Image I = createImage( 500, 150 );\n            Graphics2D g2_ = (Graphics2D)I.getGraphics();\n            g2_.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n            g2_.setColor( Color.BLACK );\n            g2_.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n            g2_.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\n            g2_.setStroke( new BasicStroke( 2.3f ) );\n            g2_.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n            g2_.dispose();\n            g2.drawImage( I, 0, 130, null );\n        }\n    }\n}\n</code></pre>\n<p>From this, compiling with JDK 20 on my Windows 11 machine, I get:</p>\n<p><a href=\"https://i.stack.imgur.com/HG05E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HG05E.png\" alt=\"example of poor UI scaling in Java Swing\" /></a></p>\n<p>On the top is text and graphics rendered directly to the <code>JPanel</code>. On the bottom is the same content rendered via an intermediary image.</p>\n<p>Ideally, I'm looking for a method, e.g., <code>Image createScalingAwareBuffer( JPanel jp, int width, int height )</code> that returns an image <code>I</code>, in the same vein as <code>JPanel.createImage( ... )</code> but where the returned <code>Image</code> is <em>vector</em> scaling aware, such that <code>jp.drawImage( I )</code> or equivalent displays the lower graphic content identically to the upper content.</p>\n<p>I suspect that rendering to the back buffer in a double-buffered Swing component has this kind of &quot;awareness&quot;, but this isn't an option in my case since I need to precisely control when buffer flips occur on a panel-by-panel basis, which (insofar as I know) is impossible in Swing.</p>\n<p>Is there any solution for this without a radical rewrite (i.e., migrating away from Swing, etc.)?</p>\n<p>I should also note that I <strong>don't</strong> want to disable the UI scaling (e.g., using <code>-Dsun.java2d.uiScale=1</code> in VM options), hence &quot;just disable UI scaling&quot; isn't really a solution.</p>\n"},{"tags":["javascript","java","android","reverse-engineering","frida"],"answers":[{"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1691530402,"creation_date":1634888899,"answer_id":69673164,"question_id":69668741,"body_markdown":"Looks like the common problem in Frida that the way to access fields is different in Frida. \r\n\r\nFrida uses JavaScript code so it can&#39;t handle non-JavaScript objects directly.\r\nTherefore it wraps &quot;native&quot; objects (Android Java objects in this case) in JavaScript objects.\r\n\r\nIf you now call in Frida `this.carrier` you are getting the Frida JavaScript wrapper, not the Java Carrier instance you are aiming.\r\n\r\nOf course the Frida JavaScript wrapper does not has the methods you try to call, therefore `this.carrier.setId(123);` will always fail.\r\n\r\n\r\n# Accessing a Java field with Frida\r\n\r\nTo access a field you always have to call `.value` on it to get the actual value:\r\n\r\nSo if you want `this.carrier` you have to use `this.carrier.value`.\r\n\r\nIn case there is a name collision with a method of the same name Frida by default assigns the name to the method. If you want to access the field instead add an underscore an the beginning of the field name.\r\nIf there would exist a method named `carrier` you could access the field this way: `this._carrier.value`\r\n\r\n## Reference to Frida help pages\r\n\r\nThis is also described on the Frida pages, e.g. [here][1]: \r\n&gt; Note we use `this.m.value = 0` instead of `this.m = 0` to set the field’s value. If there is also a method in this class called m, we need to use `this._m.value = 0` to set the value of field m. In general, when looking at the properties of objects it will be necessary to use `.value` to access the values those fields refer to.\r\n\r\n# Complete simplified code\r\n\r\nBut in your case you can simplify everything by just using a local variable:\r\n\r\n    Java.perform(function () {\r\n        var SignUpActivity = Java.use(&#39;com.app.features.authentication.SignUpActivity&#39;);\r\n        SignUpActivity.validatePhoneNumber.implementation = function() {\r\n            \r\n            const Carrier = Java.use(&quot;com.app.Carrier&quot;);\r\n            const c = Carrier.$new();\r\n            c.setId(123);\r\n            this._carrier.value = c;\r\n        };\r\n    });\r\n\r\n\r\n  [1]: https://frida.re/docs/examples/android/#example-tool-built-for-an-android-ctf","title":"Setting a member in current class using Frida","body":"<p>Looks like the common problem in Frida that the way to access fields is different in Frida.</p>\n<p>Frida uses JavaScript code so it can't handle non-JavaScript objects directly.\nTherefore it wraps &quot;native&quot; objects (Android Java objects in this case) in JavaScript objects.</p>\n<p>If you now call in Frida <code>this.carrier</code> you are getting the Frida JavaScript wrapper, not the Java Carrier instance you are aiming.</p>\n<p>Of course the Frida JavaScript wrapper does not has the methods you try to call, therefore <code>this.carrier.setId(123);</code> will always fail.</p>\n<h1>Accessing a Java field with Frida</h1>\n<p>To access a field you always have to call <code>.value</code> on it to get the actual value:</p>\n<p>So if you want <code>this.carrier</code> you have to use <code>this.carrier.value</code>.</p>\n<p>In case there is a name collision with a method of the same name Frida by default assigns the name to the method. If you want to access the field instead add an underscore an the beginning of the field name.\nIf there would exist a method named <code>carrier</code> you could access the field this way: <code>this._carrier.value</code></p>\n<h2>Reference to Frida help pages</h2>\n<p>This is also described on the Frida pages, e.g. <a href=\"https://frida.re/docs/examples/android/#example-tool-built-for-an-android-ctf\" rel=\"nofollow noreferrer\">here</a>:</p>\n<blockquote>\n<p>Note we use <code>this.m.value = 0</code> instead of <code>this.m = 0</code> to set the field’s value. If there is also a method in this class called m, we need to use <code>this._m.value = 0</code> to set the value of field m. In general, when looking at the properties of objects it will be necessary to use <code>.value</code> to access the values those fields refer to.</p>\n</blockquote>\n<h1>Complete simplified code</h1>\n<p>But in your case you can simplify everything by just using a local variable:</p>\n<pre><code>Java.perform(function () {\n    var SignUpActivity = Java.use('com.app.features.authentication.SignUpActivity');\n    SignUpActivity.validatePhoneNumber.implementation = function() {\n        \n        const Carrier = Java.use(&quot;com.app.Carrier&quot;);\n        const c = Carrier.$new();\n        c.setId(123);\n        this._carrier.value = c;\n    };\n});\n</code></pre>\n"}],"owner":{"account_id":451985,"reputation":133,"user_id":848165,"accept_rate":17,"display_name":"toothpick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2705,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69673164,"answer_count":1,"score":1,"last_activity_date":1691530402,"creation_date":1634850043,"question_id":69668741,"body_markdown":"I am hooking a certain function in Frida which uses the code:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    this.carrier.getId()\r\n\r\nHowever, at this point in time *this.carrier* has not been set yet, which causes the app to crash.   \r\nSo I am thinking of manually setting this member in the current function in the class. So that carrier will exist by the time the code takes place.   \r\nThe problem is that I encounter a problem by doing that.   \r\n\r\nSo far this is what I got:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    Java.perform(function () {\r\n        var SignUpActivity = Java.use(&#39;com.app.features.authentication.SignUpActivity&#39;);\r\n        SignUpActivity.validatePhoneNumber.implementation = function() {\r\n            \r\n            var Carrier = Java.use(&quot;com.app.Carrier&quot;);\r\n            this.carrier = Carrier.$new();\r\n            console.log(this.carrier) // This prints &quot;[object Object]&quot;\r\n            console.log(this.carrier.setId) // This prints &quot;undefined&quot;\r\n            this.carrier.setId(123); // crashes\r\n\r\n        };\r\n    });\r\n\r\nCode of carrier:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.app;\r\n\r\n    import android.os.Parcel;\r\n    import android.os.Parcelable;\r\n\r\n    public class Carrier implements Parcelable {\r\n\r\n        private int id;\r\n        private String name;\r\n        private String officeTerminalAddress;\r\n\r\n        public Carrier() {\r\n        }\r\n\r\n        protected Carrier(Parcel parcel) {\r\n            this.id = parcel.readInt();\r\n            this.name = parcel.readString();\r\n            this.officeTerminalAddress = parcel.readString();\r\n        }\r\n\r\n        public int getId() {\r\n            return this.id;\r\n        }\r\n\r\n        public void setId(int i) {\r\n            this.id = i;\r\n        }\r\n\r\n    }","title":"Setting a member in current class using Frida","body":"<p>I am hooking a certain function in Frida which uses the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.carrier.getId()\n</code></pre>\n<p>However, at this point in time <em>this.carrier</em> has not been set yet, which causes the app to crash.<br />\nSo I am thinking of manually setting this member in the current function in the class. So that carrier will exist by the time the code takes place.<br />\nThe problem is that I encounter a problem by doing that.</p>\n<p>So far this is what I got:</p>\n<pre class=\"lang-js prettyprint-override\"><code>Java.perform(function () {\n    var SignUpActivity = Java.use('com.app.features.authentication.SignUpActivity');\n    SignUpActivity.validatePhoneNumber.implementation = function() {\n        \n        var Carrier = Java.use(&quot;com.app.Carrier&quot;);\n        this.carrier = Carrier.$new();\n        console.log(this.carrier) // This prints &quot;[object Object]&quot;\n        console.log(this.carrier.setId) // This prints &quot;undefined&quot;\n        this.carrier.setId(123); // crashes\n\n    };\n});\n</code></pre>\n<p>Code of carrier:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.app;\n\nimport android.os.Parcel;\nimport android.os.Parcelable;\n\npublic class Carrier implements Parcelable {\n\n    private int id;\n    private String name;\n    private String officeTerminalAddress;\n\n    public Carrier() {\n    }\n\n    protected Carrier(Parcel parcel) {\n        this.id = parcel.readInt();\n        this.name = parcel.readString();\n        this.officeTerminalAddress = parcel.readString();\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int i) {\n        this.id = i;\n    }\n\n}\n</code></pre>\n"},{"tags":["javascript","java","android","security","frida"],"answers":[{"comments":[{"owner":{"account_id":17873765,"reputation":101,"user_id":12984381,"display_name":"alm"},"score":0,"creation_date":1583002822,"post_id":60467285,"comment_id":106973353,"body_markdown":"Thanks for your tip. It got better, but the wrong attribute is still being searched.\nI try this code\n\n```\n      var vvv1 = Java.use(&#39;e.a.x.e&#39;); \n       var vvv2 = Java.cast(this._a.value,vvv1);\n```\n\nand get error\nError: Cast from &#39;java.util.concurrent.atomic.AtomicBoolean&#39; to &#39;e.a.x.e&#39; isn&#39;t possible","body":"Thanks for your tip. It got better, but the wrong attribute is still being searched. I try this code  ```       var vvv1 = Java.use(&#39;e.a.x.e&#39;);         var vvv2 = Java.cast(this._a.value,vvv1); ```  and get error Error: Cast from &#39;java.util.concurrent.atomic.AtomicBoolean&#39; to &#39;e.a.x.e&#39; isn&#39;t possible"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1583064116,"post_id":60467285,"comment_id":106984089,"body_markdown":"Yes, I missed some details. See my updated answer for an approach via reflection. Hopefully this approach works in your case. May be you should think about opening an [issue](https://github.com/frida/frida-java-bridge/issues) on the Frida Java-bridge project how to access the field not by their name but e.g. by it&#39;s type and/or index.","body":"Yes, I missed some details. See my updated answer for an approach via reflection. Hopefully this approach works in your case. May be you should think about opening an <a href=\"https://github.com/frida/frida-java-bridge/issues\" rel=\"nofollow noreferrer\">issue</a> on the Frida Java-bridge project how to access the field not by their name but e.g. by it&#39;s type and/or index."}],"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691530031,"creation_date":1582993727,"answer_id":60467285,"question_id":60465832,"body_markdown":"In case there is a conflict between a method and a field of the same name Frida has built in workaround: Prepend the field name with an underscore: `_a`.\r\n\r\n&gt; If there is a name collision, method &amp; member has the same name, an underscore will be added to member.\r\n\r\nBut I am not sure if this information is still valid. The current Frida Java bridge code does not like it would rename fields with colliding field names: https://github.com/frida/frida-java-bridge/blob/master/lib/class-factory.js#L301\r\n\r\nI also don&#39;t see a way to access the fields in Frida in a way that don&#39;t base on it&#39;s name. \r\n\r\nThe only chance I see is accessing the field via Java reflection:\r\n\r\n    const eaxe = Java.use(&quot;e.a.x.e&quot;);\r\n    for (f of eaxe.class.getDeclaredFields()) {\r\n        if (f.getType().getName() == &quot;e.a.x.e&quot;) {\r\n            f.setAccessible(true);\r\n            var fieldValue = f.get(this);\r\n            console.log(&quot;Field of type e.a.x.e has value: &quot; + fieldValue);\r\n        }\r\n    }\r\n\r\nNote: The code above has not been tested in Frida, therefore it may need some more refinement before it actually works.","title":"Frida - access to a class attribute that has the desired type","body":"<p>In case there is a conflict between a method and a field of the same name Frida has built in workaround: Prepend the field name with an underscore: <code>_a</code>.</p>\n<blockquote>\n<p>If there is a name collision, method &amp; member has the same name, an underscore will be added to member.</p>\n</blockquote>\n<p>But I am not sure if this information is still valid. The current Frida Java bridge code does not like it would rename fields with colliding field names: <a href=\"https://github.com/frida/frida-java-bridge/blob/master/lib/class-factory.js#L301\" rel=\"nofollow noreferrer\">https://github.com/frida/frida-java-bridge/blob/master/lib/class-factory.js#L301</a></p>\n<p>I also don't see a way to access the fields in Frida in a way that don't base on it's name.</p>\n<p>The only chance I see is accessing the field via Java reflection:</p>\n<pre><code>const eaxe = Java.use(&quot;e.a.x.e&quot;);\nfor (f of eaxe.class.getDeclaredFields()) {\n    if (f.getType().getName() == &quot;e.a.x.e&quot;) {\n        f.setAccessible(true);\n        var fieldValue = f.get(this);\n        console.log(&quot;Field of type e.a.x.e has value: &quot; + fieldValue);\n    }\n}\n</code></pre>\n<p>Note: The code above has not been tested in Frida, therefore it may need some more refinement before it actually works.</p>\n"},{"tags":[],"owner":{"account_id":17873765,"reputation":101,"user_id":12984381,"display_name":"alm"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1583149456,"creation_date":1583149456,"answer_id":60488176,"question_id":60465832,"body_markdown":"Thanks to Robert, a solution was found.The code made minor corrections\r\n\r\n    var lo_fld_eaxe;\r\n    var lv_found = false;\r\n    var lt_fields = this.getClass().getDeclaredFields();\r\n    for (var i = 0; i &lt; lt_fields.length &amp;&amp; lv_found == false; i++) {\r\n        if(lt_fields[i].getName().toString() == &#39;a&#39; &amp;&amp;  lt_fields[i].getType().getName().toString() == &#39;e.a.x.e&#39; ){\r\n           lo_fld_eaxe = lt_fields[i];\r\n           lv_found = true; \r\n      }\r\n    }\r\n    if(lv_found == true) {\r\n       lo_fld_eaxe.setAccessible(true);\r\n       try{ \r\n              var       lv_e_a_x_e = lo_fld_eaxe.get(this);   \r\n       }\r\n       catch(err){\r\n              console.log(&quot;Error:&quot;+err);\r\n       }\r\n     }\r\n\r\n","title":"Frida - access to a class attribute that has the desired type","body":"<p>Thanks to Robert, a solution was found.The code made minor corrections</p>\n\n<pre><code>var lo_fld_eaxe;\nvar lv_found = false;\nvar lt_fields = this.getClass().getDeclaredFields();\nfor (var i = 0; i &lt; lt_fields.length &amp;&amp; lv_found == false; i++) {\n    if(lt_fields[i].getName().toString() == 'a' &amp;&amp;  lt_fields[i].getType().getName().toString() == 'e.a.x.e' ){\n       lo_fld_eaxe = lt_fields[i];\n       lv_found = true; \n  }\n}\nif(lv_found == true) {\n   lo_fld_eaxe.setAccessible(true);\n   try{ \n          var       lv_e_a_x_e = lo_fld_eaxe.get(this);   \n   }\n   catch(err){\n          console.log(\"Error:\"+err);\n   }\n }\n</code></pre>\n"}],"owner":{"account_id":17873765,"reputation":101,"user_id":12984381,"display_name":"alm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4530,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":60488176,"answer_count":2,"score":2,"last_activity_date":1691530031,"creation_date":1582984189,"question_id":60465832,"body_markdown":"I have an android program that has been obfuscated. And in this program classes have attributes with the same name.\r\nDecompiled code like this\r\n\r\n    public class d implements c\r\n    {\r\n        public int a;\r\n        public Cache$Entry a;\r\n        public Cache a;\r\n        public volatile a a;\r\n        public e a;\r\n        public ByteArrayOutputStream a;\r\n        public volatile AtomicBoolean a;\r\n\r\nor smali code like this\r\n\r\n    # interfaces\r\n    .implements Le/a/x/c;\r\n    # instance fields\r\n    .field public a:I\r\n    .field public a:Lanetwork/channel/cache/Cache$Entry;\r\n    .field public a:Lanetwork/channel/cache/Cache;\r\n    .field public volatile a:Ld/a/w/a;\r\n    .field public a:Le/a/x/e;\r\n    .field public a:Ljava/io/ByteArrayOutputStream;\r\n    .field public volatile a:Ljava/util/concurrent/atomic/AtomicBoolean;  \r\n\r\nI create a hook to one method asd() and i need to access to attribute &quot;a&quot; of this class. But I need attribute &quot;a&quot; with type &quot;e.a.x.e&quot;\r\n\r\n    Java.perform(function () {\r\n       var var_ddd = Java.use(&quot;e.a.x.d&quot;);\r\n        var_ddd.asd.implementation = function() {\r\n           this.asd();\r\n           console.log(&quot;e.a.x.d.asd()&quot;,Java.cast(this.a.value,Java.use(&quot;e.a.x.e&quot;)));\r\n        };\r\n    });\r\n\r\nWhen I try to write this.a.value - I get a wrong attribute.\r\nWhen I write Java.cast(this.a.value,Java.use(&quot;e.a.x.e&quot;))\r\nI get message\r\n\r\n    TypeError: cannot read property &#39;hasOwnProperty&#39; of undefined\r\n\r\n\r\nPlease tell me how to get the right attribute with the right type","title":"Frida - access to a class attribute that has the desired type","body":"<p>I have an android program that has been obfuscated. And in this program classes have attributes with the same name.\nDecompiled code like this</p>\n\n<pre><code>public class d implements c\n{\n    public int a;\n    public Cache$Entry a;\n    public Cache a;\n    public volatile a a;\n    public e a;\n    public ByteArrayOutputStream a;\n    public volatile AtomicBoolean a;\n</code></pre>\n\n<p>or smali code like this</p>\n\n<pre><code># interfaces\n.implements Le/a/x/c;\n# instance fields\n.field public a:I\n.field public a:Lanetwork/channel/cache/Cache$Entry;\n.field public a:Lanetwork/channel/cache/Cache;\n.field public volatile a:Ld/a/w/a;\n.field public a:Le/a/x/e;\n.field public a:Ljava/io/ByteArrayOutputStream;\n.field public volatile a:Ljava/util/concurrent/atomic/AtomicBoolean;  \n</code></pre>\n\n<p>I create a hook to one method asd() and i need to access to attribute \"a\" of this class. But I need attribute \"a\" with type \"e.a.x.e\"</p>\n\n<pre><code>Java.perform(function () {\n   var var_ddd = Java.use(\"e.a.x.d\");\n    var_ddd.asd.implementation = function() {\n       this.asd();\n       console.log(\"e.a.x.d.asd()\",Java.cast(this.a.value,Java.use(\"e.a.x.e\")));\n    };\n});\n</code></pre>\n\n<p>When I try to write this.a.value - I get a wrong attribute.\nWhen I write Java.cast(this.a.value,Java.use(\"e.a.x.e\"))\nI get message</p>\n\n<pre><code>TypeError: cannot read property 'hasOwnProperty' of undefined\n</code></pre>\n\n<p>Please tell me how to get the right attribute with the right type</p>\n"},{"tags":["java","google-cloud-dataflow","avro","apache-beam-io","beam"],"comments":[{"owner":{"account_id":23523457,"reputation":1405,"user_id":17570298,"display_name":"Shipra Sarkar"},"score":0,"creation_date":1670942586,"post_id":74782750,"comment_id":131986510,"body_markdown":"Hi @oikonomiyaki, Can you try using the read class as mentioned in this [documentation](https://beam.apache.org/releases/javadoc/2.0.0/index.html?org/apache/beam/sdk/io/AvroIO.html) ? Let me know if that helps.","body":"Hi @oikonomiyaki, Can you try using the read class as mentioned in this <a href=\"https://beam.apache.org/releases/javadoc/2.0.0/index.html?org/apache/beam/sdk/io/AvroIO.html\" rel=\"nofollow noreferrer\">documentation</a> ? Let me know if that helps."},{"owner":{"account_id":4306523,"reputation":7811,"user_id":3518757,"accept_rate":73,"display_name":"oikonomiyaki"},"score":0,"creation_date":1671010591,"post_id":74782750,"comment_id":132002711,"body_markdown":"@ShipraSarkar It requires a coder though, which in the example in the documentation is not specified.","body":"@ShipraSarkar It requires a coder though, which in the example in the documentation is not specified."},{"owner":{"account_id":23523457,"reputation":1405,"user_id":17570298,"display_name":"Shipra Sarkar"},"score":0,"creation_date":1671188716,"post_id":74782750,"comment_id":132050188,"body_markdown":"Hi @oikonomiyaki, Can you try using [parseGenericRecords](https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/AvroIO.html#parseGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-) ? Let me know if that helps.","body":"Hi @oikonomiyaki, Can you try using <a href=\"https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/AvroIO.html#parseGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-\" rel=\"nofollow noreferrer\">parseGenericRecords</a> ? Let me know if that helps."}],"answers":[{"comments":[{"owner":{"account_id":4306523,"reputation":7811,"user_id":3518757,"accept_rate":73,"display_name":"oikonomiyaki"},"score":0,"creation_date":1671004320,"post_id":74789049,"comment_id":132000931,"body_markdown":"It requires a Coder in the withCoder method.","body":"It requires a Coder in the withCoder method."}],"tags":[],"owner":{"account_id":24493709,"reputation":161,"user_id":18410362,"display_name":"pranavbhandari"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670954057,"creation_date":1670954057,"answer_id":74789049,"question_id":74782750,"body_markdown":"To read a PCollection of filepatterns whose schema is unknown at pipeline construction time or differs between files, you can use [`parseAllGenericRecords(org.apache.beam.sdk.transforms.SerializableFunction&lt;org.apache.avro.generic.GenericRecord, T&gt;)`](https://beam.apache.org/releases/javadoc/2.3.0/org/apache/beam/sdk/io/AvroIO.html#parseAllGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-)\r\n\r\nIn your case, your serializable function can just return the GenericRecord\r\n\r\nFor example:\r\n\r\n```\r\n\r\n Pipeline p = ...;\r\n\r\n PCollection&lt;GenericRecord&gt; records =\r\n     p.apply(AvroIO.parseAllGenericRecords(new SerializableFunction&lt;GenericRecord, GenericRecord&gt;() {\r\n       public GenericRecord apply(GenericRecord record) {\r\n         // If needed, access the schema of the record using record.getSchema()\r\n         return record;\r\n       }\r\n     }));\r\n```","title":"Reading Avro files in GCS as PCollection&lt;GenericRecord&gt;","body":"<p>To read a PCollection of filepatterns whose schema is unknown at pipeline construction time or differs between files, you can use <a href=\"https://beam.apache.org/releases/javadoc/2.3.0/org/apache/beam/sdk/io/AvroIO.html#parseAllGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-\" rel=\"nofollow noreferrer\"><code>parseAllGenericRecords(org.apache.beam.sdk.transforms.SerializableFunction&lt;org.apache.avro.generic.GenericRecord, T&gt;)</code></a></p>\n<p>In your case, your serializable function can just return the GenericRecord</p>\n<p>For example:</p>\n<pre><code>\n Pipeline p = ...;\n\n PCollection&lt;GenericRecord&gt; records =\n     p.apply(AvroIO.parseAllGenericRecords(new SerializableFunction&lt;GenericRecord, GenericRecord&gt;() {\n       public GenericRecord apply(GenericRecord record) {\n         // If needed, access the schema of the record using record.getSchema()\n         return record;\n       }\n     }));\n</code></pre>\n"}],"owner":{"account_id":4306523,"reputation":7811,"user_id":3518757,"accept_rate":73,"display_name":"oikonomiyaki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":528,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691529888,"creation_date":1670924493,"question_id":74782750,"body_markdown":"Our Dataflow job, written in Python, listens from a Pubsub subscription. The messages are strings of GCS file path of Avro files (`gs://bucket/file-timestamp.avro`). The avro files are not of uniform schema, but Beam Python&#39;s `avroio.ReadAllFromAvro` is good enough to parse generically the records of the avro file in GCS as dictionaries.\r\n\r\n```\r\n# Python code\r\npipeline\r\n\t| &quot;Read from Pub/Sub&quot; &gt;&gt; beam.io.ReadFromPubSub(subscription=input_subscription)\r\n\t| &quot;Read Avro Files&quot; &gt;&gt; avroio.ReadAllFromAvro(with_filename=True)\r\n```\r\n\r\nThe expected form of the resulting PTransform is a tuple: `(same_gcs_filepath, record_as_dict)` \r\n\r\nBecause of some limitations in Python, we need to convert our code to Java. We can read from Pubsub alright, however, we don&#39;t know yet how to use `AvroIO` in order to get a resulting `PCollection&lt;GenericRecord&gt;` without specifying a schema. \r\n\r\n```\r\n// Java code\r\npipeline\r\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\r\n  .apply(&quot;Read Avro Files&quot;, AvroIO.__________________)\r\n```\r\n\r\nIt would be better if the original `gcs_filepath` is passed along with it just like what we do in Python. Do I need to use `FileIO` in tandem with `AvroIO`? How do I achieve this?\r\n\r\n**Update:**\r\n\r\n```\r\npipeline\r\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\r\n  .apply(&quot;Read Avro Files&quot;, FileIO.matchAll())\r\n  .apply(FileIO.readMatches())\r\n  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record))\r\n```\r\n\r\nThe code above lead me to some progress, but then it is complaining that I should be providing a coder\r\n\r\n```\r\njava.lang.IllegalArgumentException: Unable to infer coder for output of parseFn. Specify it explicitly using withCoder()\r\n```\r\n\r\nwhich in the last line should look like this:\r\n\r\n```\r\n  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record).withCoder(someCoder))\r\n```\r\n\r\nBut then, `someCoder` requires a specific schema, which I can&#39;t really provide as the incoming avro file can be of different schema.","title":"Reading Avro files in GCS as PCollection&lt;GenericRecord&gt;","body":"<p>Our Dataflow job, written in Python, listens from a Pubsub subscription. The messages are strings of GCS file path of Avro files (<code>gs://bucket/file-timestamp.avro</code>). The avro files are not of uniform schema, but Beam Python's <code>avroio.ReadAllFromAvro</code> is good enough to parse generically the records of the avro file in GCS as dictionaries.</p>\n<pre><code># Python code\npipeline\n    | &quot;Read from Pub/Sub&quot; &gt;&gt; beam.io.ReadFromPubSub(subscription=input_subscription)\n    | &quot;Read Avro Files&quot; &gt;&gt; avroio.ReadAllFromAvro(with_filename=True)\n</code></pre>\n<p>The expected form of the resulting PTransform is a tuple: <code>(same_gcs_filepath, record_as_dict)</code></p>\n<p>Because of some limitations in Python, we need to convert our code to Java. We can read from Pubsub alright, however, we don't know yet how to use <code>AvroIO</code> in order to get a resulting <code>PCollection&lt;GenericRecord&gt;</code> without specifying a schema.</p>\n<pre><code>// Java code\npipeline\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\n  .apply(&quot;Read Avro Files&quot;, AvroIO.__________________)\n</code></pre>\n<p>It would be better if the original <code>gcs_filepath</code> is passed along with it just like what we do in Python. Do I need to use <code>FileIO</code> in tandem with <code>AvroIO</code>? How do I achieve this?</p>\n<p><strong>Update:</strong></p>\n<pre><code>pipeline\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\n  .apply(&quot;Read Avro Files&quot;, FileIO.matchAll())\n  .apply(FileIO.readMatches())\n  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record))\n</code></pre>\n<p>The code above lead me to some progress, but then it is complaining that I should be providing a coder</p>\n<pre><code>java.lang.IllegalArgumentException: Unable to infer coder for output of parseFn. Specify it explicitly using withCoder()\n</code></pre>\n<p>which in the last line should look like this:</p>\n<pre><code>  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record).withCoder(someCoder))\n</code></pre>\n<p>But then, <code>someCoder</code> requires a specific schema, which I can't really provide as the incoming avro file can be of different schema.</p>\n"},{"tags":["java","sap-commerce-cloud"],"comments":[{"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"score":0,"creation_date":1691067298,"post_id":76827127,"comment_id":135443361,"body_markdown":"what is your DB? You can use APM tools to find whole details.","body":"what is your DB? You can use APM tools to find whole details."},{"owner":{"account_id":11171469,"reputation":47,"user_id":8198318,"display_name":"iamrooovic"},"score":0,"creation_date":1691107097,"post_id":76827127,"comment_id":135450791,"body_markdown":"For our local, we use HSQLDB while SQL Server in our environments. Even in our local, we encounter this issue. We have Dynatrace but I don&#39;t think it is properly set up yet because I can&#39;t see our application there.","body":"For our local, we use HSQLDB while SQL Server in our environments. Even in our local, we encounter this issue. We have Dynatrace but I don&#39;t think it is properly set up yet because I can&#39;t see our application there."},{"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"score":0,"creation_date":1691345948,"post_id":76827127,"comment_id":135476055,"body_markdown":"The HSQLDB is very slow. I prefer MYSQL/MariaDB for local development.","body":"The HSQLDB is very slow. I prefer MYSQL/MariaDB for local development."}],"answers":[{"tags":[],"owner":{"account_id":4574171,"reputation":79,"user_id":3713070,"accept_rate":67,"display_name":"fredyjimenezrendon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691529553,"creation_date":1691529553,"answer_id":76863265,"question_id":76827127,"body_markdown":"If your project has a large number of products/categories/price rows, try to use a different cache region for those types.\r\n\r\nThis configuration has worked for me in the past:\r\n\r\n    regioncache.productregion.size=100000\r\n    regioncache.productregion.evictionpolicy=LRU\r\n    regioncache.productregion.exclusiveComputation=false\r\n    regioncache.productregion.statsEnabled=true\r\n    regioncache.categoryregion.size=100000\r\n    regioncache.categoryregion.evictionpolicy=LRU\r\n    regioncache.categoryregion.exclusiveComputation=false\r\n    regioncache.categoryregion.statsEnabled=true\r\n    regioncache.pricerowregion.size=100000\r\n    regioncache.pricerowregion.evictionpolicy=LRU\r\n    regioncache.pricerowregion.exclusiveComputation=false\r\n    regioncache.pricerowregion.statsEnabled=true","title":"Hybris DefaultB2BCheckoutFacade.placeOrder taking too long to finish","body":"<p>If your project has a large number of products/categories/price rows, try to use a different cache region for those types.</p>\n<p>This configuration has worked for me in the past:</p>\n<pre><code>regioncache.productregion.size=100000\nregioncache.productregion.evictionpolicy=LRU\nregioncache.productregion.exclusiveComputation=false\nregioncache.productregion.statsEnabled=true\nregioncache.categoryregion.size=100000\nregioncache.categoryregion.evictionpolicy=LRU\nregioncache.categoryregion.exclusiveComputation=false\nregioncache.categoryregion.statsEnabled=true\nregioncache.pricerowregion.size=100000\nregioncache.pricerowregion.evictionpolicy=LRU\nregioncache.pricerowregion.exclusiveComputation=false\nregioncache.pricerowregion.statsEnabled=true\n</code></pre>\n"}],"owner":{"account_id":11171469,"reputation":47,"user_id":8198318,"display_name":"iamrooovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691529553,"creation_date":1691057894,"question_id":76827127,"body_markdown":"I&#39;d like to ask about possible causes/solutions for our current issue. We have a simple checkout page. Inside, we have 5 products only. After clicking the place order button, we call our controller. Inside this controller, we only do simple validations like user, terms, and authorized payment. We also load the cart here. By the end, we call the placeOrder of DefaultB2BCheckoutFacade. We didn&#39;t create our custom class so this is out of the box from the b2b-accelerator. With 5 products, we are seeing 18 seconds to fully process the request. Can you please help us understand the issue?\r\n\r\n**EDIT:** I overrode the placeOrder method of DefaultB2BCheckoutFacade with the exact logic. Below are the times it took to finish each call.\r\n\r\nValidation took: 5.6497767 seconds -&gt; `if (isValidCheckoutCart(placeOrderData))`\r\n\r\nPlace order took: 6.5388391 seconds -&gt; `return (T) super.placeOrder();`\r\n\r\nTotal time took: 12.1888468 seconds -&gt; placeOrder method","title":"Hybris DefaultB2BCheckoutFacade.placeOrder taking too long to finish","body":"<p>I'd like to ask about possible causes/solutions for our current issue. We have a simple checkout page. Inside, we have 5 products only. After clicking the place order button, we call our controller. Inside this controller, we only do simple validations like user, terms, and authorized payment. We also load the cart here. By the end, we call the placeOrder of DefaultB2BCheckoutFacade. We didn't create our custom class so this is out of the box from the b2b-accelerator. With 5 products, we are seeing 18 seconds to fully process the request. Can you please help us understand the issue?</p>\n<p><strong>EDIT:</strong> I overrode the placeOrder method of DefaultB2BCheckoutFacade with the exact logic. Below are the times it took to finish each call.</p>\n<p>Validation took: 5.6497767 seconds -&gt; <code>if (isValidCheckoutCart(placeOrderData))</code></p>\n<p>Place order took: 6.5388391 seconds -&gt; <code>return (T) super.placeOrder();</code></p>\n<p>Total time took: 12.1888468 seconds -&gt; placeOrder method</p>\n"},{"tags":["java","apache-kafka","project-reactor","confluent-schema-registry","reactor-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691529195,"creation_date":1691528742,"answer_id":76863185,"question_id":76861776,"body_markdown":"Reactor isn&#39;t the issue. \r\n\r\n`schema.registry.url` is only a property of the Confluent Deserializer class. You are not implementing `configure` function in the Deserializer, therefore you are ignoring that property. Similarly, directly calling `parseFrom` isn&#39;t using any HTTP client to interact with a Registry.\r\n\r\nImport the library, rather than write your own\r\n\r\nhttps://mvnrepository.com/artifact/io.confluent/kafka-protobuf-serializer/7.4.0\r\n\r\nAlso, this is how to auto configure Spring Boot with that property\r\n\r\n```yaml\r\nspring:\r\n  kafka:\r\n    consumer:\r\n      value-deserializer: io.confluent.kafka.serializers.protobuf.KafkaProtobufDeserializer\r\n      properties:\r\n        &quot;[schema.registry.url]&quot;: http://...\r\n```\r\n\r\nref https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka.additional-properties","title":"Unable to use schemaRegistry in reactor kafka","body":"<p>Reactor isn't the issue.</p>\n<p><code>schema.registry.url</code> is only a property of the Confluent Deserializer class. You are not implementing <code>configure</code> function in the Deserializer, therefore you are ignoring that property. Similarly, directly calling <code>parseFrom</code> isn't using any HTTP client to interact with a Registry.</p>\n<p>Import the library, rather than write your own</p>\n<p><a href=\"https://mvnrepository.com/artifact/io.confluent/kafka-protobuf-serializer/7.4.0\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/io.confluent/kafka-protobuf-serializer/7.4.0</a></p>\n<p>Also, this is how to auto configure Spring Boot with that property</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  kafka:\n    consumer:\n      value-deserializer: io.confluent.kafka.serializers.protobuf.KafkaProtobufDeserializer\n      properties:\n        &quot;[schema.registry.url]&quot;: http://...\n</code></pre>\n<p>ref <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka.additional-properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka.additional-properties</a></p>\n"}],"owner":{"account_id":1744707,"reputation":157,"user_id":1595186,"accept_rate":38,"display_name":"Gajukorse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76863185,"answer_count":1,"score":0,"last_activity_date":1691529195,"creation_date":1691514377,"question_id":76861776,"body_markdown":"I am tying to setup kafka consumer using reactor kafka . Producer is integrated with kafka schema registry \r\n\r\n\r\n```\r\n\r\n\r\n    @Value(&quot;${spring.kafka.schemaRegistryUrls}&quot;)\r\n    private String schemaRegistryEnvVarValue;\r\n\r\n\r\n @Bean\r\n    public ReceiverOptions&lt;String, MyProto&gt; kafkaReceiverOptionsFloor(\r\n            KafkaProperties kafkaProperties) {\r\n\r\n        final Map&lt;String, Object&gt; kafkaConsumerProperties =\r\n                kafkaProperties.buildConsumerProperties();\r\n        for (Map.Entry&lt;String, KafkaProperties.Consumer&gt; entry :\r\n                kafkaConsumerPropertiesConfig.getConsumer().entrySet()) {\r\n            if (kafkaTopics.contains(entry.getKey())) {\r\n                kafkaConsumerProperties.putAll(entry.getValue().buildProperties());\r\n            }\r\n        }\r\n        kafkaConsumerProperties.put(&quot;schema.registry.url&quot;, schemaRegistryEnvVarValue);\r\n        final ReceiverOptions&lt;String, MyProto&gt; basicReceiverOptions =\r\n                ReceiverOptions.&lt;String, MyProto&gt;create(\r\n                                kafkaConsumerProperties)\r\n                        .withValueDeserializer(new MyProtoDeserializer())\r\n                        // disabling auto commit, since we are managing committing once\r\n                        // record is\r\n                        // processed\r\n                        .commitInterval(Duration.ZERO)\r\n                        .commitBatchSize(0);\r\n\r\n        kafkaConsumerProperties.forEach((k, v) -&gt; log.debug(&quot;k2 {} v2 {}&quot;, k, v));\r\n\r\n        return basicReceiverOptions\r\n                .subscription(kafkaTopicsFloor)\r\n                .addAssignListener(partitions -&gt; log.debug(&quot;onPartitionsAssigned {}&quot;, partitions))\r\n                .addRevokeListener(partitions -&gt; log.debug(&quot;onPartitionsRevoked {}&quot;, partitions));\r\n    }\r\n\r\n\r\n  @Bean\r\n    public ReactiveKafkaConsumerTemplate&lt;String, MyProto&gt;\r\n            reactiveKafkaConsumerTemplate(\r\n                    ReceiverOptions&lt;String, MyProto&gt;\r\n                            kafkaReceiverOptions) {\r\n        return new ReactiveKafkaConsumerTemplate&lt;&gt;(kafkaReceiverOptions);\r\n    }\r\n\r\n```\r\n\r\n\r\nI am getting exception as *Protocol message contained an invalid tag (zero).*\r\n Its able to parse in my Unit tests (without schema registry)\r\n\r\nLooks like schemaregistry is not being used . what am i doing wrong here .\r\n\r\nDeserializer looks like below\r\n\r\n```\r\n@Slf4j\r\npublic class MyProtoDeserializer implements Deserializer&lt;MyProto&gt; {\r\n    public MyProtoDeserializer() {}\r\n\r\n    /**\r\n     * Deserializes the data to my_proto from byte array.\r\n     *\r\n     * @param topic\r\n     * @param data\r\n     * @return\r\n     */\r\n    @Override\r\n    public MyProto deserialize(final String topic, final byte[] data) {\r\n        if (data == null) {\r\n            return null;\r\n        }\r\n        // TODO: Use schemaregistry and kpow\r\n      \r\n        try {\r\n            return MyProto.getDefaultInstance()\r\n                    .getParserForType()\r\n                    .parseFrom(data);\r\n        } catch (Exception ex) {\r\n            log.debug(&quot;Exception in MyProto parse {}&quot;, ex.getMessage());\r\n            return MyProto.getDefaultInstance();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"Unable to use schemaRegistry in reactor kafka","body":"<p>I am tying to setup kafka consumer using reactor kafka . Producer is integrated with kafka schema registry</p>\n<pre><code>\n\n    @Value(&quot;${spring.kafka.schemaRegistryUrls}&quot;)\n    private String schemaRegistryEnvVarValue;\n\n\n @Bean\n    public ReceiverOptions&lt;String, MyProto&gt; kafkaReceiverOptionsFloor(\n            KafkaProperties kafkaProperties) {\n\n        final Map&lt;String, Object&gt; kafkaConsumerProperties =\n                kafkaProperties.buildConsumerProperties();\n        for (Map.Entry&lt;String, KafkaProperties.Consumer&gt; entry :\n                kafkaConsumerPropertiesConfig.getConsumer().entrySet()) {\n            if (kafkaTopics.contains(entry.getKey())) {\n                kafkaConsumerProperties.putAll(entry.getValue().buildProperties());\n            }\n        }\n        kafkaConsumerProperties.put(&quot;schema.registry.url&quot;, schemaRegistryEnvVarValue);\n        final ReceiverOptions&lt;String, MyProto&gt; basicReceiverOptions =\n                ReceiverOptions.&lt;String, MyProto&gt;create(\n                                kafkaConsumerProperties)\n                        .withValueDeserializer(new MyProtoDeserializer())\n                        // disabling auto commit, since we are managing committing once\n                        // record is\n                        // processed\n                        .commitInterval(Duration.ZERO)\n                        .commitBatchSize(0);\n\n        kafkaConsumerProperties.forEach((k, v) -&gt; log.debug(&quot;k2 {} v2 {}&quot;, k, v));\n\n        return basicReceiverOptions\n                .subscription(kafkaTopicsFloor)\n                .addAssignListener(partitions -&gt; log.debug(&quot;onPartitionsAssigned {}&quot;, partitions))\n                .addRevokeListener(partitions -&gt; log.debug(&quot;onPartitionsRevoked {}&quot;, partitions));\n    }\n\n\n  @Bean\n    public ReactiveKafkaConsumerTemplate&lt;String, MyProto&gt;\n            reactiveKafkaConsumerTemplate(\n                    ReceiverOptions&lt;String, MyProto&gt;\n                            kafkaReceiverOptions) {\n        return new ReactiveKafkaConsumerTemplate&lt;&gt;(kafkaReceiverOptions);\n    }\n\n</code></pre>\n<p>I am getting exception as <em>Protocol message contained an invalid tag (zero).</em>\nIts able to parse in my Unit tests (without schema registry)</p>\n<p>Looks like schemaregistry is not being used . what am i doing wrong here .</p>\n<p>Deserializer looks like below</p>\n<pre><code>@Slf4j\npublic class MyProtoDeserializer implements Deserializer&lt;MyProto&gt; {\n    public MyProtoDeserializer() {}\n\n    /**\n     * Deserializes the data to my_proto from byte array.\n     *\n     * @param topic\n     * @param data\n     * @return\n     */\n    @Override\n    public MyProto deserialize(final String topic, final byte[] data) {\n        if (data == null) {\n            return null;\n        }\n        // TODO: Use schemaregistry and kpow\n      \n        try {\n            return MyProto.getDefaultInstance()\n                    .getParserForType()\n                    .parseFrom(data);\n        } catch (Exception ex) {\n            log.debug(&quot;Exception in MyProto parse {}&quot;, ex.getMessage());\n            return MyProto.getDefaultInstance();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-camel","quarkus"],"owner":{"account_id":16016597,"reputation":743,"user_id":11559150,"display_name":"Cesar Justo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691528801,"creation_date":1691528801,"question_id":76863196,"body_markdown":"Good afternoon, I am currently working with Apache Camel and Quarkus for the first time and I am calling an API that returns different types of http code, when it returns an http code other than 200, I get an exception of the following type:\r\n\r\n    org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking https://10.162.128.94:30000/customerInformation/v1.4.0/users/CI-2056133/customers with statusCode: 404\r\n\r\nThe idea here is to be able to catch this exception and the corresponding http code to return a response of the following type with http code 404:\r\n\r\n    {\r\n        &quot;code&quot;: &quot;NOT_FOUND&quot;,\r\n        &quot;message&quot;: &quot;A specified resource is not found&quot;\r\n    }\r\n\r\nMy code is the following but I don&#39;t know how to configure it to capture the error, I know that the main exception is **HttpOperationFailedException**:\r\n\r\n    package org.tmve.customer.ms.route;\r\n    \r\n    import org.apache.camel.Exchange;\r\n    import org.apache.camel.builder.RouteBuilder;\r\n    import org.apache.camel.http.base.HttpOperationFailedException;\r\n    import org.apache.camel.model.rest.RestBindingMode;\r\n    import org.eclipse.microprofile.config.inject.ConfigProperty;\r\n    import org.tmve.customer.ms.beans.response.UserProfile;\r\n    import org.tmve.customer.ms.processor.FindCustomerByDocIdProcessorReq;\r\n    import org.tmve.customer.ms.processor.FindCustomerByDocIdProcessorRes;\r\n    import org.tmve.customer.ms.processor.UserProfileProcessorHttpCode404;\r\n    import org.tmve.customer.ms.processor.UserProfileReq;\r\n    \r\n    import javax.enterprise.context.ApplicationScoped;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.TimeZone;\r\n    \r\n    import static org.apache.camel.model.rest.RestParamType.body;\r\n    \r\n    @ApplicationScoped\r\n    public class ResRoute extends RouteBuilder {\r\n    \r\n        @ConfigProperty(name=&quot;client.findCustomerByDocId&quot;)\r\n        String findCustomerByDocId;\r\n        @ConfigProperty(name = &quot;path.openapi&quot;)\r\n        String openApiPath;\r\n        @ConfigProperty(name = &quot;descripcion.servicio&quot;)\r\n        String serviceDescription;\r\n    \r\n        private ConfigureSsl configureSsl;\r\n    \r\n        public ResRoute() {\r\n            configureSsl = new ConfigureSsl();\r\n        }\r\n    \r\n        @Override\r\n        public void configure() throws Exception {\r\n    \r\n            restConfiguration()\r\n                    .bindingMode(RestBindingMode.json)\r\n                    .dataFormatProperty(&quot;json.in.disableFeatures&quot;, &quot;FAIL_ON_UNKNOWN_PROPERTIES&quot;)\r\n                    .apiContextPath(openApiPath)\r\n                    .apiProperty(&quot;api.title&quot;, &quot;FindCustomerByDocId&quot;)\r\n                    .apiProperty(&quot;api.description&quot;, serviceDescription)\r\n                    .apiProperty(&quot;api.version&quot;, &quot;1.0.0&quot;)\r\n                    .apiProperty(&quot;cors&quot;, &quot;true&quot;);\r\n    \r\n            rest(&quot;userProfile/v3.7/users/&quot;)\r\n                    .get(&quot;/{user_id}&quot;).to(&quot;direct:/{user_id}&quot;)\r\n                    .outType(UserProfile.class)\r\n                    .param().name(&quot;UserProfile&quot;).type(body).description(&quot;parametro de salida&quot;).required(true)\r\n                    .endParam()\r\n                    .to(&quot;direct:pipeline&quot;);\r\n    \r\n            from(&quot;direct:pipeline&quot;)\r\n                    .doTry()\r\n                    .process(new UserProfileReq())\r\n                    .process(new FindCustomerByDocIdProcessorReq())\r\n                    .setHeader(&quot;x-correlator&quot;,constant(&quot;4242374781&quot;))\r\n                    .to(configureSsl.setupSSLContext(getCamelContext(), findCustomerByDocId))\r\n                    .choice()\r\n                    .when(header(Exchange.HTTP_RESPONSE_CODE).isEqualTo(404))\r\n                        .process(new UserProfileProcessorHttpCode404())\r\n                    .otherwise()\r\n                    .process(new FindCustomerByDocIdProcessorRes())\r\n                    .endChoice()\r\n                    .endDoTry()\r\n                    .doCatch(HttpOperationFailedException.class)\r\n                    .process(new UserProfileProcessorHttpCode404());\r\n    \r\n        }\r\n\r\nWith the previous code I tried to do it, but it does not throw me anything, it returns a code 204 and it should return a response like the one I referred to above, I attach my code of the UserProfileProcessorHttpCode404 class:\r\n\r\n    package org.tmve.customer.ms.processor;\r\n    \r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.apache.camel.Exchange;\r\n    import org.apache.camel.Processor;\r\n    import org.eclipse.microprofile.config.ConfigProvider;\r\n    import org.tmve.customer.ms.beans.response.UserProfileResponseFault;\r\n    import org.tmve.customer.ms.mapping.IUserProfileOpenApiResponseFaultMapping;\r\n    import org.tmve.customer.ms.mapping.impl.UserProfileOpenApiResponseImpl;\r\n    \r\n    import javax.enterprise.context.ApplicationScoped;\r\n    \r\n    \r\n    @ApplicationScoped\r\n    public class UserProfileProcessorHttpCode404 implements Processor {\r\n    \r\n        private String errorCode404 = ConfigProvider.getConfig().getValue(&quot;error.404.code&quot;, String.class);\r\n        private String errorMessage404 = ConfigProvider.getConfig().getValue(&quot;error.404.message&quot;, String.class);\r\n        private IUserProfileOpenApiResponseFaultMapping responseFault;\r\n        private ObjectMapper objectMapper;\r\n    \r\n        public UserProfileProcessorHttpCode404() {\r\n            responseFault = new UserProfileOpenApiResponseImpl();\r\n            objectMapper = new ObjectMapper();\r\n        }\r\n    \r\n        @Override\r\n        public void process(Exchange exchange) throws Exception {\r\n    \r\n            UserProfileResponseFault openApiResponse = responseFault.toFault(errorCode404, errorMessage404);\r\n            String jsonResponse = objectMapper.writeValueAsString(openApiResponse);\r\n            exchange.setProperty(&quot;bodyRs&quot;, objectMapper.writeValueAsString(jsonResponse));\r\n            exchange.getMessage().setHeader(Exchange.CONTENT_TYPE, &quot;application/json&quot;);\r\n            exchange.getMessage().setHeader(Exchange.HTTP_RESPONSE_CODE, 404);\r\n            exchange.getMessage().setBody(jsonResponse);\r\n    \r\n    \r\n        }\r\n    }\r\n\r\nWhat should I do in these cases? Should the response code filtering be done within the doTry or doCatch?\r\n\r\n","title":"How to catch org.apache.camel.http.base.HttpOperationFailedException with status code and return personality response in Apache Camel","body":"<p>Good afternoon, I am currently working with Apache Camel and Quarkus for the first time and I am calling an API that returns different types of http code, when it returns an http code other than 200, I get an exception of the following type:</p>\n<pre><code>org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking https://10.162.128.94:30000/customerInformation/v1.4.0/users/CI-2056133/customers with statusCode: 404\n</code></pre>\n<p>The idea here is to be able to catch this exception and the corresponding http code to return a response of the following type with http code 404:</p>\n<pre><code>{\n    &quot;code&quot;: &quot;NOT_FOUND&quot;,\n    &quot;message&quot;: &quot;A specified resource is not found&quot;\n}\n</code></pre>\n<p>My code is the following but I don't know how to configure it to capture the error, I know that the main exception is <strong>HttpOperationFailedException</strong>:</p>\n<pre><code>package org.tmve.customer.ms.route;\n\nimport org.apache.camel.Exchange;\nimport org.apache.camel.builder.RouteBuilder;\nimport org.apache.camel.http.base.HttpOperationFailedException;\nimport org.apache.camel.model.rest.RestBindingMode;\nimport org.eclipse.microprofile.config.inject.ConfigProperty;\nimport org.tmve.customer.ms.beans.response.UserProfile;\nimport org.tmve.customer.ms.processor.FindCustomerByDocIdProcessorReq;\nimport org.tmve.customer.ms.processor.FindCustomerByDocIdProcessorRes;\nimport org.tmve.customer.ms.processor.UserProfileProcessorHttpCode404;\nimport org.tmve.customer.ms.processor.UserProfileReq;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport java.text.SimpleDateFormat;\nimport java.util.TimeZone;\n\nimport static org.apache.camel.model.rest.RestParamType.body;\n\n@ApplicationScoped\npublic class ResRoute extends RouteBuilder {\n\n    @ConfigProperty(name=&quot;client.findCustomerByDocId&quot;)\n    String findCustomerByDocId;\n    @ConfigProperty(name = &quot;path.openapi&quot;)\n    String openApiPath;\n    @ConfigProperty(name = &quot;descripcion.servicio&quot;)\n    String serviceDescription;\n\n    private ConfigureSsl configureSsl;\n\n    public ResRoute() {\n        configureSsl = new ConfigureSsl();\n    }\n\n    @Override\n    public void configure() throws Exception {\n\n        restConfiguration()\n                .bindingMode(RestBindingMode.json)\n                .dataFormatProperty(&quot;json.in.disableFeatures&quot;, &quot;FAIL_ON_UNKNOWN_PROPERTIES&quot;)\n                .apiContextPath(openApiPath)\n                .apiProperty(&quot;api.title&quot;, &quot;FindCustomerByDocId&quot;)\n                .apiProperty(&quot;api.description&quot;, serviceDescription)\n                .apiProperty(&quot;api.version&quot;, &quot;1.0.0&quot;)\n                .apiProperty(&quot;cors&quot;, &quot;true&quot;);\n\n        rest(&quot;userProfile/v3.7/users/&quot;)\n                .get(&quot;/{user_id}&quot;).to(&quot;direct:/{user_id}&quot;)\n                .outType(UserProfile.class)\n                .param().name(&quot;UserProfile&quot;).type(body).description(&quot;parametro de salida&quot;).required(true)\n                .endParam()\n                .to(&quot;direct:pipeline&quot;);\n\n        from(&quot;direct:pipeline&quot;)\n                .doTry()\n                .process(new UserProfileReq())\n                .process(new FindCustomerByDocIdProcessorReq())\n                .setHeader(&quot;x-correlator&quot;,constant(&quot;4242374781&quot;))\n                .to(configureSsl.setupSSLContext(getCamelContext(), findCustomerByDocId))\n                .choice()\n                .when(header(Exchange.HTTP_RESPONSE_CODE).isEqualTo(404))\n                    .process(new UserProfileProcessorHttpCode404())\n                .otherwise()\n                .process(new FindCustomerByDocIdProcessorRes())\n                .endChoice()\n                .endDoTry()\n                .doCatch(HttpOperationFailedException.class)\n                .process(new UserProfileProcessorHttpCode404());\n\n    }\n</code></pre>\n<p>With the previous code I tried to do it, but it does not throw me anything, it returns a code 204 and it should return a response like the one I referred to above, I attach my code of the UserProfileProcessorHttpCode404 class:</p>\n<pre><code>package org.tmve.customer.ms.processor;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.apache.camel.Exchange;\nimport org.apache.camel.Processor;\nimport org.eclipse.microprofile.config.ConfigProvider;\nimport org.tmve.customer.ms.beans.response.UserProfileResponseFault;\nimport org.tmve.customer.ms.mapping.IUserProfileOpenApiResponseFaultMapping;\nimport org.tmve.customer.ms.mapping.impl.UserProfileOpenApiResponseImpl;\n\nimport javax.enterprise.context.ApplicationScoped;\n\n\n@ApplicationScoped\npublic class UserProfileProcessorHttpCode404 implements Processor {\n\n    private String errorCode404 = ConfigProvider.getConfig().getValue(&quot;error.404.code&quot;, String.class);\n    private String errorMessage404 = ConfigProvider.getConfig().getValue(&quot;error.404.message&quot;, String.class);\n    private IUserProfileOpenApiResponseFaultMapping responseFault;\n    private ObjectMapper objectMapper;\n\n    public UserProfileProcessorHttpCode404() {\n        responseFault = new UserProfileOpenApiResponseImpl();\n        objectMapper = new ObjectMapper();\n    }\n\n    @Override\n    public void process(Exchange exchange) throws Exception {\n\n        UserProfileResponseFault openApiResponse = responseFault.toFault(errorCode404, errorMessage404);\n        String jsonResponse = objectMapper.writeValueAsString(openApiResponse);\n        exchange.setProperty(&quot;bodyRs&quot;, objectMapper.writeValueAsString(jsonResponse));\n        exchange.getMessage().setHeader(Exchange.CONTENT_TYPE, &quot;application/json&quot;);\n        exchange.getMessage().setHeader(Exchange.HTTP_RESPONSE_CODE, 404);\n        exchange.getMessage().setBody(jsonResponse);\n\n\n    }\n}\n</code></pre>\n<p>What should I do in these cases? Should the response code filtering be done within the doTry or doCatch?</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":10045,"reputation":5505,"user_id":18796,"display_name":"Ian McLaird"},"score":0,"creation_date":1478728591,"post_id":40516058,"comment_id":68275049,"body_markdown":"Does it work if you define an empty no-args constructor yourself?","body":"Does it work if you define an empty no-args constructor yourself?"},{"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"score":0,"creation_date":1478774697,"post_id":40516058,"comment_id":68291536,"body_markdown":"Unfortunately then I get the instant error: Compiler already exists","body":"Unfortunately then I get the instant error: Compiler already exists"},{"owner":{"account_id":7297,"reputation":32778,"user_id":12634,"accept_rate":75,"display_name":"Roel Spilker"},"score":1,"creation_date":1479121061,"post_id":40516058,"comment_id":68409401,"body_markdown":"Did you try adding both the RequiredArgsConstructor and the NoArgsConstructor?","body":"Did you try adding both the RequiredArgsConstructor and the NoArgsConstructor?"},{"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"score":0,"creation_date":1479808749,"post_id":40516058,"comment_id":68703335,"body_markdown":"Thanks @RoelSpilker, using both annotations worked ... but \\@Data doesn&#39;t give me fields of parent classes in the builder, so the approach is preety much useless for my case. I will stop worrying about it and continue with custom builders.","body":"Thanks @RoelSpilker, using both annotations worked ... but \\@Data doesn&#39;t give me fields of parent classes in the builder, so the approach is preety much useless for my case. I will stop worrying about it and continue with custom builders."}],"answers":[{"comments":[{"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"score":0,"creation_date":1478727476,"post_id":40516304,"comment_id":68274590,"body_markdown":"I do not get the error when I use the builder, I get the error when I use the default constructor (which I have to do since it is an entity). Will update the question.","body":"I do not get the error when I use the builder, I get the error when I use the default constructor (which I have to do since it is an entity). Will update the question."}],"tags":[],"owner":{"account_id":7155709,"reputation":466,"user_id":5468270,"accept_rate":78,"display_name":"Xendar"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1478726862,"creation_date":1478726862,"answer_id":40516304,"question_id":40516058,"body_markdown":"In the Lombok documentation it is written:\r\nPerson.builder().name(&quot;Adam Savage&quot;).city(&quot;San Francisco&quot;).job(&quot;Mythbusters&quot;).job(&quot;Unchained Reaction&quot;).build();\r\n\r\nDo you use this syntax for your purpose? According to your description it&#39;s not the case, and could explain the error you get?","title":"Lombok @Data and @Builder on same entity","body":"<p>In the Lombok documentation it is written:\nPerson.builder().name(\"Adam Savage\").city(\"San Francisco\").job(\"Mythbusters\").job(\"Unchained Reaction\").build();</p>\n\n<p>Do you use this syntax for your purpose? According to your description it's not the case, and could explain the error you get?</p>\n"},{"comments":[{"owner":{"account_id":334868,"reputation":4088,"user_id":661598,"accept_rate":100,"display_name":"wst"},"score":7,"creation_date":1489498479,"post_id":40739250,"comment_id":72689009,"body_markdown":"Your answer does not mention the class is a JPA entity, but question says explicitly about entity. If that&#39;s the case, you should not use `@Data` and `@Entity` together. Lombok will generate `hashCode()` and `equals()` for you using all fields - `id` included, which should be avoided. Or at least treated with care.","body":"Your answer does not mention the class is a JPA entity, but question says explicitly about entity. If that&#39;s the case, you should not use <code>@Data</code> and <code>@Entity</code> together. Lombok will generate <code>hashCode()</code> and <code>equals()</code> for you using all fields - <code>id</code> included, which should be avoided. Or at least treated with care."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":1,"creation_date":1549528463,"post_id":40739250,"comment_id":95936258,"body_markdown":"Lombok is updated now, try `@SuperBuilder` annotation on both parent and child class","body":"Lombok is updated now, try <code>@SuperBuilder</code> annotation on both parent and child class"},{"owner":{"account_id":3316240,"reputation":303,"user_id":2788547,"display_name":"Aniket"},"score":0,"creation_date":1635457202,"post_id":40739250,"comment_id":123311183,"body_markdown":"@vikingsteve, So if there is a nested structure of classes, like Employee has a Address, Address has Street, City, State, Country, Zipcode. So here, do you mean to say, you&#39;ll have to add `@SuperBuilder` in each &amp; every class?","body":"@vikingsteve, So if there is a nested structure of classes, like Employee has a Address, Address has Street, City, State, Country, Zipcode. So here, do you mean to say, you&#39;ll have to add <code>@SuperBuilder</code> in each &amp; every class?"}],"tags":[],"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1479810034,"creation_date":1479810034,"answer_id":40739250,"question_id":40516058,"body_markdown":"I will answer my own question by summerizing the comments.\r\n\r\nFirst of all, thanks to @RoelSpilker, you can use Builder and Data together on one Pojo if you explicitly provide AllArgs- and NoArgs- constructors:\r\n\r\n     @RequiredArgsConstructor\r\n     @NoArgsConstructor\r\n     @Data\r\n     @Builder\r\n     public class Person {...}\r\n\r\nBut: the builder created for this class will not know any inherited fields. For my use case (having some AbstractEntities) this renders the solution useless and I will stick with manual helpers/builders for now.","title":"Lombok @Data and @Builder on same entity","body":"<p>I will answer my own question by summerizing the comments.</p>\n\n<p>First of all, thanks to @RoelSpilker, you can use Builder and Data together on one Pojo if you explicitly provide AllArgs- and NoArgs- constructors:</p>\n\n<pre><code> @RequiredArgsConstructor\n @NoArgsConstructor\n @Data\n @Builder\n public class Person {...}\n</code></pre>\n\n<p>But: the builder created for this class will not know any inherited fields. For my use case (having some AbstractEntities) this renders the solution useless and I will stick with manual helpers/builders for now.</p>\n"},{"comments":[{"owner":{"account_id":15459711,"reputation":1631,"user_id":11152683,"display_name":"Lubo"},"score":6,"creation_date":1571750420,"post_id":48220690,"comment_id":103338791,"body_markdown":"This is correct example, but generaly you can not use @Data on any @Entity! Equals, hashCode and toString can go to conflict with JPA spec or with &quot;lazy load&quot;.","body":"This is correct example, but generaly you can not use @Data on any @Entity! Equals, hashCode and toString can go to conflict with JPA spec or with &quot;lazy load&quot;."},{"owner":{"account_id":12669526,"reputation":641,"user_id":9207530,"display_name":"장재훈"},"score":0,"creation_date":1597060786,"post_id":48220690,"comment_id":112001634,"body_markdown":"Yes, I agree with you. So it&#39;s better to add  &quot;@Getter&quot;,  &quot;@Setter&quot;, instead of &quot;@Data&quot;.","body":"Yes, I agree with you. So it&#39;s better to add  &quot;@Getter&quot;,  &quot;@Setter&quot;, instead of &quot;@Data&quot;."},{"owner":{"account_id":2311085,"reputation":149,"user_id":2029198,"display_name":"Hiro_Hamada"},"score":0,"creation_date":1690892594,"post_id":48220690,"comment_id":135413869,"body_markdown":"@Lubo if we use Data annotation on entity classes, you mean to say it doesn&#39;t take care of the field which we mentioned as primary key field, in generating equals and hashcode ?\n\nwhat do you mean by conflict with JPA spec ?\ncan you explain more.","body":"@Lubo if we use Data annotation on entity classes, you mean to say it doesn&#39;t take care of the field which we mentioned as primary key field, in generating equals and hashcode ?  what do you mean by conflict with JPA spec ? can you explain more."},{"owner":{"account_id":15459711,"reputation":1631,"user_id":11152683,"display_name":"Lubo"},"score":0,"creation_date":1691467289,"post_id":48220690,"comment_id":135491950,"body_markdown":"@Hiro_Hamada Hi, I have explained it a bit more in my answer. Have a look at https://stackoverflow.com/a/58505239/11152683 please. Absolute detailed article is linked there.","body":"@Hiro_Hamada Hi, I have explained it a bit more in my answer. Have a look at <a href=\"https://stackoverflow.com/a/58505239/11152683\">stackoverflow.com/a/58505239/11152683</a> please. Absolute detailed article is linked there."}],"tags":[],"owner":{"account_id":12669526,"reputation":641,"user_id":9207530,"display_name":"장재훈"},"comment_count":4,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1516300146,"creation_date":1515738309,"answer_id":48220690,"question_id":40516058,"body_markdown":"try this code with lombok version 1.16.18 over :\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder\r\n    @Entity\r\n    public class User {\r\n        private String id;\r\n        private String firstName;\r\n        private String lastName;\r\n    }","title":"Lombok @Data and @Builder on same entity","body":"<p>try this code with lombok version 1.16.18 over :</p>\n\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@Entity\npublic class User {\n    private String id;\n    private String firstName;\n    private String lastName;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15459711,"reputation":1631,"user_id":11152683,"display_name":"Lubo"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1571750325,"creation_date":1571750325,"answer_id":58505239,"question_id":40516058,"body_markdown":"Beware of that [data objects aren&#39;t entities][1]! Simply put, there is problem with hashcode/equals (when it considers id fields) and also toString method with lazy loaded parts of entity. For reference you can check [Vlad Mihalceas article][2].\r\n\r\nYou should:\r\n\r\n - exclude id fields from hashcode/equals\r\n - exclude association fields which are not managed in given entity from hashcode/equals\r\n - exclude all lazy loaded fields from toString method\r\n - exclude fields possibly causing circular references from toString method\r\n\r\nFor sure read at least something on topic of how does JPA do &quot;[dirty checking][3]&quot; before beeing confident that your handwritten or generated equals/hashcode method is ok.\r\n\r\n\r\n  [1]: https://mdeinum.github.io/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\r\n  [2]: https://vladmihalcea.com/hibernate-facts-equals-and-hashcode/\r\n  [3]: https://vladmihalcea.com/the-anatomy-of-hibernate-dirty-checking/","title":"Lombok @Data and @Builder on same entity","body":"<p>Beware of that <a href=\"https://mdeinum.github.io/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"noreferrer\">data objects aren't entities</a>! Simply put, there is problem with hashcode/equals (when it considers id fields) and also toString method with lazy loaded parts of entity. For reference you can check <a href=\"https://vladmihalcea.com/hibernate-facts-equals-and-hashcode/\" rel=\"noreferrer\">Vlad Mihalceas article</a>.</p>\n\n<p>You should:</p>\n\n<ul>\n<li>exclude id fields from hashcode/equals</li>\n<li>exclude association fields which are not managed in given entity from hashcode/equals</li>\n<li>exclude all lazy loaded fields from toString method</li>\n<li>exclude fields possibly causing circular references from toString method</li>\n</ul>\n\n<p>For sure read at least something on topic of how does JPA do \"<a href=\"https://vladmihalcea.com/the-anatomy-of-hibernate-dirty-checking/\" rel=\"noreferrer\">dirty checking</a>\" before beeing confident that your handwritten or generated equals/hashcode method is ok.</p>\n"}],"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36086,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":40739250,"answer_count":4,"score":18,"last_activity_date":1691528633,"creation_date":1478725729,"question_id":40516058,"body_markdown":"I am using the following:\r\n\r\n    @Entity\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor(force = true)\r\n    public class User {\r\n        private String id;\r\n        private String firstName;\r\n        private String lastName;\r\n    }\r\n\r\nwhat I want to achieve: for JPA usage, I need a POJO with noArgConstructor, getters/setters and equals/hashCode/toString. \r\n\r\nFor instance creation (for example in tests) I want to use User.builder().build();\r\n\r\nProblem: it does not compile, there seems to be an issue with the NoArgConstructor vs. RequiredFieldsConstructor:\r\n\r\n    Error:(15, 1) java: constructor User in class x.y.z.User cannot be applied to given types;\r\n    required: no arguments\r\n    found:    java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String\r\n    reason: actual and formal argument lists differ in length\r\n\r\n**Update: The error occurs when I try to create a new entity via `new` ... the builder() works.**\r\n\r\nWhat do I miss? Isn&#39;t it possible to use @Data, @Entity and @Builder at the same time?","title":"Lombok @Data and @Builder on same entity","body":"<p>I am using the following:</p>\n\n<pre><code>@Entity\n@Data\n@Builder\n@NoArgsConstructor(force = true)\npublic class User {\n    private String id;\n    private String firstName;\n    private String lastName;\n}\n</code></pre>\n\n<p>what I want to achieve: for JPA usage, I need a POJO with noArgConstructor, getters/setters and equals/hashCode/toString. </p>\n\n<p>For instance creation (for example in tests) I want to use User.builder().build();</p>\n\n<p>Problem: it does not compile, there seems to be an issue with the NoArgConstructor vs. RequiredFieldsConstructor:</p>\n\n<pre><code>Error:(15, 1) java: constructor User in class x.y.z.User cannot be applied to given types;\nrequired: no arguments\nfound:    java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String\nreason: actual and formal argument lists differ in length\n</code></pre>\n\n<p><strong>Update: The error occurs when I try to create a new entity via <code>new</code> ... the builder() works.</strong></p>\n\n<p>What do I miss? Isn't it possible to use @Data, @Entity and @Builder at the same time?</p>\n"},{"tags":["java","maven","visual-studio-code"],"answers":[{"comments":[{"owner":{"account_id":13646274,"reputation":103,"user_id":9845200,"display_name":"tanjamado"},"score":0,"creation_date":1650159979,"post_id":71836180,"comment_id":127050570,"body_markdown":"Thank you for your response, my issue is not with the Java classes, the JDK works fine, the issue is rather with the maven dependencies, it seems that sources are not downloaded","body":"Thank you for your response, my issue is not with the Java classes, the JDK works fine, the issue is rather with the maven dependencies, it seems that sources are not downloaded"},{"owner":{"account_id":17942799,"reputation":7768,"user_id":13037676,"display_name":"Steven-MSFT"},"score":0,"creation_date":1650247550,"post_id":71836180,"comment_id":127064739,"body_markdown":"@tanjamado It looks like a problem with the `Java Language Server`&#39;s embedded JRE, so I suggest you set the JRE of the language server manually. Could you have a try of it? thanks.","body":"@tanjamado It looks like a problem with the <code>Java Language Server</code>&#39;s embedded JRE, so I suggest you set the JRE of the language server manually. Could you have a try of it? thanks."},{"owner":{"account_id":13646274,"reputation":103,"user_id":9845200,"display_name":"tanjamado"},"score":0,"creation_date":1650331543,"post_id":71836180,"comment_id":127084361,"body_markdown":"thank you for your response @Steven-MSFT, how do you do that ? I have already set the JAVA_HOME which is pointing to the jdk","body":"thank you for your response @Steven-MSFT, how do you do that ? I have already set the JAVA_HOME which is pointing to the jdk"},{"owner":{"account_id":17942799,"reputation":7768,"user_id":13037676,"display_name":"Steven-MSFT"},"score":0,"creation_date":1650331690,"post_id":71836180,"comment_id":127084381,"body_markdown":"@tanjamado Add the setting of &quot;java.jdt.ls.java.home&quot; in the settings.json.","body":"@tanjamado Add the setting of &quot;java.jdt.ls.java.home&quot; in the settings.json."},{"owner":{"account_id":13646274,"reputation":103,"user_id":9845200,"display_name":"tanjamado"},"score":0,"creation_date":1650500810,"post_id":71836180,"comment_id":127134597,"body_markdown":"Oh okay, I already have that :/","body":"Oh okay, I already have that :/"},{"owner":{"account_id":17942799,"reputation":7768,"user_id":13037676,"display_name":"Steven-MSFT"},"score":0,"creation_date":1650504541,"post_id":71836180,"comment_id":127135231,"body_markdown":"@tanjamado Does it work?","body":"@tanjamado Does it work?"},{"owner":{"account_id":13646274,"reputation":103,"user_id":9845200,"display_name":"tanjamado"},"score":0,"creation_date":1650567498,"post_id":71836180,"comment_id":127155396,"body_markdown":"no it doesn&#39;t :(","body":"no it doesn&#39;t :("}],"tags":[],"owner":{"account_id":17942799,"reputation":7768,"user_id":13037676,"display_name":"Steven-MSFT"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649728911,"creation_date":1649728911,"answer_id":71836180,"question_id":71825911,"body_markdown":"Could you try to set the `&quot;java.jdt.ls.java.home&quot;` manually? Set it to the JDK you installed on your computer.\r\n\r\nSome people others had run across [this kind of problem][1]. It looks like an issue with the language server&#39;s embedded JRE.\r\n\r\n\r\n  [1]: https://github.com/redhat-developer/vscode-java/issues/2277","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>Could you try to set the <code>&quot;java.jdt.ls.java.home&quot;</code> manually? Set it to the JDK you installed on your computer.</p>\n<p>Some people others had run across <a href=\"https://github.com/redhat-developer/vscode-java/issues/2277\" rel=\"nofollow noreferrer\">this kind of problem</a>. It looks like an issue with the language server's embedded JRE.</p>\n"},{"tags":[],"owner":{"account_id":23158008,"reputation":51,"user_id":17259012,"display_name":"Knight990"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1650796115,"creation_date":1650796115,"answer_id":71987519,"question_id":71825911,"body_markdown":"i had the same problem and i solve it,try this:\r\n1. set settings.json in vscode, \r\n&quot;java.eclipse.downloadSources&quot;: true,&quot;java.maven.downloadSources&quot;: true\r\n2. add follow settings in settings.xml of maven:\r\n```\r\n&lt;settings&gt;\r\n    &lt;!-- ... other settings omitted ... --&gt;\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;downloadSources&lt;/id&gt;\r\n            &lt;properties&gt;\r\n                &lt;downloadSources&gt;true&lt;/downloadSources&gt;\r\n                &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n\r\n    &lt;activeProfiles&gt;\r\n            &lt;activeProfile&gt;downloadSources&lt;/activeProfile&gt;\r\n    &lt;/activeProfiles&gt;\r\n&lt;/settings&gt;\r\n```\r\n\r\n3.reopen vscode and it will download javadoc","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>i had the same problem and i solve it,try this:</p>\n<ol>\n<li>set settings.json in vscode,\n&quot;java.eclipse.downloadSources&quot;: true,&quot;java.maven.downloadSources&quot;: true</li>\n<li>add follow settings in settings.xml of maven:</li>\n</ol>\n<pre><code>&lt;settings&gt;\n    &lt;!-- ... other settings omitted ... --&gt;\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;downloadSources&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;downloadSources&gt;true&lt;/downloadSources&gt;\n                &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n\n    &lt;activeProfiles&gt;\n            &lt;activeProfile&gt;downloadSources&lt;/activeProfile&gt;\n    &lt;/activeProfiles&gt;\n&lt;/settings&gt;\n</code></pre>\n<p>3.reopen vscode and it will download javadoc</p>\n"},{"tags":[],"owner":{"account_id":16856545,"reputation":400,"user_id":12188327,"display_name":"darkvalance"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665750470,"creation_date":1665750470,"answer_id":74069224,"question_id":71825911,"body_markdown":"I had this issue previously, and I couldn&#39;t change the language server&#39;s embedded JRE due the version being &lt;17. The fix was adding the following line into `settings.json`.\r\n```\r\n&quot;maven.terminal.useJavaHome&quot;: true\r\n```","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>I had this issue previously, and I couldn't change the language server's embedded JRE due the version being &lt;17. The fix was adding the following line into <code>settings.json</code>.</p>\n<pre><code>&quot;maven.terminal.useJavaHome&quot;: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5074998,"reputation":406,"user_id":4072641,"display_name":"Pedro Siqueira"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691528264,"creation_date":1691528264,"answer_id":76863153,"question_id":71825911,"body_markdown":"What worked for me: I made the following addition on `settings.json` file:\r\n\r\n```json\r\n&quot;java.configuration.runtimes&quot;: [\r\n    {\r\n        &quot;name&quot;: &quot;JavaSE-17&quot;,\r\n        &quot;path&quot;: &quot;/usr/lib/jvm/java-17-openjdk-amd64/&quot;\r\n    }\r\n]\r\n```\r\n\r\nI obtained the location of both the `settings.json` file and the Java `path` from [Henry](https://stackoverflow.com/a/74369626/4072641)&#39;s answer. The solution itself was derived from this [GitHub comment](https://github.com/redhat-developer/vscode-java/issues/2277#issuecomment-1365450613).","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>What worked for me: I made the following addition on <code>settings.json</code> file:</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;java.configuration.runtimes&quot;: [\n    {\n        &quot;name&quot;: &quot;JavaSE-17&quot;,\n        &quot;path&quot;: &quot;/usr/lib/jvm/java-17-openjdk-amd64/&quot;\n    }\n]\n</code></pre>\n<p>I obtained the location of both the <code>settings.json</code> file and the Java <code>path</code> from <a href=\"https://stackoverflow.com/a/74369626/4072641\">Henry</a>'s answer. The solution itself was derived from this <a href=\"https://github.com/redhat-developer/vscode-java/issues/2277#issuecomment-1365450613\" rel=\"nofollow noreferrer\">GitHub comment</a>.</p>\n"}],"owner":{"account_id":13646274,"reputation":103,"user_id":9845200,"display_name":"tanjamado"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3534,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1691528264,"creation_date":1649671282,"question_id":71825911,"body_markdown":"when i&#39;m navigating to a maven dependency class, i get a .class file with this comment on top and no doc is shown :\r\n\r\n*// Failed to get sources. Instead, stub sources have been generated by the disassembler.  \r\n// Implementation of methods is unavailable.* \r\n\r\nI don&#39;t have the issue with Java classes, only maven dependencies.\r\n\r\nI have enabled download sources in the maven settings.xml and in the java extension pack settings.\r\n\r\nAnyone has any idea how to solve this please ?","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>when i'm navigating to a maven dependency class, i get a .class file with this comment on top and no doc is shown :</p>\n<p><em>// Failed to get sources. Instead, stub sources have been generated by the disassembler.<br />\n// Implementation of methods is unavailable.</em></p>\n<p>I don't have the issue with Java classes, only maven dependencies.</p>\n<p>I have enabled download sources in the maven settings.xml and in the java extension pack settings.</p>\n<p>Anyone has any idea how to solve this please ?</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1691530241,"post_id":76863146,"comment_id":135503608,"body_markdown":"1. Clean and build, could be old cached data; 2. Don&#39;t reference `src` in your code, this won&#39;t exist once the app is built and exported, use `new ImageIcon(getClass().getResource(&quot;/images/wallpaperPrincipal.jpg&quot;))` instead. Infact you should probably be using `new ImageIcon(ImageIO.read(getClass().getResource(&quot;/images/wallpaperPrincipal.jpg&quot;))` at least this way, of the image can&#39;t be read, it will throw an exception","body":"1. Clean and build, could be old cached data; 2. Don&#39;t reference <code>src</code> in your code, this won&#39;t exist once the app is built and exported, use <code>new ImageIcon(getClass().getResource(&quot;&#47;images&#47;wallpaperPrincipal&zwnj;&#8203;.jpg&quot;))</code> instead. Infact you should probably be using <code>new ImageIcon(ImageIO.read(getClass().getResource(&quot;&#47;images&#47;wallp&zwnj;&#8203;aperPrincipal.jpg&quot;))</code> at least this way, of the image can&#39;t be read, it will throw an exception"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691532377,"post_id":76863146,"comment_id":135503898,"body_markdown":"*And* you need to put the images [in the right place](https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans)","body":"<i>And</i> you need to put the images <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">in the right place</a>"}],"owner":{"account_id":29066660,"reputation":1,"user_id":22266095,"display_name":"Marchione"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691528179,"creation_date":1691528179,"question_id":76863146,"body_markdown":"When using the method to change the background of the interface it gives an error, even though I invoked the necessary libraries and the methods are correctly written,\r\n\r\n```\r\nImageIcon wallpaper = new ImageIcon(&quot;src/images/wallpaperPrincipal.jpg&quot;);\r\n        Icon icono = new ImageIcon(wallpaper.getImage().getScaledInstance(jLabel_Wallpaper.getWidth(),\r\n                jLabel_Wallpaper.getHeight(), Image.SCALE_DEFAULT));\r\n        jLabel_Wallpaper.setIcon(icono);\r\n        this.repaint();\r\n```\r\n\r\nmarks the error:\r\n\r\n```\r\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: Uncompilable code - cannot find symbol\r\n  symbol:   method setIcon(javax.swing.Icon)\r\n  location: variable jLabel_Wallpaper of type java.awt.Label\r\n\tat ventanas.informacionUsuario.&lt;init&gt;(informacionUsuario.java:181)\r\n\tat ventanas.informacionUsuario$1.run(informacionUsuario.java:183)\r\n\tat java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:313)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:770)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:715)\r\n\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:740)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n```\r\n\r\nUntil now what I did was to delete the class and redo it (copying and pasting the previous code) and sometimes I would get the error again and at other times the program would work fine. I got annoyed with it and I want to find a solution that does not involve redoing the class.\r\n\r\nIt just shows me the error line, in some classes it works fine and in others it shows the error, and the problem has happened to me a couple of times.","title":"The setIcon method does not work because of NetBeans?","body":"<p>When using the method to change the background of the interface it gives an error, even though I invoked the necessary libraries and the methods are correctly written,</p>\n<pre><code>ImageIcon wallpaper = new ImageIcon(&quot;src/images/wallpaperPrincipal.jpg&quot;);\n        Icon icono = new ImageIcon(wallpaper.getImage().getScaledInstance(jLabel_Wallpaper.getWidth(),\n                jLabel_Wallpaper.getHeight(), Image.SCALE_DEFAULT));\n        jLabel_Wallpaper.setIcon(icono);\n        this.repaint();\n</code></pre>\n<p>marks the error:</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: Uncompilable code - cannot find symbol\n  symbol:   method setIcon(javax.swing.Icon)\n  location: variable jLabel_Wallpaper of type java.awt.Label\n    at ventanas.informacionUsuario.&lt;init&gt;(informacionUsuario.java:181)\n    at ventanas.informacionUsuario$1.run(informacionUsuario.java:183)\n    at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:313)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:770)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:715)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:740)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n<p>Until now what I did was to delete the class and redo it (copying and pasting the previous code) and sometimes I would get the error again and at other times the program would work fine. I got annoyed with it and I want to find a solution that does not involve redoing the class.</p>\n<p>It just shows me the error line, in some classes it works fine and in others it shows the error, and the problem has happened to me a couple of times.</p>\n"},{"tags":["java","c++","openssl","java-native-interface","rsa"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":2,"creation_date":1691063203,"post_id":76827611,"comment_id":135442502,"body_markdown":"Please read [Why should I not upload images of code/data/errors when asking a question?](https://meta.stackoverflow.com/q/285551/238704)","body":"Please read <a href=\"https://meta.stackoverflow.com/q/285551/238704\">Why should I not upload images of code/data/errors when asking a question?</a>"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1691063463,"post_id":76827611,"comment_id":135442549,"body_markdown":"I have no idea where that output is coming from, it doesn&#39;t appear in any of the code you&#39;ve shown. The `decBa` output just looks like a section of memory, maybe the processor stack. It definitely isn&#39;t the output from an incorrect RSA decryption.","body":"I have no idea where that output is coming from, it doesn&#39;t appear in any of the code you&#39;ve shown. The <code>decBa</code> output just looks like a section of memory, maybe the processor stack. It definitely isn&#39;t the output from an incorrect RSA decryption."},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691064592,"post_id":76827611,"comment_id":135442752,"body_markdown":"@PresidentJamesK.Polk-Strike that output goes directly from Log.d","body":"@PresidentJamesK.Polk-Strike that output goes directly from Log.d"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":1,"creation_date":1691073810,"post_id":76827611,"comment_id":135444959,"body_markdown":"Any particular reason you&#39;re not just using the Java cryptography APIs?","body":"Any particular reason you&#39;re not just using the Java cryptography APIs?"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1691074186,"post_id":76827611,"comment_id":135445059,"body_markdown":"Your decryption call doesn&#39;t use encText_len but hardcodes 256 instead.","body":"Your decryption call doesn&#39;t use encText_len but hardcodes 256 instead."},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691435475,"post_id":76827611,"comment_id":135488601,"body_markdown":"@Botje encryption output length is 256, if I use encText_len when I try to decrypt it says that length is too large, that&#39;s why it&#39;s hardcoded like that.","body":"@Botje encryption output length is 256, if I use encText_len when I try to decrypt it says that length is too large, that&#39;s why it&#39;s hardcoded like that."},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691435573,"post_id":76827611,"comment_id":135488629,"body_markdown":"@Botje and yes, my task is to learn how openssl rsa works in c++, can&#39;t use Java instead.","body":"@Botje and yes, my task is to learn how openssl rsa works in c++, can&#39;t use Java instead."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1691437673,"post_id":76827611,"comment_id":135488994,"body_markdown":"The size of the array is directly derived from the output of `RSA_private_encrypt`, which is literally documented as &quot;this is how many bytes of ciphertext were produced&quot; and yet you replace that with a hardcoded number and expect it to work?","body":"The size of the array is directly derived from the output of <code>RSA_private_encrypt</code>, which is literally documented as &quot;this is how many bytes of ciphertext were produced&quot; and yet you replace that with a hardcoded number and expect it to work?"},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691489077,"post_id":76827611,"comment_id":135495364,"body_markdown":"@Botje `RSA_public_encrypt` always produces 256 bytes of ciphertext in my case and I had to hardode this number as I said above.","body":"@Botje <code>RSA_public_encrypt</code> always produces 256 bytes of ciphertext in my case and I had to hardode this number as I said above."},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691489500,"post_id":76827611,"comment_id":135495455,"body_markdown":"@Botje and when `RSA_private_decrypt` is called it returns correct value of plaintext length but wrong characters. That&#39;s why I don&#39;t understand what is happening, how it knows the length, but decrypted message characters are a complete mess.","body":"@Botje and when <code>RSA_private_decrypt</code> is called it returns correct value of plaintext length but wrong characters. That&#39;s why I don&#39;t understand what is happening, how it knows the length, but decrypted message characters are a complete mess."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1691489827,"post_id":76827611,"comment_id":135495507,"body_markdown":"If the length of the java array is somehow wrong then it stands to reason that the contents might also be wrong! Are the contents of the native byte array identical to what your java log reports?","body":"If the length of the java array is somehow wrong then it stands to reason that the contents might also be wrong! Are the contents of the native byte array identical to what your java log reports?"},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691490762,"post_id":76827611,"comment_id":135495689,"body_markdown":"@Botje yes, they&#39;re identical.","body":"@Botje yes, they&#39;re identical."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691538315,"post_id":76827611,"comment_id":135504485,"body_markdown":"Why would you use JNI for any of this when Java already supports it all?","body":"Why would you use JNI for any of this when Java already supports it all?"}],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691528097,"creation_date":1691528097,"answer_id":76863139,"question_id":76827611,"body_markdown":"The problem is in this call:\r\n\r\n```\r\n    int iResult = RSA_public_encrypt(plainText_len, (unsigned char*)plain_text, chEncryptedData, createRSApub(sKey), RSA_PKCS1_OAEP_PADDING);\r\n```\r\nThe variable `plain_text` is your `jbyteArray` input variable. You should pass `plainText` instead, which is a `const char *`.\r\nIn this case the cast masked the problem, and honestly I&#39;m surprised it did not crash your JVM.","title":"JNI OpenSSL RSA Decryption not working properly","body":"<p>The problem is in this call:</p>\n<pre><code>    int iResult = RSA_public_encrypt(plainText_len, (unsigned char*)plain_text, chEncryptedData, createRSApub(sKey), RSA_PKCS1_OAEP_PADDING);\n</code></pre>\n<p>The variable <code>plain_text</code> is your <code>jbyteArray</code> input variable. You should pass <code>plainText</code> instead, which is a <code>const char *</code>.\nIn this case the cast masked the problem, and honestly I'm surprised it did not crash your JVM.</p>\n"}],"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691572341,"accepted_answer_id":76863139,"answer_count":1,"score":0,"last_activity_date":1691528097,"creation_date":1691061771,"question_id":76827611,"body_markdown":"Encryption seems to work fine, but when I start decryption I get wrong output. Keys are given in PEM and length is 2048.\r\n\r\nHere are the methods that are called from Java\r\n\r\n```\r\nString public_key = &quot;-----BEGIN PUBLIC KEY-----\\n&quot; +\r\n            &quot;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAm1AThUE8dUz6x5DeDK3J\\n&quot; +\r\n            &quot;SKcBbqFVtplHCdf+036+2tZ1RmHcwsKZ6AF4dtCQ/8n+2lMQgdfWSe+gKEp2lIh0\\n&quot; +\r\n            &quot;YQUxgQneLXGzvsEjbFVLgxSdLnEfuZrJsNC3J9LHlnvwYYvBQGaSVCx7WhvxFyDC\\n&quot; +\r\n            &quot;BJ7SlpjSzVY9yduxRAHKYnsFRwKgEW15N3VYbspd/LTexNHXTbuzQ968wZbWd5rX\\n&quot; +\r\n            &quot;qHejM9pFEQsxqBq7uIk3eFvDMZzyi47NaM9eRHX6LyDF4CtL6SL9UKRTnMCrNpDh\\n&quot; +\r\n            &quot;WfxaC6xbMf4tf242Bk0TGe8mK6gH5baUs4C14Tq87yUkC9IVMegNlki89nsT5uRX\\n&quot; +\r\n            &quot;swIDAQAB\\n&quot; +\r\n            &quot;-----END PUBLIC KEY-----&quot;;\r\n    String private_key = &quot;-----BEGIN RSA PRIVATE KEY-----\\n&quot; +\r\n            &quot;MIIEpQIBAAKCAQEAm1AThUE8dUz6x5DeDK3JSKcBbqFVtplHCdf+036+2tZ1RmHc\\n&quot; +\r\n            &quot;wsKZ6AF4dtCQ/8n+2lMQgdfWSe+gKEp2lIh0YQUxgQneLXGzvsEjbFVLgxSdLnEf\\n&quot; +\r\n            &quot;uZrJsNC3J9LHlnvwYYvBQGaSVCx7WhvxFyDCBJ7SlpjSzVY9yduxRAHKYnsFRwKg\\n&quot; +\r\n            &quot;EW15N3VYbspd/LTexNHXTbuzQ968wZbWd5rXqHejM9pFEQsxqBq7uIk3eFvDMZzy\\n&quot; +\r\n            &quot;i47NaM9eRHX6LyDF4CtL6SL9UKRTnMCrNpDhWfxaC6xbMf4tf242Bk0TGe8mK6gH\\n&quot; +\r\n            &quot;5baUs4C14Tq87yUkC9IVMegNlki89nsT5uRXswIDAQABAoIBAQCYztBl6ylwv6x9\\n&quot; +\r\n            &quot;bSsLjnDb6nSeRF3wqh4asUknDSz6YsY/2Uk61fxXKBs9yzbec/8rD07OcW2EkR8i\\n&quot; +\r\n            &quot;hSDmQts+Gb37F5phW91dcOlJTSJedYmwh9yO4JxQOwn5RIjaplZ7ouUgV8rgxmMW\\n&quot; +\r\n            &quot;5Sbvemtp4FmRkgrVvGROlrhyENDu0lJzPtVks8XA1Re+CrOinhTCkISChqq/sHVC\\n&quot; +\r\n            &quot;sJfsI6OFHzk0Oexnh0sIG5MfaMNFp4Mh38UhrXFBJ6cIBuveEGzzED+AB6O30j3k\\n&quot; +\r\n            &quot;XT2pQbjCJcpekfpzfcW1VRfebLIgB+2mVjSleMKgA7ImyXOg4DCJiLWLulgOKmiE\\n&quot; +\r\n            &quot;x7qH684BAoGBAM1onwWBR3ERui4p22dNEoZ2tOygzEJKzhjsC1tRDAyO8Gr4QWNk\\n&quot; +\r\n            &quot;fNt/+8+gjJkMkkoKtjaqPrOdclhdPVCyQWvJt5ZAyAv0J7HDbZU8uShAOJI4eCpi\\n&quot; +\r\n            &quot;G2Xf20S0v84V12MEriWKZTmXUyWWKR87XkLTcVLCyfMTqPR1gMtHfpJpAoGBAMGQ\\n&quot; +\r\n            &quot;0lrFeNM2xqD7fZE/465wxp+kYPf/sMNkk6IqxJljtnzjWbySDU9csSwlN03Q36vu\\n&quot; +\r\n            &quot;/TGFIUWx2uTvjRHGEPvOC9agEZ8p9kHWrQb1ZgICpd/yWEy9nze66OayN3JyxkVR\\n&quot; +\r\n            &quot;pg2R5RRfnWuI9U6CyPhuZlptqDBUHXhG2kVB3Z27AoGBALYT0CpED3zl1uBG0CqA\\n&quot; +\r\n            &quot;gjRZE0VRv93fi1NCIUr/y6tyJSDdELE3CQpVJ3RDf33HTAF//0bzoAL9RLeZZtma\\n&quot; +\r\n            &quot;OS1/sFHq+KjH80u6zO9l1UcdrkfG8JW5Q0oJpccAZakbaUJniqrSQ6pKPjTqJ2d8\\n&quot; +\r\n            &quot;67BW13QiIHts6O5RHiqTJFpJAoGBAJEfMgbqDJdWdv8U7mSq4NnVJaVlCWqF4hHs\\n&quot; +\r\n            &quot;Yx9vLyzNbHEfxxSw75ezqAWv9VG7KybtrBindnWZTcLcswhDVlJjfc6w/eU2AbIE\\n&quot; +\r\n            &quot;8H7KF2ukbpaDTJ5kgG25DYqAzT9aO7qW54c+/eATe6O28CuntGNF6ikcE8AAIIQf\\n&quot; +\r\n            &quot;ot/P7QanAoGADQ5hDdPaq+wSFhYoeh//QfXrkbIcNl18ienY5Sn4jDrNgkkxghdc\\n&quot; +\r\n            &quot;WV3biTqIGMf15CI+//dSShbzI7nyoYQ8bl6HsFbEnGyS95PySdF6gUhsPKG83Ih2\\n&quot; +\r\n            &quot;SftvM2TzsO9D8XemkOHNwayPMN6YQA3SDZTZNNv3LYD7NkqhRQI0YUo=\\n&quot; +\r\n            &quot;-----END RSA PRIVATE KEY-----&quot;;\r\n\r\n    public native byte[] publicencryptRsa(String key, byte[] plainText);\r\n    public native byte[] privatedecryptRsa(String key, byte[] encText);\r\nbyte[] plainText = &quot;utnznxckymtyhedtumwtswlxgqkibutnznxckymtyhedtumwtswlxgqkibutnznxckymtyhedtumwtswlxgqkib1&quot;.getBytes(StandardCharsets.UTF_8);\r\n        StringBuilder sb2 = new StringBuilder();\r\n        for (byte b : plainText) {\r\n            sb2.append(String.format(&quot;%02X&quot;, b));\r\n        }\r\n        Log.d(TAG, &quot;onCreate: plainText = &quot; + sb2.toString());\r\n            //byte [] keyData = &quot;eQg2MDbk3uUtRhMw&quot;.getBytes();\r\n//        byte [] encryptedText = encryptAes256(keyData, plainText);\r\n//        byte [] decryptedText = decryptAes256(keyData, encryptedText);\r\n          byte [] encText = publicencryptRsa(public_key, plainText);\r\n            sb2 = new StringBuilder();\r\n            for (byte b : encText) {\r\n                sb2.append(String.format(&quot;%02X&quot;, b));\r\n            }\r\n            Log.d(TAG, &quot;onCreate: encText = &quot; + sb2.toString());\r\n          byte[] decBa = privatedecryptRsa(private_key, encText);\r\n        sb2 = new StringBuilder();\r\n        for (byte b : decBa) {\r\n            sb2.append(String.format(&quot;%02X&quot;, b));\r\n        }\r\n        Log.d(TAG, &quot;onCreate: decBa = &quot; + sb2.toString());\r\n```\r\n\r\nMethods from .cpp file\r\n\r\nStructures\r\n```\r\nRSA * createRSApub(std::string sKey) {\r\n   \r\n     RSA *rsa = nullptr;\r\n     BIO *keybio; //  BIO_new( BIO_s_mem() );\r\n     keybio = BIO_new_mem_buf(sKey.c_str(), sKey.length());\r\n\r\n    if (keybio == nullptr) {\r\n        printf( &quot;Failed to create key BIO&quot;);\r\n        return nullptr;\r\n    }\r\n    else  rsa = PEM_read_bio_RSA_PUBKEY(keybio, nullptr,nullptr, nullptr);\r\n\r\n    BIO_free(keybio);\r\n\r\n    return rsa;\r\n}\r\nRSA * createRSApriv(std::string sKey) {\r\n    RSA *rsa = nullptr;\r\n    BIO *keybio;\r\n    keybio = BIO_new_mem_buf(sKey.c_str(), sKey.length());\r\n\r\n    if (keybio == nullptr) {\r\n        printf( &quot;Failed to create key BIO&quot;);\r\n        return nullptr;\r\n    }\r\n    else rsa = PEM_read_bio_RSAPrivateKey(keybio, nullptr,nullptr, nullptr);\r\n  \r\n    return rsa;\r\n}\r\n```\r\nEncryption\r\n```\r\nJava_com_example_myapplication_MainActivity_publicencryptRsa(JNIEnv *env, jobject thiz, jstring key,\r\n                                                       jbyteArray plain_text) {\r\n      jboolean isCopy;\r\n\r\n    unsigned char *key_data = (unsigned char *) (env)-&gt;GetStringUTFChars(key, &amp;isCopy);\r\n    std::string sKey((char*) key_data);\r\n    int key_data_len = strlen((char*)key_data);\r\n\r\n\r\n    int plainText_len = env-&gt;GetArrayLength(plain_text);\r\n    jbyte* temp = env-&gt;GetByteArrayElements(plain_text,&amp;isCopy);\r\n    unsigned char* plainText;\r\n    plainText = (unsigned char *) temp;\r\n\r\n\r\n    if(nullptr == plainText)\r\n        return nullptr;\r\n\r\n    LOGI(&quot;The data to encrypt is : %s&quot;, plainText);\r\n\r\n    unsigned char chEncryptedData[4098] = {};\r\n    int iResult = RSA_public_encrypt(plainText_len, (unsigned char*)plain_text, chEncryptedData, createRSApub(sKey), RSA_PKCS1_OAEP_PADDING);\r\n\r\n//    env-&gt;ReleaseStringUTFChars(env, inData, cData);\r\n\r\n// If encryption fails, returns nullptr string, else returns encrypted string\r\n    if(-1 == iResult) {\r\n        char *chErrMsg = (char*)malloc(256);\r\n        ERR_load_crypto_strings();\r\n        ERR_error_string(ERR_get_error(), chErrMsg);\r\n        LOGE(&quot;The data Encryption failed due to the reason : %s&quot;, chErrMsg);\r\n        free(chErrMsg);\r\n        return nullptr;\r\n    }\r\n//    for(int i = 0; i &lt; 255; ++i)\r\n//        LOGD(&quot;The Encrypted data is[%d] : %c&quot;, i, chEncryptedData[i]);\r\n\r\n    jbyteArray EncryptedByteArray = env-&gt;NewByteArray(iResult);\r\n    env-&gt;SetByteArrayRegion(EncryptedByteArray, 0, iResult, (jbyte *) chEncryptedData);\r\n\r\n    return EncryptedByteArray;\r\n}\r\n```\r\nDecryption\r\n\r\n```\r\nJava_com_example_myapplication_MainActivity_privatedecryptRsa(JNIEnv *env, jobject thiz,\r\n                                                       jstring private_key,\r\n                                                       jbyteArray enc_text) {\r\n    jboolean isCopy;\r\n    unsigned char *key_data = (unsigned char *) (env)-&gt;GetStringUTFChars(private_key, &amp;isCopy);\r\n    std::string sKey((char*) key_data);\r\n    int key_data_len = strlen((char*)key_data);\r\n\r\n    int encText_len = env-&gt;GetArrayLength(enc_text);\r\n    jbyte* a = env-&gt;GetByteArrayElements(enc_text,&amp;isCopy);\r\n    const unsigned char* encText;\r\n    encText = (unsigned char *) a;\r\n\r\n    unsigned char chDecryptedData[4098] = {};\r\n\r\n    int result = RSA_private_decrypt(256,encText, chDecryptedData, createRSApriv(sKey), RSA_PKCS1_OAEP_PADDING);\r\n\r\n    if(-1 == result) {\r\n        char *chErrMsg = (char*)malloc(256);\r\n        ERR_load_crypto_strings();\r\n        ERR_error_string(ERR_get_error(), chErrMsg);\r\n        LOGE(&quot;The data Decryption failed due to the reason : %s&quot;, chErrMsg);\r\n        free(chErrMsg);\r\n        return nullptr;\r\n    }\r\n\r\n//    for(int i = 0; i &lt; 100; ++i)\r\n//        LOGD(&quot;The Decrypted data is[%d] : %c&quot;, i, chDecryptedData[i]);\r\n\r\n    jbyteArray DecryptedByteArray = env-&gt;NewByteArray(result);\r\n    env-&gt;SetByteArrayRegion(DecryptedByteArray, 0, result, (jbyte *) chDecryptedData);\r\n\r\n    return DecryptedByteArray;\r\n}\r\n```\r\nHere&#39;s out\r\n[enter image description here](https://i.stack.imgur.com/mZWTE.png)\r\n\r\n\r\nI don&#39;t know where the problem actually is, both keys are valid and `RSA_private_decrypt ` returns correct length of plain_text, but wrong characters.","title":"JNI OpenSSL RSA Decryption not working properly","body":"<p>Encryption seems to work fine, but when I start decryption I get wrong output. Keys are given in PEM and length is 2048.</p>\n<p>Here are the methods that are called from Java</p>\n<pre><code>String public_key = &quot;-----BEGIN PUBLIC KEY-----\\n&quot; +\n            &quot;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAm1AThUE8dUz6x5DeDK3J\\n&quot; +\n            &quot;SKcBbqFVtplHCdf+036+2tZ1RmHcwsKZ6AF4dtCQ/8n+2lMQgdfWSe+gKEp2lIh0\\n&quot; +\n            &quot;YQUxgQneLXGzvsEjbFVLgxSdLnEfuZrJsNC3J9LHlnvwYYvBQGaSVCx7WhvxFyDC\\n&quot; +\n            &quot;BJ7SlpjSzVY9yduxRAHKYnsFRwKgEW15N3VYbspd/LTexNHXTbuzQ968wZbWd5rX\\n&quot; +\n            &quot;qHejM9pFEQsxqBq7uIk3eFvDMZzyi47NaM9eRHX6LyDF4CtL6SL9UKRTnMCrNpDh\\n&quot; +\n            &quot;WfxaC6xbMf4tf242Bk0TGe8mK6gH5baUs4C14Tq87yUkC9IVMegNlki89nsT5uRX\\n&quot; +\n            &quot;swIDAQAB\\n&quot; +\n            &quot;-----END PUBLIC KEY-----&quot;;\n    String private_key = &quot;-----BEGIN RSA PRIVATE KEY-----\\n&quot; +\n            &quot;MIIEpQIBAAKCAQEAm1AThUE8dUz6x5DeDK3JSKcBbqFVtplHCdf+036+2tZ1RmHc\\n&quot; +\n            &quot;wsKZ6AF4dtCQ/8n+2lMQgdfWSe+gKEp2lIh0YQUxgQneLXGzvsEjbFVLgxSdLnEf\\n&quot; +\n            &quot;uZrJsNC3J9LHlnvwYYvBQGaSVCx7WhvxFyDCBJ7SlpjSzVY9yduxRAHKYnsFRwKg\\n&quot; +\n            &quot;EW15N3VYbspd/LTexNHXTbuzQ968wZbWd5rXqHejM9pFEQsxqBq7uIk3eFvDMZzy\\n&quot; +\n            &quot;i47NaM9eRHX6LyDF4CtL6SL9UKRTnMCrNpDhWfxaC6xbMf4tf242Bk0TGe8mK6gH\\n&quot; +\n            &quot;5baUs4C14Tq87yUkC9IVMegNlki89nsT5uRXswIDAQABAoIBAQCYztBl6ylwv6x9\\n&quot; +\n            &quot;bSsLjnDb6nSeRF3wqh4asUknDSz6YsY/2Uk61fxXKBs9yzbec/8rD07OcW2EkR8i\\n&quot; +\n            &quot;hSDmQts+Gb37F5phW91dcOlJTSJedYmwh9yO4JxQOwn5RIjaplZ7ouUgV8rgxmMW\\n&quot; +\n            &quot;5Sbvemtp4FmRkgrVvGROlrhyENDu0lJzPtVks8XA1Re+CrOinhTCkISChqq/sHVC\\n&quot; +\n            &quot;sJfsI6OFHzk0Oexnh0sIG5MfaMNFp4Mh38UhrXFBJ6cIBuveEGzzED+AB6O30j3k\\n&quot; +\n            &quot;XT2pQbjCJcpekfpzfcW1VRfebLIgB+2mVjSleMKgA7ImyXOg4DCJiLWLulgOKmiE\\n&quot; +\n            &quot;x7qH684BAoGBAM1onwWBR3ERui4p22dNEoZ2tOygzEJKzhjsC1tRDAyO8Gr4QWNk\\n&quot; +\n            &quot;fNt/+8+gjJkMkkoKtjaqPrOdclhdPVCyQWvJt5ZAyAv0J7HDbZU8uShAOJI4eCpi\\n&quot; +\n            &quot;G2Xf20S0v84V12MEriWKZTmXUyWWKR87XkLTcVLCyfMTqPR1gMtHfpJpAoGBAMGQ\\n&quot; +\n            &quot;0lrFeNM2xqD7fZE/465wxp+kYPf/sMNkk6IqxJljtnzjWbySDU9csSwlN03Q36vu\\n&quot; +\n            &quot;/TGFIUWx2uTvjRHGEPvOC9agEZ8p9kHWrQb1ZgICpd/yWEy9nze66OayN3JyxkVR\\n&quot; +\n            &quot;pg2R5RRfnWuI9U6CyPhuZlptqDBUHXhG2kVB3Z27AoGBALYT0CpED3zl1uBG0CqA\\n&quot; +\n            &quot;gjRZE0VRv93fi1NCIUr/y6tyJSDdELE3CQpVJ3RDf33HTAF//0bzoAL9RLeZZtma\\n&quot; +\n            &quot;OS1/sFHq+KjH80u6zO9l1UcdrkfG8JW5Q0oJpccAZakbaUJniqrSQ6pKPjTqJ2d8\\n&quot; +\n            &quot;67BW13QiIHts6O5RHiqTJFpJAoGBAJEfMgbqDJdWdv8U7mSq4NnVJaVlCWqF4hHs\\n&quot; +\n            &quot;Yx9vLyzNbHEfxxSw75ezqAWv9VG7KybtrBindnWZTcLcswhDVlJjfc6w/eU2AbIE\\n&quot; +\n            &quot;8H7KF2ukbpaDTJ5kgG25DYqAzT9aO7qW54c+/eATe6O28CuntGNF6ikcE8AAIIQf\\n&quot; +\n            &quot;ot/P7QanAoGADQ5hDdPaq+wSFhYoeh//QfXrkbIcNl18ienY5Sn4jDrNgkkxghdc\\n&quot; +\n            &quot;WV3biTqIGMf15CI+//dSShbzI7nyoYQ8bl6HsFbEnGyS95PySdF6gUhsPKG83Ih2\\n&quot; +\n            &quot;SftvM2TzsO9D8XemkOHNwayPMN6YQA3SDZTZNNv3LYD7NkqhRQI0YUo=\\n&quot; +\n            &quot;-----END RSA PRIVATE KEY-----&quot;;\n\n    public native byte[] publicencryptRsa(String key, byte[] plainText);\n    public native byte[] privatedecryptRsa(String key, byte[] encText);\nbyte[] plainText = &quot;utnznxckymtyhedtumwtswlxgqkibutnznxckymtyhedtumwtswlxgqkibutnznxckymtyhedtumwtswlxgqkib1&quot;.getBytes(StandardCharsets.UTF_8);\n        StringBuilder sb2 = new StringBuilder();\n        for (byte b : plainText) {\n            sb2.append(String.format(&quot;%02X&quot;, b));\n        }\n        Log.d(TAG, &quot;onCreate: plainText = &quot; + sb2.toString());\n            //byte [] keyData = &quot;eQg2MDbk3uUtRhMw&quot;.getBytes();\n//        byte [] encryptedText = encryptAes256(keyData, plainText);\n//        byte [] decryptedText = decryptAes256(keyData, encryptedText);\n          byte [] encText = publicencryptRsa(public_key, plainText);\n            sb2 = new StringBuilder();\n            for (byte b : encText) {\n                sb2.append(String.format(&quot;%02X&quot;, b));\n            }\n            Log.d(TAG, &quot;onCreate: encText = &quot; + sb2.toString());\n          byte[] decBa = privatedecryptRsa(private_key, encText);\n        sb2 = new StringBuilder();\n        for (byte b : decBa) {\n            sb2.append(String.format(&quot;%02X&quot;, b));\n        }\n        Log.d(TAG, &quot;onCreate: decBa = &quot; + sb2.toString());\n</code></pre>\n<p>Methods from .cpp file</p>\n<p>Structures</p>\n<pre><code>RSA * createRSApub(std::string sKey) {\n   \n     RSA *rsa = nullptr;\n     BIO *keybio; //  BIO_new( BIO_s_mem() );\n     keybio = BIO_new_mem_buf(sKey.c_str(), sKey.length());\n\n    if (keybio == nullptr) {\n        printf( &quot;Failed to create key BIO&quot;);\n        return nullptr;\n    }\n    else  rsa = PEM_read_bio_RSA_PUBKEY(keybio, nullptr,nullptr, nullptr);\n\n    BIO_free(keybio);\n\n    return rsa;\n}\nRSA * createRSApriv(std::string sKey) {\n    RSA *rsa = nullptr;\n    BIO *keybio;\n    keybio = BIO_new_mem_buf(sKey.c_str(), sKey.length());\n\n    if (keybio == nullptr) {\n        printf( &quot;Failed to create key BIO&quot;);\n        return nullptr;\n    }\n    else rsa = PEM_read_bio_RSAPrivateKey(keybio, nullptr,nullptr, nullptr);\n  \n    return rsa;\n}\n</code></pre>\n<p>Encryption</p>\n<pre><code>Java_com_example_myapplication_MainActivity_publicencryptRsa(JNIEnv *env, jobject thiz, jstring key,\n                                                       jbyteArray plain_text) {\n      jboolean isCopy;\n\n    unsigned char *key_data = (unsigned char *) (env)-&gt;GetStringUTFChars(key, &amp;isCopy);\n    std::string sKey((char*) key_data);\n    int key_data_len = strlen((char*)key_data);\n\n\n    int plainText_len = env-&gt;GetArrayLength(plain_text);\n    jbyte* temp = env-&gt;GetByteArrayElements(plain_text,&amp;isCopy);\n    unsigned char* plainText;\n    plainText = (unsigned char *) temp;\n\n\n    if(nullptr == plainText)\n        return nullptr;\n\n    LOGI(&quot;The data to encrypt is : %s&quot;, plainText);\n\n    unsigned char chEncryptedData[4098] = {};\n    int iResult = RSA_public_encrypt(plainText_len, (unsigned char*)plain_text, chEncryptedData, createRSApub(sKey), RSA_PKCS1_OAEP_PADDING);\n\n//    env-&gt;ReleaseStringUTFChars(env, inData, cData);\n\n// If encryption fails, returns nullptr string, else returns encrypted string\n    if(-1 == iResult) {\n        char *chErrMsg = (char*)malloc(256);\n        ERR_load_crypto_strings();\n        ERR_error_string(ERR_get_error(), chErrMsg);\n        LOGE(&quot;The data Encryption failed due to the reason : %s&quot;, chErrMsg);\n        free(chErrMsg);\n        return nullptr;\n    }\n//    for(int i = 0; i &lt; 255; ++i)\n//        LOGD(&quot;The Encrypted data is[%d] : %c&quot;, i, chEncryptedData[i]);\n\n    jbyteArray EncryptedByteArray = env-&gt;NewByteArray(iResult);\n    env-&gt;SetByteArrayRegion(EncryptedByteArray, 0, iResult, (jbyte *) chEncryptedData);\n\n    return EncryptedByteArray;\n}\n</code></pre>\n<p>Decryption</p>\n<pre><code>Java_com_example_myapplication_MainActivity_privatedecryptRsa(JNIEnv *env, jobject thiz,\n                                                       jstring private_key,\n                                                       jbyteArray enc_text) {\n    jboolean isCopy;\n    unsigned char *key_data = (unsigned char *) (env)-&gt;GetStringUTFChars(private_key, &amp;isCopy);\n    std::string sKey((char*) key_data);\n    int key_data_len = strlen((char*)key_data);\n\n    int encText_len = env-&gt;GetArrayLength(enc_text);\n    jbyte* a = env-&gt;GetByteArrayElements(enc_text,&amp;isCopy);\n    const unsigned char* encText;\n    encText = (unsigned char *) a;\n\n    unsigned char chDecryptedData[4098] = {};\n\n    int result = RSA_private_decrypt(256,encText, chDecryptedData, createRSApriv(sKey), RSA_PKCS1_OAEP_PADDING);\n\n    if(-1 == result) {\n        char *chErrMsg = (char*)malloc(256);\n        ERR_load_crypto_strings();\n        ERR_error_string(ERR_get_error(), chErrMsg);\n        LOGE(&quot;The data Decryption failed due to the reason : %s&quot;, chErrMsg);\n        free(chErrMsg);\n        return nullptr;\n    }\n\n//    for(int i = 0; i &lt; 100; ++i)\n//        LOGD(&quot;The Decrypted data is[%d] : %c&quot;, i, chDecryptedData[i]);\n\n    jbyteArray DecryptedByteArray = env-&gt;NewByteArray(result);\n    env-&gt;SetByteArrayRegion(DecryptedByteArray, 0, result, (jbyte *) chDecryptedData);\n\n    return DecryptedByteArray;\n}\n</code></pre>\n<p>Here's out\n<a href=\"https://i.stack.imgur.com/mZWTE.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I don't know where the problem actually is, both keys are valid and <code>RSA_private_decrypt </code> returns correct length of plain_text, but wrong characters.</p>\n"},{"tags":["java","zip","archive","apache-commons-compress","http-range"],"comments":[{"owner":{"account_id":1136690,"reputation":104411,"user_id":1180620,"accept_rate":83,"display_name":"Mark Adler"},"score":0,"creation_date":1691524216,"post_id":76861307,"comment_id":135502689,"body_markdown":"Note that tar files don&#39;t _have_ a central directory. You&#39;d have to poke around through the whole thing to construct a directory. If the tar file is compressed, you&#39;d simply have to download the whole thing.","body":"Note that tar files don&#39;t <i>have</i> a central directory. You&#39;d have to poke around through the whole thing to construct a directory. If the tar file is compressed, you&#39;d simply have to download the whole thing."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691525950,"post_id":76861307,"comment_id":135502965,"body_markdown":"Why not have a servlet list it for you?","body":"Why not have a servlet list it for you?"},{"owner":{"account_id":4590532,"reputation":143,"user_id":3723971,"accept_rate":50,"display_name":"Alper M."},"score":0,"creation_date":1692902582,"post_id":76861307,"comment_id":135691110,"body_markdown":"thanks for your comments. @MarkAdler I didn&#39;t know about this limitation of the tar file. I guess there is no generic solution with java or python. We will download the file to the server and list the content.","body":"thanks for your comments. @MarkAdler I didn&#39;t know about this limitation of the tar file. I guess there is no generic solution with java or python. We will download the file to the server and list the content."}],"answers":[{"comments":[{"owner":{"account_id":4590532,"reputation":143,"user_id":3723971,"accept_rate":50,"display_name":"Alper M."},"score":0,"creation_date":1692902725,"post_id":76863112,"comment_id":135691142,"body_markdown":"Thank you very much for the method you explained in detail for the zip format.","body":"Thank you very much for the method you explained in detail for the zip format."}],"tags":[],"owner":{"account_id":1136690,"reputation":104411,"user_id":1180620,"accept_rate":83,"display_name":"Mark Adler"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691528040,"creation_date":1691527653,"answer_id":76863112,"question_id":76861307,"body_markdown":"If you can&#39;t run something on the server side, then you can do a range request on just the end of the zip file, and reconstruct a zip file locally with no contents on which you can use `unzip` to list the contents. You would write zeros for the content.\r\n\r\nI just tried zeroing out everything before the central directory on a large zip file, and unzip listed the contents just fine.\r\n\r\nTo do this you could either a) search for the end of central directory, and then possibly the zip64 end record locator and zip64 end record, in order determine the offset of the central directory, reading from there, or b) read larger and larger portions of the end of the zip file, say doubling each time, until `unzip -l` works. If you have not captured the entire central directory, then `unzip -l` will report &quot;start of central directory not found&quot;.\r\n\r\nTo use range requests, you will need to know the size of the zip file. Then for b), you can read, say, the last 1K, the 1K before that, the 2K before that, the 4K before that, and so on, until `unzip -l` works. Each time you would update a file with zeros up to what you have accumulated from the end of the zip file so far, followed by what you have accumulated. To do this efficiently, you would start with file of all zeros with the length of the zip file on the server. Then as you accumulate more data from the end, write over the end of that file, repeating `unzip -l` each time.\r\n\r\nIf you want to try a), then you&#39;ll need to read and understand the [zip file format appnote][1].\r\n\r\n\r\n  [1]: https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT","title":"How to get list of files in an archive file without download","body":"<p>If you can't run something on the server side, then you can do a range request on just the end of the zip file, and reconstruct a zip file locally with no contents on which you can use <code>unzip</code> to list the contents. You would write zeros for the content.</p>\n<p>I just tried zeroing out everything before the central directory on a large zip file, and unzip listed the contents just fine.</p>\n<p>To do this you could either a) search for the end of central directory, and then possibly the zip64 end record locator and zip64 end record, in order determine the offset of the central directory, reading from there, or b) read larger and larger portions of the end of the zip file, say doubling each time, until <code>unzip -l</code> works. If you have not captured the entire central directory, then <code>unzip -l</code> will report &quot;start of central directory not found&quot;.</p>\n<p>To use range requests, you will need to know the size of the zip file. Then for b), you can read, say, the last 1K, the 1K before that, the 2K before that, the 4K before that, and so on, until <code>unzip -l</code> works. Each time you would update a file with zeros up to what you have accumulated from the end of the zip file so far, followed by what you have accumulated. To do this efficiently, you would start with file of all zeros with the length of the zip file on the server. Then as you accumulate more data from the end, write over the end of that file, repeating <code>unzip -l</code> each time.</p>\n<p>If you want to try a), then you'll need to read and understand the <a href=\"https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT\" rel=\"nofollow noreferrer\">zip file format appnote</a>.</p>\n"}],"owner":{"account_id":4590532,"reputation":143,"user_id":3723971,"accept_rate":50,"display_name":"Alper M."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691528040,"creation_date":1691510399,"question_id":76861307,"body_markdown":"I try to get list of file names in large archive files (zip, 7z, tar, rar etc.) located in remote server. I avoid to download files due to network cost.\r\n\r\nAn alternative is to use an HTTP range request ([1][1], [2][2], [3][3]); however, each archive file type has a unique allocation for the entire central directory. Apache commons-compress library supports most of them, I tend to use it to overcome this issue. How can I use it for remote archive files without download?\r\n\r\nAs with the python libraries ([1][4], [2][5]), do you have any advice for Java?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54657387/download-only-a-range-of-bytes-or-a-specific-file-from-a-tar-archive-in-s3?utm_source=pocket_reader\r\n  [2]: https://stackoverflow.com/a/17434121/3723971\r\n  [3]: https://stackoverflow.com/a/22112707/3723971\r\n  [4]: https://github.com/gtsystem/python-remotezip?utm_source=pocket_reader#list-members-in-archive\r\n  [5]: https://github.com/kgonia/onlinezip?utm_source=pocket_reader#usage","title":"How to get list of files in an archive file without download","body":"<p>I try to get list of file names in large archive files (zip, 7z, tar, rar etc.) located in remote server. I avoid to download files due to network cost.</p>\n<p>An alternative is to use an HTTP range request (<a href=\"https://stackoverflow.com/questions/54657387/download-only-a-range-of-bytes-or-a-specific-file-from-a-tar-archive-in-s3?utm_source=pocket_reader\">1</a>, <a href=\"https://stackoverflow.com/a/17434121/3723971\">2</a>, <a href=\"https://stackoverflow.com/a/22112707/3723971\">3</a>); however, each archive file type has a unique allocation for the entire central directory. Apache commons-compress library supports most of them, I tend to use it to overcome this issue. How can I use it for remote archive files without download?</p>\n<p>As with the python libraries (<a href=\"https://github.com/gtsystem/python-remotezip?utm_source=pocket_reader#list-members-in-archive\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://github.com/kgonia/onlinezip?utm_source=pocket_reader#usage\" rel=\"nofollow noreferrer\">2</a>), do you have any advice for Java?</p>\n"},{"tags":["java","netty","nio","radius","tinyradius"],"comments":[{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1691694210,"post_id":76863123,"comment_id":135529824,"body_markdown":"OK I just saw this [one](https://github.com/globalreachtech/tinyradius-netty/issues/62). Seems like this is a planned item..","body":"OK I just saw this <a href=\"https://github.com/globalreachtech/tinyradius-netty/issues/62\" rel=\"nofollow noreferrer\">one</a>. Seems like this is a planned item.."}],"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691527876,"creation_date":1691527876,"question_id":76863123,"body_markdown":"This is regarding the use of [tinyradius-netty][1] &amp; the mechanism to properly close the channel &amp; shutdown (as part of app shutdown). \r\n\r\n[Here][2] is the sample code on the [tinyradius-netty][1] public git repo.\r\n\r\nIf I try to test it as-is I see that the program does NOT finish &amp; return after executing the main method. When I look up for active socket use (with `netstat -anpe`) I see that its still connected.\r\n\r\n    root@Ubuntu1:~/TINYRADIUS-NETTY# ps -aef | grep java\r\n    root     13701 34395  0 Aug07 pts/17   00:02:19 java -jar target/tinyradius-netty-poc-1.0-jar-with-dependencies.jar 10.20.30.40 somesecret someusername somepwd\r\n    ...\r\n    ...\r\n      \r\n    root@Ubuntu1:~/TINYRADIUS-NETTY# netstat -anpe | grep java\r\n    ...\r\n    ...\r\n    unix  2      [ ]         STREAM     CONNECTED     7314176  13701/java          \r\n    ...\r\n    ...\r\n\r\n\r\nNow I know the above sample program is a little incomplete in the sense that it doesn&#39;t properly shutdown the `NioEventLoopGroup` or (I suspect) properly close the `NioDatagramChannel` (based on [this][3] SO answer). \r\n\r\nBut even if I do the above two I still see that the program does NOT finish &amp; return. Specifically even after I invoke [NioDatagramChannel#close()][4] &amp; then invoke [ChannelFuture#syncUninterruptibly()][5] or [ChannelFuture#awaitUninterruptibly()][6] &amp; they both return, I still see the same behavior (program doesn&#39;t return &amp; UNIX domain socket actively connected). \r\n\r\nI also tried invoking [ChannelFuture#cancel(true)][7] but it always returns `false` ([ChannelFuture#isCancellable()][8] returns true).\r\n\r\nBased on [this][9] SO answer I also verified that I am not using the affected version &amp; instead using the version `4.1.87.Final`.\r\n\r\nCan someone help throw some pointers on what I am missing here? \r\n\r\nBelow is my POM &amp; code.\r\n\r\nCode:\r\n\r\n    import io.netty.bootstrap.Bootstrap;\r\n    import io.netty.channel.ChannelFuture;\r\n    import io.netty.channel.ChannelInitializer;\r\n    import io.netty.channel.ChannelHandlerContext;\r\n    import io.netty.channel.ChannelPromise;\r\n    import io.netty.channel.ChannelDuplexHandler;\r\n    import io.netty.channel.ChannelOutboundHandler;\r\n    import io.netty.channel.ChannelOutboundHandlerAdapter;\r\n    import io.netty.channel.nio.NioEventLoopGroup;\r\n    import io.netty.channel.socket.DatagramChannel;\r\n    import io.netty.channel.socket.nio.NioDatagramChannel;\r\n    import io.netty.util.HashedWheelTimer;\r\n    import io.netty.util.Timer;\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n    import org.tinyradius.core.RadiusPacketException;\r\n    import org.tinyradius.core.dictionary.DefaultDictionary;\r\n    import org.tinyradius.core.dictionary.Dictionary;\r\n    import org.tinyradius.core.packet.request.AccessRequest;\r\n    import org.tinyradius.core.packet.request.AccessRequestPap;\r\n    import org.tinyradius.core.packet.request.AccountingRequest;\r\n    import org.tinyradius.core.packet.request.RadiusRequest;\r\n    import org.tinyradius.core.packet.response.RadiusResponse;\r\n    import org.tinyradius.io.RadiusEndpoint;\r\n    import org.tinyradius.io.client.RadiusClient;\r\n    import org.tinyradius.io.client.handler.BlacklistHandler;\r\n    import org.tinyradius.io.client.handler.ClientDatagramCodec;\r\n    import org.tinyradius.io.client.handler.PromiseAdapter;\r\n    import org.tinyradius.io.client.timeout.FixedTimeoutHandler;\r\n    \r\n    import java.net.InetSocketAddress;\r\n    import java.util.*;\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    import static org.tinyradius.core.packet.PacketType.ACCESS_REQUEST;\r\n    import static org.tinyradius.core.packet.PacketType.ACCOUNTING_REQUEST;\r\n    \r\n    /**\r\n     * @author lmk\r\n     *\r\n     */\r\n    public final class TestRadiusClient {\r\n    \r\n    \tprivate static final Logger logger = LogManager.getLogger();\r\n    \r\n    \r\n    \t/**\r\n    \t * Radius command line client.\r\n    \t *  \r\n    \t * @param args [host, sharedSecret, username, password] \r\n    \t */\r\n    \tpublic static void main(String... args) {\r\n    \t\t\r\n    \t\tif (args.length != 4) {\r\n    \t\t\tSystem.out.println(&quot;Usage: TestClient [hostName] [sharedSecret] [userName] [password]&quot;);\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t\r\n    \t\tfinal NioEventLoopGroup eventLoopGroup = new NioEventLoopGroup(4);\r\n    \t\tRadiusClient rc = null;\r\n    \t\t// Below is just a temporary hack to get a reference to the channel to see if i can close it to verify..\r\n    \t\tfinal Map.Entry&lt;String, DatagramChannel&gt; channelHolder = new AbstractMap.SimpleEntry&lt;&gt;(NioDatagramChannel.class.getName(), null);\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tfinal String host = args[0];\r\n    \t\t\tfinal String shared = args[1];\r\n    \t\t\tfinal String user = args[2];\r\n    \t\t\tfinal String pass = args[3];\r\n    \r\n    \t\t\tfinal Dictionary dictionary = DefaultDictionary.INSTANCE;\r\n    \t\t\tfinal Timer timer = new HashedWheelTimer();\r\n    \r\n    \t\t\tfinal Bootstrap bootstrap = new Bootstrap().group(eventLoopGroup).channel(NioDatagramChannel.class);\r\n    \t\t\t class MyOutboundHandler extends ChannelOutboundHandlerAdapter {\r\n    \t\t\t      @Override\r\n    \t\t\t     public void close(ChannelHandlerContext ctx, ChannelPromise promise) {\r\n    \t\t\t         System.out.println(&quot;Closing from MyOutboundHandler..&quot;);\r\n    \t\t\t         ctx.close(promise);\r\n    \t\t\t     }\r\n    \t\t\t }\r\n    \t\t\t\r\n    \t\t\trc = new RadiusClient(\r\n    \t\t\t\t\tbootstrap, new InetSocketAddress(0), new FixedTimeoutHandler(timer), new ChannelInitializer&lt;DatagramChannel&gt;() {\r\n    \t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\tprotected void initChannel(DatagramChannel ch) {\r\n    \t\t\t\t\t\t\tchannelHolder.setValue(ch);\r\n    \t\t\t\t\t\t\tch.pipeline().addLast(\r\n    \t\t\t\t\t\t\t\t\tnew ClientDatagramCodec(dictionary),\r\n    \t\t\t\t\t\t\t\t\tnew PromiseAdapter(),\r\n    \t\t\t\t\t\t\t\t\tnew BlacklistHandler(60_000, 3));\r\n    \t\t\t\t\t\t\tch.pipeline().addLast(new MyOutboundHandler());\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\tpublic void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;Exception caught! Cause is : &quot; + cause);\r\n    \t\t\t\t\t\t\tctx.channel().close();\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\tpublic void channelUnregistered(ChannelHandlerContext ctx) {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;IS CHANNEL OPEN? Y/N&quot; + ctx.channel().isOpen());\r\n    \t\t\t\t\t\t\tctx.channel().close();\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t});\r\n    \r\n    \t\t\tfinal RadiusEndpoint authEndpoint = new RadiusEndpoint(new InetSocketAddress(host, 1812), shared);\r\n    \t\t\tfinal RadiusEndpoint acctEndpoint = new RadiusEndpoint(new InetSocketAddress(host, 1813), shared);\r\n    \r\n    \t\t\t// 1. Send Access-Request\r\n    \t\t\tfinal AccessRequestPap ar = (AccessRequestPap)\r\n    \t\t\t\t\t((AccessRequest) RadiusRequest.create(dictionary, ACCESS_REQUEST, (byte) 1, null, Collections.emptyList()))\r\n    \t\t\t\t\t.withPapPassword(pass)\r\n    \t\t\t\t\t.addAttribute(&quot;User-Name&quot;, user)\r\n    \t\t\t\t\t.addAttribute(&quot;NAS-Identifier&quot;, &quot;this.is.my.nas-identifier&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;NAS-IP-Address&quot;, &quot;10.20.30.40&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;Service-Type&quot;, &quot;Login-User&quot;);\r\n    \r\n    \t\t\tSystem.out.println(&quot;Packet before it is sent\\n&quot; + ar + &quot;\\n&quot;);\r\n    \t\t\tRadiusResponse response = rc.communicate(ar, authEndpoint).syncUninterruptibly().getNow();\r\n    \t\t\tSystem.out.println(&quot;Packet after it was sent\\n&quot; + ar + &quot;\\n&quot;);\r\n    \t\t\tSystem.out.println(&quot;Response\\n&quot; + response + &quot;\\n&quot;);\r\n    \r\n    \t\t\t// 2. Send Accounting-Request\r\n    \t\t\tfinal AccountingRequest acc = (AccountingRequest) RadiusRequest.create(dictionary, ACCOUNTING_REQUEST, (byte) 2, null, new ArrayList&lt;&gt;())\r\n    \t\t\t\t\t.addAttribute(&quot;User-Name&quot;, &quot;username&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;Acct-Status-Type&quot;, &quot;1&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;Acct-Session-Id&quot;, &quot;1234567890&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;NAS-Identifier&quot;, &quot;this.is.my.nas-identifier&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;NAS-Port&quot;, &quot;0&quot;);\r\n    \r\n    \t\t\tSystem.out.println(acc + &quot;\\n&quot;);\r\n    \t\t\tresponse = rc.communicate(acc, acctEndpoint).syncUninterruptibly().getNow();\r\n    \t\t\tSystem.out.println(&quot;Response: &quot; + response);\r\n    \t\t\t\r\n    \t\t} catch(Exception e) {\r\n    \t\t\tSystem.out.println(String.format(&quot;Failed executing RadiusClient. Cause : %s&quot;, e));\r\n    \t\t} finally {\r\n    \t\t\ttry {\r\n    \t\t\t\trc.close();\r\n    \t\t\t\tchannelHolder.getValue().disconnect();\r\n    \t\t\t\tSystem.out.println(&quot;Disconnected!&quot;);\r\n    \t\t\t\tChannelFuture cf = channelHolder.getValue().close();\r\n    \t\t\t\tcf.syncUninterruptibly();\r\n    \t\t\t\t//cf.awaitUninterruptibly();\r\n    \t\t\t\tSystem.out.println(&quot;Is cancelable y/n &quot; + cf.isCancellable());\r\n    \t\t\t\tSystem.out.println(&quot;Is cancelled t/f &quot; + cf.cancel(true));\r\n    \t\t\t\teventLoopGroup.shutdownGracefully().sync();\r\n    \t\t\t\tSystem.out.println(&quot;Is eventLoopGroup terminated? t/f : &quot; + eventLoopGroup.awaitTermination(1, TimeUnit.SECONDS));\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\tSystem.out.println(&quot;Graceful shutdown failed!&quot; + e);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nPOM:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;dcm.poc&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;tinyradius-netty-poc&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${revision}&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \t&lt;name&gt;dcm-poc-tinyradius-netty-poc&lt;/name&gt;\r\n    \t&lt;description&gt;TinyRadius-Netty POC&lt;/description&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;maven.compiler.version&gt;3.11.0&lt;/maven.compiler.version&gt;\r\n    \t\t&lt;maven.assembly.version&gt;3.6.0&lt;/maven.assembly.version&gt;\r\n    \t\t&lt;tinyradius.netty.version&gt;1.5.12&lt;/tinyradius.netty.version&gt;\r\n    \t\t&lt;netty.codec.version&gt;4.1.87.Final&lt;/netty.codec.version&gt;\r\n    \t\t&lt;jakarta.xml.bind-api.version&gt;4.0.0&lt;/jakarta.xml.bind-api.version&gt;\r\n    \t\t&lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.globalreachtech&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tinyradius-netty&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${tinyradius.netty.version}&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;netty-all&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${netty.codec.version}&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jakarta.xml.bind-api.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${maven.compiler.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;release&gt;${java.version}&lt;/release&gt;\r\n    \t\t\t\t\t&lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${maven.assembly.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;archive&gt;\r\n    \t\t\t\t\t\t\t\t&lt;manifest&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;mainClass&gt;\r\n    \t\t\t\t\t\t\t\t\t\tcom.dcm.tinyradiusnetty.poc.client.TestRadiusClient\r\n    \t\t\t\t\t\t\t\t\t&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/manifest&gt;\r\n    \t\t\t\t\t\t\t\t&lt;manifestEntries&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/manifestEntries&gt;\r\n    \t\t\t\t\t\t\t&lt;/archive&gt;\r\n    \t\t\t\t\t\t\t&lt;descriptorRefs&gt;\r\n    \t\t\t\t\t\t\t\t&lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n    \t\t\t\t\t\t\t&lt;/descriptorRefs&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://github.com/globalreachtech/tinyradius-netty\r\n  [2]: https://github.com/globalreachtech/tinyradius-netty/blob/master/src/test/java/org/tinyradius/io/TestClient.java\r\n  [3]: https://stackoverflow.com/a/56631722/5200064\r\n  [4]: https://netty.io/4.0/api/io/netty/channel/AbstractChannel.html#close--\r\n  [5]: https://netty.io/4.0/api/io/netty/channel/ChannelFuture.html#syncUninterruptibly--\r\n  [6]: https://netty.io/4.0/api/io/netty/channel/ChannelFuture.html#awaitUninterruptibly--\r\n  [7]: https://netty.io/4.0/api/io/netty/util/concurrent/Future.html#cancel-boolean-\r\n  [8]: https://netty.io/4.0/api/io/netty/util/concurrent/Future.html#isCancellable--\r\n  [9]: https://stackoverflow.com/a/48635253/5200064","title":"TinyRadius Netty RadiusClient test program does not shutdown &amp; return despite closing the NioDatagramChannel &amp; shutting down NioEventLoopGroup","body":"<p>This is regarding the use of <a href=\"https://github.com/globalreachtech/tinyradius-netty\" rel=\"nofollow noreferrer\">tinyradius-netty</a> &amp; the mechanism to properly close the channel &amp; shutdown (as part of app shutdown).</p>\n<p><a href=\"https://github.com/globalreachtech/tinyradius-netty/blob/master/src/test/java/org/tinyradius/io/TestClient.java\" rel=\"nofollow noreferrer\">Here</a> is the sample code on the <a href=\"https://github.com/globalreachtech/tinyradius-netty\" rel=\"nofollow noreferrer\">tinyradius-netty</a> public git repo.</p>\n<p>If I try to test it as-is I see that the program does NOT finish &amp; return after executing the main method. When I look up for active socket use (with <code>netstat -anpe</code>) I see that its still connected.</p>\n<pre><code>root@Ubuntu1:~/TINYRADIUS-NETTY# ps -aef | grep java\nroot     13701 34395  0 Aug07 pts/17   00:02:19 java -jar target/tinyradius-netty-poc-1.0-jar-with-dependencies.jar 10.20.30.40 somesecret someusername somepwd\n...\n...\n  \nroot@Ubuntu1:~/TINYRADIUS-NETTY# netstat -anpe | grep java\n...\n...\nunix  2      [ ]         STREAM     CONNECTED     7314176  13701/java          \n...\n...\n</code></pre>\n<p>Now I know the above sample program is a little incomplete in the sense that it doesn't properly shutdown the <code>NioEventLoopGroup</code> or (I suspect) properly close the <code>NioDatagramChannel</code> (based on <a href=\"https://stackoverflow.com/a/56631722/5200064\">this</a> SO answer).</p>\n<p>But even if I do the above two I still see that the program does NOT finish &amp; return. Specifically even after I invoke <a href=\"https://netty.io/4.0/api/io/netty/channel/AbstractChannel.html#close--\" rel=\"nofollow noreferrer\">NioDatagramChannel#close()</a> &amp; then invoke <a href=\"https://netty.io/4.0/api/io/netty/channel/ChannelFuture.html#syncUninterruptibly--\" rel=\"nofollow noreferrer\">ChannelFuture#syncUninterruptibly()</a> or <a href=\"https://netty.io/4.0/api/io/netty/channel/ChannelFuture.html#awaitUninterruptibly--\" rel=\"nofollow noreferrer\">ChannelFuture#awaitUninterruptibly()</a> &amp; they both return, I still see the same behavior (program doesn't return &amp; UNIX domain socket actively connected).</p>\n<p>I also tried invoking <a href=\"https://netty.io/4.0/api/io/netty/util/concurrent/Future.html#cancel-boolean-\" rel=\"nofollow noreferrer\">ChannelFuture#cancel(true)</a> but it always returns <code>false</code> (<a href=\"https://netty.io/4.0/api/io/netty/util/concurrent/Future.html#isCancellable--\" rel=\"nofollow noreferrer\">ChannelFuture#isCancellable()</a> returns true).</p>\n<p>Based on <a href=\"https://stackoverflow.com/a/48635253/5200064\">this</a> SO answer I also verified that I am not using the affected version &amp; instead using the version <code>4.1.87.Final</code>.</p>\n<p>Can someone help throw some pointers on what I am missing here?</p>\n<p>Below is my POM &amp; code.</p>\n<p>Code:</p>\n<pre><code>import io.netty.bootstrap.Bootstrap;\nimport io.netty.channel.ChannelFuture;\nimport io.netty.channel.ChannelInitializer;\nimport io.netty.channel.ChannelHandlerContext;\nimport io.netty.channel.ChannelPromise;\nimport io.netty.channel.ChannelDuplexHandler;\nimport io.netty.channel.ChannelOutboundHandler;\nimport io.netty.channel.ChannelOutboundHandlerAdapter;\nimport io.netty.channel.nio.NioEventLoopGroup;\nimport io.netty.channel.socket.DatagramChannel;\nimport io.netty.channel.socket.nio.NioDatagramChannel;\nimport io.netty.util.HashedWheelTimer;\nimport io.netty.util.Timer;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport org.tinyradius.core.RadiusPacketException;\nimport org.tinyradius.core.dictionary.DefaultDictionary;\nimport org.tinyradius.core.dictionary.Dictionary;\nimport org.tinyradius.core.packet.request.AccessRequest;\nimport org.tinyradius.core.packet.request.AccessRequestPap;\nimport org.tinyradius.core.packet.request.AccountingRequest;\nimport org.tinyradius.core.packet.request.RadiusRequest;\nimport org.tinyradius.core.packet.response.RadiusResponse;\nimport org.tinyradius.io.RadiusEndpoint;\nimport org.tinyradius.io.client.RadiusClient;\nimport org.tinyradius.io.client.handler.BlacklistHandler;\nimport org.tinyradius.io.client.handler.ClientDatagramCodec;\nimport org.tinyradius.io.client.handler.PromiseAdapter;\nimport org.tinyradius.io.client.timeout.FixedTimeoutHandler;\n\nimport java.net.InetSocketAddress;\nimport java.util.*;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.concurrent.TimeUnit;\n\nimport static org.tinyradius.core.packet.PacketType.ACCESS_REQUEST;\nimport static org.tinyradius.core.packet.PacketType.ACCOUNTING_REQUEST;\n\n/**\n * @author lmk\n *\n */\npublic final class TestRadiusClient {\n\n    private static final Logger logger = LogManager.getLogger();\n\n\n    /**\n     * Radius command line client.\n     *  \n     * @param args [host, sharedSecret, username, password] \n     */\n    public static void main(String... args) {\n        \n        if (args.length != 4) {\n            System.out.println(&quot;Usage: TestClient [hostName] [sharedSecret] [userName] [password]&quot;);\n            return;\n        }\n        \n        final NioEventLoopGroup eventLoopGroup = new NioEventLoopGroup(4);\n        RadiusClient rc = null;\n        // Below is just a temporary hack to get a reference to the channel to see if i can close it to verify..\n        final Map.Entry&lt;String, DatagramChannel&gt; channelHolder = new AbstractMap.SimpleEntry&lt;&gt;(NioDatagramChannel.class.getName(), null);\n        \n        try {\n            final String host = args[0];\n            final String shared = args[1];\n            final String user = args[2];\n            final String pass = args[3];\n\n            final Dictionary dictionary = DefaultDictionary.INSTANCE;\n            final Timer timer = new HashedWheelTimer();\n\n            final Bootstrap bootstrap = new Bootstrap().group(eventLoopGroup).channel(NioDatagramChannel.class);\n             class MyOutboundHandler extends ChannelOutboundHandlerAdapter {\n                  @Override\n                 public void close(ChannelHandlerContext ctx, ChannelPromise promise) {\n                     System.out.println(&quot;Closing from MyOutboundHandler..&quot;);\n                     ctx.close(promise);\n                 }\n             }\n            \n            rc = new RadiusClient(\n                    bootstrap, new InetSocketAddress(0), new FixedTimeoutHandler(timer), new ChannelInitializer&lt;DatagramChannel&gt;() {\n                        @Override\n                        protected void initChannel(DatagramChannel ch) {\n                            channelHolder.setValue(ch);\n                            ch.pipeline().addLast(\n                                    new ClientDatagramCodec(dictionary),\n                                    new PromiseAdapter(),\n                                    new BlacklistHandler(60_000, 3));\n                            ch.pipeline().addLast(new MyOutboundHandler());\n                        }\n                        \n                        @Override\n                        public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\n                            System.out.println(&quot;Exception caught! Cause is : &quot; + cause);\n                            ctx.channel().close();\n                        }\n                        \n                        @Override\n                        public void channelUnregistered(ChannelHandlerContext ctx) {\n                            System.out.println(&quot;IS CHANNEL OPEN? Y/N&quot; + ctx.channel().isOpen());\n                            ctx.channel().close();\n                        }\n                        \n                    });\n\n            final RadiusEndpoint authEndpoint = new RadiusEndpoint(new InetSocketAddress(host, 1812), shared);\n            final RadiusEndpoint acctEndpoint = new RadiusEndpoint(new InetSocketAddress(host, 1813), shared);\n\n            // 1. Send Access-Request\n            final AccessRequestPap ar = (AccessRequestPap)\n                    ((AccessRequest) RadiusRequest.create(dictionary, ACCESS_REQUEST, (byte) 1, null, Collections.emptyList()))\n                    .withPapPassword(pass)\n                    .addAttribute(&quot;User-Name&quot;, user)\n                    .addAttribute(&quot;NAS-Identifier&quot;, &quot;this.is.my.nas-identifier&quot;)\n                    .addAttribute(&quot;NAS-IP-Address&quot;, &quot;10.20.30.40&quot;)\n                    .addAttribute(&quot;Service-Type&quot;, &quot;Login-User&quot;);\n\n            System.out.println(&quot;Packet before it is sent\\n&quot; + ar + &quot;\\n&quot;);\n            RadiusResponse response = rc.communicate(ar, authEndpoint).syncUninterruptibly().getNow();\n            System.out.println(&quot;Packet after it was sent\\n&quot; + ar + &quot;\\n&quot;);\n            System.out.println(&quot;Response\\n&quot; + response + &quot;\\n&quot;);\n\n            // 2. Send Accounting-Request\n            final AccountingRequest acc = (AccountingRequest) RadiusRequest.create(dictionary, ACCOUNTING_REQUEST, (byte) 2, null, new ArrayList&lt;&gt;())\n                    .addAttribute(&quot;User-Name&quot;, &quot;username&quot;)\n                    .addAttribute(&quot;Acct-Status-Type&quot;, &quot;1&quot;)\n                    .addAttribute(&quot;Acct-Session-Id&quot;, &quot;1234567890&quot;)\n                    .addAttribute(&quot;NAS-Identifier&quot;, &quot;this.is.my.nas-identifier&quot;)\n                    .addAttribute(&quot;NAS-Port&quot;, &quot;0&quot;);\n\n            System.out.println(acc + &quot;\\n&quot;);\n            response = rc.communicate(acc, acctEndpoint).syncUninterruptibly().getNow();\n            System.out.println(&quot;Response: &quot; + response);\n            \n        } catch(Exception e) {\n            System.out.println(String.format(&quot;Failed executing RadiusClient. Cause : %s&quot;, e));\n        } finally {\n            try {\n                rc.close();\n                channelHolder.getValue().disconnect();\n                System.out.println(&quot;Disconnected!&quot;);\n                ChannelFuture cf = channelHolder.getValue().close();\n                cf.syncUninterruptibly();\n                //cf.awaitUninterruptibly();\n                System.out.println(&quot;Is cancelable y/n &quot; + cf.isCancellable());\n                System.out.println(&quot;Is cancelled t/f &quot; + cf.cancel(true));\n                eventLoopGroup.shutdownGracefully().sync();\n                System.out.println(&quot;Is eventLoopGroup terminated? t/f : &quot; + eventLoopGroup.awaitTermination(1, TimeUnit.SECONDS));\n            } catch (Exception e) {\n                System.out.println(&quot;Graceful shutdown failed!&quot; + e);\n            }\n        }\n    }\n}\n</code></pre>\n<p>POM:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;dcm.poc&lt;/groupId&gt;\n    &lt;artifactId&gt;tinyradius-netty-poc&lt;/artifactId&gt;\n    &lt;version&gt;${revision}&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;dcm-poc-tinyradius-netty-poc&lt;/name&gt;\n    &lt;description&gt;TinyRadius-Netty POC&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.version&gt;3.11.0&lt;/maven.compiler.version&gt;\n        &lt;maven.assembly.version&gt;3.6.0&lt;/maven.assembly.version&gt;\n        &lt;tinyradius.netty.version&gt;1.5.12&lt;/tinyradius.netty.version&gt;\n        &lt;netty.codec.version&gt;4.1.87.Final&lt;/netty.codec.version&gt;\n        &lt;jakarta.xml.bind-api.version&gt;4.0.0&lt;/jakarta.xml.bind-api.version&gt;\n        &lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.globalreachtech&lt;/groupId&gt;\n            &lt;artifactId&gt;tinyradius-netty&lt;/artifactId&gt;\n            &lt;version&gt;${tinyradius.netty.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n                    &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.netty&lt;/groupId&gt;\n            &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\n            &lt;version&gt;${netty.codec.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n                    &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;${jakarta.xml.bind-api.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.compiler.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;${java.version}&lt;/release&gt;\n                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.assembly.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;archive&gt;\n                                &lt;manifest&gt;\n                                    &lt;mainClass&gt;\n                                        com.dcm.tinyradiusnetty.poc.client.TestRadiusClient\n                                    &lt;/mainClass&gt;\n                                &lt;/manifest&gt;\n                                &lt;manifestEntries&gt;\n                                    &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\n                                &lt;/manifestEntries&gt;\n                            &lt;/archive&gt;\n                            &lt;descriptorRefs&gt;\n                                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                            &lt;/descriptorRefs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","networking","protocols","netty","channel"],"answers":[{"comments":[{"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"score":0,"creation_date":1326747153,"post_id":8884072,"comment_id":11109476,"body_markdown":"My thinking was a handler for the version check, a handler for the authentication, a handler for the encryption, and a handler for the actual business logic.","body":"My thinking was a handler for the version check, a handler for the authentication, a handler for the encryption, and a handler for the actual business logic."},{"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"score":0,"creation_date":1326747192,"post_id":8884072,"comment_id":11109485,"body_markdown":"My big concern is that if the client and server are different versions and you&#39;re serializing pojo&#39;s, then it will fail on deserialization.","body":"My big concern is that if the client and server are different versions and you&#39;re serializing pojo&#39;s, then it will fail on deserialization."},{"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"score":0,"creation_date":1327169439,"post_id":8884072,"comment_id":11212636,"body_markdown":"All kinds. Nothing is really working. There&#39;s some conceptual issues rather than simply a coding issue.","body":"All kinds. Nothing is really working. There&#39;s some conceptual issues rather than simply a coding issue."}],"tags":[],"owner":{"account_id":40784,"reputation":7745,"user_id":118268,"accept_rate":84,"display_name":"KevinS"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1326735927,"creation_date":1326735927,"answer_id":8884072,"question_id":8883413,"body_markdown":"You didn&#39;t mention what the error was that you are seeing.\r\n\r\nIn any case, I would not recommend using a separate channel handler for doing a version check. Mainly because the version check should only need to happen once, when the connection is first established. Also because I think the channel handlers are best left dealing with transport layer concerns e.g. converting bytes into pojos. ","title":"Netty - How to test for client/server version numbers","body":"<p>You didn't mention what the error was that you are seeing.</p>\n\n<p>In any case, I would not recommend using a separate channel handler for doing a version check. Mainly because the version check should only need to happen once, when the connection is first established. Also because I think the channel handlers are best left dealing with transport layer concerns e.g. converting bytes into pojos. </p>\n"},{"comments":[{"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"score":0,"creation_date":1327166967,"post_id":8950257,"comment_id":11212176,"body_markdown":"I really appreciate your answer, and you&#39;re almost there. I&#39;m just trying to do something slightly different. Basically I want the client to send it&#39;s version to the server, which will then send back an exception or fail. So the server has to ingest the version number from the client, and then continue reading from the channel...","body":"I really appreciate your answer, and you&#39;re almost there. I&#39;m just trying to do something slightly different. Basically I want the client to send it&#39;s version to the server, which will then send back an exception or fail. So the server has to ingest the version number from the client, and then continue reading from the channel..."},{"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"score":0,"creation_date":1327167894,"post_id":8950257,"comment_id":11212361,"body_markdown":"Also, can you get the client to send a second message right after, say a String that says &quot;hello world&quot; that the server is able to ingest. If you did, I would give you double the bounty points if I can!!","body":"Also, can you get the client to send a second message right after, say a String that says &quot;hello world&quot; that the server is able to ingest. If you did, I would give you double the bounty points if I can!!"},{"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"score":0,"creation_date":1327169986,"post_id":8950257,"comment_id":11212752,"body_markdown":"I just figured it all out, there were a few conceptual errors. So there&#39;s no need to go through the effort of an example. However I do want to thank you a lot for the time. It wasn&#39;t what I was looking for, but what you offered was definitely the type of help that would&#39;ve been great had it been on target :)","body":"I just figured it all out, there were a few conceptual errors. So there&#39;s no need to go through the effort of an example. However I do want to thank you a lot for the time. It wasn&#39;t what I was looking for, but what you offered was definitely the type of help that would&#39;ve been great had it been on target :)"}],"tags":[],"owner":{"account_id":299346,"reputation":4031,"user_id":605890,"accept_rate":39,"display_name":"Dennis"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1327114115,"creation_date":1327114115,"answer_id":8950257,"question_id":8883413,"body_markdown":"I created a simple example: https://github.com/boldt/netty-examples/\r\n\r\nIt returns the version number when a new connection is established. It is done in a separate handler which will be removed from the pipeline after the version is written on the channel. Afterwards it is the ECHO example from the netty tutorial.\r\n\r\nA `telnet localhost 1234` to the server shows the version immediately.\r\n\r\nLike this you could add an authentication-handler to the pipeline behind the version-handler.","title":"Netty - How to test for client/server version numbers","body":"<p>I created a simple example: <a href=\"https://github.com/boldt/netty-examples/\" rel=\"nofollow\">https://github.com/boldt/netty-examples/</a></p>\n\n<p>It returns the version number when a new connection is established. It is done in a separate handler which will be removed from the pipeline after the version is written on the channel. Afterwards it is the ECHO example from the netty tutorial.</p>\n\n<p>A <code>telnet localhost 1234</code> to the server shows the version immediately.</p>\n\n<p>Like this you could add an authentication-handler to the pipeline behind the version-handler.</p>\n"},{"tags":[],"owner":{"account_id":1075943,"reputation":23262,"user_id":1074097,"display_name":"Norman Maurer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1327164285,"creation_date":1327164285,"answer_id":8954722,"question_id":8883413,"body_markdown":"I think what you want todo can be archived easily by adding some custom handlers. So for the version check you could add a handler that override channelConnected(....) and do rhe check there. For auth just add another handler after the version check which override the messageRecieved(....) method. After the auth is complete you can remove the handler frm the pipeline and add it back once you need it again.\r\n\r\nThe BusinessLogic Handler should sit in the pipeline as the last one. Just be aware that any of your handlers does some blocking operation you should think about adding a ExecutionHandler in front of it to mKe sure hat the ioworker thread will nit get blocked and so make the netty server unresponsible.","title":"Netty - How to test for client/server version numbers","body":"<p>I think what you want todo can be archived easily by adding some custom handlers. So for the version check you could add a handler that override channelConnected(....) and do rhe check there. For auth just add another handler after the version check which override the messageRecieved(....) method. After the auth is complete you can remove the handler frm the pipeline and add it back once you need it again.</p>\n\n<p>The BusinessLogic Handler should sit in the pipeline as the last one. Just be aware that any of your handlers does some blocking operation you should think about adding a ExecutionHandler in front of it to mKe sure hat the ioworker thread will nit get blocked and so make the netty server unresponsible.</p>\n"},{"tags":[],"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691527813,"creation_date":1327170726,"answer_id":8955543,"question_id":8883413,"body_markdown":"I found the solution!!!\r\n\r\nThere were a number of issues. \r\n\r\n**On VersionClientHandler, the new code is:**\r\n\r\n    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e)\r\n    {\r\n    \tString version = &quot;v123.45a&quot;;\r\n    \r\n        ChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_STRING_LENGTH);\r\n        versionBuffer.writeBytes(version.getBytes());\r\n    \te.getChannel().write(version);\r\n    }\r\n\r\nNotice the last line, `e.getChannel().write(version);` instead of `Channels.write(ctx, e.getFuture(), versionBuffer);` I&#39;m not sure of the why. *In fact, I&#39;m about to start looking into why I have the ChannelBuffers code there because it doesn&#39;t seem to do anything...*\r\n\r\n**On VersionServerHandler.java I now have:**\r\n\r\n    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \r\n    {\r\n    \tString versionCheck = (String)e.getMessage();\r\n    \tSystem.out.println(&quot;VersionServerHandler - &quot; + versionCheck);\r\n    \tctx.getPipeline().remove(VersionServerHandler.class);\r\n    }\r\n\r\nNotice I don&#39;t read through the buffer anymore, I just do `e.getMessage()` and cast to the correct type of object. Above this I added `ctx.getPipeline().remove(VersionServerHandler.class);` which is there to remove that handler from any further processing. It&#39;s no longer required after the initial connection. Thanks to Dennis for that tip.\r\n\r\n**Conclusion**\r\n\r\nThe rest is much as I expected. the key is that I wasn&#39;t correctly understanding how to read the buffers and pass the info around. And the error messages and examples weren&#39;t quite clear. As soon as you add the POJO channels from Netty to your pipeline, you need to start dealing only in objects, for all handlers. I missed that one. The concepts were right, it&#39;s just how I tried to read the data from the channels that was wrong. \r\n\r\nThe other big tip, was to remove the handlers from the pipeline if you don&#39;t need them after the initial connection. I assume the same will be true for an authentication handler. It would be great to have confirmation here, but I&#39;ll have to figure that one out later.\r\n\r\n","title":"Netty - How to test for client/server version numbers","body":"<p>I found the solution!!!</p>\n<p>There were a number of issues.</p>\n<p><strong>On VersionClientHandler, the new code is:</strong></p>\n<pre><code>public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e)\n{\n    String version = &quot;v123.45a&quot;;\n\n    ChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_STRING_LENGTH);\n    versionBuffer.writeBytes(version.getBytes());\n    e.getChannel().write(version);\n}\n</code></pre>\n<p>Notice the last line, <code>e.getChannel().write(version);</code> instead of <code>Channels.write(ctx, e.getFuture(), versionBuffer);</code> I'm not sure of the why. <em>In fact, I'm about to start looking into why I have the ChannelBuffers code there because it doesn't seem to do anything...</em></p>\n<p><strong>On VersionServerHandler.java I now have:</strong></p>\n<pre><code>public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \n{\n    String versionCheck = (String)e.getMessage();\n    System.out.println(&quot;VersionServerHandler - &quot; + versionCheck);\n    ctx.getPipeline().remove(VersionServerHandler.class);\n}\n</code></pre>\n<p>Notice I don't read through the buffer anymore, I just do <code>e.getMessage()</code> and cast to the correct type of object. Above this I added <code>ctx.getPipeline().remove(VersionServerHandler.class);</code> which is there to remove that handler from any further processing. It's no longer required after the initial connection. Thanks to Dennis for that tip.</p>\n<p><strong>Conclusion</strong></p>\n<p>The rest is much as I expected. the key is that I wasn't correctly understanding how to read the buffers and pass the info around. And the error messages and examples weren't quite clear. As soon as you add the POJO channels from Netty to your pipeline, you need to start dealing only in objects, for all handlers. I missed that one. The concepts were right, it's just how I tried to read the data from the channels that was wrong.</p>\n<p>The other big tip, was to remove the handlers from the pipeline if you don't need them after the initial connection. I assume the same will be true for an authentication handler. It would be great to have confirmation here, but I'll have to figure that one out later.</p>\n"}],"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4366,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":8955543,"answer_count":4,"score":1,"last_activity_date":1691527813,"creation_date":1326732924,"question_id":8883413,"body_markdown":"As part of my protocol, I&#39;d like the client to send its version number when a new connection is established. I&#39;d like this to be done in a separate handler in the pipeline, so please bear with me as this may be a fairly basic question but I&#39;m not sure how to do it. The other thing is that I&#39;d like to then be able to send POJO&#39;s back and forth through the connection (pipeline). Also I&#39;d love to add an Authentication handler. Anyways, right now I&#39;m getting some kind of error and I&#39;m pretty sure it&#39;s because the version check is not being properly digested from the pipeline.\r\n\r\nBasically the code I have below is setup to send &quot;Hello World&quot; which the server prints out after the version has been checked when the connection has been established. At least in theory, in reality this isn&#39;t quite working ;)\r\n\r\nCurrently I have:\r\n\r\nClient.java\r\n\r\n    public static void main(String[] args)\r\n    {\r\n    \t...\r\n    \t\r\n        // Set up the pipeline factory.\r\n        bootstrap.setPipelineFactory(new ChannelPipelineFactory() \r\n        {\r\n            @Override\r\n    \t\tpublic ChannelPipeline getPipeline() throws Exception \r\n            {\r\n                return Channels.pipeline(\r\n                        new ObjectEncoder(),\r\n                        new ObjectDecoder(),\r\n                        new VersionClientHandler(),\r\n                        new BusinessLogicClientHandler());\r\n            }\r\n        });\t\t\r\n    \r\n    \t...\r\n    \r\n    \t// The idea is that it will all be request and response. Much like http but with pojo&#39;s. \r\n    \tChannelFuture lastWriteFuture = channel.write(&quot;Hello world&quot;.getBytes());\r\n    \t\r\n    \tif (lastWriteFuture != null) \r\n        {\r\n           \tSystem.out.println(&quot;waiting for message to be sent&quot;);\r\n               lastWriteFuture.awaitUninterruptibly();\r\n    \t}\r\n    \r\n    \t...\r\n    }\r\n\r\nVersionClientHandler.java\r\n\r\n    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e)\r\n    {\r\n    \tChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_STRING_LENGTH);\r\n    \tversionBuffer.writeBytes(&quot;v123.45a&quot;.getBytes());\r\n    \t// If I understand correctly, the next line says use the rest of the stream to do what you need to the next Handler in the pipeline?\r\n    \tChannels.write(ctx, e.getFuture(), versionBuffer);  \r\n    }\r\n\r\nBusinessLogicClientHandler.java\r\n\r\n    Not really doing anything at this point. Should it?\r\n\r\n\r\nServer.java\r\n\r\n    public static void main(String[] args)\r\n    {\r\n    \t...\r\n    \t\r\n    \tpublic ChannelPipeline getPipeline() throws Exception \r\n        {\r\n        \treturn Channels.pipeline(\r\n            \t\tnew ObjectEncoder(),\r\n                    new ObjectDecoder(),\r\n                    new VersionServerHandler(),\r\n                    new BusinessLogicServerHandler());\r\n    \t}\r\n    \r\n    \t...\r\n    }\r\n\r\nVersionServerHandler.java\r\n\r\n    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \r\n    {\r\n    \tChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_NUMBER_MAX_SIZE);\r\n    \tSystem.out.println(&quot;isReadable - messageReceived: &quot; + versionBuffer.readable()); // returns false???\r\n    \t// Basically I want to read it and confirm the client and server versions match.\r\n    \t// And if the match fails either send a message or throw an exception\r\n    \t// How do I also pass on the stream to the next Handler? \r\n    }\r\n\r\n\r\nBusinessLogicServerHandler.java\r\n\r\n    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \r\n    {\r\n    \te.getMessage();\r\n        byte[] message = (byte[])e.getMessage(); // &quot;Hello World&quot; in byte[] from Client.java\r\n    }\r\n\r\n\r\nSo basically what I want is that the version number is passed and validated when the channel is connected as part of the communication protocol. All done automatically behind the scenes. Similarly I&#39;d love to pass the authentication mechanism this way. \r\n\r\nI did see some code which looked somewhat like what I wanted to do with the Secure Chat example, but I couldn&#39;t really figure it out. Any help on how to setup this code would be really appreciated. I know I could do it all in one massive handler, but that&#39;s the point of the pipeline, to break it up into units that make logical sense. ","title":"Netty - How to test for client/server version numbers","body":"<p>As part of my protocol, I'd like the client to send its version number when a new connection is established. I'd like this to be done in a separate handler in the pipeline, so please bear with me as this may be a fairly basic question but I'm not sure how to do it. The other thing is that I'd like to then be able to send POJO's back and forth through the connection (pipeline). Also I'd love to add an Authentication handler. Anyways, right now I'm getting some kind of error and I'm pretty sure it's because the version check is not being properly digested from the pipeline.</p>\n\n<p>Basically the code I have below is setup to send \"Hello World\" which the server prints out after the version has been checked when the connection has been established. At least in theory, in reality this isn't quite working ;)</p>\n\n<p>Currently I have:</p>\n\n<p>Client.java</p>\n\n<pre><code>public static void main(String[] args)\n{\n    ...\n\n    // Set up the pipeline factory.\n    bootstrap.setPipelineFactory(new ChannelPipelineFactory() \n    {\n        @Override\n        public ChannelPipeline getPipeline() throws Exception \n        {\n            return Channels.pipeline(\n                    new ObjectEncoder(),\n                    new ObjectDecoder(),\n                    new VersionClientHandler(),\n                    new BusinessLogicClientHandler());\n        }\n    });     \n\n    ...\n\n    // The idea is that it will all be request and response. Much like http but with pojo's. \n    ChannelFuture lastWriteFuture = channel.write(\"Hello world\".getBytes());\n\n    if (lastWriteFuture != null) \n    {\n        System.out.println(\"waiting for message to be sent\");\n           lastWriteFuture.awaitUninterruptibly();\n    }\n\n    ...\n}\n</code></pre>\n\n<p>VersionClientHandler.java</p>\n\n<pre><code>public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e)\n{\n    ChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_STRING_LENGTH);\n    versionBuffer.writeBytes(\"v123.45a\".getBytes());\n    // If I understand correctly, the next line says use the rest of the stream to do what you need to the next Handler in the pipeline?\n    Channels.write(ctx, e.getFuture(), versionBuffer);  \n}\n</code></pre>\n\n<p>BusinessLogicClientHandler.java</p>\n\n<pre><code>Not really doing anything at this point. Should it?\n</code></pre>\n\n<p>Server.java</p>\n\n<pre><code>public static void main(String[] args)\n{\n    ...\n\n    public ChannelPipeline getPipeline() throws Exception \n    {\n        return Channels.pipeline(\n                new ObjectEncoder(),\n                new ObjectDecoder(),\n                new VersionServerHandler(),\n                new BusinessLogicServerHandler());\n    }\n\n    ...\n}\n</code></pre>\n\n<p>VersionServerHandler.java</p>\n\n<pre><code>public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \n{\n    ChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_NUMBER_MAX_SIZE);\n    System.out.println(\"isReadable - messageReceived: \" + versionBuffer.readable()); // returns false???\n    // Basically I want to read it and confirm the client and server versions match.\n    // And if the match fails either send a message or throw an exception\n    // How do I also pass on the stream to the next Handler? \n}\n</code></pre>\n\n<p>BusinessLogicServerHandler.java</p>\n\n<pre><code>public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \n{\n    e.getMessage();\n    byte[] message = (byte[])e.getMessage(); // \"Hello World\" in byte[] from Client.java\n}\n</code></pre>\n\n<p>So basically what I want is that the version number is passed and validated when the channel is connected as part of the communication protocol. All done automatically behind the scenes. Similarly I'd love to pass the authentication mechanism this way. </p>\n\n<p>I did see some code which looked somewhat like what I wanted to do with the Secure Chat example, but I couldn't really figure it out. Any help on how to setup this code would be really appreciated. I know I could do it all in one massive handler, but that's the point of the pipeline, to break it up into units that make logical sense. </p>\n"},{"tags":["java","spring-boot","unit-testing","junit","assertj"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691502056,"post_id":76860117,"comment_id":135498212,"body_markdown":"Think about it: Does the test you&#39;re proposing really add value? Or is it just to satisfy code coverage? A 100% coverage number is rarely a good target by itself.","body":"Think about it: Does the test you&#39;re proposing really add value? Or is it just to satisfy code coverage? A 100% coverage number is rarely a good target by itself."},{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":0,"creation_date":1691502228,"post_id":76860117,"comment_id":135498254,"body_markdown":"Why are you mocking the *System Under Test* itself?","body":"Why are you mocking the <i>System Under Test</i> itself?"},{"owner":{"account_id":4700927,"reputation":1844,"user_id":3804495,"accept_rate":46,"display_name":"heisenberg"},"score":0,"creation_date":1691502336,"post_id":76860117,"comment_id":135498281,"body_markdown":"Only reason is  because I&#39;m trying to hit the code coverage set in Gradle build `javaCodeCoverage` task","body":"Only reason is  because I&#39;m trying to hit the code coverage set in Gradle build <code>javaCodeCoverage</code> task"},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":1,"creation_date":1691502358,"post_id":76860117,"comment_id":135498291,"body_markdown":"The core problem is that having DataUtil get as a static method makes it hard to mock. And yes you&#39;re mocking the wrong things. You&#39;re using spring boot, can&#39;t you use some kind of repository to fetch data?","body":"The core problem is that having DataUtil get as a static method makes it hard to mock. And yes you&#39;re mocking the wrong things. You&#39;re using spring boot, can&#39;t you use some kind of repository to fetch data?"}],"answers":[{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691502932,"creation_date":1691502932,"answer_id":76860239,"question_id":76860117,"body_markdown":"Like people stated in the comments, you&#39;re mocking the wrong things. You can mock static things (like &quot;DataUtil#get&quot;), but since this doesn&#39;t go to the core of the question, let&#39;s say we have\r\n\r\n```\r\npublic class SomeService {\r\n   Supplier&lt;Data&gt; dataSupplier; // set in constructor, can be () -&gt; DataUtils.get(SOME_TABLE)\r\n\r\n   ...\r\n        try (Data data = dataSupplier.get()){\r\n...\r\n```\r\n\r\nTo get your coverage, you can then\r\n\r\n```\r\n// exception cases\r\n// exception one\r\nwhen(dataSupplier.get()).thenThrow(new ExceptionOne());\r\n// exception two\r\nwhen(dataSupplier.get()).thenThrow(new ExceptionTwo());\r\n// empty retrieval cases\r\nData data = mock(Data.class);\r\nwhen(dataSupplier.get()).thenReturn(data);\r\n// covers != null case\r\nwhen(data.retrieveAll()).thenReturn(null);\r\n// covers != null case\r\nwhen(data.retrieveAll()).thenReturn(List.of());\r\n\r\n// verify SomeCustomException is thrown\r\n```\r\nAll four of these need to be in separate test cases (with the same verification).","title":"Java Unit Testing - Make return value of a method called by enclosing method to Empty","body":"<p>Like people stated in the comments, you're mocking the wrong things. You can mock static things (like &quot;DataUtil#get&quot;), but since this doesn't go to the core of the question, let's say we have</p>\n<pre><code>public class SomeService {\n   Supplier&lt;Data&gt; dataSupplier; // set in constructor, can be () -&gt; DataUtils.get(SOME_TABLE)\n\n   ...\n        try (Data data = dataSupplier.get()){\n...\n</code></pre>\n<p>To get your coverage, you can then</p>\n<pre><code>// exception cases\n// exception one\nwhen(dataSupplier.get()).thenThrow(new ExceptionOne());\n// exception two\nwhen(dataSupplier.get()).thenThrow(new ExceptionTwo());\n// empty retrieval cases\nData data = mock(Data.class);\nwhen(dataSupplier.get()).thenReturn(data);\n// covers != null case\nwhen(data.retrieveAll()).thenReturn(null);\n// covers != null case\nwhen(data.retrieveAll()).thenReturn(List.of());\n\n// verify SomeCustomException is thrown\n</code></pre>\n<p>All four of these need to be in separate test cases (with the same verification).</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691505594,"creation_date":1691505594,"answer_id":76860623,"question_id":76860117,"body_markdown":"This question is complex, but every point where it gets complex it breaks apart into a few options, __all of which__ return back to: This is a bad idea.\r\n\r\n## The nature of `data.retrieveAll()`\r\n\r\nThere are only two options here:\r\n\r\n1. `data.retrieveAll()` is specced to be capable of returning `null`.\r\n2. `data.retrieveAll()` is specced such that it cannot possibly return that.\r\n\r\nIf it&#39;s case #1, then just.. write your test that way. There is a way to make a `data` here (mock out `Data.get(Constants.SOME_TABLE_NAME)` to do this). However, case #1 sounds like a grave mistake:\r\n\r\n###  Sub-consideration: The nature of querying all rows from a table\r\n\r\nThis breaks down into 3 options that _might_ be considered as &#39;.. and then it should return `null`&#39;. And `null` is wrong for all of them:\r\n\r\n1. The table exists and has no records. You shouldn&#39;t return `null` - you should return an empty result set (the first call to `.next()` already returns `false`).\r\n2. The table does not exist and that&#39;s weird. You shouldn&#39;t return `null` - you should throw `SQLException`. It should throw something, and I think it&#39;s wrong to throw anything but SQLException, but it depends on the situation. But, throw something.\r\n3. The table does not exist, and that&#39;s not weird at all - that&#39;s normal design of the db. In which case, there is some semantic notion that &#39;table does not exist&#39; represents, and usually it is to be treated as identically to &#39;the table _does_ exist, but has no rows in it&#39;. Therefore, do not return `null` - return an empty result set just like case #1, because to the caller there should be no difference between &#39;table exists and is empty&#39; and &#39;table does not exist&#39;.\r\n\r\nI don&#39;t know what your app does or how it is supposed to work, but it&#39;s going to boil down to one of those 3, and __none of them__ end in &#39;... and `null` could possibly be returned&#39;.\r\n\r\n## Back to the nature of `retrieveAll()`\r\n\r\nWe have now proven it can only be case 2: It cannot possibly return null. It could throw something, or it could return an empty result set maybe.\r\n\r\n## Logical conclusion\r\n\r\nYou don&#39;t test for the impossible except the code that itself is specced that way: You can write a unit test for `Data.retrieveAll` if you must, to confirm it does not return `null` (which is itself impossible to get covered as, well, it can&#39;t), but you certainly can write tests that an exception is indeed thrown if you attempt to query a non-existent table, and that an empty resultset is indeed returned if you query an empty table.\r\n\r\nOnce you&#39;ve got those tests, you don&#39;t retread that ground in another test. Think about it: If the test for &#39;code that does X using A&#39; (X here is your `getAll()` method, `A` here is `Data.retrieveAll`) also implies you must be testing aspects of A, then where does it end? Program code tends to result, and this is no exaggeration, in the &#39;top level call&#39; (say, somebody that loads `youtube.com`, the front page of youtube) resulting in literally __thousands__ of sub-systems being invoked: The user&#39;s playlists and preferences need to be loaded, their google authentication identity needs to be loaded and confirmed, and so on.\r\n\r\nWould you want to write a unit test for that that is 50,000 lines long, and is mostly a copy/paste of thousands of other unit tests, which are themselves 20,000 lines long because they, too, test the entire stack below them?\r\n\r\nOf course not, that&#39;s emphatically does not scale. If `Data.retrieveAll` is specced to not return null you don&#39;t write code for it (your `else` line must go away entirely, as it triggers on an impossible scenario), and you don&#39;t test for it except in the unit tests for the `retrieveAll` method itself, if at all.\r\n\r\nAnd once you cease writing code to cover the impossible, you no longer get a hole in coverage.\r\n\r\nThe same principle applies to the catch block. This, too, breaks down into a few steps but none of them result in a scenario where you need to accept a hole in code coverage:\r\n\r\n1. The method can throw that exception. Then mock it out or just make an instance that will reliably throw it. For example, if you have a db query processor and you want to test SQLExceptions that fall out, just run the query `&quot;THIS IS NOT A VALID SQL QUERY;&quot;`, or `&quot;SELECT 1/0;&quot;` maybe.\r\n2. The method cannot possibly throw it. Then don&#39;t write a catch for it, and thus don&#39;t test that catch code, as it can&#39;t run. If relevant (and usually it is not), write code that ensures this exception isn&#39;t thrown, on the unit test for that method, not in your unit tests for the `getAll` methods). It shouldn&#39;be listed in its `throws` clause.\r\n3. Annoyingly you are implementing a method because a supertype (interface or superclass) has it, and it throws a checked exception that your implementation would never throw. However, you can simply omit that exception from the throws list of your implementation. However, if the caller (your `getAll` method) treats the object as its supertype, javac will still __demand__ that you catch it (or throw it on), which may result in a catch block that cannot occur. This entire scenario is suspect - that API needs review. Possibly that exception needs to be unchecked (exceptions that end up as being literally impossible under any scenario more than once in a blue moon should be unchecked, or the API needs to be updated to separate those cases out). If you can&#39;t work around the API, we hit workaround territory: You either mock it out, or you use something like lombok&#39;s `@SneakyThrows`, or you fork the library, or you accept that you have a catch block that jacoco will mark off as uncovered. Stick a note on to tell jacoco you don&#39;t care and move on - we&#39;ve left &#39;how do I write nice clean code&#39; territory once we decided we&#39;re using an ugly library that needs workarounds to function properly.\r\n4. The method cannot possibly throw it _today_ but you expect it soon will in some near-future update, and you want the code you are writing that uses that method to already be written to handle that likely-relevant-in-the-near-future case, in which case you really do have to mock it out and test it. Jacoco&#39;s warning is &#39;correct&#39;, in that your test cases are incomplete as long as you don&#39;t test that catch block path.\r\n\r\n## If you must, use `assert`\r\n\r\nIt might feel bad to just leave a case such as &#39;what if `Data.retrieveAll` returns `null`&#39; as completely uncovered. Not just &#39;there is no test for that scenario&#39; but even &#39;the code doesn&#39;t even attempt to deal with that scenario&#39;. However, you do it every day. Do you ever write this:\r\n\r\n```\r\nString v = z.toLowerCase();\r\nassertTrue(v instanceof String);\r\n```\r\n\r\nYou don&#39;t. Or, if you think you do, you&#39;ve forgotten to test _thousands_ of such impossibilities. That&#39;s why we don&#39;t test for these things: The list of &#39;exotic things that are impossible&#39; is limitless, hence, it is obviously impossible to test for it all.\r\n\r\nHowever, perhaps you consider that the impossibility of &quot;`data.retrieveAll()` returns null&quot; is still impossible, but &#39;less impossible&#39; than e.g. your JVM somehow ending up with the object returned by `toLowerCase()` being a non-String. If you must address it, I suggest you add an assert. Not a junit assert, an actual assert:\r\n\r\n```\r\nassert resultSet != null: &quot;Data.retrieveAll() broke spec and returned null&quot;;\r\n```\r\n\r\n## Back to your code snippet\r\n\r\nYour code snippet has a pretty significant bug in it, which your unit test isn&#39;t going to catch and which jacoco isn&#39;t going to fix for you either. It&#39;s fortunate: It&#39;s a nice example of why trying to cover every case just means you end up blowing your own legs off with this stuff. You&#39;ve overcomplicated things and in so doing introduced a bug in code that you&#39;re likely never going to actually trigger. (Is a bug still a bug if it is impossible to trigger? You&#39;re going to have to ask a philosopher, and while you&#39;re at it, ask em if a tree that falls in a forest when no body is around to hear it still makes a sound).\r\n\r\nThe problem you have here is that if an empty (not `null`, but empty) is returned, your code throws a custom exception __with the wrong message__. The problem with &#39;wrong / misleading text&#39; is that you can&#39;t unit test for those. Comments and method names have the same issue. How do you write a unit test that catches that:\r\n\r\n```\r\nint add(int a, int b) {\r\n  return a + b;\r\n}\r\n```\r\n\r\nIs misnamed because it should be called `plus` instead, `add` implies that this code actually changes `a` (which is not possible in java, but, still - wrong name)? You don&#39;t. You have to accept that messages and naming is beyond the scope of unit tests and thus beyond the scope of what jacoco can do for you.\r\n\r\nHere&#39;s the right way to write your snippet:\r\n\r\n```\r\nList&lt;Something&gt; listOfSomething = new ArrayList&lt;&gt;();\r\n    try (Data data = DataUtil.get(Constants.SOME_TABLE_NAME)) {\r\n      for (ResultSetRow : data.retrieveAll()) {\r\n        Something something = new Something();\r\n        something.setX(row.get(&quot;someColumnX&quot;));\r\n        listOfSomething.add(something);\r\n      }\r\n    } catch (ExceptionOne | ExceptionTwo e) {\r\n      throw new SomeCustomException(e);\r\n    }\r\n    return listOfSomething;\r\n}\r\n```\r\n\r\nNote:\r\n\r\n* It is _far_ shorter.\r\n* Its local variables are better scoped (there is no performance gain in declaring a local once and re-using it in that loop. Don&#39;t believe me? Run `javap` on both versions and be enlightened how it makes zero difference in the produced bytecode, thus trivially proving it cannot possibly make a difference)\r\n* It just casually assumes `Data.retrieveAll()` couldn&#39;t possibly return `null`. This is good - you don&#39;t nullcheck `&quot;foo&quot;.toLowerCase()` either - you trust that methods you call do what their spec says they do. Even if you don&#39;t, the effect of this is precisely what you want: A `NullPointerException` would occur if retrieveAll fails its spec and does return null. That&#39;s a good thing: The NPE&#39;s name is correct (the problem is indeed a null pointer being present in a place where the coder presumed it couldn&#39;t happen), its stack trace is correct (it points at precisely where this misunderstanding has occurred, and the faulty code is high in the trace), and its message is correct (on modern VMs, the message is &quot;retrieveAll()&quot; or some such).\r\n* It inlines a simple single-use variable. (`resultSet` is gone as a variable).\r\n* It cleaned up the creation of a wrapper-exception. You don&#39;t need to re-tread the message.\r\n* If you feel the null cause does need _some_ attention, there&#39;s `assert`. However, here you don&#39;t need to do that - the `null` situation is handled properly, no need for an explicit `assert` (it results in an NPE. Which is what you want).\r\n* In contrast, it does not throw if the resultset is empty. However, why should it? &quot;There are no rows&quot; is a valid state surely. If it is not a valid state, then, sure, check it and throw something, and mock `Data.retrieveAll` so that you can create that state. You&#39;re now testing something that is a valid respons from `Data.retrieveAll` (i.e. retrieveAll is specced such that it says it is indeed possible for it to return a resultset that has zero rows in it), but is not a valid response/scenario from the viewpoint of `getAll()`.\r\n* However, that sounds bizarre to me. Nothing in `getAll` indicates to me that it converts &#39;no results&#39; into an exception. That means your method is likely badly named at least. I bet the right answer is to just accept that &#39;no results&#39; is just as valid as &#39;some results&#39;. But if not, either `getAll` needs a rename or you need to ensure the context (the name of the class this is in, or the explanation in e.g. `package-info.java` that explains how to mentally model what this API does) needs to make it really obvious that &#39;no results&#39; is unintended as a scenario and results in exceptions if it comes up.\r\n","title":"Java Unit Testing - Make return value of a method called by enclosing method to Empty","body":"<p>This question is complex, but every point where it gets complex it breaks apart into a few options, <strong>all of which</strong> return back to: This is a bad idea.</p>\n<h2>The nature of <code>data.retrieveAll()</code></h2>\n<p>There are only two options here:</p>\n<ol>\n<li><code>data.retrieveAll()</code> is specced to be capable of returning <code>null</code>.</li>\n<li><code>data.retrieveAll()</code> is specced such that it cannot possibly return that.</li>\n</ol>\n<p>If it's case #1, then just.. write your test that way. There is a way to make a <code>data</code> here (mock out <code>Data.get(Constants.SOME_TABLE_NAME)</code> to do this). However, case #1 sounds like a grave mistake:</p>\n<h3>Sub-consideration: The nature of querying all rows from a table</h3>\n<p>This breaks down into 3 options that <em>might</em> be considered as '.. and then it should return <code>null</code>'. And <code>null</code> is wrong for all of them:</p>\n<ol>\n<li>The table exists and has no records. You shouldn't return <code>null</code> - you should return an empty result set (the first call to <code>.next()</code> already returns <code>false</code>).</li>\n<li>The table does not exist and that's weird. You shouldn't return <code>null</code> - you should throw <code>SQLException</code>. It should throw something, and I think it's wrong to throw anything but SQLException, but it depends on the situation. But, throw something.</li>\n<li>The table does not exist, and that's not weird at all - that's normal design of the db. In which case, there is some semantic notion that 'table does not exist' represents, and usually it is to be treated as identically to 'the table <em>does</em> exist, but has no rows in it'. Therefore, do not return <code>null</code> - return an empty result set just like case #1, because to the caller there should be no difference between 'table exists and is empty' and 'table does not exist'.</li>\n</ol>\n<p>I don't know what your app does or how it is supposed to work, but it's going to boil down to one of those 3, and <strong>none of them</strong> end in '... and <code>null</code> could possibly be returned'.</p>\n<h2>Back to the nature of <code>retrieveAll()</code></h2>\n<p>We have now proven it can only be case 2: It cannot possibly return null. It could throw something, or it could return an empty result set maybe.</p>\n<h2>Logical conclusion</h2>\n<p>You don't test for the impossible except the code that itself is specced that way: You can write a unit test for <code>Data.retrieveAll</code> if you must, to confirm it does not return <code>null</code> (which is itself impossible to get covered as, well, it can't), but you certainly can write tests that an exception is indeed thrown if you attempt to query a non-existent table, and that an empty resultset is indeed returned if you query an empty table.</p>\n<p>Once you've got those tests, you don't retread that ground in another test. Think about it: If the test for 'code that does X using A' (X here is your <code>getAll()</code> method, <code>A</code> here is <code>Data.retrieveAll</code>) also implies you must be testing aspects of A, then where does it end? Program code tends to result, and this is no exaggeration, in the 'top level call' (say, somebody that loads <code>youtube.com</code>, the front page of youtube) resulting in literally <strong>thousands</strong> of sub-systems being invoked: The user's playlists and preferences need to be loaded, their google authentication identity needs to be loaded and confirmed, and so on.</p>\n<p>Would you want to write a unit test for that that is 50,000 lines long, and is mostly a copy/paste of thousands of other unit tests, which are themselves 20,000 lines long because they, too, test the entire stack below them?</p>\n<p>Of course not, that's emphatically does not scale. If <code>Data.retrieveAll</code> is specced to not return null you don't write code for it (your <code>else</code> line must go away entirely, as it triggers on an impossible scenario), and you don't test for it except in the unit tests for the <code>retrieveAll</code> method itself, if at all.</p>\n<p>And once you cease writing code to cover the impossible, you no longer get a hole in coverage.</p>\n<p>The same principle applies to the catch block. This, too, breaks down into a few steps but none of them result in a scenario where you need to accept a hole in code coverage:</p>\n<ol>\n<li>The method can throw that exception. Then mock it out or just make an instance that will reliably throw it. For example, if you have a db query processor and you want to test SQLExceptions that fall out, just run the query <code>&quot;THIS IS NOT A VALID SQL QUERY;&quot;</code>, or <code>&quot;SELECT 1/0;&quot;</code> maybe.</li>\n<li>The method cannot possibly throw it. Then don't write a catch for it, and thus don't test that catch code, as it can't run. If relevant (and usually it is not), write code that ensures this exception isn't thrown, on the unit test for that method, not in your unit tests for the <code>getAll</code> methods). It shouldn'be listed in its <code>throws</code> clause.</li>\n<li>Annoyingly you are implementing a method because a supertype (interface or superclass) has it, and it throws a checked exception that your implementation would never throw. However, you can simply omit that exception from the throws list of your implementation. However, if the caller (your <code>getAll</code> method) treats the object as its supertype, javac will still <strong>demand</strong> that you catch it (or throw it on), which may result in a catch block that cannot occur. This entire scenario is suspect - that API needs review. Possibly that exception needs to be unchecked (exceptions that end up as being literally impossible under any scenario more than once in a blue moon should be unchecked, or the API needs to be updated to separate those cases out). If you can't work around the API, we hit workaround territory: You either mock it out, or you use something like lombok's <code>@SneakyThrows</code>, or you fork the library, or you accept that you have a catch block that jacoco will mark off as uncovered. Stick a note on to tell jacoco you don't care and move on - we've left 'how do I write nice clean code' territory once we decided we're using an ugly library that needs workarounds to function properly.</li>\n<li>The method cannot possibly throw it <em>today</em> but you expect it soon will in some near-future update, and you want the code you are writing that uses that method to already be written to handle that likely-relevant-in-the-near-future case, in which case you really do have to mock it out and test it. Jacoco's warning is 'correct', in that your test cases are incomplete as long as you don't test that catch block path.</li>\n</ol>\n<h2>If you must, use <code>assert</code></h2>\n<p>It might feel bad to just leave a case such as 'what if <code>Data.retrieveAll</code> returns <code>null</code>' as completely uncovered. Not just 'there is no test for that scenario' but even 'the code doesn't even attempt to deal with that scenario'. However, you do it every day. Do you ever write this:</p>\n<pre><code>String v = z.toLowerCase();\nassertTrue(v instanceof String);\n</code></pre>\n<p>You don't. Or, if you think you do, you've forgotten to test <em>thousands</em> of such impossibilities. That's why we don't test for these things: The list of 'exotic things that are impossible' is limitless, hence, it is obviously impossible to test for it all.</p>\n<p>However, perhaps you consider that the impossibility of &quot;<code>data.retrieveAll()</code> returns null&quot; is still impossible, but 'less impossible' than e.g. your JVM somehow ending up with the object returned by <code>toLowerCase()</code> being a non-String. If you must address it, I suggest you add an assert. Not a junit assert, an actual assert:</p>\n<pre><code>assert resultSet != null: &quot;Data.retrieveAll() broke spec and returned null&quot;;\n</code></pre>\n<h2>Back to your code snippet</h2>\n<p>Your code snippet has a pretty significant bug in it, which your unit test isn't going to catch and which jacoco isn't going to fix for you either. It's fortunate: It's a nice example of why trying to cover every case just means you end up blowing your own legs off with this stuff. You've overcomplicated things and in so doing introduced a bug in code that you're likely never going to actually trigger. (Is a bug still a bug if it is impossible to trigger? You're going to have to ask a philosopher, and while you're at it, ask em if a tree that falls in a forest when no body is around to hear it still makes a sound).</p>\n<p>The problem you have here is that if an empty (not <code>null</code>, but empty) is returned, your code throws a custom exception <strong>with the wrong message</strong>. The problem with 'wrong / misleading text' is that you can't unit test for those. Comments and method names have the same issue. How do you write a unit test that catches that:</p>\n<pre><code>int add(int a, int b) {\n  return a + b;\n}\n</code></pre>\n<p>Is misnamed because it should be called <code>plus</code> instead, <code>add</code> implies that this code actually changes <code>a</code> (which is not possible in java, but, still - wrong name)? You don't. You have to accept that messages and naming is beyond the scope of unit tests and thus beyond the scope of what jacoco can do for you.</p>\n<p>Here's the right way to write your snippet:</p>\n<pre><code>List&lt;Something&gt; listOfSomething = new ArrayList&lt;&gt;();\n    try (Data data = DataUtil.get(Constants.SOME_TABLE_NAME)) {\n      for (ResultSetRow : data.retrieveAll()) {\n        Something something = new Something();\n        something.setX(row.get(&quot;someColumnX&quot;));\n        listOfSomething.add(something);\n      }\n    } catch (ExceptionOne | ExceptionTwo e) {\n      throw new SomeCustomException(e);\n    }\n    return listOfSomething;\n}\n</code></pre>\n<p>Note:</p>\n<ul>\n<li>It is <em>far</em> shorter.</li>\n<li>Its local variables are better scoped (there is no performance gain in declaring a local once and re-using it in that loop. Don't believe me? Run <code>javap</code> on both versions and be enlightened how it makes zero difference in the produced bytecode, thus trivially proving it cannot possibly make a difference)</li>\n<li>It just casually assumes <code>Data.retrieveAll()</code> couldn't possibly return <code>null</code>. This is good - you don't nullcheck <code>&quot;foo&quot;.toLowerCase()</code> either - you trust that methods you call do what their spec says they do. Even if you don't, the effect of this is precisely what you want: A <code>NullPointerException</code> would occur if retrieveAll fails its spec and does return null. That's a good thing: The NPE's name is correct (the problem is indeed a null pointer being present in a place where the coder presumed it couldn't happen), its stack trace is correct (it points at precisely where this misunderstanding has occurred, and the faulty code is high in the trace), and its message is correct (on modern VMs, the message is &quot;retrieveAll()&quot; or some such).</li>\n<li>It inlines a simple single-use variable. (<code>resultSet</code> is gone as a variable).</li>\n<li>It cleaned up the creation of a wrapper-exception. You don't need to re-tread the message.</li>\n<li>If you feel the null cause does need <em>some</em> attention, there's <code>assert</code>. However, here you don't need to do that - the <code>null</code> situation is handled properly, no need for an explicit <code>assert</code> (it results in an NPE. Which is what you want).</li>\n<li>In contrast, it does not throw if the resultset is empty. However, why should it? &quot;There are no rows&quot; is a valid state surely. If it is not a valid state, then, sure, check it and throw something, and mock <code>Data.retrieveAll</code> so that you can create that state. You're now testing something that is a valid respons from <code>Data.retrieveAll</code> (i.e. retrieveAll is specced such that it says it is indeed possible for it to return a resultset that has zero rows in it), but is not a valid response/scenario from the viewpoint of <code>getAll()</code>.</li>\n<li>However, that sounds bizarre to me. Nothing in <code>getAll</code> indicates to me that it converts 'no results' into an exception. That means your method is likely badly named at least. I bet the right answer is to just accept that 'no results' is just as valid as 'some results'. But if not, either <code>getAll</code> needs a rename or you need to ensure the context (the name of the class this is in, or the explanation in e.g. <code>package-info.java</code> that explains how to mentally model what this API does) needs to make it really obvious that 'no results' is unintended as a scenario and results in exceptions if it comes up.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1407336,"reputation":6523,"user_id":1348834,"display_name":"Joel Costigliola"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691527648,"creation_date":1691527648,"answer_id":76863111,"question_id":76860117,"body_markdown":"Just commenting on the assertion, it is preferable to use \r\n\r\n```java\r\nassertThat(someServiceMock.getAll()).isEmpty();\r\n```\r\nNot only it reads better but the error message will be explicit too (it would complain you getAll list is not empty) instead the non explicit `expected true but got false`","title":"Java Unit Testing - Make return value of a method called by enclosing method to Empty","body":"<p>Just commenting on the assertion, it is preferable to use</p>\n<pre class=\"lang-java prettyprint-override\"><code>assertThat(someServiceMock.getAll()).isEmpty();\n</code></pre>\n<p>Not only it reads better but the error message will be explicit too (it would complain you getAll list is not empty) instead the non explicit <code>expected true but got false</code></p>\n"}],"owner":{"account_id":4700927,"reputation":1844,"user_id":3804495,"accept_rate":46,"display_name":"heisenberg"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":346,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691527648,"creation_date":1691501945,"question_id":76860117,"body_markdown":"I have this method and implementation is done. However, when I look at `Jacoco` report, it says that the `else {}` and `catch()` part is not being covered by Unit Test Code Coverage.\r\n\r\n    public class SomeService {\r\n    \t\r\n    \tpublic List&lt;Something&gt; getAll() throws SomeCustomException {\r\n    \t\tList&lt;Something&gt; listOfSomething = new ArrayList&lt;&gt;();\r\n    \t\ttry (Data data = DataUtil.get(Constants.SOME_TABLE_NAME)){\r\n    \t\t\tResultSet resultSet = data.retrieveAll();\r\n    \t\t\tif(resultSet != null &amp;&amp; !resultSet.isEmpty()){\r\n    \t\t\t\tSomething something;\r\n    \t\t\t\tfor (ResultSetRow row : resultSet){\r\n    \t\t\t\t\tsomething = new Something();\r\n    \t\t\t\t\tsomething.setX(row.get(&quot;someColumnX&quot;));\r\n    \t\t\t\t\t//...\r\n    \t\t\t\t\tlistOfSomething.add(something);\r\n    \t\t\t\t}\r\n    \t\t\t}else{\r\n    \t\t\t\tthrow new SomeCustomException(&quot;ResultSet is null&quot;);\r\n    \t\t\t}\r\n    \t\t}catch (ExceptionOne | ExceptionTwo e){\r\n    \t\t\tthrow new SomeCustomException(e.getMessage(), e);\r\n    \t\t}\r\n    \t\treturn listOfSomething;\r\n    \t}\r\n    \t\r\n    }\r\n    \r\nSo I tried to create a Unit Test method to attempt to cover the `else(){}` part. However, I think what I&#39;m doing is not correct or has no effect to the `someServiceMock`\r\n\r\nBasically, I want the `resultSet` to be empty so that it goes to the `else {}` part and cover the test on `else {}` branch. Problem is, I&#39;m not sure how to set it because it&#39;s inside the `getAll()` method\r\n\r\n    @Test\r\n    void getAllReturnsEmpty() {\r\n    \tSomeService someServiceMock = mock(SomeService.class);\r\n    \tResultSet resultSetMock = mock(ResultSet.class);\r\n    \twhen(!resultSetMock.isEmpty).thenReturn(false);\r\n    \t\r\n    \tassertThat(someServiceMock.getAll().isEmpty()).isTrue();\r\n    }\r\n\r\nIs there a way to achieve what I want? I want to hava 99% Java code coverage\r\n\r\nThank you","title":"Java Unit Testing - Make return value of a method called by enclosing method to Empty","body":"<p>I have this method and implementation is done. However, when I look at <code>Jacoco</code> report, it says that the <code>else {}</code> and <code>catch()</code> part is not being covered by Unit Test Code Coverage.</p>\n<pre><code>public class SomeService {\n    \n    public List&lt;Something&gt; getAll() throws SomeCustomException {\n        List&lt;Something&gt; listOfSomething = new ArrayList&lt;&gt;();\n        try (Data data = DataUtil.get(Constants.SOME_TABLE_NAME)){\n            ResultSet resultSet = data.retrieveAll();\n            if(resultSet != null &amp;&amp; !resultSet.isEmpty()){\n                Something something;\n                for (ResultSetRow row : resultSet){\n                    something = new Something();\n                    something.setX(row.get(&quot;someColumnX&quot;));\n                    //...\n                    listOfSomething.add(something);\n                }\n            }else{\n                throw new SomeCustomException(&quot;ResultSet is null&quot;);\n            }\n        }catch (ExceptionOne | ExceptionTwo e){\n            throw new SomeCustomException(e.getMessage(), e);\n        }\n        return listOfSomething;\n    }\n    \n}\n</code></pre>\n<p>So I tried to create a Unit Test method to attempt to cover the <code>else(){}</code> part. However, I think what I'm doing is not correct or has no effect to the <code>someServiceMock</code></p>\n<p>Basically, I want the <code>resultSet</code> to be empty so that it goes to the <code>else {}</code> part and cover the test on <code>else {}</code> branch. Problem is, I'm not sure how to set it because it's inside the <code>getAll()</code> method</p>\n<pre><code>@Test\nvoid getAllReturnsEmpty() {\n    SomeService someServiceMock = mock(SomeService.class);\n    ResultSet resultSetMock = mock(ResultSet.class);\n    when(!resultSetMock.isEmpty).thenReturn(false);\n    \n    assertThat(someServiceMock.getAll().isEmpty()).isTrue();\n}\n</code></pre>\n<p>Is there a way to achieve what I want? I want to hava 99% Java code coverage</p>\n<p>Thank you</p>\n"},{"tags":["java","apache-flink","flink-streaming"],"answers":[{"comments":[{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691583928,"post_id":76863015,"comment_id":135510898,"body_markdown":"What exactly does this line does? `environment.enableCheckpointing(5000)`... What does 5000 signify?","body":"What exactly does this line does? <code>environment.enableCheckpointing(5000)</code>... What does 5000 signify?"},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691584361,"post_id":76863015,"comment_id":135510992,"body_markdown":"`stateBackend.setDbStoragePath(rocksDBStateDir)` is storing the latest state of an operator. If the job fails without checkpoint, then job will start with last successful backend state, which looks fine to me.  Correct me.","body":"<code>stateBackend.setDbStoragePath(rocksDBStateDir)</code> is storing the latest state of an operator. If the job fails without checkpoint, then job will start with last successful backend state, which looks fine to me.  Correct me."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691584422,"post_id":76863015,"comment_id":135511008,"body_markdown":"Fastest available local file system? We are using PVC in kubernetes","body":"Fastest available local file system? We are using PVC in kubernetes"},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1691600457,"post_id":76863015,"comment_id":135514727,"body_markdown":"The checkpointing interval is 5000 msec. If a job fails without checkpointing, the state will be lost. Flink will not use the state in rocksDBStateDir for recovery. You can use a PVC if you want, but it&#39;s not necessary. Ephemeral local storage is fine.","body":"The checkpointing interval is 5000 msec. If a job fails without checkpointing, the state will be lost. Flink will not use the state in rocksDBStateDir for recovery. You can use a PVC if you want, but it&#39;s not necessary. Ephemeral local storage is fine."},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1691601178,"post_id":76863015,"comment_id":135514864,"body_markdown":"By the way, Flink disables the RocksDB write-ahead log, so the data in rocksDBStateDir is incomplete, and wouldn&#39;t work for recovery.","body":"By the way, Flink disables the RocksDB write-ahead log, so the data in rocksDBStateDir is incomplete, and wouldn&#39;t work for recovery."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691605707,"post_id":76863015,"comment_id":135515642,"body_markdown":"So, Does PVC(slow filesystem) as RocksDB will not allow Flink to use `rocksDBStateDir` for recovery?","body":"So, Does PVC(slow filesystem) as RocksDB will not allow Flink to use <code>rocksDBStateDir</code> for recovery?"},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1691606052,"post_id":76863015,"comment_id":135515706,"body_markdown":"Flink never uses rocksDBStateDir for recovery, under any circumstances.","body":"Flink never uses rocksDBStateDir for recovery, under any circumstances."},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":1,"creation_date":1691606149,"post_id":76863015,"comment_id":135515720,"body_markdown":"You want to put rocksDBStateDir on a fast local disk because it&#39;s in the critical path for application performance, and since it plays no role in recovery, there&#39;s zero benefit to putting it somewhere slower and more durable.","body":"You want to put rocksDBStateDir on a fast local disk because it&#39;s in the critical path for application performance, and since it plays no role in recovery, there&#39;s zero benefit to putting it somewhere slower and more durable."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691607342,"post_id":76863015,"comment_id":135515920,"body_markdown":"In that case, `rocksDBStateDir` can point to some unnamed volume(storage space within docker container)?  Because named volume will be less faster, becase actual storage of named volume will be outside docker container","body":"In that case, <code>rocksDBStateDir</code> can point to some unnamed volume(storage space within docker container)?  Because named volume will be less faster, becase actual storage of named volume will be outside docker container"},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":1,"creation_date":1691613092,"post_id":76863015,"comment_id":135516805,"body_markdown":"Yes, rocksDBStateDir can point to an unexported volume within the container.","body":"Yes, rocksDBStateDir can point to an unexported volume within the container."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1693589129,"post_id":76863015,"comment_id":135785792,"body_markdown":"Related  query on ValueState variable - https://stackoverflow.com/q/77024989/3317808","body":"Related  query on ValueState variable - <a href=\"https://stackoverflow.com/q/77024989/3317808\">stackoverflow.com/q/77024989/3317808</a>"}],"tags":[],"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"comment_count":11,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691527147,"creation_date":1691526600,"answer_id":76863015,"question_id":76861977,"body_markdown":"Yes, you need checkpointing. Without it, the state will be lost in the event of a failure.\r\n\r\nHowever, the `rocksDBStateDir` and `checkpointsDir` should be in different file systems. The `rocksDBStateDir` should be in the fastest available local file system. This is where the working state is kept, and it doesn&#39;t matter if this disk is lost when failures occur, since the state will be restored from the latest checkpoint. On the other hand, `checkpointsDir` should be in a distributed file system, to ensure that failure recovery is always possible.","title":"Does statebackend need checkpoint?","body":"<p>Yes, you need checkpointing. Without it, the state will be lost in the event of a failure.</p>\n<p>However, the <code>rocksDBStateDir</code> and <code>checkpointsDir</code> should be in different file systems. The <code>rocksDBStateDir</code> should be in the fastest available local file system. This is where the working state is kept, and it doesn't matter if this disk is lost when failures occur, since the state will be restored from the latest checkpoint. On the other hand, <code>checkpointsDir</code> should be in a distributed file system, to ensure that failure recovery is always possible.</p>\n"}],"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76863015,"answer_count":1,"score":0,"last_activity_date":1691527147,"creation_date":1691516186,"question_id":76861977,"body_markdown":"Below is the code from [here](https://blog.rockthejvm.com/flink-sql-introduction/) that maintains the checkpoint:\r\n\r\n    class EnrichmentStream {\r\n        private val checkpointsDir  = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/checkpoints/&quot;\r\n        private val rocksDBStateDir = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/state/rocksdb/&quot;\r\n    \r\n        companion object {\r\n            @JvmStatic\r\n            fun main(args: Array&lt;String&gt;) {\r\n                EnrichmentStream().runStream()\r\n            }\r\n        }\r\n    \r\n        fun runStream() {\r\n            val environment = StreamExecutionEnvironment\r\n                .createLocalEnvironmentWithWebUI(Configuration())\r\n    \r\n            environment.parallelism = 3\r\n    \r\n            // Checkpoint Configurations\r\n            environment.enableCheckpointing(5000)\r\n            environment.checkpointConfig.minPauseBetweenCheckpoints = 100\r\n            environment.checkpointConfig.setCheckpointStorage(checkpointsDir)\r\n    \r\n            val stateBackend = EmbeddedRocksDBStateBackend()\r\n            stateBackend.setDbStoragePath(rocksDBStateDir)\r\n            environment.stateBackend = stateBackend\r\n    \r\n            environment.checkpointConfig.externalizedCheckpointCleanup =\r\n                CheckpointConfig.ExternalizedCheckpointCleanup.RETAIN_ON_CANCELLATION\r\n    \r\n            // Configure Restart Strategy\r\n            environment.restartStrategy = RestartStrategies.fixedDelayRestart(5, Time.seconds(5))\r\n    \r\n            val tableEnvironment = StreamTableEnvironment.create(environment)\r\n    \r\n            // Run some SQL queries to check the existing Catalogs, Databases and Tables\r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW CATALOGS&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW DATABASES&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW TABLES&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(Queries.CREATE_SENSORS_TABLE)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(Queries.CREATE_READINGS_TABLE)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW TABLES&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(Queries.JOIN_SENSOR_READINGS_WITH_INFO_QUERY)\r\n                .print()\r\n        }\r\n    }\r\n\r\n-----\r\n\r\n\r\nDoes flink application with statebackend need checkpoint?\r\n","title":"Does statebackend need checkpoint?","body":"<p>Below is the code from <a href=\"https://blog.rockthejvm.com/flink-sql-introduction/\" rel=\"nofollow noreferrer\">here</a> that maintains the checkpoint:</p>\n<pre><code>class EnrichmentStream {\n    private val checkpointsDir  = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/checkpoints/&quot;\n    private val rocksDBStateDir = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/state/rocksdb/&quot;\n\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            EnrichmentStream().runStream()\n        }\n    }\n\n    fun runStream() {\n        val environment = StreamExecutionEnvironment\n            .createLocalEnvironmentWithWebUI(Configuration())\n\n        environment.parallelism = 3\n\n        // Checkpoint Configurations\n        environment.enableCheckpointing(5000)\n        environment.checkpointConfig.minPauseBetweenCheckpoints = 100\n        environment.checkpointConfig.setCheckpointStorage(checkpointsDir)\n\n        val stateBackend = EmbeddedRocksDBStateBackend()\n        stateBackend.setDbStoragePath(rocksDBStateDir)\n        environment.stateBackend = stateBackend\n\n        environment.checkpointConfig.externalizedCheckpointCleanup =\n            CheckpointConfig.ExternalizedCheckpointCleanup.RETAIN_ON_CANCELLATION\n\n        // Configure Restart Strategy\n        environment.restartStrategy = RestartStrategies.fixedDelayRestart(5, Time.seconds(5))\n\n        val tableEnvironment = StreamTableEnvironment.create(environment)\n\n        // Run some SQL queries to check the existing Catalogs, Databases and Tables\n        tableEnvironment\n            .executeSql(&quot;SHOW CATALOGS&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(&quot;SHOW DATABASES&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(&quot;SHOW TABLES&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(Queries.CREATE_SENSORS_TABLE)\n            .print()\n\n        tableEnvironment\n            .executeSql(Queries.CREATE_READINGS_TABLE)\n            .print()\n\n        tableEnvironment\n            .executeSql(&quot;SHOW TABLES&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(Queries.JOIN_SENSOR_READINGS_WITH_INFO_QUERY)\n            .print()\n    }\n}\n</code></pre>\n<hr />\n<p>Does flink application with statebackend need checkpoint?</p>\n"},{"tags":["java","spring-boot","spring-security","oauth-2.0","openid-connect"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691690968,"post_id":76862975,"comment_id":135529222,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76862975/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":18193980,"reputation":1,"user_id":17790549,"display_name":"Waylon"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691526359,"creation_date":1691526272,"answer_id":76862975,"question_id":75911289,"body_markdown":"```\r\n@Configuration(proxyBeanMethods = false)\r\npublic class MyAuthorizationServerConfig {\r\n    @Bean\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public SecurityFilterChain authorizationServerSecurityFilterChain(\r\n            HttpSecurity http, RegisteredClientRepository registeredClientRepository,\r\n            AuthorizationServerSettings authorizationServerSettings) throws Exception {\r\n\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n\r\n        http\r\n                .exceptionHandling((exceptions) -&gt; exceptions\r\n                        .defaultAuthenticationEntryPointFor(\r\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\r\n                                new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\r\n                        )\r\n                )\r\n                .oauth2ResourceServer(oauth2ResourceServer -&gt;\r\n                        oauth2ResourceServer.jwt(Customizer.withDefaults()));\r\n\r\n\r\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n                .oidc(Customizer.withDefaults());\r\n\r\n        return http.build();\r\n    }\r\n}\r\n```","title":"OpenID Connect authentication requests restricted","body":"<pre><code>@Configuration(proxyBeanMethods = false)\npublic class MyAuthorizationServerConfig {\n    @Bean\n    @Order(Ordered.HIGHEST_PRECEDENCE)\n    public SecurityFilterChain authorizationServerSecurityFilterChain(\n            HttpSecurity http, RegisteredClientRepository registeredClientRepository,\n            AuthorizationServerSettings authorizationServerSettings) throws Exception {\n\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n\n        http\n                .exceptionHandling((exceptions) -&gt; exceptions\n                        .defaultAuthenticationEntryPointFor(\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\n                                new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\n                        )\n                )\n                .oauth2ResourceServer(oauth2ResourceServer -&gt;\n                        oauth2ResourceServer.jwt(Customizer.withDefaults()));\n\n\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n                .oidc(Customizer.withDefaults());\n\n        return http.build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11107771,"reputation":1,"user_id":8154489,"display_name":"Tony Cruelkid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":548,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691526359,"creation_date":1680429362,"question_id":75911289,"body_markdown":"I&#39;m facing the problem with configuring OAuth2 login for my application https://github.com/Cruelkid/guitar-cloud/tree/develop\r\n\r\n```\r\n2023-04-02T11:52:28.856+03:00 DEBUG 3866 --- [nio-9000-exec-2] org.apache.tomcat.util.http.Parameters   : Start processing with input [response_type=code&amp;client_id=guitar-cloud-client&amp;scope=openid&amp;state=P3j3mwpUvm1UR_tVYjWelCDGauVZxf4ZOOcUyFVSc00%3D&amp;redirect_uri=http://127.0.0.1:8080/login/oauth2/code/guitar-cloud-client-oidc&amp;nonce=D-qBrlre2P-il99B1HW8ejFWfMR1fQHB2QG7WRHydNc]\r\n2023-04-02T11:52:28.857+03:00 DEBUG 3866 --- [nio-9000-exec-2] .s.a.DefaultAuthenticationEventPublisher : No event was found for the exception org.springframework.security.oauth2.server.authorization.authentication.OAuth2AuthorizationCodeRequestAuthenticationException\r\n2023-04-02T11:52:28.857+03:00 DEBUG 3866 --- [nio-9000-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to `http://127.0.0.1:8080/login/oauth2/code/guitar-cloud-client-oidc?error=invalid_scope&amp;error_description=OpenID%20Connect%201.0%20authentication%20requests%20are%20restricted.&amp;error_uri=https%3A%2F%2Fdatatracker.ietf.org%2Fdoc%2Fhtml%2Frfc6749%23section-4.1.2.1&amp;state=P3j3mwpUvm1UR_tVYjWelCDGauVZxf4ZOOcUyFVSc00%3D`\r\n```\r\n\r\n\r\nBefore ending up with such code I was facing similar issue but with an auth server, but i&#39;ve figured out that this was related to disabled by default OIDC 1.0, but that error was fixed with adding this piece of code:\r\n\r\n```\r\nhttp.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n                .oidc(Customizer.withDefaults());\r\n```\r\n\r\nUnfortunatelly, for the api client i haven&#39;t found a way to do something similar","title":"OpenID Connect authentication requests restricted","body":"<p>I'm facing the problem with configuring OAuth2 login for my application <a href=\"https://github.com/Cruelkid/guitar-cloud/tree/develop\" rel=\"nofollow noreferrer\">https://github.com/Cruelkid/guitar-cloud/tree/develop</a></p>\n<pre><code>2023-04-02T11:52:28.856+03:00 DEBUG 3866 --- [nio-9000-exec-2] org.apache.tomcat.util.http.Parameters   : Start processing with input [response_type=code&amp;client_id=guitar-cloud-client&amp;scope=openid&amp;state=P3j3mwpUvm1UR_tVYjWelCDGauVZxf4ZOOcUyFVSc00%3D&amp;redirect_uri=http://127.0.0.1:8080/login/oauth2/code/guitar-cloud-client-oidc&amp;nonce=D-qBrlre2P-il99B1HW8ejFWfMR1fQHB2QG7WRHydNc]\n2023-04-02T11:52:28.857+03:00 DEBUG 3866 --- [nio-9000-exec-2] .s.a.DefaultAuthenticationEventPublisher : No event was found for the exception org.springframework.security.oauth2.server.authorization.authentication.OAuth2AuthorizationCodeRequestAuthenticationException\n2023-04-02T11:52:28.857+03:00 DEBUG 3866 --- [nio-9000-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to `http://127.0.0.1:8080/login/oauth2/code/guitar-cloud-client-oidc?error=invalid_scope&amp;error_description=OpenID%20Connect%201.0%20authentication%20requests%20are%20restricted.&amp;error_uri=https%3A%2F%2Fdatatracker.ietf.org%2Fdoc%2Fhtml%2Frfc6749%23section-4.1.2.1&amp;state=P3j3mwpUvm1UR_tVYjWelCDGauVZxf4ZOOcUyFVSc00%3D`\n</code></pre>\n<p>Before ending up with such code I was facing similar issue but with an auth server, but i've figured out that this was related to disabled by default OIDC 1.0, but that error was fixed with adding this piece of code:</p>\n<pre><code>http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n                .oidc(Customizer.withDefaults());\n</code></pre>\n<p>Unfortunatelly, for the api client i haven't found a way to do something similar</p>\n"},{"tags":["java","spring-boot","open-telemetry"],"comments":[{"owner":{"account_id":111923,"reputation":649,"user_id":295416,"display_name":"trask"},"score":0,"creation_date":1691595544,"post_id":76862924,"comment_id":135513693,"body_markdown":"try `mvn dependency:tree` to confirm the expected dependency versions. also you could try Intellij &gt; Maven &gt; Reload project.","body":"try <code>mvn dependency:tree</code> to confirm the expected dependency versions. also you could try Intellij &gt; Maven &gt; Reload project."}],"owner":{"account_id":1889217,"reputation":2687,"user_id":1707750,"accept_rate":100,"display_name":"Romaan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691525580,"creation_date":1691525580,"question_id":76862924,"body_markdown":"Below is my `pom.xml` \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.mypackage&lt;/groupId&gt;\r\n  &lt;artifactId&gt;myid&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0.0&lt;/version&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;camunda.version&gt;7.8.0&lt;/camunda.version&gt;\r\n    &lt;!-- Build properties --&gt;\r\n    &lt;maven.version&gt;3.0.0&lt;/maven.version&gt;\r\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n          &lt;artifactId&gt;opentelemetry-bom&lt;/artifactId&gt;\r\n          &lt;version&gt;1.28.0&lt;/version&gt;\r\n          &lt;type&gt;pom&lt;/type&gt;\r\n          &lt;scope&gt;import&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n  &lt;/dependencyManagement&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-webapp&lt;/artifactId&gt;\r\n      &lt;version&gt;7.14.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-rest&lt;/artifactId&gt;\r\n      &lt;version&gt;7.14.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-spin-core&lt;/artifactId&gt;\r\n      &lt;version&gt;1.6.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-spin-dataformat-json-jackson&lt;/artifactId&gt;\r\n      &lt;version&gt;1.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-spin-dataformat-all&lt;/artifactId&gt;\r\n      &lt;version&gt;1.6.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.camunda.commons/camunda-commons-logging --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.commons&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-commons-logging&lt;/artifactId&gt;\r\n      &lt;version&gt;1.9.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.everit.json&lt;/groupId&gt;\r\n      &lt;artifactId&gt;org.everit.json.schema&lt;/artifactId&gt;\r\n      &lt;version&gt;1.3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n      &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- database --&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/postgresql/postgresql --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- testing --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.bpm.extension&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-bpm-assert&lt;/artifactId&gt;\r\n      &lt;version&gt;1.2&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.bpm.extension.springboot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.0&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;opentelemetry-api&lt;/artifactId&gt;\r\n      &lt;version&gt;1.28.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;opentelemetry-sdk&lt;/artifactId&gt;\r\n      &lt;version&gt;1.28.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;opentelemetry-exporter-otlp&lt;/artifactId&gt;\r\n      &lt;version&gt;1.28.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;opentelemetry-exporter-otlp-common&lt;/artifactId&gt;\r\n      &lt;version&gt;1.28.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;layout&gt;ZIP&lt;/layout&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;repackage&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;17&lt;/source&gt;\r\n          &lt;target&gt;17&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd I have `OtlpExporterConfig.java` like below:\r\n\r\n```\r\npackage com.mypackage.configurations;\r\n\r\nimport io.opentelemetry.exporter.otlp.trace.OtlpGrpcSpanExporter;\r\nimport io.opentelemetry.sdk.trace.export.SpanExporter;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class OtlpExporterConfig {\r\n\r\n    @Value(&quot;${opentelemetry.trace.exporter.otlp.endpoint}&quot;)\r\n    private String otlpEndpoint;\r\n\r\n    @Bean\r\n    public SpanExporter otlpSpanExporter() {\r\n        return OtlpGrpcSpanExporter.builder()\r\n                .setEndpoint(otlpEndpoint)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nBut OtlpGrpcSpanExporter is not found. In my intellij IDE, I can also spot exporter is not available under io.opentelemetry. Can someone please spot the problem , as to, why import is not working","title":"Opentelemetry OtlpGrpcSpanExporter class found","body":"<p>Below is my <code>pom.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.mypackage&lt;/groupId&gt;\n  &lt;artifactId&gt;myid&lt;/artifactId&gt;\n  &lt;version&gt;1.0.0&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;properties&gt;\n    &lt;camunda.version&gt;7.8.0&lt;/camunda.version&gt;\n    &lt;!-- Build properties --&gt;\n    &lt;maven.version&gt;3.0.0&lt;/maven.version&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n        &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n      &lt;/dependency&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n          &lt;artifactId&gt;opentelemetry-bom&lt;/artifactId&gt;\n          &lt;version&gt;1.28.0&lt;/version&gt;\n          &lt;type&gt;pom&lt;/type&gt;\n          &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-webapp&lt;/artifactId&gt;\n      &lt;version&gt;7.14.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-rest&lt;/artifactId&gt;\n      &lt;version&gt;7.14.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-spin-core&lt;/artifactId&gt;\n      &lt;version&gt;1.6.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-spin-dataformat-json-jackson&lt;/artifactId&gt;\n      &lt;version&gt;1.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-spin-dataformat-all&lt;/artifactId&gt;\n      &lt;version&gt;1.6.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.camunda.commons/camunda-commons-logging --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.commons&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-commons-logging&lt;/artifactId&gt;\n      &lt;version&gt;1.9.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.everit.json&lt;/groupId&gt;\n      &lt;artifactId&gt;org.everit.json.schema&lt;/artifactId&gt;\n      &lt;version&gt;1.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- database --&gt;\n    &lt;!-- https://mvnrepository.com/artifact/postgresql/postgresql --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n      &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- testing --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.bpm.extension&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-bpm-assert&lt;/artifactId&gt;\n      &lt;version&gt;1.2&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.bpm.extension.springboot&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;version&gt;2.2.0&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n      &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n      &lt;artifactId&gt;opentelemetry-api&lt;/artifactId&gt;\n      &lt;version&gt;1.28.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n      &lt;artifactId&gt;opentelemetry-sdk&lt;/artifactId&gt;\n      &lt;version&gt;1.28.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n      &lt;artifactId&gt;opentelemetry-exporter-otlp&lt;/artifactId&gt;\n      &lt;version&gt;1.28.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n      &lt;artifactId&gt;opentelemetry-exporter-otlp-common&lt;/artifactId&gt;\n      &lt;version&gt;1.28.0&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;layout&gt;ZIP&lt;/layout&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;repackage&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;17&lt;/source&gt;\n          &lt;target&gt;17&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>And I have <code>OtlpExporterConfig.java</code> like below:</p>\n<pre><code>package com.mypackage.configurations;\n\nimport io.opentelemetry.exporter.otlp.trace.OtlpGrpcSpanExporter;\nimport io.opentelemetry.sdk.trace.export.SpanExporter;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class OtlpExporterConfig {\n\n    @Value(&quot;${opentelemetry.trace.exporter.otlp.endpoint}&quot;)\n    private String otlpEndpoint;\n\n    @Bean\n    public SpanExporter otlpSpanExporter() {\n        return OtlpGrpcSpanExporter.builder()\n                .setEndpoint(otlpEndpoint)\n                .build();\n    }\n}\n</code></pre>\n<p>But OtlpGrpcSpanExporter is not found. In my intellij IDE, I can also spot exporter is not available under io.opentelemetry. Can someone please spot the problem , as to, why import is not working</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","aws-java-sdk-2.x","aws-java-sdk-dynamodb"],"comments":[{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1691525562,"post_id":76862656,"comment_id":135502906,"body_markdown":"You cannot use JSON in the manner you are trying to do. If you want to use SQL like syntax, you can use PartiQL. Here is a complete example:\n\nhttps://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javav2/example_code/dynamodb/src/main/java/com/example/dynamodb/ScenarioPartiQ.java","body":"You cannot use JSON in the manner you are trying to do. If you want to use SQL like syntax, you can use PartiQL. Here is a complete example:  <a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javav2/example_code/dynamodb/src/main/java/com/example/dynamodb/ScenarioPartiQ.java\" rel=\"nofollow noreferrer\">github.com/awsdocs/aws-doc-sdk-examples/blob/main/javav2/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":28949040,"reputation":53,"user_id":22174061,"display_name":"ash"},"score":0,"creation_date":1691524332,"post_id":76862783,"comment_id":135502708,"body_markdown":"yeah, i&#39;ve seen that one too. but then what&#39;s that thing in `QueryRequest.expressionAttributeValues()` javadoc?","body":"yeah, i&#39;ve seen that one too. but then what&#39;s that thing in <code>QueryRequest.expressionAttributeValues()</code> javadoc?"},{"owner":{"account_id":10749774,"reputation":14484,"user_id":7909676,"display_name":"Leeroy Hannigan"},"score":0,"creation_date":1691525300,"post_id":76862783,"comment_id":135502865,"body_markdown":"expressionAttributeValues acts as a placeholder for you attribute values, this is not related to querying multiple items in a single request.","body":"expressionAttributeValues acts as a placeholder for you attribute values, this is not related to querying multiple items in a single request."}],"tags":[],"owner":{"account_id":10749774,"reputation":14484,"user_id":7909676,"display_name":"Leeroy Hannigan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691523979,"creation_date":1691523979,"answer_id":76862783,"question_id":76862656,"body_markdown":"What you are trying to achieve is not possible for a `Query` using `KeyConditionExpression`. \r\n\r\nA `KeyConditionExpression` requires an equals `=` comparative on a single partition key only, multiple keys using `IN` or `OR` or `AND` are now allowed.\r\n\r\n&gt; Use the KeyConditionExpression parameter to provide a specific value for the partition key. The Query operation will return all of the items from the table or index with that partition key value. You can optionally narrow the scope of the Query operation by specifying a sort key value and a comparison operator in KeyConditionExpression. \r\n\r\n[ref](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html)\r\n\r\n\r\n---\r\n\r\nThe only API that allows syntax similar to what you are creating is PartiQL `ExecuteStatement` where you can pass in up to 50 partition keys as part of an `IN` clause:\r\n\r\n```\r\nSELECT * FROM mytable WHERE PK IN [1,2...50]\r\n```\r\n\r\nhttps://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ExecuteStatement.html","title":"DynamoDB Java SDK - QueryRequest with IN clause","body":"<p>What you are trying to achieve is not possible for a <code>Query</code> using <code>KeyConditionExpression</code>.</p>\n<p>A <code>KeyConditionExpression</code> requires an equals <code>=</code> comparative on a single partition key only, multiple keys using <code>IN</code> or <code>OR</code> or <code>AND</code> are now allowed.</p>\n<blockquote>\n<p>Use the KeyConditionExpression parameter to provide a specific value for the partition key. The Query operation will return all of the items from the table or index with that partition key value. You can optionally narrow the scope of the Query operation by specifying a sort key value and a comparison operator in KeyConditionExpression.</p>\n</blockquote>\n<p><a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html\" rel=\"nofollow noreferrer\">ref</a></p>\n<hr />\n<p>The only API that allows syntax similar to what you are creating is PartiQL <code>ExecuteStatement</code> where you can pass in up to 50 partition keys as part of an <code>IN</code> clause:</p>\n<pre><code>SELECT * FROM mytable WHERE PK IN [1,2...50]\n</code></pre>\n<p><a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ExecuteStatement.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ExecuteStatement.html</a></p>\n"}],"owner":{"account_id":28949040,"reputation":53,"user_id":22174061,"display_name":"ash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691525498,"creation_date":1691522722,"question_id":76862656,"body_markdown":"The Javadoc of `software.amazon.awssdk.services.dynamodb.model.QueryRequest.expressionAttributeValues()` says a following query can be done: \r\n\r\n`ProductStatus IN (:avail, :back, :disc)` \r\n\r\nwhere the values are passed in in &quot;ExpressionAttributeValues&quot; as follows:\r\n\r\n`{ &quot;:avail&quot;:{&quot;S&quot;:&quot;Available&quot;}, &quot;:back&quot;:{&quot;S&quot;:&quot;Backordered&quot;}, &quot;:disc&quot;:{&quot;S&quot;:&quot;Discontinued&quot;} } `\r\n\r\n\r\nI&#39;m now trying to figure how \r\n\r\n`QueryRequest.expressionAttributeValues` is the following `Map`: \r\n\r\n`Map&lt;String, AttributeValue&gt; expressionAttributeValues)`\r\n\r\nthere doesn&#39;t seem to be any other way to pass expression values to the expression defined in `QueryRequest.keyConditionExpression()`\r\n\r\nI specifically looked for a way to pass in a JSON expression -- can&#39;t find any. \r\nskipped the legacy methods-- `QueryRequest.keyConditions()` and some others. \r\n\r\ni tried \r\n\r\n      QueryRequest queryRequest = QueryRequest\r\n                .builder().tableName(&quot;tablename&quot;)\r\n                .indexName(&quot;user-index&quot;)\r\n                .keyConditionExpression(&quot;index-ID IN (:key0, :key1, :key2)&quot;\r\n                .expressionAttributeValues(keys)\r\n                .build();\r\n\r\n\r\nwhere `Map&lt;String, Map&lt;String, AttributeValue&gt;&gt; keys` looks like the following when i print this `Map` with its `toString()`:\r\n \r\n    {:key2=AttributeValue(S=5555550), :key1=AttributeValue(S=5555551), :key0=AttributeValue(S=5555552)}\r\n\r\nthe following exception is thrown to this:\r\n\r\n```\r\nsoftware.amazon.awssdk.services.dynamodb.model.DynamoDbException: ExpressionAttributeValues contains invalid key: Syntax error; key: &quot;&quot;:key1&quot;&quot; (Service: DynamoDb, Status Code: 400, Request ID: R986SKT4JTK02C57HD0P8591TVQV4KQNSO5AEMVJF66Q9ASUAAJG)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:125)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleResponse(CombinedResponseHandler.java:82)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:60)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:41)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:30)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:73)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:50)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:81)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:48)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:31)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26)\r\n\tat software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:193)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:103)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:171)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:82)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76)\r\n\tat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45)\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56)\r\n\tat software.amazon.awssdk.services.dynamodb.DefaultDynamoDbClient.query(DefaultDynamoDbClient.java:4372)\r\n```\r\n\r\ni also tried surrounding the key-s with quotes along with some other variations:\r\n\r\n    {&quot;:key2&quot;=AttributeValue(S=5555550), &quot;:key1&quot;=AttributeValue(S=5555551), &quot;:key0&quot;=AttributeValue(S=5555552)}\r\n\r\n\r\n\r\nWill greatly appreciate the help. \r\nWore me out. \r\n\r\n//==================\r\n\r\nUPDATE: i&#39;m aware of the direct Restful call via a script to AWS server, but we&#39;re looking for the Java solution.   ","title":"DynamoDB Java SDK - QueryRequest with IN clause","body":"<p>The Javadoc of <code>software.amazon.awssdk.services.dynamodb.model.QueryRequest.expressionAttributeValues()</code> says a following query can be done:</p>\n<p><code>ProductStatus IN (:avail, :back, :disc)</code></p>\n<p>where the values are passed in in &quot;ExpressionAttributeValues&quot; as follows:</p>\n<p><code>{ &quot;:avail&quot;:{&quot;S&quot;:&quot;Available&quot;}, &quot;:back&quot;:{&quot;S&quot;:&quot;Backordered&quot;}, &quot;:disc&quot;:{&quot;S&quot;:&quot;Discontinued&quot;} } </code></p>\n<p>I'm now trying to figure how</p>\n<p><code>QueryRequest.expressionAttributeValues</code> is the following <code>Map</code>:</p>\n<p><code>Map&lt;String, AttributeValue&gt; expressionAttributeValues)</code></p>\n<p>there doesn't seem to be any other way to pass expression values to the expression defined in <code>QueryRequest.keyConditionExpression()</code></p>\n<p>I specifically looked for a way to pass in a JSON expression -- can't find any.\nskipped the legacy methods-- <code>QueryRequest.keyConditions()</code> and some others.</p>\n<p>i tried</p>\n<pre><code>  QueryRequest queryRequest = QueryRequest\n            .builder().tableName(&quot;tablename&quot;)\n            .indexName(&quot;user-index&quot;)\n            .keyConditionExpression(&quot;index-ID IN (:key0, :key1, :key2)&quot;\n            .expressionAttributeValues(keys)\n            .build();\n</code></pre>\n<p>where <code>Map&lt;String, Map&lt;String, AttributeValue&gt;&gt; keys</code> looks like the following when i print this <code>Map</code> with its <code>toString()</code>:</p>\n<pre><code>{:key2=AttributeValue(S=5555550), :key1=AttributeValue(S=5555551), :key0=AttributeValue(S=5555552)}\n</code></pre>\n<p>the following exception is thrown to this:</p>\n<pre><code>software.amazon.awssdk.services.dynamodb.model.DynamoDbException: ExpressionAttributeValues contains invalid key: Syntax error; key: &quot;&quot;:key1&quot;&quot; (Service: DynamoDb, Status Code: 400, Request ID: R986SKT4JTK02C57HD0P8591TVQV4KQNSO5AEMVJF66Q9ASUAAJG)\n    at software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:125)\n    at software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleResponse(CombinedResponseHandler.java:82)\n    at software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:60)\n    at software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:41)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:40)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:30)\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:73)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:50)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:36)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:81)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:36)\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56)\n    at software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:48)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:31)\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26)\n    at software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:193)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:103)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:171)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:82)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76)\n    at software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45)\n    at software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56)\n    at software.amazon.awssdk.services.dynamodb.DefaultDynamoDbClient.query(DefaultDynamoDbClient.java:4372)\n</code></pre>\n<p>i also tried surrounding the key-s with quotes along with some other variations:</p>\n<pre><code>{&quot;:key2&quot;=AttributeValue(S=5555550), &quot;:key1&quot;=AttributeValue(S=5555551), &quot;:key0&quot;=AttributeValue(S=5555552)}\n</code></pre>\n<p>Will greatly appreciate the help.\nWore me out.</p>\n<p>//==================</p>\n<p>UPDATE: i'm aware of the direct Restful call via a script to AWS server, but we're looking for the Java solution.</p>\n"},{"tags":["java","multithreading","java-8","forkjoinpool"],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691520709,"creation_date":1691518630,"answer_id":76862219,"question_id":76862157,"body_markdown":"Threads do not have their own memory to use to store objects. But when a method executes, that method execution has its own stackframe allocated to it. The stackframe can store primitives and references to heap-allocated objects. \r\n\r\nIn your code the variable `a` is created within a block executed by a closure, `a` is a reference, it is on the stack frame and only the thread executing that closure can see it. Each time the closure executes it gets its own stackframe and its own `a` variable. \r\n\r\nEach object of type `A` is created on the heap which is shared across threads.  But only the current thread sees the local variables in a method executed by that thread. \r\n\r\n(A closure can access fields declared in its environment. That means if you nested yet another closure inside the closure declaring a local `a`, then the nested closure could access that `a`, even if it would otherwise have gone out of scope. So you can create a situation with nested closures where more than one thread can see a local variable. But the posted code doesn&#39;t do that.)","title":"Memory sharing between Threads","body":"<p>Threads do not have their own memory to use to store objects. But when a method executes, that method execution has its own stackframe allocated to it. The stackframe can store primitives and references to heap-allocated objects.</p>\n<p>In your code the variable <code>a</code> is created within a block executed by a closure, <code>a</code> is a reference, it is on the stack frame and only the thread executing that closure can see it. Each time the closure executes it gets its own stackframe and its own <code>a</code> variable.</p>\n<p>Each object of type <code>A</code> is created on the heap which is shared across threads.  But only the current thread sees the local variables in a method executed by that thread.</p>\n<p>(A closure can access fields declared in its environment. That means if you nested yet another closure inside the closure declaring a local <code>a</code>, then the nested closure could access that <code>a</code>, even if it would otherwise have gone out of scope. So you can create a situation with nested closures where more than one thread can see a local variable. But the posted code doesn't do that.)</p>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691524644,"creation_date":1691524644,"answer_id":76862853,"question_id":76862157,"body_markdown":"&gt; As per my knowledge every thread has some local memory.\r\n\r\nThere is no &quot;memory&quot; in the Java language. &quot;Memory&quot; is something that you only need to talk about if you are describing the internals of a JVM or, maybe, if you are writing native code in some other language such as C++ with which your Java code will communicate via the [Java Native Interface](https://en.wikipedia.org/wiki/Java_Native_Interface).\r\n\r\nThe Java language has _local variables,_ `static` variables, _instances_ (a.k.a., &quot;objects&quot;,) and _fields_ within instances:\r\n\r\n- `static` variables are automatically available to any thread that executes code that has permission to access the variable.\r\n\r\n- Local variables cannot be shared between threads, \\*except\\* when an effectively `final` local variable is _captured_ by a lambda expression, and the result of the lambda is shared between threads.\r\n\r\n- A field is shared if and only if the instance to which it belongs is shared. \r\n\r\n- Instances can be explicitly passed from one thread to another. The `Runnable` object that is used to start a new thread is automatically shared between the new thread and the thread that created it. Other instances can be made available for sharing via the fields of instances that already are shared. For example The shared `Runnable` object could have a field that refers to a `BlockingQueue`. The field would be shared because the Runnable is shared. The queue to which the field refers thus would be shared, and any object that is passed through the queue also becomes a shared object.","title":"Memory sharing between Threads","body":"<blockquote>\n<p>As per my knowledge every thread has some local memory.</p>\n</blockquote>\n<p>There is no &quot;memory&quot; in the Java language. &quot;Memory&quot; is something that you only need to talk about if you are describing the internals of a JVM or, maybe, if you are writing native code in some other language such as C++ with which your Java code will communicate via the <a href=\"https://en.wikipedia.org/wiki/Java_Native_Interface\" rel=\"nofollow noreferrer\">Java Native Interface</a>.</p>\n<p>The Java language has <em>local variables,</em> <code>static</code> variables, <em>instances</em> (a.k.a., &quot;objects&quot;,) and <em>fields</em> within instances:</p>\n<ul>\n<li><p><code>static</code> variables are automatically available to any thread that executes code that has permission to access the variable.</p>\n</li>\n<li><p>Local variables cannot be shared between threads, *except* when an effectively <code>final</code> local variable is <em>captured</em> by a lambda expression, and the result of the lambda is shared between threads.</p>\n</li>\n<li><p>A field is shared if and only if the instance to which it belongs is shared.</p>\n</li>\n<li><p>Instances can be explicitly passed from one thread to another. The <code>Runnable</code> object that is used to start a new thread is automatically shared between the new thread and the thread that created it. Other instances can be made available for sharing via the fields of instances that already are shared. For example The shared <code>Runnable</code> object could have a field that refers to a <code>BlockingQueue</code>. The field would be shared because the Runnable is shared. The queue to which the field refers thus would be shared, and any object that is passed through the queue also becomes a shared object.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":19396763,"reputation":33,"user_id":14184287,"display_name":"Shivansh Bajpai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691524644,"creation_date":1691517962,"question_id":76862157,"body_markdown":"I have a scenario where I am confused little bit. As per my knowledge every thread has some local memory.\r\n```\r\n// 100 elements in SomeArray\r\nArrayList SomeArray = new ArrayList();\r\n ForkJoinPool forkJoinPool = new ForkJoinPool(8);\r\n        forkJoinPool.submit( () -&gt;{\r\n            SomeArray.parallelStream().map(e-&gt;{\r\n              A a= new A();\r\n              // perform some action\r\n            });\r\n        });\r\nclass A{\r\n\r\n}\r\n```\r\n\r\nSo for above code each thread will create a diff object of class A and they will work on that only. I don&#39;t think it should cause any data inconsistency. I have 2 cases here but I am not sure which one is right&lt;br&gt;\r\nCase 1- If both threads are sharing the same memory&lt;br&gt;\r\nThen suppose One Thread creates a object of class A with reference &quot;a&quot; and starts performing some action and then another thread creates a new object with same reference name but now &quot;a&quot; starts pointing to other memory in heap. As &quot;a&quot; is present in shared memory so now &quot;a&quot; will point to diff memory. So Actions that are being performed by thread 1 will start reflecting in other Object.&lt;br&gt;\r\nCase 2- If both threads are storing variable &quot;a&quot; in local memory&lt;br&gt;\r\nThen both threads will create diff objects and as &quot;a&quot; reference is present in local memory So there will be no overlap between them.&lt;br&gt;\r\nSo in short will thread 1 &quot;a&quot; variable and thread 2 &quot;a&quot; variable will have same memory reference???\r\n","title":"Memory sharing between Threads","body":"<p>I have a scenario where I am confused little bit. As per my knowledge every thread has some local memory.</p>\n<pre><code>// 100 elements in SomeArray\nArrayList SomeArray = new ArrayList();\n ForkJoinPool forkJoinPool = new ForkJoinPool(8);\n        forkJoinPool.submit( () -&gt;{\n            SomeArray.parallelStream().map(e-&gt;{\n              A a= new A();\n              // perform some action\n            });\n        });\nclass A{\n\n}\n</code></pre>\n<p>So for above code each thread will create a diff object of class A and they will work on that only. I don't think it should cause any data inconsistency. I have 2 cases here but I am not sure which one is right<br>\nCase 1- If both threads are sharing the same memory<br>\nThen suppose One Thread creates a object of class A with reference &quot;a&quot; and starts performing some action and then another thread creates a new object with same reference name but now &quot;a&quot; starts pointing to other memory in heap. As &quot;a&quot; is present in shared memory so now &quot;a&quot; will point to diff memory. So Actions that are being performed by thread 1 will start reflecting in other Object.<br>\nCase 2- If both threads are storing variable &quot;a&quot; in local memory<br>\nThen both threads will create diff objects and as &quot;a&quot; reference is present in local memory So there will be no overlap between them.<br>\nSo in short will thread 1 &quot;a&quot; variable and thread 2 &quot;a&quot; variable will have same memory reference???</p>\n"},{"tags":["java","android","android-studio","keytool"],"comments":[{"owner":{"account_id":2467399,"reputation":2927,"user_id":2290950,"accept_rate":100,"display_name":"Viktor Yakunin"},"score":1,"creation_date":1691524413,"post_id":76862795,"comment_id":135502722,"body_markdown":"Do you have JAVA_HOME set up? https://stackoverflow.com/questions/22842743/how-to-set-java-home-environment-variable-on-mac-os-x-10-9 might help","body":"Do you have JAVA_HOME set up? <a href=\"https://stackoverflow.com/questions/22842743/how-to-set-java-home-environment-variable-on-mac-os-x-10-9\" title=\"how to set java home environment variable on mac os x 10 9\">stackoverflow.com/questions/22842743/&hellip;</a> might help"},{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1691524413,"post_id":76862795,"comment_id":135502723,"body_markdown":"What exact command causes this error? Is `java` and `javac` on your `PATH`?","body":"What exact command causes this error? Is <code>java</code> and <code>javac</code> on your <code>PATH</code>?"},{"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"score":0,"creation_date":1691524525,"post_id":76862795,"comment_id":135502740,"body_markdown":"@Code-Apprentice keytool and jarsigner, probably everything in the bin folder that has something to do with Java","body":"@Code-Apprentice keytool and jarsigner, probably everything in the bin folder that has something to do with Java"},{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1691524546,"post_id":76862795,"comment_id":135502748,"body_markdown":"So you just type `keytool` and then get this error? Just one example is enough for now.","body":"So you just type <code>keytool</code> and then get this error? Just one example is enough for now."},{"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"score":0,"creation_date":1691524718,"post_id":76862795,"comment_id":135502772,"body_markdown":"@ViktorYakunin probably not as I am just starting to build my setup, however in Windows I do not need to specify the JAVA_HOME and still works. Any idea why is that possible?","body":"@ViktorYakunin probably not as I am just starting to build my setup, however in Windows I do not need to specify the JAVA_HOME and still works. Any idea why is that possible?"},{"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"score":0,"creation_date":1691524771,"post_id":76862795,"comment_id":135502781,"body_markdown":"@Code-Apprentice correct, it should show what action is available with keytool command but I am getting the above error instead of those action list.","body":"@Code-Apprentice correct, it should show what action is available with keytool command but I am getting the above error instead of those action list."}],"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":504,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691524459,"creation_date":1691524103,"question_id":76862795,"body_markdown":"I am trying to run keytool command on my newly setup mac with M1 chip, however navigating in \r\n`/Applications/Android Studio Preview.app/Contents/jbr/Contents/Home/bin` then open the folder with terminal to run a keytool command does not work and giving me an error\r\n\r\n`The operation couldn’t be completed. Unable to locate a Java Runtime.\r\nPlease visit http://www.java.com for information on installing Java.\r\n`\r\n\r\nThis does not happen in Windows, I am expecting that I no longer need to install JRE since Android Studio itself already have it.\r\n\r\nBut opening the actual keytool executable seems working","title":"Android Studio Hedgehog 2023.1.1 Canary 15 JBR not working","body":"<p>I am trying to run keytool command on my newly setup mac with M1 chip, however navigating in\n<code>/Applications/Android Studio Preview.app/Contents/jbr/Contents/Home/bin</code> then open the folder with terminal to run a keytool command does not work and giving me an error</p>\n<p><code>The operation couldn’t be completed. Unable to locate a Java Runtime. Please visit http://www.java.com for information on installing Java. </code></p>\n<p>This does not happen in Windows, I am expecting that I no longer need to install JRE since Android Studio itself already have it.</p>\n<p>But opening the actual keytool executable seems working</p>\n"},{"tags":["java","android","ftp","apache-commons-net"],"comments":[{"owner":{"account_id":28074351,"reputation":21,"user_id":21446459,"display_name":"lezn"},"score":0,"creation_date":1691597782,"post_id":76861879,"comment_id":135514220,"body_markdown":"@MartinPrikryl this works thanks","body":"@MartinPrikryl this works thanks"}],"owner":{"account_id":28074351,"reputation":21,"user_id":21446459,"display_name":"lezn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1691606996,"answer_count":0,"score":1,"last_activity_date":1691524396,"creation_date":1691515348,"question_id":76861879,"body_markdown":"I have problem with download file from ftp server using library commons-net-3.6-ftp.\r\nEvery time when I download always missing about 2kb with original size.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/1ih6F.png)](https://i.stack.imgur.com/1ih6F.png)\r\n\r\n```\r\n    fun download(url: MapFragment){\r\n        try {\r\n            ftpClient?.changeWorkingDirectory(&quot;mapa/&quot;+url.shortName)\r\n\r\n            listener!!.mapDownloadStarted()\r\n            val pathh = this.context!!.getExternalFilesDir(null)\r\n            val test = ftpClient?.listFiles()\r\n\r\n            test?.forEach {\r\n                val fileObj = File(pathh, &quot;ptv/maps/&quot; + it.name)\r\n\r\n                val desFileStream = BufferedOutputStream(FileOutputStream(fileObj))\r\n                val input: InputStream = ftpClient!!.retrieveFileStream(it.name)\r\n\r\n                try {\r\n                    org.apache.commons.net.io.Util.copyStream(input,desFileStream)\r\n                    desFileStream.flush()\r\n                    desFileStream.close()\r\n                    ftpClient!!.disconnect()\r\n                } catch (e: IOException) {\r\n                    e.printStackTrace()\r\n                }\r\n            }\r\n        }catch (e: Exception) {\r\n            logE(e.toString())\r\n        }\r\n    }\r\n```\r\nconfiguration\r\n```\r\nval pass = context.getString(R.string.passFtp)\r\n                val loginFtp = context.getString(R.string.userFtp)\r\n                val serverFtp = context.getString(R.string.serverFtp)\r\n                val mFtpClient = FTPSClient()\r\n                val sc = SSLContext.getInstance(&quot;SSL&quot;)\r\n                val sr = java.security.SecureRandom()\r\n                sc.init(null, getTrustManager(), sr)\r\n                mFtpClient.connect(serverFtp, 62023)\r\n                mFtpClient.setDataTimeout(25000)\r\n                mFtpClient.bufferSize = 1024 * 1024\r\n                mFtpClient.setFileType(FTP.BINARY_FILE_TYPE)\r\n                mFtpClient.execPBSZ(0)\r\n                mFtpClient.execPROT(&quot;P&quot;)\r\n                mFtpClient.enterLocalPassiveMode()\r\n\r\nif (mFtpClient.login(loginFtp, pass)) {\r\n                    ftpClient = mFtpClient\r\n                } else {\r\n                    ftpClient = null\r\n                }\r\n```\r\n\r\n\r\nI used retriveFile instead retrieveFileStream but everytime missing around 2kb","title":"Android downloaded zip file every time damaged","body":"<p>I have problem with download file from ftp server using library commons-net-3.6-ftp.\nEvery time when I download always missing about 2kb with original size.</p>\n<p><a href=\"https://i.stack.imgur.com/1ih6F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ih6F.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>    fun download(url: MapFragment){\n        try {\n            ftpClient?.changeWorkingDirectory(&quot;mapa/&quot;+url.shortName)\n\n            listener!!.mapDownloadStarted()\n            val pathh = this.context!!.getExternalFilesDir(null)\n            val test = ftpClient?.listFiles()\n\n            test?.forEach {\n                val fileObj = File(pathh, &quot;ptv/maps/&quot; + it.name)\n\n                val desFileStream = BufferedOutputStream(FileOutputStream(fileObj))\n                val input: InputStream = ftpClient!!.retrieveFileStream(it.name)\n\n                try {\n                    org.apache.commons.net.io.Util.copyStream(input,desFileStream)\n                    desFileStream.flush()\n                    desFileStream.close()\n                    ftpClient!!.disconnect()\n                } catch (e: IOException) {\n                    e.printStackTrace()\n                }\n            }\n        }catch (e: Exception) {\n            logE(e.toString())\n        }\n    }\n</code></pre>\n<p>configuration</p>\n<pre><code>val pass = context.getString(R.string.passFtp)\n                val loginFtp = context.getString(R.string.userFtp)\n                val serverFtp = context.getString(R.string.serverFtp)\n                val mFtpClient = FTPSClient()\n                val sc = SSLContext.getInstance(&quot;SSL&quot;)\n                val sr = java.security.SecureRandom()\n                sc.init(null, getTrustManager(), sr)\n                mFtpClient.connect(serverFtp, 62023)\n                mFtpClient.setDataTimeout(25000)\n                mFtpClient.bufferSize = 1024 * 1024\n                mFtpClient.setFileType(FTP.BINARY_FILE_TYPE)\n                mFtpClient.execPBSZ(0)\n                mFtpClient.execPROT(&quot;P&quot;)\n                mFtpClient.enterLocalPassiveMode()\n\nif (mFtpClient.login(loginFtp, pass)) {\n                    ftpClient = mFtpClient\n                } else {\n                    ftpClient = null\n                }\n</code></pre>\n<p>I used retriveFile instead retrieveFileStream but everytime missing around 2kb</p>\n"},{"tags":["java","swing","user-interface","game-development"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1691324440,"post_id":76845682,"comment_id":135473537,"body_markdown":"Look at where you set the JFrame visible. Then look at where you add components to it. It&#39;s not a good idea to render the GUI *before* setting it up . Having said that, you should avoid use of null layout and use of `setBounds(...)` for component placement as this makes for very inflexible GUI&#39;s that while they might look good on one platform look terrible on most other platforms or screen resolutions and that are very difficult to update and maintain.","body":"Look at where you set the JFrame visible. Then look at where you add components to it. It&#39;s not a good idea to render the GUI <i>before</i> setting it up . Having said that, you should avoid use of null layout and use of <code>setBounds(...)</code> for component placement as this makes for very inflexible GUI&#39;s that while they might look good on one platform look terrible on most other platforms or screen resolutions and that are very difficult to update and maintain."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691527996,"post_id":76845682,"comment_id":135503266,"body_markdown":"also, many Swing Components have a warning: &quot;**Warning:** Swing is not thread safe. For more information see [Swing&#39;s Threading Policy](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/package-summary.html#threading).&quot;, that means: new main()` -&gt; `SwingUtilities.invokeLater(main::new)`","body":"also, many Swing Components have a warning: &quot;<b>Warning:</b> Swing is not thread safe. For more information see <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/package-summary.html#threading\" rel=\"nofollow noreferrer\">Swing&#39;s Threading Policy</a>.&quot;, that means: new main()` -&gt; <code>SwingUtilities.invokeLater(main::new)</code>"}],"owner":{"account_id":29170604,"reputation":1,"user_id":22347061,"display_name":"Nathan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691321636,"answer_count":0,"score":0,"last_activity_date":1691524097,"creation_date":1691321403,"question_id":76845682,"body_markdown":"I am creating a pause screen for a 2048 game.I am just trying to add my Panels to a JFrame with different components on each panel, but none of the panels show on my laptop. However, on my friends laptop it runs just fine, they are no error messages when it runs.\r\n\r\nThis is what I have tried so far:\r\n\r\n```\r\n\r\n//@Author: Nathan\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.io.*;\r\n\r\n    public class main{\r\n\r\n        public main(){\r\n\r\n            //Creating Frame\r\n            JFrame mainFrame = new JFrame();\r\n            mainFrame.setResizable(false);\r\n            mainFrame.setTitle(&quot;Pause&quot;);\r\n            mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            mainFrame.setLayout(null);\r\n            mainFrame.setSize(600, 600);\r\n            mainFrame.setLocationRelativeTo(null);\r\n            mainFrame.setVisible(true);\r\n        \r\n\r\n            //Creating colour variables\r\n            Color c = new Color(223, 146, 97);\r\n\r\n            //Adding Panels\r\n            JPanel northPanel = new JPanel();\r\n            northPanel.setBackground(c);\r\n            northPanel.setBounds(0, 0,600, 50 );\r\n\r\n            JPanel upperPanel = new JPanel();\r\n            upperPanel.setBackground(c);\r\n            upperPanel.setBounds(0, 50, 200, 550);\r\n\r\n            JPanel centerPanel = new JPanel();\r\n            centerPanel.setBackground(c);\r\n            centerPanel.setBounds(0 , 50 , 300 ,550);\r\n\r\n          //Creating Icons for buttons\r\n            ImageIcon infoIcon = new ImageIcon(&quot;./Icons/info.png&quot;);\r\n            ImageIcon themeIcon = new ImageIcon(&quot;./Icons/paint.png&quot;);\r\n            ImageIcon volumeOn = new ImageIcon(&quot;./Icons/volume.png&quot;);\r\n            ImageIcon volumeOff =new ImageIcon(&quot;./Icons/volumeOff.png&quot;); \r\n        \r\n            //Creating Componenets\r\n\r\n            Font Titlefont = new Font(&quot;SansSerrif&quot;, Font.PLAIN, 20);\r\n        \r\n             JLabel pauseTitle = new JLabel(&quot;2048&quot;);\r\n             pauseTitle.setFont(Titlefont);\r\n\r\n             JButton themeButton = new JButton(themeIcon);\r\n             themeButton.setBackground(c);\r\n             themeButton.setForeground(Color.WHITE);\r\n         \r\n             JButton volumeButton = new JButton(volumeOn);\r\n             volumeButton.setBackground(c);\r\n \r\n             JButton infoButton = new JButton(infoIcon);\r\n             infoButton.setBackground(c);\r\n \r\n             JButton playButton = new JButton(&quot;PLAY&quot;);\r\n             JButton resetButton = new JButton(&quot;RESET&quot;);\r\n             JButton homeButton = new JButton(&quot;HOME&quot;);\r\n\r\n            //Adding panels to mainframe\r\n            mainFrame.add(northPanel);\r\n            mainFrame.add(upperPanel);\r\n            mainFrame.add(centerPanel); \r\n\r\n            //Adding Components to panels\r\n            northPanel.add(pauseTitle); \r\n\r\n            upperPanel.add(themeButton);\r\n            upperPanel.add(volumeButton);\r\n            upperPanel.add(infoButton);\r\n\r\n            centerPanel.add(playButton);\r\n            centerPanel.add(resetButton);\r\n            centerPanel.add(homeButton);\r\n \r\n        }\r\n\r\n        public static void main(String [] args){\r\n           new main();\r\n        }\r\n    }\r\n```\r\n\r\n","title":"JPanels not showing even though frame is visible","body":"<p>I am creating a pause screen for a 2048 game.I am just trying to add my Panels to a JFrame with different components on each panel, but none of the panels show on my laptop. However, on my friends laptop it runs just fine, they are no error messages when it runs.</p>\n<p>This is what I have tried so far:</p>\n<pre><code>\n//@Author: Nathan\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.io.*;\n\n    public class main{\n\n        public main(){\n\n            //Creating Frame\n            JFrame mainFrame = new JFrame();\n            mainFrame.setResizable(false);\n            mainFrame.setTitle(&quot;Pause&quot;);\n            mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            mainFrame.setLayout(null);\n            mainFrame.setSize(600, 600);\n            mainFrame.setLocationRelativeTo(null);\n            mainFrame.setVisible(true);\n        \n\n            //Creating colour variables\n            Color c = new Color(223, 146, 97);\n\n            //Adding Panels\n            JPanel northPanel = new JPanel();\n            northPanel.setBackground(c);\n            northPanel.setBounds(0, 0,600, 50 );\n\n            JPanel upperPanel = new JPanel();\n            upperPanel.setBackground(c);\n            upperPanel.setBounds(0, 50, 200, 550);\n\n            JPanel centerPanel = new JPanel();\n            centerPanel.setBackground(c);\n            centerPanel.setBounds(0 , 50 , 300 ,550);\n\n          //Creating Icons for buttons\n            ImageIcon infoIcon = new ImageIcon(&quot;./Icons/info.png&quot;);\n            ImageIcon themeIcon = new ImageIcon(&quot;./Icons/paint.png&quot;);\n            ImageIcon volumeOn = new ImageIcon(&quot;./Icons/volume.png&quot;);\n            ImageIcon volumeOff =new ImageIcon(&quot;./Icons/volumeOff.png&quot;); \n        \n            //Creating Componenets\n\n            Font Titlefont = new Font(&quot;SansSerrif&quot;, Font.PLAIN, 20);\n        \n             JLabel pauseTitle = new JLabel(&quot;2048&quot;);\n             pauseTitle.setFont(Titlefont);\n\n             JButton themeButton = new JButton(themeIcon);\n             themeButton.setBackground(c);\n             themeButton.setForeground(Color.WHITE);\n         \n             JButton volumeButton = new JButton(volumeOn);\n             volumeButton.setBackground(c);\n \n             JButton infoButton = new JButton(infoIcon);\n             infoButton.setBackground(c);\n \n             JButton playButton = new JButton(&quot;PLAY&quot;);\n             JButton resetButton = new JButton(&quot;RESET&quot;);\n             JButton homeButton = new JButton(&quot;HOME&quot;);\n\n            //Adding panels to mainframe\n            mainFrame.add(northPanel);\n            mainFrame.add(upperPanel);\n            mainFrame.add(centerPanel); \n\n            //Adding Components to panels\n            northPanel.add(pauseTitle); \n\n            upperPanel.add(themeButton);\n            upperPanel.add(volumeButton);\n            upperPanel.add(infoButton);\n\n            centerPanel.add(playButton);\n            centerPanel.add(resetButton);\n            centerPanel.add(homeButton);\n \n        }\n\n        public static void main(String [] args){\n           new main();\n        }\n    }\n</code></pre>\n"},{"tags":["java","sql","database","android-studio","delete-row"],"comments":[{"owner":{"account_id":534856,"reputation":5625,"user_id":904624,"accept_rate":81,"display_name":"Christine"},"score":0,"creation_date":1545745363,"post_id":53922844,"comment_id":94687522,"body_markdown":"What did you do to find the problem? Did you inspect the logcat? Did you try debugging? Did you try inserting log statements?","body":"What did you do to find the problem? Did you inspect the logcat? Did you try debugging? Did you try inserting log statements?"},{"owner":{"account_id":14662192,"reputation":1711,"user_id":10589041,"display_name":"Ishaan Javali"},"score":0,"creation_date":1545746404,"post_id":53922844,"comment_id":94687758,"body_markdown":"Shouldn&#39;t `adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.select_dialog_multichoice, myToDo);` and              `lv.setAdapter(adapter);` come outside of your `while` loop in `onCreate()`, once the `myToDo` ArrayList has all the values?","body":"Shouldn&#39;t <code>adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.select_dialog_multichoice, myToDo);</code> and              <code>lv.setAdapter(adapter);</code> come outside of your <code>while</code> loop in <code>onCreate()</code>, once the <code>myToDo</code> ArrayList has all the values?"},{"owner":{"account_id":10516438,"reputation":399,"user_id":7750399,"accept_rate":25,"display_name":"diem_L"},"score":0,"creation_date":1545747024,"post_id":53922844,"comment_id":94687882,"body_markdown":"@Ishaan unfortunately it still delets all todo&#39;s when i go back in","body":"@Ishaan unfortunately it still delets all todo&#39;s when i go back in"},{"owner":{"account_id":2195430,"reputation":10993,"user_id":1941241,"display_name":"rickdenhaan"},"score":1,"creation_date":1545747486,"post_id":53922844,"comment_id":94687975,"body_markdown":"Your `deleteSelectedRow` method doesn&#39;t do anything with `posCheck` and simply deletes everything from the table...","body":"Your <code>deleteSelectedRow</code> method doesn&#39;t do anything with <code>posCheck</code> and simply deletes everything from the table..."},{"owner":{"account_id":10516438,"reputation":399,"user_id":7750399,"accept_rate":25,"display_name":"diem_L"},"score":0,"creation_date":1545747829,"post_id":53922844,"comment_id":94688054,"body_markdown":"@rickdenhaan thanks for that information, so how do i have to change it, that it only delets the selected row?","body":"@rickdenhaan thanks for that information, so how do i have to change it, that it only delets the selected row?"},{"owner":{"account_id":2195430,"reputation":10993,"user_id":1941241,"display_name":"rickdenhaan"},"score":1,"creation_date":1545754588,"post_id":53922844,"comment_id":94689463,"body_markdown":"You need to add a condition to your query. Something like `DELETE FROM &quot; + TABLE_NAME + &quot; WHERE column = &quot; + posCheck.keyAt(0)` (depending on what your database column is named). I&#39;m not really a Java guy so I&#39;m not sure if that&#39;s how you get the selected item from `posCheck`, but since it&#39;s an array I assume you&#39;ll need to loop through it and execute a DELETE query for each selected value (I also just found [this caveat](https://ktatsiu.wordpress.com/2012/08/19/learning-android-how-to-use-getcheckeditempositions-of-listview/) from 2012, I don&#39;t know if that&#39;s still a thing).","body":"You need to add a condition to your query. Something like <code>DELETE FROM &quot; + TABLE_NAME + &quot; WHERE column = &quot; + posCheck.keyAt(0)</code> (depending on what your database column is named). I&#39;m not really a Java guy so I&#39;m not sure if that&#39;s how you get the selected item from <code>posCheck</code>, but since it&#39;s an array I assume you&#39;ll need to loop through it and execute a DELETE query for each selected value (I also just found <a href=\"https://ktatsiu.wordpress.com/2012/08/19/learning-android-how-to-use-getcheckeditempositions-of-listview/\" rel=\"nofollow noreferrer\">this caveat</a> from 2012, I don&#39;t know if that&#39;s still a thing)."}],"owner":{"account_id":10516438,"reputation":399,"user_id":7750399,"accept_rate":25,"display_name":"diem_L"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691523785,"creation_date":1545744741,"question_id":53922844,"body_markdown":"For my university, I have to create a ToDo-App. One specification is that you can delete the ToDo&#39;s which are done.\r\n\r\nSo I can go into the app and add for example 4 ToDo&#39;s. Then I delete two of them and close the app. After I go back to my app, all the ToDo&#39;s are deleted. \r\n\r\nIf I don&#39;t delete any ToDo&#39;s before closing the app, when I open it again, all the ToDo&#39;s are shown.\r\n\r\nHere is my code:\r\n\r\n\r\n    public class ToDoList extends AppCompatActivity {\r\n\r\n        ListView lv;\r\n        TextView tv;\r\n        Button addToDo, delToDo, delDoneToDo;\r\n        ArrayList&lt;String&gt; myToDo;\r\n        ArrayAdapter&lt;String&gt; adapter;\r\n        DataBaseToDo db2;\r\n\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_to_do_list);\r\n\r\n            db2 = new DataBaseToDo(this);\r\n    \r\n            lv = (ListView) findViewById(R.id.ToDoList);\r\n            tv = (TextView) findViewById(R.id.greeting);\r\n\r\n            myToDo = new ArrayList&lt;String&gt;();\r\n            Cursor data = db2.getListContents();\r\n\r\n            if(data.getCount() == 0){\r\n                Toast.makeText(getApplicationContext(), &quot;No ToDo&#39;s available&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                while (data.moveToNext()){\r\n                    myToDo.add(data.getString(1));\r\n                    adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.select_dialog_multichoice, myToDo);\r\n                    lv.setAdapter(adapter);\r\n                }\r\n            }\r\n        }\r\n    // With click on the Button i want to delete the selected Items:\r\n        public void deleteData(){\r\n            delDoneToDo.setOnClickListener(\r\n                    new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            SparseBooleanArray posCheck = lv.getCheckedItemPositions();\r\n                            int count = lv.getCount();\r\n                            for(int i=count-1; i&gt;=0; i--){\r\n                                if(posCheck.get(i)){\r\n                                    adapter.remove(myToDo.get(i));\r\n                                } else {\r\n                                    Toast.makeText(getApplicationContext(), &quot;No ToDo was selected&quot;, Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }\r\n                            adapter.notifyDataSetChanged();\r\n                            myDBH.deleteToDo(posCheck);\r\n                            Toast.makeText(ToDoList.this, &quot;To Do Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n            );\r\n        }\r\n    }\r\n\r\nThis is my DataBase code:\r\n\r\n    package com.vorlesung.iubh.mytodo;\r\n\r\n    import android.content.ContentValues;\r\n    import android.content.Context;\r\n    import android.database.Cursor;\r\n    import android.database.sqlite.SQLiteDatabase;\r\n    import android.database.sqlite.SQLiteOpenHelper;\r\n    import android.util.SparseBooleanArray;\r\n\r\n    public class DatabaseHelper extends SQLiteOpenHelper {\r\n\r\n        public static final String DATABASE_NAME = &quot;ToDo.db&quot;;\r\n        public static final String TABLE_NAME = &quot;todo_table&quot;;\r\n        public static final String Col1 = &quot;ID&quot;;\r\n        public static final String Col2 = &quot;ToDo_Title&quot;;\r\n        public static final String Col3 = &quot;Due_Date&quot;;\r\n        public static final String Col4 = &quot;Description&quot;;\r\n\r\n        public DatabaseHelper (Context context) {\r\n            super(context, DATABASE_NAME, null, 1);\r\n        }\r\n\r\n        @Override\r\n        public void onCreate(SQLiteDatabase db){\r\n            db.execSQL(&quot;CREATE TABLE &quot; + TABLE_NAME + &quot;(ID INTEGER PRIMARY KEY AUTOINCREMENT, ToDo_Title TEXT, Due_Date INTEGER, Description TEXT)&quot;);\r\n        }\r\n\r\n        @Override\r\n        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n            db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\r\n            onCreate(db);\r\n        }\r\n\r\n        public boolean insertData (String ToDo_Title, String Due_Date, String Description) {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues contentValues = new ContentValues();\r\n            contentValues.put(Col2, ToDo_Title);\r\n            contentValues.put(Col3, Due_Date);\r\n            contentValues.put(Col4, Description);\r\n\r\n            long result = db.insert(TABLE_NAME, null, contentValues);\r\n            if(result == -1){\r\n                db.close();\r\n                return false;\r\n            }\r\n\r\n            else {\r\n                db.close();\r\n                return true;\r\n            }\r\n        }\r\n\r\n        public Cursor getListContents(){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            Cursor data = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_NAME, null);\r\n            return data;\r\n        }\r\n\r\n        public void deleteAll() {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            db.execSQL(&quot;delete from &quot;+ TABLE_NAME);\r\n            db.close();\r\n        }\r\n\r\n        // I changes this part, but now there is a new problem .. see EDIT:\r\n        public void deleteToDo(SparseBooleanArray posCheck) {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            db.execSQL(&quot;DELETE FROM &quot; + TABLE_NAME + &quot; WHERE ID =  &quot; + posCheck.keyAt(0));\r\n            db.close();\r\n        }\r\n    }\r\n\r\nEdit\r\n---\r\n\r\nI changed my code a little bit, but now the problem is, that it doesn&#39;t delete any selected row from my DataBase.\r\n","title":"Android Studio - Why is everything deleted?","body":"<p>For my university, I have to create a ToDo-App. One specification is that you can delete the ToDo's which are done.</p>\n<p>So I can go into the app and add for example 4 ToDo's. Then I delete two of them and close the app. After I go back to my app, all the ToDo's are deleted.</p>\n<p>If I don't delete any ToDo's before closing the app, when I open it again, all the ToDo's are shown.</p>\n<p>Here is my code:</p>\n<pre><code>public class ToDoList extends AppCompatActivity {\n\n    ListView lv;\n    TextView tv;\n    Button addToDo, delToDo, delDoneToDo;\n    ArrayList&lt;String&gt; myToDo;\n    ArrayAdapter&lt;String&gt; adapter;\n    DataBaseToDo db2;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_to_do_list);\n\n        db2 = new DataBaseToDo(this);\n\n        lv = (ListView) findViewById(R.id.ToDoList);\n        tv = (TextView) findViewById(R.id.greeting);\n\n        myToDo = new ArrayList&lt;String&gt;();\n        Cursor data = db2.getListContents();\n\n        if(data.getCount() == 0){\n            Toast.makeText(getApplicationContext(), &quot;No ToDo's available&quot;, Toast.LENGTH_SHORT).show();\n        } else {\n            while (data.moveToNext()){\n                myToDo.add(data.getString(1));\n                adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.select_dialog_multichoice, myToDo);\n                lv.setAdapter(adapter);\n            }\n        }\n    }\n// With click on the Button i want to delete the selected Items:\n    public void deleteData(){\n        delDoneToDo.setOnClickListener(\n                new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {\n                        SparseBooleanArray posCheck = lv.getCheckedItemPositions();\n                        int count = lv.getCount();\n                        for(int i=count-1; i&gt;=0; i--){\n                            if(posCheck.get(i)){\n                                adapter.remove(myToDo.get(i));\n                            } else {\n                                Toast.makeText(getApplicationContext(), &quot;No ToDo was selected&quot;, Toast.LENGTH_SHORT).show();\n                            }\n                        }\n                        adapter.notifyDataSetChanged();\n                        myDBH.deleteToDo(posCheck);\n                        Toast.makeText(ToDoList.this, &quot;To Do Deleted&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }\n        );\n    }\n}\n</code></pre>\n<p>This is my DataBase code:</p>\n<pre><code>package com.vorlesung.iubh.mytodo;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.util.SparseBooleanArray;\n\npublic class DatabaseHelper extends SQLiteOpenHelper {\n\n    public static final String DATABASE_NAME = &quot;ToDo.db&quot;;\n    public static final String TABLE_NAME = &quot;todo_table&quot;;\n    public static final String Col1 = &quot;ID&quot;;\n    public static final String Col2 = &quot;ToDo_Title&quot;;\n    public static final String Col3 = &quot;Due_Date&quot;;\n    public static final String Col4 = &quot;Description&quot;;\n\n    public DatabaseHelper (Context context) {\n        super(context, DATABASE_NAME, null, 1);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db){\n        db.execSQL(&quot;CREATE TABLE &quot; + TABLE_NAME + &quot;(ID INTEGER PRIMARY KEY AUTOINCREMENT, ToDo_Title TEXT, Due_Date INTEGER, Description TEXT)&quot;);\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\n        onCreate(db);\n    }\n\n    public boolean insertData (String ToDo_Title, String Due_Date, String Description) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues contentValues = new ContentValues();\n        contentValues.put(Col2, ToDo_Title);\n        contentValues.put(Col3, Due_Date);\n        contentValues.put(Col4, Description);\n\n        long result = db.insert(TABLE_NAME, null, contentValues);\n        if(result == -1){\n            db.close();\n            return false;\n        }\n\n        else {\n            db.close();\n            return true;\n        }\n    }\n\n    public Cursor getListContents(){\n        SQLiteDatabase db = this.getWritableDatabase();\n        Cursor data = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_NAME, null);\n        return data;\n    }\n\n    public void deleteAll() {\n        SQLiteDatabase db = this.getWritableDatabase();\n        db.execSQL(&quot;delete from &quot;+ TABLE_NAME);\n        db.close();\n    }\n\n    // I changes this part, but now there is a new problem .. see EDIT:\n    public void deleteToDo(SparseBooleanArray posCheck) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        db.execSQL(&quot;DELETE FROM &quot; + TABLE_NAME + &quot; WHERE ID =  &quot; + posCheck.keyAt(0));\n        db.close();\n    }\n}\n</code></pre>\n<h2>Edit</h2>\n<p>I changed my code a little bit, but now the problem is, that it doesn't delete any selected row from my DataBase.</p>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"owner":{"account_id":18592411,"reputation":103,"user_id":13549310,"display_name":"Henrique Vital"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691522531,"creation_date":1691522531,"question_id":76862642,"body_markdown":"In the following code, I receive an chunck of 1000 Person entities and I want to dynamically generate files based on the count of the entity received and append data to these files, How can I do this?\r\n\r\n    private static final Date now = new Date();\r\n    \r\n    private String[] headerFields {&quot;name&quot;,&quot;country&quot;}\r\n\r\n    @Bean\r\n    @StepScope\r\n    public FlatFileItemWriter&lt;Person&gt; test(){\r\n        return new FlatFileItemWriterBuilder&lt;Person&gt;\r\n        .name(&quot;generatePersonWriter&quot;)\r\n        .headerCallBack(fileWriter -&gt; fileleWriter.writer(&quot;name,country&quot;))\r\n        .rsourve(new FileSystemResource(&quot;output/person_{{country}}_10.csv&quot;))\r\n        .append(true)\r\n        .delimited()\r\n        .names(headerFields)\r\n        .build;\r\n    }\r\n\r\n\r\nExample of expected file output name:\r\n\r\n&quot;output/person_France_10.csv&quot;","title":"How to create dynamically files names by using the entity fields?","body":"<p>In the following code, I receive an chunck of 1000 Person entities and I want to dynamically generate files based on the count of the entity received and append data to these files, How can I do this?</p>\n<pre><code>private static final Date now = new Date();\n\nprivate String[] headerFields {&quot;name&quot;,&quot;country&quot;}\n\n@Bean\n@StepScope\npublic FlatFileItemWriter&lt;Person&gt; test(){\n    return new FlatFileItemWriterBuilder&lt;Person&gt;\n    .name(&quot;generatePersonWriter&quot;)\n    .headerCallBack(fileWriter -&gt; fileleWriter.writer(&quot;name,country&quot;))\n    .rsourve(new FileSystemResource(&quot;output/person_{{country}}_10.csv&quot;))\n    .append(true)\n    .delimited()\n    .names(headerFields)\n    .build;\n}\n</code></pre>\n<p>Example of expected file output name:</p>\n<p>&quot;output/person_France_10.csv&quot;</p>\n"},{"tags":["java","algorithm","data-structures","hashmap"],"comments":[{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":3,"creation_date":1691506241,"post_id":76860677,"comment_id":135499232,"body_markdown":"&quot;I have solved ... one is not giving correct result. [...] Solution 2: Incorrect&quot;: just about terminology: a &quot;solution&quot;, solves. If it doesn&#39;t produce correct results, it is not a solution.","body":"&quot;I have solved ... one is not giving correct result. [...] Solution 2: Incorrect&quot;: just about terminology: a &quot;solution&quot;, solves. If it doesn&#39;t produce correct results, it is not a solution."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1691506635,"post_id":76860677,"comment_id":135499326,"body_markdown":"Well, &quot;similar&quot; is pretty broad term. I would recommend starting by reading the documentation of the getOrDefault method: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#getOrDefault(java.lang.Object,V) - The documentation says nothing about that this method will modify the map and add the key with the default value if it isn&#39;t in the map yet.","body":"Well, &quot;similar&quot; is pretty broad term. I would recommend starting by reading the documentation of the getOrDefault method: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#getOrDefault(java.lang.Object,V)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a> - The documentation says nothing about that this method will modify the map and add the key with the default value if it isn&#39;t in the map yet."}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691506445,"creation_date":1691506445,"answer_id":76860743,"question_id":76860677,"body_markdown":"In Solution 1, when you create a new entry in the HashMap using `hm.put(cannonical,new LinkedList&lt;String&gt;()) `, you ensure that if the `cannonical` key doesn&#39;t exist in the HashMap, a new LinkedList is created and associated with that key. \r\n\r\nThis way, when you later call `hm.get(cannonical).add(st)`, you are sure that there is a List&lt;String&gt; associated with the `cannonical` key, and you **can safely add the current string `st` to that list**.\r\n\r\nIn Solution 2, the incorrect part is here:\r\n\r\n```java\r\nhm.getOrDefault(cannonical, new LinkedList&lt;String&gt;()).add(st);\r\n```\r\n\r\nThe `getOrDefault` method will return either the existing list associated with the `cannonical` key or the newly created list, but this newly created list is never actually put into the HashMap. So, even though you correctly retrieve the list, **you&#39;re modifying a list that&#39;s not associated with any key in the HashMap**. \r\n\r\nThe correct version would be:\r\n\r\n```java\r\nhm.putIfAbsent(cannonical, new LinkedList&lt;String&gt;());\r\nhm.get(cannonical).add(st);\r\n```\r\n\r\nHere, `putIfAbsent` ensures that a list is associated with the `cannonical` key, and then **you can safely add the current string to that list**.","title":"I have solved the GROUP ANAGRAM question in leetcode in two ways.Why one of them is not giving correct result whereas the other one is returing null?","body":"<p>In Solution 1, when you create a new entry in the HashMap using <code>hm.put(cannonical,new LinkedList&lt;String&gt;()) </code>, you ensure that if the <code>cannonical</code> key doesn't exist in the HashMap, a new LinkedList is created and associated with that key.</p>\n<p>This way, when you later call <code>hm.get(cannonical).add(st)</code>, you are sure that there is a List associated with the <code>cannonical</code> key, and you <strong>can safely add the current string <code>st</code> to that list</strong>.</p>\n<p>In Solution 2, the incorrect part is here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>hm.getOrDefault(cannonical, new LinkedList&lt;String&gt;()).add(st);\n</code></pre>\n<p>The <code>getOrDefault</code> method will return either the existing list associated with the <code>cannonical</code> key or the newly created list, but this newly created list is never actually put into the HashMap. So, even though you correctly retrieve the list, <strong>you're modifying a list that's not associated with any key in the HashMap</strong>.</p>\n<p>The correct version would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>hm.putIfAbsent(cannonical, new LinkedList&lt;String&gt;());\nhm.get(cannonical).add(st);\n</code></pre>\n<p>Here, <code>putIfAbsent</code> ensures that a list is associated with the <code>cannonical</code> key, and then <strong>you can safely add the current string to that list</strong>.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691522504,"creation_date":1691521002,"answer_id":76862470,"question_id":76860677,"body_markdown":"This is the problem.\r\n```\r\n hm.getOrDefault(cannonical,new LinkedList&lt;String&gt;()).add(st);\r\n```\r\nThere is no key so you are trying to add a value to a list that isn&#39;t mapped.\r\n\r\nReplace it with\r\n```\r\nhm.computeIfAbsent(cannonical, v-&gt; new LinkedList&lt;&gt;()).add(st);\r\n```\r\nThe above says, if `cannonical` is not present, create a value for it, and return that value, in this case a list.  Then you can add the string to the list.\r\n`\r\n","title":"I have solved the GROUP ANAGRAM question in leetcode in two ways.Why one of them is not giving correct result whereas the other one is returing null?","body":"<p>This is the problem.</p>\n<pre><code> hm.getOrDefault(cannonical,new LinkedList&lt;String&gt;()).add(st);\n</code></pre>\n<p>There is no key so you are trying to add a value to a list that isn't mapped.</p>\n<p>Replace it with</p>\n<pre><code>hm.computeIfAbsent(cannonical, v-&gt; new LinkedList&lt;&gt;()).add(st);\n</code></pre>\n<p>The above says, if <code>cannonical</code> is not present, create a value for it, and return that value, in this case a list.  Then you can add the string to the list.\n`</p>\n"}],"owner":{"account_id":24123066,"reputation":21,"user_id":18091881,"display_name":"Paurab Bhattacharjee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1691698650,"answer_count":2,"score":-2,"last_activity_date":1691522504,"creation_date":1691505921,"question_id":76860677,"body_markdown":"Given an array of strings strs, group the anagrams together. You can return the answer in any order.\r\n\r\nSolution 1:the correct one:\r\n\r\n    public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) {\r\n            HashMap&lt;String,List&lt;String&gt;&gt; hm=new HashMap&lt;&gt;();   \r\n            \r\n            for(String st:strs){\r\n                char[] arr=st.toCharArray();\r\n                Arrays.sort(arr);\r\n                String cannonical=new String(arr);\r\n                if(!hm.containsKey(cannonical)){\r\n                    hm.put(cannonical,new LinkedList&lt;String&gt;());\r\n                }\r\n                \r\n                hm.get(cannonical).add(st);\r\n            }\r\n           \r\n            return new LinkedList&lt;&gt;(hm.values());\r\n        }\r\n\r\nSolution 2:Incorrect :\r\n\r\n    public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) {\r\n            HashMap&lt;String,List&lt;String&gt;&gt; hm=new HashMap&lt;&gt;();   \r\n            \r\n            for(String st:strs){\r\n                char[] arr=st.toCharArray();\r\n                Arrays.sort(arr);\r\n                String cannonical=new String(arr);\r\n                \r\n                 hm.getOrDefault(cannonical,new LinkedList&lt;String&gt;()).add(st);\r\n                \r\n            }\r\n            return new LinkedList&lt;&gt;(hm.values());\r\n        }\r\n\r\nwhy soln 2 is not working when both the codes are very similar\r\n","title":"I have solved the GROUP ANAGRAM question in leetcode in two ways.Why one of them is not giving correct result whereas the other one is returing null?","body":"<p>Given an array of strings strs, group the anagrams together. You can return the answer in any order.</p>\n<p>Solution 1:the correct one:</p>\n<pre><code>public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) {\n        HashMap&lt;String,List&lt;String&gt;&gt; hm=new HashMap&lt;&gt;();   \n        \n        for(String st:strs){\n            char[] arr=st.toCharArray();\n            Arrays.sort(arr);\n            String cannonical=new String(arr);\n            if(!hm.containsKey(cannonical)){\n                hm.put(cannonical,new LinkedList&lt;String&gt;());\n            }\n            \n            hm.get(cannonical).add(st);\n        }\n       \n        return new LinkedList&lt;&gt;(hm.values());\n    }\n</code></pre>\n<p>Solution 2:Incorrect :</p>\n<pre><code>public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) {\n        HashMap&lt;String,List&lt;String&gt;&gt; hm=new HashMap&lt;&gt;();   \n        \n        for(String st:strs){\n            char[] arr=st.toCharArray();\n            Arrays.sort(arr);\n            String cannonical=new String(arr);\n            \n             hm.getOrDefault(cannonical,new LinkedList&lt;String&gt;()).add(st);\n            \n        }\n        return new LinkedList&lt;&gt;(hm.values());\n    }\n</code></pre>\n<p>why soln 2 is not working when both the codes are very similar</p>\n"},{"tags":["java","spring-boot","websocket","sockjs"],"owner":{"account_id":21481623,"reputation":1446,"user_id":15828895,"display_name":"plutownium"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691522360,"creation_date":1680632021,"question_id":75932577,"body_markdown":"First I want to tell you about a bunch of tutorials that don&#39;t work:\r\n\r\n[Using WebSocket to build an interactive web application][1]\r\n\r\n[Getting Started with Spring WebSockets in Java][2]\r\n\r\n[Spring Boot WebSocket STOMP SockJS Example][3]\r\n\r\n[Intro to WebSockets with Spring][4]\r\n\r\nThese tutorials say things like:\r\n\r\n`   var socket = new SockJS(&#39;/chat&#39;);`\r\n\r\n`var socket = new SockJS(&#39;/ws&#39;);`\r\n\r\n`var socket = new SockJS(&#39;/gs-guide-websocket&#39;);`\r\n\r\n`let sock = new SockJS(&quot;http://localhost:8080/stomp&quot;);`\r\n\r\nMy impression is that, if there is no &quot;localhost&quot;, then it&#39;s trying to connect on the same domain. Meaning the frontend in `/chat`, `/ws` etc are on `localhost:8080` and so is the backend server. But that doesn&#39;t work for me because my frontend is `localhost:5173` and my backend is `localhost:8080` so I have to tell it where to go. I confirm my suspicion because I get `GET http://localhost:5173/stomp/info?t=1680631128497 404` when I put `var socket = new SockJS(&#39;/stomp&#39;);`. So at least I know a bit of my code is right.\r\n\r\nI don&#39;t know what my expected result is, because (1) I am new to websockets (2) I am new to Spring Boot and (3) I am new to SockJS. But I want one of my log statements to be triggered so I know the code was reached, or for a message sent from the backend to be logged on the client, or vice versa.\r\n\r\nMy actual result is that I get: `GET http://localhost:8080/stomp/info?t=1680630627152 404`\r\n\r\nThis failure message makes me think I need a `/stomp/info` endpoint. Yet none of the tutorials mention a `/info` endpoint. So I don&#39;t need one, or else they&#39;d all say that.\r\n\r\nHere is my frontend code: \r\n```\r\n  import Stomp from &quot;stompjs&quot;;\r\n\r\n            function connect() {\r\n                var socket = new SockJS(&#39;http://localhost:8080/stomp&#39;);\r\n                // the code fails around here\r\n                stompClient = Stomp.over(socket);  \r\n                stompClient.connect({}, function(frame) {\r\n                    setConnected(true);\r\n                    console.log(&#39;Connected: &#39; + frame);\r\n                    stompClient.subscribe(&#39;/topic/messages&#39;, function(messageOutput) {\r\n                        showMessageOutput(JSON.parse(messageOutput.body));\r\n                    });\r\n                });\r\n            }\r\n\r\n// later...\r\n&lt;svelte:head&gt;\r\n    &lt;title&gt;Chat WebSocket&lt;/title&gt;\r\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js&quot;&gt;&lt;/script&gt;\r\n        &lt;!-- &lt;script src=&quot;resources/js/stomp.js&quot;&gt;&lt;/script&gt; --&gt;\r\n&lt;/svelte:head&gt;\r\n```\r\nThen in Spring Boot:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n  @Override\r\n  public void configureMessageBroker(MessageBrokerRegistry config) {\r\n    config.enableSimpleBroker(&quot;/topic&quot;);\r\n    config.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n  }\r\n\r\n  @Override\r\n  public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n   \r\n      registry.addEndpoint(&quot;/stomp&quot;)\r\n        .setAllowedOrigins(&quot;http://localhost:5173&quot;).withSockJS();\r\n  }\r\n\r\n}\r\n```\r\nThe chat controller:\r\n```\r\n@Controller\r\npublic class ChatController {\r\n\r\n    @MessageMapping(&quot;/cat&quot;)\r\n    @SendTo(&quot;/topic/public&quot;)\r\n    public ChatMessage hatResponse(@Payload final ChatMessage chat) {\r\n        System.out.println(&quot;hat&quot;);\r\n        return chat;\r\n    }\r\n}\r\n```\r\nHere&#39;s another bunch of ways to use SockJS that don&#39;t work:\r\n\r\n\r\n`/app/chat`: `var socket = new SockJS(&#39;http://localhost:8080/app/cat&#39;);` gives `GET http://localhost:8080/app/cat/info?t=1680631745245 404`\r\n\r\n`/app/stomp`: `var socket = new SockJS(&#39;http://localhost:8080/app/stomp&#39;);` gives `GET http://localhost:5173/stomp/info?t=1680631712894 404`\r\n\r\n`/stomp`: `var socket = new SockJS(&#39;http://localhost:8080/stomp&#39;);` gives `GET http://localhost:5173/stomp/info?t=1680631676987 404`\r\n\r\n`/cat`: `var socket = new SockJS(&#39;http://localhost:8080/cat&#39;);` gives `GET http://localhost:8080/cat/info?t=1680631770418 404`\r\n\r\nnone of the tutorials mention a /info endpoint. If the /info endpoint is a requirement, why don&#39;t the tutorials mention it? Four in a row establishes a strong pattern. So it obviously isn&#39;t this.\r\n\r\nI don&#39;t know what to do. Java, Spring Boot, and Websockets are all new to me, so this is a lot to chew all at once.\r\n\r\nEdit: more research\r\n\r\n[Spring boot Websocket without SockJS][5] says:\r\n\r\n&quot;If someone wants to use SockJS client to connect, they can connect using...\r\n```\r\nvar socket = new SockJS(&#39;http://localhost:8080/test&#39;);\r\nstompClient = Stomp.over(socket);\r\n```\r\n&quot;\r\n\r\nThis means the problem must be elsewhere in my code, since the poster was doing it the way I do. But where to look for the problem?\r\n\r\nedit apr 16 2023: Here are some research links I found\r\n\r\nhttps://stackoverflow.com/questions/66556191/webpack-dev-server-sockjs-node-returns-404-error\r\n\r\nhttps://stackoverflow.com/questions/45138738/sockjs-info-404-error\r\n\r\nhttps://stackoverflow.com/questions/53012885/sockjs-node-info-404-not-found\r\n\r\nI think these links don&#39;t help me with the spring boot side of the equation.\r\n\r\n2nd edit apr 16 2023: here&#39;s a link that does help!\r\n\r\nhttps://stackoverflow.com/questions/21883033/spring-websocket-and-404-status-on-connection\r\n\r\n  [1]: https://spring.io/guides/gs/messaging-stomp-websocket/\r\n  [2]: https://www.section.io/engineering-education/getting-started-with-spring-websockets/\r\n  [3]: https://www.javaguides.net/2019/06/spring-boot-websocket-stomp-sockjs-example.html\r\n  [4]: https://www.baeldung.com/websockets-spring\r\n  [5]: https://stackoverflow.com/questions/67920378/spring-boot-websocket-without-sockjs","title":"How do I connect my SockJS client to my Spring Boot websocket endpoint?","body":"<p>First I want to tell you about a bunch of tutorials that don't work:</p>\n<p><a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\" rel=\"nofollow noreferrer\">Using WebSocket to build an interactive web application</a></p>\n<p><a href=\"https://www.section.io/engineering-education/getting-started-with-spring-websockets/\" rel=\"nofollow noreferrer\">Getting Started with Spring WebSockets in Java</a></p>\n<p><a href=\"https://www.javaguides.net/2019/06/spring-boot-websocket-stomp-sockjs-example.html\" rel=\"nofollow noreferrer\">Spring Boot WebSocket STOMP SockJS Example</a></p>\n<p><a href=\"https://www.baeldung.com/websockets-spring\" rel=\"nofollow noreferrer\">Intro to WebSockets with Spring</a></p>\n<p>These tutorials say things like:</p>\n<p><code>   var socket = new SockJS('/chat');</code></p>\n<p><code>var socket = new SockJS('/ws');</code></p>\n<p><code>var socket = new SockJS('/gs-guide-websocket');</code></p>\n<p><code>let sock = new SockJS(&quot;http://localhost:8080/stomp&quot;);</code></p>\n<p>My impression is that, if there is no &quot;localhost&quot;, then it's trying to connect on the same domain. Meaning the frontend in <code>/chat</code>, <code>/ws</code> etc are on <code>localhost:8080</code> and so is the backend server. But that doesn't work for me because my frontend is <code>localhost:5173</code> and my backend is <code>localhost:8080</code> so I have to tell it where to go. I confirm my suspicion because I get <code>GET http://localhost:5173/stomp/info?t=1680631128497 404</code> when I put <code>var socket = new SockJS('/stomp');</code>. So at least I know a bit of my code is right.</p>\n<p>I don't know what my expected result is, because (1) I am new to websockets (2) I am new to Spring Boot and (3) I am new to SockJS. But I want one of my log statements to be triggered so I know the code was reached, or for a message sent from the backend to be logged on the client, or vice versa.</p>\n<p>My actual result is that I get: <code>GET http://localhost:8080/stomp/info?t=1680630627152 404</code></p>\n<p>This failure message makes me think I need a <code>/stomp/info</code> endpoint. Yet none of the tutorials mention a <code>/info</code> endpoint. So I don't need one, or else they'd all say that.</p>\n<p>Here is my frontend code:</p>\n<pre><code>  import Stomp from &quot;stompjs&quot;;\n\n            function connect() {\n                var socket = new SockJS('http://localhost:8080/stomp');\n                // the code fails around here\n                stompClient = Stomp.over(socket);  \n                stompClient.connect({}, function(frame) {\n                    setConnected(true);\n                    console.log('Connected: ' + frame);\n                    stompClient.subscribe('/topic/messages', function(messageOutput) {\n                        showMessageOutput(JSON.parse(messageOutput.body));\n                    });\n                });\n            }\n\n// later...\n&lt;svelte:head&gt;\n    &lt;title&gt;Chat WebSocket&lt;/title&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js&quot;&gt;&lt;/script&gt;\n        &lt;!-- &lt;script src=&quot;resources/js/stomp.js&quot;&gt;&lt;/script&gt; --&gt;\n&lt;/svelte:head&gt;\n</code></pre>\n<p>Then in Spring Boot:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n  @Override\n  public void configureMessageBroker(MessageBrokerRegistry config) {\n    config.enableSimpleBroker(&quot;/topic&quot;);\n    config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n  }\n\n  @Override\n  public void registerStompEndpoints(StompEndpointRegistry registry) {\n   \n      registry.addEndpoint(&quot;/stomp&quot;)\n        .setAllowedOrigins(&quot;http://localhost:5173&quot;).withSockJS();\n  }\n\n}\n</code></pre>\n<p>The chat controller:</p>\n<pre><code>@Controller\npublic class ChatController {\n\n    @MessageMapping(&quot;/cat&quot;)\n    @SendTo(&quot;/topic/public&quot;)\n    public ChatMessage hatResponse(@Payload final ChatMessage chat) {\n        System.out.println(&quot;hat&quot;);\n        return chat;\n    }\n}\n</code></pre>\n<p>Here's another bunch of ways to use SockJS that don't work:</p>\n<p><code>/app/chat</code>: <code>var socket = new SockJS('http://localhost:8080/app/cat');</code> gives <code>GET http://localhost:8080/app/cat/info?t=1680631745245 404</code></p>\n<p><code>/app/stomp</code>: <code>var socket = new SockJS('http://localhost:8080/app/stomp');</code> gives <code>GET http://localhost:5173/stomp/info?t=1680631712894 404</code></p>\n<p><code>/stomp</code>: <code>var socket = new SockJS('http://localhost:8080/stomp');</code> gives <code>GET http://localhost:5173/stomp/info?t=1680631676987 404</code></p>\n<p><code>/cat</code>: <code>var socket = new SockJS('http://localhost:8080/cat');</code> gives <code>GET http://localhost:8080/cat/info?t=1680631770418 404</code></p>\n<p>none of the tutorials mention a /info endpoint. If the /info endpoint is a requirement, why don't the tutorials mention it? Four in a row establishes a strong pattern. So it obviously isn't this.</p>\n<p>I don't know what to do. Java, Spring Boot, and Websockets are all new to me, so this is a lot to chew all at once.</p>\n<p>Edit: more research</p>\n<p><a href=\"https://stackoverflow.com/questions/67920378/spring-boot-websocket-without-sockjs\">Spring boot Websocket without SockJS</a> says:</p>\n<p>&quot;If someone wants to use SockJS client to connect, they can connect using...</p>\n<pre><code>var socket = new SockJS('http://localhost:8080/test');\nstompClient = Stomp.over(socket);\n</code></pre>\n<p>&quot;</p>\n<p>This means the problem must be elsewhere in my code, since the poster was doing it the way I do. But where to look for the problem?</p>\n<p>edit apr 16 2023: Here are some research links I found</p>\n<p><a href=\"https://stackoverflow.com/questions/66556191/webpack-dev-server-sockjs-node-returns-404-error\">Webpack dev server sockjs-node returns 404 error</a></p>\n<p><a href=\"https://stackoverflow.com/questions/45138738/sockjs-info-404-error\">sockjs info 404 error</a></p>\n<p><a href=\"https://stackoverflow.com/questions/53012885/sockjs-node-info-404-not-found\">sockjs-node/info? 404 (Not Found)</a></p>\n<p>I think these links don't help me with the spring boot side of the equation.</p>\n<p>2nd edit apr 16 2023: here's a link that does help!</p>\n<p><a href=\"https://stackoverflow.com/questions/21883033/spring-websocket-and-404-status-on-connection\">Spring Websocket and 404 status on connection</a></p>\n"},{"tags":["java","oauth-2.0","java-ee-8","forgerock","pac4j"],"answers":[{"tags":[],"owner":{"account_id":4817451,"reputation":403,"user_id":3889142,"display_name":"Jonas Heinisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691522189,"creation_date":1691522189,"answer_id":76862612,"question_id":76855012,"body_markdown":"In OAuth2 words, your application is the Client and you are trying to obtain a Resource (some data) on behalf of the user from the Resource Server (API). The Access Token is proofing that the user allowed this access.\r\n\r\nWhat you typically do is pass the access token as a Bearer token to the API (cf. https://www.oauth.com/oauth2-servers/accessing-data/making-api-requests/).\r\n\r\nWhat the Resource Server then needs to do is verify the token (cf. https://www.oauth.com/oauth2-servers/the-resource-server/). It depends on the configuration of ForgeRock AM, how the access token is configured to look like. Most likely it is probably a referencial token (i.e. no signed JWT containing the content of the token). That means the token needs to be send to the ForgeRock AM Token Introspection API (cf. https://backstage.forgerock.com/docs/am/7/oauth2-guide/varlist-oauth2-introspect-endpoint.html):\r\n\r\n    $ curl \\\r\n    --request POST \\\r\n    --header &quot;Authorization: Basic ZGVtbzpDaDRuZzMxdA==&quot; \\\r\n    --data &quot;token=f9063e26-3a29-41ec-86de-1d0d68aa85e9&quot; \\\r\n    &quot;https://openam.example.com:8443/openam/oauth2/introspect&quot;\r\n    {\r\n        &quot;active&quot;: true,\r\n        &quot;scope&quot;: &quot;write&quot;,\r\n        &quot;client_id&quot;: &quot;myClient&quot;,\r\n        &quot;user_id&quot;: &quot;demo&quot;,\r\n        &quot;username&quot;: &quot;demo&quot;,\r\n        &quot;token_type&quot;: &quot;Bearer&quot;,\r\n        &quot;exp&quot;: 1419356238,\r\n        &quot;sub&quot;: &quot;demo&quot;,\r\n        &quot;iss&quot;: &quot;https://openam.example.com:8443/openam/oauth2&quot;\r\n        &quot;cnf&quot;: {\r\n            &quot;jwk&quot;: {\r\n                &quot;alg&quot;: &quot;RS512&quot;,\r\n                &quot;e&quot;: &quot;AQAB&quot;,\r\n                &quot;n&quot;: &quot;k7qLlj...G2oucQ&quot;,\r\n                &quot;kty&quot;: &quot;RSA&quot;,\r\n                &quot;use&quot;: &quot;sig&quot;,\r\n                &quot;kid&quot;: &quot;myJWK&quot;\r\n            },\r\n        &quot;auth_level&quot;: 0\r\n        }\r\n    }\r\n\r\nThe resulting body is giving the content of the token. Based on the content the Resource Server can decide if the client is authorized to access the information.","title":"Pac4J: Custom ForgeRock OAuth2 with UI and API","body":"<p>In OAuth2 words, your application is the Client and you are trying to obtain a Resource (some data) on behalf of the user from the Resource Server (API). The Access Token is proofing that the user allowed this access.</p>\n<p>What you typically do is pass the access token as a Bearer token to the API (cf. <a href=\"https://www.oauth.com/oauth2-servers/accessing-data/making-api-requests/\" rel=\"nofollow noreferrer\">https://www.oauth.com/oauth2-servers/accessing-data/making-api-requests/</a>).</p>\n<p>What the Resource Server then needs to do is verify the token (cf. <a href=\"https://www.oauth.com/oauth2-servers/the-resource-server/\" rel=\"nofollow noreferrer\">https://www.oauth.com/oauth2-servers/the-resource-server/</a>). It depends on the configuration of ForgeRock AM, how the access token is configured to look like. Most likely it is probably a referencial token (i.e. no signed JWT containing the content of the token). That means the token needs to be send to the ForgeRock AM Token Introspection API (cf. <a href=\"https://backstage.forgerock.com/docs/am/7/oauth2-guide/varlist-oauth2-introspect-endpoint.html\" rel=\"nofollow noreferrer\">https://backstage.forgerock.com/docs/am/7/oauth2-guide/varlist-oauth2-introspect-endpoint.html</a>):</p>\n<pre><code>$ curl \\\n--request POST \\\n--header &quot;Authorization: Basic ZGVtbzpDaDRuZzMxdA==&quot; \\\n--data &quot;token=f9063e26-3a29-41ec-86de-1d0d68aa85e9&quot; \\\n&quot;https://openam.example.com:8443/openam/oauth2/introspect&quot;\n{\n    &quot;active&quot;: true,\n    &quot;scope&quot;: &quot;write&quot;,\n    &quot;client_id&quot;: &quot;myClient&quot;,\n    &quot;user_id&quot;: &quot;demo&quot;,\n    &quot;username&quot;: &quot;demo&quot;,\n    &quot;token_type&quot;: &quot;Bearer&quot;,\n    &quot;exp&quot;: 1419356238,\n    &quot;sub&quot;: &quot;demo&quot;,\n    &quot;iss&quot;: &quot;https://openam.example.com:8443/openam/oauth2&quot;\n    &quot;cnf&quot;: {\n        &quot;jwk&quot;: {\n            &quot;alg&quot;: &quot;RS512&quot;,\n            &quot;e&quot;: &quot;AQAB&quot;,\n            &quot;n&quot;: &quot;k7qLlj...G2oucQ&quot;,\n            &quot;kty&quot;: &quot;RSA&quot;,\n            &quot;use&quot;: &quot;sig&quot;,\n            &quot;kid&quot;: &quot;myJWK&quot;\n        },\n    &quot;auth_level&quot;: 0\n    }\n}\n</code></pre>\n<p>The resulting body is giving the content of the token. Based on the content the Resource Server can decide if the client is authorized to access the information.</p>\n"}],"owner":{"account_id":235505,"reputation":10708,"user_id":502366,"display_name":"Melloware"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76862612,"answer_count":1,"score":0,"last_activity_date":1691522189,"creation_date":1691440410,"question_id":76855012,"body_markdown":"We use a custom product in house called https://www.forgerock.com/ ForgeRock and it supports Oauth2.  Following the Pac4J code base I was able to create a custom ForgeRock Client.\r\n\r\n```java\r\npublic class ForgeRockClient extends OAuth20Client {\r\n\r\n   public static final String DEFAULT_SCOPE = &quot;read write&quot;;\r\n\r\n   private final String baseUrl;\r\n\r\n   public ForgeRockClient(final String url, final String key, final String secret) {\r\n      setScope(DEFAULT_SCOPE);\r\n      setKey(key);\r\n      setSecret(secret);\r\n      this.baseUrl = url;\r\n   }\r\n\r\n   @Override\r\n   protected void internalInit(final boolean forceReinit) {\r\n      String tokenEndpoint = this.baseUrl + &quot;/oauth2/access_token&quot;;\r\n      String authorizeEndpoint = this.baseUrl + &quot;/oauth2/authorize&quot;;\r\n      String revokeEndpoint = this.baseUrl + &quot;/oauth2/revoke&quot;;\r\n      String userEndpoint = this.baseUrl + &quot;/oauth2/userinfo&quot;;\r\n      ForgeRockApi api = new ForgeRockApi(tokenEndpoint, authorizeEndpoint, revokeEndpoint);\r\n      configuration.setApi(api);\r\n      configuration.setProfileDefinition(new ForgeRockProfileDefinition(userEndpoint));\r\n      configuration.setWithState(true);\r\n      configuration.setTokenAsHeader(true);\r\n      defaultLogoutActionBuilder((ctx, session, profile, targetUrl) -&gt; Optional\r\n               .of(HttpActionHelper.buildRedirectUrlAction(ctx, this.baseUrl + &quot;/logout&quot;)));\r\n\r\n      super.internalInit(forceReinit);\r\n   }\r\n\r\n   public String getScope() {\r\n      return getConfiguration().getScope();\r\n   }\r\n\r\n   public void setScope(final String scope) {\r\n      getConfiguration().setScope(scope);\r\n   }\r\n}\r\n```\r\n\r\nThis is working properly and my UI now redirects to Forgerock, I login and it redirects back and I get my proper UserProfile.   Now my next part is the first thing our app does is then makes an API call to a REST Service and in our old SSO we forwarded the cookies and the REST Service would authenticate with ForeRock using that cookie.\r\n\r\nMy question is how using the `AccessToken` I have from my UI login can I submit to a REST API that I also control and want to verify the AccessToken is valid and get the information out of it.   I don&#39;t know if Pac4J has what I need to do this because most of the code I have seen is about OAuth2 indirect client for UI access.\r\n\r\nAny thoughts or help would be appreciated? I have seen others mention using `Authorization: Bearer &lt;Token&gt;` to send to the REST Service?\r\n\r\nSO far I have just been researching the issue and I can&#39;t seem to find a common consensus or answer and was hoping someone from Pac4J or other OAuth2 experts could shed some light on the problem?","title":"Pac4J: Custom ForgeRock OAuth2 with UI and API","body":"<p>We use a custom product in house called <a href=\"https://www.forgerock.com/\" rel=\"nofollow noreferrer\">https://www.forgerock.com/</a> ForgeRock and it supports Oauth2.  Following the Pac4J code base I was able to create a custom ForgeRock Client.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ForgeRockClient extends OAuth20Client {\n\n   public static final String DEFAULT_SCOPE = &quot;read write&quot;;\n\n   private final String baseUrl;\n\n   public ForgeRockClient(final String url, final String key, final String secret) {\n      setScope(DEFAULT_SCOPE);\n      setKey(key);\n      setSecret(secret);\n      this.baseUrl = url;\n   }\n\n   @Override\n   protected void internalInit(final boolean forceReinit) {\n      String tokenEndpoint = this.baseUrl + &quot;/oauth2/access_token&quot;;\n      String authorizeEndpoint = this.baseUrl + &quot;/oauth2/authorize&quot;;\n      String revokeEndpoint = this.baseUrl + &quot;/oauth2/revoke&quot;;\n      String userEndpoint = this.baseUrl + &quot;/oauth2/userinfo&quot;;\n      ForgeRockApi api = new ForgeRockApi(tokenEndpoint, authorizeEndpoint, revokeEndpoint);\n      configuration.setApi(api);\n      configuration.setProfileDefinition(new ForgeRockProfileDefinition(userEndpoint));\n      configuration.setWithState(true);\n      configuration.setTokenAsHeader(true);\n      defaultLogoutActionBuilder((ctx, session, profile, targetUrl) -&gt; Optional\n               .of(HttpActionHelper.buildRedirectUrlAction(ctx, this.baseUrl + &quot;/logout&quot;)));\n\n      super.internalInit(forceReinit);\n   }\n\n   public String getScope() {\n      return getConfiguration().getScope();\n   }\n\n   public void setScope(final String scope) {\n      getConfiguration().setScope(scope);\n   }\n}\n</code></pre>\n<p>This is working properly and my UI now redirects to Forgerock, I login and it redirects back and I get my proper UserProfile.   Now my next part is the first thing our app does is then makes an API call to a REST Service and in our old SSO we forwarded the cookies and the REST Service would authenticate with ForeRock using that cookie.</p>\n<p>My question is how using the <code>AccessToken</code> I have from my UI login can I submit to a REST API that I also control and want to verify the AccessToken is valid and get the information out of it.   I don't know if Pac4J has what I need to do this because most of the code I have seen is about OAuth2 indirect client for UI access.</p>\n<p>Any thoughts or help would be appreciated? I have seen others mention using <code>Authorization: Bearer &lt;Token&gt;</code> to send to the REST Service?</p>\n<p>SO far I have just been researching the issue and I can't seem to find a common consensus or answer and was hoping someone from Pac4J or other OAuth2 experts could shed some light on the problem?</p>\n"},{"tags":["java","spring","testing","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1694951123,"post_id":76862516,"comment_id":135956289,"body_markdown":"Why are you doing `userRepository.save(new User(user.getName()))` instead of `userRepository.save(user)`? Is there a reason for it?","body":"Why are you doing <code>userRepository.save(new User(user.getName()))</code> instead of <code>userRepository.save(user)</code>? Is there a reason for it?"}],"answers":[{"comments":[{"owner":{"account_id":22155755,"reputation":13,"user_id":16403532,"display_name":"Jonathan"},"score":1,"creation_date":1691522698,"post_id":76862604,"comment_id":135502425,"body_markdown":"Thanks, I did the second step and it worked, sorry for basic question but I think given the error I would never think of overriding the equals method, but it makes sense now. It is checking both users are the same right via the equals method.","body":"Thanks, I did the second step and it worked, sorry for basic question but I think given the error I would never think of overriding the equals method, but it makes sense now. It is checking both users are the same right via the equals method."}],"tags":[],"owner":{"account_id":18669557,"reputation":640,"user_id":13608717,"display_name":"Daniel"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691522104,"creation_date":1691522104,"answer_id":76862604,"question_id":76862516,"body_markdown":"In line    `User _user = userRepository.save(new User(user.getName()));` new instance of User is created.\r\n\r\nMostly likely there is no custom equals implementation in User class - and as by default it would return false for 2 different instances, even if they contain same data.\r\n\r\n3 ways to solve:\r\n 1. pass user as-is into repository.save, without creating new instance\r\n 2. define equals on User class to be equals on name field\r\n 3. Update assertion to capture (using ArgumentCaptor) and then verify captured object\r\n\r\n","title":"Strange Mockito verify fail","body":"<p>In line    <code>User _user = userRepository.save(new User(user.getName()));</code> new instance of User is created.</p>\n<p>Mostly likely there is no custom equals implementation in User class - and as by default it would return false for 2 different instances, even if they contain same data.</p>\n<p>3 ways to solve:</p>\n<ol>\n<li>pass user as-is into repository.save, without creating new instance</li>\n<li>define equals on User class to be equals on name field</li>\n<li>Update assertion to capture (using ArgumentCaptor) and then verify captured object</li>\n</ol>\n"}],"owner":{"account_id":22155755,"reputation":13,"user_id":16403532,"display_name":"Jonathan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76862604,"answer_count":1,"score":0,"last_activity_date":1691522104,"creation_date":1691521391,"question_id":76862516,"body_markdown":"I am testing my java app with Mockito, all good until this strange fail test.\r\n[![enter image description here](https://i.stack.imgur.com/ft3C6.png)](https://i.stack.imgur.com/ft3C6.png)\r\nAs you can see there is an extra blank space at the end of the line.\r\n\r\nThis is my createUser method.\r\n```\r\n    @PostMapping(&quot;/users&quot;)\r\n    public ResponseEntity&lt;User&gt; createUser(@RequestBody User user) {\r\n        try {\r\n            User _user = userRepository.save(new User(user.getName()));\r\n            return new ResponseEntity&lt;&gt;(_user, HttpStatus.CREATED);\r\n        }\r\n        catch (Exception e) {\r\n            return new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\r\n        }\r\n    }\r\n\r\n```\r\n\r\nAnd my UserRepository :\r\n\r\n```\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n    List&lt;User&gt; findAll();\r\n    List&lt;User&gt; findByName(String name);\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI tried to search for this but nothing related found, if someone can help me with a related post.","title":"Strange Mockito verify fail","body":"<p>I am testing my java app with Mockito, all good until this strange fail test.\n<a href=\"https://i.stack.imgur.com/ft3C6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ft3C6.png\" alt=\"enter image description here\" /></a>\nAs you can see there is an extra blank space at the end of the line.</p>\n<p>This is my createUser method.</p>\n<pre><code>    @PostMapping(&quot;/users&quot;)\n    public ResponseEntity&lt;User&gt; createUser(@RequestBody User user) {\n        try {\n            User _user = userRepository.save(new User(user.getName()));\n            return new ResponseEntity&lt;&gt;(_user, HttpStatus.CREATED);\n        }\n        catch (Exception e) {\n            return new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n    }\n\n</code></pre>\n<p>And my UserRepository :</p>\n<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n    List&lt;User&gt; findAll();\n    List&lt;User&gt; findByName(String name);\n}\n</code></pre>\n<p>I tried to search for this but nothing related found, if someone can help me with a related post.</p>\n"},{"tags":["java","sqlite","hibernate"],"answers":[{"tags":[],"owner":{"account_id":469126,"reputation":1741,"user_id":875526,"display_name":"Seb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1616605882,"creation_date":1616605882,"answer_id":66785975,"question_id":66779817,"body_markdown":"Not sure why this is only barely documented, but it turned out there is an property in the sqlite-jbdc driver, that controls this behaviour:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iAYkv.png\r\n\r\nTherefore the solution for my problem was setting **data_class** property to **TEXT** in hibernate-properties:\r\n\r\n    properties.setProperty(&quot;hibernate.connection.date_class&quot;, &quot;TEXT&quot;);\r\n\r\n","title":"Persist LocalDateTime as ISO-String in sqlite-db using hibernate","body":"<p>Not sure why this is only barely documented, but it turned out there is an property in the sqlite-jbdc driver, that controls this behaviour:\n<a href=\"https://i.stack.imgur.com/iAYkv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iAYkv.png\" alt=\"enter image description here\" /></a></p>\n<p>Therefore the solution for my problem was setting <strong>data_class</strong> property to <strong>TEXT</strong> in hibernate-properties:</p>\n<pre><code>properties.setProperty(&quot;hibernate.connection.date_class&quot;, &quot;TEXT&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7577792,"reputation":1,"user_id":5749547,"display_name":"Vince"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691521813,"creation_date":1691521813,"answer_id":76862563,"question_id":66779817,"body_markdown":"As of 2023, using Hibernate 5 with SpringBoot 2.7.9 and the SQLite JDBC driver 3.42.0.0, I couldn&#39;t set this through Hibernate. Instead, I used the pragma directives in the connection string: `jdbc:sqlite:file:mydb.db?date_class=TEXT`. \r\n\r\nEither Hikari doesn&#39;t use them, or Hibernate doesn&#39;t pass them. The pragma parameter works fine. The value is case insensitive as SQLite converts it to uppercase. [Reference][1]\r\n\r\n\r\n  [1]: https://github.com/xerial/sqlite-jdbc/blob/14e5eb81f21aa1554b3e68c543ee528213b8140c/src/main/java/org/sqlite/SQLiteConnectionConfig.java#L25","title":"Persist LocalDateTime as ISO-String in sqlite-db using hibernate","body":"<p>As of 2023, using Hibernate 5 with SpringBoot 2.7.9 and the SQLite JDBC driver 3.42.0.0, I couldn't set this through Hibernate. Instead, I used the pragma directives in the connection string: <code>jdbc:sqlite:file:mydb.db?date_class=TEXT</code>.</p>\n<p>Either Hikari doesn't use them, or Hibernate doesn't pass them. The pragma parameter works fine. The value is case insensitive as SQLite converts it to uppercase. <a href=\"https://github.com/xerial/sqlite-jdbc/blob/14e5eb81f21aa1554b3e68c543ee528213b8140c/src/main/java/org/sqlite/SQLiteConnectionConfig.java#L25\" rel=\"nofollow noreferrer\">Reference</a></p>\n"}],"owner":{"account_id":469126,"reputation":1741,"user_id":875526,"display_name":"Seb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":613,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66785975,"answer_count":2,"score":0,"last_activity_date":1691521813,"creation_date":1616584307,"question_id":66779817,"body_markdown":"I have a Sqlite-DB with the following table:\r\n\r\n    CREATE TABLE foo (id bigint not null, from datetime, to datetime, (...) primary key (id));\r\n\r\nCorresponding hibernate-entity is:\r\n\r\n    @Entity\r\n    @Table(name = &quot;foo&quot;)\r\n    public class Foo implements Serializable {\r\n    \r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        private Long id;\r\n        @Column(name = &quot;from&quot;)\r\n        private LocalDateTime from;\r\n        @Column(name = &quot;to&quot;)\r\n        private LocalDateTime to;\r\n        ...\r\n    \r\n    }\r\n\r\nWhen persisting such an entity, hibernate always inserts the LocalDateTime-fields as int (unix timestamp).\r\n\r\nIs there any way to have hibernate inserting these timestamps as ISO-Strings? According to [sqlite-documentation][1], sqlite is capable of storing dates in one the following formats, so it is at least technically possible to do so:\r\n\r\n&gt; SQLite does not have a storage class set aside for storing dates\r\n&gt; and/or times. Instead, the built-in Date And Time Functions of SQLite\r\n&gt; are capable of storing dates and times as TEXT, REAL, or INTEGER\r\n&gt; values:\r\n&gt; \r\n&gt; TEXT as ISO8601 strings (&quot;YYYY-MM-DD HH:MM:SS.SSS&quot;).\r\n&gt; \r\n&gt; \r\n&gt; REAL as Julian day numbers, the number of days since noon in Greenwich\r\n&gt; on November 24, 4714 B.C. according to the proleptic Gregorian\r\n&gt; calendar.\r\n&gt; \r\n&gt; \r\n&gt; INTEGER as Unix Time, the number of seconds since 1970-01-01 00:00:00\r\n&gt; UTC.\r\n\r\nI already did try to override SqliteDialect, but it did not change anything:\r\n\r\n    public class MySqliteDialect extends SQLiteDialect {\r\n    \r\n        public MySqliteDialect() {\r\n            super();\r\n            registerColumnType( Types.TIMESTAMP, &quot;text&quot; );\r\n        }\r\n    }\r\n\r\n**tl;dr: How can I store LocalDateTime fields from entity in datetime-column in sqlite-db as ISO-string?**\r\n\r\n\r\n  [1]: https://www.sqlite.org/datatype3.html","title":"Persist LocalDateTime as ISO-String in sqlite-db using hibernate","body":"<p>I have a Sqlite-DB with the following table:</p>\n<pre><code>CREATE TABLE foo (id bigint not null, from datetime, to datetime, (...) primary key (id));\n</code></pre>\n<p>Corresponding hibernate-entity is:</p>\n<pre><code>@Entity\n@Table(name = &quot;foo&quot;)\npublic class Foo implements Serializable {\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    private Long id;\n    @Column(name = &quot;from&quot;)\n    private LocalDateTime from;\n    @Column(name = &quot;to&quot;)\n    private LocalDateTime to;\n    ...\n\n}\n</code></pre>\n<p>When persisting such an entity, hibernate always inserts the LocalDateTime-fields as int (unix timestamp).</p>\n<p>Is there any way to have hibernate inserting these timestamps as ISO-Strings? According to <a href=\"https://www.sqlite.org/datatype3.html\" rel=\"nofollow noreferrer\">sqlite-documentation</a>, sqlite is capable of storing dates in one the following formats, so it is at least technically possible to do so:</p>\n<blockquote>\n<p>SQLite does not have a storage class set aside for storing dates\nand/or times. Instead, the built-in Date And Time Functions of SQLite\nare capable of storing dates and times as TEXT, REAL, or INTEGER\nvalues:</p>\n<p>TEXT as ISO8601 strings (&quot;YYYY-MM-DD HH:MM:SS.SSS&quot;).</p>\n<p>REAL as Julian day numbers, the number of days since noon in Greenwich\non November 24, 4714 B.C. according to the proleptic Gregorian\ncalendar.</p>\n<p>INTEGER as Unix Time, the number of seconds since 1970-01-01 00:00:00\nUTC.</p>\n</blockquote>\n<p>I already did try to override SqliteDialect, but it did not change anything:</p>\n<pre><code>public class MySqliteDialect extends SQLiteDialect {\n\n    public MySqliteDialect() {\n        super();\n        registerColumnType( Types.TIMESTAMP, &quot;text&quot; );\n    }\n}\n</code></pre>\n<p><strong>tl;dr: How can I store LocalDateTime fields from entity in datetime-column in sqlite-db as ISO-string?</strong></p>\n"},{"tags":["java","spring-boot","dependency-injection","autowired"],"answers":[{"tags":[],"owner":{"account_id":1968635,"reputation":21509,"user_id":1768226,"accept_rate":80,"display_name":"shazin"},"comment_count":0,"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1566815710,"creation_date":1566815710,"answer_id":57656242,"question_id":57656119,"body_markdown":"You can use `@Autowired(required=false)` and null check in `stopScheduler` method.\r\n\r\n     @Autowired(required=false)\r\n     private TestSchedulderNew testSchedulderNew;\r\n    \r\n     @GetMapping(value = &quot;/stopScheduler&quot;)\r\n     public String stopSchedule() {\r\n         if (testSchedulderNew != null) {\r\n             postProcessor.postProcessBeforeDestruction(testSchedulderNew, \r\n              SCHEDULED_TASKS);\r\n             return &quot;OK&quot;;\r\n         }\r\n         return &quot;NOT_OK&quot;;\r\n     }","title":"How to Autowire conditionally in spring boot?","body":"<p>You can use <code>@Autowired(required=false)</code> and null check in <code>stopScheduler</code> method.</p>\n\n<pre><code> @Autowired(required=false)\n private TestSchedulderNew testSchedulderNew;\n\n @GetMapping(value = \"/stopScheduler\")\n public String stopSchedule() {\n     if (testSchedulderNew != null) {\n         postProcessor.postProcessBeforeDestruction(testSchedulderNew, \n          SCHEDULED_TASKS);\n         return \"OK\";\n     }\n     return \"NOT_OK\";\n }\n</code></pre>\n"}],"owner":{"account_id":1919649,"reputation":335,"user_id":1731485,"display_name":"Rajesh Khore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21679,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":57656242,"answer_count":1,"score":22,"last_activity_date":1691521343,"creation_date":1566815218,"question_id":57656119,"body_markdown":"I have created one scheduler class\r\n\r\n    public class TestSchedulderNew {\r\n\r\n    @Scheduled(fixedDelay = 3000)\r\n    public void fixedRateJob1() {\r\n    System.out.println(&quot;Job 1 running&quot;);\r\n    }\r\n\r\n    @Scheduled(fixedDelay = 3000)\r\n    public void fixedRateJob2() {\r\n    System.out.println(&quot;Job 2 running&quot;);\r\n    }\r\n    }\r\n\r\nIn the configuration, I have put @ConditionalOnProperty annotation to enable this on conditional purpose.\r\n\r\n     @Bean\r\n    @ConditionalOnProperty(value = &quot;jobs.enabled&quot;)\r\n    public TestSchedulderNew testSchedulderNew() {\r\n    return new TestSchedulderNew();\r\n    }\r\n\r\nNow in the controller, I have created &quot;stopScheduler&quot; method to stop this scheduler, in this controller I have autowired \r\nTestSchedulderNew class\r\n\r\n     @RestController\r\n     @RequestMapping(&quot;/api&quot;)\r\n     public class TestCont {\r\n\r\n    private static final String SCHEDULED_TASKS = &quot;testSchedulderNew&quot;;\r\n\r\n     @Autowired\r\n     private ScheduledAnnotationBeanPostProcessor postProcessor;\t/]\r\n\r\n     @Autowired\r\n     private TestSchedulderNew testSchedulderNew;\r\n\r\n\r\n     @GetMapping(value = &quot;/stopScheduler&quot;)\r\n     public String stopSchedule(){\r\n      postProcessor.postProcessBeforeDestruction(testSchedulderNew, \r\n       SCHEDULED_TASKS);\r\n      return &quot;OK&quot;;\r\n      }\r\n     }     \r\n\r\nNow the problem is if the conditional property is false then I get the below exception\r\n\r\n       Field testSchedulderNew in com.sbill.app.web.rest.TestCont required a bean of type &#39;com.sbill.app.schedulerJob.TestSchedulderNew\r\n\r\n\r\nIn case of true everything works fine,\r\n\r\nDo we have any option to solve this?","title":"How to Autowire conditionally in spring boot?","body":"<p>I have created one scheduler class</p>\n<pre><code>public class TestSchedulderNew {\n\n@Scheduled(fixedDelay = 3000)\npublic void fixedRateJob1() {\nSystem.out.println(&quot;Job 1 running&quot;);\n}\n\n@Scheduled(fixedDelay = 3000)\npublic void fixedRateJob2() {\nSystem.out.println(&quot;Job 2 running&quot;);\n}\n}\n</code></pre>\n<p>In the configuration, I have put @ConditionalOnProperty annotation to enable this on conditional purpose.</p>\n<pre><code> @Bean\n@ConditionalOnProperty(value = &quot;jobs.enabled&quot;)\npublic TestSchedulderNew testSchedulderNew() {\nreturn new TestSchedulderNew();\n}\n</code></pre>\n<p>Now in the controller, I have created &quot;stopScheduler&quot; method to stop this scheduler, in this controller I have autowired\nTestSchedulderNew class</p>\n<pre><code> @RestController\n @RequestMapping(&quot;/api&quot;)\n public class TestCont {\n\nprivate static final String SCHEDULED_TASKS = &quot;testSchedulderNew&quot;;\n\n @Autowired\n private ScheduledAnnotationBeanPostProcessor postProcessor;    /]\n\n @Autowired\n private TestSchedulderNew testSchedulderNew;\n\n\n @GetMapping(value = &quot;/stopScheduler&quot;)\n public String stopSchedule(){\n  postProcessor.postProcessBeforeDestruction(testSchedulderNew, \n   SCHEDULED_TASKS);\n  return &quot;OK&quot;;\n  }\n }     \n</code></pre>\n<p>Now the problem is if the conditional property is false then I get the below exception</p>\n<pre><code>   Field testSchedulderNew in com.sbill.app.web.rest.TestCont required a bean of type 'com.sbill.app.schedulerJob.TestSchedulderNew\n</code></pre>\n<p>In case of true everything works fine,</p>\n<p>Do we have any option to solve this?</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot","internationalization"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1532601224,"post_id":51535717,"comment_id":90041003,"body_markdown":"Which version are you using?","body":"Which version are you using?"},{"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"score":0,"creation_date":1532601347,"post_id":51535717,"comment_id":90041083,"body_markdown":"forgot to mention, it is `2.0.3.RELEASE`","body":"forgot to mention, it is <code>2.0.3.RELEASE</code>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1532601984,"post_id":51535717,"comment_id":90041441,"body_markdown":"Also what doesn&#39;t work exactly?","body":"Also what doesn&#39;t work exactly?"},{"owner":{"account_id":8628975,"reputation":1046,"user_id":6461268,"display_name":"Dinesh"},"score":0,"creation_date":1532603514,"post_id":51535717,"comment_id":90042339,"body_markdown":"Can you please give the exception or error you are getting","body":"Can you please give the exception or error you are getting"},{"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"score":0,"creation_date":1532656418,"post_id":51535717,"comment_id":90066909,"body_markdown":"updated the error message that I encountered.","body":"updated the error message that I encountered."},{"owner":{"account_id":2345906,"reputation":2356,"user_id":2056178,"display_name":"Eugene"},"score":0,"creation_date":1555212908,"post_id":51535717,"comment_id":98029549,"body_markdown":"For me, adding locale to basename solved the problem. E.g. `spring.messages.basename=my-messages_en`. By the way, `classpath:` prefix is useless.","body":"For me, adding locale to basename solved the problem. E.g. <code>spring.messages.basename=my-messages_en</code>. By the way, <code>classpath:</code> prefix is useless."}],"answers":[{"tags":[],"owner":{"account_id":17975599,"reputation":85,"user_id":14634474,"display_name":"Даниил Дмитроченков"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605294282,"creation_date":1605294282,"answer_id":64826629,"question_id":51535717,"body_markdown":"try use `#` instead `$` - `&lt;spring:message code=&quot;#{param.error}&quot; /&gt;`","title":"Spring boot MessageSource not working in application.properties","body":"<p>try use <code>#</code> instead <code>$</code> - <code>&lt;spring:message code=&quot;#{param.error}&quot; /&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":11382552,"reputation":126,"user_id":8345076,"display_name":"Ehtesham Siddiquie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637517843,"creation_date":1637517843,"answer_id":70057268,"question_id":51535717,"body_markdown":"make sure you have default messages.properties in addition to the locale specific messages.properties","title":"Spring boot MessageSource not working in application.properties","body":"<p>make sure you have default messages.properties in addition to the locale specific messages.properties</p>\n"},{"tags":[],"owner":{"account_id":10424858,"reputation":179,"user_id":7686473,"accept_rate":100,"display_name":"Alterant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691520854,"creation_date":1691520854,"answer_id":76862458,"question_id":51535717,"body_markdown":"spring.messages.basename should be without leading slash:\r\n\r\n    spring.messages.basename=locale/normal/message,locale/validation/message","title":"Spring boot MessageSource not working in application.properties","body":"<p>spring.messages.basename should be without leading slash:</p>\n<pre><code>spring.messages.basename=locale/normal/message,locale/validation/message\n</code></pre>\n"}],"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3573,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1691520854,"creation_date":1532598003,"question_id":51535717,"body_markdown":"I am converting spring MVC to spring boot (2.0.3.RELEASE) project.\r\n\r\nI am using this in spring boot, it works:\r\n\r\n    @Bean\r\n    public MessageSource messageSource() {\r\n    \tReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\r\n    \tmessageSource.setBasenames(&quot;classpath:/locale/normal/message&quot;, &quot;classpath:/locale/validation/message&quot;);\r\n    \tmessageSource.setDefaultEncoding(&quot;UTF-8&quot;);\r\n    \treturn messageSource;\r\n    }\r\n\r\nI try to use spring boot auto-configuration (via `application.properties`) as below (remove the manual bean configuration above):\r\n\r\n    spring.messages.basename=classpath:/locale/normal/message,classpath:/locale/validation/message\r\n\r\nI tried below, it doesn&#39;t work too:\r\n\r\n    spring.messages.basename=/locale/normal/message,/locale/validation/message\r\n\r\n\r\nI read their [documentation][1] below:\r\n\r\n    # INTERNATIONALIZATION (MessageSourceProperties)\r\n    spring.messages.always-use-message-format=false # Whether to always apply the MessageFormat rules, parsing even messages without arguments.\r\n    spring.messages.basename=messages # Comma-separated list of basenames (essentially a fully-qualified classpath location), each following the ResourceBundle convention with relaxed support for slash based locations.\r\n    spring.messages.cache-duration= # Loaded resource bundle files cache duration. When not set, bundles are cached forever. If a duration suffix is not specified, seconds will be used.\r\n    spring.messages.encoding=UTF-8 # Message bundles encoding.\r\n    spring.messages.fallback-to-system-locale=true # Whether to fall back to the system Locale if no files for a specific Locale have been found.\r\n    spring.messages.use-code-as-default-message=false # Whether to use the message code as the default message instead of throwing a &quot;NoSuchMessageException&quot;. Recommended during development only.\r\n\r\nI put the message properties file in the classpath:\r\n\r\n    src\\main\\resources\\locale\\normal\r\n    src\\main\\resources\\locale\\validation\r\n\r\nI try a lot of combination, but it doesn&#39;t work, why?\r\n\r\nThe error I encounter :\r\n\r\n    javax.servlet.jsp.JspTagException: No message found under code &#39;login.timeout&#39; for locale &#39;en&#39;.\r\n\r\n(I am pretty sure the message code is in my properties file for all locale.)\r\n\r\nI am using Spring tag to load the localized message:\r\n\r\n    &lt;spring:message code=&quot;${param.error}&quot; /&gt;\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html","title":"Spring boot MessageSource not working in application.properties","body":"<p>I am converting spring MVC to spring boot (2.0.3.RELEASE) project.</p>\n\n<p>I am using this in spring boot, it works:</p>\n\n<pre><code>@Bean\npublic MessageSource messageSource() {\n    ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\n    messageSource.setBasenames(\"classpath:/locale/normal/message\", \"classpath:/locale/validation/message\");\n    messageSource.setDefaultEncoding(\"UTF-8\");\n    return messageSource;\n}\n</code></pre>\n\n<p>I try to use spring boot auto-configuration (via <code>application.properties</code>) as below (remove the manual bean configuration above):</p>\n\n<pre><code>spring.messages.basename=classpath:/locale/normal/message,classpath:/locale/validation/message\n</code></pre>\n\n<p>I tried below, it doesn't work too:</p>\n\n<pre><code>spring.messages.basename=/locale/normal/message,/locale/validation/message\n</code></pre>\n\n<p>I read their <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">documentation</a> below:</p>\n\n<pre><code># INTERNATIONALIZATION (MessageSourceProperties)\nspring.messages.always-use-message-format=false # Whether to always apply the MessageFormat rules, parsing even messages without arguments.\nspring.messages.basename=messages # Comma-separated list of basenames (essentially a fully-qualified classpath location), each following the ResourceBundle convention with relaxed support for slash based locations.\nspring.messages.cache-duration= # Loaded resource bundle files cache duration. When not set, bundles are cached forever. If a duration suffix is not specified, seconds will be used.\nspring.messages.encoding=UTF-8 # Message bundles encoding.\nspring.messages.fallback-to-system-locale=true # Whether to fall back to the system Locale if no files for a specific Locale have been found.\nspring.messages.use-code-as-default-message=false # Whether to use the message code as the default message instead of throwing a \"NoSuchMessageException\". Recommended during development only.\n</code></pre>\n\n<p>I put the message properties file in the classpath:</p>\n\n<pre><code>src\\main\\resources\\locale\\normal\nsrc\\main\\resources\\locale\\validation\n</code></pre>\n\n<p>I try a lot of combination, but it doesn't work, why?</p>\n\n<p>The error I encounter :</p>\n\n<pre><code>javax.servlet.jsp.JspTagException: No message found under code 'login.timeout' for locale 'en'.\n</code></pre>\n\n<p>(I am pretty sure the message code is in my properties file for all locale.)</p>\n\n<p>I am using Spring tag to load the localized message:</p>\n\n<pre><code>&lt;spring:message code=\"${param.error}\" /&gt;\n</code></pre>\n"},{"tags":["java","user-interface","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691507281,"post_id":76860798,"comment_id":135499478,"body_markdown":"Probably off-topic, but Lombic `@Getter` etc do not work correctly with JavaFX properties (they will not create the correct methods). Implement the JavaFX Property pattern directly in code (your IDE may have ways to generate the code automatically for you).","body":"Probably off-topic, but Lombic <code>@Getter</code> etc do not work correctly with JavaFX properties (they will not create the correct methods). Implement the JavaFX Property pattern directly in code (your IDE may have ways to generate the code automatically for you)."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691507498,"post_id":76860798,"comment_id":135499533,"body_markdown":"What is `AbstractAnimationTimer`? This is not a JavaFX library class.","body":"What is <code>AbstractAnimationTimer</code>? This is not a JavaFX library class."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1691508125,"post_id":76860798,"comment_id":135499709,"body_markdown":"Why the calls to `Platform.runLater(...)` and the `AtomicInteger`s, etc? I don&#39;t see any multithreading here.  Everything in the code you posted is already being called on the FX Application Thread.","body":"Why the calls to <code>Platform.runLater(...)</code> and the <code>AtomicInteger</code>s, etc? I don&#39;t see any multithreading here.  Everything in the code you posted is already being called on the FX Application Thread."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691508260,"post_id":76860798,"comment_id":135499745,"body_markdown":"What do you mean by your comment `// This is executing constantly`?","body":"What do you mean by your comment <code>&#47;&#47; This is executing constantly</code>?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691508332,"post_id":76860798,"comment_id":135499765,"body_markdown":"I just don&#39;t think there is anywhere near enough information in the question to help diagnose the issue. The obvious guess would be that the delay is coming from the `if (shouldRun(now))` clause, which seems to explicitly delay movement. But there&#39;s no way to tell because you haven&#39;t posted that method. You need to create and post a [mre] that demonstrates the issue.","body":"I just don&#39;t think there is anywhere near enough information in the question to help diagnose the issue. The obvious guess would be that the delay is coming from the <code>if (shouldRun(now))</code> clause, which seems to explicitly delay movement. But there&#39;s no way to tell because you haven&#39;t posted that method. You need to create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the issue."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691511969,"post_id":76860798,"comment_id":135500534,"body_markdown":"That said... I don&#39;t quite understand your strategy for movement here. When a key is pressed, I&#39;m guessing `deltaX` or `deltaY` are set by the key event handler. But on the next frame rendering you set those back to zero (in the animation timer). So there will be a very small movement for *each* key press. What you want is smooth movement *while the key is down*. So I think what you are seeing is multiple small movements from the system keyboard repeat. The lag is the delay from keyboard repeat which is deliberately built in at the system level.","body":"That said... I don&#39;t quite understand your strategy for movement here. When a key is pressed, I&#39;m guessing <code>deltaX</code> or <code>deltaY</code> are set by the key event handler. But on the next frame rendering you set those back to zero (in the animation timer). So there will be a very small movement for <i>each</i> key press. What you want is smooth movement <i>while the key is down</i>. So I think what you are seeing is multiple small movements from the system keyboard repeat. The lag is the delay from keyboard repeat which is deliberately built in at the system level."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691512074,"post_id":76860798,"comment_id":135500554,"body_markdown":"Basically, get rid of everything that is not related to movement, including the sprite animation. (Probably by writing an application entirely from scratch.) Just move a shape around a pane using the basic strategy you have here. I think you will see the same result. Then post that as a [mre].","body":"Basically, get rid of everything that is not related to movement, including the sprite animation. (Probably by writing an application entirely from scratch.) Just move a shape around a pane using the basic strategy you have here. I think you will see the same result. Then post that as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"score":0,"creation_date":1691513268,"post_id":76860798,"comment_id":135500755,"body_markdown":"@James_D I have updated the question including the AbstractAnimationTimer code. shouldRun() is a typical limiting method so the Animation doesn&#39;t execute 30k times per second. Removing the method call entirely doesn&#39;t correct the issue but it shouldn&#39;t anyway. The method is updating the sprite which is working as expected and I think is not relevant for the issue.","body":"@James_D I have updated the question including the AbstractAnimationTimer code. shouldRun() is a typical limiting method so the Animation doesn&#39;t execute 30k times per second. Removing the method call entirely doesn&#39;t correct the issue but it shouldn&#39;t anyway. The method is updating the sprite which is working as expected and I think is not relevant for the issue."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691514019,"post_id":76860798,"comment_id":135500887,"body_markdown":"Please create a [mre] as requested.","body":"Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as requested."},{"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"score":0,"creation_date":1691515078,"post_id":76860798,"comment_id":135501087,"body_markdown":"@James_D Added reproducible example. On this example I can also see that the Rectangle &quot;lags&quot; behind a bit at start. I think it may be caused by what you mentioned earlier, `So I think what you are seeing is multiple small movements from the system keyboard repeat. The lag is the delay from keyboard repeat which is deliberately built in at the system level.`. How do I fix that?","body":"@James_D Added reproducible example. On this example I can also see that the Rectangle &quot;lags&quot; behind a bit at start. I think it may be caused by what you mentioned earlier, <code>So I think what you are seeing is multiple small movements from the system keyboard repeat. The lag is the delay from keyboard repeat which is deliberately built in at the system level.</code>. How do I fix that?"},{"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"score":1,"creation_date":1691516060,"post_id":76860798,"comment_id":135501237,"body_markdown":"I think I see the issue now. If I modify the code as following for a condition                     `if (KeyCode.UP.equals(keyEvent.getCode())) addTop = true;` and then on the AnimationTimer I do this `if (addTop)  yDelta -= 10;` then the animation becomes much smoother. If you can post an answer to this question so that I can approve it along with an explanation of _why_ this is happening I will be glad. Thanks for your help.","body":"I think I see the issue now. If I modify the code as following for a condition                     <code>if (KeyCode.UP.equals(keyEvent.getCode())) addTop = true;</code> and then on the AnimationTimer I do this <code>if (addTop)  yDelta -= 10;</code> then the animation becomes much smoother. If you can post an answer to this question so that I can approve it along with an explanation of <i>why</i> this is happening I will be glad. Thanks for your help."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1691517144,"post_id":76860798,"comment_id":135501430,"body_markdown":"As others have said, the use of volatile, AtomicInteger, and shouldRun seems suspect.  It implies you may be running your own animation loop (possibly even as a spin loop) which you should not do.  No loops are needed to perform your animation, and you should not need any additional threads.","body":"As others have said, the use of volatile, AtomicInteger, and shouldRun seems suspect.  It implies you may be running your own animation loop (possibly even as a spin loop) which you should not do.  No loops are needed to perform your animation, and you should not need any additional threads."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691519190,"post_id":76860798,"comment_id":135501783,"body_markdown":"I don&#39;t know what `playerEntity.getRunImages()` and `playerEntity.getIdleImages()` do.  I assume that they get a list of cached, preloaded images rather than loading new images each time.  If that is not the case, then that could be another source of delay.","body":"I don&#39;t know what <code>playerEntity.getRunImages()</code> and <code>playerEntity.getIdleImages()</code> do.  I assume that they get a list of cached, preloaded images rather than loading new images each time.  If that is not the case, then that could be another source of delay."},{"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"score":1,"creation_date":1691535204,"post_id":76860798,"comment_id":135504191,"body_markdown":"@jewelsea Correct, those methods are simple getters that are retrieving pre-loaded assets. The issue with my approach is explained clearly by James D answer.","body":"@jewelsea Correct, those methods are simple getters that are retrieving pre-loaded assets. The issue with my approach is explained clearly by James D answer."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691520308,"creation_date":1691516444,"answer_id":76861995,"question_id":76860798,"body_markdown":"Your animation timer sets `deltaX` and `deltaY` back to zero when it uses them:\r\n\r\n        new AnimationTimer() {\r\n            @Override\r\n            public void handle(long now) {\r\n                // This is executing constantly, I know of the implications but it&#39;s good for now\r\n                int xDelta = xDeltaCounter.getAndSet(0);\r\n                if (xDelta != 0) {\r\n                    rect.setLayoutX(rect.getLayoutX() + xDelta);\r\n                }\r\n                int yDelta = yDeltaCounter.getAndSet(0);\r\n                if (yDelta != 0) {\r\n                    rect.setLayoutY(rect.getLayoutY() + yDelta);\r\n                }\r\n            }\r\n        }.start();\r\n\r\nThey will only be made non-zero again when the key listener is invoked, i.e. when the appropriate keys are pressed again. Consequently, the rectangle moves 10 pixels in the appropriate direction *for each key press*. \r\n\r\nWhat you really want is for it to move continuously *while the key is held down*. \r\n\r\nThe reason it appears to move repeatedly is because of the operating system&#39;s keyboard repeat, which sends multiple key press events if a key is held down. There is a delay on this, which is why you see a delay before the rectangle starts repeatedly moving. (If you observe closely, you will see one isolated movement when the key is first pressed, then the delay, then the repeated movement.) You&#39;ll also notice the movement is not smooth, because it is moving in 10 pixel increments at discrete times (which are determined by the operating system, so it will move at different speeds on different systems).\r\n\r\nThe correct strategy for this is simply to keep track of which keys are down, and then to calculate the amount of horizontal and vertical movement in the animation timer depending on those keys. You probably want to make the amount of movement dependent on the amount of time since the last animation frame, so that you can accurately control the speed.\r\n\r\nNote that since everything is on the same thread, there is no need at all for `AtomicInteger` etc.\r\n\r\nHere is a working solution that implements these ideas:\r\n\r\n\r\n    import javafx.animation.AnimationTimer;\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Point2D;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.input.KeyCode;\r\n    import javafx.scene.layout.AnchorPane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    public class Main extends Application {\r\n    \r\n        private final Set&lt;KeyCode&gt; keysPressed = new HashSet&lt;&gt;();\r\n        private static final double SPEED = 200.0 ; // pixels per second\r\n    \r\n        private Point2D delta = Point2D.ZERO;\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            AnchorPane pane = new AnchorPane();\r\n            Scene scene = new Scene(pane, 800, 800);\r\n            scene.setOnKeyReleased(keyEvent -&gt; keysPressed.remove(keyEvent.getCode()));\r\n            scene.setOnKeyPressed(keyEvent -&gt; keysPressed.add(keyEvent.getCode()));\r\n    \r\n            primaryStage = new Stage();\r\n            primaryStage.setScene(scene);\r\n            Rectangle rect = new Rectangle(100, 100);\r\n            rect.setFill(Color.RED);\r\n    \r\n    \r\n            new AnimationTimer() {\r\n                private long lastUpdate ;\r\n    \r\n                @Override\r\n                public void handle(long now) {\r\n                    long elapsedNanos = now - lastUpdate;\r\n                    double elapsedSeconds = elapsedNanos / 1_000_000_000.0;\r\n                    delta = getDelta(elapsedSeconds);\r\n                    rect.setLayoutX(rect.getLayoutX() + delta.getX());\r\n                    rect.setLayoutY(rect.getLayoutY() + delta.getY());\r\n                    lastUpdate = now;\r\n                }\r\n            }.start();\r\n    \r\n            pane.getChildren().add(rect);\r\n            primaryStage.show();\r\n        }\r\n    \r\n    \r\n    \r\n        public Point2D getDelta(double elapsedSeconds) {\r\n            double distance = SPEED * elapsedSeconds;\r\n            int xDelta = 0 ;\r\n            int yDelta = 0 ;\r\n            if (keysPressed.contains(KeyCode.LEFT)) xDelta--;\r\n            if (keysPressed.contains(KeyCode.RIGHT)) xDelta++;\r\n            if (keysPressed.contains(KeyCode.UP)) yDelta--;\r\n            if (keysPressed.contains(KeyCode.DOWN)) yDelta++;\r\n            return new Point2D(xDelta, yDelta).normalize().multiply(distance);\r\n        }\r\n    }\r\n\r\nJust to demonstrate that the movement (from one `AnimationTimer`) is completely independent of the sprite animation in your original (defined in another `AnimationTimer`), the following snippet will mimic the sprite animation (alternating colors while the rectangle moves, instead of alternating images). Just add this in the `start()` method.\r\n\r\n        // alternate colors while moving:\r\n        new AnimationTimer() {\r\n            private long lastUpdate ;\r\n            private final Color[] colors = new Color[] {Color.BLUE, Color.RED};\r\n            private int currentColor = 0 ;\r\n\r\n            @Override\r\n            public void handle(long now) {\r\n                if (delta.equals(Point2D.ZERO)) {\r\n                    currentColor = 0;\r\n                } else {\r\n                    long elapsedNanos = now - lastUpdate;\r\n                    double elapsedSeconds = elapsedNanos / 1_000_000_000.0;\r\n                    if (elapsedSeconds &gt; 0.25) {\r\n                        currentColor = (currentColor + 1) % colors.length;\r\n                        lastUpdate = now;\r\n                    }\r\n                }\r\n                rect.setFill(colors[currentColor]);\r\n            }\r\n        }.start();","title":"Input lag when changing layoutX &amp; layoutY on an ImageView using keyboard input","body":"<p>Your animation timer sets <code>deltaX</code> and <code>deltaY</code> back to zero when it uses them:</p>\n<pre><code>    new AnimationTimer() {\n        @Override\n        public void handle(long now) {\n            // This is executing constantly, I know of the implications but it's good for now\n            int xDelta = xDeltaCounter.getAndSet(0);\n            if (xDelta != 0) {\n                rect.setLayoutX(rect.getLayoutX() + xDelta);\n            }\n            int yDelta = yDeltaCounter.getAndSet(0);\n            if (yDelta != 0) {\n                rect.setLayoutY(rect.getLayoutY() + yDelta);\n            }\n        }\n    }.start();\n</code></pre>\n<p>They will only be made non-zero again when the key listener is invoked, i.e. when the appropriate keys are pressed again. Consequently, the rectangle moves 10 pixels in the appropriate direction <em>for each key press</em>.</p>\n<p>What you really want is for it to move continuously <em>while the key is held down</em>.</p>\n<p>The reason it appears to move repeatedly is because of the operating system's keyboard repeat, which sends multiple key press events if a key is held down. There is a delay on this, which is why you see a delay before the rectangle starts repeatedly moving. (If you observe closely, you will see one isolated movement when the key is first pressed, then the delay, then the repeated movement.) You'll also notice the movement is not smooth, because it is moving in 10 pixel increments at discrete times (which are determined by the operating system, so it will move at different speeds on different systems).</p>\n<p>The correct strategy for this is simply to keep track of which keys are down, and then to calculate the amount of horizontal and vertical movement in the animation timer depending on those keys. You probably want to make the amount of movement dependent on the amount of time since the last animation frame, so that you can accurately control the speed.</p>\n<p>Note that since everything is on the same thread, there is no need at all for <code>AtomicInteger</code> etc.</p>\n<p>Here is a working solution that implements these ideas:</p>\n<pre><code>import javafx.animation.AnimationTimer;\nimport javafx.application.Application;\nimport javafx.geometry.Point2D;\nimport javafx.scene.Scene;\nimport javafx.scene.input.KeyCode;\nimport javafx.scene.layout.AnchorPane;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class Main extends Application {\n\n    private final Set&lt;KeyCode&gt; keysPressed = new HashSet&lt;&gt;();\n    private static final double SPEED = 200.0 ; // pixels per second\n\n    private Point2D delta = Point2D.ZERO;\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        AnchorPane pane = new AnchorPane();\n        Scene scene = new Scene(pane, 800, 800);\n        scene.setOnKeyReleased(keyEvent -&gt; keysPressed.remove(keyEvent.getCode()));\n        scene.setOnKeyPressed(keyEvent -&gt; keysPressed.add(keyEvent.getCode()));\n\n        primaryStage = new Stage();\n        primaryStage.setScene(scene);\n        Rectangle rect = new Rectangle(100, 100);\n        rect.setFill(Color.RED);\n\n\n        new AnimationTimer() {\n            private long lastUpdate ;\n\n            @Override\n            public void handle(long now) {\n                long elapsedNanos = now - lastUpdate;\n                double elapsedSeconds = elapsedNanos / 1_000_000_000.0;\n                delta = getDelta(elapsedSeconds);\n                rect.setLayoutX(rect.getLayoutX() + delta.getX());\n                rect.setLayoutY(rect.getLayoutY() + delta.getY());\n                lastUpdate = now;\n            }\n        }.start();\n\n        pane.getChildren().add(rect);\n        primaryStage.show();\n    }\n\n\n\n    public Point2D getDelta(double elapsedSeconds) {\n        double distance = SPEED * elapsedSeconds;\n        int xDelta = 0 ;\n        int yDelta = 0 ;\n        if (keysPressed.contains(KeyCode.LEFT)) xDelta--;\n        if (keysPressed.contains(KeyCode.RIGHT)) xDelta++;\n        if (keysPressed.contains(KeyCode.UP)) yDelta--;\n        if (keysPressed.contains(KeyCode.DOWN)) yDelta++;\n        return new Point2D(xDelta, yDelta).normalize().multiply(distance);\n    }\n}\n</code></pre>\n<p>Just to demonstrate that the movement (from one <code>AnimationTimer</code>) is completely independent of the sprite animation in your original (defined in another <code>AnimationTimer</code>), the following snippet will mimic the sprite animation (alternating colors while the rectangle moves, instead of alternating images). Just add this in the <code>start()</code> method.</p>\n<pre><code>    // alternate colors while moving:\n    new AnimationTimer() {\n        private long lastUpdate ;\n        private final Color[] colors = new Color[] {Color.BLUE, Color.RED};\n        private int currentColor = 0 ;\n\n        @Override\n        public void handle(long now) {\n            if (delta.equals(Point2D.ZERO)) {\n                currentColor = 0;\n            } else {\n                long elapsedNanos = now - lastUpdate;\n                double elapsedSeconds = elapsedNanos / 1_000_000_000.0;\n                if (elapsedSeconds &gt; 0.25) {\n                    currentColor = (currentColor + 1) % colors.length;\n                    lastUpdate = now;\n                }\n            }\n            rect.setFill(colors[currentColor]);\n        }\n    }.start();\n</code></pre>\n"}],"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76861995,"answer_count":1,"score":0,"last_activity_date":1691520308,"creation_date":1691506742,"question_id":76860798,"body_markdown":"My use case is the following:\r\n\r\n```\r\nGiven an ImageView element, move that around the Pane by using keyboard UP/DOWN/LEFT/RIGHT buttons. \r\nThe ImageView should by cycling between different images and the source images \r\nwill change when movement is detected.\r\n```\r\n\r\nI am using two different AnimateTimers for that. The first one is used to &quot;cycle&quot; through a list of Images and update given list when movement is detected.\r\n\r\n```java\r\npublic class MultipleImageListAnimation extends AbstractAnimationTimer {\r\n\r\n    @Getter\r\n    private final SimpleObjectProperty&lt;Image&gt; imageProp;\r\n    @Getter\r\n    private final SimpleIntegerProperty scaleProp;\r\n    private volatile List&lt;List&lt;Image&gt;&gt; spriteImagesLists;\r\n    private volatile List&lt;Image&gt; displayedImageList;\r\n    private int imageIndex = 0;\r\n    private int listIndex = 0;\r\n\r\n    public MultipleImageListAnimation(List&lt;List&lt;Image&gt;&gt; spriteImagesLists) {\r\n        super(1);\r\n        this.imageProp = new SimpleObjectProperty&lt;&gt;();\r\n        this.scaleProp = new SimpleIntegerProperty(1);\r\n        this.spriteImagesLists = spriteImagesLists;\r\n        this.displayedImageList = spriteImagesLists.get(0);\r\n        if (displayedImageList.size() &gt; 0) {\r\n            super.setFramesPerSecond(displayedImageList.size() * 2);\r\n        }\r\n    }\r\n\r\n    public void changeSpriteImages(List&lt;List&lt;Image&gt;&gt; images) {\r\n        this.stop();\r\n        this.spriteImagesLists = images;\r\n        this.listIndex = ThreadLocalRandom.current().nextInt(images.size());\r\n        this.imageIndex = 0;\r\n        this.displayedImageList = images.get(listIndex);\r\n        super.setFramesPerSecond(displayedImageList.size() * 2);\r\n        this.start();\r\n    }\r\n\r\n    public void setScaleProp(int angle) {\r\n        scaleProp.set(angle);\r\n    }\r\n\r\n    @Override\r\n    public void handle(long now) {\r\n        // shouldRun() is a typical FPS method\r\n        if (shouldRun(now)) {\r\n            Image image = displayedImageList.get(imageIndex);\r\n            imageProp.set(image);\r\n            if (++imageIndex &gt;= displayedImageList.size()) {\r\n                listIndex = ThreadLocalRandom.current().nextInt(spriteImagesLists.size());\r\n                displayedImageList = spriteImagesLists.get(listIndex);\r\n                imageIndex = 0;\r\n                super.setFramesPerSecond(spriteImagesLists.get(listIndex).size() * 2);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe second one is updating the layoutX &amp; layoutY properties of the image. \r\n\r\n```java\r\n        new AnimationTimer() {\r\n            @Override\r\n            public void handle(long now) {\r\n                int xDelta = playerMovementListener.getXDeltaAndReset();\r\n                if (xDelta != 0) {\r\n                    playerImageView.setLayoutX(playerImageView.getLayoutX() + xDelta);\r\n                }\r\n                int yDelta = playerMovementListener.getYDeltaAndReset();\r\n                if (yDelta != 0) {\r\n                    playerImageView.setLayoutY(playerImageView.getLayoutY() + yDelta);\r\n                }\r\n            }\r\n        }.start();\r\n```\r\n\r\nThose are updated through an EventHandler as shown below\r\n\r\n```java\r\npublic class PlayerMovementListener implements EventHandler&lt;KeyEvent&gt; {\r\n\r\n    private final GameViewManager gameViewManager;\r\n    // Using a Set of keys because I want to detect diagonal movement as well such as UP + LEFT etc.\r\n    private final Set&lt;KeyCode&gt; keysPressed;\r\n    private final AtomicInteger xDeltaCounter;\r\n    private final AtomicInteger yDeltaCounter;\r\n\r\n    public PlayerMovementListener(GameViewManager gameViewManager) {\r\n        this.gameViewManager = gameViewManager;\r\n        this.keysPressed = new HashSet&lt;&gt;();\r\n        this.xDeltaCounter = new AtomicInteger(0);\r\n        this.yDeltaCounter = new AtomicInteger(0);\r\n    }\r\n\r\n    public int getXDeltaAndReset() {\r\n        return xDeltaCounter.getAndSet(0);\r\n    }\r\n\r\n    public int getYDeltaAndReset() {\r\n        return yDeltaCounter.getAndSet(0);\r\n    }\r\n\r\n    @Override\r\n    public void handle(KeyEvent keyEvent) {\r\n        if (KeyEvent.KEY_RELEASED.equals(keyEvent.getEventType())) {\r\n            keysPressed.remove(keyEvent.getCode());\r\n            // Stopping movement on any key released\r\n            // This is fine for now.\r\n            gameViewManager.stopPlayerMoving();\r\n        } else if (KeyEvent.KEY_PRESSED.equals(keyEvent.getEventType())) {\r\n            keysPressed.add(keyEvent.getCode());\r\n\r\n            if (KeyCode.RIGHT.equals(keyEvent.getCode())) {\r\n                gameViewManager.rotatePlayerAnimation(1);\r\n            }\r\n\r\n            if (KeyCode.LEFT.equals(keyEvent.getCode())) {\r\n                gameViewManager.rotatePlayerAnimation(-1);\r\n            }\r\n\r\n            if (Arrays.asList(KeyCode.UP, KeyCode.DOWN, KeyCode.RIGHT, KeyCode.LEFT).contains(keyEvent.getCode())) {\r\n                yDeltaCounter.addAndGet(MovementInput.getLayoutYDelta(keysPressed));\r\n                xDeltaCounter.addAndGet(MovementInput.getLayoutXDelta(keysPressed));\r\n                gameViewManager.startPlayerMoving();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd the relevant methods of the `GameViewManager`\r\n\r\n```java\r\npublic class GameViewManager {\r\n\r\n    private AnchorPane gamePane = ...;\r\n    private PlayerEntity playerEntity = ...;\r\n    private ImageView playerImageView;\r\n    private MultipleImageListAnimation playerAnimationTimer;\r\n    private boolean isPlayerMoving = false;\r\n\r\n    public void startPlayerMoving() {\r\n        Platform.runLater(() -&gt; {\r\n            if (!isPlayerMoving) {\r\n                isPlayerMoving = true;\r\n                playerAnimationTimer.changeSpriteImages(List.of(playerEntity.getRunImages()));\r\n            }\r\n        });\r\n    }\r\n\r\n    public void stopPlayerMoving() {\r\n        Platform.runLater(() -&gt; {\r\n            if (isPlayerMoving) {\r\n                isPlayerMoving = false;\r\n                playerAnimationTimer.changeSpriteImages(List.of(playerEntity.getIdleImages()));\r\n            }\r\n        });\r\n    }\r\n\r\n    public void rotatePlayerAnimation(int angle) {\r\n        playerAnimationTimer.setScaleProp(angle);\r\n    }\r\n\r\n    private void initializeKeyboardListeners() {\r\n        PlayerMovementListener playerMovementListener = new PlayerMovementListener(this);\r\n        gameScene.setOnKeyPressed(playerMovementListener);\r\n        gameScene.setOnKeyReleased(playerMovementListener);\r\n\r\n        new AnimationTimer() {\r\n            @Override\r\n            public void handle(long now) {\r\n                // This is executing constantly, I know of the implications but it&#39;s good for now\r\n                int xDelta = playerMovementListener.getXDeltaAndReset();\r\n                if (xDelta != 0) {\r\n                    playerImageView.setLayoutX(playerImageView.getLayoutX() + xDelta);\r\n                }\r\n                int yDelta = playerMovementListener.getYDeltaAndReset();\r\n                if (yDelta != 0) {\r\n                    playerImageView.setLayoutY(playerImageView.getLayoutY() + yDelta);\r\n                }\r\n            }\r\n        }.start();\r\n    }\r\n\r\n    private void initializePlayerImageView() {\r\n        this.playerImageView = new ImageView();\r\n        playerImageView.setLayoutX(STARTING_WIDTH);\r\n        playerImageView.setLayoutY(STARTING_HEIGHT);\r\n        playerAnimationTimer = new MultipleImageListAnimation(Arrays.asList(playerEntity.getIdleImages()));\r\n        playerAnimationTimer.start();\r\n\r\n        playerImageView.imageProperty().bind(playerAnimationTimer.getImageProp());\r\n        playerImageView.scaleXProperty().bind(playerAnimationTimer.getScaleProp());\r\n        gamePane.getChildren().add(this.playerImageView);\r\n    }\r\n}\r\n```\r\n\r\n---\r\n\r\nNow this approach is working fine for my use case. However I can&#39;t help but notice that there is a very slight but noticeable &quot;lag&quot; when an input key is pressed and until the View actually moves. I can see that the images are cycled to the &quot;running&quot; state immediately but the sprite is not moving until later.  Once it does there is no more lagging on processing the input. Releasing the key and pressing another one displays the same lag at the start of movement. [You can see a recording of this behavior here][1]. I do not know what&#39;s causing this and how I can fix this so any input is appreciated.\r\n\r\n\r\n  [1]: https://imgur.com/a/Se0awZH\r\n\r\n---\r\nEdit: The AbstractAnimationTimer class\r\n\r\n```\r\n  public abstract class AbstractAnimationTimer extends AnimationTimer {\r\n\r\n    public long now;\r\n    protected long FPS_BREAKPOINT;\r\n\r\n    public AbstractAnimationTimer(int framesPerSecond) {\r\n        this.now = 0;\r\n        this.FPS_BREAKPOINT = 1_000_000_000 / framesPerSecond;\r\n    }\r\n\r\n    protected void setFramesPerSecond(int framesPerSecond) {\r\n        this.FPS_BREAKPOINT = 1_000_000_000 / framesPerSecond;\r\n    }\r\n\r\n    public boolean shouldRun(long now) {\r\n        if (now - this.now &gt; this.FPS_BREAKPOINT) {\r\n            this.now = now;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n```\r\n\r\n---\r\n\r\nEdit 2: Reproducible example\r\n\r\n```java\r\nimport javafx.animation.AnimationTimer;\r\nimport javafx.application.Application;\r\nimport javafx.event.EventHandler;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.input.KeyCode;\r\nimport javafx.scene.input.KeyEvent;\r\nimport javafx.scene.layout.AnchorPane;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.scene.shape.Rectangle;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\npublic class Main extends Application {\r\n\r\n    private final Set&lt;KeyCode&gt; keysPressed = new HashSet&lt;&gt;();\r\n    private final AtomicInteger yDeltaCounter = new AtomicInteger(0);\r\n    private final AtomicInteger xDeltaCounter = new AtomicInteger(0);\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n        AnchorPane pane = new AnchorPane();\r\n        Scene scene = new Scene(pane, 800, 800);\r\n        scene.setOnKeyReleased(new EventHandler&lt;KeyEvent&gt;() {\r\n            @Override\r\n            public void handle(KeyEvent keyEvent) {\r\n                keysPressed.clear();\r\n            }\r\n        });\r\n        scene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {\r\n            @Override\r\n            public void handle(KeyEvent keyEvent) {\r\n                if (KeyEvent.KEY_PRESSED.equals(keyEvent.getEventType())) {\r\n                    keysPressed.add(keyEvent.getCode());\r\n                    if (Arrays.asList(KeyCode.UP, KeyCode.DOWN, KeyCode.RIGHT, KeyCode.LEFT).contains(keyEvent.getCode())) {\r\n                        yDeltaCounter.addAndGet(getLayoutYDelta(keysPressed));\r\n                        xDeltaCounter.addAndGet(getLayoutXDelta(keysPressed));\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        primaryStage = new Stage();\r\n        primaryStage.setScene(scene);\r\n        Rectangle rect = new Rectangle(100, 100);\r\n        rect.setFill(Color.RED);\r\n\r\n\r\n        new AnimationTimer() {\r\n            @Override\r\n            public void handle(long now) {\r\n                // This is executing constantly, I know of the implications but it&#39;s good for now\r\n                int xDelta = xDeltaCounter.getAndSet(0);\r\n                if (xDelta != 0) {\r\n                    rect.setLayoutX(rect.getLayoutX() + xDelta);\r\n                }\r\n                int yDelta = yDeltaCounter.getAndSet(0);\r\n                if (yDelta != 0) {\r\n                    rect.setLayoutY(rect.getLayoutY() + yDelta);\r\n                }\r\n            }\r\n        }.start();\r\n\r\n        pane.getChildren().add(rect);\r\n        primaryStage.show();\r\n    }\r\n\r\n    public static int getLayoutXDelta(Set&lt;KeyCode&gt; keysPressed) {\r\n        int xDelta = 0;\r\n        if (keysPressed.isEmpty()) {\r\n            return xDelta;\r\n        }\r\n        if (keysPressed.contains(KeyCode.RIGHT)) {\r\n            xDelta += 10;\r\n        }\r\n        if (keysPressed.contains(KeyCode.LEFT)) {\r\n            xDelta -= 10;\r\n        }\r\n        return xDelta;\r\n    }\r\n\r\n    public static int getLayoutYDelta(Set&lt;KeyCode&gt; keysPressed) {\r\n        int yDelta = 0;\r\n        if (keysPressed.isEmpty()) {\r\n            return yDelta;\r\n        }\r\n        if (keysPressed.contains(KeyCode.UP)) {\r\n            yDelta -= 10;\r\n        }\r\n        if (keysPressed.contains(KeyCode.DOWN)) {\r\n            yDelta += 10;\r\n        }\r\n        return yDelta;\r\n    }\r\n}\r\n```","title":"Input lag when changing layoutX &amp; layoutY on an ImageView using keyboard input","body":"<p>My use case is the following:</p>\n<pre><code>Given an ImageView element, move that around the Pane by using keyboard UP/DOWN/LEFT/RIGHT buttons. \nThe ImageView should by cycling between different images and the source images \nwill change when movement is detected.\n</code></pre>\n<p>I am using two different AnimateTimers for that. The first one is used to &quot;cycle&quot; through a list of Images and update given list when movement is detected.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MultipleImageListAnimation extends AbstractAnimationTimer {\n\n    @Getter\n    private final SimpleObjectProperty&lt;Image&gt; imageProp;\n    @Getter\n    private final SimpleIntegerProperty scaleProp;\n    private volatile List&lt;List&lt;Image&gt;&gt; spriteImagesLists;\n    private volatile List&lt;Image&gt; displayedImageList;\n    private int imageIndex = 0;\n    private int listIndex = 0;\n\n    public MultipleImageListAnimation(List&lt;List&lt;Image&gt;&gt; spriteImagesLists) {\n        super(1);\n        this.imageProp = new SimpleObjectProperty&lt;&gt;();\n        this.scaleProp = new SimpleIntegerProperty(1);\n        this.spriteImagesLists = spriteImagesLists;\n        this.displayedImageList = spriteImagesLists.get(0);\n        if (displayedImageList.size() &gt; 0) {\n            super.setFramesPerSecond(displayedImageList.size() * 2);\n        }\n    }\n\n    public void changeSpriteImages(List&lt;List&lt;Image&gt;&gt; images) {\n        this.stop();\n        this.spriteImagesLists = images;\n        this.listIndex = ThreadLocalRandom.current().nextInt(images.size());\n        this.imageIndex = 0;\n        this.displayedImageList = images.get(listIndex);\n        super.setFramesPerSecond(displayedImageList.size() * 2);\n        this.start();\n    }\n\n    public void setScaleProp(int angle) {\n        scaleProp.set(angle);\n    }\n\n    @Override\n    public void handle(long now) {\n        // shouldRun() is a typical FPS method\n        if (shouldRun(now)) {\n            Image image = displayedImageList.get(imageIndex);\n            imageProp.set(image);\n            if (++imageIndex &gt;= displayedImageList.size()) {\n                listIndex = ThreadLocalRandom.current().nextInt(spriteImagesLists.size());\n                displayedImageList = spriteImagesLists.get(listIndex);\n                imageIndex = 0;\n                super.setFramesPerSecond(spriteImagesLists.get(listIndex).size() * 2);\n            }\n        }\n    }\n}\n</code></pre>\n<p>The second one is updating the layoutX &amp; layoutY properties of the image.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        new AnimationTimer() {\n            @Override\n            public void handle(long now) {\n                int xDelta = playerMovementListener.getXDeltaAndReset();\n                if (xDelta != 0) {\n                    playerImageView.setLayoutX(playerImageView.getLayoutX() + xDelta);\n                }\n                int yDelta = playerMovementListener.getYDeltaAndReset();\n                if (yDelta != 0) {\n                    playerImageView.setLayoutY(playerImageView.getLayoutY() + yDelta);\n                }\n            }\n        }.start();\n</code></pre>\n<p>Those are updated through an EventHandler as shown below</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PlayerMovementListener implements EventHandler&lt;KeyEvent&gt; {\n\n    private final GameViewManager gameViewManager;\n    // Using a Set of keys because I want to detect diagonal movement as well such as UP + LEFT etc.\n    private final Set&lt;KeyCode&gt; keysPressed;\n    private final AtomicInteger xDeltaCounter;\n    private final AtomicInteger yDeltaCounter;\n\n    public PlayerMovementListener(GameViewManager gameViewManager) {\n        this.gameViewManager = gameViewManager;\n        this.keysPressed = new HashSet&lt;&gt;();\n        this.xDeltaCounter = new AtomicInteger(0);\n        this.yDeltaCounter = new AtomicInteger(0);\n    }\n\n    public int getXDeltaAndReset() {\n        return xDeltaCounter.getAndSet(0);\n    }\n\n    public int getYDeltaAndReset() {\n        return yDeltaCounter.getAndSet(0);\n    }\n\n    @Override\n    public void handle(KeyEvent keyEvent) {\n        if (KeyEvent.KEY_RELEASED.equals(keyEvent.getEventType())) {\n            keysPressed.remove(keyEvent.getCode());\n            // Stopping movement on any key released\n            // This is fine for now.\n            gameViewManager.stopPlayerMoving();\n        } else if (KeyEvent.KEY_PRESSED.equals(keyEvent.getEventType())) {\n            keysPressed.add(keyEvent.getCode());\n\n            if (KeyCode.RIGHT.equals(keyEvent.getCode())) {\n                gameViewManager.rotatePlayerAnimation(1);\n            }\n\n            if (KeyCode.LEFT.equals(keyEvent.getCode())) {\n                gameViewManager.rotatePlayerAnimation(-1);\n            }\n\n            if (Arrays.asList(KeyCode.UP, KeyCode.DOWN, KeyCode.RIGHT, KeyCode.LEFT).contains(keyEvent.getCode())) {\n                yDeltaCounter.addAndGet(MovementInput.getLayoutYDelta(keysPressed));\n                xDeltaCounter.addAndGet(MovementInput.getLayoutXDelta(keysPressed));\n                gameViewManager.startPlayerMoving();\n            }\n        }\n    }\n}\n</code></pre>\n<p>And the relevant methods of the <code>GameViewManager</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GameViewManager {\n\n    private AnchorPane gamePane = ...;\n    private PlayerEntity playerEntity = ...;\n    private ImageView playerImageView;\n    private MultipleImageListAnimation playerAnimationTimer;\n    private boolean isPlayerMoving = false;\n\n    public void startPlayerMoving() {\n        Platform.runLater(() -&gt; {\n            if (!isPlayerMoving) {\n                isPlayerMoving = true;\n                playerAnimationTimer.changeSpriteImages(List.of(playerEntity.getRunImages()));\n            }\n        });\n    }\n\n    public void stopPlayerMoving() {\n        Platform.runLater(() -&gt; {\n            if (isPlayerMoving) {\n                isPlayerMoving = false;\n                playerAnimationTimer.changeSpriteImages(List.of(playerEntity.getIdleImages()));\n            }\n        });\n    }\n\n    public void rotatePlayerAnimation(int angle) {\n        playerAnimationTimer.setScaleProp(angle);\n    }\n\n    private void initializeKeyboardListeners() {\n        PlayerMovementListener playerMovementListener = new PlayerMovementListener(this);\n        gameScene.setOnKeyPressed(playerMovementListener);\n        gameScene.setOnKeyReleased(playerMovementListener);\n\n        new AnimationTimer() {\n            @Override\n            public void handle(long now) {\n                // This is executing constantly, I know of the implications but it's good for now\n                int xDelta = playerMovementListener.getXDeltaAndReset();\n                if (xDelta != 0) {\n                    playerImageView.setLayoutX(playerImageView.getLayoutX() + xDelta);\n                }\n                int yDelta = playerMovementListener.getYDeltaAndReset();\n                if (yDelta != 0) {\n                    playerImageView.setLayoutY(playerImageView.getLayoutY() + yDelta);\n                }\n            }\n        }.start();\n    }\n\n    private void initializePlayerImageView() {\n        this.playerImageView = new ImageView();\n        playerImageView.setLayoutX(STARTING_WIDTH);\n        playerImageView.setLayoutY(STARTING_HEIGHT);\n        playerAnimationTimer = new MultipleImageListAnimation(Arrays.asList(playerEntity.getIdleImages()));\n        playerAnimationTimer.start();\n\n        playerImageView.imageProperty().bind(playerAnimationTimer.getImageProp());\n        playerImageView.scaleXProperty().bind(playerAnimationTimer.getScaleProp());\n        gamePane.getChildren().add(this.playerImageView);\n    }\n}\n</code></pre>\n<hr />\n<p>Now this approach is working fine for my use case. However I can't help but notice that there is a very slight but noticeable &quot;lag&quot; when an input key is pressed and until the View actually moves. I can see that the images are cycled to the &quot;running&quot; state immediately but the sprite is not moving until later.  Once it does there is no more lagging on processing the input. Releasing the key and pressing another one displays the same lag at the start of movement. <a href=\"https://imgur.com/a/Se0awZH\" rel=\"nofollow noreferrer\">You can see a recording of this behavior here</a>. I do not know what's causing this and how I can fix this so any input is appreciated.</p>\n<hr />\n<p>Edit: The AbstractAnimationTimer class</p>\n<pre><code>  public abstract class AbstractAnimationTimer extends AnimationTimer {\n\n    public long now;\n    protected long FPS_BREAKPOINT;\n\n    public AbstractAnimationTimer(int framesPerSecond) {\n        this.now = 0;\n        this.FPS_BREAKPOINT = 1_000_000_000 / framesPerSecond;\n    }\n\n    protected void setFramesPerSecond(int framesPerSecond) {\n        this.FPS_BREAKPOINT = 1_000_000_000 / framesPerSecond;\n    }\n\n    public boolean shouldRun(long now) {\n        if (now - this.now &gt; this.FPS_BREAKPOINT) {\n            this.now = now;\n            return true;\n        }\n        return false;\n    }\n</code></pre>\n<hr />\n<p>Edit 2: Reproducible example</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.animation.AnimationTimer;\nimport javafx.application.Application;\nimport javafx.event.EventHandler;\nimport javafx.scene.Scene;\nimport javafx.scene.input.KeyCode;\nimport javafx.scene.input.KeyEvent;\nimport javafx.scene.layout.AnchorPane;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class Main extends Application {\n\n    private final Set&lt;KeyCode&gt; keysPressed = new HashSet&lt;&gt;();\n    private final AtomicInteger yDeltaCounter = new AtomicInteger(0);\n    private final AtomicInteger xDeltaCounter = new AtomicInteger(0);\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        AnchorPane pane = new AnchorPane();\n        Scene scene = new Scene(pane, 800, 800);\n        scene.setOnKeyReleased(new EventHandler&lt;KeyEvent&gt;() {\n            @Override\n            public void handle(KeyEvent keyEvent) {\n                keysPressed.clear();\n            }\n        });\n        scene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {\n            @Override\n            public void handle(KeyEvent keyEvent) {\n                if (KeyEvent.KEY_PRESSED.equals(keyEvent.getEventType())) {\n                    keysPressed.add(keyEvent.getCode());\n                    if (Arrays.asList(KeyCode.UP, KeyCode.DOWN, KeyCode.RIGHT, KeyCode.LEFT).contains(keyEvent.getCode())) {\n                        yDeltaCounter.addAndGet(getLayoutYDelta(keysPressed));\n                        xDeltaCounter.addAndGet(getLayoutXDelta(keysPressed));\n                    }\n                }\n            }\n        });\n\n        primaryStage = new Stage();\n        primaryStage.setScene(scene);\n        Rectangle rect = new Rectangle(100, 100);\n        rect.setFill(Color.RED);\n\n\n        new AnimationTimer() {\n            @Override\n            public void handle(long now) {\n                // This is executing constantly, I know of the implications but it's good for now\n                int xDelta = xDeltaCounter.getAndSet(0);\n                if (xDelta != 0) {\n                    rect.setLayoutX(rect.getLayoutX() + xDelta);\n                }\n                int yDelta = yDeltaCounter.getAndSet(0);\n                if (yDelta != 0) {\n                    rect.setLayoutY(rect.getLayoutY() + yDelta);\n                }\n            }\n        }.start();\n\n        pane.getChildren().add(rect);\n        primaryStage.show();\n    }\n\n    public static int getLayoutXDelta(Set&lt;KeyCode&gt; keysPressed) {\n        int xDelta = 0;\n        if (keysPressed.isEmpty()) {\n            return xDelta;\n        }\n        if (keysPressed.contains(KeyCode.RIGHT)) {\n            xDelta += 10;\n        }\n        if (keysPressed.contains(KeyCode.LEFT)) {\n            xDelta -= 10;\n        }\n        return xDelta;\n    }\n\n    public static int getLayoutYDelta(Set&lt;KeyCode&gt; keysPressed) {\n        int yDelta = 0;\n        if (keysPressed.isEmpty()) {\n            return yDelta;\n        }\n        if (keysPressed.contains(KeyCode.UP)) {\n            yDelta -= 10;\n        }\n        if (keysPressed.contains(KeyCode.DOWN)) {\n            yDelta += 10;\n        }\n        return yDelta;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","authentication","ldap"],"answers":[{"comments":[{"owner":{"account_id":7750531,"reputation":119,"user_id":5866599,"display_name":"Sajith Wijerathne"},"score":0,"creation_date":1571232739,"post_id":58409091,"comment_id":103171961,"body_markdown":"Thanks for the reply. I can&#39;t understand the error mentioning this as a credential issue. I have doubt on the SECURITY_PRINCIPAL.","body":"Thanks for the reply. I can&#39;t understand the error mentioning this as a credential issue. I have doubt on the SECURITY_PRINCIPAL."},{"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"score":1,"creation_date":1571301498,"post_id":58409091,"comment_id":103197667,"body_markdown":"You may want to get a known good LDAP Browser (or use a ldapsearch utility) to verify your parameters. (I like Apache Studio). The LDAP result code You might try using the userPrincipal name for login (username@example.com) instead of the DN. Sometimes improper escaping of the DN is a culprit but I would assume you would get a different result code if the username was wrong.","body":"You may want to get a known good LDAP Browser (or use a ldapsearch utility) to verify your parameters. (I like Apache Studio). The LDAP result code You might try using the userPrincipal name for login (username@example.com) instead of the DN. Sometimes improper escaping of the DN is a culprit but I would assume you would get a different result code if the username was wrong."},{"owner":{"account_id":365885,"reputation":1782,"user_id":711072,"accept_rate":86,"display_name":"Martin"},"score":1,"creation_date":1629321347,"post_id":58409091,"comment_id":121659390,"body_markdown":"(username@example.com) instead of the DN was my case - thanks !","body":"(username@example.com) instead of the DN was my case - thanks !"}],"tags":[],"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1691520180,"creation_date":1571215009,"answer_id":58409091,"question_id":58391319,"body_markdown":"An error response with LDAP error [code 49 ... data 52e][1] &quot;Returns when username is valid **but password/credential is invalid**.&quot; \r\n\r\nThere could be infrastructure issues such as [when the domain controller computer account may not be synchronized with the Key Distribution Center (KDC)][2]. However you would probably have a lot more other issues when this condition exists.\r\n\r\n\r\n  [1]:https://ldapwiki.com/wiki/Wiki.jsp?page=Common%20Active%20Directory%20Bind%20Errors\r\n  [2]: https://learn.microsoft.com/en-us/previous-versions/tn-archive/cc526636(v=technet.10)?redirectedfrom=MSDN","title":"LDAP error code 49 AcceptSecurityContext error data 52e v2580 even with the correct credentials","body":"<p>An error response with LDAP error <a href=\"https://ldapwiki.com/wiki/Wiki.jsp?page=Common%20Active%20Directory%20Bind%20Errors\" rel=\"nofollow noreferrer\">code 49 ... data 52e</a> &quot;Returns when username is valid <strong>but password/credential is invalid</strong>.&quot;</p>\n<p>There could be infrastructure issues such as <a href=\"https://learn.microsoft.com/en-us/previous-versions/tn-archive/cc526636(v=technet.10)?redirectedfrom=MSDN\" rel=\"nofollow noreferrer\">when the domain controller computer account may not be synchronized with the Key Distribution Center (KDC)</a>. However you would probably have a lot more other issues when this condition exists.</p>\n"},{"tags":[],"owner":{"account_id":61488,"reputation":2363,"user_id":183240,"accept_rate":67,"display_name":"Aaron C. de Bruyn"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1603321167,"creation_date":1603321167,"answer_id":64472857,"question_id":58391319,"body_markdown":"This can occur when your account requires a SmartCard to sign in.\r\n\r\nThere is a setting in Active Directory called &quot;Smart card is required for interactive logon&quot;.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c2E8W.png","title":"LDAP error code 49 AcceptSecurityContext error data 52e v2580 even with the correct credentials","body":"<p>This can occur when your account requires a SmartCard to sign in.</p>\n<p>There is a setting in Active Directory called &quot;Smart card is required for interactive logon&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/c2E8W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c2E8W.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":9572330,"reputation":924,"user_id":7930987,"accept_rate":50,"display_name":"BabaNew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675542818,"creation_date":1675450932,"answer_id":75339991,"question_id":58391319,"body_markdown":"You might get this error in Active directory (Windows popular implementation of LDAP) if you specify the username but not the windows domain.\r\n\r\nThis is what you should do:\r\n\r\nUSERNAME: &lt;YOUR_WINDOWS_DOMAIN&gt;\\\\&lt;YOUR_USERNAME&gt;\r\n\r\nPASSWORD: &lt;YOUR_PASSWORD&gt;","title":"LDAP error code 49 AcceptSecurityContext error data 52e v2580 even with the correct credentials","body":"<p>You might get this error in Active directory (Windows popular implementation of LDAP) if you specify the username but not the windows domain.</p>\n<p>This is what you should do:</p>\n<p>USERNAME: &lt;YOUR_WINDOWS_DOMAIN&gt;\\&lt;YOUR_USERNAME&gt;</p>\n<p>PASSWORD: &lt;YOUR_PASSWORD&gt;</p>\n"}],"owner":{"account_id":7750531,"reputation":119,"user_id":5866599,"display_name":"Sajith Wijerathne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37996,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1691520180,"creation_date":1571131261,"question_id":58391319,"body_markdown":"I&#39;m adding LDAP authentication to the spring-boot application. All set accordingly and I&#39;m getting &quot;LDAP error code 49 AcceptSecurityContext error data 52e v2580&quot; error even after providing correct credentials.\r\n\r\nI&#39;m using `import javax.naming.Context;` and have mentioned the code below.\r\n```java\r\nString url = ldap_url;\r\nString domain = ldap_domain;\r\nString uname = request.getUsername();\r\nString pwd = request.getPassword();\r\nboolean authentication = false;\r\nboolean error = true;\r\nString msg;\r\nString ldapSearchBase = &quot;OU=TEST_OU, DC=DC2, DC=DC1&quot;;\r\n   \r\n// create env for initial context\r\nHashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\r\nenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\nenv.put(Context.PROVIDER_URL, url);\r\nenv.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\nenv.put(Context.SECURITY_PRINCIPAL, &quot;CN=&quot; + uname + &quot;@&quot; + domain + &quot;,&quot; + ldapSearchBase);\r\nenv.put(Context.SECURITY_CREDENTIALS, pwd);\r\nNamingEnumeration results = null;\r\n\r\ntry {\r\n    LdapContext ctx = new InitialLdapContext(env, null);\r\n    authentication = true;\r\n    error = false;\r\n} catch (NamingException e) {\r\n    logger.error(&quot;LDAP error for :{NamingException}&quot; + e);\r\n    return ResponseEntity.ok(new ApiResponse(true, e.getMessage()));\r\n} finally {\r\n    if (!error) {\r\n        msg = &quot;Login success!!!&quot;;\r\n    } else {\r\n        msg = &quot;Authentication failed!&quot;;\r\n    }\r\n}\r\n\r\nlogger.info(&quot;exitinig...&quot;);\r\n\r\nif (authentication) {\r\n    return ResponseEntity.ok(new ApiResponse(false, msg));\r\n} else {\r\n    return ResponseEntity.ok(new ApiResponse(true, msg));\r\n}\r\n```\r\nError is catching as `NamingException`.","title":"LDAP error code 49 AcceptSecurityContext error data 52e v2580 even with the correct credentials","body":"<p>I'm adding LDAP authentication to the spring-boot application. All set accordingly and I'm getting \"LDAP error code 49 AcceptSecurityContext error data 52e v2580\" error even after providing correct credentials.</p>\n\n<p>I'm using <code>import javax.naming.Context;</code> and have mentioned the code below.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String url = ldap_url;\nString domain = ldap_domain;\nString uname = request.getUsername();\nString pwd = request.getPassword();\nboolean authentication = false;\nboolean error = true;\nString msg;\nString ldapSearchBase = \"OU=TEST_OU, DC=DC2, DC=DC1\";\n\n// create env for initial context\nHashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\nenv.put(Context.INITIAL_CONTEXT_FACTORY, \"com.sun.jndi.ldap.LdapCtxFactory\");\nenv.put(Context.PROVIDER_URL, url);\nenv.put(Context.SECURITY_AUTHENTICATION, \"simple\");\nenv.put(Context.SECURITY_PRINCIPAL, \"CN=\" + uname + \"@\" + domain + \",\" + ldapSearchBase);\nenv.put(Context.SECURITY_CREDENTIALS, pwd);\nNamingEnumeration results = null;\n\ntry {\n    LdapContext ctx = new InitialLdapContext(env, null);\n    authentication = true;\n    error = false;\n} catch (NamingException e) {\n    logger.error(\"LDAP error for :{NamingException}\" + e);\n    return ResponseEntity.ok(new ApiResponse(true, e.getMessage()));\n} finally {\n    if (!error) {\n        msg = \"Login success!!!\";\n    } else {\n        msg = \"Authentication failed!\";\n    }\n}\n\nlogger.info(\"exitinig...\");\n\nif (authentication) {\n    return ResponseEntity.ok(new ApiResponse(false, msg));\n} else {\n    return ResponseEntity.ok(new ApiResponse(true, msg));\n}\n</code></pre>\n\n<p>Error is catching as <code>NamingException</code>.</p>\n"},{"tags":["java","integration","aem","akamai","purge"],"answers":[{"tags":[],"owner":{"account_id":29186923,"reputation":71,"user_id":22359883,"display_name":"Dana A"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691520164,"creation_date":1691520164,"answer_id":76862390,"question_id":76759721,"body_markdown":"The way we did it was to add replication actions carried out by an akamai replication agent - it was a fairly complex system to set up. Especially since all the dynamic includes on a given page need to be purged with their specific urls, not just the main published page (this may not be the case for you)\r\n\r\nuse https://mvnrepository.com/artifact/com.akamai.edgegrid\r\n\r\nIn the replicator, create an org.apache.sling.event.job.JobManager object and add a job for each url or set of up to 10 urls that need to be addressed (invalidated in akamai, usually).\r\n\r\nin each job, create the com.akamai.edgegrid.signer.ClientCredential and the ApacheHttpClientEdgeGridInterceptor and ApacheHttpClientEdgeGridRoutePlanner objects\r\n\r\nbuild the request according to the instructions you read - then build your post using the EdgeGridInterceptor and RoutePlanner with HttpClientBuilder\r\n\r\nthen when you post it, it will get to the right place in akamai.\r\n\r\n","title":"How to integrate Akamai FastPurgeAPI into AEM using Java code?","body":"<p>The way we did it was to add replication actions carried out by an akamai replication agent - it was a fairly complex system to set up. Especially since all the dynamic includes on a given page need to be purged with their specific urls, not just the main published page (this may not be the case for you)</p>\n<p>use <a href=\"https://mvnrepository.com/artifact/com.akamai.edgegrid\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.akamai.edgegrid</a></p>\n<p>In the replicator, create an org.apache.sling.event.job.JobManager object and add a job for each url or set of up to 10 urls that need to be addressed (invalidated in akamai, usually).</p>\n<p>in each job, create the com.akamai.edgegrid.signer.ClientCredential and the ApacheHttpClientEdgeGridInterceptor and ApacheHttpClientEdgeGridRoutePlanner objects</p>\n<p>build the request according to the instructions you read - then build your post using the EdgeGridInterceptor and RoutePlanner with HttpClientBuilder</p>\n<p>then when you post it, it will get to the right place in akamai.</p>\n"}],"owner":{"account_id":13059388,"reputation":163,"user_id":9437111,"display_name":"Bhavani K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691520164,"creation_date":1690263593,"question_id":76759721,"body_markdown":"I am trying to integrate FastPurge API into my AEM Event listener. I have read documentation but couldn&#39;t follow it.\r\n\r\nBelow, I have attached my listener.\r\n\r\n    public class PublishListener implements EventHandler() \r\n    private static final Logger logger LoggerFactory.getLogger(PublishListener.class);\r\n    \r\n        public void handleEvent (Event event) {\r\n        \r\n        try {\r\n        \r\n        logger.info(&quot;in Event type:{}&quot;, event.getTopic());\r\n        \r\n        if (ReplicationAction, fromEvent (event).getType().equals(ReplicationActionType.ACTIVATE))\r\n        \r\n    logger.info(&quot;\\n Page Published: ()&quot;, ReplicationAction.fromEvent (event).getPath());\r\n        \r\n        if(ReplicationAction.fromEvent (event).getType().equals(ReplicationActionType.DEACTIVATE) || ReplicationAction.fromEvent (event).getType().equals(ReplicationActionType.DELETE)) \r\n    `logger.info(&quot;In Page Deactivated: (), ReplicationAction.fromEvent (event).getPath())`;\r\n        \r\n        } \r\n    catch (Exception e) {\r\n        \r\n        logger.info(&quot;in Error&quot;, e.getMessage());}}\r\n\r\n\r\nCould you please help me to integrate the code with fastpurge API of akamai to purge?\r\n\r\nThanks in Advance!\r\n","title":"How to integrate Akamai FastPurgeAPI into AEM using Java code?","body":"<p>I am trying to integrate FastPurge API into my AEM Event listener. I have read documentation but couldn't follow it.</p>\n<p>Below, I have attached my listener.</p>\n<pre><code>public class PublishListener implements EventHandler() \nprivate static final Logger logger LoggerFactory.getLogger(PublishListener.class);\n\n    public void handleEvent (Event event) {\n    \n    try {\n    \n    logger.info(&quot;in Event type:{}&quot;, event.getTopic());\n    \n    if (ReplicationAction, fromEvent (event).getType().equals(ReplicationActionType.ACTIVATE))\n    \nlogger.info(&quot;\\n Page Published: ()&quot;, ReplicationAction.fromEvent (event).getPath());\n    \n    if(ReplicationAction.fromEvent (event).getType().equals(ReplicationActionType.DEACTIVATE) || ReplicationAction.fromEvent (event).getType().equals(ReplicationActionType.DELETE)) \n`logger.info(&quot;In Page Deactivated: (), ReplicationAction.fromEvent (event).getPath())`;\n    \n    } \ncatch (Exception e) {\n    \n    logger.info(&quot;in Error&quot;, e.getMessage());}}\n</code></pre>\n<p>Could you please help me to integrate the code with fastpurge API of akamai to purge?</p>\n<p>Thanks in Advance!</p>\n"},{"tags":["java","eclipse","jpa","eclipselink"],"answers":[{"tags":[],"owner":{"account_id":157771,"reputation":30404,"user_id":375953,"accept_rate":53,"display_name":"dira"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1296043058,"creation_date":1296043058,"answer_id":4804292,"question_id":4804025,"body_markdown":"IF you use `maven`\r\n\r\n 1. Issue `mvn eclipse:eclipse -DdownloadSource=true` command, to download the sources jars to local `.m2` repo.\r\n 2. refresh the project in eclipse.\r\n\r\nIf you use `m2eclipse` plugin, \r\n\r\n 1. right click on project --&gt; Maven --&gt; Download Sources.\r\n 2. right click on project --&gt; Maven --&gt; Update Project Configuration.","title":"javax.persistence.* sources, where?","body":"<p>IF you use <code>maven</code></p>\n\n<ol>\n<li>Issue <code>mvn eclipse:eclipse -DdownloadSource=true</code> command, to download the sources jars to local <code>.m2</code> repo.</li>\n<li>refresh the project in eclipse.</li>\n</ol>\n\n<p>If you use <code>m2eclipse</code> plugin, </p>\n\n<ol>\n<li>right click on project --> Maven --> Download Sources.</li>\n<li>right click on project --> Maven --> Update Project Configuration.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":287076,"reputation":1916,"user_id":586682,"display_name":"pnt"},"score":0,"creation_date":1296047587,"post_id":4804330,"comment_id":5325295,"body_markdown":"I don&#39;t think so - both are taken from the same archive that i downloaded a couple of weeks ago. The distribution should be in sync. Also, the sources are in a zip file.","body":"I don&#39;t think so - both are taken from the same archive that i downloaded a couple of weeks ago. The distribution should be in sync. Also, the sources are in a zip file."}],"tags":[],"owner":{"account_id":51415,"reputation":24508,"user_id":153621,"accept_rate":88,"display_name":"nanda"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1296043254,"creation_date":1296043254,"answer_id":4804330,"question_id":4804025,"body_markdown":"Maybe you used different version for the classes jar and the sources jar?","title":"javax.persistence.* sources, where?","body":"<p>Maybe you used different version for the classes jar and the sources jar?</p>\n"},{"tags":[],"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1296050067,"creation_date":1296050067,"answer_id":4805303,"question_id":4804025,"body_markdown":"You can get the equivalent from Apache\r\nhttp://repo2.maven.org/maven2/org/apache/geronimo/specs/geronimo-jpa_2.0_spec/1.1/\r\nand that directory has source and runtime jar. And that&#39;s under a more flexible Apache 2 license","title":"javax.persistence.* sources, where?","body":"<p>You can get the equivalent from Apache\n<a href=\"http://repo2.maven.org/maven2/org/apache/geronimo/specs/geronimo-jpa_2.0_spec/1.1/\" rel=\"nofollow\">http://repo2.maven.org/maven2/org/apache/geronimo/specs/geronimo-jpa_2.0_spec/1.1/</a>\nand that directory has source and runtime jar. And that's under a more flexible Apache 2 license</p>\n"},{"comments":[{"owner":{"account_id":287076,"reputation":1916,"user_id":586682,"display_name":"pnt"},"score":1,"creation_date":1296053453,"post_id":4805363,"comment_id":5326672,"body_markdown":"Thanks, the .jar labeled with &quot;source&quot; did the trick! \n\nI know that its only a spec and its mostly interfaces, but i wanted to take a look while debugging today - mainly the javadoc that comes when you mouseover the method.","body":"Thanks, the .jar labeled with &quot;source&quot; did the trick!   I know that its only a spec and its mostly interfaces, but i wanted to take a look while debugging today - mainly the javadoc that comes when you mouseover the method."},{"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"score":0,"creation_date":1386390779,"post_id":4805363,"comment_id":30531046,"body_markdown":"I did a wget http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/jpa/plugins/javax.persistence.source_2.0.101.v201206242320.jar , unzipped it and when eclipse asked for the source, I just selected the unzipped source. Now, I am able to see the source code when I hover over the javax.persistence.xyz methods. Thanks a lot.","body":"I did a wget <a href=\"http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/jpa/plugins/javax.persistence.source_2.0.101.v201206242320.jar\" rel=\"nofollow noreferrer\">dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/jpa&zwnj;&#8203;/&hellip;</a> , unzipped it and when eclipse asked for the source, I just selected the unzipped source. Now, I am able to see the source code when I hover over the javax.persistence.xyz methods. Thanks a lot."},{"owner":{"account_id":230213,"reputation":20200,"user_id":493682,"accept_rate":82,"display_name":"William"},"score":0,"creation_date":1691376411,"post_id":4805363,"comment_id":135478314,"body_markdown":"Unfortunately that URL is no longer valid and nothing resembling it remains among the projects of the Eclipse Project.","body":"Unfortunately that URL is no longer valid and nothing resembling it remains among the projects of the Eclipse Project."}],"tags":[],"owner":{"account_id":181890,"reputation":17919,"user_id":416206,"accept_rate":40,"display_name":"James"},"comment_count":3,"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1296050431,"creation_date":1296050431,"answer_id":4805363,"question_id":4804025,"body_markdown":"I think if you create a JPA project type in Eclipse you will be able to see the JPA source, or perhaps load the JPA module.\r\n\r\nOnly the source code to EclipseLink is in the eclipselink-src.jar, you can access the source to JPA from the EclipseLink repository,\r\n\r\nhttp://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/jpa/plugins/\r\n\r\nThe source is not that interesting for JPA, as it is a spec, and all interfaces, there is little to no real code.\r\n","title":"javax.persistence.* sources, where?","body":"<p>I think if you create a JPA project type in Eclipse you will be able to see the JPA source, or perhaps load the JPA module.</p>\n\n<p>Only the source code to EclipseLink is in the eclipselink-src.jar, you can access the source to JPA from the EclipseLink repository,</p>\n\n<p><a href=\"http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/jpa/plugins/\" rel=\"noreferrer\">http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/jpa/plugins/</a></p>\n\n<p>The source is not that interesting for JPA, as it is a spec, and all interfaces, there is little to no real code.</p>\n"},{"comments":[{"owner":{"account_id":230213,"reputation":20200,"user_id":493682,"accept_rate":82,"display_name":"William"},"score":0,"creation_date":1691376301,"post_id":22675551,"comment_id":135478310,"body_markdown":"Unfortunately that URL is no longer valid and nothing resembling it remains in the Eclipse GitHUb account.","body":"Unfortunately that URL is no longer valid and nothing resembling it remains in the Eclipse GitHUb account."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1691512875,"post_id":22675551,"comment_id":135500685,"body_markdown":"https://github.com/jakartaee/persistence seems to be there for me and shows the project is accessible via ssh with git@github.com:jakartaee/persistence.git","body":"<a href=\"https://github.com/jakartaee/persistence\" rel=\"nofollow noreferrer\">github.com/jakartaee/persistence</a> seems to be there for me and shows the project is accessible via ssh with git@github.com:jakartaee/persistence.git"}],"tags":[],"owner":{"account_id":707951,"reputation":2494,"user_id":616903,"display_name":"Andrei Sura"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1691419177,"creation_date":1395878059,"answer_id":22675551,"question_id":4804025,"body_markdown":"# 2023 update\r\n\r\nThe actual implementations of the interfaces can be seen by cloning the git repo:\r\n```\r\n    git clone git@github.com:jakartaee/persistence.git jakartaee_persistence\r\n    cd $_\r\n\r\n    grep -irn &#39;close()&#39; *\r\napi/src/main/java/jakarta/persistence/EntityManagerFactory.java:133:    \r\n    public void close();\r\napi/src/main/java/jakarta/persistence/EntityManager.java:811:    public void close();\r\n```\r\n\r\n# outdated info\r\n    git clone https://github.com/eclipse/javax.persistence.git\r\n    cd javax.persistence\r\n    grep -ir &#39;close()&#39; *\r\n    \r\n\r\n== Then find a specific function\r\n\r\n    grep -ir &#39;close()&#39; *\r\n    src/javax/persistence/EntityManager.java:    public void close();\r\n    src/javax/persistence/EntityManagerFactory.java:    public void close();\r\n    src/javax/persistence/spi/PersistenceProviderResolverHolder.java: in.close();\r\n\r\n","title":"javax.persistence.* sources, where?","body":"<h1>2023 update</h1>\n<p>The actual implementations of the interfaces can be seen by cloning the git repo:</p>\n<pre><code>    git clone git@github.com:jakartaee/persistence.git jakartaee_persistence\n    cd $_\n\n    grep -irn 'close()' *\napi/src/main/java/jakarta/persistence/EntityManagerFactory.java:133:    \n    public void close();\napi/src/main/java/jakarta/persistence/EntityManager.java:811:    public void close();\n</code></pre>\n<h1>outdated info</h1>\n<pre><code>git clone https://github.com/eclipse/javax.persistence.git\ncd javax.persistence\ngrep -ir 'close()' *\n</code></pre>\n<p>== Then find a specific function</p>\n<pre><code>grep -ir 'close()' *\nsrc/javax/persistence/EntityManager.java:    public void close();\nsrc/javax/persistence/EntityManagerFactory.java:    public void close();\nsrc/javax/persistence/spi/PersistenceProviderResolverHolder.java: in.close();\n</code></pre>\n"}],"owner":{"account_id":287076,"reputation":1916,"user_id":586682,"display_name":"pnt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15016,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"closed_date":1437374881,"accepted_answer_id":4805363,"answer_count":5,"score":16,"last_activity_date":1691520064,"creation_date":1296041249,"question_id":4804025,"body_markdown":"I might be missing something really obvious here, but I couldn&#39;t find the sources for a few classes from the javax.persistence package.  \r\n\r\nI&#39;m using EclipseLink as a JPA provider. When I tried Ctrl+left clicking a method of the EntityManager interface, Eclipse said that I should attach the sources since it can&#39;t find them. I tried attaching the EclipseLink ones but it complained it cannot find the source for EntityManager there.  \r\n\r\nWhat sources do I need to attach in order to view the code in Eclipse? Could somebody provide a link?","title":"javax.persistence.* sources, where?","body":"<p>I might be missing something really obvious here, but I couldn't find the sources for a few classes from the javax.persistence package.  </p>\n\n<p>I'm using EclipseLink as a JPA provider. When I tried Ctrl+left clicking a method of the EntityManager interface, Eclipse said that I should attach the sources since it can't find them. I tried attaching the EclipseLink ones but it complained it cannot find the source for EntityManager there.  </p>\n\n<p>What sources do I need to attach in order to view the code in Eclipse? Could somebody provide a link?</p>\n"},{"tags":["java","multithreading","debugging","project-loom","virtual-threads"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1696416439,"post_id":76862339,"comment_id":136149266,"body_markdown":"It’s not a preview anymore. But I don’t know when VisualVM will catch up…","body":"It’s not a preview anymore. But I don’t know when VisualVM will catch up…"},{"owner":{"account_id":6995097,"reputation":1409,"user_id":5363011,"display_name":"George Leung"},"score":1,"creation_date":1697522159,"post_id":76862339,"comment_id":136286721,"body_markdown":"For now you can use `jcmd &lt;pid&gt; Thread.dump_to_file -format=json dump.json`","body":"For now you can use <code>jcmd &lt;pid&gt; Thread.dump_to_file -format=json dump.json</code>"},{"owner":{"account_id":25202,"reputation":2920,"user_id":64635,"accept_rate":100,"display_name":"chesterbr"},"score":0,"creation_date":1697654216,"post_id":76862339,"comment_id":136308443,"body_markdown":"@GeorgeLeung that&#39;s a great idea! Sure, not as practical as VisualVM, but gives me a snapshot (and some inspiration for built-in monitoring until some GUI tool pops up). Thank you!","body":"@GeorgeLeung that&#39;s a great idea! Sure, not as practical as VisualVM, but gives me a snapshot (and some inspiration for built-in monitoring until some GUI tool pops up). Thank you!"},{"owner":{"account_id":6995097,"reputation":1409,"user_id":5363011,"display_name":"George Leung"},"score":1,"creation_date":1697654565,"post_id":76862339,"comment_id":136308503,"body_markdown":"Let&#39;s hope they make it into VisualVM soon.","body":"Let&#39;s hope they make it into VisualVM soon."}],"owner":{"account_id":25202,"reputation":2920,"user_id":64635,"accept_rate":100,"display_name":"chesterbr"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691519813,"creation_date":1691519813,"question_id":76862339,"body_markdown":"I have been using [Project Loom][1] to revive a game server - it&#39;s very old code that was written back when green threads were a thing, so writing a server on one-thread-per-connection model was not unreasonable - and it works quite well, in particular considering it&#39;s a preview feature.\r\n\r\n*(I know, it&#39;s a preview feature, but this is a personal project and I&#39;m happy to adjust if APIs change in the future - beats rewriting battle-tested code that already does its job well)*\r\n\r\nOn a traditional, thread-based app, I&#39;d use the likes of [VisualVM][2] to inspect the running threads - but virtual threads being actually workloads, they won&#39;t show up there (I only see the thread pool that they share). I wonder if someone has already come up with a tool that allows one to inspect the virtual threads (e.g., to know precisely where they are blocked or whether they are running, how many of them are around, etc); it would help me a lot with debugging minor stuff.\r\n\r\nAny advice?\r\n\r\n\r\n  [1]: https://blogs.oracle.com/javamagazine/post/going-inside-javas-project-loom-and-virtual-threads\r\n  [2]: https://visualvm.github.io/","title":"How to inspect Virtual Threads on a running JVM?","body":"<p>I have been using <a href=\"https://blogs.oracle.com/javamagazine/post/going-inside-javas-project-loom-and-virtual-threads\" rel=\"nofollow noreferrer\">Project Loom</a> to revive a game server - it's very old code that was written back when green threads were a thing, so writing a server on one-thread-per-connection model was not unreasonable - and it works quite well, in particular considering it's a preview feature.</p>\n<p><em>(I know, it's a preview feature, but this is a personal project and I'm happy to adjust if APIs change in the future - beats rewriting battle-tested code that already does its job well)</em></p>\n<p>On a traditional, thread-based app, I'd use the likes of <a href=\"https://visualvm.github.io/\" rel=\"nofollow noreferrer\">VisualVM</a> to inspect the running threads - but virtual threads being actually workloads, they won't show up there (I only see the thread pool that they share). I wonder if someone has already come up with a tool that allows one to inspect the virtual threads (e.g., to know precisely where they are blocked or whether they are running, how many of them are around, etc); it would help me a lot with debugging minor stuff.</p>\n<p>Any advice?</p>\n"},{"tags":["java","tomcat","jasper-reports","tomcat8"],"answers":[{"tags":[],"owner":{"account_id":1536584,"reputation":449,"user_id":1432468,"accept_rate":33,"display_name":"G. Plante"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691519591,"creation_date":1691519591,"answer_id":76862310,"question_id":76861438,"body_markdown":"I finally fixed it. The file commons-collections-3.2.2.jar was missing.","title":"Problem running JasperReport 6.6.0 with Tomcat 8 : java.lang.ClassNotFoundException: Unresolved external reference","body":"<p>I finally fixed it. The file commons-collections-3.2.2.jar was missing.</p>\n"}],"owner":{"account_id":1536584,"reputation":449,"user_id":1432468,"accept_rate":33,"display_name":"G. Plante"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1691521750,"answer_count":1,"score":-2,"last_activity_date":1691519591,"creation_date":1691511432,"question_id":76861438,"body_markdown":"I&#39;m running JasperReport Library 6.6.0, openjdk 1.8.0_372, Tomcat 7 and PHP/JAVA Bridge on a Centos 7 server. Everything is working just fine.\r\n\r\nI need to move it to a new server Rocky Linux 9.2 and Tomcat 8. I installed the same openjdk version 1.8.0_372. I copied all JasperReport 6.6.0 files from the old server to the new one.\r\n\r\nWhen I try to run a report, I&#39;m getting the following error message. I&#39;m not able to figure out what could cause it. Despite the fact that this is a different Linux version and a different Tomcat version, all the rest is identical since I copied all files from the old server.\r\n\r\nAny help would be appreciated.\r\n\r\n\r\n    java.lang.ClassNotFoundException: Unresolved external reference: java.lang.NoClassDefFoundError: org/apache/commons/collections/map/ReferenceMap. -- Unable to call the method, see the README section &quot;Java platform issues&quot; for details and DO NOT REPORT THIS PROBLEM TO THE PHP/Java Bridge MAILING LIST!\r\n        at php.java.bridge.JavaBridge.getUnresolvedExternalReferenceException(JavaBridge.java:422)\r\n        at php.java.bridge.JavaBridge.Invoke(JavaBridge.java:1055)\r\n        at php.java.bridge.Request.handleRequest(Request.java:417)\r\n        at php.java.bridge.Request.handleRequests(Request.java:500)\r\n        at php.java.bridge.http.ContextRunner.run(ContextRunner.java:145)\r\n        at php.java.bridge.ThreadPool$Delegate.run(ThreadPool.java:60)\r\n","title":"Problem running JasperReport 6.6.0 with Tomcat 8 : java.lang.ClassNotFoundException: Unresolved external reference","body":"<p>I'm running JasperReport Library 6.6.0, openjdk 1.8.0_372, Tomcat 7 and PHP/JAVA Bridge on a Centos 7 server. Everything is working just fine.</p>\n<p>I need to move it to a new server Rocky Linux 9.2 and Tomcat 8. I installed the same openjdk version 1.8.0_372. I copied all JasperReport 6.6.0 files from the old server to the new one.</p>\n<p>When I try to run a report, I'm getting the following error message. I'm not able to figure out what could cause it. Despite the fact that this is a different Linux version and a different Tomcat version, all the rest is identical since I copied all files from the old server.</p>\n<p>Any help would be appreciated.</p>\n<pre><code>java.lang.ClassNotFoundException: Unresolved external reference: java.lang.NoClassDefFoundError: org/apache/commons/collections/map/ReferenceMap. -- Unable to call the method, see the README section &quot;Java platform issues&quot; for details and DO NOT REPORT THIS PROBLEM TO THE PHP/Java Bridge MAILING LIST!\n    at php.java.bridge.JavaBridge.getUnresolvedExternalReferenceException(JavaBridge.java:422)\n    at php.java.bridge.JavaBridge.Invoke(JavaBridge.java:1055)\n    at php.java.bridge.Request.handleRequest(Request.java:417)\n    at php.java.bridge.Request.handleRequests(Request.java:500)\n    at php.java.bridge.http.ContextRunner.run(ContextRunner.java:145)\n    at php.java.bridge.ThreadPool$Delegate.run(ThreadPool.java:60)\n</code></pre>\n"},{"tags":["java","garbage-collection","heap-memory"],"comments":[{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1511098378,"post_id":47377336,"comment_id":81706877,"body_markdown":"This is probably something you&#39;re going to have to do in whatever&#39;s invoking Java, and thus in a platform-dependent manner.","body":"This is probably something you&#39;re going to have to do in whatever&#39;s invoking Java, and thus in a platform-dependent manner."},{"owner":{"account_id":3862105,"reputation":29203,"user_id":3199595,"accept_rate":84,"display_name":"Malt"},"score":1,"creation_date":1511100440,"post_id":47377336,"comment_id":81707512,"body_markdown":"@OliverCharlesworth That&#39;s what I figured. But it&#39;s strange. The default is defined in terms of a fraction of physical memory, but there&#39;s no switch for changing the 1/4th to say 1/3 or 1/2.","body":"@OliverCharlesworth That&#39;s what I figured. But it&#39;s strange. The default is defined in terms of a fraction of physical memory, but there&#39;s no switch for changing the 1/4th to say 1/3 or 1/2."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1511863798,"post_id":47377336,"comment_id":82013998,"body_markdown":"Since you can&#39;t *change* the heap size of a HotSpot JVM, the &quot;pure Java&quot; solution is to use the techniques in the linked Q&amp;A to find the physical memory size ... then launch a new JVM.  Frankly, you are better off with your &quot;clunky&quot; solution.","body":"Since you can&#39;t <i>change</i> the heap size of a HotSpot JVM, the &quot;pure Java&quot; solution is to use the techniques in the linked Q&amp;A to find the physical memory size ... then launch a new JVM.  Frankly, you are better off with your &quot;clunky&quot; solution."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1691532570,"post_id":47377336,"comment_id":135503919,"body_markdown":"When you&#39;re setting the value, you are generally setting it based on knowing the amount your program actually needs. The JVM does not possess that insight, so it makes a &#39;guess&#39; based on how much physical memory exists. It&#39;s unclear that you, the user, needs to guess.","body":"When you&#39;re setting the value, you are generally setting it based on knowing the amount your program actually needs. The JVM does not possess that insight, so it makes a &#39;guess&#39; based on how much physical memory exists. It&#39;s unclear that you, the user, needs to guess."}],"answers":[{"comments":[{"owner":{"account_id":2515499,"reputation":16966,"user_id":2187042,"accept_rate":53,"display_name":"Richard Tingle"},"score":0,"creation_date":1622385752,"post_id":47377450,"comment_id":119773033,"body_markdown":"To the question &quot;I would like to ask you why you&#39;d need a percentage of the physical memory&quot;. An example might be a game with a variable render distance. If not much memory is available it will choose a small render distance. But if lots of memory is available then a large render distance can be chosen","body":"To the question &quot;I would like to ask you why you&#39;d need a percentage of the physical memory&quot;. An example might be a game with a variable render distance. If not much memory is available it will choose a small render distance. But if lots of memory is available then a large render distance can be chosen"}],"tags":[],"owner":{"account_id":3598692,"reputation":71,"user_id":3002576,"display_name":"Chronove"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511098427,"creation_date":1511098427,"answer_id":47377450,"question_id":47377336,"body_markdown":"You probably have to do it yourself. Say you&#39;re going for a windows version,\r\nget the max amount of Memory ( parse something like `wmic ComputerSystem get TotalPhysicalMemory` ) , calculate 1/4 of this and set it as the -Xmx option...\r\n\r\nI would like to ask you why you&#39;d need a percentage of the physical memory. The max amount of memory shouldnt affect the memory usage of your application, and if so the application should handle it itself","title":"Java set maximum heap size (Xmx) as a fraction of physical memory","body":"<p>You probably have to do it yourself. Say you're going for a windows version,\nget the max amount of Memory ( parse something like <code>wmic ComputerSystem get TotalPhysicalMemory</code> ) , calculate 1/4 of this and set it as the -Xmx option...</p>\n\n<p>I would like to ask you why you'd need a percentage of the physical memory. The max amount of memory shouldnt affect the memory usage of your application, and if so the application should handle it itself</p>\n"},{"comments":[{"owner":{"account_id":4236867,"reputation":1391,"user_id":3648491,"display_name":"Onnonymous"},"score":0,"creation_date":1663842155,"post_id":66545477,"comment_id":130336465,"body_markdown":"Great solution! Please note, with OpenJDK you need version 10 for this. https://bugs.openjdk.org/browse/JDK-8219312 Quick check: `java -XX:MaxRAMPercentage=25 -version`","body":"Great solution! Please note, with OpenJDK you need version 10 for this. <a href=\"https://bugs.openjdk.org/browse/JDK-8219312\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8219312</a> Quick check: <code>java -XX:MaxRAMPercentage=25 -version</code>"}],"tags":[],"owner":{"account_id":3862105,"reputation":29203,"user_id":3199595,"accept_rate":84,"display_name":"Malt"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1691518584,"creation_date":1615287081,"answer_id":66545477,"question_id":47377336,"body_markdown":"Since [Java 8u191 (October 16, 2018)][1], there are three dedicated JVM options to control the heap size as a fraction of the available memory. They are documented [here][2].\r\n\r\nNote that contrary to what its name suggests, `MinRAMPercentage` also controls the **maximum** heap size\r\n\r\n&gt; **-XX:InitialRAMPercentage=percent**\r\n&gt; \r\n&gt; Sets the initial amount of memory that the JVM will use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option. The default value is 1.5625 percent.\r\n&gt; \r\n&gt; **-XX:MaxRAMPercentage=percent**\r\n&gt; \r\n&gt; Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option. The default value is 25 percent.\r\n&gt; \r\n&gt; \r\n&gt; **-XX:MinRAMPercentage=percent**\r\n&gt; \r\n&gt; Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option for small heaps. A small heap is a heap of approximately 125 MB. The default value is 50 percent.\r\n\r\nHere are some example runs using docker on x64 using jdk 11u10:\r\n\r\n`docker run --memory &lt;limit&gt; openjdk:11 java -XX:MaxRAMPercentage=25 -XX:MinRAMPercentage=50 -XX:InitialRAMPercentage=5 -XX:+PrintFlagsFinal 2&gt;&amp;1 | grep HeapSize`\r\n\r\n    | Memory Limit | Initial Heap Size | Max Heap Size    |\r\n    |--------------|-------------------|------------------|\r\n    | 100Mi        | 10485760 (~10%)   | 52428800 (~50%)  |\r\n    | 256Mi        | 27262976 (~10%)   | 132120576 (~50%) |\r\n    | 512Mi        | 54525952 (~10%)   | 134217728 (~25%) |\r\n    | 1Gi          | 109051904 (~10%)  | 268435456 (~25%) |\r\n\r\n  [1]: https://www.oracle.com/java/technologies/javase/8u191-relnotes.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\r\n  [3]: https://dzone.com/articles/difference-between-initialrampercentage-minramperc","title":"Java set maximum heap size (Xmx) as a fraction of physical memory","body":"<p>Since <a href=\"https://www.oracle.com/java/technologies/javase/8u191-relnotes.html\" rel=\"nofollow noreferrer\">Java 8u191 (October 16, 2018)</a>, there are three dedicated JVM options to control the heap size as a fraction of the available memory. They are documented <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Note that contrary to what its name suggests, <code>MinRAMPercentage</code> also controls the <strong>maximum</strong> heap size</p>\n<blockquote>\n<p><strong>-XX:InitialRAMPercentage=percent</strong></p>\n<p>Sets the initial amount of memory that the JVM will use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option. The default value is 1.5625 percent.</p>\n<p><strong>-XX:MaxRAMPercentage=percent</strong></p>\n<p>Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option. The default value is 25 percent.</p>\n<p><strong>-XX:MinRAMPercentage=percent</strong></p>\n<p>Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option for small heaps. A small heap is a heap of approximately 125 MB. The default value is 50 percent.</p>\n</blockquote>\n<p>Here are some example runs using docker on x64 using jdk 11u10:</p>\n<p><code>docker run --memory &lt;limit&gt; openjdk:11 java -XX:MaxRAMPercentage=25 -XX:MinRAMPercentage=50 -XX:InitialRAMPercentage=5 -XX:+PrintFlagsFinal 2&gt;&amp;1 | grep HeapSize</code></p>\n<pre><code>| Memory Limit | Initial Heap Size | Max Heap Size    |\n|--------------|-------------------|------------------|\n| 100Mi        | 10485760 (~10%)   | 52428800 (~50%)  |\n| 256Mi        | 27262976 (~10%)   | 132120576 (~50%) |\n| 512Mi        | 54525952 (~10%)   | 134217728 (~25%) |\n| 1Gi          | 109051904 (~10%)  | 268435456 (~25%) |\n</code></pre>\n"}],"owner":{"account_id":3862105,"reputation":29203,"user_id":3199595,"accept_rate":84,"display_name":"Malt"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6569,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":66545477,"answer_count":2,"score":8,"last_activity_date":1691518584,"creation_date":1511097716,"question_id":47377336,"body_markdown":"In [JDK 8][1], The default maximum heap size is \r\n&gt; 1/4th of the physical memory or 1GB\r\n\r\nAnd it can be overridden using the `-Xmx` switch:\r\n\r\n&gt; You can override this default using the -Xmx command-line option. \r\n\r\nThe `Xmx` switch works with *bytes*, not fractions. Is there a **straightforward** way of setting the maximum heap to X percent of the physical memory of a machine?\r\n\r\nEdit:\r\n\r\nWhy, you ask? Well, first of all curiosity. I find it strange that the default Xmx is defined in terms of a fraction of the physical memory but as soon as I touch it then it&#39; is suddenly an absolute value. Second, if I deploy the same (or similar) app to two different servers and one of them has more physical memory I&#39;d like to have the option of automatically getting the JVM to take advantage of the extra memory. It doesn&#39;t always make sense, but sometimes it does.\r\n\r\nThe obvious solution is to use a shell script that checks the amount of free space and calculates the Xmx, but that seems like a clunky solution. I imagine it should be somehow possible with pure Java.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gc-ergonomics.html","title":"Java set maximum heap size (Xmx) as a fraction of physical memory","body":"<p>In <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gc-ergonomics.html\" rel=\"nofollow noreferrer\">JDK 8</a>, The default maximum heap size is</p>\n<blockquote>\n<p>1/4th of the physical memory or 1GB</p>\n</blockquote>\n<p>And it can be overridden using the <code>-Xmx</code> switch:</p>\n<blockquote>\n<p>You can override this default using the -Xmx command-line option.</p>\n</blockquote>\n<p>The <code>Xmx</code> switch works with <em>bytes</em>, not fractions. Is there a <strong>straightforward</strong> way of setting the maximum heap to X percent of the physical memory of a machine?</p>\n<p>Edit:</p>\n<p>Why, you ask? Well, first of all curiosity. I find it strange that the default Xmx is defined in terms of a fraction of the physical memory but as soon as I touch it then it' is suddenly an absolute value. Second, if I deploy the same (or similar) app to two different servers and one of them has more physical memory I'd like to have the option of automatically getting the JVM to take advantage of the extra memory. It doesn't always make sense, but sometimes it does.</p>\n<p>The obvious solution is to use a shell script that checks the amount of free space and calculates the Xmx, but that seems like a clunky solution. I imagine it should be somehow possible with pure Java.</p>\n"},{"tags":["java","git","jenkins"],"owner":{"account_id":15886197,"reputation":223,"user_id":11462489,"display_name":"jon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691517024,"creation_date":1691517024,"question_id":76862048,"body_markdown":"Jenkins build is listing similar changes as modified in every build along with actual modified files. This is happening only with one repository. The files listed in below image with + icon are the wrong ones. \r\n\r\nKindly help me how to fix it. [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1kRzU.png","title":"Jenkins build listing unexpected changes in every build","body":"<p>Jenkins build is listing similar changes as modified in every build along with actual modified files. This is happening only with one repository. The files listed in below image with + icon are the wrong ones.</p>\n<p>Kindly help me how to fix it. <a href=\"https://i.stack.imgur.com/1kRzU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1kRzU.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","sql-server","azure","jdbc"],"comments":[{"owner":{"account_id":62482,"reputation":23878,"user_id":185647,"display_name":"Squirrel"},"score":0,"creation_date":1656319019,"post_id":72769027,"comment_id":128533515,"body_markdown":"What is the error message ?","body":"What is the error message ?"},{"owner":{"account_id":25658565,"reputation":11,"user_id":19424601,"display_name":"flteam"},"score":0,"creation_date":1656320584,"post_id":72769027,"comment_id":128534077,"body_markdown":"@Squirrel there is no error message but the connection still with sql server language us_english and not Spanish","body":"@Squirrel there is no error message but the connection still with sql server language us_english and not Spanish"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656320892,"post_id":72769027,"comment_id":128534163,"body_markdown":"To me it seems you are mistaking something. [eu_english](https://en.wikipedia.org/wiki/Date_and_time_notation_in_Europe#:~:text=Official%20EU%20documents%20still%20tend,YYYY%2DMM%2DDD.%22) has format yyyy-MM-dd. The format `mdy` is something you would rather find in the US. And you most probably don&#39;t even need to change the language, just properly parse the parameters, which should automatically happen if you use `PreparedStatement`","body":"To me it seems you are mistaking something. <a href=\"https://en.wikipedia.org/wiki/Date_and_time_notation_in_Europe#:~:text=Official%20EU%20documents%20still%20tend,YYYY%2DMM%2DDD.%22\" rel=\"nofollow noreferrer\">eu_english</a> has format yyyy-MM-dd. The format <code>mdy</code> is something you would rather find in the US. And you most probably don&#39;t even need to change the language, just properly parse the parameters, which should automatically happen if you use <code>PreparedStatement</code>"},{"owner":{"account_id":25658565,"reputation":11,"user_id":19424601,"display_name":"flteam"},"score":0,"creation_date":1656321235,"post_id":72769027,"comment_id":128534291,"body_markdown":"In sql server the language is eu_english and it shows dates in format mdy, if I check available languages it shows actual is eu_english and the date format is mdy it also shown in sql server .... I need to change language but if its possible without changing java code, I mean doing in the connection string or in mybatis config","body":"In sql server the language is eu_english and it shows dates in format mdy, if I check available languages it shows actual is eu_english and the date format is mdy it also shown in sql server .... I need to change language but if its possible without changing java code, I mean doing in the connection string or in mybatis config"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656322341,"post_id":72769027,"comment_id":128534674,"body_markdown":"You don&#39;t need to adjust the language. When saving dates, it doesn&#39;t matter in what format they are **displayed**. And you don&#39;t show any error you are getting making it a guess game on what the proper way forward is","body":"You don&#39;t need to adjust the language. When saving dates, it doesn&#39;t matter in what format they are <b>displayed</b>. And you don&#39;t show any error you are getting making it a guess game on what the proper way forward is"},{"owner":{"account_id":25658565,"reputation":11,"user_id":19424601,"display_name":"flteam"},"score":0,"creation_date":1656322444,"post_id":72769027,"comment_id":128534698,"body_markdown":"For what I need i can&#180;t do what you want, I need to change language of the connection, I&#180;m using mybatis maybe that can help to change language of the connection. If I need to convert from string to date is a problem the default language because default language english, default convert is mdy and I need dmy without using format","body":"For what I need i can&#180;t do what you want, I need to change language of the connection, I&#180;m using mybatis maybe that can help to change language of the connection. If I need to convert from string to date is a problem the default language because default language english, default convert is mdy and I need dmy without using format"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656322854,"post_id":72769027,"comment_id":128534824,"body_markdown":"Well, you don&#39;t really specify what you need, thus making it nearly impossible to help you. If you want good answers, you need to specify your exact problem (which is not the language) as well as what you aim for","body":"Well, you don&#39;t really specify what you need, thus making it nearly impossible to help you. If you want good answers, you need to specify your exact problem (which is not the language) as well as what you aim for"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656322919,"post_id":72769027,"comment_id":128534853,"body_markdown":"Does this answer your question? [How to set date format in a connection to SQL?](https://stackoverflow.com/questions/6180646/how-to-set-date-format-in-a-connection-to-sql)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/6180646/how-to-set-date-format-in-a-connection-to-sql\">How to set date format in a connection to SQL?</a>"},{"owner":{"account_id":10773302,"reputation":2841,"user_id":7926183,"display_name":"SMor"},"score":2,"creation_date":1656323484,"post_id":72769027,"comment_id":128535058,"body_markdown":"The default language is determined by the **login**. But this is likely a [XY problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem) that is better address by changing your application code. Usually this implies a sql injection problem where you create SQL statements using string concatenation.","body":"The default language is determined by the <b>login</b>. But this is likely a <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> that is better address by changing your application code. Usually this implies a sql injection problem where you create SQL statements using string concatenation."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1656323609,"post_id":72769027,"comment_id":128535113,"body_markdown":"The Microsoft SQL Server JDBC driver doesn&#39;t seem to have a `Language` [connection property](https://learn.microsoft.com/en-us/sql/connect/jdbc/setting-the-connection-properties?view=sql-server-ver16#properties). Why do you think that would work?","body":"The Microsoft SQL Server JDBC driver doesn&#39;t seem to have a <code>Language</code> <a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/setting-the-connection-properties?view=sql-server-ver16#properties\" rel=\"nofollow noreferrer\">connection property</a>. Why do you think that would work?"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":1,"creation_date":1656324235,"post_id":72769027,"comment_id":128535335,"body_markdown":"The database language should be completely irrelevant. Are using parameterized queries and sending `java.util.Date` values via `DATE` JDBC type parameters? If you need to change the database language to make your code work then it sounds like you are subject to SQL Injection attacks because you&#39;re concatenating string snippets to construct SQL queries.","body":"The database language should be completely irrelevant. Are using parameterized queries and sending <code>java.util.Date</code> values via <code>DATE</code> JDBC type parameters? If you need to change the database language to make your code work then it sounds like you are subject to SQL Injection attacks because you&#39;re concatenating string snippets to construct SQL queries."},{"owner":{"account_id":20264817,"reputation":56105,"user_id":14868997,"display_name":"Charlieface"},"score":0,"creation_date":1656331238,"post_id":72769027,"comment_id":128537812,"body_markdown":"Likely easier to just do `SET DATEFORMAT DMY;` but it&#39;s unclear why you need this, likely you are doing SQL ijnection which is another issue","body":"Likely easier to just do <code>SET DATEFORMAT DMY;</code> but it&#39;s unclear why you need this, likely you are doing SQL ijnection which is another issue"}],"answers":[{"comments":[{"owner":{"account_id":25658565,"reputation":11,"user_id":19424601,"display_name":"flteam"},"score":0,"creation_date":1656424949,"post_id":72786398,"comment_id":128565624,"body_markdown":"I have updated my answear i solved with something similar , i set the language on the connection string","body":"I have updated my answear i solved with something similar , i set the language on the connection string"}],"tags":[],"owner":{"account_id":25083267,"reputation":621,"user_id":18935775,"display_name":"RajkumarPalnati"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656419128,"creation_date":1656419128,"answer_id":72786398,"question_id":72769027,"body_markdown":"According to the post [Change the default language of Azure SQL Database](  https://techcommunity.microsoft.com/t5/azure-database-support-blog/lesson-learned-16-how-to-change-the-default-language-of-azure/ba-p/368844) given by **@Jose Manuel Jurado Diaz**.\r\n\r\nCurrently, using stored procedures or at logging time using `T-SQL` to set the default language at the server level is not supported.\r\n\r\nAs, System messages and datetime formats are determined by the session language.\r\n\r\nThe workaround for this is to use the following command.\r\n\r\n- To mention language in connection string you can specify this keyword [Current Language](https://learn.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlconnection.connectionstring?redirectedfrom=MSDN&amp;view=dotnet-plat-ext-6.0#System_Data_SqlClient_SqlConnection_ConnectionString) with the language you want ex. **`Current Language=Spanish`**\r\n\r\n- If the connection is already established\r\n\r\n```sql\r\nSET LANGUAGE Spanish;\r\n```\r\n\r\n***Changed language from `us_english` to `Spanish` and get date format from MDY to DMY***\r\n\r\n*Below is the sample code and output result:*\r\n```sql\r\nSELECT @@language;\r\nselect format(getdate(),&#39;d&#39;);\r\nSET Language Spanish;\r\nSELECT @@language;\r\nselect format(getdate(),&#39;d&#39;);\r\n```\r\n\r\n***Output:***\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PclL3.jpg","title":"Change language in SQL Server connection string","body":"<p>According to the post <a href=\"https://techcommunity.microsoft.com/t5/azure-database-support-blog/lesson-learned-16-how-to-change-the-default-language-of-azure/ba-p/368844\" rel=\"nofollow noreferrer\">Change the default language of Azure SQL Database</a> given by <strong>@Jose Manuel Jurado Diaz</strong>.</p>\n<p>Currently, using stored procedures or at logging time using <code>T-SQL</code> to set the default language at the server level is not supported.</p>\n<p>As, System messages and datetime formats are determined by the session language.</p>\n<p>The workaround for this is to use the following command.</p>\n<ul>\n<li><p>To mention language in connection string you can specify this keyword <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlconnection.connectionstring?redirectedfrom=MSDN&amp;view=dotnet-plat-ext-6.0#System_Data_SqlClient_SqlConnection_ConnectionString\" rel=\"nofollow noreferrer\">Current Language</a> with the language you want ex. <strong><code>Current Language=Spanish</code></strong></p>\n</li>\n<li><p>If the connection is already established</p>\n</li>\n</ul>\n<pre class=\"lang-sql prettyprint-override\"><code>SET LANGUAGE Spanish;\n</code></pre>\n<p><em><strong>Changed language from <code>us_english</code> to <code>Spanish</code> and get date format from MDY to DMY</strong></em></p>\n<p><em>Below is the sample code and output result:</em></p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT @@language;\nselect format(getdate(),'d');\nSET Language Spanish;\nSELECT @@language;\nselect format(getdate(),'d');\n</code></pre>\n<p><em><strong>Output:</strong></em></p>\n<p><a href=\"https://i.stack.imgur.com/PclL3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PclL3.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2559123,"reputation":337,"user_id":2220516,"display_name":"Roberto Novakosky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691516791,"creation_date":1691516791,"answer_id":76862025,"question_id":72769027,"body_markdown":"Some drivers dont have support to Language= or Current Language= on ConnectionString, so the solution is to execute the SQL command after the sucessfull connection, &quot;SET LANGUAGE Spanish;&quot;\r\n\r\nOther solution is on SQL Server set the default language to your desired user. One way is using Management Studio, click with right button on user, choose properties and so change the Default Language to that user.","title":"Change language in SQL Server connection string","body":"<p>Some drivers dont have support to Language= or Current Language= on ConnectionString, so the solution is to execute the SQL command after the sucessfull connection, &quot;SET LANGUAGE Spanish;&quot;</p>\n<p>Other solution is on SQL Server set the default language to your desired user. One way is using Management Studio, click with right button on user, choose properties and so change the Default Language to that user.</p>\n"}],"owner":{"account_id":25658565,"reputation":11,"user_id":19424601,"display_name":"flteam"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691516791,"creation_date":1656318133,"question_id":72769027,"body_markdown":"I have a SQL Server in Azure, with default language eu_english. That means that the dates are in format mdy and I need them in dmy, I want to put the language to Spanish in the connection string. I have tried this. but it doesn&#39;t work:\r\n\r\n    jdbc:sqlserver://myazureURL:1433;DatabaseName=MyDataBase;Language=Spanish\r\n\r\nI have tried adding Language=Spanish, but it doesn&#39;t work. I have also tried Language=5 because 5 is the Spanish Id of languages of my SQL Server.\r\n\r\nI need this because I can&#39;t change default language from database settings. If I try to change default language with that:\r\n\r\n    EXEC sp_configure &#39;default language&#39;, &#39;Spanish&#39;;\r\n\r\nIt gives me this error:\r\n\r\n    EXEC sp_configure &#39;default language&#39;, &#39;Spanish&#39;;\r\n\r\n\r\nEDIT WITH SOLUTION:\r\nI solved it incluiding this to the connection String so in each connection it sets the language:\r\n\r\n     connectionInitSqls =&quot;SET LANGUAGE Spanish&quot;","title":"Change language in SQL Server connection string","body":"<p>I have a SQL Server in Azure, with default language eu_english. That means that the dates are in format mdy and I need them in dmy, I want to put the language to Spanish in the connection string. I have tried this. but it doesn't work:</p>\n<pre><code>jdbc:sqlserver://myazureURL:1433;DatabaseName=MyDataBase;Language=Spanish\n</code></pre>\n<p>I have tried adding Language=Spanish, but it doesn't work. I have also tried Language=5 because 5 is the Spanish Id of languages of my SQL Server.</p>\n<p>I need this because I can't change default language from database settings. If I try to change default language with that:</p>\n<pre><code>EXEC sp_configure 'default language', 'Spanish';\n</code></pre>\n<p>It gives me this error:</p>\n<pre><code>EXEC sp_configure 'default language', 'Spanish';\n</code></pre>\n<p>EDIT WITH SOLUTION:\nI solved it incluiding this to the connection String so in each connection it sets the language:</p>\n<pre><code> connectionInitSqls =&quot;SET LANGUAGE Spanish&quot;\n</code></pre>\n"},{"tags":["java","android","websocket"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691516770,"post_id":76862008,"comment_id":135501366,"body_markdown":"Hello, welcome to Stack Overflow! Maybe you should [read this](https://stackoverflow.com/help/how-to-ask), and then edit your question.","body":"Hello, welcome to Stack Overflow! Maybe you should <a href=\"https://stackoverflow.com/help/how-to-ask\">read this</a>, and then edit your question."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691577091,"post_id":76862008,"comment_id":135509487,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29186483,"reputation":1,"user_id":22359537,"display_name":"chen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691516543,"creation_date":1691516543,"question_id":76862008,"body_markdown":"Use java to develop Android applications, update the elements of the page after receiving a request from a third partyI use Socket here, what else can I use?\r\n\r\nSince I use Socket, I can&#39;t return the status of my current execution to the third-party service (e.g. whether I updated successfully), so I want to replace it","title":"Android handles third-party requests to update page elements","body":"<p>Use java to develop Android applications, update the elements of the page after receiving a request from a third partyI use Socket here, what else can I use?</p>\n<p>Since I use Socket, I can't return the status of my current execution to the third-party service (e.g. whether I updated successfully), so I want to replace it</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","openapi-generator-maven-plugin"],"owner":{"account_id":250416,"reputation":5418,"user_id":527116,"accept_rate":85,"display_name":"aweis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691516428,"creation_date":1691516428,"question_id":76861994,"body_markdown":"I have a spring boot 3 project that uses multiple data sources for different JPA repositories, and on the rest controllers I use openapi generators such that I can create clients etc. for the controllers.\r\n\r\nMy issue is that I can&#39;t figure out how to correctly configure my profile that I use for the openapi generation, such that my datasources are ignored and the application not trying to connect to the databases, that are not available at this time.\r\n\r\nI have implemented the multiple data sources using this approach [Configure and Use Multiple DataSources in Spring Boot\r\n][1]\r\n\r\nAnd for normal configuration I would exclude the auto configure of JDBC, orm, JPA etc. as such:\r\n\r\n```\r\nspring:\r\n    autoconfigure:\r\n        exclude:\r\n          - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\r\n          - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n          - org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration\r\n```\r\n\r\nBut this still don&#39;t work as I get an error due to the creation of `entityManagerFactoryRef` in the `EnableJpaRepositories`.\r\n\r\nIs there any way to ensure that I can start my spring boot application, without access to any databases, during build time?\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-configure-multiple-datasources","title":"Exclude spring boot JPA repository for code generation","body":"<p>I have a spring boot 3 project that uses multiple data sources for different JPA repositories, and on the rest controllers I use openapi generators such that I can create clients etc. for the controllers.</p>\n<p>My issue is that I can't figure out how to correctly configure my profile that I use for the openapi generation, such that my datasources are ignored and the application not trying to connect to the databases, that are not available at this time.</p>\n<p>I have implemented the multiple data sources using this approach <a href=\"https://www.baeldung.com/spring-boot-configure-multiple-datasources\" rel=\"nofollow noreferrer\">Configure and Use Multiple DataSources in Spring Boot\n</a></p>\n<p>And for normal configuration I would exclude the auto configure of JDBC, orm, JPA etc. as such:</p>\n<pre><code>spring:\n    autoconfigure:\n        exclude:\n          - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\n          - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n          - org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration\n</code></pre>\n<p>But this still don't work as I get an error due to the creation of <code>entityManagerFactoryRef</code> in the <code>EnableJpaRepositories</code>.</p>\n<p>Is there any way to ensure that I can start my spring boot application, without access to any databases, during build time?</p>\n"},{"tags":["java","junit","junit5","jmockit"],"comments":[{"owner":{"account_id":6379952,"reputation":3111,"user_id":4949750,"display_name":"Amongalen"},"score":1,"creation_date":1588075431,"post_id":61479703,"comment_id":108754790,"body_markdown":"&quot;If the JMockit jar comes after the JUnit jar in the classpath, it might cause problems.&quot; - [source](https://stackoverflow.com/a/2906690/4949750). This may be the case here as well.","body":"&quot;If the JMockit jar comes after the JUnit jar in the classpath, it might cause problems.&quot; - <a href=\"https://stackoverflow.com/a/2906690/4949750\">source</a>. This may be the case here as well."},{"owner":{"account_id":18428891,"reputation":71,"user_id":13424510,"display_name":"Sunikkana Sarkar"},"score":0,"creation_date":1588075575,"post_id":61479703,"comment_id":108754866,"body_markdown":"The JMockit jar precedes JUnit5 Library in the project classpath","body":"The JMockit jar precedes JUnit5 Library in the project classpath"},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":0,"creation_date":1588278417,"post_id":61479703,"comment_id":108845672,"body_markdown":"Is it &quot;please check the -javaagent JVM initialization parameter was used&quot; not clear enough? JMockit documentation shows how to specify it.","body":"Is it &quot;please check the -javaagent JVM initialization parameter was used&quot; not clear enough? JMockit documentation shows how to specify it."},{"owner":{"account_id":2197266,"reputation":2881,"user_id":1942602,"accept_rate":48,"display_name":"Xavier DSouza"},"score":1,"creation_date":1594395043,"post_id":61479703,"comment_id":111120744,"body_markdown":"I got same error. Need to provide it as JVM argument - https://jmockit.github.io/tutorial/Introduction.html#runningTests","body":"I got same error. Need to provide it as JVM argument - <a href=\"https://jmockit.github.io/tutorial/Introduction.html#runningTests\" rel=\"nofollow noreferrer\">jmockit.github.io/tutorial/Introduction.html#runningTests</a>"},{"owner":{"account_id":5190973,"reputation":1047,"user_id":4153915,"accept_rate":38,"display_name":"Prashanth Debbadwar"},"score":0,"creation_date":1609325793,"post_id":61479703,"comment_id":115811554,"body_markdown":"@SunikkanaSarkar have you found any solution?","body":"@SunikkanaSarkar have you found any solution?"}],"answers":[{"tags":[],"owner":{"account_id":10480891,"reputation":53,"user_id":7725919,"display_name":"it-is-gut"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1622010354,"creation_date":1622010354,"answer_id":67699563,"question_id":61479703,"body_markdown":"I had the same error while trying to use JMockit 1.49. I also came across [this][1] link and made sure that my JMockit jar comes before the JUnit jar in the classpath. However, this did not work in my case.\r\n\r\nAs already suggested, the error message gives you the solution:\r\n\r\n&gt; check the -javaagent JVM initialization parameter\r\n\r\nIn eclipse, go to the run configurations (Run &gt; Run Configurations). Then select the one you are using to run the JUnit tests. Under the tab &quot;Arguments&quot; you have to add the following line:\r\n\r\n`-javaagent:path-to-your-jmockit-jar/jmockit-1.49.jar`\r\n\r\nThen you should be fine!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2905735/jmockit-initialization-problem/2906690#2906690","title":"JMockit with JUnit5 - JMockit didn&#39;t get initialized","body":"<p>I had the same error while trying to use JMockit 1.49. I also came across <a href=\"https://stackoverflow.com/questions/2905735/jmockit-initialization-problem/2906690#2906690\">this</a> link and made sure that my JMockit jar comes before the JUnit jar in the classpath. However, this did not work in my case.</p>\n<p>As already suggested, the error message gives you the solution:</p>\n<blockquote>\n<p>check the -javaagent JVM initialization parameter</p>\n</blockquote>\n<p>In eclipse, go to the run configurations (Run &gt; Run Configurations). Then select the one you are using to run the JUnit tests. Under the tab &quot;Arguments&quot; you have to add the following line:</p>\n<p><code>-javaagent:path-to-your-jmockit-jar/jmockit-1.49.jar</code></p>\n<p>Then you should be fine!</p>\n"},{"tags":[],"owner":{"account_id":557950,"reputation":1088,"user_id":920554,"accept_rate":100,"display_name":"Mingtao Sun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670892483,"creation_date":1670892483,"answer_id":74778866,"question_id":61479703,"body_markdown":"Add below to the pom.xml\r\n        \r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.22.2&lt;/version&gt;\r\n    \t&lt;configuration&gt;\r\n    \t\t&lt;argLine&gt;-javaagent:${settings.localRepository}/org/jmockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar&lt;/argLine&gt;\r\n    \t&lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"JMockit with JUnit5 - JMockit didn&#39;t get initialized","body":"<p>Add below to the pom.xml</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.22.2&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;argLine&gt;-javaagent:${settings.localRepository}/org/jmockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar&lt;/argLine&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8728107,"reputation":1,"user_id":6529144,"display_name":"Ranchooo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691515426,"creation_date":1691502921,"answer_id":76860235,"question_id":61479703,"body_markdown":"Add below to your gradle file, here is the link https://jmockit.github.io/tutorial/Introduction.html#runningTests\r\n\r\n    test {\r\n        jvmArgs &quot;-javaagent:${classpath.find { it.name.contains(&quot;jmockit&quot;) }.absolutePath}&quot;\r\n    }","title":"JMockit with JUnit5 - JMockit didn&#39;t get initialized","body":"<p>Add below to your gradle file, here is the link <a href=\"https://jmockit.github.io/tutorial/Introduction.html#runningTests\" rel=\"nofollow noreferrer\">https://jmockit.github.io/tutorial/Introduction.html#runningTests</a></p>\n<pre><code>test {\n    jvmArgs &quot;-javaagent:${classpath.find { it.name.contains(&quot;jmockit&quot;) }.absolutePath}&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":18428891,"reputation":71,"user_id":13424510,"display_name":"Sunikkana Sarkar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9186,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1691515426,"creation_date":1588075259,"question_id":61479703,"body_markdown":"When I am using the following Test method using JUnit 5 and JMockit, I am getting an error as:\r\n\r\n**JMockit didn&#39;t get initialized; please check the -javaagent JVM initialization parameter was used**\r\n\r\nThese are my classes which I created and want to test:\r\n\r\n        import java.util.ArrayList;\r\n        import java.util.Collections;\r\n        import java.util.List;\r\n    \r\n        class Employee \r\n        {\r\n    \t    private Integer empId;\r\n    \t    private String empName;\r\n    \t\r\n    \t    public Employee(Integer empId,String empName)\r\n    \t    {\r\n    \t\t    this.empId = empId;\r\n    \t\t    this.empName = empName;\r\n    \t    }\r\n    \t\r\n    \t    public Integer getEmpId() {\r\n    \t\t    return empId;\r\n    \t    }\r\n    \t    public void setEmpId(Integer empId) {\r\n    \t\t    this.empId = empId;\r\n    \t    }\r\n    \t    public String getEmpName() {\r\n    \t\t    return empName;\r\n    \t    }\r\n    \t    public void setEmpName(String empName) {\r\n    \t\t   this.empName = empName;\r\n    \t    }\r\n        }\r\n        class EmployeeDAO\r\n        {\r\n    \t    private static List&lt;Employee&gt; employeeList = new ArrayList&lt;Employee&gt;();\r\n    \t\r\n    \t    static\r\n    \t    {\r\n    \t\t   Employee e1 = new Employee(1001, &quot;John&quot;);\r\n    \t\t   Employee e2 = new Employee(1002, &quot;Jack&quot;);\r\n    \t\t\r\n    \t\t   Collections.addAll(employeeList, e1,e2);\r\n    \t    }\r\n    \r\n    \t    public static List&lt;Employee&gt; getEmployeeList() {\r\n    \t\t   return employeeList;\r\n    \t    }\r\n    \r\n    \t    public static void setEmployeeList(List&lt;Employee&gt; employeeList) {\r\n    \t\t   EmployeeDAO.employeeList = employeeList;\r\n    \t    }\r\n        }\r\n    \r\n        class EmployeeService\r\n        {\r\n    \t   public List&lt;Employee&gt; getEmployees()\r\n    \t   {\r\n    \t\t   List&lt;Employee&gt; empListFromDao = new ArrayList&lt;Employee&gt;();\r\n    \t\t   try\r\n    \t\t   {\r\n    \t\t\t   empListFromDao = EmployeeDAO.getEmployeeList();\r\n    \t\t   }\r\n    \t\t   catch(Exception e)\r\n    \t\t   {\r\n    \t\t\t  throw e;\r\n    \t\t   }\r\n    \t\t   return empListFromDao;\r\n    \t   }\r\n        }\r\n\r\nAnd this is my Test Implementation:\r\n     \r\n    import org.junit.jupiter.api.Assertions;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    \r\n    import mockit.Mock;\r\n    import mockit.MockUp;\r\n    import mockit.integration.junit5.JMockitExtension;\r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    \r\n    @ExtendWith(JMockitExtension.class)\r\n    public class EmployeeTest\r\n    {\r\n          @Test\r\n          public void testMethodForStaticMock$FromService()\r\n          {\r\n    \t      new MockUp&lt;EmployeeDAO&gt;()\r\n    \t  {\r\n    \t\t  @Mock\r\n    \t\t  public List&lt;Employee&gt; getEmployeeList()\r\n    \t\t  {\r\n    \t\t\t  return new ArrayList&lt;Employee&gt;();\r\n    \t\t  }\r\n    \t  };\r\n    \t\r\n    \t      EmployeeService service = new EmployeeService();\r\n    \t      assertEquals(0,service.getEmployees().size());\r\n          }\r\n    }\r\n\r\n\r\nProject Stack I have used:\r\n\r\n - JDK 11.0.1\r\n - Eclipse IDE 2020-03\r\n - JUnit 5 (Added as library in Eclipse to project&#39;s classpath)\r\n - JMockit 1.49 (Added as JAR)\r\n\r\nDue to the above mentioned problem my test case is not passing. \r\nAny suggestions on how to resolve this issue? Or is there any other way to mock a static method?\r\n\r\n","title":"JMockit with JUnit5 - JMockit didn&#39;t get initialized","body":"<p>When I am using the following Test method using JUnit 5 and JMockit, I am getting an error as:</p>\n\n<p><strong>JMockit didn't get initialized; please check the -javaagent JVM initialization parameter was used</strong></p>\n\n<p>These are my classes which I created and want to test:</p>\n\n<pre><code>    import java.util.ArrayList;\n    import java.util.Collections;\n    import java.util.List;\n\n    class Employee \n    {\n        private Integer empId;\n        private String empName;\n\n        public Employee(Integer empId,String empName)\n        {\n            this.empId = empId;\n            this.empName = empName;\n        }\n\n        public Integer getEmpId() {\n            return empId;\n        }\n        public void setEmpId(Integer empId) {\n            this.empId = empId;\n        }\n        public String getEmpName() {\n            return empName;\n        }\n        public void setEmpName(String empName) {\n           this.empName = empName;\n        }\n    }\n    class EmployeeDAO\n    {\n        private static List&lt;Employee&gt; employeeList = new ArrayList&lt;Employee&gt;();\n\n        static\n        {\n           Employee e1 = new Employee(1001, \"John\");\n           Employee e2 = new Employee(1002, \"Jack\");\n\n           Collections.addAll(employeeList, e1,e2);\n        }\n\n        public static List&lt;Employee&gt; getEmployeeList() {\n           return employeeList;\n        }\n\n        public static void setEmployeeList(List&lt;Employee&gt; employeeList) {\n           EmployeeDAO.employeeList = employeeList;\n        }\n    }\n\n    class EmployeeService\n    {\n       public List&lt;Employee&gt; getEmployees()\n       {\n           List&lt;Employee&gt; empListFromDao = new ArrayList&lt;Employee&gt;();\n           try\n           {\n               empListFromDao = EmployeeDAO.getEmployeeList();\n           }\n           catch(Exception e)\n           {\n              throw e;\n           }\n           return empListFromDao;\n       }\n    }\n</code></pre>\n\n<p>And this is my Test Implementation:</p>\n\n<pre><code>import org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\nimport mockit.Mock;\nimport mockit.MockUp;\nimport mockit.integration.junit5.JMockitExtension;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\n@ExtendWith(JMockitExtension.class)\npublic class EmployeeTest\n{\n      @Test\n      public void testMethodForStaticMock$FromService()\n      {\n          new MockUp&lt;EmployeeDAO&gt;()\n      {\n          @Mock\n          public List&lt;Employee&gt; getEmployeeList()\n          {\n              return new ArrayList&lt;Employee&gt;();\n          }\n      };\n\n          EmployeeService service = new EmployeeService();\n          assertEquals(0,service.getEmployees().size());\n      }\n}\n</code></pre>\n\n<p>Project Stack I have used:</p>\n\n<ul>\n<li>JDK 11.0.1</li>\n<li>Eclipse IDE 2020-03</li>\n<li>JUnit 5 (Added as library in Eclipse to project's classpath)</li>\n<li>JMockit 1.49 (Added as JAR)</li>\n</ul>\n\n<p>Due to the above mentioned problem my test case is not passing. \nAny suggestions on how to resolve this issue? Or is there any other way to mock a static method?</p>\n"},{"tags":["java","xml","jackson","jaxb"],"owner":{"account_id":3801209,"reputation":283,"user_id":3154817,"accept_rate":50,"display_name":"raedma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691515149,"creation_date":1691509345,"question_id":76861157,"body_markdown":"I found a problem when switching from a `JAXB` to a `Jackson` based serialization with the `JakartaXmlBindAnnotationModule` of a simple POJO. The POJO has an integer array attribute that is handled differently between the two approaches, see the MWE below.\r\n\r\nFor the `JAXB` based approach, I basically get the result I expect:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;pojo dimensions=&quot;4 3&quot;/&gt;\r\n\r\nFor the `Jackson` variant the output is:\r\n\r\n    &lt;POJO dimensions=&quot;4&quot; dimensions=&quot;3&quot;/&gt;\r\n\r\nwhich later fails during deserialization, as there are now two attributes with the name `dimensions`. Basically, the `Jackson` variant seems to serialize the array with the same approach for `@XmlAttribute` and `@XmlElement`, while the `JAXB` variant seems to recognize that for the use in a `@XmlAttribute` it is not necessary to repeat the attribute name and simply concat the values separated by a space delimiter.\r\n\r\nIs there any way to get the `Jackson`-based variant to behave the same as the `JAXB` one?\r\n\r\n\r\n----------\r\n# MWE #\r\n\r\n## `POJO.java` ##\r\n\r\n    import com.fasterxml.jackson.annotation.JsonTypeInfo;\r\n    import jakarta.xml.bind.annotation.XmlAccessType;\r\n    import jakarta.xml.bind.annotation.XmlAccessorType;\r\n    import jakarta.xml.bind.annotation.XmlAttribute;\r\n    import jakarta.xml.bind.annotation.XmlRootElement;\r\n\r\n    @XmlRootElement\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n\r\n    public class POJO{\r\n        \r\n        @XmlAttribute\r\n        private int[] dimensions;\r\n\r\n        public POJO() {}\r\n\r\n        public POJO(\r\n                int[] dimensions\r\n        ) {\r\n            this.dimensions = dimensions;\r\n        }\r\n\r\n        public void setDimensions(int[] v){this.dimensions = v;}\r\n        public int[] getDimensions(){return dimensions;}\r\n\r\n    }\r\n\r\n## `Main.java` ##\r\n\r\n    import com.fasterxml.jackson.annotation.JsonInclude;\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.DeserializationFeature;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    import com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\n    import com.fasterxml.jackson.module.jakarta.xmlbind.JakartaXmlBindAnnotationModule;\r\n    import jakarta.xml.bind.JAXBContext;\r\n    import jakarta.xml.bind.JAXBException;\r\n    import jakarta.xml.bind.Marshaller;\r\n    import jakarta.xml.bind.Unmarshaller;\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.InputStream;\r\n    import java.io.StringWriter;\r\n    import java.nio.charset.StandardCharsets;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) throws JAXBException, JsonProcessingException {\r\n            \r\n            POJO pojo = new POJO(new int[]{4,3});\r\n            \r\n            jaxb(pojo);\r\n            jackson(pojo);\r\n            \r\n        }\r\n        \r\n        public static void jaxb(POJO pojo) throws JAXBException{\r\n            \r\n            System.out.println(&quot;JAXB&quot;);\r\n            \r\n            // Serialize\r\n            JAXBContext context = JAXBContext.newInstance(pojo.getClass());\r\n\r\n            //Marshaller marshaller = context.createMarshaller();\r\n            Marshaller marshaller = context.createMarshaller();\r\n            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n                \r\n            // Creating the Document object\r\n            StringWriter document = new StringWriter();\r\n\r\n            // Marshaling the User object into a Document object\r\n            marshaller.marshal(pojo, document);\r\n\r\n            //\r\n            String serialized = document.toString();\r\n            \r\n            System.out.println(&quot;serialized:&quot;);\r\n            System.out.println(serialized);\r\n            \r\n            // Deserialize\r\n            Unmarshaller unmarshaller = context.createUnmarshaller();\r\n            InputStream stream = new ByteArrayInputStream(serialized.getBytes(StandardCharsets.UTF_8));\r\n            POJO result = (POJO)unmarshaller.unmarshal(stream);\r\n            \r\n            assert (result != null);\r\n        }\r\n        \r\n        public static void jackson(POJO pojo) throws JsonProcessingException{\r\n            \r\n            System.out.println(&quot;Jackson&quot;);\r\n            \r\n            // Serialize\r\n            ObjectMapper objectMapper = XmlMapper.builder()\r\n                    .defaultUseWrapper(false)\r\n                    .addModule(new JakartaXmlBindAnnotationModule())\r\n                    .enable(SerializationFeature.INDENT_OUTPUT)\r\n                    .serializationInclusion(JsonInclude.Include.NON_EMPTY)\r\n                    .build();\r\n            String serialized = objectMapper.writeValueAsString(pojo);\r\n            \r\n            System.out.println(&quot;serialized:&quot;);\r\n            System.out.println(serialized);\r\n            \r\n            // Deserialize\r\n            XmlMapper objectMapper2 = new XmlMapper();\r\n            objectMapper2.configure(DeserializationFeature.UNWRAP_ROOT_VALUE, false);\r\n            objectMapper2.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\r\n            objectMapper2.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n            objectMapper2.registerModule(new JakartaXmlBindAnnotationModule());      \r\n            \r\n            POJO result = (POJO)objectMapper.readValue(serialized,POJO.class);\r\n            \r\n            assert (result != null);\r\n            \r\n        }\r\n    }\r\n\r\n## `pom.xml` ##\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;de.mr&lt;/groupId&gt;\r\n        &lt;artifactId&gt;qarrayserializationjackson&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n            &lt;!-- Jackson   --&gt;\r\n            &lt;!--&lt;jackson.core.databind.version&gt;2.12.3&lt;/jackson.core.databind.version&gt;--&gt;\r\n            &lt;jackson.dataformat.protobuf.version&gt;2.15.2&lt;/jackson.dataformat.protobuf.version&gt;\r\n            &lt;jackson.dataformat.xml.version&gt;2.15.2&lt;/jackson.dataformat.xml.version&gt;\r\n            &lt;jackson.dataformat.yaml.version&gt;2.15.2&lt;/jackson.dataformat.yaml.version&gt;\r\n            &lt;!-- JAXB --&gt;\r\n            &lt;jakarta.xml.bind.jaxb-api.version&gt;4.0.0&lt;/jakarta.xml.bind.jaxb-api.version&gt;\r\n            &lt;org.glassfish.jaxb.jaxb-runtime.version&gt;4.0.3&lt;/org.glassfish.jaxb.jaxb-runtime.version&gt;\r\n        &lt;/properties&gt;\r\n        \r\n        &lt;!-- DEPENDENCIES --&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;!--           --&gt;\r\n            &lt;!-- 3rd party --&gt;\r\n            &lt;!--           --&gt;\r\n            &lt;!-- Jakarta --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${jakarta.xml.bind.jaxb-api.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n                &lt;version&gt;${org.glassfish.jaxb.jaxb-runtime.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- Jackson --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-dataformat-protobuf&lt;/artifactId&gt;\r\n                &lt;version&gt;${jackson.dataformat.protobuf.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n                &lt;version&gt;${jackson.dataformat.xml.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-module-jakarta-xmlbind-annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;${jackson.dataformat.xml.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n                &lt;version&gt;${jackson.dataformat.yaml.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--           --&gt;\r\n            &lt;!-- Testing   --&gt;\r\n            &lt;!--           --&gt;\r\n            &lt;!-- Own       --&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n# Serialization output #\r\n\r\nsee above\r\n\r\n# Logs #\r\n\r\n## `Jackson` error ##\r\n\r\n    Exception in thread &quot;main&quot; com.fasterxml.jackson.core.JsonParseException: Duplicate attribute &#39;dimensions&#39;.\r\n     at [row,col {unknown-source}]: [1,37]\r\n      at com.fasterxml.jackson.dataformat.xml.XmlFactory._initializeXmlReader(XmlFactory.java:734)","title":"Jackson: Serialization of primitive array leads to problematic differences compared to JAXB","body":"<p>I found a problem when switching from a <code>JAXB</code> to a <code>Jackson</code> based serialization with the <code>JakartaXmlBindAnnotationModule</code> of a simple POJO. The POJO has an integer array attribute that is handled differently between the two approaches, see the MWE below.</p>\n<p>For the <code>JAXB</code> based approach, I basically get the result I expect:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;pojo dimensions=&quot;4 3&quot;/&gt;\n</code></pre>\n<p>For the <code>Jackson</code> variant the output is:</p>\n<pre><code>&lt;POJO dimensions=&quot;4&quot; dimensions=&quot;3&quot;/&gt;\n</code></pre>\n<p>which later fails during deserialization, as there are now two attributes with the name <code>dimensions</code>. Basically, the <code>Jackson</code> variant seems to serialize the array with the same approach for <code>@XmlAttribute</code> and <code>@XmlElement</code>, while the <code>JAXB</code> variant seems to recognize that for the use in a <code>@XmlAttribute</code> it is not necessary to repeat the attribute name and simply concat the values separated by a space delimiter.</p>\n<p>Is there any way to get the <code>Jackson</code>-based variant to behave the same as the <code>JAXB</code> one?</p>\n<hr />\n<h1>MWE</h1>\n<h2><code>POJO.java</code></h2>\n<pre><code>import com.fasterxml.jackson.annotation.JsonTypeInfo;\nimport jakarta.xml.bind.annotation.XmlAccessType;\nimport jakarta.xml.bind.annotation.XmlAccessorType;\nimport jakarta.xml.bind.annotation.XmlAttribute;\nimport jakarta.xml.bind.annotation.XmlRootElement;\n\n@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\n\npublic class POJO{\n    \n    @XmlAttribute\n    private int[] dimensions;\n\n    public POJO() {}\n\n    public POJO(\n            int[] dimensions\n    ) {\n        this.dimensions = dimensions;\n    }\n\n    public void setDimensions(int[] v){this.dimensions = v;}\n    public int[] getDimensions(){return dimensions;}\n\n}\n</code></pre>\n<h2><code>Main.java</code></h2>\n<pre><code>import com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\nimport com.fasterxml.jackson.module.jakarta.xmlbind.JakartaXmlBindAnnotationModule;\nimport jakarta.xml.bind.JAXBContext;\nimport jakarta.xml.bind.JAXBException;\nimport jakarta.xml.bind.Marshaller;\nimport jakarta.xml.bind.Unmarshaller;\nimport java.io.ByteArrayInputStream;\nimport java.io.InputStream;\nimport java.io.StringWriter;\nimport java.nio.charset.StandardCharsets;\n\npublic class Main {\n\n    public static void main(String[] args) throws JAXBException, JsonProcessingException {\n        \n        POJO pojo = new POJO(new int[]{4,3});\n        \n        jaxb(pojo);\n        jackson(pojo);\n        \n    }\n    \n    public static void jaxb(POJO pojo) throws JAXBException{\n        \n        System.out.println(&quot;JAXB&quot;);\n        \n        // Serialize\n        JAXBContext context = JAXBContext.newInstance(pojo.getClass());\n\n        //Marshaller marshaller = context.createMarshaller();\n        Marshaller marshaller = context.createMarshaller();\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n            \n        // Creating the Document object\n        StringWriter document = new StringWriter();\n\n        // Marshaling the User object into a Document object\n        marshaller.marshal(pojo, document);\n\n        //\n        String serialized = document.toString();\n        \n        System.out.println(&quot;serialized:&quot;);\n        System.out.println(serialized);\n        \n        // Deserialize\n        Unmarshaller unmarshaller = context.createUnmarshaller();\n        InputStream stream = new ByteArrayInputStream(serialized.getBytes(StandardCharsets.UTF_8));\n        POJO result = (POJO)unmarshaller.unmarshal(stream);\n        \n        assert (result != null);\n    }\n    \n    public static void jackson(POJO pojo) throws JsonProcessingException{\n        \n        System.out.println(&quot;Jackson&quot;);\n        \n        // Serialize\n        ObjectMapper objectMapper = XmlMapper.builder()\n                .defaultUseWrapper(false)\n                .addModule(new JakartaXmlBindAnnotationModule())\n                .enable(SerializationFeature.INDENT_OUTPUT)\n                .serializationInclusion(JsonInclude.Include.NON_EMPTY)\n                .build();\n        String serialized = objectMapper.writeValueAsString(pojo);\n        \n        System.out.println(&quot;serialized:&quot;);\n        System.out.println(serialized);\n        \n        // Deserialize\n        XmlMapper objectMapper2 = new XmlMapper();\n        objectMapper2.configure(DeserializationFeature.UNWRAP_ROOT_VALUE, false);\n        objectMapper2.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\n        objectMapper2.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        objectMapper2.registerModule(new JakartaXmlBindAnnotationModule());      \n        \n        POJO result = (POJO)objectMapper.readValue(serialized,POJO.class);\n        \n        assert (result != null);\n        \n    }\n}\n</code></pre>\n<h2><code>pom.xml</code></h2>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;de.mr&lt;/groupId&gt;\n    &lt;artifactId&gt;qarrayserializationjackson&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n        &lt;!-- Jackson   --&gt;\n        &lt;!--&lt;jackson.core.databind.version&gt;2.12.3&lt;/jackson.core.databind.version&gt;--&gt;\n        &lt;jackson.dataformat.protobuf.version&gt;2.15.2&lt;/jackson.dataformat.protobuf.version&gt;\n        &lt;jackson.dataformat.xml.version&gt;2.15.2&lt;/jackson.dataformat.xml.version&gt;\n        &lt;jackson.dataformat.yaml.version&gt;2.15.2&lt;/jackson.dataformat.yaml.version&gt;\n        &lt;!-- JAXB --&gt;\n        &lt;jakarta.xml.bind.jaxb-api.version&gt;4.0.0&lt;/jakarta.xml.bind.jaxb-api.version&gt;\n        &lt;org.glassfish.jaxb.jaxb-runtime.version&gt;4.0.3&lt;/org.glassfish.jaxb.jaxb-runtime.version&gt;\n    &lt;/properties&gt;\n    \n    &lt;!-- DEPENDENCIES --&gt;\n    &lt;dependencies&gt;\n        &lt;!--           --&gt;\n        &lt;!-- 3rd party --&gt;\n        &lt;!--           --&gt;\n        &lt;!-- Jakarta --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;${jakarta.xml.bind.jaxb-api.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n            &lt;version&gt;${org.glassfish.jaxb.jaxb-runtime.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Jackson --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-protobuf&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.dataformat.protobuf.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.dataformat.xml.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-module-jakarta-xmlbind-annotations&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.dataformat.xml.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.dataformat.yaml.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--           --&gt;\n        &lt;!-- Testing   --&gt;\n        &lt;!--           --&gt;\n        &lt;!-- Own       --&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<h1>Serialization output</h1>\n<p>see above</p>\n<h1>Logs</h1>\n<h2><code>Jackson</code> error</h2>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.core.JsonParseException: Duplicate attribute 'dimensions'.\n at [row,col {unknown-source}]: [1,37]\n  at com.fasterxml.jackson.dataformat.xml.XmlFactory._initializeXmlReader(XmlFactory.java:734)\n</code></pre>\n"},{"tags":["java","inheritance","casting"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1664036897,"post_id":73838822,"comment_id":130381826,"body_markdown":"Show the definitions of `Car`, `Truck`, `Sedan`, `Cabriolet` and their relation","body":"Show the definitions of <code>Car</code>, <code>Truck</code>, <code>Sedan</code>, <code>Cabriolet</code> and their relation"},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1664037181,"post_id":73838822,"comment_id":130381884,"body_markdown":"One never instances sub-classes from the class they extend. That&#39;s just illogical... the builder pattern might eventually be the closest to what you&#39;re trying to accomplish there. The whole type-casting is just pointless ... instead `return new Cabriolet()`.","body":"One never instances sub-classes from the class they extend. That&#39;s just illogical... the builder pattern might eventually be the closest to what you&#39;re trying to accomplish there. The whole type-casting is just pointless ... instead <code>return new Cabriolet()</code>."},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1664037665,"post_id":73838822,"comment_id":130381956,"body_markdown":"You can&#39;t cast a `Car` to a `Truck` or `Sedan` or any child class. That&#39;s the same as if you&#39;d try to cast an `Object` to a `String`. It doesn&#39;t matter that `Truck` implements `Car`, because you instantiated `defaultObj` as `new Car(...)`","body":"You can&#39;t cast a <code>Car</code> to a <code>Truck</code> or <code>Sedan</code> or any child class. That&#39;s the same as if you&#39;d try to cast an <code>Object</code> to a <code>String</code>. It doesn&#39;t matter that <code>Truck</code> implements <code>Car</code>, because you instantiated <code>defaultObj</code> as <code>new Car(...)</code>"}],"answers":[{"comments":[{"owner":{"account_id":25651489,"reputation":47,"user_id":19418655,"display_name":"Alexander"},"score":0,"creation_date":1664038141,"post_id":73838850,"comment_id":130382059,"body_markdown":"So I can&#39;t do that, right?","body":"So I can&#39;t do that, right?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1664038173,"post_id":73838850,"comment_id":130382067,"body_markdown":"No, you cannot do that. It simply doesn&#39;t work like that. Where would the truck instance get its weight from? It has never been assigned and there&#39;s no memory allocated for it","body":"No, you cannot do that. It simply doesn&#39;t work like that. Where would the truck instance get its weight from? It has never been assigned and there&#39;s no memory allocated for it"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1664038526,"post_id":73838850,"comment_id":130382125,"body_markdown":"@Aleksandr only if `parrentClass` was assigned a ChildClass instance. Please see my updated answer.","body":"@Aleksandr only if <code>parrentClass</code> was assigned a ChildClass instance. Please see my updated answer."},{"owner":{"account_id":25651489,"reputation":47,"user_id":19418655,"display_name":"Alexander"},"score":0,"creation_date":1664038550,"post_id":73838850,"comment_id":130382129,"body_markdown":"Oh sorry my bad. My mind is messed up by the evening ))","body":"Oh sorry my bad. My mind is messed up by the evening ))"},{"owner":{"account_id":25651489,"reputation":47,"user_id":19418655,"display_name":"Alexander"},"score":0,"creation_date":1664038623,"post_id":73838850,"comment_id":130382144,"body_markdown":"Yeah I&#39;ve seen you edit. I&#39;ve totally forgotten about it for some reason. Sorry for being a little bit stupid","body":"Yeah I&#39;ve seen you edit. I&#39;ve totally forgotten about it for some reason. Sorry for being a little bit stupid"}],"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691514523,"creation_date":1664036877,"answer_id":73838850,"question_id":73838822,"body_markdown":"`new Car` will always be a `Car` instance. Unless `Truck`, `Sedan`, and `Cabriolet` are all interfaces, `Car` cannot be all of them at the same time (and it would be weird to have `Car implements Truck, Sedan, Cabriolet`; that doesn&#39;t really make sense).\r\n\r\nAnd why are you casting if you are only returning a `Car` from your method anyway? Effectively you execute `return (Car)(Truck)new Car(…);`\r\n\r\nYou cannot cast objects of the base class to a child class, because the base class doesn&#39;t have all the information required to represent instances of the child class.\r\n\r\nConsider the following example:\r\n\r\n```\r\nclass Car {\r\n  int wheels;\r\n  Car(int wheels) { this.wheels = wheels; }\r\n}\r\nclass Truck extends Car {\r\n  int weight;\r\n  Truck(int wheels, int weight) {\r\n    super(wheels);\r\n    this.weight = weight;\r\n  }\r\n}\r\n\r\nclass Program {\r\n  public static void main() {\r\n    Car car = new Car(4);\r\n    Truck truck = (Truck)car;\r\n    // what&#39;s the weight of the truck? impossible to know, because a Car is not a Truck\r\n  }\r\n}\r\n```\r\n\r\nThe above doesn&#39;t work, but the following does:\r\n\r\n```java\r\nclass Program {\r\n  public static void main() {\r\n    Car car = new Truck(4, 1000);\r\n    Truck truck = (Truck)car;\r\n    System.out.println(truck.weight);\r\n  }\r\n}\r\n```","title":"Narrowing Casting problem spoted by Intellij IDEA","body":"<p><code>new Car</code> will always be a <code>Car</code> instance. Unless <code>Truck</code>, <code>Sedan</code>, and <code>Cabriolet</code> are all interfaces, <code>Car</code> cannot be all of them at the same time (and it would be weird to have <code>Car implements Truck, Sedan, Cabriolet</code>; that doesn't really make sense).</p>\n<p>And why are you casting if you are only returning a <code>Car</code> from your method anyway? Effectively you execute <code>return (Car)(Truck)new Car(…);</code></p>\n<p>You cannot cast objects of the base class to a child class, because the base class doesn't have all the information required to represent instances of the child class.</p>\n<p>Consider the following example:</p>\n<pre><code>class Car {\n  int wheels;\n  Car(int wheels) { this.wheels = wheels; }\n}\nclass Truck extends Car {\n  int weight;\n  Truck(int wheels, int weight) {\n    super(wheels);\n    this.weight = weight;\n  }\n}\n\nclass Program {\n  public static void main() {\n    Car car = new Car(4);\n    Truck truck = (Truck)car;\n    // what's the weight of the truck? impossible to know, because a Car is not a Truck\n  }\n}\n</code></pre>\n<p>The above doesn't work, but the following does:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Program {\n  public static void main() {\n    Car car = new Truck(4, 1000);\n    Truck truck = (Truck)car;\n    System.out.println(truck.weight);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":25651489,"reputation":47,"user_id":19418655,"display_name":"Alexander"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73838850,"answer_count":1,"score":1,"last_activity_date":1691514523,"creation_date":1664036691,"question_id":73838822,"body_markdown":"I&#39;m trying to create a &quot;Truck&quot; using downcasting from the parent class (Truck extends Car)\r\n\r\n    private Truck truck;\r\n    \r\n    public void createTruck() {\r\n        Car basicCar = new Car();\r\n        this.truck = (Truck) basicCar;\r\n    }\r\n\r\n\r\n\r\nBut for some reason Intellij IDEA spots a problem\r\n\r\n&gt; Casting &#39;basicCar&#39; to &#39;Truck&#39; will produce &#39;ClassCastException&#39;for any non-null value\r\n\r\nWhat have I done wrong?","title":"Narrowing Casting problem spoted by Intellij IDEA","body":"<p>I'm trying to create a &quot;Truck&quot; using downcasting from the parent class (Truck extends Car)</p>\n<pre><code>private Truck truck;\n\npublic void createTruck() {\n    Car basicCar = new Car();\n    this.truck = (Truck) basicCar;\n}\n</code></pre>\n<p>But for some reason Intellij IDEA spots a problem</p>\n<blockquote>\n<p>Casting 'basicCar' to 'Truck' will produce 'ClassCastException'for any non-null value</p>\n</blockquote>\n<p>What have I done wrong?</p>\n"},{"tags":["java","gradle","java-17"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1635792405,"post_id":69801373,"comment_id":123382965,"body_markdown":"You&#39;d have better luck searching github issues - https://github.com/gradle/gradle/issues/18508","body":"You&#39;d have better luck searching github issues - <a href=\"https://github.com/gradle/gradle/issues/18508\" rel=\"nofollow noreferrer\">github.com/gradle/gradle/issues/18508</a>"},{"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"score":0,"creation_date":1635794106,"post_id":69801373,"comment_id":123383550,"body_markdown":"thanks! following your link I have found another issue: https://github.com/gradle/gradle/issues/16857 according to which the answer is version 7.2.","body":"thanks! following your link I have found another issue: <a href=\"https://github.com/gradle/gradle/issues/16857\" rel=\"nofollow noreferrer\">github.com/gradle/gradle/issues/16857</a> according to which the answer is version 7.2."},{"owner":{"account_id":3845096,"reputation":126,"user_id":3186906,"display_name":"viglu"},"score":0,"creation_date":1636443410,"post_id":69801373,"comment_id":125030941,"body_markdown":"I&#39;m using Gradle 7.2 with JAVA 17 and IntelliJ 2021.2.3 without problems.","body":"I&#39;m using Gradle 7.2 with JAVA 17 and IntelliJ 2021.2.3 without problems."},{"owner":{"account_id":4614611,"reputation":6295,"user_id":3741571,"accept_rate":2,"display_name":"chenzhongpu"},"score":0,"creation_date":1640779969,"post_id":69801373,"comment_id":125030942,"body_markdown":"I am also using the same setting (Gradle 7.2, Java 17, and IntelliJ 2021.2.3), and it works well.","body":"I am also using the same setting (Gradle 7.2, Java 17, and IntelliJ 2021.2.3), and it works well."},{"owner":{"account_id":116757,"reputation":2670,"user_id":306047,"accept_rate":57,"display_name":"snorbi"},"score":0,"creation_date":1642156514,"post_id":69801373,"comment_id":125030943,"body_markdown":"Gradle 7.2 *may* work with Java 17 but it is not officially supported. Eg. I had problems when using Kotlin with Java 17 and Gradle versions &lt;7.3 .\nBased on the official compatibility table, Gradle 7.3 is the first version supporting Java 17.","body":"Gradle 7.2 <i>may</i> work with Java 17 but it is not officially supported. Eg. I had problems when using Kotlin with Java 17 and Gradle versions &lt;7.3 . Based on the official compatibility table, Gradle 7.3 is the first version supporting Java 17."}],"answers":[{"tags":[],"owner":{"account_id":6464248,"reputation":6030,"user_id":5006866,"display_name":"thokuest"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1636963058,"creation_date":1635793343,"answer_id":69801589,"question_id":69801373,"body_markdown":"Gradle 7.3 is the first version fully supporting Java 17. From the [Release Notes][1]:\r\n\r\n&gt; **Support for Java 17**\r\n&gt; \r\n&gt; Gradle now supports running on and building with Java 17.\r\n&gt;\r\n&gt; In previous Gradle versions, running Gradle itself on Java 17 resulted in an error. JVM projects could have been built with Java 17 [using toolchains][2].\r\n&gt; \r\n&gt; As of Gradle 7.3, both running Gradle itself and building JVM projects with Java 17 is fully supported.\r\n\r\n  [1]: https://docs.gradle.org/7.3/release-notes.html#java17\r\n  [2]: https://docs.gradle.org/7.3/userguide/toolchains.html","title":"Starting from which version Gradle supports Java 17","body":"<p>Gradle 7.3 is the first version fully supporting Java 17. From the <a href=\"https://docs.gradle.org/7.3/release-notes.html#java17\" rel=\"noreferrer\">Release Notes</a>:</p>\n<blockquote>\n<p><strong>Support for Java 17</strong></p>\n<p>Gradle now supports running on and building with Java 17.</p>\n<p>In previous Gradle versions, running Gradle itself on Java 17 resulted in an error. JVM projects could have been built with Java 17 <a href=\"https://docs.gradle.org/7.3/userguide/toolchains.html\" rel=\"noreferrer\">using toolchains</a>.</p>\n<p>As of Gradle 7.3, both running Gradle itself and building JVM projects with Java 17 is fully supported.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":7319837,"reputation":781,"user_id":5576205,"display_name":"NotABot"},"score":0,"creation_date":1636961678,"post_id":69970457,"comment_id":123687875,"body_markdown":"HI @Deepanshu Bhardwaj ! please follow the practice of being specific to question what will help community members and to upvote and accept your answer. As we can see question states that &quot;from which version Gradle supports Java 17&quot;. Thanks","body":"HI @Deepanshu Bhardwaj ! please follow the practice of being specific to question what will help community members and to upvote and accept your answer. As we can see question states that &quot;from which version Gradle supports Java 17&quot;. Thanks"},{"owner":{"account_id":4830524,"reputation":43,"user_id":3898832,"display_name":"Deepanshu Bhardwaj"},"score":0,"creation_date":1636962417,"post_id":69970457,"comment_id":123688083,"body_markdown":"Edited my response :) @NotABot","body":"Edited my response :) @NotABot"}],"tags":[],"owner":{"account_id":4830524,"reputation":43,"user_id":3898832,"display_name":"Deepanshu Bhardwaj"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1636962328,"creation_date":1636959653,"answer_id":69970457,"question_id":69801373,"body_markdown":"From version 7.3 Gradle is officially supporting Java 17. For more details, compatibility matrix can be seen [here][1] and details of releases can be seen from [here][2].\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/compatibility.html#java\r\n  [2]: https://gradle.org/releases/","title":"Starting from which version Gradle supports Java 17","body":"<p>From version 7.3 Gradle is officially supporting Java 17. For more details, compatibility matrix can be seen <a href=\"https://docs.gradle.org/current/userguide/compatibility.html#java\" rel=\"nofollow noreferrer\">here</a> and details of releases can be seen from <a href=\"https://gradle.org/releases/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":119615,"reputation":11742,"user_id":311420,"accept_rate":87,"display_name":"Raymond Chenon"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1691514504,"creation_date":1664278113,"answer_id":73866820,"question_id":69801373,"body_markdown":"Here is the Gradle and Java version compatibility.\r\n\r\nFor gradle 7.0 , you have to downgrade to Java 16.\r\n\r\nOr you keep Java 17.0.1 , your gradle has to be update to 7.3 or above.\r\n\r\n## Table Java compatibility\r\n\r\n|Java version| First Gradle version to support it|\r\n|------------|-----------|\r\n|8| 2.0|\r\n|9|4.3|\r\n|10|4.7|\r\n|11|5.0|\r\n|12|5.4|\r\n|13|6.0|\r\n|14|6.3|\r\n|15|6.7|\r\n|16|7.0|\r\n|17|7.3|\r\n|18|7.5|\r\n|19|7.6|\r\n|20|8.1 ⚠|\r\n\r\n\r\nhttps://docs.gradle.org/current/userguide/compatibility.html\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0dkmr.png","title":"Starting from which version Gradle supports Java 17","body":"<p>Here is the Gradle and Java version compatibility.</p>\n<p>For gradle 7.0 , you have to downgrade to Java 16.</p>\n<p>Or you keep Java 17.0.1 , your gradle has to be update to 7.3 or above.</p>\n<h2>Table Java compatibility</h2>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Java version</th>\n<th>First Gradle version to support it</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>8</td>\n<td>2.0</td>\n</tr>\n<tr>\n<td>9</td>\n<td>4.3</td>\n</tr>\n<tr>\n<td>10</td>\n<td>4.7</td>\n</tr>\n<tr>\n<td>11</td>\n<td>5.0</td>\n</tr>\n<tr>\n<td>12</td>\n<td>5.4</td>\n</tr>\n<tr>\n<td>13</td>\n<td>6.0</td>\n</tr>\n<tr>\n<td>14</td>\n<td>6.3</td>\n</tr>\n<tr>\n<td>15</td>\n<td>6.7</td>\n</tr>\n<tr>\n<td>16</td>\n<td>7.0</td>\n</tr>\n<tr>\n<td>17</td>\n<td>7.3</td>\n</tr>\n<tr>\n<td>18</td>\n<td>7.5</td>\n</tr>\n<tr>\n<td>19</td>\n<td>7.6</td>\n</tr>\n<tr>\n<td>20</td>\n<td>8.1 ⚠</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"noreferrer\">https://docs.gradle.org/current/userguide/compatibility.html</a></p>\n"}],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50383,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":69801589,"answer_count":3,"score":18,"last_activity_date":1691514504,"creation_date":1635792162,"question_id":69801373,"body_markdown":"When trying to configure the project I&#39;m getting the error:\r\n\r\n&gt; Unsupported Java. Your build is currently configured to use Java 17.0.1 and Gradle 7.0.\r\n\r\nUnfortunately there are no information in [official documentation][1] for now.\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/compatibility.html","title":"Starting from which version Gradle supports Java 17","body":"<p>When trying to configure the project I'm getting the error:</p>\n<blockquote>\n<p>Unsupported Java. Your build is currently configured to use Java 17.0.1 and Gradle 7.0.</p>\n</blockquote>\n<p>Unfortunately there are no information in <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"noreferrer\">official documentation</a> for now.</p>\n"},{"tags":["java","spring","spring-boot","tomcat","tomcat9"],"answers":[{"tags":[],"owner":{"account_id":28972135,"reputation":21,"user_id":22192187,"display_name":"TheKingVaro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691513769,"creation_date":1691513769,"answer_id":76861699,"question_id":76858658,"body_markdown":"Solved it! Apache CXF was exporting Spring Core 3.0.7 into WEB-INF/lib folder of Tomcat server, and was overriding Spring Core 5.3.29, which was configured on pom.xml and contains the ReflectionUtils.accessibleConstructor method.\r\n\r\nThe solution is to not export Apache CXF libraries into WEB-INF/lib. So:\r\n\r\nRight click on Project -&gt; Properties -&gt; Java Build Path -&gt; Apache CXF, remove the option that exports Apache CXF library into WEB-INF/lib.\r\n\r\nSee ya!","title":"Failed to instantiate WebApplicationInitializer class (ReflectionUtils.accessibleConstructor)","body":"<p>Solved it! Apache CXF was exporting Spring Core 3.0.7 into WEB-INF/lib folder of Tomcat server, and was overriding Spring Core 5.3.29, which was configured on pom.xml and contains the ReflectionUtils.accessibleConstructor method.</p>\n<p>The solution is to not export Apache CXF libraries into WEB-INF/lib. So:</p>\n<p>Right click on Project -&gt; Properties -&gt; Java Build Path -&gt; Apache CXF, remove the option that exports Apache CXF library into WEB-INF/lib.</p>\n<p>See ya!</p>\n"}],"owner":{"account_id":28972135,"reputation":21,"user_id":22192187,"display_name":"TheKingVaro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76861699,"answer_count":1,"score":0,"last_activity_date":1691513769,"creation_date":1691490354,"question_id":76858658,"body_markdown":"Good morning\r\n\r\nI&#39;m developing a REST API with Java 8, Spring 5.3.29 and Spring Boot 2.7.14 and I&#39;m having the next issue when I try to launch the application on a Tomcat 9 server in Eclipse:\r\n\r\n```\r\nGRAVE: Error during ServletContainerInitializer processing\r\njavax.servlet.ServletException: Failed to instantiate WebApplicationInitializer class\r\n\tat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:160)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4936)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\r\n\tat java.util.concurrent.FutureTask.run(Unknown Source)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\tat java.util.concurrent.AbstractExecutorService.submit(Unknown Source)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\r\n\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:795)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\r\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\r\n\tat java.util.concurrent.FutureTask.run(Unknown Source)\r\n\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\tat java.util.concurrent.AbstractExecutorService.submit(Unknown Source)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:249)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:922)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\r\nCaused by: java.lang.NoSuchMethodError: org.springframework.util.ReflectionUtils.accessibleConstructor(Ljava/lang/Class;[Ljava/lang/Class;)Ljava/lang/reflect/Constructor;\r\n\tat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:157)\r\n\t... 29 more\r\n```\r\n\r\nWhen I debug to stop on SpringServletContainerInitializer.java:157, which is:\r\n```\r\ninitializers.add((WebApplicationInitializer)\r\n\t\t\t\t\t\t\t\tReflectionUtils.accessibleConstructor(waiClass).newInstance());\r\n```\r\nThe waiClass is: class org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration$JerseyWebApplicationInitializer\r\n\r\nMy pom.xml is:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.14&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;es.application&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;app&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;app&lt;/name&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;description&gt;Description&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;spring-framework.version&gt;5.3.29&lt;/spring-framework.version&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!-- SPRING BOOT --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- JAXB --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-xjc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.15.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;pid&lt;/finalName&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nAnd here is my Application.java:\r\n```\r\n@SpringBootApplication\r\npublic class Application extends SpringBootServletInitializer{\r\n\t\r\n    @Override\r\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n        return application.sources(Application.class);\r\n    }\r\n    \r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nWhat can I do?\r\n\r\nThank you!","title":"Failed to instantiate WebApplicationInitializer class (ReflectionUtils.accessibleConstructor)","body":"<p>Good morning</p>\n<p>I'm developing a REST API with Java 8, Spring 5.3.29 and Spring Boot 2.7.14 and I'm having the next issue when I try to launch the application on a Tomcat 9 server in Eclipse:</p>\n<pre><code>GRAVE: Error during ServletContainerInitializer processing\njavax.servlet.ServletException: Failed to instantiate WebApplicationInitializer class\n    at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:160)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4936)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\n    at java.util.concurrent.FutureTask.run(Unknown Source)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(Unknown Source)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:795)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1328)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1318)\n    at java.util.concurrent.FutureTask.run(Unknown Source)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(Unknown Source)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:249)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:922)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\nCaused by: java.lang.NoSuchMethodError: org.springframework.util.ReflectionUtils.accessibleConstructor(Ljava/lang/Class;[Ljava/lang/Class;)Ljava/lang/reflect/Constructor;\n    at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:157)\n    ... 29 more\n</code></pre>\n<p>When I debug to stop on SpringServletContainerInitializer.java:157, which is:</p>\n<pre><code>initializers.add((WebApplicationInitializer)\n                                ReflectionUtils.accessibleConstructor(waiClass).newInstance());\n</code></pre>\n<p>The waiClass is: class org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration$JerseyWebApplicationInitializer</p>\n<p>My pom.xml is:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.14&lt;/version&gt;\n        &lt;relativePath /&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;es.application&lt;/groupId&gt;\n    &lt;artifactId&gt;app&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;app&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;description&gt;Description&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;spring-framework.version&gt;5.3.29&lt;/spring-framework.version&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;!-- SPRING BOOT --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- JAXB --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.3.8&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-xjc&lt;/artifactId&gt;\n            &lt;version&gt;2.3.8&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.15.3&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;pid&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>And here is my Application.java:</p>\n<pre><code>@SpringBootApplication\npublic class Application extends SpringBootServletInitializer{\n    \n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(Application.class);\n    }\n    \n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>What can I do?</p>\n<p>Thank you!</p>\n"},{"tags":["java","maven","pom.xml"],"answers":[{"comments":[{"owner":{"account_id":6098218,"reputation":707,"user_id":4758320,"accept_rate":72,"display_name":"Dev Anand Sadasivam"},"score":0,"creation_date":1641370384,"post_id":67142703,"comment_id":124784371,"body_markdown":"with `&lt;fork&gt;true&lt;/fork&gt;`","body":"with <code>&lt;fork&gt;true&lt;&#47;fork&gt;</code>"}],"tags":[],"owner":{"account_id":21282016,"reputation":51,"user_id":15660295,"display_name":"John Doe"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618691632,"creation_date":1618691632,"answer_id":67142703,"question_id":67142259,"body_markdown":"It looks like it&#39;s a bug.\r\n\r\nhttps://github.com/openjfx/javafx-maven-plugin/issues/125\r\n\r\nAdding `&lt;executable&gt;&lt;/executable&gt;` with the absolute path to the JDK 16 should fix it.","title":"Specifying JDK 16 in Maven properties","body":"<p>It looks like it's a bug.</p>\n<p><a href=\"https://github.com/openjfx/javafx-maven-plugin/issues/125\" rel=\"nofollow noreferrer\">https://github.com/openjfx/javafx-maven-plugin/issues/125</a></p>\n<p>Adding <code>&lt;executable&gt;&lt;/executable&gt;</code> with the absolute path to the JDK 16 should fix it.</p>\n"},{"comments":[{"owner":{"account_id":3507720,"reputation":167,"user_id":2932881,"display_name":"Scott Gustafson"},"score":0,"creation_date":1691513033,"post_id":70589701,"comment_id":135500712,"body_markdown":"Although this would work, a better solution is to put the bin directory on your path.  Then you need not set a executable setting (which may differ by user).","body":"Although this would work, a better solution is to put the bin directory on your path.  Then you need not set a executable setting (which may differ by user)."},{"owner":{"account_id":6098218,"reputation":707,"user_id":4758320,"accept_rate":72,"display_name":"Dev Anand Sadasivam"},"score":0,"creation_date":1693154935,"post_id":70589701,"comment_id":135719674,"body_markdown":"Thanks for your suggestion. Let me try it once when I do the concerned work regarding this. :)","body":"Thanks for your suggestion. Let me try it once when I do the concerned work regarding this. :)"}],"tags":[],"owner":{"account_id":6098218,"reputation":707,"user_id":4758320,"accept_rate":72,"display_name":"Dev Anand Sadasivam"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1641370813,"creation_date":1641370813,"answer_id":70589701,"question_id":67142259,"body_markdown":"Beyond JDK8, you need to specify the `javac` path of your JDK and you must set `fork` to `true` to get the code executed with mentioned compiler, in `maven-compiler-plugin` `pom.xml` file.\r\n\r\nHere is the maven-compiler-plugin configuration,-\r\n\r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.8.1&lt;/version&gt;\r\n    \t&lt;configuration&gt;\r\n    \t\t&lt;source&gt;16&lt;/source&gt;\r\n    \t\t&lt;target&gt;16&lt;/target&gt;\r\n    \t\t&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n    \t\t&lt;fork&gt;true&lt;/fork&gt;\r\n    \t\t&lt;executable&gt;C:\\Progra~1\\Java\\jdk-16.0.2\\bin\\javac&lt;/executable&gt;\r\n    \t&lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"Specifying JDK 16 in Maven properties","body":"<p>Beyond JDK8, you need to specify the <code>javac</code> path of your JDK and you must set <code>fork</code> to <code>true</code> to get the code executed with mentioned compiler, in <code>maven-compiler-plugin</code> <code>pom.xml</code> file.</p>\n<p>Here is the maven-compiler-plugin configuration,-</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;16&lt;/source&gt;\n        &lt;target&gt;16&lt;/target&gt;\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n        &lt;fork&gt;true&lt;/fork&gt;\n        &lt;executable&gt;C:\\Progra~1\\Java\\jdk-16.0.2\\bin\\javac&lt;/executable&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3507720,"reputation":167,"user_id":2932881,"display_name":"Scott Gustafson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691513228,"creation_date":1691512887,"answer_id":76861606,"question_id":67142259,"body_markdown":"Put the JDK bin directory of the version you want on your path. That works in most cases, however I&#39;m not certain about the Java Fx bug that is discussed, your mileage may vary.","title":"Specifying JDK 16 in Maven properties","body":"<p>Put the JDK bin directory of the version you want on your path. That works in most cases, however I'm not certain about the Java Fx bug that is discussed, your mileage may vary.</p>\n"}],"owner":{"account_id":21282016,"reputation":51,"user_id":15660295,"display_name":"John Doe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7155,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1691513228,"creation_date":1618688209,"question_id":67142259,"body_markdown":"I think this two lines specify JDK 11.\r\n```\r\n&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n```\r\n\r\nI am using Java FX 16 and I compile a code with JDK 16.\r\n\r\nWhen I&#39;ve tried specify JDK 16:\r\n```\r\n&lt;maven.compiler.source&gt;16&lt;/maven.compiler.source&gt;\r\n&lt;maven.compiler.target&gt;16&lt;/maven.compiler.target&gt;\r\n```\r\nI get this error message:\r\n```\r\nCaused by: java.lang.module.InvalidModuleDescriptorException: Unsupported major.minor version 60.0\r\n```\r\n\r\nP.S. This is the `pom.xml`: https://pastebin.com/raw/qTe5Vtnq\r\n\r\nP.P.S According to logs, I compile and run via `/usr/lib/jvm/java-16-openjdk/bin/java`.","title":"Specifying JDK 16 in Maven properties","body":"<p>I think this two lines specify JDK 11.</p>\n<pre><code>&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n</code></pre>\n<p>I am using Java FX 16 and I compile a code with JDK 16.</p>\n<p>When I've tried specify JDK 16:</p>\n<pre><code>&lt;maven.compiler.source&gt;16&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;16&lt;/maven.compiler.target&gt;\n</code></pre>\n<p>I get this error message:</p>\n<pre><code>Caused by: java.lang.module.InvalidModuleDescriptorException: Unsupported major.minor version 60.0\n</code></pre>\n<p>P.S. This is the <code>pom.xml</code>: <a href=\"https://pastebin.com/raw/qTe5Vtnq\" rel=\"nofollow noreferrer\">https://pastebin.com/raw/qTe5Vtnq</a></p>\n<p>P.P.S According to logs, I compile and run via <code>/usr/lib/jvm/java-16-openjdk/bin/java</code>.</p>\n"},{"tags":["java","spring","spring-boot","camunda"],"owner":{"account_id":6426369,"reputation":1111,"user_id":7758110,"accept_rate":56,"display_name":"Chandresh Mishra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691513017,"creation_date":1691513017,"question_id":76861618,"body_markdown":"I have created a external client in a spring boot project. I have following properties set\r\n\r\n    camunda:\r\n      bpm:\r\n        client:\r\n          base-url:https://server/engine-rest\r\n    \r\n    server:\r\n      ssl:\r\n       \r\n        trust-store: classpath:keystore/truststore.jks\r\n        key-store: classpath:keystore/keystore.jks\r\n        enabled: true\r\n        key-store-password: pp\r\n        trust-store-password: pp\r\n        keyStoreType: JKS\r\n      port: &#39;8080&#39;\r\n\r\nBut I am getting following error\r\n\r\n    org.camunda.bpm.client.impl.EngineClientException: TASK/CLIENT-02002 Exception while establishing connection for request &#39;POST /engine-rest/external-task/fetchAndLock HTTP/1.1&#39; \r\n    at org.camunda.bpm.client.impl.EngineClientLogger.exceptionWhileEstablishingConnection(EngineClientLogger.java:36) ~[camunda-external-task-client-7.15.0-alpha5.jar:7.15.0-alpha5]\r\n    \r\n    Caused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","title":"Camunda 7 External Client with HTTPS having SSL exception","body":"<p>I have created a external client in a spring boot project. I have following properties set</p>\n<pre><code>camunda:\n  bpm:\n    client:\n      base-url:https://server/engine-rest\n\nserver:\n  ssl:\n   \n    trust-store: classpath:keystore/truststore.jks\n    key-store: classpath:keystore/keystore.jks\n    enabled: true\n    key-store-password: pp\n    trust-store-password: pp\n    keyStoreType: JKS\n  port: '8080'\n</code></pre>\n<p>But I am getting following error</p>\n<pre><code>org.camunda.bpm.client.impl.EngineClientException: TASK/CLIENT-02002 Exception while establishing connection for request 'POST /engine-rest/external-task/fetchAndLock HTTP/1.1' \nat org.camunda.bpm.client.impl.EngineClientLogger.exceptionWhileEstablishingConnection(EngineClientLogger.java:36) ~[camunda-external-task-client-7.15.0-alpha5.jar:7.15.0-alpha5]\n\nCaused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n"},{"tags":["java","sql-server","linux","docker","jdbc"],"comments":[{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":0,"creation_date":1690979579,"post_id":76819614,"comment_id":135427903,"body_markdown":"The different error messages are due to very different reasons. If you get that a connection failed the server port can&#39;t be reached. Probably not very unexpected with the setup you are mentioning for a docker container as the docker container is not running directly in the Windows system, but in some kind of Linux subsystem and then there must be some kind of port forward in place in the Linux subsystem to be able to reach the Windows system.","body":"The different error messages are due to very different reasons. If you get that a connection failed the server port can&#39;t be reached. Probably not very unexpected with the setup you are mentioning for a docker container as the docker container is not running directly in the Windows system, but in some kind of Linux subsystem and then there must be some kind of port forward in place in the Linux subsystem to be able to reach the Windows system."},{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":0,"creation_date":1690979702,"post_id":76819614,"comment_id":135427934,"body_markdown":"If you connect from a program running in the Linux subsystem instead, there should be no reason why you wouldn&#39;t be able to connect as long as the SQL-server is responding to calls made on a network between the two. If you get the error `Login failed for user` that implies that you have indeed been able to connect to the SQL server but are failing on login. In that case you should check login credentials.","body":"If you connect from a program running in the Linux subsystem instead, there should be no reason why you wouldn&#39;t be able to connect as long as the SQL-server is responding to calls made on a network between the two. If you get the error <code>Login failed for user</code> that implies that you have indeed been able to connect to the SQL server but are failing on login. In that case you should check login credentials."},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1690982545,"post_id":76819614,"comment_id":135428664,"body_markdown":"jTDS hasn&#39;t been updated in very nearly ten years. Is there a particular reason you&#39;re trying to use it?","body":"jTDS hasn&#39;t been updated in very nearly ten years. Is there a particular reason you&#39;re trying to use it?"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1690982696,"post_id":76819614,"comment_id":135428710,"body_markdown":"Since your JDBC connection seems to be connecting, just not authenticating, are you able to connect to the target server with SSMS? Have a look in the SQL Server Logs node for 18456 Login failure messages, take note of their `State` numbers, and compare them against those listed at [MSSQLSERVER_18456](https://learn.microsoft.com/en-us/sql/relational-databases/errors-events/mssqlserver-18456-database-engine-error) to see why the login attempts are failing.","body":"Since your JDBC connection seems to be connecting, just not authenticating, are you able to connect to the target server with SSMS? Have a look in the SQL Server Logs node for 18456 Login failure messages, take note of their <code>State</code> numbers, and compare them against those listed at <a href=\"https://learn.microsoft.com/en-us/sql/relational-databases/errors-events/mssqlserver-18456-database-engine-error\" rel=\"nofollow noreferrer\">MSSQLSERVER_18456</a> to see why the login attempts are failing."},{"owner":{"account_id":21484223,"reputation":11,"user_id":15831106,"display_name":"oggiman"},"score":0,"creation_date":1690982730,"post_id":76819614,"comment_id":135428719,"body_markdown":"Sorry but the question was not well formulated there are some missunderstanding. The docker container is not running on a subsystem but I tried two different approches to connect to sql server the first one was through the ubuntu subsystem the second through a linux docker container.","body":"Sorry but the question was not well formulated there are some missunderstanding. The docker container is not running on a subsystem but I tried two different approches to connect to sql server the first one was through the ubuntu subsystem the second through a linux docker container."},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":1,"creation_date":1690983043,"post_id":76819614,"comment_id":135428802,"body_markdown":"Docker containers are essentially Linux VMs that run inside WSL (Windows Subsystem for Linux). They cannot use Active Directory/Windows credentials because they aren&#39;t domain joined, you need to install and configure Kerberos modules and setup `kinit`, etc., if you want to go that route. With Ubuntu and/or Docker it&#39;s usually much easier to use username+password based SQL Logon credentials unless you have a business reason to do otherwise. That implies that your SQL Server instance must be configured to accept SQL Logon credentials and that you&#39;ve also created the necessary SQL Logon accounts.","body":"Docker containers are essentially Linux VMs that run inside WSL (Windows Subsystem for Linux). They cannot use Active Directory/Windows credentials because they aren&#39;t domain joined, you need to install and configure Kerberos modules and setup <code>kinit</code>, etc., if you want to go that route. With Ubuntu and/or Docker it&#39;s usually much easier to use username+password based SQL Logon credentials unless you have a business reason to do otherwise. That implies that your SQL Server instance must be configured to accept SQL Logon credentials and that you&#39;ve also created the necessary SQL Logon accounts."},{"owner":{"account_id":21484223,"reputation":11,"user_id":15831106,"display_name":"oggiman"},"score":0,"creation_date":1690983939,"post_id":76819614,"comment_id":135429037,"body_markdown":"@AlwaysLearning Trying jtds was just pure desperation","body":"@AlwaysLearning Trying jtds was just pure desperation"},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1690984153,"post_id":76819614,"comment_id":135429100,"body_markdown":"Yeah, forget about AD, it&#39;s hard enough to get working between two windows machines. The last version looks more promising, make sure you actually send correct password though","body":"Yeah, forget about AD, it&#39;s hard enough to get working between two windows machines. The last version looks more promising, make sure you actually send correct password though"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1691216561,"post_id":76819614,"comment_id":135464917,"body_markdown":"Did you ever get around to checking the Error 18456 events in the SQL Server Logs as previously suggested?","body":"Did you ever get around to checking the Error 18456 events in the SQL Server Logs as previously suggested?"},{"owner":{"account_id":21484223,"reputation":11,"user_id":15831106,"display_name":"oggiman"},"score":0,"creation_date":1691401478,"post_id":76819614,"comment_id":135481494,"body_markdown":"@AlwaysLearning: I check the Logs here is it:  \nLogin failed for user &#39;xyz&#39;. Reason: Attempting to use an NT account name with SQL Server Authentication","body":"@AlwaysLearning: I check the Logs here is it:   Login failed for user &#39;xyz&#39;. Reason: Attempting to use an NT account name with SQL Server Authentication"},{"owner":{"account_id":21484223,"reputation":11,"user_id":15831106,"display_name":"oggiman"},"score":0,"creation_date":1691416408,"post_id":76819614,"comment_id":135484664,"body_markdown":"@AlwaysLearning I also found this in the Logs: \nCause: No login could be found that matches the specified name.","body":"@AlwaysLearning I also found this in the Logs:  Cause: No login could be found that matches the specified name."},{"owner":{"account_id":21484223,"reputation":11,"user_id":15831106,"display_name":"oggiman"},"score":0,"creation_date":1691420613,"post_id":76819614,"comment_id":135485741,"body_markdown":"Reason: Could not find a login matching the name provided.","body":"Reason: Could not find a login matching the name provided."}],"answers":[{"tags":[],"owner":{"account_id":21484223,"reputation":11,"user_id":15831106,"display_name":"oggiman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691512863,"creation_date":1691481225,"answer_id":76857512,"question_id":76819614,"body_markdown":"The problem was solved by my database administrator, he created a login user who is capable of sql authentication. But first I had to check the SQL Server Logs to see what the problem was in detail, like in the comments suggested.","title":"Connecting via Java from Ubuntu Subsystem or a Linux docker container to SQL Server which is installed on Windows","body":"<p>The problem was solved by my database administrator, he created a login user who is capable of sql authentication. But first I had to check the SQL Server Logs to see what the problem was in detail, like in the comments suggested.</p>\n"}],"owner":{"account_id":21484223,"reputation":11,"user_id":15831106,"display_name":"oggiman"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76857512,"answer_count":1,"score":0,"last_activity_date":1691512863,"creation_date":1690977361,"question_id":76819614,"body_markdown":"I am trying to connect to a `sql` server database which is installed on windows out of a Linux docker container or from an `ubuntu` subsystem with java code and it is not working.\r\nI need a real hardcore expert on this field. I know there are many solutions out there to this problem and I tried many of them, but nothing worked. The special case is that the SQL Server is installed on Windows and I have a linux docker container, so the connection has to be between os. I have tried jtds and jdbc.\r\nHere is the code which works when is executed on windows but not on linux subsystem or docker.\r\nI also tried &quot;useNTLMv2=true&quot; in the connectionstring:\r\n\r\n```\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Statement;\r\nimport net.sourceforge.jtds.jdbcx.*;\r\nimport net.sourceforge.jtds.jdbc.Driver;\r\npublic class helloWorld {\r\n    public static void main(String[] args) throws  ClassNotFoundException {\r\n//String connectionUrl = &quot;jdbc:jtds:sqlserver://&lt;db_ip&gt;:1433;databaseName=someDB;useNTLMv2=true;&quot;;\r\n        String connectionUrl = &quot;jdbc:jtds:sqlserver://&lt;server_ip&gt;:1433;databaseName=someDB;username=xyz;password=123&quot;;\r\n       Class.forName(&quot;net.sourceforge.jtds.jdbc.Driver&quot;);\r\n        try (Connection con = DriverManager.getConnection(connectionUrl); Statement stmt = con.createStatement()) {\r\n            String SQL = &quot;SELECT [PLZ] FROM [City]&quot;;\r\n            ResultSet rs = stmt.executeQuery(SQL);\r\n\r\n            // Iterate through the data in the result set and display it.\r\n            while (rs.next()) {\r\n                System.out.println(rs.getString(&quot;PLZ&quot;));\r\n            }\r\n        }\r\n        // Handle any errors that may have occurred.\r\n        catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n}\r\n}\r\n```\r\nAnd here ist the exception I am getting from the docker container using jtds:\r\n```\r\n\r\n    java.sql.SQLException: Network error IOException: Connection refused (Connection refused)\r\n            at net.sourceforge.jtds.jdbc.JtdsConnection.&lt;init&gt;(JtdsConnection.java:436)\r\n            at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184)\r\n            at java.sql.DriverManager.getConnection(DriverManager.java:664)\r\n            at java.sql.DriverManager.getConnection(DriverManager.java:270)\r\n            at de.arz.pharmafakt.datadelivery.Main.main(Main.java:93)\r\n    Caused by: java.net.ConnectException: Connection refused (Connection refused)\r\n            at java.net.PlainSocketImpl.socketConnect(Native Method)\r\n            at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\r\n            at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\r\n            at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\r\n            at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n            at java.net.Socket.connect(Socket.java:607)\r\n            at net.sourceforge.jtds.jdbc.SharedSocket.createSocketForJDBC3(SharedSocket.java:288)\r\n            at net.sourceforge.jtds.jdbc.SharedSocket.&lt;init&gt;(SharedSocket.java:251)\r\n            at net.sourceforge.jtds.jdbc.JtdsConnection.&lt;init&gt;(JtdsConnection.java:331)\r\n\r\n```\r\n\r\nAn ohter exception with the same code I get from ubuntu subsystem:\r\n```\r\njava.sql.SQLException: I/O Error: GSS Failed: Invalid name provided (Mechanism level: KrbException: Cannot locate default realm)\r\n        at net.sourceforge.jtds.jdbc.TdsCore.login(TdsCore.java:654)\r\n        at net.sourceforge.jtds.jdbc.JtdsConnection.&lt;init&gt;(JtdsConnection.java:371)\r\n        at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184)\r\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\r\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:251)\r\n        at helloWorld.main(helloWorld.java:16)\r\nCaused by: java.io.IOException: GSS Failed: Invalid name provided (Mechanism level: KrbException: Cannot locate default realm)\r\n        at net.sourceforge.jtds.jdbc.TdsCore.sendMSLoginPkt(TdsCore.java:1976)\r\n        at net.sourceforge.jtds.jdbc.TdsCore.login(TdsCore.java:617)\r\n```\r\nHere is my code jdbc:\r\n\r\n\r\n```\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Statement;\r\n\r\npublic class helloWorld {\r\n            public static void main(String[] args) {\r\n\r\n        String connectionUrl = &quot;jdbc:sqlserver://&lt;server_ip&gt;:1433;databaseName=someDB;user=xyz;password=123;Encrypt=false&quot;;\r\n\r\n        try (Connection con = DriverManager.getConnection(connectionUrl); Statement stmt = con.createStatement();) {\r\n                                 String SQL = &quot;SELECT PLZ FROM city&quot;;\r\n\r\n            ResultSet rs = stmt.executeQuery(SQL);\r\n\r\n            // Iterate through the data in the result set and display it.\r\n            while (rs.next()) {\r\n                System.out.println(rs.getString(&quot;PLZ&quot;) );\r\n            }\r\n        }\r\n        // Handle any errors that may have occurred.\r\n        catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n                        }\r\n        }\r\n```\r\nAnd here is the exception I am getting with ubuntu:\r\n\r\n    com.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user \r\n    &#39;xyz&#39;. ClientConnectionId:21e99cbc-bd73-40a0-8101-542ddffb3a0b\r\n            at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:265)\r\n            at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:305)\r\n            at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:138)\r\n            at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:42)\r\n            at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:6490)\r\n            at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:5068)\r\n            at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:5002)\r\n            at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7685)\r\n            at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:4048)\r\n            at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:3487)\r\n            at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:3077)\r\n            at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:2919)\r\n            at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:1787)\r\n            at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1229)\r\n            at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\r\n            at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:251)\r\n            at helloWorld.main(helloWorld.java:16)\r\n\r\n\r\nI tried almost all solution which are published on the internet to this problem.\r\nI am expecting to see how I could connect to sql server which is installed on windows from linux.","title":"Connecting via Java from Ubuntu Subsystem or a Linux docker container to SQL Server which is installed on Windows","body":"<p>I am trying to connect to a <code>sql</code> server database which is installed on windows out of a Linux docker container or from an <code>ubuntu</code> subsystem with java code and it is not working.\nI need a real hardcore expert on this field. I know there are many solutions out there to this problem and I tried many of them, but nothing worked. The special case is that the SQL Server is installed on Windows and I have a linux docker container, so the connection has to be between os. I have tried jtds and jdbc.\nHere is the code which works when is executed on windows but not on linux subsystem or docker.\nI also tried &quot;useNTLMv2=true&quot; in the connectionstring:</p>\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport net.sourceforge.jtds.jdbcx.*;\nimport net.sourceforge.jtds.jdbc.Driver;\npublic class helloWorld {\n    public static void main(String[] args) throws  ClassNotFoundException {\n//String connectionUrl = &quot;jdbc:jtds:sqlserver://&lt;db_ip&gt;:1433;databaseName=someDB;useNTLMv2=true;&quot;;\n        String connectionUrl = &quot;jdbc:jtds:sqlserver://&lt;server_ip&gt;:1433;databaseName=someDB;username=xyz;password=123&quot;;\n       Class.forName(&quot;net.sourceforge.jtds.jdbc.Driver&quot;);\n        try (Connection con = DriverManager.getConnection(connectionUrl); Statement stmt = con.createStatement()) {\n            String SQL = &quot;SELECT [PLZ] FROM [City]&quot;;\n            ResultSet rs = stmt.executeQuery(SQL);\n\n            // Iterate through the data in the result set and display it.\n            while (rs.next()) {\n                System.out.println(rs.getString(&quot;PLZ&quot;));\n            }\n        }\n        // Handle any errors that may have occurred.\n        catch (SQLException e) {\n            e.printStackTrace();\n        }\n}\n}\n</code></pre>\n<p>And here ist the exception I am getting from the docker container using jtds:</p>\n<pre><code>\n    java.sql.SQLException: Network error IOException: Connection refused (Connection refused)\n            at net.sourceforge.jtds.jdbc.JtdsConnection.&lt;init&gt;(JtdsConnection.java:436)\n            at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184)\n            at java.sql.DriverManager.getConnection(DriverManager.java:664)\n            at java.sql.DriverManager.getConnection(DriverManager.java:270)\n            at de.arz.pharmafakt.datadelivery.Main.main(Main.java:93)\n    Caused by: java.net.ConnectException: Connection refused (Connection refused)\n            at java.net.PlainSocketImpl.socketConnect(Native Method)\n            at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\n            at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\n            at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\n            at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n            at java.net.Socket.connect(Socket.java:607)\n            at net.sourceforge.jtds.jdbc.SharedSocket.createSocketForJDBC3(SharedSocket.java:288)\n            at net.sourceforge.jtds.jdbc.SharedSocket.&lt;init&gt;(SharedSocket.java:251)\n            at net.sourceforge.jtds.jdbc.JtdsConnection.&lt;init&gt;(JtdsConnection.java:331)\n\n</code></pre>\n<p>An ohter exception with the same code I get from ubuntu subsystem:</p>\n<pre><code>java.sql.SQLException: I/O Error: GSS Failed: Invalid name provided (Mechanism level: KrbException: Cannot locate default realm)\n        at net.sourceforge.jtds.jdbc.TdsCore.login(TdsCore.java:654)\n        at net.sourceforge.jtds.jdbc.JtdsConnection.&lt;init&gt;(JtdsConnection.java:371)\n        at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:251)\n        at helloWorld.main(helloWorld.java:16)\nCaused by: java.io.IOException: GSS Failed: Invalid name provided (Mechanism level: KrbException: Cannot locate default realm)\n        at net.sourceforge.jtds.jdbc.TdsCore.sendMSLoginPkt(TdsCore.java:1976)\n        at net.sourceforge.jtds.jdbc.TdsCore.login(TdsCore.java:617)\n</code></pre>\n<p>Here is my code jdbc:</p>\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\npublic class helloWorld {\n            public static void main(String[] args) {\n\n        String connectionUrl = &quot;jdbc:sqlserver://&lt;server_ip&gt;:1433;databaseName=someDB;user=xyz;password=123;Encrypt=false&quot;;\n\n        try (Connection con = DriverManager.getConnection(connectionUrl); Statement stmt = con.createStatement();) {\n                                 String SQL = &quot;SELECT PLZ FROM city&quot;;\n\n            ResultSet rs = stmt.executeQuery(SQL);\n\n            // Iterate through the data in the result set and display it.\n            while (rs.next()) {\n                System.out.println(rs.getString(&quot;PLZ&quot;) );\n            }\n        }\n        // Handle any errors that may have occurred.\n        catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n                        }\n        }\n</code></pre>\n<p>And here is the exception I am getting with ubuntu:</p>\n<pre><code>com.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user \n'xyz'. ClientConnectionId:21e99cbc-bd73-40a0-8101-542ddffb3a0b\n        at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:265)\n        at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:305)\n        at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:138)\n        at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:42)\n        at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:6490)\n        at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:5068)\n        at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:5002)\n        at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7685)\n        at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:4048)\n        at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:3487)\n        at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:3077)\n        at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:2919)\n        at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:1787)\n        at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1229)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:251)\n        at helloWorld.main(helloWorld.java:16)\n</code></pre>\n<p>I tried almost all solution which are published on the internet to this problem.\nI am expecting to see how I could connect to sql server which is installed on windows from linux.</p>\n"},{"tags":["java","spring-data-jpa","spring-data-rest"],"comments":[{"owner":{"account_id":12469735,"reputation":13915,"user_id":9078341,"display_name":"Randy Casburn"},"score":0,"creation_date":1617659921,"post_id":66959846,"comment_id":118360851,"body_markdown":"I think if you were to construct this query by hand you would find out that &quot;name&quot; is ambiguous. I think Amed&#39;s answer is on track.","body":"I think if you were to construct this query by hand you would find out that &quot;name&quot; is ambiguous. I think Amed&#39;s answer is on track."}],"answers":[{"tags":[],"owner":{"account_id":8867817,"reputation":1108,"user_id":6815416,"display_name":"Ahmed HENTETI"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1689388371,"creation_date":1617658112,"answer_id":66960000,"question_id":66959846,"body_markdown":"I think that you have a problem in your `@JoinColumn` names. For me, you should use different names and use `referencedColumnName` to reference foreign column name\r\n\r\n```java\r\n@ManyToOne\r\n@JoinColumn(name = &quot;sender_uuid&quot;, \r\n            referencedColumnName = &quot;uuid&quot;, // this uuid is in the User entity\r\n            insertable = false, updatable = false) \r\nprivate User sender;\r\n\r\n@ManyToOne\r\n@JoinColumn(name = &quot;receiver_uuid&quot;, \r\n            referencedColumnName = &quot;uuid&quot;, // this uuid is in the User entity\r\n            insertable = false, updatable = false) \r\nprivate User receiver;\r\n```","title":"Null values in foreign key columns when saving an entity with Spring JPA","body":"<p>I think that you have a problem in your <code>@JoinColumn</code> names. For me, you should use different names and use <code>referencedColumnName</code> to reference foreign column name</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ManyToOne\n@JoinColumn(name = &quot;sender_uuid&quot;, \n            referencedColumnName = &quot;uuid&quot;, // this uuid is in the User entity\n            insertable = false, updatable = false) \nprivate User sender;\n\n@ManyToOne\n@JoinColumn(name = &quot;receiver_uuid&quot;, \n            referencedColumnName = &quot;uuid&quot;, // this uuid is in the User entity\n            insertable = false, updatable = false) \nprivate User receiver;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13672099,"reputation":601,"user_id":9864539,"display_name":"Ricky Sixx"},"score":0,"creation_date":1617710492,"post_id":66960577,"comment_id":118374973,"body_markdown":"Thank you for your answer. I&#39;ve tried to remove those attributes, but now I get an exception during the startup of my application, which says it requires those attributes. I&#39;ve updated my question to include the full stacktrace.","body":"Thank you for your answer. I&#39;ve tried to remove those attributes, but now I get an exception during the startup of my application, which says it requires those attributes. I&#39;ve updated my question to include the full stacktrace."},{"owner":{"account_id":18757259,"reputation":1751,"user_id":13676960,"display_name":"Hopey One"},"score":0,"creation_date":1617746139,"post_id":66960577,"comment_id":118390863,"body_markdown":"My mistake, glad you got the solution.","body":"My mistake, glad you got the solution."}],"tags":[],"owner":{"account_id":18757259,"reputation":1751,"user_id":13676960,"display_name":"Hopey One"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1617661826,"creation_date":1617661826,"answer_id":66960577,"question_id":66959846,"body_markdown":"Remove the `insertable = false, updatable = false`. This is telling JPA to leave this column out of the generated SQL statements.","title":"Null values in foreign key columns when saving an entity with Spring JPA","body":"<p>Remove the <code>insertable = false, updatable = false</code>. This is telling JPA to leave this column out of the generated SQL statements.</p>\n"},{"tags":[],"owner":{"account_id":8208931,"reputation":1,"user_id":6238568,"display_name":"Ricardo Gonzalez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691512509,"creation_date":1691512305,"answer_id":76861537,"question_id":66959846,"body_markdown":"I had the same problem. The problem was in my flags configurations of @JoinColumn\r\n\r\n**I solved** using `insertable = true` or *remove element from annotantion* (It will be use th default true value).\r\n[See relations in database][1]\r\n\r\n[1]: https://i.stack.imgur.com/sRTPP.png\r\n\r\nThis is for Usuarios\r\n\r\n    @Entity\r\n    @Table(name = &quot;tw_usuario&quot;)\r\n    public class Usuario implements Serializable {\r\n        @Id\r\n        private Long id;\r\n        //Other fields\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;id_rol&quot;, insertable = true, updatable = false)\r\n        // Above line is equals to @JoinColumn(name = &quot;id_rol&quot;, updatable = false)\r\n        private Rol rol;\r\n\r\n        // Getters and Setters\r\n    }\r\n\r\nExtra information about the other relation\r\n\r\n    @Entity\r\n    @Table(name = &quot;tc_rol&quot;)\r\n    public class Rol implements Serializable {\t\r\n    \t@Id\r\n    \tprivate Long id;\r\n        \r\n        //More  fields\r\n        //Declare Getters and Setters\r\n    }\r\n\r\n","title":"Null values in foreign key columns when saving an entity with Spring JPA","body":"<p>I had the same problem. The problem was in my flags configurations of @JoinColumn</p>\n<p><strong>I solved</strong> using <code>insertable = true</code> or <em>remove element from annotantion</em> (It will be use th default true value).\n<a href=\"https://i.stack.imgur.com/sRTPP.png\" rel=\"nofollow noreferrer\">See relations in database</a></p>\n<p>This is for Usuarios</p>\n<pre><code>@Entity\n@Table(name = &quot;tw_usuario&quot;)\npublic class Usuario implements Serializable {\n    @Id\n    private Long id;\n    //Other fields\n\n    @ManyToOne\n    @JoinColumn(name = &quot;id_rol&quot;, insertable = true, updatable = false)\n    // Above line is equals to @JoinColumn(name = &quot;id_rol&quot;, updatable = false)\n    private Rol rol;\n\n    // Getters and Setters\n}\n</code></pre>\n<p>Extra information about the other relation</p>\n<pre><code>@Entity\n@Table(name = &quot;tc_rol&quot;)\npublic class Rol implements Serializable {  \n    @Id\n    private Long id;\n    \n    //More  fields\n    //Declare Getters and Setters\n}\n</code></pre>\n"}],"owner":{"account_id":13672099,"reputation":601,"user_id":9864539,"display_name":"Ricky Sixx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7262,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":66960000,"answer_count":3,"score":6,"last_activity_date":1691512509,"creation_date":1617657199,"question_id":66959846,"body_markdown":"In my database I have 2 entities with a unidirectional relationship between them. \r\n\r\nUser:\r\n\r\n    CREATE TABLE public.&quot;user&quot; (\r\n    \tuuid uuid NOT NULL DEFAULT uuid_generate_v4(),\r\n    \t&quot;name&quot; varchar NULL,\r\n    \tCONSTRAINT user_pk PRIMARY KEY (uuid)\r\n    );\r\n\r\nMessage:\r\n\r\n    CREATE TABLE public.message (\r\n    \tsender uuid NOT NULL,\r\n    \treceiver uuid NOT NULL,\r\n    \t&quot;content&quot; varchar NULL,\r\n    \tuuid uuid NOT NULL,\r\n    \tCONSTRAINT message_pk PRIMARY KEY (uuid),\r\n    \tCONSTRAINT message_fk FOREIGN KEY (sender) REFERENCES &quot;user&quot;(uuid) ON UPDATE RESTRICT ON DELETE RESTRICT,\r\n    \tCONSTRAINT message_fk_1 FOREIGN KEY (receiver) REFERENCES &quot;user&quot;(uuid) ON UPDATE RESTRICT ON DELETE RESTRICT\r\n    );\r\n\r\nThis is how I mapped those entities with Spring JPA:\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;, schema = &quot;public&quot;)\r\n    public class User\r\n    {\r\n        @Id\r\n        @Column(name = &quot;uuid&quot;, insertable = false, updatable = false)\r\n        private UUID uuid;\r\n    \r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;message&quot;, schema = &quot;public&quot;)\r\n    public class Message\r\n    {\r\n        @Id\r\n        @Column(name = &quot;uuid&quot;)\r\n        private UUID uuid;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;uuid&quot;, insertable = false, updatable = false) // this uuid is in the User entity\r\n        private User sender;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;uuid&quot;, insertable = false, updatable = false) // this uuid is in the User entity\r\n        private User receiver;\r\n    \r\n        @Column(name = &quot;content&quot;)\r\n        private String content;\r\n    }\r\n\r\nIn my REST controller I expose an endpoint to create a message. This endpoint simply takes two users (the sender and the receiver) and a content for the message:\r\n\r\n    @PostMapping\r\n    @RequestMapping(consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;CreateMessageResponseRO&gt; createMessage(@RequestBody CreateMessageRequestRO request)\r\n    {\r\n    \tMessage message = new Message();\r\n    \tUser sender = userRepository.findById(UUID.fromString(request.getSender())).get();\r\n    \tUser receiver = userRepository.findById(UUID.fromString(request.getReceiver())).get();\r\n    \tString content = request.getContent();\r\n    \r\n    \tmessage.setSender(sender); // sender is not null here\r\n    \tmessage.setReceiver(receiver); // receiver is not null here\r\n    \tmessage.setContent(content);\r\n    \r\n    \tmessageRepository.save(message);\r\n    \r\n    \treturn ResponseEntity.ok(new CreateMessageResponseRO(message));\r\n    }\r\n\r\nI&#39;ve checked with the debugger and at the line \r\n\r\n    messageRepository.save(message)\r\n\r\nthe two users (`sender` and `receiver`) are not null and they have a valid UUID (i.e. those UUIDs refer to 2 distinct, existing, users) However, when I invoke that endpoint I get this exception:\r\n\r\n    org.postgresql.util.PSQLException: ERROR: null value in column &quot;sender&quot; of relation &quot;message&quot; violates not-null constraint\r\n      Detail: Failing row contains (null, null, hello world!, 818ea408-fa40-49f8-93a1-85e2ff026dac).\r\n\r\nThis is the JSON I&#39;m using:\r\n\r\n    {\r\n        &quot;sender&quot;: &quot;75090bb0-0e29-4cd8-84ab-2bf2727419d2&quot;,\r\n        &quot;receiver&quot;: &quot;3539c23f-42f8-4074-a5f8-a8d3f0be8aeb&quot;,\r\n        &quot;content&quot;: &quot;hello world!&quot;\r\n    }\r\n\r\nWhy do I get that exception, when the `userRepository` correctly finds the 2 users?\r\n\r\n----------\r\n\r\n**EDIT 1**\r\n\r\nI&#39;ve tried to remove the attributes `insertable = false, updatable = false` from the `@JoinColumn` annotations in the `Message` entity. This is the updated code:\r\n\r\n    @Entity\r\n    @Table(name = &quot;message&quot;, schema = &quot;public&quot;)\r\n    public class Message\r\n    {\r\n        @Id\r\n        @Column(name = &quot;uuid&quot;)\r\n        private UUID uuid;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;uuid&quot;)\r\n        private User sender;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;uuid&quot;)\r\n        private User receiver;\r\n    \r\n        @Column(name = &quot;content&quot;)\r\n        private String content;\r\n    }\r\n\r\nHowever, now I get an exception during the startup of my application, which says that it requires the attributes I&#39;ve removed:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Repeated column in mapping for entity: com.akwares.sccs.entity.Message column: uuid (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.4.jar!/:2.4.4]\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:769) ~[spring-boot-2.4.4.jar!/:2.4.4]\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) ~[spring-boot-2.4.4.jar!/:2.4.4]\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:426) ~[spring-boot-2.4.4.jar!/:2.4.4]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:326) ~[spring-boot-2.4.4.jar!/:2.4.4]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1313) ~[spring-boot-2.4.4.jar!/:2.4.4]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-2.4.4.jar!/:2.4.4]\r\n            at com.akwares.sccs.Application.main(Application.java:11) ~[classes!/:na]\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n            at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n            at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[server-1.0-SNAPSHOT.jar:na]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:107) ~[server-1.0-SNAPSHOT.jar:na]\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[server-1.0-SNAPSHOT.jar:na]\r\n            at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[server-1.0-SNAPSHOT.jar:na]\r\n    Caused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Repeated column in mapping for entity: com.akwares.sccs.entity.Message column: uuid (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)\r\n            at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.5.jar!/:5.3.5]\r\n            ... 25 common frames omitted\r\n    Caused by: org.hibernate.MappingException: Repeated column in mapping for entity: com.akwares.sccs.entity.Message column: uuid (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)\r\n            at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:862) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\r\n            at org.hibernate.mapping.PersistentClass.checkPropertyColumnDuplication(PersistentClass.java:880) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\r\n            at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:902) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\r\n            at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:634) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\r\n            at org.hibernate.mapping.RootClass.validate(RootClass.java:267) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\r\n            at org.hibernate.boot.internal.MetadataImpl.validate(MetadataImpl.java:354) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\r\n            at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:298) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\r\n            at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\r\n            at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\r\n            at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.5.jar!/:5.3.5]\r\n            at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.5.jar!/:5.3.5]\r\n            ... 29 common frames omitted","title":"Null values in foreign key columns when saving an entity with Spring JPA","body":"<p>In my database I have 2 entities with a unidirectional relationship between them.</p>\n<p>User:</p>\n<pre><code>CREATE TABLE public.&quot;user&quot; (\n    uuid uuid NOT NULL DEFAULT uuid_generate_v4(),\n    &quot;name&quot; varchar NULL,\n    CONSTRAINT user_pk PRIMARY KEY (uuid)\n);\n</code></pre>\n<p>Message:</p>\n<pre><code>CREATE TABLE public.message (\n    sender uuid NOT NULL,\n    receiver uuid NOT NULL,\n    &quot;content&quot; varchar NULL,\n    uuid uuid NOT NULL,\n    CONSTRAINT message_pk PRIMARY KEY (uuid),\n    CONSTRAINT message_fk FOREIGN KEY (sender) REFERENCES &quot;user&quot;(uuid) ON UPDATE RESTRICT ON DELETE RESTRICT,\n    CONSTRAINT message_fk_1 FOREIGN KEY (receiver) REFERENCES &quot;user&quot;(uuid) ON UPDATE RESTRICT ON DELETE RESTRICT\n);\n</code></pre>\n<p>This is how I mapped those entities with Spring JPA:</p>\n<pre><code>@Entity\n@Table(name = &quot;user&quot;, schema = &quot;public&quot;)\npublic class User\n{\n    @Id\n    @Column(name = &quot;uuid&quot;, insertable = false, updatable = false)\n    private UUID uuid;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n}\n\n@Entity\n@Table(name = &quot;message&quot;, schema = &quot;public&quot;)\npublic class Message\n{\n    @Id\n    @Column(name = &quot;uuid&quot;)\n    private UUID uuid;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;uuid&quot;, insertable = false, updatable = false) // this uuid is in the User entity\n    private User sender;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;uuid&quot;, insertable = false, updatable = false) // this uuid is in the User entity\n    private User receiver;\n\n    @Column(name = &quot;content&quot;)\n    private String content;\n}\n</code></pre>\n<p>In my REST controller I expose an endpoint to create a message. This endpoint simply takes two users (the sender and the receiver) and a content for the message:</p>\n<pre><code>@PostMapping\n@RequestMapping(consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)\npublic ResponseEntity&lt;CreateMessageResponseRO&gt; createMessage(@RequestBody CreateMessageRequestRO request)\n{\n    Message message = new Message();\n    User sender = userRepository.findById(UUID.fromString(request.getSender())).get();\n    User receiver = userRepository.findById(UUID.fromString(request.getReceiver())).get();\n    String content = request.getContent();\n\n    message.setSender(sender); // sender is not null here\n    message.setReceiver(receiver); // receiver is not null here\n    message.setContent(content);\n\n    messageRepository.save(message);\n\n    return ResponseEntity.ok(new CreateMessageResponseRO(message));\n}\n</code></pre>\n<p>I've checked with the debugger and at the line</p>\n<pre><code>messageRepository.save(message)\n</code></pre>\n<p>the two users (<code>sender</code> and <code>receiver</code>) are not null and they have a valid UUID (i.e. those UUIDs refer to 2 distinct, existing, users) However, when I invoke that endpoint I get this exception:</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: null value in column &quot;sender&quot; of relation &quot;message&quot; violates not-null constraint\n  Detail: Failing row contains (null, null, hello world!, 818ea408-fa40-49f8-93a1-85e2ff026dac).\n</code></pre>\n<p>This is the JSON I'm using:</p>\n<pre><code>{\n    &quot;sender&quot;: &quot;75090bb0-0e29-4cd8-84ab-2bf2727419d2&quot;,\n    &quot;receiver&quot;: &quot;3539c23f-42f8-4074-a5f8-a8d3f0be8aeb&quot;,\n    &quot;content&quot;: &quot;hello world!&quot;\n}\n</code></pre>\n<p>Why do I get that exception, when the <code>userRepository</code> correctly finds the 2 users?</p>\n<hr />\n<p><strong>EDIT 1</strong></p>\n<p>I've tried to remove the attributes <code>insertable = false, updatable = false</code> from the <code>@JoinColumn</code> annotations in the <code>Message</code> entity. This is the updated code:</p>\n<pre><code>@Entity\n@Table(name = &quot;message&quot;, schema = &quot;public&quot;)\npublic class Message\n{\n    @Id\n    @Column(name = &quot;uuid&quot;)\n    private UUID uuid;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;uuid&quot;)\n    private User sender;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;uuid&quot;)\n    private User receiver;\n\n    @Column(name = &quot;content&quot;)\n    private String content;\n}\n</code></pre>\n<p>However, now I get an exception during the startup of my application, which says that it requires the attributes I've removed:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Repeated column in mapping for entity: com.akwares.sccs.entity.Message column: uuid (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.5.jar!/:5.3.5]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.5.jar!/:5.3.5]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.5.jar!/:5.3.5]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.5.jar!/:5.3.5]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.5.jar!/:5.3.5]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.5.jar!/:5.3.5]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.5.jar!/:5.3.5]\n        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.5.jar!/:5.3.5]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.5.jar!/:5.3.5]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.5.jar!/:5.3.5]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.4.jar!/:2.4.4]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:769) ~[spring-boot-2.4.4.jar!/:2.4.4]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) ~[spring-boot-2.4.4.jar!/:2.4.4]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:426) ~[spring-boot-2.4.4.jar!/:2.4.4]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:326) ~[spring-boot-2.4.4.jar!/:2.4.4]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1313) ~[spring-boot-2.4.4.jar!/:2.4.4]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-2.4.4.jar!/:2.4.4]\n        at com.akwares.sccs.Application.main(Application.java:11) ~[classes!/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[server-1.0-SNAPSHOT.jar:na]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:107) ~[server-1.0-SNAPSHOT.jar:na]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[server-1.0-SNAPSHOT.jar:na]\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[server-1.0-SNAPSHOT.jar:na]\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Repeated column in mapping for entity: com.akwares.sccs.entity.Message column: uuid (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.5.jar!/:5.3.5]\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.5.jar!/:5.3.5]\n        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.5.jar!/:5.3.5]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.5.jar!/:5.3.5]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.5.jar!/:5.3.5]\n        ... 25 common frames omitted\nCaused by: org.hibernate.MappingException: Repeated column in mapping for entity: com.akwares.sccs.entity.Message column: uuid (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)\n        at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:862) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\n        at org.hibernate.mapping.PersistentClass.checkPropertyColumnDuplication(PersistentClass.java:880) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\n        at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:902) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\n        at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:634) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\n        at org.hibernate.mapping.RootClass.validate(RootClass.java:267) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\n        at org.hibernate.boot.internal.MetadataImpl.validate(MetadataImpl.java:354) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\n        at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:298) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\n        at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\n        at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.29.Final.jar!/:5.4.29.Final]\n        at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.5.jar!/:5.3.5]\n        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.5.jar!/:5.3.5]\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.5.jar!/:5.3.5]\n        ... 29 common frames omitted\n</code></pre>\n"},{"tags":["java","android","flutter","firebase","keytool"],"answers":[{"tags":[],"owner":{"account_id":23432132,"reputation":31,"user_id":17490790,"display_name":"AK 1000"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655077519,"creation_date":1655077519,"answer_id":72596627,"question_id":72596428,"body_markdown":"**Solved:** After Running Flutter -v in android studioFound Out That:\r\n\r\n**Java version OpenJDK Runtime Environment (build 11.0.12+7-b1504.28-7817840)** \r\nwhich indicated that there was difference with the java version installed (was currently using java 1.8).\r\n\r\nI solved the problem by installing the same java version (In my case 11.0.12) and adding it to the PATH in environmental variables.","title":"keytool error: java.io.IOException: Invalid keystore format","body":"<p><strong>Solved:</strong> After Running Flutter -v in android studioFound Out That:</p>\n<p><strong>Java version OpenJDK Runtime Environment (build 11.0.12+7-b1504.28-7817840)</strong>\nwhich indicated that there was difference with the java version installed (was currently using java 1.8).</p>\n<p>I solved the problem by installing the same java version (In my case 11.0.12) and adding it to the PATH in environmental variables.</p>\n"},{"tags":[],"owner":{"account_id":15991284,"reputation":1,"user_id":11540411,"display_name":"A.C.C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671030059,"creation_date":1671030059,"answer_id":74800198,"question_id":72596428,"body_markdown":"A simpler way would be to use Android Java, change &quot;YOUR_USERNAME_HERE&quot;\r\n\r\n    &quot;c:\\Program Files\\Android\\Android Studio\\jre\\bin\\keytool.exe&quot; -list -v -keystore &quot;C:\\Users\\YOUR_USERNAME_HERE\\.android\\debug.keystore&quot;\r\n\r\nDefault password android","title":"keytool error: java.io.IOException: Invalid keystore format","body":"<p>A simpler way would be to use Android Java, change &quot;YOUR_USERNAME_HERE&quot;</p>\n<pre><code>&quot;c:\\Program Files\\Android\\Android Studio\\jre\\bin\\keytool.exe&quot; -list -v -keystore &quot;C:\\Users\\YOUR_USERNAME_HERE\\.android\\debug.keystore&quot;\n</code></pre>\n<p>Default password android</p>\n"},{"tags":[],"owner":{"account_id":3160305,"reputation":449,"user_id":2671613,"display_name":"urnish"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691512303,"creation_date":1691512303,"answer_id":76861536,"question_id":72596428,"body_markdown":"I have the same issues but later found that there is a different JDK version mentioned in android studio(JDK 11) and a different version installed in my system(JDK 8).\r\n\r\nSo after that, I installed JDK 11 in my system and then try the same which resolved the error. So the solution is the version should be the same on both sides which will fix the error.  ","title":"keytool error: java.io.IOException: Invalid keystore format","body":"<p>I have the same issues but later found that there is a different JDK version mentioned in android studio(JDK 11) and a different version installed in my system(JDK 8).</p>\n<p>So after that, I installed JDK 11 in my system and then try the same which resolved the error. So the solution is the version should be the same on both sides which will fix the error.</p>\n"}],"owner":{"account_id":23432132,"reputation":31,"user_id":17490790,"display_name":"AK 1000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2701,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1691512303,"creation_date":1655074367,"question_id":72596428,"body_markdown":"Got an error while run the command in terminal:\r\n\r\n**&quot;keytool -list -v -alias androiddebugkey -keystore %USERPROFILE%\\.android\\debug.keystore&quot;**\r\n\r\nResults in below error:\r\n\r\n    java.io.IOException: Invalid keystore format\r\n            at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:663)\r\n            at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:56)\r\n            at sun.security.provider.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:224)\r\n            at sun.security.provider.JavaKeyStore$DualFormatJKS.engineLoad(JavaKeyStore.java:70)\r\n            at java.security.KeyStore.load(KeyStore.java:1445)\r\n            at sun.security.tools.keytool.Main.doCommands(Main.java:941)\r\n            at sun.security.tools.keytool.Main.run(Main.java:379)\r\n            at sun.security.tools.keytool.Main.main(Main.java:372)\r\n\r\nP.S: I have seen similar questions regarding this error, but none of the solutions solved my problem.\r\n\r\n","title":"keytool error: java.io.IOException: Invalid keystore format","body":"<p>Got an error while run the command in terminal:</p>\n<p><strong>&quot;keytool -list -v -alias androiddebugkey -keystore %USERPROFILE%.android\\debug.keystore&quot;</strong></p>\n<p>Results in below error:</p>\n<pre><code>java.io.IOException: Invalid keystore format\n        at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:663)\n        at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:56)\n        at sun.security.provider.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:224)\n        at sun.security.provider.JavaKeyStore$DualFormatJKS.engineLoad(JavaKeyStore.java:70)\n        at java.security.KeyStore.load(KeyStore.java:1445)\n        at sun.security.tools.keytool.Main.doCommands(Main.java:941)\n        at sun.security.tools.keytool.Main.run(Main.java:379)\n        at sun.security.tools.keytool.Main.main(Main.java:372)\n</code></pre>\n<p>P.S: I have seen similar questions regarding this error, but none of the solutions solved my problem.</p>\n"},{"tags":["java","excel","apache-camel"],"answers":[{"comments":[{"owner":{"account_id":5910384,"reputation":937,"user_id":4650838,"accept_rate":56,"display_name":"Anirban"},"score":0,"creation_date":1644418498,"post_id":71047505,"comment_id":125602057,"body_markdown":"Thanks, this helps. Yes I use Apache POI but was seaching is there any other way to read .xlsx files in Apache Camel.","body":"Thanks, this helps. Yes I use Apache POI but was seaching is there any other way to read .xlsx files in Apache Camel."}],"tags":[],"owner":{"account_id":10933061,"reputation":6811,"user_id":8035582,"accept_rate":100,"display_name":"burki"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644400955,"creation_date":1644400955,"answer_id":71047505,"question_id":71039647,"body_markdown":"I suppose you try to read a real Excel file (`.xlsx`). That does not work with the [CSV data format][1].\r\n\r\nThe `CSVFormat.EXCEL` format is to read CSV files (`.csv`) exported from Excel. Because the CSV format is done quite different from product to product, Camel supports multiple &quot;well-known&quot; CSV formats. One of them is `CSVFormat.EXCEL`.\r\n\r\nTo read the native Excel format (I think it is a ZIP file that contains XML files), you need a library like [Apache POI][2]. \r\n\r\n\r\n  [1]: https://camel.apache.org/components/3.14.x/dataformats/csv-dataformat.html\r\n  [2]: https://poi.apache.org/","title":"Read an excel file using Apache Camel","body":"<p>I suppose you try to read a real Excel file (<code>.xlsx</code>). That does not work with the <a href=\"https://camel.apache.org/components/3.14.x/dataformats/csv-dataformat.html\" rel=\"nofollow noreferrer\">CSV data format</a>.</p>\n<p>The <code>CSVFormat.EXCEL</code> format is to read CSV files (<code>.csv</code>) exported from Excel. Because the CSV format is done quite different from product to product, Camel supports multiple &quot;well-known&quot; CSV formats. One of them is <code>CSVFormat.EXCEL</code>.</p>\n<p>To read the native Excel format (I think it is a ZIP file that contains XML files), you need a library like <a href=\"https://poi.apache.org/\" rel=\"nofollow noreferrer\">Apache POI</a>.</p>\n"}],"owner":{"account_id":5910384,"reputation":937,"user_id":4650838,"accept_rate":56,"display_name":"Anirban"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71047505,"answer_count":1,"score":0,"last_activity_date":1691511636,"creation_date":1644347844,"question_id":71039647,"body_markdown":"I am trying to read an Excel file using Apache Camel. For that I have found that we can use the CSV component:\r\n\r\n    https://camel.apache.org/components/3.14.x/dataformats/csv-dataformat.html\r\n\r\nFor that I have created a simple route which reads a XLSX file from a folder. Then I am trying to print the content of of that Excel file and write to another folder, but the contents of the file are not getting printed. The route is as below:\r\n\r\n    import org.apache.camel.builder.RouteBuilder;\r\n    import org.apache.camel.dataformat.csv.CsvDataFormat;\r\n    import org.apache.commons.csv.CSVFormat;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    public class MyRoute extends RouteBuilder {\r\n    \t\r\n    \tpublic void configure() {\r\n    \t\t\r\n    \t\tCsvDataFormat csv = new CsvDataFormat();\r\n    \t\tcsv.setFormat(CSVFormat.EXCEL);\r\n    \t\t\r\n    \t\tfrom(&quot;file://C://work//ei01//source&quot;)\r\n    \t\t\t.unmarshal(csv)\r\n    \t\t\t.log(&quot;Reached ${body}&quot;)\r\n    \t\t\t.marshal(csv)\r\n    \t\t\t.to(&quot;file://C://work//ei01//destination?fileName=test.xlsx&quot;);\r\n    \t}\r\n    }\r\n\r\nThe pom.xml is as below:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.6.3&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;sprng-boot-camel-demo&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;sprng-boot-camel-demo&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.14.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;camel-csv-starter&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.14.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nCan you please suggest me what I am doing wrong here?\r\n","title":"Read an excel file using Apache Camel","body":"<p>I am trying to read an Excel file using Apache Camel. For that I have found that we can use the CSV component:</p>\n<pre><code>https://camel.apache.org/components/3.14.x/dataformats/csv-dataformat.html\n</code></pre>\n<p>For that I have created a simple route which reads a XLSX file from a folder. Then I am trying to print the content of of that Excel file and write to another folder, but the contents of the file are not getting printed. The route is as below:</p>\n<pre><code>import org.apache.camel.builder.RouteBuilder;\nimport org.apache.camel.dataformat.csv.CsvDataFormat;\nimport org.apache.commons.csv.CSVFormat;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class MyRoute extends RouteBuilder {\n    \n    public void configure() {\n        \n        CsvDataFormat csv = new CsvDataFormat();\n        csv.setFormat(CSVFormat.EXCEL);\n        \n        from(&quot;file://C://work//ei01//source&quot;)\n            .unmarshal(csv)\n            .log(&quot;Reached ${body}&quot;)\n            .marshal(csv)\n            .to(&quot;file://C://work//ei01//destination?fileName=test.xlsx&quot;);\n    }\n}\n</code></pre>\n<p>The pom.xml is as below:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;sprng-boot-camel-demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;sprng-boot-camel-demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.14.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-csv-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.14.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Can you please suggest me what I am doing wrong here?</p>\n"},{"tags":["java","sql","spring","jdbc"],"answers":[{"comments":[{"owner":{"account_id":1232348,"reputation":3075,"user_id":1233661,"accept_rate":67,"display_name":"Alex Burdusel"},"score":0,"creation_date":1386506382,"post_id":20453380,"comment_id":30559314,"body_markdown":"Isn&#39;t this similar to using a `BufferReader` to read the file? I will imply doing some parsing on the file. Do you know any implementation using `Spring`?","body":"Isn&#39;t this similar to using a <code>BufferReader</code> to read the file? I will imply doing some parsing on the file. Do you know any implementation using <code>Spring</code>?"}],"tags":[],"owner":{"account_id":161943,"reputation":22096,"user_id":383087,"accept_rate":89,"display_name":"Evgeni Dimitrov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386511465,"creation_date":1386505651,"answer_id":20453380,"question_id":20452831,"body_markdown":"I would use property file to store sql queries.\r\n\r\nFor example:\r\n\r\n    person-save=insert into person values....\r\n    person-get-all=select * from person....\r\n\r\nWith that you can read the statements from the file\r\n\r\nIn the context:\r\n\r\n    &lt;util:properties id=&quot;sqlProps&quot; location=&quot;classpath:sqlProps.properties&quot; /&gt;\r\n\r\nIn the DAO:\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;sqlProps&quot;)\r\n    private Properties sqlProps;\r\n...\r\n\r\n    String query = sqlProps.getProperty(&quot;person-get-all&quot;);\r\n    PreparedStatement statement = connection.prepareStatement(query);\r\n    ResultSet resultSet = statement.executeQuery();\r\n\r\nIf you want to execute all the statements in a file, you have to implement that yourself. Just loop over the properties and execute them one by one. You will need some flag to determinate if its select or update/delete statement.\r\nLoop over properties:\r\n \r\n\r\n    Enumeration e = props.propertyNames();\r\n    \r\n        while (e.hasMoreElements()) {\r\n          String key = (String) e.nextElement();\r\n          String query= props.getProperty(key);\r\n        }","title":"How to run a .sql script (from file) in Java and return a ResultSet using Spring?","body":"<p>I would use property file to store sql queries.</p>\n\n<p>For example:</p>\n\n<pre><code>person-save=insert into person values....\nperson-get-all=select * from person....\n</code></pre>\n\n<p>With that you can read the statements from the file</p>\n\n<p>In the context:</p>\n\n<pre><code>&lt;util:properties id=\"sqlProps\" location=\"classpath:sqlProps.properties\" /&gt;\n</code></pre>\n\n<p>In the DAO:</p>\n\n<pre><code>@Autowired\n@Qualifier(\"sqlProps\")\nprivate Properties sqlProps;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>String query = sqlProps.getProperty(\"person-get-all\");\nPreparedStatement statement = connection.prepareStatement(query);\nResultSet resultSet = statement.executeQuery();\n</code></pre>\n\n<p>If you want to execute all the statements in a file, you have to implement that yourself. Just loop over the properties and execute them one by one. You will need some flag to determinate if its select or update/delete statement.\nLoop over properties:</p>\n\n<pre><code>Enumeration e = props.propertyNames();\n\n    while (e.hasMoreElements()) {\n      String key = (String) e.nextElement();\n      String query= props.getProperty(key);\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":123367,"reputation":1413,"user_id":317772,"accept_rate":70,"display_name":"OJVM"},"score":3,"creation_date":1440712995,"post_id":20500679,"comment_id":52400163,"body_markdown":"The problem of using **JdbcTestUtils** is that you must package the test jars into your deployed application.","body":"The problem of using <b>JdbcTestUtils</b> is that you must package the test jars into your deployed application."},{"owner":{"account_id":1965862,"reputation":3669,"user_id":1766166,"accept_rate":71,"display_name":"zygimantus"},"score":1,"creation_date":1446800797,"post_id":20500679,"comment_id":54904255,"body_markdown":"It is now deprecated, you should use: ScriptUtils.readScript()","body":"It is now deprecated, you should use: ScriptUtils.readScript()"},{"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"score":0,"creation_date":1679185439,"post_id":20500679,"comment_id":133676420,"body_markdown":"ScriptUtils.readScript() is also now deprecated. What&#39;s the latest solution?","body":"ScriptUtils.readScript() is also now deprecated. What&#39;s the latest solution?"}],"tags":[],"owner":{"account_id":1232348,"reputation":3075,"user_id":1233661,"accept_rate":67,"display_name":"Alex Burdusel"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1386741322,"creation_date":1386695022,"answer_id":20500679,"question_id":20452831,"body_markdown":"I found a way to do it using Spring:\r\n\r\n\tMysqlDataSource ds = new MysqlDataSource();\r\n\tds.setServerName(&quot;host&quot;);\r\n\tds.setUser(&quot;user&quot;);\r\n\tds.setPassword(&quot;password&quot;);\r\n\r\n\tJdbcTemplate jdbcTemplate = new JdbcTemplate(ds);\r\n\r\n\tBufferedReader in = new BufferedReader(new FileReader(&quot;script.sql&quot;));\r\n\tLineNumberReader fileReader = new LineNumberReader(in);\r\n\tString query = JdbcTestUtils.readScript(fileReader);\r\n\r\nNow we will use the `jdbcTemplate.query` to query the database using the .sql script we read. The `ResultSet` required will be passed as parameter to the `extractData` of `ResultSetExtractor` implementation or to the `mapRow` of the `RowMapper` implementation. So the processing of the `ResultSet` will be done in the `extractData` or `mapRow` implementation and we will return the Collection/Object we need\r\n\t\r\n\tList&lt;YourClass&gt; result = jdbcTemplate.query(query, new RowMapper&lt;YourClass&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic YourClass mapRow(ResultSet rs, int i) throws SQLException {\r\n\t\t\t\t\t// processing of the ResultSet\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\nor\r\n\r\n\tYourClass object = jdbcTemplate.query(query, new ResultSetExtractor&lt;YourClass&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic YourClass extractData(ResultSet rs) throws SQLException, DataAccessException {\r\n\t\t\t\t\t// processing of the ResultSet\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\nOf course, using the last implementation you can return any object you want, even a collection of objects. ","title":"How to run a .sql script (from file) in Java and return a ResultSet using Spring?","body":"<p>I found a way to do it using Spring:</p>\n\n<pre><code>MysqlDataSource ds = new MysqlDataSource();\nds.setServerName(\"host\");\nds.setUser(\"user\");\nds.setPassword(\"password\");\n\nJdbcTemplate jdbcTemplate = new JdbcTemplate(ds);\n\nBufferedReader in = new BufferedReader(new FileReader(\"script.sql\"));\nLineNumberReader fileReader = new LineNumberReader(in);\nString query = JdbcTestUtils.readScript(fileReader);\n</code></pre>\n\n<p>Now we will use the <code>jdbcTemplate.query</code> to query the database using the .sql script we read. The <code>ResultSet</code> required will be passed as parameter to the <code>extractData</code> of <code>ResultSetExtractor</code> implementation or to the <code>mapRow</code> of the <code>RowMapper</code> implementation. So the processing of the <code>ResultSet</code> will be done in the <code>extractData</code> or <code>mapRow</code> implementation and we will return the Collection/Object we need</p>\n\n<pre><code>List&lt;YourClass&gt; result = jdbcTemplate.query(query, new RowMapper&lt;YourClass&gt;() {\n            @Override\n            public YourClass mapRow(ResultSet rs, int i) throws SQLException {\n                // processing of the ResultSet\n                return result;\n            }\n        });\n</code></pre>\n\n<p>or</p>\n\n<pre><code>YourClass object = jdbcTemplate.query(query, new ResultSetExtractor&lt;YourClass&gt;() {\n            @Override\n            public YourClass extractData(ResultSet rs) throws SQLException, DataAccessException {\n                // processing of the ResultSet\n                return result;\n            }\n        });\n</code></pre>\n\n<p>Of course, using the last implementation you can return any object you want, even a collection of objects. </p>\n"},{"comments":[{"owner":{"account_id":29184175,"reputation":1,"user_id":22357694,"display_name":"Лариса Ермакова"},"score":0,"creation_date":1691494289,"post_id":76859135,"comment_id":135496405,"body_markdown":"import org.apache.commons.io.IOUtils;\nimport org.springframework.core.io.ClassPathResource;\n&lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.11.0&lt;/version&gt;\n        &lt;/dependency&gt;","body":"import org.apache.commons.io.IOUtils; import org.springframework.core.io.ClassPathResource; &lt;dependency&gt;             &lt;groupId&gt;commons-io&lt;/groupId&gt;             &lt;artifactId&gt;commons-io&lt;/artifactId&gt;             &lt;version&gt;2.11.0&lt;/version&gt;         &lt;/dependency&gt;"}],"tags":[],"owner":{"account_id":29184175,"reputation":1,"user_id":22357694,"display_name":"Лариса Ермакова"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691511440,"creation_date":1691494269,"answer_id":76859135,"question_id":20452831,"body_markdown":"You can use this using `commons-io`:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n    &lt;version&gt;2.11.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```java\r\nimport org.apache.commons.io.IOUtils;\r\nimport org.springframework.core.io.ClassPathResource;\r\n//...\r\nString sqlQuery = IOUtils.toString((new ClassPathResource(&quot;me.sql&quot;)).getInputStream(), Charset.defaultCharset());\r\n```","title":"How to run a .sql script (from file) in Java and return a ResultSet using Spring?","body":"<p>You can use this using <code>commons-io</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-io&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n    &lt;version&gt;2.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.commons.io.IOUtils;\nimport org.springframework.core.io.ClassPathResource;\n//...\nString sqlQuery = IOUtils.toString((new ClassPathResource(&quot;me.sql&quot;)).getInputStream(), Charset.defaultCharset());\n</code></pre>\n"}],"owner":{"account_id":1232348,"reputation":3075,"user_id":1233661,"accept_rate":67,"display_name":"Alex Burdusel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28345,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1691511440,"creation_date":1386501718,"question_id":20452831,"body_markdown":"How to run a .sql script (from file) in Java and return a `ResultSet` using Spring?\r\n\r\nI have a program that runs `SQL` queries on a database that return `ResultSet` which I later process and use the data in my classes. I am currently using `JDBC` with the scripts inside the Java program.\r\n\r\n\tStringBuilder query = new StringBuilder(&quot;some script on multiple lines&quot;);\r\n\tPreparedStatement statement = connection.prepareStatement(query.toString());\r\n\tResultSet resultSet = statement.executeQuery();\r\n\r\nI want to move the SQL queries outside of the Java program to .sql files, but I want to keep all the program logic from the `executeQuery` statements on. This means I want to have the queries return a ResultSet.\r\n\r\nI looked to several methods like using a `ScriptRunner`, using Spring `JdbcTestUtils.executeSqlScript` or reading the .sql file using a `BufferReader` and then passing the string to my statement. The `ScriptRunner` and the Spring `JdbcTestUtils.executeSqlScript` seem to not return a ResultSet, or I couldn&#39;t find the proper implementation. I want to stay away of the `BufferReader` method since it will require text parsing and a lot of exceptions to handle.\r\n\r\n\tScriptRunner scriptRunner = new ScriptRunner(connection, true, true);\r\n\tscriptRunner.runScript(new FileReader(&quot;script.sql&quot;));\r\n\t\r\nThe `runScript` method returns void. Same does the `Spring` implementation:\r\n\r\n\tMysqlDataSource ds = new MysqlDataSource();\r\n\tds.setServerName(&quot;host&quot;);\r\n\tds.setUser(&quot;user&quot;);\r\n\tds.setPassword(&quot;password&quot;);\r\n\r\n\tJdbcTemplate jdbcTemplate = new JdbcTemplate(ds);\r\n\r\n\tResource resource = new ClassPathResource(&quot;script.sql&quot;);\r\n\tJdbcTestUtils.executeSqlScript(jdbcTemplate, resource, true);\r\n\t\r\nI looked thorough the `Spring` api but couldn&#39;t find something similar to what I want.\r\nIs there a way to load a script from file and then run it so it returns a `ResultSet` using `Spring`? I would prefer using `Spring` since it is actively mantained.\r\n\r\n\r\n\r\n\t","title":"How to run a .sql script (from file) in Java and return a ResultSet using Spring?","body":"<p>How to run a .sql script (from file) in Java and return a <code>ResultSet</code> using Spring?</p>\n\n<p>I have a program that runs <code>SQL</code> queries on a database that return <code>ResultSet</code> which I later process and use the data in my classes. I am currently using <code>JDBC</code> with the scripts inside the Java program.</p>\n\n<pre><code>StringBuilder query = new StringBuilder(\"some script on multiple lines\");\nPreparedStatement statement = connection.prepareStatement(query.toString());\nResultSet resultSet = statement.executeQuery();\n</code></pre>\n\n<p>I want to move the SQL queries outside of the Java program to .sql files, but I want to keep all the program logic from the <code>executeQuery</code> statements on. This means I want to have the queries return a ResultSet.</p>\n\n<p>I looked to several methods like using a <code>ScriptRunner</code>, using Spring <code>JdbcTestUtils.executeSqlScript</code> or reading the .sql file using a <code>BufferReader</code> and then passing the string to my statement. The <code>ScriptRunner</code> and the Spring <code>JdbcTestUtils.executeSqlScript</code> seem to not return a ResultSet, or I couldn't find the proper implementation. I want to stay away of the <code>BufferReader</code> method since it will require text parsing and a lot of exceptions to handle.</p>\n\n<pre><code>ScriptRunner scriptRunner = new ScriptRunner(connection, true, true);\nscriptRunner.runScript(new FileReader(\"script.sql\"));\n</code></pre>\n\n<p>The <code>runScript</code> method returns void. Same does the <code>Spring</code> implementation:</p>\n\n<pre><code>MysqlDataSource ds = new MysqlDataSource();\nds.setServerName(\"host\");\nds.setUser(\"user\");\nds.setPassword(\"password\");\n\nJdbcTemplate jdbcTemplate = new JdbcTemplate(ds);\n\nResource resource = new ClassPathResource(\"script.sql\");\nJdbcTestUtils.executeSqlScript(jdbcTemplate, resource, true);\n</code></pre>\n\n<p>I looked thorough the <code>Spring</code> api but couldn't find something similar to what I want.\nIs there a way to load a script from file and then run it so it returns a <code>ResultSet</code> using <code>Spring</code>? I would prefer using <code>Spring</code> since it is actively mantained.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1691511870,"post_id":76861394,"comment_id":135500511,"body_markdown":"Do you mean that you want to access the files contents at runtime, but they are not Java source files?","body":"Do you mean that you want to access the files contents at runtime, but they are not Java source files?"},{"owner":{"account_id":15341077,"reputation":28,"user_id":11068056,"display_name":"jiraiya"},"score":0,"creation_date":1691512532,"post_id":76861394,"comment_id":135500637,"body_markdown":"I do not want to run/use them, just keep them there invisible to the IDE. But sometimes if i want i can see the code written there for my reference.","body":"I do not want to run/use them, just keep them there invisible to the IDE. But sometimes if i want i can see the code written there for my reference."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":3,"creation_date":1691512640,"post_id":76861394,"comment_id":135500648,"body_markdown":"Put them somewhere else, like github. Your packages should not be a storage place for reference material.","body":"Put them somewhere else, like github. Your packages should not be a storage place for reference material."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691513782,"post_id":76861394,"comment_id":135500846,"body_markdown":"You could put them in a folder which is not part of the &quot;source path&quot;","body":"You could put them in a folder which is not part of the &quot;source path&quot;"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1691517159,"post_id":76861394,"comment_id":135501434,"body_markdown":"&quot;useless&quot; is a very ambiguous description in programming. Please be more specific. Why are those files in the package if you don&#39;t want to use them? Consider that it may not be the right place for them.","body":"&quot;useless&quot; is a very ambiguous description in programming. Please be more specific. Why are those files in the package if you don&#39;t want to use them? Consider that it may not be the right place for them."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1691668044,"post_id":76861394,"comment_id":135524031,"body_markdown":"In _Project &gt; Properties: Java Build Path_, tab _Sources_ you can exclude files or folders. But better move the Java file out of the source folder, into a documentation folder. If it is something that is (currently) not needed, rely on your version control (e.g. Git) and delete it.","body":"In <i>Project &gt; Properties: Java Build Path</i>, tab <i>Sources</i> you can exclude files or folders. But better move the Java file out of the source folder, into a documentation folder. If it is something that is (currently) not needed, rely on your version control (e.g. Git) and delete it."}],"owner":{"account_id":15341077,"reputation":28,"user_id":11068056,"display_name":"jiraiya"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691511116,"creation_date":1691511116,"question_id":76861394,"body_markdown":"I have a package and 2 java files inside the package. Now what I want is to make the files useless. They will be there in the package as the content inside is something which I do not want to lose but the files cannot be imported or run . It is something similar to how we can close a project in eclipse. Is there any way? ","title":"Is there a way to make a java file useless in eclipse?","body":"<p>I have a package and 2 java files inside the package. Now what I want is to make the files useless. They will be there in the package as the content inside is something which I do not want to lose but the files cannot be imported or run . It is something similar to how we can close a project in eclipse. Is there any way?</p>\n"},{"tags":["java","xpath","xpath-3.1"],"answers":[{"comments":[{"owner":{"account_id":28241245,"reputation":15,"user_id":21588981,"display_name":"Sujit Kumar"},"score":0,"creation_date":1691511558,"post_id":76860561,"comment_id":135500440,"body_markdown":"it&#39;s working fine. Many thanks.","body":"it&#39;s working fine. Many thanks."}],"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691505197,"creation_date":1691505197,"answer_id":76860561,"question_id":76859794,"body_markdown":"You need to put the string literal in parentheses:\r\n\r\n    ?1?(&#39;email id&#39;)","title":"How to write the Xpath for the json field having white space?","body":"<p>You need to put the string literal in parentheses:</p>\n<pre><code>?1?('email id')\n</code></pre>\n"},{"comments":[{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691507413,"post_id":76860574,"comment_id":135499509,"body_markdown":"@mads-hansen, my reading of the grammar would consider my example being a dynamic function call https://www.w3.org/TR/xpath-31/#id-dynamic-function-invocation, not a parenthesized expression.","body":"@mads-hansen, my reading of the grammar would consider my example being a dynamic function call <a href=\"https://www.w3.org/TR/xpath-31/#id-dynamic-function-invocation\" rel=\"nofollow noreferrer\">w3.org/TR/xpath-31/#id-dynamic-function-invocation</a>, not a parenthesized expression."},{"owner":{"account_id":8112,"reputation":64602,"user_id":14419,"accept_rate":100,"display_name":"Mads Hansen"},"score":0,"creation_date":1691509596,"post_id":76860574,"comment_id":135500066,"body_markdown":"https://www.w3.org/TR/xpath-31/#id-lookup `[54]   \tKeySpecifier\t   ::=   \tNCName | IntegerLiteral | ParenthesizedExpr | &quot;*&quot;\t`","body":"<a href=\"https://www.w3.org/TR/xpath-31/#id-lookup\" rel=\"nofollow noreferrer\">w3.org/TR/xpath-31/#id-lookup</a> <code>[54]   \tKeySpecifier\t   ::=   \tNCName | IntegerLiteral | ParenthesizedExpr | &quot;*&quot;\t</code>"},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":1,"creation_date":1691510077,"post_id":76860574,"comment_id":135500152,"body_markdown":"That is what Michael Kay has suggested with his example of e.g. `?1?(&#39;email id&#39;)`, mine is a dynamic function call where `(&#39;email id&#39;)` is the sole function argument.","body":"That is what Michael Kay has suggested with his example of e.g. <code>?1?(&#39;email id&#39;)</code>, mine is a dynamic function call where <code>(&#39;email id&#39;)</code> is the sole function argument."},{"owner":{"account_id":8112,"reputation":64602,"user_id":14419,"accept_rate":100,"display_name":"Mads Hansen"},"score":0,"creation_date":1691510477,"post_id":76860574,"comment_id":135500217,"body_markdown":"doh, I missed that it was missing the `?`","body":"doh, I missed that it was missing the <code>?</code>"}],"tags":[],"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691510566,"creation_date":1691505311,"answer_id":76860574,"question_id":76859794,"body_markdown":"Or just call the map with  e.g. `?1(&#39;email id&#39;)`.\r\n\r\n","title":"How to write the Xpath for the json field having white space?","body":"<p>Or just call the map with  e.g. <code>?1('email id')</code>.</p>\n"}],"owner":{"account_id":28241245,"reputation":15,"user_id":21588981,"display_name":"Sujit Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76860561,"answer_count":2,"score":1,"last_activity_date":1691510566,"creation_date":1691499412,"question_id":76859794,"body_markdown":"I want to write the xpath for a json field which is having white spaces in it.\r\n\r\n```\r\n[    \r\n    {&quot;name&quot;:&quot;Ram&quot;, &quot;emai ld&quot;:&quot;ram@gmail.com&quot;, &quot;age&quot;:23},    \r\n    {&quot;name&quot;:&quot;Shyam&quot;, &quot;email id&quot;:&quot;shyam23@gmail.com&quot;, &quot;age&quot;:28}\r\n]\r\n```\r\nI tried as below to get the email id:\r\n\r\n    ?1?email id\r\n\r\nWhen I searched in open source I got to know this is not possible in Xpath 3.1. Xpath 4.0 supports the above as\r\n\r\n    ?1?&#39;email id&#39;\r\n\r\nCan somebody helps how I can use Xpath 4.0? Meaning any dependency that I need to add?\r\n","title":"How to write the Xpath for the json field having white space?","body":"<p>I want to write the xpath for a json field which is having white spaces in it.</p>\n<pre><code>[    \n    {&quot;name&quot;:&quot;Ram&quot;, &quot;emai ld&quot;:&quot;ram@gmail.com&quot;, &quot;age&quot;:23},    \n    {&quot;name&quot;:&quot;Shyam&quot;, &quot;email id&quot;:&quot;shyam23@gmail.com&quot;, &quot;age&quot;:28}\n]\n</code></pre>\n<p>I tried as below to get the email id:</p>\n<pre><code>?1?email id\n</code></pre>\n<p>When I searched in open source I got to know this is not possible in Xpath 3.1. Xpath 4.0 supports the above as</p>\n<pre><code>?1?'email id'\n</code></pre>\n<p>Can somebody helps how I can use Xpath 4.0? Meaning any dependency that I need to add?</p>\n"},{"tags":["java","data-structures","binary-tree","avl-tree"],"comments":[{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1691507290,"post_id":76860633,"comment_id":135499485,"body_markdown":"How is your balance factor defined? Is it negative when the left subtree is heavier, or is it the opposite?","body":"How is your balance factor defined? Is it negative when the left subtree is heavier, or is it the opposite?"},{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":1,"creation_date":1691507541,"post_id":76860633,"comment_id":135499549,"body_markdown":"@trincot The balance factor is `height(node.left) - height(node.right)`, so a positive number would indicate a heavier left subtree, whereas a negative number would indicate a heavier right subtree.","body":"@trincot The balance factor is <code>height(node.left) - height(node.right)</code>, so a positive number would indicate a heavier left subtree, whereas a negative number would indicate a heavier right subtree."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691507957,"creation_date":1691507957,"answer_id":76860965,"question_id":76860633,"body_markdown":"The code block for the case where `balanceFactor &lt; -1` should mirror the other block in terms of left/right and balance factor comparisons. This is currently not the case. So change it to:\r\n\r\n\r\n    } else if (balanceFactor &lt; -1) {\r\n        // Right subtree is heavier\r\n        balanceFactor = balanceFactor(node.right);\r\n        if (balanceFactor &lt;= 0) {\r\n            leftRotate(node.right.right);\r\n        } else {\r\n            rightRotate(node.right.left);\r\n            leftRotate(node.right);\r\n        }\r\n    }\r\n\r\nNote that I used `&lt;=`. This can also be done in the first case (`&gt;=`), as even when the balance factor at the child is zero, you can suffice with one rotation.\r\n\r\nSee also [Wikipedia on rebalancing](https://en.wikipedia.org/wiki/AVL_tree#Rebalancing). Be aware that they use an opposite sign for the balance factor.","title":"How do I balance a large AVL tree?","body":"<p>The code block for the case where <code>balanceFactor &lt; -1</code> should mirror the other block in terms of left/right and balance factor comparisons. This is currently not the case. So change it to:</p>\n<pre><code>} else if (balanceFactor &lt; -1) {\n    // Right subtree is heavier\n    balanceFactor = balanceFactor(node.right);\n    if (balanceFactor &lt;= 0) {\n        leftRotate(node.right.right);\n    } else {\n        rightRotate(node.right.left);\n        leftRotate(node.right);\n    }\n}\n</code></pre>\n<p>Note that I used <code>&lt;=</code>. This can also be done in the first case (<code>&gt;=</code>), as even when the balance factor at the child is zero, you can suffice with one rotation.</p>\n<p>See also <a href=\"https://en.wikipedia.org/wiki/AVL_tree#Rebalancing\" rel=\"nofollow noreferrer\">Wikipedia on rebalancing</a>. Be aware that they use an opposite sign for the balance factor.</p>\n"},{"tags":[],"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691510073,"creation_date":1691510073,"answer_id":76861249,"question_id":76860633,"body_markdown":"According to [wikipedia](https://en.wikipedia.org/wiki/AVL_tree#Rebalancing) you have to use a double rotation because the inner subtree of `8` is the longest.\r\n\r\nSo you have\r\n\r\n           3\r\n     ...         8\r\n              5     ...\r\n           longest\r\n\r\nAfter the double rotation, `5` have resp. `3` and `8` for its children, and the \r\nright child branch of `5` becomes the left child branch of 3, and the same the left child branch of `5` becomes the right child branch of `8`. Which gives:\r\n\r\n             5\r\n        3          8\r\n      2   4    6     9\r\n    1            7     10\r\n\r\nWin! After the double rotation the tree is AVL balanced....","title":"How do I balance a large AVL tree?","body":"<p>According to <a href=\"https://en.wikipedia.org/wiki/AVL_tree#Rebalancing\" rel=\"nofollow noreferrer\">wikipedia</a> you have to use a double rotation because the inner subtree of <code>8</code> is the longest.</p>\n<p>So you have</p>\n<pre><code>       3\n ...         8\n          5     ...\n       longest\n</code></pre>\n<p>After the double rotation, <code>5</code> have resp. <code>3</code> and <code>8</code> for its children, and the\nright child branch of <code>5</code> becomes the left child branch of 3, and the same the left child branch of <code>5</code> becomes the right child branch of <code>8</code>. Which gives:</p>\n<pre><code>         5\n    3          8\n  2   4    6     9\n1            7     10\n</code></pre>\n<p>Win! After the double rotation the tree is AVL balanced....</p>\n"}],"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76860965,"answer_count":2,"score":0,"last_activity_date":1691510073,"creation_date":1691505635,"question_id":76860633,"body_markdown":"I am trying to relearn how to balance AVL trees. After watching many tutorials, I thought I got the gist of it, but then I came across a particular scenario and now I&#39;m stumped.\r\n\r\nI am building an AVL tree using the numbers `5, 2, 3, 9, 4, 1, 6, 8, 10, 7`, inserted in that order. The tree balances without any issues all the way up to 10, but my algorithm cannot balance the tree after adding 7. Here is what the tree looks like before I balance it after adding 7:\r\n\r\n        3\r\n      ┌─┴──┐\r\n      2    8 &lt;-- Unbalanced subtree\r\n    ┌─┘  ┌─┴──┐\r\n    1    5    9\r\n        ┌┴─┐  └─┐\r\n        4  6   10\r\n           └─┐\r\n             7 &lt;-- Node causing the tree to be unbalanced \r\n\r\nI know from using [USFCA&#39;s AVL Tree Visualizer][1] that my tree is suppose to look like this after I balance it, but I do not know how to achieve this result:\r\n\r\n          5\r\n       ┌──┴───┐\r\n       3      8\r\n      ┌┴─┐  ┌─┴──┐\r\n      2  4  6    9\r\n    ┌─┘     └─┐  └─┐\r\n    1         7   10\r\n\r\n[This tutorial][2] indicates that I should perform a left-right rotation on 8, which results in something inconsistent with the desired result:\r\n\r\n         8\r\n       ┌─┴──┐\r\n       3    9\r\n      ┌┴─┐  └─┐\r\n      2  4   10\r\n    ┌─┘  └─┐\r\n    1      5\r\n           └─┐\r\n             6\r\n             └─┐\r\n               7\r\n\r\nThis is the logic I am using to determine which rotations to use for a given node (let me know if I should include the code for my rotate methods - I am not sure if it is necessary for an MCVE):\r\n\r\n\tprivate void balance(Node node) {\r\n\t\tif (node == null)\r\n\t\t\treturn;\r\n\r\n\t\tint balanceFactor = balanceFactor(node);\r\n\t\tif (balanceFactor &gt; 1) {\r\n            // Left subtree is heavier\r\n\t\t\tbalanceFactor = balanceFactor(node.left);\r\n\t\t\tif (balanceFactor &gt; 0) {\r\n\t\t\t\trightRotate(node.left.left);\r\n\t\t\t} else {\r\n\t\t\t\tleftRotate(node.left.right);\r\n\t\t\t\trightRotate(node.left);\r\n\t\t\t}\r\n\t\t} else if (balanceFactor &lt; -1) {\r\n            // Right subtree is heavier\r\n\t\t\tbalanceFactor = balanceFactor(node.right);\r\n\t\t\tif (balanceFactor &gt; 0) {\r\n\t\t\t\tleftRotate(node.right);\r\n\t\t\t\trightRotate(node.right.left);\r\n\t\t\t} else {\r\n\t\t\t\tleftRotate(node.right);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbalance(node.parent);\r\n\t}\r\n\r\nIt would seem to me that the logic works well until the root node becomes right-heavy.\r\n\r\nWhat do I need to do differently to balance this tree?\r\n\r\n  [1]: https://www.cs.usfca.edu/~galles/visualization/AVLtree.html\r\n  [2]: https://youtu.be/wn1tc5SAGZk","title":"How do I balance a large AVL tree?","body":"<p>I am trying to relearn how to balance AVL trees. After watching many tutorials, I thought I got the gist of it, but then I came across a particular scenario and now I'm stumped.</p>\n<p>I am building an AVL tree using the numbers <code>5, 2, 3, 9, 4, 1, 6, 8, 10, 7</code>, inserted in that order. The tree balances without any issues all the way up to 10, but my algorithm cannot balance the tree after adding 7. Here is what the tree looks like before I balance it after adding 7:</p>\n<pre><code>    3\n  ┌─┴──┐\n  2    8 &lt;-- Unbalanced subtree\n┌─┘  ┌─┴──┐\n1    5    9\n    ┌┴─┐  └─┐\n    4  6   10\n       └─┐\n         7 &lt;-- Node causing the tree to be unbalanced \n</code></pre>\n<p>I know from using <a href=\"https://www.cs.usfca.edu/%7Egalles/visualization/AVLtree.html\" rel=\"nofollow noreferrer\">USFCA's AVL Tree Visualizer</a> that my tree is suppose to look like this after I balance it, but I do not know how to achieve this result:</p>\n<pre><code>      5\n   ┌──┴───┐\n   3      8\n  ┌┴─┐  ┌─┴──┐\n  2  4  6    9\n┌─┘     └─┐  └─┐\n1         7   10\n</code></pre>\n<p><a href=\"https://youtu.be/wn1tc5SAGZk\" rel=\"nofollow noreferrer\">This tutorial</a> indicates that I should perform a left-right rotation on 8, which results in something inconsistent with the desired result:</p>\n<pre><code>     8\n   ┌─┴──┐\n   3    9\n  ┌┴─┐  └─┐\n  2  4   10\n┌─┘  └─┐\n1      5\n       └─┐\n         6\n         └─┐\n           7\n</code></pre>\n<p>This is the logic I am using to determine which rotations to use for a given node (let me know if I should include the code for my rotate methods - I am not sure if it is necessary for an MCVE):</p>\n<pre><code>private void balance(Node node) {\n    if (node == null)\n        return;\n\n    int balanceFactor = balanceFactor(node);\n    if (balanceFactor &gt; 1) {\n        // Left subtree is heavier\n        balanceFactor = balanceFactor(node.left);\n        if (balanceFactor &gt; 0) {\n            rightRotate(node.left.left);\n        } else {\n            leftRotate(node.left.right);\n            rightRotate(node.left);\n        }\n    } else if (balanceFactor &lt; -1) {\n        // Right subtree is heavier\n        balanceFactor = balanceFactor(node.right);\n        if (balanceFactor &gt; 0) {\n            leftRotate(node.right);\n            rightRotate(node.right.left);\n        } else {\n            leftRotate(node.right);\n        }\n    }\n\n    balance(node.parent);\n}\n</code></pre>\n<p>It would seem to me that the logic works well until the root node becomes right-heavy.</p>\n<p>What do I need to do differently to balance this tree?</p>\n"},{"tags":["java","xml","spring","spring-boot","soap"],"comments":[{"owner":{"account_id":9709676,"reputation":1447,"user_id":7221628,"accept_rate":100,"display_name":"JGlass"},"score":0,"creation_date":1692832487,"post_id":76859754,"comment_id":135679294,"body_markdown":"did you get your issue resolved?  I just ran into the same error.  One WS method generates this error, another very similar does not.  I see you are using  JDK17, a lot of people have problems upgrading to anything later than JDK8.  May also be the spring boot version?   Looks like you are using the sample code from Spring - so if you have not introduced any changes other than it being in another project, it may be Spring or JDK version related, which does not help my problem with one method in the project causing this error but another (and two other WS methods) not causing it O_o","body":"did you get your issue resolved?  I just ran into the same error.  One WS method generates this error, another very similar does not.  I see you are using  JDK17, a lot of people have problems upgrading to anything later than JDK8.  May also be the spring boot version?   Looks like you are using the sample code from Spring - so if you have not introduced any changes other than it being in another project, it may be Spring or JDK version related, which does not help my problem with one method in the project causing this error but another (and two other WS methods) not causing it O_o"},{"owner":{"account_id":9321922,"reputation":93,"user_id":6920412,"display_name":"PRJ"},"score":0,"creation_date":1701345926,"post_id":76859754,"comment_id":136765515,"body_markdown":"It was a dependency issue. The project had missing dependencies like spring-test.","body":"It was a dependency issue. The project had missing dependencies like spring-test."}],"owner":{"account_id":9321922,"reputation":93,"user_id":6920412,"display_name":"PRJ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691510006,"creation_date":1691499148,"question_id":76859754,"body_markdown":"I&#39;m getting this exception and unable to solve it. Also, unable to find the root cause this exception. The same code is working in another project, with less dependencies. Why this is happening? The versions are the same as I have used in the both projects.\r\n~~~\r\norg.springframework.beans.factory.BeanInitializationException: Could not initialize WebServiceMessageReceiverHandlerAdapter\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:380) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initStrategies(MessageDispatcherServlet.java:361) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.onRefresh(MessageDispatcherServlet.java:296) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat jakarta.servlet.GenericServlet.init(GenericServlet.java:143) ~[tomcat-embed-core-10.1.11.jar:6.0]\r\n\tat jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121) ~[tomcat-embed-core-10.1.11.jar:6.0]\r\n\tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:114) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Invocation of init method failed\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:182) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategies(DefaultStrategiesHelper.java:135) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:212) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initWebServiceMessageFactory(MessageDispatcherServlet.java:389) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:377) ~[spring-ws-core-4.0.5.jar:na]\r\n\t... 25 common frames omitted\r\nCaused by: org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader &#39;app&#39;)\r\n\tat org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:156) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:180) ~[spring-ws-core-4.0.5.jar:na]\r\n\t... 29 common frames omitted\r\nCaused by: jakarta.xml.soap.SOAPException: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader &#39;app&#39;)\r\n\tat jakarta.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:73) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\r\n\tat jakarta.xml.soap.MessageFactory.newInstance(MessageFactory.java:126) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\r\n\tat org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:139) ~[spring-ws-core-4.0.5.jar:na]\r\n\t... 30 common frames omitted\r\n\r\n[2m2023-08-08T17:53:10.852+05:30[0;39m [31mERROR[0;39m [35m8736[0;39m [2m---[0;39m [2m[nio-8083-exec-1][0;39m [36mo.a.c.c.C.[Tomcat].[localhost].[/]      [0;39m [2m:[0;39m Servlet.init() for servlet [messageDispatcherServlet] threw exception\r\n\r\norg.springframework.beans.factory.BeanInitializationException: Could not initialize WebServiceMessageReceiverHandlerAdapter\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:380) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initStrategies(MessageDispatcherServlet.java:361) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.onRefresh(MessageDispatcherServlet.java:296) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat jakarta.servlet.GenericServlet.init(GenericServlet.java:143) ~[tomcat-embed-core-10.1.11.jar:6.0]\r\n\tat jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121) ~[tomcat-embed-core-10.1.11.jar:6.0]\r\n\tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:114) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Invocation of init method failed\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:182) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategies(DefaultStrategiesHelper.java:135) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:212) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initWebServiceMessageFactory(MessageDispatcherServlet.java:389) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:377) ~[spring-ws-core-4.0.5.jar:na]\r\n\t... 25 common frames omitted\r\nCaused by: org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader &#39;app&#39;)\r\n\tat org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:156) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:180) ~[spring-ws-core-4.0.5.jar:na]\r\n\t... 29 common frames omitted\r\nCaused by: jakarta.xml.soap.SOAPException: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader &#39;app&#39;)\r\n\tat jakarta.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:73) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\r\n\tat jakarta.xml.soap.MessageFactory.newInstance(MessageFactory.java:126) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\r\n\tat org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:139) ~[spring-ws-core-4.0.5.jar:na]\r\n\t... 30 common frames omitted\r\n\r\n[2m2023-08-08T17:53:10.853+05:30[0;39m [31mERROR[0;39m [35m8736[0;39m [2m---[0;39m [2m[nio-8083-exec-1][0;39m [36ma.c.c.C.[.[.[.[messageDispatcherServlet][0;39m [2m:[0;39m Allocate exception for servlet [messageDispatcherServlet]\r\n\r\njakarta.xml.soap.SOAPException: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader &#39;app&#39;)\r\n\tat jakarta.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:73) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\r\n\tat jakarta.xml.soap.MessageFactory.newInstance(MessageFactory.java:126) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\r\n\tat org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:139) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:180) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategies(DefaultStrategiesHelper.java:135) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:212) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initWebServiceMessageFactory(MessageDispatcherServlet.java:389) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:377) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.initStrategies(MessageDispatcherServlet.java:361) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.ws.transport.http.MessageDispatcherServlet.onRefresh(MessageDispatcherServlet.java:296) ~[spring-ws-core-4.0.5.jar:na]\r\n\tat org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat jakarta.servlet.GenericServlet.init(GenericServlet.java:143) ~[tomcat-embed-core-10.1.11.jar:6.0]\r\n\tat jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121) ~[tomcat-embed-core-10.1.11.jar:6.0]\r\n\tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:114) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n~~~\r\n\r\nHere, is the POM file\r\n~~~\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;bbpslite&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;bbpslite&lt;/name&gt;\r\n\t&lt;description&gt;BBPS Lite for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;start-class&gt;com.ci.lite.BliteApplication&lt;/start-class&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;!--\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt; --&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/jakarta.servlet/jakarta.servlet-api --&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!--\r\n\t\thttps://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-ui --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;!--\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt; --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.uuid&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;java-uuid-generator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;redis.clients&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jedis&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;wsdl4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;wsdl4j&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt; \r\n\t\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api \r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.0&lt;/version&gt; \r\n\t\t&lt;/dependency&gt; --&gt;\r\n\t&lt;!-- https://mvnrepository.com/artifact/jakarta.xml.ws/jakarta.xml.ws-api --&gt;\r\n&lt;!-- &lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.xml.soap&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.xml.soap-api&lt;/artifactId&gt;\r\n    &lt;version&gt;1.4.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n--&gt;\r\n&lt;!-- https://mvnrepository.com/artifact/javax.xml.soap/javax.xml.soap-api --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\r\n    &lt;artifactId&gt;javax.xml.soap-api&lt;/artifactId&gt;\r\n    &lt;version&gt;1.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.xml.soap&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.xml.soap-api&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;!-- https://mvnrepository.com/artifact/org.springframework.ws/spring-ws-core --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-ws-core&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\r\n    &lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\r\n    &lt;version&gt;1.5.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\t\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;xsd1&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;xjc&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;sources&gt;\r\n\t\t\t\t\t\t\t\t&lt;source&gt;\r\n\t\t\t\t\t\t\t\t\tsrc/main/resources/xsd/request/customerBBPOUToBBPCU.xsd&lt;/source&gt;\r\n\t\t\t\t\t\t\t&lt;/sources&gt;\r\n\t\t\t\t\t\t\t&lt;packageName&gt;com.ci.lite.jaxb.request&lt;/packageName&gt;\r\n\t\t\t\t\t\t\t&lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t    &lt;execution&gt;\r\n                    &lt;id&gt;xsd2&lt;/id&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;xjc&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;sources&gt;\r\n                            &lt;source&gt;src/main/resources/xsd/request/billFetchresponse.xsd&lt;/source&gt;\r\n                        &lt;/sources&gt;\r\n                        &lt;packageName&gt;com.ci.lite.jaxb.response&lt;/packageName&gt;\r\n                        &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\r\n                    &lt;/configuration&gt;\r\n                 &lt;/execution&gt; \r\n                   &lt;execution&gt;\r\n                    &lt;id&gt;xsd3&lt;/id&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;xjc&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;sources&gt;\r\n                            &lt;source&gt;src/main/resources/xsd/request/countries.xsd&lt;/source&gt;\r\n                        &lt;/sources&gt;\r\n                        &lt;packageName&gt;com.ci.lite.jaxb.countries&lt;/packageName&gt;\r\n                        &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\r\n                    &lt;/configuration&gt;\r\n                 &lt;/execution&gt; \r\n\t\t\t\t&lt;/executions&gt;\r\n\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n~~~\r\nThis is config for the SOAP service\r\n~~~\r\nimport org.springframework.boot.web.servlet.ServletRegistrationBean;\r\nimport org.springframework.context.ApplicationContext;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.io.ClassPathResource;\r\nimport org.springframework.ws.config.annotation.EnableWs;\r\nimport org.springframework.ws.config.annotation.WsConfigurerAdapter;\r\nimport org.springframework.ws.transport.http.MessageDispatcherServlet;\r\nimport org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition;\r\nimport org.springframework.xml.xsd.SimpleXsdSchema;\r\nimport org.springframework.xml.xsd.XsdSchema;\r\n\r\n@EnableWs\r\n@Configuration\r\npublic class SoapWSConfig extends WsConfigurerAdapter {\r\n    @Bean(name = &quot;countries&quot;)\r\n    public DefaultWsdl11Definition defaultWsdl11Definition(XsdSchema xsdSchema) {\r\n        DefaultWsdl11Definition wsdl11Definition = new DefaultWsdl11Definition();\r\n        wsdl11Definition.setPortTypeName(&quot;CountriesPort&quot;);\r\n        wsdl11Definition.setLocationUri(&quot;/ws&quot;);\r\n        wsdl11Definition.setTargetNamespace(&quot;http://spring.io/guides/gs-producing-web-service&quot;);\r\n        wsdl11Definition.setSchema(xsdSchema);\r\n        return wsdl11Definition;\r\n    }\r\n\r\n    @Bean\r\n    public XsdSchema xsdSchema() {\r\n        return new SimpleXsdSchema(new ClassPathResource(&quot;xsd/request/countries.xsd&quot;));\r\n    }\r\n}\r\n~~~\r\nHow could I resolve this?\r\n","title":"Spring boot Context initialization failed exception","body":"<p>I'm getting this exception and unable to solve it. Also, unable to find the root cause this exception. The same code is working in another project, with less dependencies. Why this is happening? The versions are the same as I have used in the both projects.</p>\n<pre><code>org.springframework.beans.factory.BeanInitializationException: Could not initialize WebServiceMessageReceiverHandlerAdapter\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:380) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initStrategies(MessageDispatcherServlet.java:361) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.onRefresh(MessageDispatcherServlet.java:296) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at jakarta.servlet.GenericServlet.init(GenericServlet.java:143) ~[tomcat-embed-core-10.1.11.jar:6.0]\n    at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121) ~[tomcat-embed-core-10.1.11.jar:6.0]\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:114) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: org.springframework.beans.factory.BeanCreationException: Invocation of init method failed\n    at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:182) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategies(DefaultStrategiesHelper.java:135) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:212) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initWebServiceMessageFactory(MessageDispatcherServlet.java:389) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:377) ~[spring-ws-core-4.0.5.jar:na]\n    ... 25 common frames omitted\nCaused by: org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader 'app')\n    at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:156) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:180) ~[spring-ws-core-4.0.5.jar:na]\n    ... 29 common frames omitted\nCaused by: jakarta.xml.soap.SOAPException: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader 'app')\n    at jakarta.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:73) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\n    at jakarta.xml.soap.MessageFactory.newInstance(MessageFactory.java:126) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\n    at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:139) ~[spring-ws-core-4.0.5.jar:na]\n    ... 30 common frames omitted\n\n[2m2023-08-08T17:53:10.852+05:30[0;39m [31mERROR[0;39m [35m8736[0;39m [2m---[0;39m [2m[nio-8083-exec-1][0;39m [36mo.a.c.c.C.[Tomcat].[localhost].[/]      [0;39m [2m:[0;39m Servlet.init() for servlet [messageDispatcherServlet] threw exception\n\norg.springframework.beans.factory.BeanInitializationException: Could not initialize WebServiceMessageReceiverHandlerAdapter\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:380) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initStrategies(MessageDispatcherServlet.java:361) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.onRefresh(MessageDispatcherServlet.java:296) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at jakarta.servlet.GenericServlet.init(GenericServlet.java:143) ~[tomcat-embed-core-10.1.11.jar:6.0]\n    at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121) ~[tomcat-embed-core-10.1.11.jar:6.0]\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:114) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: org.springframework.beans.factory.BeanCreationException: Invocation of init method failed\n    at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:182) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategies(DefaultStrategiesHelper.java:135) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:212) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initWebServiceMessageFactory(MessageDispatcherServlet.java:389) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:377) ~[spring-ws-core-4.0.5.jar:na]\n    ... 25 common frames omitted\nCaused by: org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader 'app')\n    at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:156) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:180) ~[spring-ws-core-4.0.5.jar:na]\n    ... 29 common frames omitted\nCaused by: jakarta.xml.soap.SOAPException: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader 'app')\n    at jakarta.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:73) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\n    at jakarta.xml.soap.MessageFactory.newInstance(MessageFactory.java:126) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\n    at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:139) ~[spring-ws-core-4.0.5.jar:na]\n    ... 30 common frames omitted\n\n[2m2023-08-08T17:53:10.853+05:30[0;39m [31mERROR[0;39m [35m8736[0;39m [2m---[0;39m [2m[nio-8083-exec-1][0;39m [36ma.c.c.C.[.[.[.[messageDispatcherServlet][0;39m [2m:[0;39m Allocate exception for servlet [messageDispatcherServlet]\n\njakarta.xml.soap.SOAPException: Unable to create SAAJ meta-factory: class com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl cannot be cast to class jakarta.xml.soap.SAAJMetaFactory (com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl and jakarta.xml.soap.SAAJMetaFactory are in unnamed module of loader 'app')\n    at jakarta.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:73) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\n    at jakarta.xml.soap.MessageFactory.newInstance(MessageFactory.java:126) ~[jakarta.xml.soap-api-3.0.0.jar:3.0.0]\n    at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:139) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:180) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategies(DefaultStrategiesHelper.java:135) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:212) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initWebServiceMessageFactory(MessageDispatcherServlet.java:389) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initMessageReceiverHandlerAdapter(MessageDispatcherServlet.java:377) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.initStrategies(MessageDispatcherServlet.java:361) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.ws.transport.http.MessageDispatcherServlet.onRefresh(MessageDispatcherServlet.java:296) ~[spring-ws-core-4.0.5.jar:na]\n    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:603) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:537) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:169) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at jakarta.servlet.GenericServlet.init(GenericServlet.java:143) ~[tomcat-embed-core-10.1.11.jar:6.0]\n    at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121) ~[tomcat-embed-core-10.1.11.jar:6.0]\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:662) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:114) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.11.jar:10.1.11]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n</code></pre>\n<p>Here, is the POM file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;bbpslite&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;bbpslite&lt;/name&gt;\n    &lt;description&gt;BBPS Lite for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;start-class&gt;com.ci.lite.BliteApplication&lt;/start-class&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;!--    &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt; --&gt;\n        &lt;!-- https://mvnrepository.com/artifact/jakarta.servlet/jakarta.servlet-api --&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--\n        https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-ui --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;!--    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt; --&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.uuid&lt;/groupId&gt;\n            &lt;artifactId&gt;java-uuid-generator&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n            &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;wsdl4j&lt;/groupId&gt;\n            &lt;artifactId&gt;wsdl4j&lt;/artifactId&gt;\n        &lt;/dependency&gt; \n    \n        &lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api \n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt; \n        &lt;/dependency&gt; --&gt;\n    &lt;!-- https://mvnrepository.com/artifact/jakarta.xml.ws/jakarta.xml.ws-api --&gt;\n&lt;!-- &lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.soap&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.soap-api&lt;/artifactId&gt;\n    &lt;version&gt;1.4.2&lt;/version&gt;\n&lt;/dependency&gt;\n--&gt;\n&lt;!-- https://mvnrepository.com/artifact/javax.xml.soap/javax.xml.soap-api --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;javax.xml.soap&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.xml.soap-api&lt;/artifactId&gt;\n    &lt;version&gt;1.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.soap&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.soap-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- https://mvnrepository.com/artifact/org.springframework.ws/spring-ws-core --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.ws&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-ws-core&lt;/artifactId&gt;\n    &lt;version&gt;4.0.5&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\n    &lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\n    &lt;version&gt;1.5.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    \n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;xsd1&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;xjc&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sources&gt;\n                                &lt;source&gt;\n                                    src/main/resources/xsd/request/customerBBPOUToBBPCU.xsd&lt;/source&gt;\n                            &lt;/sources&gt;\n                            &lt;packageName&gt;com.ci.lite.jaxb.request&lt;/packageName&gt;\n                            &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                        &lt;execution&gt;\n                    &lt;id&gt;xsd2&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;xjc&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sources&gt;\n                            &lt;source&gt;src/main/resources/xsd/request/billFetchresponse.xsd&lt;/source&gt;\n                        &lt;/sources&gt;\n                        &lt;packageName&gt;com.ci.lite.jaxb.response&lt;/packageName&gt;\n                        &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\n                    &lt;/configuration&gt;\n                 &lt;/execution&gt; \n                   &lt;execution&gt;\n                    &lt;id&gt;xsd3&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;xjc&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sources&gt;\n                            &lt;source&gt;src/main/resources/xsd/request/countries.xsd&lt;/source&gt;\n                        &lt;/sources&gt;\n                        &lt;packageName&gt;com.ci.lite.jaxb.countries&lt;/packageName&gt;\n                        &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\n                    &lt;/configuration&gt;\n                 &lt;/execution&gt; \n                &lt;/executions&gt;\n\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>This is config for the SOAP service</p>\n<pre><code>import org.springframework.boot.web.servlet.ServletRegistrationBean;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.io.ClassPathResource;\nimport org.springframework.ws.config.annotation.EnableWs;\nimport org.springframework.ws.config.annotation.WsConfigurerAdapter;\nimport org.springframework.ws.transport.http.MessageDispatcherServlet;\nimport org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition;\nimport org.springframework.xml.xsd.SimpleXsdSchema;\nimport org.springframework.xml.xsd.XsdSchema;\n\n@EnableWs\n@Configuration\npublic class SoapWSConfig extends WsConfigurerAdapter {\n    @Bean(name = &quot;countries&quot;)\n    public DefaultWsdl11Definition defaultWsdl11Definition(XsdSchema xsdSchema) {\n        DefaultWsdl11Definition wsdl11Definition = new DefaultWsdl11Definition();\n        wsdl11Definition.setPortTypeName(&quot;CountriesPort&quot;);\n        wsdl11Definition.setLocationUri(&quot;/ws&quot;);\n        wsdl11Definition.setTargetNamespace(&quot;http://spring.io/guides/gs-producing-web-service&quot;);\n        wsdl11Definition.setSchema(xsdSchema);\n        return wsdl11Definition;\n    }\n\n    @Bean\n    public XsdSchema xsdSchema() {\n        return new SimpleXsdSchema(new ClassPathResource(&quot;xsd/request/countries.xsd&quot;));\n    }\n}\n</code></pre>\n<p>How could I resolve this?</p>\n"},{"tags":["java","mariadb","spring-batch"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1680304081,"post_id":75903185,"comment_id":133881576,"body_markdown":"Either your new DB table does not have an id column, or id column named as the id in the query (or both). It potentially should be an Auto increment id system depending how row id&#39;s are created. The entity id for the query may not match either.","body":"Either your new DB table does not have an id column, or id column named as the id in the query (or both). It potentially should be an Auto increment id system depending how row id&#39;s are created. The entity id for the query may not match either."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1680324886,"post_id":75903185,"comment_id":133883223,"body_markdown":"Which MariaDB version do you use? We have a test that validates the DDL schema that you shared and it passes with MariaDB 10.9.3, see https://github.com/spring-projects/spring-batch/blob/main/spring-batch-core/src/test/java/org/springframework/batch/core/test/repository/MariaDBJobRepositoryIntegrationTests.java.","body":"Which MariaDB version do you use? We have a test that validates the DDL schema that you shared and it passes with MariaDB 10.9.3, see <a href=\"https://github.com/spring-projects/spring-batch/blob/main/spring-batch-core/src/test/java/org/springframework/batch/core/test/repository/MariaDBJobRepositoryIntegrationTests.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-batch/blob/main/&hellip;</a>."},{"owner":{"account_id":27986564,"reputation":1,"user_id":21373259,"display_name":"RizS"},"score":0,"creation_date":1680398313,"post_id":75903185,"comment_id":133891652,"body_markdown":"I am using version 10.11.1-MariaDB. I can try installing 10.9.3 and let you know the results.","body":"I am using version 10.11.1-MariaDB. I can try installing 10.9.3 and let you know the results."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1680531741,"post_id":75903185,"comment_id":133909906,"body_markdown":"The test I shared passes with MariaDB 10.11.2. So please provide a minimal example that reproduces the issue to be able to help you: https://stackoverflow.com/help/minimal-reproducible-example.","body":"The test I shared passes with MariaDB 10.11.2. So please provide a minimal example that reproduces the issue to be able to help you: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>."},{"owner":{"account_id":27986564,"reputation":1,"user_id":21373259,"display_name":"RizS"},"score":0,"creation_date":1680622091,"post_id":75903185,"comment_id":133927523,"body_markdown":"@MahmoudBenHassine I have updated the question with example. Thank you again for your help.","body":"@MahmoudBenHassine I have updated the question with example. Thank you again for your help."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1680699316,"post_id":75903185,"comment_id":133942009,"body_markdown":"I am not able to reproduce your issue, see complete example here: https://github.com/fmbenhassine/spring-batch-lab/tree/main/issues/so75903185.","body":"I am not able to reproduce your issue, see complete example here: <a href=\"https://github.com/fmbenhassine/spring-batch-lab/tree/main/issues/so75903185\" rel=\"nofollow noreferrer\">github.com/fmbenhassine/spring-batch-lab/tree/main/issues/&hellip;</a>."}],"answers":[{"tags":[],"owner":{"account_id":24784464,"reputation":1,"user_id":18667792,"display_name":"Raphael Otterbach"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691509873,"creation_date":1691509851,"answer_id":76861217,"question_id":75903185,"body_markdown":"Looks like you are missing a column named ID, which is logged here \r\n\r\n&gt; Caused by: java.sql.SQLSyntaxErrorException: Unknown column &#39;ID&#39; in &#39;field list&#39;\r\n\r\nI could not find any column named ID in the script. Maybe let Hibernate generate the Batch Tables with this property in your application.properties\r\n\r\n&gt; spring.batch.jdbc.initialize-schema=ALWAYS","title":"Using Spring Batch with MariaDB giving error","body":"<p>Looks like you are missing a column named ID, which is logged here</p>\n<blockquote>\n<p>Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'ID' in 'field list'</p>\n</blockquote>\n<p>I could not find any column named ID in the script. Maybe let Hibernate generate the Batch Tables with this property in your application.properties</p>\n<blockquote>\n<p>spring.batch.jdbc.initialize-schema=ALWAYS</p>\n</blockquote>\n"}],"owner":{"account_id":27986564,"reputation":1,"user_id":21373259,"display_name":"RizS"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691509873,"creation_date":1680301498,"question_id":75903185,"body_markdown":"I have a small Batch application. If I run it with H2 Database it works fine however when I use my actual database it gave error.  \r\n\r\nThe Application.java file shown below\r\n\r\n```\r\n@SpringBootApplication()\r\npublic class Application implements CommandLineRunner {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(FaxProcesser35Application.class, args);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run(String... args) throws Exception {\r\n\t\tSystem.out.println(&quot;Starting the job&quot;);\r\n\t}\r\n}\r\n```\r\nThe reason why I am using `CommandLineRunner` is because without it the job was not running.\r\n\r\nThe code of JobConfig.java is given below\r\n\r\n```\r\n@Configuration\r\npublic class JobConfig {\r\n\r\n    @Autowired\r\n    private JobRepository jobRepository;\r\n    @Autowired\r\n    private PlatformTransactionManager transactionManager;\r\n\r\n\r\n\r\n    @Bean\r\n    public Tasklet myTasklet() {\r\n        System.out.println(&quot;tasklet method was called&quot;);\r\n        return new MyTasklet() ;\r\n    }\r\n\r\n    @Bean\r\n    public Step myStep(JobRepository jobRepository, Tasklet myTasklet, PlatformTransactionManager transactionManager) {\r\n        return new StepBuilder(&quot;myStep&quot;, jobRepository)\r\n                .tasklet(myTasklet, transactionManager) // or .chunk(chunkSize, transactionManager)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public Job myJob() {\r\n        System.out.println(&quot;Job Method was called&quot;);\r\n        return new JobBuilder(&quot;myJob&quot;, jobRepository)\r\n                .start(myStep(jobRepository, myTasklet(), transactionManager))\r\n                .build();\r\n    }\r\n\r\n    private class MyTasklet implements Tasklet {\r\n        @Override\r\n        public RepeatStatus execute(StepContribution  stepContribution, ChunkContext chunkContext) throws Exception {\r\n            System.out.println(&quot;Running MyTasklet&quot;);\r\n            return RepeatStatus.FINISHED;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe application.properties files is list as below\r\n\r\n```\r\n#--------------------- DB Connection ------------------\r\n#spring.datasource.driver-class-name=com.mariadb.jdbc.Driver\r\n#spring.datasource.url=jdbc:mariadb://localhost:3306/database\r\n\r\nspring.datasource.url=jdbc:mysql://localhost:3306/database\r\nspring.datasource.username=username\r\nspring.datasource.password=password\r\n\r\n```\r\nAt first it said unable to find tables. So I create the tables by manually running [this script](https://github.com/spring-projects/spring-batch/blob/main/spring-batch-core/src/main/resources/org/springframework/batch/core/schema-mariadb.sql)\r\n\r\nHowever now its giving error `Could not increment ID for BATCH_JOB_SEQ sequence table` and `Unknown column &#39;ID&#39; in &#39;field list&#39;`\r\n\r\nI ran `describe BATCH_JOB_SEQ ;` got following response \r\n\r\n```\r\n+-----------------------+---------------------+------+-----+---------+-------+\r\n| Field                 | Type                | Null | Key | Default | Extra |\r\n+-----------------------+---------------------+------+-----+---------+-------+\r\n| next_not_cached_value | bigint(21)          | NO   |     | NULL    |       |\r\n| minimum_value         | bigint(21)          | NO   |     | NULL    |       |\r\n| maximum_value         | bigint(21)          | NO   |     | NULL    |       |\r\n| start_value           | bigint(21)          | NO   |     | NULL    |       |\r\n| increment             | bigint(21)          | NO   |     | NULL    |       |\r\n| cache_size            | bigint(21) unsigned | NO   |     | NULL    |       |\r\n| cycle_option          | tinyint(1) unsigned | NO   |     | NULL    |       |\r\n| cycle_count           | bigint(21)          | NO   |     | NULL    |       |\r\n+-----------------------+---------------------+------+-----+---------+-------+\r\n8 rows in set (0.017 sec)\r\n```\r\n\r\n\r\nThe complete error is given below\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to execute ApplicationRunner\r\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:763) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:750) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:317) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat com.ahmadiyya.LetterTohazoor.faxprocesser35.FaxProcesser35Application.main(FaxProcesser35Application.java:15) ~[classes/:na]\r\nCaused by: org.springframework.dao.DataAccessResourceFailureException: Could not increment ID for BATCH_JOB_SEQ sequence table\r\n\tat org.springframework.jdbc.support.incrementer.MySQLMaxValueIncrementer.getNextKey(MySQLMaxValueIncrementer.java:153) ~[spring-jdbc-6.0.7.jar:6.0.7]\r\n\tat org.springframework.jdbc.support.incrementer.AbstractDataFieldMaxValueIncrementer.nextLongValue(AbstractDataFieldMaxValueIncrementer.java:128) ~[spring-jdbc-6.0.7.jar:6.0.7]\r\n\tat org.springframework.batch.core.repository.dao.JdbcJobInstanceDao.createJobInstance(JdbcJobInstanceDao.java:110) ~[spring-batch-core-5.0.1.jar:5.0.1]\r\n\tat org.springframework.batch.core.repository.support.SimpleJobRepository.createJobExecution(SimpleJobRepository.java:168) ~[spring-batch-core-5.0.1.jar:5.0.1]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.7.jar:6.0.7]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.7.jar:6.0.7]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.7.jar:6.0.7]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.7.jar:6.0.7]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.7.jar:6.0.7]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.7.jar:6.0.7]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.7.jar:6.0.7]\r\n\tat org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean$1.invoke(AbstractJobRepositoryFactoryBean.java:207) ~[spring-batch-core-5.0.1.jar:5.0.1]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.7.jar:6.0.7]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218) ~[spring-aop-6.0.7.jar:6.0.7]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy68.createJobExecution(Unknown Source) ~[na:na]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:145) ~[spring-batch-core-5.0.1.jar:5.0.1]\r\n\tat org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:70) ~[spring-batch-core-5.0.1.jar:5.0.1]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:178) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:166) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:161) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:156) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:760) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\t... 5 common frames omitted\r\nCaused by: java.sql.SQLSyntaxErrorException: Unknown column &#39;ID&#39; in &#39;field list&#39;\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120) ~[mysql-connector-j-8.0.32.jar:8.0.32]\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.32.jar:8.0.32]\r\n\tat com.mysql.cj.jdbc.StatementImpl.executeUpdateInternal(StatementImpl.java:1334) ~[mysql-connector-j-8.0.32.jar:8.0.32]\r\n\tat com.mysql.cj.jdbc.StatementImpl.executeLargeUpdate(StatementImpl.java:2084) ~[mysql-connector-j-8.0.32.jar:8.0.32]\r\n\tat com.mysql.cj.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1245) ~[mysql-connector-j-8.0.32.jar:8.0.32]\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.executeUpdate(ProxyStatement.java:119) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.executeUpdate(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]\r\n\tat org.springframework.jdbc.support.incrementer.MySQLMaxValueIncrementer.getNextKey(MySQLMaxValueIncrementer.java:148) ~[spring-jdbc-6.0.7.jar:6.0.7]\r\n\t... 31 common frames omitted\r\n```\r\n","title":"Using Spring Batch with MariaDB giving error","body":"<p>I have a small Batch application. If I run it with H2 Database it works fine however when I use my actual database it gave error.</p>\n<p>The Application.java file shown below</p>\n<pre><code>@SpringBootApplication()\npublic class Application implements CommandLineRunner {\n\n    public static void main(String[] args) {\n        SpringApplication.run(FaxProcesser35Application.class, args);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n        System.out.println(&quot;Starting the job&quot;);\n    }\n}\n</code></pre>\n<p>The reason why I am using <code>CommandLineRunner</code> is because without it the job was not running.</p>\n<p>The code of JobConfig.java is given below</p>\n<pre><code>@Configuration\npublic class JobConfig {\n\n    @Autowired\n    private JobRepository jobRepository;\n    @Autowired\n    private PlatformTransactionManager transactionManager;\n\n\n\n    @Bean\n    public Tasklet myTasklet() {\n        System.out.println(&quot;tasklet method was called&quot;);\n        return new MyTasklet() ;\n    }\n\n    @Bean\n    public Step myStep(JobRepository jobRepository, Tasklet myTasklet, PlatformTransactionManager transactionManager) {\n        return new StepBuilder(&quot;myStep&quot;, jobRepository)\n                .tasklet(myTasklet, transactionManager) // or .chunk(chunkSize, transactionManager)\n                .build();\n    }\n\n    @Bean\n    public Job myJob() {\n        System.out.println(&quot;Job Method was called&quot;);\n        return new JobBuilder(&quot;myJob&quot;, jobRepository)\n                .start(myStep(jobRepository, myTasklet(), transactionManager))\n                .build();\n    }\n\n    private class MyTasklet implements Tasklet {\n        @Override\n        public RepeatStatus execute(StepContribution  stepContribution, ChunkContext chunkContext) throws Exception {\n            System.out.println(&quot;Running MyTasklet&quot;);\n            return RepeatStatus.FINISHED;\n        }\n    }\n}\n</code></pre>\n<p>The application.properties files is list as below</p>\n<pre><code>#--------------------- DB Connection ------------------\n#spring.datasource.driver-class-name=com.mariadb.jdbc.Driver\n#spring.datasource.url=jdbc:mariadb://localhost:3306/database\n\nspring.datasource.url=jdbc:mysql://localhost:3306/database\nspring.datasource.username=username\nspring.datasource.password=password\n\n</code></pre>\n<p>At first it said unable to find tables. So I create the tables by manually running <a href=\"https://github.com/spring-projects/spring-batch/blob/main/spring-batch-core/src/main/resources/org/springframework/batch/core/schema-mariadb.sql\" rel=\"nofollow noreferrer\">this script</a></p>\n<p>However now its giving error <code>Could not increment ID for BATCH_JOB_SEQ sequence table</code> and <code>Unknown column 'ID' in 'field list'</code></p>\n<p>I ran <code>describe BATCH_JOB_SEQ ;</code> got following response</p>\n<pre><code>+-----------------------+---------------------+------+-----+---------+-------+\n| Field                 | Type                | Null | Key | Default | Extra |\n+-----------------------+---------------------+------+-----+---------+-------+\n| next_not_cached_value | bigint(21)          | NO   |     | NULL    |       |\n| minimum_value         | bigint(21)          | NO   |     | NULL    |       |\n| maximum_value         | bigint(21)          | NO   |     | NULL    |       |\n| start_value           | bigint(21)          | NO   |     | NULL    |       |\n| increment             | bigint(21)          | NO   |     | NULL    |       |\n| cache_size            | bigint(21) unsigned | NO   |     | NULL    |       |\n| cycle_option          | tinyint(1) unsigned | NO   |     | NULL    |       |\n| cycle_count           | bigint(21)          | NO   |     | NULL    |       |\n+-----------------------+---------------------+------+-----+---------+-------+\n8 rows in set (0.017 sec)\n</code></pre>\n<p>The complete error is given below</p>\n<pre><code>java.lang.IllegalStateException: Failed to execute ApplicationRunner\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:763) ~[spring-boot-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:750) ~[spring-boot-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:317) ~[spring-boot-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.5.jar:3.0.5]\n    at com.ahmadiyya.LetterTohazoor.faxprocesser35.FaxProcesser35Application.main(FaxProcesser35Application.java:15) ~[classes/:na]\nCaused by: org.springframework.dao.DataAccessResourceFailureException: Could not increment ID for BATCH_JOB_SEQ sequence table\n    at org.springframework.jdbc.support.incrementer.MySQLMaxValueIncrementer.getNextKey(MySQLMaxValueIncrementer.java:153) ~[spring-jdbc-6.0.7.jar:6.0.7]\n    at org.springframework.jdbc.support.incrementer.AbstractDataFieldMaxValueIncrementer.nextLongValue(AbstractDataFieldMaxValueIncrementer.java:128) ~[spring-jdbc-6.0.7.jar:6.0.7]\n    at org.springframework.batch.core.repository.dao.JdbcJobInstanceDao.createJobInstance(JdbcJobInstanceDao.java:110) ~[spring-batch-core-5.0.1.jar:5.0.1]\n    at org.springframework.batch.core.repository.support.SimpleJobRepository.createJobExecution(SimpleJobRepository.java:168) ~[spring-batch-core-5.0.1.jar:5.0.1]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.7.jar:6.0.7]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.7.jar:6.0.7]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.7.jar:6.0.7]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.7.jar:6.0.7]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.7.jar:6.0.7]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.7.jar:6.0.7]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.7.jar:6.0.7]\n    at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean$1.invoke(AbstractJobRepositoryFactoryBean.java:207) ~[spring-batch-core-5.0.1.jar:5.0.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.7.jar:6.0.7]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218) ~[spring-aop-6.0.7.jar:6.0.7]\n    at jdk.proxy2/jdk.proxy2.$Proxy68.createJobExecution(Unknown Source) ~[na:na]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:145) ~[spring-batch-core-5.0.1.jar:5.0.1]\n    at org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:70) ~[spring-batch-core-5.0.1.jar:5.0.1]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:178) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:166) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:161) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:156) ~[spring-boot-autoconfigure-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:760) ~[spring-boot-3.0.5.jar:3.0.5]\n    ... 5 common frames omitted\nCaused by: java.sql.SQLSyntaxErrorException: Unknown column 'ID' in 'field list'\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120) ~[mysql-connector-j-8.0.32.jar:8.0.32]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.32.jar:8.0.32]\n    at com.mysql.cj.jdbc.StatementImpl.executeUpdateInternal(StatementImpl.java:1334) ~[mysql-connector-j-8.0.32.jar:8.0.32]\n    at com.mysql.cj.jdbc.StatementImpl.executeLargeUpdate(StatementImpl.java:2084) ~[mysql-connector-j-8.0.32.jar:8.0.32]\n    at com.mysql.cj.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1245) ~[mysql-connector-j-8.0.32.jar:8.0.32]\n    at com.zaxxer.hikari.pool.ProxyStatement.executeUpdate(ProxyStatement.java:119) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyStatement.executeUpdate(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]\n    at org.springframework.jdbc.support.incrementer.MySQLMaxValueIncrementer.getNextKey(MySQLMaxValueIncrementer.java:148) ~[spring-jdbc-6.0.7.jar:6.0.7]\n    ... 31 common frames omitted\n</code></pre>\n"},{"tags":["java","sql-server","date","java-11"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691396096,"post_id":76849865,"comment_id":135480407,"body_markdown":"Compare `timeStamp.getTime()` and `timeStamp.toInstant().toEpochMilli()`. Are they the same number? If they are, then the result is correct and you are probably formatting the `java.sql.Timestamp` incorrectly.","body":"Compare <code>timeStamp.getTime()</code> and <code>timeStamp.toInstant().toEpochMilli()</code>. Are they the same number? If they are, then the result is correct and you are probably formatting the <code>java.sql.Timestamp</code> incorrectly."},{"owner":{"account_id":11105434,"reputation":416,"user_id":8152720,"display_name":"Shan Chathusanda Jayathilaka"},"score":0,"creation_date":1691396913,"post_id":76849865,"comment_id":135480574,"body_markdown":"```timeStamp.getTime()``` and ```timeStamp.toInstant().toEpochMilli()``` same. But I am not formatting the ```java.sql.Timestamp``` in any point after getting that from the database.","body":"<code>timeStamp.getTime()</code> and <code>timeStamp.toInstant().toEpochMilli()</code> same. But I am not formatting the <code>java.sql.Timestamp</code> in any point after getting that from the database."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691397083,"post_id":76849865,"comment_id":135480615,"body_markdown":"You are, otherwise you wouldn&#39;t have written `2023-08-08 07:52:09.877`. That string is the result of formatting. Try formatting the `Timestamp` with a [`DateFormat`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DateFormat.html) that has its timezone set to UTC.","body":"You are, otherwise you wouldn&#39;t have written <code>2023-08-08 07:52:09.877</code>. That string is the result of formatting. Try formatting the <code>Timestamp</code> with a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DateFormat.html\" rel=\"nofollow noreferrer\"><code>DateFormat</code></a> that has its timezone set to UTC."},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1691397100,"post_id":76849865,"comment_id":135480620,"body_markdown":"In which timezone are you located?","body":"In which timezone are you located?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691397158,"post_id":76849865,"comment_id":135480627,"body_markdown":"*Stored date and time is in UTC* Are you *certain* of that? What RDBMS?","body":"<i>Stored date and time is in UTC</i> Are you <i>certain</i> of that? What RDBMS?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691397501,"post_id":76849865,"comment_id":135480704,"body_markdown":"*Timestamp timeStamp = 2023-08-08 07:52:09.877 // This is in UTC.* E.g in MySql, not any longer it isn&#39;t. It was *stored* in UTC but was converted to your timezone on retrieval","body":"<i>Timestamp timeStamp = 2023-08-08 07:52:09.877 // This is in UTC.</i> E.g in MySql, not any longer it isn&#39;t. It was <i>stored</i> in UTC but was converted to your timezone on retrieval"},{"owner":{"account_id":11105434,"reputation":416,"user_id":8152720,"display_name":"Shan Chathusanda Jayathilaka"},"score":0,"creation_date":1691403705,"post_id":76849865,"comment_id":135481932,"body_markdown":"I m using MSSQL as my DB and I am storing the time as UTC with the following prepared statement code.\n\n```prepStat.setTimestamp(TimeStamp, Calendar.getInstance(TimeZone.getTimeZone(UTC));```","body":"I m using MSSQL as my DB and I am storing the time as UTC with the following prepared statement code.  <code>prepStat.setTimestamp(TimeStamp, Calendar.getInstance(TimeZone.getTimeZone(UTC));</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691404600,"post_id":76849865,"comment_id":135482097,"body_markdown":"You should probably be trying to do something more like call `setObject` with type `java.time.Instant` but I&#39;m not sure what MSSQL does with its datetimes","body":"You should probably be trying to do something more like call <code>setObject</code> with type <code>java.time.Instant</code> but I&#39;m not sure what MSSQL does with its datetimes"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691422247,"post_id":76849865,"comment_id":135486127,"body_markdown":"Post your additional details as edits to the Question, not as Comments.","body":"Post your additional details as edits to the Question, not as Comments."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1691422279,"post_id":76849865,"comment_id":135486140,"body_markdown":"What is the *exact* data type of the column in your table?","body":"What is the <i>exact</i> data type of the column in your table?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1691423008,"post_id":76849865,"comment_id":135486302,"body_markdown":"Keep away from the ole `java.sql.Timestamp` `Calendar` and `TimeZone` classes. They were troublesome and poorly designed and typically gave you issues such as what you are experiencing (and/or other issues too). Best to use `timestamp with time zone` if MS SQL supports it (which I think) and `OffsetDateTime` in Java.","body":"Keep away from the ole <code>java.sql.Timestamp</code> <code>Calendar</code> and <code>TimeZone</code> classes. They were troublesome and poorly designed and typically gave you issues such as what you are experiencing (and/or other issues too). Best to use <code>timestamp with time zone</code> if MS SQL supports it (which I think) and <code>OffsetDateTime</code> in Java."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691423176,"post_id":76849865,"comment_id":135486341,"body_markdown":"Assuming you had a `timestamp` without time zone in your database, what happened was that something in your system assumed it was in your local time zone and falsely converted it to a `java.sql.Timestamp` using this assumption. If you cannot change the database data type (which I hope you can), retrieve a `LocalDateTime` from the database and perform your own conversion to UTC so that you control that it is done correctly.","body":"Assuming you had a <code>timestamp</code> without time zone in your database, what happened was that something in your system assumed it was in your local time zone and falsely converted it to a <code>java.sql.Timestamp</code> using this assumption. If you cannot change the database data type (which I hope you can), retrieve a <code>LocalDateTime</code> from the database and perform your own conversion to UTC so that you control that it is done correctly."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691424356,"post_id":76849865,"comment_id":135486582,"body_markdown":"`prepStat.setObject(n, Instant.now(), java.time.Instant.class); // (where &#39;n&#39; is 1-based column index` is probably worth trying. Inverse op for select","body":"<code>prepStat.setObject(n, Instant.now(), java.time.Instant.class); &#47;&#47; (where &#39;n&#39; is 1-based column index</code> is probably worth trying. Inverse op for select"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691428533,"post_id":76849865,"comment_id":135487367,"body_markdown":"@g00se It’s certainly on the right track. Did you try it, though? I didn’t. Asking becuase i suspect that the third argument to [`setObject`](https://docs.oracle.com/en/java/javase/18/docs/api/java.sql/java/sql/PreparedStatement.html#setObject(int,java.lang.Object,java.sql.SQLType)) should perhaps be [JDBCType.TIMESTAMP_WITH_TIMEZONE`](https://docs.oracle.com/en/java/javase/18/docs/api/java.sql/java/sql/JDBCType.html#TIMESTAMP_WITH_TIMEZONE)?","body":"@g00se It’s certainly on the right track. Did you try it, though? I didn’t. Asking becuase i suspect that the third argument to <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.sql/java/sql/PreparedStatement.html#setObject(int,java.lang.Object,java.sql.SQLType)\" rel=\"nofollow noreferrer\"><code>setObject</code></a> should perhaps be <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.sql/java/sql/JDBCType.html#TIMESTAMP_WITH_TIMEZONE\" rel=\"nofollow noreferrer\">JDBCType.TIMESTAMP_WITH_TIMEZONE`</a>?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691429794,"post_id":76849865,"comment_id":135487589,"body_markdown":"@OleV.V. unfortunately not as I don&#39;t have MSSQL.","body":"@OleV.V. unfortunately not as I don&#39;t have MSSQL."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691430130,"post_id":76849865,"comment_id":135487667,"body_markdown":"afaics offsets are supported (`datetimeoffset` type) but not timezones","body":"afaics offsets are supported (<code>datetimeoffset</code> type) but not timezones"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1691509876,"post_id":76849865,"comment_id":135500120,"body_markdown":"JDBC does not specify support for `Instant`, so it will not work on all JDBC drivers. JDBC defines support for `java.time.LocalDateTime` for `TIMESTAMP`, and `java.time.OffsetDateTime` for (SQL Standard) `TIMESTAMP WITH TIME ZONE`.","body":"JDBC does not specify support for <code>Instant</code>, so it will not work on all JDBC drivers. JDBC defines support for <code>java.time.LocalDateTime</code> for <code>TIMESTAMP</code>, and <code>java.time.OffsetDateTime</code> for (SQL Standard) <code>TIMESTAMP WITH TIME ZONE</code>."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1691510016,"post_id":76849865,"comment_id":135500139,"body_markdown":"Related: [Is java.sql.Timestamp timezone specific?](https://stackoverflow.com/questions/14070572/is-java-sql-timestamp-timezone-specific)","body":"Related: <a href=\"https://stackoverflow.com/questions/14070572/is-java-sql-timestamp-timezone-specific\">Is java.sql.Timestamp timezone specific?</a>"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691442643,"creation_date":1691442157,"answer_id":76855159,"question_id":76849865,"body_markdown":"## `Timestamp#toInstant` is indeed in UTC\r\n\r\n&gt; convert the stored Timestamp to an Instant\r\n\r\nCalling [`java.sql.Timestamp#toInstant`][1] will indeed give you a date and time as seen with an offset of zero hours-minutes-seconds from UTC. Both classes internally keep a count since the epoch reference of first moment of 1970 in UTC, 1970-01-01T00:00Z. \r\n\r\n    Instant instant = myJavaSqlTimestamp.toInstant() ;\r\n\r\n# Avoid legacy date-time classes\r\n\r\nThe `Timestamp` class is one of the terribly flawed legacy date-time classes. These were years ago supplanted by the modern *java.time* classes defined in JSR 310. \r\n\r\nNever use `Timestamp`, `Calendar`, `Date`, `SimpleDateFormat`, etc. Use only *java.time* classes with JDBC 4.2+. \r\n\r\n## With zone/offset\r\n\r\nIf the column in your [Microsoft SQL Server][2] database is of the type [`datetimeoffset`][3], then retrieve the matching type in JDBC: [`OffsetDateTime`][4]. \r\n\r\n    OffsetDateTime odt = myResultSet.getObject( … , OffsetDateTime.class ) ;\r\n\r\nWriting:\r\n\r\n    String input = &quot;2023-08-08 07:52:09.877Z&quot; ;  // `Z` on the end indicates an offset of zero hours-minutes-seconds from UTC. Pronounced &quot;Zulu&quot;. \r\n    Instant instant = Instant.parse( input ) ;  // Represents a moment as seen with an offset of zero from UTC.\r\n    OffsetDateTime odt = instant.atOffset( ZoneOffset.UTC ) ;  // Represents a moment as seen with a particular offset from UTC. In this case the offset is zero.\r\n    myPreparedStatement.setObject( … , odt ) ;\r\n\r\n## Without zone/offset\r\n\r\nI suspect your problem is due to an incorrect data type on your column. You neglected to indicate the data type, so I can only guess. But I guess the type is the legacy Microsoft SQL Server type [`datetime`][5] or its modern replacement [`datetime2`][6]. \r\n\r\nBoth of those `datetime`/`datetime2` types represent a date with time-of-day but lack the context of a time zone or an offset-from-UTC. Without that context, such a value does *not* represent a moment, is *not* a specific point on the timeline. So **comparing to a value in UTC is nonsensical**.\r\n\r\nThe matching JDBC type for those `datetime`/`datetime2` types is `LocalDateTime` — a class representing a date with time-of-day but without zone/offset. \r\n\r\n    LocalDateTime ldt = myResultSet.getObject( … , LocalDateTime.class ) ;\r\n\r\nWriting:\r\n\r\n    myPreparedStatement.setObject( … , ldt ) ;\r\n\r\n**Do *not* use those `datetime`/`datetime2` types nor `LocalDateTime`** if you are tracking a moment, a specific point on the timeline. That would be like storing an amount of money without noting the currency.\r\n\r\nIf you did indeed use those `datetime`/`datetime2` types in an attempt to store a moment, then you now have a mess on your hands. You will need to use a [`datetimeoffset`][3] instead. To migrate data, you can assign an offset if you know *for certain* the intended offset of the stored values, but you will of course ultimately be guessing since you cannot know the context of every row’s insertion/update.\r\n\r\n\r\n    \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Timestamp.html#toInstant()\r\n  [2]: https://en.wikipedia.org/wiki/Microsoft_SQL_Server\r\n  [3]: https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-ver16\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/OffsetDateTime.html\r\n  [5]: https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetime-transact-sql?view=sql-server-ver16\r\n  [6]: https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetime2-transact-sql?view=sql-server-ver16","title":"Convert a sql UTC Timesamp to Instant in Java","body":"<h2><code>Timestamp#toInstant</code> is indeed in UTC</h2>\n<blockquote>\n<p>convert the stored Timestamp to an Instant</p>\n</blockquote>\n<p>Calling <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Timestamp.html#toInstant()\" rel=\"nofollow noreferrer\"><code>java.sql.Timestamp#toInstant</code></a> will indeed give you a date and time as seen with an offset of zero hours-minutes-seconds from UTC. Both classes internally keep a count since the epoch reference of first moment of 1970 in UTC, 1970-01-01T00:00Z.</p>\n<pre><code>Instant instant = myJavaSqlTimestamp.toInstant() ;\n</code></pre>\n<h1>Avoid legacy date-time classes</h1>\n<p>The <code>Timestamp</code> class is one of the terribly flawed legacy date-time classes. These were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310.</p>\n<p>Never use <code>Timestamp</code>, <code>Calendar</code>, <code>Date</code>, <code>SimpleDateFormat</code>, etc. Use only <em>java.time</em> classes with JDBC 4.2+.</p>\n<h2>With zone/offset</h2>\n<p>If the column in your <a href=\"https://en.wikipedia.org/wiki/Microsoft_SQL_Server\" rel=\"nofollow noreferrer\">Microsoft SQL Server</a> database is of the type <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-ver16\" rel=\"nofollow noreferrer\"><code>datetimeoffset</code></a>, then retrieve the matching type in JDBC: <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a>.</p>\n<pre><code>OffsetDateTime odt = myResultSet.getObject( … , OffsetDateTime.class ) ;\n</code></pre>\n<p>Writing:</p>\n<pre><code>String input = &quot;2023-08-08 07:52:09.877Z&quot; ;  // `Z` on the end indicates an offset of zero hours-minutes-seconds from UTC. Pronounced &quot;Zulu&quot;. \nInstant instant = Instant.parse( input ) ;  // Represents a moment as seen with an offset of zero from UTC.\nOffsetDateTime odt = instant.atOffset( ZoneOffset.UTC ) ;  // Represents a moment as seen with a particular offset from UTC. In this case the offset is zero.\nmyPreparedStatement.setObject( … , odt ) ;\n</code></pre>\n<h2>Without zone/offset</h2>\n<p>I suspect your problem is due to an incorrect data type on your column. You neglected to indicate the data type, so I can only guess. But I guess the type is the legacy Microsoft SQL Server type <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetime-transact-sql?view=sql-server-ver16\" rel=\"nofollow noreferrer\"><code>datetime</code></a> or its modern replacement <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetime2-transact-sql?view=sql-server-ver16\" rel=\"nofollow noreferrer\"><code>datetime2</code></a>.</p>\n<p>Both of those <code>datetime</code>/<code>datetime2</code> types represent a date with time-of-day but lack the context of a time zone or an offset-from-UTC. Without that context, such a value does <em>not</em> represent a moment, is <em>not</em> a specific point on the timeline. So <strong>comparing to a value in UTC is nonsensical</strong>.</p>\n<p>The matching JDBC type for those <code>datetime</code>/<code>datetime2</code> types is <code>LocalDateTime</code> — a class representing a date with time-of-day but without zone/offset.</p>\n<pre><code>LocalDateTime ldt = myResultSet.getObject( … , LocalDateTime.class ) ;\n</code></pre>\n<p>Writing:</p>\n<pre><code>myPreparedStatement.setObject( … , ldt ) ;\n</code></pre>\n<p><strong>Do <em>not</em> use those <code>datetime</code>/<code>datetime2</code> types nor <code>LocalDateTime</code></strong> if you are tracking a moment, a specific point on the timeline. That would be like storing an amount of money without noting the currency.</p>\n<p>If you did indeed use those <code>datetime</code>/<code>datetime2</code> types in an attempt to store a moment, then you now have a mess on your hands. You will need to use a <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-ver16\" rel=\"nofollow noreferrer\"><code>datetimeoffset</code></a> instead. To migrate data, you can assign an offset if you know <em>for certain</em> the intended offset of the stored values, but you will of course ultimately be guessing since you cannot know the context of every row’s insertion/update.</p>\n"}],"owner":{"account_id":11105434,"reputation":416,"user_id":8152720,"display_name":"Shan Chathusanda Jayathilaka"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691509796,"creation_date":1691395804,"question_id":76849865,"body_markdown":"I am working on a solution which will need to ```compare date and time which are stored in a database with the current time in Java```. Stored date and time is in UTC and it is a **java.sql.Timestamp**. I use **java.time.Instant** to compare but I need to convert the stored Timestamp to an Instant. I used **Timestamp.toInstant()** but it is returning the wrong time. Please refer the example below for the code.\r\n\r\n&gt;Timestamp timeStamp = 2023-08-08 07:52:09.877 *// This is in UTC.*\r\n\r\n&gt;timeStamp.toInstant = 2023-08-08T02:22:09.877Z *// Converted UTC value.*\r\n\r\nTried to find a method that can pass the timezone of the time that we input to the toInstant method but unable to find any. \r\n\r\nAnyone aware of a solution to get the same UTC time in to the Instant object?\r\n","title":"Convert a sql UTC Timesamp to Instant in Java","body":"<p>I am working on a solution which will need to <code>compare date and time which are stored in a database with the current time in Java</code>. Stored date and time is in UTC and it is a <strong>java.sql.Timestamp</strong>. I use <strong>java.time.Instant</strong> to compare but I need to convert the stored Timestamp to an Instant. I used <strong>Timestamp.toInstant()</strong> but it is returning the wrong time. Please refer the example below for the code.</p>\n<blockquote>\n<p>Timestamp timeStamp = 2023-08-08 07:52:09.877 <em>// This is in UTC.</em></p>\n</blockquote>\n<blockquote>\n<p>timeStamp.toInstant = 2023-08-08T02:22:09.877Z <em>// Converted UTC value.</em></p>\n</blockquote>\n<p>Tried to find a method that can pass the timezone of the time that we input to the toInstant method but unable to find any.</p>\n<p>Anyone aware of a solution to get the same UTC time in to the Instant object?</p>\n"},{"tags":["java","singleton","menuitem","jdialog"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1499148149,"post_id":44897773,"comment_id":76773530,"body_markdown":"If you&#39;re going to use a singleton, then you should be managing them through a `enum`","body":"If you&#39;re going to use a singleton, then you should be managing them through a <code>enum</code>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1499148285,"post_id":44897773,"comment_id":76773592,"body_markdown":"So, the problem isn&#39;t with your singleton, it&#39;s with the fact that each time the `ActionListener` is triggered, it adds more components to the dialog. Overall, I have no idea why you think you need this setup. There&#39;s nothing stopping a user from making their own dialog from scratch.","body":"So, the problem isn&#39;t with your singleton, it&#39;s with the fact that each time the <code>ActionListener</code> is triggered, it adds more components to the dialog. Overall, I have no idea why you think you need this setup. There&#39;s nothing stopping a user from making their own dialog from scratch."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1499149339,"post_id":44897773,"comment_id":76774150,"body_markdown":"also show the whole code and not just fragments","body":"also show the whole code and not just fragments"},{"owner":{"account_id":11090869,"reputation":5,"user_id":8142802,"accept_rate":40,"display_name":"ManuellsenDeve"},"score":0,"creation_date":1499158430,"post_id":44897773,"comment_id":76779920,"body_markdown":"Thats the whole code I forgot just the method head. MadProgrammer you are right. Thats my problem. I searching for way to avoid that the action listener called many times","body":"Thats the whole code I forgot just the method head. MadProgrammer you are right. Thats my problem. I searching for way to avoid that the action listener called many times"}],"owner":{"account_id":11090869,"reputation":5,"user_id":8142802,"accept_rate":40,"display_name":"ManuellsenDeve"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691509788,"creation_date":1499146967,"question_id":44897773,"body_markdown":"I have created a Singleton that extends from JDialog. I do that because I want to avoid that a User can&#39;t create as many as they want. I just want one. Now I know the Singleton is the problem.\r\n\r\n&gt; **Is there a better way without Singleton maybe with an example it would be great. Because I must do that for other MenuItem as well.**\r\n\r\n[Open the MenuItem First Time][1]\r\n\r\n[Open the MenuItem Second Time][2]\r\n\r\nThis is my Method which starts if the MenuItem is clicked.\r\n\r\n    JButton confirmBTN = new JButton(&quot;Confirm&quot;);\r\n        addComp(panel, confirmBTN, 0, 0, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE);\r\n\r\n        JButton closeBTN = new JButton(&quot;close&quot;);\r\n        addComp(panel, closeBTN, 1, 0, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE);\r\n\r\n\r\n        this.dialog.setTitle(&quot;show Manual&quot;);\r\n        this.dialog.setSize(200, 200);\r\n        this.dialog.setVisible(true);\r\n        this.dialog.setLocationRelativeTo(null);\r\n\r\n\r\n\r\n\r\n        dialog.add(panel);\r\n        dialog.pack();\r\n\r\n\r\nThat my Singleton\r\n\r\n    public class SingletonJDialog extends JDialog {\r\n    private static SingletonJDialog dialog;\r\n\r\n    private SingletonJDialog() {\r\n\r\n    }\r\n\r\n    public static SingletonJDialog getInstace() {\r\n\r\n        if (dialog == null) {\r\n            dialog = new SingletonJDialog();\r\n        }\r\n        return dialog;\r\n    }\r\n    }\r\n\r\nThat&#39;s how I get my instance.\r\n\r\n    private SingletonJDialog dialog = SingletonJDialog.getInstace();\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OAx4I.png\r\n  [2]: https://i.stack.imgur.com/XuAhs.png","title":"Avoid that JDialog adding Comp more then 1 Time?","body":"<p>I have created a Singleton that extends from JDialog. I do that because I want to avoid that a User can't create as many as they want. I just want one. Now I know the Singleton is the problem.</p>\n<blockquote>\n<p><strong>Is there a better way without Singleton maybe with an example it would be great. Because I must do that for other MenuItem as well.</strong></p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/OAx4I.png\" rel=\"nofollow noreferrer\">Open the MenuItem First Time</a></p>\n<p><a href=\"https://i.stack.imgur.com/XuAhs.png\" rel=\"nofollow noreferrer\">Open the MenuItem Second Time</a></p>\n<p>This is my Method which starts if the MenuItem is clicked.</p>\n<pre><code>JButton confirmBTN = new JButton(&quot;Confirm&quot;);\n    addComp(panel, confirmBTN, 0, 0, 1, 1, GridBagConstraints.WEST, GridBagConstraints.NONE);\n\n    JButton closeBTN = new JButton(&quot;close&quot;);\n    addComp(panel, closeBTN, 1, 0, 1, 1, GridBagConstraints.EAST, GridBagConstraints.NONE);\n\n\n    this.dialog.setTitle(&quot;show Manual&quot;);\n    this.dialog.setSize(200, 200);\n    this.dialog.setVisible(true);\n    this.dialog.setLocationRelativeTo(null);\n\n\n\n\n    dialog.add(panel);\n    dialog.pack();\n</code></pre>\n<p>That my Singleton</p>\n<pre><code>public class SingletonJDialog extends JDialog {\nprivate static SingletonJDialog dialog;\n\nprivate SingletonJDialog() {\n\n}\n\npublic static SingletonJDialog getInstace() {\n\n    if (dialog == null) {\n        dialog = new SingletonJDialog();\n    }\n    return dialog;\n}\n}\n</code></pre>\n<p>That's how I get my instance.</p>\n<pre><code>private SingletonJDialog dialog = SingletonJDialog.getInstace();\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":0,"creation_date":1664417146,"post_id":73889515,"comment_id":130468601,"body_markdown":"The documentation you&#39;ve included seems pretty clear on the subject. `&lt;? super Number&gt;` would apply to `Object`, as its a superclass of `Number`.","body":"The documentation you&#39;ve included seems pretty clear on the subject. <code>&lt;? super Number&gt;</code> would apply to <code>Object</code>, as its a superclass of <code>Number</code>."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1664417816,"post_id":73889515,"comment_id":130468670,"body_markdown":"&quot;`&lt;? super Number&gt;` is a lower bound that means any type ***that is Number*** or a super class&quot; See that part? It doesn&#39;t necessarily have to be a superclass. `? super B` could be `B`, in which case adding an `A` is not allowed.","body":"&quot;<code>&lt;? super Number&gt;</code> is a lower bound that means any type <b><i>that is Number</i></b> or a super class&quot; See that part? It doesn&#39;t necessarily have to be a superclass. <code>? super B</code> could be <code>B</code>, in which case adding an <code>A</code> is not allowed."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":1,"creation_date":1664420453,"post_id":73889515,"comment_id":130469039,"body_markdown":"@CryptoFool but adding an Object will not compile","body":"@CryptoFool but adding an Object will not compile"},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1664420536,"post_id":73889515,"comment_id":130469045,"body_markdown":"@Sweeper I understand that it can take B. But why can&#39;t it take A? I tried and it gives a compile error.","body":"@Sweeper I understand that it can take B. But why can&#39;t it take A? I tried and it gives a compile error."},{"owner":{"account_id":248321,"reputation":62658,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":4,"creation_date":1664420945,"post_id":73889515,"comment_id":130469096,"body_markdown":"It does answer the question. I and others repeatedly explained to you in the comments why it answers the question. This is not a discussion forum; &quot;I need the same material explained in a different way in order to understand it&quot; is not a reason to have a separate question.","body":"It does answer the question. I and others repeatedly explained to you in the comments why it answers the question. This is not a discussion forum; &quot;I need the same material explained in a different way in order to understand it&quot; is not a reason to have a separate question."},{"owner":{"account_id":248321,"reputation":62658,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":4,"creation_date":1664421001,"post_id":73889515,"comment_id":130469101,"body_markdown":"&quot;I understand that it can take B. But why can&#39;t it take A?&quot; **For the reason carefully and repeatedly explained in the duplicate that was linked to you last time, and repeatedly re-stated in the comment discussion that ensued there**.","body":"&quot;I understand that it can take B. But why can&#39;t it take A?&quot; <b>For the reason carefully and repeatedly explained in the duplicate that was linked to you last time, and repeatedly re-stated in the comment discussion that ensued there</b>."}],"answers":[{"comments":[{"owner":{"account_id":248321,"reputation":62658,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":2,"creation_date":1664417611,"post_id":73889570,"comment_id":130468646,"body_markdown":"&quot;So it&#39;s a list of absolutely anything, there&#39;s absolutely nothing useful about this list.&quot; A list of `Object` is useful; it stores stuff. What would be useless is the type bound, if it worked that way (since it would be equivalent to just writing `List` without any `&lt;&gt;`).","body":"&quot;So it&#39;s a list of absolutely anything, there&#39;s absolutely nothing useful about this list.&quot; A list of <code>Object</code> is useful; it stores stuff. What would be useless is the type bound, if it worked that way (since it would be equivalent to just writing <code>List</code> without any <code>&lt;&gt;</code>)."},{"owner":{"account_id":248321,"reputation":62658,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":2,"creation_date":1664417771,"post_id":73889570,"comment_id":130468664,"body_markdown":"BTW: OP was already linked to the canonical duplicate for this question a couple of weeks ago, got in a protracted argument, insisted the canonical duplicate meant the opposite of what it actually said (seemingly due to the misconception you describe here), and eventually that question was deleted.","body":"BTW: OP was already linked to the canonical duplicate for this question a couple of weeks ago, got in a protracted argument, insisted the canonical duplicate meant the opposite of what it actually said (seemingly due to the misconception you describe here), and eventually that question was deleted."},{"owner":{"account_id":248321,"reputation":62658,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":3,"creation_date":1664420880,"post_id":73889570,"comment_id":130469090,"body_markdown":"I am not a moderator at all. I am voting the close the question, as part of a democratic process, because it is supposed to be closed according to the site standards. The linked duplicate explains the answer, and we went through many more comments trying to explain it to you as well. To be quite honest, you come across as refusing to accept explanations, and instead trying to say that the compiler, along with everyone else is wrong and you are right, based on your misunderstanding of what it says in a book (which actually agrees with us and with the compiler).","body":"I am not a moderator at all. I am voting the close the question, as part of a democratic process, because it is supposed to be closed according to the site standards. The linked duplicate explains the answer, and we went through many more comments trying to explain it to you as well. To be quite honest, you come across as refusing to accept explanations, and instead trying to say that the compiler, along with everyone else is wrong and you are right, based on your misunderstanding of what it says in a book (which actually agrees with us and with the compiler)."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1664421389,"post_id":73889570,"comment_id":130469137,"body_markdown":"@rzwitserloot Thanks for your reply. I am trying hard to understand before the question is closed and deleted by some people. Are you saying that List&lt;B&gt;.add(new B()),  List&lt;A&gt;.add(new B()), List&lt;Object&gt;.add(new B()), works?  from your sentence - &quot;Whatever the caller picked - if they gave you a List&lt;B&gt;, it works. If it&#39;s a List&lt;A&gt;, works. List&lt;Object&gt;&quot;","body":"@rzwitserloot Thanks for your reply. I am trying hard to understand before the question is closed and deleted by some people. Are you saying that List&lt;B&gt;.add(new B()),  List&lt;A&gt;.add(new B()), List&lt;Object&gt;.add(new B()), works?  from your sentence - &quot;Whatever the caller picked - if they gave you a List&lt;B&gt;, it works. If it&#39;s a List&lt;A&gt;, works. List&lt;Object&gt;&quot;"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1664421741,"post_id":73889570,"comment_id":130469174,"body_markdown":"Yes, of course that would work. Trivially. `Object c = new B();` works, and obviously `List&lt;Object&gt; objs = ...; objs.add(c);` would have to work, so what possible point would there be for `List&lt;Object&gt; objs = ...; objs.add(new B());` to be illegal?","body":"Yes, of course that would work. Trivially. <code>Object c = new B();</code> works, and obviously <code>List&lt;Object&gt; objs = ...; objs.add(c);</code> would have to work, so what possible point would there be for <code>List&lt;Object&gt; objs = ...; objs.add(new B());</code> to be illegal?"},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1664494865,"post_id":73889570,"comment_id":130491154,"body_markdown":"@rzwitserloot `List&lt;? super B&gt; aList = new ArrayList&lt;A&gt;(); aList.add(new A());` I am surprised that even if we have an `ArrayList&lt;A&gt;` we cannot add an `A` to it? This too does not compile.","body":"@rzwitserloot <code>List&lt;? super B&gt; aList = new ArrayList&lt;A&gt;(); aList.add(new A());</code> I am surprised that even if we have an <code>ArrayList&lt;A&gt;</code> we cannot add an <code>A</code> to it? This too does not compile."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1664501000,"post_id":73889570,"comment_id":130491916,"body_markdown":"You don&#39;t have an `ArrayList&lt;A&gt;`. You have an expression of type `List&lt;? super B&gt;`. The __compiler__ does not know it&#39;s _currently_ pointing at an `ArrayList&lt;A&gt;`.","body":"You don&#39;t have an <code>ArrayList&lt;A&gt;</code>. You have an expression of type <code>List&lt;? super B&gt;</code>. The <b>compiler</b> does not know it&#39;s <i>currently</i> pointing at an <code>ArrayList&lt;A&gt;</code>."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1664815979,"post_id":73889570,"comment_id":130552584,"body_markdown":"@rzwitserloot I am still puzzled by the statement &quot;The compiler does not know it&#39;s currently pointing at an ArrayList&lt;A&gt;.&quot; We are assigning an `ArrayList&lt;A&gt;` to aList which is a `List&lt;? super B&gt;`. It seems to me the compiler should know.","body":"@rzwitserloot I am still puzzled by the statement &quot;The compiler does not know it&#39;s currently pointing at an ArrayList&lt;A&gt;.&quot; We are assigning an <code>ArrayList&lt;A&gt;</code> to aList which is a <code>List&lt;? super B&gt;</code>. It seems to me the compiler should know."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1664844735,"post_id":73889570,"comment_id":130559067,"body_markdown":"@rzwitserloot Does `List&lt;? super B&gt;` means every member should be the same (all As, OR all Bs, OR all Objects) when it is created?","body":"@rzwitserloot Does <code>List&lt;? super B&gt;</code> means every member should be the same (all As, OR all Bs, OR all Objects) when it is created?"},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1664845174,"post_id":73889570,"comment_id":130559131,"body_markdown":"But the compiler knows that we are only adding an A to a List&lt;A&gt; yet it disallowed it!","body":"But the compiler knows that we are only adding an A to a List&lt;A&gt; yet it disallowed it!"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1664848380,"post_id":73889570,"comment_id":130559550,"body_markdown":"@likejudo you seem like you don&#39;t understand the difference between compile-time and write-time. `List&lt;? super B&gt;` is a variable type. You can&#39;t make such a thing. You can _assign_ a `List&lt;B&gt;` to such a variable, or a `List&lt;SomeParentOfB&gt;`, or even a `List&lt;Object&gt;`. Given the other info that you just keep getting in fights, I don&#39;t know how to explain this any clearer.","body":"@likejudo you seem like you don&#39;t understand the difference between compile-time and write-time. <code>List&lt;? super B&gt;</code> is a variable type. You can&#39;t make such a thing. You can <i>assign</i> a <code>List&lt;B&gt;</code> to such a variable, or a <code>List&lt;SomeParentOfB&gt;</code>, or even a <code>List&lt;Object&gt;</code>. Given the other info that you just keep getting in fights, I don&#39;t know how to explain this any clearer."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1691509228,"post_id":73889570,"comment_id":135499986,"body_markdown":"@rzwitserloot What I understood from your explanation is: \nthe wildcard just refers to the type of element in the Array. It does not mean one can add the wildcard type to the array.","body":"@rzwitserloot What I understood from your explanation is:  the wildcard just refers to the type of element in the Array. It does not mean one can add the wildcard type to the array."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1691509248,"post_id":73889570,"comment_id":135499995,"body_markdown":"@rzwitserloot ...continued In fact, one can only add descendants of the type (including itself, in this case, &#39;B&#39;).","body":"@rzwitserloot ...continued In fact, one can only add descendants of the type (including itself, in this case, &#39;B&#39;)."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691517089,"post_id":73889570,"comment_id":135501421,"body_markdown":"No, the compiler does not keep track of what you last assigned to it. Because that&#39;s mostly pointless - in this academic code, sure, but imagine instead we have: `public List&lt;? super B&gt; makeAList() { return new ArrayList&lt;A&gt;(); }` and we write `List&lt;? super B&gt; = makeAList();` - if the compiler still &#39;tracks&#39; that it really is an `ArrayList&lt;A&gt;` so just allow `List&lt;? super B&gt; list = makeAList(); list.add(new A())` - then what happens if the author of `makeAList` updates their code and releases a new version that now makes a `new ArrayList&lt;B&gt;`?","body":"No, the compiler does not keep track of what you last assigned to it. Because that&#39;s mostly pointless - in this academic code, sure, but imagine instead we have: <code>public List&lt;? super B&gt; makeAList() { return new ArrayList&lt;A&gt;(); }</code> and we write <code>List&lt;? super B&gt; = makeAList();</code> - if the compiler still &#39;tracks&#39; that it really is an <code>ArrayList&lt;A&gt;</code> so just allow <code>List&lt;? super B&gt; list = makeAList(); list.add(new A())</code> - then what happens if the author of <code>makeAList</code> updates their code and releases a new version that now makes a <code>new ArrayList&lt;B&gt;</code>?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691517141,"post_id":73889570,"comment_id":135501428,"body_markdown":"The whole point of being explicit about having to write types (for local variables, but _especially_ for method return and param types) is that you reserve the right to change implementation details later as long as the types still work out. If you want the compiler to infer everything, there is no point to having a language where you write types explicitly.","body":"The whole point of being explicit about having to write types (for local variables, but <i>especially</i> for method return and param types) is that you reserve the right to change implementation details later as long as the types still work out. If you want the compiler to infer everything, there is no point to having a language where you write types explicitly."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":15,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1664417446,"creation_date":1664417446,"answer_id":73889570,"question_id":73889515,"body_markdown":"Because you&#39;re thinking about what generics means in the wrong way.\r\n\r\n`List&lt;? super B&gt;` does __not__ mean: &quot;A list that contains Bs or anything that is a supertype of B&quot;.\r\n\r\nBecause that would be __utterly useless__. `Object` is a supertype of B. All things are objects. So it&#39;s a list of absolutely anything, there&#39;s absolutely nothing useful about this list.\r\n\r\nNo, what `List&lt;? super B&gt;` means: There is a type. A specific type. It&#39;s just.. _this_ code doesn&#39;t know what it is. We do know that it is either B or some supertype of B. (So, it&#39;s B, or A, or Object, we don&#39;t know. The caller picked one of these 3 types). This list is constrained; it cannot contain anything that is _not_ this unknown type.\r\n\r\nThe point is, you can do this:\r\n\r\n```\r\nList&lt;B&gt; bees = new ArrayList&lt;B&gt;();\r\nList&lt;? super B&gt; list = bees; // legal!\r\nlist.add(new A()); // um...\r\nB bee = bees.get(0); // oh no!\r\n```\r\n\r\nSee how this goes wrong? There&#39;s only one list here - `bees` and `list` are both just variables that refer to the exacrt same list. So you if you call `list.add`, you&#39;re modifying the one list that both `bees` and `list` are pointing at, so you also add it to `bees`.\r\n\r\nSo what&#39;s the point of `&lt;? super B&gt;`?\r\n\r\nYou __can__ call `.add(new B())`. Because that works for __all legal choices__. Whatever the caller picked - if they gave you a `List&lt;B&gt;`, it works. If it&#39;s a `List&lt;A&gt;`, works. `List&lt;Object&gt;`? Still acceptable.\r\n\r\nNo other types fit the bill for `&lt;? super B&gt;`, so we&#39;ve exhausted the options: They all &#39;work out&#39;.\r\n","title":"Does wildcard &lt;? super Number&gt; refer to a superclass like Object or a subtype like Integer?","body":"<p>Because you're thinking about what generics means in the wrong way.</p>\n<p><code>List&lt;? super B&gt;</code> does <strong>not</strong> mean: &quot;A list that contains Bs or anything that is a supertype of B&quot;.</p>\n<p>Because that would be <strong>utterly useless</strong>. <code>Object</code> is a supertype of B. All things are objects. So it's a list of absolutely anything, there's absolutely nothing useful about this list.</p>\n<p>No, what <code>List&lt;? super B&gt;</code> means: There is a type. A specific type. It's just.. <em>this</em> code doesn't know what it is. We do know that it is either B or some supertype of B. (So, it's B, or A, or Object, we don't know. The caller picked one of these 3 types). This list is constrained; it cannot contain anything that is <em>not</em> this unknown type.</p>\n<p>The point is, you can do this:</p>\n<pre><code>List&lt;B&gt; bees = new ArrayList&lt;B&gt;();\nList&lt;? super B&gt; list = bees; // legal!\nlist.add(new A()); // um...\nB bee = bees.get(0); // oh no!\n</code></pre>\n<p>See how this goes wrong? There's only one list here - <code>bees</code> and <code>list</code> are both just variables that refer to the exacrt same list. So you if you call <code>list.add</code>, you're modifying the one list that both <code>bees</code> and <code>list</code> are pointing at, so you also add it to <code>bees</code>.</p>\n<p>So what's the point of <code>&lt;? super B&gt;</code>?</p>\n<p>You <strong>can</strong> call <code>.add(new B())</code>. Because that works for <strong>all legal choices</strong>. Whatever the caller picked - if they gave you a <code>List&lt;B&gt;</code>, it works. If it's a <code>List&lt;A&gt;</code>, works. <code>List&lt;Object&gt;</code>? Still acceptable.</p>\n<p>No other types fit the bill for <code>&lt;? super B&gt;</code>, so we've exhausted the options: They all 'work out'.</p>\n"}],"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":7,"up_vote_count":2,"closed_date":1664425963,"answer_count":1,"score":-5,"last_activity_date":1691509406,"creation_date":1664416795,"question_id":73889515,"body_markdown":"This was closed as being a duplicate of the PECS question.\r\nPECS is just a mnemonic that does more harm than good because people just memorize it without really understanding the deeper issues.\r\nPlease reopen.\r\n\r\n**Update**:\r\n\r\nWhat I understood from @rzswitzerloot&#39;s explanation below is: the wildcard just refers to the type of element in the Array.\r\nIt does not mean one can add the wildcard type to the array - in fact, one can only add descendants of the type (including itself, in this case, &#39;B&#39;).\r\n\r\n---------\r\nI am confused by whether wildcards `&lt;? super Number&gt;` refers to a superclass like `Object` or a subtype like `Integer`. In &quot;Java OCP 17 Developer Complete Study Guide&quot; by Jeanne Boyarsky and Scott Selikoff, (Chapter 9 Collections and Generics)\r\n\r\n&gt; Generics allow you to specify wildcards. &lt;?&gt; is an unbounded wildcard\r\n&gt; that means any type. &lt;? extends Object&gt; is an upper bound that means\r\n&gt; any type that is Object or extends it. &lt;? extends MyInterface&gt; means\r\n&gt; any type that implements MyInterface. \r\n&gt; **&lt;? super Number&gt; is a lower bound that means any type that is Number or a super class.**  A compiler error results from code that attempts\r\n&gt; to add an item in a list with an unbounded or upper-bounded wildcard\r\n\r\nA **super class** as I understand, is a *parent* of Number.\r\nBut then, why cannot one do this?\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Bewildered {\r\n        static class A {}\r\n        static class B extends A {}\r\n        static class C extends B {}\r\n    \r\n        public static void main(String[] args) {\r\n            List&lt;? super B&gt; listBs = new ArrayList&lt;&gt;();\r\n            listBs.add(new A());\r\n        }\r\n    }\r\n\r\ncompile error:\r\n\r\n    java: incompatible types: Bewildered.A cannot be converted to capture#1 of ? super Bewildered.B\r\n","title":"Does wildcard &lt;? super Number&gt; refer to a superclass like Object or a subtype like Integer?","body":"<p>This was closed as being a duplicate of the PECS question.\nPECS is just a mnemonic that does more harm than good because people just memorize it without really understanding the deeper issues.\nPlease reopen.</p>\n<p><strong>Update</strong>:</p>\n<p>What I understood from @rzswitzerloot's explanation below is: the wildcard just refers to the type of element in the Array.\nIt does not mean one can add the wildcard type to the array - in fact, one can only add descendants of the type (including itself, in this case, 'B').</p>\n<hr />\n<p>I am confused by whether wildcards <code>&lt;? super Number&gt;</code> refers to a superclass like <code>Object</code> or a subtype like <code>Integer</code>. In &quot;Java OCP 17 Developer Complete Study Guide&quot; by Jeanne Boyarsky and Scott Selikoff, (Chapter 9 Collections and Generics)</p>\n<blockquote>\n<p>Generics allow you to specify wildcards. &lt;?&gt; is an unbounded wildcard\nthat means any type. &lt;? extends Object&gt; is an upper bound that means\nany type that is Object or extends it. &lt;? extends MyInterface&gt; means\nany type that implements MyInterface.\n<strong>&lt;? super Number&gt; is a lower bound that means any type that is Number or a super class.</strong>  A compiler error results from code that attempts\nto add an item in a list with an unbounded or upper-bounded wildcard</p>\n</blockquote>\n<p>A <strong>super class</strong> as I understand, is a <em>parent</em> of Number.\nBut then, why cannot one do this?</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Bewildered {\n    static class A {}\n    static class B extends A {}\n    static class C extends B {}\n\n    public static void main(String[] args) {\n        List&lt;? super B&gt; listBs = new ArrayList&lt;&gt;();\n        listBs.add(new A());\n    }\n}\n</code></pre>\n<p>compile error:</p>\n<pre><code>java: incompatible types: Bewildered.A cannot be converted to capture#1 of ? super Bewildered.B\n</code></pre>\n"},{"tags":["java","gradle","libgdx","desktop-application"],"comments":[{"owner":{"account_id":6778270,"reputation":6791,"user_id":5288316,"accept_rate":79,"display_name":"Nicolas"},"score":0,"creation_date":1597946821,"post_id":63503350,"comment_id":112306143,"body_markdown":"What Java version are you using?","body":"What Java version are you using?"},{"owner":{"account_id":19336142,"reputation":371,"user_id":14136696,"display_name":"Noemi"},"score":0,"creation_date":1597997167,"post_id":63503350,"comment_id":112320023,"body_markdown":"I&#39;m using the 13.0.2","body":"I&#39;m using the 13.0.2"},{"owner":{"account_id":6778270,"reputation":6791,"user_id":5288316,"accept_rate":79,"display_name":"Nicolas"},"score":0,"creation_date":1598126692,"post_id":63503350,"comment_id":112358529,"body_markdown":"Oh I missed that. LibGDX isn&#39;t compiled against java 13 so there might be some binary incompatibilities. Can you try with Java 11 or 8?","body":"Oh I missed that. LibGDX isn&#39;t compiled against java 13 so there might be some binary incompatibilities. Can you try with Java 11 or 8?"},{"owner":{"account_id":19336142,"reputation":371,"user_id":14136696,"display_name":"Noemi"},"score":1,"creation_date":1598287796,"post_id":63503350,"comment_id":112403418,"body_markdown":"I&#39;ve tried and it worked, thank you!","body":"I&#39;ve tried and it worked, thank you!"}],"answers":[{"comments":[{"owner":{"account_id":19336142,"reputation":371,"user_id":14136696,"display_name":"Noemi"},"score":1,"creation_date":1598287919,"post_id":63548566,"comment_id":112403484,"body_markdown":"I&#39;ve already had the latest version of Gradle, as I wrote in the question. At the end I&#39;ve used an older version of Java and it worked. Thank you!","body":"I&#39;ve already had the latest version of Gradle, as I wrote in the question. At the end I&#39;ve used an older version of Java and it worked. Thank you!"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1598287958,"post_id":63548566,"comment_id":112403504,"body_markdown":"Yes, but by default the LibGDX project uses a gradle wrapper.","body":"Yes, but by default the LibGDX project uses a gradle wrapper."},{"owner":{"account_id":15495695,"reputation":582,"user_id":14634210,"display_name":"The epic face 007"},"score":1,"creation_date":1640114365,"post_id":63548566,"comment_id":124517768,"body_markdown":"Id like to add that you can know the different version of gradle here: https://services.gradle.org/distributions/","body":"Id like to add that you can know the different version of gradle here: <a href=\"https://services.gradle.org/distributions/\" rel=\"nofollow noreferrer\">services.gradle.org/distributions</a>"}],"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"comment_count":3,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1598195463,"creation_date":1598195463,"answer_id":63548566,"question_id":63503350,"body_markdown":"This is not a LibGDX issue. Gradle 5 is incompatible with Java 13. You either need to update Gradle (the wrapped version in your project) to Gradle 6 or later, or you need to use a lower version of the JRE.\r\n\r\nTo update the wrapped gradle, go to `gradle/wrapper/gradle-wrapper-properties` in your project and update the version number. I&#39;m using 6.1.1.\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-6.1.1-all.zip\r\n\r\nIf you have an older LibGDX project, you might have to modify the `build.gradle` file in the `android` module to be compatible with Gradle 6. You can copy-paste to replace the `copyAndroidNatives` task with [the one here][1].\r\n\r\n\r\n  [1]: https://github.com/libgdx/libgdx/blob/master/extensions/gdx-setup/res/com/badlogic/gdx/setup/resources/android/build.gradle","title":"General error during semantic analysis: Unsupported class file major version 57","body":"<p>This is not a LibGDX issue. Gradle 5 is incompatible with Java 13. You either need to update Gradle (the wrapped version in your project) to Gradle 6 or later, or you need to use a lower version of the JRE.</p>\n<p>To update the wrapped gradle, go to <code>gradle/wrapper/gradle-wrapper-properties</code> in your project and update the version number. I'm using 6.1.1.</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-6.1.1-all.zip\n</code></pre>\n<p>If you have an older LibGDX project, you might have to modify the <code>build.gradle</code> file in the <code>android</code> module to be compatible with Gradle 6. You can copy-paste to replace the <code>copyAndroidNatives</code> task with <a href=\"https://github.com/libgdx/libgdx/blob/master/extensions/gdx-setup/res/com/badlogic/gdx/setup/resources/android/build.gradle\" rel=\"noreferrer\">the one here</a>.</p>\n"},{"tags":[],"owner":{"account_id":19939271,"reputation":417,"user_id":14611309,"display_name":"Jenish MS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621662579,"creation_date":1621662579,"answer_id":67646505,"question_id":63503350,"body_markdown":"Check gradle version and bundle version using the following link\r\nLink https://developer.android.com/studio/releases/gradle-plugin#updating-gradle\r\n\r\nIf you want to upgrade android/gradle/build.gradle change dependencies classpath &#39;com.android.tools.build:gradle:**[latest version]**&#39;","title":"General error during semantic analysis: Unsupported class file major version 57","body":"<p>Check gradle version and bundle version using the following link\nLink <a href=\"https://developer.android.com/studio/releases/gradle-plugin#updating-gradle\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/releases/gradle-plugin#updating-gradle</a></p>\n<p>If you want to upgrade android/gradle/build.gradle change dependencies classpath 'com.android.tools.build:gradle:<strong>[latest version]</strong>'</p>\n"},{"comments":[{"owner":{"account_id":9566511,"reputation":461,"user_id":7105635,"display_name":"Ejeh"},"score":1,"creation_date":1637284719,"post_id":70028678,"comment_id":123791934,"body_markdown":"Unable to start the daemon process. This problem might be caused by incorrect configuration of the daemon. For example, an unrecognized jvm option is used.","body":"Unable to start the daemon process. This problem might be caused by incorrect configuration of the daemon. For example, an unrecognized jvm option is used."},{"owner":{"account_id":9566511,"reputation":461,"user_id":7105635,"display_name":"Ejeh"},"score":1,"creation_date":1637284741,"post_id":70028678,"comment_id":123791938,"body_markdown":"react native Unrecognized option: - Error: Could not create the Java Virtual Machine. Error: A fatal exception has occurred. Program will exit.","body":"react native Unrecognized option: - Error: Could not create the Java Virtual Machine. Error: A fatal exception has occurred. Program will exit."},{"owner":{"account_id":9566511,"reputation":461,"user_id":7105635,"display_name":"Ejeh"},"score":1,"creation_date":1637284778,"post_id":70028678,"comment_id":123791941,"body_markdown":"Unrecognized option: - Error: Could not create the Java Virtual Machine. Error: A fatal exception has occurred. Program will exit.","body":"Unrecognized option: - Error: Could not create the Java Virtual Machine. Error: A fatal exception has occurred. Program will exit."},{"owner":{"account_id":2870347,"reputation":355,"user_id":2463843,"accept_rate":62,"display_name":"Marc Pope"},"score":0,"creation_date":1644523155,"post_id":70028678,"comment_id":125636323,"body_markdown":"This worked! using java 17.0.2 2022-01-18 LTS on Mac OS","body":"This worked! using java 17.0.2 2022-01-18 LTS on Mac OS"},{"owner":{"account_id":1677672,"reputation":472,"user_id":3705709,"accept_rate":80,"display_name":"David"},"score":0,"creation_date":1679373736,"post_id":70028678,"comment_id":133706004,"body_markdown":"Update gradle version to 7.3 helped me","body":"Update gradle version to 7.3 helped me"},{"owner":{"account_id":9566511,"reputation":461,"user_id":7105635,"display_name":"Ejeh"},"score":0,"creation_date":1679561619,"post_id":70028678,"comment_id":133744589,"body_markdown":"which os are you using?","body":"which os are you using?"}],"tags":[],"owner":{"account_id":9566511,"reputation":461,"user_id":7105635,"display_name":"Ejeh"},"comment_count":6,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1637284608,"creation_date":1637284608,"answer_id":70028678,"question_id":63503350,"body_markdown":"&gt; startup failed:\r\n  General error during semantic analysis: Unsupported class file major version 61\r\n\r\nhow to fix this react native issues \r\nJAVA JDK 17\r\n\r\nGo to the android/ directory of your react-native project\r\n\r\nCreate a file called **local.properties** with this line:\r\n\r\n&gt; sdk.dir=C\\:\\\\Android\\\\sdk\r\n\r\nGOTO\r\n**android\\gradle\\wrapper\\gradle-wrapper.properties**\r\n\r\nCHANGE\r\n\r\n&gt; distributionUrl=https\\://services.gradle.org/distributions/gradle-6.7-all.zip\r\n\r\nTO\r\n\r\n&gt; distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3-all.zip\r\n\r\nGOTO\r\n\r\n&gt; android\\gradle.properties\r\nadd this line\r\n\r\n    org.gradle.jvmargs=-Xmx1536M --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED\r\n\r\n","title":"General error during semantic analysis: Unsupported class file major version 57","body":"<blockquote>\n<p>startup failed:\nGeneral error during semantic analysis: Unsupported class file major version 61</p>\n</blockquote>\n<p>how to fix this react native issues\nJAVA JDK 17</p>\n<p>Go to the android/ directory of your react-native project</p>\n<p>Create a file called <strong>local.properties</strong> with this line:</p>\n<blockquote>\n<p>sdk.dir=C:\\Android\\sdk</p>\n</blockquote>\n<p>GOTO\n<strong>android\\gradle\\wrapper\\gradle-wrapper.properties</strong></p>\n<p>CHANGE</p>\n<blockquote>\n<p>distributionUrl=https://services.gradle.org/distributions/gradle-6.7-all.zip</p>\n</blockquote>\n<p>TO</p>\n<blockquote>\n<p>distributionUrl=https://services.gradle.org/distributions/gradle-7.3-all.zip</p>\n</blockquote>\n<p>GOTO</p>\n<blockquote>\n<p>android\\gradle.properties\nadd this line</p>\n</blockquote>\n<pre><code>org.gradle.jvmargs=-Xmx1536M --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2814311,"reputation":2660,"user_id":2918720,"display_name":"KhogaEslam"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655026079,"creation_date":1653246079,"answer_id":72340515,"question_id":63503350,"body_markdown":"If you&#39;re using eclipse, go to \r\n\r\n    Eclipse &gt; Preferences &gt; Gradle\r\n\r\nUpdate `Java home` to point to Java home location ","title":"General error during semantic analysis: Unsupported class file major version 57","body":"<p>If you're using eclipse, go to</p>\n<pre><code>Eclipse &gt; Preferences &gt; Gradle\n</code></pre>\n<p>Update <code>Java home</code> to point to Java home location</p>\n"},{"tags":[],"owner":{"account_id":13012907,"reputation":3760,"user_id":9405238,"display_name":"Doan Bui"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1655725165,"creation_date":1655717267,"answer_id":72684864,"question_id":63503350,"body_markdown":"This problem occurred when I run my old `Flutter` project that I coded 2 years ago. I think with Android project will also fix in the same way. I&#39;m use `MacOS` and `Android Studio Bumblebee`.\r\n\r\nFirst, need to move to the `android` folder and check gradle version:\r\n\r\n    cd android \r\n    ./gradlew --version\r\n[![enter image description here][1]][1]\r\n\r\nIt show Gradle version `6.7.1` and you need attention to the JVM line, and my JDK version is 15.0.2. It is too new for this project. So you must to `downgrading` from open jdk version to old version or `upgrade` Gradle version in `gradle/wrapper/gradle-wrapper.properties` to new version.\r\n\r\nIf you downgrade JDK version, you can download from [this][2]. In my case, I downgraded from Java SE 15 to Java SE 11.\r\n\r\nAfter I open Android of Flutter project\r\n\r\n[![enter image description here][3]][3] \r\n\r\nGo to `Preferences-&gt;Build, Execution, Deployment → Build Tools → Gradle → ` and choose JDK version 11.\r\n[![enter image description here][4]][4]\r\n\r\nGo to Build -&gt; Clean Project -&gt; Rebuild Project.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nGo to `Terminal` run `java --version`, if it still show JE version 15 then You must set JAVA_HOME before.\r\n\r\nYou only need to add the following to your `.bash_profile` or `.zshrc`\r\n\r\n    export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.15.jdk/Contents/Home\r\n\r\nSave and go to `android` folder and run again\r\n\r\n    ./gradlew --version\r\n\r\nIt will show JDK version 11 correct.\r\n\r\n[![enter image description here][6]][6]\r\n\r\nFinally, run `flutter run`.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Xx93F.png\r\n  [2]: https://www.oracle.com/java/technologies/javase/jdk11-archive-downloads.html\r\n  [3]: https://i.stack.imgur.com/lP1mF.png\r\n  [4]: https://i.stack.imgur.com/9H0zb.png\r\n  [5]: https://i.stack.imgur.com/fd8nu.png\r\n  [6]: https://i.stack.imgur.com/kZl4l.png","title":"General error during semantic analysis: Unsupported class file major version 57","body":"<p>This problem occurred when I run my old <code>Flutter</code> project that I coded 2 years ago. I think with Android project will also fix in the same way. I'm use <code>MacOS</code> and <code>Android Studio Bumblebee</code>.</p>\n<p>First, need to move to the <code>android</code> folder and check gradle version:</p>\n<pre><code>cd android \n./gradlew --version\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Xx93F.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Xx93F.png\" alt=\"enter image description here\" /></a></p>\n<p>It show Gradle version <code>6.7.1</code> and you need attention to the JVM line, and my JDK version is 15.0.2. It is too new for this project. So you must to <code>downgrading</code> from open jdk version to old version or <code>upgrade</code> Gradle version in <code>gradle/wrapper/gradle-wrapper.properties</code> to new version.</p>\n<p>If you downgrade JDK version, you can download from <a href=\"https://www.oracle.com/java/technologies/javase/jdk11-archive-downloads.html\" rel=\"noreferrer\">this</a>. In my case, I downgraded from Java SE 15 to Java SE 11.</p>\n<p>After I open Android of Flutter project</p>\n<p><a href=\"https://i.stack.imgur.com/lP1mF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lP1mF.png\" alt=\"enter image description here\" /></a></p>\n<p>Go to <code>Preferences-&gt;Build, Execution, Deployment → Build Tools → Gradle → </code> and choose JDK version 11.\n<a href=\"https://i.stack.imgur.com/9H0zb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9H0zb.png\" alt=\"enter image description here\" /></a></p>\n<p>Go to Build -&gt; Clean Project -&gt; Rebuild Project.</p>\n<p><a href=\"https://i.stack.imgur.com/fd8nu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/fd8nu.png\" alt=\"enter image description here\" /></a></p>\n<p>Go to <code>Terminal</code> run <code>java --version</code>, if it still show JE version 15 then You must set JAVA_HOME before.</p>\n<p>You only need to add the following to your <code>.bash_profile</code> or <code>.zshrc</code></p>\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.15.jdk/Contents/Home\n</code></pre>\n<p>Save and go to <code>android</code> folder and run again</p>\n<pre><code>./gradlew --version\n</code></pre>\n<p>It will show JDK version 11 correct.</p>\n<p><a href=\"https://i.stack.imgur.com/kZl4l.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kZl4l.png\" alt=\"enter image description here\" /></a></p>\n<p>Finally, run <code>flutter run</code>.</p>\n"},{"tags":[],"owner":{"account_id":6073790,"reputation":3697,"user_id":4741746,"accept_rate":86,"display_name":"Sushant Gosavi"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660741459,"creation_date":1660741459,"answer_id":73388983,"question_id":63503350,"body_markdown":"I have downgraded gradle file thats why this error happens so finally I have to change Gradle wrapper file From \r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.2-all.zip\r\n\r\nto \r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-all.zip","title":"General error during semantic analysis: Unsupported class file major version 57","body":"<p>I have downgraded gradle file thats why this error happens so finally I have to change Gradle wrapper file From</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.2-all.zip\n</code></pre>\n<p>to</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-all.zip\n</code></pre>\n"},{"tags":[],"owner":{"account_id":119615,"reputation":11742,"user_id":311420,"accept_rate":87,"display_name":"Raymond Chenon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691509221,"creation_date":1691509221,"answer_id":76861134,"question_id":63503350,"body_markdown":"Java(13.0.2) and Gradle(6.6) are not compatible.\r\n\r\n## Fix\r\nYou can either :\r\n- change your JDK version to 14. Path to environment variable `JAVA_HOME`\r\n- or keep your JDK to 13.x and change your Gradle version to 6.0 . In your project `gradle/wrapper/gradle-wrapper.properties` , change the line to `distributionUrl=https\\://services.gradle.org/distributions/gradle-6.0.1-bin.zip` . [Available Gradle distributions][1]\r\n\r\n\r\nHow to know the compatible versions ?\r\n\r\n## Table Java Compatibility\r\n\r\nCheck this https://docs.gradle.org/current/userguide/compatibility.html\r\n\r\n|Java version| First Gradle version to support it|\r\n|------------|-----------|\r\n|8| 2.0|\r\n|9|4.3|\r\n|10|4.7|\r\n|11|5.0|\r\n|12|5.4|\r\n|13|6.0|\r\n|14|6.3|\r\n|15|6.7|\r\n|16|7.0|\r\n|17|7.3|\r\n|18|7.5|\r\n|19|7.6|\r\n|20|8.1 ⚠|\r\n\r\n\r\n  [1]: https://services.gradle.org/distributions/","title":"General error during semantic analysis: Unsupported class file major version 57","body":"<p>Java(13.0.2) and Gradle(6.6) are not compatible.</p>\n<h2>Fix</h2>\n<p>You can either :</p>\n<ul>\n<li>change your JDK version to 14. Path to environment variable <code>JAVA_HOME</code></li>\n<li>or keep your JDK to 13.x and change your Gradle version to 6.0 . In your project <code>gradle/wrapper/gradle-wrapper.properties</code> , change the line to <code>distributionUrl=https\\://services.gradle.org/distributions/gradle-6.0.1-bin.zip</code> . <a href=\"https://services.gradle.org/distributions/\" rel=\"nofollow noreferrer\">Available Gradle distributions</a></li>\n</ul>\n<p>How to know the compatible versions ?</p>\n<h2>Table Java Compatibility</h2>\n<p>Check this <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/compatibility.html</a></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Java version</th>\n<th>First Gradle version to support it</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>8</td>\n<td>2.0</td>\n</tr>\n<tr>\n<td>9</td>\n<td>4.3</td>\n</tr>\n<tr>\n<td>10</td>\n<td>4.7</td>\n</tr>\n<tr>\n<td>11</td>\n<td>5.0</td>\n</tr>\n<tr>\n<td>12</td>\n<td>5.4</td>\n</tr>\n<tr>\n<td>13</td>\n<td>6.0</td>\n</tr>\n<tr>\n<td>14</td>\n<td>6.3</td>\n</tr>\n<tr>\n<td>15</td>\n<td>6.7</td>\n</tr>\n<tr>\n<td>16</td>\n<td>7.0</td>\n</tr>\n<tr>\n<td>17</td>\n<td>7.3</td>\n</tr>\n<tr>\n<td>18</td>\n<td>7.5</td>\n</tr>\n<tr>\n<td>19</td>\n<td>7.6</td>\n</tr>\n<tr>\n<td>20</td>\n<td>8.1 ⚠</td>\n</tr>\n</tbody>\n</table>\n</div>"}],"owner":{"account_id":19336142,"reputation":371,"user_id":14136696,"display_name":"Noemi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137261,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"answer_count":7,"score":37,"last_activity_date":1691509221,"creation_date":1597920218,"question_id":63503350,"body_markdown":"I&#39;m trying to setup libgdx for a desktop game and when I try to generate the project I have this error and the build fails. \r\nI&#39;ve the latest versions of Java(13.0.2) and Gradle(6.6), both set as environment variables in the path. Can somebody help me? \r\n\r\nThe error looks like this:\r\n\r\n``` \r\nCould not compile settings file &#39;C:\\Users\\noemi\\Desktop\\Test\\settings.gradle&#39;.\r\n&gt; startup failed:\r\n  General error during semantic analysis: Unsupported class file major version 57\r\n  \r\n  java.lang.IllegalArgumentException: Unsupported class file major version 57 \r\n``` \r\n","title":"General error during semantic analysis: Unsupported class file major version 57","body":"<p>I'm trying to setup libgdx for a desktop game and when I try to generate the project I have this error and the build fails.\nI've the latest versions of Java(13.0.2) and Gradle(6.6), both set as environment variables in the path. Can somebody help me?</p>\n<p>The error looks like this:</p>\n<pre><code>Could not compile settings file 'C:\\Users\\noemi\\Desktop\\Test\\settings.gradle'.\n&gt; startup failed:\n  General error during semantic analysis: Unsupported class file major version 57\n  \n  java.lang.IllegalArgumentException: Unsupported class file major version 57 \n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691528755,"post_id":76861058,"comment_id":135503375,"body_markdown":"How do you build your jar file ? , if you are using maven, do it with `mvn package`  and retry. of course do it after clean","body":"How do you build your jar file ? , if you are using maven, do it with <code>mvn package</code>  and retry. of course do it after clean"},{"owner":{"account_id":24553342,"reputation":5,"user_id":18462267,"display_name":"ArneVC"},"score":0,"creation_date":1691535301,"post_id":76861058,"comment_id":135504209,"body_markdown":"That indeed solves it, I was using IntelliJ IDEA&#39;s built in artifact builder to get a .jar before.","body":"That indeed solves it, I was using IntelliJ IDEA&#39;s built in artifact builder to get a .jar before."}],"owner":{"account_id":24553342,"reputation":5,"user_id":18462267,"display_name":"ArneVC"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691508693,"creation_date":1691508693,"question_id":76861058,"body_markdown":"I have a spring boot app that I can run in intellij taht will output this in the console:\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.1.2)\r\n\r\n2023-08-08T17:25:17.341+02:00  INFO 16720 --- [           main] vb.backend.BackendApplication            : Starting BackendApplication using Java 17.0.4.1 with PID 16720 (C:\\Users\\Acer\\Documents\\persoonlijk\\code projects\\VB\\VB\\UI\\backend\\target\\classes started by Acer in C:\\Users\\Acer\\Documents\\persoonlijk\\code projects\\VB\\VB\\UI\\backend)\r\n2023-08-08T17:25:17.347+02:00  INFO 16720 --- [           main] vb.backend.BackendApplication            : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-08-08T17:25:18.274+02:00  INFO 16720 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-08-08T17:25:18.332+02:00  INFO 16720 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 1 JPA repository interfaces.\r\n2023-08-08T17:25:18.905+02:00  INFO 16720 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-08-08T17:25:18.913+02:00  INFO 16720 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-08-08T17:25:18.914+02:00  INFO 16720 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\r\n2023-08-08T17:25:19.020+02:00  INFO 16720 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-08-08T17:25:19.020+02:00  INFO 16720 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1593 ms\r\n2023-08-08T17:25:19.155+02:00  INFO 16720 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-08-08T17:25:19.346+02:00  INFO 16720 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:4639ca67-0856-41e0-a31a-90bc19b84a68 user=SA\r\n2023-08-08T17:25:19.348+02:00  INFO 16720 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-08-08T17:25:19.407+02:00  INFO 16720 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-08-08T17:25:19.465+02:00  INFO 16720 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\r\n2023-08-08T17:25:19.468+02:00  INFO 16720 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n2023-08-08T17:25:19.624+02:00  INFO 16720 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-08-08T17:25:19.778+02:00  INFO 16720 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n2023-08-08T17:25:20.075+02:00  INFO 16720 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-08-08T17:25:20.732+02:00  INFO 16720 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2023-08-08T17:25:20.783+02:00  INFO 16720 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-08-08T17:25:21.063+02:00  WARN 16720 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2023-08-08T17:25:21.447+02:00  INFO 16720 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2023-08-08T17:25:21.457+02:00  INFO 16720 --- [           main] vb.backend.BackendApplication            : Started BackendApplication in 4.707 seconds (process running for 5.719)\r\n```\r\n\r\nthat I compiled into a .jar file that I&#39;m trying to run from a .bat that looks like this:\r\n```batch\r\n@echo off\r\ntitle UI-backend\r\ncd &quot;./backend&quot;\r\njava -jar backend.jar\r\n```\r\n\r\nwhich will start the app but shutdown immediatly after:\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.1.2)\r\n\r\n17:29:27.440 [main] INFO vb.backend.BackendApplication -- Starting BackendApplication using Java 17.0.4.1 with PID 1108 (C:\\Users\\Acer\\Documents\\persoonlijk\\code projects\\VB\\sample .bat setup\\UI\\backend\\backend.jar started by Acer in C:\\Users\\Acer\\Documents\\persoonlijk\\code projects\\VB\\sample .bat setup\\UI\\backend)\r\n17:29:27.444 [main] INFO vb.backend.BackendApplication -- No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n17:29:28.782 [main] INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate -- Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n17:29:28.911 [main] INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate -- Finished Spring Data repository scanning in 113 ms. Found 1 JPA repository interfaces.\r\n17:29:29.893 [main] INFO com.zaxxer.hikari.HikariDataSource -- HikariPool-1 - Starting...\r\n17:29:30.231 [main] INFO com.zaxxer.hikari.pool.HikariPool -- HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dd6687ab-bd2c-4d04-9404-b70533daadbf user=SA\r\n17:29:30.234 [main] INFO com.zaxxer.hikari.HikariDataSource -- HikariPool-1 - Start completed.\r\n17:29:30.365 [main] INFO org.hibernate.jpa.internal.util.LogHelper -- HHH000204: Processing PersistenceUnitInfo [name: default]\r\n17:29:30.462 [main] INFO org.hibernate.Version -- HHH000412: Hibernate ORM core version [WORKING]\r\n17:29:30.464 [main] INFO org.hibernate.cfg.Environment -- HHH000406: Using bytecode reflection optimizer\r\n17:29:30.717 [main] INFO org.hibernate.bytecode.internal.BytecodeProviderInitiator -- HHH000021: Bytecode provider name : bytebuddy\r\n17:29:30.853 [main] INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo -- No LoadTimeWeaver setup: ignoring JPA class transformer\r\n17:29:31.394 [main] INFO org.hibernate.bytecode.internal.BytecodeProviderInitiator -- HHH000021: Bytecode provider name : bytebuddy\r\n17:29:32.266 [main] INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator -- HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n17:29:32.328 [main] INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean -- Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n17:29:33.232 [main] INFO vb.backend.BackendApplication -- Started BackendApplication in 6.119 seconds (process running for 6.504)\r\n17:29:33.478 [SpringApplicationShutdownHook] INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean -- Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n17:29:33.483 [SpringApplicationShutdownHook] INFO com.zaxxer.hikari.HikariDataSource -- HikariPool-1 - Shutdown initiated...\r\n17:29:33.488 [SpringApplicationShutdownHook] INFO com.zaxxer.hikari.HikariDataSource -- HikariPool-1 - Shutdown completed.\r\n```\r\n\r\nWhy does this happen, it&#39;s the exact same app ran from the same java SDK there should be no reason for the app to shut down yet it just does.","title":"Spring boot app shuts down when .jar is ran from .bat but not in IDE","body":"<p>I have a spring boot app that I can run in intellij taht will output this in the console:</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.1.2)\n\n2023-08-08T17:25:17.341+02:00  INFO 16720 --- [           main] vb.backend.BackendApplication            : Starting BackendApplication using Java 17.0.4.1 with PID 16720 (C:\\Users\\Acer\\Documents\\persoonlijk\\code projects\\VB\\VB\\UI\\backend\\target\\classes started by Acer in C:\\Users\\Acer\\Documents\\persoonlijk\\code projects\\VB\\VB\\UI\\backend)\n2023-08-08T17:25:17.347+02:00  INFO 16720 --- [           main] vb.backend.BackendApplication            : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-08-08T17:25:18.274+02:00  INFO 16720 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-08-08T17:25:18.332+02:00  INFO 16720 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 1 JPA repository interfaces.\n2023-08-08T17:25:18.905+02:00  INFO 16720 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-08-08T17:25:18.913+02:00  INFO 16720 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-08-08T17:25:18.914+02:00  INFO 16720 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\n2023-08-08T17:25:19.020+02:00  INFO 16720 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-08-08T17:25:19.020+02:00  INFO 16720 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1593 ms\n2023-08-08T17:25:19.155+02:00  INFO 16720 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-08-08T17:25:19.346+02:00  INFO 16720 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:4639ca67-0856-41e0-a31a-90bc19b84a68 user=SA\n2023-08-08T17:25:19.348+02:00  INFO 16720 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-08-08T17:25:19.407+02:00  INFO 16720 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-08-08T17:25:19.465+02:00  INFO 16720 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\n2023-08-08T17:25:19.468+02:00  INFO 16720 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-08-08T17:25:19.624+02:00  INFO 16720 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-08-08T17:25:19.778+02:00  INFO 16720 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-08-08T17:25:20.075+02:00  INFO 16720 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-08-08T17:25:20.732+02:00  INFO 16720 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-08-08T17:25:20.783+02:00  INFO 16720 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-08-08T17:25:21.063+02:00  WARN 16720 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-08-08T17:25:21.447+02:00  INFO 16720 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-08-08T17:25:21.457+02:00  INFO 16720 --- [           main] vb.backend.BackendApplication            : Started BackendApplication in 4.707 seconds (process running for 5.719)\n</code></pre>\n<p>that I compiled into a .jar file that I'm trying to run from a .bat that looks like this:</p>\n<pre><code>@echo off\ntitle UI-backend\ncd &quot;./backend&quot;\njava -jar backend.jar\n</code></pre>\n<p>which will start the app but shutdown immediatly after:</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.1.2)\n\n17:29:27.440 [main] INFO vb.backend.BackendApplication -- Starting BackendApplication using Java 17.0.4.1 with PID 1108 (C:\\Users\\Acer\\Documents\\persoonlijk\\code projects\\VB\\sample .bat setup\\UI\\backend\\backend.jar started by Acer in C:\\Users\\Acer\\Documents\\persoonlijk\\code projects\\VB\\sample .bat setup\\UI\\backend)\n17:29:27.444 [main] INFO vb.backend.BackendApplication -- No active profile set, falling back to 1 default profile: &quot;default&quot;\n17:29:28.782 [main] INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate -- Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n17:29:28.911 [main] INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate -- Finished Spring Data repository scanning in 113 ms. Found 1 JPA repository interfaces.\n17:29:29.893 [main] INFO com.zaxxer.hikari.HikariDataSource -- HikariPool-1 - Starting...\n17:29:30.231 [main] INFO com.zaxxer.hikari.pool.HikariPool -- HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dd6687ab-bd2c-4d04-9404-b70533daadbf user=SA\n17:29:30.234 [main] INFO com.zaxxer.hikari.HikariDataSource -- HikariPool-1 - Start completed.\n17:29:30.365 [main] INFO org.hibernate.jpa.internal.util.LogHelper -- HHH000204: Processing PersistenceUnitInfo [name: default]\n17:29:30.462 [main] INFO org.hibernate.Version -- HHH000412: Hibernate ORM core version [WORKING]\n17:29:30.464 [main] INFO org.hibernate.cfg.Environment -- HHH000406: Using bytecode reflection optimizer\n17:29:30.717 [main] INFO org.hibernate.bytecode.internal.BytecodeProviderInitiator -- HHH000021: Bytecode provider name : bytebuddy\n17:29:30.853 [main] INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo -- No LoadTimeWeaver setup: ignoring JPA class transformer\n17:29:31.394 [main] INFO org.hibernate.bytecode.internal.BytecodeProviderInitiator -- HHH000021: Bytecode provider name : bytebuddy\n17:29:32.266 [main] INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator -- HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n17:29:32.328 [main] INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean -- Initialized JPA EntityManagerFactory for persistence unit 'default'\n17:29:33.232 [main] INFO vb.backend.BackendApplication -- Started BackendApplication in 6.119 seconds (process running for 6.504)\n17:29:33.478 [SpringApplicationShutdownHook] INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean -- Closing JPA EntityManagerFactory for persistence unit 'default'\n17:29:33.483 [SpringApplicationShutdownHook] INFO com.zaxxer.hikari.HikariDataSource -- HikariPool-1 - Shutdown initiated...\n17:29:33.488 [SpringApplicationShutdownHook] INFO com.zaxxer.hikari.HikariDataSource -- HikariPool-1 - Shutdown completed.\n</code></pre>\n<p>Why does this happen, it's the exact same app ran from the same java SDK there should be no reason for the app to shut down yet it just does.</p>\n"},{"tags":["java","spring","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":203641,"reputation":2744,"user_id":451420,"accept_rate":81,"display_name":"luthier"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637161194,"creation_date":1637161194,"answer_id":70006743,"question_id":70005369,"body_markdown":"I managed to find a hacky solution. By adding a `List&lt;TransactionDto&gt; dummy(List&lt;Transaction&gt; transaction);` method to `GameMapper`, I have tricked MapStruct into thinking I&#39;m really using `TransactionMapper` for something and it has successfully added it to `GameMapperImpl`. \r\n\r\nI&#39;m still open to non-hacky solutions, though :) ","title":"Use another MapStruct mapper only inside an expression clause","body":"<p>I managed to find a hacky solution. By adding a <code>List&lt;TransactionDto&gt; dummy(List&lt;Transaction&gt; transaction);</code> method to <code>GameMapper</code>, I have tricked MapStruct into thinking I'm really using <code>TransactionMapper</code> for something and it has successfully added it to <code>GameMapperImpl</code>.</p>\n<p>I'm still open to non-hacky solutions, though :)</p>\n"},{"comments":[{"owner":{"account_id":8254040,"reputation":2038,"user_id":6207726,"accept_rate":99,"display_name":"agiro"},"score":0,"creation_date":1681322834,"post_id":70044179,"comment_id":134039350,"body_markdown":"has this changed since the answer? I came up with this solution on my end as well, but it&#39;d be a lot cleaner to keep using an interface, and have MapStruct create a constructor that includes my dependency (that is managed by Spring). for now if I only use an expression, such as here, my dependency is not getting added as a constructor parameter.","body":"has this changed since the answer? I came up with this solution on my end as well, but it&#39;d be a lot cleaner to keep using an interface, and have MapStruct create a constructor that includes my dependency (that is managed by Spring). for now if I only use an expression, such as here, my dependency is not getting added as a constructor parameter."},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1681391459,"post_id":70044179,"comment_id":134051057,"body_markdown":"I am not sure that I understand your question @agiro. If you MapStruct to automatically detect mappings and not to use expression then you can use `Mapper#uses`. However, if you do not want to add your class to `Mapper#uses` then you&#39;ll have to do it like in this answer","body":"I am not sure that I understand your question @agiro. If you MapStruct to automatically detect mappings and not to use expression then you can use <code>Mapper#uses</code>. However, if you do not want to add your class to <code>Mapper#uses</code> then you&#39;ll have to do it like in this answer"},{"owner":{"account_id":8254040,"reputation":2038,"user_id":6207726,"accept_rate":99,"display_name":"agiro"},"score":0,"creation_date":1681480307,"post_id":70044179,"comment_id":134067703,"body_markdown":"I tried `uses` but it only works if I map with `source - target`in the `@Mapping`. I need to use an expression and with that the generator doesn&#39;t include my custom class in the generated code.","body":"I tried <code>uses</code> but it only works if I map with <code>source - target</code>in the <code>@Mapping</code>. I need to use an expression and with that the generator doesn&#39;t include my custom class in the generated code."}],"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1637395177,"creation_date":1637395177,"answer_id":70044179,"question_id":70005369,"body_markdown":"&gt;My best guess is that this is due to no other methods in `GameMapper` using `TransactionMapper` explicitly, so Mapstruct decides that it&#39;s not needed and doesn&#39;t inject it in the implementation.\r\n\r\nThat is correct. MapStruct will not inject mappers from `Mapper#uses` if they are not used by MapStruct.\r\n\r\nWhat you could do is to use an abstract class.\r\n\r\ne.g.\r\n\r\n```\r\n@Mapper(injectionStrategy = InjectionStrategy.CONSTRUCTOR, componentModel = &quot;spring&quot;, uses = {TransactionMapper.class, EventMapper.class})\r\npublic abstract class GameMapper {\r\n\r\n    @Autowired\r\n    protected TransactionMapper transactionMapper;\r\n\r\n    @Mapping(target = &quot;transaction&quot;, \r\n        expression = &quot;java(transactionMapper.transactionToDto(findTransactionForPlayer(game, idPlayer)))&quot;)\r\n    public abstract GameResultDto gameToGameResultDto(Game game, Long idPlayer);\r\n\r\n    // Some more methods\r\n\r\n}\r\n```\r\n","title":"Use another MapStruct mapper only inside an expression clause","body":"<blockquote>\n<p>My best guess is that this is due to no other methods in <code>GameMapper</code> using <code>TransactionMapper</code> explicitly, so Mapstruct decides that it's not needed and doesn't inject it in the implementation.</p>\n</blockquote>\n<p>That is correct. MapStruct will not inject mappers from <code>Mapper#uses</code> if they are not used by MapStruct.</p>\n<p>What you could do is to use an abstract class.</p>\n<p>e.g.</p>\n<pre><code>@Mapper(injectionStrategy = InjectionStrategy.CONSTRUCTOR, componentModel = &quot;spring&quot;, uses = {TransactionMapper.class, EventMapper.class})\npublic abstract class GameMapper {\n\n    @Autowired\n    protected TransactionMapper transactionMapper;\n\n    @Mapping(target = &quot;transaction&quot;, \n        expression = &quot;java(transactionMapper.transactionToDto(findTransactionForPlayer(game, idPlayer)))&quot;)\n    public abstract GameResultDto gameToGameResultDto(Game game, Long idPlayer);\n\n    // Some more methods\n\n}\n</code></pre>\n"}],"owner":{"account_id":203641,"reputation":2744,"user_id":451420,"accept_rate":81,"display_name":"luthier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7790,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":70044179,"answer_count":2,"score":6,"last_activity_date":1691508096,"creation_date":1637156140,"question_id":70005369,"body_markdown":"I have a mapper that, for a particular attribute of the target class, needs to choose one from a list of objects inside the source object, and map it using a differente mapper class.\r\n\r\nSimplifying it a lot, the `Game` class contains a list of `Transaction` objects, and my `GameMapper` class looks like this:\r\n\r\n```\r\n@Component\r\n@Mapper(injectionStrategy = InjectionStrategy.CONSTRUCTOR, uses = {TransactionMapper.class, EventMapper.class})\r\npublic interface GameMapper {\r\n\r\n@Mapping(target = &quot;transaction&quot;, \r\n    expression = &quot;java(transactionMapper.transactionToDto(findTransactionForPlayer(game, idPlayer)))&quot;)\r\nGameResultDto gameToGameResultDto(Game game, Long idPlayer);\r\n\r\n// Some more methods\r\n\r\n}\r\n\r\n```\r\n\r\nThe thing is, `EventMapper` gets generated as a `private final EventMapper eventMapper;` attribute inside `GameMapperImpl`, but `TransactionMapper` is not, so the build fails because MapStruct cannot find `transactionMapper`.\r\n\r\nMy best guess is that this is due to no other methods in `GameMapper` using `TransactionMapper` explicitly, so Mapstruct decides that it&#39;s not needed and doesn&#39;t inject it in the implementation.\r\n\r\nSo... is there any way to force MapStruct to include the mappers in the `uses` clause, even it if looks like they are not being used, or any other way to work around this?","title":"Use another MapStruct mapper only inside an expression clause","body":"<p>I have a mapper that, for a particular attribute of the target class, needs to choose one from a list of objects inside the source object, and map it using a differente mapper class.</p>\n<p>Simplifying it a lot, the <code>Game</code> class contains a list of <code>Transaction</code> objects, and my <code>GameMapper</code> class looks like this:</p>\n<pre><code>@Component\n@Mapper(injectionStrategy = InjectionStrategy.CONSTRUCTOR, uses = {TransactionMapper.class, EventMapper.class})\npublic interface GameMapper {\n\n@Mapping(target = &quot;transaction&quot;, \n    expression = &quot;java(transactionMapper.transactionToDto(findTransactionForPlayer(game, idPlayer)))&quot;)\nGameResultDto gameToGameResultDto(Game game, Long idPlayer);\n\n// Some more methods\n\n}\n\n</code></pre>\n<p>The thing is, <code>EventMapper</code> gets generated as a <code>private final EventMapper eventMapper;</code> attribute inside <code>GameMapperImpl</code>, but <code>TransactionMapper</code> is not, so the build fails because MapStruct cannot find <code>transactionMapper</code>.</p>\n<p>My best guess is that this is due to no other methods in <code>GameMapper</code> using <code>TransactionMapper</code> explicitly, so Mapstruct decides that it's not needed and doesn't inject it in the implementation.</p>\n<p>So... is there any way to force MapStruct to include the mappers in the <code>uses</code> clause, even it if looks like they are not being used, or any other way to work around this?</p>\n"},{"tags":["java","mapstruct"],"answers":[{"comments":[{"owner":{"account_id":11281416,"reputation":81,"user_id":8273683,"display_name":"5468sun"},"score":0,"creation_date":1565098479,"post_id":57362597,"comment_id":101239057,"body_markdown":"thanks。@InheritConfiguration makes the mapper look much better. but i still have to define lots of method.  toPageInfoDto1  toPageInfoDto2 toPageInfoDto3 toPageInfoDto4……  how sad. \n\nAnd about the @TargetType，i dont know exactly how to do.","body":"thanks。@InheritConfiguration makes the mapper look much better. but i still have to define lots of method.  toPageInfoDto1  toPageInfoDto2 toPageInfoDto3 toPageInfoDto4……  how sad.   And about the @TargetType，i dont know exactly how to do."},{"owner":{"account_id":1402854,"reputation":3712,"user_id":1331297,"accept_rate":82,"display_name":"Sjaak"},"score":0,"creation_date":1565104150,"post_id":57362597,"comment_id":101242650,"body_markdown":"We have a unit test that covers generic factories. Have a look here: https://github.com/mapstruct/mapstruct/blob/master/processor/src/test/java/org/mapstruct/ap/test/factories/GenericFactory.java. it&#39;s not quite your scenario, and to be honest, I&#39;m not sure at ask whether mapstruct can generate a method when it&#39;s signature contains type variables. It can select those, so you might go the other way around, so that might be an option as well.","body":"We have a unit test that covers generic factories. Have a look here: <a href=\"https://github.com/mapstruct/mapstruct/blob/master/processor/src/test/java/org/mapstruct/ap/test/factories/GenericFactory.java\" rel=\"nofollow noreferrer\">github.com/mapstruct/mapstruct/blob/master/processor/src/tes&zwnj;&#8203;t/&hellip;</a>. it&#39;s not quite your scenario, and to be honest, I&#39;m not sure at ask whether mapstruct can generate a method when it&#39;s signature contains type variables. It can select those, so you might go the other way around, so that might be an option as well."},{"owner":{"account_id":1402854,"reputation":3712,"user_id":1331297,"accept_rate":82,"display_name":"Sjaak"},"score":0,"creation_date":1565105070,"post_id":57362597,"comment_id":101243172,"body_markdown":"So with the other way around I mean that you implement a generic default method with the signature you desire and then from that method call a non parameterized mapstruct method with all the mappings you desire, but ignoring the list","body":"So with the other way around I mean that you implement a generic default method with the signature you desire and then from that method call a non parameterized mapstruct method with all the mappings you desire, but ignoring the list"},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1565508999,"post_id":57362597,"comment_id":101371862,"body_markdown":"I&#39;ve edited the answer and provided an example (from what I thought @Sjaak was thinking)","body":"I&#39;ve edited the answer and provided an example (from what I thought @Sjaak was thinking)"}],"tags":[],"owner":{"account_id":1402854,"reputation":3712,"user_id":1331297,"accept_rate":82,"display_name":"Sjaak"},"comment_count":4,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1565677252,"creation_date":1565022540,"answer_id":57362597,"question_id":57351869,"body_markdown":"Mapstruct is a code generator. So it needs to know which types to construct in order to generate a method implementation. Having said that, you could do this smarter by using a base mapping method on which you define all the `@Mapping` annotations and ignore the generic type mapping. You still have the methods above but you just specify `@InheritConfiguration`\r\n\r\nAlternatively you could consider playing around with an objectfactory using `@TargetType` to construct the proper generic type. I&#39;m not sure whether that works with a generic mapping method signature. I&#39;m not in the position to check it, but let me know if that works\r\n\r\nE.g.\r\n\r\n        public interface BasePageMapper&lt;S, DTO&gt; {\r\n        \r\n            @Mapping(target = &quot;list&quot;, source = &quot;records&quot;),\r\n            @Mapping(target = &quot;currentPageNum&quot;, source = &quot;current&quot;),\r\n            @Mapping(target = &quot;totalPageNum&quot;, source = &quot;pages&quot;),\r\n            @Mapping(target = &quot;perPageNum&quot;, source = &quot;size&quot;),\r\n            @Mapping(target = &quot;totalItemNum&quot;, source = &quot;total&quot;),\r\n            PageInfoDto&lt;DTO&gt; toPageInfoDto(Page&lt;S&gt; pageInfo);\r\n        \r\n            DTO toDto(S source);\r\n        }\r\n        \r\n    @Mapper( config = CentralConfig.class, uses = StudentMapper.class, componentModel = &quot;spring&quot;)\r\n        public interface StudentMapper extends BasePageMapper&lt;Student, StudentDto&gt; {\r\n        \r\n        }\r\n        \r\n    @Mapper( config = CentralConfig.class, uses = SchoolMapper.class, componentModel = &quot;spring&quot;)\r\n        public interface SchoolMapper extends BasePageMapper&lt;School, SchoolDto&gt; {\r\n        \r\n        }","title":"How to Map to Generic Type?","body":"<p>Mapstruct is a code generator. So it needs to know which types to construct in order to generate a method implementation. Having said that, you could do this smarter by using a base mapping method on which you define all the <code>@Mapping</code> annotations and ignore the generic type mapping. You still have the methods above but you just specify <code>@InheritConfiguration</code></p>\n\n<p>Alternatively you could consider playing around with an objectfactory using <code>@TargetType</code> to construct the proper generic type. I'm not sure whether that works with a generic mapping method signature. I'm not in the position to check it, but let me know if that works</p>\n\n<p>E.g.</p>\n\n<pre><code>    public interface BasePageMapper&lt;S, DTO&gt; {\n\n        @Mapping(target = \"list\", source = \"records\"),\n        @Mapping(target = \"currentPageNum\", source = \"current\"),\n        @Mapping(target = \"totalPageNum\", source = \"pages\"),\n        @Mapping(target = \"perPageNum\", source = \"size\"),\n        @Mapping(target = \"totalItemNum\", source = \"total\"),\n        PageInfoDto&lt;DTO&gt; toPageInfoDto(Page&lt;S&gt; pageInfo);\n\n        DTO toDto(S source);\n    }\n\n@Mapper( config = CentralConfig.class, uses = StudentMapper.class, componentModel = \"spring\")\n    public interface StudentMapper extends BasePageMapper&lt;Student, StudentDto&gt; {\n\n    }\n\n@Mapper( config = CentralConfig.class, uses = SchoolMapper.class, componentModel = \"spring\")\n    public interface SchoolMapper extends BasePageMapper&lt;School, SchoolDto&gt; {\n\n    }\n</code></pre>\n"}],"owner":{"account_id":11281416,"reputation":81,"user_id":8273683,"display_name":"5468sun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15066,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1691507971,"creation_date":1564975851,"question_id":57351869,"body_markdown":"`PageInfoDto&lt;T&gt;`:\r\n```\r\npublic class PageInfoDto&lt;T&gt; {\r\n    private int currentPageNum;\r\n    private int totalPageNum;\r\n    private int perPageNum;\r\n    private int totalItemNum;\r\n    private List&lt;T&gt; list;\r\n}\r\n```\r\n\r\n`Page&lt;T&gt;`:\r\n```\r\npublic class Page&lt;T&gt; {\r\n    private int current;\r\n    private int total;\r\n    private int size;\r\n    private int items;\r\n    private List&lt;T&gt; list;\r\n}\r\n```\r\n\r\nI have a school list and a student list.\r\n\r\nI want to map `Page&lt;School&gt;` to `PageInfoDto&lt;SchoolDto&gt;` and map  `Page&lt;Student&gt;` to `PageInfoDto&lt;StudentDto&gt;`。\r\n\r\nThis is how my mapper looks like:\r\n```\r\n@Mapper(config = CentralConfig.class, uses = {StudentMapper.class, SchoolMapper.class}, componentModel = &quot;spring&quot;)\r\npublic interface PageInfoMapper {\r\n    @Mappings({\r\n        @Mapping(target = &quot;list&quot;, source = &quot;pageInfo.records&quot;),\r\n        @Mapping(target = &quot;currentPageNum&quot;, source = &quot;pageInfo.current&quot;),\r\n        @Mapping(target = &quot;totalPageNum&quot;, source = &quot;pageInfo.pages&quot;),\r\n        @Mapping(target = &quot;perPageNum&quot;, source = &quot;pageInfo.size&quot;),\r\n        @Mapping(target = &quot;totalItemNum&quot;, source = &quot;pageInfo.total&quot;),\r\n    })\r\n    PageInfoDto&lt;SchoolDto&gt; toPageInfoDto1(Page&lt;School&gt; pageInfo);\r\n\r\n    @Mappings({\r\n        @Mapping(target = &quot;list&quot;, source = &quot;pageInfo.records&quot;),\r\n        @Mapping(target = &quot;currentPageNum&quot;, source = &quot;pageInfo.current&quot;),\r\n        @Mapping(target = &quot;totalPageNum&quot;, source = &quot;pageInfo.pages&quot;),\r\n        @Mapping(target = &quot;perPageNum&quot;, source = &quot;pageInfo.size&quot;),\r\n        @Mapping(target = &quot;totalItemNum&quot;, source = &quot;pageInfo.total&quot;),\r\n    })\r\n    PageInfoDto&lt;StudentDto&gt; toPageInfoDto2(Page&lt;Student&gt; pageInfo);\r\n}\r\n```\r\n\r\nThis is obviously not a clever way to do, having to repeat the same code. Is there a better way to do this？","title":"How to Map to Generic Type?","body":"<p><code>PageInfoDto&lt;T&gt;</code>:</p>\n<pre><code>public class PageInfoDto&lt;T&gt; {\n    private int currentPageNum;\n    private int totalPageNum;\n    private int perPageNum;\n    private int totalItemNum;\n    private List&lt;T&gt; list;\n}\n</code></pre>\n<p><code>Page&lt;T&gt;</code>:</p>\n<pre><code>public class Page&lt;T&gt; {\n    private int current;\n    private int total;\n    private int size;\n    private int items;\n    private List&lt;T&gt; list;\n}\n</code></pre>\n<p>I have a school list and a student list.</p>\n<p>I want to map <code>Page&lt;School&gt;</code> to <code>PageInfoDto&lt;SchoolDto&gt;</code> and map  <code>Page&lt;Student&gt;</code> to <code>PageInfoDto&lt;StudentDto&gt;</code>。</p>\n<p>This is how my mapper looks like:</p>\n<pre><code>@Mapper(config = CentralConfig.class, uses = {StudentMapper.class, SchoolMapper.class}, componentModel = &quot;spring&quot;)\npublic interface PageInfoMapper {\n    @Mappings({\n        @Mapping(target = &quot;list&quot;, source = &quot;pageInfo.records&quot;),\n        @Mapping(target = &quot;currentPageNum&quot;, source = &quot;pageInfo.current&quot;),\n        @Mapping(target = &quot;totalPageNum&quot;, source = &quot;pageInfo.pages&quot;),\n        @Mapping(target = &quot;perPageNum&quot;, source = &quot;pageInfo.size&quot;),\n        @Mapping(target = &quot;totalItemNum&quot;, source = &quot;pageInfo.total&quot;),\n    })\n    PageInfoDto&lt;SchoolDto&gt; toPageInfoDto1(Page&lt;School&gt; pageInfo);\n\n    @Mappings({\n        @Mapping(target = &quot;list&quot;, source = &quot;pageInfo.records&quot;),\n        @Mapping(target = &quot;currentPageNum&quot;, source = &quot;pageInfo.current&quot;),\n        @Mapping(target = &quot;totalPageNum&quot;, source = &quot;pageInfo.pages&quot;),\n        @Mapping(target = &quot;perPageNum&quot;, source = &quot;pageInfo.size&quot;),\n        @Mapping(target = &quot;totalItemNum&quot;, source = &quot;pageInfo.total&quot;),\n    })\n    PageInfoDto&lt;StudentDto&gt; toPageInfoDto2(Page&lt;Student&gt; pageInfo);\n}\n</code></pre>\n<p>This is obviously not a clever way to do, having to repeat the same code. Is there a better way to do this？</p>\n"},{"tags":["java","x509certificate","safenet"],"owner":{"account_id":1622294,"reputation":317,"user_id":1498603,"display_name":"stefanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691507778,"creation_date":1691507778,"question_id":76860940,"body_markdown":"As part of a larger project, a test module has been developed and is intended to be integrated into a tomcat-based Java webapp for unattended signing of large batches of documents using a qualified seal certificate that can be issued only on SafeNet tokens.\r\n\r\nWhen running in debug configurations and the token is connected to the local machine (Windows), documents are signed properly.\r\n\r\nWhen running on a remote server (also Windows), the token, attached to the server, is not detected.\r\n\r\nThere are two things that have been noticed :\r\n\r\n 1. the token is detected by the remote webapp code when attached locally and a remote desktop session to the server is active (this may be due to remote desktop config)\r\n 2. the token is detected by the webapp code when attached to the server only if a GUI session is active \r\n\r\nIs it possible to make the token accessible to the webapp code when connected on the server without an active session ?\r\n\r\n","title":"Using a qualified seal certificate issued on a SafeNet token for unattended operations in Java","body":"<p>As part of a larger project, a test module has been developed and is intended to be integrated into a tomcat-based Java webapp for unattended signing of large batches of documents using a qualified seal certificate that can be issued only on SafeNet tokens.</p>\n<p>When running in debug configurations and the token is connected to the local machine (Windows), documents are signed properly.</p>\n<p>When running on a remote server (also Windows), the token, attached to the server, is not detected.</p>\n<p>There are two things that have been noticed :</p>\n<ol>\n<li>the token is detected by the remote webapp code when attached locally and a remote desktop session to the server is active (this may be due to remote desktop config)</li>\n<li>the token is detected by the webapp code when attached to the server only if a GUI session is active</li>\n</ol>\n<p>Is it possible to make the token accessible to the webapp code when connected on the server without an active session ?</p>\n"},{"tags":["java","vector","simd"],"comments":[{"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"score":0,"creation_date":1691507614,"post_id":76860317,"comment_id":135499574,"body_markdown":"Here is some doc, https://docs.oracle.com/en/java/javase/20/docs/api/jdk.incubator.vector/jdk/incubator/vector/package-summary.html\n\nMaybe you could separate the operations and the conversions to see where the problem is.","body":"Here is some doc, <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/jdk.incubator.vector/jdk/incubator/vector/package-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/20/docs/api/jdk.incubator.vec&zwnj;&#8203;tor/&hellip;</a>  Maybe you could separate the operations and the conversions to see where the problem is."}],"owner":{"account_id":23450751,"reputation":11,"user_id":17506944,"display_name":"Jatinder Sangha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691507589,"creation_date":1691503378,"question_id":76860317,"body_markdown":"I&#39;m using JDK21 EA to test the Vector API performance.\r\n\r\nMy original (non-vector) code looks like this:\r\n\r\n```\r\ndouble[] src;\r\ndouble divisor;\r\nfloat[] dst;\r\n\r\nfor (int i=0; i&lt;src.length; ++i) {\r\n  if (src[i]&lt;=0.0d) {\r\n    dst[i] = -1.0f;\r\n  }\r\n  else {\r\n    double v = src[i] / divisor;\r\n    float f = 10.0f * log10((float)v);\r\n    dst[i] = f;\r\n  }\r\n}\r\n```\r\n\r\nI&#39;ve rewritten it to use the vector API (I&#39;m sure there&#39;s bugs in this as I haven&#39;t checked the results):\r\n\r\n```\r\ndouble[] src;\r\ndouble divisor;\r\nfloat[] dst;\r\n\r\nfor (int j=0; j&lt;src.length; j+=DoubleVector.SPECIES_512.length()) {\r\n  DoubleVector dvsrc = DoubleVector.fromArray(DoubleVector.SPECIES_512, src, j);\r\n  FloatVector  fvdst = FloatVector.fromArray(FloatVector.SPECIES_256, dst, j);\r\n\r\n  // Identify values &lt;= 0.0d\r\n  VectorMask&lt;Double&gt; mask = dvsrc.compare(VectorOperators.LE, 0.0d);\r\n\r\n  // Set those values to -1.0f\r\n  fvdst.blend(-1.0f, mask.cast(FloatVector.SPECIES_256));\r\n\r\n  // Invert the mask, so it now points to values &gt;0.0d\r\n  mask = mask.not();\r\n\r\n  // Divide and cast to float\r\n  FloatVector x = dvsrc.div(divisor, mask).reinterpretAsFloats();\r\n  VectorMask&lt;Float&gt; floatMask = mask.cast(FloatVector.SPECIES_256);\r\n\r\n  // Log10 and multiply\r\n  FloatVector processed = x.lanewise(VectorOperators.LOG10).mul(10.0f);\r\n\r\n  // Store\r\n  fvdst.blend(processed, floatMask);\r\n}\r\n```\r\n\r\nSo, the code above compiles, but obviously it&#39;s a long way from actually working correctly.\r\n\r\nFirst off, the conversion of the DoubleVector (dvsrc) to a FloatVector (x) is wrong as dvsrc.length=8, but x.length=16 (I assume this is because each double gets converted to 2 floats?)\r\n\r\nThis presumably also means that the mask is invalid.\r\n\r\nThen the final blend into fvdst fails because fvdst is 256bits, whereas processed is 512bits long.\r\n\r\n```none\r\njava.lang.ClassCastException: class jdk.incubator.vector.Float512Vector cannot be cast to class jdk.incubator.vector.Float256Vector (jdk.incubator.vector.Float512Vector and jdk.incubator.vector.Float256Vector are in module jdk.incubator.vector of loader &#39;bootstrap&#39;)\r\n```\r\n\r\nI&#39;ve tried the JDK docs, Google searches, different ways to cast the DoubleVector to FloatVector including convertShape() - but so far, I&#39;ve been unable to get this code to run.\r\n\r\nI&#39;m having difficulty getting any real information from the JDK docs.\r\n\r\nCan anyone suggest how to fix this code properly or where I can go to get more detailed information about what&#39;s going on etc?\r\n\r\n\r\n","title":"OpenJDK Vector API type conversion issue (Double to Float)","body":"<p>I'm using JDK21 EA to test the Vector API performance.</p>\n<p>My original (non-vector) code looks like this:</p>\n<pre><code>double[] src;\ndouble divisor;\nfloat[] dst;\n\nfor (int i=0; i&lt;src.length; ++i) {\n  if (src[i]&lt;=0.0d) {\n    dst[i] = -1.0f;\n  }\n  else {\n    double v = src[i] / divisor;\n    float f = 10.0f * log10((float)v);\n    dst[i] = f;\n  }\n}\n</code></pre>\n<p>I've rewritten it to use the vector API (I'm sure there's bugs in this as I haven't checked the results):</p>\n<pre><code>double[] src;\ndouble divisor;\nfloat[] dst;\n\nfor (int j=0; j&lt;src.length; j+=DoubleVector.SPECIES_512.length()) {\n  DoubleVector dvsrc = DoubleVector.fromArray(DoubleVector.SPECIES_512, src, j);\n  FloatVector  fvdst = FloatVector.fromArray(FloatVector.SPECIES_256, dst, j);\n\n  // Identify values &lt;= 0.0d\n  VectorMask&lt;Double&gt; mask = dvsrc.compare(VectorOperators.LE, 0.0d);\n\n  // Set those values to -1.0f\n  fvdst.blend(-1.0f, mask.cast(FloatVector.SPECIES_256));\n\n  // Invert the mask, so it now points to values &gt;0.0d\n  mask = mask.not();\n\n  // Divide and cast to float\n  FloatVector x = dvsrc.div(divisor, mask).reinterpretAsFloats();\n  VectorMask&lt;Float&gt; floatMask = mask.cast(FloatVector.SPECIES_256);\n\n  // Log10 and multiply\n  FloatVector processed = x.lanewise(VectorOperators.LOG10).mul(10.0f);\n\n  // Store\n  fvdst.blend(processed, floatMask);\n}\n</code></pre>\n<p>So, the code above compiles, but obviously it's a long way from actually working correctly.</p>\n<p>First off, the conversion of the DoubleVector (dvsrc) to a FloatVector (x) is wrong as dvsrc.length=8, but x.length=16 (I assume this is because each double gets converted to 2 floats?)</p>\n<p>This presumably also means that the mask is invalid.</p>\n<p>Then the final blend into fvdst fails because fvdst is 256bits, whereas processed is 512bits long.</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.ClassCastException: class jdk.incubator.vector.Float512Vector cannot be cast to class jdk.incubator.vector.Float256Vector (jdk.incubator.vector.Float512Vector and jdk.incubator.vector.Float256Vector are in module jdk.incubator.vector of loader 'bootstrap')\n</code></pre>\n<p>I've tried the JDK docs, Google searches, different ways to cast the DoubleVector to FloatVector including convertShape() - but so far, I've been unable to get this code to run.</p>\n<p>I'm having difficulty getting any real information from the JDK docs.</p>\n<p>Can anyone suggest how to fix this code properly or where I can go to get more detailed information about what's going on etc?</p>\n"},{"tags":["java","scala","apache-spark","apache-spark-sql","bigdata"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":1,"creation_date":1691497421,"post_id":76859520,"comment_id":135497093,"body_markdown":"You forgot to post your attempt to solve this problem.","body":"You forgot to post your attempt to solve this problem."},{"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"score":0,"creation_date":1691507419,"post_id":76859520,"comment_id":135499512,"body_markdown":"If any json property contains `null` spark will remove &amp; it will not be available in your final result.","body":"If any json property contains <code>null</code> spark will remove &amp; it will not be available in your final result."}],"answers":[{"comments":[{"owner":{"account_id":29184486,"reputation":7,"user_id":22357949,"display_name":"ravish kumar"},"score":0,"creation_date":1691500734,"post_id":76859610,"comment_id":135497888,"body_markdown":"Thanks it works , but can we make some changes, that it should return rest of datastets incase of now match?","body":"Thanks it works , but can we make some changes, that it should return rest of datastets incase of now match?"},{"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"score":0,"creation_date":1691502085,"post_id":76859610,"comment_id":135498220,"body_markdown":"I didn&#39;t get you. can you please update you question with expected result in case of no match ?","body":"I didn&#39;t get you. can you please update you question with expected result in case of no match ?"},{"owner":{"account_id":29184486,"reputation":7,"user_id":22357949,"display_name":"ravish kumar"},"score":0,"creation_date":1691503350,"post_id":76859610,"comment_id":135498522,"body_markdown":"Let&#39;s Soppose if i change filter criteria to sample5 df\n.selectExpr(\n    &quot;*&quot;, // to select all columns from the dataset / dataframe\n    &quot;inline(filter(submissions.submissionOffsets, i -&gt; i.attributeName == &#39;sample5&#39;)) as (attributeName, attributeValue)&quot;\n)  Then I expect values of Positions returned and then submissions, and then attrbuteName and attrbuteValue as blank, but positions and submissions should have there values as is","body":"Let&#39;s Soppose if i change filter criteria to sample5 df .selectExpr(     &quot;*&quot;, // to select all columns from the dataset / dataframe     &quot;inline(filter(submissions.submissionOffsets, i -&gt; i.attributeName == &#39;sample5&#39;)) as (attributeName, attributeValue)&quot; )  Then I expect values of Positions returned and then submissions, and then attrbuteName and attrbuteValue as blank, but positions and submissions should have there values as is"},{"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"score":0,"creation_date":1691503784,"post_id":76859610,"comment_id":135498623,"body_markdown":"got it. In case if filter is not matched what will be the default values for `attributeName` &amp; `attributeValue` ?","body":"got it. In case if filter is not matched what will be the default values for <code>attributeName</code> &amp; <code>attributeValue</code> ?"},{"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"score":0,"creation_date":1691504311,"post_id":76859610,"comment_id":135498748,"body_markdown":"updated code. added `inline_outer` function to keep structure same in case of filter is not matched.","body":"updated code. added <code>inline_outer</code> function to keep structure same in case of filter is not matched."},{"owner":{"account_id":29184486,"reputation":7,"user_id":22357949,"display_name":"ravish kumar"},"score":0,"creation_date":1691505166,"post_id":76859610,"comment_id":135498998,"body_markdown":"Thanks it works, how can we update values as 0 instead of null","body":"Thanks it works, how can we update values as 0 instead of null"},{"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"score":0,"creation_date":1691505538,"post_id":76859610,"comment_id":135499087,"body_markdown":"ok, if it works. can you please accept the solution &amp; mark it as correct answer ?","body":"ok, if it works. can you please accept the solution &amp; mark it as correct answer ?"},{"owner":{"account_id":29184486,"reputation":7,"user_id":22357949,"display_name":"ravish kumar"},"score":0,"creation_date":1691505713,"post_id":76859610,"comment_id":135499118,"body_markdown":"yes sure, can you help me in populating 0 instead of null in attributeName and attributeValue","body":"yes sure, can you help me in populating 0 instead of null in attributeName and attributeValue"},{"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"score":0,"creation_date":1691505788,"post_id":76859610,"comment_id":135499134,"body_markdown":"sure, can you please update you question with above usecase ?","body":"sure, can you please update you question with above usecase ?"},{"owner":{"account_id":29184486,"reputation":7,"user_id":22357949,"display_name":"ravish kumar"},"score":0,"creation_date":1691505903,"post_id":76859610,"comment_id":135499157,"body_markdown":"you mean new question ?","body":"you mean new question ?"},{"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"score":0,"creation_date":1691506184,"post_id":76859610,"comment_id":135499216,"body_markdown":"no, in this question only below you can add above use case.","body":"no, in this question only below you can add above use case."},{"owner":{"account_id":29184486,"reputation":7,"user_id":22357949,"display_name":"ravish kumar"},"score":0,"creation_date":1691506577,"post_id":76859610,"comment_id":135499309,"body_markdown":"Updated Question","body":"Updated Question"},{"owner":{"account_id":29184486,"reputation":7,"user_id":22357949,"display_name":"ravish kumar"},"score":0,"creation_date":1693216215,"post_id":76859610,"comment_id":135726184,"body_markdown":"how can we aggregate extracted values incase of multiple matches ?","body":"how can we aggregate extracted values incase of multiple matches ?"},{"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"score":0,"creation_date":1693273201,"post_id":76859610,"comment_id":135735845,"body_markdown":"Ravish, I didn&#39;t get you can you please create new question with sample input and expected output.. or you can send me same in mail","body":"Ravish, I didn&#39;t get you can you please create new question with sample input and expected output.. or you can send me same in mail"}],"tags":[],"owner":{"account_id":11741096,"reputation":9150,"user_id":8593414,"display_name":"Srinivas"},"comment_count":14,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691504284,"creation_date":1691498008,"answer_id":76859610,"question_id":76859520,"body_markdown":"`filter` higher order function to filter specific attribute from nested array json.\r\n\r\n`inline` or `inline_outer` - to explode array values.\r\n\r\nBelow is sample code\r\n\r\n```\r\nscala&gt; val df = spark\r\n.read\r\n.option(&quot;multiLine&quot;, &quot;true&quot;)\r\n.json(Seq(data).toDS)\r\n\r\ndf: org.apache.spark.sql.DataFrame = [positions: struct&lt;node: string&gt;, submissions: struct&lt;submissionOffsets: array&lt;struct&lt;attributeName:string,attributeValue:bigint&gt;&gt;&gt;]\r\n\r\nscala&gt; df.show(false)\r\n+---------+----------------------------------------------------------------------+\r\n|positions|submissions                                                           |\r\n+---------+----------------------------------------------------------------------+\r\n|{abc}    |{[{sample1, 1224}, {sample2, 1224}, {sample3, 1224}, {sample4, 1224}]}|\r\n+---------+----------------------------------------------------------------------+\r\n\r\n\r\nscala&gt; df.printSchema\r\nroot\r\n |-- positions: struct (nullable = true)\r\n |    |-- node: string (nullable = true)\r\n |-- submissions: struct (nullable = true)\r\n |    |-- submissionOffsets: array (nullable = true)\r\n |    |    |-- element: struct (containsNull = true)\r\n |    |    |    |-- attributeName: string (nullable = true)\r\n |    |    |    |-- attributeValue: long (nullable = true)\r\n\r\n\r\nscala&gt; \r\n// filter higher order function to filter nested json array values / attributes\r\n// inline_outer is to explode array values\r\n\r\ndf\r\n.selectExpr(\r\n    &quot;*&quot;, // to select all columns from the dataset / dataframe\r\n    &quot;inline_outer(filter(submissions.submissionOffsets, i -&gt; i.attributeName == &#39;sample1&#39;)) as (attributeName, attributeValue)&quot;\r\n)\r\n.toJSON.show(false)\r\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n|value                                                                                                                                                                                                                                                                                                                     |\r\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n|{&quot;positions&quot;:{&quot;node&quot;:&quot;abc&quot;},&quot;submissions&quot;:{&quot;submissionOffsets&quot;:[{&quot;attributeName&quot;:&quot;sample1&quot;,&quot;attributeValue&quot;:1224},{&quot;attributeName&quot;:&quot;sample2&quot;,&quot;attributeValue&quot;:1224},{&quot;attributeName&quot;:&quot;sample3&quot;,&quot;attributeValue&quot;:1224},{&quot;attributeName&quot;:&quot;sample4&quot;,&quot;attributeValue&quot;:1224}]},&quot;attributeName&quot;:&quot;sample1&quot;,&quot;attributeValue&quot;:1224}|\r\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n```","title":"handling nested Json structure","body":"<p><code>filter</code> higher order function to filter specific attribute from nested array json.</p>\n<p><code>inline</code> or <code>inline_outer</code> - to explode array values.</p>\n<p>Below is sample code</p>\n<pre><code>scala&gt; val df = spark\n.read\n.option(&quot;multiLine&quot;, &quot;true&quot;)\n.json(Seq(data).toDS)\n\ndf: org.apache.spark.sql.DataFrame = [positions: struct&lt;node: string&gt;, submissions: struct&lt;submissionOffsets: array&lt;struct&lt;attributeName:string,attributeValue:bigint&gt;&gt;&gt;]\n\nscala&gt; df.show(false)\n+---------+----------------------------------------------------------------------+\n|positions|submissions                                                           |\n+---------+----------------------------------------------------------------------+\n|{abc}    |{[{sample1, 1224}, {sample2, 1224}, {sample3, 1224}, {sample4, 1224}]}|\n+---------+----------------------------------------------------------------------+\n\n\nscala&gt; df.printSchema\nroot\n |-- positions: struct (nullable = true)\n |    |-- node: string (nullable = true)\n |-- submissions: struct (nullable = true)\n |    |-- submissionOffsets: array (nullable = true)\n |    |    |-- element: struct (containsNull = true)\n |    |    |    |-- attributeName: string (nullable = true)\n |    |    |    |-- attributeValue: long (nullable = true)\n\n\nscala&gt; \n// filter higher order function to filter nested json array values / attributes\n// inline_outer is to explode array values\n\ndf\n.selectExpr(\n    &quot;*&quot;, // to select all columns from the dataset / dataframe\n    &quot;inline_outer(filter(submissions.submissionOffsets, i -&gt; i.attributeName == 'sample1')) as (attributeName, attributeValue)&quot;\n)\n.toJSON.show(false)\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n|value                                                                                                                                                                                                                                                                                                                     |\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n|{&quot;positions&quot;:{&quot;node&quot;:&quot;abc&quot;},&quot;submissions&quot;:{&quot;submissionOffsets&quot;:[{&quot;attributeName&quot;:&quot;sample1&quot;,&quot;attributeValue&quot;:1224},{&quot;attributeName&quot;:&quot;sample2&quot;,&quot;attributeValue&quot;:1224},{&quot;attributeName&quot;:&quot;sample3&quot;,&quot;attributeValue&quot;:1224},{&quot;attributeName&quot;:&quot;sample4&quot;,&quot;attributeValue&quot;:1224}]},&quot;attributeName&quot;:&quot;sample1&quot;,&quot;attributeValue&quot;:1224}|\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre>\n"}],"owner":{"account_id":29184486,"reputation":7,"user_id":22357949,"display_name":"ravish kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76859610,"answer_count":1,"score":0,"last_activity_date":1691506514,"creation_date":1691497292,"question_id":76859520,"body_markdown":"suppose we have following json structure :\r\n```\r\n{\r\n\t&quot;positions&quot;: {\r\n\t\t&quot;node&quot;: &quot;abc&quot;\r\n\t}\r\n\t&quot;submissions&quot; :{\r\n\t\t&quot;submissionOffsets&quot;:[\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample1&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample2&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample3&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample4&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n```\r\nand we want to read &quot;submissionOffsets&quot; and extract attributeName and attributeValue based on attribute name for example &quot;sample1&quot; and expected structure should be  **in case of Match**\r\n```\r\n{\r\n\t&quot;positions&quot;: {\r\n\t\t&quot;node&quot;: &quot;abc&quot;\r\n\t}\r\n\t&quot;submissions&quot; :{\r\n\t\t&quot;submissionOffsets&quot;:[\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample1&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample2&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample3&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample4&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t}\r\n\t\t\r\n\t},\r\n&quot;attributeName&quot;: &quot;sample1&quot;,\r\n&quot;attributeValue&quot;: 1224\r\n}\r\n\r\n\r\n**Incase of No Match**\r\n\r\n{\r\n\t&quot;positions&quot;: {\r\n\t\t&quot;node&quot;: &quot;abc&quot;\r\n\t}\r\n\t&quot;submissions&quot; :{\r\n\t\t&quot;submissionOffsets&quot;:[\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample1&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample2&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample3&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;attributeName&quot;: &quot;sample4&quot;,\r\n\t\t\t&quot;attributeValue&quot;: 1224\r\n\t\t}\r\n\t\t\r\n\t},\r\n&quot;attributeName&quot;: null,\r\n&quot;attributeValue&quot;: 0.00\r\n}\r\n\r\n```\r\nThis has to be done in dataframes\r\n\r\n\r\nI was trying with dataframes i exploded submissions.submissionOffsets , then checked for attribute name and value, but this giving one column, i have to join that back to original dataframe. ","title":"handling nested Json structure","body":"<p>suppose we have following json structure :</p>\n<pre><code>{\n    &quot;positions&quot;: {\n        &quot;node&quot;: &quot;abc&quot;\n    }\n    &quot;submissions&quot; :{\n        &quot;submissionOffsets&quot;:[\n        {\n            &quot;attributeName&quot;: &quot;sample1&quot;,\n            &quot;attributeValue&quot;: 1224\n        },\n        {\n            &quot;attributeName&quot;: &quot;sample2&quot;,\n            &quot;attributeValue&quot;: 1224\n        },\n        {\n            &quot;attributeName&quot;: &quot;sample3&quot;,\n            &quot;attributeValue&quot;: 1224\n        },\n        {\n            &quot;attributeName&quot;: &quot;sample4&quot;,\n            &quot;attributeValue&quot;: 1224\n        }\n        \n    }\n}\n</code></pre>\n<p>and we want to read &quot;submissionOffsets&quot; and extract attributeName and attributeValue based on attribute name for example &quot;sample1&quot; and expected structure should be  <strong>in case of Match</strong></p>\n<pre><code>{\n    &quot;positions&quot;: {\n        &quot;node&quot;: &quot;abc&quot;\n    }\n    &quot;submissions&quot; :{\n        &quot;submissionOffsets&quot;:[\n        {\n            &quot;attributeName&quot;: &quot;sample1&quot;,\n            &quot;attributeValue&quot;: 1224\n        },\n        {\n            &quot;attributeName&quot;: &quot;sample2&quot;,\n            &quot;attributeValue&quot;: 1224\n        },\n        {\n            &quot;attributeName&quot;: &quot;sample3&quot;,\n            &quot;attributeValue&quot;: 1224\n        },\n        {\n            &quot;attributeName&quot;: &quot;sample4&quot;,\n            &quot;attributeValue&quot;: 1224\n        }\n        \n    },\n&quot;attributeName&quot;: &quot;sample1&quot;,\n&quot;attributeValue&quot;: 1224\n}\n\n\n**Incase of No Match**\n\n{\n    &quot;positions&quot;: {\n        &quot;node&quot;: &quot;abc&quot;\n    }\n    &quot;submissions&quot; :{\n        &quot;submissionOffsets&quot;:[\n        {\n            &quot;attributeName&quot;: &quot;sample1&quot;,\n            &quot;attributeValue&quot;: 1224\n        },\n        {\n            &quot;attributeName&quot;: &quot;sample2&quot;,\n            &quot;attributeValue&quot;: 1224\n        },\n        {\n            &quot;attributeName&quot;: &quot;sample3&quot;,\n            &quot;attributeValue&quot;: 1224\n        },\n        {\n            &quot;attributeName&quot;: &quot;sample4&quot;,\n            &quot;attributeValue&quot;: 1224\n        }\n        \n    },\n&quot;attributeName&quot;: null,\n&quot;attributeValue&quot;: 0.00\n}\n\n</code></pre>\n<p>This has to be done in dataframes</p>\n<p>I was trying with dataframes i exploded submissions.submissionOffsets , then checked for attribute name and value, but this giving one column, i have to join that back to original dataframe.</p>\n"},{"tags":["java","toggle","accordion","wrapper"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1691506542,"post_id":76860744,"comment_id":135499297,"body_markdown":"Please read [Why is &quot;Can someone help me?&quot; not an actual question?](https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question) and rewrite your question to ask an actual question.","body":"Please read <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is &quot;Can someone help me?&quot; not an actual question?</a> and rewrite your question to ask an actual question."}],"owner":{"account_id":29185507,"reputation":1,"user_id":22358783,"display_name":"Sarah Crook"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691506447,"creation_date":1691506447,"question_id":76860744,"body_markdown":"I am having the hardest time with this one... any help is GREATLY appreciated.\r\n\r\nHTML:\r\n\r\n```\r\n&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n    &lt;title&gt;FAQ Accordion&lt;/title&gt;\r\n    &lt;!--Font Awesome--&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css&quot;&gt;\r\n    &lt;!--Google Font--&gt;\r\n    &lt;link href=&quot;https://static.showit.co/file/8xjqzk5sTAmLSMIgi-USpQ/63707/tan_-_enigma.woff&quot; rel=&quot;stylesheet&quot;&gt;\r\n    &lt;!--Stylesheet--&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;\r\n\r\n\r\n    &lt;div class=&quot;container&quot;&gt;\r\n        &lt;div class=&quot;wrapper&quot;&gt;\r\n            &lt;button class=&quot;toggle&quot;&gt;\r\n                How would you describe your style?\r\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\r\n            &lt;/button&gt;\r\n            &lt;div class=&quot;content&quot;&gt;\r\n                &lt;p&gt;answer&lt;/p&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;wrapper&quot;&gt;\r\n            &lt;button class=&quot;toggle&quot;&gt;\r\n                What do your wedding packages include?\r\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\r\n            &lt;/button&gt;\r\n            &lt;div class=&quot;content&quot;&gt;\r\n                &lt;p&gt;answer&lt;/p&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;wrapper&quot;&gt;\r\n            &lt;button class=&quot;toggle&quot;&gt;\r\n                Do you photograph LGBTQIA+ couples?\r\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\r\n            &lt;/button&gt;\r\n            &lt;div class=&quot;content&quot;&gt;\r\n                &lt;p&gt;answer&lt;/p&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n\r\n&lt;div class=&quot;wrapper&quot;&gt;\r\n            &lt;button class=&quot;toggle&quot;&gt;\r\n                Do you offer payment plans?\r\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\r\n            &lt;/button&gt;\r\n            &lt;div class=&quot;content&quot;&gt;\r\n                &lt;p&gt;answer&lt;/p&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n&lt;div class=&quot;wrapper&quot;&gt;\r\n            &lt;button class=&quot;toggle&quot;&gt;\r\n                Do you help with posing?\r\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\r\n            &lt;/button&gt;\r\n            &lt;div class=&quot;content&quot;&gt;\r\n                &lt;p&gt;answer&lt;/p&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n&lt;div class=&quot;wrapper&quot;&gt;\r\n            &lt;button class=&quot;toggle&quot;&gt;\r\n                I’m obsessed! How do I book you?\r\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\r\n            &lt;/button&gt;\r\n            &lt;div class=&quot;content&quot;&gt;\r\n                &lt;p&gt;answer&lt;/p&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n    &lt;!--Script--&gt;\r\n    &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;\r\n```\r\n\r\n\r\n\r\nCSS:\r\n\r\n```\r\n@font-face {\r\nfont-family: &quot;tan-enigma&quot;;\r\nsrc: url(&quot;https://static.showit.co/file/8xjqzk5sTAmLSMIgi-USpQ/63707/tan_-_enigma.woff&quot;);\r\nsrc: url(&quot;https://static.showit.co/file/8xjqzk5sTAmLSMIgi-USpQ/63707/tan_-_enigma.woff&quot;);\r\n}\r\n\r\n*,\r\n*:before,\r\n*:after{\r\n    padding: 0;\r\n    margin: 0;\r\n    box-sizing: border-box;\r\n}\r\nbody{\r\n    background-color: rgb(16,120,108);\r\n}\r\n.container{\r\n    width: 45%;\r\n    min-width: 1056px;\r\n    position: absolute;\r\n    transform: translate(-50%,-50%);\r\n    top: 50%;\r\n    left: 50%;\r\n}\r\n\r\n@media only screen and (max-width: 600px) {.container{\r\n    width: 45%;\r\n    min-width: 275px;\r\n    position: absolute;\r\n    transform: translate(-50%,-50%);\r\n    top: 50%;\r\n    left: 50%;\r\n}\r\n.toggle{\r\n    width: 100%;\r\n    background-color: transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    font-size: 12px;\r\n    color: #C5A05A;\r\n    font-weight: 500;\r\n    border: none;\r\n    outline: none;\r\n    cursor: pointer;\r\n    padding: 10px 0;}\r\n\r\n.content{\r\n    position: relative;\r\n    font-size: 12px;\r\n    text-align: justify;\r\n    line-height: 12px;\r\n    height: 0;\r\n    overflow: hidden;\r\n    transition: all 1s;\r\n    font-family: rubik!important;\r\n}}\r\n\r\n.wrapper{\r\n      background-color: #ffffff;\r\n    margin-bottom: 20px;\r\n    padding: 15px 40px;\r\n    border-radius: 5px;\r\n    box-shadow: 0 15px 25px rgba(0, 0, 50, 0.2);\r\n    overflow: hidden!important;\r\n\r\n}\r\n.toggle,\r\n.content{\r\n    font-family: &quot;tan-enigma&quot;,sans-serif;\r\n}\r\n.toggle{\r\n    width: 100%;\r\n    background-color: transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    font-size: 16px;\r\n    color: #C5A05A;\r\n    font-weight: 500;\r\n    border: none;\r\n    outline: none;\r\n    cursor: pointer;\r\n    padding: 15px 0;\r\n\r\n}\r\n\r\n .toggle.selected {\r\n            color: black;\r\n        }\r\n\r\n.content{\r\n    position: relative;\r\n    font-size: 14px;\r\n    text-align: justify;\r\n    line-height: 30px;\r\n    height: 0;\r\n    overflow: hidden;\r\n    transition: all 1s;\r\n    font-family: rubik!important;\r\n}\r\n\r\n.wrapper {box-shadow: #E6C8BF;}\r\nbutton.toggl element.style { color: #C5A05A;}\r\n\r\n.wrapper.expanded {\r\n    margin-bottom: 0;\r\n    box-shadow: none;\r\n}\r\n```\r\n\r\n\r\n\r\nJAVA:\r\n```\r\nlet toggles = document.getElementsByClassName(&#39;toggle&#39;);\r\nlet contentDiv = document.getElementsByClassName(&#39;content&#39;);\r\nlet contentHeight = [];\r\n\r\nfor (let i = 0; i &lt; toggles.length; i++) {\r\n    toggles[i].addEventListener(&#39;click&#39;, () =&gt; {\r\n        if (contentHeight[i] === undefined) {\r\n            contentHeight[i] = contentDiv[i].scrollHeight + &quot;px&quot;;\r\n        }\r\n\r\n        if (contentDiv[i].classList.contains(&#39;expanded&#39;)) {\r\n            // Collapse the clicked accordion\r\n            contentDiv[i].classList.remove(&#39;expanded&#39;);\r\n            contentDiv[i].style.height = &quot;0px&quot;;\r\n        } else {\r\n            // Collapse other expanded accordions\r\n            for (let j = 0; j &lt; contentDiv.length; j++) {\r\n                if (j !== i) {\r\n                    contentDiv[j].classList.remove(&#39;expanded&#39;);\r\n                    contentDiv[j].style.height = &quot;0px&quot;;\r\n                }\r\n            }\r\n\r\n            // Expand the clicked accordion\r\n            contentDiv[i].classList.add(&#39;expanded&#39;);\r\n            contentDiv[i].style.height = contentHeight[i];\r\n\r\n            // Calculate the total expanded content height\r\n            let totalExpandedHeight = 0;\r\n            for (let j = 0; j &lt; contentDiv.length; j++) {\r\n                if (j !== i &amp;&amp; contentDiv[j].classList.contains(&#39;expanded&#39;)) {\r\n                    totalExpandedHeight += parseInt(contentHeight[j]);\r\n                }\r\n            }\r\n\r\n            // Adjust the scroll position to prevent expanding upwards\r\n            window.scrollBy(0, totalExpandedHeight);\r\n        }\r\n    });\r\n}\r\n\r\n```\r\n\r\nNo matter what I adjust I cannot keep the accordion from expanding upwards once a question is selected and it&#39;s causing an awful overlap with the other elements I have in the page design. Is there any way to force this to only expand downwards?\r\n\r\nI tried several different wrapper adjustments to no avail.","title":"Can someone help me figure out a way to prevent an accordion from expanding upwards when the toggle is selected?","body":"<p>I am having the hardest time with this one... any help is GREATLY appreciated.</p>\n<p>HTML:</p>\n<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    &lt;title&gt;FAQ Accordion&lt;/title&gt;\n    &lt;!--Font Awesome--&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css&quot;&gt;\n    &lt;!--Google Font--&gt;\n    &lt;link href=&quot;https://static.showit.co/file/8xjqzk5sTAmLSMIgi-USpQ/63707/tan_-_enigma.woff&quot; rel=&quot;stylesheet&quot;&gt;\n    &lt;!--Stylesheet--&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;\n\n\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;div class=&quot;wrapper&quot;&gt;\n            &lt;button class=&quot;toggle&quot;&gt;\n                How would you describe your style?\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\n            &lt;/button&gt;\n            &lt;div class=&quot;content&quot;&gt;\n                &lt;p&gt;answer&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;wrapper&quot;&gt;\n            &lt;button class=&quot;toggle&quot;&gt;\n                What do your wedding packages include?\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\n            &lt;/button&gt;\n            &lt;div class=&quot;content&quot;&gt;\n                &lt;p&gt;answer&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;wrapper&quot;&gt;\n            &lt;button class=&quot;toggle&quot;&gt;\n                Do you photograph LGBTQIA+ couples?\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\n            &lt;/button&gt;\n            &lt;div class=&quot;content&quot;&gt;\n                &lt;p&gt;answer&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n&lt;div class=&quot;wrapper&quot;&gt;\n            &lt;button class=&quot;toggle&quot;&gt;\n                Do you offer payment plans?\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\n            &lt;/button&gt;\n            &lt;div class=&quot;content&quot;&gt;\n                &lt;p&gt;answer&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n&lt;div class=&quot;wrapper&quot;&gt;\n            &lt;button class=&quot;toggle&quot;&gt;\n                Do you help with posing?\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\n            &lt;/button&gt;\n            &lt;div class=&quot;content&quot;&gt;\n                &lt;p&gt;answer&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n&lt;div class=&quot;wrapper&quot;&gt;\n            &lt;button class=&quot;toggle&quot;&gt;\n                I’m obsessed! How do I book you?\n                &lt;i class=&quot;fas fa-plus icon&quot;&gt;&lt;/i&gt;\n            &lt;/button&gt;\n            &lt;div class=&quot;content&quot;&gt;\n                &lt;p&gt;answer&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;!--Script--&gt;\n    &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>CSS:</p>\n<pre><code>@font-face {\nfont-family: &quot;tan-enigma&quot;;\nsrc: url(&quot;https://static.showit.co/file/8xjqzk5sTAmLSMIgi-USpQ/63707/tan_-_enigma.woff&quot;);\nsrc: url(&quot;https://static.showit.co/file/8xjqzk5sTAmLSMIgi-USpQ/63707/tan_-_enigma.woff&quot;);\n}\n\n*,\n*:before,\n*:after{\n    padding: 0;\n    margin: 0;\n    box-sizing: border-box;\n}\nbody{\n    background-color: rgb(16,120,108);\n}\n.container{\n    width: 45%;\n    min-width: 1056px;\n    position: absolute;\n    transform: translate(-50%,-50%);\n    top: 50%;\n    left: 50%;\n}\n\n@media only screen and (max-width: 600px) {.container{\n    width: 45%;\n    min-width: 275px;\n    position: absolute;\n    transform: translate(-50%,-50%);\n    top: 50%;\n    left: 50%;\n}\n.toggle{\n    width: 100%;\n    background-color: transparent;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 12px;\n    color: #C5A05A;\n    font-weight: 500;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    padding: 10px 0;}\n\n.content{\n    position: relative;\n    font-size: 12px;\n    text-align: justify;\n    line-height: 12px;\n    height: 0;\n    overflow: hidden;\n    transition: all 1s;\n    font-family: rubik!important;\n}}\n\n.wrapper{\n      background-color: #ffffff;\n    margin-bottom: 20px;\n    padding: 15px 40px;\n    border-radius: 5px;\n    box-shadow: 0 15px 25px rgba(0, 0, 50, 0.2);\n    overflow: hidden!important;\n\n}\n.toggle,\n.content{\n    font-family: &quot;tan-enigma&quot;,sans-serif;\n}\n.toggle{\n    width: 100%;\n    background-color: transparent;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 16px;\n    color: #C5A05A;\n    font-weight: 500;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    padding: 15px 0;\n\n}\n\n .toggle.selected {\n            color: black;\n        }\n\n.content{\n    position: relative;\n    font-size: 14px;\n    text-align: justify;\n    line-height: 30px;\n    height: 0;\n    overflow: hidden;\n    transition: all 1s;\n    font-family: rubik!important;\n}\n\n.wrapper {box-shadow: #E6C8BF;}\nbutton.toggl element.style { color: #C5A05A;}\n\n.wrapper.expanded {\n    margin-bottom: 0;\n    box-shadow: none;\n}\n</code></pre>\n<p>JAVA:</p>\n<pre><code>let toggles = document.getElementsByClassName('toggle');\nlet contentDiv = document.getElementsByClassName('content');\nlet contentHeight = [];\n\nfor (let i = 0; i &lt; toggles.length; i++) {\n    toggles[i].addEventListener('click', () =&gt; {\n        if (contentHeight[i] === undefined) {\n            contentHeight[i] = contentDiv[i].scrollHeight + &quot;px&quot;;\n        }\n\n        if (contentDiv[i].classList.contains('expanded')) {\n            // Collapse the clicked accordion\n            contentDiv[i].classList.remove('expanded');\n            contentDiv[i].style.height = &quot;0px&quot;;\n        } else {\n            // Collapse other expanded accordions\n            for (let j = 0; j &lt; contentDiv.length; j++) {\n                if (j !== i) {\n                    contentDiv[j].classList.remove('expanded');\n                    contentDiv[j].style.height = &quot;0px&quot;;\n                }\n            }\n\n            // Expand the clicked accordion\n            contentDiv[i].classList.add('expanded');\n            contentDiv[i].style.height = contentHeight[i];\n\n            // Calculate the total expanded content height\n            let totalExpandedHeight = 0;\n            for (let j = 0; j &lt; contentDiv.length; j++) {\n                if (j !== i &amp;&amp; contentDiv[j].classList.contains('expanded')) {\n                    totalExpandedHeight += parseInt(contentHeight[j]);\n                }\n            }\n\n            // Adjust the scroll position to prevent expanding upwards\n            window.scrollBy(0, totalExpandedHeight);\n        }\n    });\n}\n\n</code></pre>\n<p>No matter what I adjust I cannot keep the accordion from expanding upwards once a question is selected and it's causing an awful overlap with the other elements I have in the page design. Is there any way to force this to only expand downwards?</p>\n<p>I tried several different wrapper adjustments to no avail.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1691507910,"post_id":76860584,"comment_id":135499649,"body_markdown":"In what way does responding with a 404 instead of a 403 provide &quot;protection from hackers&quot;? If you configure your authorization layer correctly, then non-existent resources within sub-paths requiring authentication would always produce a 403 for unauthenticated users, and only if they are authenticated would they receive a 404.","body":"In what way does responding with a 404 instead of a 403 provide &quot;protection from hackers&quot;? If you configure your authorization layer correctly, then non-existent resources within sub-paths requiring authentication would always produce a 403 for unauthenticated users, and only if they are authenticated would they receive a 404."},{"owner":{"account_id":964649,"reputation":458,"user_id":988304,"display_name":"stevestorey"},"score":0,"creation_date":1691528295,"post_id":76860584,"comment_id":135503304,"body_markdown":"You can do it either way really, but a 403 kinda implies that &quot;they might be something here if you can find a vulnerability&quot; whereas a 404 implies &quot;there&#39;s nothing here in any case&quot; which _may_ cause an attacker not to bother looking further.","body":"You can do it either way really, but a 403 kinda implies that &quot;they might be something here if you can find a vulnerability&quot; whereas a 404 implies &quot;there&#39;s nothing here in any case&quot; which <i>may</i> cause an attacker not to bother looking further."},{"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"score":0,"creation_date":1691570086,"post_id":76860584,"comment_id":135508061,"body_markdown":"yup, exactly what @stevestorey said - just don&#39;t want to give any clues at all away so want them to think cool there is nothing here","body":"yup, exactly what @stevestorey said - just don&#39;t want to give any clues at all away so want them to think cool there is nothing here"},{"owner":{"account_id":21967042,"reputation":84,"user_id":16244113,"display_name":"mamJavad"},"score":0,"creation_date":1691587455,"post_id":76860584,"comment_id":135511722,"body_markdown":"you can write a controller advice for 403 error and return response entity of 404 I think","body":"you can write a controller advice for 403 error and return response entity of 404 I think"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691671131,"post_id":76860714,"comment_id":135524683,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76860714/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":9767905,"reputation":1,"user_id":7240779,"display_name":"Bubu Tripathy"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1691506254,"creation_date":1691506254,"answer_id":76860714,"question_id":76860584,"body_markdown":"You’re achieve this redirection by configuring web.xml file. You&#39;ll want to use the &lt;error-page&gt; element to map the 403 status code to a specific error page, which in turn will be redirected to the 404 error page. Here&#39;s an example of how you can do this:\r\n\r\n    &lt;web-app&gt;\r\n    &lt;!-- Other configurations --&gt;\r\n\r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;403&lt;/error-code&gt;\r\n        &lt;location&gt;/redirect-404&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;404&lt;/error-code&gt;\r\n        &lt;location&gt;/404-error-page.jsp&lt;/location&gt; &lt;!-- Or your desired 404 page --&gt;\r\n    &lt;/error-page&gt;\r\n\r\n    &lt;!-- Other configurations --&gt;\r\n&lt;/web-app&gt;\r\n","title":"Can you redirect a 403 to a 404 in java spring?","body":"<p>You’re achieve this redirection by configuring web.xml file. You'll want to use the  element to map the 403 status code to a specific error page, which in turn will be redirected to the 404 error page. Here's an example of how you can do this:</p>\n<pre><code>&lt;web-app&gt;\n&lt;!-- Other configurations --&gt;\n\n&lt;error-page&gt;\n    &lt;error-code&gt;403&lt;/error-code&gt;\n    &lt;location&gt;/redirect-404&lt;/location&gt;\n&lt;/error-page&gt;\n\n&lt;error-page&gt;\n    &lt;error-code&gt;404&lt;/error-code&gt;\n    &lt;location&gt;/404-error-page.jsp&lt;/location&gt; &lt;!-- Or your desired 404 page --&gt;\n&lt;/error-page&gt;\n\n&lt;!-- Other configurations --&gt;\n</code></pre>\n\n"}],"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691506254,"creation_date":1691505340,"question_id":76860584,"body_markdown":"I want to redirect users that land on a 403 to a 404 instead. This is simply just an extra bit of protection from hackers so that it doesn&#39;t give away our file structure. \r\n\r\nIs there a nice configuration i can do inside my web.xml?\r\n\r\nSpring 4.3\r\nSpring Security 4.2","title":"Can you redirect a 403 to a 404 in java spring?","body":"<p>I want to redirect users that land on a 403 to a 404 instead. This is simply just an extra bit of protection from hackers so that it doesn't give away our file structure.</p>\n<p>Is there a nice configuration i can do inside my web.xml?</p>\n<p>Spring 4.3\nSpring Security 4.2</p>\n"},{"tags":["java","sql","jdbc","aws-lambda","amazon-redshift"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691505785,"post_id":76858709,"comment_id":135499133,"body_markdown":"Is that the full exception stacktrace?","body":"Is that the full exception stacktrace?"},{"owner":{"account_id":6483303,"reputation":198,"user_id":5019659,"accept_rate":0,"display_name":"Arun Ravichandran"},"score":0,"creation_date":1701437717,"post_id":76858709,"comment_id":136778704,"body_markdown":"Any luck to find out the solution ? Exactly facing same scenario and getting same exception","body":"Any luck to find out the solution ? Exactly facing same scenario and getting same exception"}],"owner":{"account_id":3252222,"reputation":11,"user_id":2742186,"display_name":"user2742186"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691505770,"creation_date":1691490763,"question_id":76858709,"body_markdown":"I am facing an issue while trying to establish a JDBC connection to an Amazon Redshift workgroup from a Lambda function that is also deployed within the same VPC. My goal is to execute insert queries on the Redshift cluster using the JDBC connection. However, I am encountering the following error:\r\n\r\n```none\r\njava.sql.SQLException: The connection attempt failed.\r\nat com.amazon.redshift.util.RedshiftException.getSQLException(RedshiftException.java:56)\r\nat com.amazon.redshift.Driver.connect(Driver.java:326)\r\n```\r\n\r\nHere&#39;s some context on my setup:\r\n\r\nI have created a Redshift workgroup and a corresponding cluster within the same VPC. The Lambda function and the Redshift cluster are both in the same VPC. I am using the appropriate JDBC URL with the IAM authentication method: `jdbc:redshift:iam://&lt;cluster-endpoint&gt;:&lt;port&gt;/&lt;database-name&gt;`\r\n.\r\nI have already verified the following:\r\n\r\n- The Lambda function has the necessary IAM permissions to access the Redshift cluster.\r\n- The Lambda function is assigned a role that allows VPC access.\r\n- The security group settings for both the Lambda function and the Redshift cluster allow necessary inbound and outbound traffic.\r\n\r\nDespite this verification, I am unable to establish the JDBC connection successfully. Are there any additional steps or considerations that I might be missing to resolve this issue? I appreciate any insights or suggestions to help me troubleshoot and resolve this problem.\r\n\r\n","title":"Trouble establishing JDBC connection to Amazon Redshift workgroup from Lambda function in VPC","body":"<p>I am facing an issue while trying to establish a JDBC connection to an Amazon Redshift workgroup from a Lambda function that is also deployed within the same VPC. My goal is to execute insert queries on the Redshift cluster using the JDBC connection. However, I am encountering the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.sql.SQLException: The connection attempt failed.\nat com.amazon.redshift.util.RedshiftException.getSQLException(RedshiftException.java:56)\nat com.amazon.redshift.Driver.connect(Driver.java:326)\n</code></pre>\n<p>Here's some context on my setup:</p>\n<p>I have created a Redshift workgroup and a corresponding cluster within the same VPC. The Lambda function and the Redshift cluster are both in the same VPC. I am using the appropriate JDBC URL with the IAM authentication method: <code>jdbc:redshift:iam://&lt;cluster-endpoint&gt;:&lt;port&gt;/&lt;database-name&gt;</code>\n.\nI have already verified the following:</p>\n<ul>\n<li>The Lambda function has the necessary IAM permissions to access the Redshift cluster.</li>\n<li>The Lambda function is assigned a role that allows VPC access.</li>\n<li>The security group settings for both the Lambda function and the Redshift cluster allow necessary inbound and outbound traffic.</li>\n</ul>\n<p>Despite this verification, I am unable to establish the JDBC connection successfully. Are there any additional steps or considerations that I might be missing to resolve this issue? I appreciate any insights or suggestions to help me troubleshoot and resolve this problem.</p>\n"},{"tags":["java","matlab"],"comments":[{"owner":{"account_id":1753605,"reputation":1375,"user_id":1602133,"accept_rate":50,"display_name":"dustincarr"},"score":0,"creation_date":1405098973,"post_id":24687530,"comment_id":38309002,"body_markdown":"After looking at this, there is no real solution.  Just the process of converting from a javaArray to a matlab array is outrageously time consuming.  In fact, you are much better off writing to a file in Java and then reading a file into matlab rather than trying to convert a million bytes between the two.","body":"After looking at this, there is no real solution.  Just the process of converting from a javaArray to a matlab array is outrageously time consuming.  In fact, you are much better off writing to a file in Java and then reading a file into matlab rather than trying to convert a million bytes between the two."}],"answers":[{"comments":[{"owner":{"account_id":1753605,"reputation":1375,"user_id":1602133,"accept_rate":50,"display_name":"dustincarr"},"score":0,"creation_date":1405077026,"post_id":24687853,"comment_id":38295590,"body_markdown":"jbytes has to be declared within matlab, so that the data can be passed directly into matlab.  So I guess this question comes down to how to declare a java array in matlab that contains a java primitive.","body":"jbytes has to be declared within matlab, so that the data can be passed directly into matlab.  So I guess this question comes down to how to declare a java array in matlab that contains a java primitive."}],"tags":[],"owner":{"account_id":2320511,"reputation":93,"user_id":2036385,"display_name":"Hajmola"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405034418,"creation_date":1405034418,"answer_id":24687853,"question_id":24687530,"body_markdown":"Try byte [] jbytes = new byte[8];\r\nByte class is a wrapper for the primitive byte which is the required argument for DataInpuStream.read(byte []).","title":"Reading data from Java DataInputStream in Matlab for fast communication of large amounts of data","body":"<p>Try byte [] jbytes = new byte[8];\nByte class is a wrapper for the primitive byte which is the required argument for DataInpuStream.read(byte []).</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1691744184,"post_id":76860638,"comment_id":135535949,"body_markdown":"Your `readAll` method is a bit of a misnomer since it only reads up to 65536 bytes and it appears that the OP is trying to read a lot more bytes than that. So I&#39;m not sure how much your _solution will help others_.","body":"Your <code>readAll</code> method is a bit of a misnomer since it only reads up to 65536 bytes and it appears that the OP is trying to read a lot more bytes than that. So I&#39;m not sure how much your <i>solution will help others</i>."},{"owner":{"account_id":29185385,"reputation":1,"user_id":22358684,"display_name":"Martin"},"score":0,"creation_date":1693393558,"post_id":76860638,"comment_id":135754069,"body_markdown":"Thanks @Abra for your comment. You can call the function readAll multiple times until it returns 0. Then the buffer is empty.","body":"Thanks @Abra for your comment. You can call the function readAll multiple times until it returns 0. Then the buffer is empty."}],"tags":[],"owner":{"account_id":29185385,"reputation":1,"user_id":22358684,"display_name":"Martin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691505723,"creation_date":1691505673,"answer_id":76860638,"question_id":24687530,"body_markdown":"This problem is created 9 years ago, but maybe my solution will help others.\r\n\r\nI wrote a small wrapper class to read all available byte to a public buffer.\r\n\r\n    public class ByteInputStream extends java.io.FilterInputStream\r\n    {\r\n      public byte[] Buffer = new byte[65536];\r\n      \r\n      public ByteInputStream(java.io.InputStream IS)\r\n      {\r\n        super(IS);\r\n      }\r\n    \r\n      public int readAll() throws java.io.IOException\r\n      {\r\n        return this.read(Buffer);\r\n      }\r\n    }\r\n\r\nAfter this file is compiled with javac you can us it in Matlab like:\r\n\r\n    Socket = java.net.Socket(&#39;127.0.0.1&#39;, 123);\r\n    SocketIn = this.Socket.getOutputStream();\r\n    SocketOut = ByteInputStream(this.Socket.getInputStream());\r\n    if SocketOut.available() &gt; 0\r\n      NumBytes = SocketOut.readAll();\r\n      Buffer = Socket.Buffer(1:NumBytes);\r\n      disp(Buffer);\r\n    end\r\n\r\n\r\n","title":"Reading data from Java DataInputStream in Matlab for fast communication of large amounts of data","body":"<p>This problem is created 9 years ago, but maybe my solution will help others.</p>\n<p>I wrote a small wrapper class to read all available byte to a public buffer.</p>\n<pre><code>public class ByteInputStream extends java.io.FilterInputStream\n{\n  public byte[] Buffer = new byte[65536];\n  \n  public ByteInputStream(java.io.InputStream IS)\n  {\n    super(IS);\n  }\n\n  public int readAll() throws java.io.IOException\n  {\n    return this.read(Buffer);\n  }\n}\n</code></pre>\n<p>After this file is compiled with javac you can us it in Matlab like:</p>\n<pre><code>Socket = java.net.Socket('127.0.0.1', 123);\nSocketIn = this.Socket.getOutputStream();\nSocketOut = ByteInputStream(this.Socket.getInputStream());\nif SocketOut.available() &gt; 0\n  NumBytes = SocketOut.readAll();\n  Buffer = Socket.Buffer(1:NumBytes);\n  disp(Buffer);\nend\n</code></pre>\n"}],"owner":{"account_id":1753605,"reputation":1375,"user_id":1602133,"accept_rate":50,"display_name":"dustincarr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":664,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691505723,"creation_date":1405032363,"question_id":24687530,"body_markdown":"I am trying to read data over TCP into matlab using Java classes.  Everything I have seen online for this uses the java.io.DataInputStream.readbyte() method to pull data from the tcp datastream into matlab.  This is much, much too slow (by a factor of about 1000) for the very large amounts of data I am trying to stream.\r\n\r\nI imagine that using the java.io.DataInputStream.read(byte b[]) method would be much faster.  However, I can&#39;t seem to coerce it to work.\r\n\r\nFor example, I am trying the following to create the java byte array in matlab\r\n\r\n    jbytes = javaArray(&#39;java.lang.Byte&#39;,8)\r\n\r\nI then create a DataInputStream object and try to use the read method\r\n\r\n    dataInputStream.read(jbytes)\r\n\r\nAnd I get the error:\r\n\r\nNo method &#39;read&#39; with matching signature found for class &#39;java.io.DataInputStream&#39;\r\n\r\nBased on the Matlab documentation, it seems like I should be able to do this.\r\n\r\nThanks in advance for any help.","title":"Reading data from Java DataInputStream in Matlab for fast communication of large amounts of data","body":"<p>I am trying to read data over TCP into matlab using Java classes.  Everything I have seen online for this uses the java.io.DataInputStream.readbyte() method to pull data from the tcp datastream into matlab.  This is much, much too slow (by a factor of about 1000) for the very large amounts of data I am trying to stream.</p>\n\n<p>I imagine that using the java.io.DataInputStream.read(byte b[]) method would be much faster.  However, I can't seem to coerce it to work.</p>\n\n<p>For example, I am trying the following to create the java byte array in matlab</p>\n\n<pre><code>jbytes = javaArray('java.lang.Byte',8)\n</code></pre>\n\n<p>I then create a DataInputStream object and try to use the read method</p>\n\n<pre><code>dataInputStream.read(jbytes)\n</code></pre>\n\n<p>And I get the error:</p>\n\n<p>No method 'read' with matching signature found for class 'java.io.DataInputStream'</p>\n\n<p>Based on the Matlab documentation, it seems like I should be able to do this.</p>\n\n<p>Thanks in advance for any help.</p>\n"},{"tags":["java","spring","spring-boot","spring-integration","spring-integration-sftp"],"answers":[{"comments":[{"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"score":0,"creation_date":1691576697,"post_id":76860643,"comment_id":135509417,"body_markdown":"````You also can simply have a channel(c -&gt; c.executor()) just after this from().````\n\nThe .executor() method requires arguments with Spring Integration 5.5, one of them being the Executor. I&#39;ve put &quot;Executors.newFixedThreadPool(10)&quot; here.\n\nSo, if I set maxMessagesPerPoll to 10, having 100 SFTP files to read, it should use up to 10 threads in parallel, each handling 10 files?","body":"<code>You also can simply have a channel(c -&gt; c.executor()) just after this from().</code>  The .executor() method requires arguments with Spring Integration 5.5, one of them being the Executor. I&#39;ve put &quot;Executors.newFixedThreadPool(10)&quot; here.  So, if I set maxMessagesPerPoll to 10, having 100 SFTP files to read, it should use up to 10 threads in parallel, each handling 10 files?"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1691588594,"post_id":76860643,"comment_id":135512004,"body_markdown":"Well, I just gave you the pointer to that API which may help you. Of course, you need to provide an `Executor` for that channel to work properly. The `maxMessagesPerPoll` has a meaning for how much to ask the source in a single poll cycle. It is still going to produce a message for each result. All those messages are going be handed to an `ExecutorChannel`. So, with 10 threads you are going to have 10 messages in parallel, independently of the `maxMessagesPerPoll`. I suggest to look more into docs: https://docs.spring.io/spring-integration/docs/current/reference/html/core.html#executor-channel","body":"Well, I just gave you the pointer to that API which may help you. Of course, you need to provide an <code>Executor</code> for that channel to work properly. The <code>maxMessagesPerPoll</code> has a meaning for how much to ask the source in a single poll cycle. It is still going to produce a message for each result. All those messages are going be handed to an <code>ExecutorChannel</code>. So, with 10 threads you are going to have 10 messages in parallel, independently of the <code>maxMessagesPerPoll</code>. I suggest to look more into docs: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/core.html#executor-channel\" rel=\"nofollow noreferrer\">docs.spring.io/spring-integration/docs/current/reference/htm&zwnj;&#8203;l/&hellip;</a>"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1691588600,"post_id":76860643,"comment_id":135512008,"body_markdown":"and about poller: https://docs.spring.io/spring-integration/docs/current/reference/html/core.html#channel-adapter-namespace-inbound","body":"and about poller: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/core.html#channel-adapter-namespace-inbound\" rel=\"nofollow noreferrer\">docs.spring.io/spring-integration/docs/current/reference/htm&zwnj;&#8203;l/&hellip;</a>"}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691505700,"creation_date":1691505700,"answer_id":76860643,"question_id":76860135,"body_markdown":"Your `publishSubscribeChannel()` configuration is correct and don&#39;t try to make it parallel since you cannot remove (or even close) a remote file because you deal with an `InputStream` in a payload after `Sftp.inboundStreamingAdapter()`. To make it parallel from that source perspective, you need to look into a second argument of the `IntegrationFlows.from()`:\r\n\r\n    static IntegrationFlowBuilder from(MessageSource&lt;?&gt; messageSource,\r\n\t\t\t@Nullable Consumer&lt;SourcePollingChannelAdapterSpec&gt; endpointConfigurer) {\r\n\r\nThat `Consumer&lt;SourcePollingChannelAdapterSpec&gt;` gives you an access to source polling channel adapter options. One of them is `poller(Function&lt;PollerFactory, PollerSpec&gt; pollers)` and can be configured like:\r\n\r\n    e -&gt; e.poller(p -&gt; p.fixedDelay(1000).taskExecutor())\r\n\r\nThat `taskExecutor` allows a scheduled task to be shifted to different thread. Be careful with `maxMessagesPerPoll` (`1` by default for `SourcePollingChannelAdapter`): if it is more than `1`, then that number of messages are going to be emitted in the same thread.\r\n\r\n\r\nYou also can simply have a `channel(c -&gt; c.executor())` just after this `from()`.","title":"Spring Integration: Handle messages from Sftp.inboundStreamingAdapter in parallel","body":"<p>Your <code>publishSubscribeChannel()</code> configuration is correct and don't try to make it parallel since you cannot remove (or even close) a remote file because you deal with an <code>InputStream</code> in a payload after <code>Sftp.inboundStreamingAdapter()</code>. To make it parallel from that source perspective, you need to look into a second argument of the <code>IntegrationFlows.from()</code>:</p>\n<pre><code>static IntegrationFlowBuilder from(MessageSource&lt;?&gt; messageSource,\n        @Nullable Consumer&lt;SourcePollingChannelAdapterSpec&gt; endpointConfigurer) {\n</code></pre>\n<p>That <code>Consumer&lt;SourcePollingChannelAdapterSpec&gt;</code> gives you an access to source polling channel adapter options. One of them is <code>poller(Function&lt;PollerFactory, PollerSpec&gt; pollers)</code> and can be configured like:</p>\n<pre><code>e -&gt; e.poller(p -&gt; p.fixedDelay(1000).taskExecutor())\n</code></pre>\n<p>That <code>taskExecutor</code> allows a scheduled task to be shifted to different thread. Be careful with <code>maxMessagesPerPoll</code> (<code>1</code> by default for <code>SourcePollingChannelAdapter</code>): if it is more than <code>1</code>, then that number of messages are going to be emitted in the same thread.</p>\n<p>You also can simply have a <code>channel(c -&gt; c.executor())</code> just after this <code>from()</code>.</p>\n"}],"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76860643,"answer_count":1,"score":0,"last_activity_date":1691505700,"creation_date":1691502019,"question_id":76860135,"body_markdown":"So,\r\n\r\nif have a Spring Integration 5.5 / Spring Boot 2.7 flow that reads XML-files from a SFTP source, processes and stores them, then deletes. Things do work, but sequentially, meaning each file is processed after the other. \r\n\r\nI&#39;d like to do the processing and transforming asynchronously (not necessary in parallel, order is no no importance) to increase the througput. But I can&#39;t figure out, how to configure it.\r\n\r\nThe code:\r\n\r\n````java\r\nIntegrationFlows\r\n  .from(Sftp.inboundStreamingAdapter(sftpTemplate))\r\n  .publishSubscribeChannel(spec -&gt; spec\r\n    .subscribe(\r\n      flow -&gt; \r\n        flow\r\n         .transform( /* file content to xml */ )\r\n         .handle( /* persist as xml */ )\r\n     )\r\n    .subscribe(flow -&gt; flow.handle( /* remove file */ ))\r\n   )\r\n  .get()\r\n````\r\n\r\nI guess the async / parallel handling must be defined between the source and the pub/sub-channel. But how?\r\n\r\n","title":"Spring Integration: Handle messages from Sftp.inboundStreamingAdapter in parallel","body":"<p>So,</p>\n<p>if have a Spring Integration 5.5 / Spring Boot 2.7 flow that reads XML-files from a SFTP source, processes and stores them, then deletes. Things do work, but sequentially, meaning each file is processed after the other.</p>\n<p>I'd like to do the processing and transforming asynchronously (not necessary in parallel, order is no no importance) to increase the througput. But I can't figure out, how to configure it.</p>\n<p>The code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>IntegrationFlows\n  .from(Sftp.inboundStreamingAdapter(sftpTemplate))\n  .publishSubscribeChannel(spec -&gt; spec\n    .subscribe(\n      flow -&gt; \n        flow\n         .transform( /* file content to xml */ )\n         .handle( /* persist as xml */ )\n     )\n    .subscribe(flow -&gt; flow.handle( /* remove file */ ))\n   )\n  .get()\n</code></pre>\n<p>I guess the async / parallel handling must be defined between the source and the pub/sub-channel. But how?</p>\n"},{"tags":["java","spring-boot","cron","quartz"],"comments":[{"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"score":0,"creation_date":1691508078,"post_id":76860548,"comment_id":135499694,"body_markdown":"you can also check ShedLock to run scheduled jobs on multiple instances, but right now if it&#39;s enough to run on only 1 instance, then stay keep it up.","body":"you can also check ShedLock to run scheduled jobs on multiple instances, but right now if it&#39;s enough to run on only 1 instance, then stay keep it up."},{"owner":{"account_id":298835,"reputation":503,"user_id":605076,"display_name":"jholder"},"score":0,"creation_date":1693230524,"post_id":76860548,"comment_id":135729088,"body_markdown":"This doesn&#39;t anwer the actual question. However, ShedLock does provide another tool on the belt if your primary need is to prevent job execution across multiple running instances of an application/job.","body":"This doesn&#39;t anwer the actual question. However, ShedLock does provide another tool on the belt if your primary need is to prevent job execution across multiple running instances of an application/job."}],"owner":{"account_id":298835,"reputation":503,"user_id":605076,"display_name":"jholder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691505107,"creation_date":1691505107,"question_id":76860548,"body_markdown":"I&#39;ve configured quartz manually before, but I thought that this time around, i would try and utilize as much of the spring-boot (2.7.4) magic as I could.\r\n\r\n(I also want to say, it&#39;s entirely possible I was hoping for too much, but would appreciate any feedback. At the end of the day, I was hoping/thinking that using the @Scheduled annotation, would be sufficient to get the quartz jobs/triggers copied into the database-backed quartz tables.\r\n\r\nThe desired end state should result with the system being clustered, with the jobs stored in the application defined  dataSource. The application where the job runs is deployed to a cloud environment with multiple running instances, and we only need one of those apps to acutally do this work.\r\n\r\nFrom the quartz/spring perspective, I have the following config.\r\n\r\n```\r\nspring.quartz.scheduler-name=super-duper-scheduler\r\nspring.quartz.properties.org.quartz.scheduler.instanceId=AUTO\r\nspring.quartz.job-store-type=jdbc\r\nspring.quartz.properties.org.quartz.job-store.class=org.quartz.impl.jdbcjobstore.LocalDataSourceJobStore\r\nspring.quartz.properties.org.quartz.jobStore.tablePrefix = QRTZ_\r\nspring.quartz.properties.org.quartz.jobStore.isClustered = true\r\nspring.quartz.properties.org.quartz.jobStore.clusterCheckinInterval = 20000\r\n```\r\n\r\nIn the code, in a spring component i have:\r\n\r\n```\r\n    @Scheduled(cron = &quot;0 */20 * * * *&quot;)\r\n    public void updateVendorInfoFromSam() {\r\n      ... doing stuff\r\n    }\r\n```\r\nLooking at the logs after startup, everything looks about how i would expect\r\n\r\n\r\n```\r\n2023-08-08 09:14:12,264 [main] INFO  org.quartz.impl.StdSchedulerFactory - Using default implementation for ThreadExecutor\r\n2023-08-08 09:14:12,273 [main] INFO  o.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\r\n2023-08-08 09:14:12,274 [main] INFO  org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.3.2 created.\r\n2023-08-08 09:14:12,306 [main] INFO  o.s.s.quartz.LocalDataSourceJobStore - Using db table-based data access locking (synchronization).\r\n2023-08-08 09:14:12,307 [main] INFO  o.s.s.quartz.LocalDataSourceJobStore - JobStoreCMT initialized.\r\n2023-08-08 09:14:12,307 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.3.2) &#39;super-duper-scheduler&#39; with instanceId &#39;@#$@#$@#$&#39;\r\n  Scheduler class: &#39;org.quartz.core.QuartzScheduler&#39; - running locally.\r\n  NOT STARTED.\r\n  Currently in standby mode.\r\n  Number of jobs executed: 0\r\n  Using thread pool &#39;org.quartz.simpl.SimpleThreadPool&#39; - with 10 threads.\r\n  Using job-store &#39;org.springframework.scheduling.quartz.LocalDataSourceJobStore&#39; - which supports persistence. and is clustered.\r\n\r\n2023-08-08 09:14:12,308 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler &#39;super-duper-scheduler&#39; initialized from an externally provided properties instance.\r\n2023-08-08 09:14:12,308 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.3.2\r\n2023-08-08 09:14:12,308 [main] INFO  org.quartz.core.QuartzScheduler - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@1727d525\r\n```\r\n\r\nWhen I manually check the quartz database tables, a few tables have some minimum of data, but the jobs and triggers tables (which historically have held the job and trigger info) are not being written to (well at least, nothing is persisting). (Not sure that it matters at this point, but that ds has autocommit turned off.) \r\n\r\nThe overarching question I have is..... *should* I expect to set up a job in spring, using only the @Scheduled annotation, and have it run in a clustered manner (aka. only run on one instance) using quartz?  ","title":"Should spring boot write to the quartz database table(s) (aka QRTZ_TRIGGERS) when using only @Scheduled(cron=&#39;?&#39;)?","body":"<p>I've configured quartz manually before, but I thought that this time around, i would try and utilize as much of the spring-boot (2.7.4) magic as I could.</p>\n<p>(I also want to say, it's entirely possible I was hoping for too much, but would appreciate any feedback. At the end of the day, I was hoping/thinking that using the @Scheduled annotation, would be sufficient to get the quartz jobs/triggers copied into the database-backed quartz tables.</p>\n<p>The desired end state should result with the system being clustered, with the jobs stored in the application defined  dataSource. The application where the job runs is deployed to a cloud environment with multiple running instances, and we only need one of those apps to acutally do this work.</p>\n<p>From the quartz/spring perspective, I have the following config.</p>\n<pre><code>spring.quartz.scheduler-name=super-duper-scheduler\nspring.quartz.properties.org.quartz.scheduler.instanceId=AUTO\nspring.quartz.job-store-type=jdbc\nspring.quartz.properties.org.quartz.job-store.class=org.quartz.impl.jdbcjobstore.LocalDataSourceJobStore\nspring.quartz.properties.org.quartz.jobStore.tablePrefix = QRTZ_\nspring.quartz.properties.org.quartz.jobStore.isClustered = true\nspring.quartz.properties.org.quartz.jobStore.clusterCheckinInterval = 20000\n</code></pre>\n<p>In the code, in a spring component i have:</p>\n<pre><code>    @Scheduled(cron = &quot;0 */20 * * * *&quot;)\n    public void updateVendorInfoFromSam() {\n      ... doing stuff\n    }\n</code></pre>\n<p>Looking at the logs after startup, everything looks about how i would expect</p>\n<pre><code>2023-08-08 09:14:12,264 [main] INFO  org.quartz.impl.StdSchedulerFactory - Using default implementation for ThreadExecutor\n2023-08-08 09:14:12,273 [main] INFO  o.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\n2023-08-08 09:14:12,274 [main] INFO  org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.3.2 created.\n2023-08-08 09:14:12,306 [main] INFO  o.s.s.quartz.LocalDataSourceJobStore - Using db table-based data access locking (synchronization).\n2023-08-08 09:14:12,307 [main] INFO  o.s.s.quartz.LocalDataSourceJobStore - JobStoreCMT initialized.\n2023-08-08 09:14:12,307 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.3.2) 'super-duper-scheduler' with instanceId '@#$@#$@#$'\n  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.\n  NOT STARTED.\n  Currently in standby mode.\n  Number of jobs executed: 0\n  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.\n  Using job-store 'org.springframework.scheduling.quartz.LocalDataSourceJobStore' - which supports persistence. and is clustered.\n\n2023-08-08 09:14:12,308 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'super-duper-scheduler' initialized from an externally provided properties instance.\n2023-08-08 09:14:12,308 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.3.2\n2023-08-08 09:14:12,308 [main] INFO  org.quartz.core.QuartzScheduler - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@1727d525\n</code></pre>\n<p>When I manually check the quartz database tables, a few tables have some minimum of data, but the jobs and triggers tables (which historically have held the job and trigger info) are not being written to (well at least, nothing is persisting). (Not sure that it matters at this point, but that ds has autocommit turned off.)</p>\n<p>The overarching question I have is..... <em>should</em> I expect to set up a job in spring, using only the @Scheduled annotation, and have it run in a clustered manner (aka. only run on one instance) using quartz?</p>\n"},{"tags":["java","netbeans","ide","netbeans-platform"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1688703750,"post_id":76633702,"comment_id":135112265,"body_markdown":"I have Netbeans 16 and it has `Java with Ant/Java Web` under the (new project) categories, with `Web Application` as one of the project types.  I build a recent web application with it - can&#39;t remember how I got it to work :P","body":"I have Netbeans 16 and it has <code>Java with Ant&#47;Java Web</code> under the (new project) categories, with <code>Web Application</code> as one of the project types.  I build a recent web application with it - can&#39;t remember how I got it to work :P"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1688709124,"post_id":76633702,"comment_id":135112719,"body_markdown":"[1] The _&quot;java web feature&quot; has not been removed. Try **File &gt; New Project... &gt; Java with Ant &gt; Java Web &gt; Web Application**. [2] Your question is close enough to be a duplicate of [How to create Java project in Netbeans, without using Maven as default?](https://stackoverflow.com/q/56311186/2985643) The [accepted answer](https://stackoverflow.com/a/56330546/2985643) explains why the changes were made to NetBeans. [3] Your need for guidance on using Maven is off topic here, but since you can still create web applications using the familiar approach that is probably no longer a concern anyway.","body":"[1] The _&quot;java web feature&quot; has not been removed. Try <b>File &gt; New Project... &gt; Java with Ant &gt; Java Web &gt; Web Application</b>. [2] Your question is close enough to be a duplicate of <a href=\"https://stackoverflow.com/q/56311186/2985643\">How to create Java project in Netbeans, without using Maven as default?</a> The <a href=\"https://stackoverflow.com/a/56330546/2985643\">accepted answer</a> explains why the changes were made to NetBeans. [3] Your need for guidance on using Maven is off topic here, but since you can still create web applications using the familiar approach that is probably no longer a concern anyway."},{"owner":{"account_id":22919884,"reputation":13,"user_id":17055870,"display_name":" Kaif Bhombal"},"score":0,"creation_date":1688755170,"post_id":76633702,"comment_id":135121325,"body_markdown":"(For all who have helped me)---&gt;@skomisa and @MadProgrammer . **Thank you sincerely for your tremendous assistance. As a newcomer to Java, I&#39;m still navigating uncharted territory and encountering countless unknowns. Having a mentor like yourself has been an invaluable resource. I am genuinely grateful for the time and effort you invest in guiding newbies like me. Your support means a great deal to me.**","body":"(For all who have helped me)---&gt;@skomisa and @MadProgrammer . <b>Thank you sincerely for your tremendous assistance. As a newcomer to Java, I&#39;m still navigating uncharted territory and encountering countless unknowns. Having a mentor like yourself has been an invaluable resource. I am genuinely grateful for the time and effort you invest in guiding newbies like me. Your support means a great deal to me.</b>"}],"owner":{"account_id":22919884,"reputation":13,"user_id":17055870,"display_name":" Kaif Bhombal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1688753561,"answer_count":0,"score":1,"last_activity_date":1691504882,"creation_date":1688699126,"question_id":76633702,"body_markdown":"I have been using an older version of NetBeans (8.2) to create web services and applications in my college. However, I recently discovered that the newer version of Apache NetBeans has switched to Maven. Despite asking around and searching online, I haven&#39;t found a clear answer on why ***java web*** feature was removed from older versions of Apache NetBeans and Maven was adopted for all future IDE updates.\r\n\r\n[java web feature removed](https://i.stack.imgur.com/3kEOd.png).\r\n\r\n\r\n\r\nCan someone guide me on how to utilize the Maven feature in the newer version of Apache NetBeans for creating Java web applications? I would appreciate any step-by-step instructions or relevant resources to help me get started. Thank you in advance!\r\n\r\nare older versions of IDE still used in Industry when we have the latest version of Apache Netbeans which has maven instead? \r\n\r\n**Why did Apache remove the Java web app feature in its newer versions of IDE; Is there some problem with older versions of IDE using the Java web app feature?**\r\n[java web feature removed](https://i.stack.imgur.com/3kEOd.png).","title":"why did Apache removed java web app feature from it&#39;s IDE","body":"<p>I have been using an older version of NetBeans (8.2) to create web services and applications in my college. However, I recently discovered that the newer version of Apache NetBeans has switched to Maven. Despite asking around and searching online, I haven't found a clear answer on why <em><strong>java web</strong></em> feature was removed from older versions of Apache NetBeans and Maven was adopted for all future IDE updates.</p>\n<p><a href=\"https://i.stack.imgur.com/3kEOd.png\" rel=\"nofollow noreferrer\">java web feature removed</a>.</p>\n<p>Can someone guide me on how to utilize the Maven feature in the newer version of Apache NetBeans for creating Java web applications? I would appreciate any step-by-step instructions or relevant resources to help me get started. Thank you in advance!</p>\n<p>are older versions of IDE still used in Industry when we have the latest version of Apache Netbeans which has maven instead?</p>\n<p><strong>Why did Apache remove the Java web app feature in its newer versions of IDE; Is there some problem with older versions of IDE using the Java web app feature?</strong>\n<a href=\"https://i.stack.imgur.com/3kEOd.png\" rel=\"nofollow noreferrer\">java web feature removed</a>.</p>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1688728903,"post_id":76635846,"comment_id":135116229,"body_markdown":"https://stackoverflow.com/questions/75164355/get-smart-excel-table-with-apache-poi/75172222#75172222","body":"<a href=\"https://stackoverflow.com/questions/75164355/get-smart-excel-table-with-apache-poi/75172222#75172222\" title=\"get smart excel table with apache poi\">stackoverflow.com/questions/75164355/&hellip;</a>"}],"owner":{"account_id":16975150,"reputation":11,"user_id":16747726,"display_name":"Revasha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1688814036,"answer_count":0,"score":0,"last_activity_date":1691504862,"creation_date":1688723463,"question_id":76635846,"body_markdown":"I used the XSSFWorkbook class to generate an excel file `Workbook book = new XSSFWorkbook()`\r\n\r\nTo optimize the application, I decided to switch to SXSSFWorkbook `SXSSFWorkbook book = new SXSSFWorkbook()`\r\n\r\nAs it turns out, the `SXSSFSheet ` that provides `SXSSFWorkbook ` does not have a `createTable(AreaReference)` method, so I used the following:\r\n`XSSFTable table = ((SXSSFWorkbook) book).getXSSFWorkbook().getSheetAt(0).createTable(reference);`\r\n\r\nAnd now, when generating a file, I get errors, despite the fact that i can interact with the file itself and the table:\r\n`Repaired Records: Table from /xl/tables/table1.xml part (Table)`\r\n\r\n\r\n\r\nIf i replace `SXSSFWorkbook` with `XSSFWorkbook` and the table creation method with `XSSFTable table = ((XSSFSheet) sheet).createTable(reference);`, then there are no errors\r\n\r\nThis is what the method itself looks like:\r\n\r\n```\r\n     public static void createTable(Workbook book,\r\n                                    sheet sheet,\r\n                                    stringname,\r\n                                    int pRowStart,\r\n                                    int pColStart,\r\n                                    int pRowEnd,\r\n                                    int pColEnd) {\r\n         AreaReference reference = book.getCreationHelper().createAreaReference(\r\n                 new CellReference(pRowStart, pColStart), new CellReference(pRowEnd, pColEnd)\r\n         );\r\n         XSSFTable table = ((SXSSFWorkbook) book).getXSSFWorkbook().getSheetAt(0).createTable(reference);\r\n// XSSFTable table = ((XSSFSheet) sheet).createTable(reference);\r\n         if (table.getArea() != null) {\r\n             table.getCTTable().addNewAutoFilter().setRef(table.getArea().formatAsString());\r\n         }\r\n     }\r\n\r\n```","title":"Apache poi generate file with exception","body":"<p>I used the XSSFWorkbook class to generate an excel file <code>Workbook book = new XSSFWorkbook()</code></p>\n<p>To optimize the application, I decided to switch to SXSSFWorkbook <code>SXSSFWorkbook book = new SXSSFWorkbook()</code></p>\n<p>As it turns out, the <code>SXSSFSheet </code> that provides <code>SXSSFWorkbook </code> does not have a <code>createTable(AreaReference)</code> method, so I used the following:\n<code>XSSFTable table = ((SXSSFWorkbook) book).getXSSFWorkbook().getSheetAt(0).createTable(reference);</code></p>\n<p>And now, when generating a file, I get errors, despite the fact that i can interact with the file itself and the table:\n<code>Repaired Records: Table from /xl/tables/table1.xml part (Table)</code></p>\n<p>If i replace <code>SXSSFWorkbook</code> with <code>XSSFWorkbook</code> and the table creation method with <code>XSSFTable table = ((XSSFSheet) sheet).createTable(reference);</code>, then there are no errors</p>\n<p>This is what the method itself looks like:</p>\n<pre><code>     public static void createTable(Workbook book,\n                                    sheet sheet,\n                                    stringname,\n                                    int pRowStart,\n                                    int pColStart,\n                                    int pRowEnd,\n                                    int pColEnd) {\n         AreaReference reference = book.getCreationHelper().createAreaReference(\n                 new CellReference(pRowStart, pColStart), new CellReference(pRowEnd, pColEnd)\n         );\n         XSSFTable table = ((SXSSFWorkbook) book).getXSSFWorkbook().getSheetAt(0).createTable(reference);\n// XSSFTable table = ((XSSFSheet) sheet).createTable(reference);\n         if (table.getArea() != null) {\n             table.getCTTable().addNewAutoFilter().setRef(table.getArea().formatAsString());\n         }\n     }\n\n</code></pre>\n"},{"tags":["java","spring-boot","tomcat","tomcat10"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689134962,"post_id":76665034,"comment_id":135168542,"body_markdown":"You need to show the error message! I presume you realise Tomcat 10 is Jakarta project and uses the Jakarta package name for any framework API not javax unless the javax class is from SE core.","body":"You need to show the error message! I presume you realise Tomcat 10 is Jakarta project and uses the Jakarta package name for any framework API not javax unless the javax class is from SE core."},{"owner":{"account_id":8265735,"reputation":41,"user_id":6215356,"display_name":"Jagdish Raika"},"score":0,"creation_date":1689143420,"post_id":76665034,"comment_id":135169539,"body_markdown":"@SamuelMarchant, the application is not giving error of Jakarta package name change as I am already using the latest dependencies and also have made changes related to this. \nI have edited the question, you can find the error in the question.","body":"@SamuelMarchant, the application is not giving error of Jakarta package name change as I am already using the latest dependencies and also have made changes related to this.  I have edited the question, you can find the error in the question."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689156080,"post_id":76665034,"comment_id":135172308,"body_markdown":"At a quick glance I don&#39;t see anything here that you couldn&#39;t control via `server.xml`. Why are you writing code for this?","body":"At a quick glance I don&#39;t see anything here that you couldn&#39;t control via <code>server.xml</code>. Why are you writing code for this?"}],"owner":{"account_id":8265735,"reputation":41,"user_id":6215356,"display_name":"Jagdish Raika"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504828,"creation_date":1689102135,"question_id":76665034,"body_markdown":"We are using the below setter methods of class AbstractHttp11Protocol to configure mTLS in spring-boot based application. After upgrading the application to spring-boot 3, started facing some issues related to Tomcat. I am facing compilation errors and got to know that these methods have been removed in Tomcat 10.x version.\r\n\r\n\r\n```\r\n\t@Bean\r\n\tpublic WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; containerCustomizer() {\r\n\r\n\t\treturn configurableEmbeddedServletContainer -&gt; {\r\n\t\t\tif (configurableEmbeddedServletContainer != null) {\r\n\t\t\t\tTomcatServletWebServerFactory tomcatEmbeddedServletContainerFactory = configurableEmbeddedServletContainer;\r\n\t\t\t\ttomcatEmbeddedServletContainerFactory.addAdditionalTomcatConnectors(additionalConnector(serverConfig()));\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tprivate Connector additionalConnector(ServerConfig serverConfig) {\r\n\r\n\t\tSslConfig sslConfig = serverConfig.getSsl();\r\n\r\n\t\tConnector connector = new Connector(&quot;org.apache.coyote.http11.Http11NioProtocol&quot;);\r\n\t\tHttp11NioProtocol protocol = (Http11NioProtocol) connector.getProtocolHandler();\r\n\t\tconnector.setScheme(SCHEME);\r\n\t\tconnector.setSecure(true);\r\n\t\tconnector.setPort(serverConfig.getPort());\r\n\t\tprotocol.setSSLEnabled(true);\r\n\r\n        //getting complilation errors in below code\r\n\t\tprotocol.setKeystoreType(sslConfig.getKeyStoreType());\r\n\t\tprotocol.setKeystoreFile(sslConfig.getKeyStore());\r\n\t\tprotocol.setKeystorePass(String.valueOf(sslConfig.getKeyStorePassword()));\r\n\t\tprotocol.setKeyPass(String.valueOf(sslConfig.getKeyPassword()));\r\n\t\tprotocol.setTruststoreType(sslConfig.getTrustStoreType());\r\n\t\tprotocol.setTruststoreFile(sslConfig.getTrustStore());\r\n\t\tprotocol.setTruststorePass(String.valueOf(sslConfig.getTrustStorePW()));\r\n\t\tprotocol.setSSLProtocol(TLSV_1_2);\r\n\t\tprotocol.setClientAuth(&quot;true&quot;); \r\n\r\n\t\treturn connector;\r\n\t}\r\n```\r\n\r\n\r\nFind below commit where changes have been made in AbstractHttp11Protocol class for Tomcat 10.x :-\r\n\r\n[Remove support for deprecated TLS configuration style][1]\r\n\r\n\r\n  [1]: https://github.com/apache/tomcat/commit/973b0a304532a1d5a63b36ff88842e933cc91b82#diff-d4454b2c33deae44a2c2f5cd354aa3ca70c6a268e78c4fd5e1f76fcebc0181ba\r\n\r\n**Error:-**\r\n\r\n&gt; [ERROR] Failed to execute goal\r\n&gt; org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile\r\n&gt; (default-compile) on project xxx module: Compilation failure:\r\n&gt; Compilation failure:  [ERROR]\r\n&gt; /controller/HttpsRequestFactory.java:[71,30]\r\n&gt; com.xxx.HttpsRequestFactory.SelectByAlias is not abstract and does not\r\n&gt; override abstract method\r\n&gt; chooseAlias(java.util.Map&lt;java.lang.String,org.apache.hc.core5.ssl.PrivateKeyDetails&gt;,javax.net.ssl.SSLParameters)\r\n&gt; in org.apache.hc.core5.ssl.PrivateKeyStrategy [ERROR]\r\n&gt; /controller/HttpsRequestFactory.java:[81,17] method does not override\r\n&gt; or implement a method from a supertype [ERROR]\r\n&gt; /authentication/TomcatConnectorAutoConfiguration.java:[57,25] cannot\r\n&gt; find symbol [ERROR]   symbol:   method\r\n&gt; setKeystoreType(java.lang.String) [ERROR]   location: variable\r\n&gt; protocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\r\n&gt; /authentication/TomcatConnectorAutoConfiguration.java:[58,25] cannot\r\n&gt; find symbol [ERROR]   symbol:   method\r\n&gt; setKeystoreFile(java.lang.String) [ERROR]   location: variable\r\n&gt; protocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\r\n&gt; /authentication/TomcatConnectorAutoConfiguration.java:[59,25] cannot\r\n&gt; find symbol [ERROR]   symbol:   method\r\n&gt; setKeystorePass(java.lang.String) [ERROR]   location: variable\r\n&gt; protocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\r\n&gt; /authentication/TomcatConnectorAutoConfiguration.java:[60,25] cannot\r\n&gt; find symbol [ERROR]   symbol:   method setKeyPass(java.lang.String)\r\n&gt; [ERROR]   location: variable protocol of type\r\n&gt; org.apache.coyote.http11.Http11NioProtocol [ERROR]\r\n&gt; /authentication/TomcatConnectorAutoConfiguration.java:[61,25] cannot\r\n&gt; find symbol [ERROR]   symbol:   method\r\n&gt; setTruststoreType(java.lang.String) [ERROR]   location: variable\r\n&gt; protocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\r\n&gt; /authentication/TomcatConnectorAutoConfiguration.java:[62,25] cannot\r\n&gt; find symbol [ERROR]   symbol:   method\r\n&gt; setTruststoreFile(java.lang.String) [ERROR]   location: variable\r\n&gt; protocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\r\n&gt; /authentication/TomcatConnectorAutoConfiguration.java:[63,25] cannot\r\n&gt; find symbol [ERROR]   symbol:   method\r\n&gt; setTruststorePass(java.lang.String) [ERROR]   location: variable\r\n&gt; protocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\r\n&gt; /authentication/TomcatConnectorAutoConfiguration.java:[64,25] cannot\r\n&gt; find symbol [ERROR]   symbol:   method\r\n&gt; setSSLProtocol(java.lang.String) [ERROR]   location: variable protocol\r\n&gt; of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\r\n&gt; /authentication/TomcatConnectorAutoConfiguration.java:[65,25] cannot\r\n&gt; find symbol [ERROR]   symbol:   method setClientAuth(java.lang.String)\r\n&gt; [ERROR]   location: variable protocol of type\r\n&gt; org.apache.coyote.http11.Http11NioProtocol\r\n\r\n\r\nPlease suggest if there is any alternative approach to configure these properties or how to use these methods in Tomcat 10.x.","title":"Facing compilation errors due to deletion of methods in class AbstractHttp11Protocol (Tomcat 10.x)","body":"<p>We are using the below setter methods of class AbstractHttp11Protocol to configure mTLS in spring-boot based application. After upgrading the application to spring-boot 3, started facing some issues related to Tomcat. I am facing compilation errors and got to know that these methods have been removed in Tomcat 10.x version.</p>\n<pre><code>    @Bean\n    public WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; containerCustomizer() {\n\n        return configurableEmbeddedServletContainer -&gt; {\n            if (configurableEmbeddedServletContainer != null) {\n                TomcatServletWebServerFactory tomcatEmbeddedServletContainerFactory = configurableEmbeddedServletContainer;\n                tomcatEmbeddedServletContainerFactory.addAdditionalTomcatConnectors(additionalConnector(serverConfig()));\n            }\n        };\n    }\n\n    private Connector additionalConnector(ServerConfig serverConfig) {\n\n        SslConfig sslConfig = serverConfig.getSsl();\n\n        Connector connector = new Connector(&quot;org.apache.coyote.http11.Http11NioProtocol&quot;);\n        Http11NioProtocol protocol = (Http11NioProtocol) connector.getProtocolHandler();\n        connector.setScheme(SCHEME);\n        connector.setSecure(true);\n        connector.setPort(serverConfig.getPort());\n        protocol.setSSLEnabled(true);\n\n        //getting complilation errors in below code\n        protocol.setKeystoreType(sslConfig.getKeyStoreType());\n        protocol.setKeystoreFile(sslConfig.getKeyStore());\n        protocol.setKeystorePass(String.valueOf(sslConfig.getKeyStorePassword()));\n        protocol.setKeyPass(String.valueOf(sslConfig.getKeyPassword()));\n        protocol.setTruststoreType(sslConfig.getTrustStoreType());\n        protocol.setTruststoreFile(sslConfig.getTrustStore());\n        protocol.setTruststorePass(String.valueOf(sslConfig.getTrustStorePW()));\n        protocol.setSSLProtocol(TLSV_1_2);\n        protocol.setClientAuth(&quot;true&quot;); \n\n        return connector;\n    }\n</code></pre>\n<p>Find below commit where changes have been made in AbstractHttp11Protocol class for Tomcat 10.x :-</p>\n<p><a href=\"https://github.com/apache/tomcat/commit/973b0a304532a1d5a63b36ff88842e933cc91b82#diff-d4454b2c33deae44a2c2f5cd354aa3ca70c6a268e78c4fd5e1f76fcebc0181ba\" rel=\"nofollow noreferrer\">Remove support for deprecated TLS configuration style</a></p>\n<p><strong>Error:-</strong></p>\n<blockquote>\n<p>[ERROR] Failed to execute goal\norg.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile\n(default-compile) on project xxx module: Compilation failure:\nCompilation failure:  [ERROR]\n/controller/HttpsRequestFactory.java:[71,30]\ncom.xxx.HttpsRequestFactory.SelectByAlias is not abstract and does not\noverride abstract method\nchooseAlias(java.util.Map&lt;java.lang.String,org.apache.hc.core5.ssl.PrivateKeyDetails&gt;,javax.net.ssl.SSLParameters)\nin org.apache.hc.core5.ssl.PrivateKeyStrategy [ERROR]\n/controller/HttpsRequestFactory.java:[81,17] method does not override\nor implement a method from a supertype [ERROR]\n/authentication/TomcatConnectorAutoConfiguration.java:[57,25] cannot\nfind symbol [ERROR]   symbol:   method\nsetKeystoreType(java.lang.String) [ERROR]   location: variable\nprotocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\n/authentication/TomcatConnectorAutoConfiguration.java:[58,25] cannot\nfind symbol [ERROR]   symbol:   method\nsetKeystoreFile(java.lang.String) [ERROR]   location: variable\nprotocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\n/authentication/TomcatConnectorAutoConfiguration.java:[59,25] cannot\nfind symbol [ERROR]   symbol:   method\nsetKeystorePass(java.lang.String) [ERROR]   location: variable\nprotocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\n/authentication/TomcatConnectorAutoConfiguration.java:[60,25] cannot\nfind symbol [ERROR]   symbol:   method setKeyPass(java.lang.String)\n[ERROR]   location: variable protocol of type\norg.apache.coyote.http11.Http11NioProtocol [ERROR]\n/authentication/TomcatConnectorAutoConfiguration.java:[61,25] cannot\nfind symbol [ERROR]   symbol:   method\nsetTruststoreType(java.lang.String) [ERROR]   location: variable\nprotocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\n/authentication/TomcatConnectorAutoConfiguration.java:[62,25] cannot\nfind symbol [ERROR]   symbol:   method\nsetTruststoreFile(java.lang.String) [ERROR]   location: variable\nprotocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\n/authentication/TomcatConnectorAutoConfiguration.java:[63,25] cannot\nfind symbol [ERROR]   symbol:   method\nsetTruststorePass(java.lang.String) [ERROR]   location: variable\nprotocol of type org.apache.coyote.http11.Http11NioProtocol [ERROR]\n/authentication/TomcatConnectorAutoConfiguration.java:[64,25] cannot\nfind symbol [ERROR]   symbol:   method\nsetSSLProtocol(java.lang.String) [ERROR]   location: variable protocol\nof type org.apache.coyote.http11.Http11NioProtocol [ERROR]\n/authentication/TomcatConnectorAutoConfiguration.java:[65,25] cannot\nfind symbol [ERROR]   symbol:   method setClientAuth(java.lang.String)\n[ERROR]   location: variable protocol of type\norg.apache.coyote.http11.Http11NioProtocol</p>\n</blockquote>\n<p>Please suggest if there is any alternative approach to configure these properties or how to use these methods in Tomcat 10.x.</p>\n"},{"tags":["java","android","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1689233526,"post_id":76669946,"comment_id":135184981,"body_markdown":"Please share the file. While I can&#39;t help, I&#39;ll test whether this also happens in PDFBox for desktop. Does it also happen when using the standard text stripper?","body":"Please share the file. While I can&#39;t help, I&#39;ll test whether this also happens in PDFBox for desktop. Does it also happen when using the standard text stripper?"}],"owner":{"account_id":24479754,"reputation":41,"user_id":18398332,"display_name":"prem"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504810,"creation_date":1689160460,"question_id":76669946,"body_markdown":"I&#39;m using PDF Box Android library to load pdf documents and then using it to extract text from regions on page currently opened using PDFTextStripperByArea. Mostly it works fine but in some cases I&#39;m getting this **Fatal Exception: java.lang.OutOfMemoryError**.\r\n\r\n\r\n\r\n` document = PDDocument.load(mFile, MemoryUsageSetting.setupTempFileOnly());\r\n`\r\n\r\nAnd onDestroy of Activity i&#39;m calling \r\n\r\n    document.close();`\r\n\r\n\r\nI know one solution could be increasing the heap size but that has its own disadvantages. Is there an way we can optimize this and fix this outOfMemory Exception?","title":"PDFBox Android: getting Fatal Exception: java.lang.OutOfMemoryError on calling PDDocument.load method","body":"<p>I'm using PDF Box Android library to load pdf documents and then using it to extract text from regions on page currently opened using PDFTextStripperByArea. Mostly it works fine but in some cases I'm getting this <strong>Fatal Exception: java.lang.OutOfMemoryError</strong>.</p>\n<p><code>document = PDDocument.load(mFile, MemoryUsageSetting.setupTempFileOnly());</code></p>\n<p>And onDestroy of Activity i'm calling</p>\n<pre><code>document.close();`\n</code></pre>\n<p>I know one solution could be increasing the heap size but that has its own disadvantages. Is there an way we can optimize this and fix this outOfMemory Exception?</p>\n"},{"tags":["java","tuples","apache-storm"],"owner":{"account_id":6699754,"reputation":402,"user_id":5166679,"display_name":"gwcoderguy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504803,"creation_date":1689185986,"question_id":76673445,"body_markdown":"I am using Apache Storm version 2.4 for an application of mine which handles a lot of throughput. In my setup, I initialize a tick tuple like so: (java)\r\n\r\n            topologyBuilder.setBolt(BOLT_A_KEY, new BoltA(config), config.getBoltAThreads())\r\n                .fieldsGrouping(KINESIS_SPOUT_KEY, new Fields(KinesisRecordScheme.FIELD_PARTITION_KEY))\r\n                .addConfiguration(TOPOLOGY_TICK_TUPLE_FREQ_SECS, config.getBoltATickTupleTimeSeconds());\r\nMost of the time works totally fine and as expected; however, at some point (say ~2 weeks?) I notice the topology totally stops and requires a redeploy. During my investigation as to what&#39;s going on, I found that the tick tuple totally stops which could potentially be the culprit (the stopping of the tick tuple would halt further executions for my particular application). I&#39;ve looked into documentation around the tick tuple and found it pretty lacking.\r\n\r\nMy 2 questions then are:\r\n1) Is it expected that the tick tuple would stop if back pressure from the spout became great enough? (I ask this to eliminate the chance that the tick tuple stopping is actually a side effect of the issue and not the root cause)\r\n2) Why might the tick tuple stop working suddenly (and routinely) ? ","title":"Working Tick Tuples suddenly stopping in Apache Storm","body":"<p>I am using Apache Storm version 2.4 for an application of mine which handles a lot of throughput. In my setup, I initialize a tick tuple like so: (java)</p>\n<pre><code>        topologyBuilder.setBolt(BOLT_A_KEY, new BoltA(config), config.getBoltAThreads())\n            .fieldsGrouping(KINESIS_SPOUT_KEY, new Fields(KinesisRecordScheme.FIELD_PARTITION_KEY))\n            .addConfiguration(TOPOLOGY_TICK_TUPLE_FREQ_SECS, config.getBoltATickTupleTimeSeconds());\n</code></pre>\n<p>Most of the time works totally fine and as expected; however, at some point (say ~2 weeks?) I notice the topology totally stops and requires a redeploy. During my investigation as to what's going on, I found that the tick tuple totally stops which could potentially be the culprit (the stopping of the tick tuple would halt further executions for my particular application). I've looked into documentation around the tick tuple and found it pretty lacking.</p>\n<p>My 2 questions then are:</p>\n<ol>\n<li>Is it expected that the tick tuple would stop if back pressure from the spout became great enough? (I ask this to eliminate the chance that the tick tuple stopping is actually a side effect of the issue and not the root cause)</li>\n<li>Why might the tick tuple stop working suddenly (and routinely) ?</li>\n</ol>\n"},{"tags":["java","pdf","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1689254767,"post_id":76679614,"comment_id":135189615,"body_markdown":"You need to remove them from the content streams too.","body":"You need to remove them from the content streams too."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1689260572,"post_id":76679614,"comment_id":135191228,"body_markdown":"You only look for images in the immediate resources of pages. You also have to recurse into form XObjects (including annotation appearances), Patterns, and Type 3 fonts and look into their resources. Also you have to remove the instructions referencing those images from the respective content streams. Also look for inline images there. Additionally images may be referenced from annotation appearance characteristics.","body":"You only look for images in the immediate resources of pages. You also have to recurse into form XObjects (including annotation appearances), Patterns, and Type 3 fonts and look into their resources. Also you have to remove the instructions referencing those images from the respective content streams. Also look for inline images there. Additionally images may be referenced from annotation appearance characteristics."}],"owner":{"account_id":28642160,"reputation":15,"user_id":21931046,"display_name":"Jupit90"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504797,"creation_date":1689252915,"question_id":76679614,"body_markdown":"I have a pdf file and need to remove all images from it and save a new pdf file without images\r\n\r\nI wrote a function that should delete the images, but it doesn&#39;t\r\n\r\n\r\n```\r\npublic static void RemoveIMGfromPDF(String output) throws IOException {\r\n    \tfor(PDPage page : document.getPages()) {\r\n    \t\tPDResources resources = page.getResources();\r\n    \t\tif (resources != null) {\r\n    \t\t\tPDXObject xObject = resources.getXObject(COSName.getPDFName(&quot;ImageName&quot;));\r\n                if (xObject instanceof PDImageXObject) {\r\n                    COSDictionary dict = ((PDImageXObject) xObject).getCOSObject();\r\n                    dict.removeItem(COSName.getPDFName(&quot;Subtype&quot;));\r\n                \t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \tdocument.save(new File(output));\r\n        document.close();\r\n    }\r\n```\r\n\r\n\r\nString output - The name of the new PDF file\r\n**document** defined above, it is open and has the required PDF file loaded","title":"Apache pdfbox removing images from a pdf file","body":"<p>I have a pdf file and need to remove all images from it and save a new pdf file without images</p>\n<p>I wrote a function that should delete the images, but it doesn't</p>\n<pre><code>public static void RemoveIMGfromPDF(String output) throws IOException {\n        for(PDPage page : document.getPages()) {\n            PDResources resources = page.getResources();\n            if (resources != null) {\n                PDXObject xObject = resources.getXObject(COSName.getPDFName(&quot;ImageName&quot;));\n                if (xObject instanceof PDImageXObject) {\n                    COSDictionary dict = ((PDImageXObject) xObject).getCOSObject();\n                    dict.removeItem(COSName.getPDFName(&quot;Subtype&quot;));\n                    }\n                }\n            }\n        document.save(new File(output));\n        document.close();\n    }\n</code></pre>\n<p>String output - The name of the new PDF file\n<strong>document</strong> defined above, it is open and has the required PDF file loaded</p>\n"},{"tags":["java","message-queue","apache-pulsar"],"answers":[{"tags":[],"owner":{"account_id":3901577,"reputation":1056,"user_id":3229301,"display_name":"David Kjerrumgaard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690304641,"creation_date":1690304641,"answer_id":76765008,"question_id":76688324,"body_markdown":"The `Connection handshake failed` message inside the stacktrace tends to indicate that there is an issue with the TLS connection. \r\n\r\nIs your Pulsar cluster secured in any way? Are you connecting to `pulsar://&lt;IP&gt;:6650` or `pulsar+ssl://&lt;IP&gt;:6651` ?","title":"Could not get connection while getPartitionedTopicMetadata - Connection handshake failed","body":"<p>The <code>Connection handshake failed</code> message inside the stacktrace tends to indicate that there is an issue with the TLS connection.</p>\n<p>Is your Pulsar cluster secured in any way? Are you connecting to <code>pulsar://&lt;IP&gt;:6650</code> or <code>pulsar+ssl://&lt;IP&gt;:6651</code> ?</p>\n"}],"owner":{"account_id":22385087,"reputation":1,"user_id":16598033,"display_name":"BOB"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691504788,"creation_date":1689342650,"question_id":76688324,"body_markdown":"I have setup apache pulsar by following this tutorial: https://pulsar.apache.org/docs/3.0.x/deploy-aws/ but I use aws ansible dynamic inventory rather than terraform inventory in a tutorial. The problem is that once I run the following code\r\n\r\n```\r\nimport org.apache.pulsar.client.api.*;\r\n\r\n\r\npublic class test {\r\n    public static void main(String[] args) throws PulsarClientException {\r\n        PulsarClient client = PulsarClient.builder()\r\n            .serviceUrl(&lt;my pulsar web url&gt;) \r\n            .build();\r\n        \r\n        Producer&lt;String&gt; producer = client.newProducer(Schema.STRING)\r\n        .topic(&quot;my-topic&quot;)\r\n        .create();\r\n\r\n        producer.newMessage()\r\n        .value(&quot;HelloWorld&quot;)\r\n        .send();\r\n\r\n        producer.close();\r\n        client.close();\r\n        \r\n    }    \r\n}\r\n```\r\n\r\nthe following error pops up:\r\n&gt;10:17:35.419 [pulsar-client-io-1-7] DEBUG org.apache.pulsar.client.impl.ClientCnx - [id: 0x7b3029f5, L:/192.168.1.78:52743 - R:] Connected to broker\r\n10:17:35.421 [pulsar-client-io-1-7] DEBUG org.apache.pulsar.client.impl.ClientCnx - Complete: true\r\n10:17:35.604 [pulsar-client-io-1-7] DEBUG org.apache.pulsar.client.impl.ConnectionPool - Removing closed connection from pool: AbstractChannel$CloseFuture@3aac5716(success)\r\n10:17:35.604 [pulsar-client-io-1-7] INFO org.apache.pulsar.client.impl.ClientCnx - [id: 0x7b3029f5, L:/192.168.1.78:52743 ! R:] Disconnected\r\n10:17:35.605 [pulsar-client-io-1-7] WARN org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x7b3029f5, L:/192.168.1.78:52743 ! R:]] Connection handshake failed: org.apache.pulsar.client.api.PulsarClientException: Connection already closed\r\n10:17:35.994 [pulsar-client-scheduled-30-1] WARN org.apache.pulsar.client.impl.PulsarClientImpl - [topic: persistent://public/default/test-topic] Could not get connection while getPartitionedTopicMetadata -- Will try again in 384 ms\r\n\r\n\r\nand these block of message repeats forever. I intentionally remove/hide my pulsar web URL for privacy purposes. I tried to disable my firewall but it does not resolve the error. Does anyone know where the issues are and how I can fix them? I am pretty new to apache pulsar so thank you in advance...\r\n","title":"Could not get connection while getPartitionedTopicMetadata - Connection handshake failed","body":"<p>I have setup apache pulsar by following this tutorial: <a href=\"https://pulsar.apache.org/docs/3.0.x/deploy-aws/\" rel=\"nofollow noreferrer\">https://pulsar.apache.org/docs/3.0.x/deploy-aws/</a> but I use aws ansible dynamic inventory rather than terraform inventory in a tutorial. The problem is that once I run the following code</p>\n<pre><code>import org.apache.pulsar.client.api.*;\n\n\npublic class test {\n    public static void main(String[] args) throws PulsarClientException {\n        PulsarClient client = PulsarClient.builder()\n            .serviceUrl(&lt;my pulsar web url&gt;) \n            .build();\n        \n        Producer&lt;String&gt; producer = client.newProducer(Schema.STRING)\n        .topic(&quot;my-topic&quot;)\n        .create();\n\n        producer.newMessage()\n        .value(&quot;HelloWorld&quot;)\n        .send();\n\n        producer.close();\n        client.close();\n        \n    }    \n}\n</code></pre>\n<p>the following error pops up:</p>\n<blockquote>\n<p>10:17:35.419 [pulsar-client-io-1-7] DEBUG org.apache.pulsar.client.impl.ClientCnx - [id: 0x7b3029f5, L:/192.168.1.78:52743 - R:] Connected to broker\n10:17:35.421 [pulsar-client-io-1-7] DEBUG org.apache.pulsar.client.impl.ClientCnx - Complete: true\n10:17:35.604 [pulsar-client-io-1-7] DEBUG org.apache.pulsar.client.impl.ConnectionPool - Removing closed connection from pool: AbstractChannel$CloseFuture@3aac5716(success)\n10:17:35.604 [pulsar-client-io-1-7] INFO org.apache.pulsar.client.impl.ClientCnx - [id: 0x7b3029f5, L:/192.168.1.78:52743 ! R:] Disconnected\n10:17:35.605 [pulsar-client-io-1-7] WARN org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x7b3029f5, L:/192.168.1.78:52743 ! R:]] Connection handshake failed: org.apache.pulsar.client.api.PulsarClientException: Connection already closed\n10:17:35.994 [pulsar-client-scheduled-30-1] WARN org.apache.pulsar.client.impl.PulsarClientImpl - [topic: persistent://public/default/test-topic] Could not get connection while getPartitionedTopicMetadata -- Will try again in 384 ms</p>\n</blockquote>\n<p>and these block of message repeats forever. I intentionally remove/hide my pulsar web URL for privacy purposes. I tried to disable my firewall but it does not resolve the error. Does anyone know where the issues are and how I can fix them? I am pretty new to apache pulsar so thank you in advance...</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689669609,"post_id":76707119,"comment_id":135242803,"body_markdown":"You are missing the import for `AsyncHttpClient` and `DefaultAsyncHttpClient`.","body":"You are missing the import for <code>AsyncHttpClient</code> and <code>DefaultAsyncHttpClient</code>."}],"owner":{"account_id":27995446,"reputation":1,"user_id":21380802,"display_name":"Rayaan Khan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504782,"creation_date":1689617744,"question_id":76707119,"body_markdown":"Inside `public static void main`, the `AsyncHttpClient` appears red and states the issue in the title\r\n\r\n```\r\npackage org.example;\r\nimport org.apache.http.HttpEntity;\r\nimport org.apache.http.HttpResponse;\r\nimport org.apache.http.client.HttpClient;\r\nimport org.apache.http.client.methods.HttpPost;\r\nimport org.apache.http.entity.StringEntity;\r\nimport org.apache.http.impl.client.HttpClientBuilder;\r\nimport org.apache.http.util.EntityUtils;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n    \r\n        AsyncHttpClient client = new DefaultAsyncHttpClient();\r\n        client.prepare(&quot;POST&quot;, &quot;https://api.cohere.ai/v1/summarize&quot;)\r\n                .setHeader(&quot;accept&quot;, &quot;application/json&quot;)\r\n                .setHeader(&quot;content-type&quot;, &quot;application/json&quot;)\r\n                .setHeader(&quot;authorization&quot;, &quot;Bearer api key here&quot;)\r\n                .setBody(&quot;{\\&quot;text\\&quot;:\\&quot;Ice cream is a sweetened frozen food typically eaten as a snack or dessert. It may be made from milk or cream and is flavoured with a sweetener, either sugar or an alternative, and a spice, such as cocoa or vanilla, or with fruit such as strawberries or peaches. It can also be made by whisking a flavored cream base and liquid nitrogen together. Food coloring is sometimes added, in addition to stabilizers. The mixture is cooled below the freezing point of water and stirred to incorporate air spaces and to prevent detectable ice crystals from forming. The result is a smooth, semi-solid foam that is solid at very low temperatures (below 2 &#176;C or 35 &#176;F). It becomes more malleable as its temperature increases.\\\\n\\\\nThe meaning of the name \\\\\\&quot;ice cream\\\\\\&quot; varies from one country to another. In some countries, such as the United States, \\\\\\&quot;ice cream\\\\\\&quot; applies only to a specific variety, and most governments regulate the commercial use of the various terms according to the relative quantities of the main ingredients, notably the amount of cream. Products that do not meet the criteria to be called ice cream are sometimes labelled \\\\\\&quot;frozen dairy dessert\\\\\\&quot; instead. In other countries, such as Italy and Argentina, one word is used fo\\\\r all variants. Analogues made from dairy alternatives, such as goat&#39;s or sheep&#39;s milk, or milk substitutes (e.g., soy, cashew, coconut, almond milk or tofu), are available for those who are lactose intolerant, allergic to dairy protein or vegan.\\&quot;}&quot;)\r\n                .execute()\r\n                .toCompletableFuture()\r\n                .thenAccept(System.out::println)\r\n                .join();\r\n    \r\n        client.close();\r\n    \r\n    \r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nAttempted to import `AsyncHttpClient` but had the error mentioned above. Here is my code, I removed the API key for obvious reasons. I checked the Internet but could not find a similar problem to mine.\r\n","title":"Cannot resolve AsyncHttpClient when attempting to connect to an API","body":"<p>Inside <code>public static void main</code>, the <code>AsyncHttpClient</code> appears red and states the issue in the title</p>\n<pre><code>package org.example;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.entity.StringEntity;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport org.apache.http.util.EntityUtils;\n\nimport java.io.IOException;\n\npublic class Main {\n\n    public static void main(String[] args) {\n    \n        AsyncHttpClient client = new DefaultAsyncHttpClient();\n        client.prepare(&quot;POST&quot;, &quot;https://api.cohere.ai/v1/summarize&quot;)\n                .setHeader(&quot;accept&quot;, &quot;application/json&quot;)\n                .setHeader(&quot;content-type&quot;, &quot;application/json&quot;)\n                .setHeader(&quot;authorization&quot;, &quot;Bearer api key here&quot;)\n                .setBody(&quot;{\\&quot;text\\&quot;:\\&quot;Ice cream is a sweetened frozen food typically eaten as a snack or dessert. It may be made from milk or cream and is flavoured with a sweetener, either sugar or an alternative, and a spice, such as cocoa or vanilla, or with fruit such as strawberries or peaches. It can also be made by whisking a flavored cream base and liquid nitrogen together. Food coloring is sometimes added, in addition to stabilizers. The mixture is cooled below the freezing point of water and stirred to incorporate air spaces and to prevent detectable ice crystals from forming. The result is a smooth, semi-solid foam that is solid at very low temperatures (below 2 °C or 35 °F). It becomes more malleable as its temperature increases.\\\\n\\\\nThe meaning of the name \\\\\\&quot;ice cream\\\\\\&quot; varies from one country to another. In some countries, such as the United States, \\\\\\&quot;ice cream\\\\\\&quot; applies only to a specific variety, and most governments regulate the commercial use of the various terms according to the relative quantities of the main ingredients, notably the amount of cream. Products that do not meet the criteria to be called ice cream are sometimes labelled \\\\\\&quot;frozen dairy dessert\\\\\\&quot; instead. In other countries, such as Italy and Argentina, one word is used fo\\\\r all variants. Analogues made from dairy alternatives, such as goat's or sheep's milk, or milk substitutes (e.g., soy, cashew, coconut, almond milk or tofu), are available for those who are lactose intolerant, allergic to dairy protein or vegan.\\&quot;}&quot;)\n                .execute()\n                .toCompletableFuture()\n                .thenAccept(System.out::println)\n                .join();\n    \n        client.close();\n    \n    \n    }\n\n}\n</code></pre>\n<p>Attempted to import <code>AsyncHttpClient</code> but had the error mentioned above. Here is my code, I removed the API key for obvious reasons. I checked the Internet but could not find a similar problem to mine.</p>\n"},{"tags":["java","spring-boot","spring-mvc","shiro"],"owner":{"account_id":9985518,"reputation":83,"user_id":7386867,"accept_rate":14,"display_name":"Ari Wibowo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504775,"creation_date":1689670564,"question_id":76711077,"body_markdown":"I&#39;m having some troubles in my Springboot app using Apache Shiro as a Security Framework, when i called the login page, it&#39;s always give me &quot;redirected you too many times.&quot; error.\r\n\r\nI&#39;m using this XML based shiro setting : \r\n\r\n```\r\n&lt;bean id=&quot;cacheManagerShiro&quot; class=&quot;org.apache.shiro.cache.ehcache.EhCacheManager&quot;&gt;\r\n\t&lt;property name=&quot;cacheManagerConfigFile&quot; value=&quot;classpath:ehcache-shiro.xml&quot; /&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;credentialsMatcher&quot; class=&quot;com.newtouch.lion.web.shiro.credentials.RetryLimitHashedCredentialsMatcher&quot;&gt;\r\n\t&lt;constructor-arg ref=&quot;cacheManagerShiro&quot; /&gt;\r\n\t&lt;property name=&quot;hashAlgorithmName&quot; value=&quot;sha1&quot; /&gt;\r\n\t&lt;property name=&quot;hashIterations&quot; value=&quot;2&quot; /&gt;\r\n\t&lt;property name=&quot;storedCredentialsHexEncoded&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;property name=&quot;retryMaxCount&quot;  value=&quot;5&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;userRealm&quot; class=&quot;com.newtouch.starter.core.web.shiro.realm.CustomUserRealm&quot;&gt;\r\n\t&lt;property name=&quot;credentialsMatcher&quot; ref=&quot;credentialsMatcher&quot; /&gt;\r\n\t&lt;property name=&quot;cachingEnabled&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;property name=&quot;authenticationCachingEnabled&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;property name=&quot;authenticationCacheName&quot; value=&quot;authenticationCache&quot; /&gt;\r\n\t&lt;property name=&quot;authorizationCachingEnabled&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;property name=&quot;authorizationCacheName&quot; value=&quot;authorizationCache&quot; /&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;sessionIdGenerator&quot; class=&quot;org.apache.shiro.session.mgt.eis.JavaUuidSessionIdGenerator&quot; /&gt;\r\n&lt;bean id=&quot;sessionIdCookie&quot; class=&quot;org.apache.shiro.web.servlet.SimpleCookie&quot;&gt;\r\n\t&lt;constructor-arg value=&quot;sid&quot; /&gt;\r\n\t&lt;property name=&quot;httpOnly&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;property name=&quot;maxAge&quot; value=&quot;-1&quot; /&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;rememberMeCookie&quot; class=&quot;org.apache.shiro.web.servlet.SimpleCookie&quot;&gt;\r\n    &lt;constructor-arg value=&quot;rememberMe&quot;/&gt;\r\n    &lt;property name=&quot;httpOnly&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;path&quot; value=&quot;/admin&quot;/&gt;        \r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;rememberMeManager&quot; class=&quot;org.apache.shiro.web.mgt.CookieRememberMeManager&quot;&gt;\r\n    &lt;property name=&quot;cipherKey&quot;  value=&quot;#{T(org.apache.shiro.codec.Base64).decode(&#39;4AvVhmFLUs0KTA3Kprsdag==&#39;)}&quot;/&gt;\r\n    &lt;property name=&quot;cookie&quot; ref=&quot;rememberMeCookie&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;sessionDAO&quot; class=&quot;org.apache.shiro.session.mgt.eis.EnterpriseCacheSessionDAO&quot;&gt;\r\n\t&lt;property name=&quot;activeSessionsCacheName&quot; value=&quot;shiro-activeSessionCache&quot; /&gt;\r\n\t&lt;property name=&quot;sessionIdGenerator&quot; ref=&quot;sessionIdGenerator&quot; /&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;sessionValidationScheduler&quot; class=&quot;com.newtouch.starter.core.web.shiro.session.QuartzSessionValidationScheduler&quot;&gt;\r\n\t&lt;property name=&quot;sessionValidationInterval&quot; value=&quot;1800000&quot; /&gt;\r\n\t&lt;property name=&quot;sessionManager&quot; ref=&quot;sessionManager&quot; /&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;sessionManager&quot; class=&quot;org.apache.shiro.web.session.mgt.DefaultWebSessionManager&quot;&gt;\r\n\t&lt;property name=&quot;globalSessionTimeout&quot; value=&quot;36000000&quot; /&gt;\r\n\t&lt;property name=&quot;deleteInvalidSessions&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;property name=&quot;sessionValidationSchedulerEnabled&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;property name=&quot;sessionValidationScheduler&quot; ref=&quot;sessionValidationScheduler&quot; /&gt;\r\n\t&lt;property name=&quot;sessionDAO&quot; ref=&quot;sessionDAO&quot; /&gt;\r\n\t&lt;property name=&quot;sessionIdCookieEnabled&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;property name=&quot;sessionIdCookie&quot; ref=&quot;sessionIdCookie&quot; /&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;securityManager&quot; class=&quot;org.apache.shiro.web.mgt.DefaultWebSecurityManager&quot;&gt;\r\n\t&lt;property name=&quot;realm&quot; ref=&quot;userRealm&quot; /&gt;\r\n\t&lt;property name=&quot;sessionManager&quot; ref=&quot;sessionManager&quot; /&gt;\r\n\t&lt;property name=&quot;cacheManager&quot; ref=&quot;cacheManagerShiro&quot; /&gt;\r\n\t&lt;property name=&quot;rememberMeManager&quot; ref=&quot;rememberMeManager&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;bean class=&quot;org.springframework.beans.factory.config.MethodInvokingFactoryBean&quot;&gt;\r\n\t&lt;property name=&quot;staticMethod&quot; value=&quot;org.apache.shiro.SecurityUtils.setSecurityManager&quot; /&gt;\r\n\t&lt;property name=&quot;arguments&quot; ref=&quot;securityManager&quot; /&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;formAuthenticationFilter&quot; class=&quot;com.newtouch.lion.web.shiro.filter.AjaxFormAuthenticationFilter&quot;&gt;\r\n\t&lt;property name=&quot;rememberMeParam&quot; value=&quot;rememberMe&quot;/&gt;\r\n\t&lt;property name=&quot;usernameParam&quot; value=&quot;username&quot; /&gt;\r\n\t&lt;property name=&quot;passwordParam&quot; value=&quot;password&quot; /&gt;\r\n\t&lt;property name=&quot;loginUrl&quot;     value=&quot;/login.htm&quot; /&gt;\r\n\t&lt;property name=&quot;successUrl&quot; value=&quot;/index.htm&quot; /&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;forceLogoutFilter&quot; class=&quot;com.newtouch.lion.web.shiro.filter.ForceLogoutFilter&quot;&gt;\r\n\t&lt;property name=&quot;forceLogoutUrl&quot; value=&quot;/loginerror.htm&quot;/&gt;\r\n\t&lt;property name=&quot;sessionCacheManager&quot; ref=&quot;sessionCacheManager&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;sessionControlFilter&quot; class=&quot;com.newtouch.lion.web.shiro.filter.SessionControllerFilter&quot;&gt;\r\n\t&lt;constructor-arg index=&quot;0&quot; ref=&quot;cacheManagerShiro&quot; /&gt;\r\n\t&lt;property name=&quot;sessionManager&quot; ref=&quot;sessionManager&quot;/&gt;\r\n\t&lt;property name=&quot;maxSession&quot; value=&quot;1&quot;/&gt;\r\n\t&lt;property name=&quot;forceLogoutUrl&quot; value=&quot;/loginerror.htm&quot;/&gt;\r\n\t&lt;property name=&quot;forceLogoutAfter&quot; value=&quot;true&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;sessionCacheManager&quot; class=&quot;com.newtouch.lion.web.shiro.cache.SessionCacheManager&quot;&gt;\r\n\t&lt;property name=&quot;cacheManager&quot; ref=&quot;cacheManagerShiro&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;logoutFilter&quot; class=&quot;com.newtouch.lion.web.shiro.filter.LogoutSessionFilter&quot;&gt;\r\n\t&lt;property name=&quot;redirectUrl&quot;  value=&quot;/login.htm&quot;/&gt;\r\n\t&lt;property name=&quot;sessionCacheManager&quot; ref=&quot;sessionCacheManager&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;ajaxPermissions&quot; class=&quot;com.newtouch.lion.web.shiro.filter.AjaxPermissionshorizationFilter&quot;/&gt;\r\n&lt;bean id=&quot;shiroFilter&quot; class=&quot;org.apache.shiro.spring.web.ShiroFilterFactoryBean&quot;&gt;\r\n\t&lt;property name=&quot;securityManager&quot; ref=&quot;securityManager&quot; /&gt;\r\n\t&lt;property name=&quot;loginUrl&quot; value=&quot;/login.htm&quot; /&gt;\r\n\t&lt;property name=&quot;unauthorizedUrl&quot; value=&quot;/unauthorized.htm&quot; /&gt;\r\n\t&lt;property name=&quot;successUrl&quot; value=&quot;/index.htm&quot;/&gt;\r\n\t&lt;property name=&quot;filters&quot;&gt;\r\n\t\t&lt;util:map&gt;\r\n\t\t\t&lt;entry key=&quot;authc&quot; value-ref=&quot;formAuthenticationFilter&quot; /&gt;\r\n\t\t\t&lt;entry key=&quot;forceLogoutFilter&quot; value-ref=&quot;forceLogoutFilter&quot;/&gt;\r\n\t\t\t&lt;entry key=&quot;logoutFilter&quot; value-ref=&quot;logoutFilter&quot;/&gt;\r\n\t\t\t&lt;entry key=&quot;perms&quot; value-ref=&quot;ajaxPermissions&quot;/&gt;\r\n\t\t&lt;/util:map&gt;\r\n\t&lt;/property&gt;\r\n\t&lt;property name=&quot;filterChainDefinitionMap&quot; ref=&quot;filterChainDefinitionManager&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;bean  id=&quot;filterChainDefinitionManager&quot; class=&quot;com.newtouch.starter.core.web.shiro.chain.ShiroFilterChainDefinitionManager&quot;&gt;\r\n\t&lt;property name=&quot;filterChainDefinitions&quot;&gt;\r\n\t\t&lt;value&gt;\r\n\t\t\t/rest/** = anon\r\n\t\t\t/ws/** = anon\r\n\t\t\t/resources/** = anon\r\n\t\t\t/unauthorized.htm =anon\r\n\t\t\t/loginerror.htm=anon\r\n\t\t\t/i18n/language.htm = anon\r\n\t\t\t/login.htm = authc\r\n\t\t\t/unauthorized.htm = authc\r\n\t\t\t/logout.htm=logoutFilter\r\n\t\t\t/** = authc\r\n\t\t&lt;/value&gt;\r\n\t&lt;/property&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;lifecycleBeanPostProcessor&quot; class=&quot;org.apache.shiro.spring.LifecycleBeanPostProcessor&quot; /&gt;\r\n```\r\n\r\nThe code for login page using &quot;username&quot; &amp; &quot;password&quot; is already added too in the project.\r\n\r\nFor those who understand how shiro work &amp; noticed if other config file is needed, i will provide the other config file if necessary.\r\n\r\nAny help would be very appreciated.\r\nThank you.","title":"Springboot Apache Shiro Login page redirected you too many times","body":"<p>I'm having some troubles in my Springboot app using Apache Shiro as a Security Framework, when i called the login page, it's always give me &quot;redirected you too many times.&quot; error.</p>\n<p>I'm using this XML based shiro setting :</p>\n<pre><code>&lt;bean id=&quot;cacheManagerShiro&quot; class=&quot;org.apache.shiro.cache.ehcache.EhCacheManager&quot;&gt;\n    &lt;property name=&quot;cacheManagerConfigFile&quot; value=&quot;classpath:ehcache-shiro.xml&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;credentialsMatcher&quot; class=&quot;com.newtouch.lion.web.shiro.credentials.RetryLimitHashedCredentialsMatcher&quot;&gt;\n    &lt;constructor-arg ref=&quot;cacheManagerShiro&quot; /&gt;\n    &lt;property name=&quot;hashAlgorithmName&quot; value=&quot;sha1&quot; /&gt;\n    &lt;property name=&quot;hashIterations&quot; value=&quot;2&quot; /&gt;\n    &lt;property name=&quot;storedCredentialsHexEncoded&quot; value=&quot;true&quot; /&gt;\n    &lt;property name=&quot;retryMaxCount&quot;  value=&quot;5&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;userRealm&quot; class=&quot;com.newtouch.starter.core.web.shiro.realm.CustomUserRealm&quot;&gt;\n    &lt;property name=&quot;credentialsMatcher&quot; ref=&quot;credentialsMatcher&quot; /&gt;\n    &lt;property name=&quot;cachingEnabled&quot; value=&quot;true&quot; /&gt;\n    &lt;property name=&quot;authenticationCachingEnabled&quot; value=&quot;true&quot; /&gt;\n    &lt;property name=&quot;authenticationCacheName&quot; value=&quot;authenticationCache&quot; /&gt;\n    &lt;property name=&quot;authorizationCachingEnabled&quot; value=&quot;true&quot; /&gt;\n    &lt;property name=&quot;authorizationCacheName&quot; value=&quot;authorizationCache&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;sessionIdGenerator&quot; class=&quot;org.apache.shiro.session.mgt.eis.JavaUuidSessionIdGenerator&quot; /&gt;\n&lt;bean id=&quot;sessionIdCookie&quot; class=&quot;org.apache.shiro.web.servlet.SimpleCookie&quot;&gt;\n    &lt;constructor-arg value=&quot;sid&quot; /&gt;\n    &lt;property name=&quot;httpOnly&quot; value=&quot;true&quot; /&gt;\n    &lt;property name=&quot;maxAge&quot; value=&quot;-1&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;rememberMeCookie&quot; class=&quot;org.apache.shiro.web.servlet.SimpleCookie&quot;&gt;\n    &lt;constructor-arg value=&quot;rememberMe&quot;/&gt;\n    &lt;property name=&quot;httpOnly&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;path&quot; value=&quot;/admin&quot;/&gt;        \n&lt;/bean&gt;\n&lt;bean id=&quot;rememberMeManager&quot; class=&quot;org.apache.shiro.web.mgt.CookieRememberMeManager&quot;&gt;\n    &lt;property name=&quot;cipherKey&quot;  value=&quot;#{T(org.apache.shiro.codec.Base64).decode('4AvVhmFLUs0KTA3Kprsdag==')}&quot;/&gt;\n    &lt;property name=&quot;cookie&quot; ref=&quot;rememberMeCookie&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;sessionDAO&quot; class=&quot;org.apache.shiro.session.mgt.eis.EnterpriseCacheSessionDAO&quot;&gt;\n    &lt;property name=&quot;activeSessionsCacheName&quot; value=&quot;shiro-activeSessionCache&quot; /&gt;\n    &lt;property name=&quot;sessionIdGenerator&quot; ref=&quot;sessionIdGenerator&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;sessionValidationScheduler&quot; class=&quot;com.newtouch.starter.core.web.shiro.session.QuartzSessionValidationScheduler&quot;&gt;\n    &lt;property name=&quot;sessionValidationInterval&quot; value=&quot;1800000&quot; /&gt;\n    &lt;property name=&quot;sessionManager&quot; ref=&quot;sessionManager&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;sessionManager&quot; class=&quot;org.apache.shiro.web.session.mgt.DefaultWebSessionManager&quot;&gt;\n    &lt;property name=&quot;globalSessionTimeout&quot; value=&quot;36000000&quot; /&gt;\n    &lt;property name=&quot;deleteInvalidSessions&quot; value=&quot;true&quot; /&gt;\n    &lt;property name=&quot;sessionValidationSchedulerEnabled&quot; value=&quot;true&quot; /&gt;\n    &lt;property name=&quot;sessionValidationScheduler&quot; ref=&quot;sessionValidationScheduler&quot; /&gt;\n    &lt;property name=&quot;sessionDAO&quot; ref=&quot;sessionDAO&quot; /&gt;\n    &lt;property name=&quot;sessionIdCookieEnabled&quot; value=&quot;true&quot; /&gt;\n    &lt;property name=&quot;sessionIdCookie&quot; ref=&quot;sessionIdCookie&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;securityManager&quot; class=&quot;org.apache.shiro.web.mgt.DefaultWebSecurityManager&quot;&gt;\n    &lt;property name=&quot;realm&quot; ref=&quot;userRealm&quot; /&gt;\n    &lt;property name=&quot;sessionManager&quot; ref=&quot;sessionManager&quot; /&gt;\n    &lt;property name=&quot;cacheManager&quot; ref=&quot;cacheManagerShiro&quot; /&gt;\n    &lt;property name=&quot;rememberMeManager&quot; ref=&quot;rememberMeManager&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean class=&quot;org.springframework.beans.factory.config.MethodInvokingFactoryBean&quot;&gt;\n    &lt;property name=&quot;staticMethod&quot; value=&quot;org.apache.shiro.SecurityUtils.setSecurityManager&quot; /&gt;\n    &lt;property name=&quot;arguments&quot; ref=&quot;securityManager&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;formAuthenticationFilter&quot; class=&quot;com.newtouch.lion.web.shiro.filter.AjaxFormAuthenticationFilter&quot;&gt;\n    &lt;property name=&quot;rememberMeParam&quot; value=&quot;rememberMe&quot;/&gt;\n    &lt;property name=&quot;usernameParam&quot; value=&quot;username&quot; /&gt;\n    &lt;property name=&quot;passwordParam&quot; value=&quot;password&quot; /&gt;\n    &lt;property name=&quot;loginUrl&quot;     value=&quot;/login.htm&quot; /&gt;\n    &lt;property name=&quot;successUrl&quot; value=&quot;/index.htm&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;forceLogoutFilter&quot; class=&quot;com.newtouch.lion.web.shiro.filter.ForceLogoutFilter&quot;&gt;\n    &lt;property name=&quot;forceLogoutUrl&quot; value=&quot;/loginerror.htm&quot;/&gt;\n    &lt;property name=&quot;sessionCacheManager&quot; ref=&quot;sessionCacheManager&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;sessionControlFilter&quot; class=&quot;com.newtouch.lion.web.shiro.filter.SessionControllerFilter&quot;&gt;\n    &lt;constructor-arg index=&quot;0&quot; ref=&quot;cacheManagerShiro&quot; /&gt;\n    &lt;property name=&quot;sessionManager&quot; ref=&quot;sessionManager&quot;/&gt;\n    &lt;property name=&quot;maxSession&quot; value=&quot;1&quot;/&gt;\n    &lt;property name=&quot;forceLogoutUrl&quot; value=&quot;/loginerror.htm&quot;/&gt;\n    &lt;property name=&quot;forceLogoutAfter&quot; value=&quot;true&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;sessionCacheManager&quot; class=&quot;com.newtouch.lion.web.shiro.cache.SessionCacheManager&quot;&gt;\n    &lt;property name=&quot;cacheManager&quot; ref=&quot;cacheManagerShiro&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;logoutFilter&quot; class=&quot;com.newtouch.lion.web.shiro.filter.LogoutSessionFilter&quot;&gt;\n    &lt;property name=&quot;redirectUrl&quot;  value=&quot;/login.htm&quot;/&gt;\n    &lt;property name=&quot;sessionCacheManager&quot; ref=&quot;sessionCacheManager&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;ajaxPermissions&quot; class=&quot;com.newtouch.lion.web.shiro.filter.AjaxPermissionshorizationFilter&quot;/&gt;\n&lt;bean id=&quot;shiroFilter&quot; class=&quot;org.apache.shiro.spring.web.ShiroFilterFactoryBean&quot;&gt;\n    &lt;property name=&quot;securityManager&quot; ref=&quot;securityManager&quot; /&gt;\n    &lt;property name=&quot;loginUrl&quot; value=&quot;/login.htm&quot; /&gt;\n    &lt;property name=&quot;unauthorizedUrl&quot; value=&quot;/unauthorized.htm&quot; /&gt;\n    &lt;property name=&quot;successUrl&quot; value=&quot;/index.htm&quot;/&gt;\n    &lt;property name=&quot;filters&quot;&gt;\n        &lt;util:map&gt;\n            &lt;entry key=&quot;authc&quot; value-ref=&quot;formAuthenticationFilter&quot; /&gt;\n            &lt;entry key=&quot;forceLogoutFilter&quot; value-ref=&quot;forceLogoutFilter&quot;/&gt;\n            &lt;entry key=&quot;logoutFilter&quot; value-ref=&quot;logoutFilter&quot;/&gt;\n            &lt;entry key=&quot;perms&quot; value-ref=&quot;ajaxPermissions&quot;/&gt;\n        &lt;/util:map&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;filterChainDefinitionMap&quot; ref=&quot;filterChainDefinitionManager&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean  id=&quot;filterChainDefinitionManager&quot; class=&quot;com.newtouch.starter.core.web.shiro.chain.ShiroFilterChainDefinitionManager&quot;&gt;\n    &lt;property name=&quot;filterChainDefinitions&quot;&gt;\n        &lt;value&gt;\n            /rest/** = anon\n            /ws/** = anon\n            /resources/** = anon\n            /unauthorized.htm =anon\n            /loginerror.htm=anon\n            /i18n/language.htm = anon\n            /login.htm = authc\n            /unauthorized.htm = authc\n            /logout.htm=logoutFilter\n            /** = authc\n        &lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;lifecycleBeanPostProcessor&quot; class=&quot;org.apache.shiro.spring.LifecycleBeanPostProcessor&quot; /&gt;\n</code></pre>\n<p>The code for login page using &quot;username&quot; &amp; &quot;password&quot; is already added too in the project.</p>\n<p>For those who understand how shiro work &amp; noticed if other config file is needed, i will provide the other config file if necessary.</p>\n<p>Any help would be very appreciated.\nThank you.</p>\n"},{"tags":["java","apache-flink","flink-streaming"],"comments":[{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1689891975,"post_id":76729518,"comment_id":135281487,"body_markdown":"Perhaps there&#39;s a line in the input file that doesn&#39;t have enough comma-separated fields?","body":"Perhaps there&#39;s a line in the input file that doesn&#39;t have enough comma-separated fields?"},{"owner":{"account_id":17640694,"reputation":23,"user_id":12803025,"display_name":"Sayan"},"score":0,"creation_date":1689934520,"post_id":76729518,"comment_id":135286564,"body_markdown":"Have used the same sample csv in both the cases. Works when I am using env.from Source() and does not work when using env.readTextFile()","body":"Have used the same sample csv in both the cases. Works when I am using env.from Source() and does not work when using env.readTextFile()"}],"owner":{"account_id":17640694,"reputation":23,"user_id":12803025,"display_name":"Sayan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504756,"creation_date":1689853544,"question_id":76729518,"body_markdown":"**The sample java code that I am using is follows**\r\n\r\n```\r\npackage com.fooflink;\r\n\r\nimport org.apache.flink.api.common.functions.MapFunction;\r\nimport org.apache.flink.api.java.ExecutionEnvironment;\r\nimport org.apache.flink.api.java.tuple.Tuple3;\r\n\r\npublic class CSVTestV2 {\r\n\r\n  public static void main(String[] args) throws Exception {\r\n   \r\n    ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();\r\n\r\n    String filePath = &quot;/Users/sayan.r/Downloads/sample.csv&quot;;\r\n\r\n    // Read the CSV file from local\r\n    env.readTextFile(filePath)\r\n        .map(new CSVParser())\r\n        .print();\r\n\r\n    // Execute the Flink job\r\n    env.execute(&quot;CSV Test V2&quot;);\r\n  }\r\n\r\n  // Custom MapFunction to parse the CSV data\r\n  public static class CSVParser implements MapFunction&lt;String, Tuple3&lt;String, String, String&gt;&gt; {\r\n\r\n    @Override\r\n    public Tuple3&lt;String, String, String&gt; map(String line) throws Exception {\r\n      String[] fields = line.split(&quot;,&quot;);\r\n\r\n      String id = fields[0];\r\n      String event_name4 = fields[4];\r\n      String from_state5 = fields[5];\r\n\r\n      return new Tuple3&lt;&gt;(id, event_name4, from_state5);\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\n**The output that I get while running this java code in my local Intellij IDE is as follows:**\r\n\r\n```\r\n/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50866:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/lib/tools.jar:/Users/sayan.r/workspace/foobar-flink/target/classes:/Users/sayan.r/.m2/repository/org/apache/flink/flink-core/1.16.1/flink-core-1.16.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-annotations/1.16.1/flink-annotations-1.16.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-metrics-core/1.16.1/flink-metrics-core-1.16.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-asm-9/9.2-15.0/flink-shaded-asm-9-9.2-15.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-jackson/2.12.4-15.0/flink-shaded-jackson-2.12.4-15.0.jar:/Users/sayan.r/.m2/repository/org/apache/commons/commons-lang3/3.3.2/commons-lang3-3.3.2.jar:/Users/sayan.r/.m2/repository/com/esotericsoftware/kryo/kryo/2.24.0/kryo-2.24.0.jar:/Users/sayan.r/.m2/repository/com/esotericsoftware/minlog/minlog/1.2/minlog-1.2.jar:/Users/sayan.r/.m2/repository/org/objenesis/objenesis/2.1/objenesis-2.1.jar:/Users/sayan.r/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/Users/sayan.r/.m2/repository/org/apache/commons/commons-compress/1.21/commons-compress-1.21.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-guava/30.1.1-jre-15.0/flink-shaded-guava-30.1.1-jre-15.0.jar:/Users/sayan.r/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/Users/sayan.r/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-force-shading/15.0/flink-shaded-force-shading-15.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-streaming-java/1.16.0/flink-streaming-java-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-file-sink-common/1.16.0/flink-file-sink-common-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-runtime/1.16.0/flink-runtime-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-rpc-core/1.16.0/flink-rpc-core-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-rpc-akka-loader/1.16.0/flink-rpc-akka-loader-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-queryable-state-client-java/1.16.0/flink-queryable-state-client-java-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-hadoop-fs/1.16.0/flink-hadoop-fs-1.16.0.jar:/Users/sayan.r/.m2/repository/commons-io/commons-io/2.11.0/commons-io-2.11.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-netty/4.1.70.Final-15.0/flink-shaded-netty-4.1.70.Final-15.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-zookeeper-3/3.5.9-15.0/flink-shaded-zookeeper-3-3.5.9-15.0.jar:/Users/sayan.r/.m2/repository/org/javassist/javassist/3.24.0-GA/javassist-3.24.0-GA.jar:/Users/sayan.r/.m2/repository/org/xerial/snappy/snappy-java/1.1.8.3/snappy-java-1.1.8.3.jar:/Users/sayan.r/.m2/repository/org/lz4/lz4-java/1.8.0/lz4-java-1.8.0.jar:/Users/sayan.r/.m2/repository/org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-java/1.16.0/flink-java-1.16.0.jar:/Users/sayan.r/.m2/repository/com/twitter/chill-java/0.7.6/chill-java-0.7.6.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-clients/1.16.0/flink-clients-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-optimizer/1.16.0/flink-optimizer-1.16.0.jar:/Users/sayan.r/.m2/repository/commons-cli/commons-cli/1.5.0/commons-cli-1.5.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-csv/1.16.1/flink-csv-1.16.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-connector-files/1.16.1/flink-connector-files-1.16.1.jar:/Users/sayan.r/.m2/repository/org/yaml/snakeyaml/1.29/snakeyaml-1.29.jar com.fooflink.CSVTestV2\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00000001056bf6b9, pid=31026, tid=0x000000000000b703\r\n#\r\n# JRE version: OpenJDK Runtime Environment (8.0_282) (build 1.8.0_282-bre_2021_01_20_16_06-b00)\r\n# Java VM: OpenJDK 64-Bit Server VM (25.282-b00 mixed mode bsd-amd64 compressed oops)\r\n# Problematic frame:\r\n# [thread 47619 also had an error]\r\nV  [libjvm.dylib+0x5666b9][thread 48387 also had an error]\r\n  Unsafe_GetInt+0xcd\r\n#\r\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\r\n#\r\n[thread 46339 also had an error]\r\n# An error report file with more information is saved as:\r\n# /Users/sayan.r/workspace/foobar-flink/hs_err_pid31026.log\r\nCompiled method (nm)    3778 1760     n 0       sun.misc.Unsafe::getInt (native)\r\n total in heap  [0x000000010dd95450,0x000000010dd957a0] = 848\r\n relocation     [0x000000010dd95578,0x000000010dd955b8] = 64\r\n main code      [0x000000010dd955c0,0x000000010dd957a0] = 480\r\nCompiled method (nm)    3778 1760     n 0       sun.misc.Unsafe::getInt (native)\r\n total in heap  [0x000000010dd95450,0x000000010dd957a0] = 848\r\n relocation     [0x000000010dd95578,0x000000010dd955b8] = 64\r\n main code      [0x000000010dd955c0,0x000000010dd957a0] = 480\r\n[thread 49923 also had an error]\r\n[thread 82691 also had an error]\r\n[thread 49159 also had an error]\r\n[thread 80131 also had an error]\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   http://bugreport.java.com/bugreport/crash.jsp\r\n#\r\n\r\nProcess finished with exit code 134 (interrupted by signal 6: SIGABRT)\r\n```\r\n\r\nWhat could be the reason for this?\r\n\r\nHowever when I am using the following java code the program works like a charm.\r\n\r\n```\r\n public void execute() throws Exception {\r\n    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n\r\n    String filePath = &quot;/Users/sayan.r/Downloads/sample.csv&quot;;\r\n\r\n    CsvReaderFormat&lt;IndiaBins&gt; csvFormat = CsvReaderFormat.forPojo(Pojo.class);\r\n\r\n    FileSource&lt;Pojo&gt; source =\r\n        FileSource.forRecordStreamFormat(csvFormat, Path.fromLocalFile(new File(filePath))).build();\r\n    DataStream&lt;Pojo&gt; stream = env.fromSource(source, WatermarkStrategy.noWatermarks(),\r\n        &quot;csv-source&quot;);\r\n\r\n    stream\r\n        .map(new IncrementMapFunction())\r\n        .addSink(sink);\r\n\r\n    env.execute();\r\n  }\r\n```\r\n\r\nI wanted to understand the reason why one works and why the other one throws a SIGSEGV error.","title":"How do I solve this problem of reading a CSV file in Apache Flink?","body":"<p><strong>The sample java code that I am using is follows</strong></p>\n<pre><code>package com.fooflink;\n\nimport org.apache.flink.api.common.functions.MapFunction;\nimport org.apache.flink.api.java.ExecutionEnvironment;\nimport org.apache.flink.api.java.tuple.Tuple3;\n\npublic class CSVTestV2 {\n\n  public static void main(String[] args) throws Exception {\n   \n    ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();\n\n    String filePath = &quot;/Users/sayan.r/Downloads/sample.csv&quot;;\n\n    // Read the CSV file from local\n    env.readTextFile(filePath)\n        .map(new CSVParser())\n        .print();\n\n    // Execute the Flink job\n    env.execute(&quot;CSV Test V2&quot;);\n  }\n\n  // Custom MapFunction to parse the CSV data\n  public static class CSVParser implements MapFunction&lt;String, Tuple3&lt;String, String, String&gt;&gt; {\n\n    @Override\n    public Tuple3&lt;String, String, String&gt; map(String line) throws Exception {\n      String[] fields = line.split(&quot;,&quot;);\n\n      String id = fields[0];\n      String event_name4 = fields[4];\n      String from_state5 = fields[5];\n\n      return new Tuple3&lt;&gt;(id, event_name4, from_state5);\n    }\n  }\n}\n\n</code></pre>\n<p><strong>The output that I get while running this java code in my local Intellij IDE is as follows:</strong></p>\n<pre><code>/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=50866:/Applications/IntelliJ IDEA CE.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/jre/lib/rt.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/openjdk-8.jdk/Contents/Home/lib/tools.jar:/Users/sayan.r/workspace/foobar-flink/target/classes:/Users/sayan.r/.m2/repository/org/apache/flink/flink-core/1.16.1/flink-core-1.16.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-annotations/1.16.1/flink-annotations-1.16.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-metrics-core/1.16.1/flink-metrics-core-1.16.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-asm-9/9.2-15.0/flink-shaded-asm-9-9.2-15.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-jackson/2.12.4-15.0/flink-shaded-jackson-2.12.4-15.0.jar:/Users/sayan.r/.m2/repository/org/apache/commons/commons-lang3/3.3.2/commons-lang3-3.3.2.jar:/Users/sayan.r/.m2/repository/com/esotericsoftware/kryo/kryo/2.24.0/kryo-2.24.0.jar:/Users/sayan.r/.m2/repository/com/esotericsoftware/minlog/minlog/1.2/minlog-1.2.jar:/Users/sayan.r/.m2/repository/org/objenesis/objenesis/2.1/objenesis-2.1.jar:/Users/sayan.r/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/Users/sayan.r/.m2/repository/org/apache/commons/commons-compress/1.21/commons-compress-1.21.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-guava/30.1.1-jre-15.0/flink-shaded-guava-30.1.1-jre-15.0.jar:/Users/sayan.r/.m2/repository/org/slf4j/slf4j-api/1.7.32/slf4j-api-1.7.32.jar:/Users/sayan.r/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-force-shading/15.0/flink-shaded-force-shading-15.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-streaming-java/1.16.0/flink-streaming-java-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-file-sink-common/1.16.0/flink-file-sink-common-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-runtime/1.16.0/flink-runtime-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-rpc-core/1.16.0/flink-rpc-core-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-rpc-akka-loader/1.16.0/flink-rpc-akka-loader-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-queryable-state-client-java/1.16.0/flink-queryable-state-client-java-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-hadoop-fs/1.16.0/flink-hadoop-fs-1.16.0.jar:/Users/sayan.r/.m2/repository/commons-io/commons-io/2.11.0/commons-io-2.11.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-netty/4.1.70.Final-15.0/flink-shaded-netty-4.1.70.Final-15.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-shaded-zookeeper-3/3.5.9-15.0/flink-shaded-zookeeper-3-3.5.9-15.0.jar:/Users/sayan.r/.m2/repository/org/javassist/javassist/3.24.0-GA/javassist-3.24.0-GA.jar:/Users/sayan.r/.m2/repository/org/xerial/snappy/snappy-java/1.1.8.3/snappy-java-1.1.8.3.jar:/Users/sayan.r/.m2/repository/org/lz4/lz4-java/1.8.0/lz4-java-1.8.0.jar:/Users/sayan.r/.m2/repository/org/apache/commons/commons-math3/3.6.1/commons-math3-3.6.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-java/1.16.0/flink-java-1.16.0.jar:/Users/sayan.r/.m2/repository/com/twitter/chill-java/0.7.6/chill-java-0.7.6.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-clients/1.16.0/flink-clients-1.16.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-optimizer/1.16.0/flink-optimizer-1.16.0.jar:/Users/sayan.r/.m2/repository/commons-cli/commons-cli/1.5.0/commons-cli-1.5.0.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-csv/1.16.1/flink-csv-1.16.1.jar:/Users/sayan.r/.m2/repository/org/apache/flink/flink-connector-files/1.16.1/flink-connector-files-1.16.1.jar:/Users/sayan.r/.m2/repository/org/yaml/snakeyaml/1.29/snakeyaml-1.29.jar com.fooflink.CSVTestV2\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\n#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00000001056bf6b9, pid=31026, tid=0x000000000000b703\n#\n# JRE version: OpenJDK Runtime Environment (8.0_282) (build 1.8.0_282-bre_2021_01_20_16_06-b00)\n# Java VM: OpenJDK 64-Bit Server VM (25.282-b00 mixed mode bsd-amd64 compressed oops)\n# Problematic frame:\n# [thread 47619 also had an error]\nV  [libjvm.dylib+0x5666b9][thread 48387 also had an error]\n  Unsafe_GetInt+0xcd\n#\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\n#\n[thread 46339 also had an error]\n# An error report file with more information is saved as:\n# /Users/sayan.r/workspace/foobar-flink/hs_err_pid31026.log\nCompiled method (nm)    3778 1760     n 0       sun.misc.Unsafe::getInt (native)\n total in heap  [0x000000010dd95450,0x000000010dd957a0] = 848\n relocation     [0x000000010dd95578,0x000000010dd955b8] = 64\n main code      [0x000000010dd955c0,0x000000010dd957a0] = 480\nCompiled method (nm)    3778 1760     n 0       sun.misc.Unsafe::getInt (native)\n total in heap  [0x000000010dd95450,0x000000010dd957a0] = 848\n relocation     [0x000000010dd95578,0x000000010dd955b8] = 64\n main code      [0x000000010dd955c0,0x000000010dd957a0] = 480\n[thread 49923 also had an error]\n[thread 82691 also had an error]\n[thread 49159 also had an error]\n[thread 80131 also had an error]\n#\n# If you would like to submit a bug report, please visit:\n#   http://bugreport.java.com/bugreport/crash.jsp\n#\n\nProcess finished with exit code 134 (interrupted by signal 6: SIGABRT)\n</code></pre>\n<p>What could be the reason for this?</p>\n<p>However when I am using the following java code the program works like a charm.</p>\n<pre><code> public void execute() throws Exception {\n    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\n    String filePath = &quot;/Users/sayan.r/Downloads/sample.csv&quot;;\n\n    CsvReaderFormat&lt;IndiaBins&gt; csvFormat = CsvReaderFormat.forPojo(Pojo.class);\n\n    FileSource&lt;Pojo&gt; source =\n        FileSource.forRecordStreamFormat(csvFormat, Path.fromLocalFile(new File(filePath))).build();\n    DataStream&lt;Pojo&gt; stream = env.fromSource(source, WatermarkStrategy.noWatermarks(),\n        &quot;csv-source&quot;);\n\n    stream\n        .map(new IncrementMapFunction())\n        .addSink(sink);\n\n    env.execute();\n  }\n</code></pre>\n<p>I wanted to understand the reason why one works and why the other one throws a SIGSEGV error.</p>\n"},{"tags":["java","solr","lucene","solr8"],"owner":{"account_id":10916652,"reputation":11,"user_id":8024268,"display_name":"user8024268"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691504720,"creation_date":1690046803,"question_id":76745034,"body_markdown":"I am facing an issue with my SOLR (version 8.5) document structure. Currently, I have an array of strings with delimited values in my document, and I&#39;d like to transform it into an array of objects for easier querying.\r\n\r\nOriginal Document Structure:\r\n\r\n```\r\n{\r\n  &quot;ID&quot;: &quot;123&quot;,\r\n  &quot;AnotherProperty&quot;: &quot;Value&quot;,\r\n  &quot;PersonalInfo&quot;: [\r\n    &quot;PersonalName|Prop1|Prop2|Prop3|Age|Weight&quot;,\r\n    &quot;PersonalName|Prop1|Prop2|Prop3|Age|Weight&quot;\r\n  ]\r\n}\r\n```\r\n\r\nDesired Document Structure:\r\n\r\n```\r\n{\r\n  &quot;ID&quot;: &quot;123&quot;,\r\n  &quot;AnotherProperty&quot;: &quot;Value&quot;,\r\n  &quot;PersonalInfo&quot;: [\r\n    {\r\n      &quot;PersonalName&quot;: &quot;Value&quot;,\r\n      &quot;Prop1&quot;: &quot;Value&quot;,\r\n      &quot;Prop2&quot;: &quot;Value&quot;,\r\n      &quot;Prop3&quot;: &quot;Value&quot;,\r\n      &quot;Age&quot;: &quot;Value&quot;,\r\n      &quot;Weight&quot;: &quot;Value&quot;\r\n    },\r\n    {\r\n      &quot;PersonalName&quot;: &quot;Value&quot;,\r\n      &quot;Prop1&quot;: &quot;Value&quot;,\r\n      &quot;Prop2&quot;: &quot;Value&quot;,\r\n      &quot;Prop3&quot;: &quot;Value&quot;,\r\n      &quot;Age&quot;: &quot;Value&quot;,\r\n      &quot;Weight&quot;: &quot;Value&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nI have attempted a solution using a custom transformer and updating the schema, but the resulting documents seem to have the transformed structure as strings.\r\n\r\nTransformer script in data-config.xml:\r\n\r\n```\r\nfunction CombinePersonalInfoFields(row) {\r\n    var personalFieldsArr = new java.util.ArrayList();\r\n    for (var i = 0; i &lt; row.get(&quot;PersonalInfo&quot;).size(); i++) {\r\n        var personalFieldObj = new org.apache.solr.common.util.SimpleOrderedMap();\r\n        personalFieldObj.add(&quot;PersonalName&quot;, row.get(&quot;PersonalName&quot;).get(i));\r\n        personalFieldObj.add(&quot;Prop1&quot;, row.get(&quot;Prop1&quot;).get(i));\r\n        personalFieldObj.add(&quot;Prop2&quot;, row.get(&quot;Prop2&quot;).get(i));\r\n        personalFieldObj.add(&quot;Age&quot;, row.get(&quot;Age&quot;).get(i));\r\n        personalFieldObj.add(&quot;Weight&quot;, row.get(&quot;Weight&quot;).get(i));\r\n        \r\n        personalFieldsArr.add(personalFieldObj);\r\n    }\r\n    row.put(&quot;Personal_Fields&quot;, personalFieldsArr);\r\n    return row;\r\n}\r\n\r\nfunction ProcessAllRows(row) {\r\n  // Other logic here\r\n  CombinePersonalInfoFields(row);\r\n  return row;\r\n}\r\n\r\n&lt;entity name=&quot;Document&quot; transformer=&quot;script:ProcessAllRows&quot;\r\n        pk=&quot;ID&quot;\r\n        query=&quot;[dbo].[DATA_Pull] &#39;${dih.request.FullLoad}&#39;, &#39;${dih.last_index_time}&#39;}&#39;&quot;&gt;\r\n    &lt;!-- Existing field mappings --&gt;\r\n&lt;/entity&gt;\r\n```\r\n\r\nAdding a new field type in the managed-schema.xml file:\r\n\r\n\r\n```\r\n&lt;fieldType name=&quot;child_document&quot; class=&quot;solr.TextField&quot; positionIncrementGap=&quot;100&quot;&gt;\r\n    &lt;analyzer&gt;\r\n        &lt;tokenizer class=&quot;solr.KeywordTokenizerFactory&quot;/&gt;\r\n    &lt;/analyzer&gt;\r\n&lt;/fieldType&gt;\r\n&lt;field name=&quot;Personal_Fields&quot; type=&quot;child_document&quot; multiValued=&quot;true&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt;\r\n```\r\n\r\n\r\nAfter making these changes, the documents I&#39;m getting have the desired object structure, but it seems the objects are stored as strings, likely due to using the TextField for the child_document field type.\r\n\r\nResulting Structure after applying the above solution:\r\n\r\n    {\r\n    &quot;ID&quot;:&quot;123&quot;,\r\n    &quot;AnotherProperty&quot;: &quot;Value&quot;\r\n    PersonalInfo:[&quot;{PersonalName:Value,Prop1: Value, Prop2: Value,Prop3: Value, Age: Value,Weight: Value&quot;}&quot;,\r\n    &quot;{PersonalName:Value,Prop1: Value, Prop2: Value,Prop3: Value, Age: Value,Weight: Value&quot;}&quot;]\r\n    }\r\n\r\nI&#39;d appreciate any guidance on what I might be missing or doing wrong here, and how to achieve the correct object structure so that I can query based on the child object fields.","title":"Converting Array of Strings to Array of Objects in SOLR 8.5.2 Document Structure","body":"<p>I am facing an issue with my SOLR (version 8.5) document structure. Currently, I have an array of strings with delimited values in my document, and I'd like to transform it into an array of objects for easier querying.</p>\n<p>Original Document Structure:</p>\n<pre><code>{\n  &quot;ID&quot;: &quot;123&quot;,\n  &quot;AnotherProperty&quot;: &quot;Value&quot;,\n  &quot;PersonalInfo&quot;: [\n    &quot;PersonalName|Prop1|Prop2|Prop3|Age|Weight&quot;,\n    &quot;PersonalName|Prop1|Prop2|Prop3|Age|Weight&quot;\n  ]\n}\n</code></pre>\n<p>Desired Document Structure:</p>\n<pre><code>{\n  &quot;ID&quot;: &quot;123&quot;,\n  &quot;AnotherProperty&quot;: &quot;Value&quot;,\n  &quot;PersonalInfo&quot;: [\n    {\n      &quot;PersonalName&quot;: &quot;Value&quot;,\n      &quot;Prop1&quot;: &quot;Value&quot;,\n      &quot;Prop2&quot;: &quot;Value&quot;,\n      &quot;Prop3&quot;: &quot;Value&quot;,\n      &quot;Age&quot;: &quot;Value&quot;,\n      &quot;Weight&quot;: &quot;Value&quot;\n    },\n    {\n      &quot;PersonalName&quot;: &quot;Value&quot;,\n      &quot;Prop1&quot;: &quot;Value&quot;,\n      &quot;Prop2&quot;: &quot;Value&quot;,\n      &quot;Prop3&quot;: &quot;Value&quot;,\n      &quot;Age&quot;: &quot;Value&quot;,\n      &quot;Weight&quot;: &quot;Value&quot;\n    }\n  ]\n}\n</code></pre>\n<p>I have attempted a solution using a custom transformer and updating the schema, but the resulting documents seem to have the transformed structure as strings.</p>\n<p>Transformer script in data-config.xml:</p>\n<pre><code>function CombinePersonalInfoFields(row) {\n    var personalFieldsArr = new java.util.ArrayList();\n    for (var i = 0; i &lt; row.get(&quot;PersonalInfo&quot;).size(); i++) {\n        var personalFieldObj = new org.apache.solr.common.util.SimpleOrderedMap();\n        personalFieldObj.add(&quot;PersonalName&quot;, row.get(&quot;PersonalName&quot;).get(i));\n        personalFieldObj.add(&quot;Prop1&quot;, row.get(&quot;Prop1&quot;).get(i));\n        personalFieldObj.add(&quot;Prop2&quot;, row.get(&quot;Prop2&quot;).get(i));\n        personalFieldObj.add(&quot;Age&quot;, row.get(&quot;Age&quot;).get(i));\n        personalFieldObj.add(&quot;Weight&quot;, row.get(&quot;Weight&quot;).get(i));\n        \n        personalFieldsArr.add(personalFieldObj);\n    }\n    row.put(&quot;Personal_Fields&quot;, personalFieldsArr);\n    return row;\n}\n\nfunction ProcessAllRows(row) {\n  // Other logic here\n  CombinePersonalInfoFields(row);\n  return row;\n}\n\n&lt;entity name=&quot;Document&quot; transformer=&quot;script:ProcessAllRows&quot;\n        pk=&quot;ID&quot;\n        query=&quot;[dbo].[DATA_Pull] '${dih.request.FullLoad}', '${dih.last_index_time}'}'&quot;&gt;\n    &lt;!-- Existing field mappings --&gt;\n&lt;/entity&gt;\n</code></pre>\n<p>Adding a new field type in the managed-schema.xml file:</p>\n<pre><code>&lt;fieldType name=&quot;child_document&quot; class=&quot;solr.TextField&quot; positionIncrementGap=&quot;100&quot;&gt;\n    &lt;analyzer&gt;\n        &lt;tokenizer class=&quot;solr.KeywordTokenizerFactory&quot;/&gt;\n    &lt;/analyzer&gt;\n&lt;/fieldType&gt;\n&lt;field name=&quot;Personal_Fields&quot; type=&quot;child_document&quot; multiValued=&quot;true&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt;\n</code></pre>\n<p>After making these changes, the documents I'm getting have the desired object structure, but it seems the objects are stored as strings, likely due to using the TextField for the child_document field type.</p>\n<p>Resulting Structure after applying the above solution:</p>\n<pre><code>{\n&quot;ID&quot;:&quot;123&quot;,\n&quot;AnotherProperty&quot;: &quot;Value&quot;\nPersonalInfo:[&quot;{PersonalName:Value,Prop1: Value, Prop2: Value,Prop3: Value, Age: Value,Weight: Value&quot;}&quot;,\n&quot;{PersonalName:Value,Prop1: Value, Prop2: Value,Prop3: Value, Age: Value,Weight: Value&quot;}&quot;]\n}\n</code></pre>\n<p>I'd appreciate any guidance on what I might be missing or doing wrong here, and how to achieve the correct object structure so that I can query based on the child object fields.</p>\n"},{"tags":["java","xmlhttprequest","basic-authentication","apache-httpclient-4.x"],"answers":[{"tags":[],"owner":{"account_id":2427554,"reputation":830,"user_id":2119169,"display_name":"Rasel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690368737,"creation_date":1690367720,"answer_id":76770370,"question_id":76765325,"body_markdown":"After debugging further within the **httpclient-4.5.3** library, I found that, there is two states (targetAuthState, proxyAuthState) there. Initially both of the states have value **UNCHALLEGED**.  \r\n\r\nSo the library at first send a request without any *Authorization* value in header to check if any authentication scheme is required or not. If the returned value is **4XX**, then targetAuthState value is changed to **CHALLEGED**. And this time library send request with *Authorization* value in header.\r\n\r\nBut if any one do not want this behavior, in that case basic Authorization have to be set directly without using **CredentialsProvider**. \r\n\r\n&gt; byte[] credentials = Base64.encodeBase64((&quot;user&quot; + &quot;:&quot; + &quot;pass&quot;).getBytes(StandardCharsets.UTF_8));\r\n            httpPost.setHeader(&quot;Authorization&quot;, &quot;Basic &quot; + new String(credentials, StandardCharsets.UTF_8));\r\n\r\nThe complete code will be like follwoing.\r\n\r\n        RequestConfig requestConfig = RequestConfig.custom().\r\n                setConnectTimeout(2000).\r\n                setSocketTimeout(2000).\r\n                build();\r\n       try (CloseableHttpClient httpClient = HttpClients.custom().\r\n                setDefaultRequestConfig(requestConfig).\r\n                build()) {\r\n            \r\n            String reqString = mapper.writeValueAsString(obj); // here obj is a Java class of request payload\r\n            StringEntity params = new StringEntity(reqString);\r\n            HttpPost httpPost = new HttpPost(url); // server url where double requests are going\r\n            httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\r\n            httpPost.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;);\r\n            byte[] credentials = Base64.encodeBase64((&quot;user&quot; + &quot;:&quot; + &quot;pass&quot;).getBytes(StandardCharsets.UTF_8));\r\n            httpPost.setHeader(&quot;Authorization&quot;, &quot;Basic &quot; + new String(credentials, StandardCharsets.UTF_8));\r\n            httpPost.setEntity(params);    \r\n\r\n            try (CloseableHttpResponse response = httpClient.execute(httpPost)) {\r\n\r\n                final String jsonString = EntityUtils.toString(response.getEntity());\r\n\r\n                if (200 == response.getStatusLine().getStatusCode()) {\r\n                    mapper = new ObjectMapper();\r\n                    \r\n                } \r\n            }\r\n        }    ","title":"Why 2 requests are sent from Java Apache HttpClient","body":"<p>After debugging further within the <strong>httpclient-4.5.3</strong> library, I found that, there is two states (targetAuthState, proxyAuthState) there. Initially both of the states have value <strong>UNCHALLEGED</strong>.</p>\n<p>So the library at first send a request without any <em>Authorization</em> value in header to check if any authentication scheme is required or not. If the returned value is <strong>4XX</strong>, then targetAuthState value is changed to <strong>CHALLEGED</strong>. And this time library send request with <em>Authorization</em> value in header.</p>\n<p>But if any one do not want this behavior, in that case basic Authorization have to be set directly without using <strong>CredentialsProvider</strong>.</p>\n<blockquote>\n<p>byte[] credentials = Base64.encodeBase64((&quot;user&quot; + &quot;:&quot; + &quot;pass&quot;).getBytes(StandardCharsets.UTF_8));\nhttpPost.setHeader(&quot;Authorization&quot;, &quot;Basic &quot; + new String(credentials, StandardCharsets.UTF_8));</p>\n</blockquote>\n<p>The complete code will be like follwoing.</p>\n<pre><code>    RequestConfig requestConfig = RequestConfig.custom().\n            setConnectTimeout(2000).\n            setSocketTimeout(2000).\n            build();\n   try (CloseableHttpClient httpClient = HttpClients.custom().\n            setDefaultRequestConfig(requestConfig).\n            build()) {\n        \n        String reqString = mapper.writeValueAsString(obj); // here obj is a Java class of request payload\n        StringEntity params = new StringEntity(reqString);\n        HttpPost httpPost = new HttpPost(url); // server url where double requests are going\n        httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\n        httpPost.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;);\n        byte[] credentials = Base64.encodeBase64((&quot;user&quot; + &quot;:&quot; + &quot;pass&quot;).getBytes(StandardCharsets.UTF_8));\n        httpPost.setHeader(&quot;Authorization&quot;, &quot;Basic &quot; + new String(credentials, StandardCharsets.UTF_8));\n        httpPost.setEntity(params);    \n\n        try (CloseableHttpResponse response = httpClient.execute(httpPost)) {\n\n            final String jsonString = EntityUtils.toString(response.getEntity());\n\n            if (200 == response.getStatusLine().getStatusCode()) {\n                mapper = new ObjectMapper();\n                \n            } \n        }\n    }    \n</code></pre>\n"}],"owner":{"account_id":2427554,"reputation":830,"user_id":2119169,"display_name":"Rasel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691504709,"creation_date":1690307190,"question_id":76765325,"body_markdown":"I have created one HTTP Post request with Basic authentication using **httpclient (*org.apache.httpcomponents)***.\r\n\r\n            CredentialsProvider provider = new BasicCredentialsProvider();\r\n            provider.setCredentials(AuthScope.ANY,new UsernamePasswordCredentials(&quot;user&quot;,&quot;pass&quot;));\r\n\r\n            RequestConfig requestConfig = RequestConfig.custom().\r\n                    setConnectTimeout(2000).\r\n                    setSocketTimeout(2000).\r\n                    build();\r\n           try (CloseableHttpClient httpClient = HttpClients.custom().\r\n                    setDefaultCredentialsProvider(provider).\r\n                    setDefaultRequestConfig(requestConfig).\r\n                    build()) {\r\n                \r\n                String reqString = mapper.writeValueAsString(obj); // here obj is a Java class of request payload\r\n                StringEntity params = new StringEntity(reqString);\r\n                HttpPost httpPost = new HttpPost(url); // server url where double requests are going\r\n                httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\r\n                httpPost.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;);\r\n                httpPost.setEntity(params);    \r\n\r\n                try (CloseableHttpResponse response = httpClient.execute(httpPost)) {\r\n\r\n                    final String jsonString = EntityUtils.toString(response.getEntity());\r\n\r\n                    if (200 == response.getStatusLine().getStatusCode()) {\r\n                        mapper = new ObjectMapper();\r\n                        \r\n                    } \r\n                }\r\n            }\r\n\r\nWhen **CloseableHttpResponse response = httpClient.execute(httpPost)** is executed 2 request went to the server, First one without Basic Authorizatin in header and 2nd one with Basic Authorizatin in header. What is the reason for this?\r\n\r\nI dig down into the **httpclient-4.5.3** library and found that actual point of double request generation is ***org.apache.http.impl.execchain.MainClientExec***. On that class **execute** method contains a for loop which is actually executed 2 times. I am giving that for loop below...\r\n\r\n        for (int execCount = 1;; execCount++) {\r\n\r\n                if (execCount &gt; 1 &amp;&amp; !RequestEntityProxy.isRepeatable(request)) {\r\n                    throw new NonRepeatableRequestException(&quot;Cannot retry request &quot; +\r\n                            &quot;with a non-repeatable request entity.&quot;);\r\n                }\r\n\r\n                if (execAware != null &amp;&amp; execAware.isAborted()) {\r\n                    throw new RequestAbortedException(&quot;Request aborted&quot;);\r\n                }\r\n\r\n                if (!managedConn.isOpen()) {\r\n                    this.log.debug(&quot;Opening connection &quot; + route);\r\n                    try {\r\n                        establishRoute(proxyAuthState, managedConn, route, request, context);\r\n                    } catch (final TunnelRefusedException ex) {\r\n                        if (this.log.isDebugEnabled()) {\r\n                            this.log.debug(ex.getMessage());\r\n                        }\r\n                        response = ex.getResponse();\r\n                        break;\r\n                    }\r\n                }\r\n                final int timeout = config.getSocketTimeout();\r\n                if (timeout &gt;= 0) {\r\n                    managedConn.setSocketTimeout(timeout);\r\n                }\r\n\r\n                if (execAware != null &amp;&amp; execAware.isAborted()) {\r\n                    throw new RequestAbortedException(&quot;Request aborted&quot;);\r\n                }\r\n\r\n                if (this.log.isDebugEnabled()) {\r\n                    this.log.debug(&quot;Executing request &quot; + request.getRequestLine());\r\n                }\r\n\r\n                if (!request.containsHeader(AUTH.WWW_AUTH_RESP)) {\r\n                    if (this.log.isDebugEnabled()) {\r\n                        this.log.debug(&quot;Target auth state: &quot; + targetAuthState.getState());\r\n                    }\r\n                    this.authenticator.generateAuthResponse(request, targetAuthState, context);\r\n                }\r\n                if (!request.containsHeader(AUTH.PROXY_AUTH_RESP) &amp;&amp; !route.isTunnelled()) {\r\n                    if (this.log.isDebugEnabled()) {\r\n                        this.log.debug(&quot;Proxy auth state: &quot; + proxyAuthState.getState());\r\n                    }\r\n                    this.authenticator.generateAuthResponse(request, proxyAuthState, context);\r\n                }\r\n\r\n                response = requestExecutor.execute(request, managedConn, context);\r\n\r\n                // The connection is in or can be brought to a re-usable state.\r\n                if (reuseStrategy.keepAlive(response, context)) {\r\n                    // Set the idle duration of this connection\r\n                    final long duration = keepAliveStrategy.getKeepAliveDuration(response, context);\r\n                    if (this.log.isDebugEnabled()) {\r\n                        final String s;\r\n                        if (duration &gt; 0) {\r\n                            s = &quot;for &quot; + duration + &quot; &quot; + TimeUnit.MILLISECONDS;\r\n                        } else {\r\n                            s = &quot;indefinitely&quot;;\r\n                        }\r\n                        this.log.debug(&quot;Connection can be kept alive &quot; + s);\r\n                    }\r\n                    connHolder.setValidFor(duration, TimeUnit.MILLISECONDS);\r\n                    connHolder.markReusable();\r\n                } else {\r\n                    connHolder.markNonReusable();\r\n                }\r\n\r\n                if (needAuthentication(\r\n                        targetAuthState, proxyAuthState, route, response, context)) {\r\n                    // Make sure the response body is fully consumed, if present\r\n                    final HttpEntity entity = response.getEntity();\r\n                    if (connHolder.isReusable()) {\r\n                        EntityUtils.consume(entity);\r\n                    } else {\r\n                        managedConn.close();\r\n                        if (proxyAuthState.getState() == AuthProtocolState.SUCCESS\r\n                                &amp;&amp; proxyAuthState.getAuthScheme() != null\r\n                                &amp;&amp; proxyAuthState.getAuthScheme().isConnectionBased()) {\r\n                            this.log.debug(&quot;Resetting proxy auth state&quot;);\r\n                            proxyAuthState.reset();\r\n                        }\r\n                        if (targetAuthState.getState() == AuthProtocolState.SUCCESS\r\n                                &amp;&amp; targetAuthState.getAuthScheme() != null\r\n                                &amp;&amp; targetAuthState.getAuthScheme().isConnectionBased()) {\r\n                            this.log.debug(&quot;Resetting target auth state&quot;);\r\n                            targetAuthState.reset();\r\n                        }\r\n                    }\r\n                    // discard previous auth headers\r\n                    final HttpRequest original = request.getOriginal();\r\n                    if (!original.containsHeader(AUTH.WWW_AUTH_RESP)) {\r\n                        request.removeHeaders(AUTH.WWW_AUTH_RESP);\r\n                    }\r\n                    if (!original.containsHeader(AUTH.PROXY_AUTH_RESP)) {\r\n                        request.removeHeaders(AUTH.PROXY_AUTH_RESP);\r\n                    }\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\nCan any one give me some idea why the first request does not contain any basic Authorization in header but the second one contains that?\r\n","title":"Why 2 requests are sent from Java Apache HttpClient","body":"<p>I have created one HTTP Post request with Basic authentication using <strong>httpclient (<em>org.apache.httpcomponents)</em></strong>.</p>\n<pre><code>        CredentialsProvider provider = new BasicCredentialsProvider();\n        provider.setCredentials(AuthScope.ANY,new UsernamePasswordCredentials(&quot;user&quot;,&quot;pass&quot;));\n\n        RequestConfig requestConfig = RequestConfig.custom().\n                setConnectTimeout(2000).\n                setSocketTimeout(2000).\n                build();\n       try (CloseableHttpClient httpClient = HttpClients.custom().\n                setDefaultCredentialsProvider(provider).\n                setDefaultRequestConfig(requestConfig).\n                build()) {\n            \n            String reqString = mapper.writeValueAsString(obj); // here obj is a Java class of request payload\n            StringEntity params = new StringEntity(reqString);\n            HttpPost httpPost = new HttpPost(url); // server url where double requests are going\n            httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\n            httpPost.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;);\n            httpPost.setEntity(params);    \n\n            try (CloseableHttpResponse response = httpClient.execute(httpPost)) {\n\n                final String jsonString = EntityUtils.toString(response.getEntity());\n\n                if (200 == response.getStatusLine().getStatusCode()) {\n                    mapper = new ObjectMapper();\n                    \n                } \n            }\n        }\n</code></pre>\n<p>When <strong>CloseableHttpResponse response = httpClient.execute(httpPost)</strong> is executed 2 request went to the server, First one without Basic Authorizatin in header and 2nd one with Basic Authorizatin in header. What is the reason for this?</p>\n<p>I dig down into the <strong>httpclient-4.5.3</strong> library and found that actual point of double request generation is <em><strong>org.apache.http.impl.execchain.MainClientExec</strong></em>. On that class <strong>execute</strong> method contains a for loop which is actually executed 2 times. I am giving that for loop below...</p>\n<pre><code>    for (int execCount = 1;; execCount++) {\n\n            if (execCount &gt; 1 &amp;&amp; !RequestEntityProxy.isRepeatable(request)) {\n                throw new NonRepeatableRequestException(&quot;Cannot retry request &quot; +\n                        &quot;with a non-repeatable request entity.&quot;);\n            }\n\n            if (execAware != null &amp;&amp; execAware.isAborted()) {\n                throw new RequestAbortedException(&quot;Request aborted&quot;);\n            }\n\n            if (!managedConn.isOpen()) {\n                this.log.debug(&quot;Opening connection &quot; + route);\n                try {\n                    establishRoute(proxyAuthState, managedConn, route, request, context);\n                } catch (final TunnelRefusedException ex) {\n                    if (this.log.isDebugEnabled()) {\n                        this.log.debug(ex.getMessage());\n                    }\n                    response = ex.getResponse();\n                    break;\n                }\n            }\n            final int timeout = config.getSocketTimeout();\n            if (timeout &gt;= 0) {\n                managedConn.setSocketTimeout(timeout);\n            }\n\n            if (execAware != null &amp;&amp; execAware.isAborted()) {\n                throw new RequestAbortedException(&quot;Request aborted&quot;);\n            }\n\n            if (this.log.isDebugEnabled()) {\n                this.log.debug(&quot;Executing request &quot; + request.getRequestLine());\n            }\n\n            if (!request.containsHeader(AUTH.WWW_AUTH_RESP)) {\n                if (this.log.isDebugEnabled()) {\n                    this.log.debug(&quot;Target auth state: &quot; + targetAuthState.getState());\n                }\n                this.authenticator.generateAuthResponse(request, targetAuthState, context);\n            }\n            if (!request.containsHeader(AUTH.PROXY_AUTH_RESP) &amp;&amp; !route.isTunnelled()) {\n                if (this.log.isDebugEnabled()) {\n                    this.log.debug(&quot;Proxy auth state: &quot; + proxyAuthState.getState());\n                }\n                this.authenticator.generateAuthResponse(request, proxyAuthState, context);\n            }\n\n            response = requestExecutor.execute(request, managedConn, context);\n\n            // The connection is in or can be brought to a re-usable state.\n            if (reuseStrategy.keepAlive(response, context)) {\n                // Set the idle duration of this connection\n                final long duration = keepAliveStrategy.getKeepAliveDuration(response, context);\n                if (this.log.isDebugEnabled()) {\n                    final String s;\n                    if (duration &gt; 0) {\n                        s = &quot;for &quot; + duration + &quot; &quot; + TimeUnit.MILLISECONDS;\n                    } else {\n                        s = &quot;indefinitely&quot;;\n                    }\n                    this.log.debug(&quot;Connection can be kept alive &quot; + s);\n                }\n                connHolder.setValidFor(duration, TimeUnit.MILLISECONDS);\n                connHolder.markReusable();\n            } else {\n                connHolder.markNonReusable();\n            }\n\n            if (needAuthentication(\n                    targetAuthState, proxyAuthState, route, response, context)) {\n                // Make sure the response body is fully consumed, if present\n                final HttpEntity entity = response.getEntity();\n                if (connHolder.isReusable()) {\n                    EntityUtils.consume(entity);\n                } else {\n                    managedConn.close();\n                    if (proxyAuthState.getState() == AuthProtocolState.SUCCESS\n                            &amp;&amp; proxyAuthState.getAuthScheme() != null\n                            &amp;&amp; proxyAuthState.getAuthScheme().isConnectionBased()) {\n                        this.log.debug(&quot;Resetting proxy auth state&quot;);\n                        proxyAuthState.reset();\n                    }\n                    if (targetAuthState.getState() == AuthProtocolState.SUCCESS\n                            &amp;&amp; targetAuthState.getAuthScheme() != null\n                            &amp;&amp; targetAuthState.getAuthScheme().isConnectionBased()) {\n                        this.log.debug(&quot;Resetting target auth state&quot;);\n                        targetAuthState.reset();\n                    }\n                }\n                // discard previous auth headers\n                final HttpRequest original = request.getOriginal();\n                if (!original.containsHeader(AUTH.WWW_AUTH_RESP)) {\n                    request.removeHeaders(AUTH.WWW_AUTH_RESP);\n                }\n                if (!original.containsHeader(AUTH.PROXY_AUTH_RESP)) {\n                    request.removeHeaders(AUTH.PROXY_AUTH_RESP);\n                }\n            } else {\n                break;\n            }\n        }\n</code></pre>\n<p>Can any one give me some idea why the first request does not contain any basic Authorization in header but the second one contains that?</p>\n"},{"tags":["java","postgresql","ssh","ssh-tunnel"],"owner":{"account_id":20650336,"reputation":1,"user_id":15937855,"display_name":"Ezequiel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504663,"creation_date":1690911701,"question_id":76814053,"body_markdown":"I dont know how to connect postgres db to apache doris instance with ssh tunnel integration.\r\n\r\nHi, im trying to connect apache doris to postgres with catalogs. \r\nIm using this documentation https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc, and work with normal database connection, but i dont know how to do that with ssh tunnel.\r\nFirst i think to use another driver with ssh included like https://github.com/cactuslab/jdbc-sshj/tree/master, but i dont found documentation to use custom drivers in apache.\r\n\r\nDo you know some solution? If it is the case, please share me","title":"How to connect apache-doris instance to postgres with ssh tunnel","body":"<p>I dont know how to connect postgres db to apache doris instance with ssh tunnel integration.</p>\n<p>Hi, im trying to connect apache doris to postgres with catalogs.\nIm using this documentation <a href=\"https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc\" rel=\"nofollow noreferrer\">https://doris.apache.org/docs/dev/lakehouse/multi-catalog/jdbc</a>, and work with normal database connection, but i dont know how to do that with ssh tunnel.\nFirst i think to use another driver with ssh included like <a href=\"https://github.com/cactuslab/jdbc-sshj/tree/master\" rel=\"nofollow noreferrer\">https://github.com/cactuslab/jdbc-sshj/tree/master</a>, but i dont found documentation to use custom drivers in apache.</p>\n<p>Do you know some solution? If it is the case, please share me</p>\n"},{"tags":["java","import","interface","package"],"owner":{"account_id":26842459,"reputation":1,"user_id":20428747,"display_name":"Dguzy96"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504584,"creation_date":1691075821,"question_id":76829459,"body_markdown":"While going through practice exercises for Java tutorials, I have noticed the mention of the UnaryPredicate interface in the code for both questions and answers. Example:\r\n\r\n&gt; How do you invoke the following method to find the first integer in a list that is relatively prime to a list of specified integers?\r\n&gt; \r\n&gt; `public static &lt;T&gt; int findFirst(List&lt;T&gt; list, int begin, int end, UnaryPredicate&lt;T&gt; p)`\r\n\r\nPart of the answer the provided included the following information:\r\n\r\n&gt; The generic UnaryPredicate interface is defined as follows:\r\n&gt; \r\n&gt; ```\r\n&gt; public interface UnaryPredicate&lt;T&gt; {\r\n&gt;     public boolean test(T obj);\r\n&gt; }\r\n&gt; ```\r\n\r\nHowever, even when I was in a code compiler, I could not access this interface, and the aforementioned answer does not show how to do so. I did also see that I have access to a `Predicate&lt;T&gt;` interface, which seems to have similar purpose, but more complex code. Mainly for the purpose of understanding, how can I efficiently access UnaryPredicate? Aside from what I mentioned, what is the difference between Predicate and UnaryPredicate? Is UnaryPredicate depreciated, and if so, is that why I can&#39;t automatically access it? Is it just something that was made up for the tutorial question?\r\n\r\n**Note:** UnaryPredicate does appear to exist in a number of packages, though some of them appear to be made by unfamiliar third party sources and/or individual programmers. While I was not 100% certain on which one to try, I believed the one from inside org.apache.commons.functor to be most trustworthy, since Apache seems to be a more legitimate source. Unfortunately, when I attempted to use `import org.apache.commons.functor.UnaryPredicate;`, I received an error stating &quot;package org.apache.commons.functor does not exist.&quot; Even when I shortened it to `import org.apache`, I received the error &quot;package org does not exist.&quot; I saw sources online about downloading particular files for packages and examples of adding it to particular java projects. However, I want to make sure I use the right file and/or source. I also want to make sure that it is not necessarily limited to just one project, similarly to how I am able to implement java across my computer or particular modules across my projects.","title":"How do I access UnaryPredicate interface and how does it compare to Predicate interface?","body":"<p>While going through practice exercises for Java tutorials, I have noticed the mention of the UnaryPredicate interface in the code for both questions and answers. Example:</p>\n<blockquote>\n<p>How do you invoke the following method to find the first integer in a list that is relatively prime to a list of specified integers?</p>\n<p><code>public static &lt;T&gt; int findFirst(List&lt;T&gt; list, int begin, int end, UnaryPredicate&lt;T&gt; p)</code></p>\n</blockquote>\n<p>Part of the answer the provided included the following information:</p>\n<blockquote>\n<p>The generic UnaryPredicate interface is defined as follows:</p>\n<pre><code>public interface UnaryPredicate&lt;T&gt; {\n    public boolean test(T obj);\n}\n</code></pre>\n</blockquote>\n<p>However, even when I was in a code compiler, I could not access this interface, and the aforementioned answer does not show how to do so. I did also see that I have access to a <code>Predicate&lt;T&gt;</code> interface, which seems to have similar purpose, but more complex code. Mainly for the purpose of understanding, how can I efficiently access UnaryPredicate? Aside from what I mentioned, what is the difference between Predicate and UnaryPredicate? Is UnaryPredicate depreciated, and if so, is that why I can't automatically access it? Is it just something that was made up for the tutorial question?</p>\n<p><strong>Note:</strong> UnaryPredicate does appear to exist in a number of packages, though some of them appear to be made by unfamiliar third party sources and/or individual programmers. While I was not 100% certain on which one to try, I believed the one from inside org.apache.commons.functor to be most trustworthy, since Apache seems to be a more legitimate source. Unfortunately, when I attempted to use <code>import org.apache.commons.functor.UnaryPredicate;</code>, I received an error stating &quot;package org.apache.commons.functor does not exist.&quot; Even when I shortened it to <code>import org.apache</code>, I received the error &quot;package org does not exist.&quot; I saw sources online about downloading particular files for packages and examples of adding it to particular java projects. However, I want to make sure I use the right file and/or source. I also want to make sure that it is not necessarily limited to just one project, similarly to how I am able to implement java across my computer or particular modules across my projects.</p>\n"},{"tags":["java","apache-httpclient-4.x"],"owner":{"account_id":3189540,"reputation":377,"user_id":2694211,"display_name":"Holy_diver"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691504550,"creation_date":1691404485,"question_id":76850871,"body_markdown":" - I am using a connector where i can only configure httpClient\r\n - The connector generates the token based on some external call\r\n - But i need to override this behavior as i already have the token in the request.\r\n - The connector is written in such a way that i can only customize HTTPClient\r\n\r\nOne solution can be to generate new HTTPClient everytime with an interceptor to inject token\r\n\r\n    private CloseableHttpClient createHttpClient(String accessToken){\r\n   \r\n    return  HttpClientBuilder.create()\r\n            .addInterceptorLast(\r\n                    (HttpRequestInterceptor) (request, context) -&gt; {\r\n                      request.addHeader(HttpHeaders.AUTHORIZATION, accessToken);\r\n                    }).build();\r\n        }\r\n\r\n\r\nBut i also want to leverage pooling.\r\nIs the implementation below fine or there can be some pitfalls ?\r\n\r\n  \r\n\r\n        private static HttpClientConnectionManager poolingConnManager\r\n                  = new PoolingHttpClientConnectionManager();\r\n    \r\n      private CloseableHttpClient createHttpClient(String accessToken){\r\n       \r\n        return  HttpClientBuilder.create()\r\n                .setConnectionManager(poolingConnManager)\r\n                .setConnectionManagerShared(true)\r\n                .addInterceptorLast(\r\n                        (HttpRequestInterceptor) (request, context) -&gt; {\r\n                          request.addHeader(HttpHeaders.AUTHORIZATION, accessToken);\r\n                        }).build();\r\n         }","title":"ApacheHTTPClient Pooling but each request has some statefullness","body":"<ul>\n<li>I am using a connector where i can only configure httpClient</li>\n<li>The connector generates the token based on some external call</li>\n<li>But i need to override this behavior as i already have the token in the request.</li>\n<li>The connector is written in such a way that i can only customize HTTPClient</li>\n</ul>\n<p>One solution can be to generate new HTTPClient everytime with an interceptor to inject token</p>\n<pre><code>private CloseableHttpClient createHttpClient(String accessToken){\n\nreturn  HttpClientBuilder.create()\n        .addInterceptorLast(\n                (HttpRequestInterceptor) (request, context) -&gt; {\n                  request.addHeader(HttpHeaders.AUTHORIZATION, accessToken);\n                }).build();\n    }\n</code></pre>\n<p>But i also want to leverage pooling.\nIs the implementation below fine or there can be some pitfalls ?</p>\n<pre><code>    private static HttpClientConnectionManager poolingConnManager\n              = new PoolingHttpClientConnectionManager();\n\n  private CloseableHttpClient createHttpClient(String accessToken){\n   \n    return  HttpClientBuilder.create()\n            .setConnectionManager(poolingConnManager)\n            .setConnectionManagerShared(true)\n            .addInterceptorLast(\n                    (HttpRequestInterceptor) (request, context) -&gt; {\n                      request.addHeader(HttpHeaders.AUTHORIZATION, accessToken);\n                    }).build();\n     }\n</code></pre>\n"},{"tags":["java","maven","google-analytics","classnotfoundexception"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1691503212,"post_id":76860256,"comment_id":135498481,"body_markdown":"I don&#39;t know anything about how credentials work in our Java libraries, but GdchCredential is documented here: https://javadoc.io/static/com.google.auth/google-auth-library-oauth2-http/1.19.0/com/google/auth/oauth2/GdchCredentials.html","body":"I don&#39;t know anything about how credentials work in our Java libraries, but GdchCredential is documented here: <a href=\"https://javadoc.io/static/com.google.auth/google-auth-library-oauth2-http/1.19.0/com/google/auth/oauth2/GdchCredentials.html\" rel=\"nofollow noreferrer\">javadoc.io/static/com.google.auth/&hellip;</a>"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1691503285,"post_id":76860256,"comment_id":135498507,"body_markdown":"Your Maven configuration uses google-auth-library-oauth2-http version 1.12.1, which is from October 2022. Perhaps that&#39;s the problem?","body":"Your Maven configuration uses google-auth-library-oauth2-http version 1.12.1, which is from October 2022. Perhaps that&#39;s the problem?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1691503323,"post_id":76860256,"comment_id":135498519,"body_markdown":"Source code: https://github.com/googleapis/google-auth-library-java/blob/main/oauth2_http/java/com/google/auth/oauth2/GdchCredentials.java","body":"Source code: <a href=\"https://github.com/googleapis/google-auth-library-java/blob/main/oauth2_http/java/com/google/auth/oauth2/GdchCredentials.java\" rel=\"nofollow noreferrer\">github.com/googleapis/google-auth-library-java/blob/main/&hellip;</a>"},{"owner":{"account_id":7720988,"reputation":346,"user_id":5847235,"display_name":"Stefan"},"score":0,"creation_date":1691503606,"post_id":76860256,"comment_id":135498588,"body_markdown":"Thanks Jon I upgraded my google-auth-library-oauth2-http version to the most recent Maven artifact and I&#39;m now getting new errors iso of the exception - progress!","body":"Thanks Jon I upgraded my google-auth-library-oauth2-http version to the most recent Maven artifact and I&#39;m now getting new errors iso of the exception - progress!"}],"answers":[{"tags":[],"owner":{"account_id":7720988,"reputation":346,"user_id":5847235,"display_name":"Stefan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691504203,"creation_date":1691503715,"answer_id":76860365,"question_id":76860256,"body_markdown":"Solution to this specific problem / exception shown here in my use case was to upgrade the Maven artifact for the google-auth-library-oauth-2-http dependency to the version current as of 2023-08-08:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.auth&lt;/groupId&gt;\r\n    &lt;artifactId&gt;google-auth-library-oauth2-http&lt;/artifactId&gt;\r\n    &lt;version&gt;1.19.0&lt;/version&gt;\r\n    &lt;type&gt;jar&lt;/type&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nin the NetBeans Maven project&#39;s pom.xml.","title":"Official Google Analytics 4 Java API example is invalid and throws exception as-is - officially referenced class does not exist","body":"<p>Solution to this specific problem / exception shown here in my use case was to upgrade the Maven artifact for the google-auth-library-oauth-2-http dependency to the version current as of 2023-08-08:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.auth&lt;/groupId&gt;\n    &lt;artifactId&gt;google-auth-library-oauth2-http&lt;/artifactId&gt;\n    &lt;version&gt;1.19.0&lt;/version&gt;\n    &lt;type&gt;jar&lt;/type&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>in the NetBeans Maven project's pom.xml.</p>\n"}],"owner":{"account_id":7720988,"reputation":346,"user_id":5847235,"display_name":"Stefan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691504313,"creation_date":1691503033,"question_id":76860256,"body_markdown":"I&#39;m following the official Google example at\r\n\r\nhttps://developers.google.com/analytics/devguides/reporting/data/v1/quickstart-client-libraries\r\n\r\nin NetBeans with Maven.\r\n\r\nThis code snippet in this example\r\n\r\n```java\r\ntry (BetaAnalyticsDataClient analyticsData = BetaAnalyticsDataClient.create()) {\r\n    RunReportRequest request\r\n            = RunReportRequest.newBuilder()\r\n                    .setProperty(&quot;properties/&quot; + propertyId)\r\n                    .addDimensions(Dimension.newBuilder().setName(&quot;city&quot;))\r\n                    .addMetrics(Metric.newBuilder().setName(&quot;activeUsers&quot;))\r\n                    .addDateRanges(DateRange.newBuilder().setStartDate(&quot;2023-07-31&quot;).setEndDate(&quot;today&quot;))\r\n                    .build();\r\n}\r\n```\r\n\r\nThis immediately fails with\r\n\r\n```none\r\njava.lang.ClassNotFoundException: com.google.auth.oauth2.GdchCredentials\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\tat com.google.analytics.data.v1beta.stub.GrpcBetaAnalyticsDataStub.create(GrpcBetaAnalyticsDataStub.java:149) ~[google-analytics-data-0.32.0.jar:0.32.0]\r\n\tat com.google.analytics.data.v1beta.stub.BetaAnalyticsDataStubSettings.createStub(BetaAnalyticsDataStubSettings.java:164) ~[google-analytics-data-0.32.0.jar:0.32.0]\r\n\tat com.google.analytics.data.v1beta.BetaAnalyticsDataClient.&lt;init&gt;(BetaAnalyticsDataClient.java:172) ~[google-analytics-data-0.32.0.jar:0.32.0]\r\n\tat com.google.analytics.data.v1beta.BetaAnalyticsDataClient.create(BetaAnalyticsDataClient.java:154) ~[google-analytics-data-0.32.0.jar:0.32.0]\r\n\tat com.google.analytics.data.v1beta.BetaAnalyticsDataClient.create(BetaAnalyticsDataClient.java:145) ~[google-analytics-data-0.32.0.jar:0.32.0]\r\n\tat com.verishare.wpanalyticshelper.controller.UsercountSevenDaysController.usercountSevenDays(UsercountSevenDaysController.java:53) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:892) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1039) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:200) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:836) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1747) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```\r\n\r\nAnybody got any idea why? It is the most simple example I can find for interfacing with GA4 with Java and it fails straight out of the gate.\r\n\r\nI do note that the example has no authentication of any kind indicated?\r\n\r\nI&#39;ve searched for the class `com.google.auth.oauth2.GdchCredentials`, but can find no reference anywhere to it at all - so why is the official Google GA4 Java API libraries requiring it - it does not exist - anywhere?\r\n\r\nMy imports, etc. is exactly as in the example at the above URL.\r\n\r\nMy pom.xml (it is a Java Spring application):\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.verishare&lt;/groupId&gt;\r\n    &lt;artifactId&gt;WPAnalyticsHelper&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    \r\n    &lt;!--Spring--&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-path&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!--Log4J--&gt;    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;!--Google APIs Java client--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\r\n            &lt;version&gt;1.35.2&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;/dependency&gt;        \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client-java6&lt;/artifactId&gt;\r\n            &lt;version&gt;1.35.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-oauth-client-java6&lt;/artifactId&gt;\r\n            &lt;version&gt;1.34.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.google.oauth-client/google-oauth-client-jetty --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\r\n            &lt;version&gt;1.34.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client-servlet&lt;/artifactId&gt;\r\n            &lt;version&gt;1.35.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client-appengine&lt;/artifactId&gt;\r\n            &lt;version&gt;1.35.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client-gson&lt;/artifactId&gt;\r\n            &lt;version&gt;1.35.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client-jackson2&lt;/artifactId&gt;\r\n            &lt;version&gt;1.35.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client-protobuf&lt;/artifactId&gt;\r\n            &lt;version&gt;1.35.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client-xml&lt;/artifactId&gt;\r\n            &lt;version&gt;1.35.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-services-analyticsreporting&lt;/artifactId&gt;\r\n            &lt;version&gt;v4-rev20190318-1.28.0&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-services-analytics&lt;/artifactId&gt;\r\n            &lt;version&gt;v3-rev134-1.22.0&lt;/version&gt;\r\n        &lt;/dependency&gt;        \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.analytics&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-analytics-data&lt;/artifactId&gt;\r\n            &lt;version&gt;0.32.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.auth&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-auth-library-oauth2-http&lt;/artifactId&gt;\r\n            &lt;version&gt;1.12.1&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-services-storage&lt;/artifactId&gt;\r\n            &lt;version&gt;v1-rev58-1.21.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.verishare.wpanalyticshelper.Application&lt;/mainClass&gt;\r\n                    &lt;layout&gt;ZIP&lt;/layout&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            \r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;links&gt;\r\n                        &lt;link&gt;http://download.oracle.com/javase/7/docs/api/&lt;/link&gt;\r\n                        &lt;link&gt;https://googleapis.dev/java/google-http-client/${project.http.version}/&lt;/link&gt;\r\n                    &lt;/links&gt;\r\n                    &lt;doctitle&gt;${project.name} ${project.version}&lt;/doctitle&gt;\r\n                    &lt;windowtitle&gt;${project.artifactId} ${project.version}&lt;/windowtitle&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifestFile&gt;${project.build.outputDirectory}/META-INF/MANIFEST.MF&lt;/manifestFile&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\r\n                        &lt;/manifest&gt;\r\n                        &lt;manifestEntries&gt;\r\n                            &lt;Automatic-Module-Name&gt;google.api.client.java6&lt;/Automatic-Module-Name&gt;\r\n                        &lt;/manifestEntries&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5.4&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;bundle-manifest&lt;/id&gt;\r\n                        &lt;phase&gt;process-classes&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;manifest&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;instructions&gt;\r\n                        &lt;Bundle-DocURL&gt;https://googleapis.dev/java/google-api-client/${project.version}/index.html&lt;/Bundle-DocURL&gt;\r\n                        &lt;Bundle-Description&gt;Java 6 extensions to the Google APIs Client Library for Java&lt;/Bundle-Description&gt;\r\n                        &lt;Bundle-SymbolicName&gt;com.google.api.client.java6&lt;/Bundle-SymbolicName&gt;\r\n                    &lt;/instructions&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;!--            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;source-jar&lt;/id&gt;\r\n                        &lt;phase&gt;compile&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;jar&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;--&gt;\r\n            &lt;!--Set minimum requirement to Java 7--&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;animal-sniffer-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;signature&gt;\r\n                        &lt;groupId&gt;org.codehaus.mojo.signature&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;java17&lt;/artifactId&gt;\r\n                        &lt;version&gt;1.0&lt;/version&gt;\r\n                    &lt;/signature&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n                             \r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n","title":"Official Google Analytics 4 Java API example is invalid and throws exception as-is - officially referenced class does not exist","body":"<p>I'm following the official Google example at</p>\n<p><a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1/quickstart-client-libraries\" rel=\"nofollow noreferrer\">https://developers.google.com/analytics/devguides/reporting/data/v1/quickstart-client-libraries</a></p>\n<p>in NetBeans with Maven.</p>\n<p>This code snippet in this example</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (BetaAnalyticsDataClient analyticsData = BetaAnalyticsDataClient.create()) {\n    RunReportRequest request\n            = RunReportRequest.newBuilder()\n                    .setProperty(&quot;properties/&quot; + propertyId)\n                    .addDimensions(Dimension.newBuilder().setName(&quot;city&quot;))\n                    .addMetrics(Metric.newBuilder().setName(&quot;activeUsers&quot;))\n                    .addDateRanges(DateRange.newBuilder().setStartDate(&quot;2023-07-31&quot;).setEndDate(&quot;today&quot;))\n                    .build();\n}\n</code></pre>\n<p>This immediately fails with</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.ClassNotFoundException: com.google.auth.oauth2.GdchCredentials\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    at com.google.analytics.data.v1beta.stub.GrpcBetaAnalyticsDataStub.create(GrpcBetaAnalyticsDataStub.java:149) ~[google-analytics-data-0.32.0.jar:0.32.0]\n    at com.google.analytics.data.v1beta.stub.BetaAnalyticsDataStubSettings.createStub(BetaAnalyticsDataStubSettings.java:164) ~[google-analytics-data-0.32.0.jar:0.32.0]\n    at com.google.analytics.data.v1beta.BetaAnalyticsDataClient.&lt;init&gt;(BetaAnalyticsDataClient.java:172) ~[google-analytics-data-0.32.0.jar:0.32.0]\n    at com.google.analytics.data.v1beta.BetaAnalyticsDataClient.create(BetaAnalyticsDataClient.java:154) ~[google-analytics-data-0.32.0.jar:0.32.0]\n    at com.google.analytics.data.v1beta.BetaAnalyticsDataClient.create(BetaAnalyticsDataClient.java:145) ~[google-analytics-data-0.32.0.jar:0.32.0]\n    at com.verishare.wpanalyticshelper.controller.UsercountSevenDaysController.usercountSevenDays(UsercountSevenDaysController.java:53) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:892) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1039) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:200) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:836) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1747) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.19.jar:9.0.19]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>Anybody got any idea why? It is the most simple example I can find for interfacing with GA4 with Java and it fails straight out of the gate.</p>\n<p>I do note that the example has no authentication of any kind indicated?</p>\n<p>I've searched for the class <code>com.google.auth.oauth2.GdchCredentials</code>, but can find no reference anywhere to it at all - so why is the official Google GA4 Java API libraries requiring it - it does not exist - anywhere?</p>\n<p>My imports, etc. is exactly as in the example at the above URL.</p>\n<p>My pom.xml (it is a Java Spring application):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.verishare&lt;/groupId&gt;\n    &lt;artifactId&gt;WPAnalyticsHelper&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    \n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n    \n    &lt;!--Spring--&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\n            &lt;artifactId&gt;json-path&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;!--Log4J--&gt;    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!--Google APIs Java client--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\n            &lt;version&gt;1.35.2&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n        &lt;/dependency&gt;        \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client-java6&lt;/artifactId&gt;\n            &lt;version&gt;1.35.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-oauth-client-java6&lt;/artifactId&gt;\n            &lt;version&gt;1.34.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.google.oauth-client/google-oauth-client-jetty --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\n            &lt;version&gt;1.34.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client-servlet&lt;/artifactId&gt;\n            &lt;version&gt;1.35.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client-appengine&lt;/artifactId&gt;\n            &lt;version&gt;1.35.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client-gson&lt;/artifactId&gt;\n            &lt;version&gt;1.35.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client-jackson2&lt;/artifactId&gt;\n            &lt;version&gt;1.35.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client-protobuf&lt;/artifactId&gt;\n            &lt;version&gt;1.35.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client-xml&lt;/artifactId&gt;\n            &lt;version&gt;1.35.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-services-analyticsreporting&lt;/artifactId&gt;\n            &lt;version&gt;v4-rev20190318-1.28.0&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-services-analytics&lt;/artifactId&gt;\n            &lt;version&gt;v3-rev134-1.22.0&lt;/version&gt;\n        &lt;/dependency&gt;        \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.analytics&lt;/groupId&gt;\n            &lt;artifactId&gt;google-analytics-data&lt;/artifactId&gt;\n            &lt;version&gt;0.32.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.auth&lt;/groupId&gt;\n            &lt;artifactId&gt;google-auth-library-oauth2-http&lt;/artifactId&gt;\n            &lt;version&gt;1.12.1&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-services-storage&lt;/artifactId&gt;\n            &lt;version&gt;v1-rev58-1.21.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    \n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.verishare.wpanalyticshelper.Application&lt;/mainClass&gt;\n                    &lt;layout&gt;ZIP&lt;/layout&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            \n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;links&gt;\n                        &lt;link&gt;http://download.oracle.com/javase/7/docs/api/&lt;/link&gt;\n                        &lt;link&gt;https://googleapis.dev/java/google-http-client/${project.http.version}/&lt;/link&gt;\n                    &lt;/links&gt;\n                    &lt;doctitle&gt;${project.name} ${project.version}&lt;/doctitle&gt;\n                    &lt;windowtitle&gt;${project.artifactId} ${project.version}&lt;/windowtitle&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifestFile&gt;${project.build.outputDirectory}/META-INF/MANIFEST.MF&lt;/manifestFile&gt;\n                        &lt;manifest&gt;\n                            &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\n                        &lt;/manifest&gt;\n                        &lt;manifestEntries&gt;\n                            &lt;Automatic-Module-Name&gt;google.api.client.java6&lt;/Automatic-Module-Name&gt;\n                        &lt;/manifestEntries&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.4&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;bundle-manifest&lt;/id&gt;\n                        &lt;phase&gt;process-classes&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;manifest&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;instructions&gt;\n                        &lt;Bundle-DocURL&gt;https://googleapis.dev/java/google-api-client/${project.version}/index.html&lt;/Bundle-DocURL&gt;\n                        &lt;Bundle-Description&gt;Java 6 extensions to the Google APIs Client Library for Java&lt;/Bundle-Description&gt;\n                        &lt;Bundle-SymbolicName&gt;com.google.api.client.java6&lt;/Bundle-SymbolicName&gt;\n                    &lt;/instructions&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;!--            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;source-jar&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;jar&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;--&gt;\n            &lt;!--Set minimum requirement to Java 7--&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;animal-sniffer-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;signature&gt;\n                        &lt;groupId&gt;org.codehaus.mojo.signature&lt;/groupId&gt;\n                        &lt;artifactId&gt;java17&lt;/artifactId&gt;\n                        &lt;version&gt;1.0&lt;/version&gt;\n                    &lt;/signature&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n                             \n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","thymeleaf","spring-thymeleaf"],"comments":[{"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"score":0,"creation_date":1691508244,"post_id":76860430,"comment_id":135499744,"body_markdown":"it&#39;s looking for a template named accueil, so change the template name to `accueil.html`","body":"it&#39;s looking for a template named accueil, so change the template name to <code>accueil.html</code>"}],"owner":{"account_id":25603220,"reputation":11,"user_id":19377813,"display_name":"Albinch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691504140,"creation_date":1691504140,"question_id":76860430,"body_markdown":"I&#39;m trying to add a header to all the pages of my Spring Boot application, so I want to use Thymeleaf to add this layout.\r\n\r\nBut when I&#39;m trying to access my home page for exemple, I get this error message :\r\n\r\n`Error resolving template [accueil], template might not exist or might not be accessible by any of the configured Template Resolvers`\r\n\r\nI looked through internet and found some advices to fix this issue, but none of them worked...\r\n\r\nMy layout path is : `src/main/resources/templates/layout.html` so I tried to add these prefix and suffix to my `application.properties` file :\r\n\r\n```\r\nspring.mvc.view.prefix=/WEB-INF/jsp/\r\nspring.mvc.view.suffix=.jsp\r\n\r\nspring.thymeleaf.prefix=classpath:/templates/\r\nspring.thymeleaf.suffix=.html\r\n```\r\n\r\nBut it don&#39;t works...\r\n\r\nHere are my layout.html file, my home controller and my pom.xml file :\r\n\r\nlayout.html :\r\n\r\n```html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n&lt;title&gt;Enums in Thymeleaf&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;h2&gt;Hello from layout&lt;/h2&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nAccueilControleur :\r\n\r\n```java\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\n@Controller\r\npublic class AccueilControleur {\r\n    @GetMapping(&quot;&quot;)\r\n    public String index(){\r\n        return &quot;accueil&quot;;\r\n    }\r\n}\r\n```\r\n\r\npom.xml dependencies :\r\n\r\n```xml\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!-- Pour Spring Boot, ajoutez ceci dans la section &lt;dependencies&gt; de votre pom.xml --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;42.6.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-jasper --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-thymeleaf --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n```\r\n\r\nDid someone have an idea on that issue ?\r\n\r\nBest regards","title":"Error when adding a Thymeleaf layout to my Spring Boot application","body":"<p>I'm trying to add a header to all the pages of my Spring Boot application, so I want to use Thymeleaf to add this layout.</p>\n<p>But when I'm trying to access my home page for exemple, I get this error message :</p>\n<p><code>Error resolving template [accueil], template might not exist or might not be accessible by any of the configured Template Resolvers</code></p>\n<p>I looked through internet and found some advices to fix this issue, but none of them worked...</p>\n<p>My layout path is : <code>src/main/resources/templates/layout.html</code> so I tried to add these prefix and suffix to my <code>application.properties</code> file :</p>\n<pre><code>spring.mvc.view.prefix=/WEB-INF/jsp/\nspring.mvc.view.suffix=.jsp\n\nspring.thymeleaf.prefix=classpath:/templates/\nspring.thymeleaf.suffix=.html\n</code></pre>\n<p>But it don't works...</p>\n<p>Here are my layout.html file, my home controller and my pom.xml file :</p>\n<p>layout.html :</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;Enums in Thymeleaf&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h2&gt;Hello from layout&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>AccueilControleur :</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\n\n@Controller\npublic class AccueilControleur {\n    @GetMapping(&quot;&quot;)\n    public String index(){\n        return &quot;accueil&quot;;\n    }\n}\n</code></pre>\n<p>pom.xml dependencies :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependencies&gt;\n        &lt;!-- Pour Spring Boot, ajoutez ceci dans la section &lt;dependencies&gt; de votre pom.xml --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.6.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-jasper --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-thymeleaf --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>Did someone have an idea on that issue ?</p>\n<p>Best regards</p>\n"},{"tags":["java","spring","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691503977,"creation_date":1691503977,"answer_id":76860403,"question_id":76853362,"body_markdown":"Not clear why would one like to lose his/her messages, but there is some respective API. See `QueueChannelOperations` (the `QueueChannel` implements this):\r\n\r\n\t/**\r\n\t * Remove all {@link Message Messages} from this channel.\r\n\t * @return The messages that were removed.\r\n\t */\r\n\tList&lt;Message&lt;?&gt;&gt; clear();\r\n\r\n\t/**\r\n\t * Remove any {@link Message Messages} that are not accepted by the provided selector.\r\n\t * @param selector The message selector.\r\n\t * @return The list of messages that were purged.\r\n\t */\r\n\tList&lt;Message&lt;?&gt;&gt; purge(@Nullable MessageSelector selector);\r\n\r\n\t/**\r\n\t * Obtain the current number of queued {@link Message Messages} in this channel.\r\n\t * @return The current number of queued {@link Message Messages} in this channel.\r\n\t */\r\n\t@ManagedAttribute(description = &quot;Queue size&quot;)\r\n\tint getQueueSize();\r\n\r\n\t/**\r\n\t * Obtain the remaining capacity of this channel.\r\n\t * @return The remaining capacity of this channel.\r\n\t */\r\n\t@ManagedAttribute(description = &quot;Queue remaining capacity&quot;)\r\n\tint getRemainingCapacity();\r\n\r\n\r\nYou probably are not going to get an exception on every 100 messages because the queue capacity might be bigger. For that purpose you may look into a `ChannelInterceptor` to be injected into this `QueueChannel` where you can use an API I mentioned above.","title":"Log a message only when queue is full and purge the queue","body":"<p>Not clear why would one like to lose his/her messages, but there is some respective API. See <code>QueueChannelOperations</code> (the <code>QueueChannel</code> implements this):</p>\n<pre><code>/**\n * Remove all {@link Message Messages} from this channel.\n * @return The messages that were removed.\n */\nList&lt;Message&lt;?&gt;&gt; clear();\n\n/**\n * Remove any {@link Message Messages} that are not accepted by the provided selector.\n * @param selector The message selector.\n * @return The list of messages that were purged.\n */\nList&lt;Message&lt;?&gt;&gt; purge(@Nullable MessageSelector selector);\n\n/**\n * Obtain the current number of queued {@link Message Messages} in this channel.\n * @return The current number of queued {@link Message Messages} in this channel.\n */\n@ManagedAttribute(description = &quot;Queue size&quot;)\nint getQueueSize();\n\n/**\n * Obtain the remaining capacity of this channel.\n * @return The remaining capacity of this channel.\n */\n@ManagedAttribute(description = &quot;Queue remaining capacity&quot;)\nint getRemainingCapacity();\n</code></pre>\n<p>You probably are not going to get an exception on every 100 messages because the queue capacity might be bigger. For that purpose you may look into a <code>ChannelInterceptor</code> to be injected into this <code>QueueChannel</code> where you can use an API I mentioned above.</p>\n"}],"owner":{"account_id":29100551,"reputation":15,"user_id":22292455,"display_name":"Raghavendra Prasad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691503977,"creation_date":1691424234,"question_id":76853362,"body_markdown":"We send a message to the queue using the @Gateway.\r\nWhen the Queue is full, I dont want to log a message. Instead I want to log once for every 100 messages and ourge the queue.\r\nDo we have any option to do this Spring Integration ?\r\n\r\n\r\n```\r\n//Send message to &quot;INBOUND_CHANNEL&quot;\r\n@MessagingGateway(errorChannel = Constants.INBOUND_CHANNEL_ERR)\r\n@Component\r\npublic interface CustomGateway {\r\n    @Gateway(requestChannel = Constants.INBOUND_CHANNEL)\r\n    public void sendMessage(Message&lt;User&gt; message);\r\n}\r\n\r\n//&quot;INBOUND_CHANNEL&quot; as QueueChannel\r\n@Bean(name = Constants.INBOUND_CHANNEL)\r\npublic QueueChannel inboundFilePollingChannel() {\r\n  return new QueueChannel(100);\r\n}\r\n\r\n//&quot;INBOUND_CHANNEL_ERR&quot; as QueueChannel\r\n@Bean(name = Constants.INBOUND_CHANNEL_ERR)\r\npublic QueueChannel errorInboundChannel() {\r\n    return new QueueChannel(100);\r\n}\r\n\r\n//Service Activator for &quot;INBOUND_CHANNEL_ERR&quot;.\r\n@ServiceActivator(inputChannel = Constants.INBOUND_CHANNEL_ERR)\r\npublic void handleErrors(org.springframework.messaging.Message&lt;User&gt; message) {\r\n    // TODO: Log only when the &quot;INBOUND_CHANNEL_ERR&quot; queue is full for throttling and clear the queue\r\n    LOG.error(&quot;Dropping the message. ...&quot;);\r\n}\r\n```","title":"Log a message only when queue is full and purge the queue","body":"<p>We send a message to the queue using the @Gateway.\nWhen the Queue is full, I dont want to log a message. Instead I want to log once for every 100 messages and ourge the queue.\nDo we have any option to do this Spring Integration ?</p>\n<pre><code>//Send message to &quot;INBOUND_CHANNEL&quot;\n@MessagingGateway(errorChannel = Constants.INBOUND_CHANNEL_ERR)\n@Component\npublic interface CustomGateway {\n    @Gateway(requestChannel = Constants.INBOUND_CHANNEL)\n    public void sendMessage(Message&lt;User&gt; message);\n}\n\n//&quot;INBOUND_CHANNEL&quot; as QueueChannel\n@Bean(name = Constants.INBOUND_CHANNEL)\npublic QueueChannel inboundFilePollingChannel() {\n  return new QueueChannel(100);\n}\n\n//&quot;INBOUND_CHANNEL_ERR&quot; as QueueChannel\n@Bean(name = Constants.INBOUND_CHANNEL_ERR)\npublic QueueChannel errorInboundChannel() {\n    return new QueueChannel(100);\n}\n\n//Service Activator for &quot;INBOUND_CHANNEL_ERR&quot;.\n@ServiceActivator(inputChannel = Constants.INBOUND_CHANNEL_ERR)\npublic void handleErrors(org.springframework.messaging.Message&lt;User&gt; message) {\n    // TODO: Log only when the &quot;INBOUND_CHANNEL_ERR&quot; queue is full for throttling and clear the queue\n    LOG.error(&quot;Dropping the message. ...&quot;);\n}\n</code></pre>\n"},{"tags":["java","excel","kotlin","excel-formula","apache-poi"],"comments":[{"owner":{"display_name":"user9035826"},"score":2,"creation_date":1691504015,"post_id":76860289,"comment_id":135498669,"body_markdown":"Have you tried evaluator.evaluate(cell) and then work with the resulting CellValue to format it?","body":"Have you tried evaluator.evaluate(cell) and then work with the resulting CellValue to format it?"},{"owner":{"account_id":12013743,"reputation":1,"user_id":8789546,"display_name":"user999"},"score":0,"creation_date":1691504276,"post_id":76860289,"comment_id":135498735,"body_markdown":"@CjY Hello, yes I have. The result is the same. Adding evaluator.evaluate(cell) above return cell.richStringCellValue.getString() will return the same output as if the evaluator.evaluate(cell) was not even present. The date is not today, rather currently 2023-08-03.","body":"@CjY Hello, yes I have. The result is the same. Adding evaluator.evaluate(cell) above return cell.richStringCellValue.getString() will return the same output as if the evaluator.evaluate(cell) was not even present. The date is not today, rather currently 2023-08-03."},{"owner":{"display_name":"user9035826"},"score":2,"creation_date":1691504430,"post_id":76860289,"comment_id":135498791,"body_markdown":"The formula looks incorrect. Do you want to fix it above?","body":"The formula looks incorrect. Do you want to fix it above?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1691505149,"post_id":76860289,"comment_id":135498996,"body_markdown":"Should your formula be `=&quot;text&quot; &amp; TEXT(TODAY(), &quot;YYYY-MM-DD&quot;) &amp; &quot;text&quot;` ?","body":"Should your formula be <code>=&quot;text&quot; &amp; TEXT(TODAY(), &quot;YYYY-MM-DD&quot;) &amp; &quot;text&quot;</code> ?"},{"owner":{"display_name":"user9035826"},"score":0,"creation_date":1691505330,"post_id":76860289,"comment_id":135499040,"body_markdown":"I am able to get the expected value with the formula fixed.","body":"I am able to get the expected value with the formula fixed."},{"owner":{"account_id":12013743,"reputation":1,"user_id":8789546,"display_name":"user999"},"score":0,"creation_date":1691505538,"post_id":76860289,"comment_id":135499088,"body_markdown":"I assume this has something to do with the country where I am in? The excel file is a template and is not created by me. Perhaps there is a possibility to change this format to YYYY-MM-DD. I will look into it, Thanks.","body":"I assume this has something to do with the country where I am in? The excel file is a template and is not created by me. Perhaps there is a possibility to change this format to YYYY-MM-DD. I will look into it, Thanks."},{"owner":{"display_name":"user9035826"},"score":1,"creation_date":1691509527,"post_id":76860289,"comment_id":135500050,"body_markdown":"The semicolon in the formula seems to be an error, but the &quot;RRRR&quot; may be a locale thing.","body":"The semicolon in the formula seems to be an error, but the &quot;RRRR&quot; may be a locale thing."},{"owner":{"account_id":12013743,"reputation":1,"user_id":8789546,"display_name":"user999"},"score":0,"creation_date":1691511697,"post_id":76860289,"comment_id":135500467,"body_markdown":"This seems to have worked! Indeed, the locale was the problem. For some time now, my pc has been set to my native locale even though I prefer to have it set to English(UK).\n\nI changed everything to UK and rebooted the pc. After that, the formulas have automatically adjusted to YYYY-MM-DD format and the semicolon changed to a comma! Thanks everyone for their help.","body":"This seems to have worked! Indeed, the locale was the problem. For some time now, my pc has been set to my native locale even though I prefer to have it set to English(UK).  I changed everything to UK and rebooted the pc. After that, the formulas have automatically adjusted to YYYY-MM-DD format and the semicolon changed to a comma! Thanks everyone for their help."}],"owner":{"account_id":12013743,"reputation":1,"user_id":8789546,"display_name":"user999"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691503746,"creation_date":1691503243,"question_id":76860289,"body_markdown":"as the title says - currently I have a function that works well\r\nexcep when...\r\n\r\nFollowing is the cell I want to get data from\r\n\r\n=&quot;text&quot; &amp; TEXT(TODAY();&quot;RRRR-MM-DD&quot;) &amp; &quot;text&quot;\r\n\r\napparently the format between two ampersands is the issue.\r\n\r\n```\r\n.\r\n.\r\nrow = sheet.getRow(cellReference.getRow())\r\ncell = row.getCell(cellReference.getCol().toInt(), Row.MissingCellPolicy.CREATE_NULL_AS_BLANK)\r\nvar dataFormatter = DataFormatter()\r\n\r\n//casting this will return everything correctly as a string however the date is in unix timestamp\r\n//of 01/01/1970 - returned value is 45160.0\r\nif(cell.getCellTypeEnum() == CellType.FORMULA)\r\n{\r\n      return dataFormatter.formatCellValue(cell, evalautor)\r\n}\r\n.\r\n.\r\n```\r\nThe most success I&#39;ve had with this was casting the following\r\n```\r\nif(cell.getCellTypeEnum() == CellType.FORMULA)\r\n{\r\n      return cell.richStringCellValue.getString()\r\n}\r\n```\r\nthe code above works except it does NOT return the correct date of TODAY(). Instead this returns the date of when the excel file was last saved.\r\nCalling any kind of cell evaluation has not worked so far and I am running out of ideas. \r\nIf I open the file and manually save it before running the script, this will work and return the correct value of posting this post today =&gt; 2023-08-08. ","title":"Using Apache POI lib I want to get date value from a cell that is FORMULA type - function doesn&#39;t read the date as desired","body":"<p>as the title says - currently I have a function that works well\nexcep when...</p>\n<p>Following is the cell I want to get data from</p>\n<p>=&quot;text&quot; &amp; TEXT(TODAY();&quot;RRRR-MM-DD&quot;) &amp; &quot;text&quot;</p>\n<p>apparently the format between two ampersands is the issue.</p>\n<pre><code>.\n.\nrow = sheet.getRow(cellReference.getRow())\ncell = row.getCell(cellReference.getCol().toInt(), Row.MissingCellPolicy.CREATE_NULL_AS_BLANK)\nvar dataFormatter = DataFormatter()\n\n//casting this will return everything correctly as a string however the date is in unix timestamp\n//of 01/01/1970 - returned value is 45160.0\nif(cell.getCellTypeEnum() == CellType.FORMULA)\n{\n      return dataFormatter.formatCellValue(cell, evalautor)\n}\n.\n.\n</code></pre>\n<p>The most success I've had with this was casting the following</p>\n<pre><code>if(cell.getCellTypeEnum() == CellType.FORMULA)\n{\n      return cell.richStringCellValue.getString()\n}\n</code></pre>\n<p>the code above works except it does NOT return the correct date of TODAY(). Instead this returns the date of when the excel file was last saved.\nCalling any kind of cell evaluation has not worked so far and I am running out of ideas.\nIf I open the file and manually save it before running the script, this will work and return the correct value of posting this post today =&gt; 2023-08-08.</p>\n"},{"tags":["java","spring-boot","opencv","intellij-idea"],"comments":[{"owner":{"account_id":3072614,"reputation":12307,"user_id":2602877,"display_name":"Christoph Rackwitz"},"score":0,"creation_date":1691503337,"post_id":76856160,"comment_id":135498521,"body_markdown":"then it looks like the openpnp people don&#39;t build a package with contrib modules?","body":"then it looks like the openpnp people don&#39;t build a package with contrib modules?"}],"owner":{"account_id":28367118,"reputation":59,"user_id":21696265,"display_name":"Prasad B"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691503429,"creation_date":1691462061,"question_id":76856160,"body_markdown":"I was using [this][1] link tutorial to create the facemaker object. I already have added this dependency of OpenCV in my springboot build.gradle.kts file:-\r\n\r\n    \r\n\timplementation(&quot;org.openpnp:opencv:4.7.0-0&quot;)\r\nI also tried to add this dependency:-\r\n\r\n    \r\n\timplementation(&quot;org.openpnp:opencv-contrib:4.7.0-0&quot;)\r\n\r\nbut it is not available. I got this :-\r\n\r\n    Could not find org.openpnp:opencv-contrib:4.7.0-0.\r\n\r\n\r\n  [1]: https://docs.opencv.org/3.4/d7/dec/tutorial_facemark_usage.html","title":"Which dependency should be added for using the OpenCV FacemarkLBF?","body":"<p>I was using <a href=\"https://docs.opencv.org/3.4/d7/dec/tutorial_facemark_usage.html\" rel=\"nofollow noreferrer\">this</a> link tutorial to create the facemaker object. I already have added this dependency of OpenCV in my springboot build.gradle.kts file:-</p>\n<pre><code>implementation(&quot;org.openpnp:opencv:4.7.0-0&quot;)\n</code></pre>\n<p>I also tried to add this dependency:-</p>\n<pre><code>implementation(&quot;org.openpnp:opencv-contrib:4.7.0-0&quot;)\n</code></pre>\n<p>but it is not available. I got this :-</p>\n<pre><code>Could not find org.openpnp:opencv-contrib:4.7.0-0.\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate-validator"],"answers":[{"tags":[],"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691503269,"creation_date":1691503269,"answer_id":76860297,"question_id":76859358,"body_markdown":"The issue is not on hibernate-validator, but on the jdk you are using. You are still using Java 8 (&quot;Java Runtime only recognizes class file versions up to 52.0&quot;) and that the Hibernate dependency requires Java 11 (&quot;class file version 55.0&quot;). Moreover, [Spring Boot 3 requires Java 17](https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0) so even if you are able to use a previous version of hibernate-validator many other issues like this one will pop out. You should first upgrade to Java 17.","title":"SpringBoot upgrade issue - HibernateValidator has been compiled by a more recent version of the Java Runtime (class file version 55.0)","body":"<p>The issue is not on hibernate-validator, but on the jdk you are using. You are still using Java 8 (&quot;Java Runtime only recognizes class file versions up to 52.0&quot;) and that the Hibernate dependency requires Java 11 (&quot;class file version 55.0&quot;). Moreover, <a href=\"https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0\" rel=\"nofollow noreferrer\">Spring Boot 3 requires Java 17</a> so even if you are able to use a previous version of hibernate-validator many other issues like this one will pop out. You should first upgrade to Java 17.</p>\n"}],"owner":{"account_id":3408732,"reputation":135,"user_id":2859213,"display_name":"FelipeCaparelli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691503269,"creation_date":1691496051,"question_id":76859358,"body_markdown":"I am getting the following error after upgrading the library **spring-boot-starter-validation** to the version 3.0.1. It is possible to force the application to use the hibernate-validator version 6.* instead of 8.*?\r\n\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;serverProperties     &#39; defined in class path resource [org/springframework/boot/autoconfigure/web/ServerPropertiesAutoConfiguration.class]: Init     ialization of bean failed; nested exception is java.lang.UnsupportedClassVersionError: org/hibernate/validator/HibernateValidator has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0 (unable to load class [org.hibernate.validator.HibernateValidator])\r\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowi     reCapableBeanFactory.java:562)\r\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowire     CapableBeanFactory.java:481)\r\n                at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312)\r\n                at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBean     Registry.java:230)\r\n                at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308)\r\n                at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n                at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java     :211)\r\n                at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListable     BeanFactory.java:1134)\r\n                at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBe     anFactory.java:1062)\r\n                at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolv     er.java:835)\r\n                at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.ja     va:741)\r\n                ... 77 more\r\n\r\n\r\nFollow below my configuration:\r\n\r\n    &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n         &lt;version&gt;3.0.1&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"SpringBoot upgrade issue - HibernateValidator has been compiled by a more recent version of the Java Runtime (class file version 55.0)","body":"<p>I am getting the following error after upgrading the library <strong>spring-boot-starter-validation</strong> to the version 3.0.1. It is possible to force the application to use the hibernate-validator version 6.* instead of 8.*?</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'serverProperties     ' defined in class path resource [org/springframework/boot/autoconfigure/web/ServerPropertiesAutoConfiguration.class]: Init     ialization of bean failed; nested exception is java.lang.UnsupportedClassVersionError: org/hibernate/validator/HibernateValidator has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0 (unable to load class [org.hibernate.validator.HibernateValidator])\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowi     reCapableBeanFactory.java:562)\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowire     CapableBeanFactory.java:481)\n            at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:312)\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBean     Registry.java:230)\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:308)\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n            at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java     :211)\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListable     BeanFactory.java:1134)\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBe     anFactory.java:1062)\n            at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolv     er.java:835)\n            at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.ja     va:741)\n            ... 77 more\n</code></pre>\n<p>Follow below my configuration:</p>\n<pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n     &lt;version&gt;3.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","swing","jtable","tablecellrenderer"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1691477906,"post_id":76856878,"comment_id":135493123,"body_markdown":"Maybe something like [this](https://stackoverflow.com/questions/49003600/jtable-not-coloring-row-correctly/49004011#49004011) - but it&#39;s a bit hard to know what to suggest based on the description","body":"Maybe something like <a href=\"https://stackoverflow.com/questions/49003600/jtable-not-coloring-row-correctly/49004011#49004011\">this</a> - but it&#39;s a bit hard to know what to suggest based on the description"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691478461,"post_id":76856878,"comment_id":135493213,"body_markdown":"Please post your `TableModel`","body":"Please post your <code>TableModel</code>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1691502919,"post_id":76856878,"comment_id":135498418,"body_markdown":"So it seems like you want the &quot;odd&quot; valued groups one color and the &quot;even&quot; valued groups another color. I would override the `prepareRenderer(...)` method. Check out: https://stackoverflow.com/a/29702874/131872 for an example and more information to get you started.","body":"So it seems like you want the &quot;odd&quot; valued groups one color and the &quot;even&quot; valued groups another color. I would override the <code>prepareRenderer(...)</code> method. Check out: <a href=\"https://stackoverflow.com/a/29702874/131872\">stackoverflow.com/a/29702874/131872</a> for an example and more information to get you started."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691593123,"post_id":76856878,"comment_id":135513116,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":26960333,"reputation":1,"user_id":20528089,"display_name":"Khushi Yadav"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691502933,"creation_date":1691475464,"question_id":76856878,"body_markdown":"I have a JTable and want to have a clear distinction between the rows through color coding as shown in image.[enter image description here](https://i.stack.imgur.com/MUIG7.png)\r\n\r\nI know we need to use cell renderer but I am not sure how to compare the value of cells.","title":"Change the background color of rows as a group in JTable","body":"<p>I have a JTable and want to have a clear distinction between the rows through color coding as shown in image.<a href=\"https://i.stack.imgur.com/MUIG7.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I know we need to use cell renderer but I am not sure how to compare the value of cells.</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":28091063,"reputation":41,"user_id":21460584,"display_name":"Dylan Bergmann"},"score":0,"creation_date":1682990926,"post_id":76151135,"comment_id":134295399,"body_markdown":"Can you provide me with a link to the SBT 1.9.0-RC1 for windows please? Bc all pages that im looking at right now are saying that the latest version of sbt is only 1.8.2","body":"Can you provide me with a link to the SBT 1.9.0-RC1 for windows please? Bc all pages that im looking at right now are saying that the latest version of sbt is only 1.8.2"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1682990970,"post_id":76151135,"comment_id":134295402,"body_markdown":"Go to the Github site.  You may need to build it for yourself.  If that is too hard, use the other option; i.e. use Java 17.","body":"Go to the Github site.  You may need to build it for yourself.  If that is too hard, use the other option; i.e. use Java 17."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1682991366,"post_id":76151135,"comment_id":134295437,"body_markdown":"I found it - https://github.com/sbt/sbt/releases/download/v1.9.0-RC1/sbt-1.9.0-RC1.msi.  Obviously, if you use an RC rather than a Release, you may experience (new) issues.  If that&#39;s too scary, use the Java 17 option instead.","body":"I found it - <a href=\"https://github.com/sbt/sbt/releases/download/v1.9.0-RC1/sbt-1.9.0-RC1.msi\" rel=\"nofollow noreferrer\">github.com/sbt/sbt/releases/download/v1.9.0-RC1/&hellip;</a>.  Obviously, if you use an RC rather than a Release, you may experience (new) issues.  If that&#39;s too scary, use the Java 17 option instead."},{"owner":{"account_id":28091063,"reputation":41,"user_id":21460584,"display_name":"Dylan Bergmann"},"score":0,"creation_date":1683076395,"post_id":76151135,"comment_id":134309976,"body_markdown":"I tried to install the sbt 1.9.0 version and the problem still persists. I tried to downgrade to jdk 17, the command worked but some new problem arised with CMAK itself. Im so confused right now, not sure what to do next :&lt;","body":"I tried to install the sbt 1.9.0 version and the problem still persists. I tried to downgrade to jdk 17, the command worked but some new problem arised with CMAK itself. Im so confused right now, not sure what to do next :&lt;"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683076642,"post_id":76151135,"comment_id":134309990,"body_markdown":"The new CMAK problem might be an issue caused by using v1.9.0-RC1.  Roll back to 1.8.2 (+ Java 17).","body":"The new CMAK problem might be an issue caused by using v1.9.0-RC1.  Roll back to 1.8.2 (+ Java 17)."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1696942780,"post_id":76151135,"comment_id":136214864,"body_markdown":"If people are seeing this using SBT 1.9.0 or later on Java 18 and later, then they should raise a new issue in the SBT issue tracker.","body":"If people are seeing this using SBT 1.9.0 or later on Java 18 and later, then they should raise a new issue in the SBT issue tracker."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682990887,"creation_date":1682989898,"answer_id":76151135,"question_id":76151072,"body_markdown":"It appears that you are running with Java 19 rather than the Java 8 JRE.  (You would not get this error for Java 8.)\r\n\r\nThe deprecation warning for `SecurityManager` in SBT has been raised as an SBT issue; see https://github.com/sbt/sbt/issues/6558.  But that is against Java 17.  \r\n\r\nIn Java 18+ the Java runtime is not just giving a deprecation warning.  The `SecurityManager` class has now been changed to be non-functional; see https://openjdk.org/jeps/411 ... where it talks about the plans for Java 18 and later.\r\n\r\nAs a result, SBT 1.8.2 and earlier don&#39;t work on Java 18 and later.\r\n\r\nYour options are:\r\n\r\n  - Downgrade to Java 17 (or maybe Java 11 or Java 8)\r\n  - Upgrade to SBT 1.9.0-RC1 or later ... where SBT&#39;s dependency on `SecurityManager` is apparently removed.  (The issue above has been closed as resolved.)\r\n\r\n-----------------------------\r\n\r\nAs a general rule, I would recommend people stick with the LTS Java releases; i.e. 8, 11 and 17 (and 21 when it arrives).  The non-LTS releases are EOL&#39;d after 6 months, and 3rd-party software vendors tend not to support them immediately (if at all).  For example the SBT documentation recommends Java 8, 11 or 17.","title":"error during sbt launcher: java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release","body":"<p>It appears that you are running with Java 19 rather than the Java 8 JRE.  (You would not get this error for Java 8.)</p>\n<p>The deprecation warning for <code>SecurityManager</code> in SBT has been raised as an SBT issue; see <a href=\"https://github.com/sbt/sbt/issues/6558\" rel=\"nofollow noreferrer\">https://github.com/sbt/sbt/issues/6558</a>.  But that is against Java 17.</p>\n<p>In Java 18+ the Java runtime is not just giving a deprecation warning.  The <code>SecurityManager</code> class has now been changed to be non-functional; see <a href=\"https://openjdk.org/jeps/411\" rel=\"nofollow noreferrer\">https://openjdk.org/jeps/411</a> ... where it talks about the plans for Java 18 and later.</p>\n<p>As a result, SBT 1.8.2 and earlier don't work on Java 18 and later.</p>\n<p>Your options are:</p>\n<ul>\n<li>Downgrade to Java 17 (or maybe Java 11 or Java 8)</li>\n<li>Upgrade to SBT 1.9.0-RC1 or later ... where SBT's dependency on <code>SecurityManager</code> is apparently removed.  (The issue above has been closed as resolved.)</li>\n</ul>\n<hr />\n<p>As a general rule, I would recommend people stick with the LTS Java releases; i.e. 8, 11 and 17 (and 21 when it arrives).  The non-LTS releases are EOL'd after 6 months, and 3rd-party software vendors tend not to support them immediately (if at all).  For example the SBT documentation recommends Java 8, 11 or 17.</p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1696942142,"post_id":76860228,"comment_id":136214716,"body_markdown":"That probably will only work for Java 17.  Not Java 18 and later.","body":"That probably will only work for Java 17.  Not Java 18 and later."}],"tags":[],"owner":{"account_id":12494048,"reputation":317,"user_id":9094702,"display_name":"Phillip Musiime"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1691502843,"creation_date":1691502843,"answer_id":76860228,"question_id":76151072,"body_markdown":"Rerunning the command with this option `-Djava.security.manager=allow` for JRE 17+ worked for me. Like `sbt -Djava.security.manager=allow clean dist`\r\n\r\nGot this from the issue reported on the github sbt repo https://github.com/sbt/sbt/issues/6558#issuecomment-1457274792\r\n","title":"error during sbt launcher: java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release","body":"<p>Rerunning the command with this option <code>-Djava.security.manager=allow</code> for JRE 17+ worked for me. Like <code>sbt -Djava.security.manager=allow clean dist</code></p>\n<p>Got this from the issue reported on the github sbt repo <a href=\"https://github.com/sbt/sbt/issues/6558#issuecomment-1457274792\" rel=\"nofollow noreferrer\">https://github.com/sbt/sbt/issues/6558#issuecomment-1457274792</a></p>\n"}],"owner":{"account_id":28091063,"reputation":41,"user_id":21460584,"display_name":"Dylan Bergmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5006,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691502843,"creation_date":1682988596,"question_id":76151072,"body_markdown":"So I&#39;m installing CMAK(Cluster Manager for Apache Kafka) and when I run the command \r\n\r\n    sbt clean dist\r\n\r\nin the terminal, i receive this error\r\n\r\n    java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release\r\n            at java.base/java.lang.System.setSecurityManager(System.java:425)\r\n            at sbt.TrapExit$.installManager(TrapExit.scala:53)\r\n            at sbt.StandardMain$.runManaged(Main.scala:127)\r\n            at sbt.xMain$.run(Main.scala:67)\r\n            at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n            at java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n            at sbt.internal.XMainConfiguration.run(XMainConfiguration.scala:45)\r\n            at sbt.xMain.run(Main.scala:39)\r\n            at xsbt.boot.Launch$.$anonfun$run$1(Launch.scala:149)\r\n            at xsbt.boot.Launch$.withContextLoader(Launch.scala:176)\r\n            at xsbt.boot.Launch$.run(Launch.scala:149)\r\n            at xsbt.boot.Launch$.$anonfun$apply$1(Launch.scala:44)\r\n            at xsbt.boot.Launch$.launch(Launch.scala:159)\r\n            at xsbt.boot.Launch$.apply(Launch.scala:44)\r\n            at xsbt.boot.Launch$.apply(Launch.scala:21)\r\n            at xsbt.boot.Boot$.runImpl(Boot.scala:78)\r\n            at xsbt.boot.Boot$.run(Boot.scala:73)\r\n            at xsbt.boot.Boot$.main(Boot.scala:21)\r\n            at xsbt.boot.Boot.main(Boot.scala)\r\n    [error] [launcher] error during sbt launcher: java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release\r\n\r\nSo I have been trying to fix this all morning, and still not understanding what is really going on here. My current version of dependencies:\r\n\r\n    JDK: 19\r\n    JRE: 1.8.0_202\r\n    SBT: 1.8.2\r\n\r\nHelp me, please! ","title":"error during sbt launcher: java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release","body":"<p>So I'm installing CMAK(Cluster Manager for Apache Kafka) and when I run the command</p>\n<pre><code>sbt clean dist\n</code></pre>\n<p>in the terminal, i receive this error</p>\n<pre><code>java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release\n        at java.base/java.lang.System.setSecurityManager(System.java:425)\n        at sbt.TrapExit$.installManager(TrapExit.scala:53)\n        at sbt.StandardMain$.runManaged(Main.scala:127)\n        at sbt.xMain$.run(Main.scala:67)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at sbt.internal.XMainConfiguration.run(XMainConfiguration.scala:45)\n        at sbt.xMain.run(Main.scala:39)\n        at xsbt.boot.Launch$.$anonfun$run$1(Launch.scala:149)\n        at xsbt.boot.Launch$.withContextLoader(Launch.scala:176)\n        at xsbt.boot.Launch$.run(Launch.scala:149)\n        at xsbt.boot.Launch$.$anonfun$apply$1(Launch.scala:44)\n        at xsbt.boot.Launch$.launch(Launch.scala:159)\n        at xsbt.boot.Launch$.apply(Launch.scala:44)\n        at xsbt.boot.Launch$.apply(Launch.scala:21)\n        at xsbt.boot.Boot$.runImpl(Boot.scala:78)\n        at xsbt.boot.Boot$.run(Boot.scala:73)\n        at xsbt.boot.Boot$.main(Boot.scala:21)\n        at xsbt.boot.Boot.main(Boot.scala)\n[error] [launcher] error during sbt launcher: java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release\n</code></pre>\n<p>So I have been trying to fix this all morning, and still not understanding what is really going on here. My current version of dependencies:</p>\n<pre><code>JDK: 19\nJRE: 1.8.0_202\nSBT: 1.8.2\n</code></pre>\n<p>Help me, please!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9873,"page":261,"page_size":100}
