{"items":[{"tags":["java","spring","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":7798354,"reputation":6929,"user_id":5898696,"accept_rate":89,"display_name":"J-Alex"},"score":0,"creation_date":1581417832,"post_id":60166583,"comment_id":106417841,"body_markdown":"If the problem was solved, please consider to accept the answer that helped.","body":"If the problem was solved, please consider to accept the answer that helped."},{"owner":{"account_id":5649339,"reputation":1223,"user_id":4470510,"display_name":"Clarius"},"score":1,"creation_date":1669636102,"post_id":60166583,"comment_id":131679621,"body_markdown":"Maybe consider looking at this answer: https://stackoverflow.com/questions/58447685/spring-security-bcrypt-always-look-for-2a-regex","body":"Maybe consider looking at this answer: <a href=\"https://stackoverflow.com/questions/58447685/spring-security-bcrypt-always-look-for-2a-regex\" title=\"spring security bcrypt always look for 2a regex\">stackoverflow.com/questions/58447685/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1920229,"reputation":3923,"user_id":1731935,"accept_rate":75,"display_name":"Manuel"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690739569,"creation_date":1581417128,"answer_id":60166867,"question_id":60166583,"body_markdown":"Looking at your database entries, it seems like you were using:\r\n\r\n    org.springframework.security.crypto.password.DelegatingPasswordEncoder\r\n \r\nonce and switched back to: \r\n\r\n    org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder\r\n\r\nOnly the `DelegatingPasswordEncoder` is capable of handling passwords encoded with different schemes.\r\n\r\nIf you want to stick with your, currently configured, `BCryptPasswordEncoder`, you need to:\r\n\r\n 1. remove the prefix `{bcrypt}`\r\n 2. Encode the two passwords `test123` for `john` and `susan` with a `BCryptPasswordEncoder`\r\n\r\n\r\n","title":"Spring Security - Encoded Password Does Not Look Like BCrypt","body":"<p>Looking at your database entries, it seems like you were using:</p>\n<pre><code>org.springframework.security.crypto.password.DelegatingPasswordEncoder\n</code></pre>\n<p>once and switched back to:</p>\n<pre><code>org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder\n</code></pre>\n<p>Only the <code>DelegatingPasswordEncoder</code> is capable of handling passwords encoded with different schemes.</p>\n<p>If you want to stick with your, currently configured, <code>BCryptPasswordEncoder</code>, you need to:</p>\n<ol>\n<li>remove the prefix <code>{bcrypt}</code></li>\n<li>Encode the two passwords <code>test123</code> for <code>john</code> and <code>susan</code> with a <code>BCryptPasswordEncoder</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":18824091,"reputation":81,"user_id":13729437,"display_name":"fuliya"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1594923173,"creation_date":1594921438,"answer_id":62940566,"question_id":60166583,"body_markdown":"I solved my issue by using `BcryptPasswordEncoder` as follow\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\r\n        User user = userRepository.findByuserName(userName);\r\n        if (user == null) {\r\n            throw new UsernameNotFoundException(&quot;userName&quot; + userName + &quot;Not found in the database&quot;);\r\n        }\r\n\r\n        return new org.springframework.security.core.userdetails.User(user.getName(), new BCryptPasswordEncoder().encode(user.getPassword()), getGrantedAuth(user));\r\n    }","title":"Spring Security - Encoded Password Does Not Look Like BCrypt","body":"<p>I solved my issue by using <code>BcryptPasswordEncoder</code> as follow</p>\n<pre><code>@Override\npublic UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\n    User user = userRepository.findByuserName(userName);\n    if (user == null) {\n        throw new UsernameNotFoundException(&quot;userName&quot; + userName + &quot;Not found in the database&quot;);\n    }\n\n    return new org.springframework.security.core.userdetails.User(user.getName(), new BCryptPasswordEncoder().encode(user.getPassword()), getGrantedAuth(user));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697818684,"post_id":77318348,"comment_id":136331845,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77318348/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28050272,"reputation":1,"user_id":21426296,"display_name":"Yousuf Ahmed"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697648914,"creation_date":1697648914,"answer_id":77318348,"question_id":60166583,"body_markdown":"add below code to **securityconfig.java**\r\nif you **dont want to use Bcryp**t at all\r\nworks like a charm\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n       return NoOpPasswordEncoder.getInstance();\r\n    }\r\n\r\n","title":"Spring Security - Encoded Password Does Not Look Like BCrypt","body":"<p>add below code to <strong>securityconfig.java</strong>\nif you <strong>dont want to use Bcryp</strong>t at all\nworks like a charm</p>\n<pre><code>@Bean\npublic PasswordEncoder passwordEncoder() {\n   return NoOpPasswordEncoder.getInstance();\n}\n</code></pre>\n"}],"owner":{"account_id":17518154,"reputation":105,"user_id":12704788,"display_name":"Nicholas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6481,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60166867,"answer_count":3,"score":1,"last_activity_date":1697648914,"creation_date":1581416250,"question_id":60166583,"body_markdown":"I can&#39;t login with the correct details as the program keeps stating that the encoded password does not look like bcrypt. Does anyone know how to solve this? I&#39;m using JDBC authentication.\r\n\r\nI have the correct database table as well, with enough space for the encoded password. I&#39;m not sure where it&#39;s going wrong.\r\n\r\nJSP FORM:\r\n    &lt;form:form method=&quot;post&quot; modelAttribute=&quot;user&quot;\r\n\t\t\t\t\taction=&quot;${pageContext.request.contextPath}/processLogin&quot;&gt;\r\n\r\n\t\t\t\t\t&lt;div class=&quot;form-group&quot;&gt;\r\n\t\t\t\t\t\t&lt;div class=&quot;form-label-group&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;label for=&quot;inputUser&quot;&gt;Username: &lt;/label&gt; &lt;input name=&quot;username&quot;\r\n\t\t\t\t\t\t\t\ttype=&quot;text&quot; path=&quot;username&quot; id=&quot;inputUser&quot; class=&quot;form-control&quot;\r\n\t\t\t\t\t\t\t\tplaceholder=&quot;Username&quot; required=&quot;required&quot; autofocus=&quot;autofocus&quot;&gt;\r\n\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\r\n\t\t\t\t\t&lt;div class=&quot;form-group&quot;&gt;\r\n\t\t\t\t\t\t&lt;div class=&quot;form-label-group&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;label for=&quot;inputPassword&quot;&gt;Password: &lt;/label&gt; \r\n\t\t\t\t\t\t\t&lt;input name=&quot;username&quot; type=&quot;password&quot; path=&quot;password&quot;\r\n\t\t\t\t\t\t\t\tid=&quot;inputPassword&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot;\r\n\t\t\t\t\t\t\t\trequired=&quot;required&quot;&gt;\r\n\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\r\n\t\t\t\t\t&lt;div class=&quot;form-group&quot;&gt;\r\n\t\t\t\t\t\t&lt;div class=&quot;checkbox&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;label&gt; &lt;input type=&quot;checkbox&quot; value=&quot;remember-me&quot;&gt;\r\n\t\t\t\t\t\t\t\tRemember Password\r\n\t\t\t\t\t\t\t&lt;/label&gt;\r\n\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\r\n\t\t\t\t\t&lt;input type=&quot;submit&quot; value=&quot;Login&quot;/&gt;\r\n\t\t\t\t\t\t\r\n\t\t\t\t&lt;/form:form&gt;\r\n\r\nSecurity Config:\r\n\r\n    @Autowired\r\n\tprivate DataSource securityDataSource;\r\n\r\n\t@Override\r\n\tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n\t\tauth.jdbcAuthentication().dataSource(securityDataSource).passwordEncoder(passwordEncoder());\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\r\n\t\thttp.authorizeRequests().antMatchers(&quot;/management/**&quot;).authenticated().and().formLogin().loginPage(&quot;/login&quot;)\r\n\t\t\t\t.loginProcessingUrl(&quot;/processLogin&quot;).defaultSuccessUrl(&quot;/management/dashboard&quot;).permitAll();\r\n\r\n\t\thttp.exceptionHandling().accessDeniedPage(&quot;/access-denied&quot;);\r\n\r\n\t}\r\n\r\n\t@Bean\r\n\t@Autowired\r\n\tpublic BCryptPasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\nLogin Controller\r\n\r\n    @Controller\r\n    public class LoginController {\r\n\r\n\t  @Autowired\r\n\t  private UserServiceImpl userService;\r\n\r\n\t\r\n\t  @GetMapping(&quot;/login&quot;)\r\n\t  public String showLoginForm(Model model) {\r\n\r\n\t\tUser user = new User();\r\n\t\tmodel.addAttribute(&quot;user&quot;, user);\r\n\r\n\t\treturn &quot;login&quot;;\r\n\t  }\r\n\r\n\t  @PostMapping(&quot;/processLogin&quot;)\r\n\t  public String processLogin(@ModelAttribute(&quot;user&quot;) User user, Model model) {\r\n\r\n\t\tif (userService.findUser(user.getUsername(), user.getPassword()) != null) {\r\n\t\t\treturn &quot;/management/dashboard&quot;;\r\n\t\t} else {\r\n\t\t\treturn &quot;/access-denied&quot;;\r\n\t\t}\r\n      }\r\n\t}\r\n\r\nMy database [![here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ePgZN.png","title":"Spring Security - Encoded Password Does Not Look Like BCrypt","body":"<p>I can't login with the correct details as the program keeps stating that the encoded password does not look like bcrypt. Does anyone know how to solve this? I'm using JDBC authentication.</p>\n<p>I have the correct database table as well, with enough space for the encoded password. I'm not sure where it's going wrong.</p>\n<p>JSP FORM:\n&lt;form:form method=&quot;post&quot; modelAttribute=&quot;user&quot;\naction=&quot;${pageContext.request.contextPath}/processLogin&quot;&gt;</p>\n<pre><code>                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;div class=&quot;form-label-group&quot;&gt;\n                        &lt;label for=&quot;inputUser&quot;&gt;Username: &lt;/label&gt; &lt;input name=&quot;username&quot;\n                            type=&quot;text&quot; path=&quot;username&quot; id=&quot;inputUser&quot; class=&quot;form-control&quot;\n                            placeholder=&quot;Username&quot; required=&quot;required&quot; autofocus=&quot;autofocus&quot;&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                \n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;div class=&quot;form-label-group&quot;&gt;\n                        &lt;label for=&quot;inputPassword&quot;&gt;Password: &lt;/label&gt; \n                        &lt;input name=&quot;username&quot; type=&quot;password&quot; path=&quot;password&quot;\n                            id=&quot;inputPassword&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot;\n                            required=&quot;required&quot;&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                \n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;div class=&quot;checkbox&quot;&gt;\n                        &lt;label&gt; &lt;input type=&quot;checkbox&quot; value=&quot;remember-me&quot;&gt;\n                            Remember Password\n                        &lt;/label&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                \n                &lt;input type=&quot;submit&quot; value=&quot;Login&quot;/&gt;\n                    \n            &lt;/form:form&gt;\n</code></pre>\n<p>Security Config:</p>\n<pre><code>@Autowired\nprivate DataSource securityDataSource;\n\n@Override\nprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\n    auth.jdbcAuthentication().dataSource(securityDataSource).passwordEncoder(passwordEncoder());\n}\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n\n    http.authorizeRequests().antMatchers(&quot;/management/**&quot;).authenticated().and().formLogin().loginPage(&quot;/login&quot;)\n            .loginProcessingUrl(&quot;/processLogin&quot;).defaultSuccessUrl(&quot;/management/dashboard&quot;).permitAll();\n\n    http.exceptionHandling().accessDeniedPage(&quot;/access-denied&quot;);\n\n}\n\n@Bean\n@Autowired\npublic BCryptPasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>Login Controller</p>\n<pre><code>@Controller\npublic class LoginController {\n\n  @Autowired\n  private UserServiceImpl userService;\n\n\n  @GetMapping(&quot;/login&quot;)\n  public String showLoginForm(Model model) {\n\n    User user = new User();\n    model.addAttribute(&quot;user&quot;, user);\n\n    return &quot;login&quot;;\n  }\n\n  @PostMapping(&quot;/processLogin&quot;)\n  public String processLogin(@ModelAttribute(&quot;user&quot;) User user, Model model) {\n\n    if (userService.findUser(user.getUsername(), user.getPassword()) != null) {\n        return &quot;/management/dashboard&quot;;\n    } else {\n        return &quot;/access-denied&quot;;\n    }\n  }\n}\n</code></pre>\n<p>My database <a href=\"https://i.stack.imgur.com/ePgZN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ePgZN.png\" alt=\"here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","controller-advice"],"answers":[{"tags":[],"owner":{"account_id":44259,"reputation":2595,"user_id":129795,"accept_rate":38,"display_name":"Jigar Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697648784,"creation_date":1697648784,"answer_id":77318329,"question_id":77318236,"body_markdown":"found it MappingJackson2HttpMessageConverter() \r\n&gt; MappingJackson2HttpMessageConverter(createObjectMapper()) ","title":"ControllerAdvice response still prints timestamp","body":"<p>found it MappingJackson2HttpMessageConverter()</p>\n<blockquote>\n<p>MappingJackson2HttpMessageConverter(createObjectMapper())</p>\n</blockquote>\n"}],"owner":{"account_id":44259,"reputation":2595,"user_id":129795,"accept_rate":38,"display_name":"Jigar Shah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697648784,"creation_date":1697647753,"question_id":77318236,"body_markdown":"    @ControllerAdvice\r\n    public class GlobalExceptionHandlerAdvice extends ResponseEntityExceptionHandler {\r\n    \r\n        @Override\r\n        public ResponseEntity&lt;Object&gt; handleServletRequestBindingException(\r\n                ServletRequestBindingException servletRequestBindingException, HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n            return ErrorResponse.builder(e, status, errorMessage)\r\n                    .property(&quot;code&quot;, String.valueOf(applicationError.getCode()))\r\n                    .property(&quot;timestamp&quot;, OffsetDateTime.now())\r\n                    .build();\r\n        }\r\n    }\r\n\r\n\r\nI have added Object mapper as required. Still it prints time stamp. Strange thing is, if I add @ExceptionHandler in Controller (instead of advice), it prints it correctly. \r\n\r\n\r\n    MockMvc mock = MockMvcBuilders.standaloneSetup(myController)\r\n                        .setMessageConverters(new MappingJackson2HttpMessageConverter(createObjectMapper()))\r\n                        .setHandlerExceptionResolvers(createExceptionResolver())\r\n                        .build();\r\n\r\n    private ExceptionHandlerExceptionResolver createExceptionResolver() {\r\n        ExceptionHandlerExceptionResolver exceptionResolver = new ExceptionHandlerExceptionResolver() {\r\n            @Override\r\n            protected ServletInvocableHandlerMethod getExceptionHandlerMethod(HandlerMethod handlerMethod, Exception exception) {\r\n                Method method = new ExceptionHandlerMethodResolver(GlobalExceptionHandlerAdvice .class).resolveMethod(exception);\r\n                return new ServletInvocableHandlerMethod(new GlobalExceptionHandlerAdvice(), method);\r\n            }\r\n        };\r\n        exceptionResolver.getMessageConverters().add(new MappingJackson2HttpMessageConverter());\r\n        exceptionResolver.afterPropertiesSet();\r\n        return exceptionResolver;\r\n    }\r\n\r\n    public ObjectMapper createObjectMapper() {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.registerModule(new JavaTimeModule());\r\n        objectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.LOWER_CAMEL_CASE);\r\n        objectMapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n        objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\r\n        return objectMapper;\r\n    }\r\n\r\n","title":"ControllerAdvice response still prints timestamp","body":"<pre><code>@ControllerAdvice\npublic class GlobalExceptionHandlerAdvice extends ResponseEntityExceptionHandler {\n\n    @Override\n    public ResponseEntity&lt;Object&gt; handleServletRequestBindingException(\n            ServletRequestBindingException servletRequestBindingException, HttpHeaders headers, HttpStatus status, WebRequest request) {\n        return ErrorResponse.builder(e, status, errorMessage)\n                .property(&quot;code&quot;, String.valueOf(applicationError.getCode()))\n                .property(&quot;timestamp&quot;, OffsetDateTime.now())\n                .build();\n    }\n}\n</code></pre>\n<p>I have added Object mapper as required. Still it prints time stamp. Strange thing is, if I add @ExceptionHandler in Controller (instead of advice), it prints it correctly.</p>\n<pre><code>MockMvc mock = MockMvcBuilders.standaloneSetup(myController)\n                    .setMessageConverters(new MappingJackson2HttpMessageConverter(createObjectMapper()))\n                    .setHandlerExceptionResolvers(createExceptionResolver())\n                    .build();\n\nprivate ExceptionHandlerExceptionResolver createExceptionResolver() {\n    ExceptionHandlerExceptionResolver exceptionResolver = new ExceptionHandlerExceptionResolver() {\n        @Override\n        protected ServletInvocableHandlerMethod getExceptionHandlerMethod(HandlerMethod handlerMethod, Exception exception) {\n            Method method = new ExceptionHandlerMethodResolver(GlobalExceptionHandlerAdvice .class).resolveMethod(exception);\n            return new ServletInvocableHandlerMethod(new GlobalExceptionHandlerAdvice(), method);\n        }\n    };\n    exceptionResolver.getMessageConverters().add(new MappingJackson2HttpMessageConverter());\n    exceptionResolver.afterPropertiesSet();\n    return exceptionResolver;\n}\n\npublic ObjectMapper createObjectMapper() {\n    ObjectMapper objectMapper = new ObjectMapper();\n    objectMapper.registerModule(new JavaTimeModule());\n    objectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.LOWER_CAMEL_CASE);\n    objectMapper.enable(SerializationFeature.INDENT_OUTPUT);\n    objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\n    return objectMapper;\n}\n</code></pre>\n"},{"tags":["java","hadoop"],"answers":[{"tags":[],"owner":{"account_id":2604950,"reputation":710,"user_id":2256298,"accept_rate":50,"display_name":"frankli22586"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601027277,"creation_date":1438571127,"answer_id":31778855,"question_id":29357751,"body_markdown":"```\r\n&lt;property&gt;\r\n&lt;name&gt;dfs.client.failover.proxy.provider.**your-cluster-name**&lt;/name&gt;\r\n&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;\r\n&lt;/property&gt;\r\n```\r\n\r\nThis should be your cluster name, I guess it is also case-sensitive.\r\n","title":"Couldn&#39;t create proxy provider class org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider","body":"<pre><code>&lt;property&gt;\n&lt;name&gt;dfs.client.failover.proxy.provider.**your-cluster-name**&lt;/name&gt;\n&lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;\n&lt;/property&gt;\n</code></pre>\n<p>This should be your cluster name, I guess it is also case-sensitive.</p>\n"}],"owner":{"account_id":4621695,"reputation":1891,"user_id":3746601,"accept_rate":67,"display_name":"Abhi.G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13078,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697648740,"creation_date":1427756120,"question_id":29357751,"body_markdown":"I am trying to read to check if a file exists on HDFS. I am using eclipse IDE and have all the required hadoop jars and hadoop configuration in class path. When i execute the program i see the below exception.\r\n\r\n ```\r\n\r\n     Configuration conf = new Configuration(true);\r\n    \t\t conf.addResource(new File(&quot;core-site.xml&quot;).toURI().toURL());\r\n    \t\t conf.addResource(new File(&quot;hdfs-site.xml&quot;).toURI().toURL());\r\n    \t\t conf.addResource(new File(&quot;mapred-site.xml&quot;).toURI().toURL());\r\n    \t\t FileSystem hdfs = FileSystem.get(conf);\r\n    \t\t boolean isExists = hdfs.exists(source);\r\n```\r\n\r\nException:\r\n```\r\njava.io.IOException: Couldn&#39;t create proxy provider class org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider\r\n\tat org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider.&lt;init&gt;(ConfiguredFailoverProxyProvider.java:93)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n```\r\n\r\nCan anyone help me fix this issue?","title":"Couldn&#39;t create proxy provider class org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider","body":"<p>I am trying to read to check if a file exists on HDFS. I am using eclipse IDE and have all the required hadoop jars and hadoop configuration in class path. When i execute the program i see the below exception.</p>\n<pre><code>\n    Configuration conf = new Configuration(true);\n            conf.addResource(new File(&quot;core-site.xml&quot;).toURI().toURL());\n            conf.addResource(new File(&quot;hdfs-site.xml&quot;).toURI().toURL());\n            conf.addResource(new File(&quot;mapred-site.xml&quot;).toURI().toURL());\n            FileSystem hdfs = FileSystem.get(conf);\n            boolean isExists = hdfs.exists(source);\n</code></pre>\n<p>Exception:</p>\n<pre><code>java.io.IOException: Couldn't create proxy provider class org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider\n    at org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider.&lt;init&gt;(ConfiguredFailoverProxyProvider.java:93)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n</code></pre>\n<p>Can anyone help me fix this issue?</p>\n"},{"tags":["java","spring-webflux","reactive-programming"],"owner":{"account_id":23410034,"reputation":1,"user_id":17471887,"display_name":"Калачев Артем"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697648366,"creation_date":1697648366,"question_id":77318289,"body_markdown":"My code looks like this:\r\n\r\n```\r\npublic Mono&lt;Item&gt; calculate (Item item) {\r\n        return Mono.zipDelayError(\r\n                        callSystemOne(),\r\n                        callSystemTwo()\r\n                .onErrorMap(err -&gt; err.getSuppressed().length &gt; 0 ?\r\n                        wrapError() :\r\n                        err)\r\n                .flatMap(a -&gt; callSystemThreeAndRemap()\r\n                .map(this::fillSomeFields);\r\n    }\r\n```\r\n\r\nAll calls to other systems looks the same\r\n\r\n```\r\n\tpublic Mono&lt;String&gt; callSystemOne() {\r\n        return apiClient.makeCall()\r\n                .flatMap(r -&gt; isError(r.getMeta()) ?\r\n                        Mono.error(() -&gt; {                            \r\n                            return wrappedError()})  :\r\n                        Mono.just(r))\r\n                .flatMap(service::validateResponse)\r\n                .onErrorMap(remapToRequiredException);\r\n    }\r\n```\r\n\r\nIt works as intended. However, even under a small load, 1 RPS for example, callSystemTwo() might never happen.\r\ncallSystemOne() always works correctly; I see logs of its request and expected response.\r\nOn the other hand, for callSystemTwo(), sometimes I can&#39;t even see the initial apiClient.makeCall() request log. It looks like this function is skipped completely.\r\nPerhaps, my program keeps waiting  forever until a retry happens.\r\n\r\nI have retries configured on the Ingress side, and after a retry, all works fine. All three systems are called.  \r\nIngress is not the problem, without it behavior is the same.\r\nSystemTwo might not respond from time to time, but it does not explain, why i dont even have a request log.\r\n\r\nI&#39;m new to reactive programming, so any explanations why this might happen are much appreciated.","title":"Spring WebFlux functions stop executing if system is loaded","body":"<p>My code looks like this:</p>\n<pre><code>public Mono&lt;Item&gt; calculate (Item item) {\n        return Mono.zipDelayError(\n                        callSystemOne(),\n                        callSystemTwo()\n                .onErrorMap(err -&gt; err.getSuppressed().length &gt; 0 ?\n                        wrapError() :\n                        err)\n                .flatMap(a -&gt; callSystemThreeAndRemap()\n                .map(this::fillSomeFields);\n    }\n</code></pre>\n<p>All calls to other systems looks the same</p>\n<pre><code>    public Mono&lt;String&gt; callSystemOne() {\n        return apiClient.makeCall()\n                .flatMap(r -&gt; isError(r.getMeta()) ?\n                        Mono.error(() -&gt; {                            \n                            return wrappedError()})  :\n                        Mono.just(r))\n                .flatMap(service::validateResponse)\n                .onErrorMap(remapToRequiredException);\n    }\n</code></pre>\n<p>It works as intended. However, even under a small load, 1 RPS for example, callSystemTwo() might never happen.\ncallSystemOne() always works correctly; I see logs of its request and expected response.\nOn the other hand, for callSystemTwo(), sometimes I can't even see the initial apiClient.makeCall() request log. It looks like this function is skipped completely.\nPerhaps, my program keeps waiting  forever until a retry happens.</p>\n<p>I have retries configured on the Ingress side, and after a retry, all works fine. All three systems are called.<br />\nIngress is not the problem, without it behavior is the same.\nSystemTwo might not respond from time to time, but it does not explain, why i dont even have a request log.</p>\n<p>I'm new to reactive programming, so any explanations why this might happen are much appreciated.</p>\n"},{"tags":["java","android","sdk","ioexception"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697765129,"post_id":77318226,"comment_id":136324008,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":7055267,"reputation":3170,"user_id":5402881,"display_name":"yacc"},"score":0,"creation_date":1697766504,"post_id":77318226,"comment_id":136324119,"body_markdown":"this could be related to a time limit on the file server - it just kicks you out if the download traffic stalls e.g. due a bad connection","body":"this could be related to a time limit on the file server - it just kicks you out if the download traffic stalls e.g. due a bad connection"}],"owner":{"account_id":29699959,"reputation":1,"user_id":22762354,"display_name":"Arijit Bhattacharya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697647660,"creation_date":1697647660,"question_id":77318226,"body_markdown":"Downloading https://dl.google.com/android/repository/sources-34_r01.zip\r\njava.io.IOException: Connection closed at byte 2359280. Expected 53812451 bytes.\r\nWarning: An error occurred while preparing SDK package Sources for Android 34: Connection closed at byte 2359280. Expected 53812451 bytes..\r\n&quot;Install Sources for Android 34 (revision 1)&quot; failed.\r\n\r\nwhy this is happening ?\r\n\r\nmy firewall is off.\r\n\r\n\r\nplease provide me a clear solution because i re run this download ,it is not working.\r\ni change sdk location still not working. off the firewall still not working.\r\n","title":"Warning: An error occurred while preparing SDK package Sources for Android 34: Connection closed at byte 2359280. Expected 53812451 bytes","body":"<p>Downloading <a href=\"https://dl.google.com/android/repository/sources-34_r01.zip\" rel=\"nofollow noreferrer\">https://dl.google.com/android/repository/sources-34_r01.zip</a>\njava.io.IOException: Connection closed at byte 2359280. Expected 53812451 bytes.\nWarning: An error occurred while preparing SDK package Sources for Android 34: Connection closed at byte 2359280. Expected 53812451 bytes..\n&quot;Install Sources for Android 34 (revision 1)&quot; failed.</p>\n<p>why this is happening ?</p>\n<p>my firewall is off.</p>\n<p>please provide me a clear solution because i re run this download ,it is not working.\ni change sdk location still not working. off the firewall still not working.</p>\n"},{"tags":["java","arrays","integer","double","java.util.scanner"],"comments":[{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":2,"creation_date":1697124148,"post_id":77281896,"comment_id":136243115,"body_markdown":"`cost += faceMask;`","body":"<code>cost += faceMask;</code>"},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":2,"creation_date":1697124903,"post_id":77281896,"comment_id":136243268,"body_markdown":"*&quot;Since I can&#39;t add a new constant&quot;* - you don&#39;t have to. Just use `cost = cost + whatever`","body":"<i>&quot;Since I can&#39;t add a new constant&quot;</i> - you don&#39;t have to. Just use <code>cost = cost + whatever</code>"}],"answers":[{"comments":[{"owner":{"account_id":19900182,"reputation":1,"user_id":14580353,"display_name":"quasireal"},"score":0,"creation_date":1697141001,"post_id":77282010,"comment_id":136246045,"body_markdown":"Omg yes thank you! It seems I&#39;ve completely forgotten the += operator existed, which is exactly what I was looking for – thank you so much. ^^","body":"Omg yes thank you! It seems I&#39;ve completely forgotten the += operator existed, which is exactly what I was looking for – thank you so much. ^^"}],"tags":[],"owner":{"account_id":28957273,"reputation":11,"user_id":22180563,"display_name":"Yash Kolte"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697124982,"creation_date":1697124982,"answer_id":77282010,"question_id":77281896,"body_markdown":"Since you can&#39;t add a new variable to the code, we can just add the values of treatments to the actual cost. Since it is a &#39;Switch Case&#39; statement, unless we need to repeat this process again, the value of the selected Treatment will be added to cost which is 0. \r\n\r\n    import java.util.Scanner;\r\n    public class SpaReception{\r\n      public static void main(String[] args) {\r\n        double cost = 0;\r\n        int treatment = 0;\r\n    \r\n        final double faceMask = 600.00;\r\n        final double footMassage = 300.00;\r\n        final double fullBodyMassage = 1500.00;\r\n    \r\n        Scanner input = new Scanner(System.in);  //create scanner for input\r\n        System.out.println(&quot;Type in which treatment you&#39;ve gotten &quot;);\r\n        System.out.println(&quot;Face mask: 1&quot;);\r\n        System.out.println(&quot;Foot massage: 2&quot;);\r\n        System.out.println(&quot;Full body massage: 3&quot;);\r\n        System.out.println(&quot;Cancel: -1&quot;);\r\n        treatment = input.nextInt();\r\n    \r\n        switch (treatment) {\r\n          case 1: \r\n    \t  cost += faceMask;\r\n            break;\r\n          case 2:\r\n    \t  cost += footMassage;\r\n            break;\r\n          case 3:\r\n            cost += fullBodyMassage;\r\n            break;\r\n          case 4:\r\n            break;\r\n        }\r\n    \r\n        System.out.println(&quot;The cost is: &quot;+cost);\r\n      }\r\n    }\r\n\r\nThis is what i think will solve the issue of not adding another variable and still getting a calculation for the Menu. I hope this is what you need and helps.\r\n\r\nP.S: The Variable &#39;treatment&#39; is mentioned differently in either Switch Case or at the time of Declaration.\r\n\r\n","title":"How do I add to the value of an integrer?","body":"<p>Since you can't add a new variable to the code, we can just add the values of treatments to the actual cost. Since it is a 'Switch Case' statement, unless we need to repeat this process again, the value of the selected Treatment will be added to cost which is 0.</p>\n<pre><code>import java.util.Scanner;\npublic class SpaReception{\n  public static void main(String[] args) {\n    double cost = 0;\n    int treatment = 0;\n\n    final double faceMask = 600.00;\n    final double footMassage = 300.00;\n    final double fullBodyMassage = 1500.00;\n\n    Scanner input = new Scanner(System.in);  //create scanner for input\n    System.out.println(&quot;Type in which treatment you've gotten &quot;);\n    System.out.println(&quot;Face mask: 1&quot;);\n    System.out.println(&quot;Foot massage: 2&quot;);\n    System.out.println(&quot;Full body massage: 3&quot;);\n    System.out.println(&quot;Cancel: -1&quot;);\n    treatment = input.nextInt();\n\n    switch (treatment) {\n      case 1: \n      cost += faceMask;\n        break;\n      case 2:\n      cost += footMassage;\n        break;\n      case 3:\n        cost += fullBodyMassage;\n        break;\n      case 4:\n        break;\n    }\n\n    System.out.println(&quot;The cost is: &quot;+cost);\n  }\n}\n</code></pre>\n<p>This is what i think will solve the issue of not adding another variable and still getting a calculation for the Menu. I hope this is what you need and helps.</p>\n<p>P.S: The Variable 'treatment' is mentioned differently in either Switch Case or at the time of Declaration.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697132393,"creation_date":1697132393,"answer_id":77282765,"question_id":77281896,"body_markdown":"Check for multiple inputs.\r\n\r\nHere is an example.\r\n\r\n```java\r\ndouble cost = 0;\r\nint treatment = 0;\r\n\r\nfinal double faceMask = 600.00;\r\nfinal double footMassage = 300.00;\r\nfinal double fullBodyMassage = 1500.00;\r\n\r\nScanner input = new Scanner(System.in);  //create scanner for input\r\nSystem.out.println(&quot;Type in which treatment you&#39;ve gotten &quot;);\r\nSystem.out.println(&quot;Face mask: 1&quot;);\r\nSystem.out.println(&quot;Foot massage: 2&quot;);\r\nSystem.out.println(&quot;Full body massage: 3&quot;);\r\n\r\ninput = new Scanner(input.nextLine());\r\nfor (String s : input.tokens().toArray(String[]::new))\r\n    switch (s) {\r\n        case &quot;1&quot; -&gt; cost += faceMask;\r\n        case &quot;2&quot; -&gt; cost += footMassage;\r\n        case &quot;3&quot; -&gt; cost += fullBodyMassage;\r\n    }\r\n\r\nSystem.out.println(&quot;The cost is: &quot;+cost);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nType in which treatment you&#39;ve gotten \r\nFace mask: 1\r\nFoot massage: 2\r\nFull body massage: 3\r\n1 2 3\r\nThe cost is: 2400.0\r\n```","title":"How do I add to the value of an integrer?","body":"<p>Check for multiple inputs.</p>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double cost = 0;\nint treatment = 0;\n\nfinal double faceMask = 600.00;\nfinal double footMassage = 300.00;\nfinal double fullBodyMassage = 1500.00;\n\nScanner input = new Scanner(System.in);  //create scanner for input\nSystem.out.println(&quot;Type in which treatment you've gotten &quot;);\nSystem.out.println(&quot;Face mask: 1&quot;);\nSystem.out.println(&quot;Foot massage: 2&quot;);\nSystem.out.println(&quot;Full body massage: 3&quot;);\n\ninput = new Scanner(input.nextLine());\nfor (String s : input.tokens().toArray(String[]::new))\n    switch (s) {\n        case &quot;1&quot; -&gt; cost += faceMask;\n        case &quot;2&quot; -&gt; cost += footMassage;\n        case &quot;3&quot; -&gt; cost += fullBodyMassage;\n    }\n\nSystem.out.println(&quot;The cost is: &quot;+cost);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>Type in which treatment you've gotten \nFace mask: 1\nFoot massage: 2\nFull body massage: 3\n1 2 3\nThe cost is: 2400.0\n</code></pre>\n"}],"owner":{"account_id":19900182,"reputation":1,"user_id":14580353,"display_name":"quasireal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1697647358,"creation_date":1697123976,"question_id":77281896,"body_markdown":"For a school assignment in Java, we&#39;re pretending to code the meny at a Spa Reception where the customer is supposed to add which treatments they&#39;ve chosen and it&#39;s supposed to be added to the total cost. We&#39;re given a base of code (I&#39;ve written the switch statement). We&#39;re supposed to use the literals declared in the code when calculating the cost. I&#39;m having trouble figuring out how to add the value of a treatment to the total cost (see the ** parts in bold). I&#39;ve been trying to figure out a way to add the value to the cost but I just can&#39;t seem to figure it out...\r\n\r\nHere&#39;s the code so far:\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class SpaReception{\r\n  public static void main(String[] args) {\r\n    double cost = 0;\r\n    int treatment = 0;\r\n\r\n    final double faceMask = 600.00;\r\n    final double footMassage = 300.00;\r\n    final double fullBodyMassage = 1500.00;\r\n\r\n    Scanner input = new Scanner(System.in);  //create scanner for input\r\n    System.out.println(&quot;Type in which treatment you&#39;ve gotten &quot;);\r\n    System.out.println(&quot;Face mask: 1&quot;);\r\n    System.out.println(&quot;Foot massage: 2&quot;);\r\n    System.out.println(&quot;Full body massage: 3&quot;);\r\n    System.out.println(&quot;Cancel: -1&quot;);\r\n    treatment = input.nextInt();\r\n\r\n    switch (treatments) {\r\n      case 1: \r\n        ***add the value of faceMask to cost***\r\n        break;\r\n      case 2:\r\n       ***add the value of footMassage to cost***\r\n        break;\r\n      case 3:\r\n        ***add the value of fullBodyMassage to cost***\r\n        break;\r\n      case 4:\r\n        break;\r\n    }\r\n\r\n    System.out.println(&quot;The cost is: &quot;+cost);\r\n  }\r\n}\r\n```\r\n\r\nSince I can&#39;t add a new constant (say &quot;sumOne = sum + faceMask&quot;) and work it out that way, I&#39;m really lost as to what to do and how to add to the value of cost.","title":"How do I add to the value of an integrer?","body":"<p>For a school assignment in Java, we're pretending to code the meny at a Spa Reception where the customer is supposed to add which treatments they've chosen and it's supposed to be added to the total cost. We're given a base of code (I've written the switch statement). We're supposed to use the literals declared in the code when calculating the cost. I'm having trouble figuring out how to add the value of a treatment to the total cost (see the ** parts in bold). I've been trying to figure out a way to add the value to the cost but I just can't seem to figure it out...</p>\n<p>Here's the code so far:</p>\n<pre><code>import java.util.Scanner;\npublic class SpaReception{\n  public static void main(String[] args) {\n    double cost = 0;\n    int treatment = 0;\n\n    final double faceMask = 600.00;\n    final double footMassage = 300.00;\n    final double fullBodyMassage = 1500.00;\n\n    Scanner input = new Scanner(System.in);  //create scanner for input\n    System.out.println(&quot;Type in which treatment you've gotten &quot;);\n    System.out.println(&quot;Face mask: 1&quot;);\n    System.out.println(&quot;Foot massage: 2&quot;);\n    System.out.println(&quot;Full body massage: 3&quot;);\n    System.out.println(&quot;Cancel: -1&quot;);\n    treatment = input.nextInt();\n\n    switch (treatments) {\n      case 1: \n        ***add the value of faceMask to cost***\n        break;\n      case 2:\n       ***add the value of footMassage to cost***\n        break;\n      case 3:\n        ***add the value of fullBodyMassage to cost***\n        break;\n      case 4:\n        break;\n    }\n\n    System.out.println(&quot;The cost is: &quot;+cost);\n  }\n}\n</code></pre>\n<p>Since I can't add a new constant (say &quot;sumOne = sum + faceMask&quot;) and work it out that way, I'm really lost as to what to do and how to add to the value of cost.</p>\n"},{"tags":["java","ssl","jms","activemq","jks"],"comments":[{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":1,"creation_date":1243265357,"post_id":906402,"comment_id":714856,"body_markdown":"You actually have to write a bit of code to do this, and the details depend on the format of the private key you are trying to import. What format is your key? Can you explain what tools you used to generate the key and certificate that you have?","body":"You actually have to write a bit of code to do this, and the details depend on the format of the private key you are trying to import. What format is your key? Can you explain what tools you used to generate the key and certificate that you have?"},{"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"score":0,"creation_date":1576222164,"post_id":906402,"comment_id":104836551,"body_markdown":"For two-way SSL (client and server certificate) with Spring Boot see https://stackoverflow.com/a/59317888/548473","body":"For two-way SSL (client and server certificate) with Spring Boot see <a href=\"https://stackoverflow.com/a/59317888/548473\">stackoverflow.com/a/59317888/548473</a>"}],"answers":[{"comments":[{"owner":{"account_id":49589,"reputation":2819,"user_id":147673,"accept_rate":70,"display_name":"Houtman"},"score":12,"creation_date":1418039915,"post_id":907515,"comment_id":43167304,"body_markdown":"According to CoverosGene&#39;s answer keytool supports it since Java 6. This is the [link](http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html) he provided","body":"According to CoverosGene&#39;s answer keytool supports it since Java 6. This is the <a href=\"http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\" rel=\"nofollow noreferrer\">link</a> he provided"},{"owner":{"account_id":348325,"reputation":2507,"user_id":3680466,"accept_rate":86,"display_name":"cloudsurfin"},"score":0,"creation_date":1455151483,"post_id":907515,"comment_id":58366055,"body_markdown":"For what it&#39;s worth, for all the noise on this subject, the best link is @Matej&#39;s &#39;workaround&#39; link to this 2008 post: http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html","body":"For what it&#39;s worth, for all the noise on this subject, the best link is @Matej&#39;s &#39;workaround&#39; link to this 2008 post: <a href=\"http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\" rel=\"nofollow noreferrer\">cunning.sharp.fm/2008/06/importing_private_keys_into_a.html</a>"},{"owner":{"account_id":2078351,"reputation":6786,"user_id":1851055,"accept_rate":75,"display_name":"Miscreant"},"score":1,"creation_date":1470849034,"post_id":907515,"comment_id":65120351,"body_markdown":"KeyMan doesn&#39;t seem all that user-friendly to me.","body":"KeyMan doesn&#39;t seem all that user-friendly to me."},{"owner":{"account_id":1507058,"reputation":2933,"user_id":1410212,"accept_rate":88,"display_name":"lilalinux"},"score":24,"creation_date":1533818818,"post_id":907515,"comment_id":90493477,"body_markdown":"Broken link. Please include the details of the solution directly into the answer :-(","body":"Broken link. Please include the details of the solution directly into the answer :-("}],"tags":[],"owner":{"account_id":6738,"reputation":6015,"user_id":11457,"display_name":"Matej"},"comment_count":4,"down_vote_count":7,"up_vote_count":93,"is_accepted":true,"score":86,"last_activity_date":1600765575,"creation_date":1243273322,"answer_id":907515,"question_id":906402,"body_markdown":"Believe or not, keytool does not provide such basic functionality like importing private key to keystore. You can try this [workaround][1] with merging PKSC12 file with private key to a keystore:\r\n\r\n```\r\nkeytool -importkeystore \\\r\n  -deststorepass storepassword \\\r\n  -destkeypass keypassword \\\r\n  -destkeystore my-keystore.jks \\\r\n  -srckeystore cert-and-key.p12 \\\r\n  -srcstoretype PKCS12 \\\r\n  -srcstorepass p12password \\\r\n  -alias 1\r\n```\r\n\r\nOr just use more user-friendly [KeyMan][2] from IBM for keystore handling instead of keytool. \r\n\r\n  [1]: http://web.archive.org/web/20190426215445/http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\r\n  [2]: https://www.ibm.com/developerworks/mydeveloperworks/groups/service/html/communityview?communityUuid=6fb00498-f6ea-4f65-bf0c-adc5bd0c5fcc","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>Believe or not, keytool does not provide such basic functionality like importing private key to keystore. You can try this <a href=\"http://web.archive.org/web/20190426215445/http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\" rel=\"noreferrer\">workaround</a> with merging PKSC12 file with private key to a keystore:</p>\n<pre><code>keytool -importkeystore \\\n  -deststorepass storepassword \\\n  -destkeypass keypassword \\\n  -destkeystore my-keystore.jks \\\n  -srckeystore cert-and-key.p12 \\\n  -srcstoretype PKCS12 \\\n  -srcstorepass p12password \\\n  -alias 1\n</code></pre>\n<p>Or just use more user-friendly <a href=\"https://www.ibm.com/developerworks/mydeveloperworks/groups/service/html/communityview?communityUuid=6fb00498-f6ea-4f65-bf0c-adc5bd0c5fcc\" rel=\"noreferrer\">KeyMan</a> from IBM for keystore handling instead of keytool.</p>\n"},{"tags":[],"owner":{"account_id":7255,"reputation":3109,"user_id":12537,"display_name":"Aleksandar Ivanisevic"},"comment_count":0,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1473477977,"creation_date":1243322396,"answer_id":909345,"question_id":906402,"body_markdown":"Yes, it&#39;s indeed a sad fact that keytool has no functionality to import a private key.\r\n\r\nFor the record, at the end I went with the solution described [here][1]\r\n\r\n\r\n  [1]: https://web.archive.org/web/20160106102307/http://www.agentbob.info/agentbob/79-AB.html","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>Yes, it's indeed a sad fact that keytool has no functionality to import a private key.</p>\n\n<p>For the record, at the end I went with the solution described <a href=\"https://web.archive.org/web/20160106102307/http://www.agentbob.info/agentbob/79-AB.html\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"comments":[{"owner":{"account_id":93777,"reputation":603,"user_id":256401,"accept_rate":88,"display_name":"Mafuba"},"score":4,"creation_date":1379990021,"post_id":2141229,"comment_id":28022410,"body_markdown":"The answer by @reto contains the contents of this link.","body":"The answer by @reto contains the contents of this link."},{"owner":{"account_id":80060,"reputation":1500,"user_id":226625,"accept_rate":100,"display_name":"Mister_Tom"},"score":7,"creation_date":1386364199,"post_id":2141229,"comment_id":30523436,"body_markdown":"As stated by @Mafuba, you must still create a separate pkcs12 keystore with non-java tool like openssl - then this can be imported into a jks store by keytool as stated in the answer by reto.","body":"As stated by @Mafuba, you must still create a separate pkcs12 keystore with non-java tool like openssl - then this can be imported into a jks store by keytool as stated in the answer by reto."},{"owner":{"account_id":5699320,"reputation":552,"user_id":4504862,"display_name":"Mr.Budris"},"score":1,"creation_date":1493820458,"post_id":2141229,"comment_id":74566034,"body_markdown":"One thing that makes this a good answer is the fact that the input certs are clearly specified in the brackets.","body":"One thing that makes this a good answer is the fact that the input certs are clearly specified in the brackets."},{"owner":{"account_id":3287434,"reputation":1034,"user_id":2766545,"accept_rate":75,"display_name":"Janaka Bandara"},"score":1,"creation_date":1586485610,"post_id":2141229,"comment_id":108151426,"body_markdown":"FWIW, the output of step 1 should already be usable as a Java keystore (so step 2 may not be required - unless you *do* need to import the cert+key into an *existing* keystore) - as already mentioned in a previous answer by @jaco0646","body":"FWIW, the output of step 1 should already be usable as a Java keystore (so step 2 may not be required - unless you <i>do</i> need to import the cert+key into an <i>existing</i> keystore) - as already mentioned in a previous answer by @jaco0646"},{"owner":{"account_id":1198561,"reputation":3841,"user_id":1169741,"accept_rate":48,"display_name":"Trismegistos"},"score":0,"creation_date":1612200651,"post_id":2141229,"comment_id":116686872,"body_markdown":"You may skip password in first step and set password in second step as &quot;&quot; i.e. -srcstorepass &quot;&quot;","body":"You may skip password in first step and set password in second step as &quot;&quot; i.e. -srcstorepass &quot;&quot;"}],"tags":[],"owner":{"account_id":25078,"reputation":7371,"user_id":64217,"accept_rate":75,"display_name":"OtherDevOpsGene"},"comment_count":5,"down_vote_count":3,"up_vote_count":146,"is_accepted":false,"score":143,"last_activity_date":1697647153,"creation_date":1264526775,"answer_id":2141229,"question_id":906402,"body_markdown":"`Keytool` in Java 6 does have this capability: [Importing private keys into a Java keystore using keytool][1]\r\n\r\nHere are the basic details from that post.\r\n\r\n 1. Convert the existing cert to a PKCS12 using `OpenSSL`. A password is required when asked or the 2nd step will complain.\r\n\r\n``` lang-bash\r\nopenssl pkcs12 -export -in [my_certificate.crt] -inkey [my_key.key] \\\r\n  -out [keystore.p12] -name [new_alias] -CAfile [my_ca_bundle.crt] \\\r\n  -caname root\r\n```\r\n 2. Convert the PKCS12 to a Java Keystore File.\r\n``` lang-bash\r\nkeytool -importkeystore -deststorepass [new_keystore_pass] \\\r\n  -destkeypass [new_key_pass] -destkeystore [keystore.jks] \\\r\n  -srckeystore [keystore.p12] -srcstoretype PKCS12 \\\r\n  -srcstorepass [pass_used_in_p12_keystore] \\\r\n  -alias [alias_used_in_p12_keystore]\r\n```\r\n\r\n[1]: http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\r\n","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p><code>Keytool</code> in Java 6 does have this capability: <a href=\"http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\" rel=\"nofollow noreferrer\">Importing private keys into a Java keystore using keytool</a></p>\n<p>Here are the basic details from that post.</p>\n<ol>\n<li>Convert the existing cert to a PKCS12 using <code>OpenSSL</code>. A password is required when asked or the 2nd step will complain.</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>openssl pkcs12 -export -in [my_certificate.crt] -inkey [my_key.key] \\\n  -out [keystore.p12] -name [new_alias] -CAfile [my_ca_bundle.crt] \\\n  -caname root\n</code></pre>\n<ol start=\"2\">\n<li>Convert the PKCS12 to a Java Keystore File.</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>keytool -importkeystore -deststorepass [new_keystore_pass] \\\n  -destkeypass [new_key_pass] -destkeystore [keystore.jks] \\\n  -srckeystore [keystore.p12] -srcstoretype PKCS12 \\\n  -srcstorepass [pass_used_in_p12_keystore] \\\n  -alias [alias_used_in_p12_keystore]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":34640,"reputation":20249,"user_id":97964,"accept_rate":88,"display_name":"jocull"},"score":18,"creation_date":1338927130,"post_id":8224863,"comment_id":14217345,"body_markdown":"Make sure you put a password on the p12 file - otherwise you&#39;ll get a null reference exception when you try to import it. (In case anyone else had this headache)","body":"Make sure you put a password on the p12 file - otherwise you&#39;ll get a null reference exception when you try to import it. (In case anyone else had this headache)"},{"owner":{"account_id":128563,"reputation":826,"user_id":326500,"display_name":"baswell"},"score":1,"creation_date":1342497523,"post_id":8224863,"comment_id":15218619,"body_markdown":"After creating my key and CSR with openssl, and then trying to make it work with Jetty, this did the trick. Many thinks!","body":"After creating my key and CSR with openssl, and then trying to make it work with Jetty, this did the trick. Many thinks!"},{"owner":{"account_id":481401,"reputation":15020,"user_id":895215,"accept_rate":64,"display_name":"dcernahoschi"},"score":13,"creation_date":1360370207,"post_id":8224863,"comment_id":20699468,"body_markdown":"In my case at step one the option `-CAfile ca.crt -caname root` didn&#39;t correctly output the CA certificates. Instead I used `-certfile concatenedCAFiles.pem`","body":"In my case at step one the option <code>-CAfile ca.crt -caname root</code> didn&#39;t correctly output the CA certificates. Instead I used <code>-certfile concatenedCAFiles.pem</code>"},{"owner":{"account_id":93777,"reputation":603,"user_id":256401,"accept_rate":88,"display_name":"Mafuba"},"score":14,"creation_date":1379989865,"post_id":8224863,"comment_id":28022376,"body_markdown":"Don&#39;t forget to use the `-chain` argument with openssl to include the full certificate chain in your pfx/p12 file if you want that in your key store.","body":"Don&#39;t forget to use the <code>-chain</code> argument with openssl to include the full certificate chain in your pfx/p12 file if you want that in your key store."},{"owner":{"account_id":138900,"reputation":13297,"user_id":344143,"accept_rate":89,"display_name":"Ben Mosher"},"score":3,"creation_date":1385074189,"post_id":8224863,"comment_id":30006042,"body_markdown":"In a Windows environment, `pvk2pfx` (a standard VS tool available in the VS `cmd` prompt) will spit out a `.pfx`--equivalent to a `.p12`. @jocull&#39;s advice is still relevant; put a password on it. No `openssl` needed.","body":"In a Windows environment, <code>pvk2pfx</code> (a standard VS tool available in the VS <code>cmd</code> prompt) will spit out a <code>.pfx</code>--equivalent to a <code>.p12</code>. @jocull&#39;s advice is still relevant; put a password on it. No <code>openssl</code> needed."},{"owner":{"account_id":80060,"reputation":1500,"user_id":226625,"accept_rate":100,"display_name":"Mister_Tom"},"score":2,"creation_date":1386374941,"post_id":8224863,"comment_id":30527874,"body_markdown":"Adding to openssl pkcs12 -chain comment by @Mufaba. Trust-chain certificates are missing from &quot;keytool -list&quot; unless you use the *verbose* option like &quot;keytool -list -v ...&quot; This was confusing me because keytool said only one certificate imported and -list was not showing my chain until I added -v to it. With -v you will see &quot;Certificate chain length: #&quot; *AND* &quot;Certificate[#]&quot;. Note that -caname is unnecessary because JKS chain ignores alias for trust-chain.","body":"Adding to openssl pkcs12 -chain comment by @Mufaba. Trust-chain certificates are missing from &quot;keytool -list&quot; unless you use the <i>verbose</i> option like &quot;keytool -list -v ...&quot; This was confusing me because keytool said only one certificate imported and -list was not showing my chain until I added -v to it. With -v you will see &quot;Certificate chain length: #&quot; <i>AND</i> &quot;Certificate[#]&quot;. Note that -caname is unnecessary because JKS chain ignores alias for trust-chain."},{"owner":{"account_id":42844,"reputation":4760,"user_id":124974,"accept_rate":69,"display_name":"Jon Tirsen"},"score":2,"creation_date":1400145646,"post_id":8224863,"comment_id":36369005,"body_markdown":"I get the following error:\nkeytool error: java.lang.Exception: Alias &lt;...&gt; does not exist","body":"I get the following error: keytool error: java.lang.Exception: Alias &lt;...&gt; does not exist"},{"owner":{"account_id":35944,"reputation":16419,"user_id":102200,"accept_rate":87,"display_name":"reto"},"score":0,"creation_date":1401443051,"post_id":8224863,"comment_id":36895998,"body_markdown":"@JonTirsen: did you use the same alias in both calls (I used `some-alias` in the example)? If you did: could you please create a pastebin/gist listing of all steps and their full output.","body":"@JonTirsen: did you use the same alias in both calls (I used <code>some-alias</code> in the example)? If you did: could you please create a pastebin/gist listing of all steps and their full output."},{"owner":{"account_id":1906095,"reputation":27167,"user_id":1720943,"accept_rate":81,"display_name":"Slav"},"score":10,"creation_date":1412262873,"post_id":8224863,"comment_id":41018032,"body_markdown":"For Tomcat in particular it&#39;s imperative that the **keystore** and the **key** passwords are same. When you import a `.p12` the key will have the password of the original `.p12.` Tomcat will fail with `java.security.UnrecoverableKeyException: Cannot recover key`.  \n\nIn other words: if you need to execute `-deststorepass changeit -srcstorepass some-password` with **different** passwords, then you **must** include `-destkeypass changeit` (with same password as `-deststorepass`)","body":"For Tomcat in particular it&#39;s imperative that the <b>keystore</b> and the <b>key</b> passwords are same. When you import a <code>.p12</code> the key will have the password of the original <code>.p12.</code> Tomcat will fail with <code>java.security.UnrecoverableKeyException: Cannot recover key</code>.    In other words: if you need to execute <code>-deststorepass changeit -srcstorepass some-password</code> with <b>different</b> passwords, then you <b>must</b> include <code>-destkeypass changeit</code> (with same password as <code>-deststorepass</code>)"},{"owner":{"account_id":277803,"reputation":1083,"user_id":572002,"accept_rate":75,"display_name":"Nicholi"},"score":1,"creation_date":1421784230,"post_id":8224863,"comment_id":44490224,"body_markdown":"Lifesaver about the REQUIREMENT to use deststorepass and destkeypass  parameters. For those of us that hate passing passwords into the command string for all to see/archive, not a way around it this time I guess.","body":"Lifesaver about the REQUIREMENT to use deststorepass and destkeypass  parameters. For those of us that hate passing passwords into the command string for all to see/archive, not a way around it this time I guess."},{"owner":{"account_id":1024965,"reputation":711,"user_id":1034486,"accept_rate":50,"display_name":"NorRen"},"score":2,"creation_date":1421920711,"post_id":8224863,"comment_id":44549110,"body_markdown":"If you end up with the error message &quot;Error unable to get local issuer certificate getting chain.&quot; while using the `-chain` option, you need to import the CA Root and maybe also the CA Intermediate Certficates like described here: http://gagravarr.org/writing/openssl-certs/others.shtml#ca-openssl into the openssl Certficate folder","body":"If you end up with the error message &quot;Error unable to get local issuer certificate getting chain.&quot; while using the <code>-chain</code> option, you need to import the CA Root and maybe also the CA Intermediate Certficates like described here: <a href=\"http://gagravarr.org/writing/openssl-certs/others.shtml#ca-openssl\" rel=\"nofollow noreferrer\">gagravarr.org/writing/openssl-certs/others.shtml#ca-openssl</a> into the openssl Certficate folder"},{"owner":{"account_id":334953,"reputation":3321,"user_id":661740,"accept_rate":58,"display_name":"Greg Dougherty"},"score":3,"creation_date":1464218576,"post_id":8224863,"comment_id":62400075,"body_markdown":"@Nicholi for all -*pass you can add &quot;:file [file]&quot; and not put password on command line, i.e. -deststorepass:file .kp","body":"@Nicholi for all -*pass you can add &quot;:file [file]&quot; and not put password on command line, i.e. -deststorepass:file .kp"},{"owner":{"account_id":1049528,"reputation":725,"user_id":1053785,"accept_rate":67,"display_name":"gadeynebram"},"score":1,"creation_date":1491395932,"post_id":8224863,"comment_id":73532738,"body_markdown":"Great answer! In my case there were 2 CA&#39;s in the chain so I needed to merge the CA&#39;s pem files in one and that to the -CAfile parameter (toghether with -chain)","body":"Great answer! In my case there were 2 CA&#39;s in the chain so I needed to merge the CA&#39;s pem files in one and that to the -CAfile parameter (toghether with -chain)"},{"owner":{"account_id":1455702,"reputation":15684,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":1,"creation_date":1530901109,"post_id":8224863,"comment_id":89412820,"body_markdown":"The `p12` file produced by `openssl` is already a Java keystore. Step 2 simply merges this new keystore into an existing one, which is only necessary if you _have_ an existing (old) keystore. Am I missing something here?","body":"The <code>p12</code> file produced by <code>openssl</code> is already a Java keystore. Step 2 simply merges this new keystore into an existing one, which is only necessary if you <i>have</i> an existing (old) keystore. Am I missing something here?"},{"owner":{"account_id":7608029,"reputation":4455,"user_id":5770004,"display_name":"Gavriel Cohen"},"score":0,"creation_date":1552551214,"post_id":8224863,"comment_id":97054569,"body_markdown":"@reto, Do you know why i running the one step and did not happen anythings, this is a long execution?","body":"@reto, Do you know why i running the one step and did not happen anythings, this is a long execution?"},{"owner":{"account_id":35944,"reputation":16419,"user_id":102200,"accept_rate":87,"display_name":"reto"},"score":0,"creation_date":1552573036,"post_id":8224863,"comment_id":97068730,"body_markdown":"@GavrielCohen the command should complete immediately. You probably forgot -in or -inkey and the system is assuming you want to paste that part via stdin. Check your command carefully. Maybe you are also forgetting an &#39;\\&#39; at the end of a line.","body":"@GavrielCohen the command should complete immediately. You probably forgot -in or -inkey and the system is assuming you want to paste that part via stdin. Check your command carefully. Maybe you are also forgetting an &#39;\\&#39; at the end of a line."},{"owner":{"account_id":1894627,"reputation":3217,"user_id":1711864,"accept_rate":60,"display_name":"Jordan Stewart"},"score":3,"creation_date":1554949744,"post_id":8224863,"comment_id":97940373,"body_markdown":"Here is the pkcs12 creation with passwords:\n`openssl pkcs12 -export -in server.crt -inkey server.key\n               -out server.p12 -name [some-alias]\n               -passin pass:some-password -passout pass:some-password\n               -CAfile ca.crt -caname root`","body":"Here is the pkcs12 creation with passwords: <code>openssl pkcs12 -export -in server.crt -inkey server.key                -out server.p12 -name [some-alias]                -passin pass:some-password -passout pass:some-password                -CAfile ca.crt -caname root</code>"},{"owner":{"account_id":78924,"reputation":4734,"user_id":224239,"accept_rate":71,"display_name":"Jaroslav Z&#225;ruba"},"score":0,"creation_date":1566285098,"post_id":8224863,"comment_id":101597485,"body_markdown":"Suggesting it is important to add a password on the keystore while not adding it in the command makes things rather confusing.","body":"Suggesting it is important to add a password on the keystore while not adding it in the command makes things rather confusing."},{"owner":{"account_id":2268036,"reputation":628,"user_id":1996150,"display_name":"Mariano Paniga"},"score":0,"creation_date":1572012234,"post_id":8224863,"comment_id":103439117,"body_markdown":"For me it was important to use the full chain in PEM format as input file for the openssl command (-in server.crt). This means to concatenate CA certificate, personal certificate, private key in a single file (the format with `-----BEGIN CERTIFICATE-----&#39;...) and use it in place of &quot;server.crt&quot;. This allowed me to obtain a jks file with the complete certificate chain (i.e. &quot;Certificate chain length: 2&quot;)","body":"For me it was important to use the full chain in PEM format as input file for the openssl command (-in server.crt). This means to concatenate CA certificate, personal certificate, private key in a single file (the format with `-----BEGIN CERTIFICATE-----&#39;...) and use it in place of &quot;server.crt&quot;. This allowed me to obtain a jks file with the complete certificate chain (i.e. &quot;Certificate chain length: 2&quot;)"},{"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"score":0,"creation_date":1576222350,"post_id":8224863,"comment_id":104836613,"body_markdown":"Thanks! I&#39;ve get valid keystore at step 1,  so step 2 was redudant for me. Here is full  description https://stackoverflow.com/a/59317888/548473","body":"Thanks! I&#39;ve get valid keystore at step 1,  so step 2 was redudant for me. Here is full  description <a href=\"https://stackoverflow.com/a/59317888/548473\">stackoverflow.com/a/59317888/548473</a>"},{"owner":{"account_id":1198561,"reputation":3841,"user_id":1169741,"accept_rate":48,"display_name":"Trismegistos"},"score":0,"creation_date":1612197868,"post_id":8224863,"comment_id":116685600,"body_markdown":"You do not need password on source p12 file. You can pass empty password to keytool program just add parameter -srcstorepass &quot;&quot;.","body":"You do not need password on source p12 file. You can pass empty password to keytool program just add parameter -srcstorepass &quot;&quot;."},{"owner":{"account_id":871771,"reputation":1743,"user_id":922457,"accept_rate":50,"display_name":"Edenshaw"},"score":0,"creation_date":1676492386,"post_id":8224863,"comment_id":133150040,"body_markdown":"If you get: `Error unable to get issuer certificate getting chain.` make sure you have the full chain: root + intermediate + your-cert. You can download the root and intermediate certificates from the Certificate Authority web site.","body":"If you get: <code>Error unable to get issuer certificate getting chain.</code> make sure you have the full chain: root + intermediate + your-cert. You can download the root and intermediate certificates from the Certificate Authority web site."}],"tags":[],"owner":{"account_id":35944,"reputation":16419,"user_id":102200,"accept_rate":87,"display_name":"reto"},"comment_count":22,"down_vote_count":0,"up_vote_count":619,"is_accepted":false,"score":619,"last_activity_date":1671872017,"creation_date":1321955536,"answer_id":8224863,"question_id":906402,"body_markdown":"I used the following two steps which I found in the comments/posts linked in the other answers:\r\n\r\n\r\n**Step one: Convert the x.509 cert and key to a pkcs12 file**\r\n\r\n    openssl pkcs12 -export -in server.crt -inkey server.key \\\r\n                   -out server.p12 -name [some-alias] \\\r\n                   -CAfile ca.crt -caname root\r\n\r\n**Note:** Make sure you put a password on the pkcs12 file - otherwise you&#39;ll get a null pointer exception when you try to import it. (In case anyone else had this headache). (**Thanks  jocull!**)\r\n\r\n**Note 2:** You might want to add the `-chain` option to preserve the full certificate chain. (**Thanks Mafuba**)\r\n\r\n**Step two: Convert the pkcs12 file to a Java keystore**\r\n\r\n    keytool -importkeystore \\\r\n            -deststorepass [changeit] -destkeypass [changeit] -destkeystore server.keystore \\\r\n            -srckeystore server.p12 -srcstoretype PKCS12 -srcstorepass some-password \\\r\n            -alias [some-alias]\r\n\r\n**Finished**\r\n\r\n**OPTIONAL Step zero: Create self-signed certificate**\r\n\r\n    openssl genrsa -out server.key 2048\r\n    openssl req -new -out server.csr -key server.key\r\n    openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt\r\n\r\n**FAQ: I get error `IOException: keystore password was incorrect`**\r\n\r\nIf you are using OpenSSL 3.0 and a JDK newer than Java8u302 and get the following error:\r\n\r\n```\r\nkeytool error: java.io.IOException: keystore password was incorrect\r\n```\r\n\r\nYou might caught in a change pf default cypher within openssl. [This Stack Overflow Answer][1] provides an answer. Maybe thank Thomas with an upvote.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/72501767/102200","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>I used the following two steps which I found in the comments/posts linked in the other answers:</p>\n<p><strong>Step one: Convert the x.509 cert and key to a pkcs12 file</strong></p>\n<pre><code>openssl pkcs12 -export -in server.crt -inkey server.key \\\n               -out server.p12 -name [some-alias] \\\n               -CAfile ca.crt -caname root\n</code></pre>\n<p><strong>Note:</strong> Make sure you put a password on the pkcs12 file - otherwise you'll get a null pointer exception when you try to import it. (In case anyone else had this headache). (<strong>Thanks  jocull!</strong>)</p>\n<p><strong>Note 2:</strong> You might want to add the <code>-chain</code> option to preserve the full certificate chain. (<strong>Thanks Mafuba</strong>)</p>\n<p><strong>Step two: Convert the pkcs12 file to a Java keystore</strong></p>\n<pre><code>keytool -importkeystore \\\n        -deststorepass [changeit] -destkeypass [changeit] -destkeystore server.keystore \\\n        -srckeystore server.p12 -srcstoretype PKCS12 -srcstorepass some-password \\\n        -alias [some-alias]\n</code></pre>\n<p><strong>Finished</strong></p>\n<p><strong>OPTIONAL Step zero: Create self-signed certificate</strong></p>\n<pre><code>openssl genrsa -out server.key 2048\nopenssl req -new -out server.csr -key server.key\nopenssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt\n</code></pre>\n<p><strong>FAQ: I get error <code>IOException: keystore password was incorrect</code></strong></p>\n<p>If you are using OpenSSL 3.0 and a JDK newer than Java8u302 and get the following error:</p>\n<pre><code>keytool error: java.io.IOException: keystore password was incorrect\n</code></pre>\n<p>You might caught in a change pf default cypher within openssl. <a href=\"https://stackoverflow.com/a/72501767/102200\">This Stack Overflow Answer</a> provides an answer. Maybe thank Thomas with an upvote.</p>\n"},{"comments":[{"owner":{"account_id":4631559,"reputation":707,"user_id":3753943,"display_name":"Interkot"},"score":0,"creation_date":1409847728,"post_id":25670408,"comment_id":40116518,"body_markdown":"However, Bruno mentioned that this hostname verifier is wrong: &quot;Your hostname verifier is wrong, session.getPeerHost() doesn&#39;t return the name in the certificate, but the name you connected with (i.e. the urlHostName here), so that&#39;s always going to be true. You&#39;re always returning true anyway. –  Bruno&quot;.  It worked for me though, but I would appreciate if somebody shows me how to write a good host name verifier.","body":"However, Bruno mentioned that this hostname verifier is wrong: &quot;Your hostname verifier is wrong, session.getPeerHost() doesn&#39;t return the name in the certificate, but the name you connected with (i.e. the urlHostName here), so that&#39;s always going to be true. You&#39;re always returning true anyway. –  Bruno&quot;.  It worked for me though, but I would appreciate if somebody shows me how to write a good host name verifier."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1409848287,"post_id":25670408,"comment_id":40116814,"body_markdown":"Of course it will &quot;work&quot; for you, since it will never produce an error, even when it should. Leave the default hostname verifier used by `HttpsURLConnection` instead of trying to writing your own. (Another problem with your example is that you&#39;re using the same keystore as a keystore and a truststore, which isn&#39;t always a good idea...)","body":"Of course it will &quot;work&quot; for you, since it will never produce an error, even when it should. Leave the default hostname verifier used by <code>HttpsURLConnection</code> instead of trying to writing your own. (Another problem with your example is that you&#39;re using the same keystore as a keystore and a truststore, which isn&#39;t always a good idea...)"}],"tags":[],"owner":{"account_id":4631559,"reputation":707,"user_id":3753943,"display_name":"Interkot"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1463577446,"creation_date":1409847481,"answer_id":25670408,"question_id":906402,"body_markdown":"In my case I had a pem file which contained two certificates and an encrypted private key to be used in mutual SSL authentication.\r\nSo my pem file looked like this:\r\n\r\n    -----BEGIN CERTIFICATE-----\r\n    ...\r\n    -----END CERTIFICATE-----\r\n    -----BEGIN RSA PRIVATE KEY-----\r\n    Proc-Type: 4,ENCRYPTED\r\n    DEK-Info: DES-EDE3-CBC,C8BF220FC76AA5F9\r\n    ...\r\n    -----END RSA PRIVATE KEY-----\r\n    -----BEGIN CERTIFICATE-----\r\n    ...\r\n    -----END CERTIFICATE-----\r\n\r\nHere is what I did:\r\n\r\nSplit the file into three separate files, so that each one contains just one entry, \r\nstarting with &quot;---BEGIN..&quot; and ending with &quot;---END..&quot; lines. Lets assume we now have three files: cert1.pem cert2.pem and pkey.pem\r\n\r\n\r\n Convert pkey.pem into DER format using openssl and the following syntax:\r\n\r\n`openssl pkcs8 -topk8 -nocrypt -in pkey.pem -inform PEM -out pkey.der -outform DER`\r\n\r\nNote, that if the private key is encrypted you need to supply a password( obtain it from the supplier of the original pem file )\r\nto convert to DER format, \r\nopenssl will ask you for the password like this: &quot;enter a pass phraze for pkey.pem: &quot;\r\nIf conversion is successful, you will get a new file called &quot;pkey.der&quot;\r\n\r\n\r\nCreate a new java key store and import the private key and the certificates:\r\n\r\n    String keypass = &quot;password&quot;;  // this is a new password, you need to come up with to protect your java key store file\r\n    String defaultalias = &quot;importkey&quot;;\r\n    KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;, &quot;SUN&quot;);\r\n\r\n    // this section does not make much sense to me, \r\n    // but I will leave it intact as this is how it was in the original example I found on internet:   \r\n    ks.load( null, keypass.toCharArray());\r\n    ks.store( new FileOutputStream ( &quot;mykeystore&quot;  ), keypass.toCharArray());\r\n    ks.load( new FileInputStream ( &quot;mykeystore&quot; ),    keypass.toCharArray());\r\n    // end of section..\r\n   \r\n   \r\n    // read the key file from disk and create a PrivateKey\r\n      \r\n    FileInputStream fis = new FileInputStream(&quot;pkey.der&quot;);\r\n    DataInputStream dis = new DataInputStream(fis);\r\n    byte[] bytes = new byte[dis.available()];\r\n    dis.readFully(bytes);\r\n    ByteArrayInputStream bais = new ByteArrayInputStream(bytes);\r\n   \r\n    byte[] key = new byte[bais.available()];\r\n    KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\r\n    bais.read(key, 0, bais.available());\r\n    bais.close();\r\n   \r\n    PKCS8EncodedKeySpec keysp = new PKCS8EncodedKeySpec ( key );\r\n    PrivateKey ff = kf.generatePrivate (keysp);\r\n\r\n\r\n    // read the certificates from the files and load them into the key store:\r\n   \r\n    Collection  col_crt1 = CertificateFactory.getInstance(&quot;X509&quot;).generateCertificates(new FileInputStream(&quot;cert1.pem&quot;));\r\n    Collection  col_crt2 = CertificateFactory.getInstance(&quot;X509&quot;).generateCertificates(new FileInputStream(&quot;cert2.pem&quot;));\r\n\r\n    Certificate crt1 = (Certificate) col_crt1.iterator().next();\r\n    Certificate crt2 = (Certificate) col_crt2.iterator().next();\r\n    Certificate[] chain = new Certificate[] { crt1, crt2 };\r\n\r\n    String alias1 = ((X509Certificate) crt1).getSubjectX500Principal().getName();\r\n    String alias2 = ((X509Certificate) crt2).getSubjectX500Principal().getName();\r\n\r\n    ks.setCertificateEntry(alias1, crt1);\r\n    ks.setCertificateEntry(alias2, crt2);\r\n\r\n    // store the private key\r\n    ks.setKeyEntry(defaultalias, ff, keypass.toCharArray(), chain );\r\n   \t\t\r\n    // save the key store to a file   \t\t\r\n    ks.store(new FileOutputStream ( &quot;mykeystore&quot; ),keypass.toCharArray());\r\n\r\n   \t\t\r\n (optional) Verify the content of your new key store:\r\n\r\n`keytool -list -keystore mykeystore -storepass password`\r\n\r\n&gt; Keystore type: JKS Keystore provider: SUN\r\n&gt; \r\n&gt; Your keystore contains 3 entries\r\n&gt; \r\n&gt; cn=...,ou=...,o=.., Sep 2, 2014, trustedCertEntry, Certificate\r\n&gt; fingerprint (SHA1): 2C:B8: ...\r\n&gt; \r\n&gt; importkey, Sep 2, 2014, PrivateKeyEntry, Certificate fingerprint\r\n&gt; (SHA1): 9C:B0: ...\r\n&gt; \r\n&gt; cn=...,o=...., Sep 2, 2014, trustedCertEntry, Certificate fingerprint\r\n&gt; (SHA1): 83:63: ...\r\n\r\n\r\n (optional) Test your certificates and private key from your new key store against your SSL server:\r\n( You may want to enable debugging as an VM option:  -Djavax.net.debug=all )\r\n\r\n            char[] passw = &quot;password&quot;.toCharArray();\r\n            KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;, &quot;SUN&quot;);\r\n            ks.load(new FileInputStream ( &quot;mykeystore&quot; ), passw );\r\n\r\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n            kmf.init(ks, passw);\r\n\r\n            TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n            tmf.init(ks);\r\n            TrustManager[] tm = tmf.getTrustManagers();\r\n\r\n            SSLContext sclx = SSLContext.getInstance(&quot;TLS&quot;);\r\n            sclx.init( kmf.getKeyManagers(), tm, null);\r\n\r\n  \t        SSLSocketFactory factory = sclx.getSocketFactory();\r\n            SSLSocket socket = (SSLSocket) factory.createSocket( &quot;192.168.1.111&quot;, 443 );\r\n            socket.startHandshake();\r\n  \t        \r\n  \t        //if no exceptions are thrown in the startHandshake method, then everything is fine..\r\n  \t        \r\n  \t        \r\nFinally register your certificates with    HttpsURLConnection if plan to use it:\r\n\r\n            char[] passw = &quot;password&quot;.toCharArray();\r\n            KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;, &quot;SUN&quot;);\r\n            ks.load(new FileInputStream ( &quot;mykeystore&quot; ), passw );\r\n\r\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n            kmf.init(ks, passw);\r\n\r\n            TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n            tmf.init(ks);\r\n            TrustManager[] tm = tmf.getTrustManagers();\r\n\r\n            SSLContext sclx = SSLContext.getInstance(&quot;TLS&quot;);\r\n            sclx.init( kmf.getKeyManagers(), tm, null);\r\n\r\n            HostnameVerifier hv = new HostnameVerifier()\r\n            {\r\n                public boolean verify(String urlHostName, SSLSession session)\r\n                {\r\n                    if (!urlHostName.equalsIgnoreCase(session.getPeerHost()))\r\n                    {\r\n                        System.out.println(&quot;Warning: URL host &#39;&quot; + urlHostName + &quot;&#39; is different to SSLSession host &#39;&quot; + session.getPeerHost() + &quot;&#39;.&quot;);\r\n                    }\r\n                    return true;\r\n                }\r\n            };\r\n\r\n            HttpsURLConnection.setDefaultSSLSocketFactory( sclx.getSocketFactory() );\r\n            HttpsURLConnection.setDefaultHostnameVerifier(hv);","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>In my case I had a pem file which contained two certificates and an encrypted private key to be used in mutual SSL authentication.\nSo my pem file looked like this:</p>\n\n<pre><code>-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----\n-----BEGIN RSA PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: DES-EDE3-CBC,C8BF220FC76AA5F9\n...\n-----END RSA PRIVATE KEY-----\n-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----\n</code></pre>\n\n<p>Here is what I did:</p>\n\n<p>Split the file into three separate files, so that each one contains just one entry, \nstarting with \"---BEGIN..\" and ending with \"---END..\" lines. Lets assume we now have three files: cert1.pem cert2.pem and pkey.pem</p>\n\n<p>Convert pkey.pem into DER format using openssl and the following syntax:</p>\n\n<p><code>openssl pkcs8 -topk8 -nocrypt -in pkey.pem -inform PEM -out pkey.der -outform DER</code></p>\n\n<p>Note, that if the private key is encrypted you need to supply a password( obtain it from the supplier of the original pem file )\nto convert to DER format, \nopenssl will ask you for the password like this: \"enter a pass phraze for pkey.pem: \"\nIf conversion is successful, you will get a new file called \"pkey.der\"</p>\n\n<p>Create a new java key store and import the private key and the certificates:</p>\n\n<pre><code>String keypass = \"password\";  // this is a new password, you need to come up with to protect your java key store file\nString defaultalias = \"importkey\";\nKeyStore ks = KeyStore.getInstance(\"JKS\", \"SUN\");\n\n// this section does not make much sense to me, \n// but I will leave it intact as this is how it was in the original example I found on internet:   \nks.load( null, keypass.toCharArray());\nks.store( new FileOutputStream ( \"mykeystore\"  ), keypass.toCharArray());\nks.load( new FileInputStream ( \"mykeystore\" ),    keypass.toCharArray());\n// end of section..\n\n\n// read the key file from disk and create a PrivateKey\n\nFileInputStream fis = new FileInputStream(\"pkey.der\");\nDataInputStream dis = new DataInputStream(fis);\nbyte[] bytes = new byte[dis.available()];\ndis.readFully(bytes);\nByteArrayInputStream bais = new ByteArrayInputStream(bytes);\n\nbyte[] key = new byte[bais.available()];\nKeyFactory kf = KeyFactory.getInstance(\"RSA\");\nbais.read(key, 0, bais.available());\nbais.close();\n\nPKCS8EncodedKeySpec keysp = new PKCS8EncodedKeySpec ( key );\nPrivateKey ff = kf.generatePrivate (keysp);\n\n\n// read the certificates from the files and load them into the key store:\n\nCollection  col_crt1 = CertificateFactory.getInstance(\"X509\").generateCertificates(new FileInputStream(\"cert1.pem\"));\nCollection  col_crt2 = CertificateFactory.getInstance(\"X509\").generateCertificates(new FileInputStream(\"cert2.pem\"));\n\nCertificate crt1 = (Certificate) col_crt1.iterator().next();\nCertificate crt2 = (Certificate) col_crt2.iterator().next();\nCertificate[] chain = new Certificate[] { crt1, crt2 };\n\nString alias1 = ((X509Certificate) crt1).getSubjectX500Principal().getName();\nString alias2 = ((X509Certificate) crt2).getSubjectX500Principal().getName();\n\nks.setCertificateEntry(alias1, crt1);\nks.setCertificateEntry(alias2, crt2);\n\n// store the private key\nks.setKeyEntry(defaultalias, ff, keypass.toCharArray(), chain );\n\n// save the key store to a file         \nks.store(new FileOutputStream ( \"mykeystore\" ),keypass.toCharArray());\n</code></pre>\n\n<p>(optional) Verify the content of your new key store:</p>\n\n<p><code>keytool -list -keystore mykeystore -storepass password</code></p>\n\n<blockquote>\n  <p>Keystore type: JKS Keystore provider: SUN</p>\n  \n  <p>Your keystore contains 3 entries</p>\n  \n  <p>cn=...,ou=...,o=.., Sep 2, 2014, trustedCertEntry, Certificate\n  fingerprint (SHA1): 2C:B8: ...</p>\n  \n  <p>importkey, Sep 2, 2014, PrivateKeyEntry, Certificate fingerprint\n  (SHA1): 9C:B0: ...</p>\n  \n  <p>cn=...,o=...., Sep 2, 2014, trustedCertEntry, Certificate fingerprint\n  (SHA1): 83:63: ...</p>\n</blockquote>\n\n<p>(optional) Test your certificates and private key from your new key store against your SSL server:\n( You may want to enable debugging as an VM option:  -Djavax.net.debug=all )</p>\n\n<pre><code>        char[] passw = \"password\".toCharArray();\n        KeyStore ks = KeyStore.getInstance(\"JKS\", \"SUN\");\n        ks.load(new FileInputStream ( \"mykeystore\" ), passw );\n\n        KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n        kmf.init(ks, passw);\n\n        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n        tmf.init(ks);\n        TrustManager[] tm = tmf.getTrustManagers();\n\n        SSLContext sclx = SSLContext.getInstance(\"TLS\");\n        sclx.init( kmf.getKeyManagers(), tm, null);\n\n        SSLSocketFactory factory = sclx.getSocketFactory();\n        SSLSocket socket = (SSLSocket) factory.createSocket( \"192.168.1.111\", 443 );\n        socket.startHandshake();\n\n        //if no exceptions are thrown in the startHandshake method, then everything is fine..\n</code></pre>\n\n<p>Finally register your certificates with    HttpsURLConnection if plan to use it:</p>\n\n<pre><code>        char[] passw = \"password\".toCharArray();\n        KeyStore ks = KeyStore.getInstance(\"JKS\", \"SUN\");\n        ks.load(new FileInputStream ( \"mykeystore\" ), passw );\n\n        KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n        kmf.init(ks, passw);\n\n        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n        tmf.init(ks);\n        TrustManager[] tm = tmf.getTrustManagers();\n\n        SSLContext sclx = SSLContext.getInstance(\"TLS\");\n        sclx.init( kmf.getKeyManagers(), tm, null);\n\n        HostnameVerifier hv = new HostnameVerifier()\n        {\n            public boolean verify(String urlHostName, SSLSession session)\n            {\n                if (!urlHostName.equalsIgnoreCase(session.getPeerHost()))\n                {\n                    System.out.println(\"Warning: URL host '\" + urlHostName + \"' is different to SSLSession host '\" + session.getPeerHost() + \"'.\");\n                }\n                return true;\n            }\n        };\n\n        HttpsURLConnection.setDefaultSSLSocketFactory( sclx.getSocketFactory() );\n        HttpsURLConnection.setDefaultHostnameVerifier(hv);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18756279,"reputation":1326,"user_id":13676217,"display_name":"Vincent Yin"},"score":0,"creation_date":1610131252,"post_id":31664724,"comment_id":116044926,"body_markdown":"I like this script because it takes care of the complete ecosystem, especially how to handle the intermediate CA cert. Other answers, while very helpful in handling the leaf cert and the corresponding private key, doesn&#39;t spell out how to handle the intermediate CA cert.","body":"I like this script because it takes care of the complete ecosystem, especially how to handle the intermediate CA cert. Other answers, while very helpful in handling the leaf cert and the corresponding private key, doesn&#39;t spell out how to handle the intermediate CA cert."}],"tags":[],"owner":{"account_id":474651,"reputation":14676,"user_id":884463,"accept_rate":89,"display_name":"David Tonhofer"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1438038506,"creation_date":1438038007,"answer_id":31664724,"question_id":906402,"body_markdown":"And one more:\r\n\r\n    #!/bin/bash\r\n    \r\n    # We have:\r\n    #\r\n    # 1) $KEY : Secret key in PEM format (&quot;-----BEGIN RSA PRIVATE KEY-----&quot;) \r\n    # 2) $LEAFCERT : Certificate for secret key obtained from some\r\n    #    certification outfit, also in PEM format (&quot;-----BEGIN CERTIFICATE-----&quot;)   \r\n    # 3) $CHAINCERT : Intermediate certificate linking $LEAFCERT to a trusted\r\n    #    Self-Signed Root CA Certificate \r\n    #\r\n    # We want to create a fresh Java &quot;keystore&quot; $TARGET_KEYSTORE with the\r\n    # password $TARGET_STOREPW, to be used by Tomcat for HTTPS Connector.\r\n    #\r\n    # The keystore must contain: $KEY, $LEAFCERT, $CHAINCERT\r\n    # The Self-Signed Root CA Certificate is obtained by Tomcat from the\r\n    # JDK&#39;s truststore in /etc/pki/java/cacerts\r\n    \r\n    # The non-APR HTTPS connector (APR uses OpenSSL-like configuration, much\r\n    # easier than this) in server.xml looks like this \r\n    # (See: https://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html):\r\n    #\r\n    #  &lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11Protocol&quot;\r\n    #                SSLEnabled=&quot;true&quot;\r\n    #                maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n    #                clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot;\r\n    #                keystoreFile=&quot;/etc/tomcat6/etl-web.keystore.jks&quot;\r\n    #                keystorePass=&quot;changeit&quot; /&gt;\r\n    #\r\n \r\n    # Let&#39;s roll:    \r\n    \r\n    TARGET_KEYSTORE=/etc/tomcat6/foo-server.keystore.jks\r\n    TARGET_STOREPW=changeit\r\n    \r\n    TLS=/etc/pki/tls\r\n    \r\n    KEY=$TLS/private/httpd/foo-server.example.com.key\r\n    LEAFCERT=$TLS/certs/httpd/foo-server.example.com.pem\r\n    CHAINCERT=$TLS/certs/httpd/chain.cert.pem\r\n    \r\n    # ----\r\n    # Create PKCS#12 file to import using keytool later\r\n    # ----\r\n    \r\n    # From https://www.sslshopper.com/ssl-converter.html:\r\n    # The PKCS#12 or PFX format is a binary format for storing the server certificate,\r\n    # any intermediate certificates, and the private key in one encryptable file. PFX\r\n    # files usually have extensions such as .pfx and .p12. PFX files are typically used \r\n    # on Windows machines to import and export certificates and private keys.\r\n    \r\n    TMPPW=$$ # Some random password\r\n    \r\n    PKCS12FILE=`mktemp`\r\n    \r\n    if [[ $? != 0 ]]; then\r\n      echo &quot;Creation of temporary PKCS12 file failed -- exiting&quot; &gt;&amp;2; exit 1\r\n    fi\r\n    \r\n    TRANSITFILE=`mktemp`\r\n    \r\n    if [[ $? != 0 ]]; then\r\n      echo &quot;Creation of temporary transit file failed -- exiting&quot; &gt;&amp;2; exit 1\r\n    fi\r\n    \r\n    cat &quot;$KEY&quot; &quot;$LEAFCERT&quot; &gt; &quot;$TRANSITFILE&quot;\r\n    \r\n    openssl pkcs12 -export -passout &quot;pass:$TMPPW&quot; -in &quot;$TRANSITFILE&quot; -name etl-web &gt; &quot;$PKCS12FILE&quot;\r\n    \r\n    /bin/rm &quot;$TRANSITFILE&quot;\r\n    \r\n    # Print out result for fun! Bug in doc (I think): &quot;-pass &quot; arg does not work, need &quot;-passin&quot;\r\n    \r\n    openssl pkcs12 -passin &quot;pass:$TMPPW&quot; -passout &quot;pass:$TMPPW&quot; -in &quot;$PKCS12FILE&quot; -info\r\n    \r\n    # ----\r\n    # Import contents of PKCS12FILE into a Java keystore. WTF, Sun, what were you thinking?\r\n    # ----\r\n    \r\n    if [[ -f &quot;$TARGET_KEYSTORE&quot; ]]; then\r\n      /bin/rm &quot;$TARGET_KEYSTORE&quot;\r\n    fi\r\n    \r\n    keytool -importkeystore \\\r\n       -deststorepass  &quot;$TARGET_STOREPW&quot; \\\r\n       -destkeypass    &quot;$TARGET_STOREPW&quot; \\\r\n       -destkeystore   &quot;$TARGET_KEYSTORE&quot; \\\r\n       -srckeystore    &quot;$PKCS12FILE&quot; \\\r\n       -srcstoretype  PKCS12 \\\r\n       -srcstorepass  &quot;$TMPPW&quot; \\\r\n       -alias foo-the-server\r\n    \r\n    /bin/rm &quot;$PKCS12FILE&quot;\r\n    \r\n    # ----\r\n    # Import the chain certificate. This works empirically, it is not at all clear from the doc whether this is correct\r\n    # ----\r\n    \r\n    echo &quot;Importing chain&quot;\r\n    \r\n    TT=-trustcacerts\r\n    \r\n    keytool -import $TT -storepass &quot;$TARGET_STOREPW&quot; -file &quot;$CHAINCERT&quot; -keystore &quot;$TARGET_KEYSTORE&quot; -alias chain\r\n    \r\n    # ----\r\n    # Print contents\r\n    # ----\r\n    \r\n    echo &quot;Listing result&quot;\r\n    \r\n    keytool -list -storepass &quot;$TARGET_STOREPW&quot; -keystore &quot;$TARGET_KEYSTORE&quot;\r\n\r\n","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>And one more:</p>\n\n<pre><code>#!/bin/bash\n\n# We have:\n#\n# 1) $KEY : Secret key in PEM format (\"-----BEGIN RSA PRIVATE KEY-----\") \n# 2) $LEAFCERT : Certificate for secret key obtained from some\n#    certification outfit, also in PEM format (\"-----BEGIN CERTIFICATE-----\")   \n# 3) $CHAINCERT : Intermediate certificate linking $LEAFCERT to a trusted\n#    Self-Signed Root CA Certificate \n#\n# We want to create a fresh Java \"keystore\" $TARGET_KEYSTORE with the\n# password $TARGET_STOREPW, to be used by Tomcat for HTTPS Connector.\n#\n# The keystore must contain: $KEY, $LEAFCERT, $CHAINCERT\n# The Self-Signed Root CA Certificate is obtained by Tomcat from the\n# JDK's truststore in /etc/pki/java/cacerts\n\n# The non-APR HTTPS connector (APR uses OpenSSL-like configuration, much\n# easier than this) in server.xml looks like this \n# (See: https://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html):\n#\n#  &lt;Connector port=\"8443\" protocol=\"org.apache.coyote.http11.Http11Protocol\"\n#                SSLEnabled=\"true\"\n#                maxThreads=\"150\" scheme=\"https\" secure=\"true\"\n#                clientAuth=\"false\" sslProtocol=\"TLS\"\n#                keystoreFile=\"/etc/tomcat6/etl-web.keystore.jks\"\n#                keystorePass=\"changeit\" /&gt;\n#\n\n# Let's roll:    \n\nTARGET_KEYSTORE=/etc/tomcat6/foo-server.keystore.jks\nTARGET_STOREPW=changeit\n\nTLS=/etc/pki/tls\n\nKEY=$TLS/private/httpd/foo-server.example.com.key\nLEAFCERT=$TLS/certs/httpd/foo-server.example.com.pem\nCHAINCERT=$TLS/certs/httpd/chain.cert.pem\n\n# ----\n# Create PKCS#12 file to import using keytool later\n# ----\n\n# From https://www.sslshopper.com/ssl-converter.html:\n# The PKCS#12 or PFX format is a binary format for storing the server certificate,\n# any intermediate certificates, and the private key in one encryptable file. PFX\n# files usually have extensions such as .pfx and .p12. PFX files are typically used \n# on Windows machines to import and export certificates and private keys.\n\nTMPPW=$$ # Some random password\n\nPKCS12FILE=`mktemp`\n\nif [[ $? != 0 ]]; then\n  echo \"Creation of temporary PKCS12 file failed -- exiting\" &gt;&amp;2; exit 1\nfi\n\nTRANSITFILE=`mktemp`\n\nif [[ $? != 0 ]]; then\n  echo \"Creation of temporary transit file failed -- exiting\" &gt;&amp;2; exit 1\nfi\n\ncat \"$KEY\" \"$LEAFCERT\" &gt; \"$TRANSITFILE\"\n\nopenssl pkcs12 -export -passout \"pass:$TMPPW\" -in \"$TRANSITFILE\" -name etl-web &gt; \"$PKCS12FILE\"\n\n/bin/rm \"$TRANSITFILE\"\n\n# Print out result for fun! Bug in doc (I think): \"-pass \" arg does not work, need \"-passin\"\n\nopenssl pkcs12 -passin \"pass:$TMPPW\" -passout \"pass:$TMPPW\" -in \"$PKCS12FILE\" -info\n\n# ----\n# Import contents of PKCS12FILE into a Java keystore. WTF, Sun, what were you thinking?\n# ----\n\nif [[ -f \"$TARGET_KEYSTORE\" ]]; then\n  /bin/rm \"$TARGET_KEYSTORE\"\nfi\n\nkeytool -importkeystore \\\n   -deststorepass  \"$TARGET_STOREPW\" \\\n   -destkeypass    \"$TARGET_STOREPW\" \\\n   -destkeystore   \"$TARGET_KEYSTORE\" \\\n   -srckeystore    \"$PKCS12FILE\" \\\n   -srcstoretype  PKCS12 \\\n   -srcstorepass  \"$TMPPW\" \\\n   -alias foo-the-server\n\n/bin/rm \"$PKCS12FILE\"\n\n# ----\n# Import the chain certificate. This works empirically, it is not at all clear from the doc whether this is correct\n# ----\n\necho \"Importing chain\"\n\nTT=-trustcacerts\n\nkeytool -import $TT -storepass \"$TARGET_STOREPW\" -file \"$CHAINCERT\" -keystore \"$TARGET_KEYSTORE\" -alias chain\n\n# ----\n# Print contents\n# ----\n\necho \"Listing result\"\n\nkeytool -list -storepass \"$TARGET_STOREPW\" -keystore \"$TARGET_KEYSTORE\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1851431,"reputation":44947,"user_id":1677912,"accept_rate":82,"display_name":"Mogsdad"},"score":0,"creation_date":1456947634,"post_id":35756294,"comment_id":59186431,"body_markdown":"Just linking to your own library (or utility) is not a good answer. Linking to it, explaining why it solves the problem, providing code using it to do so and disclaiming makes for a better answer. See: [How can I link to an external resource in a community-friendly way?](//meta.stackexchange.com/questions/94022/)","body":"Just linking to your own library (or utility) is not a good answer. Linking to it, explaining why it solves the problem, providing code using it to do so and disclaiming makes for a better answer. See: <a href=\"//meta.stackexchange.com/questions/94022/\">How can I link to an external resource in a community-friendly way?</a>"},{"owner":{"account_id":1398023,"reputation":991,"user_id":1327398,"display_name":"Joshua Davies"},"score":0,"creation_date":1457030938,"post_id":35756294,"comment_id":59232431,"body_markdown":"Not sure what you mean by &quot;disclaim&quot;, but I added an example.","body":"Not sure what you mean by &quot;disclaim&quot;, but I added an example."},{"owner":{"account_id":1851431,"reputation":44947,"user_id":1677912,"accept_rate":82,"display_name":"Mogsdad"},"score":0,"creation_date":1457036240,"post_id":35756294,"comment_id":59235607,"body_markdown":"Great! That&#39;s a canned comment, so part didn&#39;t apply - disclaim means to report your affiliation with the linked product or service, which you did with &quot;I put together...&quot;","body":"Great! That&#39;s a canned comment, so part didn&#39;t apply - disclaim means to report your affiliation with the linked product or service, which you did with &quot;I put together...&quot;"}],"tags":[],"owner":{"account_id":1398023,"reputation":991,"user_id":1327398,"display_name":"Joshua Davies"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1457030842,"creation_date":1456946629,"answer_id":35756294,"question_id":906402,"body_markdown":"Previous answers point out correctly that you can only do this with the standard JDK tools by converting the JKS file into PKCS #12 format first.  If you&#39;re interested, I put together a compact utility to import OpenSSL-derived keys into a JKS-formatted keystore without having to convert the keystore to PKCS #12 first: http://commandlinefanatic.com/cgi-bin/showarticle.cgi?article=art049\r\n\r\nYou would use the linked utility like this:\r\n\r\n    $ openssl req -x509 -newkey rsa:2048 -keyout localhost.key -out localhost.csr -subj &quot;/CN=localhost&quot;\r\n\r\n(sign the CSR, get back localhost.cer)\r\n\r\n    $ openssl rsa -in localhost.key -out localhost.rsa\r\n    Enter pass phrase for localhost.key:\r\n    writing RSA key\r\n    $ java -classpath . KeyImport -keyFile localhost.rsa -alias localhost -certificateFile localhost.cer -keystore localhost.jks -keystorePassword changeit -keystoreType JKS -keyPassword changeit\r\n","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>Previous answers point out correctly that you can only do this with the standard JDK tools by converting the JKS file into PKCS #12 format first.  If you're interested, I put together a compact utility to import OpenSSL-derived keys into a JKS-formatted keystore without having to convert the keystore to PKCS #12 first: <a href=\"http://commandlinefanatic.com/cgi-bin/showarticle.cgi?article=art049\" rel=\"nofollow\">http://commandlinefanatic.com/cgi-bin/showarticle.cgi?article=art049</a></p>\n\n<p>You would use the linked utility like this:</p>\n\n<pre><code>$ openssl req -x509 -newkey rsa:2048 -keyout localhost.key -out localhost.csr -subj \"/CN=localhost\"\n</code></pre>\n\n<p>(sign the CSR, get back localhost.cer)</p>\n\n<pre><code>$ openssl rsa -in localhost.key -out localhost.rsa\nEnter pass phrase for localhost.key:\nwriting RSA key\n$ java -classpath . KeyImport -keyFile localhost.rsa -alias localhost -certificateFile localhost.cer -keystore localhost.jks -keystorePassword changeit -keystoreType JKS -keyPassword changeit\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2178246,"reputation":997,"user_id":1928410,"accept_rate":44,"display_name":"vanval"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1561552078,"creation_date":1468504043,"answer_id":38375992,"question_id":906402,"body_markdown":"You can use these steps to import the key to an existing keystore. The instructions are combined from answers in this thread and other sites. These instructions worked for me (the java keystore):  \r\n\r\n1. Run \r\n\r\n`openssl pkcs12 -export -in yourserver.crt -inkey yourkey.key -out server.p12 -name somename -certfile yourca.crt -caname root`\r\n\r\n(If required put the -chain option. Putting that failed for me).\r\nThis will ask for the password - you must give the correct password else you will get an error\r\n(heading error or padding error etc).  \r\n\r\n2. It will ask you to enter a new password - you must enter a password here - enter anything but remember it. (Let us assume you enter Aragorn).  \r\n3. This will create the server.p12 file in the pkcs format.  \r\n4. Now to import it into the `*.jks` file run:  \r\n`\r\nkeytool -importkeystore -srckeystore server.p12 -srcstoretype PKCS12\r\n-destkeystore yourexistingjavakeystore.jks -deststoretype JKS -deststorepass existingjavastorepassword -destkeypass existingjavastorepassword\r\n`  \r\n(Very important  - do not leave out the deststorepass and the destkeypass parameters.)  \r\n5. It will ask you for the src key store password. Enter Aragorn and hit enter.\r\nThe certificate and key is now imported into your existing java keystore.  ","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>You can use these steps to import the key to an existing keystore. The instructions are combined from answers in this thread and other sites. These instructions worked for me (the java keystore):  </p>\n\n<ol>\n<li>Run </li>\n</ol>\n\n<p><code>openssl pkcs12 -export -in yourserver.crt -inkey yourkey.key -out server.p12 -name somename -certfile yourca.crt -caname root</code></p>\n\n<p>(If required put the -chain option. Putting that failed for me).\nThis will ask for the password - you must give the correct password else you will get an error\n(heading error or padding error etc).  </p>\n\n<ol start=\"2\">\n<li>It will ask you to enter a new password - you must enter a password here - enter anything but remember it. (Let us assume you enter Aragorn).  </li>\n<li>This will create the server.p12 file in the pkcs format.  </li>\n<li>Now to import it into the <code>*.jks</code> file run:<br>\n<code>\nkeytool -importkeystore -srckeystore server.p12 -srcstoretype PKCS12\n-destkeystore yourexistingjavakeystore.jks -deststoretype JKS -deststorepass existingjavastorepassword -destkeypass existingjavastorepassword\n</code><br>\n(Very important  - do not leave out the deststorepass and the destkeypass parameters.)  </li>\n<li>It will ask you for the src key store password. Enter Aragorn and hit enter.\nThe certificate and key is now imported into your existing java keystore.  </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1316465,"reputation":1452,"user_id":1263190,"display_name":"Fotios Basagiannis"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1513877533,"creation_date":1481672918,"answer_id":41132539,"question_id":906402,"body_markdown":"Based on the answers above, here is how to create a brand new keystore for your java based web server, out of an independently created Comodo cert and private key using keytool (requires JDK 1.6+)\r\n  \r\n\r\n1. Issue this command and at the password prompt enter somepass - &#39;server.crt&#39; is your server&#39;s cert and &#39;server.key&#39; is the private key you used for issuing the CSR:`\r\nopenssl pkcs12 -export -in server.crt -inkey server.key -out server.p12 -name www.yourdomain.com -CAfile AddTrustExternalCARoot.crt -caname &quot;AddTrust External CA Root&quot;`\r\n\r\n2. Then use keytool to convert the p12 keystore into a jks keystore:`\r\nkeytool -importkeystore -deststorepass somepass -destkeypass somepass -destkeystore keystore.jks -srckeystore server.p12 -srcstoretype PKCS12 -srcstorepass somepass`\r\n\r\nThen import the other two root/intermediate certs you received from Comodo:\r\n\r\n3. Import COMODORSAAddTrustCA.crt:`\r\nkeytool -import -trustcacerts -alias cert1 -file COMODORSAAddTrustCA.crt -keystore keystore.jks`    \r\n\r\n4. Import COMODORSADomainValidationSecureServerCA.crt:`\r\nkeytool -import -trustcacerts -alias cert2 -file COMODORSADomainValidationSecureServerCA.crt -keystore keystore.jks`\r\n","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>Based on the answers above, here is how to create a brand new keystore for your java based web server, out of an independently created Comodo cert and private key using keytool (requires JDK 1.6+)</p>\n\n<ol>\n<li><p>Issue this command and at the password prompt enter somepass - 'server.crt' is your server's cert and 'server.key' is the private key you used for issuing the CSR:<code>\nopenssl pkcs12 -export -in server.crt -inkey server.key -out server.p12 -name www.yourdomain.com -CAfile AddTrustExternalCARoot.crt -caname \"AddTrust External CA Root\"</code></p></li>\n<li><p>Then use keytool to convert the p12 keystore into a jks keystore:<code>\nkeytool -importkeystore -deststorepass somepass -destkeypass somepass -destkeystore keystore.jks -srckeystore server.p12 -srcstoretype PKCS12 -srcstorepass somepass</code></p></li>\n</ol>\n\n<p>Then import the other two root/intermediate certs you received from Comodo:</p>\n\n<ol start=\"3\">\n<li><p>Import COMODORSAAddTrustCA.crt:<code>\nkeytool -import -trustcacerts -alias cert1 -file COMODORSAAddTrustCA.crt -keystore keystore.jks</code>    </p></li>\n<li><p>Import COMODORSADomainValidationSecureServerCA.crt:<code>\nkeytool -import -trustcacerts -alias cert2 -file COMODORSADomainValidationSecureServerCA.crt -keystore keystore.jks</code></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2578817,"reputation":3738,"user_id":2235939,"accept_rate":52,"display_name":"Michał Jurczuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1496306999,"creation_date":1496306999,"answer_id":44302747,"question_id":906402,"body_markdown":"First convert to p12:\r\n\r\n    openssl pkcs12 -export -in [filename-certificate] -inkey [filename-key] -name [host] -out [filename-new-PKCS-12.p12]\r\n\r\nCreate new JKS from p12:\r\n\r\n    keytool -importkeystore -deststorepass [password] -destkeystore [filename-new-keystore.jks] -srckeystore [filename-new-PKCS-12.p12] -srcstoretype PKCS12\r\n\r\n","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>First convert to p12:</p>\n\n<pre><code>openssl pkcs12 -export -in [filename-certificate] -inkey [filename-key] -name [host] -out [filename-new-PKCS-12.p12]\n</code></pre>\n\n<p>Create new JKS from p12:</p>\n\n<pre><code>keytool -importkeystore -deststorepass [password] -destkeystore [filename-new-keystore.jks] -srckeystore [filename-new-PKCS-12.p12] -srcstoretype PKCS12\n</code></pre>\n"},{"tags":[],"owner":{"account_id":914346,"reputation":1030,"user_id":947488,"display_name":"Stefan Reich"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1546274717,"creation_date":1546274717,"answer_id":53989618,"question_id":906402,"body_markdown":"Just make a PKCS12 keystore, Java can use it directly now. In fact, if you list a Java-style keystore, keytool itself alerts you to the fact that PKCS12 is now the preferred format.\r\n\r\n    openssl pkcs12 -export -in server.crt -inkey server.key \\\r\n                   -out server.p12 -name [some-alias] \\\r\n                   -CAfile ca.crt -caname root -chain\r\n\r\nYou should have received all three files (server.crt, server.key, ca.crt) from your certificate provider. I am not sure what &quot;-caname root&quot; actually means, but it seems to have to be specified that way.\r\n\r\nIn the Java code, make sure to specify the right keystore type.\r\n\r\n    KeyStore.getInstance(&quot;PKCS12&quot;)\r\n\r\nI got my comodo.com-issued SSL certificate working fine in NanoHTTPD this way.","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>Just make a PKCS12 keystore, Java can use it directly now. In fact, if you list a Java-style keystore, keytool itself alerts you to the fact that PKCS12 is now the preferred format.</p>\n\n<pre><code>openssl pkcs12 -export -in server.crt -inkey server.key \\\n               -out server.p12 -name [some-alias] \\\n               -CAfile ca.crt -caname root -chain\n</code></pre>\n\n<p>You should have received all three files (server.crt, server.key, ca.crt) from your certificate provider. I am not sure what \"-caname root\" actually means, but it seems to have to be specified that way.</p>\n\n<p>In the Java code, make sure to specify the right keystore type.</p>\n\n<pre><code>KeyStore.getInstance(\"PKCS12\")\n</code></pre>\n\n<p>I got my comodo.com-issued SSL certificate working fine in NanoHTTPD this way.</p>\n"},{"tags":[],"owner":{"account_id":121797,"reputation":2346,"user_id":3059685,"display_name":"Joman68"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1547596850,"creation_date":1547596850,"answer_id":54208558,"question_id":906402,"body_markdown":"If you have a PEM file (e.g. `server.pem`) containing:\r\n\r\n - the trusted certificate\r\n - the private key\r\n\r\nthen you can import the certificate and key into a JKS keystore like this:\r\n\r\n**1**) Copy the private key from the PEM file into an ascii file (e.g. `server.key`)\r\n\r\n**2**) Copy the cert from the PEM file into an ascii file (e.g. `server.crt`)\r\n\r\n**3**) Export the cert and key into a PKCS12 file:\r\n \r\n    $ openssl pkcs12 -export -in server.crt -inkey server.key \\\r\n                     -out server.p12 -name [some-alias] -CAfile server.pem -caname root\r\n\r\n - **the PEM file can be used as the argument to the `-CAfile` option**.\r\n - you are prompted for an &#39;export&#39; password.\r\n - if doing this in git bash then add `winpty` to the start of the command so the export password can be entered.\r\n\r\n**4**) Convert the PKCS12 file to a JKS keystore:\r\n\r\n    $ keytool -importkeystore -deststorepass changeit -destkeypass changeit \\\r\n              -destkeystore keystore.jks  -srckeystore server.p12 -srcstoretype PKCS12 \\\r\n              -srcstorepass changeit\r\n\r\n- the `srcstorepass` password should match the export password from step 3)\r\n","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>If you have a PEM file (e.g. <code>server.pem</code>) containing:</p>\n\n<ul>\n<li>the trusted certificate</li>\n<li>the private key</li>\n</ul>\n\n<p>then you can import the certificate and key into a JKS keystore like this:</p>\n\n<p><strong>1</strong>) Copy the private key from the PEM file into an ascii file (e.g. <code>server.key</code>)</p>\n\n<p><strong>2</strong>) Copy the cert from the PEM file into an ascii file (e.g. <code>server.crt</code>)</p>\n\n<p><strong>3</strong>) Export the cert and key into a PKCS12 file:</p>\n\n<pre><code>$ openssl pkcs12 -export -in server.crt -inkey server.key \\\n                 -out server.p12 -name [some-alias] -CAfile server.pem -caname root\n</code></pre>\n\n<ul>\n<li><strong>the PEM file can be used as the argument to the <code>-CAfile</code> option</strong>.</li>\n<li>you are prompted for an 'export' password.</li>\n<li>if doing this in git bash then add <code>winpty</code> to the start of the command so the export password can be entered.</li>\n</ul>\n\n<p><strong>4</strong>) Convert the PKCS12 file to a JKS keystore:</p>\n\n<pre><code>$ keytool -importkeystore -deststorepass changeit -destkeypass changeit \\\n          -destkeystore keystore.jks  -srckeystore server.p12 -srcstoretype PKCS12 \\\n          -srcstorepass changeit\n</code></pre>\n\n<ul>\n<li>the <code>srcstorepass</code> password should match the export password from step 3)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":204734,"reputation":162,"user_id":453123,"display_name":"Dana"},"score":1,"creation_date":1665860249,"post_id":55220360,"comment_id":130799509,"body_markdown":"Step 1 was all I needed for a 1and1.com / ionos.com cert which provided a private key along with both root and intermediate certs.","body":"Step 1 was all I needed for a 1and1.com / ionos.com cert which provided a private key along with both root and intermediate certs."}],"tags":[],"owner":{"account_id":8175549,"reputation":176,"user_id":6154409,"display_name":"Joe Mwa"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1552908613,"creation_date":1552908613,"answer_id":55220360,"question_id":906402,"body_markdown":"What I was trying to achieve was using already provided private key and certificate to sign message that was going someplace that needed to make sure that the message was coming from me (private keys sign while public keys encrypt).\r\n  \r\nSo if you already have a .key file and a .crt file?\r\n\r\nTry this:\r\n\r\n**Step1:** Convert the key and cert to .p12 file\r\n\r\n    openssl pkcs12 -export -in certificate.crt -inkey privateKey.key -name alias -out yourconvertedfile.p12\r\n\r\n**Step 2:** Import the key and create a .jsk file with a single command\r\n\r\n    keytool -importkeystore -deststorepass changeit -destkeystore keystore.jks -srckeystore umeme.p12 -srcstoretype PKCS12\r\n\r\n**Step 3:** In your java:\r\n\r\n    char[] keyPassword = &quot;changeit&quot;.toCharArray();\r\n\r\n    KeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n    InputStream keyStoreData = new FileInputStream(&quot;keystore.jks&quot;);\r\n\r\n    keyStore.load(keyStoreData, keyPassword);\r\n    KeyStore.ProtectionParameter entryPassword = new KeyStore.PasswordProtection(keyPassword);\r\n    KeyStore.PrivateKeyEntry privateKeyEntry = (KeyStore.PrivateKeyEntry)keyStore.getEntry(&quot;alias&quot;, entryPassword);\r\n\r\n    System.out.println(privateKeyEntry.toString());\r\n\r\n\r\nIf you need to sign some string using this key do the following:\r\n\r\nStep 1: Convert the text you want to encrypt\r\n\r\n    byte[] data = &quot;test&quot;.getBytes(&quot;UTF8&quot;);\r\n\r\nStep 2: Get base64 encoded private key\r\n\r\n    keyStore.load(keyStoreData, keyPassword);\r\n    \r\n    //get cert, pubkey and private key from the store by alias\r\n    Certificate cert = keyStore.getCertificate(&quot;localhost&quot;);\r\n    PublicKey publicKey = cert.getPublicKey();\r\n\tKeyPair keyPair = new KeyPair(publicKey, (PrivateKey) key);\r\n\r\n    //sign with this alg\r\n\tSignature sig = Signature.getInstance(&quot;SHA1WithRSA&quot;);\r\n    sig.initSign(keyPair.getPrivate());\r\n    sig.update(data);\r\n    byte[] signatureBytes = sig.sign();\r\n    System.out.println(&quot;Signature:&quot; + Base64.getEncoder().encodeToString(signatureBytes));\r\n\r\n    sig.initVerify(keyPair.getPublic());\r\n    sig.update(data);\r\n\r\n    System.out.println(sig.verify(signatureBytes));\r\n\r\n*References:*\r\n\r\n 1. https://stackoverflow.com/questions/906402/how-to-import-an-existing-x509-certificate-and-private-key-in-java-keystore-to-u\r\n 2. http://tutorials.jenkov.com/java-cryptography/keystore.html\r\n 3. http://www.java2s.com/Code/Java/Security/RetrievingaKeyPairfromaKeyStore.htm\r\n 4. https://stackoverflow.com/questions/7224626/how-to-sign-string-with-private-key\r\n\r\n\r\n**Final program**\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n\t\tbyte[] data = &quot;test&quot;.getBytes(&quot;UTF8&quot;);\r\n\t\t\r\n\t\t// load keystore\r\n\t\tchar[] keyPassword = &quot;changeit&quot;.toCharArray();\r\n\r\n\t\tKeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n        //System.getProperty(&quot;user.dir&quot;) + &quot;&quot; &lt; for a file in particular path \r\n\t\tInputStream keyStoreData = new FileInputStream(&quot;keystore.jks&quot;);\r\n\t\tkeyStore.load(keyStoreData, keyPassword);\r\n\r\n\t\tKey key = keyStore.getKey(&quot;localhost&quot;, keyPassword);\r\n\r\n\t\tCertificate cert = keyStore.getCertificate(&quot;localhost&quot;);\r\n\r\n\t\tPublicKey publicKey = cert.getPublicKey();\r\n\r\n\t\tKeyPair keyPair = new KeyPair(publicKey, (PrivateKey) key);\r\n\r\n\t\tSignature sig = Signature.getInstance(&quot;SHA1WithRSA&quot;);\r\n\t\t\r\n        sig.initSign(keyPair.getPrivate());\r\n        sig.update(data);\r\n        byte[] signatureBytes = sig.sign();\r\n        System.out.println(&quot;Signature:&quot; + Base64.getEncoder().encodeToString(signatureBytes));\r\n\r\n        sig.initVerify(keyPair.getPublic());\r\n        sig.update(data);\r\n\r\n        System.out.println(sig.verify(signatureBytes));\r\n    }","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>What I was trying to achieve was using already provided private key and certificate to sign message that was going someplace that needed to make sure that the message was coming from me (private keys sign while public keys encrypt).</p>\n\n<p>So if you already have a .key file and a .crt file?</p>\n\n<p>Try this:</p>\n\n<p><strong>Step1:</strong> Convert the key and cert to .p12 file</p>\n\n<pre><code>openssl pkcs12 -export -in certificate.crt -inkey privateKey.key -name alias -out yourconvertedfile.p12\n</code></pre>\n\n<p><strong>Step 2:</strong> Import the key and create a .jsk file with a single command</p>\n\n<pre><code>keytool -importkeystore -deststorepass changeit -destkeystore keystore.jks -srckeystore umeme.p12 -srcstoretype PKCS12\n</code></pre>\n\n<p><strong>Step 3:</strong> In your java:</p>\n\n<pre><code>char[] keyPassword = \"changeit\".toCharArray();\n\nKeyStore keyStore = KeyStore.getInstance(\"JKS\");\nInputStream keyStoreData = new FileInputStream(\"keystore.jks\");\n\nkeyStore.load(keyStoreData, keyPassword);\nKeyStore.ProtectionParameter entryPassword = new KeyStore.PasswordProtection(keyPassword);\nKeyStore.PrivateKeyEntry privateKeyEntry = (KeyStore.PrivateKeyEntry)keyStore.getEntry(\"alias\", entryPassword);\n\nSystem.out.println(privateKeyEntry.toString());\n</code></pre>\n\n<p>If you need to sign some string using this key do the following:</p>\n\n<p>Step 1: Convert the text you want to encrypt</p>\n\n<pre><code>byte[] data = \"test\".getBytes(\"UTF8\");\n</code></pre>\n\n<p>Step 2: Get base64 encoded private key</p>\n\n<pre><code>keyStore.load(keyStoreData, keyPassword);\n\n//get cert, pubkey and private key from the store by alias\nCertificate cert = keyStore.getCertificate(\"localhost\");\nPublicKey publicKey = cert.getPublicKey();\nKeyPair keyPair = new KeyPair(publicKey, (PrivateKey) key);\n\n//sign with this alg\nSignature sig = Signature.getInstance(\"SHA1WithRSA\");\nsig.initSign(keyPair.getPrivate());\nsig.update(data);\nbyte[] signatureBytes = sig.sign();\nSystem.out.println(\"Signature:\" + Base64.getEncoder().encodeToString(signatureBytes));\n\nsig.initVerify(keyPair.getPublic());\nsig.update(data);\n\nSystem.out.println(sig.verify(signatureBytes));\n</code></pre>\n\n<p><em>References:</em></p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/906402/how-to-import-an-existing-x509-certificate-and-private-key-in-java-keystore-to-u\">How to import an existing x509 certificate and private key in Java keystore to use in SSL?</a></li>\n<li><a href=\"http://tutorials.jenkov.com/java-cryptography/keystore.html\" rel=\"noreferrer\">http://tutorials.jenkov.com/java-cryptography/keystore.html</a></li>\n<li><a href=\"http://www.java2s.com/Code/Java/Security/RetrievingaKeyPairfromaKeyStore.htm\" rel=\"noreferrer\">http://www.java2s.com/Code/Java/Security/RetrievingaKeyPairfromaKeyStore.htm</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7224626/how-to-sign-string-with-private-key\">How to sign string with private key</a></li>\n</ol>\n\n<p><strong>Final program</strong></p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n\n    byte[] data = \"test\".getBytes(\"UTF8\");\n\n    // load keystore\n    char[] keyPassword = \"changeit\".toCharArray();\n\n    KeyStore keyStore = KeyStore.getInstance(\"JKS\");\n    //System.getProperty(\"user.dir\") + \"\" &lt; for a file in particular path \n    InputStream keyStoreData = new FileInputStream(\"keystore.jks\");\n    keyStore.load(keyStoreData, keyPassword);\n\n    Key key = keyStore.getKey(\"localhost\", keyPassword);\n\n    Certificate cert = keyStore.getCertificate(\"localhost\");\n\n    PublicKey publicKey = cert.getPublicKey();\n\n    KeyPair keyPair = new KeyPair(publicKey, (PrivateKey) key);\n\n    Signature sig = Signature.getInstance(\"SHA1WithRSA\");\n\n    sig.initSign(keyPair.getPrivate());\n    sig.update(data);\n    byte[] signatureBytes = sig.sign();\n    System.out.println(\"Signature:\" + Base64.getEncoder().encodeToString(signatureBytes));\n\n    sig.initVerify(keyPair.getPublic());\n    sig.update(data);\n\n    System.out.println(sig.verify(signatureBytes));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4674294,"reputation":309,"user_id":3785184,"display_name":"dilbertside"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553118554,"creation_date":1553118554,"answer_id":55270701,"question_id":906402,"body_markdown":"in a case of Elliptic Curve and answer the question *import an existing x509 certificate and private key in Java keystore*, you may want to have a look also to this thread [How to read EC Private key in java which is in .pem file format][1]\r\n\r\n\r\n  [1]: https://stackhttps://stackoverflow.com/a/55269325/3785184","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>in a case of Elliptic Curve and answer the question <em>import an existing x509 certificate and private key in Java keystore</em>, you may want to have a look also to this thread <a href=\"https://stackhttps://stackoverflow.com/a/55269325/3785184\" rel=\"nofollow noreferrer\">How to read EC Private key in java which is in .pem file format</a></p>\n"},{"comments":[{"owner":{"account_id":4080404,"reputation":195,"user_id":3379976,"display_name":"anotherDev"},"score":0,"creation_date":1657061036,"post_id":56666663,"comment_id":128718707,"body_markdown":"I created and installed a LetsEncrypt SSL onto Tomcat, thanks to this.","body":"I created and installed a LetsEncrypt SSL onto Tomcat, thanks to this."}],"tags":[],"owner":{"account_id":406441,"reputation":32619,"user_id":775954,"accept_rate":85,"display_name":"Matthias Braun"},"comment_count":1,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1684345973,"creation_date":1560943771,"answer_id":56666663,"question_id":906402,"body_markdown":"# Using Let&#39;s Encrypt certificates\r\n\r\nAssuming you&#39;ve created your certificates and private keys with [Let&#39;s Encrypt](https://letsencrypt.org/) in `/etc/letsencrypt/live/you.com`:\r\n\r\n## 1. Create a [PKCS #12](https://en.wikipedia.org/wiki/PKCS_12) file\r\n\r\n    openssl pkcs12 -export -in fullchain.pem -inkey privkey.pem -out pkcs.p12 \\\r\n            -name letsencrypt\r\n\r\nThis combines your SSL certificate `fullchain.pem` and your private key `privkey.pem` into a single file, `pkcs.p12`.\r\n\r\nYou&#39;ll be prompted for a password for `pkcs.p12`.\r\n\r\nThe `export` option specifies that a PKCS #12 file will be created rather than parsed (according to [the manual](https://linux.die.net/man/1/pkcs12)).\r\n\r\n## 2. Create the Java keystore\r\n\r\n    keytool -importkeystore -destkeystore keystore.jks -srckeystore pkcs.p12 \\\r\n            -srcstoretype PKCS12 -alias letsencrypt\r\n\r\nIf `keystore.jks` doesn&#39;t exist, it will be created containing the `pkcs.12` from the previous step. Otherwise, you&#39;ll import `pkcs.12` into the existing keystore.\r\n\r\n---\r\n\r\nThese instructions are derived from the [blog post](https://web.archive.org/web/20191231103924/https://maximilian-boehm.com/en-gb/blog/create-a-java-keystore-jks-from-lets-encrypt-certificates-1884000/) &quot;Create a Java Keystore (.JKS) from Let&#39;s Encrypt Certificates&quot; by Maximilian B&#246;hm.\r\n\r\n[Here&#39;s more](https://certbot.eff.org/docs/using.html#where-are-my-certificates) on the different kind of files in `/etc/letsencrypt/live/you.com/`.\r\n","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<h1>Using Let's Encrypt certificates</h1>\n<p>Assuming you've created your certificates and private keys with <a href=\"https://letsencrypt.org/\" rel=\"nofollow noreferrer\">Let's Encrypt</a> in <code>/etc/letsencrypt/live/you.com</code>:</p>\n<h2>1. Create a <a href=\"https://en.wikipedia.org/wiki/PKCS_12\" rel=\"nofollow noreferrer\">PKCS #12</a> file</h2>\n<pre><code>openssl pkcs12 -export -in fullchain.pem -inkey privkey.pem -out pkcs.p12 \\\n        -name letsencrypt\n</code></pre>\n<p>This combines your SSL certificate <code>fullchain.pem</code> and your private key <code>privkey.pem</code> into a single file, <code>pkcs.p12</code>.</p>\n<p>You'll be prompted for a password for <code>pkcs.p12</code>.</p>\n<p>The <code>export</code> option specifies that a PKCS #12 file will be created rather than parsed (according to <a href=\"https://linux.die.net/man/1/pkcs12\" rel=\"nofollow noreferrer\">the manual</a>).</p>\n<h2>2. Create the Java keystore</h2>\n<pre><code>keytool -importkeystore -destkeystore keystore.jks -srckeystore pkcs.p12 \\\n        -srcstoretype PKCS12 -alias letsencrypt\n</code></pre>\n<p>If <code>keystore.jks</code> doesn't exist, it will be created containing the <code>pkcs.12</code> from the previous step. Otherwise, you'll import <code>pkcs.12</code> into the existing keystore.</p>\n<hr />\n<p>These instructions are derived from the <a href=\"https://web.archive.org/web/20191231103924/https://maximilian-boehm.com/en-gb/blog/create-a-java-keystore-jks-from-lets-encrypt-certificates-1884000/\" rel=\"nofollow noreferrer\">blog post</a> &quot;Create a Java Keystore (.JKS) from Let's Encrypt Certificates&quot; by Maximilian Böhm.</p>\n<p><a href=\"https://certbot.eff.org/docs/using.html#where-are-my-certificates\" rel=\"nofollow noreferrer\">Here's more</a> on the different kind of files in <code>/etc/letsencrypt/live/you.com/</code>.</p>\n"},{"tags":[],"owner":{"account_id":6077039,"reputation":1004,"user_id":4744055,"display_name":"Manabu Tokunaga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624571279,"creation_date":1624571279,"answer_id":68123071,"question_id":906402,"body_markdown":"If you have received a combined cert and key in a single .pem file, like the MongoDB Atlas&#39; authentication, then,\r\n\r\nOpen the `pem` file with a text editor and split them into two files, for example `cert.pem` and `key.pem` (where you can make a split is very clear in the file) and then use the `openssl` command to create a single p12 format file like this:\r\n\r\n     openssl pkcs12 -export -out server.p12 -name test\\\r\n     -in cert.pem -inkey key.pem\r\n\r\nI am using Java 8 and as it turns out at least in Java 8 or later the resulting p12 (`server.p12`) is now the keystore file so you can use it directly without a need to use the `keytool` if you do not need to add any more certs to it.\r\n","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>If you have received a combined cert and key in a single .pem file, like the MongoDB Atlas' authentication, then,</p>\n<p>Open the <code>pem</code> file with a text editor and split them into two files, for example <code>cert.pem</code> and <code>key.pem</code> (where you can make a split is very clear in the file) and then use the <code>openssl</code> command to create a single p12 format file like this:</p>\n<pre><code> openssl pkcs12 -export -out server.p12 -name test\\\n -in cert.pem -inkey key.pem\n</code></pre>\n<p>I am using Java 8 and as it turns out at least in Java 8 or later the resulting p12 (<code>server.p12</code>) is now the keystore file so you can use it directly without a need to use the <code>keytool</code> if you do not need to add any more certs to it.</p>\n"}],"owner":{"account_id":7255,"reputation":3109,"user_id":12537,"display_name":"Aleksandar Ivanisevic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":628136,"favorite_count":0,"down_vote_count":0,"up_vote_count":290,"accepted_answer_id":907515,"answer_count":16,"score":290,"last_activity_date":1697647153,"creation_date":1243251241,"question_id":906402,"body_markdown":"I have this in an ActiveMQ config:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;sslContext&gt;\r\n            &lt;sslContext keyStore=&quot;file:/home/alex/work/amq/broker.ks&quot;  \r\n     keyStorePassword=&quot;password&quot; trustStore=&quot;file:${activemq.base}/conf/broker.ts&quot; \r\n     trustStorePassword=&quot;password&quot;/&gt;\r\n    &lt;/sslContext&gt;\r\n\r\n\r\nI have a pair of X.509 cert and a key file.\r\n\r\nHow do I import those two in order to use them in SSL and SSL+stomp connectors? All examples I could google always generate the key themselves, but I already have a key.\r\n\r\nI have tried\r\n\r\n    keytool -import  -keystore ./broker.ks -file mycert.crt\r\n\r\nbut this only imports the certificate and not the key file and results in\r\n\r\n    2009-05-25 13:16:24,270 [localhost:61612] ERROR TransportConnector - Could not accept connection : No available certificate or key corresponds to the SSL cipher suites which are enabled.\r\n\r\nI have tried concatenating the cert and the key but got the same result.\r\n\r\nHow do I import the key?\r\n","title":"How to import an existing X.509 certificate and private key in Java keystore to use in SSL?","body":"<p>I have this in an ActiveMQ config:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;sslContext&gt;\n        &lt;sslContext keyStore=\"file:/home/alex/work/amq/broker.ks\"  \n keyStorePassword=\"password\" trustStore=\"file:${activemq.base}/conf/broker.ts\" \n trustStorePassword=\"password\"/&gt;\n&lt;/sslContext&gt;\n</code></pre>\n\n<p>I have a pair of X.509 cert and a key file.</p>\n\n<p>How do I import those two in order to use them in SSL and SSL+stomp connectors? All examples I could google always generate the key themselves, but I already have a key.</p>\n\n<p>I have tried</p>\n\n<pre><code>keytool -import  -keystore ./broker.ks -file mycert.crt\n</code></pre>\n\n<p>but this only imports the certificate and not the key file and results in</p>\n\n<pre><code>2009-05-25 13:16:24,270 [localhost:61612] ERROR TransportConnector - Could not accept connection : No available certificate or key corresponds to the SSL cipher suites which are enabled.\n</code></pre>\n\n<p>I have tried concatenating the cert and the key but got the same result.</p>\n\n<p>How do I import the key?</p>\n"},{"tags":["java","spring-boot","yaml","spring-cloud","snakeyaml"],"answers":[{"tags":[],"owner":{"account_id":4305639,"reputation":500,"user_id":3518066,"accept_rate":57,"display_name":"nullpointer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697646584,"creation_date":1697646584,"answer_id":77318113,"question_id":77276529,"body_markdown":"It was a simple thing, the whole password string, as it had curly braces, needed to be in single quotes, so like: `&#39;{cipher}encrypted_password&#39;`.\r\n\r\nWhat threw me off was that it started complaining on the `url` line. The `url` line doesn&#39;t need to have single or double quotes.","title":"Parsing Exception on reading remote config from Github in a Spring cloud project","body":"<p>It was a simple thing, the whole password string, as it had curly braces, needed to be in single quotes, so like: <code>'{cipher}encrypted_password'</code>.</p>\n<p>What threw me off was that it started complaining on the <code>url</code> line. The <code>url</code> line doesn't need to have single or double quotes.</p>\n"}],"owner":{"account_id":4305639,"reputation":500,"user_id":3518066,"accept_rate":57,"display_name":"nullpointer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697646584,"creation_date":1697060347,"question_id":77276529,"body_markdown":"We have 2 micro services:\r\n\r\n**config-service** and **my-actual-service**\r\n\r\nWe have a separate Git project that has all the springboot/springcloud configurations.\r\n\r\n**my-actual-service** reaches out to **config-service** and **config-service** fetches the appropriate config from Github.\r\n\r\nThe config is loaded fine, but then it throws parsing error on the datasource section:\r\n\r\n        org.springframework.cloud.config.server.environment.FailedToConstructEnvironmentException: \r\n    Could not construct context for config=myconfig profile=dev label= includeOrigin=true; nested exception is while parsing a block mapping\r\n         in &#39;reader&#39;, line 3, column 5:\r\n                url: jdbc:oracle:thin:@myserver ...\r\n                ^\r\n        expected &lt;block end&gt;, but found &#39;&lt;scalar&gt;&#39;\r\n         in &#39;reader&#39;, line 5, column 23:\r\n                password: {cipher}encrypted_password ...\r\n                                  ^\r\n        \r\n                at org.springframework.cloud.config.server.environment.NativeEnvironmentRepository.findOne(NativeEnvironmentRepository.java:165) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\r\n                at org.springframework.cloud.config.server.environment.AbstractScmEnvironmentRepository.findOne(AbstractScmEnvironmentRepository.java:64) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\r\n                at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOneFromCandidate(MultipleJGitEnvironmentRepository.java:195) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\r\n                at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOne(MultipleJGitEnvironmentRepository.java:178) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\r\n                at org.springframework.cloud.config.server.environment.ObservationEnvironmentRepositoryWrapper.lambda$findOne$3(ObservationEnvironmentRepositoryWrapper.java:75) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\r\n\r\nThis is the config:\r\n\r\n    spring:\r\n      datasource:\r\n        url: &quot;jdbc:oracle:thin:@myserver:port:sid&quot;\r\n        username: USER\r\n        password: {cipher}encrypted_password\r\n\r\nCan&#39;t figure out what might be going on here. I tried the **url** with quotes, with double quotes and without any quotes with no change.\r\n\r\nWe are using Spring boot / cloud version: 3.0.2.","title":"Parsing Exception on reading remote config from Github in a Spring cloud project","body":"<p>We have 2 micro services:</p>\n<p><strong>config-service</strong> and <strong>my-actual-service</strong></p>\n<p>We have a separate Git project that has all the springboot/springcloud configurations.</p>\n<p><strong>my-actual-service</strong> reaches out to <strong>config-service</strong> and <strong>config-service</strong> fetches the appropriate config from Github.</p>\n<p>The config is loaded fine, but then it throws parsing error on the datasource section:</p>\n<pre><code>    org.springframework.cloud.config.server.environment.FailedToConstructEnvironmentException: \nCould not construct context for config=myconfig profile=dev label= includeOrigin=true; nested exception is while parsing a block mapping\n     in 'reader', line 3, column 5:\n            url: jdbc:oracle:thin:@myserver ...\n            ^\n    expected &lt;block end&gt;, but found '&lt;scalar&gt;'\n     in 'reader', line 5, column 23:\n            password: {cipher}encrypted_password ...\n                              ^\n    \n            at org.springframework.cloud.config.server.environment.NativeEnvironmentRepository.findOne(NativeEnvironmentRepository.java:165) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\n            at org.springframework.cloud.config.server.environment.AbstractScmEnvironmentRepository.findOne(AbstractScmEnvironmentRepository.java:64) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\n            at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOneFromCandidate(MultipleJGitEnvironmentRepository.java:195) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\n            at org.springframework.cloud.config.server.environment.MultipleJGitEnvironmentRepository.findOne(MultipleJGitEnvironmentRepository.java:178) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\n            at org.springframework.cloud.config.server.environment.ObservationEnvironmentRepositoryWrapper.lambda$findOne$3(ObservationEnvironmentRepositoryWrapper.java:75) ~[spring-cloud-config-server-4.0.1.jar:4.0.1]\n</code></pre>\n<p>This is the config:</p>\n<pre><code>spring:\n  datasource:\n    url: &quot;jdbc:oracle:thin:@myserver:port:sid&quot;\n    username: USER\n    password: {cipher}encrypted_password\n</code></pre>\n<p>Can't figure out what might be going on here. I tried the <strong>url</strong> with quotes, with double quotes and without any quotes with no change.</p>\n<p>We are using Spring boot / cloud version: 3.0.2.</p>\n"},{"tags":["java","multithreading","grpc","quarkus"],"comments":[{"owner":{"account_id":16676962,"reputation":1021,"user_id":12176221,"display_name":"Jacouille"},"score":0,"creation_date":1658934200,"post_id":73137591,"comment_id":129176485,"body_markdown":"Could you edit to add your dependencies please ?","body":"Could you edit to add your dependencies please ?"},{"owner":{"account_id":18801838,"reputation":23,"user_id":13711984,"display_name":"Mountain65"},"score":0,"creation_date":1658990023,"post_id":73137591,"comment_id":129189882,"body_markdown":"I have added more informations !","body":"I have added more informations !"}],"answers":[{"comments":[{"owner":{"account_id":18801838,"reputation":23,"user_id":13711984,"display_name":"Mountain65"},"score":0,"creation_date":1658990107,"post_id":73147683,"comment_id":129189912,"body_markdown":"Yes i agree, but quarkus is compiling this for me with &#39;mvn compile&#39;, do you think that i could parameter this ?","body":"Yes i agree, but quarkus is compiling this for me with &#39;mvn compile&#39;, do you think that i could parameter this ?"},{"owner":{"account_id":18801838,"reputation":23,"user_id":13711984,"display_name":"Mountain65"},"score":0,"creation_date":1658991013,"post_id":73147683,"comment_id":129190167,"body_markdown":"In fact, maven* compile the interface and I implement it (so i&#39;m not choosing the return type)","body":"In fact, maven* compile the interface and I implement it (so i&#39;m not choosing the return type)"},{"owner":{"account_id":18801838,"reputation":23,"user_id":13711984,"display_name":"Mountain65"},"score":0,"creation_date":1658997215,"post_id":73147683,"comment_id":129192196,"body_markdown":"It seems that quarkus use Uni&lt;O&gt; for the return type of a oneToOne grpc communication when it compile the proto file, that means that i can&#39;t change from Uni&lt;MerchantGRPC&gt; to MerchantGRPC.","body":"It seems that quarkus use Uni&lt;O&gt; for the return type of a oneToOne grpc communication when it compile the proto file, that means that i can&#39;t change from Uni&lt;MerchantGRPC&gt; to MerchantGRPC."}],"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658986198,"creation_date":1658986198,"answer_id":73147683,"question_id":73137591,"body_markdown":"There is no goot reason do use a `Uni` in this case. It would be far easier to just do:\r\n\r\n    @Override\r\n    public MerchantGRPC findById(idMerchantGRPC request) {\r\n\r\n        // Find in database the merchant (getting error in this)\r\n        MerchantDTO merchantDTO = merchantService.findById(request.getId());\r\n\r\n        return fromMerchantDTOtoMerchantGRPC(merchantDTO);\r\n    }","title":"BlockingOperationNotAllowedException - You have attempted to perform a blocking operation on a IO thread","body":"<p>There is no goot reason do use a <code>Uni</code> in this case. It would be far easier to just do:</p>\n<pre><code>@Override\npublic MerchantGRPC findById(idMerchantGRPC request) {\n\n    // Find in database the merchant (getting error in this)\n    MerchantDTO merchantDTO = merchantService.findById(request.getId());\n\n    return fromMerchantDTOtoMerchantGRPC(merchantDTO);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18801838,"reputation":23,"user_id":13711984,"display_name":"Mountain65"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659002465,"creation_date":1659002364,"answer_id":73150868,"question_id":73137591,"body_markdown":"So I decided to use the **default gRPC API** instead of the Mutiny API because ``` @Blocked ``` don&#39;t seems to change the thread to worker pool for my method ([Blocked usage][1]).\r\nAfter some changings I got the same error but it works when i used ``` @Blocked ``` on the method (this time the annotation seems to do his job). \r\n\r\n\r\n  [1]: https://quarkus.io/guides/grpc-service-implementation","title":"BlockingOperationNotAllowedException - You have attempted to perform a blocking operation on a IO thread","body":"<p>So I decided to use the <strong>default gRPC API</strong> instead of the Mutiny API because <code>@Blocked</code> don't seems to change the thread to worker pool for my method (<a href=\"https://quarkus.io/guides/grpc-service-implementation\" rel=\"nofollow noreferrer\">Blocked usage</a>).\nAfter some changings I got the same error but it works when i used <code>@Blocked</code> on the method (this time the annotation seems to do his job).</p>\n"},{"tags":[],"owner":{"account_id":3939508,"reputation":165,"user_id":3254545,"display_name":"Adriano Moreira"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697645758,"creation_date":1697645758,"answer_id":77318021,"question_id":73137591,"body_markdown":"To use Uni&lt;?&gt; you need to emmit to a executor, to run in a work-thread and not in a main event loop thread, see a sample below.\r\n\r\nproduct.proto:\r\n\r\n    service ProductService {\r\n      rpc FindById(FindRequest) returns (ProductDTO);\r\n      rpc CreateProduct(CreateRequest) returns (ProductDTO);\r\n    }\r\n    \r\n    message FindRequest {\r\n      string id = 1;\r\n    }\r\n    \r\n    message CreateRequest {\r\n      string name = 1;\r\n    }\r\n    \r\n    message ProductDTO {\r\n      string id = 1;\r\n      string name = 2;\r\n    }\r\n\r\n\r\n\r\n\r\nProductRepository.java\r\n\r\n    @ApplicationScoped\r\n    public class ProductRepository implements PanacheRepositoryBase&lt;ProductEntity, Long&gt; {\r\n    }\r\n\r\nMyProductService.java\r\n\r\n    @ApplicationScoped\r\n    public class MyProductService {\r\n    \r\n        @Inject\r\n        ProductRepository repository;\r\n    \r\n        @Transactional\r\n        public ProductEntity create(String name) {\r\n            Log.infov(&quot;into create&quot;);\r\n            var pe = new ProductEntity();\r\n            pe.setName(name);\r\n            repository.persist(pe);\r\n            return pe;\r\n        }\r\n    \r\n        public ProductEntity findById(Long id) {\r\n            return repository.findById(id);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nGRPCProductService.java \r\n\r\n    @GrpcService\r\n    public class GRPCProductService implements ProductService {\r\n\r\n   \r\n\r\n        @Inject\r\n        MyProductService service;\r\n    \r\n        private ExecutorService executor = Executors.newFixedThreadPool(4);\r\n    \r\n        @Override\r\n        public Uni&lt;Product.ProductDTO&gt; findById(Product.FindRequest request) {\r\n            return Uni.createFrom()\r\n                    .item(request)\r\n                    .emitOn(executor) //   &lt;-- HERE\r\n                    .map((r) -&gt; {\r\n                        var entity = service.findById(Long.parseLong(r.getId()));\r\n                        return Product.ProductDTO.newBuilder()\r\n                                .setId(entity.getId().toString())\r\n                                .setName(entity.getName())\r\n                                .build();\r\n                    });\r\n        }\r\n    \r\n        @Override\r\n        public Uni&lt;Product.ProductDTO&gt; createProduct(Product.CreateRequest request) {\r\n            Log.infov(&quot;into createProduct&quot;);\r\n            return Uni.createFrom()\r\n                    .item(request)\r\n                    .emitOn(executor) //   &lt;-- HERE\r\n                    .map(r -&gt; {\r\n                        Log.infov(&quot;into createProduct map&quot;);\r\n                        var entity = service.create(r.getName());\r\n                        return Product.ProductDTO.newBuilder()\r\n                                .setId(entity.getId().toString())\r\n                                .setName(entity.getName())\r\n                                .build();\r\n                    });\r\n        }\r\n    }\r\n\r\n\r\nlog output from this sample:\r\n\r\n    2023-10-18 13:16:33,082 INFO  [dem.pro.GRPCProductService] (vert.x-eventloop-thread-0) into createProduct\r\n    2023-10-18 13:16:33,084 INFO  [dem.pro.GRPCProductService] (pool-7-thread-1) into createProduct map\r\n    2023-10-18 13:16:33,099 INFO  [dem.pro.MyProductService] (pool-7-thread-1) into create","title":"BlockingOperationNotAllowedException - You have attempted to perform a blocking operation on a IO thread","body":"<p>To use Uni&lt;?&gt; you need to emmit to a executor, to run in a work-thread and not in a main event loop thread, see a sample below.</p>\n<p>product.proto:</p>\n<pre><code>service ProductService {\n  rpc FindById(FindRequest) returns (ProductDTO);\n  rpc CreateProduct(CreateRequest) returns (ProductDTO);\n}\n\nmessage FindRequest {\n  string id = 1;\n}\n\nmessage CreateRequest {\n  string name = 1;\n}\n\nmessage ProductDTO {\n  string id = 1;\n  string name = 2;\n}\n</code></pre>\n<p>ProductRepository.java</p>\n<pre><code>@ApplicationScoped\npublic class ProductRepository implements PanacheRepositoryBase&lt;ProductEntity, Long&gt; {\n}\n</code></pre>\n<p>MyProductService.java</p>\n<pre><code>@ApplicationScoped\npublic class MyProductService {\n\n    @Inject\n    ProductRepository repository;\n\n    @Transactional\n    public ProductEntity create(String name) {\n        Log.infov(&quot;into create&quot;);\n        var pe = new ProductEntity();\n        pe.setName(name);\n        repository.persist(pe);\n        return pe;\n    }\n\n    public ProductEntity findById(Long id) {\n        return repository.findById(id);\n    }\n\n}\n</code></pre>\n<p>GRPCProductService.java</p>\n<pre><code>@GrpcService\npublic class GRPCProductService implements ProductService {\n\n\n\n    @Inject\n    MyProductService service;\n\n    private ExecutorService executor = Executors.newFixedThreadPool(4);\n\n    @Override\n    public Uni&lt;Product.ProductDTO&gt; findById(Product.FindRequest request) {\n        return Uni.createFrom()\n                .item(request)\n                .emitOn(executor) //   &lt;-- HERE\n                .map((r) -&gt; {\n                    var entity = service.findById(Long.parseLong(r.getId()));\n                    return Product.ProductDTO.newBuilder()\n                            .setId(entity.getId().toString())\n                            .setName(entity.getName())\n                            .build();\n                });\n    }\n\n    @Override\n    public Uni&lt;Product.ProductDTO&gt; createProduct(Product.CreateRequest request) {\n        Log.infov(&quot;into createProduct&quot;);\n        return Uni.createFrom()\n                .item(request)\n                .emitOn(executor) //   &lt;-- HERE\n                .map(r -&gt; {\n                    Log.infov(&quot;into createProduct map&quot;);\n                    var entity = service.create(r.getName());\n                    return Product.ProductDTO.newBuilder()\n                            .setId(entity.getId().toString())\n                            .setName(entity.getName())\n                            .build();\n                });\n    }\n}\n</code></pre>\n<p>log output from this sample:</p>\n<pre><code>2023-10-18 13:16:33,082 INFO  [dem.pro.GRPCProductService] (vert.x-eventloop-thread-0) into createProduct\n2023-10-18 13:16:33,084 INFO  [dem.pro.GRPCProductService] (pool-7-thread-1) into createProduct map\n2023-10-18 13:16:33,099 INFO  [dem.pro.MyProductService] (pool-7-thread-1) into create\n</code></pre>\n"}],"owner":{"account_id":18801838,"reputation":23,"user_id":13711984,"display_name":"Mountain65"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1360,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73150868,"answer_count":3,"score":1,"last_activity_date":1697645758,"creation_date":1658923383,"question_id":73137591,"body_markdown":"I&#39;m making a GRPC service in my quarkus app and when I try to make a request on my method I get this error:\r\n\r\n```UNKNOWN: io.quarkus.runtime.BlockingOperationNotAllowedException - You have attempted to perform a blocking operation on a IO thread. This is not allowed, as blocking the IO thread will cause major performance issues with your application. If you want to perform blocking EntityManager operations make sure you are doing it from a worker thread.```\r\n\r\nSo I read in this [article][1] that I should add the annotation ```@Blocking``` to use the worker thread.\r\n\r\nAfter putting it, i got the same error.\r\n\r\nThere is my code:\r\n\r\n**GRPCService**\r\n```    \r\n    @Override\r\n    @Blocking\r\n    public Uni&lt;MerchantGRPC&gt; findById(idMerchantGRPC request) {\r\n\r\n        // Find in database the merchant (getting error in this)\r\n        MerchantDTO merchantDTO =     merchantService.findById(request.getId());\r\n\r\n        return Uni.createFrom().item(fromMerchantDTOtoMerchantGRPC(merchantDTO));\r\n    }\r\n ``` \r\n\r\n**Edit**\r\n\r\n**Service in my proto**\r\n```\r\n    service Greeter {\r\n      rpc SayHello (HelloRequest) returns (HelloReply) {}\r\n      rpc findById (idMerchantGRPC) returns (MerchantGRPC) {}\r\n    }\r\n```\r\n**Dependencies**\r\n```\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-arc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-resteasy-reactive&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-junit5&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n          &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-resteasy-reactive&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-smallrye-openapi&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-hibernate-orm-panache&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-jdbc-mysql&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-resteasy-reactive-jackson&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5.2.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5.2.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-hibernate-validator&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-junit5-mockito&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n          &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-grpc&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nDo you have any idea that could help ?\r\n\r\n  [1]: https://quarkus.io/blog/resteasy-reactive-smart-dispatch/#:~:text=You%20have%20attempted%20to%20perform,lang.","title":"BlockingOperationNotAllowedException - You have attempted to perform a blocking operation on a IO thread","body":"<p>I'm making a GRPC service in my quarkus app and when I try to make a request on my method I get this error:</p>\n<p><code>UNKNOWN: io.quarkus.runtime.BlockingOperationNotAllowedException - You have attempted to perform a blocking operation on a IO thread. This is not allowed, as blocking the IO thread will cause major performance issues with your application. If you want to perform blocking EntityManager operations make sure you are doing it from a worker thread.</code></p>\n<p>So I read in this <a href=\"https://quarkus.io/blog/resteasy-reactive-smart-dispatch/#:%7E:text=You%20have%20attempted%20to%20perform,lang.\" rel=\"nofollow noreferrer\">article</a> that I should add the annotation <code>@Blocking</code> to use the worker thread.</p>\n<p>After putting it, i got the same error.</p>\n<p>There is my code:</p>\n<p><strong>GRPCService</strong></p>\n<pre><code>    @Override\n    @Blocking\n    public Uni&lt;MerchantGRPC&gt; findById(idMerchantGRPC request) {\n\n        // Find in database the merchant (getting error in this)\n        MerchantDTO merchantDTO =     merchantService.findById(request.getId());\n\n        return Uni.createFrom().item(fromMerchantDTOtoMerchantGRPC(merchantDTO));\n    }\n</code></pre>\n<p><strong>Edit</strong></p>\n<p><strong>Service in my proto</strong></p>\n<pre><code>    service Greeter {\n      rpc SayHello (HelloRequest) returns (HelloReply) {}\n      rpc findById (idMerchantGRPC) returns (MerchantGRPC) {}\n    }\n</code></pre>\n<p><strong>Dependencies</strong></p>\n<pre><code>    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-arc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-resteasy-reactive&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-junit5&lt;/artifactId&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n          &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-resteasy-reactive&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-smallrye-openapi&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-hibernate-orm-panache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-jdbc-mysql&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-resteasy-reactive-jackson&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n          &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n          &lt;version&gt;1.5.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n          &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n          &lt;version&gt;1.5.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-hibernate-validator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-junit5-mockito&lt;/artifactId&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n          &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n          &lt;artifactId&gt;quarkus-grpc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Do you have any idea that could help ?</p>\n"},{"tags":["java","text-files"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1542316363,"post_id":53327811,"comment_id":93536260,"body_markdown":"*Where* did you add those two lines of code?","body":"<i>Where</i> did you add those two lines of code?"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":2,"creation_date":1542316424,"post_id":53327811,"comment_id":93536284,"body_markdown":"Try using [`Files.delete(Path path)`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#delete-java.nio.file.Path-) and [`Files.move(Path source, Path target)`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#move-java.nio.file.Path-java.nio.file.Path-java.nio.file.CopyOption...-) instead, since they will throw exception if operation fails, explaining why, rather than just return an uninformative `false` value like the old [`File`](https://docs.oracle.com/javase/8/docs/api/java/io/File.html) methods do.","body":"Try using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#delete-java.nio.file.Path-\" rel=\"nofollow noreferrer\"><code>Files.delete(Path path)</code></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#move-java.nio.file.Path-java.nio.file.Path-java.nio.file.CopyOption...-\" rel=\"nofollow noreferrer\"><code>Files.move(Path source, Path target)</code></a> instead, since they will throw exception if operation fails, explaining why, rather than just return an uninformative <code>false</code> value like the old <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/File.html\" rel=\"nofollow noreferrer\"><code>File</code></a> methods do."},{"owner":{"account_id":7122695,"reputation":321,"user_id":5446726,"display_name":"Fotic"},"score":0,"creation_date":1542317850,"post_id":53327811,"comment_id":93536874,"body_markdown":"@Andreas i add them after  `inputFile.close();outputFile.close();` .Do you mean like that `Files.delete(&quot;src/inware/users.txt&quot;);Files.move(&quot;src/inware/users.txt&quot;,&quot;src/inware/usersT.txt&quot;);` .Still not working im getting error","body":"@Andreas i add them after  <code>inputFile.close();outputFile.close();</code> .Do you mean like that <code>Files.delete(&quot;src&#47;inware&#47;users.txt&quot;);Files.move(&quot;src&#47;inware&#47;&zwnj;&#8203;users.txt&quot;,&quot;src&#47;inwa&zwnj;&#8203;re&#47;usersT.txt&quot;);</code> .Still not working im getting error"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1542320966,"post_id":53327811,"comment_id":93538009,"body_markdown":"Did you look at the links Andreas provided?  The arguments must be Path objects, not Strings.","body":"Did you look at the links Andreas provided?  The arguments must be Path objects, not Strings."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1542328909,"post_id":53327811,"comment_id":93540025,"body_markdown":"First, you can&#39;t do `inputFile.delete()` since `inputFile` is a `BufferedReader`, not a `File`. --- Instead of `new File(inputFileName).delete()`, you use `Files.delete(Paths.get(inputFileName))`.","body":"First, you can&#39;t do <code>inputFile.delete()</code> since <code>inputFile</code> is a <code>BufferedReader</code>, not a <code>File</code>. --- Instead of <code>new File(inputFileName).delete()</code>, you use <code>Files.delete(Paths.get(inputFileName))</code>."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1542328953,"post_id":53327811,"comment_id":93540031,"body_markdown":"*FYI:* Since you&#39;re using try-with-resources, don&#39;t close the streams yourself. Move the delete and rename outside the `try` block.","body":"<i>FYI:</i> Since you&#39;re using try-with-resources, don&#39;t close the streams yourself. Move the delete and rename outside the <code>try</code> block."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1542366444,"post_id":53327811,"comment_id":93551938,"body_markdown":"can&#39;t detect anything related to javafx so removed the tag","body":"can&#39;t detect anything related to javafx so removed the tag"}],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1542330020,"creation_date":1542330020,"answer_id":53329985,"question_id":53327811,"body_markdown":"Use the new File NIO.2 API instead of the old antiquated File I/O API.\r\n\r\nThis means that you should use [`Files.delete(Path path)`][1] and [`Files.move(Path source, Path target)`][2] instead, since they will throw exception if operation fails, explaining **why**, rather than just return an uninformative `false` value like the old [`File`][3] methods do.\r\n\r\nAlso, since you&#39;re using *try-with-resources*, don&#39;t close the streams yourself. Close the `try` block at the time you want the resources closed.\r\n\r\nChange the code to:\r\n\r\n\timport java.io.*;\r\n\timport java.nio.file.*;\r\n\timport java.util.logging.*;\r\n\r\n&lt;!-- --&gt;\r\n\r\n\tPath inputFile = Paths.get(&quot;src/inware/users.txt&quot;);\r\n\tPath outputFile = Paths.get(&quot;src/inware/usersT.txt&quot;);\r\n\ttry {\r\n\t\ttry (BufferedReader in = Files.newBufferedReader(inputFile);\r\n\t\t     PrintWriter out = new PrintWriter(Files.newBufferedWriter(outputFile))) {\r\n\t\t\tfor (String line; (line = in.readLine()) != null; ) {\r\n\t\t\t\tline = line.trim();\r\n\t\t\t\tif (! line.isEmpty())\r\n\t\t\t\t\tout.println(line);\r\n\t\t\t}\r\n\t\t}\r\n\t\tFiles.delete(inputFile);\r\n\t\tFiles.move(inputFile, outputFile);\r\n\t} catch (IOException ex) {\r\n\t\tLogger.getLogger(ManageStudentController.class.getName()).log(Level.SEVERE, null, ex);\r\n\t}\r\n\r\nIf the delete+rename fails, you&#39;ll now know why.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#delete-java.nio.file.Path-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#move-java.nio.file.Path-java.nio.file.Path-java.nio.file.CopyOption...-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/io/File.html","title":"How to rename the temp file to original text file?","body":"<p>Use the new File NIO.2 API instead of the old antiquated File I/O API.</p>\n\n<p>This means that you should use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#delete-java.nio.file.Path-\" rel=\"nofollow noreferrer\"><code>Files.delete(Path path)</code></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#move-java.nio.file.Path-java.nio.file.Path-java.nio.file.CopyOption...-\" rel=\"nofollow noreferrer\"><code>Files.move(Path source, Path target)</code></a> instead, since they will throw exception if operation fails, explaining <strong>why</strong>, rather than just return an uninformative <code>false</code> value like the old <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/File.html\" rel=\"nofollow noreferrer\"><code>File</code></a> methods do.</p>\n\n<p>Also, since you're using <em>try-with-resources</em>, don't close the streams yourself. Close the <code>try</code> block at the time you want the resources closed.</p>\n\n<p>Change the code to:</p>\n\n<pre><code>import java.io.*;\nimport java.nio.file.*;\nimport java.util.logging.*;\n</code></pre>\n\n\n\n<pre><code>Path inputFile = Paths.get(\"src/inware/users.txt\");\nPath outputFile = Paths.get(\"src/inware/usersT.txt\");\ntry {\n    try (BufferedReader in = Files.newBufferedReader(inputFile);\n         PrintWriter out = new PrintWriter(Files.newBufferedWriter(outputFile))) {\n        for (String line; (line = in.readLine()) != null; ) {\n            line = line.trim();\n            if (! line.isEmpty())\n                out.println(line);\n        }\n    }\n    Files.delete(inputFile);\n    Files.move(inputFile, outputFile);\n} catch (IOException ex) {\n    Logger.getLogger(ManageStudentController.class.getName()).log(Level.SEVERE, null, ex);\n}\n</code></pre>\n\n<p>If the delete+rename fails, you'll now know why.</p>\n"},{"tags":[],"owner":{"account_id":7122695,"reputation":321,"user_id":5446726,"display_name":"Fotic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1542354690,"creation_date":1542354690,"answer_id":53333543,"question_id":53327811,"body_markdown":"I found better solution that fix my problem:\r\n\r\n        Path p = Paths.get(&quot;src&quot;, &quot;inware&quot;, &quot;users.txt&quot;);\r\n        try {\r\n            Path tempFile = Files.createTempFile(p.getParent(), &quot;usersTemp&quot;, &quot;.txt&quot;);\r\n            try (BufferedReader in = Files.newBufferedReader(p);\r\n                 PrintWriter out = new PrintWriter(Files.newBufferedWriter(tempFile))) {\r\n                for (String line; (line = in.readLine()) != null;) {\r\n                    line = line.trim();\r\n                    if (!line.isEmpty()) {\r\n                        out.println(line);\r\n                    }\r\n                }\r\n            }\r\n            Files.copy(tempFile, p, StandardCopyOption.REPLACE_EXISTING);\r\n            Files.delete(tempFile);\r\n            \r\n        } catch (IOException ex) {\r\n            Logger.getLogger(ManageStudentController.class.getName()).log(Level.SEVERE, null, ex);\r\n        }","title":"How to rename the temp file to original text file?","body":"<p>I found better solution that fix my problem:</p>\n\n<pre><code>    Path p = Paths.get(\"src\", \"inware\", \"users.txt\");\n    try {\n        Path tempFile = Files.createTempFile(p.getParent(), \"usersTemp\", \".txt\");\n        try (BufferedReader in = Files.newBufferedReader(p);\n             PrintWriter out = new PrintWriter(Files.newBufferedWriter(tempFile))) {\n            for (String line; (line = in.readLine()) != null;) {\n                line = line.trim();\n                if (!line.isEmpty()) {\n                    out.println(line);\n                }\n            }\n        }\n        Files.copy(tempFile, p, StandardCopyOption.REPLACE_EXISTING);\n        Files.delete(tempFile);\n\n    } catch (IOException ex) {\n        Logger.getLogger(ManageStudentController.class.getName()).log(Level.SEVERE, null, ex);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13089940,"reputation":133,"user_id":10491111,"display_name":"Carlos No&#233;"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697644968,"creation_date":1697625260,"answer_id":77315529,"question_id":53327811,"body_markdown":"    File tempDir = new File(System.getProperty(&quot;java.io.tmpdir&quot;));\r\n    File tempFile = new File(tempDir, name + &quot;.&quot; + imageType);","title":"How to rename the temp file to original text file?","body":"<pre><code>File tempDir = new File(System.getProperty(&quot;java.io.tmpdir&quot;));\nFile tempFile = new File(tempDir, name + &quot;.&quot; + imageType);\n</code></pre>\n"}],"owner":{"account_id":7122695,"reputation":321,"user_id":5446726,"display_name":"Fotic"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3779,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"accepted_answer_id":53333543,"answer_count":3,"score":-4,"last_activity_date":1697644968,"creation_date":1542315506,"question_id":53327811,"body_markdown":"Hello my code basically **delete the empty lines from txt file**, but i want at the end temp file take the originals name.\r\n\r\n        String inputFileName = &quot;src/inware/users.txt&quot;;\r\n        String outputFileName = &quot;src/inware/usersT.txt&quot;;\r\n\r\n        try (BufferedReader inputFile = new BufferedReader(new FileReader(inputFileName));\r\n             PrintWriter outputFile = new PrintWriter(new FileWriter(outputFileName))) {\r\n            String lineOfText;\r\n            while ((lineOfText = inputFile.readLine()) != null) {\r\n                lineOfText = lineOfText.trim();\r\n                if (!lineOfText.isEmpty()) {\r\n                    outputFile.println(lineOfText);\r\n                }\r\n            }\r\n            inputFile.close();\r\n            outputFile.close();\r\n\r\n            inputFile.delete();\r\n            outputFile.renameTo(inputFile);\r\n          \r\n        } catch (IOException ex) {\r\n            Logger.getLogger(ManageStudentController.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n\r\nI try\r\n\r\n            inputFile.delete();\r\n            outputFile.renameTo(inputFile);\r\n\r\nBut is not working... Any solution??","title":"How to rename the temp file to original text file?","body":"<p>Hello my code basically <strong>delete the empty lines from txt file</strong>, but i want at the end temp file take the originals name.</p>\n\n<pre><code>    String inputFileName = \"src/inware/users.txt\";\n    String outputFileName = \"src/inware/usersT.txt\";\n\n    try (BufferedReader inputFile = new BufferedReader(new FileReader(inputFileName));\n         PrintWriter outputFile = new PrintWriter(new FileWriter(outputFileName))) {\n        String lineOfText;\n        while ((lineOfText = inputFile.readLine()) != null) {\n            lineOfText = lineOfText.trim();\n            if (!lineOfText.isEmpty()) {\n                outputFile.println(lineOfText);\n            }\n        }\n        inputFile.close();\n        outputFile.close();\n\n        inputFile.delete();\n        outputFile.renameTo(inputFile);\n\n    } catch (IOException ex) {\n        Logger.getLogger(ManageStudentController.class.getName()).log(Level.SEVERE, null, ex);\n    }\n</code></pre>\n\n<p>I try</p>\n\n<pre><code>        inputFile.delete();\n        outputFile.renameTo(inputFile);\n</code></pre>\n\n<p>But is not working... Any solution??</p>\n"},{"tags":["java","spring-boot","asynchronous","websocket","virtual-threads"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1697661207,"post_id":77317750,"comment_id":136309542,"body_markdown":"FYI, `java.util.Timer` &amp; `TimerTask` are legacy, supplanted by the Executors framework. So noted in their Javadoc.","body":"FYI, <code>java.util.Timer</code> &amp; <code>TimerTask</code> are legacy, supplanted by the Executors framework. So noted in their Javadoc."}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1697647583,"post_id":77317850,"comment_id":136307337,"body_markdown":"It’s a weird idea anyway, to use the outdated-for-two-decades-now `java.util.TimerTask` to schedule the invocation of a method on the timer’s thread and then try to inject an asynchronous execution with a virtual thread at the point where the platform thread already exists. This subverts both, the concept of virtual threads and the logic of the timer. I don’t know Spring Boot’s recommended approach for scheduling a repeated task. But for virtual threads, it’s worth keeping in mind that their point is the simplicity, e.g. create one virtual thread which just calls `pushCount`/`sleep` in a loop…","body":"It’s a weird idea anyway, to use the outdated-for-two-decades-now <code>java.util.TimerTask</code> to schedule the invocation of a method on the timer’s thread and then try to inject an asynchronous execution with a virtual thread at the point where the platform thread already exists. This subverts both, the concept of virtual threads and the logic of the timer. I don’t know Spring Boot’s recommended approach for scheduling a repeated task. But for virtual threads, it’s worth keeping in mind that their point is the simplicity, e.g. create one virtual thread which just calls <code>pushCount</code>/<code>sleep</code> in a loop…"},{"owner":{"account_id":24275549,"reputation":21,"user_id":18222899,"display_name":"liang li"},"score":0,"creation_date":1697676508,"post_id":77317850,"comment_id":136311074,"body_markdown":"As I mentioned earlier，My original intend is to periodically send data to all WebSocket sessions connected to my server. And in my code logic, sending the data involves querying data, which includes a significant amount of I/O operations. This is why I&#39;m determined to use virtual threads. So, I&#39;d like to know if there&#39;s a better way to achieve my goal.","body":"As I mentioned earlier，My original intend is to periodically send data to all WebSocket sessions connected to my server. And in my code logic, sending the data involves querying data, which includes a significant amount of I/O operations. This is why I&#39;m determined to use virtual threads. So, I&#39;d like to know if there&#39;s a better way to achieve my goal."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697703351,"post_id":77317850,"comment_id":136313893,"body_markdown":"@liangli The Spring Boot way would be to use `@Scheduled` for that.","body":"@liangli The Spring Boot way would be to use <code>@Scheduled</code> for that."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697703486,"post_id":77317850,"comment_id":136313921,"body_markdown":"@Holger True, I hadn&#39;t even considered that part (the Spring/Spring Boot way is to use `@Scheduled`, e.g. see [Task Execution and Scheduling](https://docs.spring.io/spring-framework/reference/integration/scheduling.html)).","body":"@Holger True, I hadn&#39;t even considered that part (the Spring/Spring Boot way is to use <code>@Scheduled</code>, e.g. see <a href=\"https://docs.spring.io/spring-framework/reference/integration/scheduling.html\" rel=\"nofollow noreferrer\">Task Execution and Scheduling</a>)."}],"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697644425,"creation_date":1697644094,"answer_id":77317850,"question_id":77317750,"body_markdown":"You&#39;re calling `pushCount` from within the class (or more specifically an anonymous inner class of `TestTask`), and then the `Async` annotation has no effect. Such annotations usually *only* work when calling methods from outside on a bean, not when calling from within that bean. That is because these effects are generally achieved by enhancing the object by wrapping it in a proxy that does the actual action of running the method call async, but if you call it within a class, you&#39;re calling the method directly on the original object, and not on the wrapper which performs the action in an asynchronous manner.\r\n\r\nThis BTW also applies to your use in the controller, but there you don&#39;t notice it because you have configured the embedded Tomcat to handle requests on virtual threads as well, so you see the result you&#39;re looking for, but the method call is not actually async.\r\n\r\nThe solution is to create a separate bean for the async method, and inject/autowire that into `TestTask` (or alternatively, to create a separate component for `pushStatus()` and inject `TestTask` into that and call the async method on that test task instance). You need to do something similar for your controller if you actually want `task()` to be really executed async.","title":"Why can&#39;t I start an asynchronous task in a scheduled task using a virtual thread?","body":"<p>You're calling <code>pushCount</code> from within the class (or more specifically an anonymous inner class of <code>TestTask</code>), and then the <code>Async</code> annotation has no effect. Such annotations usually <em>only</em> work when calling methods from outside on a bean, not when calling from within that bean. That is because these effects are generally achieved by enhancing the object by wrapping it in a proxy that does the actual action of running the method call async, but if you call it within a class, you're calling the method directly on the original object, and not on the wrapper which performs the action in an asynchronous manner.</p>\n<p>This BTW also applies to your use in the controller, but there you don't notice it because you have configured the embedded Tomcat to handle requests on virtual threads as well, so you see the result you're looking for, but the method call is not actually async.</p>\n<p>The solution is to create a separate bean for the async method, and inject/autowire that into <code>TestTask</code> (or alternatively, to create a separate component for <code>pushStatus()</code> and inject <code>TestTask</code> into that and call the async method on that test task instance). You need to do something similar for your controller if you actually want <code>task()</code> to be really executed async.</p>\n"}],"owner":{"account_id":24275549,"reputation":21,"user_id":18222899,"display_name":"liang li"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697644425,"creation_date":1697643316,"question_id":77317750,"body_markdown":"I am using Java 21 and Spring Boot 2.7.3. I used java.util.Timer to create a scheduled task, and then called the asynchronous method annotated with @Async annotation in this scheduled task. Then I configured the asynchronous task processor for Spring Boot to be a virtual Thread Executor, finally I printed Thread.currentThread.isVirtual() in the code marked with @Async, and found that false was output. The sample code is as follows (the original intention of the following code is actually to periodically send data to all WebSocket sessions connected to my server):\r\n\r\n```java\r\n@Slf4j\r\n@Component\r\npublic class TestTask{\r\n\r\n    @PostConstruct\r\n    public void pushStatus() {\r\n        Timer timer = new Timer();\r\n        timer.schedule(new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                countWebSocketsMap.forEach((k, v) -&gt; {\r\n                    pushCount(k,v);\r\n                });\r\n            }\r\n        }, 0, 500);\r\n     }\r\n\r\n     @Async\r\n     public void pushCount(String sessionId, WebSocketSession session) {\r\n         log.info(&quot;{}&quot;,Thread.currentThread().isVirtual());\r\n     }\r\n}\r\n```\r\nI bound the virtual thread for Spring Boot async tasks like follows:\r\n```java\r\n@EnableAsync\r\n@Configuration\r\n@ConditionalOnProperty(\r\n        value = &quot;spring.thread-executor&quot;,\r\n        havingValue = &quot;virtual&quot;\r\n)\r\n@Slf4j\r\npublic class AsyncConfig   {\r\n    @Bean\r\n    public AsyncTaskExecutor applicationTaskExecutor() {\r\n        return new TaskExecutorAdapter(Executors.newVirtualThreadPerTaskExecutor());\r\n    }\r\n\r\n    @Bean\r\n    public TomcatProtocolHandlerCustomizer&lt;?&gt; protocolHandlerVirtualThreadExecutorCustomizer() {\r\n        return protocolHandler -&gt; {\r\n            protocolHandler.setExecutor(Executors.newVirtualThreadPerTaskExecutor());\r\n        };\r\n    }\r\n}\r\n```\r\nHowever, if I call this asynchronous task in a web controller, my console outputs &quot;true&quot;, like this:\r\n\r\n```java\r\n@GetMapping(&quot;/vm&quot;)\r\npublic void vm( ){\r\n    task();\r\n}\r\n\r\n@Async\r\npublic void task(){\r\n    log.info(&quot;info={}&quot;, Thread.currentThread().isVirtual());\r\n}\r\n```\r\nI am looking for a way to directly use methods annotated with @Async in scheduled tasks, running them in virtual threads. Also, I would like to know if there&#39;s a straightforward way to obtain the return value of @Async annotated virtual thread methods.","title":"Why can&#39;t I start an asynchronous task in a scheduled task using a virtual thread?","body":"<p>I am using Java 21 and Spring Boot 2.7.3. I used java.util.Timer to create a scheduled task, and then called the asynchronous method annotated with @Async annotation in this scheduled task. Then I configured the asynchronous task processor for Spring Boot to be a virtual Thread Executor, finally I printed Thread.currentThread.isVirtual() in the code marked with @Async, and found that false was output. The sample code is as follows (the original intention of the following code is actually to periodically send data to all WebSocket sessions connected to my server):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Component\npublic class TestTask{\n\n    @PostConstruct\n    public void pushStatus() {\n        Timer timer = new Timer();\n        timer.schedule(new TimerTask() {\n            @Override\n            public void run() {\n                countWebSocketsMap.forEach((k, v) -&gt; {\n                    pushCount(k,v);\n                });\n            }\n        }, 0, 500);\n     }\n\n     @Async\n     public void pushCount(String sessionId, WebSocketSession session) {\n         log.info(&quot;{}&quot;,Thread.currentThread().isVirtual());\n     }\n}\n</code></pre>\n<p>I bound the virtual thread for Spring Boot async tasks like follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableAsync\n@Configuration\n@ConditionalOnProperty(\n        value = &quot;spring.thread-executor&quot;,\n        havingValue = &quot;virtual&quot;\n)\n@Slf4j\npublic class AsyncConfig   {\n    @Bean\n    public AsyncTaskExecutor applicationTaskExecutor() {\n        return new TaskExecutorAdapter(Executors.newVirtualThreadPerTaskExecutor());\n    }\n\n    @Bean\n    public TomcatProtocolHandlerCustomizer&lt;?&gt; protocolHandlerVirtualThreadExecutorCustomizer() {\n        return protocolHandler -&gt; {\n            protocolHandler.setExecutor(Executors.newVirtualThreadPerTaskExecutor());\n        };\n    }\n}\n</code></pre>\n<p>However, if I call this asynchronous task in a web controller, my console outputs &quot;true&quot;, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/vm&quot;)\npublic void vm( ){\n    task();\n}\n\n@Async\npublic void task(){\n    log.info(&quot;info={}&quot;, Thread.currentThread().isVirtual());\n}\n</code></pre>\n<p>I am looking for a way to directly use methods annotated with @Async in scheduled tasks, running them in virtual threads. Also, I would like to know if there's a straightforward way to obtain the return value of @Async annotated virtual thread methods.</p>\n"},{"tags":["java","gradle","google-bigquery","shadowjar"],"owner":{"account_id":2032093,"reputation":1995,"user_id":1815486,"accept_rate":40,"display_name":"aiguofer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697644098,"creation_date":1697644098,"question_id":77317852,"body_markdown":"The Google BigQuery JDBC jar is distributed as a [downloadable zip][1]. A lot of its dependencies are gRPC related, but we&#39;re also using gRPC. This has caused conflicts in the past where we had to go remove conflicting version jars from the provided `/libs`. So far we haven&#39;t run into issues from doing so, but I&#39;m worried at some point a version discrepancy will cause some sort of runtime issues.\r\n\r\nWe currently include it in our Gradle project with:\r\n\r\n```\r\ngradle.taskGraph.whenReady {\r\n    allTasks\r\n        .filter { it.hasProperty(&quot;duplicatesStrategy&quot;) }\r\n        .forEach {\r\n            it.setProperty(&quot;duplicatesStrategy&quot;, &quot;EXCLUDE&quot;)\r\n        }\r\n}\r\n\r\ndependencies {\r\n...\r\n    implementation(fileTree(mapOf(&quot;dir&quot; to &quot;libs/SimbaJDBCDriverforGoogleBigQuery42_1.3.3.1004/&quot;, &quot;include&quot; to listOf(&quot;*.jar&quot;))))\r\n...\r\n}\r\n```\r\n\r\nI see Dremio created a [maven project][2] to shade the jar themselves, but this is pretty old and we use Gradle. I imagine something like this is also possible in Gradle, but I&#39;m not sure how to go about it.\r\n\r\nMy guess so far is:\r\n 1. Set up a subproject in gradle for shading BQ\r\n 2. Manually configure all the dependencies in the gradle project with versions matching those in the `/libs` dir.\r\n 3. Somehow tell this project to build the shaded BQ jar?\r\n 4. Somehow tell our main project that it depends on that shaded jar?\r\n\r\nIf there&#39;s easier ways to accomplish this I&#39;m all ears!\r\n\r\n  [1]: https://cloud.google.com/bigquery/docs/reference/odbc-jdbc-drivers#current_jdbc_driver\r\n  [2]: https://github.com/panoramichq/dremio-bigquery-connector/blob/master/bigquery-driver-shade/pom.xml","title":"How to make a shadow jar from a third party JAR that is distributed as a zip","body":"<p>The Google BigQuery JDBC jar is distributed as a <a href=\"https://cloud.google.com/bigquery/docs/reference/odbc-jdbc-drivers#current_jdbc_driver\" rel=\"nofollow noreferrer\">downloadable zip</a>. A lot of its dependencies are gRPC related, but we're also using gRPC. This has caused conflicts in the past where we had to go remove conflicting version jars from the provided <code>/libs</code>. So far we haven't run into issues from doing so, but I'm worried at some point a version discrepancy will cause some sort of runtime issues.</p>\n<p>We currently include it in our Gradle project with:</p>\n<pre><code>gradle.taskGraph.whenReady {\n    allTasks\n        .filter { it.hasProperty(&quot;duplicatesStrategy&quot;) }\n        .forEach {\n            it.setProperty(&quot;duplicatesStrategy&quot;, &quot;EXCLUDE&quot;)\n        }\n}\n\ndependencies {\n...\n    implementation(fileTree(mapOf(&quot;dir&quot; to &quot;libs/SimbaJDBCDriverforGoogleBigQuery42_1.3.3.1004/&quot;, &quot;include&quot; to listOf(&quot;*.jar&quot;))))\n...\n}\n</code></pre>\n<p>I see Dremio created a <a href=\"https://github.com/panoramichq/dremio-bigquery-connector/blob/master/bigquery-driver-shade/pom.xml\" rel=\"nofollow noreferrer\">maven project</a> to shade the jar themselves, but this is pretty old and we use Gradle. I imagine something like this is also possible in Gradle, but I'm not sure how to go about it.</p>\n<p>My guess so far is:</p>\n<ol>\n<li>Set up a subproject in gradle for shading BQ</li>\n<li>Manually configure all the dependencies in the gradle project with versions matching those in the <code>/libs</code> dir.</li>\n<li>Somehow tell this project to build the shaded BQ jar?</li>\n<li>Somehow tell our main project that it depends on that shaded jar?</li>\n</ol>\n<p>If there's easier ways to accomplish this I'm all ears!</p>\n"},{"tags":["java","spring-webflux"],"comments":[{"owner":{"account_id":6605,"reputation":61212,"user_id":11182,"display_name":"Lex Li"},"score":0,"creation_date":1697499853,"post_id":77304555,"comment_id":136285059,"body_markdown":"Don&#39;t misuse tags. Your Java stuffs should use the java tag, and the mono tag is for something else.","body":"Don&#39;t misuse tags. Your Java stuffs should use the java tag, and the mono tag is for something else."}],"answers":[{"tags":[],"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697643863,"creation_date":1697643863,"answer_id":77317823,"question_id":77304555,"body_markdown":"Your logger does not log because you put it in the `doOnNext` method, which is not executed since your `publish` method returns `Mono&lt;Void&gt;` that is empty mono. If you replace `doOnNext` with `doOnSuccess` everything should work as expected. \r\n\r\nBy the way, you can also simplify your code using `Mono.justOrEmpty` here:\r\n \r\n```java\r\nprivate Mono&lt;Void&gt; sendEvent(EventType eventType, Bundle bundle, String tenantId) {\r\n    EventAbstractFactory&lt;AbstractHealthDataEvent&gt; factory =\r\n        this.eventFactory.getFactory(eventType, bundle, tenantId);\r\n\r\n    return Mono.justOrEmpty(factory.createEvent())\r\n        .flatMap(event -&gt;\r\n            eventPublisherService.publish(eventType, event)\r\n                .doOnSuccess(aVoid -&gt; LOGGER.info(&quot;{} event published successfully.&quot;, eventType.getName()));\r\n        )\r\n}\r\n```","title":"doOnSuccess on Mono.Void not called","body":"<p>Your logger does not log because you put it in the <code>doOnNext</code> method, which is not executed since your <code>publish</code> method returns <code>Mono&lt;Void&gt;</code> that is empty mono. If you replace <code>doOnNext</code> with <code>doOnSuccess</code> everything should work as expected.</p>\n<p>By the way, you can also simplify your code using <code>Mono.justOrEmpty</code> here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Mono&lt;Void&gt; sendEvent(EventType eventType, Bundle bundle, String tenantId) {\n    EventAbstractFactory&lt;AbstractHealthDataEvent&gt; factory =\n        this.eventFactory.getFactory(eventType, bundle, tenantId);\n\n    return Mono.justOrEmpty(factory.createEvent())\n        .flatMap(event -&gt;\n            eventPublisherService.publish(eventType, event)\n                .doOnSuccess(aVoid -&gt; LOGGER.info(&quot;{} event published successfully.&quot;, eventType.getName()));\n        )\n}\n</code></pre>\n"}],"owner":{"account_id":9797098,"reputation":582,"user_id":7259705,"display_name":"Jonathan Hagen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77317823,"answer_count":1,"score":0,"last_activity_date":1697643863,"creation_date":1697485020,"question_id":77304555,"body_markdown":"I am trying to log success statement after process is successful like this:\r\n```\r\nprivate Mono&lt;Void&gt; sendEvent(EventType eventType, Bundle bundle, String tenantId) {\r\n        EventAbstractFactory&lt;AbstractHealthDataEvent&gt; factory =\r\n            this.eventFactory.getFactory(eventType, bundle, tenantId);\r\n        Optional&lt;AbstractHealthDataEvent&gt; eventOptional = factory.createEvent();\r\n\r\n        if (eventOptional.isPresent()) {\r\n            return eventPublisherService.publish(eventType, eventOptional.get())\r\n                .doOnNext(aVoid -&gt; LOGGER.info(&quot;{} event published successfully.&quot;, eventType.getName()));\r\n        }\r\n        return Mono.empty();\r\n    }\r\n```\r\n\r\nWhen `eventOptional.isPresent()`, then I want to call `.publish` method and then if it is successful, I want to log something in the `LOGGER`. However, this doesn&#39;t work. How can I achieve this without changing the return type?","title":"doOnSuccess on Mono.Void not called","body":"<p>I am trying to log success statement after process is successful like this:</p>\n<pre><code>private Mono&lt;Void&gt; sendEvent(EventType eventType, Bundle bundle, String tenantId) {\n        EventAbstractFactory&lt;AbstractHealthDataEvent&gt; factory =\n            this.eventFactory.getFactory(eventType, bundle, tenantId);\n        Optional&lt;AbstractHealthDataEvent&gt; eventOptional = factory.createEvent();\n\n        if (eventOptional.isPresent()) {\n            return eventPublisherService.publish(eventType, eventOptional.get())\n                .doOnNext(aVoid -&gt; LOGGER.info(&quot;{} event published successfully.&quot;, eventType.getName()));\n        }\n        return Mono.empty();\n    }\n</code></pre>\n<p>When <code>eventOptional.isPresent()</code>, then I want to call <code>.publish</code> method and then if it is successful, I want to log something in the <code>LOGGER</code>. However, this doesn't work. How can I achieve this without changing the return type?</p>\n"},{"tags":["java","integer"],"comments":[{"owner":{"account_id":912043,"reputation":149,"user_id":945655,"display_name":"David S Alderson"},"score":1,"creation_date":1483335872,"post_id":8033550,"comment_id":70049166,"body_markdown":"Integer.toString(n).chars().map(a-&gt;a-&#39;0&#39;).toArray();","body":"Integer.toString(n).chars().map(a-&gt;a-&#39;0&#39;).toArray();"},{"owner":{"account_id":17596082,"reputation":435,"user_id":13340030,"display_name":"Phil"},"score":0,"creation_date":1596645542,"post_id":8033550,"comment_id":111880163,"body_markdown":"Added support for negative values check my answer below ( For new developers since it&#39;s been 8 years )","body":"Added support for negative values check my answer below ( For new developers since it&#39;s been 8 years )"}],"answers":[{"tags":[],"owner":{"account_id":428580,"reputation":35982,"user_id":811001,"accept_rate":85,"display_name":"tskuzzy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1320649219,"creation_date":1320649219,"answer_id":8033574,"question_id":8033550,"body_markdown":"`temp2 = temp.substring(i);` will always return the empty string &quot;&quot;.\r\n\r\nInstead, your loop should have the condition `i&lt;temp.length()`. And `temp2` should always be `temp.substring(i, i+1);`.\r\n\r\nSimilarly when you&#39;re printing out `newGuess`, you should loop up to `newGuess.length` but not including. So your condition should be `i&lt;newGuess.length`.","title":"Convert an integer to an array of digits","body":"<p><code>temp2 = temp.substring(i);</code> will always return the empty string \"\".</p>\n\n<p>Instead, your loop should have the condition <code>i&lt;temp.length()</code>. And <code>temp2</code> should always be <code>temp.substring(i, i+1);</code>.</p>\n\n<p>Similarly when you're printing out <code>newGuess</code>, you should loop up to <code>newGuess.length</code> but not including. So your condition should be <code>i&lt;newGuess.length</code>.</p>\n"},{"comments":[{"owner":{"account_id":426158,"reputation":2189,"user_id":807210,"accept_rate":44,"display_name":"priteshbaviskar"},"score":7,"creation_date":1493523317,"post_id":8033588,"comment_id":74450071,"body_markdown":"Or you can do array.add(0, temp %10) to avoid reversing the list.","body":"Or you can do array.add(0, temp %10) to avoid reversing the list."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1566871840,"post_id":8033588,"comment_id":101782195,"body_markdown":"Even Jon Skeet&#39;s solution won&#39;t work for negative integers.","body":"Even Jon Skeet&#39;s solution won&#39;t work for negative integers."},{"owner":{"account_id":13222953,"reputation":731,"user_id":9549068,"display_name":"Nor.Z"},"score":0,"creation_date":1701764156,"post_id":8033588,"comment_id":136812904,"body_markdown":"This is reversed too?","body":"This is reversed too?"}],"tags":[],"owner":{"account_id":478081,"reputation":9703,"user_id":889941,"accept_rate":100,"display_name":"Vladimir"},"comment_count":3,"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1604767200,"creation_date":1320649345,"answer_id":8033588,"question_id":8033550,"body_markdown":"You don&#39;t need to convert `int` to `String`. Just use `% 10` to get the last digit and then divide your int by 10 to get to the next one.\r\n\r\n    int temp = test;\r\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;Integer&gt;();\r\n    do{\r\n        array.add(temp % 10);\r\n        temp /= 10;\r\n    } while  (temp &gt; 0);\r\n\r\nThis will leave you with ArrayList containing your digits in reverse order. You can easily revert it if it&#39;s required and convert it to int[].\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>You don't need to convert <code>int</code> to <code>String</code>. Just use <code>% 10</code> to get the last digit and then divide your int by 10 to get to the next one.</p>\n<pre><code>int temp = test;\nArrayList&lt;Integer&gt; array = new ArrayList&lt;Integer&gt;();\ndo{\n    array.add(temp % 10);\n    temp /= 10;\n} while  (temp &gt; 0);\n</code></pre>\n<p>This will leave you with ArrayList containing your digits in reverse order. You can easily revert it if it's required and convert it to int[].</p>\n"},{"tags":[],"owner":{"account_id":107007,"reputation":31656,"user_id":284731,"display_name":"zellio"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1604768129,"creation_date":1320649353,"answer_id":8033590,"question_id":8033550,"body_markdown":"It would be much simpler to use the [String.split][1] method:\r\n\r\n    public static void fn(int guess) {\r\n        String[] sNums = Integer.toString(guess).split(&quot;&quot;);\r\n        for (String s : nums) {\r\n        ...\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\r\n","title":"Convert an integer to an array of digits","body":"<p>It would be much simpler to use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-\" rel=\"nofollow noreferrer\">String.split</a> method:</p>\n<pre><code>public static void fn(int guess) {\n    String[] sNums = Integer.toString(guess).split(&quot;&quot;);\n    for (String s : nums) {\n    ...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":875897,"reputation":4293,"user_id":925552,"accept_rate":71,"display_name":"hkguile"},"score":0,"creation_date":1320810750,"post_id":8033593,"comment_id":9873675,"body_markdown":"your functions can&#39;t store value 0","body":"your functions can&#39;t store value 0"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1320818560,"post_id":8033593,"comment_id":9874752,"body_markdown":"@hkinterview: They can store a *single* 0, but not leading zeroes. That&#39;s a problem with your design rather than my implementation though. Either you need to specify the length in the method call, or move away from `int` as a representation - because `00001` is the same `int` value as `1`.","body":"@hkinterview: They can store a <i>single</i> 0, but not leading zeroes. That&#39;s a problem with your design rather than my implementation though. Either you need to specify the length in the method call, or move away from <code>int</code> as a representation - because <code>00001</code> is the same <code>int</code> value as <code>1</code>."},{"owner":{"account_id":6609714,"reputation":4086,"user_id":5105305,"accept_rate":58,"display_name":"Kasun Siyambalapitiya"},"score":2,"creation_date":1465749055,"post_id":8033593,"comment_id":63020587,"body_markdown":"@JonSkeet Can you explain me why you have put `-&#39;0&#39;` in the line `newGuess[i] = temp.charAt(i) - &#39;0&#39;;`","body":"@JonSkeet Can you explain me why you have put <code>-&#39;0&#39;</code> in the line <code>newGuess[i] = temp.charAt(i) - &#39;0&#39;;</code>"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1465749105,"post_id":8033593,"comment_id":63020603,"body_markdown":"@KasunSiyambalapitiya: Because that&#39;s the simplest way to get from `&#39;0&#39;, &#39;1&#39;, &#39;2&#39;` etc to the integer representations of those digits.","body":"@KasunSiyambalapitiya: Because that&#39;s the simplest way to get from <code>&#39;0&#39;, &#39;1&#39;, &#39;2&#39;</code> etc to the integer representations of those digits."},{"owner":{"account_id":6609714,"reputation":4086,"user_id":5105305,"accept_rate":58,"display_name":"Kasun Siyambalapitiya"},"score":0,"creation_date":1465750094,"post_id":8033593,"comment_id":63020902,"body_markdown":"@JonSkeet Pardon me. I still didn&#39;t got it, in the above example String `temp` will become =&quot;1234&quot;. so when we get `temp.charAt(0)` it is `1` ,`temp.charAt(1)` it is `2`  and so on. but why is that value not assign to the `int array` as `newGuess[0]=1`,`newGuess[1]=2` and so on","body":"@JonSkeet Pardon me. I still didn&#39;t got it, in the above example String <code>temp</code> will become =&quot;1234&quot;. so when we get <code>temp.charAt(0)</code> it is <code>1</code> ,<code>temp.charAt(1)</code> it is <code>2</code>  and so on. but why is that value not assign to the <code>int array</code> as <code>newGuess[0]=1</code>,<code>newGuess[1]=2</code> and so on"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1465750457,"post_id":8033593,"comment_id":63021021,"body_markdown":"@KasunSiyambalapitiya, no, `temp.charAt(0)` isn&#39;t `1`, it&#39;s `&#39;1&#39;` - the *character* &#39;1&#39;. That has an integer value of 49, because the Unicode character 49 is the digit 1. It&#39;s important to differentiate between the *character* value and the integer value that it represents as a digit.","body":"@KasunSiyambalapitiya, no, <code>temp.charAt(0)</code> isn&#39;t <code>1</code>, it&#39;s <code>&#39;1&#39;</code> - the <i>character</i> &#39;1&#39;. That has an integer value of 49, because the Unicode character 49 is the digit 1. It&#39;s important to differentiate between the <i>character</i> value and the integer value that it represents as a digit."},{"owner":{"account_id":7786269,"reputation":521,"user_id":5890981,"accept_rate":75,"display_name":"CoderSam"},"score":0,"creation_date":1565957987,"post_id":8033593,"comment_id":101515501,"body_markdown":"`newGuess[i] = Character.getNumericValue(temp.charAt(i))` can also be used in place of `newGuess[i] = temp.charAt(i) - &#39;0&#39;`","body":"<code>newGuess[i] = Character.getNumericValue(temp.charAt(i))</code> can also be used in place of <code>newGuess[i] = temp.charAt(i) - &#39;0&#39;</code>"},{"owner":{"account_id":17596082,"reputation":435,"user_id":13340030,"display_name":"Phil"},"score":0,"creation_date":1596644030,"post_id":8033593,"comment_id":111879469,"body_markdown":"What about negative numbers this is an incomplete answer","body":"What about negative numbers this is an incomplete answer"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1596644440,"post_id":8033593,"comment_id":111879673,"body_markdown":"@Phil: I&#39;m not sure the question really makes sense for a negative number, and it doesn&#39;t look like the OP needed that (and certainly their original code didn&#39;t try to handle it).","body":"@Phil: I&#39;m not sure the question really makes sense for a negative number, and it doesn&#39;t look like the OP needed that (and certainly their original code didn&#39;t try to handle it)."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":9,"down_vote_count":3,"up_vote_count":96,"is_accepted":true,"score":93,"last_activity_date":1320649362,"creation_date":1320649362,"answer_id":8033593,"question_id":8033550,"body_markdown":"The immediate problem is due to you using `&lt;= temp.length()` instead of `&lt; temp.length()`. However, you can achieve this a lot more simply. Even if you use the string approach, you can use:\r\n\r\n    String temp = Integer.toString(guess);\r\n    int[] newGuess = new int[temp.length()];\r\n    for (int i = 0; i &lt; temp.length(); i++)\r\n    {\r\n        newGuess[i] = temp.charAt(i) - &#39;0&#39;;\r\n    }\r\n\r\nYou need to make the same change to use `&lt; newGuess.length()` when printing out the content too - otherwise for an array of length 4 (which has valid indexes 0, 1, 2, 3) you&#39;ll try to use `newGuess[4]`. The vast majority of `for` loops I write use `&lt;` in the condition, rather than `&lt;=`.","title":"Convert an integer to an array of digits","body":"<p>The immediate problem is due to you using <code>&lt;= temp.length()</code> instead of <code>&lt; temp.length()</code>. However, you can achieve this a lot more simply. Even if you use the string approach, you can use:</p>\n\n<pre><code>String temp = Integer.toString(guess);\nint[] newGuess = new int[temp.length()];\nfor (int i = 0; i &lt; temp.length(); i++)\n{\n    newGuess[i] = temp.charAt(i) - '0';\n}\n</code></pre>\n\n<p>You need to make the same change to use <code>&lt; newGuess.length()</code> when printing out the content too - otherwise for an array of length 4 (which has valid indexes 0, 1, 2, 3) you'll try to use <code>newGuess[4]</code>. The vast majority of <code>for</code> loops I write use <code>&lt;</code> in the condition, rather than <code>&lt;=</code>.</p>\n"},{"tags":[],"owner":{"account_id":952680,"reputation":3352,"user_id":978525,"display_name":"Eamonn O&#39;Brien-Strain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604768167,"creation_date":1320649369,"answer_id":8033595,"question_id":8033550,"body_markdown":"The `&lt;=` in the for statement should be a `&lt;`.\r\n\r\nBTW, it is possible to do this much more efficiently without using strings, but instead using `/10` and `%10` of integers.\r\n","title":"Convert an integer to an array of digits","body":"<p>The <code>&lt;=</code> in the for statement should be a <code>&lt;</code>.</p>\n<p>BTW, it is possible to do this much more efficiently without using strings, but instead using <code>/10</code> and <code>%10</code> of integers.</p>\n"},{"tags":[],"owner":{"account_id":321035,"reputation":12292,"user_id":639616,"accept_rate":67,"display_name":"wannik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1320649519,"creation_date":1320649519,"answer_id":8033611,"question_id":8033550,"body_markdown":"You don&#39;t have to use `substring(...)`.  Use `temp.charAt(i)` to get a digit and use the following code to convert `char` to `int`.\r\n \r\n    char c = &#39;7&#39;;\r\n    int i = c - &#39;0&#39;;\r\n    System.out.println(i);","title":"Convert an integer to an array of digits","body":"<p>You don't have to use <code>substring(...)</code>.  Use <code>temp.charAt(i)</code> to get a digit and use the following code to convert <code>char</code> to <code>int</code>.</p>\n\n<pre><code>char c = '7';\nint i = c - '0';\nSystem.out.println(i);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":437295,"reputation":18265,"user_id":824903,"accept_rate":87,"display_name":"donturner"},"score":1,"creation_date":1412445107,"post_id":25278643,"comment_id":41076163,"body_markdown":"The question refers to converting an int not a String","body":"The question refers to converting an int not a String"}],"tags":[],"owner":{"account_id":4882742,"reputation":1,"user_id":3935992,"display_name":"bhargav"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1407908528,"creation_date":1407907650,"answer_id":25278643,"question_id":8033550,"body_markdown":"    public static void main(String k[])\r\n\t{  \r\n\t\tSystem.out.println (&quot;NUMBER OF VALUES =&quot;+k.length);\r\n        int arrymy[]=new int[k.length];\r\n\t\tfor (int i = 0; i &lt; k.length; i++)\r\n\t\t{\r\n\t\t\tint newGues = Integer.parseInt(k[i]);\r\n\t\t\tarrymy[i] = newGues;\r\n\t\t}\r\n    }","title":"Convert an integer to an array of digits","body":"<pre><code>public static void main(String k[])\n{  \n    System.out.println (\"NUMBER OF VALUES =\"+k.length);\n    int arrymy[]=new int[k.length];\n    for (int i = 0; i &lt; k.length; i++)\n    {\n        int newGues = Integer.parseInt(k[i]);\n        arrymy[i] = newGues;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6250745,"reputation":583,"user_id":4860884,"display_name":"Marie Diana Tran"},"comment_count":0,"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1604768359,"creation_date":1430713264,"answer_id":30022561,"question_id":8033550,"body_markdown":"Use:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        int num = 1234567;\r\n        int[] digits = Integer.toString(num).chars().map(c -&gt; c-&#39;0&#39;).toArray();\r\n        for(int d : digits)\r\n            System.out.print(d);\r\n    }\r\n\r\nThe main idea is\r\n\r\n 1. Convert the int to its String value\r\n\r\n    &lt;!-- language: java --&gt;\r\n\r\n        Integer.toString(num);\r\n\r\n 2. Get a stream of int that represents the ASCII value of each char(~digit) composing the String version of our integer\r\n\r\n    &lt;!-- language: java --&gt;\r\n\r\n        Integer.toString(num).chars();\r\n\r\n 3. Convert the ASCII value of each character to its value.\r\nTo get the actual int value of a character, we have to subtract the ASCII code value of the character &#39;0&#39; from the ASCII code of the actual character.\r\nTo get all the digits of our number, this operation has to be applied on each character (corresponding to the digit) composing the string equivalent of our number which is done by applying the map function below to our IntStream.\r\n\r\n    &lt;!-- language: java --&gt;\r\n\r\n        Integer.toString(num).chars().map(c -&gt; c-&#39;0&#39;);\r\n\r\n4. Convert the stream of int to an array of int using toArray()\r\n\r\n    &lt;!-- language: java --&gt;\r\n\r\n        Integer.toString(num).chars().map(c -&gt; c-&#39;0&#39;).toArray();\r\n","title":"Convert an integer to an array of digits","body":"<p>Use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args)\n{\n    int num = 1234567;\n    int[] digits = Integer.toString(num).chars().map(c -&gt; c-'0').toArray();\n    for(int d : digits)\n        System.out.print(d);\n}\n</code></pre>\n<p>The main idea is</p>\n<ol>\n<li><p>Convert the int to its String value</p>\n<pre class=\"lang-java prettyprint-override\"><code>Integer.toString(num);\n</code></pre>\n</li>\n<li><p>Get a stream of int that represents the ASCII value of each char(~digit) composing the String version of our integer</p>\n<pre class=\"lang-java prettyprint-override\"><code>Integer.toString(num).chars();\n</code></pre>\n</li>\n<li><p>Convert the ASCII value of each character to its value.\nTo get the actual int value of a character, we have to subtract the ASCII code value of the character '0' from the ASCII code of the actual character.\nTo get all the digits of our number, this operation has to be applied on each character (corresponding to the digit) composing the string equivalent of our number which is done by applying the map function below to our IntStream.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Integer.toString(num).chars().map(c -&gt; c-'0');\n</code></pre>\n</li>\n<li><p>Convert the stream of int to an array of int using toArray()</p>\n <pre class=\"lang-java prettyprint-override\"><code> Integer.toString(num).chars().map(c -&gt; c-'0').toArray();\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1262480,"reputation":588,"user_id":1220424,"accept_rate":0,"display_name":"Nayan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604768434,"creation_date":1438080339,"answer_id":31674057,"question_id":8033550,"body_markdown":"Call this function:\r\n\r\n      public int[] convertToArray(int number) {\r\n        int i = 0;\r\n        int length = (int) Math.log10(number);\r\n        int divisor = (int) Math.pow(10, length);\r\n        int temp[] = new int[length + 1];\r\n\r\n        while (number != 0) {\r\n            temp[i] = number / divisor;\r\n            if (i &lt; length) {\r\n                ++i;\r\n            }\r\n            number = number % divisor;\r\n            if (i != 0) {\r\n                divisor = divisor / 10;\r\n            }\r\n        }\r\n        return temp;\r\n    }\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>Call this function:</p>\n<pre><code>  public int[] convertToArray(int number) {\n    int i = 0;\n    int length = (int) Math.log10(number);\n    int divisor = (int) Math.pow(10, length);\n    int temp[] = new int[length + 1];\n\n    while (number != 0) {\n        temp[i] = number / divisor;\n        if (i &lt; length) {\n            ++i;\n        }\n        number = number % divisor;\n        if (i != 0) {\n            divisor = divisor / 10;\n        }\n    }\n    return temp;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6839939,"reputation":163,"user_id":5260679,"display_name":"Erfan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604768558,"creation_date":1459456948,"answer_id":36343369,"question_id":8033550,"body_markdown":"I can suggest the following method:\r\n\r\n&gt; Convert the number to a string &amp;rarr; convert the string into an array of characters &amp;rarr; convert the array of characters into an array of integers\r\n\r\nHere comes my code:\r\n\r\n    public class test {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            int num1 = 123456; // Example 1\r\n            int num2 = 89786775; // Example 2\r\n\r\n            String str1 = Integer.toString(num1); // Converts num1 into String\r\n            String str2 = Integer.toString(num2); // Converts num2 into String\r\n\r\n            char[] ch1 = str1.toCharArray(); // Gets str1 into an array of char\r\n            char[] ch2 = str2.toCharArray(); // Gets str2 into an array of char\r\n\r\n            int[] t1 = new int[ch1.length]; // Defines t1 for bringing ch1 into it\r\n            int[] t2 = new int[ch2.length]; // Defines t2 for bringing ch2 into it\r\n\r\n            for(int i=0;i&lt;ch1.length;i++) // Watch the ASCII table\r\n                t1[i]= (int) ch1[i]-48; // ch1[i] is 48 units more than what we want\r\n\r\n            for(int i=0;i&lt;ch2.length;i++) // Watch the ASCII table\r\n                t2[i]= (int) ch2[i]-48; // ch2[i] is 48 units more than what we want\r\n            }\r\n        }\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>I can suggest the following method:</p>\n<blockquote>\n<p>Convert the number to a string → convert the string into an array of characters → convert the array of characters into an array of integers</p>\n</blockquote>\n<p>Here comes my code:</p>\n<pre><code>public class test {\n\n    public static void main(String[] args) {\n\n        int num1 = 123456; // Example 1\n        int num2 = 89786775; // Example 2\n\n        String str1 = Integer.toString(num1); // Converts num1 into String\n        String str2 = Integer.toString(num2); // Converts num2 into String\n\n        char[] ch1 = str1.toCharArray(); // Gets str1 into an array of char\n        char[] ch2 = str2.toCharArray(); // Gets str2 into an array of char\n\n        int[] t1 = new int[ch1.length]; // Defines t1 for bringing ch1 into it\n        int[] t2 = new int[ch2.length]; // Defines t2 for bringing ch2 into it\n\n        for(int i=0;i&lt;ch1.length;i++) // Watch the ASCII table\n            t1[i]= (int) ch1[i]-48; // ch1[i] is 48 units more than what we want\n\n        for(int i=0;i&lt;ch2.length;i++) // Watch the ASCII table\n            t2[i]= (int) ch2[i]-48; // ch2[i] is 48 units more than what we want\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":2,"creation_date":1604768627,"post_id":39190450,"comment_id":114450258,"body_markdown":"But the question is tagged with Java(?).","body":"But the question is tagged with Java(?)."}],"tags":[],"owner":{"account_id":3971754,"reputation":2529,"user_id":3276171,"accept_rate":20,"display_name":"Sky"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1604768588,"creation_date":1472381082,"answer_id":39190450,"question_id":8033550,"body_markdown":"In Scala, you can do it like:\r\n\r\n    def convert(a: Int, acc: List[Int] = Nil): List[Int] =\r\n      if (a &gt; 0) convert(a / 10, a % 10 +: acc) else acc\r\n\r\nIn one line and without reversing the order.\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>In Scala, you can do it like:</p>\n<pre><code>def convert(a: Int, acc: List[Int] = Nil): List[Int] =\n  if (a &gt; 0) convert(a / 10, a % 10 +: acc) else acc\n</code></pre>\n<p>In one line and without reversing the order.</p>\n"},{"comments":[{"owner":{"account_id":7349929,"reputation":3360,"user_id":5596484,"accept_rate":96,"display_name":"Stephen R. Smith"},"score":0,"creation_date":1499667866,"post_id":45004581,"comment_id":76983665,"body_markdown":"When you&#39;re answering questions, try to include a full working code sample. In some cases the person asking the question isn&#39;t clear on how a possible solution might work, so providing a code example that they may have to troubleshoot before they can apply it can be frustrating and more confusing. In this case, the original question is almost 6 years old, and already has an answer that&#39;s been accepted. If you can, try reviewing unanswered questions, and see if there are any there that you could help with.","body":"When you&#39;re answering questions, try to include a full working code sample. In some cases the person asking the question isn&#39;t clear on how a possible solution might work, so providing a code example that they may have to troubleshoot before they can apply it can be frustrating and more confusing. In this case, the original question is almost 6 years old, and already has an answer that&#39;s been accepted. If you can, try reviewing unanswered questions, and see if there are any there that you could help with."}],"tags":[],"owner":{"account_id":11237281,"reputation":1,"user_id":8242947,"display_name":"PantOffl"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604768673,"creation_date":1499665901,"answer_id":45004581,"question_id":8033550,"body_markdown":"Use:\r\n\r\n    int count = 0;\r\n    String newString = n + &quot;&quot;;\r\n    char [] stringArray = newString.toCharArray();\r\n    int [] intArray = new int[stringArray.length];\r\n    for (char i : stringArray) {\r\n      int m = Character.getNumericValue(i);\r\n      intArray[count] = m;\r\n      count += 1;\r\n    }\r\n    return intArray;\r\n\r\nYou&#39;ll have to put this into a method.\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>Use:</p>\n<pre><code>int count = 0;\nString newString = n + &quot;&quot;;\nchar [] stringArray = newString.toCharArray();\nint [] intArray = new int[stringArray.length];\nfor (char i : stringArray) {\n  int m = Character.getNumericValue(i);\n  intArray[count] = m;\n  count += 1;\n}\nreturn intArray;\n</code></pre>\n<p>You'll have to put this into a method.</p>\n"},{"comments":[{"owner":{"account_id":10880077,"reputation":1286,"user_id":7999311,"display_name":"Adam Ostrožl&#237;k"},"score":1,"creation_date":1631182725,"post_id":45487438,"comment_id":122156372,"body_markdown":"Why revert? Just do array.add(0, temp % 10)","body":"Why revert? Just do array.add(0, temp % 10)"}],"tags":[],"owner":{"account_id":10328086,"reputation":287,"user_id":7631203,"display_name":"Roberto Gimenez"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604768755,"creation_date":1501771216,"answer_id":45487438,"question_id":8033550,"body_markdown":"I can&#39;t add comments to [Vladimir&#39;s solution][1], but I think that this is more efficient also when your initial numbers could be also below 10.\r\n\r\nThis is my proposal:\r\n\r\n    int temp = test;\r\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;Integer&gt;();\r\n    do{\r\n      array.add(temp % 10);\r\n      temp /= 10;\r\n    } while  (temp &gt; 1);\r\n\r\nRemember to reverse the array.\r\n\r\n  [1]: https://stackoverflow.com/questions/8033550/convert-an-integer-to-an-array-of-digits/8033588#8033588\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>I can't add comments to <a href=\"https://stackoverflow.com/questions/8033550/convert-an-integer-to-an-array-of-digits/8033588#8033588\">Vladimir's solution</a>, but I think that this is more efficient also when your initial numbers could be also below 10.</p>\n<p>This is my proposal:</p>\n<pre><code>int temp = test;\nArrayList&lt;Integer&gt; array = new ArrayList&lt;Integer&gt;();\ndo{\n  array.add(temp % 10);\n  temp /= 10;\n} while  (temp &gt; 1);\n</code></pre>\n<p>Remember to reverse the array.</p>\n"},{"tags":[],"owner":{"account_id":6530589,"reputation":449,"user_id":5051838,"accept_rate":23,"display_name":"Abhijeet srivastava"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1604768777,"creation_date":1505725861,"answer_id":46275573,"question_id":8033550,"body_markdown":"You can use:\r\n\r\n    private int[] createArrayFromNumber(int number) {\r\n        String str = (new Integer(number)).toString();\r\n        char[] chArr = str.toCharArray();\r\n        int[] arr = new int[chArr.length];\r\n        for (int i = 0; i&lt; chArr.length; i++) {\r\n            arr[i] = Character.getNumericValue(chArr[i]);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>You can use:</p>\n<pre><code>private int[] createArrayFromNumber(int number) {\n    String str = (new Integer(number)).toString();\n    char[] chArr = str.toCharArray();\n    int[] arr = new int[chArr.length];\n    for (int i = 0; i&lt; chArr.length; i++) {\n        arr[i] = Character.getNumericValue(chArr[i]);\n    }\n    return arr;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2591971,"reputation":16544,"user_id":2246488,"accept_rate":47,"display_name":"James Wierzba"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1604768807,"creation_date":1512428533,"answer_id":47643402,"question_id":8033550,"body_markdown":"You can just do:\r\n\r\n```char[] digits = string.toCharArray();```\r\n\r\nAnd then you can evaluate the chars as integers.\r\n\r\nFor example:\r\n\r\n    char[] digits = &quot;12345&quot;.toCharArray();\r\n    int digit = Character.getNumericValue(digits[0]);\r\n    System.out.println(digit); // Prints 1\r\n\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>You can just do:</p>\n<p><code>char[] digits = string.toCharArray();</code></p>\n<p>And then you can evaluate the chars as integers.</p>\n<p>For example:</p>\n<pre><code>char[] digits = &quot;12345&quot;.toCharArray();\nint digit = Character.getNumericValue(digits[0]);\nSystem.out.println(digit); // Prints 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8573716,"reputation":31,"user_id":6423664,"display_name":"Shadab Eqbal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604768864,"creation_date":1521532013,"answer_id":49378811,"question_id":8033550,"body_markdown":"Here is the function that takes an integer and return an array of digits.\r\n\r\n    static int[] Int_to_array(int n)\r\n    {\r\n        int j = 0;\r\n        int len = Integer.toString(n).length();\r\n        int[] arr = new int[len];\r\n        while(n!=0)\r\n        {\r\n            arr[len-j-1] = n % 10;\r\n            n = n / 10;\r\n            j++;\r\n        }\r\n        return arr;\r\n    }\r\n","title":"Convert an integer to an array of digits","body":"<p>Here is the function that takes an integer and return an array of digits.</p>\n<pre><code>static int[] Int_to_array(int n)\n{\n    int j = 0;\n    int len = Integer.toString(n).length();\n    int[] arr = new int[len];\n    while(n!=0)\n    {\n        arr[len-j-1] = n % 10;\n        n = n / 10;\n        j++;\n    }\n    return arr;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6401714,"reputation":5744,"user_id":4964136,"accept_rate":100,"display_name":"Vishwa Ratna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604769049,"creation_date":1527932351,"answer_id":50655509,"question_id":8033550,"body_markdown":"First take input from the user as int, convert it into `String`, and make a character array of size of `str.length()`. Now populate a character array with a *for* loop using `charAt()`.\r\n\r\n    Scanner sc = new Scanner(System.in);\r\n    int num = sc.nextInt();\r\n    String str = Integer.toString(num);\r\n    char [] ch = new char [str.length()];\r\n\r\n    for(int i=0; i&lt;str.length(); i++)\r\n    {\r\n        ch[i] = str.charAt(i);\r\n    }\r\n\r\n    for(char c: ch)\r\n    {\r\n        System.out.print(c +&quot; &quot;);\r\n    }\r\n","title":"Convert an integer to an array of digits","body":"<p>First take input from the user as int, convert it into <code>String</code>, and make a character array of size of <code>str.length()</code>. Now populate a character array with a <em>for</em> loop using <code>charAt()</code>.</p>\n<pre><code>Scanner sc = new Scanner(System.in);\nint num = sc.nextInt();\nString str = Integer.toString(num);\nchar [] ch = new char [str.length()];\n\nfor(int i=0; i&lt;str.length(); i++)\n{\n    ch[i] = str.charAt(i);\n}\n\nfor(char c: ch)\n{\n    System.out.print(c +&quot; &quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14246942,"reputation":85,"user_id":10291695,"display_name":"Salman Sayyed"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1604769150,"creation_date":1541430333,"answer_id":53156980,"question_id":8033550,"body_markdown":"You can do something like this:\r\n\r\n    public int[] convertDigitsToArray(int n) {\r\n\r\n        int [] temp = new int[String.valueOf(n).length()]; // Calculate the length of digits\r\n        int i = String.valueOf(n).length()-1 ;  // Initialize the value to the last index\r\n\r\n        do {\r\n            temp[i] = n % 10;\r\n            n = n / 10;\r\n            i--;\r\n        } while(n&gt;0);\r\n\r\n        return temp;\r\n    }\r\n\r\nThis will also maintain the order.\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>You can do something like this:</p>\n<pre><code>public int[] convertDigitsToArray(int n) {\n\n    int [] temp = new int[String.valueOf(n).length()]; // Calculate the length of digits\n    int i = String.valueOf(n).length()-1 ;  // Initialize the value to the last index\n\n    do {\n        temp[i] = n % 10;\n        n = n / 10;\n        i--;\n    } while(n&gt;0);\n\n    return temp;\n}\n</code></pre>\n<p>This will also maintain the order.</p>\n"},{"tags":[],"owner":{"account_id":13503564,"reputation":1,"user_id":10151737,"display_name":"M S"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1604769232,"creation_date":1546862739,"answer_id":54074104,"question_id":8033550,"body_markdown":"I can not add comments to [the decision of Vladimir][1], but you can immediately make an array deployed in the right direction. Here is my solution:\r\n\r\n    public static int[] splitAnIntegerIntoAnArrayOfNumbers (int a) {\r\n        int temp = a;\r\n        ArrayList&lt;Integer&gt; array = new ArrayList&lt;Integer&gt;();\r\n        do{\r\n            array.add(temp % 10);\r\n            temp /= 10;\r\n        } while  (temp &gt; 0);\r\n\r\n        int[] arrayOfNumbers = new int[array.size()];\r\n        for(int i = 0, j = array.size()-1; i &lt; array.size(); i++,j--) \r\n            arrayOfNumbers [j] = array.get(i);\r\n        return arrayOfNumbers;\r\n    }\r\n\r\nImportant: This solution will not work for negative integers.\r\n\r\n  [1]: https://stackoverflow.com/questions/8033550/convert-an-integer-to-an-array-of-digits/8033588#8033588\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>I can not add comments to <a href=\"https://stackoverflow.com/questions/8033550/convert-an-integer-to-an-array-of-digits/8033588#8033588\">the decision of Vladimir</a>, but you can immediately make an array deployed in the right direction. Here is my solution:</p>\n<pre><code>public static int[] splitAnIntegerIntoAnArrayOfNumbers (int a) {\n    int temp = a;\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;Integer&gt;();\n    do{\n        array.add(temp % 10);\n        temp /= 10;\n    } while  (temp &gt; 0);\n\n    int[] arrayOfNumbers = new int[array.size()];\n    for(int i = 0, j = array.size()-1; i &lt; array.size(); i++,j--) \n        arrayOfNumbers [j] = array.get(i);\n    return arrayOfNumbers;\n}\n</code></pre>\n<p>Important: This solution will not work for negative integers.</p>\n"},{"tags":[],"owner":{"account_id":7786269,"reputation":521,"user_id":5890981,"accept_rate":75,"display_name":"CoderSam"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1560915979,"creation_date":1560855526,"answer_id":56647582,"question_id":8033550,"body_markdown":"Try this!\r\n\r\n```\r\n        \r\nint num = 1234; \r\n        \r\nString s = Integer.toString(num); \r\n        \r\nint[] intArray = new int[s.length()]; \r\n        \r\n        \r\nfor(int i=0; i&lt;s.length(); i++){\r\n    intArray[i] = Character.getNumericValue(s.charAt(i));\r\n}\r\n        \r\n```","title":"Convert an integer to an array of digits","body":"<p>Try this!</p>\n\n<pre><code>\nint num = 1234; \n\nString s = Integer.toString(num); \n\nint[] intArray = new int[s.length()]; \n\n\nfor(int i=0; i&lt;s.length(); i++){\n    intArray[i] = Character.getNumericValue(s.charAt(i));\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10592122,"reputation":149,"user_id":7802299,"display_name":"ash9"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1604769650,"creation_date":1561663874,"answer_id":56797548,"question_id":8033550,"body_markdown":"Let&#39;s solve that using recursion...\r\n\r\n    ArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\r\n\r\n    void intToArray(int num){\r\n        if( num != 0){\r\n            int temp = num %10;\r\n            num /= 10;\r\n            intToArray(num);\r\n            al.add(temp);\r\n        }\r\n    }\r\n\r\nExplanation:\r\n\r\nSuppose the value of `num` is 12345.\r\n\r\nDuring the first call of the function, `temp` holds the value 5 and a value of `num` = 1234. It is again passed to the function, and now `temp` holds the value 4 and the value of `num` is 123... This function calls itself till the value of `num` is not equal to 0.\r\n\r\nStack trace:\r\n\r\n     temp - 5 | num - 1234\r\n     temp - 4 | num - 123\r\n     temp - 3 | num - 12\r\n     temp - 2 | num - 1\r\n     temp - 1 | num - 0\r\n\r\nAnd then it calls the *add* method of ArrayList and the value of `temp` is added to it, so the value of list is:\r\n\r\n     ArrayList - 1\r\n     ArrayList - 1,2\r\n     ArrayList - 1,2,3\r\n     ArrayList - 1,2,3,4\r\n     ArrayList - 1,2,3,4,5\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>Let's solve that using recursion...</p>\n<pre><code>ArrayList&lt;Integer&gt; al = new ArrayList&lt;&gt;();\n\nvoid intToArray(int num){\n    if( num != 0){\n        int temp = num %10;\n        num /= 10;\n        intToArray(num);\n        al.add(temp);\n    }\n}\n</code></pre>\n<p>Explanation:</p>\n<p>Suppose the value of <code>num</code> is 12345.</p>\n<p>During the first call of the function, <code>temp</code> holds the value 5 and a value of <code>num</code> = 1234. It is again passed to the function, and now <code>temp</code> holds the value 4 and the value of <code>num</code> is 123... This function calls itself till the value of <code>num</code> is not equal to 0.</p>\n<p>Stack trace:</p>\n<pre><code> temp - 5 | num - 1234\n temp - 4 | num - 123\n temp - 3 | num - 12\n temp - 2 | num - 1\n temp - 1 | num - 0\n</code></pre>\n<p>And then it calls the <em>add</em> method of ArrayList and the value of <code>temp</code> is added to it, so the value of list is:</p>\n<pre><code> ArrayList - 1\n ArrayList - 1,2\n ArrayList - 1,2,3\n ArrayList - 1,2,3,4\n ArrayList - 1,2,3,4,5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17596082,"reputation":435,"user_id":13340030,"display_name":"Phil"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1604769836,"creation_date":1596644137,"answer_id":63269324,"question_id":8033550,"body_markdown":"I modified [Jon Skeet&#39;s accepted answer][1] as it does not accept negative values.\r\n\r\nThis now accepts and converts the number appropriately:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n    int number = -1203;\r\n    boolean isNegative = false;\r\n    String temp = Integer.toString(number);\r\n\r\n    if(temp.charAt(0)== &#39;-&#39;) {\r\n        isNegative = true;\r\n    }\r\n    int len = temp.length();\r\n    if(isNegative) {\r\n        len = len - 1;\r\n    }\r\n    int[] myArr = new int[len];\r\n\r\n    for (int i = 0; i &lt; len; i++) {\r\n        if (isNegative) {\r\n            myArr[i] = temp.charAt(i + 1) - &#39;0&#39;;\r\n        }\r\n        if(!isNegative) {\r\n            myArr[i] = temp.charAt(i) - &#39;0&#39;;\r\n        }\r\n    }\r\n\r\n    if (isNegative) {\r\n        for (int i = 0; i &lt; len; i++) {\r\n            myArr[i] = myArr[i] * (-1);\r\n        }\r\n    }\r\n\r\n    for (int k : myArr) {\r\n        System.out.println(k);\r\n    }\r\n}\r\n```\r\n\r\n### Output\r\n\r\n    -1\r\n    -2\r\n    0\r\n    -3\r\n\r\n  [1]: https://stackoverflow.com/questions/8033550/convert-an-integer-to-an-array-of-digits/8033593#8033593\r\n\r\n\r\n","title":"Convert an integer to an array of digits","body":"<p>I modified <a href=\"https://stackoverflow.com/questions/8033550/convert-an-integer-to-an-array-of-digits/8033593#8033593\">Jon Skeet's accepted answer</a> as it does not accept negative values.</p>\n<p>This now accepts and converts the number appropriately:</p>\n<pre><code>public static void main(String[] args) {\n    int number = -1203;\n    boolean isNegative = false;\n    String temp = Integer.toString(number);\n\n    if(temp.charAt(0)== '-') {\n        isNegative = true;\n    }\n    int len = temp.length();\n    if(isNegative) {\n        len = len - 1;\n    }\n    int[] myArr = new int[len];\n\n    for (int i = 0; i &lt; len; i++) {\n        if (isNegative) {\n            myArr[i] = temp.charAt(i + 1) - '0';\n        }\n        if(!isNegative) {\n            myArr[i] = temp.charAt(i) - '0';\n        }\n    }\n\n    if (isNegative) {\n        for (int i = 0; i &lt; len; i++) {\n            myArr[i] = myArr[i] * (-1);\n        }\n    }\n\n    for (int k : myArr) {\n        System.out.println(k);\n    }\n}\n</code></pre>\n<h3>Output</h3>\n<pre><code>-1\n-2\n0\n-3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17307512,"reputation":72,"user_id":12535912,"display_name":"Bhanu Dhulipudi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614607854,"creation_date":1614607854,"answer_id":66423642,"question_id":8033550,"body_markdown":"Without using String, Integer, ArrayList, Math:\r\n\r\n    // Actual number\r\n    int n = 56715380;\r\n        \t\t\r\n        \t\t// Copy of the number\r\n        \t\tint m = n;\r\n        \t\t\r\n        \t\t// Find no. of digits as length\r\n        \t\tint ln = 0;\r\n        \t\twhile (m &gt; 0) {\r\n        \t\t\tm = m / 10;\r\n        \t\t\tln++;\r\n        \t\t}\r\n        \t\t\r\n        \t\t// Copy of the length\r\n        \t\tint len = ln;\r\n        \r\n        \t\t// Reverse the number\r\n        \t\tint revNum = 0;\r\n        \t\tln--;\r\n        \t\tint base;\r\n        \t\twhile (n &gt; 0) {\r\n        \t\t\tbase = 1;\r\n        \t\t\tfor (int i = 0; i &lt; ln; i++) {\r\n        \t\t\t\tbase = base * 10;\r\n        \t\t\t}\r\n        \t\t\trevNum = revNum + base * (n % 10);\r\n        \t\t\tn = n / 10;\r\n        \t\t\tln--;\r\n        \t\t}\r\n        \r\n        \t\t// Store the reverse number in the array\r\n        \t\tint arr[] = new int[len];\r\n        \t\tfor (int i = 0; revNum &gt; 0; i++) {\r\n        \t\t\tarr[i] = revNum % 10;\r\n        \t\t\trevNum = revNum / 10;\r\n        \t\t}\r\n        \t\t\r\n        \t\t// Print the array\r\n        \t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n        \t\t\tSystem.out.print(arr[i]);\r\n        \t\t}","title":"Convert an integer to an array of digits","body":"<p>Without using String, Integer, ArrayList, Math:</p>\n<pre><code>// Actual number\nint n = 56715380;\n            \n            // Copy of the number\n            int m = n;\n            \n            // Find no. of digits as length\n            int ln = 0;\n            while (m &gt; 0) {\n                m = m / 10;\n                ln++;\n            }\n            \n            // Copy of the length\n            int len = ln;\n    \n            // Reverse the number\n            int revNum = 0;\n            ln--;\n            int base;\n            while (n &gt; 0) {\n                base = 1;\n                for (int i = 0; i &lt; ln; i++) {\n                    base = base * 10;\n                }\n                revNum = revNum + base * (n % 10);\n                n = n / 10;\n                ln--;\n            }\n    \n            // Store the reverse number in the array\n            int arr[] = new int[len];\n            for (int i = 0; revNum &gt; 0; i++) {\n                arr[i] = revNum % 10;\n                revNum = revNum / 10;\n            }\n            \n            // Print the array\n            for (int i = 0; i &lt; arr.length; i++) {\n                System.out.print(arr[i]);\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684837600,"creation_date":1684837600,"answer_id":76313697,"question_id":8033550,"body_markdown":"This approach will maintain the same order of the digits in the given number in the resultant array and also won&#39;t be using any collection APIs. \r\n\r\n 1. Starting with the basic approach of reversing a number say `1234`. Get the last digit by modular division (`%`) by `10` and then divide the number by `10` to get the last digit. Do this until the number is greater than `0`.\r\n 2. So while getting each last digit you can store it in the array, so you need to initialize an array with the same number of digits in the number, you need to use a `String` functionality there. But with the above step, the resulting array will be in the reverse order of the digits in your number.\r\n 3. So start adding the number from the last index of the array to the first index.\r\n\r\n\t\tint num = 1234;\r\n\t\tint[] ar = new int[String.valueOf(num).length()];\r\n\t\tint index = ar.length-1;\r\n\t\t\r\n\t\twhile(num &gt; 0) {\r\n\t\t\t\r\n\t\t\tar[index--] = num % 10;\r\n\t\t\tnum = num/10;\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(java.util.Arrays.toString(ar));","title":"Convert an integer to an array of digits","body":"<p>This approach will maintain the same order of the digits in the given number in the resultant array and also won't be using any collection APIs.</p>\n<ol>\n<li><p>Starting with the basic approach of reversing a number say <code>1234</code>. Get the last digit by modular division (<code>%</code>) by <code>10</code> and then divide the number by <code>10</code> to get the last digit. Do this until the number is greater than <code>0</code>.</p>\n</li>\n<li><p>So while getting each last digit you can store it in the array, so you need to initialize an array with the same number of digits in the number, you need to use a <code>String</code> functionality there. But with the above step, the resulting array will be in the reverse order of the digits in your number.</p>\n</li>\n<li><p>So start adding the number from the last index of the array to the first index.</p>\n<pre><code>int num = 1234;\nint[] ar = new int[String.valueOf(num).length()];\nint index = ar.length-1;\n\nwhile(num &gt; 0) {\n\n    ar[index--] = num % 10;\n    num = num/10;\n}\n\nSystem.out.println(java.util.Arrays.toString(ar));\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20770313,"reputation":592,"user_id":15342125,"display_name":"Paul Bradbury"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697643491,"creation_date":1697643491,"answer_id":77317769,"question_id":8033550,"body_markdown":"Simple Iterative\r\n\r\n````java\r\nList&lt;Integer&gt; integerList = new ArrayList&lt;&gt;();\r\nint remainder = 0;\r\nwhile(n&gt;0){\r\n        remainder = n%10;\r\n        n /=10;\r\n    integerList.add(remainder);\r\n}\r\nint[] numArray = integerList.stream().mapToInt(x-&gt;x).toArray();\r\n````","title":"Convert an integer to an array of digits","body":"<p>Simple Iterative</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; integerList = new ArrayList&lt;&gt;();\nint remainder = 0;\nwhile(n&gt;0){\n        remainder = n%10;\n        n /=10;\n    integerList.add(remainder);\n}\nint[] numArray = integerList.stream().mapToInt(x-&gt;x).toArray();\n</code></pre>\n"}],"owner":{"account_id":875897,"reputation":4293,"user_id":925552,"accept_rate":71,"display_name":"hkguile"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":509525,"favorite_count":0,"down_vote_count":1,"up_vote_count":77,"accepted_answer_id":8033593,"answer_count":25,"score":76,"last_activity_date":1697643491,"creation_date":1320649063,"question_id":8033550,"body_markdown":"I try to convert an integer to an array. For example, 1234 to `int[] arr = {1,2,3,4};`.\r\n\r\nI&#39;ve written a function:\r\n\r\n    public static void convertInt2Array(int guess)  {\r\n        String temp = Integer.toString(guess);\r\n        String temp2;\r\n        int temp3;\r\n        int [] newGuess = new int[temp.length()];\r\n        for(int i=0; i&lt;=temp.length(); i++) {\r\n            if (i!=temp.length()) {\r\n                temp2 = temp.substring(i, i+1);\r\n            } else {\r\n                temp2 = temp.substring(i);\r\n                //System.out.println(i);\r\n            }\r\n            temp3 =  Integer.parseInt(temp2);\r\n            newGuess[i] = temp3;\r\n        }\r\n\r\n        for(int i=0; i&lt;=newGuess.length; i++) {\r\n            System.out.println(newGuess[i]);\r\n        }\r\n    }\r\n\r\nBut an exception is thrown:\r\n\r\n&gt;    Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;&quot; &lt;br/&gt;\r\n        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) &lt;br/&gt;\r\n &lt;br/&gt;\r\n        at java.lang.Integer.parseInt(Integer.java:504) &lt;br/&gt;\r\n        at java.lang.Integer.parseInt(Integer.java:527) &lt;br/&gt;\r\n        at q4.test.convertInt2Array(test.java:28) &lt;br/&gt;\r\n        at q4.test.main(test.java:14) &lt;br/&gt;\r\n    Java Result: 1 &lt;br/&gt;\r\n\r\nHow can I fix this?\r\n","title":"Convert an integer to an array of digits","body":"<p>I try to convert an integer to an array. For example, 1234 to <code>int[] arr = {1,2,3,4};</code>.</p>\n<p>I've written a function:</p>\n<pre><code>public static void convertInt2Array(int guess)  {\n    String temp = Integer.toString(guess);\n    String temp2;\n    int temp3;\n    int [] newGuess = new int[temp.length()];\n    for(int i=0; i&lt;=temp.length(); i++) {\n        if (i!=temp.length()) {\n            temp2 = temp.substring(i, i+1);\n        } else {\n            temp2 = temp.substring(i);\n            //System.out.println(i);\n        }\n        temp3 =  Integer.parseInt(temp2);\n        newGuess[i] = temp3;\n    }\n\n    for(int i=0; i&lt;=newGuess.length; i++) {\n        System.out.println(newGuess[i]);\n    }\n}\n</code></pre>\n<p>But an exception is thrown:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;&quot; <br/>\nat java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) <br/>\n<br/>\nat java.lang.Integer.parseInt(Integer.java:504) <br/>\nat java.lang.Integer.parseInt(Integer.java:527) <br/>\nat q4.test.convertInt2Array(test.java:28) <br/>\nat q4.test.main(test.java:14) <br/>\nJava Result: 1 <br/></p>\n</blockquote>\n<p>How can I fix this?</p>\n"},{"tags":["java","math","floating-point-precision"],"comments":[{"owner":{"account_id":3490045,"reputation":3759,"user_id":2919971,"accept_rate":100,"display_name":"MadConan"},"score":0,"creation_date":1428501763,"post_id":29516222,"comment_id":47188944,"body_markdown":"Have you read the API for Math?  There are some details about the precision of the calculations.","body":"Have you read the API for Math?  There are some details about the precision of the calculations."},{"owner":{"account_id":5608394,"reputation":526,"user_id":4442094,"accept_rate":25,"display_name":"Kamil Mahmood"},"score":0,"creation_date":1428503169,"post_id":29516222,"comment_id":47190138,"body_markdown":"Yes I have read API for Math and they say that result can be in 1-2 ulp but it is not pet rule for all floating number","body":"Yes I have read API for Math and they say that result can be in 1-2 ulp but it is not pet rule for all floating number"},{"owner":{"account_id":90081,"reputation":17174,"user_id":248123,"accept_rate":100,"display_name":"andand"},"score":0,"creation_date":1428503752,"post_id":29516222,"comment_id":47190546,"body_markdown":"possible duplicate of [Java Math.cos() Method Does Not Return 0 When Expected](http://stackoverflow.com/questions/2235689/java-math-cos-method-does-not-return-0-when-expected)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2235689/java-math-cos-method-does-not-return-0-when-expected\">Java Math.cos() Method Does Not Return 0 When Expected</a>"},{"owner":{"account_id":5608394,"reputation":526,"user_id":4442094,"accept_rate":25,"display_name":"Kamil Mahmood"},"score":0,"creation_date":1428504942,"post_id":29516222,"comment_id":47191449,"body_markdown":"@andand if you read first line I clearly mentioned that it is not duplicate.","body":"@andand if you read first line I clearly mentioned that it is not duplicate."},{"owner":{"account_id":466379,"reputation":17103,"user_id":871096,"accept_rate":52,"display_name":"Robert Dodier"},"score":0,"creation_date":1428508508,"post_id":29516222,"comment_id":47194093,"body_markdown":"If it&#39;s important to get exact values, my advice is to use a symbolic math library.","body":"If it&#39;s important to get exact values, my advice is to use a symbolic math library."},{"owner":{"account_id":90081,"reputation":17174,"user_id":248123,"accept_rate":100,"display_name":"andand"},"score":1,"creation_date":1428513847,"post_id":29516222,"comment_id":47197306,"body_markdown":"@KamilMahmood: I read the first line, and though you claim they&#39;re not duplicates, I disagree. You&#39;re dealing with the same underlying problem, and once the problem is understood correctly (and those link you cite both described the problem and provided references which should have been useful) a solution should have been clear.  Clearly understanding the problem is the first and most critical step in solving any problem.","body":"@KamilMahmood: I read the first line, and though you claim they&#39;re not duplicates, I disagree. You&#39;re dealing with the same underlying problem, and once the problem is understood correctly (and those link you cite both described the problem and provided references which should have been useful) a solution should have been clear.  Clearly understanding the problem is the first and most critical step in solving any problem."},{"owner":{"account_id":5608394,"reputation":526,"user_id":4442094,"accept_rate":25,"display_name":"Kamil Mahmood"},"score":0,"creation_date":1428514504,"post_id":29516222,"comment_id":47197697,"body_markdown":"@andand All answers tell &quot;Why this problem occur?&quot;. Any answer does not tell &quot;How to solve?&quot; that is why it is not duplicate.","body":"@andand All answers tell &quot;Why this problem occur?&quot;. Any answer does not tell &quot;How to solve?&quot; that is why it is not duplicate."}],"answers":[{"tags":[],"owner":{"account_id":5333725,"reputation":124,"user_id":4253527,"display_name":"Bryan Reilly"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1428500480,"creation_date":1428500480,"answer_id":29516353,"question_id":29516222,"body_markdown":"What is most likely is that Google and Casios calculators simply round down if the result is something smaller than say 1.0E-14.\r\n\r\nSomething similar can be done if the number is too large.\r\n\r\nFloating point inaccuracies are hard to deal with but rounding is the most common way to fix them.\r\n\r\nAnd although it seems like you know what is happening under the hood, this may help you:\r\n\r\nhttp://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html","title":"How to get exact value of Trigonometric functions in Java","body":"<p>What is most likely is that Google and Casios calculators simply round down if the result is something smaller than say 1.0E-14.</p>\n\n<p>Something similar can be done if the number is too large.</p>\n\n<p>Floating point inaccuracies are hard to deal with but rounding is the most common way to fix them.</p>\n\n<p>And although it seems like you know what is happening under the hood, this may help you:</p>\n\n<p><a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow\">http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a></p>\n"},{"comments":[{"owner":{"account_id":5608394,"reputation":526,"user_id":4442094,"accept_rate":25,"display_name":"Kamil Mahmood"},"score":0,"creation_date":1428508895,"post_id":29517232,"comment_id":47194349,"body_markdown":"rounding is acceptable but to some extent. I wonder how Windows default calculator uses the precision up to 31 places and support number up to 3248! = 1.9736342530860425312047080034031e+9997 and calculate everything perfect. What data type they use.","body":"rounding is acceptable but to some extent. I wonder how Windows default calculator uses the precision up to 31 places and support number up to 3248! = 1.9736342530860425312047080034031e+9997 and calculate everything perfect. What data type they use."},{"owner":{"account_id":511240,"reputation":3296,"user_id":2363540,"display_name":"Douglas Zare"},"score":0,"creation_date":1428512021,"post_id":29517232,"comment_id":47196262,"body_markdown":"The Windows calculator uses much higher precision than is ordinarily used. It probably uses argument reduction. One way to see that it is not perfect is to compute something like sind(361)-sind(1). That&#39;s sine in degrees. On my computer, version 6.1 Build 7601, it says the difference is not 0, but 2.78633...E-41. This is probably because it calculates sind(1) with more precision than sind(361), since it calculates the same difference for sind(721)-sind(1) and sind(1081)-sin(1), but a different value for sind(3601)-sind(1).","body":"The Windows calculator uses much higher precision than is ordinarily used. It probably uses argument reduction. One way to see that it is not perfect is to compute something like sind(361)-sind(1). That&#39;s sine in degrees. On my computer, version 6.1 Build 7601, it says the difference is not 0, but 2.78633...E-41. This is probably because it calculates sind(1) with more precision than sind(361), since it calculates the same difference for sind(721)-sind(1) and sind(1081)-sin(1), but a different value for sind(3601)-sind(1)."},{"owner":{"account_id":511240,"reputation":3296,"user_id":2363540,"display_name":"Douglas Zare"},"score":0,"creation_date":1428512172,"post_id":29517232,"comment_id":47196366,"body_markdown":"If you use BigDecimals, and argument reduction, you can calculate your own values for sin and cosine using Taylor series by reducing the argument to be close to 0, and estimating how many terms you need for the accuracy you want. This is not efficient, but for this purpose there may be no real difference between 1 microsecond and 1 millisecond.","body":"If you use BigDecimals, and argument reduction, you can calculate your own values for sin and cosine using Taylor series by reducing the argument to be close to 0, and estimating how many terms you need for the accuracy you want. This is not efficient, but for this purpose there may be no real difference between 1 microsecond and 1 millisecond."},{"owner":{"account_id":5608394,"reputation":526,"user_id":4442094,"accept_rate":25,"display_name":"Kamil Mahmood"},"score":0,"creation_date":1428513641,"post_id":29517232,"comment_id":47197190,"body_markdown":"Now I am using (Math.floor(Math.ulp(value))) and it is yielding desired result","body":"Now I am using (Math.floor(Math.ulp(value))) and it is yielding desired result"},{"owner":{"account_id":10181473,"reputation":464,"user_id":7518083,"display_name":"Marfin. F"},"score":0,"creation_date":1600820152,"post_id":29517232,"comment_id":113206948,"body_markdown":"I am getting all the answer 0 using your answer @KamilMahmood","body":"I am getting all the answer 0 using your answer @KamilMahmood"}],"tags":[],"owner":{"account_id":511240,"reputation":3296,"user_id":2363540,"display_name":"Douglas Zare"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1428502522,"creation_date":1428502522,"answer_id":29517232,"question_id":29516222,"body_markdown":"I am skeptical of many of the &quot;correct answer&quot; values you give. sin(pi) is 0, but Math.PI is not pi, it is an approximation. Sine of something that is only close to PI shouldn&#39;t give you 0. How is the user entering the values? If the user enters a decimal input, with 16 decimal places, he/she should expect to have some results that are off in the 16th decimal place. If a user asks for sin(10^-15) and you change the input to 0 and return a result of 0, then you make it so the user can&#39;t compute a numerical derivative for sin x at 0 by computing `(sin(10^-15)-sin(0))/(10^-15-0)`. The same is true if the user enters an approximation like Math.PI and you change the input to pi.\r\n\r\nAs Bryan Reilly answered, you can round results before presenting them to the user, and this will avoid showing a value like 5*10^-15 instead of 0. \r\n\r\nYou can shift the inputs to ranges near 0. For example, for values of x greater than pi or less than -pi, you can subtract off a multiple of 2pi to get a value in [-pi,pi]. Then you can use trig identities to reduce the domain you need further to [0,pi/2]. For example, if x is in [-pi,pi/2], then use sin(x) = -sin(x+pi). \r\n\r\nIf any roundoff errors at all are unacceptable, then perhaps you should make a symbolic calculator instead of a floating point calculator.","title":"How to get exact value of Trigonometric functions in Java","body":"<p>I am skeptical of many of the \"correct answer\" values you give. sin(pi) is 0, but Math.PI is not pi, it is an approximation. Sine of something that is only close to PI shouldn't give you 0. How is the user entering the values? If the user enters a decimal input, with 16 decimal places, he/she should expect to have some results that are off in the 16th decimal place. If a user asks for sin(10^-15) and you change the input to 0 and return a result of 0, then you make it so the user can't compute a numerical derivative for sin x at 0 by computing <code>(sin(10^-15)-sin(0))/(10^-15-0)</code>. The same is true if the user enters an approximation like Math.PI and you change the input to pi.</p>\n\n<p>As Bryan Reilly answered, you can round results before presenting them to the user, and this will avoid showing a value like 5*10^-15 instead of 0. </p>\n\n<p>You can shift the inputs to ranges near 0. For example, for values of x greater than pi or less than -pi, you can subtract off a multiple of 2pi to get a value in [-pi,pi]. Then you can use trig identities to reduce the domain you need further to [0,pi/2]. For example, if x is in [-pi,pi/2], then use sin(x) = -sin(x+pi). </p>\n\n<p>If any roundoff errors at all are unacceptable, then perhaps you should make a symbolic calculator instead of a floating point calculator.</p>\n"},{"comments":[{"owner":{"account_id":5608394,"reputation":526,"user_id":4442094,"accept_rate":25,"display_name":"Kamil Mahmood"},"score":0,"creation_date":1428506712,"post_id":29518684,"comment_id":47192803,"body_markdown":"Math.sin(), Math.cos() and Math.tan() take a value in Double which has max precision of 15.","body":"Math.sin(), Math.cos() and Math.tan() take a value in Double which has max precision of 15."}],"tags":[],"owner":{"account_id":5306399,"reputation":138,"user_id":4642801,"display_name":"APengue"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428507109,"creation_date":1428506219,"answer_id":29518684,"question_id":29516222,"body_markdown":"Maybe they use something like the [Big Decimal Class][1]\n\n\nSorry I&#39;m not yet allowed to provide a simple comment.\n\nFor example yesterday I created a simple swing application which converted from decimal to unsigned int binary and vice versa. The problem is, what the user enters in a text box are String values to convert, and they can easily exceed even Long.MAX_VALUE. \n\nWhat I wanted was for the user to enter as many digits as desired in both cases, so I used the [Big Integer Class][2], which is similar to Big Decimal but is suited for Integer values. The result of using it allows users to enter strings of incredible length, and for my program to output the conversion in as much or even more digits, far, far exceeding Long.MAX_VALUE.\n\n\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html\n\nHowever, since the Math functions use doubles, we are still limited here with the &#39;Big&#39; classes, which initialize with doubles and strings. If you have an application where you can represent numbers with strings (which can have a max character length of Integer.MAX_VALUE), then the &#39;Big&#39; classes are great. However if you want to initialize with a double, you are obviously limited by the constraints of double. ","title":"How to get exact value of Trigonometric functions in Java","body":"<p>Maybe they use something like the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\" rel=\"nofollow\">Big Decimal Class</a></p>\n\n<p>Sorry I'm not yet allowed to provide a simple comment.</p>\n\n<p>For example yesterday I created a simple swing application which converted from decimal to unsigned int binary and vice versa. The problem is, what the user enters in a text box are String values to convert, and they can easily exceed even Long.MAX_VALUE. </p>\n\n<p>What I wanted was for the user to enter as many digits as desired in both cases, so I used the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html\" rel=\"nofollow\">Big Integer Class</a>, which is similar to Big Decimal but is suited for Integer values. The result of using it allows users to enter strings of incredible length, and for my program to output the conversion in as much or even more digits, far, far exceeding Long.MAX_VALUE.</p>\n\n<p>However, since the Math functions use doubles, we are still limited here with the 'Big' classes, which initialize with doubles and strings. If you have an application where you can represent numbers with strings (which can have a max character length of Integer.MAX_VALUE), then the 'Big' classes are great. However if you want to initialize with a double, you are obviously limited by the constraints of double. </p>\n"},{"comments":[{"owner":{"account_id":5392262,"reputation":4671,"user_id":4294399,"display_name":"General Grievance"},"score":0,"creation_date":1697634548,"post_id":77294518,"comment_id":136304443,"body_markdown":"How did you get the exact value for Pi? Doesn&#39;t this only cover a tiny slice of special points?","body":"How did you get the exact value for Pi? Doesn&#39;t this only cover a tiny slice of special points?"}],"tags":[],"owner":{"account_id":29646997,"reputation":1,"user_id":22721798,"display_name":"TheBoy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697643169,"creation_date":1697317712,"answer_id":77294518,"question_id":29516222,"body_markdown":"I solved the problem only about the special points. For example for cosx :\r\n (x = 2kπ+π/2) and     \r\n (x = 2kπ-π/2)     cosx = 0\r\n\r\n Otherwise         cosx = Math.cos(x)\r\n\r\nSo I have solved the problem.\r\n","title":"How to get exact value of Trigonometric functions in Java","body":"<p>I solved the problem only about the special points. For example for cosx :\n(x = 2kπ+π/2) and<br />\n(x = 2kπ-π/2)     cosx = 0</p>\n<p>Otherwise         cosx = Math.cos(x)</p>\n<p>So I have solved the problem.</p>\n"}],"owner":{"account_id":5608394,"reputation":526,"user_id":4442094,"accept_rate":25,"display_name":"Kamil Mahmood"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2250,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1697643169,"creation_date":1428500177,"question_id":29516222,"body_markdown":"This is not duplicate of [this][1], and [this][2]\r\nI am developing a Calculator application for Android and I have been searching web for past 20-30 days but did not find any reasonable answer. I have also studied many papers on Floating Point Computation. \r\nI have also tried both Math and StrictMath library.\r\n\r\nThe following values I have tried\r\n\r\n    Math.cos(Math.PI/4) result in 0.7071067811865476 which is correct answer\r\n    \r\n    Math.cos(Math.PI/2) result in 6.123233995736766E-17 correct answer is 0\r\n    \r\n    Math.cos(Math.PI) result in -1.0 which is correct\r\n    \r\n    Math.cos((3*Math.PI)/2) result in -1.8369701987210297E-16 correct answer is 0\r\n    \r\n    Math.cos(Math.PI*2) result in 1.0 which is correct\r\n    \r\n    \r\n    \r\n    Math.sin(Math.PI/4) result in 0.7071067811865476 which is correct answer\r\n    \r\n    Math.sin(Math.PI/2) result in 1 which is correct\r\n    \r\n    Math.sin(Math.PI) result in 1.2246467991473532E-16 correct answer is 0\r\n    \r\n    Math.sin((3*Math.PI)/2) result in -1 which is correct\r\n    \r\n    Math.sin(Math.PI*2) result in -2.4492935982947064E-16 correct answer is 0\r\n    \r\n    \r\n    \r\n    Math.tan(Math.PI/4) result in 0.999999999999999 correct answer is 1\r\n    \r\n    Math.tan(Math.PI/2) result in 1.633123935319537E16 correct answer is NaN\r\n    \r\n    Math.tan(Math.PI) result in -1.2246467991473532E-16 correct answer is 0\r\n    \r\n    Math.tan((3*Math.PI)/2) result in 5.443746451065123E15 correct answer is NaN\r\n    \r\n    Math.tan(Math.PI*2) result in -2.4492935982947064E-16 correct answer is 0\r\n\r\n\r\nWhen I tried all these calculations on Google&#39;s Official calculator which is included in Stock Lollipop yielded all correct answers except for tan((3*PI)/2) and tan(PI/2)\r\n\r\nWhen I tried all these calculation on my Casio fx-991 PLUS all answers were correct.\r\n\r\nNow my question is &quot;How Google&#39;s calculator and Casio&#39;s calculator managed to get correct answer using limited floating precision of CPU?&quot; and &quot;How can I\r\nachieve same output?&quot;\r\n\r\n  [1]: https://stackoverflow.com/questions/2235689/java-math-cos-method-does-not-return-0-when-expected\r\n  [2]: https://stackoverflow.com/questions/9096364/how-to-get-user-friendly-values-for-trigonometric-functions","title":"How to get exact value of Trigonometric functions in Java","body":"<p>This is not duplicate of <a href=\"https://stackoverflow.com/questions/2235689/java-math-cos-method-does-not-return-0-when-expected\">this</a>, and <a href=\"https://stackoverflow.com/questions/9096364/how-to-get-user-friendly-values-for-trigonometric-functions\">this</a>\nI am developing a Calculator application for Android and I have been searching web for past 20-30 days but did not find any reasonable answer. I have also studied many papers on Floating Point Computation. \nI have also tried both Math and StrictMath library.</p>\n\n<p>The following values I have tried</p>\n\n<pre><code>Math.cos(Math.PI/4) result in 0.7071067811865476 which is correct answer\n\nMath.cos(Math.PI/2) result in 6.123233995736766E-17 correct answer is 0\n\nMath.cos(Math.PI) result in -1.0 which is correct\n\nMath.cos((3*Math.PI)/2) result in -1.8369701987210297E-16 correct answer is 0\n\nMath.cos(Math.PI*2) result in 1.0 which is correct\n\n\n\nMath.sin(Math.PI/4) result in 0.7071067811865476 which is correct answer\n\nMath.sin(Math.PI/2) result in 1 which is correct\n\nMath.sin(Math.PI) result in 1.2246467991473532E-16 correct answer is 0\n\nMath.sin((3*Math.PI)/2) result in -1 which is correct\n\nMath.sin(Math.PI*2) result in -2.4492935982947064E-16 correct answer is 0\n\n\n\nMath.tan(Math.PI/4) result in 0.999999999999999 correct answer is 1\n\nMath.tan(Math.PI/2) result in 1.633123935319537E16 correct answer is NaN\n\nMath.tan(Math.PI) result in -1.2246467991473532E-16 correct answer is 0\n\nMath.tan((3*Math.PI)/2) result in 5.443746451065123E15 correct answer is NaN\n\nMath.tan(Math.PI*2) result in -2.4492935982947064E-16 correct answer is 0\n</code></pre>\n\n<p>When I tried all these calculations on Google's Official calculator which is included in Stock Lollipop yielded all correct answers except for tan((3*PI)/2) and tan(PI/2)</p>\n\n<p>When I tried all these calculation on my Casio fx-991 PLUS all answers were correct.</p>\n\n<p>Now my question is \"How Google's calculator and Casio's calculator managed to get correct answer using limited floating precision of CPU?\" and \"How can I\nachieve same output?\"</p>\n"},{"tags":["java","spring-boot","spring-security","keycloak"],"owner":{"account_id":11615535,"reputation":233,"user_id":8508429,"accept_rate":71,"display_name":"Fasco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697642946,"creation_date":1697642946,"question_id":77317701,"body_markdown":"I have three applications (A, B, and C) integrated with the same Keycloak realm, each having different clients. They all use their backend as a resource (not a client), and Vue.js on the frontend acts as the client.\r\n\r\n- **Application A:** \r\n  - Backend: Spring Boot 1.5\r\n  - Frontend: Vue.js\r\n  \r\n- **Application B:** \r\n  - Backend: Spring Boot 2.5 (recently upgraded)\r\n  - Frontend: Vue.js\r\n  \r\n- **Application C:** \r\n  - Backend: Spring Boot 1.5\r\n  - Frontend: Vue.js\r\n\r\n### Issue:\r\nWhen I logout from Application A, I still remain logged in on Application B, which does not return a 401 on various calls even though I am logged out. However, I am correctly logged out from Application C. On the other hand, if I logout from Application B, I am also logged out from Applications A and C and receive a 401 from the backend. This issue seems to have appeared after upgrading Application B to Spring Boot 2.5.\r\n\r\n### Configuration of Application B:\r\n**Properties File:**\r\n```properties\r\n# Context of the application\r\nserver.contextPath=/appli-squelette\r\n\r\n# Keycloak Information\r\nkeycloak.url= [KEYCLOAK_URL]\r\nkeycloak.protocol=openid-connect\r\nkeycloak.redirect_uri=[REDIRECT_URI]\r\nkeycloak.client.id=[CLIENT_ID]\r\nkeycloak.scope=openid profile\r\n\r\n# JWT Security Configuration\r\nspring.security.oauth2.resourceserver.jwt.issuer-uri=${keycloak.url}\r\nspring.security.oauth2.resourceserver.jwt.jwk-set-uri=${keycloak.url}/protocol/openid-connect/certs\r\n\r\n# Other security properties\r\nsecurity.oauth2.resource.preferTokenInfo=false\r\nsecurity.basic.enabled=false\r\n```\r\n\r\n### OAuth2AuthenticationConfiguration.java:\r\n```java\r\n@Configuration\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\npublic class OAuth2AuthenticationConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    @Value(&quot;${keycloak.client.id}&quot;)\r\n    private String clientId;\r\n\r\n    @Bean\r\n    public RequestMatcher resources() {\r\n        return AnyRequestMatcher.INSTANCE;\r\n    }\r\n\r\n    @Bean\r\n    public RequestContextListener requestContextListener() {\r\n        return new RequestContextListener();\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\r\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(new GrantedAuthoritiesExtractor(clientId));\r\n\r\n        http\r\n                .authorizeRequests()\r\n                .antMatchers(\r\n                        &quot;/rest/version&quot;,\r\n                        &quot;/rest/constantes/**&quot;,\r\n                        &quot;/rest/swagger-ui.html&quot;\r\n                ).permitAll()\r\n                .antMatchers(&quot;/rest/**&quot;).authenticated()\r\n                .and()\r\n                .logout().permitAll().logoutSuccessUrl(&quot;/&quot;)\r\n                .and()\r\n                .oauth2ResourceServer()\r\n                .jwt()\r\n                .jwtAuthenticationConverter(jwtAuthenticationConverter);\r\n    }\r\n}\r\n```\r\n### Question:\r\nHas anyone encountered a similar issue, particularly after upgrading to Spring Boot 2.5? Is there any configuration that I might be missing or that needs to be updated to ensure consistent logout behavior across all applications?\r\n\r\nAny help or insights would be greatly appreciated!","title":"Spring Boot 2.5 with Keycloak: Inconsistent Logout Behavior Across Multiple Applications","body":"<p>I have three applications (A, B, and C) integrated with the same Keycloak realm, each having different clients. They all use their backend as a resource (not a client), and Vue.js on the frontend acts as the client.</p>\n<ul>\n<li><p><strong>Application A:</strong></p>\n<ul>\n<li>Backend: Spring Boot 1.5</li>\n<li>Frontend: Vue.js</li>\n</ul>\n</li>\n<li><p><strong>Application B:</strong></p>\n<ul>\n<li>Backend: Spring Boot 2.5 (recently upgraded)</li>\n<li>Frontend: Vue.js</li>\n</ul>\n</li>\n<li><p><strong>Application C:</strong></p>\n<ul>\n<li>Backend: Spring Boot 1.5</li>\n<li>Frontend: Vue.js</li>\n</ul>\n</li>\n</ul>\n<h3>Issue:</h3>\n<p>When I logout from Application A, I still remain logged in on Application B, which does not return a 401 on various calls even though I am logged out. However, I am correctly logged out from Application C. On the other hand, if I logout from Application B, I am also logged out from Applications A and C and receive a 401 from the backend. This issue seems to have appeared after upgrading Application B to Spring Boot 2.5.</p>\n<h3>Configuration of Application B:</h3>\n<p><strong>Properties File:</strong></p>\n<pre><code># Context of the application\nserver.contextPath=/appli-squelette\n\n# Keycloak Information\nkeycloak.url= [KEYCLOAK_URL]\nkeycloak.protocol=openid-connect\nkeycloak.redirect_uri=[REDIRECT_URI]\nkeycloak.client.id=[CLIENT_ID]\nkeycloak.scope=openid profile\n\n# JWT Security Configuration\nspring.security.oauth2.resourceserver.jwt.issuer-uri=${keycloak.url}\nspring.security.oauth2.resourceserver.jwt.jwk-set-uri=${keycloak.url}/protocol/openid-connect/certs\n\n# Other security properties\nsecurity.oauth2.resource.preferTokenInfo=false\nsecurity.basic.enabled=false\n</code></pre>\n<h3>OAuth2AuthenticationConfiguration.java:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\npublic class OAuth2AuthenticationConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Value(&quot;${keycloak.client.id}&quot;)\n    private String clientId;\n\n    @Bean\n    public RequestMatcher resources() {\n        return AnyRequestMatcher.INSTANCE;\n    }\n\n    @Bean\n    public RequestContextListener requestContextListener() {\n        return new RequestContextListener();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\n        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(new GrantedAuthoritiesExtractor(clientId));\n\n        http\n                .authorizeRequests()\n                .antMatchers(\n                        &quot;/rest/version&quot;,\n                        &quot;/rest/constantes/**&quot;,\n                        &quot;/rest/swagger-ui.html&quot;\n                ).permitAll()\n                .antMatchers(&quot;/rest/**&quot;).authenticated()\n                .and()\n                .logout().permitAll().logoutSuccessUrl(&quot;/&quot;)\n                .and()\n                .oauth2ResourceServer()\n                .jwt()\n                .jwtAuthenticationConverter(jwtAuthenticationConverter);\n    }\n}\n</code></pre>\n<h3>Question:</h3>\n<p>Has anyone encountered a similar issue, particularly after upgrading to Spring Boot 2.5? Is there any configuration that I might be missing or that needs to be updated to ensure consistent logout behavior across all applications?</p>\n<p>Any help or insights would be greatly appreciated!</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":1738216,"reputation":1174,"user_id":1590293,"accept_rate":71,"display_name":"Trebla"},"score":0,"creation_date":1553798481,"post_id":55401812,"comment_id":97529993,"body_markdown":"It does.  I did work around it as you suggest, but was still curious if it was possible.  Good to know it&#39;s not.","body":"It does.  I did work around it as you suggest, but was still curious if it was possible.  Good to know it&#39;s not."}],"tags":[],"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1553788140,"creation_date":1553788140,"answer_id":55401812,"question_id":55400584,"body_markdown":"&gt; Is it possible to differentiate between properties set on the command\r\n&gt; line when starting the program vs those that come from elsewhere?\r\n\r\nAs far as I know, this is not supported.  By the time your code is executing, the command line system properties have already been munged with all of the others.\r\n\r\nDepending on what you are really trying to accomplish, one thing to consider might be to not set them as command line system properties but instead pass them as parameters to your program so you can evaluate them and then set them as system properties in your `main` method before much of your other code executes.\r\n\r\nI hope that helps.","title":"Get list of system properties from command line only","body":"<blockquote>\n  <p>Is it possible to differentiate between properties set on the command\n  line when starting the program vs those that come from elsewhere?</p>\n</blockquote>\n\n<p>As far as I know, this is not supported.  By the time your code is executing, the command line system properties have already been munged with all of the others.</p>\n\n<p>Depending on what you are really trying to accomplish, one thing to consider might be to not set them as command line system properties but instead pass them as parameters to your program so you can evaluate them and then set them as system properties in your <code>main</code> method before much of your other code executes.</p>\n\n<p>I hope that helps.</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662996107,"creation_date":1662996107,"answer_id":73691566,"question_id":55400584,"body_markdown":"You can introspect JVM itself:\r\n\r\nhttps://stackoverflow.com/questions/1490869/how-to-get-vm-arguments-from-inside-of-java-application\r\n\r\n```java\r\nimport java.lang.management.ManagementFactory;\r\nimport java.lang.management.RuntimeMXBean;\r\n...\r\nRuntimeMXBean runtimeMxBean = ManagementFactory.getRuntimeMXBean();\r\nList&lt;String&gt; arguments = runtimeMxBean.getInputArguments();\r\n```\r\n\r\nSearch for `-D` options. I don&#39;t recommend this solution, the API is for logging/monitoring/debugging. Usage in business code is code smell.","title":"Get list of system properties from command line only","body":"<p>You can introspect JVM itself:</p>\n<p><a href=\"https://stackoverflow.com/questions/1490869/how-to-get-vm-arguments-from-inside-of-java-application\">How to get VM arguments from inside of Java application?</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.management.ManagementFactory;\nimport java.lang.management.RuntimeMXBean;\n...\nRuntimeMXBean runtimeMxBean = ManagementFactory.getRuntimeMXBean();\nList&lt;String&gt; arguments = runtimeMxBean.getInputArguments();\n</code></pre>\n<p>Search for <code>-D</code> options. I don't recommend this solution, the API is for logging/monitoring/debugging. Usage in business code is code smell.</p>\n"}],"owner":{"account_id":1738216,"reputation":1174,"user_id":1590293,"accept_rate":71,"display_name":"Trebla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3486,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":55401812,"answer_count":2,"score":1,"last_activity_date":1697642577,"creation_date":1553784669,"question_id":55400584,"body_markdown":"This is similar to a pretty basic question, I&#39;m trying to find a list of system properties passed to the java program from the command line only.  E.g., running\r\n\r\n    java -Dsome.property=value -Dother.property=value2\r\n\r\nI&#39;m trying to get a list of just these properties.  Ignore the specific property names in the example, the actual command line arguments will be arbitrarily named so it is not feasible to explicitly call `System.getProperty(&quot;some.property&quot;)` for each property I need.\r\n\r\n`System.getProperties()` returns many properties that I do not have any interest in. Is it possible to differentiate between properties set on the command line when starting the program vs those that come from elsewhere?","title":"Get list of system properties from command line only","body":"<p>This is similar to a pretty basic question, I'm trying to find a list of system properties passed to the java program from the command line only.  E.g., running</p>\n<pre><code>java -Dsome.property=value -Dother.property=value2\n</code></pre>\n<p>I'm trying to get a list of just these properties.  Ignore the specific property names in the example, the actual command line arguments will be arbitrarily named so it is not feasible to explicitly call <code>System.getProperty(&quot;some.property&quot;)</code> for each property I need.</p>\n<p><code>System.getProperties()</code> returns many properties that I do not have any interest in. Is it possible to differentiate between properties set on the command line when starting the program vs those that come from elsewhere?</p>\n"},{"tags":["java","guava"],"answers":[{"comments":[{"owner":{"account_id":37366,"reputation":3590,"user_id":106781,"accept_rate":50,"display_name":"GreenieMeanie"},"score":0,"creation_date":1352485641,"post_id":13313635,"comment_id":18159776,"body_markdown":"I think it&#39;s an actual application level flaw and I was perhaps too quick to blame the LoadingCache...will do more tests.","body":"I think it&#39;s an actual application level flaw and I was perhaps too quick to blame the LoadingCache...will do more tests."}],"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1352484651,"creation_date":1352484651,"answer_id":13313635,"question_id":13313533,"body_markdown":"...I&#39;m not clear whether you&#39;re describing your expectations or your observations, but `invalidate` should remove the entry immediately -- not waiting for another query -- and should force the value to get reloaded on the very next query to that key.  If that&#39;s not what happens, then that&#39;s a bug.","title":"Guava CacheLoader - invalidate does not immediately invalidate entry if both expireAfterWrite and expireAfterAccess are set","body":"<p>...I'm not clear whether you're describing your expectations or your observations, but <code>invalidate</code> should remove the entry immediately -- not waiting for another query -- and should force the value to get reloaded on the very next query to that key.  If that's not what happens, then that's a bug.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1697811126,"post_id":77317623,"comment_id":136330437,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77317623/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29701434,"reputation":1,"user_id":22763490,"display_name":"Mohamed Reda Rahou"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697642316,"creation_date":1697642316,"answer_id":77317623,"question_id":13313533,"body_markdown":"You must use your cache in a singleton or Application context, otherwise, the cache class will not retrieve the right instance to invalidate cache (for example if it&#39;s injected into session or request scope)","title":"Guava CacheLoader - invalidate does not immediately invalidate entry if both expireAfterWrite and expireAfterAccess are set","body":"<p>You must use your cache in a singleton or Application context, otherwise, the cache class will not retrieve the right instance to invalidate cache (for example if it's injected into session or request scope)</p>\n"}],"owner":{"account_id":37366,"reputation":3590,"user_id":106781,"accept_rate":50,"display_name":"GreenieMeanie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6259,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":13313635,"answer_count":2,"score":1,"last_activity_date":1697642316,"creation_date":1352484272,"question_id":13313533,"body_markdown":"So for example:\n\n    CacheBuilder.newBuilder()\n                .maximumSize(1000)\n                .expireAfterAccess(1, TimeUnit.MINUTES)\n                .expireAfterWrite(1, TimeUnit.MINUTES)\n                .build(new CacheLoader&lt;String, Object&gt;() {\n                    @Override\n                    public Object load (String key) {\n                        return ...;\n                    }\n                });\n\nIf calling `invalidate(key)` on the returned instance, a subsequent call to `getUnchecked()` will ALWAYS use the previous value until at least 1 minute has passed in which cause it will call `load(key)` again. A call to `cleanUp()` right after `invalidate()` seems to have no effect either.\n\nAm I using this feature incorrectly or not understanding something about how the caching is working? \n\nPer [http://code.google.com/p/guava-libraries/wiki/CachesExplained][1]:\n\n&gt; &quot;At any time, you may explicitly invalidate cache entries rather than waiting for entries to be evicted. This can be done: \n&gt;\n&gt; individually, using Cache.invalidate(key)&quot;\n\nI would assume that the call to invalidate would take precedence and always make the entry be eligible for eviction (ie, the very next getUnchecked call) even if the time is less than 1 minute.\n\n\nEdit:: I figured out my issue. The above observation is indeed true and the expected nature of the cache. However, my specific was issue was that I was sometimes calling invalidateAll([]) with an empty List (which doesn&#39;t invalidate anything), when I really needed to call invalidateAll() with no parameters (which invalidates everything). I would almost expect invalideAll([]) to be equivalent to invalidateAll(), but I could see where that would lead to some confusion.\n\n\n  [1]: http://code.google.com/p/guava-libraries/wiki/CachesExplained","title":"Guava CacheLoader - invalidate does not immediately invalidate entry if both expireAfterWrite and expireAfterAccess are set","body":"<p>So for example:</p>\n<pre><code>CacheBuilder.newBuilder()\n            .maximumSize(1000)\n            .expireAfterAccess(1, TimeUnit.MINUTES)\n            .expireAfterWrite(1, TimeUnit.MINUTES)\n            .build(new CacheLoader&lt;String, Object&gt;() {\n                @Override\n                public Object load (String key) {\n                    return ...;\n                }\n            });\n</code></pre>\n<p>If calling <code>invalidate(key)</code> on the returned instance, a subsequent call to <code>getUnchecked()</code> will ALWAYS use the previous value until at least 1 minute has passed in which cause it will call <code>load(key)</code> again. A call to <code>cleanUp()</code> right after <code>invalidate()</code> seems to have no effect either.</p>\n<p>Am I using this feature incorrectly or not understanding something about how the caching is working?</p>\n<p>Per <a href=\"http://code.google.com/p/guava-libraries/wiki/CachesExplained\" rel=\"nofollow noreferrer\">http://code.google.com/p/guava-libraries/wiki/CachesExplained</a>:</p>\n<blockquote>\n<p>&quot;At any time, you may explicitly invalidate cache entries rather than waiting for entries to be evicted. This can be done:</p>\n<p>individually, using Cache.invalidate(key)&quot;</p>\n</blockquote>\n<p>I would assume that the call to invalidate would take precedence and always make the entry be eligible for eviction (ie, the very next getUnchecked call) even if the time is less than 1 minute.</p>\n<p>Edit:: I figured out my issue. The above observation is indeed true and the expected nature of the cache. However, my specific was issue was that I was sometimes calling invalidateAll([]) with an empty List (which doesn't invalidate anything), when I really needed to call invalidateAll() with no parameters (which invalidates everything). I would almost expect invalideAll([]) to be equivalent to invalidateAll(), but I could see where that would lead to some confusion.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1688981638,"post_id":76652437,"comment_id":135143172,"body_markdown":"`64&lt;4` is a boolean expression and it evaluates to `false`. Does this answer your question?","body":"<code>64&lt;4</code> is a boolean expression and it evaluates to <code>false</code>. Does this answer your question?"},{"owner":{"account_id":1718670,"reputation":4777,"user_id":1575188,"display_name":"fantaghirocco"},"score":1,"creation_date":1688986094,"post_id":76652437,"comment_id":135144039,"body_markdown":"please change the title according to the question: &quot;I have a question&quot; could be any question title - &quot;I&#39;m learning Java&quot; is also irrelevant to the question. I also suggest to take a look at [TOUR] and [ASK]","body":"please change the title according to the question: &quot;I have a question&quot; could be any question title - &quot;I&#39;m learning Java&quot; is also irrelevant to the question. I also suggest to take a look at <a href=\"https://stackoverflow.com/tour\">TOUR</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1688986765,"post_id":76652437,"comment_id":135144175,"body_markdown":"Your question suggests that you&#39;re just now learning the most basic concepts of Java programming. Since this site is not geared to work in place of an introduction to programming website, and since it is best to get this information from tutorials, you will probably want to start there. You can find links to great Java tutorials and other language resources in the [java info](https://stackoverflow.com/tags/java/info) section of the [tag:java] tag. Start here: [The Java™ Tutorials](https://docs.oracle.com/javase/tutorial/tutorialLearningPaths.html).","body":"Your question suggests that you&#39;re just now learning the most basic concepts of Java programming. Since this site is not geared to work in place of an introduction to programming website, and since it is best to get this information from tutorials, you will probably want to start there. You can find links to great Java tutorials and other language resources in the <a href=\"https://stackoverflow.com/tags/java/info\">java info</a> section of the <a href=\"https://stackoverflow.com/questions/tagged/java\">java</a> tag. Start here: <a href=\"https://docs.oracle.com/javase/tutorial/tutorialLearningPaths.html\" rel=\"nofollow noreferrer\">The Java™ Tutorials</a>."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1688987264,"post_id":76652437,"comment_id":135144295,"body_markdown":"Voting to close question as &quot;resolved in a way not likely to help future readers&quot;","body":"Voting to close question as &quot;resolved in a way not likely to help future readers&quot;"}],"answers":[{"tags":[],"owner":{"account_id":23649810,"reputation":31,"user_id":17678847,"display_name":"Ghassan Dabak"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688981980,"creation_date":1688981933,"answer_id":76652506,"question_id":76652437,"body_markdown":"It is returning a boolean because you have passed a boolean expression by using the `&lt;` operator. Your print statement will see it like this ***is 64 less than 4?***\r\n\r\nSo it would return a boolean","title":"Why does my print function give me output as &quot;false&quot;?","body":"<p>It is returning a boolean because you have passed a boolean expression by using the <code>&lt;</code> operator. Your print statement will see it like this <em><strong>is 64 less than 4?</strong></em></p>\n<p>So it would return a boolean</p>\n"},{"tags":[],"owner":{"display_name":"user22202762"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688982090,"creation_date":1688982090,"answer_id":76652523,"question_id":76652437,"body_markdown":"According to Java programming language documentation of class `java.lang.System` `out` is a field of type `java.io.PrintStream` class that encapsulates the `println` method with one of its overloads accepting a `boolean` argument that is the type of comparison passed in when calling `System.out.println(64&lt;6)`","title":"Why does my print function give me output as &quot;false&quot;?","body":"<p>According to Java programming language documentation of class <code>java.lang.System</code> <code>out</code> is a field of type <code>java.io.PrintStream</code> class that encapsulates the <code>println</code> method with one of its overloads accepting a <code>boolean</code> argument that is the type of comparison passed in when calling <code>System.out.println(64&lt;6)</code></p>\n"},{"tags":[],"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688982771,"creation_date":1688982771,"answer_id":76652596,"question_id":76652437,"body_markdown":"Note sure what you were trying to achieve but you&#39;re simply printing out the result of ```64 &lt; 4``` which is ```false``` because 64 is not less than 4.\r\n\r\nI&#39;ll assume that you&#39;re actually trying to print out the equation rather than the result in which case you&#39;ll have to print it out as a ```String``` by putting it in double quotes like this:\r\n\r\n    System.out.println(&quot;64 &lt; 4&quot;);\r\n\r\nThis will print out ```64 &lt; 4```\r\n\r\nOr to include the result:\r\n\r\n    System.out.println(&quot;64 &lt; 4 = &quot; + (64 &lt; 4));\r\n\r\nwhich will print out\r\n\r\n    64 &lt; 4 = false","title":"Why does my print function give me output as &quot;false&quot;?","body":"<p>Note sure what you were trying to achieve but you're simply printing out the result of <code>64 &lt; 4</code> which is <code>false</code> because 64 is not less than 4.</p>\n<p>I'll assume that you're actually trying to print out the equation rather than the result in which case you'll have to print it out as a <code>String</code> by putting it in double quotes like this:</p>\n<pre><code>System.out.println(&quot;64 &lt; 4&quot;);\n</code></pre>\n<p>This will print out <code>64 &lt; 4</code></p>\n<p>Or to include the result:</p>\n<pre><code>System.out.println(&quot;64 &lt; 4 = &quot; + (64 &lt; 4));\n</code></pre>\n<p>which will print out</p>\n<pre><code>64 &lt; 4 = false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688988645,"creation_date":1688988645,"answer_id":76653298,"question_id":76652437,"body_markdown":"&gt; _&#39;... the task of giving output as true and false is with boolean datatype right? ...&#39;_\r\n\r\nCorrect, a _Boolean_ data-type is used for depicting _true_ or _false_ values.  \r\n_[Wikipedia &amp;ndash; Boolean data type](https://en.wikipedia.org/wiki/Boolean_data_type)_.\r\n\r\n&gt; _&#39;... Why does my print function give me output as &quot;false&quot; ...&#39;_\r\n\r\nThe reason your code works is because the result of your _[statement](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html)_ produces a _boolean_ value.\r\n\r\nThis is similar to typing the following.\r\n\r\n```java\r\nString string;\r\nSystem.out.println(string = &quot;example&quot;);\r\n```\r\n\r\nThe result of assigning a value to _string_ is a _String_ value, thus the text _&quot;example&quot;_ is printed.","title":"Why does my print function give me output as &quot;false&quot;?","body":"<blockquote>\n<p><em>'... the task of giving output as true and false is with boolean datatype right? ...'</em></p>\n</blockquote>\n<p>Correct, a <em>Boolean</em> data-type is used for depicting <em>true</em> or <em>false</em> values.<br />\n<em><a href=\"https://en.wikipedia.org/wiki/Boolean_data_type\" rel=\"nofollow noreferrer\">Wikipedia – Boolean data type</a></em>.</p>\n<blockquote>\n<p><em>'... Why does my print function give me output as &quot;false&quot; ...'</em></p>\n</blockquote>\n<p>The reason your code works is because the result of your <em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html\" rel=\"nofollow noreferrer\">statement</a></em> produces a <em>boolean</em> value.</p>\n<p>This is similar to typing the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string;\nSystem.out.println(string = &quot;example&quot;);\n</code></pre>\n<p>The result of assigning a value to <em>string</em> is a <em>String</em> value, thus the text <em>&quot;example&quot;</em> is printed.</p>\n"}],"owner":{"account_id":26730336,"reputation":9,"user_id":20332802,"display_name":"Ganesh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":4,"score":-2,"last_activity_date":1697641897,"creation_date":1688981432,"question_id":76652437,"body_markdown":"```\r\npackage Basics;\r\n\r\npublic class ch2_operators {\r\n    public static void main(String[] args) {\r\n        System.out.println(64&lt;6);\r\n    }\r\n}\r\n```\r\nWhy does my print function give me output as &quot;false&quot; in the above code? The task of giving output as true and false is with boolean data type, right?\r\n","title":"Why does my print function give me output as &quot;false&quot;?","body":"<pre><code>package Basics;\n\npublic class ch2_operators {\n    public static void main(String[] args) {\n        System.out.println(64&lt;6);\n    }\n}\n</code></pre>\n<p>Why does my print function give me output as &quot;false&quot; in the above code? The task of giving output as true and false is with boolean data type, right?</p>\n"},{"tags":["java","spring-mvc","spring-boot","controller","thymeleaf"],"answers":[{"comments":[{"owner":{"account_id":12466027,"reputation":71,"user_id":9075945,"display_name":"vince"},"score":0,"creation_date":1545663252,"post_id":53914052,"comment_id":94672916,"body_markdown":"Thanks for the comment! I have changed the controllers. I&#39;ve created a new page to input new values and also created a new controller to save those values to the list. I am trying to edit and update existing values of the list. My edit list works fine, when I call it up. I am using a newly configured save method. My problem is with &lt;td&gt;&lt;input type = &quot;hidden&quot; th:name=&quot;|branches[${itemStat.index}].id|&quot; th:value=&quot;${branch.getId()}&quot;/&gt;&lt;/td&gt;. When I try to save the updated value, it gives me a new empty value in the list and does not change existing values of the list.","body":"Thanks for the comment! I have changed the controllers. I&#39;ve created a new page to input new values and also created a new controller to save those values to the list. I am trying to edit and update existing values of the list. My edit list works fine, when I call it up. I am using a newly configured save method. My problem is with &lt;td&gt;&lt;input type = &quot;hidden&quot; th:name=&quot;|branches[${itemStat.index}].id|&quot; th:value=&quot;${branch.getId()}&quot;/&gt;&lt;/td&gt;. When I try to save the updated value, it gives me a new empty value in the list and does not change existing values of the list."}],"tags":[],"owner":{"account_id":14054068,"reputation":30,"user_id":10151961,"display_name":"Gaurav Jestha"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697641830,"creation_date":1545657812,"answer_id":53914052,"question_id":53887463,"body_markdown":"You are doing wrong, value do not pass from controller to thymeleaf by this way. I&#39;ll give you one example.\r\nExample:\r\nController:\r\n```\r\nModelAndView model = new ModelAndView();\r\nmodel.put(&quot;branches&quot;, branchRepository.findAll());\r\nreturn model;\r\n```\r\nThymeleaf:\r\n```\r\n&lt;input id=&quot;branches&quot; type=&quot;hidden&quot; th:value=&quot;${branches}&quot;/&gt;\r\n```\r\nNow on your value is pass to id branches.","title":"@ModelAttribute is returning null values with thymeleaf","body":"<p>You are doing wrong, value do not pass from controller to thymeleaf by this way. I'll give you one example.\nExample:\nController:</p>\n<pre><code>ModelAndView model = new ModelAndView();\nmodel.put(&quot;branches&quot;, branchRepository.findAll());\nreturn model;\n</code></pre>\n<p>Thymeleaf:</p>\n<pre><code>&lt;input id=&quot;branches&quot; type=&quot;hidden&quot; th:value=&quot;${branches}&quot;/&gt;\n</code></pre>\n<p>Now on your value is pass to id branches.</p>\n"},{"tags":[],"owner":{"account_id":9189980,"reputation":1816,"user_id":6830867,"display_name":"J&#250;lio Falbo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611082812,"creation_date":1611082812,"answer_id":65797804,"question_id":53887463,"body_markdown":"Just add the field as a hidden input and the thymeleaf will send your changes:\r\n\r\n    &lt;input type=&quot;hidden&quot; th:field=&quot;*{branches}&quot;/&gt;","title":"@ModelAttribute is returning null values with thymeleaf","body":"<p>Just add the field as a hidden input and the thymeleaf will send your changes:</p>\n<pre><code>&lt;input type=&quot;hidden&quot; th:field=&quot;*{branches}&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":12466027,"reputation":71,"user_id":9075945,"display_name":"vince"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2158,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1697641830,"creation_date":1545406894,"question_id":53887463,"body_markdown":"After days of research I have trouble finding a solution for my controller methods. I have two controller methods that seem to be problematic. The savings method is saving null values. I have no clue how to bind the values, that are being typed into the field, to the list /all. One for creating values with input fields and another to save the input values and update a list /all. I want to get the values that I put into the fields of the form and have a updated list /all, with the new values. Note that I am only trying to save two of eleven attributes of the entire class. The class has double values and true/false. Those are being saved into db, except for the important String values. Thanks ahead for the help!\r\n\r\nFirst method: \r\n\r\n    @GetMapping(&quot;/create&quot;)\r\n    \tpublic String showCreateForm(Model model, Branch branch) {\r\n    \t\tList&lt;Branch&gt; branches = new ArrayList&lt;&gt;();\r\n    \t\tBranchCreationDto branchesForm = new BranchCreationDto(branches);\r\n    \r\n    \t\tfor (int i = 1; i &lt;= 1; i++) {\r\n    \t\t\t// the input field\r\n    \t\t\tbranchesForm.addBranch(new Branch());\r\n    \t\t}\r\n    \t\t\r\n    \t\tmodel.addAttribute(&quot;form&quot;, branchesForm);\r\n    \t\treturn &quot;branches/create&quot;;\r\n    \t}\r\nThis method is has one input field, where values of Branch can be set. \r\n\r\nSecond method: \r\n\r\n    @PostMapping(&quot;/saving&quot;)\r\n\tpublic String saveBranches(@ModelAttribute BranchCreationDto form, Model   model, Branch branch) {\r\n\t\t\r\n        // saves null but needs to be saving the values that are being typed into the field\r\n\t\tthis.branchRepository.saveAll(form.getBranches());\r\n\r\n\t\tmodel.addAttribute(&quot;branches&quot;, branchRepository.findAll());\r\n\t\t\r\n\t\treturn &quot;redirect:/all&quot;;\r\n\t\t\r\n\t}\r\n\r\nThis method appears to have the problem at  \r\n\r\n&gt; this.branchRepository.saveAll(form.getBranches());\r\n\r\nIt is returning null values. I have already tried putting branch.getName(), branch.getType() into the parameter. This does not work.\r\n\r\nWith the method /all the programm is returning the list.\r\n\r\n    @GetMapping(&quot;/all&quot;)\r\n\tpublic String showAll(Model model) {\r\n\t\tmodel.addAttribute(&quot;branches&quot;, branchRepository.findAll());\r\n\t\treturn &quot;branches/all&quot;;\r\n\t}\r\n\r\nThis is my wrapper class\r\n\r\n        import java.util.List;\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n\r\n\r\n    public class BranchCreationDto {\r\n\r\n\t@Autowired\r\n\tprivate List&lt;Branch&gt; branches;\r\n\r\n\t    public BranchCreationDto(List&lt;Branch&gt; branches) {\r\n\t\t    this.branches = branches;\r\n\r\n\t    }\r\n\r\n\t    public BranchCreationDto() {\r\n\r\n\t    }\r\n\r\n\t    public void addBranch(Branch branch) {\r\n\t\t    this.branches.add(branch);\r\n\t    }\r\n\r\n\t    public List&lt;Branch&gt; getBranches() {\r\n\t\t    return branches;\r\n\t    }\r\n\r\n\t    public void setBranches(List&lt;Branch&gt; branches) {\r\n\t\t  this.branches = branches;\r\n\t    }\r\n\r\n    }\r\n\r\nAnd this is the form \r\n\r\n    &lt;body&gt;\r\n\r\n\t&lt;!-- Save --&gt;\r\n\t&lt;form action=&quot;#&quot; th:action=&quot;@{saving}&quot; th:object=&quot;${form}&quot;\r\n\t\tmethod=&quot;post&quot;&gt;\r\n\t\t&lt;fieldset&gt;\r\n\t\t\t&lt;input type=&quot;submit&quot; id=&quot;submitButton&quot; th:value=&quot;Save&quot;&gt; &lt;input\r\n\t\t\t\ttype=&quot;reset&quot; id=&quot;resetButton&quot; name=&quot;reset&quot; th:value=&quot;Reset&quot; /&gt;\r\n\t\t\t&lt;table&gt;\r\n\t\t\t\t&lt;thead&gt;\r\n\t\t\t\t\t&lt;tr&gt;\r\n\t\t\t\t\t\t&lt;th&gt;Branch&lt;/th&gt;\r\n\t\t\t\t\t\t&lt;th&gt;Type&lt;/th&gt;\r\n\t\t\t\t\t&lt;/tr&gt;\r\n\t\t\t\t&lt;/thead&gt;\r\n\t\t\t\t&lt;tbody&gt;\r\n\t\t\t\t\t&lt;tr th:each=&quot;branch, itemStat : *{branches}&quot;&gt;\r\n\t\t\t\t\t\t&lt;td&gt;&lt;input th:field=&quot;*{branches[__${itemStat.index}__].branch}&quot; /&gt;&lt;/td&gt;\r\n\t\t\t\t\t\t&lt;td&gt;&lt;input th:field=&quot;*{branches[__${itemStat.index}__].type}&quot; /&gt;&lt;/td&gt;\r\n\t\t\t\t\t&lt;/tr&gt;\r\n\t\t\t\t&lt;/tbody&gt;\r\n\t\t\t&lt;/table&gt;\r\n\t\t&lt;/fieldset&gt;\r\n\t&lt;/form&gt;\r\n\r\n&lt;/body&gt;\r\n\r\n\r\n","title":"@ModelAttribute is returning null values with thymeleaf","body":"<p>After days of research I have trouble finding a solution for my controller methods. I have two controller methods that seem to be problematic. The savings method is saving null values. I have no clue how to bind the values, that are being typed into the field, to the list /all. One for creating values with input fields and another to save the input values and update a list /all. I want to get the values that I put into the fields of the form and have a updated list /all, with the new values. Note that I am only trying to save two of eleven attributes of the entire class. The class has double values and true/false. Those are being saved into db, except for the important String values. Thanks ahead for the help!</p>\n\n<p>First method: </p>\n\n<pre><code>@GetMapping(\"/create\")\n    public String showCreateForm(Model model, Branch branch) {\n        List&lt;Branch&gt; branches = new ArrayList&lt;&gt;();\n        BranchCreationDto branchesForm = new BranchCreationDto(branches);\n\n        for (int i = 1; i &lt;= 1; i++) {\n            // the input field\n            branchesForm.addBranch(new Branch());\n        }\n\n        model.addAttribute(\"form\", branchesForm);\n        return \"branches/create\";\n    }\n</code></pre>\n\n<p>This method is has one input field, where values of Branch can be set. </p>\n\n<p>Second method: </p>\n\n<pre><code>@PostMapping(\"/saving\")\npublic String saveBranches(@ModelAttribute BranchCreationDto form, Model   model, Branch branch) {\n\n    // saves null but needs to be saving the values that are being typed into the field\n    this.branchRepository.saveAll(form.getBranches());\n\n    model.addAttribute(\"branches\", branchRepository.findAll());\n\n    return \"redirect:/all\";\n\n}\n</code></pre>\n\n<p>This method appears to have the problem at  </p>\n\n<blockquote>\n  <p>this.branchRepository.saveAll(form.getBranches());</p>\n</blockquote>\n\n<p>It is returning null values. I have already tried putting branch.getName(), branch.getType() into the parameter. This does not work.</p>\n\n<p>With the method /all the programm is returning the list.</p>\n\n<pre><code>@GetMapping(\"/all\")\npublic String showAll(Model model) {\n    model.addAttribute(\"branches\", branchRepository.findAll());\n    return \"branches/all\";\n}\n</code></pre>\n\n<p>This is my wrapper class</p>\n\n<pre><code>    import java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\n\n\npublic class BranchCreationDto {\n\n@Autowired\nprivate List&lt;Branch&gt; branches;\n\n    public BranchCreationDto(List&lt;Branch&gt; branches) {\n        this.branches = branches;\n\n    }\n\n    public BranchCreationDto() {\n\n    }\n\n    public void addBranch(Branch branch) {\n        this.branches.add(branch);\n    }\n\n    public List&lt;Branch&gt; getBranches() {\n        return branches;\n    }\n\n    public void setBranches(List&lt;Branch&gt; branches) {\n      this.branches = branches;\n    }\n\n}\n</code></pre>\n\n<p>And this is the form </p>\n\n<pre><code>&lt;body&gt;\n\n&lt;!-- Save --&gt;\n&lt;form action=\"#\" th:action=\"@{saving}\" th:object=\"${form}\"\n    method=\"post\"&gt;\n    &lt;fieldset&gt;\n        &lt;input type=\"submit\" id=\"submitButton\" th:value=\"Save\"&gt; &lt;input\n            type=\"reset\" id=\"resetButton\" name=\"reset\" th:value=\"Reset\" /&gt;\n        &lt;table&gt;\n            &lt;thead&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;Branch&lt;/th&gt;\n                    &lt;th&gt;Type&lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n                &lt;tr th:each=\"branch, itemStat : *{branches}\"&gt;\n                    &lt;td&gt;&lt;input th:field=\"*{branches[__${itemStat.index}__].branch}\" /&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;input th:field=\"*{branches[__${itemStat.index}__].type}\" /&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &lt;/fieldset&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","for-loop","unicode","char"],"comments":[{"owner":{"display_name":"user6073886"},"score":4,"creation_date":1697550225,"post_id":77309523,"comment_id":136292016,"body_markdown":"You might want to look at what the maximum value for a char is. It doesn&#39;t go as high as 90000. That&#39;s why your `char i` will eventually overflow and your condition `i &lt;= 90000` will never be false.","body":"You might want to look at what the maximum value for a char is. It doesn&#39;t go as high as 90000. That&#39;s why your <code>char i</code> will eventually overflow and your condition <code>i &lt;= 90000</code> will never be false."},{"owner":{"account_id":29692437,"reputation":11,"user_id":22756528,"display_name":"CodeRattlesnake"},"score":0,"creation_date":1697550661,"post_id":77309523,"comment_id":136292106,"body_markdown":"Upon googling i can not find anything other than 256, but i can print it till at least 30.000","body":"Upon googling i can not find anything other than 256, but i can print it till at least 30.000"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1697550756,"post_id":77309523,"comment_id":136292123,"body_markdown":"You need to look at the Unicode tables","body":"You need to look at the Unicode tables"},{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":0,"creation_date":1697550965,"post_id":77309523,"comment_id":136292166,"body_markdown":"Check the [JLS](https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html) in section 4.2.1","body":"Check the <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html\" rel=\"nofollow noreferrer\">JLS</a> in section 4.2.1"},{"owner":{"display_name":"user6073886"},"score":4,"creation_date":1697551262,"post_id":77309523,"comment_id":136292233,"body_markdown":"@CodeRattlesnake There is no need for google. The primitiv Data types and there values are described in official documentation and tutorials: [Primitive Data Types](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html) - And there is also a java class Character that has that information saved as a static field: `Character.MAX_VALUE` (So doing `System.out.println((int) Character.MAX_VALUE);` will print you the max value as a number","body":"@CodeRattlesnake There is no need for google. The primitiv Data types and there values are described in official documentation and tutorials: <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">Primitive Data Types</a> - And there is also a java class Character that has that information saved as a static field: <code>Character.MAX_VALUE</code> (So doing <code>System.out.println((int) Character.MAX_VALUE);</code> will print you the max value as a number"},{"owner":{"account_id":29692437,"reputation":11,"user_id":22756528,"display_name":"CodeRattlesnake"},"score":0,"creation_date":1697552229,"post_id":77309523,"comment_id":136292457,"body_markdown":"Awesome! Got it! Thank you very much @OHGODSPIDERS and Rifat","body":"Awesome! Got it! Thank you very much @OHGODSPIDERS and Rifat"},{"owner":{"account_id":29692437,"reputation":11,"user_id":22756528,"display_name":"CodeRattlesnake"},"score":0,"creation_date":1697552793,"post_id":77309523,"comment_id":136292561,"body_markdown":"How do i mark my question as solved?","body":"How do i mark my question as solved?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1697554133,"post_id":77309523,"comment_id":136292898,"body_markdown":"You could accept one of the answers below, or add your own answer and check that as correct.  (You might need some more points for the latter, I&#39;m not sure if there&#39;s a cut off to be able to do that.  If not, you can just leave it as is.)","body":"You could accept one of the answers below, or add your own answer and check that as correct.  (You might need some more points for the latter, I&#39;m not sure if there&#39;s a cut off to be able to do that.  If not, you can just leave it as is.)"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697559612,"creation_date":1697550666,"answer_id":77309597,"question_id":77309523,"body_markdown":"You will notice that if you put this code in an IDE, or perhaps through a compiler with the correct warnings enabled, you&#39;ll get this warning:\r\n\r\n&gt; Condition &#39;i &lt;= 90000&#39; is always &#39;true&#39;\r\n\r\nIt&#39;s telling you that a `char` doesn&#39;t go as high as `90000`. So your loop will never end.\r\n\r\nA `char` can go from [`MIN_VALUE`][1] (`&#39;\\u0000&#39;`) to [`MAX_VALUE`][2] (`&#39;\\uFFFF&#39;`). That’s 0 to 65,535 in decimal. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Character.html#MIN_VALUE\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Character.html#MAX_VALUE","title":"For loop to print out UTF doesn&#39;t terminate","body":"<p>You will notice that if you put this code in an IDE, or perhaps through a compiler with the correct warnings enabled, you'll get this warning:</p>\n<blockquote>\n<p>Condition 'i &lt;= 90000' is always 'true'</p>\n</blockquote>\n<p>It's telling you that a <code>char</code> doesn't go as high as <code>90000</code>. So your loop will never end.</p>\n<p>A <code>char</code> can go from <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Character.html#MIN_VALUE\" rel=\"nofollow noreferrer\"><code>MIN_VALUE</code></a> (<code>'\\u0000'</code>) to <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Character.html#MAX_VALUE\" rel=\"nofollow noreferrer\"><code>MAX_VALUE</code></a> (<code>'\\uFFFF'</code>). That’s 0 to 65,535 in decimal.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697559892,"creation_date":1697558350,"answer_id":77310524,"question_id":77309523,"body_markdown":"# Avoid `char`\r\n\r\nThe [Answer by Jorn][1] is correct, and should be accepted. \r\n\r\nLet me add that `char` has been essentially broken since Java 2 and legacy since Java 5. As a 16-bit value, `char` (&amp; its wrapper class [`Character`][2]) is physically incapable of representing most characters. \r\n\r\nInstead of `char`, use [code point][3] integer numbers to work with individual characters. \r\n\r\n## Code point\r\n\r\nCode points range from zero to just over a million. About 150,000 of that million have been assigned to a character by the [Unicode Consortium][4]. The rest are either reserved for future use or set aside for “private” use. \r\n\r\nUse `static` methods on the `Character` class to inspect each code point.\r\n\r\n    for( int codePoint = Character.MIN_CODE_POINT ; codePoint &lt;= Character.MAX_CODE_POINT ; codePoint ++ )\r\n    {\r\n        if ( Character.isDefined ( codePoint ) ) \r\n        {\r\n            String name = Character.getName( codePoint) ;\r\n            String character = Character.toString( codePoint ) ;\r\n            … \r\n        }\r\n    }\r\n\r\nYou will find other code point methods on classes like `String`, `StringBuilder`, etc. \r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77309597/642706\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Character.html\r\n  [3]: https://en.m.wikipedia.org/wiki/Code_point\r\n  [4]: https://en.wikipedia.org/wiki/Unicode_Consortium","title":"For loop to print out UTF doesn&#39;t terminate","body":"<h1>Avoid <code>char</code></h1>\n<p>The <a href=\"https://stackoverflow.com/a/77309597/642706\">Answer by Jorn</a> is correct, and should be accepted.</p>\n<p>Let me add that <code>char</code> has been essentially broken since Java 2 and legacy since Java 5. As a 16-bit value, <code>char</code> (&amp; its wrapper class <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Character.html\" rel=\"nofollow noreferrer\"><code>Character</code></a>) is physically incapable of representing most characters.</p>\n<p>Instead of <code>char</code>, use <a href=\"https://en.m.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers to work with individual characters.</p>\n<h2>Code point</h2>\n<p>Code points range from zero to just over a million. About 150,000 of that million have been assigned to a character by the <a href=\"https://en.wikipedia.org/wiki/Unicode_Consortium\" rel=\"nofollow noreferrer\">Unicode Consortium</a>. The rest are either reserved for future use or set aside for “private” use.</p>\n<p>Use <code>static</code> methods on the <code>Character</code> class to inspect each code point.</p>\n<pre><code>for( int codePoint = Character.MIN_CODE_POINT ; codePoint &lt;= Character.MAX_CODE_POINT ; codePoint ++ )\n{\n    if ( Character.isDefined ( codePoint ) ) \n    {\n        String name = Character.getName( codePoint) ;\n        String character = Character.toString( codePoint ) ;\n        … \n    }\n}\n</code></pre>\n<p>You will find other code point methods on classes like <code>String</code>, <code>StringBuilder</code>, etc.</p>\n"}],"owner":{"account_id":29692437,"reputation":11,"user_id":22756528,"display_name":"CodeRattlesnake"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77309597,"answer_count":2,"score":1,"last_activity_date":1697641606,"creation_date":1697550048,"question_id":77309523,"body_markdown":"I am fairly new to coding and stumbled upon a problem.\r\n\r\nI wanted to print out and see the characters and what number they have by following:\r\n\r\n```java\r\nfor(char i = 20488; i &lt;= 90000; i++) {\r\n    int x = i;\r\n    System.out.print(x + &quot; = &quot;);\r\n    System.out.println(i);\r\n}\r\n```\r\n\r\nthe last couple outputs before i ended it were:\r\n\r\n```\r\n7259 = ᱛ\r\n7260 = ᱜ\r\n7261 = ᱝ\r\n7262 = ᱞ\r\n7263 = ᱟ\r\n7264 = ᱠ\r\n```\r\n\r\nWhat seems to be the problem?\r\n\r\nI expected everything to be printed till 90.000","title":"For loop to print out UTF doesn&#39;t terminate","body":"<p>I am fairly new to coding and stumbled upon a problem.</p>\n<p>I wanted to print out and see the characters and what number they have by following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(char i = 20488; i &lt;= 90000; i++) {\n    int x = i;\n    System.out.print(x + &quot; = &quot;);\n    System.out.println(i);\n}\n</code></pre>\n<p>the last couple outputs before i ended it were:</p>\n<pre><code>7259 = ᱛ\n7260 = ᱜ\n7261 = ᱝ\n7262 = ᱞ\n7263 = ᱟ\n7264 = ᱠ\n</code></pre>\n<p>What seems to be the problem?</p>\n<p>I expected everything to be printed till 90.000</p>\n"},{"tags":["java","c#","regex"],"comments":[{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":1,"creation_date":1660115685,"post_id":73302095,"comment_id":129453556,"body_markdown":"You need to put word boundaries around your current pattern: `\\b[A-Za-z0-9]{6}\\b`.  BTW...your question is almost certainly a duplicate.","body":"You need to put word boundaries around your current pattern: <code>\\b[A-Za-z0-9]{6}\\b</code>.  BTW...your question is almost certainly a duplicate."},{"owner":{"account_id":13148315,"reputation":77,"user_id":9497729,"display_name":"Pavan Gunda"},"score":1,"creation_date":1660115891,"post_id":73302095,"comment_id":129453616,"body_markdown":"I tried that, it still matches the &quot;083457&quot; . It should only match combination of alphanumeric","body":"I tried that, it still matches the &quot;083457&quot; . It should only match combination of alphanumeric"}],"answers":[{"comments":[{"owner":{"account_id":3490547,"reputation":9168,"user_id":2920343,"accept_rate":89,"display_name":"CompuChip"},"score":2,"creation_date":1660117155,"post_id":73302192,"comment_id":129454068,"body_markdown":"Although this is correct, such regexes quickly become &quot;write-only&quot; (i.e. quite complicated and hard to debug later on). I would maybe just stick to Tim&#39;s suggestion of `\\b[A-Za-z0-9]{6}\\b` and then iterate the matches in code to figure out which ones are actual truck numbers.","body":"Although this is correct, such regexes quickly become &quot;write-only&quot; (i.e. quite complicated and hard to debug later on). I would maybe just stick to Tim&#39;s suggestion of <code>\\b[A-Za-z0-9]{6}\\b</code> and then iterate the matches in code to figure out which ones are actual truck numbers."},{"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":1,"creation_date":1660117407,"post_id":73302192,"comment_id":129454143,"body_markdown":"That&#39;s just a personal choice. Matching and looping with 2 conditions will be very inefficient as compared to this suggestion. Lookaheads are used pretty much in every regex string validations and it is just a matter of getting used to it.","body":"That&#39;s just a personal choice. Matching and looping with 2 conditions will be very inefficient as compared to this suggestion. Lookaheads are used pretty much in every regex string validations and it is just a matter of getting used to it."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1660117542,"post_id":73302192,"comment_id":129454182,"body_markdown":"I disagree with CompuChip here.  I think that if you&#39;re reasonably comfortable with lookaheads, that regular expression makes perfect sense.  And if you&#39;re not comfortable with lookaheads, you can always refer to documentation.  There&#39;s not really a good reason not to use lookaheads and lookbehinds; and they&#39;re perfect for this particular problem.","body":"I disagree with CompuChip here.  I think that if you&#39;re reasonably comfortable with lookaheads, that regular expression makes perfect sense.  And if you&#39;re not comfortable with lookaheads, you can always refer to documentation.  There&#39;s not really a good reason not to use lookaheads and lookbehinds; and they&#39;re perfect for this particular problem."},{"owner":{"account_id":4739783,"reputation":612633,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":1,"creation_date":1697630455,"post_id":73302192,"comment_id":136303499,"body_markdown":"You can replace 6-char limit by replacing `{6}` with the desired quantifier: one or more - `+`, zero or more - `*`, eight or more - `{8,}`, etc.","body":"You can replace 6-char limit by replacing <code>{6}</code> with the desired quantifier: one or more - <code>+</code>, zero or more - <code>*</code>, eight or more - <code>{8,}</code>, etc."}],"tags":[],"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1660115997,"creation_date":1660115997,"answer_id":73302192,"question_id":73302095,"body_markdown":"You may use this regex with 2 lookahead conditions:\r\n\r\n```sh\r\n\\b(?=[a-zA-Z]*\\d)(?=\\d*[a-zA-Z])[a-zA-Z\\d]{6}\\b\r\n```\r\n\r\n[RegEx Demo][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/mJOTzV/1\r\n\r\n**RegEx Details:**\r\n\r\n- `\\b`: Word boundary\r\n- `(?=[a-zA-Z]*\\d)`: Lookahead to assert that we have at least one digit after 0 or more letters\r\n- `(?=\\d*[a-zA-Z])`: Lookahead to assert that we have at least one letter after 0 or more digits\r\n- `[a-zA-Z\\d]{6}`: Match 6 alphanumeric characters\r\n- `\\b`: Word boundary\r\n","title":"Regex to match only 6-letter alphanumeric words in a string","body":"<p>You may use this regex with 2 lookahead conditions:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>\\b(?=[a-zA-Z]*\\d)(?=\\d*[a-zA-Z])[a-zA-Z\\d]{6}\\b\n</code></pre>\n<p><a href=\"https://regex101.com/r/mJOTzV/1\" rel=\"noreferrer\">RegEx Demo</a></p>\n<p><strong>RegEx Details:</strong></p>\n<ul>\n<li><code>\\b</code>: Word boundary</li>\n<li><code>(?=[a-zA-Z]*\\d)</code>: Lookahead to assert that we have at least one digit after 0 or more letters</li>\n<li><code>(?=\\d*[a-zA-Z])</code>: Lookahead to assert that we have at least one letter after 0 or more digits</li>\n<li><code>[a-zA-Z\\d]{6}</code>: Match 6 alphanumeric characters</li>\n<li><code>\\b</code>: Word boundary</li>\n</ul>\n"}],"owner":{"account_id":13148315,"reputation":77,"user_id":9497729,"display_name":"Pavan Gunda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73302192,"answer_count":1,"score":2,"last_activity_date":1697641603,"creation_date":1660115585,"question_id":73302095,"body_markdown":"I am trying to match the 6 character word that has a combination of ONLY alphanumeric. \r\n\r\nExample String:\r\n\r\n    Bus Express Wash at bay no 083457 - Truckno AB96CD &amp; Truck no 12367S &amp; 12368S\r\n\r\nI am currently trying regex `[a-zA-Z0-9]{6}`\r\n\r\nHowever, it matches below Output: \r\n\r\n    xpress\r\n    083457\r\n    ruckno\r\n    AB96CD\r\n    12367S\r\n    12368S\r\n\r\nBut, what I need is only combination of alphanumeric. Something like below\r\nDesired Output\r\n\r\n    AB96CD\r\n    12367S\r\n    12368S\r\n\r\n","title":"Regex to match only 6-letter alphanumeric words in a string","body":"<p>I am trying to match the 6 character word that has a combination of ONLY alphanumeric.</p>\n<p>Example String:</p>\n<pre><code>Bus Express Wash at bay no 083457 - Truckno AB96CD &amp; Truck no 12367S &amp; 12368S\n</code></pre>\n<p>I am currently trying regex <code>[a-zA-Z0-9]{6}</code></p>\n<p>However, it matches below Output:</p>\n<pre><code>xpress\n083457\nruckno\nAB96CD\n12367S\n12368S\n</code></pre>\n<p>But, what I need is only combination of alphanumeric. Something like below\nDesired Output</p>\n<pre><code>AB96CD\n12367S\n12368S\n</code></pre>\n"},{"tags":["java","equals","string-comparison"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":4,"creation_date":1697621904,"post_id":77315133,"comment_id":136301872,"body_markdown":"letter will (potentially?) pass `&quot;&quot;.equals(&quot;&quot;)` while first one wont","body":"letter will (potentially?) pass <code>&quot;&quot;.equals(&quot;&quot;)</code> while first one wont"},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":3,"creation_date":1697622170,"post_id":77315133,"comment_id":136301925,"body_markdown":"..and also if `str1` and `str2` are both null `Objects.equals()` gives true (probably not what you want!).","body":"..and also if <code>str1</code> and <code>str2</code> are both null <code>Objects.equals()</code> gives true (probably not what you want!)."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1697622735,"post_id":77315133,"comment_id":136302033,"body_markdown":"Which `StringUtils` do you use? How `StringUtils.isNotBlank(str1)` make sence here, you can use `str1 != null` or simple `StringUtils.equals(str1, str2)`","body":"Which <code>StringUtils</code> do you use? How <code>StringUtils.isNotBlank(str1)</code> make sence here, you can use <code>str1 != null</code> or simple <code>StringUtils.equals(str1, str2)</code>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1697622774,"post_id":77315133,"comment_id":136302038,"body_markdown":"I don&#39;t understand how you can begin to ask about the differences between a method that compares two objects with another method that only looks at one object.","body":"I don&#39;t understand how you can begin to ask about the differences between a method that compares two objects with another method that only looks at one object."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1697622912,"post_id":77315133,"comment_id":136302071,"body_markdown":"@Jens good question, I assumed it was the Apache Commons version as that seems to be the most popular one, and added the tag (prematurely), but of course there are others and possibly even a class in the OP&#39;s own project.","body":"@Jens good question, I assumed it was the Apache Commons version as that seems to be the most popular one, and added the tag (prematurely), but of course there are others and possibly even a class in the OP&#39;s own project."},{"owner":{"account_id":5607838,"reputation":766,"user_id":4462399,"accept_rate":83,"display_name":"Maryam Koulaei"},"score":0,"creation_date":1697625427,"post_id":77315133,"comment_id":136302538,"body_markdown":"@user207421  I explained the comparision in the form of these two conditions. why not?","body":"@user207421  I explained the comparision in the form of these two conditions. why not?"}],"answers":[{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697622669,"creation_date":1697622669,"answer_id":77315224,"question_id":77315133,"body_markdown":"The Apache Commons method [StringUtils.isNotBlank][1] will return false if the string is null, empty, or contains only whitespace. There will be differences in the following situations:\r\n\r\n|str1   |str2   |Results(1st code/2nd code)|\r\n|-------|-------|--------------------------|\r\n|null   |null   |false/true |\r\n|&quot;&quot;     |&quot;&quot;     |false/true |\r\n|&quot; &quot;    |&quot; &quot;    |false/true |\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#isNotBlank-java.lang.CharSequence-","title":"Objects.equals() vs StringUtils.isNotBlank() in Java","body":"<p>The Apache Commons method <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#isNotBlank-java.lang.CharSequence-\" rel=\"nofollow noreferrer\">StringUtils.isNotBlank</a> will return false if the string is null, empty, or contains only whitespace. There will be differences in the following situations:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>str1</th>\n<th>str2</th>\n<th>Results(1st code/2nd code)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>null</td>\n<td>null</td>\n<td>false/true</td>\n</tr>\n<tr>\n<td>&quot;&quot;</td>\n<td>&quot;&quot;</td>\n<td>false/true</td>\n</tr>\n<tr>\n<td>&quot; &quot;</td>\n<td>&quot; &quot;</td>\n<td>false/true</td>\n</tr>\n</tbody>\n</table>\n</div>"}],"owner":{"account_id":5607838,"reputation":766,"user_id":4462399,"accept_rate":83,"display_name":"Maryam Koulaei"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":77315224,"answer_count":1,"score":-2,"last_activity_date":1697641576,"creation_date":1697621789,"question_id":77315133,"body_markdown":"Could you please explain me if there is a difference between the functionality of the following codes? \r\nI know that the Objects.equals() checks for the NULL value first and then compares the two strings.\r\n\r\nI have the following conditions and I want to know which one is more practical.\r\n~~~\r\nif (StringUtils.isNotBlank(str1) &amp;&amp; str1.equals(str2)) {// do sth}\r\n~~~\r\n\r\nor is it enough to say:\r\n~~~\r\nif (Objects.equals(str1,str2)) {// do sth}\r\n~~~ \r\n\r\nThanks\r\n\r\n","title":"Objects.equals() vs StringUtils.isNotBlank() in Java","body":"<p>Could you please explain me if there is a difference between the functionality of the following codes?\nI know that the Objects.equals() checks for the NULL value first and then compares the two strings.</p>\n<p>I have the following conditions and I want to know which one is more practical.</p>\n<pre><code>if (StringUtils.isNotBlank(str1) &amp;&amp; str1.equals(str2)) {// do sth}\n</code></pre>\n<p>or is it enough to say:</p>\n<pre><code>if (Objects.equals(str1,str2)) {// do sth}\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1697632582,"post_id":77316214,"comment_id":136304000,"body_markdown":"Did you read the migration guide?","body":"Did you read the migration guide?"},{"owner":{"account_id":14640522,"reputation":42,"user_id":10573240,"display_name":"Simon"},"score":0,"creation_date":1697640786,"post_id":77316214,"comment_id":136305907,"body_markdown":"Yes, but I did not find anything about a replacement for the removed ExpressionInterceptUrlRegistry.","body":"Yes, but I did not find anything about a replacement for the removed ExpressionInterceptUrlRegistry."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1697660639,"post_id":77316214,"comment_id":136309442,"body_markdown":"why have you built this strange custom security solution? why are you not following common practices and using the built in JWT soltuins that come with spring security? dont you read the docs?","body":"why have you built this strange custom security solution? why are you not following common practices and using the built in JWT soltuins that come with spring security? dont you read the docs?"}],"answers":[{"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1697645874,"post_id":77316810,"comment_id":136307033,"body_markdown":"If it will not be able to solve you problem    It mean that it is in another place and I will analyse one more time and will come with an answer about it.","body":"If it will not be able to solve you problem    It mean that it is in another place and I will analyse one more time and will come with an answer about it."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1697654115,"post_id":77316810,"comment_id":136308416,"body_markdown":"And also about your problem that before migration not mapped paths into filter chain could be reached and now it is not so.You can change a little bit and add one more thing `requestMatcherRegistry.anyRequest.permitAll()` something like this","body":"And also about your problem that before migration not mapped paths into filter chain could be reached and now it is not so.You can change a little bit and add one more thing <code>requestMatcherRegistry.anyRequest.permitAll()</code> something like this"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697641214,"creation_date":1697636054,"answer_id":77316810,"question_id":77316214,"body_markdown":" According to `java docs` you should replace old one configuration with next one. It is going to work well.\r\n\r\n    private AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry authorizeUrlsNew(AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry urlRegistry) {\r\n        urlRegistry\r\n            .requestMatchers(&quot;api/admin/authenticate&quot;).permitAll()\r\n            .requestMatchers(&quot;api/admin/authenticate/captcha&quot;).permitAll()\r\n            .requestMatchers(&quot;api/admin/**&quot;).authenticated();\r\n    \r\n        return urlRegistry;\r\n      }\r\n    \r\n      @Bean\r\n      protected SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n        return http\r\n                    .authorizeHttpRequests(this::authorizeUrlsNew)\r\n            .csrf(AbstractHttpConfigurer::disable)\r\n            .addFilterBefore(new JWTFilter(tokenProvider), UsernamePasswordAuthenticationFilter.class)\r\n            .build();\r\n      }\r\n\r\n**UPDATE**\r\nRewrite a little bit the config class remove `authorizeUrlsNew` method and change `configure` method body to something like this:\r\n\r\n      @Bean\r\n      protected SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n        return http\r\n                    .authorizeHttpRequests(requestMatcherRegistry -&gt; {\r\n                      requestMatcherRegistry.requestMatchers(&quot;api/admin/authenticate&quot;).permitAll()\r\n                      requestMatcherRegistry.requestMatchers(&quot;api/admin/authenticate/captcha&quot;).permitAll()\r\n                      requestMatcherRegistry.requestMatchers(&quot;api/admin/**&quot;).authenticated();\r\n                    })\r\n            .csrf(AbstractHttpConfigurer::disable)\r\n            .build();\r\n      }\r\n\r\n\r\n","title":"Replacing authorizeRequests with authorizeHttpRequests will return 401 on calls not explicitly described","body":"<p>According to <code>java docs</code> you should replace old one configuration with next one. It is going to work well.</p>\n<pre><code>private AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry authorizeUrlsNew(AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry urlRegistry) {\n    urlRegistry\n        .requestMatchers(&quot;api/admin/authenticate&quot;).permitAll()\n        .requestMatchers(&quot;api/admin/authenticate/captcha&quot;).permitAll()\n        .requestMatchers(&quot;api/admin/**&quot;).authenticated();\n\n    return urlRegistry;\n  }\n\n  @Bean\n  protected SecurityFilterChain configure(HttpSecurity http) throws Exception {\n    return http\n                .authorizeHttpRequests(this::authorizeUrlsNew)\n        .csrf(AbstractHttpConfigurer::disable)\n        .addFilterBefore(new JWTFilter(tokenProvider), UsernamePasswordAuthenticationFilter.class)\n        .build();\n  }\n</code></pre>\n<p><strong>UPDATE</strong>\nRewrite a little bit the config class remove <code>authorizeUrlsNew</code> method and change <code>configure</code> method body to something like this:</p>\n<pre><code>  @Bean\n  protected SecurityFilterChain configure(HttpSecurity http) throws Exception {\n    return http\n                .authorizeHttpRequests(requestMatcherRegistry -&gt; {\n                  requestMatcherRegistry.requestMatchers(&quot;api/admin/authenticate&quot;).permitAll()\n                  requestMatcherRegistry.requestMatchers(&quot;api/admin/authenticate/captcha&quot;).permitAll()\n                  requestMatcherRegistry.requestMatchers(&quot;api/admin/**&quot;).authenticated();\n                })\n        .csrf(AbstractHttpConfigurer::disable)\n        .build();\n  }\n</code></pre>\n"}],"owner":{"account_id":14640522,"reputation":42,"user_id":10573240,"display_name":"Simon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1697641214,"creation_date":1697631335,"question_id":77316214,"body_markdown":"I am currently trying to refactor the security configuration after the upgrade to Spring Boot 3.1.1. I am therefore trying to replace all methods marked as deprecated or for removal.\r\n\r\nWe use different applications for the backend, frontend, and admin interface. I removed some parts of the code to make it readable. Currently, we use a WebSecurityCustomizer to ignore some static resources. Don&#39;t mind it. The issue is inside the configure(HttpSecurity http) method. I removed all code (e.g. setting of header data) to have only the code left to reproduce the issue. In the configure method, we set some request matchers on routes for the admin pages, which should be allowed.\r\n\r\n1. The old version I am trying to replace is .authorizeRequests(this::authorizeUrlsOld). I am using the ExpressionInterceptUrlRegistry to set request matchers. When I use this code, I can still login to the admin pages and access the regular frontend application.\r\n\r\n2. However, when using the new version .authorizeHttpRequests(this::authorizeUrlsNew) all calls that are not explicitally authorized in the method are unauthorized (e.g. api/markets). For this, I replaced the deprecated ExpressionUrlAuthorizationConfigurer&lt;HttpSecurity&gt; with AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;, which does not have the ExpressionInterceptUrlRegistry. Therefore, I had to use AuthorizationManagerRequestMatcherRegistry, but it seems to work differently.\r\n\r\nHow can I get .authorizeHttpRequests(this::authorizeUrlsNew) to work?\r\n\r\n**The class SecurityConfiguration:**\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableMethodSecurity(securedEnabled = true)\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class SecurityConfiguration {\r\n\r\n    private final AuthenticationManagerBuilder authenticationManagerBuilder;\r\n    private final UserDetailsService userDetailsService;\r\n    private final TokenProvider tokenProvider;\r\n    private final GlobalProperties globalProperties;\r\n    private final PasswordEncoder passwordEncoder;\r\n    \r\n    @PostConstruct\r\n    public void init() {\r\n        try {\r\n            authenticationManagerBuilder\r\n                    .userDetailsService(userDetailsService)\r\n                    .passwordEncoder(passwordEncoder);\r\n        } catch (Exception e) {\r\n            throw new BeanInitializationException(&quot;Security configuration failed&quot;, e);\r\n        }\r\n    }\r\n    @Bean\r\n    AuthenticationManager customAuthenticationManager(UserDetailsService userDetailsService, PasswordEncoder encoder) {\r\n        return authentication -&gt; {\r\n            var username = String.valueOf(authentication.getPrincipal());\r\n            var password = String.valueOf(authentication.getCredentials());\r\n\r\n            var user = userDetailsService.loadUserByUsername(username);\r\n\r\n            if (!encoder.matches(password, user.getPassword())) {\r\n                throw new BadCredentialsException(&quot;Bad credentials&quot;);\r\n            }\r\n\r\n            if (!user.isEnabled()) {\r\n                throw new DisabledException(&quot;User account is not active&quot;);\r\n            }\r\n\r\n            return new UsernamePasswordAuthenticationToken(username, null, user.getAuthorities());\r\n        };\r\n    }\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return web -&gt; {\r\n            web.debug(globalProperties.isSecurityDebugEnabled());\r\n            web.ignoring()\r\n                    .requestMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\r\n                    .requestMatchers(&quot;/i18n/**&quot;);\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    protected SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n        return http\r\n                .authorizeRequests(this::authorizeUrlsOld) //does work\r\n//                .authorizeHttpRequests(this::authorizeUrlsNew) //does not work\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .addFilterBefore(new JWTFilter(tokenProvider), UsernamePasswordAuthenticationFilter.class)\r\n                .build();\r\n    }\r\n\r\n    private HttpSecurity authorizeUrlsOld(ExpressionUrlAuthorizationConfigurer&lt;HttpSecurity&gt;.ExpressionInterceptUrlRegistry urlRegistry) {\r\n        urlRegistry\r\n                .requestMatchers(&quot;api/admin/authenticate&quot;).permitAll()\r\n                .requestMatchers(&quot;api/admin/authenticate/captcha&quot;).permitAll()\r\n                .requestMatchers(&quot;api/admin/**&quot;).authenticated();\r\n\r\n        return urlRegistry.and();\r\n    }\r\n\r\n    private void authorizeUrlsNew(AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry matcherReg) {\r\n        matcherReg\r\n                .requestMatchers(&quot;api/admin/authenticate&quot;).permitAll()\r\n                .requestMatchers(&quot;api/admin/authenticate/captcha&quot;).permitAll()\r\n                .requestMatchers(&quot;api/admin/**&quot;).authenticated();\r\n    }\r\n\r\n}\r\n```\r\n\r\n**The class JWTFilter:**\r\n```\r\npublic class JWTFilter extends GenericFilterBean {\r\n\r\n\r\n    private TokenProvider tokenProvider;\r\n\r\n    public JWTFilter(TokenProvider tokenProvider) {\r\n        this.tokenProvider = tokenProvider;\r\n    }\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\r\n        throws IOException, ServletException {\r\n        HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;\r\n        String jwt = resolveToken(httpServletRequest);\r\n        if (StringUtils.hasText(jwt) &amp;&amp; this.tokenProvider.validateToken(jwt)) {\r\n            Authentication authentication = this.tokenProvider.getAuthentication(jwt);\r\n            SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        }\r\n        filterChain.doFilter(servletRequest, servletResponse);\r\n    }\r\n\r\n    private String resolveToken(HttpServletRequest request){\r\n        String bearerToken = request.getHeader(HttpHeaders.AUTHORIZATION);\r\n        if (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith(JwtConstants.BEARER_PREFIX + &quot; &quot;)) {\r\n            return bearerToken.substring(7, bearerToken.length());\r\n        }\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI tried removing the deprecaded methods by new ones.","title":"Replacing authorizeRequests with authorizeHttpRequests will return 401 on calls not explicitly described","body":"<p>I am currently trying to refactor the security configuration after the upgrade to Spring Boot 3.1.1. I am therefore trying to replace all methods marked as deprecated or for removal.</p>\n<p>We use different applications for the backend, frontend, and admin interface. I removed some parts of the code to make it readable. Currently, we use a WebSecurityCustomizer to ignore some static resources. Don't mind it. The issue is inside the configure(HttpSecurity http) method. I removed all code (e.g. setting of header data) to have only the code left to reproduce the issue. In the configure method, we set some request matchers on routes for the admin pages, which should be allowed.</p>\n<ol>\n<li><p>The old version I am trying to replace is .authorizeRequests(this::authorizeUrlsOld). I am using the ExpressionInterceptUrlRegistry to set request matchers. When I use this code, I can still login to the admin pages and access the regular frontend application.</p>\n</li>\n<li><p>However, when using the new version .authorizeHttpRequests(this::authorizeUrlsNew) all calls that are not explicitally authorized in the method are unauthorized (e.g. api/markets). For this, I replaced the deprecated ExpressionUrlAuthorizationConfigurer with AuthorizeHttpRequestsConfigurer, which does not have the ExpressionInterceptUrlRegistry. Therefore, I had to use AuthorizationManagerRequestMatcherRegistry, but it seems to work differently.</p>\n</li>\n</ol>\n<p>How can I get .authorizeHttpRequests(this::authorizeUrlsNew) to work?</p>\n<p><strong>The class SecurityConfiguration:</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity(securedEnabled = true)\n@RequiredArgsConstructor\n@Slf4j\npublic class SecurityConfiguration {\n\n    private final AuthenticationManagerBuilder authenticationManagerBuilder;\n    private final UserDetailsService userDetailsService;\n    private final TokenProvider tokenProvider;\n    private final GlobalProperties globalProperties;\n    private final PasswordEncoder passwordEncoder;\n    \n    @PostConstruct\n    public void init() {\n        try {\n            authenticationManagerBuilder\n                    .userDetailsService(userDetailsService)\n                    .passwordEncoder(passwordEncoder);\n        } catch (Exception e) {\n            throw new BeanInitializationException(&quot;Security configuration failed&quot;, e);\n        }\n    }\n    @Bean\n    AuthenticationManager customAuthenticationManager(UserDetailsService userDetailsService, PasswordEncoder encoder) {\n        return authentication -&gt; {\n            var username = String.valueOf(authentication.getPrincipal());\n            var password = String.valueOf(authentication.getCredentials());\n\n            var user = userDetailsService.loadUserByUsername(username);\n\n            if (!encoder.matches(password, user.getPassword())) {\n                throw new BadCredentialsException(&quot;Bad credentials&quot;);\n            }\n\n            if (!user.isEnabled()) {\n                throw new DisabledException(&quot;User account is not active&quot;);\n            }\n\n            return new UsernamePasswordAuthenticationToken(username, null, user.getAuthorities());\n        };\n    }\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return web -&gt; {\n            web.debug(globalProperties.isSecurityDebugEnabled());\n            web.ignoring()\n                    .requestMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\n                    .requestMatchers(&quot;/i18n/**&quot;);\n        };\n    }\n\n    @Bean\n    protected SecurityFilterChain configure(HttpSecurity http) throws Exception {\n        return http\n                .authorizeRequests(this::authorizeUrlsOld) //does work\n//                .authorizeHttpRequests(this::authorizeUrlsNew) //does not work\n                .csrf(AbstractHttpConfigurer::disable)\n                .addFilterBefore(new JWTFilter(tokenProvider), UsernamePasswordAuthenticationFilter.class)\n                .build();\n    }\n\n    private HttpSecurity authorizeUrlsOld(ExpressionUrlAuthorizationConfigurer&lt;HttpSecurity&gt;.ExpressionInterceptUrlRegistry urlRegistry) {\n        urlRegistry\n                .requestMatchers(&quot;api/admin/authenticate&quot;).permitAll()\n                .requestMatchers(&quot;api/admin/authenticate/captcha&quot;).permitAll()\n                .requestMatchers(&quot;api/admin/**&quot;).authenticated();\n\n        return urlRegistry.and();\n    }\n\n    private void authorizeUrlsNew(AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry matcherReg) {\n        matcherReg\n                .requestMatchers(&quot;api/admin/authenticate&quot;).permitAll()\n                .requestMatchers(&quot;api/admin/authenticate/captcha&quot;).permitAll()\n                .requestMatchers(&quot;api/admin/**&quot;).authenticated();\n    }\n\n}\n</code></pre>\n<p><strong>The class JWTFilter:</strong></p>\n<pre><code>public class JWTFilter extends GenericFilterBean {\n\n\n    private TokenProvider tokenProvider;\n\n    public JWTFilter(TokenProvider tokenProvider) {\n        this.tokenProvider = tokenProvider;\n    }\n\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\n        throws IOException, ServletException {\n        HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;\n        String jwt = resolveToken(httpServletRequest);\n        if (StringUtils.hasText(jwt) &amp;&amp; this.tokenProvider.validateToken(jwt)) {\n            Authentication authentication = this.tokenProvider.getAuthentication(jwt);\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n        }\n        filterChain.doFilter(servletRequest, servletResponse);\n    }\n\n    private String resolveToken(HttpServletRequest request){\n        String bearerToken = request.getHeader(HttpHeaders.AUTHORIZATION);\n        if (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith(JwtConstants.BEARER_PREFIX + &quot; &quot;)) {\n            return bearerToken.substring(7, bearerToken.length());\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>I tried removing the deprecaded methods by new ones.</p>\n"},{"tags":["java","spring","database","jpa","relational-database"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1697640894,"post_id":77316882,"comment_id":136305935,"body_markdown":"@MapsId(&quot;id&quot;) doesn&#39;t look at all right - the &#39;id&#39; property is the full OrderHasWorkstepId embeddable, and you&#39;ve already pointed the @MapsId(&quot;orderOrderNo&quot;) at it. Instead of bending your model backwards to use an embedded id, why not look at marking your relationships as IDs directly instead. Put the relationship&#39;s Id classes exactly as they are (so WorkstepId for the Workstep) in an IdClass.","body":"@MapsId(&quot;id&quot;) doesn&#39;t look at all right - the &#39;id&#39; property is the full OrderHasWorkstepId embeddable, and you&#39;ve already pointed the @MapsId(&quot;orderOrderNo&quot;) at it. Instead of bending your model backwards to use an embedded id, why not look at marking your relationships as IDs directly instead. Put the relationship&#39;s Id classes exactly as they are (so WorkstepId for the Workstep) in an IdClass."},{"owner":{"account_id":5722247,"reputation":185,"user_id":4520351,"display_name":"Dexxrey"},"score":0,"creation_date":1697659507,"post_id":77316882,"comment_id":136309242,"body_markdown":"You are correct. Your way makes more sense but I get the same error apparently if I change the property of spring.jpa.hibernate.ddl-auto=update to none it works. But I am not sure if it actually fixes the problem or delays it for later.","body":"You are correct. Your way makes more sense but I get the same error apparently if I change the property of spring.jpa.hibernate.ddl-auto=update to none it works. But I am not sure if it actually fixes the problem or delays it for later."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1697732809,"post_id":77316882,"comment_id":136319864,"body_markdown":"Use drop and create instead. Not all  model and mapping changes will easily be &#39;updated&#39; into an existing schema with data already in it.","body":"Use drop and create instead. Not all  model and mapping changes will easily be &#39;updated&#39; into an existing schema with data already in it."}],"answers":[{"comments":[{"owner":{"account_id":5722247,"reputation":185,"user_id":4520351,"display_name":"Dexxrey"},"score":0,"creation_date":1697660152,"post_id":77317472,"comment_id":136309362,"body_markdown":"It worked and it makes more sense that way. Auto-generated entities are double edged sword I guess you dont have to take them for granted.  It extracted only the object attributes in OrderHasWorkstepId but perhaps it caused conflict with their instances in OrderHasWorkstep. Thank you.","body":"It worked and it makes more sense that way. Auto-generated entities are double edged sword I guess you dont have to take them for granted.  It extracted only the object attributes in OrderHasWorkstepId but perhaps it caused conflict with their instances in OrderHasWorkstep. Thank you."}],"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697641145,"creation_date":1697641145,"answer_id":77317472,"question_id":77316882,"body_markdown":"Try more simply:\r\n\r\n    @Entity\r\n    @Table(name = &quot;order_has_workstep&quot;, indexes = {\r\n            @Index(name = &quot;fk_order_has_workstep_order_idx&quot;, columnList = &quot;order_order_no&quot;),\r\n            @Index(name = &quot;fk_order_has_workstep_workstep_idx&quot;, columnList = &quot;workstep_workstep_no, workstep_article_article_no&quot;),\r\n            @Index(name = &quot;fk_order_has_workstep_machine_idx&quot;, columnList = &quot;machine_machine_no&quot;)\r\n    })\r\n    @IdClass(OrderHasWorkstepId.class)\r\n    public class OrderHasWorkstep {\r\n    \r\n        @Id\r\n        @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n        @OnDelete(action = OnDeleteAction.CASCADE)\r\n        @JoinColumn(name = &quot;order_order_no&quot;, nullable = false)\r\n        private Order orderOrderNo;\r\n    \r\n        @Id\r\n        @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n        @JoinColumns({\r\n                @JoinColumn(name = &quot;workstep_workstep_no&quot;, referencedColumnName = &quot;workstep_no&quot;, nullable = false),\r\n                @JoinColumn(name = &quot;workstep_article_article_no&quot;, referencedColumnName = &quot;article_article_no&quot;, nullable = false)\r\n        })\r\n        @OnDelete(action = OnDeleteAction.CASCADE)\r\n        private Workstep workstep;\r\n      ..\r\n    }\r\n    \r\n    \r\n    public class OrderHasWorkstepId implements Serializable {\r\n        private static final long serialVersionUID = -488175951625341581L;\r\n    \r\n        private String orderOrderNo;\r\n        private WorkstepId workstep;\r\n        ..\r\n    }\r\n\r\n\r\nWith JPA derived IDs, the referenced entity&#39;s ID must be used as is in the ID class, and named the same as the ID property.","title":"JPA cannot change column used in foreign key constraint","body":"<p>Try more simply:</p>\n<pre><code>@Entity\n@Table(name = &quot;order_has_workstep&quot;, indexes = {\n        @Index(name = &quot;fk_order_has_workstep_order_idx&quot;, columnList = &quot;order_order_no&quot;),\n        @Index(name = &quot;fk_order_has_workstep_workstep_idx&quot;, columnList = &quot;workstep_workstep_no, workstep_article_article_no&quot;),\n        @Index(name = &quot;fk_order_has_workstep_machine_idx&quot;, columnList = &quot;machine_machine_no&quot;)\n})\n@IdClass(OrderHasWorkstepId.class)\npublic class OrderHasWorkstep {\n\n    @Id\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    @JoinColumn(name = &quot;order_order_no&quot;, nullable = false)\n    private Order orderOrderNo;\n\n    @Id\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    @JoinColumns({\n            @JoinColumn(name = &quot;workstep_workstep_no&quot;, referencedColumnName = &quot;workstep_no&quot;, nullable = false),\n            @JoinColumn(name = &quot;workstep_article_article_no&quot;, referencedColumnName = &quot;article_article_no&quot;, nullable = false)\n    })\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    private Workstep workstep;\n  ..\n}\n\n\npublic class OrderHasWorkstepId implements Serializable {\n    private static final long serialVersionUID = -488175951625341581L;\n\n    private String orderOrderNo;\n    private WorkstepId workstep;\n    ..\n}\n</code></pre>\n<p>With JPA derived IDs, the referenced entity's ID must be used as is in the ID class, and named the same as the ID property.</p>\n"}],"owner":{"account_id":5722247,"reputation":185,"user_id":4520351,"display_name":"Dexxrey"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77317472,"answer_count":1,"score":0,"last_activity_date":1697641145,"creation_date":1697636572,"question_id":77316882,"body_markdown":"I have strange database structure where I have a pair of 2 foreign keys as primary key in 1 table. In another table I have 3 foreign keys and as a primary key and I struggle to make that as a JPA entity class. \r\nThe error I get is:  Cannot change column &#39;workstep_no&#39;: used in a foreign key constraint &#39;fk_order_has_workstep_workstep&#39;\r\n\r\nHere is the db Schema: [![db schema](https://i.stack.imgur.com/et7Qd.png)](https://i.stack.imgur.com/et7Qd.png)\r\nHere are some of my entity classes\r\nOrderHasWorkstep\r\n```\r\n@Entity\r\n@Table(name = &quot;order_has_workstep&quot;, indexes = {\r\n        @Index(name = &quot;fk_order_has_workstep_order_idx&quot;, columnList = &quot;order_order_no&quot;),\r\n        @Index(name = &quot;fk_order_has_workstep_workstep_idx&quot;, columnList = &quot;workstep_workstep_no, workstep_article_article_no&quot;),\r\n        @Index(name = &quot;fk_order_has_workstep_machine_idx&quot;, columnList = &quot;machine_machine_no&quot;)\r\n})\r\npublic class OrderHasWorkstep {\r\n    @EmbeddedId\r\n    private OrderHasWorkstepId id;\r\n\r\n    @MapsId(&quot;orderOrderNo&quot;)\r\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @JoinColumn(name = &quot;order_order_no&quot;, nullable = false)\r\n    private Order orderOrderNo;\r\n\r\n    @MapsId(&quot;id&quot;)\r\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    @JoinColumns({\r\n            @JoinColumn(name = &quot;workstep_workstep_no&quot;, referencedColumnName = &quot;workstep_no&quot;, nullable = false),\r\n            @JoinColumn(name = &quot;workstep_article_article_no&quot;, referencedColumnName = &quot;article_article_no&quot;, nullable = false)\r\n    })\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    private Workstep workstep;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @JoinColumn(name = &quot;machine_machine_no&quot;)\r\n    private Machine machineMachineNo;\r\n\r\n    @Column(name = &quot;planned_calendar_week&quot;, length = 7)\r\n    private String plannedCalendarWeek;\r\n\r\n    @Column(name = &quot;starting_date&quot;, length = 7)\r\n    private String startingDate;\r\n\r\n    @Column(name = &quot;ending_date&quot;, length = 7)\r\n    private String endingDate;\r\n\r\n    @Column(name = &quot;status&quot;)\r\n    private Integer status;\r\n// getters and setters\r\n```\r\n\r\nOrderHasWorkstepId:\r\n\r\n```\r\n@Embeddable\r\npublic class OrderHasWorkstepId implements Serializable {\r\n    private static final long serialVersionUID = -488175951625341581L;\r\n    @Column(name = &quot;order_order_no&quot;, nullable = false, length = 10)\r\n    private String orderOrderNo;\r\n\r\n    @Column(name = &quot;workstep_workstep_no&quot;, nullable = false, length = 3)\r\n    private String workstepWorkstepNo;\r\n\r\n    @Column(name = &quot;workstep_article_article_no&quot;, nullable = false, length = 45)\r\n    private String workstepArticleArticleNo;\r\n//getters setters hashcode equals\r\n```\r\n\r\n\r\nWorkstep:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;workstep&quot;, indexes = {\r\n        @Index(name = &quot;fk_workstep_article_idx&quot;, columnList = &quot;article_article_no&quot;)\r\n})\r\npublic class Workstep {\r\n    @EmbeddedId\r\n    private WorkstepId id;\r\n\r\n    @MapsId(&quot;articleArticleNo&quot;)\r\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @JoinColumn(name = &quot;article_article_no&quot;, nullable = false)\r\n    private Article articleArticleNo;\r\n\r\n    @Lob\r\n    @Column(name = &quot;description&quot;)\r\n    private String description;\r\n\r\n    @Column(name = &quot;setup_time&quot;)\r\n    private LocalTime setupTime;\r\n\r\n    @Column(name = &quot;run_time&quot;)\r\n    private LocalTime runTime;\r\n\r\n    @Column(name = &quot;machine_group&quot;, length = 5)\r\n    private String machineGroup;\r\n//getters setters\r\n```\r\nWorkstepId\r\n\r\n```\r\n@Embeddable\r\npublic class WorkstepId implements Serializable {\r\n    private static final long serialVersionUID = 2987311413950947398L;\r\n    @Column(name = &quot;workstep_no&quot;, nullable = false, length = 3)\r\n    private String workstepNo;\r\n\r\n    @Column(name = &quot;article_article_no&quot;, nullable = false, length = 45)\r\n    private String articleArticleNo;\r\n```\r\n\r\n\r\n\r\n\r\nI tried to restructure the WorkstepIds to use entities not just strings but it still didnt work. I assume it could be something to do with the pair of columns as primary key taken into order_has_workstep","title":"JPA cannot change column used in foreign key constraint","body":"<p>I have strange database structure where I have a pair of 2 foreign keys as primary key in 1 table. In another table I have 3 foreign keys and as a primary key and I struggle to make that as a JPA entity class.\nThe error I get is:  Cannot change column 'workstep_no': used in a foreign key constraint 'fk_order_has_workstep_workstep'</p>\n<p>Here is the db Schema: <a href=\"https://i.stack.imgur.com/et7Qd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/et7Qd.png\" alt=\"db schema\" /></a>\nHere are some of my entity classes\nOrderHasWorkstep</p>\n<pre><code>@Entity\n@Table(name = &quot;order_has_workstep&quot;, indexes = {\n        @Index(name = &quot;fk_order_has_workstep_order_idx&quot;, columnList = &quot;order_order_no&quot;),\n        @Index(name = &quot;fk_order_has_workstep_workstep_idx&quot;, columnList = &quot;workstep_workstep_no, workstep_article_article_no&quot;),\n        @Index(name = &quot;fk_order_has_workstep_machine_idx&quot;, columnList = &quot;machine_machine_no&quot;)\n})\npublic class OrderHasWorkstep {\n    @EmbeddedId\n    private OrderHasWorkstepId id;\n\n    @MapsId(&quot;orderOrderNo&quot;)\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    @JoinColumn(name = &quot;order_order_no&quot;, nullable = false)\n    private Order orderOrderNo;\n\n    @MapsId(&quot;id&quot;)\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    @JoinColumns({\n            @JoinColumn(name = &quot;workstep_workstep_no&quot;, referencedColumnName = &quot;workstep_no&quot;, nullable = false),\n            @JoinColumn(name = &quot;workstep_article_article_no&quot;, referencedColumnName = &quot;article_article_no&quot;, nullable = false)\n    })\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    private Workstep workstep;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    @JoinColumn(name = &quot;machine_machine_no&quot;)\n    private Machine machineMachineNo;\n\n    @Column(name = &quot;planned_calendar_week&quot;, length = 7)\n    private String plannedCalendarWeek;\n\n    @Column(name = &quot;starting_date&quot;, length = 7)\n    private String startingDate;\n\n    @Column(name = &quot;ending_date&quot;, length = 7)\n    private String endingDate;\n\n    @Column(name = &quot;status&quot;)\n    private Integer status;\n// getters and setters\n</code></pre>\n<p>OrderHasWorkstepId:</p>\n<pre><code>@Embeddable\npublic class OrderHasWorkstepId implements Serializable {\n    private static final long serialVersionUID = -488175951625341581L;\n    @Column(name = &quot;order_order_no&quot;, nullable = false, length = 10)\n    private String orderOrderNo;\n\n    @Column(name = &quot;workstep_workstep_no&quot;, nullable = false, length = 3)\n    private String workstepWorkstepNo;\n\n    @Column(name = &quot;workstep_article_article_no&quot;, nullable = false, length = 45)\n    private String workstepArticleArticleNo;\n//getters setters hashcode equals\n</code></pre>\n<p>Workstep:</p>\n<pre><code>@Entity\n@Table(name = &quot;workstep&quot;, indexes = {\n        @Index(name = &quot;fk_workstep_article_idx&quot;, columnList = &quot;article_article_no&quot;)\n})\npublic class Workstep {\n    @EmbeddedId\n    private WorkstepId id;\n\n    @MapsId(&quot;articleArticleNo&quot;)\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    @JoinColumn(name = &quot;article_article_no&quot;, nullable = false)\n    private Article articleArticleNo;\n\n    @Lob\n    @Column(name = &quot;description&quot;)\n    private String description;\n\n    @Column(name = &quot;setup_time&quot;)\n    private LocalTime setupTime;\n\n    @Column(name = &quot;run_time&quot;)\n    private LocalTime runTime;\n\n    @Column(name = &quot;machine_group&quot;, length = 5)\n    private String machineGroup;\n//getters setters\n</code></pre>\n<p>WorkstepId</p>\n<pre><code>@Embeddable\npublic class WorkstepId implements Serializable {\n    private static final long serialVersionUID = 2987311413950947398L;\n    @Column(name = &quot;workstep_no&quot;, nullable = false, length = 3)\n    private String workstepNo;\n\n    @Column(name = &quot;article_article_no&quot;, nullable = false, length = 45)\n    private String articleArticleNo;\n</code></pre>\n<p>I tried to restructure the WorkstepIds to use entities not just strings but it still didnt work. I assume it could be something to do with the pair of columns as primary key taken into order_has_workstep</p>\n"},{"tags":["javascript","java","proxy","openwebstart"],"answers":[{"tags":[],"owner":{"account_id":24198082,"reputation":11,"user_id":18156276,"display_name":"user18156276"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644363863,"creation_date":1644363863,"answer_id":71042326,"question_id":67201480,"body_markdown":"You have clearly hit the Bug, I am trying to resolve in OWS for my Team as well. We have been stuck with this issue for 9 months ever since OWS rolled out. \r\nI can explain you what I discovered so far. Infact I sent my sanitized pac-proy to OWS team to identify the issue but they sent it back to me  .\r\nSo here is the issue. \r\nOWS has a javascript file in its source code. When you call dnsResolve in your pac-proxy, it invokes the provider of dnsResolve and that implementation is in OWS source code. \r\nNow the dnsResolve call java.net.* package classes internally. This requires Rhino and Java interface to have been stabilized at run time. \r\nOWS is not able to create that interface connection so when javascript tries to call java through the Rhino interface , it can not find java classes since it can not recognize that interface and so comes back to say java not found. \r\nI  and my Team are still analyzing the wireshark logs of error to figure out how we could put a fix into OWS or understand how OWS ,Java and Rhino can be successfully talk to each other in the security sandbox container inside which OWS runs. \r\nI could not give u a solution but a better understanding as to where you would like to put your efforts to make it work for u. ","title":"net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.EcmaError: ReferenceError: &quot;java&quot; is not defined. (internal#105)","body":"<p>You have clearly hit the Bug, I am trying to resolve in OWS for my Team as well. We have been stuck with this issue for 9 months ever since OWS rolled out.\nI can explain you what I discovered so far. Infact I sent my sanitized pac-proy to OWS team to identify the issue but they sent it back to me  .\nSo here is the issue.\nOWS has a javascript file in its source code. When you call dnsResolve in your pac-proxy, it invokes the provider of dnsResolve and that implementation is in OWS source code.\nNow the dnsResolve call java.net.* package classes internally. This requires Rhino and Java interface to have been stabilized at run time.\nOWS is not able to create that interface connection so when javascript tries to call java through the Rhino interface , it can not find java classes since it can not recognize that interface and so comes back to say java not found.\nI  and my Team are still analyzing the wireshark logs of error to figure out how we could put a fix into OWS or understand how OWS ,Java and Rhino can be successfully talk to each other in the security sandbox container inside which OWS runs.\nI could not give u a solution but a better understanding as to where you would like to put your efforts to make it work for u.</p>\n"}],"owner":{"account_id":2736194,"reputation":231,"user_id":2358826,"accept_rate":55,"display_name":"user2358826"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697641024,"creation_date":1619029230,"question_id":67201480,"body_markdown":"When trying to invoke a JNLP application with OpenWebStart, I get this stack trace of errors.\r\n\r\n    net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.EcmaError: ReferenceError: &quot;java&quot; is not defined. (internal#105)\r\n    \tat net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3557)\r\n    \tat net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3535)\r\n    \tat net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.ScriptRuntime.notFoundError(ScriptRuntime.java:3620)\r\n    \tat net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.ScriptRuntime.name(ScriptRuntime.java:1652)\r\n    \tat net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:3413)\r\n    \tat script.dnsResolve(internal:105)\r\n    \tat script.getResolvedIp(http://uhic.ca.edu/toodeepregression3.pac:569)\r\n    \tat script.FindProxyForURL(http://uhic.ca.edu/toodeepregression3.pac:62)\r\n\r\nThe script at line 569 is.. \r\ninternalResolvedIp = dnsResolve(host) \r\n\r\n\t\tif (\r\n\t\t\t\thost\r\n\t\t\t\t) {\r\n\t\t\t// If the user has typed an IP address in the address bar, take it\r\n\t\t\t// as it is.\r\n\t\t\tvar isIpV4Address = /^(\\d+.){3}\\d+$/;\r\n\t\t\tvar isIpV6Address = /^\\[(.*)\\]$/;\r\n\r\n\t\t\tif (\r\n\t\t\t\t\tisIpV4Address.test(host)\r\n\t\t\t\t\t) {\r\n\t\t\t\tinternalResolvedIp = host;\r\n\t\t\t} else {\r\n\t\t\t\tvar matches = host.match(isIpV6Address);\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t\tmatches &amp;&amp; matches.length === 2\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t// Get the address between the square brackets\r\n\t\t\t\t\tinternalResolvedIp = matches[1];\r\n\t\t\t\t} else if (\r\n\t\t\t\t\t\tisDnsResolvingAllowed\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t****internalResolvedIp = dnsResolve(host);****\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\nI am not sure what this error is. I have looked at the OpenWebStart logs as well. I have searched far and wide in the internet world but I barely get any hits for this error.","title":"net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.EcmaError: ReferenceError: &quot;java&quot; is not defined. (internal#105)","body":"<p>When trying to invoke a JNLP application with OpenWebStart, I get this stack trace of errors.</p>\n<pre><code>net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.EcmaError: ReferenceError: &quot;java&quot; is not defined. (internal#105)\n    at net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3557)\n    at net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3535)\n    at net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.ScriptRuntime.notFoundError(ScriptRuntime.java:3620)\n    at net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.ScriptRuntime.name(ScriptRuntime.java:1652)\n    at net.adoptopenjdk.icedteaweb.shaded.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:3413)\n    at script.dnsResolve(internal:105)\n    at script.getResolvedIp(http://uhic.ca.edu/toodeepregression3.pac:569)\n    at script.FindProxyForURL(http://uhic.ca.edu/toodeepregression3.pac:62)\n</code></pre>\n<p>The script at line 569 is..\ninternalResolvedIp = dnsResolve(host)</p>\n<pre><code>    if (\n            host\n            ) {\n        // If the user has typed an IP address in the address bar, take it\n        // as it is.\n        var isIpV4Address = /^(\\d+.){3}\\d+$/;\n        var isIpV6Address = /^\\[(.*)\\]$/;\n\n        if (\n                isIpV4Address.test(host)\n                ) {\n            internalResolvedIp = host;\n        } else {\n            var matches = host.match(isIpV6Address);\n\n            if (\n                    matches &amp;&amp; matches.length === 2\n                    ) {\n                // Get the address between the square brackets\n                internalResolvedIp = matches[1];\n            } else if (\n                    isDnsResolvingAllowed\n                    ) {\n                ****internalResolvedIp = dnsResolve(host);****\n            }\n        }\n    }\n</code></pre>\n<p>I am not sure what this error is. I have looked at the OpenWebStart logs as well. I have searched far and wide in the internet world but I barely get any hits for this error.</p>\n"},{"tags":["java","string","for-loop"],"comments":[{"owner":{"account_id":27181504,"reputation":364,"user_id":20716692,"display_name":"codingStarter"},"score":3,"creation_date":1697562689,"post_id":77310935,"comment_id":136294493,"body_markdown":"you are changing the string while you are running on it, probably that is what makes the problems (just think of it - you are cutting out part of the string - and keeping the index at the same place, so you are skipping some letters that moved backwards","body":"you are changing the string while you are running on it, probably that is what makes the problems (just think of it - you are cutting out part of the string - and keeping the index at the same place, so you are skipping some letters that moved backwards"},{"owner":{"account_id":29543286,"reputation":11,"user_id":22641460,"display_name":"JavaStudent513"},"score":0,"creation_date":1697562861,"post_id":77310935,"comment_id":136294527,"body_markdown":"thank you! I&#39;ll keep that in mind and try and make changes","body":"thank you! I&#39;ll keep that in mind and try and make changes"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1697564173,"post_id":77310935,"comment_id":136294760,"body_markdown":"So if you remove the letter _o_ (for example) from the string _goooo dawwwwgs_, should the result be: _g dawwwwgs_ ?","body":"So if you remove the letter <i>o</i> (for example) from the string <i>goooo dawwwwgs</i>, should the result be: <i>g dawwwwgs</i> ?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":3,"creation_date":1697565051,"post_id":77310935,"comment_id":136294898,"body_markdown":"You should utilize the _charAt_ method here, considering your _sub-strings_ are single characters.","body":"You should utilize the <i>charAt</i> method here, considering your <i>sub-strings</i> are single characters."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697570894,"post_id":77310935,"comment_id":136295814,"body_markdown":"Off-topic: You might want to change `sc.nextLine()` to `sc.next()`","body":"Off-topic: You might want to change <code>sc.nextLine()</code> to <code>sc.next()</code>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697571976,"post_id":77310935,"comment_id":136295965,"body_markdown":"By the way, for future reference, for questions of this type, it is good to show one or more  examples of input (✔), expected output (✗), and actual output (✗).","body":"By the way, for future reference, for questions of this type, it is good to show one or more  examples of input (✔), expected output (✗), and actual output (✗)."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697564784,"creation_date":1697564419,"answer_id":77311146,"question_id":77310935,"body_markdown":"&gt; _&quot;... However, when I run the program, it only removes some instances of the character. ...&quot;_\r\n\r\nDecrement _i_ whenever the _String_ is parsed.\r\n\r\n```java\r\nif (userString.substring(i, i+1).equals(charToRemove))\r\n{\r\n    userString = userString.substring(0, i) + userString.substring(i + 1);\r\n    i--;\r\n}\r\n```\r\n\r\nAdditionally, the _loop_ should be conditional to _i &lt; userString.length()_, and not _i &lt; userString.length() - 1_.\r\n\r\n```java\r\nScanner sc = new Scanner(System.in);\r\nString userString = &quot;goooo dawwwwgs&quot;;\r\nString charToRemove = &quot;&quot;;\r\n\r\n//////////////////////////////////////////////////////////////////////\r\n\r\nSystem.out.println(&quot;Enter the character to remove&quot;);\r\ncharToRemove = sc.nextLine();\r\n\r\nfor (int i = 0; i &lt; userString.length(); i++)\r\n{\r\n    if (userString.substring(i, i+1).equals(charToRemove))\r\n    {\r\n        userString = userString.substring(0, i) + userString.substring(i + 1);\r\n        i--;\r\n    }\r\n}\r\n\r\nSystem.out.println(&quot;The new sentence is: &quot; + userString);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nEnter the character to remove\r\no\r\nThe new sentence is: g dawwwwgs\r\n```\r\n\r\n```none\r\nEnter the character to remove\r\nw\r\nThe new sentence is: goooo dags\r\n```\r\n\r\nHere is a re-factor, for reference.\r\n\r\n```java\r\nScanner sc = new Scanner(System.in);\r\nString s = &quot;goooo dawwwwgs&quot;;\r\nSystem.out.println(&quot;Enter the character to remove&quot;);\r\nchar c = sc.nextLine().charAt(0);\r\nfor (int i = 0; i &lt; s.length(); i++)\r\n    if (s.charAt(i) == c) {\r\n        s = s.substring(0, i) + s.substring(i + 1);\r\n        i--;\r\n    }\r\nSystem.out.println(&quot;The new sentence is: &quot; + s);\r\n```\r\n\r\nAlternately, just create a new _String_.\r\n\r\n```java\r\nScanner sc = new Scanner(System.in);\r\nString s = &quot;goooo dawwwwgs&quot;, ns = &quot;&quot;;\r\nSystem.out.println(&quot;Enter the character to remove&quot;);\r\nchar c = sc.nextLine().charAt(0), nc;\r\nfor (int i = 0, n = s.length(); i &lt; n; i++)\r\n    if ((nc = s.charAt(i)) != c) ns += nc;\r\nSystem.out.println(&quot;The new sentence is: &quot; + ns);\r\n```","title":"Program to remove all instances of a character from a phrase is only removing some instances","body":"<blockquote>\n<p><em>&quot;... However, when I run the program, it only removes some instances of the character. ...&quot;</em></p>\n</blockquote>\n<p>Decrement <em>i</em> whenever the <em>String</em> is parsed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (userString.substring(i, i+1).equals(charToRemove))\n{\n    userString = userString.substring(0, i) + userString.substring(i + 1);\n    i--;\n}\n</code></pre>\n<p>Additionally, the <em>loop</em> should be conditional to <em>i &lt; userString.length()</em>, and not <em>i &lt; userString.length() - 1</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in);\nString userString = &quot;goooo dawwwwgs&quot;;\nString charToRemove = &quot;&quot;;\n\n//////////////////////////////////////////////////////////////////////\n\nSystem.out.println(&quot;Enter the character to remove&quot;);\ncharToRemove = sc.nextLine();\n\nfor (int i = 0; i &lt; userString.length(); i++)\n{\n    if (userString.substring(i, i+1).equals(charToRemove))\n    {\n        userString = userString.substring(0, i) + userString.substring(i + 1);\n        i--;\n    }\n}\n\nSystem.out.println(&quot;The new sentence is: &quot; + userString);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter the character to remove\no\nThe new sentence is: g dawwwwgs\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>Enter the character to remove\nw\nThe new sentence is: goooo dags\n</code></pre>\n<p>Here is a re-factor, for reference.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in);\nString s = &quot;goooo dawwwwgs&quot;;\nSystem.out.println(&quot;Enter the character to remove&quot;);\nchar c = sc.nextLine().charAt(0);\nfor (int i = 0; i &lt; s.length(); i++)\n    if (s.charAt(i) == c) {\n        s = s.substring(0, i) + s.substring(i + 1);\n        i--;\n    }\nSystem.out.println(&quot;The new sentence is: &quot; + s);\n</code></pre>\n<p>Alternately, just create a new <em>String</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in);\nString s = &quot;goooo dawwwwgs&quot;, ns = &quot;&quot;;\nSystem.out.println(&quot;Enter the character to remove&quot;);\nchar c = sc.nextLine().charAt(0), nc;\nfor (int i = 0, n = s.length(); i &lt; n; i++)\n    if ((nc = s.charAt(i)) != c) ns += nc;\nSystem.out.println(&quot;The new sentence is: &quot; + ns);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697640966,"creation_date":1697570754,"answer_id":77311738,"question_id":77310935,"body_markdown":"By the way, I prefer `charToRemove` actually be a `char`. You could use something like `char charToRemove = sc.next().charAt (0)`\r\n\r\nIn this answer, I&#39;m suggesting *4* solutions. The easiest one is #4. But, since you are a new student, I would like you to be exposed to the thinking behind all 4.\r\n\r\nAs was mentioned in the comments, a problem results because the index advances as the string is altered. The shift and advancement causes some characters to be missed. \r\n\r\n**1)** You are not allowed to use the `indexOf` methods in the [`String` API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html). But, under the constraints imposed by your teacher, are you allowed to code your own? \r\n````\r\n    while ( (i = myIndexOf (userString, charToRemove) &gt;= 0) { ...\r\n````\r\nYou would create `public static int myIndexOf` method to be similar to one of the index methods in `String`. \r\n\r\n**2)** Run the `for` loop backwards. That way, for each value of `i`, it will be confirmed that no occurrences of `charToRemove` occur in `userString` *after* index `i`.\r\n````\r\npublic static String removeCharA (String source, char toDelete) { \r\n        \r\n        for (int i = source.length() -1; i &gt;= 0; i--) { \r\n            if (source.charAt(i) == toDelete) {\r\n               source =  source.substring (0, i) \r\n                       + source.substring (i + 1);\r\n            }\r\n        }        \r\n        return source;\r\n    }\r\n````\r\n**3)** Use another `String` in your code. It will initially be empty, i.e. `String result = &quot;&quot;; // empty String`. As you go through your loop, each character in `userString` that is *not* equal to `characterToRemove`, copy the indexed character from `userString` to `result` using the `+` String concatenation operator. \r\n\r\n\r\n**4)** Delay advancing the index when it is discovered to point to one of the characters to be deleted. One way to do that is to subtract one from the index, as in a previous answer. &lt;editorial / opinion&gt; But, I don&#39;t like changing the value of a `for` loop index within the block controlled by the loop. I regard that as poor style, prone to being associated with bugs. &lt;end editorial / opinion&gt;.  So, another way to do this is to use a nested loop. Note that solution **1)** does this. There is the `while` loop, and another loop inside `myIndexOf`. \r\n\r\nHowever, there is a much easier way to implement the 2nd loop: \r\n\r\n\r\n*You can fix your code by changing a single word:*\r\n\r\n-- Change the `if` to `while`. ","title":"Program to remove all instances of a character from a phrase is only removing some instances","body":"<p>By the way, I prefer <code>charToRemove</code> actually be a <code>char</code>. You could use something like <code>char charToRemove = sc.next().charAt (0)</code></p>\n<p>In this answer, I'm suggesting <em>4</em> solutions. The easiest one is #4. But, since you are a new student, I would like you to be exposed to the thinking behind all 4.</p>\n<p>As was mentioned in the comments, a problem results because the index advances as the string is altered. The shift and advancement causes some characters to be missed.</p>\n<p><strong>1)</strong> You are not allowed to use the <code>indexOf</code> methods in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html\" rel=\"nofollow noreferrer\"><code>String</code> API</a>. But, under the constraints imposed by your teacher, are you allowed to code your own?</p>\n<pre><code>    while ( (i = myIndexOf (userString, charToRemove) &gt;= 0) { ...\n</code></pre>\n<p>You would create <code>public static int myIndexOf</code> method to be similar to one of the index methods in <code>String</code>.</p>\n<p><strong>2)</strong> Run the <code>for</code> loop backwards. That way, for each value of <code>i</code>, it will be confirmed that no occurrences of <code>charToRemove</code> occur in <code>userString</code> <em>after</em> index <code>i</code>.</p>\n<pre><code>public static String removeCharA (String source, char toDelete) { \n        \n        for (int i = source.length() -1; i &gt;= 0; i--) { \n            if (source.charAt(i) == toDelete) {\n               source =  source.substring (0, i) \n                       + source.substring (i + 1);\n            }\n        }        \n        return source;\n    }\n</code></pre>\n<p><strong>3)</strong> Use another <code>String</code> in your code. It will initially be empty, i.e. <code>String result = &quot;&quot;; // empty String</code>. As you go through your loop, each character in <code>userString</code> that is <em>not</em> equal to <code>characterToRemove</code>, copy the indexed character from <code>userString</code> to <code>result</code> using the <code>+</code> String concatenation operator.</p>\n<p><strong>4)</strong> Delay advancing the index when it is discovered to point to one of the characters to be deleted. One way to do that is to subtract one from the index, as in a previous answer. &lt;editorial / opinion&gt; But, I don't like changing the value of a <code>for</code> loop index within the block controlled by the loop. I regard that as poor style, prone to being associated with bugs. &lt;end editorial / opinion&gt;.  So, another way to do this is to use a nested loop. Note that solution <strong>1)</strong> does this. There is the <code>while</code> loop, and another loop inside <code>myIndexOf</code>.</p>\n<p>However, there is a much easier way to implement the 2nd loop:</p>\n<p><em>You can fix your code by changing a single word:</em></p>\n<p>-- Change the <code>if</code> to <code>while</code>.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697572750,"creation_date":1697572750,"answer_id":77311919,"question_id":77310935,"body_markdown":"In your snippet, you forgot to do `i--` every time when you remove one character from the given string:\r\n```java\r\npublic static String removeCharacters(String str, char ch) {\r\n    for (int i = 0; i &lt; str.length(); i++) {\r\n        if (str.charAt(i) == ch) {\r\n            str = str.substring(0, i) + str.substring(i + 1);\r\n            i--;\r\n        }\r\n    }\r\n\r\n    return str;\r\n}\r\n```\r\n\r\nActually, you can replace the snippet with inline string method with a bit better performance:\r\n```java\r\npublic static String removeCharacters(String str, char ch) {\r\n    return str.replace(String.valueOf(ch), &quot;&quot;);\r\n}\r\n```\r\n\r\nBut this is still very inefficient approach, because `String` in java is **immutable**. It is much better to build another string using `StringBuilder`:\r\n```java\r\npublic static String removeCharacters(String str, char ch) {\r\n    StringBuilder buf = new StringBuilder(str.length());\r\n\r\n    for (int i = 0; i &lt; str.length(); i++)\r\n        if (str.charAt(i) != ch)\r\n            buf.append(str.charAt(i));\r\n\r\n    return buf.toString();\r\n}\r\n```","title":"Program to remove all instances of a character from a phrase is only removing some instances","body":"<p>In your snippet, you forgot to do <code>i--</code> every time when you remove one character from the given string:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String removeCharacters(String str, char ch) {\n    for (int i = 0; i &lt; str.length(); i++) {\n        if (str.charAt(i) == ch) {\n            str = str.substring(0, i) + str.substring(i + 1);\n            i--;\n        }\n    }\n\n    return str;\n}\n</code></pre>\n<p>Actually, you can replace the snippet with inline string method with a bit better performance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String removeCharacters(String str, char ch) {\n    return str.replace(String.valueOf(ch), &quot;&quot;);\n}\n</code></pre>\n<p>But this is still very inefficient approach, because <code>String</code> in java is <strong>immutable</strong>. It is much better to build another string using <code>StringBuilder</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String removeCharacters(String str, char ch) {\n    StringBuilder buf = new StringBuilder(str.length());\n\n    for (int i = 0; i &lt; str.length(); i++)\n        if (str.charAt(i) != ch)\n            buf.append(str.charAt(i));\n\n    return buf.toString();\n}\n</code></pre>\n"}],"owner":{"account_id":29543286,"reputation":11,"user_id":22641460,"display_name":"JavaStudent513"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1697640966,"creation_date":1697562351,"question_id":77310935,"body_markdown":"I&#39;m creating a program to remove all instances of a character from a given phrase, and I am only allowed to use the following String methods: length, concat, +, charAt, substring, and equals (or equalsIgnoreCase). However, when I run the program, it only removes some instances of the character.\r\n\r\nI thought it was because the indices could have gone out of bounds, so I adjusted the for loop to run as long as i &lt; userString.length() - 1, but the program is still only removing two instances of the character. Code below:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class LabTester\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        Scanner sc = new Scanner(System.in);\r\n        String userString = &quot;goooo dawwwwgs&quot;;\r\n        String charToRemove = &quot;&quot;;\r\n\r\n        //////////////////////////////////////////////////////////////////////\r\n\t\r\n        System.out.println(&quot;Enter the character to remove&quot;);\r\n        charToRemove = sc.nextLine();\r\n\r\n        for (int i = 0; i &lt; userString.length() - 1; i++)\r\n        {\r\n            if (userString.substring(i, i+1).equals(charToRemove))\r\n            {\r\n                userString = userString.substring(0, i) + userString.substring(i + 1);\r\n            }\r\n        }\r\n\t\t\r\n        System.out.println(&quot;The new sentence is: &quot; + userString);\t\t\t\r\n    }\r\n}\r\n```","title":"Program to remove all instances of a character from a phrase is only removing some instances","body":"<p>I'm creating a program to remove all instances of a character from a given phrase, and I am only allowed to use the following String methods: length, concat, +, charAt, substring, and equals (or equalsIgnoreCase). However, when I run the program, it only removes some instances of the character.</p>\n<p>I thought it was because the indices could have gone out of bounds, so I adjusted the for loop to run as long as i &lt; userString.length() - 1, but the program is still only removing two instances of the character. Code below:</p>\n<pre><code>import java.util.Scanner;\n\npublic class LabTester\n{\n    public static void main(String[] args)\n    {\n        Scanner sc = new Scanner(System.in);\n        String userString = &quot;goooo dawwwwgs&quot;;\n        String charToRemove = &quot;&quot;;\n\n        //////////////////////////////////////////////////////////////////////\n    \n        System.out.println(&quot;Enter the character to remove&quot;);\n        charToRemove = sc.nextLine();\n\n        for (int i = 0; i &lt; userString.length() - 1; i++)\n        {\n            if (userString.substring(i, i+1).equals(charToRemove))\n            {\n                userString = userString.substring(0, i) + userString.substring(i + 1);\n            }\n        }\n        \n        System.out.println(&quot;The new sentence is: &quot; + userString);           \n    }\n}\n</code></pre>\n"},{"tags":["java","bouncycastle"],"answers":[{"comments":[{"owner":{"account_id":3148248,"reputation":425,"user_id":3637000,"display_name":"Herbert Pimentel"},"score":0,"creation_date":1547766046,"post_id":46770084,"comment_id":95315548,"body_markdown":"I am facing the same problem. I am settting as you said but in my case it only happening when runing from outside of the intelij IDE. My enviroment has several restrictions to set those configurations to all JVM. any help !?","body":"I am facing the same problem. I am settting as you said but in my case it only happening when runing from outside of the intelij IDE. My enviroment has several restrictions to set those configurations to all JVM. any help !?"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1547878065,"post_id":46770084,"comment_id":95352948,"body_markdown":"@HerbertPimentel: you don&#39;t say which method you tried, but if it&#39;s in the code (my 2nd or 3rd bullet) it should work as long as the BCprov jar is available, which depends on where you put the jar and how you set the classpath. And of course as long as you&#39;re running the correct class files; complicated IDEs can sometimes be running something other than what you think.","body":"@HerbertPimentel: you don&#39;t say which method you tried, but if it&#39;s in the code (my 2nd or 3rd bullet) it should work as long as the BCprov jar is available, which depends on where you put the jar and how you set the classpath. And of course as long as you&#39;re running the correct class files; complicated IDEs can sometimes be running something other than what you think."}],"tags":[],"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1697640092,"creation_date":1508156023,"answer_id":46770084,"question_id":46767281,"body_markdown":"1.2.840.113549.3.7 is the OID for DES-EDE3-CBC-Pad (in PBES2) in [PKCS5 = rfc2898 sec B.2.2](https://www.rfc-editor.org/rfc/rfc2898#appendix-B.2.2). (1.2.840.113549.1.5.13 is the &#39;outer&#39; OID for all PBES2 variants.)\r\n\r\nThe Sun-now-Oracle **(default) providers** do support the DES-EDE3 algorithm (aka TripleDES or TDEA keying option 1) with CBC and PKCS5/7 padding but **do not have this OID mapping** for it. The BouncyCastle provider does have the mapping, so if you use the BC provider for this operation it should work. This can be done  \r\n* for all JVMs by configuring `security.provider.&lt;i&gt;` in `JRE/lib/security/java.security` (update: in j9+ `JRE/conf/security/java.security`) or  \r\n* for a JVM by `java.lang.security.Provider.addProvider (new BouncyCastleProvider())` or  \r\n* for this operation by adding `.setProvider()` with the name of or object for the BC provider to your `JceOpenSSLPKCS8DecryptorProviderBuilder` invocation\r\n\r\nNote BC for TripleDES seems to require the &#39;unlimited strength policy&#39; on Oracle Java below j8u151; see https://stackoverflow.com/questions/46657809/cannot-open-pkcs12-store-because-of-password and https://stackoverflow.com/questions/3862800/invalidkeyexception-illegal-key-size and many other dupes.","title":"Reading PKCS8 in PEM format: Cannot find provider","body":"<p>1.2.840.113549.3.7 is the OID for DES-EDE3-CBC-Pad (in PBES2) in <a href=\"https://www.rfc-editor.org/rfc/rfc2898#appendix-B.2.2\" rel=\"nofollow noreferrer\">PKCS5 = rfc2898 sec B.2.2</a>. (1.2.840.113549.1.5.13 is the 'outer' OID for all PBES2 variants.)</p>\n<p>The Sun-now-Oracle <strong>(default) providers</strong> do support the DES-EDE3 algorithm (aka TripleDES or TDEA keying option 1) with CBC and PKCS5/7 padding but <strong>do not have this OID mapping</strong> for it. The BouncyCastle provider does have the mapping, so if you use the BC provider for this operation it should work. This can be done</p>\n<ul>\n<li>for all JVMs by configuring <code>security.provider.&lt;i&gt;</code> in <code>JRE/lib/security/java.security</code> (update: in j9+ <code>JRE/conf/security/java.security</code>) or</li>\n<li>for a JVM by <code>java.lang.security.Provider.addProvider (new BouncyCastleProvider())</code> or</li>\n<li>for this operation by adding <code>.setProvider()</code> with the name of or object for the BC provider to your <code>JceOpenSSLPKCS8DecryptorProviderBuilder</code> invocation</li>\n</ul>\n<p>Note BC for TripleDES seems to require the 'unlimited strength policy' on Oracle Java below j8u151; see <a href=\"https://stackoverflow.com/questions/46657809/cannot-open-pkcs12-store-because-of-password\">Cannot open PKCS12 store because of password</a> and <a href=\"https://stackoverflow.com/questions/3862800/invalidkeyexception-illegal-key-size\">InvalidKeyException Illegal key size</a> and many other dupes.</p>\n"}],"owner":{"account_id":3373789,"reputation":7070,"user_id":2832398,"accept_rate":81,"display_name":"lilezek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5210,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46770084,"answer_count":1,"score":1,"last_activity_date":1697640092,"creation_date":1508147040,"question_id":46767281,"body_markdown":"Trying to read a PKCS8 private key in PEM format with the following:\r\n\r\n    private static PrivateKey loadPrivateKey()\r\n            throws IOException, GeneralSecurityException, OperatorCreationException, PKCSException {\r\n        FileReader fileReader = new FileReader(certsRoot + &quot;/pep-client-key.pem&quot;);\r\n        PEMParser keyReader = new PEMParser(fileReader);\r\n\r\n        JcaPEMKeyConverter converter = new JcaPEMKeyConverter();\r\n        InputDecryptorProvider decryptionProv = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(&quot;mypassword&quot;.toCharArray());\r\n\r\n        Object keyPair = keyReader.readObject();\r\n        PrivateKeyInfo keyInfo;\r\n\r\n        if (keyPair instanceof PKCS8EncryptedPrivateKeyInfo) {\r\n            keyInfo = ((PKCS8EncryptedPrivateKeyInfo) keyPair).decryptPrivateKeyInfo(decryptionProv); // Exception thrown from here\r\n            keyReader.close();\r\n            return converter.getPrivateKey(keyInfo);\r\n        }\r\n        return null;\r\n    }\r\n\r\ngenerates this error:\r\n\r\n    org.bouncycastle.pkcs.PKCSException: unable to read encrypted data: 1.2.840.113549.1.5.13 not available: Cannot find any provider supporting 1.2.840.113549.3.7\r\n    \tat org.bouncycastle.pkcs.PKCS8EncryptedPrivateKeyInfo.decryptPrivateKeyInfo(Unknown Source)\r\n\r\nI&#39;ve checked with OpenSSL that the file can be processed as PKCS8 PEM, with the password provided. \r\n\r\nAny idea? I don&#39;t mind if there is a solution not involving BouncyCastle&#39;s  libraries. ","title":"Reading PKCS8 in PEM format: Cannot find provider","body":"<p>Trying to read a PKCS8 private key in PEM format with the following:</p>\n\n<pre><code>private static PrivateKey loadPrivateKey()\n        throws IOException, GeneralSecurityException, OperatorCreationException, PKCSException {\n    FileReader fileReader = new FileReader(certsRoot + \"/pep-client-key.pem\");\n    PEMParser keyReader = new PEMParser(fileReader);\n\n    JcaPEMKeyConverter converter = new JcaPEMKeyConverter();\n    InputDecryptorProvider decryptionProv = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(\"mypassword\".toCharArray());\n\n    Object keyPair = keyReader.readObject();\n    PrivateKeyInfo keyInfo;\n\n    if (keyPair instanceof PKCS8EncryptedPrivateKeyInfo) {\n        keyInfo = ((PKCS8EncryptedPrivateKeyInfo) keyPair).decryptPrivateKeyInfo(decryptionProv); // Exception thrown from here\n        keyReader.close();\n        return converter.getPrivateKey(keyInfo);\n    }\n    return null;\n}\n</code></pre>\n\n<p>generates this error:</p>\n\n<pre><code>org.bouncycastle.pkcs.PKCSException: unable to read encrypted data: 1.2.840.113549.1.5.13 not available: Cannot find any provider supporting 1.2.840.113549.3.7\n    at org.bouncycastle.pkcs.PKCS8EncryptedPrivateKeyInfo.decryptPrivateKeyInfo(Unknown Source)\n</code></pre>\n\n<p>I've checked with OpenSSL that the file can be processed as PKCS8 PEM, with the password provided. </p>\n\n<p>Any idea? I don't mind if there is a solution not involving BouncyCastle's  libraries. </p>\n"},{"tags":["java","cucumber","e2e-testing","playwright","end-to-end"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":5,"creation_date":1696431199,"post_id":77230662,"comment_id":136152496,"body_markdown":"Test expectations are best when hard coded. If you really need a calculation, make sure the implementation is entirely separate from the code under test.","body":"Test expectations are best when hard coded. If you really need a calculation, make sure the implementation is entirely separate from the code under test."}],"answers":[{"tags":[],"owner":{"account_id":4335872,"reputation":77,"user_id":3540367,"display_name":"Vinit More"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696432513,"creation_date":1696432513,"answer_id":77230832,"question_id":77230662,"body_markdown":"If you follow cucumber official scenario example document of &#39;Writing better Gherkin&#39;, they have written expected values in `Then` condition\r\n\r\n[Official Cucumber document for **Writing better Gherkin**][1]\r\n\r\nYou can also follow `Scenario Outline` where you can test multiple conditions\r\n\r\n[Scenario Outline Example][2]\r\n\r\n        Scenario Outline: Verify discount amount is correct\r\n        Given  the shopping basket total is &lt;total&gt;\r\n        When  I click &quot;Calculate Discount&quot;\r\n        Then  the reduction should be &lt;expected&gt;\r\n    \r\n     Examples:\r\n        | total  | expected |\r\n        | 60.00  |   7.20   |\r\n        | -1     |   0      |\r\n\r\nAnd then you can play within different examples\r\n\r\n\r\n  [1]: https://cucumber.io/docs/bdd/better-gherkin/#:~:text=Then%20I%20see%20%22FreeArticle1%22%20and%20%22PaidArticle1%22%20on%20the%20home%20page\r\n  [2]: https://cucumber.io/docs/gherkin/reference/#:~:text=*.feature%20file.-,Scenario%20Outline,-The%20Scenario%20Outline","title":"Should E2E tests expected results be hard coded or calculated?","body":"<p>If you follow cucumber official scenario example document of 'Writing better Gherkin', they have written expected values in <code>Then</code> condition</p>\n<p><a href=\"https://cucumber.io/docs/bdd/better-gherkin/#:%7E:text=Then%20I%20see%20%22FreeArticle1%22%20and%20%22PaidArticle1%22%20on%20the%20home%20page\" rel=\"nofollow noreferrer\">Official Cucumber document for <strong>Writing better Gherkin</strong></a></p>\n<p>You can also follow <code>Scenario Outline</code> where you can test multiple conditions</p>\n<p><a href=\"https://cucumber.io/docs/gherkin/reference/#:%7E:text=*.feature%20file.-,Scenario%20Outline,-The%20Scenario%20Outline\" rel=\"nofollow noreferrer\">Scenario Outline Example</a></p>\n<pre><code>    Scenario Outline: Verify discount amount is correct\n    Given  the shopping basket total is &lt;total&gt;\n    When  I click &quot;Calculate Discount&quot;\n    Then  the reduction should be &lt;expected&gt;\n\n Examples:\n    | total  | expected |\n    | 60.00  |   7.20   |\n    | -1     |   0      |\n</code></pre>\n<p>And then you can play within different examples</p>\n"},{"tags":[],"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696444510,"creation_date":1696436825,"answer_id":77231362,"question_id":77230662,"body_markdown":"I think your scenario is missing a step.\r\n\r\n```\r\nScenario: Verify discount amount is applied\r\n  Given the shopping basket total is €60\r\n  And a 12% discount is applicable\r\n  When I click &quot;Calculate Discount&quot;\r\n  Then the reduction should be €7.20\r\n```\r\n\r\nWith this missing step (of either verifying there is, or applying a 12% discount) it makes sense to test the discount as a currency value.","title":"Should E2E tests expected results be hard coded or calculated?","body":"<p>I think your scenario is missing a step.</p>\n<pre><code>Scenario: Verify discount amount is applied\n  Given the shopping basket total is €60\n  And a 12% discount is applicable\n  When I click &quot;Calculate Discount&quot;\n  Then the reduction should be €7.20\n</code></pre>\n<p>With this missing step (of either verifying there is, or applying a 12% discount) it makes sense to test the discount as a currency value.</p>\n"},{"tags":[],"owner":{"account_id":2052904,"reputation":2632,"user_id":1831456,"accept_rate":50,"display_name":"Vishal Aggarwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697640031,"creation_date":1696465011,"answer_id":77233635,"question_id":77230662,"body_markdown":"Use both. Use [test Oracles][1].\r\n\r\n&gt; **What is Test Oracle?** Test oracle basically gives you the expected results to compare with\r\n&gt; the actual results for a given set of test scenarios as an *external\r\n&gt; source of truth. *Independent of the application logic as well as with\r\n&gt; its tests.**\r\n\r\n\r\nIt could be as simple as an excel file with expected values calculated inside the sheet standalone of the application logic which can be passed to a test.\r\n\r\nThe advantage of this approach is :\r\n - It separates the application logic from test verification logic.\r\n - It even further separates the expected values from a specific implementation of the test. So in case if the same test takes an altogether different form in future in terms of automation tool/framework/library - the expected values remains the same as it comes from the business domain not from the technology of the application or the automation tool.\r\n- In future if the application logic changes , it only needs to be updated and calculated once in that sheet/or document and will reflect everywhere in the dependent tests.\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Test_oracle","title":"Should E2E tests expected results be hard coded or calculated?","body":"<p>Use both. Use <a href=\"https://en.wikipedia.org/wiki/Test_oracle\" rel=\"nofollow noreferrer\">test Oracles</a>.</p>\n<blockquote>\n<p><strong>What is Test Oracle?</strong> Test oracle basically gives you the expected results to compare with\nthe actual results for a given set of test scenarios as an <em>external\nsource of truth. <em>Independent of the application logic as well as with\nits tests.</em></em></p>\n</blockquote>\n<p>It could be as simple as an excel file with expected values calculated inside the sheet standalone of the application logic which can be passed to a test.</p>\n<p>The advantage of this approach is :</p>\n<ul>\n<li>It separates the application logic from test verification logic.</li>\n<li>It even further separates the expected values from a specific implementation of the test. So in case if the same test takes an altogether different form in future in terms of automation tool/framework/library - the expected values remains the same as it comes from the business domain not from the technology of the application or the automation tool.</li>\n<li>In future if the application logic changes , it only needs to be updated and calculated once in that sheet/or document and will reflect everywhere in the dependent tests.</li>\n</ul>\n"}],"owner":{"account_id":24009832,"reputation":23,"user_id":17993555,"display_name":"kdragon98"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77230832,"answer_count":3,"score":2,"last_activity_date":1697640031,"creation_date":1696431134,"question_id":77230662,"body_markdown":"I&#39;m an BE engineer with experience in BE unit testing too, but recently started working on FE end-to-end tests, using Playwright and Cucumber. Should the expected result of a scenario be a hard-coded example or should it be calculated as part of the test?\r\n\r\nFor simplification, let&#39;s say I&#39;m trying to write a test for a discount on an e-commerce site, and I&#39;m writing a test to verify the discount amount is correct. It takes the user&#39;s basket total as an input and performs a client-side calculation to apply a fixed 12% discount, and spits the result back to the user.\r\nShould I be calculating that 12% within the step definitions of the test? Or should I hard-code the expected result?\r\nFeature file would look something like this if I was hard-coding the expected result:\r\n```\r\nScenario: Verify discount amount is correct\r\nGiven  the shopping basket total is 60.00\r\nWhen  I click &quot;Calculate Discount&quot;\r\nThen  the reduction should be 7.20\r\n```\r\n\r\nOr should the last line be changed to calculate it like `Then  the reduction should be as expected` and the step definition file doing something like\r\n```\r\n@Then(&quot;the reduction should be as expected&quot;)\r\npublic void theReductionShouldBe() {\r\n    double actual = getReductionDisplayedToUser();\r\n    double expected = basketTotal * 0.12;\r\n    assertEquals(expected, actual);\r\n}\r\n```\r\n\r\nIn reality the calculation for the tool I&#39;m testing is more complicated than just working out 12% (there&#39;s several inputs instead of just one), so my issue with the latter is that I&#39;m duplicating all the logic in my e2e testing repo. But there&#39;s an argument that if the logic should change, I don&#39;t need to touch my feature file, and can just update the logic in the calculation. I personally prefer the former as it&#39;s similar to the testing style of my BE unit tests, but not sure if that&#39;s the best practice with E2E tests.\r\n\r\nAnother colleague has suggested I implement randomness to the inputs (and that would only work with the calculated result), but it seems strange to me to theoretically have a test that sometimes fails and sometimes passes if there is a bug in the logic, making maintenance a bit more difficult such as checking the bug as been fixed after a failed test.\r\n```\r\nScenario: Verify discount amount is correct\r\nGiven  the shopping basket total is a random amount between 0.00 and 1000.00\r\nWhen  I click &quot;Calculate Discount&quot;\r\nThen  the reduction should be as expected\r\n```\r\n\r\nAs I said I&#39;m a bit new to E2E testing, and I&#39;m not sure if there&#39;s any standards or best practices with this. Any thoughts?","title":"Should E2E tests expected results be hard coded or calculated?","body":"<p>I'm an BE engineer with experience in BE unit testing too, but recently started working on FE end-to-end tests, using Playwright and Cucumber. Should the expected result of a scenario be a hard-coded example or should it be calculated as part of the test?</p>\n<p>For simplification, let's say I'm trying to write a test for a discount on an e-commerce site, and I'm writing a test to verify the discount amount is correct. It takes the user's basket total as an input and performs a client-side calculation to apply a fixed 12% discount, and spits the result back to the user.\nShould I be calculating that 12% within the step definitions of the test? Or should I hard-code the expected result?\nFeature file would look something like this if I was hard-coding the expected result:</p>\n<pre><code>Scenario: Verify discount amount is correct\nGiven  the shopping basket total is 60.00\nWhen  I click &quot;Calculate Discount&quot;\nThen  the reduction should be 7.20\n</code></pre>\n<p>Or should the last line be changed to calculate it like <code>Then  the reduction should be as expected</code> and the step definition file doing something like</p>\n<pre><code>@Then(&quot;the reduction should be as expected&quot;)\npublic void theReductionShouldBe() {\n    double actual = getReductionDisplayedToUser();\n    double expected = basketTotal * 0.12;\n    assertEquals(expected, actual);\n}\n</code></pre>\n<p>In reality the calculation for the tool I'm testing is more complicated than just working out 12% (there's several inputs instead of just one), so my issue with the latter is that I'm duplicating all the logic in my e2e testing repo. But there's an argument that if the logic should change, I don't need to touch my feature file, and can just update the logic in the calculation. I personally prefer the former as it's similar to the testing style of my BE unit tests, but not sure if that's the best practice with E2E tests.</p>\n<p>Another colleague has suggested I implement randomness to the inputs (and that would only work with the calculated result), but it seems strange to me to theoretically have a test that sometimes fails and sometimes passes if there is a bug in the logic, making maintenance a bit more difficult such as checking the bug as been fixed after a failed test.</p>\n<pre><code>Scenario: Verify discount amount is correct\nGiven  the shopping basket total is a random amount between 0.00 and 1000.00\nWhen  I click &quot;Calculate Discount&quot;\nThen  the reduction should be as expected\n</code></pre>\n<p>As I said I'm a bit new to E2E testing, and I'm not sure if there's any standards or best practices with this. Any thoughts?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":14619534,"reputation":421,"user_id":10558670,"display_name":"MAO3J1m0Op"},"score":0,"creation_date":1572393219,"post_id":58616909,"comment_id":103543278,"body_markdown":"Why can’t you create a second array or reassign an edited array to `frame`?","body":"Why can’t you create a second array or reassign an edited array to <code>frame</code>?"},{"owner":{"account_id":14619534,"reputation":421,"user_id":10558670,"display_name":"MAO3J1m0Op"},"score":0,"creation_date":1572393518,"post_id":58616909,"comment_id":103543334,"body_markdown":"Poking around at other options to construct your classes, I found `TYPE_INT_RGB`. Perhaps converting the byte array to an int array could work?","body":"Poking around at other options to construct your classes, I found <code>TYPE_INT_RGB</code>. Perhaps converting the byte array to an int array could work?"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1572393697,"post_id":58616909,"comment_id":103543369,"body_markdown":"What&#39;s wrong with option 2? (if you change the order in-place in your existing byte array) Your computer won&#39;t complain that it&#39;s tedious - that is the type of work that computers are good at.","body":"What&#39;s wrong with option 2? (if you change the order in-place in your existing byte array) Your computer won&#39;t complain that it&#39;s tedious - that is the type of work that computers are good at."},{"owner":{"account_id":1032848,"reputation":3712,"user_id":1040813,"accept_rate":65,"display_name":"marxin"},"score":0,"creation_date":1572393967,"post_id":58616909,"comment_id":103543424,"body_markdown":"@ErwinBolwidt just feels like copying 75000000 items (given 5000x5000 image) just to then load them to bufferedimage is not the greatest solution. I will do it if I need to but I would prefer to avoid that","body":"@ErwinBolwidt just feels like copying 75000000 items (given 5000x5000 image) just to then load them to bufferedimage is not the greatest solution. I will do it if I need to but I would prefer to avoid that"},{"owner":{"account_id":1032848,"reputation":3712,"user_id":1040813,"accept_rate":65,"display_name":"marxin"},"score":0,"creation_date":1572394328,"post_id":58616909,"comment_id":103543484,"body_markdown":"@ErwinBolwidt actually it doesn&#39;t make sense at all in this case, much better to just call setRGB on buffered image instance if I have to iterate over the byte array","body":"@ErwinBolwidt actually it doesn&#39;t make sense at all in this case, much better to just call setRGB on buffered image instance if I have to iterate over the byte array"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1572394348,"post_id":58616909,"comment_id":103543490,"body_markdown":"You should look at the implementation of `BufferedImage.setData` as it copies the data from the raster that you pass in line by line. `BufferedImage.getRaster().setDataElements` looks to be the method that you should be using if you are concerned about performance much. (And you should only be if you perform this operation frequently, liking multiple times per second)","body":"You should look at the implementation of <code>BufferedImage.setData</code> as it copies the data from the raster that you pass in line by line. <code>BufferedImage.getRaster().setDataElements</code> looks to be the method that you should be using if you are concerned about performance much. (And you should only be if you perform this operation frequently, liking multiple times per second)"},{"owner":{"account_id":1032848,"reputation":3712,"user_id":1040813,"accept_rate":65,"display_name":"marxin"},"score":0,"creation_date":1572396054,"post_id":58616909,"comment_id":103543858,"body_markdown":"@ErwinBolwidt yeah if I wouldnt do that a lot I wouldnt bother. setData maybe does the same thing but its faster than manual loop, I dont know why. setDataElements is expecting different format so its again the same issue. I will go for loop solution for now as at least it works, will come back to this later","body":"@ErwinBolwidt yeah if I wouldnt do that a lot I wouldnt bother. setData maybe does the same thing but its faster than manual loop, I dont know why. setDataElements is expecting different format so its again the same issue. I will go for loop solution for now as at least it works, will come back to this later"}],"answers":[{"comments":[{"owner":{"account_id":1852692,"reputation":1963,"user_id":1678893,"display_name":"goedi"},"score":0,"creation_date":1572398720,"post_id":58617321,"comment_id":103544343,"body_markdown":"Great ;) so I edited the answer and left only the first suggestion as it is working fine.","body":"Great ;) so I edited the answer and left only the first suggestion as it is working fine."}],"tags":[],"owner":{"account_id":1852692,"reputation":1963,"user_id":1678893,"display_name":"goedi"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1572398649,"creation_date":1572396531,"answer_id":58617321,"question_id":58616909,"body_markdown":"Try this code\r\n\r\n    BufferedImage img = create3ByteRGBImage(int width, int height, new int[] {8, 8, 8},\r\n                                         new int[] {0, 1, 2});    \r\n    \r\n    private BufferedImage create3ByteRGBImage(width, height, int[] nBits, int[] bOffs) {\r\n                ColorSpace cs = ColorSpace.getInstance(ColorSpace.CS_sRGB);\r\n                ColorModel colorModel =\r\n                    new ComponentColorModel(cs, nBits,\r\n                                            false, false,\r\n                                            Transparency.OPAQUE,\r\n                                            DataBuffer.TYPE_BYTE);\r\n                WritableRaster raster =\r\n                    Raster.createInterleavedRaster(DataBuffer.TYPE_BYTE,\r\n                                                   width, height,\r\n                                                   width*3, 3,\r\n                                                   bOffs, null);\r\n                return new BufferedImage(colorModel, raster, false, null);\r\n            }\r\n\r\n\r\n","title":"BufferedImage from RGB byte[] array","body":"<p>Try this code</p>\n\n<pre><code>BufferedImage img = create3ByteRGBImage(int width, int height, new int[] {8, 8, 8},\n                                     new int[] {0, 1, 2});    \n\nprivate BufferedImage create3ByteRGBImage(width, height, int[] nBits, int[] bOffs) {\n            ColorSpace cs = ColorSpace.getInstance(ColorSpace.CS_sRGB);\n            ColorModel colorModel =\n                new ComponentColorModel(cs, nBits,\n                                        false, false,\n                                        Transparency.OPAQUE,\n                                        DataBuffer.TYPE_BYTE);\n            WritableRaster raster =\n                Raster.createInterleavedRaster(DataBuffer.TYPE_BYTE,\n                                               width, height,\n                                               width*3, 3,\n                                               bOffs, null);\n            return new BufferedImage(colorModel, raster, false, null);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15212182,"reputation":11,"user_id":10976595,"display_name":"Jatoxo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697639975,"creation_date":1697639975,"answer_id":77317334,"question_id":58616909,"body_markdown":"The previous answer works but it can be simplified to be more readable:\r\n\r\n    ColorSpace colorSpace = ColorSpace.getInstance(ColorSpace.CS_sRGB);\r\n\r\n    ColorModel model = new ComponentColorModel(\r\n        colorSpace, \r\n        false,\r\n        true, \r\n        Transparency.OPAQUE, \r\n        DataBuffer.TYPE_BYTE\r\n    );\r\n\r\n    WritableRaster raster = Raster.createInterleavedRaster(\r\n        DataBuffer.TYPE_BYTE, \r\n        width, \r\n        height, \r\n        3, \r\n        null\r\n    );\r\n\r\n    BufferedImage image = new BufferedImage(model, raster, true, null);","title":"BufferedImage from RGB byte[] array","body":"<p>The previous answer works but it can be simplified to be more readable:</p>\n<pre><code>ColorSpace colorSpace = ColorSpace.getInstance(ColorSpace.CS_sRGB);\n\nColorModel model = new ComponentColorModel(\n    colorSpace, \n    false,\n    true, \n    Transparency.OPAQUE, \n    DataBuffer.TYPE_BYTE\n);\n\nWritableRaster raster = Raster.createInterleavedRaster(\n    DataBuffer.TYPE_BYTE, \n    width, \n    height, \n    3, \n    null\n);\n\nBufferedImage image = new BufferedImage(model, raster, true, null);\n</code></pre>\n"}],"owner":{"account_id":1032848,"reputation":3712,"user_id":1040813,"accept_rate":65,"display_name":"marxin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":855,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":58617321,"answer_count":2,"score":3,"last_activity_date":1697639975,"creation_date":1572393002,"question_id":58616909,"body_markdown":"I have a byte[] array with RGB values. I would like to create BufferedImage without setting the pixels one by one, as the image can be big. I&#39;ve found the following snippet:\r\n\r\n            byte[] frame = ...;\r\n    \t\tBufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);\r\n\t\t\timg.setData(Raster.createRaster(img.getSampleModel(), new DataBufferByte(frame, frame.length), new Point() ) );\r\n\r\n\r\nWhich does work nice, but there is a small issue ;-) `TYPE_3BYTE_BGR` is expecting bytes in reverse order.\r\n\r\nSo the questions are:\r\n\r\n 1. Is it possible to load my array somehow without actually creating a new byte array with expected ordering?\r\n 2. If its not possible, is there any better way than for loop to copy data from RGB format to BGR?","title":"BufferedImage from RGB byte[] array","body":"<p>I have a byte[] array with RGB values. I would like to create BufferedImage without setting the pixels one by one, as the image can be big. I've found the following snippet:</p>\n\n<pre><code>        byte[] frame = ...;\n        BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);\n        img.setData(Raster.createRaster(img.getSampleModel(), new DataBufferByte(frame, frame.length), new Point() ) );\n</code></pre>\n\n<p>Which does work nice, but there is a small issue ;-) <code>TYPE_3BYTE_BGR</code> is expecting bytes in reverse order.</p>\n\n<p>So the questions are:</p>\n\n<ol>\n<li>Is it possible to load my array somehow without actually creating a new byte array with expected ordering?</li>\n<li>If its not possible, is there any better way than for loop to copy data from RGB format to BGR?</li>\n</ol>\n"},{"tags":["java","intellij-idea","import","swagger-codegen","spotless"],"comments":[{"owner":{"account_id":8481725,"reputation":53,"user_id":6361239,"display_name":"LostShepherd"},"score":0,"creation_date":1694685931,"post_id":76260944,"comment_id":135925008,"body_markdown":"I&#39;m in exactly the same boat, did you ever get a resolution for this?","body":"I&#39;m in exactly the same boat, did you ever get a resolution for this?"},{"owner":{"account_id":11514885,"reputation":631,"user_id":8438513,"accept_rate":70,"display_name":"HowToTellAChild"},"score":0,"creation_date":1694689106,"post_id":76260944,"comment_id":135925685,"body_markdown":"@LostShepherd Actually I didn&#39;t get any proper solution from spotless point of view. I started to investigate java openapi code generator where I recognised that the starred imports are hard coded based on certain templates. You can find the templates here: \nhttps://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main \nSo if I manipulated the templates then I would get the proper result. But my consideration is taking the responsibility of code generation logic is higher than leaving starred imports in the code. So I left it as it is.","body":"@LostShepherd Actually I didn&#39;t get any proper solution from spotless point of view. I started to investigate java openapi code generator where I recognised that the starred imports are hard coded based on certain templates. You can find the templates here:  <a href=\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main\" rel=\"nofollow noreferrer\">github.com/OpenAPITools/openapi-generator/tree/master/module&zwnj;&#8203;s/&hellip;</a>  So if I manipulated the templates then I would get the proper result. But my consideration is taking the responsibility of code generation logic is higher than leaving starred imports in the code. So I left it as it is."}],"owner":{"account_id":11514885,"reputation":631,"user_id":8438513,"accept_rate":70,"display_name":"HowToTellAChild"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697639750,"creation_date":1684226352,"question_id":76260944,"body_markdown":"I have a swagger openapi yml definition to generate apis. But this plugin incorporates unused imprts into the generated files. I could erase most of them by spotless plugin but I can&#39;t stop swagger to make starred imports  (`import javax.validation.constraints.*;`) which isn&#39;t handled by spotless. Here is my spotless configuration:\r\n\r\n                &lt;plugin&gt;\r\n                &lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.36.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;java&gt;\r\n                        &lt;includes&gt;\r\n                            &lt;include&gt;target/somewhere/**&lt;/include&gt;\r\n                        &lt;/includes&gt;\r\n                        &lt;importOrder/&gt;\r\n                        &lt;removeUnusedImports/&gt;\r\n                    &lt;/java&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;apply&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;phase&gt;compile&lt;/phase&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\nDo you know any worrkround for this? Either stop swagger starred imports generation or any spotless configuration to delete unused starred imports are welcome. \r\n\r\nI am using IntelliJ v2022.3.3","title":"Java spotless plugin with starred imports","body":"<p>I have a swagger openapi yml definition to generate apis. But this plugin incorporates unused imprts into the generated files. I could erase most of them by spotless plugin but I can't stop swagger to make starred imports  (<code>import javax.validation.constraints.*;</code>) which isn't handled by spotless. Here is my spotless configuration:</p>\n<pre><code>            &lt;plugin&gt;\n            &lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\n            &lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.36.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;java&gt;\n                    &lt;includes&gt;\n                        &lt;include&gt;target/somewhere/**&lt;/include&gt;\n                    &lt;/includes&gt;\n                    &lt;importOrder/&gt;\n                    &lt;removeUnusedImports/&gt;\n                &lt;/java&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;apply&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;phase&gt;compile&lt;/phase&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>Do you know any worrkround for this? Either stop swagger starred imports generation or any spotless configuration to delete unused starred imports are welcome.</p>\n<p>I am using IntelliJ v2022.3.3</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-functions","artificial-intelligence","vertex"],"owner":{"account_id":22491823,"reputation":9,"user_id":16689442,"display_name":"qkory"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697639630,"creation_date":1697639630,"question_id":77317291,"body_markdown":"I&#39;m in a course and can&#39;t resolve the issue with the given tutorial. Unfortunately it&#39;s so incomplete for a beginner like me, it&#39;s easy to get lost. I&#39;m following the from: https://codelabs.developers.google.com/moviescore-prediction-vertexai#0\r\n\r\nMy guess is the problem in the step 6 but I&#39;m also not sure if I use the appropriate url either. Although I&#39;ve managed to train the vertex model and successfully deployed it, but somehow I can&#39;t connect it together with the java file, I get an error referencing at line 48.\r\n\r\nBecause the tutorial doesn&#39;t show any contextual help, which parameters should I use, first I&#39;ve tried connect it with the parameters I&#39;ve filled in the vertex deployment steps but I always get an Http 500 error.\r\n\r\nI hope somebody could give me a a help or a step by step detailed guide especially on the step 6 and how do I reach the endpoint properly.","title":"Google functions endpoint HTTP 500 error using vertex ai","body":"<p>I'm in a course and can't resolve the issue with the given tutorial. Unfortunately it's so incomplete for a beginner like me, it's easy to get lost. I'm following the from: <a href=\"https://codelabs.developers.google.com/moviescore-prediction-vertexai#0\" rel=\"nofollow noreferrer\">https://codelabs.developers.google.com/moviescore-prediction-vertexai#0</a></p>\n<p>My guess is the problem in the step 6 but I'm also not sure if I use the appropriate url either. Although I've managed to train the vertex model and successfully deployed it, but somehow I can't connect it together with the java file, I get an error referencing at line 48.</p>\n<p>Because the tutorial doesn't show any contextual help, which parameters should I use, first I've tried connect it with the parameters I've filled in the vertex deployment steps but I always get an Http 500 error.</p>\n<p>I hope somebody could give me a a help or a step by step detailed guide especially on the step 6 and how do I reach the endpoint properly.</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":29698898,"reputation":3,"user_id":22761510,"display_name":"Erik Orosz"},"score":0,"creation_date":1697642010,"post_id":77316942,"comment_id":136306236,"body_markdown":"This may work, but the camera does not pop up the permission request window.\nError:Permission Denial: starting Intent { act=android.media.action.IMAGE_CAPTURE cmp=com.sec.android.app.camera/.Camera }","body":"This may work, but the camera does not pop up the permission request window. Error:Permission Denial: starting Intent { act=android.media.action.IMAGE_CAPTURE cmp=com.sec.android.app.camera/.Camera }"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1697642898,"post_id":77316942,"comment_id":136306442,"body_markdown":"Camera apps do not pop up permission request windows. Unclear what you mean.","body":"Camera apps do not pop up permission request windows. Unclear what you mean."},{"owner":{"account_id":29698898,"reputation":3,"user_id":22761510,"display_name":"Erik Orosz"},"score":0,"creation_date":1697643245,"post_id":77316942,"comment_id":136306512,"body_markdown":"Should you ask if:\nDo you allow the app to take pictures and videos?\n-While using the application\n-Just now\n-Block","body":"Should you ask if: Do you allow the app to take pictures and videos? -While using the application -Just now -Block"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1697644720,"post_id":77316942,"comment_id":136306799,"body_markdown":"Still unclear what you wanna say. But more important: Is the `attempting to register while current state is RESUMED` problem gone now? You might confirm that instead of a `This may work`.","body":"Still unclear what you wanna say. But more important: Is the <code>attempting to register while current state is RESUMED</code> problem gone now? You might confirm that instead of a <code>This may work</code>."},{"owner":{"account_id":29698898,"reputation":3,"user_id":22761510,"display_name":"Erik Orosz"},"score":0,"creation_date":1697645010,"post_id":77316942,"comment_id":136306851,"body_markdown":"Yes, the gallery part works.","body":"Yes, the gallery part works."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1697645148,"post_id":77316942,"comment_id":136306879,"body_markdown":"You are expected to say that switching from activity context to fragment was the solution of your problem. Sigh..","body":"You are expected to say that switching from activity context to fragment was the solution of your problem. Sigh.."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1697645238,"post_id":77316942,"comment_id":136306895,"body_markdown":"If the gallery part does not work now then it has never worked, Pretty different probem. Try to understand what this error means as it is pretty simple.","body":"If the gallery part does not work now then it has never worked, Pretty different probem. Try to understand what this error means as it is pretty simple."}],"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697639306,"creation_date":1697637060,"answer_id":77316942,"question_id":77315228,"body_markdown":"The illegal state exception is happening because you are trying to register the activity result launchers from an activity context. Instead do it from the fragment. Fragments also have a registerForActivityResult() member function.\r\n\r\n\r\n\r\n&gt; GalleryAndCamera galleryAndCamera = new GalleryAndCamera((AppCompatActivity) requireActivity());\r\n\r\n\r\nChange to:\r\n\r\n    GalleryAndCamera galleryAndCamera = new GalleryAndCamera(this);\r\n\r\n&gt; public GalleryAndCamera(AppCompatActivity  activity)\r\n\r\nChange to:\r\n\r\n    public GalleryAndCamera(Fragment fragment)\r\n","title":"Create reusable camera and gallery","body":"<p>The illegal state exception is happening because you are trying to register the activity result launchers from an activity context. Instead do it from the fragment. Fragments also have a registerForActivityResult() member function.</p>\n<blockquote>\n<p>GalleryAndCamera galleryAndCamera = new GalleryAndCamera((AppCompatActivity) requireActivity());</p>\n</blockquote>\n<p>Change to:</p>\n<pre><code>GalleryAndCamera galleryAndCamera = new GalleryAndCamera(this);\n</code></pre>\n<blockquote>\n<p>public GalleryAndCamera(AppCompatActivity  activity)</p>\n</blockquote>\n<p>Change to:</p>\n<pre><code>public GalleryAndCamera(Fragment fragment)\n</code></pre>\n"}],"owner":{"account_id":29698898,"reputation":3,"user_id":22761510,"display_name":"Erik Orosz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77316942,"answer_count":1,"score":0,"last_activity_date":1697639306,"creation_date":1697622694,"question_id":77315228,"body_markdown":"I want to create a class to handle camera and gallery that I can use on different fragments.\r\n\r\n\r\n```\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.os.Environment;\r\nimport android.provider.MediaStore;\r\n\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.OutputStream;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\nimport java.util.Locale;\r\n\r\npublic class GalleryAndCamera {\r\n    private Activity activity;\r\n    private ActivityResultLauncher&lt;Intent&gt; takePictureLauncher;\r\n    private ActivityResultLauncher&lt;Intent&gt; pickImageLauncher;\r\n    private ImageCaptureListener imageCaptureListener;\r\n\r\n    public GalleryAndCamera(AppCompatActivity  activity) {\r\n        this.activity = activity;\r\n\r\n        takePictureLauncher = activity.registerForActivityResult(\r\n                new ActivityResultContracts.StartActivityForResult(),\r\n                result -&gt; {\r\n                    if (result.getResultCode() == Activity.RESULT_OK) {\r\n                        Intent data = result.getData();\r\n                        if (data != null) {\r\n                           \r\n                            Bitmap photo = (Bitmap) data.getExtras().get(&quot;data&quot;);\r\n                            saveImageToGallery(photo, activity.getApplicationContext());\r\n                            imageCaptureListener.onImageCaptured(photo);\r\n                        }\r\n                    } else if (result.getResultCode() == Activity.RESULT_CANCELED) {\r\n                       \r\n                    }\r\n                }\r\n        );\r\n\r\n        \r\n        pickImageLauncher = activity.registerForActivityResult(\r\n                new ActivityResultContracts.StartActivityForResult(),\r\n                result -&gt; {\r\n                    if (result.getResultCode() == Activity.RESULT_OK) {\r\n                        Intent data = result.getData();\r\n                        if (data != null) {\r\n                            \r\n                        }\r\n                    } else if (result.getResultCode() == Activity.RESULT_CANCELED) {\r\n                        \r\n                    }\r\n                }\r\n        );\r\n    }\r\n\r\n    public void takePicture() {\r\n        Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n        takePictureLauncher.launch(cameraIntent);\r\n    }\r\n\r\n    public void pickImage() {\r\n        Intent galleryIntent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n        pickImageLauncher.launch(galleryIntent);\r\n    }\r\n    public void setImageCaptureListener(ImageCaptureListener listener) {\r\n        this.imageCaptureListener = listener;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class Myfragment extends Fragment implements ImageCaptureListener{\r\n\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container,\r\n                             @Nullable Bundle savedInstanceState) {\r\n        binding = FragmentMyfragmentBinding.inflate(inflater, container, false);\r\n        View view = binding.getRoot();\r\n        GalleryAndCamera galleryAndCamera = new GalleryAndCamera((AppCompatActivity) requireActivity());\r\n        \r\n        binding.idBtnWDCamera.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n              \r\n                Helper.clickSound(getContext());\r\n                imageHandler();\r\n\r\n               \r\n            }\r\n        });\r\n}\r\n```\r\nproblem: \r\nFATAL EXCEPTION: main\r\n                                                                                                    Process: com.hepszolg.birdcontrol, PID: 11293\r\n                                                                                                    java.lang.IllegalStateException: LifecycleOwner com.myproject.MainActivity@288c540 is attempting to register while current state is RESUMED. LifecycleOwners must call register before they are STARTED.","title":"Create reusable camera and gallery","body":"<p>I want to create a class to handle camera and gallery that I can use on different fragments.</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.activity.result.contract.ActivityResultContracts;\n\nimport android.app.Activity;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.graphics.Bitmap;\nimport android.os.Environment;\nimport android.provider.MediaStore;\n\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.Locale;\n\npublic class GalleryAndCamera {\n    private Activity activity;\n    private ActivityResultLauncher&lt;Intent&gt; takePictureLauncher;\n    private ActivityResultLauncher&lt;Intent&gt; pickImageLauncher;\n    private ImageCaptureListener imageCaptureListener;\n\n    public GalleryAndCamera(AppCompatActivity  activity) {\n        this.activity = activity;\n\n        takePictureLauncher = activity.registerForActivityResult(\n                new ActivityResultContracts.StartActivityForResult(),\n                result -&gt; {\n                    if (result.getResultCode() == Activity.RESULT_OK) {\n                        Intent data = result.getData();\n                        if (data != null) {\n                           \n                            Bitmap photo = (Bitmap) data.getExtras().get(&quot;data&quot;);\n                            saveImageToGallery(photo, activity.getApplicationContext());\n                            imageCaptureListener.onImageCaptured(photo);\n                        }\n                    } else if (result.getResultCode() == Activity.RESULT_CANCELED) {\n                       \n                    }\n                }\n        );\n\n        \n        pickImageLauncher = activity.registerForActivityResult(\n                new ActivityResultContracts.StartActivityForResult(),\n                result -&gt; {\n                    if (result.getResultCode() == Activity.RESULT_OK) {\n                        Intent data = result.getData();\n                        if (data != null) {\n                            \n                        }\n                    } else if (result.getResultCode() == Activity.RESULT_CANCELED) {\n                        \n                    }\n                }\n        );\n    }\n\n    public void takePicture() {\n        Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n        takePictureLauncher.launch(cameraIntent);\n    }\n\n    public void pickImage() {\n        Intent galleryIntent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\n        pickImageLauncher.launch(galleryIntent);\n    }\n    public void setImageCaptureListener(ImageCaptureListener listener) {\n        this.imageCaptureListener = listener;\n    }\n}\n</code></pre>\n<pre><code>public class Myfragment extends Fragment implements ImageCaptureListener{\n\n\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container,\n                             @Nullable Bundle savedInstanceState) {\n        binding = FragmentMyfragmentBinding.inflate(inflater, container, false);\n        View view = binding.getRoot();\n        GalleryAndCamera galleryAndCamera = new GalleryAndCamera((AppCompatActivity) requireActivity());\n        \n        binding.idBtnWDCamera.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n              \n                Helper.clickSound(getContext());\n                imageHandler();\n\n               \n            }\n        });\n}\n</code></pre>\n<p>problem:\nFATAL EXCEPTION: main\nProcess: com.hepszolg.birdcontrol, PID: 11293\njava.lang.IllegalStateException: LifecycleOwner com.myproject.MainActivity@288c540 is attempting to register while current state is RESUMED. LifecycleOwners must call register before they are STARTED.</p>\n"},{"tags":["java","excel","apache-poi","xssf"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1697699275,"post_id":77317243,"comment_id":136313166,"body_markdown":"I am afraid you can&#39;t as this is a default Excel message. But the message exactly tells that the **cell** or chart **you&#39;re trying to change** is on a protected sheet. That&#39;s not misleading for me. If one tries changing not protected cells that message will not occur. Excel users should know this.","body":"I am afraid you can&#39;t as this is a default Excel message. But the message exactly tells that the <b>cell</b> or chart <b>you&#39;re trying to change</b> is on a protected sheet. That&#39;s not misleading for me. If one tries changing not protected cells that message will not occur. Excel users should know this."}],"owner":{"account_id":4411211,"reputation":71,"user_id":3594089,"display_name":"user3594089"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697639235,"creation_date":1697639235,"question_id":77317243,"body_markdown":"I created an Excel with Apache POI XSSF. I needed to make certain columns readonly. so I set the sheet as protected and then set the cellstyle to unlocked for the editable columns.\r\nWhen the user clicks on any of the non-editable columsn I get this message about the chart/sheet being protected and user needs a password to unprotect it. This is higly misleading since only certain columns are readonly. \r\nHow do I can change this alert message  ?","title":"How to change dialog box message when cells in excel is readonly - with Apache POI XSSF","body":"<p>I created an Excel with Apache POI XSSF. I needed to make certain columns readonly. so I set the sheet as protected and then set the cellstyle to unlocked for the editable columns.\nWhen the user clicks on any of the non-editable columsn I get this message about the chart/sheet being protected and user needs a password to unprotect it. This is higly misleading since only certain columns are readonly.\nHow do I can change this alert message  ?</p>\n"},{"tags":["java","selenium-webdriver"],"owner":{"account_id":2551102,"reputation":5113,"user_id":2214831,"accept_rate":58,"display_name":"boycod3"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697639121,"creation_date":1697639121,"question_id":77317227,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LYpJO.png\r\n\r\nBelow is a sample accordion using some divs very similar to a directory. Suppose I want to go till \r\n\r\n\r\n\r\nHow can I select Coffee and it may appear in other accordions, all I have to traverse the accordion based on my input.\r\n\r\n\r\n&gt; Beverages &gt; Water &gt; Coffee\r\n\r\n\r\npublic void walk(WebElement ele,String patterns){\r\n   Sting pattern[] = patterns.split(&quot;&gt;&quot;);\r\n  \r\n\r\n\r\n}\r\n\r\nmethod call will like, walk(someparent, &quot;Beverages&gt;Tea&gt;Green Tea&quot;);\r\n","title":"Java selenium to traverse accordion tree based on the pattern","body":"<p><a href=\"https://i.stack.imgur.com/LYpJO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LYpJO.png\" alt=\"enter image description here\" /></a></p>\n<p>Below is a sample accordion using some divs very similar to a directory. Suppose I want to go till</p>\n<p>How can I select Coffee and it may appear in other accordions, all I have to traverse the accordion based on my input.</p>\n<blockquote>\n<p>Beverages &gt; Water &gt; Coffee</p>\n</blockquote>\n<p>public void walk(WebElement ele,String patterns){\nSting pattern[] = patterns.split(&quot;&gt;&quot;);</p>\n<p>}</p>\n<p>method call will like, walk(someparent, &quot;Beverages&gt;Tea&gt;Green Tea&quot;);</p>\n"},{"tags":["java","optaplanner"],"answers":[{"comments":[{"owner":{"account_id":29471132,"reputation":7,"user_id":22583732,"display_name":"Zhetao"},"score":0,"creation_date":1697641174,"post_id":77317208,"comment_id":136306011,"body_markdown":"Thanks @Geiffrey for the quick reply. I try upgrading to TimeFold Solver. The best events are still missing. We use FIRST_FIT for Construction Heuristics and get the logs:\nSolving started: best score (-8init/0hard/0medium/0soft)\n\nConstruction Heuristic phase (0) ended:  best score (0hard/-1medium/0soft)\nlogs on Two events get logged with a better solution over the previous one.\nSolving ended:  best score (0hard/0medium/0soft)\n\nI think the issue should be BestSolutionEvents only report new, better solutions and we are not missing the Construction Heuristics best solution event","body":"Thanks @Geiffrey for the quick reply. I try upgrading to TimeFold Solver. The best events are still missing. We use FIRST_FIT for Construction Heuristics and get the logs: Solving started: best score (-8init/0hard/0medium/0soft)  Construction Heuristic phase (0) ended:  best score (0hard/-1medium/0soft) logs on Two events get logged with a better solution over the previous one. Solving ended:  best score (0hard/0medium/0soft)  I think the issue should be BestSolutionEvents only report new, better solutions and we are not missing the Construction Heuristics best solution event"},{"owner":{"account_id":29471132,"reputation":7,"user_id":22583732,"display_name":"Zhetao"},"score":0,"creation_date":1697699534,"post_id":77317208,"comment_id":136313220,"body_markdown":"Do we have an instruction or example on how to hack BestSolutionRecaller? I see BestSolutionRecaller is a final field in AbstractSolver. We sound to override a lot of classes like AbstractSolver to hack? And besides, when could we expect the feature to be productionized? Thanks for raising the ticket! @Geoffrey De Smet","body":"Do we have an instruction or example on how to hack BestSolutionRecaller? I see BestSolutionRecaller is a final field in AbstractSolver. We sound to override a lot of classes like AbstractSolver to hack? And besides, when could we expect the feature to be productionized? Thanks for raising the ticket! @Geoffrey De Smet"},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1697813946,"post_id":77317208,"comment_id":136331023,"body_markdown":"there are no guides on how to hack BestSolutionRecaller. It&#39;s not easy to do that properly from the outside...","body":"there are no guides on how to hack BestSolutionRecaller. It&#39;s not easy to do that properly from the outside..."}],"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697638931,"creation_date":1697638931,"answer_id":77317208,"question_id":77316988,"body_markdown":"Hacking BestSolutionRecaller is the only way currently. BestSolutionEvents only report new, better solutions. Not better_or_equal solutions. This is a common feature request, [so I just created an issue][1]. \r\n\r\n\r\n----------\r\n\r\n\r\nIf it&#39;s specifically **the Construction Heuristics best solution event that is missing** in the best solution event listener, this is a bug that as fixed in [Timefold Solver][2] some time ago. In that case, try [a quick upgrade][3] to confirm the issue disappears.\r\n\r\n\r\n  [1]: https://github.com/TimefoldAI/timefold-solver/issues/352\r\n  [2]: https://timefold.ai/blog/2023/optaplanner-fork\r\n  [3]: https://timefold.ai/blog/2023/optaplanner-fork#upgrade-from-optaplanner-to-timefold","title":"How could I record the history of optaplanner solutions","body":"<p>Hacking BestSolutionRecaller is the only way currently. BestSolutionEvents only report new, better solutions. Not better_or_equal solutions. This is a common feature request, <a href=\"https://github.com/TimefoldAI/timefold-solver/issues/352\" rel=\"nofollow noreferrer\">so I just created an issue</a>.</p>\n<hr />\n<p>If it's specifically <strong>the Construction Heuristics best solution event that is missing</strong> in the best solution event listener, this is a bug that as fixed in <a href=\"https://timefold.ai/blog/2023/optaplanner-fork\" rel=\"nofollow noreferrer\">Timefold Solver</a> some time ago. In that case, try <a href=\"https://timefold.ai/blog/2023/optaplanner-fork#upgrade-from-optaplanner-to-timefold\" rel=\"nofollow noreferrer\">a quick upgrade</a> to confirm the issue disappears.</p>\n"}],"owner":{"account_id":29471132,"reputation":7,"user_id":22583732,"display_name":"Zhetao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77317208,"answer_count":1,"score":0,"last_activity_date":1697638931,"creation_date":1697637382,"question_id":77316988,"body_markdown":"Without extra configurations, optaplanner will return the best solution. But in my case, I need to have best n solutions. I see there is SolverEventListener which we can add to the solver, and the SolverEventListener has a method called bestSolutionChanged. We can listen on the events there. However, when I try doing that, it only catches two history records. I set the termination strategy as 10s limits. However, in debug logs, I do see it keeps moving after finding a best solution and it definitely logs the other best solutions with moves. But why in the event listener, it doesn&#39;t catch the newer solutions which are also best scores? \r\n\r\nBesides, any suggestions on how I could record best n solutions? I see there sounds to be another hack with BestSolutionRecaller. Do you have an example how we could utilize BestSolutionRecaller?\r\nThanks!\r\n\r\nI tried SolverEventListener suggested by the [wiki](https://docs.optaplanner.org/latest/optaplanner-docs/html_single/index.html#SolverEventListener).","title":"How could I record the history of optaplanner solutions","body":"<p>Without extra configurations, optaplanner will return the best solution. But in my case, I need to have best n solutions. I see there is SolverEventListener which we can add to the solver, and the SolverEventListener has a method called bestSolutionChanged. We can listen on the events there. However, when I try doing that, it only catches two history records. I set the termination strategy as 10s limits. However, in debug logs, I do see it keeps moving after finding a best solution and it definitely logs the other best solutions with moves. But why in the event listener, it doesn't catch the newer solutions which are also best scores?</p>\n<p>Besides, any suggestions on how I could record best n solutions? I see there sounds to be another hack with BestSolutionRecaller. Do you have an example how we could utilize BestSolutionRecaller?\nThanks!</p>\n<p>I tried SolverEventListener suggested by the <a href=\"https://docs.optaplanner.org/latest/optaplanner-docs/html_single/index.html#SolverEventListener\" rel=\"nofollow noreferrer\">wiki</a>.</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697652327,"post_id":77317035,"comment_id":136308117,"body_markdown":"It isn&#39;t Spring that offers the `@TenantId` etc. but HIbernate that is adding that support and what you want isn&#39;t supported by this. You can write your own using Hibernate filters and a bit of AOP.","body":"It isn&#39;t Spring that offers the <code>@TenantId</code> etc. but HIbernate that is adding that support and what you want isn&#39;t supported by this. You can write your own using Hibernate filters and a bit of AOP."},{"owner":{"account_id":25869455,"reputation":1,"user_id":19600558,"display_name":"Ixico"},"score":0,"creation_date":1697703374,"post_id":77317035,"comment_id":136313895,"body_markdown":"Thank you for correcting me and for your answer. I&#39;m not really sure how can I achieve it with your approach - I have found some resources: https://callistaenterprise.se/blogg/teknik/2020/10/17/multi-tenancy-with-spring-boot-part5/ but it doesn&#39;t look perfect - requires load time weaving (I would prefer stay with only spring AOP) and writing own queries for findById methods. Do you have any examples?","body":"Thank you for correcting me and for your answer. I&#39;m not really sure how can I achieve it with your approach - I have found some resources: <a href=\"https://callistaenterprise.se/blogg/teknik/2020/10/17/multi-tenancy-with-spring-boot-part5/\" rel=\"nofollow noreferrer\">callistaenterprise.se/blogg/teknik/2020/10/17/&hellip;</a> but it doesn&#39;t look perfect - requires load time weaving (I would prefer stay with only spring AOP) and writing own queries for findById methods. Do you have any examples?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697703534,"post_id":77317035,"comment_id":136313934,"body_markdown":"It doesn&#39;t require loadtime weaving depending on the pointcut, you can write one that executes the aspect for all `@Service` methods, which would work perfectly well with the default AOP mode. It will indeed only work with queries as soon as you use `entityManager.find(id, Entity.class);` the filters don&#39;t apply.","body":"It doesn&#39;t require loadtime weaving depending on the pointcut, you can write one that executes the aspect for all <code>@Service</code> methods, which would work perfectly well with the default AOP mode. It will indeed only work with queries as soon as you use <code>entityManager.find(id, Entity.class);</code> the filters don&#39;t apply."},{"owner":{"account_id":25869455,"reputation":1,"user_id":19600558,"display_name":"Ixico"},"score":0,"creation_date":1697704176,"post_id":77317035,"comment_id":136314053,"body_markdown":"Sorry but I&#39;m quite confused. I thought the idea is to create pointcut on openSession() method to intercept and modify Session object setting the tenantId. What would I do if I wrote an aspect for my @Service method? Should I get current session via SessionFactory.getCurrentSession() and set this tenantId? Is this what you mean? And do you see any workaround for fetching object without writing those queries for every repository?","body":"Sorry but I&#39;m quite confused. I thought the idea is to create pointcut on openSession() method to intercept and modify Session object setting the tenantId. What would I do if I wrote an aspect for my @Service method? Should I get current session via SessionFactory.getCurrentSession() and set this tenantId? Is this what you mean? And do you see any workaround for fetching object without writing those queries for every repository?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697706164,"post_id":77317035,"comment_id":136314425,"body_markdown":"That is exactly what you should do and no writing your own query is the only workaround (Unless you want to re-write the parts  from HIbernate that do `entityManager.find`).","body":"That is exactly what you should do and no writing your own query is the only workaround (Unless you want to re-write the parts  from HIbernate that do <code>entityManager.find</code>)."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697707131,"post_id":77317035,"comment_id":136314599,"body_markdown":"Looking at your question are you sure you want to store 1 entity for multiple entities? Feels like you are leaking data from one tenant to another. Shouldn&#39;t each entity just have one tenant to begin with (which is also the assumption and basis of the hibernate tenant support).","body":"Looking at your question are you sure you want to store 1 entity for multiple entities? Feels like you are leaking data from one tenant to another. Shouldn&#39;t each entity just have one tenant to begin with (which is also the assumption and basis of the hibernate tenant support)."},{"owner":{"account_id":25869455,"reputation":1,"user_id":19600558,"display_name":"Ixico"},"score":0,"creation_date":1697709525,"post_id":77317035,"comment_id":136315101,"body_markdown":"Definitely I don&#39;t want to dig into EntityManager method, as there is high probability of implementing it incorrectly. The reason I want share data between tenants is because I have some hierarchical tenant structure and tenants above should access their &quot;children tenants&quot; data. If I have an opportunity to talk with someone experienced in this topic, could you please also explain what CurrentTenantIdentifierResolver#validateExistingCurrentSessions method does? I find official doc explanation hard to understand. In such described architecture, what should be the return value?","body":"Definitely I don&#39;t want to dig into EntityManager method, as there is high probability of implementing it incorrectly. The reason I want share data between tenants is because I have some hierarchical tenant structure and tenants above should access their &quot;children tenants&quot; data. If I have an opportunity to talk with someone experienced in this topic, could you please also explain what CurrentTenantIdentifierResolver#validateExistingCurrentSessi&zwnj;&#8203;ons method does? I find official doc explanation hard to understand. In such described architecture, what should be the return value?"},{"owner":{"account_id":25869455,"reputation":1,"user_id":19600558,"display_name":"Ixico"},"score":0,"creation_date":1697709742,"post_id":77317035,"comment_id":136315129,"body_markdown":"Make sure to post answer to question if you want so I can mark it as the accepted one :)","body":"Make sure to post answer to question if you want so I can mark it as the accepted one :)"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697709893,"post_id":77317035,"comment_id":136315161,"body_markdown":"I have no idea what that does, you need to talk to someone who knows the internals of HIbernate for that (although I have seen too much of that as well). If you want to have a parent to see its childs records, then why does it need to be atteched? You can have a leveling in there, which would still allow 1 record for 1 tenant but still you can use the parent to obtain the childs data. You could introduce a hierarchy for that, which you probably need to store somewhere. You could, based on the hierarchy, write your own tenant strategy to implement this.","body":"I have no idea what that does, you need to talk to someone who knows the internals of HIbernate for that (although I have seen too much of that as well). If you want to have a parent to see its childs records, then why does it need to be atteched? You can have a leveling in there, which would still allow 1 record for 1 tenant but still you can use the parent to obtain the childs data. You could introduce a hierarchy for that, which you probably need to store somewhere. You could, based on the hierarchy, write your own tenant strategy to implement this."},{"owner":{"account_id":25869455,"reputation":1,"user_id":19600558,"display_name":"Ixico"},"score":0,"creation_date":1697712290,"post_id":77317035,"comment_id":136315562,"body_markdown":"It doesn&#39;t need to be attached, it was just one idea of solving this problem. Unfortunatelly, I have no idea what do you mean by &quot;writing own tenant strategy&quot;. I had to reject Hibernate filters approach because i&#39;m not satisfied with this direct fetch problem. Using Hibernate mechanism with CurrentTenantIdentifierResolver, at the end of the day I have to provide exactly one tenantId in resolveCurrentTenantIdentifier method. If I do it as described, everyone can read their data, but parent can&#39;t see children one. No idea how to achieve leveling if I dont know what entity will be requested.","body":"It doesn&#39;t need to be attached, it was just one idea of solving this problem. Unfortunatelly, I have no idea what do you mean by &quot;writing own tenant strategy&quot;. I had to reject Hibernate filters approach because i&#39;m not satisfied with this direct fetch problem. Using Hibernate mechanism with CurrentTenantIdentifierResolver, at the end of the day I have to provide exactly one tenantId in resolveCurrentTenantIdentifier method. If I do it as described, everyone can read their data, but parent can&#39;t see children one. No idea how to achieve leveling if I dont know what entity will be requested."},{"owner":{"account_id":25869455,"reputation":1,"user_id":19600558,"display_name":"Ixico"},"score":0,"creation_date":1697717475,"post_id":77317035,"comment_id":136316539,"body_markdown":"Okay, I think I know everything I needed. Thank you for all your help. I&#39;ve noticed that also using this basic mechanism with @TenantId does not work when you call repo.findById(id) what is quite unexpected for me. I&#39;ve decided to implement my feature using JPA entity lifecycle callbacks and I hope I will not be surprised by Hibernate once again. That will be probably the most flexible way to achieve my goal.","body":"Okay, I think I know everything I needed. Thank you for all your help. I&#39;ve noticed that also using this basic mechanism with @TenantId does not work when you call repo.findById(id) what is quite unexpected for me. I&#39;ve decided to implement my feature using JPA entity lifecycle callbacks and I hope I will not be surprised by Hibernate once again. That will be probably the most flexible way to achieve my goal."}],"owner":{"account_id":25869455,"reputation":1,"user_id":19600558,"display_name":"Ixico"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697637681,"creation_date":1697637681,"question_id":77317035,"body_markdown":"Suppose we have Spring boot app with multitenant architecture (Shared Database and Shared Schema).\r\n\r\nI want users to have access only to data they own. Spring offers solution using CurrentTenantIdentifierResolver and @TenantId annotation. Such solution works well as long as every entity contains some column tenant_id annotated with @TenantId.\r\n\r\nThe problem is that in my app there is a possibility that one entity should be accessible by multiple users (and it means, multiple tenants also).\r\n\r\n**Is there any approach to define multiple tenants for one entity?**\r\nIf multitenant architecture is not designed for such problem, are there any alternatives/design patterns etc.?\r\n\r\nI&#39;ve tried to just annotate List of tenants with @TenantId, but Spring decides to ignore this annotation and behave as if it wasn&#39;t even defined.\r\n\r\n\r\n```\r\npublic class TestEntity {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private UUID id;\r\n\r\n    @OneToMany\r\n    private List&lt;Tenant&gt; tenants;\r\n\r\n    @TenantId\r\n    public List&lt;UUID&gt; getAllTenants() {\r\n        return tenants.stream().map(Tenant::getId).collect(Collectors.toList());\r\n\r\n    }\r\n}\r\n```\r\n\r\nResolver method implementation (there is also interceptor saving tenant-id value in TenantContext):\r\n\r\n```\r\n    @Override\r\n    public String resolveCurrentTenantIdentifier() {\r\n        return Optional.ofNullable(TenantContext.getCurrent()).orElse(new UUID(0,0).toString());\r\n    }\r\n\r\n```\r\n\r\n\r\nIn such scenario Spring does not perform this &quot;multitenancy data isolation&quot; - everything is accessible for every user. I expected that only tenants returned by method getAllTenants() will be permitted to access data. When I annotate single field (for example UUID tenantId) everything works well.\r\n","title":"Spring Data JPA multitenancy - defining multiple tenants for one resource","body":"<p>Suppose we have Spring boot app with multitenant architecture (Shared Database and Shared Schema).</p>\n<p>I want users to have access only to data they own. Spring offers solution using CurrentTenantIdentifierResolver and @TenantId annotation. Such solution works well as long as every entity contains some column tenant_id annotated with @TenantId.</p>\n<p>The problem is that in my app there is a possibility that one entity should be accessible by multiple users (and it means, multiple tenants also).</p>\n<p><strong>Is there any approach to define multiple tenants for one entity?</strong>\nIf multitenant architecture is not designed for such problem, are there any alternatives/design patterns etc.?</p>\n<p>I've tried to just annotate List of tenants with @TenantId, but Spring decides to ignore this annotation and behave as if it wasn't even defined.</p>\n<pre><code>public class TestEntity {\n\n    @Id\n    @GeneratedValue\n    private UUID id;\n\n    @OneToMany\n    private List&lt;Tenant&gt; tenants;\n\n    @TenantId\n    public List&lt;UUID&gt; getAllTenants() {\n        return tenants.stream().map(Tenant::getId).collect(Collectors.toList());\n\n    }\n}\n</code></pre>\n<p>Resolver method implementation (there is also interceptor saving tenant-id value in TenantContext):</p>\n<pre><code>    @Override\n    public String resolveCurrentTenantIdentifier() {\n        return Optional.ofNullable(TenantContext.getCurrent()).orElse(new UUID(0,0).toString());\n    }\n\n</code></pre>\n<p>In such scenario Spring does not perform this &quot;multitenancy data isolation&quot; - everything is accessible for every user. I expected that only tenants returned by method getAllTenants() will be permitted to access data. When I annotate single field (for example UUID tenantId) everything works well.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":5,"creation_date":1402606831,"post_id":24193788,"comment_id":37350075,"body_markdown":"What *exactly* do you mean by &quot;unsigned 64-bit decimal value&quot;?","body":"What <i>exactly</i> do you mean by &quot;unsigned 64-bit decimal value&quot;?"},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":1,"creation_date":1402606912,"post_id":24193788,"comment_id":37350103,"body_markdown":"Will you need to be able to mathematically manipulate the value as a `double`, or you are simply using the `double` as a means to store the raw bits?","body":"Will you need to be able to mathematically manipulate the value as a <code>double</code>, or you are simply using the <code>double</code> as a means to store the raw bits?"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1402607063,"post_id":24193788,"comment_id":37350164,"body_markdown":"Right -- &quot;unsigned 64-bit decimal&quot; does not compute.","body":"Right -- &quot;unsigned 64-bit decimal&quot; does not compute."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1402607137,"post_id":24193788,"comment_id":37350202,"body_markdown":"Do you mean 64-bit *integer* (`long`), or BigDecimal?  They&#39;re two entirely different things.","body":"Do you mean 64-bit <i>integer</i> (<code>long</code>), or BigDecimal?  They&#39;re two entirely different things."},{"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"score":0,"creation_date":1402607156,"post_id":24193788,"comment_id":37350212,"body_markdown":"It is described as a 64-bit floating point. I am receiving other types of values, too, and they are supposedly unsigned. Is it unusual to be working with unsigned decimals?","body":"It is described as a 64-bit floating point. I am receiving other types of values, too, and they are supposedly unsigned. Is it unusual to be working with unsigned decimals?"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1402607207,"post_id":24193788,"comment_id":37350244,"body_markdown":"You&#39;re making less and less sense.","body":"You&#39;re making less and less sense."},{"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"score":0,"creation_date":1402607335,"post_id":24193788,"comment_id":37350306,"body_markdown":"In the end I need to have a double, because it was what an API call requires.","body":"In the end I need to have a double, because it was what an API call requires."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1402607344,"post_id":24193788,"comment_id":37350309,"body_markdown":"&quot;64-bit floating point&quot;, in most universes, would be `double`.  Unsigned 64-bit fixed-point integer would be `unsigned long long` in C (at least on some platforms), but Java doesn&#39;t support unsigned so you&#39;d have to play some minor games.","body":"&quot;64-bit floating point&quot;, in most universes, would be <code>double</code>.  Unsigned 64-bit fixed-point integer would be <code>unsigned long long</code> in C (at least on some platforms), but Java doesn&#39;t support unsigned so you&#39;d have to play some minor games."},{"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"score":0,"creation_date":1402607409,"post_id":24193788,"comment_id":37350348,"body_markdown":"Yes, I can manipulate it.","body":"Yes, I can manipulate it."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1402607481,"post_id":24193788,"comment_id":37350378,"body_markdown":"You really need to find out what sort of data you have.  Probably you should review a textbook section on data representations.","body":"You really need to find out what sort of data you have.  Probably you should review a textbook section on data representations."},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":1,"creation_date":1402607484,"post_id":24193788,"comment_id":37350380,"body_markdown":"Let&#39;s start again.  Where is the data coming from?  Where does it need to go?  What does the destination need to do with the data?","body":"Let&#39;s start again.  Where is the data coming from?  Where does it need to go?  What does the destination need to do with the data?"},{"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"score":0,"creation_date":1402607616,"post_id":24193788,"comment_id":37350438,"body_markdown":"@Hot Licks, then it&#39;s quite possible the value IS actually coming across signed, and only the other, non-decimal data types (integer, long, etc.) are going to be unsigned. If what I described in my question sounds highly unusual, perhaps I was actually told the wrong thing and ran with it.","body":"@Hot Licks, then it&#39;s quite possible the value IS actually coming across signed, and only the other, non-decimal data types (integer, long, etc.) are going to be unsigned. If what I described in my question sounds highly unusual, perhaps I was actually told the wrong thing and ran with it."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":1,"creation_date":1402607748,"post_id":24193788,"comment_id":37350508,"body_markdown":"Just about anything is possible.  But so far you&#39;ve told us *nothing* about the format of the data, so there&#39;s little we can do to help you.","body":"Just about anything is possible.  But so far you&#39;ve told us <i>nothing</i> about the format of the data, so there&#39;s little we can do to help you."},{"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"score":0,"creation_date":1402607771,"post_id":24193788,"comment_id":37350519,"body_markdown":"The data will be coming across a socket, the values (and they vary in datatype) will all eventually be converted to doubles and used in an API call.","body":"The data will be coming across a socket, the values (and they vary in datatype) will all eventually be converted to doubles and used in an API call."},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":1,"creation_date":1402608059,"post_id":24193788,"comment_id":37350651,"body_markdown":"What datatypes, specifically?  Without knowing that, there is no meaningful answer to this question.","body":"What datatypes, specifically?  Without knowing that, there is no meaningful answer to this question."},{"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"score":0,"creation_date":1402608383,"post_id":24193788,"comment_id":37350790,"body_markdown":"I was told that all the values are unsigned. I know for instance, that at byte 40, I can find a 32-bit unsigned int. 4 bytes later, at byte 44, I can find a 64-bit floating point (which I believe is unsigned). etc. etc. I have the outline of where to find what kind of value. Do I need to provide the whole thing? It&#39;s long and trivial.  Unfortunately, I have no way of seeing sample values at the moment, but like I said, I know at what position I can expect to find which value type.","body":"I was told that all the values are unsigned. I know for instance, that at byte 40, I can find a 32-bit unsigned int. 4 bytes later, at byte 44, I can find a 64-bit floating point (which I believe is unsigned). etc. etc. I have the outline of where to find what kind of value. Do I need to provide the whole thing? It&#39;s long and trivial.  Unfortunately, I have no way of seeing sample values at the moment, but like I said, I know at what position I can expect to find which value type."},{"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"score":0,"creation_date":1402608519,"post_id":24193788,"comment_id":37350862,"body_markdown":"Specifically: unsigned 16 bit int, unsigned 8-bit int, unsigned 64-bit int, unsigned 32-bit floating point, unsigned 64-bit floating point","body":"Specifically: unsigned 16 bit int, unsigned 8-bit int, unsigned 64-bit int, unsigned 32-bit floating point, unsigned 64-bit floating point"},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1402608542,"post_id":24193788,"comment_id":37350877,"body_markdown":"The only answer we can give is &quot;for each data format, define an appropriate conversion routine&quot;.","body":"The only answer we can give is &quot;for each data format, define an appropriate conversion routine&quot;."},{"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"score":0,"creation_date":1402608554,"post_id":24193788,"comment_id":37350889,"body_markdown":"&quot;int&quot; here is used losely","body":"&quot;int&quot; here is used losely"},{"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"score":0,"creation_date":1402608692,"post_id":24193788,"comment_id":37350959,"body_markdown":"@OliCharlesworth, OK I was hoping maybe there was a standard unsigned 64-bit floating point representation (not in Java of course). I have already developed ways to convert the integer values per my understanding.","body":"@OliCharlesworth, OK I was hoping maybe there was a standard unsigned 64-bit floating point representation (not in Java of course). I have already developed ways to convert the integer values per my understanding."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1402613092,"post_id":24193788,"comment_id":37352642,"body_markdown":"There isn&#39;t any such thing as an unsigned floating point format. All the IEEE floating point formats have a sign bit. Java has ways to convert a 64-bit value to a double, and to turn a long into its unsigned 64-bit String representation, and to turn a String into a double, or to turn a String into a BigDecimal. But it isn&#39;t clear which of these things you want.","body":"There isn&#39;t any such thing as an unsigned floating point format. All the IEEE floating point formats have a sign bit. Java has ways to convert a 64-bit value to a double, and to turn a long into its unsigned 64-bit String representation, and to turn a String into a double, or to turn a String into a BigDecimal. But it isn&#39;t clear which of these things you want."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1402627156,"post_id":24193788,"comment_id":37356095,"body_markdown":"@DavidConrad - Of course, technically one *could* define an unsigned floating point format if one wished.  It would be an odd bird, though, and it would be incumbent on the provider to supply a detailed specification.","body":"@DavidConrad - Of course, technically one <i>could</i> define an unsigned floating point format if one wished.  It would be an odd bird, though, and it would be incumbent on the provider to supply a detailed specification."}],"answers":[{"tags":[],"owner":{"account_id":8978,"reputation":121598,"user_id":16406,"accept_rate":77,"display_name":"Chris Dodd"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1402607668,"creation_date":1402607249,"answer_id":24193911,"question_id":24193788,"body_markdown":"If you really mean &quot;unsigned 64-bit binary value in a long&quot;, you could just convert that long to a double (with a cast), and then, if the long was negative, add 2&lt;sup&gt;64&lt;/sup&gt; as a double (18446744073709551616.0)\r\n\r\nIf, on the other hand, you really mean &quot;decimal integer that might overflow 63 bits when converted to binary&quot;, you can just convert the string directly to double with `DOUBLE.parseDouble`","title":"Convert unsigned 64-bit decimal to Java double","body":"<p>If you really mean \"unsigned 64-bit binary value in a long\", you could just convert that long to a double (with a cast), and then, if the long was negative, add 2<sup>64</sup> as a double (18446744073709551616.0)</p>\n\n<p>If, on the other hand, you really mean \"decimal integer that might overflow 63 bits when converted to binary\", you can just convert the string directly to double with <code>DOUBLE.parseDouble</code></p>\n"},{"tags":[],"owner":{"account_id":35933,"reputation":651,"user_id":102140,"accept_rate":80,"display_name":"Yahor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598077429,"creation_date":1598077429,"answer_id":63533210,"question_id":24193788,"body_markdown":"If you mean &quot;unsigned 64-bit binary value in a long&quot;, then Guava can help:\r\n```\r\nimport com.google.common.primitives.UnsignedLong;\r\n...\r\nlong value = -1L; // max unsigned long = 2^64-1\r\ndouble dValue = UnsignedLong.fromLongBits(value).doubleValue(); // 1.8446744073709552E19\r\n```\r\n\r\nInternally, this works as follows ([see the source of `UnsignedLong`](https://github.com/google/guava/blob/0a2258e/guava/src/com/google/common/primitives/UnsignedLong.java)):\r\n```\r\ndouble dValue = (double) (value &amp; 0x7fffffffffffffffL);\r\nif (value &lt; 0) {\r\n    dValue += 0x1.0p63;\r\n}\r\n```","title":"Convert unsigned 64-bit decimal to Java double","body":"<p>If you mean &quot;unsigned 64-bit binary value in a long&quot;, then Guava can help:</p>\n<pre><code>import com.google.common.primitives.UnsignedLong;\n...\nlong value = -1L; // max unsigned long = 2^64-1\ndouble dValue = UnsignedLong.fromLongBits(value).doubleValue(); // 1.8446744073709552E19\n</code></pre>\n<p>Internally, this works as follows (<a href=\"https://github.com/google/guava/blob/0a2258e/guava/src/com/google/common/primitives/UnsignedLong.java\" rel=\"nofollow noreferrer\">see the source of <code>UnsignedLong</code></a>):</p>\n<pre><code>double dValue = (double) (value &amp; 0x7fffffffffffffffL);\nif (value &lt; 0) {\n    dValue += 0x1.0p63;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":64443,"reputation":2523,"user_id":190223,"accept_rate":83,"display_name":"juancn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697637646,"creation_date":1697637646,"answer_id":77317030,"question_id":24193788,"body_markdown":"If it&#39;s a long that&#39;s supposed to be interpreted as unsigned you can do the following:\r\n\r\n    long v = Long.MAX_VALUE+1;\r\n    double d = ((double)(v&gt;&gt;&gt;1))*2+(v&amp;1);\r\n\r\nYou right-shift the long (ignore the sign) which is equivalent to dividing by two the unsigned number, turn that to double and then multiply by two to correct back (now as a double), then add back the bit you dropped.","title":"Convert unsigned 64-bit decimal to Java double","body":"<p>If it's a long that's supposed to be interpreted as unsigned you can do the following:</p>\n<pre><code>long v = Long.MAX_VALUE+1;\ndouble d = ((double)(v&gt;&gt;&gt;1))*2+(v&amp;1);\n</code></pre>\n<p>You right-shift the long (ignore the sign) which is equivalent to dividing by two the unsigned number, turn that to double and then multiply by two to correct back (now as a double), then add back the bit you dropped.</p>\n"}],"owner":{"account_id":3526009,"reputation":97,"user_id":2947084,"accept_rate":75,"display_name":"user2947084"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1002,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1697637646,"creation_date":1402606748,"question_id":24193788,"body_markdown":"I&#39;m being sent an unsigned 64-bit decimal value and am required to store it as a `double`, which of course is signed.\r\n\r\nRealizing I will lose a little bit of precision with values that make use of the most significant bit, what is the best way to accomplish this?\r\n\r\nPerhaps there is a way to manipulate the unsigned value using `Double.doubleToLongBits()` or the `BigDecimal` class?\r\n\r\nThanks in advance!","title":"Convert unsigned 64-bit decimal to Java double","body":"<p>I'm being sent an unsigned 64-bit decimal value and am required to store it as a <code>double</code>, which of course is signed.</p>\n\n<p>Realizing I will lose a little bit of precision with values that make use of the most significant bit, what is the best way to accomplish this?</p>\n\n<p>Perhaps there is a way to manipulate the unsigned value using <code>Double.doubleToLongBits()</code> or the <code>BigDecimal</code> class?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","reactjs","spring-boot","axios","next.js13"],"owner":{"account_id":10135,"reputation":14548,"user_id":18995,"accept_rate":81,"display_name":"Paul Croarkin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697637131,"creation_date":1697637131,"question_id":77316949,"body_markdown":"We have an architecture where an SSO app posts to a NextJS frontend which then posts data to a Spring Boot backend. To test out NextJS rewrites, we have a Page pages/MyPage.tsx:\r\n\r\n        useEffect(() =&gt; {\r\n        try {\r\n            const response =  axios.post(&#39;/ext-api/login&#39;, {\r\n                userName: &#39;username&#39;,\r\n                employeeId: &#39;0123&#39;\r\n            });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    })\r\n\r\nThe above code works. However, we want to expose an API, pages/api/OurApi.tsx:\r\n\r\n           ...\r\n           const response = await axios.post(&#39;/ext-api/login&#39;, {\r\n                userName: &#39;username&#39;,\r\n                employeeId: &#39;0123&#39;\r\n           });\r\n           ...\r\n    \r\nnext.config.js:\r\n\r\n        module.exports = {\r\n\t       async rewrites() {\r\n\t\t       return [\r\n\t\t\t       {\r\n\t\t\t           source: &#39;/ext-api/:path*&#39;,\r\n\t\t\t\t       destination: &#39;http://localhost:8081/backend-api/:path*&#39;,\r\n\t\t\t       },\r\n\t\t       ]\r\n\t        }\r\n        };\r\n\r\nThe Page version works, but the Api version returns a 404 error. \r\n\r\n        AxiosError: Request failed with status code 404\r\n\r\nWhy would the rewrite work for the page but not the api?","title":"NextJS Rewrite Works Differently for an API than a Page","body":"<p>We have an architecture where an SSO app posts to a NextJS frontend which then posts data to a Spring Boot backend. To test out NextJS rewrites, we have a Page pages/MyPage.tsx:</p>\n<pre><code>    useEffect(() =&gt; {\n    try {\n        const response =  axios.post('/ext-api/login', {\n            userName: 'username',\n            employeeId: '0123'\n        });\n    } catch (error) {\n        console.log(error);\n    }\n})\n</code></pre>\n<p>The above code works. However, we want to expose an API, pages/api/OurApi.tsx:</p>\n<pre><code>       ...\n       const response = await axios.post('/ext-api/login', {\n            userName: 'username',\n            employeeId: '0123'\n       });\n       ...\n</code></pre>\n<p>next.config.js:</p>\n<pre><code>    module.exports = {\n       async rewrites() {\n           return [\n               {\n                   source: '/ext-api/:path*',\n                   destination: 'http://localhost:8081/backend-api/:path*',\n               },\n           ]\n        }\n    };\n</code></pre>\n<p>The Page version works, but the Api version returns a 404 error.</p>\n<pre><code>    AxiosError: Request failed with status code 404\n</code></pre>\n<p>Why would the rewrite work for the page but not the api?</p>\n"},{"tags":["java","spring-boot","docker","kubernetes"],"comments":[{"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"score":0,"creation_date":1697614291,"post_id":77314277,"comment_id":136300395,"body_markdown":"you obviously need to install `top` into the docker image","body":"you obviously need to install <code>top</code> into the docker image"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1697623752,"post_id":77314277,"comment_id":136302228,"body_markdown":"How and why will your application run `top`?  What would you expect it to show besides the single `java` process?","body":"How and why will your application run <code>top</code>?  What would you expect it to show besides the single <code>java</code> process?"},{"owner":{"account_id":8998143,"reputation":425,"user_id":6707702,"display_name":"Mohit Sharma"},"score":0,"creation_date":1697626938,"post_id":77314277,"comment_id":136302816,"body_markdown":"login into the Kubernetes pod using exec -it command and run the top command","body":"login into the Kubernetes pod using exec -it command and run the top command"}],"answers":[{"tags":[],"owner":{"account_id":16150093,"reputation":46,"user_id":11658754,"display_name":"Munendra Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697636752,"creation_date":1697615432,"answer_id":77314396,"question_id":77314277,"body_markdown":"You can install top through below command. But you must have root access on pod to run this command.\r\n\r\n```console\r\nmicrodnf install procps\r\n```","title":"Can&#39;t find Top command in kubernetes pod","body":"<p>You can install top through below command. But you must have root access on pod to run this command.</p>\n<pre><code>microdnf install procps\n</code></pre>\n"}],"owner":{"account_id":8998143,"reputation":425,"user_id":6707702,"display_name":"Mohit Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":77314396,"answer_count":1,"score":-2,"last_activity_date":1697636752,"creation_date":1697614175,"question_id":77314277,"body_markdown":"I have a spring-boot application deployed on Kubernetes, I want see the top process on my pod as top is not available currently. Docker image we have used:\r\n\r\n        FROM adoptopenjdk/openjdk11:latest\r\n        RUN mkdir /opt/app\r\n        COPY myapp.jar /opt/app\r\n        CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/opt/app/myapp.jar&quot;]\r\n\r\nEnable top related commands in Kubernetes pod.","title":"Can&#39;t find Top command in kubernetes pod","body":"<p>I have a spring-boot application deployed on Kubernetes, I want see the top process on my pod as top is not available currently. Docker image we have used:</p>\n<pre><code>    FROM adoptopenjdk/openjdk11:latest\n    RUN mkdir /opt/app\n    COPY myapp.jar /opt/app\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/opt/app/myapp.jar&quot;]\n</code></pre>\n<p>Enable top related commands in Kubernetes pod.</p>\n"},{"tags":["java","angular","spring"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697638141,"post_id":77316899,"comment_id":136305275,"body_markdown":"Because an AS400 admin disabled it?","body":"Because an AS400 admin disabled it?"},{"owner":{"account_id":29700623,"reputation":1,"user_id":22762876,"display_name":"ackbNow"},"score":0,"creation_date":1697641446,"post_id":77316899,"comment_id":136306079,"body_markdown":"How come we can tell that the AS400 admin disabled it","body":"How come we can tell that the AS400 admin disabled it"},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1697653623,"post_id":77316899,"comment_id":136308325,"body_markdown":"The error indicates that the user is disabled on the AS400; talk to the server administrator.  If that person is you, enable the account on the AS400.","body":"The error indicates that the user is disabled on the AS400; talk to the server administrator.  If that person is you, enable the account on the AS400."}],"owner":{"account_id":29700623,"reputation":1,"user_id":22762876,"display_name":"ackbNow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697636744,"creation_date":1697636744,"question_id":77316899,"body_markdown":"I have been working with an Angular project and their is user which is getting disabled while logging in.\r\n\r\nThe error log i have got is : \r\n\r\n\r\n```\r\n[10/12/23 13:27:57:765 GMT-07:00] 00000183 BasicResource W com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask run com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@e0972d2d -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: \r\n                                 java.sql.SQLException: The application server rejected the connection. (User ID is disabled.:CUSTSERV)\r\n\tat com.ibm.as400.access.JDError.createSQLExceptionSubClass(JDError.java:820)\r\n\tat com.ibm.as400.access.JDError.throwSQLException(JDError.java:549)\r\n\tat com.ibm.as400.access.AS400JDBCConnection.setProperties(AS400JDBCConnection.java:3342)\r\n\tat com.ibm.as400.access.AS400JDBCDriver.prepareConnection(AS400JDBCDriver.java:1419)\r\n\tat com.ibm.as400.access.AS400JDBCDriver.initializeConnection(AS400JDBCDriver.java:1256)\r\n\tat com.ibm.as400.access.AS400JDBCDriver.connect(AS400JDBCDriver.java:395)\r\n\tat com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)\r\n\tat com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)\r\n\tat com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)\r\n\tat com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)\r\n\tat com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)\r\n\tat com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)\r\n\tat com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)\r\n\tat com.mchange.v2.async.ThreadPerTaskAsynchronousRunner$TaskThread.run(ThreadPerTaskAsynchronousRunner.java:255)\r\nCaused by: com.ibm.as400.access.AS400SecurityException: User ID is disabled.:CUSTSERV\r\n\tat com.ibm.as400.access.AS400ImplRemote.returnSecurityException(AS400ImplRemote.java:2096)\r\n\tat com.ibm.as400.access.AS400ImplRemote.signon(AS400ImplRemote.java:2407)\r\n\tat com.ibm.as400.access.AS400.sendSignonRequest(AS400.java:3181)\r\n\tat com.ibm.as400.access.AS400.promptSignon(AS400.java:2745)\r\n\tat com.ibm.as400.access.AS400.signon(AS400.java:4076)\r\n\tat com.ibm.as400.access.AS400.connectService(AS400.java:1203)\r\n\tat com.ibm.as400.access.AS400JDBCConnection.setProperties(AS400JDBCConnection.java:3338)\r\n```\r\n\r\n\r\nI want why does the User is getting disabled ","title":"User getting disabled","body":"<p>I have been working with an Angular project and their is user which is getting disabled while logging in.</p>\n<p>The error log i have got is :</p>\n<pre><code>[10/12/23 13:27:57:765 GMT-07:00] 00000183 BasicResource W com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask run com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@e0972d2d -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: \n                                 java.sql.SQLException: The application server rejected the connection. (User ID is disabled.:CUSTSERV)\n    at com.ibm.as400.access.JDError.createSQLExceptionSubClass(JDError.java:820)\n    at com.ibm.as400.access.JDError.throwSQLException(JDError.java:549)\n    at com.ibm.as400.access.AS400JDBCConnection.setProperties(AS400JDBCConnection.java:3342)\n    at com.ibm.as400.access.AS400JDBCDriver.prepareConnection(AS400JDBCDriver.java:1419)\n    at com.ibm.as400.access.AS400JDBCDriver.initializeConnection(AS400JDBCDriver.java:1256)\n    at com.ibm.as400.access.AS400JDBCDriver.connect(AS400JDBCDriver.java:395)\n    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)\n    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)\n    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)\n    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)\n    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)\n    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)\n    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)\n    at com.mchange.v2.async.ThreadPerTaskAsynchronousRunner$TaskThread.run(ThreadPerTaskAsynchronousRunner.java:255)\nCaused by: com.ibm.as400.access.AS400SecurityException: User ID is disabled.:CUSTSERV\n    at com.ibm.as400.access.AS400ImplRemote.returnSecurityException(AS400ImplRemote.java:2096)\n    at com.ibm.as400.access.AS400ImplRemote.signon(AS400ImplRemote.java:2407)\n    at com.ibm.as400.access.AS400.sendSignonRequest(AS400.java:3181)\n    at com.ibm.as400.access.AS400.promptSignon(AS400.java:2745)\n    at com.ibm.as400.access.AS400.signon(AS400.java:4076)\n    at com.ibm.as400.access.AS400.connectService(AS400.java:1203)\n    at com.ibm.as400.access.AS400JDBCConnection.setProperties(AS400JDBCConnection.java:3338)\n</code></pre>\n<p>I want why does the User is getting disabled</p>\n"},{"tags":["java","spring","spring-boot","tomcat","cookies"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697636769,"post_id":77316820,"comment_id":136304953,"body_markdown":"How do you invoke `/logout`?  It has a `@DeleteMapping`.","body":"How do you invoke <code>&#47;logout</code>?  It has a <code>@DeleteMapping</code>."},{"owner":{"account_id":7619751,"reputation":6003,"user_id":5778099,"accept_rate":53,"display_name":"Nestor Milyaev"},"score":0,"creation_date":1697637668,"post_id":77316820,"comment_id":136305160,"body_markdown":"I believe that is invoked as part of a callback from Azure, but that invoking that is not an issue - it&#39;s invoked all right in the old version of application with SB 2.7","body":"I believe that is invoked as part of a callback from Azure, but that invoking that is not an issue - it&#39;s invoked all right in the old version of application with SB 2.7"},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697639672,"post_id":77316820,"comment_id":136305646,"body_markdown":"I think that your question mixes two different problems: the invalid cookie is created during login (or earlier, at the first user access), the 404 is related to logout.","body":"I think that your question mixes two different problems: the invalid cookie is created during login (or earlier, at the first user access), the 404 is related to logout."}],"owner":{"account_id":7619751,"reputation":6003,"user_id":5778099,"accept_rate":53,"display_name":"Nestor Milyaev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697636526,"creation_date":1697636089,"question_id":77316820,"body_markdown":"We have an existing authenticaton microservice that uses MS Azure as authentication provider with SSO. \r\nIt currently uses SpringBoot 2.7, and we need to update that to SB 3.x\r\n\r\nThe trouble is that when user authenticates, that creates a browser-side JSESSIONID cookie that starts with a &#39;.&#39; (dot), as in `.domain.name`\r\n\r\nThat creates the need for using `LegacyCookieProcessor` as per https://stackoverflow.com/questions/29608550/tomcat-cookie-domain-validation.\r\n\r\nThe `LegacyCookieProcessor` has been removed in Tomcat version 10.1,so upgrading to SB 3 breaks the application - it starts complaining of invalid cookie domain. \r\n\r\n**What I tried:** \r\n\r\nI had an idea to upgrade SB to v.3 but pin the tomcat version down to 10.0, as below:\r\n\r\npol.xml:\r\n\r\n    ...\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.4&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n    ...\r\n        &lt;tomcat.version&gt;10.0.27&lt;/tomcat.version&gt;\r\n    ...\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\r\n                &lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-embed-websocket&lt;/artifactId&gt;\r\n                &lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;6.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    ...\r\n\r\nThe `jakarta.servlet-api` dependency was required since otherwise the `jakarta.servlet.ServletConnection` class wasn&#39;t found in my tests. \r\n\r\nController method:\r\n\r\n      @Operation(\r\n          summary = &quot;Deletes a session for the user&quot;,\r\n          responses = {\r\n            @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Success - session is deleted&quot;),\r\n            @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Not Found - session is not found&quot;)\r\n          })\r\n      @DeleteMapping(&quot;/logout&quot;)\r\n      @ResponseBody\r\n      @ResponseStatus(OK)\r\n      public AuthDetailsResponse&lt;String&gt; logout(\r\n          HttpServletRequest request, HttpServletResponse response) throws ResourceNotFoundException {\r\n        authService.logOut(request);\r\n        handleLogOutResponse(request, response);\r\n        return new AuthDetailsResponse&lt;&gt;(OK, propertiesConfig.getAadLogoutUrl());\r\n      }\r\n\r\n**What else I&#39;ve tried:**\r\n\r\nI have also tried to use the spring-boot-starter-tomcat\r\n\r\n    ...\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n    ...\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.16&lt;/version&gt; &lt;!-- this pins tomcat version to 9.x --&gt;\r\n        &lt;/dependency&gt;\r\n\r\nIn both cases, that starts my server nicely but the controller is never invoked. The client gets a 404 error on trying to invoke the `/logout` endpoint\r\n\r\nSo, the questions are:\r\n\r\n1. What am I doing wrong in the above confoguration?\r\n2. Is there an alternative way of handling the legacy domains with a dot in SB 3?","title":"Use SpringBoot 3 with older version of Tomcat (10.0) for legacy cookie configuration starting with a dot","body":"<p>We have an existing authenticaton microservice that uses MS Azure as authentication provider with SSO.\nIt currently uses SpringBoot 2.7, and we need to update that to SB 3.x</p>\n<p>The trouble is that when user authenticates, that creates a browser-side JSESSIONID cookie that starts with a '.' (dot), as in <code>.domain.name</code></p>\n<p>That creates the need for using <code>LegacyCookieProcessor</code> as per <a href=\"https://stackoverflow.com/questions/29608550/tomcat-cookie-domain-validation\">tomcat cookie domain validation</a>.</p>\n<p>The <code>LegacyCookieProcessor</code> has been removed in Tomcat version 10.1,so upgrading to SB 3 breaks the application - it starts complaining of invalid cookie domain.</p>\n<p><strong>What I tried:</strong></p>\n<p>I had an idea to upgrade SB to v.3 but pin the tomcat version down to 10.0, as below:</p>\n<p>pol.xml:</p>\n<pre><code>...\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.4&lt;/version&gt;\n    &lt;/parent&gt;\n...\n    &lt;tomcat.version&gt;10.0.27&lt;/tomcat.version&gt;\n...\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n            &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\n            &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-websocket&lt;/artifactId&gt;\n            &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n...\n</code></pre>\n<p>The <code>jakarta.servlet-api</code> dependency was required since otherwise the <code>jakarta.servlet.ServletConnection</code> class wasn't found in my tests.</p>\n<p>Controller method:</p>\n<pre><code>  @Operation(\n      summary = &quot;Deletes a session for the user&quot;,\n      responses = {\n        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Success - session is deleted&quot;),\n        @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Not Found - session is not found&quot;)\n      })\n  @DeleteMapping(&quot;/logout&quot;)\n  @ResponseBody\n  @ResponseStatus(OK)\n  public AuthDetailsResponse&lt;String&gt; logout(\n      HttpServletRequest request, HttpServletResponse response) throws ResourceNotFoundException {\n    authService.logOut(request);\n    handleLogOutResponse(request, response);\n    return new AuthDetailsResponse&lt;&gt;(OK, propertiesConfig.getAadLogoutUrl());\n  }\n</code></pre>\n<p><strong>What else I've tried:</strong></p>\n<p>I have also tried to use the spring-boot-starter-tomcat</p>\n<pre><code>...\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n...\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;version&gt;2.7.16&lt;/version&gt; &lt;!-- this pins tomcat version to 9.x --&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>In both cases, that starts my server nicely but the controller is never invoked. The client gets a 404 error on trying to invoke the <code>/logout</code> endpoint</p>\n<p>So, the questions are:</p>\n<ol>\n<li>What am I doing wrong in the above confoguration?</li>\n<li>Is there an alternative way of handling the legacy domains with a dot in SB 3?</li>\n</ol>\n"},{"tags":["java","spring","rest","spring-data","spring-data-rest"],"comments":[{"owner":{"account_id":1735496,"reputation":1778,"user_id":1588163,"accept_rate":74,"display_name":"clapas"},"score":0,"creation_date":1530086757,"post_id":34099559,"comment_id":89105496,"body_markdown":"What about the solution proposed in https://stackoverflow.com/a/26796142/1588163?","body":"What about the solution proposed in <a href=\"https://stackoverflow.com/a/26796142/1588163\">stackoverflow.com/a/26796142/1588163</a>?"}],"answers":[{"comments":[{"owner":{"account_id":5109535,"reputation":573,"user_id":4096603,"display_name":"bgalek"},"score":0,"creation_date":1449311906,"post_id":34103753,"comment_id":55959022,"body_markdown":"I&#39;ve tried using ParameterizedTypeReference&lt;Page&lt;StoryResponse&gt;&gt;() but got Jackson error","body":"I&#39;ve tried using ParameterizedTypeReference&lt;Page&lt;StoryResponse&gt;&gt;() but got Jackson error"}],"tags":[],"owner":{"account_id":4695628,"reputation":127,"user_id":3800576,"accept_rate":69,"display_name":"pathfinder"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1449311191,"creation_date":1449311191,"answer_id":34103753,"question_id":34099559,"body_markdown":"You can probably use exchange method of restTemplate and get the body from it..\r\n\r\nCheck the following answer [https://stackoverflow.com/a/31947188/3800576][1].\r\nThis might help you\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/31947188/3800576","title":"How to consume Page&lt;Entity&gt; response using Spring RestTemplate","body":"<p>You can probably use exchange method of restTemplate and get the body from it..</p>\n\n<p>Check the following answer <a href=\"https://stackoverflow.com/a/31947188/3800576\">https://stackoverflow.com/a/31947188/3800576</a>.\nThis might help you</p>\n"},{"comments":[{"owner":{"account_id":1458483,"reputation":5866,"user_id":1373465,"accept_rate":84,"display_name":"Menelaos Kotsollaris"},"score":3,"creation_date":1502128157,"post_id":35238863,"comment_id":78065523,"body_markdown":"Don&#39;t forget to add `@JsonIgnoreProperties(ignoreUnknown = true)` as a class annotation. This property will help ignore the additional features that would require custom mapping.","body":"Don&#39;t forget to add <code>@JsonIgnoreProperties(ignoreUnknown = true)</code> as a class annotation. This property will help ignore the additional features that would require custom mapping."},{"owner":{"account_id":3231270,"reputation":526,"user_id":2726467,"accept_rate":60,"display_name":"Shaunyl"},"score":1,"creation_date":1528918748,"post_id":35238863,"comment_id":88693486,"body_markdown":"I still gives me the error. Please look at https://stackoverflow.com/questions/50826061/jsonmappingexception-when-testing-endpoints-with-pageable-field","body":"I still gives me the error. Please look at <a href=\"https://stackoverflow.com/questions/50826061/jsonmappingexception-when-testing-endpoints-with-pageable-field\" title=\"jsonmappingexception when testing endpoints with pageable field\">stackoverflow.com/questions/50826061/&hellip;</a>"}],"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"comment_count":2,"down_vote_count":0,"up_vote_count":60,"is_accepted":true,"score":60,"last_activity_date":1495490933,"creation_date":1454746344,"answer_id":35238863,"question_id":34099559,"body_markdown":"    new TypeReference&lt;Page&lt;StoryResponse&gt;&gt;() {}\r\nThe problem with this statement is that Jackson cannot instantiate an abstract type. You should give Jackson the information on how to instantiate `Page` with a concrete type. But its concrete type, `PageImpl`, has no default constructor or any `@JsonCreator`s for that matter, so you can **not** use the following code either:\r\n\r\n    new TypeReference&lt;PageImpl&lt;StoryResponse&gt;&gt;() {}\r\n\r\nSince you can&#39;t add the required information to the `Page` class, It&#39;s better to create a custom implementation for `Page` interface which has a default no-arg constructor, as in this [answer][1]. Then use that custom implementation in type reference, like following:\r\n\r\n    new TypeReference&lt;CustomPageImpl&lt;StoryResponse&gt;&gt;() {}\r\nHere are the custom implementation, copied from linked question:\r\n\r\n    public class CustomPageImpl&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n        private static final long serialVersionUID = 1L;\r\n        private int number;\r\n        private int size;\r\n        private int totalPages;\r\n        private int numberOfElements;\r\n        private long totalElements;\r\n        private boolean previousPage;\r\n        private boolean firstPage;\r\n        private boolean nextPage;\r\n        private boolean lastPage;\r\n        private List&lt;T&gt; content;\r\n        private Sort sort;\r\n    \r\n        public CustomPageImpl() {\r\n            super(new ArrayList&lt;&gt;());\r\n        }\r\n    \r\n        @Override\r\n        public int getNumber() {\r\n            return number;\r\n        }\r\n    \r\n        public void setNumber(int number) {\r\n            this.number = number;\r\n        }\r\n    \r\n        @Override\r\n        public int getSize() {\r\n            return size;\r\n        }\r\n    \r\n        public void setSize(int size) {\r\n            this.size = size;\r\n        }\r\n    \r\n        @Override\r\n        public int getTotalPages() {\r\n            return totalPages;\r\n        }\r\n    \r\n        public void setTotalPages(int totalPages) {\r\n            this.totalPages = totalPages;\r\n        }\r\n    \r\n        @Override\r\n        public int getNumberOfElements() {\r\n            return numberOfElements;\r\n        }\r\n    \r\n        public void setNumberOfElements(int numberOfElements) {\r\n            this.numberOfElements = numberOfElements;\r\n        }\r\n    \r\n        @Override\r\n        public long getTotalElements() {\r\n            return totalElements;\r\n        }\r\n    \r\n        public void setTotalElements(long totalElements) {\r\n            this.totalElements = totalElements;\r\n        }\r\n    \r\n        public boolean isPreviousPage() {\r\n            return previousPage;\r\n        }\r\n    \r\n        public void setPreviousPage(boolean previousPage) {\r\n            this.previousPage = previousPage;\r\n        }\r\n    \r\n        public boolean isFirstPage() {\r\n            return firstPage;\r\n        }\r\n    \r\n        public void setFirstPage(boolean firstPage) {\r\n            this.firstPage = firstPage;\r\n        }\r\n    \r\n        public boolean isNextPage() {\r\n            return nextPage;\r\n        }\r\n    \r\n        public void setNextPage(boolean nextPage) {\r\n            this.nextPage = nextPage;\r\n        }\r\n    \r\n        public boolean isLastPage() {\r\n            return lastPage;\r\n        }\r\n    \r\n        public void setLastPage(boolean lastPage) {\r\n            this.lastPage = lastPage;\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;T&gt; getContent() {\r\n            return content;\r\n        }\r\n    \r\n        public void setContent(List&lt;T&gt; content) {\r\n            this.content = content;\r\n        }\r\n    \r\n        @Override\r\n        public Sort getSort() {\r\n            return sort;\r\n        }\r\n    \r\n        public void setSort(Sort sort) {\r\n            this.sort = sort;\r\n        }\r\n    \r\n        public Page&lt;T&gt; pageImpl() {\r\n            return new PageImpl&lt;&gt;(getContent(), new PageRequest(getNumber(),\r\n                    getSize(), getSort()), getTotalElements());\r\n        }\r\n    }\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/18847126/1393484","title":"How to consume Page&lt;Entity&gt; response using Spring RestTemplate","body":"<pre><code>new TypeReference&lt;Page&lt;StoryResponse&gt;&gt;() {}\n</code></pre>\n\n<p>The problem with this statement is that Jackson cannot instantiate an abstract type. You should give Jackson the information on how to instantiate <code>Page</code> with a concrete type. But its concrete type, <code>PageImpl</code>, has no default constructor or any <code>@JsonCreator</code>s for that matter, so you can <strong>not</strong> use the following code either:</p>\n\n<pre><code>new TypeReference&lt;PageImpl&lt;StoryResponse&gt;&gt;() {}\n</code></pre>\n\n<p>Since you can't add the required information to the <code>Page</code> class, It's better to create a custom implementation for <code>Page</code> interface which has a default no-arg constructor, as in this <a href=\"https://stackoverflow.com/a/18847126/1393484\">answer</a>. Then use that custom implementation in type reference, like following:</p>\n\n<pre><code>new TypeReference&lt;CustomPageImpl&lt;StoryResponse&gt;&gt;() {}\n</code></pre>\n\n<p>Here are the custom implementation, copied from linked question:</p>\n\n<pre><code>public class CustomPageImpl&lt;T&gt; extends PageImpl&lt;T&gt; {\n    private static final long serialVersionUID = 1L;\n    private int number;\n    private int size;\n    private int totalPages;\n    private int numberOfElements;\n    private long totalElements;\n    private boolean previousPage;\n    private boolean firstPage;\n    private boolean nextPage;\n    private boolean lastPage;\n    private List&lt;T&gt; content;\n    private Sort sort;\n\n    public CustomPageImpl() {\n        super(new ArrayList&lt;&gt;());\n    }\n\n    @Override\n    public int getNumber() {\n        return number;\n    }\n\n    public void setNumber(int number) {\n        this.number = number;\n    }\n\n    @Override\n    public int getSize() {\n        return size;\n    }\n\n    public void setSize(int size) {\n        this.size = size;\n    }\n\n    @Override\n    public int getTotalPages() {\n        return totalPages;\n    }\n\n    public void setTotalPages(int totalPages) {\n        this.totalPages = totalPages;\n    }\n\n    @Override\n    public int getNumberOfElements() {\n        return numberOfElements;\n    }\n\n    public void setNumberOfElements(int numberOfElements) {\n        this.numberOfElements = numberOfElements;\n    }\n\n    @Override\n    public long getTotalElements() {\n        return totalElements;\n    }\n\n    public void setTotalElements(long totalElements) {\n        this.totalElements = totalElements;\n    }\n\n    public boolean isPreviousPage() {\n        return previousPage;\n    }\n\n    public void setPreviousPage(boolean previousPage) {\n        this.previousPage = previousPage;\n    }\n\n    public boolean isFirstPage() {\n        return firstPage;\n    }\n\n    public void setFirstPage(boolean firstPage) {\n        this.firstPage = firstPage;\n    }\n\n    public boolean isNextPage() {\n        return nextPage;\n    }\n\n    public void setNextPage(boolean nextPage) {\n        this.nextPage = nextPage;\n    }\n\n    public boolean isLastPage() {\n        return lastPage;\n    }\n\n    public void setLastPage(boolean lastPage) {\n        this.lastPage = lastPage;\n    }\n\n    @Override\n    public List&lt;T&gt; getContent() {\n        return content;\n    }\n\n    public void setContent(List&lt;T&gt; content) {\n        this.content = content;\n    }\n\n    @Override\n    public Sort getSort() {\n        return sort;\n    }\n\n    public void setSort(Sort sort) {\n        this.sort = sort;\n    }\n\n    public Page&lt;T&gt; pageImpl() {\n        return new PageImpl&lt;&gt;(getContent(), new PageRequest(getNumber(),\n                getSize(), getSort()), getTotalElements());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":193906,"reputation":4673,"user_id":435912,"accept_rate":78,"display_name":"Sri"},"score":2,"creation_date":1505790424,"post_id":44895867,"comment_id":79545015,"body_markdown":"I&#39;m getting this exception when i tried to use your approach:\n`org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class org.springframework.data.domain.Pageable]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Can not construct instance of org.springframework.data.domain.Pageable (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information`","body":"I&#39;m getting this exception when i tried to use your approach: <code>org.springframework.http.converter.HttpMessageConversionExce&zwnj;&#8203;ption: Type definition error: [simple type, class org.springframework.data.domain.Pageable]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionExceptio&zwnj;&#8203;n: Can not construct instance of org.springframework.data.domain.Pageable (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information</code>"},{"owner":{"account_id":1467870,"reputation":883,"user_id":1380225,"accept_rate":80,"display_name":"Isammoc"},"score":0,"creation_date":1505816517,"post_id":44895867,"comment_id":79557939,"body_markdown":"@Sriram Did you check that 1. your `HelperPage` constructor has the `@JsonCreator` annotation? 2. You get an `HelpPage` from your restTemplate?","body":"@Sriram Did you check that 1. your <code>HelperPage</code> constructor has the <code>@JsonCreator</code> annotation? 2. You get an <code>HelpPage</code> from your restTemplate?"},{"owner":{"account_id":5421563,"reputation":5502,"user_id":4315049,"accept_rate":57,"display_name":"robjwilkins"},"score":1,"creation_date":1519813524,"post_id":44895867,"comment_id":85058927,"body_markdown":"this is a better solution than the accepted answer.  Adding `@JsonIgnoreProperties(ignoreUnknown = true)` after `@JsonCreator also prevents problems deserialising  when there are unknown properties","body":"this is a better solution than the accepted answer.  Adding <code>@JsonIgnoreProperties(ignoreUnknown = true)</code> after `@JsonCreator also prevents problems deserialising  when there are unknown properties"},{"owner":{"account_id":3231270,"reputation":526,"user_id":2726467,"accept_rate":60,"display_name":"Shaunyl"},"score":2,"creation_date":1528918761,"post_id":44895867,"comment_id":88693494,"body_markdown":"I still gives me the error. Please look at https://stackoverflow.com/questions/50826061/jsonmappingexception-when-testing-endpoints-with-pageable-field","body":"I still gives me the error. Please look at <a href=\"https://stackoverflow.com/questions/50826061/jsonmappingexception-when-testing-endpoints-with-pageable-field\" title=\"jsonmappingexception when testing endpoints with pageable field\">stackoverflow.com/questions/50826061/&hellip;</a>"}],"tags":[],"owner":{"account_id":4095273,"reputation":1557,"user_id":3362244,"accept_rate":60,"display_name":"teuber789"},"comment_count":4,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1499133501,"creation_date":1499133501,"answer_id":44895867,"question_id":34099559,"body_markdown":"I know this thread is a little old, but hopefully someone will benefit from this.\r\n\r\n@Ali Dehghani&#39;s answer is good, except that it re-implements what ````PageImpl&lt;T&gt;```` has already done. I considered this to be rather needless. I found a better solution by creating a class that extends ````PageImpl&lt;T&gt;```` and specifies a ````@JsonCreator```` constructor:\r\n\r\n    import com.fasterxml.jackson.annotation.JsonCreator;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import com.company.model.HelperModel;\r\n    import org.springframework.data.domain.PageImpl;\r\n    import org.springframework.data.domain.PageRequest;\r\n    \r\n    import java.util.List;\r\n    \r\n    public class HelperPage extends PageImpl&lt;HelperModel&gt; {\r\n    \r\n        @JsonCreator\r\n        // Note: I don&#39;t need a sort, so I&#39;m not including one here.\r\n        // It shouldn&#39;t be too hard to add it in tho.\r\n        public HelperPage(@JsonProperty(&quot;content&quot;) List&lt;HelperModel&gt; content,\r\n                          @JsonProperty(&quot;number&quot;) int number,\r\n                          @JsonProperty(&quot;size&quot;) int size,\r\n                          @JsonProperty(&quot;totalElements&quot;) Long totalElements) {\r\n            super(content, new PageRequest(number, size), totalElements);\r\n        }\r\n    }\r\n\r\n\r\n\r\nThen:\r\n\r\n    HelperPage page = restTemplate.getForObject(url, HelperPage.class);\r\n\r\nThis is the same as creating a ````CustomPageImpl&lt;T&gt;```` class but allows us to take advantage of all the code that&#39;s already in ````PageImpl&lt;T&gt;````.\r\n\r\n","title":"How to consume Page&lt;Entity&gt; response using Spring RestTemplate","body":"<p>I know this thread is a little old, but hopefully someone will benefit from this.</p>\n\n<p>@Ali Dehghani's answer is good, except that it re-implements what <code>PageImpl&lt;T&gt;</code> has already done. I considered this to be rather needless. I found a better solution by creating a class that extends <code>PageImpl&lt;T&gt;</code> and specifies a <code>@JsonCreator</code> constructor:</p>\n\n<pre><code>import com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.company.model.HelperModel;\nimport org.springframework.data.domain.PageImpl;\nimport org.springframework.data.domain.PageRequest;\n\nimport java.util.List;\n\npublic class HelperPage extends PageImpl&lt;HelperModel&gt; {\n\n    @JsonCreator\n    // Note: I don't need a sort, so I'm not including one here.\n    // It shouldn't be too hard to add it in tho.\n    public HelperPage(@JsonProperty(\"content\") List&lt;HelperModel&gt; content,\n                      @JsonProperty(\"number\") int number,\n                      @JsonProperty(\"size\") int size,\n                      @JsonProperty(\"totalElements\") Long totalElements) {\n        super(content, new PageRequest(number, size), totalElements);\n    }\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>HelperPage page = restTemplate.getForObject(url, HelperPage.class);\n</code></pre>\n\n<p>This is the same as creating a <code>CustomPageImpl&lt;T&gt;</code> class but allows us to take advantage of all the code that's already in <code>PageImpl&lt;T&gt;</code>.</p>\n"},{"tags":[],"owner":{"account_id":1389217,"reputation":431,"user_id":8805916,"display_name":"Vladimir Mitev"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1508501803,"creation_date":1508501803,"answer_id":46848889,"question_id":34099559,"body_markdown":"As &quot;pathfinder&quot; mentioned you can use `exchange` method of `RestTemplate`. However instead of passing `ParameterizedTypeReference&lt;Page&lt;StoryResponse&gt;&gt;()` you should pass `ParameterizedTypeReference&lt;PagedResources&lt;StoryResponse&gt;&gt;()`. When you get the response you could retrieve the content - `Collection&lt;StoryResponse&gt;`.\r\n\r\nThe code should look like this:\r\n\r\n    ResponseEntity&lt;PagedResources&lt;StoryResponse&gt;&gt; response = restTemplate.exchange(getLocalhost(&quot;/story&quot;),\r\n            HttpMethod.GET, null, new ParameterizedTypeReference&lt;PagedResources&lt;StoryResponse&gt;&gt;() {});\r\n    PagedResources&lt;StoryResponse&gt; storiesResources = response.getBody();\r\n    Collection&lt;StoryResponse&gt; stories = storiesResources.getContent();\r\n\r\nApart from the content `storiesResources` holds page metadata and links too.\r\n\r\nA more step-by-step explanation is available here: https://stackoverflow.com/a/46847429/8805916","title":"How to consume Page&lt;Entity&gt; response using Spring RestTemplate","body":"<p>As \"pathfinder\" mentioned you can use <code>exchange</code> method of <code>RestTemplate</code>. However instead of passing <code>ParameterizedTypeReference&lt;Page&lt;StoryResponse&gt;&gt;()</code> you should pass <code>ParameterizedTypeReference&lt;PagedResources&lt;StoryResponse&gt;&gt;()</code>. When you get the response you could retrieve the content - <code>Collection&lt;StoryResponse&gt;</code>.</p>\n\n<p>The code should look like this:</p>\n\n<pre><code>ResponseEntity&lt;PagedResources&lt;StoryResponse&gt;&gt; response = restTemplate.exchange(getLocalhost(\"/story\"),\n        HttpMethod.GET, null, new ParameterizedTypeReference&lt;PagedResources&lt;StoryResponse&gt;&gt;() {});\nPagedResources&lt;StoryResponse&gt; storiesResources = response.getBody();\nCollection&lt;StoryResponse&gt; stories = storiesResources.getContent();\n</code></pre>\n\n<p>Apart from the content <code>storiesResources</code> holds page metadata and links too.</p>\n\n<p>A more step-by-step explanation is available here: <a href=\"https://stackoverflow.com/a/46847429/8805916\">https://stackoverflow.com/a/46847429/8805916</a></p>\n"},{"tags":[],"owner":{"account_id":11273684,"reputation":215,"user_id":8268335,"display_name":"Terrence Wei"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1539252182,"creation_date":1539251423,"answer_id":52757110,"question_id":34099559,"body_markdown":"If you looking at this thread, and if you try this answer\r\nhttps://stackoverflow.com/a/44895867/8268335\r\n\r\nYou will meet the 2nd problem:\r\n\r\n    Can not construct instance of org.springframework.data.domain.Pageable\r\n\r\nThen I find the perfect solution from here:\r\nhttps://stackoverflow.com/a/42002709/8268335\r\n\r\nI create the class `RestPageImpl` from the answer above and problem solved.","title":"How to consume Page&lt;Entity&gt; response using Spring RestTemplate","body":"<p>If you looking at this thread, and if you try this answer\n<a href=\"https://stackoverflow.com/a/44895867/8268335\">https://stackoverflow.com/a/44895867/8268335</a></p>\n\n<p>You will meet the 2nd problem:</p>\n\n<pre><code>Can not construct instance of org.springframework.data.domain.Pageable\n</code></pre>\n\n<p>Then I find the perfect solution from here:\n<a href=\"https://stackoverflow.com/a/42002709/8268335\">https://stackoverflow.com/a/42002709/8268335</a></p>\n\n<p>I create the class <code>RestPageImpl</code> from the answer above and problem solved.</p>\n"},{"comments":[{"owner":{"account_id":8519619,"reputation":93,"user_id":6387021,"display_name":"Filipe Fonseca"},"score":0,"creation_date":1642048782,"post_id":62649310,"comment_id":124970208,"body_markdown":"Your answer with [this one](https://stackoverflow.com/a/64235004/6387021) helped me. Thank you.","body":"Your answer with <a href=\"https://stackoverflow.com/a/64235004/6387021\">this one</a> helped me. Thank you."}],"tags":[],"owner":{"account_id":5659371,"reputation":2152,"user_id":4477463,"accept_rate":22,"display_name":"Egor"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1593483326,"creation_date":1593483326,"answer_id":62649310,"question_id":34099559,"body_markdown":"If you use spring-cloud-openfeign you can use PageJacksonModule.\r\nJust register PageJacksonModule in your object mapper:\r\n\r\n    final ObjectMapper mapper = new ObjectMapper()\r\n    mapper.registerModule(new PageJacksonModule());","title":"How to consume Page&lt;Entity&gt; response using Spring RestTemplate","body":"<p>If you use spring-cloud-openfeign you can use PageJacksonModule.\nJust register PageJacksonModule in your object mapper:</p>\n<pre><code>final ObjectMapper mapper = new ObjectMapper()\nmapper.registerModule(new PageJacksonModule());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":316148,"reputation":865,"user_id":632153,"accept_rate":83,"display_name":"raven"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697636323,"creation_date":1697636323,"answer_id":77316854,"question_id":34099559,"body_markdown":"In a modern spring boot application with Jackson modules enabled by spring boot by default you could do something as simple as:\r\n```\r\n@JsonIgnoreProperties(&quot;pageable&quot;)\r\npublic class JacksonPage&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n    private JacksonPage(List&lt;T&gt; content, int number, int size, long totalElements) {\r\n        super(content, PageRequest.of(number, size), totalElements);\r\n    }\r\n}\r\n```","title":"How to consume Page&lt;Entity&gt; response using Spring RestTemplate","body":"<p>In a modern spring boot application with Jackson modules enabled by spring boot by default you could do something as simple as:</p>\n<pre><code>@JsonIgnoreProperties(&quot;pageable&quot;)\npublic class JacksonPage&lt;T&gt; extends PageImpl&lt;T&gt; {\n    private JacksonPage(List&lt;T&gt; content, int number, int size, long totalElements) {\n        super(content, PageRequest.of(number, size), totalElements);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5109535,"reputation":573,"user_id":4096603,"display_name":"bgalek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54322,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"accepted_answer_id":35238863,"answer_count":7,"score":54,"last_activity_date":1697636323,"creation_date":1449274033,"question_id":34099559,"body_markdown":"I&#39;m using spring data (mongoDb) and I&#39;ve got my repository:\r\n\r\n    public interface StoriesRepository extends PagingAndSortingRepository&lt;Story, String&gt; {}\r\n\r\nThen i have a controller:\r\n\r\n    @RequestMapping(method = RequestMethod.GET)\r\n    public ResponseEntity&lt;Page&lt;StoryResponse&gt;&gt; getStories(Pageable pageable) {\r\n        Page&lt;StoryResponse&gt; stories = storiesRepository.findAll(pageable).map(StoryResponseMapper::toStoryResponse);\r\n        return ResponseEntity.ok(stories);\r\n    }\r\n\r\nEverything works fine, but I can&#39;t consume my endpoint using RestTemplate getForEntity method:\r\n\r\n  \r\n\r\n    def entity = restTemplate.getForEntity(getLocalhost(&quot;/story&quot;), new TypeReference&lt;Page&lt;StoryResponse&gt;&gt;(){}.class)\r\n\r\nWhat class should I provide to successfully deserialize my Page of entities?\r\n","title":"How to consume Page&lt;Entity&gt; response using Spring RestTemplate","body":"<p>I'm using spring data (mongoDb) and I've got my repository:</p>\n\n<pre><code>public interface StoriesRepository extends PagingAndSortingRepository&lt;Story, String&gt; {}\n</code></pre>\n\n<p>Then i have a controller:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.GET)\npublic ResponseEntity&lt;Page&lt;StoryResponse&gt;&gt; getStories(Pageable pageable) {\n    Page&lt;StoryResponse&gt; stories = storiesRepository.findAll(pageable).map(StoryResponseMapper::toStoryResponse);\n    return ResponseEntity.ok(stories);\n}\n</code></pre>\n\n<p>Everything works fine, but I can't consume my endpoint using RestTemplate getForEntity method:</p>\n\n<pre><code>def entity = restTemplate.getForEntity(getLocalhost(\"/story\"), new TypeReference&lt;Page&lt;StoryResponse&gt;&gt;(){}.class)\n</code></pre>\n\n<p>What class should I provide to successfully deserialize my Page of entities?</p>\n"},{"tags":["python","java","py4j"],"answers":[{"tags":[],"owner":{"account_id":3614359,"reputation":79,"user_id":3417591,"display_name":"Adam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697636121,"creation_date":1697636121,"answer_id":77316827,"question_id":77261118,"body_markdown":"It turns out that using `JavaGateway.launch_gateway()` was restarting some cached version of my java jar. Rather than using the generic `launch_gateway`, using a more specific `JavaGateway` constructor worked.\r\n\r\n```\r\nfrom py4j.java_gateway import JavaGateway\r\ngateway = JavaGateway(gateway_parameters=GatewayParameters(port=12345))\r\nexample = gateway.entry_point\r\n...\r\n\r\n```","title":"How to prevent py4j from resurrecting an older version of my JAR?","body":"<p>It turns out that using <code>JavaGateway.launch_gateway()</code> was restarting some cached version of my java jar. Rather than using the generic <code>launch_gateway</code>, using a more specific <code>JavaGateway</code> constructor worked.</p>\n<pre><code>from py4j.java_gateway import JavaGateway\ngateway = JavaGateway(gateway_parameters=GatewayParameters(port=12345))\nexample = gateway.entry_point\n...\n\n</code></pre>\n"}],"owner":{"account_id":3614359,"reputation":79,"user_id":3417591,"display_name":"Adam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697636121,"creation_date":1696876728,"question_id":77261118,"body_markdown":"I&#39;m running a basic py4j program as follows:\r\n\r\n    from py4j.java_gateway import JavaGateway\r\n    gateway = JavaGateway.launch_gateway()\r\n    example = gateway.entry_point\r\n    results = example.foo()\r\n    print(results) // &quot;foo&quot;\r\n\r\nOriginally, my java program looked like this\r\n    \r\n    package foo;\r\n    import py4j.GatewayServer;\r\n\r\n    public class Example {\r\n\r\n        public static void main(String[] args) throws IOException {\r\n            GatewayServer gatewayServer = new GatewayServer(new Example());\r\n            gatewayServer.start();\r\n            System.out.println(&quot;PyJ Gateway Server Started&quot;);\r\n        }\r\n\r\n        public String foo() {\r\n            return &quot;foo&quot;;\r\n        }\r\n    }\r\n\r\nEnvironment details: I&#39;m running the python program via asdf+poetry python and building the java jar with maven. Python version 3.9.17, Java version 17. \r\n\r\nAfter building and running my server a few times, I realized I needed a new method, so got rid of `foo()`, replacing it with `bar()`. So now my program looks like the following:\r\n\r\n    package foo;\r\n    import py4j.GatewayServer;\r\n\r\n    public class Example {\r\n\r\n        public static void main(String[] args) throws IOException {\r\n            GatewayServer gatewayServer = new GatewayServer(new Example());\r\n            gatewayServer.start();\r\n            System.out.println(&quot;PyJ Gateway Server Started&quot;);\r\n        }\r\n\r\n        public String bar(String input) {\r\n            return input;\r\n        }\r\n    }\r\n\r\n\r\nHowever, now after rebuilding and relaunching my java jar for `Example`, I&#39;m seeing the following results in my python program:\r\n\r\n    from py4j.java_gateway import JavaGateway\r\n    gateway = JavaGateway.launch_gateway()\r\n    example = gateway.entry_point\r\n    results = example.foo()\r\n    print(results) // &quot;foo&quot;\r\n    results = example.bar(&quot;bar&quot;) // py4j.protocol.Py4JError: An error occurred while calling t.bar. Trace: py4j.Py4JException: Target Object ID does not exist for this gateway :t\r\n\r\n\r\nNote that these results persist, even if I locally kill all processes with &quot;java&quot; in the name, delete the original JAR, or anything else. Somehow py4j seems to have learned the first ever JAR I presented it with and will never let go. \r\n\r\nHow do I kill the deprecated java code and prevent python from speaking to it ever again?","title":"How to prevent py4j from resurrecting an older version of my JAR?","body":"<p>I'm running a basic py4j program as follows:</p>\n<pre><code>from py4j.java_gateway import JavaGateway\ngateway = JavaGateway.launch_gateway()\nexample = gateway.entry_point\nresults = example.foo()\nprint(results) // &quot;foo&quot;\n</code></pre>\n<p>Originally, my java program looked like this</p>\n<pre><code>package foo;\nimport py4j.GatewayServer;\n\npublic class Example {\n\n    public static void main(String[] args) throws IOException {\n        GatewayServer gatewayServer = new GatewayServer(new Example());\n        gatewayServer.start();\n        System.out.println(&quot;PyJ Gateway Server Started&quot;);\n    }\n\n    public String foo() {\n        return &quot;foo&quot;;\n    }\n}\n</code></pre>\n<p>Environment details: I'm running the python program via asdf+poetry python and building the java jar with maven. Python version 3.9.17, Java version 17.</p>\n<p>After building and running my server a few times, I realized I needed a new method, so got rid of <code>foo()</code>, replacing it with <code>bar()</code>. So now my program looks like the following:</p>\n<pre><code>package foo;\nimport py4j.GatewayServer;\n\npublic class Example {\n\n    public static void main(String[] args) throws IOException {\n        GatewayServer gatewayServer = new GatewayServer(new Example());\n        gatewayServer.start();\n        System.out.println(&quot;PyJ Gateway Server Started&quot;);\n    }\n\n    public String bar(String input) {\n        return input;\n    }\n}\n</code></pre>\n<p>However, now after rebuilding and relaunching my java jar for <code>Example</code>, I'm seeing the following results in my python program:</p>\n<pre><code>from py4j.java_gateway import JavaGateway\ngateway = JavaGateway.launch_gateway()\nexample = gateway.entry_point\nresults = example.foo()\nprint(results) // &quot;foo&quot;\nresults = example.bar(&quot;bar&quot;) // py4j.protocol.Py4JError: An error occurred while calling t.bar. Trace: py4j.Py4JException: Target Object ID does not exist for this gateway :t\n</code></pre>\n<p>Note that these results persist, even if I locally kill all processes with &quot;java&quot; in the name, delete the original JAR, or anything else. Somehow py4j seems to have learned the first ever JAR I presented it with and will never let go.</p>\n<p>How do I kill the deprecated java code and prevent python from speaking to it ever again?</p>\n"},{"tags":["java","spring-mvc","spring-webflux","reactive-programming"],"owner":{"account_id":2864119,"reputation":309,"user_id":2458761,"accept_rate":50,"display_name":"Aditya Raman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697636059,"creation_date":1697636059,"question_id":77316813,"body_markdown":"I am using below code to test an external api call.\r\n\r\nController:\r\n```\r\n\r\n@RestController\r\n@RequestMapping(&quot;risk-siphon&quot;)\r\npublic class KYCDataControllerDummy extends BaseController {\r\n.....\r\n    @Autowired\r\n    KYCService service;\r\n......    \r\n    @GetMapping(value = &quot;/kycDummy/api2/{version}/{customerId}&quot;)\r\n    public Mono&lt;ResponseEntity&lt;String&gt;&gt; getKYCApiDetailsController(@PathVariable(&quot;customerId&quot;) String customerId,\r\n                                                                   @PathVariable(&quot;version&quot;) String version) {\r\n            logger.info(&quot;Get kyc siphon api dummy called for customer id:: &quot; + customerId);\r\n            Mono&lt;KYCDetailsDataProvider.KycApiResponse&gt; response = kycDetailsDataProvider.getKycDetails(customerId, version)\r\n                    .doOnNext(dbres -&gt; logger.info(&quot;Received api Details from MONO: {}&quot;, dbres));\r\n            logger.info(&quot;Api response received kyc:: &quot; + customerId);\r\n\r\n            return\r\n                    response.map(resp -&gt;\r\n                            ResponseEntity.ok(gson.toJson(resp))\r\n                    );\r\n    }\r\n\r\n}\r\n```\r\nService:\r\n```\r\n    public Mono getKycDetails(String customerId, String version) {\r\n        logger.info(&quot;Api fetch call init for KYC Data for customerId::&quot; + customerId);\r\n        var responseTimeout = kycApiConfig.basic().timeout();\r\n        logger.info(&quot;timeout::&quot; + responseTimeout);\r\n\r\n        String uri = config.getApiBaseUrl() + (String.format(KYC_API_PATH, version, customerId));\r\n        return WebApiUtils.reactiveWebClientHTTPGet(uri, new HashMap(), responseTimeout, zestMoneyJWTProvider.getToken(), webClient)\r\n                .exchangeToMono(this::exchangeKYCGetApiResponse)\r\n                .transformDeferred(RetryOperator.of(this.defaultRetry));\r\n    }\r\n```\r\nApiUtils:\r\n```\r\n    public static WebClient.RequestHeadersSpec&lt;?&gt; reactiveWebClientHTTPGet(String url, Map params,\r\n                                                                           Duration responseTimeout, ZestMoneyJWTService.InternalServicesResponse token, WebClient webClient) {\r\n        String bearerToken = token.accessToken();\r\n\r\n        return webClient\r\n                .get()\r\n                .uri(url)\r\n                .header(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n                .header(HttpHeaders.AUTHORIZATION, token.tokenType() + StringUtils.SPACE + bearerToken)\r\n                .httpRequest(clientHttpRequest -&gt; {\r\n                    HttpClientRequest reactorRequest = clientHttpRequest.getNativeRequest();\r\n                    reactorRequest.responseTimeout(responseTimeout);\r\n                });\r\n    }\r\n```\r\n\r\n\r\n**Issue**\r\nThis code is expected to use reactive webclient and make api call to third party service. It runs fine on local and returns the external api response. Works fine in local docker as well. But when this is deployed to a EKS pod (test environment of release pipeline) it gets stuck and eventually throws a 504 gateway timeout error. While inspecting the logs from pod it seems like the thread is getting interrupted or some issue because of which the code is stuck at line \r\n```             \r\n        return  webClient\r\n                .get()\r\n                .uri(url)\r\n                .header(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n                .header(HttpHeaders.AUTHORIZATION, token.tokenType() + StringUtils.SPACE + bearerToken)\r\n                .httpRequest(clientHttpRequest -&gt; {\r\n                    HttpClientRequest reactorRequest = clientHttpRequest.getNativeRequest();\r\n                    reactorRequest.responseTimeout(responseTimeout);\r\n                });\r\n```\r\nNo logs beyond this line&#39;s execution prints.\r\n\r\n logs from pod:\r\n```023-10-18T13:11:26.411Z  INFO 1 --- [or-http-epoll-3] c.z.r.controller.KYCDataControllerDummy  : Get kyc siphon api dummy called for customer id:: 49fc59a5-0545-4630-9bbf-77223f8839e8\r\n2023-10-18T13:11:26.412Z  INFO 1 --- [or-http-epoll-3] c.z.r.provider.KYCDetailsDataProvider    : Api fetch call init for KYC Data for customerId::49fc59a5-0545-4630-9bbf-77223f8839e8\r\n2023-10-18T13:11:26.412Z  INFO 1 --- [or-http-epoll-3] c.z.r.provider.KYCDetailsDataProvider    : timeout::PT5S\r\n2023-10-18T13:11:26.413Z  INFO 1 --- [or-http-epoll-3] c.z.r.controller.KYCDataControllerDummy  : Api response received kyc:: 49fc59a5-0545-4630-9bbf-77223f8839e8\r\n2023-10-18T13:11:26.490Z DEBUG 1 --- [or-http-epoll-3] o.s.w.r.f.client.ExchangeFunctions       : [42c4be51] HTTP GET kyc/api/v2/customers/49fc59a5-0545-4630-9bbf-77223f8839e8\r\n2023-10-18T13:11:30.576Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [230852aa-187] HTTP GET &quot;/risk-siphon/health&quot;\r\n2023-10-18T13:11:30.576Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [16d3cffe-188] HTTP GET &quot;/risk-siphon/health&quot;\r\n2023-10-18T13:11:30.577Z  INFO 1 --- [oundedElastic-1] c.z.r.service.ServiceHealthIndicator     : Calling main service health v1 controller for risk-siphon\r\n2023-10-18T13:11:30.577Z  INFO 1 --- [oundedElastic-5] c.z.r.service.ServiceHealthIndicator     : Calling main service health v1 controller for risk-siphon\r\n2023-10-18T13:11:30.579Z DEBUG 1 --- [ntLoopGroup-3-2] .s.w.r.r.m.a.ResponseEntityResultHandler : [16d3cffe-188] Using &#39;application/vnd.spring-boot.actuator.v3+json&#39; given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]\r\n2023-10-18T13:11:30.579Z DEBUG 1 --- [ntLoopGroup-3-2] .s.w.r.r.m.a.ResponseEntityResultHandler : [16d3cffe-188] 0..1 [org.springframework.boot.actuate.health.SystemHealth]\r\n2023-10-18T13:11:30.580Z DEBUG 1 --- [ntLoopGroup-3-2] org.springframework.web.HttpLogging      : [16d3cffe-188] Encoding [org.springframework.boot.actuate.health.SystemHealth@6605c4e2]\r\n2023-10-18T13:11:30.581Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [16d3cffe-188] Completed 200 OK\r\n202 \r\n```\r\n\r\nCan someone help in understanding this issue please ?","title":"Webflux restcontroller unable to make an external api call","body":"<p>I am using below code to test an external api call.</p>\n<p>Controller:</p>\n<pre><code>\n@RestController\n@RequestMapping(&quot;risk-siphon&quot;)\npublic class KYCDataControllerDummy extends BaseController {\n.....\n    @Autowired\n    KYCService service;\n......    \n    @GetMapping(value = &quot;/kycDummy/api2/{version}/{customerId}&quot;)\n    public Mono&lt;ResponseEntity&lt;String&gt;&gt; getKYCApiDetailsController(@PathVariable(&quot;customerId&quot;) String customerId,\n                                                                   @PathVariable(&quot;version&quot;) String version) {\n            logger.info(&quot;Get kyc siphon api dummy called for customer id:: &quot; + customerId);\n            Mono&lt;KYCDetailsDataProvider.KycApiResponse&gt; response = kycDetailsDataProvider.getKycDetails(customerId, version)\n                    .doOnNext(dbres -&gt; logger.info(&quot;Received api Details from MONO: {}&quot;, dbres));\n            logger.info(&quot;Api response received kyc:: &quot; + customerId);\n\n            return\n                    response.map(resp -&gt;\n                            ResponseEntity.ok(gson.toJson(resp))\n                    );\n    }\n\n}\n</code></pre>\n<p>Service:</p>\n<pre><code>    public Mono getKycDetails(String customerId, String version) {\n        logger.info(&quot;Api fetch call init for KYC Data for customerId::&quot; + customerId);\n        var responseTimeout = kycApiConfig.basic().timeout();\n        logger.info(&quot;timeout::&quot; + responseTimeout);\n\n        String uri = config.getApiBaseUrl() + (String.format(KYC_API_PATH, version, customerId));\n        return WebApiUtils.reactiveWebClientHTTPGet(uri, new HashMap(), responseTimeout, zestMoneyJWTProvider.getToken(), webClient)\n                .exchangeToMono(this::exchangeKYCGetApiResponse)\n                .transformDeferred(RetryOperator.of(this.defaultRetry));\n    }\n</code></pre>\n<p>ApiUtils:</p>\n<pre><code>    public static WebClient.RequestHeadersSpec&lt;?&gt; reactiveWebClientHTTPGet(String url, Map params,\n                                                                           Duration responseTimeout, ZestMoneyJWTService.InternalServicesResponse token, WebClient webClient) {\n        String bearerToken = token.accessToken();\n\n        return webClient\n                .get()\n                .uri(url)\n                .header(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .header(HttpHeaders.AUTHORIZATION, token.tokenType() + StringUtils.SPACE + bearerToken)\n                .httpRequest(clientHttpRequest -&gt; {\n                    HttpClientRequest reactorRequest = clientHttpRequest.getNativeRequest();\n                    reactorRequest.responseTimeout(responseTimeout);\n                });\n    }\n</code></pre>\n<p><strong>Issue</strong>\nThis code is expected to use reactive webclient and make api call to third party service. It runs fine on local and returns the external api response. Works fine in local docker as well. But when this is deployed to a EKS pod (test environment of release pipeline) it gets stuck and eventually throws a 504 gateway timeout error. While inspecting the logs from pod it seems like the thread is getting interrupted or some issue because of which the code is stuck at line</p>\n<pre><code>        return  webClient\n                .get()\n                .uri(url)\n                .header(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .header(HttpHeaders.AUTHORIZATION, token.tokenType() + StringUtils.SPACE + bearerToken)\n                .httpRequest(clientHttpRequest -&gt; {\n                    HttpClientRequest reactorRequest = clientHttpRequest.getNativeRequest();\n                    reactorRequest.responseTimeout(responseTimeout);\n                });\n</code></pre>\n<p>No logs beyond this line's execution prints.</p>\n<p>logs from pod:</p>\n<pre><code>2023-10-18T13:11:26.412Z  INFO 1 --- [or-http-epoll-3] c.z.r.provider.KYCDetailsDataProvider    : Api fetch call init for KYC Data for customerId::49fc59a5-0545-4630-9bbf-77223f8839e8\n2023-10-18T13:11:26.412Z  INFO 1 --- [or-http-epoll-3] c.z.r.provider.KYCDetailsDataProvider    : timeout::PT5S\n2023-10-18T13:11:26.413Z  INFO 1 --- [or-http-epoll-3] c.z.r.controller.KYCDataControllerDummy  : Api response received kyc:: 49fc59a5-0545-4630-9bbf-77223f8839e8\n2023-10-18T13:11:26.490Z DEBUG 1 --- [or-http-epoll-3] o.s.w.r.f.client.ExchangeFunctions       : [42c4be51] HTTP GET kyc/api/v2/customers/49fc59a5-0545-4630-9bbf-77223f8839e8\n2023-10-18T13:11:30.576Z DEBUG 1 --- [or-http-epoll-3] o.s.w.s.adapter.HttpWebHandlerAdapter    : [230852aa-187] HTTP GET &quot;/risk-siphon/health&quot;\n2023-10-18T13:11:30.576Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [16d3cffe-188] HTTP GET &quot;/risk-siphon/health&quot;\n2023-10-18T13:11:30.577Z  INFO 1 --- [oundedElastic-1] c.z.r.service.ServiceHealthIndicator     : Calling main service health v1 controller for risk-siphon\n2023-10-18T13:11:30.577Z  INFO 1 --- [oundedElastic-5] c.z.r.service.ServiceHealthIndicator     : Calling main service health v1 controller for risk-siphon\n2023-10-18T13:11:30.579Z DEBUG 1 --- [ntLoopGroup-3-2] .s.w.r.r.m.a.ResponseEntityResultHandler : [16d3cffe-188] Using 'application/vnd.spring-boot.actuator.v3+json' given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]\n2023-10-18T13:11:30.579Z DEBUG 1 --- [ntLoopGroup-3-2] .s.w.r.r.m.a.ResponseEntityResultHandler : [16d3cffe-188] 0..1 [org.springframework.boot.actuate.health.SystemHealth]\n2023-10-18T13:11:30.580Z DEBUG 1 --- [ntLoopGroup-3-2] org.springframework.web.HttpLogging      : [16d3cffe-188] Encoding [org.springframework.boot.actuate.health.SystemHealth@6605c4e2]\n2023-10-18T13:11:30.581Z DEBUG 1 --- [or-http-epoll-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [16d3cffe-188] Completed 200 OK\n202 \n</code></pre>\n<p>Can someone help in understanding this issue please ?</p>\n"},{"tags":["java","spring","junit","mockito","powermock"],"comments":[{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1696486037,"post_id":77234542,"comment_id":136159460,"body_markdown":"Go in the `surefire` folder or elsewhere to get the complete stacktrace of your failing test. We need to see what&#39;s follow the `java.lang.IllegalAccessError`: what its &quot;caused by&quot; is. The problem it faces. Often, going from Java 8 to 11 or 17 it&#39;s encountering modules no more available or needing to be made accessible again by some `--add-opens` or `--add-exports` options on the `java` command line.","body":"Go in the <code>surefire</code> folder or elsewhere to get the complete stacktrace of your failing test. We need to see what&#39;s follow the <code>java.lang.IllegalAccessError</code>: what its &quot;caused by&quot; is. The problem it faces. Often, going from Java 8 to 11 or 17 it&#39;s encountering modules no more available or needing to be made accessible again by some <code>--add-opens</code> or <code>--add-exports</code> options on the <code>java</code> command line."},{"owner":{"account_id":7838394,"reputation":151,"user_id":5925522,"display_name":"rell"},"score":0,"creation_date":1696486069,"post_id":77234542,"comment_id":136159464,"body_markdown":"maybe this can help you https://stackoverflow.com/questions/50456726/mockclassloader-cannot-access-jdk-internal-reflect-superclass-jdk-internal-refle","body":"maybe this can help you <a href=\"https://stackoverflow.com/questions/50456726/mockclassloader-cannot-access-jdk-internal-reflect-superclass-jdk-internal-refle\" title=\"mockclassloader cannot access jdk internal reflect superclass jdk internal refle\">stackoverflow.com/questions/50456726/&hellip;</a>"},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696486457,"post_id":77234542,"comment_id":136159513,"body_markdown":"This is the error traced from surefire-report directory\norg.objenesis.ObjenesisException: java.lang.reflect.InvocationTargetException\nCaused by: java.lang.reflect.InvocationTargetException\nCaused by: java.lang.IllegalAccessError: class jdk.internal.reflect.ConstructorAccessorImpl loaded by org.powermock.core.classloader.MockClassLoader @7e4204e2 cannot access jdk/internal/reflect superclass jdk.internal.reflect.MagicAccessorImpl","body":"This is the error traced from surefire-report directory org.objenesis.ObjenesisException: java.lang.reflect.InvocationTargetException Caused by: java.lang.reflect.InvocationTargetException Caused by: java.lang.IllegalAccessError: class jdk.internal.reflect.ConstructorAccessorImpl loaded by org.powermock.core.classloader.MockClassLoader @7e4204e2 cannot access jdk/internal/reflect superclass jdk.internal.reflect.MagicAccessorImpl"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1696489617,"post_id":77234542,"comment_id":136159981,"body_markdown":"Upgrade to a newer version of Mockito. Mockito 1.10.19 is positively ancient (the latest version is 5.2.0, note that the artifactId changed to mockito-core), and unlikely to work with recent versions of Java. The same probably goes for Powermock.","body":"Upgrade to a newer version of Mockito. Mockito 1.10.19 is positively ancient (the latest version is 5.2.0, note that the artifactId changed to mockito-core), and unlikely to work with recent versions of Java. The same probably goes for Powermock."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696913338,"post_id":77234542,"comment_id":136209945,"body_markdown":"@KuldeePChoudharY Can you share your codebase please for testing?","body":"@KuldeePChoudharY Can you share your codebase please for testing?"},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696917435,"post_id":77234542,"comment_id":136210299,"body_markdown":"&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;5.9.1&lt;/version&gt;\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\n\t\t&lt;/dependency&gt; &lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;5.6.0&lt;/version&gt;\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\n\t\t&lt;/dependency&gt; \t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.powermock&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;2.0.9&lt;/version&gt;\n\n\t\t\t\t\t&lt;groupId&gt;org.powermock&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;2.0.9&lt;/version&gt;","body":"&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt; \t\t\t&lt;version&gt;5.9.1&lt;/version&gt; \t\t\t&lt;scope&gt;test&lt;/scope&gt; \t\t&lt;/dependency&gt; &lt;dependency&gt; \t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt; \t\t\t&lt;version&gt;5.6.0&lt;/version&gt; \t\t\t&lt;scope&gt;test&lt;/scope&gt; \t\t&lt;/dependency&gt; \t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.powermock&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt; \t\t\t&lt;version&gt;2.0.9&lt;/version&gt;  \t\t\t\t\t&lt;groupId&gt;org.powermock&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt; \t\t\t&lt;version&gt;2.0.9&lt;/version&gt;"},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696917565,"post_id":77234542,"comment_id":136210322,"body_markdown":"@AnishB. Am i using the correct version for Java 17 and Spring 6.0.0 or need to change ?","body":"@AnishB. Am i using the correct version for Java 17 and Spring 6.0.0 or need to change ?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696917841,"post_id":77234542,"comment_id":136210360,"body_markdown":"@KuldeePChoudharY I guess I found the solution. Just adding now the answer.","body":"@KuldeePChoudharY I guess I found the solution. Just adding now the answer."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696918769,"post_id":77234542,"comment_id":136210467,"body_markdown":"@KuldeePChoudharY Your code is having tests in Junit 4 right? Why are you adding Junit 5 dependencies? Please remove that.","body":"@KuldeePChoudharY Your code is having tests in Junit 4 right? Why are you adding Junit 5 dependencies? Please remove that."}],"answers":[{"comments":[{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696918491,"post_id":77263297,"comment_id":136210435,"body_markdown":"@KuldeePChoudharY See if this helps.","body":"@KuldeePChoudharY See if this helps."},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696919083,"post_id":77263297,"comment_id":136210504,"body_markdown":"Let me try this configuration.","body":"Let me try this configuration."},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696919194,"post_id":77263297,"comment_id":136210525,"body_markdown":"Do i need any dependencies from below &lt;!--\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;1.10.19&lt;/version&gt;\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\n\t\t&lt;/dependency&gt;--&gt;\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.mockito/mockito-core --&gt;\n&lt;!--\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;5.6.0&lt;/version&gt;\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\n\t\t&lt;/dependency&gt;--&gt;","body":"Do i need any dependencies from below &lt;!--\t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;mockito-all&lt;/artifactId&gt; \t\t\t&lt;version&gt;1.10.19&lt;/version&gt; \t\t\t&lt;scope&gt;test&lt;/scope&gt; \t\t&lt;/dependency&gt;--&gt; \t\t&lt;!-- <a href=\"https://mvnrepository.com/artifact/org.mockito/mockito-core\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.mockito/mockito-core</a> --&gt; &lt;!--\t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt; \t\t\t&lt;version&gt;5.6.0&lt;/version&gt; \t\t\t&lt;scope&gt;test&lt;/scope&gt; \t\t&lt;/dependency&gt;--&gt;"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696919320,"post_id":77263297,"comment_id":136210545,"body_markdown":"@KuldeePChoudharY Take all the dependencies and plugin from the pom.xml that I have provided and add your spring dependency and test.","body":"@KuldeePChoudharY Take all the dependencies and plugin from the pom.xml that I have provided and add your spring dependency and test."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696919748,"post_id":77263297,"comment_id":136210600,"body_markdown":"@KuldeePChoudharY Don&#39;t add this mockito-all (1.10.19). I just tested now, it will throw error.","body":"@KuldeePChoudharY Don&#39;t add this mockito-all (1.10.19). I just tested now, it will throw error."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696919910,"post_id":77263297,"comment_id":136210619,"body_markdown":"@KuldeePChoudharY You will not need this mockito-all (1.10.19) in your pom.","body":"@KuldeePChoudharY You will not need this mockito-all (1.10.19) in your pom."},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696920393,"post_id":77263297,"comment_id":136210702,"body_markdown":"After removing &lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;5.6.0&lt;/version&gt;\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\n\t\t&lt;/dependency&gt; this dependencies I am executing only single test class by this command  mvn test -Dtest=XyzServiceImplTest","body":"After removing &lt;dependency&gt; \t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt; \t\t\t&lt;version&gt;5.6.0&lt;/version&gt; \t\t\t&lt;scope&gt;test&lt;/scope&gt; \t\t&lt;/dependency&gt; this dependencies I am executing only single test class by this command  mvn test -Dtest=XyzServiceImplTest"},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696920431,"post_id":77263297,"comment_id":136210708,"body_markdown":"Getting this error -&gt; \nXyzServiceImplTest.setUp:99 &#187; NoSuchMethod &#39;java.lang.Object org.apache.logging.log4j.util.LoaderUtil.newCheckedInstanceOfProperty(java.lang.String, java.lang.Class)&#39;","body":"Getting this error -&gt;  XyzServiceImplTest.setUp:99 &#187; NoSuchMethod &#39;java.lang.Object org.apache.logging.log4j.util.LoaderUtil.newCheckedInstanceO&zwnj;&#8203;fProperty(java.lang.&zwnj;&#8203;String, java.lang.Class)&#39;"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696921359,"post_id":77263297,"comment_id":136210872,"body_markdown":"@KuldeePChoudharY Can you do mvn clean install and try again","body":"@KuldeePChoudharY Can you do mvn clean install and try again"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696921372,"post_id":77263297,"comment_id":136210874,"body_markdown":"@KuldeePChoudharY can you provide a minimum reproducable codebase. I can quickly resolve it.","body":"@KuldeePChoudharY can you provide a minimum reproducable codebase. I can quickly resolve it."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696921506,"post_id":77263297,"comment_id":136210897,"body_markdown":"@KuldeePChoudharY I guess this error is generated from log4j. You have to add log4j latest dependency I guess.","body":"@KuldeePChoudharY I guess this error is generated from log4j. You have to add log4j latest dependency I guess."},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696921655,"post_id":77263297,"comment_id":136210922,"body_markdown":"Can you please share the test cases which you have wrote, I will run them in my env and try, if it works.","body":"Can you please share the test cases which you have wrote, I will run them in my env and try, if it works."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696921706,"post_id":77263297,"comment_id":136210929,"body_markdown":"@KuldeePChoudharY OK.","body":"@KuldeePChoudharY OK."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696921882,"post_id":77263297,"comment_id":136210964,"body_markdown":"@KuldeePChoudharY I have updated my answer with the code. Kindly look at it.","body":"@KuldeePChoudharY I have updated my answer with the code. Kindly look at it."},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696922101,"post_id":77263297,"comment_id":136211005,"body_markdown":"Kindly share the import statement too.","body":"Kindly share the import statement too."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696922164,"post_id":77263297,"comment_id":136211017,"body_markdown":"@KuldeePChoudharY Updated.","body":"@KuldeePChoudharY Updated."},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696922316,"post_id":77263297,"comment_id":136211052,"body_markdown":"import static org.mockito.Mockito.times; Cannot resolve method &#39;verifyStatic(Class&lt;Demo&gt;, VerificationMode)&#39;","body":"import static org.mockito.Mockito.times; Cannot resolve method &#39;verifyStatic(Class&lt;Demo&gt;, VerificationMode)&#39;"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696922508,"post_id":77263297,"comment_id":136211087,"body_markdown":"@KuldeePChoudharY Forgot to add that import. Updating now.","body":"@KuldeePChoudharY Forgot to add that import. Updating now."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696922541,"post_id":77263297,"comment_id":136211092,"body_markdown":"@KuldeePChoudharY Done. Check now.","body":"@KuldeePChoudharY Done. Check now."},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696922934,"post_id":77263297,"comment_id":136211161,"body_markdown":"No Luck. java: no suitable method found for verifyStatic(java.lang.Class&lt;com.visa.vrm.Demo&gt;,org.mockito.verification.VerificationMode)\n    method org.powermock.api.mockito.PowerMockito.verifyStatic() is not applicable\n      (actual and formal argument lists differ in length)\n    method org.powermock.api.mockito.PowerMockito.verifyStatic(org.mockito.verification.VerificationMode) is not applicable\n      (actual and formal argument lists differ in length)","body":"No Luck. java: no suitable method found for verifyStatic(java.lang.Class&lt;com.visa.vrm.Demo&gt;,org.mockito.&zwnj;&#8203;verification.Verific&zwnj;&#8203;ationMode)     method org.powermock.api.mockito.PowerMockito.verifyStatic() is not applicable       (actual and formal argument lists differ in length)     method org.powermock.api.mockito.PowerMockito.verifyStatic(org.mock&zwnj;&#8203;ito.verification.Ver&zwnj;&#8203;ificationMode) is not applicable       (actual and formal argument lists differ in length)"},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696922969,"post_id":77263297,"comment_id":136211169,"body_markdown":"Getting this error only - &gt; Cannot resolve method &#39;verifyStatic(Class&lt;Demo&gt;, VerificationMode)&#39;","body":"Getting this error only - &gt; Cannot resolve method &#39;verifyStatic(Class&lt;Demo&gt;, VerificationMode)&#39;"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696923332,"post_id":77263297,"comment_id":136211229,"body_markdown":"@KuldeePChoudharY Did you add this -&gt;. import static org.mockito.Mockito.times; ?","body":"@KuldeePChoudharY Did you add this -&gt;. import static org.mockito.Mockito.times; ?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":1,"creation_date":1696923676,"post_id":77263297,"comment_id":136211286,"body_markdown":"@KuldeePChoudharY This is my repository try it on the local : https://github.com/anishb266/demo-2-1","body":"@KuldeePChoudharY This is my repository try it on the local : <a href=\"https://github.com/anishb266/demo-2-1\" rel=\"nofollow noreferrer\">github.com/anishb266/demo-2-1</a>"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696940642,"post_id":77263297,"comment_id":136214393,"body_markdown":"@KuldeePChoudharY Is it working now?","body":"@KuldeePChoudharY Is it working now?"},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1696999058,"post_id":77263297,"comment_id":136222653,"body_markdown":"Your code is working without any issue, but same configuration didn&#39;t work in my code base. I will post the errors today","body":"Your code is working without any issue, but same configuration didn&#39;t work in my code base. I will post the errors today"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696999356,"post_id":77263297,"comment_id":136222667,"body_markdown":"@KuldeePChoudharY Great :) Post the error. But if you share a minimum reproducable codebase to fix. You can update my repo with the code having error. I will take a pull and have a look and fix it if possible.","body":"@KuldeePChoudharY Great :) Post the error. But if you share a minimum reproducable codebase to fix. You can update my repo with the code having error. I will take a pull and have a look and fix it if possible."},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":0,"creation_date":1697019757,"post_id":77263297,"comment_id":136225914,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255587/discussion-between-kuldeep-choudhary-and-anish-b).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255587/discussion-between-kuldeep-choudhary-and-anish-b\">continue this discussion in chat</a>."},{"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"score":1,"creation_date":1697036680,"post_id":77263297,"comment_id":136229521,"body_markdown":"Few errors I have from my project only so marking question as a acceptable. Thanks a lot","body":"Few errors I have from my project only so marking question as a acceptable. Thanks a lot"}],"tags":[],"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"comment_count":28,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697636028,"creation_date":1696918463,"answer_id":77263297,"question_id":77234542,"body_markdown":"You need to upgrade/add the following dependencies for **PowerMock** &amp; **Mockito** to support **JDK 17**:\r\n\r\n- Newer version of `powermock-module-junit4` needs to be added. Update `powermock-module-junit4` from `1.6.6` to `2.0.9` (which is the latest version at the time of writing the answer).\r\n- Newer version of `powermock-api-mockito` needs to be added. Update `powermock-api-mockito (1.6.6)` to `powermock-api-mockito2 (2.0.9)` (which is the latest version at the time of writing the answer).\r\n-  Newer version of `javassist` needs to be added. Update `javassist` version to the latest version `(3.29.2-GA)` (at the time of writing the answer).\r\n\r\n**Note:** You might face this error while running the tests on JDK 17:\r\n\r\n    Unable to make protected native java.lang.Object java.lang.Object.clone() throws java.lang.CloneNotSupportedException accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module\r\n\r\nTo avoid this, you will need to tell maven by adding this `--add-opens java.base/java.lang=ALL-UNNAMED` via `maven-surefire-plugin` when running this.\r\n\r\n**Another point to be noted:** You don&#39;t need to add Mockito dependency separately. `powermock-api-mockito2` comes with the `mockito-core` dependency.\r\n\r\n\r\n**pom.xml**:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;demo-2&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;demo-2&lt;/name&gt;\r\n        &lt;description&gt;Sample&lt;/description&gt;\r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;4.13.2&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n                &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0.9&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n                &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0.9&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n                &lt;version&gt;3.29.2-GA&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1.2&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;argLine&gt;\r\n                            --add-opens java.base/java.lang=ALL-UNNAMED\r\n                        &lt;/argLine&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nThis should work. I have tested on my local, it&#39;s working.\r\n\r\nSample codebase example for testing [here][1].\r\n\r\n\r\n  [1]: https://github.com/anishb266/demo-2-1","title":"Migration from Java 8 to Java 17 And Spring 6 JUnit4 failing due to version mismatch","body":"<p>You need to upgrade/add the following dependencies for <strong>PowerMock</strong> &amp; <strong>Mockito</strong> to support <strong>JDK 17</strong>:</p>\n<ul>\n<li>Newer version of <code>powermock-module-junit4</code> needs to be added. Update <code>powermock-module-junit4</code> from <code>1.6.6</code> to <code>2.0.9</code> (which is the latest version at the time of writing the answer).</li>\n<li>Newer version of <code>powermock-api-mockito</code> needs to be added. Update <code>powermock-api-mockito (1.6.6)</code> to <code>powermock-api-mockito2 (2.0.9)</code> (which is the latest version at the time of writing the answer).</li>\n<li>Newer version of <code>javassist</code> needs to be added. Update <code>javassist</code> version to the latest version <code>(3.29.2-GA)</code> (at the time of writing the answer).</li>\n</ul>\n<p><strong>Note:</strong> You might face this error while running the tests on JDK 17:</p>\n<pre><code>Unable to make protected native java.lang.Object java.lang.Object.clone() throws java.lang.CloneNotSupportedException accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module\n</code></pre>\n<p>To avoid this, you will need to tell maven by adding this <code>--add-opens java.base/java.lang=ALL-UNNAMED</code> via <code>maven-surefire-plugin</code> when running this.</p>\n<p><strong>Another point to be noted:</strong> You don't need to add Mockito dependency separately. <code>powermock-api-mockito2</code> comes with the <code>mockito-core</code> dependency.</p>\n<p><strong>pom.xml</strong>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo-2&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo-2&lt;/name&gt;\n    &lt;description&gt;Sample&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\n            &lt;version&gt;2.0.9&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n            &lt;version&gt;2.0.9&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n            &lt;version&gt;3.29.2-GA&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;argLine&gt;\n                        --add-opens java.base/java.lang=ALL-UNNAMED\n                    &lt;/argLine&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>This should work. I have tested on my local, it's working.</p>\n<p>Sample codebase example for testing <a href=\"https://github.com/anishb266/demo-2-1\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":5004770,"reputation":418,"user_id":4814658,"accept_rate":75,"display_name":"KuldeeP ChoudharY"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":699,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77263297,"answer_count":1,"score":2,"last_activity_date":1697636028,"creation_date":1696485395,"question_id":77234542,"body_markdown":"I&#39;m migrating an enterprise product. The things I have migrated are as follows: \r\n\r\n- JDK 1.8 to JDK 17\r\n\r\n- Spring 5.2.2.RELEASE to Spring 6.0.0 \r\n\r\nNow, in the process of migration, some tests have started to fail.\r\n\r\n \r\nI have the below dependencies which are in older versions. I have tried to upgrade the versions but it&#39;s somehow not working. \r\n\r\nCan someone please advise on which version needs to be there to resolve the test cases failures?\r\n\r\n**pom.xml**:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${junit.version}&lt;/version&gt;\r\n    \t&lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.10.19&lt;/version&gt;\r\n    \t&lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;powermock-api-mockito&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.6.6&lt;/version&gt;\r\n    \t&lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.6.6&lt;/version&gt;\r\n    \t&lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n**Test Failure Log:**\r\n\r\n    ClassATest.initializationError &#187; Objenesis java.lang...\r\n    ClassBTest.initializationError &#187; Objenesis java.lang.refl...\r\n    \r\n    Running com.util.SupportMonitoringUtilTest\r\n    Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0 sec &lt;&lt;&lt; FAILURE! - in com.util.SupportMonitoringUtilTest\r\n    initializationError(com.util.SupportMonitoringUtilTest)  Time elapsed: 0 sec  &lt;&lt;&lt; ERROR!\r\n    org.objenesis.ObjenesisException: java.lang.reflect.InvocationTargetException\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    Caused by: java.lang.IllegalAccessError: class jdk.internal.reflect.ConstructorAccessorImpl loaded by org.powermock.core.classloader.MockClassLoader @752573df cannot access jdk/internal/reflect superclass jdk.internal.reflect.MagicAccessorImpl\r\n\r\n","title":"Migration from Java 8 to Java 17 And Spring 6 JUnit4 failing due to version mismatch","body":"<p>I'm migrating an enterprise product. The things I have migrated are as follows:</p>\n<ul>\n<li><p>JDK 1.8 to JDK 17</p>\n</li>\n<li><p>Spring 5.2.2.RELEASE to Spring 6.0.0</p>\n</li>\n</ul>\n<p>Now, in the process of migration, some tests have started to fail.</p>\n<p>I have the below dependencies which are in older versions. I have tried to upgrade the versions but it's somehow not working.</p>\n<p>Can someone please advise on which version needs to be there to resolve the test cases failures?</p>\n<p><strong>pom.xml</strong>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;junit&lt;/groupId&gt;\n    &lt;artifactId&gt;junit&lt;/artifactId&gt;\n    &lt;version&gt;${junit.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n    &lt;version&gt;1.10.19&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n    &lt;artifactId&gt;powermock-api-mockito&lt;/artifactId&gt;\n    &lt;version&gt;1.6.6&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n    &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n    &lt;version&gt;1.6.6&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Test Failure Log:</strong></p>\n<pre><code>ClassATest.initializationError » Objenesis java.lang...\nClassBTest.initializationError » Objenesis java.lang.refl...\n\nRunning com.util.SupportMonitoringUtilTest\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0 sec &lt;&lt;&lt; FAILURE! - in com.util.SupportMonitoringUtilTest\ninitializationError(com.util.SupportMonitoringUtilTest)  Time elapsed: 0 sec  &lt;&lt;&lt; ERROR!\norg.objenesis.ObjenesisException: java.lang.reflect.InvocationTargetException\nCaused by: java.lang.reflect.InvocationTargetException\nCaused by: java.lang.IllegalAccessError: class jdk.internal.reflect.ConstructorAccessorImpl loaded by org.powermock.core.classloader.MockClassLoader @752573df cannot access jdk/internal/reflect superclass jdk.internal.reflect.MagicAccessorImpl\n</code></pre>\n"},{"tags":["java","delimiter"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1697634856,"post_id":77316628,"comment_id":136304527,"body_markdown":"Hello. Please don&#39;t post text/code as image/link ([more info](https://meta.stackoverflow.com/a/285557)) but as formatted text. Use [edit] option to correct your post.","body":"Hello. Please don&#39;t post text/code as image/link (<a href=\"https://meta.stackoverflow.com/a/285557\">more info</a>) but as formatted text. Use <a href=\"https://stackoverflow.com/posts/77316628/edit\">edit</a> option to correct your post."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1697635048,"post_id":77316628,"comment_id":136304564,"body_markdown":"Related: [Difference between System.getProperty(&quot;line.separator&quot;); and &quot;\\n&quot;?](https://stackoverflow.com/q/36796136), [How do I get a platform-independent new line character?](https://stackoverflow.com/q/207947)","body":"Related: <a href=\"https://stackoverflow.com/q/36796136\">Difference between System.getProperty(&quot;line.separator&quot;); and &quot;\\n&quot;?</a>, <a href=\"https://stackoverflow.com/q/207947\">How do I get a platform-independent new line character?</a>"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697635794,"creation_date":1697635794,"answer_id":77316776,"question_id":77316628,"body_markdown":"From the [JavaDocs of `Scanner`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Scanner.html#default-delimiter):\r\n\r\n&gt; The default whitespace delimiter used by a scanner is as recognized by `Character.isWhitespace()`.\r\n\r\nThis is the reason why your `sc.next()` without the expicitly set delimiter returns each word extra instead of the whole line. `Character.isWhitespace` recognizes also other characters than newline as whitespace, it&#39;s [documented](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#isWhitespace(char)) well. ","title":"Using useDelimiter to scan multiple words in a line","body":"<p>From the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Scanner.html#default-delimiter\" rel=\"nofollow noreferrer\">JavaDocs of <code>Scanner</code></a>:</p>\n<blockquote>\n<p>The default whitespace delimiter used by a scanner is as recognized by <code>Character.isWhitespace()</code>.</p>\n</blockquote>\n<p>This is the reason why your <code>sc.next()</code> without the expicitly set delimiter returns each word extra instead of the whole line. <code>Character.isWhitespace</code> recognizes also other characters than newline as whitespace, it's <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#isWhitespace(char)\" rel=\"nofollow noreferrer\">documented</a> well.</p>\n"}],"owner":{"account_id":15038798,"reputation":80,"user_id":10854190,"display_name":"Hanu babbar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697635794,"creation_date":1697634591,"question_id":77316628,"body_markdown":"I am currently learning Java(beginner) and while using Scanner, specifically .next() property, I was reading an article that used this `sc.useDelimiter(System.getProperty(&quot;line.separator&quot;));`\r\nto scan multiple strings(words) in a single line separated by a space, I dont really get what the `System.getProperty(&quot;line.separator&quot;)` do(the input given was for example &quot;Hanu babbar&quot;,  here without that line it only printed out &quot;Hanu&quot; but with that it printed out whole &quot;Hanu Babbar&quot;). I read about useDelimiter and how its used to separate out content from a string but I dont really know the rest so would appreciate the help.\r\nHere&#39;s the code snippet from the article\r\n```java\r\nScanner sc = new Scanner(System.in);\r\nsc.useDelimiter(System.getProperty(&quot;line.separator&quot;));\r\nSystem.out.println(&quot;Please enter your name&quot;);\r\nString name = sc.next();\r\nSystem.out.println(&quot;Hello &quot; + name);\r\nsc.close();\r\n```","title":"Using useDelimiter to scan multiple words in a line","body":"<p>I am currently learning Java(beginner) and while using Scanner, specifically .next() property, I was reading an article that used this <code>sc.useDelimiter(System.getProperty(&quot;line.separator&quot;));</code>\nto scan multiple strings(words) in a single line separated by a space, I dont really get what the <code>System.getProperty(&quot;line.separator&quot;)</code> do(the input given was for example &quot;Hanu babbar&quot;,  here without that line it only printed out &quot;Hanu&quot; but with that it printed out whole &quot;Hanu Babbar&quot;). I read about useDelimiter and how its used to separate out content from a string but I dont really know the rest so would appreciate the help.\nHere's the code snippet from the article</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in);\nsc.useDelimiter(System.getProperty(&quot;line.separator&quot;));\nSystem.out.println(&quot;Please enter your name&quot;);\nString name = sc.next();\nSystem.out.println(&quot;Hello &quot; + name);\nsc.close();\n</code></pre>\n"},{"tags":["java","maven"],"owner":{"account_id":15777128,"reputation":1,"user_id":11384659,"display_name":"Sayem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697635502,"creation_date":1697635502,"question_id":77316742,"body_markdown":"My Framework stored in a server, there are two workspaces. I was working on my workspace and my framework I won&#39;t use Maven. Yesterday, I tried to convert into Maven project. Right clicked on project and choose to convert to maven project. Here happened,  No pom.xml file created and showing error, furthermore, the scripts of the framework disappear and copied the packages from 2nd workspace, workspace2. In case of this critical situation how can I get back my workspace and script as was it is Java Project? Please help me ..  ","title":"Selenium script disappear after converting Java to Maven project","body":"<p>My Framework stored in a server, there are two workspaces. I was working on my workspace and my framework I won't use Maven. Yesterday, I tried to convert into Maven project. Right clicked on project and choose to convert to maven project. Here happened,  No pom.xml file created and showing error, furthermore, the scripts of the framework disappear and copied the packages from 2nd workspace, workspace2. In case of this critical situation how can I get back my workspace and script as was it is Java Project? Please help me ..</p>\n"},{"tags":["java","spring-boot","microservices","apache-tika","file-extension"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1697627280,"post_id":77313553,"comment_id":136302888,"body_markdown":"How are you calling Apache Tika to do the detection? And why aren&#39;t you asking Tika for the file extension yourself?","body":"How are you calling Apache Tika to do the detection? And why aren&#39;t you asking Tika for the file extension yourself?"},{"owner":{"account_id":29276486,"reputation":1,"user_id":22430112,"display_name":"Esphi01"},"score":0,"creation_date":1697636790,"post_id":77313553,"comment_id":136304956,"body_markdown":"public final class FileTypeUtils {\n\n\tprivate static final Logger LOGGER = LoggerFactory.getLogger(FileTypeUtils.class);\n\t\n\tprivate FileTypeUtils() {\n\t}\n\n\tpublic static String getFileType(File inputFile) throws Exception {\n\n\t\tfinal Tika tika = new Tika();\n\t\ttry {\n\t\t\treturn tika.detect(inputFile);\n\t\t} catch (IOException e) {\n\t\t\tLOGGER.error(&quot;*** getFileTypeViaTika2 - Error message: &quot; + e.getMessage());\n\t\t\tLOGGER.error(&quot;*** getFileTypeViaTika2 - Error trace&quot;+e);\n\t\t\tthrow new Exception(&quot;File type unknown&quot;);\n\t\t}\n\t\t\n\t}","body":"public final class FileTypeUtils {  \tprivate static final Logger LOGGER = LoggerFactory.getLogger(FileTypeUtils.class); \t \tprivate FileTypeUtils() { \t}  \tpublic static String getFileType(File inputFile) throws Exception {  \t\tfinal Tika tika = new Tika(); \t\ttry { \t\t\treturn tika.detect(inputFile); \t\t} catch (IOException e) { \t\t\tLOGGER.error(&quot;*** getFileTypeViaTika2 - Error message: &quot; + e.getMessage()); \t\t\tLOGGER.error(&quot;*** getFileTypeViaTika2 - Error trace&quot;+e); \t\t\tthrow new Exception(&quot;File type unknown&quot;); \t\t} \t\t \t}"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1697644087,"post_id":77313553,"comment_id":136306678,"body_markdown":"If you want container-aware detection (as you&#39;d need to detect the OOXML subtype) then you need to include the Tika office parsers jar as well","body":"If you want container-aware detection (as you&#39;d need to detect the OOXML subtype) then you need to include the Tika office parsers jar as well"},{"owner":{"account_id":29276486,"reputation":1,"user_id":22430112,"display_name":"Esphi01"},"score":0,"creation_date":1697789377,"post_id":77313553,"comment_id":136326376,"body_markdown":"Thanks a lot; I am now able to send more file types. I added the parsers as you advised","body":"Thanks a lot; I am now able to send more file types. I added the parsers as you advised"}],"owner":{"account_id":29276486,"reputation":1,"user_id":22430112,"display_name":"Esphi01"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697635316,"creation_date":1697604687,"question_id":77313553,"body_markdown":"I am using tika to detect media file types (extensions), but whenever I send a docx, doc, xls, they are detected as &quot;application/x-tika-ooxml&quot;. here is my method for determining fileExtensions\r\n\r\n\r\n```\r\nprivate static String determineFileExtension(String mimeType) {\r\n\t\tString fileExtension = &quot;&quot;;\r\n\t\tif (mimeType != null) {\r\n\t\t\tif (mimeType.equalsIgnoreCase(&quot;application/pdf&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.pdf&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;application/vnd.ms-excel&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.xls&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.xlsx&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;image/jpeg&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.jpg&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;video/mpeg&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.mpeg&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;video/mp4&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.mp4&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;application/x-tika-ooxml&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.xlsx&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;application/x-tika-msoffice&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.xls&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;text/plain&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.txt&quot;;\r\n\t\t\t} else if (mimeType\r\n\t\t\t\t\t.equalsIgnoreCase(&quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.docx&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;application/vnd.ms-powerpoint&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.ppt&quot;;\r\n\t\t\t} else if (mimeType\r\n\t\t\t\t\t.equalsIgnoreCase(&quot;application/vnd.openxmlformats-officedocument.presentationml.presentation&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.pptx&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;video/avi&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.avi&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;application/x-zip-compressed&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.zip&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;image/png&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.png&quot;;\r\n\t\t\t} else if (mimeType.equalsIgnoreCase(&quot;application/msword&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.doc&quot;;\r\n\t\t\t} else {\r\n\t\t\t\tLOGGER.error(&quot;Unknown mimeType  &quot; + mimeType);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn fileExtension;\r\n\t}\r\n```\r\n \r\n\r\nI tried changing the file extension for &quot;application/x-tika-ooxml&quot; \r\n\r\n```\r\n} else if (mimeType.equalsIgnoreCase(&quot;application/x-tika-ooxml&quot;)) {\r\n\t\t\t\tfileExtension = &quot;.xlsx&quot;;\r\n```\r\n\r\nto docx, doc, however, I still got the same results\r\n\r\n\r\nI am using this dependency\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tika-core&lt;/artifactId&gt;\r\n    &lt;version&gt;2.9.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nother file formats, such as .pdf .xml .mp4 .jpeg, .jpg .mp3 are working\r\n","title":"sending a docx but detected as application/x-tika-ooxml instead of &quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;","body":"<p>I am using tika to detect media file types (extensions), but whenever I send a docx, doc, xls, they are detected as &quot;application/x-tika-ooxml&quot;. here is my method for determining fileExtensions</p>\n<pre><code>private static String determineFileExtension(String mimeType) {\n        String fileExtension = &quot;&quot;;\n        if (mimeType != null) {\n            if (mimeType.equalsIgnoreCase(&quot;application/pdf&quot;)) {\n                fileExtension = &quot;.pdf&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;application/vnd.ms-excel&quot;)) {\n                fileExtension = &quot;.xls&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;)) {\n                fileExtension = &quot;.xlsx&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;image/jpeg&quot;)) {\n                fileExtension = &quot;.jpg&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;video/mpeg&quot;)) {\n                fileExtension = &quot;.mpeg&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;video/mp4&quot;)) {\n                fileExtension = &quot;.mp4&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;application/x-tika-ooxml&quot;)) {\n                fileExtension = &quot;.xlsx&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;application/x-tika-msoffice&quot;)) {\n                fileExtension = &quot;.xls&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;text/plain&quot;)) {\n                fileExtension = &quot;.txt&quot;;\n            } else if (mimeType\n                    .equalsIgnoreCase(&quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;)) {\n                fileExtension = &quot;.docx&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;application/vnd.ms-powerpoint&quot;)) {\n                fileExtension = &quot;.ppt&quot;;\n            } else if (mimeType\n                    .equalsIgnoreCase(&quot;application/vnd.openxmlformats-officedocument.presentationml.presentation&quot;)) {\n                fileExtension = &quot;.pptx&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;video/avi&quot;)) {\n                fileExtension = &quot;.avi&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;application/x-zip-compressed&quot;)) {\n                fileExtension = &quot;.zip&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;image/png&quot;)) {\n                fileExtension = &quot;.png&quot;;\n            } else if (mimeType.equalsIgnoreCase(&quot;application/msword&quot;)) {\n                fileExtension = &quot;.doc&quot;;\n            } else {\n                LOGGER.error(&quot;Unknown mimeType  &quot; + mimeType);\n            }\n        }\n        return fileExtension;\n    }\n</code></pre>\n<p>I tried changing the file extension for &quot;application/x-tika-ooxml&quot;</p>\n<pre><code>} else if (mimeType.equalsIgnoreCase(&quot;application/x-tika-ooxml&quot;)) {\n                fileExtension = &quot;.xlsx&quot;;\n</code></pre>\n<p>to docx, doc, however, I still got the same results</p>\n<p>I am using this dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n    &lt;artifactId&gt;tika-core&lt;/artifactId&gt;\n    &lt;version&gt;2.9.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>other file formats, such as .pdf .xml .mp4 .jpeg, .jpg .mp3 are working</p>\n"},{"tags":["java","xml","sonarqube","owasp"],"comments":[{"owner":{"account_id":295440,"reputation":1210,"user_id":599851,"accept_rate":58,"display_name":"iCrus"},"score":0,"creation_date":1561567777,"post_id":56777287,"comment_id":100110519,"body_markdown":"Have you had a look at : https://stackoverflow.com/questions/40649152/how-to-prevent-xxe-attack\n\nand this rule from Sonar: https://sonarcloud.io/organizations/alexlittle-github/rules?open=squid%3AS2755&amp;rule_key=squid%3AS2755","body":"Have you had a look at : <a href=\"https://stackoverflow.com/questions/40649152/how-to-prevent-xxe-attack\" title=\"how to prevent xxe attack\">stackoverflow.com/questions/40649152/how-to-prevent-xxe-atta&zwnj;&#8203;ck</a>  and this rule from Sonar: <a href=\"https://sonarcloud.io/organizations/alexlittle-github/rules?open=squid%3AS2755&amp;rule_key=squid%3AS2755\" rel=\"nofollow noreferrer\">sonarcloud.io/organizations/alexlittle-github/&hellip;</a>"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":2,"creation_date":1561569521,"post_id":56777287,"comment_id":100111279,"body_markdown":"Your code looks fine to me, perhaps the checker is just being stupid. Also, what people so often forget is that the XXE vulnerability only applies if you are processing untrusted XML. If you know where the XML came from and trust the code that generated it, XXE is not an issue. Unfortunately though the security people don&#39;t always understand that subtlety.","body":"Your code looks fine to me, perhaps the checker is just being stupid. Also, what people so often forget is that the XXE vulnerability only applies if you are processing untrusted XML. If you know where the XML came from and trust the code that generated it, XXE is not an issue. Unfortunately though the security people don&#39;t always understand that subtlety."},{"owner":{"account_id":16210013,"reputation":161,"user_id":11704276,"display_name":"cheetoo"},"score":0,"creation_date":1561570873,"post_id":56777287,"comment_id":100111927,"body_markdown":"Hi iCrus. I have tried all those possibilities from sonarqube but still I didn&#39;t fixed yet","body":"Hi iCrus. I have tried all those possibilities from sonarqube but still I didn&#39;t fixed yet"}],"answers":[{"tags":[],"owner":{"account_id":3246859,"reputation":1352,"user_id":2738155,"accept_rate":88,"display_name":"chomp"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1697634275,"creation_date":1579013328,"answer_id":59736162,"question_id":56777287,"body_markdown":"I end up adding all of the following attributes in order to avoid Sonar complaining about this vulnerability:\r\n```java\r\nDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\r\n//REDHAT\r\n//https://www.blackhat.com/docs/us-15/materials/us-15-Wang-FileCry-The-New-Age-Of-XXE-java-wp.pdf\r\nfactory.setAttribute(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\nfactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\r\nfactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_SCHEMA, &quot;&quot;);\r\n\r\n//OWASP\r\n//https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html\r\nfactory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\r\nfactory.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\r\nfactory.setFeature(&quot;http://xml.org/sax/features/external-parameter-entities&quot;, false);\r\n// Disable external DTDs as well\r\nfactory.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false);\r\n// and these as well, per Timothy Morgan&#39;s 2014 paper: &quot;XML Schema, DTD, and Entity Attacks&quot;\r\nfactory.setXIncludeAware(false);\r\nfactory.setExpandEntityReferences(false);\r\n\r\nDocumentBuilder builder = factory.newDocumentBuilder();\r\n```","title":"how to fix &#39;Disable XML external entity (XXE) processing&#39; vulnerabilities in java","body":"<p>I end up adding all of the following attributes in order to avoid Sonar complaining about this vulnerability:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n\n//REDHAT\n//https://www.blackhat.com/docs/us-15/materials/us-15-Wang-FileCry-The-New-Age-Of-XXE-java-wp.pdf\nfactory.setAttribute(XMLConstants.FEATURE_SECURE_PROCESSING, true);\nfactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\nfactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_SCHEMA, &quot;&quot;);\n\n//OWASP\n//https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html\nfactory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\nfactory.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\nfactory.setFeature(&quot;http://xml.org/sax/features/external-parameter-entities&quot;, false);\n// Disable external DTDs as well\nfactory.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false);\n// and these as well, per Timothy Morgan's 2014 paper: &quot;XML Schema, DTD, and Entity Attacks&quot;\nfactory.setXIncludeAware(false);\nfactory.setExpandEntityReferences(false);\n\nDocumentBuilder builder = factory.newDocumentBuilder();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9853416,"reputation":103,"user_id":7298746,"display_name":"Michał S"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1582881150,"creation_date":1582881150,"answer_id":60448479,"question_id":56777287,"body_markdown":"It should be enough to just set this two properties:\r\n\r\n    factory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\r\n\tfactory.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);","title":"how to fix &#39;Disable XML external entity (XXE) processing&#39; vulnerabilities in java","body":"<p>It should be enough to just set this two properties:</p>\n\n<pre><code>factory.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);\nfactory.setFeature(\"http://xml.org/sax/features/external-general-entities\", false);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":423966,"reputation":2299,"user_id":803687,"accept_rate":91,"display_name":"Anand"},"score":1,"creation_date":1594302186,"post_id":61081042,"comment_id":111083376,"body_markdown":"Don&#39;t see the method newDefaultInstance() on javax.xml.parsers.DocumentBuilderFactory","body":"Don&#39;t see the method newDefaultInstance() on javax.xml.parsers.DocumentBuilderFactory"},{"owner":{"account_id":2464526,"reputation":1549,"user_id":2147927,"accept_rate":100,"display_name":"Line"},"score":0,"creation_date":1594380763,"post_id":61081042,"comment_id":111112935,"body_markdown":"@Anand it was introduced in Java 9.","body":"@Anand it was introduced in Java 9."},{"owner":{"account_id":2443099,"reputation":9128,"user_id":2131074,"accept_rate":75,"display_name":"GPI"},"score":3,"creation_date":1610531759,"post_id":61081042,"comment_id":116160998,"body_markdown":"With no additionnal information, this sounds more like a way to defeat Sonar&#39;s check (e.g. it does not know about this method, so it does not mark it), and not to solve the underlying vulnerability. Basically, it looks like you went and did the just same, but  behind sonar&#39;s back. (Once more, without additionnal information).","body":"With no additionnal information, this sounds more like a way to defeat Sonar&#39;s check (e.g. it does not know about this method, so it does not mark it), and not to solve the underlying vulnerability. Basically, it looks like you went and did the just same, but  behind sonar&#39;s back. (Once more, without additionnal information)."},{"owner":{"account_id":2464526,"reputation":1549,"user_id":2147927,"accept_rate":100,"display_name":"Line"},"score":0,"creation_date":1610626466,"post_id":61081042,"comment_id":116195032,"body_markdown":"@GPI that may be true, I haven&#39;t investigate it. If anyone knows the reason behind such behaviour, please feel free to edit the answer adding it","body":"@GPI that may be true, I haven&#39;t investigate it. If anyone knows the reason behind such behaviour, please feel free to edit the answer adding it"},{"owner":{"account_id":5388380,"reputation":500,"user_id":4291645,"accept_rate":40,"display_name":"vineeth sivan"},"score":0,"creation_date":1676377322,"post_id":61081042,"comment_id":133121022,"body_markdown":"This solution works with &#39;XMLInputFactory&#39;. Along with this we need to add the property xmlInputFactory.setProperty(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);","body":"This solution works with &#39;XMLInputFactory&#39;. Along with this we need to add the property xmlInputFactory.setProperty(XMLConstants.ACCESS_EXTERNAL_DTD&zwnj;&#8203;, &quot;&quot;);"}],"tags":[],"owner":{"account_id":2464526,"reputation":1549,"user_id":2147927,"accept_rate":100,"display_name":"Line"},"comment_count":5,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1594380802,"creation_date":1586265819,"answer_id":61081042,"question_id":56777287,"body_markdown":"*Java 9+ solution:*\r\n\r\nFor me changing `DocumentBuilderFactory.newInstance()` to `DocumentBuilderFactory.newDefaultInstance()` was enough to red rid of this warning.","title":"how to fix &#39;Disable XML external entity (XXE) processing&#39; vulnerabilities in java","body":"<p><em>Java 9+ solution:</em></p>\n<p>For me changing <code>DocumentBuilderFactory.newInstance()</code> to <code>DocumentBuilderFactory.newDefaultInstance()</code> was enough to red rid of this warning.</p>\n"},{"tags":[],"owner":{"account_id":9276995,"reputation":57,"user_id":6889375,"display_name":"Theodore"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610539284,"creation_date":1610530423,"answer_id":65699126,"question_id":56777287,"body_markdown":"I have fixed this issue by adding the below code snippet : \r\n```\r\nsaxParserFactory = SAXParserFactory.newInstance();\r\nsaxParserFactory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\r\nsaxParserFactory.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\r\nsaxParserFactory.setFeature(&quot;http://xml.org/sax/features/external-parameter-entities&quot;, false);    \r\nsaxParserFactory.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false);\r\nsaxParserFactory.setXIncludeAware(false);\r\n```\r\n","title":"how to fix &#39;Disable XML external entity (XXE) processing&#39; vulnerabilities in java","body":"<p>I have fixed this issue by adding the below code snippet :</p>\n<pre><code>saxParserFactory = SAXParserFactory.newInstance();\nsaxParserFactory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\nsaxParserFactory.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\nsaxParserFactory.setFeature(&quot;http://xml.org/sax/features/external-parameter-entities&quot;, false);    \nsaxParserFactory.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false);\nsaxParserFactory.setXIncludeAware(false);\n</code></pre>\n"}],"owner":{"account_id":16210013,"reputation":161,"user_id":11704276,"display_name":"cheetoo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36277,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":4,"score":16,"last_activity_date":1697634275,"creation_date":1561566329,"question_id":56777287,"body_markdown":"I ran my java code against sonarqube and I got &#39;Disable XML external entity (XXE) processing&#39; as vulnerability. I spend some time on google to resolve the issue. I have been trying alot of approach but nothing is working for me. I don&#39;t know what I&#39;m missing\r\n\r\nMy Code:\r\n\r\n            final DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();\r\n\t\t\tdocFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n\t\t\tdocFactory.setFeature(XMLInputFactory.IS_SUPPORTING_EXTERNAL_ENTITIES, false);\r\n\t\t\tdocFactory.setFeature(XMLInputFactory.SUPPORT_DTD, false);\r\n\r\n\t\t\tdocFactory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\r\n\t\t\tdocFactory.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\r\n\t\t\tdocFactory.setFeature(&quot;http://xml.org/sax/features/external-parameter-entities&quot;, false);\r\n\t\t\tdocFactory.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false);\r\n\r\n\t\t\tfinal DocumentBuilder docBuilder = docFactory.newDocumentBuilder();\r\n\t\t\tfinal Document doc = docBuilder.parse(filepath);\r\n\r\n\r\nI&#39;m using java 1.8, Any help is appreciated. Thanks","title":"how to fix &#39;Disable XML external entity (XXE) processing&#39; vulnerabilities in java","body":"<p>I ran my java code against sonarqube and I got 'Disable XML external entity (XXE) processing' as vulnerability. I spend some time on google to resolve the issue. I have been trying alot of approach but nothing is working for me. I don't know what I'm missing</p>\n\n<p>My Code:</p>\n\n<pre><code>        final DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();\n        docFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\n        docFactory.setFeature(XMLInputFactory.IS_SUPPORTING_EXTERNAL_ENTITIES, false);\n        docFactory.setFeature(XMLInputFactory.SUPPORT_DTD, false);\n\n        docFactory.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);\n        docFactory.setFeature(\"http://xml.org/sax/features/external-general-entities\", false);\n        docFactory.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false);\n        docFactory.setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false);\n\n        final DocumentBuilder docBuilder = docFactory.newDocumentBuilder();\n        final Document doc = docBuilder.parse(filepath);\n</code></pre>\n\n<p>I'm using java 1.8, Any help is appreciated. Thanks</p>\n"},{"tags":["java","android","audio-streaming","audiotrack","audiorecord"],"comments":[{"owner":{"account_id":5376192,"reputation":9447,"user_id":4283005,"display_name":"dev.bmax"},"score":2,"creation_date":1697618422,"post_id":77314488,"comment_id":136301158,"body_markdown":"I&#39;m not very familiar with the WAV format, but I would expect to have the header only at the beginning of the stream and not with every buffer.","body":"I&#39;m not very familiar with the WAV format, but I would expect to have the header only at the beginning of the stream and not with every buffer."},{"owner":{"account_id":19348945,"reputation":85,"user_id":14146796,"display_name":"someone"},"score":0,"creation_date":1697626849,"post_id":77314488,"comment_id":136302800,"body_markdown":"@dev.bmax I&#39;m also playing the data on web platform, and it seems like I can&#39;t play it without generating header.","body":"@dev.bmax I&#39;m also playing the data on web platform, and it seems like I can&#39;t play it without generating header."},{"owner":{"account_id":2255269,"reputation":2304,"user_id":1986583,"accept_rate":86,"display_name":"Hartmut Pfitzinger"},"score":0,"creation_date":1701113357,"post_id":77314488,"comment_id":136732521,"body_markdown":"you didn&#39;t get what @dev.bmax meant: you are saving the header again and again, with each little block of samples you read. So you&#39;re interrupting your written audio by yourself!","body":"you didn&#39;t get what @dev.bmax meant: you are saving the header again and again, with each little block of samples you read. So you&#39;re interrupting your written audio by yourself!"}],"answers":[{"tags":[],"owner":{"account_id":28297260,"reputation":768,"user_id":21636521,"display_name":"JanItor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697634212,"creation_date":1697633902,"answer_id":77316531,"question_id":77314488,"body_markdown":"You can write audio data without the header by specifying offset in the `audioBuffer`, something like\r\n```\r\nint audioOffset = wavHeaders.length;\r\nint audioLength = audioBuffer.length - wavHeaders.length;\r\nplayer.write(audioBuffer, audioOffset, audioLength, 0);\r\n```","title":"Android Java sound recorded with AudioRecord has noise when played","body":"<p>You can write audio data without the header by specifying offset in the <code>audioBuffer</code>, something like</p>\n<pre><code>int audioOffset = wavHeaders.length;\nint audioLength = audioBuffer.length - wavHeaders.length;\nplayer.write(audioBuffer, audioOffset, audioLength, 0);\n</code></pre>\n"}],"owner":{"account_id":19348945,"reputation":85,"user_id":14146796,"display_name":"someone"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77316531,"answer_count":1,"score":0,"last_activity_date":1697634212,"creation_date":1697616313,"question_id":77314488,"body_markdown":"I&#39;m recording voice using `AudioRecord`, send it to server, receive it on both Android and Web. On Android, I&#39;m playing the audio using `AudioTrack`, and there&#39;s a &quot;tttttt&quot; noise. On web, such noise doesn&#39;t seem to exist, maybe web API changes it to another more comfortable noise. \r\n\r\nI&#39;m recording voice and sending it so server like this:\r\n\r\n```java\r\nrecorder = new AudioRecord(audioSource, sampleRateInHz, channelConfig, audioFormat, bufferSize);\r\nint audioSession = recorder.getAudioSessionId();\r\nNoiseSuppressor.create(audioSession);\r\nAutomaticGainControl.create(audioSession);\r\nAcousticEchoCanceler.create(audioSession);\r\n...\r\ntry {\r\n    int bytesRead;\r\n    int count = 0;\r\n    byte[] buffer = new byte[bufferSize];\r\n\r\n    while (isRecording) {\r\n        bytesRead = recorder.read(buffer, 0, buffer.length);\r\n\r\n        // skip first 2 buffers to eliminate &quot;click sound&quot;\r\n        if (bytesRead &gt; 0 &amp;&amp; ++count &gt; 2) {\r\n\r\n            // I&#39;m manually adding wav header to make it playable on web\r\n            byte[] combined = new byte[wavHeaders.length + buffer.length];\r\n            System.arraycopy(wavHeaders, 0, combined, 0, wavHeaders.length);\r\n            System.arraycopy(buffer, 0, combined, wavHeaders.length, buffer.length);\r\n\r\n            socket.emit(&quot;voice&quot;, combined);\r\n        }\r\n    }\r\n    recorder.stop();\r\n} catch (Exception e) {\r\n    // e.printStackTrace();\r\n}\r\n```\r\n\r\nAnd this is how I&#39;m playing the audio:\r\n\r\n```java\r\nplayer = new AudioTrack.Builder()\r\n        .setAudioAttributes(new AudioAttributes.Builder()\r\n                // .setUsage(AudioAttributes.USAGE_VOICE_COMMUNICATION)\r\n                .setUsage(AudioAttributes.USAGE_MEDIA)\r\n                .setContentType(AudioAttributes.CONTENT_TYPE_SPEECH)\r\n                .build())\r\n        .setAudioFormat(new AudioFormat.Builder()\r\n                .setEncoding(audioFormat)\r\n                .setSampleRate(sampleRateInHz)\r\n                .setChannelMask(outputChannelConfig)\r\n                .build())\r\n        .setBufferSizeInBytes(bufferSize)\r\n        .build();\r\n...\r\nplayer.play();\r\n...\r\npublic void addPlay(byte[] audioBuffer) {\r\n    player.write(audioBuffer, 0, audioBuffer.length, 0);\r\n}\r\n...\r\ntry {\r\n    addPlay((byte[]) args[0]);\r\n} catch (Exception e) {\r\n    // TODO: handle exception\r\n}\r\n```\r\n\r\n\r\n# Update:\r\n\r\nI noticed by removing the generated header, the &quot;ttttt&quot; noise goes away, but I need to in order to be playable on web.","title":"Android Java sound recorded with AudioRecord has noise when played","body":"<p>I'm recording voice using <code>AudioRecord</code>, send it to server, receive it on both Android and Web. On Android, I'm playing the audio using <code>AudioTrack</code>, and there's a &quot;tttttt&quot; noise. On web, such noise doesn't seem to exist, maybe web API changes it to another more comfortable noise.</p>\n<p>I'm recording voice and sending it so server like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>recorder = new AudioRecord(audioSource, sampleRateInHz, channelConfig, audioFormat, bufferSize);\nint audioSession = recorder.getAudioSessionId();\nNoiseSuppressor.create(audioSession);\nAutomaticGainControl.create(audioSession);\nAcousticEchoCanceler.create(audioSession);\n...\ntry {\n    int bytesRead;\n    int count = 0;\n    byte[] buffer = new byte[bufferSize];\n\n    while (isRecording) {\n        bytesRead = recorder.read(buffer, 0, buffer.length);\n\n        // skip first 2 buffers to eliminate &quot;click sound&quot;\n        if (bytesRead &gt; 0 &amp;&amp; ++count &gt; 2) {\n\n            // I'm manually adding wav header to make it playable on web\n            byte[] combined = new byte[wavHeaders.length + buffer.length];\n            System.arraycopy(wavHeaders, 0, combined, 0, wavHeaders.length);\n            System.arraycopy(buffer, 0, combined, wavHeaders.length, buffer.length);\n\n            socket.emit(&quot;voice&quot;, combined);\n        }\n    }\n    recorder.stop();\n} catch (Exception e) {\n    // e.printStackTrace();\n}\n</code></pre>\n<p>And this is how I'm playing the audio:</p>\n<pre class=\"lang-java prettyprint-override\"><code>player = new AudioTrack.Builder()\n        .setAudioAttributes(new AudioAttributes.Builder()\n                // .setUsage(AudioAttributes.USAGE_VOICE_COMMUNICATION)\n                .setUsage(AudioAttributes.USAGE_MEDIA)\n                .setContentType(AudioAttributes.CONTENT_TYPE_SPEECH)\n                .build())\n        .setAudioFormat(new AudioFormat.Builder()\n                .setEncoding(audioFormat)\n                .setSampleRate(sampleRateInHz)\n                .setChannelMask(outputChannelConfig)\n                .build())\n        .setBufferSizeInBytes(bufferSize)\n        .build();\n...\nplayer.play();\n...\npublic void addPlay(byte[] audioBuffer) {\n    player.write(audioBuffer, 0, audioBuffer.length, 0);\n}\n...\ntry {\n    addPlay((byte[]) args[0]);\n} catch (Exception e) {\n    // TODO: handle exception\n}\n</code></pre>\n<h1>Update:</h1>\n<p>I noticed by removing the generated header, the &quot;ttttt&quot; noise goes away, but I need to in order to be playable on web.</p>\n"},{"tags":["java","websphere"],"comments":[{"owner":{"account_id":13739626,"reputation":116,"user_id":9915084,"display_name":"Thomas Johnson"},"score":0,"creation_date":1697561200,"post_id":77305316,"comment_id":136294238,"body_markdown":"Is this traditional Websphere or WebSphere Liberty (i.e. What version of WebSphere are you on?) I ask because if it&#39;s WebSphere Liberty, you are using, it would help to see how you have you features configured in your sever.xml.","body":"Is this traditional Websphere or WebSphere Liberty (i.e. What version of WebSphere are you on?) I ask because if it&#39;s WebSphere Liberty, you are using, it would help to see how you have you features configured in your sever.xml."}],"answers":[{"comments":[{"owner":{"account_id":3360953,"reputation":1823,"user_id":2822762,"accept_rate":100,"display_name":"Dave"},"score":0,"creation_date":1697797394,"post_id":77316506,"comment_id":136327852,"body_markdown":"This seems to be a straight up copy&amp;paste, low effort answer. Please at least fix the image alt and remove the websphere technical support phrase.","body":"This seems to be a straight up copy&amp;paste, low effort answer. Please at least fix the image alt and remove the websphere technical support phrase."}],"tags":[],"owner":{"account_id":29700237,"reputation":1,"user_id":22762572,"display_name":"Ram"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697633749,"creation_date":1697633749,"answer_id":77316506,"question_id":77305316,"body_markdown":"\r\nIn WAS traditional, the SSL configurations that you define in the administrative console are applied at the runtime by a class called an SSLSocketFactory. WebSphere has its own custom SSLSocketFactory implementation (com.ibm.websphere.ssl.protocol.SSLSocketFactory) which it sets as the default for the IBM Java runtime that it sits on top of. When application code calls APIs that use this SSLSocketFactory for their connections, the WAS SSL settings are applied to the connection and any problems with the connection (for example protocol mismatches, cipher suite mismatches, or certificate trust issues) can be resolved by making changes to the SSL configurations in the WAS administrative console.\r\n\r\n[enter image description here][1]\r\nSuppose you explicitly use system properties within your code rather than relying on the default settings configured for the JVM (which, in typical scenarios, is the WebSphere Application Server (WAS) implementation). In that case, it may bypass the WAS SSL configuration, including settings such as keyStores, trustStores, cipher suites, and handshake protocols.\r\n\r\nif you choose to override the WAS SSL settings, please ensure that you include the system properties for the keystore type and truststore type, which are set as follows:\r\n\r\n    javax.net.ssl.trustStoreType\r\n    javax.net.ssl.keyStoreType\r\n\r\nBoth of these properties should be set to JKS.\r\n\r\nIf you have any further questions or need additional assistance from WAS SSL, please do not hesitate to contact IBM Websphere technical support.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fxET5.png","title":"The following WSDL exception occurred: WSDLException: faultCode=WSDL4JWrapper","body":"<p>In WAS traditional, the SSL configurations that you define in the administrative console are applied at the runtime by a class called an SSLSocketFactory. WebSphere has its own custom SSLSocketFactory implementation (com.ibm.websphere.ssl.protocol.SSLSocketFactory) which it sets as the default for the IBM Java runtime that it sits on top of. When application code calls APIs that use this SSLSocketFactory for their connections, the WAS SSL settings are applied to the connection and any problems with the connection (for example protocol mismatches, cipher suite mismatches, or certificate trust issues) can be resolved by making changes to the SSL configurations in the WAS administrative console.</p>\n<p><a href=\"https://i.stack.imgur.com/fxET5.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nSuppose you explicitly use system properties within your code rather than relying on the default settings configured for the JVM (which, in typical scenarios, is the WebSphere Application Server (WAS) implementation). In that case, it may bypass the WAS SSL configuration, including settings such as keyStores, trustStores, cipher suites, and handshake protocols.</p>\n<p>if you choose to override the WAS SSL settings, please ensure that you include the system properties for the keystore type and truststore type, which are set as follows:</p>\n<pre><code>javax.net.ssl.trustStoreType\njavax.net.ssl.keyStoreType\n</code></pre>\n<p>Both of these properties should be set to JKS.</p>\n<p>If you have any further questions or need additional assistance from WAS SSL, please do not hesitate to contact IBM Websphere technical support.</p>\n"}],"owner":{"account_id":29687114,"reputation":1,"user_id":22752380,"display_name":"Marco Bernal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697633749,"creation_date":1697496058,"question_id":77305316,"body_markdown":"I&#180;m trying to connect to a webService on a Java application. I create my own .jks file for the certificates.\r\nWhen I deploy the app in my local (is a tomcat server), the application is ok. But when I deploy it on a Websphere server I have this error:\r\n\r\n`The following WSDL exception occurred: WSDLException: faultCode=WSDL4JWrapper : : javax.wsdl.WSDLException: WSDLException: faultCode=WSDL4JWrapper : : javax.net.ssl.SSLException: SSLSocketFactory is null. This can occur if javax.net.ssl.SSLSocketFactory.getDefault() is called to create a socket and javax.net.ssl.* properties are not set.`\r\n\r\nI set the properties on this way:\r\n\r\n```\r\nSystem.setProperty(&quot;javax.net.ssl.trustStore&quot;, this.util.getPropertie(&quot;trustStore&quot;));\r\nSystem.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, this.util.getPropertie(&quot;trustStorePassword&quot;));\r\nSystem.setProperty( &quot;javax.net.ssl.keyStore&quot;, this.util.getPropertie(&quot;keyStore&quot;));\r\nSystem.setProperty( &quot;javax.net.ssl.keyStorePassword&quot;, this.util.getPropertie(&quot;keyStorePassword&quot;));\r\n```\r\n\r\nAnd I take the properties from a .properties file.\r\n\r\nThanks in advance. I apologize if I didn&#180;t do my question correctly, but is my first time writing here.\r\n\r\nRegards.\r\n\r\nI&#180;m trying to connect my web application to a web service","title":"The following WSDL exception occurred: WSDLException: faultCode=WSDL4JWrapper","body":"<p>I´m trying to connect to a webService on a Java application. I create my own .jks file for the certificates.\nWhen I deploy the app in my local (is a tomcat server), the application is ok. But when I deploy it on a Websphere server I have this error:</p>\n<p><code>The following WSDL exception occurred: WSDLException: faultCode=WSDL4JWrapper : : javax.wsdl.WSDLException: WSDLException: faultCode=WSDL4JWrapper : : javax.net.ssl.SSLException: SSLSocketFactory is null. This can occur if javax.net.ssl.SSLSocketFactory.getDefault() is called to create a socket and javax.net.ssl.* properties are not set.</code></p>\n<p>I set the properties on this way:</p>\n<pre><code>System.setProperty(&quot;javax.net.ssl.trustStore&quot;, this.util.getPropertie(&quot;trustStore&quot;));\nSystem.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, this.util.getPropertie(&quot;trustStorePassword&quot;));\nSystem.setProperty( &quot;javax.net.ssl.keyStore&quot;, this.util.getPropertie(&quot;keyStore&quot;));\nSystem.setProperty( &quot;javax.net.ssl.keyStorePassword&quot;, this.util.getPropertie(&quot;keyStorePassword&quot;));\n</code></pre>\n<p>And I take the properties from a .properties file.</p>\n<p>Thanks in advance. I apologize if I didn´t do my question correctly, but is my first time writing here.</p>\n<p>Regards.</p>\n<p>I´m trying to connect my web application to a web service</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1697451153,"post_id":77301071,"comment_id":136277185,"body_markdown":"Can you explain where in your code you tried to check if the maximum number is twice as big as the next biggest number? To me it just looks like you iterate over the array and count how often the biggest number appears in the array with the `count` variable and if it appears twice you print it, otherwise you print -1. But that has little to do with the actual task description","body":"Can you explain where in your code you tried to check if the maximum number is twice as big as the next biggest number? To me it just looks like you iterate over the array and count how often the biggest number appears in the array with the <code>count</code> variable and if it appears twice you print it, otherwise you print -1. But that has little to do with the actual task description"},{"owner":{"account_id":29626176,"reputation":27,"user_id":22705841,"display_name":"user_program"},"score":0,"creation_date":1697451322,"post_id":77301071,"comment_id":136277214,"body_markdown":"if(max==x[i]) in this condition I am checking if the max element is occurring more than once then we will upgrade the count again for the maximum element.","body":"if(max==x[i]) in this condition I am checking if the max element is occurring more than once then we will upgrade the count again for the maximum element."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1697451483,"post_id":77301071,"comment_id":136277245,"body_markdown":"Yes I understand that. What I don&#39;t understand is why you are doing this. Why are you counting how often the maximum element appears? If I understand your task description correct the task is to check if the maximum element in the array is at least 2 times bigger than every other number in the array. That has nothing to do with how often the element appears. Or do i misunderstand the task?","body":"Yes I understand that. What I don&#39;t understand is why you are doing this. Why are you counting how often the maximum element appears? If I understand your task description correct the task is to check if the maximum element in the array is at least 2 times bigger than every other number in the array. That has nothing to do with how often the element appears. Or do i misunderstand the task?"}],"answers":[{"tags":[],"owner":{"account_id":4663157,"reputation":15229,"user_id":3776927,"display_name":"derpirscher"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697632917,"creation_date":1697488226,"answer_id":77304797,"question_id":77301071,"body_markdown":"Given your description, the element you are searching for can only be the maximum element in the array. Furthermore you only have to check whether this element is at least twice as big as second largest value. Ie find the indexes `x` and `y`  of the two largest elements in the array and check if `a[x] &gt;= 2*a[y]`\r\n\r\n    int x = a[0] &gt;= a[1] ? 0 : 1;\r\n    int y = a[0] &lt; a[1] ? 0 : 1;\r\n\r\n    for (int i = 2; i &lt; n; i++) {\r\n      if (a[i] &gt; a[x]) {\r\n        //The current element is larger than the current maximum.\r\n        //Thus, it becomes the new max, and the current max becomes second largest.\r\n        y = x; x = i;\r\n      } else if (a[i] &gt; a[y]) {\r\n        //The current element is larger than the second biggest but smaller than the maximum\r\n        //Thus only replace the second biggest element \r\n        y = i;\r\n      }\r\n    }\r\n    //Check if the maximum is at least twice as big as the second largest \r\n    return (a[x] &gt;= 2*a[y]) ? x : -1;","title":"code for finding the largest element in the array is at least twice as much as every other number in the array","body":"<p>Given your description, the element you are searching for can only be the maximum element in the array. Furthermore you only have to check whether this element is at least twice as big as second largest value. Ie find the indexes <code>x</code> and <code>y</code>  of the two largest elements in the array and check if <code>a[x] &gt;= 2*a[y]</code></p>\n<pre><code>int x = a[0] &gt;= a[1] ? 0 : 1;\nint y = a[0] &lt; a[1] ? 0 : 1;\n\nfor (int i = 2; i &lt; n; i++) {\n  if (a[i] &gt; a[x]) {\n    //The current element is larger than the current maximum.\n    //Thus, it becomes the new max, and the current max becomes second largest.\n    y = x; x = i;\n  } else if (a[i] &gt; a[y]) {\n    //The current element is larger than the second biggest but smaller than the maximum\n    //Thus only replace the second biggest element \n    y = i;\n  }\n}\n//Check if the maximum is at least twice as big as the second largest \nreturn (a[x] &gt;= 2*a[y]) ? x : -1;\n</code></pre>\n"}],"owner":{"account_id":29626176,"reputation":27,"user_id":22705841,"display_name":"user_program"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697632917,"creation_date":1697450886,"question_id":77301071,"body_markdown":"I was writing the code for finding the largest element in the array is at least twice as much as every other number in the array. \r\n\r\nOutput the index(0-based) of the largest element if the condition holds true or -1 otherwise.\r\n\r\n\r\n```\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\npublic class Solution {\r\n\r\n    public static void main(String[] args) {\r\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\r\n        Scanner sc = new Scanner(System.in);\r\n        int n = sc.nextInt();\r\n        int [] x = new int [n];\r\n        for(int i=0;i&lt;n;i++){\r\n            x[i]=sc.nextInt();\r\n        }\r\n        \r\n        \r\n        int max=Integer.MIN_VALUE;\r\n        int count=0;\r\n        int i;\r\n        for(i=0;i&lt;n;i++){\r\n            if(max&lt;x[i]){\r\n                max=x[i];\r\n                count=0;\r\n            }\r\n            if(max==x[i]){\r\n                count++;\r\n            }\r\n        }\r\n        if(count&gt;=2){\r\n            System.out.print(i);\r\n        }\r\n        else{\r\n            System.out.print(&quot;-1&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nIn my case the test cases from hackerrank are not passing can someone please guide me here so as to pass all the test cases.","title":"code for finding the largest element in the array is at least twice as much as every other number in the array","body":"<p>I was writing the code for finding the largest element in the array is at least twice as much as every other number in the array.</p>\n<p>Output the index(0-based) of the largest element if the condition holds true or -1 otherwise.</p>\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        int [] x = new int [n];\n        for(int i=0;i&lt;n;i++){\n            x[i]=sc.nextInt();\n        }\n        \n        \n        int max=Integer.MIN_VALUE;\n        int count=0;\n        int i;\n        for(i=0;i&lt;n;i++){\n            if(max&lt;x[i]){\n                max=x[i];\n                count=0;\n            }\n            if(max==x[i]){\n                count++;\n            }\n        }\n        if(count&gt;=2){\n            System.out.print(i);\n        }\n        else{\n            System.out.print(&quot;-1&quot;);\n        }\n    }\n}\n</code></pre>\n<p>In my case the test cases from hackerrank are not passing can someone please guide me here so as to pass all the test cases.</p>\n"},{"tags":["java","hibernate","gradle"],"answers":[{"tags":[],"owner":{"account_id":5263243,"reputation":1162,"user_id":4204127,"accept_rate":33,"display_name":"Ed Dunn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547233647,"creation_date":1547233647,"answer_id":54152613,"question_id":54150924,"body_markdown":"Seems like I fixed it by changing the following\r\n\r\n    destDir: &quot;build/classes&quot;,\r\n\r\nEverything seems to be working as expected","title":"Re writting gradle code to be compatible with 5.1","body":"<p>Seems like I fixed it by changing the following</p>\n\n<pre><code>destDir: \"build/classes\",\n</code></pre>\n\n<p>Everything seems to be working as expected</p>\n"},{"tags":[],"owner":{"account_id":8331833,"reputation":3563,"user_id":6259990,"display_name":"Sven Hakvoort"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697632854,"creation_date":1697632854,"answer_id":77316408,"question_id":54150924,"body_markdown":"For gradle 8.2 use the following:\r\n\r\n    sourceSets.main.java.classesDirectory.get()","title":"Re writting gradle code to be compatible with 5.1","body":"<p>For gradle 8.2 use the following:</p>\n<pre><code>sourceSets.main.java.classesDirectory.get()\n</code></pre>\n"}],"owner":{"account_id":5263243,"reputation":1162,"user_id":4204127,"accept_rate":33,"display_name":"Ed Dunn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":942,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697632854,"creation_date":1547225771,"question_id":54150924,"body_markdown":"I am stuck on trying to re work some code to be compatible with gradle 5.1.  I am currently using 4.10.  The following block of code is for hibernate that I copied (for the most part) so honestly I am not 100% sure of what it all does, still fairly new to gradle.  Here is the following code\r\n\r\n        doLast{\r\n            ant.taskdef( resource:&quot;org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties&quot;, classpath: configurations.ajc.asPath)\r\n            ant.iajc(\r\n                source: sourceCompatibility,\r\n                target: targetCompatibility,\r\n                Xlint: &quot;ignore&quot;,\r\n                destDir: sourceSets.main.output.classesDir.absolutePath, \r\n                maxmem: &quot;1024m&quot;,\r\n                fork: &quot;true&quot;,\r\n                aspectPath: configurations.aspects.asPath,\r\n                sourceRootCopyFilter: &quot;**/.svn/*,**/*.java&quot;,\r\n                classpath: configurations.compile.asPath\r\n            ){\r\n                sourceroots{\r\n                    sourceSets.main.java.srcDirs.each{\r\n                        pathelement(location:it.absolutePath)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\nThe code in question is the following line\r\n\r\n    destDir: sourceSets.main.output.classesDir.absolutePath,\r\n\r\nas it throws the following error\r\n\r\n&gt; Could not get unknown property &#39;classesDir&#39; for main classes of type org.gradle.api.internal.tasks.DefaultSourceSetOutput.\r\n\r\nChanging the code to\r\n\r\n    destDir: sourceSets.main.output.classesDirs.absolutePath,\r\n\r\ncauses the following error\r\n\r\n&gt; No such property: absolutePath for class: org.gradle.api.internal.file.collections.DefaultConfigurableFileCollection\r\n\r\nSo I am looking into alternatives (or syntax updates)\r\n","title":"Re writting gradle code to be compatible with 5.1","body":"<p>I am stuck on trying to re work some code to be compatible with gradle 5.1.  I am currently using 4.10.  The following block of code is for hibernate that I copied (for the most part) so honestly I am not 100% sure of what it all does, still fairly new to gradle.  Here is the following code</p>\n\n<pre><code>    doLast{\n        ant.taskdef( resource:\"org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties\", classpath: configurations.ajc.asPath)\n        ant.iajc(\n            source: sourceCompatibility,\n            target: targetCompatibility,\n            Xlint: \"ignore\",\n            destDir: sourceSets.main.output.classesDir.absolutePath, \n            maxmem: \"1024m\",\n            fork: \"true\",\n            aspectPath: configurations.aspects.asPath,\n            sourceRootCopyFilter: \"**/.svn/*,**/*.java\",\n            classpath: configurations.compile.asPath\n        ){\n            sourceroots{\n                sourceSets.main.java.srcDirs.each{\n                    pathelement(location:it.absolutePath)\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>The code in question is the following line</p>\n\n<pre><code>destDir: sourceSets.main.output.classesDir.absolutePath,\n</code></pre>\n\n<p>as it throws the following error</p>\n\n<blockquote>\n  <p>Could not get unknown property 'classesDir' for main classes of type org.gradle.api.internal.tasks.DefaultSourceSetOutput.</p>\n</blockquote>\n\n<p>Changing the code to</p>\n\n<pre><code>destDir: sourceSets.main.output.classesDirs.absolutePath,\n</code></pre>\n\n<p>causes the following error</p>\n\n<blockquote>\n  <p>No such property: absolutePath for class: org.gradle.api.internal.file.collections.DefaultConfigurableFileCollection</p>\n</blockquote>\n\n<p>So I am looking into alternatives (or syntax updates)</p>\n"},{"tags":["java","spring-boot","heroku","jwt"],"answers":[{"comments":[{"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"score":2,"creation_date":1631170857,"post_id":66412582,"comment_id":122151740,"body_markdown":"This solution didn&#39;t work for me. I already have spring-boot-starter-oauth2-client and spring-boot-starter-oauth2-resource-server in the dependency list. Adding spring-security-test didn&#39;t help. Any inputs?","body":"This solution didn&#39;t work for me. I already have spring-boot-starter-oauth2-client and spring-boot-starter-oauth2-resource-server in the dependency list. Adding spring-security-test didn&#39;t help. Any inputs?"}],"tags":[],"owner":{"account_id":13923090,"reputation":5270,"user_id":10053052,"display_name":"Tin Nguyen"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1614537327,"creation_date":1614537327,"answer_id":66412582,"question_id":66403244,"body_markdown":"It cannot find `org.springframework.security.oauth2.jwt.JwtDecoder` because you listed that dependency as `test scope`\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\nChange the `scope` or just remove that entry. Default entry is `compile`.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6IbQm.png","title":"Heroku deployment error &quot;required a bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; that could not be found.&quot;","body":"<p>It cannot find <code>org.springframework.security.oauth2.jwt.JwtDecoder</code> because you listed that dependency as <code>test scope</code></p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/6IbQm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6IbQm.png\" alt=\"enter image description here\" /></a></p>\n<p>Change the <code>scope</code> or just remove that entry. Default entry is <code>compile</code>.</p>\n"},{"tags":[],"owner":{"account_id":10786100,"reputation":2966,"user_id":7935057,"display_name":"Iceberg"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1646991474,"creation_date":1633766823,"answer_id":69504887,"question_id":66403244,"body_markdown":"Try to specify the **jwk-set-uri** configuration in application.yml:\r\n```\r\nspring:\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          jwk-set-uri: https://example.com/.well-known/jwks.json\r\n```\r\n\r\nFor application.properties:\r\n```\r\nspring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://example.com/.well-known/jwks.json\r\n```\r\n","title":"Heroku deployment error &quot;required a bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; that could not be found.&quot;","body":"<p>Try to specify the <strong>jwk-set-uri</strong> configuration in application.yml:</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          jwk-set-uri: https://example.com/.well-known/jwks.json\n</code></pre>\n<p>For application.properties:</p>\n<pre><code>spring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://example.com/.well-known/jwks.json\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2218633,"reputation":21,"user_id":1958655,"display_name":"Krzysztof Walczewski"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638492478,"creation_date":1638492373,"answer_id":70208191,"question_id":66403244,"body_markdown":"TL;DR\r\n```\r\n@SpringBootTest(\r\n\t\tproperties = {\r\n\t\t\t\t&quot;spring.security.oauth2.resourceserver.jwt.jwk-set-uri = http://&lt;host&gt;:&lt;port&gt;/auth/realms/your-realm/protocol/openid-connect/certs&quot;}\r\n)\r\n```\r\nexample with keycloak","title":"Heroku deployment error &quot;required a bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; that could not be found.&quot;","body":"<p>TL;DR</p>\n<pre><code>@SpringBootTest(\n        properties = {\n                &quot;spring.security.oauth2.resourceserver.jwt.jwk-set-uri = http://&lt;host&gt;:&lt;port&gt;/auth/realms/your-realm/protocol/openid-connect/certs&quot;}\n)\n</code></pre>\n<p>example with keycloak</p>\n"},{"tags":[],"owner":{"account_id":21331723,"reputation":31,"user_id":15703446,"display_name":"Arman Moniri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692340675,"creation_date":1692167165,"answer_id":76910993,"question_id":66403244,"body_markdown":"use `@SpringBootApplication(scanBasePackages = &quot;org.springframework.security.oauth2.jwt&quot;)` in your main application class.","title":"Heroku deployment error &quot;required a bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; that could not be found.&quot;","body":"<p>use <code>@SpringBootApplication(scanBasePackages = &quot;org.springframework.security.oauth2.jwt&quot;)</code> in your main application class.</p>\n"},{"tags":[],"owner":{"account_id":5608200,"reputation":95,"user_id":4441953,"display_name":"Ashwin Sinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692378671,"creation_date":1692378671,"answer_id":76931344,"question_id":66403244,"body_markdown":"Add the JwtDecoder @Bean like so, and check if it works\r\n    \r\n    @Configuration @EnableWebSecurity public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Bean\r\n        public JwtDecoder jwtDecoder() {\r\n            return JwtDecoders.fromIssuerLocation(&quot;your-issuer-uri&quot;);\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception{\r\n            http.csrf().disable().cors().configurationSource(corsConfigurationSource())\r\n                    .and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/*&quot;)\r\n                    .authenticated()\r\n                    .and()\r\n                    .oauth2ResourceServer()\r\n                    .jwt();\r\n        }","title":"Heroku deployment error &quot;required a bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; that could not be found.&quot;","body":"<p>Add the JwtDecoder @Bean like so, and check if it works</p>\n<pre><code>@Configuration @EnableWebSecurity public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        return JwtDecoders.fromIssuerLocation(&quot;your-issuer-uri&quot;);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception{\n        http.csrf().disable().cors().configurationSource(corsConfigurationSource())\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;/*&quot;)\n                .authenticated()\n                .and()\n                .oauth2ResourceServer()\n                .jwt();\n    }\n</code></pre>\n"}],"owner":{"account_id":17108660,"reputation":1251,"user_id":12380096,"display_name":"AylaWinters"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15359,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":66412582,"answer_count":5,"score":2,"last_activity_date":1697632535,"creation_date":1614458164,"question_id":66403244,"body_markdown":"I am trying to deploy my springboot app to heroku but I am getting an error that it cannot find a JwtDecoder bean. I have tried googling it a bit but can&#39;t find anything that helps. Everything works fine locally, just not when deployed to heroku.\r\n\r\nHere is my heroku log --tail:\r\n```\r\n2021-02-27T20:18:45.134160+00:00 app[web.1]: ***************************\r\n2021-02-27T20:18:45.134160+00:00 app[web.1]: APPLICATION FAILED TO START\r\n2021-02-27T20:18:45.134160+00:00 app[web.1]: ***************************\r\n2021-02-27T20:18:45.134161+00:00 app[web.1]:\r\n2021-02-27T20:18:45.134161+00:00 app[web.1]: Description:\r\n2021-02-27T20:18:45.134161+00:00 app[web.1]:\r\n2021-02-27T20:18:45.134179+00:00 app[web.1]: Method springSecurityFilterChain in\r\norg.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration \r\nrequired a bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; that \r\ncould not be found.\r\n2021-02-27T20:18:45.134179+00:00 app[web.1]: \r\n2021-02-27T20:18:45.134179+00:00 app[web.1]:\r\n2021-02-27T20:18:45.134180+00:00 app[web.1]: Action:\r\n2021-02-27T20:18:45.134180+00:00 app[web.1]:\r\n2021-02-27T20:18:45.134181+00:00 app[web.1]: Consider defining a bean of type \r\n&#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; in your configuration.\r\n```\r\n\r\nWebSecurityConfig:\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception{\r\n        http.csrf().disable().cors().configurationSource(corsConfigurationSource())\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/*&quot;)\r\n                .authenticated()\r\n                .and()\r\n                .oauth2ResourceServer()\r\n                .jwt();\r\n    }\r\n\r\n```\r\n\r\nI&#39;m not sure what else to include... Feel free to comment on what else I should add. Or, the repo is at https://github.com/AndreTheTallGuy/Kelp2\r\n\r\nThank you in advance for any help you may be able to provide!","title":"Heroku deployment error &quot;required a bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; that could not be found.&quot;","body":"<p>I am trying to deploy my springboot app to heroku but I am getting an error that it cannot find a JwtDecoder bean. I have tried googling it a bit but can't find anything that helps. Everything works fine locally, just not when deployed to heroku.</p>\n<p>Here is my heroku log --tail:</p>\n<pre><code>2021-02-27T20:18:45.134160+00:00 app[web.1]: ***************************\n2021-02-27T20:18:45.134160+00:00 app[web.1]: APPLICATION FAILED TO START\n2021-02-27T20:18:45.134160+00:00 app[web.1]: ***************************\n2021-02-27T20:18:45.134161+00:00 app[web.1]:\n2021-02-27T20:18:45.134161+00:00 app[web.1]: Description:\n2021-02-27T20:18:45.134161+00:00 app[web.1]:\n2021-02-27T20:18:45.134179+00:00 app[web.1]: Method springSecurityFilterChain in\norg.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration \nrequired a bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' that \ncould not be found.\n2021-02-27T20:18:45.134179+00:00 app[web.1]: \n2021-02-27T20:18:45.134179+00:00 app[web.1]:\n2021-02-27T20:18:45.134180+00:00 app[web.1]: Action:\n2021-02-27T20:18:45.134180+00:00 app[web.1]:\n2021-02-27T20:18:45.134181+00:00 app[web.1]: Consider defining a bean of type \n'org.springframework.security.oauth2.jwt.JwtDecoder' in your configuration.\n</code></pre>\n<p>WebSecurityConfig:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception{\n        http.csrf().disable().cors().configurationSource(corsConfigurationSource())\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;/*&quot;)\n                .authenticated()\n                .and()\n                .oauth2ResourceServer()\n                .jwt();\n    }\n\n</code></pre>\n<p>I'm not sure what else to include... Feel free to comment on what else I should add. Or, the repo is at <a href=\"https://github.com/AndreTheTallGuy/Kelp2\" rel=\"nofollow noreferrer\">https://github.com/AndreTheTallGuy/Kelp2</a></p>\n<p>Thank you in advance for any help you may be able to provide!</p>\n"},{"tags":["java","command-line","compiler-construction","package","javac"],"answers":[{"comments":[{"owner":{"account_id":175019,"reputation":956,"user_id":404725,"accept_rate":57,"display_name":"Altober"},"score":1,"creation_date":1282138762,"post_id":3512633,"comment_id":3671815,"body_markdown":"yeah the problem is that I need to do it in an external server and I am not able to install any aditional too.","body":"yeah the problem is that I need to do it in an external server and I am not able to install any aditional too."},{"owner":{"account_id":162408,"reputation":9549,"user_id":383838,"accept_rate":65,"display_name":"Jon Freedman"},"score":0,"creation_date":1282138999,"post_id":3512633,"comment_id":3671864,"body_markdown":"You can unzip ant / maven in the same file system you store your code, you don&#39;t need to &quot;install&quot; them, so this is not going to prevent you from using either","body":"You can unzip ant / maven in the same file system you store your code, you don&#39;t need to &quot;install&quot; them, so this is not going to prevent you from using either"}],"tags":[],"owner":{"account_id":31967,"reputation":4142,"user_id":88159,"accept_rate":95,"display_name":"pavanlimo"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1282138926,"creation_date":1282138412,"answer_id":3512633,"question_id":3512603,"body_markdown":"You should use build tools like [Maven][1] or [Ant][2] for such tasks.\r\n\r\nIn the initial stages, when the project is not very complex you can use the following line to compile, with appropriate classpath in place(as suggested by @Michael):\r\n\r\n`javac Support/*.java Me/*.java Wrapers/*.java`\r\n\r\n  [1]: http://maven.apache.org/\r\n  [2]: http://ant.apache.org/","title":"Compiling multiple packages using the command line in Java","body":"<p>You should use build tools like <a href=\"http://maven.apache.org/\" rel=\"noreferrer\">Maven</a> or <a href=\"http://ant.apache.org/\" rel=\"noreferrer\">Ant</a> for such tasks.</p>\n\n<p>In the initial stages, when the project is not very complex you can use the following line to compile, with appropriate classpath in place(as suggested by @Michael):</p>\n\n<p><code>javac Support/*.java Me/*.java Wrapers/*.java</code></p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1282138773,"post_id":3512661,"comment_id":3671820,"body_markdown":"+1 - For an existing project with minimal external dependies, Ant is simpler than (for example) Maven.  His IDE may even be able to generate an initial &quot;build.xml&quot; file.","body":"+1 - For an existing project with minimal external dependies, Ant is simpler than (for example) Maven.  His IDE may even be able to generate an initial &quot;build.xml&quot; file."},{"owner":{"account_id":175019,"reputation":956,"user_id":404725,"accept_rate":57,"display_name":"Altober"},"score":0,"creation_date":1282139216,"post_id":3512661,"comment_id":3671904,"body_markdown":"Thanks I tried this, it compiles everything but it does not generate the class structure so when I try to run my main it says &quot;&quot;main&quot; java.lang.NoClassDefFoundError: Wrapper/java&quot;","body":"Thanks I tried this, it compiles everything but it does not generate the class structure so when I try to run my main it says &quot;&quot;main&quot; java.lang.NoClassDefFoundError: Wrapper/java&quot;"},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":1,"creation_date":1282139406,"post_id":3512661,"comment_id":3671954,"body_markdown":"@Altober: the `java` tool expects *class names*, not file names, and especially not source file names. You probably need to do something like `java Wrapers.Wrapper`, assuming you have a class &quot;Wrapper&quot; inside a package &quot;Wrapers&quot;","body":"@Altober: the <code>java</code> tool expects <i>class names</i>, not file names, and especially not source file names. You probably need to do something like <code>java Wrapers.Wrapper</code>, assuming you have a class &quot;Wrapper&quot; inside a package &quot;Wrapers&quot;"}],"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1282138620,"creation_date":1282138620,"answer_id":3512661,"question_id":3512603,"body_markdown":"This should do it (may require additional classpath elements via the `-cp` command line switch):\r\n\r\n    javac Support/*.java Me/*.java Wrapers/*.java\r\n\r\nBut if your build process gets more complex (and it will!), you should look into using [Apache Ant][1] for build automation.\r\n\r\n\r\n  [1]: http://ant.apache.org/","title":"Compiling multiple packages using the command line in Java","body":"<p>This should do it (may require additional classpath elements via the <code>-cp</code> command line switch):</p>\n\n<pre><code>javac Support/*.java Me/*.java Wrapers/*.java\n</code></pre>\n\n<p>But if your build process gets more complex (and it will!), you should look into using <a href=\"http://ant.apache.org/\" rel=\"noreferrer\">Apache Ant</a> for build automation.</p>\n"},{"comments":[{"owner":{"account_id":175019,"reputation":956,"user_id":404725,"accept_rate":57,"display_name":"Altober"},"score":0,"creation_date":1282138987,"post_id":3512668,"comment_id":3671862,"body_markdown":"thanks I tried but I am getting &quot;illegal variable names&quot; do you knoe why. Thanks","body":"thanks I tried but I am getting &quot;illegal variable names&quot; do you knoe why. Thanks"},{"owner":{"account_id":67623,"reputation":57713,"user_id":197788,"accept_rate":96,"display_name":"Ken Bloom"},"score":0,"creation_date":1282148530,"post_id":3512668,"comment_id":3673851,"body_markdown":"maybe you need `-sourcepath src` as well. (or you need to specify the `src` directory as part of the classpath)","body":"maybe you need <code>-sourcepath src</code> as well. (or you need to specify the <code>src</code> directory as part of the classpath)"},{"owner":{"account_id":515436,"reputation":1689,"user_id":1094999,"accept_rate":35,"display_name":"auraham"},"score":0,"creation_date":1348335685,"post_id":3512668,"comment_id":16895355,"body_markdown":"I have tried your snippet with my netbeans project and it works:","body":"I have tried your snippet with my netbeans project and it works:"}],"tags":[],"owner":{"account_id":67623,"reputation":57713,"user_id":197788,"accept_rate":96,"display_name":"Ken Bloom"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1282138658,"creation_date":1282138658,"answer_id":3512668,"question_id":3512603,"body_markdown":"    javac -d compiled $(find src -name *.java)","title":"Compiling multiple packages using the command line in Java","body":"<pre><code>javac -d compiled $(find src -name *.java)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":173271,"reputation":14144,"user_id":401835,"display_name":"Moritz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1282139186,"creation_date":1282139186,"answer_id":3512751,"question_id":3512603,"body_markdown":"If you really need to just use javac and standard UNIX commands you could to this:\r\n\r\n    find src -name \\*.java -print0 | xargs -0 javac -d classes","title":"Compiling multiple packages using the command line in Java","body":"<p>If you really need to just use javac and standard UNIX commands you could to this:</p>\n\n<pre><code>find src -name \\*.java -print0 | xargs -0 javac -d classes\n</code></pre>\n"},{"comments":[{"owner":{"account_id":162408,"reputation":9549,"user_id":383838,"accept_rate":65,"display_name":"Jon Freedman"},"score":0,"creation_date":1282139805,"post_id":3512801,"comment_id":3672031,"body_markdown":"What if you refactor a package or add a new package, you have to touch this file every time?  Have a watch of http://skillsmatter.com/podcast/java-jee/zen-and-the-art-of-build-script-maintenance if you need convincing...","body":"What if you refactor a package or add a new package, you have to touch this file every time?  Have a watch of <a href=\"http://skillsmatter.com/podcast/java-jee/zen-and-the-art-of-build-script-maintenance\" rel=\"nofollow noreferrer\">skillsmatter.com/podcast/java-jee/&hellip;</a> if you need convincing..."},{"owner":{"account_id":43306,"reputation":4745,"user_id":126541,"accept_rate":58,"display_name":"aepryus"},"score":2,"creation_date":1282140605,"post_id":3512801,"comment_id":3672195,"body_markdown":"No idea about others.  But over the course of a project the amount of times I need to modify such a batch file is miniscule, if at all.  There are no doubt situations that Maven and Ant is warranted; but I have not encountered them.  Sometimes to kill a fly, a shutgun is not necessary (nor a nuke)","body":"No idea about others.  But over the course of a project the amount of times I need to modify such a batch file is miniscule, if at all.  There are no doubt situations that Maven and Ant is warranted; but I have not encountered them.  Sometimes to kill a fly, a shutgun is not necessary (nor a nuke)"}],"tags":[],"owner":{"account_id":43306,"reputation":4745,"user_id":126541,"accept_rate":58,"display_name":"aepryus"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1282139490,"creation_date":1282139490,"answer_id":3512801,"question_id":3512603,"body_markdown":"In many cases Ant is overkill.  Just use a BAT file if you are in windows or a shell script (sh file) if you are in linux.  You can create a text file which includes all your javac commands and just run that file when you want to build.\r\n\r\nFor example, I use the following bat file to build one of my apps:\r\n\r\n    @echo off\r\n    echo Building Shazaam...\r\n    \r\n    del classes\\com\\aepryus\\shazaam\\*.* /q\r\n    del classes\\com\\aepryus\\shazaam\\engine\\*.* /q\r\n    del classes\\com\\aepryus\\shazaam\\domain\\*.* /q\r\n    del classes\\com\\aepryus\\shazaam\\persist\\*.* /q\r\n    del classes\\com\\aepryus\\shazaam\\view\\*.* /q\r\n    del classes\\com\\aepryus\\shazaam\\task\\*.* /q\r\n    del classes\\com\\aepryus\\shazaam\\action\\*.* /q\r\n    del classes\\com\\aepryus\\shazaam\\controller\\*.* /q\r\n    \r\n    javac src\\com\\aepryus\\shazaam\\*.java\t\t-classpath \\lib\\AepUtil.jar;\\lib\\AepXML.jar;\\lib\\AepLoom.jar; -d classes\r\n    javac src\\com\\aepryus\\shazaam\\engine\\*.java\t-classpath \\lib\\AepUtil.jar;\\lib\\AepXML.jar;\\lib\\AepLoom.jar;\\lib\\Sprout.jar;classes; -d classes\r\n    javac src\\com\\aepryus\\shazaam\\domain\\*.java\t-classpath \\lib\\AepUtil.jar;\\lib\\AepLoom.jar;\\lib\\Sprout.jar;classes; -d classes\r\n    javac src\\com\\aepryus\\shazaam\\persist\\*.java\t-classpath \\lib\\AepUtil.jar;\\lib\\AepLoom.jar;\\lib\\Sprout.jar;classes; -d classes\r\n    javac src\\com\\aepryus\\shazaam\\view\\*.java\t-classpath \\lib\\Servlet.jar;\\lib\\AepUtil.jar;\\lib\\AepXML.jar;\\lib\\AepLoom.jar;\\lib\\AepHTML.jar;\\lib\\Sprout.jar;classes; -d classes\r\n    javac src\\com\\aepryus\\shazaam\\task\\*.java\t-classpath \\lib\\AepUtil.jar;\\lib\\AepLoom.jar;\\lib\\AepHTML.jar;\\lib\\Sprout.jar;classes; -d classes\r\n    javac src\\com\\aepryus\\shazaam\\action\\*.java\t-classpath \\lib\\Servlet.jar;\\lib\\AepUtil.jar;\\lib\\AepLoom.jar;\\lib\\AepHTML.jar;\\lib\\Sprout.jar;classes; -d classes\r\n    javac src\\com\\aepryus\\shazaam\\controller\\*.java\t-classpath \\lib\\Servlet.jar;\\lib\\AepUtil.jar;\\lib\\AepXML.jar;\\lib\\AepRPC.jar;\\lib\\AepLoom.jar;\\lib\\AepHTML.jar;\\lib\\Sprout.jar;classes; -d classes\r\n    \r\n    cd classes\r\n    jar cf ..\\war\\WEB-INF\\lib\\Shazaam.jar .\r\n    cd..\r\n    \r\n    echo Complete\r\n\r\n","title":"Compiling multiple packages using the command line in Java","body":"<p>In many cases Ant is overkill.  Just use a BAT file if you are in windows or a shell script (sh file) if you are in linux.  You can create a text file which includes all your javac commands and just run that file when you want to build.</p>\n\n<p>For example, I use the following bat file to build one of my apps:</p>\n\n<pre><code>@echo off\necho Building Shazaam...\n\ndel classes\\com\\aepryus\\shazaam\\*.* /q\ndel classes\\com\\aepryus\\shazaam\\engine\\*.* /q\ndel classes\\com\\aepryus\\shazaam\\domain\\*.* /q\ndel classes\\com\\aepryus\\shazaam\\persist\\*.* /q\ndel classes\\com\\aepryus\\shazaam\\view\\*.* /q\ndel classes\\com\\aepryus\\shazaam\\task\\*.* /q\ndel classes\\com\\aepryus\\shazaam\\action\\*.* /q\ndel classes\\com\\aepryus\\shazaam\\controller\\*.* /q\n\njavac src\\com\\aepryus\\shazaam\\*.java        -classpath \\lib\\AepUtil.jar;\\lib\\AepXML.jar;\\lib\\AepLoom.jar; -d classes\njavac src\\com\\aepryus\\shazaam\\engine\\*.java -classpath \\lib\\AepUtil.jar;\\lib\\AepXML.jar;\\lib\\AepLoom.jar;\\lib\\Sprout.jar;classes; -d classes\njavac src\\com\\aepryus\\shazaam\\domain\\*.java -classpath \\lib\\AepUtil.jar;\\lib\\AepLoom.jar;\\lib\\Sprout.jar;classes; -d classes\njavac src\\com\\aepryus\\shazaam\\persist\\*.java    -classpath \\lib\\AepUtil.jar;\\lib\\AepLoom.jar;\\lib\\Sprout.jar;classes; -d classes\njavac src\\com\\aepryus\\shazaam\\view\\*.java   -classpath \\lib\\Servlet.jar;\\lib\\AepUtil.jar;\\lib\\AepXML.jar;\\lib\\AepLoom.jar;\\lib\\AepHTML.jar;\\lib\\Sprout.jar;classes; -d classes\njavac src\\com\\aepryus\\shazaam\\task\\*.java   -classpath \\lib\\AepUtil.jar;\\lib\\AepLoom.jar;\\lib\\AepHTML.jar;\\lib\\Sprout.jar;classes; -d classes\njavac src\\com\\aepryus\\shazaam\\action\\*.java -classpath \\lib\\Servlet.jar;\\lib\\AepUtil.jar;\\lib\\AepLoom.jar;\\lib\\AepHTML.jar;\\lib\\Sprout.jar;classes; -d classes\njavac src\\com\\aepryus\\shazaam\\controller\\*.java -classpath \\lib\\Servlet.jar;\\lib\\AepUtil.jar;\\lib\\AepXML.jar;\\lib\\AepRPC.jar;\\lib\\AepLoom.jar;\\lib\\AepHTML.jar;\\lib\\Sprout.jar;classes; -d classes\n\ncd classes\njar cf ..\\war\\WEB-INF\\lib\\Shazaam.jar .\ncd..\n\necho Complete\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7711537,"reputation":21,"user_id":5840645,"display_name":"pratyush"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1453796082,"creation_date":1453795560,"answer_id":35009256,"question_id":3512603,"body_markdown":"The real answer is javac -d (places where classes to be built and placed) -sourcepath (source of the package at the root) -cp (classpath of the dependencies which can again be classes folder where the classes are build and kept) full qualified name of the java file.\r\n\r\nEx javac -d classes -sourcepath src -cp classes src\\com\\test\\FirstSample.java\r\n\r\nThe FirstSample.java contains the main method. Pacjage structure mentioned below.\r\n\r\n**Before compiling**\r\n&lt;br/&gt;HomeApp\r\n&lt;br/&gt;--src\r\n&lt;br/&gt;------com\\test\\FirstSample.java (First Sample using the FirstPojo.java)\r\n&lt;br/&gt;------com\\test\\FirstPojo.java\r\n&lt;br/&gt;--classes\r\n\r\n**After compiling**\r\n&lt;br/&gt;\r\nHomeApp\r\n&lt;br/&gt;--src\r\n&lt;br/&gt;------com\\test\\FirstSample.java (FirstSample.java using the FirstPojo.java)\r\n&lt;br/&gt;------com\\test\\FirstPojo.java\r\n&lt;br/&gt;--classes\r\n&lt;br/&gt;------com\\test\\FirstSample.class (FirstSample.class using the FirstPojo.class)\r\n&lt;br/&gt;------com\\test\\FirstPojo.class","title":"Compiling multiple packages using the command line in Java","body":"<p>The real answer is javac -d (places where classes to be built and placed) -sourcepath (source of the package at the root) -cp (classpath of the dependencies which can again be classes folder where the classes are build and kept) full qualified name of the java file.</p>\n\n<p>Ex javac -d classes -sourcepath src -cp classes src\\com\\test\\FirstSample.java</p>\n\n<p>The FirstSample.java contains the main method. Pacjage structure mentioned below.</p>\n\n<p><strong>Before compiling</strong>\n<br/>HomeApp\n<br/>--src\n<br/>------com\\test\\FirstSample.java (First Sample using the FirstPojo.java)\n<br/>------com\\test\\FirstPojo.java\n<br/>--classes</p>\n\n<p><strong>After compiling</strong>\n<br/>\nHomeApp\n<br/>--src\n<br/>------com\\test\\FirstSample.java (FirstSample.java using the FirstPojo.java)\n<br/>------com\\test\\FirstPojo.java\n<br/>--classes\n<br/>------com\\test\\FirstSample.class (FirstSample.class using the FirstPojo.class)\n<br/>------com\\test\\FirstPojo.class</p>\n"},{"tags":[],"owner":{"account_id":13086550,"reputation":733,"user_id":9455340,"display_name":"chetan mahajan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617906215,"creation_date":1617906215,"answer_id":67009793,"question_id":3512603,"body_markdown":"1. To compile Run below command [it will store all class files in classes folder]\r\n\r\n   javac -d classes Support/\\*.java Me/\\*.java Wrapers/\\*.java\r\n\r\n **Note : classes folder should be created first\r\n\r\n2. To Run java application, run below command\r\n\r\n    java -cp classes {mainfile_name}\r\n\r\nReplace mainfile_name with your main file.","title":"Compiling multiple packages using the command line in Java","body":"<ol>\n<li><p>To compile Run below command [it will store all class files in classes folder]</p>\n<p>javac -d classes Support/*.java Me/*.java Wrapers/*.java</p>\n</li>\n</ol>\n<p>**Note : classes folder should be created first</p>\n<ol start=\"2\">\n<li><p>To Run java application, run below command</p>\n<p>java -cp classes {mainfile_name}</p>\n</li>\n</ol>\n<p>Replace mainfile_name with your main file.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1697813961,"post_id":77316338,"comment_id":136331027,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77316338/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29689050,"reputation":1,"user_id":22753808,"display_name":"the great bj"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697632423,"creation_date":1697632305,"answer_id":77316338,"question_id":3512603,"body_markdown":"to compile the java program as a whole package, you should execute the below command where the package is present (i.e your current location should have the folder which you are going to compile)\r\n\r\njavac -d &lt;destinaion&gt; &lt;package_name&gt;/*.java\r\n\r\n&lt;destination&gt; is where your compiled class files are stored \r\n&lt;package_name&gt; is either the package name or with its path\r\n\r\n\r\n&lt;package_name&gt;/*.java\r\n\r\nyou can add multiple packages at once ,with this syntax , seperated by a space.\r\n","title":"Compiling multiple packages using the command line in Java","body":"<p>to compile the java program as a whole package, you should execute the below command where the package is present (i.e your current location should have the folder which you are going to compile)</p>\n<p>javac -d  &lt;package_name&gt;/*.java</p>\n<p> is where your compiled class files are stored\n&lt;package_name&gt; is either the package name or with its path</p>\n<p>&lt;package_name&gt;/*.java</p>\n<p>you can add multiple packages at once ,with this syntax , seperated by a space.</p>\n"}],"owner":{"account_id":175019,"reputation":956,"user_id":404725,"accept_rate":57,"display_name":"Altober"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41248,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":3512661,"answer_count":8,"score":14,"last_activity_date":1697632423,"creation_date":1282138238,"question_id":3512603,"body_markdown":"Hi i have been using an IDE but now I need to run and compile from the command line. \r\n\r\nThe problem is that I have multiple packages and I have tried to find the answer but nothing has worked.  \r\n\r\nSo I have  \r\n\r\n    src/\r\n      Support/ (.java files)\r\n      Me/ (.java files) \r\n      Wrapers/ (.java files)  \r\n\r\nDo you know how to compile everything with javac?","title":"Compiling multiple packages using the command line in Java","body":"<p>Hi i have been using an IDE but now I need to run and compile from the command line. </p>\n\n<p>The problem is that I have multiple packages and I have tried to find the answer but nothing has worked.  </p>\n\n<p>So I have  </p>\n\n<pre><code>src/\n  Support/ (.java files)\n  Me/ (.java files) \n  Wrapers/ (.java files)  \n</code></pre>\n\n<p>Do you know how to compile everything with javac?</p>\n"},{"tags":["java","maven","pom.xml"],"answers":[{"tags":[],"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697630783,"creation_date":1697629090,"answer_id":77315951,"question_id":77315863,"body_markdown":"By default Maven does not put any dependency in the jar of your application, so you have to specify them on the command line (not only in the pom.xml) with `-cp` or [in the manifest][1]; the manifest can be [written automatically][2] by Maven and it can also specify the [main class][3] so you can avoid putting it on the command line.\r\nIn both cases you need external jars to run the application, this means that you have to distribute them with the application.\r\n\r\nAn anternative is to use the [Maven Shade Plugin][4] that creates an &quot;uber-jar&quot; containing both the classes of your application and the ones of the libraries.\r\n\r\nYet another alternative, just for developers, is to use Maven also to run the application, through the [Exec Maven Plugin][5].\r\n\r\nFinally, just for completeness, in applications based on Spring Boot (not your case), you can create a &quot;fat jar&quot; (a jar containing other jars) using the [Spring Boot Maven Plugin][6].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#JAR_Manifest\r\n  [2]: https://maven.apache.org/shared/maven-archiver/examples/classpath.html\r\n  [3]: https://maven.apache.org/shared/maven-archiver/examples/classpath.html#Make\r\n  [4]: https://maven.apache.org/plugins/maven-shade-plugin/\r\n  [5]: https://stackoverflow.com/q/1089285/685806\r\n  [6]: https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/","title":"mvn fails to integrate dependency","body":"<p>By default Maven does not put any dependency in the jar of your application, so you have to specify them on the command line (not only in the pom.xml) with <code>-cp</code> or <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#JAR_Manifest\" rel=\"nofollow noreferrer\">in the manifest</a>; the manifest can be <a href=\"https://maven.apache.org/shared/maven-archiver/examples/classpath.html\" rel=\"nofollow noreferrer\">written automatically</a> by Maven and it can also specify the <a href=\"https://maven.apache.org/shared/maven-archiver/examples/classpath.html#Make\" rel=\"nofollow noreferrer\">main class</a> so you can avoid putting it on the command line.\nIn both cases you need external jars to run the application, this means that you have to distribute them with the application.</p>\n<p>An anternative is to use the <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">Maven Shade Plugin</a> that creates an &quot;uber-jar&quot; containing both the classes of your application and the ones of the libraries.</p>\n<p>Yet another alternative, just for developers, is to use Maven also to run the application, through the <a href=\"https://stackoverflow.com/q/1089285/685806\">Exec Maven Plugin</a>.</p>\n<p>Finally, just for completeness, in applications based on Spring Boot (not your case), you can create a &quot;fat jar&quot; (a jar containing other jars) using the <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/\" rel=\"nofollow noreferrer\">Spring Boot Maven Plugin</a>.</p>\n"},{"tags":[],"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697631978,"creation_date":1697629729,"answer_id":77316023,"question_id":77315863,"body_markdown":"Your error is that jackson is not in the classpath, so it&#39;s not known by the jvm, it&#39;s not directly related to maven, but maven will help you to solve the problem, by using plugins.\r\n\r\nYou could just manually add the jackson jar files in your directory, then inyour classpath, but maven is here to help you, there are many solutions:\r\n 1. You get the jackson jars with maven and add it to your classpath: use the [dependency][1] plugin\r\n 2. You make an executable jar that uses the manifest to load the other jar and you also get separately the jars: use the [maven-jar plugin][2] + the [assembly plugin][3]. You will have a directory with your jar and the dependencies jar\r\n 3. you can use a plugin that make an uberjar, Spring uses this technology: see [start.spring.io][4]: you will have only one standalone jar that repackage your code and your dependencies.\r\n\r\nMy preferred technique for a standalone java application (without any framework) is using an executable jar (the solution 2.) , you will then run your application with:\r\n\r\n    java -jar myApplication.jar\r\n\r\n\r\nHere is the pom configuration:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\r\n    &lt;artifactId&gt;yourapp&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;java.mainClass&gt;com.mycompany.app.App&lt;/java.mainClass&gt;\r\n        &lt;dest&gt;${project.basedir}&lt;/dest&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.14.1&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n            &lt;version&gt;2.14.1&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;${java.mainClass}&lt;/mainClass&gt;\r\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                            &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\r\n                            &lt;addDefaultSpecificationEntries&gt;true&lt;/addDefaultSpecificationEntries&gt;\r\n                            &lt;classpathPrefix/&gt;\r\n                            &lt;useUniqueVersions&gt;true&lt;/useUniqueVersions&gt;\r\n                        &lt;/manifest&gt;\r\n                        &lt;manifestEntries&gt;\r\n                            &lt;Class-Path&gt;/conf&lt;/Class-Path&gt;\r\n                            &lt;Build-Time&gt;${maven.build.timestamp}&lt;/Build-Time&gt;\r\n                        &lt;/manifestEntries&gt;\r\n                        &lt;manifestFile/&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;finalName&gt;${project.name}&lt;/finalName&gt;\r\n                    &lt;descriptors&gt;\r\n                        &lt;descriptor&gt;assembly.xml&lt;/descriptor&gt;\r\n                    &lt;/descriptors&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;make-assembly&lt;/id&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;single&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nand the file assembly.xml\r\n\r\n    &lt;assembly xmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3&quot;\r\n          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n          xsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd&quot;&gt;\r\n    &lt;id&gt;dist&lt;/id&gt;\r\n    &lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\r\n    &lt;formats&gt;\r\n       &lt;format&gt;dir&lt;/format&gt;\r\n       &lt;format&gt;zip&lt;/format&gt;\r\n    &lt;/formats&gt;\r\n    &lt;fileSets&gt;\r\n        &lt;fileSet&gt;\r\n            &lt;directory&gt;${project.build.directory}/classes&lt;/directory&gt;\r\n            &lt;outputDirectory&gt;conf&lt;/outputDirectory&gt;\r\n            &lt;filtered&gt;true&lt;/filtered&gt;\r\n            &lt;includes&gt;\r\n                &lt;include&gt;conf.properties&lt;/include&gt;\r\n            &lt;/includes&gt;\r\n        &lt;/fileSet&gt;\r\n        &lt;fileSet&gt;\r\n            &lt;directory&gt;${project.build.directory}&lt;/directory&gt;\r\n            &lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;\r\n            &lt;includes&gt;\r\n                &lt;include&gt;*.jar&lt;/include&gt;\r\n            &lt;/includes&gt;\r\n        &lt;/fileSet&gt;\r\n        &lt;fileSet&gt;\r\n            &lt;directory&gt;${project.basedir}/src/bin&lt;/directory&gt;\r\n            &lt;outputDirectory&gt;bin&lt;/outputDirectory&gt;\r\n            &lt;includes&gt;\r\n                &lt;include&gt;*&lt;/include&gt;\r\n                &lt;include&gt;**/*&lt;/include&gt;\r\n            &lt;/includes&gt;\r\n        &lt;/fileSet&gt;\r\n    &lt;/fileSets&gt;\r\n\r\n    &lt;dependencySets&gt;\r\n        &lt;dependencySet&gt;\r\n            &lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;\r\n            &lt;useProjectArtifact&gt;false&lt;/useProjectArtifact&gt;\r\n        &lt;/dependencySet&gt;\r\n    &lt;/dependencySets&gt;\r\n    &lt;/assembly&gt;\r\n\r\n\r\nThe jar plugin permit to specify your main class and your dependencies lib on execution. the main class is configured in my pom.xml in the &quot;java.mainClass&quot; property.\r\n\r\nThe assembly plugin will get all the dependencies of your project, and even package your application as a zip for redistribution.\r\n\r\nYou go in target/...dist/lib directory you will have all your jars. you run java-jar yourapp.jar from this directory.\r\n\r\nThere is a little scaffhold to make it work from scratch because we don&#39;t use any framework, the TLDR solution would just be to use spring boot from start.spring.io, or other tool as proposed in the other answer.\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-dependency-plugin/\r\n  [2]: https://maven.apache.org/plugins/maven-jar-plugin/examples/manifest-customization.html\r\n  [3]: https://maven.apache.org/plugins/maven-assembly-plugin/\r\n  [4]: https://start.spring.io\r\n","title":"mvn fails to integrate dependency","body":"<p>Your error is that jackson is not in the classpath, so it's not known by the jvm, it's not directly related to maven, but maven will help you to solve the problem, by using plugins.</p>\n<p>You could just manually add the jackson jar files in your directory, then inyour classpath, but maven is here to help you, there are many solutions:</p>\n<ol>\n<li>You get the jackson jars with maven and add it to your classpath: use the <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/\" rel=\"nofollow noreferrer\">dependency</a> plugin</li>\n<li>You make an executable jar that uses the manifest to load the other jar and you also get separately the jars: use the <a href=\"https://maven.apache.org/plugins/maven-jar-plugin/examples/manifest-customization.html\" rel=\"nofollow noreferrer\">maven-jar plugin</a> + the <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"nofollow noreferrer\">assembly plugin</a>. You will have a directory with your jar and the dependencies jar</li>\n<li>you can use a plugin that make an uberjar, Spring uses this technology: see <a href=\"https://start.spring.io\" rel=\"nofollow noreferrer\">start.spring.io</a>: you will have only one standalone jar that repackage your code and your dependencies.</li>\n</ol>\n<p>My preferred technique for a standalone java application (without any framework) is using an executable jar (the solution 2.) , you will then run your application with:</p>\n<pre><code>java -jar myApplication.jar\n</code></pre>\n<p>Here is the pom configuration:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;com.mycompany&lt;/groupId&gt;\n&lt;artifactId&gt;yourapp&lt;/artifactId&gt;\n&lt;version&gt;0.0.0-SNAPSHOT&lt;/version&gt;\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;java.mainClass&gt;com.mycompany.app.App&lt;/java.mainClass&gt;\n    &lt;dest&gt;${project.basedir}&lt;/dest&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.14.1&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n        &lt;version&gt;2.14.1&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;${java.mainClass}&lt;/mainClass&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;\n                        &lt;addDefaultSpecificationEntries&gt;true&lt;/addDefaultSpecificationEntries&gt;\n                        &lt;classpathPrefix/&gt;\n                        &lt;useUniqueVersions&gt;true&lt;/useUniqueVersions&gt;\n                    &lt;/manifest&gt;\n                    &lt;manifestEntries&gt;\n                        &lt;Class-Path&gt;/conf&lt;/Class-Path&gt;\n                        &lt;Build-Time&gt;${maven.build.timestamp}&lt;/Build-Time&gt;\n                    &lt;/manifestEntries&gt;\n                    &lt;manifestFile/&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;finalName&gt;${project.name}&lt;/finalName&gt;\n                &lt;descriptors&gt;\n                    &lt;descriptor&gt;assembly.xml&lt;/descriptor&gt;\n                &lt;/descriptors&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;make-assembly&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>and the file assembly.xml</p>\n<pre><code>&lt;assembly xmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3&quot;\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n      xsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd&quot;&gt;\n&lt;id&gt;dist&lt;/id&gt;\n&lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\n&lt;formats&gt;\n   &lt;format&gt;dir&lt;/format&gt;\n   &lt;format&gt;zip&lt;/format&gt;\n&lt;/formats&gt;\n&lt;fileSets&gt;\n    &lt;fileSet&gt;\n        &lt;directory&gt;${project.build.directory}/classes&lt;/directory&gt;\n        &lt;outputDirectory&gt;conf&lt;/outputDirectory&gt;\n        &lt;filtered&gt;true&lt;/filtered&gt;\n        &lt;includes&gt;\n            &lt;include&gt;conf.properties&lt;/include&gt;\n        &lt;/includes&gt;\n    &lt;/fileSet&gt;\n    &lt;fileSet&gt;\n        &lt;directory&gt;${project.build.directory}&lt;/directory&gt;\n        &lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;\n        &lt;includes&gt;\n            &lt;include&gt;*.jar&lt;/include&gt;\n        &lt;/includes&gt;\n    &lt;/fileSet&gt;\n    &lt;fileSet&gt;\n        &lt;directory&gt;${project.basedir}/src/bin&lt;/directory&gt;\n        &lt;outputDirectory&gt;bin&lt;/outputDirectory&gt;\n        &lt;includes&gt;\n            &lt;include&gt;*&lt;/include&gt;\n            &lt;include&gt;**/*&lt;/include&gt;\n        &lt;/includes&gt;\n    &lt;/fileSet&gt;\n&lt;/fileSets&gt;\n\n&lt;dependencySets&gt;\n    &lt;dependencySet&gt;\n        &lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;\n        &lt;useProjectArtifact&gt;false&lt;/useProjectArtifact&gt;\n    &lt;/dependencySet&gt;\n&lt;/dependencySets&gt;\n&lt;/assembly&gt;\n</code></pre>\n<p>The jar plugin permit to specify your main class and your dependencies lib on execution. the main class is configured in my pom.xml in the &quot;java.mainClass&quot; property.</p>\n<p>The assembly plugin will get all the dependencies of your project, and even package your application as a zip for redistribution.</p>\n<p>You go in target/...dist/lib directory you will have all your jars. you run java-jar yourapp.jar from this directory.</p>\n<p>There is a little scaffhold to make it work from scratch because we don't use any framework, the TLDR solution would just be to use spring boot from start.spring.io, or other tool as proposed in the other answer.</p>\n"}],"owner":{"account_id":4088741,"reputation":6300,"user_id":3357352,"accept_rate":97,"display_name":"OrenIshShalom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697631875,"accepted_answer_id":77315951,"answer_count":2,"score":0,"last_activity_date":1697631978,"creation_date":1697628341,"question_id":77315863,"body_markdown":"I have a minimal maven project using [fasterxml/jackson-databind][1]\r\n```java\r\npackage com.mycompany.app;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\nclass MyValue { public String name; public int age; }\r\n\r\npublic class App {\r\n    public static void main( String[] args ) {\r\n        try {\r\n            // ObjectMapper mapper = new ObjectMapper();\r\n            // MyValue value = mapper.readValue(&quot;{\\&quot;name\\&quot;:\\&quot;Bob\\&quot;, \\&quot;age\\&quot;:13}&quot;, MyValue.class);\r\n            System.out.println( &quot;Hello&quot; );\r\n        }\r\n        catch (Exception e) {}\r\n    }\r\n}\r\n```\r\nWhen I compile and run *without* `jackson-databind` it&#39;s fine:\r\n```\r\n$ mvn package\r\n$ java -cp target/my-app-1.0-SNAPSHOT.jar com.mycompany.app.App\r\nHello\r\n```\r\nWhen I add the dependency to `pom.xml`, I *see* that relevant jars are downloaded\r\n```\r\n&lt; ... omitted for brevity ...&gt;\r\nDownloaded from central: https://repo.maven.apache.org/maven2/com/fasterxml/jackson/core/jackson-databind/2.13.0/jackson-databind-2.13.0.jar (1.5 MB at 3.0 MB/s)\r\n&lt; ... omitted for brevity ...&gt;\r\n```\r\nBut when I uncomment and try to use jackson-databind I get:\r\n```\r\n$ java -cp target/my-app-1.0-SNAPSHOT.jar com.mycompany.app.App\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ObjectMapper\r\n\tat com.mycompany.app.App.main(App.java:10)\r\nCaused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.ObjectMapper\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n```\r\nHere is the `pom.xml` for completeness:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;\r\n  &lt;artifactId&gt;my-app&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;name&gt;my-app&lt;/name&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\r\n    &lt;jackson.version&gt;2.13.0&lt;/jackson.version&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n      &lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n  &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind/2.15.0","title":"mvn fails to integrate dependency","body":"<p>I have a minimal maven project using <a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind/2.15.0\" rel=\"nofollow noreferrer\">fasterxml/jackson-databind</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.mycompany.app;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nclass MyValue { public String name; public int age; }\n\npublic class App {\n    public static void main( String[] args ) {\n        try {\n            // ObjectMapper mapper = new ObjectMapper();\n            // MyValue value = mapper.readValue(&quot;{\\&quot;name\\&quot;:\\&quot;Bob\\&quot;, \\&quot;age\\&quot;:13}&quot;, MyValue.class);\n            System.out.println( &quot;Hello&quot; );\n        }\n        catch (Exception e) {}\n    }\n}\n</code></pre>\n<p>When I compile and run <em>without</em> <code>jackson-databind</code> it's fine:</p>\n<pre><code>$ mvn package\n$ java -cp target/my-app-1.0-SNAPSHOT.jar com.mycompany.app.App\nHello\n</code></pre>\n<p>When I add the dependency to <code>pom.xml</code>, I <em>see</em> that relevant jars are downloaded</p>\n<pre><code>&lt; ... omitted for brevity ...&gt;\nDownloaded from central: https://repo.maven.apache.org/maven2/com/fasterxml/jackson/core/jackson-databind/2.13.0/jackson-databind-2.13.0.jar (1.5 MB at 3.0 MB/s)\n&lt; ... omitted for brevity ...&gt;\n</code></pre>\n<p>But when I uncomment and try to use jackson-databind I get:</p>\n<pre><code>$ java -cp target/my-app-1.0-SNAPSHOT.jar com.mycompany.app.App\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ObjectMapper\n    at com.mycompany.app.App.main(App.java:10)\nCaused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.ObjectMapper\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n</code></pre>\n<p>Here is the <code>pom.xml</code> for completeness:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;\n  &lt;artifactId&gt;my-app&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;my-app&lt;/name&gt;\n\n  &lt;properties&gt;\n    &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\n    &lt;jackson.version&gt;2.13.0&lt;/jackson.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n      &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n      &lt;version&gt;${jackson.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","maven","junit","junit5"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1613490994,"post_id":66227706,"comment_id":117087801,"body_markdown":"Do your tests classes have the `@Test` annotation?","body":"Do your tests classes have the <code>@Test</code> annotation?"},{"owner":{"account_id":11483871,"reputation":345,"user_id":8750902,"display_name":"farmlandbee"},"score":0,"creation_date":1613491078,"post_id":66227706,"comment_id":117087840,"body_markdown":"@hfontanez Yeah they do, I&#39;ll update question","body":"@hfontanez Yeah they do, I&#39;ll update question"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1613491121,"post_id":66227706,"comment_id":117087864,"body_markdown":"I found this https://stackoverflow.com/questions/59900637/error-testengine-with-id-junit-vintage-failed-to-discover-tests-with-spring. That should help you solve this issue.","body":"I found this <a href=\"https://stackoverflow.com/questions/59900637/error-testengine-with-id-junit-vintage-failed-to-discover-tests-with-spring\" title=\"error testengine with id junit vintage failed to discover tests with spring\">stackoverflow.com/questions/59900637/&hellip;</a>. That should help you solve this issue."},{"owner":{"account_id":11483871,"reputation":345,"user_id":8750902,"display_name":"farmlandbee"},"score":1,"creation_date":1613491190,"post_id":66227706,"comment_id":117087903,"body_markdown":"@hfontanez I&#39;ve looked at that already, that&#39;s a jackson error and for `junit-vintage`","body":"@hfontanez I&#39;ve looked at that already, that&#39;s a jackson error and for <code>junit-vintage</code>"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1613491405,"post_id":66227706,"comment_id":117088024,"body_markdown":"Are you having this issue when launching your tests from an IDE like Eclipse or IntelliJ? There are configuration on the IDE you must do for JUnit.","body":"Are you having this issue when launching your tests from an IDE like Eclipse or IntelliJ? There are configuration on the IDE you must do for JUnit."},{"owner":{"account_id":11483871,"reputation":345,"user_id":8750902,"display_name":"farmlandbee"},"score":1,"creation_date":1613491461,"post_id":66227706,"comment_id":117088055,"body_markdown":"It works when running the test from Intellij and if I run `mvn failsafe:integration-test`","body":"It works when running the test from Intellij and if I run <code>mvn failsafe:integration-test</code>"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1613491593,"post_id":66227706,"comment_id":117088123,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/228800/discussion-between-hfontanez-and-farmlandbee).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/228800/discussion-between-hfontanez-and-farmlandbee\">continue this discussion in chat</a>."},{"owner":{"account_id":11119792,"reputation":2581,"user_id":8163025,"display_name":"saver"},"score":0,"creation_date":1614730014,"post_id":66227706,"comment_id":117473176,"body_markdown":"@farmlandbee could you share the full pom.xml file?","body":"@farmlandbee could you share the full pom.xml file?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1614755264,"post_id":66227706,"comment_id":117478332,"body_markdown":"Please share an [MCVE](https://stackoverflow.com/help/mcve) on GitHub, just a minimal project reproducing the issue.","body":"Please share an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> on GitHub, just a minimal project reproducing the issue."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1614758688,"post_id":66227706,"comment_id":117479515,"body_markdown":"@farmlandbee I found this and I don&#39;t know if you tried it already https://github.com/Microsoft/vscode-java-test/issues/625","body":"@farmlandbee I found this and I don&#39;t know if you tried it already <a href=\"https://github.com/Microsoft/vscode-java-test/issues/625\" rel=\"nofollow noreferrer\">github.com/Microsoft/vscode-java-test/issues/625</a>"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1615747791,"post_id":66227706,"comment_id":117781468,"body_markdown":"You should really create and share a small example showing this behavior for others to examine if you want a good answer.  Right now this is pure guesswork.  Also you might be lucky that in the process of creating the small example you will find the solution yourself","body":"You should really create and share a small example showing this behavior for others to examine if you want a good answer.  Right now this is pure guesswork.  Also you might be lucky that in the process of creating the small example you will find the solution yourself"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1615749563,"post_id":66227706,"comment_id":117781989,"body_markdown":"@farmlandbee did you share your code on GitHub as suggested by kriegaex? I think that would be best.","body":"@farmlandbee did you share your code on GitHub as suggested by kriegaex? I think that would be best."},{"owner":{"account_id":9757929,"reputation":712,"user_id":7233978,"display_name":"The 5th column mouse"},"score":0,"creation_date":1616155027,"post_id":66227706,"comment_id":117920193,"body_markdown":"Could you maven with -X parameter and trace where the exception happend. Additionally you can check in your `target/generated-test-sources/test-annotations/` the annotations classes are created.","body":"Could you maven with -X parameter and trace where the exception happend. Additionally you can check in your <code>target&#47;generated-test-sources&#47;test-annotations&#47;</code> the annotations classes are created."},{"owner":{"account_id":4829160,"reputation":159,"user_id":6994979,"display_name":"Adam D."},"score":0,"creation_date":1678755624,"post_id":66227706,"comment_id":133591679,"body_markdown":"I fixed this problem by changing the junit scope in my pom.xml from test to compile then re-running it.","body":"I fixed this problem by changing the junit scope in my pom.xml from test to compile then re-running it."}],"answers":[{"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1615835069,"post_id":66641600,"comment_id":117810043,"body_markdown":"Alejandro, I am looking for a canonical answer. In essence, the OP is looking for an answer, and I am interesting in a slightly different answer because my problem, although related, it is not the same and thus requires a deeper understanding of the root cause in order for me to fix my issue. If you can expand on your answer, that might be what we both are looking for. This link should help you understand what a canonical answer is: https://meta.stackoverflow.com/a/291994/2851311","body":"Alejandro, I am looking for a canonical answer. In essence, the OP is looking for an answer, and I am interesting in a slightly different answer because my problem, although related, it is not the same and thus requires a deeper understanding of the root cause in order for me to fix my issue. If you can expand on your answer, that might be what we both are looking for. This link should help you understand what a canonical answer is: <a href=\"https://meta.stackoverflow.com/a/291994/2851311\">meta.stackoverflow.com/a/291994/2851311</a>"}],"tags":[],"owner":{"account_id":2862565,"reputation":223,"user_id":2457521,"display_name":"Alejandro Venegas"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615824571,"creation_date":1615824571,"answer_id":66641600,"question_id":66227706,"body_markdown":"Try to pass the profile via command like this : \r\n\r\n    mvn clean verify -Dspring.profiles.active=integration-test","title":"TestEngine with ID &#39;junit-jupiter&#39; failed to discover tests - Caused by: org.junit.platform.commons.JUnitException: ClassSelector resolution failed","body":"<p>Try to pass the profile via command like this :</p>\n<pre><code>mvn clean verify -Dspring.profiles.active=integration-test\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1616213865,"post_id":66713799,"comment_id":117938760,"body_markdown":"This is pretty good information. I&#39;m not sure if this will fix the OPs issue since he hasn&#39;t responded, but I&#39;m going to award you the bounty anyway.","body":"This is pretty good information. I&#39;m not sure if this will fix the OPs issue since he hasn&#39;t responded, but I&#39;m going to award you the bounty anyway."},{"owner":{"account_id":17474859,"reputation":2389,"user_id":12669945,"display_name":"Atmas"},"score":2,"creation_date":1616251284,"post_id":66713799,"comment_id":117946001,"body_markdown":"Thank you for awarding. I hope it helps! I&#39;m very curious for OP to respond too and confirm if it did.","body":"Thank you for awarding. I hope it helps! I&#39;m very curious for OP to respond too and confirm if it did."},{"owner":{"account_id":11483871,"reputation":345,"user_id":8750902,"display_name":"farmlandbee"},"score":1,"creation_date":1645621958,"post_id":66713799,"comment_id":125920311,"body_markdown":"@hfontanez By the time this answer was submitted, I had left to go to a new company.  I really like the answer though.","body":"@hfontanez By the time this answer was submitted, I had left to go to a new company.  I really like the answer though."},{"owner":{"account_id":17474859,"reputation":2389,"user_id":12669945,"display_name":"Atmas"},"score":0,"creation_date":1645708302,"post_id":66713799,"comment_id":125946801,"body_markdown":"Glad to help and also close the chapter on this actually being useful.","body":"Glad to help and also close the chapter on this actually being useful."}],"tags":[],"owner":{"account_id":17474859,"reputation":2389,"user_id":12669945,"display_name":"Atmas"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1616178484,"creation_date":1616178484,"answer_id":66713799,"question_id":66227706,"body_markdown":"I believe the problem would lie in one of the following areas. I don&#39;t think there&#39;s enough information to nail it down, but I wanted to give you all the avenues to explore and it&#39;s too much to put in one big comment.\r\n\r\nI have listed them in order of complexity.\r\n\r\n1. You haven&#39;t set up your custom integration tests fully\r\n\r\nThere is information relevant that may help you configure your profiles and utilize them here: https://stackoverflow.com/questions/39690094/spring-boot-default-profile-for-integration-tests\r\n\r\n2. The @ActiveProfiles indicates a profile name of &quot;integration&quot; but your profile name is &quot;integration-test&quot;\r\n\r\nIf this is it, then just update the annotation to be integration-test and you&#39;re done.\r\n\r\n3. The configuration of one of your annotations is incorrect or the classpath is incorrectly setup to allow the annotation to be recognized.\r\n\r\nI am not familiar with how a display name generator is chosen, but there is one line that stands out to me as the closest complaining point to review. The line in the stack trace is:\r\n    org.junit.jupiter.engine.descriptor.DisplayNameUtils.determineDisplayName(DisplayNameUtils.java:68)\r\n\r\nI believe this is the correct code that backs this line: http://www.howsoftworks.net/junjupen/DisplayNameUtils#determineDisplayName-AnnotatedElement-Supplier\r\n\r\nIt appears to be evaluating the entire class for annotations to try to pull back this one. However, above you have no DisplayName annotation configured, so I don&#39;t think it&#39;s a problem with DisplayName, but with one of the others.\r\n\r\nLooking further in the stack, it looks like it&#39;s attempting to utilize/cache the Annotations of the class itself. This may lead to the annotations cache evaluating ALL entries on the class at this point and displayName is just the first one being requested.\r\n\r\nIn that case, it&#39;s possible it&#39;s tripping up on one of your OTHER annotations that you simply haven&#39;t configured correctly. ArrayStore exception makes me wonder if you&#39;ve put an element where an array should be or vice-versa.\r\n\r\nHowever, researching further, it looks like this error (line 724 in AnnotationParser) relates to a suite of JDK issues that were properly fixed in one of the JDK-11 releases. It is indicated in other places as a &quot;sun.reflect.annotation.TypeNotPresentExceptionProxy&quot;.\r\n\r\nhttps://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-7183985\r\n\r\nThe gist of these bugs have to do with an Annotation referencing a class that&#39;s not in the classpath (the Type is not present). This is probably what&#39;s going on with one of your annotations in your configuration but from the posted information it&#39;s unlikely we can advise which one.\r\n\r\nUpgrading to a JDK where this is fixed would likely help you better pinpoint the root problem by reporting a better error for you with specific missing type information. If that&#39;s an option, you can choose to do that, too.\r\n\r\nThe root problem is likely that your new profile environment leads to a misconfiguration that&#39;s accidentally excluding a class that you need for the annotations on your test to be coherent.\r\n","title":"TestEngine with ID &#39;junit-jupiter&#39; failed to discover tests - Caused by: org.junit.platform.commons.JUnitException: ClassSelector resolution failed","body":"<p>I believe the problem would lie in one of the following areas. I don't think there's enough information to nail it down, but I wanted to give you all the avenues to explore and it's too much to put in one big comment.</p>\n<p>I have listed them in order of complexity.</p>\n<ol>\n<li>You haven't set up your custom integration tests fully</li>\n</ol>\n<p>There is information relevant that may help you configure your profiles and utilize them here: <a href=\"https://stackoverflow.com/questions/39690094/spring-boot-default-profile-for-integration-tests\">Spring-boot default profile for integration tests</a></p>\n<ol start=\"2\">\n<li>The @ActiveProfiles indicates a profile name of &quot;integration&quot; but your profile name is &quot;integration-test&quot;</li>\n</ol>\n<p>If this is it, then just update the annotation to be integration-test and you're done.</p>\n<ol start=\"3\">\n<li>The configuration of one of your annotations is incorrect or the classpath is incorrectly setup to allow the annotation to be recognized.</li>\n</ol>\n<p>I am not familiar with how a display name generator is chosen, but there is one line that stands out to me as the closest complaining point to review. The line in the stack trace is:\norg.junit.jupiter.engine.descriptor.DisplayNameUtils.determineDisplayName(DisplayNameUtils.java:68)</p>\n<p>I believe this is the correct code that backs this line: <a href=\"http://www.howsoftworks.net/junjupen/DisplayNameUtils#determineDisplayName-AnnotatedElement-Supplier\" rel=\"nofollow noreferrer\">http://www.howsoftworks.net/junjupen/DisplayNameUtils#determineDisplayName-AnnotatedElement-Supplier</a></p>\n<p>It appears to be evaluating the entire class for annotations to try to pull back this one. However, above you have no DisplayName annotation configured, so I don't think it's a problem with DisplayName, but with one of the others.</p>\n<p>Looking further in the stack, it looks like it's attempting to utilize/cache the Annotations of the class itself. This may lead to the annotations cache evaluating ALL entries on the class at this point and displayName is just the first one being requested.</p>\n<p>In that case, it's possible it's tripping up on one of your OTHER annotations that you simply haven't configured correctly. ArrayStore exception makes me wonder if you've put an element where an array should be or vice-versa.</p>\n<p>However, researching further, it looks like this error (line 724 in AnnotationParser) relates to a suite of JDK issues that were properly fixed in one of the JDK-11 releases. It is indicated in other places as a &quot;sun.reflect.annotation.TypeNotPresentExceptionProxy&quot;.</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-7183985\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-7183985</a></p>\n<p>The gist of these bugs have to do with an Annotation referencing a class that's not in the classpath (the Type is not present). This is probably what's going on with one of your annotations in your configuration but from the posted information it's unlikely we can advise which one.</p>\n<p>Upgrading to a JDK where this is fixed would likely help you better pinpoint the root problem by reporting a better error for you with specific missing type information. If that's an option, you can choose to do that, too.</p>\n<p>The root problem is likely that your new profile environment leads to a misconfiguration that's accidentally excluding a class that you need for the annotations on your test to be coherent.</p>\n"},{"comments":[{"owner":{"account_id":3558487,"reputation":1004,"user_id":2971549,"display_name":"Saman Salehi"},"score":2,"creation_date":1639546503,"post_id":70357781,"comment_id":124373462,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/70357781/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":15013628,"reputation":1,"user_id":10837281,"display_name":"Yinlei Chai"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639535311,"creation_date":1639535311,"answer_id":70357781,"question_id":66227706,"body_markdown":"i think the best way is  to click  File-&gt;InvalidateCaches/Restart...","title":"TestEngine with ID &#39;junit-jupiter&#39; failed to discover tests - Caused by: org.junit.platform.commons.JUnitException: ClassSelector resolution failed","body":"<p>i think the best way is  to click  File-&gt;InvalidateCaches/Restart...</p>\n"},{"comments":[{"owner":{"account_id":1066649,"reputation":617,"user_id":1067039,"accept_rate":100,"display_name":"Martin Charlesworth"},"score":1,"creation_date":1678962076,"post_id":74233034,"comment_id":133635753,"body_markdown":"Thanks Roger, this fixed it for me. My advice is to use the junit-bom to make sure all your dependency versions are aligned; junit5 has lots of modules.","body":"Thanks Roger, this fixed it for me. My advice is to use the junit-bom to make sure all your dependency versions are aligned; junit5 has lots of modules."}],"tags":[],"owner":{"account_id":9355,"reputation":6392,"user_id":17239,"accept_rate":76,"display_name":"Roger C S Wernersson"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1697631871,"creation_date":1666948130,"answer_id":74233034,"question_id":66227706,"body_markdown":"I had this problem too. I solved it by removing all JUnit libraries from IntelliJ / Project Structure / Libraries, and then compiling the project, failing, having IntelliJ resolve this by importing the latest version of JUnit.\r\n\r\nI&#39;m now on JUnit 5.9.1\r\n\r\nI believe the culprit was junit-platform-commons which is now on 1.9.1\r\n\r\nI got the idea from this JUnit 5 issue: https://github.com/junit-team/junit5/issues/2881\r\n","title":"TestEngine with ID &#39;junit-jupiter&#39; failed to discover tests - Caused by: org.junit.platform.commons.JUnitException: ClassSelector resolution failed","body":"<p>I had this problem too. I solved it by removing all JUnit libraries from IntelliJ / Project Structure / Libraries, and then compiling the project, failing, having IntelliJ resolve this by importing the latest version of JUnit.</p>\n<p>I'm now on JUnit 5.9.1</p>\n<p>I believe the culprit was junit-platform-commons which is now on 1.9.1</p>\n<p>I got the idea from this JUnit 5 issue: <a href=\"https://github.com/junit-team/junit5/issues/2881\" rel=\"nofollow noreferrer\">https://github.com/junit-team/junit5/issues/2881</a></p>\n"},{"tags":[],"owner":{"account_id":6783548,"reputation":1,"user_id":5223040,"display_name":"nitzv26"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1669970239,"creation_date":1669970239,"answer_id":74652892,"question_id":66227706,"body_markdown":"Basically, you need to ensure that the dependency version that you are using is compatible with the Java version that you are using. I was getting the same error. I had updated the `junit-jupiter` to `5.9.0` but I was using Java 11 due to which I was getting this error. On changing Java version to Java 17, the tests started running.","title":"TestEngine with ID &#39;junit-jupiter&#39; failed to discover tests - Caused by: org.junit.platform.commons.JUnitException: ClassSelector resolution failed","body":"<p>Basically, you need to ensure that the dependency version that you are using is compatible with the Java version that you are using. I was getting the same error. I had updated the <code>junit-jupiter</code> to <code>5.9.0</code> but I was using Java 11 due to which I was getting this error. On changing Java version to Java 17, the tests started running.</p>\n"}],"owner":{"account_id":11483871,"reputation":345,"user_id":8750902,"display_name":"farmlandbee"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29264,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":74233034,"answer_count":5,"score":14,"last_activity_date":1697631871,"creation_date":1613490677,"question_id":66227706,"body_markdown":"I am having an issue running my Integration Test.\r\n\r\nAs part of my Test, I use `exec-maven-plugin` to pull down other projects from source control and then run them locally so my Test can use that to perform against.\r\n\r\nMy Maven dependencies for JUnit are:\r\n\r\n```\r\n&lt;plugins&gt;\r\n\t&lt;plugin&gt;\r\n\t\t&lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;useModulePath&gt;false&lt;/useModulePath&gt;\r\n\t\t\t&lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\r\n\t\t\t&lt;skipTests&gt;false&lt;/skipTests&gt;\r\n\t\t\t&lt;includes&gt;\r\n\t\t\t\t&lt;include&gt;**/*IntegrationTest.java&lt;/include&gt;\r\n\t\t\t&lt;/includes&gt;\r\n\t    &lt;/configuration&gt;\r\n\t\t&lt;executions&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t&lt;goal&gt;integration-test&lt;/goal&gt;\r\n\t\t\t\t\t&lt;goal&gt;verify&lt;/goal&gt;\r\n\t\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t&lt;/executions&gt;\r\n\t&lt;/plugin&gt;\r\n&lt;/plugins&gt;\r\n...\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    &lt;version&gt;2.4.2&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;exclusions&gt;\r\n\t    &lt;exclusion&gt;\r\n\t\t    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t    &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI have created a profile called `integration-test` so that I can choose when to enable integration testing and also added an argument to `maven-surefire-plugin` called `skipUTs` so I can skip Unit Tests.\r\n\r\nThe output of running: `mvn clean verify -Pintegration-test -DskipUTs=true`\r\n\r\n```\r\norg.junit.platform.commons.JUnitException: TestEngine with ID &#39;junit-jupiter&#39; failed to discover tests\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:111)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:85)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:92)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:67)\r\n\tat org.apache.maven.surefire.junitplatform.TestPlanScannerFilter.accept(TestPlanScannerFilter.java:56)\r\n\tat org.apache.maven.surefire.api.util.DefaultScanResult.applyFilter(DefaultScanResult.java:102)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.scanClasspath(JUnitPlatformProvider.java:147)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)\r\nCaused by: org.junit.platform.commons.JUnitException: ClassSelector [className = &#39;com.farmlandbee.app.integration.IntegrationTest&#39;] resolution failed\r\n\tat org.junit.platform.launcher.listeners.discovery.AbortOnFailureLauncherDiscoveryListener.selectorProcessed(AbortOnFailureLauncherDiscoveryListener.java:39)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:102)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.run(EngineDiscoveryRequestResolution.java:82)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolver.resolve(EngineDiscoveryRequestResolver.java:113)\r\n\tat org.junit.jupiter.engine.discovery.DiscoverySelectorResolver.resolveSelectors(DiscoverySelectorResolver.java:45)\r\n\tat org.junit.jupiter.engine.JupiterTestEngine.discover(JupiterTestEngine.java:69)\r\n\tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:103)\r\n\t... 11 more\r\nCaused by: java.lang.ArrayStoreException\r\n\tat sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:724)\r\n\tat sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:531)\r\n\tat sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:355)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:286)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:120)\r\n\tat sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:72)\r\n\tat java.lang.Class.getAnnotationCache(Class.java:2535)\r\n\tat java.lang.Class.getDeclaredAnnotation(Class.java:2221)\r\n\tat org.junit.platform.commons.util.AnnotationUtils.findAnnotation(AnnotationUtils.java:128)\r\n\tat org.junit.platform.commons.util.AnnotationUtils.findAnnotation(AnnotationUtils.java:115)\r\n\tat org.junit.jupiter.engine.descriptor.DisplayNameUtils.determineDisplayName(DisplayNameUtils.java:68)\r\n\tat org.junit.jupiter.engine.descriptor.JupiterTestDescriptor.&lt;init&gt;(JupiterTestDescriptor.java:69)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.&lt;init&gt;(ClassBasedTestDescriptor.java:94)\r\n\tat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.&lt;init&gt;(ClassTestDescriptor.java:51)\r\n\tat org.junit.jupiter.engine.discovery.ClassSelectorResolver.newClassTestDescriptor(ClassSelectorResolver.java:119)\r\n\tat org.junit.jupiter.engine.discovery.ClassSelectorResolver.lambda$resolve$0(ClassSelectorResolver.java:71)\r\n\tat org.junit.jupiter.engine.discovery.ClassSelectorResolver$$Lambda$61/0000000000000000.apply(Unknown Source)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution$DefaultContext.createAndAdd(EngineDiscoveryRequestResolution.java:246)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution$DefaultContext.addToParent(EngineDiscoveryRequestResolution.java:209)\r\n\tat org.junit.jupiter.engine.discovery.ClassSelectorResolver.resolve(ClassSelectorResolver.java:71)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.lambda$resolve$2(EngineDiscoveryRequestResolution.java:134)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution$$Lambda$47/0000000000000000.apply(Unknown Source)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1359)\r\n\tat java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126)\r\n\tat java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:514)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:501)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:487)\r\n\tat java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:152)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:241)\r\n\tat java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:531)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:185)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:125)\r\n\tat org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:91)\r\n\t... 16 more\r\n```\r\n\r\n\r\nTest Class is roughly:\r\n\r\n```\r\n@SpringBootTest(classes = Application.class,\r\n        webEnvironment = WebEnvironment.RANDOM_PORT)\r\n@Import({SSLRestTemplateConfig.class})\r\n@ExtendWith(SpringExtension.class)\r\n@ActiveProfiles(profiles = {&quot;integration&quot;})\r\npublic class IntegrationTest {\r\n\r\n    @LocalServerPort\r\n    private int port;\r\n\r\n    private final RestTemplate restTemplate;\r\n\r\n    @Spy\r\n    private final Service Service;\r\n\r\n    private final IQueue&lt;String&gt; queue;\r\n\r\n    @Captor\r\n    ArgumentCaptor&lt;String&gt; captor;\r\n\r\n    @Autowired\r\n    public IntegrationTest(RestTemplate restTemplate,\r\n                                Service service,\r\n                                HazelcastInstance hazelcastInstance) {\r\n        this.restTemplate = restTemplate;\r\n        this.service = accountingQueueService;\r\n        this.queue = hazelcastInstance.getQueue(&quot;queue&quot;);\r\n    }\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        queue.clear();\r\n    }\r\n\r\n    @Test\r\n    public void IntegrationTest() throws InterruptedException {\r\n        ...\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nAny help would be greatly appreciated.","title":"TestEngine with ID &#39;junit-jupiter&#39; failed to discover tests - Caused by: org.junit.platform.commons.JUnitException: ClassSelector resolution failed","body":"<p>I am having an issue running my Integration Test.</p>\n<p>As part of my Test, I use <code>exec-maven-plugin</code> to pull down other projects from source control and then run them locally so my Test can use that to perform against.</p>\n<p>My Maven dependencies for JUnit are:</p>\n<pre><code>&lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M5&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;useModulePath&gt;false&lt;/useModulePath&gt;\n            &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\n            &lt;skipTests&gt;false&lt;/skipTests&gt;\n            &lt;includes&gt;\n                &lt;include&gt;**/*IntegrationTest.java&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;integration-test&lt;/goal&gt;\n                    &lt;goal&gt;verify&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n&lt;/plugins&gt;\n...\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;version&gt;2.4.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I have created a profile called <code>integration-test</code> so that I can choose when to enable integration testing and also added an argument to <code>maven-surefire-plugin</code> called <code>skipUTs</code> so I can skip Unit Tests.</p>\n<p>The output of running: <code>mvn clean verify -Pintegration-test -DskipUTs=true</code></p>\n<pre><code>org.junit.platform.commons.JUnitException: TestEngine with ID 'junit-jupiter' failed to discover tests\n    at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:111)\n    at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:85)\n    at org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:92)\n    at org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:67)\n    at org.apache.maven.surefire.junitplatform.TestPlanScannerFilter.accept(TestPlanScannerFilter.java:56)\n    at org.apache.maven.surefire.api.util.DefaultScanResult.applyFilter(DefaultScanResult.java:102)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.scanClasspath(JUnitPlatformProvider.java:147)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)\n    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\n    at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)\nCaused by: org.junit.platform.commons.JUnitException: ClassSelector [className = 'com.farmlandbee.app.integration.IntegrationTest'] resolution failed\n    at org.junit.platform.launcher.listeners.discovery.AbortOnFailureLauncherDiscoveryListener.selectorProcessed(AbortOnFailureLauncherDiscoveryListener.java:39)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:102)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.run(EngineDiscoveryRequestResolution.java:82)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolver.resolve(EngineDiscoveryRequestResolver.java:113)\n    at org.junit.jupiter.engine.discovery.DiscoverySelectorResolver.resolveSelectors(DiscoverySelectorResolver.java:45)\n    at org.junit.jupiter.engine.JupiterTestEngine.discover(JupiterTestEngine.java:69)\n    at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:103)\n    ... 11 more\nCaused by: java.lang.ArrayStoreException\n    at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:724)\n    at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:531)\n    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:355)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:286)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:120)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:72)\n    at java.lang.Class.getAnnotationCache(Class.java:2535)\n    at java.lang.Class.getDeclaredAnnotation(Class.java:2221)\n    at org.junit.platform.commons.util.AnnotationUtils.findAnnotation(AnnotationUtils.java:128)\n    at org.junit.platform.commons.util.AnnotationUtils.findAnnotation(AnnotationUtils.java:115)\n    at org.junit.jupiter.engine.descriptor.DisplayNameUtils.determineDisplayName(DisplayNameUtils.java:68)\n    at org.junit.jupiter.engine.descriptor.JupiterTestDescriptor.&lt;init&gt;(JupiterTestDescriptor.java:69)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.&lt;init&gt;(ClassBasedTestDescriptor.java:94)\n    at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.&lt;init&gt;(ClassTestDescriptor.java:51)\n    at org.junit.jupiter.engine.discovery.ClassSelectorResolver.newClassTestDescriptor(ClassSelectorResolver.java:119)\n    at org.junit.jupiter.engine.discovery.ClassSelectorResolver.lambda$resolve$0(ClassSelectorResolver.java:71)\n    at org.junit.jupiter.engine.discovery.ClassSelectorResolver$$Lambda$61/0000000000000000.apply(Unknown Source)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution$DefaultContext.createAndAdd(EngineDiscoveryRequestResolution.java:246)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution$DefaultContext.addToParent(EngineDiscoveryRequestResolution.java:209)\n    at org.junit.jupiter.engine.discovery.ClassSelectorResolver.resolve(ClassSelectorResolver.java:71)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.lambda$resolve$2(EngineDiscoveryRequestResolution.java:134)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution$$Lambda$47/0000000000000000.apply(Unknown Source)\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1359)\n    at java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126)\n    at java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:514)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:501)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:487)\n    at java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:152)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:241)\n    at java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:531)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:185)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:125)\n    at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:91)\n    ... 16 more\n</code></pre>\n<p>Test Class is roughly:</p>\n<pre><code>@SpringBootTest(classes = Application.class,\n        webEnvironment = WebEnvironment.RANDOM_PORT)\n@Import({SSLRestTemplateConfig.class})\n@ExtendWith(SpringExtension.class)\n@ActiveProfiles(profiles = {&quot;integration&quot;})\npublic class IntegrationTest {\n\n    @LocalServerPort\n    private int port;\n\n    private final RestTemplate restTemplate;\n\n    @Spy\n    private final Service Service;\n\n    private final IQueue&lt;String&gt; queue;\n\n    @Captor\n    ArgumentCaptor&lt;String&gt; captor;\n\n    @Autowired\n    public IntegrationTest(RestTemplate restTemplate,\n                                Service service,\n                                HazelcastInstance hazelcastInstance) {\n        this.restTemplate = restTemplate;\n        this.service = accountingQueueService;\n        this.queue = hazelcastInstance.getQueue(&quot;queue&quot;);\n    }\n\n    @BeforeEach\n    public void setup() {\n        queue.clear();\n    }\n\n    @Test\n    public void IntegrationTest() throws InterruptedException {\n        ...\n    }\n\n}\n\n</code></pre>\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["java","spring-boot","spring-cloud","fallback","openfeign"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1697634518,"post_id":77316262,"comment_id":136304437,"body_markdown":"Ribbon is not compatible with that version of spring cloud. Please use spring cloud loadbalancer","body":"Ribbon is not compatible with that version of spring cloud. Please use spring cloud loadbalancer"}],"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697631741,"creation_date":1697631741,"question_id":77316262,"body_markdown":"After Migrating the spring boot version from 2.0.8.RELEASE to 2.7.11 the feign fallback is not working. \r\n\r\nfacing below error \r\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 Internal Server Error] during [GET] to [https://sampleurl/test] []: [&lt;html&gt;&lt;head&gt;&lt;title&gt;Apache Tomcat/7.0.39 - Error report&lt;/title&gt;&lt;style&gt;&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans... (1177 bytes)] \r\n\r\nI am using below code \r\n```\r\n@FeignClient(name = &quot;myFeign&quot;, fallbackFactory = MyFeignClientFallbackFactory.class)\r\npublic interface MyFeignClient {\r\n     @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.GET, consumes = MediaType.APPLICATION_ATOM_XML_VALUE,produces = MediaType.APPLICATION_XML_VALUE)\r\n    String getValue(@RequestParam(&quot;param1&quot;) String param1);\r\n}\r\n```\r\nfallback factory class\r\n```\r\n@Component\r\npublic class MyFeignClientFallbackFactory implements FallbackFactory&lt;MyFeignClientFallback&gt; {\r\n\r\n    @Override\r\n    public MyFeignClientFallback create(Throwable cause) {\r\n        return new MyFeignClientFallback(cause);\r\n    }\r\n\r\n}\r\n```\r\n\r\nFallback class \r\n\r\n```\r\n\r\n@Slf4j\r\npublic class MyFeignClientFallback implements MyFeignClient{\r\n\r\n    \r\n\tprivate final Throwable cause;\r\n\r\n    public MyFeignClientFallback(Throwable cause) {\r\n        this.cause = cause;\r\n    }\r\n\r\n    @Override\r\n    public String getValue(String param1) {\r\n    \tmapErrorResponse(&quot;param1&quot;);\r\n        return null;\r\n    }\r\n   private void mapErrorResponse(String methodName) {\r\n        log.error(&quot;Error while calling feign method &quot; + methodName);\r\n    }\r\n```\r\nI am using springboot 2.7.11 with java 11 and spring cloud 2021.0.1 version \r\n\r\ndependencies for feign client \r\n\r\n```\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n &lt;version&gt;4.0.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n &lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt;\r\n  &lt;version&gt;2.2.10.RELEASE&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n```","title":"Feign Fallback is not working with Springboot 2.7.11","body":"<p>After Migrating the spring boot version from 2.0.8.RELEASE to 2.7.11 the feign fallback is not working.</p>\n<p>facing below error\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 Internal Server Error] during [GET] to [https://sampleurl/test] []: [Apache Tomcat/7.0.39 - Error report&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans... (1177 bytes)]</p>\n<p>I am using below code</p>\n<pre><code>@FeignClient(name = &quot;myFeign&quot;, fallbackFactory = MyFeignClientFallbackFactory.class)\npublic interface MyFeignClient {\n     @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.GET, consumes = MediaType.APPLICATION_ATOM_XML_VALUE,produces = MediaType.APPLICATION_XML_VALUE)\n    String getValue(@RequestParam(&quot;param1&quot;) String param1);\n}\n</code></pre>\n<p>fallback factory class</p>\n<pre><code>@Component\npublic class MyFeignClientFallbackFactory implements FallbackFactory&lt;MyFeignClientFallback&gt; {\n\n    @Override\n    public MyFeignClientFallback create(Throwable cause) {\n        return new MyFeignClientFallback(cause);\n    }\n\n}\n</code></pre>\n<p>Fallback class</p>\n<pre><code>\n@Slf4j\npublic class MyFeignClientFallback implements MyFeignClient{\n\n    \n    private final Throwable cause;\n\n    public MyFeignClientFallback(Throwable cause) {\n        this.cause = cause;\n    }\n\n    @Override\n    public String getValue(String param1) {\n        mapErrorResponse(&quot;param1&quot;);\n        return null;\n    }\n   private void mapErrorResponse(String methodName) {\n        log.error(&quot;Error while calling feign method &quot; + methodName);\n    }\n</code></pre>\n<p>I am using springboot 2.7.11 with java 11 and spring cloud 2021.0.1 version</p>\n<p>dependencies for feign client</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n &lt;version&gt;4.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n &lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt;\n  &lt;version&gt;2.2.10.RELEASE&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1697631097,"post_id":77316135,"comment_id":136303631,"body_markdown":"Why are you requesting so much memory? Although that doesn’t seem like a lot. What device is it, and what are its constraints?","body":"Why are you requesting so much memory? Although that doesn’t seem like a lot. What device is it, and what are its constraints?"},{"owner":{"account_id":29253731,"reputation":1,"user_id":22412520,"display_name":"martine"},"score":0,"creation_date":1697631616,"post_id":77316135,"comment_id":136303749,"body_markdown":"I used emulator Nexus 5 API 25 android studio but when i run application i have this error after login and pwd app has stopping","body":"I used emulator Nexus 5 API 25 android studio but when i run application i have this error after login and pwd app has stopping"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1697632777,"post_id":77316135,"comment_id":136304048,"body_markdown":"Apparently you load images from drawable resource and your images are much to big or you have too much images or you put bitmaps in a list or.... We do not know what you do only that you thank in advance.","body":"Apparently you load images from drawable resource and your images are much to big or you have too much images or you put bitmaps in a list or.... We do not know what you do only that you thank in advance."},{"owner":{"account_id":29253731,"reputation":1,"user_id":22412520,"display_name":"martine"},"score":0,"creation_date":1697632923,"post_id":77316135,"comment_id":136304082,"body_markdown":"so I don&#39;t know what can i do to work this app thanks in advance","body":"so I don&#39;t know what can i do to work this app thanks in advance"},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":2,"creation_date":1697635859,"post_id":77316135,"comment_id":136304746,"body_markdown":"Is this bitmap specified in xml layout? If so - then you change it to load it in the code, and then while loading downsample it - you may use glide for it. See here for more info: https://developer.android.com/topic/performance/graphics/load-bitmap. Also it would be easier if you have shown more code.","body":"Is this bitmap specified in xml layout? If so - then you change it to load it in the code, and then while loading downsample it - you may use glide for it. See here for more info: <a href=\"https://developer.android.com/topic/performance/graphics/load-bitmap\" rel=\"nofollow noreferrer\">developer.android.com/topic/performance/graphics/load-bitmap</a>&zwnj;&#8203;. Also it would be easier if you have shown more code."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1697637205,"post_id":77316135,"comment_id":136305048,"body_markdown":"Perhaps you put a large bitmap in `res/drawable/` [instead of `res/drawable-nodpi/` or `res/drawable-anydpi/`](https://commonsware.com/blog/2015/12/21/nodpi-anydpi-wtf.html).","body":"Perhaps you put a large bitmap in <code>res&#47;drawable&#47;</code> <a href=\"https://commonsware.com/blog/2015/12/21/nodpi-anydpi-wtf.html\" rel=\"nofollow noreferrer\">instead of <code>res&#47;drawable-nodpi&#47;</code> or <code>res&#47;drawable-anydpi&#47;</code></a>."}],"answers":[{"comments":[{"owner":{"account_id":29253731,"reputation":1,"user_id":22412520,"display_name":"martine"},"score":0,"creation_date":1697631654,"post_id":77316170,"comment_id":136303756,"body_markdown":"I used pofiler but i can&#39;t know which problem and how can i resolved ?","body":"I used pofiler but i can&#39;t know which problem and how can i resolved ?"}],"tags":[],"owner":{"account_id":7349100,"reputation":10066,"user_id":5595926,"display_name":"ΓDΛ"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697630869,"creation_date":1697630869,"answer_id":77316170,"question_id":77316135,"body_markdown":"Using **Memory Profiler** will make it easier to detect the relevant problem.\r\n\r\n&gt; The Memory Profiler is a component in the Android Profiler that helps\r\n&gt; you identify memory leaks and memory churn that can lead to stutter,\r\n&gt; freezes, and even app crashes. It shows a realtime graph of your app&#39;s\r\n&gt; memory use and lets you capture a heap dump, force garbage\r\n&gt; collections, and track memory allocations.\r\n\r\n\r\nTo open the Memory Profiler, follow these steps:\r\n\r\n 1. Click **View &gt; Tool Windows &gt; Profiler** (you can also click Profile  in the toolbar).\r\n 2. Select the device and app process you want to profile from the Android Profiler toolbar. If you&#39;ve connected a device over USB but don&#39;t see it listed, ensure that you have enabled USB debugging.\r\n 3. Click anywhere in the MEMORY timeline to open the Memory Profiler.\r\n\r\n\r\n[Official Documentation][1]\r\n\r\n\r\n  [1]: https://developer.android.com/studio/profile/memory-profiler?hl=en","title":"java.lang.OutOfMemoryError: Failed to allocate a 399920016 byte allocation with 4194304 free bytes and 334MB until OOM","body":"<p>Using <strong>Memory Profiler</strong> will make it easier to detect the relevant problem.</p>\n<blockquote>\n<p>The Memory Profiler is a component in the Android Profiler that helps\nyou identify memory leaks and memory churn that can lead to stutter,\nfreezes, and even app crashes. It shows a realtime graph of your app's\nmemory use and lets you capture a heap dump, force garbage\ncollections, and track memory allocations.</p>\n</blockquote>\n<p>To open the Memory Profiler, follow these steps:</p>\n<ol>\n<li>Click <strong>View &gt; Tool Windows &gt; Profiler</strong> (you can also click Profile  in the toolbar).</li>\n<li>Select the device and app process you want to profile from the Android Profiler toolbar. If you've connected a device over USB but don't see it listed, ensure that you have enabled USB debugging.</li>\n<li>Click anywhere in the MEMORY timeline to open the Memory Profiler.</li>\n</ol>\n<p><a href=\"https://developer.android.com/studio/profile/memory-profiler?hl=en\" rel=\"nofollow noreferrer\">Official Documentation</a></p>\n"}],"owner":{"account_id":29253731,"reputation":1,"user_id":22412520,"display_name":"martine"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697631085,"creation_date":1697630599,"question_id":77316135,"body_markdown":"I have Project Android developed with java and xml when i run give me App has stopped and i get this error :\r\nThe error message you&#39;re seeing is an OutOfMemoryError, which occurs in Java when the Java Virtual Machine (JVM) runs out of memory. In this case, the error message indicates that there was an attempt to allocate 399,920,016 bytes of memory, but there were only 4,194,304 (4MB) free bytes left, and the total available memory was 343MB. This resulted in an &quot;Out of Memory&quot; situation\r\n\r\nI try this in your manifest file:\r\n\r\n```\r\n&gt; &lt;application\r\n&gt; android:allowBackup=&quot;true&quot;\r\n&gt; android:hardwareAccelerated=&quot;false&quot;\r\n&gt; android:icon=&quot;@mipmap/ic_launcher&quot;\r\n&gt; android:label=&quot;@string/app_name&quot;\r\n&gt; android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n&gt; android:largeHeap=&quot;true&quot;\r\n&gt; android:supportsRtl=&quot;true&quot;\r\n&gt; android:theme=&quot;@style/AppTheme&quot;&gt;\r\n```\r\n\r\nStack trace\r\n\r\n```\r\n2023-10-17 18:11:00.682 7647-7647/ma.chutta.appnutrition E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: ma.chutta.appnutrition, PID: 7647\r\n    java.lang.OutOfMemoryError: Failed to allocate a 399920016 byte allocation with 4194304 free     bytes and 334MB until OOM\r\n        at dalvik.system.VMRuntime.newNonMovableArray(Native Method)\r\n        at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)\r\n        at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:620)\r\n        at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:455)\r\n        at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:1155)\r\n        at android.content.res.ResourcesImpl.loadDrawableForCookie(ResourcesImpl.java:720)\r\n        at android.content.res.ResourcesImpl.loadDrawable(ResourcesImpl.java:571)\r\n        at android.content.res.Resources.loadDrawable(Resources.java:858)\r\n        at android.content.res.TypedArray.getDrawable(TypedArray.java:928)\r\n```\r\n\r\nHow can i resolve this issue \r\n\r\nThanks in advance \r\n\r\n\r\n\r\n","title":"java.lang.OutOfMemoryError: Failed to allocate a 399920016 byte allocation with 4194304 free bytes and 334MB until OOM","body":"<p>I have Project Android developed with java and xml when i run give me App has stopped and i get this error :\nThe error message you're seeing is an OutOfMemoryError, which occurs in Java when the Java Virtual Machine (JVM) runs out of memory. In this case, the error message indicates that there was an attempt to allocate 399,920,016 bytes of memory, but there were only 4,194,304 (4MB) free bytes left, and the total available memory was 343MB. This resulted in an &quot;Out of Memory&quot; situation</p>\n<p>I try this in your manifest file:</p>\n<pre><code>&gt; &lt;application\n&gt; android:allowBackup=&quot;true&quot;\n&gt; android:hardwareAccelerated=&quot;false&quot;\n&gt; android:icon=&quot;@mipmap/ic_launcher&quot;\n&gt; android:label=&quot;@string/app_name&quot;\n&gt; android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n&gt; android:largeHeap=&quot;true&quot;\n&gt; android:supportsRtl=&quot;true&quot;\n&gt; android:theme=&quot;@style/AppTheme&quot;&gt;\n</code></pre>\n<p>Stack trace</p>\n<pre><code>2023-10-17 18:11:00.682 7647-7647/ma.chutta.appnutrition E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: ma.chutta.appnutrition, PID: 7647\n    java.lang.OutOfMemoryError: Failed to allocate a 399920016 byte allocation with 4194304 free     bytes and 334MB until OOM\n        at dalvik.system.VMRuntime.newNonMovableArray(Native Method)\n        at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)\n        at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:620)\n        at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:455)\n        at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:1155)\n        at android.content.res.ResourcesImpl.loadDrawableForCookie(ResourcesImpl.java:720)\n        at android.content.res.ResourcesImpl.loadDrawable(ResourcesImpl.java:571)\n        at android.content.res.Resources.loadDrawable(Resources.java:858)\n        at android.content.res.TypedArray.getDrawable(TypedArray.java:928)\n</code></pre>\n<p>How can i resolve this issue</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","selenium-webdriver","cucumber","bdd"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":1,"creation_date":1697313564,"post_id":77292371,"comment_id":136265243,"body_markdown":"You are getting an NPE because you did not set a value to `addToCartPages`. This will require that you share the Web Driver between your step definition files. To share the webdriver between step definitions look at https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-picocontainer","body":"You are getting an NPE because you did not set a value to <code>addToCartPages</code>. This will require that you share the Web Driver between your step definition files. To share the webdriver between step definitions look at <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-picocontainer\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber-jvm/tree/main/&hellip;</a>"}],"owner":{"account_id":20800358,"reputation":11,"user_id":15276545,"display_name":"dody"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1697630834,"creation_date":1697277293,"question_id":77292371,"body_markdown":"Here my cucumber feature \r\n\r\n```\r\n@Regression\r\nFeature: Add to Cart Feature\r\n\r\n  Background: user successfully login to website saucedemo\r\n    Given [ui] user open web url &quot;https://www.saucedemo.com/&quot;\r\n    And [ui] user input username &quot;standard_user&quot; and password &quot;secret_sauce&quot;\r\n    When [ui] user click login button\r\n    Then [ui] user success login and redirected to homepage\r\n\r\n  @AddToCartTestCase-01\r\n  Scenario: user success add one product to cart\r\n    Given [ui] user click button add to cart on products page\r\n    Then [ui] user should see count of product is &quot;1&quot; in cart on products page\r\n```\r\n\r\nHere my step definition for user accses the website in LoginSteps.java\r\n\r\n```\r\npublic class LoginSteps {\r\n\r\n    WebDriver driver;\r\n\r\n    LoginPages loginPages;\r\n\r\n    @Given(&quot;[ui] user open web url {string}&quot;)\r\n    public void uiUserOpenWebUrl(String url) {\r\n        WebDriverManager.chromedriver().setup();\r\n        driver = new ChromeDriver();\r\n        driver.get(url);\r\n        driver.manage().window().maximize();\r\n        loginPages = PageFactory.initElements(driver, LoginPages.class);\r\n    }\r\n\r\n    @And(&quot;[ui] user input username {string} and password {string}&quot;)\r\n    public void uiUserInputUsernameAndPassword(String username, String password) {\r\n        loginPages.fillFormUsername(username);\r\n        loginPages.fillFormPassword(password);\r\n    }\r\n\r\n    @When(&quot;[ui] user click login button&quot;)\r\n    public void uiUserClickLoginButton() {\r\n        loginPages.clickLoginButton();\r\n    }\r\n\r\n    @Then(&quot;[ui] user success login and redirected to homepage&quot;)\r\n    public void uiUserSuccessLoginAndRedirectedToHomepage() {\r\n        assertThat(&quot;wrong homepage&quot;, driver.getCurrentUrl(), equalTo(&quot;https://www.saucedemo.com/inventory.html&quot;));\r\n    }\r\n\r\n    @Then(&quot;[ui] user should see error message {string}&quot;)\r\n    public void uiUserShouldSeeErrorMessage(String errorMessage) {\r\n        assertThat(&quot;wrong error message&quot;, loginPages.errorMessage(), equalTo(errorMessage));\r\n    }\r\n\r\n    @And(&quot;[ui] user close the browser&quot;)\r\n    public void uiUserCloseTheBrowser() {\r\n        driver.close();\r\n        driver.quit();\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nHere my step definition for user add product to cart in AddToCartSteps.java\r\n\r\n```\r\npublic class AddToCartSteps {\r\n    AddToCartPages addToCartPages;\r\n\r\n    @Given(&quot;[ui] user click button add to cart on products page&quot;)\r\n    public void uiUserClickButtonAddToCartOnProductsPage() {\r\n        addToCartPages.clickAddToCartButton();\r\n    }\r\n\r\n    @Then(&quot;[ui] user should see count of product is {string} in cart on products page&quot;)\r\n    public void uiUserShouldSeeCountOfProductIsInCartOnProductsPage(String count) {\r\n        assertThat(&quot;number of products in the cart does not change&quot;, addToCartPages.getCountOfProduct(), equalTo(count));\r\n    }\r\n\r\n}\r\n\r\n```\r\nIf I run my `@AddToCartTestCase-01`, I get a `java.lang.NullPointerException` in step &quot;*Given [ui] user click button add to cart on products page*.&quot;\r\n\r\nCould someone to help me, so I can run my scenario? Thank you.\r\n\r\nHere my [Foldering Project](https://i.stack.imgur.com/YTbWM.png)","title":"Got Null Pointer in BDD Cucumber Selenium UI","body":"<p>Here my cucumber feature</p>\n<pre><code>@Regression\nFeature: Add to Cart Feature\n\n  Background: user successfully login to website saucedemo\n    Given [ui] user open web url &quot;https://www.saucedemo.com/&quot;\n    And [ui] user input username &quot;standard_user&quot; and password &quot;secret_sauce&quot;\n    When [ui] user click login button\n    Then [ui] user success login and redirected to homepage\n\n  @AddToCartTestCase-01\n  Scenario: user success add one product to cart\n    Given [ui] user click button add to cart on products page\n    Then [ui] user should see count of product is &quot;1&quot; in cart on products page\n</code></pre>\n<p>Here my step definition for user accses the website in LoginSteps.java</p>\n<pre><code>public class LoginSteps {\n\n    WebDriver driver;\n\n    LoginPages loginPages;\n\n    @Given(&quot;[ui] user open web url {string}&quot;)\n    public void uiUserOpenWebUrl(String url) {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.get(url);\n        driver.manage().window().maximize();\n        loginPages = PageFactory.initElements(driver, LoginPages.class);\n    }\n\n    @And(&quot;[ui] user input username {string} and password {string}&quot;)\n    public void uiUserInputUsernameAndPassword(String username, String password) {\n        loginPages.fillFormUsername(username);\n        loginPages.fillFormPassword(password);\n    }\n\n    @When(&quot;[ui] user click login button&quot;)\n    public void uiUserClickLoginButton() {\n        loginPages.clickLoginButton();\n    }\n\n    @Then(&quot;[ui] user success login and redirected to homepage&quot;)\n    public void uiUserSuccessLoginAndRedirectedToHomepage() {\n        assertThat(&quot;wrong homepage&quot;, driver.getCurrentUrl(), equalTo(&quot;https://www.saucedemo.com/inventory.html&quot;));\n    }\n\n    @Then(&quot;[ui] user should see error message {string}&quot;)\n    public void uiUserShouldSeeErrorMessage(String errorMessage) {\n        assertThat(&quot;wrong error message&quot;, loginPages.errorMessage(), equalTo(errorMessage));\n    }\n\n    @And(&quot;[ui] user close the browser&quot;)\n    public void uiUserCloseTheBrowser() {\n        driver.close();\n        driver.quit();\n    }\n\n}\n\n</code></pre>\n<p>Here my step definition for user add product to cart in AddToCartSteps.java</p>\n<pre><code>public class AddToCartSteps {\n    AddToCartPages addToCartPages;\n\n    @Given(&quot;[ui] user click button add to cart on products page&quot;)\n    public void uiUserClickButtonAddToCartOnProductsPage() {\n        addToCartPages.clickAddToCartButton();\n    }\n\n    @Then(&quot;[ui] user should see count of product is {string} in cart on products page&quot;)\n    public void uiUserShouldSeeCountOfProductIsInCartOnProductsPage(String count) {\n        assertThat(&quot;number of products in the cart does not change&quot;, addToCartPages.getCountOfProduct(), equalTo(count));\n    }\n\n}\n\n</code></pre>\n<p>If I run my <code>@AddToCartTestCase-01</code>, I get a <code>java.lang.NullPointerException</code> in step &quot;<em>Given [ui] user click button add to cart on products page</em>.&quot;</p>\n<p>Could someone to help me, so I can run my scenario? Thank you.</p>\n<p>Here my <a href=\"https://i.stack.imgur.com/YTbWM.png\" rel=\"nofollow noreferrer\">Foldering Project</a></p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":2860791,"reputation":1601,"user_id":2456113,"accept_rate":96,"display_name":"kulatamicuda"},"score":0,"creation_date":1522520849,"post_id":49589955,"comment_id":86189781,"body_markdown":"Thanks, this was what I looked for. Some note - WebMvcConfigurerAdapter is deprecated so I used implements WebMvcConfigurer in my SpringBootApplication instead.","body":"Thanks, this was what I looked for. Some note - WebMvcConfigurerAdapter is deprecated so I used implements WebMvcConfigurer in my SpringBootApplication instead."},{"owner":{"account_id":2892786,"reputation":559,"user_id":2481159,"accept_rate":33,"display_name":"rainerfrey"},"score":0,"creation_date":1522618264,"post_id":49589955,"comment_id":86212821,"body_markdown":"Oh yeah I somehow assumed Spring 4.x/Spring Boot 1.x don&#39;t know why.","body":"Oh yeah I somehow assumed Spring 4.x/Spring Boot 1.x don&#39;t know why."}],"tags":[],"owner":{"account_id":2892786,"reputation":559,"user_id":2481159,"accept_rate":33,"display_name":"rainerfrey"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1522513555,"creation_date":1522513555,"answer_id":49589955,"question_id":49589389,"body_markdown":"Instead of creating your own `ContentNegotiationManagerFactoryBean` you could use a `ContentNegotiationConfigurer` to set up the default content type.\r\n\r\nIn your `WebMvcConfigurerAdapter`, override the method `configureContentNegotiation()` and call the method `defaultContentType()` on the supplied `ContentNegotiationConfigurer`. That way, the auto configured `ContentNegotiationManager` will have that option set.","title":"XML as a default response for Spring Rest","body":"<p>Instead of creating your own <code>ContentNegotiationManagerFactoryBean</code> you could use a <code>ContentNegotiationConfigurer</code> to set up the default content type.</p>\n\n<p>In your <code>WebMvcConfigurerAdapter</code>, override the method <code>configureContentNegotiation()</code> and call the method <code>defaultContentType()</code> on the supplied <code>ContentNegotiationConfigurer</code>. That way, the auto configured <code>ContentNegotiationManager</code> will have that option set.</p>\n"},{"tags":[],"owner":{"account_id":1295346,"reputation":4152,"user_id":1246547,"display_name":"Philzen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697630637,"creation_date":1697630637,"answer_id":77316140,"question_id":49589389,"body_markdown":"Simply using `RestTemplateBuilder` instead of `RestTemplate` solves this problem without any additional configuration.\r\n\r\nThis is hinted at in the [Spring Boot documentation](https://stackoverflow.com/a/58316756/1246547), although one may not realize immediately its importance:\r\n\r\n&gt;  The auto-configured `RestTemplateBuilder` ensures that **sensible `HttpMessageConverters` are applied to `RestTemplate` instances**.","title":"XML as a default response for Spring Rest","body":"<p>Simply using <code>RestTemplateBuilder</code> instead of <code>RestTemplate</code> solves this problem without any additional configuration.</p>\n<p>This is hinted at in the <a href=\"https://stackoverflow.com/a/58316756/1246547\">Spring Boot documentation</a>, although one may not realize immediately its importance:</p>\n<blockquote>\n<p>The auto-configured <code>RestTemplateBuilder</code> ensures that <strong>sensible <code>HttpMessageConverters</code> are applied to <code>RestTemplate</code> instances</strong>.</p>\n</blockquote>\n"}],"owner":{"account_id":2860791,"reputation":1601,"user_id":2456113,"accept_rate":96,"display_name":"kulatamicuda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1065,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49589955,"answer_count":2,"score":1,"last_activity_date":1697630637,"creation_date":1522510110,"question_id":49589389,"body_markdown":"I am using Spring Boot to create REST service which has to return by default application/XML as a response when no Accept header from the client is received. Unfortunately, Spring has as default JSON. How can I switch this default behaviour?\r\n\r\nSo far I have tried :\r\n\r\nAdding this dependency helped to produce XML (but only with Accept header set  from client - so no default):\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nTrying to set the default for `ContentNegotiationManagerFactoryBean` in my @SpringBoot class\r\n\r\n     @Bean\r\n      ContentNegotiationManagerFactoryBean contentNegotiationManagerFactoryBean() {\r\n        val myBean = new ContentNegotiationManagerFactoryBean();\r\n        myBean.setDefaultContentType(MediaType.APPLICATION_XML);\r\n        return myBean;\r\n      }\r\n\r\nresulted in error :\r\n\r\n&gt;   Method viewResolver in org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter required a single bean, but 2 were found\r\n\r\nTrying to exclude it via: \r\n\r\n    @SpringBootApplication(exclude = { ContentNegotiationManagerFactoryBean.class })\r\n\r\nonly gives another error:\r\n\r\n&gt;   The following classes could not be excluded because they are not auto-configuration classes\r\n\r\n","title":"XML as a default response for Spring Rest","body":"<p>I am using Spring Boot to create REST service which has to return by default application/XML as a response when no Accept header from the client is received. Unfortunately, Spring has as default JSON. How can I switch this default behaviour?</p>\n\n<p>So far I have tried :</p>\n\n<p>Adding this dependency helped to produce XML (but only with Accept header set  from client - so no default):</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Trying to set the default for <code>ContentNegotiationManagerFactoryBean</code> in my @SpringBoot class</p>\n\n<pre><code> @Bean\n  ContentNegotiationManagerFactoryBean contentNegotiationManagerFactoryBean() {\n    val myBean = new ContentNegotiationManagerFactoryBean();\n    myBean.setDefaultContentType(MediaType.APPLICATION_XML);\n    return myBean;\n  }\n</code></pre>\n\n<p>resulted in error :</p>\n\n<blockquote>\n  <p>Method viewResolver in org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter required a single bean, but 2 were found</p>\n</blockquote>\n\n<p>Trying to exclude it via: </p>\n\n<pre><code>@SpringBootApplication(exclude = { ContentNegotiationManagerFactoryBean.class })\n</code></pre>\n\n<p>only gives another error:</p>\n\n<blockquote>\n  <p>The following classes could not be excluded because they are not auto-configuration classes</p>\n</blockquote>\n"},{"tags":["java","gradle","build.gradle","javadoc","gradle-plugin"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697636760,"post_id":77315355,"comment_id":136304950,"body_markdown":"Wrong:  `&lt;font color=&quot;red&quot;&gt;`  Right:  `&lt;span style=&quot;color: red&quot;&gt;`  As aled pointed out, `&lt;font&gt;` is no longer a valid HTML element.","body":"Wrong:  <code>&lt;font color=&quot;red&quot;&gt;</code>  Right:  <code>&lt;span style=&quot;color: red&quot;&gt;</code>  As aled pointed out, <code>&lt;font&gt;</code> is no longer a valid HTML element."}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697630246,"creation_date":1697630246,"answer_id":77316094,"question_id":77315355,"body_markdown":"It is probable that your version of Javadoc is using already using HTML5 which deprecated the `&lt;font&gt;` tag. You should use CSS for styling.","title":"Font tag not supported in javadoc","body":"<p>It is probable that your version of Javadoc is using already using HTML5 which deprecated the <code>&lt;font&gt;</code> tag. You should use CSS for styling.</p>\n"}],"owner":{"account_id":21237617,"reputation":133,"user_id":15621590,"display_name":"Zonko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697630246,"creation_date":1697623618,"question_id":77315355,"body_markdown":"Im using Java 16 and build my project with gradle.\r\nI want to use ```gradle javadoc``` to generate a javadoc from my comments. But when i executed the command, I got following error: \r\n\r\n&gt; error: tag not supported in the generated HTML version: font\r\n\r\nThe class comment this error refers to looks something like this:\r\n```\r\n/**\r\n * Websocket to handle changes.&lt;br&gt;\r\n * &lt;font color=&quot;red&quot;&gt;A RED COMMENT &lt;/font&gt;&lt;br&gt;\r\n * &lt;font color=&quot;orange&quot;&gt;AN ORANGE COMMENT&lt;/font&gt;\r\n **/\r\n```\r\n\r\nIntellij shows me the comment exactly like i want, but I get this error while generating javadoc.\r\n\r\nI did not configure the javadoc generation in the build.gradle or anywhere else. The only solution i found was to set the html version inside the javadoc step in build.gradle (https://stackoverflow.com/questions/50222047/enable-html5-javadoc-in-gradle) but this didn&#39;t change anything\r\n\r\nAny idea?","title":"Font tag not supported in javadoc","body":"<p>Im using Java 16 and build my project with gradle.\nI want to use <code>gradle javadoc</code> to generate a javadoc from my comments. But when i executed the command, I got following error:</p>\n<blockquote>\n<p>error: tag not supported in the generated HTML version: font</p>\n</blockquote>\n<p>The class comment this error refers to looks something like this:</p>\n<pre><code>/**\n * Websocket to handle changes.&lt;br&gt;\n * &lt;font color=&quot;red&quot;&gt;A RED COMMENT &lt;/font&gt;&lt;br&gt;\n * &lt;font color=&quot;orange&quot;&gt;AN ORANGE COMMENT&lt;/font&gt;\n **/\n</code></pre>\n<p>Intellij shows me the comment exactly like i want, but I get this error while generating javadoc.</p>\n<p>I did not configure the javadoc generation in the build.gradle or anywhere else. The only solution i found was to set the html version inside the javadoc step in build.gradle (<a href=\"https://stackoverflow.com/questions/50222047/enable-html5-javadoc-in-gradle\">Enable HTML5 Javadoc in Gradle</a>) but this didn't change anything</p>\n<p>Any idea?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697636178,"post_id":77316088,"comment_id":136304812,"body_markdown":"What&#39;s the content of your module-info.java?","body":"What&#39;s the content of your module-info.java?"},{"owner":{"account_id":29699750,"reputation":1,"user_id":22762193,"display_name":"Martian"},"score":0,"creation_date":1697640383,"post_id":77316088,"comment_id":136305827,"body_markdown":"just like \nmodule Test{\n       requires hadoop.common;\n}","body":"just like  module Test{        requires hadoop.common; }"},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1697640862,"post_id":77316088,"comment_id":136305931,"body_markdown":"List all your dependencies in that file or just delete it.","body":"List all your dependencies in that file or just delete it."}],"owner":{"account_id":29699750,"reputation":1,"user_id":22762193,"display_name":"Martian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698058313,"answer_count":0,"score":0,"last_activity_date":1697630230,"creation_date":1697630230,"question_id":77316088,"body_markdown":"I want to use all the functions under org.apache.hadoop.fs, but I keep getting errors when I try to import it. The error message is in the image.\r\n[enter image description here](https://i.stack.imgur.com/ZjMuX.png)\r\n\r\n\r\nI hope to be able to reference it correctly. thanks","title":"In Eclipse, I&#39;ve already imported a JAR library for Java, but why do I get errors when I use the import statement?","body":"<p>I want to use all the functions under org.apache.hadoop.fs, but I keep getting errors when I try to import it. The error message is in the image.\n<a href=\"https://i.stack.imgur.com/ZjMuX.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I hope to be able to reference it correctly. thanks</p>\n"},{"tags":["java","hibernate","hibernate-tools","jboss-tools"],"answers":[{"comments":[{"owner":{"account_id":4008991,"reputation":481,"user_id":3302928,"accept_rate":43,"display_name":"Herman Zun"},"score":7,"creation_date":1559943824,"post_id":50850406,"comment_id":99592153,"body_markdown":"why doesn&#39;t work in 5.3 and 5.4 versions of hibernate?","body":"why doesn&#39;t work in 5.3 and 5.4 versions of hibernate?"},{"owner":{"account_id":943530,"reputation":583,"user_id":971221,"accept_rate":40,"display_name":"Nicolas400"},"score":0,"creation_date":1570557435,"post_id":50850406,"comment_id":102947670,"body_markdown":"I&#39;m using Spring Boot, that comes with Hibernate 5.3, can I downgrade to 5.2 ? how? Best Regards","body":"I&#39;m using Spring Boot, that comes with Hibernate 5.3, can I downgrade to 5.2 ? how? Best Regards"},{"owner":{"account_id":943530,"reputation":583,"user_id":971221,"accept_rate":40,"display_name":"Nicolas400"},"score":0,"creation_date":1570558505,"post_id":50850406,"comment_id":102948121,"body_markdown":"I read that Annotation could be created with right click on source (https://docs.jboss.org/tools/4.0.0.Final/en/hibernatetools/html_single/index.html#map_config_editor #4.11)","body":"I read that Annotation could be created with right click on source (<a href=\"https://docs.jboss.org/tools/4.0.0.Final/en/hibernatetools/html_single/index.html#map_config_editor\" rel=\"nofollow noreferrer\">docs.jboss.org/tools/4.0.0.Final/en/hibernatetools/html_sin&zwnj;&#8203;gle/&hellip;</a> #4.11)"},{"owner":{"account_id":1080401,"reputation":599,"user_id":1077548,"accept_rate":79,"display_name":"bodtx"},"score":1,"creation_date":1582796990,"post_id":50850406,"comment_id":106903556,"body_markdown":"@Nicolas400 Generate your entities in a separate project with hibernate 5.2 as dependencie, then take the generated sources to your project where you will be able to use hibernate 5.+","body":"@Nicolas400 Generate your entities in a separate project with hibernate 5.2 as dependencie, then take the generated sources to your project where you will be able to use hibernate 5.+"},{"owner":{"account_id":9428979,"reputation":622,"user_id":7013109,"accept_rate":86,"display_name":"RMagen"},"score":3,"creation_date":1582927565,"post_id":50850406,"comment_id":106958198,"body_markdown":"@bodtx You dont need to do that,see in the question how to generate the entities using eclipse and then in the configuration window there is dropdown where you can change the hibernate version","body":"@bodtx You dont need to do that,see in the question how to generate the entities using eclipse and then in the configuration window there is dropdown where you can change the hibernate version"},{"owner":{"account_id":110135,"reputation":3989,"user_id":291561,"accept_rate":84,"display_name":"Doo Dah"},"score":0,"creation_date":1589469978,"post_id":50850406,"comment_id":109313430,"body_markdown":"I know this post is a few years old. But nothing I am doing gives me annotations. I have tried checking the box for using &quot;Java 5 syntax&quot; and &quot;Generate EJB3 annotations&quot;. I have also tried using Hibernate 5.2. Other ideas?","body":"I know this post is a few years old. But nothing I am doing gives me annotations. I have tried checking the box for using &quot;Java 5 syntax&quot; and &quot;Generate EJB3 annotations&quot;. I have also tried using Hibernate 5.2. Other ideas?"},{"owner":{"account_id":1198357,"reputation":1090,"user_id":1169587,"accept_rate":28,"display_name":"user1169587"},"score":0,"creation_date":1700329935,"post_id":50850406,"comment_id":136642368,"body_markdown":"for my jboss hibernate tool, in console configuration setting, no choice of 5.2, but before 5.4 is 4.3, anyway, after changing console configuration hibernate version to 4.3, then can generate annotation class, but is this a hibernate tool bug?","body":"for my jboss hibernate tool, in console configuration setting, no choice of 5.2, but before 5.4 is 4.3, anyway, after changing console configuration hibernate version to 4.3, then can generate annotation class, but is this a hibernate tool bug?"}],"tags":[],"owner":{"account_id":9428979,"reputation":622,"user_id":7013109,"accept_rate":86,"display_name":"RMagen"},"comment_count":7,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1528955233,"creation_date":1528955233,"answer_id":50850406,"question_id":50837574,"body_markdown":"After spending two days on it , I found the problem..\r\nmy hibernate version is 5.3 and still after changing the hibernate version to 5.2 (in the hibernate configuration window ) - it worked !!","title":"Annotation not created when generating Hibernate mapping files","body":"<p>After spending two days on it , I found the problem..\nmy hibernate version is 5.3 and still after changing the hibernate version to 5.2 (in the hibernate configuration window ) - it worked !!</p>\n"},{"tags":[],"owner":{"account_id":14203528,"reputation":49,"user_id":10260793,"display_name":"Rezak_tizi"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1534955377,"creation_date":1534955377,"answer_id":51971337,"question_id":50837574,"body_markdown":"After changing different possibilities in the configuration and connection, I changed the hibernate version from **5.3 to 5.2** and it works now ! (Tested on Photon and Oxygen versions of Eclipse)","title":"Annotation not created when generating Hibernate mapping files","body":"<p>After changing different possibilities in the configuration and connection, I changed the hibernate version from <strong>5.3 to 5.2</strong> and it works now ! (Tested on Photon and Oxygen versions of Eclipse)</p>\n"},{"tags":[],"owner":{"account_id":3977648,"reputation":76,"user_id":3280440,"display_name":"oury.ba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594632072,"creation_date":1594631693,"answer_id":62872765,"question_id":50837574,"body_markdown":"In my case I have to  check the checkboxe **&quot;Generate EJB3 annotations&quot;** with hibernate version 5.2 to make it work fine !\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ziYU0.png","title":"Annotation not created when generating Hibernate mapping files","body":"<p>In my case I have to  check the checkboxe <strong>&quot;Generate EJB3 annotations&quot;</strong> with hibernate version 5.2 to make it work fine !</p>\n<p><a href=\"https://i.stack.imgur.com/ziYU0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ziYU0.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1697811300,"post_id":77316064,"comment_id":136330483,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77316064/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29698172,"reputation":1,"user_id":22760927,"display_name":"janvi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697630063,"creation_date":1697630063,"answer_id":77316064,"question_id":50837574,"body_markdown":"In hibernate Code Generation change the version to 4.3. In case you want to use a version greater than 4.3 change it later after generating classes.","title":"Annotation not created when generating Hibernate mapping files","body":"<p>In hibernate Code Generation change the version to 4.3. In case you want to use a version greater than 4.3 change it later after generating classes.</p>\n"}],"owner":{"account_id":9428979,"reputation":622,"user_id":7013109,"accept_rate":86,"display_name":"RMagen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3951,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":50850406,"answer_count":4,"score":5,"last_activity_date":1697630063,"creation_date":1528893705,"question_id":50837574,"body_markdown":"I am following this link to generate hibernate file \r\n\r\nhttps://www.mkyong.com/hibernate/how-to-generate-code-with-hibernate-tools/\r\n\r\nthe files are generated but without annotation.\r\nI checked the &quot;generate EJB3 annotation &quot; but still it is not working\r\nthe DB is Postgres.\r\nI use to do it the same way and it was working fine..\r\nfew weeks ago I upgrade to eclipse to oxygen and change my workplace \r\nsince then it is not working.. \r\ndoes any body know if there is a log file for the activity ? maybe I can find some thing there ? \r\n\r\nthis is my hibernate.cfg.xml file \r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n\t&lt;session-factory&gt;\r\n\r\n\t\t&lt;property name=&quot;hibernate.bytecode.use_reflection_optimizer&quot;&gt;false&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;org.postgresql.Driver&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernate.connection.password&quot;&gt;password&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:postgresql://xxxxx/yyy&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernate.connection.username&quot;&gt;user&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\r\n\t\t&lt;!-- &lt;property name=&quot;hibernate.enable_lazy_load_no_trans&quot;&gt;false&lt;/property&gt; --&gt;\r\n\t\t&lt;property name=&quot;hibernate.search.autoregister_listeners&quot;&gt;true&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernate.validator.apply_to_ddl&quot;&gt;false&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernate.temp.use_jdbc_metadata_defaults&quot;&gt;false&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernate.enable_lazy_load_no_trans&quot;&gt;true&lt;/property&gt;\r\n\t\r\n\r\n\t&lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;","title":"Annotation not created when generating Hibernate mapping files","body":"<p>I am following this link to generate hibernate file </p>\n\n<p><a href=\"https://www.mkyong.com/hibernate/how-to-generate-code-with-hibernate-tools/\" rel=\"noreferrer\">https://www.mkyong.com/hibernate/how-to-generate-code-with-hibernate-tools/</a></p>\n\n<p>the files are generated but without annotation.\nI checked the \"generate EJB3 annotation \" but still it is not working\nthe DB is Postgres.\nI use to do it the same way and it was working fine..\nfew weeks ago I upgrade to eclipse to oxygen and change my workplace \nsince then it is not working.. \ndoes any body know if there is a log file for the activity ? maybe I can find some thing there ? </p>\n\n<p>this is my hibernate.cfg.xml file </p>\n\n<p>\n\n\n    </p>\n\n<pre><code>    &lt;property name=\"hibernate.bytecode.use_reflection_optimizer\"&gt;false&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.driver_class\"&gt;org.postgresql.Driver&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.password\"&gt;password&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.url\"&gt;jdbc:postgresql://xxxxx/yyy&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.username\"&gt;user&lt;/property&gt;\n    &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\n    &lt;!-- &lt;property name=\"hibernate.enable_lazy_load_no_trans\"&gt;false&lt;/property&gt; --&gt;\n    &lt;property name=\"hibernate.search.autoregister_listeners\"&gt;true&lt;/property&gt;\n    &lt;property name=\"hibernate.validator.apply_to_ddl\"&gt;false&lt;/property&gt;\n    &lt;property name=\"hibernate.temp.use_jdbc_metadata_defaults\"&gt;false&lt;/property&gt;\n    &lt;property name=\"hibernate.enable_lazy_load_no_trans\"&gt;true&lt;/property&gt;\n\n\n&lt;/session-factory&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","spring","spring-boot","logging"],"comments":[{"owner":{"account_id":4767709,"reputation":1245,"user_id":3853405,"accept_rate":25,"display_name":"Jaspreet Jolly"},"score":0,"creation_date":1563780780,"post_id":57140132,"comment_id":100797509,"body_markdown":"I have a similar problem in past, CommonsRequestLoggingFilter does not provides any out of box option to log payload in before request as the request body is in InputStream which can be read only once. But I remember there are solutions where people have written there own filters in which they use ContentCachingRequestWrapper so that request body can be read twice.","body":"I have a similar problem in past, CommonsRequestLoggingFilter does not provides any out of box option to log payload in before request as the request body is in InputStream which can be read only once. But I remember there are solutions where people have written there own filters in which they use ContentCachingRequestWrapper so that request body can be read twice."},{"owner":{"account_id":4767709,"reputation":1245,"user_id":3853405,"accept_rate":25,"display_name":"Jaspreet Jolly"},"score":1,"creation_date":1563781438,"post_id":57140132,"comment_id":100797861,"body_markdown":"Here are the few examples for reference:- http://www.programmergirl.com/spring-http-request-logging/ ,  https://github.com/yuhuachang/java-spring-boot-samples/blob/master/spring-rest-logging/src/main/java/com/example/restlogging/logging/HttpRequestResponseLoggingFilter.java","body":"Here are the few examples for reference:- <a href=\"http://www.programmergirl.com/spring-http-request-logging/\" rel=\"nofollow noreferrer\">programmergirl.com/spring-http-request-logging</a> ,  <a href=\"https://github.com/yuhuachang/java-spring-boot-samples/blob/master/spring-rest-logging/src/main/java/com/example/restlogging/logging/HttpRequestResponseLoggingFilter.java\" rel=\"nofollow noreferrer\">github.com/yuhuachang/java-spring-boot-samples/blob/master/&hellip;</a>"},{"owner":{"account_id":13832917,"reputation":1699,"user_id":9985287,"display_name":"Mansur"},"score":1,"creation_date":1563785340,"post_id":57140132,"comment_id":100799700,"body_markdown":"`ContentCachingRequestWrapper#getContentAsByteArray` method returns an empty array, if the InputStream or Reader has not already been called. I tried to write a similar thing but the content array was always empty.","body":"<code>ContentCachingRequestWrapper#getContentAsByteArray</code> method returns an empty array, if the InputStream or Reader has not already been called. I tried to write a similar thing but the content array was always empty."},{"owner":{"account_id":13832917,"reputation":1699,"user_id":9985287,"display_name":"Mansur"},"score":0,"creation_date":1563787988,"post_id":57140132,"comment_id":100801163,"body_markdown":"@JaspreetJolly, thanks I used the example in Github link. It worked.","body":"@JaspreetJolly, thanks I used the example in Github link. It worked."}],"answers":[{"comments":[{"owner":{"account_id":13832917,"reputation":1699,"user_id":9985287,"display_name":"Mansur"},"score":1,"creation_date":1563881753,"post_id":57146057,"comment_id":100840245,"body_markdown":"How can I configure this? How can I &quot;activate&quot; this. Because I cannot add it as an Interceptor in Config class","body":"How can I configure this? How can I &quot;activate&quot; this. Because I cannot add it as an Interceptor in Config class"}],"tags":[],"owner":{"account_id":16364283,"reputation":23,"user_id":11819144,"display_name":"user11819144"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563798466,"creation_date":1563798466,"answer_id":57146057,"question_id":57140132,"body_markdown":"You can log both before and after interceptor&#39;s execute() method like below.\r\n\r\n    public class LoggingInterceptor implements ClientHttpRequestInterceptor {\r\n    \r\n      private final Logger log = LoggerFactory.getLogger(LoggingInterceptor.class);\r\n    \r\n      @Override\r\n      public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution)\r\n          throws IOException {\r\n        logRequest(request, body);\r\n        ClientHttpResponse response = execution.execute(request, body);\r\n        logResponse(response);\r\n        return response;\r\n      }\r\n    \r\n      private void logRequest(HttpRequest request, byte[] body) throws IOException {\r\n        if (log.isDebugEnabled()) {\r\n          log.debug(&quot;URI         : {}&quot;, request.getURI());\r\n          log.debug(&quot;Method      : {}&quot;, request.getMethod());\r\n          log.debug(&quot;Headers     : {}&quot;, request.getHeaders());\r\n          log.debug(&quot;Request body: {}&quot;, new String(body, &quot;UTF-8&quot;));\r\n        }\r\n      }\r\n    \r\n      private void logResponse(ClientHttpResponse response) throws IOException {\r\n        if (log.isDebugEnabled()) {\r\n          log.debug(&quot;Status code  : {}&quot;, response.getStatusCode());\r\n          log.debug(&quot;Status text  : {}&quot;, response.getStatusText());\r\n          log.debug(&quot;Headers      : {}&quot;, response.getHeaders());\r\n          log.debug(&quot;Response body: {}&quot;, StreamUtils.copyToString(response.getBody(), Charset.defaultCharset()));\r\n        }\r\n      }\r\n    }","title":"How to log request body before it is processed using CommonsRequestLoggingFilter?","body":"<p>You can log both before and after interceptor's execute() method like below.</p>\n\n<pre><code>public class LoggingInterceptor implements ClientHttpRequestInterceptor {\n\n  private final Logger log = LoggerFactory.getLogger(LoggingInterceptor.class);\n\n  @Override\n  public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution)\n      throws IOException {\n    logRequest(request, body);\n    ClientHttpResponse response = execution.execute(request, body);\n    logResponse(response);\n    return response;\n  }\n\n  private void logRequest(HttpRequest request, byte[] body) throws IOException {\n    if (log.isDebugEnabled()) {\n      log.debug(\"URI         : {}\", request.getURI());\n      log.debug(\"Method      : {}\", request.getMethod());\n      log.debug(\"Headers     : {}\", request.getHeaders());\n      log.debug(\"Request body: {}\", new String(body, \"UTF-8\"));\n    }\n  }\n\n  private void logResponse(ClientHttpResponse response) throws IOException {\n    if (log.isDebugEnabled()) {\n      log.debug(\"Status code  : {}\", response.getStatusCode());\n      log.debug(\"Status text  : {}\", response.getStatusText());\n      log.debug(\"Headers      : {}\", response.getHeaders());\n      log.debug(\"Response body: {}\", StreamUtils.copyToString(response.getBody(), Charset.defaultCharset()));\n    }\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":389722,"reputation":102,"user_id":749337,"display_name":"matthenry87"},"score":1,"creation_date":1605149110,"post_id":64797151,"comment_id":114565380,"body_markdown":"The other answer is an interceptor for a RestTemplate, not a Servlet interceptor.","body":"The other answer is an interceptor for a RestTemplate, not a Servlet interceptor."}],"tags":[],"owner":{"account_id":389722,"reputation":102,"user_id":749337,"display_name":"matthenry87"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605149066,"creation_date":1605149066,"answer_id":64797151,"question_id":57140132,"body_markdown":"I&#39;ve been researching this an I&#39;ve determined that it&#39;s probably not best practice to log the request/response bodies.\r\n\r\nStarting with Spring Boot 2.0 it&#39;s not (and really hasn&#39;t officially been) supported.\r\n\r\nhttps://github.com/spring-projects/spring-boot/issues/12953#issuecomment-383830749","title":"How to log request body before it is processed using CommonsRequestLoggingFilter?","body":"<p>I've been researching this an I've determined that it's probably not best practice to log the request/response bodies.</p>\n<p>Starting with Spring Boot 2.0 it's not (and really hasn't officially been) supported.</p>\n<p><a href=\"https://github.com/spring-projects/spring-boot/issues/12953#issuecomment-383830749\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/12953#issuecomment-383830749</a></p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697629489,"creation_date":1697629489,"answer_id":77316000,"question_id":57140132,"body_markdown":"IDK how to trigger flushing of request stream. I had to read body after `filterChain.doFilter()`:\r\n\r\n```\r\npublic class RequestResponseLogFilter extends OncePerRequestFilter {\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\r\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\r\n\r\n        try {\r\n            filterChain.doFilter(requestWrapper, responseWrapper);\r\n        } finally {\r\n            // Log request after filter chain completed - so req body stream flushed and non-empty.\r\n            logReq(requestWrapper);\r\n\r\n            logRsp(responseWrapper);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n","title":"How to log request body before it is processed using CommonsRequestLoggingFilter?","body":"<p>IDK how to trigger flushing of request stream. I had to read body after <code>filterChain.doFilter()</code>:</p>\n<pre><code>public class RequestResponseLogFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request);\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\n\n        try {\n            filterChain.doFilter(requestWrapper, responseWrapper);\n        } finally {\n            // Log request after filter chain completed - so req body stream flushed and non-empty.\n            logReq(requestWrapper);\n\n            logRsp(responseWrapper);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13832917,"reputation":1699,"user_id":9985287,"display_name":"Mansur"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4583,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1697629489,"creation_date":1563776309,"question_id":57140132,"body_markdown":"`CommonsRequestLoggingFilter` is working fine when logging the incoming request bodies. However, it only logs them after the processing is done. So, when I log the response body, it precedes the request body. I would like to know if there&#39;s a way to log the request before it is even processed.\r\n\r\nAnother thing I would like to mention is that `CommonsRequestLoggingFilter` actually is aware when the request is received, it logs message like `Request received at...`. However, that log doesn&#39;t contain the request body. After the message is processed, it logs almost exact thing with payload in it.\r\n\r\nMy configuration is the following for the `CommonsRequestLoggingFilter`. It has nothing special.\r\n```java\r\n@Bean\r\npublic CommonsRequestLoggingFilter requestLoggingFilter() {\r\n    CommonsRequestLoggingFilter loggingFilter = new CommonsRequestLoggingFilter();\r\n    loggingFilter.setIncludeClientInfo(true);\r\n    loggingFilter.setIncludeQueryString(true);\r\n    loggingFilter.setIncludePayload(true);\r\n    return loggingFilter;\r\n}\r\n```\r\n\r\n**Note**. Apparently there&#39;s a reason for the behavior mentioned above. It is said that `getContentAsByteArray` cannot be called until either `getInputStream` or `getReader` is called. This method is called inside the logger. I don&#39;t know what to do with this. Does it mean there&#39;s no way of logging request before?","title":"How to log request body before it is processed using CommonsRequestLoggingFilter?","body":"<p><code>CommonsRequestLoggingFilter</code> is working fine when logging the incoming request bodies. However, it only logs them after the processing is done. So, when I log the response body, it precedes the request body. I would like to know if there's a way to log the request before it is even processed.</p>\n\n<p>Another thing I would like to mention is that <code>CommonsRequestLoggingFilter</code> actually is aware when the request is received, it logs message like <code>Request received at...</code>. However, that log doesn't contain the request body. After the message is processed, it logs almost exact thing with payload in it.</p>\n\n<p>My configuration is the following for the <code>CommonsRequestLoggingFilter</code>. It has nothing special.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic CommonsRequestLoggingFilter requestLoggingFilter() {\n    CommonsRequestLoggingFilter loggingFilter = new CommonsRequestLoggingFilter();\n    loggingFilter.setIncludeClientInfo(true);\n    loggingFilter.setIncludeQueryString(true);\n    loggingFilter.setIncludePayload(true);\n    return loggingFilter;\n}\n</code></pre>\n\n<p><strong>Note</strong>. Apparently there's a reason for the behavior mentioned above. It is said that <code>getContentAsByteArray</code> cannot be called until either <code>getInputStream</code> or <code>getReader</code> is called. This method is called inside the logger. I don't know what to do with this. Does it mean there's no way of logging request before?</p>\n"},{"tags":["java","spring","rest","spring-mvc","spring-test"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1697629483,"post_id":77315964,"comment_id":136303296,"body_markdown":"Which version of Java are you using?","body":"Which version of Java are you using?"},{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":0,"creation_date":1697630251,"post_id":77315964,"comment_id":136303463,"body_markdown":"@MaksimEliseev 1.8","body":"@MaksimEliseev 1.8"}],"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697629181,"creation_date":1697629181,"question_id":77315964,"body_markdown":"I would like to create a Unit Test for a class which has dependency on RestTemplate and is doing REST calls:\r\n\r\n    public class SOClient { \r\n    \r\n        private final RestTemplate restTemplate;\r\n        ... // constructor etc\r\n        public Questions getQuestions() {\r\n            ResponseEntity&lt;Questions[]&gt; entity = restTemplate.getForEntity(&quot;http://some-api.com&quot;, Questions[].class);\r\n            ...\r\n    } \r\n\r\nI have followed this tutorial: https://www.baeldung.com/restclienttest-in-spring-boot.\r\nI have created a test which looks like:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @RestClientTest({SOClient.class})\r\n    public class SOClientTest {\r\n     \r\n       public void test(){}\r\n    }\r\n\r\n\r\n\r\nSo I followed exactly the example from the tutorial, but I am getting an error:\r\n\r\n&gt; java.lang.IllegalStateException: Unable to find a\r\n&gt; @SpringBootConfiguration, you need to use @ContextConfiguration or\r\n&gt; @SpringBootTest(classes=...) with your test\r\n\r\n I do not want to add @SpringBootTest annotation because I do not want to load database-layer etc. I would like to only setup the basics needed for my specific test not the whole Spring Context.","title":"Creating @RestClientTest test without @SpringBootTest gives error : &quot;java.lang.IllegalStateException: Unable to find a @SpringBootConfiguration&quot;","body":"<p>I would like to create a Unit Test for a class which has dependency on RestTemplate and is doing REST calls:</p>\n<pre><code>public class SOClient { \n\n    private final RestTemplate restTemplate;\n    ... // constructor etc\n    public Questions getQuestions() {\n        ResponseEntity&lt;Questions[]&gt; entity = restTemplate.getForEntity(&quot;http://some-api.com&quot;, Questions[].class);\n        ...\n} \n</code></pre>\n<p>I have followed this tutorial: <a href=\"https://www.baeldung.com/restclienttest-in-spring-boot\" rel=\"nofollow noreferrer\">https://www.baeldung.com/restclienttest-in-spring-boot</a>.\nI have created a test which looks like:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@RestClientTest({SOClient.class})\npublic class SOClientTest {\n \n   public void test(){}\n}\n</code></pre>\n<p>So I followed exactly the example from the tutorial, but I am getting an error:</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Unable to find a\n@SpringBootConfiguration, you need to use @ContextConfiguration or\n@SpringBootTest(classes=...) with your test</p>\n</blockquote>\n<p>I do not want to add @SpringBootTest annotation because I do not want to load database-layer etc. I would like to only setup the basics needed for my specific test not the whole Spring Context.</p>\n"},{"tags":["java","spring-boot","jackson-databind","jackson-dataformat-xml"],"answers":[{"tags":[],"owner":{"account_id":1317509,"reputation":5663,"user_id":1264058,"accept_rate":50,"display_name":"Johnny Lim"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1570689077,"creation_date":1570689077,"answer_id":58316756,"question_id":57706610,"body_markdown":"[Creating a `RestTemplate` bean from the auto-configured `RestTemplateBuilder` bean][1] and using it doesn&#39;t manifest the situation. This is [a test to demonstrate the situation][2].\r\n\r\n\r\n  [1]: https://github.com/izeye/spring-boot-throwaway-branches/blob/a6e2ae49c13a6c3f9daff39d0a785badda3a71ee/src/main/java/com/izeye/throwaway/WebConfig.java#L16-L19\r\n  [2]: https://github.com/izeye/spring-boot-throwaway-branches/blob/a6e2ae49c13a6c3f9daff39d0a785badda3a71ee/src/test/java/com/izeye/throwaway/RestTemplateTests.java#L34-L41","title":"How to set default MessageConverter to JSON with jackson-dataformat-xml added?","body":"<p><a href=\"https://github.com/izeye/spring-boot-throwaway-branches/blob/a6e2ae49c13a6c3f9daff39d0a785badda3a71ee/src/main/java/com/izeye/throwaway/WebConfig.java#L16-L19\" rel=\"nofollow noreferrer\">Creating a <code>RestTemplate</code> bean from the auto-configured <code>RestTemplateBuilder</code> bean</a> and using it doesn't manifest the situation. This is <a href=\"https://github.com/izeye/spring-boot-throwaway-branches/blob/a6e2ae49c13a6c3f9daff39d0a785badda3a71ee/src/test/java/com/izeye/throwaway/RestTemplateTests.java#L34-L41\" rel=\"nofollow noreferrer\">a test to demonstrate the situation</a>.</p>\n"},{"comments":[{"owner":{"account_id":9466837,"reputation":161,"user_id":7038893,"display_name":"David G."},"score":2,"creation_date":1605184258,"post_id":58376392,"comment_id":114576374,"body_markdown":"Is it Jackson that decides or is it Spring? This should be directly configurable via spring properties","body":"Is it Jackson that decides or is it Spring? This should be directly configurable via spring properties"},{"owner":{"account_id":4920597,"reputation":263,"user_id":3963254,"accept_rate":75,"display_name":"Matthias"},"score":1,"creation_date":1676998642,"post_id":58376392,"comment_id":133248470,"body_markdown":"Holy! Why on earth did they implement it that way?","body":"Holy! Why on earth did they implement it that way?"},{"owner":{"account_id":1295346,"reputation":4152,"user_id":1246547,"display_name":"Philzen"},"score":0,"creation_date":1697629329,"post_id":58376392,"comment_id":136303268,"body_markdown":"Using `RestTemplate` may be using Spring Boot wrong after all, as the documentation for `RestTemplateBuilder` hints at. See [below](https://stackoverflow.com/a/77315954/1246547) for full explanation.","body":"Using <code>RestTemplate</code> may be using Spring Boot wrong after all, as the documentation for <code>RestTemplateBuilder</code> hints at. See <a href=\"https://stackoverflow.com/a/77315954/1246547\">below</a> for full explanation."}],"tags":[],"owner":{"account_id":2221939,"reputation":423,"user_id":1961122,"display_name":"Cliff Pereira"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1571054634,"creation_date":1571054634,"answer_id":58376392,"question_id":57706610,"body_markdown":"What we ultimately found out, is that the the order of the message converters is highly important. Jackson seems to place the XML message converter before the JSON message converter. So we moved the XML message convert to the end and it worked. \r\n\r\n        \r\n        @Bean\r\n        RestTemplate restTemplate() {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        // move XML converter to the end of list\r\n        List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = restTemplate.getMessageConverters();\r\n        for (int i = 0; i &lt; messageConverters.size() -1 ; i++) {\r\n            if (messageConverters.get(i) instanceof MappingJackson2XmlHttpMessageConverter) {\r\n                Collections.swap(messageConverters, i,messageConverters.size() - 1);\r\n            }\r\n        }\r\n\r\n        restTemplate.setMessageConverters(messageConverters);\r\n\r\n        // add interceptors if necessary\r\n        restTemplate.setInterceptors(Collections.singletonList(catalogInterceptior()));\r\n        return restTemplate;\r\n    }","title":"How to set default MessageConverter to JSON with jackson-dataformat-xml added?","body":"<p>What we ultimately found out, is that the the order of the message converters is highly important. Jackson seems to place the XML message converter before the JSON message converter. So we moved the XML message convert to the end and it worked. </p>\n\n<pre><code>    @Bean\n    RestTemplate restTemplate() {\n    RestTemplate restTemplate = new RestTemplate();\n    // move XML converter to the end of list\n    List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = restTemplate.getMessageConverters();\n    for (int i = 0; i &lt; messageConverters.size() -1 ; i++) {\n        if (messageConverters.get(i) instanceof MappingJackson2XmlHttpMessageConverter) {\n            Collections.swap(messageConverters, i,messageConverters.size() - 1);\n        }\n    }\n\n    restTemplate.setMessageConverters(messageConverters);\n\n    // add interceptors if necessary\n    restTemplate.setInterceptors(Collections.singletonList(catalogInterceptior()));\n    return restTemplate;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1295346,"reputation":4152,"user_id":1246547,"display_name":"Philzen"},"score":0,"creation_date":1697629234,"post_id":71338805,"comment_id":136303246,"body_markdown":"For optimized memory usage, using constants throughout is advisable, i.e. `headers.add(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)`.","body":"For optimized memory usage, using constants throughout is advisable, i.e. <code>headers.add(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)</code>."}],"tags":[],"owner":{"account_id":6980681,"reputation":2784,"user_id":5353734,"display_name":"Nima Ajdari"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646317660,"creation_date":1646317660,"answer_id":71338805,"question_id":57706610,"body_markdown":"You could change the order of message converters as suggested by the accepted answer and that works perfectly fine. Jackson picks up the message converter with the highest priority, if there is no `Content-Type` header present for the request. \r\n\r\nSo if you don&#39;t want to change the config of `RestTemplate`, you could set the   `Content-Type` to `application/json` and that will instruct Jackson to use the correct message converter on your requests:\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.add(HttpHeaders.ACCEPT, &quot;application/json&quot;);\r\n    headers.add(HttpHeaders.CONTENT_TYPE, &quot;application/json&quot;);\r\n\r\n    var httpEntity = new HttpEntity&lt;&gt;(requestBody, headers);\r\n    ResponseEntity&lt;String&gt; responseEntity = restTemplate.exchange(\r\n        tenantConfig.getTokenUri(), HttpMethod.POST, httpEntity, String.class);","title":"How to set default MessageConverter to JSON with jackson-dataformat-xml added?","body":"<p>You could change the order of message converters as suggested by the accepted answer and that works perfectly fine. Jackson picks up the message converter with the highest priority, if there is no <code>Content-Type</code> header present for the request.</p>\n<p>So if you don't want to change the config of <code>RestTemplate</code>, you could set the   <code>Content-Type</code> to <code>application/json</code> and that will instruct Jackson to use the correct message converter on your requests:</p>\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.add(HttpHeaders.ACCEPT, &quot;application/json&quot;);\nheaders.add(HttpHeaders.CONTENT_TYPE, &quot;application/json&quot;);\n\nvar httpEntity = new HttpEntity&lt;&gt;(requestBody, headers);\nResponseEntity&lt;String&gt; responseEntity = restTemplate.exchange(\n    tenantConfig.getTokenUri(), HttpMethod.POST, httpEntity, String.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12361927,"reputation":11,"user_id":9015791,"display_name":"Jason Fisher"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647971165,"creation_date":1647970166,"answer_id":71576485,"question_id":57706610,"body_markdown":"The order is controlled by Spring. If you look at the default constructor for RestTemplate, the MessageConverters are added to the list based on the booleans determined from the static block directly above (there is one Spring property that is consulted--spring.xml.ignore--and that controls whether or not to exclude loading all the XML-related infrastructure). The order of the list does not seem modify-able during instatiation. This does seem like a limitation although there is a constructor that takes in a list of MessageConverters and uses that instead. ","title":"How to set default MessageConverter to JSON with jackson-dataformat-xml added?","body":"<p>The order is controlled by Spring. If you look at the default constructor for RestTemplate, the MessageConverters are added to the list based on the booleans determined from the static block directly above (there is one Spring property that is consulted--spring.xml.ignore--and that controls whether or not to exclude loading all the XML-related infrastructure). The order of the list does not seem modify-able during instatiation. This does seem like a limitation although there is a constructor that takes in a list of MessageConverters and uses that instead.</p>\n"},{"tags":[],"owner":{"account_id":1295346,"reputation":4152,"user_id":1246547,"display_name":"Philzen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697629093,"creation_date":1697629093,"answer_id":77315954,"question_id":57706610,"body_markdown":"As [Johnny Lim&#39;s answer](https://stackoverflow.com/a/58316756/1246547) very nicely outlined (backed up with a test), simply using `RestTemplateBuilder` instead of `RestTemplate` circumvents this problem.\r\n\r\nWell hidden in the [Spring Boot documentation](https://stackoverflow.com/a/58316756/1246547) it actually hints at this desired default behavior:\r\n\r\n&gt;  The auto-configured `RestTemplateBuilder` ensures that **sensible `HttpMessageConverters` are applied to `RestTemplate` instances**.\r\n\r\nWhen we encountered this problem in our applications, we solved it by adding a  bean like this to our Config:\r\n\r\n```java\r\n@Bean\r\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n    return builder.build();\r\n}\r\n```\r\n\r\nand then simply reusing that in all our Services:\r\n\r\n```java\r\n@Autowired\r\nprivate RestTemplate restTemplate;\r\n```\r\n\r\nOf course, one could as well replace all occurences of `new RestTemplate()` with `new RestTemplateBuilder.build()` instead as it also provides a convenient fluent API to configure any kind of request.","title":"How to set default MessageConverter to JSON with jackson-dataformat-xml added?","body":"<p>As <a href=\"https://stackoverflow.com/a/58316756/1246547\">Johnny Lim's answer</a> very nicely outlined (backed up with a test), simply using <code>RestTemplateBuilder</code> instead of <code>RestTemplate</code> circumvents this problem.</p>\n<p>Well hidden in the <a href=\"https://stackoverflow.com/a/58316756/1246547\">Spring Boot documentation</a> it actually hints at this desired default behavior:</p>\n<blockquote>\n<p>The auto-configured <code>RestTemplateBuilder</code> ensures that <strong>sensible <code>HttpMessageConverters</code> are applied to <code>RestTemplate</code> instances</strong>.</p>\n</blockquote>\n<p>When we encountered this problem in our applications, we solved it by adding a  bean like this to our Config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\n    return builder.build();\n}\n</code></pre>\n<p>and then simply reusing that in all our Services:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate RestTemplate restTemplate;\n</code></pre>\n<p>Of course, one could as well replace all occurences of <code>new RestTemplate()</code> with <code>new RestTemplateBuilder.build()</code> instead as it also provides a convenient fluent API to configure any kind of request.</p>\n"}],"owner":{"account_id":2221939,"reputation":423,"user_id":1961122,"display_name":"Cliff Pereira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4396,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":58376392,"answer_count":5,"score":9,"last_activity_date":1697629093,"creation_date":1567069176,"question_id":57706610,"body_markdown":"I have a working spring boot application that uses JSON as exchange data format. Now I had to add a service that sends their data only in xml. I added `jackson-dataformat-xml` to my pom and it worked perfectly. \r\n\r\n````java\r\n@Service\r\npublic class TemplateService {\r\n\r\n    private final RestTemplate restTemplate;\r\n    private final String serviceUri;\r\n\r\n    public TemplateService (RestTemplate restTemplate, @Value(&quot;${service.url_templates}&quot;) String serviceUri) {\r\n        this.restTemplate = restTemplate;\r\n        this.serviceUri = serviceUri;\r\n    }\r\n\r\n    public boolean createTemplate(Template template) {\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_XML));\r\n        headers.setContentType(MediaType.APPLICATION_XML);\r\n        HttpEntity entity = new HttpEntity&lt;&gt;(template, headers);\r\n        ResponseEntity&lt;Template&gt; response = restTemplate.exchange(serviceUri, HttpMethod.POST, entity, Template.class);\r\n        if (response.getStatusCode().is2xxSuccessful()) {\r\n            // do some stuff\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n````\r\n\r\n\r\nNow unfortunately after adding the dependency all my other POST methods send XML by default. Or the `Content` is set to `application/xml`.But I&#39;d like to have JSON here. \r\n\r\n````java\r\n@Service\r\npublic class SomeOtherService{\r\n\r\n    private final RestTemplate restTemplate;\r\n    private final String anotherUri;\r\n\r\n    public SomeOtherService(RestTemplate restTemplate, @Value(&quot;${anotherUri.url}&quot;) String anotherUri) {\r\n        this.restTemplate = restTemplate;\r\n        this.anotherUri = anotherUri;\r\n    }\r\n\r\n    public ComponentEntity doSomething(String projectId, MyNewComponent newComponent) {\r\n        ResponseEntity&lt;MyNewComponent&gt; result = this.restTemplate.exchange(anotherUri ,HttpMethod.POST, new HttpEntity&lt;&gt;(newComponent), MyNewComponent.class);\r\n    //...\r\n    }\r\n}\r\n\r\n````\r\n\r\nI did not set the headers explicitly as there are lots of POST requests and I don&#39;t want to alter them all. Is there a way to set the **default** `Content` to JSON? \r\n\r\nSo far I tried \r\n\r\n1. adding an interceptor. But sometimes I need to have XML. \r\n2. Overriding content negotiation\r\n````java\r\n    @Override\r\n\tpublic void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\r\n\t\tconfigurer.defaultContentType(MediaType.APPLICATION_JSON);\r\n\t}\r\n````\r\n3. setting\r\n````java\r\nrestTemplate.setMessageConverters(Collections.singletonList(new MappingJackson2HttpMessageConverter()));\r\n````\r\nand using a `new RestTemplate()` in the service where I want to have XML. \r\n\r\n==&gt; Number 3 actually works, but feels kind of wrong.\r\n\r\n\r\nI was expecting to set the default `Content` type somewhere so that JSON is used in normal cases where nothing is set and XML where I explicitly set the `Content` to XML.\r\n\r\nThanks for any help.","title":"How to set default MessageConverter to JSON with jackson-dataformat-xml added?","body":"<p>I have a working spring boot application that uses JSON as exchange data format. Now I had to add a service that sends their data only in xml. I added <code>jackson-dataformat-xml</code> to my pom and it worked perfectly. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class TemplateService {\n\n    private final RestTemplate restTemplate;\n    private final String serviceUri;\n\n    public TemplateService (RestTemplate restTemplate, @Value(\"${service.url_templates}\") String serviceUri) {\n        this.restTemplate = restTemplate;\n        this.serviceUri = serviceUri;\n    }\n\n    public boolean createTemplate(Template template) {\n        HttpHeaders headers = new HttpHeaders();\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_XML));\n        headers.setContentType(MediaType.APPLICATION_XML);\n        HttpEntity entity = new HttpEntity&lt;&gt;(template, headers);\n        ResponseEntity&lt;Template&gt; response = restTemplate.exchange(serviceUri, HttpMethod.POST, entity, Template.class);\n        if (response.getStatusCode().is2xxSuccessful()) {\n            // do some stuff\n            return true;\n        }\n        return false;\n    }\n}\n</code></pre>\n\n<p>Now unfortunately after adding the dependency all my other POST methods send XML by default. Or the <code>Content</code> is set to <code>application/xml</code>.But I'd like to have JSON here. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class SomeOtherService{\n\n    private final RestTemplate restTemplate;\n    private final String anotherUri;\n\n    public SomeOtherService(RestTemplate restTemplate, @Value(\"${anotherUri.url}\") String anotherUri) {\n        this.restTemplate = restTemplate;\n        this.anotherUri = anotherUri;\n    }\n\n    public ComponentEntity doSomething(String projectId, MyNewComponent newComponent) {\n        ResponseEntity&lt;MyNewComponent&gt; result = this.restTemplate.exchange(anotherUri ,HttpMethod.POST, new HttpEntity&lt;&gt;(newComponent), MyNewComponent.class);\n    //...\n    }\n}\n\n</code></pre>\n\n<p>I did not set the headers explicitly as there are lots of POST requests and I don't want to alter them all. Is there a way to set the <strong>default</strong> <code>Content</code> to JSON? </p>\n\n<p>So far I tried </p>\n\n<ol>\n<li>adding an interceptor. But sometimes I need to have XML. </li>\n<li>Overriding content negotiation</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\n        configurer.defaultContentType(MediaType.APPLICATION_JSON);\n    }\n</code></pre>\n\n<ol start=\"3\">\n<li>setting</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>restTemplate.setMessageConverters(Collections.singletonList(new MappingJackson2HttpMessageConverter()));\n</code></pre>\n\n<p>and using a <code>new RestTemplate()</code> in the service where I want to have XML. </p>\n\n<p>==> Number 3 actually works, but feels kind of wrong.</p>\n\n<p>I was expecting to set the default <code>Content</code> type somewhere so that JSON is used in normal cases where nothing is set and XML where I explicitly set the <code>Content</code> to XML.</p>\n\n<p>Thanks for any help.</p>\n"},{"tags":["java","java-native-interface","classloader"],"comments":[{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":0,"creation_date":1697117417,"post_id":77280991,"comment_id":136241397,"body_markdown":"You ClassLoader needs to know where to find that class. In your case, you should write a custom classloader, which grabs the bytes and loads them as a class.","body":"You ClassLoader needs to know where to find that class. In your case, you should write a custom classloader, which grabs the bytes and loads them as a class."},{"owner":{"account_id":28971563,"reputation":11,"user_id":22729136,"display_name":"HomaPlus"},"score":0,"creation_date":1697118491,"post_id":77280991,"comment_id":136241643,"body_markdown":"According to the documentation, https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#DefineClass this method defines a class from an array of bytes. I also tried to pass an empty or corrupted array, as expected - there was a class format error","body":"According to the documentation, <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#DefineClass\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/&hellip;</a> this method defines a class from an array of bytes. I also tried to pass an empty or corrupted array, as expected - there was a class format error"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1697137827,"post_id":77280991,"comment_id":136245579,"body_markdown":"The JVM uses slashes to separate packages and class names, not dots. Pass `plus/launch/Test` as name instead.","body":"The JVM uses slashes to separate packages and class names, not dots. Pass <code>plus&#47;launch&#47;Test</code> as name instead."},{"owner":{"account_id":28971563,"reputation":11,"user_id":22729136,"display_name":"HomaPlus"},"score":0,"creation_date":1697312153,"post_id":77280991,"comment_id":136265121,"body_markdown":"it worked, thanks","body":"it worked, thanks"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697469738,"post_id":77280991,"comment_id":136280725,"body_markdown":"You don’t need JNI for this.","body":"You don’t need JNI for this."},{"owner":{"account_id":28971563,"reputation":11,"user_id":22729136,"display_name":"HomaPlus"},"score":0,"creation_date":1697472180,"post_id":77280991,"comment_id":136281185,"body_markdown":"I know that there is a ClassLoader#defineClass, but it did not suit me for a number of reasons","body":"I know that there is a ClassLoader#defineClass, but it did not suit me for a number of reasons"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697578480,"post_id":77280991,"comment_id":136296864,"body_markdown":"Such as? The pain of engaging in JNI would outweigh them all to me, whatever they were, and I’ve written a lot of JNI.","body":"Such as? The pain of engaging in JNI would outweigh them all to me, whatever they were, and I’ve written a lot of JNI."}],"owner":{"account_id":28971563,"reputation":11,"user_id":22729136,"display_name":"HomaPlus"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697628367,"creation_date":1697116906,"question_id":77280991,"body_markdown":"I&#39;m trying to load java class from bytes using JNI.\r\n\r\nThis java class\r\n```java\r\npackage plus.launch;\r\n\r\npublic class Test {\r\n    static {\r\n        System.out.println(&quot;Test defined!&quot;);\r\n    }\r\n}\r\n```\r\nIn C++ I call this and get an error\r\n```c++\r\njclass DefClass(JNIEnv *env, const char *name, jobject loader, const jbyte *buf, jsize bufLen){\r\n//                   &quot;plus.launch.Test&quot; ^^\r\n\treturn (*env)-&gt;DefineClass(env, name, loader, buf, bufLen);\r\n}\r\n```\r\n\r\n&gt; java.lang.NoClassDefFoundError: plus/launch/Test (wrong name:\r\n&gt; plus.launch.Test)\r\n\r\nHow to fix it?\r\n\r\nAnd I get a strange error (I also tried putting the class name `Test`, `plus/launch/Test.class` and still get a similar error).","title":"Loading Java class from bytes using JNI","body":"<p>I'm trying to load java class from bytes using JNI.</p>\n<p>This java class</p>\n<pre class=\"lang-java prettyprint-override\"><code>package plus.launch;\n\npublic class Test {\n    static {\n        System.out.println(&quot;Test defined!&quot;);\n    }\n}\n</code></pre>\n<p>In C++ I call this and get an error</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>jclass DefClass(JNIEnv *env, const char *name, jobject loader, const jbyte *buf, jsize bufLen){\n//                   &quot;plus.launch.Test&quot; ^^\n    return (*env)-&gt;DefineClass(env, name, loader, buf, bufLen);\n}\n</code></pre>\n<blockquote>\n<p>java.lang.NoClassDefFoundError: plus/launch/Test (wrong name:\nplus.launch.Test)</p>\n</blockquote>\n<p>How to fix it?</p>\n<p>And I get a strange error (I also tried putting the class name <code>Test</code>, <code>plus/launch/Test.class</code> and still get a similar error).</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":4,"creation_date":1604316494,"post_id":64644670,"comment_id":114301354,"body_markdown":"Use `print` instead of `println`. The `ln` stands for &quot;line&quot; and means &quot;move to a new line after this&quot;.","body":"Use <code>print</code> instead of <code>println</code>. The <code>ln</code> stands for &quot;line&quot; and means &quot;move to a new line after this&quot;."}],"answers":[{"comments":[{"owner":{"account_id":19767778,"reputation":147,"user_id":14475364,"display_name":"Tyler P"},"score":0,"creation_date":1604318724,"post_id":64644873,"comment_id":114302310,"body_markdown":"I&#39;m getting an error saying that the &quot;package system does not exist&quot;. What does this mean? I&#39;m looking at the code you wrote and it seems like it would be fine.","body":"I&#39;m getting an error saying that the &quot;package system does not exist&quot;. What does this mean? I&#39;m looking at the code you wrote and it seems like it would be fine."},{"owner":{"account_id":19767778,"reputation":147,"user_id":14475364,"display_name":"Tyler P"},"score":1,"creation_date":1604319212,"post_id":64644873,"comment_id":114302503,"body_markdown":"I see what happened. I did a lowercase S instead of uppercase when I printed it.","body":"I see what happened. I did a lowercase S instead of uppercase when I printed it."},{"owner":{"account_id":15836212,"reputation":86,"user_id":11425994,"display_name":"Krayzzee"},"score":0,"creation_date":1604319234,"post_id":64644873,"comment_id":114302516,"body_markdown":"@TylerP Did you write the &quot;system&quot; in lowercase? That is the only reason I could think of.","body":"@TylerP Did you write the &quot;system&quot; in lowercase? That is the only reason I could think of."}],"tags":[],"owner":{"account_id":15836212,"reputation":86,"user_id":11425994,"display_name":"Krayzzee"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1604317178,"creation_date":1604317178,"answer_id":64644873,"question_id":64644670,"body_markdown":"If you want to print everything in 1 line then you need to change from println to print.\r\nI added another for loop to print the numbers in one line and added the line break after this loop.\r\n\r\n    for (int reverse = 9; reverse &gt;= 1; reverse--) {\r\n      for (int i = 1; i &lt;= reverse; i++)\r\n        System.out.print(reverse);\r\n      System.out.println();  // Line break after each number.\r\n    }\r\n\r\nOutput for the code above:\r\n\r\n    999999999\r\n    88888888\r\n    7777777\r\n    666666\r\n    55555\r\n    4444\r\n    333\r\n    22\r\n    1\r\n\r\nI hope i understood clearly what you wanted.","title":"How do I print a single character multiple times on one line?","body":"<p>If you want to print everything in 1 line then you need to change from println to print.\nI added another for loop to print the numbers in one line and added the line break after this loop.</p>\n<pre><code>for (int reverse = 9; reverse &gt;= 1; reverse--) {\n  for (int i = 1; i &lt;= reverse; i++)\n    System.out.print(reverse);\n  System.out.println();  // Line break after each number.\n}\n</code></pre>\n<p>Output for the code above:</p>\n<pre><code>999999999\n88888888\n7777777\n666666\n55555\n4444\n333\n22\n1\n</code></pre>\n<p>I hope i understood clearly what you wanted.</p>\n"},{"tags":[],"owner":{"account_id":19479850,"reputation":722,"user_id":14250428,"display_name":"Michael S. Molina"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604407743,"creation_date":1604317276,"answer_id":64644901,"question_id":64644670,"body_markdown":"This function accepts an integer and in reverse order, print out each integer the number of times as its magnitude. The first loop takes care of decrementing the number and the second loop resolves the magnitude. Each number is printed in a new line.\r\n\r\n    static void printReverse(int n) {\r\n       for (int i = n; i &gt; 0; i--) {\r\n           for (int j = 0; j &lt; i; j++) {\r\n               System.out.print(i + &quot; &quot;);\r\n           }\r\n           System.out.println();\r\n       }\r\n    }\r\n\r\nThis is the output:\r\n\r\n    n n n ... (n times)\r\n    n-1 n-1 ... (n-1 times)\r\n    n-2 n-2 ... (n-2 times)\r\n    ...\r\n    3 3 3\r\n    2 2\r\n    1","title":"How do I print a single character multiple times on one line?","body":"<p>This function accepts an integer and in reverse order, print out each integer the number of times as its magnitude. The first loop takes care of decrementing the number and the second loop resolves the magnitude. Each number is printed in a new line.</p>\n<pre><code>static void printReverse(int n) {\n   for (int i = n; i &gt; 0; i--) {\n       for (int j = 0; j &lt; i; j++) {\n           System.out.print(i + &quot; &quot;);\n       }\n       System.out.println();\n   }\n}\n</code></pre>\n<p>This is the output:</p>\n<pre><code>n n n ... (n times)\nn-1 n-1 ... (n-1 times)\nn-2 n-2 ... (n-2 times)\n...\n3 3 3\n2 2\n1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3901393,"reputation":386,"user_id":3229174,"display_name":"leldo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604318254,"creation_date":1604317867,"answer_id":64645067,"question_id":64644670,"body_markdown":"If you run Java 11 there&#39;s a [method &quot;repeat&quot;][1]  inherited from StringUtils I think : \r\n\r\n\r\n    static void printReverse(int n) {\r\n    \r\n    for (int reverse = n; reverse = 1; reverse--) {\r\n      System.out.println(String.valueOf(reverse).repeat(reverse));\r\n    }\r\n\r\nSince there&#39;s a type conversion it&#39;s not faster than the double loop proposed but it&#39;s a one-liner &#128522; \r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#repeat(int)","title":"How do I print a single character multiple times on one line?","body":"<p>If you run Java 11 there's a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#repeat(int)\" rel=\"nofollow noreferrer\">method &quot;repeat&quot;</a>  inherited from StringUtils I think :</p>\n<pre><code>static void printReverse(int n) {\n\nfor (int reverse = n; reverse = 1; reverse--) {\n  System.out.println(String.valueOf(reverse).repeat(reverse));\n}\n</code></pre>\n<p>Since there's a type conversion it's not faster than the double loop proposed but it's a one-liner 😊</p>\n"},{"tags":[],"owner":{"account_id":16404664,"reputation":193,"user_id":11860534,"display_name":"Felipe Cristiano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697628069,"creation_date":1697628069,"answer_id":77315837,"question_id":64644670,"body_markdown":"Java has a repeat function to build copies of a source string:\r\n\r\n```\r\nString newString = &quot;a&quot;.repeat(N);\r\nassertEquals(EXPECTED_STRING, newString);\r\n```\r\n\r\n\r\nThis allows us to repeat single characters, or multi-character strings:\r\n```\r\nString newString = &quot;--&gt;&quot;.repeat(5);\r\nassertEquals(&quot;--&gt;--&gt;--&gt;--&gt;--&gt;&quot;, newString);\r\n```\r\n\r\nreference: [https://www.baeldung.com/java-string-of-repeated-characters][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-string-of-repeated-characters","title":"How do I print a single character multiple times on one line?","body":"<p>Java has a repeat function to build copies of a source string:</p>\n<pre><code>String newString = &quot;a&quot;.repeat(N);\nassertEquals(EXPECTED_STRING, newString);\n</code></pre>\n<p>This allows us to repeat single characters, or multi-character strings:</p>\n<pre><code>String newString = &quot;--&gt;&quot;.repeat(5);\nassertEquals(&quot;--&gt;--&gt;--&gt;--&gt;--&gt;&quot;, newString);\n</code></pre>\n<p>reference: <a href=\"https://www.baeldung.com/java-string-of-repeated-characters\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-string-of-repeated-characters</a></p>\n"}],"owner":{"account_id":19767778,"reputation":147,"user_id":14475364,"display_name":"Tyler P"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":817,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64644873,"answer_count":4,"score":1,"last_activity_date":1697628069,"creation_date":1604316417,"question_id":64644670,"body_markdown":"Here&#39;s what I need to do:\r\n&gt;In reverse order, print out the first num positive integers, with each integer being printed\r\nthe number of times as its magnitude.\r\n\r\nBasically, I&#39;ll use the number 9 as an example, I need to print 9 9&#39;s on one line, 8 8&#39;s on the second line, 7 7&#39;s, etc. all the way to 1.\r\n\r\nI got it to print in reversed order but I don&#39;t know how I can print its magnitude.\r\nHere&#39;s my code now:\r\n\r\n    static void printReverse(int n) {\r\n\r\n    for (int reverse = n; reverse = 1; reverse--) {\r\n      System.out.println(reverse);\r\n    }\r\n\r\n    System.out.println(); // Leaves space between the outputs\r\n    System.out.println();","title":"How do I print a single character multiple times on one line?","body":"<p>Here's what I need to do:</p>\n<blockquote>\n<p>In reverse order, print out the first num positive integers, with each integer being printed\nthe number of times as its magnitude.</p>\n</blockquote>\n<p>Basically, I'll use the number 9 as an example, I need to print 9 9's on one line, 8 8's on the second line, 7 7's, etc. all the way to 1.</p>\n<p>I got it to print in reversed order but I don't know how I can print its magnitude.\nHere's my code now:</p>\n<pre><code>static void printReverse(int n) {\n\nfor (int reverse = n; reverse = 1; reverse--) {\n  System.out.println(reverse);\n}\n\nSystem.out.println(); // Leaves space between the outputs\nSystem.out.println();\n</code></pre>\n"},{"tags":["java","spring-boot","maven","spring-boot-maven-plugin","maven-package"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1644098316,"post_id":71002476,"comment_id":125516797,"body_markdown":"You seemed to try to use spring boot version 3.0.0-M1 which requires JDK17... you can not compile nor use it with JDK8.","body":"You seemed to try to use spring boot version 3.0.0-M1 which requires JDK17... you can not compile nor use it with JDK8."},{"owner":{"account_id":3095253,"reputation":43,"user_id":2620598,"display_name":"Leo"},"score":0,"creation_date":1644304836,"post_id":71002476,"comment_id":125564050,"body_markdown":"so sounds like the spring-boot-maven-plugin does not pick the same version as that of the spring-boot-starter.\n\nI have my my started defined as part of the spring-boot dependency management.","body":"so sounds like the spring-boot-maven-plugin does not pick the same version as that of the spring-boot-starter.  I have my my started defined as part of the spring-boot dependency management."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1644305259,"post_id":71002476,"comment_id":125564206,"body_markdown":"The question is why do you have maven-war-plugin configured ? I suppose your issue is you are not using the spring boot parent? Or you are using the spring-boot-dependencies as BOM which could also be a problem.. Also why have you changed the default directories? does not really make sense","body":"The question is why do you have maven-war-plugin configured ? I suppose your issue is you are not using the spring boot parent? Or you are using the spring-boot-dependencies as BOM which could also be a problem.. Also why have you changed the default directories? does not really make sense"},{"owner":{"account_id":3095253,"reputation":43,"user_id":2620598,"display_name":"Leo"},"score":0,"creation_date":1644436356,"post_id":71002476,"comment_id":125609337,"body_markdown":"#Spring-boot-parent: Is added as part of dependency-management in my parent module. In addidition i have to use a custom parent\n\n#maven-war-plugin: I am packaging the app as a war.","body":"#Spring-boot-parent: Is added as part of dependency-management in my parent module. In addidition i have to use a custom parent  #maven-war-plugin: I am packaging the app as a war."},{"owner":{"account_id":3095253,"reputation":43,"user_id":2620598,"display_name":"Leo"},"score":0,"creation_date":1644437233,"post_id":71002476,"comment_id":125609628,"body_markdown":"#maven-war-plugin: i have got rid of the custom packaging, assuming it could cause issues while repackage. So default directories should not be impacted in my opinion.","body":"#maven-war-plugin: i have got rid of the custom packaging, assuming it could cause issues while repackage. So default directories should not be impacted in my opinion."}],"answers":[{"comments":[{"owner":{"account_id":3095253,"reputation":43,"user_id":2620598,"display_name":"Leo"},"score":1,"creation_date":1644437258,"post_id":71004935,"comment_id":125609641,"body_markdown":"Well i had to explicitly specify the version of the plugin to resolve this issue. The version was not managed by the spring-boot parent added as part of my managed-dependencies.\nAppreciate the support rufanov and @khmarbaise","body":"Well i had to explicitly specify the version of the plugin to resolve this issue. The version was not managed by the spring-boot parent added as part of my managed-dependencies. Appreciate the support rufanov and @khmarbaise"},{"owner":{"account_id":76560,"reputation":1767,"user_id":219087,"accept_rate":0,"display_name":"Mr Lou"},"score":0,"creation_date":1645515927,"post_id":71004935,"comment_id":125885079,"body_markdown":"2.6.9 is work for me.thanks","body":"2.6.9 is work for me.thanks"}],"tags":[],"owner":{"account_id":459704,"reputation":3266,"user_id":860331,"accept_rate":92,"display_name":"rufanov"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1644131288,"creation_date":1644131288,"answer_id":71004935,"question_id":71002476,"body_markdown":"Version of &#39;spring-boot-maven-plugin&#39; plugin used in you pom.xml is 3.0.0-M1, which can be used only with Java 17 or newer. Switch to 2.5.7, if it&#39;s really version which you want to use for spring boot project.","title":"Spring Boot with spring version 2.5.7 fails repackage with jdk 1.8","body":"<p>Version of 'spring-boot-maven-plugin' plugin used in you pom.xml is 3.0.0-M1, which can be used only with Java 17 or newer. Switch to 2.5.7, if it's really version which you want to use for spring boot project.</p>\n"},{"tags":[],"owner":{"account_id":2820056,"reputation":31,"user_id":2424007,"display_name":"HseJaR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697627919,"creation_date":1697627919,"answer_id":77315825,"question_id":71002476,"body_markdown":"For me it worked with below version:\r\n    `&lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.9&lt;/version&gt;\r\n        &lt;relativePath/&gt;\r\n    &lt;/parent&gt;`","title":"Spring Boot with spring version 2.5.7 fails repackage with jdk 1.8","body":"<p>For me it worked with below version:\n<code>&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.7.9&lt;/version&gt; &lt;relativePath/&gt; &lt;/parent&gt;</code></p>\n"}],"owner":{"account_id":3095253,"reputation":43,"user_id":2620598,"display_name":"Leo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14408,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71004935,"answer_count":2,"score":4,"last_activity_date":1697627919,"creation_date":1644098092,"question_id":71002476,"body_markdown":"\r\nWhen running a maven package goal\r\n\r\n&gt; mvn clean package\r\n\r\nThe build throws the error:\r\n\r\n&gt;  goal org.springframework.boot:spring-boot-maven-plugin:3.0.0-M1:repackage failed: Unable to load the mojo &#39;repackage&#39; in the plugin &#39;org.springframework.boot:spring-boot-maven-plugin:3.0.0-M1&#39; due to an API incompatibility: org.codehaus.plexus.component.repository.exception.ComponentLookupException: org/springframework/boot/maven/RepackageMojo has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n\r\nmy JAVA_HOME is pointing to jdk1.8.0_73\r\n\r\nHow can i get spring-boot-maven-plugin running with repackage goal?\r\n\r\nBelow is the maven build configuration in my module.\r\n\r\n    &lt;build&gt;\r\n\t&lt;resources&gt;\r\n\t\t&lt;resource&gt;\r\n\t\t\t&lt;directory&gt;resources&lt;/directory&gt;\r\n\t\t&lt;/resource&gt;\r\n\t&lt;/resources&gt;\r\n\t&lt;plugins&gt;\r\n\t\t&lt;plugin&gt;\r\n\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/plugin&gt;\r\n\t\t&lt;plugin&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3&lt;/version&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;packagingExcludes&gt;WEB-INF/lib/*.jar&lt;/packagingExcludes&gt;\r\n\t\t\t\t&lt;webResources&gt;\r\n\t\t\t\t\t&lt;resource&gt;\r\n\t\t\t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n\t\t\t\t\t\t&lt;include&gt;*.*&lt;/include&gt;\r\n\t\t\t\t\t\t&lt;targetPath&gt;/WEB-INF/classes&lt;/targetPath&gt;\r\n\t\t\t\t\t&lt;/resource&gt;\r\n\t\t\t\t\t&lt;resource&gt;\r\n\t\t\t\t\t\t&lt;directory&gt;src/main/webapp/errors&lt;/directory&gt;\r\n\t\t\t\t\t\t&lt;include&gt;*.*&lt;/include&gt;\r\n\t\t\t\t\t\t&lt;targetPath&gt;/errors/&lt;/targetPath&gt;\r\n\t\t\t\t\t&lt;/resource&gt;\r\n\t\t\t\t&lt;/webResources&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/plugin&gt;\r\n\r\n\t\t&lt;plugin&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;mainClass&gt;com.services.MyAApp&lt;/mainClass&gt;\r\n\t\t\t\t&lt;layout&gt;war&lt;/layout&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;executions&gt;\r\n\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t&lt;goal&gt;repackage&lt;/goal&gt;\r\n\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t&lt;/execution&gt;\r\n\t\t\t&lt;/executions&gt;\r\n\t\t&lt;/plugin&gt;\r\n\r\n\t&lt;/plugins&gt;\r\n&lt;/build&gt;","title":"Spring Boot with spring version 2.5.7 fails repackage with jdk 1.8","body":"<p>When running a maven package goal</p>\n<blockquote>\n<p>mvn clean package</p>\n</blockquote>\n<p>The build throws the error:</p>\n<blockquote>\n<p>goal org.springframework.boot:spring-boot-maven-plugin:3.0.0-M1:repackage failed: Unable to load the mojo 'repackage' in the plugin 'org.springframework.boot:spring-boot-maven-plugin:3.0.0-M1' due to an API incompatibility: org.codehaus.plexus.component.repository.exception.ComponentLookupException: org/springframework/boot/maven/RepackageMojo has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 52.0</p>\n</blockquote>\n<p>my JAVA_HOME is pointing to jdk1.8.0_73</p>\n<p>How can i get spring-boot-maven-plugin running with repackage goal?</p>\n<p>Below is the maven build configuration in my module.</p>\n<pre><code>&lt;build&gt;\n&lt;resources&gt;\n    &lt;resource&gt;\n        &lt;directory&gt;resources&lt;/directory&gt;\n    &lt;/resource&gt;\n&lt;/resources&gt;\n&lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n            &lt;source&gt;1.8&lt;/source&gt;\n            &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.3&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;packagingExcludes&gt;WEB-INF/lib/*.jar&lt;/packagingExcludes&gt;\n            &lt;webResources&gt;\n                &lt;resource&gt;\n                    &lt;directory&gt;src/main/resources&lt;/directory&gt;\n                    &lt;include&gt;*.*&lt;/include&gt;\n                    &lt;targetPath&gt;/WEB-INF/classes&lt;/targetPath&gt;\n                &lt;/resource&gt;\n                &lt;resource&gt;\n                    &lt;directory&gt;src/main/webapp/errors&lt;/directory&gt;\n                    &lt;include&gt;*.*&lt;/include&gt;\n                    &lt;targetPath&gt;/errors/&lt;/targetPath&gt;\n                &lt;/resource&gt;\n            &lt;/webResources&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n            &lt;mainClass&gt;com.services.MyAApp&lt;/mainClass&gt;\n            &lt;layout&gt;war&lt;/layout&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;repackage&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n\n&lt;/plugins&gt;\n</code></pre>\n\n"},{"tags":["java","spring-boot","spring-mvc","nginx","file-upload"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1697629805,"post_id":77315810,"comment_id":136303371,"body_markdown":"Welcome to Stack Overflow! Please clarify your specific problem or add additional details to highlight exactly what you need. \nAs it&#39;s currently written, it’s hard to tell exactly what you&#39;re asking. See the \n[How to Ask page](https://stackoverflow.com/help/how-to-ask) for help clarifying this question. Include the desired behavior, a specific problem or error and the shortest code necessary to \nreproduce the issue. See also [How to create a Minimal, Complete, and Verifiable example](https://stackoverflow.com/help/mcve).","body":"Welcome to Stack Overflow! Please clarify your specific problem or add additional details to highlight exactly what you need.  As it&#39;s currently written, it’s hard to tell exactly what you&#39;re asking. See the  <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask page</a> for help clarifying this question. Include the desired behavior, a specific problem or error and the shortest code necessary to  reproduce the issue. See also <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."},{"owner":{"account_id":26214471,"reputation":1,"user_id":22541717,"display_name":"user22541717"},"score":0,"creation_date":1697689977,"post_id":77315810,"comment_id":136312099,"body_markdown":"I need a workaround for a specific scenario. In one line i can say that i want to upload files to a application which resides behind a nginx load balancer","body":"I need a workaround for a specific scenario. In one line i can say that i want to upload files to a application which resides behind a nginx load balancer"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697719796,"post_id":77315810,"comment_id":136316996,"body_markdown":"You didn&#39;t provide any specific details of the application or the issue. &quot;not working&quot; is not a description of an issue. Stackoverflow is a Q&amp;A site with very specific guidelines about how to ask. It is not a discussion forum to throw a topic and discuss alternatives. Please read the links I shared above.","body":"You didn&#39;t provide any specific details of the application or the issue. &quot;not working&quot; is not a description of an issue. Stackoverflow is a Q&amp;A site with very specific guidelines about how to ask. It is not a discussion forum to throw a topic and discuss alternatives. Please read the links I shared above."}],"owner":{"account_id":26214471,"reputation":1,"user_id":22541717,"display_name":"user22541717"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697627871,"creation_date":1697627795,"question_id":77315810,"body_markdown":"I have spring boot application which has REST API to upload zip files. The API takes the zip file and extract the content and keep this in the local directory (as the zip contain some jar files and the application dynamically loads these files as and when needed). All this works fine in local as well as in server.\r\nThe problem arises when the application is configured with NGINX load balancer. The uploading APIs are not working. Can anyone give some workaround how to implement this? We can not use something like Amazon S3 since our application will run on own servers of clients.\r\n\r\n\r\nI was thinking if there is a way where all the instances of the application running behind the load balancer will have the same copy of the uploaded zip files.","title":"Upload files spring boot application configured with NGINX Load Balancer","body":"<p>I have spring boot application which has REST API to upload zip files. The API takes the zip file and extract the content and keep this in the local directory (as the zip contain some jar files and the application dynamically loads these files as and when needed). All this works fine in local as well as in server.\nThe problem arises when the application is configured with NGINX load balancer. The uploading APIs are not working. Can anyone give some workaround how to implement this? We can not use something like Amazon S3 since our application will run on own servers of clients.</p>\n<p>I was thinking if there is a way where all the instances of the application running behind the load balancer will have the same copy of the uploaded zip files.</p>\n"},{"tags":["java","spring","spring-boot","tomcat9"],"comments":[{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1697627568,"post_id":77315505,"comment_id":136302933,"body_markdown":"Are you deploying a war file to Tomcat or using Tomcat embedded within your Spring Boot application?","body":"Are you deploying a war file to Tomcat or using Tomcat embedded within your Spring Boot application?"},{"owner":{"account_id":12918529,"reputation":149,"user_id":9341865,"display_name":"JJ36"},"score":0,"creation_date":1697627641,"post_id":77315505,"comment_id":136302948,"body_markdown":"embedded tomcat","body":"embedded tomcat"},{"owner":{"account_id":12918529,"reputation":149,"user_id":9341865,"display_name":"JJ36"},"score":0,"creation_date":1697628229,"post_id":77315505,"comment_id":136303056,"body_markdown":"brilliant, thank you!","body":"brilliant, thank you!"},{"owner":{"account_id":12918529,"reputation":149,"user_id":9341865,"display_name":"JJ36"},"score":0,"creation_date":1697628271,"post_id":77315505,"comment_id":136303064,"body_markdown":"I used this https://stackoverflow.com/a/74516916/9341865 and working now","body":"I used this <a href=\"https://stackoverflow.com/a/74516916/9341865\">stackoverflow.com/a/74516916/9341865</a> and working now"}],"answers":[{"tags":[],"owner":{"account_id":16423363,"reputation":1,"user_id":11864019,"display_name":"Giuseppe Previti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697627076,"creation_date":1697627076,"answer_id":77315723,"question_id":77315505,"body_markdown":"I&#39;m not totally sure but check if in the server.xml file you have the override attribute of the &lt;Context&gt; element set to true","title":"Spring boot 2.7.+ tomcat server version disclosure","body":"<p>I'm not totally sure but check if in the server.xml file you have the override attribute of the  element set to true</p>\n"}],"owner":{"account_id":12918529,"reputation":149,"user_id":9341865,"display_name":"JJ36"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697628879,"answer_count":1,"score":0,"last_activity_date":1697627736,"creation_date":1697625042,"question_id":77315505,"body_markdown":"I have a spring boot web application, but on error server info is exposed. Based on my research I can disclose it by putting custom context.xml and I tried to place it in src/main/webapp/META-INF/context.xml and src/main/resources/META-INF/context.xml. I see that context.xml is included in the jar in META-INF but is not taken into account in my opinion as server info is still present.\r\n\r\nI am using embedded Tomcat within Spring Boot.\r\n\r\nCan you please help with forcing spring boot to consume custom tomcat context.xml?","title":"Spring boot 2.7.+ tomcat server version disclosure","body":"<p>I have a spring boot web application, but on error server info is exposed. Based on my research I can disclose it by putting custom context.xml and I tried to place it in src/main/webapp/META-INF/context.xml and src/main/resources/META-INF/context.xml. I see that context.xml is included in the jar in META-INF but is not taken into account in my opinion as server info is still present.</p>\n<p>I am using embedded Tomcat within Spring Boot.</p>\n<p>Can you please help with forcing spring boot to consume custom tomcat context.xml?</p>\n"},{"tags":["java","windows"],"owner":{"account_id":3658280,"reputation":27,"user_id":14138100,"display_name":"Marvin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697627668,"creation_date":1697627668,"question_id":77315798,"body_markdown":"Try WinDivert (jdivert) on Windows 10.\r\n\r\nEvery time packet match program throws exception. For example, filter all icmp:\r\n```public static void main(String[] args) {\r\n\t\tWinDivert w = new WinDivert(&quot;icmp&quot;);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tw.open();\r\n\t\t\tint i = 0;\r\n\t\t\twhile (i&lt;10) {\r\n\t\t\t\tPacket packet = w.recv();\r\n\t\t\t\tSystem.out.println(packet);\r\n\t\t\t\tw.send(packet);\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tw.close();\r\n\t\t} catch (WinDivertException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n```\r\n\r\nFirst packet match printed:\r\n```\r\nPacket {IPv4 {version=4, srcAddr=127.0.0.1, dstAddr=127.0.0.1, IHL=5, DSCP=0, ECN=0, length=60, ID=b7d3 RESERVED=false, DF=false, MF=false, fragOff=0 TTL=128 proto=ICMP, cksum=84eb}, ICMPv4 {type=8, code=0, cksum=4d4a, restOfHdr=00010011}, direction=OUTBOUND, iface=[0, 0], raw=4500003CB7D30000800184EB7F0000017F00000108004D4A000100116162636465666768696A6B6C6D6E6F7071727374757677616263646566676869}\r\n```\r\n\r\nAnd on w.send(packet) get an exception:\r\n```\r\nWinDivertException{code=3, message=&#39;null&#39;}\r\n        at com.github.ffalcinelli.jdivert.exceptions.WinDivertException.throwExceptionOnGetLastError(WinDivertException.java:57)\r\n        at com.github.ffalcinelli.jdivert.Packet.recalculateChecksum(Packet.java:359)\r\n        at com.github.ffalcinelli.jdivert.WinDivert.send(WinDivert.java:271)\r\n        at com.github.ffalcinelli.jdivert.WinDivert.send(WinDivert.java:234)\r\n```\r\n\r\nAlways.\r\nRun as admin.\r\n\r\nIf using w.send(packet), I receive exception.\r\n\r\nTry:\r\n```WinDivert w = new WinDivert(&quot;icmp&quot;, Layer.NETWORK, 0, Flag.NO_CHECKSUM);```\r\n\r\nNo changes.\r\n\r\nWhy error occures on recalculateChecksum every time?\r\n\r\nPS: I try change filter, for example, from ```&#39;icmp&#39;``` to ```&#39;inbound &amp;&amp; icmp &amp;&amp; ip.SrcAddr == 192.168.2.30&#39;```. No changes.\r\n\r\nI try run this example with python and everything works! So I don&#39;t think it is a windpws problem. May be problem with libs or java version or somethink like this?","title":"WinDivert throws Exception: {code=3, message=&#39;null&#39;}","body":"<p>Try WinDivert (jdivert) on Windows 10.</p>\n<p>Every time packet match program throws exception. For example, filter all icmp:</p>\n<pre><code>        WinDivert w = new WinDivert(&quot;icmp&quot;);\n        \n        try {\n            w.open();\n            int i = 0;\n            while (i&lt;10) {\n                Packet packet = w.recv();\n                System.out.println(packet);\n                w.send(packet);\n                i++;\n            }\n            w.close();\n        } catch (WinDivertException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>First packet match printed:</p>\n<pre><code>Packet {IPv4 {version=4, srcAddr=127.0.0.1, dstAddr=127.0.0.1, IHL=5, DSCP=0, ECN=0, length=60, ID=b7d3 RESERVED=false, DF=false, MF=false, fragOff=0 TTL=128 proto=ICMP, cksum=84eb}, ICMPv4 {type=8, code=0, cksum=4d4a, restOfHdr=00010011}, direction=OUTBOUND, iface=[0, 0], raw=4500003CB7D30000800184EB7F0000017F00000108004D4A000100116162636465666768696A6B6C6D6E6F7071727374757677616263646566676869}\n</code></pre>\n<p>And on w.send(packet) get an exception:</p>\n<pre><code>WinDivertException{code=3, message='null'}\n        at com.github.ffalcinelli.jdivert.exceptions.WinDivertException.throwExceptionOnGetLastError(WinDivertException.java:57)\n        at com.github.ffalcinelli.jdivert.Packet.recalculateChecksum(Packet.java:359)\n        at com.github.ffalcinelli.jdivert.WinDivert.send(WinDivert.java:271)\n        at com.github.ffalcinelli.jdivert.WinDivert.send(WinDivert.java:234)\n</code></pre>\n<p>Always.\nRun as admin.</p>\n<p>If using w.send(packet), I receive exception.</p>\n<p>Try:\n<code>WinDivert w = new WinDivert(&quot;icmp&quot;, Layer.NETWORK, 0, Flag.NO_CHECKSUM);</code></p>\n<p>No changes.</p>\n<p>Why error occures on recalculateChecksum every time?</p>\n<p>PS: I try change filter, for example, from <code>'icmp'</code> to <code>'inbound &amp;&amp; icmp &amp;&amp; ip.SrcAddr == 192.168.2.30'</code>. No changes.</p>\n<p>I try run this example with python and everything works! So I don't think it is a windpws problem. May be problem with libs or java version or somethink like this?</p>\n"},{"tags":["java","arrays","multidimensional-array","duplicates"],"comments":[{"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"score":0,"creation_date":1697110581,"post_id":77280103,"comment_id":136239918,"body_markdown":"Welcome to StackOverflow :) Firstly, your code does not compile (Look at the line `if (duplicate)`: The `}` is before the `break; `which does not work). I edited the code how I think you meant it. Secondly, I am not sure that I understand what your requirement is. Do you want to find numbers that are present in both arrays (aka 1, 2, 7, 3 in your example) or does the position of the array elements matter somehow? Cheers :)","body":"Welcome to StackOverflow :) Firstly, your code does not compile (Look at the line <code>if (duplicate)</code>: The <code>}</code> is before the <code>break; </code>which does not work). I edited the code how I think you meant it. Secondly, I am not sure that I understand what your requirement is. Do you want to find numbers that are present in both arrays (aka 1, 2, 7, 3 in your example) or does the position of the array elements matter somehow? Cheers :)"},{"owner":{"account_id":8433338,"reputation":20078,"user_id":6328256,"display_name":"Sash Sinha"},"score":0,"creation_date":1697110656,"post_id":77280103,"comment_id":136239930,"body_markdown":"@vatbub 6 is also present in both arrays.","body":"@vatbub 6 is also present in both arrays."},{"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"score":0,"creation_date":1697113950,"post_id":77280103,"comment_id":136240558,"body_markdown":"Ah, true, I missed that (can&#39;t edit my comment anymore though)","body":"Ah, true, I missed that (can&#39;t edit my comment anymore though)"}],"answers":[{"tags":[],"owner":{"account_id":8433338,"reputation":20078,"user_id":6328256,"display_name":"Sash Sinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697627449,"creation_date":1697110542,"answer_id":77280214,"question_id":77280103,"body_markdown":"Your issue is that you&#39;re directly printing elements when found. This causes duplicates from `arr1` to be printed.\r\n\r\nConsider using a [`HashSet`][1] to store unique elements found in both arrays and eliminate duplicates. Then print the set:\r\n\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            int[][] arr1 = new int[][]{{1, 2, 1}, {9, 7, 2}, {7, 3, 6}};\r\n            int[][] arr2 = new int[][]{{2, 6, 8}, {0, 1, 7}, {7, 2, 0}, {8, 3}};\r\n            Set&lt;Integer&gt; commonSet = new HashSet&lt;&gt;();\r\n            for (int i = 0; i &lt; arr1.length; ++i) {\r\n                for (int j = 0; j &lt; arr1[i].length; ++j) {\r\n                    int val = arr1[i][j];\r\n                    if (commonSet.contains(val)) continue;\r\n                    for (int k = 0; k &lt; arr2.length; ++k) {\r\n                        for (int l = 0; l &lt; arr2[k].length; ++l) {\r\n                            if (val == arr2[k][l]) {\r\n                                commonSet.add(val);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            System.out.println(commonSet);\r\n        }\r\n    }\r\nThe time complexity of this approach (base on your original code) is `O(n &#215; max(m) x p &#215; max(q))`...\r\n\r\n - `n` is the number of rows in `arr1`.\r\n - `max(m)` is the maximum number of columns in any row of `arr1`.\r\n - `p` is the number of rows in `arr2`.\r\n - `max(q)` is the maximum number of columns in any row of `arr2`.\r\n\r\nBasically, it&#39;s a nested loop through both arrays. Not efficient for large arrays.\r\n\r\nIf efficiency is a requirement, try this, which is `O(n &#215; max(m) + p &#215; max(q))`:\r\n\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            int[][] arr1 = new int[][]{{1, 2, 1}, {9, 7, 2}, {7, 3, 6}};\r\n            int[][] arr2 = new int[][]{{2, 6, 8}, {0, 1, 7}, {7, 2, 0}, {8, 3}};\r\n            Set&lt;Integer&gt; set1 = new HashSet&lt;&gt;();\r\n            Set&lt;Integer&gt; commonSet = new HashSet&lt;&gt;();\r\n            for (int i = 0; i &lt; arr1.length; ++i) {\r\n                for (int j = 0; j &lt; arr1[i].length; ++j) {\r\n                    set1.add(arr1[i][j]);\r\n                }\r\n            }\r\n            for (int i = 0; i &lt; arr2.length; ++i) {\r\n                for (int j = 0; j &lt; arr2[i].length; ++j) {\r\n                    if (set1.contains(arr2[i][j])) {\r\n                        commonSet.add(arr2[i][j]);\r\n                    }\r\n                }\r\n            }\r\n            System.out.println(commonSet);\r\n        }\r\n    }\r\n\r\n**Example output for both approaches:**\r\n\r\n    [1, 2, 3, 6, 7]\r\n\r\n*Note: a `HashSet` does not provide any method to maintain insertion order (use a [`LinkedHashSet`][2] instead) or keep sorted order (use a [`TreeSet`][3] instead.)*\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashSet.html\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/LinkedHashSet.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TreeSet.html","title":"I have to find common elements between two arrays multidimensional and jagged array","body":"<p>Your issue is that you're directly printing elements when found. This causes duplicates from <code>arr1</code> to be printed.</p>\n<p>Consider using a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashSet.html\" rel=\"nofollow noreferrer\"><code>HashSet</code></a> to store unique elements found in both arrays and eliminate duplicates. Then print the set:</p>\n<pre><code>import java.util.HashSet;\nimport java.util.Set;\n\npublic class Main {\n    public static void main(String[] args) {\n        int[][] arr1 = new int[][]{{1, 2, 1}, {9, 7, 2}, {7, 3, 6}};\n        int[][] arr2 = new int[][]{{2, 6, 8}, {0, 1, 7}, {7, 2, 0}, {8, 3}};\n        Set&lt;Integer&gt; commonSet = new HashSet&lt;&gt;();\n        for (int i = 0; i &lt; arr1.length; ++i) {\n            for (int j = 0; j &lt; arr1[i].length; ++j) {\n                int val = arr1[i][j];\n                if (commonSet.contains(val)) continue;\n                for (int k = 0; k &lt; arr2.length; ++k) {\n                    for (int l = 0; l &lt; arr2[k].length; ++l) {\n                        if (val == arr2[k][l]) {\n                            commonSet.add(val);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        System.out.println(commonSet);\n    }\n}\n</code></pre>\n<p>The time complexity of this approach (base on your original code) is <code>O(n × max(m) x p × max(q))</code>...</p>\n<ul>\n<li><code>n</code> is the number of rows in <code>arr1</code>.</li>\n<li><code>max(m)</code> is the maximum number of columns in any row of <code>arr1</code>.</li>\n<li><code>p</code> is the number of rows in <code>arr2</code>.</li>\n<li><code>max(q)</code> is the maximum number of columns in any row of <code>arr2</code>.</li>\n</ul>\n<p>Basically, it's a nested loop through both arrays. Not efficient for large arrays.</p>\n<p>If efficiency is a requirement, try this, which is <code>O(n × max(m) + p × max(q))</code>:</p>\n<pre><code>import java.util.HashSet;\nimport java.util.Set;\n\npublic class Main {\n    public static void main(String[] args) {\n        int[][] arr1 = new int[][]{{1, 2, 1}, {9, 7, 2}, {7, 3, 6}};\n        int[][] arr2 = new int[][]{{2, 6, 8}, {0, 1, 7}, {7, 2, 0}, {8, 3}};\n        Set&lt;Integer&gt; set1 = new HashSet&lt;&gt;();\n        Set&lt;Integer&gt; commonSet = new HashSet&lt;&gt;();\n        for (int i = 0; i &lt; arr1.length; ++i) {\n            for (int j = 0; j &lt; arr1[i].length; ++j) {\n                set1.add(arr1[i][j]);\n            }\n        }\n        for (int i = 0; i &lt; arr2.length; ++i) {\n            for (int j = 0; j &lt; arr2[i].length; ++j) {\n                if (set1.contains(arr2[i][j])) {\n                    commonSet.add(arr2[i][j]);\n                }\n            }\n        }\n        System.out.println(commonSet);\n    }\n}\n</code></pre>\n<p><strong>Example output for both approaches:</strong></p>\n<pre><code>[1, 2, 3, 6, 7]\n</code></pre>\n<p><em>Note: a <code>HashSet</code> does not provide any method to maintain insertion order (use a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\"><code>LinkedHashSet</code></a> instead) or keep sorted order (use a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TreeSet.html\" rel=\"nofollow noreferrer\"><code>TreeSet</code></a> instead.)</em></p>\n"},{"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":1,"creation_date":1697117022,"post_id":77280752,"comment_id":136241290,"body_markdown":"An array has no `indexOf` method. This line will not compile: `if(arr2[outer2].indexOf(...`","body":"An array has no <code>indexOf</code> method. This line will not compile: <code>if(arr2[outer2].indexOf(...</code>"},{"owner":{"account_id":194308,"reputation":66745,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1697124017,"post_id":77280752,"comment_id":136243085,"body_markdown":"@Eritrean good point, it&#39;s been a while since I last worked with Java. Fixing, editing.","body":"@Eritrean good point, it&#39;s been a while since I last worked with Java. Fixing, editing."},{"owner":{"account_id":194308,"reputation":66745,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":1,"creation_date":1697124312,"post_id":77280752,"comment_id":136243146,"body_markdown":"@Eritrean edited my answer accordingly. Thanks again!","body":"@Eritrean edited my answer accordingly. Thanks again!"}],"tags":[],"owner":{"account_id":194308,"reputation":66745,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697124295,"creation_date":1697115087,"answer_id":77280752,"question_id":77280103,"body_markdown":"Let&#39;s create a set to be able to determine whether an item was already found.\r\n\r\nThis will be a set that will store the common numbers found so far. Now, let&#39;s loop your arrays:\r\n\r\n```\r\nSet&lt;Integer&gt; found = new HashSet&lt;Integer&gt;();\r\n//Looping the rows of the first array\r\nfor (int outer1 = 0; outer1 &lt; arr1.length; outer1++) {\r\n    //Looping the cells of the first array&#39;s current element\r\n    for (int inner = 0; inner &lt; arr1[outer1].length; inner++) {\r\n        //Looping the rows of the second array\r\n        for (int outer2 = 0; outer2 &lt; arr2.length; outer2++) {\r\n            if (found.contains(arr1[outer1][inner])) continue;\r\n            //Is arr1[outer1][inner] a common item?\r\n            if (ArrayUtils.indexOf(arr2[outer2], arr1[outer1][inner]) &gt;= 0)\r\n                //If so, have we found it already?\r\n                if (!found.contains(arr1[outer1][inner])) {\r\n                    //No, this is the first time we find this particular common item\r\n                    //So we add it\r\n                    found.add(arr1[outer1][inner]);\r\n                    //And print it\r\n                    System.out.println(arr1[outer1][inner]);\r\n                    //Let&#39;s force moving forward:\r\n                    outer2 = arr2.length;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWe therefore:\r\n- loop the first array\r\n    - loop the items of the current item of the first array\r\n        - loop the second array\r\n            - check whether the current inner item of the first array is inside the current array of the second array\r\n                - if so, we check whether it&#39;s new\r\n                    - if so, we add it to the set so we will not print it again\r\n                    - and print it\r\n\r\nEDIT:\r\n\r\nAs @Eritrean pointed out in the comment section, Java has no method called `indexOf` for arrays and the initial version of the code would not compile. Hence, I edited the code above by using `ArrayUtils`&#39;s `indexOf` instead (https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#indexOf-boolean:A-boolean-)\r\n\r\nIf one does not want to use that, he/she can implement an `indexOf` method that will return the index of an item in an array or -1 if not found, or loop the inner arrays of the second array as well.","title":"I have to find common elements between two arrays multidimensional and jagged array","body":"<p>Let's create a set to be able to determine whether an item was already found.</p>\n<p>This will be a set that will store the common numbers found so far. Now, let's loop your arrays:</p>\n<pre><code>Set&lt;Integer&gt; found = new HashSet&lt;Integer&gt;();\n//Looping the rows of the first array\nfor (int outer1 = 0; outer1 &lt; arr1.length; outer1++) {\n    //Looping the cells of the first array's current element\n    for (int inner = 0; inner &lt; arr1[outer1].length; inner++) {\n        //Looping the rows of the second array\n        for (int outer2 = 0; outer2 &lt; arr2.length; outer2++) {\n            if (found.contains(arr1[outer1][inner])) continue;\n            //Is arr1[outer1][inner] a common item?\n            if (ArrayUtils.indexOf(arr2[outer2], arr1[outer1][inner]) &gt;= 0)\n                //If so, have we found it already?\n                if (!found.contains(arr1[outer1][inner])) {\n                    //No, this is the first time we find this particular common item\n                    //So we add it\n                    found.add(arr1[outer1][inner]);\n                    //And print it\n                    System.out.println(arr1[outer1][inner]);\n                    //Let's force moving forward:\n                    outer2 = arr2.length;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>We therefore:</p>\n<ul>\n<li>loop the first array\n<ul>\n<li>loop the items of the current item of the first array\n<ul>\n<li>loop the second array\n<ul>\n<li>check whether the current inner item of the first array is inside the current array of the second array\n<ul>\n<li>if so, we check whether it's new\n<ul>\n<li>if so, we add it to the set so we will not print it again</li>\n<li>and print it</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>EDIT:</p>\n<p>As @Eritrean pointed out in the comment section, Java has no method called <code>indexOf</code> for arrays and the initial version of the code would not compile. Hence, I edited the code above by using <code>ArrayUtils</code>'s <code>indexOf</code> instead (<a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#indexOf-boolean:A-boolean-\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#indexOf-boolean:A-boolean-</a>)</p>\n<p>If one does not want to use that, he/she can implement an <code>indexOf</code> method that will return the index of an item in an array or -1 if not found, or loop the inner arrays of the second array as well.</p>\n"}],"owner":{"account_id":29655426,"reputation":21,"user_id":22728289,"display_name":"Akshitha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1697627449,"creation_date":1697109659,"question_id":77280103,"body_markdown":"I have to find common elements between the two arrays that are multidimensional and jagged and print them only once. I wrote some code and got the output but it&#39;s printing all the common elements from array 1 and array 2 it has to print only once.\r\nI mean if array 1 is[5, 5,3] array 2 is [5, 5, 6,2] output is [5, 5, 5,5]. I have to print 5 only one time.\r\n\r\nHere I have already stopped printing duplicate elements multiple times from array 2 for that I inserted boolean tags.\r\nBut can&#39;t able to stop from array 1. For the example Have to take 5 elements 1 time and check if it is available in array 2, if it is there then print 5 as output.\r\n\r\n\r\n```java\r\nint[][] arr1 = new int[][]{{1, 2, 1}, {9, 7, 2}, {7, 3, 6}};\r\n\r\nint[][] arr2 = new int[][]{{2, 6, 8}, {0, 1, 7}, {7, 2, 0}, {8, 3}};\r\n\r\nSystem.out.println(&quot;Input 1:&quot;);\r\nfor (int i = 0; i &lt; arr1.length; i++) {\r\n    System.out.println(Arrays.toString(arr1[i]));\r\n}\r\nSystem.out.println(&quot;Input 2:&quot;);\r\nfor (int j = 0; j &lt; arr2.length; j++) {\r\n    System.out.println(Arrays.toString(arr2[j]));\r\n}\r\n\r\nboolean duplicate = false;\r\n\r\nfor (int i = 0; i &lt; arr1.length; i++) {\r\n    for (int j = 0; j &lt; arr1[i].length; j++) {\r\n        int transpose = 0;\r\n        transpose = arr1[i][j];\r\n\r\n        for (int k = 0; k &lt; arr2.length; k++) {\r\n            duplicate = false;\r\n            for (int l = 0; l &lt; arr2[k].length; l++) {\r\n                if (transpose == arr2[k][l]) {\r\n                    System.out.println(transpose);\r\n                    duplicate = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (duplicate) break;\r\n        }\r\n\r\n    }\r\n}\r\n```","title":"I have to find common elements between two arrays multidimensional and jagged array","body":"<p>I have to find common elements between the two arrays that are multidimensional and jagged and print them only once. I wrote some code and got the output but it's printing all the common elements from array 1 and array 2 it has to print only once.\nI mean if array 1 is[5, 5,3] array 2 is [5, 5, 6,2] output is [5, 5, 5,5]. I have to print 5 only one time.</p>\n<p>Here I have already stopped printing duplicate elements multiple times from array 2 for that I inserted boolean tags.\nBut can't able to stop from array 1. For the example Have to take 5 elements 1 time and check if it is available in array 2, if it is there then print 5 as output.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[][] arr1 = new int[][]{{1, 2, 1}, {9, 7, 2}, {7, 3, 6}};\n\nint[][] arr2 = new int[][]{{2, 6, 8}, {0, 1, 7}, {7, 2, 0}, {8, 3}};\n\nSystem.out.println(&quot;Input 1:&quot;);\nfor (int i = 0; i &lt; arr1.length; i++) {\n    System.out.println(Arrays.toString(arr1[i]));\n}\nSystem.out.println(&quot;Input 2:&quot;);\nfor (int j = 0; j &lt; arr2.length; j++) {\n    System.out.println(Arrays.toString(arr2[j]));\n}\n\nboolean duplicate = false;\n\nfor (int i = 0; i &lt; arr1.length; i++) {\n    for (int j = 0; j &lt; arr1[i].length; j++) {\n        int transpose = 0;\n        transpose = arr1[i][j];\n\n        for (int k = 0; k &lt; arr2.length; k++) {\n            duplicate = false;\n            for (int l = 0; l &lt; arr2[k].length; l++) {\n                if (transpose == arr2[k][l]) {\n                    System.out.println(transpose);\n                    duplicate = true;\n                    break;\n                }\n            }\n\n            if (duplicate) break;\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","android","https"],"answers":[{"tags":[],"owner":{"account_id":390844,"reputation":27902,"user_id":751158,"accept_rate":100,"display_name":"ziesemer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697627372,"creation_date":1321842066,"answer_id":8206605,"question_id":6417813,"body_markdown":"I can&#39;t speak for Android specifically, but at least standard desktop Java has a default keystore that is used by all instances of the JVM, located at /lib/security/cacerts.\r\n\r\nIn many cases, this file should not be modified globally for all instances of the JVM, but on a case-by-case basis, as you already eluded to.  To do this, you can&#39;t call `.openStream` directly.  Instead, get a [HttpsURLConnection][1] by calling [URLConnection.openConnection()][2] (and casting it do a HttpsURLConnection).  Before performing any other operations on this connection, set a custom [SSLSocketFactory][3] by calling HttpsURLConnection.[setSSLSocketFactory][4].  From here, you&#39;ll need to work with a custom SSLContext and TrustManagers.\r\n\r\nSome additional details around this are already answered at https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection.\r\n\r\nIf you want to use HttpClient, additional references are available at http://hc.apache.org/httpclient-3.x/sslguide.html and https://stackoverflow.com/questions/1828775/httpclient-and-ssl.\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/index.html?javax/net/ssl/HttpsURLConnection.html\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/net/URL.html#openConnection%28%29\r\n  [3]: http://download.oracle.com/javase/6/docs/api/index.html?javax/net/ssl/SSLSocketFactory.html\r\n  [4]: http://download.oracle.com/javase/6/docs/api/javax/net/ssl/HttpsURLConnection.html#setSSLSocketFactory%28javax.net.ssl.SSLSocketFactory%29","title":"Adding certificates used by URL.openStream","body":"<p>I can't speak for Android specifically, but at least standard desktop Java has a default keystore that is used by all instances of the JVM, located at /lib/security/cacerts.</p>\n<p>In many cases, this file should not be modified globally for all instances of the JVM, but on a case-by-case basis, as you already eluded to.  To do this, you can't call <code>.openStream</code> directly.  Instead, get a <a href=\"http://download.oracle.com/javase/6/docs/api/index.html?javax/net/ssl/HttpsURLConnection.html\" rel=\"nofollow noreferrer\">HttpsURLConnection</a> by calling <a href=\"http://download.oracle.com/javase/6/docs/api/java/net/URL.html#openConnection%28%29\" rel=\"nofollow noreferrer\">URLConnection.openConnection()</a> (and casting it do a HttpsURLConnection).  Before performing any other operations on this connection, set a custom <a href=\"http://download.oracle.com/javase/6/docs/api/index.html?javax/net/ssl/SSLSocketFactory.html\" rel=\"nofollow noreferrer\">SSLSocketFactory</a> by calling HttpsURLConnection.<a href=\"http://download.oracle.com/javase/6/docs/api/javax/net/ssl/HttpsURLConnection.html#setSSLSocketFactory%28javax.net.ssl.SSLSocketFactory%29\" rel=\"nofollow noreferrer\">setSSLSocketFactory</a>.  From here, you'll need to work with a custom SSLContext and TrustManagers.</p>\n<p>Some additional details around this are already answered at <a href=\"https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection\">How can I use different certificates on specific connections?</a>.</p>\n<p>If you want to use HttpClient, additional references are available at <a href=\"http://hc.apache.org/httpclient-3.x/sslguide.html\" rel=\"nofollow noreferrer\">http://hc.apache.org/httpclient-3.x/sslguide.html</a> and <a href=\"https://stackoverflow.com/questions/1828775/httpclient-and-ssl\">How to handle invalid SSL certificates with Apache HttpClient?</a>.</p>\n"}],"owner":{"account_id":124026,"reputation":5244,"user_id":318857,"accept_rate":68,"display_name":"fluffy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2056,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697627372,"creation_date":1308605581,"question_id":6417813,"body_markdown":"I have some code on Android that makes use of URL.openStream. For internal test purposes I need to be able to point it to a server that uses a private CA.  We already have our CA bundles in PEM format (as we&#39;re also using libcurl from NDK), and would like to be able to just read the PEM files directly into whatever KeyStore (or similar) that URL.openStream uses.\r\n\r\nSo this question is a multi-part thing:\r\n\r\n1. How do you get the key storage used by URL.openStream? Or should I just be using HttpClient directly?\r\n2. How do you add a PEM certificate to said key storage? (even if using HttpClient)\r\n\r\nThanks.","title":"Adding certificates used by URL.openStream","body":"<p>I have some code on Android that makes use of URL.openStream. For internal test purposes I need to be able to point it to a server that uses a private CA.  We already have our CA bundles in PEM format (as we're also using libcurl from NDK), and would like to be able to just read the PEM files directly into whatever KeyStore (or similar) that URL.openStream uses.</p>\n\n<p>So this question is a multi-part thing:</p>\n\n<ol>\n<li>How do you get the key storage used by URL.openStream? Or should I just be using HttpClient directly?</li>\n<li>How do you add a PEM certificate to said key storage? (even if using HttpClient)</li>\n</ol>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1697626000,"post_id":77315557,"comment_id":136302658,"body_markdown":"Could you try to remove the properties file from third-party jar and check that the properties file is loaded inside main project?","body":"Could you try to remove the properties file from third-party jar and check that the properties file is loaded inside main project?"}],"answers":[{"tags":[],"owner":{"account_id":18561798,"reputation":81,"user_id":13525656,"display_name":"Dogus"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697626032,"creation_date":1697626032,"answer_id":77315599,"question_id":77315557,"body_markdown":"That&#39;s standard behavior.\r\nSpring Applications choose their own applications.properties, unless you declare a specific one. \r\n\r\nWhile you start your web application, you can declare this parameter:\r\n\r\n    --spring.config.location=/your/location/to/application.properties\r\n\r\nFull example:\r\n\r\n    java --spring.config.location=/data/spring-applications/application.properties -jar my_java_project.jar","title":"Why does my application.properties are overwritten by external","body":"<p>That's standard behavior.\nSpring Applications choose their own applications.properties, unless you declare a specific one.</p>\n<p>While you start your web application, you can declare this parameter:</p>\n<pre><code>--spring.config.location=/your/location/to/application.properties\n</code></pre>\n<p>Full example:</p>\n<pre><code>java --spring.config.location=/data/spring-applications/application.properties -jar my_java_project.jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697627011,"creation_date":1697626123,"answer_id":77315608,"question_id":77315557,"body_markdown":"As the name implies `application.properties` should be used for the application, not for a library.  Spring Boot searches for `application.properties` [in the classpath][1] and both files are in the classpath, so it takes the first one it finds.  Just rename the file in the library to `my-utils.properties` or, if the library uses Spring, use `@Value` annotations and put all config params in the `application.properties` of the application; in this case you can merge the two properties files phisically (deleting the one in the library) or logically (with `--spring.config.location` or [`spring.config.import`][2], note that for logical merge you have to rename the file of the library).\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.importing","title":"Why does my application.properties are overwritten by external","body":"<p>As the name implies <code>application.properties</code> should be used for the application, not for a library.  Spring Boot searches for <code>application.properties</code> <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files\" rel=\"nofollow noreferrer\">in the classpath</a> and both files are in the classpath, so it takes the first one it finds.  Just rename the file in the library to <code>my-utils.properties</code> or, if the library uses Spring, use <code>@Value</code> annotations and put all config params in the <code>application.properties</code> of the application; in this case you can merge the two properties files phisically (deleting the one in the library) or logically (with <code>--spring.config.location</code> or <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.importing\" rel=\"nofollow noreferrer\"><code>spring.config.import</code></a>, note that for logical merge you have to rename the file of the library).</p>\n"}],"owner":{"account_id":10650147,"reputation":2228,"user_id":7841415,"display_name":"Suule"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77315608,"answer_count":2,"score":0,"last_activity_date":1697627011,"creation_date":1697625607,"question_id":77315557,"body_markdown":"I have two java projects, one is spring boot application, which starts application server. This project has dependency to my-utils.jar, which has its own `application.properties`. \r\nAnd whenever I try to run my web application/tests there. It seems to be fetching `application.properties` not from web application but instead from jar file.\r\n\r\nI have run debug and did some checks in `PropertiesPropertySourceLoader` and I was able to confirm it that it nevers load my properties. There are loaded only `application.properties` from jar and `application-dev.properties` if profile is set. Is it default behaviour for spring boot?\r\n\r\nI am using java 17, and spring boot 3+","title":"Why does my application.properties are overwritten by external","body":"<p>I have two java projects, one is spring boot application, which starts application server. This project has dependency to my-utils.jar, which has its own <code>application.properties</code>.\nAnd whenever I try to run my web application/tests there. It seems to be fetching <code>application.properties</code> not from web application but instead from jar file.</p>\n<p>I have run debug and did some checks in <code>PropertiesPropertySourceLoader</code> and I was able to confirm it that it nevers load my properties. There are loaded only <code>application.properties</code> from jar and <code>application-dev.properties</code> if profile is set. Is it default behaviour for spring boot?</p>\n<p>I am using java 17, and spring boot 3+</p>\n"},{"tags":["java","spring-security"],"comments":[{"owner":{"account_id":15887085,"reputation":137,"user_id":11463156,"display_name":"Bhavesh Shah"},"score":0,"creation_date":1697624169,"post_id":77315117,"comment_id":136302308,"body_markdown":"Can you please provide more details about how you are generating JWT token? Are you setting expiration validity for JWT token?","body":"Can you please provide more details about how you are generating JWT token? Are you setting expiration validity for JWT token?"},{"owner":{"account_id":14282417,"reputation":1,"user_id":22761429,"display_name":"Shashy"},"score":0,"creation_date":1697625276,"post_id":77315117,"comment_id":136302507,"body_markdown":"Yep. Added a class to the body that generates tokens","body":"Yep. Added a class to the body that generates tokens"},{"owner":{"account_id":14282417,"reputation":1,"user_id":22761429,"display_name":"Shashy"},"score":0,"creation_date":1697625342,"post_id":77315117,"comment_id":136302523,"body_markdown":"I initially had authorization through Bearer, but I would like to test it using cookies and ran into a problem that when refreshing on the frontend, all tokens are overwritten","body":"I initially had authorization through Bearer, but I would like to test it using cookies and ran into a problem that when refreshing on the frontend, all tokens are overwritten"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1697660538,"post_id":77315117,"comment_id":136309424,"body_markdown":"why have you built this unsecure strange custom security solution?","body":"why have you built this unsecure strange custom security solution?"},{"owner":{"account_id":14282417,"reputation":1,"user_id":22761429,"display_name":"Shashy"},"score":0,"creation_date":1697702754,"post_id":77315117,"comment_id":136313790,"body_markdown":"If there are better suggestions and a link to the sample, I’ll be glad to see it. Because of the adequate ones that I found, this was the solution","body":"If there are better suggestions and a link to the sample, I’ll be glad to see it. Because of the adequate ones that I found, this was the solution"}],"owner":{"account_id":14282417,"reputation":1,"user_id":22761429,"display_name":"Shashy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697626919,"creation_date":1697621630,"question_id":77315117,"body_markdown":"I encountered a problem that when I refresh the page, my authentication fails and all cookies are erased. As I understand it, the problem is directly in my filter\r\n\r\nBelow is the filter code\r\n\r\n## JwtRequestFilter\r\n\r\n```java\r\n@Component\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class JwtRequestFilter extends OncePerRequestFilter {\r\n\r\n    private final JwtUtil jwtUtil;\r\n    private final CookieUtil cookieUtil;\r\n\r\n    @Override\r\n    protected void doFilterInternal(@NotNull HttpServletRequest request,\r\n                                    @NotNull HttpServletResponse response,\r\n                                    @NotNull FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n\r\n        Optional.ofNullable(extractToken(request))\r\n                .ifPresent(\r\n                        token -&gt; {\r\n                            try {\r\n                                authenticate(token, request);\r\n                            } catch (Exception e) {\r\n                                log.error(e.getMessage());\r\n                            }\r\n                        }\r\n                );\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private String extractToken(HttpServletRequest request) {\r\n        Cookie[] cookies = request.getCookies();\r\n        if (cookies == null) {\r\n            return null;\r\n        }\r\n        return cookieUtil.getAccessToken(request);\r\n    }\r\n\r\n\r\n    private void authenticate(String token, HttpServletRequest request) {\r\n        String email = jwtUtil.getEmailFromToken(token);\r\n\r\n        if (email == null) {\r\n            return;\r\n        }\r\n\r\n        Collection&lt;? extends GrantedAuthority&gt; authorities =\r\n                jwtUtil.getRolesFromToken(token)\r\n                        .stream()\r\n                        .map(SimpleGrantedAuthority::new)\r\n                        .collect(Collectors.toList());\r\n\r\n\r\n        if (SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UsernamePasswordAuthenticationToken authenticationToken =\r\n                    new UsernamePasswordAuthenticationToken(email, null, authorities);\r\n            authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n            SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nI tried to add an additional auth provider for authorization, but I don&#39;t think that&#39;s the problem. If you have any ideas I would be very grateful for your help\r\n\r\n## JwtUtil for generating token\r\n```java\r\n@Slf4j\r\n@Component\r\npublic class JwtUtil {\r\n\r\n    @Value(&quot;${jwt.secret}&quot;)\r\n    private String secret;\r\n\r\n    @Value(&quot;${jwt.jwt-lifetime}&quot;)\r\n    private Duration jwtLifeTime;\r\n\r\n    public String generateToken(UserDetails userDetails){\r\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n        List&lt;String&gt; rolesList = userDetails.getAuthorities().stream()\r\n                .map(GrantedAuthority::getAuthority)\r\n                .toList();\r\n        claims.put(&quot;roles&quot;, rolesList);\r\n        Date issuedDate = new Date();\r\n        Date expiredDate = new Date(issuedDate.getTime() + jwtLifeTime.toMillis());\r\n        return Jwts.builder()\r\n                .setClaims(claims)\r\n                .setSubject(userDetails.getUsername())\r\n                .setIssuedAt(issuedDate)\r\n                .setExpiration(expiredDate)\r\n                .signWith(SignatureAlgorithm.HS256, secret)\r\n                .compact();\r\n    }\r\n    public int getMaxAge(String token)\r\n    {\r\n        return (int) ((getExpiration(token)-getIssued(token))/1000);\r\n    }\r\n    public long getIssued(String token)\r\n    {\r\n        return getAllClaimsFromToken(token).getIssuedAt().getTime();\r\n    }\r\n\r\n    public String getEmailFromToken(String token){\r\n        return getAllClaimsFromToken(token).getSubject();\r\n    }\r\n\r\n    public List&lt;String&gt; getRolesFromToken(String token){\r\n        return getAllClaimsFromToken(token).get(&quot;roles&quot;, List.class);\r\n    }\r\n\r\n    public Long getExpiration(String token){\r\n        return getAllClaimsFromToken(token)\r\n                .getExpiration()\r\n                .getTime();\r\n    }\r\n    private Claims getAllClaimsFromToken(String token){\r\n        return Jwts.parser()\r\n                .setSigningKey(secret)\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n    }\r\n\r\n   /* public String resolveToken(HttpServletRequest req){\r\n        String bearerToken = req.getHeader(&quot;Authorization&quot;);\r\n        if(bearerToken != null &amp;&amp; bearerToken.startsWith(&quot;Bearer &quot;)){\r\n            return bearerToken.substring(7, bearerToken.length());\r\n        }\r\n        return null;\r\n    }*/\r\n\r\n}\r\n```\r\n## CookieUtil\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@Component\r\npublic class CookieUtil {\r\n\r\n    private final String ACCESS_TOKEN_COOKIE_NAME = &quot;access_token&quot;;\r\n    private final String REFRESH_TOKEN_COOKIE_NAME = &quot;refresh_token&quot;;\r\n\r\n    public void setAccessToken(HttpServletResponse response, String token, int maxAge){\r\n        ResponseCookie responseCookie =\r\n                ResponseCookie.from(ACCESS_TOKEN_COOKIE_NAME, token)\r\n                        .path(&quot;/&quot;)\r\n                        .maxAge(maxAge)\r\n                        .httpOnly(true)\r\n                        .secure(true)\r\n                        .sameSite(&quot;None&quot;)\r\n                        .build();\r\n        response.addHeader(HttpHeaders.SET_COOKIE, responseCookie.toString());\r\n    }\r\n\r\n    public void setRefreshToken(HttpServletResponse response, String token, int maxAge){\r\n        ResponseCookie responseCookie =\r\n                ResponseCookie.from(REFRESH_TOKEN_COOKIE_NAME, token)\r\n                        .path(&quot;/&quot;)\r\n                        .maxAge(maxAge)\r\n                        .httpOnly(true)\r\n                        .secure(true)\r\n                        .sameSite(&quot;None&quot;)\r\n                        .build();\r\n        response.addHeader(HttpHeaders.SET_COOKIE, responseCookie.toString());\r\n    }\r\n\r\n    public void clearAccessToken(HttpServletResponse response) {\r\n        Cookie cookie = new Cookie(ACCESS_TOKEN_COOKIE_NAME, null);\r\n        cookie.setPath(&quot;/&quot;);\r\n        cookie.setMaxAge(0);\r\n        response.addCookie(cookie);\r\n    }\r\n\r\n    public String getAccessToken(HttpServletRequest request) {\r\n        Cookie[] cookies = request.getCookies();\r\n        return Arrays.stream(cookies)\r\n                .filter(cookie -&gt; cookie.getName().equals(ACCESS_TOKEN_COOKIE_NAME))\r\n                .map(Cookie::getValue)\r\n                .findFirst()\r\n                .orElse(null);\r\n    }\r\n    public void clearRefreshToken(HttpServletResponse response) {\r\n        Cookie cookie = new Cookie(REFRESH_TOKEN_COOKIE_NAME, null);\r\n        cookie.setPath(&quot;/&quot;);\r\n        cookie.setMaxAge(0);\r\n        response.addCookie(cookie);\r\n    }\r\n\r\n    public String getRefreshToken(HttpServletRequest request) {\r\n        Cookie[] cookies = request.getCookies();\r\n        return Arrays.stream(cookies)\r\n                    .filter(cookie -&gt; cookie.getName().equals(REFRESH_TOKEN_COOKIE_NAME))\r\n                    .map(Cookie::getValue)\r\n                    .findFirst()\r\n                    .orElse(null);\r\n    }\r\n}\r\n```\r\n## AuthService\r\n\r\n```java\r\n@Service\r\n@Slf4j\r\n@AllArgsConstructor\r\npublic class AuthService {\r\n\r\n    private final UserService userService;\r\n    private final JwtUtil jwtUtil;\r\n    private final AuthenticationManager authenticationManager;\r\n    private final RefreshTokenService refreshTokenService;\r\n    private final RoleRepository roleRepository;\r\n    private final PasswordEncoder passwordEncoder;\r\n    private final UserInstanceRepository userInstanceRepository;\r\n    private final CookieUtil cookieUtil;\r\n\r\n    public ResponseEntity&lt;?&gt; authUser(HttpServletResponse response, JwtRequestDTO jwtRequestDTO) {\r\n        try {\r\n            Authentication authentication = authenticationManager.authenticate(\r\n                    new UsernamePasswordAuthenticationToken(jwtRequestDTO.getEmail(), jwtRequestDTO.getPassword()));\r\n            log.info(authentication.toString());\r\n            UserInstance userInstance = (UserInstance) authentication.getPrincipal();\r\n            log.info(&quot;User authenticated successfully: {}&quot;, jwtRequestDTO.getEmail());\r\n\r\n            String token = jwtUtil.generateToken(userInstance);\r\n            RefreshToken refreshToken = refreshTokenService.createToken(userInstance.getId());\r\n\r\n            cookieUtil.setAccessToken(response, token, jwtUtil.getMaxAge(token));\r\n            cookieUtil.setRefreshToken(response, refreshToken.getToken(),\r\n                    refreshTokenService.getExpiryDate(refreshToken));\r\n\r\n            log.info(&quot;JWT token generated successfully for user: {}&quot;, jwtRequestDTO.getEmail());\r\n            return ResponseEntity.ok(new JwtResponseDTO(token, refreshToken.getToken()));\r\n        } catch (BadCredentialsException e) {\r\n            return new ResponseEntity&lt;&gt;(new AppError(HttpStatus.UNAUTHORIZED.value(), &quot;Неправильный логин или пароль&quot;),\r\n                    HttpStatus.UNAUTHORIZED);\r\n        }\r\n    }\r\n\r\n    public ResponseEntity&lt;?&gt; registerUser(HttpServletResponse response, RegistrationDTO registrationDTO) {\r\n        var userInstance = new UserInstance();\r\n        Optional&lt;Role&gt; role = roleRepository.findById(registrationDTO.getRoleId());\r\n        if (role.isEmpty()) {\r\n            return new ResponseEntity&lt;&gt;(\r\n                    new AppError(HttpStatus.NOT_FOUND.value(), &quot;Role is empty&quot;), HttpStatus.NOT_FOUND);\r\n        }\r\n        if (userInstanceRepository.findUserInstanceByEmail(registrationDTO.getEmail()).isPresent()) {\r\n            return new ResponseEntity&lt;&gt;(\r\n                    new AppError(HttpStatus.BAD_REQUEST.value(), &quot;USER EXISTS&quot;), HttpStatus.BAD_REQUEST);\r\n        }\r\n        userInstance.setEmail(registrationDTO.getEmail());\r\n        userInstance.setIdRole(role.get());\r\n        userInstance.setRegistrationDate(OffsetDateTime.now());\r\n        userInstance.setPassword(passwordEncoder.encode(registrationDTO.getPassword()));\r\n        userInstanceRepository.save(userInstance);\r\n\r\n        String token = jwtUtil.generateToken(userInstance);\r\n        RefreshToken refreshToken = refreshTokenService.createToken(userInstance.getId());\r\n\r\n        cookieUtil.setAccessToken(response, token, jwtUtil.getMaxAge(token));\r\n        cookieUtil.setRefreshToken(response, refreshToken.getToken(), refreshTokenService.getExpiryDate(refreshToken));\r\n\r\n        return new ResponseEntity&lt;&gt;(new JwtResponseDTO(token, refreshToken.getToken()), HttpStatus.OK);\r\n    }\r\n\r\n    public ResponseEntity&lt;?&gt; refreshToken(HttpServletResponse response, HttpServletRequest request) {\r\n        String requestRefreshToken = cookieUtil.getRefreshToken(request);\r\n        Optional&lt;RefreshToken&gt; optionalRefreshToken = refreshTokenService.findByToken(requestRefreshToken);\r\n        if (optionalRefreshToken.isPresent()) {\r\n            RefreshToken refreshToken = refreshTokenService.verifyExpiration(optionalRefreshToken.get());\r\n            UserInstance user = refreshToken.getUser();\r\n            String token = jwtUtil.generateToken(user);\r\n            cookieUtil.setAccessToken(response, token, jwtUtil.getMaxAge(token));\r\n            return ResponseEntity.ok(new TokenRefreshResponse(token, requestRefreshToken));\r\n        } else {\r\n            throw new TokenRefreshException(requestRefreshToken, &quot;Refresh token is not in the database!&quot;);\r\n        }\r\n    }\r\n\r\n    public ResponseEntity&lt;?&gt; logoutUser(HttpServletRequest request, HttpServletResponse response) {\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n\r\n        if (authentication == null) {\r\n            return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\r\n        }\r\n\r\n        String principal = null;\r\n\r\n        if (authentication.getPrincipal() instanceof UserDetails) {\r\n            principal = ((UserDetails) authentication.getPrincipal()).getUsername();\r\n        } else if (authentication.getPrincipal() instanceof String) {\r\n            principal = (String) authentication.getPrincipal();\r\n            log.info(&quot;{}&quot;, principal);\r\n        }\r\n\r\n        if (principal == null) {\r\n            throw new IllegalStateException();\r\n        }\r\n\r\n        try {\r\n            SecurityContextLogoutHandler logoutHandler = new SecurityContextLogoutHandler();\r\n            log.info((String) authentication.getPrincipal());\r\n            Long userId = userService.getUserIdByUsername(principal);\r\n            refreshTokenService.deleteByUserId(userId);\r\n            logoutHandler.logout(request, response, SecurityContextHolder.getContext().getAuthentication());\r\n            // clear cookies/session\r\n            cookieUtil.clearAccessToken(response);\r\n            cookieUtil.clearRefreshToken(response);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        return ResponseEntity.ok(&quot;Logout successful&quot;);\r\n    }\r\n}\r\n```","title":"Java, Spring Security how to store JWT token in cookie","body":"<p>I encountered a problem that when I refresh the page, my authentication fails and all cookies are erased. As I understand it, the problem is directly in my filter</p>\n<p>Below is the filter code</p>\n<h2>JwtRequestFilter</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@RequiredArgsConstructor\n@Slf4j\npublic class JwtRequestFilter extends OncePerRequestFilter {\n\n    private final JwtUtil jwtUtil;\n    private final CookieUtil cookieUtil;\n\n    @Override\n    protected void doFilterInternal(@NotNull HttpServletRequest request,\n                                    @NotNull HttpServletResponse response,\n                                    @NotNull FilterChain filterChain)\n            throws ServletException, IOException {\n\n        Optional.ofNullable(extractToken(request))\n                .ifPresent(\n                        token -&gt; {\n                            try {\n                                authenticate(token, request);\n                            } catch (Exception e) {\n                                log.error(e.getMessage());\n                            }\n                        }\n                );\n        filterChain.doFilter(request, response);\n    }\n\n    private String extractToken(HttpServletRequest request) {\n        Cookie[] cookies = request.getCookies();\n        if (cookies == null) {\n            return null;\n        }\n        return cookieUtil.getAccessToken(request);\n    }\n\n\n    private void authenticate(String token, HttpServletRequest request) {\n        String email = jwtUtil.getEmailFromToken(token);\n\n        if (email == null) {\n            return;\n        }\n\n        Collection&lt;? extends GrantedAuthority&gt; authorities =\n                jwtUtil.getRolesFromToken(token)\n                        .stream()\n                        .map(SimpleGrantedAuthority::new)\n                        .collect(Collectors.toList());\n\n\n        if (SecurityContextHolder.getContext().getAuthentication() == null) {\n            UsernamePasswordAuthenticationToken authenticationToken =\n                    new UsernamePasswordAuthenticationToken(email, null, authorities);\n            authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n            SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n        }\n    }\n\n}\n\n</code></pre>\n<p>I tried to add an additional auth provider for authorization, but I don't think that's the problem. If you have any ideas I would be very grateful for your help</p>\n<h2>JwtUtil for generating token</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Component\npublic class JwtUtil {\n\n    @Value(&quot;${jwt.secret}&quot;)\n    private String secret;\n\n    @Value(&quot;${jwt.jwt-lifetime}&quot;)\n    private Duration jwtLifeTime;\n\n    public String generateToken(UserDetails userDetails){\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        List&lt;String&gt; rolesList = userDetails.getAuthorities().stream()\n                .map(GrantedAuthority::getAuthority)\n                .toList();\n        claims.put(&quot;roles&quot;, rolesList);\n        Date issuedDate = new Date();\n        Date expiredDate = new Date(issuedDate.getTime() + jwtLifeTime.toMillis());\n        return Jwts.builder()\n                .setClaims(claims)\n                .setSubject(userDetails.getUsername())\n                .setIssuedAt(issuedDate)\n                .setExpiration(expiredDate)\n                .signWith(SignatureAlgorithm.HS256, secret)\n                .compact();\n    }\n    public int getMaxAge(String token)\n    {\n        return (int) ((getExpiration(token)-getIssued(token))/1000);\n    }\n    public long getIssued(String token)\n    {\n        return getAllClaimsFromToken(token).getIssuedAt().getTime();\n    }\n\n    public String getEmailFromToken(String token){\n        return getAllClaimsFromToken(token).getSubject();\n    }\n\n    public List&lt;String&gt; getRolesFromToken(String token){\n        return getAllClaimsFromToken(token).get(&quot;roles&quot;, List.class);\n    }\n\n    public Long getExpiration(String token){\n        return getAllClaimsFromToken(token)\n                .getExpiration()\n                .getTime();\n    }\n    private Claims getAllClaimsFromToken(String token){\n        return Jwts.parser()\n                .setSigningKey(secret)\n                .parseClaimsJws(token)\n                .getBody();\n    }\n\n   /* public String resolveToken(HttpServletRequest req){\n        String bearerToken = req.getHeader(&quot;Authorization&quot;);\n        if(bearerToken != null &amp;&amp; bearerToken.startsWith(&quot;Bearer &quot;)){\n            return bearerToken.substring(7, bearerToken.length());\n        }\n        return null;\n    }*/\n\n}\n</code></pre>\n<h2>CookieUtil</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@Component\npublic class CookieUtil {\n\n    private final String ACCESS_TOKEN_COOKIE_NAME = &quot;access_token&quot;;\n    private final String REFRESH_TOKEN_COOKIE_NAME = &quot;refresh_token&quot;;\n\n    public void setAccessToken(HttpServletResponse response, String token, int maxAge){\n        ResponseCookie responseCookie =\n                ResponseCookie.from(ACCESS_TOKEN_COOKIE_NAME, token)\n                        .path(&quot;/&quot;)\n                        .maxAge(maxAge)\n                        .httpOnly(true)\n                        .secure(true)\n                        .sameSite(&quot;None&quot;)\n                        .build();\n        response.addHeader(HttpHeaders.SET_COOKIE, responseCookie.toString());\n    }\n\n    public void setRefreshToken(HttpServletResponse response, String token, int maxAge){\n        ResponseCookie responseCookie =\n                ResponseCookie.from(REFRESH_TOKEN_COOKIE_NAME, token)\n                        .path(&quot;/&quot;)\n                        .maxAge(maxAge)\n                        .httpOnly(true)\n                        .secure(true)\n                        .sameSite(&quot;None&quot;)\n                        .build();\n        response.addHeader(HttpHeaders.SET_COOKIE, responseCookie.toString());\n    }\n\n    public void clearAccessToken(HttpServletResponse response) {\n        Cookie cookie = new Cookie(ACCESS_TOKEN_COOKIE_NAME, null);\n        cookie.setPath(&quot;/&quot;);\n        cookie.setMaxAge(0);\n        response.addCookie(cookie);\n    }\n\n    public String getAccessToken(HttpServletRequest request) {\n        Cookie[] cookies = request.getCookies();\n        return Arrays.stream(cookies)\n                .filter(cookie -&gt; cookie.getName().equals(ACCESS_TOKEN_COOKIE_NAME))\n                .map(Cookie::getValue)\n                .findFirst()\n                .orElse(null);\n    }\n    public void clearRefreshToken(HttpServletResponse response) {\n        Cookie cookie = new Cookie(REFRESH_TOKEN_COOKIE_NAME, null);\n        cookie.setPath(&quot;/&quot;);\n        cookie.setMaxAge(0);\n        response.addCookie(cookie);\n    }\n\n    public String getRefreshToken(HttpServletRequest request) {\n        Cookie[] cookies = request.getCookies();\n        return Arrays.stream(cookies)\n                    .filter(cookie -&gt; cookie.getName().equals(REFRESH_TOKEN_COOKIE_NAME))\n                    .map(Cookie::getValue)\n                    .findFirst()\n                    .orElse(null);\n    }\n}\n</code></pre>\n<h2>AuthService</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Slf4j\n@AllArgsConstructor\npublic class AuthService {\n\n    private final UserService userService;\n    private final JwtUtil jwtUtil;\n    private final AuthenticationManager authenticationManager;\n    private final RefreshTokenService refreshTokenService;\n    private final RoleRepository roleRepository;\n    private final PasswordEncoder passwordEncoder;\n    private final UserInstanceRepository userInstanceRepository;\n    private final CookieUtil cookieUtil;\n\n    public ResponseEntity&lt;?&gt; authUser(HttpServletResponse response, JwtRequestDTO jwtRequestDTO) {\n        try {\n            Authentication authentication = authenticationManager.authenticate(\n                    new UsernamePasswordAuthenticationToken(jwtRequestDTO.getEmail(), jwtRequestDTO.getPassword()));\n            log.info(authentication.toString());\n            UserInstance userInstance = (UserInstance) authentication.getPrincipal();\n            log.info(&quot;User authenticated successfully: {}&quot;, jwtRequestDTO.getEmail());\n\n            String token = jwtUtil.generateToken(userInstance);\n            RefreshToken refreshToken = refreshTokenService.createToken(userInstance.getId());\n\n            cookieUtil.setAccessToken(response, token, jwtUtil.getMaxAge(token));\n            cookieUtil.setRefreshToken(response, refreshToken.getToken(),\n                    refreshTokenService.getExpiryDate(refreshToken));\n\n            log.info(&quot;JWT token generated successfully for user: {}&quot;, jwtRequestDTO.getEmail());\n            return ResponseEntity.ok(new JwtResponseDTO(token, refreshToken.getToken()));\n        } catch (BadCredentialsException e) {\n            return new ResponseEntity&lt;&gt;(new AppError(HttpStatus.UNAUTHORIZED.value(), &quot;Неправильный логин или пароль&quot;),\n                    HttpStatus.UNAUTHORIZED);\n        }\n    }\n\n    public ResponseEntity&lt;?&gt; registerUser(HttpServletResponse response, RegistrationDTO registrationDTO) {\n        var userInstance = new UserInstance();\n        Optional&lt;Role&gt; role = roleRepository.findById(registrationDTO.getRoleId());\n        if (role.isEmpty()) {\n            return new ResponseEntity&lt;&gt;(\n                    new AppError(HttpStatus.NOT_FOUND.value(), &quot;Role is empty&quot;), HttpStatus.NOT_FOUND);\n        }\n        if (userInstanceRepository.findUserInstanceByEmail(registrationDTO.getEmail()).isPresent()) {\n            return new ResponseEntity&lt;&gt;(\n                    new AppError(HttpStatus.BAD_REQUEST.value(), &quot;USER EXISTS&quot;), HttpStatus.BAD_REQUEST);\n        }\n        userInstance.setEmail(registrationDTO.getEmail());\n        userInstance.setIdRole(role.get());\n        userInstance.setRegistrationDate(OffsetDateTime.now());\n        userInstance.setPassword(passwordEncoder.encode(registrationDTO.getPassword()));\n        userInstanceRepository.save(userInstance);\n\n        String token = jwtUtil.generateToken(userInstance);\n        RefreshToken refreshToken = refreshTokenService.createToken(userInstance.getId());\n\n        cookieUtil.setAccessToken(response, token, jwtUtil.getMaxAge(token));\n        cookieUtil.setRefreshToken(response, refreshToken.getToken(), refreshTokenService.getExpiryDate(refreshToken));\n\n        return new ResponseEntity&lt;&gt;(new JwtResponseDTO(token, refreshToken.getToken()), HttpStatus.OK);\n    }\n\n    public ResponseEntity&lt;?&gt; refreshToken(HttpServletResponse response, HttpServletRequest request) {\n        String requestRefreshToken = cookieUtil.getRefreshToken(request);\n        Optional&lt;RefreshToken&gt; optionalRefreshToken = refreshTokenService.findByToken(requestRefreshToken);\n        if (optionalRefreshToken.isPresent()) {\n            RefreshToken refreshToken = refreshTokenService.verifyExpiration(optionalRefreshToken.get());\n            UserInstance user = refreshToken.getUser();\n            String token = jwtUtil.generateToken(user);\n            cookieUtil.setAccessToken(response, token, jwtUtil.getMaxAge(token));\n            return ResponseEntity.ok(new TokenRefreshResponse(token, requestRefreshToken));\n        } else {\n            throw new TokenRefreshException(requestRefreshToken, &quot;Refresh token is not in the database!&quot;);\n        }\n    }\n\n    public ResponseEntity&lt;?&gt; logoutUser(HttpServletRequest request, HttpServletResponse response) {\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n\n        if (authentication == null) {\n            return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\n        }\n\n        String principal = null;\n\n        if (authentication.getPrincipal() instanceof UserDetails) {\n            principal = ((UserDetails) authentication.getPrincipal()).getUsername();\n        } else if (authentication.getPrincipal() instanceof String) {\n            principal = (String) authentication.getPrincipal();\n            log.info(&quot;{}&quot;, principal);\n        }\n\n        if (principal == null) {\n            throw new IllegalStateException();\n        }\n\n        try {\n            SecurityContextLogoutHandler logoutHandler = new SecurityContextLogoutHandler();\n            log.info((String) authentication.getPrincipal());\n            Long userId = userService.getUserIdByUsername(principal);\n            refreshTokenService.deleteByUserId(userId);\n            logoutHandler.logout(request, response, SecurityContextHolder.getContext().getAuthentication());\n            // clear cookies/session\n            cookieUtil.clearAccessToken(response);\n            cookieUtil.clearRefreshToken(response);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n        return ResponseEntity.ok(&quot;Logout successful&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","c","java-native-interface"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699130660,"post_id":27925170,"comment_id":136493572,"body_markdown":"Your C code method signatures must agree precisely with the generated headers.","body":"Your C code method signatures must agree precisely with the generated headers."}],"answers":[{"tags":[],"owner":{"account_id":3275558,"reputation":2866,"user_id":2757729,"accept_rate":67,"display_name":"Nathaniel D. Waggoner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1421162764,"creation_date":1421162764,"answer_id":27925570,"question_id":27925170,"body_markdown":"I think your method signatures might be wrong...\r\n\r\nhttps://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html\r\n\r\nIf you&#39;ll notice a few things:\r\n\r\n1)  the addition of `JNIEXPORT` and  `JNICALL` around methods..\r\n2)  the to `j&lt;object&gt;` type of arguments to be returned.\r\n\r\nI think you need to mofidy your int example to:\r\n\r\n    JNIEXPORT jint JNICALL Java_com_any_dom_Eservice_invokeNativeFunction2(JNIEnv* env, jobject obj) {\r\n        jint rr = 99;\r\n        ...\r\n        return rr;\r\n    }\r\n\r\n","title":"Is it possible that JNI function return integer or boolean?","body":"<p>I think your method signatures might be wrong...</p>\n\n<p><a href=\"https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html\" rel=\"nofollow\">https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html</a></p>\n\n<p>If you'll notice a few things:</p>\n\n<p>1)  the addition of <code>JNIEXPORT</code> and  <code>JNICALL</code> around methods..\n2)  the to <code>j&lt;object&gt;</code> type of arguments to be returned.</p>\n\n<p>I think you need to mofidy your int example to:</p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_com_any_dom_Eservice_invokeNativeFunction2(JNIEnv* env, jobject obj) {\n    jint rr = 99;\n    ...\n    return rr;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1421163175,"creation_date":1421162794,"answer_id":27925584,"question_id":27925170,"body_markdown":"Why not just do some static casts:\r\n\r\n    return static_cast&lt;jboolean&gt;(bb);\r\n\r\n    return static_cast&lt;jint&gt;(rr);\r\n\r\nIn my copy of `jni.h` `jint` is defined as an `int32_t`, and `jboolean` is defined as a `uint8_t`. The internal representations of `true` and `false` are the same in C++ and Java (at the VM level) AFAIK (i.e. 0==false, 1==true).\r\n\r\nYou can of course add some sanity checks if you want to, e.g.:\r\n\r\n\tassert(numeric_limits&lt;jint&gt;::is_signed == numeric_limits&lt;decltype(rr)&gt;::is_signed &amp;&amp;\r\n\t       numeric_limits&lt;jint&gt;::min() &lt;= numeric_limits&lt;decltype(rr)&gt;::min() &amp;&amp;\r\n\t       numeric_limits&lt;jint&gt;::max() &gt;= numeric_limits&lt;decltype(rr)&gt;::max());\r\n\r\n\r\n","title":"Is it possible that JNI function return integer or boolean?","body":"<p>Why not just do some static casts:</p>\n\n<pre><code>return static_cast&lt;jboolean&gt;(bb);\n\nreturn static_cast&lt;jint&gt;(rr);\n</code></pre>\n\n<p>In my copy of <code>jni.h</code> <code>jint</code> is defined as an <code>int32_t</code>, and <code>jboolean</code> is defined as a <code>uint8_t</code>. The internal representations of <code>true</code> and <code>false</code> are the same in C++ and Java (at the VM level) AFAIK (i.e. 0==false, 1==true).</p>\n\n<p>You can of course add some sanity checks if you want to, e.g.:</p>\n\n<pre><code>assert(numeric_limits&lt;jint&gt;::is_signed == numeric_limits&lt;decltype(rr)&gt;::is_signed &amp;&amp;\n       numeric_limits&lt;jint&gt;::min() &lt;= numeric_limits&lt;decltype(rr)&gt;::min() &amp;&amp;\n       numeric_limits&lt;jint&gt;::max() &gt;= numeric_limits&lt;decltype(rr)&gt;::max());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5438128,"reputation":11717,"user_id":4326936,"accept_rate":39,"display_name":"alijandro"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1421163034,"creation_date":1421163034,"answer_id":27925658,"question_id":27925170,"body_markdown":"Yes, just return the value directly.\r\n\r\n    JNIEXPORT jint JNICALL Java_com_example_demojni_Sample_intMethod(JNIEnv* env, jobject obj,\r\n\t\tjint value) {\r\n\t    return value * value;\r\n    }\r\n\r\n    JNIEXPORT jboolean JNICALL Java_com_example_demojni_Sample_booleanMethod(JNIEnv* env,\r\n\t\tjobject obj, jboolean unsignedChar) {\r\n\t    return !unsignedChar;\r\n    }\r\n\r\nThere is a map relation between Java primitive type and native type, reference [here][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/types.html#wp9502","title":"Is it possible that JNI function return integer or boolean?","body":"<p>Yes, just return the value directly.</p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_com_example_demojni_Sample_intMethod(JNIEnv* env, jobject obj,\n    jint value) {\n    return value * value;\n}\n\nJNIEXPORT jboolean JNICALL Java_com_example_demojni_Sample_booleanMethod(JNIEnv* env,\n    jobject obj, jboolean unsignedChar) {\n    return !unsignedChar;\n}\n</code></pre>\n\n<p>There is a map relation between Java primitive type and native type, reference <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/types.html#wp9502\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":26226591,"reputation":1,"user_id":19903202,"display_name":"Jenya_nsk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697626540,"creation_date":1697626540,"answer_id":77315665,"question_id":27925170,"body_markdown":"In java class change return type to primitive - boolean. In jni header change return type - jobject to jboolean, and dont generate header again to save changes.\r\n","title":"Is it possible that JNI function return integer or boolean?","body":"<p>In java class change return type to primitive - boolean. In jni header change return type - jobject to jboolean, and dont generate header again to save changes.</p>\n"}],"owner":{"account_id":984764,"reputation":42119,"user_id":1003575,"accept_rate":69,"display_name":"MOHAMED"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17122,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":27925658,"answer_count":4,"score":8,"last_activity_date":1697626540,"creation_date":1421161610,"question_id":27925170,"body_markdown":"**JAVA Code**\r\n\r\n    boolean b = invokeNativeFunction();\r\n    int i = invokeNativeFunction2();\r\n\r\n**C code**\r\n\r\n    jboolean Java_com_any_dom_Eservice_invokeNativeFunction(JNIEnv* env, jobject obj) {\r\n        bool bb = 0;\r\n        ...\r\n        return // how can return &#39;bb&#39; at the end of the function?\r\n    }\r\n\r\n    jint Java_com_any_dom_Eservice_invokeNativeFunction2(JNIEnv* env, jobject obj) {\r\n        int rr = 0;\r\n        ...\r\n        return // how can return &#39;rr&#39; at the end of the function?\r\n    }\r\n\r\nIs it possible that JNI function return integer or boolean? If yes, How I can do that?\r\n","title":"Is it possible that JNI function return integer or boolean?","body":"<p><strong>JAVA Code</strong></p>\n\n<pre><code>boolean b = invokeNativeFunction();\nint i = invokeNativeFunction2();\n</code></pre>\n\n<p><strong>C code</strong></p>\n\n<pre><code>jboolean Java_com_any_dom_Eservice_invokeNativeFunction(JNIEnv* env, jobject obj) {\n    bool bb = 0;\n    ...\n    return // how can return 'bb' at the end of the function?\n}\n\njint Java_com_any_dom_Eservice_invokeNativeFunction2(JNIEnv* env, jobject obj) {\n    int rr = 0;\n    ...\n    return // how can return 'rr' at the end of the function?\n}\n</code></pre>\n\n<p>Is it possible that JNI function return integer or boolean? If yes, How I can do that?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1346095675,"post_id":12148281,"comment_id":16253412,"body_markdown":"What do you mean, &quot;hide a string&quot;? Can&#39;t you just display a string of &quot;*&quot; the same length as the original? Do you only want to hide *some* characters? Against a pattern? Length?","body":"What do you mean, &quot;hide a string&quot;? Can&#39;t you just display a string of &quot;<i>&quot; the same length as the original? Do you only want to hide *some</i> characters? Against a pattern? Length?"},{"owner":{"account_id":470330,"reputation":10950,"user_id":877472,"accept_rate":77,"display_name":"Paul Richter"},"score":0,"creation_date":1346095777,"post_id":12148281,"comment_id":16253452,"body_markdown":"Yes, as Dave Newton said, there are ways to replaces portions of the string, or the entire string with whatever you please, but you&#39;ll have to be more specific about your desired result. Can you give us a specific example that shows the original string, and how you want it to look after your &#39;replacement&#39;.","body":"Yes, as Dave Newton said, there are ways to replaces portions of the string, or the entire string with whatever you please, but you&#39;ll have to be more specific about your desired result. Can you give us a specific example that shows the original string, and how you want it to look after your &#39;replacement&#39;."},{"owner":{"account_id":1773122,"reputation":199,"user_id":1617498,"accept_rate":64,"display_name":"Jaun Lloyd"},"score":0,"creation_date":1346096041,"post_id":12148281,"comment_id":16253554,"body_markdown":"I have considered the replace char option but the I realized i would get stuck if there&#39;s two of the same chars. Basically what I&#39;m trying to explain is the hangman concept, a line of ------ that represents the word","body":"I have considered the replace char option but the I realized i would get stuck if there&#39;s two of the same chars. Basically what I&#39;m trying to explain is the hangman concept, a line of ------ that represents the word"},{"owner":{"account_id":1416173,"reputation":6877,"user_id":1341806,"accept_rate":80,"display_name":"Dan Ciborowski - MSFT"},"score":0,"creation_date":1346096526,"post_id":12148281,"comment_id":16253762,"body_markdown":"What do you want preserved and what do you want to become * out of the following options:\nChars, Nums, Spaces, Tabs, Just Letters, things like #$%^&amp;@","body":"What do you want preserved and what do you want to become * out of the following options: Chars, Nums, Spaces, Tabs, Just Letters, things like #$%^&amp;@"}],"answers":[{"tags":[],"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1346097883,"creation_date":1346095966,"answer_id":12148388,"question_id":12148281,"body_markdown":"Is this for making a password? Consider the following:\r\n\r\n    class Password {\r\n        final String password; // the string to mask\r\n        Password(String password) { this.password = password; } // needs null protection\r\n        // allow this to be equal to any string\r\n        // reconsider this approach if adding it to a map or something?\r\n        public boolean equals(Object o) {\r\n            return password.equals(o);\r\n        }\r\n        // we don&#39;t need anything special that the string doesnt\r\n        public int hashCode() { return password.hashCode(); }\r\n        // send stars if anyone asks to see the string - consider sending just\r\n        // &quot;******&quot; instead of the length, that way you don&#39;t reveal the password&#39;s length\r\n        // which might be protected information\r\n        public String toString() {\r\n            StringBuilder sb = new StringBuilder();\r\n            for(int i = 0; &lt; password.length(); i++) \r\n                sb.append(&quot;*&quot;);\r\n            return sb.toString();\r\n        }\r\n    }\r\n\r\nOr for the hangman approach\r\n\r\n    class Hangman {\r\n        final String word;\r\n        final BitSet revealed;\r\n        public Hangman(String word) {\r\n            this.word = word;\r\n            this.revealed = new BitSet(word.length());\r\n            reveal(&#39; &#39;);\r\n            reveal(&#39;-&#39;);\r\n        }\r\n        public void reveal(char c) {\r\n            for(int i = 0; i &lt; word.length; i++) {\r\n                if(word.charAt(i) == c) revealed.set(i);\r\n            }\r\n        }\r\n        public boolean solve(String guess) {\r\n            return word.equals(guess);\r\n        }\r\n        public String toString() {\r\n             StringBuilder sb = new StringBuilder(word.length());\r\n             for(int i = 0; i &lt; word.length; i++) {\r\n                 char c = revealed.isSet(i) ? word.charAt(i) : &quot;*&quot;;\r\n             }\r\n             return sb.toString();\r\n        }\r\n    }","title":"Mask String with characters","body":"<p>Is this for making a password? Consider the following:</p>\n\n<pre><code>class Password {\n    final String password; // the string to mask\n    Password(String password) { this.password = password; } // needs null protection\n    // allow this to be equal to any string\n    // reconsider this approach if adding it to a map or something?\n    public boolean equals(Object o) {\n        return password.equals(o);\n    }\n    // we don't need anything special that the string doesnt\n    public int hashCode() { return password.hashCode(); }\n    // send stars if anyone asks to see the string - consider sending just\n    // \"******\" instead of the length, that way you don't reveal the password's length\n    // which might be protected information\n    public String toString() {\n        StringBuilder sb = new StringBuilder();\n        for(int i = 0; &lt; password.length(); i++) \n            sb.append(\"*\");\n        return sb.toString();\n    }\n}\n</code></pre>\n\n<p>Or for the hangman approach</p>\n\n<pre><code>class Hangman {\n    final String word;\n    final BitSet revealed;\n    public Hangman(String word) {\n        this.word = word;\n        this.revealed = new BitSet(word.length());\n        reveal(' ');\n        reveal('-');\n    }\n    public void reveal(char c) {\n        for(int i = 0; i &lt; word.length; i++) {\n            if(word.charAt(i) == c) revealed.set(i);\n        }\n    }\n    public boolean solve(String guess) {\n        return word.equals(guess);\n    }\n    public String toString() {\n         StringBuilder sb = new StringBuilder(word.length());\n         for(int i = 0; i &lt; word.length; i++) {\n             char c = revealed.isSet(i) ? word.charAt(i) : \"*\";\n         }\n         return sb.toString();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1860030,"reputation":1147,"user_id":1684768,"display_name":"mrres1"},"score":0,"creation_date":1391229270,"post_id":12148451,"comment_id":32446154,"body_markdown":"You need to check for all white space and non-whitespace characters.  So the regex would be `[\\s\\S]`","body":"You need to check for all white space and non-whitespace characters.  So the regex would be <code>[\\s\\S]</code>"},{"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1391230306,"post_id":12148451,"comment_id":32446377,"body_markdown":"@mrres1 No, I specifically said that using `replaceAll` with the pattern I mentioned &quot;would preserve whitespace&quot;. That is, would only replace non-whitespace characters with an asterisk. So &quot;hello world&quot; would become &quot;***** *****&quot;. The regex you provided would not preserve the whitespace.","body":"@mrres1 No, I specifically said that using <code>replaceAll</code> with the pattern I mentioned &quot;would preserve whitespace&quot;. That is, would only replace non-whitespace characters with an asterisk. So &quot;hello world&quot; would become &quot;***** *****&quot;. The regex you provided would not preserve the whitespace."},{"owner":{"account_id":1860030,"reputation":1147,"user_id":1684768,"display_name":"mrres1"},"score":0,"creation_date":1391270856,"post_id":12148451,"comment_id":32456581,"body_markdown":"The question is &quot;Is there a way to hide the characters in a string with either &quot;*&quot; or &quot;-&quot; and if there is can someone please explain&quot;","body":"The question is &quot;Is there a way to hide the characters in a string with either &quot;*&quot; or &quot;-&quot; and if there is can someone please explain&quot;"},{"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1391276049,"post_id":12148451,"comment_id":32458195,"body_markdown":"Which is why the `replaceAll` was suggested as as *alternative* which would preserve whitespace if so desired. The previous for-loop would replace all characters.","body":"Which is why the <code>replaceAll</code> was suggested as as <i>alternative</i> which would preserve whitespace if so desired. The previous for-loop would replace all characters."},{"owner":{"account_id":1860030,"reputation":1147,"user_id":1684768,"display_name":"mrres1"},"score":0,"creation_date":1391822349,"post_id":12148451,"comment_id":32704938,"body_markdown":"I think you are answering a question that is not even asked.","body":"I think you are answering a question that is not even asked."},{"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":2,"creation_date":1391829199,"post_id":12148451,"comment_id":32706209,"body_markdown":"Only if the English language has changed significantly since the OP said &quot;is there a way to hide the characters in a string with either &quot;**&quot;* or &quot;-&quot;?&quot;. The for-loop iterates through the string and replaces each character with &#39;*&#39;.","body":"Only if the English language has changed significantly since the OP said &quot;is there a way to hide the characters in a string with either &quot;<i>*&quot;</i> or &quot;-&quot;?&quot;. The for-loop iterates through the string and replaces each character with &#39;*&#39;."},{"owner":{"account_id":1860030,"reputation":1147,"user_id":1684768,"display_name":"mrres1"},"score":0,"creation_date":1392006640,"post_id":12148451,"comment_id":32754401,"body_markdown":"Yes, but if you are offering an alternative, why would you use the `\\S` pattern over the `[\\s\\S]`.  How is preserving whitespace in a password legit, when and where is that ever done?  You answer is non sense.","body":"Yes, but if you are offering an alternative, why would you use the <code>\\S</code> pattern over the <code>[\\s\\S]</code>.  How is preserving whitespace in a password legit, when and where is that ever done?  You answer is non sense."},{"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1392008931,"post_id":12148451,"comment_id":32755003,"body_markdown":"@mrres1 -- Please indicate where in the OP it indicates that this is a password. The OP only says that they wish to hide the characters. I provided two options -- one for hiding all characters, one for hiding the non-white-space characters. Frankly, `\\s\\S` is no more correct: to hide all characters including white space, the correct pattern to use would be `.`","body":"@mrres1 -- Please indicate where in the OP it indicates that this is a password. The OP only says that they wish to hide the characters. I provided two options -- one for hiding all characters, one for hiding the non-white-space characters. Frankly, <code>\\s\\S</code> is no more correct: to hide all characters including white space, the correct pattern to use would be <code>.</code>"},{"owner":{"account_id":1860030,"reputation":1147,"user_id":1684768,"display_name":"mrres1"},"score":0,"creation_date":1392075448,"post_id":12148451,"comment_id":32791942,"body_markdown":"where in the OP it indicates that this is a password: http://stackoverflow.com/a/12148388/1684768","body":"where in the OP it indicates that this is a password: <a href=\"http://stackoverflow.com/a/12148388/1684768\">stackoverflow.com/a/12148388/1684768</a>"},{"owner":{"account_id":1860030,"reputation":1147,"user_id":1684768,"display_name":"mrres1"},"score":0,"creation_date":1392075914,"post_id":12148451,"comment_id":32792098,"body_markdown":"It&#39;s a link to the answer, not an answer.  The OP is the only one who can mark the correct answer.","body":"It&#39;s a link to the answer, not an answer.  The OP is the only one who can mark the correct answer."},{"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1392076655,"post_id":12148451,"comment_id":32792374,"body_markdown":"And yet that answer provides two solutions: one that assumes it&#39;s a password (hides spaces) and one that preserves whitespace (the &quot;hangman approach&quot;).","body":"And yet that answer provides two solutions: one that assumes it&#39;s a password (hides spaces) and one that preserves whitespace (the &quot;hangman approach&quot;)."}],"tags":[],"owner":{"account_id":183966,"reputation":14630,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"comment_count":11,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1392008828,"creation_date":1346096242,"answer_id":12148451,"question_id":12148281,"body_markdown":"Just create a string with the same number of characters as your original, with instead your &quot;obfuscating&quot; character.\r\n\r\n    String x = &quot;ABCD&quot;;\r\n\r\n    String output = &quot;&quot;;\r\n    for (int i = 0; i &lt; x.length(); i++) {\r\n        output += &quot;*&quot;;\r\n    }\r\n\r\nAlternatively you could use `x.replaceAll(&quot;\\\\S&quot;, &quot;*&quot;)`, which would preserve whitespace as well.","title":"Mask String with characters","body":"<p>Just create a string with the same number of characters as your original, with instead your \"obfuscating\" character.</p>\n\n<pre><code>String x = \"ABCD\";\n\nString output = \"\";\nfor (int i = 0; i &lt; x.length(); i++) {\n    output += \"*\";\n}\n</code></pre>\n\n<p>Alternatively you could use <code>x.replaceAll(\"\\\\S\", \"*\")</code>, which would preserve whitespace as well.</p>\n"},{"tags":[],"owner":{"account_id":1142837,"reputation":13542,"user_id":1126273,"accept_rate":81,"display_name":"Bal&#225;zs &#201;des"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1346096985,"creation_date":1346096985,"answer_id":12148631,"question_id":12148281,"body_markdown":"You could easily implement something like this:\r\n\r\n    public class MaskedString\r\n    {\r\n    \tprivate String data;\r\n    \t\r\n    \tpublic MaskedString(String data){this.data = data;}\r\n    \tpublic void append(char c){data += c;}\r\n    \tpublic void setData(String data){this.data = data;}\r\n    \t\r\n    \tpublic String getMasked()\r\n    \t{\r\n    \t\tStringBuilder sb = new StringBuilder();\r\n    \t\tfor(int i=0; i&lt;data.length(); i++)\r\n    \t\t\tsb.append(&#39;*&#39;);\r\n    \t\treturn sb.toString();\r\n    \t}\r\n    \t\r\n    \tpublic String getString()\r\n    \t{\r\n    \t\treturn data;\r\n    \t}\r\n    }\r\n\r\nYou get the idea :)\t","title":"Mask String with characters","body":"<p>You could easily implement something like this:</p>\n\n<pre><code>public class MaskedString\n{\n    private String data;\n\n    public MaskedString(String data){this.data = data;}\n    public void append(char c){data += c;}\n    public void setData(String data){this.data = data;}\n\n    public String getMasked()\n    {\n        StringBuilder sb = new StringBuilder();\n        for(int i=0; i&lt;data.length(); i++)\n            sb.append('*');\n        return sb.toString();\n    }\n\n    public String getString()\n    {\n        return data;\n    }\n}\n</code></pre>\n\n<p>You get the idea :) </p>\n"},{"tags":[],"owner":{"account_id":1860030,"reputation":1147,"user_id":1684768,"display_name":"mrres1"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1392076065,"creation_date":1391271468,"answer_id":21500432,"question_id":12148281,"body_markdown":"There are several ways to achieve this, it would depend on your application.  \r\n\r\nIf you want to mask all characters with another character in one fell swoop you can use the `String#replaceAll(String regex, String replacement)` method: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String).  \r\n\r\nThis involves using Regular Expressions, for `regex` you would use `[\\s\\S]` which will match any whitespace or non whitespace character.  For `replacement` you use a regular string, not a RegEx.  In this case, if you wanted an asterisk, use &quot;*&quot;, for hyphen &quot;-&quot;, very simple.\r\n\r\nAll the other methods here work well except the `@Roddy of the Frozen Pea` and `@djc391` ones, so that&#39;s why I answered it correctly.\r\n\r\nGood luck\r\n\r\n\r\n","title":"Mask String with characters","body":"<p>There are several ways to achieve this, it would depend on your application.  </p>\n\n<p>If you want to mask all characters with another character in one fell swoop you can use the <code>String#replaceAll(String regex, String replacement)</code> method: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String)\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String)</a>.  </p>\n\n<p>This involves using Regular Expressions, for <code>regex</code> you would use <code>[\\s\\S]</code> which will match any whitespace or non whitespace character.  For <code>replacement</code> you use a regular string, not a RegEx.  In this case, if you wanted an asterisk, use \"*\", for hyphen \"-\", very simple.</p>\n\n<p>All the other methods here work well except the <code>@Roddy of the Frozen Pea</code> and <code>@djc391</code> ones, so that's why I answered it correctly.</p>\n\n<p>Good luck</p>\n"},{"tags":[],"owner":{"account_id":1755894,"reputation":98,"user_id":1603957,"display_name":"Jasonw"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583981230,"creation_date":1583981230,"answer_id":60646929,"question_id":12148281,"body_markdown":"My implementation:\r\n```\r\npublic static String maskString(String s, int x) {\r\n    int n = s.length()/x;\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int i = 0; i &lt; s.length(); i++) {\r\n      if (n &gt;= 1 &amp;&amp; (i &lt; n || i &gt;= (s.length() - n))) {\r\n        sb.append(s.charAt(i));\r\n      }\r\n      else {\r\n        sb.append(&quot;*&quot;);\r\n      }\r\n    }\r\n    return sb.toString();\r\n  }\r\n```","title":"Mask String with characters","body":"<p>My implementation:</p>\n\n<pre><code>public static String maskString(String s, int x) {\n    int n = s.length()/x;\n    StringBuilder sb = new StringBuilder();\n    for (int i = 0; i &lt; s.length(); i++) {\n      if (n &gt;= 1 &amp;&amp; (i &lt; n || i &gt;= (s.length() - n))) {\n        sb.append(s.charAt(i));\n      }\n      else {\n        sb.append(\"*\");\n      }\n    }\n    return sb.toString();\n  }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":207298,"reputation":2928,"user_id":457086,"accept_rate":67,"display_name":"JBM"},"score":0,"creation_date":1695341103,"post_id":77079024,"comment_id":136015042,"body_markdown":"Though Kotlin is a cool language, this question was about Java. Would be nicer of you if you indeed converted your code to Java instead of mentioning it.","body":"Though Kotlin is a cool language, this question was about Java. Would be nicer of you if you indeed converted your code to Java instead of mentioning it."},{"owner":{"account_id":5160313,"reputation":624,"user_id":4132230,"display_name":"Sandeep Kumar"},"score":0,"creation_date":1697436373,"post_id":77079024,"comment_id":136274714,"body_markdown":"@JBM Provided Java implementation as well, hope it will help you.","body":"@JBM Provided Java implementation as well, hope it will help you."}],"tags":[],"owner":{"account_id":5160313,"reputation":624,"user_id":4132230,"display_name":"Sandeep Kumar"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697625972,"creation_date":1694408654,"answer_id":77079024,"question_id":12148281,"body_markdown":"If you are looking for simple implementation, you can use below function:\r\n\r\nKotlin:\r\n\r\n```Kotlin\r\nfun String.mask(\r\n        maskString: String = &quot;x&quot;,\r\n        maskAfterLetters: Int = 3,\r\n        isFixSize: Boolean = true,\r\n        maxSize: Int = 10,\r\n        selector: String = &quot;.&quot;\r\n): String {\r\n    if(maskAfterLetters &lt; 0) throw IllegalArgumentException(&quot;Invalid masking configuration - maskAfterLetters should be greater than 0&quot;)\r\n    if(isFixSize &amp;&amp; maxSize &lt;= maskAfterLetters) throw IllegalArgumentException(&quot;Invalid masking configuration - maxSize must be greater than maskAfterLetters&quot;)\r\n    val text = if(isFixSize &amp;&amp; length &gt;= maxSize) substring(0, maxSize) else this\r\n    val unmaskLength = if(maskAfterLetters &lt;= length) maskAfterLetters else length\r\n    return text.substring(0, unmaskLength) + text.substring(unmaskLength, text.length).replace(selector.toRegex(), maskString)\r\n}\r\n```\r\n\r\nJava:\r\n\r\n```\r\n/* \r\nFor Java,\r\nAdditional input parameter named inputStringToBeMasked which is the actual string which has to be masked.\r\n*/\r\n\r\n    public static String mask(\r\n            String inputStringToBeMasked,\r\n            String maskString,\r\n            Integer maskAfterLetters,\r\n            Boolean isFixSize,\r\n            Integer maxSize,\r\n            String selector\r\n    ) {\r\n        //check input and set default if input parameters are not passed\r\n        if(null == maskString || maskString.isEmpty()) maskString = &quot;x&quot;;\r\n        if(null == maskAfterLetters) maskAfterLetters = 3;\r\n        if(null == isFixSize) isFixSize = true;\r\n        if(null == maxSize) maxSize = 10;\r\n        if(null == selector || selector.isEmpty()) selector = &quot;.&quot;;\r\n        if(maskAfterLetters &lt; 0) throw new IllegalArgumentException(&quot;Invalid masking configuration - maskAfterLetters should be greater than 0&quot;);\r\n        if(isFixSize &amp;&amp; maxSize &lt;= maskAfterLetters) throw new IllegalArgumentException(&quot;Invalid masking configuration - maxSize must be greater than maskAfterLetters&quot;);\r\n\r\n        String text = (isFixSize &amp;&amp; inputStringToBeMasked.length() &gt;= maxSize) ? inputStringToBeMasked.substring(0, maxSize) : inputStringToBeMasked;\r\n        Integer unmaskLength = (maskAfterLetters &lt;= inputStringToBeMasked.length()) ? maskAfterLetters : inputStringToBeMasked.length();\r\n        return text.substring(0, unmaskLength) + text.substring(unmaskLength, text.length()).replaceAll(selector, maskString);\r\n    }\r\n\r\n```\r\n\r\nNote: This method in Kotlin, you can covert it in Java easily.\r\n\r\nwhere,\r\n - `maskString`: is an string which is to be replaced with characters being masked\r\n -  `maskAfterLetters`: initial given letters are kept original and then masking started\r\n - `isFixSize`: is given masked result with fixed size of based on input string size\r\n - `maxSize`: if `isFixSize` is true then provided the size of masked string\r\n - `selector`: (no change needed) used for selection of characters to be masked\r\n\r\nIf you are looking for automated masking while serialization and deserialization, you can use [json-masker][1] which is an annotation based making solution.\r\n\r\n\r\n  [1]: https://github.com/javiercanillas/jackson-masker","title":"Mask String with characters","body":"<p>If you are looking for simple implementation, you can use below function:</p>\n<p>Kotlin:</p>\n<pre><code>fun String.mask(\n        maskString: String = &quot;x&quot;,\n        maskAfterLetters: Int = 3,\n        isFixSize: Boolean = true,\n        maxSize: Int = 10,\n        selector: String = &quot;.&quot;\n): String {\n    if(maskAfterLetters &lt; 0) throw IllegalArgumentException(&quot;Invalid masking configuration - maskAfterLetters should be greater than 0&quot;)\n    if(isFixSize &amp;&amp; maxSize &lt;= maskAfterLetters) throw IllegalArgumentException(&quot;Invalid masking configuration - maxSize must be greater than maskAfterLetters&quot;)\n    val text = if(isFixSize &amp;&amp; length &gt;= maxSize) substring(0, maxSize) else this\n    val unmaskLength = if(maskAfterLetters &lt;= length) maskAfterLetters else length\n    return text.substring(0, unmaskLength) + text.substring(unmaskLength, text.length).replace(selector.toRegex(), maskString)\n}\n</code></pre>\n<p>Java:</p>\n<pre><code>/* \nFor Java,\nAdditional input parameter named inputStringToBeMasked which is the actual string which has to be masked.\n*/\n\n    public static String mask(\n            String inputStringToBeMasked,\n            String maskString,\n            Integer maskAfterLetters,\n            Boolean isFixSize,\n            Integer maxSize,\n            String selector\n    ) {\n        //check input and set default if input parameters are not passed\n        if(null == maskString || maskString.isEmpty()) maskString = &quot;x&quot;;\n        if(null == maskAfterLetters) maskAfterLetters = 3;\n        if(null == isFixSize) isFixSize = true;\n        if(null == maxSize) maxSize = 10;\n        if(null == selector || selector.isEmpty()) selector = &quot;.&quot;;\n        if(maskAfterLetters &lt; 0) throw new IllegalArgumentException(&quot;Invalid masking configuration - maskAfterLetters should be greater than 0&quot;);\n        if(isFixSize &amp;&amp; maxSize &lt;= maskAfterLetters) throw new IllegalArgumentException(&quot;Invalid masking configuration - maxSize must be greater than maskAfterLetters&quot;);\n\n        String text = (isFixSize &amp;&amp; inputStringToBeMasked.length() &gt;= maxSize) ? inputStringToBeMasked.substring(0, maxSize) : inputStringToBeMasked;\n        Integer unmaskLength = (maskAfterLetters &lt;= inputStringToBeMasked.length()) ? maskAfterLetters : inputStringToBeMasked.length();\n        return text.substring(0, unmaskLength) + text.substring(unmaskLength, text.length()).replaceAll(selector, maskString);\n    }\n\n</code></pre>\n<p>Note: This method in Kotlin, you can covert it in Java easily.</p>\n<p>where,</p>\n<ul>\n<li><code>maskString</code>: is an string which is to be replaced with characters being masked</li>\n<li><code>maskAfterLetters</code>: initial given letters are kept original and then masking started</li>\n<li><code>isFixSize</code>: is given masked result with fixed size of based on input string size</li>\n<li><code>maxSize</code>: if <code>isFixSize</code> is true then provided the size of masked string</li>\n<li><code>selector</code>: (no change needed) used for selection of characters to be masked</li>\n</ul>\n<p>If you are looking for automated masking while serialization and deserialization, you can use <a href=\"https://github.com/javiercanillas/jackson-masker\" rel=\"nofollow noreferrer\">json-masker</a> which is an annotation based making solution.</p>\n"}],"owner":{"account_id":1773122,"reputation":199,"user_id":1617498,"accept_rate":64,"display_name":"Jaun Lloyd"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54865,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":12148388,"answer_count":6,"score":8,"last_activity_date":1697625972,"creation_date":1346095536,"question_id":12148281,"body_markdown":"Hey guy&#39;s I tried to find a way to hide a string, but the code that I found just work with my application... Is there a way to hide the characters in a string with either `*` or `-` and if there is can someone please explain ","title":"Mask String with characters","body":"<p>Hey guy's I tried to find a way to hide a string, but the code that I found just work with my application... Is there a way to hide the characters in a string with either <code>*</code> or <code>-</code> and if there is can someone please explain </p>\n"},{"tags":["java","android","android-menu"],"answers":[{"comments":[{"owner":{"account_id":2089514,"reputation":1282,"user_id":1859661,"display_name":"svn"},"score":1,"creation_date":1522136622,"post_id":49126196,"comment_id":86018201,"body_markdown":"The question is about showing icons in the overflow menu. This does not awnser that at all","body":"The question is about showing icons in the overflow menu. This does not awnser that at all"}],"tags":[],"owner":{"account_id":2891282,"reputation":1056,"user_id":5273427,"display_name":"Variag"},"comment_count":1,"down_vote_count":8,"up_vote_count":3,"is_accepted":false,"score":-5,"last_activity_date":1522153400,"creation_date":1520324288,"answer_id":49126196,"question_id":48607853,"body_markdown":"**Edit**\r\n\r\nOk, after investigating more on the subject this seems to be a bug as stated in comment and answers to **[this question][1]** and should be safe to suppress it. It may be fixed in one of the next releases of support libraries.\r\n\r\n***\r\n**OLD ANSWER**\r\n\r\nWhy not make menu items visible in XML? Use attribute `android:showAsAction`. There are several values available: `ifroom | always | collapseActionView | never | withText` - [read more][2].\r\n\r\nFor instance if you want to **always show first item** and **show second item if there is room for it**:\r\n\r\n    &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n    \r\n        &lt;item android:id=&quot;@+id/item_id1&quot;\r\n            android:icon=&quot;@drawable/ic_icon1&quot;\r\n            app:iconTint=&quot;@color/white&quot;\r\n            app:showAsAction=&quot;always&quot;\r\n            android:title=&quot;First item&quot;/&gt;\r\n    \r\n        &lt;item android:id=&quot;@+id/item_id2&quot;\r\n            android:icon=&quot;@drawable/ic_icon2&quot;\r\n            app:iconTint=&quot;@color/white&quot;\r\n            app:showAsAction=&quot;ifRoom&quot;\r\n            android:title=&quot;Second item&quot;/&gt;\r\n    &lt;/menu&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/41150995/appcompatactivity-oncreate-can-only-be-called-from-within-the-same-library-group\r\n  [2]: https://developer.android.com/guide/topics/resources/menu-resource.html","title":"menuBuilder.setOptionalIconsVisible can only be called from within the same library group","body":"<p><strong>Edit</strong></p>\n\n<p>Ok, after investigating more on the subject this seems to be a bug as stated in comment and answers to <strong><a href=\"https://stackoverflow.com/questions/41150995/appcompatactivity-oncreate-can-only-be-called-from-within-the-same-library-group\">this question</a></strong> and should be safe to suppress it. It may be fixed in one of the next releases of support libraries.</p>\n\n<hr>\n\n<p><strong>OLD ANSWER</strong></p>\n\n<p>Why not make menu items visible in XML? Use attribute <code>android:showAsAction</code>. There are several values available: <code>ifroom | always | collapseActionView | never | withText</code> - <a href=\"https://developer.android.com/guide/topics/resources/menu-resource.html\" rel=\"nofollow noreferrer\">read more</a>.</p>\n\n<p>For instance if you want to <strong>always show first item</strong> and <strong>show second item if there is room for it</strong>:</p>\n\n<pre><code>&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;item android:id=\"@+id/item_id1\"\n        android:icon=\"@drawable/ic_icon1\"\n        app:iconTint=\"@color/white\"\n        app:showAsAction=\"always\"\n        android:title=\"First item\"/&gt;\n\n    &lt;item android:id=\"@+id/item_id2\"\n        android:icon=\"@drawable/ic_icon2\"\n        app:iconTint=\"@color/white\"\n        app:showAsAction=\"ifRoom\"\n        android:title=\"Second item\"/&gt;\n&lt;/menu&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7440420,"reputation":91,"user_id":5658352,"display_name":"hemdroid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697625553,"creation_date":1697625553,"answer_id":77315553,"question_id":48607853,"body_markdown":"If you are using PopupMenu, you can call setForceShowIcon method to show the icons with text in the menu item.\r\n\r\nJava:-\r\n\r\n    PopupMenu popup = new PopupMenu();\r\n    popup.setForceShowIcon(true);\r\n\r\nXml:-\r\n\r\n    &lt;menu&gt;\r\n            &lt;item\r\n                android:id=&quot;@+id/action_1&quot;\r\n                android:icon=&quot;@drawable/icon_1&quot;\r\n                android:title=&quot;Action 1&quot;/&gt;\r\n            &lt;item\r\n                android:id=&quot;@+id/action_2&quot;\r\n                android:icon=&quot;@drawable/icon_2&quot;\r\n                android:title=&quot;Action 2&quot;/&gt;\r\n        \r\n        &lt;/menu&gt;\r\n    ","title":"menuBuilder.setOptionalIconsVisible can only be called from within the same library group","body":"<p>If you are using PopupMenu, you can call setForceShowIcon method to show the icons with text in the menu item.</p>\n<p>Java:-</p>\n<pre><code>PopupMenu popup = new PopupMenu();\npopup.setForceShowIcon(true);\n</code></pre>\n<p>Xml:-</p>\n<pre><code>&lt;menu&gt;\n        &lt;item\n            android:id=&quot;@+id/action_1&quot;\n            android:icon=&quot;@drawable/icon_1&quot;\n            android:title=&quot;Action 1&quot;/&gt;\n        &lt;item\n            android:id=&quot;@+id/action_2&quot;\n            android:icon=&quot;@drawable/icon_2&quot;\n            android:title=&quot;Action 2&quot;/&gt;\n    \n    &lt;/menu&gt;\n</code></pre>\n"}],"owner":{"account_id":12875460,"reputation":147,"user_id":9312319,"accept_rate":60,"display_name":"Priyanka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5159,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1697625553,"creation_date":1517745925,"question_id":48607853,"body_markdown":"I am trying to show icons with overflow menu with below codes\r\n\r\n    MenuInflater inflater = getMenuInflater();\r\n    inflater.inflate(R.menu.my_menu,menu);\r\n    \r\n    if(menu instanceof MenuBuilder){\r\n        MenuBuilder menuBuilder = (MenuBuilder) menu;\r\n        menuBuilder.setOptionalIconsVisible(true);\r\n    }\r\n\r\nIt gives me this error\r\n\r\n&gt; menuBuilder.setOptionalIconsVisible can only be called from within the same library group\r\n\r\non line\r\n\r\n    menuBuilder.setOptionalIconsVisible(true);\r\n\r\nI know I can suppress it for ignore but I want know why its coming and there any another way to fix it ?\r\n\r\nThanks\r\n","title":"menuBuilder.setOptionalIconsVisible can only be called from within the same library group","body":"<p>I am trying to show icons with overflow menu with below codes</p>\n\n<pre><code>MenuInflater inflater = getMenuInflater();\ninflater.inflate(R.menu.my_menu,menu);\n\nif(menu instanceof MenuBuilder){\n    MenuBuilder menuBuilder = (MenuBuilder) menu;\n    menuBuilder.setOptionalIconsVisible(true);\n}\n</code></pre>\n\n<p>It gives me this error</p>\n\n<blockquote>\n  <p>menuBuilder.setOptionalIconsVisible can only be called from within the same library group</p>\n</blockquote>\n\n<p>on line</p>\n\n<pre><code>menuBuilder.setOptionalIconsVisible(true);\n</code></pre>\n\n<p>I know I can suppress it for ignore but I want know why its coming and there any another way to fix it ?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","selenium","drop-down-menu","scrollbar"],"comments":[{"owner":{"account_id":6128339,"reputation":4087,"user_id":4779472,"accept_rate":89,"display_name":"Rohit Gupta"},"score":1,"creation_date":1445509482,"post_id":33278012,"comment_id":54357922,"body_markdown":"Welcome to Stack Overflow.  I have edited your post to fix some English issues.  I also marked down your example using 4 leading spaces.  Please provide your code so far.","body":"Welcome to Stack Overflow.  I have edited your post to fix some English issues.  I also marked down your example using 4 leading spaces.  Please provide your code so far."}],"answers":[{"comments":[{"owner":{"account_id":3141785,"reputation":11,"user_id":5474952,"display_name":"esamolocik"},"score":0,"creation_date":1445583033,"post_id":33292219,"comment_id":54392002,"body_markdown":"Thanks Błażej for your response.\nI already tried above but the thing is that this list is dynamic. When you use firebug you will see that only 1st 23 elements are &quot;visible&quot;. Once you scroll down the list you will see it refreshed and another set of items are listed. So I would need to run through whole list an see if any of items match what I&#39;m looking for","body":"Thanks Błażej for your response. I already tried above but the thing is that this list is dynamic. When you use firebug you will see that only 1st 23 elements are &quot;visible&quot;. Once you scroll down the list you will see it refreshed and another set of items are listed. So I would need to run through whole list an see if any of items match what I&#39;m looking for"}],"tags":[],"owner":{"account_id":7169569,"reputation":11,"user_id":5477516,"display_name":"Błażej Masłek"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1445555110,"creation_date":1445555110,"answer_id":33292219,"question_id":33278012,"body_markdown":"You can select only one item on this select list.\r\nI think the problem is, that the item you trying to find isn&#39;t on the list.\r\nThe scroll bar doesn&#39;t mater as long as the select list is open.\r\n\r\nIf you trying just to select an item then this works for the item &quot;Glue UHU Clear Gum 250ml&quot;\r\n\r\n\r\n    public class selectItem {\r\n        @Test\r\n        public void selectItem(){\r\n        WebDriver driver = new FirefoxDriver();\r\n        driver.manage().window().maximize();\r\n        driver.get(&quot;http://www.smartclient.com/smartgwt/showcase/?sc_selenium=true#featured_dropdown_grid_category&quot;);\r\n        \r\n        // Open select list\r\n        driver.findElement(By.id(&quot;isc_1Y&quot;)).click();\r\n        // Select row based on a string present\r\n        driver.findElement(By.xpath(&quot;//div[contains(text(), &#39;Glue UHU Clear Gum 250ml&#39;)]&quot;)).click();\r\n\r\n        driver.quit();\r\n        }\r\n    }","title":"Selenium find element on a dynamic dropdown with scroll (Java)","body":"<p>You can select only one item on this select list.\nI think the problem is, that the item you trying to find isn't on the list.\nThe scroll bar doesn't mater as long as the select list is open.</p>\n\n<p>If you trying just to select an item then this works for the item \"Glue UHU Clear Gum 250ml\"</p>\n\n<pre><code>public class selectItem {\n    @Test\n    public void selectItem(){\n    WebDriver driver = new FirefoxDriver();\n    driver.manage().window().maximize();\n    driver.get(\"http://www.smartclient.com/smartgwt/showcase/?sc_selenium=true#featured_dropdown_grid_category\");\n\n    // Open select list\n    driver.findElement(By.id(\"isc_1Y\")).click();\n    // Select row based on a string present\n    driver.findElement(By.xpath(\"//div[contains(text(), 'Glue UHU Clear Gum 250ml')]\")).click();\n\n    driver.quit();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7062573,"reputation":1145,"user_id":5407189,"display_name":"Jeremiah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445637669,"creation_date":1445637669,"answer_id":33312025,"question_id":33278012,"body_markdown":"Using the solution below I was able to get elements in the dropdown to resolve.  There are obvious dependencies on timing in the implementation to account for StaleElementExceptions when scrolling the content, but I&#39;m hopeful those can be filtered out with a little more effort.\r\n\r\n&gt; If the test doesn&#39;t pass for you right away try increasing the\r\n&gt; &#39;pollingEvery&#39; time to 1/second.  I&#39;m pretty sure that&#39;s going to be\r\n&gt; based on the machine it&#39;s being run on, and that will probably need\r\n&gt; addressing.\r\n\r\n\r\n    /** Desired text to find in the dropdown.*/\r\n        String text = &quot;Envelopes Kraft 305 x 255mm (12 x 10) (84GSM)&quot;;\r\n        //String text = &quot;Pens Stabiliner 808 Ballpoint Fine Black&quot;;\r\n        \r\n        /**\r\n         * Test to try to find a reference inside a scrollable gwt dropdown container.\r\n         * &lt;p/&gt;\r\n         * Behavior is heavily timing dependent and will take progressively longer as the content in the dropdown increases.\r\n         * &lt;p/&gt;\r\n         * I&#39;m sure this can be optimized, but as a proof it does the job.\r\n         */\r\n        @Test\r\n        public void gwtDropdownWithScrollContent() {\r\n            \r\n            WebDriver driver = new FirefoxDriver();\r\n            try {\r\n                driver.get(\r\n                    &quot;http://www.smartclient.com/smartgwt/showcase/?sc_selenium=true#featured_dropdown_grid_category&quot;);\r\n                WebDriverWait wait = new WebDriverWait(driver, 240);\r\n                By dropdownTwiddle = By.xpath(&quot;.//*[@id=&#39;isc_1Y&#39;]&quot;);\r\n                //Find the combo and hit the twiddle button to expand the options.\r\n                WebElement we = wait.until(ExpectedConditions.elementToBeClickable(dropdownTwiddle)); // Find the drop down\r\n                we.click();\r\n    \r\n                /*\r\n                 * Create a function to use with the webdriver wait. Each iteration it will resolve the table object, find\r\n                 * all of the rows, and try to find the desired text in the first &lt;td&gt; field of each row.\r\n                 * \r\n                 * If the element is not found, the scroll bar is resovled and the Actions class is used to get a hold of\r\n                 * the scroll bar and move it down. Then the wait loops and tries again.\r\n                 */\r\n                Function&lt;WebDriver, WebElement&gt; scrollFinder = new Function&lt;WebDriver, WebElement&gt;() {\r\n                    By optionTable = By.xpath(&quot;.//*[@id=&#39;isc_3A&#39;]&quot;);\r\n                    By scrollElement = By.xpath(&quot;.//*[@id=&#39;isc_3N&#39;]/table/tbody/tr/td/img&quot;);\r\n    \r\n                    public WebElement apply(WebDriver arg0) {\r\n                        WebElement table = arg0.findElement(optionTable);\r\n                        List&lt;WebElement&gt; visibleEntries = table.findElements(By.xpath(&quot;.//tr&quot;));\r\n                        WebElement reference = null;\r\n    \r\n                        for (WebElement element : visibleEntries) {\r\n                            if (ExpectedConditions.stalenessOf(element).apply(arg0)) {\r\n                                //This happens if the scroll down happens and we loop back too quickly and grab the contents of the table before it refreshes.\r\n                                //Seems to be tied directly to the poll configuration for the web driver wait.\r\n                                continue;\r\n                            }\r\n                            WebElement firstColumn = element.findElement(By.xpath(&quot;.//td&quot;));\r\n                            String colVal = firstColumn.getText();\r\n                            if (!Strings.isNullOrEmpty(colVal)) {\r\n                                if (text.equalsIgnoreCase(firstColumn.getText())) {\r\n                                    reference = element;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n    \r\n                       \r\n                        if (reference == null) {\r\n                            //If the element wasn&#39;t found then scroll down and retry the effort.\r\n                            WebElement scrollBar = arg0.findElement(scrollElement);\r\n                            Actions actions = new Actions(arg0);\r\n                            //The offset below may be increased to make a larger scroll effort between iterations.\r\n                            actions.moveToElement(scrollBar).clickAndHold().moveByOffset(0, 5).release().build().perform();\r\n                        }\r\n    \r\n                        return reference;\r\n                    }\r\n                };\r\n                //XXX:  THIS is the time to increase if the test doesn&#39;t seem to &quot;work&quot;.\r\n                wait.pollingEvery(500, TimeUnit.MILLISECONDS); // Setting too low can cause StaleElementException inside the\r\n                                                               // loop. When scrolling down the Object can be refreshed and\r\n                                                               // disconnected from the DOM. \r\n    \r\n                Assert.assertNotNull(wait.until(scrollFinder));\r\n            } finally {\r\n                driver.close();\r\n            }\r\n    \r\n        }\r\n\r\n\r\nBest of Luck.","title":"Selenium find element on a dynamic dropdown with scroll (Java)","body":"<p>Using the solution below I was able to get elements in the dropdown to resolve.  There are obvious dependencies on timing in the implementation to account for StaleElementExceptions when scrolling the content, but I'm hopeful those can be filtered out with a little more effort.</p>\n\n<blockquote>\n  <p>If the test doesn't pass for you right away try increasing the\n  'pollingEvery' time to 1/second.  I'm pretty sure that's going to be\n  based on the machine it's being run on, and that will probably need\n  addressing.</p>\n</blockquote>\n\n<pre><code>/** Desired text to find in the dropdown.*/\n    String text = \"Envelopes Kraft 305 x 255mm (12 x 10) (84GSM)\";\n    //String text = \"Pens Stabiliner 808 Ballpoint Fine Black\";\n\n    /**\n     * Test to try to find a reference inside a scrollable gwt dropdown container.\n     * &lt;p/&gt;\n     * Behavior is heavily timing dependent and will take progressively longer as the content in the dropdown increases.\n     * &lt;p/&gt;\n     * I'm sure this can be optimized, but as a proof it does the job.\n     */\n    @Test\n    public void gwtDropdownWithScrollContent() {\n\n        WebDriver driver = new FirefoxDriver();\n        try {\n            driver.get(\n                \"http://www.smartclient.com/smartgwt/showcase/?sc_selenium=true#featured_dropdown_grid_category\");\n            WebDriverWait wait = new WebDriverWait(driver, 240);\n            By dropdownTwiddle = By.xpath(\".//*[@id='isc_1Y']\");\n            //Find the combo and hit the twiddle button to expand the options.\n            WebElement we = wait.until(ExpectedConditions.elementToBeClickable(dropdownTwiddle)); // Find the drop down\n            we.click();\n\n            /*\n             * Create a function to use with the webdriver wait. Each iteration it will resolve the table object, find\n             * all of the rows, and try to find the desired text in the first &lt;td&gt; field of each row.\n             * \n             * If the element is not found, the scroll bar is resovled and the Actions class is used to get a hold of\n             * the scroll bar and move it down. Then the wait loops and tries again.\n             */\n            Function&lt;WebDriver, WebElement&gt; scrollFinder = new Function&lt;WebDriver, WebElement&gt;() {\n                By optionTable = By.xpath(\".//*[@id='isc_3A']\");\n                By scrollElement = By.xpath(\".//*[@id='isc_3N']/table/tbody/tr/td/img\");\n\n                public WebElement apply(WebDriver arg0) {\n                    WebElement table = arg0.findElement(optionTable);\n                    List&lt;WebElement&gt; visibleEntries = table.findElements(By.xpath(\".//tr\"));\n                    WebElement reference = null;\n\n                    for (WebElement element : visibleEntries) {\n                        if (ExpectedConditions.stalenessOf(element).apply(arg0)) {\n                            //This happens if the scroll down happens and we loop back too quickly and grab the contents of the table before it refreshes.\n                            //Seems to be tied directly to the poll configuration for the web driver wait.\n                            continue;\n                        }\n                        WebElement firstColumn = element.findElement(By.xpath(\".//td\"));\n                        String colVal = firstColumn.getText();\n                        if (!Strings.isNullOrEmpty(colVal)) {\n                            if (text.equalsIgnoreCase(firstColumn.getText())) {\n                                reference = element;\n                                break;\n                            }\n                        }\n                    }\n\n\n                    if (reference == null) {\n                        //If the element wasn't found then scroll down and retry the effort.\n                        WebElement scrollBar = arg0.findElement(scrollElement);\n                        Actions actions = new Actions(arg0);\n                        //The offset below may be increased to make a larger scroll effort between iterations.\n                        actions.moveToElement(scrollBar).clickAndHold().moveByOffset(0, 5).release().build().perform();\n                    }\n\n                    return reference;\n                }\n            };\n            //XXX:  THIS is the time to increase if the test doesn't seem to \"work\".\n            wait.pollingEvery(500, TimeUnit.MILLISECONDS); // Setting too low can cause StaleElementException inside the\n                                                           // loop. When scrolling down the Object can be refreshed and\n                                                           // disconnected from the DOM. \n\n            Assert.assertNotNull(wait.until(scrollFinder));\n        } finally {\n            driver.close();\n        }\n\n    }\n</code></pre>\n\n<p>Best of Luck.</p>\n"},{"comments":[{"owner":{"account_id":15718721,"reputation":988,"user_id":11342225,"display_name":"alea"},"score":1,"creation_date":1686661914,"post_id":76462163,"comment_id":134827418,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76462163/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":15694200,"reputation":1,"user_id":11324265,"display_name":"Md. Tarikul Islam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697625414,"creation_date":1686637502,"answer_id":76462163,"question_id":33278012,"body_markdown":"find an element on a dynamic dropdown with scroll (Selenium Java) \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t{driver.get(&quot;https:..............&quot;);\r\n\t\tActions action = new Actions(driver);\r\n\t\t\r\n\t\tWebElement all = driver.findElement(By.cssSelector(&quot;#searchDropdownBox&quot;));\r\n\t\tall.click();\r\n\t\tThread.sleep(2000);\r\n\t\t\r\n\t\taction.moveToElement(all).perform();\r\n\r\n\t\taction.sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\r\n\t\t\t\t.sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\r\n\t\t\t\t.sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\r\n\t\t\t\t.sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\r\n\t\t\t\t.sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\r\n\t\t\t\t.sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ENTER).perform();\r\n\t\tThread.sleep(2000);}\r\n\r\n\r\n","title":"Selenium find element on a dynamic dropdown with scroll (Java)","body":"<p>find an element on a dynamic dropdown with scroll (Selenium Java)</p>\n<pre><code>    {driver.get(&quot;https:..............&quot;);\n    Actions action = new Actions(driver);\n    \n    WebElement all = driver.findElement(By.cssSelector(&quot;#searchDropdownBox&quot;));\n    all.click();\n    Thread.sleep(2000);\n    \n    action.moveToElement(all).perform();\n\n    action.sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\n            .sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\n            .sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\n            .sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\n            .sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN)\n            .sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ENTER).perform();\n    Thread.sleep(2000);}\n</code></pre>\n"}],"owner":{"account_id":3141785,"reputation":11,"user_id":5474952,"display_name":"esamolocik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9006,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":3,"score":-1,"last_activity_date":1697625414,"creation_date":1445507041,"question_id":33278012,"body_markdown":"I&#39;m playing around with selenium and just lately started to take a look at drop-downs and selecting elements.\r\n\r\nFor learning Selenium I&#39;m using following site:\r\nhttp://www.smartclient.com/smartgwt/showcase/?sc_selenium=true#featured_dropdown_grid_category\r\n\r\nThere is a drop-down Grid on which I&#39;m trying to locate an element.\r\nSince the drop-down is dynamic and has a scroll bar then I need to scroll down and locate an element.\r\nCan anyone give me hints how I can locate and select an element on such drop-down?\r\nLet&#39;s say I would like to select:\r\n\r\n    Item: contains &quot;Envelopes&quot;\r\n    Unit: &quot;EA&quot;\r\n    Unit Cost: gather then 0.2\r\n\r\nHere is my code:\r\n\r\n                By itemPicker = ByScLocator.xpath(&quot;/html/body/div[2]/div/div/div/div/div[1]/div[2]/div/div/div[4]/div[1]/div/div/div/div[1]/div/div/div/form/table/tbody[2]/tr[2]/td[2]/table/tbody/tr/td[1]&quot;);\r\n                driver.findElement(itemPicker).click();\r\n                WebDriverWait wait = new WebDriverWait(driver, 30);\r\n        \t\twait.until(ExpectedConditions.elementToBeClickable(itemPicker));\r\n        \t\tdriver.findElement(itemPicker).sendKeys();\r\n    \t\t\r\n        \t\tboolean find = false;  \t\t\t\r\n        \t\t\twhile (!find) {\r\n\r\n            \t\t\tBy menuItems = ByScLocator.xpath(&quot;//tr[contains(@id, \\&quot;isc_PickListMenu_\\&quot;)]&quot;);\r\n            \t\t\tList&lt;WebElement&gt; all = driver.findElements(menuItems);\r\n\r\n            \t\t\ttry {\r\n            \t\t\t\t//Verify if all elements still exists in DOM\r\n            \t\t\t\tfor (WebElement element : all) {\r\n            \t\t\t\t\telement.findElements(By.tagName(&quot;td&quot;));\r\n            \t\t\t\t}\r\n            \t\t\t} catch (StaleElementReferenceException e) {\r\n            \t\t\t\tall = driver.findElements(menuItems);\r\n            \t\t\t}\r\n\r\n            \t\t\tfor (WebElement element : all) {\r\n            \t\t\t\tList&lt;WebElement&gt; columns = element.findElements(By.tagName(&quot;td&quot;));            \t\t\t\t\r\n            \t\t\t\tString currenlyProcessedItem = columns.get(0).getText();\r\n            \t\t\t\tif (currenlyProcessedItem.matches(&quot;.*Envelopes.*&quot;)) {\r\n            \t\t\t\t\tif (columns.get(1).getText().equals(&quot;Ea&quot;)) {\r\n            \t\t\t\t\t\tif (Double.parseDouble(columns.get(2).getText()) &gt; 0.2) {\r\n                 \t\t\t\t\t\t\tfind = true;\r\n            \t\t\t\t\t\t\telement.click();\r\n            \t\t\t\t\t\t\tbreak;\r\n            \t\t\t\t\t\t}\r\n            \t\t\t\t\t}\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n\r\n            \t\t\tif (find) { //load another set of list items\r\n            \t\t\t\t\tdriver.findElement(By.id(&quot;isc_3N&quot;)).sendKeys(Keys.PAGE_DOWN);\r\n            \t\t\t}\r\n      \t\t\t\r\n        \t\t\t\r\n      \t\t}\r\n\r\nThe problem is that I&#39;m unable to scroll down the list and identify item I want to select.\r\nAlso I don&#39;t know if my aproach is optimal.","title":"Selenium find element on a dynamic dropdown with scroll (Java)","body":"<p>I'm playing around with selenium and just lately started to take a look at drop-downs and selecting elements.</p>\n\n<p>For learning Selenium I'm using following site:\n<a href=\"http://www.smartclient.com/smartgwt/showcase/?sc_selenium=true#featured_dropdown_grid_category\" rel=\"nofollow\">http://www.smartclient.com/smartgwt/showcase/?sc_selenium=true#featured_dropdown_grid_category</a></p>\n\n<p>There is a drop-down Grid on which I'm trying to locate an element.\nSince the drop-down is dynamic and has a scroll bar then I need to scroll down and locate an element.\nCan anyone give me hints how I can locate and select an element on such drop-down?\nLet's say I would like to select:</p>\n\n<pre><code>Item: contains \"Envelopes\"\nUnit: \"EA\"\nUnit Cost: gather then 0.2\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>            By itemPicker = ByScLocator.xpath(\"/html/body/div[2]/div/div/div/div/div[1]/div[2]/div/div/div[4]/div[1]/div/div/div/div[1]/div/div/div/form/table/tbody[2]/tr[2]/td[2]/table/tbody/tr/td[1]\");\n            driver.findElement(itemPicker).click();\n            WebDriverWait wait = new WebDriverWait(driver, 30);\n            wait.until(ExpectedConditions.elementToBeClickable(itemPicker));\n            driver.findElement(itemPicker).sendKeys();\n\n            boolean find = false;           \n                while (!find) {\n\n                    By menuItems = ByScLocator.xpath(\"//tr[contains(@id, \\\"isc_PickListMenu_\\\")]\");\n                    List&lt;WebElement&gt; all = driver.findElements(menuItems);\n\n                    try {\n                        //Verify if all elements still exists in DOM\n                        for (WebElement element : all) {\n                            element.findElements(By.tagName(\"td\"));\n                        }\n                    } catch (StaleElementReferenceException e) {\n                        all = driver.findElements(menuItems);\n                    }\n\n                    for (WebElement element : all) {\n                        List&lt;WebElement&gt; columns = element.findElements(By.tagName(\"td\"));                          \n                        String currenlyProcessedItem = columns.get(0).getText();\n                        if (currenlyProcessedItem.matches(\".*Envelopes.*\")) {\n                            if (columns.get(1).getText().equals(\"Ea\")) {\n                                if (Double.parseDouble(columns.get(2).getText()) &gt; 0.2) {\n                                        find = true;\n                                    element.click();\n                                    break;\n                                }\n                            }\n                        }\n                    }\n\n                    if (find) { //load another set of list items\n                            driver.findElement(By.id(\"isc_3N\")).sendKeys(Keys.PAGE_DOWN);\n                    }\n\n\n        }\n</code></pre>\n\n<p>The problem is that I'm unable to scroll down the list and identify item I want to select.\nAlso I don't know if my aproach is optimal.</p>\n"},{"tags":["java","data-structures","linked-list"],"comments":[{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1297456315,"post_id":4973713,"comment_id":5552617,"body_markdown":"Now try reading the question out of context. It doesn&#39;t make any sense :)","body":"Now try reading the question out of context. It doesn&#39;t make any sense :)"},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1297456321,"post_id":4973713,"comment_id":5552623,"body_markdown":"A little context might help...","body":"A little context might help..."}],"answers":[{"comments":[{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":3,"creation_date":1297456541,"post_id":4973737,"comment_id":5552675,"body_markdown":"@Oli Charlesworth undeserved downvote. The term &quot;point&quot; is not used in the C sense. And it sort of answers the vague question (although it might be a useless answer)","body":"@Oli Charlesworth undeserved downvote. The term &quot;point&quot; is not used in the C sense. And it sort of answers the vague question (although it might be a useless answer)"},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":2,"creation_date":1297456642,"post_id":4973737,"comment_id":5552706,"body_markdown":"@Bohzo: I believe this answer has no merit (it&#39;s just a guess based on zero information, and it uses incorrect terminology); hence the downvote.","body":"@Bohzo: I believe this answer has no merit (it&#39;s just a guess based on zero information, and it uses incorrect terminology); hence the downvote."},{"owner":{"account_id":200654,"reputation":129,"user_id":446628,"accept_rate":100,"display_name":"Tbone"},"score":1,"creation_date":1297456799,"post_id":4973737,"comment_id":5552743,"body_markdown":"even if the question has not context this question is asking about a linked list, and yes Java does have &quot;pointers&quot; you just don&#39;t really have control over them.","body":"even if the question has not context this question is asking about a linked list, and yes Java does have &quot;pointers&quot; you just don&#39;t really have control over them."},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":2,"creation_date":1297457076,"post_id":4973737,"comment_id":5552806,"body_markdown":"@Tbone: There&#39;s a much more appropriate term, and that&#39;s &quot;reference&quot;!","body":"@Tbone: There&#39;s a much more appropriate term, and that&#39;s &quot;reference&quot;!"},{"owner":{"account_id":200654,"reputation":129,"user_id":446628,"accept_rate":100,"display_name":"Tbone"},"score":0,"creation_date":1297457422,"post_id":4973737,"comment_id":5552889,"body_markdown":"Sorry, you are right, my first language is C++ so when I see a reference I think of a pointer :)","body":"Sorry, you are right, my first language is C++ so when I see a reference I think of a pointer :)"},{"owner":{"account_id":6885209,"reputation":611,"user_id":5290534,"accept_rate":100,"display_name":"JW.ZG"},"score":0,"creation_date":1468344600,"post_id":4973737,"comment_id":64085065,"body_markdown":"But in C++, we always use `* newNode` to declare a new node, so how can this be a reference? `*` in C++ is a **Pointer**...","body":"But in C++, we always use <code>* newNode</code> to declare a new node, so how can this be a reference? <code>*</code> in C++ is a <b>Pointer</b>..."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1468360419,"post_id":4973737,"comment_id":64093396,"body_markdown":"*&quot;so how can this be a reference?&quot;* -- Because we&#39;re not discussing C++ here. We&#39;re discussing Java, and in Java a reference is not what you are used to.","body":"<i>&quot;so how can this be a reference?&quot;</i> -- Because we&#39;re not discussing C++ here. We&#39;re discussing Java, and in Java a reference is not what you are used to."}],"tags":[],"owner":{"account_id":200654,"reputation":129,"user_id":446628,"accept_rate":100,"display_name":"Tbone"},"comment_count":7,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1297456353,"creation_date":1297456353,"answer_id":4973737,"question_id":4973713,"body_markdown":"yes it is just a pointer to the first node","title":"What is the &#39;head&#39; of a linked list?","body":"<p>yes it is just a pointer to the first node</p>\n"},{"comments":[{"owner":{"account_id":56883,"reputation":66574,"user_id":170365,"accept_rate":77,"display_name":"Strawberry"},"score":0,"creation_date":1297456943,"post_id":4973748,"comment_id":5552777,"body_markdown":"So, head.next would give 12, and head.next.next would give 34, correct? So what is head (you said null right?)? The tail always points to the node that points to the &quot;null&quot; correct?","body":"So, head.next would give 12, and head.next.next would give 34, correct? So what is head (you said null right?)? The tail always points to the node that points to the &quot;null&quot; correct?"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":3,"creation_date":1297457083,"post_id":4973748,"comment_id":5552810,"body_markdown":"No, `head` would refer to the `12`-node. `head.next` would be `34` (you&#39;ve followed *one* `next` reference!). Keep in mind that `head` is not an object, it&#39;s a reference.","body":"No, <code>head</code> would refer to the <code>12</code>-node. <code>head.next</code> would be <code>34</code> (you&#39;ve followed <i>one</i> <code>next</code> reference!). Keep in mind that <code>head</code> is not an object, it&#39;s a reference."},{"owner":{"account_id":56883,"reputation":66574,"user_id":170365,"accept_rate":77,"display_name":"Strawberry"},"score":0,"creation_date":1297457348,"post_id":4973748,"comment_id":5552872,"body_markdown":"What about my question about the tail? Also, I am a little confused, I&#39;ll update my question.","body":"What about my question about the tail? Also, I am a little confused, I&#39;ll update my question."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1297457616,"post_id":4973748,"comment_id":5552931,"body_markdown":"(Please don&#39;t use this as a discussion-thread. If you have more questions, click the ask-question link.)","body":"(Please don&#39;t use this as a discussion-thread. If you have more questions, click the ask-question link.)"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1297458053,"post_id":4973748,"comment_id":5553015,"body_markdown":"Answer updated. Now please create a new question if you have any follow-up questions.","body":"Answer updated. Now please create a new question if you have any follow-up questions."},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":1,"creation_date":1297461932,"post_id":4973748,"comment_id":5553770,"body_markdown":"Actually most implementations of lists use a dummy node for the head/tail nodes because it makes the code a bit simpler (you don&#39;t need to check for null everywhere). The java implementation does this as well.","body":"Actually most implementations of lists use a dummy node for the head/tail nodes because it makes the code a bit simpler (you don&#39;t need to check for null everywhere). The java implementation does this as well."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1297492219,"post_id":4973748,"comment_id":5556707,"body_markdown":"@Voo, ah, interesting point. I see that too now. That explains a lot.","body":"@Voo, ah, interesting point. I see that too now. That explains a lot."},{"owner":{"account_id":6885209,"reputation":611,"user_id":5290534,"accept_rate":100,"display_name":"JW.ZG"},"score":0,"creation_date":1468344779,"post_id":4973748,"comment_id":64085172,"body_markdown":"In C++, we always use `* head` to declare the head, and in C++ `*` means pointer (`&amp;` means reference). what&#39;s more, **reference** can&#39;t be changed, but pointer can be (as *head* can be changed to point another node). So I am confused. Can you explain why you said **head** is a **reference**?","body":"In C++, we always use <code>* head</code> to declare the head, and in C++ <code>*</code> means pointer (<code>&amp;</code> means reference). what&#39;s more, <b>reference</b> can&#39;t be changed, but pointer can be (as <i>head</i> can be changed to point another node). So I am confused. Can you explain why you said <b>head</b> is a <b>reference</b>?"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1468345974,"post_id":4973748,"comment_id":64085796,"body_markdown":"Because a reference in Java is more similar to a pointer in C++.","body":"Because a reference in Java is more similar to a pointer in C++."}],"tags":[],"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"comment_count":9,"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1413269398,"creation_date":1297456426,"answer_id":4973748,"question_id":4973713,"body_markdown":"The head of the list refers to the first node of the list. It would make a good name for the variable storing the reference of that node, and I would expect it to contain the null-reference if the list was empty\r\n\r\n    someLinkedList.head\r\n             |\r\n             |\r\n             v\r\n            ______        ______        ______            \r\n           |    |n|      |    |n|      |    |n|           \r\n           |    |e|      |    |e|      |    |e|           \r\n           | 12 |x| --&gt;  | 34 |x| --&gt;  | 56 |x| --&gt; null\r\n           |    |t|      |    |t|      |    |t|           \r\n           |____|_|      |____|_|      |____|_|           \r\n\r\n\r\nDepending on context, the tail can refer to different things. The terminology I&#39;m used to says that the tail corresponds to `34 -&gt; 56 -&gt; null` in this example, that is, the list that follows the head.\r\n\r\nIn other contexts, it may be a reference to the last node. In such interpretation, the tail would refer to the `56` node in your example.\r\n\r\n----------\r\n\r\n\r\nRegarding your first edit, which happens to be a *completely different question*:\r\n\r\nA pointer is a value corresponding to a memory address. A reference is value referring to some object (or null). You can&#39;t do pointer arithmetic on Java references, but otherwise I&#39;d say they are fairly similar.\r\n\r\nWhat may confuse you, is that variables in Java can *never contain objects*. Objects always live on the heap, and variables contain primitive data types, or references to objects on the heap.\r\n\r\n\r\n----------\r\n\r\n\r\nRegarding your second edit:\r\n\r\nIn the example you provided, it looks like the add method skips the first element, and in a sense it does. This is because the implementation has a &quot;dummy&quot;-element as the head. Look at the initialization of the head-variable in the constructor:\r\n\r\n    head = new Node(null);\r\n\r\nI can&#39;t understand why they&#39;ve decided to do that. To me it looks plain stupid.","title":"What is the &#39;head&#39; of a linked list?","body":"<p>The head of the list refers to the first node of the list. It would make a good name for the variable storing the reference of that node, and I would expect it to contain the null-reference if the list was empty</p>\n\n<pre><code>someLinkedList.head\n         |\n         |\n         v\n        ______        ______        ______            \n       |    |n|      |    |n|      |    |n|           \n       |    |e|      |    |e|      |    |e|           \n       | 12 |x| --&gt;  | 34 |x| --&gt;  | 56 |x| --&gt; null\n       |    |t|      |    |t|      |    |t|           \n       |____|_|      |____|_|      |____|_|           \n</code></pre>\n\n<p>Depending on context, the tail can refer to different things. The terminology I'm used to says that the tail corresponds to <code>34 -&gt; 56 -&gt; null</code> in this example, that is, the list that follows the head.</p>\n\n<p>In other contexts, it may be a reference to the last node. In such interpretation, the tail would refer to the <code>56</code> node in your example.</p>\n\n<hr>\n\n<p>Regarding your first edit, which happens to be a <em>completely different question</em>:</p>\n\n<p>A pointer is a value corresponding to a memory address. A reference is value referring to some object (or null). You can't do pointer arithmetic on Java references, but otherwise I'd say they are fairly similar.</p>\n\n<p>What may confuse you, is that variables in Java can <em>never contain objects</em>. Objects always live on the heap, and variables contain primitive data types, or references to objects on the heap.</p>\n\n<hr>\n\n<p>Regarding your second edit:</p>\n\n<p>In the example you provided, it looks like the add method skips the first element, and in a sense it does. This is because the implementation has a \"dummy\"-element as the head. Look at the initialization of the head-variable in the constructor:</p>\n\n<pre><code>head = new Node(null);\n</code></pre>\n\n<p>I can't understand why they've decided to do that. To me it looks plain stupid.</p>\n"},{"tags":[],"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1653291194,"creation_date":1297458336,"answer_id":4974050,"question_id":4973713,"body_markdown":"The term &amp;ldquo;head&amp;rdquo; has two completely unrelated meanings. The most common (that comes out of Lisp, I believe) is &amp;ldquo; the first element of the list.&amp;rdquo; Judging from your diagram, that is not the meaning you have in mind.\r\n\r\nThe second meaning refers to a technique to deal with the following issue: If you represent a linked list as just the nodes with data, then when the list is empty, all references (and/or pointers, depending on the language) to the list have to be null, because there is nothing to point at. This creates lots of bookkeeping problems for code that uses the list. A _list head_ solves this problem. It is a list node that contains no actual data. A reference or pointer to the list is always a pointer to the head node. The first element of the list is always `head.next`. Usually, the existence of the head is hidden in the class that implements a &amp;ldquo; linked list with a head.&amp;rdquo;\r\n\r\nDepending on the operations being supported, there can be a similar bookkeeping problem at the end of the list, particularly for doubly linked lists. A _list tail_ node simplifies bookkeeping.\r\n\r\nThese are also called &amp;ldquo; sentinel nodes&amp;rdquo; in the literature (including the [Wikipedia article on linked lists][1]).\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Linked_list","title":"What is the &#39;head&#39; of a linked list?","body":"<p>The term “head” has two completely unrelated meanings. The most common (that comes out of Lisp, I believe) is “ the first element of the list.” Judging from your diagram, that is not the meaning you have in mind.</p>\n<p>The second meaning refers to a technique to deal with the following issue: If you represent a linked list as just the nodes with data, then when the list is empty, all references (and/or pointers, depending on the language) to the list have to be null, because there is nothing to point at. This creates lots of bookkeeping problems for code that uses the list. A <em>list head</em> solves this problem. It is a list node that contains no actual data. A reference or pointer to the list is always a pointer to the head node. The first element of the list is always <code>head.next</code>. Usually, the existence of the head is hidden in the class that implements a “ linked list with a head.”</p>\n<p>Depending on the operations being supported, there can be a similar bookkeeping problem at the end of the list, particularly for doubly linked lists. A <em>list tail</em> node simplifies bookkeeping.</p>\n<p>These are also called “ sentinel nodes” in the literature (including the <a href=\"http://en.wikipedia.org/wiki/Linked_list\" rel=\"nofollow noreferrer\">Wikipedia article on linked lists</a>).</p>\n"},{"comments":[{"owner":{"account_id":6885209,"reputation":611,"user_id":5290534,"accept_rate":100,"display_name":"JW.ZG"},"score":0,"creation_date":1468343194,"post_id":37241999,"comment_id":64084355,"body_markdown":"If the first element, say `list1`, if `list1.next != null`, and you set it to be **NULL**. Will you break the first element&#39;s link to the next element? I mean will the first element be a single element alone without pointing to other element?","body":"If the first element, say <code>list1</code>, if <code>list1.next != null</code>, and you set it to be <b>NULL</b>. Will you break the first element&#39;s link to the next element? I mean will the first element be a single element alone without pointing to other element?"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1468360470,"post_id":37241999,"comment_id":64093415,"body_markdown":"Yes, that&#39;s right. If you set `list1.next` to `null`, then the `list1` node will effectively be the last node in the list.","body":"Yes, that&#39;s right. If you set <code>list1.next</code> to <code>null</code>, then the <code>list1</code> node will effectively be the last node in the list."},{"owner":{"account_id":6021438,"reputation":585,"user_id":4728372,"accept_rate":50,"display_name":"Varun Garg"},"score":1,"creation_date":1468370875,"post_id":37241999,"comment_id":64096203,"body_markdown":"Yes Indeed..here in that case\nlist1 == head pointer..\nSo if I make list1.next=NULL only one node will be left in the list.Moreover   to make whole list empty you have to make list1=NULL.","body":"Yes Indeed..here in that case list1 == head pointer.. So if I make list1.next=NULL only one node will be left in the list.Moreover   to make whole list empty you have to make list1=NULL."}],"tags":[],"owner":{"account_id":6021438,"reputation":585,"user_id":4728372,"accept_rate":50,"display_name":"Varun Garg"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1463336302,"creation_date":1463336302,"answer_id":37241999,"question_id":4973713,"body_markdown":"Before Anything else It should be noted that head is not a separate node, but just a reference to the first node. It keeps the whole list by storing a pointer to the first node.\r\n\r\n*Another noted difference is that head is an ordinary local pointer variable which is stored in stack, whereas list nodes gets stored in heap.*\r\n**So In most jargon terms Head is just a local pointer which keeps reference to the first element of a linked list and is mostly initialised with NULL in order to distinguish an empty linked list.**\r\n\r\n","title":"What is the &#39;head&#39; of a linked list?","body":"<p>Before Anything else It should be noted that head is not a separate node, but just a reference to the first node. It keeps the whole list by storing a pointer to the first node.</p>\n\n<p><em>Another noted difference is that head is an ordinary local pointer variable which is stored in stack, whereas list nodes gets stored in heap.</em>\n<strong>So In most jargon terms Head is just a local pointer which keeps reference to the first element of a linked list and is mostly initialised with NULL in order to distinguish an empty linked list.</strong></p>\n"},{"tags":[],"owner":{"account_id":20770313,"reputation":592,"user_id":15342125,"display_name":"Paul Bradbury"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697625201,"creation_date":1697623346,"answer_id":77315317,"question_id":4973713,"body_markdown":"What I understood is simple difference. With `head` pointer `list` creation is managed by the `LinkedList` class itself, however without `head` pointer - the client code requires to keep track of first, and then adding the rest of the `nodes`\r\n\r\nHowever, both with or without `head` pointer - creates functional `LinkedList`\r\n\r\nModern go-to style linkedlist without `Head` pointer(From Leetcode)\r\n````java\r\npublic class ListNode {\r\n    int val;\r\n    ListNode next;\r\n    ListNode() {}\r\n    ListNode(int val) { this.val = val; }\r\n    ListNode(int val, ListNode next) { this.val = val; this.next = next; }\r\n  }\r\n````\r\n\r\nTo create `LinkedList`\r\n````java\r\nListNode listNode = new ListNode(4, new ListNode());\r\nlistNode.next = new ListNode(1, new ListNode());\r\nlistNode.next.next = new ListNode(10);\r\n````\r\n\r\nNow with `head` pointer:\r\n\r\n````java\r\npublic class SingleList {\r\n    Node head;\r\n\r\n    static class Node{\r\n        int data;\r\n        Node next;\r\n        Node(int d){data = d;}\r\n    }\r\n\r\n    public void insertNode(int n){\r\n        Node new_node = new Node(n);\r\n        if(head == null){\r\n            head = new_node;\r\n        } else{\r\n            Node cur_node = head;\r\n            while(cur_node.next !=null){\r\n                cur_node = cur_node.next;\r\n            }\r\n            cur_node.next = new_node;\r\n        }\r\n    }\r\n}\r\n````\r\n\r\nTo create `Linkedlist`\r\n````java\r\nSingleList singleList1 = new SingleList(6);\r\nsingleList1.insertNode(3);\r\n````\r\n\r\nSee - linkedlist creation in client program - for above different `Linkedlist` implementation. ","title":"What is the &#39;head&#39; of a linked list?","body":"<p>What I understood is simple difference. With <code>head</code> pointer <code>list</code> creation is managed by the <code>LinkedList</code> class itself, however without <code>head</code> pointer - the client code requires to keep track of first, and then adding the rest of the <code>nodes</code></p>\n<p>However, both with or without <code>head</code> pointer - creates functional <code>LinkedList</code></p>\n<p>Modern go-to style linkedlist without <code>Head</code> pointer(From Leetcode)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ListNode {\n    int val;\n    ListNode next;\n    ListNode() {}\n    ListNode(int val) { this.val = val; }\n    ListNode(int val, ListNode next) { this.val = val; this.next = next; }\n  }\n</code></pre>\n<p>To create <code>LinkedList</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>ListNode listNode = new ListNode(4, new ListNode());\nlistNode.next = new ListNode(1, new ListNode());\nlistNode.next.next = new ListNode(10);\n</code></pre>\n<p>Now with <code>head</code> pointer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SingleList {\n    Node head;\n\n    static class Node{\n        int data;\n        Node next;\n        Node(int d){data = d;}\n    }\n\n    public void insertNode(int n){\n        Node new_node = new Node(n);\n        if(head == null){\n            head = new_node;\n        } else{\n            Node cur_node = head;\n            while(cur_node.next !=null){\n                cur_node = cur_node.next;\n            }\n            cur_node.next = new_node;\n        }\n    }\n}\n</code></pre>\n<p>To create <code>Linkedlist</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>SingleList singleList1 = new SingleList(6);\nsingleList1.insertNode(3);\n</code></pre>\n<p>See - linkedlist creation in client program - for above different <code>Linkedlist</code> implementation.</p>\n"}],"owner":{"account_id":56883,"reputation":66574,"user_id":170365,"accept_rate":77,"display_name":"Strawberry"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78256,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":4973748,"answer_count":5,"score":22,"last_activity_date":1697625201,"creation_date":1297456225,"question_id":4973713,"body_markdown":"I&#39;m working in linked lists in Java, so I&#39;m trying to grasp the concept of a single linked list.\r\n\r\n`head -&gt; 12 -&gt; 34 -&gt; 56 -&gt; null`\r\n\r\n`head.next` would be 12 (also the same as node1). However, what is head then?\r\n\r\n**Update:** What is the difference between a reference and a pointer?\r\n\r\n**Update2:** So if `head` is `12` and `head.next` is `34`, then doesn&#39;t mean this following function skips the first node to see if it&#39;s null?\r\n\r\n    public void add(Object data, int index)\r\n    \t// post: inserts the specified element at the specified position in this list.\r\n    \t{\r\n    \t\tNode temp = new Node(data);\r\n    \t\tNode current = head;\r\n    \t\t// crawl to the requested index or the last element in the list,\r\n    \t\t// whichever comes first\r\n    \t\tfor(int i = 1; i &lt; index &amp;&amp; current.getNext() != null; i++)\r\n    \t\t{\r\n    \t\t\tcurrent = current.getNext();\r\n    \t\t}\r\n    \t\t// set the new node&#39;s next-node reference to this node&#39;s next-node reference\r\n    \t\ttemp.setNext(current.getNext());\r\n    \t\t// now set this node&#39;s next-node reference to the new node\r\n    \t\tcurrent.setNext(temp);\r\n    \t\tlistCount++;// increment the number of elements variable\r\n    \t}\r\n    \t\r\nSource: http://www.mycstutorials.com/articles/data_structures/linkedlists","title":"What is the &#39;head&#39; of a linked list?","body":"<p>I'm working in linked lists in Java, so I'm trying to grasp the concept of a single linked list.</p>\n\n<p><code>head -&gt; 12 -&gt; 34 -&gt; 56 -&gt; null</code></p>\n\n<p><code>head.next</code> would be 12 (also the same as node1). However, what is head then?</p>\n\n<p><strong>Update:</strong> What is the difference between a reference and a pointer?</p>\n\n<p><strong>Update2:</strong> So if <code>head</code> is <code>12</code> and <code>head.next</code> is <code>34</code>, then doesn't mean this following function skips the first node to see if it's null?</p>\n\n<pre><code>public void add(Object data, int index)\n    // post: inserts the specified element at the specified position in this list.\n    {\n        Node temp = new Node(data);\n        Node current = head;\n        // crawl to the requested index or the last element in the list,\n        // whichever comes first\n        for(int i = 1; i &lt; index &amp;&amp; current.getNext() != null; i++)\n        {\n            current = current.getNext();\n        }\n        // set the new node's next-node reference to this node's next-node reference\n        temp.setNext(current.getNext());\n        // now set this node's next-node reference to the new node\n        current.setNext(temp);\n        listCount++;// increment the number of elements variable\n    }\n</code></pre>\n\n<p>Source: <a href=\"http://www.mycstutorials.com/articles/data_structures/linkedlists\" rel=\"noreferrer\">http://www.mycstutorials.com/articles/data_structures/linkedlists</a></p>\n"},{"tags":["java","apache-kafka","kafka-topic"],"comments":[{"owner":{"account_id":12285714,"reputation":983,"user_id":8965245,"display_name":"Nawnit Sen"},"score":0,"creation_date":1551466472,"post_id":54946384,"comment_id":96664115,"body_markdown":"As it is a broker level config you need to put into server.properties to make it work","body":"As it is a broker level config you need to put into server.properties to make it work"}],"answers":[{"tags":[],"owner":{"account_id":466002,"reputation":20226,"user_id":870483,"accept_rate":81,"display_name":"Nishu Tayal"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1551450858,"creation_date":1551450858,"answer_id":54946730,"question_id":54946384,"body_markdown":"It is Broker level config.  You can&#39;t let user manage this from the java client programs. \r\n\r\nAs `auto.create.topics.enable` property is read-only broker configuration, which requires the kafka services to be restarted. Hence it is not possible to handle it from client side.\r\n\r\nYou can read the configurations here with the dynamic update mode : https://kafka.apache.org/documentation/#brokerconfigs \r\n","title":"Kafka: disable create topic from Java","body":"<p>It is Broker level config.  You can't let user manage this from the java client programs. </p>\n\n<p>As <code>auto.create.topics.enable</code> property is read-only broker configuration, which requires the kafka services to be restarted. Hence it is not possible to handle it from client side.</p>\n\n<p>You can read the configurations here with the dynamic update mode : <a href=\"https://kafka.apache.org/documentation/#brokerconfigs\" rel=\"noreferrer\">https://kafka.apache.org/documentation/#brokerconfigs</a> </p>\n"},{"tags":[],"owner":{"account_id":5996,"reputation":1508,"user_id":9910,"accept_rate":43,"display_name":"KC Baltz"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1593641237,"creation_date":1593641237,"answer_id":62686033,"question_id":54946384,"body_markdown":"Spring has the `spring.cloud.stream.kafka.binder.autoCreateTopics` property that defaults to `true` and works independently of the Broker property `auto.create.topics.enable`.  I&#39;m guessing it&#39;s only effective if your Broker config allows clients to create topics.  It&#39;s probably safer to block that permission than to rely on clients to behave.  \r\n\r\nhttps://cloud.spring.io/spring-cloud-stream-binder-kafka/spring-cloud-stream-binder-kafka.html","title":"Kafka: disable create topic from Java","body":"<p>Spring has the <code>spring.cloud.stream.kafka.binder.autoCreateTopics</code> property that defaults to <code>true</code> and works independently of the Broker property <code>auto.create.topics.enable</code>.  I'm guessing it's only effective if your Broker config allows clients to create topics.  It's probably safer to block that permission than to rely on clients to behave.</p>\n<p><a href=\"https://cloud.spring.io/spring-cloud-stream-binder-kafka/spring-cloud-stream-binder-kafka.html\" rel=\"nofollow noreferrer\">https://cloud.spring.io/spring-cloud-stream-binder-kafka/spring-cloud-stream-binder-kafka.html</a></p>\n"},{"tags":[],"owner":{"account_id":14893748,"reputation":21,"user_id":10754680,"display_name":"Aleksey Malnev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697624570,"creation_date":1697624570,"answer_id":77315465,"question_id":54946384,"body_markdown":"Starting with version 2.3.0 Kafka has `allow.auto.create.topics` config option available for consumers along with `auto.create.topics.enable` config option for brokers. Interactions of these options is described in details in the corresponding KIP: \r\n\r\nhttps://cwiki.apache.org/confluence/display/KAFKA/KIP-361%3A+Add+Consumer+Configuration+to+Disable+Auto+Topic+Creation\r\n\r\nTLDR: if you have `auto.create.topics.enable` set to `true` for your brokers and you can&#39;t or don&#39;t want to change that, you can set `allow.auto.create.topics` to `false` for your consumers and this will prevent Kafka from automatically creating new topics with default settings when you try to subscribe to the non-existent topic for the first time.","title":"Kafka: disable create topic from Java","body":"<p>Starting with version 2.3.0 Kafka has <code>allow.auto.create.topics</code> config option available for consumers along with <code>auto.create.topics.enable</code> config option for brokers. Interactions of these options is described in details in the corresponding KIP:</p>\n<p><a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-361%3A+Add+Consumer+Configuration+to+Disable+Auto+Topic+Creation\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/display/KAFKA/KIP-361%3A+Add+Consumer+Configuration+to+Disable+Auto+Topic+Creation</a></p>\n<p>TLDR: if you have <code>auto.create.topics.enable</code> set to <code>true</code> for your brokers and you can't or don't want to change that, you can set <code>allow.auto.create.topics</code> to <code>false</code> for your consumers and this will prevent Kafka from automatically creating new topics with default settings when you try to subscribe to the non-existent topic for the first time.</p>\n"}],"owner":{"account_id":2198326,"reputation":2976,"user_id":1943432,"accept_rate":9,"display_name":"Rolintocour"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14102,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1697624570,"creation_date":1551449592,"question_id":54946384,"body_markdown":"Using Kafka with the Java lib, I want to disable the automatic creation of topic (if it doesn&#39;t already exist).\r\n\r\nSome sites says I should put auto.create.topics.enable to false, but this is not recognized in Java.\r\n\r\n    15:11:56.962 [main] WARN  o.a.k.c.consumer.ConsumerConfig -  The configuration &#39;auto.create.topics.enable&#39; was supplied but isn&#39;t a known config.\r\n\r\nCurrently I put it in my docker-compose as environment variable:\r\n\r\n    KAFKA_AUTO_CREATE_TOPICS_ENABLE: &#39;false&#39;\r\n\r\nThis works, but I&#39;d like to manag it from Java by user.\r\n\r\nIs this possible?","title":"Kafka: disable create topic from Java","body":"<p>Using Kafka with the Java lib, I want to disable the automatic creation of topic (if it doesn't already exist).</p>\n\n<p>Some sites says I should put auto.create.topics.enable to false, but this is not recognized in Java.</p>\n\n<pre><code>15:11:56.962 [main] WARN  o.a.k.c.consumer.ConsumerConfig -  The configuration 'auto.create.topics.enable' was supplied but isn't a known config.\n</code></pre>\n\n<p>Currently I put it in my docker-compose as environment variable:</p>\n\n<pre><code>KAFKA_AUTO_CREATE_TOPICS_ENABLE: 'false'\n</code></pre>\n\n<p>This works, but I'd like to manag it from Java by user.</p>\n\n<p>Is this possible?</p>\n"},{"tags":["java","android","github"],"owner":{"account_id":27744385,"reputation":1,"user_id":22761721,"display_name":"Андрей Сеченов"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697624474,"creation_date":1697624474,"question_id":77315450,"body_markdown":"No matter how many times I try, I have only green candles on the chart and no shadows, the data comes right as it seems to me. Can you please explain where I made a mistake?\r\n\r\n```\r\nManager:\r\npublic static void getCandlestickData(String symbol, String interval, final CandlestickDataCallback callback) {\r\n        OkHttpClient client = new OkHttpClient();\r\n        String url = BASE_URL + &quot;/v1/klines&quot; + &quot;?symbol=&quot; + symbol + &quot;&amp;interval=&quot; + interval;\r\n\r\n        Request request = new Request.Builder()\r\n                .url(url)\r\n                .build();\r\n\r\n        client.newCall(request).enqueue(new Callback() {\r\n            @Override\r\n            public void onResponse(Call call, Response response) throws IOException {\r\n                if (response.isSuccessful()) {\r\n                    try {\r\n                        JSONArray jsonArray = new JSONArray(response.body().string());\r\n                        List&lt;CandleEntry&gt; candleEntries = parseCandlestickData(jsonArray);\r\n                        callback.onDataReceived(candleEntries);\r\n                    } catch (JSONException e) {\r\n                        callback.onError(&quot;Error parsing JSON&quot;);\r\n                    }\r\n                } else {\r\n                    callback.onError(&quot;Request failed with code: &quot; + response.code());\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call call, IOException e) {\r\n                callback.onError(&quot;Request failed: &quot; + e.getMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n    private static List&lt;CandleEntry&gt; parseCandlestickData(JSONArray jsonArray) throws JSONException {\r\n        List&lt;CandleEntry&gt; entries = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; jsonArray.length(); i++) {\r\n            JSONArray candleData = jsonArray.getJSONArray(i);\r\n            long timestamp = candleData.getLong(0);\r\n            float high = (float) candleData.getDouble(2);\r\n            float low = (float) candleData.getDouble(3);\r\n            float open = (float) candleData.getDouble(1);\r\n            float close = (float) candleData.getDouble(4);\r\n            Log.d(&quot;Candle Data&quot;, &quot;Timestamp: &quot; + timestamp + &quot;, Open: &quot; + open + &quot;, High: &quot; + high + &quot;, Low: &quot; + low + &quot;, Close: &quot; + close);\r\n\r\n            if (open &lt;= close) {\r\n                entries.add(new CandleEntry(timestamp, high, low, open, close));\r\n            } else {\r\n                entries.add(new CandleEntry(timestamp, high, low, close, open));\r\n            }\r\n        }\r\n        return entries;\r\n    }\r\n\r\n    public interface CandlestickDataCallback {\r\n        void onDataReceived(List&lt;CandleEntry&gt; candleEntries);\r\n        void onError(String message);\r\n    }\r\n```\r\n\r\nFragment:\r\n\r\n```\r\nprivate void setupChart(List&lt;CandleEntry&gt; entries) {\r\n        CandleDataSet dataSet = new CandleDataSet(entries, tradingPair);\r\n        dataSet.setDrawValues(false);\r\n\r\n        dataSet.setDecreasingColor(getResources().getColor(R.color.red));\r\n        dataSet.setIncreasingColor(getResources().getColor(R.color.green));\r\n        dataSet.setShadowColor(getResources().getColor(R.color.gray));\r\n\r\n        candleStickChart.setData(new CandleData(dataSet));\r\n        XAxis xAxis = candleStickChart.getXAxis();\r\n        xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);\r\n        xAxis.setGranularity(1f);\r\n\r\n        candleStickChart.invalidate();\r\n    }\r\n```\r\n\r\n\r\n\r\nУвидеть подобный график у себя:\r\nhttps://camo.githubusercontent.com/4540d4bcd7f79a6daedba3e2212b73c45aa83249c877ad5bb30283c65f95ad4c/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d50416e64726f696443686172742f6d61737465722f73637265656e73686f74732f63616e646c65737469636b63686172742e706e67","title":"How do I properly display a Chinese candlestick chart using MPAndroidChart","body":"<p>No matter how many times I try, I have only green candles on the chart and no shadows, the data comes right as it seems to me. Can you please explain where I made a mistake?</p>\n<pre><code>Manager:\npublic static void getCandlestickData(String symbol, String interval, final CandlestickDataCallback callback) {\n        OkHttpClient client = new OkHttpClient();\n        String url = BASE_URL + &quot;/v1/klines&quot; + &quot;?symbol=&quot; + symbol + &quot;&amp;interval=&quot; + interval;\n\n        Request request = new Request.Builder()\n                .url(url)\n                .build();\n\n        client.newCall(request).enqueue(new Callback() {\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n                if (response.isSuccessful()) {\n                    try {\n                        JSONArray jsonArray = new JSONArray(response.body().string());\n                        List&lt;CandleEntry&gt; candleEntries = parseCandlestickData(jsonArray);\n                        callback.onDataReceived(candleEntries);\n                    } catch (JSONException e) {\n                        callback.onError(&quot;Error parsing JSON&quot;);\n                    }\n                } else {\n                    callback.onError(&quot;Request failed with code: &quot; + response.code());\n                }\n            }\n\n            @Override\n            public void onFailure(Call call, IOException e) {\n                callback.onError(&quot;Request failed: &quot; + e.getMessage());\n            }\n        });\n    }\n\n    private static List&lt;CandleEntry&gt; parseCandlestickData(JSONArray jsonArray) throws JSONException {\n        List&lt;CandleEntry&gt; entries = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; jsonArray.length(); i++) {\n            JSONArray candleData = jsonArray.getJSONArray(i);\n            long timestamp = candleData.getLong(0);\n            float high = (float) candleData.getDouble(2);\n            float low = (float) candleData.getDouble(3);\n            float open = (float) candleData.getDouble(1);\n            float close = (float) candleData.getDouble(4);\n            Log.d(&quot;Candle Data&quot;, &quot;Timestamp: &quot; + timestamp + &quot;, Open: &quot; + open + &quot;, High: &quot; + high + &quot;, Low: &quot; + low + &quot;, Close: &quot; + close);\n\n            if (open &lt;= close) {\n                entries.add(new CandleEntry(timestamp, high, low, open, close));\n            } else {\n                entries.add(new CandleEntry(timestamp, high, low, close, open));\n            }\n        }\n        return entries;\n    }\n\n    public interface CandlestickDataCallback {\n        void onDataReceived(List&lt;CandleEntry&gt; candleEntries);\n        void onError(String message);\n    }\n</code></pre>\n<p>Fragment:</p>\n<pre><code>private void setupChart(List&lt;CandleEntry&gt; entries) {\n        CandleDataSet dataSet = new CandleDataSet(entries, tradingPair);\n        dataSet.setDrawValues(false);\n\n        dataSet.setDecreasingColor(getResources().getColor(R.color.red));\n        dataSet.setIncreasingColor(getResources().getColor(R.color.green));\n        dataSet.setShadowColor(getResources().getColor(R.color.gray));\n\n        candleStickChart.setData(new CandleData(dataSet));\n        XAxis xAxis = candleStickChart.getXAxis();\n        xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);\n        xAxis.setGranularity(1f);\n\n        candleStickChart.invalidate();\n    }\n</code></pre>\n<p>Увидеть подобный график у себя:\n<a href=\"https://camo.githubusercontent.com/4540d4bcd7f79a6daedba3e2212b73c45aa83249c877ad5bb30283c65f95ad4c/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d50416e64726f696443686172742f6d61737465722f73637265656e73686f74732f63616e646c65737469636b63686172742e706e67\" rel=\"nofollow noreferrer\">https://camo.githubusercontent.com/4540d4bcd7f79a6daedba3e2212b73c45aa83249c877ad5bb30283c65f95ad4c/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d50416e64726f696443686172742f6d61737465722f73637265656e73686f74732f63616e646c65737469636b63686172742e706e67</a></p>\n"},{"tags":["java","json","amazon-s3","logging","fluent-bit"],"owner":{"account_id":15473794,"reputation":3,"user_id":11162997,"display_name":"김민식"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697624311,"creation_date":1697624099,"question_id":77315411,"body_markdown":"First of all, this is my log data.\r\n\r\n{\r\n  &quot;hostname&quot; : &quot;test&quot;,\r\n  &quot;serverTimestamp&quot; : &quot;2023-10-18T18:37:42.048&quot;,\r\n  &quot;serverIp&quot; : &quot;-&quot;,\r\n  &quot;jobCode&quot; : &quot;-&quot;,\r\n  &quot;jobName&quot; : &quot;-&quot;\r\n}\r\n\r\nLog data loaded into S3.\r\n\r\n{&quot;date&quot;:&quot;2023-10-18T10:02:38.614367Z&quot;,&quot;appname&quot;:&quot;30327b422843400d953a2852ec2ac0d3.log&quot;,&quot;filename&quot;:&quot;/fluent-bit/logs/SEARCH_LOGS/20231018/2023101819/aa1b d99e095de771-30327b422843400d953a2852ec2ac0d3. log&quot;,&quot;log&quot;:&quot;{&quot;}\r\n{&quot;date&quot;:&quot;2023-10-18T10:02:38.614369Z&quot;,&quot;appname&quot;:&quot;30327b422843400d953a2852ec2ac0d3.log&quot;,&quot;filename&quot;:&quot;/fluent-bit/logs/SEARCH_LOGS/20231018/2023101819/aa1b d99e095de771-30327b422843400d953a2852ec2ac0d3. log&quot;,&quot;log&quot;:&quot; \\\\&quot;hostname\\\\&quot; : \\\\&quot;test\\\\&quot;,&quot;}\r\n\r\n....\r\n\r\nThe log is too long, so I&#39;ll skip it.\r\n\r\nAs above, the log contains one line at a time: date, appname, filename\r\nIf you paste it like this, it won&#39;t come out like the original.\r\n\r\nCan you tell me why?\r\n\r\nBelow is my conf configuration code.  \r\n  \r\n\\-------------------Fluent-bit.conf -----------\r\n\r\n```\r\n[SERVICE]\r\n   Flush        10\r\n   Log_Level    info\r\n   Daemon       off\r\n\r\n[INPUT]\r\n   Name         tail\r\n   Path         /fluent-bit/logs/SEARCH_LOGS/*/*/*.log\r\n   Path_Key     filename\r\n   Tag          SEARCH_LOGS.*\r\n   Parser       json\r\n   Refresh_Interval  10\r\n   Buffer_Chunk_Size 10M\r\n   Buffer_Max_Size   10G\r\n\r\n[FILTER]\r\n   Name  lua\r\n   Match  *\r\n   script  /fluent-bit/etc/helper.lua\r\n   call  extract_app_fields\r\n\r\n[OUTPUT]\r\n   Name                s3\r\n   Match               SEARCH_LOGS.*\r\n   region              ap-northeast-2\r\n   bucket              dev-fluentbit\r\n   upload_timeout      20s\r\n   use_put_object      On\r\n   static_file_path    On\r\n   store_dir           /fluent-bit/logs/fluentbit\r\n   upload_chunk_size   3m\r\n   s3_key_format       /logs/$TAG[3]/%Y%m%d/%Y%m%d%H/$TAG[6].log.gz\r\n   s3_key_format_tag_delimiters .\r\n   compression         gzip\r\n```","title":"When importing a log file as input from Fluent bit and loading the log into S3, the data format in the log file is different","body":"<p>First of all, this is my log data.</p>\n<p>{\n&quot;hostname&quot; : &quot;test&quot;,\n&quot;serverTimestamp&quot; : &quot;2023-10-18T18:37:42.048&quot;,\n&quot;serverIp&quot; : &quot;-&quot;,\n&quot;jobCode&quot; : &quot;-&quot;,\n&quot;jobName&quot; : &quot;-&quot;\n}</p>\n<p>Log data loaded into S3.</p>\n<p>{&quot;date&quot;:&quot;2023-10-18T10:02:38.614367Z&quot;,&quot;appname&quot;:&quot;30327b422843400d953a2852ec2ac0d3.log&quot;,&quot;filename&quot;:&quot;/fluent-bit/logs/SEARCH_LOGS/20231018/2023101819/aa1b d99e095de771-30327b422843400d953a2852ec2ac0d3. log&quot;,&quot;log&quot;:&quot;{&quot;}\n{&quot;date&quot;:&quot;2023-10-18T10:02:38.614369Z&quot;,&quot;appname&quot;:&quot;30327b422843400d953a2852ec2ac0d3.log&quot;,&quot;filename&quot;:&quot;/fluent-bit/logs/SEARCH_LOGS/20231018/2023101819/aa1b d99e095de771-30327b422843400d953a2852ec2ac0d3. log&quot;,&quot;log&quot;:&quot; \\&quot;hostname\\&quot; : \\&quot;test\\&quot;,&quot;}</p>\n<p>....</p>\n<p>The log is too long, so I'll skip it.</p>\n<p>As above, the log contains one line at a time: date, appname, filename\nIf you paste it like this, it won't come out like the original.</p>\n<p>Can you tell me why?</p>\n<p>Below is my conf configuration code.</p>\n<p>-------------------Fluent-bit.conf -----------</p>\n<pre><code>[SERVICE]\n   Flush        10\n   Log_Level    info\n   Daemon       off\n\n[INPUT]\n   Name         tail\n   Path         /fluent-bit/logs/SEARCH_LOGS/*/*/*.log\n   Path_Key     filename\n   Tag          SEARCH_LOGS.*\n   Parser       json\n   Refresh_Interval  10\n   Buffer_Chunk_Size 10M\n   Buffer_Max_Size   10G\n\n[FILTER]\n   Name  lua\n   Match  *\n   script  /fluent-bit/etc/helper.lua\n   call  extract_app_fields\n\n[OUTPUT]\n   Name                s3\n   Match               SEARCH_LOGS.*\n   region              ap-northeast-2\n   bucket              dev-fluentbit\n   upload_timeout      20s\n   use_put_object      On\n   static_file_path    On\n   store_dir           /fluent-bit/logs/fluentbit\n   upload_chunk_size   3m\n   s3_key_format       /logs/$TAG[3]/%Y%m%d/%Y%m%d%H/$TAG[6].log.gz\n   s3_key_format_tag_delimiters .\n   compression         gzip\n</code></pre>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697624005,"post_id":77308771,"comment_id":136302279,"body_markdown":"Possibly the certificate is in a copy of cacerts in the virtual store of your admin profile, instead of the &quot;real&quot; cacerts in the Java directory, or your admin uses a different install of Java than your normal user.","body":"Possibly the certificate is in a copy of cacerts in the virtual store of your admin profile, instead of the &quot;real&quot; cacerts in the Java directory, or your admin uses a different install of Java than your normal user."}],"owner":{"account_id":27907079,"reputation":1,"user_id":21310039,"display_name":"BetziTheRealOne"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697544726,"answer_count":0,"score":0,"last_activity_date":1697623916,"creation_date":1697543623,"question_id":77308771,"body_markdown":"I updated the connection to my local repository from HTTP to HTTPS and I added the certificate to cacerts. Since then I have an issue, that I can&#39;t run `mvn clean install` as a normal user. When I run VS Code as an Administrator I don&#39;t get that error. I want to build my project as a normal user too.\r\n\r\nI guess it&#39;s something wrong with some rights, but I don&#39;t know what exactly. I installed both Java and Maven, under C:/Programm Files.\r\n\r\nI gave my non-admin account full access to the Java and Maven folder.\r\n\r\nThe difference to similar questions is, that the build only runs as an admin, but not as a normal user. I already followed the steps in similar questions, but they don&#39;t solved my problem yet.","title":"Java PKIX path building failed as non Admin","body":"<p>I updated the connection to my local repository from HTTP to HTTPS and I added the certificate to cacerts. Since then I have an issue, that I can't run <code>mvn clean install</code> as a normal user. When I run VS Code as an Administrator I don't get that error. I want to build my project as a normal user too.</p>\n<p>I guess it's something wrong with some rights, but I don't know what exactly. I installed both Java and Maven, under C:/Programm Files.</p>\n<p>I gave my non-admin account full access to the Java and Maven folder.</p>\n<p>The difference to similar questions is, that the build only runs as an admin, but not as a normal user. I already followed the steps in similar questions, but they don't solved my problem yet.</p>\n"},{"tags":["java","selenium","selenium-webdriver","automation"],"answers":[{"tags":[],"owner":{"account_id":6532574,"reputation":2212,"user_id":5053266,"accept_rate":67,"display_name":"RotS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446510420,"creation_date":1440592820,"answer_id":32226957,"question_id":31241901,"body_markdown":"[Here][1] some people managed to fix this problem by adding a new key in the registry.\nThe new key is located in &quot;HKEY_CURRENT_USER\\\\Software\\\\Microsoft\\\\Internet Explorer\\\\Main&quot;, its name is &quot;TabProcGrowth&quot;, and its value is &quot;0&quot;.\n\nUnfortunately, this didn&#39;t work for me, but maybe it will work for you.\n\n[This site][2] has further details on the specifics of this key and the actual impacts it may have.\n\n  [1]: https://code.google.com/p/selenium/issues/detail?id=5848\n  [2]: http://blogs.technet.com/b/doxley/archive/2009/10/14/putting-iexplore-exe-on-a-diet.aspx\n","title":"Command line server for the IE driver has stopped working error while running selenium test cases","body":"<p><a href=\"https://code.google.com/p/selenium/issues/detail?id=5848\" rel=\"nofollow noreferrer\">Here</a> some people managed to fix this problem by adding a new key in the registry.\nThe new key is located in &quot;HKEY_CURRENT_USER\\Software\\Microsoft\\Internet Explorer\\Main&quot;, its name is &quot;TabProcGrowth&quot;, and its value is &quot;0&quot;.</p>\n<p>Unfortunately, this didn't work for me, but maybe it will work for you.</p>\n<p><a href=\"http://blogs.technet.com/b/doxley/archive/2009/10/14/putting-iexplore-exe-on-a-diet.aspx\" rel=\"nofollow noreferrer\">This site</a> has further details on the specifics of this key and the actual impacts it may have.</p>\n"},{"tags":[],"owner":{"account_id":7506394,"reputation":1,"user_id":5702774,"display_name":"Paso"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462282716,"creation_date":1462282716,"answer_id":37005840,"question_id":31241901,"body_markdown":"I read somewhere that the javascript in the code is causing this error. In my case , I had written a script for click on an element (Given below)\r\njse.executeScript(&quot;arguments[0].click();&quot;,element);\r\n\r\nI got the error while executing this line of code. I commented this line and opted for selenium click. And voila the error is gone.\r\n\r\nPlease try commenting javascripts in the code if you have any and try running again.\r\nlink to the blog where I found this :\r\nhttp://jimevansmusic.blogspot.in/2014/12/windows-update-kb3025390-for-ie-11.html","title":"Command line server for the IE driver has stopped working error while running selenium test cases","body":"<p>I read somewhere that the javascript in the code is causing this error. In my case , I had written a script for click on an element (Given below)\njse.executeScript(\"arguments[0].click();\",element);</p>\n\n<p>I got the error while executing this line of code. I commented this line and opted for selenium click. And voila the error is gone.</p>\n\n<p>Please try commenting javascripts in the code if you have any and try running again.\nlink to the blog where I found this :\n<a href=\"http://jimevansmusic.blogspot.in/2014/12/windows-update-kb3025390-for-ie-11.html\" rel=\"nofollow\">http://jimevansmusic.blogspot.in/2014/12/windows-update-kb3025390-for-ie-11.html</a></p>\n"},{"tags":[],"owner":{"account_id":9104178,"reputation":307,"user_id":6775290,"accept_rate":100,"display_name":"newuser"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484601654,"creation_date":1484601654,"answer_id":41685156,"question_id":31241901,"body_markdown":"I get this error while clicking on an element in a particular page. I removed .click() to clicking element using Actions class in Java. It worked !!","title":"Command line server for the IE driver has stopped working error while running selenium test cases","body":"<p>I get this error while clicking on an element in a particular page. I removed .click() to clicking element using Actions class in Java. It worked !!</p>\n"},{"tags":[],"owner":{"account_id":5493742,"reputation":21,"user_id":4365591,"display_name":"Krzysiek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1490262633,"creation_date":1490262633,"answer_id":42972491,"question_id":31241901,"body_markdown":"Go to C:\\Users\\\\{user}\\.m2\\repository\\webdriver\\IEDriverServer\\beta\\Win32\\IE.Driver.Beta and replace IEDriverServer.exe with new version it should work","title":"Command line server for the IE driver has stopped working error while running selenium test cases","body":"<p>Go to C:\\Users\\{user}.m2\\repository\\webdriver\\IEDriverServer\\beta\\Win32\\IE.Driver.Beta and replace IEDriverServer.exe with new version it should work</p>\n"}],"owner":{"account_id":339413,"reputation":905,"user_id":668887,"accept_rate":61,"display_name":"Coolbreeze"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8619,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1697623245,"creation_date":1436174018,"question_id":31241901,"body_markdown":"I&#39;m receiving an error prompt box while executing Selenium Test cases. \r\n\r\nI&#39;m using `IEDriver 2.46` and `Selenium 2.46`. I have searched few posts in Stack Overflow and there is not a  proper answer that I could use in my environment.\r\n\r\nIs there any generic solution or a code change which might fix this issue? I&#39;m using `IE 9 (64 bit, Win 7)`\r\n\r\nI have refer this [post][1], but it is not work for me.\r\n\r\nAny help will be much appreciated. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/19292083/command-line-server-for-the-ie-webdriver-has-stopped-working-why-this-happening","title":"Command line server for the IE driver has stopped working error while running selenium test cases","body":"<p>I'm receiving an error prompt box while executing Selenium Test cases. </p>\n\n<p>I'm using <code>IEDriver 2.46</code> and <code>Selenium 2.46</code>. I have searched few posts in Stack Overflow and there is not a  proper answer that I could use in my environment.</p>\n\n<p>Is there any generic solution or a code change which might fix this issue? I'm using <code>IE 9 (64 bit, Win 7)</code></p>\n\n<p>I have refer this <a href=\"https://stackoverflow.com/questions/19292083/command-line-server-for-the-ie-webdriver-has-stopped-working-why-this-happening\">post</a>, but it is not work for me.</p>\n\n<p>Any help will be much appreciated. </p>\n"},{"tags":["java","jsp"],"comments":[{"owner":{"account_id":3116309,"reputation":1315,"user_id":2637006,"accept_rate":50,"display_name":"Vinayak Pingale"},"score":0,"creation_date":1390584645,"post_id":21338715,"comment_id":32169722,"body_markdown":"when you submit your form as you have mentioned your action as `login.jsp` hence it will go to that JSP in login . In JSP you should put your `&lt;% %&gt;`. Provide method attribute too.","body":"when you submit your form as you have mentioned your action as <code>login.jsp</code> hence it will go to that JSP in login . In JSP you should put your <code>&lt;% %&gt;</code>. Provide method attribute too."},{"owner":{"display_name":"user2962071"},"score":0,"creation_date":1390584797,"post_id":21338715,"comment_id":32169822,"body_markdown":"The code above IS login.jsp","body":"The code above IS login.jsp"},{"owner":{"account_id":1646237,"reputation":2925,"user_id":1517735,"accept_rate":75,"display_name":"Vinoth Krishnan"},"score":0,"creation_date":1390585589,"post_id":21338715,"comment_id":32170302,"body_markdown":"You need to go through this [how-to-avoid-java-code-in-jsp-files](http://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)","body":"You need to go through this <a href=\"http://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files\">how-to-avoid-java-code-in-jsp-files</a>"},{"owner":{"account_id":418189,"reputation":1882,"user_id":794606,"accept_rate":80,"display_name":"Jacek Cz"},"score":0,"creation_date":1444637939,"post_id":21338715,"comment_id":53969747,"body_markdown":"Import `javax.swing.JOptionPane` have not sense","body":"Import <code>javax.swing.JOptionPane</code> have not sense"},{"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":0,"creation_date":1452443371,"post_id":21338715,"comment_id":57161663,"body_markdown":"Stop pretending to live in a Monkey world.  It is significantly better practice to use a servlet (or handler if you use spring) for java code and to use a JSP strictly for display and input.  Split this into a servlet to do the login and a jsp to send input and another (possibly the same jsp) to display results.","body":"Stop pretending to live in a Monkey world.  It is significantly better practice to use a servlet (or handler if you use spring) for java code and to use a JSP strictly for display and input.  Split this into a servlet to do the login and a jsp to send input and another (possibly the same jsp) to display results."}],"answers":[{"comments":[{"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"score":0,"creation_date":1403531739,"post_id":24365694,"comment_id":37681614,"body_markdown":"I&#39;ve never checked if a button was actually clicked exept with multiple buttons ... what is important is : is the method (POST, GET, PUT) expected and are the parameters corrects. And I wonder where JOptionPane display will go ... not on browser I assume !","body":"I&#39;ve never checked if a button was actually clicked exept with multiple buttons ... what is important is : is the method (POST, GET, PUT) expected and are the parameters corrects. And I wonder where JOptionPane display will go ... not on browser I assume !"},{"owner":{"account_id":3554897,"reputation":654,"user_id":2968881,"display_name":"Java Enthusiast"},"score":0,"creation_date":1403538145,"post_id":24365694,"comment_id":37685774,"body_markdown":"@SergeBallesta It&#39;s always better to check button click in cases where the form action is on the same page..also from where does `JOptionPane` comes from in this..","body":"@SergeBallesta It&#39;s always better to check button click in cases where the form action is on the same page..also from where does <code>JOptionPane</code> comes from in this.."},{"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"score":0,"creation_date":1403538497,"post_id":24365694,"comment_id":37685985,"body_markdown":"I prefere testing the method. I find it simpler if I want to call the app as a RESTful web service. And SpringMVC `@RequestMapping` annotated controllers automatically test method for me ... But this is opinion and we should avoid opinions on SO :-)","body":"I prefere testing the method. I find it simpler if I want to call the app as a RESTful web service. And SpringMVC <code>@RequestMapping</code> annotated controllers automatically test method for me ... But this is opinion and we should avoid opinions on SO :-)"},{"owner":{"account_id":3554897,"reputation":654,"user_id":2968881,"display_name":"Java Enthusiast"},"score":0,"creation_date":1403538709,"post_id":24365694,"comment_id":37686105,"body_markdown":"@SergeBallesta the things you are talking about is of no concern to this question..","body":"@SergeBallesta the things you are talking about is of no concern to this question.."}],"tags":[],"owner":{"account_id":3554897,"reputation":654,"user_id":2968881,"display_name":"Java Enthusiast"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1403525731,"creation_date":1403525731,"answer_id":24365694,"question_id":21338715,"body_markdown":"There are two problems in your code..\r\n\r\n1) You want your java code to be executed on button click..so you should check for button click and then write code within it as:\r\n\r\n\r\n    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; name=&quot;bt&quot;&gt;&lt;/input&gt;&lt;/td&gt; //Define a name for button\r\n\r\n    &lt;%\r\n          if(request.getParameter(&quot;bt&quot;)!=null)\r\n          {\r\n               if ((request.getParameter(&quot;name&quot;) != null )\r\n                  &amp;&amp; (request.getParameter(&quot;password&quot;) != null ))\r\n               {\r\n                    //your code\r\n                }\r\n          }\r\n     %&gt;\r\n\r\n\r\n\r\n2) You have not stored your username and password in any variable and still accessing them in your query by using the name of your  text field which is wrong..Save them in a variable and use that variable in the query as :\r\n\r\n\r\n    String name= request.getParameter(&quot;name&quot;);\r\n    String pass= request.getParameter(&quot;password&quot;);\r\n  \r\n    String sql = &quot;select user,pass from AngelsAndDemons where user = &#39;&quot;+name+&quot;&#39;and pass = &#39;&quot;+pass+&quot;&#39;&quot;;\r\n","title":"Java Login JSP Page (Uses Access Database)","body":"<p>There are two problems in your code..</p>\n\n<p>1) You want your java code to be executed on button click..so you should check for button click and then write code within it as:</p>\n\n<pre><code>&lt;input type=\"submit\" value=\"Submit\" name=\"bt\"&gt;&lt;/input&gt;&lt;/td&gt; //Define a name for button\n\n&lt;%\n      if(request.getParameter(\"bt\")!=null)\n      {\n           if ((request.getParameter(\"name\") != null )\n              &amp;&amp; (request.getParameter(\"password\") != null ))\n           {\n                //your code\n            }\n      }\n %&gt;\n</code></pre>\n\n<p>2) You have not stored your username and password in any variable and still accessing them in your query by using the name of your  text field which is wrong..Save them in a variable and use that variable in the query as :</p>\n\n<pre><code>String name= request.getParameter(\"name\");\nString pass= request.getParameter(\"password\");\n\nString sql = \"select user,pass from AngelsAndDemons where user = '\"+name+\"'and pass = '\"+pass+\"'\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2293919,"reputation":2910,"user_id":2015911,"accept_rate":89,"display_name":"BlueMoon93"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1452442501,"creation_date":1452442501,"answer_id":34707710,"question_id":21338715,"body_markdown":"Do not concatenate `String`s. Used `PreparedStatement`s to avoid SQL injection. \r\n\r\nAlso avoid storing passwords on `String` variables. Use `char[]` when possible, and wipe it after using it, to avoid leaving a cleartext password on memory.","title":"Java Login JSP Page (Uses Access Database)","body":"<p>Do not concatenate <code>String</code>s. Used <code>PreparedStatement</code>s to avoid SQL injection. </p>\n\n<p>Also avoid storing passwords on <code>String</code> variables. Use <code>char[]</code> when possible, and wipe it after using it, to avoid leaving a cleartext password on memory.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600300131,"creation_date":1600300131,"answer_id":63929372,"question_id":21338715,"body_markdown":"Congrats on trying web server development.\r\n\r\nFirst a corrected version.\r\n\r\n    &lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;\r\n        import=&quot;java.sql.*&quot;\r\n        import=&quot;javax.sql.*&quot;%&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n        &lt;head&gt;\r\n            &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n            &lt;title&gt;Angels &amp; Demons&lt;/title&gt;\r\n            &lt;a href=&quot;index.jsp&quot;&gt;Home Page&lt;/a&gt;\r\n            &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;\r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n            &lt;h1&gt;&lt;center&gt;Login&lt;/center&gt;&lt;/h1&gt;\r\n    \r\n         &lt;%\r\n             String name = request.getParameter(&quot;name&quot;);\r\n    \t\t String password = request.getParameter(&quot;password&quot;);\r\n    \t\t if (name == null || password == null) {\r\n    \t%&gt;\r\n    \r\n    \t\t&lt;center&gt;\r\n    \t\t&lt;form action=&quot;login.jsp&quot; method=&quot;POST&quot;&gt; \r\n    \t\t&lt;h2&gt;Please make sure to fill all fields! &lt;/h2&gt; \r\n    \t\t&lt;table&gt; \r\n    \t\t&lt;tr&gt;&lt;td&gt;User:&lt;input name=&quot;name&quot; type=&quot;text&quot; size=&quot;10&quot;&gt;&lt;/td&gt;&lt;/tr&gt; \r\n    \t\t&lt;tr&gt;&lt;td&gt;Password:&lt;input name=&quot;password&quot; size=&quot;10&quot;&gt;&lt;/td&gt;&lt;/tr&gt; \r\n    \t\t&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/input&gt;&lt;/td&gt;\r\n    \t\t&lt;/table&gt;   \r\n            &lt;/center&gt;\r\n            &lt;/form&gt;     \r\n    \r\n         &lt;%\r\n             } else {\r\n    \r\n    \t\t\tString driver = &quot;sun.jdbc.odbc.JdbcOdbcDriver&quot;;\r\n    \t\t\tClass.forName(driver);\r\n    \r\n    \t\t\tString db = &quot;jdbc:odbc:AngelsAndDemons&quot;;\r\n    \t\t\ttry (Connection conn = DriverManager.getConnection(db)) {\r\n    \t\t\t\tString sql = &quot;select count(*) from AngelsAndDemons where user = ? and pass = ?&quot;;\r\n    \t\t\t\ttry (PreparedStatement st = conn.prepareStatement(sql)) {\r\n    \t\t\t\t\tst.setString(1, user);\r\n    \t\t\t\t\tst.setString(2, password);\r\n    \t\t\t\t\ttry (ResultSet rs = st.executeQuery()) {\r\n    \t\t\t\t\t    int count = 0;\r\n    \t\t\t\t\t    if (rs.next()) {\r\n    \t\t\t\t\t\t    count = rs.getInt(1);\r\n    \t\t\t\t\t    }\r\n    \r\n    \t\t\t\t\t\tif(count == 1) {\r\n    \t\t\t\t\t\t\t%&gt;&lt;h2&gt;User found, Access Granted!&lt;/2&gt;&lt;&amp;\r\n    \t\t\t\t\t\t} else if(count &gt; 1) {\r\n    \t\t\t\t\t\t\t%&gt;&lt;h2&gt;Duplicate User, Access Denied&lt;/2&gt;&lt;&amp;\r\n    \t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\t%&gt;&lt;h2&gt;Duplicate User, Access Denied&lt;/2&gt;&lt;&amp;\r\n                            }\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t} catch (Exception ex) {\r\n    \t\t\t\t\t\t\t%&gt;&lt;h2&gt;There was Problem in Login.&lt;/2&gt;\r\n    \t\t\t\t\t\t\t  &lt;p&gt;&lt;%= ex.getMessage() %&gt;&lt;/p&gt;\r\n    \t\t\t\t\t\t\t&lt;&amp;\r\n    \t\t\t}\r\n            }\r\n        %&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nWith the imports I was a bit lazy and used `*` - which is bad style.\r\n\r\nThe page is delivered on a browser request (HTTP GET) back to the browser, the client.\r\nNo parameters were in the request, so the form is output.\r\n\r\nAfter the form is submitted by the browser, here as HTTP POST request,\r\nthere are parameters.\r\n\r\nNow a database query can be done.\r\n\r\nTry-with-resources ensure that all is closed (connection, prepared statement and result set). Even on return/break/exception.\r\n\r\nA PreparedStatement takes care of escaping (say a Name with an apostrophe in it). And most important prevents hacking, [SQL injection][1] (=creating evil SQL). Like a name `admin` and password `xxx&#39; OR 1=1`.\r\n\r\nAccess was in my time not a multiuser database. You might use a **Derby** or **H2** database.\r\n\r\n`JOptionPane` does not work in an HTML page delivered, or even on creating the page on the server. The alternatives is writing on the result page.\r\n\r\nYou picked a hard topic with many features. Good luck.\r\n\r\nAs JSPs get soon ugly, unreadable, try servlets, maybe in combinations, pure servlet for coding and delivering results in a JSP page.\r\n\r\n  [1]: https://xkcd.com/327/","title":"Java Login JSP Page (Uses Access Database)","body":"<p>Congrats on trying web server development.</p>\n<p>First a corrected version.</p>\n<pre><code>&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;\n    import=&quot;java.sql.*&quot;\n    import=&quot;javax.sql.*&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\n        &lt;title&gt;Angels &amp; Demons&lt;/title&gt;\n        &lt;a href=&quot;index.jsp&quot;&gt;Home Page&lt;/a&gt;\n        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;&lt;center&gt;Login&lt;/center&gt;&lt;/h1&gt;\n\n     &lt;%\n         String name = request.getParameter(&quot;name&quot;);\n         String password = request.getParameter(&quot;password&quot;);\n         if (name == null || password == null) {\n    %&gt;\n\n        &lt;center&gt;\n        &lt;form action=&quot;login.jsp&quot; method=&quot;POST&quot;&gt; \n        &lt;h2&gt;Please make sure to fill all fields! &lt;/h2&gt; \n        &lt;table&gt; \n        &lt;tr&gt;&lt;td&gt;User:&lt;input name=&quot;name&quot; type=&quot;text&quot; size=&quot;10&quot;&gt;&lt;/td&gt;&lt;/tr&gt; \n        &lt;tr&gt;&lt;td&gt;Password:&lt;input name=&quot;password&quot; size=&quot;10&quot;&gt;&lt;/td&gt;&lt;/tr&gt; \n        &lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/input&gt;&lt;/td&gt;\n        &lt;/table&gt;   \n        &lt;/center&gt;\n        &lt;/form&gt;     \n\n     &lt;%\n         } else {\n\n            String driver = &quot;sun.jdbc.odbc.JdbcOdbcDriver&quot;;\n            Class.forName(driver);\n\n            String db = &quot;jdbc:odbc:AngelsAndDemons&quot;;\n            try (Connection conn = DriverManager.getConnection(db)) {\n                String sql = &quot;select count(*) from AngelsAndDemons where user = ? and pass = ?&quot;;\n                try (PreparedStatement st = conn.prepareStatement(sql)) {\n                    st.setString(1, user);\n                    st.setString(2, password);\n                    try (ResultSet rs = st.executeQuery()) {\n                        int count = 0;\n                        if (rs.next()) {\n                            count = rs.getInt(1);\n                        }\n\n                        if(count == 1) {\n                            %&gt;&lt;h2&gt;User found, Access Granted!&lt;/2&gt;&lt;&amp;\n                        } else if(count &gt; 1) {\n                            %&gt;&lt;h2&gt;Duplicate User, Access Denied&lt;/2&gt;&lt;&amp;\n                        } else {\n                            %&gt;&lt;h2&gt;Duplicate User, Access Denied&lt;/2&gt;&lt;&amp;\n                        }\n                    }\n                }\n            } catch (Exception ex) {\n                            %&gt;&lt;h2&gt;There was Problem in Login.&lt;/2&gt;\n                              &lt;p&gt;&lt;%= ex.getMessage() %&gt;&lt;/p&gt;\n                            &lt;&amp;\n            }\n        }\n    %&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>With the imports I was a bit lazy and used <code>*</code> - which is bad style.</p>\n<p>The page is delivered on a browser request (HTTP GET) back to the browser, the client.\nNo parameters were in the request, so the form is output.</p>\n<p>After the form is submitted by the browser, here as HTTP POST request,\nthere are parameters.</p>\n<p>Now a database query can be done.</p>\n<p>Try-with-resources ensure that all is closed (connection, prepared statement and result set). Even on return/break/exception.</p>\n<p>A PreparedStatement takes care of escaping (say a Name with an apostrophe in it). And most important prevents hacking, <a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">SQL injection</a> (=creating evil SQL). Like a name <code>admin</code> and password <code>xxx' OR 1=1</code>.</p>\n<p>Access was in my time not a multiuser database. You might use a <strong>Derby</strong> or <strong>H2</strong> database.</p>\n<p><code>JOptionPane</code> does not work in an HTML page delivered, or even on creating the page on the server. The alternatives is writing on the result page.</p>\n<p>You picked a hard topic with many features. Good luck.</p>\n<p>As JSPs get soon ugly, unreadable, try servlets, maybe in combinations, pure servlet for coding and delivering results in a JSP page.</p>\n"}],"owner":{"display_name":"user2962071"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8138,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1697623245,"creation_date":1390584358,"question_id":21338715,"body_markdown":"I have a Java login application that works and uses a microsoft access database to validate login details. I&#39;m currently in the process of building a java web application and I&#39;m just trying to implement code from my working example.\r\n\r\nMy problem is that I have 2 input fields here for username and password, (called &quot;name&quot; and &quot;password&quot;) But my SQL code which works in the previous example cannot detect the fields on this page called name and password, where the user would input their details respectively.\r\n\r\nAny help would be much appreciated!\r\n\r\n\r\n    &lt;%@page import=&quot;javax.swing.JOptionPane&quot;%&gt;\r\n    &lt;%@page import=&quot;java.sql.Connection&quot;%&gt;\r\n    &lt;%@page import=&quot;java.sql.Statement&quot;%&gt;\r\n    &lt;%@page import=&quot;java.sql.ResultSet&quot;%&gt;\r\n    &lt;%@page import=&quot;java.sql.DriverManager&quot;%&gt;\r\n    &lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n        &lt;head&gt;\r\n            &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\r\n            &lt;title&gt;Angels &amp; Demons&lt;/title&gt;\r\n            &lt;a href=&quot;index.jsp&quot;&gt;Home Page&lt;/a&gt;\r\n            &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;\r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n            &lt;h1&gt;&lt;center&gt;Login&lt;/center&gt;&lt;/h1&gt;\r\n           \r\n    &lt;center&gt;&lt;form action=&quot;login.jsp&quot;&gt; \r\n    &lt;h2&gt;Please make sure to fill all fields! &lt;/h2&gt; \r\n    &lt;table&gt; \r\n    &lt;tr&gt;&lt;td&gt;User:&lt;input name=&quot;name&quot; type=&quot;text&quot; size=&quot;10&quot;&gt;&lt;/td&gt;&lt;/tr&gt; \r\n    &lt;tr&gt;&lt;td&gt;Password:&lt;input name=&quot;password&quot; size=&quot;10&quot;&gt;&lt;/td&gt;&lt;/tr&gt; \r\n    \r\n    &lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/input&gt;&lt;/td&gt;\r\n    &lt;/table&gt;   \r\n            &lt;/center&gt;\r\n        \r\n        \r\n        \r\n        \r\n         &lt;%\r\n                 if ((request.getParameter(&quot;name&quot;) != null )\r\n                      &amp;&amp; (request.getParameter(&quot;password&quot;) != null ) \r\n                    )\r\n                    \r\n                 {\r\n                            \r\n                    Connection conn = null;\r\n                    Statement st = null;\r\n                    ResultSet rs;\r\n        \r\n        \r\n                try{\r\n                     \r\n                \r\n            \r\n            String driver = &quot;sun.jdbc.odbc.JdbcOdbcDriver&quot;;\r\n            Class.forName(driver);\r\n            \r\n            String db = &quot;jdbc:odbc:AngelsAndDemons&quot;;\r\n            conn = DriverManager.getConnection(db);\r\n            st = conn.createStatement();\r\n            String sql = &quot;select user,pass from AngelsAndDemons where user = &#39;&quot;+name+&quot;&#39;and pass = &#39;&quot;+password+&quot;&#39;&quot;;\r\n            rs = st.executeQuery(sql);\r\n                   \r\n                   int count = 0;\r\n                   while(rs.next())\r\n                   {\r\n                       count = count + 1;\r\n                   }\r\n                   \r\n               if(count == 1)\r\n               {\r\n                   JOptionPane.showMessageDialog(null,&quot;User found, Access Granted!&quot;);\r\n                   \r\n               }\r\n               else if(count &gt; 1){\r\n                    JOptionPane.showMessageDialog(null,&quot;Duplicte User, Access Denied&quot;);\r\n               }\r\n               else{\r\n                    JOptionPane.showMessageDialog(null,&quot;User not found&quot;);\r\n               }\r\n               \r\n            }\r\n            catch(Exception ex)\r\n            {\r\n        }  \r\n                        }\r\n                 \r\n                %&gt;\r\n                \r\n                 \r\n                   There was Problem in Login. \r\n                   &lt;%\r\n                     \r\n                     %&gt; \r\n                     \r\n                  }\r\n               &lt;/form&gt;     \r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n","title":"Java Login JSP Page (Uses Access Database)","body":"<p>I have a Java login application that works and uses a microsoft access database to validate login details. I'm currently in the process of building a java web application and I'm just trying to implement code from my working example.</p>\n\n<p>My problem is that I have 2 input fields here for username and password, (called \"name\" and \"password\") But my SQL code which works in the previous example cannot detect the fields on this page called name and password, where the user would input their details respectively.</p>\n\n<p>Any help would be much appreciated!</p>\n\n<pre><code>&lt;%@page import=\"javax.swing.JOptionPane\"%&gt;\n&lt;%@page import=\"java.sql.Connection\"%&gt;\n&lt;%@page import=\"java.sql.Statement\"%&gt;\n&lt;%@page import=\"java.sql.ResultSet\"%&gt;\n&lt;%@page import=\"java.sql.DriverManager\"%&gt;\n&lt;%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n        &lt;title&gt;Angels &amp; Demons&lt;/title&gt;\n        &lt;a href=\"index.jsp\"&gt;Home Page&lt;/a&gt;\n        &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\"&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;&lt;center&gt;Login&lt;/center&gt;&lt;/h1&gt;\n\n&lt;center&gt;&lt;form action=\"login.jsp\"&gt; \n&lt;h2&gt;Please make sure to fill all fields! &lt;/h2&gt; \n&lt;table&gt; \n&lt;tr&gt;&lt;td&gt;User:&lt;input name=\"name\" type=\"text\" size=\"10\"&gt;&lt;/td&gt;&lt;/tr&gt; \n&lt;tr&gt;&lt;td&gt;Password:&lt;input name=\"password\" size=\"10\"&gt;&lt;/td&gt;&lt;/tr&gt; \n\n&lt;td&gt;&lt;input type=\"submit\" value=\"Submit\"&gt;&lt;/input&gt;&lt;/td&gt;\n&lt;/table&gt;   \n        &lt;/center&gt;\n\n\n\n\n     &lt;%\n             if ((request.getParameter(\"name\") != null )\n                  &amp;&amp; (request.getParameter(\"password\") != null ) \n                )\n\n             {\n\n                Connection conn = null;\n                Statement st = null;\n                ResultSet rs;\n\n\n            try{\n\n\n\n        String driver = \"sun.jdbc.odbc.JdbcOdbcDriver\";\n        Class.forName(driver);\n\n        String db = \"jdbc:odbc:AngelsAndDemons\";\n        conn = DriverManager.getConnection(db);\n        st = conn.createStatement();\n        String sql = \"select user,pass from AngelsAndDemons where user = '\"+name+\"'and pass = '\"+password+\"'\";\n        rs = st.executeQuery(sql);\n\n               int count = 0;\n               while(rs.next())\n               {\n                   count = count + 1;\n               }\n\n           if(count == 1)\n           {\n               JOptionPane.showMessageDialog(null,\"User found, Access Granted!\");\n\n           }\n           else if(count &gt; 1){\n                JOptionPane.showMessageDialog(null,\"Duplicte User, Access Denied\");\n           }\n           else{\n                JOptionPane.showMessageDialog(null,\"User not found\");\n           }\n\n        }\n        catch(Exception ex)\n        {\n    }  \n                    }\n\n            %&gt;\n\n\n               There was Problem in Login. \n               &lt;%\n\n                 %&gt; \n\n              }\n           &lt;/form&gt;     \n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","jdbc"],"answers":[{"tags":[],"owner":{"account_id":18803667,"reputation":51,"user_id":13713476,"display_name":"Ruendan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697623228,"creation_date":1697623228,"answer_id":77315302,"question_id":77315091,"body_markdown":":) \r\n\r\nI think you could take a look at a lot of SQL verifications. It&#39;ll make sure to always have data matching your expectations rather than doing all the verification in java. \r\n\r\nthe **SQL CHECK** statement for instance. It let you create custom rules for your tables, throwing an SQL Exception if the datas you try to insert don&#39;t match your rules. https://www.w3schools.com/sql/sql_check.asp\r\n\r\nthe columns like KICKOUT_ST could be an **ENUM** with values (&#39;AK&#39;, &#39;BK&#39;, &#39;GK&#39;, &#39;CK&#39;, &#39;QK&#39;) forcing these values specifically https://www.geeksforgeeks.org/enumerator-enum-in-mysql/\r\n\r\nFor the few columns that should not be null, make sure to apply the NOT NULL statement. https://www.w3schools.com/sql/sql_ref_not_null.asp \r\n\r\n\r\nI don&#39;t know if there&#39;s consistent way to make these verifications in Java / JDBC. Maybe could you find it using Hibernate, JPA and/or Spring Data but If you really want to make sure the input data match your model in java you&#39;ll have to make the checks manually (in addition to the SQL validation) :)","title":"JDBC insert query with conditions using spring boot","body":"<p>:)</p>\n<p>I think you could take a look at a lot of SQL verifications. It'll make sure to always have data matching your expectations rather than doing all the verification in java.</p>\n<p>the <strong>SQL CHECK</strong> statement for instance. It let you create custom rules for your tables, throwing an SQL Exception if the datas you try to insert don't match your rules. <a href=\"https://www.w3schools.com/sql/sql_check.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/sql/sql_check.asp</a></p>\n<p>the columns like KICKOUT_ST could be an <strong>ENUM</strong> with values ('AK', 'BK', 'GK', 'CK', 'QK') forcing these values specifically <a href=\"https://www.geeksforgeeks.org/enumerator-enum-in-mysql/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/enumerator-enum-in-mysql/</a></p>\n<p>For the few columns that should not be null, make sure to apply the NOT NULL statement. <a href=\"https://www.w3schools.com/sql/sql_ref_not_null.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/sql/sql_ref_not_null.asp</a></p>\n<p>I don't know if there's consistent way to make these verifications in Java / JDBC. Maybe could you find it using Hibernate, JPA and/or Spring Data but If you really want to make sure the input data match your model in java you'll have to make the checks manually (in addition to the SQL validation) :)</p>\n"}],"owner":{"account_id":25715102,"reputation":1,"user_id":19473018,"display_name":"Newb_969"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697623228,"creation_date":1697621405,"question_id":77315091,"body_markdown":"I have to write JDBC insert query based on the below conditions:\r\n\r\nThe package must not be present in the table based on the following key:&lt;Package&gt;&lt;TrkngId&gt; \r\nThe package must not have a &lt;Package&gt;&lt;TransactionFlag&gt; of &#39;D&#39; \r\nThe Package must have one of the following kickout status (AK, BK, GK, CK, QK) \r\nThe Resolve Match Flag (RESOLVE_MATCH_FLAG) in ACT001F the must not be Y or is NULL \r\nThe stop id/type must not have a resolve in the Kickout_Resolve file as indicated by the absence of the stop in the original stop field of the table altogether or if the stop is in the table the absence of a resolved stop for the record. \r\nThe stop id/type must not be present in KICKOUT_CORRECTIONS_DETAIL  table as indicated by the delivery stop id and type matching an original stop id and type and the Estimated Facility Date in the  file = the Deliver date from the Active Package feed and the presence of the tracking id.\r\n\r\n\r\n\r\nI have written the below query but needed to add the conditions, can anybody help me on the same.\r\n```\r\nINSERT INTO FXG_VCAPI_SCHEMA.KICK_OUT_STATUS\r\n(TRAK_ID, PCKUP_SQ_ID,VINTAGE,EFD,STOP_ID,STOP_ID_TP,KICKOUT_STAT,KICKOUT_ST,BEGIN_PCKUP_TM, END_PCKUP_TM, CNFRM_NBR, PCKUP_TP, CO_NM, CONT_NM, PRIM_ADR, SCNDY_ADR, CITY, STATE, PSTL_CD, HOUSE_NM, STR_NM, CNTRY_CD, HIGH_RISE_IND, GEOCODE_VNDR, GEOCODE_LAT, GEOCODE_LON, GEOCODE_SCR, VALID_GEOCODE_IND, ZIP_CONF_SCR, VALID_ADDR_IND, FAC_NM, NTWK_CD, KICKOUT_TP, CREATED_DT, UPDATED_DT)\r\nVALUES (&#39;2070881&#39;, &#39;119052302274900001&#39;, &#39;201306&#39;,SYSDATE,&#39;500000001444168&#39;, &#39;I&#39;,&#39;AK&#39;, &#39;A&#39;,&#39;GK&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, 0, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, 0, &#39;&#39;, 0, 0, 0, &#39;&#39;, 0, &#39;&#39;, 0, &#39;&#39;, &#39;&#39;, &#39;&#39;,SYSDATE,SYSDATE);\r\n```","title":"JDBC insert query with conditions using spring boot","body":"<p>I have to write JDBC insert query based on the below conditions:</p>\n<p>The package must not be present in the table based on the following key:\nThe package must not have a  of 'D'\nThe Package must have one of the following kickout status (AK, BK, GK, CK, QK)\nThe Resolve Match Flag (RESOLVE_MATCH_FLAG) in ACT001F the must not be Y or is NULL\nThe stop id/type must not have a resolve in the Kickout_Resolve file as indicated by the absence of the stop in the original stop field of the table altogether or if the stop is in the table the absence of a resolved stop for the record.\nThe stop id/type must not be present in KICKOUT_CORRECTIONS_DETAIL  table as indicated by the delivery stop id and type matching an original stop id and type and the Estimated Facility Date in the  file = the Deliver date from the Active Package feed and the presence of the tracking id.</p>\n<p>I have written the below query but needed to add the conditions, can anybody help me on the same.</p>\n<pre><code>INSERT INTO FXG_VCAPI_SCHEMA.KICK_OUT_STATUS\n(TRAK_ID, PCKUP_SQ_ID,VINTAGE,EFD,STOP_ID,STOP_ID_TP,KICKOUT_STAT,KICKOUT_ST,BEGIN_PCKUP_TM, END_PCKUP_TM, CNFRM_NBR, PCKUP_TP, CO_NM, CONT_NM, PRIM_ADR, SCNDY_ADR, CITY, STATE, PSTL_CD, HOUSE_NM, STR_NM, CNTRY_CD, HIGH_RISE_IND, GEOCODE_VNDR, GEOCODE_LAT, GEOCODE_LON, GEOCODE_SCR, VALID_GEOCODE_IND, ZIP_CONF_SCR, VALID_ADDR_IND, FAC_NM, NTWK_CD, KICKOUT_TP, CREATED_DT, UPDATED_DT)\nVALUES ('2070881', '119052302274900001', '201306',SYSDATE,'500000001444168', 'I','AK', 'A','GK', '', '', '', '', 0, '', '', '', '', '', 0, '', 0, 0, 0, '', 0, '', 0, '', '', '',SYSDATE,SYSDATE);\n</code></pre>\n"},{"tags":["java","spring","tomcat","model-view-controller","fusioncharts"],"comments":[{"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"score":2,"creation_date":1515532798,"post_id":48176689,"comment_id":83333568,"body_markdown":"You shouldn&#39;t instantiate and/or call methods on your Controller class from your JSP. Your Controller handler methods should return a view name which corresponds to a view (viewname.jsp). It might help to search for some Spring MVC tutorials and work through a getting started app first, as your current usage seems a bit confused.","body":"You shouldn&#39;t instantiate and/or call methods on your Controller class from your JSP. Your Controller handler methods should return a view name which corresponds to a view (viewname.jsp). It might help to search for some Spring MVC tutorials and work through a getting started app first, as your current usage seems a bit confused."},{"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"score":1,"creation_date":1515533103,"post_id":48176689,"comment_id":83333703,"body_markdown":"You might also want to look at creating a new Spring MVC app with Spring Boot, as the configuration is vastly simplified (no need for xml config anymore)","body":"You might also want to look at creating a new Spring MVC app with Spring Boot, as the configuration is vastly simplified (no need for xml config anymore)"},{"owner":{"display_name":"user7061656"},"score":0,"creation_date":1515572932,"post_id":48176689,"comment_id":83345826,"body_markdown":"In Controller i return a view index.jsp like that: @RequestMapping(&quot;/index&quot;)\n    public ModelAndView hello() {\n        return new ModelAndView(&quot;index&quot;);\n    }, I did it a properly?","body":"In Controller i return a view index.jsp like that: @RequestMapping(&quot;/index&quot;)     public ModelAndView hello() {         return new ModelAndView(&quot;index&quot;);     }, I did it a properly?"}],"answers":[{"tags":[],"owner":{"account_id":16242595,"reputation":1,"user_id":11728552,"display_name":"Hihi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570622541,"creation_date":1570620104,"answer_id":58303023,"question_id":48176689,"body_markdown":"I suggest you annotate your `HomeController` class with `@Controller`, and inside a method with any name (ex. `public String showIndex() { return &quot;index&quot;; }` ). Annotate that method with `@GetMapping(&quot;/&quot;)` should work.","title":"Java Spring Web Application - No mapping found for HTTP request","body":"<p>I suggest you annotate your <code>HomeController</code> class with <code>@Controller</code>, and inside a method with any name (ex. <code>public String showIndex() { return \"index\"; }</code> ). Annotate that method with <code>@GetMapping(\"/\")</code> should work.</p>\n"},{"tags":[],"owner":{"account_id":25547265,"reputation":142,"user_id":19332369,"display_name":"Aman Saraswat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697623148,"creation_date":1697623148,"answer_id":77315289,"question_id":48176689,"body_markdown":"we have a GreetingController that is mapped to /greeting and renders greeting.jsp:\r\n\r\n    @Controller\r\n    public class GreetingController {\r\n    \r\n        @RequestMapping(value = &quot;/greeting&quot;, method = RequestMethod.GET)\r\n        public String get(ModelMap model) {\r\n            model.addAttribute(&quot;message&quot;, &quot;Hello, World!&quot;);\r\n            return &quot;greeting&quot;;\r\n        }\r\n    }\r\n\r\n\r\nThe corresponding view renders the value of the message variable:\r\n\r\n    &lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\r\n    &lt;html&gt;\r\n        &lt;head&gt;\r\n            &lt;title&gt;Greeting&lt;/title&gt;\r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n            &lt;h2&gt;${message}&lt;/h2&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nCreate a Java class that will act as the controller in the framework. The output of this will be an entire FusionCharts string you will call within the JSP page (or the view). The chart will render when you execute this string in the browser - \r\n\r\n    package fusioncharts;\r\n    \r\n    /**\r\n     *\r\n     * @author fusioncharts\r\n     */\r\n    \r\n    import java.io.IOException;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    import org.springframework.web.servlet.mvc.Controller;\r\n    \r\n    public class chartscontroller implements Controller{\r\n        @Override\r\n        public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n            return new ModelAndView(&quot;/WEB-INF/jsp/index.jsp&quot;);\r\n        }\r\n        \r\n         public String chartmaker(){\r\n            FusionCharts lineChart= new FusionCharts(\r\n                &quot;line&quot;,// chartType\r\n                &quot;chart1&quot;,// chartId\r\n                &quot;600&quot;,&quot;350&quot;,// chartWidth, chartHeight\r\n                &quot;chart&quot;,// chartContainer\r\n                &quot;jsonurl&quot;,// dataFormat\r\n                &quot;data.json&quot;    \r\n                );\r\n                \r\n            \r\n            return lineChart.render();\r\n        }\r\n        \r\n    }\r\n\r\nRefer docs - https://www.fusioncharts.com/blog/spring-framework-charts/","title":"Java Spring Web Application - No mapping found for HTTP request","body":"<p>we have a GreetingController that is mapped to /greeting and renders greeting.jsp:</p>\n<pre><code>@Controller\npublic class GreetingController {\n\n    @RequestMapping(value = &quot;/greeting&quot;, method = RequestMethod.GET)\n    public String get(ModelMap model) {\n        model.addAttribute(&quot;message&quot;, &quot;Hello, World!&quot;);\n        return &quot;greeting&quot;;\n    }\n}\n</code></pre>\n<p>The corresponding view renders the value of the message variable:</p>\n<pre><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Greeting&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h2&gt;${message}&lt;/h2&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Create a Java class that will act as the controller in the framework. The output of this will be an entire FusionCharts string you will call within the JSP page (or the view). The chart will render when you execute this string in the browser -</p>\n<pre><code>package fusioncharts;\n\n/**\n *\n * @author fusioncharts\n */\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport org.springframework.web.servlet.ModelAndView;\nimport org.springframework.web.servlet.mvc.Controller;\n\npublic class chartscontroller implements Controller{\n    @Override\n    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        return new ModelAndView(&quot;/WEB-INF/jsp/index.jsp&quot;);\n    }\n    \n     public String chartmaker(){\n        FusionCharts lineChart= new FusionCharts(\n            &quot;line&quot;,// chartType\n            &quot;chart1&quot;,// chartId\n            &quot;600&quot;,&quot;350&quot;,// chartWidth, chartHeight\n            &quot;chart&quot;,// chartContainer\n            &quot;jsonurl&quot;,// dataFormat\n            &quot;data.json&quot;    \n            );\n            \n        \n        return lineChart.render();\n    }\n    \n}\n</code></pre>\n<p>Refer docs - <a href=\"https://www.fusioncharts.com/blog/spring-framework-charts/\" rel=\"nofollow noreferrer\">https://www.fusioncharts.com/blog/spring-framework-charts/</a></p>\n"}],"owner":{"display_name":"user7061656"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1316,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697623148,"creation_date":1515532215,"question_id":48176689,"body_markdown":"i spend a few hours fighting with my problem, but with no big result, maybe someone will help me :)\r\n\r\nMy project look like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI want to use a library to draw a chart from this tutorial:\r\n[FusionCharts][2]\r\n\r\nI got error message this:\r\n\r\n&gt; 09-Jan-2018 21:56:22.304 WARNING [http-nio-8080-exec-1] org.springframework.web.servlet.PageNotFound.noHandlerFound No mapping found for HTTP request with URI [/] in DispatcherServlet with name &#39;spring&#39;\r\n09-Jan-2018 21:56:22.323 WARNING [http-nio-8080-exec-3] org.springframework.web.servlet.PageNotFound.noHandlerFound No mapping found for HTTP request with URI [/] in DispatcherServlet with name &#39;spring&#39;\r\n09-Jan-2018 21:56:22.465 WARNING [http-nio-8080-exec-5] org.springframework.web.servlet.PageNotFound.noHandlerFound No mapping found for HTTP request with URI [/] in DispatcherServlet with name &#39;spring&#39;\r\n\r\nFiles FusionCharts, fusioncharts.charts.js and fusioncharts.js are from library.\r\n\r\nHome Controller Code:\r\n\r\n    package com.charts.controller;\r\n    import java.io.IOException;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    import org.springframework.web.servlet.mvc.Controller;\r\n    \r\n    public class HomeController implements Controller {\r\n        @Override\r\n        public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n            return new ModelAndView(&quot;index&quot;);\r\n        }\r\n    \r\n        public String chartmaker(){\r\n            FusionCharts lineChart = new FusionCharts (\r\n                    &quot;line&quot;,// chartType\r\n                    &quot;chart1&quot;,// chartId\r\n                    &quot;600&quot;,&quot;350&quot;,// chartWidth, chartHeight\r\n                    &quot;chart&quot;,// chartContainer\r\n                    &quot;jsonurl&quot;,// dataFormat\r\n                    &quot;data.json&quot;\r\n            );\r\n            return lineChart.render();\r\n        }\r\n    \r\n    }\r\n\r\nindex.jsp:\r\n\r\n    &lt;%@ page import=&quot;com.charts.controller.HomeController&quot; %&gt;\r\n    &lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n    &lt;%@page import=&quot;com.charts.controller.FusionCharts&quot; %&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;FusionCharts || www.fusioncharts.com&lt;/title&gt;\r\n        &lt;script src=&quot;../fusioncharts.js&quot;&gt;&lt;/script&gt;\r\n        &lt;script src=&quot;../fusioncharts.charts.js&quot;&gt;&lt;/script&gt;\r\n        &lt;script src=&quot;../fusioncharts.theme.fint.js&quot;&gt;&lt;/script&gt;\r\n    &lt;/head&gt;\r\n        &lt;body&gt;\r\n        &lt;div id=&quot;chart&quot;&gt;&lt;/div&gt;\r\n    \r\n        &lt;%\r\n            HomeController a = new HomeController();\r\n            out.println(a.chartmaker());\r\n        %&gt;\r\n    \r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nspring-servlet.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n    \r\n        &lt;bean id=&quot;HandlerMapping&quot; class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot; /&gt;\r\n    \r\n        &lt;bean id=&quot;/welcome.html&quot; class=&quot;com.charts.controller.HomeController&quot; /&gt;\r\n    \r\n        &lt;bean id=&quot;viewResolver&quot;\r\n              class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot; &gt;\r\n            &lt;property name=&quot;prefix&quot;&gt;\r\n                &lt;value&gt;/WEB-INF/&lt;/value&gt;\r\n            &lt;/property&gt;\r\n            &lt;property name=&quot;suffix&quot;&gt;\r\n                &lt;value&gt;.jsp&lt;/value&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n    \r\n    &lt;/beans&gt;\r\n\r\nweb.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;\r\n             version=&quot;3.1&quot;&gt;\r\n    \r\n        &lt;servlet&gt;\r\n            &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\r\n            &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n            &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n        &lt;/servlet&gt;\r\n        \r\n        &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n        \r\n        &lt;context-param&gt;\r\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n            &lt;param-value&gt;WEB-INF/spring-servlet.xml&lt;/param-value&gt;\r\n        &lt;/context-param&gt;\r\n        \r\n        &lt;listener&gt;\r\n            &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n        &lt;/listener&gt;\r\n    \r\n    &lt;/web-app&gt;\r\n\r\nWhen i run a project, i got this message:\r\n[![enter image description here][3]][3]\r\n\r\nWhen i go to the http://localhost:8080/welcome.html i got a clear screen and this library doesn&#39;t draw any chart or something like that.\r\n\r\nMy configuration files are properly like web.xml or spring-servlet.xml ? \r\nI will be grateful for any advices\r\n\r\nRegards,\r\nAdrian\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jPd2f.png\r\n  [2]: https://www.fusioncharts.com/blog/spring-framework-charts/\r\n  [3]: https://i.stack.imgur.com/DodGt.png","title":"Java Spring Web Application - No mapping found for HTTP request","body":"<p>i spend a few hours fighting with my problem, but with no big result, maybe someone will help me :)</p>\n\n<p>My project look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jPd2f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jPd2f.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to use a library to draw a chart from this tutorial:\n<a href=\"https://www.fusioncharts.com/blog/spring-framework-charts/\" rel=\"nofollow noreferrer\">FusionCharts</a></p>\n\n<p>I got error message this:</p>\n\n<blockquote>\n  <p>09-Jan-2018 21:56:22.304 WARNING [http-nio-8080-exec-1] org.springframework.web.servlet.PageNotFound.noHandlerFound No mapping found for HTTP request with URI [/] in DispatcherServlet with name 'spring'\n  09-Jan-2018 21:56:22.323 WARNING [http-nio-8080-exec-3] org.springframework.web.servlet.PageNotFound.noHandlerFound No mapping found for HTTP request with URI [/] in DispatcherServlet with name 'spring'\n  09-Jan-2018 21:56:22.465 WARNING [http-nio-8080-exec-5] org.springframework.web.servlet.PageNotFound.noHandlerFound No mapping found for HTTP request with URI [/] in DispatcherServlet with name 'spring'</p>\n</blockquote>\n\n<p>Files FusionCharts, fusioncharts.charts.js and fusioncharts.js are from library.</p>\n\n<p>Home Controller Code:</p>\n\n<pre><code>package com.charts.controller;\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport org.springframework.web.servlet.ModelAndView;\nimport org.springframework.web.servlet.mvc.Controller;\n\npublic class HomeController implements Controller {\n    @Override\n    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        return new ModelAndView(\"index\");\n    }\n\n    public String chartmaker(){\n        FusionCharts lineChart = new FusionCharts (\n                \"line\",// chartType\n                \"chart1\",// chartId\n                \"600\",\"350\",// chartWidth, chartHeight\n                \"chart\",// chartContainer\n                \"jsonurl\",// dataFormat\n                \"data.json\"\n        );\n        return lineChart.render();\n    }\n\n}\n</code></pre>\n\n<p>index.jsp:</p>\n\n<pre><code>&lt;%@ page import=\"com.charts.controller.HomeController\" %&gt;\n&lt;%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%&gt;\n&lt;%@page import=\"com.charts.controller.FusionCharts\" %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;FusionCharts || www.fusioncharts.com&lt;/title&gt;\n    &lt;script src=\"../fusioncharts.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"../fusioncharts.charts.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"../fusioncharts.theme.fint.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n    &lt;body&gt;\n    &lt;div id=\"chart\"&gt;&lt;/div&gt;\n\n    &lt;%\n        HomeController a = new HomeController();\n        out.println(a.chartmaker());\n    %&gt;\n\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>spring-servlet.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n    &lt;bean id=\"HandlerMapping\" class=\"org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping\" /&gt;\n\n    &lt;bean id=\"/welcome.html\" class=\"com.charts.controller.HomeController\" /&gt;\n\n    &lt;bean id=\"viewResolver\"\n          class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\" &gt;\n        &lt;property name=\"prefix\"&gt;\n            &lt;value&gt;/WEB-INF/&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property name=\"suffix\"&gt;\n            &lt;value&gt;.jsp&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>web.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\"\n         version=\"3.1\"&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;WEB-INF/spring-servlet.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>When i run a project, i got this message:\n<a href=\"https://i.stack.imgur.com/DodGt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DodGt.png\" alt=\"enter image description here\"></a></p>\n\n<p>When i go to the <a href=\"http://localhost:8080/welcome.html\" rel=\"nofollow noreferrer\">http://localhost:8080/welcome.html</a> i got a clear screen and this library doesn't draw any chart or something like that.</p>\n\n<p>My configuration files are properly like web.xml or spring-servlet.xml ? \nI will be grateful for any advices</p>\n\n<p>Regards,\nAdrian</p>\n"},{"tags":["java","spring-boot","swagger-ui","springdoc"],"answers":[{"tags":[],"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1653046838,"creation_date":1653046838,"answer_id":72318360,"question_id":72317932,"body_markdown":"Try `swagger-ui.html` instead of `swagger-ui/index.html`. In 60% of the cases `swagger-ui.html` redirects to its real location.\r\n\r\nhttp://localhost:8080/v1/swagger-ui.html\r\nhttp://localhost:8080/v3/swagger-ui.html","title":"Spring springdoc-openapi : swagger-ui/index.html cannot be found status=404","body":"<p>Try <code>swagger-ui.html</code> instead of <code>swagger-ui/index.html</code>. In 60% of the cases <code>swagger-ui.html</code> redirects to its real location.</p>\n<p>http://localhost:8080/v1/swagger-ui.html\nhttp://localhost:8080/v3/swagger-ui.html</p>\n"},{"tags":[],"owner":{"account_id":2303324,"reputation":915,"user_id":2023141,"accept_rate":20,"display_name":"user2023141"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1653050326,"creation_date":1653050326,"answer_id":72319076,"question_id":72317932,"body_markdown":"I found the cause of the problem. The context-path was not set in application.yaml.\r\n\r\nhttp://localhost:8080/**v1**/swagger-ui/index.html\r\n\r\nAfter adding  **servlet : context-path**,  swagger-ui is rendered\r\n\r\n    server:\r\n      port: 8080\r\n      servlet:\r\n        context-path: &quot;/${spring.application.api-version}&quot;","title":"Spring springdoc-openapi : swagger-ui/index.html cannot be found status=404","body":"<p>I found the cause of the problem. The context-path was not set in application.yaml.</p>\n<p>http://localhost:8080/<strong>v1</strong>/swagger-ui/index.html</p>\n<p>After adding  <strong>servlet : context-path</strong>,  swagger-ui is rendered</p>\n<pre><code>server:\n  port: 8080\n  servlet:\n    context-path: &quot;/${spring.application.api-version}&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14576942,"reputation":597,"user_id":10528552,"display_name":"hamidreza75"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1667028932,"creation_date":1667028564,"answer_id":74243561,"question_id":72317932,"body_markdown":"add this to your configs:\r\n\r\n    @Configuration\r\n    public class WebAppConfig extends WebMvcConfigurationSupport\r\n    {\r\n    \r\n        @Override\r\n        public void addResourceHandlers(ResourceHandlerRegistry registry)\r\n        {\r\n            registry.addResourceHandler(&quot;/swagger-ui/**&quot;)\r\n            .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/swagger-ui/4.14.3/&quot;);\r\n        }\r\nsee [source](https://github.com/springdoc/springdoc-openapi/issues/361#issuecomment-603976945)\r\nand [static-resources](https://www.baeldung.com/spring-mvc-static-resources)\r\n\r\n\r\n","title":"Spring springdoc-openapi : swagger-ui/index.html cannot be found status=404","body":"<p>add this to your configs:</p>\n<pre><code>@Configuration\npublic class WebAppConfig extends WebMvcConfigurationSupport\n{\n\n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry registry)\n    {\n        registry.addResourceHandler(&quot;/swagger-ui/**&quot;)\n        .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/swagger-ui/4.14.3/&quot;);\n    }\n</code></pre>\n<p>see <a href=\"https://github.com/springdoc/springdoc-openapi/issues/361#issuecomment-603976945\" rel=\"nofollow noreferrer\">source</a>\nand <a href=\"https://www.baeldung.com/spring-mvc-static-resources\" rel=\"nofollow noreferrer\">static-resources</a></p>\n"},{"tags":[],"owner":{"account_id":15296673,"reputation":305,"user_id":11036516,"display_name":"Vikas s kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694462981,"creation_date":1694462981,"answer_id":77084528,"question_id":72317932,"body_markdown":"If you are using open API with spring 3. It will give 404 error. Hence use the   **springdoc-openapi-starter-webmvc-ui** dependency. \r\nLater you can use the URL&#39;s\r\n\r\n - http://localhost:8080/v3/api-docs\r\n   \r\n - http://localhost:8080/swagger-ui/index.html\r\n\r\n\r\n\r\nEg\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"Spring springdoc-openapi : swagger-ui/index.html cannot be found status=404","body":"<p>If you are using open API with spring 3. It will give 404 error. Hence use the   <strong>springdoc-openapi-starter-webmvc-ui</strong> dependency.\nLater you can use the URL's</p>\n<ul>\n<li><p>http://localhost:8080/v3/api-docs</p>\n</li>\n<li><p>http://localhost:8080/swagger-ui/index.html</p>\n</li>\n</ul>\n<p>Eg</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n        &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n        &lt;version&gt;2.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3207135,"reputation":1418,"user_id":2707983,"accept_rate":50,"display_name":"Matthieu Saleta"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697623055,"creation_date":1697623055,"answer_id":77315272,"question_id":72317932,"body_markdown":"To share my experience because I have just spend more than 1 day to resolve a similar problem.\r\n\r\nThis can happen if the project contains a configuration class extending `WebMvcConfigurationSupport`.\r\n\r\nTo be more precise : \r\n - The `/v3/api-docs` route was working\r\n - The `/swagger-ui/index.html` was throwing a 404 error\r\n\r\nAs I said, we had inside the project a configuration class extending `WebMvcConfigurationSupport` in order to automatically convert lowercase `String` inside the request to an uppercase `Enumeration` ([https://stackoverflow.com/questions/71527893/how-to-make-enum-parameter-lowercase-in-springboot-swagger][1])\r\n\r\nIn this case, Spring creates first a bean extending `WebMvcConfigurationSupport` where the `addResourceHandlers(ResourceHandlerRegistry)` method does nothing (Empty method).\r\n\r\nWhen this configuration class is not present, Spring creates a bean `DelegatingWebMvcConfiguration` extending `WebMvcConfigurationSupport` but this class overrides the `addResourceHandlers(ResourceHandlerRegistry)` method to register all the `WebMvcConfigurer` beans to the `ResourceHandlerRegistry`.\r\n\r\nSo it adds the `SwaggerWebMvcConfigurer` that manages the route `swagger-ui/index.html`.\r\n\r\n  [1]: https://stackoverflow.com/questions/71527893/how-to-make-enum-parameter-lowercase-in-springboot-swagger","title":"Spring springdoc-openapi : swagger-ui/index.html cannot be found status=404","body":"<p>To share my experience because I have just spend more than 1 day to resolve a similar problem.</p>\n<p>This can happen if the project contains a configuration class extending <code>WebMvcConfigurationSupport</code>.</p>\n<p>To be more precise :</p>\n<ul>\n<li>The <code>/v3/api-docs</code> route was working</li>\n<li>The <code>/swagger-ui/index.html</code> was throwing a 404 error</li>\n</ul>\n<p>As I said, we had inside the project a configuration class extending <code>WebMvcConfigurationSupport</code> in order to automatically convert lowercase <code>String</code> inside the request to an uppercase <code>Enumeration</code> (<a href=\"https://stackoverflow.com/questions/71527893/how-to-make-enum-parameter-lowercase-in-springboot-swagger\">How to make enum parameter lowercase in SpringBoot/Swagger?</a>)</p>\n<p>In this case, Spring creates first a bean extending <code>WebMvcConfigurationSupport</code> where the <code>addResourceHandlers(ResourceHandlerRegistry)</code> method does nothing (Empty method).</p>\n<p>When this configuration class is not present, Spring creates a bean <code>DelegatingWebMvcConfiguration</code> extending <code>WebMvcConfigurationSupport</code> but this class overrides the <code>addResourceHandlers(ResourceHandlerRegistry)</code> method to register all the <code>WebMvcConfigurer</code> beans to the <code>ResourceHandlerRegistry</code>.</p>\n<p>So it adds the <code>SwaggerWebMvcConfigurer</code> that manages the route <code>swagger-ui/index.html</code>.</p>\n"}],"owner":{"account_id":2303324,"reputation":915,"user_id":2023141,"accept_rate":20,"display_name":"user2023141"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17431,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72319076,"answer_count":5,"score":2,"last_activity_date":1697623055,"creation_date":1653044851,"question_id":72317932,"body_markdown":"I&#39;ve a spring boot application (2.5.6) with a dependency on springdoc-openapi.\r\nHowever, launching swagger-ui (http://localhost:8080/v1/swagger-ui/index.html) doesn&#39;t work.\r\nThe debug logs are indicating that index.html is not present.\r\nWhat could be the reason that index.html is not found ?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n        &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.8&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\napplication.yaml\r\n\r\n    springdoc:\r\n      swagger-ui:\r\n        tagsSorter: alpha\r\n        operations-sorter: alpha\r\n        doc-expansion: none\r\n        disable-swagger-default-url: true\r\n    \r\n    logging:\r\n      level:\r\n        root: DEBUG\r\n    \r\n    server:\r\n      port: 8080\r\n    \r\n    spring:\r\n      application:\r\n        name: fe-applic-app\r\n        api-version: &quot;v1&quot;\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YsAx0.png\r\n  [2]: https://i.stack.imgur.com/Pe38S.png","title":"Spring springdoc-openapi : swagger-ui/index.html cannot be found status=404","body":"<p>I've a spring boot application (2.5.6) with a dependency on springdoc-openapi.\nHowever, launching swagger-ui (http://localhost:8080/v1/swagger-ui/index.html) doesn't work.\nThe debug logs are indicating that index.html is not present.\nWhat could be the reason that index.html is not found ?</p>\n<p><a href=\"https://i.stack.imgur.com/YsAx0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YsAx0.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n    &lt;version&gt;1.6.8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>application.yaml</p>\n<pre><code>springdoc:\n  swagger-ui:\n    tagsSorter: alpha\n    operations-sorter: alpha\n    doc-expansion: none\n    disable-swagger-default-url: true\n\nlogging:\n  level:\n    root: DEBUG\n\nserver:\n  port: 8080\n\nspring:\n  application:\n    name: fe-applic-app\n    api-version: &quot;v1&quot;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Pe38S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pe38S.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","copy","apache-commons-beanutils"],"answers":[{"tags":[],"owner":{"account_id":1319573,"reputation":21851,"user_id":1265660,"accept_rate":75,"display_name":"Masudul"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1381475038,"creation_date":1381475038,"answer_id":19312129,"question_id":19312055,"body_markdown":"[BeanUtils.copyProperties][1], It only copy the property of same name. So, In case of ArrayList you can&#39;t do that.\r\n\r\nAccording to docs:\r\n\r\n&gt;  Copy property values from the origin bean to the destination bean for\r\n&gt; all cases where the property names are the same.\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-beanutils/apidocs/org/apache/commons/beanutils/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object%29","title":"BeanUtils copyProperties to copy Arraylist","body":"<p><a href=\"http://commons.apache.org/proper/commons-beanutils/apidocs/org/apache/commons/beanutils/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object%29\" rel=\"nofollow\">BeanUtils.copyProperties</a>, It only copy the property of same name. So, In case of ArrayList you can't do that.</p>\n\n<p>According to docs:</p>\n\n<blockquote>\n  <p>Copy property values from the origin bean to the destination bean for\n  all cases where the property names are the same.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":2724204,"reputation":1507,"user_id":2349750,"accept_rate":53,"display_name":"Monicka Akilan"},"score":0,"creation_date":1381476642,"post_id":19312201,"comment_id":28603377,"body_markdown":"Ya now i did it like this But i want to know to copy fully at once thanks","body":"Ya now i did it like this But i want to know to copy fully at once thanks"},{"owner":{"account_id":2302601,"reputation":896,"user_id":2022579,"display_name":"Pedro Bacchini"},"score":0,"creation_date":1580143935,"post_id":19312201,"comment_id":105992855,"body_markdown":"Don&#39;t forget that copyProperties only copies properties that have a public set method it does not use reflection.","body":"Don&#39;t forget that copyProperties only copies properties that have a public set method it does not use reflection."}],"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":2,"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1381475288,"creation_date":1381475288,"answer_id":19312201,"question_id":19312055,"body_markdown":"If you have two lists of equals size then you can do the following\r\n\r\n    for (int i = 0; i &lt; fromBeanList.size(); i++) {\r\n         BeanUtils.copyProperties(toBeanList.get(i), fromBeanList.get(i));\r\n    }","title":"BeanUtils copyProperties to copy Arraylist","body":"<p>If you have two lists of equals size then you can do the following</p>\n\n<pre><code>for (int i = 0; i &lt; fromBeanList.size(); i++) {\n     BeanUtils.copyProperties(toBeanList.get(i), fromBeanList.get(i));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2830385,"reputation":735,"user_id":2432086,"accept_rate":80,"display_name":"Ashish"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381475447,"creation_date":1381475447,"answer_id":19312254,"question_id":19312055,"body_markdown":"you can try something like this \r\n\r\n    for(int i=0; i&lt;fromBeanList.size(); i++){\r\n      BeanUtils.copyProperties(toBeanList.get(i) , fromBeanList.get(i) );\r\n    }\r\n\r\nHope this helps..\r\n\r\nOops it is already explained by someone now..\r\n\r\nanyways try it.","title":"BeanUtils copyProperties to copy Arraylist","body":"<p>you can try something like this </p>\n\n<pre><code>for(int i=0; i&lt;fromBeanList.size(); i++){\n  BeanUtils.copyProperties(toBeanList.get(i) , fromBeanList.get(i) );\n}\n</code></pre>\n\n<p>Hope this helps..</p>\n\n<p>Oops it is already explained by someone now..</p>\n\n<p>anyways try it.</p>\n"},{"comments":[{"owner":{"account_id":895852,"reputation":2941,"user_id":933162,"accept_rate":91,"display_name":"Md Faisal"},"score":2,"creation_date":1490532640,"post_id":30236048,"comment_id":73143595,"body_markdown":"This one is actually the correct implementation rather than the accepted answer.!","body":"This one is actually the correct implementation rather than the accepted answer.!"}],"tags":[],"owner":{"account_id":6306352,"reputation":751,"user_id":4899324,"display_name":"David Gonzalez"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1431602369,"creation_date":1431602369,"answer_id":30236048,"question_id":19312055,"body_markdown":"If you have a list origin with data and list destination empty, the solution is:\r\n\r\n        List&lt;Object&gt; listOrigin (with data)\r\n        List&lt;Object&gt; listDestination= new ArrayList&lt;Object&gt;(); \r\n\r\n         for (Object source: listOrigin ) {\r\n            Object target= new Object();\r\n            BeanUtils.copyProperties(source , target);\r\n            listDestination.add(target);\r\n         }\r\n","title":"BeanUtils copyProperties to copy Arraylist","body":"<p>If you have a list origin with data and list destination empty, the solution is:</p>\n\n<pre><code>    List&lt;Object&gt; listOrigin (with data)\n    List&lt;Object&gt; listDestination= new ArrayList&lt;Object&gt;(); \n\n     for (Object source: listOrigin ) {\n        Object target= new Object();\n        BeanUtils.copyProperties(source , target);\n        listDestination.add(target);\n     }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8511683,"reputation":121,"user_id":6381530,"display_name":"codemonkey"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1465288008,"creation_date":1465286641,"answer_id":37673774,"question_id":19312055,"body_markdown":"What you can do is to write your own generic copy class. \r\n\r\n\r\n    class CopyVector&lt;S, T&gt; {\r\n        private Class&lt;T&gt; targetType;\r\n        CopyVector(Class&lt;T&gt; targetType) {\r\n            this.targetType = targetType;\r\n        }\r\n        Vector&lt;T&gt; copy(Vector&lt;S&gt; src) {\r\n            Vector&lt;T&gt; target = new Vector&lt;T&gt;();\r\n            for ( S s : src ) {\r\n                T t = BeanUtils.instantiateClass(targetType);\r\n                BeanUtils.copyProperties(s, t);\r\n                target.add(t);\r\n            }\r\n            return target;\r\n        }\r\n    }\r\n\r\nA step further would also be to make the List type generic - this assumes you want to copy Vectors.","title":"BeanUtils copyProperties to copy Arraylist","body":"<p>What you can do is to write your own generic copy class. </p>\n\n<pre><code>class CopyVector&lt;S, T&gt; {\n    private Class&lt;T&gt; targetType;\n    CopyVector(Class&lt;T&gt; targetType) {\n        this.targetType = targetType;\n    }\n    Vector&lt;T&gt; copy(Vector&lt;S&gt; src) {\n        Vector&lt;T&gt; target = new Vector&lt;T&gt;();\n        for ( S s : src ) {\n            T t = BeanUtils.instantiateClass(targetType);\n            BeanUtils.copyProperties(s, t);\n            target.add(t);\n        }\n        return target;\n    }\n}\n</code></pre>\n\n<p>A step further would also be to make the List type generic - this assumes you want to copy Vectors.</p>\n"},{"tags":[],"owner":{"account_id":4124176,"reputation":1017,"user_id":3383771,"display_name":"blueDexter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580829811,"creation_date":1580829811,"answer_id":60060510,"question_id":19312055,"body_markdown":"In spring BeanUtils.copyProperties, arguments are just opposite than apache commons lib\r\n\r\n    for(FromBean fromBean: fromBeanList) {\r\n        if(fromBean != null) {\r\n            ToBean toBean = new ToBean();\r\n            org.springframework.beans.BeanUtils.copyProperties(fromBean, toBean);\r\n            toBeanList.add(toBean);\r\n        }\r\n    }","title":"BeanUtils copyProperties to copy Arraylist","body":"<p>In spring BeanUtils.copyProperties, arguments are just opposite than apache commons lib</p>\n\n<pre><code>for(FromBean fromBean: fromBeanList) {\n    if(fromBean != null) {\n        ToBean toBean = new ToBean();\n        org.springframework.beans.BeanUtils.copyProperties(fromBean, toBean);\n        toBeanList.add(toBean);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7498641,"reputation":2237,"user_id":5698098,"display_name":"Ivo Mori"},"score":1,"creation_date":1596113171,"post_id":63173089,"comment_id":111711160,"body_markdown":"Welcome to Stack Overflow. I suggest you separate code and explanation into separate parts in your answer. Also format the code, refer to the [help page on Markdown](https://stackoverflow.com/editing-help) on how to do it. Possibly you also want to refer to  [How do I write a good answer?](https://stackoverflow.com/help/how-to-answer).","body":"Welcome to Stack Overflow. I suggest you separate code and explanation into separate parts in your answer. Also format the code, refer to the <a href=\"https://stackoverflow.com/editing-help\">help page on Markdown</a> on how to do it. Possibly you also want to refer to  <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer?</a>."}],"tags":[],"owner":{"account_id":19192477,"reputation":1,"user_id":14021954,"display_name":"martin robin A"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596112650,"creation_date":1596111793,"answer_id":63173089,"question_id":19312055,"body_markdown":"public List&lt;&quot;ToBean&quot;&gt; getAll() \r\n{\r\n&lt;br&gt;&lt;b&gt;create an empty list of the Target folder&lt;/b&gt;\r\n\r\nList&lt;&#39;ToBean&gt;&#39; toBeanList = new ArrayList&lt;&#39;ToBean&#39;&gt;();\r\n&lt;br&gt;&lt;b&gt;Create a empty object of Target folder&lt;/b&gt;\r\n&lt;br&gt;ToBean toBean = new ToBean();\r\n&lt;br&gt;List&lt;&#39;FromBean &gt; fromBeanList = beanRepository.findAll();\r\n&lt;br&gt;//Iterate Src Bean\r\n&lt;br&gt;for(fromBean : fromBeanList)\r\n&lt;br&gt;{\r\n&lt;br&gt;BeanUtils.copyProperties(fromBean , toBean );\r\n&lt;br&gt;toBeanList .add(toBean );\r\n&lt;br&gt;}\r\n&lt;br&gt;return toBeanList ;\r\n}\r\n","title":"BeanUtils copyProperties to copy Arraylist","body":"<p>public List&lt;&quot;ToBean&quot;&gt; getAll()\n{\n<br><b>create an empty list of the Target folder</b></p>\n<p>List&lt;'ToBean&gt;' toBeanList = new ArrayList&lt;'ToBean'&gt;();\n<br><b>Create a empty object of Target folder</b>\n<br>ToBean toBean = new ToBean();\n<br>List&lt;'FromBean &gt; fromBeanList = beanRepository.findAll();\n<br>//Iterate Src Bean\n<br>for(fromBean : fromBeanList)\n<br>{\n<br>BeanUtils.copyProperties(fromBean , toBean );\n<br>toBeanList .add(toBean );\n<br>}\n<br>return toBeanList ;\n}</p>\n"},{"tags":[],"owner":{"account_id":20059025,"reputation":1,"user_id":14706143,"display_name":"pattern cutter"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1606308670,"creation_date":1606305319,"answer_id":65004212,"question_id":19312055,"body_markdown":"What i used just now :\r\n\r\n  \r\n\r\n \r\n\r\n         public static List&lt;?\\&gt; copyPropertiesArray(List&lt;?\\&gt; source, List&lt;?\\&gt; destination,Class&lt;?\\&gt; destinationClass) throws CopyPropertiesException {\r\n            \t\t\r\n                      try {\r\n            \t\t\t//the destination size must be the same as the source size and also it must be typed correctly (thus the need for the 3rd argument)\t\t\t\r\n            \t\t\t destination=Collections.nCopies(source.size(),destinationClass.newInstance());\t//initialize the desination list to same size as the source \t\t\r\n            \t\t\t   for (int i = 0; i &lt; source.size(); i++) {\t\t\t\t\r\n            \t\t\t\t  BeanUtils.copyProperties(destination.get(i), source.get(i));\r\n            \t\t\t   }\r\n    \r\n            \t\t\t   return destination;\r\n    \r\n            \t\t    } catch (IllegalAccessException | InvocationTargetException | InstantiationException e) {\r\n            \t\t\t\r\n                           throw new Exception(e.getMessage());\r\n        \r\n            \t\t    }\r\n            \t}\r\n\r\n","title":"BeanUtils copyProperties to copy Arraylist","body":"<p>What i used just now :</p>\n<pre><code>     public static List&lt;?\\&gt; copyPropertiesArray(List&lt;?\\&gt; source, List&lt;?\\&gt; destination,Class&lt;?\\&gt; destinationClass) throws CopyPropertiesException {\n                \n                  try {\n                    //the destination size must be the same as the source size and also it must be typed correctly (thus the need for the 3rd argument)         \n                     destination=Collections.nCopies(source.size(),destinationClass.newInstance()); //initialize the desination list to same size as the source         \n                       for (int i = 0; i &lt; source.size(); i++) {                \n                          BeanUtils.copyProperties(destination.get(i), source.get(i));\n                       }\n\n                       return destination;\n\n                    } catch (IllegalAccessException | InvocationTargetException | InstantiationException e) {\n                    \n                       throw new Exception(e.getMessage());\n    \n                    }\n            }\n</code></pre>\n"}],"owner":{"account_id":2724204,"reputation":1507,"user_id":2349750,"accept_rate":53,"display_name":"Monicka Akilan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49034,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":19312201,"answer_count":8,"score":12,"last_activity_date":1697622840,"creation_date":1381474747,"question_id":19312055,"body_markdown":"I know that BeanUtils can copy a single object to other.\r\n    \r\nIs it possible to copy an arraylist.\r\n    \r\n**For example:**\r\n\r\n```\r\nFromBean fromBean = new FromBean(&quot;fromBean&quot;, &quot;fromBeanAProp&quot;, &quot;fromBeanBProp&quot;);\r\nToBean toBean = new ToBean(&quot;toBean&quot;, &quot;toBeanBProp&quot;, &quot;toBeanCProp&quot;);\r\nBeanUtils.copyProperties(fromBean, toBean);\r\n```\r\n\r\n**How to achieve this?**\r\n\r\n```\r\nList&lt;FromBean&gt; fromBeanList = new ArrayList&lt;FromBean&gt;();\r\nList&lt;ToBean&gt; toBeanList = new ArrayList&lt;ToBean&gt;();\r\nBeanUtils.copyProperties(fromBeanList, toBeanList);\r\n```\r\n   \r\n It&#39;s not working for me. Can anyone please help me?\r\n    \r\n   \r\n Thanks in advance.","title":"BeanUtils copyProperties to copy Arraylist","body":"<p>I know that BeanUtils can copy a single object to other.</p>\n<p>Is it possible to copy an arraylist.</p>\n<p><strong>For example:</strong></p>\n<pre><code>FromBean fromBean = new FromBean(&quot;fromBean&quot;, &quot;fromBeanAProp&quot;, &quot;fromBeanBProp&quot;);\nToBean toBean = new ToBean(&quot;toBean&quot;, &quot;toBeanBProp&quot;, &quot;toBeanCProp&quot;);\nBeanUtils.copyProperties(fromBean, toBean);\n</code></pre>\n<p><strong>How to achieve this?</strong></p>\n<pre><code>List&lt;FromBean&gt; fromBeanList = new ArrayList&lt;FromBean&gt;();\nList&lt;ToBean&gt; toBeanList = new ArrayList&lt;ToBean&gt;();\nBeanUtils.copyProperties(fromBeanList, toBeanList);\n</code></pre>\n<p>It's not working for me. Can anyone please help me?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","multithreading","stack","thread-local"],"comments":[{"owner":{"account_id":1680363,"reputation":7992,"user_id":1544715,"accept_rate":71,"display_name":"Magnus"},"score":1,"creation_date":1468892722,"post_id":38448292,"comment_id":64301998,"body_markdown":"Possible duplicate of [When and how should I use a ThreadLocal variable?](http://stackoverflow.com/questions/817856/when-and-how-should-i-use-a-threadlocal-variable)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/817856/when-and-how-should-i-use-a-threadlocal-variable\">When and how should I use a ThreadLocal variable?</a>"}],"answers":[{"tags":[],"owner":{"account_id":7950684,"reputation":492,"user_id":6001605,"display_name":"Neha Vari"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468917995,"creation_date":1468917995,"answer_id":38453584,"question_id":38448292,"body_markdown":"&gt; ThreadLocal could be best choice in scenarios when state needs to be\r\n&gt; associated with thread e.g. for global variables (if semantic permits)\r\n&gt; because ThreadLocal keeps values of variables confined to a thread; so\r\n&gt; when a thread T runs get on it, thread T gets the value which was set\r\n&gt; by itself not by any other threads.\r\n\r\nfrom [this][1] article.\r\n\r\n\r\n  [1]: http://nvcv22blog.wordpress.com/2016/04/16/thread-safety-with-locking/\r\n\r\nLocal variable can be utilized when variable is inside thread&#39;s class itself and scope is local to each thread. Contrary to this, when variable is outside local scope and exists as part of shared code and semantic permits to keep copy of this variable per thread and not single copy for all threads then ThreadLocal is utilized.","title":"When is ThreadLocal preferred over Local Variables?","body":"<blockquote>\n  <p>ThreadLocal could be best choice in scenarios when state needs to be\n  associated with thread e.g. for global variables (if semantic permits)\n  because ThreadLocal keeps values of variables confined to a thread; so\n  when a thread T runs get on it, thread T gets the value which was set\n  by itself not by any other threads.</p>\n</blockquote>\n\n<p>from <a href=\"http://nvcv22blog.wordpress.com/2016/04/16/thread-safety-with-locking/\" rel=\"nofollow\">this</a> article.</p>\n\n<p>Local variable can be utilized when variable is inside thread's class itself and scope is local to each thread. Contrary to this, when variable is outside local scope and exists as part of shared code and semantic permits to keep copy of this variable per thread and not single copy for all threads then ThreadLocal is utilized.</p>\n"},{"comments":[{"owner":{"account_id":4048546,"reputation":156,"user_id":3329002,"accept_rate":75,"display_name":"user3329002"},"score":0,"creation_date":1469274297,"post_id":38459452,"comment_id":64475178,"body_markdown":"Thanks for the answer james. That perfectly makes sense.","body":"Thanks for the answer james. That perfectly makes sense."}],"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1697622505,"creation_date":1468933408,"answer_id":38459452,"question_id":38448292,"body_markdown":"`ThreadLocal` is *not* an alternative to local variables.  You use `ThreadLocal` for data that have to be `static`, but which must not be shared between threads.\r\n\r\n    static final ThreadLocal&lt;MyFoo&gt; myFoo =\r\n        ThreadLocal.withInitial(() -&gt; new MyFoo());\r\n\r\nIf you have a `ThreadLocal` variable that is not `static`, then you&#39;re either doing something that&#39;s overly complicated, or you&#39;re doing something that&#39;s just plain wrong.\r\n\r\nOn the other hand, if you have any variable that is `static` (whether it is `ThreadLocal` or not), then you should be aware that that&#39;s a design choice that will limit your ability to test and grow the program.","title":"When is ThreadLocal preferred over Local Variables?","body":"<p><code>ThreadLocal</code> is <em>not</em> an alternative to local variables.  You use <code>ThreadLocal</code> for data that have to be <code>static</code>, but which must not be shared between threads.</p>\n<pre><code>static final ThreadLocal&lt;MyFoo&gt; myFoo =\n    ThreadLocal.withInitial(() -&gt; new MyFoo());\n</code></pre>\n<p>If you have a <code>ThreadLocal</code> variable that is not <code>static</code>, then you're either doing something that's overly complicated, or you're doing something that's just plain wrong.</p>\n<p>On the other hand, if you have any variable that is <code>static</code> (whether it is <code>ThreadLocal</code> or not), then you should be aware that that's a design choice that will limit your ability to test and grow the program.</p>\n"},{"comments":[{"owner":{"account_id":7841489,"reputation":447,"user_id":5927843,"display_name":"Venkatesan Muniappan"},"score":0,"creation_date":1646795914,"post_id":38464625,"comment_id":126210541,"body_markdown":"I liked this answer better than the accepted answer.","body":"I liked this answer better than the accepted answer."}],"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1468948250,"creation_date":1468948250,"answer_id":38464625,"question_id":38448292,"body_markdown":"[ThreadLocal][1] was meant for different purpose as per oracle documentation. \r\n\r\nHave a look at intent of this class:\r\n\r\n&gt; This class provides thread-local variables. These variables differ from their normal counterparts in that each thread that accesses one (via its get or set method) has its own, independently initialized copy of the variable. `ThreadLocal` instances are typically private static fields in classes that wish to associate state with a thread (e.g., a user ID or Transaction ID).\r\n\r\nBelow code block generates unique identifiers local to each thread. A thread&#39;s id is assigned the first time it invokes ThreadId.get() and remains unchanged on subsequent calls.\r\n\r\n     import java.util.concurrent.atomic.AtomicInteger;\r\n    \r\n     public class ThreadId {\r\n         // Atomic integer containing the next thread ID to be assigned\r\n         private static final AtomicInteger nextId = new AtomicInteger(0);\r\n    \r\n         // Thread local variable containing each thread&#39;s ID\r\n         private static final ThreadLocal&lt;Integer&gt; threadId =\r\n             new ThreadLocal&lt;Integer&gt;() {\r\n                 @Override protected Integer initialValue() {\r\n                     return nextId.getAndIncrement();\r\n             }\r\n         };\r\n    \r\n         // Returns the current thread&#39;s unique ID, assigning it if necessary\r\n         public static int get() {\r\n             return threadId.get();\r\n         }\r\n     }\r\n\r\nComing back to your query:\r\n\r\n&gt; When we need to get a variable specific to a thread, can&#39;t we just declare that variable as a local variable inside a method? Because every thread has its own stack and thus it gets its own copy of variables. Am I missing something here?\r\n\r\nYes. You are missing something here. \r\n\r\nThe scope of variable , which was declared inside a method ends with the method life cycle. \r\n\r\nIn case of ThreadLocal varaibles, each thread holds an implicit reference to its copy of a thread-local variable as long as the thread is alive and the `ThreadLocal` instance is accessible. You can re-enter the thread multiple times in it&#39;s life cycle and still you can retain the variable. \r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/ThreadLocal.html\r\n\r\n","title":"When is ThreadLocal preferred over Local Variables?","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ThreadLocal.html\" rel=\"nofollow\">ThreadLocal</a> was meant for different purpose as per oracle documentation. </p>\n\n<p>Have a look at intent of this class:</p>\n\n<blockquote>\n  <p>This class provides thread-local variables. These variables differ from their normal counterparts in that each thread that accesses one (via its get or set method) has its own, independently initialized copy of the variable. <code>ThreadLocal</code> instances are typically private static fields in classes that wish to associate state with a thread (e.g., a user ID or Transaction ID).</p>\n</blockquote>\n\n<p>Below code block generates unique identifiers local to each thread. A thread's id is assigned the first time it invokes ThreadId.get() and remains unchanged on subsequent calls.</p>\n\n<pre><code> import java.util.concurrent.atomic.AtomicInteger;\n\n public class ThreadId {\n     // Atomic integer containing the next thread ID to be assigned\n     private static final AtomicInteger nextId = new AtomicInteger(0);\n\n     // Thread local variable containing each thread's ID\n     private static final ThreadLocal&lt;Integer&gt; threadId =\n         new ThreadLocal&lt;Integer&gt;() {\n             @Override protected Integer initialValue() {\n                 return nextId.getAndIncrement();\n         }\n     };\n\n     // Returns the current thread's unique ID, assigning it if necessary\n     public static int get() {\n         return threadId.get();\n     }\n }\n</code></pre>\n\n<p>Coming back to your query:</p>\n\n<blockquote>\n  <p>When we need to get a variable specific to a thread, can't we just declare that variable as a local variable inside a method? Because every thread has its own stack and thus it gets its own copy of variables. Am I missing something here?</p>\n</blockquote>\n\n<p>Yes. You are missing something here. </p>\n\n<p>The scope of variable , which was declared inside a method ends with the method life cycle. </p>\n\n<p>In case of ThreadLocal varaibles, each thread holds an implicit reference to its copy of a thread-local variable as long as the thread is alive and the <code>ThreadLocal</code> instance is accessible. You can re-enter the thread multiple times in it's life cycle and still you can retain the variable. </p>\n"}],"owner":{"account_id":4048546,"reputation":156,"user_id":3329002,"accept_rate":75,"display_name":"user3329002"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1938,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":38459452,"answer_count":3,"score":7,"last_activity_date":1697622505,"creation_date":1468892342,"question_id":38448292,"body_markdown":"`ThreadLocal` in Java says that:\r\n\r\n&gt; The ThreadLocal class in Java enables you to create variables that can only be read and written by the same thread. Thus, even if two threads are executing the same code, and the code has a reference to a ThreadLocal variable, then the two threads cannot see each other&#39;s ThreadLocal variables.\r\n\r\nMy question is: When we need to get a variable specific to a thread, can&#39;t we just declare that variable as a local variable inside a method? Because every thread has its own stack and thus it gets its own copy of variables. Am I missing something here?","title":"When is ThreadLocal preferred over Local Variables?","body":"<p><code>ThreadLocal</code> in Java says that:</p>\n\n<blockquote>\n  <p>The ThreadLocal class in Java enables you to create variables that can only be read and written by the same thread. Thus, even if two threads are executing the same code, and the code has a reference to a ThreadLocal variable, then the two threads cannot see each other's ThreadLocal variables.</p>\n</blockquote>\n\n<p>My question is: When we need to get a variable specific to a thread, can't we just declare that variable as a local variable inside a method? Because every thread has its own stack and thus it gets its own copy of variables. Am I missing something here?</p>\n"},{"tags":["java","json","java-8","spring-boot","java-time"],"answers":[{"comments":[{"owner":{"account_id":410277,"reputation":24594,"user_id":782034,"accept_rate":72,"display_name":"Nick Grealy"},"score":34,"creation_date":1467099620,"post_id":29959842,"comment_id":63577590,"body_markdown":"Probably worth including the following annotation - `@JsonSerialize(using = LocalDateTimeSerializer.class)`...","body":"Probably worth including the following annotation - <code>@JsonSerialize(using = LocalDateTimeSerializer.class)</code>..."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":4,"creation_date":1496733609,"post_id":29959842,"comment_id":75767401,"body_markdown":"Probably better to just use an `application.properties` entry, as suggested by @patelb answer.","body":"Probably better to just use an <code>application.properties</code> entry, as suggested by @patelb answer."},{"owner":{"account_id":3231675,"reputation":933,"user_id":2726783,"display_name":"Mykhaylo Kopytonenko"},"score":0,"creation_date":1509546693,"post_id":29959842,"comment_id":81061557,"body_markdown":"Not working. But patelib&#39;s answer just works out of the box!","body":"Not working. But patelib&#39;s answer just works out of the box!"},{"owner":{"account_id":140854,"reputation":1593,"user_id":347455,"accept_rate":100,"display_name":"pennstatephil"},"score":0,"creation_date":1520367060,"post_id":29959842,"comment_id":85283510,"body_markdown":"As a heads up, ours needed the `@JsonSerialize` annotation Nick mentioned to get it working.","body":"As a heads up, ours needed the <code>@JsonSerialize</code> annotation Nick mentioned to get it working."},{"owner":{"account_id":4682835,"reputation":1519,"user_id":3791111,"accept_rate":0,"display_name":"user3791111"},"score":1,"creation_date":1601717622,"post_id":29959842,"comment_id":113496746,"body_markdown":"In my case this worked: `@JsonSerialize(using = LocalDateSerializer.class)` and `@JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)`, no new dependencies and properties.","body":"In my case this worked: <code>@JsonSerialize(using = LocalDateSerializer.class)</code> and <code>@JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)</code>, no new dependencies and properties."},{"owner":{"account_id":4688180,"reputation":2484,"user_id":3795043,"accept_rate":90,"display_name":"findusl"},"score":0,"creation_date":1608037993,"post_id":29959842,"comment_id":115454797,"body_markdown":"The link in the update part is not working","body":"The link in the update part is not working"},{"owner":{"account_id":12114036,"reputation":471,"user_id":9950567,"display_name":"Sham Fiorin"},"score":0,"creation_date":1654912290,"post_id":29959842,"comment_id":128212170,"body_markdown":"This version did&#39;t solve for me. needed to use `implementation &#39;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13.3&#39;`","body":"This version did&#39;t solve for me. needed to use <code>implementation &#39;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13&zwnj;&#8203;.3&#39;</code>"},{"owner":{"account_id":2299345,"reputation":7208,"user_id":2019993,"accept_rate":83,"display_name":"betteroutthanin"},"score":0,"creation_date":1660814008,"post_id":29959842,"comment_id":129623349,"body_markdown":"`Spring Boot 2.x doesn&#39;t require this configuration anymore`, this is not true, you still need it.","body":"<code>Spring Boot 2.x doesn&#39;t require this configuration anymore</code>, this is not true, you still need it."}],"tags":[],"owner":{"account_id":126610,"reputation":13693,"user_id":323221,"accept_rate":76,"display_name":"Erik Pragt"},"comment_count":8,"down_vote_count":2,"up_vote_count":161,"is_accepted":true,"score":159,"last_activity_date":1634685152,"creation_date":1430372496,"answer_id":29959842,"question_id":29956175,"body_markdown":"**update**: Spring Boot 2.x doesn&#39;t require this configuration anymore. I&#39;ve written [a more up to date answer here][1].\r\n\r\n---\r\n\r\n*(This is the way of doing it before Spring Boot 2.x, it might be useful for people working on an older version of Spring Boot)*\r\n\r\nI finally found [here][2] how to do it. To fix it, I needed another dependency:\r\n\r\n    compile(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.4.0&quot;)\r\n\r\nBy including this dependency, Spring will automatically register a converter for it, as described [here][3]. After that, you need to add the following to application.properties:\r\n\r\n    spring.jackson.serialization.write_dates_as_timestamps=false\r\n\r\nThis will ensure that a correct converter is used, and dates will be printed in the format of `2016-03-16T13:56:39.492`\r\n\r\nAnnotations are only needed in case you want to change the date format.\r\n\r\n\r\n  [1]: https://jworks.io/formatting-a-java-8-localdatetime-in-json-with-spring-boot/\r\n  [2]: http://blog.chris-ritchie.com/2014/09/java-8-localdate-with-jackson-serialize.html\r\n  [3]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p><strong>update</strong>: Spring Boot 2.x doesn't require this configuration anymore. I've written <a href=\"https://jworks.io/formatting-a-java-8-localdatetime-in-json-with-spring-boot/\" rel=\"noreferrer\">a more up to date answer here</a>.</p>\n<hr />\n<p><em>(This is the way of doing it before Spring Boot 2.x, it might be useful for people working on an older version of Spring Boot)</em></p>\n<p>I finally found <a href=\"http://blog.chris-ritchie.com/2014/09/java-8-localdate-with-jackson-serialize.html\" rel=\"noreferrer\">here</a> how to do it. To fix it, I needed another dependency:</p>\n<pre><code>compile(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.4.0&quot;)\n</code></pre>\n<p>By including this dependency, Spring will automatically register a converter for it, as described <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html\" rel=\"noreferrer\">here</a>. After that, you need to add the following to application.properties:</p>\n<pre><code>spring.jackson.serialization.write_dates_as_timestamps=false\n</code></pre>\n<p>This will ensure that a correct converter is used, and dates will be printed in the format of <code>2016-03-16T13:56:39.492</code></p>\n<p>Annotations are only needed in case you want to change the date format.</p>\n"},{"comments":[{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":2,"creation_date":1496733567,"post_id":35031046,"comment_id":75767378,"body_markdown":"Worked out of the box when including the `jackson-datatype-jsr310` dependency. This should be the accepted answer.","body":"Worked out of the box when including the <code>jackson-datatype-jsr310</code> dependency. This should be the accepted answer."},{"owner":{"account_id":966863,"reputation":3437,"user_id":990159,"accept_rate":88,"display_name":"justin"},"score":10,"creation_date":1497698784,"post_id":35031046,"comment_id":76195263,"body_markdown":"As an FYI, the application.properties part can be done through Java config if you&#39;re configuring the ObjectMapper with: `mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);`","body":"As an FYI, the application.properties part can be done through Java config if you&#39;re configuring the ObjectMapper with: <code>mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTA&zwnj;&#8203;MPS, false);</code>"}],"tags":[],"owner":{"account_id":4006264,"reputation":2511,"user_id":3300856,"accept_rate":25,"display_name":"patelb"},"comment_count":2,"down_vote_count":0,"up_vote_count":97,"is_accepted":false,"score":97,"last_activity_date":1594496466,"creation_date":1453879247,"answer_id":35031046,"question_id":29956175,"body_markdown":"I added the `com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.6.1` dependency and started to get the date in the following format:\r\n\r\n    &quot;birthDate&quot;: [\r\n        2016,\r\n        1,\r\n        25,\r\n        21,\r\n        34,\r\n        55\r\n      ]\r\n\r\nwhich is not what I wanted but I was getting closer. I then added the following\r\n\r\n    spring.jackson.serialization.write_dates_as_timestamps=false\r\n\r\nto application.properties file which gave me the correct format that I needed.\r\n\r\n    &quot;birthDate&quot;: &quot;2016-01-25T21:34:55&quot;","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>I added the <code>com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.6.1</code> dependency and started to get the date in the following format:</p>\n<pre><code>&quot;birthDate&quot;: [\n    2016,\n    1,\n    25,\n    21,\n    34,\n    55\n  ]\n</code></pre>\n<p>which is not what I wanted but I was getting closer. I then added the following</p>\n<pre><code>spring.jackson.serialization.write_dates_as_timestamps=false\n</code></pre>\n<p>to application.properties file which gave me the correct format that I needed.</p>\n<pre><code>&quot;birthDate&quot;: &quot;2016-01-25T21:34:55&quot;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":234267,"reputation":2509,"user_id":500312,"accept_rate":65,"display_name":"HairOfTheDog"},"score":2,"creation_date":1522351700,"post_id":37219175,"comment_id":86135499,"body_markdown":"Use this solution with @NickGrealy comment:  Probably worth including the following annotation - `@JsonSerialize(using = LocalDateTimeSerializer.class)`","body":"Use this solution with @NickGrealy comment:  Probably worth including the following annotation - <code>@JsonSerialize(using = LocalDateTimeSerializer.class)</code>"}],"tags":[],"owner":{"account_id":179597,"reputation":2025,"user_id":412366,"accept_rate":59,"display_name":"Matt Broekhuis"},"comment_count":1,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1538921546,"creation_date":1463172828,"answer_id":37219175,"question_id":29956175,"body_markdown":"Here it is in maven, with the property so you can survive between spring boot upgrades\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n            &lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>Here it is in maven, with the property so you can survive between spring boot upgrades</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n        &lt;version&gt;${jackson.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7929172,"reputation":1787,"user_id":6059506,"accept_rate":77,"display_name":"theprogrammer"},"score":4,"creation_date":1581387096,"post_id":44368939,"comment_id":106407346,"body_markdown":"Thanks so much. @JsonFormat is the one that solved it for me. None of the above solutions worked for me for some reason","body":"Thanks so much. @JsonFormat is the one that solved it for me. None of the above solutions worked for me for some reason"},{"owner":{"account_id":1912109,"reputation":757,"user_id":1725647,"accept_rate":73,"display_name":"Sameer"},"score":0,"creation_date":1617550876,"post_id":44368939,"comment_id":118330672,"body_markdown":"Is there a similar config for ObjectWriter as I need to convert the object as string and the store to a DB but the LocalDateTime filed comes out as comma seperated.","body":"Is there a similar config for ObjectWriter as I need to convert the object as string and the store to a DB but the LocalDateTime filed comes out as comma seperated."}],"tags":[],"owner":{"account_id":2063259,"reputation":12403,"user_id":1839360,"display_name":"Yan Khonski"},"comment_count":2,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1496665639,"creation_date":1496665639,"answer_id":44368939,"question_id":29956175,"body_markdown":"1) Dependency\r\n\r\n     compile group: &#39;com.fasterxml.jackson.datatype&#39;, name: &#39;jackson-datatype-jsr310&#39;, version: &#39;2.8.8&#39;\t\r\n\r\n\r\n2) Annotation with date-time format.\r\n\r\n    public class RestObject {\r\n\r\n\t\tprivate LocalDateTime timestamp;\r\n\r\n\t\t@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n\t\tpublic LocalDateTime getTimestamp() {\r\n\t\t\treturn timestamp;\r\n\t\t}\r\n\t}\r\n\r\n3) Spring Config.\r\n\r\n\t@Configuration\r\n\tpublic class JacksonConfig {\r\n\r\n\t\t@Bean\r\n\t\t@Primary\r\n\t\tpublic ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\r\n\t\t\tSystem.out.println(&quot;Config is starting.&quot;);\r\n\t\t\tObjectMapper objectMapper = builder.createXmlMapper(false).build();\r\n\t\t\tobjectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n\t\t\treturn objectMapper;\r\n\t\t}\r\n\t}\r\n\r\n","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>1) Dependency</p>\n\n<pre><code> compile group: 'com.fasterxml.jackson.datatype', name: 'jackson-datatype-jsr310', version: '2.8.8' \n</code></pre>\n\n<p>2) Annotation with date-time format.</p>\n\n<pre><code>public class RestObject {\n\n    private LocalDateTime timestamp;\n\n    @JsonFormat(pattern = \"yyyy-MM-dd HH:mm:ss\")\n    public LocalDateTime getTimestamp() {\n        return timestamp;\n    }\n}\n</code></pre>\n\n<p>3) Spring Config.</p>\n\n<pre><code>@Configuration\npublic class JacksonConfig {\n\n    @Bean\n    @Primary\n    public ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\n        System.out.println(\"Config is starting.\");\n        ObjectMapper objectMapper = builder.createXmlMapper(false).build();\n        objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n        return objectMapper;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7812311,"reputation":2813,"user_id":5908154,"accept_rate":10,"display_name":"Abhishek Galoda"},"score":1,"creation_date":1516296544,"post_id":47987458,"comment_id":83639585,"body_markdown":"Probabaly you need to replace \tval bean to\nSimpleModule bean = new SimpleModule();","body":"Probabaly you need to replace \tval bean to SimpleModule bean = new SimpleModule();"},{"owner":{"account_id":1095612,"reputation":1049,"user_id":1089262,"accept_rate":11,"display_name":"Daniel Dai"},"score":0,"creation_date":1521122878,"post_id":47987458,"comment_id":85604987,"body_markdown":"Is this for Java 9？","body":"Is this for Java 9？"},{"owner":{"account_id":10342618,"reputation":1519,"user_id":7628491,"display_name":"Ida Amit"},"score":0,"creation_date":1521292520,"post_id":47987458,"comment_id":85674178,"body_markdown":"@DanielDai This is in Java 8.","body":"@DanielDai This is in Java 8."},{"owner":{"account_id":10342618,"reputation":1519,"user_id":7628491,"display_name":"Ida Amit"},"score":0,"creation_date":1521292583,"post_id":47987458,"comment_id":85674194,"body_markdown":"@Abhi, `SimpleModule` extends `Module`. `Module` is an abstract. `val bean = new SimpleModule();`  works perfect.","body":"@Abhi, <code>SimpleModule</code> extends <code>Module</code>. <code>Module</code> is an abstract. <code>val bean = new SimpleModule();</code>  works perfect."},{"owner":{"account_id":100338,"reputation":283,"user_id":270542,"accept_rate":50,"display_name":"Moon13"},"score":1,"creation_date":1524558197,"post_id":47987458,"comment_id":87009841,"body_markdown":"for SpringBoot version 1.5.3.RELEASE was not necessary to add the jackson-datatype-jsr310 dependency.","body":"for SpringBoot version 1.5.3.RELEASE was not necessary to add the jackson-datatype-jsr310 dependency."}],"tags":[],"owner":{"account_id":10342618,"reputation":1519,"user_id":7628491,"display_name":"Ida Amit"},"comment_count":5,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1521293019,"creation_date":1514356421,"answer_id":47987458,"question_id":29956175,"body_markdown":"I found another solution which you can convert it to whatever format you want and apply to all LocalDateTime datatype and you do not have to specify @JsonFormat above every LocalDateTime datatype.\r\nfirst add the dependency : \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAdd the following bean : \r\n\r\n    @Configuration\r\n    public class Java8DateTimeConfiguration {\r\n        /**\r\n         * Customizing\r\n         * http://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html\r\n         *\r\n         * Defining a @Bean of type Jackson2ObjectMapperBuilder will allow you to customize both default ObjectMapper and XmlMapper (used in MappingJackson2HttpMessageConverter and MappingJackson2XmlHttpMessageConverter respectively).\r\n         */\r\n        @Bean\r\n        public Module jsonMapperJava8DateTimeModule() {\r\n            val bean = new SimpleModule();\r\n    \r\n            bean.addDeserializer (ZonedDateTime.class, new JsonDeserializer&lt;ZonedDateTime&gt;() {\r\n                @Override\r\n                public ZonedDateTime deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {\r\n                    return ZonedDateTime.parse(jsonParser.getValueAsString(), DateTimeFormatter.ISO_ZONED_DATE_TIME);\r\n                }\r\n            });\r\n    \r\n            bean.addDeserializer(LocalDateTime.class, new JsonDeserializer&lt;LocalDateTime&gt;() {\r\n                @Override\r\n                public LocalDateTime deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {\r\n                    return LocalDateTime.parse(jsonParser.getValueAsString(), DateTimeFormatter.ISO_LOCAL_DATE_TIME);\r\n                }\r\n            });\r\n    \r\n            bean.addSerializer(ZonedDateTime.class, new JsonSerializer&lt;ZonedDateTime&gt;() {\r\n                @Override\r\n                public void serialize(\r\n                        ZonedDateTime zonedDateTime, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)\r\n                        throws IOException {\r\n                    jsonGenerator.writeString(DateTimeFormatter.ISO_ZONED_DATE_TIME.format(zonedDateTime));\r\n                }\r\n            });\r\n    \r\n            bean.addSerializer(LocalDateTime.class, new JsonSerializer&lt;LocalDateTime&gt;() {\r\n                @Override\r\n                public void serialize(\r\n                        LocalDateTime localDateTime, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)\r\n                        throws IOException {\r\n                    jsonGenerator.writeString(DateTimeFormatter.ISO_LOCAL_DATE_TIME.format(localDateTime));\r\n                }\r\n            });\r\n    \r\n            return bean;\r\n        }\r\n    }\r\n\r\nin your config file add the following : \r\n\r\n    @Import(Java8DateTimeConfiguration.class)\r\n\r\nThis will serialize and de-serialize all properties LocalDateTime and ZonedDateTime as long as you are using objectMapper created by spring.\r\n\r\nThe format that you got for ZonedDateTime is : &quot;2017-12-27T08:55:17.317+02:00[Asia/Jerusalem]&quot;\r\nfor LocalDateTime is : &quot;2017-12-27T09:05:30.523&quot;","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>I found another solution which you can convert it to whatever format you want and apply to all LocalDateTime datatype and you do not have to specify @JsonFormat above every LocalDateTime datatype.\nfirst add the dependency : </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Add the following bean : </p>\n\n<pre><code>@Configuration\npublic class Java8DateTimeConfiguration {\n    /**\n     * Customizing\n     * http://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html\n     *\n     * Defining a @Bean of type Jackson2ObjectMapperBuilder will allow you to customize both default ObjectMapper and XmlMapper (used in MappingJackson2HttpMessageConverter and MappingJackson2XmlHttpMessageConverter respectively).\n     */\n    @Bean\n    public Module jsonMapperJava8DateTimeModule() {\n        val bean = new SimpleModule();\n\n        bean.addDeserializer (ZonedDateTime.class, new JsonDeserializer&lt;ZonedDateTime&gt;() {\n            @Override\n            public ZonedDateTime deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {\n                return ZonedDateTime.parse(jsonParser.getValueAsString(), DateTimeFormatter.ISO_ZONED_DATE_TIME);\n            }\n        });\n\n        bean.addDeserializer(LocalDateTime.class, new JsonDeserializer&lt;LocalDateTime&gt;() {\n            @Override\n            public LocalDateTime deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {\n                return LocalDateTime.parse(jsonParser.getValueAsString(), DateTimeFormatter.ISO_LOCAL_DATE_TIME);\n            }\n        });\n\n        bean.addSerializer(ZonedDateTime.class, new JsonSerializer&lt;ZonedDateTime&gt;() {\n            @Override\n            public void serialize(\n                    ZonedDateTime zonedDateTime, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)\n                    throws IOException {\n                jsonGenerator.writeString(DateTimeFormatter.ISO_ZONED_DATE_TIME.format(zonedDateTime));\n            }\n        });\n\n        bean.addSerializer(LocalDateTime.class, new JsonSerializer&lt;LocalDateTime&gt;() {\n            @Override\n            public void serialize(\n                    LocalDateTime localDateTime, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)\n                    throws IOException {\n                jsonGenerator.writeString(DateTimeFormatter.ISO_LOCAL_DATE_TIME.format(localDateTime));\n            }\n        });\n\n        return bean;\n    }\n}\n</code></pre>\n\n<p>in your config file add the following : </p>\n\n<pre><code>@Import(Java8DateTimeConfiguration.class)\n</code></pre>\n\n<p>This will serialize and de-serialize all properties LocalDateTime and ZonedDateTime as long as you are using objectMapper created by spring.</p>\n\n<p>The format that you got for ZonedDateTime is : \"2017-12-27T08:55:17.317+02:00[Asia/Jerusalem]\"\nfor LocalDateTime is : \"2017-12-27T09:05:30.523\"</p>\n"},{"tags":[],"owner":{"account_id":13904285,"reputation":61,"user_id":10039093,"display_name":"Manuel Antonio"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1530819539,"creation_date":1530819539,"answer_id":51198743,"question_id":29956175,"body_markdown":"This work fine:\r\n\r\nAdd the dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAdd the annotation:\r\n\r\n    @JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)\r\n\r\nNow, you must get the correct format.\r\n\r\nTo use object mapper, you need register the JavaTime\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n\tmapper.registerModule(new JavaTimeModule());","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>This work fine:</p>\n\n<p>Add the dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Add the annotation:</p>\n\n<pre><code>@JsonFormat(pattern=\"yyyy-MM-dd\")\n</code></pre>\n\n<p>Now, you must get the correct format.</p>\n\n<p>To use object mapper, you need register the JavaTime</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.registerModule(new JavaTimeModule());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6637229,"reputation":21,"user_id":5124042,"display_name":"Ram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538063339,"creation_date":1538056515,"answer_id":52538721,"question_id":29956175,"body_markdown":"`@JsonDeserialize(using= LocalDateDeserializer.class)` does not work for me with the below dependency.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n        &lt;version&gt; 2.9.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI have used the below code converter to deserialize the date into a `java.sql.Date`.\r\n\r\n    import javax.persistence.AttributeConverter;\r\n    import javax.persistence.Converter;\r\n      \r\n     \r\n    @SuppressWarnings(&quot;UnusedDeclaration&quot;)\r\n    @Converter(autoApply = true)\r\n    public class LocalDateConverter implements AttributeConverter&lt;java.time.LocalDate, java.sql.Date&gt; {\r\n      \r\n     \r\n        @Override\r\n        public java.sql.Date convertToDatabaseColumn(java.time.LocalDate attribute) {\r\n            \r\n            return attribute == null ? null : java.sql.Date.valueOf(attribute);\r\n        }\r\n     \r\n        @Override\r\n        public java.time.LocalDate convertToEntityAttribute(java.sql.Date dbData) {\r\n          \r\n            return dbData == null ? null : dbData.toLocalDate();\r\n        }\r\n    }","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p><code>@JsonDeserialize(using= LocalDateDeserializer.class)</code> does not work for me with the below dependency.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n    &lt;version&gt; 2.9.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I have used the below code converter to deserialize the date into a <code>java.sql.Date</code>.</p>\n\n<pre><code>import javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\n\n\n@SuppressWarnings(\"UnusedDeclaration\")\n@Converter(autoApply = true)\npublic class LocalDateConverter implements AttributeConverter&lt;java.time.LocalDate, java.sql.Date&gt; {\n\n\n    @Override\n    public java.sql.Date convertToDatabaseColumn(java.time.LocalDate attribute) {\n\n        return attribute == null ? null : java.sql.Date.valueOf(attribute);\n    }\n\n    @Override\n    public java.time.LocalDate convertToEntityAttribute(java.sql.Date dbData) {\n\n        return dbData == null ? null : dbData.toLocalDate();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":192003,"reputation":30422,"user_id":432903,"accept_rate":64,"display_name":"prayagupa"},"score":3,"creation_date":1557634266,"post_id":52733731,"comment_id":98827982,"body_markdown":"you might want to add imports for `DateTimeFormat` and others.","body":"you might want to add imports for <code>DateTimeFormat</code> and others."},{"owner":{"account_id":1065188,"reputation":680,"user_id":1065953,"display_name":"Martin P."},"score":0,"creation_date":1615926169,"post_id":52733731,"comment_id":117842584,"body_markdown":"Where does the LocalDateTimeDeserializer come from?","body":"Where does the LocalDateTimeDeserializer come from?"},{"owner":{"account_id":14127489,"reputation":371,"user_id":10206298,"display_name":"JWiryo"},"score":0,"creation_date":1615978867,"post_id":52733731,"comment_id":117857419,"body_markdown":"You can check the accepted answer by Erik Pragt, he mentioned he added jackson dependency, that&#39;s where it comes from. Hopefully it answers your question","body":"You can check the accepted answer by Erik Pragt, he mentioned he added jackson dependency, that&#39;s where it comes from. Hopefully it answers your question"},{"owner":{"account_id":17019087,"reputation":736,"user_id":12312156,"display_name":"Faramarz Afzali"},"score":1,"creation_date":1639313301,"post_id":52733731,"comment_id":124312034,"body_markdown":"This solved my problem, thanks.","body":"This solved my problem, thanks."},{"owner":{"account_id":14127489,"reputation":371,"user_id":10206298,"display_name":"JWiryo"},"score":0,"creation_date":1641144503,"post_id":52733731,"comment_id":124727336,"body_markdown":"Glad it helped mate","body":"Glad it helped mate"}],"tags":[],"owner":{"account_id":14127489,"reputation":371,"user_id":10206298,"display_name":"JWiryo"},"comment_count":5,"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1539152111,"creation_date":1539152111,"answer_id":52733731,"question_id":29956175,"body_markdown":"Writing this answer as a reminder for me as well.\r\n\r\nI combined several answers here and in the end mine worked with something like these.\r\n(I am using SpringBoot 1.5.7 and Lombok 1.16.16)\r\n\r\n    @Data\r\n    public Class someClass {\r\n    \r\n       @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)\r\n       @JsonSerialize(using = LocalDateTimeSerializer.class)\r\n       @JsonDeserialize(using = LocalDateTimeDeserializer.class)\r\n       private LocalDateTime someDate;\r\n    \r\n    }\r\n\r\n","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>Writing this answer as a reminder for me as well.</p>\n\n<p>I combined several answers here and in the end mine worked with something like these.\n(I am using SpringBoot 1.5.7 and Lombok 1.16.16)</p>\n\n<pre><code>@Data\npublic Class someClass {\n\n   @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)\n   @JsonSerialize(using = LocalDateTimeSerializer.class)\n   @JsonDeserialize(using = LocalDateTimeDeserializer.class)\n   private LocalDateTime someDate;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5648860,"reputation":9049,"user_id":4470135,"accept_rate":54,"display_name":"yuranos"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1545602467,"creation_date":1545239069,"answer_id":53856021,"question_id":29956175,"body_markdown":"As already mentioned, spring-boot will fetch all you need (for both web and webflux starter).\r\n\r\nBut what&#39;s even better - you don&#39;t need to register any modules yourself.\r\nTake a look [here][1]. Since `@SpringBootApplication` uses `@EnableAutoConfiguration` under the hood, it means `JacksonAutoConfiguration` will be added to the context automatically.\r\nNow, if you look inside `JacksonAutoConfiguration`, you will see:\r\n\r\n\t\tprivate void configureModules(Jackson2ObjectMapperBuilder builder) {\r\n\t\t\tCollection&lt;Module&gt; moduleBeans = getBeans(this.applicationContext,\r\n\t\t\t\t\tModule.class);\r\n\t\t\tbuilder.modulesToInstall(moduleBeans.toArray(new Module[0]));\r\n\t\t}\r\n[This fella][2] will be called in the process of initialization and will fetch all the modules it can find in the classpath.\r\n(I use Spring Boot 2.1)\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/474da80b4dc02090c19dc58acebba760161d597b/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring.factories#L74\r\n  [2]: https://github.com/spring-projects/spring-boot/blob/7be8cd68255b11da776f00e05772eb0e13f33051/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jackson/JacksonAutoConfiguration.java#L346","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>As already mentioned, spring-boot will fetch all you need (for both web and webflux starter).</p>\n\n<p>But what's even better - you don't need to register any modules yourself.\nTake a look <a href=\"https://github.com/spring-projects/spring-boot/blob/474da80b4dc02090c19dc58acebba760161d597b/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring.factories#L74\" rel=\"nofollow noreferrer\">here</a>. Since <code>@SpringBootApplication</code> uses <code>@EnableAutoConfiguration</code> under the hood, it means <code>JacksonAutoConfiguration</code> will be added to the context automatically.\nNow, if you look inside <code>JacksonAutoConfiguration</code>, you will see:</p>\n\n<pre><code>    private void configureModules(Jackson2ObjectMapperBuilder builder) {\n        Collection&lt;Module&gt; moduleBeans = getBeans(this.applicationContext,\n                Module.class);\n        builder.modulesToInstall(moduleBeans.toArray(new Module[0]));\n    }\n</code></pre>\n\n<p><a href=\"https://github.com/spring-projects/spring-boot/blob/7be8cd68255b11da776f00e05772eb0e13f33051/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jackson/JacksonAutoConfiguration.java#L346\" rel=\"nofollow noreferrer\">This fella</a> will be called in the process of initialization and will fetch all the modules it can find in the classpath.\n(I use Spring Boot 2.1)</p>\n"},{"tags":[],"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576826788,"creation_date":1555532615,"answer_id":55735451,"question_id":29956175,"body_markdown":"I am using Springboot 2.0.6 and for some reason, the app yml changes did not work.\r\nAnd also I had more requirements.\r\n\r\nI tried creating ObjectMapper and marking it as Primary but spring boot complained that I already have jacksonObjectMapper as marked Primary!!\r\n\r\nSo this is what I did.\r\nI made changes to the internal mapper.\r\n\r\nMy Serializer and Deserializer are special - they deal with &#39;dd/MM/YYYY&#39;; and while de-serializing - it tries its best to use 3-4 popular format to make sure I have some LocalDate.\r\n\r\n    @Autowired\r\n    ObjectMapper mapper;\r\n    \r\n    @PostConstruct\r\n    public ObjectMapper configureMapper() {\r\n        mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n        mapper.enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);\r\n    \r\n        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n        mapper.configure(SerializationFeature.ORDER_MAP_ENTRIES_BY_KEYS, true);\r\n    \r\n        mapper.configure(MapperFeature.ALLOW_COERCION_OF_SCALARS, true);\r\n        mapper.configure(MapperFeature.SORT_PROPERTIES_ALPHABETICALLY, true);\r\n    \r\n        SimpleModule module = new SimpleModule();\r\n        module.addDeserializer(LocalDate.class, new LocalDateDeserializer());\r\n        module.addSerializer(LocalDate.class, new LocalDateSerializer());\r\n        mapper.registerModule(module);\r\n    \r\n        return mapper;\r\n    }","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>I am using Springboot 2.0.6 and for some reason, the app yml changes did not work.\nAnd also I had more requirements.</p>\n\n<p>I tried creating ObjectMapper and marking it as Primary but spring boot complained that I already have jacksonObjectMapper as marked Primary!!</p>\n\n<p>So this is what I did.\nI made changes to the internal mapper.</p>\n\n<p>My Serializer and Deserializer are special - they deal with 'dd/MM/YYYY'; and while de-serializing - it tries its best to use 3-4 popular format to make sure I have some LocalDate.</p>\n\n<pre><code>@Autowired\nObjectMapper mapper;\n\n@PostConstruct\npublic ObjectMapper configureMapper() {\n    mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\n    mapper.enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);\n\n    mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n    mapper.configure(SerializationFeature.ORDER_MAP_ENTRIES_BY_KEYS, true);\n\n    mapper.configure(MapperFeature.ALLOW_COERCION_OF_SCALARS, true);\n    mapper.configure(MapperFeature.SORT_PROPERTIES_ALPHABETICALLY, true);\n\n    SimpleModule module = new SimpleModule();\n    module.addDeserializer(LocalDate.class, new LocalDateDeserializer());\n    module.addSerializer(LocalDate.class, new LocalDateSerializer());\n    mapper.registerModule(module);\n\n    return mapper;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":126610,"reputation":13693,"user_id":323221,"accept_rate":76,"display_name":"Erik Pragt"},"score":0,"creation_date":1556609748,"post_id":55898053,"comment_id":98486285,"body_markdown":"This answer has been shared before, but then with the correct syntax.","body":"This answer has been shared before, but then with the correct syntax."}],"tags":[],"owner":{"account_id":14099341,"reputation":45,"user_id":10185084,"display_name":"Ashish Dwivedi"},"comment_count":1,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1556520356,"creation_date":1556519400,"answer_id":55898053,"question_id":29956175,"body_markdown":"simply use:\r\n\r\n    @JsonFormat(pattern=&quot;10/04/2019&quot;)\r\n\r\nor you can use pattern as you like for e.g: `(&#39;-&#39; in place of &#39;/&#39;)`","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>simply use:</p>\n\n<pre><code>@JsonFormat(pattern=\"10/04/2019\")\n</code></pre>\n\n<p>or you can use pattern as you like for e.g: <code>('-' in place of '/')</code></p>\n"},{"comments":[{"owner":{"account_id":1358027,"reputation":528,"user_id":1296016,"display_name":"judomu"},"score":7,"creation_date":1588760709,"post_id":60631568,"comment_id":109020359,"body_markdown":"Hint: including `spring-boot-starter-json` is only needed if `spring-boot-starter-web` is missing.","body":"Hint: including <code>spring-boot-starter-json</code> is only needed if <code>spring-boot-starter-web</code> is missing."}],"tags":[],"owner":{"account_id":11016286,"reputation":1993,"user_id":8092044,"accept_rate":80,"display_name":"Tomas Lukac"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1583913915,"creation_date":1583913915,"answer_id":60631568,"question_id":29956175,"body_markdown":"I am using Spring Boot 2.1.8. I have imported \r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-json&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\nwhich includes the **jackson-datatype-jsr310**.\r\n\r\nThen, I had to add these annotations\r\n```java\r\n@JsonSerialize(using = LocalDateTimeSerializer.class)\r\n@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n@JsonProperty(&quot;date&quot;)\r\nLocalDateTime getDate();\r\n```\r\nand it works. The JSON looks like this:\r\n```json\r\n&quot;date&quot;: &quot;2020-03-09 17:55:00&quot;\r\n```","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>I am using Spring Boot 2.1.8. I have imported </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-json&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>which includes the <strong>jackson-datatype-jsr310</strong>.</p>\n\n<p>Then, I had to add these annotations</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@JsonSerialize(using = LocalDateTimeSerializer.class)\n@JsonFormat(pattern = \"yyyy-MM-dd HH:mm:ss\")\n@JsonProperty(\"date\")\nLocalDateTime getDate();\n</code></pre>\n\n<p>and it works. The JSON looks like this:</p>\n\n<pre><code>\"date\": \"2020-03-09 17:55:00\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4058787,"reputation":371,"user_id":3335857,"display_name":"Subash"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1607372010,"creation_date":1607372010,"answer_id":65188697,"question_id":29956175,"body_markdown":"This worked for me. &lt;br&gt;\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonFormat;\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\nimport com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer;\r\nimport com.fasterxml.jackson.datatype.jsr310.ser.LocalDateTimeSerializer;\r\npublic Class someClass {\r\n\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n    @JsonSerialize(using = LocalDateTimeSerializer.class)\r\n    @JsonDeserialize(using = LocalDateTimeDeserializer.class)\r\n    private LocalDateTime sinceDate;\r\n\r\n}\r\n\r\n```","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>This worked for me. <br></p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonFormat;\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\nimport com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer;\nimport com.fasterxml.jackson.datatype.jsr310.ser.LocalDateTimeSerializer;\npublic Class someClass {\n\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n    @JsonSerialize(using = LocalDateTimeSerializer.class)\n    @JsonDeserialize(using = LocalDateTimeDeserializer.class)\n    private LocalDateTime sinceDate;\n\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1770112,"reputation":3541,"user_id":1615100,"accept_rate":25,"display_name":"manoj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619539620,"creation_date":1619539620,"answer_id":67286717,"question_id":29956175,"body_markdown":"Added\r\n\r\n```\r\ngroup: &#39;com.fasterxml.jackson.datatype&#39;, name: &#39;jackson-datatype-jsr310&#39;, version: &#39;2.8.8&#39;\r\n``` \r\n\r\ninto gradle compile block\r\n\r\nand in the `application.yml` file\r\n\r\n``` \r\nspring:\r\n  jackson:\r\n    serialization:\r\n      write_dates_as_timestamps: false\r\n```\r\n\r\n\r\n\r\nif you are using `application.properties` file \r\nadd the following \r\n\r\n```\r\nspring.jackson.serialization.write_dates_as_timestamps=false\r\n```\r\n\r\nin case you want to apply a custom format  you can apply the annotation\r\n\r\n```\r\n    @JsonFormat(pattern = &quot;yyyy-MMMM-dd hh:mm:ss&quot;)\r\n    private LocalDateTime date;\r\n```\r\n\r\nIt started working fine for me\r\n\r\n","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>Added</p>\n<pre><code>group: 'com.fasterxml.jackson.datatype', name: 'jackson-datatype-jsr310', version: '2.8.8'\n</code></pre>\n<p>into gradle compile block</p>\n<p>and in the <code>application.yml</code> file</p>\n<pre><code>spring:\n  jackson:\n    serialization:\n      write_dates_as_timestamps: false\n</code></pre>\n<p>if you are using <code>application.properties</code> file\nadd the following</p>\n<pre><code>spring.jackson.serialization.write_dates_as_timestamps=false\n</code></pre>\n<p>in case you want to apply a custom format  you can apply the annotation</p>\n<pre><code>    @JsonFormat(pattern = &quot;yyyy-MMMM-dd hh:mm:ss&quot;)\n    private LocalDateTime date;\n</code></pre>\n<p>It started working fine for me</p>\n"},{"comments":[{"owner":{"account_id":5448480,"reputation":761,"user_id":4334147,"accept_rate":91,"display_name":"Alex"},"score":0,"creation_date":1657619851,"post_id":67859301,"comment_id":128848349,"body_markdown":"This ```@JsonFormat(pattern=&quot;yyyy-MM-dd HH:mm&quot;)``` does work. And this does not work with  ```yyyy-MM-dd hh:mm```","body":"This <code>@JsonFormat(pattern=&quot;yyyy-MM-dd HH:mm&quot;)</code> does work. And this does not work with  <code>yyyy-MM-dd hh:mm</code>"}],"tags":[],"owner":{"account_id":20153639,"reputation":115,"user_id":14780392,"display_name":"Ruchir Dixit"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1622983652,"creation_date":1622983652,"answer_id":67859301,"question_id":29956175,"body_markdown":"This worked for me.\r\n\r\nI defined *birthDate* field in my DTO as mentioned below:\r\n\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\r\n        private LocalDateTime birthDate;\r\n\r\nAnd in my **request body**, I passed *birthDate* in following format :\r\n \r\n\r\n    {\r\n       &quot;birthDate&quot;: &quot;2021-06-03 00:00:00&quot;\r\n     }\r\n","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>This worked for me.</p>\n<p>I defined <em>birthDate</em> field in my DTO as mentioned below:</p>\n<pre><code>@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)\n    private LocalDateTime birthDate;\n</code></pre>\n<p>And in my <strong>request body</strong>, I passed <em>birthDate</em> in following format :</p>\n<pre><code>{\n   &quot;birthDate&quot;: &quot;2021-06-03 00:00:00&quot;\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6977774,"reputation":41,"user_id":5351925,"display_name":"Ankush Supnar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647420333,"creation_date":1647277718,"answer_id":71471632,"question_id":29956175,"body_markdown":"Following Annotations works for me\r\n\r\n    @JsonSerialize(using = LocalDateSerializer.class) and\r\n    @JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)\r\n\r\n","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>Following Annotations works for me</p>\n<pre><code>@JsonSerialize(using = LocalDateSerializer.class) and\n@JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14425529,"reputation":290,"user_id":10420415,"display_name":"Markus Ridziauskas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697622377,"creation_date":1697622377,"answer_id":77315198,"question_id":29956175,"body_markdown":"If you want to configure it globally without using properties defined in **application.properties** file as noted by other answers, you can provide your own **jackson mapper** and configure date format of it like so:\r\n```java\r\n@Configuration\r\npublic class SpringConfig {\r\n\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {\r\n        return new Jackson2ObjectMapperBuilder()\r\n                .dateFormat(new StdDateFormat());\r\n    }\r\n}\r\n```","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>If you want to configure it globally without using properties defined in <strong>application.properties</strong> file as noted by other answers, you can provide your own <strong>jackson mapper</strong> and configure date format of it like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class SpringConfig {\n\n    @Bean\n    public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {\n        return new Jackson2ObjectMapperBuilder()\n                .dateFormat(new StdDateFormat());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":126610,"reputation":13693,"user_id":323221,"accept_rate":76,"display_name":"Erik Pragt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":297192,"favorite_count":0,"down_vote_count":1,"up_vote_count":152,"accepted_answer_id":29959842,"answer_count":17,"score":151,"last_activity_date":1697622377,"creation_date":1430348884,"question_id":29956175,"body_markdown":"I&#39;m having a small problem with formatting a Java 8 LocalDateTime in my Spring Boot Application. With &#39;normal&#39; dates I have no problem, but the LocalDateTime fields are converted to the following:\r\n\r\n    &quot;startDate&quot; : {\r\n        &quot;year&quot; : 2010,\r\n        &quot;month&quot; : &quot;JANUARY&quot;,\r\n        &quot;dayOfMonth&quot; : 1,\r\n        &quot;dayOfWeek&quot; : &quot;FRIDAY&quot;,\r\n        &quot;dayOfYear&quot; : 1,\r\n        &quot;monthValue&quot; : 1,\r\n        &quot;hour&quot; : 2,\r\n        &quot;minute&quot; : 2,\r\n        &quot;second&quot; : 0,\r\n        &quot;nano&quot; : 0,\r\n        &quot;chronology&quot; : {\r\n          &quot;id&quot; : &quot;ISO&quot;,\r\n          &quot;calendarType&quot; : &quot;iso8601&quot;\r\n        }\r\n      }\r\n\r\nWhile I would like convert it to something like:\r\n\r\n    &quot;startDate&quot;: &quot;2015-01-01&quot;\r\n\r\nMy code looks like this:\r\n\r\n    @JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)\r\n    @DateTimeFormat(iso = DateTimeFormat.ISO.TIME)\r\n    public LocalDateTime getStartDate() {\r\n        return startDate;\r\n    }\r\n\r\nBut either of the above annotations don&#39;t work, the date keeps getting formatted like above. Suggestions welcome!\r\n","title":"JSON Java 8 LocalDateTime format in Spring Boot","body":"<p>I'm having a small problem with formatting a Java 8 LocalDateTime in my Spring Boot Application. With 'normal' dates I have no problem, but the LocalDateTime fields are converted to the following:</p>\n\n<pre><code>\"startDate\" : {\n    \"year\" : 2010,\n    \"month\" : \"JANUARY\",\n    \"dayOfMonth\" : 1,\n    \"dayOfWeek\" : \"FRIDAY\",\n    \"dayOfYear\" : 1,\n    \"monthValue\" : 1,\n    \"hour\" : 2,\n    \"minute\" : 2,\n    \"second\" : 0,\n    \"nano\" : 0,\n    \"chronology\" : {\n      \"id\" : \"ISO\",\n      \"calendarType\" : \"iso8601\"\n    }\n  }\n</code></pre>\n\n<p>While I would like convert it to something like:</p>\n\n<pre><code>\"startDate\": \"2015-01-01\"\n</code></pre>\n\n<p>My code looks like this:</p>\n\n<pre><code>@JsonFormat(pattern=\"yyyy-MM-dd\")\n@DateTimeFormat(iso = DateTimeFormat.ISO.TIME)\npublic LocalDateTime getStartDate() {\n    return startDate;\n}\n</code></pre>\n\n<p>But either of the above annotations don't work, the date keeps getting formatted like above. Suggestions welcome!</p>\n"},{"tags":["java","postgresql","liquibase"],"answers":[{"tags":[],"owner":{"account_id":22864720,"reputation":33,"user_id":17008258,"display_name":"Jake Morgan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697621952,"creation_date":1697621952,"answer_id":77315147,"question_id":77314637,"body_markdown":"Create file my_function.sql and insert:\r\n\r\n    CREATE OR REPLACE FUNCTION getMyJson() RETURNS json AS $$\r\n    SELECT json_build_array(&#39;hex&#39;, &#39;dex&#39;);\r\n    $$ LANGUAGE sql;\r\n\r\nInsert function in DB:\r\n\r\n  \r\n\r\n    &lt;changeSet id=&quot;1000502490000-1&quot; author=&quot;&quot; dbms=&quot;postgresql&quot;&gt;\r\n      &lt;sqlFile path=&quot;.../my_function.sql&quot;\r\n         splitStatements=&quot;false&quot;/&gt;\r\n    &lt;/changeSet&gt;\r\n\r\nUsage:\r\n\r\n    addColumn tableName=&quot;test&quot;&gt;\r\n      &lt;column name=&quot;myJson&quot; type=&quot;json&quot; defaultValueComputed=&quot;getMyJson()&quot;&gt;\r\n        &lt;constraints nullable=&quot;false&quot;/&gt;\r\n      &lt;/column&gt;\r\n    &lt;/addColumn&gt;\r\n","title":"Liquibase defaultValue json","body":"<p>Create file my_function.sql and insert:</p>\n<pre><code>CREATE OR REPLACE FUNCTION getMyJson() RETURNS json AS $$\nSELECT json_build_array('hex', 'dex');\n$$ LANGUAGE sql;\n</code></pre>\n<p>Insert function in DB:</p>\n<pre><code>&lt;changeSet id=&quot;1000502490000-1&quot; author=&quot;&quot; dbms=&quot;postgresql&quot;&gt;\n  &lt;sqlFile path=&quot;.../my_function.sql&quot;\n     splitStatements=&quot;false&quot;/&gt;\n&lt;/changeSet&gt;\n</code></pre>\n<p>Usage:</p>\n<pre><code>addColumn tableName=&quot;test&quot;&gt;\n  &lt;column name=&quot;myJson&quot; type=&quot;json&quot; defaultValueComputed=&quot;getMyJson()&quot;&gt;\n    &lt;constraints nullable=&quot;false&quot;/&gt;\n  &lt;/column&gt;\n&lt;/addColumn&gt;\n</code></pre>\n"}],"owner":{"account_id":22864720,"reputation":33,"user_id":17008258,"display_name":"Jake Morgan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697621952,"creation_date":1697617725,"question_id":77314637,"body_markdown":"How can I add a defaultValue for my json type column?\r\n\r\n    [\r\n       &quot;my_Num&quot;, &quot;my_Hex&quot;\r\n    ]\r\nQuotes that are used in json (&quot;value&quot;) interfere with insertion\r\n\r\nError: Attribute my_Num and my_Hex is not allowed here \r\n\r\n    &lt;changeSet id=&quot;1691141490000-1&quot; author=&quot;&quot;&gt;\r\n    &lt;addColumn tableName=&quot;test&quot;&gt;\r\n      &lt;column name=&quot;modules&quot; type=&quot;json&quot; defaultValue=&quot;[&quot;my_Num&quot;, &quot;my_Hex&quot;]&quot;&gt;\r\n        &lt;constraints nullable=&quot;false&quot;/&gt;\r\n      &lt;/column&gt;\r\n    &lt;/addColumn&gt;\r\n  &lt;/changeSet&gt;","title":"Liquibase defaultValue json","body":"<p>How can I add a defaultValue for my json type column?</p>\n<pre><code>[\n   &quot;my_Num&quot;, &quot;my_Hex&quot;\n]\n</code></pre>\n<p>Quotes that are used in json (&quot;value&quot;) interfere with insertion</p>\n<p>Error: Attribute my_Num and my_Hex is not allowed here</p>\n<pre><code>&lt;changeSet id=&quot;1691141490000-1&quot; author=&quot;&quot;&gt;\n&lt;addColumn tableName=&quot;test&quot;&gt;\n  &lt;column name=&quot;modules&quot; type=&quot;json&quot; defaultValue=&quot;[&quot;my_Num&quot;, &quot;my_Hex&quot;]&quot;&gt;\n    &lt;constraints nullable=&quot;false&quot;/&gt;\n  &lt;/column&gt;\n&lt;/addColumn&gt;\n</code></pre>\n  \n"},{"tags":["java","jsf","resultset"],"answers":[{"comments":[{"owner":{"account_id":29608149,"reputation":15,"user_id":22692074,"display_name":"JJSutton"},"score":0,"creation_date":1697650437,"post_id":77315045,"comment_id":136307831,"body_markdown":"Thank you for this. It solved my problem! I appreciate it.","body":"Thank you for this. It solved my problem! I appreciate it."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697621693,"creation_date":1697620968,"answer_id":77315045,"question_id":77313658,"body_markdown":"Read the [Javadoc of `javax.faces.model.ResultSetDataModel`][1]:\r\n\r\n&gt; public class ResultDataModel extends DataModel&lt;SortedMap&lt;String,Object&gt;&gt;\r\n\r\nSo it is a datamodel for `SortedMap&lt;String, Object&gt;`. \r\n\r\nWhen we drill down into the [Javadoc for `java.util.SortedMap`][2], then we see this:\r\n\r\n&gt; **All Superinterfaces:**  \r\n&gt; Map&lt;K,V&gt;\r\n\r\nIt does thus absolutely not extend from [`HashMap`][3]. That would only give you a `java.lang.ClassCastException`.\r\n\r\nJust use `SortedMap` or `Map` instead:\r\n\r\n```java\r\nMap&lt;String, String&gt; map = (Map&lt;String, String&gt;) product;\r\n```\r\n\r\nOr, better, declare the argument type as-is so that you don&#39;t need an additional line to cast:\r\n\r\n```java\r\npublic void addCart(Map&lt;String, String&gt; product) {\r\n    // ...\r\n}\r\n```\r\n\r\n  [1]: https://jakarta.ee/specifications/platform/8/apidocs/javax/faces/model/resultdatamodel\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/SortedMap.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html","title":"How to cast a javax.faces.model.ResultSetDataModel$ResultSetMap to java.util.HashMap","body":"<p>Read the <a href=\"https://jakarta.ee/specifications/platform/8/apidocs/javax/faces/model/resultdatamodel\" rel=\"nofollow noreferrer\">Javadoc of <code>javax.faces.model.ResultSetDataModel</code></a>:</p>\n<blockquote>\n<p>public class ResultDataModel extends DataModel&lt;SortedMap&lt;String,Object&gt;&gt;</p>\n</blockquote>\n<p>So it is a datamodel for <code>SortedMap&lt;String, Object&gt;</code>.</p>\n<p>When we drill down into the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/SortedMap.html\" rel=\"nofollow noreferrer\">Javadoc for <code>java.util.SortedMap</code></a>, then we see this:</p>\n<blockquote>\n<p><strong>All Superinterfaces:</strong><br />\nMap&lt;K,V&gt;</p>\n</blockquote>\n<p>It does thus absolutely not extend from <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\"><code>HashMap</code></a>. That would only give you a <code>java.lang.ClassCastException</code>.</p>\n<p>Just use <code>SortedMap</code> or <code>Map</code> instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) product;\n</code></pre>\n<p>Or, better, declare the argument type as-is so that you don't need an additional line to cast:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void addCart(Map&lt;String, String&gt; product) {\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":29608149,"reputation":15,"user_id":22692074,"display_name":"JJSutton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77315045,"answer_count":1,"score":0,"last_activity_date":1697621693,"creation_date":1697606678,"question_id":77313658,"body_markdown":"I am currently developing a web application using JSF. When I try to insert a hashmap from the datatable, it gives me an error, however it works when inserting a object into my function. I then try to cast this object into a hashmap, which gives the error.\r\n\r\nHere is my method:\r\n```java\r\n    public void addCart(Object product) {\r\n        System.out.println(&quot;This is a test: &quot; + product);\r\n        HashMap&lt;String, String&gt; map = (HashMap&lt;String, String&gt;) product;\r\n        System.out.println(&quot;This is a test: &quot; + map.entrySet());\r\n    }\r\n```\r\n\r\nHere is the datatable code:\r\n\r\n```xml\r\n            &lt;h:form&gt;\r\n                &lt;h:dataTable value=&quot;#{storeInfo.info}&quot; var=&quot;p&quot; summary=&quot;Product list&quot; border=&quot;0&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot; rowClasses=&quot;&quot; rules=&quot;all&quot; style=&quot;border:solid 1px&quot; class=&quot;tablef table container&quot;&gt;\r\n                    &lt;h:column&gt;\r\n                        &lt;f:facet name=&quot;header&quot;&gt;\r\n                            &lt;h:outputText value=&quot;Product name&quot;/&gt;\r\n                        &lt;/f:facet&gt;\r\n                        &lt;h:outputText value=&quot;#{p.itemName}&quot;/&gt;\r\n                    &lt;/h:column&gt;\r\n                    &lt;h:column&gt;\r\n                        &lt;f:facet name=&quot;header&quot;&gt;\r\n                            &lt;h:outputText value=&quot;Product Description&quot;/&gt;\r\n                        &lt;/f:facet&gt;\r\n                        &lt;h:outputText value=&quot;#{p.itemDesc}&quot;/&gt;\r\n                    &lt;/h:column&gt;\r\n                    &lt;h:column&gt;\r\n                        &lt;f:facet name=&quot;header&quot;&gt;\r\n                            &lt;h:outputText value=&quot;Product Price&quot;/&gt;\r\n                        &lt;/f:facet&gt;\r\n                        &lt;h:outputText value=&quot;#{p.price}&quot;/&gt;\r\n                    &lt;/h:column&gt;\r\n                    &lt;h:column&gt;\r\n                        &lt;f:facet name=&quot;header&quot;&gt;\r\n                            &lt;h:outputText value=&quot;Add To Cart&quot;/&gt;\r\n                        &lt;/f:facet&gt;\r\n                        &lt;h:commandButton action=&quot;#{storeInfo.addCart(p)}&quot; value=&quot;Add Item&quot;/&gt;\r\n                    &lt;/h:column&gt;\r\n                &lt;/h:dataTable&gt;\r\n            &lt;/h:form&gt;\r\n```\r\n\r\nThe data being passed into the datatable is in a resultset.\r\n\r\n\r\n\r\nI have tried different paramater types, the only one that has worked is an object, which im not sure how to then use in order to access the key:values.\r\n\r\nI expected it to take the information and then print it to console.\r\n\r\nThe result is similar to the error that is displayed above.","title":"How to cast a javax.faces.model.ResultSetDataModel$ResultSetMap to java.util.HashMap","body":"<p>I am currently developing a web application using JSF. When I try to insert a hashmap from the datatable, it gives me an error, however it works when inserting a object into my function. I then try to cast this object into a hashmap, which gives the error.</p>\n<p>Here is my method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void addCart(Object product) {\n        System.out.println(&quot;This is a test: &quot; + product);\n        HashMap&lt;String, String&gt; map = (HashMap&lt;String, String&gt;) product;\n        System.out.println(&quot;This is a test: &quot; + map.entrySet());\n    }\n</code></pre>\n<p>Here is the datatable code:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>            &lt;h:form&gt;\n                &lt;h:dataTable value=&quot;#{storeInfo.info}&quot; var=&quot;p&quot; summary=&quot;Product list&quot; border=&quot;0&quot; cellpadding=&quot;2&quot; cellspacing=&quot;0&quot; rowClasses=&quot;&quot; rules=&quot;all&quot; style=&quot;border:solid 1px&quot; class=&quot;tablef table container&quot;&gt;\n                    &lt;h:column&gt;\n                        &lt;f:facet name=&quot;header&quot;&gt;\n                            &lt;h:outputText value=&quot;Product name&quot;/&gt;\n                        &lt;/f:facet&gt;\n                        &lt;h:outputText value=&quot;#{p.itemName}&quot;/&gt;\n                    &lt;/h:column&gt;\n                    &lt;h:column&gt;\n                        &lt;f:facet name=&quot;header&quot;&gt;\n                            &lt;h:outputText value=&quot;Product Description&quot;/&gt;\n                        &lt;/f:facet&gt;\n                        &lt;h:outputText value=&quot;#{p.itemDesc}&quot;/&gt;\n                    &lt;/h:column&gt;\n                    &lt;h:column&gt;\n                        &lt;f:facet name=&quot;header&quot;&gt;\n                            &lt;h:outputText value=&quot;Product Price&quot;/&gt;\n                        &lt;/f:facet&gt;\n                        &lt;h:outputText value=&quot;#{p.price}&quot;/&gt;\n                    &lt;/h:column&gt;\n                    &lt;h:column&gt;\n                        &lt;f:facet name=&quot;header&quot;&gt;\n                            &lt;h:outputText value=&quot;Add To Cart&quot;/&gt;\n                        &lt;/f:facet&gt;\n                        &lt;h:commandButton action=&quot;#{storeInfo.addCart(p)}&quot; value=&quot;Add Item&quot;/&gt;\n                    &lt;/h:column&gt;\n                &lt;/h:dataTable&gt;\n            &lt;/h:form&gt;\n</code></pre>\n<p>The data being passed into the datatable is in a resultset.</p>\n<p>I have tried different paramater types, the only one that has worked is an object, which im not sure how to then use in order to access the key:values.</p>\n<p>I expected it to take the information and then print it to console.</p>\n<p>The result is similar to the error that is displayed above.</p>\n"},{"tags":["java","spring-boot","unirest"],"owner":{"account_id":29698679,"reputation":1,"user_id":22761342,"display_name":"Thierry Ezt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697621247,"creation_date":1697621247,"question_id":77315077,"body_markdown":"I want to send via Unirest.post() method a large list of objects, but receive an error &quot;unirest post client intended to send too large body&quot;.\r\nThe list size is about 40,000 entries and consume about 65Mo of memory. \r\nThe NgInx configuration limit the size to 10Mo and as the size of the list should increase we dont&#39;t want to change the NgInx config.\r\nI&#39;m looking for a way to send the user list splitted in 10Mo batches using Unirest.post() method.\r\n\r\n\r\n\r\nActual code is like this and works fine with user list of about 6Mo\r\n\r\n\r\n\r\n```\r\n    public void foo(List&lt;User&gt; users) {\r\n                RequestBodyEntity requestBody = Unirest.post(String.format(&quot;%s%s&quot;, properties.getApiBaseUrl(), &quot;users&quot;))\r\n                    .header(CONTENT_TYPE, APPLICATION_JSON)\r\n                    .header(SecurityConstants.HTTP_HEADER_PRINCIPAL, properties.getUserName())\r\n                    .header(SecurityConstants.HTTP_HEADER_CREDENTIALS, properties.getPassword())\r\n                    .body(users);\r\n\r\n        try {\r\n            HttpResponse&lt;JsonNode&gt; response = multipartRequestBody.asJson();\r\n            if (response.getStatus() == HttpStatus.OK.value()) {\r\n                LOGGER.info(&quot;ok&quot;);\r\n            } else {\r\n                LOGGER.error(&quot;Unable to send user list : status code: {}, bodyResponse: {}&quot;, response.getStatus(), response.getBody());\r\n                throw new InternalServerErrorException(new UnsupportedOperationException());\r\n            }\r\n        } catch (UnirestException e) {\r\n            LOGGER.error(&quot;Unable to extract user list, e);\r\n            throw new InternalServerErrorException(e);\r\n        }\r\n    }\r\n```","title":"Java Unirest post client intended to send too large body","body":"<p>I want to send via Unirest.post() method a large list of objects, but receive an error &quot;unirest post client intended to send too large body&quot;.\nThe list size is about 40,000 entries and consume about 65Mo of memory.\nThe NgInx configuration limit the size to 10Mo and as the size of the list should increase we dont't want to change the NgInx config.\nI'm looking for a way to send the user list splitted in 10Mo batches using Unirest.post() method.</p>\n<p>Actual code is like this and works fine with user list of about 6Mo</p>\n<pre><code>    public void foo(List&lt;User&gt; users) {\n                RequestBodyEntity requestBody = Unirest.post(String.format(&quot;%s%s&quot;, properties.getApiBaseUrl(), &quot;users&quot;))\n                    .header(CONTENT_TYPE, APPLICATION_JSON)\n                    .header(SecurityConstants.HTTP_HEADER_PRINCIPAL, properties.getUserName())\n                    .header(SecurityConstants.HTTP_HEADER_CREDENTIALS, properties.getPassword())\n                    .body(users);\n\n        try {\n            HttpResponse&lt;JsonNode&gt; response = multipartRequestBody.asJson();\n            if (response.getStatus() == HttpStatus.OK.value()) {\n                LOGGER.info(&quot;ok&quot;);\n            } else {\n                LOGGER.error(&quot;Unable to send user list : status code: {}, bodyResponse: {}&quot;, response.getStatus(), response.getBody());\n                throw new InternalServerErrorException(new UnsupportedOperationException());\n            }\n        } catch (UnirestException e) {\n            LOGGER.error(&quot;Unable to extract user list, e);\n            throw new InternalServerErrorException(e);\n        }\n    }\n</code></pre>\n"},{"tags":["java","list","collections","arraylist"],"answers":[{"comments":[{"owner":{"account_id":25918,"reputation":412,"user_id":67035,"display_name":"Evan"},"score":10,"creation_date":1360025105,"post_id":4228990,"comment_id":20554776,"body_markdown":"This is the Java, object oriented solution.  Perhaps, how it should be done... :)","body":"This is the Java, object oriented solution.  Perhaps, how it should be done... :)"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1697608423,"post_id":4228990,"comment_id":136299530,"body_markdown":"In recent Java versions, use a record: `public record Data(String txtFileName, String imgFileName) { }`. This will provide a constructor, accessors, equals, hashCode, and toString implementations.","body":"In recent Java versions, use a record: <code>public record Data(String txtFileName, String imgFileName) { }</code>. This will provide a constructor, accessors, equals, hashCode, and toString implementations."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1697621117,"post_id":4228990,"comment_id":136301720,"body_markdown":"Yes indeed. They&#39;re available since Java 14 (Mar 2020) as preview feature and since Java 17 (Sep 2021) as standard feature. I updated the answer to catch up the current state of technology.","body":"Yes indeed. They&#39;re available since Java 14 (Mar 2020) as preview feature and since Java 17 (Sep 2021) as standard feature. I updated the answer to catch up the current state of technology."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":3,"down_vote_count":1,"up_vote_count":124,"is_accepted":false,"score":123,"last_activity_date":1697621221,"creation_date":1290197600,"answer_id":4228990,"question_id":4228975,"body_markdown":"Wrap them in a [record][1] so that you can simply end up with a single array or `List` of those objects.\r\n\r\n```java\r\npublic record Data (\r\n    String txtFileName,\r\n    String imgFileName\r\n) {}\r\n```\r\n\r\nUsage example:\r\n\r\n```java\r\nList&lt;Data&gt; list = new ArrayList&lt;Data&gt;();\r\nlist.add(new Data(&quot;H1.txt&quot;, &quot;e1.jpg&quot;));\r\nlist.add(new Data(&quot;H2.txt&quot;, &quot;e2.jpg&quot;));\r\n// ...\r\n\r\nCollections.shuffle(list);\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/language/records.html","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Wrap them in a <a href=\"https://docs.oracle.com/en/java/javase/17/language/records.html\" rel=\"nofollow noreferrer\">record</a> so that you can simply end up with a single array or <code>List</code> of those objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record Data (\n    String txtFileName,\n    String imgFileName\n) {}\n</code></pre>\n<p>Usage example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Data&gt; list = new ArrayList&lt;Data&gt;();\nlist.add(new Data(&quot;H1.txt&quot;, &quot;e1.jpg&quot;));\nlist.add(new Data(&quot;H2.txt&quot;, &quot;e2.jpg&quot;));\n// ...\n\nCollections.shuffle(list);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":2,"up_vote_count":24,"is_accepted":false,"score":22,"last_activity_date":1290197607,"creation_date":1290197607,"answer_id":4228993,"question_id":4228975,"body_markdown":"The simplest approach is to encapsulate the two values together into a type which has both the image and the file. Then build an `ArrayList` of *that* and shuffle it.\r\n\r\nThat improves encapsulation as well, giving you the property that you&#39;ll always have the same number of files as images automatically.\r\n\r\nAn alternative if you *really* don&#39;t like that idea would be to write the shuffle code yourself (there are plenty of examples of a modified [Fisher-Yates shuffle][1] in Java, including several on Stack Overflow I suspect) and just operate on both lists at the same time. But I&#39;d strongly recommend going with the &quot;improve encapsulation&quot; approach.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>The simplest approach is to encapsulate the two values together into a type which has both the image and the file. Then build an <code>ArrayList</code> of <em>that</em> and shuffle it.</p>\n\n<p>That improves encapsulation as well, giving you the property that you'll always have the same number of files as images automatically.</p>\n\n<p>An alternative if you <em>really</em> don't like that idea would be to write the shuffle code yourself (there are plenty of examples of a modified <a href=\"http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"noreferrer\">Fisher-Yates shuffle</a> in Java, including several on Stack Overflow I suspect) and just operate on both lists at the same time. But I'd strongly recommend going with the \"improve encapsulation\" approach.</p>\n"},{"tags":[],"owner":{"account_id":139856,"reputation":77162,"user_id":345717,"accept_rate":81,"display_name":"EboMike"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1290197645,"creation_date":1290197645,"answer_id":4228998,"question_id":4228975,"body_markdown":"Instead of having two arrays of Strings, have one array of a custom class which contains your two strings.","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Instead of having two arrays of Strings, have one array of a custom class which contains your two strings.</p>\n"},{"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1290197647,"creation_date":1290197647,"answer_id":4228999,"question_id":4228975,"body_markdown":"You could do this with maps:\r\n\r\n    Map&lt;String, String&gt; fileToImg:\r\n    List&lt;String&gt; fileList = new ArrayList(fileToImg.keySet());\r\n    Collections.shuffle(fileList);\r\n    for(String item: fileList) {\r\n        fileToImf.get(item);\r\n    }\r\n\r\nThis will iterate through the images in the random order.","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>You could do this with maps:</p>\n\n<pre><code>Map&lt;String, String&gt; fileToImg:\nList&lt;String&gt; fileList = new ArrayList(fileToImg.keySet());\nCollections.shuffle(fileList);\nfor(String item: fileList) {\n    fileToImf.get(item);\n}\n</code></pre>\n\n<p>This will iterate through the images in the random order.</p>\n"},{"tags":[],"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1290197653,"creation_date":1290197653,"answer_id":4229000,"question_id":4228975,"body_markdown":"You can create an array containing the numbers 0 to 5 and shuffle those. Then use the result as a mapping of &quot;oldIndex -&gt; newIndex&quot; and apply this mapping to both your original arrays.","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>You can create an array containing the numbers 0 to 5 and shuffle those. Then use the result as a mapping of \"oldIndex -> newIndex\" and apply this mapping to both your original arrays.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":0,"down_vote_count":2,"up_vote_count":601,"is_accepted":true,"score":599,"last_activity_date":1478290080,"creation_date":1290197655,"answer_id":4229001,"question_id":4228975,"body_markdown":"Use [`Collections.shuffle()`][1] twice, with two `Random` objects initialized with the same seed:\r\n\r\n    long seed = System.nanoTime();\r\n    Collections.shuffle(fileList, new Random(seed));\r\n    Collections.shuffle(imgList, new Random(seed));\r\n\r\nUsing two `Random` objects with the same seed ensures that both lists will be shuffled in exactly the same way.  This allows for two separate collections.\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle(java.util.List,%20java.util.Random)","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Use <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle(java.util.List,%20java.util.Random)\" rel=\"noreferrer\"><code>Collections.shuffle()</code></a> twice, with two <code>Random</code> objects initialized with the same seed:</p>\n\n<pre><code>long seed = System.nanoTime();\nCollections.shuffle(fileList, new Random(seed));\nCollections.shuffle(imgList, new Random(seed));\n</code></pre>\n\n<p>Using two <code>Random</code> objects with the same seed ensures that both lists will be shuffled in exactly the same way.  This allows for two separate collections.</p>\n"},{"tags":[],"owner":{"account_id":48454,"reputation":12964,"user_id":143969,"accept_rate":91,"display_name":"aperkins"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1290197715,"creation_date":1290197715,"answer_id":4229005,"question_id":4228975,"body_markdown":"Not totally sure what you mean by &quot;automatically&quot; - you can create a container object that holds both objects:\r\n\r\npublic class FileImageHolder {\r\n    String fileName;\r\n    String imageName;\r\n    //TODO: insert stuff here\r\n}\r\n\r\nAnd then put that in an array list and randomize that array list.\r\n\r\nOtherwise, you would need to keep track of where each element moved in one list, and move it in the other one as well.","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Not totally sure what you mean by \"automatically\" - you can create a container object that holds both objects:</p>\n\n<p>public class FileImageHolder {\n    String fileName;\n    String imageName;\n    //TODO: insert stuff here\n}</p>\n\n<p>And then put that in an array list and randomize that array list.</p>\n\n<p>Otherwise, you would need to keep track of where each element moved in one list, and move it in the other one as well.</p>\n"},{"tags":[],"owner":{"account_id":241682,"reputation":18477,"user_id":512652,"accept_rate":84,"display_name":"ajwood"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1290198267,"creation_date":1290198267,"answer_id":4229074,"question_id":4228975,"body_markdown":"Unless there&#39;s a way to retrieve the old index of the elements after they&#39;ve been shuffled, I&#39;d do it one of two ways:\r\n\r\n\r\nA)\r\n   Make another list multi_shuffler = [0, 1, 2, ... , file.size()] and shuffle it. Loop over it to get the order for your shuffled file/image lists.\r\n\r\nArrayList&lt;String&gt; newFileList = new ArrayList&lt;String&gt;();\r\nArrayList&lt;String&gt; newImgList = new ArrayList&lt;String&gt;();\r\nfor ( i=0; i&lt;file.length; i++ ){\r\n   newFileList.add( fileList.get( multi_shuffler[i] ) );\r\n   newImageList.add( imgList.get( multi_shuffler[i] ) );\r\n}\r\n\r\n\r\nor B)\r\n   Make a StringWrapper class to hold the file/image names and combine the two lists you&#39;ve already got into one: ArrayList&lt;StringWrapper&gt; combinedList;","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>Unless there's a way to retrieve the old index of the elements after they've been shuffled, I'd do it one of two ways:</p>\n\n<p>A)\n   Make another list multi_shuffler = [0, 1, 2, ... , file.size()] and shuffle it. Loop over it to get the order for your shuffled file/image lists.</p>\n\n<p>ArrayList newFileList = new ArrayList();\nArrayList newImgList = new ArrayList();\nfor ( i=0; i\n\n<p>or B)\n   Make a StringWrapper class to hold the file/image names and combine the two lists you've already got into one: ArrayList combinedList;</p>\n"},{"tags":[],"owner":{"account_id":4394923,"reputation":550,"user_id":3582295,"display_name":"Rohit Goyal"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1400864359,"creation_date":1400864359,"answer_id":23834751,"question_id":4228975,"body_markdown":"This can be done using the shuffle method: \r\n\r\n\r\n\r\n\r\n\r\n    private List&lt;Integer&gt; getJumbledList() {\r\n         List&lt;Integer&gt; myArrayList2 = new ArrayList&lt;Integer&gt;();\r\n        \tmyArrayList2.add(8);\r\n        \tmyArrayList2.add(4);\r\n        \tmyArrayList2.add(9);\r\n        \tCollections.shuffle(myArrayList2);\r\n        \treturn myArrayList2;","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>This can be done using the shuffle method: </p>\n\n<pre><code>private List&lt;Integer&gt; getJumbledList() {\n     List&lt;Integer&gt; myArrayList2 = new ArrayList&lt;Integer&gt;();\n        myArrayList2.add(8);\n        myArrayList2.add(4);\n        myArrayList2.add(9);\n        Collections.shuffle(myArrayList2);\n        return myArrayList2;\n</code></pre>\n"}],"owner":{"account_id":29808,"reputation":15451,"user_id":80796,"accept_rate":77,"display_name":"Jessy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203175,"favorite_count":0,"down_vote_count":0,"up_vote_count":268,"accepted_answer_id":4229001,"answer_count":9,"score":268,"last_activity_date":1697621221,"creation_date":1290197452,"question_id":4228975,"body_markdown":"I have two arraylist `filelist` and `imgList` which related to each other, e.g. &quot;H1.txt&quot; related to &quot;e1.jpg&quot;. How to automatically randomized the list of `imgList` according to the randomization of `fileList`? Like in excel, if we sort certain column, the other column will automatically follow?\r\n\r\n    String [] file = {&quot;H1.txt&quot;,&quot;H2.txt&quot;,&quot;H3.txt&quot;,&quot;M4.txt&quot;,&quot;M5.txt&quot;,&quot;M6.txt&quot;};\r\n    ArrayList&lt;String&gt; fileList = new ArrayList&lt;String&gt;(Arrays.asList(file));\r\n    \r\n    String [] img = {&quot;e1.jpg&quot;,&quot;e2.jpg&quot;,&quot;e3.jpg&quot;,&quot;e4.jpg&quot;,&quot;e5.jpg&quot;,&quot;e6.jpg&quot;};\r\n    ArrayList&lt;String&gt; imgList = new ArrayList&lt;String&gt;(Arrays.asList(img));\r\n    \r\n    //randomized files\r\n    Collections.shuffle(fileList);\r\n\r\noutput after randomization e.g.:\r\n\r\n    fileList = {&quot;M4.txt&quot;,&quot;M6.txt&quot;,&quot;H3.txt&quot;,&quot;M5.txt&quot;,&quot;H2.txt&quot;,&quot;H1.txt&quot;};\r\n\r\nintended output:\r\n\r\n     imgList = {&quot;e4.jpg&quot;,&quot;e6.jpg&quot;,&quot;e3.jpg&quot;,&quot;e5.jpg&quot;,&quot;e2.jpg&quot;,&quot;e1.jpg&quot;};","title":"How to randomize two ArrayLists in the same fashion?","body":"<p>I have two arraylist <code>filelist</code> and <code>imgList</code> which related to each other, e.g. \"H1.txt\" related to \"e1.jpg\". How to automatically randomized the list of <code>imgList</code> according to the randomization of <code>fileList</code>? Like in excel, if we sort certain column, the other column will automatically follow?</p>\n\n<pre><code>String [] file = {\"H1.txt\",\"H2.txt\",\"H3.txt\",\"M4.txt\",\"M5.txt\",\"M6.txt\"};\nArrayList&lt;String&gt; fileList = new ArrayList&lt;String&gt;(Arrays.asList(file));\n\nString [] img = {\"e1.jpg\",\"e2.jpg\",\"e3.jpg\",\"e4.jpg\",\"e5.jpg\",\"e6.jpg\"};\nArrayList&lt;String&gt; imgList = new ArrayList&lt;String&gt;(Arrays.asList(img));\n\n//randomized files\nCollections.shuffle(fileList);\n</code></pre>\n\n<p>output after randomization e.g.:</p>\n\n<pre><code>fileList = {\"M4.txt\",\"M6.txt\",\"H3.txt\",\"M5.txt\",\"H2.txt\",\"H1.txt\"};\n</code></pre>\n\n<p>intended output:</p>\n\n<pre><code> imgList = {\"e4.jpg\",\"e6.jpg\",\"e3.jpg\",\"e5.jpg\",\"e2.jpg\",\"e1.jpg\"};\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"owner":{"account_id":3642347,"reputation":15,"user_id":3036172,"display_name":"F_V"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697621050,"creation_date":1697620052,"question_id":77314947,"body_markdown":"We have three entities involved in this problem. For simplicity, let&#39;s name them A, B, C. Each of them has its own identifier as the primary key.\r\n\r\n[![ER diagram](https://i.stack.imgur.com/0yPJk.png)](https://i.stack.imgur.com/0yPJk.png)\r\n\r\nThe 3-ary relationship adds some other fields we are skipping for simplicity. It has the following constraints:\r\n- A previous relation between A and C must exist\r\n- A previous relation between A and B must exist\r\n- The entity A (its id) must be the same\r\n\r\nIn terms of database schema:\r\n\r\n```\r\ncreate table a_b_c\r\n(\r\n    a_id   int,\r\n    b_id   int,\r\n    c_id   int,\r\n    primary key (a_id, r_id, c_id),\r\n    constraint fk_a_c foreign key (a_id, c_id) references c (a_id, id) on delete cascade,\r\n    constraint fk_a_b foreign key (a_id, b_id) references a_b (a_id, b_id) on delete cascade\r\n)\r\n```\r\n\r\n\r\nI&#39;ve tried the following classes:\r\n\r\n\r\n```\r\npublic class A {\r\n\r\n   @Id\r\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n   private Integer id;\r\n\r\n   @ManyToMany\r\n   @JoinTable(name = &quot;a_b&quot;,\r\n              inverseJoinColumns = @JoinColumn(name = &quot;b_id&quot;))\r\n   private List&lt;B&gt; bs;\r\n\r\n   @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = &quot;a&quot;, orphanRemoval = true) \r\n   private List&lt;C&gt; cs;\r\n\r\n}\r\n\r\npublic class B {\r\n\r\n   @Id\r\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n   private Integer id;\r\n\r\n   //I don&#39;t need to access A from B objects\r\n\r\n}\r\n\r\npublic class C {\r\n\r\n   @Id\r\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n   private Integer id;\r\n\r\n   @ManyToOne\r\n   private A a;\r\n\r\n   @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;c&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n   private List&lt;ABC&gt; abcs;\r\n\r\n}\r\n\r\n@Embeddable\r\npublic class ABCId {\r\n\r\n    @Column(name = &quot;a_id&quot;)\r\n    private Integer aId;\r\n\r\n    @Column(name = &quot;b_id&quot;)\r\n    private Integer bId;\r\n\r\n    @Column(name = &quot;c_id&quot;)\r\n    private Integer cId;\r\n}\r\n\r\npublic class ABC {\r\n\r\n    @EmbeddedId\r\n    protected ABCId id = new ABCId();\r\n\r\n    @MapsId(&quot;aId&quot;)\r\n    @ManyToOne\r\n    private A a;\r\n\r\n    @MapsId(&quot;bId&quot;)\r\n    @ManyToOne\r\n    private B b;\r\n\r\n    @MapsId(&quot;cId&quot;)\r\n    @ManyToOne\r\n    private C c;\r\n\r\n}\r\n```\r\n\r\nWhen the application tries to create a new instance of type A, when creating ABC on cascade, it fails because of the constraints in the database schema (shown above): the entries relating to A and C, and A and B do not exist in the database yet. It also fails when trying to update or delete.\r\n\r\nI think JPA does not know anything about the constraints existing in the database, so I must be missing how to describe those constraints in the classes.\r\n\r\nMy solution right now is to create the needed entries by using specific repositories instead of relying entirely on the A class.\r\n\r\nSo my questions are:\r\n- Does the design of the classes reflect the constraints in the database schema?\r\n- If not, how can I describe such constraints using JPA?\r\n\r\nThank you in advance.\r\n","title":"3-ary relationship with composite foreign keys using JPA","body":"<p>We have three entities involved in this problem. For simplicity, let's name them A, B, C. Each of them has its own identifier as the primary key.</p>\n<p><a href=\"https://i.stack.imgur.com/0yPJk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0yPJk.png\" alt=\"ER diagram\" /></a></p>\n<p>The 3-ary relationship adds some other fields we are skipping for simplicity. It has the following constraints:</p>\n<ul>\n<li>A previous relation between A and C must exist</li>\n<li>A previous relation between A and B must exist</li>\n<li>The entity A (its id) must be the same</li>\n</ul>\n<p>In terms of database schema:</p>\n<pre><code>create table a_b_c\n(\n    a_id   int,\n    b_id   int,\n    c_id   int,\n    primary key (a_id, r_id, c_id),\n    constraint fk_a_c foreign key (a_id, c_id) references c (a_id, id) on delete cascade,\n    constraint fk_a_b foreign key (a_id, b_id) references a_b (a_id, b_id) on delete cascade\n)\n</code></pre>\n<p>I've tried the following classes:</p>\n<pre><code>public class A {\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\n   private Integer id;\n\n   @ManyToMany\n   @JoinTable(name = &quot;a_b&quot;,\n              inverseJoinColumns = @JoinColumn(name = &quot;b_id&quot;))\n   private List&lt;B&gt; bs;\n\n   @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = &quot;a&quot;, orphanRemoval = true) \n   private List&lt;C&gt; cs;\n\n}\n\npublic class B {\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\n   private Integer id;\n\n   //I don't need to access A from B objects\n\n}\n\npublic class C {\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\n   private Integer id;\n\n   @ManyToOne\n   private A a;\n\n   @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;c&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n   private List&lt;ABC&gt; abcs;\n\n}\n\n@Embeddable\npublic class ABCId {\n\n    @Column(name = &quot;a_id&quot;)\n    private Integer aId;\n\n    @Column(name = &quot;b_id&quot;)\n    private Integer bId;\n\n    @Column(name = &quot;c_id&quot;)\n    private Integer cId;\n}\n\npublic class ABC {\n\n    @EmbeddedId\n    protected ABCId id = new ABCId();\n\n    @MapsId(&quot;aId&quot;)\n    @ManyToOne\n    private A a;\n\n    @MapsId(&quot;bId&quot;)\n    @ManyToOne\n    private B b;\n\n    @MapsId(&quot;cId&quot;)\n    @ManyToOne\n    private C c;\n\n}\n</code></pre>\n<p>When the application tries to create a new instance of type A, when creating ABC on cascade, it fails because of the constraints in the database schema (shown above): the entries relating to A and C, and A and B do not exist in the database yet. It also fails when trying to update or delete.</p>\n<p>I think JPA does not know anything about the constraints existing in the database, so I must be missing how to describe those constraints in the classes.</p>\n<p>My solution right now is to create the needed entries by using specific repositories instead of relying entirely on the A class.</p>\n<p>So my questions are:</p>\n<ul>\n<li>Does the design of the classes reflect the constraints in the database schema?</li>\n<li>If not, how can I describe such constraints using JPA?</li>\n</ul>\n<p>Thank you in advance.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9800,"page":117,"page_size":100}
