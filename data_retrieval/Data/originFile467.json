{"items":[{"tags":["java","java-9","java-module"],"answers":[{"comments":[{"owner":{"display_name":"user8205906"},"score":0,"creation_date":1498466457,"post_id":44755444,"comment_id":76492487,"body_markdown":"that&#39;s gr8 explanation. gr8.  _&quot;However, java.xml is not in the module graph by default, so you have to pass&quot;_ . My understanding is only `java.base` is available by default. What module graph are you referring. Any example?","body":"that&#39;s gr8 explanation. gr8.  <i>&quot;However, java.xml is not in the module graph by default, so you have to pass&quot;</i> . My understanding is only <code>java.base</code> is available by default. What module graph are you referring. Any example?"},{"owner":{"account_id":2973802,"reputation":48688,"user_id":2525313,"accept_rate":88,"display_name":"Nicolai Parlog"},"score":2,"creation_date":1498489239,"post_id":44755444,"comment_id":76506281,"body_markdown":"The _java.xml_ module is included by default (try it with `java --limit-modules java.se --list-modules`), so not need to worry there. By the way, the confusion between modules and packages is why I use _italics_ for the former and `code formatting` for the latter.","body":"The <i>java.xml</i> module is included by default (try it with <code>java --limit-modules java.se --list-modules</code>), so not need to worry there. By the way, the confusion between modules and packages is why I use <i>italics</i> for the former and <code>code formatting</code> for the latter."},{"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":0,"creation_date":1498490024,"post_id":44755444,"comment_id":76506811,"body_markdown":"@Nicolai You are right. I confused `java.xml` with `java.xml.bind` which is not included by default.","body":"@Nicolai You are right. I confused <code>java.xml</code> with <code>java.xml.bind</code> which is not included by default."}],"tags":[],"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1498490065,"creation_date":1498464755,"answer_id":44755444,"question_id":44754885,"body_markdown":"First of all, in `module-info.java` you mention modules, not packages. E.g. `java.xml` is a module which contains about 25 packages. So, if your module uses 10 packages from the `java.xml` module, you don&#39;t have to repeat that 10 times in `module-info.java`, you write `requires java.xml` just once. So, that huge list of dependencies is not huge actually.\r\n\r\nIf you really want to skip all those declarations, you can just not create `module-info.java` (but I don&#39;t recommend to do that). A module that does not have `module-info.java` is called an automatic module and it implicitly requires all other modules.\r\n\r\n\r\n","title":"java 9: In module-info.java do i have to again mention packages((as requires) that are already being imported in sources","body":"<p>First of all, in <code>module-info.java</code> you mention modules, not packages. E.g. <code>java.xml</code> is a module which contains about 25 packages. So, if your module uses 10 packages from the <code>java.xml</code> module, you don't have to repeat that 10 times in <code>module-info.java</code>, you write <code>requires java.xml</code> just once. So, that huge list of dependencies is not huge actually.</p>\n\n<p>If you really want to skip all those declarations, you can just not create <code>module-info.java</code> (but I don't recommend to do that). A module that does not have <code>module-info.java</code> is called an automatic module and it implicitly requires all other modules.</p>\n"},{"tags":[],"owner":{"account_id":13222953,"reputation":731,"user_id":9549068,"display_name":"Nor.Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682863459,"creation_date":1682863459,"answer_id":76141655,"question_id":44754885,"body_markdown":"### solution (workaround)\r\n\r\n*If you are **bothered** by having to write out each single `requires` again and again  \\\r\n-- there is a faster way to **`requires *all*`** \\\r\n-- if you know Ahk &amp; AhkSpy*\r\n\r\n\r\n1. get [**AhkSpy**](https://raw.githubusercontent.com/serzh82saratov/AhkSpy/master/AhkSpy.ahk\r\n)\r\n1. open the **`module dependency`**\r\n1. capture &amp; copy **all** of them by AhkSpy\r\n1. paste them all in `module-info.java`\r\n\r\n[![enter image description here][1]][1]\r\n\r\n---\r\n\r\n### sample code \r\n\r\n(if you really dont know how to do the above, copy the following **sample** code may help you a bit)\r\n\r\n```\r\n  //  requires HikariCP;\r\n  //  requires accessors.smart;\r\n  //  requires android.json;\r\n  requires antlr;\r\n  //  requires assertj.core;\r\n  requires attoparser;\r\n  requires com.fasterxml.jackson.annotation;\r\n  requires com.sun.istack.runtime;\r\n  requires com.sun.xml.txw2;\r\n  requires dom4j;\r\n  //  requires jackson.core;\r\n  //  requires jackson.databind;\r\n  //  requires jackson.datatype.jdk8;\r\n  //  requires jackson.datatype.jsr310;\r\n  //  requires jackson.module.parameter.names;\r\n  requires jakarta.activation;\r\n  requires java.annotation;\r\n  requires java.base;\r\n  requires java.compiler;\r\n  requires java.datatransfer;\r\n  requires java.desktop;\r\n  requires java.instrument;\r\n  requires java.logging;\r\n  requires java.management;\r\n  requires java.management.rmi;\r\n  requires java.naming;\r\n  requires java.net.http;\r\n  requires java.persistence;\r\n  requires java.prefs;\r\n  requires java.rmi;\r\n  requires java.scripting;\r\n  requires java.se;\r\n  requires java.security.jgss;\r\n  requires java.security.sasl;\r\n  requires java.smartcardio;\r\n  requires java.sql;\r\n  requires java.sql.rowset;\r\n  requires java.transaction;\r\n  requires java.transaction.xa;\r\n  requires java.xml;\r\n  requires java.xml.bind;\r\n  requires java.xml.crypto;\r\n  requires jdk.accessibility;\r\n  requires jdk.attach;\r\n  requires jdk.charsets;\r\n  requires jdk.compiler;\r\n  requires jdk.crypto.cryptoki;\r\n  requires jdk.crypto.ec;\r\n  requires jdk.crypto.mscapi;\r\n  requires jdk.dynalink;\r\n  requires jdk.editpad;\r\n  requires jdk.hotspot.agent;\r\n  requires jdk.httpserver;\r\n  requires jdk.internal.ed;\r\n  requires jdk.internal.jvmstat;\r\n  requires jdk.internal.le;\r\n  requires jdk.internal.opt;\r\n  requires jdk.internal.vm.ci;\r\n  requires jdk.internal.vm.compiler;\r\n  requires jdk.internal.vm.compiler.management;\r\n  requires jdk.jartool;\r\n  requires jdk.javadoc;\r\n  requires jdk.jcmd;\r\n  requires jdk.jconsole;\r\n  requires jdk.jdeps;\r\n  requires jdk.jdi;\r\n  requires jdk.jdwp.agent;\r\n  requires jdk.jfr;\r\n  requires jdk.jlink;\r\n  requires jdk.jpackage;\r\n  requires jdk.jshell;\r\n  requires jdk.jsobject;\r\n  requires jdk.jstatd;\r\n  requires jdk.localedata;\r\n  requires jdk.management;\r\n  requires jdk.management.agent;\r\n  requires jdk.management.jfr;\r\n  requires jdk.naming.dns;\r\n  requires jdk.naming.rmi;\r\n  requires jdk.net;\r\n  requires jdk.nio.mapmode;\r\n  requires jdk.random;\r\n  requires jdk.sctp;\r\n  requires jdk.security.auth;\r\n  requires jdk.security.jgss;\r\n  requires jdk.unsupported;\r\n  requires jdk.unsupported.desktop;\r\n  requires jdk.xml.dom;\r\n  requires jdk.zipfs;\r\n  //  requires json.path;\r\n  //  requires json.smart;\r\n  //  requires jsonassert;\r\n  requires jul.to.slf4j;\r\n  //  requires log4j.api;\r\n  requires logback.classic;\r\n  requires logback.core;\r\n  requires lombok;\r\n  //  requires mysql.connector.j;\r\n  requires org.apache.logging.slf4j;\r\n  requires org.apache.tomcat.embed.core;\r\n  requires org.apache.tomcat.embed.el;\r\n  requires org.apache.tomcat.embed.websocket;\r\n  //  requires org.apiguardian.api;\r\n  requires org.aspectj.weaver;\r\n  requires org.glassfish.jaxb.runtime;\r\n  //  requires org.hamcrest;\r\n  requires org.hibernate.commons.annotations;\r\n  requires org.hibernate.orm.core;\r\n  requires org.hibernate.orm.envers;\r\n  requires org.jboss.jandex;\r\n  requires org.jboss.logging;\r\n  requires org.joda.time;\r\n  //  requires org.junit.jupiter;\r\n  //  requires org.junit.jupiter.api;\r\n  //  requires org.junit.jupiter.engine;\r\n  //  requires org.junit.jupiter.params;\r\n  //  requires org.junit.platform.commons;\r\n  //  requires org.junit.platform.engine;\r\n  //  requires org.mockito;\r\n  //  requires org.mockito.junit.jupiter;\r\n  //  requires org.objectweb.asm;\r\n  //  requires org.objenesis;\r\n  //  requires org.opentest4j;\r\n  requires org.slf4j;\r\n  //  requires org.xmlunit;\r\n  requires org.yaml.snakeyaml;\r\n  requires spring.aop;\r\n  requires spring.aspects;\r\n  requires spring.beans;\r\n  requires spring.boot;\r\n  requires spring.boot.autoconfigure;\r\n  //  requires spring.boot.devtools;\r\n  requires spring.boot.starter;\r\n  requires spring.boot.starter.aop;\r\n  requires spring.boot.starter.data.jpa;\r\n  requires spring.boot.starter.jdbc;\r\n  requires spring.boot.starter.json;\r\n  requires spring.boot.starter.logging;\r\n  //  requires spring.boot.starter.test;\r\n  requires spring.boot.starter.thymeleaf;\r\n  requires spring.boot.starter.tomcat;\r\n  requires spring.boot.starter.web;\r\n  //  requires spring.boot.test;\r\n  //  requires spring.boot.test.autoconfigure;\r\n  requires spring.context;\r\n  requires spring.core;\r\n  requires spring.data.commons;\r\n  requires spring.data.envers;\r\n  requires spring.data.jpa;\r\n  requires spring.expression;\r\n  requires spring.jcl;\r\n  requires spring.jdbc;\r\n  requires spring.orm;\r\n  //  requires spring.test;\r\n  requires spring.tx;\r\n  requires spring.web;\r\n  requires spring.webmvc;\r\n  requires thymeleaf;\r\n  requires thymeleaf.extras.java8time;\r\n  requires thymeleaf.spring5;\r\n  requires unbescape;\r\n```\r\n\r\n&lt;sub&gt;\r\n&lt;sup&gt;\r\n\r\n---\r\n\r\n### misc (-- following not important)\r\n\r\n- idk why Eclipse doesnt support this automatic adding `import` to `module-info.java`. \r\n- `module-info.java` is annoying in many aspects -- requires you do many more work -- idk why (not familiar with)\r\n  - `requires transitive`\r\n  - **missing** `requires` &amp; program throws exception \r\n  - conflict with some program design\r\n- Eclipse can indeed **auto generate** `module-info.java` by: \\\r\n  right click the project &gt; Configure &gt; Create `module-info.java` \\\r\n  but insufficient in some cases\r\n- related: https://stackoverflow.com/questions/45269581/why-is-exporting-the-entire-module-not-allowed\r\n- [[Ahk &amp; AhkSpy (/ AccViewer) is a good tool]]\r\n\r\n&lt;/sup&gt;\r\n&lt;/sub&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZZCWT.png","title":"java 9: In module-info.java do i have to again mention packages((as requires) that are already being imported in sources","body":"<h3>solution (workaround)</h3>\n<p><em>If you are <strong>bothered</strong> by having to write out each single <code>requires</code> again and again  <br />\n-- there is a faster way to <strong><code>requires *all*</code></strong> <br />\n-- if you know Ahk &amp; AhkSpy</em></p>\n<ol>\n<li>get <a href=\"https://raw.githubusercontent.com/serzh82saratov/AhkSpy/master/AhkSpy.ahk\" rel=\"nofollow noreferrer\"><strong>AhkSpy</strong></a></li>\n<li>open the <strong><code>module dependency</code></strong></li>\n<li>capture &amp; copy <strong>all</strong> of them by AhkSpy</li>\n<li>paste them all in <code>module-info.java</code></li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/ZZCWT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZZCWT.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h3>sample code</h3>\n<p>(if you really dont know how to do the above, copy the following <strong>sample</strong> code may help you a bit)</p>\n<pre><code>  //  requires HikariCP;\n  //  requires accessors.smart;\n  //  requires android.json;\n  requires antlr;\n  //  requires assertj.core;\n  requires attoparser;\n  requires com.fasterxml.jackson.annotation;\n  requires com.sun.istack.runtime;\n  requires com.sun.xml.txw2;\n  requires dom4j;\n  //  requires jackson.core;\n  //  requires jackson.databind;\n  //  requires jackson.datatype.jdk8;\n  //  requires jackson.datatype.jsr310;\n  //  requires jackson.module.parameter.names;\n  requires jakarta.activation;\n  requires java.annotation;\n  requires java.base;\n  requires java.compiler;\n  requires java.datatransfer;\n  requires java.desktop;\n  requires java.instrument;\n  requires java.logging;\n  requires java.management;\n  requires java.management.rmi;\n  requires java.naming;\n  requires java.net.http;\n  requires java.persistence;\n  requires java.prefs;\n  requires java.rmi;\n  requires java.scripting;\n  requires java.se;\n  requires java.security.jgss;\n  requires java.security.sasl;\n  requires java.smartcardio;\n  requires java.sql;\n  requires java.sql.rowset;\n  requires java.transaction;\n  requires java.transaction.xa;\n  requires java.xml;\n  requires java.xml.bind;\n  requires java.xml.crypto;\n  requires jdk.accessibility;\n  requires jdk.attach;\n  requires jdk.charsets;\n  requires jdk.compiler;\n  requires jdk.crypto.cryptoki;\n  requires jdk.crypto.ec;\n  requires jdk.crypto.mscapi;\n  requires jdk.dynalink;\n  requires jdk.editpad;\n  requires jdk.hotspot.agent;\n  requires jdk.httpserver;\n  requires jdk.internal.ed;\n  requires jdk.internal.jvmstat;\n  requires jdk.internal.le;\n  requires jdk.internal.opt;\n  requires jdk.internal.vm.ci;\n  requires jdk.internal.vm.compiler;\n  requires jdk.internal.vm.compiler.management;\n  requires jdk.jartool;\n  requires jdk.javadoc;\n  requires jdk.jcmd;\n  requires jdk.jconsole;\n  requires jdk.jdeps;\n  requires jdk.jdi;\n  requires jdk.jdwp.agent;\n  requires jdk.jfr;\n  requires jdk.jlink;\n  requires jdk.jpackage;\n  requires jdk.jshell;\n  requires jdk.jsobject;\n  requires jdk.jstatd;\n  requires jdk.localedata;\n  requires jdk.management;\n  requires jdk.management.agent;\n  requires jdk.management.jfr;\n  requires jdk.naming.dns;\n  requires jdk.naming.rmi;\n  requires jdk.net;\n  requires jdk.nio.mapmode;\n  requires jdk.random;\n  requires jdk.sctp;\n  requires jdk.security.auth;\n  requires jdk.security.jgss;\n  requires jdk.unsupported;\n  requires jdk.unsupported.desktop;\n  requires jdk.xml.dom;\n  requires jdk.zipfs;\n  //  requires json.path;\n  //  requires json.smart;\n  //  requires jsonassert;\n  requires jul.to.slf4j;\n  //  requires log4j.api;\n  requires logback.classic;\n  requires logback.core;\n  requires lombok;\n  //  requires mysql.connector.j;\n  requires org.apache.logging.slf4j;\n  requires org.apache.tomcat.embed.core;\n  requires org.apache.tomcat.embed.el;\n  requires org.apache.tomcat.embed.websocket;\n  //  requires org.apiguardian.api;\n  requires org.aspectj.weaver;\n  requires org.glassfish.jaxb.runtime;\n  //  requires org.hamcrest;\n  requires org.hibernate.commons.annotations;\n  requires org.hibernate.orm.core;\n  requires org.hibernate.orm.envers;\n  requires org.jboss.jandex;\n  requires org.jboss.logging;\n  requires org.joda.time;\n  //  requires org.junit.jupiter;\n  //  requires org.junit.jupiter.api;\n  //  requires org.junit.jupiter.engine;\n  //  requires org.junit.jupiter.params;\n  //  requires org.junit.platform.commons;\n  //  requires org.junit.platform.engine;\n  //  requires org.mockito;\n  //  requires org.mockito.junit.jupiter;\n  //  requires org.objectweb.asm;\n  //  requires org.objenesis;\n  //  requires org.opentest4j;\n  requires org.slf4j;\n  //  requires org.xmlunit;\n  requires org.yaml.snakeyaml;\n  requires spring.aop;\n  requires spring.aspects;\n  requires spring.beans;\n  requires spring.boot;\n  requires spring.boot.autoconfigure;\n  //  requires spring.boot.devtools;\n  requires spring.boot.starter;\n  requires spring.boot.starter.aop;\n  requires spring.boot.starter.data.jpa;\n  requires spring.boot.starter.jdbc;\n  requires spring.boot.starter.json;\n  requires spring.boot.starter.logging;\n  //  requires spring.boot.starter.test;\n  requires spring.boot.starter.thymeleaf;\n  requires spring.boot.starter.tomcat;\n  requires spring.boot.starter.web;\n  //  requires spring.boot.test;\n  //  requires spring.boot.test.autoconfigure;\n  requires spring.context;\n  requires spring.core;\n  requires spring.data.commons;\n  requires spring.data.envers;\n  requires spring.data.jpa;\n  requires spring.expression;\n  requires spring.jcl;\n  requires spring.jdbc;\n  requires spring.orm;\n  //  requires spring.test;\n  requires spring.tx;\n  requires spring.web;\n  requires spring.webmvc;\n  requires thymeleaf;\n  requires thymeleaf.extras.java8time;\n  requires thymeleaf.spring5;\n  requires unbescape;\n</code></pre>\n<sub>\n<sup>\n<hr />\n<h3>misc (-- following not important)</h3>\n<ul>\n<li>idk why Eclipse doesnt support this automatic adding <code>import</code> to <code>module-info.java</code>.</li>\n<li><code>module-info.java</code> is annoying in many aspects -- requires you do many more work -- idk why (not familiar with)\n<ul>\n<li><code>requires transitive</code></li>\n<li><strong>missing</strong> <code>requires</code> &amp; program throws exception</li>\n<li>conflict with some program design</li>\n</ul>\n</li>\n<li>Eclipse can indeed <strong>auto generate</strong> <code>module-info.java</code> by: <br />\nright click the project &gt; Configure &gt; Create <code>module-info.java</code> <br />\nbut insufficient in some cases</li>\n<li>related: <a href=\"https://stackoverflow.com/questions/45269581/why-is-exporting-the-entire-module-not-allowed\">Why is exporting the entire module not allowed?</a></li>\n<li>[[Ahk &amp; AhkSpy (/ AccViewer) is a good tool]]</li>\n</ul>\n</sup>\n</sub>\n"}],"owner":{"display_name":"user8205906"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2053,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":44755444,"answer_count":2,"score":3,"last_activity_date":1682863459,"creation_date":1498462401,"question_id":44754885,"body_markdown":"working with java 9 modules, if i am using java.xml in my code...                        \r\n1) i will import xml package using import statement...                        \r\n2) if i don&#39;t  mention that this package is required in the module declaration of my module...                        \r\n - will the compilation of my module work.. ??                        \r\ni would guess... no... and on mentioning that xml package is required on module-info.java... it might work.                        \r\nso.. what I am wondering is... is that not redundancy... every importing package is implicitly... required. (unless i need to understand module even better)\r\n\r\nIs there a way to mention that all imported packages are required in module declaration, other wise it could be a long list to mention in module-info.java?","title":"java 9: In module-info.java do i have to again mention packages((as requires) that are already being imported in sources","body":"<p>working with java 9 modules, if i am using java.xml in my code...<br>\n1) i will import xml package using import statement...<br>\n2) if i don't  mention that this package is required in the module declaration of my module...<br>\n - will the compilation of my module work.. ??<br>\ni would guess... no... and on mentioning that xml package is required on module-info.java... it might work.<br>\nso.. what I am wondering is... is that not redundancy... every importing package is implicitly... required. (unless i need to understand module even better)</p>\n\n<p>Is there a way to mention that all imported packages are required in module declaration, other wise it could be a long list to mention in module-info.java?</p>\n"},{"tags":["java","json","parsing","gson","moshi"],"answers":[{"comments":[{"owner":{"account_id":230955,"reputation":15215,"user_id":494879,"accept_rate":97,"display_name":"ataulm"},"score":0,"creation_date":1462520430,"post_id":37063079,"comment_id":61679304,"body_markdown":"You can or can&#39;t use Object?","body":"You can or can&#39;t use Object?"},{"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"score":1,"creation_date":1462632867,"post_id":37063079,"comment_id":61723716,"body_markdown":"Object is special. It&#39;ll convert to a Map, List, Double, String or Boolean depending on what the JSON has.","body":"Object is special. It&#39;ll convert to a Map, List, Double, String or Boolean depending on what the JSON has."},{"owner":{"account_id":512359,"reputation":456,"user_id":13611096,"display_name":"toby yeats"},"score":0,"creation_date":1590385504,"post_id":37063079,"comment_id":109649816,"body_markdown":"@JesseWilson This doesn&#39;t appear to work at all with kotlin and Retrofit2. Any clue why? What is Baz?","body":"@JesseWilson This doesn&#39;t appear to work at all with kotlin and Retrofit2. Any clue why? What is Baz?"}],"tags":[],"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1682862859,"creation_date":1462500169,"answer_id":37063079,"question_id":37060032,"body_markdown":"Use a Map.\r\n\r\n    @FromJson\r\n    Bar fromJson(Map&lt;String, Baz&gt; json) {\r\n        Log.d(&quot;xxx&quot;, &quot;got &quot; + json.toString());\r\n        return new Bar();\r\n    }\r\n\r\nIf you also don&#39;t know the type of the map’s values you can use Object.","title":"Moshi - Parse unknown json keys","body":"<p>Use a Map.</p>\n<pre><code>@FromJson\nBar fromJson(Map&lt;String, Baz&gt; json) {\n    Log.d(&quot;xxx&quot;, &quot;got &quot; + json.toString());\n    return new Bar();\n}\n</code></pre>\n<p>If you also don't know the type of the map’s values you can use Object.</p>\n"}],"owner":{"account_id":180055,"reputation":75792,"user_id":413127,"accept_rate":96,"display_name":"Blundell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3491,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":37063079,"answer_count":1,"score":10,"last_activity_date":1682862859,"creation_date":1462481487,"question_id":37060032,"body_markdown":"How can I parse with moshi a json structure that has keys that are unknown at compile time:\r\n\r\n    &quot;foo&quot;: {\r\n      &quot;name&quot;: &quot;hello&quot;,\r\n      &quot;bar&quot;: {\r\n        &quot;unknownKey1&quot;: {\r\n          &quot;a&quot;: &quot;1&quot;\r\n          }\r\n        },\r\n        &quot;unknownKey2&quot;: {\r\n          &quot;b&quot;: &quot;2&quot;\r\n        },\r\n        &quot;unknownKeyX&quot;: {\r\n          &quot;c&quot;: &quot;X&quot;\r\n        }\r\n      },\r\n      &quot;properties&quot;: {...}\r\n    }\r\n\r\nI tried using a `@FromJson` adapter for `JSONObject` but the logs just say that the json is empty `{}` (where I would expect `{&quot;unknownKey1&quot;: { ... etc ...}`)\r\n\r\n       class Foo {\r\n\r\n            @Json(name = &quot;name&quot;)\r\n            String name;\r\n            @Json(name = &quot;bar&quot;)\r\n            Bar bar;\r\n\r\n            static class Bar {\r\n\r\n            }\r\n        }\r\n\r\n    class BarAdapter {\r\n\r\n        @FromJson\r\n        Bar fromJson(JSONObject json) {\r\n            Log.d(&quot;xxx&quot;, &quot;got &quot; + json.toString());\r\n            return new Bar();\r\n        }\r\n    }\r\n\r\nOnce I can get at the json inside bar, I can manually iterate it to add to a list or something (since I don&#39;t know how many items there will be).\r\n\r\nUsing it like this:\r\n\r\n             Moshi moshi = new Moshi.Builder()\r\n            .add(new BarAdapter())\r\n            .add(new LinkedHashMapConverter())\r\n            .build();\r\n\r\nI also had to add the `LinkedHashMapConverter` to appease the moshi gods, but adding logs to it, its methods are never called (this might be a separate issue with my real json).\r\n\r\nany ideas?","title":"Moshi - Parse unknown json keys","body":"<p>How can I parse with moshi a json structure that has keys that are unknown at compile time:</p>\n\n<pre><code>\"foo\": {\n  \"name\": \"hello\",\n  \"bar\": {\n    \"unknownKey1\": {\n      \"a\": \"1\"\n      }\n    },\n    \"unknownKey2\": {\n      \"b\": \"2\"\n    },\n    \"unknownKeyX\": {\n      \"c\": \"X\"\n    }\n  },\n  \"properties\": {...}\n}\n</code></pre>\n\n<p>I tried using a <code>@FromJson</code> adapter for <code>JSONObject</code> but the logs just say that the json is empty <code>{}</code> (where I would expect <code>{\"unknownKey1\": { ... etc ...}</code>)</p>\n\n<pre><code>   class Foo {\n\n        @Json(name = \"name\")\n        String name;\n        @Json(name = \"bar\")\n        Bar bar;\n\n        static class Bar {\n\n        }\n    }\n\nclass BarAdapter {\n\n    @FromJson\n    Bar fromJson(JSONObject json) {\n        Log.d(\"xxx\", \"got \" + json.toString());\n        return new Bar();\n    }\n}\n</code></pre>\n\n<p>Once I can get at the json inside bar, I can manually iterate it to add to a list or something (since I don't know how many items there will be).</p>\n\n<p>Using it like this:</p>\n\n<pre><code>         Moshi moshi = new Moshi.Builder()\n        .add(new BarAdapter())\n        .add(new LinkedHashMapConverter())\n        .build();\n</code></pre>\n\n<p>I also had to add the <code>LinkedHashMapConverter</code> to appease the moshi gods, but adding logs to it, its methods are never called (this might be a separate issue with my real json).</p>\n\n<p>any ideas?</p>\n"},{"tags":["java","mysql","jdbc","database-connection"],"comments":[{"owner":{"account_id":462886,"reputation":2853,"user_id":865448,"accept_rate":82,"display_name":"tostao"},"score":1,"creation_date":1682340100,"post_id":76091987,"comment_id":134194648,"body_markdown":"Can you connect from `mysql` command line client?","body":"Can you connect from <code>mysql</code> command line client?"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1682340521,"post_id":76091987,"comment_id":134194758,"body_markdown":"Try ```telnet 127.0.0.1 3306``` from the command line to make sure you can connect to port 3306 over TCP.  If this works without an error, that means MySQL is connecting on localhost over that port.  You may need to install ```telnet```, as it is an optional package. A Windows feature or a Linux package - based on your OS.  If this works fine, that means, there is no issue with connectivity to your DB.","body":"Try <code>telnet 127.0.0.1 3306</code> from the command line to make sure you can connect to port 3306 over TCP.  If this works without an error, that means MySQL is connecting on localhost over that port.  You may need to install <code>telnet</code>, as it is an optional package. A Windows feature or a Linux package - based on your OS.  If this works fine, that means, there is no issue with connectivity to your DB."},{"owner":{"account_id":28400150,"reputation":1,"user_id":21725084,"display_name":"Astruin"},"score":0,"creation_date":1682341635,"post_id":76091987,"comment_id":134195015,"body_markdown":"@tostao Yes it works.\n@Ishan With WSL I got `Unable to connect to remote host: Connection refused` and `Got timeout reading communication packets` with Windows cmd, so it looks like it cannot connect through TCP.","body":"@tostao Yes it works. @Ishan With WSL I got <code>Unable to connect to remote host: Connection refused</code> and <code>Got timeout reading communication packets</code> with Windows cmd, so it looks like it cannot connect through TCP."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1682341671,"post_id":76091987,"comment_id":134195027,"body_markdown":"Not an answer, just some notes: When you use `e.getMessage()`, you are throwing away most of the stack trace. Use `e.printStackTrace(System.err);` just for now, to get the full stack trace (but it&#39;s better to use a proper logging framework). Add the full stack trace to your question (as formatted text). You can also review the notes in [Connect Java to a MySQL database](https://stackoverflow.com/q/2839321/12567365).","body":"Not an answer, just some notes: When you use <code>e.getMessage()</code>, you are throwing away most of the stack trace. Use <code>e.printStackTrace(System.err);</code> just for now, to get the full stack trace (but it&#39;s better to use a proper logging framework). Add the full stack trace to your question (as formatted text). You can also review the notes in <a href=\"https://stackoverflow.com/q/2839321/12567365\">Connect Java to a MySQL database</a>."},{"owner":{"account_id":28400150,"reputation":1,"user_id":21725084,"display_name":"Astruin"},"score":0,"creation_date":1682342438,"post_id":76091987,"comment_id":134195212,"body_markdown":"@andrewJames MySQL Workbench works fine, I can connect to the db and see the tables. It&#39;s only jdbc. I updated my question with the stack trace. Concerning the link you sent, I already tried everything from it.","body":"@andrewJames MySQL Workbench works fine, I can connect to the db and see the tables. It&#39;s only jdbc. I updated my question with the stack trace. Concerning the link you sent, I already tried everything from it."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682862458,"post_id":76091987,"comment_id":134278575,"body_markdown":"_&quot;Caused by: java.net.ConnectException: Connection refused&quot;_. MySQL isn&#39;t running, or the port is wrong, or it is actively blocked by a firewall.","body":"<i>&quot;Caused by: java.net.ConnectException: Connection refused&quot;</i>. MySQL isn&#39;t running, or the port is wrong, or it is actively blocked by a firewall."}],"owner":{"account_id":28400150,"reputation":1,"user_id":21725084,"display_name":"Astruin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1442,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682862401,"answer_count":0,"score":0,"last_activity_date":1682862416,"creation_date":1682339961,"question_id":76091987,"body_markdown":"I&#39;m doing a group project with Java, JavaFX and MySQL, and I have a big problem when trying to connect to my database with JDBC. I have systematically this error thrown by DriverManager.getConnection() method :\r\n\r\n```\r\nCommunications link failure \r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n```\r\n\r\nEDIT: Here is the whole stack trace :\r\n```\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n        at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)\r\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)\r\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)\r\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)\r\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:252)\r\n        at controller.Controller.dbconnect(Controller.java:34)\r\n        at controller.Controller.&lt;init&gt;(Controller.java:18)\r\n        at App.start(App.java:15)\r\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\r\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\r\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\r\n        at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n        at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\r\n        at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:290)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)\r\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\r\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)\r\n        at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)\r\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)\r\n        at com.mysql.cj.NativeSession.connect(NativeSession.java:121)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)\r\n        ... 17 more\r\nCaused by: java.net.ConnectException: Connection refused\r\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\r\n        at java.base/sun.nio.ch.Net.connect(Net.java:579)\r\n        at java.base/sun.nio.ch.Net.connect(Net.java:568)\r\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\r\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n        at java.base/java.net.Socket.connect(Socket.java:633)\r\n        at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)\r\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\r\n        ... 20 more\r\n```\r\n\r\nThe code throwing the error is :\r\n\r\n```Java\r\npublic Connection dbconnect() {\r\n    Connection conn = null;\r\n    try {\r\n      conn = DriverManager\r\n          .getConnection(\r\n              &quot;jdbc:mysql://127.0.0.1:3306/cookbook?user=root&amp;password=ABC&amp;useSSL=false&quot;);\r\n    } catch (SQLException e) {\r\n      System.out.println(e.getMessage());\r\n    }\r\n    return conn;\r\n  }\r\n```\r\n\r\n\r\nI&#39;m using VSCode in Windows 10 and a Debian WSL to compile. I installed MySQL Server, Workbench and Connector/J version 8.0.33.\r\n\r\n\r\nI already spent hours trying to fix that. It works perfectly for the other members of the group and I can connect to an online database (using [this](https://www.freemysqlhosting.net/)), so I can be sure that the problem comes from my machine. I found a lot of different possible causes and solutions online, so many that I could not enumerate them all but here are some :\r\n- Disabling firewall\r\n- Modify the jdbc URL in various ways\r\n- Modify the `my.ini` file\r\n- Reinstalling MySQL\r\n- Downgrading MySQL\r\n- Asserting MySQL has good permissions\r\n\r\n(Basically everything that is contained [there](https://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql), and [there](https://stackoverflow.com/questions/2983248/com-mysql-jdbc-exceptions-jdbc4-communicationsexception-communications-link-fai).)\r\n\r\nNothing worked, I&#39;m running out of options and ideas, so maybe you can have a new solution I never tried.","title":"MySQL JDBC Error : Communications link failure","body":"<p>I'm doing a group project with Java, JavaFX and MySQL, and I have a big problem when trying to connect to my database with JDBC. I have systematically this error thrown by DriverManager.getConnection() method :</p>\n<pre><code>Communications link failure \n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n</code></pre>\n<p>EDIT: Here is the whole stack trace :</p>\n<pre><code>com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n        at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446)\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:252)\n        at controller.Controller.dbconnect(Controller.java:34)\n        at controller.Controller.&lt;init&gt;(Controller.java:18)\n        at App.start(App.java:15)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\n        at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n        at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\n        at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:290)\n        at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)\n        at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)\n        at com.mysql.cj.NativeSession.connect(NativeSession.java:121)\n        at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)\n        ... 17 more\nCaused by: java.net.ConnectException: Connection refused\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\n        at java.base/sun.nio.ch.Net.connect(Net.java:579)\n        at java.base/sun.nio.ch.Net.connect(Net.java:568)\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n        at java.base/java.net.Socket.connect(Socket.java:633)\n        at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\n        ... 20 more\n</code></pre>\n<p>The code throwing the error is :</p>\n<pre><code>public Connection dbconnect() {\n    Connection conn = null;\n    try {\n      conn = DriverManager\n          .getConnection(\n              &quot;jdbc:mysql://127.0.0.1:3306/cookbook?user=root&amp;password=ABC&amp;useSSL=false&quot;);\n    } catch (SQLException e) {\n      System.out.println(e.getMessage());\n    }\n    return conn;\n  }\n</code></pre>\n<p>I'm using VSCode in Windows 10 and a Debian WSL to compile. I installed MySQL Server, Workbench and Connector/J version 8.0.33.</p>\n<p>I already spent hours trying to fix that. It works perfectly for the other members of the group and I can connect to an online database (using <a href=\"https://www.freemysqlhosting.net/\" rel=\"nofollow noreferrer\">this</a>), so I can be sure that the problem comes from my machine. I found a lot of different possible causes and solutions online, so many that I could not enumerate them all but here are some :</p>\n<ul>\n<li>Disabling firewall</li>\n<li>Modify the jdbc URL in various ways</li>\n<li>Modify the <code>my.ini</code> file</li>\n<li>Reinstalling MySQL</li>\n<li>Downgrading MySQL</li>\n<li>Asserting MySQL has good permissions</li>\n</ul>\n<p>(Basically everything that is contained <a href=\"https://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql\">there</a>, and <a href=\"https://stackoverflow.com/questions/2983248/com-mysql-jdbc-exceptions-jdbc4-communicationsexception-communications-link-fai\">there</a>.)</p>\n<p>Nothing worked, I'm running out of options and ideas, so maybe you can have a new solution I never tried.</p>\n"},{"tags":["java","eclipse","configuration"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1682864931,"post_id":76141448,"comment_id":134278931,"body_markdown":"The Shell that you pass to `DebugUITools.openLaunchConfigurationDialogOnGroup` is just the parent shell, it does not change the way the displayed dialog works - it will always be modal regardless of the parent.","body":"The Shell that you pass to <code>DebugUITools.openLaunchConfigurationDialogOnGroup</code> is just the parent shell, it does not change the way the displayed dialog works - it will always be modal regardless of the parent."},{"owner":{"account_id":14521911,"reputation":25,"user_id":10489361,"display_name":"Valentina Nikolenko"},"score":0,"creation_date":1682865745,"post_id":76141448,"comment_id":134279039,"body_markdown":"@greg-449 if so, how am I able to change this functionality and make the shell that is created to be MODELESS? since the DebugUITools.openLaunchConfigurationDialogOnGroup is an Eclipse function which I cannot adjust. I though the shell it gets can affect its behavior.","body":"@greg-449 if so, how am I able to change this functionality and make the shell that is created to be MODELESS? since the DebugUITools.openLaunchConfigurationDialogOnGroup is an Eclipse function which I cannot adjust. I though the shell it gets can affect its behavior."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1682866099,"post_id":76141448,"comment_id":134279085,"body_markdown":"You can&#39;t change the mode with anything you do on this call. You would have to extend the **internal**  LaunchConfigurationsDialog and change the shell style and the `setBlockOnOpen` settings - but since this is an internal dialog it is against the rules to do that. Since the dialog is not designed to be modeless it might not work properly anyway.","body":"You can&#39;t change the mode with anything you do on this call. You would have to extend the <b>internal</b>  LaunchConfigurationsDialog and change the shell style and the <code>setBlockOnOpen</code> settings - but since this is an internal dialog it is against the rules to do that. Since the dialog is not designed to be modeless it might not work properly anyway."},{"owner":{"account_id":14521911,"reputation":25,"user_id":10489361,"display_name":"Valentina Nikolenko"},"score":0,"creation_date":1682866476,"post_id":76141448,"comment_id":134279144,"body_markdown":"@greg-449 thank you for the explanation. Could you please clarify why it is against the rules? (or refer me to a source explaining that so I could understand it fully).\nAlso, why if it is not designed to be modeless, it wont work? is there any reason why it is designed that way? (again, any refer to a piece of information to deepen my understanding of it would be great!)\nagain, thank you.","body":"@greg-449 thank you for the explanation. Could you please clarify why it is against the rules? (or refer me to a source explaining that so I could understand it fully). Also, why if it is not designed to be modeless, it wont work? is there any reason why it is designed that way? (again, any refer to a piece of information to deepen my understanding of it would be great!) again, thank you."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1682866687,"post_id":76141448,"comment_id":134279172,"body_markdown":"Any class with **internal** in the package name is off limits. It can be changed or even removed at any time - this has happened in the past and caused a lot of problem for people who ignored the rules  - https://www.eclipse.org/articles/Article-API-Use/index.html LaunchConfigurationDialog is in the org.eclipse.debug.internal.ui.launchConfigurations package","body":"Any class with <b>internal</b> in the package name is off limits. It can be changed or even removed at any time - this has happened in the past and caused a lot of problem for people who ignored the rules  - <a href=\"https://www.eclipse.org/articles/Article-API-Use/index.html\" rel=\"nofollow noreferrer\">eclipse.org/articles/Article-API-Use/index.html</a> LaunchConfigurationDialog is in the org.eclipse.debug.internal.ui.launchConfigurations package"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1682930242,"post_id":76141448,"comment_id":134285480,"body_markdown":"A modal dialog is the normal default. Modal dialogs can assume that nothing will change while the dialog is displayed. If the dialog is modeless the user can use other menus and dialogs to change things the dialog is relying on. For the launch configuration dialog that might mean the launch config being changed by something else.","body":"A modal dialog is the normal default. Modal dialogs can assume that nothing will change while the dialog is displayed. If the dialog is modeless the user can use other menus and dialogs to change things the dialog is relying on. For the launch configuration dialog that might mean the launch config being changed by something else."}],"owner":{"account_id":14521911,"reputation":25,"user_id":10489361,"display_name":"Valentina Nikolenko"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682861969,"creation_date":1682860401,"question_id":76141448,"body_markdown":"I am developing a plugin based on Eclipse, using Java.\r\nI am using there the DebugUITools.openLaunchConfigurationDialogOnGroup and creating a dialog with a shell window, a structureSelection and a groupIdentifier.\r\nfor the shell passed to the function, I used the `new Shell(getActiveShell(), SWT.MODELESS)`\r\nI used the `SWT.MODELESS` to make this shell work in a mode that wont block the other windows\\views.\r\nI want the user to still be able to use the editor while this dialog is open.\r\n\r\nfor some reason, the SWT.MODELESS doesn&#39;t affect in any way and while the dialog is open, all other windows and particularly the editor is disabled for any kind of edit\\interaction.\r\n\r\nI tried to work on a different UI thread (I thought maybe this is blocking the main UI thread, but it didn&#39;t help either)\r\n\r\nAm I using wrongly the SWT.MODELESS? maybe I am missing more configurations to make this dialog not block the other windows?\r\nplease advise, Thank you! ","title":"configuration dialog is blocking access to editor - how to make this dialog MODELESS? (Java, Eclipse plugin)","body":"<p>I am developing a plugin based on Eclipse, using Java.\nI am using there the DebugUITools.openLaunchConfigurationDialogOnGroup and creating a dialog with a shell window, a structureSelection and a groupIdentifier.\nfor the shell passed to the function, I used the <code>new Shell(getActiveShell(), SWT.MODELESS)</code>\nI used the <code>SWT.MODELESS</code> to make this shell work in a mode that wont block the other windows\\views.\nI want the user to still be able to use the editor while this dialog is open.</p>\n<p>for some reason, the SWT.MODELESS doesn't affect in any way and while the dialog is open, all other windows and particularly the editor is disabled for any kind of edit\\interaction.</p>\n<p>I tried to work on a different UI thread (I thought maybe this is blocking the main UI thread, but it didn't help either)</p>\n<p>Am I using wrongly the SWT.MODELESS? maybe I am missing more configurations to make this dialog not block the other windows?\nplease advise, Thank you!</p>\n"},{"tags":["java","javafx","build","icons"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1682872345,"post_id":76141529,"comment_id":134279976,"body_markdown":"Run `jar tvf` on the jar file.  See what is in it.","body":"Run <code>jar tvf</code> on the jar file.  See what is in it."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1682872703,"post_id":76141529,"comment_id":134280012,"body_markdown":"f it is as expected, review the [eden JavaFX resource guide](https://edencoding.com/where-to-put-resource-files-in-javafx/), which provides working examples of lookups for css image resources.  It may not make a difference, but is the app modular?  If so, you could try adjusting the path to something in the module or removing modularity (delete module-info.java).","body":"f it is as expected, review the <a href=\"https://edencoding.com/where-to-put-resource-files-in-javafx/\" rel=\"nofollow noreferrer\">eden JavaFX resource guide</a>, which provides working examples of lookups for css image resources.  It may not make a difference, but is the app modular?  If so, you could try adjusting the path to something in the module or removing modularity (delete module-info.java)."},{"owner":{"account_id":23321320,"reputation":1,"user_id":17399168,"display_name":"N_C_Pub"},"score":0,"creation_date":1682942642,"post_id":76141529,"comment_id":134287239,"body_markdown":"@jewelsea My jar tvf returns over 9000 lines. None of which seems to be an error. Just listing of all possible files in the project I guess. All the files I edited are present including the png files I added. \n\nI&#39;ve read the different ways to include resources from the link you provided, but didn&#39;t find an error. \nThe search-bar in the project root folder didn&#39;t show any files that include a phrase &quot;module&quot; in it.","body":"@jewelsea My jar tvf returns over 9000 lines. None of which seems to be an error. Just listing of all possible files in the project I guess. All the files I edited are present including the png files I added.   I&#39;ve read the different ways to include resources from the link you provided, but didn&#39;t find an error.  The search-bar in the project root folder didn&#39;t show any files that include a phrase &quot;module&quot; in it."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1682966541,"post_id":76141529,"comment_id":134292021,"body_markdown":"I have no other suggestions.","body":"I have no other suggestions."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1683061368,"post_id":76141529,"comment_id":134308301,"body_markdown":"Search the results of the `jar tfv ` command to see if the image file is there, and if it is in the expected location. On UNIX-like systems you can do something like `jar tfv jarfile | grep imagefile`, replacing `jarfile` and `imagefile` with the actual file names.","body":"Search the results of the <code>jar tfv </code> command to see if the image file is there, and if it is in the expected location. On UNIX-like systems you can do something like <code>jar tfv jarfile | grep imagefile</code>, replacing <code>jarfile</code> and <code>imagefile</code> with the actual file names."},{"owner":{"account_id":23321320,"reputation":1,"user_id":17399168,"display_name":"N_C_Pub"},"score":0,"creation_date":1683383037,"post_id":76141529,"comment_id":134360048,"body_markdown":"@James_D \nThe images are in expected locations. I&#39;ve seen then in the listings fortunately.","body":"@James_D  The images are in expected locations. I&#39;ve seen then in the listings fortunately."}],"owner":{"account_id":23321320,"reputation":1,"user_id":17399168,"display_name":"N_C_Pub"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682861572,"creation_date":1682861572,"question_id":76141529,"body_markdown":"I&#39;m editing a Java GUI program, that manages a group of games and a DIY controller to work in accord. I added a new icon to &quot;GamesScreen.fxml&quot;, added images to appropriate folder and added a few lines to the controller file &quot;GameScreenController.java&quot; as well as write a few lines to &quot;GameScreen.css&quot;\r\n\r\nWhen I run the program using the button inside the IDE (NetBeans 17) it works flawlessly. However when I Build the program and run it from the .jar file the new icon does not show up. (But when I click the place where it should be, the appropriate functionality starts)\r\nImages that other icons use are in the same folder as the new ones. So shouldn&#39;t be any issue with wrong paths. \r\n\r\nI&#39;ve tried to delete the target image folder to see if the rest of the icons will vanish too, but everything stayed the same.  \r\n\r\nWhat might be the problem ? I really don&#39;t have any idea. \r\n\r\n\r\nGameScreenController.java\r\n```\r\n@FXML\r\n    private void NewGameHandling(ActionEvent event) {\r\n        currentInterpreter = new NewGameKeyboardInterpreter();\r\n        showInterpreterDialogBox();\r\n    }\r\n```\r\nGameScreen.css\r\n```\r\n#NewGameButton {\r\n    -fx-background-image: url(&quot;/images/gameIcons/New_Game.png&quot;);\r\n    -fx-background-position: center center;\r\n    -fx-background-radius: 0;\r\n    -fx-background-color: transparent;\r\n    -fx-background-size: cover;\r\n    -fx-border-width: 0;\r\n}\r\n\r\n#NewGameButton:hover {\r\n    -fx-background-image: url(&quot;/images/gameIcons/New_Game_Focused.png&quot;);\r\n }\r\n```\r\nGamesScreen.fxml\r\n```\r\n&lt;HBox id=&quot;gamesHBox&quot; alignment=&quot;CENTER&quot; layoutX=&quot;90.0&quot; layoutY=&quot;422.0&quot; prefHeight=&quot;288.0&quot; prefWidth=&quot;1068.0&quot; spacing=&quot;70.0&quot;&gt;\r\n         &lt;children&gt;\r\n            &lt;Button id=&quot;NewGameButton&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#NewGameHandling&quot; prefHeight=&quot;152.0&quot; prefWidth=&quot;149.0&quot; stylesheets=&quot;@../styles/gameScreen.css&quot; /&gt;\r\n         &lt;/children&gt;\r\n      &lt;/HBox&gt;\r\n```\r\n\r\n\r\nI shown only the relevant code snippets for reference. Let me know if you need full files. \r\n\r\n\r\n","title":"JavaFX Icon shows itself when I run the program from IDE, but refuses to show up, when I run the program from the target build","body":"<p>I'm editing a Java GUI program, that manages a group of games and a DIY controller to work in accord. I added a new icon to &quot;GamesScreen.fxml&quot;, added images to appropriate folder and added a few lines to the controller file &quot;GameScreenController.java&quot; as well as write a few lines to &quot;GameScreen.css&quot;</p>\n<p>When I run the program using the button inside the IDE (NetBeans 17) it works flawlessly. However when I Build the program and run it from the .jar file the new icon does not show up. (But when I click the place where it should be, the appropriate functionality starts)\nImages that other icons use are in the same folder as the new ones. So shouldn't be any issue with wrong paths.</p>\n<p>I've tried to delete the target image folder to see if the rest of the icons will vanish too, but everything stayed the same.</p>\n<p>What might be the problem ? I really don't have any idea.</p>\n<p>GameScreenController.java</p>\n<pre><code>@FXML\n    private void NewGameHandling(ActionEvent event) {\n        currentInterpreter = new NewGameKeyboardInterpreter();\n        showInterpreterDialogBox();\n    }\n</code></pre>\n<p>GameScreen.css</p>\n<pre><code>#NewGameButton {\n    -fx-background-image: url(&quot;/images/gameIcons/New_Game.png&quot;);\n    -fx-background-position: center center;\n    -fx-background-radius: 0;\n    -fx-background-color: transparent;\n    -fx-background-size: cover;\n    -fx-border-width: 0;\n}\n\n#NewGameButton:hover {\n    -fx-background-image: url(&quot;/images/gameIcons/New_Game_Focused.png&quot;);\n }\n</code></pre>\n<p>GamesScreen.fxml</p>\n<pre><code>&lt;HBox id=&quot;gamesHBox&quot; alignment=&quot;CENTER&quot; layoutX=&quot;90.0&quot; layoutY=&quot;422.0&quot; prefHeight=&quot;288.0&quot; prefWidth=&quot;1068.0&quot; spacing=&quot;70.0&quot;&gt;\n         &lt;children&gt;\n            &lt;Button id=&quot;NewGameButton&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#NewGameHandling&quot; prefHeight=&quot;152.0&quot; prefWidth=&quot;149.0&quot; stylesheets=&quot;@../styles/gameScreen.css&quot; /&gt;\n         &lt;/children&gt;\n      &lt;/HBox&gt;\n</code></pre>\n<p>I shown only the relevant code snippets for reference. Let me know if you need full files.</p>\n"},{"tags":["java","jco"],"comments":[{"owner":{"account_id":542551,"reputation":10395,"user_id":911419,"accept_rate":79,"display_name":"Suncatcher"},"score":0,"creation_date":1585142561,"post_id":60705985,"comment_id":107658414,"body_markdown":"Share the code how do you call BAPI, and what BAPI","body":"Share the code how do you call BAPI, and what BAPI"}],"answers":[{"comments":[{"owner":{"account_id":7346011,"reputation":9,"user_id":5593674,"display_name":"Rajan"},"score":0,"creation_date":1585801014,"post_id":60956487,"comment_id":107891968,"body_markdown":"Thanks a lot for your feedback. It means limiting number of table is somehow possible but not limiting records in the table. Thanks.","body":"Thanks a lot for your feedback. It means limiting number of table is somehow possible but not limiting records in the table. Thanks."},{"owner":{"account_id":4789,"reputation":16106,"user_id":7381,"display_name":"Lanzelot"},"score":0,"creation_date":1585912222,"post_id":60956487,"comment_id":107937203,"body_markdown":"I added some sample code that shows how to disable a certain table.","body":"I added some sample code that shows how to disable a certain table."},{"owner":{"account_id":7346011,"reputation":9,"user_id":5593674,"display_name":"Rajan"},"score":0,"creation_date":1587021054,"post_id":60956487,"comment_id":108345787,"body_markdown":"this is a great option to limit table data.. appreciate your help.. thanks..","body":"this is a great option to limit table data.. appreciate your help.. thanks.."}],"tags":[],"owner":{"account_id":4789,"reputation":16106,"user_id":7381,"display_name":"Lanzelot"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1585912131,"creation_date":1585675732,"answer_id":60956487,"question_id":60705985,"body_markdown":"A functionality like this would have to be implemented in the BAPI itself. In fact, some BAPIs have a WHERE clause that allows to limit the result set that the BAPI will return.\r\n\r\nBut &quot;from the outside&quot; (i.e. from the JCo layer) you cannot influence the result that the BAPI will return. At least not on such a fine granular level: there is the feature to &quot;turn off&quot; an entire table, which can be used, if you call a BAPI that returns dozens of tables (and spends lots of time selecting the data for them from the database), but you are interested only in a few of these tables. Then you can set the other tables to &quot;inactive&quot;, and the RFC layer of the backend will only return the data for the active tables. (And if the BAPI is programmed in an intelligent way, it determines beforehand, which tables are active and skips the SELECT statements for the inactive ones.)\r\n\r\nHere is a bit of sample code, that deactivates a BAPI&#39;s table with name &quot;TABLE_NAME&quot;:\r\n\r\n    JCoFunction myBapi = ...;\r\n    JCoParameterList tables = myBapi.getTableParameterList();\r\n    tables.setActive(&quot;TABLE_NAME&quot;, false);\r\n    // Now you can execute myBapi, and the backend system will not return \r\n    // data for the table named TABLE_NAME.\r\n\r\n","title":"Limit number of records to be received from SAP using JCo library","body":"<p>A functionality like this would have to be implemented in the BAPI itself. In fact, some BAPIs have a WHERE clause that allows to limit the result set that the BAPI will return.</p>\n\n<p>But \"from the outside\" (i.e. from the JCo layer) you cannot influence the result that the BAPI will return. At least not on such a fine granular level: there is the feature to \"turn off\" an entire table, which can be used, if you call a BAPI that returns dozens of tables (and spends lots of time selecting the data for them from the database), but you are interested only in a few of these tables. Then you can set the other tables to \"inactive\", and the RFC layer of the backend will only return the data for the active tables. (And if the BAPI is programmed in an intelligent way, it determines beforehand, which tables are active and skips the SELECT statements for the inactive ones.)</p>\n\n<p>Here is a bit of sample code, that deactivates a BAPI's table with name \"TABLE_NAME\":</p>\n\n<pre><code>JCoFunction myBapi = ...;\nJCoParameterList tables = myBapi.getTableParameterList();\ntables.setActive(\"TABLE_NAME\", false);\n// Now you can execute myBapi, and the backend system will not return \n// data for the table named TABLE_NAME.\n</code></pre>\n"}],"owner":{"account_id":7346011,"reputation":9,"user_id":5593674,"display_name":"Rajan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":60956487,"answer_count":1,"score":-1,"last_activity_date":1682860693,"creation_date":1584361472,"question_id":60705985,"body_markdown":"Suppose there are 100 records in one of the SAP tables and I want to access only 5 of them. When I call for BAPI function execution, it brings all 100 records in memory and then only I can iterate on them.\r\n\r\nHow to limit records to 5 before I execute BAPI function?\r\n\r\nI cannot ask client to limit number of records in table itself, so I have code it using JCo library.","title":"Limit number of records to be received from SAP using JCo library","body":"<p>Suppose there are 100 records in one of the SAP tables and I want to access only 5 of them. When I call for BAPI function execution, it brings all 100 records in memory and then only I can iterate on them.</p>\n<p>How to limit records to 5 before I execute BAPI function?</p>\n<p>I cannot ask client to limit number of records in table itself, so I have code it using JCo library.</p>\n"},{"tags":["java","wildfly","jco"],"comments":[{"owner":{"account_id":3129274,"reputation":591,"user_id":2647496,"display_name":"ErinsMatthew"},"score":0,"creation_date":1603990181,"post_id":61498092,"comment_id":114217126,"body_markdown":"Did you ever get this resolved? I am facing a similar issue.","body":"Did you ever get this resolved? I am facing a similar issue."}],"owner":{"account_id":12810677,"reputation":569,"user_id":9269017,"display_name":"kk luo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":729,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682860581,"creation_date":1588151319,"question_id":61498092,"body_markdown":"I&#39;m using SAP JCo to connect to SAP system from a WildFly 11 server. First I create a war using it and it work. Then I create another ear and after deployment both not working. The error code is below.\r\n\r\n&gt;    2020-04-29 08:52:46,433 INFO  [org.directwebremoting.log.accessLog] (default task-74) Method \r\n    execution failed: : java.lang.ExceptionInInitializerError: JCo initialization failed with \r\n    java.lang.UnsatisfiedLinkError: Native Library D:\\BPM\\sapjco30\\sapjco3.dll already loaded in another` \r\n    classloader    \r\n\r\nI did some research and found the error may caused by including `sapjco3.jar` in deployment assembly. So I remove the jar from assembly and put it in the `standalone\\deployments` folder.\r\n\r\nThen I create a `Jboss-deployment-structure.xml` as below and put it in the `WebContent\\META-INF` folder for both project.\r\n\r\n    &lt;jboss-deployment-structure xmlns=&quot;urn:jboss:deployment-structure:1.2&quot;&gt;\r\n    \t&lt;!-- Make sub deployments isolated by default, so they cannot see each others classes without a Class-Path entry --&gt;\r\n    \t&lt;ear-subdeployments-isolated&gt;false&lt;/ear-subdeployments-isolated&gt;\r\n    \t&lt;!-- This corresponds to the top level deployment. For a war this is the war&#39;s module, for an ear --&gt;\r\n    \t&lt;!-- This is the top level ear module, which contains all the classes in the EAR&#39;s lib folder     --&gt;\r\n    \t&lt;deployment&gt;\r\n    \t\t&lt;exclusions&gt;\r\n    \t\t\t&lt;module name=&quot;org.apache.log4j&quot; /&gt;\r\n    \t\t&lt;/exclusions&gt;\r\n    \t\t&lt;!-- This allows you to define additional dependencies, it is the same as using the Dependencies: manifest attribute --&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;module name=&quot;deployment.nana-app.ear&quot; export=&quot;true&quot; /&gt;\r\n    \t\t\t&lt;module name=&quot;deployment.sapjco3.jar&quot; export=&quot;true&quot; /&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t\t&lt;!-- These add additional classes to the module. In this case it is the same as including the jar in the EAR&#39;s lib directory --&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t&lt;/resources&gt;\r\n    \t&lt;/deployment&gt;\r\n    &lt;/jboss-deployment-structure&gt;\r\n\r\nThis time another error appeared\r\n\r\n&gt; ```\r\n&gt; 2020-04-29 16:46:03,093 INFO  [org.directwebremoting.log.accessLog] (default task-42) \r\n&gt; Method execution failed: : java.lang.NoClassDefFoundError: Could not initialize\r\n&gt; class com.sap.conn.jco.JCo\r\n&gt;  \tat com.sap.conn.jco.JCoDestinationManager.getDestination(JCoDestinationManager.java:77)\r\n&gt;  \tat com.SCOfetch.JCOtest.step4QueryTable(JCOtest.java:264)\r\n&gt;  \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n&gt;  \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt;  \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt;  \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n&gt;  \tat org.directwebremoting.impl.CreatorModule$1.doFilter(CreatorModule.java:172)\r\n&gt;  \tat org.directwebremoting.impl.CreatorModule.executeMethod(CreatorModule.java:184)\r\n  ```\r\n\r\nLooks like server can&#39;t locate the Jco this time. I guess it&#39;s the issue of my Jboss xml. Then what&#39;s the correct format? Can someone help? Thanks.\r\n","title":"sapjco3.dll already loaded in another classloader error","body":"<p>I'm using SAP JCo to connect to SAP system from a WildFly 11 server. First I create a war using it and it work. Then I create another ear and after deployment both not working. The error code is below.</p>\n<blockquote>\n<p>2020-04-29 08:52:46,433 INFO  [org.directwebremoting.log.accessLog] (default task-74) Method\nexecution failed: : java.lang.ExceptionInInitializerError: JCo initialization failed with\njava.lang.UnsatisfiedLinkError: Native Library D:\\BPM\\sapjco30\\sapjco3.dll already loaded in another`\nclassloader</p>\n</blockquote>\n<p>I did some research and found the error may caused by including <code>sapjco3.jar</code> in deployment assembly. So I remove the jar from assembly and put it in the <code>standalone\\deployments</code> folder.</p>\n<p>Then I create a <code>Jboss-deployment-structure.xml</code> as below and put it in the <code>WebContent\\META-INF</code> folder for both project.</p>\n<pre><code>&lt;jboss-deployment-structure xmlns=&quot;urn:jboss:deployment-structure:1.2&quot;&gt;\n    &lt;!-- Make sub deployments isolated by default, so they cannot see each others classes without a Class-Path entry --&gt;\n    &lt;ear-subdeployments-isolated&gt;false&lt;/ear-subdeployments-isolated&gt;\n    &lt;!-- This corresponds to the top level deployment. For a war this is the war's module, for an ear --&gt;\n    &lt;!-- This is the top level ear module, which contains all the classes in the EAR's lib folder     --&gt;\n    &lt;deployment&gt;\n        &lt;exclusions&gt;\n            &lt;module name=&quot;org.apache.log4j&quot; /&gt;\n        &lt;/exclusions&gt;\n        &lt;!-- This allows you to define additional dependencies, it is the same as using the Dependencies: manifest attribute --&gt;\n        &lt;dependencies&gt;\n            &lt;module name=&quot;deployment.nana-app.ear&quot; export=&quot;true&quot; /&gt;\n            &lt;module name=&quot;deployment.sapjco3.jar&quot; export=&quot;true&quot; /&gt;\n        &lt;/dependencies&gt;\n        &lt;!-- These add additional classes to the module. In this case it is the same as including the jar in the EAR's lib directory --&gt;\n        &lt;resources&gt;\n        &lt;/resources&gt;\n    &lt;/deployment&gt;\n&lt;/jboss-deployment-structure&gt;\n</code></pre>\n<p>This time another error appeared</p>\n<blockquote>\n<pre><code>2020-04-29 16:46:03,093 INFO  [org.directwebremoting.log.accessLog] (default task-42) \nMethod execution failed: : java.lang.NoClassDefFoundError: Could not initialize\nclass com.sap.conn.jco.JCo\n  at com.sap.conn.jco.JCoDestinationManager.getDestination(JCoDestinationManager.java:77)\n  at com.SCOfetch.JCOtest.step4QueryTable(JCOtest.java:264)\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n  at java.lang.reflect.Method.invoke(Method.java:498)\n  at org.directwebremoting.impl.CreatorModule$1.doFilter(CreatorModule.java:172)\n  at org.directwebremoting.impl.CreatorModule.executeMethod(CreatorModule.java:184)\n</code></pre>\n</blockquote>\n<pre><code>\nLooks like server can't locate the Jco this time. I guess it's the issue of my Jboss xml. Then what's the correct format? Can someone help? Thanks.\n</code></pre>\n"},{"tags":["java","jco","sapjco3"],"answers":[{"tags":[],"owner":{"account_id":306692,"reputation":5903,"user_id":617581,"display_name":"Dirk Trilsbeek"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1590141164,"creation_date":1590141164,"answer_id":61952314,"question_id":61952000,"body_markdown":"`JCoParameterList` contains a list of `JCoParameterField` instances. `JCoParameterField` in turn inherits from `JCoField`, which gives you methods to set or get the parameter value. `JCoParameterList` allows you to iterate through the list of parameters, check what kind of parameter they are, get their value etc.\r\n\r\n    JCoParameterList parameters = function.getImportParameterList();\r\n    JCoParameterFieldIterator it = parameters.getParameterFieldIterator();\r\n    while (it.hasNextField()) {\r\n        JCoParameterField field = it.nextParameterField();\r\n        // field.getName() gives you the name\r\n        // field.getString() gives you the parameter value as string\r\n        // field.getExtendedFieldMetaData() gives you the field metadata\r\n\r\n    }","title":"Reflection of FM parameters in JCo","body":"<p><code>JCoParameterList</code> contains a list of <code>JCoParameterField</code> instances. <code>JCoParameterField</code> in turn inherits from <code>JCoField</code>, which gives you methods to set or get the parameter value. <code>JCoParameterList</code> allows you to iterate through the list of parameters, check what kind of parameter they are, get their value etc.</p>\n\n<pre><code>JCoParameterList parameters = function.getImportParameterList();\nJCoParameterFieldIterator it = parameters.getParameterFieldIterator();\nwhile (it.hasNextField()) {\n    JCoParameterField field = it.nextParameterField();\n    // field.getName() gives you the name\n    // field.getString() gives you the parameter value as string\n    // field.getExtendedFieldMetaData() gives you the field metadata\n\n}\n</code></pre>\n"}],"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61952314,"answer_count":1,"score":1,"last_activity_date":1682860235,"creation_date":1590140179,"question_id":61952000,"body_markdown":"I have a problem with the dynamic receipt of the list of parameters and their values when calling the Function Module (with `DESTINATION` parameter as SAP JCo Server) and then processing it using Java (in SAP JCo Server).\r\n\r\nThe point is that I need a dynamic way to get information in JCo Server (using Java) about what SAP RFC function and with what parameters (Importing, Exporting, Changing and Tables) was called in SAP (because my JCo Server server &quot;listens&quot; for SAP RFC calls and I have to store information about these calls from SAP).\r\n\r\nI know that (for example for Importing Parameters) using command: \r\n\r\n    JCoParameterList ParameterList = function.getImportParameterList(); \r\n\r\nin Java I can receive this data, but how to deal with this variable of type `JCoParameterList`? I.e. how can I get information from this variable `ParameterList` on the name of the parameters, their types and the values with which they were called in SAP? \r\n\r\nI will be grateful for any suggestions on how in Java we can retrieve this data from object of type `JCoParameterList`!\r\n\r\nKind regards,\r\nAndrew","title":"Reflection of FM parameters in JCo","body":"<p>I have a problem with the dynamic receipt of the list of parameters and their values when calling the Function Module (with <code>DESTINATION</code> parameter as SAP JCo Server) and then processing it using Java (in SAP JCo Server).</p>\n<p>The point is that I need a dynamic way to get information in JCo Server (using Java) about what SAP RFC function and with what parameters (Importing, Exporting, Changing and Tables) was called in SAP (because my JCo Server server &quot;listens&quot; for SAP RFC calls and I have to store information about these calls from SAP).</p>\n<p>I know that (for example for Importing Parameters) using command:</p>\n<pre><code>JCoParameterList ParameterList = function.getImportParameterList(); \n</code></pre>\n<p>in Java I can receive this data, but how to deal with this variable of type <code>JCoParameterList</code>? I.e. how can I get information from this variable <code>ParameterList</code> on the name of the parameters, their types and the values with which they were called in SAP?</p>\n<p>I will be grateful for any suggestions on how in Java we can retrieve this data from object of type <code>JCoParameterList</code>!</p>\n<p>Kind regards,\nAndrew</p>\n"},{"tags":["java","security","kerberos","ntlm","gssapi"],"answers":[{"comments":[{"owner":{"account_id":976798,"reputation":690,"user_id":997696,"accept_rate":74,"display_name":"Matan"},"score":0,"creation_date":1366198222,"post_id":16015899,"comment_id":22916847,"body_markdown":"I think I configured it properly. I posted my code and my configurations, I&#39;ll be happy if you can help understanding what&#39;s wrong. Thanks.","body":"I think I configured it properly. I posted my code and my configurations, I&#39;ll be happy if you can help understanding what&#39;s wrong. Thanks."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1366232983,"post_id":16015899,"comment_id":22937583,"body_markdown":"What do you expect to use? NTLM or Kerberos?","body":"What do you expect to use? NTLM or Kerberos?"},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1366276154,"post_id":16015899,"comment_id":22952175,"body_markdown":"1. Remove all `System.setProperty` from your app and supply them with `-D` at start time. 2. Provide sample hostnames (SPNs) and UPNs where your are trying to connect. We need to check the entire path. Cross-realm in a forest not a problem with JGSS. This works here with a charm. You might want to ease the pain for boiler-plate from by using this [library](http://dirctxsrc.sourceforge.net/).","body":"1. Remove all <code>System.setProperty</code> from your app and supply them with <code>-D</code> at start time. 2. Provide sample hostnames (SPNs) and UPNs where your are trying to connect. We need to check the entire path. Cross-realm in a forest not a problem with JGSS. This works here with a charm. You might want to ease the pain for boiler-plate from by using this <a href=\"http://dirctxsrc.sourceforge.net/\" rel=\"nofollow noreferrer\">library</a>."},{"owner":{"account_id":976798,"reputation":690,"user_id":997696,"accept_rate":74,"display_name":"Matan"},"score":0,"creation_date":1366292018,"post_id":16015899,"comment_id":22961583,"body_markdown":"I cannot remove the System.setProperty because currently I&#39;m using these in order to work with different realms. Without those, I will not be able to work with different subdomains even if I&#39;ll restart my application. Unfortunately, I cannot perform major changes like using a different library...","body":"I cannot remove the System.setProperty because currently I&#39;m using these in order to work with different realms. Without those, I will not be able to work with different subdomains even if I&#39;ll restart my application. Unfortunately, I cannot perform major changes like using a different library..."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1366297112,"post_id":16015899,"comment_id":22964991,"body_markdown":"Why? All realms are specified in the `krb.conf`. These is no need to duplicate those. SPNs: [here](http://msdn.microsoft.com/en-us/library/cc228113.aspx).","body":"Why? All realms are specified in the <code>krb.conf</code>. These is no need to duplicate those. SPNs: <a href=\"http://msdn.microsoft.com/en-us/library/cc228113.aspx\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":976798,"reputation":690,"user_id":997696,"accept_rate":74,"display_name":"Matan"},"score":0,"creation_date":1366550136,"post_id":16015899,"comment_id":23043151,"body_markdown":"Tried without the setProperty: The application does not work at all when working with the forign domain (not the domain the bind user is connected to). If I&#39;ll specify the default domain in the krb5 file, the application will work only with that domain and no with others. I guess I have to use the setPropery statements.","body":"Tried without the setProperty: The application does not work at all when working with the forign domain (not the domain the bind user is connected to). If I&#39;ll specify the default domain in the krb5 file, the application will work only with that domain and no with others. I guess I have to use the setPropery statements."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1366550938,"post_id":16015899,"comment_id":23043394,"body_markdown":"No, you don&#39;t your `krb5.conf` is incorrect. You still have failed to provide the information I have asked for. Otherwise I am not able to help you.","body":"No, you don&#39;t your <code>krb5.conf</code> is incorrect. You still have failed to provide the information I have asked for. Otherwise I am not able to help you."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1366973734,"post_id":16015899,"comment_id":23222973,"body_markdown":"There is no need to publish them 1:1. I am fully satisfied if you obfuscate them as long as the struncture remains the same.","body":"There is no need to publish them 1:1. I am fully satisfied if you obfuscate them as long as the struncture remains the same."},{"owner":{"account_id":976798,"reputation":690,"user_id":997696,"accept_rate":74,"display_name":"Matan"},"score":0,"creation_date":1367328146,"post_id":16015899,"comment_id":23336153,"body_markdown":"But I&#39;m not using the SPN&#39;s. My code and my config is written above together with the output with krb.debug=true - I&#39;m just using the realm and kdc...","body":"But I&#39;m not using the SPN&#39;s. My code and my config is written above together with the output with krb.debug=true - I&#39;m just using the realm and kdc..."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1367328651,"post_id":16015899,"comment_id":23336502,"body_markdown":"Yes, you are using them because SPNs, DNS names and realms are closely related and you DO have a realm problem.","body":"Yes, you are using them because SPNs, DNS names and realms are closely related and you DO have a realm problem."},{"owner":{"account_id":976798,"reputation":690,"user_id":997696,"accept_rate":74,"display_name":"Matan"},"score":0,"creation_date":1367514607,"post_id":16015899,"comment_id":23411361,"body_markdown":"Yes, it does seem like a realm problem. So please, explain me how to get those SPN&#39;s from my code / configurations and I&#39;ll provide it.","body":"Yes, it does seem like a realm problem. So please, explain me how to get those SPN&#39;s from my code / configurations and I&#39;ll provide it."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1368354363,"post_id":16015899,"comment_id":23695357,"body_markdown":"I was able to reprocude this issue with Windows 7 and Windows Server 2003 and 2008 KDCs. You are missing a few `[domain_realm]` entries. At it resolved here. It should look like [this](http://pastebin.com/JmkqnWpF).","body":"I was able to reprocude this issue with Windows 7 and Windows Server 2003 and 2008 KDCs. You are missing a few <code>[domain_realm]</code> entries. At it resolved here. It should look like <a href=\"http://pastebin.com/JmkqnWpF\" rel=\"nofollow noreferrer\">this</a>."}],"tags":[],"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"comment_count":12,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366031080,"creation_date":1366031080,"answer_id":16015899,"question_id":15932361,"body_markdown":"NTLM != Kerberos. Java SASL does not support NTLM. Configure Kerberos properly and it&#39;ll work.","title":"GSSException: Message stream modified (41)","body":"<p>NTLM != Kerberos. Java SASL does not support NTLM. Configure Kerberos properly and it'll work.</p>\n"},{"comments":[{"owner":{"account_id":11565,"reputation":2579,"user_id":22365,"accept_rate":57,"display_name":"Justin"},"score":0,"creation_date":1379969636,"post_id":16616161,"comment_id":28016823,"body_markdown":"Timely fix - this was exactly what was wrong about my config.  Not an intuitive error at all, but putting the domain to upper case fixed my issue.","body":"Timely fix - this was exactly what was wrong about my config.  Not an intuitive error at all, but putting the domain to upper case fixed my issue."}],"tags":[],"owner":{"account_id":2783061,"reputation":101,"user_id":2395171,"display_name":"Nika Gerson Lohman"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1368817317,"creation_date":1368817317,"answer_id":16616161,"question_id":15932361,"body_markdown":"Thanks for this! Just for reference, uppercase of the realm (ie. the realm should be 100% correct and in uppercase) is very important to avoid &quot;Exception: krb_error 41 Message stream modified (41) &quot;.\r\n\r\nHere&#39;s an example of correct notation:\r\n\r\n\r\n    [libdefaults] \r\n    default_realm = EXAMPLE.COM\r\n    \r\n    [realms] \r\n    EXAMPLE.COM = { \r\n    kdc = domaincontroller.example.com\r\n    admin_server = domaincontroller.example.com\r\n    default_domain = EXAMPLE.COM\r\n    } \r\n    \r\n    [domain_realm] \r\n    .example.com = EXAMPLE.COM\r\n    example.com = EXAMPLE.COM\r\n\r\nRegards,\r\n\r\nNika.\r\n\r\n","title":"GSSException: Message stream modified (41)","body":"<p>Thanks for this! Just for reference, uppercase of the realm (ie. the realm should be 100% correct and in uppercase) is very important to avoid \"Exception: krb_error 41 Message stream modified (41) \".</p>\n\n<p>Here's an example of correct notation:</p>\n\n<pre><code>[libdefaults] \ndefault_realm = EXAMPLE.COM\n\n[realms] \nEXAMPLE.COM = { \nkdc = domaincontroller.example.com\nadmin_server = domaincontroller.example.com\ndefault_domain = EXAMPLE.COM\n} \n\n[domain_realm] \n.example.com = EXAMPLE.COM\nexample.com = EXAMPLE.COM\n</code></pre>\n\n<p>Regards,</p>\n\n<p>Nika.</p>\n"}],"owner":{"account_id":976798,"reputation":690,"user_id":997696,"accept_rate":74,"display_name":"Matan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14266,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1682860185,"creation_date":1365614306,"question_id":15932361,"body_markdown":"I&#39;m working with an LDAP in forest architecture (all servers and my server are windows). I&#39;m binding to the AD using NTLM authentication.\r\n\r\nI have a Java code that perform the operations against the LDAP server.\r\n\r\nThe code is wrapped as a tomcat servlet.\r\n\r\nWhen running the Java code directly (just executing the LDAP authentication code as an application), the bind works both against the local domain (local domain = I logged in to windows, and ran this process with a user of this domain) and foreign domains.\r\n\r\nWhen running the Java code as a servlet, the bind works and authenticates users from one domain but does not work if I&#39;m trying to authenticate users from other domain, it won&#39;t work (it will work only if I&#39;ll restart tomcat).\r\n\r\nI&#39;m getting an exception:\r\n\r\n\tGSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]]\r\n\r\nI&#39;ll mention that it is the same code, with the same configurations and the same krb5 file.\r\n\r\nMore information:\r\n\r\nThis is my code:\r\n\r\n\tpublic void func(String realm, String kdc) {\r\n\t    try {\r\n\t      URL configURL = getClass().getResource(&quot;jaas_ntlm_configuration.txt&quot;);\r\n\t        System.setProperty(&quot;java.security.auth.login.config&quot;, configURL.toString());\r\n\r\n                System.setProperty(&quot;java.security.krb5.realm&quot;, realm);\r\n                System.setProperty(&quot;java.security.krb5.kdc&quot;,kdc);\r\n\t\r\n\t        // If the application is run on NT rather than Unix, use this name\r\n\t        String loginAppName = &quot;MyConfig&quot;;\r\n\t\r\n\t        // Create login context\r\n\t        LoginContext lc = new LoginContext(loginAppName, new SampleCallbackHandler());\r\n\t\r\n\t        // Retrieve the information on the logged-in user\r\n\t        lc.login();\r\n\t\r\n\t        // Get the authenticated subject\r\n\t        Subject subject = lc.getSubject();\r\n\t\r\n\t        System.out.println(subject.toString());\r\n\t\r\n\t        Subject.doAs(subject, new JndiAction(new String[] { &quot;&quot; }));\r\n\t    }\r\n\t    catch (LoginException e) {\r\n\t      e.printStackTrace();\r\n\t    }\r\n\t}\r\n\t\r\n\tclass JndiAction implements java.security.PrivilegedAction {\r\n\t    private String[] args;\r\n\t\r\n\t    public JndiAction(String[] origArgs) {\r\n\t        this.args = (String[])origArgs.clone();\r\n\t    }\r\n\t\r\n\t    public Object run() {\r\n\t        performJndiOperation(args);\r\n\t        return null;\r\n\t    }\r\n\t\r\n\t    private static void performJndiOperation(String[] args) {\r\n\t\r\n\t        // Set up environment for creating initial context\r\n\t        Hashtable env = new Hashtable(11);\r\n\t\r\n\t        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n\t\r\n\t        // Must use fully qualified hostname\r\n\t        env.put(Context.PROVIDER_URL, &quot;ldap://server:389&quot;);\r\n\t\r\n\t        // Request the use of the &quot;GSSAPI&quot; SASL mechanism\r\n\t        // Authenticate by using already established Kerberos credentials\r\n\t        env.put(Context.SECURITY_AUTHENTICATION, &quot;GSSAPI&quot;);\r\n\t\r\n\t        try {\r\n\t            // Create the initial context\r\n\t            DirContext ctx = new InitialLdapContext(env, null);\r\n\t\r\n\t\r\n\t            // Close the context when we&#39;re done\r\n\t            ctx.close();\r\n\t        } catch (NamingException e) {\r\n\t            e.printStackTrace();\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\nAnd my `jaas_ntlm_configuration.txt` file contains:\r\n\r\n\tMyConfig { com.sun.security.auth.module.Krb5LoginModule required\r\n\tuseTicketCache=true\r\n\tdoNotPrompt=false;\r\n\t};\r\n\r\nMy `krb5.conf` file is:\r\n\r\n\t# \r\n\t# All rights reserved.\r\n\t#\r\n\t#pragma ident\t@(#)krb5.conf\t1.1 00/12/08\r\n\t\r\n\t[libdefaults]\r\n\t\tdefault_tkt_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc\r\n\t\tdefault_tgs_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc\r\n\t\tforwardable  = true\r\n\t\trenewable  = true\r\n\t\tnoaddresses = true\r\n\t\tclockskew  = 300\r\n\t\r\n\t[realms]\r\n\t        SUB1.EXAMPLE.COM = {\r\n\t                kdc = DDC.SUB1.EXAMPLE.COM\r\n\t\t\tdefault_domain=EXAMPLE.COM\r\n\t        }\r\n\t\tSUB2.EXAMPLE.COM = {\r\n\t                kdc = DDC.SUB.EXAMPLE.COM\r\n\t\t\tdefault_domain=EXAMPLE.COM\r\n\t        }\r\n\t\tSUB3.EXAMPLE.COM = {\r\n\t                kdc = DDC.SUB3.EXAMPLE.COM\r\n\t\t\tdefault_domain=EXAMPLE.COM\r\n\t        }\r\n\t\r\n\t[domain_realm]\r\n\t\t.EXAMPLE.COM = SUB1.EXAMPLE.COM\r\n\t\t.EXAMPLE.COM = SUB2.EXAMPLE.COM\r\n\t\t.EXAMPLE.COM = SUB3.EXAMPLE.COM\r\n\t\r\n\t[logging]\r\n\t        default = FILE:/var/krb5/kdc.log\r\n\t        kdc = FILE:/var/krb5/kdc.log\r\n\t\tkdc_rotate = {\r\n\t\r\n\t# How often to rotate kdc.log. Logs will get rotated no more\r\n\t# often than the period, and less often if the KDC is not used\r\n\t# frequently.\r\n\t\r\n\t\t\tperiod = 1d\r\n\t\r\n\t# how many versions of kdc.log to keep around (kdc.log.0, kdc.log.1, ...)\r\n\t\r\n\t\t\tversions = 10\r\n\t\t}\r\n\t\r\n\t[appdefaults]\t\r\n\t\tkinit = {\r\n\t\t\trenewable = true\r\n\t\t\tforwardable= true\r\n\t\t}\r\n\t\trlogin = {\r\n\t\t\tforwardable= true\r\n\t\t}\r\n\t\trsh = {\r\n\t\t\tforwardable= true\r\n\t\t}\r\n\t\ttelnet = {\r\n\t        \tautologin = true \r\n\t\t\tforwardable= true\r\n\t\t}\r\n\r\nI added the following as Java parameters:\r\n\r\n\t-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf=&quot;krb5.conf&quot; -Dsun.security.krb5.debug=true\r\n\r\nIf I call func(&quot;SUB*.EXAMPLE.COM&quot;, &quot;DDC.SUB*.EXAMPLE.COM&quot;) always with the same subdomain - it will work, but if I&#39;ll call with one subdomain and then with another, the second will fail.\r\n\r\n**More information:**\r\n\r\nHere is the output with krb5.debug=true:\r\n\r\n\tjava -Xmx100m -cp gssapi_test.jar -Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf=&quot;krb5.conf&quot; -Dsun.security.krb5.debug=true  gssapitest.myTest my_config.txt\r\n\t2 users provided. Performing authentication #1\r\n\tReading configuration file my_config.txt\r\n\tkdc: DDC.SUB1.EXAMPLE.COM, realm: SUB1.EXAMPLE.COM\r\n\t&gt;&gt;&gt;KinitOptions cache name is C:\\Users\\user1\\krb5cc_user1\r\n\t&gt;&gt; Acquire default native Credentials\r\n\t&gt;&gt;&gt; Obtained TGT from LSA: Credentials:\r\n\tclient=user1@SUB1.EXAMPLE.COM\r\n\tserver=krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\r\n\tauthTime=20130422075139Z\r\n\tstartTime=20130422075139Z\r\n\tendTime=20130422175139Z\r\n\trenewTill=20130429075139Z\r\n\tflags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT\r\n\tEType (int): 23\r\n\tSubject:\r\n\t\tPrincipal: user1@SUB1.EXAMPLE.COM\r\n\t\tPrivate Credential: Ticket (hex) = \r\n\t.....\r\n\r\n\tClient Principal = user1@SUB1.EXAMPLE.COM\r\n\tServer Principal = krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\r\n\tSession Key = EncryptionKey: keyType=23 keyBytes (hex dump)=\r\n\t0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..&lt;..f.mXl7 ..S\r\n\r\n\tForwardable Ticket true\r\n\tForwarded Ticket false\r\n\tProxiable Ticket false\r\n\tProxy Ticket false\r\n\tPostdated Ticket false\r\n\tRenewable Ticket true\r\n\tInitial Ticket true\r\n\tAuth Time = Mon Apr 22 15:51:39 2013\r\n\tStart Time = Mon Apr 22 15:51:39 2013\r\n\tEnd Time = Tue Apr 23 01:51:39 2013\r\n\tRenew Till = Mon Apr 29 15:51:39 2013\r\n\tClient Addresses  Null \r\n\r\n\tConnecting to LDAP\r\n\tConfig name: krb5.conf\r\n\tFound ticket for user1@SUB1.EXAMPLE.COM to go to krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM expiring on Tue Apr 23 01:51:39 2013\r\n\tEntered Krb5Context.initSecContext with state=STATE_NEW\r\n\tService ticket not found in the subject\r\n\t&gt;&gt;&gt; Credentials acquireServiceCreds: same realm\r\n\tdefault etypes for default_tgs_enctypes: 16 3 1.\r\n\t&gt;&gt;&gt; CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\r\n\t&gt;&gt;&gt; KdcAccessibility: reset\r\n\t&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554\r\n\t&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554\r\n\t&gt;&gt;&gt; KrbKdcReq send: #bytes read=107\r\n\t&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554\r\n\t&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554\r\n\t&gt;&gt;&gt;DEBUG: TCPClient reading 1497 bytes\r\n\t&gt;&gt;&gt; KrbKdcReq send: #bytes read=1497\r\n\t&gt;&gt;&gt; KdcAccessibility: remove DDC.SUB1.EXAMPLE.COM\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\r\n\t&gt;&gt;&gt; KrbApReq: APOptions are 00000000 00000000 00000000 00000000\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.DesCbcMd5EType\r\n\tKrb5Context setting mySeqNumber to: 1005735013\r\n\tKrb5Context setting peerSeqNumber to: 0\r\n\tCreated InitSecContextToken:\r\n\t.....\r\n\r\n\tKrb5Context.unwrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 94 52 14 5b f6 02 28 1c a4 3c c5 8f 03 9c a2 d6 e5 f6 f1 18 ed 6f 16 ab 07 a0 00 00 04 04 04 04 ]\r\n\tKrb5Context.unwrap: data=[07 a0 00 00 ]\r\n\tKrb5Context.wrap: data=[01 01 00 00 ]\r\n\tKrb5Context.wrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 2d b6 92 0d d9 51 da aa ef 41 67 33 5c de b3 e6 ce 9a 46 31 a0 a8 0e 27 01 01 00 00 04 04 04 04 ]\r\n\tConnected\r\n\tDisconnected\r\n\t#1: Done\r\n\tPerforming authentication #2\r\n\tReading configuration file my_config.txt\r\n\tkdc: DDC.SUB2.EXAMPLE.COM, realm: SUB2.EXAMPLE.COM\r\n\t&gt;&gt;&gt;KinitOptions cache name is C:\\Users\\user1\\krb5cc_user1\r\n\t&gt;&gt; Acquire default native Credentials\r\n\t&gt;&gt;&gt; Obtained TGT from LSA: Credentials:\r\n\tclient=user1@SUB1.EXAMPLE.COM\r\n\tserver=krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\r\n\tauthTime=20130422075139Z\r\n\tstartTime=20130422075139Z\r\n\tendTime=20130422175139Z\r\n\trenewTill=20130429075139Z\r\n\tflags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT\r\n\tEType (int): 23\r\n\tSubject:\r\n\t\tPrincipal: user1@SUB1.EXAMPLE.COM\r\n\t\tPrivate Credential: Ticket (hex) = \r\n\t.....\r\n\r\n\tClient Principal = user1@SUB1.EXAMPLE.COM\r\n\tServer Principal = krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\r\n\tSession Key = EncryptionKey: keyType=23 keyBytes (hex dump)=\r\n\t0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..&lt;..f.mXl7 ..S\r\n\r\n\tForwardable Ticket true\r\n\tForwarded Ticket false\r\n\tProxiable Ticket false\r\n\tProxy Ticket false\r\n\tPostdated Ticket false\r\n\tRenewable Ticket true\r\n\tInitial Ticket true\r\n\tAuth Time = Mon Apr 22 15:51:39 2013\r\n\tStart Time = Mon Apr 22 15:51:39 2013\r\n\tEnd Time = Tue Apr 23 01:51:39 2013\r\n\tRenew Till = Mon Apr 29 15:51:39 2013\r\n\tClient Addresses  Null \r\n\r\n\tConnecting to LDAP\r\n\tFound ticket for user1@SUB1.EXAMPLE.COM to go to krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM expiring on Tue Apr 23 01:51:39 2013\r\n\tEntered Krb5Context.initSecContext with state=STATE_NEW\r\n\tService ticket not found in the subject\r\n\t&gt;&gt;&gt; Credentials acquireServiceCreds: same realm\r\n\tdefault etypes for default_tgs_enctypes: 16 3 1.\r\n\t&gt;&gt;&gt; CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\r\n\t&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554\r\n\t&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554\r\n\t&gt;&gt;&gt; KrbKdcReq send: #bytes read=107\r\n\t&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554\r\n\t&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554\r\n\t&gt;&gt;&gt;DEBUG: TCPClient reading 1482 bytes\r\n\t&gt;&gt;&gt; KrbKdcReq send: #bytes read=1482\r\n\t&gt;&gt;&gt; KdcAccessibility: remove DDC.SUB1.EXAMPLE.COM\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\r\n\tKrbException: Message stream modified (41)\r\n\t\tat sun.security.krb5.KrbKdcRep.check(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsRep.&lt;init&gt;(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsReq.getReply(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)\r\n\t\tat sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)\r\n\t\tat sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)\r\n\t\tat sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)\r\n\t\tat sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)\r\n\t\tat sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\r\n\t\tat sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\r\n\t\tat com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtx.&lt;init&gt;(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)\r\n\t\tat javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\r\n\t\tat javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\r\n\t\tat javax.naming.InitialContext.init(Unknown Source)\r\n\t\tat javax.naming.ldap.InitialLdapContext.&lt;init&gt;(Unknown Source)\r\n\t\tat gssapitest.JndiAction.performJndiOperation(myTest.java:603)\r\n\t\tat gssapitest.JndiAction.run(myTest.java:577)\r\n\t\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t\tat javax.security.auth.Subject.doAs(Unknown Source)\r\n\t\tat gssapitest.myTest.Do(myTest.java:59)\r\n\t\tat gssapitest.myTest.main(myTest.java:513)\r\n\tjavax.naming.AuthenticationException: GSSAPI [Root exception is javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]]\r\n\t\tat com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtx.&lt;init&gt;(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)\r\n\t\tat javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\r\n\t\tat javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\r\n\t\tat javax.naming.InitialContext.init(Unknown Source)\r\n\t\tat javax.naming.ldap.InitialLdapContext.&lt;init&gt;(Unknown Source)\r\n\t\tat gssapitest.JndiAction.performJndiOperation(myTest.java:603)\r\n\t\tat gssapitest.JndiAction.run(myTest.java:577)\r\n\t\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t\tat javax.security.auth.Subject.doAs(Unknown Source)\r\n\t\tat gssapitest.myTest.Do(myTest.java:59)\r\n\t\tat gssapitest.myTest.main(myTest.java:513)\r\n\tCaused by: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]\r\n\t\tat com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)\r\n\t\t... 18 more\r\n\tCaused by: GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))\r\n\t\tat sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)\r\n\t\tat sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\r\n\t\tat sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\r\n\t\t... 19 more\r\n\tCaused by: KrbException: Message stream modified (41)\r\n\t\tat sun.security.krb5.KrbKdcRep.check(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsRep.&lt;init&gt;(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsReq.getReply(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)\r\n\t\tat sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)\r\n\t\tat sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)\r\n\t\tat sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)\r\n\t\t... 22 more\r\n\tFAILED\r\n\r\nWhat can I do? Am I doings something wrongs?\r\n\r\n","title":"GSSException: Message stream modified (41)","body":"<p>I'm working with an LDAP in forest architecture (all servers and my server are windows). I'm binding to the AD using NTLM authentication.</p>\n<p>I have a Java code that perform the operations against the LDAP server.</p>\n<p>The code is wrapped as a tomcat servlet.</p>\n<p>When running the Java code directly (just executing the LDAP authentication code as an application), the bind works both against the local domain (local domain = I logged in to windows, and ran this process with a user of this domain) and foreign domains.</p>\n<p>When running the Java code as a servlet, the bind works and authenticates users from one domain but does not work if I'm trying to authenticate users from other domain, it won't work (it will work only if I'll restart tomcat).</p>\n<p>I'm getting an exception:</p>\n<pre><code>GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]]\n</code></pre>\n<p>I'll mention that it is the same code, with the same configurations and the same krb5 file.</p>\n<p>More information:</p>\n<p>This is my code:</p>\n<pre><code>public void func(String realm, String kdc) {\n    try {\n      URL configURL = getClass().getResource(&quot;jaas_ntlm_configuration.txt&quot;);\n        System.setProperty(&quot;java.security.auth.login.config&quot;, configURL.toString());\n\n            System.setProperty(&quot;java.security.krb5.realm&quot;, realm);\n            System.setProperty(&quot;java.security.krb5.kdc&quot;,kdc);\n\n        // If the application is run on NT rather than Unix, use this name\n        String loginAppName = &quot;MyConfig&quot;;\n\n        // Create login context\n        LoginContext lc = new LoginContext(loginAppName, new SampleCallbackHandler());\n\n        // Retrieve the information on the logged-in user\n        lc.login();\n\n        // Get the authenticated subject\n        Subject subject = lc.getSubject();\n\n        System.out.println(subject.toString());\n\n        Subject.doAs(subject, new JndiAction(new String[] { &quot;&quot; }));\n    }\n    catch (LoginException e) {\n      e.printStackTrace();\n    }\n}\n\nclass JndiAction implements java.security.PrivilegedAction {\n    private String[] args;\n\n    public JndiAction(String[] origArgs) {\n        this.args = (String[])origArgs.clone();\n    }\n\n    public Object run() {\n        performJndiOperation(args);\n        return null;\n    }\n\n    private static void performJndiOperation(String[] args) {\n\n        // Set up environment for creating initial context\n        Hashtable env = new Hashtable(11);\n\n        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n\n        // Must use fully qualified hostname\n        env.put(Context.PROVIDER_URL, &quot;ldap://server:389&quot;);\n\n        // Request the use of the &quot;GSSAPI&quot; SASL mechanism\n        // Authenticate by using already established Kerberos credentials\n        env.put(Context.SECURITY_AUTHENTICATION, &quot;GSSAPI&quot;);\n\n        try {\n            // Create the initial context\n            DirContext ctx = new InitialLdapContext(env, null);\n\n\n            // Close the context when we're done\n            ctx.close();\n        } catch (NamingException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>And my <code>jaas_ntlm_configuration.txt</code> file contains:</p>\n<pre><code>MyConfig { com.sun.security.auth.module.Krb5LoginModule required\nuseTicketCache=true\ndoNotPrompt=false;\n};\n</code></pre>\n<p>My <code>krb5.conf</code> file is:</p>\n<pre><code># \n# All rights reserved.\n#\n#pragma ident   @(#)krb5.conf   1.1 00/12/08\n\n[libdefaults]\n    default_tkt_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc\n    default_tgs_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc\n    forwardable  = true\n    renewable  = true\n    noaddresses = true\n    clockskew  = 300\n\n[realms]\n        SUB1.EXAMPLE.COM = {\n                kdc = DDC.SUB1.EXAMPLE.COM\n        default_domain=EXAMPLE.COM\n        }\n    SUB2.EXAMPLE.COM = {\n                kdc = DDC.SUB.EXAMPLE.COM\n        default_domain=EXAMPLE.COM\n        }\n    SUB3.EXAMPLE.COM = {\n                kdc = DDC.SUB3.EXAMPLE.COM\n        default_domain=EXAMPLE.COM\n        }\n\n[domain_realm]\n    .EXAMPLE.COM = SUB1.EXAMPLE.COM\n    .EXAMPLE.COM = SUB2.EXAMPLE.COM\n    .EXAMPLE.COM = SUB3.EXAMPLE.COM\n\n[logging]\n        default = FILE:/var/krb5/kdc.log\n        kdc = FILE:/var/krb5/kdc.log\n    kdc_rotate = {\n\n# How often to rotate kdc.log. Logs will get rotated no more\n# often than the period, and less often if the KDC is not used\n# frequently.\n\n        period = 1d\n\n# how many versions of kdc.log to keep around (kdc.log.0, kdc.log.1, ...)\n\n        versions = 10\n    }\n\n[appdefaults]   \n    kinit = {\n        renewable = true\n        forwardable= true\n    }\n    rlogin = {\n        forwardable= true\n    }\n    rsh = {\n        forwardable= true\n    }\n    telnet = {\n            autologin = true \n        forwardable= true\n    }\n</code></pre>\n<p>I added the following as Java parameters:</p>\n<pre><code>-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf=&quot;krb5.conf&quot; -Dsun.security.krb5.debug=true\n</code></pre>\n<p>If I call func(&quot;SUB*.EXAMPLE.COM&quot;, &quot;DDC.SUB*.EXAMPLE.COM&quot;) always with the same subdomain - it will work, but if I'll call with one subdomain and then with another, the second will fail.</p>\n<p><strong>More information:</strong></p>\n<p>Here is the output with krb5.debug=true:</p>\n<pre><code>java -Xmx100m -cp gssapi_test.jar -Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf=&quot;krb5.conf&quot; -Dsun.security.krb5.debug=true  gssapitest.myTest my_config.txt\n2 users provided. Performing authentication #1\nReading configuration file my_config.txt\nkdc: DDC.SUB1.EXAMPLE.COM, realm: SUB1.EXAMPLE.COM\n&gt;&gt;&gt;KinitOptions cache name is C:\\Users\\user1\\krb5cc_user1\n&gt;&gt; Acquire default native Credentials\n&gt;&gt;&gt; Obtained TGT from LSA: Credentials:\nclient=user1@SUB1.EXAMPLE.COM\nserver=krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\nauthTime=20130422075139Z\nstartTime=20130422075139Z\nendTime=20130422175139Z\nrenewTill=20130429075139Z\nflags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT\nEType (int): 23\nSubject:\n    Principal: user1@SUB1.EXAMPLE.COM\n    Private Credential: Ticket (hex) = \n.....\n\nClient Principal = user1@SUB1.EXAMPLE.COM\nServer Principal = krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\nSession Key = EncryptionKey: keyType=23 keyBytes (hex dump)=\n0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..&lt;..f.mXl7 ..S\n\nForwardable Ticket true\nForwarded Ticket false\nProxiable Ticket false\nProxy Ticket false\nPostdated Ticket false\nRenewable Ticket true\nInitial Ticket true\nAuth Time = Mon Apr 22 15:51:39 2013\nStart Time = Mon Apr 22 15:51:39 2013\nEnd Time = Tue Apr 23 01:51:39 2013\nRenew Till = Mon Apr 29 15:51:39 2013\nClient Addresses  Null \n\nConnecting to LDAP\nConfig name: krb5.conf\nFound ticket for user1@SUB1.EXAMPLE.COM to go to krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM expiring on Tue Apr 23 01:51:39 2013\nEntered Krb5Context.initSecContext with state=STATE_NEW\nService ticket not found in the subject\n&gt;&gt;&gt; Credentials acquireServiceCreds: same realm\ndefault etypes for default_tgs_enctypes: 16 3 1.\n&gt;&gt;&gt; CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\n&gt;&gt;&gt; KdcAccessibility: reset\n&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554\n&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554\n&gt;&gt;&gt; KrbKdcReq send: #bytes read=107\n&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554\n&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554\n&gt;&gt;&gt;DEBUG: TCPClient reading 1497 bytes\n&gt;&gt;&gt; KrbKdcReq send: #bytes read=1497\n&gt;&gt;&gt; KdcAccessibility: remove DDC.SUB1.EXAMPLE.COM\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\n&gt;&gt;&gt; KrbApReq: APOptions are 00000000 00000000 00000000 00000000\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.DesCbcMd5EType\nKrb5Context setting mySeqNumber to: 1005735013\nKrb5Context setting peerSeqNumber to: 0\nCreated InitSecContextToken:\n.....\n\nKrb5Context.unwrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 94 52 14 5b f6 02 28 1c a4 3c c5 8f 03 9c a2 d6 e5 f6 f1 18 ed 6f 16 ab 07 a0 00 00 04 04 04 04 ]\nKrb5Context.unwrap: data=[07 a0 00 00 ]\nKrb5Context.wrap: data=[01 01 00 00 ]\nKrb5Context.wrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 2d b6 92 0d d9 51 da aa ef 41 67 33 5c de b3 e6 ce 9a 46 31 a0 a8 0e 27 01 01 00 00 04 04 04 04 ]\nConnected\nDisconnected\n#1: Done\nPerforming authentication #2\nReading configuration file my_config.txt\nkdc: DDC.SUB2.EXAMPLE.COM, realm: SUB2.EXAMPLE.COM\n&gt;&gt;&gt;KinitOptions cache name is C:\\Users\\user1\\krb5cc_user1\n&gt;&gt; Acquire default native Credentials\n&gt;&gt;&gt; Obtained TGT from LSA: Credentials:\nclient=user1@SUB1.EXAMPLE.COM\nserver=krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\nauthTime=20130422075139Z\nstartTime=20130422075139Z\nendTime=20130422175139Z\nrenewTill=20130429075139Z\nflags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT\nEType (int): 23\nSubject:\n    Principal: user1@SUB1.EXAMPLE.COM\n    Private Credential: Ticket (hex) = \n.....\n\nClient Principal = user1@SUB1.EXAMPLE.COM\nServer Principal = krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\nSession Key = EncryptionKey: keyType=23 keyBytes (hex dump)=\n0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..&lt;..f.mXl7 ..S\n\nForwardable Ticket true\nForwarded Ticket false\nProxiable Ticket false\nProxy Ticket false\nPostdated Ticket false\nRenewable Ticket true\nInitial Ticket true\nAuth Time = Mon Apr 22 15:51:39 2013\nStart Time = Mon Apr 22 15:51:39 2013\nEnd Time = Tue Apr 23 01:51:39 2013\nRenew Till = Mon Apr 29 15:51:39 2013\nClient Addresses  Null \n\nConnecting to LDAP\nFound ticket for user1@SUB1.EXAMPLE.COM to go to krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM expiring on Tue Apr 23 01:51:39 2013\nEntered Krb5Context.initSecContext with state=STATE_NEW\nService ticket not found in the subject\n&gt;&gt;&gt; Credentials acquireServiceCreds: same realm\ndefault etypes for default_tgs_enctypes: 16 3 1.\n&gt;&gt;&gt; CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\n&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554\n&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554\n&gt;&gt;&gt; KrbKdcReq send: #bytes read=107\n&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554\n&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554\n&gt;&gt;&gt;DEBUG: TCPClient reading 1482 bytes\n&gt;&gt;&gt; KrbKdcReq send: #bytes read=1482\n&gt;&gt;&gt; KdcAccessibility: remove DDC.SUB1.EXAMPLE.COM\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\nKrbException: Message stream modified (41)\n    at sun.security.krb5.KrbKdcRep.check(Unknown Source)\n    at sun.security.krb5.KrbTgsRep.&lt;init&gt;(Unknown Source)\n    at sun.security.krb5.KrbTgsReq.getReply(Unknown Source)\n    at sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)\n    at sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)\n    at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)\n    at sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)\n    at sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)\n    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\n    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\n    at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)\n    at com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)\n    at com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtx.&lt;init&gt;(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)\n    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\n    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\n    at javax.naming.InitialContext.init(Unknown Source)\n    at javax.naming.ldap.InitialLdapContext.&lt;init&gt;(Unknown Source)\n    at gssapitest.JndiAction.performJndiOperation(myTest.java:603)\n    at gssapitest.JndiAction.run(myTest.java:577)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.security.auth.Subject.doAs(Unknown Source)\n    at gssapitest.myTest.Do(myTest.java:59)\n    at gssapitest.myTest.main(myTest.java:513)\njavax.naming.AuthenticationException: GSSAPI [Root exception is javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]]\n    at com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)\n    at com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtx.&lt;init&gt;(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)\n    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\n    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\n    at javax.naming.InitialContext.init(Unknown Source)\n    at javax.naming.ldap.InitialLdapContext.&lt;init&gt;(Unknown Source)\n    at gssapitest.JndiAction.performJndiOperation(myTest.java:603)\n    at gssapitest.JndiAction.run(myTest.java:577)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.security.auth.Subject.doAs(Unknown Source)\n    at gssapitest.myTest.Do(myTest.java:59)\n    at gssapitest.myTest.main(myTest.java:513)\nCaused by: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]\n    at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)\n    ... 18 more\nCaused by: GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))\n    at sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)\n    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\n    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\n    ... 19 more\nCaused by: KrbException: Message stream modified (41)\n    at sun.security.krb5.KrbKdcRep.check(Unknown Source)\n    at sun.security.krb5.KrbTgsRep.&lt;init&gt;(Unknown Source)\n    at sun.security.krb5.KrbTgsReq.getReply(Unknown Source)\n    at sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)\n    at sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)\n    at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)\n    at sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)\n    ... 22 more\nFAILED\n</code></pre>\n<p>What can I do? Am I doings something wrongs?</p>\n"},{"tags":["java","saprfc","jco","sapjco3"],"comments":[{"owner":{"account_id":542551,"reputation":10395,"user_id":911419,"accept_rate":79,"display_name":"Suncatcher"},"score":0,"creation_date":1591180104,"post_id":62167677,"comment_id":109954964,"body_markdown":"Does this answer your question? [Implementing different destinations in applications on the Tomcat server](https://stackoverflow.com/questions/46280376/implementing-different-destinations-in-applications-on-the-tomcat-server)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/46280376/implementing-different-destinations-in-applications-on-the-tomcat-server\">Implementing different destinations in applications on the Tomcat server</a>"},{"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"score":0,"creation_date":1591270634,"post_id":62167677,"comment_id":109995315,"body_markdown":"Unfortunately not.","body":"Unfortunately not."},{"owner":{"account_id":542551,"reputation":10395,"user_id":911419,"accept_rate":79,"display_name":"Suncatcher"},"score":0,"creation_date":1591270972,"post_id":62167677,"comment_id":109995514,"body_markdown":"it is about the same RFC function on all three systems?","body":"it is about the same RFC function on all three systems?"},{"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"score":0,"creation_date":1591271788,"post_id":62167677,"comment_id":109996006,"body_markdown":"No, we want to call from SYS_A a RFM function, which is physically stored on SYS_B (and is not on SYS_A). And the point is to dynamically change the repository in JCo depending on what system we call the functions from. For example if we call only functions that are on SYS_A, then we can define repository as `jco.server.repository_destination=SYS_A`, but how to define it to have access also to system repositories from SYS_B and SYS_C when we want to call the functions stored on these systems? Should we use `jco.server.repository_map`? Or maybe we can do it in any different way?:)","body":"No, we want to call from SYS_A a RFM function, which is physically stored on SYS_B (and is not on SYS_A). And the point is to dynamically change the repository in JCo depending on what system we call the functions from. For example if we call only functions that are on SYS_A, then we can define repository as <code>jco.server.repository_destination=SYS_A</code>, but how to define it to have access also to system repositories from SYS_B and SYS_C when we want to call the functions stored on these systems? Should we use <code>jco.server.repository_map</code>? Or maybe we can do it in any different way?:)"},{"owner":{"account_id":542551,"reputation":10395,"user_id":911419,"accept_rate":79,"display_name":"Suncatcher"},"score":0,"creation_date":1591337007,"post_id":62167677,"comment_id":110022244,"body_markdown":"Yes, you need map, [JCO IDOC Server for multiple destinations](https://stackoverflow.com/questions/41117962/jco-idoc-server-for-multiple-destinations)","body":"Yes, you need map, <a href=\"https://stackoverflow.com/questions/41117962/jco-idoc-server-for-multiple-destinations\">JCO IDOC Server for multiple destinations</a>"},{"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"score":0,"creation_date":1591340768,"post_id":62167677,"comment_id":110023694,"body_markdown":"Ok, thanks thank you for confirmation. \nI see documentation of `JCO_REP_MAP` ([link](https://www.int13h.nl:8443/_content/SAPDocuments/JCo_API_3_0/index.html?index-all.html)), but how should I exactly use `jco.server.repository_map`? When I am calling from SYS_A (client 100) a RFM stored on SYS_B (on client 200), than I should use it in such way:  `jco.server.repository_destination=SYS_A\njco.server.repository_map=SYS_A(100)=SYS_A;SYS_B(200)=SYS_B` ? But how to define this additional destination for SYS_B?","body":"Ok, thanks thank you for confirmation.  I see documentation of <code>JCO_REP_MAP</code> (<a href=\"https://www.int13h.nl:8443/_content/SAPDocuments/JCo_API_3_0/index.html?index-all.html\" rel=\"nofollow noreferrer\">link</a>), but how should I exactly use <code>jco.server.repository_map</code>? When I am calling from SYS_A (client 100) a RFM stored on SYS_B (on client 200), than I should use it in such way:  <code>jco.server.repository_destination=SYS_A jco.server.repository_map=SYS_A(100)=SYS_A;SYS_B(200)=SYS_B</code> ? But how to define this additional destination for SYS_B?"}],"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682859976,"creation_date":1591170217,"question_id":62167677,"body_markdown":"We have two SAP systems (**SYS_A** and **SYS_B**). From the **SYS_A** we want to call an RFC FM from the system **SYS_B** (an RFM, which is physically on the **SYS_B** system, so JCo Server repository should also point to **SYS_B** repository) with the destination parameter defined as JCo Server, for example on system **SYS_A** we call using ABAP:\r\n\r\n```abap\r\nCALL FUNCTION &#39;RFC_SYS_B&#39;\r\n  DESTINATION &#39;JCO_SERVER&#39;.\r\n```\r\n\r\nSo how to define the properties of the server and repository in JCo in such way, that we get dynamically metadata about the called function? And how to do it dynamically, so that when call an RFC FM from another system **SYS_C** it will also work, i.e JCo Server will also catch this call along with the call metadata?\r\n\r\nShould we use property `jco.server.repository_map` for this? If so, how do you define it using this parameter? How to define it in JCo, that calls are coming from **SYS_A**, but the repositories are on **SYS_A** and **SYS_B** and maybe on any another system?","title":"SAP JCo Server for multiple (dynamic) SAP systems and repositories","body":"<p>We have two SAP systems (<strong>SYS_A</strong> and <strong>SYS_B</strong>). From the <strong>SYS_A</strong> we want to call an RFC FM from the system <strong>SYS_B</strong> (an RFM, which is physically on the <strong>SYS_B</strong> system, so JCo Server repository should also point to <strong>SYS_B</strong> repository) with the destination parameter defined as JCo Server, for example on system <strong>SYS_A</strong> we call using ABAP:</p>\n\n<pre><code>CALL FUNCTION 'RFC_SYS_B'\n  DESTINATION 'JCO_SERVER'.\n</code></pre>\n\n<p>So how to define the properties of the server and repository in JCo in such way, that we get dynamically metadata about the called function? And how to do it dynamically, so that when call an RFC FM from another system <strong>SYS_C</strong> it will also work, i.e JCo Server will also catch this call along with the call metadata?</p>\n\n<p>Should we use property <code>jco.server.repository_map</code> for this? If so, how do you define it using this parameter? How to define it in JCo, that calls are coming from <strong>SYS_A</strong>, but the repositories are on <strong>SYS_A</strong> and <strong>SYS_B</strong> and maybe on any another system?</p>\n"},{"tags":["java","android","android-recyclerview"],"comments":[{"owner":{"account_id":5849714,"reputation":92,"user_id":5362509,"display_name":"Lakshmi"},"score":0,"creation_date":1682844631,"post_id":76140121,"comment_id":134276640,"body_markdown":"view.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    // send selected contact in callback\n                    listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\n                }\n            });","body":"view.setOnClickListener(new View.OnClickListener() {                 @Override                 public void onClick(View view) {                     // send selected contact in callback                     listener.onContactSelected(doctorsListFiltered.get(getAdapte&zwnj;&#8203;rPosition()));                 }             });"},{"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"score":0,"creation_date":1682849271,"post_id":76140121,"comment_id":134277075,"body_markdown":"@alireza could you provide the code of `listener.onContactSelected()`?","body":"@alireza could you provide the code of <code>listener.onContactSelected()</code>?"}],"answers":[{"tags":[],"owner":{"account_id":5849714,"reputation":92,"user_id":5362509,"display_name":"Lakshmi"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682845266,"creation_date":1682845266,"answer_id":76140382,"question_id":76140121,"body_markdown":"    view.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    // send selected contact in callback\r\n                    listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\r\n                }\r\n            }); \r\n\r\nYou have the above method in the constructor of the Viewholder class. May be that is causing  the problem. Instead have the holder.itemView.setOnClickListener() method inside onBindViewHolder() do the above task. That will solve your problem.\r\n                                                                                                                                                                                                               ","title":"how to handle item click on recyclerview for changing an item image?","body":"<pre><code>view.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                // send selected contact in callback\n                listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\n            }\n        }); \n</code></pre>\n<p>You have the above method in the constructor of the Viewholder class. May be that is causing  the problem. Instead have the holder.itemView.setOnClickListener() method inside onBindViewHolder() do the above task. That will solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":12467974,"reputation":26,"user_id":9077161,"display_name":"shimanto ahmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682859795,"creation_date":1682859795,"answer_id":76141406,"question_id":76140121,"body_markdown":"Recycler view creates every item accordingly to its dataset. so when you scroll it gets refreshed by its dataset and your UI changes have no track as you did not change it in your dataset.\r\n\r\nSolution: you need to save a flag when you click on it so that when it gets fresh, the cell knows there is a change and according to this change you triggered what you want to do\r\n\r\nTake a property in your data model like `isSelected` as boolean\r\n\r\n        \r\n\r\n    final RepairItems cat_main = doctorsListFiltered.get(position);\r\n            db = new DatabaseHandler(context);\r\n            holder.cat_name.setText(cat_main.getProducts_title());\r\n            holder.cat_id.setText(cat_main.getProduct_id());\r\n            holder.price.setText(cat_main.getProducts_price());\r\n            \r\n            if(cat_main.isSelected){\r\n                holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\r\n            }else{\r\n                holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\r\n            }\r\n    \r\n    \r\n            holder.linear.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (db.getWishlist(cat_main.getProduct_id()) != null) {\r\n                        db.deleteWishlist(Long.valueOf(cat_main.getProduct_id()));\r\n                        holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\r\n    \r\n                    } else {\r\n                        Wishlist w = new Wishlist(Long.parseLong(cat_main.getProduct_id()), cat_main.getProduct_id(), cat_main.getProducts_title(), Integer.parseInt(cat_main.getProducts_price()));\r\n                        db.saveWishlist(w);\r\n                        holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\r\n                        doctorsListFiltered[position].isSelected=true;\r\n                    }\r\n                }\r\n            });\r\n\r\n   ","title":"how to handle item click on recyclerview for changing an item image?","body":"<p>Recycler view creates every item accordingly to its dataset. so when you scroll it gets refreshed by its dataset and your UI changes have no track as you did not change it in your dataset.</p>\n<p>Solution: you need to save a flag when you click on it so that when it gets fresh, the cell knows there is a change and according to this change you triggered what you want to do</p>\n<p>Take a property in your data model like <code>isSelected</code> as boolean</p>\n<pre><code>final RepairItems cat_main = doctorsListFiltered.get(position);\n        db = new DatabaseHandler(context);\n        holder.cat_name.setText(cat_main.getProducts_title());\n        holder.cat_id.setText(cat_main.getProduct_id());\n        holder.price.setText(cat_main.getProducts_price());\n        \n        if(cat_main.isSelected){\n            holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\n        }else{\n            holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\n        }\n\n\n        holder.linear.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if (db.getWishlist(cat_main.getProduct_id()) != null) {\n                    db.deleteWishlist(Long.valueOf(cat_main.getProduct_id()));\n                    holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\n\n                } else {\n                    Wishlist w = new Wishlist(Long.parseLong(cat_main.getProduct_id()), cat_main.getProduct_id(), cat_main.getProducts_title(), Integer.parseInt(cat_main.getProducts_price()));\n                    db.saveWishlist(w);\n                    holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\n                    doctorsListFiltered[position].isSelected=true;\n                }\n            }\n        });\n</code></pre>\n"}],"owner":{"account_id":11475583,"reputation":89,"user_id":8411199,"display_name":"alireza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76141406,"answer_count":2,"score":0,"last_activity_date":1682859795,"creation_date":1682841313,"question_id":76140121,"body_markdown":"I have a Recyclerview that gets data from server. I want to save every item in database when clicked and also change item image. I have problem in changing image of items. when I click an item multiple items get selected or when scrolling recyclerview item image will change unfortunately.\r\nhere is my adapter code\r\n\r\n\r\n    \r\n    \r\n    public class RepairItemsAdapter extends RecyclerView.Adapter&lt;RepairItemsAdapter.MyViewHolder&gt;\r\n            implements Filterable {\r\n        private Context context;\r\n        private List&lt;RepairItems&gt; doctorsList;\r\n        private List&lt;RepairItems&gt; doctorsListFiltered;\r\n        private List&lt;RepairItems&gt; items = new ArrayList&lt;&gt;();\r\n        private ContactsAdapterListener listener;\r\n        private DatabaseHandler db;\r\n        private boolean flag_wishlist = true;\r\n    \r\n        public class MyViewHolder extends RecyclerView.ViewHolder {\r\n            public TextView cat_name, cat_id, price;\r\n            public ImageView my_checkbox;\r\n            public LinearLayout linear;\r\n    \r\n            public MyViewHolder(View view) {\r\n                super(view);\r\n                cat_name = view.findViewById(R.id.category_name);\r\n                price = view.findViewById(R.id.price);\r\n                cat_id = view.findViewById(R.id.category_id);\r\n                my_checkbox = view.findViewById(R.id.my_checkbox);\r\n                linear = view.findViewById(R.id.linear);\r\n    \r\n                view.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View view) {\r\n                        // send selected contact in callback\r\n                        listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    \r\n        public RepairItemsAdapter(Context context, List&lt;RepairItems&gt; doctorsList, ContactsAdapterListener listener) {\r\n            this.context = context;\r\n            this.listener = listener;\r\n            this.doctorsList = doctorsList;\r\n            this.doctorsListFiltered = doctorsList;\r\n        }\r\n    \r\n        @Override\r\n        public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n            View itemView = LayoutInflater.from(parent.getContext())\r\n                    .inflate(R.layout.checklist_items, parent, false);\r\n    \r\n            return new MyViewHolder(itemView);\r\n        }\r\n    \r\n        @Override\r\n        public void onBindViewHolder(MyViewHolder holder, final int position) {\r\n            final RepairItems cat_main = doctorsListFiltered.get(position);\r\n            db = new DatabaseHandler(context);\r\n            holder.cat_name.setText(cat_main.getProducts_title());\r\n            holder.cat_id.setText(cat_main.getProduct_id());\r\n            holder.price.setText(cat_main.getProducts_price());\r\n    \r\n            holder.linear.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (db.getWishlist(cat_main.getProduct_id()) != null) {\r\n                        db.deleteWishlist(Long.valueOf(cat_main.getProduct_id()));\r\n                        holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\r\n    \r\n                    } else {\r\n                        Wishlist w = new Wishlist(Long.parseLong(cat_main.getProduct_id()), cat_main.getProduct_id(), cat_main.getProducts_title(), Integer.parseInt(cat_main.getProducts_price()));\r\n                        db.saveWishlist(w);\r\n                        holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\r\n                    }\r\n                }\r\n            });\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n            return doctorsListFiltered.size();\r\n        }\r\n    \r\n        @Override\r\n        public Filter getFilter() {\r\n            return new Filter() {\r\n                @Override\r\n                protected FilterResults performFiltering(CharSequence charSequence) {\r\n                    String charString = charSequence.toString();\r\n                    if (charString.isEmpty()) {\r\n                        doctorsListFiltered = doctorsList;\r\n                    } else {\r\n                        List&lt;RepairItems&gt; filteredList = new ArrayList&lt;&gt;();\r\n                        for (RepairItems row : doctorsList) {\r\n    \r\n                            // post_title match condition. this might differ depending on your requirement\r\n                            // here we are looking for post_title or phone number match\r\n                            if (row.getProducts_title().toLowerCase().contains(charString.toLowerCase())) {\r\n                                filteredList.add(row);\r\n                            }\r\n                        }\r\n    \r\n                        doctorsListFiltered = filteredList;\r\n                    }\r\n    \r\n                    FilterResults filterResults = new FilterResults();\r\n                    filterResults.values = doctorsListFiltered;\r\n                    return filterResults;\r\n                }\r\n    \r\n                @Override\r\n                protected void publishResults(CharSequence charSequence, FilterResults filterResults) {\r\n                    doctorsListFiltered = (ArrayList&lt;RepairItems&gt;) filterResults.values;\r\n                    notifyDataSetChanged();\r\n                }\r\n            };\r\n        }\r\n    \r\n        public interface ContactsAdapterListener {\r\n            void onContactSelected(RepairItems doctors);\r\n    \r\n        }\r\n    }\r\n\r\n","title":"how to handle item click on recyclerview for changing an item image?","body":"<p>I have a Recyclerview that gets data from server. I want to save every item in database when clicked and also change item image. I have problem in changing image of items. when I click an item multiple items get selected or when scrolling recyclerview item image will change unfortunately.\nhere is my adapter code</p>\n<pre><code>public class RepairItemsAdapter extends RecyclerView.Adapter&lt;RepairItemsAdapter.MyViewHolder&gt;\n        implements Filterable {\n    private Context context;\n    private List&lt;RepairItems&gt; doctorsList;\n    private List&lt;RepairItems&gt; doctorsListFiltered;\n    private List&lt;RepairItems&gt; items = new ArrayList&lt;&gt;();\n    private ContactsAdapterListener listener;\n    private DatabaseHandler db;\n    private boolean flag_wishlist = true;\n\n    public class MyViewHolder extends RecyclerView.ViewHolder {\n        public TextView cat_name, cat_id, price;\n        public ImageView my_checkbox;\n        public LinearLayout linear;\n\n        public MyViewHolder(View view) {\n            super(view);\n            cat_name = view.findViewById(R.id.category_name);\n            price = view.findViewById(R.id.price);\n            cat_id = view.findViewById(R.id.category_id);\n            my_checkbox = view.findViewById(R.id.my_checkbox);\n            linear = view.findViewById(R.id.linear);\n\n            view.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    // send selected contact in callback\n                    listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\n                }\n            });\n        }\n    }\n\n    public RepairItemsAdapter(Context context, List&lt;RepairItems&gt; doctorsList, ContactsAdapterListener listener) {\n        this.context = context;\n        this.listener = listener;\n        this.doctorsList = doctorsList;\n        this.doctorsListFiltered = doctorsList;\n    }\n\n    @Override\n    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View itemView = LayoutInflater.from(parent.getContext())\n                .inflate(R.layout.checklist_items, parent, false);\n\n        return new MyViewHolder(itemView);\n    }\n\n    @Override\n    public void onBindViewHolder(MyViewHolder holder, final int position) {\n        final RepairItems cat_main = doctorsListFiltered.get(position);\n        db = new DatabaseHandler(context);\n        holder.cat_name.setText(cat_main.getProducts_title());\n        holder.cat_id.setText(cat_main.getProduct_id());\n        holder.price.setText(cat_main.getProducts_price());\n\n        holder.linear.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if (db.getWishlist(cat_main.getProduct_id()) != null) {\n                    db.deleteWishlist(Long.valueOf(cat_main.getProduct_id()));\n                    holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\n\n                } else {\n                    Wishlist w = new Wishlist(Long.parseLong(cat_main.getProduct_id()), cat_main.getProduct_id(), cat_main.getProducts_title(), Integer.parseInt(cat_main.getProducts_price()));\n                    db.saveWishlist(w);\n                    holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\n                }\n            }\n        });\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return doctorsListFiltered.size();\n    }\n\n    @Override\n    public Filter getFilter() {\n        return new Filter() {\n            @Override\n            protected FilterResults performFiltering(CharSequence charSequence) {\n                String charString = charSequence.toString();\n                if (charString.isEmpty()) {\n                    doctorsListFiltered = doctorsList;\n                } else {\n                    List&lt;RepairItems&gt; filteredList = new ArrayList&lt;&gt;();\n                    for (RepairItems row : doctorsList) {\n\n                        // post_title match condition. this might differ depending on your requirement\n                        // here we are looking for post_title or phone number match\n                        if (row.getProducts_title().toLowerCase().contains(charString.toLowerCase())) {\n                            filteredList.add(row);\n                        }\n                    }\n\n                    doctorsListFiltered = filteredList;\n                }\n\n                FilterResults filterResults = new FilterResults();\n                filterResults.values = doctorsListFiltered;\n                return filterResults;\n            }\n\n            @Override\n            protected void publishResults(CharSequence charSequence, FilterResults filterResults) {\n                doctorsListFiltered = (ArrayList&lt;RepairItems&gt;) filterResults.values;\n                notifyDataSetChanged();\n            }\n        };\n    }\n\n    public interface ContactsAdapterListener {\n        void onContactSelected(RepairItems doctors);\n\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","multidimensional-array"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1565461645,"post_id":57444382,"comment_id":101365402,"body_markdown":"https://stackoverflow.com/questions/3104504/is-it-possible-to-dynamically-build-a-multi-dimensional-array-in-java, anyway what is wrong with (dynamic) ArrayList ?","body":"<a href=\"https://stackoverflow.com/questions/3104504/is-it-possible-to-dynamically-build-a-multi-dimensional-array-in-java\" title=\"is it possible to dynamically build a multi dimensional array in java\">stackoverflow.com/questions/3104504/&hellip;</a>, anyway what is wrong with (dynamic) ArrayList ?"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1682865663,"post_id":57444382,"comment_id":134279028,"body_markdown":"I think the stream is not where you should solve this. Rather, think about how you could represent this as a class and pass one of those in.","body":"I think the stream is not where you should solve this. Rather, think about how you could represent this as a class and pass one of those in."}],"answers":[{"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1682865524,"post_id":76141383,"comment_id":134279008,"body_markdown":"I don&#39;t think this works, because the stream type changes (to one less dimension) every time `flatMap` is called. You could try making the variable a raw stream.","body":"I don&#39;t think this works, because the stream type changes (to one less dimension) every time <code>flatMap</code> is called. You could try making the variable a raw stream."},{"owner":{"account_id":13964622,"reputation":69,"user_id":10084790,"display_name":"Shmuel Greenberger"},"score":0,"creation_date":1682865889,"post_id":76141383,"comment_id":134279060,"body_markdown":"@Bohemian you&#39;re probably right, but as you said this can be dealt with.","body":"@Bohemian you&#39;re probably right, but as you said this can be dealt with."}],"tags":[],"owner":{"account_id":13964622,"reputation":69,"user_id":10084790,"display_name":"Shmuel Greenberger"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682859733,"creation_date":1682859397,"answer_id":76141383,"question_id":57444382,"body_markdown":"I think this would do the trick:\r\n\r\n    var arrStr = Arrays.stream(arr);\r\n        \r\n    var counter = 0;\r\n    while(dimensions &gt; counter)\r\n    {\r\n        arrStr = arrStr.flatMap(Arrays.stream);\r\n    }\r\n    return arrStr.flatMapToInt(Arrays::stream).toArray();\r\n\r\nAdmittedly this is rather of an imperative style and may be improved on. ","title":"How to make a method that can accept different multidimensional arrays?","body":"<p>I think this would do the trick:</p>\n<pre><code>var arrStr = Arrays.stream(arr);\n    \nvar counter = 0;\nwhile(dimensions &gt; counter)\n{\n    arrStr = arrStr.flatMap(Arrays.stream);\n}\nreturn arrStr.flatMapToInt(Arrays::stream).toArray();\n</code></pre>\n<p>Admittedly this is rather of an imperative style and may be improved on.</p>\n"}],"owner":{"account_id":16197619,"reputation":31,"user_id":11694815,"display_name":"Minyi Lu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1682859733,"creation_date":1565459084,"question_id":57444382,"body_markdown":"I want to make a program that does calculations on different multidimensional arrays, or really just the simple task of printing it.\r\nI am hoping to have the function parameters that sort of look like\r\n\r\n    printArray(Int Array of any dimensions, int dimensions, int... sizes)\r\n\r\nOne goal for calculations is the mode, so I am thinking of flattening out all the arrays to do any calculations or modifications.\r\n\r\nI&#39;ve looked into how arrays and stream can be used to flatten out an array.\r\n\r\n2d:\r\n\r\n    Arrays.stream(arr).flatMap(Arrays::stream).flatMapToInt(Arrays::stream).toArray();\r\n\r\n3d: \r\n\r\n    Arrays.stream(arr).flatMap(Arrays::stream).flatMap(Arrays::stream).flatMapToInt(Arrays::stream).toArray();\r\n\r\nbut it also is not generic since every dimension it requires another &quot;`.flatMap`&quot;. And I still don&#39;t know how to make that kind of parameters that accept any dimensions.\r\n\r\n\r\n","title":"How to make a method that can accept different multidimensional arrays?","body":"<p>I want to make a program that does calculations on different multidimensional arrays, or really just the simple task of printing it.\nI am hoping to have the function parameters that sort of look like</p>\n\n<pre><code>printArray(Int Array of any dimensions, int dimensions, int... sizes)\n</code></pre>\n\n<p>One goal for calculations is the mode, so I am thinking of flattening out all the arrays to do any calculations or modifications.</p>\n\n<p>I've looked into how arrays and stream can be used to flatten out an array.</p>\n\n<p>2d:</p>\n\n<pre><code>Arrays.stream(arr).flatMap(Arrays::stream).flatMapToInt(Arrays::stream).toArray();\n</code></pre>\n\n<p>3d: </p>\n\n<pre><code>Arrays.stream(arr).flatMap(Arrays::stream).flatMap(Arrays::stream).flatMapToInt(Arrays::stream).toArray();\n</code></pre>\n\n<p>but it also is not generic since every dimension it requires another \"<code>.flatMap</code>\". And I still don't know how to make that kind of parameters that accept any dimensions.</p>\n"},{"tags":["java","android","firebase-authentication"],"comments":[{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1682701579,"post_id":76131192,"comment_id":134262420,"body_markdown":"It sounds like your app crashes. When an app crashes, it writes an error message and stack trace to its logcat. Please find those, and add them to your question by clicking the `edit` link under it. Also see https://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this and https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors","body":"It sounds like your app crashes. When an app crashes, it writes an error message and stack trace to its logcat. Please find those, and add them to your question by clicking the <code>edit</code> link under it. Also see <a href=\"https://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this\" title=\"unfortunately myapp has stopped how can i solve this\">stackoverflow.com/questions/23353173/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\" title=\"what is a stack trace and how can i use it to debug my application errors\">stackoverflow.com/questions/3988788/&hellip;</a>"},{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":0,"creation_date":1682819794,"post_id":76131192,"comment_id":134274832,"body_markdown":"could it be you did not add &quot;Home_Page&quot; as an activity tag in the manifest file?","body":"could it be you did not add &quot;Home_Page&quot; as an activity tag in the manifest file?"},{"owner":{"account_id":21368741,"reputation":11,"user_id":15736580,"display_name":"The Shadow"},"score":0,"creation_date":1682833794,"post_id":76131192,"comment_id":134275695,"body_markdown":"It was working fine not so long ago and I don&#39;t remember doing anything in the manifest file. I&#39;ll try it though.","body":"It was working fine not so long ago and I don&#39;t remember doing anything in the manifest file. I&#39;ll try it though."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1682942632,"post_id":76131192,"comment_id":134287231,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1682942725,"post_id":76131192,"comment_id":134287257,"body_markdown":"Besides that, if you understand Kotlin, I think that this [resource](https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-email-and-password-in-jetpack-compose-bd70ca56ea91) will help. Here is the corresponding [repo](https://github.com/alexmamo/FirebaseSignInWithEmailAndPassword).","body":"Besides that, if you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-email-and-password-in-jetpack-compose-bd70ca56ea91\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirebaseSignInWithEmailAndPassword\" rel=\"nofollow noreferrer\">repo</a>."}],"owner":{"account_id":21368741,"reputation":11,"user_id":15736580,"display_name":"The Shadow"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682859589,"creation_date":1682696523,"question_id":76131192,"body_markdown":"I&#39;m a beginner with Android Studio so I don&#39;t know much about how stuff works in it. I wrote some code for an app which uses Firebase Authentication for email/password user logging in.\r\n\r\nThis is shown in logcat as I click the &#39;Login&#39; button:\r\nW/System: Ignoring header X-Firebase-Locale because its value was null.\r\n\r\n\r\n\r\n\r\n```\r\n        loginbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String email_id = emailLogin.getText().toString();\r\n                String password_id = passwordLogin.getText().toString();\r\n\r\n                boolean dataIsValidated = validateData(email_id, password_id);\r\n                if (!dataIsValidated) {\r\n                    return;\r\n                } else {\r\n\r\n                    loginAccount(email_id, password_id);\r\n\r\n                }\r\n            }\r\n\r\n            void loginAccount(String email_id,String password_id){\r\n                changeInProgress(true);\r\n                FirebaseAuth firebaseAuth = FirebaseAuth.getInstance();\r\n                firebaseAuth.signInWithEmailAndPassword(email_id,password_id).addOnCompleteListener(task -&gt; {\r\n                    if(task.isSuccessful()){\r\n                        if(firebaseAuth.getCurrentUser().isEmailVerified()){\r\n                            Toast.makeText(Actual_Login.this,&quot;Logged in successfully!&quot;,Toast.LENGTH_SHORT).show();\r\n                            startActivity(intentToHome);\r\n                        }else{\r\n                            Toast.makeText(Actual_Login.this,&quot;This email isn&#39;t verified! Sign up with this email first&quot;,Toast.LENGTH_SHORT).show();\r\n                            changeInProgress(false);\r\n                        }\r\n                    }else{\r\n                        Toast.makeText(Actual_Login.this,&quot;Login failed!&quot;,Toast.LENGTH_SHORT).show();\r\n                        changeInProgress(false);\r\n                    }\r\n                });\r\n            }\r\n\r\n        }\r\n```\r\nBut the app stops after showing the toast message &quot;Logged in successfully!&quot;. The app is logged in as if I open it again, it closes again after the splash screen.\r\nHere&#39;s the full Java file which the code block above attached belongs to:\r\n\r\n\r\n```\r\npackage com.brilliantbrushes.safe;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.util.Patterns;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\n\r\npublic class Actual_Login extends AppCompatActivity {\r\n\r\n    TextView movetosignup;\r\n\r\n    EditText emailLogin,passwordLogin;\r\n    Button loginbtn;\r\n    ProgressBar progressLogin;\r\n    private Intent intentToHome;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_actual_login);\r\n\r\n        Intent intentToHome = new Intent(Actual_Login.this,Home_Page.class);\r\n\r\n        emailLogin=findViewById(R.id.emailLogin);\r\n        passwordLogin=findViewById(R.id.passwordLogin);\r\n        loginbtn=findViewById(R.id.loginbtn);\r\n        progressLogin=findViewById(R.id.progressLogin);\r\n\r\n        movetosignup = findViewById(R.id.movetosignup);\r\n        movetosignup.setOnClickListener(view -&gt; {\r\n            Intent intent = new Intent(Actual_Login.this, Login_Page.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        loginbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String email_id = emailLogin.getText().toString();\r\n                String password_id = passwordLogin.getText().toString();\r\n\r\n                boolean dataIsValidated = validateData(email_id, password_id);\r\n                if (!dataIsValidated) {\r\n                    return;\r\n                } else {\r\n\r\n                    loginAccount(email_id, password_id);\r\n\r\n                }\r\n            }\r\n\r\n            void loginAccount(String email_id,String password_id){\r\n                changeInProgress(true);\r\n                FirebaseAuth firebaseAuth = FirebaseAuth.getInstance();\r\n                firebaseAuth.signInWithEmailAndPassword(email_id,password_id).addOnCompleteListener(task -&gt; {\r\n                    if(task.isSuccessful()){\r\n                        if(firebaseAuth.getCurrentUser().isEmailVerified()){\r\n                            Toast.makeText(Actual_Login.this,&quot;Logged in successfully!&quot;,Toast.LENGTH_SHORT).show();\r\n                            startActivity(intentToHome);\r\n                        }else{\r\n                            Toast.makeText(Actual_Login.this,&quot;This email isn&#39;t verified! Sign up with this email first&quot;,Toast.LENGTH_SHORT).show();\r\n                            changeInProgress(false);\r\n                        }\r\n                    }else{\r\n                        Toast.makeText(Actual_Login.this,&quot;Login failed!&quot;,Toast.LENGTH_SHORT).show();\r\n                        changeInProgress(false);\r\n                    }\r\n                });\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    void changeInProgress(boolean inProgress){\r\n        if(inProgress){\r\n            progressLogin.setVisibility(View.VISIBLE);\r\n            loginbtn.setVisibility(View.GONE);\r\n        }else{\r\n            progressLogin.setVisibility(View.GONE);\r\n            loginbtn.setVisibility(View.VISIBLE);\r\n        }\r\n    }\r\n\r\n    boolean validateData(String email_id,String password_id){\r\n\r\n        if (!Patterns.EMAIL_ADDRESS.matcher(email_id).matches()){\r\n            emailLogin.setError(&quot;The email used is invalid!&quot;);\r\n            return false;\r\n        }\r\n        if(password_id.length()&lt;8){\r\n            passwordLogin.setError(&quot;Password must be at least 8 characters long!&quot;);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n};\r\n\r\n\r\n```\r\n\r\n\r\nI tried removing the finish() at the end of intentToHome. I tries cleaning and rebuilding the app. Nothing reached anywhere.\r\n\r\n```\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Safe&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Add_Note&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Splash_Screen&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Actual_Login&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Home_Page&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Login_Page&quot;\r\n            android:exported=&quot;false&quot;&gt;&lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\n```","title":"App immediately closes abruptly after logging in","body":"<p>I'm a beginner with Android Studio so I don't know much about how stuff works in it. I wrote some code for an app which uses Firebase Authentication for email/password user logging in.</p>\n<p>This is shown in logcat as I click the 'Login' button:\nW/System: Ignoring header X-Firebase-Locale because its value was null.</p>\n<pre><code>        loginbtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String email_id = emailLogin.getText().toString();\n                String password_id = passwordLogin.getText().toString();\n\n                boolean dataIsValidated = validateData(email_id, password_id);\n                if (!dataIsValidated) {\n                    return;\n                } else {\n\n                    loginAccount(email_id, password_id);\n\n                }\n            }\n\n            void loginAccount(String email_id,String password_id){\n                changeInProgress(true);\n                FirebaseAuth firebaseAuth = FirebaseAuth.getInstance();\n                firebaseAuth.signInWithEmailAndPassword(email_id,password_id).addOnCompleteListener(task -&gt; {\n                    if(task.isSuccessful()){\n                        if(firebaseAuth.getCurrentUser().isEmailVerified()){\n                            Toast.makeText(Actual_Login.this,&quot;Logged in successfully!&quot;,Toast.LENGTH_SHORT).show();\n                            startActivity(intentToHome);\n                        }else{\n                            Toast.makeText(Actual_Login.this,&quot;This email isn't verified! Sign up with this email first&quot;,Toast.LENGTH_SHORT).show();\n                            changeInProgress(false);\n                        }\n                    }else{\n                        Toast.makeText(Actual_Login.this,&quot;Login failed!&quot;,Toast.LENGTH_SHORT).show();\n                        changeInProgress(false);\n                    }\n                });\n            }\n\n        }\n</code></pre>\n<p>But the app stops after showing the toast message &quot;Logged in successfully!&quot;. The app is logged in as if I open it again, it closes again after the splash screen.\nHere's the full Java file which the code block above attached belongs to:</p>\n<pre><code>package com.brilliantbrushes.safe;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.util.Patterns;\nimport android.view.View;\nimport android.view.WindowManager;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ImageView;\nimport android.widget.ProgressBar;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\nimport com.google.android.gms.common.api.ApiException;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.auth.AuthResult;\nimport com.google.firebase.auth.FirebaseAuth;\n\npublic class Actual_Login extends AppCompatActivity {\n\n    TextView movetosignup;\n\n    EditText emailLogin,passwordLogin;\n    Button loginbtn;\n    ProgressBar progressLogin;\n    private Intent intentToHome;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_actual_login);\n\n        Intent intentToHome = new Intent(Actual_Login.this,Home_Page.class);\n\n        emailLogin=findViewById(R.id.emailLogin);\n        passwordLogin=findViewById(R.id.passwordLogin);\n        loginbtn=findViewById(R.id.loginbtn);\n        progressLogin=findViewById(R.id.progressLogin);\n\n        movetosignup = findViewById(R.id.movetosignup);\n        movetosignup.setOnClickListener(view -&gt; {\n            Intent intent = new Intent(Actual_Login.this, Login_Page.class);\n            startActivity(intent);\n        });\n\n        loginbtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String email_id = emailLogin.getText().toString();\n                String password_id = passwordLogin.getText().toString();\n\n                boolean dataIsValidated = validateData(email_id, password_id);\n                if (!dataIsValidated) {\n                    return;\n                } else {\n\n                    loginAccount(email_id, password_id);\n\n                }\n            }\n\n            void loginAccount(String email_id,String password_id){\n                changeInProgress(true);\n                FirebaseAuth firebaseAuth = FirebaseAuth.getInstance();\n                firebaseAuth.signInWithEmailAndPassword(email_id,password_id).addOnCompleteListener(task -&gt; {\n                    if(task.isSuccessful()){\n                        if(firebaseAuth.getCurrentUser().isEmailVerified()){\n                            Toast.makeText(Actual_Login.this,&quot;Logged in successfully!&quot;,Toast.LENGTH_SHORT).show();\n                            startActivity(intentToHome);\n                        }else{\n                            Toast.makeText(Actual_Login.this,&quot;This email isn't verified! Sign up with this email first&quot;,Toast.LENGTH_SHORT).show();\n                            changeInProgress(false);\n                        }\n                    }else{\n                        Toast.makeText(Actual_Login.this,&quot;Login failed!&quot;,Toast.LENGTH_SHORT).show();\n                        changeInProgress(false);\n                    }\n                });\n            }\n\n        });\n\n    }\n\n    void changeInProgress(boolean inProgress){\n        if(inProgress){\n            progressLogin.setVisibility(View.VISIBLE);\n            loginbtn.setVisibility(View.GONE);\n        }else{\n            progressLogin.setVisibility(View.GONE);\n            loginbtn.setVisibility(View.VISIBLE);\n        }\n    }\n\n    boolean validateData(String email_id,String password_id){\n\n        if (!Patterns.EMAIL_ADDRESS.matcher(email_id).matches()){\n            emailLogin.setError(&quot;The email used is invalid!&quot;);\n            return false;\n        }\n        if(password_id.length()&lt;8){\n            passwordLogin.setError(&quot;Password must be at least 8 characters long!&quot;);\n            return false;\n        }\n        return true;\n    }\n\n};\n\n\n</code></pre>\n<p>I tried removing the finish() at the end of intentToHome. I tries cleaning and rebuilding the app. Nothing reached anywhere.</p>\n<pre><code>\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Safe&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.Add_Note&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.Splash_Screen&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=&quot;.Actual_Login&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.Home_Page&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.Login_Page&quot;\n            android:exported=&quot;false&quot;&gt;&lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n\n</code></pre>\n"},{"tags":["java","sql"],"comments":[{"owner":{"account_id":116580,"reputation":118713,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"score":0,"creation_date":1313597061,"post_id":7095921,"comment_id":8496249,"body_markdown":"what are you using to construct your sql?","body":"what are you using to construct your sql?"}],"answers":[{"tags":[],"owner":{"account_id":37982,"reputation":65378,"user_id":108796,"accept_rate":64,"display_name":"Blindy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1313597113,"creation_date":1313597113,"answer_id":7095981,"question_id":7095921,"body_markdown":"The SQL syntax is:\r\n\r\n\r\n    select name from tbl where id in (1,2,3)\r\n\r\nAll you have to do is build the comma separated list of items and insert it in the string.\r\n\r\nOh and the obligatory sql string building warning: don&#39;t!","title":"How to pass List in sql query","body":"<p>The SQL syntax is:</p>\n\n<pre><code>select name from tbl where id in (1,2,3)\n</code></pre>\n\n<p>All you have to do is build the comma separated list of items and insert it in the string.</p>\n\n<p>Oh and the obligatory sql string building warning: don't!</p>\n"},{"comments":[{"owner":{"account_id":37982,"reputation":65378,"user_id":108796,"accept_rate":64,"display_name":"Blindy"},"score":3,"creation_date":1313597219,"post_id":7095984,"comment_id":8496293,"body_markdown":"Talk about hunting rabbits with tactical nukes... Or using Microsoft&#39;s reporting server, same thing basically.","body":"Talk about hunting rabbits with tactical nukes... Or using Microsoft&#39;s reporting server, same thing basically."},{"owner":{"display_name":"user891973"},"score":0,"creation_date":1313597317,"post_id":7095984,"comment_id":8496319,"body_markdown":"I think I had misunderstood the question as being &quot;how do I pass this list into a stored procedure&quot;. My bad.","body":"I think I had misunderstood the question as being &quot;how do I pass this list into a stored procedure&quot;. My bad."}],"tags":[],"owner":{"display_name":"user891973"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1313597118,"creation_date":1313597118,"answer_id":7095984,"question_id":7095921,"body_markdown":"Pass the list in as a comma seperated list and use a split function to split it into a temporary table variable.\r\n\r\n    CREATE FUNCTION dbo.Split (@sep char(1), @s varchar(512))\r\n    RETURNS table\r\n    AS\r\n    RETURN (\r\n        WITH Pieces(pn, start, stop) AS (\r\n          SELECT 1, 1, CHARINDEX(@sep, @s)\r\n          UNION ALL\r\n          SELECT pn + 1, stop + 1, CHARINDEX(@sep, @s, stop + 1)\r\n          FROM Pieces\r\n          WHERE stop &gt; 0\r\n        )\r\n        SELECT pn,\r\n          SUBSTRING(@s, start, CASE WHEN stop &gt; 0 THEN stop-start ELSE 512 END) AS s\r\n        FROM Pieces\r\n      )\r\n\r\n","title":"How to pass List in sql query","body":"<p>Pass the list in as a comma seperated list and use a split function to split it into a temporary table variable.</p>\n\n<pre><code>CREATE FUNCTION dbo.Split (@sep char(1), @s varchar(512))\nRETURNS table\nAS\nRETURN (\n    WITH Pieces(pn, start, stop) AS (\n      SELECT 1, 1, CHARINDEX(@sep, @s)\n      UNION ALL\n      SELECT pn + 1, stop + 1, CHARINDEX(@sep, @s, stop + 1)\n      FROM Pieces\n      WHERE stop &gt; 0\n    )\n    SELECT pn,\n      SUBSTRING(@s, start, CASE WHEN stop &gt; 0 THEN stop-start ELSE 512 END) AS s\n    FROM Pieces\n  )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":116580,"reputation":118713,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1474876702,"creation_date":1313597143,"answer_id":7095989,"question_id":7095921,"body_markdown":"it depends on how you are constructing your sql.  If you are constructing it yourself (bad idea) you need to do make the sql look like - \r\n\r\n`... where id in (1,2,3)...`\r\n\r\nSince in your comment you specify hibernate hql, something like - \r\n\r\n    Query query = session.createSQLQuery(&quot;from User where id in :ids &quot;);\r\n    query.setParameter(&quot;ids&quot;, idsList);\r\n    List list = query.list();\r\n\r\n should get you started.  Note `User` is the name of the Object you mapped to the table you want to query.\r\n\r\n","title":"How to pass List in sql query","body":"<p>it depends on how you are constructing your sql.  If you are constructing it yourself (bad idea) you need to do make the sql look like - </p>\n\n<p><code>... where id in (1,2,3)...</code></p>\n\n<p>Since in your comment you specify hibernate hql, something like - </p>\n\n<pre><code>Query query = session.createSQLQuery(\"from User where id in :ids \");\nquery.setParameter(\"ids\", idsList);\nList list = query.list();\n</code></pre>\n\n<p>should get you started.  Note <code>User</code> is the name of the Object you mapped to the table you want to query.</p>\n"},{"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1504690018,"post_id":7096065,"comment_id":79103611,"body_markdown":"With Java 8 you can use `String.join(&quot;,&quot;, list)`, however this solution is not appropriate for String parameters.","body":"With Java 8 you can use <code>String.join(&quot;,&quot;, list)</code>, however this solution is not appropriate for String parameters."},{"owner":{"account_id":79777,"reputation":368,"user_id":225986,"display_name":"Iouri Goussev"},"score":2,"creation_date":1573835225,"post_id":7096065,"comment_id":104029319,"body_markdown":"This code had a security issue. Because the values are not escaped, you can have SQL injection.","body":"This code had a security issue. Because the values are not escaped, you can have SQL injection."}],"tags":[],"owner":{"account_id":470951,"reputation":658,"user_id":878429,"accept_rate":33,"display_name":"corsair"},"comment_count":2,"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1313597459,"creation_date":1313597459,"answer_id":7096065,"question_id":7095921,"body_markdown":"you have to put your list directly to sql statement\r\n\r\nexample:\r\n\r\n    String sql=&quot;select name from tbl where id in (&quot;+StringUtils.join(list, &#39;,&#39;)+&quot;)&quot;;\r\n    Statement st=connection.createStatement();\r\n    st.execute(sql);","title":"How to pass List in sql query","body":"<p>you have to put your list directly to sql statement</p>\n\n<p>example:</p>\n\n<pre><code>String sql=\"select name from tbl where id in (\"+StringUtils.join(list, ',')+\")\";\nStatement st=connection.createStatement();\nst.execute(sql);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":294985,"reputation":1224,"user_id":599154,"display_name":"Rob Marrowstone"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1313597493,"creation_date":1313597493,"answer_id":7096072,"question_id":7095921,"body_markdown":"I see in your reply to a comment that you&#39;re using HQL. If that&#39;s the case, the Hibernate folks make this one easy for you, in the query, just specify:\r\n\r\n    where id in (:ids)\r\n\r\nand then use `setParameterList(&quot;ids&quot;, list)` passing your list. Hibernate will do all the expansion for you!","title":"How to pass List in sql query","body":"<p>I see in your reply to a comment that you're using HQL. If that's the case, the Hibernate folks make this one easy for you, in the query, just specify:</p>\n\n<pre><code>where id in (:ids)\n</code></pre>\n\n<p>and then use <code>setParameterList(\"ids\", list)</code> passing your list. Hibernate will do all the expansion for you!</p>\n"},{"comments":[{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":0,"creation_date":1584270520,"post_id":60691972,"comment_id":107379813,"body_markdown":"Completely vulnerable to SQL injection, and doesn&#39;t take strings with single quotes into account.","body":"Completely vulnerable to SQL injection, and doesn&#39;t take strings with single quotes into account."}],"tags":[],"owner":{"account_id":17978108,"reputation":7,"user_id":13065150,"display_name":"Kamal Parvez"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1584268562,"creation_date":1584268562,"answer_id":60691972,"question_id":7095921,"body_markdown":"\tprivate static String sqlFormatedList(List&lt;String&gt; list){\r\n\t\t StringBuilder sb = new StringBuilder();\r\n\t\t sb.append(&quot;(&#39;&quot;);\r\n\t\t for (String i : list){\r\n\t\t   sb.append(i+&quot;&#39;,&#39;&quot;);\r\n\t\t }\r\n\t\t sb.deleteCharAt(sb.length() -1);\r\n\t\t sb.deleteCharAt(sb.lastIndexOf(&quot;,&quot;));\r\n\t\t sb.append(&quot;)&quot;);\r\n\t\t return sb.toString();\r\n\t\t}","title":"How to pass List in sql query","body":"<pre><code>private static String sqlFormatedList(List&lt;String&gt; list){\n     StringBuilder sb = new StringBuilder();\n     sb.append(\"('\");\n     for (String i : list){\n       sb.append(i+\"','\");\n     }\n     sb.deleteCharAt(sb.length() -1);\n     sb.deleteCharAt(sb.lastIndexOf(\",\"));\n     sb.append(\")\");\n     return sb.toString();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27042750,"reputation":1,"user_id":20597374,"display_name":"DYD"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669820695,"creation_date":1669820695,"answer_id":74629943,"question_id":7095921,"body_markdown":"You can write code like and then pass uuidsWithRequiredPattern to SQL.\r\nHere in below example I had a requirement to have a uuids prefixed with single quote , suffixed with single quote and delimited with comma. \r\n\r\n    List&lt;UUID&gt; uuidList = Arrays.asList(&quot;581394be-6a27-11ea-bc55-0242ac130003&quot;,&quot;681394be-6a27-11ea-bc55-0242ac130003&quot;)\r\n    String uuidsWithRequiredPattern = uuidList.stream()\r\n                    .map(UUID::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;, &quot;&#39;&quot;, &quot;&#39;&quot;));","title":"How to pass List in sql query","body":"<p>You can write code like and then pass uuidsWithRequiredPattern to SQL.\nHere in below example I had a requirement to have a uuids prefixed with single quote , suffixed with single quote and delimited with comma.</p>\n<pre><code>List&lt;UUID&gt; uuidList = Arrays.asList(&quot;581394be-6a27-11ea-bc55-0242ac130003&quot;,&quot;681394be-6a27-11ea-bc55-0242ac130003&quot;)\nString uuidsWithRequiredPattern = uuidList.stream()\n                .map(UUID::toString)\n                .collect(Collectors.joining(&quot;,&quot;, &quot;'&quot;, &quot;'&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8803402,"reputation":31,"user_id":6578837,"display_name":"Paul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674659343,"creation_date":1674659343,"answer_id":75235941,"question_id":7095921,"body_markdown":"I know this is a long time past but this was the page that returned when I looked for a solution to exactly this problem. It seems that all answers are not perfect for one reason or another (including the possibility of SQL injection which is a real concern).So, here&#39;s my solution:-\r\n\r\n\r\n    /**\r\n     * Checks if this range exists in the database already.\r\n     * If it does, it will return the original name.\r\n     * @param products the list of product names to check\r\n     * @return  The range&#39;s name in the database\r\n     * @throws SQLException if SQL fails\r\n     *   (or if it exists but with multiple names)\r\n     */\r\n    private String getOriginalName(final List&lt;String&gt; products)throws SQLException {\r\n      if (products.isEmpty()) {\r\n        throw new SQLException(&quot;Cannot check an empty list&quot;);\r\n      }\r\n      try (Connection connection = ConnectionPoolConfigRulesUtils.getConnection();\r\n          PreparedStatement statement = connection.prepareCall(\r\n              &quot;SELECT [rangeName] FROM [dbo].[products] WHERE [productName] IN (&quot;\r\n              + repeatString(&quot;?&quot;, &quot;, &quot;, products.size()) + &quot;) GROUP BY [rangeName]&quot;)) {\r\n        int fieldNo = 1;  //NOPMD DU anomaly\r\n        for (final DbProduct product: products) {\r\n          statement.setInt(fieldNo++, product.getId());\r\n        }\r\n        try (ResultSet rset = statement.executeQuery()) {\r\n          final String rangeName;\r\n          if (rset.next()) {\r\n    \t\t//Get the first range name\r\n    \t    rangeName = Nz.nz(rset.getString(&quot;rangeName&quot;));\r\n    \t  } else {\r\n    \t\t//There isn&#39;t one so return empty string\r\n            rangeName = &quot;&quot;;\r\n    \t  }\r\n          if (rset.next()) {\r\n            //But, if there are multiple ranges, this is an error so treat it as such\r\n            throw new SQLException(&quot;The products you are trying to save exist already in the dabase under more than one range. &quot;\r\n                + &quot;Cannot process the change&quot;);\r\n          }\r\n          return rangeName;\r\n        }\r\n      }\r\n    }\r\n\r\n","title":"How to pass List in sql query","body":"<p>I know this is a long time past but this was the page that returned when I looked for a solution to exactly this problem. It seems that all answers are not perfect for one reason or another (including the possibility of SQL injection which is a real concern).So, here's my solution:-</p>\n<pre><code>/**\n * Checks if this range exists in the database already.\n * If it does, it will return the original name.\n * @param products the list of product names to check\n * @return  The range's name in the database\n * @throws SQLException if SQL fails\n *   (or if it exists but with multiple names)\n */\nprivate String getOriginalName(final List&lt;String&gt; products)throws SQLException {\n  if (products.isEmpty()) {\n    throw new SQLException(&quot;Cannot check an empty list&quot;);\n  }\n  try (Connection connection = ConnectionPoolConfigRulesUtils.getConnection();\n      PreparedStatement statement = connection.prepareCall(\n          &quot;SELECT [rangeName] FROM [dbo].[products] WHERE [productName] IN (&quot;\n          + repeatString(&quot;?&quot;, &quot;, &quot;, products.size()) + &quot;) GROUP BY [rangeName]&quot;)) {\n    int fieldNo = 1;  //NOPMD DU anomaly\n    for (final DbProduct product: products) {\n      statement.setInt(fieldNo++, product.getId());\n    }\n    try (ResultSet rset = statement.executeQuery()) {\n      final String rangeName;\n      if (rset.next()) {\n        //Get the first range name\n        rangeName = Nz.nz(rset.getString(&quot;rangeName&quot;));\n      } else {\n        //There isn't one so return empty string\n        rangeName = &quot;&quot;;\n      }\n      if (rset.next()) {\n        //But, if there are multiple ranges, this is an error so treat it as such\n        throw new SQLException(&quot;The products you are trying to save exist already in the dabase under more than one range. &quot;\n            + &quot;Cannot process the change&quot;);\n      }\n      return rangeName;\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2917853,"reputation":41,"user_id":2500700,"display_name":"Tatool"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682859311,"creation_date":1682859311,"answer_id":76141377,"question_id":7095921,"body_markdown":"I&#39;m adding this here in case someone stumbles upon it - like me.\r\nThe easy way to parameterize the list to be used in the &quot;IN&quot; clause is to use the STRING_SPLIT function.\r\n\r\nDeclare @FirstNamesList nvarchar(100) = &#39;Mark,John,Sara&#39;\r\nSelect * from STRING_SPLIT(@FirstNamesList, &#39;,&#39;)\r\n\r\nhttps://www.pragimtech.com/blog/sql-optimization/sql-server-select-where-in-list/","title":"How to pass List in sql query","body":"<p>I'm adding this here in case someone stumbles upon it - like me.\nThe easy way to parameterize the list to be used in the &quot;IN&quot; clause is to use the STRING_SPLIT function.</p>\n<p>Declare @FirstNamesList nvarchar(100) = 'Mark,John,Sara'\nSelect * from STRING_SPLIT(@FirstNamesList, ',')</p>\n<p><a href=\"https://www.pragimtech.com/blog/sql-optimization/sql-server-select-where-in-list/\" rel=\"nofollow noreferrer\">https://www.pragimtech.com/blog/sql-optimization/sql-server-select-where-in-list/</a></p>\n"}],"owner":{"account_id":311718,"reputation":7444,"user_id":625454,"accept_rate":45,"display_name":"n92"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111611,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":9,"score":19,"last_activity_date":1682859311,"creation_date":1313596899,"question_id":7095921,"body_markdown":"I have of values (`1, 2, 3`, for example), and I want to pass that list to a SQL query:\r\n\r\n    &quot;select name from tbl where id in&quot; + list \r\n\r\nHow might I achieve this?","title":"How to pass List in sql query","body":"<p>I have of values (<code>1, 2, 3</code>, for example), and I want to pass that list to a SQL query:</p>\n\n<pre><code>\"select name from tbl where id in\" + list \n</code></pre>\n\n<p>How might I achieve this?</p>\n"},{"tags":["java","tags","metadata","opus"],"answers":[{"comments":[{"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"score":1,"creation_date":1548377667,"post_id":54279275,"comment_id":95529914,"body_markdown":"Sorry, I was out of state. I already discovered and programmed the subroutines for opusenc in my program. Excellent suggestion. At first I was worried that opusenc was a linux specific program, but was thankful when I discovered it is platform independent.","body":"Sorry, I was out of state. I already discovered and programmed the subroutines for opusenc in my program. Excellent suggestion. At first I was worried that opusenc was a linux specific program, but was thankful when I discovered it is platform independent."}],"tags":[],"owner":{"account_id":1144664,"reputation":14104,"user_id":1127699,"accept_rate":62,"display_name":"Terence Eden"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1548006875,"creation_date":1548006875,"answer_id":54279275,"question_id":49496995,"body_markdown":"If you are encoding an existing audio file to opus, then it is easy to do using [opusenc](https://opus-codec.org/downloads/):\r\n\r\n`opusenc input.wav out.opus --title &quot;This is a title&quot; --artist &quot;The Beatles&quot;`\r\n\r\nThere are several metadata options\r\n\r\n     --title title      Set track title\r\n     --artist artist    Set artist or author, may be used multiple times\r\n     --album album      Set album or collection\r\n     --genre genre      Set genre, may be used multiple times\r\n     --date YYYY-MM-DD  Set date of track (YYYY, YYYY-MM, or YYYY-MM-DD)\r\n     --comment tag=val  Add the given string as an extra comment\r\n                          This may be used multiple times\r\n     --picture file     Attach album art (see --help-picture)","title":"How Can I Add Metadata in opus files?","body":"<p>If you are encoding an existing audio file to opus, then it is easy to do using <a href=\"https://opus-codec.org/downloads/\" rel=\"nofollow noreferrer\">opusenc</a>:</p>\n\n<p><code>opusenc input.wav out.opus --title \"This is a title\" --artist \"The Beatles\"</code></p>\n\n<p>There are several metadata options</p>\n\n<pre><code> --title title      Set track title\n --artist artist    Set artist or author, may be used multiple times\n --album album      Set album or collection\n --genre genre      Set genre, may be used multiple times\n --date YYYY-MM-DD  Set date of track (YYYY, YYYY-MM, or YYYY-MM-DD)\n --comment tag=val  Add the given string as an extra comment\n                      This may be used multiple times\n --picture file     Attach album art (see --help-picture)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1901829,"reputation":5197,"user_id":1717535,"accept_rate":50,"display_name":"Fabien Snauwaert"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1599475427,"creation_date":1599475427,"answer_id":63776007,"question_id":49496995,"body_markdown":"With FFmpeg:\r\n\r\n```bash\r\nffmpeg -i myfile.opus -metadata FOO=&quot;Bar Baz&quot; -codec copy myfile-withmeta.opus\r\n```\r\n\r\nThen an `ffprobe` on the file will confirm the presence of the new metadata entry.","title":"How Can I Add Metadata in opus files?","body":"<p>With FFmpeg:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>ffmpeg -i myfile.opus -metadata FOO=&quot;Bar Baz&quot; -codec copy myfile-withmeta.opus\n</code></pre>\n<p>Then an <code>ffprobe</code> on the file will confirm the presence of the new metadata entry.</p>\n"},{"tags":[],"owner":{"account_id":24077008,"reputation":1,"user_id":18052193,"display_name":"Richard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643319695,"creation_date":1643319695,"answer_id":70886124,"question_id":49496995,"body_markdown":"The &#39;Foobar2000&#39; media player will allow you add metadata (including images) to a .opus audio file. It&#39;s free to download for Windows and IOS.","title":"How Can I Add Metadata in opus files?","body":"<p>The 'Foobar2000' media player will allow you add metadata (including images) to a .opus audio file. It's free to download for Windows and IOS.</p>\n"},{"tags":[],"owner":{"account_id":16886671,"reputation":1,"user_id":12211310,"display_name":"Garrus Archangel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682859262,"creation_date":1682859262,"answer_id":76141371,"question_id":49496995,"body_markdown":"If you don&#39;t need to do it in your code or in Bash or something, you can use VLC player to edit metadata. And you don&#39;t need to convert or copy or do anything like that. Just open your file, Go to Tools -&gt; Media Information -&gt; General. Edit and save. That&#39;s it.","title":"How Can I Add Metadata in opus files?","body":"<p>If you don't need to do it in your code or in Bash or something, you can use VLC player to edit metadata. And you don't need to convert or copy or do anything like that. Just open your file, Go to Tools -&gt; Media Information -&gt; General. Edit and save. That's it.</p>\n"}],"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6158,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":54279275,"answer_count":4,"score":5,"last_activity_date":1682859262,"creation_date":1522084300,"question_id":49496995,"body_markdown":"I&#39;m interested in writing metadata for `.opus` files, but all of the posts that I&#39;ve seen so far are for more mainstream formats such as .ogg, or .mp3. I&#39;m uncertain as to whether ID3 tags work with .opus files, and I can&#39;t find any resources that say whether they do or not. I&#39;ve seen something similar in (https://stackoverflow.com/questions/3444323/how-to-add-metadata-to-wav-file).\r\n\r\nHow can I write metadata such as title, author, and the like to .opus files?\r\n\r\nI&#39;m thinking that a `libopus` enabled `ffmpeg` would be able to do it, but from the documentation it is not obvious to me how to do it.\r\n\r\nSolutions using just `ffmpeg` are preferred, but any open source Java library should be just fine as well.","title":"How Can I Add Metadata in opus files?","body":"<p>I'm interested in writing metadata for <code>.opus</code> files, but all of the posts that I've seen so far are for more mainstream formats such as .ogg, or .mp3. I'm uncertain as to whether ID3 tags work with .opus files, and I can't find any resources that say whether they do or not. I've seen something similar in (<a href=\"https://stackoverflow.com/questions/3444323/how-to-add-metadata-to-wav-file\">How to add metadata to WAV file?</a>).</p>\n\n<p>How can I write metadata such as title, author, and the like to .opus files?</p>\n\n<p>I'm thinking that a <code>libopus</code> enabled <code>ffmpeg</code> would be able to do it, but from the documentation it is not obvious to me how to do it.</p>\n\n<p>Solutions using just <code>ffmpeg</code> are preferred, but any open source Java library should be just fine as well.</p>\n"},{"tags":["java","spring","spring-boot","jdbc","spring-jdbc"],"answers":[{"comments":[{"owner":{"account_id":13443994,"reputation":354,"user_id":9700478,"display_name":"GeekOverdose"},"score":0,"creation_date":1682794274,"post_id":76137401,"comment_id":134272388,"body_markdown":"I couldn&#39;t fit my comment here, so I edited my question instead. Thanks","body":"I couldn&#39;t fit my comment here, so I edited my question instead. Thanks"}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682787769,"creation_date":1682787769,"answer_id":76137401,"question_id":76137153,"body_markdown":"You don&#39;t need to worry about transactions and parallel changes to the sequence. With the call of ***currval(&#39;client_id_seq&#39;)*** you will get exactly the value of the sequence which has been obtained with *nextval(&#39;client_id_seq&#39;)* in **YOUR** current session only. Other sessions will use different value. This is garrantied by the database.\r\n\r\nMore details here: [https://www.postgresql.org/docs/current/functions-sequence.html][1]\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/current/functions-sequence.html","title":"How to run multiple query/update calls as part of the same transaction with Spring&#39;s JdbcTemplate","body":"<p>You don't need to worry about transactions and parallel changes to the sequence. With the call of <em><strong>currval('client_id_seq')</strong></em> you will get exactly the value of the sequence which has been obtained with <em>nextval('client_id_seq')</em> in <strong>YOUR</strong> current session only. Other sessions will use different value. This is garrantied by the database.</p>\n<p>More details here: <a href=\"https://www.postgresql.org/docs/current/functions-sequence.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/functions-sequence.html</a></p>\n"}],"owner":{"account_id":13443994,"reputation":354,"user_id":9700478,"display_name":"GeekOverdose"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76137401,"answer_count":1,"score":0,"last_activity_date":1682858336,"creation_date":1682784012,"question_id":76137153,"body_markdown":"I&#39;m writing my own `DAO` layer with Spring JDBC.\r\nI have a method called `T insert(T entity);` which inserts an entity and returns the updated version to the user. In my code, the logic is made up of two parts, a call to `NamedParameterJdbcTemplate.update` to save the entity and then `NamedParameterJdbcTemplate.queryForObject` to retrieve the updated entity from the database.\r\n\r\nThe first part executes a query similar to this:\r\n```sql\r\nINSERT INTO client (email_address, company_name)\r\nVALUES (&#39;some@email.com&#39;, &#39;some company name&#39;);\r\n```\r\n\r\nAnd the second part executes one similar to this:\r\n```sql\r\nSELECT * FROM client t\r\nWHERE t.id = currval(&#39;client_id_seq&#39;);\r\n```\r\nI&#39;m using Postgres, where `client` is actually an updatable view, not a table, and `client_id_seq` is a manually defined sequence to make `client` behave like a table.\r\n\r\nAnd it works fine, except for the fact that those two statements aren&#39;t transactional. In theory, between the time of executing the first and second statement, another parallel statement could be executed, which alters `currval(&#39;client_id_seq&#39;)`, making the result of the second part of my method erroneous.\r\n\r\nIs there a way of executing and fetching data all at once with Spring Jdbc? I tried multi-statement queries and the driver complained that there are multiple `ResultSet`s, I also tried writing a transaction query like this:\r\n```sql\r\nBEGIN;\r\n\r\nINSERT INTO client (email_address, company_name)\r\nVALUES (&#39;some@email.com&#39;, &#39;some company name&#39;);\r\n\r\nSELECT * FROM client t\r\nWHERE t.id = currval(&#39;client_id_seq&#39;);\r\n\r\nCOMMIT;\r\n```\r\nAnd the driver complained that the `ResultSet` was null.\r\n\r\nHow do I ensure consistency here between these two fetches?\r\n\r\n### EDIT:\r\nIf I am understanding [@Mar-Z](https://stackoverflow.com/users/14294053/mar-z)&#39;s answer correctly, if the value of `client_id_seq` is 0, and SESSION 1 calls `nextval(&#39;client_id_seq&#39;)`, then SESSION 2 calls `nextval(&#39;client_id_seq&#39;)`, the ACTUAL value of `client_id_seq` is now 2. BUT, if I call `currval(&#39;client_id_seq&#39;)` in SESSION 1, I&#39;ll get back 1, and if I call `currval(&#39;client_id_seq&#39;)` in SESSION 2, I&#39;ll get back a 2. That seems promising.\r\n\r\nThe only other thing I might be worried about is, I know that Spring Boot uses a connection pool (HikariCP by default I think), and 1 authenticated connection = 1 postgres session. Could it be possible that, lets say we have some connection `SESS_1` in the connection pool. The first `update` call to insert the `client` is submitted to the DB via `SESS_1`. INBETWEEN the first and second call of my `insert()` method, another process also submits some query to the DB via `SESS_1`, hence altering the `currval(&#39;client_id_seq&#39;)` for `SESS_1`, and then the second part of my method runs the `SELECT` query, again, on `SESS_1`, so in the end, I have erroneous data. Or even worse, what if the connection pool decides to close `SESS_1` and supply a different connection, say `SESS_2`, to the second part of my `insert()` method?\r\n\r\nDoes Spring JDBC have some things to assure this doesn&#39;t happen? Do I need to configure anything?\r\n\r\n### EDIT 2\r\nWhen marking a method with `@Transactional`, Spring Boot binds the connection to the thread which is running the method, and only releases the connection back to the pool when the transaction completes or is reversed. So in theory, annotating my `insert()` method with `@Transactional` should guarantee data consistency.","title":"How to run multiple query/update calls as part of the same transaction with Spring&#39;s JdbcTemplate","body":"<p>I'm writing my own <code>DAO</code> layer with Spring JDBC.\nI have a method called <code>T insert(T entity);</code> which inserts an entity and returns the updated version to the user. In my code, the logic is made up of two parts, a call to <code>NamedParameterJdbcTemplate.update</code> to save the entity and then <code>NamedParameterJdbcTemplate.queryForObject</code> to retrieve the updated entity from the database.</p>\n<p>The first part executes a query similar to this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO client (email_address, company_name)\nVALUES ('some@email.com', 'some company name');\n</code></pre>\n<p>And the second part executes one similar to this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM client t\nWHERE t.id = currval('client_id_seq');\n</code></pre>\n<p>I'm using Postgres, where <code>client</code> is actually an updatable view, not a table, and <code>client_id_seq</code> is a manually defined sequence to make <code>client</code> behave like a table.</p>\n<p>And it works fine, except for the fact that those two statements aren't transactional. In theory, between the time of executing the first and second statement, another parallel statement could be executed, which alters <code>currval('client_id_seq')</code>, making the result of the second part of my method erroneous.</p>\n<p>Is there a way of executing and fetching data all at once with Spring Jdbc? I tried multi-statement queries and the driver complained that there are multiple <code>ResultSet</code>s, I also tried writing a transaction query like this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>BEGIN;\n\nINSERT INTO client (email_address, company_name)\nVALUES ('some@email.com', 'some company name');\n\nSELECT * FROM client t\nWHERE t.id = currval('client_id_seq');\n\nCOMMIT;\n</code></pre>\n<p>And the driver complained that the <code>ResultSet</code> was null.</p>\n<p>How do I ensure consistency here between these two fetches?</p>\n<h3>EDIT:</h3>\n<p>If I am understanding <a href=\"https://stackoverflow.com/users/14294053/mar-z\">@Mar-Z</a>'s answer correctly, if the value of <code>client_id_seq</code> is 0, and SESSION 1 calls <code>nextval('client_id_seq')</code>, then SESSION 2 calls <code>nextval('client_id_seq')</code>, the ACTUAL value of <code>client_id_seq</code> is now 2. BUT, if I call <code>currval('client_id_seq')</code> in SESSION 1, I'll get back 1, and if I call <code>currval('client_id_seq')</code> in SESSION 2, I'll get back a 2. That seems promising.</p>\n<p>The only other thing I might be worried about is, I know that Spring Boot uses a connection pool (HikariCP by default I think), and 1 authenticated connection = 1 postgres session. Could it be possible that, lets say we have some connection <code>SESS_1</code> in the connection pool. The first <code>update</code> call to insert the <code>client</code> is submitted to the DB via <code>SESS_1</code>. INBETWEEN the first and second call of my <code>insert()</code> method, another process also submits some query to the DB via <code>SESS_1</code>, hence altering the <code>currval('client_id_seq')</code> for <code>SESS_1</code>, and then the second part of my method runs the <code>SELECT</code> query, again, on <code>SESS_1</code>, so in the end, I have erroneous data. Or even worse, what if the connection pool decides to close <code>SESS_1</code> and supply a different connection, say <code>SESS_2</code>, to the second part of my <code>insert()</code> method?</p>\n<p>Does Spring JDBC have some things to assure this doesn't happen? Do I need to configure anything?</p>\n<h3>EDIT 2</h3>\n<p>When marking a method with <code>@Transactional</code>, Spring Boot binds the connection to the thread which is running the method, and only releases the connection back to the pool when the transaction completes or is reversed. So in theory, annotating my <code>insert()</code> method with <code>@Transactional</code> should guarantee data consistency.</p>\n"},{"tags":["java","xml","tomcat","jdbc","tomcat9"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1682625941,"post_id":76124067,"comment_id":134249757,"body_markdown":"Regarding the class not found problem: If `import org.apache.commons.dbcp2.BasicDataSourceFactory;` throws a compile-time error, then your application needs the DBCP2 library - for example, if you use Maven, see [here](https://mvnrepository.com/artifact/org.apache.commons/commons-dbcp2/2.9.0). But mark is as `&lt;scope&gt;provided&lt;/scope&gt;`, as these classes are part of Tomcat already (when you deploy your app). This assumes you are actually using DBCP2 (the default Tomcat pool solution). It looks as if you are.","body":"Regarding the class not found problem: If <code>import org.apache.commons.dbcp2.BasicDataSourceFactory;</code> throws a compile-time error, then your application needs the DBCP2 library - for example, if you use Maven, see <a href=\"https://mvnrepository.com/artifact/org.apache.commons/commons-dbcp2/2.9.0\" rel=\"nofollow noreferrer\">here</a>. But mark is as <code>&lt;scope&gt;provided&lt;&#47;scope&gt;</code>, as these classes are part of Tomcat already (when you deploy your app). This assumes you are actually using DBCP2 (the default Tomcat pool solution). It looks as if you are."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":3,"creation_date":1682626075,"post_id":76124067,"comment_id":134249781,"body_markdown":"The only other thing I would add is: &quot;_encrypted for any audit purposes_&quot; - I think an organization is better off spending its time in securing access to its servers, as this does not really provide much security (it may even give a false sense of security). But I understand this is just an opinion - and you may not have any choice, anyway.","body":"The only other thing I would add is: &quot;<i>encrypted for any audit purposes</i>&quot; - I think an organization is better off spending its time in securing access to its servers, as this does not really provide much security (it may even give a false sense of security). But I understand this is just an opinion - and you may not have any choice, anyway."},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":1,"creation_date":1682668439,"post_id":76124067,"comment_id":134255038,"body_markdown":"For the record: [Here&#39;s the mentioned FAQ article](https://cwiki.apache.org/confluence/display/TOMCAT/Password). It even links to the Vault implementation, implying you don&#39;t need to implement anything to achieve a higher level of obfuscation.","body":"For the record: <a href=\"https://cwiki.apache.org/confluence/display/TOMCAT/Password\" rel=\"nofollow noreferrer\">Here&#39;s the mentioned FAQ article</a>. It even links to the Vault implementation, implying you don&#39;t need to implement anything to achieve a higher level of obfuscation."}],"owner":{"account_id":9559007,"reputation":403,"user_id":7100546,"accept_rate":100,"display_name":"Rob"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682857286,"creation_date":1682624444,"question_id":76124067,"body_markdown":"Like the title says, our application has resources in the context.xml that we need to encrypt for security audit purposes. I know Tomcat&#39;s FAQ mentions security through obscurity, but we need to have it encrypted for any audit purposes.\r\n\r\nCurrently a resource in the context.xml looks like this: \r\n\r\n```xml\r\n&lt;Resource \r\n\t  name=&quot;jdbc/OracleDataSource&quot; \r\n\t  auth=&quot;Container&quot; \r\n\t  type=&quot;javax.sql.DataSource&quot; \r\n\t  driverClassName=&quot;oracle.jdbc.OracleDriver&quot; \r\n\t  url=&quot;jdbc:oracle:thin:@ServerName:PORT/NAME&quot; \r\n\t  username=&quot;APP_USERNAME&quot; \r\n\t  password=&quot;APP_PASSWORD&quot;\r\n      testWhileIdle=&quot;true&quot;\r\n      testOnBorrow=&quot;true&quot;\r\n      testOnReturn=&quot;false&quot;\r\n      validationQuery=&quot;select 1 from dual&quot;\r\n      timeBetweenEvictionRunsMillis=&quot;5000&quot;\r\n      maxTotal=&quot;100&quot;\r\n      maxIdle=&quot;20&quot;\r\n      minIdle=&quot;10&quot;\r\n      maxWaitMillis=&quot;10000&quot;\r\n      initialSize=&quot;10&quot;\r\n      removeAbandonedTimeout=&quot;1800&quot;\r\n      removeAbandonedOnBorrow=&quot;true&quot;\r\n      removeAbandonedOnMaintenance=&quot;true&quot;\r\n      logAbandoned=&quot;true&quot;\r\n      minEvictableIdleTimeMillis=&quot;30000&quot;\r\n/&gt;\r\n```\r\n\r\nIn our app code we make use of RC4 encoding which the files know to decrypt from the @RC4Encode@XXX,XXX,XXX,XXX,XXX,XXX,XXX format into a clear-text password for other credential uses.\r\n\r\nI was hoping to implement this somehow in our context.xml, but I&#39;m unsure how to approach doing that. I saw some previously posts here about BasicDataSourceFactory, but I&#39;m not quite understanding the implementations and when I try to import BasicDataSourceFactory and I get a ClassNotFoundException. I did try to do a variable import in the context.xml however we don&#39;t have access the the catalina.properties on the server that our app sits on and we don&#39;t have access to the folder structure that it resides in either, which from my understanding killed the possibility of using properties replacement or external XML entities.\r\n\r\nIf I could figure out how to resolve the DataSourceFactory not found error, I could try to copy some of the &quot;decode&quot; methods used in decoding our passwords back to clear-text and directly call a decode method against the RC4 encoded password and then pass that to the context.xml.\r\n\r\nRough pseudo-code of that DataSourceFactory method:\r\n```java\r\npublic class APPDataSourceFactory extends BasicDataSourceFactory {\r\n    private String encrypted_pwd = &quot;@RC4Encode@123,456,789,012,345&quot;;\r\n    public void decrypt_pwd(encrypted_pwd,key){\r\n        //Decryption Steps\r\n        return decrypted_pwd;\r\n    }\r\n}\r\n```\r\n","title":"How can I encrypt the passwords of a data source on Tomcat 9 in the context.xml?","body":"<p>Like the title says, our application has resources in the context.xml that we need to encrypt for security audit purposes. I know Tomcat's FAQ mentions security through obscurity, but we need to have it encrypted for any audit purposes.</p>\n<p>Currently a resource in the context.xml looks like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Resource \n      name=&quot;jdbc/OracleDataSource&quot; \n      auth=&quot;Container&quot; \n      type=&quot;javax.sql.DataSource&quot; \n      driverClassName=&quot;oracle.jdbc.OracleDriver&quot; \n      url=&quot;jdbc:oracle:thin:@ServerName:PORT/NAME&quot; \n      username=&quot;APP_USERNAME&quot; \n      password=&quot;APP_PASSWORD&quot;\n      testWhileIdle=&quot;true&quot;\n      testOnBorrow=&quot;true&quot;\n      testOnReturn=&quot;false&quot;\n      validationQuery=&quot;select 1 from dual&quot;\n      timeBetweenEvictionRunsMillis=&quot;5000&quot;\n      maxTotal=&quot;100&quot;\n      maxIdle=&quot;20&quot;\n      minIdle=&quot;10&quot;\n      maxWaitMillis=&quot;10000&quot;\n      initialSize=&quot;10&quot;\n      removeAbandonedTimeout=&quot;1800&quot;\n      removeAbandonedOnBorrow=&quot;true&quot;\n      removeAbandonedOnMaintenance=&quot;true&quot;\n      logAbandoned=&quot;true&quot;\n      minEvictableIdleTimeMillis=&quot;30000&quot;\n/&gt;\n</code></pre>\n<p>In our app code we make use of RC4 encoding which the files know to decrypt from the @RC4Encode@XXX,XXX,XXX,XXX,XXX,XXX,XXX format into a clear-text password for other credential uses.</p>\n<p>I was hoping to implement this somehow in our context.xml, but I'm unsure how to approach doing that. I saw some previously posts here about BasicDataSourceFactory, but I'm not quite understanding the implementations and when I try to import BasicDataSourceFactory and I get a ClassNotFoundException. I did try to do a variable import in the context.xml however we don't have access the the catalina.properties on the server that our app sits on and we don't have access to the folder structure that it resides in either, which from my understanding killed the possibility of using properties replacement or external XML entities.</p>\n<p>If I could figure out how to resolve the DataSourceFactory not found error, I could try to copy some of the &quot;decode&quot; methods used in decoding our passwords back to clear-text and directly call a decode method against the RC4 encoded password and then pass that to the context.xml.</p>\n<p>Rough pseudo-code of that DataSourceFactory method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class APPDataSourceFactory extends BasicDataSourceFactory {\n    private String encrypted_pwd = &quot;@RC4Encode@123,456,789,012,345&quot;;\n    public void decrypt_pwd(encrypted_pwd,key){\n        //Decryption Steps\n        return decrypted_pwd;\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","event-handling","jspinner","changelistener"],"answers":[{"comments":[{"owner":{"account_id":242248,"reputation":1693,"user_id":513637,"accept_rate":79,"display_name":"spuas"},"score":1,"creation_date":1307518396,"post_id":3949518,"comment_id":7324542,"body_markdown":"This is correct but not solves the problem stated above: when editing manually, stateChanged is only called after the JSpinner losses focus or if the user press the Enter key but not with each key typed","body":"This is correct but not solves the problem stated above: when editing manually, stateChanged is only called after the JSpinner losses focus or if the user press the Enter key but not with each key typed"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1317218105,"post_id":3949518,"comment_id":9197995,"body_markdown":"@Andrei Vajna II: Thank you for explaining your down-vote, but I will defer to user236501. I have verified the example and updated it to remove a spurious import.","body":"@Andrei Vajna II: Thank you for explaining your down-vote, but I will defer to user236501. I have verified the example and updated it to remove a spurious import."},{"owner":{"account_id":30905,"reputation":4702,"user_id":84556,"accept_rate":93,"display_name":"Andrei Vajna II"},"score":0,"creation_date":1317219971,"post_id":3949518,"comment_id":9198668,"body_markdown":"I think you misunderstood his problem. The key is `it required you to click again anyplace to update`, meaning that you have to change focus from the spinner in order to update the label. user236501 was looking for a way to update the label whenever you change something to the spinner (e.g. insert a character).","body":"I think you misunderstood his problem. The key is <code>it required you to click again anyplace to update</code>, meaning that you have to change focus from the spinner in order to update the label. user236501 was looking for a way to update the label whenever you change something to the spinner (e.g. insert a character)."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1317230506,"post_id":3949518,"comment_id":9201853,"body_markdown":"As @spuas example shows, any such listener must recapitulate the editor&#39;s validation. A similar `DocumentListener`, which uses the editor&#39;s formatter, is shown above.","body":"As @spuas example shows, any such listener must recapitulate the editor&#39;s validation. A similar <code>DocumentListener</code>, which uses the editor&#39;s formatter, is shown above."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1317232000,"post_id":3949518,"comment_id":9202247,"body_markdown":"if I understood the question correctly, the requirement is to update the spinner model whenever the text of the formattedTextField changes. DocumentListener serves okay (though configuring the formatter is more straightforward, biased methinks :-), but then let the field to the work by calling formattedField.commitEdit","body":"if I understood the question correctly, the requirement is to update the spinner model whenever the text of the formattedTextField changes. DocumentListener serves okay (though configuring the formatter is more straightforward, biased methinks :-), but then let the field to the work by calling formattedField.commitEdit"},{"owner":{"account_id":30905,"reputation":4702,"user_id":84556,"accept_rate":93,"display_name":"Andrei Vajna II"},"score":0,"creation_date":1317281501,"post_id":3949518,"comment_id":9211520,"body_markdown":"That&#39;s more like it! `DocumentListener` doesn&#39;t work how you&#39;d want, because the it is called too frequently. For example, it will get called even when you just click inside the spinner without changing anything. It might be ok for this problem, but not all. And `KeyListener`s or `CaretListener`s are even worse, because they don&#39;t work for pasted text.","body":"That&#39;s more like it! <code>DocumentListener</code> doesn&#39;t work how you&#39;d want, because the it is called too frequently. For example, it will get called even when you just click inside the spinner without changing anything. It might be ok for this problem, but not all. And <code>KeyListener</code>s or <code>CaretListener</code>s are even worse, because they don&#39;t work for pasted text."}],"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"comment_count":6,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1317242922,"creation_date":1287243292,"answer_id":3949518,"question_id":3949382,"body_markdown":"The code you show appears correct. For reference, here is a working example.\r\n\r\nAddendum: While the `JSpinner` has focus, the left and right arrow keys move the caret. The up arrow increments and the down arrow decrements the field containing the caret. The change is (effectively) simultaneous in both the spinner and the label.\r\n\r\nTo access the `JFormattedTextField` of the [`JSpinner.DateEditor`][1], use the parent&#39;s [`getTextField()`][2] method. A suitable caret listener or text input listener may then be used to update the label as desired.\r\n\r\nAddendum: Update to use [`setCommitsOnValidEdit`][3], as suggested [here][4].\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridLayout;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import javax.swing.JFormattedTextField;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JSpinner;\r\n    import javax.swing.JSpinner.DateEditor;\r\n    import javax.swing.SpinnerDateModel;\r\n    import javax.swing.event.ChangeEvent;\r\n    import javax.swing.event.ChangeListener;\r\n    import javax.swing.text.DefaultFormatter;\r\n    \r\n    /**\r\n     * @see https://stackoverflow.com/questions/2010819\r\n     * @see https://stackoverflow.com/questions/3949518\r\n     */\r\n    public class JSpinnerTest extends JPanel {\r\n    \r\n        public static void main(String args[]) {\r\n            EventQueue.invokeLater(new Runnable() {\r\n    \r\n                @Override\r\n                public void run() {\r\n                    JFrame f = new JFrame(&quot;JSpinnerTest&quot;);\r\n                    f.add(new JSpinnerTest());\r\n                    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                    f.pack();\r\n                    f.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n    \r\n        public JSpinnerTest() {\r\n            super(new GridLayout(0, 1));\r\n            final JLabel label = new JLabel();\r\n            final JSpinner spinner = new JSpinner();\r\n            Calendar calendar = Calendar.getInstance();\r\n            Date initDate = calendar.getTime();\r\n            calendar.add(Calendar.YEAR, -5);\r\n            Date earliestDate = calendar.getTime();\r\n            calendar.add(Calendar.YEAR, 10);\r\n            Date latestDate = calendar.getTime();\r\n            spinner.setModel(new SpinnerDateModel(\r\n                initDate, earliestDate, latestDate, Calendar.MONTH));\r\n            DateEditor editor = new JSpinner.DateEditor(spinner, &quot;MMM yyyy&quot;);\r\n            spinner.setEditor(editor);\r\n            JFormattedTextField jtf = editor.getTextField();\r\n            DefaultFormatter formatter = (DefaultFormatter) jtf.getFormatter();\r\n            formatter.setCommitsOnValidEdit(true);\r\n            spinner.addChangeListener(new ChangeListener() {\r\n    \r\n                @Override\r\n                public void stateChanged(ChangeEvent e) {\r\n                    JSpinner s = (JSpinner) e.getSource();\r\n                    label.setText(s.getValue().toString());\r\n                }\r\n            });\r\n            label.setText(initDate.toString());\r\n            this.add(spinner);\r\n            this.add(label);\r\n        }\r\n    }\r\n\r\n\r\n  [1]:http://download.oracle.com/javase/6/docs/api/javax/swing/JSpinner.DateEditor.html\r\n  [2]:http://download.oracle.com/javase/6/docs/api/javax/swing/JSpinner.DefaultEditor.html#getTextField%28%29\r\n  [3]: http://download.oracle.com/javase/7/docs/api/javax/swing/text/DefaultFormatter.html#setCommitsOnValidEdit%28boolean%29\r\n  [4]: https://stackoverflow.com/questions/3949382/jspinner-value-change-events/7587253#7587253","title":"JSpinner Value change Events","body":"<p>The code you show appears correct. For reference, here is a working example.</p>\n\n<p>Addendum: While the <code>JSpinner</code> has focus, the left and right arrow keys move the caret. The up arrow increments and the down arrow decrements the field containing the caret. The change is (effectively) simultaneous in both the spinner and the label.</p>\n\n<p>To access the <code>JFormattedTextField</code> of the <a href=\"http://download.oracle.com/javase/6/docs/api/javax/swing/JSpinner.DateEditor.html\" rel=\"noreferrer\"><code>JSpinner.DateEditor</code></a>, use the parent's <a href=\"http://download.oracle.com/javase/6/docs/api/javax/swing/JSpinner.DefaultEditor.html#getTextField%28%29\" rel=\"noreferrer\"><code>getTextField()</code></a> method. A suitable caret listener or text input listener may then be used to update the label as desired.</p>\n\n<p>Addendum: Update to use <a href=\"http://download.oracle.com/javase/7/docs/api/javax/swing/text/DefaultFormatter.html#setCommitsOnValidEdit%28boolean%29\" rel=\"noreferrer\"><code>setCommitsOnValidEdit</code></a>, as suggested <a href=\"https://stackoverflow.com/questions/3949382/jspinner-value-change-events/7587253#7587253\">here</a>.</p>\n\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridLayout;\nimport java.util.Calendar;\nimport java.util.Date;\nimport javax.swing.JFormattedTextField;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JSpinner;\nimport javax.swing.JSpinner.DateEditor;\nimport javax.swing.SpinnerDateModel;\nimport javax.swing.event.ChangeEvent;\nimport javax.swing.event.ChangeListener;\nimport javax.swing.text.DefaultFormatter;\n\n/**\n * @see https://stackoverflow.com/questions/2010819\n * @see https://stackoverflow.com/questions/3949518\n */\npublic class JSpinnerTest extends JPanel {\n\n    public static void main(String args[]) {\n        EventQueue.invokeLater(new Runnable() {\n\n            @Override\n            public void run() {\n                JFrame f = new JFrame(\"JSpinnerTest\");\n                f.add(new JSpinnerTest());\n                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                f.pack();\n                f.setVisible(true);\n            }\n        });\n    }\n\n    public JSpinnerTest() {\n        super(new GridLayout(0, 1));\n        final JLabel label = new JLabel();\n        final JSpinner spinner = new JSpinner();\n        Calendar calendar = Calendar.getInstance();\n        Date initDate = calendar.getTime();\n        calendar.add(Calendar.YEAR, -5);\n        Date earliestDate = calendar.getTime();\n        calendar.add(Calendar.YEAR, 10);\n        Date latestDate = calendar.getTime();\n        spinner.setModel(new SpinnerDateModel(\n            initDate, earliestDate, latestDate, Calendar.MONTH));\n        DateEditor editor = new JSpinner.DateEditor(spinner, \"MMM yyyy\");\n        spinner.setEditor(editor);\n        JFormattedTextField jtf = editor.getTextField();\n        DefaultFormatter formatter = (DefaultFormatter) jtf.getFormatter();\n        formatter.setCommitsOnValidEdit(true);\n        spinner.addChangeListener(new ChangeListener() {\n\n            @Override\n            public void stateChanged(ChangeEvent e) {\n                JSpinner s = (JSpinner) e.getSource();\n                label.setText(s.getValue().toString());\n            }\n        });\n        label.setText(initDate.toString());\n        this.add(spinner);\n        this.add(label);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":5,"creation_date":1317232117,"post_id":6276603,"comment_id":9202275,"body_markdown":"hey, it&#39;s the first time today (which is at its end, as far as working is concerned): dont use keylisteners - they are not good enough, because they miss text pasted into the field","body":"hey, it&#39;s the first time today (which is at its end, as far as working is concerned): dont use keylisteners - they are not good enough, because they miss text pasted into the field"}],"tags":[],"owner":{"account_id":242248,"reputation":1693,"user_id":513637,"accept_rate":79,"display_name":"spuas"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1307524723,"creation_date":1307524723,"answer_id":6276603,"question_id":3949382,"body_markdown":"Problem here is that when you edit the `JSpinner` value manually by typing from the keyboard, the `stateChanged` event is not fired until the focus is lost by the `JSpinner` or until Enter key has been pressed.\r\n\r\nIf you want to upload the value, a `KeyListener` is needed which will perform a `setValue` in the `JSpinner` for each typed key.\r\n\r\nI leave an example here for a `JSpinner` with a `SpinnerNumberModel`:\r\n\r\n    JSpinner spinner= new JSpinner();\r\n    spinner.setModel(new SpinnerNumberModel(0, 0, Integer.MAX_VALUE, 1));\r\n    spinner.addChangeListener(new ChangeListener() {\r\n    \t@Override\r\n        public void stateChanged(ChangeEvent e) {\r\n    \t\tjLabel.setText(spinner.getValue());\r\n        }\r\n    });\r\n    final JTextField jtf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();\r\n    jtf.addKeyListener(new KeyAdapter() {\r\n     \t@Override\r\n    \tpublic void keyReleased(KeyEvent e) {\r\n        \tString text = jtf.getText().replace(&quot;,&quot;, &quot;&quot;);\r\n        \tint oldCaretPos = jtf.getCaretPosition();\r\n        \ttry {\r\n        \t\tInteger newValue = Integer.valueOf(text);\r\n        \t\tspinner.setValue(newValue);\r\n        \t\tjtf.setCaretPosition(oldCaretPos);\r\n        \t} catch(NumberFormatException ex) {\r\n        \t\t//Not a number in text field -&gt; do nothing\r\n        \t}\r\n        }\r\n    });","title":"JSpinner Value change Events","body":"<p>Problem here is that when you edit the <code>JSpinner</code> value manually by typing from the keyboard, the <code>stateChanged</code> event is not fired until the focus is lost by the <code>JSpinner</code> or until Enter key has been pressed.</p>\n\n<p>If you want to upload the value, a <code>KeyListener</code> is needed which will perform a <code>setValue</code> in the <code>JSpinner</code> for each typed key.</p>\n\n<p>I leave an example here for a <code>JSpinner</code> with a <code>SpinnerNumberModel</code>:</p>\n\n<pre><code>JSpinner spinner= new JSpinner();\nspinner.setModel(new SpinnerNumberModel(0, 0, Integer.MAX_VALUE, 1));\nspinner.addChangeListener(new ChangeListener() {\n    @Override\n    public void stateChanged(ChangeEvent e) {\n        jLabel.setText(spinner.getValue());\n    }\n});\nfinal JTextField jtf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();\njtf.addKeyListener(new KeyAdapter() {\n    @Override\n    public void keyReleased(KeyEvent e) {\n        String text = jtf.getText().replace(\",\", \"\");\n        int oldCaretPos = jtf.getCaretPosition();\n        try {\n            Integer newValue = Integer.valueOf(text);\n            spinner.setValue(newValue);\n            jtf.setCaretPosition(oldCaretPos);\n        } catch(NumberFormatException ex) {\n            //Not a number in text field -&gt; do nothing\n        }\n    }\n});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2043549,"reputation":1360,"user_id":1824182,"accept_rate":83,"display_name":"Ti Strga"},"score":2,"creation_date":1358280534,"post_id":7587253,"comment_id":19942468,"body_markdown":"Rather than using details of getComponent, the Oracle exmaples use this sequence to retrieve the JFormattedTextField:  `public JFormattedTextField getTextField(JSpinner spinner) { return ((JSpinner.DefaultEditor)spinner.getEditor()).getTextField(); }`  I&#39;ve removed the error checking, but that&#39;s another possibility.","body":"Rather than using details of getComponent, the Oracle exmaples use this sequence to retrieve the JFormattedTextField:  <code>public JFormattedTextField getTextField(JSpinner spinner) { return ((JSpinner.DefaultEditor)spinner.getEditor()).getTextField()&zwnj;&#8203;; }</code>  I&#39;ve removed the error checking, but that&#39;s another possibility."}],"tags":[],"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"comment_count":1,"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1317231444,"creation_date":1317231444,"answer_id":7587253,"question_id":3949382,"body_markdown":"The answer is to configure the formatter used in the JFormattedTextField which is a child of the spinner&#39;s editor:\r\n\r\n        formatter.setCommitsOnValidEdit(true);\r\n\r\nUnfortunately, getting one&#39;s hand on it is as long and dirty as the introductory sentence: \r\n\r\n        final JSpinner spinner = new JSpinner();\r\n        JComponent comp = spinner.getEditor();\r\n        JFormattedTextField field = (JFormattedTextField) comp.getComponent(0);\r\n        DefaultFormatter formatter = (DefaultFormatter) field.getFormatter();\r\n        formatter.setCommitsOnValidEdit(true);\r\n        spinner.addChangeListener(new ChangeListener() {\r\n\r\n            @Override\r\n            public void stateChanged(ChangeEvent e) {\r\n                LOG.info(&quot;value changed: &quot; + spinner.getValue());\r\n            }\r\n        });\r\n\r\n\r\nA slightly (but not by much) cleaner way might be to subclass NumberEditor and expose a method which allows the config","title":"JSpinner Value change Events","body":"<p>The answer is to configure the formatter used in the JFormattedTextField which is a child of the spinner's editor:</p>\n\n<pre><code>    formatter.setCommitsOnValidEdit(true);\n</code></pre>\n\n<p>Unfortunately, getting one's hand on it is as long and dirty as the introductory sentence: </p>\n\n<pre><code>    final JSpinner spinner = new JSpinner();\n    JComponent comp = spinner.getEditor();\n    JFormattedTextField field = (JFormattedTextField) comp.getComponent(0);\n    DefaultFormatter formatter = (DefaultFormatter) field.getFormatter();\n    formatter.setCommitsOnValidEdit(true);\n    spinner.addChangeListener(new ChangeListener() {\n\n        @Override\n        public void stateChanged(ChangeEvent e) {\n            LOG.info(\"value changed: \" + spinner.getValue());\n        }\n    });\n</code></pre>\n\n<p>A slightly (but not by much) cleaner way might be to subclass NumberEditor and expose a method which allows the config</p>\n"},{"tags":[],"owner":{"account_id":8931127,"reputation":1,"user_id":6663720,"display_name":"Isidore Bennett"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1470060412,"creation_date":1470060412,"answer_id":38700977,"question_id":3949382,"body_markdown":"I&#39;m new so I might be breaking some rules and I might be late. But I found some of the answers a bit confusing so I played around in NetBeans IDE and found that if you right click on the jspinner GUI component placed on your jform and go to events-&gt; change, code will be generated for you. ","title":"JSpinner Value change Events","body":"<p>I'm new so I might be breaking some rules and I might be late. But I found some of the answers a bit confusing so I played around in NetBeans IDE and found that if you right click on the jspinner GUI component placed on your jform and go to events-> change, code will be generated for you. </p>\n"},{"tags":[],"owner":{"account_id":9442932,"reputation":2017,"user_id":7022735,"accept_rate":40,"display_name":"rvit34"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1476552554,"creation_date":1476523575,"answer_id":40057344,"question_id":3949382,"body_markdown":"It might be an late answer but you may use my approach.   \r\nAs *spuas* mentioned above the problem is that `stateChanged` event is fired only when focus is lost or Enter key is pressed.  \r\nUsing KeyListeners is not an good idea as well.  \r\nIt would be better to use `DocumentListener` instead. I modified spuas&#39;s example a bit and that&#39;s what I got:    \r\n\r\n       \r\n    JSpinner spinner= new JSpinner();\r\n    spinner.setModel(new SpinnerNumberModel(0, 0, Integer.MAX_VALUE, 1));\r\n    final JTextField jtf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();\r\n            jtf.getDocument().addDocumentListener(new DocumentListener() {\t\t\t\t\r\n\r\n            private volatile int value = 0;\r\n\r\n        \t@Override\r\n        \tpublic void removeUpdate(DocumentEvent e) {\r\n        \t\tshowChangedValue(e);\t\r\n        \t}\r\n        \t\t\t\t\r\n        \t@Override\r\n        \tpublic void insertUpdate(DocumentEvent e) {\r\n        \t\tshowChangedValue(e);\t\t\t\t\r\n        \t}\r\n        \t\t\t\t\r\n        \t@Override\r\n        \tpublic void changedUpdate(DocumentEvent e) {\r\n        \t\tshowChangedValue(e);\t\r\n        \t}\r\n        \t\t\t\t\r\n        \tprivate void showChangedValue(DocumentEvent e){\r\n        \t\ttry {\r\n        \t\t    String text = e.getDocument().getText(0, e.getDocument().getLength());\r\n        \t\t    if (text==null || text.isEmpty()) return;\r\n        \t\t        int val = Integer.parseInt(text).getValue();\r\n                    if (value!=val){\r\n                       System.out.println(String.format(&quot;changed  value: %d&quot;,val));  \t\t\t\r\n    \t               value = val;\r\n                    }\t\t\r\n        \t\t} catch (BadLocationException | NumberFormatException e1) {\r\n                              //handle if you want\r\n        \t\t}        \r\n           }\r\n    });\r\n    \r\n   \r\n\r\n\r\n\r\n","title":"JSpinner Value change Events","body":"<p>It might be an late answer but you may use my approach.<br>\nAs <em>spuas</em> mentioned above the problem is that <code>stateChanged</code> event is fired only when focus is lost or Enter key is pressed.<br>\nUsing KeyListeners is not an good idea as well.<br>\nIt would be better to use <code>DocumentListener</code> instead. I modified spuas's example a bit and that's what I got:    </p>\n\n<pre><code>JSpinner spinner= new JSpinner();\nspinner.setModel(new SpinnerNumberModel(0, 0, Integer.MAX_VALUE, 1));\nfinal JTextField jtf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();\n        jtf.getDocument().addDocumentListener(new DocumentListener() {              \n\n        private volatile int value = 0;\n\n        @Override\n        public void removeUpdate(DocumentEvent e) {\n            showChangedValue(e);    \n        }\n\n        @Override\n        public void insertUpdate(DocumentEvent e) {\n            showChangedValue(e);                \n        }\n\n        @Override\n        public void changedUpdate(DocumentEvent e) {\n            showChangedValue(e);    \n        }\n\n        private void showChangedValue(DocumentEvent e){\n            try {\n                String text = e.getDocument().getText(0, e.getDocument().getLength());\n                if (text==null || text.isEmpty()) return;\n                    int val = Integer.parseInt(text).getValue();\n                if (value!=val){\n                   System.out.println(String.format(\"changed  value: %d\",val));             \n                   value = val;\n                }       \n            } catch (BadLocationException | NumberFormatException e1) {\n                          //handle if you want\n            }        \n       }\n});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1047596,"reputation":9325,"user_id":1052284,"accept_rate":44,"display_name":"Mark Jeronimus"},"score":0,"creation_date":1523281007,"post_id":41992704,"comment_id":86482467,"body_markdown":"More boilerplate but more efficient when you have three or more spinners in your GUI","body":"More boilerplate but more efficient when you have three or more spinners in your GUI"}],"tags":[],"owner":{"account_id":10159529,"reputation":31,"user_id":7503469,"display_name":"Stephen Cuminger"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486053715,"creation_date":1485997905,"answer_id":41992704,"question_id":3949382,"body_markdown":"The last answer can be rearranged a little to make it a little more flexible. You can simply use this new MyJSpinner in place of any JSpinner. The biggest change is that you can use this new version with any underlying model of the JSpinner (int, double, byte, etc.)\r\n\r\n        public class MyJSpinner extends JSpinner{\r\n            boolean setvalueinprogress=false;\r\n            public MyJSpinner()\r\n            {\r\n                super();\r\n                final JTextField jtf = ((JSpinner.DefaultEditor) getEditor()).getTextField();\r\n                jtf.getDocument().addDocumentListener(new DocumentListener() {              \r\n\r\n                        @Override\r\n                        public void removeUpdate(DocumentEvent e) {\r\n                            showChangedValue(e);    \r\n                        }\r\n\r\n                        @Override\r\n                        public void insertUpdate(DocumentEvent e) {\r\n                            showChangedValue(e);                \r\n                        }\r\n\r\n                        @Override\r\n                        public void changedUpdate(DocumentEvent e) {\r\n                            showChangedValue(e);    \r\n                        }\r\n\r\n                        private void showChangedValue(DocumentEvent e){\r\n                            try {\r\n                                if (!setvalueinprogress)\r\n                                    MyJSpinner.this.commitEdit();      \r\n                            } catch (NumberFormatException | ParseException ex) {\r\n                                          //handle if you want\r\n                                Exceptions.printStackTrace(ex);\r\n                            }      \r\n                       }\r\n                });\r\n            }\r\n\r\n        @Override\r\n        public void setValue(Object value) {\r\n            setvalueinprogress=true;\r\n            super.setValue(value); \r\n            setvalueinprogress=false;\r\n        }\r\n\r\n     }","title":"JSpinner Value change Events","body":"<p>The last answer can be rearranged a little to make it a little more flexible. You can simply use this new MyJSpinner in place of any JSpinner. The biggest change is that you can use this new version with any underlying model of the JSpinner (int, double, byte, etc.)</p>\n\n<pre><code>    public class MyJSpinner extends JSpinner{\n        boolean setvalueinprogress=false;\n        public MyJSpinner()\n        {\n            super();\n            final JTextField jtf = ((JSpinner.DefaultEditor) getEditor()).getTextField();\n            jtf.getDocument().addDocumentListener(new DocumentListener() {              \n\n                    @Override\n                    public void removeUpdate(DocumentEvent e) {\n                        showChangedValue(e);    \n                    }\n\n                    @Override\n                    public void insertUpdate(DocumentEvent e) {\n                        showChangedValue(e);                \n                    }\n\n                    @Override\n                    public void changedUpdate(DocumentEvent e) {\n                        showChangedValue(e);    \n                    }\n\n                    private void showChangedValue(DocumentEvent e){\n                        try {\n                            if (!setvalueinprogress)\n                                MyJSpinner.this.commitEdit();      \n                        } catch (NumberFormatException | ParseException ex) {\n                                      //handle if you want\n                            Exceptions.printStackTrace(ex);\n                        }      \n                   }\n            });\n        }\n\n    @Override\n    public void setValue(Object value) {\n        setvalueinprogress=true;\n        super.setValue(value); \n        setvalueinprogress=false;\n    }\n\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13814723,"reputation":1,"user_id":9971585,"display_name":"Corrado Di Martino"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682856536,"creation_date":1682856536,"answer_id":76141198,"question_id":3949382,"body_markdown":"I resolved a similar situation by adding the requestFocus() method after the statement, like this:\r\n\r\n    spinner.addChangeListener(new ChangeListener() {\r\n        @Override\r\n        public void stateChanged(ChangeEvent e) {\r\n            //Do what you need\r\n            spinner.requestFocus();\r\n        }\r\n    }\r\nHoping this would be a good help. Have nice coding.","title":"JSpinner Value change Events","body":"<p>I resolved a similar situation by adding the requestFocus() method after the statement, like this:</p>\n<pre><code>spinner.addChangeListener(new ChangeListener() {\n    @Override\n    public void stateChanged(ChangeEvent e) {\n        //Do what you need\n        spinner.requestFocus();\n    }\n}\n</code></pre>\n<p>Hoping this would be a good help. Have nice coding.</p>\n"}],"owner":{"account_id":84665,"reputation":8558,"user_id":236501,"accept_rate":59,"display_name":"user236501"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67090,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"answer_count":7,"score":42,"last_activity_date":1682856536,"creation_date":1287240977,"question_id":3949382,"body_markdown":"How to make the update immediately when the jSpinner value was changed.\r\n\r\n    ChangeListener listener = new ChangeListener() {\r\n      public void stateChanged(ChangeEvent e) {\r\n        jLabel.setText(e.getSource());\r\n      }\r\n    };\r\n\r\n    spinner1.addChangeListener(listener);\r\n\r\nThe code above doesnt change the label text automatically, it required you to click again anyplace to update. \r\n\r\n","title":"JSpinner Value change Events","body":"<p>How to make the update immediately when the jSpinner value was changed.</p>\n\n<pre><code>ChangeListener listener = new ChangeListener() {\n  public void stateChanged(ChangeEvent e) {\n    jLabel.setText(e.getSource());\n  }\n};\n\nspinner1.addChangeListener(listener);\n</code></pre>\n\n<p>The code above doesnt change the label text automatically, it required you to click again anyplace to update. </p>\n"},{"tags":["java","mysql","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1682841599,"post_id":76140077,"comment_id":134276357,"body_markdown":"Hello, please check and update the text of your question. You are referring to tables blog and blog_seq but it should be posts and posts_seq. According to screenshot and entity code.","body":"Hello, please check and update the text of your question. You are referring to tables blog and blog_seq but it should be posts and posts_seq. According to screenshot and entity code."}],"answers":[{"tags":[],"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682841687,"creation_date":1682841687,"answer_id":76140144,"question_id":76140077,"body_markdown":"It basically happened due to:\r\n```\r\n@GeneratedValue(strategy=GenerationType.AUTO)\r\n```\r\n\r\n```AUTO``` strategy uses the database sequence to generate the unique value for your id column. If you log SQL queries then you would be able to see an extra query against that ```blog_seq``` to select the next unique value.\r\n\r\nIf that is not what you expect then you can use:\r\n```\r\n@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n```\r\n\r\nIt will use the database ```auto-increment``` id column and let the database generate next value for your id column.\r\n\r\nIt might not matter a lot for your project but do read about the performance implications of these two strategies.\r\n\r\n**&lt;u&gt;Edit:&lt;u/&gt;**&lt;br/&gt;\r\nFound this article which explains these strategies nicely. It will help you.&lt;br/&gt;\r\nhttps://thorben-janssen.com/jpa-generate-primary-keys/","title":"two tables got created in mysql with names blog and blog_seq through spring boot entity annotations","body":"<p>It basically happened due to:</p>\n<pre><code>@GeneratedValue(strategy=GenerationType.AUTO)\n</code></pre>\n<p><code>AUTO</code> strategy uses the database sequence to generate the unique value for your id column. If you log SQL queries then you would be able to see an extra query against that <code>blog_seq</code> to select the next unique value.</p>\n<p>If that is not what you expect then you can use:</p>\n<pre><code>@GeneratedValue(strategy=GenerationType.IDENTITY)\n</code></pre>\n<p>It will use the database <code>auto-increment</code> id column and let the database generate next value for your id column.</p>\n<p>It might not matter a lot for your project but do read about the performance implications of these two strategies.</p>\n<p><strong>Edit:</strong><br/>\nFound this article which explains these strategies nicely. It will help you.<br/>\n<a href=\"https://thorben-janssen.com/jpa-generate-primary-keys/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/jpa-generate-primary-keys/</a></p>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682842629,"creation_date":1682842629,"answer_id":76140210,"question_id":76140077,"body_markdown":"Hibernate needs an unique identifier for each entity. It is the field annotated with `@Id` and corresponding column `id` in the database table `posts`. This field could be provided by the application while creating a new entity (inserting a new row) but it would be hard to maintain. Usually the id will be generated automatically by the database or hibernate. This can be configured with the annotation `@GeneratedValue`.\r\n\r\nIn you case you have defined `GenerationType.AUTO`. This means that Hibernate can decide what kind of id generation to use. Depending on the database. Mostly it will choose a database sequence. But MySQL doesn&#39;t support sequences. That&#39;s why Hibernate will create a separate table to mimic a sequence. This is exactly what you can see as `posts_seq` table. It&#39;s only column `next_val` holds the current value of the `id` for the table `posts`.","title":"two tables got created in mysql with names blog and blog_seq through spring boot entity annotations","body":"<p>Hibernate needs an unique identifier for each entity. It is the field annotated with <code>@Id</code> and corresponding column <code>id</code> in the database table <code>posts</code>. This field could be provided by the application while creating a new entity (inserting a new row) but it would be hard to maintain. Usually the id will be generated automatically by the database or hibernate. This can be configured with the annotation <code>@GeneratedValue</code>.</p>\n<p>In you case you have defined <code>GenerationType.AUTO</code>. This means that Hibernate can decide what kind of id generation to use. Depending on the database. Mostly it will choose a database sequence. But MySQL doesn't support sequences. That's why Hibernate will create a separate table to mimic a sequence. This is exactly what you can see as <code>posts_seq</code> table. It's only column <code>next_val</code> holds the current value of the <code>id</code> for the table <code>posts</code>.</p>\n"},{"tags":[],"owner":{"account_id":1896783,"reputation":398,"user_id":1713555,"display_name":"sajinmp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682842828,"creation_date":1682842828,"answer_id":76140222,"question_id":76140077,"body_markdown":"`A sequence is a user-defined schema-bound object that yields a sequence of integers based on a specified specification`\r\n\r\nIn simple words, it generates numbers in a sequence. [This should give a better idea](https://www.geeksforgeeks.org/postgresql-create-sequence/).\r\n\r\nIn your case, `posts_seq` is the sequence generator associated with the `posts` table. It is used to generate `id` here. The value of `next_value` in `posts_seq` will be used to generate the `id` for the next row inserted to `posts` table. [More info](https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/generatedvalue).","title":"two tables got created in mysql with names blog and blog_seq through spring boot entity annotations","body":"<p><code>A sequence is a user-defined schema-bound object that yields a sequence of integers based on a specified specification</code></p>\n<p>In simple words, it generates numbers in a sequence. <a href=\"https://www.geeksforgeeks.org/postgresql-create-sequence/\" rel=\"nofollow noreferrer\">This should give a better idea</a>.</p>\n<p>In your case, <code>posts_seq</code> is the sequence generator associated with the <code>posts</code> table. It is used to generate <code>id</code> here. The value of <code>next_value</code> in <code>posts_seq</code> will be used to generate the <code>id</code> for the next row inserted to <code>posts</code> table. <a href=\"https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/generatedvalue\" rel=\"nofollow noreferrer\">More info</a>.</p>\n"}],"owner":{"account_id":27981118,"reputation":15,"user_id":21368845,"display_name":"Prafull Jain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":569,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76140144,"answer_count":3,"score":1,"last_activity_date":1682856405,"creation_date":1682840489,"question_id":76140077,"body_markdown":"I am new in `Spring Boot` and such things, this is the first project I was trying to explore and was following a lecture for project creation, I made an entity class with `@Entity` and `@Table` annotations, when I executed the project, two table in `mysql` db got created namely `blog` and `blog_seq`, I want to understand how this `blog_seq` got created and what is the significance to this table.\r\n\r\n`Entity` class:\r\n\r\n    package com.SpringBoot.blog.entity;\r\n\r\n    import jakarta.persistence.Column;\r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    import jakarta.persistence.Table;\r\n    import jakarta.persistence.UniqueConstraint;\r\n\r\n    @Entity\r\n    @Table(name = &quot;posts&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;titles&quot;})})\r\n    public class Posts {\r\n    \t    @Id\r\n\t    @GeneratedValue(strategy=GenerationType.AUTO)\r\n\t    private Long id;\r\n\t    @Column(name = &quot;titles&quot;, nullable = false)\r\n\t    private String title;\r\n\t    @Column(name = &quot;description&quot;, nullable = false)\r\n\t    private String description;\r\n\t    @Column(name = &quot;content&quot;, nullable = false)\r\n\t    private String content;\r\n\t\r\n\t    public Posts() {\r\n\t\t    super();\r\n\t    }\r\n\t\r\n\t    public Posts(long id, String title, String description, String content) {\r\n\t\t    super();\r\n\t\t    this.id = id;\r\n\t\t    this.title = title;\r\n\t\t    this.description = description;\r\n\t\t    this.content = content;\r\n\t    }\r\n\t\r\n\t    public long getId() {\r\n\t\t    return id;\r\n\t    }\r\n\t    public void setId(long id) {\r\n\t\t    this.id = id;\r\n\t    }\r\n\t    public String getTitle() {\r\n\t\t    return title;\r\n\t    }\r\n\t    public void setTitle(String title) {\r\n\t\t    this.title = title;\r\n\t    }\r\n\t    public String getDescription() {\r\n\t\t    return description;\r\n\t    }\r\n\t    public void setDescription(String description) {\r\n\t\t    this.description = description;\r\n\t    }\r\n\t    public String getContent() {\r\n\t\t    return content;\r\n\t    }\r\n\t    public void setContent(String content) {\r\n\t\t    this.content = content;\r\n\t    }\r\n\t \r\n    }\r\n\r\n`application.properties`:\r\n\r\n    spring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/blog\r\n    spring.datasource.userName=root\r\n    spring.datasource.password=123456789\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n`mysql` workbench:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThanks for the help!!\r\n\r\nTried changing the entity annotations and `application.properties` somewhat, but not working.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DhOTq.png","title":"two tables got created in mysql with names blog and blog_seq through spring boot entity annotations","body":"<p>I am new in <code>Spring Boot</code> and such things, this is the first project I was trying to explore and was following a lecture for project creation, I made an entity class with <code>@Entity</code> and <code>@Table</code> annotations, when I executed the project, two table in <code>mysql</code> db got created namely <code>blog</code> and <code>blog_seq</code>, I want to understand how this <code>blog_seq</code> got created and what is the significance to this table.</p>\n<p><code>Entity</code> class:</p>\n<pre><code>package com.SpringBoot.blog.entity;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport jakarta.persistence.UniqueConstraint;\n\n@Entity\n@Table(name = &quot;posts&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;titles&quot;})})\npublic class Posts {\n        @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    private Long id;\n    @Column(name = &quot;titles&quot;, nullable = false)\n    private String title;\n    @Column(name = &quot;description&quot;, nullable = false)\n    private String description;\n    @Column(name = &quot;content&quot;, nullable = false)\n    private String content;\n\n    public Posts() {\n        super();\n    }\n\n    public Posts(long id, String title, String description, String content) {\n        super();\n        this.id = id;\n        this.title = title;\n        this.description = description;\n        this.content = content;\n    }\n\n    public long getId() {\n        return id;\n    }\n    public void setId(long id) {\n        this.id = id;\n    }\n    public String getTitle() {\n        return title;\n    }\n    public void setTitle(String title) {\n        this.title = title;\n    }\n    public String getDescription() {\n        return description;\n    }\n    public void setDescription(String description) {\n        this.description = description;\n    }\n    public String getContent() {\n        return content;\n    }\n    public void setContent(String content) {\n        this.content = content;\n    }\n \n}\n</code></pre>\n<p><code>application.properties</code>:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/blog\nspring.datasource.userName=root\nspring.datasource.password=123456789\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p><code>mysql</code> workbench:</p>\n<p><a href=\"https://i.stack.imgur.com/DhOTq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DhOTq.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks for the help!!</p>\n<p>Tried changing the entity annotations and <code>application.properties</code> somewhat, but not working.</p>\n"},{"tags":["java","android","spotify"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682855641,"post_id":76141091,"comment_id":134277766,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":28463068,"reputation":19,"user_id":21779533,"display_name":"Sander Thee"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682855549,"creation_date":1682855549,"answer_id":76141110,"question_id":76141091,"body_markdown":"In your Main activity you must compose a redirect uri like:\r\n\r\n    private Uri getRedirectUri() {\r\n        return new Uri.Builder()\r\n                .scheme(&quot;protocol&quot;)\r\n                .authority(&quot;appname&quot;)\r\n                .build();\r\n    }\r\n\r\nAnd, in the Dashboard user this url like: \r\n\r\n    protocol://appname\r\n\r\n(both can be anything)\r\n","title":"What is the redirect uri for spotify apps on android?","body":"<p>In your Main activity you must compose a redirect uri like:</p>\n<pre><code>private Uri getRedirectUri() {\n    return new Uri.Builder()\n            .scheme(&quot;protocol&quot;)\n            .authority(&quot;appname&quot;)\n            .build();\n}\n</code></pre>\n<p>And, in the Dashboard user this url like:</p>\n<pre><code>protocol://appname\n</code></pre>\n<p>(both can be anything)</p>\n"}],"owner":{"account_id":28463068,"reputation":19,"user_id":21779533,"display_name":"Sander Thee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1682860716,"answer_count":1,"score":0,"last_activity_date":1682855549,"creation_date":1682855375,"question_id":76141091,"body_markdown":"I want to make an Android app for Spotify but I need to set a redirect uri?\r\n\r\nWhat Uri should I use?\r\n\r\nI expected the redirect uri to be documented somewhere but didn&#39;t find anything useable on Google.","title":"What is the redirect uri for spotify apps on android?","body":"<p>I want to make an Android app for Spotify but I need to set a redirect uri?</p>\n<p>What Uri should I use?</p>\n<p>I expected the redirect uri to be documented somewhere but didn't find anything useable on Google.</p>\n"},{"tags":["java","android","gson"],"comments":[{"owner":{"account_id":93280,"reputation":9803,"user_id":255293,"accept_rate":91,"display_name":"Patrick Kafka"},"score":0,"creation_date":1363719235,"post_id":15507997,"comment_id":21960396,"body_markdown":"similar question of double to int: http://stackoverflow.com/questions/12067206/gson-force-use-int-instead-of-double","body":"similar question of double to int: <a href=\"http://stackoverflow.com/questions/12067206/gson-force-use-int-instead-of-double\" title=\"gson force use int instead of double\">stackoverflow.com/questions/12067206/&hellip;</a>"},{"owner":{"account_id":941299,"reputation":27984,"user_id":969325,"accept_rate":100,"display_name":"Warpzit"},"score":1,"creation_date":1382623396,"post_id":15507997,"comment_id":29039075,"body_markdown":"@PatrickKafka but the answer here is gold.","body":"@PatrickKafka but the answer here is gold."},{"owner":{"account_id":98471,"reputation":15227,"user_id":266531,"accept_rate":100,"display_name":"Kirby"},"score":1,"creation_date":1481690604,"post_id":15507997,"comment_id":69473608,"body_markdown":"Or, try converting to Jackson","body":"Or, try converting to Jackson"},{"owner":{"account_id":60183,"reputation":4029,"user_id":179864,"accept_rate":67,"display_name":"aditsu quit because SE is EVIL"},"score":0,"creation_date":1491914915,"post_id":15507997,"comment_id":73755817,"body_markdown":"Also see [this answer](http://stackoverflow.com/a/43346123/179864) I wrote for a similar question; the catch is that you would have to parse the data as an `Object` and then cast to whatever you need.","body":"Also see <a href=\"http://stackoverflow.com/a/43346123/179864\">this answer</a> I wrote for a similar question; the catch is that you would have to parse the data as an <code>Object</code> and then cast to whatever you need."},{"owner":{"account_id":290585,"reputation":6089,"user_id":592217,"display_name":"k4dima"},"score":0,"creation_date":1604039928,"post_id":15507997,"comment_id":114230920,"body_markdown":"Use https://github.com/FasterXML/jackson-databind https://stackoverflow.com/a/583634/592217","body":"Use <a href=\"https://github.com/FasterXML/jackson-databind\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-databind</a> <a href=\"https://stackoverflow.com/a/583634/592217\">stackoverflow.com/a/583634/592217</a>"}],"answers":[{"comments":[{"owner":{"account_id":1161721,"reputation":9621,"user_id":1141093,"accept_rate":87,"display_name":"brianmearns"},"score":0,"creation_date":1439469410,"post_id":15508288,"comment_id":51881222,"body_markdown":"Just for completeness, a Float is not more generic than an Integer, because it can&#39;t accurately represent all the same values as an Integer. But a Double can.","body":"Just for completeness, a Float is not more generic than an Integer, because it can&#39;t accurately represent all the same values as an Integer. But a Double can."},{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":0,"creation_date":1439473570,"post_id":15508288,"comment_id":51884490,"body_markdown":"I meant generic in terms of types - floating point can represent non-integer values.  Certainly in practice float/double cannot represent more values than int/long, but the limitations of floating point aren&#39;t really at issue here.","body":"I meant generic in terms of types - floating point can represent non-integer values.  Certainly in practice float/double cannot represent more values than int/long, but the limitations of floating point aren&#39;t really at issue here."},{"owner":{"account_id":3453445,"reputation":240,"user_id":2892515,"accept_rate":93,"display_name":"Enerccio"},"score":0,"creation_date":1509542118,"post_id":15508288,"comment_id":81058393,"body_markdown":"terrible advice, sorry but if value changes from int to string to something else but double you are screwed...","body":"terrible advice, sorry but if value changes from int to string to something else but double you are screwed..."},{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":0,"creation_date":1509574061,"post_id":15508288,"comment_id":81077100,"body_markdown":"@Enerccio what do you mean by &quot;*if value changes from int to string to something else but double*&quot;? When would the value&#39;s type change? If your document&#39;s schema changes you&#39;ll need to update your Java class definition.","body":"@Enerccio what do you mean by &quot;<i>if value changes from int to string to something else but double</i>&quot;? When would the value&#39;s type change? If your document&#39;s schema changes you&#39;ll need to update your Java class definition."},{"owner":{"account_id":3453445,"reputation":240,"user_id":2892515,"accept_rate":93,"display_name":"Enerccio"},"score":0,"creation_date":1509645577,"post_id":15508288,"comment_id":81112749,"body_markdown":"@dimo414 well maybe it can store different values of different types, anyways I sorted this by having `TaggedValue` and store type with the value","body":"@dimo414 well maybe it can store different values of different types, anyways I sorted this by having <code>TaggedValue</code> and store type with the value"},{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":0,"creation_date":1509652901,"post_id":15508288,"comment_id":81116627,"body_markdown":"@Enerccio right, you can pass along the type information as well and use a custom deserializer, but that isn&#39;t related to this question. *Unless type metadata is included in the schema* you cannot generally deserialize data whose schema changes arbitrarily.","body":"@Enerccio right, you can pass along the type information as well and use a custom deserializer, but that isn&#39;t related to this question. <i>Unless type metadata is included in the schema</i> you cannot generally deserialize data whose schema changes arbitrarily."}],"tags":[],"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"comment_count":6,"down_vote_count":2,"up_vote_count":52,"is_accepted":true,"score":50,"last_activity_date":1494619792,"creation_date":1363719895,"answer_id":15508288,"question_id":15507997,"body_markdown":"You&#39;re telling Gson it&#39;s looking for a list of maps of Strings to Objects, which essentially says for it to make a best guess as to the type of the Object. Since [JSON doesn&#39;t distinguish between integer and floating point fields][1] Gson has to default to Float/Double for numeric fields.\r\n\r\nGson is fundamentally built to inspect the type of the object you want to populate in order to determine how to parse the data.  If you don&#39;t give it any hint, it&#39;s not going to work very well.  One option is to define a custom JsonDeserializer, however better would be to not use a HashMap (and definitely don&#39;t use Hashtable!) and instead give Gson more information about the type of data it&#39;s expecting.\r\n\r\n    class Response {\r\n      int id;\r\n      int field_id;\r\n      ArrayList&lt;ArrayList&lt;Integer&gt;&gt; body; // or whatever type is most apropriate\r\n    }\r\n    \r\n    responses = new Gson()\r\n                .fromJson(draft, new TypeToken&lt;ArrayList&lt;Response&gt;&gt;(){}.getType());\r\n\r\nAgain, the whole point of Gson is to seamlessly convert structured data into structured objects.  If you ask it to create a nearly undefined structure like a list of maps of objects, you&#39;re defeating the whole point of Gson, and might as well use some more simplistic JSON parser.\r\n\r\n\r\n  [1]: http://json.org/","title":"How to prevent Gson from expressing integers as floats","body":"<p>You're telling Gson it's looking for a list of maps of Strings to Objects, which essentially says for it to make a best guess as to the type of the Object. Since <a href=\"http://json.org/\" rel=\"noreferrer\">JSON doesn't distinguish between integer and floating point fields</a> Gson has to default to Float/Double for numeric fields.</p>\n\n<p>Gson is fundamentally built to inspect the type of the object you want to populate in order to determine how to parse the data.  If you don't give it any hint, it's not going to work very well.  One option is to define a custom JsonDeserializer, however better would be to not use a HashMap (and definitely don't use Hashtable!) and instead give Gson more information about the type of data it's expecting.</p>\n\n<pre><code>class Response {\n  int id;\n  int field_id;\n  ArrayList&lt;ArrayList&lt;Integer&gt;&gt; body; // or whatever type is most apropriate\n}\n\nresponses = new Gson()\n            .fromJson(draft, new TypeToken&lt;ArrayList&lt;Response&gt;&gt;(){}.getType());\n</code></pre>\n\n<p>Again, the whole point of Gson is to seamlessly convert structured data into structured objects.  If you ask it to create a nearly undefined structure like a list of maps of objects, you're defeating the whole point of Gson, and might as well use some more simplistic JSON parser.</p>\n"},{"comments":[{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":3,"creation_date":1401197082,"post_id":20524187,"comment_id":36780883,"body_markdown":"Hearing &quot;*it could be a String or an Integer*&quot; is a pretty big red flag in my mind.  It sounds like your JSON data isn&#39;t well structured - you&#39;re creating a list of both integers and Strings?  Technically the JSON specification allows for that, but it&#39;s going to create pain for every deserializer that tries to interface with it.  Instead consider a) leaving the whole list Strings, if it&#39;s just a coincidence that some are numbers, b) splitting the numbers off into their own list, or c) changing the list type to be some more complex object that better reflects the intent of the data.","body":"Hearing &quot;<i>it could be a String or an Integer</i>&quot; is a pretty big red flag in my mind.  It sounds like your JSON data isn&#39;t well structured - you&#39;re creating a list of both integers and Strings?  Technically the JSON specification allows for that, but it&#39;s going to create pain for every deserializer that tries to interface with it.  Instead consider a) leaving the whole list Strings, if it&#39;s just a coincidence that some are numbers, b) splitting the numbers off into their own list, or c) changing the list type to be some more complex object that better reflects the intent of the data."},{"owner":{"account_id":3453445,"reputation":240,"user_id":2892515,"accept_rate":93,"display_name":"Enerccio"},"score":0,"creation_date":1509699641,"post_id":20524187,"comment_id":81132954,"body_markdown":"@dimo414 well all three solutions have their flaws: a) is useless since you don&#39;t then know which was number and which was string; b) that loses the ordering information (which then needs spearate list of indexes and overhead); c) complex objects will inflate result json","body":"@dimo414 well all three solutions have their flaws: a) is useless since you don&#39;t then know which was number and which was string; b) that loses the ordering information (which then needs spearate list of indexes and overhead); c) complex objects will inflate result json"},{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":0,"creation_date":1509759571,"post_id":20524187,"comment_id":81163603,"body_markdown":"@Enerccio complex data requires complex representations, so c) is often an acceptable tradeoff. Your points are well taken, but in practice I&#39;ll content that mixing data types is *in general* going to be more trouble than it&#39;s worth, and usually re-examining your requirements will reveal an alternative structure that works for your purposes without needing to jump through such hoops. Feel free to post a question with a concrete use-case, I&#39;d be happy to weigh in.","body":"@Enerccio complex data requires complex representations, so c) is often an acceptable tradeoff. Your points are well taken, but in practice I&#39;ll content that mixing data types is <i>in general</i> going to be more trouble than it&#39;s worth, and usually re-examining your requirements will reveal an alternative structure that works for your purposes without needing to jump through such hoops. Feel free to post a question with a concrete use-case, I&#39;d be happy to weigh in."}],"tags":[],"owner":{"account_id":2317167,"reputation":3504,"user_id":2033951,"accept_rate":93,"display_name":"Steve Kallestad"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1386778231,"creation_date":1386778231,"answer_id":20524187,"question_id":15507997,"body_markdown":"I&#39;m late to the party, but I just ran into this myself.  In my case, I didn&#39;t want to specify an Integer type in my ArrayList - since it could be a String or an Integer.\r\n\r\nMy solution is as follows:\r\n\r\n\tGsonBuilder gsonBuilder = new GsonBuilder();\r\n\tgsonBuilder.registerTypeAdapter(Double.class,  new JsonSerializer&lt;Double&gt;() {\r\n\r\n\t\tpublic JsonElement serialize(Double src, Type typeOfSrc,\r\n\t\t\t\t\tJsonSerializationContext context) {\r\n\t            Integer value = (int)Math.round(src);\r\n\t            return new JsonPrimitive(value);\r\n\t\t\t}\r\n\t    });\r\n\r\n\tGson gs = gsonBuilder.create();\r\n\r\nRather than using the default Gson definition with `Gson gs = new Gson();`, I have overridden the Double.class serialization to return an integer.\r\n\r\nIn my case, I have Strings and Integers within my JSON, but I do not have any doubles, so this doesn&#39;t pose a problem.\r\n\r\nIf you need a double or a float value, I suppose it would be possible to add some logic that tested the value for attributes specific to each datatype and returned an appropriate value.  Something like\r\n\r\n    if(/*source has a decimal point*/){\r\n      return new JsonPrimitive(src); \r\n    } else if (/* source has some attribute of a Float */){\r\n      Float value = /*convert the src value from double to a Float */;\r\n      return new JsonPrimitive(value);\r\n    } else {\r\n      //it looks like an integer\r\n      Integer value = (int)Math.round(src);\r\n      return new JsonPrimitive(value);\r\n    }\r\n\r\nI don&#39;t know how to test for or convert those datatypes off the top of my head, but this should put you on the right path.","title":"How to prevent Gson from expressing integers as floats","body":"<p>I'm late to the party, but I just ran into this myself.  In my case, I didn't want to specify an Integer type in my ArrayList - since it could be a String or an Integer.</p>\n\n<p>My solution is as follows:</p>\n\n<pre><code>GsonBuilder gsonBuilder = new GsonBuilder();\ngsonBuilder.registerTypeAdapter(Double.class,  new JsonSerializer&lt;Double&gt;() {\n\n    public JsonElement serialize(Double src, Type typeOfSrc,\n                JsonSerializationContext context) {\n            Integer value = (int)Math.round(src);\n            return new JsonPrimitive(value);\n        }\n    });\n\nGson gs = gsonBuilder.create();\n</code></pre>\n\n<p>Rather than using the default Gson definition with <code>Gson gs = new Gson();</code>, I have overridden the Double.class serialization to return an integer.</p>\n\n<p>In my case, I have Strings and Integers within my JSON, but I do not have any doubles, so this doesn't pose a problem.</p>\n\n<p>If you need a double or a float value, I suppose it would be possible to add some logic that tested the value for attributes specific to each datatype and returned an appropriate value.  Something like</p>\n\n<pre><code>if(/*source has a decimal point*/){\n  return new JsonPrimitive(src); \n} else if (/* source has some attribute of a Float */){\n  Float value = /*convert the src value from double to a Float */;\n  return new JsonPrimitive(value);\n} else {\n  //it looks like an integer\n  Integer value = (int)Math.round(src);\n  return new JsonPrimitive(value);\n}\n</code></pre>\n\n<p>I don't know how to test for or convert those datatypes off the top of my head, but this should put you on the right path.</p>\n"},{"comments":[{"owner":{"account_id":2646339,"reputation":8685,"user_id":2288944,"accept_rate":56,"display_name":"armnotstrong"},"score":13,"creation_date":1427252171,"post_id":20803406,"comment_id":46698576,"body_markdown":"Hi, I found this answer and using the way you mentioned in this post, but still, I got double when it should be int :-(","body":"Hi, I found this answer and using the way you mentioned in this post, but still, I got double when it should be int :-("},{"owner":{"account_id":742438,"reputation":390,"user_id":724990,"accept_rate":60,"display_name":"Alexander233"},"score":0,"creation_date":1533636753,"post_id":20803406,"comment_id":90408686,"body_markdown":"@armnotstrong For which number did this not work? The code above should work for all 32 bit int values because all have corresponding exact values for the Java double type (which has 64 bits). Casts between (integral) double and int values and back are exact in the int range. Going into the 64 bit long range however, positive or negative values exceeding 2 to the power of 52 (4,503,599,627,370,496) can no longer be converted correctly in all cases.","body":"@armnotstrong For which number did this not work? The code above should work for all 32 bit int values because all have corresponding exact values for the Java double type (which has 64 bits). Casts between (integral) double and int values and back are exact in the int range. Going into the 64 bit long range however, positive or negative values exceeding 2 to the power of 52 (4,503,599,627,370,496) can no longer be converted correctly in all cases."}],"tags":[],"owner":{"account_id":21815,"reputation":19742,"user_id":53328,"accept_rate":78,"display_name":"Martin Wickman"},"comment_count":2,"down_vote_count":1,"up_vote_count":43,"is_accepted":false,"score":42,"last_activity_date":1392016420,"creation_date":1388158830,"answer_id":20803406,"question_id":15507997,"body_markdown":"This works:\r\n\r\n     Gson gson = new GsonBuilder().\r\n            registerTypeAdapter(Double.class,  new JsonSerializer&lt;Double&gt;() {\t\r\n\r\n\t\t@Override\r\n\t\tpublic JsonElement serialize(Double src, Type typeOfSrc, JsonSerializationContext context) {\r\n\t\t\tif(src == src.longValue())\r\n\t\t\t\treturn new JsonPrimitive(src.longValue());\t\t\t\r\n            return new JsonPrimitive(src);\r\n\t\t}\r\n\t }).create();\r\n    \t\r\n","title":"How to prevent Gson from expressing integers as floats","body":"<p>This works:</p>\n\n<pre><code> Gson gson = new GsonBuilder().\n        registerTypeAdapter(Double.class,  new JsonSerializer&lt;Double&gt;() {   \n\n    @Override\n    public JsonElement serialize(Double src, Type typeOfSrc, JsonSerializationContext context) {\n        if(src == src.longValue())\n            return new JsonPrimitive(src.longValue());          \n        return new JsonPrimitive(src);\n    }\n }).create();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2327485,"reputation":3184,"user_id":4865117,"accept_rate":14,"display_name":"Leon"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1522226424,"creation_date":1522226424,"answer_id":49529831,"question_id":15507997,"body_markdown":"Basically, there is no perfect answer for this issue. All &quot;solutions&quot; work for some cases only. This is an issue reported to gson team, unfortunately seems they insist that &quot;javascript has no integer type&quot; as if they do not realize that gson is for java not javascript. So they refused to fix it until today (2018 now), despite other lib like jackson does not have such issue at all, despite how easy to fix it. So you may have to fix the issue yourself from gson source code and build your own gson.jar. The source file is `gson/src/main/java/com/google/gson/internal/bind/ObjectTypeAdapter.java`\r\n\r\n    case NUMBER:\r\n       return in.nextDouble();\r\n\r\n","title":"How to prevent Gson from expressing integers as floats","body":"<p>Basically, there is no perfect answer for this issue. All \"solutions\" work for some cases only. This is an issue reported to gson team, unfortunately seems they insist that \"javascript has no integer type\" as if they do not realize that gson is for java not javascript. So they refused to fix it until today (2018 now), despite other lib like jackson does not have such issue at all, despite how easy to fix it. So you may have to fix the issue yourself from gson source code and build your own gson.jar. The source file is <code>gson/src/main/java/com/google/gson/internal/bind/ObjectTypeAdapter.java</code></p>\n\n<pre><code>case NUMBER:\n   return in.nextDouble();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7407971,"reputation":2389,"user_id":5636313,"accept_rate":76,"display_name":"Farid"},"score":0,"creation_date":1606676716,"post_id":57847161,"comment_id":115026640,"body_markdown":"That&#39;s not a solution rather a dangerous workaround which will render the whole project a rubbish bin","body":"That&#39;s not a solution rather a dangerous workaround which will render the whole project a rubbish bin"}],"tags":[],"owner":{"account_id":14497490,"reputation":27,"user_id":10471617,"display_name":"XiangYun"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1567995779,"creation_date":1567995779,"answer_id":57847161,"question_id":15507997,"body_markdown":"This work for me.\r\n\r\nStep 1:\r\nCopy the ObjectTypeAdapter in gson into the project, keeping the path the same as in gson\r\nLike this\r\n\r\n    com\r\n      - xxx\r\n        - xxx\r\n    com\r\n      - google\r\n        - gson\r\n          - internal\r\n            - bind\r\n              ObjectTypeAdapter\r\n\r\nStep 2:\r\nModify ObjectTypeAdapter\r\n\r\n    case NUMBER:\r\n      return in.nextDouble();\r\n\r\nModified to\r\n\r\n    case NUMBER:\r\n\t  String number = in.nextString();\r\n\t  try {\r\n\t    return Long.valueOf(number);\r\n\t  } catch (NumberFormatException e) {\r\n\t    return Double.valueOf(number);\r\n\t  }\r\n\r\nOK.\r\n**Gson will prioritizes the ObjectTypeAdapter in the project.**","title":"How to prevent Gson from expressing integers as floats","body":"<p>This work for me.</p>\n\n<p>Step 1:\nCopy the ObjectTypeAdapter in gson into the project, keeping the path the same as in gson\nLike this</p>\n\n<pre><code>com\n  - xxx\n    - xxx\ncom\n  - google\n    - gson\n      - internal\n        - bind\n          ObjectTypeAdapter\n</code></pre>\n\n<p>Step 2:\nModify ObjectTypeAdapter</p>\n\n<pre><code>case NUMBER:\n  return in.nextDouble();\n</code></pre>\n\n<p>Modified to</p>\n\n<pre><code>case NUMBER:\n  String number = in.nextString();\n  try {\n    return Long.valueOf(number);\n  } catch (NumberFormatException e) {\n    return Double.valueOf(number);\n  }\n</code></pre>\n\n<p>OK.\n<strong>Gson will prioritizes the ObjectTypeAdapter in the project.</strong></p>\n"},{"tags":[],"owner":{"account_id":290585,"reputation":6089,"user_id":592217,"display_name":"k4dima"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594393626,"creation_date":1594393626,"answer_id":62837145,"question_id":15507997,"body_markdown":"        fun jsonToMap(json: JSONObject): Map&lt;String, Any&gt; {\r\n            val doubles = Gson().fromJson&lt;Map&lt;String, Any&gt;&gt;(json.toString(), Map::class.java)\r\n            fun doublesToLong(doubles: Map&lt;String, Any&gt;): Map&lt;String, Any&gt; = doubles\r\n                    .map { entry -&gt;\r\n                        Pair(entry.key, entry.value.let {\r\n                            when (it) {\r\n                                is Map&lt;*, *&gt; -&gt; doublesToLong(it as Map&lt;String, Any&gt;)\r\n                                is Double -&gt; it.toLong()\r\n                                else -&gt; it\r\n                            }\r\n                        })\r\n                    }\r\n                    .toMap()\r\n            return doublesToLong(doubles)\r\n        }","title":"How to prevent Gson from expressing integers as floats","body":"<pre><code>    fun jsonToMap(json: JSONObject): Map&lt;String, Any&gt; {\n        val doubles = Gson().fromJson&lt;Map&lt;String, Any&gt;&gt;(json.toString(), Map::class.java)\n        fun doublesToLong(doubles: Map&lt;String, Any&gt;): Map&lt;String, Any&gt; = doubles\n                .map { entry -&gt;\n                    Pair(entry.key, entry.value.let {\n                        when (it) {\n                            is Map&lt;*, *&gt; -&gt; doublesToLong(it as Map&lt;String, Any&gt;)\n                            is Double -&gt; it.toLong()\n                            else -&gt; it\n                        }\n                    })\n                }\n                .toMap()\n        return doublesToLong(doubles)\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5306534,"reputation":1353,"user_id":5076051,"display_name":"Trevor"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1638407113,"creation_date":1638407113,"answer_id":70193088,"question_id":15507997,"body_markdown":"Custom serializer solution in Kotlin, it&#39;s a bit tricky because you have to distinguish between java.lang.Double and Double (kotlin.Double).\r\n\r\n```\r\nprivate val Gson: Gson = GsonBuilder().registerTypeAdapter(java.lang.Double::class.java, object : JsonSerializer&lt;Double&gt; {\r\n    override fun serialize(src: Double, typeOfSrc: Type, context: JsonSerializationContext): JsonElement {\r\n        return if (src == src.toLong().toDouble()) JsonPrimitive(src.toLong()) else JsonPrimitive(src)\r\n    }\r\n}).create()\r\n```","title":"How to prevent Gson from expressing integers as floats","body":"<p>Custom serializer solution in Kotlin, it's a bit tricky because you have to distinguish between java.lang.Double and Double (kotlin.Double).</p>\n<pre><code>private val Gson: Gson = GsonBuilder().registerTypeAdapter(java.lang.Double::class.java, object : JsonSerializer&lt;Double&gt; {\n    override fun serialize(src: Double, typeOfSrc: Type, context: JsonSerializationContext): JsonElement {\n        return if (src == src.toLong().toDouble()) JsonPrimitive(src.toLong()) else JsonPrimitive(src)\n    }\n}).create()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7553425,"reputation":1164,"user_id":5734049,"display_name":"adrianvintu"},"score":2,"creation_date":1640695736,"post_id":70229243,"comment_id":124635103,"body_markdown":"this should be the accepted solution. thank you.","body":"this should be the accepted solution. thank you."},{"owner":{"account_id":1054762,"reputation":1539,"user_id":1057740,"accept_rate":100,"display_name":"A.Alqadomi"},"score":0,"creation_date":1642953152,"post_id":70229243,"comment_id":125205331,"body_markdown":"Yes . I confirm that it is working  . I am really lucky that I encountered this few months after they shipped the fix . Thanks for sharing this answer .","body":"Yes . I confirm that it is working  . I am really lucky that I encountered this few months after they shipped the fix . Thanks for sharing this answer ."},{"owner":{"account_id":2883613,"reputation":143,"user_id":2473948,"accept_rate":100,"display_name":"stranger"},"score":0,"creation_date":1660205142,"post_id":70229243,"comment_id":129479164,"body_markdown":"This should definitely be the accepted answer. Thanks.","body":"This should definitely be the accepted answer. Thanks."},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1677151053,"post_id":70229243,"comment_id":133282869,"body_markdown":"this is the best solution for not needing to create a class for Unit test","body":"this is the best solution for not needing to create a class for Unit test"},{"owner":{"account_id":6878158,"reputation":1996,"user_id":5285894,"accept_rate":62,"display_name":"Arar"},"score":0,"creation_date":1686245123,"post_id":70229243,"comment_id":134776079,"body_markdown":"This method is no longer available","body":"This method is no longer available"},{"owner":{"account_id":1446452,"reputation":4027,"user_id":1364747,"accept_rate":69,"display_name":"Teddy"},"score":0,"creation_date":1692683836,"post_id":70229243,"comment_id":135653478,"body_markdown":"@Arar You mean, this flag is no longer supported? :-O","body":"@Arar You mean, this flag is no longer supported? :-O"},{"owner":{"account_id":1446452,"reputation":4027,"user_id":1364747,"accept_rate":69,"display_name":"Teddy"},"score":0,"creation_date":1692684033,"post_id":70229243,"comment_id":135653505,"body_markdown":"I can see this option is available in GSON latest: https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/ToNumberPolicy.html","body":"I can see this option is available in GSON latest: <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/ToNumberPolicy.html\" rel=\"nofollow noreferrer\">javadoc.io/doc/com.google.code.gson/gson/latest/com.google.g&zwnj;&#8203;son/&hellip;</a>"}],"tags":[],"owner":{"account_id":3563471,"reputation":1070,"user_id":2975701,"display_name":"Seeker"},"comment_count":7,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1682854482,"creation_date":1638649775,"answer_id":70229243,"question_id":15507997,"body_markdown":"There is a solution provided by the library from 2.8.9 version. \r\n\r\nWe can set how Object is converted to a number by using the `GsonBuilder.setObjectToNumberStrategy()` method.\r\n\r\nImplementation of `LONG_OR_DOUBLE` will work in this case. Can be used as\r\n\r\n    Gson gson = new GsonBuilder()\r\n        .setObjectToNumberStrategy(ToNumberPolicy.LONG_OR_DOUBLE)\r\n        .create();\r\n    responses = gson.fromJson(draft, ResponseList);\r\n\r\nRefer to the GitHub pull request for details: [Support arbitrary Number implementation for Object and Number deserialization by lyubomyr-shaydariv &#183; Pull Request #1290 &#183; google/gson &#183; GitHub](https://github.com/google/gson/pull/1290).","title":"How to prevent Gson from expressing integers as floats","body":"<p>There is a solution provided by the library from 2.8.9 version.</p>\n<p>We can set how Object is converted to a number by using the <code>GsonBuilder.setObjectToNumberStrategy()</code> method.</p>\n<p>Implementation of <code>LONG_OR_DOUBLE</code> will work in this case. Can be used as</p>\n<pre><code>Gson gson = new GsonBuilder()\n    .setObjectToNumberStrategy(ToNumberPolicy.LONG_OR_DOUBLE)\n    .create();\nresponses = gson.fromJson(draft, ResponseList);\n</code></pre>\n<p>Refer to the GitHub pull request for details: <a href=\"https://github.com/google/gson/pull/1290\" rel=\"noreferrer\">Support arbitrary Number implementation for Object and Number deserialization by lyubomyr-shaydariv · Pull Request #1290 · google/gson · GitHub</a>.</p>\n"},{"tags":[],"owner":{"account_id":16645078,"reputation":221,"user_id":12029555,"display_name":"swarnim gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639650234,"creation_date":1639650234,"answer_id":70377352,"question_id":15507997,"body_markdown":"Use Jackson\r\n\r\n\r\n        public static Map&lt;String, Object&gt; jsonToMap(final String jsonString) {\r\n        try {\r\n            final ObjectMapper objectMapper = new ObjectMapper();\r\n            return objectMapper.convertValue(objectMapper.readTree(jsonString), new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\r\n            });\r\n        } catch (final Exception e) {\r\n            throw new InternalServiceException(&quot;lol&quot;);\r\n        }\r\n    }","title":"How to prevent Gson from expressing integers as floats","body":"<p>Use Jackson</p>\n<pre><code>    public static Map&lt;String, Object&gt; jsonToMap(final String jsonString) {\n    try {\n        final ObjectMapper objectMapper = new ObjectMapper();\n        return objectMapper.convertValue(objectMapper.readTree(jsonString), new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\n        });\n    } catch (final Exception e) {\n        throw new InternalServiceException(&quot;lol&quot;);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1641462066,"post_id":70603622,"comment_id":124812000,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/70603622/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":192352,"reputation":6757,"user_id":433432,"accept_rate":47,"display_name":"crowmagnumb"},"score":0,"creation_date":1656361399,"post_id":70603622,"comment_id":128548940,"body_markdown":"Also it is not sufficient to just update the version you also have to specify a strategy as @seeker correctly points out below.","body":"Also it is not sufficient to just update the version you also have to specify a strategy as @seeker correctly points out below."},{"owner":{"account_id":346833,"reputation":6288,"user_id":680583,"accept_rate":50,"display_name":"rmirabelle"},"score":0,"creation_date":1663092546,"post_id":70603622,"comment_id":130156842,"body_markdown":"2.8.9 exhibits the same behavior","body":"2.8.9 exhibits the same behavior"}],"tags":[],"owner":{"account_id":14853690,"reputation":1,"user_id":10726830,"display_name":"Zarif Ergashev"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641452993,"creation_date":1641452993,"answer_id":70603622,"question_id":15507997,"body_markdown":"google fixed issue https://github.com/google/gson/commit/fe30b85224316cabf19f5dd3223843437c297802#diff-9bf510cca1fa5b32b008e7daa417abf15602571dbc87f5436d9f3558ded492a5 \r\nplease update gson version to `2.8.9`","title":"How to prevent Gson from expressing integers as floats","body":"<p>google fixed issue <a href=\"https://github.com/google/gson/commit/fe30b85224316cabf19f5dd3223843437c297802#diff-9bf510cca1fa5b32b008e7daa417abf15602571dbc87f5436d9f3558ded492a5\" rel=\"nofollow noreferrer\">https://github.com/google/gson/commit/fe30b85224316cabf19f5dd3223843437c297802#diff-9bf510cca1fa5b32b008e7daa417abf15602571dbc87f5436d9f3558ded492a5</a>\nplease update gson version to <code>2.8.9</code></p>\n"}],"owner":{"account_id":221550,"reputation":1590,"user_id":479608,"accept_rate":71,"display_name":"Mark Murphy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72668,"favorite_count":0,"down_vote_count":0,"up_vote_count":97,"accepted_answer_id":15508288,"answer_count":10,"score":97,"last_activity_date":1682854482,"creation_date":1363718869,"question_id":15507997,"body_markdown":"Gson has some odd behavior when I try to convert a string to json. The code below transforms string draft into json responses. Is there a way to prevent gson from adding the &#39;.0 to all integer values?\r\n    \r\n    ArrayList&lt;Hashtable&lt;String, Object&gt;&gt; responses;\r\n    Type ResponseList = new TypeToken&lt;ArrayList&lt;Hashtable&lt;String, Object&gt;&gt;&gt;() {}.getType();\r\n    responses = new Gson().fromJson(draft, ResponseList);\r\n\r\n    draft:\r\n    [ {&quot;id&quot;:4077395,&quot;field_id&quot;:242566,&quot;body&quot;:&quot;&quot;},\r\n      {&quot;id&quot;:4077398,&quot;field_id&quot;:242569,&quot;body&quot;:[[273019,0],[273020,1],[273021,0]]},\r\n      {&quot;id&quot;:4077399,&quot;field_id&quot;:242570,&quot;body&quot;:[[273022,0],[273023,1],[273024,0]]}\r\n    ]\r\n    \r\n    responses:\r\n    [ {id=4077395.0, body=, field_id=242566.0},\r\n      {id=4077398.0, body=[[273019.0, 0.0], [273020.0, 1.0], [273021.0, 0.0]], field_id=242569.0},\r\n      {id=4077399.0, body=[[273022.0, 0.0], [273023.0, 1.0], [273024.0, 0.0]], field_id=242570.0}\r\n    ]","title":"How to prevent Gson from expressing integers as floats","body":"<p>Gson has some odd behavior when I try to convert a string to json. The code below transforms string draft into json responses. Is there a way to prevent gson from adding the '.0 to all integer values?</p>\n\n<pre><code>ArrayList&lt;Hashtable&lt;String, Object&gt;&gt; responses;\nType ResponseList = new TypeToken&lt;ArrayList&lt;Hashtable&lt;String, Object&gt;&gt;&gt;() {}.getType();\nresponses = new Gson().fromJson(draft, ResponseList);\n\ndraft:\n[ {\"id\":4077395,\"field_id\":242566,\"body\":\"\"},\n  {\"id\":4077398,\"field_id\":242569,\"body\":[[273019,0],[273020,1],[273021,0]]},\n  {\"id\":4077399,\"field_id\":242570,\"body\":[[273022,0],[273023,1],[273024,0]]}\n]\n\nresponses:\n[ {id=4077395.0, body=, field_id=242566.0},\n  {id=4077398.0, body=[[273019.0, 0.0], [273020.0, 1.0], [273021.0, 0.0]], field_id=242569.0},\n  {id=4077399.0, body=[[273022.0, 0.0], [273023.0, 1.0], [273024.0, 0.0]], field_id=242570.0}\n]\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"owner":{"account_id":887607,"reputation":1395,"user_id":926665,"accept_rate":76,"display_name":"Mekswoll"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682854210,"creation_date":1682851921,"question_id":76140857,"body_markdown":"## Strange behaviour in data binding in Spring MVC\r\n\r\nAll code for this example is located here: [https://github.com/maxwellt/binding-failure][1].\r\n\r\nI have setup this project to highlight the differences in how data binding works between different types of backing objects.\r\n\r\nIn `index.html` there are three links:\r\n\r\n* Submit the form that is backed by a Java class and is JavaBean compliant (i.e. getters and setters)\r\n* Submit the form that is backed by a Java class that is not JavaBean compliant (setters have been omitted)\r\n* Submit the form that is backed by a Java record (which is never JavaBean compliant as is it immutable)\r\n\r\n`form.html` is re-used for each of the different form backing objects.\r\n\r\nIn the form the first line will print out the `firstName` value (empty on form load of course).\r\n\r\nYou will see that the form has three fields, `firstName`, `lastName` and `type`. The last field is bound to the enum `Type` and has only two possible correct values, `ACTIVE` and `INACTIVE`. You will see that there is a third item in the dropdownlist, which is invalid (more on that later).\r\n\r\nTo run the project simply `./mvnw spring-boot:run`.\r\n\r\nThe flow I want to run you though is as follows:\r\n\r\n1. Open each of the forms\r\n2. Submit as is\r\n\r\nYou will see that in all three cases the `firstName` and `lastName` field&#39;s background color changed to red, to indicate that the values were invalid. This is because those two fields are annotated with `@NotBlank`.\r\n\r\nIf all has gone well, in each of the three cases those two fields should have been red. The Java class non-JavaBean compliant form will have shown `null` for &#39;Entered firstName&#39;, whereas the Record form will have shown nothing (just like the JavaBean form)\r\n\r\nNow go through the following flow for each of the forms:\r\n\r\n1. Enter a value in the `firstName` field\r\n2. Select the `INVALID_VALUE` in the dropdownlist\r\n3. Submit\r\n\r\nYou should see the following results:\r\n\r\n* JavaBean form does as you would expect: `firstName` and `type` are marked red as they are invalid and you see the entered `firstName`\r\n* Class without setters will mark `firstName` and `lastName` red **and** the value for `type` is reset to `ACTIVE` and you will see `null` for &#39;Entered first name:&#39;\r\n* Record form will have thrown an HTTP 500.\r\n\r\nThe fact that the JavaBean form does exactly what we expect is not wholly unsurprising. In the Spring MVC documentation they explicitly state:\r\n\r\n&gt; Only public properties following the JavaBeans naming conventions are exposed for data binding — for example, public String getFirstName() and public void setFirstName(String) methods for a firstName property.\r\n\r\nFor the non-JavaBean compliant form it seems like it is simply reset to an empty form, which is why the `firstName` property is not retained and shown on the page and why the `INVALID_VALUE` is no longer selected.\r\n\r\nIn the case of the Record form, the backing object itself seems to be set to NULL, which is why we see the HTTP 500, the logs print the following stacktrace:\r\n\r\n&gt; org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field &#39;firstName&#39; cannot be found on null\r\n\r\nIf you were to re-add the `form` to the `model` manually, everything would work fine, so change the `processRecordForm` from this:\r\n\r\n    @PostMapping(&quot;/formRecord&quot;)\r\n    public String processFormRecord(@Valid @ModelAttribute(&quot;form&quot;) FormRecord form, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {\r\n        if (bindingResult.hasErrors()) {\r\n            model.addAttribute(&quot;types&quot;, Type.values());\r\n            model.addAttribute(&quot;action&quot;, &quot;/formRecord&quot;);\r\n            return &quot;form&quot;;\r\n        }\r\n\r\n        redirectAttributes.addFlashAttribute(&quot;formSubmitted&quot;, &quot;success&quot;);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\nTo this:\r\n\r\n    @PostMapping(&quot;/formRecord&quot;)\r\n    public String processFormRecord(@Valid @ModelAttribute(&quot;form&quot;) FormRecord form, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {\r\n        if (bindingResult.hasErrors()) {\r\n            model.addAttribute(&quot;types&quot;, Type.values());\r\n            model.addAttribute(&quot;action&quot;, &quot;/formRecord&quot;);\r\n            model.addAttribute(&quot;form&quot;, form);\r\n            return &quot;form&quot;;\r\n        }\r\n\r\n        redirectAttributes.addFlashAttribute(&quot;formSubmitted&quot;, &quot;success&quot;);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\nAnd it works as you would expect...\r\n\r\nFurthermore, if you were to remove the printing of the `firstName` value, i.e. the following line:\r\n\r\n`&lt;p th:text=&quot;|Entered first name: ${form.firstName}|&quot;&gt;&lt;/p&gt;` in `form.html` and then run through the second scenario again, you&#39;ll get another (unexpected outcome). Namely, there is no longer an HTTP 500, but after the `typeMismatch` due to using an invalid enum value for `type`, the binding seems to have stopped completely, because the `lastName` field will **not** be marked as invalid...\r\n\r\nTo summarize into questions I&#39;m left with: \r\n\r\n1. What&#39;s the difference in data binding between a non-JavaBean compliant Java class and a Java record? There clearly is a difference as I&#39;m getting different behavior.\r\n2. Why is the form not automatically being added again to the `model`, it&#39;s clearly marked as `@ModelAttribute`.\r\n\r\n\r\n  [1]: https://github.com/maxwellt/binding-failure","title":"Spring MVC data binding inconsistencies","body":"<h2>Strange behaviour in data binding in Spring MVC</h2>\n<p>All code for this example is located here: <a href=\"https://github.com/maxwellt/binding-failure\" rel=\"nofollow noreferrer\">https://github.com/maxwellt/binding-failure</a>.</p>\n<p>I have setup this project to highlight the differences in how data binding works between different types of backing objects.</p>\n<p>In <code>index.html</code> there are three links:</p>\n<ul>\n<li>Submit the form that is backed by a Java class and is JavaBean compliant (i.e. getters and setters)</li>\n<li>Submit the form that is backed by a Java class that is not JavaBean compliant (setters have been omitted)</li>\n<li>Submit the form that is backed by a Java record (which is never JavaBean compliant as is it immutable)</li>\n</ul>\n<p><code>form.html</code> is re-used for each of the different form backing objects.</p>\n<p>In the form the first line will print out the <code>firstName</code> value (empty on form load of course).</p>\n<p>You will see that the form has three fields, <code>firstName</code>, <code>lastName</code> and <code>type</code>. The last field is bound to the enum <code>Type</code> and has only two possible correct values, <code>ACTIVE</code> and <code>INACTIVE</code>. You will see that there is a third item in the dropdownlist, which is invalid (more on that later).</p>\n<p>To run the project simply <code>./mvnw spring-boot:run</code>.</p>\n<p>The flow I want to run you though is as follows:</p>\n<ol>\n<li>Open each of the forms</li>\n<li>Submit as is</li>\n</ol>\n<p>You will see that in all three cases the <code>firstName</code> and <code>lastName</code> field's background color changed to red, to indicate that the values were invalid. This is because those two fields are annotated with <code>@NotBlank</code>.</p>\n<p>If all has gone well, in each of the three cases those two fields should have been red. The Java class non-JavaBean compliant form will have shown <code>null</code> for 'Entered firstName', whereas the Record form will have shown nothing (just like the JavaBean form)</p>\n<p>Now go through the following flow for each of the forms:</p>\n<ol>\n<li>Enter a value in the <code>firstName</code> field</li>\n<li>Select the <code>INVALID_VALUE</code> in the dropdownlist</li>\n<li>Submit</li>\n</ol>\n<p>You should see the following results:</p>\n<ul>\n<li>JavaBean form does as you would expect: <code>firstName</code> and <code>type</code> are marked red as they are invalid and you see the entered <code>firstName</code></li>\n<li>Class without setters will mark <code>firstName</code> and <code>lastName</code> red <strong>and</strong> the value for <code>type</code> is reset to <code>ACTIVE</code> and you will see <code>null</code> for 'Entered first name:'</li>\n<li>Record form will have thrown an HTTP 500.</li>\n</ul>\n<p>The fact that the JavaBean form does exactly what we expect is not wholly unsurprising. In the Spring MVC documentation they explicitly state:</p>\n<blockquote>\n<p>Only public properties following the JavaBeans naming conventions are exposed for data binding — for example, public String getFirstName() and public void setFirstName(String) methods for a firstName property.</p>\n</blockquote>\n<p>For the non-JavaBean compliant form it seems like it is simply reset to an empty form, which is why the <code>firstName</code> property is not retained and shown on the page and why the <code>INVALID_VALUE</code> is no longer selected.</p>\n<p>In the case of the Record form, the backing object itself seems to be set to NULL, which is why we see the HTTP 500, the logs print the following stacktrace:</p>\n<blockquote>\n<p>org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'firstName' cannot be found on null</p>\n</blockquote>\n<p>If you were to re-add the <code>form</code> to the <code>model</code> manually, everything would work fine, so change the <code>processRecordForm</code> from this:</p>\n<pre><code>@PostMapping(&quot;/formRecord&quot;)\npublic String processFormRecord(@Valid @ModelAttribute(&quot;form&quot;) FormRecord form, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {\n    if (bindingResult.hasErrors()) {\n        model.addAttribute(&quot;types&quot;, Type.values());\n        model.addAttribute(&quot;action&quot;, &quot;/formRecord&quot;);\n        return &quot;form&quot;;\n    }\n\n    redirectAttributes.addFlashAttribute(&quot;formSubmitted&quot;, &quot;success&quot;);\n    return &quot;redirect:/&quot;;\n}\n</code></pre>\n<p>To this:</p>\n<pre><code>@PostMapping(&quot;/formRecord&quot;)\npublic String processFormRecord(@Valid @ModelAttribute(&quot;form&quot;) FormRecord form, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {\n    if (bindingResult.hasErrors()) {\n        model.addAttribute(&quot;types&quot;, Type.values());\n        model.addAttribute(&quot;action&quot;, &quot;/formRecord&quot;);\n        model.addAttribute(&quot;form&quot;, form);\n        return &quot;form&quot;;\n    }\n\n    redirectAttributes.addFlashAttribute(&quot;formSubmitted&quot;, &quot;success&quot;);\n    return &quot;redirect:/&quot;;\n}\n</code></pre>\n<p>And it works as you would expect...</p>\n<p>Furthermore, if you were to remove the printing of the <code>firstName</code> value, i.e. the following line:</p>\n<p><code>&lt;p th:text=&quot;|Entered first name: ${form.firstName}|&quot;&gt;&lt;/p&gt;</code> in <code>form.html</code> and then run through the second scenario again, you'll get another (unexpected outcome). Namely, there is no longer an HTTP 500, but after the <code>typeMismatch</code> due to using an invalid enum value for <code>type</code>, the binding seems to have stopped completely, because the <code>lastName</code> field will <strong>not</strong> be marked as invalid...</p>\n<p>To summarize into questions I'm left with:</p>\n<ol>\n<li>What's the difference in data binding between a non-JavaBean compliant Java class and a Java record? There clearly is a difference as I'm getting different behavior.</li>\n<li>Why is the form not automatically being added again to the <code>model</code>, it's clearly marked as <code>@ModelAttribute</code>.</li>\n</ol>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1682854510,"post_id":76140991,"comment_id":134277622,"body_markdown":"Putting things in `lib/ext` was (almost) always the wrong solution. In recent Java versions, it isn&#39;t even possible anymore. So, remove the lib from `lib/ext`, and fix the problem with the applications that do need it, or define the dependency to your Spring Boot app as a &quot;provided&quot; dependency, so it isn&#39;t included in the WAR. Both Maven and Gradle provide options for this.","body":"Putting things in <code>lib&#47;ext</code> was (almost) always the wrong solution. In recent Java versions, it isn&#39;t even possible anymore. So, remove the lib from <code>lib&#47;ext</code>, and fix the problem with the applications that do need it, or define the dependency to your Spring Boot app as a &quot;provided&quot; dependency, so it isn&#39;t included in the WAR. Both Maven and Gradle provide options for this."},{"owner":{"account_id":9824751,"reputation":145,"user_id":7278126,"accept_rate":100,"display_name":"AHM200"},"score":0,"creation_date":1682855793,"post_id":76140991,"comment_id":134277780,"body_markdown":"Unfortunately I cannot remove it from ext as I need it for older services, and the version for the lib is older than the one I am using in the new service so, this won&#39;t be working for me","body":"Unfortunately I cannot remove it from ext as I need it for older services, and the version for the lib is older than the one I am using in the new service so, this won&#39;t be working for me"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1682855957,"post_id":76140991,"comment_id":134277808,"body_markdown":"Then you need to use a separate JRE installations to run the older and the newer applications.","body":"Then you need to use a separate JRE installations to run the older and the newer applications."}],"owner":{"account_id":9824751,"reputation":145,"user_id":7278126,"accept_rate":100,"display_name":"AHM200"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1682853889,"creation_date":1682853889,"question_id":76140991,"body_markdown":"I am having an issue with deploying spring boot war due to jar duplicate.\r\nThe root issue is that I had to add a jar manually to java ext folder because I need it in other solutions.\r\nAnd now this jar is also existing in the war I am deploying so is there any way to exclude this jar from being loaded from jre and instead be loaded from my dependencies only ? ","title":"Exclude jar from java jre","body":"<p>I am having an issue with deploying spring boot war due to jar duplicate.\nThe root issue is that I had to add a jar manually to java ext folder because I need it in other solutions.\nAnd now this jar is also existing in the war I am deploying so is there any way to exclude this jar from being loaded from jre and instead be loaded from my dependencies only ?</p>\n"},{"tags":["java","android","android-livedata"],"answers":[{"comments":[{"owner":{"account_id":15560654,"reputation":463,"user_id":11225863,"display_name":"Scripta14"},"score":0,"creation_date":1682925727,"post_id":76140915,"comment_id":134284976,"body_markdown":"when I called tEvent the second time there is the old data. How can I reset data?","body":"when I called tEvent the second time there is the old data. How can I reset data?"}],"tags":[],"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682852907,"creation_date":1682852907,"answer_id":76140915,"question_id":76140644,"body_markdown":"Seems like you haven&#39;t provided the full code, so I&#39;ll try to help you using the snippets you provided.\r\n\r\nThis error happens, because `returnCode` which you get in this line `ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();` is `null`. It means that `returnCodeEvent.getContentIfNotHandled()` returns `null`.\r\n\r\nTherefore, judging by the code of your `Event` class, its `getContentIfNotHandled()` returns value only once. \r\n\r\nSo all above information leads us to the conclusion that some observer gets value from your Event before it comes to the observer from your `Activity`.\r\n\r\nFrom the snippets you provided I see only one thing that can lead your program to this error. It is your class `EventObserver`:\r\n\r\n    public class EventObserver&lt;T&gt; implements Observer&lt;Event&lt;T&gt;&gt; {\r\n        private OnEventChanged onEventChanged;\r\n\r\n        public EventObserver(OnEventChanged onEventChanged) {\r\n            this.onEventChanged = onEventChanged;\r\n        }\r\n\r\n        @Override\r\n        public void onChanged(@Nullable Event&lt;T&gt; tEvent) {\r\n            if (tEvent != null &amp;&amp; tEvent.getContentIfNotHandled() != null &amp;&amp; onEventChanged != null) // Here you call tEvent.getContentIfNotHandled() event FIRST TIME, so the value is picked\r\n            \r\n    onEventChanged.onUnhandledContent(tEvent.getContentIfNotHandled()); // It&#39;s the SECOND TIME when you called tEvent.getContentIfNotHandled(), so it will be null.\r\n\r\n        }\r\n\r\n        interface OnEventChanged&lt;T&gt; {\r\n            void onUnhandledContent(T data);\r\n        }\r\n    }\r\n\r\n**In `onChanged()` method you&#39;re calling `Event.getContentIfNotHandled()` twice, so probably this is the problem part of your code.** I&#39;m almost sure that by fixing this you will fix your problem, so you can debug this place carefully and fix this error.","title":"Event wrapper Android - How to clear the first observer?","body":"<p>Seems like you haven't provided the full code, so I'll try to help you using the snippets you provided.</p>\n<p>This error happens, because <code>returnCode</code> which you get in this line <code>ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();</code> is <code>null</code>. It means that <code>returnCodeEvent.getContentIfNotHandled()</code> returns <code>null</code>.</p>\n<p>Therefore, judging by the code of your <code>Event</code> class, its <code>getContentIfNotHandled()</code> returns value only once.</p>\n<p>So all above information leads us to the conclusion that some observer gets value from your Event before it comes to the observer from your <code>Activity</code>.</p>\n<p>From the snippets you provided I see only one thing that can lead your program to this error. It is your class <code>EventObserver</code>:</p>\n<pre><code>public class EventObserver&lt;T&gt; implements Observer&lt;Event&lt;T&gt;&gt; {\n    private OnEventChanged onEventChanged;\n\n    public EventObserver(OnEventChanged onEventChanged) {\n        this.onEventChanged = onEventChanged;\n    }\n\n    @Override\n    public void onChanged(@Nullable Event&lt;T&gt; tEvent) {\n        if (tEvent != null &amp;&amp; tEvent.getContentIfNotHandled() != null &amp;&amp; onEventChanged != null) // Here you call tEvent.getContentIfNotHandled() event FIRST TIME, so the value is picked\n        \nonEventChanged.onUnhandledContent(tEvent.getContentIfNotHandled()); // It's the SECOND TIME when you called tEvent.getContentIfNotHandled(), so it will be null.\n\n    }\n\n    interface OnEventChanged&lt;T&gt; {\n        void onUnhandledContent(T data);\n    }\n}\n</code></pre>\n<p><strong>In <code>onChanged()</code> method you're calling <code>Event.getContentIfNotHandled()</code> twice, so probably this is the problem part of your code.</strong> I'm almost sure that by fixing this you will fix your problem, so you can debug this place carefully and fix this error.</p>\n"}],"owner":{"account_id":15560654,"reputation":463,"user_id":11225863,"display_name":"Scripta14"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682852907,"creation_date":1682849070,"question_id":76140644,"body_markdown":"I&#39;m reading a lot about that, but I can&#39;t find a solution. I&#39;ve never used before MutableLiveDate and I found out the event wrapper approch, but I&#39;m finding some problem to use it.\r\nThe code below works fine when I click button only one time, but for some reason I have to press button twice I recieve a NullPointerException. \r\nCreating two separate observers works. But on the same, repeated several times it passes me a null value in the getContentIfNotHandled()\r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;int com.example.montaggioapp.montaggio.model.ReturnCode.getReturnCode()&#39; on a null object reference\r\n            at com.example.montaggioapp.montaggio.InCorsoActivity$2.onChanged(InCorsoActivity.java:147)\r\n            at com.example.montaggioapp.montaggio.InCorsoActivity$2.onChanged(InCorsoActivity.java:143)\r\n            at androidx.lifecycle.LiveData.considerNotify(LiveData.java:133)\r\n            at androidx.lifecycle.LiveData.dispatchingValue(LiveData.java:146)\r\n            at androidx.lifecycle.LiveData$ObserverWrapper.activeStateChanged(LiveData.java:468)\r\n            at androidx.lifecycle.LiveData$LifecycleBoundObserver.onStateChanged(LiveData.java:425)\r\n            at androidx.lifecycle.LifecycleRegistry$ObserverWithState.dispatchEvent(LifecycleRegistry.java:360)\r\n            at androidx.lifecycle.LifecycleRegistry.addObserver(LifecycleRegistry.java:202)\r\n            at androidx.lifecycle.LiveData.observe(LiveData.java:205)\r\n            at com.example.montaggioapp.montaggio.InCorsoActivity.lambda$onCreate$0$com-example-montaggioapp-montaggio-InCorsoActivity(InCorsoActivity.java:164)\r\n            at com.example.montaggioapp.montaggio.InCorsoActivity$$ExternalSyntheticLambda1.onChanged(Unknown Source:6)\r\n            at androidx.lifecycle.LiveData.considerNotify(LiveData.java:133)\r\n            at androidx.lifecycle.LiveData.dispatchingValue(LiveData.java:151)\r\n            at androidx.lifecycle.LiveData.setValue(LiveData.java:309)\r\n            at androidx.lifecycle.MutableLiveData.setValue(MutableLiveData.java:50)\r\n            at androidx.lifecycle.LiveData$1.run(LiveData.java:93)\r\n            at android.os.Handler.handleCallback(Handler.java:883)\r\n            at android.os.Handler.dispatchMessage(Handler.java:100)\r\n            at android.os.Looper.loop(Looper.java:214)\r\n            at android.app.ActivityThread.main(ActivityThread.java:7356)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\r\n\r\nActivity:\r\n\r\n    @AndroidEntryPoint\r\n    public class InCorsoActivity extends AppCompatActivity implements OnClickListener&lt;Causale&gt;{\r\n    \r\n        private static final String MY_PREFS = &quot;SAVE_VALUE&quot;;\r\n        private static final String MY_CONFIG = &quot;VALUE_CONFIG&quot;;\r\n        private SharedPreferences prefs,config;\r\n        private SharedPreferences.Editor editor;\r\n        private AlertDialog.Builder builder;\r\n        private InCorsoViewModel inCorsoViewModel;\r\n        ActivityInCorsoBinding binding;\r\n        Observer&lt;Event&lt;ReturnCode&gt;&gt; eventRC_DatiLav, eventRC_Conferma;\r\n        private SpinnerAdapter adapter;\r\n        private String pin, ordPro;\r\n    \r\n        @RequiresApi(api = Build.VERSION_CODES.N)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            //setContentView(R.layout.activity_in_corso);\r\n    \r\n            prefs = getSharedPreferences(MY_PREFS,MODE_PRIVATE);\r\n            config = getSharedPreferences(MY_CONFIG,MODE_PRIVATE);\r\n            editor = prefs.edit();\r\n            builder = new AlertDialog.Builder(this);\r\n    \r\n            inCorsoViewModel = new ViewModelProvider(this).get(InCorsoViewModel.class);\r\n            binding = DataBindingUtil.setContentView(this,R.layout.activity_in_corso);\r\n            binding.setLifecycleOwner(this);\r\n            binding.setInCorso(inCorsoViewModel);\r\n            binding.qtaProdotte.setShowSoftInputOnFocus(false);\r\n            binding.qtaProdotte.requestFocus();\r\n    \r\n            List&lt;SpinnerViewModel&gt; items = new ArrayList&lt;&gt;();\r\n            items.add(CausaleMapper.map(new Causale(&quot;SEL. CAUSALE&quot;), (OnClickListener&lt;Causale&gt;) this));\r\n            items.add(CausaleMapper.map(new Causale(&quot;FINE LAV&quot;), (OnClickListener&lt;Causale&gt;) this));\r\n            items.add(CausaleMapper.map(new Causale(&quot;PAUSA&quot;), (OnClickListener&lt;Causale&gt;) this));\r\n            items.add(CausaleMapper.map(new Causale(&quot;SOSPESO&quot;), (OnClickListener&lt;Causale&gt;) this));\r\n    \r\n            String serverName = config.getString(&quot;serverName&quot;,&quot;&quot;);\r\n            String port = config.getString(&quot;port&quot;,&quot;&quot;);\r\n            String schemaOrion = config.getString(&quot;schemaOrion&quot;,&quot;&quot;);\r\n            pin= prefs.getString(&quot;pin&quot;,&quot;0&quot;) ;\r\n            ordPro = prefs.getString(&quot;ordPro&quot;,&quot;0&quot;);\r\n            String baseurl = &quot;http://&quot;+serverName+&quot;:&quot;+port+&quot;/ords/&quot;+schemaOrion;\r\n    \r\n            eventRC_DatiLav = new Observer&lt;Event&lt;ReturnCode&gt;&gt;() {\r\n                @Override\r\n                public void onChanged(Event&lt;ReturnCode&gt; returnCodeEvent) {\r\n                    ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();\r\n                    int rc = returnCode.getReturnCode();\r\n                    if (rc &lt; 0 ){\r\n                        String msg = returnCode.getReturnMessage();\r\n                        message(msg, new Cb() {\r\n                            @Override\r\n                            public void onOkCliked() {\r\n                                Intent intent = new Intent(getApplicationContext(), SelezionaAttActivity.class);\r\n                                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                                startActivity(intent);\r\n                            }\r\n                        });\r\n                    }else {\r\n                       String[] strDatiLav = returnCode.getReturnMessage().split(&quot;;&quot;);\r\n                       binding.OrdineInCorso.setText(strDatiLav[0]);\r\n                       binding.codParteInCorso.setText(strDatiLav[1]);\r\n                       binding.desParteInCorso.setText(strDatiLav[2]);\r\n                       binding.PezziOrdInCorso.setText(strDatiLav[3]);\r\n                       binding.PezziProdInCorso.setText(strDatiLav[4]);\r\n                       binding.StatoInCorso.setText(prefs.getString(&quot;stato&quot;,&quot; &quot;));\r\n                       binding.inDateInCorso.setText(getCurrentDate());\r\n                       adapter = new SpinnerAdapter(getApplicationContext(),R.layout.item_view, BR.viewModel,items);\r\n                       binding.spinner.setAdapter(adapter);\r\n    \r\n                    }\r\n                }\r\n            };\r\n            //inCorsoViewModel.makeApiDatiLavCall(ordPro);\r\n            inCorsoViewModel.makeApiDatiLavCall(ordPro,baseurl);\r\n            inCorsoViewModel.getLiveDataApiDatiLav().observe(this,eventRC_DatiLav);\r\n    \r\n    \r\n    \r\n    \r\n            inCorsoViewModel.getDataOra(binding).observe(this, inCorso -&gt; {\r\n                if (TextUtils.isEmpty(Objects.requireNonNull(inCorso).getStrDate())) {\r\n                    binding.inDateInCorso.setError(&quot;Data non selezionata&quot;);\r\n                    binding.inDateInCorso.requestFocus();\r\n                }\r\n                else if (TextUtils.isEmpty(Objects.requireNonNull(inCorso).getStrTime())) {\r\n                    binding.inTimeInCorso.setError(&quot;Orario non selezionato&quot;);\r\n                    binding.inTimeInCorso.requestFocus();\r\n                }\r\n    \r\n                else {\r\n    \r\n    \r\n                    eventRC_Conferma = new Observer&lt;Event&lt;ReturnCode&gt;&gt;() {\r\n                        @Override\r\n                        public void onChanged(Event&lt;ReturnCode&gt; returnCodeEvent) {\r\n                            ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();\r\n                            int rc = returnCode.getReturnCode();\r\n                            if (rc &lt; 0 ){\r\n                                String msg = returnCode.getReturnMessage();\r\n                                message(msg, () -&gt; {\r\n    \r\n                                });\r\n                            }else {\r\n                                String msg = returnCode.getReturnMessage();\r\n                                messageEseguito(msg, () -&gt; {\r\n                                    Intent intent = new Intent(getApplicationContext(),SelezionaAttActivity.class);\r\n                                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                                    startActivity(intent);\r\n                                });\r\n                            }\r\n                        }\r\n                    };\r\n                    inCorsoViewModel.makeApiCall(pin,ordPro,baseurl);\r\n                    inCorsoViewModel.getLiveData().observe(this,eventRC_Conferma);\r\n    \r\n    \r\n    \r\n                }\r\n            });\r\n    \r\n            binding.btnAnnulaInCorso.setOnClickListener(view -&gt; {\r\n    \r\n            });\r\n    \r\n        }\r\n\r\nViewModel class\r\n \r\n\r\n    private MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiCall;\r\n\r\n    @Inject\r\n    ApiInterface apiInterface;\r\n\r\n    @Inject\r\n    public InCorsoViewModel(){\r\n        this.liveDataApiCall = new MutableLiveData&lt;&gt;();\r\n        \r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    public MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; getLiveData() {\r\n        return liveDataApiCall;\r\n    }\r\n\r\n \r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.N)\r\n        @Override\r\n        public void makeApiCall(String pin, String ordPro,String baseurl) {\r\n            String tipoMov = prefs.getString(&quot;tipoMov&quot;,&quot;&quot;);\r\n            String idMac = &quot;&quot;;\r\n            String dataOra = date.getValue()+&quot; &quot;+time.getValue();\r\n            String quant = qta.getValue() != null  ? qta.getValue() : &quot;0&quot;;\r\n            String param = &quot;&quot;;\r\n    \r\n            AggOrdRepo aggOrdRepo = new AggOrdRepo(apiInterface);\r\n            aggOrdRepo.getAggiornaOrdine(baseurl,pin,ordPro,tipoMov,idMac,dataOra,quant,param,liveDataApiCall,toastMessageObserver);\r\n        }\r\n\r\nRepository class\r\n  \r\n\r\n     private Disposable disposable;\r\n        private ApiInterface apiInterface;\r\n        private MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiDatiLav;\r\n        private MutableLiveData&lt;String&gt; toastMessageObserver;\r\n    \r\n        public DatiLavRepo(ApiInterface apiInterface){\r\n            this.apiInterface = apiInterface;\r\n        }\r\n    \r\n        public void getDatiLav(String baseurl, String ordPro, MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiDatiLav, MutableLiveData&lt;String&gt; toastMessageObserver){\r\n            String HTTPS_PATH_GETORD = null;\r\n    \r\n            try {\r\n                HTTPS_PATH_GETORD = baseurl+&quot;/gm/montaggio?p_cmd=3&amp;p_p1=&quot;+ URLEncoder.encode(ordPro,&quot;UTF-8&quot;);\r\n            } catch (UnsupportedEncodingException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n    \r\n            this.liveDataApiDatiLav = liveDataApiDatiLav;\r\n            this.toastMessageObserver = toastMessageObserver;\r\n    \r\n    \r\n    \r\n            disposable = apiInterface.getDatiLavorazione(HTTPS_PATH_GETORD)\r\n                    .observeOn(AndroidSchedulers.mainThread())\r\n                    .subscribeOn(Schedulers.io())\r\n                    .subscribe(this::handlerResponse,this::handlerError);\r\n         \r\n        }\r\n    \r\n        private void handlerResponse(ReturnCode rc) {\r\n            liveDataApiDatiLav.postValue(new Event(rc));\r\n        }\r\n    \r\n        private void handlerError(Throwable t) {\r\n            toastMessageObserver.setValue(&quot;Something unexpected happened to our request: &quot;+t.getMessage());\r\n        }\r\n\r\n\r\n    public class EventObserver&lt;T&gt; implements Observer&lt;Event&lt;T&gt;&gt; {\r\n        private OnEventChanged onEventChanged;\r\n    \r\n        public EventObserver(OnEventChanged onEventChanged) {\r\n            this.onEventChanged = onEventChanged;\r\n        }\r\n    \r\n        @Override\r\n        public void onChanged(@Nullable Event&lt;T&gt; tEvent) {\r\n            if (tEvent != null &amp;&amp; tEvent.getContentIfNotHandled() != null &amp;&amp; onEventChanged != null)\r\n                onEventChanged.onUnhandledContent(tEvent.getContentIfNotHandled());\r\n    \r\n        }\r\n    \r\n        interface OnEventChanged&lt;T&gt; {\r\n            void onUnhandledContent(T data);\r\n        }\r\n    }\r\n\r\n    public class Event&lt;T&gt; {\r\n        private boolean hasBeenHandled = false;\r\n        private T content;\r\n    \r\n        public Event(T content) {\r\n            this.content = content;\r\n        }\r\n    \r\n        public T getContentIfNotHandled() {\r\n            if (hasBeenHandled) {\r\n                return null;\r\n            } else {\r\n                hasBeenHandled = true;\r\n                return content;\r\n            }\r\n        }\r\n    \r\n        public boolean isHandled() {\r\n            return hasBeenHandled;\r\n        }\r\n    \r\n    }\r\n\r\n\r\nIf anyone can help me understand how this works","title":"Event wrapper Android - How to clear the first observer?","body":"<p>I'm reading a lot about that, but I can't find a solution. I've never used before MutableLiveDate and I found out the event wrapper approch, but I'm finding some problem to use it.\nThe code below works fine when I click button only one time, but for some reason I have to press button twice I recieve a NullPointerException.\nCreating two separate observers works. But on the same, repeated several times it passes me a null value in the getContentIfNotHandled()</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'int com.example.montaggioapp.montaggio.model.ReturnCode.getReturnCode()' on a null object reference\n        at com.example.montaggioapp.montaggio.InCorsoActivity$2.onChanged(InCorsoActivity.java:147)\n        at com.example.montaggioapp.montaggio.InCorsoActivity$2.onChanged(InCorsoActivity.java:143)\n        at androidx.lifecycle.LiveData.considerNotify(LiveData.java:133)\n        at androidx.lifecycle.LiveData.dispatchingValue(LiveData.java:146)\n        at androidx.lifecycle.LiveData$ObserverWrapper.activeStateChanged(LiveData.java:468)\n        at androidx.lifecycle.LiveData$LifecycleBoundObserver.onStateChanged(LiveData.java:425)\n        at androidx.lifecycle.LifecycleRegistry$ObserverWithState.dispatchEvent(LifecycleRegistry.java:360)\n        at androidx.lifecycle.LifecycleRegistry.addObserver(LifecycleRegistry.java:202)\n        at androidx.lifecycle.LiveData.observe(LiveData.java:205)\n        at com.example.montaggioapp.montaggio.InCorsoActivity.lambda$onCreate$0$com-example-montaggioapp-montaggio-InCorsoActivity(InCorsoActivity.java:164)\n        at com.example.montaggioapp.montaggio.InCorsoActivity$$ExternalSyntheticLambda1.onChanged(Unknown Source:6)\n        at androidx.lifecycle.LiveData.considerNotify(LiveData.java:133)\n        at androidx.lifecycle.LiveData.dispatchingValue(LiveData.java:151)\n        at androidx.lifecycle.LiveData.setValue(LiveData.java:309)\n        at androidx.lifecycle.MutableLiveData.setValue(MutableLiveData.java:50)\n        at androidx.lifecycle.LiveData$1.run(LiveData.java:93)\n        at android.os.Handler.handleCallback(Handler.java:883)\n        at android.os.Handler.dispatchMessage(Handler.java:100)\n        at android.os.Looper.loop(Looper.java:214)\n        at android.app.ActivityThread.main(ActivityThread.java:7356)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\n</code></pre>\n<p>Activity:</p>\n<pre><code>@AndroidEntryPoint\npublic class InCorsoActivity extends AppCompatActivity implements OnClickListener&lt;Causale&gt;{\n\n    private static final String MY_PREFS = &quot;SAVE_VALUE&quot;;\n    private static final String MY_CONFIG = &quot;VALUE_CONFIG&quot;;\n    private SharedPreferences prefs,config;\n    private SharedPreferences.Editor editor;\n    private AlertDialog.Builder builder;\n    private InCorsoViewModel inCorsoViewModel;\n    ActivityInCorsoBinding binding;\n    Observer&lt;Event&lt;ReturnCode&gt;&gt; eventRC_DatiLav, eventRC_Conferma;\n    private SpinnerAdapter adapter;\n    private String pin, ordPro;\n\n    @RequiresApi(api = Build.VERSION_CODES.N)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        //setContentView(R.layout.activity_in_corso);\n\n        prefs = getSharedPreferences(MY_PREFS,MODE_PRIVATE);\n        config = getSharedPreferences(MY_CONFIG,MODE_PRIVATE);\n        editor = prefs.edit();\n        builder = new AlertDialog.Builder(this);\n\n        inCorsoViewModel = new ViewModelProvider(this).get(InCorsoViewModel.class);\n        binding = DataBindingUtil.setContentView(this,R.layout.activity_in_corso);\n        binding.setLifecycleOwner(this);\n        binding.setInCorso(inCorsoViewModel);\n        binding.qtaProdotte.setShowSoftInputOnFocus(false);\n        binding.qtaProdotte.requestFocus();\n\n        List&lt;SpinnerViewModel&gt; items = new ArrayList&lt;&gt;();\n        items.add(CausaleMapper.map(new Causale(&quot;SEL. CAUSALE&quot;), (OnClickListener&lt;Causale&gt;) this));\n        items.add(CausaleMapper.map(new Causale(&quot;FINE LAV&quot;), (OnClickListener&lt;Causale&gt;) this));\n        items.add(CausaleMapper.map(new Causale(&quot;PAUSA&quot;), (OnClickListener&lt;Causale&gt;) this));\n        items.add(CausaleMapper.map(new Causale(&quot;SOSPESO&quot;), (OnClickListener&lt;Causale&gt;) this));\n\n        String serverName = config.getString(&quot;serverName&quot;,&quot;&quot;);\n        String port = config.getString(&quot;port&quot;,&quot;&quot;);\n        String schemaOrion = config.getString(&quot;schemaOrion&quot;,&quot;&quot;);\n        pin= prefs.getString(&quot;pin&quot;,&quot;0&quot;) ;\n        ordPro = prefs.getString(&quot;ordPro&quot;,&quot;0&quot;);\n        String baseurl = &quot;http://&quot;+serverName+&quot;:&quot;+port+&quot;/ords/&quot;+schemaOrion;\n\n        eventRC_DatiLav = new Observer&lt;Event&lt;ReturnCode&gt;&gt;() {\n            @Override\n            public void onChanged(Event&lt;ReturnCode&gt; returnCodeEvent) {\n                ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();\n                int rc = returnCode.getReturnCode();\n                if (rc &lt; 0 ){\n                    String msg = returnCode.getReturnMessage();\n                    message(msg, new Cb() {\n                        @Override\n                        public void onOkCliked() {\n                            Intent intent = new Intent(getApplicationContext(), SelezionaAttActivity.class);\n                            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n                            startActivity(intent);\n                        }\n                    });\n                }else {\n                   String[] strDatiLav = returnCode.getReturnMessage().split(&quot;;&quot;);\n                   binding.OrdineInCorso.setText(strDatiLav[0]);\n                   binding.codParteInCorso.setText(strDatiLav[1]);\n                   binding.desParteInCorso.setText(strDatiLav[2]);\n                   binding.PezziOrdInCorso.setText(strDatiLav[3]);\n                   binding.PezziProdInCorso.setText(strDatiLav[4]);\n                   binding.StatoInCorso.setText(prefs.getString(&quot;stato&quot;,&quot; &quot;));\n                   binding.inDateInCorso.setText(getCurrentDate());\n                   adapter = new SpinnerAdapter(getApplicationContext(),R.layout.item_view, BR.viewModel,items);\n                   binding.spinner.setAdapter(adapter);\n\n                }\n            }\n        };\n        //inCorsoViewModel.makeApiDatiLavCall(ordPro);\n        inCorsoViewModel.makeApiDatiLavCall(ordPro,baseurl);\n        inCorsoViewModel.getLiveDataApiDatiLav().observe(this,eventRC_DatiLav);\n\n\n\n\n        inCorsoViewModel.getDataOra(binding).observe(this, inCorso -&gt; {\n            if (TextUtils.isEmpty(Objects.requireNonNull(inCorso).getStrDate())) {\n                binding.inDateInCorso.setError(&quot;Data non selezionata&quot;);\n                binding.inDateInCorso.requestFocus();\n            }\n            else if (TextUtils.isEmpty(Objects.requireNonNull(inCorso).getStrTime())) {\n                binding.inTimeInCorso.setError(&quot;Orario non selezionato&quot;);\n                binding.inTimeInCorso.requestFocus();\n            }\n\n            else {\n\n\n                eventRC_Conferma = new Observer&lt;Event&lt;ReturnCode&gt;&gt;() {\n                    @Override\n                    public void onChanged(Event&lt;ReturnCode&gt; returnCodeEvent) {\n                        ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();\n                        int rc = returnCode.getReturnCode();\n                        if (rc &lt; 0 ){\n                            String msg = returnCode.getReturnMessage();\n                            message(msg, () -&gt; {\n\n                            });\n                        }else {\n                            String msg = returnCode.getReturnMessage();\n                            messageEseguito(msg, () -&gt; {\n                                Intent intent = new Intent(getApplicationContext(),SelezionaAttActivity.class);\n                                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n                                startActivity(intent);\n                            });\n                        }\n                    }\n                };\n                inCorsoViewModel.makeApiCall(pin,ordPro,baseurl);\n                inCorsoViewModel.getLiveData().observe(this,eventRC_Conferma);\n\n\n\n            }\n        });\n\n        binding.btnAnnulaInCorso.setOnClickListener(view -&gt; {\n\n        });\n\n    }\n</code></pre>\n<p>ViewModel class</p>\n<pre><code>private MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiCall;\n\n@Inject\nApiInterface apiInterface;\n\n@Inject\npublic InCorsoViewModel(){\n    this.liveDataApiCall = new MutableLiveData&lt;&gt;();\n    \n}\n\n\n\n@Override\npublic MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; getLiveData() {\n    return liveDataApiCall;\n}\n\n\n\n@RequiresApi(api = Build.VERSION_CODES.N)\n    @Override\n    public void makeApiCall(String pin, String ordPro,String baseurl) {\n        String tipoMov = prefs.getString(&quot;tipoMov&quot;,&quot;&quot;);\n        String idMac = &quot;&quot;;\n        String dataOra = date.getValue()+&quot; &quot;+time.getValue();\n        String quant = qta.getValue() != null  ? qta.getValue() : &quot;0&quot;;\n        String param = &quot;&quot;;\n\n        AggOrdRepo aggOrdRepo = new AggOrdRepo(apiInterface);\n        aggOrdRepo.getAggiornaOrdine(baseurl,pin,ordPro,tipoMov,idMac,dataOra,quant,param,liveDataApiCall,toastMessageObserver);\n    }\n</code></pre>\n<p>Repository class</p>\n<pre><code> private Disposable disposable;\n    private ApiInterface apiInterface;\n    private MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiDatiLav;\n    private MutableLiveData&lt;String&gt; toastMessageObserver;\n\n    public DatiLavRepo(ApiInterface apiInterface){\n        this.apiInterface = apiInterface;\n    }\n\n    public void getDatiLav(String baseurl, String ordPro, MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiDatiLav, MutableLiveData&lt;String&gt; toastMessageObserver){\n        String HTTPS_PATH_GETORD = null;\n\n        try {\n            HTTPS_PATH_GETORD = baseurl+&quot;/gm/montaggio?p_cmd=3&amp;p_p1=&quot;+ URLEncoder.encode(ordPro,&quot;UTF-8&quot;);\n        } catch (UnsupportedEncodingException e) {\n            e.printStackTrace();\n        }\n\n\n        this.liveDataApiDatiLav = liveDataApiDatiLav;\n        this.toastMessageObserver = toastMessageObserver;\n\n\n\n        disposable = apiInterface.getDatiLavorazione(HTTPS_PATH_GETORD)\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribeOn(Schedulers.io())\n                .subscribe(this::handlerResponse,this::handlerError);\n     \n    }\n\n    private void handlerResponse(ReturnCode rc) {\n        liveDataApiDatiLav.postValue(new Event(rc));\n    }\n\n    private void handlerError(Throwable t) {\n        toastMessageObserver.setValue(&quot;Something unexpected happened to our request: &quot;+t.getMessage());\n    }\n\n\npublic class EventObserver&lt;T&gt; implements Observer&lt;Event&lt;T&gt;&gt; {\n    private OnEventChanged onEventChanged;\n\n    public EventObserver(OnEventChanged onEventChanged) {\n        this.onEventChanged = onEventChanged;\n    }\n\n    @Override\n    public void onChanged(@Nullable Event&lt;T&gt; tEvent) {\n        if (tEvent != null &amp;&amp; tEvent.getContentIfNotHandled() != null &amp;&amp; onEventChanged != null)\n            onEventChanged.onUnhandledContent(tEvent.getContentIfNotHandled());\n\n    }\n\n    interface OnEventChanged&lt;T&gt; {\n        void onUnhandledContent(T data);\n    }\n}\n\npublic class Event&lt;T&gt; {\n    private boolean hasBeenHandled = false;\n    private T content;\n\n    public Event(T content) {\n        this.content = content;\n    }\n\n    public T getContentIfNotHandled() {\n        if (hasBeenHandled) {\n            return null;\n        } else {\n            hasBeenHandled = true;\n            return content;\n        }\n    }\n\n    public boolean isHandled() {\n        return hasBeenHandled;\n    }\n\n}\n</code></pre>\n<p>If anyone can help me understand how this works</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682978162,"post_id":76140768,"comment_id":134294088,"body_markdown":"There is,a way, but I can’t see why you should want to. Your code is just fine as it is.","body":"There is,a way, but I can’t see why you should want to. Your code is just fine as it is."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1683007284,"post_id":76140768,"comment_id":134296854,"body_markdown":"In `Result` I don’t think you should ever allow `answers` to be `null`. Set it to `Collections.emptyList()` if appropriate. It does not take up more space than `null` and will allow you to stream the collection without a null check first.","body":"In <code>Result</code> I don’t think you should ever allow <code>answers</code> to be <code>null</code>. Set it to <code>Collections.emptyList()</code> if appropriate. It does not take up more space than <code>null</code> and will allow you to stream the collection without a null check first."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1683030522,"post_id":76140768,"comment_id":134301206,"body_markdown":"You could simply use `return result != null &amp;&amp; result.getAnswers() != null &amp;&amp; result.getAnswers().stream() …` Instead of `.map(q -&gt; &quot;xy&quot;.equals(q.getValue())) .orElse(false)`, you can use `.filter(q -&gt; &quot;xy&quot;.equals(q.getValue())) .isPresent()` but perhaps, your entire operation is actually meant to be `result.getAnswers().stream() .anyMatch(a -&gt; &quot;a&quot;.equals(a.getId()) &amp;&amp; &quot;xy&quot;.equals(a.getValue()))`","body":"You could simply use <code>return result != null &amp;&amp; result.getAnswers() != null &amp;&amp; result.getAnswers().stream() …</code> Instead of <code>.map(q -&gt; &quot;xy&quot;.equals(q.getValue())) .orElse(false)</code>, you can use <code>.filter(q -&gt; &quot;xy&quot;.equals(q.getValue())) .isPresent()</code> but perhaps, your entire operation is actually meant to be <code>result.getAnswers().stream() .anyMatch(a -&gt; &quot;a&quot;.equals(a.getId()) &amp;&amp; &quot;xy&quot;.equals(a.getValue()))</code>"}],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682850950,"creation_date":1682850950,"answer_id":76140783,"question_id":76140768,"body_markdown":"`Optional&lt;Result&gt; maybeResult = Optional.ofNullable( result )` will give you an optional which is either present or not present depending on whether `result` was `null` or not.\r\n\r\nThen, you can use `maybeResult.map( r -&gt; r.getAnswers().stream()... )` or `maybeResult.ifPresent( r -&gt; r.getAnswers().stream()... )`.\r\n","title":"How to replace if-Statement by using Optional/Stream API","body":"<p><code>Optional&lt;Result&gt; maybeResult = Optional.ofNullable( result )</code> will give you an optional which is either present or not present depending on whether <code>result</code> was <code>null</code> or not.</p>\n<p>Then, you can use <code>maybeResult.map( r -&gt; r.getAnswers().stream()... )</code> or <code>maybeResult.ifPresent( r -&gt; r.getAnswers().stream()... )</code>.</p>\n"},{"tags":[],"owner":{"account_id":17873261,"reputation":81,"user_id":12983985,"display_name":"avihaiB"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682851371,"creation_date":1682851371,"answer_id":76140812,"question_id":76140768,"body_markdown":"Yes you can.\r\nfor example : \r\n\r\n    String job = ...; // some string value\r\n    String str = Optional.ofNullable(job)\r\n        .map(n -&gt; &quot;Your job is : &quot; + n)\r\n        .orElse(&quot;I dont know what is your job&quot;);\r\n\r\n","title":"How to replace if-Statement by using Optional/Stream API","body":"<p>Yes you can.\nfor example :</p>\n<pre><code>String job = ...; // some string value\nString str = Optional.ofNullable(job)\n    .map(n -&gt; &quot;Your job is : &quot; + n)\n    .orElse(&quot;I dont know what is your job&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1682858250,"post_id":76140897,"comment_id":134278099,"body_markdown":"Why can `answers` be `null`? What does that mean? If it means semantically the same thing as an empty list, then why is `answers` ever null? Why isn&#39;t it initialized as `List.of()` and marked NonNull? Your question doesn&#39;t include these details, but excessive reliance on null chains is almost always a sign you&#39;re using `null` as a valid semantic state when you shouldn&#39;t be doing that.","body":"Why can <code>answers</code> be <code>null</code>? What does that mean? If it means semantically the same thing as an empty list, then why is <code>answers</code> ever null? Why isn&#39;t it initialized as <code>List.of()</code> and marked NonNull? Your question doesn&#39;t include these details, but excessive reliance on null chains is almost always a sign you&#39;re using <code>null</code> as a valid semantic state when you shouldn&#39;t be doing that."}],"tags":[],"owner":{"account_id":1427796,"reputation":93,"user_id":1350889,"display_name":"user1350889"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682852683,"creation_date":1682852683,"answer_id":76140897,"question_id":76140768,"body_markdown":"This solution worked:\r\n\r\n    private boolean check(@Nullable Result result) {\r\n        return Optional.ofNullable(result)\r\n                .map(Result::getAnswers)\r\n                .map(l -&gt; l.stream()\r\n                        .filter(a -&gt; &quot;a&quot;.equals(a.getId()))\r\n                        .findFirst()\r\n                        .map(q -&gt; &quot;xy&quot;.equals(q.getValue()))\r\n                        .orElse(false))\r\n                .orElse(false);\r\n    }","title":"How to replace if-Statement by using Optional/Stream API","body":"<p>This solution worked:</p>\n<pre><code>private boolean check(@Nullable Result result) {\n    return Optional.ofNullable(result)\n            .map(Result::getAnswers)\n            .map(l -&gt; l.stream()\n                    .filter(a -&gt; &quot;a&quot;.equals(a.getId()))\n                    .findFirst()\n                    .map(q -&gt; &quot;xy&quot;.equals(q.getValue()))\n                    .orElse(false))\n            .orElse(false);\n}\n</code></pre>\n"}],"owner":{"account_id":1427796,"reputation":93,"user_id":1350889,"display_name":"user1350889"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1682852683,"creation_date":1682850735,"question_id":76140768,"body_markdown":"Is there a way to replace the if statement by using Optional or similar lambda construct? \r\nThe idea is to having one statement without if.\r\n\r\n    private boolean check(@Nullable Result result) {\r\n        if (result != null &amp;&amp; result.getAnswers() != null) {\r\n            return result.getAnswers().stream()\r\n                    .filter(a -&gt; &quot;a&quot;.equals(a.getId()))\r\n                    .findFirst()\r\n                    .map(q -&gt; &quot;xy&quot;.equals(q.getValue()))\r\n                    .orElse(false);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    class Result {\r\n      private List&lt;MyAnswer&gt; answers;\r\n    }\r\n\r\n    public class MyAnswer {\r\n      private final String id;\r\n      private final String value;\r\n    }\r\n","title":"How to replace if-Statement by using Optional/Stream API","body":"<p>Is there a way to replace the if statement by using Optional or similar lambda construct?\nThe idea is to having one statement without if.</p>\n<pre><code>private boolean check(@Nullable Result result) {\n    if (result != null &amp;&amp; result.getAnswers() != null) {\n        return result.getAnswers().stream()\n                .filter(a -&gt; &quot;a&quot;.equals(a.getId()))\n                .findFirst()\n                .map(q -&gt; &quot;xy&quot;.equals(q.getValue()))\n                .orElse(false);\n    }\n    return false;\n}\n\nclass Result {\n  private List&lt;MyAnswer&gt; answers;\n}\n\npublic class MyAnswer {\n  private final String id;\n  private final String value;\n}\n</code></pre>\n"},{"tags":["java","servlets","java-ws"],"owner":{"account_id":11567291,"reputation":61,"user_id":15132662,"display_name":"Mohamad J Alanbaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682851230,"creation_date":1682851230,"question_id":76140799,"body_markdown":"this is the code for java webservices and keep get the same error with soapUI and the same error for the xml, I&#39;m working with jdk 8\r\n\r\nI have issue with the endpoint of the java web services as it&#39;s show in the code but it&#39;s keep giving me this response as bellow:\r\n\r\nError loading[http://localhost:8096/ws/biller_customer_authentication]: org.apache.xmlbeans.XmlException: org.apache.xmlbeans.XmlException: error: Premature end of file.\r\n\r\n\r\n```\r\n@EnableWs\r\n@Configuration\r\npublic class WSConfig extends WsConfigurerAdapter {\r\n\r\n    @Bean\r\n    public ServletRegistrationBean messageDispatcherServlet(ApplicationContext applicationContext) {\r\n        MessageDispatcherServlet servlet = new MessageDispatcherServlet();\r\n        servlet.setApplicationContext(applicationContext);\r\n        servlet.setTransformWsdlLocations(true);\r\n        return new ServletRegistrationBean(servlet, &quot;/ws/*&quot;);\r\n    }\r\n\r\n    @Bean(name = &quot;biller_customer_authentication&quot;)\r\n    public DefaultWsdl11Definition billerCustomerAuthentication(XsdSchema billerCustomerAuthenticationSchema) {\r\n        DefaultWsdl11Definition wsdl11Definition = new DefaultWsdl11Definition();\r\n        wsdl11Definition.setPortTypeName(&quot;BillerCustomerAuthenticationPort&quot;);\r\n        wsdl11Definition.setLocationUri(&quot;/ws&quot;);\r\n        wsdl11Definition.setTargetNamespace(&quot;http://localhost:8096&quot;);\r\n        wsdl11Definition.setSchema(billerCustomerAuthenticationSchema );\r\n        return wsdl11Definition;\r\n    }\r\n\r\n    @Bean\r\n    public XsdSchema billerCustomerAuthenticationSchema() {\r\n        return new SimpleXsdSchema(new ClassPathResource(&quot;xsd/biller.xsd&quot;));\r\n    }\r\n}\r\n```","title":"XML Exception with Java-WS","body":"<p>this is the code for java webservices and keep get the same error with soapUI and the same error for the xml, I'm working with jdk 8</p>\n<p>I have issue with the endpoint of the java web services as it's show in the code but it's keep giving me this response as bellow:</p>\n<p>Error loading[http://localhost:8096/ws/biller_customer_authentication]: org.apache.xmlbeans.XmlException: org.apache.xmlbeans.XmlException: error: Premature end of file.</p>\n<pre><code>@EnableWs\n@Configuration\npublic class WSConfig extends WsConfigurerAdapter {\n\n    @Bean\n    public ServletRegistrationBean messageDispatcherServlet(ApplicationContext applicationContext) {\n        MessageDispatcherServlet servlet = new MessageDispatcherServlet();\n        servlet.setApplicationContext(applicationContext);\n        servlet.setTransformWsdlLocations(true);\n        return new ServletRegistrationBean(servlet, &quot;/ws/*&quot;);\n    }\n\n    @Bean(name = &quot;biller_customer_authentication&quot;)\n    public DefaultWsdl11Definition billerCustomerAuthentication(XsdSchema billerCustomerAuthenticationSchema) {\n        DefaultWsdl11Definition wsdl11Definition = new DefaultWsdl11Definition();\n        wsdl11Definition.setPortTypeName(&quot;BillerCustomerAuthenticationPort&quot;);\n        wsdl11Definition.setLocationUri(&quot;/ws&quot;);\n        wsdl11Definition.setTargetNamespace(&quot;http://localhost:8096&quot;);\n        wsdl11Definition.setSchema(billerCustomerAuthenticationSchema );\n        return wsdl11Definition;\n    }\n\n    @Bean\n    public XsdSchema billerCustomerAuthenticationSchema() {\n        return new SimpleXsdSchema(new ClassPathResource(&quot;xsd/biller.xsd&quot;));\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-mvc","model-view-controller","mvvm","architecture"],"comments":[{"owner":{"account_id":378415,"reputation":1746,"user_id":731115,"accept_rate":75,"display_name":"mikalai"},"score":1,"creation_date":1350310187,"post_id":12883759,"comment_id":17468131,"body_markdown":"Adam is right - good architecture is being built for years, not from scratch. So your data-driven application is actually 2(!)-layer system. You can easily start with 1) UI layer to be any suitable MVC framework (as it handles complexity while UI is growing), and 2) simple data access layer via some generic interface (Repository&lt;T&gt;). Then, after adding mode and more functions you should refactor. You should add abstractions which solve your exact problems instead of planning them initially.","body":"Adam is right - good architecture is being built for years, not from scratch. So your data-driven application is actually 2(!)-layer system. You can easily start with 1) UI layer to be any suitable MVC framework (as it handles complexity while UI is growing), and 2) simple data access layer via some generic interface (Repository&lt;T&gt;). Then, after adding mode and more functions you should refactor. You should add abstractions which solve your exact problems instead of planning them initially."}],"answers":[{"comments":[{"owner":{"account_id":1809067,"reputation":715,"user_id":1645498,"accept_rate":62,"display_name":"Aksel Gresvig"},"score":0,"creation_date":1350397668,"post_id":12889227,"comment_id":17500464,"body_markdown":"Thanks all for the insight, a lot of wise words here. I realize our architecture will very much from itself as we go, but I wanted to get us off the jump as squarely as possible. I may have been over-engineering slightly, or at least tyiong us to the &quot;Clean Architecture&quot; too strictly. As the lines of code pile up, if it is hard to test or dependencies become hard to manage - then it will be time to rethink the architecture.","body":"Thanks all for the insight, a lot of wise words here. I realize our architecture will very much from itself as we go, but I wanted to get us off the jump as squarely as possible. I may have been over-engineering slightly, or at least tyiong us to the &quot;Clean Architecture&quot; too strictly. As the lines of code pile up, if it is hard to test or dependencies become hard to manage - then it will be time to rethink the architecture."},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":0,"creation_date":1350404502,"post_id":12889227,"comment_id":17504289,"body_markdown":"Not to generalize, make stereotypes, and use hackneyed phrases but there are &quot;hackers&quot; who [**GSD**](http://www.urbandictionary.com/define.php?term=GSD&amp;defid=4525962) and there are &quot;thinkers&quot; who write lots of articles... Some are able to do both but I much rather be/listen to Kohsuke, John Resig, Jeff Atwood than a Martin Fowler, Joel Spolesky or Uncle Bob. But thats just me.","body":"Not to generalize, make stereotypes, and use hackneyed phrases but there are &quot;hackers&quot; who <a href=\"http://www.urbandictionary.com/define.php?term=GSD&amp;defid=4525962\" rel=\"nofollow noreferrer\"><b>GSD</b></a> and there are &quot;thinkers&quot; who write lots of articles... Some are able to do both but I much rather be/listen to Kohsuke, John Resig, Jeff Atwood than a Martin Fowler, Joel Spolesky or Uncle Bob. But thats just me."}],"tags":[],"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"comment_count":2,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1350275218,"creation_date":1350274642,"answer_id":12889227,"question_id":12883759,"body_markdown":"Whoa that was a lot. And I think you have mostly translated Uncle Bob&#39;s jargon over to your Spring Java app.\r\n\r\nSince architecture is mostly opinion and since your question is sort of asking for one...\r\n\r\nThere are many different styles of architecture and ... most are overrated. Because most are the same thing: **higher cohesion** and **looser coupling** through indirection and abstraction.\r\n\r\nWhat matters MOST (IMHO) are the **dependencies**. Making lots of small projects as opposed to one giant monolithic project is the best way to get &quot;clean&quot; architecture.\r\n\r\nYour most important technology for clean architecture will not be &quot;Spring MVC&quot; technology or &quot;Freemarker&quot; templating language, or another Dr. Dobb&#39;s article with diagrams of boxes, hexagons and various other abstract polygons. \r\n\r\n**Focus on your build and dependency management technology. It is because this technology will enforce your architecture rules.** \r\n\r\nAlso if your code is hard to test.. you probably have bad architecture.\r\n\r\n**Focus on making your code easy to test and write lots of tests.**\r\n\r\nIf you do that it will be easy to change your code with out worry ... so much you could even change your architecture :)\r\n\r\nBeware of focusing too much an bull#%$@# architecture rules. **Seriously**: if your code is easy to test, easy to change, easy to understand and performs wells then you have a good architecture. There is no 6 weeks to 6 pack abs article to do this (sorry Uncle Bob). It takes experience and time... there is no magic bullet plan.\r\n\r\nSo here my own &quot;clean&quot; architecture... I mean guidelines:\r\n\r\n * Make many small projects\r\n * Use dependency management (ie Maven, Gradle)\r\n * Refactor constantly\r\n * Understand and use some sort of dependency injection (Spring)\r\n * Write unit tests\r\n * Understand cross cutting concerns (ie when you need AspectJ, metaprogramming, etc..)","title":"Maintaining Clean Architecture in Spring MVC with a data-centric approach","body":"<p>Whoa that was a lot. And I think you have mostly translated Uncle Bob's jargon over to your Spring Java app.</p>\n\n<p>Since architecture is mostly opinion and since your question is sort of asking for one...</p>\n\n<p>There are many different styles of architecture and ... most are overrated. Because most are the same thing: <strong>higher cohesion</strong> and <strong>looser coupling</strong> through indirection and abstraction.</p>\n\n<p>What matters MOST (IMHO) are the <strong>dependencies</strong>. Making lots of small projects as opposed to one giant monolithic project is the best way to get \"clean\" architecture.</p>\n\n<p>Your most important technology for clean architecture will not be \"Spring MVC\" technology or \"Freemarker\" templating language, or another Dr. Dobb's article with diagrams of boxes, hexagons and various other abstract polygons. </p>\n\n<p><strong>Focus on your build and dependency management technology. It is because this technology will enforce your architecture rules.</strong> </p>\n\n<p>Also if your code is hard to test.. you probably have bad architecture.</p>\n\n<p><strong>Focus on making your code easy to test and write lots of tests.</strong></p>\n\n<p>If you do that it will be easy to change your code with out worry ... so much you could even change your architecture :)</p>\n\n<p>Beware of focusing too much an bull#%$@# architecture rules. <strong>Seriously</strong>: if your code is easy to test, easy to change, easy to understand and performs wells then you have a good architecture. There is no 6 weeks to 6 pack abs article to do this (sorry Uncle Bob). It takes experience and time... there is no magic bullet plan.</p>\n\n<p>So here my own \"clean\" architecture... I mean guidelines:</p>\n\n<ul>\n<li>Make many small projects</li>\n<li>Use dependency management (ie Maven, Gradle)</li>\n<li>Refactor constantly</li>\n<li>Understand and use some sort of dependency injection (Spring)</li>\n<li>Write unit tests</li>\n<li>Understand cross cutting concerns (ie when you need AspectJ, metaprogramming, etc..)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1809067,"reputation":715,"user_id":1645498,"accept_rate":62,"display_name":"Aksel Gresvig"},"score":0,"creation_date":1350398384,"post_id":12899549,"comment_id":17500885,"body_markdown":"Thanks for bringing these concerns to my attention. We could have IDs in our domain objects, we just don&#39;t as they have no purpose in this front-end part of the application - all major data-transformation (database to objects) is done in the service bus, as such the IDs are sort of &quot;lost in translation&quot;. Moreover, the Consumer module is more than a &quot;Gateway&quot; to the DB, it provides access to the result returned by the service in a manner suited to the MVC front-end. In this respect, it may be more appropriate to place this Consumer module in the &quot;Use Case&quot; layer?","body":"Thanks for bringing these concerns to my attention. We could have IDs in our domain objects, we just don&#39;t as they have no purpose in this front-end part of the application - all major data-transformation (database to objects) is done in the service bus, as such the IDs are sort of &quot;lost in translation&quot;. Moreover, the Consumer module is more than a &quot;Gateway&quot; to the DB, it provides access to the result returned by the service in a manner suited to the MVC front-end. In this respect, it may be more appropriate to place this Consumer module in the &quot;Use Case&quot; layer?"},{"owner":{"account_id":1809067,"reputation":715,"user_id":1645498,"accept_rate":62,"display_name":"Aksel Gresvig"},"score":0,"creation_date":1350398448,"post_id":12899549,"comment_id":17500930,"body_markdown":"As for the `ViewModel` concern, I agree with you and I think it is what puts me off here - I don&#39;t know what to call this class. See update in my original question.","body":"As for the <code>ViewModel</code> concern, I agree with you and I think it is what puts me off here - I don&#39;t know what to call this class. See update in my original question."},{"owner":{"account_id":130411,"reputation":13858,"user_id":329660,"accept_rate":45,"display_name":"guillaume31"},"score":0,"creation_date":1350399397,"post_id":12899549,"comment_id":17501502,"body_markdown":"1) OK, but do these domain objects have behavior in the first place ? If your Consumer module deals with MVC-tailored data structures, it should be located in the Interface Adapters part of the architecture, not the Use Cases, since the Use Cases are supposed to be &quot;isolated from externalities&quot; as Uncle Bob puts it.","body":"1) OK, but do these domain objects have behavior in the first place ? If your Consumer module deals with MVC-tailored data structures, it should be located in the Interface Adapters part of the architecture, not the Use Cases, since the Use Cases are supposed to be &quot;isolated from externalities&quot; as Uncle Bob puts it."},{"owner":{"account_id":130411,"reputation":13858,"user_id":329660,"accept_rate":45,"display_name":"guillaume31"},"score":1,"creation_date":1350399711,"post_id":12899549,"comment_id":17501691,"body_markdown":"2) Uncle Bob calls these classes RequestModels and ResponseModels. I strongly suggest you watch one of his talks (http://vimeo.com/43612849, http://www.youtube.com/watch?v=WpkDN78P884) in addition to the blog post to get a deeper insight on the philosophy behind Clean Architecture.","body":"2) Uncle Bob calls these classes RequestModels and ResponseModels. I strongly suggest you watch one of his talks (<a href=\"http://vimeo.com/43612849\" rel=\"nofollow noreferrer\">vimeo.com/43612849</a>, <a href=\"http://www.youtube.com/watch?v=WpkDN78P884\" rel=\"nofollow noreferrer\">youtube.com/watch?v=WpkDN78P884</a>) in addition to the blog post to get a deeper insight on the philosophy behind Clean Architecture."},{"owner":{"account_id":1809067,"reputation":715,"user_id":1645498,"accept_rate":62,"display_name":"Aksel Gresvig"},"score":0,"creation_date":1350478611,"post_id":12899549,"comment_id":17529750,"body_markdown":"Thanks for the links, watching that certainly made it clearer what Bob wants - and it also became more apparent to me that this requires more architectural facets than I had expected. In practice I will need another module for the &quot;Use Case&quot; layer, this module would be where Bob&#39;s &quot;Interactors&quot; and &quot;Request/Response interfaces&quot; live.\nThen the Spring MVC module will represent the Web GUI only, and contain no application logic, hence it will be easily changeable.","body":"Thanks for the links, watching that certainly made it clearer what Bob wants - and it also became more apparent to me that this requires more architectural facets than I had expected. In practice I will need another module for the &quot;Use Case&quot; layer, this module would be where Bob&#39;s &quot;Interactors&quot; and &quot;Request/Response interfaces&quot; live. Then the Spring MVC module will represent the Web GUI only, and contain no application logic, hence it will be easily changeable."}],"tags":[],"owner":{"account_id":130411,"reputation":13858,"user_id":329660,"accept_rate":45,"display_name":"guillaume31"},"comment_count":5,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1350317102,"creation_date":1350317102,"answer_id":12899549,"question_id":12883759,"body_markdown":"&gt; Because of this, we do not have &quot;entities&quot; in the traditional sense\r\n&gt; (with Ids), but a data-centric approach making this layer a data\r\n&gt; access layer, presented to the rest of the application by the\r\n&gt; Consumer-module.\r\n\r\nSomething seems odd to me in that part. Why couldn&#39;t your entities have ID&#39;s even if you get them from web services ?\r\n\r\nIn the Clean Architecture approach, the Entities layer is precisely not a data access layer. Data access should be a **detail** in your architecture, not a central concern. As you said yourself, Entities contain domain-specific *business rules*. Business rules, or behavior, is very different from the way you fetch your data. \r\n\r\n*Entities is where all the domain logic happens, not where you get your data from*. According to Clean Architecture, you get your persisted or external data from Gateways.\r\n\r\n&gt; One solution I&#39;ve found to this problem is the use a variant of the\r\n&gt; &quot;MVVM-pattern&quot; that I choose to call MVC-VM. See below for an\r\n&gt; explanation. The &quot;VM&quot;-part of this lives in this Use Case-layer,\r\n&gt; represented by *ViewModel-classes that encapsulate this Use\r\n&gt; Case-specific logic.\r\n\r\n`ViewModel` clearly refers to a View, which is a presentation artifact -another detail. Use cases/Interactors should be devoid of such details. Instead, Interactors should send and receive delivery mechanism-agnostic data structures (RequestModels and ResponseModels) through Boundaries. \r\n\r\nI understand that this is a custom pattern of yours and doesn&#39;t involve a reference to a presentation framework, but the word &quot;View&quot; is just misleading.\r\n\r\n","title":"Maintaining Clean Architecture in Spring MVC with a data-centric approach","body":"<blockquote>\n  <p>Because of this, we do not have \"entities\" in the traditional sense\n  (with Ids), but a data-centric approach making this layer a data\n  access layer, presented to the rest of the application by the\n  Consumer-module.</p>\n</blockquote>\n\n<p>Something seems odd to me in that part. Why couldn't your entities have ID's even if you get them from web services ?</p>\n\n<p>In the Clean Architecture approach, the Entities layer is precisely not a data access layer. Data access should be a <strong>detail</strong> in your architecture, not a central concern. As you said yourself, Entities contain domain-specific <em>business rules</em>. Business rules, or behavior, is very different from the way you fetch your data. </p>\n\n<p><em>Entities is where all the domain logic happens, not where you get your data from</em>. According to Clean Architecture, you get your persisted or external data from Gateways.</p>\n\n<blockquote>\n  <p>One solution I've found to this problem is the use a variant of the\n  \"MVVM-pattern\" that I choose to call MVC-VM. See below for an\n  explanation. The \"VM\"-part of this lives in this Use Case-layer,\n  represented by *ViewModel-classes that encapsulate this Use\n  Case-specific logic.</p>\n</blockquote>\n\n<p><code>ViewModel</code> clearly refers to a View, which is a presentation artifact -another detail. Use cases/Interactors should be devoid of such details. Instead, Interactors should send and receive delivery mechanism-agnostic data structures (RequestModels and ResponseModels) through Boundaries. </p>\n\n<p>I understand that this is a custom pattern of yours and doesn't involve a reference to a presentation framework, but the word \"View\" is just misleading.</p>\n"},{"comments":[{"owner":{"account_id":964918,"reputation":684,"user_id":988521,"accept_rate":50,"display_name":"Natan Lot&#233;rio"},"score":0,"creation_date":1430404044,"post_id":12941244,"comment_id":48060456,"body_markdown":"Hi Aksel, nice answer!\nI was wondering if you could provide an example of your aproach, like a small project or something like that.","body":"Hi Aksel, nice answer! I was wondering if you could provide an example of your aproach, like a small project or something like that."}],"tags":[],"owner":{"account_id":1809067,"reputation":715,"user_id":1645498,"accept_rate":62,"display_name":"Aksel Gresvig"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1350499870,"creation_date":1350499870,"answer_id":12941244,"question_id":12883759,"body_markdown":"## My solution\r\nSo it turns out that implementing Bob&#39;s &quot;Clean Architecture&quot; in Java/Spring MVC is borderline non-trivial and requires more architectural facets than I originally had included.  \r\nAnd I could actually not find any example of implementations online.\r\n\r\nEvidently my architecture was missing a separate module for the &quot;Use Case&quot;-layer as this logic should not live in the Spring MVC Web module (and not be called &quot;`*ViewModel`&quot;). The Web/MVC module is simply a detail of the application, and the application logic should be completely separated from it, and separately testable.\r\n\r\nThis new &quot;Use Case&quot;-module now contains `*Interactor`-classes which get data from the domain module (entities). Moreover, &quot;*Request/Response Objects*&quot; are needed to facilitate the communication between the MVC/Web-module and the Use Case module.\r\n\r\nMy dependency chain now looks like this:\r\n\r\nSpring MVC module -&gt; Use Case module -&gt; Domain module\r\n\r\nwhere every arrow (dependency) takes form as a *Boundary*, meaning an interface is defined in the module to the right of the arrow that is implemented where required and injected where needed (Inversion of Control).\r\n\r\nHere are the interfaces I ended up with (per Use Case):\r\n\r\n`I&lt;UseCase&gt;Request` - implemented in the MVC module, instantiated in the Controller\r\n`I&lt;UseCase&gt;Response` - implemented in the Use Case module, instantiated in the Interactor\r\n`I&lt;UseCase&gt;Interactor` - implemented in the UseCase module, injected in the Controller\r\n`I&lt;UseCase&gt;Consumer` - implemented in the Domain module, injected in the Interactor\r\n\r\n**How it works?**  \r\nThe `Controller` takes parameters from the HTTP request and packs it in a `RequestModel` which it passes down to the `Interactor`. The `Interactor` fetches the data it needs from the domain module `*Consumer` and imposes it&#39;s application specific logic on it, then puts it in a `ResponseModel` and sends it back up to the `Controller`. The `Controller` then finally simply puts this (now GUI-friendly) simple data in a `Map` object and forwards it to the FreeMarker template which then uses this data directly and renders the HTML.\r\n\r\nA `Presenter` could get involved in that last part there, making this an implementation of the Model-View-Presenter pattern, but I&#39;m leaving that for now.\r\n\r\n## My conclusion\r\nI ended up with more files than what is necessary this early in development, strictly speaking. However as the complexity and size of the application grows, I am confident that this structure keeps it easy for us to maintain low coupling and high cohesion. Also, the Web-module is now easily replaceable - it just delivers requests to the use-case module and receives response-objects. Moreover, each layer of the application (domain logic, application logic, and GUI logic) is separately testable, with only the View-part requiring a webserver in order to be tested.\r\n\r\nThanks for all advice and pointers I received here. And please comment on my solution - I don&#39;t claim that it is perfect. ","title":"Maintaining Clean Architecture in Spring MVC with a data-centric approach","body":"<h2>My solution</h2>\n\n<p>So it turns out that implementing Bob's \"Clean Architecture\" in Java/Spring MVC is borderline non-trivial and requires more architectural facets than I originally had included.<br>\nAnd I could actually not find any example of implementations online.</p>\n\n<p>Evidently my architecture was missing a separate module for the \"Use Case\"-layer as this logic should not live in the Spring MVC Web module (and not be called \"<code>*ViewModel</code>\"). The Web/MVC module is simply a detail of the application, and the application logic should be completely separated from it, and separately testable.</p>\n\n<p>This new \"Use Case\"-module now contains <code>*Interactor</code>-classes which get data from the domain module (entities). Moreover, \"<em>Request/Response Objects</em>\" are needed to facilitate the communication between the MVC/Web-module and the Use Case module.</p>\n\n<p>My dependency chain now looks like this:</p>\n\n<p>Spring MVC module -> Use Case module -> Domain module</p>\n\n<p>where every arrow (dependency) takes form as a <em>Boundary</em>, meaning an interface is defined in the module to the right of the arrow that is implemented where required and injected where needed (Inversion of Control).</p>\n\n<p>Here are the interfaces I ended up with (per Use Case):</p>\n\n<p><code>I&lt;UseCase&gt;Request</code> - implemented in the MVC module, instantiated in the Controller\n<code>I&lt;UseCase&gt;Response</code> - implemented in the Use Case module, instantiated in the Interactor\n<code>I&lt;UseCase&gt;Interactor</code> - implemented in the UseCase module, injected in the Controller\n<code>I&lt;UseCase&gt;Consumer</code> - implemented in the Domain module, injected in the Interactor</p>\n\n<p><strong>How it works?</strong><br>\nThe <code>Controller</code> takes parameters from the HTTP request and packs it in a <code>RequestModel</code> which it passes down to the <code>Interactor</code>. The <code>Interactor</code> fetches the data it needs from the domain module <code>*Consumer</code> and imposes it's application specific logic on it, then puts it in a <code>ResponseModel</code> and sends it back up to the <code>Controller</code>. The <code>Controller</code> then finally simply puts this (now GUI-friendly) simple data in a <code>Map</code> object and forwards it to the FreeMarker template which then uses this data directly and renders the HTML.</p>\n\n<p>A <code>Presenter</code> could get involved in that last part there, making this an implementation of the Model-View-Presenter pattern, but I'm leaving that for now.</p>\n\n<h2>My conclusion</h2>\n\n<p>I ended up with more files than what is necessary this early in development, strictly speaking. However as the complexity and size of the application grows, I am confident that this structure keeps it easy for us to maintain low coupling and high cohesion. Also, the Web-module is now easily replaceable - it just delivers requests to the use-case module and receives response-objects. Moreover, each layer of the application (domain logic, application logic, and GUI logic) is separately testable, with only the View-part requiring a webserver in order to be tested.</p>\n\n<p>Thanks for all advice and pointers I received here. And please comment on my solution - I don't claim that it is perfect. </p>\n"}],"owner":{"account_id":1809067,"reputation":715,"user_id":1645498,"accept_rate":62,"display_name":"Aksel Gresvig"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9722,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":12941244,"answer_count":3,"score":16,"last_activity_date":1682850842,"creation_date":1350229254,"question_id":12883759,"body_markdown":"# Maintaining Clean Architecture in Spring MVC with a data-centric approach\r\n\r\nI&#39;m trying to map out the architecture for the front-end of a new Java-based web app (portal type application) we are making at work. I want to get this right from day one, and I would like to kick off a discussion here to help me implement Uncle Bob&#39;s [Clean Architecture] in my architectural design.\r\n\r\nHere&#39;s a quick run-down of our tech stack, top to bottom (the technology isn&#39;t importance, the structure is):\r\n\r\n- Oracle Database\r\n- Oracle Service Bus exposing services using WSDLs\r\n- JAX-WS generated Java-classes from the WSDLs (let&#39;s call this the &quot;generated service layer&quot;)\r\n- A Domain module consisting of POJOs mapped to the generated data objects\r\n- A Consumer-module exposing the &quot;generated service layer&quot; to the front-end application\r\n- A Spring MVC based front-end module using FreeMarker to render the views\r\n\r\nA key point:\r\n&gt; In particular, the name of something declared in an outer circle must not be mentioned by the code in the an inner circle. That includes, functions, classes. variables, or any other named software entity.\r\n\r\nAttempting to adhere to Bob&#39;s Clean Architecture, I&#39;ve gone back and forth a bit with myself regarding where to place the *application logic*, namely the &quot;Use Case&quot;-layer in his architecture.\r\n\r\nHere is the approach I&#39;ve come up with:\r\n\r\n## Layer 1 - Entities\r\n&gt; Entities encapsulate Enterprise wide business rules. \r\n\r\nThis is where our Domain module containing the *domain-objects* lives, these are self-containing objects with minimal dependencies on each other. Only logic pertaining to the objects themselves may live on these domain objects, and no use-case specific logic.\r\n\r\nAccess to our database is exposed via WSDLs using a service bus that transforms the data, as opposed to an ORM like JPA or Hibernate. Because of this, we do not have &quot;entities&quot; in the traditional sense (with Ids), but a *data-centric approach* making this layer a data access layer, presented to the rest of the application by the Consumer-module.\r\n\r\n## Layer 2 - Use Cases\r\n&gt; The software in this layer contains application specific business rules.\r\n\r\nThis is where logic specific to our application&#39;s use cases lives. Changes to this layer should not affect the data access layer (layer 1). Changes to the GUI or framework implementation (Spring MVC) should not affect this layer.\r\n\r\n**This is where it gets a little tricky:**\r\nSince our data access layer (in layer 1) must be kept clean of application logic, we need a layer that facilitates use of that layer in a fashion that suits the use cases. One solution I&#39;ve found to this problem is the use a variant of the &quot;*MVVM-pattern*&quot; that I choose to call *MVC-VM*. See below for an explanation. The &quot;VM&quot;-part of this lives in this Use Case-layer, represented by `*ViewModel`-classes that encapsulate this Use Case-specific logic.\r\n\r\n## Layer 3 - Interface Adapters\r\n&gt; The software in this layer is a set of adapters that convert data from the format most convenient for the use cases and entities, to the format most convenient for some external agency such as the Database or the Web.\r\n\r\nThis is where the MVC-architecture of our GUI lives (the &quot;MVC&quot; in our &quot;MVC-VM&quot;). Essentially this is when the `Controller`-classes get data from the `*ViewModel`-classes and puts it in Spring MVC&#39;s `ModelMap` ojects that are used directly by the FreeMarker-templates in the View.\r\n\r\nThe way I see it, the servicebus would in our case also fall in under this layer.\r\n\r\n## Layer 4 - Frameworks and Drivers\r\n&gt; Generally you don’t write much code in this layer other than glue code that communicates to the next circle inwards.\r\n\r\nThis layer is really just a configuration-layer in our application, namely the Spring configuration. This would for example be where we specify that FreeMarker is used to render the view.\r\n\r\n********************************\r\n### Model View ViewModel Pattern\r\n&gt; MVVM facilitates a clear separation of the development of the graphical user interface (either as markup language or GUI code) from the development of the business logic or back end logic known as the model (also known as the data model to distinguish it from the view model). The view model of MVVM is a value converter meaning that the view model is responsible for exposing the data objects from the model in such a way that those objects are easily managed and consumed.\r\n\r\nMore on the MVVM-pattern at [Wikipedia](http://en.wikipedia.org/wiki/Model_View_ViewModel).\r\n\r\nThe MVC-VM roles would be fulfilled in our application like so:\r\n\r\n- **Model** - represented simply by the `ModelMap` datastructure in Spring MVC that is used by the view templates.\r\n- **View**  - FreeMarker templates\r\n- **Controller** Spring&#39;s `Controller`-classes that directs *HTTP URL requests* to specific *handlers* (and as such functions as a FrontController). The handlers in these classes are responsible for fetching data from the use case-layer and pushing it out to the view templates when showing data(HTTP `GET`), as well as sending data down for storing (HTTP `POST`). This way it essentially functions as a *binder* between the ViewModel and View, using the Model.\r\n\r\n- **ViewModel** - These classes are responsible for 1) structuring data from the data access layer in a fashion that is usable by the View and 2) treat data-input from the View. &quot;Treat&quot; means to validate and to break down the data so that it can be sent down the stack for storing. This layer would take form as `&lt;UseCase&gt;VM`-classes in a `viewmodel` package in our Spring MVC front-end module.\r\n\r\nA key component here is the implicit binding that happens in Spring MVC between `ModelMap` and the FreeMarker-templates. The templates only use the model (`ModelMap`s), where the controller has put the data in a format it can use. That way we can make templates like so:\r\n\r\n\t&lt;body&gt;\r\n\t  &lt;h1&gt;Welcome ${user}!&lt;/h1&gt;\r\n\t  &lt;p&gt;Our latest product:\r\n\t  &lt;a href=&quot;${latestProduct.url}&quot;&gt;${latestProduct.name}&lt;/a&gt;!\r\n\t&lt;/body&gt;\r\n\t\r\n***************************************\r\n\r\nI apologize for the verbose explanation, but I could not explain this (relatively simple) architecture in fewer words. \r\n\r\nI would greatly appreciate some input on my approach here - am I on the right track? Does the MVC-VM thing make sense? Am I violating any Clean Architecture Principles?\r\n\r\nThere are of course many solutions to this, but I am trying to find a solution that is 1) not over-engineered and 2) adheres to the principles of Bob&#39;s Clean Architecture.\r\n\r\n******************\r\n## Update:\r\nI think the key issue that puts me off here is what form the &quot;Use case&quot; layer takes in this application. Remember we have an MVC front-end that gets data from a data access layer. If the MVC part fits in Bob&#39;s &quot;Interfaces adapters&quot;, and the domain models of the data layer fit in Bob&#39;s &quot;Entities&quot; layer, then what do I call the use case classes that implement application logic? I am tempted to just call them `&lt;UseCase&gt;Model`s and put them in the MVC project, but according to Bob\r\n\r\n&gt; The models are likely just data structures that are passed from the controllers to the use cases, and then back from the use cases to the presenters and views.\r\n\r\nso that means my model objects should be &quot;dumb&quot; (like a simple `Map`. `ModelMap` in Spring) and it is then the responsibility of the controller to put data from the Use Case class into this Map-structure. \r\n\r\nSo again, what form does my Use Case-classes take? How about `&lt;UseCase&gt;Interactor`?\r\n\r\n**But in conclusion** I realize that the MVC-MV-thing is over-engineering (or simply incorrect) - as &quot;mikalai&quot; indicates below this essentially just a two-layer applcation in its current form; a data access layer and a front-end MVC layer. Simple as that.\r\n\r\n[Clean Architecture]: https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html","title":"Maintaining Clean Architecture in Spring MVC with a data-centric approach","body":"<h1>Maintaining Clean Architecture in Spring MVC with a data-centric approach</h1>\n<p>I'm trying to map out the architecture for the front-end of a new Java-based web app (portal type application) we are making at work. I want to get this right from day one, and I would like to kick off a discussion here to help me implement Uncle Bob's <a href=\"https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html\" rel=\"nofollow noreferrer\">Clean Architecture</a> in my architectural design.</p>\n<p>Here's a quick run-down of our tech stack, top to bottom (the technology isn't importance, the structure is):</p>\n<ul>\n<li>Oracle Database</li>\n<li>Oracle Service Bus exposing services using WSDLs</li>\n<li>JAX-WS generated Java-classes from the WSDLs (let's call this the &quot;generated service layer&quot;)</li>\n<li>A Domain module consisting of POJOs mapped to the generated data objects</li>\n<li>A Consumer-module exposing the &quot;generated service layer&quot; to the front-end application</li>\n<li>A Spring MVC based front-end module using FreeMarker to render the views</li>\n</ul>\n<p>A key point:</p>\n<blockquote>\n<p>In particular, the name of something declared in an outer circle must not be mentioned by the code in the an inner circle. That includes, functions, classes. variables, or any other named software entity.</p>\n</blockquote>\n<p>Attempting to adhere to Bob's Clean Architecture, I've gone back and forth a bit with myself regarding where to place the <em>application logic</em>, namely the &quot;Use Case&quot;-layer in his architecture.</p>\n<p>Here is the approach I've come up with:</p>\n<h2>Layer 1 - Entities</h2>\n<blockquote>\n<p>Entities encapsulate Enterprise wide business rules.</p>\n</blockquote>\n<p>This is where our Domain module containing the <em>domain-objects</em> lives, these are self-containing objects with minimal dependencies on each other. Only logic pertaining to the objects themselves may live on these domain objects, and no use-case specific logic.</p>\n<p>Access to our database is exposed via WSDLs using a service bus that transforms the data, as opposed to an ORM like JPA or Hibernate. Because of this, we do not have &quot;entities&quot; in the traditional sense (with Ids), but a <em>data-centric approach</em> making this layer a data access layer, presented to the rest of the application by the Consumer-module.</p>\n<h2>Layer 2 - Use Cases</h2>\n<blockquote>\n<p>The software in this layer contains application specific business rules.</p>\n</blockquote>\n<p>This is where logic specific to our application's use cases lives. Changes to this layer should not affect the data access layer (layer 1). Changes to the GUI or framework implementation (Spring MVC) should not affect this layer.</p>\n<p><strong>This is where it gets a little tricky:</strong>\nSince our data access layer (in layer 1) must be kept clean of application logic, we need a layer that facilitates use of that layer in a fashion that suits the use cases. One solution I've found to this problem is the use a variant of the &quot;<em>MVVM-pattern</em>&quot; that I choose to call <em>MVC-VM</em>. See below for an explanation. The &quot;VM&quot;-part of this lives in this Use Case-layer, represented by <code>*ViewModel</code>-classes that encapsulate this Use Case-specific logic.</p>\n<h2>Layer 3 - Interface Adapters</h2>\n<blockquote>\n<p>The software in this layer is a set of adapters that convert data from the format most convenient for the use cases and entities, to the format most convenient for some external agency such as the Database or the Web.</p>\n</blockquote>\n<p>This is where the MVC-architecture of our GUI lives (the &quot;MVC&quot; in our &quot;MVC-VM&quot;). Essentially this is when the <code>Controller</code>-classes get data from the <code>*ViewModel</code>-classes and puts it in Spring MVC's <code>ModelMap</code> ojects that are used directly by the FreeMarker-templates in the View.</p>\n<p>The way I see it, the servicebus would in our case also fall in under this layer.</p>\n<h2>Layer 4 - Frameworks and Drivers</h2>\n<blockquote>\n<p>Generally you don’t write much code in this layer other than glue code that communicates to the next circle inwards.</p>\n</blockquote>\n<p>This layer is really just a configuration-layer in our application, namely the Spring configuration. This would for example be where we specify that FreeMarker is used to render the view.</p>\n<hr />\n<h3>Model View ViewModel Pattern</h3>\n<blockquote>\n<p>MVVM facilitates a clear separation of the development of the graphical user interface (either as markup language or GUI code) from the development of the business logic or back end logic known as the model (also known as the data model to distinguish it from the view model). The view model of MVVM is a value converter meaning that the view model is responsible for exposing the data objects from the model in such a way that those objects are easily managed and consumed.</p>\n</blockquote>\n<p>More on the MVVM-pattern at <a href=\"http://en.wikipedia.org/wiki/Model_View_ViewModel\" rel=\"nofollow noreferrer\">Wikipedia</a>.</p>\n<p>The MVC-VM roles would be fulfilled in our application like so:</p>\n<ul>\n<li><p><strong>Model</strong> - represented simply by the <code>ModelMap</code> datastructure in Spring MVC that is used by the view templates.</p>\n</li>\n<li><p><strong>View</strong>  - FreeMarker templates</p>\n</li>\n<li><p><strong>Controller</strong> Spring's <code>Controller</code>-classes that directs <em>HTTP URL requests</em> to specific <em>handlers</em> (and as such functions as a FrontController). The handlers in these classes are responsible for fetching data from the use case-layer and pushing it out to the view templates when showing data(HTTP <code>GET</code>), as well as sending data down for storing (HTTP <code>POST</code>). This way it essentially functions as a <em>binder</em> between the ViewModel and View, using the Model.</p>\n</li>\n<li><p><strong>ViewModel</strong> - These classes are responsible for 1) structuring data from the data access layer in a fashion that is usable by the View and 2) treat data-input from the View. &quot;Treat&quot; means to validate and to break down the data so that it can be sent down the stack for storing. This layer would take form as <code>&lt;UseCase&gt;VM</code>-classes in a <code>viewmodel</code> package in our Spring MVC front-end module.</p>\n</li>\n</ul>\n<p>A key component here is the implicit binding that happens in Spring MVC between <code>ModelMap</code> and the FreeMarker-templates. The templates only use the model (<code>ModelMap</code>s), where the controller has put the data in a format it can use. That way we can make templates like so:</p>\n<pre><code>&lt;body&gt;\n  &lt;h1&gt;Welcome ${user}!&lt;/h1&gt;\n  &lt;p&gt;Our latest product:\n  &lt;a href=&quot;${latestProduct.url}&quot;&gt;${latestProduct.name}&lt;/a&gt;!\n&lt;/body&gt;\n</code></pre>\n<hr />\n<p>I apologize for the verbose explanation, but I could not explain this (relatively simple) architecture in fewer words.</p>\n<p>I would greatly appreciate some input on my approach here - am I on the right track? Does the MVC-VM thing make sense? Am I violating any Clean Architecture Principles?</p>\n<p>There are of course many solutions to this, but I am trying to find a solution that is 1) not over-engineered and 2) adheres to the principles of Bob's Clean Architecture.</p>\n<hr />\n<h2>Update:</h2>\n<p>I think the key issue that puts me off here is what form the &quot;Use case&quot; layer takes in this application. Remember we have an MVC front-end that gets data from a data access layer. If the MVC part fits in Bob's &quot;Interfaces adapters&quot;, and the domain models of the data layer fit in Bob's &quot;Entities&quot; layer, then what do I call the use case classes that implement application logic? I am tempted to just call them <code>&lt;UseCase&gt;Model</code>s and put them in the MVC project, but according to Bob</p>\n<blockquote>\n<p>The models are likely just data structures that are passed from the controllers to the use cases, and then back from the use cases to the presenters and views.</p>\n</blockquote>\n<p>so that means my model objects should be &quot;dumb&quot; (like a simple <code>Map</code>. <code>ModelMap</code> in Spring) and it is then the responsibility of the controller to put data from the Use Case class into this Map-structure.</p>\n<p>So again, what form does my Use Case-classes take? How about <code>&lt;UseCase&gt;Interactor</code>?</p>\n<p><strong>But in conclusion</strong> I realize that the MVC-MV-thing is over-engineering (or simply incorrect) - as &quot;mikalai&quot; indicates below this essentially just a two-layer applcation in its current form; a data access layer and a front-end MVC layer. Simple as that.</p>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1682805247,"post_id":76138591,"comment_id":134273754,"body_markdown":"Note part of the problem is you didn&#39;t create a 3x3x3 three-dimensional list. You have a 9x3 two-dimensional list.","body":"Note part of the problem is you didn&#39;t create a 3x3x3 three-dimensional list. You have a 9x3 two-dimensional list."}],"answers":[{"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1682806994,"post_id":76138659,"comment_id":134273936,"body_markdown":"Note you can do this with a list as well: `val ans = List(3) { List(3) { List(3) { 0 } } } }`.","body":"Note you can do this with a list as well: <code>val ans = List(3) { List(3) { List(3) { 0 } } } }</code>."},{"owner":{"account_id":23110408,"reputation":6937,"user_id":17218429,"display_name":"lukas.j"},"score":0,"creation_date":1682849180,"post_id":76138659,"comment_id":134277066,"body_markdown":"The question is about a 3x3x3 three-dimensional _list_, not about an array. And since there is no _contentDeepToString_ for lists this does not really answer the question.","body":"The question is about a 3x3x3 three-dimensional <i>list</i>, not about an array. And since there is no <i>contentDeepToString</i> for lists this does not really answer the question."}],"tags":[],"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682849924,"creation_date":1682805921,"answer_id":76138659,"question_id":76138591,"body_markdown":"You created 9x3 two dimensional list. Use List function instead:\r\n\r\n    fun main() {\r\n        val ans = List(3) { List(3) { MutableList(3) { 0 } } }\r\n        println(ans)\r\n    }\r\n\r\nor Array:\r\n\r\n    fun main() {\r\n        val ans = Array(3) { Array(3) { IntArray(3) { 0 } } }\r\n        println(ans.contentDeepToString())\r\n    }","title":"What can I use instead of joinToString to solve my problem","body":"<p>You created 9x3 two dimensional list. Use List function instead:</p>\n<pre><code>fun main() {\n    val ans = List(3) { List(3) { MutableList(3) { 0 } } }\n    println(ans)\n}\n</code></pre>\n<p>or Array:</p>\n<pre><code>fun main() {\n    val ans = Array(3) { Array(3) { IntArray(3) { 0 } } }\n    println(ans.contentDeepToString())\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23110408,"reputation":6937,"user_id":17218429,"display_name":"lukas.j"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682850787,"creation_date":1682850787,"answer_id":76140771,"question_id":76138591,"body_markdown":"@Slaw gave the correct answer in a comment to @FeelFree&#39;s answer:\r\n\r\n    val ans = List(3) { List(3) { List(3) { 0 } } }\r\n\r\nThe mistake with the code in your question is that – as @Slaw commented below your question – you are not building a 3 x 3 x 3 list, but a 9 x 3 one.\r\n\r\nTo built a 3 x 3 x 3 list &#39;manually&#39; like in your question you would do:\r\n\r\n    val ans = listOf(\r\n      listOf(\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0)\r\n      ),\r\n      listOf(\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0)\r\n      ),\r\n      listOf(\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0)\r\n      )\r\n    )\r\n\r\nPrintout possibilities:\r\n\r\n    // Everything on one line\r\n\r\n    println(ans)\r\n\r\n    [[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]]]\r\n\r\n    // Each outer list on its own line\r\n\r\n    input.forEach(::println)  \r\n    \r\n    input.forEach { println(it) }\r\n    \r\n    for(list in input) {\r\n      println(list)\r\n    }\r\n\r\n    [[0, 0, 0], [0, 0, 0], [0, 0, 0]]\r\n    [[0, 0, 0], [0, 0, 0], [0, 0, 0]]\r\n    [[0, 0, 0], [0, 0, 0], [0, 0, 0]]\r\n\r\n    // Each inner list on its own line\r\n\r\n    input.forEachIndexed { index, outerList -&gt;\r\n      println(&quot;[&quot;)\r\n      outerList.forEach { innerList -&gt; println(&quot;  $innerList&quot;) }\r\n      print(&quot;]&quot;)\r\n      if (index == input.size - 1) println() else println(&quot;,&quot;)\r\n    }\r\n\r\n    [\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n    ],\r\n    [\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n    ],\r\n    [\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n    ]\r\n\r\n\r\n","title":"What can I use instead of joinToString to solve my problem","body":"<p>@Slaw gave the correct answer in a comment to @FeelFree's answer:</p>\n<pre><code>val ans = List(3) { List(3) { List(3) { 0 } } }\n</code></pre>\n<p>The mistake with the code in your question is that – as @Slaw commented below your question – you are not building a 3 x 3 x 3 list, but a 9 x 3 one.</p>\n<p>To built a 3 x 3 x 3 list 'manually' like in your question you would do:</p>\n<pre><code>val ans = listOf(\n  listOf(\n    listOf(0, 0, 0),\n    listOf(0, 0, 0),\n    listOf(0, 0, 0)\n  ),\n  listOf(\n    listOf(0, 0, 0),\n    listOf(0, 0, 0),\n    listOf(0, 0, 0)\n  ),\n  listOf(\n    listOf(0, 0, 0),\n    listOf(0, 0, 0),\n    listOf(0, 0, 0)\n  )\n)\n</code></pre>\n<p>Printout possibilities:</p>\n<pre><code>// Everything on one line\n\nprintln(ans)\n\n[[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]]]\n\n// Each outer list on its own line\n\ninput.forEach(::println)  \n\ninput.forEach { println(it) }\n\nfor(list in input) {\n  println(list)\n}\n\n[[0, 0, 0], [0, 0, 0], [0, 0, 0]]\n[[0, 0, 0], [0, 0, 0], [0, 0, 0]]\n[[0, 0, 0], [0, 0, 0], [0, 0, 0]]\n\n// Each inner list on its own line\n\ninput.forEachIndexed { index, outerList -&gt;\n  println(&quot;[&quot;)\n  outerList.forEach { innerList -&gt; println(&quot;  $innerList&quot;) }\n  print(&quot;]&quot;)\n  if (index == input.size - 1) println() else println(&quot;,&quot;)\n}\n\n[\n  [0, 0, 0]\n  [0, 0, 0]\n  [0, 0, 0]\n],\n[\n  [0, 0, 0]\n  [0, 0, 0]\n  [0, 0, 0]\n],\n[\n  [0, 0, 0]\n  [0, 0, 0]\n  [0, 0, 0]\n]\n</code></pre>\n"}],"owner":{"account_id":28327256,"reputation":5,"user_id":21662082,"display_name":"Artem Riabchikov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682850787,"creation_date":1682804858,"question_id":76138591,"body_markdown":"I got a task but I don&#39;t know how to solve it. \r\n\r\nCreate a 3x3x3 three-dimensional list that contains elements of type Int and is filled with zeros (0).\r\n\r\nPrint the list of lists in one string (just use `print()` or `println()` function).\r\n\r\nMy code is:\r\n\r\n```lang-kotlin\r\nfun main() {\r\n    var ans = mutableListOf(\r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0)\r\n    )\r\n    println(ans.joinToString(&quot;\\n&quot;)) \r\n}\r\n```\r\n\r\nBut it doesn&#39;t work correctly.","title":"What can I use instead of joinToString to solve my problem","body":"<p>I got a task but I don't know how to solve it.</p>\n<p>Create a 3x3x3 three-dimensional list that contains elements of type Int and is filled with zeros (0).</p>\n<p>Print the list of lists in one string (just use <code>print()</code> or <code>println()</code> function).</p>\n<p>My code is:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun main() {\n    var ans = mutableListOf(\n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0)\n    )\n    println(ans.joinToString(&quot;\\n&quot;)) \n}\n</code></pre>\n<p>But it doesn't work correctly.</p>\n"},{"tags":["java","awt"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1682849527,"post_id":76140586,"comment_id":134277096,"body_markdown":"actually, I don&#39;t quite understand why you are asking: the stacktrace tells you __exactly__ what&#39;s wrong where - the solution is to fix it :)","body":"actually, I don&#39;t quite understand why you are asking: the stacktrace tells you <b>exactly</b> what&#39;s wrong where - the solution is to fix it :)"}],"answers":[{"tags":[],"owner":{"account_id":17911752,"reputation":746,"user_id":13013715,"display_name":"STh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682848891,"creation_date":1682848891,"answer_id":76140630,"question_id":76140586,"body_markdown":"The error message indicates that you are trying to parse an empty String (`&quot;&quot;`) as an Integer with the method `Integer.parseInt` at line 282 of your code. You should check that the `val` that you are parsing includes at least one number before parsing it. ","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot; while adding two numbers in calculator using awt","body":"<p>The error message indicates that you are trying to parse an empty String (<code>&quot;&quot;</code>) as an Integer with the method <code>Integer.parseInt</code> at line 282 of your code. You should check that the <code>val</code> that you are parsing includes at least one number before parsing it.</p>\n"}],"owner":{"account_id":28462270,"reputation":1,"user_id":21778829,"display_name":"Tenny Xavier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1682932557,"answer_count":1,"score":-3,"last_activity_date":1682850786,"creation_date":1682848208,"question_id":76140586,"body_markdown":"I don&#39;t know why this error is caused here. I have the java code below.\r\n\r\nI was trying to make a calculator and whenever I try to add two numbers it shows this error:\r\n\r\n```none\r\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot;\r\n\r\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n    at java.lang.Integer.parseInt(Integer.java:592)\r\n    at java.lang.Integer.parseInt(Integer.java:615)\r\n    at calculator.actionPerformed(calculator.java:282)\r\n    at java.awt.Button.processActionEvent(Button.java:409)\r\n    at java.awt.Button.processEvent(Button.java:377)\r\n    at java.awt.Component.dispatchEventImpl(Component.java:4889)\r\n    at java.awt.Component.dispatchEvent(Component.java:4711)\r\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:760)\r\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\r\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\r\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\r\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:84)\r\n    at java.awt.EventQueue$4.run(EventQueue.java:733)\r\n    at java.awt.EventQueue$4.run(EventQueue.java:731)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\r\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:730)\r\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\r\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\r\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\r\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\r\n```\r\n\r\nThe Java code\r\n```java\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nclass calculator extends WindowAdapter implements ActionListener\r\n{\r\n\t//Variables\r\n\tint point=0,res=0,ractive=0,n1active=0,n2active=0,opactive=0,inc=0,lng=0;\r\n\tString val=&quot;&quot;,num1=&quot;&quot;,num2=&quot;&quot;;\r\n\t\r\n\t//Frame object\r\n\tFrame f=new Frame();\r\n\t\r\n\t//Text Box objects\r\n\tTextField t1=new TextField(255);\r\n\t\r\n\t//function Buttons \r\n\tButton bce=new Button(&quot;CE&quot;);\r\n\tButton bc=new Button(&quot;C&quot;);\r\n\tButton bba=new Button(&quot;Del&quot;);\r\n\tButton b1x=new Button(&quot;1/x&quot;);\r\n\tButton bx2=new Button(&quot;x^2&quot;);\r\n\tButton b2x=new Button(&quot;sqrt x&quot;);\r\n\t\r\n\t//Number Buttons\r\n\tButton b0=new Button(&quot;0&quot;);\r\n\tButton b1=new Button(&quot;1&quot;);\r\n\tButton b2=new Button(&quot;2&quot;);\r\n\tButton b3=new Button(&quot;3&quot;);\r\n\tButton b4=new Button(&quot;4&quot;);\r\n\tButton b5=new Button(&quot;5&quot;);\r\n\tButton b6=new Button(&quot;6&quot;);\r\n\tButton b7=new Button(&quot;7&quot;);\r\n\tButton b8=new Button(&quot;8&quot;);\r\n\tButton b9=new Button(&quot;9&quot;);\r\n\tButton bp=new Button(&quot;.&quot;);\r\n\tButton bnp=new Button(&quot;+/-&quot;);\r\n\t\r\n\t//Operator Buttons\r\n\tButton badd=new Button(&quot;+&quot;);\r\n\tButton bsub=new Button(&quot;-&quot;);\r\n\tButton bmul=new Button(&quot;X&quot;);\r\n\tButton bdiv=new Button(&quot;/&quot;);\r\n\tButton bres=new Button(&quot;=&quot;);\r\n\tButton bper=new Button(&quot;%&quot;);\r\n\t\r\n\tvoid Cal_UI()\r\n\t{\r\n\t\t//Text Box edits\r\n\t\tt1.setBounds(25,45,255,44);\r\n\t\t\r\n\t\t//Button Layer 1\r\n\t\tbper.setBounds(25,110,62,40);\r\n\t\t\tbper.addActionListener(this);\r\n\t\tbce.setBounds(87,110,62,40);\r\n\t\t\tbce.addActionListener(this);\r\n\t\tbc.setBounds(149,110,62,40);\r\n\t\t\tbc.addActionListener(this);\r\n\t\tbba.setBounds(211,110,62,40);\r\n\t\t\tbba.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 2\r\n\t\tb1x.setBounds(25,150,62,40);\r\n\t\t\tb1x.addActionListener(this);\r\n\t\tbx2.setBounds(87,150,62,40);\r\n\t\t\tbx2.addActionListener(this);\r\n\t\tb2x.setBounds(149,150,62,40);\r\n\t\t\tb2x.addActionListener(this);\r\n\t\tbdiv.setBounds(211,150,62,40);\r\n\t\t\tbdiv.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 3\r\n\t\tb7.setBounds(25,190,62,40);\r\n\t\t\tb7.addActionListener(this);\r\n\t\tb8.setBounds(87,190,62,40);\r\n\t\t\tb8.addActionListener(this);\r\n\t\tb9.setBounds(149,190,62,40);\r\n\t\t\tb9.addActionListener(this);\r\n\t\tbmul.setBounds(211,190,62,40);\r\n\t\t\tbmul.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 4\r\n\t\tb4.setBounds(25,230,62,40);\r\n\t\t\tb4.addActionListener(this);\r\n\t\tb5.setBounds(87,230,62,40);\r\n\t\t\tb5.addActionListener(this);\r\n\t\tb6.setBounds(149,230,62,40);\r\n\t\t\tb6.addActionListener(this);\r\n\t\tbsub.setBounds(211,230,62,40);\r\n\t\t\tbsub.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 5\r\n\t\tb1.setBounds(25,270,62,40);\r\n\t\t\tb1.addActionListener(this);\r\n\t\tb2.setBounds(87,270,62,40);\r\n\t\t\tb2.addActionListener(this);\r\n\t\tb3.setBounds(149,270,62,40);\r\n\t\t\tb3.addActionListener(this);\r\n\t\tbadd.setBounds(211,270,62,40);\r\n\t\t\tbadd.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 6\r\n\t\tbnp.setBounds(25,310,62,40);\r\n\t\t\tbnp.addActionListener(this);\r\n\t\tb0.setBounds(87,310,62,40);\r\n\t\t\tb0.addActionListener(this);\r\n\t\tbp.setBounds(149,310,62,40);\r\n\t\t\tbp.addActionListener(this);\r\n\t\tbres.setBounds(211,310,62,40);\r\n\t\t\tbres.addActionListener(this);\r\n\t\t\r\n\t\t//Frame addings\r\n\t\tf.add(t1);\r\n\t\tf.add(bper);\r\n\t\tf.add(bce);\r\n\t\tf.add(bc);\r\n\t\tf.add(bba);\r\n\t\tf.add(b1x);\r\n\t\tf.add(bx2);\r\n\t\tf.add(b2x);\r\n\t\tf.add(bdiv);\r\n\t\tf.add(b7);\r\n\t\tf.add(b8);\r\n\t\tf.add(b9);\r\n\t\tf.add(bmul);\r\n\t\tf.add(b4);\r\n\t\tf.add(b5);\r\n\t\tf.add(b6);\r\n\t\tf.add(bsub);\r\n\t\tf.add(b1);\r\n\t\tf.add(b2);\r\n\t\tf.add(b3);\r\n\t\tf.add(badd);\r\n\t\tf.add(bnp);\r\n\t\tf.add(b0);\r\n\t\tf.add(bp);\r\n\t\tf.add(bres);\r\n\t\t\r\n\t\t//Frame controls\r\n\t\tf.addWindowListener(this);\r\n\t\tf.setLayout(null);\r\n\t\tf.setSize(301,390);\r\n\t\tf.setTitle(&quot;Calculator&quot;);\r\n\t\tf.setVisible(true);\r\n\t}\r\n\t\r\n\tpublic void windowClosing(WindowEvent e)\r\n\t{\r\n\t\tf.dispose();\r\n\t}\r\n\t\r\n\tpublic void actionPerformed(ActionEvent ae)\r\n\t{\r\n\t\tif(ae.getSource()==b0)\r\n\t\t{\r\n\t\t\tval=val+&quot;0&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b1)\r\n\t\t{\r\n\t\t\tval=val+&quot;1&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b2)\r\n\t\t{\r\n\t\t\tval=val+&quot;2&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b3)\r\n\t\t{\r\n\t\t\tval=val+&quot;3&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b4)\r\n\t\t{\r\n\t\t\tval=val+&quot;4&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b5)\r\n\t\t{\r\n\t\t\tval=val+&quot;5&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b6)\r\n\t\t{\r\n\t\t\tval=val+&quot;6&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b7)\r\n\t\t{\r\n\t\t\tval=val+&quot;7&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b8)\r\n\t\t{\r\n\t\t\tval=val+&quot;8&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b9)\r\n\t\t{\r\n\t\t\tval=val+&quot;9&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bp)\r\n\t\t{\r\n\t\t\tif(point==0)\r\n\t\t\t{\r\n\t\t\t\tval=val+&quot;.&quot;;\r\n\t\t\t\tt1.setText(val);\r\n\t\t\t\tpoint++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==badd)\r\n\t\t{\r\n\t\t\tval=val+&quot;+&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bsub)\r\n\t\t{\r\n\t\t\tval=val+&quot;-&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bmul)\r\n\t\t{\r\n\t\t\tval=val+&quot;*&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bdiv)\r\n\t\t{\r\n\t\t\tval=val+&quot;/&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bc)\r\n\t\t{\r\n\t\t\tpoint=0;\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bres)\r\n\t\t{\r\n\t\t\tint len=val.length()-1;\r\n\t\t\tint i=0;\r\n\t\t\twhile(i&lt;len)\r\n\t\t\t{\r\n\t\t\t\tif(ractive==0)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(Character.isDigit(val.charAt(i)) &amp;&amp; opactive==0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnum1=num1+val.charAt(i);\r\n\t\t\t\t\t\tn1active=1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.charAt(i-inc)==&#39;+&#39; &amp;&amp; n1active==1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\t\tinc++;\r\n\t\t\t\t\t\t\tif(Character.isDigit(val.charAt(i))== false)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t\t\t\tlng=num2.length()-1;\r\n\t\t\t\t\t\t\t\tnum2=num2.substring(0,lng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tres=Integer.parseInt(num1)+Integer.parseInt(num2);\r\n\t\t\t\t\t\t\tractive=1;\r\n\t\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.charAt(i-inc)==&#39;-&#39; &amp;&amp; n1active==1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\t\tinc++;\r\n\t\t\t\t\t\t\tif(Character.isDigit(val.charAt(i))== false)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t\t\t\tlng=num2.length()-1;\r\n\t\t\t\t\t\t\t\tnum2=num2.substring(0,lng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tres=Integer.parseInt(num1)-Integer.parseInt(num2);\r\n\t\t\t\t\t\t\tractive=1;\r\n\t\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.charAt(i-inc)==&#39;*&#39; &amp;&amp; n1active==1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\t\tinc++;\r\n\t\t\t\t\t\t\tif(Character.isDigit(val.charAt(i))== false)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t\t\t\tlng=num2.length()-1;\r\n\t\t\t\t\t\t\t\tnum2=num2.substring(0,lng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tres=Integer.parseInt(num1)*Integer.parseInt(num2);\r\n\t\t\t\t\t\t\tractive=1;\r\n\t\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.charAt(i-inc)==&#39;/&#39; &amp;&amp; n1active==1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\t\tinc++;\r\n\t\t\t\t\t\t\tif(Character.isDigit(val.charAt(i))== false)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t\t\t\tlng=num2.length()-1;\r\n\t\t\t\t\t\t\t\tnum2=num2.substring(0,lng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tres=Integer.parseInt(num1)/Integer.parseInt(num2);\r\n\t\t\t\t\t\t\tractive=1;\r\n\t\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(ractive==1)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(Character.isDigit(val.charAt(i)))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(val.charAt(i)==&#39;+&#39;)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tres=res+Integer.parseInt(num2);\r\n\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(val.charAt(i)==&#39;-&#39;)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tres=res-Integer.parseInt(num2);\r\n\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(val.charAt(i)==&#39;*&#39;)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tres=res*Integer.parseInt(num2);\r\n\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(val.charAt(i)==&#39;/&#39;)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tres=res/Integer.parseInt(num2);\r\n\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tt1.setText(String.valueOf(res));\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void main(String args[])\r\n\t{\r\n\t\tcalculator ob=new calculator();\r\n\t\tob.Cal_UI();\r\n\t}\r\n}\r\n```","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot; while adding two numbers in calculator using awt","body":"<p>I don't know why this error is caused here. I have the java code below.</p>\n<p>I was trying to make a calculator and whenever I try to add two numbers it shows this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot;\n\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Integer.parseInt(Integer.java:592)\n    at java.lang.Integer.parseInt(Integer.java:615)\n    at calculator.actionPerformed(calculator.java:282)\n    at java.awt.Button.processActionEvent(Button.java:409)\n    at java.awt.Button.processEvent(Button.java:377)\n    at java.awt.Component.dispatchEventImpl(Component.java:4889)\n    at java.awt.Component.dispatchEvent(Component.java:4711)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:760)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:84)\n    at java.awt.EventQueue$4.run(EventQueue.java:733)\n    at java.awt.EventQueue$4.run(EventQueue.java:731)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:730)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\n</code></pre>\n<p>The Java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.*;\nimport java.awt.event.*;\nclass calculator extends WindowAdapter implements ActionListener\n{\n    //Variables\n    int point=0,res=0,ractive=0,n1active=0,n2active=0,opactive=0,inc=0,lng=0;\n    String val=&quot;&quot;,num1=&quot;&quot;,num2=&quot;&quot;;\n    \n    //Frame object\n    Frame f=new Frame();\n    \n    //Text Box objects\n    TextField t1=new TextField(255);\n    \n    //function Buttons \n    Button bce=new Button(&quot;CE&quot;);\n    Button bc=new Button(&quot;C&quot;);\n    Button bba=new Button(&quot;Del&quot;);\n    Button b1x=new Button(&quot;1/x&quot;);\n    Button bx2=new Button(&quot;x^2&quot;);\n    Button b2x=new Button(&quot;sqrt x&quot;);\n    \n    //Number Buttons\n    Button b0=new Button(&quot;0&quot;);\n    Button b1=new Button(&quot;1&quot;);\n    Button b2=new Button(&quot;2&quot;);\n    Button b3=new Button(&quot;3&quot;);\n    Button b4=new Button(&quot;4&quot;);\n    Button b5=new Button(&quot;5&quot;);\n    Button b6=new Button(&quot;6&quot;);\n    Button b7=new Button(&quot;7&quot;);\n    Button b8=new Button(&quot;8&quot;);\n    Button b9=new Button(&quot;9&quot;);\n    Button bp=new Button(&quot;.&quot;);\n    Button bnp=new Button(&quot;+/-&quot;);\n    \n    //Operator Buttons\n    Button badd=new Button(&quot;+&quot;);\n    Button bsub=new Button(&quot;-&quot;);\n    Button bmul=new Button(&quot;X&quot;);\n    Button bdiv=new Button(&quot;/&quot;);\n    Button bres=new Button(&quot;=&quot;);\n    Button bper=new Button(&quot;%&quot;);\n    \n    void Cal_UI()\n    {\n        //Text Box edits\n        t1.setBounds(25,45,255,44);\n        \n        //Button Layer 1\n        bper.setBounds(25,110,62,40);\n            bper.addActionListener(this);\n        bce.setBounds(87,110,62,40);\n            bce.addActionListener(this);\n        bc.setBounds(149,110,62,40);\n            bc.addActionListener(this);\n        bba.setBounds(211,110,62,40);\n            bba.addActionListener(this);\n        \n        //Button Layer 2\n        b1x.setBounds(25,150,62,40);\n            b1x.addActionListener(this);\n        bx2.setBounds(87,150,62,40);\n            bx2.addActionListener(this);\n        b2x.setBounds(149,150,62,40);\n            b2x.addActionListener(this);\n        bdiv.setBounds(211,150,62,40);\n            bdiv.addActionListener(this);\n        \n        //Button Layer 3\n        b7.setBounds(25,190,62,40);\n            b7.addActionListener(this);\n        b8.setBounds(87,190,62,40);\n            b8.addActionListener(this);\n        b9.setBounds(149,190,62,40);\n            b9.addActionListener(this);\n        bmul.setBounds(211,190,62,40);\n            bmul.addActionListener(this);\n        \n        //Button Layer 4\n        b4.setBounds(25,230,62,40);\n            b4.addActionListener(this);\n        b5.setBounds(87,230,62,40);\n            b5.addActionListener(this);\n        b6.setBounds(149,230,62,40);\n            b6.addActionListener(this);\n        bsub.setBounds(211,230,62,40);\n            bsub.addActionListener(this);\n        \n        //Button Layer 5\n        b1.setBounds(25,270,62,40);\n            b1.addActionListener(this);\n        b2.setBounds(87,270,62,40);\n            b2.addActionListener(this);\n        b3.setBounds(149,270,62,40);\n            b3.addActionListener(this);\n        badd.setBounds(211,270,62,40);\n            badd.addActionListener(this);\n        \n        //Button Layer 6\n        bnp.setBounds(25,310,62,40);\n            bnp.addActionListener(this);\n        b0.setBounds(87,310,62,40);\n            b0.addActionListener(this);\n        bp.setBounds(149,310,62,40);\n            bp.addActionListener(this);\n        bres.setBounds(211,310,62,40);\n            bres.addActionListener(this);\n        \n        //Frame addings\n        f.add(t1);\n        f.add(bper);\n        f.add(bce);\n        f.add(bc);\n        f.add(bba);\n        f.add(b1x);\n        f.add(bx2);\n        f.add(b2x);\n        f.add(bdiv);\n        f.add(b7);\n        f.add(b8);\n        f.add(b9);\n        f.add(bmul);\n        f.add(b4);\n        f.add(b5);\n        f.add(b6);\n        f.add(bsub);\n        f.add(b1);\n        f.add(b2);\n        f.add(b3);\n        f.add(badd);\n        f.add(bnp);\n        f.add(b0);\n        f.add(bp);\n        f.add(bres);\n        \n        //Frame controls\n        f.addWindowListener(this);\n        f.setLayout(null);\n        f.setSize(301,390);\n        f.setTitle(&quot;Calculator&quot;);\n        f.setVisible(true);\n    }\n    \n    public void windowClosing(WindowEvent e)\n    {\n        f.dispose();\n    }\n    \n    public void actionPerformed(ActionEvent ae)\n    {\n        if(ae.getSource()==b0)\n        {\n            val=val+&quot;0&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b1)\n        {\n            val=val+&quot;1&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b2)\n        {\n            val=val+&quot;2&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b3)\n        {\n            val=val+&quot;3&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b4)\n        {\n            val=val+&quot;4&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b5)\n        {\n            val=val+&quot;5&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b6)\n        {\n            val=val+&quot;6&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b7)\n        {\n            val=val+&quot;7&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b8)\n        {\n            val=val+&quot;8&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b9)\n        {\n            val=val+&quot;9&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bp)\n        {\n            if(point==0)\n            {\n                val=val+&quot;.&quot;;\n                t1.setText(val);\n                point++;\n            }\n        }\n        \n        if(ae.getSource()==badd)\n        {\n            val=val+&quot;+&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bsub)\n        {\n            val=val+&quot;-&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bmul)\n        {\n            val=val+&quot;*&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bdiv)\n        {\n            val=val+&quot;/&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bc)\n        {\n            point=0;\n        }\n        \n        if(ae.getSource()==bres)\n        {\n            int len=val.length()-1;\n            int i=0;\n            while(i&lt;len)\n            {\n                if(ractive==0)\n                {\n                    if(Character.isDigit(val.charAt(i)) &amp;&amp; opactive==0)\n                    {\n                        num1=num1+val.charAt(i);\n                        n1active=1;\n                    }\n                    \n                    if(val.charAt(i-inc)=='+' &amp;&amp; n1active==1)\n                    {\n                        if(n1active==1 &amp;&amp; n2active==0)\n                        {\n                            num2=num2+val.charAt(i);\n                            inc++;\n                            if(Character.isDigit(val.charAt(i))== false)\n                            {\n                                n2active=1;\n                                lng=num2.length()-1;\n                                num2=num2.substring(0,lng);\n                            }\n                        }\n                        \n                        if(n1active==1 &amp;&amp; n2active==1)\n                        {\n                            res=Integer.parseInt(num1)+Integer.parseInt(num2);\n                            ractive=1;\n                            num2=&quot;&quot;;\n                        }                       \n                    }\n                    \n                    if(val.charAt(i-inc)=='-' &amp;&amp; n1active==1)\n                    {\n                        if(n1active==1 &amp;&amp; n2active==0)\n                        {\n                            num2=num2+val.charAt(i);\n                            inc++;\n                            if(Character.isDigit(val.charAt(i))== false)\n                            {\n                                n2active=1;\n                                lng=num2.length()-1;\n                                num2=num2.substring(0,lng);\n                            }\n                        }\n                        \n                        if(n1active==1 &amp;&amp; n2active==1)\n                        {\n                            res=Integer.parseInt(num1)-Integer.parseInt(num2);\n                            ractive=1;\n                            num2=&quot;&quot;;\n                        }\n                    }\n                    \n                    if(val.charAt(i-inc)=='*' &amp;&amp; n1active==1)\n                    {\n                        if(n1active==1 &amp;&amp; n2active==0)\n                        {\n                            num2=num2+val.charAt(i);\n                            inc++;\n                            if(Character.isDigit(val.charAt(i))== false)\n                            {\n                                n2active=1;\n                                lng=num2.length()-1;\n                                num2=num2.substring(0,lng);\n                            }\n                        }\n                        \n                        if(n1active==1 &amp;&amp; n2active==1)\n                        {\n                            res=Integer.parseInt(num1)*Integer.parseInt(num2);\n                            ractive=1;\n                            num2=&quot;&quot;;\n                        }\n                    }\n                    \n                    if(val.charAt(i-inc)=='/' &amp;&amp; n1active==1)\n                    {\n                        if(n1active==1 &amp;&amp; n2active==0)\n                        {\n                            num2=num2+val.charAt(i);\n                            inc++;\n                            if(Character.isDigit(val.charAt(i))== false)\n                            {\n                                n2active=1;\n                                lng=num2.length()-1;\n                                num2=num2.substring(0,lng);\n                            }\n                        }\n                        \n                        if(n1active==1 &amp;&amp; n2active==1)\n                        {\n                            res=Integer.parseInt(num1)/Integer.parseInt(num2);\n                            ractive=1;\n                            num2=&quot;&quot;;\n                        }\n                    }\n                }\n                \n                if(ractive==1)\n                {\n                    if(Character.isDigit(val.charAt(i)))\n                    {\n                        num2=num2+val.charAt(i);\n                        n2active=1;\n                    }\n                    if(val.charAt(i)=='+')\n                    {\n                        res=res+Integer.parseInt(num2);\n                        num2=&quot;&quot;;\n                    }\n                    if(val.charAt(i)=='-')\n                    {\n                        res=res-Integer.parseInt(num2);\n                        num2=&quot;&quot;;\n                    }\n                    if(val.charAt(i)=='*')\n                    {\n                        res=res*Integer.parseInt(num2);\n                        num2=&quot;&quot;;\n                    }\n                    if(val.charAt(i)=='/')\n                    {\n                        res=res/Integer.parseInt(num2);\n                        num2=&quot;&quot;;\n                    }\n                }\n                i++;\n            }\n            t1.setText(String.valueOf(res));\n        }\n    }\n    \n    public static void main(String args[])\n    {\n        calculator ob=new calculator();\n        ob.Cal_UI();\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","threadpool","executorservice","java.util.concurrent"],"answers":[{"comments":[{"owner":{"account_id":3140433,"reputation":1296,"user_id":2655988,"accept_rate":30,"display_name":"Nishit"},"score":2,"creation_date":1550816833,"post_id":17958081,"comment_id":96417429,"body_markdown":"&quot;A CachedThreadPool is exactly what you should use for your situation as there are no negative consequence to using one for long running threads&quot;. I don&#39;t think I agree. CachedThreadPool dynamically creates threads with no upper limit. Long running tasks on a large number of threads can potentially hog all the resources. Also, having more threads than ideal can result in too many resources wasted on context switching of these threads. Although you explained at the end of the answer that custom throttling is required, the beginning of the answer is a bit misleading.","body":"&quot;A CachedThreadPool is exactly what you should use for your situation as there are no negative consequence to using one for long running threads&quot;. I don&#39;t think I agree. CachedThreadPool dynamically creates threads with no upper limit. Long running tasks on a large number of threads can potentially hog all the resources. Also, having more threads than ideal can result in too many resources wasted on context switching of these threads. Although you explained at the end of the answer that custom throttling is required, the beginning of the answer is a bit misleading."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1564603957,"post_id":17958081,"comment_id":101090443,"body_markdown":"Why not simply create a bounded `ThreadPoolExecutor` like `ThreadPoolExecutor(0, maximumPoolSize, 60L, TimeUnit.SECONDS, SynchronousQueue())`?","body":"Why not simply create a bounded <code>ThreadPoolExecutor</code> like <code>ThreadPoolExecutor(0, maximumPoolSize, 60L, TimeUnit.SECONDS, SynchronousQueue())</code>?"}],"tags":[],"owner":{"account_id":1075870,"reputation":7152,"user_id":1074041,"accept_rate":100,"display_name":"Trevor Freeman"},"comment_count":2,"down_vote_count":0,"up_vote_count":125,"is_accepted":true,"score":125,"last_activity_date":1631300816,"creation_date":1375221038,"answer_id":17958081,"question_id":17957382,"body_markdown":"A `CachedThreadPool` seems appropriate for your situation as there are no negative consequence to using one for long running threads directly.  The comment in the java doc about CachedThreadPools being suitable for short tasks merely suggest that they are particularly appropriate for such cases, not that they cannot be used for long running tasks.\r\n\r\nThe main concern with a `CachedThreadPool` is that it will create up to `Integer.MAX_VALUE` number of threads as it will always spawn a new thread if an unused one does not exist in the cache.  So if you have long running tasks it is then more likely that you could grow the number of concurrent threads more than you desire since this type of thread pool will not limit how many execute concurrently itself.  This does not seem to be a problem for your use case as described, but it is something to be aware of.\r\n\r\nTo elaborate further on the difference between a `CachedThreadPool` and a `FixedThreadPool`, [Executors.newCachedThreadPool][1] and [Executors.newFixedThreadPool][2] are both backed by the same thread pool implementation (at least in the open JDK) via an instance of `ThreadPoolExecutor`, just with different parameters.  The differences just being their thread minimum, maximum, thread kill time, and queue type.\r\n\r\n    public static ExecutorService newFixedThreadPool(int nThreads) {\r\n         return new ThreadPoolExecutor(nThreads, nThreads,\r\n                                       0L, TimeUnit.MILLISECONDS,\r\n                                       new LinkedBlockingQueue&lt;Runnable&gt;());\r\n     }\r\n\r\n    public static ExecutorService newCachedThreadPool() {\r\n        return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\r\n                                     60L, TimeUnit.SECONDS,\r\n                                     new SynchronousQueue&lt;Runnable&gt;());\r\n    }\r\n\r\nA `FixedThreadPool` does have its advantages when you do in fact want to work with a fixed number of threads, since then you can submit any number of tasks to the executor service while knowing that the number of threads will be maintained at the level you specified.  If you explicitly want to grow the number of threads, then this is not the appropriate choice.\r\n\r\nThis does however mean that the one issue that you may have with the `CachedThreadPool` is in regards to limiting the number of threads that are running concurrently.  The `CachedThreadPool` will not limit them for you, so you may need to write your own code to ensure that you do not run too many threads, which you can do relatively easily by instantiating your own `ThreadPoolExecutor` with your desired behaviour characteristics.  This really depends on the design of your application and how tasks are submitted to the executor service.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29","title":"FixedThreadPool vs CachedThreadPool: the lesser of two evils","body":"<p>A <code>CachedThreadPool</code> seems appropriate for your situation as there are no negative consequence to using one for long running threads directly.  The comment in the java doc about CachedThreadPools being suitable for short tasks merely suggest that they are particularly appropriate for such cases, not that they cannot be used for long running tasks.</p>\n<p>The main concern with a <code>CachedThreadPool</code> is that it will create up to <code>Integer.MAX_VALUE</code> number of threads as it will always spawn a new thread if an unused one does not exist in the cache.  So if you have long running tasks it is then more likely that you could grow the number of concurrent threads more than you desire since this type of thread pool will not limit how many execute concurrently itself.  This does not seem to be a problem for your use case as described, but it is something to be aware of.</p>\n<p>To elaborate further on the difference between a <code>CachedThreadPool</code> and a <code>FixedThreadPool</code>, <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29\" rel=\"noreferrer\">Executors.newCachedThreadPool</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29\" rel=\"noreferrer\">Executors.newFixedThreadPool</a> are both backed by the same thread pool implementation (at least in the open JDK) via an instance of <code>ThreadPoolExecutor</code>, just with different parameters.  The differences just being their thread minimum, maximum, thread kill time, and queue type.</p>\n<pre><code>public static ExecutorService newFixedThreadPool(int nThreads) {\n     return new ThreadPoolExecutor(nThreads, nThreads,\n                                   0L, TimeUnit.MILLISECONDS,\n                                   new LinkedBlockingQueue&lt;Runnable&gt;());\n }\n\npublic static ExecutorService newCachedThreadPool() {\n    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\n                                 60L, TimeUnit.SECONDS,\n                                 new SynchronousQueue&lt;Runnable&gt;());\n}\n</code></pre>\n<p>A <code>FixedThreadPool</code> does have its advantages when you do in fact want to work with a fixed number of threads, since then you can submit any number of tasks to the executor service while knowing that the number of threads will be maintained at the level you specified.  If you explicitly want to grow the number of threads, then this is not the appropriate choice.</p>\n<p>This does however mean that the one issue that you may have with the <code>CachedThreadPool</code> is in regards to limiting the number of threads that are running concurrently.  The <code>CachedThreadPool</code> will not limit them for you, so you may need to write your own code to ensure that you do not run too many threads, which you can do relatively easily by instantiating your own <code>ThreadPoolExecutor</code> with your desired behaviour characteristics.  This really depends on the design of your application and how tasks are submitted to the executor service.</p>\n"},{"comments":[{"owner":{"account_id":7553209,"reputation":684,"user_id":5733899,"accept_rate":81,"display_name":"Crosk Cool"},"score":0,"creation_date":1544444735,"post_id":34793132,"comment_id":94265835,"body_markdown":"What if someone decides to use commonPool?","body":"What if someone decides to use commonPool?"},{"owner":{"account_id":5065728,"reputation":459,"user_id":4065865,"display_name":"Ayaskant"},"score":1,"creation_date":1562758332,"post_id":34793132,"comment_id":100476072,"body_markdown":"@Ravindra - You have beautifully explained the cons of both CachedThreadPool and FixedThreadPool. This shows you have got a deep understanding of the concurrency package.","body":"@Ravindra - You have beautifully explained the cons of both CachedThreadPool and FixedThreadPool. This shows you have got a deep understanding of the concurrency package."},{"owner":{"account_id":1952214,"reputation":551,"user_id":1756069,"display_name":"garnet"},"score":1,"creation_date":1623421557,"post_id":34793132,"comment_id":120082402,"body_markdown":"The same is explained in detail in https://www.baeldung.com/java-executors-cached-fixed-threadpool, especially, the section https://www.baeldung.com/java-executors-cached-fixed-threadpool#unfortunate-similarities.","body":"The same is explained in detail in <a href=\"https://www.baeldung.com/java-executors-cached-fixed-threadpool\" rel=\"nofollow noreferrer\">baeldung.com/java-executors-cached-fixed-threadpool</a>, especially, the section <a href=\"https://www.baeldung.com/java-executors-cached-fixed-threadpool#unfortunate-similarities\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>."}],"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":3,"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1682849827,"creation_date":1452784801,"answer_id":34793132,"question_id":17957382,"body_markdown":"Both `FixedThreadPool` and `CachedThreadPool` are evils in highly loaded applications. \r\n\r\n`CachedThreadPool` is more dangerous than `FixedThreadPool`\r\n\r\nIf your application is highly loaded &amp; demands low latency, better to get rid of both options due to below drawbacks\r\n\r\n1. Unbounded nature of task queue : It may cause out of memory or high latency\r\n2. Long running threads will cause `CachedThreadPool` to go out of control on Thread creation\r\n\r\nSince you know that both are evils, lesser evil doesn&#39;t do any good. \r\n\r\n\r\nPrefer [ThreadPoolExecutor][1], which provides granular control on many parameters. ( from docs.oracle.com)\r\n\r\n&gt;1. Set the task queue as bounded queue to have better control\r\n&gt;2. Have right RejectionHandler - Your own RejectionHandler or Default handlers provided by JDK\r\n&gt;3. If you have something to do on before/after completion of task, override `beforeExecute(Thread, Runnable)` and `afterExecute(Runnable, Throwable)`\r\n&gt;4. Override [ThreadFactory][2], if thread customization is required \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadFactory.html","title":"FixedThreadPool vs CachedThreadPool: the lesser of two evils","body":"<p>Both <code>FixedThreadPool</code> and <code>CachedThreadPool</code> are evils in highly loaded applications.</p>\n<p><code>CachedThreadPool</code> is more dangerous than <code>FixedThreadPool</code></p>\n<p>If your application is highly loaded &amp; demands low latency, better to get rid of both options due to below drawbacks</p>\n<ol>\n<li>Unbounded nature of task queue : It may cause out of memory or high latency</li>\n<li>Long running threads will cause <code>CachedThreadPool</code> to go out of control on Thread creation</li>\n</ol>\n<p>Since you know that both are evils, lesser evil doesn't do any good.</p>\n<p>Prefer <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"nofollow noreferrer\">ThreadPoolExecutor</a>, which provides granular control on many parameters. ( from docs.oracle.com)</p>\n<blockquote>\n<ol>\n<li>Set the task queue as bounded queue to have better control</li>\n<li>Have right RejectionHandler - Your own RejectionHandler or Default handlers provided by JDK</li>\n<li>If you have something to do on before/after completion of task, override <code>beforeExecute(Thread, Runnable)</code> and <code>afterExecute(Runnable, Throwable)</code></li>\n<li>Override <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadFactory.html\" rel=\"nofollow noreferrer\">ThreadFactory</a>, if thread customization is required</li>\n</ol>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1270857,"reputation":13636,"user_id":1227166,"accept_rate":55,"display_name":"Michel Feinstein"},"score":0,"creation_date":1492739501,"post_id":37858638,"comment_id":74117605,"body_markdown":"Sometimes there isn&#39;t a better choice, you could just have 1 CPU core but if you are running a server where every user request would trigger a thread to process the request, there won&#39;t be any other reasonable choice, specially if you plan to scale the server once you grow your user base.","body":"Sometimes there isn&#39;t a better choice, you could just have 1 CPU core but if you are running a server where every user request would trigger a thread to process the request, there won&#39;t be any other reasonable choice, specially if you plan to scale the server once you grow your user base."},{"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"score":0,"creation_date":1492759545,"post_id":37858638,"comment_id":74125000,"body_markdown":"@mFeinstein How can one not have a choice if one is in the position to choose a thread pool implementation? In your example with 1 CPU core only spawning more threads simply doesn&#39;t make any sense, it&#39;s fitting perfectly to my example using a FixedThreadPool. That scales easily as well, first with on or two worker threads, later with 10 or 15 depending on the number of cores.","body":"@mFeinstein How can one not have a choice if one is in the position to choose a thread pool implementation? In your example with 1 CPU core only spawning more threads simply doesn&#39;t make any sense, it&#39;s fitting perfectly to my example using a FixedThreadPool. That scales easily as well, first with on or two worker threads, later with 10 or 15 depending on the number of cores."},{"owner":{"account_id":1270857,"reputation":13636,"user_id":1227166,"accept_rate":55,"display_name":"Michel Feinstein"},"score":2,"creation_date":1492759926,"post_id":37858638,"comment_id":74125259,"body_markdown":"The vast majority of the web servers implementations will create one new thread for each new HTTP request... They won&#39;t care about how many actual cores the machine have, this makes the implementation more simple and easier to scale. This applies to many other designs where you just want to code once and deploy, and not have to recompile and redeploy if you change the machine, which could be a cloud instance.","body":"The vast majority of the web servers implementations will create one new thread for each new HTTP request... They won&#39;t care about how many actual cores the machine have, this makes the implementation more simple and easier to scale. This applies to many other designs where you just want to code once and deploy, and not have to recompile and redeploy if you change the machine, which could be a cloud instance."},{"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"score":0,"creation_date":1492760614,"post_id":37858638,"comment_id":74125686,"body_markdown":"@mFeinstein Most web servers use thread pools for requests on their own, simply because spawning threads which can&#39;t run doesn&#39;t make sense, or they use event loops for connections and process the requests in pools afterwards or such. Additionally, you are missing the point, which is that the question is about one being able to choose the correct thread pool and spawning threads which can&#39;t run anyways still doesn&#39;t make sense. A FixedthreadPool configured to a reasonable amount of threads per machine depending on cores scales just fine.","body":"@mFeinstein Most web servers use thread pools for requests on their own, simply because spawning threads which can&#39;t run doesn&#39;t make sense, or they use event loops for connections and process the requests in pools afterwards or such. Additionally, you are missing the point, which is that the question is about one being able to choose the correct thread pool and spawning threads which can&#39;t run anyways still doesn&#39;t make sense. A FixedthreadPool configured to a reasonable amount of threads per machine depending on cores scales just fine."},{"owner":{"account_id":1270857,"reputation":13636,"user_id":1227166,"accept_rate":55,"display_name":"Michel Feinstein"},"score":0,"creation_date":1492761320,"post_id":37858638,"comment_id":74126128,"body_markdown":"Well Tomcat I am pretty sure uses 1 thread per request. Although I understand your point, I would rather make a code that runs fine on any machine and scales nicely without my interference... Unless it was very performance demanding then I would go and fine tune it for my current machine.","body":"Well Tomcat I am pretty sure uses 1 thread per request. Although I understand your point, I would rather make a code that runs fine on any machine and scales nicely without my interference... Unless it was very performance demanding then I would go and fine tune it for my current machine."},{"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"score":0,"creation_date":1492762116,"post_id":37858638,"comment_id":74126563,"body_markdown":"@mFeinstein Regarding Tomcat: http://stackoverflow.com/a/33241110/2055163 And regarding your code, then simply check how many cores are available or provide some configuration and forward that value to FixedThreadPool. The latter is the best anyway, because it provides admins full control.","body":"@mFeinstein Regarding Tomcat: <a href=\"http://stackoverflow.com/a/33241110/2055163\">stackoverflow.com/a/33241110/2055163</a> And regarding your code, then simply check how many cores are available or provide some configuration and forward that value to FixedThreadPool. The latter is the best anyway, because it provides admins full control."},{"owner":{"account_id":1270857,"reputation":13636,"user_id":1227166,"accept_rate":55,"display_name":"Michel Feinstein"},"score":0,"creation_date":1492765917,"post_id":37858638,"comment_id":74128978,"body_markdown":"I agree there will be performance improvements, but it&#39;s good to know that this way some users will have a faster response and others might wait for while for a server response, since their request might get to a queue... Whereas in the original installation all the users will have the same experience, good or bad....I am just pointing out the differences, not making any recommendations","body":"I agree there will be performance improvements, but it&#39;s good to know that this way some users will have a faster response and others might wait for while for a server response, since their request might get to a queue... Whereas in the original installation all the users will have the same experience, good or bad....I am just pointing out the differences, not making any recommendations"},{"owner":{"account_id":1252466,"reputation":79549,"user_id":1212596,"accept_rate":52,"display_name":"Paul Draper"},"score":8,"creation_date":1512076340,"post_id":37858638,"comment_id":82122996,"body_markdown":"@ThorstenSch&#246;ning, having 50 CPU-bound threads on a 2-core machine is unhelpful. Having 50 IO-bound threads on a 2-core machine can be very helpful.","body":"@ThorstenSch&#246;ning, having 50 CPU-bound threads on a 2-core machine is unhelpful. Having 50 IO-bound threads on a 2-core machine can be very helpful."}],"tags":[],"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"comment_count":8,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1468146683,"creation_date":1466078566,"answer_id":37858638,"question_id":17957382,"body_markdown":"&gt; So I have a program that spawns threads (~5-150) which perform a bunch of tasks.\r\n\r\nAre you sure you understand how threads are actually processed by your OS and hardware of choice? How Java maps threads to OS threads, how that maps threads to CPU threads etc.? I&#39;m asking because creating 150 threads within in ONE JRE only makes sense if you have massive CPU cores/threads underneath, which most likely is not the case. Depending on the OS and RAM in use, creating more than n threads might even result in your JRE being terminated because of OOM errors.  So you should really distinguish between threads and work to do by those threads, how many work you are even able to process etc.\r\n\r\nAnd that&#39;s the problem with CachedThreadPool: It doesn&#39;t make sense to queue up long running work in threads which actually can&#39;t run because you only have 2 CPU cores able to process those threads. If you end up with 150 scheduled threads you might create a lot of unnecessary overhead for the schedulers used within Java and the OS to concurrently process them. This is simply impossible if you only have 2 CPU cores, unless your threads are waiting for I/O or such all the time. But even in that case a lot of threads would create a lot of I/O...\r\n\r\nAnd that problem doesn&#39;t occur with FixedThreadPool, created with e.g. 2+n threads, where n is reasonable low of course, because with that hardware and OS resources are used with far less overhead for managing threads which can&#39;t run anyway.","title":"FixedThreadPool vs CachedThreadPool: the lesser of two evils","body":"<blockquote>\n  <p>So I have a program that spawns threads (~5-150) which perform a bunch of tasks.</p>\n</blockquote>\n\n<p>Are you sure you understand how threads are actually processed by your OS and hardware of choice? How Java maps threads to OS threads, how that maps threads to CPU threads etc.? I'm asking because creating 150 threads within in ONE JRE only makes sense if you have massive CPU cores/threads underneath, which most likely is not the case. Depending on the OS and RAM in use, creating more than n threads might even result in your JRE being terminated because of OOM errors.  So you should really distinguish between threads and work to do by those threads, how many work you are even able to process etc.</p>\n\n<p>And that's the problem with CachedThreadPool: It doesn't make sense to queue up long running work in threads which actually can't run because you only have 2 CPU cores able to process those threads. If you end up with 150 scheduled threads you might create a lot of unnecessary overhead for the schedulers used within Java and the OS to concurrently process them. This is simply impossible if you only have 2 CPU cores, unless your threads are waiting for I/O or such all the time. But even in that case a lot of threads would create a lot of I/O...</p>\n\n<p>And that problem doesn't occur with FixedThreadPool, created with e.g. 2+n threads, where n is reasonable low of course, because with that hardware and OS resources are used with far less overhead for managing threads which can't run anyway.</p>\n"}],"owner":{"account_id":1529447,"reputation":2425,"user_id":1427033,"accept_rate":82,"display_name":"Daniel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88926,"favorite_count":0,"down_vote_count":0,"up_vote_count":110,"accepted_answer_id":17958081,"answer_count":3,"score":110,"last_activity_date":1682849827,"creation_date":1375218309,"question_id":17957382,"body_markdown":"I have a program that spawns threads (~5-150) which perform a bunch of tasks. Originally, I used a `FixedThreadPool` because [this similar question][1] suggested they were better suited for longer lived tasks and with my very limited knowledge of multithreading, I considered the average life of the threads (several minutes) &quot;*long lived*&quot;.\r\n\r\nHowever, I recently added the capability to spawn additional threads and doing so takes me above the thread limit I set. In this case, would it be better to guess and increase the number threads I can allow or to switch to a `CachedThreadPool` so I have no wasted threads?\r\n\r\nTrying them both out preliminarily, there doesn&#39;t *seem* to be a difference so I&#39;m inclined to go with the `CachedThreadPool` just to avoid the waste. However, does the life span of the threads mean I should instead picked a `FixedThreadPool` and just deal with the unused threads? [This question][2] makes it seem like those extra threads aren&#39;t wasted but I would appreciate the clarification.\r\n\r\n  [1]: https://stackoverflow.com/questions/949355/newcachedthreadpool-v-s-newfixedthreadpool\r\n  [2]: https://stackoverflow.com/questions/13110313/java-fixedthreadpool-with-known-pool-size-but-unknown-workers\r\n","title":"FixedThreadPool vs CachedThreadPool: the lesser of two evils","body":"<p>I have a program that spawns threads (~5-150) which perform a bunch of tasks. Originally, I used a <code>FixedThreadPool</code> because <a href=\"https://stackoverflow.com/questions/949355/newcachedthreadpool-v-s-newfixedthreadpool\">this similar question</a> suggested they were better suited for longer lived tasks and with my very limited knowledge of multithreading, I considered the average life of the threads (several minutes) \"<em>long lived</em>\".</p>\n\n<p>However, I recently added the capability to spawn additional threads and doing so takes me above the thread limit I set. In this case, would it be better to guess and increase the number threads I can allow or to switch to a <code>CachedThreadPool</code> so I have no wasted threads?</p>\n\n<p>Trying them both out preliminarily, there doesn't <em>seem</em> to be a difference so I'm inclined to go with the <code>CachedThreadPool</code> just to avoid the waste. However, does the life span of the threads mean I should instead picked a <code>FixedThreadPool</code> and just deal with the unused threads? <a href=\"https://stackoverflow.com/questions/13110313/java-fixedthreadpool-with-known-pool-size-but-unknown-workers\">This question</a> makes it seem like those extra threads aren't wasted but I would appreciate the clarification.</p>\n"},{"tags":["java","intellij-idea","dependencies","sbt","akka"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1682891379,"post_id":76136779,"comment_id":134282335,"body_markdown":"I just created a `new sbt project` in my Intellij (latest version), copy pasted your `build.sbt` and copy pasted the `hello world` example from [Introduction to Actors](https://doc.akka.io/docs/akka/current/typed/actors.html). Everything looks fine and I was able to execute it without any issue. Are those libraries listed in the `project explorer` tab in the `External Libraries` section? Maybe you can check the `project structure` menu what libraries are being imported","body":"I just created a <code>new sbt project</code> in my Intellij (latest version), copy pasted your <code>build.sbt</code> and copy pasted the <code>hello world</code> example from <a href=\"https://doc.akka.io/docs/akka/current/typed/actors.html\" rel=\"nofollow noreferrer\">Introduction to Actors</a>. Everything looks fine and I was able to execute it without any issue. Are those libraries listed in the <code>project explorer</code> tab in the <code>External Libraries</code> section? Maybe you can check the <code>project structure</code> menu what libraries are being imported"}],"owner":{"account_id":19485474,"reputation":11,"user_id":14254931,"display_name":"Rah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682849272,"creation_date":1682778984,"question_id":76136779,"body_markdown":"I imported a sbt project into intelliJ (using Java language for the project). I have the associated dependencies in the build.sbt file for akka. For some reason, my Akka library is not being recognized by the IDE. I can compile the example code and run it. Does anyone know how I can trouble shoot or resolve this?\r\n\r\nHere is the code in my build.sbt file-\r\n\r\n\r\n```\r\nval scala3Version = &quot;3.2.2&quot;\r\nlazy val akkaVersion = &quot;2.8.0&quot;\r\nlazy val root = project\r\n  .in(file(&quot;.&quot;))\r\n  .settings(\r\n    name := &quot;akkademo1&quot;,\r\n    version := &quot;0.1.0-SNAPSHOT&quot;,\r\n    fork := true,\r\n    connectInput in run := true, // This is required for console input to work!\r\n\r\n    // This is required as a workaround for https://github.com/lampepfl/dotty/issues/14846\r\n    compileOrder := CompileOrder.JavaThenScala,\r\n    scalaVersion := scala3Version,\r\n    javacOptions ++= Seq(&quot;-source&quot;, &quot;20&quot;, &quot;-target&quot;, &quot;20&quot;, &quot;--enable-preview&quot;),\r\n    javaOptions ++= Seq(&quot;--enable-preview&quot;),\r\n\r\n    libraryDependencies ++= Seq(\r\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-typed&quot; % akkaVersion,\r\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-testkit-typed&quot; % akkaVersion,\r\n      &quot;ch.qos.logback&quot; % &quot;logback-classic&quot; % &quot;1.4.6&quot;,\r\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-testkit-typed&quot; % akkaVersion % Test,\r\n      &quot;org.scalatest&quot; %% &quot;scalatest&quot; % &quot;3.2.12&quot; % Test,\r\n)\r\n  )\r\n\r\n```\r\n\r\n[![enter image description here](https://i.stack.imgur.com/BGtFr.png)](https://i.stack.imgur.com/BGtFr.png)\r\n\r\nI tried to invalidate cache but didnt work. I tried to reimport but that didnt work either. ","title":"Akka library import for sbt project using Java not recognized in IntelliJ I","body":"<p>I imported a sbt project into intelliJ (using Java language for the project). I have the associated dependencies in the build.sbt file for akka. For some reason, my Akka library is not being recognized by the IDE. I can compile the example code and run it. Does anyone know how I can trouble shoot or resolve this?</p>\n<p>Here is the code in my build.sbt file-</p>\n<pre><code>val scala3Version = &quot;3.2.2&quot;\nlazy val akkaVersion = &quot;2.8.0&quot;\nlazy val root = project\n  .in(file(&quot;.&quot;))\n  .settings(\n    name := &quot;akkademo1&quot;,\n    version := &quot;0.1.0-SNAPSHOT&quot;,\n    fork := true,\n    connectInput in run := true, // This is required for console input to work!\n\n    // This is required as a workaround for https://github.com/lampepfl/dotty/issues/14846\n    compileOrder := CompileOrder.JavaThenScala,\n    scalaVersion := scala3Version,\n    javacOptions ++= Seq(&quot;-source&quot;, &quot;20&quot;, &quot;-target&quot;, &quot;20&quot;, &quot;--enable-preview&quot;),\n    javaOptions ++= Seq(&quot;--enable-preview&quot;),\n\n    libraryDependencies ++= Seq(\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-typed&quot; % akkaVersion,\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-testkit-typed&quot; % akkaVersion,\n      &quot;ch.qos.logback&quot; % &quot;logback-classic&quot; % &quot;1.4.6&quot;,\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-testkit-typed&quot; % akkaVersion % Test,\n      &quot;org.scalatest&quot; %% &quot;scalatest&quot; % &quot;3.2.12&quot; % Test,\n)\n  )\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/BGtFr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BGtFr.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried to invalidate cache but didnt work. I tried to reimport but that didnt work either.</p>\n"},{"tags":["java","spring-boot","hibernate","liquibase","liquibase-hibernate"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682855447,"post_id":76140673,"comment_id":134277736,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28457651,"reputation":11,"user_id":21774805,"display_name":"DarkCoder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682849217,"creation_date":1682849217,"question_id":76140673,"body_markdown":"We are having a multitenant architecture whereby single database is shared by multiple tenant\r\n\r\nWe want to do data migration (Insert,update,delete) operation for each tenant in the same database. Each tenant is partitioned using a discriminatior column. How to run this migration in liquibase?\r\n\r\nI saw uploaddata concept in liquibase and also spring batch.","title":"How to do data migration in liquibase for multinant architecture","body":"<p>We are having a multitenant architecture whereby single database is shared by multiple tenant</p>\n<p>We want to do data migration (Insert,update,delete) operation for each tenant in the same database. Each tenant is partitioned using a discriminatior column. How to run this migration in liquibase?</p>\n<p>I saw uploaddata concept in liquibase and also spring batch.</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux","webfiltering"],"answers":[{"comments":[{"owner":{"account_id":27859391,"reputation":11,"user_id":21272257,"display_name":"suhail ahmed"},"score":0,"creation_date":1683020498,"post_id":76140619,"comment_id":134299270,"body_markdown":"Still it is redirecting to localhost:8080/#/","body":"Still it is redirecting to localhost:8080/#/"}],"tags":[],"owner":{"account_id":3101358,"reputation":962,"user_id":2625393,"display_name":"Numichi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682848741,"creation_date":1682848741,"answer_id":76140619,"question_id":76136498,"body_markdown":"Related to: https://stackoverflow.com/questions/49045670/spring-webflux-redirect-http-to-https\r\n\r\nA better solution than changing the direction of the request internally.\r\n\r\n```\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n        URI uri = exchange.getRequest().getURI();\r\n\r\n        if (uri.getPath().contains(&quot;tenant&quot;)) {\r\n            try {\r\n                URI mutatedUri = new URI(\r\n                    uri.getScheme(),\r\n                    uri.getUserInfo(),\r\n                    uri.getHost(),\r\n                    uri.getPort(),\r\n                    &quot;/&quot;,\r\n                    uri.getQuery(),\r\n                    uri.getFragment()\r\n                );\r\n                ServerHttpResponse response = exchange.getResponse();\r\n                response.setStatusCode(HttpStatus.MOVED_PERMANENTLY);\r\n                response.getHeaders().setLocation(mutatedUri);\r\n                return Mono.empty();\r\n            } catch (URISyntaxException e) {\r\n                return Mono.error(new IllegalStateException(e.getMessage(), e));\r\n            }\r\n        }\r\n\r\n        return chain.filter(exchange);\r\n    }\r\n```","title":"How to map tenant request to the root page of application in spring boot using spring webflux webfilter","body":"<p>Related to: <a href=\"https://stackoverflow.com/questions/49045670/spring-webflux-redirect-http-to-https\">Spring webflux: redirect http to https</a></p>\n<p>A better solution than changing the direction of the request internally.</p>\n<pre><code>    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        URI uri = exchange.getRequest().getURI();\n\n        if (uri.getPath().contains(&quot;tenant&quot;)) {\n            try {\n                URI mutatedUri = new URI(\n                    uri.getScheme(),\n                    uri.getUserInfo(),\n                    uri.getHost(),\n                    uri.getPort(),\n                    &quot;/&quot;,\n                    uri.getQuery(),\n                    uri.getFragment()\n                );\n                ServerHttpResponse response = exchange.getResponse();\n                response.setStatusCode(HttpStatus.MOVED_PERMANENTLY);\n                response.getHeaders().setLocation(mutatedUri);\n                return Mono.empty();\n            } catch (URISyntaxException e) {\n                return Mono.error(new IllegalStateException(e.getMessage(), e));\n            }\n        }\n\n        return chain.filter(exchange);\n    }\n</code></pre>\n"}],"owner":{"account_id":27859391,"reputation":11,"user_id":21272257,"display_name":"suhail ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682848741,"creation_date":1682775095,"question_id":76136498,"body_markdown":"I am using spring webflux and webfilter in my spring boot application and i&#39;m bundling angular and spring boot into a single jar file and i am able to access angular at &quot;/&quot;.\r\n\r\nMy use case is i want to support multi-tenant and when i access my application using &quot;localhost:8080/tenant/tenantname/&quot; it is considered as new tenant with name &quot;tenantname&quot; and i need to open the home page of angular which is at &quot;/&quot; by keeping the uri in the search bar as &quot;localhost:8080/tenant/tenantname/&quot;.\r\n\r\nSo to achieve it i have implemented a webfilter and modifying the path to &quot;/&quot; if the uri has &quot;tenant&quot;, but when we send the modified uri to chain.filter(), the uri in the search box is getting to &quot;localhost:8080/&quot; i dont want it happen i want the uri in search box should be same &quot;localhost:8080/tenant/tenantname/&quot;.\r\n\r\n```\r\n@Component\r\npublic class TenantFilter implements WebFilter {\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n        String uri = exchange.getRequest().getURI().getPath();\r\n        ServerWebExchange updatedExchange = exchange;\r\n        if(uri.contains(&quot;tenant&quot;)){\r\n             updatedExchange = exchange.mutate().request(request-&gt;{\r\n                request.path(&quot;/&quot;);\r\n            }).build();\r\n        }\r\n        return chain.filter(updatedExchange);\r\n    }\r\n}\r\n```\r\n\r\nIn my old POC i have use servlet filter it was working fine there.\r\n\r\nServlet filter example:\r\n\r\n```\r\n@Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n       \r\n        HttpServletRequest httpRequest = (HttpServletRequest) request;\r\n        String requestURI = httpRequest.getRequestURI();\r\n        if(requestURI.contains(&quot;/tenant&quot;)){\r\n            request.getRequestDispatcher(URLDecoder.decode(uri, &quot;UTF-8&quot;)).forward(request, response);\r\n        }\r\n        chain.doFilter(request, response);\r\n    }\r\n\r\n```\r\n\r\nin servlet filter i have use request.getRequestDispatcher().forward(request,response).\r\nis there anything same in spring webflux webfilter or do i need to change anything in my webFlux WebFilter.","title":"How to map tenant request to the root page of application in spring boot using spring webflux webfilter","body":"<p>I am using spring webflux and webfilter in my spring boot application and i'm bundling angular and spring boot into a single jar file and i am able to access angular at &quot;/&quot;.</p>\n<p>My use case is i want to support multi-tenant and when i access my application using &quot;localhost:8080/tenant/tenantname/&quot; it is considered as new tenant with name &quot;tenantname&quot; and i need to open the home page of angular which is at &quot;/&quot; by keeping the uri in the search bar as &quot;localhost:8080/tenant/tenantname/&quot;.</p>\n<p>So to achieve it i have implemented a webfilter and modifying the path to &quot;/&quot; if the uri has &quot;tenant&quot;, but when we send the modified uri to chain.filter(), the uri in the search box is getting to &quot;localhost:8080/&quot; i dont want it happen i want the uri in search box should be same &quot;localhost:8080/tenant/tenantname/&quot;.</p>\n<pre><code>@Component\npublic class TenantFilter implements WebFilter {\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        String uri = exchange.getRequest().getURI().getPath();\n        ServerWebExchange updatedExchange = exchange;\n        if(uri.contains(&quot;tenant&quot;)){\n             updatedExchange = exchange.mutate().request(request-&gt;{\n                request.path(&quot;/&quot;);\n            }).build();\n        }\n        return chain.filter(updatedExchange);\n    }\n}\n</code></pre>\n<p>In my old POC i have use servlet filter it was working fine there.</p>\n<p>Servlet filter example:</p>\n<pre><code>@Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n       \n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n        String requestURI = httpRequest.getRequestURI();\n        if(requestURI.contains(&quot;/tenant&quot;)){\n            request.getRequestDispatcher(URLDecoder.decode(uri, &quot;UTF-8&quot;)).forward(request, response);\n        }\n        chain.doFilter(request, response);\n    }\n\n</code></pre>\n<p>in servlet filter i have use request.getRequestDispatcher().forward(request,response).\nis there anything same in spring webflux webfilter or do i need to change anything in my webFlux WebFilter.</p>\n"},{"tags":["java","spring-boot","swagger","openapi","openapi-generator"],"answers":[{"tags":[],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682848264,"creation_date":1682848264,"answer_id":76140592,"question_id":74698141,"body_markdown":"OpenApi generator uses mustache templates to generate code. For Spring you find these templates here:\r\n\r\nhttps://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/JavaSpring\r\n\r\nIn `api.mustache` you find `{{&gt;headerParams}}`. This is a mustache partial that is a way to reuse the same template code in multiple places. Here it means, include the `headerParams.mustache` at this place.\r\n\r\nIn `headerParams.mustache`, you will find that headers are included one by one. \r\n\r\nIn summary, it is not possible to to generate a Map of multiple header parameters (at least not by default configuration mechanism).\r\n\r\n","title":"How to generate multiple headers as a map using OpenAPI Generator?","body":"<p>OpenApi generator uses mustache templates to generate code. For Spring you find these templates here:</p>\n<p><a href=\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/JavaSpring\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/JavaSpring</a></p>\n<p>In <code>api.mustache</code> you find <code>{{&gt;headerParams}}</code>. This is a mustache partial that is a way to reuse the same template code in multiple places. Here it means, include the <code>headerParams.mustache</code> at this place.</p>\n<p>In <code>headerParams.mustache</code>, you will find that headers are included one by one.</p>\n<p>In summary, it is not possible to to generate a Map of multiple header parameters (at least not by default configuration mechanism).</p>\n"}],"owner":{"account_id":926701,"reputation":1165,"user_id":957359,"accept_rate":47,"display_name":"jcrshankar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":449,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1682848264,"creation_date":1670307874,"question_id":74698141,"body_markdown":"I have the following two headers in my OpenAPI 2.0 definition:\r\n\r\n&lt;!-- language: lang-json --&gt;\r\n\r\n          {\r\n            &quot;name&quot;: &quot;key&quot;,\r\n            &quot;in&quot;: &quot;header&quot;,\r\n            &quot;description&quot;: &quot;v4 UUID &quot;,\r\n            &quot;required&quot;: true,\r\n            &quot;type&quot;: &quot;string&quot;,\r\n            &quot;format&quot;: &quot;string&quot;,\r\n            &quot;x-example&quot;: &quot;d1257cae-9814-90d0-89e0-abd9ae7b3375&quot;\r\n          },\r\n          {\r\n            &quot;name&quot;: &quot;emp-number&quot;,\r\n            &quot;in&quot;: &quot;header&quot;,\r\n            &quot;description&quot;: &quot;The emp number&quot;,\r\n            &quot;required&quot;: true,\r\n            &quot;type&quot;: &quot;string&quot;,\r\n            &quot;x-example&quot;: &quot;43234&quot;\r\n          },\r\n\r\nThe implementation class generated by the OpenAPI Generator comes with two params for the headers:\r\n\r\n    makeXy(String key, String emp-number)\r\n\r\nIs it possible to combine those two headers and generate them as a map? Like so:\r\n\r\n    makeXy(Map&lt;String, String&gt; headers)","title":"How to generate multiple headers as a map using OpenAPI Generator?","body":"<p>I have the following two headers in my OpenAPI 2.0 definition:</p>\n<pre class=\"lang-json prettyprint-override\"><code>      {\n        &quot;name&quot;: &quot;key&quot;,\n        &quot;in&quot;: &quot;header&quot;,\n        &quot;description&quot;: &quot;v4 UUID &quot;,\n        &quot;required&quot;: true,\n        &quot;type&quot;: &quot;string&quot;,\n        &quot;format&quot;: &quot;string&quot;,\n        &quot;x-example&quot;: &quot;d1257cae-9814-90d0-89e0-abd9ae7b3375&quot;\n      },\n      {\n        &quot;name&quot;: &quot;emp-number&quot;,\n        &quot;in&quot;: &quot;header&quot;,\n        &quot;description&quot;: &quot;The emp number&quot;,\n        &quot;required&quot;: true,\n        &quot;type&quot;: &quot;string&quot;,\n        &quot;x-example&quot;: &quot;43234&quot;\n      },\n</code></pre>\n<p>The implementation class generated by the OpenAPI Generator comes with two params for the headers:</p>\n<pre><code>makeXy(String key, String emp-number)\n</code></pre>\n<p>Is it possible to combine those two headers and generate them as a map? Like so:</p>\n<pre><code>makeXy(Map&lt;String, String&gt; headers)\n</code></pre>\n"},{"tags":["java","kotlin","reflection","type-conversion","jvm"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682847867,"creation_date":1682846673,"answer_id":76140486,"question_id":76140292,"body_markdown":"You can make a Kotlin wrapper of the `KFunction`-accepting function, that takes a function type instead:\r\n\r\n```\r\nfun registerHelper(value: (Value) -&gt; Unit) {\r\n   register(value::invoke)\r\n}\r\n```\r\n\r\nThis can then be called from the Java code:\r\n\r\n```\r\npublic class Test {\r\n    public void launch() {\r\n        registerHelper(Test::test);\r\n    }\r\n    @Subscriber\r\n    public static Unit test(Value data) {\r\n        System.out.println(&quot;Hello world!&quot;);\r\n        return Unit.INSTANCE;\r\n    }\r\n}\r\n```\r\n\r\n&lt;hr&gt;\r\n\r\nHowever, if `registerHelper` needs to access the name of `test`, or the annotations on it, rather than just call it, it is a lot harder.\r\n\r\nOne way I can think of is what you&#39;d do in kotlin, when you want to convert a `java.lang.reflect.Method` into a `KFunction`. You&#39;d use [`kotlinFunction`][1], right?\r\n\r\nThe `kotlinFunction` property corresponds to a static method called `ReflectJvmMapping.getKotlinFunction` in Java.\r\n\r\nYou can get the `test` method as a `java.lang.reflect.Method`, then use that to convert to a `KFunction`:\r\n\r\n```\r\nvar testClass = Test.class;\r\nvar method = testClass.getMethod(&quot;test&quot;, Value.class);\r\n\r\n// note the unchecked cast here, which is safe as long as you got the correct method\r\nEvent.register((KFunction&lt;Unit&gt;) ReflectJvmMapping.getKotlinFunction(method));\r\n```\r\n\r\nSince the implementation of `getKotlinFunction` uses Kotlin reflection to find the function again, it might be better if you convert `Test.class` to a Kotlin class first, and then use Kotlin reflection directly.\r\n\r\n```\r\nvar testClassKotlin = JvmClassMappingKt.getKotlinClass(Test.class);\r\nvar kfunction = KClasses.getFunctions(testClassKotlin).stream()\r\n    // use whatever criteria to find the method you want\r\n    .filter(x -&gt; x.getName().equals(&quot;test&quot;))\r\n    .findFirst().get();\r\n```\r\n\r\n&lt;hr&gt;\r\n\r\nThat said, this is not how the Kotlin compiler internally makes a `KFunction`, when you write a function reference. The kotlin compiler actually creates a subclass of `kotlin.jvm.internal.FunctionReferenceImpl`. If you want to do what the compiler does, which I don&#39;t really recommend:\r\n\r\n```\r\n// yes, implementing the raw type of Function1 is necessary.\r\nclass SomeInnerClass extends FunctionReferenceImpl implements kotlin.jvm.functions.Function1{\r\n\r\n    public SomeInnerClass() {\r\n        // here you need to pass in the arty, declared class, name,\r\n        // JVM signature, and some flags too\r\n        super(1, Test.class, &quot;test&quot;, &quot;test(Lyourpackage/Value;)Lkotlin/Unit;&quot;, 0);\r\n        // For what the flags mean, see \r\n        // https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunctionReference.java#L16\r\n    }\r\n\r\n    @Override\r\n    public Unit invoke(Object value) {\r\n        return Test.test((Value)value);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen an instance of this is passed to `register`.\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.jvm/java.lang.reflect.-method/kotlin-function.html","title":"Passing Java Function to KFunction","body":"<p>You can make a Kotlin wrapper of the <code>KFunction</code>-accepting function, that takes a function type instead:</p>\n<pre><code>fun registerHelper(value: (Value) -&gt; Unit) {\n   register(value::invoke)\n}\n</code></pre>\n<p>This can then be called from the Java code:</p>\n<pre><code>public class Test {\n    public void launch() {\n        registerHelper(Test::test);\n    }\n    @Subscriber\n    public static Unit test(Value data) {\n        System.out.println(&quot;Hello world!&quot;);\n        return Unit.INSTANCE;\n    }\n}\n</code></pre>\n<hr>\n<p>However, if <code>registerHelper</code> needs to access the name of <code>test</code>, or the annotations on it, rather than just call it, it is a lot harder.</p>\n<p>One way I can think of is what you'd do in kotlin, when you want to convert a <code>java.lang.reflect.Method</code> into a <code>KFunction</code>. You'd use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.jvm/java.lang.reflect.-method/kotlin-function.html\" rel=\"nofollow noreferrer\"><code>kotlinFunction</code></a>, right?</p>\n<p>The <code>kotlinFunction</code> property corresponds to a static method called <code>ReflectJvmMapping.getKotlinFunction</code> in Java.</p>\n<p>You can get the <code>test</code> method as a <code>java.lang.reflect.Method</code>, then use that to convert to a <code>KFunction</code>:</p>\n<pre><code>var testClass = Test.class;\nvar method = testClass.getMethod(&quot;test&quot;, Value.class);\n\n// note the unchecked cast here, which is safe as long as you got the correct method\nEvent.register((KFunction&lt;Unit&gt;) ReflectJvmMapping.getKotlinFunction(method));\n</code></pre>\n<p>Since the implementation of <code>getKotlinFunction</code> uses Kotlin reflection to find the function again, it might be better if you convert <code>Test.class</code> to a Kotlin class first, and then use Kotlin reflection directly.</p>\n<pre><code>var testClassKotlin = JvmClassMappingKt.getKotlinClass(Test.class);\nvar kfunction = KClasses.getFunctions(testClassKotlin).stream()\n    // use whatever criteria to find the method you want\n    .filter(x -&gt; x.getName().equals(&quot;test&quot;))\n    .findFirst().get();\n</code></pre>\n<hr>\n<p>That said, this is not how the Kotlin compiler internally makes a <code>KFunction</code>, when you write a function reference. The kotlin compiler actually creates a subclass of <code>kotlin.jvm.internal.FunctionReferenceImpl</code>. If you want to do what the compiler does, which I don't really recommend:</p>\n<pre><code>// yes, implementing the raw type of Function1 is necessary.\nclass SomeInnerClass extends FunctionReferenceImpl implements kotlin.jvm.functions.Function1{\n\n    public SomeInnerClass() {\n        // here you need to pass in the arty, declared class, name,\n        // JVM signature, and some flags too\n        super(1, Test.class, &quot;test&quot;, &quot;test(Lyourpackage/Value;)Lkotlin/Unit;&quot;, 0);\n        // For what the flags mean, see \n        // https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunctionReference.java#L16\n    }\n\n    @Override\n    public Unit invoke(Object value) {\n        return Test.test((Value)value);\n    }\n\n}\n</code></pre>\n<p>Then an instance of this is passed to <code>register</code>.</p>\n"}],"owner":{"account_id":22445840,"reputation":29,"user_id":16649773,"display_name":"Cherry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76140486,"answer_count":1,"score":2,"last_activity_date":1682847867,"creation_date":1682844098,"question_id":76140292,"body_markdown":"Is there any way way to pass a Function to method with parameters KFunction?\r\nI have library in kotlin which I want to make work in java but I&#39;m unable to convert Function to KFunction (?). \r\nThe function that I want to pass java function\r\n```kotlin\r\n// For example it will be in Event class\r\nfun register(value: KFunction1&lt;Value,Unit&gt;) {\r\n    ...\r\n}\r\n```\r\nMy tries to pass the function to kfunction\r\n```java\r\npublic class Test {\r\n    public void launch() {\r\n        Event.register(Test::test); // Error\r\n    }\r\n    @Subscriber\r\n    public static Unit test(Value data) {\r\n        System.out.println(&quot;Hello world!&quot;);\r\n        return Unit.INSTANCE;\r\n    }\r\n}\r\n```\r\nPS. I need it to be KFunction due to usage of annotation","title":"Passing Java Function to KFunction","body":"<p>Is there any way way to pass a Function to method with parameters KFunction?\nI have library in kotlin which I want to make work in java but I'm unable to convert Function to KFunction (?).\nThe function that I want to pass java function</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// For example it will be in Event class\nfun register(value: KFunction1&lt;Value,Unit&gt;) {\n    ...\n}\n</code></pre>\n<p>My tries to pass the function to kfunction</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n    public void launch() {\n        Event.register(Test::test); // Error\n    }\n    @Subscriber\n    public static Unit test(Value data) {\n        System.out.println(&quot;Hello world!&quot;);\n        return Unit.INSTANCE;\n    }\n}\n</code></pre>\n<p>PS. I need it to be KFunction due to usage of annotation</p>\n"},{"tags":["python","java","oracle","aws-glue","py4j"],"comments":[{"owner":{"account_id":6156062,"reputation":9559,"user_id":4799035,"display_name":"Christopher Jones"},"score":1,"creation_date":1668633657,"post_id":74464385,"comment_id":131456272,"body_markdown":"Does python-oracledb install cleanly in AWS Glue?  If so, then you could use this API instead of the heavy-weight &#39;call java from python&#39; approach.  With python-oracledb you won&#39;t need Oracle Instant Client but you will need python&#39;s cryptography package. (Technically you need one or the other: either Oracle Client or the cryptography package. The default install just uses the latter.)","body":"Does python-oracledb install cleanly in AWS Glue?  If so, then you could use this API instead of the heavy-weight &#39;call java from python&#39; approach.  With python-oracledb you won&#39;t need Oracle Instant Client but you will need python&#39;s cryptography package. (Technically you need one or the other: either Oracle Client or the cryptography package. The default install just uses the latter.)"},{"owner":{"account_id":17676753,"reputation":31,"user_id":12831563,"display_name":"Marcus Trinder"},"score":0,"creation_date":1668781699,"post_id":74464385,"comment_id":131496357,"body_markdown":"Unfortunately, oracledb is not supported in AWS glue.","body":"Unfortunately, oracledb is not supported in AWS glue."},{"owner":{"account_id":6156062,"reputation":9559,"user_id":4799035,"display_name":"Christopher Jones"},"score":0,"creation_date":1668805265,"post_id":74464385,"comment_id":131503681,"body_markdown":"What definition of &#39;support&#39; is that?  Do you mean not available, or doesn&#39;t run or...?  I know you can run the older version (cx_Oracle), see https://stackoverflow.com/questions/70972408/unable-to-connect-oracle-database-using-cx-oracle-from-aws-glue","body":"What definition of &#39;support&#39; is that?  Do you mean not available, or doesn&#39;t run or...?  I know you can run the older version (cx_Oracle), see <a href=\"https://stackoverflow.com/questions/70972408/unable-to-connect-oracle-database-using-cx-oracle-from-aws-glue\" title=\"unable to connect oracle database using cx oracle from aws glue\">stackoverflow.com/questions/70972408/&hellip;</a>"}],"owner":{"account_id":17676753,"reputation":31,"user_id":12831563,"display_name":"Marcus Trinder"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":351,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682847661,"creation_date":1668617911,"question_id":74464385,"body_markdown":"I am running a AWS Glue job to execute stored procedures in an Oracle database. I want to be able to catch the sql exception when a stored procedure fails. I am using &#39;from py4j.java_gateway import java_import&#39; to set up the connection and execute SQL commands on the connection. \r\n\r\n    import sys\r\n    from awsglue.transforms import *\r\n    from awsglue.utils import getResolvedOptions\r\n    from pyspark.context import SparkContext\r\n    from awsglue.context import GlueContext\r\n    from awsglue.job import Job\r\n    import boto3\r\n    \r\n    ############################################\r\n    ### UPDATE THE STORE PROCEDURE NAME HERE ###\r\n\r\n    sp_names = [\r\n    &#39;DEV_WF_POC1&#39;,\r\n    &#39;DEV_WF_POC2&#39;\r\n            ]\r\n    ############################################\r\n\r\n    #Set the conection name (Will be replaced for FT and PROD by powershell deployment script)\r\n    glue_connection_name = &#39;dw-dev-connection&#39;\r\n\r\n    #Use systems args to return job name and pass to local variable\r\n    args = getResolvedOptions(sys.argv, [&#39;JOB_NAME&#39;,&#39;WORKFLOW_NAME&#39;, &#39;WORKFLOW_RUN_ID&#39;])\r\n    workflow_name = args[&#39;WORKFLOW_NAME&#39;]\r\n    workflow_run_id = args[&#39;WORKFLOW_RUN_ID&#39;]\r\n    glue_job_name = args[&#39;JOB_NAME&#39;]\r\n\r\n    #Create spark handler and update status of glue job     \r\n    sc = SparkContext()\r\n    glueContext = GlueContext(sc)\r\n    spark = glueContext.spark_session\r\n    job = Job(glueContext)\r\n    job.init(glue_job_name, args)\r\n    job.commit()\r\n    logger = glueContext.get_logger()\r\n    glue_client = boto3.client(&#39;glue&#39;)\r\n\r\n\r\n    #Extract connection details from Data Catelog     \r\n    source_jdbc_conf = glueContext.extract_jdbc_conf(glue_connection_name)\r\n\r\n    #Import Python for Java Java.sql libs    \r\n    from py4j.java_gateway import java_import\r\n    java_import(sc._gateway.jvm,&quot;java.sql.Connection&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.DatabaseMetaData&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.DriverManager&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\r\n\r\n    #Extract the URL from the JDBC connection \r\n    oracleurl = source_jdbc_conf.get(&#39;url&#39;)\r\n\r\n    # Update connection string to expected Oracle format\r\n    oracleurl = oracleurl.replace(&quot;oracle://&quot;, &quot;oracle:thin:@&quot;)\r\n    oracleurl = oracleurl + &#39;:orcl&#39;\r\n\r\n    #Create the connection to the Oracle database with java.sql\r\n    conn = sc._gateway.jvm.DriverManager.getConnection(oracleurl, source_jdbc_conf.get(&#39;user&#39;),      source_jdbc_conf.get(&#39;password&#39;))\r\n\r\n    #Change autocommit to false to avoid Table lock error \r\n    conn.setAutoCommit(False);\r\n\r\n    # error dict\r\n    errs = {}\r\n    err = &#39;&#39;\r\n    try:\r\n\r\n        for sp_name in sp_names:\r\n    \r\n        #Prepare call stored procedure statement and execute\r\n        cstmt = conn.prepareCall(&quot;{call reporting.&quot; + sp_name + &quot;}&quot;);\r\n        results = cstmt.execute();\r\n        \r\n        conn.commit();\r\n\r\n    # capture error\r\n\r\n    except Exception as e: # work on python 3.x\r\n        ##errs[&#39;msg&#39;] = str(sc._gateway.jvm.SQLException.getMessage())- doesn&#39;t work \r\n        errs[&#39;error&#39;] = str(e)\r\n        errs[&#39;sp_name&#39;] = sp_name\r\n        errs[&#39;error_type&#39;] = str(type(e)).replace(&quot;&lt;class &#39;&quot;,&quot;&quot;).replace(&quot;&#39;&gt;&quot;,&quot;&quot;)\r\n\r\n    if len(errs) != 0:\r\n        stmt = conn.createStatement();\r\n        sql = &quot;insert into dev_workflow_errors (timestamp, workflow_id, workflow_name, job_name,  sp_name, error_type, error) values (current_timestamp, &#39;&quot; + workflow_run_id + &quot;&#39;, &#39;&quot; + workflow_name + &quot;&#39;, &#39;&quot; + glue_job_name + &quot;&#39;, &#39;&quot; + errs[&#39;sp_name&#39;] + &quot;&#39;, &#39;&quot; + errs[&#39;error_type&#39;] + &quot;&#39;, &#39;&quot; + errs[&#39;msg&#39;] + &quot;&#39;)&quot;\r\n        rs = stmt.executeUpdate(sql);\r\n        conn.commit();\r\n        #sys.exit(1)\r\n\r\n    #Close down the connection\r\n    conn.close();\r\n\r\n    #Update Logger\r\n    logger.info(&quot;Finished&quot;)\r\n\r\nI tried the pythonic &#39;Try&#39; and &#39;Except&#39; method but for the base exception I just get the full &#39;py4j.protocol.Py4JJavaError&#39; error message. Inside this message contains the database specific error messages I want to extract.\r\n\r\nCan I use \r\n\r\n    java_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\r\n\r\nin any way to extract database specific errors from the execute function?","title":"Extract java.sql.SQLException from execute call in Python - AWS Glue","body":"<p>I am running a AWS Glue job to execute stored procedures in an Oracle database. I want to be able to catch the sql exception when a stored procedure fails. I am using 'from py4j.java_gateway import java_import' to set up the connection and execute SQL commands on the connection.</p>\n<pre><code>import sys\nfrom awsglue.transforms import *\nfrom awsglue.utils import getResolvedOptions\nfrom pyspark.context import SparkContext\nfrom awsglue.context import GlueContext\nfrom awsglue.job import Job\nimport boto3\n\n############################################\n### UPDATE THE STORE PROCEDURE NAME HERE ###\n\nsp_names = [\n'DEV_WF_POC1',\n'DEV_WF_POC2'\n        ]\n############################################\n\n#Set the conection name (Will be replaced for FT and PROD by powershell deployment script)\nglue_connection_name = 'dw-dev-connection'\n\n#Use systems args to return job name and pass to local variable\nargs = getResolvedOptions(sys.argv, ['JOB_NAME','WORKFLOW_NAME', 'WORKFLOW_RUN_ID'])\nworkflow_name = args['WORKFLOW_NAME']\nworkflow_run_id = args['WORKFLOW_RUN_ID']\nglue_job_name = args['JOB_NAME']\n\n#Create spark handler and update status of glue job     \nsc = SparkContext()\nglueContext = GlueContext(sc)\nspark = glueContext.spark_session\njob = Job(glueContext)\njob.init(glue_job_name, args)\njob.commit()\nlogger = glueContext.get_logger()\nglue_client = boto3.client('glue')\n\n\n#Extract connection details from Data Catelog     \nsource_jdbc_conf = glueContext.extract_jdbc_conf(glue_connection_name)\n\n#Import Python for Java Java.sql libs    \nfrom py4j.java_gateway import java_import\njava_import(sc._gateway.jvm,&quot;java.sql.Connection&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.DatabaseMetaData&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.DriverManager&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\n\n#Extract the URL from the JDBC connection \noracleurl = source_jdbc_conf.get('url')\n\n# Update connection string to expected Oracle format\noracleurl = oracleurl.replace(&quot;oracle://&quot;, &quot;oracle:thin:@&quot;)\noracleurl = oracleurl + ':orcl'\n\n#Create the connection to the Oracle database with java.sql\nconn = sc._gateway.jvm.DriverManager.getConnection(oracleurl, source_jdbc_conf.get('user'),      source_jdbc_conf.get('password'))\n\n#Change autocommit to false to avoid Table lock error \nconn.setAutoCommit(False);\n\n# error dict\nerrs = {}\nerr = ''\ntry:\n\n    for sp_name in sp_names:\n\n    #Prepare call stored procedure statement and execute\n    cstmt = conn.prepareCall(&quot;{call reporting.&quot; + sp_name + &quot;}&quot;);\n    results = cstmt.execute();\n    \n    conn.commit();\n\n# capture error\n\nexcept Exception as e: # work on python 3.x\n    ##errs['msg'] = str(sc._gateway.jvm.SQLException.getMessage())- doesn't work \n    errs['error'] = str(e)\n    errs['sp_name'] = sp_name\n    errs['error_type'] = str(type(e)).replace(&quot;&lt;class '&quot;,&quot;&quot;).replace(&quot;'&gt;&quot;,&quot;&quot;)\n\nif len(errs) != 0:\n    stmt = conn.createStatement();\n    sql = &quot;insert into dev_workflow_errors (timestamp, workflow_id, workflow_name, job_name,  sp_name, error_type, error) values (current_timestamp, '&quot; + workflow_run_id + &quot;', '&quot; + workflow_name + &quot;', '&quot; + glue_job_name + &quot;', '&quot; + errs['sp_name'] + &quot;', '&quot; + errs['error_type'] + &quot;', '&quot; + errs['msg'] + &quot;')&quot;\n    rs = stmt.executeUpdate(sql);\n    conn.commit();\n    #sys.exit(1)\n\n#Close down the connection\nconn.close();\n\n#Update Logger\nlogger.info(&quot;Finished&quot;)\n</code></pre>\n<p>I tried the pythonic 'Try' and 'Except' method but for the base exception I just get the full 'py4j.protocol.Py4JJavaError' error message. Inside this message contains the database specific error messages I want to extract.</p>\n<p>Can I use</p>\n<pre><code>java_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\n</code></pre>\n<p>in any way to extract database specific errors from the execute function?</p>\n"},{"tags":["java","exception","indexoutofboundsexception"],"comments":[{"owner":{"account_id":5185952,"reputation":17062,"user_id":4150352,"accept_rate":75,"display_name":"Mohammed Aouf Zouag"},"score":0,"creation_date":1450093364,"post_id":34266174,"comment_id":56273392,"body_markdown":"google **&quot;IndexOutOfBoundsException&quot;**","body":"google <b>&quot;IndexOutOfBoundsException&quot;</b>"},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1450093504,"post_id":34266174,"comment_id":56273481,"body_markdown":"The difference is that one is used in case of n Array, the other is not.","body":"The difference is that one is used in case of n Array, the other is not."}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1450093500,"creation_date":1450093500,"answer_id":34266241,"question_id":34266174,"body_markdown":"`IndexOutOfBoundsException` is the super class of `ArrayIndexOutOfBoundsException` (thrown when accessing invalid index in a array) and `StringIndexOutOfBoundsException` (thrown when accessing invalid index in a String).\r\n\r\nInstances of the base class `IndexOutOfBoundsException` itself are thrown when accessing invalid indices of Lists.\r\n\r\nThe Javadoc of some methods that throw `IndexOutOfBoundsException` or its sub-classes contains the base class. For example, `String.charAt` is documented to be throwing `IndexOutOfBoundsException` when it actually throws the sub-class `StringIndexOutOfBoundsException`.","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p><code>IndexOutOfBoundsException</code> is the super class of <code>ArrayIndexOutOfBoundsException</code> (thrown when accessing invalid index in a array) and <code>StringIndexOutOfBoundsException</code> (thrown when accessing invalid index in a String).</p>\n\n<p>Instances of the base class <code>IndexOutOfBoundsException</code> itself are thrown when accessing invalid indices of Lists.</p>\n\n<p>The Javadoc of some methods that throw <code>IndexOutOfBoundsException</code> or its sub-classes contains the base class. For example, <code>String.charAt</code> is documented to be throwing <code>IndexOutOfBoundsException</code> when it actually throws the sub-class <code>StringIndexOutOfBoundsException</code>.</p>\n"},{"comments":[{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":2,"creation_date":1450093650,"post_id":34266267,"comment_id":56273566,"body_markdown":"And `IndexOutOfBoundsException` does not?","body":"And <code>IndexOutOfBoundsException</code> does not?"}],"tags":[],"owner":{"display_name":"user1326628"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1450093571,"creation_date":1450093571,"answer_id":34266267,"question_id":34266174,"body_markdown":"ArrayIndexOutOfBoundsException indicates the illegal index in its message.","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p>ArrayIndexOutOfBoundsException indicates the illegal index in its message.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1682847420,"creation_date":1450094084,"answer_id":34266416,"question_id":34266174,"body_markdown":"From docs.oracle.com documentation pages,\r\n\r\n&gt;[IndexOutOfBoundsException][1] :Thrown to indicate that an index of some sort (such as to an array, to a string, or to a vector) is out of range.\r\n\r\n\r\n `ArrayIndexOutOfBoundsException`, `StringIndexOutOfBoundsException` \r\n  are two classes, which have implemented `IndexOutOfBoundsException`.\r\n\r\n&gt;[ArrayIndexOutOfBoundsException][2]: Thrown to indicate that an array has been accessed with an illegal index. The index is either negative or greater than or equal to the size of the array.\r\n\r\n&gt;[StringIndexOutOfBoundsException][3]:Thrown by String methods to indicate that an index is either negative or greater than the size of the string. For some methods such as the charAt method, this exception also is thrown when the index is equal to the size of the string.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/IndexOutOfBoundsException.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/ArrayIndexOutOfBoundsException.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/lang/StringIndexOutOfBoundsException.html","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p>From docs.oracle.com documentation pages,</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/IndexOutOfBoundsException.html\" rel=\"nofollow noreferrer\">IndexOutOfBoundsException</a> :Thrown to indicate that an index of some sort (such as to an array, to a string, or to a vector) is out of range.</p>\n</blockquote>\n<p><code>ArrayIndexOutOfBoundsException</code>, <code>StringIndexOutOfBoundsException</code>\nare two classes, which have implemented <code>IndexOutOfBoundsException</code>.</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ArrayIndexOutOfBoundsException.html\" rel=\"nofollow noreferrer\">ArrayIndexOutOfBoundsException</a>: Thrown to indicate that an array has been accessed with an illegal index. The index is either negative or greater than or equal to the size of the array.</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/StringIndexOutOfBoundsException.html\" rel=\"nofollow noreferrer\">StringIndexOutOfBoundsException</a>:Thrown by String methods to indicate that an index is either negative or greater than the size of the string. For some methods such as the charAt method, this exception also is thrown when the index is equal to the size of the string.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3806833,"reputation":2145,"user_id":3159020,"accept_rate":44,"display_name":"XcodeNOOB"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1465463018,"creation_date":1465463018,"answer_id":37721408,"question_id":34266174,"body_markdown":"Basically, if you go out of bounds for an array or String, you will get the ArrayIndexOutOfBoundsException or the StringIndexOutOfBoundsException. \r\nFor a LinkedList though or some other Collection, you will get the more general IndexOutOfBoundsException. \r\n","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p>Basically, if you go out of bounds for an array or String, you will get the ArrayIndexOutOfBoundsException or the StringIndexOutOfBoundsException. \nFor a LinkedList though or some other Collection, you will get the more general IndexOutOfBoundsException. </p>\n"}],"owner":{"account_id":6137477,"reputation":830,"user_id":4785824,"accept_rate":27,"display_name":"quintin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13318,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"answer_count":4,"score":15,"last_activity_date":1682847420,"creation_date":1450093306,"question_id":34266174,"body_markdown":"What are the use cases in which we should use `ArrayIndexOutOfBoundsException` and `IndexOutOfBoundsException one over another?","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p>What are the use cases in which we should use <code>ArrayIndexOutOfBoundsException</code> and `IndexOutOfBoundsException one over another?</p>\n"},{"tags":["java","hibernate","maven-plugin","hibernate3-maven-plugin"],"answers":[{"comments":[{"owner":{"account_id":4444613,"reputation":781,"user_id":3618301,"accept_rate":56,"display_name":"ciro"},"score":0,"creation_date":1682452882,"post_id":76104467,"comment_id":134217530,"body_markdown":"Thanks for quick answare. But if i replace your code at place of hibernatetool, intelliJ show me error on configuration. I didn&#39;t find documentation. Can you explain in details? Which are tag for connection to db? I forgot, i can use Hibernate 5 because sdk version is 11.","body":"Thanks for quick answare. But if i replace your code at place of hibernatetool, intelliJ show me error on configuration. I didn&#39;t find documentation. Can you explain in details? Which are tag for connection to db? I forgot, i can use Hibernate 5 because sdk version is 11."}],"tags":[],"owner":{"account_id":17201562,"reputation":9,"user_id":12453176,"display_name":"NIKHIL"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682448367,"creation_date":1682448367,"answer_id":76104467,"question_id":76104434,"body_markdown":"The Mapping interface was removed in Hibernate 4 and later versions. Instead, you can use the MetadataImplementor interface to access the metadata of your entities.\r\n\r\nSince you are using Hibernate 4.3.11. Final, you can try changing your hibernate3-maven-plugin configuration to use the MetadataSources tool instead of HibernateTool. You can do this by replacing your current &lt;hibernatetool&gt; configuration with:\r\n\r\n```java\r\n&lt;metadataSources destdir=&quot;${project.build.sourceDirectory}&quot;&gt;\r\n    &lt;classpath&gt;\r\n        &lt;path location=&quot;${project.build.sourceDirectory}/classes&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n    &lt;configuration&gt;\r\n        &lt;jdbc-connection&gt;\r\n            &lt;!-- your database connection details here --&gt;\r\n        &lt;/jdbc-connection&gt;\r\n        &lt;hibernate-mapping package=&quot;com.cm.sourcegenerator&quot;&gt;\r\n            &lt;fileset dir=&quot;${basedir}/src/main/resources/hibernate&quot;&gt;\r\n                &lt;include name=&quot;**/*.hbm.xml&quot;/&gt;\r\n            &lt;/fileset&gt;\r\n        &lt;/hibernate-mapping&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/metadataSources&gt;\r\n```\r\n\r\n","title":"hbm2java 3 - can&#39;t find Mapping class","body":"<p>The Mapping interface was removed in Hibernate 4 and later versions. Instead, you can use the MetadataImplementor interface to access the metadata of your entities.</p>\n<p>Since you are using Hibernate 4.3.11. Final, you can try changing your hibernate3-maven-plugin configuration to use the MetadataSources tool instead of HibernateTool. You can do this by replacing your current  configuration with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;metadataSources destdir=&quot;${project.build.sourceDirectory}&quot;&gt;\n    &lt;classpath&gt;\n        &lt;path location=&quot;${project.build.sourceDirectory}/classes&quot;/&gt;\n    &lt;/classpath&gt;\n    &lt;configuration&gt;\n        &lt;jdbc-connection&gt;\n            &lt;!-- your database connection details here --&gt;\n        &lt;/jdbc-connection&gt;\n        &lt;hibernate-mapping package=&quot;com.cm.sourcegenerator&quot;&gt;\n            &lt;fileset dir=&quot;${basedir}/src/main/resources/hibernate&quot;&gt;\n                &lt;include name=&quot;**/*.hbm.xml&quot;/&gt;\n            &lt;/fileset&gt;\n        &lt;/hibernate-mapping&gt;\n    &lt;/configuration&gt;\n&lt;/metadataSources&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4444613,"reputation":781,"user_id":3618301,"accept_rate":56,"display_name":"ciro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682846497,"creation_date":1682846497,"answer_id":76140466,"question_id":76104434,"body_markdown":"I just used the new version of the tool and everything works fine\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;hibernate-tools-maven-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;5.4.20.Final&lt;/version&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;propertyFile&gt;${project.basedir}/src/main/resources/hibernate/hibernate.properties&lt;/propertyFile&gt;\r\n\t\t\t&lt;revengFile&gt;${project.basedir}/src/main/resources/hibernate/hibernate.reveng.xml&lt;/revengFile&gt;\r\n\t\t\t&lt;ejb3&gt;true&lt;/ejb3&gt;\r\n\t\t\t&lt;jdk5&gt;true&lt;/jdk5&gt;\r\n\t\t\t&lt;outputDirectory&gt;${project.basedir}/src/main/java&lt;/outputDirectory&gt;\r\n\t\t\t&lt;packageName&gt;com.cm.sourcegenerator.entity&lt;/packageName&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;!-- DB Driver of your database --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${mysql.version}&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/plugin&gt;","title":"hbm2java 3 - can&#39;t find Mapping class","body":"<p>I just used the new version of the tool and everything works fine</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-tools-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;5.4.20.Final&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;propertyFile&gt;${project.basedir}/src/main/resources/hibernate/hibernate.properties&lt;/propertyFile&gt;\n        &lt;revengFile&gt;${project.basedir}/src/main/resources/hibernate/hibernate.reveng.xml&lt;/revengFile&gt;\n        &lt;ejb3&gt;true&lt;/ejb3&gt;\n        &lt;jdk5&gt;true&lt;/jdk5&gt;\n        &lt;outputDirectory&gt;${project.basedir}/src/main/java&lt;/outputDirectory&gt;\n        &lt;packageName&gt;com.cm.sourcegenerator.entity&lt;/packageName&gt;\n    &lt;/configuration&gt;\n    &lt;dependencies&gt;\n        &lt;!-- DB Driver of your database --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;version&gt;${mysql.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":4444613,"reputation":781,"user_id":3618301,"accept_rate":56,"display_name":"ciro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1682846497,"creation_date":1682448131,"question_id":76104434,"body_markdown":"I use the plugin below to generate my Entity classes.\r\nWhen I execute command mvn hibernate3:hbm2java I did get this error:\r\n\r\nThere was an error creating the AntRun task.: An Ant BuildException has occured: java.lang.NoClassDefFoundError: org/hibernate/engine/Mapping: org.hibernate.engine.Mapping\r\n\r\nI did try every hibernate version but I can&#39;t find the one that contains indicated class.\r\n\r\nEdit: JDK 11 is used.\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;hibernate3-maven-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0&lt;/version&gt;\r\n\t\t&lt;executions&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;id&gt;generate-entities&lt;/id&gt;\r\n\t\t\t\t&lt;phase&gt;post-clean&lt;/phase&gt;\r\n\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t&lt;goal&gt;hbm2java&lt;/goal&gt;\r\n\t\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t&lt;/executions&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;hibernatetool destdir=&quot;${project.build.sourceDirectory}&quot;&gt;\r\n\t\t\t\t&lt;classpath&gt;\r\n\t\t\t\t\t&lt;path location=&quot;${project.build.sourceDirectory}/classes&quot;/&gt;\r\n\t\t\t\t&lt;/classpath&gt;\r\n\t\t\t\t&lt;!--&lt;configuration configurationfile=&quot;src/main/resources/hibernate/hibernate.cfg.xml&quot;/&gt; --&gt;\r\n\t\t\t\t&lt;jdbcconfiguration\r\n\t\t\t\t\t\tpackagename=&quot;com.cm.sourcegenerator&quot;\r\n\t\t\t\t\t\trevengfile=&quot;src/main/resources/hibernate/hibernate.reveng.xml&quot;\r\n\t\t\t\t/&gt;\r\n\t\t\t\t&lt;hbm2java jdk5=&quot;true&quot; ejb3=&quot;true&quot;/&gt;\r\n\t\t\t\t&lt;!--&lt;hbm2cfgxml ejb3=&quot;true&quot; destdir=&quot;${basedir}/src/main/resources/hibernate&quot; /&gt; --&gt;\r\n\r\n\t\t\t&lt;/hibernatetool&gt;\r\n\r\n\t\t&lt;/configuration&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;8.0.33&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;cglib&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;cglib&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${cglib.version}&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;4.3.11.Final&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;4.3.11.Final&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;4.1.0.Final&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.2&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.2&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/plugin&gt;","title":"hbm2java 3 - can&#39;t find Mapping class","body":"<p>I use the plugin below to generate my Entity classes.\nWhen I execute command mvn hibernate3:hbm2java I did get this error:</p>\n<p>There was an error creating the AntRun task.: An Ant BuildException has occured: java.lang.NoClassDefFoundError: org/hibernate/engine/Mapping: org.hibernate.engine.Mapping</p>\n<p>I did try every hibernate version but I can't find the one that contains indicated class.</p>\n<p>Edit: JDK 11 is used.</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate3-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;generate-entities&lt;/id&gt;\n            &lt;phase&gt;post-clean&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;hbm2java&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n        &lt;hibernatetool destdir=&quot;${project.build.sourceDirectory}&quot;&gt;\n            &lt;classpath&gt;\n                &lt;path location=&quot;${project.build.sourceDirectory}/classes&quot;/&gt;\n            &lt;/classpath&gt;\n            &lt;!--&lt;configuration configurationfile=&quot;src/main/resources/hibernate/hibernate.cfg.xml&quot;/&gt; --&gt;\n            &lt;jdbcconfiguration\n                    packagename=&quot;com.cm.sourcegenerator&quot;\n                    revengfile=&quot;src/main/resources/hibernate/hibernate.reveng.xml&quot;\n            /&gt;\n            &lt;hbm2java jdk5=&quot;true&quot; ejb3=&quot;true&quot;/&gt;\n            &lt;!--&lt;hbm2cfgxml ejb3=&quot;true&quot; destdir=&quot;${basedir}/src/main/resources/hibernate&quot; /&gt; --&gt;\n\n        &lt;/hibernatetool&gt;\n\n    &lt;/configuration&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;version&gt;8.0.33&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;cglib&lt;/groupId&gt;\n            &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n            &lt;version&gt;${cglib.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;4.3.11.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;4.3.11.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;4.1.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n            &lt;version&gt;2.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","web","frameworks","sts"],"answers":[{"tags":[],"owner":{"account_id":17703336,"reputation":109,"user_id":12852531,"display_name":"benjaminv2"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682845870,"creation_date":1682845870,"answer_id":76140431,"question_id":76139753,"body_markdown":"I think the term you are looking for is environment variables. When you reference something as &#39;${envVerNum}&#39; it is expected that you have it defined somewhere within your environment (this can be a .properties file, this can be defined as an environment variable on the machine as well etc).\r\n\r\nIm not sure how STS4 works but IntelliJ has a very convenient option for setting Environment Variables as part of run configurations.\r\n\r\nI assume STS should have something similar. You can read about how its done in intellij here:\r\n\r\n[IntelliJ Run Config Environment Variables][1]\r\n\r\nUltimately if STS does not provide such an option, you can look into adding environment variables on windows: \r\n\r\n[Windows Environment Variables Guide][2]\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/objc/add-environment-variables-and-program-arguments.html\r\n  [2]: https://docs.oracle.com/en/database/oracle/machine-learning/oml4r/1.5.1/oread/creating-and-modifying-environment-variables-on-windows.html","title":"Could not resolve placeholder &#39;envVerNum&#39; in value &quot;${envVerNum}&quot;","body":"<p>I think the term you are looking for is environment variables. When you reference something as '${envVerNum}' it is expected that you have it defined somewhere within your environment (this can be a .properties file, this can be defined as an environment variable on the machine as well etc).</p>\n<p>Im not sure how STS4 works but IntelliJ has a very convenient option for setting Environment Variables as part of run configurations.</p>\n<p>I assume STS should have something similar. You can read about how its done in intellij here:</p>\n<p><a href=\"https://www.jetbrains.com/help/objc/add-environment-variables-and-program-arguments.html\" rel=\"nofollow noreferrer\">IntelliJ Run Config Environment Variables</a></p>\n<p>Ultimately if STS does not provide such an option, you can look into adding environment variables on windows:</p>\n<p><a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4r/1.5.1/oread/creating-and-modifying-environment-variables-on-windows.html\" rel=\"nofollow noreferrer\">Windows Environment Variables Guide</a></p>\n"}],"owner":{"account_id":28274053,"reputation":1,"user_id":21616811,"display_name":"Sam Nithish  K C"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682845870,"creation_date":1682834047,"question_id":76139753,"body_markdown":"In MacOS, they just open terminal and do these\r\n\r\n```\r\nvi .bash_profile\r\n```\r\n\r\nhere vi is something like text editor ..\r\n\r\nthen the file named .bash_profile popsup and they store\r\n\r\n```\r\nexport envVerNum=2.2.2 \r\n```\r\n\r\nand save it and close it.\r\n\r\nthen open terminal again and type\r\n\r\n```\r\necho $envVerNum\r\n```\r\n\r\nit returns 2.2.2 ! it also returns in sts4 !\r\n\r\nNow, Whats the process in Windows ! Please explain me as i am noob to this Spring Boot !\r\n\r\nI tried this ...\r\n\r\nhere&#39;s the application Properties !\r\n\r\n```\r\nspring.thymeleaf.cache=false #just for example\r\nversion=${envVerNum}\r\n```\r\n\r\nHere&#39;s the HomeController !\r\n\r\n```\r\n@Controller\r\npublic class homeController {\r\n\t@Value(&quot;${version}&quot;)\r\n\tprivate String ver;\r\n\t@RequestMapping(&quot;/&quot;)\r\n\tpublic String diaplayHome(Model model) throws JsonProcessingException {\r\n\t\tmodel.addAttribute(&quot;venum&quot;, ver);\r\n\t\treturn &quot;Home/home&quot;;\r\n\t}\r\n}\r\n```\r\n\r\n\r\nhere&#39;s the Home html code ...\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n\t&lt;title&gt;Home !&lt;/title&gt;\r\n\t&lt;div th:replace=&quot;layouts::hey1&quot;&gt;&lt;/div&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\t&lt;nav th:replace=&quot;layouts::hey&quot;&gt;&lt;/nav&gt;\r\n\t&lt;div class=&quot;container&quot;&gt;\r\n\t\t&lt;h3&gt;Main Dashboard&lt;/h3&gt;\r\n\t\t&lt;a th:text=&quot;${venum}&quot;&gt;&lt;/a&gt;\r\n\t\t&lt;hr&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nI want to set the envVerNum and call it inside the Sts4... please help me with windows !","title":"Could not resolve placeholder &#39;envVerNum&#39; in value &quot;${envVerNum}&quot;","body":"<p>In MacOS, they just open terminal and do these</p>\n<pre><code>vi .bash_profile\n</code></pre>\n<p>here vi is something like text editor ..</p>\n<p>then the file named .bash_profile popsup and they store</p>\n<pre><code>export envVerNum=2.2.2 \n</code></pre>\n<p>and save it and close it.</p>\n<p>then open terminal again and type</p>\n<pre><code>echo $envVerNum\n</code></pre>\n<p>it returns 2.2.2 ! it also returns in sts4 !</p>\n<p>Now, Whats the process in Windows ! Please explain me as i am noob to this Spring Boot !</p>\n<p>I tried this ...</p>\n<p>here's the application Properties !</p>\n<pre><code>spring.thymeleaf.cache=false #just for example\nversion=${envVerNum}\n</code></pre>\n<p>Here's the HomeController !</p>\n<pre><code>@Controller\npublic class homeController {\n    @Value(&quot;${version}&quot;)\n    private String ver;\n    @RequestMapping(&quot;/&quot;)\n    public String diaplayHome(Model model) throws JsonProcessingException {\n        model.addAttribute(&quot;venum&quot;, ver);\n        return &quot;Home/home&quot;;\n    }\n}\n</code></pre>\n<p>here's the Home html code ...</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;title&gt;Home !&lt;/title&gt;\n    &lt;div th:replace=&quot;layouts::hey1&quot;&gt;&lt;/div&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;nav th:replace=&quot;layouts::hey&quot;&gt;&lt;/nav&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;h3&gt;Main Dashboard&lt;/h3&gt;\n        &lt;a th:text=&quot;${venum}&quot;&gt;&lt;/a&gt;\n        &lt;hr&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I want to set the envVerNum and call it inside the Sts4... please help me with windows !</p>\n"},{"tags":["java","loops","indexing","character"],"answers":[{"comments":[{"owner":{"account_id":7929172,"reputation":1797,"user_id":6059506,"accept_rate":77,"display_name":"theprogrammer"},"score":0,"creation_date":1638096345,"post_id":5034452,"comment_id":123991790,"body_markdown":"op&#39;s guess variable is a string. Your solution only works for a character.","body":"op&#39;s guess variable is a string. Your solution only works for a character."}],"tags":[],"owner":{"account_id":68714,"reputation":772,"user_id":200328,"accept_rate":100,"display_name":"POSIX_ME_HARDER"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1297975638,"creation_date":1297975638,"answer_id":5034452,"question_id":5034442,"body_markdown":"    String string = &quot;bannanas&quot;;\r\n    ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n    char character = &#39;n&#39;;\r\n    for(int i = 0; i &lt; string.length(); i++){\r\n        if(string.charAt(i) == character){\r\n           list.add(i);\r\n        }\r\n    }\r\n\r\nResult would be used like this :\r\n\r\n\t\tfor(Integer i : list){\r\n\t\t\tSystem.out.println(i);\r\n\t\t}\r\n\r\nOr as a array :\r\n\r\n    list.toArray();","title":"Indexes of all occurrences of character in a string","body":"<pre><code>String string = \"bannanas\";\nArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\nchar character = 'n';\nfor(int i = 0; i &lt; string.length(); i++){\n    if(string.charAt(i) == character){\n       list.add(i);\n    }\n}\n</code></pre>\n\n<p>Result would be used like this :</p>\n\n<pre><code>    for(Integer i : list){\n        System.out.println(i);\n    }\n</code></pre>\n\n<p>Or as a array :</p>\n\n<pre><code>list.toArray();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":279561,"reputation":26283,"user_id":574799,"accept_rate":74,"display_name":"lukastymo"},"score":1,"creation_date":1297976040,"post_id":5034468,"comment_id":5632128,"body_markdown":"you always print -1 at the end","body":"you always print -1 at the end"},{"owner":{"account_id":211093,"reputation":40153,"user_id":463065,"accept_rate":80,"display_name":"Trufa"},"score":0,"creation_date":1297976116,"post_id":5034468,"comment_id":5632153,"body_markdown":"@Peter Thank you very much for you answer, it seem to be right, but this is *actually* my first day with Java so I&#39;m a little confused by the final result, this seems to output -1 at the end an I don&#39;t quite understand why! thanks!!","body":"@Peter Thank you very much for you answer, it seem to be right, but this is <i>actually</i> my first day with Java so I&#39;m a little confused by the final result, this seems to output -1 at the end an I don&#39;t quite understand why! thanks!!"},{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":0,"creation_date":1297976581,"post_id":5034468,"comment_id":5632259,"body_markdown":"@Trufa: It always prints -1 at the end because `indexOf` returns -1 when the character is not found.","body":"@Trufa: It always prints -1 at the end because <code>indexOf</code> returns -1 when the character is not found."},{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1297976634,"post_id":5034468,"comment_id":5632274,"body_markdown":"@Trufa - the reason it prints `-1` at the end is that the `do` loop executes the body and _then_ discovers that `index == -1` in the terminating `while`.","body":"@Trufa - the reason it prints <code>-1</code> at the end is that the <code>do</code> loop executes the body and <i>then</i> discovers that <code>index == -1</code> in the terminating <code>while</code>."},{"owner":{"account_id":211093,"reputation":40153,"user_id":463065,"accept_rate":80,"display_name":"Trufa"},"score":0,"creation_date":1297976865,"post_id":5034468,"comment_id":5632326,"body_markdown":"@ColinD that part I do get, what I don&#39;t understand is what is happen with the function for that to happen, it &quot;loops&quot; through the word looking for the occurrence of the character and until that is it can find no more right? and prints this last index of that is the not found (-1), is that what is happening? (I don&#39;t know if that came out right)","body":"@ColinD that part I do get, what I don&#39;t understand is what is happen with the function for that to happen, it &quot;loops&quot; through the word looking for the occurrence of the character and until that is it can find no more right? and prints this last index of that is the not found (-1), is that what is happening? (I don&#39;t know if that came out right)"},{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":0,"creation_date":1297976985,"post_id":5034468,"comment_id":5632351,"body_markdown":"@Trufa: Yes, it always prints the index before checking whether it&#39;s -1.","body":"@Trufa: Yes, it always prints the index before checking whether it&#39;s -1."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":6,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1367279806,"creation_date":1297975737,"answer_id":5034468,"question_id":5034442,"body_markdown":"Try the following (Which does not print -1 at the end now!)\r\n\r\n    int index = word.indexOf(guess);\r\n    while(index &gt;= 0) {\r\n       System.out.println(index);\r\n       index = word.indexOf(guess, index+1);\r\n    }","title":"Indexes of all occurrences of character in a string","body":"<p>Try the following (Which does not print -1 at the end now!)</p>\n\n<pre><code>int index = word.indexOf(guess);\nwhile(index &gt;= 0) {\n   System.out.println(index);\n   index = word.indexOf(guess, index+1);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1297975943,"post_id":5034490,"comment_id":5632100,"body_markdown":"The general idea is right, but `word.substring(word)` won&#39;t compile. :P","body":"The general idea is right, but <code>word.substring(word)</code> won&#39;t compile. :P"},{"owner":{"account_id":68714,"reputation":772,"user_id":200328,"accept_rate":100,"display_name":"POSIX_ME_HARDER"},"score":1,"creation_date":1297976536,"post_id":5034490,"comment_id":5632240,"body_markdown":"Still has a problem : it prints continuously 2.","body":"Still has a problem : it prints continuously 2."},{"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"score":0,"creation_date":1297976795,"post_id":5034490,"comment_id":5632314,"body_markdown":"Gosh, i need to javac everything i post in here.","body":"Gosh, i need to javac everything i post in here."}],"tags":[],"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1297976746,"creation_date":1297975862,"answer_id":5034490,"question_id":5034442,"body_markdown":"    String word = &quot;bannanas&quot;;\r\n    \r\n    String guess = &quot;n&quot;;\r\n    \r\n    String temp = word;\r\n    \r\n    while(temp.indexOf(guess) != -1) {\r\n         int index = temp.indexOf(guess);\r\n         System.out.println(index);\r\n         temp = temp.substring(index + 1);\r\n    }","title":"Indexes of all occurrences of character in a string","body":"<pre><code>String word = \"bannanas\";\n\nString guess = \"n\";\n\nString temp = word;\n\nwhile(temp.indexOf(guess) != -1) {\n     int index = temp.indexOf(guess);\n     System.out.println(index);\n     temp = temp.substring(index + 1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"comment_count":0,"down_vote_count":1,"up_vote_count":198,"is_accepted":true,"score":197,"last_activity_date":1504033158,"creation_date":1297976422,"answer_id":5034592,"question_id":5034442,"body_markdown":"This should print the list of positions without the `-1` at the end that [Peter Lawrey&#39;s solution][1] &lt;strike&gt;has&lt;/strike&gt; had.\r\n\r\n    int index = word.indexOf(guess);\r\n    while (index &gt;= 0) {\r\n        System.out.println(index);\r\n        index = word.indexOf(guess, index + 1);\r\n    }\r\n\r\nIt can also be done as a `for` loop:\r\n\r\n    for (int index = word.indexOf(guess);\r\n         index &gt;= 0;\r\n         index = word.indexOf(guess, index + 1))\r\n    {\r\n        System.out.println(index);\r\n    }\r\n\r\n[Note: if `guess` can be longer than a single character, then it is possible, by analyzing the `guess` string, to loop through `word` faster than the above loops do. The benchmark for such an approach is the [Boyer-Moore algorithm][2]. However, the conditions that would favor using such an approach do not seem to be present.]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/5034468/535871\r\n  [2]: https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm","title":"Indexes of all occurrences of character in a string","body":"<p>This should print the list of positions without the <code>-1</code> at the end that <a href=\"https://stackoverflow.com/a/5034468/535871\">Peter Lawrey's solution</a> <strike>has</strike> had.</p>\n\n<pre><code>int index = word.indexOf(guess);\nwhile (index &gt;= 0) {\n    System.out.println(index);\n    index = word.indexOf(guess, index + 1);\n}\n</code></pre>\n\n<p>It can also be done as a <code>for</code> loop:</p>\n\n<pre><code>for (int index = word.indexOf(guess);\n     index &gt;= 0;\n     index = word.indexOf(guess, index + 1))\n{\n    System.out.println(index);\n}\n</code></pre>\n\n<p>[Note: if <code>guess</code> can be longer than a single character, then it is possible, by analyzing the <code>guess</code> string, to loop through <code>word</code> faster than the above loops do. The benchmark for such an approach is the <a href=\"https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm\" rel=\"noreferrer\">Boyer-Moore algorithm</a>. However, the conditions that would favor using such an approach do not seem to be present.]</p>\n"},{"tags":[],"owner":{"account_id":3393566,"reputation":2117,"user_id":2847828,"accept_rate":0,"display_name":"idris yıldız"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1425742119,"creation_date":1425740584,"answer_id":28916220,"question_id":5034442,"body_markdown":"        String input = &quot;GATATATGCG&quot;;\r\n        String substring = &quot;G&quot;;\r\n        String temp = input;\r\n        String indexOF =&quot;&quot;;\r\n        int tempIntex=1;\r\n\r\n        while(temp.indexOf(substring) != -1)\r\n        {\r\n            int index = temp.indexOf(substring);\r\n            indexOF +=(index+tempIntex)+&quot; &quot;;\r\n            tempIntex+=(index+1);\r\n            temp = temp.substring(index + 1);\r\n        }\r\n        Log.e(&quot;indexOf &quot;,&quot;&quot; + indexOF);","title":"Indexes of all occurrences of character in a string","body":"<pre><code>    String input = \"GATATATGCG\";\n    String substring = \"G\";\n    String temp = input;\n    String indexOF =\"\";\n    int tempIntex=1;\n\n    while(temp.indexOf(substring) != -1)\n    {\n        int index = temp.indexOf(substring);\n        indexOF +=(index+tempIntex)+\" \";\n        tempIntex+=(index+1);\n        temp = temp.substring(index + 1);\n    }\n    Log.e(\"indexOf \",\"\" + indexOF);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1675529,"reputation":12541,"user_id":1541188,"accept_rate":60,"display_name":"urSus"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1427570620,"creation_date":1427570620,"answer_id":29321544,"question_id":5034442,"body_markdown":"    int index = -1;\r\n    while((index = text.indexOf(&quot;on&quot;, index + 1)) &gt;= 0) {\r\n       LOG.d(&quot;index=&quot; + index);\r\n    }","title":"Indexes of all occurrences of character in a string","body":"<pre><code>int index = -1;\nwhile((index = text.indexOf(\"on\", index + 1)) &gt;= 0) {\n   LOG.d(\"index=\" + index);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4504014,"reputation":2432,"user_id":3661874,"accept_rate":67,"display_name":"fiveclubs"},"score":0,"creation_date":1436980319,"post_id":31180629,"comment_id":50843422,"body_markdown":"This is good for counting instances of a substring in a larger string, but does not return the indices of the matches.","body":"This is good for counting instances of a substring in a larger string, but does not return the indices of the matches."},{"owner":{"account_id":2686715,"reputation":8194,"user_id":2320961,"display_name":"Nic3500"},"score":0,"creation_date":1535111303,"post_id":31180629,"comment_id":90956820,"body_markdown":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value.","body":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value."},{"owner":{"account_id":1268503,"reputation":284,"user_id":1225285,"display_name":"sheu"},"score":0,"creation_date":1596124361,"post_id":31180629,"comment_id":111717408,"body_markdown":"This does not answer the question.  The question require a list of all indices","body":"This does not answer the question.  The question require a list of all indices"},{"owner":{"account_id":2479898,"reputation":1010,"user_id":2159573,"accept_rate":33,"display_name":"Saurabhcdt"},"score":0,"creation_date":1610644287,"post_id":31180629,"comment_id":116203934,"body_markdown":"This does not answers question &amp; moreover, There are multiple providers for StringUtils. Which library is used is ambiguous.","body":"This does not answers question &amp; moreover, There are multiple providers for StringUtils. Which library is used is ambiguous."}],"tags":[],"owner":{"account_id":6078914,"reputation":121,"user_id":4745299,"accept_rate":50,"display_name":"Vikas Kumbhar"},"comment_count":4,"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1532365159,"creation_date":1435829024,"answer_id":31180629,"question_id":5034442,"body_markdown":"Try this\r\n\r\n    String str = &quot;helloslkhellodjladfjhello&quot;;\r\n    String findStr = &quot;hello&quot;;\r\n    \r\n    System.out.println(StringUtils.countMatches(str, findStr));","title":"Indexes of all occurrences of character in a string","body":"<p>Try this</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhello\";\nString findStr = \"hello\";\n\nSystem.out.println(StringUtils.countMatches(str, findStr));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1464105867,"post_id":32629184,"comment_id":62343045,"body_markdown":"This is interesting in that it raises an ambiguity in the meaning of &quot;all occurrences&quot;. If `guess ` was `&quot;aba&quot;` and `word` was `&quot;ababa&quot;`, it&#39;s not clear if the `guess` occurs once or twice in `word`. (I mean, it&#39;s clear that one can find `guess` starting at two distinct positions, but since the occurrences overlap it&#39;s not clear whether they should both be counted.) This answer takes the view that overlapping occurrences are not counted as distinct. Of course, since OP&#39;s wording strongly suggests that `guess` will always have length 1, the ambiguity doesn&#39;t arise.","body":"This is interesting in that it raises an ambiguity in the meaning of &quot;all occurrences&quot;. If <code>guess </code> was <code>&quot;aba&quot;</code> and <code>word</code> was <code>&quot;ababa&quot;</code>, it&#39;s not clear if the <code>guess</code> occurs once or twice in <code>word</code>. (I mean, it&#39;s clear that one can find <code>guess</code> starting at two distinct positions, but since the occurrences overlap it&#39;s not clear whether they should both be counted.) This answer takes the view that overlapping occurrences are not counted as distinct. Of course, since OP&#39;s wording strongly suggests that <code>guess</code> will always have length 1, the ambiguity doesn&#39;t arise."}],"tags":[],"owner":{"account_id":6969254,"reputation":11,"user_id":5346170,"display_name":"Elite Vip"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442489148,"creation_date":1442489148,"answer_id":32629184,"question_id":5034442,"body_markdown":"Also, if u want to find all indexes of a String in a String.\r\n\r\n    int index = word.indexOf(guess);\r\n    while (index &gt;= 0) {\r\n        System.out.println(index);\r\n        index = word.indexOf(guess, index + guess.length());\r\n    }\r\n","title":"Indexes of all occurrences of character in a string","body":"<p>Also, if u want to find all indexes of a String in a String.</p>\n\n<pre><code>int index = word.indexOf(guess);\nwhile (index &gt;= 0) {\n    System.out.println(index);\n    index = word.indexOf(guess, index + guess.length());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1464106002,"post_id":35380313,"comment_id":62343130,"body_markdown":"Did you even try running this code? It will print out every position (0, 1, 2, ...) until the index of the last occurrence of `mySubstring`, regardless of whether `mySubstring` can be found at each position. Not at all what OP wanted..","body":"Did you even try running this code? It will print out every position (0, 1, 2, ...) until the index of the last occurrence of <code>mySubstring</code>, regardless of whether <code>mySubstring</code> can be found at each position. Not at all what OP wanted.."}],"tags":[],"owner":{"account_id":1125613,"reputation":18964,"user_id":1112963,"accept_rate":59,"display_name":"Zon"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1455369125,"creation_date":1455369125,"answer_id":35380313,"question_id":5034442,"body_markdown":"This can be done by iterating `myString` and shifting `fromIndex` parameter in `indexOf()`:\r\n\r\n      int currentIndex = 0;\r\n\r\n      while (\r\n        myString.indexOf(\r\n          mySubstring,\r\n          currentIndex) &gt;= 0) {\r\n        \r\n        System.out.println(currentIndex);\r\n\r\n        currentIndex++;\r\n      }","title":"Indexes of all occurrences of character in a string","body":"<p>This can be done by iterating <code>myString</code> and shifting <code>fromIndex</code> parameter in <code>indexOf()</code>:</p>\n\n<pre><code>  int currentIndex = 0;\n\n  while (\n    myString.indexOf(\n      mySubstring,\n      currentIndex) &gt;= 0) {\n\n    System.out.println(currentIndex);\n\n    currentIndex++;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7383218,"reputation":1861,"user_id":5619133,"accept_rate":0,"display_name":"Ian S."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1473534889,"creation_date":1473534889,"answer_id":39429709,"question_id":5034442,"body_markdown":"I had this problem as well, until I came up with this method.\r\n\r\n    public static int[] indexesOf(String s, String flag) {\r\n        int flagLen = flag.length();\r\n        String current = s;\r\n        int[] res = new int[s.length()];\r\n        int count = 0;\r\n        int base = 0;\r\n        while(current.contains(flag)) {\r\n            int index = current.indexOf(flag);\r\n            res[count] = index + base;\r\n            base += index + flagLen;\r\n            current = current.substring(current.indexOf(flag) + flagLen, current.length());\r\n            ++ count;\r\n        }\r\n        return Arrays.copyOf(res, count);\r\n    }\r\n\r\nThis method can be used to find indexes of any flag of any length in a string, for example:\r\n\r\n    public class Main {\r\n        \r\n        public static void main(String[] args) {\r\n            int[] indexes = indexesOf(&quot;Hello, yellow jello&quot;, &quot;ll&quot;);\r\n\r\n            // Prints [2, 9, 16]\r\n            System.out.println(Arrays.toString(indexes));\r\n        }\r\n        \r\n        public static int[] indexesOf(String s, String flag) {\r\n            int flagLen = flag.length();\r\n            String current = s;\r\n            int[] res = new int[s.length()];\r\n            int count = 0;\r\n            int base = 0;\r\n            while(current.contains(flag)) {\r\n                int index = current.indexOf(flag);\r\n                res[count] = index + base;\r\n                base += index + flagLen;\r\n                current = current.substring(current.indexOf(flag) + flagLen, current.length());\r\n                ++ count;\r\n            }\r\n            return Arrays.copyOf(res, count);\r\n        }\r\n    }","title":"Indexes of all occurrences of character in a string","body":"<p>I had this problem as well, until I came up with this method.</p>\n\n<pre><code>public static int[] indexesOf(String s, String flag) {\n    int flagLen = flag.length();\n    String current = s;\n    int[] res = new int[s.length()];\n    int count = 0;\n    int base = 0;\n    while(current.contains(flag)) {\n        int index = current.indexOf(flag);\n        res[count] = index + base;\n        base += index + flagLen;\n        current = current.substring(current.indexOf(flag) + flagLen, current.length());\n        ++ count;\n    }\n    return Arrays.copyOf(res, count);\n}\n</code></pre>\n\n<p>This method can be used to find indexes of any flag of any length in a string, for example:</p>\n\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        int[] indexes = indexesOf(\"Hello, yellow jello\", \"ll\");\n\n        // Prints [2, 9, 16]\n        System.out.println(Arrays.toString(indexes));\n    }\n\n    public static int[] indexesOf(String s, String flag) {\n        int flagLen = flag.length();\n        String current = s;\n        int[] res = new int[s.length()];\n        int count = 0;\n        int base = 0;\n        while(current.contains(flag)) {\n            int index = current.indexOf(flag);\n            res[count] = index + base;\n            base += index + flagLen;\n            current = current.substring(current.indexOf(flag) + flagLen, current.length());\n            ++ count;\n        }\n        return Arrays.copyOf(res, count);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2222583,"reputation":21731,"user_id":1961634,"accept_rate":81,"display_name":"Dariusz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1490861850,"creation_date":1490861850,"answer_id":43112176,"question_id":5034442,"body_markdown":"A class for splitting strings I came up with. A short test is provided at the end.\r\n\r\n`SplitStringUtils.smartSplitToShorterStrings(String str, int maxLen, int maxParts)` will split by spaces without breaking words, if possible, and if not, will split by indexes according to maxLen. \r\n\r\nOther methods provided to control how it is split: `bruteSplitLimit(String str, int maxLen, int maxParts)`, `spaceSplit(String str, int maxLen, int maxParts)`.\r\n\r\n    public class SplitStringUtils {\r\n    \r\n      public static String[] smartSplitToShorterStrings(String str, int maxLen, int maxParts) {\r\n        if (str.length() &lt;= maxLen) {\r\n          return new String[] {str};\r\n        }\r\n        if (str.length() &gt; maxLen*maxParts) {\r\n          return bruteSplitLimit(str, maxLen, maxParts);\r\n        }\r\n        \r\n        String[] res = spaceSplit(str, maxLen, maxParts);\r\n        if (res != null) {\r\n          return res;\r\n        }\r\n        \r\n        return bruteSplitLimit(str, maxLen, maxParts);\r\n      }\r\n    \r\n      public static String[] bruteSplitLimit(String str, int maxLen, int maxParts) {\r\n        String[] bruteArr = bruteSplit(str, maxLen);\r\n        String[] ret = Arrays.stream(bruteArr)\r\n              .limit(maxParts)\r\n              .collect(Collectors.toList())\r\n              .toArray(new String[maxParts]);\r\n        return ret;\r\n      }\r\n    \r\n      public static String[] bruteSplit(String name, int maxLen) {\r\n        List&lt;String&gt; res = new ArrayList&lt;&gt;();\r\n        int start =0;\r\n        int end = maxLen;\r\n        while (end &lt;= name.length()) {\r\n          String substr = name.substring(start, end);\r\n          res.add(substr);\r\n          start = end;\r\n          end +=maxLen;\r\n        }\r\n        String substr = name.substring(start, name.length());\r\n        res.add(substr);\r\n        return res.toArray(new String[res.size()]);\r\n      }\r\n      \r\n      public static String[] spaceSplit(String str, int maxLen, int maxParts) {\r\n        List&lt;Integer&gt; spaceIndexes = findSplitPoints(str, &#39; &#39;);\r\n        List&lt;Integer&gt; goodSplitIndexes = new ArrayList&lt;&gt;();\r\n        int goodIndex = -1; \r\n        int curPartMax = maxLen;\r\n        for (int i=0; i&lt; spaceIndexes.size(); i++) {\r\n          int idx = spaceIndexes.get(i);\r\n          if (idx &lt; curPartMax) {\r\n            goodIndex = idx;\r\n          } else {\r\n            goodSplitIndexes.add(goodIndex+1);\r\n            curPartMax = goodIndex+1+maxLen;\r\n          }\r\n        }\r\n        if (goodSplitIndexes.get(goodSplitIndexes.size()-1) != str.length()) {\r\n          goodSplitIndexes.add(str.length());\r\n        }\r\n        if (goodSplitIndexes.size()&lt;=maxParts) {\r\n          List&lt;String&gt; res = new ArrayList&lt;&gt;();\r\n          int start = 0;\r\n          for (int i=0; i&lt;goodSplitIndexes.size(); i++) {\r\n            int end = goodSplitIndexes.get(i);\r\n            if (end-start &gt; maxLen) {\r\n              return null;\r\n            }\r\n            res.add(str.substring(start, end));\r\n            start = end;\r\n          }\r\n          return res.toArray(new String[res.size()]);\r\n        }\r\n        return null;\r\n      }\r\n    \r\n    \r\n      private static List&lt;Integer&gt; findSplitPoints(String str, char c) {\r\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n          if (str.charAt(i) == c) {\r\n            list.add(i);\r\n          }\r\n        }\r\n        list.add(str.length());\r\n        return list;\r\n      }\r\n    }\r\n\r\nSimple test code:\r\n\r\n      public static void main(String[] args) {\r\n        String [] testStrings = {\r\n            &quot;123&quot;,\r\n            &quot;123 123 123 1123 123 123 123 123 123 123&quot;,\r\n            &quot;123 54123 5123 513 54w567 3567 e56 73w45 63 567356 735687 4678 4678 u4678 u4678 56rt64w5 6546345&quot;,\r\n            &quot;1345678934576235784620957029356723578946&quot;,\r\n            &quot;12764444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444&quot;,\r\n            &quot;3463356 35673567567 3567 35 3567 35 675 653 673567 777777777777777777777777777777777777777777777777777777777777777777&quot;\r\n        };\r\n        \r\n        int max = 35;\r\n        int maxparts = 2;\r\n    \r\n        \r\n        for (String str : testStrings) {\r\n          System.out.println(&quot;TEST\\n    |&quot;+str+&quot;|&quot;);\r\n          printSplitDetails(max, maxparts);\r\n          String[] res = smartSplitToShorterStrings(str, max, maxparts);\r\n          for (int i=0; i&lt; res.length;i++) {\r\n            System.out.println(&quot;  &quot;+i+&quot;: &quot;+res[i]);\r\n          }\r\n          System.out.println(&quot;===========================================================================================================================================================&quot;);\r\n        }\r\n        \r\n      }\r\n    \r\n      static void printSplitDetails(int max, int maxparts) {\r\n        System.out.print(&quot;  X: &quot;);\r\n        for (int i=0; i&lt;max*maxparts; i++) {\r\n          if (i%max == 0) {\r\n            System.out.print(&quot;|&quot;);\r\n          } else {\r\n            System.out.print(&quot;-&quot;);\r\n          }\r\n        }\r\n        System.out.println();\r\n      }","title":"Indexes of all occurrences of character in a string","body":"<p>A class for splitting strings I came up with. A short test is provided at the end.</p>\n\n<p><code>SplitStringUtils.smartSplitToShorterStrings(String str, int maxLen, int maxParts)</code> will split by spaces without breaking words, if possible, and if not, will split by indexes according to maxLen. </p>\n\n<p>Other methods provided to control how it is split: <code>bruteSplitLimit(String str, int maxLen, int maxParts)</code>, <code>spaceSplit(String str, int maxLen, int maxParts)</code>.</p>\n\n<pre><code>public class SplitStringUtils {\n\n  public static String[] smartSplitToShorterStrings(String str, int maxLen, int maxParts) {\n    if (str.length() &lt;= maxLen) {\n      return new String[] {str};\n    }\n    if (str.length() &gt; maxLen*maxParts) {\n      return bruteSplitLimit(str, maxLen, maxParts);\n    }\n\n    String[] res = spaceSplit(str, maxLen, maxParts);\n    if (res != null) {\n      return res;\n    }\n\n    return bruteSplitLimit(str, maxLen, maxParts);\n  }\n\n  public static String[] bruteSplitLimit(String str, int maxLen, int maxParts) {\n    String[] bruteArr = bruteSplit(str, maxLen);\n    String[] ret = Arrays.stream(bruteArr)\n          .limit(maxParts)\n          .collect(Collectors.toList())\n          .toArray(new String[maxParts]);\n    return ret;\n  }\n\n  public static String[] bruteSplit(String name, int maxLen) {\n    List&lt;String&gt; res = new ArrayList&lt;&gt;();\n    int start =0;\n    int end = maxLen;\n    while (end &lt;= name.length()) {\n      String substr = name.substring(start, end);\n      res.add(substr);\n      start = end;\n      end +=maxLen;\n    }\n    String substr = name.substring(start, name.length());\n    res.add(substr);\n    return res.toArray(new String[res.size()]);\n  }\n\n  public static String[] spaceSplit(String str, int maxLen, int maxParts) {\n    List&lt;Integer&gt; spaceIndexes = findSplitPoints(str, ' ');\n    List&lt;Integer&gt; goodSplitIndexes = new ArrayList&lt;&gt;();\n    int goodIndex = -1; \n    int curPartMax = maxLen;\n    for (int i=0; i&lt; spaceIndexes.size(); i++) {\n      int idx = spaceIndexes.get(i);\n      if (idx &lt; curPartMax) {\n        goodIndex = idx;\n      } else {\n        goodSplitIndexes.add(goodIndex+1);\n        curPartMax = goodIndex+1+maxLen;\n      }\n    }\n    if (goodSplitIndexes.get(goodSplitIndexes.size()-1) != str.length()) {\n      goodSplitIndexes.add(str.length());\n    }\n    if (goodSplitIndexes.size()&lt;=maxParts) {\n      List&lt;String&gt; res = new ArrayList&lt;&gt;();\n      int start = 0;\n      for (int i=0; i&lt;goodSplitIndexes.size(); i++) {\n        int end = goodSplitIndexes.get(i);\n        if (end-start &gt; maxLen) {\n          return null;\n        }\n        res.add(str.substring(start, end));\n        start = end;\n      }\n      return res.toArray(new String[res.size()]);\n    }\n    return null;\n  }\n\n\n  private static List&lt;Integer&gt; findSplitPoints(String str, char c) {\n    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\n    for (int i = 0; i &lt; str.length(); i++) {\n      if (str.charAt(i) == c) {\n        list.add(i);\n      }\n    }\n    list.add(str.length());\n    return list;\n  }\n}\n</code></pre>\n\n<p>Simple test code:</p>\n\n<pre><code>  public static void main(String[] args) {\n    String [] testStrings = {\n        \"123\",\n        \"123 123 123 1123 123 123 123 123 123 123\",\n        \"123 54123 5123 513 54w567 3567 e56 73w45 63 567356 735687 4678 4678 u4678 u4678 56rt64w5 6546345\",\n        \"1345678934576235784620957029356723578946\",\n        \"12764444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444\",\n        \"3463356 35673567567 3567 35 3567 35 675 653 673567 777777777777777777777777777777777777777777777777777777777777777777\"\n    };\n\n    int max = 35;\n    int maxparts = 2;\n\n\n    for (String str : testStrings) {\n      System.out.println(\"TEST\\n    |\"+str+\"|\");\n      printSplitDetails(max, maxparts);\n      String[] res = smartSplitToShorterStrings(str, max, maxparts);\n      for (int i=0; i&lt; res.length;i++) {\n        System.out.println(\"  \"+i+\": \"+res[i]);\n      }\n      System.out.println(\"===========================================================================================================================================================\");\n    }\n\n  }\n\n  static void printSplitDetails(int max, int maxparts) {\n    System.out.print(\"  X: \");\n    for (int i=0; i&lt;max*maxparts; i++) {\n      if (i%max == 0) {\n        System.out.print(\"|\");\n      } else {\n        System.out.print(\"-\");\n      }\n    }\n    System.out.println();\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1517627178,"creation_date":1517627178,"answer_id":48593531,"question_id":5034442,"body_markdown":"With Java9, one can make use of the [`iterate(int seed, IntPredicate hasNext,IntUnaryOperator next)`](https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-) as follows:-\r\n\r\n    List&lt;Integer&gt; indexes = IntStream\r\n              .iterate(word.indexOf(c), index -&gt; index &gt;= 0, index -&gt; word.indexOf(c, index + 1))\r\n              .boxed()\r\n              .collect(Collectors.toList());\r\n    System.out.printlnt(indexes);","title":"Indexes of all occurrences of character in a string","body":"<p>With Java9, one can make use of the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-\" rel=\"noreferrer\"><code>iterate(int seed, IntPredicate hasNext,IntUnaryOperator next)</code></a> as follows:-</p>\n\n<pre><code>List&lt;Integer&gt; indexes = IntStream\n          .iterate(word.indexOf(c), index -&gt; index &gt;= 0, index -&gt; word.indexOf(c, index + 1))\n          .boxed()\n          .collect(Collectors.toList());\nSystem.out.printlnt(indexes);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4944779,"reputation":524,"user_id":4934096,"display_name":"Bamidele Alegbe"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1594286481,"creation_date":1594286481,"answer_id":62811589,"question_id":5034442,"body_markdown":"This is a java 8 solution.\r\n\r\n    public int[] solution (String s, String subString){\r\n            int initialIndex = s.indexOf(subString);\r\n            List&lt;Integer&gt; indexList = new ArrayList&lt;&gt;();\r\n            while (initialIndex &gt;=0){\r\n                indexList.add(initialIndex);\r\n                initialIndex = s.indexOf(subString, initialIndex+1);\r\n            }\r\n            int [] intA = indexList.stream().mapToInt(i-&gt;i).toArray();\r\n            return intA;\r\n        }","title":"Indexes of all occurrences of character in a string","body":"<p>This is a java 8 solution.</p>\n<pre><code>public int[] solution (String s, String subString){\n        int initialIndex = s.indexOf(subString);\n        List&lt;Integer&gt; indexList = new ArrayList&lt;&gt;();\n        while (initialIndex &gt;=0){\n            indexList.add(initialIndex);\n            initialIndex = s.indexOf(subString, initialIndex+1);\n        }\n        int [] intA = indexList.stream().mapToInt(i-&gt;i).toArray();\n        return intA;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6361550,"reputation":37042,"user_id":4936904,"display_name":"Pavneet_Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1594903598,"creation_date":1594903598,"answer_id":62935035,"question_id":5034442,"body_markdown":"This can be done in a functional way with Java 9 using regular expression:\r\n\r\n    Pattern.compile(Pattern.quote(guess)) // sanitize input and create pattern\r\n                .matcher(word) // create matcher\r\n                .results()     // get the MatchResults, Java 9 method\r\n                .map(MatchResult::start) // get the first index\r\n                .collect(Collectors.toList()) // collect found indices into a list\r\n        );\r\n\r\nHere&#39;s the Kotlin Solution to add this logic as a new a new methods into `CharSequence` API using extension method:\r\n\r\n     // Extension method\r\n    fun CharSequence.indicesOf(input: String): List&lt;Int&gt; =\r\n        Regex(Pattern.quote(input)) // build regex\r\n            .findAll(this)          // get the matches\r\n            .map { it.range.first } // get the index\r\n            .toCollection(mutableListOf()) // collect the result as list\r\n\r\n    // call the methods as\r\n    &quot;Banana&quot;.indicesOf(&quot;a&quot;) // [1, 3, 5]\r\n\r\n","title":"Indexes of all occurrences of character in a string","body":"<p>This can be done in a functional way with Java 9 using regular expression:</p>\n<pre><code>Pattern.compile(Pattern.quote(guess)) // sanitize input and create pattern\n            .matcher(word) // create matcher\n            .results()     // get the MatchResults, Java 9 method\n            .map(MatchResult::start) // get the first index\n            .collect(Collectors.toList()) // collect found indices into a list\n    );\n</code></pre>\n<p>Here's the Kotlin Solution to add this logic as a new a new methods into <code>CharSequence</code> API using extension method:</p>\n<pre><code> // Extension method\nfun CharSequence.indicesOf(input: String): List&lt;Int&gt; =\n    Regex(Pattern.quote(input)) // build regex\n        .findAll(this)          // get the matches\n        .map { it.range.first } // get the index\n        .toCollection(mutableListOf()) // collect the result as list\n\n// call the methods as\n&quot;Banana&quot;.indicesOf(&quot;a&quot;) // [1, 3, 5]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1615680251,"creation_date":1615680251,"answer_id":66619784,"question_id":5034442,"body_markdown":"# Java 8+\r\n\r\nTo find all the indexes of a particular character in a `String`, one can create an [`IntStream`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html) of all the indexes and `filter` over it.\r\n\r\n```\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.IntStream;\r\n//...\r\nString word = &quot;bannanas&quot;;\r\nchar search = &#39;n&#39;;\r\n//To get List of indexes:\r\nList&lt;Integer&gt; indexes = IntStream.range(0, word.length())\r\n        .filter(i -&gt; word.charAt(i) == search).boxed()\r\n\t\t.collect(Collectors.toList());\r\n//To get array of indexes:\r\nint[] indexes = IntStream.range(0, word.length())\r\n        .filter(i -&gt; word.charAt(i) == search).toArray();\r\n```","title":"Indexes of all occurrences of character in a string","body":"<h1>Java 8+</h1>\n<p>To find all the indexes of a particular character in a <code>String</code>, one can create an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a> of all the indexes and <code>filter</code> over it.</p>\n<pre><code>import java.util.stream.Collectors;\nimport java.util.stream.IntStream;\n//...\nString word = &quot;bannanas&quot;;\nchar search = 'n';\n//To get List of indexes:\nList&lt;Integer&gt; indexes = IntStream.range(0, word.length())\n        .filter(i -&gt; word.charAt(i) == search).boxed()\n        .collect(Collectors.toList());\n//To get array of indexes:\nint[] indexes = IntStream.range(0, word.length())\n        .filter(i -&gt; word.charAt(i) == search).toArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17665549,"reputation":46,"user_id":12823018,"display_name":"4shutosh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682845225,"creation_date":1682845225,"answer_id":76140376,"question_id":5034442,"body_markdown":"Based on @Pavneet_Singh&#39;s answer, a kotlin extension function to return a pair of start and end of the substring, and ignore cases. \r\n\r\n    fun CharSequence.indicesOf(input: String): List&lt;Pair&lt;Int, Int&gt;&gt; =\r\n    Pattern.compile(input, Pattern.CASE_INSENSITIVE).toRegex()\r\n        .findAll(this)\r\n        .map { Pair(it.range.first, it.range.last) }\r\n        .toCollection(mutableListOf())\r\n\r\n","title":"Indexes of all occurrences of character in a string","body":"<p>Based on @Pavneet_Singh's answer, a kotlin extension function to return a pair of start and end of the substring, and ignore cases.</p>\n<pre><code>fun CharSequence.indicesOf(input: String): List&lt;Pair&lt;Int, Int&gt;&gt; =\nPattern.compile(input, Pattern.CASE_INSENSITIVE).toRegex()\n    .findAll(this)\n    .map { Pair(it.range.first, it.range.last) }\n    .toCollection(mutableListOf())\n</code></pre>\n"}],"owner":{"account_id":211093,"reputation":40153,"user_id":463065,"accept_rate":80,"display_name":"Trufa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235347,"favorite_count":0,"down_vote_count":0,"up_vote_count":128,"accepted_answer_id":5034592,"answer_count":16,"score":128,"last_activity_date":1682845225,"creation_date":1297975582,"question_id":5034442,"body_markdown":"The following code will print 2\r\n\r\n    String word = &quot;bannanas&quot;;\r\n    String guess = &quot;n&quot;;\r\n    int index;\r\n    System.out.println(\t\r\n        index = word.indexOf(guess)\r\n    );\r\nI would like to know how to get all the indexes of &quot;n&quot; (&quot;guess&quot;) in the string &quot;bannanas&quot;\r\n\r\nThe expected result would be: `[2,3,5]`","title":"Indexes of all occurrences of character in a string","body":"<p>The following code will print 2</p>\n\n<pre><code>String word = \"bannanas\";\nString guess = \"n\";\nint index;\nSystem.out.println( \n    index = word.indexOf(guess)\n);\n</code></pre>\n\n<p>I would like to know how to get all the indexes of \"n\" (\"guess\") in the string \"bannanas\"</p>\n\n<p>The expected result would be: <code>[2,3,5]</code></p>\n"},{"tags":["java","hibernate","annotations"],"answers":[{"comments":[{"owner":{"account_id":6783269,"reputation":588,"user_id":5222829,"accept_rate":79,"display_name":"Manjunath M"},"score":0,"creation_date":1521546353,"post_id":27289709,"comment_id":85767366,"body_markdown":"I dont want to load the childrens first. I want to use lazy loading but still can this issue will be fixed?","body":"I dont want to load the childrens first. I want to use lazy loading but still can this issue will be fixed?"},{"owner":{"account_id":4558759,"reputation":574,"user_id":3701669,"display_name":"Alexandre"},"score":1,"creation_date":1523986382,"post_id":27289709,"comment_id":86784403,"body_markdown":"@ManjunathM Did you use @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)annotation in your DAO method? If you did so, change it to &quot;SUPPORTS&quot;, &quot;REQUIRED&quot; or &quot;MANDATORY&quot;. This could work for you ;)","body":"@ManjunathM Did you use @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED&zwnj;&#8203;)annotation in your DAO method? If you did so, change it to &quot;SUPPORTS&quot;, &quot;REQUIRED&quot; or &quot;MANDATORY&quot;. This could work for you ;)"},{"owner":{"account_id":5301557,"reputation":386,"user_id":4230977,"accept_rate":94,"display_name":"MR AND"},"score":0,"creation_date":1556034822,"post_id":27289709,"comment_id":98296860,"body_markdown":"This solution worked for me, but I always see the performance issue with eager fetch type.","body":"This solution worked for me, but I always see the performance issue with eager fetch type."}],"tags":[],"owner":{"account_id":4190509,"reputation":1334,"user_id":3433230,"accept_rate":100,"display_name":"Tkachuk_Evgen"},"comment_count":3,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1460054606,"creation_date":1417683025,"answer_id":27289709,"question_id":27289632,"body_markdown":" Hibernate documentation says:\r\n\r\n&gt; In the normal case the orders association would be lazy loaded by\r\n&gt; Hibernate\r\n\r\nSo, you need to use eager fetching:              \r\n\r\n     @OneToMany(mappedBy = &quot;war&quot;,fetch = FetchType.EAGER)\r\n     private List&lt;WarPlayer&gt; players;","title":"Hibernate - @OneToMany - com.sun.jdi.InvocationException occurred invoking method","body":"<p>Hibernate documentation says:</p>\n\n<blockquote>\n  <p>In the normal case the orders association would be lazy loaded by\n  Hibernate</p>\n</blockquote>\n\n<p>So, you need to use eager fetching:              </p>\n\n<pre><code> @OneToMany(mappedBy = \"war\",fetch = FetchType.EAGER)\n private List&lt;WarPlayer&gt; players;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5256603,"reputation":261,"user_id":4199329,"accept_rate":60,"display_name":"Arturo"},"score":0,"creation_date":1417684303,"post_id":27289868,"comment_id":43046295,"body_markdown":"Thanks, but I forgot to say I have @Transactional annotation. With this I get the same error. My problem solved with the Tkachuk_Evgen aswer","body":"Thanks, but I forgot to say I have @Transactional annotation. With this I get the same error. My problem solved with the Tkachuk_Evgen aswer"}],"tags":[],"owner":{"account_id":4840666,"reputation":163,"user_id":3905789,"accept_rate":33,"display_name":"Harshit"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417683587,"creation_date":1417683587,"answer_id":27289868,"question_id":27289632,"body_markdown":"Replace My Dao\r\n\r\n    @Override\r\n    public War findById(int id) throws DaoException {\r\n\r\n        Transaction transaction = null;\r\n        Session session = null;\r\n\r\n        try {\r\n            session = sessionFactory.openSession();\r\n            session.setFlushMode(FlushMode.COMMIT);\r\n            transaction = session.beginTransaction();\r\n    \r\n            String hql = &quot;from War where ID = :id&quot;;\r\n            Query query = session.createQuery(hql);\r\n            \r\n                    query.setParameter(&quot;id&quot;, id).uniqueResult();\r\n                   \r\n        } catch (Exception e) {\r\n            throw new DaoException(e.getMessage());\r\n        }\r\n\r\n        return war;\r\n    }","title":"Hibernate - @OneToMany - com.sun.jdi.InvocationException occurred invoking method","body":"<p>Replace My Dao</p>\n\n<pre><code>@Override\npublic War findById(int id) throws DaoException {\n\n    Transaction transaction = null;\n    Session session = null;\n\n    try {\n        session = sessionFactory.openSession();\n        session.setFlushMode(FlushMode.COMMIT);\n        transaction = session.beginTransaction();\n\n        String hql = \"from War where ID = :id\";\n        Query query = session.createQuery(hql);\n\n                query.setParameter(\"id\", id).uniqueResult();\n\n    } catch (Exception e) {\n        throw new DaoException(e.getMessage());\n    }\n\n    return war;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10878966,"reputation":734,"user_id":8000120,"display_name":"J. Jerez"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1551492550,"creation_date":1504702906,"answer_id":46075980,"question_id":27289632,"body_markdown":"FetchType.EAGER is not efficient. You must include the org.hibernate.annotations.Fetch annotation.\r\n\r\nSo:\r\n\r\n    @Fetch(FetchMode.SUBSELECT)\r\n    @OneToMany(mappedBy = &quot;war&quot;, fetch = FetchType.LAZY)\r\n    private List&lt;WarPlayer&gt; players;","title":"Hibernate - @OneToMany - com.sun.jdi.InvocationException occurred invoking method","body":"<p>FetchType.EAGER is not efficient. You must include the org.hibernate.annotations.Fetch annotation.</p>\n\n<p>So:</p>\n\n<pre><code>@Fetch(FetchMode.SUBSELECT)\n@OneToMany(mappedBy = \"war\", fetch = FetchType.LAZY)\nprivate List&lt;WarPlayer&gt; players;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15282475,"reputation":1,"user_id":11026400,"display_name":"Aarti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549518878,"creation_date":1549515113,"answer_id":54566485,"question_id":27289632,"body_markdown":"In my case it  is because I was doing\r\n\r\n    @Query(&quot;SELECT amg FROM AgentmasterGroup amg WHERE amg.merchantmaster.id=:merchantId&quot;)\r\n    \r\n    List&lt;Map&lt;String,Object&gt;&gt; findAgentmasterGroupByMerchantId(@Param(&quot;merchantId&quot;) Integer merchantId);\r\n\r\nsince `jpa` did not return entity as `List&lt;Map&lt;String,Object&gt;&gt;` when we select by alias of entity, so we need to do:\r\n\r\n    @Query(&quot;SELECT amg FROM AgentmasterGroup amg WHERE amg.merchantmaster.id=:merchantId&quot;)\r\n\r\n    List&lt;AgentmasterGroup&gt; findAgentmasterGroupByMerchantId(@Param(&quot;merchantId&quot;) Integer merchantId);\r\n\r\nafter that we can convert list of entity to list of map.\r\nor we can also do `select` query as:\r\n\r\n    @Query(&quot;SELECT amg.id as id, amg.name as name  FROM AgentmasterGroup amg WHERE amg.merchantmaster.id=:merchantId&quot;)\r\n\r\n    List&lt;Map&lt;String,Object&gt;&gt; findAgentmasterGroupByMerchantId(@Param(&quot;merchantId&quot;) Integer merchantId);\r\n\r\n","title":"Hibernate - @OneToMany - com.sun.jdi.InvocationException occurred invoking method","body":"<p>In my case it  is because I was doing</p>\n\n<pre><code>@Query(\"SELECT amg FROM AgentmasterGroup amg WHERE amg.merchantmaster.id=:merchantId\")\n\nList&lt;Map&lt;String,Object&gt;&gt; findAgentmasterGroupByMerchantId(@Param(\"merchantId\") Integer merchantId);\n</code></pre>\n\n<p>since <code>jpa</code> did not return entity as <code>List&lt;Map&lt;String,Object&gt;&gt;</code> when we select by alias of entity, so we need to do:</p>\n\n<pre><code>@Query(\"SELECT amg FROM AgentmasterGroup amg WHERE amg.merchantmaster.id=:merchantId\")\n\nList&lt;AgentmasterGroup&gt; findAgentmasterGroupByMerchantId(@Param(\"merchantId\") Integer merchantId);\n</code></pre>\n\n<p>after that we can convert list of entity to list of map.\nor we can also do <code>select</code> query as:</p>\n\n<pre><code>@Query(\"SELECT amg.id as id, amg.name as name  FROM AgentmasterGroup amg WHERE amg.merchantmaster.id=:merchantId\")\n\nList&lt;Map&lt;String,Object&gt;&gt; findAgentmasterGroupByMerchantId(@Param(\"merchantId\") Integer merchantId);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28441358,"reputation":1,"user_id":21760686,"display_name":"Sampath Nk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682844998,"creation_date":1682655038,"answer_id":76126203,"question_id":27289632,"body_markdown":"This issue pops with latest ver of spring-data jpa versions. \r\n\r\nIf underlying DB is not having the data corresponding to id, we get above error. (both null check fails and not a valid entity object as well)\r\n\r\nIf so better to use the optional API like this. using it it will return either null or valid entity object. \r\n\r\n    @Resource\r\n    RegionRepo regionRepo;\r\n    \r\n    regionRepo.findById(id).orElse(null);\r\n    \r\n    RegionRepo is interface extends JpaRepository","title":"Hibernate - @OneToMany - com.sun.jdi.InvocationException occurred invoking method","body":"<p>This issue pops with latest ver of spring-data jpa versions.</p>\n<p>If underlying DB is not having the data corresponding to id, we get above error. (both null check fails and not a valid entity object as well)</p>\n<p>If so better to use the optional API like this. using it it will return either null or valid entity object.</p>\n<pre><code>@Resource\nRegionRepo regionRepo;\n\nregionRepo.findById(id).orElse(null);\n\nRegionRepo is interface extends JpaRepository\n</code></pre>\n"}],"owner":{"account_id":5256603,"reputation":261,"user_id":4199329,"accept_rate":60,"display_name":"Arturo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32838,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":27289709,"answer_count":5,"score":1,"last_activity_date":1682844998,"creation_date":1417682783,"question_id":27289632,"body_markdown":"I have a problem with OneToMany relations.\r\nI&#39;m using spring-mvc and spring-security and hibernate 4. \r\n\r\nI&#39;m using annotations for all.\r\n\r\nMy problem is in the entity War when I see the atributte List&lt;WarPlayer&gt; players debugging, I see `players= PersistentBag` and when I click it `com.sun.jdi.InvocationException occurred invoking method.` \r\n\r\nAlso I get this Exceptions:\r\n\r\n    org.apache.jasper.JasperException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: clanwar.model.War.players, could not initialize proxy - no Session\r\n\r\n    org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: clanwar.model.War.players, could not initialize proxy - no Session\r\n\r\nEntities:\r\n\r\n    @Entity\r\n    @Table(name = &quot;WARS&quot;)\r\n    public class War implements Serializable {\r\n    \t\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.AUTO)\r\n    \t@Column(name = &quot;ID&quot;, nullable = false)\r\n    \tprivate int id;\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;CLAN&quot;)\r\n    \tprivate Clan clan;\r\n    \t\r\n    \t@Column(name = &quot;START_DATE&quot;)\r\n    \tprivate Date startDate;\r\n    \t\r\n    \t@Column(name = &quot;ENEMY_NAME&quot;)\r\n    \tprivate String enemyName;\r\n    \t\r\n    \t@OneToMany(mappedBy = &quot;war&quot;)\r\n    \tprivate List&lt;WarPlayer&gt; players;\r\n    \t\r\n    \t@Transient\r\n    \tprivate List&lt;Enemy&gt; enemies;\r\n    \t\r\n    \tpublic War() { }\r\n    \r\n    \t// Getters and setters.\r\n    \t\r\n    }\r\n\r\n--\r\n\r\n    @Entity\r\n    @Table(name = &quot;WAR_PLAYERS&quot;)\r\n    public class WarPlayer implements Serializable {\r\n    \t\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t\r\n    \t@Id\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;WAR&quot;)\r\n    \tprivate War war;\r\n    \t\r\n    \t@Id\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;PLAYER&quot;)\r\n    \tprivate Player player;\r\n    \t\r\n    \t@Column(name = &quot;WAR_NUMBER&quot;)\r\n    \tprivate int warNumber;\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;OBJETIVE_1&quot;)\r\n    \tprivate Attack objetive1;\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;OBJETIVE_2&quot;)\r\n    \tprivate Attack objetive2;\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;RECOMMENDED_1&quot;)\r\n    \tprivate Attack recommended1;\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;RECOMMENDED_2&quot;)\r\n    \tprivate Attack recommended2;\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;FINAL_1&quot;)\r\n    \tprivate Attack final1;\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;FINAL_2&quot;)\r\n    \tprivate Attack final2;\r\n    \tprivate String comment;\r\n    \t\r\n    \tpublic WarPlayer() {}\r\n    \r\n        // Getters and setters\r\n    \t\r\n    }\r\n\r\nMy DAO\r\n\r\n    @Override\r\n    \tpublic War findById(int id) throws DaoException {\r\n    \t\t\r\n    \t\tWar war;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\twar = (War) getSession()\r\n    \t\t\t\t\t.createQuery(&quot;from War where ID = :id&quot;)\r\n    \t\t\t\t\t.setParameter(&quot;id&quot;, id)\r\n    \t\t\t\t\t.uniqueResult();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tthrow new DaoException(e.getMessage());\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn war;\r\n    \t}","title":"Hibernate - @OneToMany - com.sun.jdi.InvocationException occurred invoking method","body":"<p>I have a problem with OneToMany relations.\nI'm using spring-mvc and spring-security and hibernate 4. </p>\n\n<p>I'm using annotations for all.</p>\n\n<p>My problem is in the entity War when I see the atributte List players debugging, I see <code>players= PersistentBag</code> and when I click it <code>com.sun.jdi.InvocationException occurred invoking method.</code> </p>\n\n<p>Also I get this Exceptions:</p>\n\n<pre><code>org.apache.jasper.JasperException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: clanwar.model.War.players, could not initialize proxy - no Session\n\norg.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: clanwar.model.War.players, could not initialize proxy - no Session\n</code></pre>\n\n<p>Entities:</p>\n\n<pre><code>@Entity\n@Table(name = \"WARS\")\npublic class War implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = \"ID\", nullable = false)\n    private int id;\n\n    @ManyToOne\n    @JoinColumn(name = \"CLAN\")\n    private Clan clan;\n\n    @Column(name = \"START_DATE\")\n    private Date startDate;\n\n    @Column(name = \"ENEMY_NAME\")\n    private String enemyName;\n\n    @OneToMany(mappedBy = \"war\")\n    private List&lt;WarPlayer&gt; players;\n\n    @Transient\n    private List&lt;Enemy&gt; enemies;\n\n    public War() { }\n\n    // Getters and setters.\n\n}\n</code></pre>\n\n<p>--</p>\n\n<pre><code>@Entity\n@Table(name = \"WAR_PLAYERS\")\npublic class WarPlayer implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @ManyToOne\n    @JoinColumn(name = \"WAR\")\n    private War war;\n\n    @Id\n    @ManyToOne\n    @JoinColumn(name = \"PLAYER\")\n    private Player player;\n\n    @Column(name = \"WAR_NUMBER\")\n    private int warNumber;\n\n    @ManyToOne\n    @JoinColumn(name = \"OBJETIVE_1\")\n    private Attack objetive1;\n\n    @ManyToOne\n    @JoinColumn(name = \"OBJETIVE_2\")\n    private Attack objetive2;\n\n    @ManyToOne\n    @JoinColumn(name = \"RECOMMENDED_1\")\n    private Attack recommended1;\n\n    @ManyToOne\n    @JoinColumn(name = \"RECOMMENDED_2\")\n    private Attack recommended2;\n\n    @ManyToOne\n    @JoinColumn(name = \"FINAL_1\")\n    private Attack final1;\n\n    @ManyToOne\n    @JoinColumn(name = \"FINAL_2\")\n    private Attack final2;\n    private String comment;\n\n    public WarPlayer() {}\n\n    // Getters and setters\n\n}\n</code></pre>\n\n<p>My DAO</p>\n\n<pre><code>@Override\n    public War findById(int id) throws DaoException {\n\n        War war;\n\n        try {\n            war = (War) getSession()\n                    .createQuery(\"from War where ID = :id\")\n                    .setParameter(\"id\", id)\n                    .uniqueResult();\n        } catch (Exception e) {\n            throw new DaoException(e.getMessage());\n        }\n\n        return war;\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-data-r2dbc"],"comments":[{"owner":{"account_id":3524496,"reputation":168,"user_id":2945996,"display_name":"rimesc"},"score":3,"creation_date":1664439444,"post_id":73890387,"comment_id":130473382,"body_markdown":"It might help to know that Spring doesn’t rely on the standard `@Inherited` annotation to automatically inherit annotations from superclasses.  It has its own logic (see e.g. https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/annotation/AnnotationUtils.html) that walks a class’s inheritance tree looking for Spring annotations, whether they’re meta-annotated with `@Inherited` or not.  Spring’s approach also works for annotations on methods and interfaces, unlike `@Inherited` which only inherits class-level annotations from the superclass.","body":"It might help to know that Spring doesn’t rely on the standard <code>@Inherited</code> annotation to automatically inherit annotations from superclasses.  It has its own logic (see e.g. <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/annotation/AnnotationUtils.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>) that walks a class’s inheritance tree looking for Spring annotations, whether they’re meta-annotated with <code>@Inherited</code> or not.  Spring’s approach also works for annotations on methods and interfaces, unlike <code>@Inherited</code> which only inherits class-level annotations from the superclass."}],"answers":[{"tags":[],"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682844890,"creation_date":1664433022,"answer_id":73891172,"question_id":73890387,"body_markdown":"I looked up some information and found that abstract classes are allowed.\r\n\r\nThe constraints in the documentation do not say that abstract classes or interfaces(can?) do not support Configuration annotations.\r\n\r\n[Configuration annotation][1]\r\n\r\n**Constraints when authoring @Configuration classes**\r\n- Configuration classes must be provided as classes (i.e. not as instances returned from factory methods), allowing for runtime enhancements through a generated subclass.\r\n- Configuration classes must be non-final (allowing for subclasses at runtime) unless the proxyBeanMethods flag is set to false in which case no runtime-generated subclass is necessary.\r\n- Configuration classes must be non-local (i.e. may not be declared within a method).\r\n- Any nested configuration classes must be declared as static.\r\n- @Bean methods may not in turn create further configuration classes (any such instances will be treated as regular beans, with their configuration annotations remaining undetected).\r\n\r\n\r\nLike this question, I hope there are powerful guys who can explain this problem from the perspective of source code. \r\nBecause apart from the instructions in the documentation, I don&#39;t know what the reason is yet.\r\n\r\n--------\r\n\r\nI tested repeatedly for an afternoon and found that adding Configuration annotations to abstract classes does not seem to have any effect, What seems to be valid is just the annotation on the final subclass.\r\n\r\nHere are the codes!!!\r\nfirst, we need an interface `TestInterface.java`:\r\n\r\n    public interface TestInterface {                                                                         \r\n        public String hello();                                                                                         \r\n        public String hello1();                                                                                        \r\n    }   \r\n\r\n\r\nthen make an abstract class `MyConfigration.java`:\r\n\r\n    //@Configuration(proxyBeanMethods = false)\r\n    //@Configuration\r\n    public abstract class MyConfigration implements TestInterface  {      \r\n        @Bean                                                                       \r\n        public String hello() {                                                     \r\n            System.out.println(&quot;call hello in super class&quot;);                        \r\n            return &quot;hello&quot;;                                                                           \r\n        }                                                                                                                                                 \r\n    }\r\n\r\nand last, we need a subclass `SubMyConfigration.java`\r\n\r\n    @Configuration                                                                  \r\n    class SubMyConfigration extends MyConfigration {                              \r\n        @Bean                                                                       \r\n        public String hello1() {                                                    \r\n            return &quot; hello1 from subclass&quot;;                                         \r\n        }                                                                           \r\n    }  \r\n\r\nuse the main method to test:\r\n\r\n    public static void main(String[] args) {                                                                                                                               \r\n        ConfigurableApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\r\n    \r\n        TestInterface configOfInterface = applicationContext.getBean(MyConfigration.class);\r\n        configOfInterface.hello();    \r\n        configOfInterface.hello();                                                       \r\n        configOfInterface.hello1();                                                            \r\n        configOfInterface.hello1(); \r\n    } \r\n\r\nIf add `@Configuration(proxyBeanMethods = false)` on subclass(SubMyConfigration), will print `call hello in super class` 3 times.\r\n\r\nIf add `@Configuration` on subclass(SubMyConfigration), will print `call hello in super class` 1 times.\r\n\r\nWhether to add `@Configuration` annotations to the superclass(MyConfigration) and whether to add `proxyBeanMethods = false` does not affect the number of print times.\r\n\r\n\r\nAccording to this part of the code, there are 3 conclusions：\r\n- subclass(`SubMyConfigration`) must add `@Configuration`,otherwise it won&#39;t work;\r\n- No matter whether the superclass adds `@Configuration` annotations, and whether the `proxyBeanMethods = false` parameter is added to the annotations, it will not affect the final result.\r\n- The `proxyBeanMethods = false` parameter, only added to the subclass `@Configuration` annotation will affect the result\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Configuration.html","title":"Why some abstract class has spring @Configuration annotation?","body":"<p>I looked up some information and found that abstract classes are allowed.</p>\n<p>The constraints in the documentation do not say that abstract classes or interfaces(can?) do not support Configuration annotations.</p>\n<p><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Configuration.html\" rel=\"nofollow noreferrer\">Configuration annotation</a></p>\n<p><strong>Constraints when authoring @Configuration classes</strong></p>\n<ul>\n<li>Configuration classes must be provided as classes (i.e. not as instances returned from factory methods), allowing for runtime enhancements through a generated subclass.</li>\n<li>Configuration classes must be non-final (allowing for subclasses at runtime) unless the proxyBeanMethods flag is set to false in which case no runtime-generated subclass is necessary.</li>\n<li>Configuration classes must be non-local (i.e. may not be declared within a method).</li>\n<li>Any nested configuration classes must be declared as static.</li>\n<li>@Bean methods may not in turn create further configuration classes (any such instances will be treated as regular beans, with their configuration annotations remaining undetected).</li>\n</ul>\n<p>Like this question, I hope there are powerful guys who can explain this problem from the perspective of source code.\nBecause apart from the instructions in the documentation, I don't know what the reason is yet.</p>\n<hr />\n<p>I tested repeatedly for an afternoon and found that adding Configuration annotations to abstract classes does not seem to have any effect, What seems to be valid is just the annotation on the final subclass.</p>\n<p>Here are the codes!!!\nfirst, we need an interface <code>TestInterface.java</code>:</p>\n<pre><code>public interface TestInterface {                                                                         \n    public String hello();                                                                                         \n    public String hello1();                                                                                        \n}   \n</code></pre>\n<p>then make an abstract class <code>MyConfigration.java</code>:</p>\n<pre><code>//@Configuration(proxyBeanMethods = false)\n//@Configuration\npublic abstract class MyConfigration implements TestInterface  {      \n    @Bean                                                                       \n    public String hello() {                                                     \n        System.out.println(&quot;call hello in super class&quot;);                        \n        return &quot;hello&quot;;                                                                           \n    }                                                                                                                                                 \n}\n</code></pre>\n<p>and last, we need a subclass <code>SubMyConfigration.java</code></p>\n<pre><code>@Configuration                                                                  \nclass SubMyConfigration extends MyConfigration {                              \n    @Bean                                                                       \n    public String hello1() {                                                    \n        return &quot; hello1 from subclass&quot;;                                         \n    }                                                                           \n}  \n</code></pre>\n<p>use the main method to test:</p>\n<pre><code>public static void main(String[] args) {                                                                                                                               \n    ConfigurableApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\n\n    TestInterface configOfInterface = applicationContext.getBean(MyConfigration.class);\n    configOfInterface.hello();    \n    configOfInterface.hello();                                                       \n    configOfInterface.hello1();                                                            \n    configOfInterface.hello1(); \n} \n</code></pre>\n<p>If add <code>@Configuration(proxyBeanMethods = false)</code> on subclass(SubMyConfigration), will print <code>call hello in super class</code> 3 times.</p>\n<p>If add <code>@Configuration</code> on subclass(SubMyConfigration), will print <code>call hello in super class</code> 1 times.</p>\n<p>Whether to add <code>@Configuration</code> annotations to the superclass(MyConfigration) and whether to add <code>proxyBeanMethods = false</code> does not affect the number of print times.</p>\n<p>According to this part of the code, there are 3 conclusions：</p>\n<ul>\n<li>subclass(<code>SubMyConfigration</code>) must add <code>@Configuration</code>,otherwise it won't work;</li>\n<li>No matter whether the superclass adds <code>@Configuration</code> annotations, and whether the <code>proxyBeanMethods = false</code> parameter is added to the annotations, it will not affect the final result.</li>\n<li>The <code>proxyBeanMethods = false</code> parameter, only added to the subclass <code>@Configuration</code> annotation will affect the result</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1664475275,"creation_date":1664474648,"answer_id":73899905,"question_id":73890387,"body_markdown":"Maybe I am missing something big here so please feel free to correct me. \r\n\r\n\r\n\r\n&gt;     @Configuration(proxyBeanMethods = false)\r\n&gt;     public abstract class AbstractR2dbcConfiguration implements ApplicationContextAware\r\n&gt; \r\n&gt; According to my common sense, an abstract class cannot be registered\r\n&gt; as a bean even if it has @Configuration.\r\n\r\nAccording to my knowledge `@Configuration` is never indended to make the annotated class a spring bean. The main reason it exists is that it is a meta information that spring understands so that it can parse it correctly and search the methods that bring `@Bean` and from those methods it would create spring beans that would be placed inside the spring context.\r\n\r\nSo even if a class is declared as abstract you don&#39;t have any constraint on to define a common method in that abstract class. Then this method could as well be marked with `@Bean` and that would be no problem for spring to inspect it and use the returned object from that method and place it inside the spring context as a bean.","title":"Why some abstract class has spring @Configuration annotation?","body":"<p>Maybe I am missing something big here so please feel free to correct me.</p>\n<blockquote>\n<pre><code>@Configuration(proxyBeanMethods = false)\npublic abstract class AbstractR2dbcConfiguration implements ApplicationContextAware\n</code></pre>\n<p>According to my common sense, an abstract class cannot be registered\nas a bean even if it has @Configuration.</p>\n</blockquote>\n<p>According to my knowledge <code>@Configuration</code> is never indended to make the annotated class a spring bean. The main reason it exists is that it is a meta information that spring understands so that it can parse it correctly and search the methods that bring <code>@Bean</code> and from those methods it would create spring beans that would be placed inside the spring context.</p>\n<p>So even if a class is declared as abstract you don't have any constraint on to define a common method in that abstract class. Then this method could as well be marked with <code>@Bean</code> and that would be no problem for spring to inspect it and use the returned object from that method and place it inside the spring context as a bean.</p>\n"}],"owner":{"account_id":17034480,"reputation":2859,"user_id":12323837,"display_name":"blue-hope"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":890,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1682844890,"creation_date":1664426851,"question_id":73890387,"body_markdown":"This is an example for the question. (spring-data-r2dbc)\r\n\r\n```java\r\npackage org.springframework.data.r2dbc.config;\r\n\r\n@Configuration(proxyBeanMethods = false)\r\npublic abstract class AbstractR2dbcConfiguration implements ApplicationContextAware {\r\n...\r\n}\r\n```\r\n\r\nAccording to my common sense, an abstract class cannot be registered as a bean even if it has @Configuration.\r\nAnd since @Configuration does not have @Inherited, the object of the inheriting class is not automatically registered as a bean, so we have to add @Configuration directly for the inheriting class.\r\nI&#39;m curious as to why some abstract class has @Configuration annotation like the code above.\r\n","title":"Why some abstract class has spring @Configuration annotation?","body":"<p>This is an example for the question. (spring-data-r2dbc)</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.springframework.data.r2dbc.config;\n\n@Configuration(proxyBeanMethods = false)\npublic abstract class AbstractR2dbcConfiguration implements ApplicationContextAware {\n...\n}\n</code></pre>\n<p>According to my common sense, an abstract class cannot be registered as a bean even if it has @Configuration.\nAnd since @Configuration does not have @Inherited, the object of the inheriting class is not automatically registered as a bean, so we have to add @Configuration directly for the inheriting class.\nI'm curious as to why some abstract class has @Configuration annotation like the code above.</p>\n"},{"tags":["java","casting"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1682813035,"post_id":76139003,"comment_id":134274360,"body_markdown":"The type of `otherObject` is `Object`, so you cannot call methods specific to `Employee`.","body":"The type of <code>otherObject</code> is <code>Object</code>, so you cannot call methods specific to <code>Employee</code>."},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":5,"creation_date":1682813101,"post_id":76139003,"comment_id":134274365,"body_markdown":"The cast is needed because `otherObject` is of type `Object`, not `Employee`. With Java 14 as an experimental feature and from Java 16 onwards (I believe), you can write `if(otherObject instanceof Employee toCompare)` to omit the explicit cast.","body":"The cast is needed because <code>otherObject</code> is of type <code>Object</code>, not <code>Employee</code>. With Java 14 as an experimental feature and from Java 16 onwards (I believe), you can write <code>if(otherObject instanceof Employee toCompare)</code> to omit the explicit cast."}],"answers":[{"comments":[{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1682816895,"post_id":76139017,"comment_id":134274635,"body_markdown":"thanks for your answer but it doesn&#39;t seem to answer my question.  Both otherObject and toCompare point to the same place.  Where is the static type stored if not with the object?  But besides that, it would seem trivial to allow this so why wasn&#39;t it?  I&#39;m sure there&#39;s a good reason I just can&#39;t figure out what it is.  Is there a hash table somewhere that stores addresses and object types as opposed to storing  or embedding the type into the object location?  What would be the reason for doing that?","body":"thanks for your answer but it doesn&#39;t seem to answer my question.  Both otherObject and toCompare point to the same place.  Where is the static type stored if not with the object?  But besides that, it would seem trivial to allow this so why wasn&#39;t it?  I&#39;m sure there&#39;s a good reason I just can&#39;t figure out what it is.  Is there a hash table somewhere that stores addresses and object types as opposed to storing  or embedding the type into the object location?  What would be the reason for doing that?"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1682817146,"post_id":76139017,"comment_id":134274645,"body_markdown":"@DCR Sure, they point to the same place, but the two variables have different types. If you declare something as an object, then you can only use Object methods. How would the compiler know at compile time that the actual type is something else? And how would it be able to check that you&#39;re using it correctly?","body":"@DCR Sure, they point to the same place, but the two variables have different types. If you declare something as an object, then you can only use Object methods. How would the compiler know at compile time that the actual type is something else? And how would it be able to check that you&#39;re using it correctly?"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1682817489,"post_id":76139017,"comment_id":134274669,"body_markdown":"so if they point to the same place but their types are different, where is the type actually stored?  If type was stored with the object then it would be easy to do this.  Why isn&#39;t it?  I mean, If we have String x = new String() someplace in the computer String has to be associated with x.","body":"so if they point to the same place but their types are different, where is the type actually stored?  If type was stored with the object then it would be easy to do this.  Why isn&#39;t it?  I mean, If we have String x = new String() someplace in the computer String has to be associated with x."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1682817599,"post_id":76139017,"comment_id":134274677,"body_markdown":"@DCR Consider a method that accepts an object. Does it make sense to call Employee methods on the parameter when the input can be **any** Object?","body":"@DCR Consider a method that accepts an object. Does it make sense to call Employee methods on the parameter when the input can be <b>any</b> Object?"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1682817836,"post_id":76139017,"comment_id":134274697,"body_markdown":"If you&#39;re asking why the compiler doesn&#39;t &quot;know&quot; that `otherObject` is an `Employee` after the `instanceof` check, then the answer is likely that it&#39;s not worth it to add additional rules to cover this specific case where you can just cast. The rule can remain that the compiler only allows calling methods that are visible on the type of the variable. @DCR","body":"If you&#39;re asking why the compiler doesn&#39;t &quot;know&quot; that <code>otherObject</code> is an <code>Employee</code> after the <code>instanceof</code> check, then the answer is likely that it&#39;s not worth it to add additional rules to cover this specific case where you can just cast. The rule can remain that the compiler only allows calling methods that are visible on the type of the variable. @DCR"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1682818149,"post_id":76139017,"comment_id":134274717,"body_markdown":"I&#39;m asking why it doesn&#39;t know this before the instanceof check.  when I try to use a method that doesn&#39;t exist I know this immediately in my ide.  It says method not found. Why doesn&#39;t the compiler check for each instanceof - I mean isn&#39;t there somewhere stored the object name and the different instanceof objects it&#39;s associated with?","body":"I&#39;m asking why it doesn&#39;t know this before the instanceof check.  when I try to use a method that doesn&#39;t exist I know this immediately in my ide.  It says method not found. Why doesn&#39;t the compiler check for each instanceof - I mean isn&#39;t there somewhere stored the object name and the different instanceof objects it&#39;s associated with?"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1682818532,"post_id":76139017,"comment_id":134274749,"body_markdown":"for instance if I have an object that is a Shape, Rectangle and Square and I over ride some method the compiler knows which one to use.","body":"for instance if I have an object that is a Shape, Rectangle and Square and I over ride some method the compiler knows which one to use."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1682819310,"post_id":76139017,"comment_id":134274797,"body_markdown":"@DCR Before the instanceof check, the object could be of any type. You could call `.equals(new Object())` for instance. Then it definitely is not valid to call Employee methods.","body":"@DCR Before the instanceof check, the object could be of any type. You could call <code>.equals(new Object())</code> for instance. Then it definitely is not valid to call Employee methods."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1682819373,"post_id":76139017,"comment_id":134274799,"body_markdown":"@DCR Now, after the check, the only answer is that the JLS does not add a special rule for the compiler deducing a more specific type from the context. It is likely to be too much work for very little gain. This example is simple, but it can rapidly get extremely difficult for the compiler to narrow down a type in a deeply nested context. And it doesn&#39;t really bring all that much benefit. Saving a line is not really what Java is about.","body":"@DCR Now, after the check, the only answer is that the JLS does not add a special rule for the compiler deducing a more specific type from the context. It is likely to be too much work for very little gain. This example is simple, but it can rapidly get extremely difficult for the compiler to narrow down a type in a deeply nested context. And it doesn&#39;t really bring all that much benefit. Saving a line is not really what Java is about."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1682821560,"post_id":76139017,"comment_id":134274966,"body_markdown":"thanks, not trying to save a line just trying to understand the language and compiler better.  It seems trivial and it would seem the information is there and in some ways like with my over ride example the compiler is smart enough to sort this out.","body":"thanks, not trying to save a line just trying to understand the language and compiler better.  It seems trivial and it would seem the information is there and in some ways like with my over ride example the compiler is smart enough to sort this out."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":10,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682813238,"creation_date":1682813238,"answer_id":76139017,"question_id":76139003,"body_markdown":"The fields and methods you can access on a variable depend on its static type. `otherObject` is of type `Object`, so you cannot call methods specific to `Employee`.\r\n\r\n[Pattern matching for `instanceof`](https://docs.oracle.com/en/java/javase/17/language/pattern-matching-instanceof-operator.html) makes this simpler to write, though.\r\n\r\n```java\r\nif (otherObject instanceof Employee emp) {\r\n\treturn this.getLastName().equals(emp.getLastName()) &amp;&amp; \r\n           this.idNumber == emp.idNumber;\r\n}\r\n```","title":"Why is casting needed","body":"<p>The fields and methods you can access on a variable depend on its static type. <code>otherObject</code> is of type <code>Object</code>, so you cannot call methods specific to <code>Employee</code>.</p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/language/pattern-matching-instanceof-operator.html\" rel=\"nofollow noreferrer\">Pattern matching for <code>instanceof</code></a> makes this simpler to write, though.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (otherObject instanceof Employee emp) {\n    return this.getLastName().equals(emp.getLastName()) &amp;&amp; \n           this.idNumber == emp.idNumber;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682823517,"creation_date":1682823517,"answer_id":76139351,"question_id":76139003,"body_markdown":"What you&#39;re talking about is so-called flow type tightening. You want this:\r\n\r\n```\r\nObject foo = ...;\r\nif (foo instanceof String) {\r\n  foo.toLowerCase();\r\n}\r\n```\r\n\r\nTo work because specifically within the confines of that `if` block, `foo`, surely, is a String.\r\n\r\nThere are some fundamental problems with that idea:\r\n\r\n* Imagine `foo` is not a local variable but a field. Surely this should still work. Except... fields can be changed on the fly by other threads. So should the language _not_ apply this principle for fields, but _do_ apply it for method-locals? That sounds like you&#39;re just opening the door for somebody else to ask an incredulous question about why in the blazes there&#39;s a difference.\r\n* That would mean if you then change `foo` inside the `if`, things get a bit bizarre. What should happen here:\r\n\r\n```\r\nObject foo = ...;\r\nif (foo instanceof String) {\r\n  if (Math.random() &lt; 0.00005) foo = 5;\r\n  foo.toLowerCase();\r\n}\r\n```\r\n\r\nThat clearly should not work - its unlikely but possible that `foo` isn&#39;t a string when you call `foo.toLowerCase()`. So here it wouldn&#39;t work?\r\n\r\nYou hopefully see the general issue of taking inference too far. It makes trying to debug the situation when you write some code and it doesn&#39;t do what you wanted it to incredibly complicated. It makes the compiler extremely complicated.\r\n\r\nNow, that doesn&#39;t mean that it&#39;s a bad idea to add it. This is merely an explanation for something much, much simpler:\r\n\r\n* __It is understandable that the JDK engineers, at the time java 1.0 was released, set it up this way.__\r\n\r\nEven if you think it is wrong, that&#39;s not the point. The point is simply that it is understandable that the choice was made not to flow type this structure.\r\n\r\nWhich gets us to the next point:\r\n\r\n## ... and now we are stuck with it\r\n\r\nIntroducing flow typing _now_ would __break backwards compatibility__. Weird, but true - that&#39;s because in java, method parameters are part of a method&#39;s identity, and thus, changing types can make the exact same code now refer to a completely different method. This is current, vanilla java, try it out if you like:\r\n\r\n```\r\nclass Test {\r\n  public static void main(String[] args) {\r\n    Object a = &quot;foo&quot;;\r\n    String b = &quot;foo&quot;;\r\n    System.out.println(test(a));\r\n    System.out.println(test(b));\r\n  }\r\n\r\n  public static void test(Object x) {\r\n    System.out.println(&quot;foo(Object)&quot;);\r\n  }\r\n\r\n  public static void test(String x) {\r\n    System.out.println(&quot;foo(String)&quot;);\r\n  }\r\n}\r\n```\r\n\r\nThis will print `foo(Object)`, then `foo(String)`. You might find that weird - in both cases, the object passed is of type String. That&#39;s because which of the two methods to go with is decided by the compiler, not at runtime. Java does have dynamic typing but it applies solely to when you override methods, which requires not just that the name is identical, but also that the parameter types are. Not the case here.\r\n\r\nWe can do another deep dive on why one might design a language like that, but at some point we&#39;ll be here, 4871 years from now, with you asking &#39;sooo, about that big bang&#39;. It certainly is well beyond the scope of this question.\r\n\r\nAt any rate, given that this is how java works, adding flow typing breaks things. After all, imagine in the above code I did:\r\n\r\n```\r\nObject q = &quot;Hello&quot;;\r\nif (q instanceof String) {\r\n  test(q);\r\n}\r\n```\r\n\r\nThen current java would print `test(Object)` whereas if you add flow typing, you get `test(String)` and that is not backwards compatible.\r\n\r\n## The good news\r\n\r\nJust because other languages did it this way doesn&#39;t mean java has to follow and break stuff, nor that java just has to sit there and regret.\r\n\r\nYou just add the feature differently. Which is where patterns come in. New java features, which is a __vastly__ more complicated feature than just this, but one of the many, many things it can do, is:\r\n\r\n```\r\nObject foo = &quot;x&quot;;\r\nif (foo instanceof String bar) {\r\n  bar.toLowerCase();\r\n}\r\n```\r\n\r\nThis works fine, and avoids the backwards incompatibility issues. It also avoids the confusion about &#39;.. but what if `foo` is a field that gets changed halfway through (irrelevant; the test and assignment to variable `bar` is atomic)&#39;, it avoids the problem if reassigning it (feel free, but variable `foo` is of type `Object` and variable `bar` is of type `String`, and nothing is going to change this, so there is no confusion there either).\r\n\r\nIt also allows deconstruction, pattern matching, and far, far more.\r\n\r\nIf you&#39;d like to know more, these things are discussed at extreme length (you&#39;ll spend WEEKS reading if you want to know all the details) on the openjdk mailing lists. valhalla-dev, amber-dev, core-lib-dev might be interesting for this. Here is the main page of the [amber-dev mailing list](https://mail.openjdk.org/mailman/listinfo/amber-dev).","title":"Why is casting needed","body":"<p>What you're talking about is so-called flow type tightening. You want this:</p>\n<pre><code>Object foo = ...;\nif (foo instanceof String) {\n  foo.toLowerCase();\n}\n</code></pre>\n<p>To work because specifically within the confines of that <code>if</code> block, <code>foo</code>, surely, is a String.</p>\n<p>There are some fundamental problems with that idea:</p>\n<ul>\n<li>Imagine <code>foo</code> is not a local variable but a field. Surely this should still work. Except... fields can be changed on the fly by other threads. So should the language <em>not</em> apply this principle for fields, but <em>do</em> apply it for method-locals? That sounds like you're just opening the door for somebody else to ask an incredulous question about why in the blazes there's a difference.</li>\n<li>That would mean if you then change <code>foo</code> inside the <code>if</code>, things get a bit bizarre. What should happen here:</li>\n</ul>\n<pre><code>Object foo = ...;\nif (foo instanceof String) {\n  if (Math.random() &lt; 0.00005) foo = 5;\n  foo.toLowerCase();\n}\n</code></pre>\n<p>That clearly should not work - its unlikely but possible that <code>foo</code> isn't a string when you call <code>foo.toLowerCase()</code>. So here it wouldn't work?</p>\n<p>You hopefully see the general issue of taking inference too far. It makes trying to debug the situation when you write some code and it doesn't do what you wanted it to incredibly complicated. It makes the compiler extremely complicated.</p>\n<p>Now, that doesn't mean that it's a bad idea to add it. This is merely an explanation for something much, much simpler:</p>\n<ul>\n<li><strong>It is understandable that the JDK engineers, at the time java 1.0 was released, set it up this way.</strong></li>\n</ul>\n<p>Even if you think it is wrong, that's not the point. The point is simply that it is understandable that the choice was made not to flow type this structure.</p>\n<p>Which gets us to the next point:</p>\n<h2>... and now we are stuck with it</h2>\n<p>Introducing flow typing <em>now</em> would <strong>break backwards compatibility</strong>. Weird, but true - that's because in java, method parameters are part of a method's identity, and thus, changing types can make the exact same code now refer to a completely different method. This is current, vanilla java, try it out if you like:</p>\n<pre><code>class Test {\n  public static void main(String[] args) {\n    Object a = &quot;foo&quot;;\n    String b = &quot;foo&quot;;\n    System.out.println(test(a));\n    System.out.println(test(b));\n  }\n\n  public static void test(Object x) {\n    System.out.println(&quot;foo(Object)&quot;);\n  }\n\n  public static void test(String x) {\n    System.out.println(&quot;foo(String)&quot;);\n  }\n}\n</code></pre>\n<p>This will print <code>foo(Object)</code>, then <code>foo(String)</code>. You might find that weird - in both cases, the object passed is of type String. That's because which of the two methods to go with is decided by the compiler, not at runtime. Java does have dynamic typing but it applies solely to when you override methods, which requires not just that the name is identical, but also that the parameter types are. Not the case here.</p>\n<p>We can do another deep dive on why one might design a language like that, but at some point we'll be here, 4871 years from now, with you asking 'sooo, about that big bang'. It certainly is well beyond the scope of this question.</p>\n<p>At any rate, given that this is how java works, adding flow typing breaks things. After all, imagine in the above code I did:</p>\n<pre><code>Object q = &quot;Hello&quot;;\nif (q instanceof String) {\n  test(q);\n}\n</code></pre>\n<p>Then current java would print <code>test(Object)</code> whereas if you add flow typing, you get <code>test(String)</code> and that is not backwards compatible.</p>\n<h2>The good news</h2>\n<p>Just because other languages did it this way doesn't mean java has to follow and break stuff, nor that java just has to sit there and regret.</p>\n<p>You just add the feature differently. Which is where patterns come in. New java features, which is a <strong>vastly</strong> more complicated feature than just this, but one of the many, many things it can do, is:</p>\n<pre><code>Object foo = &quot;x&quot;;\nif (foo instanceof String bar) {\n  bar.toLowerCase();\n}\n</code></pre>\n<p>This works fine, and avoids the backwards incompatibility issues. It also avoids the confusion about '.. but what if <code>foo</code> is a field that gets changed halfway through (irrelevant; the test and assignment to variable <code>bar</code> is atomic)', it avoids the problem if reassigning it (feel free, but variable <code>foo</code> is of type <code>Object</code> and variable <code>bar</code> is of type <code>String</code>, and nothing is going to change this, so there is no confusion there either).</p>\n<p>It also allows deconstruction, pattern matching, and far, far more.</p>\n<p>If you'd like to know more, these things are discussed at extreme length (you'll spend WEEKS reading if you want to know all the details) on the openjdk mailing lists. valhalla-dev, amber-dev, core-lib-dev might be interesting for this. Here is the main page of the <a href=\"https://mail.openjdk.org/mailman/listinfo/amber-dev\" rel=\"nofollow noreferrer\">amber-dev mailing list</a>.</p>\n"}],"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76139351,"answer_count":2,"score":0,"last_activity_date":1682844308,"creation_date":1682812927,"question_id":76139003,"body_markdown":"The following works as intended:\r\n\r\n```java\r\npublic boolean equals(Object otherObject) {\r\n    if (otherObject instanceof Employee) {\r\n        Employee toCompare = (Employee) otherObject;\r\n        if (this.getLastName().equals(toCompare.getLastName()) &amp;&amp; this.idNumber == toCompare.idNumber) return true;\r\n    }\r\n    return false;\r\n} \r\n```\r\nMy question is why doesn&#39;t this work also: \r\n```java\r\npublic boolean equals(Object otherObject) {\r\n    if (otherObject instanceof Employee) {            \r\n        if (this.getLastName().equals(otherObject.getLastName()) &amp;&amp; \r\n           this.idNumber == otherObject.idNumber) return true;\r\n    }\r\n    return false;\r\n}  \r\n```\r\n\r\nWhat was the reason they left this out of the compiler? Or, what does toCompare have that otherObject doesn&#39;t have?  They both point to the same location so what&#39;s the difference?   ","title":"Why is casting needed","body":"<p>The following works as intended:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean equals(Object otherObject) {\n    if (otherObject instanceof Employee) {\n        Employee toCompare = (Employee) otherObject;\n        if (this.getLastName().equals(toCompare.getLastName()) &amp;&amp; this.idNumber == toCompare.idNumber) return true;\n    }\n    return false;\n} \n</code></pre>\n<p>My question is why doesn't this work also:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean equals(Object otherObject) {\n    if (otherObject instanceof Employee) {            \n        if (this.getLastName().equals(otherObject.getLastName()) &amp;&amp; \n           this.idNumber == otherObject.idNumber) return true;\n    }\n    return false;\n}  \n</code></pre>\n<p>What was the reason they left this out of the compiler? Or, what does toCompare have that otherObject doesn't have?  They both point to the same location so what's the difference?</p>\n"},{"tags":["java","processing"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1682698014,"post_id":76131358,"comment_id":134261666,"body_markdown":"&quot;My full code is:&quot; - your full code starts with a method call `size (800, 600);`. It&#39;s really *not* full code. Please provide a [mcve].","body":"&quot;My full code is:&quot; - your full code starts with a method call <code>size (800, 600);</code>. It&#39;s really <i>not</i> full code. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1682698050,"post_id":76131358,"comment_id":134261675,"body_markdown":"`Bird` has that field, but `birds` is of type `Bird[]`, and the *array* doesn&#39;t have a field called `x`. Which bird&#39;s `x` field are you actually interested in?","body":"<code>Bird</code> has that field, but <code>birds</code> is of type <code>Bird[]</code>, and the <i>array</i> doesn&#39;t have a field called <code>x</code>. Which bird&#39;s <code>x</code> field are you actually interested in?"},{"owner":{"account_id":28447198,"reputation":9,"user_id":21765764,"display_name":"Malachi Williams"},"score":0,"creation_date":1682698714,"post_id":76131358,"comment_id":134261814,"body_markdown":"@JonSkeet I want to manipulate the birds created by the arrays so would I have to declare another x for that array?","body":"@JonSkeet I want to manipulate the birds created by the arrays so would I have to declare another x for that array?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1682698956,"post_id":76131358,"comment_id":134261854,"body_markdown":"I don&#39;t know what you mean by that - but I expect your `dist` method takes 4 separate `float` values - what *specific* float value do you expect `birds.x` to evaluate to when `birds` is an array? (And no, you can&#39;t &quot;declare another x for that array&quot; - you can&#39;t declare extra fields for arrays. The array is just a collection of elements.)","body":"I don&#39;t know what you mean by that - but I expect your <code>dist</code> method takes 4 separate <code>float</code> values - what <i>specific</i> float value do you expect <code>birds.x</code> to evaluate to when <code>birds</code> is an array? (And no, you can&#39;t &quot;declare another x for that array&quot; - you can&#39;t declare extra fields for arrays. The array is just a collection of elements.)"},{"owner":{"account_id":17715726,"reputation":2215,"user_id":12862111,"display_name":"apodidae"},"score":0,"creation_date":1682699854,"post_id":76131358,"comment_id":134262061,"body_markdown":"@JonSkeet Standard Processing syntax was used.  Processing is a java based language: https://processing.org/reference/","body":"@JonSkeet Standard Processing syntax was used.  Processing is a java based language: <a href=\"https://processing.org/reference/\" rel=\"nofollow noreferrer\">processing.org/reference</a>"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1682700242,"post_id":76131358,"comment_id":134262147,"body_markdown":"@apodidae: I strongly suspect you&#39;d still find the first version of this question was definitely *not* full code. I&#39;m not familiar with &quot;processing&quot;, but I&#39;d be very surprised if `birds.x` was valid. What would it mean?","body":"@apodidae: I strongly suspect you&#39;d still find the first version of this question was definitely <i>not</i> full code. I&#39;m not familiar with &quot;processing&quot;, but I&#39;d be very surprised if <code>birds.x</code> was valid. What would it mean?"},{"owner":{"account_id":17715726,"reputation":2215,"user_id":12862111,"display_name":"apodidae"},"score":0,"creation_date":1682700652,"post_id":76131358,"comment_id":134262239,"body_markdown":"b.x is the xcoordinate of a bird created by his Bird class.","body":"b.x is the xcoordinate of a bird created by his Bird class."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1682700983,"post_id":76131358,"comment_id":134262306,"body_markdown":"@apodidae: That&#39;s fine for `b.x`, but what about `birds.x` which is the expression causing the problem?","body":"@apodidae: That&#39;s fine for <code>b.x</code>, but what about <code>birds.x</code> which is the expression causing the problem?"},{"owner":{"account_id":17715726,"reputation":2215,"user_id":12862111,"display_name":"apodidae"},"score":0,"creation_date":1682701991,"post_id":76131358,"comment_id":134262503,"body_markdown":"The code has been changed from the original post, see my addendum for a runnable demo.","body":"The code has been changed from the original post, see my addendum for a runnable demo."},{"owner":{"account_id":28447198,"reputation":9,"user_id":21765764,"display_name":"Malachi Williams"},"score":0,"creation_date":1682702729,"post_id":76131358,"comment_id":134262653,"body_markdown":"@apodidae this code does work so what the next step?","body":"@apodidae this code does work so what the next step?"},{"owner":{"account_id":17715726,"reputation":2215,"user_id":12862111,"display_name":"apodidae"},"score":0,"creation_date":1682841055,"post_id":76131358,"comment_id":134276307,"body_markdown":"See revised answer.","body":"See revised answer."}],"answers":[{"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1682700284,"post_id":76131549,"comment_id":134262152,"body_markdown":"How does that help with `dist(mouseX, mouseY, birds.x, birds.y)` where `birds` is of type `Bird[]`?","body":"How does that help with <code>dist(mouseX, mouseY, birds.x, birds.y)</code> where <code>birds</code> is of type <code>Bird[]</code>?"},{"owner":{"account_id":17715726,"reputation":2215,"user_id":12862111,"display_name":"apodidae"},"score":0,"creation_date":1682700350,"post_id":76131549,"comment_id":134262168,"body_markdown":"It gets rid of the error message so he can continue to develop the code.  Have you tried running his code?","body":"It gets rid of the error message so he can continue to develop the code.  Have you tried running his code?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1682701034,"post_id":76131549,"comment_id":134262317,"body_markdown":"No, I&#39;m not about to install a whole other platform just to run the code - but I don&#39;t see that you&#39;ve changed anything about the line `float distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);` - are you saying that just changing the code as per your answer, that line of code will now be okay?","body":"No, I&#39;m not about to install a whole other platform just to run the code - but I don&#39;t see that you&#39;ve changed anything about the line <code>float distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);</code> - are you saying that just changing the code as per your answer, that line of code will now be okay?"},{"owner":{"account_id":28447198,"reputation":9,"user_id":21765764,"display_name":"Malachi Williams"},"score":0,"creation_date":1682701260,"post_id":76131549,"comment_id":134262355,"body_markdown":"@apodidae I&#39;m sorry but I don&#39;t think I understand,  I went on to change the constructor and initialize the birds just like you did but I still get the error, do I keep `float distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);`  like it is?","body":"@apodidae I&#39;m sorry but I don&#39;t think I understand,  I went on to change the constructor and initialize the birds just like you did but I still get the error, do I keep <code>float distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);</code>  like it is?"},{"owner":{"account_id":17715726,"reputation":2215,"user_id":12862111,"display_name":"apodidae"},"score":1,"creation_date":1682840952,"post_id":76131549,"comment_id":134276300,"body_markdown":"No, it has to be placed inside a loop in mousePressed(); see edited answer.  The constructor may be used the way you initially posted it.","body":"No, it has to be placed inside a loop in mousePressed(); see edited answer.  The constructor may be used the way you initially posted it."}],"tags":[],"owner":{"account_id":17715726,"reputation":2215,"user_id":12862111,"display_name":"apodidae"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682841781,"creation_date":1682699500,"answer_id":76131549,"question_id":76131358,"body_markdown":"The following code should be removed from draw() and moved to mousePressed():\r\n\r\nMove this:\r\n\r\n```\r\nfloat distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);\r\n  \r\n  if(mousePressed &amp;&amp; distanceFromClick &lt; 25) {\r\n   score += 1; //increases score \r\n  }\r\n\r\n```\r\nTo mousePressed() and add a loop to check the x,y coordinates of each bird for proximity, ie birds[i].x and birds[i].y:\r\n\r\n```\r\n void mousePressed() {\r\n    for (int i=0; i&lt;birds.length; i++) {\r\n    float distanceFromClick = dist(mouseX, mouseY, birds[i].x, birds[i].y );\r\n    if (distanceFromClick &lt; 25) {\r\n      println(distanceFromClick);\r\n      score += 1;\r\n    }\r\n  }\r\n }\r\n```\r\nIt is not necessary to re-do the constructor; it will work as you have it.\r\n","title":"Processing error: x cannot be resolved or is not a field. Want to be able to click on all ellipses","body":"<p>The following code should be removed from draw() and moved to mousePressed():</p>\n<p>Move this:</p>\n<pre><code>float distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);\n  \n  if(mousePressed &amp;&amp; distanceFromClick &lt; 25) {\n   score += 1; //increases score \n  }\n\n</code></pre>\n<p>To mousePressed() and add a loop to check the x,y coordinates of each bird for proximity, ie birds[i].x and birds[i].y:</p>\n<pre><code> void mousePressed() {\n    for (int i=0; i&lt;birds.length; i++) {\n    float distanceFromClick = dist(mouseX, mouseY, birds[i].x, birds[i].y );\n    if (distanceFromClick &lt; 25) {\n      println(distanceFromClick);\n      score += 1;\n    }\n  }\n }\n</code></pre>\n<p>It is not necessary to re-do the constructor; it will work as you have it.</p>\n"},{"comments":[{"owner":{"account_id":434677,"reputation":677,"user_id":820800,"accept_rate":61,"display_name":"Ravi Chandra"},"score":0,"creation_date":1683012341,"post_id":76140188,"comment_id":134297656,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76140188/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28459800,"reputation":1,"user_id":21776653,"display_name":"Tech Gamerz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682842411,"creation_date":1682842411,"answer_id":76140188,"question_id":76131358,"body_markdown":"If you&#39;re seeing this error message, the first step is to carefully review your code and check for any typos or syntax errors. It&#39;s also a good idea to double-check that you have all of the necessary libraries installed and that your configuration settings are correct.\r\nlearn more - https://hinditechbate.blogspot.com/2023/04/what-does-processing-error-x-cannot-be.html","title":"Processing error: x cannot be resolved or is not a field. Want to be able to click on all ellipses","body":"<p>If you're seeing this error message, the first step is to carefully review your code and check for any typos or syntax errors. It's also a good idea to double-check that you have all of the necessary libraries installed and that your configuration settings are correct.\nlearn more - <a href=\"https://hinditechbate.blogspot.com/2023/04/what-does-processing-error-x-cannot-be.html\" rel=\"nofollow noreferrer\">https://hinditechbate.blogspot.com/2023/04/what-does-processing-error-x-cannot-be.html</a></p>\n"}],"owner":{"account_id":28447198,"reputation":9,"user_id":21765764,"display_name":"Malachi Williams"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1682842411,"creation_date":1682697824,"question_id":76131358,"body_markdown":"Im using processing in java mode\r\n\r\nI want to make a simple game where ducks (currently ellipses) go across the screen using arrays and using the mouse you have to click on all the ducks to go to the next level. Im currently trying to work out being able to click on all the ellipses that appear.\r\n\r\nMy full code is:\r\n\r\n\r\n```\r\nBird b;\r\n\r\nBird [] birds;\r\n\r\nint score;\r\n\r\nvoid setup() {\r\n  size (800, 600);\r\n\r\n  b = new Bird();\r\n  score = 0;\r\n\r\n  birds = new Bird[4];\r\n\r\n  for (int i=0; i&lt;birds.length; i++) {\r\n    birds[i] = new Bird();\r\n  }\r\n}\r\n\r\nvoid draw() {\r\n  background(200);\r\n\r\n  b.update();\r\n  b.display();\r\n  \r\n  //show mouse cursor\r\n  fill(255, 0, 0, 100);\r\n  ellipse(mouseX, mouseY, 10, 10);\r\n  \r\n  for (int i=0; i&lt;birds.length; i++) {\r\n    birds[i].update();\r\n    birds[i].display();\r\n  }\r\n  fill(255);\r\n  textSize(48);\r\n  textAlign(LEFT);\r\n  text(&quot;Score: &quot; + score, 50, 50);\r\n  \r\n  float distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);\r\n  \r\n  if(mousePressed &amp;&amp; distanceFromClick &lt; 25) {\r\n   score += 1; //increases score \r\n  }\r\n}\r\n void mousePressed() {\r\n }\r\nclass Bird {\r\n  //props\r\n  float x, y, w, h, vx, vy;\r\n    //Constructor\r\n    Bird() {\r\n    x = -100;\r\n    y = random(100, 500);\r\n    w = 50;\r\n    h = 50;\r\n    vx = 2;\r\n    vy = 0;\r\n  }\r\n  //methods\r\n  void update() {\r\n    x += random(0, 2)*vx;\r\n    y += vy;\r\n  }\r\n  void display () {\r\n    //active area\r\n    fill(255, 255, 0, 100);\r\n    ellipse(x, y, w, h);\r\n  }\r\n}\r\n```\r\n\r\n\r\n\r\nI want to be able to click on all the birds from the array instead of one bird but when I change b.x and b.y to birds.x and birds.y I get the error &quot;x cannot be resolved or is not a field&quot;\r\n\r\non line float ```distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);```","title":"Processing error: x cannot be resolved or is not a field. Want to be able to click on all ellipses","body":"<p>Im using processing in java mode</p>\n<p>I want to make a simple game where ducks (currently ellipses) go across the screen using arrays and using the mouse you have to click on all the ducks to go to the next level. Im currently trying to work out being able to click on all the ellipses that appear.</p>\n<p>My full code is:</p>\n<pre><code>Bird b;\n\nBird [] birds;\n\nint score;\n\nvoid setup() {\n  size (800, 600);\n\n  b = new Bird();\n  score = 0;\n\n  birds = new Bird[4];\n\n  for (int i=0; i&lt;birds.length; i++) {\n    birds[i] = new Bird();\n  }\n}\n\nvoid draw() {\n  background(200);\n\n  b.update();\n  b.display();\n  \n  //show mouse cursor\n  fill(255, 0, 0, 100);\n  ellipse(mouseX, mouseY, 10, 10);\n  \n  for (int i=0; i&lt;birds.length; i++) {\n    birds[i].update();\n    birds[i].display();\n  }\n  fill(255);\n  textSize(48);\n  textAlign(LEFT);\n  text(&quot;Score: &quot; + score, 50, 50);\n  \n  float distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);\n  \n  if(mousePressed &amp;&amp; distanceFromClick &lt; 25) {\n   score += 1; //increases score \n  }\n}\n void mousePressed() {\n }\nclass Bird {\n  //props\n  float x, y, w, h, vx, vy;\n    //Constructor\n    Bird() {\n    x = -100;\n    y = random(100, 500);\n    w = 50;\n    h = 50;\n    vx = 2;\n    vy = 0;\n  }\n  //methods\n  void update() {\n    x += random(0, 2)*vx;\n    y += vy;\n  }\n  void display () {\n    //active area\n    fill(255, 255, 0, 100);\n    ellipse(x, y, w, h);\n  }\n}\n</code></pre>\n<p>I want to be able to click on all the birds from the array instead of one bird but when I change b.x and b.y to birds.x and birds.y I get the error &quot;x cannot be resolved or is not a field&quot;</p>\n<p>on line float <code>distanceFromClick = dist(mouseX, mouseY, birds.x, birds.y);</code></p>\n"},{"tags":["java","http","selenium-webdriver","htmlunit"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1678402545,"post_id":75690119,"comment_id":133530707,"body_markdown":"The noscript tag is not necessarily an error, but HTMLUnit&#39;s Javascript engine may not support all the features the site needs.  Some site&#39;s will also check visibility api, which can be a problem with headless browsers.","body":"The noscript tag is not necessarily an error, but HTMLUnit&#39;s Javascript engine may not support all the features the site needs.  Some site&#39;s will also check visibility api, which can be a problem with headless browsers."},{"owner":{"account_id":5278105,"reputation":23,"user_id":4214317,"accept_rate":40,"display_name":"Yehor Tiurin"},"score":0,"creation_date":1678414331,"post_id":75690119,"comment_id":133532295,"body_markdown":"@pcalkins Actually, I think I may have understood the reason for such an output: SilentJavaScriptErrorListener usage. But I added it for a reason: in order to eliminate the errors arising without it from interfering with the output. Maybe, there&#39;s some other way for that, but I haven&#39;t found it yet) So, a little update + still eager for other thoughts as well.","body":"@pcalkins Actually, I think I may have understood the reason for such an output: SilentJavaScriptErrorListener usage. But I added it for a reason: in order to eliminate the errors arising without it from interfering with the output. Maybe, there&#39;s some other way for that, but I haven&#39;t found it yet) So, a little update + still eager for other thoughts as well."}],"answers":[{"comments":[{"owner":{"account_id":5278105,"reputation":23,"user_id":4214317,"accept_rate":40,"display_name":"Yehor Tiurin"},"score":0,"creation_date":1678465987,"post_id":75693385,"comment_id":133543833,"body_markdown":"Thanks for the answer! \n\nYes, I surely can provide you the url, as it&#39;s a public site anyway.\n\n And, for a sample, &quot;https://google.com&quot; is proceeded okay overall, both with SilentJavaScriptErrorListener on and off, so..","body":"Thanks for the answer!   Yes, I surely can provide you the url, as it&#39;s a public site anyway.   And, for a sample, &quot;<a href=\"https://google.com\" rel=\"nofollow noreferrer\">google.com</a>&quot; is proceeded okay overall, both with SilentJavaScriptErrorListener on and off, so.."},{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1678472518,"post_id":75693385,"comment_id":133545538,"body_markdown":"Please share the url - i will have a look.","body":"Please share the url - i will have a look."},{"owner":{"account_id":5278105,"reputation":23,"user_id":4214317,"accept_rate":40,"display_name":"Yehor Tiurin"},"score":0,"creation_date":1678482781,"post_id":75693385,"comment_id":133547865,"body_markdown":"https://leon.bet/ru/bets","body":"<a href=\"https://leon.bet/ru/bets\" rel=\"nofollow noreferrer\">leon.bet/ru/bets</a>"}],"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682841983,"creation_date":1678434125,"answer_id":75693385,"question_id":75690119,"body_markdown":"I think the reason is not the SilentJavaScriptErrorListener; this one only supresses some log output.\r\n\r\nThe case is different - the page your are requesting does some js checks (by running some js inside the page/your browser) to figure out if js is enabled at all and if the required js functions are supported by your browser.\r\n\r\nHtmlUnit is good at supporting js but some newer js features are not supported at the moment. (Usually the log output you see without the SilentJavaScriptErrorListener point to this).\r\n\r\nWhat to do?\r\n\r\nIf you can provide the url (maybe by private mail) i can have a look and check if it is possible to add/fix the missing piece in the js support of HtmlUnit.\r\n\r\nIf not there is also the option to have install some workaround by patching the server response and remove the js check - but maybe this makes the rest of the page not working.","title":"Java HTMLUnit WebClient perceives enabled JavaScript as disabled, when parsin&#39; t&#39; page","body":"<p>I think the reason is not the SilentJavaScriptErrorListener; this one only supresses some log output.</p>\n<p>The case is different - the page your are requesting does some js checks (by running some js inside the page/your browser) to figure out if js is enabled at all and if the required js functions are supported by your browser.</p>\n<p>HtmlUnit is good at supporting js but some newer js features are not supported at the moment. (Usually the log output you see without the SilentJavaScriptErrorListener point to this).</p>\n<p>What to do?</p>\n<p>If you can provide the url (maybe by private mail) i can have a look and check if it is possible to add/fix the missing piece in the js support of HtmlUnit.</p>\n<p>If not there is also the option to have install some workaround by patching the server response and remove the js check - but maybe this makes the rest of the page not working.</p>\n"}],"owner":{"account_id":5278105,"reputation":23,"user_id":4214317,"accept_rate":40,"display_name":"Yehor Tiurin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682841983,"creation_date":1678396570,"question_id":75690119,"body_markdown":"As stated.\r\n\r\nUsed 2 B getting some JS error messages, but able to parse t&#39; page partly now.\r\n\r\nStill, among some largely generic am seeing the next message:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n        &lt;noscript&gt;\r\n          &amp;lt;strong&amp;gt;We&#39;re sorry but client doesn&#39;t work properly without JavaScript enabled. Please enable it to continue.&amp;lt;/strong&amp;gt;\r\n        &lt;/noscript&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nMy code:\r\n\r\n    public void getContent(String startUrl) {\r\n        final WebClient webClient = new WebClient(BrowserVersion.CHROME);\r\n\r\n        webClient.getOptions().setCssEnabled(false);\r\n        webClient.getOptions().setJavaScriptEnabled(true);\r\n        webClient.getOptions().setThrowExceptionOnScriptError(false);\r\n        webClient.setJavaScriptErrorListener(new SilentJavaScriptErrorListener());\r\n\r\n        webClient.waitForBackgroundJavaScript(30 * 1000);\r\n        // webClient.setAjaxController(new NicelyResynchronizingAjaxController());\r\n        // webClient.getOptions().setTimeout(10000);\r\n\r\n        try {\r\n            HtmlPage page = webClient.getPage(startUrl);\r\n\r\n            // webClient.getCurrentWindow().getJobManager().removeAllJobs();\r\n            webClient.close();\r\n\r\n            System.out.println(page.getPage().getTitleText());\r\n\r\n            System.out.println(page.getBody().getVisibleText());\r\n\r\n            List&lt;?&gt; sportsItems = page.getByXPath(&quot;//a&quot;);\r\n\r\n            System.out.println(sportsItems.size());\r\n\r\n            System.out.println(page.asXml());\r\n\r\n            sportsItems.forEach(System.out::println);\r\n\r\n            webClient.close();\r\n\r\n        } catch (IOException e) {\r\n            System.out.println(&quot;An error occurred: &quot; + e);\r\n        }\r\n    }\r\n\r\nWould appreciate any useful tips or alternatives here.\r\nThanks in advance!\r\n\r\n\r\nUpdate:\r\n\r\nActually, I think I may have understood the reason for such an output: SilentJavaScriptErrorListener usage.\r\n\r\nBut I added it for a reason: in order to eliminate the errors arising without it from interfering with the output.\r\n\r\nMaybe, there&#39;s some other way for that, but I haven&#39;t found it yet) So, a little update + still eager for other thoughts as well.\r\n\r\nThanks.","title":"Java HTMLUnit WebClient perceives enabled JavaScript as disabled, when parsin&#39; t&#39; page","body":"<p>As stated.</p>\n<p>Used 2 B getting some JS error messages, but able to parse t' page partly now.</p>\n<p>Still, among some largely generic am seeing the next message:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    &lt;noscript&gt;\n      &amp;lt;strong&amp;gt;We're sorry but client doesn't work properly without JavaScript enabled. Please enable it to continue.&amp;lt;/strong&amp;gt;\n    &lt;/noscript&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>My code:</p>\n<pre><code>public void getContent(String startUrl) {\n    final WebClient webClient = new WebClient(BrowserVersion.CHROME);\n\n    webClient.getOptions().setCssEnabled(false);\n    webClient.getOptions().setJavaScriptEnabled(true);\n    webClient.getOptions().setThrowExceptionOnScriptError(false);\n    webClient.setJavaScriptErrorListener(new SilentJavaScriptErrorListener());\n\n    webClient.waitForBackgroundJavaScript(30 * 1000);\n    // webClient.setAjaxController(new NicelyResynchronizingAjaxController());\n    // webClient.getOptions().setTimeout(10000);\n\n    try {\n        HtmlPage page = webClient.getPage(startUrl);\n\n        // webClient.getCurrentWindow().getJobManager().removeAllJobs();\n        webClient.close();\n\n        System.out.println(page.getPage().getTitleText());\n\n        System.out.println(page.getBody().getVisibleText());\n\n        List&lt;?&gt; sportsItems = page.getByXPath(&quot;//a&quot;);\n\n        System.out.println(sportsItems.size());\n\n        System.out.println(page.asXml());\n\n        sportsItems.forEach(System.out::println);\n\n        webClient.close();\n\n    } catch (IOException e) {\n        System.out.println(&quot;An error occurred: &quot; + e);\n    }\n}\n</code></pre>\n<p>Would appreciate any useful tips or alternatives here.\nThanks in advance!</p>\n<p>Update:</p>\n<p>Actually, I think I may have understood the reason for such an output: SilentJavaScriptErrorListener usage.</p>\n<p>But I added it for a reason: in order to eliminate the errors arising without it from interfering with the output.</p>\n<p>Maybe, there's some other way for that, but I haven't found it yet) So, a little update + still eager for other thoughts as well.</p>\n<p>Thanks.</p>\n"},{"tags":["java","apache-httpclient-5.x"],"answers":[{"comments":[{"owner":{"account_id":2575135,"reputation":31,"user_id":2233005,"display_name":"SPU42"},"score":0,"creation_date":1682789926,"post_id":76135346,"comment_id":134271860,"body_markdown":"I was hoping for something more elegant with the interfaces provided, but it seems either this cast or a refactor to ExecChainHandler are the ways ahead.","body":"I was hoping for something more elegant with the interfaces provided, but it seems either this cast or a refactor to ExecChainHandler are the ways ahead."}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682758734,"creation_date":1682758734,"answer_id":76135346,"question_id":76134625,"body_markdown":"[HttpResponse][1] doesn&#39;t, but [HttpEntityContainer][2] does. Cast your response to it (after an `instanceof` check if you&#39;re not sure), then you can call `setEntity` again.\r\n\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-core-5.1.x/current/httpcore5/apidocs/org/apache/hc/core5/http/HttpResponse.html\r\n  [2]: https://hc.apache.org/httpcomponents-core-5.1.x/current/httpcore5/apidocs/org/apache/hc/core5/http/HttpEntityContainer.html","title":"How to replace a response entity within an interceptor in Apache Http Client 5?","body":"<p><a href=\"https://hc.apache.org/httpcomponents-core-5.1.x/current/httpcore5/apidocs/org/apache/hc/core5/http/HttpResponse.html\" rel=\"nofollow noreferrer\">HttpResponse</a> doesn't, but <a href=\"https://hc.apache.org/httpcomponents-core-5.1.x/current/httpcore5/apidocs/org/apache/hc/core5/http/HttpEntityContainer.html\" rel=\"nofollow noreferrer\">HttpEntityContainer</a> does. Cast your response to it (after an <code>instanceof</code> check if you're not sure), then you can call <code>setEntity</code> again.</p>\n"},{"comments":[{"owner":{"account_id":2575135,"reputation":31,"user_id":2233005,"display_name":"SPU42"},"score":0,"creation_date":1682789430,"post_id":76135582,"comment_id":134271789,"body_markdown":"I had seen an example like this, but it&#39;s a larger change that will affect users of this class. I was hoping the available interfaces provided something that I was just missing.","body":"I had seen an example like this, but it&#39;s a larger change that will affect users of this class. I was hoping the available interfaces provided something that I was just missing."},{"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"score":1,"creation_date":1682925921,"post_id":76135582,"comment_id":134284995,"body_markdown":"The message interceptors intentionally do not have a means of accessing the enclosed entity, so they can work with both the classic and the async pipelines exactly the same. It is strongly advised to use exec interceptors for message content manipulations","body":"The message interceptors intentionally do not have a means of accessing the enclosed entity, so they can work with both the classic and the async pipelines exactly the same. It is strongly advised to use exec interceptors for message content manipulations"}],"tags":[],"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682762454,"creation_date":1682762454,"answer_id":76135582,"question_id":76134625,"body_markdown":"I would strongly recommend to use a custom exec interceptor `ExecChainHandler` if one wants to modify the request or response messages. Message interceptors are expected to work with the message headers only\r\n\r\n```\r\ntry (final CloseableHttpClient httpclient = HttpClients.custom()\r\n\r\n        // Add a simple request ID to each outgoing request\r\n\r\n        .addRequestInterceptorFirst(new HttpRequestInterceptor() {\r\n\r\n            private final AtomicLong count = new AtomicLong(0);\r\n\r\n            @Override\r\n            public void process(\r\n                    final HttpRequest request,\r\n                    final EntityDetails entity,\r\n                    final HttpContext context) throws HttpException, IOException {\r\n                request.setHeader(&quot;request-id&quot;, Long.toString(count.incrementAndGet()));\r\n            }\r\n        })\r\n\r\n        // Simulate a 404 response for some requests without passing the message down to the backend\r\n\r\n        .addExecInterceptorAfter(ChainElement.PROTOCOL.name(), &quot;custom&quot;, (request, scope, chain) -&gt; {\r\n\r\n            final Header idHeader = request.getFirstHeader(&quot;request-id&quot;);\r\n            if (idHeader != null &amp;&amp; &quot;13&quot;.equalsIgnoreCase(idHeader.getValue())) {\r\n                final ClassicHttpResponse response = new BasicClassicHttpResponse(HttpStatus.SC_NOT_FOUND, &quot;Oppsie&quot;);\r\n                response.setEntity(new StringEntity(&quot;bad luck&quot;, ContentType.TEXT_PLAIN));\r\n                return response;\r\n            } else {\r\n                return chain.proceed(request, scope);\r\n            }\r\n        })\r\n        .build()) {\r\n\r\n    for (int i = 0; i &lt; 20; i++) {\r\n        final HttpGet httpget = new HttpGet(&quot;http://httpbin.org/get&quot;);\r\n\r\n        System.out.println(&quot;Executing request &quot; + httpget.getMethod() + &quot; &quot; + httpget.getUri());\r\n\r\n        httpclient.execute(httpget, response -&gt; {\r\n            System.out.println(&quot;----------------------------------------&quot;);\r\n            System.out.println(httpget + &quot;-&gt;&quot; + new StatusLine(response));\r\n            EntityUtils.consume(response.getEntity());\r\n            return null;\r\n        });\r\n    }\r\n}\r\n\r\n```","title":"How to replace a response entity within an interceptor in Apache Http Client 5?","body":"<p>I would strongly recommend to use a custom exec interceptor <code>ExecChainHandler</code> if one wants to modify the request or response messages. Message interceptors are expected to work with the message headers only</p>\n<pre><code>try (final CloseableHttpClient httpclient = HttpClients.custom()\n\n        // Add a simple request ID to each outgoing request\n\n        .addRequestInterceptorFirst(new HttpRequestInterceptor() {\n\n            private final AtomicLong count = new AtomicLong(0);\n\n            @Override\n            public void process(\n                    final HttpRequest request,\n                    final EntityDetails entity,\n                    final HttpContext context) throws HttpException, IOException {\n                request.setHeader(&quot;request-id&quot;, Long.toString(count.incrementAndGet()));\n            }\n        })\n\n        // Simulate a 404 response for some requests without passing the message down to the backend\n\n        .addExecInterceptorAfter(ChainElement.PROTOCOL.name(), &quot;custom&quot;, (request, scope, chain) -&gt; {\n\n            final Header idHeader = request.getFirstHeader(&quot;request-id&quot;);\n            if (idHeader != null &amp;&amp; &quot;13&quot;.equalsIgnoreCase(idHeader.getValue())) {\n                final ClassicHttpResponse response = new BasicClassicHttpResponse(HttpStatus.SC_NOT_FOUND, &quot;Oppsie&quot;);\n                response.setEntity(new StringEntity(&quot;bad luck&quot;, ContentType.TEXT_PLAIN));\n                return response;\n            } else {\n                return chain.proceed(request, scope);\n            }\n        })\n        .build()) {\n\n    for (int i = 0; i &lt; 20; i++) {\n        final HttpGet httpget = new HttpGet(&quot;http://httpbin.org/get&quot;);\n\n        System.out.println(&quot;Executing request &quot; + httpget.getMethod() + &quot; &quot; + httpget.getUri());\n\n        httpclient.execute(httpget, response -&gt; {\n            System.out.println(&quot;----------------------------------------&quot;);\n            System.out.println(httpget + &quot;-&gt;&quot; + new StatusLine(response));\n            EntityUtils.consume(response.getEntity());\n            return null;\n        });\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":2575135,"reputation":31,"user_id":2233005,"display_name":"SPU42"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":586,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1682841936,"creation_date":1682745349,"question_id":76134625,"body_markdown":"We have legacy code using Apache Http Client 4 that replaces a response entity from within a response interceptor:\r\n\r\n```\r\npublic class GzipResponseInterceptor implements HttpResponseInterceptor\r\n{\r\n    @Override\r\n    public void process(HttpResponse response, HttpContext context) throws HttpException, IOException\r\n    {\r\n        response.setEntity(new GzipDecompressingEntity(response.getEntity()));\r\n    }\r\n}\r\n```\r\n\r\nThe interface `HttpResponse` for version 5 does not include a method for getting or setting the entity. The `process` method includes an EntityDetails parameter to get some information about the entity, but you cannot use that to replace it.\r\n\r\nThe Javadoc for the interceptor mentions decorating an entity, but does not mention how to do that:\r\n&gt; Interceptors can also manipulate content entities enclosed with messages. Usually this is accomplished by using the &#39;Decorator&#39; pattern where a wrapper entity class is used to decorate the original entity. \r\n\r\nDoes anyone know how this is meant to be done?","title":"How to replace a response entity within an interceptor in Apache Http Client 5?","body":"<p>We have legacy code using Apache Http Client 4 that replaces a response entity from within a response interceptor:</p>\n<pre><code>public class GzipResponseInterceptor implements HttpResponseInterceptor\n{\n    @Override\n    public void process(HttpResponse response, HttpContext context) throws HttpException, IOException\n    {\n        response.setEntity(new GzipDecompressingEntity(response.getEntity()));\n    }\n}\n</code></pre>\n<p>The interface <code>HttpResponse</code> for version 5 does not include a method for getting or setting the entity. The <code>process</code> method includes an EntityDetails parameter to get some information about the entity, but you cannot use that to replace it.</p>\n<p>The Javadoc for the interceptor mentions decorating an entity, but does not mention how to do that:</p>\n<blockquote>\n<p>Interceptors can also manipulate content entities enclosed with messages. Usually this is accomplished by using the 'Decorator' pattern where a wrapper entity class is used to decorate the original entity.</p>\n</blockquote>\n<p>Does anyone know how this is meant to be done?</p>\n"},{"tags":["java","html","html-parsing","htmlunit"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682248701,"post_id":76084456,"comment_id":134182329,"body_markdown":"Usually a program being run to simulate output is done as a local host, however, the point here is the file:/// full path may be required to be a relative path relating the producer program binary with the structure of the app. The path may need to be given as relative to either the application base folder or a special folder for page sources in the app.","body":"Usually a program being run to simulate output is done as a local host, however, the point here is the file:/// full path may be required to be a relative path relating the producer program binary with the structure of the app. The path may need to be given as relative to either the application base folder or a special folder for page sources in the app."},{"owner":{"account_id":54381,"reputation":14862,"user_id":162698,"accept_rate":100,"display_name":"Rob"},"score":0,"creation_date":1682259130,"post_id":76084456,"comment_id":134183586,"body_markdown":"**DO NOT post images of code, data, error messages, etc.** - copy or type the text into the question. [ask]","body":"<b>DO NOT post images of code, data, error messages, etc.</b> - copy or type the text into the question. <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"},{"owner":{"account_id":54381,"reputation":14862,"user_id":162698,"accept_rate":100,"display_name":"Rob"},"score":0,"creation_date":1682259207,"post_id":76084456,"comment_id":134183596,"body_markdown":"Note: `type=&quot;text/javascript` is the default and unnecessary in your markup. Also, the [&lt;img&gt;](https://html.spec.whatwg.org/dev/embedded-content.html#the-img-element) tag does not use and does not need a closing slash and never has in any HTML specification.","body":"Note: <code>type=&quot;text&#47;javascript</code> is the default and unnecessary in your markup. Also, the <a href=\"https://html.spec.whatwg.org/dev/embedded-content.html#the-img-element\" rel=\"nofollow noreferrer\">&lt;img&gt;</a> tag does not use and does not need a closing slash and never has in any HTML specification."}],"answers":[{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682841678,"creation_date":1682841678,"answer_id":76140143,"question_id":76084456,"body_markdown":"HtmlUnit is a headless browser - images are not downloaded per default.\r\nBut you can switch this on\r\n\r\n    webClient.getOptions().setDownloadImages(true);\r\n\r\nDids some test with version 3.1.0 and I was able to see all the requests.\r\n\r\nPlease keep in mind the methods waitForBackgroundJavaScriptStartingBefore() and waitForBackgroundJavaScript() are not options. You have to call them after getting a page or after a click (but this was not needed in your case).\r\n\r\nMy test code:\r\n\r\n    public class Issue76084456 extends WebConnectionWrapper {\r\n    \r\n        public Issue76084456(WebClient webClient) throws IllegalArgumentException {\r\n            super(webClient);\r\n        }\r\n    \r\n        @Override\r\n        public WebResponse getResponse(WebRequest request) throws IOException {\r\n            // Log the URL of the request\r\n            System.out.println(&quot;#######&quot; + request.getUrl().toString());\r\n            return super.getResponse(request);\r\n        }\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            try (WebClient webClient = new WebClient(BrowserVersion.FIREFOX)) {\r\n                // Wrap the client with the URLRecorder\r\n                webClient.setWebConnection(new Issue76084456(webClient));\r\n    \r\n                webClient.getOptions().setDownloadImages(true);\r\n    \r\n                // Load the local HTML file\r\n                HtmlPage page = webClient.getPage(&quot;file:///C:/RBRi/htmlunit/algorix_us_adm.html&quot;);\r\n            }\r\n        }\r\n    }","title":"How to use htmlunit to record all requests fired during rendering a page?","body":"<p>HtmlUnit is a headless browser - images are not downloaded per default.\nBut you can switch this on</p>\n<pre><code>webClient.getOptions().setDownloadImages(true);\n</code></pre>\n<p>Dids some test with version 3.1.0 and I was able to see all the requests.</p>\n<p>Please keep in mind the methods waitForBackgroundJavaScriptStartingBefore() and waitForBackgroundJavaScript() are not options. You have to call them after getting a page or after a click (but this was not needed in your case).</p>\n<p>My test code:</p>\n<pre><code>public class Issue76084456 extends WebConnectionWrapper {\n\n    public Issue76084456(WebClient webClient) throws IllegalArgumentException {\n        super(webClient);\n    }\n\n    @Override\n    public WebResponse getResponse(WebRequest request) throws IOException {\n        // Log the URL of the request\n        System.out.println(&quot;#######&quot; + request.getUrl().toString());\n        return super.getResponse(request);\n    }\n\n    public static void main(String[] args) throws IOException {\n        try (WebClient webClient = new WebClient(BrowserVersion.FIREFOX)) {\n            // Wrap the client with the URLRecorder\n            webClient.setWebConnection(new Issue76084456(webClient));\n\n            webClient.getOptions().setDownloadImages(true);\n\n            // Load the local HTML file\n            HtmlPage page = webClient.getPage(&quot;file:///C:/RBRi/htmlunit/algorix_us_adm.html&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15658354,"reputation":21,"user_id":11297851,"display_name":"defalt1996"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682841678,"creation_date":1682247930,"question_id":76084456,"body_markdown":"I&#39;m using HTMLUnit that trying to record all requests fired when loading a local html file. \r\nThis is the testing file below:\r\n\r\n```java\r\n&lt;script type=&quot;text/javascript&quot;&gt;\r\n  !(function () {\r\n    var adc = function (str) {\r\n      return decodeURIComponent(escape(window.atob(str)));\r\n    };\r\n    document.write(\r\n      adc(\r\n        &quot;PGEgaHJlZj0iaHR0cHM6Ly9kc3A4dTRqaGE0NHJyLmNsb3VkZnJvbnQubmV0L2RpcmVjdC8xOTgyMzQxMDE/YWR4PUFsZ29yaXgoUHJvKSZhcHA9MjgxOTQwMjkyJnByaWNlPTAuOTEwMSZyZD1MVldrTUJRTUxGQzhrIiB0YXJnZXQ9Il9ibGFuayI+PGltZyBzcmM9Imh0dHBzOi8vZHNwOHU0amhhNDRyci5jbG91ZGZyb250Lm5ldC9pbXAvMTk4MjM0MTAxP2FkeD1BbGdvcml4KFBybykmYXBwPTI4MTk0MDI5MiZwcmljZT0wLjkxMDEmcmQ9TFZXa01CUU1MRkM4ayIgd2lkdGg9IjMyMCIgaGVpZ2h0PSI1MCI+PC9hPjxpbWcgc3JjPSJodHRwczovL2QybWsybmg4dmZmNzY4LmNsb3VkZnJvbnQubmV0L3YxL3BpeGVsP2E9MTAyOSZiPTEwNDYmYz0xJmQ9ZmZkNDkyNTFjYjkwOGI5NSZlPTU4Njg0YWYzN2Q0MTFhNGImZj0wLjkxMDEmZz0wLjkxMDE0Jmg9MTA0NSZpPWZiMTJmZjY5ZjJkZmFiZjAmaz04MzM1NTEzMTAxMDI5ODI2NjAmcmQ9TFZXa01CUU1MRkM4ayIgYm9yZGVyPSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+&quot;\r\n      )\r\n    );\r\n    document.write(\r\n      adc(\r\n        &quot;PGltZyBzcmM9Imh0dHBzOi8vdXNlLnRyay5zdnItYWxnb3JpeC5jb20vaW1wP2NycHY9MyZpbmZvPTlFbVpwWkNNdWdETnVFak14NHlNeTBEY3BWbkp5a2pNd1FUT3hnak05UVdkaVpDTTlRSGR5Tm5KeDBEZDBsbVltRVRQdEJuWW1Bek45STNjeU5uSngwVGJtQm5KdzBEYzRWbUp3MFRhd0ZtSngwVGUwRm1KelFUTndZVFBrbDJjbWdUTTVJak41RURPMkVUUDBKbkp4a2pMdzBUYmhaU000TWpOdUFUUHRaU013RVRPdUFUUHRKbUp3a3pNOWtuWW1FMFVWMXpZbUV6TTJRek54MERjbVEyTmhKV04xUWpNelUyTTNnell3Z1RZalZHTndVR09rSlRZNVVUTW1oVFo5RW5jJnByaWNlPSR7QVVDVElPTl9QUklDRX0mcz02MDU0MyZyPWU4ZjE1OWEyZDhlMDRlY2E4MGM4NzNlMzI0NTViYTdkIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PGRpdiBpZD0iZG9qczIwMTJiMDVhIiBkYXRhLXdpZHRoPSIzMjAiIGRhdGEtaGVpZ2h0PSI1MCIgZGF0YS10cms9J2h0dHBzOi8vdXNlLnRyay5zdnItYWxnb3JpeC5jb20vaW1wP2NycHY9MyZpbmZvPTlFbVpwWkNNdWdETnVFak14NHlNeTBEY3BWbkp5a2pNd1FUT3hnak05UVdkaVpDTTlRSGR5Tm5KeDBEZDBsbVltRVRQdEJuWW1Bek45STNjeU5uSngwVGJtQm5KdzBEYzRWbUp3MFRhd0ZtSngwVGUwRm1KelFUTndZVFBrbDJjbWdUTTVJak41RURPMkVUUDBKbkp4a2pMdzBUYmhaU000TWpOdUFUUHRaU013RVRPdUFUUHRKbUp3a3pNOWtuWW1FMFVWMXpZbUV6TTJRek54MERjbVEyTmhKV04xUWpNelUyTTNnell3Z1RZalZHTndVR09rSlRZNVVUTW1oVFo5RW5jJnByaWNlPSR7QVVDVElPTl9QUklDRX0mcz02MDU0MyZyPWU4ZjE1OWEyZDhlMDRlY2E4MGM4NzNlMzI0NTViYTdkJyBkYXRhLWlkPSdBbGdvcmlYLWU4ZjE1OWEyZDhlMDRlY2E4MGM4NzNlMzI0NTViYTdkJz48c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCcgYXN5bmMgc3JjPSJodHRwczovL3Ryay5zdnItYWxnb3JpeC5jb20vc3RhdGljL200LmpzP3Q9OTM0NDIzIj48L3NjcmlwdD48L2Rpdj4=&quot;\r\n      ).replace(new RegExp(adc(&quot;XCR7QVVDVElPTl9QUklDRX0=&quot;), &quot;g&quot;), &quot;0.6381&quot;)\r\n    );\r\n  })();\r\n&lt;/script&gt;\r\n&lt;img\r\n  src=&quot;https://use.trk.svr-algorix.com/win?crpv=3&amp;info=9EmZpZCMugDNuEjMx4yMy0DcpVnJykjMwQTOxgjM9QWdiZCM9QHdyNnJx0Dd0lmYmETPtBnYmAzN9I3cyNnJx0TbmBnJw0Dc4VmJw0TawFmJx0Te0FmJzQTNwYTPkl2cmgTM5IjN5EDO2ETP0JnJxkjLw0TbhZSM4MjNuATPtZSMwETOuATPtJmJwkzM9knYmE0UV1zYmEzM2QzNx0DcmQ2NhJWN1QjMzU2M3gzYwgTYjVGNwUGOkJTY5UTMmhTZ9Enc&amp;price=0.6381&amp;s=60543&amp;r=e8f159a2d8e04eca80c873e32455ba7d&quot;\r\n  width=&quot;1&quot;\r\n  height=&quot;1&quot;\r\n  style=&quot;display: none&quot;\r\n/&gt;\r\n\r\n```\r\n\r\n\r\n\r\nWhen rendering it in Chrome, Network tab showing the url tracking list: \r\n[![enter image description here](https://i.stack.imgur.com/HWFPB.png)](https://i.stack.imgur.com/HWFPB.png)\r\n\r\nIncluding the local file itself, there are 7 requests fired. This is what I expect to see in my codes print result. \r\n\r\nMy codes below: \r\n\r\n```\r\npublic class RenderHTML extends WebConnectionWrapper {\r\n\r\n    static List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\r\n\r\n    public RenderHTML(WebClient webClient) throws IllegalArgumentException {\r\n        super(webClient);\r\n    }\r\n\r\n    @Override\r\n    public WebResponse getResponse(WebRequest request) throws IOException {\r\n        // Log the URL of the request\r\n        System.out.println(request.getUrl().toString());\r\n        return super.getResponse(request);\r\n    }\r\n\r\n\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        try (WebClient webClient = new WebClient(BrowserVersion.CHROME)) {\r\n            // Wrap the client with the URLRecorder\r\n            webClient.getOptions().setJavaScriptEnabled(true);\r\n            webClient.waitForBackgroundJavaScriptStartingBefore(100_000);\r\n            webClient.waitForBackgroundJavaScript(100_000);\r\n            webClient.getOptions().setCssEnabled(true);\r\n            webClient.getOptions().setRedirectEnabled(true);\r\n            webClient.getOptions().setUseInsecureSSL(false);\r\n            webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);\r\n            webClient.getOptions().setThrowExceptionOnScriptError(false);\r\n            webClient.getCookieManager().setCookiesEnabled(true);\r\n            webClient.setAjaxController(new AjaxController());\r\n            webClient.getCookieManager().setCookiesEnabled(true);\r\n\r\n            webClient.setWebConnection(new RenderHTML( webClient));\r\n\r\n            // Load the local HTML file\r\n            HtmlPage page = webClient.getPage(&quot;file:///Users/derrickguo/work/project/project_java/analyze_demand_tool_maven/src/main/lib/algorix_us_adm.html&quot;);\r\n            \r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBut it only printing: [![enter image description here](https://i.stack.imgur.com/b1gCx.png)](https://i.stack.imgur.com/b1gCx.png) \r\n\r\none fired request then process finished. \r\n\r\nAnyone could give me a hand on how to get all fired requests? Thank you very much! \r\n","title":"How to use htmlunit to record all requests fired during rendering a page?","body":"<p>I'm using HTMLUnit that trying to record all requests fired when loading a local html file.\nThis is the testing file below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;script type=&quot;text/javascript&quot;&gt;\n  !(function () {\n    var adc = function (str) {\n      return decodeURIComponent(escape(window.atob(str)));\n    };\n    document.write(\n      adc(\n        &quot;PGEgaHJlZj0iaHR0cHM6Ly9kc3A4dTRqaGE0NHJyLmNsb3VkZnJvbnQubmV0L2RpcmVjdC8xOTgyMzQxMDE/YWR4PUFsZ29yaXgoUHJvKSZhcHA9MjgxOTQwMjkyJnByaWNlPTAuOTEwMSZyZD1MVldrTUJRTUxGQzhrIiB0YXJnZXQ9Il9ibGFuayI+PGltZyBzcmM9Imh0dHBzOi8vZHNwOHU0amhhNDRyci5jbG91ZGZyb250Lm5ldC9pbXAvMTk4MjM0MTAxP2FkeD1BbGdvcml4KFBybykmYXBwPTI4MTk0MDI5MiZwcmljZT0wLjkxMDEmcmQ9TFZXa01CUU1MRkM4ayIgd2lkdGg9IjMyMCIgaGVpZ2h0PSI1MCI+PC9hPjxpbWcgc3JjPSJodHRwczovL2QybWsybmg4dmZmNzY4LmNsb3VkZnJvbnQubmV0L3YxL3BpeGVsP2E9MTAyOSZiPTEwNDYmYz0xJmQ9ZmZkNDkyNTFjYjkwOGI5NSZlPTU4Njg0YWYzN2Q0MTFhNGImZj0wLjkxMDEmZz0wLjkxMDE0Jmg9MTA0NSZpPWZiMTJmZjY5ZjJkZmFiZjAmaz04MzM1NTEzMTAxMDI5ODI2NjAmcmQ9TFZXa01CUU1MRkM4ayIgYm9yZGVyPSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+&quot;\n      )\n    );\n    document.write(\n      adc(\n        &quot;PGltZyBzcmM9Imh0dHBzOi8vdXNlLnRyay5zdnItYWxnb3JpeC5jb20vaW1wP2NycHY9MyZpbmZvPTlFbVpwWkNNdWdETnVFak14NHlNeTBEY3BWbkp5a2pNd1FUT3hnak05UVdkaVpDTTlRSGR5Tm5KeDBEZDBsbVltRVRQdEJuWW1Bek45STNjeU5uSngwVGJtQm5KdzBEYzRWbUp3MFRhd0ZtSngwVGUwRm1KelFUTndZVFBrbDJjbWdUTTVJak41RURPMkVUUDBKbkp4a2pMdzBUYmhaU000TWpOdUFUUHRaU013RVRPdUFUUHRKbUp3a3pNOWtuWW1FMFVWMXpZbUV6TTJRek54MERjbVEyTmhKV04xUWpNelUyTTNnell3Z1RZalZHTndVR09rSlRZNVVUTW1oVFo5RW5jJnByaWNlPSR7QVVDVElPTl9QUklDRX0mcz02MDU0MyZyPWU4ZjE1OWEyZDhlMDRlY2E4MGM4NzNlMzI0NTViYTdkIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PGRpdiBpZD0iZG9qczIwMTJiMDVhIiBkYXRhLXdpZHRoPSIzMjAiIGRhdGEtaGVpZ2h0PSI1MCIgZGF0YS10cms9J2h0dHBzOi8vdXNlLnRyay5zdnItYWxnb3JpeC5jb20vaW1wP2NycHY9MyZpbmZvPTlFbVpwWkNNdWdETnVFak14NHlNeTBEY3BWbkp5a2pNd1FUT3hnak05UVdkaVpDTTlRSGR5Tm5KeDBEZDBsbVltRVRQdEJuWW1Bek45STNjeU5uSngwVGJtQm5KdzBEYzRWbUp3MFRhd0ZtSngwVGUwRm1KelFUTndZVFBrbDJjbWdUTTVJak41RURPMkVUUDBKbkp4a2pMdzBUYmhaU000TWpOdUFUUHRaU013RVRPdUFUUHRKbUp3a3pNOWtuWW1FMFVWMXpZbUV6TTJRek54MERjbVEyTmhKV04xUWpNelUyTTNnell3Z1RZalZHTndVR09rSlRZNVVUTW1oVFo5RW5jJnByaWNlPSR7QVVDVElPTl9QUklDRX0mcz02MDU0MyZyPWU4ZjE1OWEyZDhlMDRlY2E4MGM4NzNlMzI0NTViYTdkJyBkYXRhLWlkPSdBbGdvcmlYLWU4ZjE1OWEyZDhlMDRlY2E4MGM4NzNlMzI0NTViYTdkJz48c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCcgYXN5bmMgc3JjPSJodHRwczovL3Ryay5zdnItYWxnb3JpeC5jb20vc3RhdGljL200LmpzP3Q9OTM0NDIzIj48L3NjcmlwdD48L2Rpdj4=&quot;\n      ).replace(new RegExp(adc(&quot;XCR7QVVDVElPTl9QUklDRX0=&quot;), &quot;g&quot;), &quot;0.6381&quot;)\n    );\n  })();\n&lt;/script&gt;\n&lt;img\n  src=&quot;https://use.trk.svr-algorix.com/win?crpv=3&amp;info=9EmZpZCMugDNuEjMx4yMy0DcpVnJykjMwQTOxgjM9QWdiZCM9QHdyNnJx0Dd0lmYmETPtBnYmAzN9I3cyNnJx0TbmBnJw0Dc4VmJw0TawFmJx0Te0FmJzQTNwYTPkl2cmgTM5IjN5EDO2ETP0JnJxkjLw0TbhZSM4MjNuATPtZSMwETOuATPtJmJwkzM9knYmE0UV1zYmEzM2QzNx0DcmQ2NhJWN1QjMzU2M3gzYwgTYjVGNwUGOkJTY5UTMmhTZ9Enc&amp;price=0.6381&amp;s=60543&amp;r=e8f159a2d8e04eca80c873e32455ba7d&quot;\n  width=&quot;1&quot;\n  height=&quot;1&quot;\n  style=&quot;display: none&quot;\n/&gt;\n\n</code></pre>\n<p>When rendering it in Chrome, Network tab showing the url tracking list:\n<a href=\"https://i.stack.imgur.com/HWFPB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HWFPB.png\" alt=\"enter image description here\" /></a></p>\n<p>Including the local file itself, there are 7 requests fired. This is what I expect to see in my codes print result.</p>\n<p>My codes below:</p>\n<pre><code>public class RenderHTML extends WebConnectionWrapper {\n\n    static List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n\n\n    public RenderHTML(WebClient webClient) throws IllegalArgumentException {\n        super(webClient);\n    }\n\n    @Override\n    public WebResponse getResponse(WebRequest request) throws IOException {\n        // Log the URL of the request\n        System.out.println(request.getUrl().toString());\n        return super.getResponse(request);\n    }\n\n\n\n    public static void main(String[] args) throws IOException {\n        try (WebClient webClient = new WebClient(BrowserVersion.CHROME)) {\n            // Wrap the client with the URLRecorder\n            webClient.getOptions().setJavaScriptEnabled(true);\n            webClient.waitForBackgroundJavaScriptStartingBefore(100_000);\n            webClient.waitForBackgroundJavaScript(100_000);\n            webClient.getOptions().setCssEnabled(true);\n            webClient.getOptions().setRedirectEnabled(true);\n            webClient.getOptions().setUseInsecureSSL(false);\n            webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);\n            webClient.getOptions().setThrowExceptionOnScriptError(false);\n            webClient.getCookieManager().setCookiesEnabled(true);\n            webClient.setAjaxController(new AjaxController());\n            webClient.getCookieManager().setCookiesEnabled(true);\n\n            webClient.setWebConnection(new RenderHTML( webClient));\n\n            // Load the local HTML file\n            HtmlPage page = webClient.getPage(&quot;file:///Users/derrickguo/work/project/project_java/analyze_demand_tool_maven/src/main/lib/algorix_us_adm.html&quot;);\n            \n        }\n    }\n}\n</code></pre>\n<p>But it only printing: <a href=\"https://i.stack.imgur.com/b1gCx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b1gCx.png\" alt=\"enter image description here\" /></a></p>\n<p>one fired request then process finished.</p>\n<p>Anyone could give me a hand on how to get all fired requests? Thank you very much!</p>\n"},{"tags":["java","spring","tomcat","tomcat8"],"comments":[{"owner":{"account_id":27387399,"reputation":1,"user_id":20890952,"display_name":"jn0826"},"score":0,"creation_date":1682832622,"post_id":76139108,"comment_id":134275620,"body_markdown":"Looking at the error stack, why does it seem like org.apache.commons.logging.LogFactory.getConfigurationFile is calling getResources() from org.apache.catalina.loader.WebappClassLoaderBase instead of org.apache.commons.logging.LogFactory?\n\nhttps://github.com/apache/tomcat/blob/8.5.x/java/org/apache/catalina/loader/WebappClassLoaderBase.java#L1115\n\nhttps://github.com/apache/commons-logging/blob/master/src/main/java/org/apache/commons/logging/LogFactory.java#L1363","body":"Looking at the error stack, why does it seem like org.apache.commons.logging.LogFactory.getConfigurationFile is calling getResources() from org.apache.catalina.loader.WebappClassLoaderBase instead of org.apache.commons.logging.LogFactory?  <a href=\"https://github.com/apache/tomcat/blob/8.5.x/java/org/apache/catalina/loader/WebappClassLoaderBase.java#L1115\" rel=\"nofollow noreferrer\">github.com/apache/tomcat/blob/8.5.x/java/org/apache/catalina&zwnj;&#8203;/&hellip;</a>  <a href=\"https://github.com/apache/commons-logging/blob/master/src/main/java/org/apache/commons/logging/LogFactory.java#L1363\" rel=\"nofollow noreferrer\">github.com/apache/commons-logging/blob/master/src/main/java/&zwnj;&#8203;org/&hellip;</a>"},{"owner":{"account_id":27387399,"reputation":1,"user_id":20890952,"display_name":"jn0826"},"score":0,"creation_date":1682835820,"post_id":76139108,"comment_id":134275803,"body_markdown":"meant to link https://github.com/apache/tomcat/blob/8.5.x/java/org/apache/catalina/loader/WebappClassLoaderBase.java#L1005","body":"meant to link <a href=\"https://github.com/apache/tomcat/blob/8.5.x/java/org/apache/catalina/loader/WebappClassLoaderBase.java#L1005\" rel=\"nofollow noreferrer\">github.com/apache/tomcat/blob/8.5.x/java/org/apache/catalina&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":593875,"reputation":20381,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1682973045,"post_id":76139108,"comment_id":134293234,"body_markdown":"LogFactory is trying to load resources from the ClassLoader, which makes sense.","body":"LogFactory is trying to load resources from the ClassLoader, which makes sense."}],"owner":{"account_id":27387399,"reputation":1,"user_id":20890952,"display_name":"jn0826"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682841163,"creation_date":1682815838,"question_id":76139108,"body_markdown":"I&#39;m upgrading from Tomcat 8.0 to 8.5.87, while upgrading Spring to 5.1.20.RELEASE and it broke my OSGi application. It works if I just downgrade to Tomcat 8.0\r\n\r\nIt&#39;s erroring out when parsing `&lt;listener-class&gt; org.springframework.web.context.ContextLoaderListener&lt;/Listener&gt;`. Any I verified that spring-web-5.1.20.RELEASE.jar is in the classpath.\r\n\r\nHere&#39;s the error that and the web.xml\r\n\r\n```\r\nApr 29, 2023 5:41:32 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: No Spring WebApplicationInitializer types detected on classpath\r\nApr 29, 2023 5:41:32 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: Initializing Spring root WebApplicationContext\r\nApr 29, 2023 5:41:32 PM org.apache.catalina.core.StandardContext listenerStart\r\nSEVERE: Exception sending context initialized event to listener instance of class [org.springframework.web.context.ContextLoaderListener]\r\njava.lang.NullPointerException\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase$CombinedEnumeration.inc(WebappClassLoaderBase.java:2775)\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase$CombinedEnumeration.hasMoreElements(WebappClassLoaderBase.java:2760)\r\n\tat org.apache.commons.logging.LogFactory.getConfigurationFile(LogFactory.java:1366)\r\n\tat org.apache.commons.logging.LogFactory.getFactory(LogFactory.java:453)\r\n\tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:655)\r\n\tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:269)\r\n\tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4492)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4950)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:711)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:688)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)\r\n\tat org.cg.dao.webcontainer.tomcat.TomcatWrapper.startWebApp(TomcatWrapper.java:187)\r\n\tat org.cg.dao.webcontainer.tomcat.TomcatWrapper.prepareAllWebApps(TomcatWrapper.java:141)\r\n\tat org.cg.dao.webcontainer.tomcat.TomcatWrapper.startServer(TomcatWrapper.java:208)\r\n\tat org.cg.dao.webcontainer.tomcat.Application.start(Application.java:30)\r\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)\r\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:136)\r\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)\r\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:402)\r\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:659)\r\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:596)\r\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1467)\r\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1440)\r\n```\r\n\r\nHere&#39;s the web.xml\r\n\r\n```lang-xml\r\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n         xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; \r\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; \r\n         version=&quot;3.1&quot;&gt;\r\n         \r\n\t&lt;display-name&gt;App Services&lt;/display-name&gt;\r\n\r\n\t&lt;context-param&gt;\r\n\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n\t\t&lt;param-value&gt;WEB-INF/application-context.xml,WEB-INF/application-context-websocket.xml&lt;/param-value&gt;\r\n\t&lt;/context-param&gt;\r\n\r\n\t&lt;absolute-ordering /&gt;\r\n\r\n\t&lt;filter&gt;\r\n\t\t&lt;filter-name&gt;ExecutionTimeFilter&lt;/filter-name&gt;\r\n\t\t&lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\r\n\t\t\t\t&lt;async-supported&gt;true&lt;/async-supported&gt;\r\n\t\t\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;targetBeanName&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;executionTimeFilter&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t&lt;/filter&gt;\r\n\t&lt;filter-mapping&gt;\r\n\t\t&lt;filter-name&gt;ExecutionTimeFilter&lt;/filter-name&gt;\r\n\t\t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n\t&lt;/filter-mapping&gt;\r\n\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\r\n\t&lt;servlet&gt;\r\n\t\t&lt;servlet-name&gt;RESTServices&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;WEB-INF/application-context.xml&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;disable-address-updates&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;true&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n\t&lt;/servlet&gt;\r\n\r\n\t&lt;servlet&gt;\r\n\t\t&lt;servlet-name&gt;WebSockets&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;WEB-INF/application-context-websocket.xml&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;load-on-startup&gt;2&lt;/load-on-startup&gt;\r\n\t\t&lt;async-supported&gt;true&lt;/async-supported&gt;\r\n\t&lt;/servlet&gt;\r\n\r\n\t&lt;servlet-mapping&gt;\r\n\t\t&lt;servlet-name&gt;RESTServices&lt;/servlet-name&gt;\r\n\t\t&lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;\r\n\t\t&lt;url-pattern&gt;/services-internal/*&lt;/url-pattern&gt;\r\n\t&lt;/servlet-mapping&gt;\r\n\t&lt;servlet-mapping&gt;\r\n\t\t&lt;servlet-name&gt;WebSockets&lt;/servlet-name&gt;\r\n\t\t&lt;url-pattern&gt;/websockets/*&lt;/url-pattern&gt;\r\n\t&lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n```\r\n\r\nIf I comment out `&lt;listener&gt;` then the error is thrown...\r\n\r\n```\r\nApr 29, 2023 5:46:23 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: No Spring WebApplicationInitializer types detected on classpath\r\nApr 29, 2023 5:46:23 PM org.apache.catalina.core.StandardContext filterStart\r\nSEVERE: Exception starting filter [ExecutionTimeFilter]\r\njava.lang.NullPointerException\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase$CombinedEnumeration.inc(WebappClassLoaderBase.java:2775)\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase$CombinedEnumeration.hasMoreElements(WebappClassLoaderBase.java:2760)\r\n\tat org.apache.commons.logging.LogFactory.getConfigurationFile(LogFactory.java:1366)\r\n\tat org.apache.commons.logging.LogFactory.getFactory(LogFactory.java:453)\r\n\tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:655)\r\n\tat org.springframework.web.filter.GenericFilterBean.&lt;init&gt;(GenericFilterBean.java:86)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.&lt;init&gt;(DelegatingFilterProxy.java:107)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:142)\r\n\tat org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:252)\r\n\tat org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:100)\r\n\tat org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4343)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4976)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:711)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:688)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)\r\n\tat org.cg.dao.webcontainer.tomcat.TomcatWrapper.startWebApp(TomcatWrapper.java:187)\r\n\tat org.cg.dao.webcontainer.tomcat.TomcatWrapper.prepareAllWebApps(TomcatWrapper.java:141)\r\n\tat org.cg.dao.webcontainer.tomcat.TomcatWrapper.startServer(TomcatWrapper.java:208)\r\n\tat org.cg.dao.webcontainer.tomcat.Application.start(Application.java:30)\r\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)\r\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:136)\r\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)\r\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:402)\r\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:659)\r\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:596)\r\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1467)\r\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1440)\r\n```\r\n\r\nUpdate: Looks like its calling loader.getResources(&quot;commons-logging.properties&quot;) but I don&#39;t have any commons-logging.properties in my project files.","title":"Web.xml configuration is broken when upgrading to Tomcat 8.5 and Spring 5.1","body":"<p>I'm upgrading from Tomcat 8.0 to 8.5.87, while upgrading Spring to 5.1.20.RELEASE and it broke my OSGi application. It works if I just downgrade to Tomcat 8.0</p>\n<p>It's erroring out when parsing <code>&lt;listener-class&gt; org.springframework.web.context.ContextLoaderListener&lt;/Listener&gt;</code>. Any I verified that spring-web-5.1.20.RELEASE.jar is in the classpath.</p>\n<p>Here's the error that and the web.xml</p>\n<pre><code>Apr 29, 2023 5:41:32 PM org.apache.catalina.core.ApplicationContext log\nINFO: No Spring WebApplicationInitializer types detected on classpath\nApr 29, 2023 5:41:32 PM org.apache.catalina.core.ApplicationContext log\nINFO: Initializing Spring root WebApplicationContext\nApr 29, 2023 5:41:32 PM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class [org.springframework.web.context.ContextLoaderListener]\njava.lang.NullPointerException\n    at org.apache.catalina.loader.WebappClassLoaderBase$CombinedEnumeration.inc(WebappClassLoaderBase.java:2775)\n    at org.apache.catalina.loader.WebappClassLoaderBase$CombinedEnumeration.hasMoreElements(WebappClassLoaderBase.java:2760)\n    at org.apache.commons.logging.LogFactory.getConfigurationFile(LogFactory.java:1366)\n    at org.apache.commons.logging.LogFactory.getFactory(LogFactory.java:453)\n    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:655)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:269)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4492)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4950)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:711)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:688)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)\n    at org.cg.dao.webcontainer.tomcat.TomcatWrapper.startWebApp(TomcatWrapper.java:187)\n    at org.cg.dao.webcontainer.tomcat.TomcatWrapper.prepareAllWebApps(TomcatWrapper.java:141)\n    at org.cg.dao.webcontainer.tomcat.TomcatWrapper.startServer(TomcatWrapper.java:208)\n    at org.cg.dao.webcontainer.tomcat.Application.start(Application.java:30)\n    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:136)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:402)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:659)\n    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:596)\n    at org.eclipse.equinox.launcher.Main.run(Main.java:1467)\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1440)\n</code></pre>\n<p>Here's the web.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n         xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; \n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; \n         version=&quot;3.1&quot;&gt;\n         \n    &lt;display-name&gt;App Services&lt;/display-name&gt;\n\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;WEB-INF/application-context.xml,WEB-INF/application-context-websocket.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;absolute-ordering /&gt;\n\n    &lt;filter&gt;\n        &lt;filter-name&gt;ExecutionTimeFilter&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n                &lt;async-supported&gt;true&lt;/async-supported&gt;\n        \n        &lt;init-param&gt;\n            &lt;param-name&gt;targetBeanName&lt;/param-name&gt;\n            &lt;param-value&gt;executionTimeFilter&lt;/param-value&gt;\n        &lt;/init-param&gt;\n    &lt;/filter&gt;\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;ExecutionTimeFilter&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;RESTServices&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.apache.cxf.transport.servlet.CXFServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;WEB-INF/application-context.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;disable-address-updates&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;WebSockets&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;WEB-INF/application-context-websocket.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;\n        &lt;async-supported&gt;true&lt;/async-supported&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;RESTServices&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;\n        &lt;url-pattern&gt;/services-internal/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;WebSockets&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/websockets/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>If I comment out <code>&lt;listener&gt;</code> then the error is thrown...</p>\n<pre><code>Apr 29, 2023 5:46:23 PM org.apache.catalina.core.ApplicationContext log\nINFO: No Spring WebApplicationInitializer types detected on classpath\nApr 29, 2023 5:46:23 PM org.apache.catalina.core.StandardContext filterStart\nSEVERE: Exception starting filter [ExecutionTimeFilter]\njava.lang.NullPointerException\n    at org.apache.catalina.loader.WebappClassLoaderBase$CombinedEnumeration.inc(WebappClassLoaderBase.java:2775)\n    at org.apache.catalina.loader.WebappClassLoaderBase$CombinedEnumeration.hasMoreElements(WebappClassLoaderBase.java:2760)\n    at org.apache.commons.logging.LogFactory.getConfigurationFile(LogFactory.java:1366)\n    at org.apache.commons.logging.LogFactory.getFactory(LogFactory.java:453)\n    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:655)\n    at org.springframework.web.filter.GenericFilterBean.&lt;init&gt;(GenericFilterBean.java:86)\n    at org.springframework.web.filter.DelegatingFilterProxy.&lt;init&gt;(DelegatingFilterProxy.java:107)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:142)\n    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:252)\n    at org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:100)\n    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4343)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4976)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:711)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:688)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)\n    at org.cg.dao.webcontainer.tomcat.TomcatWrapper.startWebApp(TomcatWrapper.java:187)\n    at org.cg.dao.webcontainer.tomcat.TomcatWrapper.prepareAllWebApps(TomcatWrapper.java:141)\n    at org.cg.dao.webcontainer.tomcat.TomcatWrapper.startServer(TomcatWrapper.java:208)\n    at org.cg.dao.webcontainer.tomcat.Application.start(Application.java:30)\n    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:136)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:402)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:659)\n    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:596)\n    at org.eclipse.equinox.launcher.Main.run(Main.java:1467)\n    at org.eclipse.equinox.launcher.Main.main(Main.java:1440)\n</code></pre>\n<p>Update: Looks like its calling loader.getResources(&quot;commons-logging.properties&quot;) but I don't have any commons-logging.properties in my project files.</p>\n"},{"tags":["java","debugging","nullpointerexception","jboss"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1681479350,"post_id":76015273,"comment_id":134067439,"body_markdown":"Anything calling a private method must be called in code inside that private methods class, and for package private, the calling method must be inside at least the code of an extended class! If you change the method to protected along with any globals that may do it to know if you get another error on another line because this one is gone.","body":"Anything calling a private method must be called in code inside that private methods class, and for package private, the calling method must be inside at least the code of an extended class! If you change the method to protected along with any globals that may do it to know if you get another error on another line because this one is gone."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1682333626,"post_id":76015273,"comment_id":134193224,"body_markdown":"Welcome to SO. Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). You would be doing yourself the biggest favour, because that kind of asking questions will yield better answers faster. Nobody can debug a stacktrace without code - an incomplete stacktrace at that. You should not waste 300 reputation points for nothing. Thank you.","body":"Welcome to SO. Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. You would be doing yourself the biggest favour, because that kind of asking questions will yield better answers faster. Nobody can debug a stacktrace without code - an incomplete stacktrace at that. You should not waste 300 reputation points for nothing. Thank you."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1682333905,"post_id":76015273,"comment_id":134193276,"body_markdown":"Concerning `Caused by: java.lang.NullPointerException`: Why are you hiding the very exception causing the problem? That is so counter-productive! The exception you are showing is only the symptom, not the root cause of the problem.","body":"Concerning <code>Caused by: java.lang.NullPointerException</code>: Why are you hiding the very exception causing the problem? That is so counter-productive! The exception you are showing is only the symptom, not the root cause of the problem."}],"owner":{"account_id":16623950,"reputation":74,"user_id":12013522,"display_name":"Joe D"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1682841040,"creation_date":1681476548,"question_id":76015273,"body_markdown":"I&#39;ve got the following stacktrace that apparently produces NullPointerException at runtime:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    2023-04-10 13:54:50,790 ERROR [org.jboss.as.ejb3.invocation] (default-threads - 44) [ ] [null ] [ ] [ ] [ ] JBAS014134: EJB Invocation failed on component VotingResultsHelper for method public void com.example.voting.impl.helpers.VotingResultsHelper.calculateNewProtocol(com.example.voting.api.dto.request.OnlineVotingProtocolMakeRequest,com.example.voting.impl.persistence.model.VotingVersion):\r\n    \r\n    .... \r\n    \r\n    \tat com.example.voting.impl.helpers.VotingResultsHelper$$$view1332.calculateNewProtocol(Unknown Source)\r\n    \tat sun.reflect.GeneratedMethodAccessor4488.invoke(Unknown Source) [:1.8.0_111]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]\r\n    \tat org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:267)\r\n    \tat org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)\r\n    \tat org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137)\r\n    \tat org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:263)\r\n    \tat org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:115)\r\n    \tat org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56)\r\n    \tat org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)\r\n    \tat com.example.voting.impl.helpers.VotingResultsHelper$Proxy$_$$_Weld$Proxy$.calculateNewProtocol(VotingResultsHelper$Proxy$_$$_Weld$Proxy$.java)\r\n    \tat com.example.voting.impl.VotingMessageServiceImpl.makeOnlineVotingProtocol(VotingMessageServiceImpl.java:661)\r\n    \r\n    ...\r\n    \r\n    Caused by: java.lang.NullPointerException\r\nPresumably, the exception occured in the `calculateNewProtocol()` method of the `com.example.voting.impl.helpers.VotingResultsHelper` class.\r\n\r\nI need to know just a few things:\r\n\r\n 1. Is there a way to find out where exactly the exception occurred in the proxied version of the `com.example.voting.impl.helpers.VotingResultsHelper` class? Do I need to build/deploy the app in a different way to accomplish this? Why does it give the unknown for `calculateNewProtocol()` but not for `makeOnlineVotingProtocol()`?\r\n 2. The `calculateNewProtocol()` method calls other private methods. Is there a guarantee that the exception occurred in this method and not in the private methods? There are no other methods in the stacktrace.","title":"Unknown Source in Stacktrace with JBoss and Proxying","body":"<p>I've got the following stacktrace that apparently produces NullPointerException at runtime:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-04-10 13:54:50,790 ERROR [org.jboss.as.ejb3.invocation] (default-threads - 44) [ ] [null ] [ ] [ ] [ ] JBAS014134: EJB Invocation failed on component VotingResultsHelper for method public void com.example.voting.impl.helpers.VotingResultsHelper.calculateNewProtocol(com.example.voting.api.dto.request.OnlineVotingProtocolMakeRequest,com.example.voting.impl.persistence.model.VotingVersion):\n\n.... \n\n    at com.example.voting.impl.helpers.VotingResultsHelper$$$view1332.calculateNewProtocol(Unknown Source)\n    at sun.reflect.GeneratedMethodAccessor4488.invoke(Unknown Source) [:1.8.0_111]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]\n    at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]\n    at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:267)\n    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)\n    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137)\n    at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:263)\n    at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:115)\n    at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56)\n    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)\n    at com.example.voting.impl.helpers.VotingResultsHelper$Proxy$_$$_Weld$Proxy$.calculateNewProtocol(VotingResultsHelper$Proxy$_$$_Weld$Proxy$.java)\n    at com.example.voting.impl.VotingMessageServiceImpl.makeOnlineVotingProtocol(VotingMessageServiceImpl.java:661)\n\n...\n\nCaused by: java.lang.NullPointerException\n</code></pre>\n<p>Presumably, the exception occured in the <code>calculateNewProtocol()</code> method of the <code>com.example.voting.impl.helpers.VotingResultsHelper</code> class.</p>\n<p>I need to know just a few things:</p>\n<ol>\n<li>Is there a way to find out where exactly the exception occurred in the proxied version of the <code>com.example.voting.impl.helpers.VotingResultsHelper</code> class? Do I need to build/deploy the app in a different way to accomplish this? Why does it give the unknown for <code>calculateNewProtocol()</code> but not for <code>makeOnlineVotingProtocol()</code>?</li>\n<li>The <code>calculateNewProtocol()</code> method calls other private methods. Is there a guarantee that the exception occurred in this method and not in the private methods? There are no other methods in the stacktrace.</li>\n</ol>\n"},{"tags":["java","variables","selenium-webdriver","properties"],"comments":[{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1682809275,"post_id":76138547,"comment_id":134274118,"body_markdown":"Yeah... don&#39;t do this. Create a proper [page object](https://www.selenium.dev/documentation/test_practices/encouraged/page_object_models/) and put the locators in the class itself. It will make your life much, much easier... reading, debugging, etc.","body":"Yeah... don&#39;t do this. Create a proper <a href=\"https://www.selenium.dev/documentation/test_practices/encouraged/page_object_models/\" rel=\"nofollow noreferrer\">page object</a> and put the locators in the class itself. It will make your life much, much easier... reading, debugging, etc."}],"owner":{"account_id":13205948,"reputation":1,"user_id":15826610,"display_name":"Michael J Frazier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682840917,"creation_date":1682804167,"question_id":76138547,"body_markdown":"**Observation:**\r\nI would like to create a variable that can be used in tests that will allow me to only type the variable name instead calling the file then method.\r\n\r\nExample ( would like to something like this )\r\n\r\n    propReader reader = new propReader();\r\n\r\nwhich would replace this:\r\n\r\n    By username = By.xpath(propReader.setup(&quot;username&quot;)\r\n\r\nand would look like this:\r\n\r\n    By username = By.xpath(reader(&quot;usrname&quot;);\r\n\r\nBasically, I would like to simplify the call.\r\n\r\n------\r\n\r\nI tried to create this variable, but with no luck `propReader.setup(); setup = new propReader.setup();`\r\n\r\nI&#39;m not experienced enough to create the variable yet - just do not know what to look for.\r\n\r\nMy Properties File:\r\n\r\n    static Properties prop = new Properties();\r\n        \r\n        public static String setup(String key) throws Exception {\r\n            String propPath = System.getProperty(&quot;user.dir&quot;) + &quot;\\\\src\\\\test\\\\java\\\\melos\\\\configs\\\\setup.properties&quot;;\r\n            FileInputStream fis = new FileInputStream(propPath);\r\n            prop.load(fis);\r\n        \r\n            String value = prop.get(key).toString();\r\n        \r\n            if (StringUtils.isEmpty(value)) {\r\n                throw new Exception(&quot;Value is not specified for key: &quot; + key + &quot;in properties file&quot;);\r\n            }\r\n            return value;\r\n        }\r\n    \r\n    }\r\n\r\nMy pageobjects file:\r\n\r\n    public class userLoginObj extends baseClass {\r\n    \r\n    By username = By.xpath(propReader.Setup(&quot;username&quot;));\r\n    By password = By.xpath(propReader.Setup(&quot;password&quot;));\r\n    By loginBtn = By.cssSelector(propReader.melosSetup(&quot;loginBtn&quot;));\r\n    public userLoginObj() throws Exception {\r\n    \r\n    }\r\n\r\nMy properties file: (snippit)\r\n\r\n    username = //div\\[@id=&#39;q-app&#39;\\]/div/div/main/div/div\\[2\\]/div/label/div/div/div/input\r\n    password = //div\\[@id=&#39;q-app&#39;\\]/div/div/main/div/div\\[2\\]/div/label\\[2\\]/div/div/div/input                                             \r\n    loginBtn = .q-btn--standard .block\r\n","title":"How to Create a variable to read a properties file many times","body":"<p><strong>Observation:</strong>\nI would like to create a variable that can be used in tests that will allow me to only type the variable name instead calling the file then method.</p>\n<p>Example ( would like to something like this )</p>\n<pre><code>propReader reader = new propReader();\n</code></pre>\n<p>which would replace this:</p>\n<pre><code>By username = By.xpath(propReader.setup(&quot;username&quot;)\n</code></pre>\n<p>and would look like this:</p>\n<pre><code>By username = By.xpath(reader(&quot;usrname&quot;);\n</code></pre>\n<p>Basically, I would like to simplify the call.</p>\n<hr />\n<p>I tried to create this variable, but with no luck <code>propReader.setup(); setup = new propReader.setup();</code></p>\n<p>I'm not experienced enough to create the variable yet - just do not know what to look for.</p>\n<p>My Properties File:</p>\n<pre><code>static Properties prop = new Properties();\n    \n    public static String setup(String key) throws Exception {\n        String propPath = System.getProperty(&quot;user.dir&quot;) + &quot;\\\\src\\\\test\\\\java\\\\melos\\\\configs\\\\setup.properties&quot;;\n        FileInputStream fis = new FileInputStream(propPath);\n        prop.load(fis);\n    \n        String value = prop.get(key).toString();\n    \n        if (StringUtils.isEmpty(value)) {\n            throw new Exception(&quot;Value is not specified for key: &quot; + key + &quot;in properties file&quot;);\n        }\n        return value;\n    }\n\n}\n</code></pre>\n<p>My pageobjects file:</p>\n<pre><code>public class userLoginObj extends baseClass {\n\nBy username = By.xpath(propReader.Setup(&quot;username&quot;));\nBy password = By.xpath(propReader.Setup(&quot;password&quot;));\nBy loginBtn = By.cssSelector(propReader.melosSetup(&quot;loginBtn&quot;));\npublic userLoginObj() throws Exception {\n\n}\n</code></pre>\n<p>My properties file: (snippit)</p>\n<pre><code>username = //div\\[@id='q-app'\\]/div/div/main/div/div\\[2\\]/div/label/div/div/div/input\npassword = //div\\[@id='q-app'\\]/div/div/main/div/div\\[2\\]/div/label\\[2\\]/div/div/div/input                                             \nloginBtn = .q-btn--standard .block\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","sybase"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1681731674,"post_id":76034654,"comment_id":134098773,"body_markdown":"Typo? Should be strategy @GeneratedValue(strategy = GenerationType.IDENTITY) This is the correct value for id auto incremented by database.","body":"Typo? Should be strategy @GeneratedValue(strategy = GenerationType.IDENTITY) This is the correct value for id auto incremented by database."},{"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"score":0,"creation_date":1681732108,"post_id":76034654,"comment_id":134098881,"body_markdown":"@Mar-Z Yes that&#39;s a typo. Corrected now. Thank you for highlighting. Yeah but it still does not work. Basically it works for the first entity that I save within that method but thereafter it uses the same id for each entity that I save. Tried lot of things but nothing worked.","body":"@Mar-Z Yes that&#39;s a typo. Corrected now. Thank you for highlighting. Yeah but it still does not work. Basically it works for the first entity that I save within that method but thereafter it uses the same id for each entity that I save. Tried lot of things but nothing worked."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1681735164,"post_id":76034654,"comment_id":134099708,"body_markdown":"Please share the code of the entities. At least two of them where the issue occurs. And the service code where you save the entities.","body":"Please share the code of the entities. At least two of them where the issue occurs. And the service code where you save the entities."},{"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"score":0,"creation_date":1681746803,"post_id":76034654,"comment_id":134102993,"body_markdown":"@Mar-Z Unfortunately I can provide the code here as it&#39;s an enterprise application and also access to SOF/GitHub is blocked otherwise would have provided some modified sample.\n\nGive me some time. Will write some samples and update here just to give you an idea of how I am doing it?","body":"@Mar-Z Unfortunately I can provide the code here as it&#39;s an enterprise application and also access to SOF/GitHub is blocked otherwise would have provided some modified sample.  Give me some time. Will write some samples and update here just to give you an idea of how I am doing it?"},{"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"score":0,"creation_date":1681755531,"post_id":76034654,"comment_id":134105042,"body_markdown":"@Mar-Z I have added the sample code and was able to replicate the issue partially.","body":"@Mar-Z I have added the sample code and was able to replicate the issue partially."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1681756927,"post_id":76034654,"comment_id":134105319,"body_markdown":"I think the problem is not with id generator but with the relationship. The one-to-many and many-to-one annotations has been mixed-up. You want to have many allocations assigned to each block, or many blocks assigned to each allocation?","body":"I think the problem is not with id generator but with the relationship. The one-to-many and many-to-one annotations has been mixed-up. You want to have many allocations assigned to each block, or many blocks assigned to each allocation?"},{"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"score":0,"creation_date":1681801030,"post_id":76034654,"comment_id":134110778,"body_markdown":"@Mar-Z it&#39;s many allocations to one block and that&#39;s what I have specified in the entities. ManyToOne on allocation side and OneToMany on block side. Its a bidirectional relationship where allocation side is the owning entity.","body":"@Mar-Z it&#39;s many allocations to one block and that&#39;s what I have specified in the entities. ManyToOne on allocation side and OneToMany on block side. Its a bidirectional relationship where allocation side is the owning entity."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1681803629,"post_id":76034654,"comment_id":134111342,"body_markdown":"Sorry I was wrong. The relationship is correct annotated.","body":"Sorry I was wrong. The relationship is correct annotated."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1681917232,"post_id":76034654,"comment_id":134135069,"body_markdown":"Check the SQL that Hibernate is issuing for the inserts. Either the database logic is broken, or some unseen mapping is causing hibernate to insert the Block ID value as the Allocation ID. The second should be noticeable in the SQL if parameters are logged as well","body":"Check the SQL that Hibernate is issuing for the inserts. Either the database logic is broken, or some unseen mapping is causing hibernate to insert the Block ID value as the Allocation ID. The second should be noticeable in the SQL if parameters are logged as well"},{"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"score":0,"creation_date":1681918951,"post_id":76034654,"comment_id":134135542,"body_markdown":"@Chris No primary keys are not appearing in insert statements. I do not think DB is broken given it already works with legacy application.","body":"@Chris No primary keys are not appearing in insert statements. I do not think DB is broken given it already works with legacy application."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1682000970,"post_id":76034654,"comment_id":134149901,"body_markdown":"If values are not being put into the Allocation insert statements, then it is the DB that is picking the value to use, not Hibernate, so it is a DB setup issue. Identity tells JPA that you&#39;ve configured your database to automatically assign IDs and that it needs to look up the value assigned after the insert - JPA/Hibernate has no involvement in actually assigning them","body":"If values are not being put into the Allocation insert statements, then it is the DB that is picking the value to use, not Hibernate, so it is a DB setup issue. Identity tells JPA that you&#39;ve configured your database to automatically assign IDs and that it needs to look up the value assigned after the insert - JPA/Hibernate has no involvement in actually assigning them"}],"answers":[{"comments":[{"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"score":0,"creation_date":1681880271,"post_id":76042351,"comment_id":134126251,"body_markdown":"I am fine with that gap. My issue is, in my legacy DB there are lot of records already something like ```Table A -&gt; 1, 2, 3``` and ```Table B -&gt; 1, 2, 3, 4```.\nNow when my code tries to generate the id while inserting into ```Table A```, it generates id as ```4``` and in the very next line when it tries to insert into ```Table B```, it uses the same id ```4``` instead of generating number ```5 or above```. Any idea how that can be solved?","body":"I am fine with that gap. My issue is, in my legacy DB there are lot of records already something like <code>Table A -&gt; 1, 2, 3</code> and <code>Table B -&gt; 1, 2, 3, 4</code>. Now when my code tries to generate the id while inserting into <code>Table A</code>, it generates id as <code>4</code> and in the very next line when it tries to insert into <code>Table B</code>, it uses the same id <code>4</code> instead of generating number <code>5 or above</code>. Any idea how that can be solved?"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1681888808,"post_id":76042351,"comment_id":134127749,"body_markdown":"I got your point. But it doesn&#39;t happen in Hibernate. If you are not setting the id in the entity then Hibernate sends an insert statement without the id. The database (in your case Sybase) will provide the next value for the identifier. If it doesn&#39;t work properly please check the definition of the affected table. Maybe there is a (wrong) sequence in use and not the AUTOINCREMENT default. (I&#39;m not an expert on Sybase)","body":"I got your point. But it doesn&#39;t happen in Hibernate. If you are not setting the id in the entity then Hibernate sends an insert statement without the id. The database (in your case Sybase) will provide the next value for the identifier. If it doesn&#39;t work properly please check the definition of the affected table. Maybe there is a (wrong) sequence in use and not the AUTOINCREMENT default. (I&#39;m not an expert on Sybase)"},{"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"score":0,"creation_date":1681916694,"post_id":76042351,"comment_id":134134883,"body_markdown":"I checked the definition of tables and looks all good. I tried something different now though. I tried persisting only Allocation instead of Block followed by Allocation. Ideally it should have generated one unique id and persisted the Allocation. But instead I get this exception: ```Generated keys are not available because either the Statement.NO_GENERATED_KEYS was used or no keys were automatically generated.``` Now I am bit confused as in why it worked for Block and not working for Allocation. Any idea?","body":"I checked the definition of tables and looks all good. I tried something different now though. I tried persisting only Allocation instead of Block followed by Allocation. Ideally it should have generated one unique id and persisted the Allocation. But instead I get this exception: <code>Generated keys are not available because either the Statement.NO_GENERATED_KEYS was used or no keys were automatically generated.</code> Now I am bit confused as in why it worked for Block and not working for Allocation. Any idea?"},{"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"score":0,"creation_date":1682840905,"post_id":76042351,"comment_id":134276294,"body_markdown":"I was able to solve the issue. It was nothing to do with the config or setup. There was some issue with the database. I have updated as an answer. Thanks for your time and efforts.","body":"I was able to solve the issue. It was nothing to do with the config or setup. There was some issue with the database. I have updated as an answer. Thanks for your time and efforts."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681806164,"creation_date":1681806164,"answer_id":76042351,"question_id":76034654,"body_markdown":"I have tested similar configuration with H2 file database. Apparently there is no guarantee that the id will be generated without gaps. The only guarantee is that they will be unique.\r\n\r\nIn my case after the first run of the application with an empty database the ids started with 1 and were incremented by 1. But after restart (without dropping the tables) the id continued with 33, 34 etc.","title":"Spring Data JPA / Hibernate generating single id for all the entities persisted within single transaction","body":"<p>I have tested similar configuration with H2 file database. Apparently there is no guarantee that the id will be generated without gaps. The only guarantee is that they will be unique.</p>\n<p>In my case after the first run of the application with an empty database the ids started with 1 and were incremented by 1. But after restart (without dropping the tables) the id continued with 33, 34 etc.</p>\n"}],"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682840842,"creation_date":1681730767,"question_id":76034654,"body_markdown":"I have a legacy application which I am trying to migrate to newer Apache Camel Spring Boot application where I am using Spring Data JPA and Hibernate as an ORM framework. ```Sybase``` is the DB used by application.\r\n\r\nI have many JPA entities available where ids are annotated with:\r\n```\r\n@Id\r\n@Column(name = &quot;entity_pk&quot;)\r\n@GeneratedValue(strategy = GenerationType.IDENTITY)\r\nprivate Long entity_pk;\r\n```\r\nI have a single method where I am trying to create multiple entities and then persisting all the entities one by one into the DB using ```JpaRepository save()``` method. All this is happening within a single transaction\r\n\r\nMy issue here is, **hibernate is generating only one unique id** and using it while persisting all the entities.\r\n\r\nWhat I am looking for is a way to tell hibernate to **check the latest value in the primary key i.e. ```entity_key``` column of each table** and then generate the next value. Sort of **auto incremented** value for each row. Columns are created as ```IDENTITY``` column in the database.\r\n\r\nI do not want to use any custom id generator for this. Is there any way to achieve this just by using annotations and/or configurations?\r\n\r\n**EDIT 1:** &lt;br/&gt;\r\nJust wanted to give background on existing legacy application. This application uses ```Hibernate 3.x``` and uses ```&lt;generator class=&quot;native&quot;&gt;``` which apparently works as expected. I confirmed that from existing DB values.\r\n\r\nI am using Hibernate 5.x along with Spring boot 2.x and Spring 5.x.\r\n\r\nI have tried using ```GenerationType.AUTO``` along with ```hibernate.id.new_generator_mappings=false``` just to make sure the ```LegacyFallbackInterpreter``` kicks in as per the instructions given here: &lt;br/&gt;\r\nhttps://stackoverflow.com/questions/1212535/the-equivalent-of-generator-class-native-generator-using-mysql-and-hiberna\r\n&lt;br/&gt;&lt;br/&gt;\r\nBut nothing works.\r\n\r\n**Edit 2:**&lt;br/&gt;\r\nAdding some sample code. It is not the exact code but similar to what I am trying to achieve in my application.&lt;br/&gt;\r\n**Entity classes:**\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@ToString\r\n@Entity\r\n@Table(name = &quot;block&quot;)\r\npublic class Block {\r\n\r\n    @Id\r\n    @Column(name = &quot;block_pk&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long blockPk;\r\n\r\n    @Version\r\n    @Column(name = &quot;version&quot;)\r\n    private int version;\r\n\r\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @OrderBy(&quot;allocationPk&quot;)\r\n    @Fetch(FetchMode.SELECT)\r\n    @ToString.Exclude\r\n    private Set&lt;Allocation&gt; allocations;\r\n\r\n    @Column(name = &quot;quantity&quot;)\r\n    private BigDecimal quantity;\r\n\r\n    public void addAllocation(Allocation allocation) {\r\n        if (allocations == null) {\r\n            allocations = new HashSet&lt;&gt;();\r\n        }\r\n\r\n        allocations.add(allocation);\r\n    }\r\n}\r\n```\r\n```\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@ToString\r\n@Entity\r\n@Table(name = &quot;allocation&quot;)\r\npublic class Allocation {\r\n\r\n    @Id\r\n    @Column(name = &quot;allocation_pk&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long allocationPk;\r\n\r\n    @Version\r\n    @Column(name = &quot;version&quot;)\r\n    private int version;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;block_pk&quot;, nullable = false)\r\n    @Fetch(FetchMode.SELECT)\r\n    @ToString.Exclude\r\n    private Block block;\r\n\r\n    @Column(name = &quot;quantity&quot;)\r\n    private BigDecimal quantity;\r\n}\r\n```\r\n```\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@ToString\r\n@Entity\r\n@Table(name = &quot;booking&quot;)\r\npublic class Booking {\r\n    @Id\r\n    @Column(name = &quot;booking_pk&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long bookingPk;\r\n\r\n    @Version\r\n    @Column(name = &quot;version&quot;)\r\n    private int version;\r\n\r\n    @Column(name = &quot;block_Id&quot;)\r\n    private Long blockId;\r\n}\r\n```\r\n&lt;br/&gt;&lt;br/&gt;\r\n**Repositories:**\r\n```\r\n@Repository\r\npublic interface BlockRepository extends JpaRepository&lt;Block, Long&gt; {\r\n}\r\n\r\n@Repository\r\npublic interface AllocationRepository extends JpaRepository&lt;Allocation, Long&gt; {\r\n}\r\n\r\n@Repository\r\npublic interface BookingRepository extends JpaRepository&lt;Booking, Long&gt; {\r\n}\r\n\r\n@Component\r\npublic class DbStore {\r\n    @Autowired\r\n    private BlockRepository blockRepository;\r\n    @Autowired\r\n    private AllocationRepository allocationRepository;\r\n    @Autowired\r\n    private BookingRepository bookingRepository;\r\n\r\n    public Block save(Block block) {\r\n        return blockRepository.save(block);\r\n    }\r\n\r\n    public Allocation save(Allocation allocation) {\r\n        return allocationRepository.save(allocation);\r\n    }\r\n\r\n    public Booking save(Booking booking) {\r\n        return bookingRepository.save(booking);\r\n    }\r\n}\r\n```\r\n&lt;br/&gt;&lt;br/&gt;\r\n**Service Class:**\r\n\r\n```\r\n@Service\r\npublic class AllocationHandler {\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(AllocationHandler.class);\r\n    @Autowired\r\n    private DbStore dbStore;\r\n\r\n    public List&lt;Allocation&gt; handleRequest(String input) {\r\n        Block block = new Block();\r\n        block.setQuantity(new BigDecimal(1000000));\r\n\r\n        // Persist Block\r\n        LOGGER.info(&quot;Persist block in DB&quot;);\r\n        block = dbStore.save(block);\r\n        LOGGER.info(&quot;Persisted Block in DB with Id [{}]&quot;, block.getBlockPk());\r\n\r\n        Allocation allocation = new Allocation();\r\n        allocation.setQuantity(new BigDecimal(500000));\r\n\r\n        block.addAllocation(allocation);\r\n        allocation.setBlock(block);\r\n\r\n        LOGGER.info(&quot;Persist allocation in DB&quot;);\r\n        allocation = dbStore.save(allocation);\r\n        LOGGER.info(&quot;Persisted allocation in DB with Id [{}]&quot;, allocation.getAllocationPk());\r\n\r\n        LOGGER.info(&quot;Update Block&quot;);\r\n        block = dbStore.save(block);\r\n\r\n        Booking booking = new Booking();\r\n        booking.setBlockId(block.getBlockPk());\r\n\r\n        LOGGER.info(&quot;Persist booking in DB&quot;);\r\n        booking = dbStore.save(booking);\r\n        LOGGER.info(&quot;Persisted Booking in DB with Id [{}]&quot;, booking.getBookingPk());\r\n\r\n        return Arrays.asList(allocation);\r\n    }\r\n}\r\n```\r\n&lt;br/&gt;&lt;br/&gt;\r\n**Driver Class:**\r\n```\r\n@Component\r\npublic class Transformer {\r\n    @Autowired\r\n    private AllocationHandler allocationHandler;\r\n\r\n    public void transform(String input) {\r\n        allocationHandler.handleRequest(input);\r\n    }\r\n}\r\n```\r\n&lt;br/&gt;&lt;br/&gt;\r\n**Main:**\r\n```\r\n@SpringBootApplication\r\n@EnableJpaRepositories(basePackages = &quot;com.example.demo.repository&quot;)\r\npublic class DemoApplication implements ApplicationRunner {\r\n\t@Autowired\r\n\tprivate Transformer transformer;\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run(ApplicationArguments args) throws Exception {\r\n\t\ttransformer.transform(&quot;Test&quot;);\r\n\t}\r\n}\r\n\r\n```\r\n\r\n&lt;br/&gt;&lt;br/&gt;\r\nI have also added this code in Github:&lt;br/&gt; https://github.com/viveksinghr89/spring-data-jpa-poc\r\n&lt;br/&gt;&lt;br/&gt;\r\nI am unable to replicate it completely but yes partially it is working like the actual project wherein ```Block``` and ```Allocation``` are using the same id instead of using different ids as per the latest value in their identity column.\r\n&lt;br/&gt;&lt;br/&gt;\r\n**Logs:**\r\n```\r\n2023-04-17T23:41:05.674+05:30  INFO 21052 --- [           main] com.example.demo.DemoApplication         : Started DemoApplication in 6.195 seconds (process running for 6.718)\r\n2023-04-17T23:41:05.678+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persist block in DB\r\n2023-04-17T23:41:05.755+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persisted Block in DB with Id [97]\r\n2023-04-17T23:41:05.755+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persist allocation in DB\r\n2023-04-17T23:41:05.761+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persisted allocation in DB with Id [97]\r\n2023-04-17T23:41:05.761+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Update Block\r\n2023-04-17T23:41:05.823+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persist booking in DB\r\n2023-04-17T23:41:05.825+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persisted Booking in DB with Id [65]\r\n```\r\n&lt;br/&gt;&lt;br/&gt;\r\n**H2 DB Screenshot:**\r\n[![enter image description here][1]][1]\r\n\r\n&lt;br/&gt;&lt;br/&gt;\r\n**Please let me know if you are able to figure something out. Would be really helpful. Thank you.**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i14sz.png","title":"Spring Data JPA / Hibernate generating single id for all the entities persisted within single transaction","body":"<p>I have a legacy application which I am trying to migrate to newer Apache Camel Spring Boot application where I am using Spring Data JPA and Hibernate as an ORM framework. <code>Sybase</code> is the DB used by application.</p>\n<p>I have many JPA entities available where ids are annotated with:</p>\n<pre><code>@Id\n@Column(name = &quot;entity_pk&quot;)\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long entity_pk;\n</code></pre>\n<p>I have a single method where I am trying to create multiple entities and then persisting all the entities one by one into the DB using <code>JpaRepository save()</code> method. All this is happening within a single transaction</p>\n<p>My issue here is, <strong>hibernate is generating only one unique id</strong> and using it while persisting all the entities.</p>\n<p>What I am looking for is a way to tell hibernate to <strong>check the latest value in the primary key i.e. <code>entity_key</code> column of each table</strong> and then generate the next value. Sort of <strong>auto incremented</strong> value for each row. Columns are created as <code>IDENTITY</code> column in the database.</p>\n<p>I do not want to use any custom id generator for this. Is there any way to achieve this just by using annotations and/or configurations?</p>\n<p><strong>EDIT 1:</strong> <br/>\nJust wanted to give background on existing legacy application. This application uses <code>Hibernate 3.x</code> and uses <code>&lt;generator class=&quot;native&quot;&gt;</code> which apparently works as expected. I confirmed that from existing DB values.</p>\n<p>I am using Hibernate 5.x along with Spring boot 2.x and Spring 5.x.</p>\n<p>I have tried using <code>GenerationType.AUTO</code> along with <code>hibernate.id.new_generator_mappings=false</code> just to make sure the <code>LegacyFallbackInterpreter</code> kicks in as per the instructions given here: <br/>\n<a href=\"https://stackoverflow.com/questions/1212535/the-equivalent-of-generator-class-native-generator-using-mysql-and-hiberna\">The equivalent of &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt; using MySQL and Hibernate3 annotations</a>\n<br/><br/>\nBut nothing works.</p>\n<p><strong>Edit 2:</strong><br/>\nAdding some sample code. It is not the exact code but similar to what I am trying to achieve in my application.<br/>\n<strong>Entity classes:</strong></p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\n@Entity\n@Table(name = &quot;block&quot;)\npublic class Block {\n\n    @Id\n    @Column(name = &quot;block_pk&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long blockPk;\n\n    @Version\n    @Column(name = &quot;version&quot;)\n    private int version;\n\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    @OrderBy(&quot;allocationPk&quot;)\n    @Fetch(FetchMode.SELECT)\n    @ToString.Exclude\n    private Set&lt;Allocation&gt; allocations;\n\n    @Column(name = &quot;quantity&quot;)\n    private BigDecimal quantity;\n\n    public void addAllocation(Allocation allocation) {\n        if (allocations == null) {\n            allocations = new HashSet&lt;&gt;();\n        }\n\n        allocations.add(allocation);\n    }\n}\n</code></pre>\n<pre><code>\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\n@Entity\n@Table(name = &quot;allocation&quot;)\npublic class Allocation {\n\n    @Id\n    @Column(name = &quot;allocation_pk&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long allocationPk;\n\n    @Version\n    @Column(name = &quot;version&quot;)\n    private int version;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;block_pk&quot;, nullable = false)\n    @Fetch(FetchMode.SELECT)\n    @ToString.Exclude\n    private Block block;\n\n    @Column(name = &quot;quantity&quot;)\n    private BigDecimal quantity;\n}\n</code></pre>\n<pre><code>\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\n@Entity\n@Table(name = &quot;booking&quot;)\npublic class Booking {\n    @Id\n    @Column(name = &quot;booking_pk&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long bookingPk;\n\n    @Version\n    @Column(name = &quot;version&quot;)\n    private int version;\n\n    @Column(name = &quot;block_Id&quot;)\n    private Long blockId;\n}\n</code></pre>\n<p><br/><br/>\n<strong>Repositories:</strong></p>\n<pre><code>@Repository\npublic interface BlockRepository extends JpaRepository&lt;Block, Long&gt; {\n}\n\n@Repository\npublic interface AllocationRepository extends JpaRepository&lt;Allocation, Long&gt; {\n}\n\n@Repository\npublic interface BookingRepository extends JpaRepository&lt;Booking, Long&gt; {\n}\n\n@Component\npublic class DbStore {\n    @Autowired\n    private BlockRepository blockRepository;\n    @Autowired\n    private AllocationRepository allocationRepository;\n    @Autowired\n    private BookingRepository bookingRepository;\n\n    public Block save(Block block) {\n        return blockRepository.save(block);\n    }\n\n    public Allocation save(Allocation allocation) {\n        return allocationRepository.save(allocation);\n    }\n\n    public Booking save(Booking booking) {\n        return bookingRepository.save(booking);\n    }\n}\n</code></pre>\n<p><br/><br/>\n<strong>Service Class:</strong></p>\n<pre><code>@Service\npublic class AllocationHandler {\n    private static final Logger LOGGER = LoggerFactory.getLogger(AllocationHandler.class);\n    @Autowired\n    private DbStore dbStore;\n\n    public List&lt;Allocation&gt; handleRequest(String input) {\n        Block block = new Block();\n        block.setQuantity(new BigDecimal(1000000));\n\n        // Persist Block\n        LOGGER.info(&quot;Persist block in DB&quot;);\n        block = dbStore.save(block);\n        LOGGER.info(&quot;Persisted Block in DB with Id [{}]&quot;, block.getBlockPk());\n\n        Allocation allocation = new Allocation();\n        allocation.setQuantity(new BigDecimal(500000));\n\n        block.addAllocation(allocation);\n        allocation.setBlock(block);\n\n        LOGGER.info(&quot;Persist allocation in DB&quot;);\n        allocation = dbStore.save(allocation);\n        LOGGER.info(&quot;Persisted allocation in DB with Id [{}]&quot;, allocation.getAllocationPk());\n\n        LOGGER.info(&quot;Update Block&quot;);\n        block = dbStore.save(block);\n\n        Booking booking = new Booking();\n        booking.setBlockId(block.getBlockPk());\n\n        LOGGER.info(&quot;Persist booking in DB&quot;);\n        booking = dbStore.save(booking);\n        LOGGER.info(&quot;Persisted Booking in DB with Id [{}]&quot;, booking.getBookingPk());\n\n        return Arrays.asList(allocation);\n    }\n}\n</code></pre>\n<p><br/><br/>\n<strong>Driver Class:</strong></p>\n<pre><code>@Component\npublic class Transformer {\n    @Autowired\n    private AllocationHandler allocationHandler;\n\n    public void transform(String input) {\n        allocationHandler.handleRequest(input);\n    }\n}\n</code></pre>\n<p><br/><br/>\n<strong>Main:</strong></p>\n<pre><code>@SpringBootApplication\n@EnableJpaRepositories(basePackages = &quot;com.example.demo.repository&quot;)\npublic class DemoApplication implements ApplicationRunner {\n    @Autowired\n    private Transformer transformer;\n\n    public static void main(String[] args) throws InterruptedException {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n        transformer.transform(&quot;Test&quot;);\n    }\n}\n\n</code></pre>\n<p><br/><br/>\nI have also added this code in Github:<br/> <a href=\"https://github.com/viveksinghr89/spring-data-jpa-poc\" rel=\"nofollow noreferrer\">https://github.com/viveksinghr89/spring-data-jpa-poc</a>\n<br/><br/>\nI am unable to replicate it completely but yes partially it is working like the actual project wherein <code>Block</code> and <code>Allocation</code> are using the same id instead of using different ids as per the latest value in their identity column.\n<br/><br/>\n<strong>Logs:</strong></p>\n<pre><code>2023-04-17T23:41:05.674+05:30  INFO 21052 --- [           main] com.example.demo.DemoApplication         : Started DemoApplication in 6.195 seconds (process running for 6.718)\n2023-04-17T23:41:05.678+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persist block in DB\n2023-04-17T23:41:05.755+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persisted Block in DB with Id [97]\n2023-04-17T23:41:05.755+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persist allocation in DB\n2023-04-17T23:41:05.761+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persisted allocation in DB with Id [97]\n2023-04-17T23:41:05.761+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Update Block\n2023-04-17T23:41:05.823+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persist booking in DB\n2023-04-17T23:41:05.825+05:30  INFO 21052 --- [           main] com.example.demo.AllocationHandler       : Persisted Booking in DB with Id [65]\n</code></pre>\n<p><br/><br/>\n<strong>H2 DB Screenshot:</strong>\n<a href=\"https://i.stack.imgur.com/i14sz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i14sz.png\" alt=\"enter image description here\" /></a></p>\n<p><br/><br/>\n<strong>Please let me know if you are able to figure something out. Would be really helpful. Thank you.</strong></p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","sybase"],"answers":[{"tags":[],"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682840689,"creation_date":1682840689,"answer_id":76140094,"question_id":76057063,"body_markdown":"So finally I was able to solve this issue.\r\n\r\nIssue was with **couple of fields** that I was trying to persist. One of the **BigDecimal** fields had the precision issue and other was a **timestamp** field where format was not as per the column&#39;s expectation.\r\n\r\n**Logs were enabled in TRACE mode for spring as well as hibernate, which were very misleading.**\r\n\r\nIn case of a successful as well as unsuccessful inserts, it was generating the similar kind of statements. Logs portrayed as if there was no issue with the data it is trying to insert and something wrong with Id column auto generation logic. \r\n\r\nBut finally, I constructed the insert query in an attempt to manually run the query against DB which obviously failed and helped me go in the right direction.","title":"Spring Boot + Spring Data JPA + Sybase: No keys were automatically generated Sybase IDENTITY column","body":"<p>So finally I was able to solve this issue.</p>\n<p>Issue was with <strong>couple of fields</strong> that I was trying to persist. One of the <strong>BigDecimal</strong> fields had the precision issue and other was a <strong>timestamp</strong> field where format was not as per the column's expectation.</p>\n<p><strong>Logs were enabled in TRACE mode for spring as well as hibernate, which were very misleading.</strong></p>\n<p>In case of a successful as well as unsuccessful inserts, it was generating the similar kind of statements. Logs portrayed as if there was no issue with the data it is trying to insert and something wrong with Id column auto generation logic.</p>\n<p>But finally, I constructed the insert query in an attempt to manually run the query against DB which obviously failed and helped me go in the right direction.</p>\n"}],"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76140094,"answer_count":1,"score":1,"last_activity_date":1682840689,"creation_date":1681923377,"question_id":76057063,"body_markdown":"I am migrating one legacy application to a newer Apache Camel Spring Boot application where I am using Spring Data JPA to interact with Sybase database.\r\n\r\nLegacy application uses older technologies versions like ```Spring 3.x, Hibernate 3.x, jconn3``` etc.\r\n\r\nAll the Tables in the Sybase DB have primary key defined as ```IDENTITY``` column.\r\n\r\nLegacy application uses following to define identity columns and relation between ```Block``` and ```Allocation``` entity (```many-to-one bidirectional```):\r\n\r\n**Block.hbm.xml**\r\n```\r\n&lt;id name=&quot;blockPk&quot; type=&quot;java.lang.Long&quot;&gt;\r\n    &lt;column name=&quot;block_pk&quot;/&gt;\r\n    &lt;generator class=&quot;native&quot;/&gt;\r\n&lt;/id&gt;\r\n\r\n&lt;set name=&quot;allocations&quot; inverse=&quot;true&quot; cascade=&quot;all,delete-orphan&quot; table=&quot;allocations&quot; order-by=&quot;allocation_pk asc&quot; fetch=&quot;select&quot;&gt;\r\n    &lt;key&gt;\r\n       &lt;column name=&quot;block_pk&quot; not-null=&quot;true&quot;/&gt;\r\n    &lt;/key&gt;\r\n&lt;one-to-many class=&quot;Allocation&quot;/&gt;\r\n&lt;/set&gt;\r\n```\r\n**Allocation.hbm.xml**\r\n```\r\n&lt;id name=&quot;allocationPk&quot; type=&quot;java.lang.Long&quot;&gt;\r\n    &lt;column name=&quot;allocation_pk&quot;/&gt;\r\n    &lt;generator class=&quot;native&quot;/&gt;\r\n&lt;/id&gt;\r\n\r\n&lt;many-to-one name=&quot;block&quot; class=&quot;Block&quot; type=&quot;select&quot;&gt;\r\n    &lt;column name=&quot;block_pk&quot; not-null=&quot;true&quot;/&gt;\r\n&lt;/many-to-one&gt;\r\n```\r\n\r\nIn new application I am doing something like this:\r\n\r\n**Block.java**\r\n```\r\n    @Id\r\n    @Column(name = &quot;block_pk&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long blockPk;\r\n\r\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @OrderBy(&quot;allocationPk&quot;)\r\n    @Fetch(FetchMode.SELECT)\r\n    @ToString.Exclude\r\n    private Set&lt;Allocation&gt; allocations;\r\n```\r\n**Allocation.java**\r\n```\r\n    @Id\r\n    @Column(name = &quot;allocation_pk&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long allocationPk;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;block_pk&quot;, nullable = false)\r\n    @Fetch(FetchMode.SELECT)\r\n    @ToString.Exclude\r\n    private Block block;\r\n```\r\n**Repositories**\r\n```\r\n@Repository\r\npublic interface BlockRepository extends JpaRepository&lt;Block, Long&gt; {\r\n}\r\n\r\n@Repository\r\npublic interface AllocationRepository extends JpaRepository&lt;Allocation, Long&gt; {\r\n}\r\n```\r\n**DbStore.java**\r\n```\r\n@Component\r\npublic class DbStore {\r\n    @Autowired\r\n    private BlockRepository blockRepository;\r\n    @Autowired\r\n    private AllocationRepository allocationRepository;\r\n\r\n    public Block save(Block block) {\r\n        return blockRepository.save(block);\r\n    }\r\n\r\n    public Allocation save(Allocation allocation) {\r\n        return allocationRepository.save(allocation);\r\n    }\r\n}\r\n```\r\n**AllocationHandler.java**\r\n```\r\n    public List&lt;Allocation&gt; handleRequest(String input) {\r\n        Block block = new Block();\r\n        block.setQuantity(new BigDecimal(1000000));\r\n\r\n        // Persist Block\r\n        LOGGER.info(&quot;Persist block in DB&quot;);\r\n        block = dbStore.save(block);\r\n        LOGGER.info(&quot;Persisted Block in DB with Id [{}]&quot;, block.getBlockPk());\r\n\r\n        Allocation allocation = new Allocation();\r\n        allocation.setQuantity(new BigDecimal(500000));\r\n\r\n        block.addAllocation(allocation);\r\n        allocation.setBlock(block);\r\n\r\n        LOGGER.info(&quot;Persist allocation in DB&quot;);\r\n        allocation = dbStore.save(allocation);\r\n        LOGGER.info(&quot;Persisted allocation in DB with Id [{}]&quot;, allocation.getAllocationPk());\r\n\r\n        LOGGER.info(&quot;Update Block&quot;);\r\n        block = dbStore.save(block);\r\n\r\n        return Arrays.asList(allocation);\r\n    }\r\n```\r\n\r\nThere are two issues I am facing in the new application:\r\n1. When I try to persist ```Block``` and then ```Allocation``` as shown in ```AllocationHandler``` class, ```Block``` gets persisted with a ```unique auto-generated id``` which is fine. But the same id is being used to persist ```Allocation``` as well instead of having a different auto-generated id based on the latest value in identity columns. I am sure there is no issue with Sybase DB and my version of SybDriver i.e. jconnect-7.0.GA because it already works as per the expectation in legacy application which uses lower version of this driver.\r\n2. When I removed the dependency of ```Block``` from ```Allocation``` and tried to persist only the ```Allocation```, I got following exception: &quot;**Generated keys are not available because either the Statement.NO_GENERATED_KEYS was used or no keys were automatically generated Sybase.**&quot;. I am not sure why it worked for ```Block``` in step 1 but not working for ```Allocation```.\r\n\r\nCould someone please check and help here?","title":"Spring Boot + Spring Data JPA + Sybase: No keys were automatically generated Sybase IDENTITY column","body":"<p>I am migrating one legacy application to a newer Apache Camel Spring Boot application where I am using Spring Data JPA to interact with Sybase database.</p>\n<p>Legacy application uses older technologies versions like <code>Spring 3.x, Hibernate 3.x, jconn3</code> etc.</p>\n<p>All the Tables in the Sybase DB have primary key defined as <code>IDENTITY</code> column.</p>\n<p>Legacy application uses following to define identity columns and relation between <code>Block</code> and <code>Allocation</code> entity (<code>many-to-one bidirectional</code>):</p>\n<p><strong>Block.hbm.xml</strong></p>\n<pre><code>&lt;id name=&quot;blockPk&quot; type=&quot;java.lang.Long&quot;&gt;\n    &lt;column name=&quot;block_pk&quot;/&gt;\n    &lt;generator class=&quot;native&quot;/&gt;\n&lt;/id&gt;\n\n&lt;set name=&quot;allocations&quot; inverse=&quot;true&quot; cascade=&quot;all,delete-orphan&quot; table=&quot;allocations&quot; order-by=&quot;allocation_pk asc&quot; fetch=&quot;select&quot;&gt;\n    &lt;key&gt;\n       &lt;column name=&quot;block_pk&quot; not-null=&quot;true&quot;/&gt;\n    &lt;/key&gt;\n&lt;one-to-many class=&quot;Allocation&quot;/&gt;\n&lt;/set&gt;\n</code></pre>\n<p><strong>Allocation.hbm.xml</strong></p>\n<pre><code>&lt;id name=&quot;allocationPk&quot; type=&quot;java.lang.Long&quot;&gt;\n    &lt;column name=&quot;allocation_pk&quot;/&gt;\n    &lt;generator class=&quot;native&quot;/&gt;\n&lt;/id&gt;\n\n&lt;many-to-one name=&quot;block&quot; class=&quot;Block&quot; type=&quot;select&quot;&gt;\n    &lt;column name=&quot;block_pk&quot; not-null=&quot;true&quot;/&gt;\n&lt;/many-to-one&gt;\n</code></pre>\n<p>In new application I am doing something like this:</p>\n<p><strong>Block.java</strong></p>\n<pre><code>    @Id\n    @Column(name = &quot;block_pk&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long blockPk;\n\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    @OrderBy(&quot;allocationPk&quot;)\n    @Fetch(FetchMode.SELECT)\n    @ToString.Exclude\n    private Set&lt;Allocation&gt; allocations;\n</code></pre>\n<p><strong>Allocation.java</strong></p>\n<pre><code>    @Id\n    @Column(name = &quot;allocation_pk&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long allocationPk;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;block_pk&quot;, nullable = false)\n    @Fetch(FetchMode.SELECT)\n    @ToString.Exclude\n    private Block block;\n</code></pre>\n<p><strong>Repositories</strong></p>\n<pre><code>@Repository\npublic interface BlockRepository extends JpaRepository&lt;Block, Long&gt; {\n}\n\n@Repository\npublic interface AllocationRepository extends JpaRepository&lt;Allocation, Long&gt; {\n}\n</code></pre>\n<p><strong>DbStore.java</strong></p>\n<pre><code>@Component\npublic class DbStore {\n    @Autowired\n    private BlockRepository blockRepository;\n    @Autowired\n    private AllocationRepository allocationRepository;\n\n    public Block save(Block block) {\n        return blockRepository.save(block);\n    }\n\n    public Allocation save(Allocation allocation) {\n        return allocationRepository.save(allocation);\n    }\n}\n</code></pre>\n<p><strong>AllocationHandler.java</strong></p>\n<pre><code>    public List&lt;Allocation&gt; handleRequest(String input) {\n        Block block = new Block();\n        block.setQuantity(new BigDecimal(1000000));\n\n        // Persist Block\n        LOGGER.info(&quot;Persist block in DB&quot;);\n        block = dbStore.save(block);\n        LOGGER.info(&quot;Persisted Block in DB with Id [{}]&quot;, block.getBlockPk());\n\n        Allocation allocation = new Allocation();\n        allocation.setQuantity(new BigDecimal(500000));\n\n        block.addAllocation(allocation);\n        allocation.setBlock(block);\n\n        LOGGER.info(&quot;Persist allocation in DB&quot;);\n        allocation = dbStore.save(allocation);\n        LOGGER.info(&quot;Persisted allocation in DB with Id [{}]&quot;, allocation.getAllocationPk());\n\n        LOGGER.info(&quot;Update Block&quot;);\n        block = dbStore.save(block);\n\n        return Arrays.asList(allocation);\n    }\n</code></pre>\n<p>There are two issues I am facing in the new application:</p>\n<ol>\n<li>When I try to persist <code>Block</code> and then <code>Allocation</code> as shown in <code>AllocationHandler</code> class, <code>Block</code> gets persisted with a <code>unique auto-generated id</code> which is fine. But the same id is being used to persist <code>Allocation</code> as well instead of having a different auto-generated id based on the latest value in identity columns. I am sure there is no issue with Sybase DB and my version of SybDriver i.e. jconnect-7.0.GA because it already works as per the expectation in legacy application which uses lower version of this driver.</li>\n<li>When I removed the dependency of <code>Block</code> from <code>Allocation</code> and tried to persist only the <code>Allocation</code>, I got following exception: &quot;<strong>Generated keys are not available because either the Statement.NO_GENERATED_KEYS was used or no keys were automatically generated Sybase.</strong>&quot;. I am not sure why it worked for <code>Block</code> in step 1 but not working for <code>Allocation</code>.</li>\n</ol>\n<p>Could someone please check and help here?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1682835767,"post_id":76139762,"comment_id":134275797,"body_markdown":"that is not a question for this site - it is more like asking for code ... as your previous couple or more questions. You will not learn much that way :-|","body":"that is not a question for this site - it is more like asking for code ... as your previous couple or more questions. You will not learn much that way :-|"},{"owner":{"account_id":28092974,"reputation":21,"user_id":21462180,"display_name":"Kto Tam"},"score":0,"creation_date":1682836673,"post_id":76139762,"comment_id":134275878,"body_markdown":"I&#39;m not asking all the tasks. I select some items from the task that I can&#39;t solve","body":"I&#39;m not asking all the tasks. I select some items from the task that I can&#39;t solve"},{"owner":{"account_id":28092974,"reputation":21,"user_id":21462180,"display_name":"Kto Tam"},"score":0,"creation_date":1683401980,"post_id":76139762,"comment_id":134362305,"body_markdown":"after explaining these examples, I solved a lot of examples. thank you all","body":"after explaining these examples, I solved a lot of examples. thank you all"}],"answers":[{"comments":[{"owner":{"account_id":28092974,"reputation":21,"user_id":21462180,"display_name":"Kto Tam"},"score":0,"creation_date":1682843011,"post_id":76140071,"comment_id":134276488,"body_markdown":"thanks. I search for the maximum through a cycle, you have a beautiful solution. I&#39;ll remember him. In YouTube, streams are in simple examples, it&#39;s difficult for me to understand how to combine all the methods of streaming. I have to solve such examples to combine different methods","body":"thanks. I search for the maximum through a cycle, you have a beautiful solution. I&#39;ll remember him. In YouTube, streams are in simple examples, it&#39;s difficult for me to understand how to combine all the methods of streaming. I have to solve such examples to combine different methods"}],"tags":[],"owner":{"account_id":28177020,"reputation":31,"user_id":21534654,"display_name":"Maleko"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682840401,"creation_date":1682840401,"answer_id":76140071,"question_id":76139762,"body_markdown":"`Collectors.toMap` needs a merge function, so just replace \r\n\r\n```java\r\nMap&lt;String, Double&gt; studendSumAverages = averages.entrySet().stream()\r\n        .collect(Collectors.toMap(Map.Entry::getKey,\r\n                entry -&gt; entry.getValue().values().stream().mapToDouble(Double::doubleValue).sum()));\r\n```\r\n\r\nBy \r\n\r\n```java\r\nMap&lt;String, Double&gt; studendSumAverages = averages.entrySet().stream()\r\n        .collect(Collectors.toMap(Map.Entry::getKey,\r\n                entry -&gt; entry.getValue().values().stream().mapToDouble(Double::doubleValue).sum(),\r\n                Double::sum));\r\n```\r\n\r\nThen, to find the smarted student, you can do that\r\n\r\n```java\r\nString smartestOne = Collections.max(studendSumAverages.entrySet(), Map.Entry.comparingByValue()).getKey();\r\n```\r\n","title":"find the sum in the stream","body":"<p><code>Collectors.toMap</code> needs a merge function, so just replace</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Double&gt; studendSumAverages = averages.entrySet().stream()\n        .collect(Collectors.toMap(Map.Entry::getKey,\n                entry -&gt; entry.getValue().values().stream().mapToDouble(Double::doubleValue).sum()));\n</code></pre>\n<p>By</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Double&gt; studendSumAverages = averages.entrySet().stream()\n        .collect(Collectors.toMap(Map.Entry::getKey,\n                entry -&gt; entry.getValue().values().stream().mapToDouble(Double::doubleValue).sum(),\n                Double::sum));\n</code></pre>\n<p>Then, to find the smarted student, you can do that</p>\n<pre class=\"lang-java prettyprint-override\"><code>String smartestOne = Collections.max(studendSumAverages.entrySet(), Map.Entry.comparingByValue()).getKey();\n</code></pre>\n"}],"owner":{"account_id":28092974,"reputation":21,"user_id":21462180,"display_name":"Kto Tam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1682868890,"answer_count":1,"score":-2,"last_activity_date":1682840401,"creation_date":1682834339,"question_id":76139762,"body_markdown":"I found the average value for each student&#39;s subject. I need to calculate the sum of all student averages. for example, for Anna Math(0.5)+History(2.0)+Physics(3.3)=5.8\r\nput in Map&lt;String,Double&gt; //name,sum\r\nI want to find the smartest student\r\n\r\n    class Student3_1 {\r\n    private String name;\r\n    private Map&lt;String, List&lt;Integer&gt;&gt; marks;\r\n\r\n    public Student3_1(String name, Map&lt;String, List&lt;Integer&gt;&gt; marks) {\r\n        this.name = name;\r\n        this.marks = marks;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public Map&lt;String, List&lt;Integer&gt;&gt; getMarks() {\r\n        return marks;\r\n    }\r\n\r\n    public static Function&lt;Map&lt;String, List&lt;Integer&gt;&gt;, Map&lt;String, Double&gt;&gt; averageBySubject = marks -&gt; \r\n        marks.entrySet().stream().collect(Collectors.toMap(\r\n        entry -&gt; entry.getKey(), \r\n        entry -&gt; entry.getValue().stream().mapToDouble(Integer::doubleValue).average().getAsDouble()));\r\n\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Map&lt;String, List&lt;Integer&gt;&gt; markAnn = new HashMap&lt;&gt;();\r\n        markAnn.put(&quot;Physics&quot;, List.of(0, 0, 1));\r\n        markAnn.put(&quot;Mathematics&quot;, List.of(0, 0, 0));\r\n        markAnn.put(&quot;History&quot;, List.of(3, 3, 0));\r\n\r\n        Map&lt;String, List&lt;Integer&gt;&gt; markKate = new HashMap&lt;&gt;();\r\n        markKate.put(&quot;Physics&quot;, List.of(1, 2, 0));\r\n        markKate.put(&quot;Mathematics&quot;, List.of(5, 0, 0));\r\n        markKate.put(&quot;History&quot;, List.of(0, 2, 5));\r\n\r\n        Map&lt;String, List&lt;Integer&gt;&gt; markBob = new HashMap&lt;&gt;();\r\n        markBob.put(&quot;Physics&quot;, List.of(3, 2, 3));\r\n        markBob.put(&quot;Mathematics&quot;, List.of(2, 2, 3));\r\n        markBob.put(&quot;History&quot;, List.of(4, 4, 3));\r\n\r\n\r\n        Student3_1[] students = {new Student3_1(&quot;Ann&quot;, markAnn),\r\n        new Student3_1(&quot;Kate&quot;, markKate),\r\n        new Student3_1(&quot;Bob&quot;, markBob)\r\n        };\r\n        Map&lt;String, Map&lt;String, Double&gt;&gt; averages = Arrays.stream(students)\r\n        .collect(Collectors.toMap(Student3_1::getName,\r\n        student -&gt; averageBySubject.apply(student.getMarks())));\r\n        out.println(averages);\r\n\r\n\r\n        Map&lt;String, Double&gt; studendSumAverages = averages.entrySet().stream()\r\n            .collect(Collectors.groupingBy(Map.Entry::getKey,\r\n                    averages.entrySet().stream()\r\n                            .map( x -&gt; x.getValue().values().stream().mapToDouble(Double::doubleValue).sum())));\r\n        out.println(studendSumAverages);\r\n    }  \r\n}\r\n\r\n  ","title":"find the sum in the stream","body":"<p>I found the average value for each student's subject. I need to calculate the sum of all student averages. for example, for Anna Math(0.5)+History(2.0)+Physics(3.3)=5.8\nput in Map&lt;String,Double&gt; //name,sum\nI want to find the smartest student</p>\n<pre><code>class Student3_1 {\nprivate String name;\nprivate Map&lt;String, List&lt;Integer&gt;&gt; marks;\n\npublic Student3_1(String name, Map&lt;String, List&lt;Integer&gt;&gt; marks) {\n    this.name = name;\n    this.marks = marks;\n}\n\npublic String getName() {\n    return name;\n}\n\npublic Map&lt;String, List&lt;Integer&gt;&gt; getMarks() {\n    return marks;\n}\n\npublic static Function&lt;Map&lt;String, List&lt;Integer&gt;&gt;, Map&lt;String, Double&gt;&gt; averageBySubject = marks -&gt; \n    marks.entrySet().stream().collect(Collectors.toMap(\n    entry -&gt; entry.getKey(), \n    entry -&gt; entry.getValue().stream().mapToDouble(Integer::doubleValue).average().getAsDouble()));\n\n\npublic static void main(String[] args) {\n\n    Map&lt;String, List&lt;Integer&gt;&gt; markAnn = new HashMap&lt;&gt;();\n    markAnn.put(&quot;Physics&quot;, List.of(0, 0, 1));\n    markAnn.put(&quot;Mathematics&quot;, List.of(0, 0, 0));\n    markAnn.put(&quot;History&quot;, List.of(3, 3, 0));\n\n    Map&lt;String, List&lt;Integer&gt;&gt; markKate = new HashMap&lt;&gt;();\n    markKate.put(&quot;Physics&quot;, List.of(1, 2, 0));\n    markKate.put(&quot;Mathematics&quot;, List.of(5, 0, 0));\n    markKate.put(&quot;History&quot;, List.of(0, 2, 5));\n\n    Map&lt;String, List&lt;Integer&gt;&gt; markBob = new HashMap&lt;&gt;();\n    markBob.put(&quot;Physics&quot;, List.of(3, 2, 3));\n    markBob.put(&quot;Mathematics&quot;, List.of(2, 2, 3));\n    markBob.put(&quot;History&quot;, List.of(4, 4, 3));\n\n\n    Student3_1[] students = {new Student3_1(&quot;Ann&quot;, markAnn),\n    new Student3_1(&quot;Kate&quot;, markKate),\n    new Student3_1(&quot;Bob&quot;, markBob)\n    };\n    Map&lt;String, Map&lt;String, Double&gt;&gt; averages = Arrays.stream(students)\n    .collect(Collectors.toMap(Student3_1::getName,\n    student -&gt; averageBySubject.apply(student.getMarks())));\n    out.println(averages);\n\n\n    Map&lt;String, Double&gt; studendSumAverages = averages.entrySet().stream()\n        .collect(Collectors.groupingBy(Map.Entry::getKey,\n                averages.entrySet().stream()\n                        .map( x -&gt; x.getValue().values().stream().mapToDouble(Double::doubleValue).sum())));\n    out.println(studendSumAverages);\n}  \n</code></pre>\n<p>}</p>\n"},{"tags":["java","android","webclient","htmlunit"],"comments":[{"owner":{"account_id":125531,"reputation":2166,"user_id":321366,"accept_rate":100,"display_name":"Jasper"},"score":0,"creation_date":1314866060,"post_id":7266160,"comment_id":8747622,"body_markdown":"Which version of HtmlUnit are you using?","body":"Which version of HtmlUnit are you using?"},{"owner":{"account_id":439651,"reputation":1467,"user_id":828727,"accept_rate":55,"display_name":"k9b"},"score":0,"creation_date":1314886113,"post_id":7266160,"comment_id":8753004,"body_markdown":"2.9, newest version, I also just discovered that a webrequest does work. while a webclient doesnt.... odd","body":"2.9, newest version, I also just discovered that a webrequest does work. while a webclient doesnt.... odd"}],"answers":[{"comments":[{"owner":{"account_id":439651,"reputation":1467,"user_id":828727,"accept_rate":55,"display_name":"k9b"},"score":0,"creation_date":1315005749,"post_id":7279827,"comment_id":8780791,"body_markdown":"Thanks very  much, only 1 more error left :) I edited the original question to reflect the next error","body":"Thanks very  much, only 1 more error left :) I edited the original question to reflect the next error"},{"owner":{"account_id":439651,"reputation":1467,"user_id":828727,"accept_rate":55,"display_name":"k9b"},"score":0,"creation_date":1315012550,"post_id":7279827,"comment_id":8781435,"body_markdown":"I added the htmlunit class into my project so I dont understand why I am getting the  java.lang.NoClassDefFoundError: com.gargoylesoftware.htmlunit.DefaultCssErrorHandle error","body":"I added the htmlunit class into my project so I dont understand why I am getting the  java.lang.NoClassDefFoundError: com.gargoylesoftware.htmlunit.DefaultCssErrorHandle error"},{"owner":{"account_id":125531,"reputation":2166,"user_id":321366,"accept_rate":100,"display_name":"Jasper"},"score":0,"creation_date":1315035176,"post_id":7279827,"comment_id":8783174,"body_markdown":"@user828727: You&#39;re missing the HtmlUnit JAR in your classpath, try adding it.","body":"@user828727: You&#39;re missing the HtmlUnit JAR in your classpath, try adding it."},{"owner":{"account_id":439651,"reputation":1467,"user_id":828727,"accept_rate":55,"display_name":"k9b"},"score":0,"creation_date":1315064766,"post_id":7279827,"comment_id":8786668,"body_markdown":"how? I have the htmlunit-2.9.jar in my classpath as well as the htmlunit-core. I go to project, right click and go to properties (this is eclipse). Then I go to add jars (since the jars are in my project folder) then I add them. Is this wrong?","body":"how? I have the htmlunit-2.9.jar in my classpath as well as the htmlunit-core. I go to project, right click and go to properties (this is eclipse). Then I go to add jars (since the jars are in my project folder) then I add them. Is this wrong?"},{"owner":{"account_id":125531,"reputation":2166,"user_id":321366,"accept_rate":100,"display_name":"Jasper"},"score":0,"creation_date":1315127843,"post_id":7279827,"comment_id":8793069,"body_markdown":"@user828727: Here&#39;s the list of [HtmlUnit dependencies](http://htmlunit.sourceforge.net/dependencies.html). And yes you seem to be adding them correctly to the classpath.","body":"@user828727: Here&#39;s the list of <a href=\"http://htmlunit.sourceforge.net/dependencies.html\" rel=\"nofollow noreferrer\">HtmlUnit dependencies</a>. And yes you seem to be adding them correctly to the classpath."},{"owner":{"account_id":439651,"reputation":1467,"user_id":828727,"accept_rate":55,"display_name":"k9b"},"score":0,"creation_date":1315176213,"post_id":7279827,"comment_id":8799628,"body_markdown":"I think it is working correct now, thanks so much. Unfortunately I think all the .jar classes I have added make the application too heavy. When I try to install it on my phone it wont even install it and it has troubles running on the emulator :(","body":"I think it is working correct now, thanks so much. Unfortunately I think all the .jar classes I have added make the application too heavy. When I try to install it on my phone it wont even install it and it has troubles running on the emulator :("},{"owner":{"account_id":439651,"reputation":1467,"user_id":828727,"accept_rate":55,"display_name":"k9b"},"score":0,"creation_date":1315193089,"post_id":7279827,"comment_id":8801384,"body_markdown":"is it possible that the application just has too many jars in its classpath to run?","body":"is it possible that the application just has too many jars in its classpath to run?"},{"owner":{"account_id":125531,"reputation":2166,"user_id":321366,"accept_rate":100,"display_name":"Jasper"},"score":0,"creation_date":1315204400,"post_id":7279827,"comment_id":8802672,"body_markdown":"@user828727: I&#39;m not sure, but why don&#39;t you create a new question?","body":"@user828727: I&#39;m not sure, but why don&#39;t you create a new question?"},{"owner":{"account_id":439651,"reputation":1467,"user_id":828727,"accept_rate":55,"display_name":"k9b"},"score":0,"creation_date":1315329902,"post_id":7279827,"comment_id":8829323,"body_markdown":"also do you have any ideas about this error?\n-it gives me it about 1000x times...\nDx warning: Ignoring InnerClasses attribute for an      \nanonymous inner class","body":"also do you have any ideas about this error? -it gives me it about 1000x times... Dx warning: Ignoring InnerClasses attribute for an       anonymous inner class"}],"tags":[],"owner":{"account_id":125531,"reputation":2166,"user_id":321366,"accept_rate":100,"display_name":"Jasper"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1314944122,"creation_date":1314944122,"answer_id":7279827,"question_id":7266160,"body_markdown":"Your stacktrace shows that an `ExceptionInInitializerError` is thrown and that it is caused by:\r\n\r\n    Caused by: java.lang.NoClassDefFoundError: org.apache.commons.lang.StringUtils\r\n\r\nPerhaps you&#39;re missing some JAR (commons-lang) in the classpath?","title":"HtmlUnit Android problem with WebClient","body":"<p>Your stacktrace shows that an <code>ExceptionInInitializerError</code> is thrown and that it is caused by:</p>\n\n<pre><code>Caused by: java.lang.NoClassDefFoundError: org.apache.commons.lang.StringUtils\n</code></pre>\n\n<p>Perhaps you're missing some JAR (commons-lang) in the classpath?</p>\n"},{"tags":[],"owner":{"account_id":1418337,"reputation":11,"user_id":1343487,"display_name":"Isaac"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1336957629,"creation_date":1336957629,"answer_id":10576494,"question_id":7266160,"body_markdown":"I have that similar problem. After some research, i found that this is due to namespace conflicts. You must recompile the sourcecode of htmlunit. I try to this now, but the htmlunit is so large and complex that i have not yet completed.","title":"HtmlUnit Android problem with WebClient","body":"<p>I have that similar problem. After some research, i found that this is due to namespace conflicts. You must recompile the sourcecode of htmlunit. I try to this now, but the htmlunit is so large and complex that i have not yet completed.</p>\n"},{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682840109,"creation_date":1682840109,"answer_id":76140044,"question_id":7266160,"body_markdown":"There is a special Android version of HtmlUnit (https://github.com/HtmlUnit/htmlunit-android) that should solve most of the issues related to not existing classes in the android jdk.\r\n\r\nThere is also a hint about the commons-lang problem on the page.\r\n\r\nUsing this also requires to update your sources to HtmlUnit 3 - see https://www.htmlunit.org/migration.html for some hints.","title":"HtmlUnit Android problem with WebClient","body":"<p>There is a special Android version of HtmlUnit (<a href=\"https://github.com/HtmlUnit/htmlunit-android\" rel=\"nofollow noreferrer\">https://github.com/HtmlUnit/htmlunit-android</a>) that should solve most of the issues related to not existing classes in the android jdk.</p>\n<p>There is also a hint about the commons-lang problem on the page.</p>\n<p>Using this also requires to update your sources to HtmlUnit 3 - see <a href=\"https://www.htmlunit.org/migration.html\" rel=\"nofollow noreferrer\">https://www.htmlunit.org/migration.html</a> for some hints.</p>\n"}],"owner":{"account_id":439651,"reputation":1467,"user_id":828727,"accept_rate":55,"display_name":"k9b"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2888,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":7279827,"answer_count":3,"score":3,"last_activity_date":1682840109,"creation_date":1314851688,"question_id":7266160,"body_markdown":"HtmlUnit is amazing, in Java at least I have had no problems with it. Unfortunately when switching the code over to the Android platform, it is giving me errors when I try to create a web-client. \r\n\r\n    import android.app.Activity;\r\n    import android.os.Bundle;\r\n\r\n    import com.gargoylesoftware.htmlunit.WebClient;\r\n\r\n    public class AndroidTestActivity extends Activity {\r\n    /** Called when the activity is first created. */\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.main);\r\n        final WebClient webClient = new WebClient();\r\n        }\r\n    }\r\n\r\n\r\nWarnings it gives me before the program starts on the AVD.\r\n\r\nThis is an example of the warning it gives me, this is the exact warning but it is repeated over and over about 100000x times:\r\n\r\n     [2011-08-31 21:25:24 - AndroidTest] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class (org.apache.commons.collections.BeanMap$1) that doesn&#39;t come with an associated EnclosingMethod attribute. This class was probably produced by a compiler that did not target the modern .class file format. The recommended solution is to recompile the class from source, using an up-to-date compiler and without specifying any &quot;-target&quot; type options. The consequence of ignoring this warning is that reflective operations on this class will incorrectly indicate that it is not an inner class.\r\n\r\n\r\n\r\n\r\nIs there any help you can give me?\r\n\r\nError in android debugger:\r\n\r\n    09-01 07:44:24.569: WARN/dalvikvm(877): threadid=1: thread exiting with uncaught exception (group=0x4001d800)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877): FATAL EXCEPTION: main\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877): java.lang.ExceptionInInitializerError\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.Test.AndroidTestActivity.onCreate(AndroidTestActivity.java:20)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.os.Handler.dispatchMessage(Handler.java:99)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.os.Looper.loop(Looper.java:123)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread.main(ActivityThread.java:4627)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at java.lang.reflect.Method.invokeNative(Native Method)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at java.lang.reflect.Method.invoke(Method.java:521)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at dalvik.system.NativeStart.main(Native Method)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877): Caused by: java.lang.NoClassDefFoundError: org.apache.commons.lang.StringUtils\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.gargoylesoftware.htmlunit.util.URLCreator$URLCreatorStandard.toUrlUnsafeClassic(URLCreator.java:66)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.gargoylesoftware.htmlunit.util.UrlUtils.toUrlUnsafe(UrlUtils.java:193)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.gargoylesoftware.htmlunit.util.UrlUtils.toUrlSafe(UrlUtils.java:171)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at       com.gargoylesoftware.htmlunit.WebClient.&lt;clinit&gt;(WebClient.java:162)\r\n    09-01 07:44:24.600: ERROR/AndroidRuntime(877):     ... 14 more\r\n\r\n\r\n\r\n**ERROR AFTER ADDING COMMONS-LANG AND REST OF LIBRARY\r\n\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396): FATAL EXCEPTION: main\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396): java.lang.NoClassDefFoundError: com.gargoylesoftware.htmlunit.DefaultCssErrorHandler\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.gargoylesoftware.htmlunit.WebClient.&lt;init&gt;(WebClient.java:157)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.gargoylesoftware.htmlunit.WebClient.&lt;init&gt;(WebClient.java:180)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.Test.AndroidTestActivity.onCreate(AndroidTestActivity.java:21)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.os.Handler.dispatchMessage(Handler.java:99)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.os.Looper.loop(Looper.java:123)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread.main(ActivityThread.java:4627)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at java.lang.reflect.Method.invokeNative(Native Method)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at java.lang.reflect.Method.invoke(Method.java:521)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)\r\n    09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at dalvik.system.NativeStart.main(Native Method)\r\n\r\n\r\n ","title":"HtmlUnit Android problem with WebClient","body":"<p>HtmlUnit is amazing, in Java at least I have had no problems with it. Unfortunately when switching the code over to the Android platform, it is giving me errors when I try to create a web-client. </p>\n\n<pre><code>import android.app.Activity;\nimport android.os.Bundle;\n\nimport com.gargoylesoftware.htmlunit.WebClient;\n\npublic class AndroidTestActivity extends Activity {\n/** Called when the activity is first created. */\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.main);\n    final WebClient webClient = new WebClient();\n    }\n}\n</code></pre>\n\n<p>Warnings it gives me before the program starts on the AVD.</p>\n\n<p>This is an example of the warning it gives me, this is the exact warning but it is repeated over and over about 100000x times:</p>\n\n<pre><code> [2011-08-31 21:25:24 - AndroidTest] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class (org.apache.commons.collections.BeanMap$1) that doesn't come with an associated EnclosingMethod attribute. This class was probably produced by a compiler that did not target the modern .class file format. The recommended solution is to recompile the class from source, using an up-to-date compiler and without specifying any \"-target\" type options. The consequence of ignoring this warning is that reflective operations on this class will incorrectly indicate that it is not an inner class.\n</code></pre>\n\n<p>Is there any help you can give me?</p>\n\n<p>Error in android debugger:</p>\n\n<pre><code>09-01 07:44:24.569: WARN/dalvikvm(877): threadid=1: thread exiting with uncaught exception (group=0x4001d800)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877): FATAL EXCEPTION: main\n09-01 07:44:24.600: ERROR/AndroidRuntime(877): java.lang.ExceptionInInitializerError\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.Test.AndroidTestActivity.onCreate(AndroidTestActivity.java:20)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.os.Handler.dispatchMessage(Handler.java:99)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.os.Looper.loop(Looper.java:123)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at android.app.ActivityThread.main(ActivityThread.java:4627)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at java.lang.reflect.Method.invokeNative(Native Method)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at java.lang.reflect.Method.invoke(Method.java:521)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at dalvik.system.NativeStart.main(Native Method)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877): Caused by: java.lang.NoClassDefFoundError: org.apache.commons.lang.StringUtils\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.gargoylesoftware.htmlunit.util.URLCreator$URLCreatorStandard.toUrlUnsafeClassic(URLCreator.java:66)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.gargoylesoftware.htmlunit.util.UrlUtils.toUrlUnsafe(UrlUtils.java:193)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at com.gargoylesoftware.htmlunit.util.UrlUtils.toUrlSafe(UrlUtils.java:171)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     at       com.gargoylesoftware.htmlunit.WebClient.&lt;clinit&gt;(WebClient.java:162)\n09-01 07:44:24.600: ERROR/AndroidRuntime(877):     ... 14 more\n</code></pre>\n\n<p>**ERROR AFTER ADDING COMMONS-LANG AND REST OF LIBRARY</p>\n\n<pre><code>09-02 16:16:34.440: ERROR/AndroidRuntime(396): FATAL EXCEPTION: main\n09-02 16:16:34.440: ERROR/AndroidRuntime(396): java.lang.NoClassDefFoundError: com.gargoylesoftware.htmlunit.DefaultCssErrorHandler\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.gargoylesoftware.htmlunit.WebClient.&lt;init&gt;(WebClient.java:157)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.gargoylesoftware.htmlunit.WebClient.&lt;init&gt;(WebClient.java:180)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.Test.AndroidTestActivity.onCreate(AndroidTestActivity.java:21)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.os.Handler.dispatchMessage(Handler.java:99)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.os.Looper.loop(Looper.java:123)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at android.app.ActivityThread.main(ActivityThread.java:4627)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at java.lang.reflect.Method.invokeNative(Native Method)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at java.lang.reflect.Method.invoke(Method.java:521)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)\n09-02 16:16:34.440: ERROR/AndroidRuntime(396):     at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":27784879,"reputation":389,"user_id":21212553,"display_name":"galalem"},"score":0,"creation_date":1682791117,"post_id":76137638,"comment_id":134272016,"body_markdown":"swap the order of the first and second condition. you should check if `if (seconds == 0 &amp;&amp; minsTotalTime == 0)` first","body":"swap the order of the first and second condition. you should check if <code>if (seconds == 0 &amp;&amp; minsTotalTime == 0)</code> first"},{"owner":{"account_id":27784879,"reputation":389,"user_id":21212553,"display_name":"galalem"},"score":0,"creation_date":1682791252,"post_id":76137638,"comment_id":134272030,"body_markdown":"BTW, why not use `CountDownTimer` instead ? [See this question](https://stackoverflow.com/questions/10032003/how-to-make-a-countdown-timer-in-android)","body":"BTW, why not use <code>CountDownTimer</code> instead ? <a href=\"https://stackoverflow.com/questions/10032003/how-to-make-a-countdown-timer-in-android\">See this question</a>"}],"answers":[{"comments":[{"owner":{"account_id":28020964,"reputation":1207,"user_id":21401783,"display_name":"Dinux"},"score":0,"creation_date":1682839347,"post_id":76137705,"comment_id":134276132,"body_markdown":"@user16320675 I have edited my answer according to your suggestions","body":"@user16320675 I have edited my answer according to your suggestions"}],"tags":[],"owner":{"account_id":28020964,"reputation":1207,"user_id":21401783,"display_name":"Dinux"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682839318,"creation_date":1682791808,"answer_id":76137705,"question_id":76137638,"body_markdown":"Change your code to the following:\r\n```\r\nprivate void startTimer(TextView timerTextView) {\r\n        examTimer = new Timer();\r\n\r\n        examTimer.scheduleAtFixedRate(new TimerTask() {\r\n            @Override\r\n            public void run(){\r\n                if(seconds == 0){\r\n                    if (minsTotalTime == 0){\r\n                       examTimer.purge();\r\n                       examTimer.cancel();\r\n\r\n                        Toast.makeText(ExamActivity.this, &quot;Time ran out&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                        Intent intent = new Intent(ExamActivity.this, ExamResults.class);\r\n                        intent.putExtra(&quot;correct&quot;, getCorrectAnswers());\r\n                        intent.putExtra(&quot;incorrect&quot;, getIncorrectAnswers());\r\n                        startActivity(intent);\r\n\r\n                        finish();\r\n                    }\r\n\r\n                    else{\r\n                        minsTotalTime--;\r\n                        seconds = 59;\r\n                    }\r\n                }\r\n\r\n                else{\r\n                    seconds--;\r\n                }\r\n   }\r\n\r\n}\r\n```\r\nYou can also use a CountDownTimer for your purpose. Example code:\r\n```\r\nnew CountDownTimer(COUNT_DOWN_MILLISECONDS, 1000) {\r\n    public void onTick(long millisUntilFinished) {\r\n        //Code to be executed while the countdown is going on\r\n    }\r\n\r\n    public void onFinish() {\r\n        //Code to be executed when the countdown has hit zero.\r\n    }\r\n\r\n}.start();\r\n```\r\nYou have replace `COUNT_DOWN_MILLISECONDS` with the count down limit in milliseconds. For example, if you want to set a timer for 10 seconds then you can set `COUNT_DOWN_MILLISECONDS` to 10000 (10000ms = 10s).","title":"Timer goes into negative instead of redirecting to another activity","body":"<p>Change your code to the following:</p>\n<pre><code>private void startTimer(TextView timerTextView) {\n        examTimer = new Timer();\n\n        examTimer.scheduleAtFixedRate(new TimerTask() {\n            @Override\n            public void run(){\n                if(seconds == 0){\n                    if (minsTotalTime == 0){\n                       examTimer.purge();\n                       examTimer.cancel();\n\n                        Toast.makeText(ExamActivity.this, &quot;Time ran out&quot;, Toast.LENGTH_SHORT).show();\n\n                        Intent intent = new Intent(ExamActivity.this, ExamResults.class);\n                        intent.putExtra(&quot;correct&quot;, getCorrectAnswers());\n                        intent.putExtra(&quot;incorrect&quot;, getIncorrectAnswers());\n                        startActivity(intent);\n\n                        finish();\n                    }\n\n                    else{\n                        minsTotalTime--;\n                        seconds = 59;\n                    }\n                }\n\n                else{\n                    seconds--;\n                }\n   }\n\n}\n</code></pre>\n<p>You can also use a CountDownTimer for your purpose. Example code:</p>\n<pre><code>new CountDownTimer(COUNT_DOWN_MILLISECONDS, 1000) {\n    public void onTick(long millisUntilFinished) {\n        //Code to be executed while the countdown is going on\n    }\n\n    public void onFinish() {\n        //Code to be executed when the countdown has hit zero.\n    }\n\n}.start();\n</code></pre>\n<p>You have replace <code>COUNT_DOWN_MILLISECONDS</code> with the count down limit in milliseconds. For example, if you want to set a timer for 10 seconds then you can set <code>COUNT_DOWN_MILLISECONDS</code> to 10000 (10000ms = 10s).</p>\n"}],"owner":{"account_id":28457063,"reputation":11,"user_id":21774316,"display_name":"Kuraku"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682839318,"creation_date":1682790965,"question_id":76137638,"body_markdown":"\r\nI&#39;m making a feature that redirects the user to another activity once the timer reaches zero. I tried to swap the places of these if-else statements but the app keeps crashing. What could be the problem?\r\n\r\nThis is my countdown time block:\r\n\r\n```\r\nprivate void startTimer(TextView timerTextView) {\r\n        examTimer = new Timer();\r\n\r\n        examTimer.scheduleAtFixedRate(new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                if(seconds == 0){\r\n                    minsTotalTime--;\r\n                    seconds = 59;\r\n                }\r\n\r\n                else if (seconds == 0 &amp;&amp; minsTotalTime == 0){\r\n                    examTimer.purge();\r\n                    examTimer.cancel();\r\n\r\n                    Toast.makeText(ExamActivity.this, &quot;Time ran out&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                    Intent intent = new Intent(ExamActivity.this, ExamResults.class);\r\n                    intent.putExtra(&quot;correct&quot;, getCorrectAnswers());\r\n                    intent.putExtra(&quot;incorrect&quot;, getIncorrectAnswers());\r\n                    startActivity(intent);\r\n\r\n                    finish();\r\n                }\r\n\r\n                else {\r\n                    seconds--;\r\n                }\r\n}\r\n```","title":"Timer goes into negative instead of redirecting to another activity","body":"<p>I'm making a feature that redirects the user to another activity once the timer reaches zero. I tried to swap the places of these if-else statements but the app keeps crashing. What could be the problem?</p>\n<p>This is my countdown time block:</p>\n<pre><code>private void startTimer(TextView timerTextView) {\n        examTimer = new Timer();\n\n        examTimer.scheduleAtFixedRate(new TimerTask() {\n            @Override\n            public void run() {\n                if(seconds == 0){\n                    minsTotalTime--;\n                    seconds = 59;\n                }\n\n                else if (seconds == 0 &amp;&amp; minsTotalTime == 0){\n                    examTimer.purge();\n                    examTimer.cancel();\n\n                    Toast.makeText(ExamActivity.this, &quot;Time ran out&quot;, Toast.LENGTH_SHORT).show();\n\n                    Intent intent = new Intent(ExamActivity.this, ExamResults.class);\n                    intent.putExtra(&quot;correct&quot;, getCorrectAnswers());\n                    intent.putExtra(&quot;incorrect&quot;, getIncorrectAnswers());\n                    startActivity(intent);\n\n                    finish();\n                }\n\n                else {\n                    seconds--;\n                }\n}\n</code></pre>\n"},{"tags":["java","android","security","android-source"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1682839448,"post_id":76139938,"comment_id":134276138,"body_markdown":"Just making sure you are aware of: https://source.android.com/docs/security/features/apksigning and [GET_SIGNATURES is deprecated](https://stackoverflow.com/q/52898066/295004)","body":"Just making sure you are aware of: <a href=\"https://source.android.com/docs/security/features/apksigning\" rel=\"nofollow noreferrer\">source.android.com/docs/security/features/apksigning</a> and <a href=\"https://stackoverflow.com/q/52898066/295004\">GET_SIGNATURES is deprecated</a>"},{"owner":{"account_id":17316260,"reputation":21,"user_id":12542621,"display_name":"phish_and_chips"},"score":0,"creation_date":1682839995,"post_id":76139938,"comment_id":134276192,"body_markdown":"Yep, I looked at the Android documentation a lot to try and work out how multiple signatures could be returned but I didn&#39;t find anything that helped explicitly. It was very useful in understanding how signing works though which helped building up the proof of concept.\n\nI have also looked at that stackoverflow post and I have code very similar to it to print the signatures in my proof of concept app.","body":"Yep, I looked at the Android documentation a lot to try and work out how multiple signatures could be returned but I didn&#39;t find anything that helped explicitly. It was very useful in understanding how signing works though which helped building up the proof of concept.  I have also looked at that stackoverflow post and I have code very similar to it to print the signatures in my proof of concept app."}],"owner":{"account_id":17316260,"reputation":21,"user_id":12542621,"display_name":"phish_and_chips"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1682837922,"creation_date":1682837922,"question_id":76139938,"body_markdown":"I am researching Android security and have identified a current application that makes use of the deprecated `getPackageInfo(&lt;apk&gt;, GET_SIGNATURES)`. To fully understand how this application is using this deprecated function I wish to create a proof-of-concept APK that results in multiple signatures being returned. \r\n\r\nSo far I have created a basic APK in Android Studio, created a CA certificate and a leaf certificate signed by my CA certificate. I then package both these into a PKCS12 file and then convert that to a Java Keystore. I then use the tool apksigner to sign my APK with this Java Keystore and install the signed app. I then verify that both certs are associated with the installed apk by pulling it off the phone and using `keytool -printcert -jarfile poc.apk`. This shows both certificates (CA and leaf) listed.\r\n\r\nHowever, when running `getPackageInfo(&lt;apk&gt;, GET_SIGNATURES)` on my proof of concept APK only one result is returned? Why is this? What am I missing to get multiple signatures returned?\r\n\r\nI have looked at the Android documentation for when the deprecated `GET_SIGNATURES` is passed to `getPackageInfo` but it is not very clear what the expected result should be. I am basing my expectation that a signature for each cert in the chain is returned based on this presentation: https://www.blackhat.com/docs/us-14/materials/us-14-Forristal-Android-FakeID-Vulnerability-Walkthrough.pdf.\r\n\r\nThis stackoverflow post states that the user had app installed on his phone from Verizon that had multiple signatures: https://stackoverflow.com/questions/13618281/why-is-the-packageinfo-signatures-field-an-array-and-when-would-there-be-anythi. Likewise, the AOSP code has code to account for multiple signatures in multiple places.","title":"How to create an APK that returns multiple signatures from getPackageInfo(&lt;apk&gt;, GET_SIGNATURES)?","body":"<p>I am researching Android security and have identified a current application that makes use of the deprecated <code>getPackageInfo(&lt;apk&gt;, GET_SIGNATURES)</code>. To fully understand how this application is using this deprecated function I wish to create a proof-of-concept APK that results in multiple signatures being returned.</p>\n<p>So far I have created a basic APK in Android Studio, created a CA certificate and a leaf certificate signed by my CA certificate. I then package both these into a PKCS12 file and then convert that to a Java Keystore. I then use the tool apksigner to sign my APK with this Java Keystore and install the signed app. I then verify that both certs are associated with the installed apk by pulling it off the phone and using <code>keytool -printcert -jarfile poc.apk</code>. This shows both certificates (CA and leaf) listed.</p>\n<p>However, when running <code>getPackageInfo(&lt;apk&gt;, GET_SIGNATURES)</code> on my proof of concept APK only one result is returned? Why is this? What am I missing to get multiple signatures returned?</p>\n<p>I have looked at the Android documentation for when the deprecated <code>GET_SIGNATURES</code> is passed to <code>getPackageInfo</code> but it is not very clear what the expected result should be. I am basing my expectation that a signature for each cert in the chain is returned based on this presentation: <a href=\"https://www.blackhat.com/docs/us-14/materials/us-14-Forristal-Android-FakeID-Vulnerability-Walkthrough.pdf\" rel=\"nofollow noreferrer\">https://www.blackhat.com/docs/us-14/materials/us-14-Forristal-Android-FakeID-Vulnerability-Walkthrough.pdf</a>.</p>\n<p>This stackoverflow post states that the user had app installed on his phone from Verizon that had multiple signatures: <a href=\"https://stackoverflow.com/questions/13618281/why-is-the-packageinfo-signatures-field-an-array-and-when-would-there-be-anythi\">Why is the PackageInfo.signatures field an array, and when would there be anything other than one value here?</a>. Likewise, the AOSP code has code to account for multiple signatures in multiple places.</p>\n"},{"tags":["java","junit","spring-security","jackson"],"comments":[{"owner":{"account_id":1877077,"reputation":1544,"user_id":2152016,"accept_rate":42,"display_name":"ms_27"},"score":0,"creation_date":1559155911,"post_id":44344563,"comment_id":99336747,"body_markdown":"Were you able to solve this?","body":"Were you able to solve this?"},{"owner":{"account_id":3658458,"reputation":123,"user_id":3048873,"accept_rate":15,"display_name":"Mohammad Hasan"},"score":0,"creation_date":1563159357,"post_id":44344563,"comment_id":100594341,"body_markdown":"How did you solve this?","body":"How did you solve this?"},{"owner":{"account_id":6000838,"reputation":657,"user_id":4714173,"accept_rate":56,"display_name":"Sammy65"},"score":0,"creation_date":1563200892,"post_id":44344563,"comment_id":100611399,"body_markdown":"@manoj &amp; Mohammad Hasan, it&#39;s been two years since and moved on from it since so, I honestly don&#39;t remember. I&#39;ll try to reproduce the issue to solve it and let you guys know. Have you tried the answers below and they didn&#39;t also work for you?","body":"@manoj &amp; Mohammad Hasan, it&#39;s been two years since and moved on from it since so, I honestly don&#39;t remember. I&#39;ll try to reproduce the issue to solve it and let you guys know. Have you tried the answers below and they didn&#39;t also work for you?"}],"answers":[{"comments":[{"owner":{"account_id":6000838,"reputation":657,"user_id":4714173,"accept_rate":56,"display_name":"Sammy65"},"score":0,"creation_date":1496507137,"post_id":44344607,"comment_id":75694915,"body_markdown":"`UserAccountDetails(..., authorityList=[ROLE_ADMIN, ROLE_USER])` is how the POJO prints it out. And, this is how I load it in: `List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;(); authorities.add(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;));` so not sure which name to use as it still throws the same error when I use the authorities name of the list. Also, the Json is supposed to just show an authorityList array object.","body":"<code>UserAccountDetails(..., authorityList=[ROLE_ADMIN, ROLE_USER])</code> is how the POJO prints it out. And, this is how I load it in: <code>List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;(); authorities.add(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;));</code> so not sure which name to use as it still throws the same error when I use the authorities name of the list. Also, the Json is supposed to just show an authorityList array object."},{"owner":{"account_id":4011731,"reputation":448,"user_id":3304903,"accept_rate":75,"display_name":"Dulaj Atapattu"},"score":0,"creation_date":1496550706,"post_id":44344607,"comment_id":75703804,"body_markdown":"@Sammy65 your comment is not clear to me. Then you can use name = &quot;ROLE_ADMIN&quot;. Please see the edited answer.","body":"@Sammy65 your comment is not clear to me. Then you can use name = &quot;ROLE_ADMIN&quot;. Please see the edited answer."},{"owner":{"account_id":4011731,"reputation":448,"user_id":3304903,"accept_rate":75,"display_name":"Dulaj Atapattu"},"score":0,"creation_date":1496551316,"post_id":44344607,"comment_id":75703885,"body_markdown":"@Sammy65 And can you provide more piece of code? When do you get the error? Serializing or deserializing?","body":"@Sammy65 And can you provide more piece of code? When do you get the error? Serializing or deserializing?"},{"owner":{"account_id":6000838,"reputation":657,"user_id":4714173,"accept_rate":56,"display_name":"Sammy65"},"score":0,"creation_date":1496609565,"post_id":44344607,"comment_id":75719163,"body_markdown":"It&#39;s when I try to serialize the object using those annotations. When I don&#39;t, I get a different error which I&#39;ve asked a question about also from this link: [ObjectMapper](https://stackoverflow.com/questions/44294830/org-springframework-http-converter-httpmessagenotreadableexception)","body":"It&#39;s when I try to serialize the object using those annotations. When I don&#39;t, I get a different error which I&#39;ve asked a question about also from this link: <a href=\"https://stackoverflow.com/questions/44294830/org-springframework-http-converter-httpmessagenotreadableexception\">ObjectMapper</a>"}],"tags":[],"owner":{"account_id":4011731,"reputation":448,"user_id":3304903,"accept_rate":75,"display_name":"Dulaj Atapattu"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496550724,"creation_date":1496497632,"answer_id":44344607,"question_id":44344563,"body_markdown":"Change this \r\n\r\n    @JsonSubTypes(value = {\r\n                @JsonSubTypes.Type(value = SimpleGrantedAuthority.class)\r\n            }\r\n    )\r\n\r\nto this,\r\n\r\n    @JsonSubTypes({\r\n    @JsonSubTypes.Type(value = SimpleGrantedAuthority.class, name = &quot;ROLE_ADMIN&quot;),\r\n    })\r\n\r\nHere name parameter of the JsonSubTypes should be the name you used in the JSON object to identify that sub class.","title":"com.fasterxml.jackson.core.JsonGenerationException: Can not write a field name, expecting a value","body":"<p>Change this </p>\n\n<pre><code>@JsonSubTypes(value = {\n            @JsonSubTypes.Type(value = SimpleGrantedAuthority.class)\n        }\n)\n</code></pre>\n\n<p>to this,</p>\n\n<pre><code>@JsonSubTypes({\n@JsonSubTypes.Type(value = SimpleGrantedAuthority.class, name = \"ROLE_ADMIN\"),\n})\n</code></pre>\n\n<p>Here name parameter of the JsonSubTypes should be the name you used in the JSON object to identify that sub class.</p>\n"},{"tags":[],"owner":{"account_id":15585187,"reputation":179,"user_id":11243930,"display_name":"jolene jolene jolene jolene"},"comment_count":0,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1578065531,"creation_date":1557425266,"answer_id":56065240,"question_id":44344563,"body_markdown":"If you&#39;ve found this page because you&#39;re trying to Serialize an object in Spring&#39;s JsonSerializer using the JsonGenerator.write(String/Number)Field function and see the `com.fasterxml.jackson.core.JsonGenerationException: Can not write a field name, expecting a value` error even though you&#39;ve supplied a value:\r\n\r\nMake sure that before you call writeField you&#39;ve called `JsonGenerator.writeStartObject();`","title":"com.fasterxml.jackson.core.JsonGenerationException: Can not write a field name, expecting a value","body":"<p>If you've found this page because you're trying to Serialize an object in Spring's JsonSerializer using the JsonGenerator.write(String/Number)Field function and see the <code>com.fasterxml.jackson.core.JsonGenerationException: Can not write a field name, expecting a value</code> error even though you've supplied a value:</p>\n\n<p>Make sure that before you call writeField you've called <code>JsonGenerator.writeStartObject();</code></p>\n"},{"tags":[],"owner":{"account_id":28305733,"reputation":11,"user_id":21643776,"display_name":"orzzsy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682837088,"creation_date":1682755133,"answer_id":76135134,"question_id":44344563,"body_markdown":"If you want to serialize `List&lt; GrantedAuthority&gt;`, you can try to customize a serializer and then register the serializer directly on the class\r\n\r\n### Serializer\r\n```java\r\n\r\npublic class AuthoritySerializer extends JsonSerializer&lt;SysUser&gt; {\r\n\r\n    @Override\r\n    public void serialize(SysUser sysUser, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {      \r\n       List&lt;String&gt; authorities = sysUser.getAuthorities().stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList());\r\n        jsonGenerator.writeStartObject();\r\n        jsonGenerator.writeObjectField(&quot;id&quot;, sysUser.getId());\r\n        jsonGenerator.writeStringField(&quot;username&quot;, sysUser.getUsername());\r\n        jsonGenerator.writeStringField(&quot;password&quot;, sysUser.getPassword());\r\n        jsonGenerator.writeFieldName(&quot;authorities&quot;);\r\n        jsonGenerator.writeArray(authorities.toArray(new String[0]), 0, authorities.size());\r\n        jsonGenerator.writeEndObject();\r\n       \r\n    }\r\n}\r\n```\r\n","title":"com.fasterxml.jackson.core.JsonGenerationException: Can not write a field name, expecting a value","body":"<p>If you want to serialize <code>List&lt; GrantedAuthority&gt;</code>, you can try to customize a serializer and then register the serializer directly on the class</p>\n<h3>Serializer</h3>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class AuthoritySerializer extends JsonSerializer&lt;SysUser&gt; {\n\n    @Override\n    public void serialize(SysUser sysUser, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {      \n       List&lt;String&gt; authorities = sysUser.getAuthorities().stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList());\n        jsonGenerator.writeStartObject();\n        jsonGenerator.writeObjectField(&quot;id&quot;, sysUser.getId());\n        jsonGenerator.writeStringField(&quot;username&quot;, sysUser.getUsername());\n        jsonGenerator.writeStringField(&quot;password&quot;, sysUser.getPassword());\n        jsonGenerator.writeFieldName(&quot;authorities&quot;);\n        jsonGenerator.writeArray(authorities.toArray(new String[0]), 0, authorities.size());\n        jsonGenerator.writeEndObject();\n       \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6000838,"reputation":657,"user_id":4714173,"accept_rate":56,"display_name":"Sammy65"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21494,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1682837088,"creation_date":1496497197,"question_id":44344563,"body_markdown":"    @NotNull\r\n    @JsonTypeInfo(\r\n        use = JsonTypeInfo.Id.NAME,\r\n        include = JsonTypeInfo.As.EXTERNAL_PROPERTY,\r\n        property = &quot;type&quot;)\r\n    @JsonSubTypes(value = {@JsonSubTypes.Type(value = SimpleGrantedAuthority.class)})\r\n    private List&lt;GrantedAuthority&gt; authorityList;\r\n\r\nAbove is my attribute which is a Spring Security interface for setting/authorizing users. In my test, I use the statement below to serialize to JSON as it&#39;ll be a an array or list within the JSON request body injected using camel content enricher.\r\n\r\n    String jsonObject =  mapper.writeValueAsString(accountDetails);\r\n\r\nI get this error because of that above line:\r\n\r\n    com.fasterxml.jackson.core.JsonGenerationException: Can not write a field name, expecting a value\r\n    \r\n    \tat com.fasterxml.jackson.core.JsonGenerator._reportError(JsonGenerator.java:1897)\r\n    \tat com.fasterxml.jackson.core.json.WriterBasedJsonGenerator.writeFieldName(WriterBasedJsonGenerator.java:126)\r\n    \tat com.fasterxml.jackson.core.json.JsonGeneratorImpl.writeStringField(JsonGeneratorImpl.java:202)\r\n    \tat com.fasterxml.jackson.databind.jsontype.impl.AsExternalTypeSerializer._writeObjectSuffix(AsExternalTypeSerializer.java:163)\r\n    \tat com.fasterxml.jackson.databind.jsontype.impl.AsExternalTypeSerializer.writeTypeSuffixForObject(AsExternalTypeSerializer.java:88)\r\n    \tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeWithType(BeanSerializerBase.java:584)\r\n    \tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:151)\r\n    \tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:112)\r\n    \tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25)\r\n    \tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:704)\r\n    \tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:690)\r\n    \tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155)\r\n    \tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:292)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper._configAndWriteValue(ObjectMapper.java:3681)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.writeValueAsString(ObjectMapper.java:3057)\r\n    \tat com.sammy.controller.HomeControllerTest.checkCreateUser(HomeControllerTest.java:74)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n    \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n    \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\r\n    \tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n    \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n    \tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n    \tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n    \tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)\r\n    \tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n    \tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n\r\nAny help will be much appreciated.","title":"com.fasterxml.jackson.core.JsonGenerationException: Can not write a field name, expecting a value","body":"<pre><code>@NotNull\n@JsonTypeInfo(\n    use = JsonTypeInfo.Id.NAME,\n    include = JsonTypeInfo.As.EXTERNAL_PROPERTY,\n    property = \"type\")\n@JsonSubTypes(value = {@JsonSubTypes.Type(value = SimpleGrantedAuthority.class)})\nprivate List&lt;GrantedAuthority&gt; authorityList;\n</code></pre>\n\n<p>Above is my attribute which is a Spring Security interface for setting/authorizing users. In my test, I use the statement below to serialize to JSON as it'll be a an array or list within the JSON request body injected using camel content enricher.</p>\n\n<pre><code>String jsonObject =  mapper.writeValueAsString(accountDetails);\n</code></pre>\n\n<p>I get this error because of that above line:</p>\n\n<pre><code>com.fasterxml.jackson.core.JsonGenerationException: Can not write a field name, expecting a value\n\n    at com.fasterxml.jackson.core.JsonGenerator._reportError(JsonGenerator.java:1897)\n    at com.fasterxml.jackson.core.json.WriterBasedJsonGenerator.writeFieldName(WriterBasedJsonGenerator.java:126)\n    at com.fasterxml.jackson.core.json.JsonGeneratorImpl.writeStringField(JsonGeneratorImpl.java:202)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsExternalTypeSerializer._writeObjectSuffix(AsExternalTypeSerializer.java:163)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsExternalTypeSerializer.writeTypeSuffixForObject(AsExternalTypeSerializer.java:88)\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeWithType(BeanSerializerBase.java:584)\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:151)\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:112)\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25)\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:704)\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:690)\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155)\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:292)\n    at com.fasterxml.jackson.databind.ObjectMapper._configAndWriteValue(ObjectMapper.java:3681)\n    at com.fasterxml.jackson.databind.ObjectMapper.writeValueAsString(ObjectMapper.java:3057)\n    at com.sammy.controller.HomeControllerTest.checkCreateUser(HomeControllerTest.java:74)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\n    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\n    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n</code></pre>\n\n<p>Any help will be much appreciated.</p>\n"},{"tags":["java","spring","oauth-2.0"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1680417157,"post_id":75910317,"comment_id":133892852,"body_markdown":"Have you tried to use any port but 8080 for your Spring app with login? In spring servlet implementations, there is a `PortMapperImpl` involved at quite a few places and it behaves in manner that is unnatural to me when https and port 8080 (or 80) are involved. You could also try to use absolute URIs for anything related to login (login page, post login URIs, etc.) but it is less simple","body":"Have you tried to use any port but 8080 for your Spring app with login? In spring servlet implementations, there is a <code>PortMapperImpl</code> involved at quite a few places and it behaves in manner that is unnatural to me when https and port 8080 (or 80) are involved. You could also try to use absolute URIs for anything related to login (login page, post login URIs, etc.) but it is less simple"},{"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"score":0,"creation_date":1680453695,"post_id":75910317,"comment_id":133897495,"body_markdown":"Remember, this is running within Wildfly, so Wildfly is the one listening on 8080 and just forwarding requests to my app. I have configured my app to be the root application on Wildfly.","body":"Remember, this is running within Wildfly, so Wildfly is the one listening on 8080 and just forwarding requests to my app. I have configured my app to be the root application on Wildfly."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1680470334,"post_id":75910317,"comment_id":133899916,"body_markdown":"and on what port is your app running?","body":"and on what port is your app running?"},{"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"score":0,"creation_date":1680506813,"post_id":75910317,"comment_id":133903879,"body_markdown":"There is no specified port. It&#39;s running within Wildfly and my app&#39;s context path, not a port, distinguishes it from other possible web apps deployed to Wildfly.","body":"There is no specified port. It&#39;s running within Wildfly and my app&#39;s context path, not a port, distinguishes it from other possible web apps deployed to Wildfly."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1680538607,"post_id":75910317,"comment_id":133911784,"body_markdown":"I get it. What if you run Wildfly on any other port than 8080 (like 8081)?","body":"I get it. What if you run Wildfly on any other port than 8080 (like 8081)?"},{"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"score":0,"creation_date":1680573063,"post_id":75910317,"comment_id":133917453,"body_markdown":"I can&#39;t. I have several other web apps running on this Wildfly and that would interfere with their access. Out of curiosity, what should I have been looking for if I changed the port number?","body":"I can&#39;t. I have several other web apps running on this Wildfly and that would interfere with their access. Out of curiosity, what should I have been looking for if I changed the port number?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1680573657,"post_id":75910317,"comment_id":133917527,"body_markdown":"It makes me think of the issue I reported there: https://github.com/spring-projects/spring-security/issues/12307 (could be due to the `PortMapperImpl` behavior too). You might have a look at the other alternative I reference in my last comment: using absolute URIs for anything related to login (I provided with useful hints there)","body":"It makes me think of the issue I reported there: <a href=\"https://github.com/spring-projects/spring-security/issues/12307\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security/issues/12307</a> (could be due to the <code>PortMapperImpl</code> behavior too). You might have a look at the other alternative I reference in my last comment: using absolute URIs for anything related to login (I provided with useful hints there)"}],"answers":[{"tags":[],"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682833384,"creation_date":1682833384,"answer_id":76139719,"question_id":75910317,"body_markdown":"I ended up throwing the whole kitchen sink at the problem, and it eventually worked, but I&#39;m not sure which part of that made it work. :(","title":"Spring OAuth2 login with https proxy goes back to http","body":"<p>I ended up throwing the whole kitchen sink at the problem, and it eventually worked, but I'm not sure which part of that made it work. :(</p>\n"}],"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76139719,"answer_count":1,"score":0,"last_activity_date":1682833384,"creation_date":1680414246,"question_id":75910317,"body_markdown":"This question has been asked in similar form in the past, but not for the versions I&#39;m using now, plus I&#39;ve tried what they all mentioned and it didn&#39;t seem to work.\r\n\r\nI have a Java 11, Spring 5.3, Spring Boot 2.7.9, Spring Sec 5.7.7 web app, packaged as WAR, deployed on a Wildfly 15 web app server and am also using Apache httpd.\r\nThe home page is https://reactrax.com and uses ProxyPass and ProxyPassReverse to talk to Wildfly.\r\nThe app has the users authenticate using OAuth2 and Google. However, after login, the page is returned to http://reactrax.com:8080/loginSuccess.\r\nNote that it&#39;s now http instead of https and the Wildfly port has been added.\r\n\r\nHow do I get the login page just to redirect back to the original pre-login page on https://reactrax.com ?\r\n\r\nThe changes that I&#39;ve seen recommended include the following, but I haven&#39;t been able to find the magic combination to make it all work.\r\n\r\nApache:\r\n- RequestHeader set X-Forwarded-Proto https\r\n- RequestHeader set X-Forwarded-Port 443\r\n- ProxyPreserveHost On\r\n\r\nSpring properties:\r\n- server.use-forward-headers=true (deprecated in Spring Boot 2.2 in favor of server.forward-headers-strategy)\r\n- server.forward-headers-strategy=native\r\n- server.tomcat.remote-ip-header=x-forwarded-for\r\n- server.tomcat.protocol-header=x-forwarded-proto\r\n\r\nSpring beans:\r\n- ForwardedHeaderFilter","title":"Spring OAuth2 login with https proxy goes back to http","body":"<p>This question has been asked in similar form in the past, but not for the versions I'm using now, plus I've tried what they all mentioned and it didn't seem to work.</p>\n<p>I have a Java 11, Spring 5.3, Spring Boot 2.7.9, Spring Sec 5.7.7 web app, packaged as WAR, deployed on a Wildfly 15 web app server and am also using Apache httpd.\nThe home page is <a href=\"https://reactrax.com\" rel=\"nofollow noreferrer\">https://reactrax.com</a> and uses ProxyPass and ProxyPassReverse to talk to Wildfly.\nThe app has the users authenticate using OAuth2 and Google. However, after login, the page is returned to <a href=\"http://reactrax.com:8080/loginSuccess\" rel=\"nofollow noreferrer\">http://reactrax.com:8080/loginSuccess</a>.\nNote that it's now http instead of https and the Wildfly port has been added.</p>\n<p>How do I get the login page just to redirect back to the original pre-login page on <a href=\"https://reactrax.com\" rel=\"nofollow noreferrer\">https://reactrax.com</a> ?</p>\n<p>The changes that I've seen recommended include the following, but I haven't been able to find the magic combination to make it all work.</p>\n<p>Apache:</p>\n<ul>\n<li>RequestHeader set X-Forwarded-Proto https</li>\n<li>RequestHeader set X-Forwarded-Port 443</li>\n<li>ProxyPreserveHost On</li>\n</ul>\n<p>Spring properties:</p>\n<ul>\n<li>server.use-forward-headers=true (deprecated in Spring Boot 2.2 in favor of server.forward-headers-strategy)</li>\n<li>server.forward-headers-strategy=native</li>\n<li>server.tomcat.remote-ip-header=x-forwarded-for</li>\n<li>server.tomcat.protocol-header=x-forwarded-proto</li>\n</ul>\n<p>Spring beans:</p>\n<ul>\n<li>ForwardedHeaderFilter</li>\n</ul>\n"},{"tags":["java","cron","quartz-scheduler"],"comments":[{"owner":{"account_id":367746,"reputation":24129,"user_id":714112,"accept_rate":80,"display_name":"Sridhar Sarnobat"},"score":0,"creation_date":1540408064,"post_id":23846743,"comment_id":92859113,"body_markdown":"I can&#39;t believe there are only 2 people in the universe who&#39;ve ever wondered about this.","body":"I can&#39;t believe there are only 2 people in the universe who&#39;ve ever wondered about this."}],"answers":[{"comments":[{"owner":{"account_id":1594358,"reputation":1154,"user_id":1476926,"display_name":"thelr"},"score":1,"creation_date":1682713925,"post_id":25310994,"comment_id":134264641,"body_markdown":"At least some Unix implementations (currently looking at RHEL 7) exclude the &quot;year&quot; field. According to `man 5 crontab` on this server, &quot;The &#39;sixth&#39; field (the rest of the line) specifies the command to be run.&quot;","body":"At least some Unix implementations (currently looking at RHEL 7) exclude the &quot;year&quot; field. According to <code>man 5 crontab</code> on this server, &quot;The &#39;sixth&#39; field (the rest of the line) specifies the command to be run.&quot;"}],"tags":[],"owner":{"account_id":2545685,"reputation":949,"user_id":2210548,"accept_rate":80,"display_name":"Kraiss"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1682831488,"creation_date":1408027556,"answer_id":25310994,"question_id":23846743,"body_markdown":"I don&#39;t know how much versions of Cron expression exist but the most famous one is indeed the Unix one.\r\n\r\nIf you want to translate a Unix Cron expression to a Quartz Cron expression consider this.\r\n\r\nQuartz format is :\r\n\r\n    (second, minute, hour, day_of_month, month, day_of_week, year)\r\n\r\nUnix format is :\r\n\r\n            (minute, hour, day_of_month, month, day_of_week, task)\r\n\r\nSo if you to translate a Unix cron into Quartz, you just have to add a value for the `second` and `year`. \r\n\r\nIf you want the same cron, you use 0 for `second` and `*` for `year`\r\n\r\n","title":"Different types of Cron Expression","body":"<p>I don't know how much versions of Cron expression exist but the most famous one is indeed the Unix one.</p>\n<p>If you want to translate a Unix Cron expression to a Quartz Cron expression consider this.</p>\n<p>Quartz format is :</p>\n<pre><code>(second, minute, hour, day_of_month, month, day_of_week, year)\n</code></pre>\n<p>Unix format is :</p>\n<pre><code>        (minute, hour, day_of_month, month, day_of_week, task)\n</code></pre>\n<p>So if you to translate a Unix cron into Quartz, you just have to add a value for the <code>second</code> and <code>year</code>.</p>\n<p>If you want the same cron, you use 0 for <code>second</code> and <code>*</code> for <code>year</code></p>\n"}],"owner":{"account_id":205226,"reputation":6042,"user_id":978391,"accept_rate":35,"display_name":"Kevin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3617,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1682831488,"creation_date":1400945348,"question_id":23846743,"body_markdown":"I am a little confused about the Cron expression used in the unix system and the one Java Quartz is used. \r\n\r\nThe left-most entry of standard cron expression used by Unix represents &quot;minute&quot;. But the cron expression used by Quartz uses the left most entry to represent &quot;second&quot;:\r\n\r\nhttp://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger\r\n\r\nI want to know how many versions of cron expression are currently being used? \r\n\r\nWhat happens if I pass the standard version of cron into Quartz?\r\n\r\nThanks a lot","title":"Different types of Cron Expression","body":"<p>I am a little confused about the Cron expression used in the unix system and the one Java Quartz is used. </p>\n\n<p>The left-most entry of standard cron expression used by Unix represents \"minute\". But the cron expression used by Quartz uses the left most entry to represent \"second\":</p>\n\n<p><a href=\"http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger\" rel=\"noreferrer\">http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger</a></p>\n\n<p>I want to know how many versions of cron expression are currently being used? </p>\n\n<p>What happens if I pass the standard version of cron into Quartz?</p>\n\n<p>Thanks a lot</p>\n"},{"tags":["java","algorithm","optimization","data-structures","scheduling"],"comments":[{"owner":{"account_id":633298,"reputation":775,"user_id":396786,"accept_rate":43,"display_name":"martin"},"score":0,"creation_date":1286525036,"post_id":3888566,"comment_id":4140882,"body_markdown":"It seems like i have not explained it right. I want to solve the resource-constrained project scheduling problem (RCPSP) which is known to be NP-complete with different heuristics. The problem is defined as follows:","body":"It seems like i have not explained it right. I want to solve the resource-constrained project scheduling problem (RCPSP) which is known to be NP-complete with different heuristics. The problem is defined as follows:"},{"owner":{"account_id":633298,"reputation":775,"user_id":396786,"accept_rate":43,"display_name":"martin"},"score":0,"creation_date":1286525084,"post_id":3888566,"comment_id":4140892,"body_markdown":"A project consists of a set A = {1, ..., n} of activities, which must be performed on a set R = {1, ..., m} of resources. An activity j ∈ A requires rjk ≥ 0 units of resource k ∈ R throughout its non-preemptible processing time pj ≥ 0. Each resource k ∈ R has a limited capacity Rk &gt; 0. There exists precedence relations between the activities, such that one activity j ∈ A can not be started before all its immediate predecessors have completed. The objective is to find a precedence and resource-capacity feasible schedule which minimizes the overall makespan.","body":"A project consists of a set A = {1, ..., n} of activities, which must be performed on a set R = {1, ..., m} of resources. An activity j ∈ A requires rjk ≥ 0 units of resource k ∈ R throughout its non-preemptible processing time pj ≥ 0. Each resource k ∈ R has a limited capacity Rk &gt; 0. There exists precedence relations between the activities, such that one activity j ∈ A can not be started before all its immediate predecessors have completed. The objective is to find a precedence and resource-capacity feasible schedule which minimizes the overall makespan."},{"owner":{"account_id":47176,"reputation":33749,"user_id":139595,"accept_rate":88,"display_name":"J&#246;rn Horstmann"},"score":0,"creation_date":1286544080,"post_id":3888566,"comment_id":4143452,"body_markdown":"Is this for solving the PSPLIB benchmark instances or do you have a real-world use case? I developed a genetic algorithm for RCPSP while in university some years ago, but it was pretty specific to PSPLIB, ie hardcoded maximum number of resources, project duration, nr of successors/predecessors per activity...","body":"Is this for solving the PSPLIB benchmark instances or do you have a real-world use case? I developed a genetic algorithm for RCPSP while in university some years ago, but it was pretty specific to PSPLIB, ie hardcoded maximum number of resources, project duration, nr of successors/predecessors per activity..."},{"owner":{"account_id":633298,"reputation":775,"user_id":396786,"accept_rate":43,"display_name":"martin"},"score":0,"creation_date":1286874574,"post_id":3888566,"comment_id":4171947,"body_markdown":"hy j&#246;rn, sry for the late answer. it is both. i am doing it for a company, but i also want to write something for a class about it. therefore i will also test it with the PSPLIB benchmarks (thx for the tipp btw).","body":"hy j&#246;rn, sry for the late answer. it is both. i am doing it for a company, but i also want to write something for a class about it. therefore i will also test it with the PSPLIB benchmarks (thx for the tipp btw)."},{"owner":{"account_id":2078509,"reputation":163,"user_id":1851169,"accept_rate":0,"display_name":"JackAW"},"score":0,"creation_date":1682831086,"post_id":3888566,"comment_id":134275576,"body_markdown":"There is huge literaturę about the subject. The starting point might be this article: https://optimization.cbe.cornell.edu/index.php?title=Job_shop_scheduling","body":"There is huge literaturę about the subject. The starting point might be this article: <a href=\"https://optimization.cbe.cornell.edu/index.php?title=Job_shop_scheduling\" rel=\"nofollow noreferrer\">optimization.cbe.cornell.edu/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":633298,"reputation":775,"user_id":396786,"accept_rate":43,"display_name":"martin"},"score":0,"creation_date":1286525138,"post_id":3888578,"comment_id":4140905,"body_markdown":"That does not work for me. I added a comment to my first post to define the problem more clearly. but thx anyway.","body":"That does not work for me. I added a comment to my first post to define the problem more clearly. but thx anyway."}],"tags":[],"owner":{"account_id":15271,"reputation":63428,"user_id":32090,"accept_rate":91,"display_name":"Boris Pavlović"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1286523767,"creation_date":1286523767,"answer_id":3888578,"question_id":3888566,"body_markdown":"[OpenSymphony Quartz Scheduller][1] is the right tool for the task.\r\n\r\nFrom Quartz&#39;s web page:\r\n\r\n&quot;What is Quartz?\r\n\r\nQuartz is a full-featured, open source job scheduling service that can be integrated with, or used along side virtually any Java EE or Java SE application - from the smallest stand-alone application to the largest e-commerce system. Quartz can be used to create simple or complex schedules for executing tens, hundreds, or even tens-of-thousands of jobs; jobs whose tasks are defined as standard Java components that may executed virtually anything you may program them to do. The Quartz Scheduler includes many enterprise-class features, such as JTA transactions and clustering.\r\n\r\nQuartz is freely usable, licensed under the Apache 2.0 license.\r\n\r\nPlease read our overview for more quick information.&quot;\r\n\r\n\r\n  [1]: http://www.quartz-scheduler.org/","title":"Implementing Scheduling Algorithms with Java","body":"<p><a href=\"http://www.quartz-scheduler.org/\" rel=\"nofollow\">OpenSymphony Quartz Scheduller</a> is the right tool for the task.</p>\n\n<p>From Quartz's web page:</p>\n\n<p>\"What is Quartz?</p>\n\n<p>Quartz is a full-featured, open source job scheduling service that can be integrated with, or used along side virtually any Java EE or Java SE application - from the smallest stand-alone application to the largest e-commerce system. Quartz can be used to create simple or complex schedules for executing tens, hundreds, or even tens-of-thousands of jobs; jobs whose tasks are defined as standard Java components that may executed virtually anything you may program them to do. The Quartz Scheduler includes many enterprise-class features, such as JTA transactions and clustering.</p>\n\n<p>Quartz is freely usable, licensed under the Apache 2.0 license.</p>\n\n<p>Please read our overview for more quick information.\"</p>\n"},{"comments":[{"owner":{"account_id":633298,"reputation":775,"user_id":396786,"accept_rate":43,"display_name":"martin"},"score":0,"creation_date":1286525320,"post_id":3888588,"comment_id":4140926,"body_markdown":"Sorry obviously I stated the problem not clear enough. I added a comment to my first post to make it clearer. Thx anyway.","body":"Sorry obviously I stated the problem not clear enough. I added a comment to my first post to make it clearer. Thx anyway."}],"tags":[],"owner":{"account_id":50244,"reputation":23397,"user_id":149818,"accept_rate":74,"display_name":"Dewfy"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286523897,"creation_date":1286523897,"answer_id":3888588,"question_id":3888566,"body_markdown":"JDK 1.6 already have very good one.\r\nlook at java.util.concurrent.ScheduledThreadPoolExecutor\r\n\r\n","title":"Implementing Scheduling Algorithms with Java","body":"<p>JDK 1.6 already have very good one.\nlook at java.util.concurrent.ScheduledThreadPoolExecutor</p>\n"},{"comments":[{"owner":{"account_id":633298,"reputation":775,"user_id":396786,"accept_rate":43,"display_name":"martin"},"score":0,"creation_date":1287494055,"post_id":3940659,"comment_id":4243341,"body_markdown":"Thx for the tip, but this problem is NP-hard. So the instances I have to deal with are not solvable in practical time with this methods.","body":"Thx for the tip, but this problem is NP-hard. So the instances I have to deal with are not solvable in practical time with this methods."},{"owner":{"account_id":218814,"reputation":3378,"user_id":475334,"accept_rate":79,"display_name":"fairidox"},"score":0,"creation_date":1287515774,"post_id":3940659,"comment_id":4247512,"body_markdown":"I&#39;m well aware of the computational complexity of the problem, I&#39;m a PhD student doing research directly in this field. If anything this approach is not exactly desirable because it is too sophisticated not, as you hypothesize, too simple. If you look at any operations research in this field you will see modeling as a MILP is by far the preferred approach.","body":"I&#39;m well aware of the computational complexity of the problem, I&#39;m a PhD student doing research directly in this field. If anything this approach is not exactly desirable because it is too sophisticated not, as you hypothesize, too simple. If you look at any operations research in this field you will see modeling as a MILP is by far the preferred approach."},{"owner":{"account_id":633298,"reputation":775,"user_id":396786,"accept_rate":43,"display_name":"martin"},"score":0,"creation_date":1287548260,"post_id":3940659,"comment_id":4251405,"body_markdown":"Reference please.So if I understand you right, you are saying that I just have to transform my problem into a MILP and put it into a solver? Then why do I find on scholar.google.com a lot of papers dealing with metaheuristics like GAs and tabu search? (especially from 2008 on)","body":"Reference please.So if I understand you right, you are saying that I just have to transform my problem into a MILP and put it into a solver? Then why do I find on scholar.google.com a lot of papers dealing with metaheuristics like GAs and tabu search? (especially from 2008 on)"},{"owner":{"account_id":218814,"reputation":3378,"user_id":475334,"accept_rate":79,"display_name":"fairidox"},"score":0,"creation_date":1287553044,"post_id":3940659,"comment_id":4251783,"body_markdown":"GAs and tabu are only locally optimal but tend to perform better for impossible problems, there is a lot of recent work here because people generally don&#39;t research what already works well. These algorithms are used when the problem is so large there is no hope of solving it optimally.  Your original question asked for practical tips, so mine would be don&#39;t get into the world of evolutionary computation until you are sure your problem is intractable (can&#39;t be solved optimally).  You can code up your problem in a day with the GLPK language, and it will probably solve it in a matter of seconds.","body":"GAs and tabu are only locally optimal but tend to perform better for impossible problems, there is a lot of recent work here because people generally don&#39;t research what already works well. These algorithms are used when the problem is so large there is no hope of solving it optimally.  Your original question asked for practical tips, so mine would be don&#39;t get into the world of evolutionary computation until you are sure your problem is intractable (can&#39;t be solved optimally).  You can code up your problem in a day with the GLPK language, and it will probably solve it in a matter of seconds."},{"owner":{"account_id":633298,"reputation":775,"user_id":396786,"accept_rate":43,"display_name":"martin"},"score":0,"creation_date":1287644581,"post_id":3940659,"comment_id":4264691,"body_markdown":"Ok, now I understand :) But the thing is I also have very large instances and so I have to deal with GAs. Furthermore I will write my master thesis about that and so I will also have to tackle some PSPLIB instances for benchmarking. But thx anyway for the tip for the smaller instances.","body":"Ok, now I understand :) But the thing is I also have very large instances and so I have to deal with GAs. Furthermore I will write my master thesis about that and so I will also have to tackle some PSPLIB instances for benchmarking. But thx anyway for the tip for the smaller instances."}],"tags":[],"owner":{"account_id":218814,"reputation":3378,"user_id":475334,"accept_rate":79,"display_name":"fairidox"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1287516929,"creation_date":1287131571,"answer_id":3940659,"question_id":3888566,"body_markdown":"AMPL is a modeling language that you can use for this, it can be compiled into a mixed integer linear program and solved with a number of solvers. I would suggest the GNU MathProg modeling language, it is a subset of the AMPL language and you can use it with the [GLPK][1] solver.  This is a very common problem and you will probably be able to find a example very close to what you want to do.\r\n\r\nedit: actually glpk comes with it&#39;s own modeling language which is just a subset of AMPL, which would likely make things easier.\r\n\r\n  [1]: http://www.gnu.org/software/glpk/","title":"Implementing Scheduling Algorithms with Java","body":"<p>AMPL is a modeling language that you can use for this, it can be compiled into a mixed integer linear program and solved with a number of solvers. I would suggest the GNU MathProg modeling language, it is a subset of the AMPL language and you can use it with the <a href=\"http://www.gnu.org/software/glpk/\" rel=\"nofollow\">GLPK</a> solver.  This is a very common problem and you will probably be able to find a example very close to what you want to do.</p>\n\n<p>edit: actually glpk comes with it's own modeling language which is just a subset of AMPL, which would likely make things easier.</p>\n"},{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1292839597,"creation_date":1292839597,"answer_id":4488589,"question_id":3888566,"body_markdown":"There are a couple of libs for NP complete planning problems out there: [Drools Planner][1] (open source, ASL java), JGap, cpsolver, opents, ...\r\n\r\n\r\n  [1]: http://www.jboss.org/drools/drools-planner","title":"Implementing Scheduling Algorithms with Java","body":"<p>There are a couple of libs for NP complete planning problems out there: <a href=\"http://www.jboss.org/drools/drools-planner\" rel=\"nofollow\">Drools Planner</a> (open source, ASL java), JGap, cpsolver, opents, ...</p>\n"},{"tags":[],"owner":{"account_id":1681739,"reputation":408,"user_id":1545840,"display_name":"Federico Dal Maso"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352811492,"creation_date":1352811492,"answer_id":13361151,"question_id":3888566,"body_markdown":"You can use [backSolver][1] to solve this problem, using the [finite capacity scheduling model][2]\r\n\r\n\r\n  [1]: http://www.backsolver.com\r\n  [2]: http://doc.backsolver.com/models/fcs-xml.html","title":"Implementing Scheduling Algorithms with Java","body":"<p>You can use <a href=\"http://www.backsolver.com\" rel=\"nofollow\">backSolver</a> to solve this problem, using the <a href=\"http://doc.backsolver.com/models/fcs-xml.html\" rel=\"nofollow\">finite capacity scheduling model</a></p>\n"}],"owner":{"account_id":633298,"reputation":775,"user_id":396786,"accept_rate":43,"display_name":"martin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5324,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":5,"score":5,"last_activity_date":1682831086,"creation_date":1286523627,"question_id":3888566,"body_markdown":"has anyone of you ever dealt with job scheduling problems with Java?\r\nI have to work on a resource-constrained project scheduling problem and want to ask for some practical tips. Are there any good libs available for implementing algorithms? What are efficient data structures I should use?\r\n\r\n**edit**:\r\n\r\nIt seems like i have not explained it right. I want to solve the resource-constrained project scheduling problem (RCPSP) which is known to be NP-complete with different heuristics. The problem is defined as follows: \r\n\r\nA project consists of a set A = {1, ..., n} of activities, which must be performed on a set R = {1, ..., m} of resources. An activity j ∈ A requires rjk ≥ 0 units of resource k ∈ R throughout its non-preemptible processing time pj ≥ 0. Each resource k ∈ R has a limited capacity Rk &gt; 0. There exists precedence relations between the activities, such that one activity j ∈ A can not be started before all its immediate predecessors have completed. The objective is to find a precedence and resource-capacity feasible schedule which minimizes the overall makespan.","title":"Implementing Scheduling Algorithms with Java","body":"<p>has anyone of you ever dealt with job scheduling problems with Java?\nI have to work on a resource-constrained project scheduling problem and want to ask for some practical tips. Are there any good libs available for implementing algorithms? What are efficient data structures I should use?</p>\n\n<p><strong>edit</strong>:</p>\n\n<p>It seems like i have not explained it right. I want to solve the resource-constrained project scheduling problem (RCPSP) which is known to be NP-complete with different heuristics. The problem is defined as follows: </p>\n\n<p>A project consists of a set A = {1, ..., n} of activities, which must be performed on a set R = {1, ..., m} of resources. An activity j ∈ A requires rjk ≥ 0 units of resource k ∈ R throughout its non-preemptible processing time pj ≥ 0. Each resource k ∈ R has a limited capacity Rk > 0. There exists precedence relations between the activities, such that one activity j ∈ A can not be started before all its immediate predecessors have completed. The objective is to find a precedence and resource-capacity feasible schedule which minimizes the overall makespan.</p>\n"},{"tags":["java","android","qr-code"],"answers":[{"tags":[],"owner":{"account_id":27519080,"reputation":14,"user_id":21027396,"display_name":"gulshan212"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682674352,"creation_date":1682674352,"answer_id":76128184,"question_id":76128067,"body_markdown":"this is Gulshan Negi.\r\nWell, I searched about it on Google and I found that you should go with updated code: \r\nHere is source code:\r\n\r\n    String first = &quot;12 &quot;;\r\n    Integer id = 1234;\r\n    String paddedId = String.format(&quot;%08d&quot;, id); // pad with leading zeros\r\n    StringBuilder spacedId = new StringBuilder();\r\n    for (int i = 0; i &lt; paddedId.length(); i += 2) {\r\n        spacedId.append(paddedId.substring(i, i + 2)).append(&quot; &quot;); // insert space between every two digits\r\n    }\r\n    String newId = spacedId.toString().trim(); // remove trailing space\r\n    \r\n    btnGenerate.setOnClickListener(view -&gt; {\r\n        MultiFormatWriter multiFormatWriter = new MultiFormatWriter();\r\n        try {\r\n            BitMatrix bitMatrix = multiFormatWriter.encode(first + newId, BarcodeFormat.QR_CODE, 400, 400);\r\n            BarcodeEncoder barcodeEncoder = new BarcodeEncoder();\r\n            Bitmap bitmap = barcodeEncoder.createBitmap(bitMatrix);\r\n            qrcodeIv.setImageBitmap(bitmap);\r\n            InputMethodManager manager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\r\n            manager.hideSoftInputFromWindow(minNp.getApplicationWindowToken(), 0);\r\n        } catch (WriterException e) {\r\n            e.printStackTrace();\r\n        } \r\n    });\r\n\r\nI hope it will helps you.\r\nThanks   ","title":"how to use insert space in integer (android studio, java)","body":"<p>this is Gulshan Negi.\nWell, I searched about it on Google and I found that you should go with updated code:\nHere is source code:</p>\n<pre><code>String first = &quot;12 &quot;;\nInteger id = 1234;\nString paddedId = String.format(&quot;%08d&quot;, id); // pad with leading zeros\nStringBuilder spacedId = new StringBuilder();\nfor (int i = 0; i &lt; paddedId.length(); i += 2) {\n    spacedId.append(paddedId.substring(i, i + 2)).append(&quot; &quot;); // insert space between every two digits\n}\nString newId = spacedId.toString().trim(); // remove trailing space\n\nbtnGenerate.setOnClickListener(view -&gt; {\n    MultiFormatWriter multiFormatWriter = new MultiFormatWriter();\n    try {\n        BitMatrix bitMatrix = multiFormatWriter.encode(first + newId, BarcodeFormat.QR_CODE, 400, 400);\n        BarcodeEncoder barcodeEncoder = new BarcodeEncoder();\n        Bitmap bitmap = barcodeEncoder.createBitmap(bitMatrix);\n        qrcodeIv.setImageBitmap(bitmap);\n        InputMethodManager manager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n        manager.hideSoftInputFromWindow(minNp.getApplicationWindowToken(), 0);\n    } catch (WriterException e) {\n        e.printStackTrace();\n    } \n});\n</code></pre>\n<p>I hope it will helps you.\nThanks</p>\n"}],"owner":{"account_id":27252115,"reputation":7,"user_id":21452351,"display_name":"Reborn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76128184,"answer_count":1,"score":0,"last_activity_date":1682830719,"creation_date":1682673383,"question_id":76128067,"body_markdown":"i am new to android, i am working on a android project and i want to insert space into integer. i have tried with coding it in my way, but it didn&#39;t show as what i want. \r\n\r\nmy code\r\n\r\n```\r\nString first = &quot;12 &quot;;\r\nInteger id = 1234;\r\n\r\nString new id = String.format(&quot;%08d &quot;, id);\r\n\r\nbtnGenerate.setOnClickListener(view -&gt; {\r\n            MultiFormatWriter multiFormatWriter = new MultiFormatWriter();\r\n            try {\r\n                BitMatrix bitMatrix = multiFormatWriter.encode(first + newid, BarcodeFormat.QR_CODE,400,400);\r\n                BarcodeEncoder barcodeEncoder = new BarcodeEncoder();\r\n                Bitmap bitmap = barcodeEncoder.createBitmap(bitMatrix);\r\n                qrcodeIv.setImageBitmap(bitmap);\r\n                InputMethodManager manager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\r\n                manager.hideSoftInputFromWindow(minNp.getApplicationWindowToken(), 0);\r\n            } catch (WriterException e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n```\r\n\r\nresult:\r\n\r\nqrcode image show after scan: 12 1234 \r\n\r\nwhat i expect: 12 00 00 12 34 ","title":"how to use insert space in integer (android studio, java)","body":"<p>i am new to android, i am working on a android project and i want to insert space into integer. i have tried with coding it in my way, but it didn't show as what i want.</p>\n<p>my code</p>\n<pre><code>String first = &quot;12 &quot;;\nInteger id = 1234;\n\nString new id = String.format(&quot;%08d &quot;, id);\n\nbtnGenerate.setOnClickListener(view -&gt; {\n            MultiFormatWriter multiFormatWriter = new MultiFormatWriter();\n            try {\n                BitMatrix bitMatrix = multiFormatWriter.encode(first + newid, BarcodeFormat.QR_CODE,400,400);\n                BarcodeEncoder barcodeEncoder = new BarcodeEncoder();\n                Bitmap bitmap = barcodeEncoder.createBitmap(bitMatrix);\n                qrcodeIv.setImageBitmap(bitmap);\n                InputMethodManager manager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n                manager.hideSoftInputFromWindow(minNp.getApplicationWindowToken(), 0);\n            } catch (WriterException e) {\n                e.printStackTrace();\n            }\n        });\n</code></pre>\n<p>result:</p>\n<p>qrcode image show after scan: 12 1234</p>\n<p>what i expect: 12 00 00 12 34</p>\n"},{"tags":["java","javafx","fxml","jfoenix"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1682870730,"post_id":76139589,"comment_id":134279789,"body_markdown":"From the posts on this site, there are unresolved issues with JFoenix.  I advise MaterialFX instead.","body":"From the posts on this site, there are unresolved issues with JFoenix.  I advise MaterialFX instead."}],"owner":{"account_id":21733173,"reputation":1,"user_id":16041590,"display_name":"Om Damahe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682830119,"creation_date":1682830119,"question_id":76139589,"body_markdown":"&quot;I&#39;m using JFoenix 9.0.10 and Scene Builder 19.0.0 for a Java project, but the JFXDatePicker component is not showing up in Scene Builder&#39;s search bar. I&#39;ve already imported the JFoenix library and refreshed the component list, but to no avail. Other JFoenix components are working properly. I&#39;m using the latest version of Java. How can I fix this issue?&quot;\r\n\r\nAccompanied by these two screenshots:\r\n\r\n[Screenshot of Scene Builder with the missing JFXDatePicker component](https://i.stack.imgur.com/q6rJX.png)\r\n[Screenshot of the import section with the imported JFoenix library](https://i.stack.imgur.com/z4LVe.png)","title":"JFXDatePicker not appearing in Scene Builder with JFoenix 9.0.10 and Scene Builder 19.0.0 (Java 20), despite other components working","body":"<p>&quot;I'm using JFoenix 9.0.10 and Scene Builder 19.0.0 for a Java project, but the JFXDatePicker component is not showing up in Scene Builder's search bar. I've already imported the JFoenix library and refreshed the component list, but to no avail. Other JFoenix components are working properly. I'm using the latest version of Java. How can I fix this issue?&quot;</p>\n<p>Accompanied by these two screenshots:</p>\n<p><a href=\"https://i.stack.imgur.com/q6rJX.png\" rel=\"nofollow noreferrer\">Screenshot of Scene Builder with the missing JFXDatePicker component</a>\n<a href=\"https://i.stack.imgur.com/z4LVe.png\" rel=\"nofollow noreferrer\">Screenshot of the import section with the imported JFoenix library</a></p>\n"},{"tags":["java","android","flutter","android-studio","java-11"],"comments":[{"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"score":0,"creation_date":1672359264,"post_id":74957108,"comment_id":132276152,"body_markdown":"So many things here, but first off, JAVA_HOME doesn&#39;t determine which `java` runs on the command line, that&#39;s controlled by PATH; second, JAVA_HOME is for a path, not a command","body":"So many things here, but first off, JAVA_HOME doesn&#39;t determine which <code>java</code> runs on the command line, that&#39;s controlled by PATH; second, JAVA_HOME is for a path, not a command"},{"owner":{"account_id":15639395,"reputation":180,"user_id":11283244,"display_name":"Britchi3"},"score":0,"creation_date":1672360795,"post_id":74957108,"comment_id":132276379,"body_markdown":"@MikeKim so what do you suggest?","body":"@MikeKim so what do you suggest?"}],"answers":[{"comments":[{"owner":{"account_id":15639395,"reputation":180,"user_id":11283244,"display_name":"Britchi3"},"score":0,"creation_date":1672361145,"post_id":74957225,"comment_id":132276411,"body_markdown":"I can&#39;t find that section when i open the Prefrence&gt;Build, Execute, Deployment&gt;gradle ... it only stops at &quot;Generat *iml files for modules...&quot; no Gradle Projects section... i have also updated the Andriod studio and it&#39;s still not showing","body":"I can&#39;t find that section when i open the Prefrence&gt;Build, Execute, Deployment&gt;gradle ... it only stops at &quot;Generat *iml files for modules...&quot; no Gradle Projects section... i have also updated the Andriod studio and it&#39;s still not showing"}],"tags":[],"owner":{"account_id":84644,"reputation":66608,"user_id":236465,"display_name":"Diego Torres Milano"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672360913,"creation_date":1672360913,"answer_id":74957225,"question_id":74957108,"body_markdown":"search for `gradle` in preferences and then select the correct **Gradle JDK**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7INio.png","title":"You need Java 11 or higher to build your app with this version of Gradle","body":"<p>search for <code>gradle</code> in preferences and then select the correct <strong>Gradle JDK</strong></p>\n<p><a href=\"https://i.stack.imgur.com/7INio.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7INio.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":15639395,"reputation":180,"user_id":11283244,"display_name":"Britchi3"},"score":0,"creation_date":1672402052,"post_id":74957583,"comment_id":132283039,"body_markdown":"I have also tried changing this to ```JavaVersion.VERSION_11``` but it&#39;s still not working... or what do you suggest?","body":"I have also tried changing this to <code>JavaVersion.VERSION_11</code> but it&#39;s still not working... or what do you suggest?"},{"owner":{"account_id":12785018,"reputation":534,"user_id":9251541,"display_name":"bakboem"},"score":0,"creation_date":1672443589,"post_id":74957583,"comment_id":132292442,"body_markdown":"I think you can try delete gradle cache and reinstall gradle plugin      &lt;br&gt; ./gradlew clean build","body":"I think you can try delete gradle cache and reinstall gradle plugin      &lt;br&gt; ./gradlew clean build"},{"owner":{"account_id":15639395,"reputation":180,"user_id":11283244,"display_name":"Britchi3"},"score":0,"creation_date":1672566417,"post_id":74957583,"comment_id":132306369,"body_markdown":"@bakbeom please how should I do that on Mac?","body":"@bakbeom please how should I do that on Mac?"},{"owner":{"account_id":12785018,"reputation":534,"user_id":9251541,"display_name":"bakboem"},"score":0,"creation_date":1672567158,"post_id":74957583,"comment_id":132306457,"body_markdown":"terminal goto project&gt;android. and run ./gradlew clean build","body":"terminal goto project&gt;android. and run ./gradlew clean build"}],"tags":[],"owner":{"account_id":12785018,"reputation":534,"user_id":9251541,"display_name":"bakboem"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672366261,"creation_date":1672366261,"answer_id":74957583,"question_id":74957108,"body_markdown":"The current flutter version does not support this project. You can open the Gradle configuration file embedded in the current flutter version to view the Gradle information.\r\n\r\n#### open android&gt;app&gt;build.gradle line 24\r\n\r\n- apply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\r\n- open terminal run &quot;whereis flutter&quot; you can get flutter install path\r\n- open &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot; file\r\n\r\n\r\n#### You will see the gradle version used by the current flutter version and current java compile version \r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        /* When bumping, also update ndkVersion above. */\r\n        classpath &#39;com.android.tools.build:gradle:4.1.0&#39;\r\n    }\r\n}\r\n\r\nandroid {\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"You need Java 11 or higher to build your app with this version of Gradle","body":"<p>The current flutter version does not support this project. You can open the Gradle configuration file embedded in the current flutter version to view the Gradle information.</p>\n<h4>open android&gt;app&gt;build.gradle line 24</h4>\n<ul>\n<li>apply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;</li>\n<li>open terminal run &quot;whereis flutter&quot; you can get flutter install path</li>\n<li>open &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot; file</li>\n</ul>\n<h4>You will see the gradle version used by the current flutter version and current java compile version</h4>\n<pre><code>buildscript {\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        /* When bumping, also update ndkVersion above. */\n        classpath 'com.android.tools.build:gradle:4.1.0'\n    }\n}\n\nandroid {\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15639395,"reputation":180,"user_id":11283244,"display_name":"Britchi3"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673780800,"creation_date":1673780800,"answer_id":75124586,"question_id":74957108,"body_markdown":"After Trying for weeks what later worked for me was going to \r\nProject_File&gt;Android&gt;build.gradle file and changing \r\n\r\n    dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:7.1.3&#39;\r\n            classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n        }\r\n\r\nTo:\r\n\r\n    ...\r\n    classpath &#39;com.android.tools.build:gradle:4.1.3&#39;\r\n    ...\r\n\r\nand i just run `./gradlew clean build` and then run the project, everything now working fine\r\n\r\nThanks All","title":"You need Java 11 or higher to build your app with this version of Gradle","body":"<p>After Trying for weeks what later worked for me was going to\nProject_File&gt;Android&gt;build.gradle file and changing</p>\n<pre><code>dependencies {\n        classpath 'com.android.tools.build:gradle:7.1.3'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n</code></pre>\n<p>To:</p>\n<pre><code>...\nclasspath 'com.android.tools.build:gradle:4.1.3'\n...\n</code></pre>\n<p>and i just run <code>./gradlew clean build</code> and then run the project, everything now working fine</p>\n<p>Thanks All</p>\n"},{"tags":[],"owner":{"account_id":10498339,"reputation":2183,"user_id":7737777,"display_name":"Gvs Akhil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682829698,"creation_date":1682829698,"answer_id":76139570,"question_id":74957108,"body_markdown":"This worked for me:\r\n\r\nOpen **android/app/build.gradle**\r\n\r\nChange from this:\r\n\r\n    compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n\r\nTo this:\r\n\r\n    compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_11\r\n            targetCompatibility JavaVersion.VERSION_11\r\n        }","title":"You need Java 11 or higher to build your app with this version of Gradle","body":"<p>This worked for me:</p>\n<p>Open <strong>android/app/build.gradle</strong></p>\n<p>Change from this:</p>\n<pre><code>compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n</code></pre>\n<p>To this:</p>\n<pre><code>compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n</code></pre>\n"}],"owner":{"account_id":15639395,"reputation":180,"user_id":11283244,"display_name":"Britchi3"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1374,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75124586,"answer_count":4,"score":2,"last_activity_date":1682829698,"creation_date":1672359099,"question_id":74957108,"body_markdown":"I am having this issue on mac \r\n[![enter image description here][1]][1]\r\n\r\nEverything was working fine untill i tried to run a flutter code i bought from Codecanyon and started having this issue, which i tried so many fix which i saw online and will list them bellow, but now even the new flutter projects i create now give same issue\r\n\r\nSteps:\r\ni have installed java 11 and 16 as well \r\n[![enter image description here][2]][2]\r\n\r\nthen tried to change the defaul jdk version using \r\n\r\n    export JAVA_HOME=`/usr/libexec/java_home -v 11.0.17`\r\n\r\nand \r\n\r\n    export JAVA_HOME=$(/usr/libexec/java_home -v 11)\r\n\r\nthen when i run `java -version`  on the terminal i get the report bellow \r\n[![enter image description here][3]][3]\r\n\r\nwhich i believe means i have succefuly changed it (I haved tried using bash, switched to Zsh and now back to bash) but it&#39;s still not working\r\n\r\nAlso tried to change it via the IDE from some solutions i saw here on stackOverflow but from the android-studio&gt; Prefrences&gt; Build, Execution, Deployment&gt; Gradle the section is not showing until i try the File&gt; Project Structure&gt; Project and select JDK 11\r\n[![enter image description here][4]][4]\r\n\r\nStill not working, even installed the latest version of Android Studio, still didn&#39;t fix the issue, and i had to install the old version again since my emulator stopped working after the update\r\n\r\nHave been battling this for some weeks to a month now, have checked multiple solutions here and on github but still can&#39;t get a solution that works\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZISOP.png\r\n  [2]: https://i.stack.imgur.com/hiSXa.png\r\n  [3]: https://i.stack.imgur.com/n5fAz.png\r\n  [4]: https://i.stack.imgur.com/9rwkB.png","title":"You need Java 11 or higher to build your app with this version of Gradle","body":"<p>I am having this issue on mac\n<a href=\"https://i.stack.imgur.com/ZISOP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZISOP.png\" alt=\"enter image description here\" /></a></p>\n<p>Everything was working fine untill i tried to run a flutter code i bought from Codecanyon and started having this issue, which i tried so many fix which i saw online and will list them bellow, but now even the new flutter projects i create now give same issue</p>\n<p>Steps:\ni have installed java 11 and 16 as well\n<a href=\"https://i.stack.imgur.com/hiSXa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hiSXa.png\" alt=\"enter image description here\" /></a></p>\n<p>then tried to change the defaul jdk version using</p>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 11.0.17`\n</code></pre>\n<p>and</p>\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home -v 11)\n</code></pre>\n<p>then when i run <code>java -version</code>  on the terminal i get the report bellow\n<a href=\"https://i.stack.imgur.com/n5fAz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n5fAz.png\" alt=\"enter image description here\" /></a></p>\n<p>which i believe means i have succefuly changed it (I haved tried using bash, switched to Zsh and now back to bash) but it's still not working</p>\n<p>Also tried to change it via the IDE from some solutions i saw here on stackOverflow but from the android-studio&gt; Prefrences&gt; Build, Execution, Deployment&gt; Gradle the section is not showing until i try the File&gt; Project Structure&gt; Project and select JDK 11\n<a href=\"https://i.stack.imgur.com/9rwkB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9rwkB.png\" alt=\"enter image description here\" /></a></p>\n<p>Still not working, even installed the latest version of Android Studio, still didn't fix the issue, and i had to install the old version again since my emulator stopped working after the update</p>\n<p>Have been battling this for some weeks to a month now, have checked multiple solutions here and on github but still can't get a solution that works</p>\n"},{"tags":["java","class","parsing","types"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1682811574,"post_id":76138900,"comment_id":134274272,"body_markdown":"Isn’t javalang source-only? To get class information you’d need to introspect the return value of the method (although in this case it’s `CSVFormat` because it’s using a fluent interface). *(There’s other ways the information could be gotten, for example, if you have the source for CSVFormat, you could find the method and its signature.)","body":"Isn’t javalang source-only? To get class information you’d need to introspect the return value of the method (although in this case it’s <code>CSVFormat</code> because it’s using a fluent interface). *(There’s other ways the information could be gotten, for example, if you have the source for CSVFormat, you could find the method and its signature.)"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1682821679,"post_id":76138900,"comment_id":134274976,"body_markdown":"Do you have a class path? If you just have the source file only, it is not possible in general. For example, consider `Foo.returnsBar().someBarMethod()`. To find out which class `someBarMethod()` belongs to, you have to find out what type `returnsBar()` returns, but `returnsBar` is declared in another file, or even, only in some .class file that is in the class path, and there is no source code for `Foo`.","body":"Do you have a class path? If you just have the source file only, it is not possible in general. For example, consider <code>Foo.returnsBar().someBarMethod()</code>. To find out which class <code>someBarMethod()</code> belongs to, you have to find out what type <code>returnsBar()</code> returns, but <code>returnsBar</code> is declared in another file, or even, only in some .class file that is in the class path, and there is no source code for <code>Foo</code>."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1682821818,"post_id":76138900,"comment_id":134274992,"body_markdown":"Either way, this is not a trivial thing to do at all. How about compiling the Java file first, then look into .class file to see where the methods belong? Each method call in bytecode needs to include the class where the method belongs, after all.","body":"Either way, this is not a trivial thing to do at all. How about compiling the Java file first, then look into .class file to see where the methods belong? Each method call in bytecode needs to include the class where the method belongs, after all."}],"owner":{"account_id":15931656,"reputation":2714,"user_id":11495796,"display_name":"Instein"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682828928,"creation_date":1682810401,"question_id":76138900,"body_markdown":"I was trying to parse a Java source file. \r\nFor example, for the following code:\r\n```java\r\n...\r\npublic void testHeaderMissingWithNull() throws Exception {\r\n   final Reader in = new StringReader(&quot;a,,c,,d\\n1,2,3,4\\nx,y,z,zz&quot;);\r\n   CSVFormat.DEFAULT.withHeader().withNullString(&quot;&quot;).withIgnoreEmptyHeaders(true).parse(in).iterator();\r\n}\r\n...\r\n```\r\nIs it possible to extract the fully qualified class name of the class where the method `withIgnoreEmptyHeaders` comes from?","title":"Extracting the Java class that a method belongs to for a method invocation when parsing Java source code","body":"<p>I was trying to parse a Java source file.\nFor example, for the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\npublic void testHeaderMissingWithNull() throws Exception {\n   final Reader in = new StringReader(&quot;a,,c,,d\\n1,2,3,4\\nx,y,z,zz&quot;);\n   CSVFormat.DEFAULT.withHeader().withNullString(&quot;&quot;).withIgnoreEmptyHeaders(true).parse(in).iterator();\n}\n...\n</code></pre>\n<p>Is it possible to extract the fully qualified class name of the class where the method <code>withIgnoreEmptyHeaders</code> comes from?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"score":0,"creation_date":1682769172,"post_id":76135521,"comment_id":134269446,"body_markdown":"What exactly goes wrong here? onSuccess() is not being called or what?","body":"What exactly goes wrong here? onSuccess() is not being called or what?"}],"owner":{"display_name":"user21771227"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682828919,"creation_date":1682761283,"question_id":76135521,"body_markdown":"I have created a collection in firebase how can I retrieve a field out of it?\r\n\r\n![Image For Reference](https://i.stack.imgur.com/YWPI6.png)\r\n\r\nIn this image how can I get mail into a string using java in android?\r\n\r\n```\r\nFirebaseFirestore store = FirebaseFirestore.getInstance();\r\n\r\nDocumentReference ref = store.collection(&quot;admin&quot;).document(&quot;nefEFEQGuQOl3RqhHmjnVbHvt133&quot;);\r\n\r\nref.get().addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n  @Override\r\n  public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n      if (documentSnapshot.exists()) {\r\n        Map&lt;String, Object&gt; data = documentSnapshot.getData();\r\n        String mail= (String) data.get(&quot;mail&quot;);\r\n        Toast.makeText(login_admin.this, mail, Toast.LENGTH_SHORT).show();\r\n        Log.d(TAG, &quot;Mail: &quot; + mail);\r\n      } else {\r\n         Log.d(TAG, &quot;No such document&quot;);\r\n        }\r\n  }\r\n});\r\n```\r\n\r\nI am trying to get a data snapshot of the collection but not getting the mail out of it.","title":"how to get data out of firestore into a string","body":"<p>I have created a collection in firebase how can I retrieve a field out of it?</p>\n<p><img src=\"https://i.stack.imgur.com/YWPI6.png\" alt=\"Image For Reference\" /></p>\n<p>In this image how can I get mail into a string using java in android?</p>\n<pre><code>FirebaseFirestore store = FirebaseFirestore.getInstance();\n\nDocumentReference ref = store.collection(&quot;admin&quot;).document(&quot;nefEFEQGuQOl3RqhHmjnVbHvt133&quot;);\n\nref.get().addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n  @Override\n  public void onSuccess(DocumentSnapshot documentSnapshot) {\n      if (documentSnapshot.exists()) {\n        Map&lt;String, Object&gt; data = documentSnapshot.getData();\n        String mail= (String) data.get(&quot;mail&quot;);\n        Toast.makeText(login_admin.this, mail, Toast.LENGTH_SHORT).show();\n        Log.d(TAG, &quot;Mail: &quot; + mail);\n      } else {\n         Log.d(TAG, &quot;No such document&quot;);\n        }\n  }\n});\n</code></pre>\n<p>I am trying to get a data snapshot of the collection but not getting the mail out of it.</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":2579198,"reputation":2760,"user_id":2236253,"display_name":"Vitaly"},"score":1,"creation_date":1365550417,"post_id":15827719,"comment_id":22667167,"body_markdown":"The only good looking reason for me: &quot;use an iterator and its remove method&quot;. If someone just wants to iterate and remove unneeded items from the list. Thanks.","body":"The only good looking reason for me: &quot;use an iterator and its remove method&quot;. If someone just wants to iterate and remove unneeded items from the list. Thanks."},{"owner":{"account_id":1394875,"reputation":829,"user_id":1324850,"accept_rate":80,"display_name":"12rad"},"score":0,"creation_date":1375219161,"post_id":15827719,"comment_id":26246207,"body_markdown":"@dystroy sorry to open this up, but i don&#39;t understand why you need to use an Iterator to remove an element from the ArrayList?","body":"@dystroy sorry to open this up, but i don&#39;t understand why you need to use an Iterator to remove an element from the ArrayList?"},{"owner":{"account_id":1394875,"reputation":829,"user_id":1324850,"accept_rate":80,"display_name":"12rad"},"score":0,"creation_date":1375219191,"post_id":15827719,"comment_id":26246224,"body_markdown":"@Vitaly I did a quick test \tList&lt;String&gt; a = new ArrayList&lt;String&gt;();\n\t\t\ta.add(&quot;a&quot;);\n\t\t\ta.add(&quot;b&quot;);\n\t\t\ta.add(&quot;c&quot;);\n\t\t\ta.add(&quot;d&quot;);\n\t\t\ta.add(&quot;e&quot;);\n\t\t\ta.remove(&quot;b&quot;); and it seems to work.","body":"@Vitaly I did a quick test \tList&lt;String&gt; a = new ArrayList&lt;String&gt;(); \t\t\ta.add(&quot;a&quot;); \t\t\ta.add(&quot;b&quot;); \t\t\ta.add(&quot;c&quot;); \t\t\ta.add(&quot;d&quot;); \t\t\ta.add(&quot;e&quot;); \t\t\ta.remove(&quot;b&quot;); and it seems to work."},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":1,"creation_date":1375252979,"post_id":15827719,"comment_id":26255849,"body_markdown":"@12rad If you loop over an arraylist, either directly or using an iterator, and at the same time you remove elements from the arraylist, you&#39;ll have problems (errors or a ConcurrentModificationException) if you don&#39;t use the specific remove method of the iterator.","body":"@12rad If you loop over an arraylist, either directly or using an iterator, and at the same time you remove elements from the arraylist, you&#39;ll have problems (errors or a ConcurrentModificationException) if you don&#39;t use the specific remove method of the iterator."},{"owner":{"account_id":1394875,"reputation":829,"user_id":1324850,"accept_rate":80,"display_name":"12rad"},"score":0,"creation_date":1375306732,"post_id":15827719,"comment_id":26288388,"body_markdown":"@dystroy  i see, so, it&#39;s only when i i&#39;m actually looping through. But if i just add elements and then remove one by a.remove(&quot;b), it&#39;s safe? -------- Like:List&lt;String&gt; a = new ArrayList&lt;String&gt;(); a.add(&quot;a&quot;); a.add(&quot;b&quot;); a.add(&quot;c&quot;); a.add(&quot;d&quot;); a.add(&quot;e&quot;); a.remove(&quot;b&quot;);","body":"@dystroy  i see, so, it&#39;s only when i i&#39;m actually looping through. But if i just add elements and then remove one by a.remove(&quot;b), it&#39;s safe? -------- Like:List&lt;String&gt; a = new ArrayList&lt;String&gt;(); a.add(&quot;a&quot;); a.add(&quot;b&quot;); a.add(&quot;c&quot;); a.add(&quot;d&quot;); a.add(&quot;e&quot;); a.remove(&quot;b&quot;);"}],"tags":[],"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"comment_count":5,"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1682825599,"creation_date":1365145120,"answer_id":15827719,"question_id":15827703,"body_markdown":"A big use case of iterators with ArrayLists is when you want to remove elements while iterating. You have only three safe solutions:\r\n\r\n- use an iterator and its `remove` method\r\n- copy the elements you want to keep to another list\r\n- juggle with indexes\r\n\r\nAssuming you don&#39;t `add` while iterating, using the iterator is a means to *avoid* the `ConcurrentModificationException`.\r\n\r\nThe readability argument is subjective. Personally I don&#39;t find a cleanly declared iterator less readable. And it doesn&#39;t really matter as the iterator is the safe way to iterate and remove at the same time.\r\n\r\n","title":"Do we ever need to use Iterators on ArrayList?","body":"<p>A big use case of iterators with ArrayLists is when you want to remove elements while iterating. You have only three safe solutions:</p>\n<ul>\n<li>use an iterator and its <code>remove</code> method</li>\n<li>copy the elements you want to keep to another list</li>\n<li>juggle with indexes</li>\n</ul>\n<p>Assuming you don't <code>add</code> while iterating, using the iterator is a means to <em>avoid</em> the <code>ConcurrentModificationException</code>.</p>\n<p>The readability argument is subjective. Personally I don't find a cleanly declared iterator less readable. And it doesn't really matter as the iterator is the safe way to iterate and remove at the same time.</p>\n"},{"comments":[{"owner":{"account_id":2579198,"reputation":2760,"user_id":2236253,"display_name":"Vitaly"},"score":0,"creation_date":1365147764,"post_id":15827760,"comment_id":22517637,"body_markdown":"Thanks. This is about ArrayList.","body":"Thanks. This is about ArrayList."}],"tags":[],"owner":{"account_id":137237,"reputation":13989,"user_id":341291,"accept_rate":76,"display_name":"Axel"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1365145276,"creation_date":1365145276,"answer_id":15827760,"question_id":15827703,"body_markdown":"Yes, we need. ArrayList is just an implementation of the List interface, so often your code will process a list and not even know that it&#39;s an ArrayList. Also, the new for-loop syntax uses iterators internally.","title":"Do we ever need to use Iterators on ArrayList?","body":"<p>Yes, we need. ArrayList is just an implementation of the List interface, so often your code will process a list and not even know that it's an ArrayList. Also, the new for-loop syntax uses iterators internally.</p>\n"},{"comments":[{"owner":{"account_id":2579198,"reputation":2760,"user_id":2236253,"display_name":"Vitaly"},"score":0,"creation_date":1365148025,"post_id":15827772,"comment_id":22517758,"body_markdown":"Thanks. We can use ArrayList.elementAt(), why not? :) Could you clarify what do you mean with &quot;the speed depends on the actual element values&quot;?","body":"Thanks. We can use ArrayList.elementAt(), why not? :) Could you clarify what do you mean with &quot;the speed depends on the actual element values&quot;?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1365162020,"post_id":15827772,"comment_id":22525414,"body_markdown":"@Vitaly Because then your code is `ArrayList`-specific, instead of being general to any `List.`","body":"@Vitaly Because then your code is <code>ArrayList</code>-specific, instead of being general to any <code>List.</code>"},{"owner":{"account_id":2579198,"reputation":2760,"user_id":2236253,"display_name":"Vitaly"},"score":0,"creation_date":1365167459,"post_id":15827772,"comment_id":22528659,"body_markdown":"It&#39;s not &quot;my code&quot; :) and the questions is about if we know it&#39;s ArrayList.","body":"It&#39;s not &quot;my code&quot; :) and the questions is about if we know it&#39;s ArrayList."}],"tags":[],"owner":{"account_id":416547,"reputation":91914,"user_id":791998,"accept_rate":80,"display_name":"Petar Ivanov"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365217599,"creation_date":1365145322,"answer_id":15827772,"question_id":15827703,"body_markdown":"You are probably talking about explicitly using an iterator (since the : operator is also using the iterator behind the scenes).\r\n\r\nSay you want to have two &quot;pointers&quot; going over the array but the speed depends on the actual element values.\r\nHow would you do this without explicitly using iterators (and without elementAt of course).\r\n\r\nFor example (pseudo code):\r\n\r\n    element1 = first element;\r\n    element2 = first element;\r\n    while(element1.hasNext &amp;&amp; element2.hasNext)\r\n    {\r\n        if(element1 * 2 &lt; element)\r\n        {\r\n            element2 = element2.next;\r\n        }\r\n        else\r\n        {\r\n            element1 = element1.next;\r\n        }\r\n        \r\n        //do something with the pair of elements\r\n    }","title":"Do we ever need to use Iterators on ArrayList?","body":"<p>You are probably talking about explicitly using an iterator (since the : operator is also using the iterator behind the scenes).</p>\n\n<p>Say you want to have two \"pointers\" going over the array but the speed depends on the actual element values.\nHow would you do this without explicitly using iterators (and without elementAt of course).</p>\n\n<p>For example (pseudo code):</p>\n\n<pre><code>element1 = first element;\nelement2 = first element;\nwhile(element1.hasNext &amp;&amp; element2.hasNext)\n{\n    if(element1 * 2 &lt; element)\n    {\n        element2 = element2.next;\n    }\n    else\n    {\n        element1 = element1.next;\n    }\n\n    //do something with the pair of elements\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1365153196,"creation_date":1365153196,"answer_id":15830022,"question_id":15827703,"body_markdown":"&gt; The code is much less readable with iterators.\r\n\r\nThat&#39;s entirely your opinion, and I don&#39;t share it.\r\n\r\n&gt; There is a possibility to raise ConcurrentModificationException that is hard to debug.\r\n\r\nThat possibly exists whether you use Iterators or not. That exception tells you something useful about your code that you might otherwise miss altogether, which is even harder to debug.\r\n\r\nPersonally I prefer being able to write exactly the code as between ArrayList and LinkedList, and having the compiler or the API implement the details.\r\n\r\nThe moral is that you shouldn&#39;t pass off your own unsupported opinion as established fact.","title":"Do we ever need to use Iterators on ArrayList?","body":"<blockquote>\n  <p>The code is much less readable with iterators.</p>\n</blockquote>\n\n<p>That's entirely your opinion, and I don't share it.</p>\n\n<blockquote>\n  <p>There is a possibility to raise ConcurrentModificationException that is hard to debug.</p>\n</blockquote>\n\n<p>That possibly exists whether you use Iterators or not. That exception tells you something useful about your code that you might otherwise miss altogether, which is even harder to debug.</p>\n\n<p>Personally I prefer being able to write exactly the code as between ArrayList and LinkedList, and having the compiler or the API implement the details.</p>\n\n<p>The moral is that you shouldn't pass off your own unsupported opinion as established fact.</p>\n"},{"tags":[],"owner":{"account_id":2868714,"reputation":53,"user_id":2462475,"display_name":"user2462475"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380773601,"creation_date":1380773601,"answer_id":19150623,"question_id":15827703,"body_markdown":"Check this post: \r\nhttp://www.xyzws.com/javafaq/what-is-the-advantage-of-using-an-iterator-compared-to-the-getindex-method/19\r\n\r\nUsing iterator will avoid the mistake of using get(index) on LinkedList(extremely slow). It makes sense when the implementation of list is unknown, just use iterator. Regarding ArrayList, using iterator will still achieve the closest possible performance with get(index).\r\n\r\nSo it is a good practice to use iterator for iterating in terms of performance.","title":"Do we ever need to use Iterators on ArrayList?","body":"<p>Check this post: \n<a href=\"http://www.xyzws.com/javafaq/what-is-the-advantage-of-using-an-iterator-compared-to-the-getindex-method/19\" rel=\"nofollow\">http://www.xyzws.com/javafaq/what-is-the-advantage-of-using-an-iterator-compared-to-the-getindex-method/19</a></p>\n\n<p>Using iterator will avoid the mistake of using get(index) on LinkedList(extremely slow). It makes sense when the implementation of list is unknown, just use iterator. Regarding ArrayList, using iterator will still achieve the closest possible performance with get(index).</p>\n\n<p>So it is a good practice to use iterator for iterating in terms of performance.</p>\n"},{"comments":[{"owner":{"display_name":"user9797940"},"score":0,"creation_date":1609968853,"post_id":27984817,"comment_id":115989571,"body_markdown":"I know this is old, but I&#39;m going to comment this anyway. your statement `you shouldn&#39;t return a reference to the array, but instead return its iterator. One can get any item from the array, but it can&#39;t manipulate the original array.` holds true for the regular good old `Iterator`, however the `ListIterator` can add more elements to the original list.","body":"I know this is old, but I&#39;m going to comment this anyway. your statement <code>you shouldn&#39;t return a reference to the array, but instead return its iterator. One can get any item from the array, but it can&#39;t manipulate the original array.</code> holds true for the regular good old <code>Iterator</code>, however the <code>ListIterator</code> can add more elements to the original list."}],"tags":[],"owner":{"account_id":3399239,"reputation":1237,"user_id":2851945,"accept_rate":92,"display_name":"David"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1421414260,"creation_date":1421414260,"answer_id":27984817,"question_id":15827703,"body_markdown":"None of the answers seem to adres the reason for iterators. The iterator design pattern was created because an object should be in control of its own state ( except maybe value objects with only public properties ). \r\n\r\nLets say we have an object that contains an array, and you have an interface in that object to add items to that array. But you have do something like this:\r\n\r\n    class MyClass\r\n    {\r\n        private ArrayList&lt;Item&gt; myList;\r\n        \r\n        public MyClass()\r\n        {\r\n            myList = new ArrayList();\r\n        }\r\n\r\n        public addItem( Item item )\r\n        {\r\n             item.doSomething(); // Lets say that this is very important before adding the item to the array.\r\n             myList.add( item );\r\n        }\r\n    }\r\n\r\nNow if i had this method in the class above:\r\n\r\n    public ArrayList getList()\r\n    {\r\n        return myList;\r\n    }\r\n\r\nSomebody could get the reference to myList through this method and add items to the array, **without** calling item.doSomething(); That&#39;s why you shouldn&#39;t return a reference to the array, but instead return its iterator. One can get any item from the array, but it can&#39;t manipulate the original array. So the MyClass object is still in control of it&#39;s own state. \r\n\r\nThis is the real reason why iterators were invented. \r\n\r\n\r\n\r\n","title":"Do we ever need to use Iterators on ArrayList?","body":"<p>None of the answers seem to adres the reason for iterators. The iterator design pattern was created because an object should be in control of its own state ( except maybe value objects with only public properties ). </p>\n\n<p>Lets say we have an object that contains an array, and you have an interface in that object to add items to that array. But you have do something like this:</p>\n\n<pre><code>class MyClass\n{\n    private ArrayList&lt;Item&gt; myList;\n\n    public MyClass()\n    {\n        myList = new ArrayList();\n    }\n\n    public addItem( Item item )\n    {\n         item.doSomething(); // Lets say that this is very important before adding the item to the array.\n         myList.add( item );\n    }\n}\n</code></pre>\n\n<p>Now if i had this method in the class above:</p>\n\n<pre><code>public ArrayList getList()\n{\n    return myList;\n}\n</code></pre>\n\n<p>Somebody could get the reference to myList through this method and add items to the array, <strong>without</strong> calling item.doSomething(); That's why you shouldn't return a reference to the array, but instead return its iterator. One can get any item from the array, but it can't manipulate the original array. So the MyClass object is still in control of it's own state. </p>\n\n<p>This is the real reason why iterators were invented. </p>\n"}],"owner":{"account_id":2579198,"reputation":2760,"user_id":2236253,"display_name":"Vitaly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8624,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":15827719,"answer_count":6,"score":15,"last_activity_date":1682827283,"creation_date":1365145032,"question_id":15827703,"body_markdown":"Yesterday, when I was answering to question https://stackoverflow.com/q/15822810/2236253 I added a notice that\r\n\r\n&gt; It&#39;s not a good idea to use iterators when you have ArrayLists.\r\n\r\nYou do not need to deeply understand that question to answer on that one.\r\n\r\n\r\nThere, I got two comments that I&#39;m wrong.\r\n\r\nMy arguments:\r\n\r\n1. The code is much less readable with iterators.\r\n\r\n2. There is a possibility to raise ConcurrentModificationException that is hard to debug.\r\n\r\n\r\nCan you please explain?\r\n\r\nQuestion:\r\nDo we ever need to *explicitly* use Iterators on ArrayList?\r\n","title":"Do we ever need to use Iterators on ArrayList?","body":"<p>Yesterday, when I was answering to question <a href=\"https://stackoverflow.com/q/15822810/2236253\">getting ConcurrentModificationException error while using iterator and remove</a> I added a notice that</p>\n<blockquote>\n<p>It's not a good idea to use iterators when you have ArrayLists.</p>\n</blockquote>\n<p>You do not need to deeply understand that question to answer on that one.</p>\n<p>There, I got two comments that I'm wrong.</p>\n<p>My arguments:</p>\n<ol>\n<li><p>The code is much less readable with iterators.</p>\n</li>\n<li><p>There is a possibility to raise ConcurrentModificationException that is hard to debug.</p>\n</li>\n</ol>\n<p>Can you please explain?</p>\n<p>Question:\nDo we ever need to <em>explicitly</em> use Iterators on ArrayList?</p>\n"},{"tags":["java","arrays","multidimensional-array"],"answers":[{"comments":[{"owner":{"account_id":28456719,"reputation":1,"user_id":21774026,"display_name":"toad"},"score":0,"creation_date":1682808006,"post_id":76138738,"comment_id":134274016,"body_markdown":"So i added and got the same result. Could this be because of the split delimiter?","body":"So i added and got the same result. Could this be because of the split delimiter?"},{"owner":{"account_id":21251572,"reputation":129,"user_id":15633731,"display_name":"Yosef.Schwartz"},"score":0,"creation_date":1682808080,"post_id":76138738,"comment_id":134274019,"body_markdown":"My answer is wrong, you new insert a delimiter different from space. \n\nYou should inser for exapmle dollar sign, and the iterate over 2d array, the first is split by $, and the second on by space.  \n\nI will fix my answer","body":"My answer is wrong, you new insert a delimiter different from space.   You should inser for exapmle dollar sign, and the iterate over 2d array, the first is split by $, and the second on by space.    I will fix my answer"},{"owner":{"account_id":28456719,"reputation":1,"user_id":21774026,"display_name":"toad"},"score":0,"creation_date":1682808476,"post_id":76138738,"comment_id":134274059,"body_markdown":"I dont know how to do that. Sorry im new to coding. I just want to be able to skip the first column entirely and then find the sum of column 2 add it to array[0], sum of column 3 add it to array[1] and so on. Any easy way to do this?","body":"I dont know how to do that. Sorry im new to coding. I just want to be able to skip the first column entirely and then find the sum of column 2 add it to array[0], sum of column 3 add it to array[1] and so on. Any easy way to do this?"}],"tags":[],"owner":{"account_id":21251572,"reputation":129,"user_id":15633731,"display_name":"Yosef.Schwartz"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682809311,"creation_date":1682807518,"answer_id":76138738,"question_id":76138709,"body_markdown":"Your `fileRead` variable get the first line, and in the second line it concatenations the second line immediately, so the string look like this:\r\n\r\n..90002 1 ..\r\n\r\n\r\nYou just need insert a space in the while loop.\r\n\r\n    while(reader.hasNextLine())\r\n                fileRead += reader.nextLine();\r\n                fileRead += “ “;\r\n\r\nEDIT\r\n\r\n\r\n    while(reader.hasNextLine()){\r\n        fileRead += reader.nextLine();\r\n        fileRead +=‘$’;\r\n   \r\n\r\n    String line = fileRead;\r\n    String[] infoRow = line.split(&quot;$&quot;);\r\n    int[] results = new int[9];\r\n\r\n    for (int i = 0; i&lt; infoRow.length;i++){\r\n            string[] info = infoRow[i].split(&quot; &quot;);\r\n            for (int j = 1; j &lt; info.length; j++){\r\n                  results[j-1] += Integer.parseInt(info[j]);  \r\n                }\r\n        }\r\n    for (int i = 0; i&lt; results.length;i++){\r\n        System.out.println(results[i]);\r\n    }","title":"Read text file that has a 2d array and find the sum of each column and add the sum into an array","body":"<p>Your <code>fileRead</code> variable get the first line, and in the second line it concatenations the second line immediately, so the string look like this:</p>\n<p>..90002 1 ..</p>\n<p>You just need insert a space in the while loop.</p>\n<pre><code>while(reader.hasNextLine())\n            fileRead += reader.nextLine();\n            fileRead += “ “;\n</code></pre>\n<p>EDIT</p>\n<pre><code>while(reader.hasNextLine()){\n    fileRead += reader.nextLine();\n    fileRead +=‘$’;\n\n\nString line = fileRead;\nString[] infoRow = line.split(&quot;$&quot;);\nint[] results = new int[9];\n\nfor (int i = 0; i&lt; infoRow.length;i++){\n        string[] info = infoRow[i].split(&quot; &quot;);\n        for (int j = 1; j &lt; info.length; j++){\n              results[j-1] += Integer.parseInt(info[j]);  \n            }\n    }\nfor (int i = 0; i&lt; results.length;i++){\n    System.out.println(results[i]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682826382,"creation_date":1682824067,"answer_id":76139363,"question_id":76138709,"body_markdown":"There are many ways to do this. Here is one way that does it as you process the input file.\r\n```\r\nint[] sums = computeSums(&quot;C:\\\\Users\\\\Tommy\\\\Documents\\\\day.txt&quot;);\r\nSystem.out.println(Arrays.toString(sums));\r\n```\r\nprints\r\n```\r\n[4, 7, 10, 13, 16, 19, 22, 25, 28]\r\n\r\n```\r\nHere is how the file is processed.\r\n\r\n- Continue doing the following lines while lines are available for processing.\r\n  - if the `sums` field is null, this is first time thru so read in the first line, skipping the first int, and then using streams, create an `int array` which is assigned to `sums`.\r\n  - otherwise, skip the first `int` of the following lines and read the rest of the line as ints adding them to the corresponding sums column.\r\n```\r\npublic static int[] computeSums(String fileName) {\r\n     int[] sums = null;\r\n\r\n     try {\r\n         Scanner scanner = new Scanner(new File(fileName));\r\n\r\n         while (scanner.hasNextLine()) {\r\n             scanner.nextInt(); // skip first value\r\n             // read in the next line, trimming leading white space, to ensure\r\n             // splitting on int boundaries. Then use the String array to get proper size\r\n             // the sums array.\r\n             \r\n             if (sums == null) {\r\n                 String[] vals = scanner.nextLine().trim().split(&quot;\\\\s+&quot;);\r\n                 sums = new int[vals.length];\r\n                 \r\n             // now populate the sums array with the first row (line) of the file\r\n                 int i = 0;\r\n                 for (String val : vals) {\r\n                     sums[i++] = Integer.parseInt(val);\r\n                 }\r\n             } else {\r\n             // from now until the end of the file, simply read the next value\r\n             // and add to the corresponding sums column\r\n                 for (int i = 0; i &lt; sums.length; i++) {\r\n                     sums[i] += scanner.nextInt();\r\n                 }\r\n             }\r\n         }\r\n        \r\n     } catch (FileNotFoundException fnfe) {\r\n         fnfe.printStackTrace();\r\n     }\r\n     return sums;\r\n}\r\n```\r\nNote:  Since you didn&#39;t specify how to handle different row lengths of the same 2D array, this only works if array is rectangular.  Otherwise an `IndexOutOfBoundsException` will be thrown.","title":"Read text file that has a 2d array and find the sum of each column and add the sum into an array","body":"<p>There are many ways to do this. Here is one way that does it as you process the input file.</p>\n<pre><code>int[] sums = computeSums(&quot;C:\\\\Users\\\\Tommy\\\\Documents\\\\day.txt&quot;);\nSystem.out.println(Arrays.toString(sums));\n</code></pre>\n<p>prints</p>\n<pre><code>[4, 7, 10, 13, 16, 19, 22, 25, 28]\n\n</code></pre>\n<p>Here is how the file is processed.</p>\n<ul>\n<li>Continue doing the following lines while lines are available for processing.\n<ul>\n<li>if the <code>sums</code> field is null, this is first time thru so read in the first line, skipping the first int, and then using streams, create an <code>int array</code> which is assigned to <code>sums</code>.</li>\n<li>otherwise, skip the first <code>int</code> of the following lines and read the rest of the line as ints adding them to the corresponding sums column.</li>\n</ul>\n</li>\n</ul>\n<pre><code>public static int[] computeSums(String fileName) {\n     int[] sums = null;\n\n     try {\n         Scanner scanner = new Scanner(new File(fileName));\n\n         while (scanner.hasNextLine()) {\n             scanner.nextInt(); // skip first value\n             // read in the next line, trimming leading white space, to ensure\n             // splitting on int boundaries. Then use the String array to get proper size\n             // the sums array.\n             \n             if (sums == null) {\n                 String[] vals = scanner.nextLine().trim().split(&quot;\\\\s+&quot;);\n                 sums = new int[vals.length];\n                 \n             // now populate the sums array with the first row (line) of the file\n                 int i = 0;\n                 for (String val : vals) {\n                     sums[i++] = Integer.parseInt(val);\n                 }\n             } else {\n             // from now until the end of the file, simply read the next value\n             // and add to the corresponding sums column\n                 for (int i = 0; i &lt; sums.length; i++) {\n                     sums[i] += scanner.nextInt();\n                 }\n             }\n         }\n        \n     } catch (FileNotFoundException fnfe) {\n         fnfe.printStackTrace();\n     }\n     return sums;\n}\n</code></pre>\n<p>Note:  Since you didn't specify how to handle different row lengths of the same 2D array, this only works if array is rectangular.  Otherwise an <code>IndexOutOfBoundsException</code> will be thrown.</p>\n"}],"owner":{"account_id":28456719,"reputation":1,"user_id":21774026,"display_name":"toad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682826382,"creation_date":1682806894,"question_id":76138709,"body_markdown":"Hey guys I want to read a text file that has multiple number similar to a 2d array. I want to find the sum of each column and add it into my int array. I also want to skip the first column and not add it into my int array. For example:\r\n- 0001 1 2 3 4 5 6 7 8 9\r\n- 0002 1 2 3 4 5 6 7 8 9\r\n- 0003 2 3 4 5 6 7 8 9 10\r\n\r\nSo this would be my text file. I want to read this but skip the first column and add the rest of the column into an int array. So I want my int array\\[\\] to look like\r\n- int array[0] = 4\r\n- int array[1] = 7\r\n- int array[2] = 10\r\n- int array[3] = 13\r\n- int array[4] = 16\r\n- int array[5] = 19\r\n- int array[6] = 22\r\n- int array[7] = 25\r\n- int array[8] = 28\r\n\r\nSo far i have this:\r\n\r\n```java\r\n\r\npublic static void main(String[] args) throws FileNotFoundException\r\n\t{\r\n\t\tString fileRead = &quot;&quot;;\r\n\t\tint[][] num = null;\r\n\t\tFile file = new File(&quot;C:\\\\Users\\\\Tommy\\\\Documents\\\\day.txt&quot;);\r\n\t\tScanner reader = new Scanner(file);\r\n\t\twhile(reader.hasNextLine())\r\n\t\t\tfileRead += reader.nextLine();\r\n\t\tString line = fileRead;\r\n\t\tString[] info = line.split(&quot; &quot;);\r\n\t\tfor (int i = 1; i &lt; info.length; i++)\r\n\t\t{\r\n\t\t\tSystem.out.println(info[i]);\t\t\r\n\t\t}\r\n}\r\n```\r\n\r\nMy code isnt finished because i dont know how to add column. But so far its printing the first row and skipping 0001. but then it prints the second row and doesnt skip 0002. So the output for my code so far looks like:\r\n\r\n- 1\r\n- 2\r\n- 3\r\n- 4\r\n- 5\r\n- 6\r\n- 7\r\n- 8\r\n\r\nbut then it prints\r\n- 90002\r\n- 1\r\n- 2\r\n- 3\r\n- 4\r\n\r\netc.\r\nAny clue on how i can solve this?","title":"Read text file that has a 2d array and find the sum of each column and add the sum into an array","body":"<p>Hey guys I want to read a text file that has multiple number similar to a 2d array. I want to find the sum of each column and add it into my int array. I also want to skip the first column and not add it into my int array. For example:</p>\n<ul>\n<li>0001 1 2 3 4 5 6 7 8 9</li>\n<li>0002 1 2 3 4 5 6 7 8 9</li>\n<li>0003 2 3 4 5 6 7 8 9 10</li>\n</ul>\n<p>So this would be my text file. I want to read this but skip the first column and add the rest of the column into an int array. So I want my int array[] to look like</p>\n<ul>\n<li>int array[0] = 4</li>\n<li>int array[1] = 7</li>\n<li>int array[2] = 10</li>\n<li>int array[3] = 13</li>\n<li>int array[4] = 16</li>\n<li>int array[5] = 19</li>\n<li>int array[6] = 22</li>\n<li>int array[7] = 25</li>\n<li>int array[8] = 28</li>\n</ul>\n<p>So far i have this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic static void main(String[] args) throws FileNotFoundException\n    {\n        String fileRead = &quot;&quot;;\n        int[][] num = null;\n        File file = new File(&quot;C:\\\\Users\\\\Tommy\\\\Documents\\\\day.txt&quot;);\n        Scanner reader = new Scanner(file);\n        while(reader.hasNextLine())\n            fileRead += reader.nextLine();\n        String line = fileRead;\n        String[] info = line.split(&quot; &quot;);\n        for (int i = 1; i &lt; info.length; i++)\n        {\n            System.out.println(info[i]);        \n        }\n}\n</code></pre>\n<p>My code isnt finished because i dont know how to add column. But so far its printing the first row and skipping 0001. but then it prints the second row and doesnt skip 0002. So the output for my code so far looks like:</p>\n<ul>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n<li>4</li>\n<li>5</li>\n<li>6</li>\n<li>7</li>\n<li>8</li>\n</ul>\n<p>but then it prints</p>\n<ul>\n<li>90002</li>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n<li>4</li>\n</ul>\n<p>etc.\nAny clue on how i can solve this?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","java-17"],"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682826366,"creation_date":1682826045,"question_id":76139430,"body_markdown":"By example, have a `roles` table:\r\n\r\n```sql\r\nCREATE TABLE public.roles (\r\n  id bigserial NOT NULL PRIMARY KEY,\r\n  role_parent_id bigint NULL DEFAULT NULL REFERENCES public.roles(id) ON DELETE CASCADE ON UPDATE CASCADE,\r\n  name varchar(64) NOT NULL UNIQUE\r\n);\r\n```\r\n\r\nIn the entity `DAO` have this code:\r\n\r\n```java\r\n@Entity\r\n@Table(name=&quot;roles&quot;)\r\npublic class RoleDAO {\r\n  // ...\r\n\r\n  @ManyToOne\r\n  @JoinColumn(name=&quot;role_parent_id&quot;)\r\n  private RoleDAO parentRole;\r\n```\r\n\r\nWhen need list all roles in a rest controller the example expected is show each root and child roles:\r\n\r\n```json\r\n[\r\n    { id: 1, name: &quot;Role 1&quot;, roles: [ ] },\r\n    { id: 2, name: &quot;Role 2&quot;, roles: [\r\n        { id: 3, name &quot;Role 3&quot;, roles: [ ] }\r\n    ] }\r\n]\r\n```\r\n\r\nBut when call `findAll` method of the `JpaRepository` return all roles with the parent, instead of that i need the child of each role. How to create `childRoles` array into `RoleDAO` entity?","title":"How to get child objects of record using table join on Java Spring Boot?","body":"<p>By example, have a <code>roles</code> table:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE public.roles (\n  id bigserial NOT NULL PRIMARY KEY,\n  role_parent_id bigint NULL DEFAULT NULL REFERENCES public.roles(id) ON DELETE CASCADE ON UPDATE CASCADE,\n  name varchar(64) NOT NULL UNIQUE\n);\n</code></pre>\n<p>In the entity <code>DAO</code> have this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name=&quot;roles&quot;)\npublic class RoleDAO {\n  // ...\n\n  @ManyToOne\n  @JoinColumn(name=&quot;role_parent_id&quot;)\n  private RoleDAO parentRole;\n</code></pre>\n<p>When need list all roles in a rest controller the example expected is show each root and child roles:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    { id: 1, name: &quot;Role 1&quot;, roles: [ ] },\n    { id: 2, name: &quot;Role 2&quot;, roles: [\n        { id: 3, name &quot;Role 3&quot;, roles: [ ] }\n    ] }\n]\n</code></pre>\n<p>But when call <code>findAll</code> method of the <code>JpaRepository</code> return all roles with the parent, instead of that i need the child of each role. How to create <code>childRoles</code> array into <code>RoleDAO</code> entity?</p>\n"},{"tags":["java","azure-functions","azure-eventgrid","appinsights"],"owner":{"account_id":98618,"reputation":13889,"user_id":266827,"accept_rate":78,"display_name":"Sandy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682825113,"creation_date":1682747052,"question_id":76134700,"body_markdown":"I am trying to write an Azure Function that would be triggered by EventGrid. I have been following the official documentation and stood up required resources. EventGrid topic, Function App, AppInsight etc. I wrote an basic function that just logs the message that it has been invoked. When I sent the message to topic, I can see the matrices of topic and subscription but all of them indicate that all messages were failed. App insight logs says the app is invoked but I don&#39;t see the messages in log analytics&#39;s `trace` table. I added custom logger but still same result. Not only the logs are not present in log analytics the app insight logs says function is timing out, considering there is no business logic in the function why is it running for that long.\r\n\r\nMy intention of this function was to learn function app, but now I am lost in trying to find the issue. I am trying to understand \r\n\r\n1. Why all invocations failed(snapshot below).\r\n\r\n[![enter image description here][1]][1]\r\n\r\n2. Why it is timing out when there is no business logic.\r\n\r\nI would really appreciate some inputs here on what I am missing or doing wrong. Some helpful snapshots are below.\r\n\r\n**Before adding loggers class looks like this**\r\n[![enter image description here][2]][2]\r\n \r\n\r\n**After adding loggers class looks like this**\r\n[![enter image description here][3]][3]\r\n\r\n**Logger configuration**\r\n[![enter image description here][4]][4]\r\n\r\n**Message I am sending to topic**\r\n\r\n        [{\r\n      &quot;id&quot;: &quot;123&quot;,\r\n      &quot;eventType&quot;: &quot;Type&quot;,\r\n      &quot;subject&quot;: &quot;Subject&quot;,\r\n      &quot;eventTime&quot;: &quot;2023-01-10T21:03:07+00:00&quot;,\r\n      &quot;data&quot;: {\r\n        &quot;SourceBlobUrl&quot;: &quot;Source&quot;,\r\n        &quot;DestinationBlobUrl&quot;: &quot;Destination&quot;\r\n      },\r\n      &quot;dataVersion&quot;: &quot;1.0&quot;,\r\n      &quot;metadataVersion&quot;: &quot;1&quot;,\r\n      &quot;topic&quot;: &quot;/subscriptions/***/resourceGroups/***/providers/Microsoft.EventGrid/topics/topic&quot;\r\n    }]\r\n\r\n**host.json**\r\n\r\n    {\r\n      &quot;version&quot;: &quot;2.0&quot;,\r\n      &quot;functionTimeout&quot;: &quot;00:10:00&quot;,\r\n      &quot;extensionBundle&quot;: {\r\n        &quot;id&quot;: &quot;Microsoft.Azure.Functions.ExtensionBundle&quot;,\r\n        &quot;version&quot;: &quot;[4.*, 5.0.0)&quot;\r\n      },\r\n      &quot;logging&quot;: {\r\n        &quot;fileLoggingMode&quot;: &quot;always&quot;,\r\n        &quot;logLevel&quot;: {\r\n          &quot;default&quot;: &quot;Information&quot;,\r\n          &quot;Host.Results&quot;: &quot;Error&quot;,\r\n          &quot;Function.BlobCopy&quot;: &quot;Warning&quot;,\r\n          &quot;Host.Aggregator&quot;: &quot;Trace&quot;\r\n        },\r\n        &quot;applicationInsights&quot;: {\r\n          &quot;enableLiveMetrics&quot;: true,\r\n          &quot;enableDependencyTracking&quot;: true,\r\n          &quot;enablePerformanceCountersCollection&quot;: true,\r\n          &quot;httpAutoCollectionOptions&quot;: {\r\n            &quot;enableHttpTriggerExtendedInfoCollection&quot;: true,\r\n            &quot;enableW3CDistributedTracing&quot;: true,\r\n            &quot;enableResponseHeaderInjection&quot;: true\r\n          }\r\n        }\r\n      },\r\n      &quot;healthMonitor&quot;: {\r\n        &quot;enabled&quot;: true,\r\n        &quot;healthCheckInterval&quot;: &quot;00:00:30&quot;,\r\n        &quot;healthCheckWindow&quot;: &quot;00:02:00&quot;,\r\n        &quot;healthCheckThreshold&quot;: 6,\r\n        &quot;counterThreshold&quot;: 0.80\r\n      }\r\n    }\r\n\r\n**Exception Stack**\r\n\r\n    [\r\n        {\r\n            &quot;severityLevel&quot;: &quot;Error&quot;,\r\n            &quot;outerId&quot;: &quot;0&quot;,\r\n            &quot;message&quot;: &quot;Timeout value of 00:10:00 was exceeded by function: Functions.BlobCopy&quot;,\r\n            &quot;type&quot;: &quot;Microsoft.Azure.WebJobs.Host.FunctionTimeoutException&quot;,\r\n            &quot;id&quot;: &quot;1793742&quot;,\r\n            &quot;parsedStack&quot;: [\r\n                {\r\n                    &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\r\n                    &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;TryHandleTimeoutAsync&gt;d__35.MoveNext&quot;,\r\n                    &quot;level&quot;: 0,\r\n                    &quot;line&quot;: 663,\r\n                    &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\r\n                    &quot;level&quot;: 1,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess&quot;,\r\n                    &quot;level&quot;: 2,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification&quot;,\r\n                    &quot;level&quot;: 3,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\r\n                    &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;InvokeWithTimeoutAsync&gt;d__33.MoveNext&quot;,\r\n                    &quot;level&quot;: 4,\r\n                    &quot;line&quot;: 571,\r\n                    &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\r\n                    &quot;level&quot;: 5,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess&quot;,\r\n                    &quot;level&quot;: 6,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification&quot;,\r\n                    &quot;level&quot;: 7,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\r\n                    &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;ExecuteWithWatchersAsync&gt;d__32.MoveNext&quot;,\r\n                    &quot;level&quot;: 8,\r\n                    &quot;line&quot;: 527,\r\n                    &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\r\n                    &quot;level&quot;: 9,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess&quot;,\r\n                    &quot;level&quot;: 10,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification&quot;,\r\n                    &quot;level&quot;: 11,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\r\n                    &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;ExecuteWithLoggingAsync&gt;d__26.MoveNext&quot;,\r\n                    &quot;level&quot;: 12,\r\n                    &quot;line&quot;: 306,\r\n                    &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\r\n                    &quot;level&quot;: 13,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\r\n                    &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;ExecuteWithLoggingAsync&gt;d__26.MoveNext&quot;,\r\n                    &quot;level&quot;: 14,\r\n                    &quot;line&quot;: 352,\r\n                    &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\r\n                    &quot;level&quot;: 15,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess&quot;,\r\n                    &quot;level&quot;: 16,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\r\n                    &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification&quot;,\r\n                    &quot;level&quot;: 17,\r\n                    &quot;line&quot;: 0\r\n                },\r\n                {\r\n                    &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\r\n                    &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;TryExecuteAsync&gt;d__18.MoveNext&quot;,\r\n                    &quot;level&quot;: 18,\r\n                    &quot;line&quot;: 108,\r\n                    &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n\r\n  [1]: https://i.stack.imgur.com/AAWZq.png\r\n  [2]: https://i.stack.imgur.com/9lgao.png\r\n  [3]: https://i.stack.imgur.com/iaO84.png\r\n  [4]: https://i.stack.imgur.com/RM74J.png","title":"Java Azure Function With EventGrid Trigger Timing Out","body":"<p>I am trying to write an Azure Function that would be triggered by EventGrid. I have been following the official documentation and stood up required resources. EventGrid topic, Function App, AppInsight etc. I wrote an basic function that just logs the message that it has been invoked. When I sent the message to topic, I can see the matrices of topic and subscription but all of them indicate that all messages were failed. App insight logs says the app is invoked but I don't see the messages in log analytics's <code>trace</code> table. I added custom logger but still same result. Not only the logs are not present in log analytics the app insight logs says function is timing out, considering there is no business logic in the function why is it running for that long.</p>\n<p>My intention of this function was to learn function app, but now I am lost in trying to find the issue. I am trying to understand</p>\n<ol>\n<li>Why all invocations failed(snapshot below).</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/AAWZq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AAWZq.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"2\">\n<li>Why it is timing out when there is no business logic.</li>\n</ol>\n<p>I would really appreciate some inputs here on what I am missing or doing wrong. Some helpful snapshots are below.</p>\n<p><strong>Before adding loggers class looks like this</strong>\n<a href=\"https://i.stack.imgur.com/9lgao.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9lgao.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>After adding loggers class looks like this</strong>\n<a href=\"https://i.stack.imgur.com/iaO84.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iaO84.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Logger configuration</strong>\n<a href=\"https://i.stack.imgur.com/RM74J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RM74J.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Message I am sending to topic</strong></p>\n<pre><code>    [{\n  &quot;id&quot;: &quot;123&quot;,\n  &quot;eventType&quot;: &quot;Type&quot;,\n  &quot;subject&quot;: &quot;Subject&quot;,\n  &quot;eventTime&quot;: &quot;2023-01-10T21:03:07+00:00&quot;,\n  &quot;data&quot;: {\n    &quot;SourceBlobUrl&quot;: &quot;Source&quot;,\n    &quot;DestinationBlobUrl&quot;: &quot;Destination&quot;\n  },\n  &quot;dataVersion&quot;: &quot;1.0&quot;,\n  &quot;metadataVersion&quot;: &quot;1&quot;,\n  &quot;topic&quot;: &quot;/subscriptions/***/resourceGroups/***/providers/Microsoft.EventGrid/topics/topic&quot;\n}]\n</code></pre>\n<p><strong>host.json</strong></p>\n<pre><code>{\n  &quot;version&quot;: &quot;2.0&quot;,\n  &quot;functionTimeout&quot;: &quot;00:10:00&quot;,\n  &quot;extensionBundle&quot;: {\n    &quot;id&quot;: &quot;Microsoft.Azure.Functions.ExtensionBundle&quot;,\n    &quot;version&quot;: &quot;[4.*, 5.0.0)&quot;\n  },\n  &quot;logging&quot;: {\n    &quot;fileLoggingMode&quot;: &quot;always&quot;,\n    &quot;logLevel&quot;: {\n      &quot;default&quot;: &quot;Information&quot;,\n      &quot;Host.Results&quot;: &quot;Error&quot;,\n      &quot;Function.BlobCopy&quot;: &quot;Warning&quot;,\n      &quot;Host.Aggregator&quot;: &quot;Trace&quot;\n    },\n    &quot;applicationInsights&quot;: {\n      &quot;enableLiveMetrics&quot;: true,\n      &quot;enableDependencyTracking&quot;: true,\n      &quot;enablePerformanceCountersCollection&quot;: true,\n      &quot;httpAutoCollectionOptions&quot;: {\n        &quot;enableHttpTriggerExtendedInfoCollection&quot;: true,\n        &quot;enableW3CDistributedTracing&quot;: true,\n        &quot;enableResponseHeaderInjection&quot;: true\n      }\n    }\n  },\n  &quot;healthMonitor&quot;: {\n    &quot;enabled&quot;: true,\n    &quot;healthCheckInterval&quot;: &quot;00:00:30&quot;,\n    &quot;healthCheckWindow&quot;: &quot;00:02:00&quot;,\n    &quot;healthCheckThreshold&quot;: 6,\n    &quot;counterThreshold&quot;: 0.80\n  }\n}\n</code></pre>\n<p><strong>Exception Stack</strong></p>\n<pre><code>[\n    {\n        &quot;severityLevel&quot;: &quot;Error&quot;,\n        &quot;outerId&quot;: &quot;0&quot;,\n        &quot;message&quot;: &quot;Timeout value of 00:10:00 was exceeded by function: Functions.BlobCopy&quot;,\n        &quot;type&quot;: &quot;Microsoft.Azure.WebJobs.Host.FunctionTimeoutException&quot;,\n        &quot;id&quot;: &quot;1793742&quot;,\n        &quot;parsedStack&quot;: [\n            {\n                &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\n                &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;TryHandleTimeoutAsync&gt;d__35.MoveNext&quot;,\n                &quot;level&quot;: 0,\n                &quot;line&quot;: 663,\n                &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\n                &quot;level&quot;: 1,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess&quot;,\n                &quot;level&quot;: 2,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification&quot;,\n                &quot;level&quot;: 3,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\n                &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;InvokeWithTimeoutAsync&gt;d__33.MoveNext&quot;,\n                &quot;level&quot;: 4,\n                &quot;line&quot;: 571,\n                &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\n                &quot;level&quot;: 5,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess&quot;,\n                &quot;level&quot;: 6,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification&quot;,\n                &quot;level&quot;: 7,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\n                &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;ExecuteWithWatchersAsync&gt;d__32.MoveNext&quot;,\n                &quot;level&quot;: 8,\n                &quot;line&quot;: 527,\n                &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\n                &quot;level&quot;: 9,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess&quot;,\n                &quot;level&quot;: 10,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification&quot;,\n                &quot;level&quot;: 11,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\n                &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;ExecuteWithLoggingAsync&gt;d__26.MoveNext&quot;,\n                &quot;level&quot;: 12,\n                &quot;line&quot;: 306,\n                &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\n                &quot;level&quot;: 13,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\n                &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;ExecuteWithLoggingAsync&gt;d__26.MoveNext&quot;,\n                &quot;level&quot;: 14,\n                &quot;line&quot;: 352,\n                &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw&quot;,\n                &quot;level&quot;: 15,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess&quot;,\n                &quot;level&quot;: 16,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&quot;,\n                &quot;method&quot;: &quot;System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification&quot;,\n                &quot;level&quot;: 17,\n                &quot;line&quot;: 0\n            },\n            {\n                &quot;assembly&quot;: &quot;Microsoft.Azure.WebJobs.Host, Version=3.0.36.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35&quot;,\n                &quot;method&quot;: &quot;Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor+&lt;TryExecuteAsync&gt;d__18.MoveNext&quot;,\n                &quot;level&quot;: 18,\n                &quot;line&quot;: 108,\n                &quot;fileName&quot;: &quot;C:\\\\projects\\\\azure-webjobs-sdk-rqm4t\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs&quot;\n            }\n        ]\n    }\n]\n</code></pre>\n"},{"tags":["java","iso8583","jpos"],"answers":[{"tags":[],"owner":{"account_id":61653,"reputation":1298,"user_id":183639,"display_name":"apr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682803891,"creation_date":1682803891,"answer_id":76138520,"question_id":76135050,"body_markdown":"You don&#39;t need the StatefulFilter for your use case. When you reply to a message you usually use code like this:\r\n\r\n```\r\nISOMsg r = (ISOMSg) m.clone(); // provided `m` is your request\r\nr.setResponseMTI();\r\nr.set(39, &quot;XX&quot;); // your error code\r\n```\r\nThen `r` becomes your response, that you set it in the Context so that the `SendResponse` can take it from there.\r\n\r\nThe `clone()` operation will preserve your original field 7.\r\n\r\nThe `StatefulFilter` can be used when you don&#39;t have access to the original request when it comes to build a response. It temporarily stores (default 1 minute) the original request in a local jPOS&#39; Space, and pick it from there at response time.\r\n\r\n\r\n","title":"How can I use the `org.jpos.iso.filter.StatefulFilter` in server channel to send back the outgoing value that I got from incoming?","body":"<p>You don't need the StatefulFilter for your use case. When you reply to a message you usually use code like this:</p>\n<pre><code>ISOMsg r = (ISOMSg) m.clone(); // provided `m` is your request\nr.setResponseMTI();\nr.set(39, &quot;XX&quot;); // your error code\n</code></pre>\n<p>Then <code>r</code> becomes your response, that you set it in the Context so that the <code>SendResponse</code> can take it from there.</p>\n<p>The <code>clone()</code> operation will preserve your original field 7.</p>\n<p>The <code>StatefulFilter</code> can be used when you don't have access to the original request when it comes to build a response. It temporarily stores (default 1 minute) the original request in a local jPOS' Space, and pick it from there at response time.</p>\n"},{"tags":[],"owner":{"account_id":4205035,"reputation":1690,"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682820132,"creation_date":1682820132,"answer_id":76139250,"question_id":76135050,"body_markdown":"You need to change the `direction` property to `incoming`, from the `StatefulFilter` javadoc on `matchDirection`:\r\n\r\n\r\n&gt; What messages should I match?\r\n&gt;\r\n&gt; INCOMING: outgoing messages will be matched against the previous incoming messages\r\n&gt;\r\n&gt; OUTGOING: incoming messages will be matched against the previous outgoing messages\r\n\r\nAnd it seems you want to match the previously incoming request, when you send a response to include the original DE 7.\r\n\r\nYou&#39;d need to change the `StatefulFilter` definition to:\r\n```xml\r\n&lt;filter class=&quot;org.jpos.iso.filter.StatefulFilter&quot; logger=&quot;Q2&quot; realm=&quot;server-StatefulFilter-65000&quot;&gt;\r\n    &lt;property name=&quot;direction&quot; value=&quot;incoming&quot;/&gt; \r\n    &lt;property name=&quot;saved-fields&quot; value=&quot;7&quot;/&gt;\r\n&lt;/filter&gt;\r\n```\r\n\r\nActually, `incoming` is the default if not defined, because it&#39;s the most common use case, unless you want to match it in the channel that talks to the other end of your gateway. But (I believe)  the most common use case if for retrieving something that precisely is lost in the internal use, but the client expects to receive the same value in the request.\r\n\r\nWell it&#39;s not a much used filter and its implementation has some issues. For instance, it does not check the MTI matches, and you cannot add field 0 to the key, because the MTI of the response will not match the one of the request. It should do what `QMUX` does, but its implementation is too basic.\r\n","title":"How can I use the `org.jpos.iso.filter.StatefulFilter` in server channel to send back the outgoing value that I got from incoming?","body":"<p>You need to change the <code>direction</code> property to <code>incoming</code>, from the <code>StatefulFilter</code> javadoc on <code>matchDirection</code>:</p>\n<blockquote>\n<p>What messages should I match?</p>\n<p>INCOMING: outgoing messages will be matched against the previous incoming messages</p>\n<p>OUTGOING: incoming messages will be matched against the previous outgoing messages</p>\n</blockquote>\n<p>And it seems you want to match the previously incoming request, when you send a response to include the original DE 7.</p>\n<p>You'd need to change the <code>StatefulFilter</code> definition to:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;filter class=&quot;org.jpos.iso.filter.StatefulFilter&quot; logger=&quot;Q2&quot; realm=&quot;server-StatefulFilter-65000&quot;&gt;\n    &lt;property name=&quot;direction&quot; value=&quot;incoming&quot;/&gt; \n    &lt;property name=&quot;saved-fields&quot; value=&quot;7&quot;/&gt;\n&lt;/filter&gt;\n</code></pre>\n<p>Actually, <code>incoming</code> is the default if not defined, because it's the most common use case, unless you want to match it in the channel that talks to the other end of your gateway. But (I believe)  the most common use case if for retrieving something that precisely is lost in the internal use, but the client expects to receive the same value in the request.</p>\n<p>Well it's not a much used filter and its implementation has some issues. For instance, it does not check the MTI matches, and you cannot add field 0 to the key, because the MTI of the response will not match the one of the request. It should do what <code>QMUX</code> does, but its implementation is too basic.</p>\n"}],"owner":{"account_id":3759553,"reputation":351,"user_id":3124992,"display_name":"Sanjok"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76139250,"answer_count":2,"score":0,"last_activity_date":1682820132,"creation_date":1682753691,"question_id":76135050,"body_markdown":"I tried to use the `StatefulFilter` but I am not able to achieve what I just wanted. I have the below configuration for the server. For particular ISO fields (field 7) I want to \r\n I want to reply back with the same value as was sent by the client. If an inbuilt filter like  `org.jpos.iso.filter.StatefulFilter` can do this I would not choose to add the logic\r\n through the code.\r\n```xml\r\n&lt;server name=&quot;eSewa-server-65000&quot; class=&quot;org.jpos.q2.iso.QServer&quot; logger=&quot;Q2&quot;&gt;\r\n    &lt;attr name=&quot;port&quot; type=&quot;java.lang.Integer&quot;&gt;65000&lt;/attr&gt;\r\n    &lt;attr name=&quot;minSessions&quot; type=&quot;java.lang.Integer&quot;&gt;1&lt;/attr&gt;\r\n    &lt;attr name=&quot;maxSessions&quot; type=&quot;java.lang.Integer&quot;&gt;5&lt;/attr&gt;\r\n    &lt;property name=&quot;debug&quot; value=&quot;true&quot;/&gt;\r\n\r\n\r\n    &lt;channel class=&quot;org.jpos.iso.channel.TelnetXMLChannel&quot;\r\n             packager=&quot;org.jpos.iso.packager.XMLPackager&quot;\r\n             type=&quot;server&quot;\r\n             logger=&quot;Q2&quot;\r\n             realm=&quot;server-channel-65000&quot;&gt;\r\n                &lt;filter class=&quot;org.jpos.iso.filter.StatefulFilter&quot; logger=&quot;Q2&quot; realm=&quot;server-StatefulFilter-65000&quot;&gt;\r\n                    &lt;property name=&quot;direction&quot; value=&quot;outgoing&quot;/&gt;\r\n                    &lt;property name=&quot;saved-fields&quot; value=&quot;7&quot;/&gt;\r\n                &lt;/filter&gt;\r\n   \r\n        &lt;property name=&quot;timeout&quot; value=&quot;30000&quot;/&gt;       \r\n        &lt;filter class=&quot;org.jpos.iso.filter.DebugFilter&quot; direction=&quot;incoming&quot;/&gt;   \r\n\r\n    &lt;/channel&gt;\r\n\r\n    &lt;request-listener class=&quot;org.jpos.iso.IncomingListener&quot; logger=&quot;Q2&quot;\r\n                      realm=&quot;incoming-request-listener&quot;&gt;\r\n        &lt;property name=&quot;space&quot; value=&quot;tspace:default&quot;/&gt;\r\n        &lt;property name=&quot;queue&quot; value=&quot;TXNMGR&quot;/&gt;\r\n        &lt;property name=&quot;ctx.DESTINATION&quot; value=&quot;jPOS-AUTORESPONDER&quot;/&gt;\r\n        &lt;property name=&quot;timeout&quot; value=&quot;30000&quot;/&gt;\r\n    &lt;/request-listener&gt;\r\n&lt;/server&gt;\r\n```","title":"How can I use the `org.jpos.iso.filter.StatefulFilter` in server channel to send back the outgoing value that I got from incoming?","body":"<p>I tried to use the <code>StatefulFilter</code> but I am not able to achieve what I just wanted. I have the below configuration for the server. For particular ISO fields (field 7) I want to\nI want to reply back with the same value as was sent by the client. If an inbuilt filter like  <code>org.jpos.iso.filter.StatefulFilter</code> can do this I would not choose to add the logic\nthrough the code.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;server name=&quot;eSewa-server-65000&quot; class=&quot;org.jpos.q2.iso.QServer&quot; logger=&quot;Q2&quot;&gt;\n    &lt;attr name=&quot;port&quot; type=&quot;java.lang.Integer&quot;&gt;65000&lt;/attr&gt;\n    &lt;attr name=&quot;minSessions&quot; type=&quot;java.lang.Integer&quot;&gt;1&lt;/attr&gt;\n    &lt;attr name=&quot;maxSessions&quot; type=&quot;java.lang.Integer&quot;&gt;5&lt;/attr&gt;\n    &lt;property name=&quot;debug&quot; value=&quot;true&quot;/&gt;\n\n\n    &lt;channel class=&quot;org.jpos.iso.channel.TelnetXMLChannel&quot;\n             packager=&quot;org.jpos.iso.packager.XMLPackager&quot;\n             type=&quot;server&quot;\n             logger=&quot;Q2&quot;\n             realm=&quot;server-channel-65000&quot;&gt;\n                &lt;filter class=&quot;org.jpos.iso.filter.StatefulFilter&quot; logger=&quot;Q2&quot; realm=&quot;server-StatefulFilter-65000&quot;&gt;\n                    &lt;property name=&quot;direction&quot; value=&quot;outgoing&quot;/&gt;\n                    &lt;property name=&quot;saved-fields&quot; value=&quot;7&quot;/&gt;\n                &lt;/filter&gt;\n   \n        &lt;property name=&quot;timeout&quot; value=&quot;30000&quot;/&gt;       \n        &lt;filter class=&quot;org.jpos.iso.filter.DebugFilter&quot; direction=&quot;incoming&quot;/&gt;   \n\n    &lt;/channel&gt;\n\n    &lt;request-listener class=&quot;org.jpos.iso.IncomingListener&quot; logger=&quot;Q2&quot;\n                      realm=&quot;incoming-request-listener&quot;&gt;\n        &lt;property name=&quot;space&quot; value=&quot;tspace:default&quot;/&gt;\n        &lt;property name=&quot;queue&quot; value=&quot;TXNMGR&quot;/&gt;\n        &lt;property name=&quot;ctx.DESTINATION&quot; value=&quot;jPOS-AUTORESPONDER&quot;/&gt;\n        &lt;property name=&quot;timeout&quot; value=&quot;30000&quot;/&gt;\n    &lt;/request-listener&gt;\n&lt;/server&gt;\n</code></pre>\n"},{"tags":["java","android","locale"],"answers":[{"tags":[],"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682818080,"creation_date":1682818080,"answer_id":76139188,"question_id":76130591,"body_markdown":"Ah yes this is the Android configuration setting annoyance.\r\nFor some reason changing configurations like these requires you to do this on every single Activity. Want to change to dark mode according to your own app&#39;s settings? Have to perform the action on every Activity.\r\n\r\nA classic way to circumvent this is to make a base class doing all the grabbing preferences and setting preferences sutff and extending all other classes from that one class.\r\n\r\nSometimes it might not suit your needs to do this, but as far as I had checked last time, every activity has to have prefs set on _usually_ the onResume overloaded method.","title":"android java change language programatically","body":"<p>Ah yes this is the Android configuration setting annoyance.\nFor some reason changing configurations like these requires you to do this on every single Activity. Want to change to dark mode according to your own app's settings? Have to perform the action on every Activity.</p>\n<p>A classic way to circumvent this is to make a base class doing all the grabbing preferences and setting preferences sutff and extending all other classes from that one class.</p>\n<p>Sometimes it might not suit your needs to do this, but as far as I had checked last time, every activity has to have prefs set on <em>usually</em> the onResume overloaded method.</p>\n"}],"owner":{"account_id":5600321,"reputation":322,"user_id":4447899,"accept_rate":50,"display_name":"user4447899"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682818080,"creation_date":1682692057,"question_id":76130591,"body_markdown":"I have an application which has a activity which handles switching fragments\r\n\r\n    public void replaceFragment(@IdRes int containerViewId,\r\n                                    @NonNull Fragment fragment,\r\n                                    @NonNull String fragmentTag\r\n        ) {\r\n            getSupportFragmentManager()\r\n                    .beginTransaction()\r\n                    .replace(containerViewId, fragment, fragmentTag)\r\n                    .commitNow();\r\n        }\r\n\r\nThere is a language toggle in the main activity. \r\n\r\nI have two strings files strings.xml in my folders values and values-fr\r\n\r\nfor english and french\r\n\r\nNow when i toggle i do this\r\n\r\n    Locale locale = new Locale(languageCode);\r\n    Locale.setDefault(locale);\r\n    Resources resources = activity.getResources();\r\n    Configuration config = resources.getConfiguration();\r\n    config.setLocale(locale);\r\n    resources.updateConfiguration(config, resources.getDisplayMetrics());\r\n    activity.recreate()\r\n\r\nThe activity changes language and the first fragment but none of the others\r\n\r\nPlease can anyone help. My targetSdkVersion is 31","title":"android java change language programatically","body":"<p>I have an application which has a activity which handles switching fragments</p>\n<pre><code>public void replaceFragment(@IdRes int containerViewId,\n                                @NonNull Fragment fragment,\n                                @NonNull String fragmentTag\n    ) {\n        getSupportFragmentManager()\n                .beginTransaction()\n                .replace(containerViewId, fragment, fragmentTag)\n                .commitNow();\n    }\n</code></pre>\n<p>There is a language toggle in the main activity.</p>\n<p>I have two strings files strings.xml in my folders values and values-fr</p>\n<p>for english and french</p>\n<p>Now when i toggle i do this</p>\n<pre><code>Locale locale = new Locale(languageCode);\nLocale.setDefault(locale);\nResources resources = activity.getResources();\nConfiguration config = resources.getConfiguration();\nconfig.setLocale(locale);\nresources.updateConfiguration(config, resources.getDisplayMetrics());\nactivity.recreate()\n</code></pre>\n<p>The activity changes language and the first fragment but none of the others</p>\n<p>Please can anyone help. My targetSdkVersion is 31</p>\n"},{"tags":["java","spring","spring-boot","maven","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":20668210,"reputation":75,"user_id":15174539,"display_name":"lee yiyang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618989869,"creation_date":1618989869,"answer_id":67191092,"question_id":67191032,"body_markdown":"Do u try to change the version to 0.9.2 ?\r\n","title":"org.springframework.experimental:spring-aot-maven-plugin:jar:0.9.2 was not found","body":"<p>Do u try to change the version to 0.9.2 ?</p>\n"},{"tags":[],"owner":{"account_id":21346348,"reputation":74,"user_id":15716360,"display_name":"hdha"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1618990933,"creation_date":1618990012,"answer_id":67191125,"question_id":67191032,"body_markdown":"You have to add this repository . Because ```spring-aot-maven-plugin ``` plugin available in this repository ```https://repo.spring.io/release```\r\n\r\n```\r\n&lt;repositories&gt;\r\n\t\t\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;snapshots&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Local Nexus&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/release&lt;/url&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n```\r\n\r\ni have tried this plugin with above repository  :\r\n```\r\n&lt;groupId&gt;org.springframework.experimental&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-aot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.2&lt;/version&gt;\r\n```\r\nand it is working fine..\r\n","title":"org.springframework.experimental:spring-aot-maven-plugin:jar:0.9.2 was not found","body":"<p>You have to add this repository . Because <code>spring-aot-maven-plugin </code> plugin available in this repository <code>https://repo.spring.io/release</code></p>\n<pre><code>&lt;repositories&gt;\n        \n        &lt;repository&gt;\n            &lt;id&gt;snapshots&lt;/id&gt;\n            &lt;name&gt;Local Nexus&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/release&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n</code></pre>\n<p>i have tried this plugin with above repository  :</p>\n<pre><code>&lt;groupId&gt;org.springframework.experimental&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aot-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.9.2&lt;/version&gt;\n</code></pre>\n<p>and it is working fine..</p>\n"},{"tags":[],"owner":{"account_id":18145233,"reputation":11,"user_id":13198630,"display_name":"Kaushik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647599377,"creation_date":1647599377,"answer_id":71525637,"question_id":67191032,"body_markdown":"Adding to the answer from hdha, for plugins from different repositories, you can add pluginRepsoitories tag to mention the url to use for certain plugins.\r\n\r\n    &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;snapshots&lt;/id&gt;\r\n            &lt;name&gt;Local Nexus&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/release&lt;/url&gt;\r\n        &lt;/pluginRepository&gt;\r\n    &lt;/pluginRepositories&gt;","title":"org.springframework.experimental:spring-aot-maven-plugin:jar:0.9.2 was not found","body":"<p>Adding to the answer from hdha, for plugins from different repositories, you can add pluginRepsoitories tag to mention the url to use for certain plugins.</p>\n<pre><code>&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;snapshots&lt;/id&gt;\n        &lt;name&gt;Local Nexus&lt;/name&gt;\n        &lt;url&gt;https://repo.spring.io/release&lt;/url&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1669453,"reputation":2017,"user_id":1536197,"accept_rate":21,"display_name":"Hernaldo Gonzalez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682815316,"creation_date":1682815316,"answer_id":76139089,"question_id":67191032,"body_markdown":"The same error happened to me, finally, after 1 hour I noticed that if you want to work with Spring Native \r\n\r\n     &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;repackage.classifier /&gt;\r\n        &lt;spring-native.version&gt;0.12.1&lt;/spring-native.version&gt;\r\n      &lt;/properties&gt;\r\n    ...\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.springframework.experimental&lt;/groupId&gt;\r\n       &lt;artifactId&gt;spring-native&lt;/artifactId&gt;\r\n       &lt;version&gt;${spring-native.version}&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n    \r\n    and then...\r\n    \r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.springframework.experimental&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-aot-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;${spring-native.version}&lt;/version&gt;\r\n      &lt;executions&gt;...\r\n\r\nYou have to add the two answers indicated here, so you look for them in this repo and not in maven central\r\n  \r\n\r\n     &lt;pluginRepositories&gt;\r\n         &lt;pluginRepository&gt;\r\n           &lt;id&gt;snapshots&lt;/id&gt;\r\n           &lt;name&gt;Nexus Local&lt;/name&gt;\r\n           &lt;url&gt;https://repo.spring.io/release&lt;/url&gt;\r\n         &lt;/pluginRepository&gt;\r\n       &lt;/pluginRepositories&gt;\r\n    \r\n       &lt;repositories&gt;\r\n         &lt;repository&gt;\r\n           &lt;id&gt;spring-release&lt;/id&gt;\r\n           &lt;name&gt;Spring release&lt;/name&gt;\r\n           &lt;url&gt;https://repo.spring.io/release&lt;/url&gt;\r\n           &lt;snapshot&gt;\r\n             &lt;enabled&gt;false&lt;/enabled&gt;\r\n           &lt;/snapshot&gt;\r\n         &lt;/repository&gt;\r\n       &lt;/repositories&gt;\r\n\r\n    &lt;/project&gt;\r\n","title":"org.springframework.experimental:spring-aot-maven-plugin:jar:0.9.2 was not found","body":"<p>The same error happened to me, finally, after 1 hour I noticed that if you want to work with Spring Native</p>\n<pre><code> &lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;repackage.classifier /&gt;\n    &lt;spring-native.version&gt;0.12.1&lt;/spring-native.version&gt;\n  &lt;/properties&gt;\n...\n\n&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.experimental&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-native&lt;/artifactId&gt;\n   &lt;version&gt;${spring-native.version}&lt;/version&gt;\n &lt;/dependency&gt;\n\nand then...\n\n&lt;plugin&gt;\n  &lt;groupId&gt;org.springframework.experimental&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-aot-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${spring-native.version}&lt;/version&gt;\n  &lt;executions&gt;...\n</code></pre>\n<p>You have to add the two answers indicated here, so you look for them in this repo and not in maven central</p>\n<pre><code> &lt;pluginRepositories&gt;\n     &lt;pluginRepository&gt;\n       &lt;id&gt;snapshots&lt;/id&gt;\n       &lt;name&gt;Nexus Local&lt;/name&gt;\n       &lt;url&gt;https://repo.spring.io/release&lt;/url&gt;\n     &lt;/pluginRepository&gt;\n   &lt;/pluginRepositories&gt;\n\n   &lt;repositories&gt;\n     &lt;repository&gt;\n       &lt;id&gt;spring-release&lt;/id&gt;\n       &lt;name&gt;Spring release&lt;/name&gt;\n       &lt;url&gt;https://repo.spring.io/release&lt;/url&gt;\n       &lt;snapshot&gt;\n         &lt;enabled&gt;false&lt;/enabled&gt;\n       &lt;/snapshot&gt;\n     &lt;/repository&gt;\n   &lt;/repositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":12447608,"reputation":93,"user_id":9063332,"display_name":"Atulya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5743,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":67191125,"answer_count":4,"score":4,"last_activity_date":1682815316,"creation_date":1618989581,"question_id":67191032,"body_markdown":"I added the dependency and plugins using this documentation-\r\n https://docs.spring.io/spring-native/docs/current/reference/htmlsingle/\r\n\r\n\r\nI also tried-\r\n```mvn clean install```\r\n.But I keep getting this error-\r\n[![enter image description here][1]][1]\r\n\r\nThanks for the help.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xdfgR.png","title":"org.springframework.experimental:spring-aot-maven-plugin:jar:0.9.2 was not found","body":"<p>I added the dependency and plugins using this documentation-\n<a href=\"https://docs.spring.io/spring-native/docs/current/reference/htmlsingle/\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-native/docs/current/reference/htmlsingle/</a></p>\n<p>I also tried-\n<code>mvn clean install</code>\n.But I keep getting this error-\n<a href=\"https://i.stack.imgur.com/xdfgR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xdfgR.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks for the help.</p>\n"},{"tags":["java","hibernate","jpa","quarkus"],"answers":[{"comments":[{"owner":{"account_id":11446669,"reputation":49,"user_id":8390330,"display_name":"hubfix"},"score":0,"creation_date":1682818301,"post_id":76139041,"comment_id":134274736,"body_markdown":"But I want to persist the UserProfile together with User entity","body":"But I want to persist the UserProfile together with User entity"},{"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"score":0,"creation_date":1682899897,"post_id":76139041,"comment_id":134283050,"body_markdown":"@hubfix could you try if this approach will work? It will take a lot of time to create some demos and try this approach by myself.","body":"@hubfix could you try if this approach will work? It will take a lot of time to create some demos and try this approach by myself."}],"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682813962,"creation_date":1682813962,"answer_id":76139041,"question_id":76138929,"body_markdown":"Try to use \r\n\r\n```\r\n@OneToOne(cascade = CascadeType.MERGE, fetch = FetchType.LAZY)\r\n@PrimaryKeyJoinColumn(name = &quot;id&quot;, referencedColumnName = &quot;user_id&quot;)\r\nprivate UserProfile profile;\r\n```\r\n\r\nInstead of `CascadeType.ALL`.\r\n\r\nIf the cascade type is set to **PERSIST** or **ALL**, Hibernate will try to propagate the persist operation on the detached associated field.  \r\n\r\nWhen you persist a `User` entity with one of these cascading types, Hibernate will persist the associated detached `UserProfile`, which will lead to `PersistentObjectException`.","title":"Issue with @OneToOne unidirectional relationship and Hibernate","body":"<p>Try to use</p>\n<pre><code>@OneToOne(cascade = CascadeType.MERGE, fetch = FetchType.LAZY)\n@PrimaryKeyJoinColumn(name = &quot;id&quot;, referencedColumnName = &quot;user_id&quot;)\nprivate UserProfile profile;\n</code></pre>\n<p>Instead of <code>CascadeType.ALL</code>.</p>\n<p>If the cascade type is set to <strong>PERSIST</strong> or <strong>ALL</strong>, Hibernate will try to propagate the persist operation on the detached associated field.</p>\n<p>When you persist a <code>User</code> entity with one of these cascading types, Hibernate will persist the associated detached <code>UserProfile</code>, which will lead to <code>PersistentObjectException</code>.</p>\n"}],"owner":{"account_id":11446669,"reputation":49,"user_id":8390330,"display_name":"hubfix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682814876,"creation_date":1682811181,"question_id":76138929,"body_markdown":"I&#39;m developing a simple application for my database with Quarkus and Hibernate as ORM.\r\n\r\nI want to be able to register Users and associate individual UserProfiles with them.\r\n\r\nCurrently, this is how I&#39;ve set up the tables in ***PostgreSQL 14***:\r\n```\r\nhibernate=# \\d user;\r\n id           | character varying(36)  |           | not null | \r\n created_at   | bigint                 |           | not null | \r\n email        | character varying(255) |           | not null | \r\n handler      | character varying(36)  |           | not null | \r\n locked       | boolean                |           | not null | \r\n password     | character varying(255) |           | not null | \r\n updated_at   | bigint                 |           | not null | \r\n verified     | boolean                |           | not null | \r\n account_type | integer                |           |          |\r\n```\r\n```\r\nhibernate=# \\d user_profile;\r\n id         | integer                |           | not null | \r\n birth_date | date                   |           |          | \r\n created_at | bigint                 |           | not null | \r\n first_name | character varying(255) |           | not null | \r\n last_name  | character varying(255) |           | not null | \r\n telephone  | character varying(255) |           |          | \r\n updated_at | bigint                 |           | not null | \r\n user_id    | character varying(36)  |           | not null |\r\n```\r\n\r\nwith `user_id` being the FK for `user.id`.\r\n\r\nI&#39;ve set up my entities like this\r\n\r\n```java\r\n@Data\r\n@EqualsAndHashCode(callSuper = false)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;`user`&quot;)\r\npublic class User extends PanacheEntityBase {\r\n\t\r\n\t@Id \r\n\t@Column(name = &quot;`id`&quot;, length = 36, updatable = false, nullable = false)\r\n\t@GeneratedValue(generator = &quot;UUID&quot;)\r\n    @GenericGenerator(\r\n\t\tname = &quot;UUID&quot;,\r\n\t\tstrategy = &quot;org.hibernate.id.UUIDGenerator&quot;\r\n\t)\r\n\tprivate String id;\r\n\t\r\n\t@Column(name = &quot;handler&quot;, length = 36, nullable = false, unique = true)\r\n\tprivate String handler;\r\n\r\n\t@Column(unique = true, nullable = false)\r\n\tprivate String email;\r\n\r\n\t@Column(name = &quot;password&quot;, nullable = false)\r\n\tprivate String password;\r\n\r\n\t@Column(name = &quot;account_type&quot;, nullable = false)\r\n\tprivate Integer accountType;\r\n\r\n\t@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n\t@JoinTable(\r\n\t\t\tname = &quot;user_role&quot;,\r\n\t\t\tjoinColumns = @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\r\n\t\t\tinverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;)\r\n\t)\r\n\tprivate Set&lt;Role&gt; roles;\r\n\r\n\t@OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n\t@PrimaryKeyJoinColumn(name = &quot;id&quot;, referencedColumnName = &quot;user_id&quot;)\r\n\tprivate UserProfile profile;\r\n\r\n\t@Column(name = &quot;locked&quot;, nullable = false)\r\n\tprivate boolean locked = false;\r\n\r\n\t@Column(name = &quot;verified&quot;, nullable = false)\r\n\tprivate boolean verified = false;\r\n\r\n\t@Column(name = &quot;created_at&quot;, nullable = false)\r\n\tprivate long createdAt;\r\n\r\n\t@Column(name = &quot;updated_at&quot;, nullable = false)\r\n\tprivate long updatedAt;\r\n}\r\n```\r\n\r\n```java\r\n@Data\r\n@EqualsAndHashCode(callSuper = false)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;user_profile&quot;)\r\npublic class UserProfile extends PanacheEntityBase {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name = &quot;`id`&quot;, updatable = false, nullable = false)\r\n\tprivate Integer id = 1;\r\n\r\n\t@Column(name = &quot;user_id&quot;, length = 36, nullable = false, unique = true)\r\n\tprivate String userId;\r\n\r\n\t@Column(name = &quot;first_name&quot;, nullable = false)\r\n\tprivate String firstName;\r\n\r\n\t@Column(name = &quot;last_name&quot;, nullable = false)\r\n\tprivate String lastName;\r\n\r\n\t@Column(name=&quot;birth_date&quot;)\r\n\tprivate LocalDate birthDate;\r\n\r\n\t@Column(name = &quot;telephone&quot;)\r\n\tprivate String telephone;\r\n\r\n\t@Column(name = &quot;created_at&quot;, nullable = false)\r\n\tprivate long createdAt;\r\n\r\n\t@Column(name = &quot;updated_at&quot;, nullable = false)\r\n\tprivate long updatedAt;\r\n}\r\n```\r\n\r\nSince I&#39;m expecting to receive a `UserDTO` from a **REST** endpoint with a similar structure:\r\n\r\n```\r\n{\r\n  &quot;email&quot;: &quot;string@email.test&quot;,\r\n  &quot;password&quot;: &quot;string&quot;,\r\n  &quot;handler&quot;: &quot;oXaTxETbXyZUCGTd5D2oG77At0B7JPh&quot;,\r\n  &quot;roles&quot;: [\r\n    &quot;SUPPLIER&quot;\r\n  ],\r\n  &quot;accountType&quot;: &quot;PHYSICAL&quot;,\r\n  &quot;profile&quot;: {\r\n    &quot;firstName&quot;: &quot;string&quot;,\r\n    &quot;lastName&quot;: &quot;string&quot;,\r\n    &quot;telephone&quot;: &quot;+(535071 778954450&quot;,\r\n    &quot;birthDate&quot;: &quot;2022-03-10&quot;,\r\n    &quot;createdAt&quot;: 0,\r\n    &quot;updatedAt&quot;: 0\r\n  },\r\n  &quot;addresses&quot;: [\r\n    {\r\n      &quot;id&quot;: 0,\r\n      &quot;state&quot;: &quot;z&quot;,\r\n      &quot;country&quot;: &quot;D&quot;,\r\n      &quot;region&quot;: &quot;$&quot;,\r\n      &quot;province&quot;: &quot;;&quot;,\r\n      &quot;city&quot;: &quot;|&quot;,\r\n      &quot;address&quot;: &quot;g&quot;,\r\n      &quot;postcode&quot;: &quot;5&quot;,\r\n      &quot;street&quot;: &quot;R&quot;,\r\n      &quot;suffix&quot;: &quot;V&quot;,\r\n      &quot;vatNumber&quot;: &quot;string&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nwhat I do is map the UserDTO to a User entity using MapStruct, so I have something like\r\n\r\n```java\r\nUser user = userMapper.toUser(userDTO);\r\nuserRepository.persistAndFlush(user);\r\n```\r\n\r\nHowever, I keep on getting this error:\r\n\r\n&gt;An exception occurred! : javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist: com.entities.UserProfile  \r\n\r\n***How could I fix this issue?***","title":"Issue with @OneToOne unidirectional relationship and Hibernate","body":"<p>I'm developing a simple application for my database with Quarkus and Hibernate as ORM.</p>\n<p>I want to be able to register Users and associate individual UserProfiles with them.</p>\n<p>Currently, this is how I've set up the tables in <em><strong>PostgreSQL 14</strong></em>:</p>\n<pre><code>hibernate=# \\d user;\n id           | character varying(36)  |           | not null | \n created_at   | bigint                 |           | not null | \n email        | character varying(255) |           | not null | \n handler      | character varying(36)  |           | not null | \n locked       | boolean                |           | not null | \n password     | character varying(255) |           | not null | \n updated_at   | bigint                 |           | not null | \n verified     | boolean                |           | not null | \n account_type | integer                |           |          |\n</code></pre>\n<pre><code>hibernate=# \\d user_profile;\n id         | integer                |           | not null | \n birth_date | date                   |           |          | \n created_at | bigint                 |           | not null | \n first_name | character varying(255) |           | not null | \n last_name  | character varying(255) |           | not null | \n telephone  | character varying(255) |           |          | \n updated_at | bigint                 |           | not null | \n user_id    | character varying(36)  |           | not null |\n</code></pre>\n<p>with <code>user_id</code> being the FK for <code>user.id</code>.</p>\n<p>I've set up my entities like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@EqualsAndHashCode(callSuper = false)\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;`user`&quot;)\npublic class User extends PanacheEntityBase {\n    \n    @Id \n    @Column(name = &quot;`id`&quot;, length = 36, updatable = false, nullable = false)\n    @GeneratedValue(generator = &quot;UUID&quot;)\n    @GenericGenerator(\n        name = &quot;UUID&quot;,\n        strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\n    )\n    private String id;\n    \n    @Column(name = &quot;handler&quot;, length = 36, nullable = false, unique = true)\n    private String handler;\n\n    @Column(unique = true, nullable = false)\n    private String email;\n\n    @Column(name = &quot;password&quot;, nullable = false)\n    private String password;\n\n    @Column(name = &quot;account_type&quot;, nullable = false)\n    private Integer accountType;\n\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\n    @JoinTable(\n            name = &quot;user_role&quot;,\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;)\n    )\n    private Set&lt;Role&gt; roles;\n\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    @PrimaryKeyJoinColumn(name = &quot;id&quot;, referencedColumnName = &quot;user_id&quot;)\n    private UserProfile profile;\n\n    @Column(name = &quot;locked&quot;, nullable = false)\n    private boolean locked = false;\n\n    @Column(name = &quot;verified&quot;, nullable = false)\n    private boolean verified = false;\n\n    @Column(name = &quot;created_at&quot;, nullable = false)\n    private long createdAt;\n\n    @Column(name = &quot;updated_at&quot;, nullable = false)\n    private long updatedAt;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@EqualsAndHashCode(callSuper = false)\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;user_profile&quot;)\npublic class UserProfile extends PanacheEntityBase {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;`id`&quot;, updatable = false, nullable = false)\n    private Integer id = 1;\n\n    @Column(name = &quot;user_id&quot;, length = 36, nullable = false, unique = true)\n    private String userId;\n\n    @Column(name = &quot;first_name&quot;, nullable = false)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;, nullable = false)\n    private String lastName;\n\n    @Column(name=&quot;birth_date&quot;)\n    private LocalDate birthDate;\n\n    @Column(name = &quot;telephone&quot;)\n    private String telephone;\n\n    @Column(name = &quot;created_at&quot;, nullable = false)\n    private long createdAt;\n\n    @Column(name = &quot;updated_at&quot;, nullable = false)\n    private long updatedAt;\n}\n</code></pre>\n<p>Since I'm expecting to receive a <code>UserDTO</code> from a <strong>REST</strong> endpoint with a similar structure:</p>\n<pre><code>{\n  &quot;email&quot;: &quot;string@email.test&quot;,\n  &quot;password&quot;: &quot;string&quot;,\n  &quot;handler&quot;: &quot;oXaTxETbXyZUCGTd5D2oG77At0B7JPh&quot;,\n  &quot;roles&quot;: [\n    &quot;SUPPLIER&quot;\n  ],\n  &quot;accountType&quot;: &quot;PHYSICAL&quot;,\n  &quot;profile&quot;: {\n    &quot;firstName&quot;: &quot;string&quot;,\n    &quot;lastName&quot;: &quot;string&quot;,\n    &quot;telephone&quot;: &quot;+(535071 778954450&quot;,\n    &quot;birthDate&quot;: &quot;2022-03-10&quot;,\n    &quot;createdAt&quot;: 0,\n    &quot;updatedAt&quot;: 0\n  },\n  &quot;addresses&quot;: [\n    {\n      &quot;id&quot;: 0,\n      &quot;state&quot;: &quot;z&quot;,\n      &quot;country&quot;: &quot;D&quot;,\n      &quot;region&quot;: &quot;$&quot;,\n      &quot;province&quot;: &quot;;&quot;,\n      &quot;city&quot;: &quot;|&quot;,\n      &quot;address&quot;: &quot;g&quot;,\n      &quot;postcode&quot;: &quot;5&quot;,\n      &quot;street&quot;: &quot;R&quot;,\n      &quot;suffix&quot;: &quot;V&quot;,\n      &quot;vatNumber&quot;: &quot;string&quot;\n    }\n  ]\n}\n</code></pre>\n<p>what I do is map the UserDTO to a User entity using MapStruct, so I have something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>User user = userMapper.toUser(userDTO);\nuserRepository.persistAndFlush(user);\n</code></pre>\n<p>However, I keep on getting this error:</p>\n<blockquote>\n<p>An exception occurred! : javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist: com.entities.UserProfile</p>\n</blockquote>\n<p><em><strong>How could I fix this issue?</strong></em></p>\n"},{"tags":["java","inheritance","multi-level"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1682807453,"post_id":76138729,"comment_id":134273975,"body_markdown":"I see no [cast](https://docs.oracle.com/javase/specs/jls/se11/html/jls-15.html#jls-15.16) anywhere in your code, so what&#39;s the actual question?","body":"I see no <a href=\"https://docs.oracle.com/javase/specs/jls/se11/html/jls-15.html#jls-15.16\" rel=\"nofollow noreferrer\">cast</a> anywhere in your code, so what&#39;s the actual question?"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1682807508,"post_id":76138729,"comment_id":134273980,"body_markdown":"wow, because when I tried it didn&#39;t work.  The question is as stated.  How can I turn my square into a rectangle","body":"wow, because when I tried it didn&#39;t work.  The question is as stated.  How can I turn my square into a rectangle"},{"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"score":0,"creation_date":1682807757,"post_id":76138729,"comment_id":134273998,"body_markdown":"I&#39;m confused by your final question because it looks like you want `getStr1` to return the same thing as `getStr0`.","body":"I&#39;m confused by your final question because it looks like you want <code>getStr1</code> to return the same thing as <code>getStr0</code>."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":1,"creation_date":1682807819,"post_id":76138729,"comment_id":134274003,"body_markdown":"How about you don&#39;t override `getStr0` in Square?","body":"How about you don&#39;t override <code>getStr0</code> in Square?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1682807918,"post_id":76138729,"comment_id":134274011,"body_markdown":"@JeffHolt I presume `getStr0` is the one that returns `&quot;Square with side: ...&quot;` and `getStr1` is the one that gives `&quot;Has area...&quot;` but it could do with a [mre].","body":"@JeffHolt I presume <code>getStr0</code> is the one that returns <code>&quot;Square with side: ...&quot;</code> and <code>getStr1</code> is the one that gives <code>&quot;Has area...&quot;</code> but it could do with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1682807986,"post_id":76138729,"comment_id":134274015,"body_markdown":"@khelwood, you are correct.","body":"@khelwood, you are correct."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":2,"creation_date":1682808343,"post_id":76138729,"comment_id":134274045,"body_markdown":"@DCR - ah, now I get what you&#39;re asking. I think you&#39;re out of luck. Once you&#39;ve got an override in Square for a Shape method, it&#39;s going to get called.  Casting to a Rectangle will not help.  If sometimes you want the Sqaure override and sometimes you don&#39;t, you&#39;ll have to have a set of methods that allow that to be expressed.","body":"@DCR - ah, now I get what you&#39;re asking. I think you&#39;re out of luck. Once you&#39;ve got an override in Square for a Shape method, it&#39;s going to get called.  Casting to a Rectangle will not help.  If sometimes you want the Sqaure override and sometimes you don&#39;t, you&#39;ll have to have a set of methods that allow that to be expressed."},{"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"score":0,"creation_date":1682808356,"post_id":76138729,"comment_id":134274047,"body_markdown":"@khelwood Not from the output he showed. The first output line comes from getStr0 and the 2nd (the one he says he wants to change) comes from getStr1. Weird how you would think it was the other way around.","body":"@khelwood Not from the output he showed. The first output line comes from getStr0 and the 2nd (the one he says he wants to change) comes from getStr1. Weird how you would think it was the other way around."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1682808468,"post_id":76138729,"comment_id":134274058,"body_markdown":"@JeffHolt There are two shapes in the list. So they&#39;re printing str0 then str1 of the first shape, then str0 and str1 of the second shape.","body":"@JeffHolt There are two shapes in the list. So they&#39;re printing str0 then str1 of the first shape, then str0 and str1 of the second shape."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1682808537,"post_id":76138729,"comment_id":134274063,"body_markdown":"No. There is no way to make a Square behave like a Rectangle, because behaviour of a Square *overrides* behaviour of a Rectangle (ie it has different implementations for its methods). Assigning a Square object to a Rectangle variable, then calling the method on the variable has no effect either.","body":"No. There is no way to make a Square behave like a Rectangle, because behaviour of a Square <i>overrides</i> behaviour of a Rectangle (ie it has different implementations for its methods). Assigning a Square object to a Rectangle variable, then calling the method on the variable has no effect either."}],"answers":[{"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1682809318,"post_id":76138793,"comment_id":134274121,"body_markdown":"This looks like a typo `List&lt;String&gt; raw = (List&lt;String&gt;) raw;`","body":"This looks like a typo <code>List&lt;String&gt; raw = (List&lt;String&gt;) raw;</code>"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682811336,"creation_date":1682808490,"answer_id":76138793,"question_id":76138729,"body_markdown":"No.\r\n\r\n&quot;Cast&quot; is a term resolved for only one thing, which is __a syntactical construct__. Anything in java source code that looks like: `(SomeType) someExpression`. The reason you should not be using that term for anything except that (and that should come up very rarely in discussion), is that the cast operator is used for __3 completely and utterly unrelated things__, but you might, if you&#39;re not too familiar with java, confuse the 3. Which you appear to be doing. Best to avoid that confusion by using clearer terminology.\r\n\r\nSo how different are these 3? _Completely_. Before you think that doesn&#39;t make sense, remember:\r\n\r\n```\r\nString a = &quot;Hello&quot;;\r\nString b = &quot;, world!&quot;;\r\nString c = a + b;\r\n\r\nint x = 5;\r\nint y = 10;\r\nint z = x + y;\r\n```\r\n\r\nUses the exact same operator (`+`) for 2 __utterly unrelated__ things: String concatenation, and numeric addition.\r\n\r\nThe same thing applies to the cast operator.\r\n\r\n## Conversion\r\n\r\n__The only way a cast operation converts anything at all is if the type in the parens is a primitive__. That is all. You have asked: &quot;Can I convert a square to a rectangle or otherwise make that square somehow use rectangle&#39;s toString by involving a cast somehow&quot; and the answer is an emphatic: __No__, because the cast operator __cannot convert anything__, unless you are casting one primitive to another. `int x = (int) someDouble;` is an actual conversion, but only the 8 primitives can do that (and in practice, `boolean` can&#39;t do the job either.\r\n\r\n## Type check\r\n\r\nWhen the type in the parens is _not_ a primitive, the cast operator typechecks. Given:\r\n\r\n```\r\nObject o = someExpression;\r\nString x = (String) o;\r\n```\r\n\r\nThat cast operator injects the following code in your class file:\r\n\r\n1. Resolve the expression. This involves following the `o` pointer (in java, all non-primitives are pointers, in java terminology, &#39;reference&#39;; same thing, though), and check the object you find there. Sure, that is _at least_ an `Object` but it is likely to be something more specific than that. Is it a `String` or some subtype of that?\r\n2. If yes, __DO NOTHING__. Nothing is converted. The type of that expression (the whole `(String) o` node) is `String` so this will let you e.g. invoke `.toLowerCase()` on the result. That&#39;s not because this cast operation magically makes that `o` gain a `toLowerCase()` function. Nono; `o` is pointing at a String and all strings have a `toLowerCase()` function. `javac` merely wouldn&#39;t let you call it, because it didn&#39;t know that the object it finds when following `o` is, indeed, a String. WITH the cast, it does, because...\r\n3. If the answer is no, throw a `ClassCastException`. Again, no conversion happens.\r\n\r\nThe other things casts do is a type assertion - that&#39;s where you decree an expression of some type, and this generates ZERO bytecode. You&#39;re just telling the compiler. This is what you get when you stick generics (the `&lt;&gt;` stuff) in there:\r\n\r\n```\r\nList&lt;Object&gt; o = new ArrayList&lt;Object&gt;();\r\nList raw = o;\r\nList&lt;String&gt; uhoh = (List&lt;String&gt;) raw;\r\no.add(5);\r\nString x = uhoh.get(0);\r\n```\r\n\r\nThe above code compiles, but you do get a warning. Proving that this injects no code whatsoever (the `List` is already guaranteed, and the `&lt;String&gt;` part, that&#39;s generics, so is a type assertion, i.e. the compiler just takes your word for it). This code will throw a `ClassCastException` on the last line if you run it which is bizarre given that there isn&#39;t a cast on there. Generally, this usage of the cast operator should only be used as a last resort, and always generates a warning because it is unsafe.\r\n\r\n","title":"type casting not working on inherited class","body":"<p>No.</p>\n<p>&quot;Cast&quot; is a term resolved for only one thing, which is <strong>a syntactical construct</strong>. Anything in java source code that looks like: <code>(SomeType) someExpression</code>. The reason you should not be using that term for anything except that (and that should come up very rarely in discussion), is that the cast operator is used for <strong>3 completely and utterly unrelated things</strong>, but you might, if you're not too familiar with java, confuse the 3. Which you appear to be doing. Best to avoid that confusion by using clearer terminology.</p>\n<p>So how different are these 3? <em>Completely</em>. Before you think that doesn't make sense, remember:</p>\n<pre><code>String a = &quot;Hello&quot;;\nString b = &quot;, world!&quot;;\nString c = a + b;\n\nint x = 5;\nint y = 10;\nint z = x + y;\n</code></pre>\n<p>Uses the exact same operator (<code>+</code>) for 2 <strong>utterly unrelated</strong> things: String concatenation, and numeric addition.</p>\n<p>The same thing applies to the cast operator.</p>\n<h2>Conversion</h2>\n<p><strong>The only way a cast operation converts anything at all is if the type in the parens is a primitive</strong>. That is all. You have asked: &quot;Can I convert a square to a rectangle or otherwise make that square somehow use rectangle's toString by involving a cast somehow&quot; and the answer is an emphatic: <strong>No</strong>, because the cast operator <strong>cannot convert anything</strong>, unless you are casting one primitive to another. <code>int x = (int) someDouble;</code> is an actual conversion, but only the 8 primitives can do that (and in practice, <code>boolean</code> can't do the job either.</p>\n<h2>Type check</h2>\n<p>When the type in the parens is <em>not</em> a primitive, the cast operator typechecks. Given:</p>\n<pre><code>Object o = someExpression;\nString x = (String) o;\n</code></pre>\n<p>That cast operator injects the following code in your class file:</p>\n<ol>\n<li>Resolve the expression. This involves following the <code>o</code> pointer (in java, all non-primitives are pointers, in java terminology, 'reference'; same thing, though), and check the object you find there. Sure, that is <em>at least</em> an <code>Object</code> but it is likely to be something more specific than that. Is it a <code>String</code> or some subtype of that?</li>\n<li>If yes, <strong>DO NOTHING</strong>. Nothing is converted. The type of that expression (the whole <code>(String) o</code> node) is <code>String</code> so this will let you e.g. invoke <code>.toLowerCase()</code> on the result. That's not because this cast operation magically makes that <code>o</code> gain a <code>toLowerCase()</code> function. Nono; <code>o</code> is pointing at a String and all strings have a <code>toLowerCase()</code> function. <code>javac</code> merely wouldn't let you call it, because it didn't know that the object it finds when following <code>o</code> is, indeed, a String. WITH the cast, it does, because...</li>\n<li>If the answer is no, throw a <code>ClassCastException</code>. Again, no conversion happens.</li>\n</ol>\n<p>The other things casts do is a type assertion - that's where you decree an expression of some type, and this generates ZERO bytecode. You're just telling the compiler. This is what you get when you stick generics (the <code>&lt;&gt;</code> stuff) in there:</p>\n<pre><code>List&lt;Object&gt; o = new ArrayList&lt;Object&gt;();\nList raw = o;\nList&lt;String&gt; uhoh = (List&lt;String&gt;) raw;\no.add(5);\nString x = uhoh.get(0);\n</code></pre>\n<p>The above code compiles, but you do get a warning. Proving that this injects no code whatsoever (the <code>List</code> is already guaranteed, and the <code>&lt;String&gt;</code> part, that's generics, so is a type assertion, i.e. the compiler just takes your word for it). This code will throw a <code>ClassCastException</code> on the last line if you run it which is bizarre given that there isn't a cast on there. Generally, this usage of the cast operator should only be used as a last resort, and always generates a warning because it is unsafe.</p>\n"}],"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76138793,"answer_count":1,"score":-1,"last_activity_date":1682811336,"creation_date":1682807283,"question_id":76138729,"body_markdown":"I have the following classes:\r\n\r\nShape\r\n   Rectangle\r\n      Square\r\n\r\nShape is the parent class , Rectangle extends Shape and Square extends Rectangle. I use\r\nStringBuilder and the following code:\r\n\r\n    for (int i = 0; i &lt; 2; i++){\r\n        x = Math.random() * 100;\r\n        y = Math.random() * 100;\r\n\r\n                      \r\n        if (i % 2 == 0){\r\n            width = Math.random() * 100;\r\n            height = Math.random() * 100;\r\n            Rectangle z = new Rectangle(x, y, height, width);\r\n            list.add(z);\r\n        }else if (i % 2 == 1){\r\n            side = Math.random() * 100;\r\n            Square z = new Square(x, y, side);\r\n            list.add(z);\r\n        }\r\n    }\r\n\r\n    for(Shape s : list){\r\n       System.out.println(s.getStr0());\r\n       System.out.println(s.getStr1());\r\n    }\r\n\r\nWill print out the following:\r\n\r\n```\r\nRectangle with height: 91.19 and width: 73.70, Centered at X: 14.21 Y: 81.81\r\nHas area: 6720.81\r\nHas perimeter: 329.78\r\n\r\nSquare with side: 66.42, Centered at X: 36.06 Y: 95.86\r\nHas area: 4411.18\r\nHas perimeter: 265.67\r\n```\r\nIs there a way for me to type cast or convert my square to a rectangle so I\r\nget the following:\r\n\r\n```\r\nRectangle with height: 91.19 and width: 73.70, Centered at X: 14.21 Y: 81.81\r\nHas area: 6720.81\r\nHas perimeter: 329.78\r\n\r\nRectangle with height: 66.42 and width 66.42, Centered at X: 36.06 Y: 95.86\r\nHas area: 4411.18\r\nHas perimeter: 265.67\r\n```\r\nHere&#39;s the complete code:\r\n\r\n```\r\n\r\nimport java.util.ArrayList;\r\npublic class Shape{\r\n    private double x;\r\n    private double y;\r\n    private StringBuilder str = new StringBuilder();\r\n    private StringBuilder str0 = new StringBuilder();\r\n    private StringBuilder str1 = new StringBuilder();\r\n    private StringBuilder str2 = new StringBuilder();\r\n\r\n    public Shape(double x, double y){\r\n        this.x = x;\r\n        this.y = y;  \r\n        String x1 = String.format(&quot;%.2f&quot;,this.x);\r\n        String y1= String.format(&quot;%.2f&quot;,this.y);\r\n        getStr().append(&quot;Centered at X: &quot; + x1 + &quot; Y: &quot; + y1 );\r\n    }\r\n\r\n    public Shape(){\r\n    }\r\n\r\n    public static void main(String[] args){\r\n        System.out.println(&#39;\\u000C&#39;);\r\n\r\n        ArrayList&lt;Shape&gt; list = new ArrayList&lt;Shape&gt;();\r\n        double x;\r\n        double y;        \r\n        double height;\r\n        double width;\r\n        double side;\r\n\r\n        for (int i = 0; i &lt; 2; i++){\r\n            x = Math.random() * 100;\r\n            y = Math.random() * 100;\r\n\r\n            if (i % 2 == 0){\r\n                width = Math.random() * 100;\r\n                height = Math.random() * 100;\r\n                Rectangle z = new Rectangle(x, y, height, width);\r\n                list.add(z);\r\n            }else if (i % 2 == 1{\r\n                side = Math.random() * 100;\r\n                Square z = new Square(x, y, side);\r\n                list.add(z);\r\n            }\r\n        }\r\n\r\n        for(Shape s : list){\r\n            System.out.println(s.getStr0());\r\n            System.out.println(s.getStr1());\r\n        }\r\n    }\r\n    public String toString(){\r\n        String x = String.format(&quot;%.2f&quot;,this.x);\r\n        String y = String.format(&quot;%.2f&quot;,this.y);\r\n                \r\n        return &quot;Centered at X: &quot; + x + &quot; Y: &quot; + y ;\r\n    }\r\n    public double calculateArea(){\r\n        return -999.99;\r\n    }\r\n    public double calculateCircumference(){\r\n        return -999.99;\r\n    }\r\n    public double calculatePerimeter(){\r\n        return -999.99;\r\n    }\r\n    public double getX(){\r\n        return this.x;\r\n    } \r\n    public void setX(double x){\r\n        this.x = x;\r\n    }\r\n    public double getY(){\r\n        return this.y;\r\n    }\r\n    public void setY(double y){\r\n        this.y = y;\r\n    }\r\n    public StringBuilder getStr(){\r\n        return this.str;\r\n    } \r\n    public void setStr(StringBuilder str){\r\n        this.str = str;\r\n    }\r\n    public StringBuilder getStr0(){\r\n        return this.str0;\r\n    }\r\n    public void setStr0(StringBuilder str0){\r\n        this.str0 = str0;\r\n    } \r\n    public StringBuilder getStr1(){\r\n        return this.str1;\r\n    } \r\n    public void setStr1(StringBuilder str1){\r\n        this.str1 = str1;\r\n    }    \r\n}\r\n\r\npublic class Rectangle extends Shape{\r\n    private double height;\r\n    private double width;\r\n    \r\n    public Rectangle(double x, double y, double height, double width){\r\n        super(x, y);\r\n        this.height = height;\r\n        this.width = width;\r\n        \r\n        String area = String.format(&quot;%.2f&quot;,this.calculateArea());\r\n        String perimeter = String.format(&quot;%.2f&quot;,this.calculatePerimeter());\r\n        \r\n        \r\n        \r\n        getStr0().append(toString());        \r\n        getStr1().append(&quot;Has area: &quot; + area + &quot;\\n&quot;);\r\n        getStr1().append(&quot;Has perimeter: &quot; + perimeter + &quot;\\n&quot;);\r\n        \r\n    }\r\n    public Rectangle(){\r\n        \r\n    }\r\n    public double calculateArea(){\r\n        return height * width;\r\n    }\r\n    public double calculatePerimeter(){\r\n        return 2 * height + 2 * width;\r\n    }\r\n    public String toString(){\r\n        \r\n        String height = String.format(&quot;%.2f&quot;,this.height);\r\n        String width = String.format(&quot;%.2f&quot;,this.width);        \r\n        return &quot;Rectangle with height: &quot; + height + &quot; and width: &quot; + width +\r\n        &quot;, &quot; + super.toString();\r\n    }\r\n}\r\n\r\npublic class Square extends Rectangle{\r\n    double side;\r\n    StringBuilder squarestr = new StringBuilder();\r\n\r\n    public Square(double x, double y, double side){\r\n        super(x, y, side, side);\r\n        this.side = side;\r\n\r\n        String area = String.format(&quot;%.2f&quot;,this.calculateArea());\r\n        String perimeter = String.format(&quot;%.2f&quot;,this.calculatePerimeter());\r\n\r\n        getStr0().delete(0,getStr0().length() );\r\n        \r\n\r\n        getStr1().delete(0,getStr1().length() );\r\n\r\n        getStr0().append(toString());\r\n        \r\n\r\n        getStr1().append(&quot;Has area: &quot; + area + &quot;\\n&quot;);\r\n        getStr1().append(&quot;Has perimeter: &quot; + perimeter + &quot;\\n&quot;);\r\n        \r\n        \r\n    }\r\n\r\n    public String toString(){\r\n\r\n        String side = String.format(&quot;%.2f&quot;,this.side);\r\n\r\n        return &quot;Square with side: &quot; + side + &quot;, &quot; + getStr() ;\r\n    }\r\n\r\n    public double calculateArea(){\r\n        return side * side;\r\n    }\r\n\r\n    public double calculatePerimeter(){\r\n        return 4 * side;\r\n    }\r\n}\r\n\r\n","title":"type casting not working on inherited class","body":"<p>I have the following classes:</p>\n<p>Shape\nRectangle\nSquare</p>\n<p>Shape is the parent class , Rectangle extends Shape and Square extends Rectangle. I use\nStringBuilder and the following code:</p>\n<pre><code>for (int i = 0; i &lt; 2; i++){\n    x = Math.random() * 100;\n    y = Math.random() * 100;\n\n                  \n    if (i % 2 == 0){\n        width = Math.random() * 100;\n        height = Math.random() * 100;\n        Rectangle z = new Rectangle(x, y, height, width);\n        list.add(z);\n    }else if (i % 2 == 1){\n        side = Math.random() * 100;\n        Square z = new Square(x, y, side);\n        list.add(z);\n    }\n}\n\nfor(Shape s : list){\n   System.out.println(s.getStr0());\n   System.out.println(s.getStr1());\n}\n</code></pre>\n<p>Will print out the following:</p>\n<pre><code>Rectangle with height: 91.19 and width: 73.70, Centered at X: 14.21 Y: 81.81\nHas area: 6720.81\nHas perimeter: 329.78\n\nSquare with side: 66.42, Centered at X: 36.06 Y: 95.86\nHas area: 4411.18\nHas perimeter: 265.67\n</code></pre>\n<p>Is there a way for me to type cast or convert my square to a rectangle so I\nget the following:</p>\n<pre><code>Rectangle with height: 91.19 and width: 73.70, Centered at X: 14.21 Y: 81.81\nHas area: 6720.81\nHas perimeter: 329.78\n\nRectangle with height: 66.42 and width 66.42, Centered at X: 36.06 Y: 95.86\nHas area: 4411.18\nHas perimeter: 265.67\n</code></pre>\n<p>Here's the complete code:</p>\n<pre><code>\nimport java.util.ArrayList;\npublic class Shape{\n    private double x;\n    private double y;\n    private StringBuilder str = new StringBuilder();\n    private StringBuilder str0 = new StringBuilder();\n    private StringBuilder str1 = new StringBuilder();\n    private StringBuilder str2 = new StringBuilder();\n\n    public Shape(double x, double y){\n        this.x = x;\n        this.y = y;  \n        String x1 = String.format(&quot;%.2f&quot;,this.x);\n        String y1= String.format(&quot;%.2f&quot;,this.y);\n        getStr().append(&quot;Centered at X: &quot; + x1 + &quot; Y: &quot; + y1 );\n    }\n\n    public Shape(){\n    }\n\n    public static void main(String[] args){\n        System.out.println('\\u000C');\n\n        ArrayList&lt;Shape&gt; list = new ArrayList&lt;Shape&gt;();\n        double x;\n        double y;        \n        double height;\n        double width;\n        double side;\n\n        for (int i = 0; i &lt; 2; i++){\n            x = Math.random() * 100;\n            y = Math.random() * 100;\n\n            if (i % 2 == 0){\n                width = Math.random() * 100;\n                height = Math.random() * 100;\n                Rectangle z = new Rectangle(x, y, height, width);\n                list.add(z);\n            }else if (i % 2 == 1{\n                side = Math.random() * 100;\n                Square z = new Square(x, y, side);\n                list.add(z);\n            }\n        }\n\n        for(Shape s : list){\n            System.out.println(s.getStr0());\n            System.out.println(s.getStr1());\n        }\n    }\n    public String toString(){\n        String x = String.format(&quot;%.2f&quot;,this.x);\n        String y = String.format(&quot;%.2f&quot;,this.y);\n                \n        return &quot;Centered at X: &quot; + x + &quot; Y: &quot; + y ;\n    }\n    public double calculateArea(){\n        return -999.99;\n    }\n    public double calculateCircumference(){\n        return -999.99;\n    }\n    public double calculatePerimeter(){\n        return -999.99;\n    }\n    public double getX(){\n        return this.x;\n    } \n    public void setX(double x){\n        this.x = x;\n    }\n    public double getY(){\n        return this.y;\n    }\n    public void setY(double y){\n        this.y = y;\n    }\n    public StringBuilder getStr(){\n        return this.str;\n    } \n    public void setStr(StringBuilder str){\n        this.str = str;\n    }\n    public StringBuilder getStr0(){\n        return this.str0;\n    }\n    public void setStr0(StringBuilder str0){\n        this.str0 = str0;\n    } \n    public StringBuilder getStr1(){\n        return this.str1;\n    } \n    public void setStr1(StringBuilder str1){\n        this.str1 = str1;\n    }    \n}\n\npublic class Rectangle extends Shape{\n    private double height;\n    private double width;\n    \n    public Rectangle(double x, double y, double height, double width){\n        super(x, y);\n        this.height = height;\n        this.width = width;\n        \n        String area = String.format(&quot;%.2f&quot;,this.calculateArea());\n        String perimeter = String.format(&quot;%.2f&quot;,this.calculatePerimeter());\n        \n        \n        \n        getStr0().append(toString());        \n        getStr1().append(&quot;Has area: &quot; + area + &quot;\\n&quot;);\n        getStr1().append(&quot;Has perimeter: &quot; + perimeter + &quot;\\n&quot;);\n        \n    }\n    public Rectangle(){\n        \n    }\n    public double calculateArea(){\n        return height * width;\n    }\n    public double calculatePerimeter(){\n        return 2 * height + 2 * width;\n    }\n    public String toString(){\n        \n        String height = String.format(&quot;%.2f&quot;,this.height);\n        String width = String.format(&quot;%.2f&quot;,this.width);        \n        return &quot;Rectangle with height: &quot; + height + &quot; and width: &quot; + width +\n        &quot;, &quot; + super.toString();\n    }\n}\n\npublic class Square extends Rectangle{\n    double side;\n    StringBuilder squarestr = new StringBuilder();\n\n    public Square(double x, double y, double side){\n        super(x, y, side, side);\n        this.side = side;\n\n        String area = String.format(&quot;%.2f&quot;,this.calculateArea());\n        String perimeter = String.format(&quot;%.2f&quot;,this.calculatePerimeter());\n\n        getStr0().delete(0,getStr0().length() );\n        \n\n        getStr1().delete(0,getStr1().length() );\n\n        getStr0().append(toString());\n        \n\n        getStr1().append(&quot;Has area: &quot; + area + &quot;\\n&quot;);\n        getStr1().append(&quot;Has perimeter: &quot; + perimeter + &quot;\\n&quot;);\n        \n        \n    }\n\n    public String toString(){\n\n        String side = String.format(&quot;%.2f&quot;,this.side);\n\n        return &quot;Square with side: &quot; + side + &quot;, &quot; + getStr() ;\n    }\n\n    public double calculateArea(){\n        return side * side;\n    }\n\n    public double calculatePerimeter(){\n        return 4 * side;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","datepicker","momentjs","formik"],"answers":[{"tags":[],"owner":{"account_id":3197891,"reputation":157,"user_id":2700673,"accept_rate":47,"display_name":"The Old County"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682811291,"creation_date":1682811291,"answer_id":76138932,"question_id":75699768,"body_markdown":"The solution to this was to detect data.$d -- being defined.\r\n\r\n------\r\n\r\n    export function buildFormData(formData, data, parentKey) {\r\n      if(data.$d){\r\n        data = moment(data).format(&#39;YYYY-MM-DD&#39;);\r\n      }\r\n    \r\n      if (data &amp;&amp; typeof data === &#39;object&#39; &amp;&amp; !(data instanceof Date) &amp;&amp; !(data instanceof File)) {\r\n        Object.keys(data).forEach(key =&gt; {\r\n    \r\n    \r\n          if(data[key] instanceof File){\r\n            buildFormData(formData, data[key], parentKey ? `${parentKey}` : key);\r\n          } else {\r\n            buildFormData(formData, data[key], parentKey ? `${parentKey}[${key}]` : key);\r\n          }\r\n    \r\n        });\r\n      } else {\r\n        const value = data == null ? &#39;&#39; : data;\r\n    \r\n        formData.append(parentKey, value);\r\n      }\r\n    }\r\n\r\n","title":"Moment or material ui datepicker object - interfering with formData submissions as a date string","body":"<p>The solution to this was to detect data.$d -- being defined.</p>\n<hr />\n<pre><code>export function buildFormData(formData, data, parentKey) {\n  if(data.$d){\n    data = moment(data).format('YYYY-MM-DD');\n  }\n\n  if (data &amp;&amp; typeof data === 'object' &amp;&amp; !(data instanceof Date) &amp;&amp; !(data instanceof File)) {\n    Object.keys(data).forEach(key =&gt; {\n\n\n      if(data[key] instanceof File){\n        buildFormData(formData, data[key], parentKey ? `${parentKey}` : key);\n      } else {\n        buildFormData(formData, data[key], parentKey ? `${parentKey}[${key}]` : key);\n      }\n\n    });\n  } else {\n    const value = data == null ? '' : data;\n\n    formData.append(parentKey, value);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":3197891,"reputation":157,"user_id":2700673,"accept_rate":47,"display_name":"The Old County"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":538,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76138932,"answer_count":1,"score":1,"last_activity_date":1682811291,"creation_date":1678472739,"question_id":75699768,"body_markdown":"I am working on a java spring application.\r\n\r\nI have material ui date picker - wrapped around a formik field.\r\n\r\nhttps://mui.com/x/api/date-pickers/date-picker/\r\n\r\n- date field\r\n\r\n.\r\n    \r\n    \r\n    import React, { Component } from &#39;react&#39;;    \r\n    //text\r\n\r\n    import TextField from &#39;@mui/material/TextField&#39;;\r\n    \r\n    //date\r\n    import moment from &#39;moment&#39;;\r\n    //import { MuiPickersUtilsProvider, KeyboardDatePicker } from &#39;@material-ui/pickers&#39;;\r\n    //import DateFnsUtils from &quot;@date-io/date-fns&quot;;\r\n    import { AdapterDayjs } from &quot;@mui/x-date-pickers/AdapterDayjs&quot;;\r\n    import { LocalizationProvider } from &quot;@mui/x-date-pickers/LocalizationProvider&quot;;\r\n    import { DatePicker } from &quot;@mui/x-date-pickers/DatePicker&quot;;\r\n    \r\n    class DateField extends Component {\r\n        constructor(props, context) {\r\n          super(props, context);\r\n        }\r\n    \r\n        render() {\r\n          return (\r\n            &lt;LocalizationProvider dateAdapter={AdapterDayjs}&gt;\r\n              &lt;DatePicker\r\n                label={this.props.item.label}\r\n                disablePast={this.props.item.disablePast}\r\n                disableFuture={this.props.item.disableFuture}\r\n                minDate={moment(this.props.item.minDate)}\r\n                maxDate={moment(this.props.item.maxDate)}\r\n                formatDate={(date) =&gt; moment(date).format(&#39;DD-MM-YYYY&#39;).toString()}\r\n                value={this.props.field.value? moment(this.props.field.value).format(&#39;YYYY-MM-DD&#39;): moment().format(&#39;YYYY-MM-DD&#39;)}\r\n                {...this.props.field}\r\n                onChange={(value) =&gt; {\r\n                  this.props.form.setFieldValue(this.props.name, value);\r\n                  this.props.onHandle(this.props.name, value);\r\n                }}\r\n                renderInput={(params) =&gt; {\r\n                    return (&lt;TextField {...params} name={this.props.name} /&gt;)\r\n                }}\r\n              /&gt;\r\n            &lt;/LocalizationProvider&gt;\r\n          )\r\n        }\r\n    }\r\n    \r\n    export default DateField\r\n.\r\n\r\nand it looks like this\r\n[![enter image description here][1]][1]\r\n\r\nin the formframework I initialize it like this\r\n[![enter image description here][2]][2]\r\n\r\nwhen I submit the data and wrap it into a formData function --- I notice that it detects it as an object -- possibly a material ui date object? I am unable to check the typeof this -- as I was trying to see if it was a .isMoment - but its not -- it has a strange syntax and I am unsure how to detect it as a date to make the appropriate code change to a string -- or/and - how to change the datepicker itself to return a string or a moment object?\r\n\r\n[![enter image description here][3]][3]\r\n\r\ncan see a moment object looks different -- what is the best approach here?\r\n\r\n[![enter image description here][4]][4]\r\n\r\nalso - should I have the backend acquire this variable as a String, Date or what? Sometimes its a string other times a weird object.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nreferences\r\n\r\nhttps://stackoverflow.com/questions/45809080/how-to-convert-moment-date-to-a-string-and-remove-the-moment-object\r\n\r\nhttps://stackoverflow.com/questions/31921026/javascript-instanceof-and-moment-js\r\n\r\nhttps://stackoverflow.com/questions/36457220/how-to-test-if-a-variable-is-a-moment-js-object\r\n\r\nhttps://stackoverflow.com/questions/46852979/how-to-get-material-ui-date-picker-value\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hQyYf.png\r\n  [2]: https://i.stack.imgur.com/2H1Ds.png\r\n  [3]: https://i.stack.imgur.com/KusBI.png\r\n  [4]: https://i.stack.imgur.com/SV7Gy.png\r\n  [5]: https://i.stack.imgur.com/qTXlY.png","title":"Moment or material ui datepicker object - interfering with formData submissions as a date string","body":"<p>I am working on a java spring application.</p>\n<p>I have material ui date picker - wrapped around a formik field.</p>\n<p><a href=\"https://mui.com/x/api/date-pickers/date-picker/\" rel=\"nofollow noreferrer\">https://mui.com/x/api/date-pickers/date-picker/</a></p>\n<ul>\n<li>date field</li>\n</ul>\n<p>.</p>\n<pre><code>import React, { Component } from 'react';    \n//text\n\nimport TextField from '@mui/material/TextField';\n\n//date\nimport moment from 'moment';\n//import { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers';\n//import DateFnsUtils from &quot;@date-io/date-fns&quot;;\nimport { AdapterDayjs } from &quot;@mui/x-date-pickers/AdapterDayjs&quot;;\nimport { LocalizationProvider } from &quot;@mui/x-date-pickers/LocalizationProvider&quot;;\nimport { DatePicker } from &quot;@mui/x-date-pickers/DatePicker&quot;;\n\nclass DateField extends Component {\n    constructor(props, context) {\n      super(props, context);\n    }\n\n    render() {\n      return (\n        &lt;LocalizationProvider dateAdapter={AdapterDayjs}&gt;\n          &lt;DatePicker\n            label={this.props.item.label}\n            disablePast={this.props.item.disablePast}\n            disableFuture={this.props.item.disableFuture}\n            minDate={moment(this.props.item.minDate)}\n            maxDate={moment(this.props.item.maxDate)}\n            formatDate={(date) =&gt; moment(date).format('DD-MM-YYYY').toString()}\n            value={this.props.field.value? moment(this.props.field.value).format('YYYY-MM-DD'): moment().format('YYYY-MM-DD')}\n            {...this.props.field}\n            onChange={(value) =&gt; {\n              this.props.form.setFieldValue(this.props.name, value);\n              this.props.onHandle(this.props.name, value);\n            }}\n            renderInput={(params) =&gt; {\n                return (&lt;TextField {...params} name={this.props.name} /&gt;)\n            }}\n          /&gt;\n        &lt;/LocalizationProvider&gt;\n      )\n    }\n}\n\nexport default DateField\n</code></pre>\n<p>.</p>\n<p>and it looks like this\n<a href=\"https://i.stack.imgur.com/hQyYf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hQyYf.png\" alt=\"enter image description here\" /></a></p>\n<p>in the formframework I initialize it like this\n<a href=\"https://i.stack.imgur.com/2H1Ds.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2H1Ds.png\" alt=\"enter image description here\" /></a></p>\n<p>when I submit the data and wrap it into a formData function --- I notice that it detects it as an object -- possibly a material ui date object? I am unable to check the typeof this -- as I was trying to see if it was a .isMoment - but its not -- it has a strange syntax and I am unsure how to detect it as a date to make the appropriate code change to a string -- or/and - how to change the datepicker itself to return a string or a moment object?</p>\n<p><a href=\"https://i.stack.imgur.com/KusBI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KusBI.png\" alt=\"enter image description here\" /></a></p>\n<p>can see a moment object looks different -- what is the best approach here?</p>\n<p><a href=\"https://i.stack.imgur.com/SV7Gy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SV7Gy.png\" alt=\"enter image description here\" /></a></p>\n<p>also - should I have the backend acquire this variable as a String, Date or what? Sometimes its a string other times a weird object.</p>\n<p><a href=\"https://i.stack.imgur.com/qTXlY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qTXlY.png\" alt=\"enter image description here\" /></a></p>\n<p>references</p>\n<p><a href=\"https://stackoverflow.com/questions/45809080/how-to-convert-moment-date-to-a-string-and-remove-the-moment-object\">How to convert moment date to a string and remove the moment object</a></p>\n<p><a href=\"https://stackoverflow.com/questions/31921026/javascript-instanceof-and-moment-js\">JavaScript instanceof and moment.js</a></p>\n<p><a href=\"https://stackoverflow.com/questions/36457220/how-to-test-if-a-variable-is-a-moment-js-object\">How to test if a variable is a Moment.js object?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/46852979/how-to-get-material-ui-date-picker-value\">How to get Material-UI Date Picker value</a></p>\n"},{"tags":["java","sql","spring-boot","microservices","put"],"answers":[{"tags":[],"owner":{"account_id":6440378,"reputation":184,"user_id":4990575,"display_name":"Kurojin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682807862,"creation_date":1682807862,"answer_id":76138762,"question_id":76138685,"body_markdown":"you should have a class corresponding to your resource model, this way spring can deserialise it from the request body : \r\n\r\n    @PutMapping(&quot;/comments&quot;)\r\n    private void actualizaDatos(@RequestBody List&lt;Comment&gt; comments){\r\n    // you probably should return an http status instead of void\r\n    }\r\n\r\n&quot;Comment&quot; being the java class representation of your json object. spring will deserialise an array of json objects into a list of java objects if the model matches.\r\n\r\n    class Comment {\r\n    int idControl;\r\n    String cveEstado;\r\n    (...)\r\n    }\r\n\r\n\r\nnote : it is bad practice in REST to update multiple resources at once, any error in one element will be hard to detect as the whole batch will be in error and the client will have no idea why.","title":"How to modify put method to update an array in SpringBoot App","body":"<p>you should have a class corresponding to your resource model, this way spring can deserialise it from the request body :</p>\n<pre><code>@PutMapping(&quot;/comments&quot;)\nprivate void actualizaDatos(@RequestBody List&lt;Comment&gt; comments){\n// you probably should return an http status instead of void\n}\n</code></pre>\n<p>&quot;Comment&quot; being the java class representation of your json object. spring will deserialise an array of json objects into a list of java objects if the model matches.</p>\n<pre><code>class Comment {\nint idControl;\nString cveEstado;\n(...)\n}\n</code></pre>\n<p>note : it is bad practice in REST to update multiple resources at once, any error in one element will be hard to detect as the whole batch will be in error and the client will have no idea why.</p>\n"}],"owner":{"account_id":9015198,"reputation":141,"user_id":7552035,"display_name":"Root93"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682807862,"creation_date":1682806474,"question_id":76138685,"body_markdown":"I currently have a service that receives three parameters and performs the Update without a problem when receiving data from a front with Angular, the data that I save is from the fields of a modifiable table but it does so only per row, with a single id\r\n\r\nThis is my method in the controller, with my service and my query\r\n\r\n         @PutMapping(&quot;/{cveEstado}/{comentario}/{idControl}&quot;)\r\n        private void actualizaDatos(@PathVariable(&quot;cveEstado&quot;) String cveEstado, @PathVariable(&quot;comentario&quot;) String comentario,\r\n                @PathVariable(&quot;idControl&quot;) String idControl){\r\n            controlService.actualizar(cveEstado, comentario, idControl);\r\n            \r\n   \r\n\r\n     }\r\n\r\nservice and repository\r\n\r\n\r\n \r\n\r\n        @Override\r\n        public void actualizar(String cveEstado, String comentario, String idControl) {\r\n            \r\n            repository.actualizarCampos(cveEstado, comentario, idControl);\r\n        }\r\n    \r\n        @Transactional\r\n        @Modifying\r\n        @Query(value = &quot;UPDATE CONTROL C SET CVEESTADO=?1, COMENTARIO=?2 WHERE C.IDCONTROL=?3&quot;, \r\n                nativeQuery = true)\r\n        void actualizarCampos(String cveEstado, String comentario, String idControl);\r\n\r\nbut now I want to save a whole array, that is, I can update all the fields or some but with different ids\r\n\r\nfor example\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NrvGe.png\r\n\r\nHow should I modify my service and m my query to receive the data like this, someone help me please \r\n\r\nthanks","title":"How to modify put method to update an array in SpringBoot App","body":"<p>I currently have a service that receives three parameters and performs the Update without a problem when receiving data from a front with Angular, the data that I save is from the fields of a modifiable table but it does so only per row, with a single id</p>\n<p>This is my method in the controller, with my service and my query</p>\n<pre><code>     @PutMapping(&quot;/{cveEstado}/{comentario}/{idControl}&quot;)\n    private void actualizaDatos(@PathVariable(&quot;cveEstado&quot;) String cveEstado, @PathVariable(&quot;comentario&quot;) String comentario,\n            @PathVariable(&quot;idControl&quot;) String idControl){\n        controlService.actualizar(cveEstado, comentario, idControl);\n        \n\n\n }\n</code></pre>\n<p>service and repository</p>\n<pre><code>    @Override\n    public void actualizar(String cveEstado, String comentario, String idControl) {\n        \n        repository.actualizarCampos(cveEstado, comentario, idControl);\n    }\n\n    @Transactional\n    @Modifying\n    @Query(value = &quot;UPDATE CONTROL C SET CVEESTADO=?1, COMENTARIO=?2 WHERE C.IDCONTROL=?3&quot;, \n            nativeQuery = true)\n    void actualizarCampos(String cveEstado, String comentario, String idControl);\n</code></pre>\n<p>but now I want to save a whole array, that is, I can update all the fields or some but with different ids</p>\n<p>for example</p>\n<p><a href=\"https://i.stack.imgur.com/NrvGe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NrvGe.png\" alt=\"enter image description here\" /></a></p>\n<p>How should I modify my service and m my query to receive the data like this, someone help me please</p>\n<p>thanks</p>\n"},{"tags":["java","kotlin","data-structures","filter","hashmap"],"answers":[{"tags":[],"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682806331,"creation_date":1682806331,"answer_id":76138680,"question_id":76137097,"body_markdown":"I&#39;m having trouble following the problem (honestly some example data and expected results for different situations would help). But your solution basically filters `flightsList`, so you only get the `FlightCardModel`s that hold a match for **every** entry in `segmentStops`, i.e. a segment with the same airport code / stop number pair? So you&#39;re looking for all the flights that contain all the segments in `segmentsList`, is that right?\r\n\r\n(I&#39;m ignoring the `else` statement that basically matches everything and makes the rest of the `when` block redundant, I&#39;m assuming you are actually trying to match the stop numbers)\r\n\r\nYou can filter that like this:\r\n\r\n````\r\nflightsList.filter { flight -&gt;\r\n    segmentStops.all { (code, stopsButton) -&gt;\r\n        flight.contains {\r\n            it.departureAirportCode == code &amp;&amp; it.stops == stopsButton.stop\r\n        }\r\n    }\r\n}\r\n````\r\n\r\nI&#39;m not sure what you actually want to do with a `List&lt;StopsButtonModel&gt;`, but assuming you&#39;re looking for *a single match* (i.e. your `segmentStops` has that particular stop number associated with the airport code) you can change it to this:\r\n\r\n````\r\nflight.contains { flightSegment -&gt;\r\n    flightSegment.departureAirportCode == code &amp;&amp; stopsButton.any {\r\n        it.stop == flightSegment.stops\r\n    }\r\n}\r\n````\r\n\r\nSo now an entry in `segmentsList` will match if it has a matching departure code, and one of its associated stops matches.\r\n\r\n----\r\n\r\nI&#39;m not really sure what you want with the bit about &quot;returning all items&quot; if `segmentsList` doesn&#39;t contain the destination code at all, or if it doesn&#39;t have any stops associated with the code. That seems to be the opposite of filtering on a match? Are you just looking to reject segments that **do** have the destination code and **do** have some stop numbers associated, but they&#39;re not the right numbers? Without knowing exactly what you&#39;re trying to do, I can&#39;t suggest how and where to add that logic","title":"How to filter a List based on a Map that have a List as value in Kotlin/Java?","body":"<p>I'm having trouble following the problem (honestly some example data and expected results for different situations would help). But your solution basically filters <code>flightsList</code>, so you only get the <code>FlightCardModel</code>s that hold a match for <strong>every</strong> entry in <code>segmentStops</code>, i.e. a segment with the same airport code / stop number pair? So you're looking for all the flights that contain all the segments in <code>segmentsList</code>, is that right?</p>\n<p>(I'm ignoring the <code>else</code> statement that basically matches everything and makes the rest of the <code>when</code> block redundant, I'm assuming you are actually trying to match the stop numbers)</p>\n<p>You can filter that like this:</p>\n<pre><code>flightsList.filter { flight -&gt;\n    segmentStops.all { (code, stopsButton) -&gt;\n        flight.contains {\n            it.departureAirportCode == code &amp;&amp; it.stops == stopsButton.stop\n        }\n    }\n}\n</code></pre>\n<p>I'm not sure what you actually want to do with a <code>List&lt;StopsButtonModel&gt;</code>, but assuming you're looking for <em>a single match</em> (i.e. your <code>segmentStops</code> has that particular stop number associated with the airport code) you can change it to this:</p>\n<pre><code>flight.contains { flightSegment -&gt;\n    flightSegment.departureAirportCode == code &amp;&amp; stopsButton.any {\n        it.stop == flightSegment.stops\n    }\n}\n</code></pre>\n<p>So now an entry in <code>segmentsList</code> will match if it has a matching departure code, and one of its associated stops matches.</p>\n<hr />\n<p>I'm not really sure what you want with the bit about &quot;returning all items&quot; if <code>segmentsList</code> doesn't contain the destination code at all, or if it doesn't have any stops associated with the code. That seems to be the opposite of filtering on a match? Are you just looking to reject segments that <strong>do</strong> have the destination code and <strong>do</strong> have some stop numbers associated, but they're not the right numbers? Without knowing exactly what you're trying to do, I can't suggest how and where to add that logic</p>\n"}],"owner":{"account_id":17936402,"reputation":774,"user_id":13032644,"display_name":"imn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76138680,"answer_count":1,"score":0,"last_activity_date":1682806331,"creation_date":1682783215,"question_id":76137097,"body_markdown":"I have a List of FlightCardModel having a structure:\r\n\r\n    val flightsList = mutableStateListOf&lt;FlightCardModel&gt;()\r\n    \r\n    data class FlightCardModel(\r\n        val flightCardSegmentModel: List&lt;FlightCardSegmentModel&gt;,\r\n        ..\r\n    )\r\n\r\nThe FlightCardSegmentModel is having a structure:\r\n\r\n    data class FlightCardSegmentModel(\r\n        val stops: Int,\r\n        val departureAirportCode: String,\r\n        ..\r\n    )\r\n\r\n---\r\n\r\nI also have a Map having a structure:\r\n\r\n    val segmentStops: Map&lt;String, List&lt;StopsButtonModel&gt;&gt;\r\n    \r\n    data class StopsButtonModel(\r\n        val stop: Int\r\n        ..\r\n    )\r\n\r\nI need to filter flightsList based on segmentStops Map.\r\nThe segmentStops map&#39;s keys contains the FlightCardSegmentModel&#39;s departureAirportCode.\r\nAlso, the segmentStops map&#39;s values contains the FlightCardSegmentModel&#39;s stops.\r\nThe real world implementation is that I need to filter flights(FlightCardModel) which have multiple multiple stops(take 0,1,2 stops for simplicity) at different departures(departureAirportCode).\r\n\r\nI wrote some code like this which can only filter only one stop at a time.\r\n\r\n    val count = flightsList.filter {\r\n            segmentStops.keys.all { i -&gt;\r\n                when (segmentStops[i]?.stop) {\r\n                    0 -&gt; {\r\n                        it.flightCardSegmentModel.find { it.departureAirportCode == i }?.stops == 0\r\n                    }\r\n                    1 -&gt; {\r\n                        it.flightCardSegmentModel.find { it.departureAirportCode == i }?.stops == 1\r\n                    }\r\n                    2 -&gt; {\r\n                        it.flightCardSegmentModel.find { it.departureAirportCode == i }?.stops == 2\r\n                    }\r\n                    else -&gt; {\r\n                        it.flightCardSegmentModel.find { it.departureAirportCode == i }?.stops &gt;= 0\r\n                    }\r\n                }\r\n            }\r\n        }.size\r\n\r\nIn the above code, segmentStops map is having a structure:\r\n\r\n    val segmentStops: Map&lt;String, StopsButtonModel&gt;\r\n\r\nHow can i filter in the above same way if the segmentStops map&#39;s values have a list? I.e:\r\n\r\n    val segmentStops: Map&lt;String, List&lt;StopsButtonModel&gt;&gt;\r\n\r\nPS: I also need to return all items if the segmentStops map doesn&#39;t contains the departureAirportCode key or the map&#39;s value list is empty.\r\n\r\nThank you for reading till now :)","title":"How to filter a List based on a Map that have a List as value in Kotlin/Java?","body":"<p>I have a List of FlightCardModel having a structure:</p>\n<pre><code>val flightsList = mutableStateListOf&lt;FlightCardModel&gt;()\n\ndata class FlightCardModel(\n    val flightCardSegmentModel: List&lt;FlightCardSegmentModel&gt;,\n    ..\n)\n</code></pre>\n<p>The FlightCardSegmentModel is having a structure:</p>\n<pre><code>data class FlightCardSegmentModel(\n    val stops: Int,\n    val departureAirportCode: String,\n    ..\n)\n</code></pre>\n<hr />\n<p>I also have a Map having a structure:</p>\n<pre><code>val segmentStops: Map&lt;String, List&lt;StopsButtonModel&gt;&gt;\n\ndata class StopsButtonModel(\n    val stop: Int\n    ..\n)\n</code></pre>\n<p>I need to filter flightsList based on segmentStops Map.\nThe segmentStops map's keys contains the FlightCardSegmentModel's departureAirportCode.\nAlso, the segmentStops map's values contains the FlightCardSegmentModel's stops.\nThe real world implementation is that I need to filter flights(FlightCardModel) which have multiple multiple stops(take 0,1,2 stops for simplicity) at different departures(departureAirportCode).</p>\n<p>I wrote some code like this which can only filter only one stop at a time.</p>\n<pre><code>val count = flightsList.filter {\n        segmentStops.keys.all { i -&gt;\n            when (segmentStops[i]?.stop) {\n                0 -&gt; {\n                    it.flightCardSegmentModel.find { it.departureAirportCode == i }?.stops == 0\n                }\n                1 -&gt; {\n                    it.flightCardSegmentModel.find { it.departureAirportCode == i }?.stops == 1\n                }\n                2 -&gt; {\n                    it.flightCardSegmentModel.find { it.departureAirportCode == i }?.stops == 2\n                }\n                else -&gt; {\n                    it.flightCardSegmentModel.find { it.departureAirportCode == i }?.stops &gt;= 0\n                }\n            }\n        }\n    }.size\n</code></pre>\n<p>In the above code, segmentStops map is having a structure:</p>\n<pre><code>val segmentStops: Map&lt;String, StopsButtonModel&gt;\n</code></pre>\n<p>How can i filter in the above same way if the segmentStops map's values have a list? I.e:</p>\n<pre><code>val segmentStops: Map&lt;String, List&lt;StopsButtonModel&gt;&gt;\n</code></pre>\n<p>PS: I also need to return all items if the segmentStops map doesn't contains the departureAirportCode key or the map's value list is empty.</p>\n<p>Thank you for reading till now :)</p>\n"},{"tags":["java","eclipse","tomcat","jsf"],"answers":[{"tags":[],"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682804000,"creation_date":1682804000,"answer_id":76138530,"question_id":76133642,"body_markdown":"Some caveats first:\r\n\r\n - this uses Java 19, and JSF 4 (different from the request in the question).\r\n - but it does use Tomcat 10.1 (matching the question).\r\n - it places the web files in a directory external to the application (see below). This may be a **bad approach**, but I have not found a good way to reference the web files when they are located in the built JAR, in `/resources`.\r\n - this is a bare-bones (minimal) set-up.\r\n\r\nYou can modify the `pom.xml` - I have not tried your specific target versions.\r\n\r\nI have also only verified this with a basic &quot;hello world&quot; style Faces page.\r\n\r\n---\r\n\r\nThe `pom.xml` dependencies:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\r\n    &lt;version&gt;10.1.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n    &lt;version&gt;10.1.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-embed-websocket&lt;/artifactId&gt;\r\n    &lt;version&gt;10.1.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.glassfish&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.faces&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.weld.servlet&lt;/groupId&gt;\r\n    &lt;artifactId&gt;weld-servlet-shaded&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.3.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.servlet.jsp.jstl&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.servlet.jsp.jstl-api&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n---\r\n\r\nStructure for `myDocBase` - the external location of all web files:\r\n\r\n```\r\nmyDocBase\r\n|\r\n|-- META-INF\r\n|   |\r\n|   |-- beans.xml  (empty file)\r\n|\r\n|-- WEB-INF\r\n|   |\r\n|   |-- faces-config.xml\r\n|   |-- web.xml\r\n|\r\n|-- hello.xhtml\r\n```\r\n\r\n`web.xml`:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app\r\n    xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd&quot;\r\n    version=&quot;6.0&quot;\r\n&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;facesServlet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;jakarta.faces.webapp.FacesServlet&lt;/servlet-class&gt;\r\n    &lt;/servlet&gt;\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;facesServlet&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;*.xhtml&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n```\r\n\r\nI have not tried this, but I expect you could declare the servlet programmatically - something like:\r\n\r\n```java\r\nTomcat.addServlet(ctx, &quot;facesServlet&quot;, &quot;jakarta.faces.webapp.FacesServlet&quot;);\r\nctx.addServletMappingDecoded(&quot;*.xhtml&quot;, &quot;facesServlet&quot;);\r\n```\r\n\r\n`faces-config.xml`:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;faces-config\r\n    xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-facesconfig_4_0.xsd&quot;\r\n    version=&quot;4.0&quot;\r\n&gt;\r\n    &lt;!-- Put any faces config here. --&gt;\r\n&lt;/faces-config&gt;\r\n```\r\n\r\n---\r\n\r\nThe Faces file `hello.xhtml`:\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;\r\n      xmlns:f=&quot;jakarta.faces.core&quot;\r\n      xmlns:h=&quot;jakarta.faces.html&quot;&gt;\r\n    &lt;h:head&gt;\r\n        &lt;title&gt;Hello, World!&lt;/title&gt;\r\n    &lt;/h:head&gt;\r\n    &lt;h:body&gt;\r\n        &lt;h:form&gt;\r\n            &lt;h:outputLabel for=&quot;name&quot; value=&quot;Enter your name&quot; required=&quot;true&quot; /&gt;\r\n            &lt;h:inputText id=&quot;name&quot; value=&quot;#{hello.name}&quot; /&gt;\r\n            &lt;h:message for=&quot;name&quot; /&gt;\r\n            &lt;br/&gt;\r\n            &lt;h:commandButton value=&quot;Say hello&quot; action=&quot;#{hello.createMessage}&quot;&gt;\r\n                &lt;f:ajax execute=&quot;@form&quot; render=&quot;@form&quot; /&gt;\r\n            &lt;/h:commandButton&gt;\r\n            &lt;br /&gt;\r\n            #{hello.message}\r\n        &lt;/h:form&gt;\r\n    &lt;/h:body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n---\r\n\r\nThe `Faces.java` bean:\r\n\r\n```java\r\nimport jakarta.enterprise.context.RequestScoped;\r\nimport jakarta.inject.Named;\r\n\r\n@Named\r\n@RequestScoped\r\npublic class Hello {\r\n\r\n    private String name;\r\n    private String message;\r\n\r\n    public void createMessage() {\r\n        message = &quot;Hello, &quot; + name + &quot;!&quot;;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n}\r\n```\r\n\r\n---\r\n\r\nThe Tomcat launcher with the `main` method:\r\n\r\n```java\r\nimport jakarta.servlet.ServletException;\r\nimport java.io.File;\r\nimport org.apache.catalina.Context;\r\nimport org.apache.catalina.LifecycleException;\r\nimport org.apache.catalina.connector.Connector;\r\nimport org.apache.catalina.core.AprLifecycleListener;\r\nimport org.apache.catalina.core.StandardServer;\r\nimport org.apache.catalina.startup.Tomcat;\r\n\r\npublic class MyApp {\r\n\r\n    public static void main(String[] args) throws LifecycleException {\r\n        String webappDirLocation = &quot;src/main/resources/&quot;;\r\n        Tomcat tomcat = new Tomcat();\r\n        Connector conn = new Connector();\r\n        conn.setPort(8080);\r\n        tomcat.setConnector(conn);\r\n\r\n        tomcat.setBaseDir(&quot;.&quot;);\r\n        tomcat.getHost().setAppBase(&quot;.&quot;);\r\n        tomcat.setSilent(false);\r\n\r\n        Context ctx = tomcat.addWebapp(&quot;/&quot;, new File(webappDirLocation).getAbsolutePath());\r\n        tomcat.start();\r\n        tomcat.getServer().await();\r\n    }\r\n\r\n}\r\n```\r\n\r\n---\r\n\r\nAt the command line, assuming all the supporting JARs are in a `lib` directory; and (as noted above) the `myDocBase` directory is in the same parent directory as the JAR file:\r\n\r\n    java -cp lib/*;MyEmbeddedJsfDemo.jar org.me.App\r\n\r\nStart-up log:\r\n\r\n```\r\nApr 29, 2023 5:22:45 P.M. org.apache.catalina.core.StandardContext setPath\r\nApr 29, 2023 5:22:45 P.M. org.apache.coyote.AbstractProtocol init\r\nINFO: Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\r\nApr 29, 2023 5:22:45 P.M. org.apache.catalina.core.StandardService startInternal\r\nINFO: Starting service [Tomcat]\r\nApr 29, 2023 5:22:45 P.M. org.apache.catalina.core.StandardEngine startInternal\r\nINFO: Starting Servlet engine: [Apache Tomcat/10.1.5]\r\nApr 29, 2023 5:22:45 P.M. org.apache.catalina.startup.ContextConfig getDefaultWebXmlFragment\r\nINFO: No global web.xml found\r\nApr 29, 2023 5:22:46 P.M. org.apache.jasper.servlet.TldScanner scanJars\r\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\nApr 29, 2023 5:22:46 P.M. org.jboss.weld.environment.servlet.EnhancedListener onStartup\r\nINFO: WELD-ENV-001008: Initialize Weld using ServletContainerInitializer\r\nApr 29, 2023 5:22:46 P.M. org.jboss.weld.bootstrap.WeldStartup &lt;clinit&gt;\r\nINFO: WELD-000900: 4.0.3 (Final)\r\nApr 29, 2023 5:22:47 P.M. org.jboss.weld.bootstrap.WeldStartup startContainer\r\nINFO: WELD-000101: Transactional services not available. Injection of @Inject UserTransaction not available. Transactional observers will be invoked synchronously.\r\nApr 29, 2023 5:22:47 P.M. org.jboss.weld.environment.tomcat.TomcatContainer initialize\r\nINFO: WELD-ENV-001100: Tomcat 7+ detected, CDI injection will be available in Servlets, Filters and Listeners.\r\nApr 29, 2023 5:22:47 P.M. com.sun.faces.config.ConfigureListener contextInitialized\r\nINFO: Initializing Mojarra 4.0.2 for context &#39;&#39;\r\nApr 29, 2023 5:22:47 P.M. com.sun.faces.spi.InjectionProviderFactory createInstance\r\nINFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.\r\nApr 29, 2023 5:22:47 P.M. org.hibernate.validator.internal.util.Version &lt;clinit&gt;\r\nINFO: HV000001: Hibernate Validator 8.0.0.Final\r\nApr 29, 2023 5:22:48 P.M. org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [&quot;http-nio-8080&quot;]\r\n```","title":"How do I add to a project with JSF 3.0 an embedded tomcat server 10.1.5 that runs from a main","body":"<p>Some caveats first:</p>\n<ul>\n<li>this uses Java 19, and JSF 4 (different from the request in the question).</li>\n<li>but it does use Tomcat 10.1 (matching the question).</li>\n<li>it places the web files in a directory external to the application (see below). This may be a <strong>bad approach</strong>, but I have not found a good way to reference the web files when they are located in the built JAR, in <code>/resources</code>.</li>\n<li>this is a bare-bones (minimal) set-up.</li>\n</ul>\n<p>You can modify the <code>pom.xml</code> - I have not tried your specific target versions.</p>\n<p>I have also only verified this with a basic &quot;hello world&quot; style Faces page.</p>\n<hr />\n<p>The <code>pom.xml</code> dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n    &lt;version&gt;10.1.5&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n    &lt;version&gt;10.1.5&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-websocket&lt;/artifactId&gt;\n    &lt;version&gt;10.1.5&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.faces&lt;/artifactId&gt;\n    &lt;version&gt;4.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.weld.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;weld-servlet-shaded&lt;/artifactId&gt;\n    &lt;version&gt;4.0.3.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.servlet.jsp.jstl&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.servlet.jsp.jstl-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<hr />\n<p>Structure for <code>myDocBase</code> - the external location of all web files:</p>\n<pre><code>myDocBase\n|\n|-- META-INF\n|   |\n|   |-- beans.xml  (empty file)\n|\n|-- WEB-INF\n|   |\n|   |-- faces-config.xml\n|   |-- web.xml\n|\n|-- hello.xhtml\n</code></pre>\n<p><code>web.xml</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app\n    xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd&quot;\n    version=&quot;6.0&quot;\n&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;facesServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;jakarta.faces.webapp.FacesServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;facesServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;*.xhtml&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>I have not tried this, but I expect you could declare the servlet programmatically - something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Tomcat.addServlet(ctx, &quot;facesServlet&quot;, &quot;jakarta.faces.webapp.FacesServlet&quot;);\nctx.addServletMappingDecoded(&quot;*.xhtml&quot;, &quot;facesServlet&quot;);\n</code></pre>\n<p><code>faces-config.xml</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;faces-config\n    xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-facesconfig_4_0.xsd&quot;\n    version=&quot;4.0&quot;\n&gt;\n    &lt;!-- Put any faces config here. --&gt;\n&lt;/faces-config&gt;\n</code></pre>\n<hr />\n<p>The Faces file <code>hello.xhtml</code>:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;\n      xmlns:f=&quot;jakarta.faces.core&quot;\n      xmlns:h=&quot;jakarta.faces.html&quot;&gt;\n    &lt;h:head&gt;\n        &lt;title&gt;Hello, World!&lt;/title&gt;\n    &lt;/h:head&gt;\n    &lt;h:body&gt;\n        &lt;h:form&gt;\n            &lt;h:outputLabel for=&quot;name&quot; value=&quot;Enter your name&quot; required=&quot;true&quot; /&gt;\n            &lt;h:inputText id=&quot;name&quot; value=&quot;#{hello.name}&quot; /&gt;\n            &lt;h:message for=&quot;name&quot; /&gt;\n            &lt;br/&gt;\n            &lt;h:commandButton value=&quot;Say hello&quot; action=&quot;#{hello.createMessage}&quot;&gt;\n                &lt;f:ajax execute=&quot;@form&quot; render=&quot;@form&quot; /&gt;\n            &lt;/h:commandButton&gt;\n            &lt;br /&gt;\n            #{hello.message}\n        &lt;/h:form&gt;\n    &lt;/h:body&gt;\n&lt;/html&gt;\n</code></pre>\n<hr />\n<p>The <code>Faces.java</code> bean:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.enterprise.context.RequestScoped;\nimport jakarta.inject.Named;\n\n@Named\n@RequestScoped\npublic class Hello {\n\n    private String name;\n    private String message;\n\n    public void createMessage() {\n        message = &quot;Hello, &quot; + name + &quot;!&quot;;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n}\n</code></pre>\n<hr />\n<p>The Tomcat launcher with the <code>main</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.servlet.ServletException;\nimport java.io.File;\nimport org.apache.catalina.Context;\nimport org.apache.catalina.LifecycleException;\nimport org.apache.catalina.connector.Connector;\nimport org.apache.catalina.core.AprLifecycleListener;\nimport org.apache.catalina.core.StandardServer;\nimport org.apache.catalina.startup.Tomcat;\n\npublic class MyApp {\n\n    public static void main(String[] args) throws LifecycleException {\n        String webappDirLocation = &quot;src/main/resources/&quot;;\n        Tomcat tomcat = new Tomcat();\n        Connector conn = new Connector();\n        conn.setPort(8080);\n        tomcat.setConnector(conn);\n\n        tomcat.setBaseDir(&quot;.&quot;);\n        tomcat.getHost().setAppBase(&quot;.&quot;);\n        tomcat.setSilent(false);\n\n        Context ctx = tomcat.addWebapp(&quot;/&quot;, new File(webappDirLocation).getAbsolutePath());\n        tomcat.start();\n        tomcat.getServer().await();\n    }\n\n}\n</code></pre>\n<hr />\n<p>At the command line, assuming all the supporting JARs are in a <code>lib</code> directory; and (as noted above) the <code>myDocBase</code> directory is in the same parent directory as the JAR file:</p>\n<pre><code>java -cp lib/*;MyEmbeddedJsfDemo.jar org.me.App\n</code></pre>\n<p>Start-up log:</p>\n<pre><code>Apr 29, 2023 5:22:45 P.M. org.apache.catalina.core.StandardContext setPath\nApr 29, 2023 5:22:45 P.M. org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\nApr 29, 2023 5:22:45 P.M. org.apache.catalina.core.StandardService startInternal\nINFO: Starting service [Tomcat]\nApr 29, 2023 5:22:45 P.M. org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet engine: [Apache Tomcat/10.1.5]\nApr 29, 2023 5:22:45 P.M. org.apache.catalina.startup.ContextConfig getDefaultWebXmlFragment\nINFO: No global web.xml found\nApr 29, 2023 5:22:46 P.M. org.apache.jasper.servlet.TldScanner scanJars\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nApr 29, 2023 5:22:46 P.M. org.jboss.weld.environment.servlet.EnhancedListener onStartup\nINFO: WELD-ENV-001008: Initialize Weld using ServletContainerInitializer\nApr 29, 2023 5:22:46 P.M. org.jboss.weld.bootstrap.WeldStartup &lt;clinit&gt;\nINFO: WELD-000900: 4.0.3 (Final)\nApr 29, 2023 5:22:47 P.M. org.jboss.weld.bootstrap.WeldStartup startContainer\nINFO: WELD-000101: Transactional services not available. Injection of @Inject UserTransaction not available. Transactional observers will be invoked synchronously.\nApr 29, 2023 5:22:47 P.M. org.jboss.weld.environment.tomcat.TomcatContainer initialize\nINFO: WELD-ENV-001100: Tomcat 7+ detected, CDI injection will be available in Servlets, Filters and Listeners.\nApr 29, 2023 5:22:47 P.M. com.sun.faces.config.ConfigureListener contextInitialized\nINFO: Initializing Mojarra 4.0.2 for context ''\nApr 29, 2023 5:22:47 P.M. com.sun.faces.spi.InjectionProviderFactory createInstance\nINFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.\nApr 29, 2023 5:22:47 P.M. org.hibernate.validator.internal.util.Version &lt;clinit&gt;\nINFO: HV000001: Hibernate Validator 8.0.0.Final\nApr 29, 2023 5:22:48 P.M. org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;http-nio-8080&quot;]\n</code></pre>\n"}],"owner":{"account_id":28450026,"reputation":1,"user_id":21768232,"display_name":"Johan Silva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":346,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682804000,"creation_date":1682720980,"question_id":76133642,"body_markdown":"I have to make a java web project with JSF 3.0, java 17, CDI 2.0 and run from a main running an embedded tomcat 10.1.5 server, but I have not succeeded because I have found very little information on how to do it, someone please Can you help me by telling me how to do it and that it works correctly? (no spring boot)\r\n\r\nI tried an old example of an embedded tomcat 9.0.0.M6 made for JSP but trying to adapt it for JSF didn&#39;t work at all","title":"How do I add to a project with JSF 3.0 an embedded tomcat server 10.1.5 that runs from a main","body":"<p>I have to make a java web project with JSF 3.0, java 17, CDI 2.0 and run from a main running an embedded tomcat 10.1.5 server, but I have not succeeded because I have found very little information on how to do it, someone please Can you help me by telling me how to do it and that it works correctly? (no spring boot)</p>\n<p>I tried an old example of an embedded tomcat 9.0.0.M6 made for JSP but trying to adapt it for JSF didn't work at all</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1636453286,"post_id":69890096,"comment_id":123555031,"body_markdown":"What do you mean by not seeing the data? Do you have data in the database? And how does the SQL look like that Hibernate is executing?","body":"What do you mean by not seeing the data? Do you have data in the database? And how does the SQL look like that Hibernate is executing?"},{"owner":{"account_id":12469633,"reputation":99,"user_id":9078270,"display_name":"Craig"},"score":0,"creation_date":1636500082,"post_id":69890096,"comment_id":123573135,"body_markdown":"Hi Simon, there is data in the database, and my localhost:8080 looks like this instead of displaying items in the database ```{\n  &quot;_embedded&quot; : {\n    &quot;product&quot; : [ {\n      &quot;_links&quot; : {\n        &quot;self&quot; : {\n          &quot;href&quot; : &quot;http://localhost:8080/api/product/1&quot;\n        },\n        &quot;product&quot; : {\n          &quot;href&quot; : &quot;http://localhost:8080/api/product/1&quot;\n        },\n        &quot;category&quot; : {\n          &quot;href&quot; : &quot;http://localhost:8080/api/product/1/category&quot;\n        }\n      }\n    }```","body":"Hi Simon, there is data in the database, and my localhost:8080 looks like this instead of displaying items in the database <code>{   &quot;_embedded&quot; : {     &quot;product&quot; : [ {       &quot;_links&quot; : {         &quot;self&quot; : {           &quot;href&quot; : &quot;http:&#47;&#47;localhost:8080&#47;api&#47;product&#47;1&quot;         },         &quot;product&quot; : {           &quot;href&quot; : &quot;http:&#47;&#47;localhost:8080&#47;api&#47;product&#47;1&quot;         },         &quot;category&quot; : {           &quot;href&quot; : &quot;http:&#47;&#47;localhost:8080&#47;api&#47;product&#47;1&#47;category&quot;         }       }     }</code>"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1636527027,"post_id":69890096,"comment_id":123577618,"body_markdown":"That&#39;s correct. Because you are using Spring Data REST and this uses HATEOS. Please read the docs: https://docs.spring.io/spring-data/rest/docs/3.5.6/reference/html/#reference","body":"That&#39;s correct. Because you are using Spring Data REST and this uses HATEOS. Please read the docs: <a href=\"https://docs.spring.io/spring-data/rest/docs/3.5.6/reference/html/#reference\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/rest/docs/3.5.6/reference/html/&hellip;</a>"}],"owner":{"account_id":12469633,"reputation":99,"user_id":9078270,"display_name":"Craig"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682803607,"creation_date":1636406598,"question_id":69890096,"body_markdown":"I am doing a tutorial via Udemy and getting stuck with my data not showing up. I can&#39;t explain much of this due to my experience level, but pretty sure the problem is with this @RepositoryRestResource and configuration. Nothing is throwing errors, just not seeing my data.\r\n\r\n    package com.luv2code.ecommerce.dao;\r\n    \r\n    import com.luv2code.ecommerce.entity.Product;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.data.rest.core.annotation.RepositoryRestResource;\r\n    import org.springframework.stereotype.Repository;\r\n    import org.springframework.web.bind.annotation.CrossOrigin;\r\n    \r\n    \r\n    @CrossOrigin(&quot;http://localhost:4200&quot;)\r\n    @Repository\r\n    @RepositoryRestResource(collectionResourceRel = &quot;product&quot;, path = &quot;product&quot;)\r\n    public interface ProductRepository extends JpaRepository&lt;Product, Long&gt;\r\n    {\r\n    \r\n    }\r\n\r\n\r\n[![MyDataRestConfig.java][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/prlOh.png","title":"Not seeing my data with @RepositoryRestResource","body":"<p>I am doing a tutorial via Udemy and getting stuck with my data not showing up. I can't explain much of this due to my experience level, but pretty sure the problem is with this @RepositoryRestResource and configuration. Nothing is throwing errors, just not seeing my data.</p>\n<pre><code>package com.luv2code.ecommerce.dao;\n\nimport com.luv2code.ecommerce.entity.Product;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.rest.core.annotation.RepositoryRestResource;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.web.bind.annotation.CrossOrigin;\n\n\n@CrossOrigin(&quot;http://localhost:4200&quot;)\n@Repository\n@RepositoryRestResource(collectionResourceRel = &quot;product&quot;, path = &quot;product&quot;)\npublic interface ProductRepository extends JpaRepository&lt;Product, Long&gt;\n{\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/prlOh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/prlOh.png\" alt=\"MyDataRestConfig.java\" /></a></p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1330451,"reputation":14745,"user_id":1274485,"accept_rate":71,"display_name":"Yann39"},"score":0,"creation_date":1682797061,"post_id":76138048,"comment_id":134272781,"body_markdown":"Please share what you tried, what do you mean by &quot;several different ways&quot; ?","body":"Please share what you tried, what do you mean by &quot;several different ways&quot; ?"},{"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"score":0,"creation_date":1682797937,"post_id":76138048,"comment_id":134272910,"body_markdown":"@Yann39 examples added","body":"@Yann39 examples added"},{"owner":{"account_id":28367824,"reputation":73,"user_id":21696871,"display_name":"fnymmm"},"score":1,"creation_date":1682798004,"post_id":76138048,"comment_id":134272918,"body_markdown":"Have you tried it as a post request?","body":"Have you tried it as a post request?"},{"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"score":0,"creation_date":1682798572,"post_id":76138048,"comment_id":134272984,"body_markdown":"Using POST and @RequestBody annotation will work, but i would like to implement it using the GET method","body":"Using POST and @RequestBody annotation will work, but i would like to implement it using the GET method"},{"owner":{"account_id":1330451,"reputation":14745,"user_id":1274485,"accept_rate":71,"display_name":"Yann39"},"score":0,"creation_date":1682798642,"post_id":76138048,"comment_id":134272994,"body_markdown":"Any reason you use `@ModelAttribute` ?","body":"Any reason you use <code>@ModelAttribute</code> ?"},{"owner":{"account_id":62234,"reputation":19819,"user_id":185034,"accept_rate":100,"display_name":"Paul"},"score":0,"creation_date":1682798776,"post_id":76138048,"comment_id":134273013,"body_markdown":"It would be better to `POST` or `PUT` the data because query parameters aren&#39;t really suited to passing objects.  However, if the objects all have the same fields you could pass multiple lists of values and reconstitute the objects in controller.  This may help with that: https://stackoverflow.com/questions/4596351/binding-a-list-in-requestparam","body":"It would be better to <code>POST</code> or <code>PUT</code> the data because query parameters aren&#39;t really suited to passing objects.  However, if the objects all have the same fields you could pass multiple lists of values and reconstitute the objects in controller.  This may help with that: <a href=\"https://stackoverflow.com/questions/4596351/binding-a-list-in-requestparam\" title=\"binding a list in requestparam\">stackoverflow.com/questions/4596351/&hellip;</a>"},{"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"score":0,"creation_date":1682799023,"post_id":76138048,"comment_id":134273050,"body_markdown":"I have a lot of potential query parameters with which I would like to extend the search.  `@ModelAttribute` allow me to bind them all to an object and pass it to facade, instead of defining each parameter with `@RequestParam` annotation.","body":"I have a lot of potential query parameters with which I would like to extend the search.  <code>@ModelAttribute</code> allow me to bind them all to an object and pass it to facade, instead of defining each parameter with <code>@RequestParam</code> annotation."}],"answers":[{"comments":[{"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"score":0,"creation_date":1682848826,"post_id":76138315,"comment_id":134277038,"body_markdown":"Indeed the data was incorrectly encoded","body":"Indeed the data was incorrectly encoded"}],"tags":[],"owner":{"account_id":1330451,"reputation":14745,"user_id":1274485,"accept_rate":71,"display_name":"Yann39"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682800760,"creation_date":1682800760,"answer_id":76138315,"question_id":76138048,"body_markdown":"Your second example should work, you should be able to pass the values this way :\r\n\r\nhttps://example.com/rss?authors[0].name=Bob&amp;authors[0].authorId=1&amp;authors[1].name=Alice&amp;authors[1].authorId=2&amp;status=active\r\n\r\nI just tried it locally in my environment and it works fine.\r\n\r\nMy test controller :\r\n\r\n```java\r\n@GetMapping(value = &quot;/rss&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\npublic void findRssFeed(@ModelAttribute(&quot;test&quot;) Test test) {\r\n    log.info(&quot;status {}&quot;, test.getStatus());\r\n    for (Test.Author a : test.getAuthors()) {\r\n        log.info(&quot;name {}&quot;, a.getName());\r\n        log.info(&quot;id {}&quot;, a.getAuthorId());\r\n    }\r\n}\r\n```\r\n\r\nThe Powershell GET request :\r\n\r\n```powershell\r\nInvoke-WebRequest -Uri &quot;http://localhost:8080/rss?authors[0].name=Bob&amp;authors[0].authorId=123&amp;authors[1].name=Alice&amp;authors[1].authorId=456&amp;status=active&quot; -Method GET\r\n```\r\nResponse :\r\n\r\n```\r\nc.c.g.controller.rest.TestController  : status active\r\nc.c.g.controller.rest.TestController  : name Bob\r\nc.c.g.controller.rest.TestController  : id 123\r\nc.c.g.controller.rest.TestController  : name Alice\r\nc.c.g.controller.rest.TestController  : id 456\r\n```\r\n\r\nCheck that you correctly encode the URL if you are trying from your browser.\r\n\r\nAnyway if you need to pass a large amount of data, or a very complex object, then using GET may not be the best idea, as everything has to be passed in the query string from the URL.\r\n\r\nEven if you can use body in GET requests (any HTTP request message is allowed to contain a message body), this is not recommended and not considered a good practice.\r\n\r\nIf you need to send complex or large data, simply do a POST request, and send your data in the request body.\r\n\r\n","title":"How to send list of objects in query parameters to spring boot application?","body":"<p>Your second example should work, you should be able to pass the values this way :</p>\n<p><a href=\"https://example.com/rss?authors%5B0%5D.name=Bob&amp;authors%5B0%5D.authorId=1&amp;authors%5B1%5D.name=Alice&amp;authors%5B1%5D.authorId=2&amp;status=active\" rel=\"nofollow noreferrer\">https://example.com/rss?authors[0].name=Bob&amp;authors[0].authorId=1&amp;authors[1].name=Alice&amp;authors[1].authorId=2&amp;status=active</a></p>\n<p>I just tried it locally in my environment and it works fine.</p>\n<p>My test controller :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(value = &quot;/rss&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\npublic void findRssFeed(@ModelAttribute(&quot;test&quot;) Test test) {\n    log.info(&quot;status {}&quot;, test.getStatus());\n    for (Test.Author a : test.getAuthors()) {\n        log.info(&quot;name {}&quot;, a.getName());\n        log.info(&quot;id {}&quot;, a.getAuthorId());\n    }\n}\n</code></pre>\n<p>The Powershell GET request :</p>\n<pre><code>Invoke-WebRequest -Uri &quot;http://localhost:8080/rss?authors[0].name=Bob&amp;authors[0].authorId=123&amp;authors[1].name=Alice&amp;authors[1].authorId=456&amp;status=active&quot; -Method GET\n</code></pre>\n<p>Response :</p>\n<pre><code>c.c.g.controller.rest.TestController  : status active\nc.c.g.controller.rest.TestController  : name Bob\nc.c.g.controller.rest.TestController  : id 123\nc.c.g.controller.rest.TestController  : name Alice\nc.c.g.controller.rest.TestController  : id 456\n</code></pre>\n<p>Check that you correctly encode the URL if you are trying from your browser.</p>\n<p>Anyway if you need to pass a large amount of data, or a very complex object, then using GET may not be the best idea, as everything has to be passed in the query string from the URL.</p>\n<p>Even if you can use body in GET requests (any HTTP request message is allowed to contain a message body), this is not recommended and not considered a good practice.</p>\n<p>If you need to send complex or large data, simply do a POST request, and send your data in the request body.</p>\n"}],"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":982,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76138315,"answer_count":1,"score":0,"last_activity_date":1682800760,"creation_date":1682796656,"question_id":76138048,"body_markdown":"I have a case where I need to implement a search. I want to pass a list of objects as query parameters. Below is a sample code. \r\n\r\nController:\r\n\r\n```java\r\n@RestController\r\n@RequiredArgsConstructor\r\nclass RssFeedController {\r\n    private final RssFeedFacade rssFacade;\r\n\r\n    @GetMapping(value = &quot;/rss&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public RssFeedDto findRssFeed(@ModelAttribute FindRssFeedDto findRssFeedDto) {\r\n        return rssFacade.findRssFeed(findRssFeedDto);\r\n    }\r\n    \r\n}\r\n```\r\n\r\nDto:\r\n\r\n```java\r\n@Value\r\npublic class FindRssFeedDto {\r\n    List&lt;Author&gt; authors;\r\n    FeedStatus status;\r\n\r\n    @Value\r\n    public static class Author {\r\n        String name;\r\n        String authorId;\r\n        // ...\r\n    }\r\n\r\n}\r\n```\r\n\r\nI tried to send **GET** request with list of objects in query parameter, in several different ways like:\r\n - `authors=[{&quot;name&quot;:&quot;name&quot;,&quot;authorId&quot;:&quot;authorId&quot;}]`\r\n - `authors[0].name=name&amp;authors[0].authorId=authorId`\r\n\r\nbut list of authors is always null. I need to prepare a query that will allow me to search by many parameters. Is an additional custom deseriazlizer needed here?","title":"How to send list of objects in query parameters to spring boot application?","body":"<p>I have a case where I need to implement a search. I want to pass a list of objects as query parameters. Below is a sample code.</p>\n<p>Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequiredArgsConstructor\nclass RssFeedController {\n    private final RssFeedFacade rssFacade;\n\n    @GetMapping(value = &quot;/rss&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    public RssFeedDto findRssFeed(@ModelAttribute FindRssFeedDto findRssFeedDto) {\n        return rssFacade.findRssFeed(findRssFeedDto);\n    }\n    \n}\n</code></pre>\n<p>Dto:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value\npublic class FindRssFeedDto {\n    List&lt;Author&gt; authors;\n    FeedStatus status;\n\n    @Value\n    public static class Author {\n        String name;\n        String authorId;\n        // ...\n    }\n\n}\n</code></pre>\n<p>I tried to send <strong>GET</strong> request with list of objects in query parameter, in several different ways like:</p>\n<ul>\n<li><code>authors=[{&quot;name&quot;:&quot;name&quot;,&quot;authorId&quot;:&quot;authorId&quot;}]</code></li>\n<li><code>authors[0].name=name&amp;authors[0].authorId=authorId</code></li>\n</ul>\n<p>but list of authors is always null. I need to prepare a query that will allow me to search by many parameters. Is an additional custom deseriazlizer needed here?</p>\n"},{"tags":["java","parameters","mapstruct","qualifiers"],"answers":[{"tags":[],"owner":{"account_id":8282587,"reputation":382,"user_id":6226761,"display_name":"Edwin M. Cruz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682799777,"creation_date":1682795037,"answer_id":76137938,"question_id":76122115,"body_markdown":"A mapper&#39;s **method signature must provide the reference decorated with @Context** annotation for a **qualifiedByName** method **to use the context**. You can also achieve providing the qualifiedByName method a reference to the **enumDefinitionDao** by auto-wiring the DAO in an abstract class via setter injection, as demonstrated below.  \r\n\r\n    @Service\r\n    @AllArgsConstructor\r\n    public class DefinitionService {\r\n\r\n        // Autowire Bean Approach\r\n        private final EnumValueMapperWithAutowiredBean enumValueMapperWithAutowiredBean;\r\n\r\n        // Context Approach\r\n        private final IEnumDefinitionDao enumDefinitionDao;\r\n        private final EnumValueMapperWithContext enumValueMapperWithContext;\r\n\r\n        public EnumValue doLookupUsingContextApproach(EnumValueBean bean) {\r\n            return enumValueMapperWithContext.toEntity(bean, enumDefinitionDao);\r\n        }\r\n\r\n        public EnumValue doLookupUsingAutowireBeanApproach(EnumValueBean bean) {\r\n            return enumValueMapperWithAutowiredBean.toEntity(bean);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    @Mapper\r\n    public interface EnumValueMapperWithContext {\r\n\r\n        @Mapping(target = &quot;enumDefinition&quot;, source = &quot;enumDefinitionId&quot;, qualifiedByName = &quot;getEnumDefinition&quot;)\r\n        EnumValue toEntity(EnumValueBean enumValueBean, @Context IEnumDefinitionDao enumDefinitionDao);\r\n\r\n        @Mapping(target = &quot;enumDefinitionId&quot;, source = &quot;enumDefinition.name&quot;)\r\n        EnumValueBean toBean(EnumValue enumValue);\r\n\r\n        @Named(&quot;getEnumDefinition&quot;)\r\n        default EnumDefinition getEnumDefinition(\r\n            String enumDefinitionName,\r\n            @Context IEnumDefinitionDao enumDefinitionDao) {\r\n            return enumDefinitionDao.findById(enumDefinitionName).orElse(null);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    @Mapper\r\n    public abstract class EnumValueMapperWithAutowiredBean {\r\n\r\n        protected IEnumDefinitionDao enumDefinitionDao;\r\n\r\n        @Autowired\r\n        public final void setEnumDefinitionDao(IEnumDefinitionDao enumDefinitionDao) {\r\n            this.enumDefinitionDao = enumDefinitionDao;\r\n        }\r\n\r\n        @Mapping(target = &quot;enumDefinition&quot;, source = &quot;enumDefinitionId&quot;, qualifiedByName = &quot;getEnumDefinition&quot;)\r\n        public abstract EnumValue toEntity(EnumValueBean enumValueBean);\r\n\r\n        @Mapping(target = &quot;enumDefinitionId&quot;, source = &quot;enumDefinition.name&quot;)\r\n        public abstract EnumValueBean toBean(EnumValue enumValue);\r\n\r\n        @Named(&quot;getEnumDefinition&quot;)\r\n        EnumDefinition getEnumDefinition(String enumDefinitionName) {\r\n            return enumDefinitionDao.findById(enumDefinitionName).orElse(null);\r\n        }\r\n\r\n    }","title":"Using @Context for a mapstruct mapper is considered like an additional parameter","body":"<p>A mapper's <strong>method signature must provide the reference decorated with @Context</strong> annotation for a <strong>qualifiedByName</strong> method <strong>to use the context</strong>. You can also achieve providing the qualifiedByName method a reference to the <strong>enumDefinitionDao</strong> by auto-wiring the DAO in an abstract class via setter injection, as demonstrated below.</p>\n<pre><code>@Service\n@AllArgsConstructor\npublic class DefinitionService {\n\n    // Autowire Bean Approach\n    private final EnumValueMapperWithAutowiredBean enumValueMapperWithAutowiredBean;\n\n    // Context Approach\n    private final IEnumDefinitionDao enumDefinitionDao;\n    private final EnumValueMapperWithContext enumValueMapperWithContext;\n\n    public EnumValue doLookupUsingContextApproach(EnumValueBean bean) {\n        return enumValueMapperWithContext.toEntity(bean, enumDefinitionDao);\n    }\n\n    public EnumValue doLookupUsingAutowireBeanApproach(EnumValueBean bean) {\n        return enumValueMapperWithAutowiredBean.toEntity(bean);\n    }\n\n}\n\n\n@Mapper\npublic interface EnumValueMapperWithContext {\n\n    @Mapping(target = &quot;enumDefinition&quot;, source = &quot;enumDefinitionId&quot;, qualifiedByName = &quot;getEnumDefinition&quot;)\n    EnumValue toEntity(EnumValueBean enumValueBean, @Context IEnumDefinitionDao enumDefinitionDao);\n\n    @Mapping(target = &quot;enumDefinitionId&quot;, source = &quot;enumDefinition.name&quot;)\n    EnumValueBean toBean(EnumValue enumValue);\n\n    @Named(&quot;getEnumDefinition&quot;)\n    default EnumDefinition getEnumDefinition(\n        String enumDefinitionName,\n        @Context IEnumDefinitionDao enumDefinitionDao) {\n        return enumDefinitionDao.findById(enumDefinitionName).orElse(null);\n    }\n\n}\n\n\n@Mapper\npublic abstract class EnumValueMapperWithAutowiredBean {\n\n    protected IEnumDefinitionDao enumDefinitionDao;\n\n    @Autowired\n    public final void setEnumDefinitionDao(IEnumDefinitionDao enumDefinitionDao) {\n        this.enumDefinitionDao = enumDefinitionDao;\n    }\n\n    @Mapping(target = &quot;enumDefinition&quot;, source = &quot;enumDefinitionId&quot;, qualifiedByName = &quot;getEnumDefinition&quot;)\n    public abstract EnumValue toEntity(EnumValueBean enumValueBean);\n\n    @Mapping(target = &quot;enumDefinitionId&quot;, source = &quot;enumDefinition.name&quot;)\n    public abstract EnumValueBean toBean(EnumValue enumValue);\n\n    @Named(&quot;getEnumDefinition&quot;)\n    EnumDefinition getEnumDefinition(String enumDefinitionName) {\n        return enumDefinitionDao.findById(enumDefinitionName).orElse(null);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":13374965,"reputation":157,"user_id":9652085,"display_name":"Kpo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":986,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682799777,"creation_date":1682609002,"question_id":76122115,"body_markdown":"I have a mapper where I&#39;m trying to use a repository as context so I can fetch my object during the mapping. I spent a lot of time searching how context work and this is what I came up with\r\n\r\n    @Mapper(componentModel = MappingConstants.ComponentModel.SPRING, nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)\r\n    public interface EnumValueMapper {\r\n        @Mapping(target = &quot;enumDefinition&quot;, source = &quot;enumDefinitionId&quot;, qualifiedByName = &quot;getEnumDefinition&quot;)\r\n        EnumValue toEntity(EnumValueBean enumValueBean);\r\n    \r\n        @Mapping(target = &quot;enumDefinitionId&quot;, source = &quot;enumDefinition.name&quot;)\r\n        EnumValueBean toBean(EnumValue enumValue);\r\n    \r\n        @Named(&quot;getEnumDefinition&quot;)\r\n        static EnumDefinition getEnumDefinition(String enumDefinitionName, @Context IEnumDefinitiontDao enumDefinitionDao) {\r\n            return enumDefinitionDao.findById(enumDefinitionName).orElse(null);\r\n        }\r\n    }\r\n\r\nThe issue with this is that I get the error\r\n&gt; Qualifier error. No method found annotated with @Named#value: [\r\n&gt; getEnumDefinition ]. See https://mapstruct.org/faq/#qualifier for more\r\n&gt; info.\r\n\r\ndue to the compiler seeing @Context as a 2nd parameter and not finding a named &quot;getEnumDefinition&quot; that matches the 1 String parameter method. If I remove the @Context parameter the error disappears and the build succeed. I&#39;m confused at what I&#39;m doing wrong because I didn&#39;t see anyone explicitly giving a context inside a @Mapping, they just give their source and the name for the qualifiedByName and it finds the correct method despite the @Context.","title":"Using @Context for a mapstruct mapper is considered like an additional parameter","body":"<p>I have a mapper where I'm trying to use a repository as context so I can fetch my object during the mapping. I spent a lot of time searching how context work and this is what I came up with</p>\n<pre><code>@Mapper(componentModel = MappingConstants.ComponentModel.SPRING, nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT)\npublic interface EnumValueMapper {\n    @Mapping(target = &quot;enumDefinition&quot;, source = &quot;enumDefinitionId&quot;, qualifiedByName = &quot;getEnumDefinition&quot;)\n    EnumValue toEntity(EnumValueBean enumValueBean);\n\n    @Mapping(target = &quot;enumDefinitionId&quot;, source = &quot;enumDefinition.name&quot;)\n    EnumValueBean toBean(EnumValue enumValue);\n\n    @Named(&quot;getEnumDefinition&quot;)\n    static EnumDefinition getEnumDefinition(String enumDefinitionName, @Context IEnumDefinitiontDao enumDefinitionDao) {\n        return enumDefinitionDao.findById(enumDefinitionName).orElse(null);\n    }\n}\n</code></pre>\n<p>The issue with this is that I get the error</p>\n<blockquote>\n<p>Qualifier error. No method found annotated with @Named#value: [\ngetEnumDefinition ]. See <a href=\"https://mapstruct.org/faq/#qualifier\" rel=\"nofollow noreferrer\">https://mapstruct.org/faq/#qualifier</a> for more\ninfo.</p>\n</blockquote>\n<p>due to the compiler seeing @Context as a 2nd parameter and not finding a named &quot;getEnumDefinition&quot; that matches the 1 String parameter method. If I remove the @Context parameter the error disappears and the build succeed. I'm confused at what I'm doing wrong because I didn't see anyone explicitly giving a context inside a @Mapping, they just give their source and the name for the qualifiedByName and it finds the correct method despite the @Context.</p>\n"},{"tags":["java","jboss","spring-security-oauth2"],"answers":[{"tags":[],"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682799751,"creation_date":1682799751,"answer_id":76138245,"question_id":75681098,"body_markdown":"Oddly enough, this was solved by noticing what I thought was a completely different problem. My project uses a &#39;commons&#39; project that I also created. In that, I had a problem in the pom.xml. I was specifying the &quot;maven-compiler-plugin&quot; but had left out the version and Eclipse was complaining. I then noticed that was the only one of my projects that was using that, while the rest used &quot;spring-boot-maven-plugin&quot;, so I switched my commons pom to that one, and all of a sudden the original problem disappeared.","title":"NullPointerException at JBossServerAuthConfig.getAuthContext line 108","body":"<p>Oddly enough, this was solved by noticing what I thought was a completely different problem. My project uses a 'commons' project that I also created. In that, I had a problem in the pom.xml. I was specifying the &quot;maven-compiler-plugin&quot; but had left out the version and Eclipse was complaining. I then noticed that was the only one of my projects that was using that, while the rest used &quot;spring-boot-maven-plugin&quot;, so I switched my commons pom to that one, and all of a sudden the original problem disappeared.</p>\n"}],"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76138245,"answer_count":1,"score":0,"last_activity_date":1682799751,"creation_date":1678343252,"question_id":75681098,"body_markdown":"I&#39;m using Spring Boot 2.7.9 to create a website along with Spring OAuth2 and Google Auth. When I try to access the site, I&#39;m getting the above error. I&#39;ve traced it back a bit, but would like to hear from someone who knows the code better to help me determine what&#39;s wrong. Here&#39;s the exception stack trace.\r\n\r\n    java.lang.NullPointerException\r\n\tat org.jboss.security.auth.message.config.JBossServerAuthConfig.getAuthContext(JBossServerAuthConfig.java:108)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.getJaspicState(AuthenticatorBase.java:773)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:619)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\r\nIt looks like the error is in this statement:\r\n\r\n    secDomain = (String) properties.get(&quot;security-domain&quot;);\r\n\r\nand it seems that &quot;properties&quot; is null. The code around this line is this:\r\n\r\n    SecurityContext securityContext = SecurityActions.getSecurityContext();\r\n    if (securityContext != null)\r\n    {\r\n       secDomain = securityContext.getSecurityDomain();\r\n    }\r\n    else{\r\n       secDomain = (String) properties.get(&quot;security-domain&quot;);\r\n\r\nso I&#39;m assuming securityContext is null and should not be. This code, BTW, is just what I found online without doing a Git pull.\r\n\r\nWhat would cause SecurityActions.getSecurityContext() to return null?\r\n\r\nAlso, as a side note, we would not have the NPE except for the way getAuthContext() was called. I think this is happening in AuthenticatorBase.java and here&#39;s a code snippet:\r\n\r\n    private JaspicState getJaspicState(AuthConfigProvider jaspicProvider, Request request, Response response,\r\n            boolean authMandatory) throws IOException {\r\n    ...\r\n        try {\r\n            CallbackHandler callbackHandler = getCallbackHandler();\r\n            ServerAuthConfig serverAuthConfig = jaspicProvider.getServerAuthConfig(&quot;HttpServlet&quot;, jaspicAppContextID,\r\n                    callbackHandler);\r\n            String authContextID = serverAuthConfig.getAuthContextID(jaspicState.messageInfo);\r\n            jaspicState.serverAuthContext = serverAuthConfig.getAuthContext(authContextID, null, null); &lt;--- Passing in null for properties\r\n        } catch (AuthException e) {\r\n            log.warn(sm.getString(&quot;authenticator.jaspicServerAuthContextFail&quot;), e);\r\n            response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\r\n            return null;\r\n        }","title":"NullPointerException at JBossServerAuthConfig.getAuthContext line 108","body":"<p>I'm using Spring Boot 2.7.9 to create a website along with Spring OAuth2 and Google Auth. When I try to access the site, I'm getting the above error. I've traced it back a bit, but would like to hear from someone who knows the code better to help me determine what's wrong. Here's the exception stack trace.</p>\n<pre><code>java.lang.NullPointerException\nat org.jboss.security.auth.message.config.JBossServerAuthConfig.getAuthContext(JBossServerAuthConfig.java:108)\nat org.apache.catalina.authenticator.AuthenticatorBase.getJaspicState(AuthenticatorBase.java:773)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:619)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n<p>It looks like the error is in this statement:</p>\n<pre><code>secDomain = (String) properties.get(&quot;security-domain&quot;);\n</code></pre>\n<p>and it seems that &quot;properties&quot; is null. The code around this line is this:</p>\n<pre><code>SecurityContext securityContext = SecurityActions.getSecurityContext();\nif (securityContext != null)\n{\n   secDomain = securityContext.getSecurityDomain();\n}\nelse{\n   secDomain = (String) properties.get(&quot;security-domain&quot;);\n</code></pre>\n<p>so I'm assuming securityContext is null and should not be. This code, BTW, is just what I found online without doing a Git pull.</p>\n<p>What would cause SecurityActions.getSecurityContext() to return null?</p>\n<p>Also, as a side note, we would not have the NPE except for the way getAuthContext() was called. I think this is happening in AuthenticatorBase.java and here's a code snippet:</p>\n<pre><code>private JaspicState getJaspicState(AuthConfigProvider jaspicProvider, Request request, Response response,\n        boolean authMandatory) throws IOException {\n...\n    try {\n        CallbackHandler callbackHandler = getCallbackHandler();\n        ServerAuthConfig serverAuthConfig = jaspicProvider.getServerAuthConfig(&quot;HttpServlet&quot;, jaspicAppContextID,\n                callbackHandler);\n        String authContextID = serverAuthConfig.getAuthContextID(jaspicState.messageInfo);\n        jaspicState.serverAuthContext = serverAuthConfig.getAuthContext(authContextID, null, null); &lt;--- Passing in null for properties\n    } catch (AuthException e) {\n        log.warn(sm.getString(&quot;authenticator.jaspicServerAuthContextFail&quot;), e);\n        response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\n        return null;\n    }\n</code></pre>\n"},{"tags":["java","apache-beam","apache-beam-io"],"answers":[{"tags":[],"owner":{"account_id":1681348,"reputation":31,"user_id":1545509,"display_name":"Drakan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682798776,"creation_date":1682798776,"answer_id":76138189,"question_id":75819978,"body_markdown":"I had the same issue. Beam tries to infer the coder based on the defined class of the RowMapper. But it cannot infer that from the lambda expression.\r\n\r\nSo changing your `withRowMapper` implementation to \r\n\r\n    .withRowMapper(new JdbcIO.RowMapper&lt;OutputType&gt;() {\r\n\r\n                            public Output mapRow(ResultSet resultSet)  {\r\n\r\n                                // logic here\r\n\r\n                            }\r\n                        })\r\nShould fix the issue.","title":"How to set coder for JdbcIO in Apache Beam without using deprecated withCoder method?","body":"<p>I had the same issue. Beam tries to infer the coder based on the defined class of the RowMapper. But it cannot infer that from the lambda expression.</p>\n<p>So changing your <code>withRowMapper</code> implementation to</p>\n<pre><code>.withRowMapper(new JdbcIO.RowMapper&lt;OutputType&gt;() {\n\n                        public Output mapRow(ResultSet resultSet)  {\n\n                            // logic here\n\n                        }\n                    })\n</code></pre>\n<p>Should fix the issue.</p>\n"}],"owner":{"account_id":2649192,"reputation":1945,"user_id":2291305,"accept_rate":100,"display_name":"jics"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682798776,"creation_date":1679554477,"question_id":75819978,"body_markdown":"I&#39;m currently working with Apache Beam&#39;s JdbcIO, and I need to set a coder for the input data. However, the `withCoder` method is marked as deprecated, and I want to avoid using deprecated methods. Here&#39;s a snippet of my code:\r\n```java\r\n.apply(&quot;Inserting&quot;, JdbcIO.&lt;PubsubMessage, InboundData&gt;readAll()\r\n        .withDataSourceProviderFn(DataSourceProvider.of(dbConfig))\r\n        .withQuery(&quot;SELECT column1, column2, column3, array_agg(column4) as aggregated_column &quot; +\r\n                &quot;FROM table1 JOIN table2 ON table1.id = table2.id &quot; +\r\n                &quot;WHERE table1.condition1 = ? and table1.condition2 = ? GROUP BY column1, column2, column3&quot;)\r\n        .withParameterSetter((element, preparedStatement) -&gt; {\r\n            Map&lt;String, String&gt; attributeMap = Objects.requireNonNull(element.getAttributeMap());\r\n            preparedStatement.setString(1, attributeMap.get(&quot;condition1&quot;));\r\n            preparedStatement.setString(2, attributeMap.get(&quot;condition2&quot;));\r\n        })\r\n        .withRowMapper(resultSet -&gt; {\r\n            // Mapping logic here\r\n        }).withOutputParallelization(false)\r\n).setCoder(SerializableCoder.of(InboundData.class))\r\n\r\n```\r\nWhen I run the code, I get the following error:\r\n\r\n```java\r\njava.lang.IllegalStateException: Unable to infer a coder for JdbcIO.readAll() transform. Provide a coder via withCoder, or ensure that one can be inferred from the provided RowMapper.\r\n        at org.apache.beam.sdk.util.Preconditions.checkStateNotNull(Preconditions.java:471)\r\n        at org.apache.beam.sdk.io.jdbc.JdbcIO$ReadAll.expand(JdbcIO.java:1094)\r\n        at org.apache.beam.sdk.io.jdbc.JdbcIO$ReadAll.expand(JdbcIO.java:941)\r\n        at org.apache.beam.sdk.Pipeline.applyInternal(Pipeline.java:548)\r\n        at org.apache.beam.sdk.Pipeline.applyTransform(Pipeline.java:499)\r\n        at org.apache.beam.sdk.values.PCollection.apply(PCollection.java:373)\r\n        at mrch.prcmgmt.backend.price.MassiveLoadCommand.run(MassiveLoadCommand.java:73)\r\n        at picocli.CommandLine.executeUserObject(CommandLine.java:1939)\r\n        at picocli.CommandLine.access$1300(CommandLine.java:145)\r\n...\r\n\r\n```\r\nSo my question is: As withCoder is deprecated, what is the recommended way to set the coder for JdbcIO?","title":"How to set coder for JdbcIO in Apache Beam without using deprecated withCoder method?","body":"<p>I'm currently working with Apache Beam's JdbcIO, and I need to set a coder for the input data. However, the <code>withCoder</code> method is marked as deprecated, and I want to avoid using deprecated methods. Here's a snippet of my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.apply(&quot;Inserting&quot;, JdbcIO.&lt;PubsubMessage, InboundData&gt;readAll()\n        .withDataSourceProviderFn(DataSourceProvider.of(dbConfig))\n        .withQuery(&quot;SELECT column1, column2, column3, array_agg(column4) as aggregated_column &quot; +\n                &quot;FROM table1 JOIN table2 ON table1.id = table2.id &quot; +\n                &quot;WHERE table1.condition1 = ? and table1.condition2 = ? GROUP BY column1, column2, column3&quot;)\n        .withParameterSetter((element, preparedStatement) -&gt; {\n            Map&lt;String, String&gt; attributeMap = Objects.requireNonNull(element.getAttributeMap());\n            preparedStatement.setString(1, attributeMap.get(&quot;condition1&quot;));\n            preparedStatement.setString(2, attributeMap.get(&quot;condition2&quot;));\n        })\n        .withRowMapper(resultSet -&gt; {\n            // Mapping logic here\n        }).withOutputParallelization(false)\n).setCoder(SerializableCoder.of(InboundData.class))\n\n</code></pre>\n<p>When I run the code, I get the following error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.IllegalStateException: Unable to infer a coder for JdbcIO.readAll() transform. Provide a coder via withCoder, or ensure that one can be inferred from the provided RowMapper.\n        at org.apache.beam.sdk.util.Preconditions.checkStateNotNull(Preconditions.java:471)\n        at org.apache.beam.sdk.io.jdbc.JdbcIO$ReadAll.expand(JdbcIO.java:1094)\n        at org.apache.beam.sdk.io.jdbc.JdbcIO$ReadAll.expand(JdbcIO.java:941)\n        at org.apache.beam.sdk.Pipeline.applyInternal(Pipeline.java:548)\n        at org.apache.beam.sdk.Pipeline.applyTransform(Pipeline.java:499)\n        at org.apache.beam.sdk.values.PCollection.apply(PCollection.java:373)\n        at mrch.prcmgmt.backend.price.MassiveLoadCommand.run(MassiveLoadCommand.java:73)\n        at picocli.CommandLine.executeUserObject(CommandLine.java:1939)\n        at picocli.CommandLine.access$1300(CommandLine.java:145)\n...\n\n</code></pre>\n<p>So my question is: As withCoder is deprecated, what is the recommended way to set the coder for JdbcIO?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":10396927,"reputation":68267,"user_id":7666442,"display_name":"AskNilesh"},"score":1,"creation_date":1515212784,"post_id":48124248,"comment_id":83225412,"body_markdown":"Possible duplicate of [Fullscreen Activity in Android?](https://stackoverflow.com/questions/2868047/fullscreen-activity-in-android)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/2868047/fullscreen-activity-in-android\">Fullscreen Activity in Android?</a>"},{"owner":{"account_id":12523296,"reputation":91,"user_id":9113976,"display_name":"Dimitris gs"},"score":0,"creation_date":1515213096,"post_id":48124248,"comment_id":83225464,"body_markdown":"not really there is a problem over here while that guy asks just for full screen i on the other hand im asking for a full screen on one activity and not the other two(except if the action bar stays).If i go on activity_two (which is not full screen) i have the home button back button etc .If i press the back button and go back to the main activity the buttons stay there which i don&#39;t want to (not only because i want my main full screen but because the buttons from activity two stay and hide the bottom of my main activity)","body":"not really there is a problem over here while that guy asks just for full screen i on the other hand im asking for a full screen on one activity and not the other two(except if the action bar stays).If i go on activity_two (which is not full screen) i have the home button back button etc .If i press the back button and go back to the main activity the buttons stay there which i don&#39;t want to (not only because i want my main full screen but because the buttons from activity two stay and hide the bottom of my main activity)"}],"answers":[{"tags":[],"owner":{"account_id":7165321,"reputation":6023,"user_id":8244632,"accept_rate":100,"display_name":"Lalit Fauzdar"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1515215696,"creation_date":1515215696,"answer_id":48124484,"question_id":48124248,"body_markdown":"**As onWindowsFocusChanged() is what you need so try this:**&lt;br&gt;&lt;Br&gt;1. First, Declare this variable as global in your MainActivity&lt;br&gt;&lt;br&gt;\r\n`private int currentApiVersion;`&lt;Br&gt;&lt;Br&gt;\r\n2. then paste this code in onCreate() of that activity.\r\n&lt;br&gt;\r\n\r\n\r\n    currentApiVersion = Build.VERSION.SDK_INT;\r\n    final int flags = View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n            | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\r\n            | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n            | View.SYSTEM_UI_FLAG_FULLSCREEN\r\n            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\r\n            | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;\r\n    if (currentApiVersion &gt;= Build.VERSION_CODES.KITKAT) {\r\n        getWindow().getDecorView().setSystemUiVisibility(flags);\r\n        final View decorView = getWindow().getDecorView();\r\n        decorView.setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener() {\r\n              @Override\r\n              public void onSystemUiVisibilityChange(int visibility) {\r\n                  if ((visibility &amp; View.SYSTEM_UI_FLAG_FULLSCREEN) == 0) {\r\n                       decorView.setSystemUiVisibility(flags);\r\n                  }\r\n              }\r\n        });\r\n    }\r\n3. Now paste this method in your MainActivity class.\r\n\r\n \r\n\r\n    @SuppressLint(&quot;NewApi&quot;)\r\n    @Override\r\n    public void onWindowFocusChanged(boolean hasFocus) {\r\n        super.onWindowFocusChanged(hasFocus);\r\n        if (currentApiVersion &gt;= Build.VERSION_CODES.KITKAT &amp;&amp; hasFocus) {\r\n            getWindow().getDecorView().setSystemUiVisibility(\r\n                   View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n                 | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\r\n                 | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                 | View.SYSTEM_UI_FLAG_FULLSCREEN\r\n                 | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\r\n                 | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);\r\n        }\r\n     }\r\n\r\n\r\nNow this should work, give it a try.\r\n\r\n","title":"Android full screen on only one activity?","body":"<p><strong>As onWindowsFocusChanged() is what you need so try this:</strong><br><Br>1. First, Declare this variable as global in your MainActivity<br><br>\n<code>private int currentApiVersion;</code><Br><Br>\n2. then paste this code in onCreate() of that activity.\n<br></p>\n\n<pre><code>currentApiVersion = Build.VERSION.SDK_INT;\nfinal int flags = View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\n        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\n        | View.SYSTEM_UI_FLAG_FULLSCREEN\n        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\n        | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;\nif (currentApiVersion &gt;= Build.VERSION_CODES.KITKAT) {\n    getWindow().getDecorView().setSystemUiVisibility(flags);\n    final View decorView = getWindow().getDecorView();\n    decorView.setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener() {\n          @Override\n          public void onSystemUiVisibilityChange(int visibility) {\n              if ((visibility &amp; View.SYSTEM_UI_FLAG_FULLSCREEN) == 0) {\n                   decorView.setSystemUiVisibility(flags);\n              }\n          }\n    });\n}\n</code></pre>\n\n<p>3. Now paste this method in your MainActivity class.</p>\n\n<pre><code>@SuppressLint(\"NewApi\")\n@Override\npublic void onWindowFocusChanged(boolean hasFocus) {\n    super.onWindowFocusChanged(hasFocus);\n    if (currentApiVersion &gt;= Build.VERSION_CODES.KITKAT &amp;&amp; hasFocus) {\n        getWindow().getDecorView().setSystemUiVisibility(\n               View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n             | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\n             | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\n             | View.SYSTEM_UI_FLAG_FULLSCREEN\n             | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\n             | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);\n    }\n }\n</code></pre>\n\n<p>Now this should work, give it a try.</p>\n"},{"comments":[{"owner":{"account_id":10875141,"reputation":2530,"user_id":8199772,"accept_rate":55,"display_name":"ClassA"},"score":0,"creation_date":1563356585,"post_id":48125210,"comment_id":100669584,"body_markdown":"Will this work for all devices &gt;= Build.VERSION_CODES.KITKAT?","body":"Will this work for all devices &gt;= Build.VERSION_CODES.KITKAT?"},{"owner":{"account_id":175394,"reputation":8265,"user_id":405383,"accept_rate":58,"display_name":"Hunt"},"score":0,"creation_date":1613664556,"post_id":48125210,"comment_id":117151173,"body_markdown":"@ClassA i don&#39;t think so","body":"@ClassA i don&#39;t think so"},{"owner":{"account_id":6398611,"reputation":265,"user_id":4962151,"accept_rate":100,"display_name":"Ben"},"score":1,"creation_date":1619304238,"post_id":48125210,"comment_id":118865696,"body_markdown":"needed NON FullScreen in only one of my activities, so I set it to `android:theme=&quot;@android:style/Theme.DeviceDefault.NoActionBar&quot;` in manifest - thanks for the hint","body":"needed NON FullScreen in only one of my activities, so I set it to <code>android:theme=&quot;@android:style&#47;Theme.DeviceDefault.NoActionBa&zwnj;&#8203;r&quot;</code> in manifest - thanks for the hint"}],"tags":[],"owner":{"account_id":10688670,"reputation":3585,"user_id":8533971,"accept_rate":43,"display_name":"Aditya"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1515223665,"creation_date":1515223665,"answer_id":48125210,"question_id":48124248,"body_markdown":"You can do this in two ways,\r\n\r\nProgrammatically -- Set `FullScreen` flag to window of activity inside `onCreate()` method (just after or before `setContentView()`). Whom you want to be fullscreen. For example,\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\r\n            Window w = getWindow();\r\n            w.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n                          WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n    }\r\n\r\nOr you can set `theme` in your `AndroidManifest.xml` as,\r\n\r\n    &lt;activity \r\n             android:name=&quot;.YourActivityName&quot;\r\n             android:theme=&quot;@android:style/Theme.NoTitleBar.Fullscreen&quot;/&gt;\r\n\r\nOr If you are using `AppCompatActivity` then you can set as,\r\n\r\n    &lt;activity \r\n            android:name=&quot;.YourActivityName&quot;\r\n            android:theme=&quot;@android:style/Theme.AppCompat.Light.NoActionBar&quot;/&gt; \r\n\r\nFor more info about the window flags check this link https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html \r\n ","title":"Android full screen on only one activity?","body":"<p>You can do this in two ways,</p>\n\n<p>Programmatically -- Set <code>FullScreen</code> flag to window of activity inside <code>onCreate()</code> method (just after or before <code>setContentView()</code>). Whom you want to be fullscreen. For example,</p>\n\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n        Window w = getWindow();\n        w.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,\n                      WindowManager.LayoutParams.FLAG_FULLSCREEN);\n}\n</code></pre>\n\n<p>Or you can set <code>theme</code> in your <code>AndroidManifest.xml</code> as,</p>\n\n<pre><code>&lt;activity \n         android:name=\".YourActivityName\"\n         android:theme=\"@android:style/Theme.NoTitleBar.Fullscreen\"/&gt;\n</code></pre>\n\n<p>Or If you are using <code>AppCompatActivity</code> then you can set as,</p>\n\n<pre><code>&lt;activity \n        android:name=\".YourActivityName\"\n        android:theme=\"@android:style/Theme.AppCompat.Light.NoActionBar\"/&gt; \n</code></pre>\n\n<p>For more info about the window flags check this link <a href=\"https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html\" rel=\"noreferrer\">https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html</a> </p>\n"},{"tags":[],"owner":{"account_id":13626539,"reputation":1469,"user_id":9829662,"display_name":"Mahdi Zareei"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680111916,"creation_date":1680111916,"answer_id":75880513,"question_id":48124248,"body_markdown":"use this method:\r\n\r\n    private fun changeScreenSystemUiController(isFullScreen: Boolean) {\r\n        window?.also {\r\n            WindowCompat.setDecorFitsSystemWindows(it, !isFullScreen)\r\n            WindowCompat.getInsetsController(it, it.decorView).apply {\r\n                systemBarsBehavior =\r\n                    if (isFullScreen)\r\n                        WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE\r\n                    else\r\n                        WindowInsetsControllerCompat.BEHAVIOR_SHOW_BARS_BY_TOUCH\r\n                if (isFullScreen)\r\n                    hide(WindowInsetsCompat.Type.systemBars())\r\n                else\r\n                    show(WindowInsetsCompat.Type.systemBars())\r\n            }\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\r\n                it.attributes.layoutInDisplayCutoutMode =\r\n                    if (isFullScreen)\r\n                        WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES\r\n                    else\r\n                        WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_DEFAULT\r\n            }\r\n        }\r\n    }","title":"Android full screen on only one activity?","body":"<p>use this method:</p>\n<pre><code>private fun changeScreenSystemUiController(isFullScreen: Boolean) {\n    window?.also {\n        WindowCompat.setDecorFitsSystemWindows(it, !isFullScreen)\n        WindowCompat.getInsetsController(it, it.decorView).apply {\n            systemBarsBehavior =\n                if (isFullScreen)\n                    WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE\n                else\n                    WindowInsetsControllerCompat.BEHAVIOR_SHOW_BARS_BY_TOUCH\n            if (isFullScreen)\n                hide(WindowInsetsCompat.Type.systemBars())\n            else\n                show(WindowInsetsCompat.Type.systemBars())\n        }\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\n            it.attributes.layoutInDisplayCutoutMode =\n                if (isFullScreen)\n                    WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES\n                else\n                    WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_DEFAULT\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12523296,"reputation":91,"user_id":9113976,"display_name":"Dimitris gs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9605,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":48124484,"answer_count":3,"score":7,"last_activity_date":1682798472,"creation_date":1515212685,"question_id":48124248,"body_markdown":"My app has 3 activities(activity_main,activity_one,activity_two).\r\nI want to full screen only the first activity so I searched and I found out I got to use this:\r\n\r\n     View decorView = getWindow().getDecorView();\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\r\n            decorView.setSystemUiVisibility(\r\n                View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n                | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\r\n                | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\r\n                | View.SYSTEM_UI_FLAG_FULLSCREEN\r\n                | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);\r\n    }\r\nWhen I go to the other activities that are not full screen and press the back button and go back to main activity the home button back button is there hiding the bottom of my main activity.How do I solve this?\r\nAlso if possible I would like to know how can I make my activity full screen but keep the action bar.\r\nedit:\r\nIm asking for a full screen on one activity and not the other two(except if the action bar stays).If i go on activity_two (which is not full screen) i have the home button back button etc .If i press the back button and go back to the main activity the buttons stay there which i don&#39;t want to (not only because i want my main full screen but because the buttons from activity two stay and hide the bottom of my main activity)","title":"Android full screen on only one activity?","body":"<p>My app has 3 activities(activity_main,activity_one,activity_two).\nI want to full screen only the first activity so I searched and I found out I got to use this:</p>\n\n<pre><code> View decorView = getWindow().getDecorView();\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n        decorView.setSystemUiVisibility(\n            View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n            | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\n            | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\n            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\n            | View.SYSTEM_UI_FLAG_FULLSCREEN\n            | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);\n}\n</code></pre>\n\n<p>When I go to the other activities that are not full screen and press the back button and go back to main activity the home button back button is there hiding the bottom of my main activity.How do I solve this?\nAlso if possible I would like to know how can I make my activity full screen but keep the action bar.\nedit:\nIm asking for a full screen on one activity and not the other two(except if the action bar stays).If i go on activity_two (which is not full screen) i have the home button back button etc .If i press the back button and go back to the main activity the buttons stay there which i don't want to (not only because i want my main full screen but because the buttons from activity two stay and hide the bottom of my main activity)</p>\n"},{"tags":["java","spring","spring-boot","logging"],"comments":[{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":0,"creation_date":1623042621,"post_id":67416980,"comment_id":119955340,"body_markdown":"I assume `application.property` was a typo ? The correct is `application.properties`","body":"I assume <code>application.property</code> was a typo ? The correct is <code>application.properties</code>"}],"answers":[{"tags":[],"owner":{"account_id":1922522,"reputation":198,"user_id":1733656,"display_name":"Kittu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623039964,"creation_date":1623039964,"answer_id":67865944,"question_id":67416980,"body_markdown":"Change the logging.pattern.file to `logging.pattern.file= %d{yyyy-MM-dd HH:mm:ss} [%thread] - %msg%`\r\n","title":"using Spring boot empty log file is getting generated","body":"<p>Change the logging.pattern.file to <code>logging.pattern.file= %d{yyyy-MM-dd HH:mm:ss} [%thread] - %msg%</code></p>\n"}],"owner":{"account_id":17706289,"reputation":1,"user_id":12854784,"display_name":"Sachin Chemate"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":946,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682796797,"creation_date":1620299576,"question_id":67416980,"body_markdown":"I have a simple Spring boot rest API application. I am managing logs via the below properties mentioned in the application.property file.\r\n\r\nlogging.level.org.springframework=INFO\r\n\r\nlogging.level.com.learning=DEBUG\r\n\r\nlogging.file.name=application.log\r\n\r\nlogging.pattern.file= %d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%\r\n\r\nI can see logs are getting printed on console but same logs I don&#39;t see in the log file which got created via application.\r\n\r\nAm I missing anything?","title":"using Spring boot empty log file is getting generated","body":"<p>I have a simple Spring boot rest API application. I am managing logs via the below properties mentioned in the application.property file.</p>\n<p>logging.level.org.springframework=INFO</p>\n<p>logging.level.com.learning=DEBUG</p>\n<p>logging.file.name=application.log</p>\n<p>logging.pattern.file= %d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%</p>\n<p>I can see logs are getting printed on console but same logs I don't see in the log file which got created via application.</p>\n<p>Am I missing anything?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":29240,"reputation":138032,"user_id":78845,"display_name":"johnsyweb"},"score":0,"creation_date":1390844142,"post_id":21387646,"comment_id":32257325,"body_markdown":"Why would you use a regex for this?","body":"Why would you use a regex for this?"},{"owner":{"account_id":52410,"reputation":2678,"user_id":156604,"accept_rate":88,"display_name":"neminem"},"score":5,"creation_date":1390844173,"post_id":21387646,"comment_id":32257353,"body_markdown":"Why would you want to use a regex? That&#39;s not really what it&#39;s for. If you want to see whether a string is an int, use a built-in int parsing function. If you want to see whether it&#39;s a double, use a double-parsing function. Put down the chocolate-covered banana and step away from the European currency systems. [See also.](http://homepage.ntlworld.com/jonathan.deboynepollard/FGA/put-down-the-chocolate-covered-banana.html) (Edit: I misread this as being C#, durp. Comment still holds, though, just not the names of the functions.)","body":"Why would you want to use a regex? That&#39;s not really what it&#39;s for. If you want to see whether a string is an int, use a built-in int parsing function. If you want to see whether it&#39;s a double, use a double-parsing function. Put down the chocolate-covered banana and step away from the European currency systems. <a href=\"http://homepage.ntlworld.com/jonathan.deboynepollard/FGA/put-down-the-chocolate-covered-banana.html\" rel=\"nofollow noreferrer\">See also.</a> (Edit: I misread this as being C#, durp. Comment still holds, though, just not the names of the functions.)"},{"owner":{"account_id":52410,"reputation":2678,"user_id":156604,"accept_rate":88,"display_name":"neminem"},"score":0,"creation_date":1390844559,"post_id":21387646,"comment_id":32257591,"body_markdown":"Also, of possible helpfulness: http://stackoverflow.com/questions/8391979/does-java-have-a-int-tryparse-that-doesnt-throw-an-exception-for-bad-data","body":"Also, of possible helpfulness: <a href=\"http://stackoverflow.com/questions/8391979/does-java-have-a-int-tryparse-that-doesnt-throw-an-exception-for-bad-data\" title=\"does java have a int tryparse that doesnt throw an exception for bad data\">stackoverflow.com/questions/8391979/&hellip;</a>"},{"owner":{"display_name":"user557597"},"score":0,"creation_date":1390848557,"post_id":21387646,"comment_id":32259932,"body_markdown":"Regex is a perfect choice to validate numeric input.","body":"Regex is a perfect choice to validate numeric input."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":0,"creation_date":1390849059,"post_id":21387646,"comment_id":32260252,"body_markdown":"Note to everyone who suggests using a built-in parsing function instead of a regex: The OP&#39;s regex suggests that he wants to allow comma characters in the input, which the built-in parsing functions don&#39;t allow.","body":"Note to everyone who suggests using a built-in parsing function instead of a regex: The OP&#39;s regex suggests that he wants to allow comma characters in the input, which the built-in parsing functions don&#39;t allow."}],"answers":[{"tags":[],"owner":{"account_id":3176470,"reputation":2554,"user_id":2684204,"accept_rate":68,"display_name":"Lucas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390844317,"creation_date":1390844317,"answer_id":21387737,"question_id":21387646,"body_markdown":"Any reason why you&#39;re using a regex? You could try using Double.parseDouble() from http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble(java.lang.String \r\n\r\nAnd then catch the NumberFormatException if the format is not correct to handle that user input error in your own way.\r\n\r\nEDIT: I didn&#39;t read all of your code to begin with. You can get rid of the first if statement and do a try-catch on `Double.parseDouble(height)` if it reaches the catch block you know it did not succeed.","title":"Regex to find int or double","body":"<p>Any reason why you're using a regex? You could try using Double.parseDouble() from <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble(java.lang.String\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble(java.lang.String</a> </p>\n\n<p>And then catch the NumberFormatException if the format is not correct to handle that user input error in your own way.</p>\n\n<p>EDIT: I didn't read all of your code to begin with. You can get rid of the first if statement and do a try-catch on <code>Double.parseDouble(height)</code> if it reaches the catch block you know it did not succeed.</p>\n"},{"comments":[{"owner":{"display_name":"user557597"},"score":0,"creation_date":1390848449,"post_id":21387757,"comment_id":32259857,"body_markdown":"@ajb - No regex delimeters in Java ?","body":"@ajb - No regex delimeters in Java ?"},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":0,"creation_date":1390848706,"post_id":21387757,"comment_id":32260044,"body_markdown":"@sln Correct.  See my answer.","body":"@sln Correct.  See my answer."}],"tags":[],"owner":{"account_id":3916043,"reputation":2182,"user_id":3239833,"accept_rate":67,"display_name":"SebastianH"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1390904062,"creation_date":1390844352,"answer_id":21387757,"question_id":21387646,"body_markdown":"This should do:\r\n\r\n    &quot;^[0-9]+([,.][0-9]?)?$&quot;\r\n\r\n**Edit:** I removed the slashes. I see flaws in all other patterns posted here. You dont need to escape characters inside [] - except for ] . The question did not restrict the number of digits before the decimal separator. But it allowed for only one after the decimal.","title":"Regex to find int or double","body":"<p>This should do:</p>\n\n<pre><code>\"^[0-9]+([,.][0-9]?)?$\"\n</code></pre>\n\n<p><strong>Edit:</strong> I removed the slashes. I see flaws in all other patterns posted here. You dont need to escape characters inside [] - except for ] . The question did not restrict the number of digits before the decimal separator. But it allowed for only one after the decimal.</p>\n"},{"tags":[],"owner":{"account_id":1696444,"reputation":1760,"user_id":1557750,"display_name":"Arnaud Potier"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1542230979,"creation_date":1390844461,"answer_id":21387786,"question_id":21387646,"body_markdown":"It&#39;s nice to try a regex before using it, this website is quite visual:\r\nhttps://www.debuggex.com/\r\n\r\nI think you should go with: `^[0-9]+(.|,)?[0-9]?$`\r\n\r\nThat said, neminem and Johnsyweb are right, you don&#39;t have to use a regex for this.","title":"Regex to find int or double","body":"<p>It's nice to try a regex before using it, this website is quite visual:\n<a href=\"https://www.debuggex.com/\" rel=\"nofollow noreferrer\">https://www.debuggex.com/</a></p>\n\n<p>I think you should go with: <code>^[0-9]+(.|,)?[0-9]?$</code></p>\n\n<p>That said, neminem and Johnsyweb are right, you don't have to use a regex for this.</p>\n"},{"comments":[{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":2,"creation_date":1390849034,"post_id":21388040,"comment_id":32260238,"body_markdown":"Note that `Double.parseDouble()` won&#39;t accept `&quot;1,000.00&quot;` either.  That&#39;s a flaw with everyone&#39;s answer that suggests using one of those parsing functions instead of a regex.  It doesn&#39;t allow for possible formats that the OP might want to accept but the built-in parsing functions don&#39;t (such as input with commas in it).","body":"Note that <code>Double.parseDouble()</code> won&#39;t accept <code>&quot;1,000.00&quot;</code> either.  That&#39;s a flaw with everyone&#39;s answer that suggests using one of those parsing functions instead of a regex.  It doesn&#39;t allow for possible formats that the OP might want to accept but the built-in parsing functions don&#39;t (such as input with commas in it)."}],"tags":[],"owner":{"account_id":231133,"reputation":176,"user_id":2335390,"display_name":"ptantiku"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1390845136,"creation_date":1390845136,"answer_id":21388040,"question_id":21387646,"body_markdown":"Just want to point out that using regex could have some flaws, such as \r\n\r\naccepting these: `0,` `00,0` \r\n\r\nbut not accepting `1,000.00`\r\n\r\nA good regex is hard to write. \r\n\r\nFor a simple case like this, using Double.parseDouble() and a try-catch block as others mentioned would be more suitable.","title":"Regex to find int or double","body":"<p>Just want to point out that using regex could have some flaws, such as </p>\n\n<p>accepting these: <code>0,</code> <code>00,0</code> </p>\n\n<p>but not accepting <code>1,000.00</code></p>\n\n<p>A good regex is hard to write. </p>\n\n<p>For a simple case like this, using Double.parseDouble() and a try-catch block as others mentioned would be more suitable.</p>\n"},{"comments":[{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":1,"creation_date":1390845959,"post_id":21388047,"comment_id":32258388,"body_markdown":"I&#39;d put the `try`..`catch` around *only* the first statement.  Or change the `catch` to catch only `NumberFormatException`, instead of all `Exception`s.  The way you&#39;ve written it, if there&#39;s a bug in the rest of your code and something goes wrong, the method will report (incorrectly) that the input was invalid, rather than dumping a stack trace that would help you figure out where your code is wrong.","body":"I&#39;d put the <code>try</code>..<code>catch</code> around <i>only</i> the first statement.  Or change the <code>catch</code> to catch only <code>NumberFormatException</code>, instead of all <code>Exception</code>s.  The way you&#39;ve written it, if there&#39;s a bug in the rest of your code and something goes wrong, the method will report (incorrectly) that the input was invalid, rather than dumping a stack trace that would help you figure out where your code is wrong."}],"tags":[],"owner":{"account_id":3878455,"reputation":175,"user_id":3211740,"accept_rate":62,"display_name":"user3211740"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390846273,"creation_date":1390845149,"answer_id":21388047,"question_id":21387646,"body_markdown":"I must get using try, catches again..\r\n\r\n             try\r\n               {\r\n                 double doubleHeight = Double.parseDouble(height);\r\n                 DecimalFormat df = new DecimalFormat(&quot;#.00&quot;);\r\n                 String decHeight = df.format(doubleHeight);\r\n                 if(decHeight.charAt(0)==&#39;.&#39;)\r\n                 {\r\n                     decHeight = &quot;0&quot; + decHeight;\r\n                 }\r\n\r\n               }\r\n\r\n            catch(NumberFormatException e)\r\n            {          \r\n               isHeightValid = false;             \r\n            }","title":"Regex to find int or double","body":"<p>I must get using try, catches again..</p>\n\n<pre><code>         try\n           {\n             double doubleHeight = Double.parseDouble(height);\n             DecimalFormat df = new DecimalFormat(\"#.00\");\n             String decHeight = df.format(doubleHeight);\n             if(decHeight.charAt(0)=='.')\n             {\n                 decHeight = \"0\" + decHeight;\n             }\n\n           }\n\n        catch(NumberFormatException e)\n        {          \n           isHeightValid = false;             \n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1390845354,"creation_date":1390845354,"answer_id":21388107,"question_id":21387646,"body_markdown":"Do you really need the input string to contain slashes (`/` characters)?  If not, remove them from your regular expression.  Perl and JavaScript use slash characters to denote a &quot;regular expression literal&quot;, which is something built into those languages for pattern matching.  Java doesn&#39;t have regular expression literals; regex patterns are created from ordinary string literals.  Thus the slashes aren&#39;t used, and if you put one in a regex it assumes you really want to match a slash. ","title":"Regex to find int or double","body":"<p>Do you really need the input string to contain slashes (<code>/</code> characters)?  If not, remove them from your regular expression.  Perl and JavaScript use slash characters to denote a \"regular expression literal\", which is something built into those languages for pattern matching.  Java doesn't have regular expression literals; regex patterns are created from ordinary string literals.  Thus the slashes aren't used, and if you put one in a regex it assumes you really want to match a slash. </p>\n"},{"tags":[],"owner":{"account_id":3910638,"reputation":6001,"user_id":3236102,"accept_rate":80,"display_name":"Dakkaron"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390845936,"creation_date":1390845936,"answer_id":21388299,"question_id":21387646,"body_markdown":"The regex you need is this one:\r\n\r\n    ^[0-9]+([\\\\,\\\\.][0-9]+)?$\r\n\r\nTested it, it works.","title":"Regex to find int or double","body":"<p>The regex you need is this one:</p>\n\n<pre><code>^[0-9]+([\\\\,\\\\.][0-9]+)?$\n</code></pre>\n\n<p>Tested it, it works.</p>\n"},{"tags":[],"owner":{"display_name":"user557597"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390849547,"creation_date":1390847805,"answer_id":21388863,"question_id":21387646,"body_markdown":"Could get you started -  \r\n**edited out delimiters**\r\n\r\n     #  &quot;^(?:[1-9]\\\\d{0,2}(?:,\\\\d{3})*(?:[.]\\\\d*)?|\\\\d+[.]?\\\\d*)$&quot;\r\n     \r\n     ^ \r\n     (?:\r\n          [1-9] \r\n          \\d{0,2} \r\n          (?:\r\n               , \\d{3} \r\n          )*\r\n          (?:\r\n               [.] \\d* \r\n          )?\r\n       |  \r\n          \\d+ [.]? \\d* \r\n     )\r\n     $\r\n\r\nIdentical, but more compact formatting -  \r\n\r\n     ^ \r\n     (?:\r\n          [1-9] \\d{0,2} \r\n          (?: , \\d{3} )*\r\n          (?: [.] \\d* )?\r\n       |  \r\n          \\d+ [.]? \\d* \r\n     )\r\n     $\r\n","title":"Regex to find int or double","body":"<p>Could get you started -<br>\n<strong>edited out delimiters</strong></p>\n\n<pre><code> #  \"^(?:[1-9]\\\\d{0,2}(?:,\\\\d{3})*(?:[.]\\\\d*)?|\\\\d+[.]?\\\\d*)$\"\n\n ^ \n (?:\n      [1-9] \n      \\d{0,2} \n      (?:\n           , \\d{3} \n      )*\n      (?:\n           [.] \\d* \n      )?\n   |  \n      \\d+ [.]? \\d* \n )\n $\n</code></pre>\n\n<p>Identical, but more compact formatting -  </p>\n\n<pre><code> ^ \n (?:\n      [1-9] \\d{0,2} \n      (?: , \\d{3} )*\n      (?: [.] \\d* )?\n   |  \n      \\d+ [.]? \\d* \n )\n $\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12245563,"reputation":51,"user_id":8937307,"display_name":"navin shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533905016,"creation_date":1533899064,"answer_id":51785118,"question_id":21387646,"body_markdown":"Using `Regex` I tested and confirmed the following is working:\r\n\r\n    ^\\\\d+(\\\\.\\\\d+)?","title":"Regex to find int or double","body":"<p>Using <code>Regex</code> I tested and confirmed the following is working:</p>\n\n<pre><code>^\\\\d+(\\\\.\\\\d+)?\n</code></pre>\n"},{"tags":[],"owner":{"account_id":544522,"reputation":193,"user_id":9549171,"display_name":"sesquipedalias"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581067813,"creation_date":1581067813,"answer_id":60110617,"question_id":21387646,"body_markdown":"The java documentation gives you a regex for this purpose https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#valueOf(java.lang.String)\r\n\r\nIt&#39;s slightly more complicated than one might have hoped : )\r\nStill, you could start here and make any ad-hoc changes you need in your specific case.\r\n\r\n&gt; To avoid calling this method on an invalid string and having a\r\n&gt; NumberFormatException be thrown, the regular expression below can be\r\n&gt; used to screen the input string:\r\n&gt; \r\n&gt;       final String Digits     = &quot;(\\\\p{Digit}+)&quot;;\r\n&gt;       final String HexDigits  = &quot;(\\\\p{XDigit}+)&quot;;\r\n&gt;       // an exponent is &#39;e&#39; or &#39;E&#39; followed by an optionally\r\n&gt;       // signed decimal integer.\r\n&gt;       final String Exp        = &quot;[eE][+-]?&quot;+Digits;\r\n&gt;       final String fpRegex    =\r\n&gt;           (&quot;[\\\\x00-\\\\x20]*&quot;+  // Optional leading &quot;whitespace&quot;\r\n&gt;            &quot;[+-]?(&quot; + // Optional sign character\r\n&gt;            &quot;NaN|&quot; +           // &quot;NaN&quot; string\r\n&gt;            &quot;Infinity|&quot; +      // &quot;Infinity&quot; string\r\n&gt;     \r\n&gt;            // A decimal floating-point string representing a finite positive\r\n&gt;            // number without a leading sign has at most five basic pieces:\r\n&gt;            // Digits . Digits ExponentPart FloatTypeSuffix\r\n&gt;            //\r\n&gt;            // Since this method allows integer-only strings as input\r\n&gt;            // in addition to strings of floating-point literals, the\r\n&gt;            // two sub-patterns below are simplifications of the grammar\r\n&gt;            // productions from section 3.10.2 of\r\n&gt;            // The Java™ Language Specification.\r\n&gt;     \r\n&gt;            // Digits ._opt Digits_opt ExponentPart_opt FloatTypeSuffix_opt\r\n&gt;            &quot;(((&quot;+Digits+&quot;(\\\\.)?(&quot;+Digits+&quot;?)(&quot;+Exp+&quot;)?)|&quot;+\r\n&gt;     \r\n&gt;            // . Digits ExponentPart_opt FloatTypeSuffix_opt\r\n&gt;            &quot;(\\\\.(&quot;+Digits+&quot;)(&quot;+Exp+&quot;)?)|&quot;+\r\n&gt;     \r\n&gt;            // Hexadecimal strings\r\n&gt;            &quot;((&quot; +\r\n&gt;             // 0[xX] HexDigits ._opt BinaryExponent FloatTypeSuffix_opt\r\n&gt;             &quot;(0[xX]&quot; + HexDigits + &quot;(\\\\.)?)|&quot; +\r\n&gt;     \r\n&gt;             // 0[xX] HexDigits_opt . HexDigits BinaryExponent FloatTypeSuffix_opt\r\n&gt;             &quot;(0[xX]&quot; + HexDigits + &quot;?(\\\\.)&quot; + HexDigits + &quot;)&quot; +\r\n&gt;     \r\n&gt;             &quot;)[pP][+-]?&quot; + Digits + &quot;))&quot; +\r\n&gt;            &quot;[fFdD]?))&quot; +\r\n&gt;            &quot;[\\\\x00-\\\\x20]*&quot;);// Optional trailing &quot;whitespace&quot;\r\n&gt;     \r\n&gt;       if (Pattern.matches(fpRegex, myString))\r\n&gt;           Double.valueOf(myString); // Will not throw NumberFormatException\r\n&gt;       else {\r\n&gt;           // Perform suitable alternative action\r\n&gt;      \r\n&gt; \r\n&gt;  }","title":"Regex to find int or double","body":"<p>The java documentation gives you a regex for this purpose <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#valueOf(java.lang.String)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#valueOf(java.lang.String)</a></p>\n\n<p>It's slightly more complicated than one might have hoped : )\nStill, you could start here and make any ad-hoc changes you need in your specific case.</p>\n\n<blockquote>\n  <p>To avoid calling this method on an invalid string and having a\n  NumberFormatException be thrown, the regular expression below can be\n  used to screen the input string:</p>\n\n<pre><code>  final String Digits     = \"(\\\\p{Digit}+)\";\n  final String HexDigits  = \"(\\\\p{XDigit}+)\";\n  // an exponent is 'e' or 'E' followed by an optionally\n  // signed decimal integer.\n  final String Exp        = \"[eE][+-]?\"+Digits;\n  final String fpRegex    =\n      (\"[\\\\x00-\\\\x20]*\"+  // Optional leading \"whitespace\"\n       \"[+-]?(\" + // Optional sign character\n       \"NaN|\" +           // \"NaN\" string\n       \"Infinity|\" +      // \"Infinity\" string\n\n       // A decimal floating-point string representing a finite positive\n       // number without a leading sign has at most five basic pieces:\n       // Digits . Digits ExponentPart FloatTypeSuffix\n       //\n       // Since this method allows integer-only strings as input\n       // in addition to strings of floating-point literals, the\n       // two sub-patterns below are simplifications of the grammar\n       // productions from section 3.10.2 of\n       // The Java™ Language Specification.\n\n       // Digits ._opt Digits_opt ExponentPart_opt FloatTypeSuffix_opt\n       \"(((\"+Digits+\"(\\\\.)?(\"+Digits+\"?)(\"+Exp+\")?)|\"+\n\n       // . Digits ExponentPart_opt FloatTypeSuffix_opt\n       \"(\\\\.(\"+Digits+\")(\"+Exp+\")?)|\"+\n\n       // Hexadecimal strings\n       \"((\" +\n        // 0[xX] HexDigits ._opt BinaryExponent FloatTypeSuffix_opt\n        \"(0[xX]\" + HexDigits + \"(\\\\.)?)|\" +\n\n        // 0[xX] HexDigits_opt . HexDigits BinaryExponent FloatTypeSuffix_opt\n        \"(0[xX]\" + HexDigits + \"?(\\\\.)\" + HexDigits + \")\" +\n\n        \")[pP][+-]?\" + Digits + \"))\" +\n       \"[fFdD]?))\" +\n       \"[\\\\x00-\\\\x20]*\");// Optional trailing \"whitespace\"\n\n  if (Pattern.matches(fpRegex, myString))\n      Double.valueOf(myString); // Will not throw NumberFormatException\n  else {\n      // Perform suitable alternative action\n</code></pre>\n  \n  <p>}</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3910649,"reputation":1,"user_id":3236113,"display_name":"zim1992"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616105244,"creation_date":1616102131,"answer_id":66699252,"question_id":21387646,"body_markdown":"You can do a regular expression that strips undesired values with the values you wish to use and replace with a space. You can then split on the space and parse to a double. This is a solution for C#\r\n\r\n```csharp\r\nnew Regex(@&quot;[^0-9.]+&quot;)\r\n                .Replace(stringWhichYouFilter, &quot; &quot;)\r\n                .Split(&quot; &quot;)\r\n                .Where(x =&gt; !string.IsNullOrWhiteSpace(x))\r\n                .Select(x =&gt;\r\n                {\r\n                    if (double.TryParse(x, out var doubleVal))\r\n                        return doubleVal;\r\n                    throw new InvalidCastException($&quot;could not parse value &#39;{x}&#39; to a double&quot;);\r\n                })\r\n\r\n```","title":"Regex to find int or double","body":"<p>You can do a regular expression that strips undesired values with the values you wish to use and replace with a space. You can then split on the space and parse to a double. This is a solution for C#</p>\n<pre class=\"lang-cs prettyprint-override\"><code>new Regex(@&quot;[^0-9.]+&quot;)\n                .Replace(stringWhichYouFilter, &quot; &quot;)\n                .Split(&quot; &quot;)\n                .Where(x =&gt; !string.IsNullOrWhiteSpace(x))\n                .Select(x =&gt;\n                {\n                    if (double.TryParse(x, out var doubleVal))\n                        return doubleVal;\n                    throw new InvalidCastException($&quot;could not parse value '{x}' to a double&quot;);\n                })\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16320840,"reputation":71,"user_id":11786683,"display_name":"bluelhf"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682796650,"creation_date":1682796650,"answer_id":76138047,"question_id":21387646,"body_markdown":"As sesquipedalias mentioned, the [documentation for Double#valueOf(String)](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Double.html#valueOf(java.lang.String)) describes how to build a regular expression to match valid inputs. Still, the code provided in the documentation breaks just about every Java naming convention, and is inconveniently split into multiple lines. Minifying it into a single statement, we get\r\n\r\n```java\r\nPattern.compile(&quot;[\\\\x00-\\\\x20]*[+-]?(NaN|Infinity|((((\\\\d+)(\\\\.)?((\\\\d+)?)([eE][+-]?(\\\\d+))?)|(\\\\.((\\\\d+))([eE][+-]?(\\\\d+))?)|(((0[xX](\\\\p{XDigit}+)(\\\\.)?)|(0[xX](\\\\p{XDigit}+)?(\\\\.)(\\\\p{XDigit}+)))[pP][+-]?(\\\\d+)))[fFdD]?))[\\\\x00-\\\\x20]*&quot;)\r\n```\r\nI&#39;ve taken the liberty of replacing the original `\\\\p{Digit}`s with the shorter and equivalent `\\\\d`.\r\n\r\nAny input that matches this regular expression can be parsed into a Double using `Double#parseDouble`. That being said, the expression does not necessarily cover all possible floating point literals in Java (as `12_23` for example is a perfectly valid literal in Java, but will throw a `NumberFormatException` if passed to `parseDouble`).\r\n\r\nHere&#39;s an example:\r\n```java\r\nimport java.util.regex.Pattern;\r\n\r\npublic class Program {\r\n    public static final Pattern DOUBLE_PATTERN = Pattern.compile(&quot;[-+](Infinity|NaN|(0(x[\\\\da-fA-F]+|b[01]+)|(\\\\d+(_\\\\d+)*)(\\\\.(\\\\d+(_\\\\d+)*))?)([eE][-+]?\\\\d+)?[fFdD]?)&quot;);\r\n\r\n    public static void main(final String[] args) {\r\n        final String input = String.join(&quot; &quot;, args);\r\n        final boolean match = DOUBLE_PATTERN.matcher(input).matches();\r\n        System.out.println(match ? &quot;It&#39;s a double!&quot; : &quot;Not a double...&quot;);\r\n\r\n        // This will never throw a NumberFormatException.\r\n        if (match) System.out.println(&quot;Value: &quot; + Double.parseDouble(input));\r\n    }\r\n}\r\n```","title":"Regex to find int or double","body":"<p>As sesquipedalias mentioned, the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Double.html#valueOf(java.lang.String)\" rel=\"nofollow noreferrer\">documentation for Double#valueOf(String)</a> describes how to build a regular expression to match valid inputs. Still, the code provided in the documentation breaks just about every Java naming convention, and is inconveniently split into multiple lines. Minifying it into a single statement, we get</p>\n<pre class=\"lang-java prettyprint-override\"><code>Pattern.compile(&quot;[\\\\x00-\\\\x20]*[+-]?(NaN|Infinity|((((\\\\d+)(\\\\.)?((\\\\d+)?)([eE][+-]?(\\\\d+))?)|(\\\\.((\\\\d+))([eE][+-]?(\\\\d+))?)|(((0[xX](\\\\p{XDigit}+)(\\\\.)?)|(0[xX](\\\\p{XDigit}+)?(\\\\.)(\\\\p{XDigit}+)))[pP][+-]?(\\\\d+)))[fFdD]?))[\\\\x00-\\\\x20]*&quot;)\n</code></pre>\n<p>I've taken the liberty of replacing the original <code>\\\\p{Digit}</code>s with the shorter and equivalent <code>\\\\d</code>.</p>\n<p>Any input that matches this regular expression can be parsed into a Double using <code>Double#parseDouble</code>. That being said, the expression does not necessarily cover all possible floating point literals in Java (as <code>12_23</code> for example is a perfectly valid literal in Java, but will throw a <code>NumberFormatException</code> if passed to <code>parseDouble</code>).</p>\n<p>Here's an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.regex.Pattern;\n\npublic class Program {\n    public static final Pattern DOUBLE_PATTERN = Pattern.compile(&quot;[-+](Infinity|NaN|(0(x[\\\\da-fA-F]+|b[01]+)|(\\\\d+(_\\\\d+)*)(\\\\.(\\\\d+(_\\\\d+)*))?)([eE][-+]?\\\\d+)?[fFdD]?)&quot;);\n\n    public static void main(final String[] args) {\n        final String input = String.join(&quot; &quot;, args);\n        final boolean match = DOUBLE_PATTERN.matcher(input).matches();\n        System.out.println(match ? &quot;It's a double!&quot; : &quot;Not a double...&quot;);\n\n        // This will never throw a NumberFormatException.\n        if (match) System.out.println(&quot;Value: &quot; + Double.parseDouble(input));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3878455,"reputation":175,"user_id":3211740,"accept_rate":62,"display_name":"user3211740"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7715,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":12,"score":3,"last_activity_date":1682796650,"creation_date":1390844038,"question_id":21387646,"body_markdown":"I am trying to check if the height is valid. To be valid it must be 1 or 1.4 or 1.0 or 1. etc it cannot be anything else like a string, any chars beside a number or a decimal. The decimal must not be at the start of the string and it can only have 1 decimal. The regex I have been trying is:\r\n\r\n     &quot;/^[0-9]+([\\\\,\\\\.][0-9]+)?$/&quot;\r\nBut it is not working and still accepts strings. Any help would be great, thanks!\r\n\r\n\r\n     public static boolean HeightValid(String height)\r\n     {\r\n            boolean isHeightValid = true;\r\n      \r\n            \r\n            if(!height.matches(&quot;/^[0-9]+([\\\\,\\\\.][0-9]+)?$/&quot;) || height.length() &lt; 1 || height.length() &gt; 9)\r\n               {\r\n               isHeightValid = false;\r\n               }\r\n           else\r\n               {\r\n                 double doubleHeight = Double.parseDouble(height);\r\n                 DecimalFormat df = new DecimalFormat(&quot;#.00&quot;);\r\n                 String decHeight = df.format(doubleHeight);\r\n                 heightField.setText(decHeight);\r\n                 \r\n               }\r\n      \r\n      return isHeightValid;\r\n      }\r\n\r\nIf you need any more information just add a comment, thank you","title":"Regex to find int or double","body":"<p>I am trying to check if the height is valid. To be valid it must be 1 or 1.4 or 1.0 or 1. etc it cannot be anything else like a string, any chars beside a number or a decimal. The decimal must not be at the start of the string and it can only have 1 decimal. The regex I have been trying is:</p>\n\n<pre><code> \"/^[0-9]+([\\\\,\\\\.][0-9]+)?$/\"\n</code></pre>\n\n<p>But it is not working and still accepts strings. Any help would be great, thanks!</p>\n\n<pre><code> public static boolean HeightValid(String height)\n {\n        boolean isHeightValid = true;\n\n\n        if(!height.matches(\"/^[0-9]+([\\\\,\\\\.][0-9]+)?$/\") || height.length() &lt; 1 || height.length() &gt; 9)\n           {\n           isHeightValid = false;\n           }\n       else\n           {\n             double doubleHeight = Double.parseDouble(height);\n             DecimalFormat df = new DecimalFormat(\"#.00\");\n             String decHeight = df.format(doubleHeight);\n             heightField.setText(decHeight);\n\n           }\n\n  return isHeightValid;\n  }\n</code></pre>\n\n<p>If you need any more information just add a comment, thank you</p>\n"},{"tags":["java","postgresql","spring-boot"],"comments":[{"owner":{"account_id":17208480,"reputation":329,"user_id":12458473,"display_name":"Abdullah Khaled"},"score":0,"creation_date":1682816106,"post_id":76137939,"comment_id":134274583,"body_markdown":"Are you sure that these are the only columns in the address entity?","body":"Are you sure that these are the only columns in the address entity?"},{"owner":{"account_id":25624630,"reputation":9,"user_id":19395904,"display_name":"ffffffff"},"score":0,"creation_date":1682817652,"post_id":76137939,"comment_id":134274684,"body_markdown":"Yes @AbdullahKhaled\n\nIt&#39;s a spring boot starter test","body":"Yes @AbdullahKhaled  It&#39;s a spring boot starter test"}],"owner":{"account_id":25624630,"reputation":9,"user_id":19395904,"display_name":"ffffffff"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682795085,"creation_date":1682795085,"question_id":76137939,"body_markdown":"i&#39;m creating a CRUD using SpringBoot,  I&#39;m having an problem to create a Adress, PostgreSQL when I pass that data: \r\n\r\n\r\n    &#39;{\r\n      &quot;street&quot;: &quot;string&quot;,\r\n      &quot;users&quot;: 1\r\n    }&#39;\r\n\r\n\r\n    org.postgresql.util.PSQLException: ERROR: null value in column &quot;teste&quot; of relation &quot;address&quot; violates not-null constraint\r\n      Detalhe: Failing row contains (string, null).\r\n\r\n\r\n\r\nBasicly my idea is create a Adress with String street and link an User to this &quot;Adress&quot;, howhever i&#39;m having problem to create\r\n\r\nI want create a new Adress  using a String street and Id as foreign key to table Users. Thats my code:\r\n\r\n**ADDRESS**:\r\n\r\n    @Entity\r\n    @Table(name=&quot;address&quot;)\r\n    @IdClass(Address.class)\r\n    public class Address implements Serializable {\r\n    \r\n    \r\n        @Id\r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;teste&quot;)\r\n        private User users;\r\n    \r\n    \r\n        @Id\r\n        @Column(name=&quot;street&quot;)\r\n        private String street;\r\n    \r\n      /// Getter and setter\r\n    }\r\n\r\n**USER**: \r\n\r\n    @Entity\r\n    @Table(name=&quot;username&quot;)\r\n    @Embeddable\r\n    public class User implements Serializable {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;)\r\n        private long id;\r\n    \r\n    \r\n        @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;users&quot;)\r\n        private List&lt;Address&gt; adress;\r\n     //Getter and setter\r\n    }\r\n\r\n**AdressDTO:**\r\n\r\n    public class AddressDto {\r\n    \r\n        @NotBlank\r\n        private String street;\r\n    \r\n        @NotNull\r\n        private long users;\r\n    \r\n        public AddressDto() {}\r\n    \r\n        public AddressDto(String street, User user) {\r\n            this.street = street;\r\n            this.users = user.getId();\r\n        }\r\n    \r\n        public long getUsers() {\r\n            return users;\r\n        }\r\n    \r\n        public void setUsers(long users) {\r\n            this.users = users;\r\n        }\r\n    \r\n        public String getStreet() {\r\n            return street;\r\n        }\r\n    \r\n        public void setStreet(String street) {\r\n            this.street = street;\r\n        }\r\n    }\r\n\r\n**Repository:**\r\n\r\n    public interface AddressRepository extends JpaRepository&lt;Address, User&gt; {\r\n    }\r\n\r\n\r\nWhy my query return error about null value?","title":"How can I pass only an Id as parameter of another class in DTO?","body":"<p>i'm creating a CRUD using SpringBoot,  I'm having an problem to create a Adress, PostgreSQL when I pass that data:</p>\n<pre><code>'{\n  &quot;street&quot;: &quot;string&quot;,\n  &quot;users&quot;: 1\n}'\n\n\norg.postgresql.util.PSQLException: ERROR: null value in column &quot;teste&quot; of relation &quot;address&quot; violates not-null constraint\n  Detalhe: Failing row contains (string, null).\n</code></pre>\n<p>Basicly my idea is create a Adress with String street and link an User to this &quot;Adress&quot;, howhever i'm having problem to create</p>\n<p>I want create a new Adress  using a String street and Id as foreign key to table Users. Thats my code:</p>\n<p><strong>ADDRESS</strong>:</p>\n<pre><code>@Entity\n@Table(name=&quot;address&quot;)\n@IdClass(Address.class)\npublic class Address implements Serializable {\n\n\n    @Id\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;teste&quot;)\n    private User users;\n\n\n    @Id\n    @Column(name=&quot;street&quot;)\n    private String street;\n\n  /// Getter and setter\n}\n</code></pre>\n<p><strong>USER</strong>:</p>\n<pre><code>@Entity\n@Table(name=&quot;username&quot;)\n@Embeddable\npublic class User implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private long id;\n\n\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;users&quot;)\n    private List&lt;Address&gt; adress;\n //Getter and setter\n}\n</code></pre>\n<p><strong>AdressDTO:</strong></p>\n<pre><code>public class AddressDto {\n\n    @NotBlank\n    private String street;\n\n    @NotNull\n    private long users;\n\n    public AddressDto() {}\n\n    public AddressDto(String street, User user) {\n        this.street = street;\n        this.users = user.getId();\n    }\n\n    public long getUsers() {\n        return users;\n    }\n\n    public void setUsers(long users) {\n        this.users = users;\n    }\n\n    public String getStreet() {\n        return street;\n    }\n\n    public void setStreet(String street) {\n        this.street = street;\n    }\n}\n</code></pre>\n<p><strong>Repository:</strong></p>\n<pre><code>public interface AddressRepository extends JpaRepository&lt;Address, User&gt; {\n}\n</code></pre>\n<p>Why my query return error about null value?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682621816,"creation_date":1682621816,"answer_id":76123789,"question_id":76120561,"body_markdown":"You can statically access the `ServletRequest` as follow:\r\n```java\r\npublic static Optional&lt;HttpServletRequest&gt; getRequest() {\r\n    RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();\r\n    if (requestAttributes instanceof ServletRequestAttributes attr) {\r\n        return Optional.ofNullable(attr.getRequest());\r\n    }\r\n    return Optional.empty();\r\n}\r\n```","title":"Spring Security 6 OAuth2 Custom Validator","body":"<p>You can statically access the <code>ServletRequest</code> as follow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Optional&lt;HttpServletRequest&gt; getRequest() {\n    RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();\n    if (requestAttributes instanceof ServletRequestAttributes attr) {\n        return Optional.ofNullable(attr.getRequest());\n    }\n    return Optional.empty();\n}\n</code></pre>\n"}],"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1667,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76123789,"answer_count":1,"score":0,"last_activity_date":1682794830,"creation_date":1682599350,"question_id":76120561,"body_markdown":"I have a java application on spring-boot 3.0.5, which is configured as a resource server like this:\r\n\r\nMaven dependencies:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nSecurity configuration: \r\n\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.http.SessionCreationPolicy;\r\n    import org.springframework.security.oauth2.core.DelegatingOAuth2TokenValidator;\r\n    import org.springframework.security.oauth2.core.OAuth2TokenValidator;\r\n    import org.springframework.security.oauth2.jwt.*;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration {\r\n        \r\n        @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\r\n        private String issuerUri;\r\n        \r\n        \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http.cors().disable()\r\n                    .csrf().disable()\r\n                    .authorizeHttpRequests()\r\n                    .requestMatchers(&quot;/actuator/**&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .oauth2ResourceServer()\r\n                    .jwt();\r\n    \r\n            return http.build();\r\n        }\r\n        \r\n        @Bean\r\n        public JwtDecoder jwtDecoder() {\r\n            NimbusJwtDecoder jwtDecoder = JwtDecoders.fromIssuerLocation(issuerUri);\r\n    \r\n            OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuerUri);\r\n            OAuth2TokenValidator&lt;Jwt&gt; withOperation = new OperationClaimValidator();\r\n    \r\n            jwtDecoder.setJwtValidator(\r\n                    new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, withOperation)\r\n            );\r\n    \r\n            return jwtDecoder;\r\n        }\r\n    }\r\n\r\nAs you can see, I have defined `JwtDecoder` bean to add a custom validator `OperationClaimValidator` for JWT, because I want to validate my custom jwt claim `operation`: \r\n\r\n    import org.springframework.security.oauth2.core.OAuth2Error;\r\n    import org.springframework.security.oauth2.core.OAuth2TokenValidator;\r\n    import org.springframework.security.oauth2.core.OAuth2TokenValidatorResult;\r\n    import org.springframework.security.oauth2.jwt.Jwt;\r\n    \r\n    public class OperationClaimValidator implements OAuth2TokenValidator&lt;Jwt&gt; {\r\n    \r\n        private static final String CLAIM_OPERATION = &quot;operation&quot;;\r\n        \r\n        \r\n        @Override\r\n        public OAuth2TokenValidatorResult validate(Jwt jwt) {\r\n            if (jwt.getClaimAsString(CLAIM_OPERATION).equals(&quot;Value-from-HttpServletRequest&quot;)) { // problem here\r\n                return OAuth2TokenValidatorResult.success();\r\n            } else {\r\n                return OAuth2TokenValidatorResult.failure(\r\n                        new OAuth2Error(&quot;invalid_token&quot;, &quot;The required operation is GET&quot;, null)\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n**The problem is** that I want to compare the value from the `operation` claim with the value from the `HttpServletRequest#getMethod`, but I can&#39;t figure out how I can access the `HttpServletRequest` from the `OAuth2TokenValidator` implementation.\r\n\r\nI can validate this claim another way using `OncePerRequestFilter`:\r\n\r\n    @Component\r\n    public class JwtAuthenticationFilter extends OncePerRequestFilter {\r\n    \r\n        private static final String CLAIM_OPERATION = &quot;operation&quot;;\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n                throws ServletException, IOException {\r\n    \r\n            String requestMethod = request.getMethod();\r\n            String operationClaimValue = getOperationClaimValue(request);\r\n    \r\n            if (!requestMethod.equals(operationClaimValue)) {\r\n                response.sendError(HttpStatus.UNAUTHORIZED.value(),\r\n                        &quot;Operation claim in token does not match with http method used in request&quot;);\r\n            } else {\r\n                filterChain.doFilter(request, response);\r\n            }\r\n        }\r\n    \r\n        private String getOperationClaimValue(HttpServletRequest request) {\r\n            Principal principal = request.getUserPrincipal();\r\n            Jwt token = ((JwtAuthenticationToken) principal).getToken();\r\n            return token.getClaimAsString(CLAIM_OPERATION);\r\n        }\r\n    }\r\n, but I would like to achieve it implementing `OAuth2TokenValidator`. Any ideas? Thank you in advance.","title":"Spring Security 6 OAuth2 Custom Validator","body":"<p>I have a java application on spring-boot 3.0.5, which is configured as a resource server like this:</p>\n<p>Maven dependencies:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Security configuration:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.oauth2.core.DelegatingOAuth2TokenValidator;\nimport org.springframework.security.oauth2.core.OAuth2TokenValidator;\nimport org.springframework.security.oauth2.jwt.*;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n    \n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\n    private String issuerUri;\n    \n    \n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.cors().disable()\n                .csrf().disable()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/actuator/**&quot;).permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .oauth2ResourceServer()\n                .jwt();\n\n        return http.build();\n    }\n    \n    @Bean\n    public JwtDecoder jwtDecoder() {\n        NimbusJwtDecoder jwtDecoder = JwtDecoders.fromIssuerLocation(issuerUri);\n\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuerUri);\n        OAuth2TokenValidator&lt;Jwt&gt; withOperation = new OperationClaimValidator();\n\n        jwtDecoder.setJwtValidator(\n                new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, withOperation)\n        );\n\n        return jwtDecoder;\n    }\n}\n</code></pre>\n<p>As you can see, I have defined <code>JwtDecoder</code> bean to add a custom validator <code>OperationClaimValidator</code> for JWT, because I want to validate my custom jwt claim <code>operation</code>:</p>\n<pre><code>import org.springframework.security.oauth2.core.OAuth2Error;\nimport org.springframework.security.oauth2.core.OAuth2TokenValidator;\nimport org.springframework.security.oauth2.core.OAuth2TokenValidatorResult;\nimport org.springframework.security.oauth2.jwt.Jwt;\n\npublic class OperationClaimValidator implements OAuth2TokenValidator&lt;Jwt&gt; {\n\n    private static final String CLAIM_OPERATION = &quot;operation&quot;;\n    \n    \n    @Override\n    public OAuth2TokenValidatorResult validate(Jwt jwt) {\n        if (jwt.getClaimAsString(CLAIM_OPERATION).equals(&quot;Value-from-HttpServletRequest&quot;)) { // problem here\n            return OAuth2TokenValidatorResult.success();\n        } else {\n            return OAuth2TokenValidatorResult.failure(\n                    new OAuth2Error(&quot;invalid_token&quot;, &quot;The required operation is GET&quot;, null)\n            );\n        }\n    }\n}\n</code></pre>\n<p><strong>The problem is</strong> that I want to compare the value from the <code>operation</code> claim with the value from the <code>HttpServletRequest#getMethod</code>, but I can't figure out how I can access the <code>HttpServletRequest</code> from the <code>OAuth2TokenValidator</code> implementation.</p>\n<p>I can validate this claim another way using <code>OncePerRequestFilter</code>:</p>\n<pre><code>@Component\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    private static final String CLAIM_OPERATION = &quot;operation&quot;;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n\n        String requestMethod = request.getMethod();\n        String operationClaimValue = getOperationClaimValue(request);\n\n        if (!requestMethod.equals(operationClaimValue)) {\n            response.sendError(HttpStatus.UNAUTHORIZED.value(),\n                    &quot;Operation claim in token does not match with http method used in request&quot;);\n        } else {\n            filterChain.doFilter(request, response);\n        }\n    }\n\n    private String getOperationClaimValue(HttpServletRequest request) {\n        Principal principal = request.getUserPrincipal();\n        Jwt token = ((JwtAuthenticationToken) principal).getToken();\n        return token.getClaimAsString(CLAIM_OPERATION);\n    }\n}\n</code></pre>\n<p>, but I would like to achieve it implementing <code>OAuth2TokenValidator</code>. Any ideas? Thank you in advance.</p>\n"},{"tags":["java","spring","spring-boot","oauth-2.0"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1682632303,"post_id":76124075,"comment_id":134250803,"body_markdown":"Why do you add a token from provider A to customer requests? Why don&#39;t you just propagate the token issued by provider B and configure your resource servers to accept tokens from both A &amp; B issuers? That way, all you&#39;d have to do is define access control rules based on roles and issuer.","body":"Why do you add a token from provider A to customer requests? Why don&#39;t you just propagate the token issued by provider B and configure your resource servers to accept tokens from both A &amp; B issuers? That way, all you&#39;d have to do is define access control rules based on roles and issuer."},{"owner":{"account_id":28437638,"reputation":1,"user_id":21757488,"display_name":"G.T."},"score":0,"creation_date":1684860303,"post_id":76124075,"comment_id":134577949,"body_markdown":"Hi, thank you for your response. I&#39;ve taken into consideration your pointer and actually decided to follow something along the lines you mentioned. As such, I am configuring endpoint paths with the appropriate resource server, there&#39;s just a long road ahead in this journey ;).","body":"Hi, thank you for your response. I&#39;ve taken into consideration your pointer and actually decided to follow something along the lines you mentioned. As such, I am configuring endpoint paths with the appropriate resource server, there&#39;s just a long road ahead in this journey ;)."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1684866609,"post_id":76124075,"comment_id":134579143,"body_markdown":"[Those tutorials](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials) I wrote could ease your journey","body":"<a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">Those tutorials</a> I wrote could ease your journey"}],"owner":{"account_id":28437638,"reputation":1,"user_id":21757488,"display_name":"G.T."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682794799,"creation_date":1682624480,"question_id":76124075,"body_markdown":"I am having a hard time trying to find an appropriate solution for my use case since I can&#39;t seem to find documentation about this. The closest I could find that relates a little to my issue would be [this](https://stackoverflow.com/questions/40627561/spring-cloud-oauth2-resource-server-with-multiple-authorization-server).\r\n\r\n### Here&#39;s a little summary of my situation\r\n\r\nAll of our Spring Boot microservices are using an `OAuth2ResourceServer` configured with our internal provider (let&#39;s call it **Provider A**). That way, only other microservices (configured with an OAuth2 WebClient) or employees can send requests to our microservices. So far, I got this working without any problem.\r\n\r\nThe problem I am facing is that some endpoints of our microservices require an additional token (**Provider B**) in order to authorize our customers (eg. to access or modify their data).\r\n\r\nAs such, all HTTP requests that are sent to our microservices includes an `Authorization` header for our **Provider A**. On the other hand, some of those HTTP requests also have an `CUSTOMER_TOKEN` header for our **Provider B**.\r\n\r\n**My question**\r\n\r\nHow would one configure Spring Boot so that the `OAuth2ResourceServer` support 1 or 2 Jwt tokens from two different issuers? Any pointers or better solutions for this?\r\n\r\n**What I&#39;ve attempted**\r\n\r\n\r\nSo far, I&#39;ve tried a couple of things which feels hacky and I suspect I am doing something wrong or I am just not looking in the right direction.\r\n\r\nThe *best* solution that I have come up with consists of an `OAuth2ResourceServer` configured with a custom `Customizer&lt;OAuth2ResourceServerConfigurer&lt;HttpSecurity&gt;&gt;`, a custom `AuthenticationManagerResolver`, a custom `AccessDeniedHandler`, a custom `AuthenticationEntrypoint`, and two `JwtDecoder` configured with their respective JWK Set URIs and Issuer URIs:\r\n\r\n\r\n```\r\n  @Bean\r\n  protected SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity)\r\n      throws Exception {\r\n    return httpSecurity.csrf()\r\n        .disable()\r\n        .cors()\r\n        .configurationSource(corsConfigurationSource())\r\n        .and()\r\n        .sessionManagement()\r\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n        .and()\r\n        .authorizeRequests()\r\n        .antMatchers(WHITELIST)\r\n        .permitAll()\r\n        .and()\r\n        .authorizeRequests()\r\n        .anyRequest()\r\n        .authenticated()\r\n        .and()\r\n        .oauth2ResourceServer(configurer -&gt; \r\n          configurer\r\n              .authenticationManagerResolver(authenticationManagerResolver())\r\n              .authenticationEntryPoint(authenticationEntryPoint())\r\n              .accessDeniedHandler(accessDeniedHandler());\r\n        )\r\n        .build();\r\n  }\r\n\r\n  @Bean\r\n  public AccessDeniedHandler accessDeniedHandler(){\r\n    return (request, response, accessDeniedException) -&gt; {\r\n      response.setStatus(HttpServletResponse.SC_FORBIDDEN);\r\n      response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n      response.setCharacterEncoding(StandardCharsets.UTF_8.name());\r\n      PrintWriter writer = response.getWriter();\r\n      writer.write(&quot;\\&quot;message\\&quot;: \\&quot;access denied\\&quot;&quot;);\r\n      writer.flush();\r\n    };\r\n  }\r\n\r\n  @Bean\r\n  public AuthenticationEntryPoint authenticationEntryPoint(){\r\n    return (request, response, authenticationException) -&gt; {\r\n      response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n      response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n      response.setCharacterEncoding(StandardCharsets.UTF_8.name());\r\n      PrintWriter writer = response.getWriter();\r\n      writer.write(&quot;\\&quot;message\\&quot;: \\&quot;unauthorized\\&quot;&quot;);\r\n      writer.flush();\r\n    };\r\n  }\r\n\r\n  @Bean\r\n  protected AuthenticationManagerResolver&lt;HttpServletRequest&gt;\r\n      authenticationManagerResolver() {\r\n    return request -&gt;\r\n        authentication -&gt; {\r\n          List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;(); // merged authorities\r\n          Map&lt;String, Object&gt; attributes = new HashMap&lt;&gt;(); // merged attributes\r\n          \r\n          Authentication providerA = authenticate(request, OAuth2Provider.PROVIDER_A, authorities, attributes);\r\n          \r\n          if (request.getHeader(OAuth2Provider.PROVIDER_B.getHeader()) == null) {\r\n            // If Provider B token is not in the request, the user won&#39;t have the appropriate role\r\n            // to access endpoints annotated with @RoleAllowed(CUSTOMER_ROLE)\r\n            return providerA;\r\n          }\r\n          \r\n          return authenticate(request, OAuth2Provider.PROVIDER_B, authorities, attributes);\r\n        };\r\n  }\r\n\r\n  public final Authentication authenticate(\r\n      HttpServletRequest request,\r\n      OAuth2Provider oAuth2Provider,\r\n      List&lt;GrantedAuthority&gt; authorities,\r\n      Map&lt;String, Object&gt; attributes) {\r\n    Jwt jwt = decodeAccessToken(request, oAuth2Provider); // JwtDecoder + error handling\r\n\r\n    authorities.add(new SimpleGrantedAuthority(oAuth2Provider.getRole()));\r\n    authorities.addAll(getTokenAuthorities(jwt));\r\n\r\n    Map&lt;String, Object&gt; providerAttributes = new HashMap&lt;&gt;(jwt.getClaims());\r\n    providerAttributes.put(&quot;token&quot;, jwt);\r\n    attributes.put(oAuth2Provider.getName(), providerAttributes);\r\n\r\n    OAuth2AuthenticatedPrincipal principal =\r\n        new DefaultOAuth2AuthenticatedPrincipal(attributes, authorities);\r\n    \r\n    OAuth2AccessToken accessToken =\r\n        new OAuth2AccessToken(\r\n            TokenType.BEARER, jwt.getTokenValue(), jwt.getIssuedAt(), jwt.getExpiresAt());\r\n\r\n    return new BearerTokenAuthentication(principal, accessToken, authorities);\r\n  }\r\n```\r\n\r\nThis solution works, per se, but feels hacky to me since I need to manually reply with 401 or 403, which is not really a good sign when dealing with security. Also `HttpServletRequest` seems to have been dropped from Spring 3.x, which kind of amplifies my feeling of hackyness and the possibility of better solutions.\r\n","title":"Spring Boot OAuth2ResourceServer with one or two Jwt token","body":"<p>I am having a hard time trying to find an appropriate solution for my use case since I can't seem to find documentation about this. The closest I could find that relates a little to my issue would be <a href=\"https://stackoverflow.com/questions/40627561/spring-cloud-oauth2-resource-server-with-multiple-authorization-server\">this</a>.</p>\n<h3>Here's a little summary of my situation</h3>\n<p>All of our Spring Boot microservices are using an <code>OAuth2ResourceServer</code> configured with our internal provider (let's call it <strong>Provider A</strong>). That way, only other microservices (configured with an OAuth2 WebClient) or employees can send requests to our microservices. So far, I got this working without any problem.</p>\n<p>The problem I am facing is that some endpoints of our microservices require an additional token (<strong>Provider B</strong>) in order to authorize our customers (eg. to access or modify their data).</p>\n<p>As such, all HTTP requests that are sent to our microservices includes an <code>Authorization</code> header for our <strong>Provider A</strong>. On the other hand, some of those HTTP requests also have an <code>CUSTOMER_TOKEN</code> header for our <strong>Provider B</strong>.</p>\n<p><strong>My question</strong></p>\n<p>How would one configure Spring Boot so that the <code>OAuth2ResourceServer</code> support 1 or 2 Jwt tokens from two different issuers? Any pointers or better solutions for this?</p>\n<p><strong>What I've attempted</strong></p>\n<p>So far, I've tried a couple of things which feels hacky and I suspect I am doing something wrong or I am just not looking in the right direction.</p>\n<p>The <em>best</em> solution that I have come up with consists of an <code>OAuth2ResourceServer</code> configured with a custom <code>Customizer&lt;OAuth2ResourceServerConfigurer&lt;HttpSecurity&gt;&gt;</code>, a custom <code>AuthenticationManagerResolver</code>, a custom <code>AccessDeniedHandler</code>, a custom <code>AuthenticationEntrypoint</code>, and two <code>JwtDecoder</code> configured with their respective JWK Set URIs and Issuer URIs:</p>\n<pre><code>  @Bean\n  protected SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity)\n      throws Exception {\n    return httpSecurity.csrf()\n        .disable()\n        .cors()\n        .configurationSource(corsConfigurationSource())\n        .and()\n        .sessionManagement()\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        .authorizeRequests()\n        .antMatchers(WHITELIST)\n        .permitAll()\n        .and()\n        .authorizeRequests()\n        .anyRequest()\n        .authenticated()\n        .and()\n        .oauth2ResourceServer(configurer -&gt; \n          configurer\n              .authenticationManagerResolver(authenticationManagerResolver())\n              .authenticationEntryPoint(authenticationEntryPoint())\n              .accessDeniedHandler(accessDeniedHandler());\n        )\n        .build();\n  }\n\n  @Bean\n  public AccessDeniedHandler accessDeniedHandler(){\n    return (request, response, accessDeniedException) -&gt; {\n      response.setStatus(HttpServletResponse.SC_FORBIDDEN);\n      response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n      response.setCharacterEncoding(StandardCharsets.UTF_8.name());\n      PrintWriter writer = response.getWriter();\n      writer.write(&quot;\\&quot;message\\&quot;: \\&quot;access denied\\&quot;&quot;);\n      writer.flush();\n    };\n  }\n\n  @Bean\n  public AuthenticationEntryPoint authenticationEntryPoint(){\n    return (request, response, authenticationException) -&gt; {\n      response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n      response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n      response.setCharacterEncoding(StandardCharsets.UTF_8.name());\n      PrintWriter writer = response.getWriter();\n      writer.write(&quot;\\&quot;message\\&quot;: \\&quot;unauthorized\\&quot;&quot;);\n      writer.flush();\n    };\n  }\n\n  @Bean\n  protected AuthenticationManagerResolver&lt;HttpServletRequest&gt;\n      authenticationManagerResolver() {\n    return request -&gt;\n        authentication -&gt; {\n          List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;(); // merged authorities\n          Map&lt;String, Object&gt; attributes = new HashMap&lt;&gt;(); // merged attributes\n          \n          Authentication providerA = authenticate(request, OAuth2Provider.PROVIDER_A, authorities, attributes);\n          \n          if (request.getHeader(OAuth2Provider.PROVIDER_B.getHeader()) == null) {\n            // If Provider B token is not in the request, the user won't have the appropriate role\n            // to access endpoints annotated with @RoleAllowed(CUSTOMER_ROLE)\n            return providerA;\n          }\n          \n          return authenticate(request, OAuth2Provider.PROVIDER_B, authorities, attributes);\n        };\n  }\n\n  public final Authentication authenticate(\n      HttpServletRequest request,\n      OAuth2Provider oAuth2Provider,\n      List&lt;GrantedAuthority&gt; authorities,\n      Map&lt;String, Object&gt; attributes) {\n    Jwt jwt = decodeAccessToken(request, oAuth2Provider); // JwtDecoder + error handling\n\n    authorities.add(new SimpleGrantedAuthority(oAuth2Provider.getRole()));\n    authorities.addAll(getTokenAuthorities(jwt));\n\n    Map&lt;String, Object&gt; providerAttributes = new HashMap&lt;&gt;(jwt.getClaims());\n    providerAttributes.put(&quot;token&quot;, jwt);\n    attributes.put(oAuth2Provider.getName(), providerAttributes);\n\n    OAuth2AuthenticatedPrincipal principal =\n        new DefaultOAuth2AuthenticatedPrincipal(attributes, authorities);\n    \n    OAuth2AccessToken accessToken =\n        new OAuth2AccessToken(\n            TokenType.BEARER, jwt.getTokenValue(), jwt.getIssuedAt(), jwt.getExpiresAt());\n\n    return new BearerTokenAuthentication(principal, accessToken, authorities);\n  }\n</code></pre>\n<p>This solution works, per se, but feels hacky to me since I need to manually reply with 401 or 403, which is not really a good sign when dealing with security. Also <code>HttpServletRequest</code> seems to have been dropped from Spring 3.x, which kind of amplifies my feeling of hackyness and the possibility of better solutions.</p>\n"},{"tags":["java","libgdx","entity-component-system"],"comments":[{"owner":{"account_id":3097699,"reputation":946,"user_id":2622571,"display_name":"Basim Khajwal"},"score":0,"creation_date":1468680763,"post_id":38402694,"comment_id":64232626,"body_markdown":"If you have a physics component (that uses a Box2D body if I am not mistaken) what is the point of having a separate transform and movement component when it is already stored / updated in the `Body` class?","body":"If you have a physics component (that uses a Box2D body if I am not mistaken) what is the point of having a separate transform and movement component when it is already stored / updated in the <code>Body</code> class?"},{"owner":{"account_id":3333480,"reputation":397,"user_id":2801777,"accept_rate":93,"display_name":"ronscript"},"score":0,"creation_date":1468690680,"post_id":38402694,"comment_id":64235344,"body_markdown":"That&#39;s what I&#39;m asking too, because I&#39;m so confused.","body":"That&#39;s what I&#39;m asking too, because I&#39;m so confused."}],"owner":{"account_id":3333480,"reputation":397,"user_id":2801777,"accept_rate":93,"display_name":"ronscript"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682793791,"creation_date":1468606419,"question_id":38402694,"body_markdown":"If my `MovementSystem` behavior is like this.\r\n\r\n    public class MovementSystem extends IntervalIteratingSystem {\r\n\r\n         private Vector2 temp = new Vector2();\r\n\r\n         public MovementSystem() {\r\n             super(Family.all(TransformComponent.class, MovementComponent.class).get(), Constants.TIME_STEP);\r\n         }\r\n\r\n         @Override\r\n         protected void processEntity(Entity entity) {\r\n             TransformComponent transform = Mappers.transform.get(entity);\r\n             MovementComponent movement = Mappers.movement.get(entity);\r\n\r\n             Vector2 acceleration = temp.set(movement.accel).scl(0.5f);\r\n             movement.velocity.add(acceleration);\r\n\r\n             Vector2 acceleratedVelocity = temp.set(movement.velocity).scl(0.5f);\r\n             transform.position.add(acceleratedVelocity);\r\n         }\r\n\r\n    }\r\n\r\nWhile on my `PhysicsSystem` behavior.\r\n\r\n    public class PhysicsSystem extends IntervalIteratingSystem {\r\n         @Override\r\n         protected void processEntity(Entity entity) {\r\n              PhysicsComponent physics = Mappers.physics.get(entity);\r\n              TransformComponent transform = Mappers.transform.get(entity);\r\n              SizeComponent size = Mappers.size.get(entity);\r\n\r\n              transform.position.set(physics.body.getPositon());\r\n              transform.rotation = physics.body.getAngle();\r\n         }\r\n    }\r\n\r\n    PlayerSystem {\r\n         public void updateMovement(Entity entity) {\r\n               PlayerComponent player = Mappers.player.get(entity);\r\n               PhysicsComponent physics = Mapper.physics.get(entity);\r\n               MovementComponent movement = Mapper.movement.get(entity);\r\n               \r\n               float VELOCITY = player.MOVE_VELOCITY;\r\n             \r\n               switch(movement.state) {\r\n                    case UP: movement.velocity.set(0, VELOCITY) break;\r\n                    case DOWN: movement.velocity.set(0, -VELOCITY) break;\r\n                    case LEFT: movement.velocity.set(-VELOCITY, 0) break;\r\n                    case RIGHT: movement.velocity.set(VELOCITY, 0) break;\r\n               }\r\n\r\n               physics.body.setLinearVelocity(movement.velocity);\r\n         }\r\n    }\r\n\r\n\r\n**Objectives** \r\n\r\n - To update body position (This can be done using `PhysicsSystem`)\r\n - To update texture position (This can be done using `MovementSystem`)\r\n\r\n**Problems**\r\n\r\n - I&#39;ve use both systems\r\n - `PhysicsSystem` is overriding or updating the `TransformComponent` datas\r\n - `MovementSystem` is incrementing the `TransformComponent` position, using `MovementComponent` velocity and acceleration.\r\n - When both systems used together the texture is confused because of the `PhysicsSystem` and `MovementSystem` positioning.\r\n\r\n**Question** \r\n\r\nDo you think I&#39;m doing it right? it&#39;s just the behavior I need to revise to fit its objectives?","title":"libgdx ashley ecs framework - Should I use MovementSystem with PhysicsSystem?","body":"<p>If my <code>MovementSystem</code> behavior is like this.</p>\n\n<pre><code>public class MovementSystem extends IntervalIteratingSystem {\n\n     private Vector2 temp = new Vector2();\n\n     public MovementSystem() {\n         super(Family.all(TransformComponent.class, MovementComponent.class).get(), Constants.TIME_STEP);\n     }\n\n     @Override\n     protected void processEntity(Entity entity) {\n         TransformComponent transform = Mappers.transform.get(entity);\n         MovementComponent movement = Mappers.movement.get(entity);\n\n         Vector2 acceleration = temp.set(movement.accel).scl(0.5f);\n         movement.velocity.add(acceleration);\n\n         Vector2 acceleratedVelocity = temp.set(movement.velocity).scl(0.5f);\n         transform.position.add(acceleratedVelocity);\n     }\n\n}\n</code></pre>\n\n<p>While on my <code>PhysicsSystem</code> behavior.</p>\n\n<pre><code>public class PhysicsSystem extends IntervalIteratingSystem {\n     @Override\n     protected void processEntity(Entity entity) {\n          PhysicsComponent physics = Mappers.physics.get(entity);\n          TransformComponent transform = Mappers.transform.get(entity);\n          SizeComponent size = Mappers.size.get(entity);\n\n          transform.position.set(physics.body.getPositon());\n          transform.rotation = physics.body.getAngle();\n     }\n}\n\nPlayerSystem {\n     public void updateMovement(Entity entity) {\n           PlayerComponent player = Mappers.player.get(entity);\n           PhysicsComponent physics = Mapper.physics.get(entity);\n           MovementComponent movement = Mapper.movement.get(entity);\n\n           float VELOCITY = player.MOVE_VELOCITY;\n\n           switch(movement.state) {\n                case UP: movement.velocity.set(0, VELOCITY) break;\n                case DOWN: movement.velocity.set(0, -VELOCITY) break;\n                case LEFT: movement.velocity.set(-VELOCITY, 0) break;\n                case RIGHT: movement.velocity.set(VELOCITY, 0) break;\n           }\n\n           physics.body.setLinearVelocity(movement.velocity);\n     }\n}\n</code></pre>\n\n<p><strong>Objectives</strong> </p>\n\n<ul>\n<li>To update body position (This can be done using <code>PhysicsSystem</code>)</li>\n<li>To update texture position (This can be done using <code>MovementSystem</code>)</li>\n</ul>\n\n<p><strong>Problems</strong></p>\n\n<ul>\n<li>I've use both systems</li>\n<li><code>PhysicsSystem</code> is overriding or updating the <code>TransformComponent</code> datas</li>\n<li><code>MovementSystem</code> is incrementing the <code>TransformComponent</code> position, using <code>MovementComponent</code> velocity and acceleration.</li>\n<li>When both systems used together the texture is confused because of the <code>PhysicsSystem</code> and <code>MovementSystem</code> positioning.</li>\n</ul>\n\n<p><strong>Question</strong> </p>\n\n<p>Do you think I'm doing it right? it's just the behavior I need to revise to fit its objectives?</p>\n"},{"tags":["java","libgdx","entity-component-system"],"comments":[{"owner":{"account_id":2153338,"reputation":4072,"user_id":1909094,"accept_rate":83,"display_name":"Lake"},"score":0,"creation_date":1468944267,"post_id":38444067,"comment_id":64330877,"body_markdown":"What&#39;s the error or unexpected behavior?","body":"What&#39;s the error or unexpected behavior?"},{"owner":{"account_id":3333480,"reputation":397,"user_id":2801777,"accept_rate":93,"display_name":"ronscript"},"score":0,"creation_date":1468945177,"post_id":38444067,"comment_id":64331457,"body_markdown":"the texture and body does not show up","body":"the texture and body does not show up"},{"owner":{"account_id":2153338,"reputation":4072,"user_id":1909094,"accept_rate":83,"display_name":"Lake"},"score":0,"creation_date":1468945315,"post_id":38444067,"comment_id":64331543,"body_markdown":"I don&#39;t think that problem is related to Ashley in any way.  Maybe you should check your rendering code.","body":"I don&#39;t think that problem is related to Ashley in any way.  Maybe you should check your rendering code."}],"owner":{"account_id":3333480,"reputation":397,"user_id":2801777,"accept_rate":93,"display_name":"ronscript"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":478,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682793629,"creation_date":1468868091,"question_id":38444067,"body_markdown":"In this below code method, I&#39;ve tested creating and removing entity, because I&#39;m planning to create bullet pool this way.\r\n     \r\n     public void build () {\r\n            Entity bulletTest1 = createBullet(0,0);   // works perfectly but\r\n            removeEntity(bulletTest1); // after engine remove this bulletTest1 entity then\r\n            Entity bulletTest2 = createBullet(0,0); // recreate it, it doesn&#39;t work anymore \r\n     }\r\n\r\nIn this below code example I&#39;ve create a `BulletFactory` that creates bullet entity made from engine.\r\n\r\n     public Entity createBullet(float x, float y) {\r\n        Entity entity = createEntity(Constants.Flags.BULLET);\r\n\r\n        BulletComponent bullet = engine.createComponent(BulletComponent.class);\r\n        SizeComponent size = engine.createComponent(SizeComponent.class);\r\n        TextureComponent texture = engine.createComponent(TextureComponent.class);\r\n        PhysicsComponent physics = engine.createComponent(PhysicsComponent.class);\r\n        TransformComponent transform = engine.createComponent(TransformComponent.class);\r\n        MovementComponent movement = engine.createComponent(MovementComponent.class);\r\n\r\n        texture.region = GameAssets.cannonball;\r\n        transform.position.set(x, y);\r\n        size.width = 0.25f;\r\n        size.height = 0.25f;\r\n        transform.origin.set(size.width / 2, size.height /2);\r\n        float bodyPosX = transform.position.x + transform.origin.x;\r\n        float bodyPosY = transform.position.y +  transform.origin.y;\r\n        physics.body = createBulletBody(entity, bodyPosX, bodyPosY);\r\n\r\n        entity.add(bullet);\r\n        entity.add(size);\r\n        entity.add(texture);\r\n        entity.add(physics);\r\n        entity.add(transform);\r\n        entity.add(movement);\r\n\r\n        engine.addEntity(entity);\r\n        return entity;\r\n    }\r\n\r\n    public Entity createEntity(Constants.Flags flag) {\r\n        Entity e = engine.createEntity();\r\n        e.flags = flag.ordinal();\r\n        return e;\r\n    }","title":"libgdx ashley - Why I cannot recreate entity after removing entity from the engine?","body":"<p>In this below code method, I've tested creating and removing entity, because I'm planning to create bullet pool this way.</p>\n\n<pre><code> public void build () {\n        Entity bulletTest1 = createBullet(0,0);   // works perfectly but\n        removeEntity(bulletTest1); // after engine remove this bulletTest1 entity then\n        Entity bulletTest2 = createBullet(0,0); // recreate it, it doesn't work anymore \n }\n</code></pre>\n\n<p>In this below code example I've create a <code>BulletFactory</code> that creates bullet entity made from engine.</p>\n\n<pre><code> public Entity createBullet(float x, float y) {\n    Entity entity = createEntity(Constants.Flags.BULLET);\n\n    BulletComponent bullet = engine.createComponent(BulletComponent.class);\n    SizeComponent size = engine.createComponent(SizeComponent.class);\n    TextureComponent texture = engine.createComponent(TextureComponent.class);\n    PhysicsComponent physics = engine.createComponent(PhysicsComponent.class);\n    TransformComponent transform = engine.createComponent(TransformComponent.class);\n    MovementComponent movement = engine.createComponent(MovementComponent.class);\n\n    texture.region = GameAssets.cannonball;\n    transform.position.set(x, y);\n    size.width = 0.25f;\n    size.height = 0.25f;\n    transform.origin.set(size.width / 2, size.height /2);\n    float bodyPosX = transform.position.x + transform.origin.x;\n    float bodyPosY = transform.position.y +  transform.origin.y;\n    physics.body = createBulletBody(entity, bodyPosX, bodyPosY);\n\n    entity.add(bullet);\n    entity.add(size);\n    entity.add(texture);\n    entity.add(physics);\n    entity.add(transform);\n    entity.add(movement);\n\n    engine.addEntity(entity);\n    return entity;\n}\n\npublic Entity createEntity(Constants.Flags flag) {\n    Entity e = engine.createEntity();\n    e.flags = flag.ordinal();\n    return e;\n}\n</code></pre>\n"},{"tags":["java","libgdx","entity-component-system"],"answers":[{"comments":[{"owner":{"account_id":3333480,"reputation":397,"user_id":2801777,"accept_rate":93,"display_name":"ronscript"},"score":0,"creation_date":1468510059,"post_id":38368771,"comment_id":64166601,"body_markdown":"what If I added states, methods on my gun class? do you think its better now to create a new wrapper?","body":"what If I added states, methods on my gun class? do you think its better now to create a new wrapper?"},{"owner":{"account_id":3333480,"reputation":397,"user_id":2801777,"accept_rate":93,"display_name":"ronscript"},"score":0,"creation_date":1468510353,"post_id":38368771,"comment_id":64166822,"body_markdown":"I will mark this as answer, I think I&#39;m gonna use builder pattern. Thanks! it helps me a lot!","body":"I will mark this as answer, I think I&#39;m gonna use builder pattern. Thanks! it helps me a lot!"}],"tags":[],"owner":{"account_id":3273973,"reputation":5801,"user_id":2756574,"accept_rate":89,"display_name":"Sebastian"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1468483658,"creation_date":1468483658,"answer_id":38368771,"question_id":38324467,"body_markdown":"I&#39;d prefer the second method via an `EntityFactory`.\r\n\r\nExplanation:\r\n\r\n* Whereas the EntityFactory is a clean representation of the common factory pattern, you Gun looks like a [builder pattern][1] but with just one method for creating an `Entity`. So it makes no sense to use a new instance for every `Entity` creation as you store no building state in the instance.\r\n\r\n* Your `Gun` class is just a wrapper for an `Entity`. But if you get an `Entity`from `engine.getEntitiesFor(Family...` you cannot get it&#39;s `Gun` wrapper. So you cannot really use it for anything in your engine&#39;s systems.\r\n\r\n* If your `EntityFactory` gets too complex and long, I&#39;d recommend to split it into a `GunFactory`, `BananaFactory` and so on.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Builder_pattern","title":"What is the proper way of creating an entity in libgdx ashley ecs framework pooled engine?","body":"<p>I'd prefer the second method via an <code>EntityFactory</code>.</p>\n\n<p>Explanation:</p>\n\n<ul>\n<li><p>Whereas the EntityFactory is a clean representation of the common factory pattern, you Gun looks like a <a href=\"https://en.wikipedia.org/wiki/Builder_pattern\" rel=\"nofollow\">builder pattern</a> but with just one method for creating an <code>Entity</code>. So it makes no sense to use a new instance for every <code>Entity</code> creation as you store no building state in the instance.</p></li>\n<li><p>Your <code>Gun</code> class is just a wrapper for an <code>Entity</code>. But if you get an <code>Entity</code>from <code>engine.getEntitiesFor(Family...</code> you cannot get it's <code>Gun</code> wrapper. So you cannot really use it for anything in your engine's systems.</p></li>\n<li><p>If your <code>EntityFactory</code> gets too complex and long, I'd recommend to split it into a <code>GunFactory</code>, <code>BananaFactory</code> and so on.</p></li>\n</ul>\n"}],"owner":{"account_id":3333480,"reputation":397,"user_id":2801777,"accept_rate":93,"display_name":"ronscript"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1711,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":38368771,"answer_count":1,"score":3,"last_activity_date":1682793490,"creation_date":1468314514,"question_id":38324467,"body_markdown":"    \r\n    // GameWorld\r\n    PooledEngine engine = new PooledEngine();\r\n    \r\n    // Gun class\r\n    class Gun {\r\n       publc Gun(Entity entity) {\r\n            createComponents();\r\n            addComponents();\r\n       }\r\n\r\n       public Entity getEntity();\r\n    }\r\n    \r\n    // Option 1\r\n    Gun gun = new Gun(engine.createEntity());\r\n    engine.addEntity(gun.getEntity());\r\n\r\n    // Option 2 or a simple method inside EntityFactory class\r\n    public Entity createGun() {\r\n        Entity gun = engine.createEntity();\r\n        // components creation here\r\n        ..\r\n        engine.addEntity(gun);\r\n        return gun;\r\n    }\r\n\r\n**Question** which one is the better way of creating an `Entity` made from the `PooledEngine`?\r\n\r\n - option 1, I create a new `class` called `Gun` then handle the creation of components there.\r\n - option 2, Inside the `EntityFactory` `class` add new method called `createGun()` \r\n\r\n \r\n\r\n        class EntityFactory {\r\n         // constructor \r\n         public void build() {\r\n            // Option 1\r\n            Gun gun = new Gun(engine.createEntity());\r\n            // where I can call gun.fire(), gun.reload(), gun.dispose, and so on..\r\n            engine.addEntity(gun.getEntity());\r\n             \r\n    \r\n            // Option 2\r\n            Entity gun = createGun();\r\n            engine.addEntity(gun);\r\n         }\r\n\r\n         public Entity createGun() {\r\n            Entity gun = engine.createEntity();\r\n            // components creation here\r\n            ...\r\n            engine.addEntity(gun);\r\n            return gun;\r\n         }\r\n        }\r\n\r\n        EntityFactory factory = new EntityFactory(world, engine);\r\n        factory.build();","title":"What is the proper way of creating an entity in libgdx ashley ecs framework pooled engine?","body":"<pre><code>// GameWorld\nPooledEngine engine = new PooledEngine();\n\n// Gun class\nclass Gun {\n   publc Gun(Entity entity) {\n        createComponents();\n        addComponents();\n   }\n\n   public Entity getEntity();\n}\n\n// Option 1\nGun gun = new Gun(engine.createEntity());\nengine.addEntity(gun.getEntity());\n\n// Option 2 or a simple method inside EntityFactory class\npublic Entity createGun() {\n    Entity gun = engine.createEntity();\n    // components creation here\n    ..\n    engine.addEntity(gun);\n    return gun;\n}\n</code></pre>\n\n<p><strong>Question</strong> which one is the better way of creating an <code>Entity</code> made from the <code>PooledEngine</code>?</p>\n\n<ul>\n<li>option 1, I create a new <code>class</code> called <code>Gun</code> then handle the creation of components there.</li>\n<li><p>option 2, Inside the <code>EntityFactory</code> <code>class</code> add new method called <code>createGun()</code> </p>\n\n<pre><code>class EntityFactory {\n // constructor \n public void build() {\n    // Option 1\n    Gun gun = new Gun(engine.createEntity());\n    // where I can call gun.fire(), gun.reload(), gun.dispose, and so on..\n    engine.addEntity(gun.getEntity());\n\n\n    // Option 2\n    Entity gun = createGun();\n    engine.addEntity(gun);\n }\n\n public Entity createGun() {\n    Entity gun = engine.createEntity();\n    // components creation here\n    ...\n    engine.addEntity(gun);\n    return gun;\n }\n}\n\nEntityFactory factory = new EntityFactory(world, engine);\nfactory.build();\n</code></pre></li>\n</ul>\n"},{"tags":["java","libgdx","2d","entity-component-system"],"answers":[{"tags":[],"owner":{"account_id":3248328,"reputation":1553,"user_id":2739271,"accept_rate":69,"display_name":"TomGrill Games"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1468134340,"creation_date":1468134340,"answer_id":38289508,"question_id":38278201,"body_markdown":"I use a three layer approach: (pseudo code)\r\n\r\n**Layer 1:**\r\n\r\nSome class that handles the raw input coming from InputProcessor libgdx class like this:\r\n\r\n    public interface InputHandlerIF {\r\n    \tvoid walk(int playerId, Vector2 direction);\r\n    \tvoid jump();\r\n    \t.....\r\n    }\r\n    \r\n    \r\n    class RawInputHandler implements InputProcessor {\r\n    \r\n    \tprivate InputHandlerIF listener;\r\n    \tprivate Vector2 direction;\r\n    \tonKeyDown(int keycode) {\r\n    \t\tif(keycode == W) {\r\n    \t\t\tdirection = valueToWalkForward;\r\n    \t\t\tlistener.walk(playerId, direction);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nSo all raw input coming from libgdx framework is handled and translated to an actual game command like: walk, shoot, castSpell, etc. This layer allows you to filter input before it gets passed to the `InputHandlerIF`s: F.e. controller number in a local multi-player game. \r\n\r\n**Layer 2:**\r\n\r\nThen I have this a kind of command handler system which receives the commands:\r\n\r\n    public class InputHandlerSystem extends EntitySystem implements InputHandlerIF {\r\n    \tpublic walk(int playerId, Vector2 direction) {\r\n    \t\tpositionComponents.getForPlayer(playerId).direction = direction;\r\n    \t}\r\n    }\r\n\r\nThe systems knows all positionComponents of the player(s) and updates the values accordingly.\r\n\r\n**Layer 3:**\r\n\r\nPlayerMovementSystem which also knows the positionComponents and updates the players position (x and y) based on the time delta and `positionComponent.direction` value.\r\n\r\n    class PlayerMovementSystem extends IteratingSystem {\r\n    \tupdate(float delta) {\r\n    \t\t... update player position\r\n    \t}\r\n    }\r\n\r\n\r\nSetup would look like this:\r\n\r\n    Engine engine = new Engine();\r\n    InputHandlerSystem ihs = new InputHandlerSystem();\r\n    RawInputHandler rih = RawInputHandler();\r\n    rih.registerListener(ihs);\r\n    engine.addSystem(ihs);\r\n    enigne.addSystem(new PlayerMovementSystem());\r\n\r\n","title":"libgdx ashley - How do I control a player the proper way (ECS framework)?","body":"<p>I use a three layer approach: (pseudo code)</p>\n\n<p><strong>Layer 1:</strong></p>\n\n<p>Some class that handles the raw input coming from InputProcessor libgdx class like this:</p>\n\n<pre><code>public interface InputHandlerIF {\n    void walk(int playerId, Vector2 direction);\n    void jump();\n    .....\n}\n\n\nclass RawInputHandler implements InputProcessor {\n\n    private InputHandlerIF listener;\n    private Vector2 direction;\n    onKeyDown(int keycode) {\n        if(keycode == W) {\n            direction = valueToWalkForward;\n            listener.walk(playerId, direction);\n        }\n    }\n}\n</code></pre>\n\n<p>So all raw input coming from libgdx framework is handled and translated to an actual game command like: walk, shoot, castSpell, etc. This layer allows you to filter input before it gets passed to the <code>InputHandlerIF</code>s: F.e. controller number in a local multi-player game. </p>\n\n<p><strong>Layer 2:</strong></p>\n\n<p>Then I have this a kind of command handler system which receives the commands:</p>\n\n<pre><code>public class InputHandlerSystem extends EntitySystem implements InputHandlerIF {\n    public walk(int playerId, Vector2 direction) {\n        positionComponents.getForPlayer(playerId).direction = direction;\n    }\n}\n</code></pre>\n\n<p>The systems knows all positionComponents of the player(s) and updates the values accordingly.</p>\n\n<p><strong>Layer 3:</strong></p>\n\n<p>PlayerMovementSystem which also knows the positionComponents and updates the players position (x and y) based on the time delta and <code>positionComponent.direction</code> value.</p>\n\n<pre><code>class PlayerMovementSystem extends IteratingSystem {\n    update(float delta) {\n        ... update player position\n    }\n}\n</code></pre>\n\n<p>Setup would look like this:</p>\n\n<pre><code>Engine engine = new Engine();\nInputHandlerSystem ihs = new InputHandlerSystem();\nRawInputHandler rih = RawInputHandler();\nrih.registerListener(ihs);\nengine.addSystem(ihs);\nenigne.addSystem(new PlayerMovementSystem());\n</code></pre>\n"}],"owner":{"account_id":3333480,"reputation":397,"user_id":2801777,"accept_rate":93,"display_name":"ronscript"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3049,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":38289508,"answer_count":1,"score":1,"last_activity_date":1682793278,"creation_date":1468037102,"question_id":38278201,"body_markdown":"**What I have tried** *In the option 1, I created PlayerControlled classes to control a player (It&#39;s working properly). But I don&#39;t want the way I control a player like this, I have doubt it is not the proper way.*\r\n\r\n    // Option 1\r\n    class PlayerComponent implements Component {\r\n         // player data here\r\n    }\r\n\r\n    class PlayerSystem extends IteratingSystem {\r\n         // player logic here\r\n    }\r\n\r\n    class PlayerControlledComponent implements Component{\r\n         // Player entity\r\n    }\r\n    class PlayerControlledSystem extends IteratingSystem {\r\n         // Keyboard Input\r\n         // Player entity\r\n    }\r\n\r\n    // Option 2\r\n    engine.getSystem(PlayerSystem.class).attack()\r\n\r\n    // Option 3\r\n    class PlayerController {\r\n    \r\n         PlayerConroller(Player player) {\r\n\r\n         }\r\n    \r\n    } \r\n\r\n&gt; Both option 1 &amp; 2 are tested and working, option 3 is just an idea.\r\n\r\n**Question** \r\n\r\n - Which option is/are the proper way of controlling the player?\r\n - Is there any other option to control the player using the ECS framework?","title":"libgdx ashley - How do I control a player the proper way (ECS framework)?","body":"<p><strong>What I have tried</strong> <em>In the option 1, I created PlayerControlled classes to control a player (It's working properly). But I don't want the way I control a player like this, I have doubt it is not the proper way.</em></p>\n\n<pre><code>// Option 1\nclass PlayerComponent implements Component {\n     // player data here\n}\n\nclass PlayerSystem extends IteratingSystem {\n     // player logic here\n}\n\nclass PlayerControlledComponent implements Component{\n     // Player entity\n}\nclass PlayerControlledSystem extends IteratingSystem {\n     // Keyboard Input\n     // Player entity\n}\n\n// Option 2\nengine.getSystem(PlayerSystem.class).attack()\n\n// Option 3\nclass PlayerController {\n\n     PlayerConroller(Player player) {\n\n     }\n\n} \n</code></pre>\n\n<blockquote>\n  <p>Both option 1 &amp; 2 are tested and working, option 3 is just an idea.</p>\n</blockquote>\n\n<p><strong>Question</strong> </p>\n\n<ul>\n<li>Which option is/are the proper way of controlling the player?</li>\n<li>Is there any other option to control the player using the ECS framework?</li>\n</ul>\n"},{"tags":["java","spring","gradle","intellij-idea"],"comments":[{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1581707785,"post_id":60231414,"comment_id":106539614,"body_markdown":"Does it build from the command line? `./gradlew clean build`","body":"Does it build from the command line? <code>.&#47;gradlew clean build</code>"}],"answers":[{"comments":[{"owner":{"account_id":8936007,"reputation":1340,"user_id":6735277,"display_name":"Roberto"},"score":0,"creation_date":1671174769,"post_id":63248018,"comment_id":132046375,"body_markdown":"how to change version gradle in spring-init or in project?","body":"how to change version gradle in spring-init or in project?"},{"owner":{"account_id":357538,"reputation":1531,"user_id":697770,"accept_rate":67,"display_name":"BgRva"},"score":0,"creation_date":1671206761,"post_id":63248018,"comment_id":132056309,"body_markdown":"you can have multiple versions of gradle installed side by side.  For me, I just made sure that the &#39;gradle&#39; command was mapped to the latest version in the environment setttings.","body":"you can have multiple versions of gradle installed side by side.  For me, I just made sure that the &#39;gradle&#39; command was mapped to the latest version in the environment setttings."}],"tags":[],"owner":{"account_id":357538,"reputation":1531,"user_id":697770,"accept_rate":67,"display_name":"BgRva"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596547882,"creation_date":1596547882,"answer_id":63248018,"question_id":60231414,"body_markdown":"This drove me crazy.  I was getting the same errors (this is from a clean project generated from Spring Initializr).  Turned out it was an issue with the Gradle version. When I ran a build from the command line, I got the following error message\r\n\r\n [![enter image description here][1]][1]\r\n\r\nOnce I updated gradle it build with no issues.\r\n\r\n  [1]: https://i.stack.imgur.com/5kWNl.png","title":"Error on build Spring gradle project generated from Spring Initializr","body":"<p>This drove me crazy.  I was getting the same errors (this is from a clean project generated from Spring Initializr).  Turned out it was an issue with the Gradle version. When I ran a build from the command line, I got the following error message</p>\n<p><a href=\"https://i.stack.imgur.com/5kWNl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5kWNl.png\" alt=\"enter image description here\" /></a></p>\n<p>Once I updated gradle it build with no issues.</p>\n"},{"tags":[],"owner":{"account_id":8414982,"reputation":21,"user_id":6316522,"display_name":"learner5060"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682793216,"creation_date":1682523028,"answer_id":76112585,"question_id":60231414,"body_markdown":"In my case the issue was due to incompatible versions of Spring Boot and JDK.\r\nInitially while creating the project from Spring Initializer I tried using Spring Boot 3.0.6 version for JDK 11 which was incompatible.\r\nAfter changing the Spring Boot version to 2.7.11 for JDK 11 the error got resolved.","title":"Error on build Spring gradle project generated from Spring Initializr","body":"<p>In my case the issue was due to incompatible versions of Spring Boot and JDK.\nInitially while creating the project from Spring Initializer I tried using Spring Boot 3.0.6 version for JDK 11 which was incompatible.\nAfter changing the Spring Boot version to 2.7.11 for JDK 11 the error got resolved.</p>\n"}],"owner":{"account_id":6661932,"reputation":3905,"user_id":5140756,"accept_rate":16,"display_name":"Augusto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":990,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682793216,"creation_date":1581703376,"question_id":60231414,"body_markdown":"I&#39;ve created a demo Gradle project called `test-jdbc-demo` from [Spring][1] using some dependencies and change nothing, just unziped and imported on Intellij using Open -&gt; build.gradle file and tried too using `Import` from default Intellij window. When imported the project is not build and a error about gradle dependencies occurs. I&#39;m using Intellij 2019.3, JDK 1.8 on Ubuntu.\r\n\r\n\r\n  [1]: https://start.spring.io/\r\n\r\n\r\n**Error**\r\n\r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * Where:\r\n    Build file &#39;/home/augusto.cadini/projects/Spring Applications/test-jdbc-demo/build.gradle&#39; line: 2\r\n    \r\n    * What went wrong:\r\n    Plugin [id: &#39;org.springframework.boot&#39;, version: &#39;2.2.4.RELEASE&#39;] was not found in any of the following sources:\r\n    \r\n    - Gradle Core Plugins (plugin is not in &#39;org.gradle&#39; namespace)\r\n    - Plugin Repositories (could not resolve plugin artifact &#39;org.springframework.boot:org.springframework.boot.gradle.plugin:2.2.4.RELEASE&#39;)\r\n      Searched in the following repositories:\r\n        Gradle Central Plugin Repository\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    CONFIGURE FAILED in 208ms\r\n\r\n**build.gradle**\r\n\r\n    plugins {\r\n    \tid &#39;org.springframework.boot&#39; version &#39;2.2.4.RELEASE&#39;\r\n    \tid &#39;io.spring.dependency-management&#39; version &#39;1.0.9.RELEASE&#39;\r\n    \tid &#39;java&#39;\r\n    }\r\n    \r\n    group = &#39;com.jdbc&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = &#39;1.8&#39;\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-jdbc&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    \ttestImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) {\r\n    \t\texclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;\r\n    \t}\r\n    }\r\n    \r\n    test {\r\n    \tuseJUnitPlatform()\r\n    }\r\n\r\n","title":"Error on build Spring gradle project generated from Spring Initializr","body":"<p>I've created a demo Gradle project called <code>test-jdbc-demo</code> from <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">Spring</a> using some dependencies and change nothing, just unziped and imported on Intellij using Open -&gt; build.gradle file and tried too using <code>Import</code> from default Intellij window. When imported the project is not build and a error about gradle dependencies occurs. I'm using Intellij 2019.3, JDK 1.8 on Ubuntu.</p>\n<p><strong>Error</strong></p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* Where:\nBuild file '/home/augusto.cadini/projects/Spring Applications/test-jdbc-demo/build.gradle' line: 2\n\n* What went wrong:\nPlugin [id: 'org.springframework.boot', version: '2.2.4.RELEASE'] was not found in any of the following sources:\n\n- Gradle Core Plugins (plugin is not in 'org.gradle' namespace)\n- Plugin Repositories (could not resolve plugin artifact 'org.springframework.boot:org.springframework.boot.gradle.plugin:2.2.4.RELEASE')\n  Searched in the following repositories:\n    Gradle Central Plugin Repository\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nCONFIGURE FAILED in 208ms\n</code></pre>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.2.4.RELEASE'\n    id 'io.spring.dependency-management' version '1.0.9.RELEASE'\n    id 'java'\n}\n\ngroup = 'com.jdbc'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '1.8'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-jdbc'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    testImplementation('org.springframework.boot:spring-boot-starter-test') {\n        exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n    }\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n"},{"tags":["java","maven","selenium-webdriver","jenkins"],"comments":[{"owner":{"account_id":28445627,"reputation":11,"user_id":21764373,"display_name":"N_rock"},"score":0,"creation_date":1685598099,"post_id":76129955,"comment_id":134682974,"body_markdown":"Running Jenkins as a standalone application resolved my issue.","body":"Running Jenkins as a standalone application resolved my issue."}],"owner":{"account_id":28445627,"reputation":11,"user_id":21764373,"display_name":"N_rock"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682792914,"creation_date":1682687655,"question_id":76129955,"body_markdown":"    org.openqa.selenium.WebDriverException: \r\n    unknown error: Microsoft Edge failed to start: crashed.\r\n      (unknown error: DevToolsActivePort file doesn&#39;t exist)\r\n      (The process started from msedge location C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe is no longer running, so msedgedriver is assuming that msedge has crashed.)\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;HJNZL000593&#39;, ip: &#39;192.168.1.15&#39;, os.name: &#39;Windows 11&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;18.0.2.1&#39;\r\n    Driver info: driver.version: EdgeDriver\r\n    remote stacktrace: Backtrace:\r\n    \tGetHandleVerifier [0x00007FF665DDDB12+60274]\r\n    \tMicrosoft::Applications::Events::EventProperty::~EventProperty [0x00007FF665D6E772+818882]\r\n\r\n\r\nAbove error showed up when job executed from Jenkins. \r\n\r\nI tried using chrome browser and its working. I am expecting same works for edge browser also.","title":"Can&#39;t launch edge browser from Jenkins build job but same is working on from eclipse","body":"<pre><code>org.openqa.selenium.WebDriverException: \nunknown error: Microsoft Edge failed to start: crashed.\n  (unknown error: DevToolsActivePort file doesn't exist)\n  (The process started from msedge location C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe is no longer running, so msedgedriver is assuming that msedge has crashed.)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'HJNZL000593', ip: '192.168.1.15', os.name: 'Windows 11', os.arch: 'amd64', os.version: '10.0', java.version: '18.0.2.1'\nDriver info: driver.version: EdgeDriver\nremote stacktrace: Backtrace:\n    GetHandleVerifier [0x00007FF665DDDB12+60274]\n    Microsoft::Applications::Events::EventProperty::~EventProperty [0x00007FF665D6E772+818882]\n</code></pre>\n<p>Above error showed up when job executed from Jenkins.</p>\n<p>I tried using chrome browser and its working. I am expecting same works for edge browser also.</p>\n"},{"tags":["java","mongodb"],"owner":{"account_id":556011,"reputation":2421,"user_id":884444,"accept_rate":51,"display_name":"ppb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682792529,"creation_date":1682792529,"question_id":76137757,"body_markdown":"I am new to `MongDB/Java`. I am trying to write a Junit for `AggregateIterable`. Where I want to add some mock data to iterable but not sure how to add the expected mock data. Could you please give me some example or direction how can mock the `AggregateIterable` with expected mock data.\r\n\r\nI am trying to write `Junit` or `mock` for below snippet of code - \r\n\r\n    List&lt;Employee&gt; results = getCollection().aggregate(pipeline).into(new ArrayList&lt;&gt;());\r\n \r\nI tried below but result size is always zero.\r\n\r\n    AggregateIterable&lt;Employee&gt; iterable = Mockito.mock(AggregateIterable.class);\r\n    MongoCursor iterator = Mockito.mock(MongoCursor.class);\r\n    Employee employee1 = Mockito.mock(Employee.class);\r\n    Employee employee2 = Mockito.mock(Employee.class);\r\n\r\n    when(iterable.iterator()).thenReturn(iterator);\r\n    when(iterator.hasNext()).thenReturn(true,true,false);\r\n    when(iterator.next()).thenReturn(employee1,employee1);\r\n    Mockito.doReturn(iterable).when(mongoCollection).aggregate(Mockito.any(ArrayList.class));\r\n","title":"Mock mongodb AggregateIterable with expected mock data","body":"<p>I am new to <code>MongDB/Java</code>. I am trying to write a Junit for <code>AggregateIterable</code>. Where I want to add some mock data to iterable but not sure how to add the expected mock data. Could you please give me some example or direction how can mock the <code>AggregateIterable</code> with expected mock data.</p>\n<p>I am trying to write <code>Junit</code> or <code>mock</code> for below snippet of code -</p>\n<pre><code>List&lt;Employee&gt; results = getCollection().aggregate(pipeline).into(new ArrayList&lt;&gt;());\n</code></pre>\n<p>I tried below but result size is always zero.</p>\n<pre><code>AggregateIterable&lt;Employee&gt; iterable = Mockito.mock(AggregateIterable.class);\nMongoCursor iterator = Mockito.mock(MongoCursor.class);\nEmployee employee1 = Mockito.mock(Employee.class);\nEmployee employee2 = Mockito.mock(Employee.class);\n\nwhen(iterable.iterator()).thenReturn(iterator);\nwhen(iterator.hasNext()).thenReturn(true,true,false);\nwhen(iterator.next()).thenReturn(employee1,employee1);\nMockito.doReturn(iterable).when(mongoCollection).aggregate(Mockito.any(ArrayList.class));\n</code></pre>\n"},{"tags":["java","minecraft","minecraft-forge"],"comments":[{"owner":{"account_id":14963595,"reputation":728,"user_id":10802597,"display_name":"MrFisherman"},"score":0,"creation_date":1591721986,"post_id":62287335,"comment_id":110161461,"body_markdown":"Shouldn&#39;t you return itemIsInInventory value? You just assign it and do nothing more with it.","body":"Shouldn&#39;t you return itemIsInInventory value? You just assign it and do nothing more with it."},{"owner":{"account_id":17230989,"reputation":71,"user_id":12475579,"display_name":"Yuval"},"score":0,"creation_date":1591722092,"post_id":62287335,"comment_id":110161505,"body_markdown":"Yeah, but I need to be able to assign it, the current setup doesn&#39;t work... After the dot in &quot;solChanged != null &amp;&amp; slotChanged.&quot; I need to add something to check for an item, cause I&#39;m not doing that currently","body":"Yeah, but I need to be able to assign it, the current setup doesn&#39;t work... After the dot in &quot;solChanged != null &amp;&amp; slotChanged.&quot; I need to add something to check for an item, cause I&#39;m not doing that currently"}],"answers":[{"tags":[],"owner":{"account_id":17230989,"reputation":71,"user_id":12475579,"display_name":"Yuval"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1601072729,"creation_date":1591737177,"answer_id":62291935,"question_id":62287335,"body_markdown":"I found a much simpler answer to this, but it might not work for certain things. I found this a while ago, but it didn&#39;t seem to work, so I looked for another solution, but now that I came back to it I realized I just did it wrong. this is the code:\r\n```java\r\n@Override\r\n\tpublic void onUpdate(ItemStack itemstack, World world, Entity entity, int i, boolean flag)\r\n\t{\r\n\t\t//Runs the method every tick the item is in the player&#39;s inventory\r\n\t\t((EntityLivingBase) entity).addPotionEffect(new PotionEffect(MobEffects.INVISIBILITY, 10, 0, false, false));\r\n\t\t//Gives the entity with the item the invisibility effect for half a second every tick\r\n\t}\r\n```\r\nPut simply, instead of detecting whether or not a player has the item, it only runs the code when the player has the item. What I meant by &quot;I did it wrong&quot; is that this code should be put in the item&#39;s class, so that it only triggers when the item is in your inventory. I&#39;m not sure, but I don&#39;t think this would work if giving the item to, say, a zombie.","title":"Trying to detect if the player has a specific item in their inventory in my Minecraft mod","body":"<p>I found a much simpler answer to this, but it might not work for certain things. I found this a while ago, but it didn't seem to work, so I looked for another solution, but now that I came back to it I realized I just did it wrong. this is the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public void onUpdate(ItemStack itemstack, World world, Entity entity, int i, boolean flag)\n    {\n        //Runs the method every tick the item is in the player's inventory\n        ((EntityLivingBase) entity).addPotionEffect(new PotionEffect(MobEffects.INVISIBILITY, 10, 0, false, false));\n        //Gives the entity with the item the invisibility effect for half a second every tick\n    }\n</code></pre>\n<p>Put simply, instead of detecting whether or not a player has the item, it only runs the code when the player has the item. What I meant by &quot;I did it wrong&quot; is that this code should be put in the item's class, so that it only triggers when the item is in your inventory. I'm not sure, but I don't think this would work if giving the item to, say, a zombie.</p>\n"}],"owner":{"account_id":17230989,"reputation":71,"user_id":12475579,"display_name":"Yuval"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2976,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62291935,"answer_count":1,"score":1,"last_activity_date":1682792495,"creation_date":1591719979,"question_id":62287335,"body_markdown":"I&#39;m making my Minecraft mod and I&#39;m trying to detect if a player has a specific item, which would give you an effect if you have it. I&#39;m trying to do this by using PlayerTickEvent, but I don&#39;t know how to use it, since I haven&#39;t used it before. I used a function that checked which slot was changed for an enchant before, so I tried that, but it didn&#39;t work. any ideas? \r\n\r\nThis is the code I originally tried:\r\n\r\n```java\r\n@SubscribeEvent\r\npublic void testItemFunction(LivingEquipmentChangeEvent event) {\r\n    boolean itemIsInInventory;\r\n    Object player = event.getEntityLiving();\r\n    if (event.getEntityLiving() instanceof EntityLivingBase) {\r\n        EntityEquipmentSlot slotChanged = event.getSlot();\r\n        if (slotChanged.getSlotIndex() &gt; -1 &amp;&amp; slotChanged.getSlotIndex() &lt; 36) {\r\n            if(slotChanged != null &amp;&amp; slotChanged.() == ModItems.TEST_ITEM) {\r\n                itemIsInInventory = true;\r\n            }\r\n        } else {\r\n            itemIsInInventory = false;\r\n\t\t}\r\n    }\r\n}\r\n```\r\ninstead of setting and removing an effect as the result I&#39;m changing the variable itemIsInInventory because I&#39;m making this method in a class in my util package so I can call it whenever I want instead of copy-pasting the method","title":"Trying to detect if the player has a specific item in their inventory in my Minecraft mod","body":"<p>I'm making my Minecraft mod and I'm trying to detect if a player has a specific item, which would give you an effect if you have it. I'm trying to do this by using PlayerTickEvent, but I don't know how to use it, since I haven't used it before. I used a function that checked which slot was changed for an enchant before, so I tried that, but it didn't work. any ideas?</p>\n<p>This is the code I originally tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SubscribeEvent\npublic void testItemFunction(LivingEquipmentChangeEvent event) {\n    boolean itemIsInInventory;\n    Object player = event.getEntityLiving();\n    if (event.getEntityLiving() instanceof EntityLivingBase) {\n        EntityEquipmentSlot slotChanged = event.getSlot();\n        if (slotChanged.getSlotIndex() &gt; -1 &amp;&amp; slotChanged.getSlotIndex() &lt; 36) {\n            if(slotChanged != null &amp;&amp; slotChanged.() == ModItems.TEST_ITEM) {\n                itemIsInInventory = true;\n            }\n        } else {\n            itemIsInInventory = false;\n        }\n    }\n}\n</code></pre>\n<p>instead of setting and removing an effect as the result I'm changing the variable itemIsInInventory because I'm making this method in a class in my util package so I can call it whenever I want instead of copy-pasting the method</p>\n"},{"tags":["java","multithreading","jvm","classloader"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":1,"creation_date":1682771178,"post_id":76136132,"comment_id":134269643,"body_markdown":"What do you see in the output? Can you add its output as well?","body":"What do you see in the output? Can you add its output as well?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1682771228,"post_id":76136132,"comment_id":134269647,"body_markdown":"Because you locked the main thread.","body":"Because you locked the main thread."},{"owner":{"account_id":10342736,"reputation":1032,"user_id":7628578,"display_name":"Q10Viking"},"score":0,"creation_date":1682772604,"post_id":76136132,"comment_id":134269811,"body_markdown":"@Roman C.yes. I locked the main thread.But I let the new thread to wake up it.But the main thread is  not wake up .I find no dead lock in the code.","body":"@Roman C.yes. I locked the main thread.But I let the new thread to wake up it.But the main thread is  not wake up .I find no dead lock in the code."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1682773144,"post_id":76136132,"comment_id":134269874,"body_markdown":"@Q10Viking It&#39;s not true, the new thread is not able to unlock it.","body":"@Q10Viking It&#39;s not true, the new thread is not able to unlock it."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":1,"creation_date":1682773555,"post_id":76136132,"comment_id":134269927,"body_markdown":"@RomanC Yes but why? That&#39;s what is being asked.","body":"@RomanC Yes but why? That&#39;s what is being asked."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":4,"creation_date":1682773692,"post_id":76136132,"comment_id":134269942,"body_markdown":"For those who are voting-to-close or attempting to answer: You&#39;re missing it. The CRUCIAL question here is: __Why in the blazes is that thread not starting??__ - try it, paste this code, compile it, run it. Add a print to the run() block of that thread right up top. It NEVER STARTS. A proper answer to this question requires intricate knowledge of the JVM class init rules and the vagaries of what thread constructor locks on, to answer why in this peculiar case the thread doesn&#39;t actually start. 2 answers so far that missed it.","body":"For those who are voting-to-close or attempting to answer: You&#39;re missing it. The CRUCIAL question here is: <b>Why in the blazes is that thread not starting??</b> - try it, paste this code, compile it, run it. Add a print to the run() block of that thread right up top. It NEVER STARTS. A proper answer to this question requires intricate knowledge of the JVM class init rules and the vagaries of what thread constructor locks on, to answer why in this peculiar case the thread doesn&#39;t actually start. 2 answers so far that missed it."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":3,"creation_date":1682773727,"post_id":76136132,"comment_id":134269947,"body_markdown":"For the vote-to-closers closing for &#39;insufficient detail&#39;: Replace the log.info with sysout and this is a self-contained example, surely that is sufficient detail!","body":"For the vote-to-closers closing for &#39;insufficient detail&#39;: Replace the log.info with sysout and this is a self-contained example, surely that is sufficient detail!"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1682773772,"post_id":76136132,"comment_id":134269959,"body_markdown":"@m0skit0 Because it&#39;s very poor written. The same question should be asked million times and it cannot be answered in a few words.","body":"@m0skit0 Because it&#39;s very poor written. The same question should be asked million times and it cannot be answered in a few words."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1682773962,"post_id":76136132,"comment_id":134269980,"body_markdown":"The key point here is that starting threads in the middle of class initialization (because you&#39;re in the context of that `static {}` block) does not work - it delays the starting of it until initialization is done, which it&#39;ll never be, because during initialization you invoke `wait()` on a lock. I&#39;ve tried to find out why and I can&#39;t find it (hence, this is a comment, not an answer).","body":"The key point here is that starting threads in the middle of class initialization (because you&#39;re in the context of that <code>static {}</code> block) does not work - it delays the starting of it until initialization is done, which it&#39;ll never be, because during initialization you invoke <code>wait()</code> on a lock. I&#39;ve tried to find out why and I can&#39;t find it (hence, this is a comment, not an answer)."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":2,"creation_date":1682776245,"post_id":76136132,"comment_id":134270229,"body_markdown":"Its not starting because the lambda is equivalent to a static method, and that can&#39;t be called unless the class has completed initialisation. The thread code is awaiting init to end. Its similar to / duplicates the issues seen [here](https://stackoverflow.com/questions/75712988/why-does-joining-a-no-op-virtual-thread-in-a-static-initialiser-block-indefinite) and [here](https://stackoverflow.com/questions/34820066/why-does-parallel-stream-with-lambda-in-static-initializer-cause-a-deadlock).","body":"Its not starting because the lambda is equivalent to a static method, and that can&#39;t be called unless the class has completed initialisation. The thread code is awaiting init to end. Its similar to / duplicates the issues seen <a href=\"https://stackoverflow.com/questions/75712988/why-does-joining-a-no-op-virtual-thread-in-a-static-initialiser-block-indefinite\">here</a> and <a href=\"https://stackoverflow.com/questions/34820066/why-does-parallel-stream-with-lambda-in-static-initializer-cause-a-deadlock\">here</a>."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1682777936,"post_id":76136132,"comment_id":134270421,"body_markdown":"The lock is not to do with `synchronized`, you can reproduce with starting a Thread with any `Runnable` that references a field of the class. For example replace init() by `new Thread(() -&gt; System.out.println(&quot;Hello World &quot;/* +lock */),&quot;demo-thread&quot;).start()`. The code will never run if you uncomment use of `lock`.","body":"The lock is not to do with <code>synchronized</code>, you can reproduce with starting a Thread with any <code>Runnable</code> that references a field of the class. For example replace init() by <code>new Thread(() -&gt; System.out.println(&quot;Hello World &quot;&#47;* +lock *&#47;),&quot;demo-thread&quot;).start()</code>. The code will never run if you uncomment use of <code>lock</code>."},{"owner":{"account_id":10342736,"reputation":1032,"user_id":7628578,"display_name":"Q10Viking"},"score":1,"creation_date":1682778059,"post_id":76136132,"comment_id":134270441,"body_markdown":"@xerx593 if code `static{ init();}` change to `static{ new Thread(()-&gt;init()) }` will work。So that&#39;s not a dead lock problem.","body":"@xerx593 if code <code>static{ init();}</code> change to <code>static{ new Thread(()-&gt;init()) }</code> will work。So that&#39;s not a dead lock problem."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682783317,"post_id":76136132,"comment_id":134271119,"body_markdown":"the one (main thread approach) was a classical &quot;dead lock&quot;: the main thread &quot;owns&quot; the lock and waits it (blockingly) forever., by introducing another thread (*asynchronizing* the `lock.wait()` indeed) you give jvm a chance for &quot;Reentrant Synchronization&quot; (https://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)","body":"the one (main thread approach) was a classical &quot;dead lock&quot;: the main thread &quot;owns&quot; the lock and waits it (blockingly) forever., by introducing another thread (<i>asynchronizing</i> the <code>lock.wait()</code> indeed) you give jvm a chance for &quot;Reentrant Synchronization&quot; (<a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>)"},{"owner":{"account_id":10342736,"reputation":1032,"user_id":7628578,"display_name":"Q10Viking"},"score":0,"creation_date":1682783502,"post_id":76136132,"comment_id":134271140,"body_markdown":"@xerx593 Cool!!! Can you please reopen it to write this answer?Thank you very much&#128515;","body":"@xerx593 Cool!!! Can you please reopen it to write this answer?Thank you very much😃"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682785209,"post_id":76136132,"comment_id":134271320,"body_markdown":"Thank you for the flowers :) here some [jls-link](https://docs.oracle.com/javase/specs/jls/se20/html/jls-14.html#jls-14.19) , but i fear this, the tiny chapter ( + *rest* ) of [tutorial](https://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html) and maybe [ReentrantLock javadoc](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/locks/ReentrantLock.html) are the best documentation about...","body":"Thank you for the flowers :) here some <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-14.html#jls-14.19\" rel=\"nofollow noreferrer\">jls-link</a> , but i fear this, the tiny chapter ( + <i>rest</i> ) of <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html\" rel=\"nofollow noreferrer\">tutorial</a> and maybe <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/locks/ReentrantLock.html\" rel=\"nofollow noreferrer\">ReentrantLock javadoc</a> are the best documentation about..."},{"owner":{"account_id":10342736,"reputation":1032,"user_id":7628578,"display_name":"Q10Viking"},"score":0,"creation_date":1682792577,"post_id":76136132,"comment_id":134272190,"body_markdown":"@rzwitserloot Thank you for the advice。I have change `log.info` to `sysout` in the code.My original intention was to use `log.info` to see the thread name","body":"@rzwitserloot Thank you for the advice。I have change <code>log.info</code> to <code>sysout</code> in the code.My original intention was to use <code>log.info</code> to see the thread name"}],"answers":[{"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1682774275,"post_id":76136427,"comment_id":134270026,"body_markdown":"@SuchandraT I don&#39;t see any mention of class loading or JVM in your first line. What I understand from &quot;Your notification is already completed due to the fact that it was written in static block&quot;, is the notify has already been called before the wait, which is not the case.","body":"@SuchandraT I don&#39;t see any mention of class loading or JVM in your first line. What I understand from &quot;Your notification is already completed due to the fact that it was written in static block&quot;, is the notify has already been called before the wait, which is not the case."}],"tags":[],"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1682792121,"creation_date":1682773981,"answer_id":76136427,"question_id":76136132,"body_markdown":"I&#39;m not an expert in JVM internals but I think the problem lies in here:\r\n\r\n    static {\r\n        init();\r\n    }\r\n\r\nI suspect this will be executed when the JVM classloader is loading the class. However this class loading will never finish since you&#39;re blocking the classloader itself, and thus execution of the rest of the program will never resume, and thus the other thread is never started.\r\n\r\nIf you remove the static block and call it directly: \r\n\r\n    public static void main(String[] args) {\r\n        // ...\r\n        MyFactory.init();\r\n        MyFactory.getSomething();\r\n        // ...\r\n    }\r\n\r\nYou will see that it works properly.\r\n\r\nMore details under [JLS 12.4.2](https://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)\r\n\r\nOn a side note, sleeping is not a good idea to synchronize threads.","title":"Why main thread not wake up?","body":"<p>I'm not an expert in JVM internals but I think the problem lies in here:</p>\n<pre><code>static {\n    init();\n}\n</code></pre>\n<p>I suspect this will be executed when the JVM classloader is loading the class. However this class loading will never finish since you're blocking the classloader itself, and thus execution of the rest of the program will never resume, and thus the other thread is never started.</p>\n<p>If you remove the static block and call it directly:</p>\n<pre><code>public static void main(String[] args) {\n    // ...\n    MyFactory.init();\n    MyFactory.getSomething();\n    // ...\n}\n</code></pre>\n<p>You will see that it works properly.</p>\n<p>More details under <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2\" rel=\"nofollow noreferrer\">JLS 12.4.2</a></p>\n<p>On a side note, sleeping is not a good idea to synchronize threads.</p>\n"}],"owner":{"account_id":10342736,"reputation":1032,"user_id":7628578,"display_name":"Q10Viking"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":76136427,"answer_count":1,"score":5,"last_activity_date":1682792281,"creation_date":1682769866,"question_id":76136132,"body_markdown":"The code is below, in the `Main` method I call a static method:\r\n```java\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        MyFactory.getSomething();\r\n        System.out.println(&quot;over&quot;); \r\n    }\r\n}\r\n```\r\nIn the static method, let the main thread wait, then by demo-thread wake up. **But the main thread does not wake up** and I don&#39;t know why.\r\n```java\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class MyFactory {\r\n    private static Object lock = new Object();\r\n\r\n    static{\r\n        init();\r\n    }\r\n\r\n    private static void init(){\r\n        new Thread(()-&gt;{\r\n            try {\r\n                // make this thread run after main thread\r\n                TimeUnit.SECONDS.sleep(3);\r\n                System.out.println(&quot;task run...&quot;);\r\n                synchronized (lock){\r\n                    lock.notifyAll();  // notify main thread\r\n                }\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        },&quot;demo-thread&quot;).start();\r\n\r\n        synchronized (lock){\r\n            try {\r\n                System.out.println(&quot;waiting...&quot;);\r\n                lock.wait();  // wait\r\n                System.out.println(&quot;wake up&quot;);\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n    public static Object getSomething(){\r\n        return null;\r\n    }\r\n}\r\n```\r\nThe output is below:\r\n```none\r\nwaiting...\r\n```\r\nMy expected should be like this:\r\n```none\r\nwaiting...\r\ntask run...\r\nwake up\r\nover\r\n```\r\n\r\n[Here is the demo code on Github][1] You can download it to run.\r\n\r\n\r\n  [1]: https://github.com/Q10Viking/static-thread\r\n\r\n----------\r\n\r\n\r\n**My try**:\r\n\r\nI see losts of people say may be a dead lock cause the problem.I don&#39;t think so.Because we don&#39;t see `task run...` info in the output. So the `demo thread` not aquire the lock at all.\r\n\r\nWhen I change the code In `MyFactory.java`.(Add a new thread to run **init** method)\r\n\r\nfrom this\r\n```java\r\nstatic{\r\n  init();\r\n}\r\n\r\n```\r\n\r\nto this.\r\n\r\n```\r\nstatic{\r\n  new Thread(()-&gt;init()).start();\r\n}\r\n```\r\n\r\nEvery thing work fine.The program not block.\r\n\r\nHere is the out put after I change the code .\r\n\r\n```sh\r\nover\r\nwaiting...\r\ntask run...\r\nwake up\r\n```\r\n\r\n\r\n&gt; Back to the original question &quot;Why main thread not wake up&quot;？\r\n&gt; I think the JVM didn&#39;t load the `MyFactory.class` completely due to main thread blocking。I don&#39;t know if my guess is right???\r\n\r\n","title":"Why main thread not wake up?","body":"<p>The code is below, in the <code>Main</code> method I call a static method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) {\n        MyFactory.getSomething();\n        System.out.println(&quot;over&quot;); \n    }\n}\n</code></pre>\n<p>In the static method, let the main thread wait, then by demo-thread wake up. <strong>But the main thread does not wake up</strong> and I don't know why.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.TimeUnit;\n\npublic class MyFactory {\n    private static Object lock = new Object();\n\n    static{\n        init();\n    }\n\n    private static void init(){\n        new Thread(()-&gt;{\n            try {\n                // make this thread run after main thread\n                TimeUnit.SECONDS.sleep(3);\n                System.out.println(&quot;task run...&quot;);\n                synchronized (lock){\n                    lock.notifyAll();  // notify main thread\n                }\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        },&quot;demo-thread&quot;).start();\n\n        synchronized (lock){\n            try {\n                System.out.println(&quot;waiting...&quot;);\n                lock.wait();  // wait\n                System.out.println(&quot;wake up&quot;);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n    public static Object getSomething(){\n        return null;\n    }\n}\n</code></pre>\n<p>The output is below:</p>\n<pre class=\"lang-none prettyprint-override\"><code>waiting...\n</code></pre>\n<p>My expected should be like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>waiting...\ntask run...\nwake up\nover\n</code></pre>\n<p><a href=\"https://github.com/Q10Viking/static-thread\" rel=\"nofollow noreferrer\">Here is the demo code on Github</a> You can download it to run.</p>\n<hr />\n<p><strong>My try</strong>:</p>\n<p>I see losts of people say may be a dead lock cause the problem.I don't think so.Because we don't see <code>task run...</code> info in the output. So the <code>demo thread</code> not aquire the lock at all.</p>\n<p>When I change the code In <code>MyFactory.java</code>.(Add a new thread to run <strong>init</strong> method)</p>\n<p>from this</p>\n<pre class=\"lang-java prettyprint-override\"><code>static{\n  init();\n}\n\n</code></pre>\n<p>to this.</p>\n<pre><code>static{\n  new Thread(()-&gt;init()).start();\n}\n</code></pre>\n<p>Every thing work fine.The program not block.</p>\n<p>Here is the out put after I change the code .</p>\n<pre class=\"lang-bash prettyprint-override\"><code>over\nwaiting...\ntask run...\nwake up\n</code></pre>\n<blockquote>\n<p>Back to the original question &quot;Why main thread not wake up&quot;？\nI think the JVM didn't load the <code>MyFactory.class</code> completely due to main thread blocking。I don't know if my guess is right???</p>\n</blockquote>\n"},{"tags":["java","command-line-arguments"],"answers":[{"comments":[{"owner":{"account_id":462861,"reputation":17872,"user_id":865403,"accept_rate":60,"display_name":"Pavel Horal"},"score":3,"creation_date":1381538387,"post_id":300648,"comment_id":28633079,"body_markdown":"In case someone wonders to this answer in 2013+, check Arian&#39;s answer as this one is not correct. https://github.com/spring-projects/spring-loaded#readme","body":"In case someone wonders to this answer in 2013+, check Arian&#39;s answer as this one is not correct. <a href=\"https://github.com/spring-projects/spring-loaded#readme\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-loaded#readme</a>"},{"owner":{"account_id":8706,"reputation":127360,"user_id":15809,"accept_rate":79,"display_name":"Mecki"},"score":6,"creation_date":1383942817,"post_id":300648,"comment_id":29552361,"body_markdown":"@Pavel There is nothing incorrect about my answer. Just because there exists another reason why disabling byte code checks is a good idea doesn&#39;t make may answer any less correct. SpringLoad is just ONE existing JavaAgent and just because this one may produce invalid byte code doesn&#39;t mean that all JavaAgents do so, as no JVM has to work correctly when getting fed invalid byte code, that&#39;s why most software in the world only produces valid byte, making Arian&#39;s argument void.","body":"@Pavel There is nothing incorrect about my answer. Just because there exists another reason why disabling byte code checks is a good idea doesn&#39;t make may answer any less correct. SpringLoad is just ONE existing JavaAgent and just because this one may produce invalid byte code doesn&#39;t mean that all JavaAgents do so, as no JVM has to work correctly when getting fed invalid byte code, that&#39;s why most software in the world only produces valid byte, making Arian&#39;s argument void."},{"owner":{"account_id":462861,"reputation":17872,"user_id":865403,"accept_rate":60,"display_name":"Pavel Horal"},"score":1,"creation_date":1383944879,"post_id":300648,"comment_id":29553345,"body_markdown":"Don&#39;t get me wrong - you have well explained how `noverify` works and why it can speed up class loading. However the question is pretty specific about its connection to `javaagent`. Are you saying that e.g. JRebel uses this JVM argument in every integration manual just for the sake of performance?","body":"Don&#39;t get me wrong - you have well explained how <code>noverify</code> works and why it can speed up class loading. However the question is pretty specific about its connection to <code>javaagent</code>. Are you saying that e.g. JRebel uses this JVM argument in every integration manual just for the sake of performance?"},{"owner":{"account_id":8706,"reputation":127360,"user_id":15809,"accept_rate":79,"display_name":"Mecki"},"score":1,"creation_date":1384188627,"post_id":300648,"comment_id":29626032,"body_markdown":"The question is not about JRebel or SpringLoad either, so what relevance does it have why JRebel or SpringLoad use it?","body":"The question is not about JRebel or SpringLoad either, so what relevance does it have why JRebel or SpringLoad use it?"}],"tags":[],"owner":{"account_id":8706,"reputation":127360,"user_id":15809,"accept_rate":79,"display_name":"Mecki"},"comment_count":4,"down_vote_count":2,"up_vote_count":57,"is_accepted":true,"score":55,"last_activity_date":1227054037,"creation_date":1227054037,"answer_id":300648,"question_id":300639,"body_markdown":"Start-up time, I&#39;d say. Verification that classes are correct takes some time when the class is loaded. Since classes might be loaded in a lazy fashion (not on app start, but when being used for the first time), this might cause unexpected and undesired runtime delays.\r\n\r\nActually the class does not need to be checked in general. The compiler will not emit any invalid bytecode or class construct. The reason for verification is that the class may be build on one system, get hosted online and is transmitted to you through the unprotected internet. On this path, a malicious attacker might modify the bytecode and create something the compiler might never create; something that can crash the JVM or possibly circumvents security restrictions. Thus the class is verified before it is used. If this is a local application, there is usually no need to check the bytecode again.","title":"Use of -noverify when launching java apps","body":"<p>Start-up time, I'd say. Verification that classes are correct takes some time when the class is loaded. Since classes might be loaded in a lazy fashion (not on app start, but when being used for the first time), this might cause unexpected and undesired runtime delays.</p>\n\n<p>Actually the class does not need to be checked in general. The compiler will not emit any invalid bytecode or class construct. The reason for verification is that the class may be build on one system, get hosted online and is transmitted to you through the unprotected internet. On this path, a malicious attacker might modify the bytecode and create something the compiler might never create; something that can crash the JVM or possibly circumvents security restrictions. Thus the class is verified before it is used. If this is a local application, there is usually no need to check the bytecode again.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1227108307,"creation_date":1227108307,"answer_id":302241,"question_id":300639,"body_markdown":"Start up time used to be a bit of an issue. However, verifiers are now faster, as are processors. Code compiled with JDK6 javac will by default include extra information to make the verifier step faster. Apache Harmony just uses a much faster verification algorithm.\r\n\r\nSome very old versions of javac produced incorrect bytecode. Indeed the Sun PlugIn still includes fix-up code to make some broken class files verify.","title":"Use of -noverify when launching java apps","body":"<p>Start up time used to be a bit of an issue. However, verifiers are now faster, as are processors. Code compiled with JDK6 javac will by default include extra information to make the verifier step faster. Apache Harmony just uses a much faster verification algorithm.</p>\n\n<p>Some very old versions of javac produced incorrect bytecode. Indeed the Sun PlugIn still includes fix-up code to make some broken class files verify.</p>\n"},{"tags":[],"owner":{"account_id":5382,"reputation":10719,"user_id":2495576,"accept_rate":100,"display_name":"Scott Bale"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1228166227,"creation_date":1228166227,"answer_id":332251,"question_id":300639,"body_markdown":"Debugging!  In fact that&#39;s what I&#39;m doing now, and how I stumbled across this question.  At Terracotta we do a lot of bytecode instrumentation, and sometimes it helps to turn off the verifier as we debug our class adapters, so we can see where exactly they fail at runtime.\r\n\r\nYou&#39;re right, we want the verifier to remain on in production.","title":"Use of -noverify when launching java apps","body":"<p>Debugging!  In fact that's what I'm doing now, and how I stumbled across this question.  At Terracotta we do a lot of bytecode instrumentation, and sometimes it helps to turn off the verifier as we debug our class adapters, so we can see where exactly they fail at runtime.</p>\n\n<p>You're right, we want the verifier to remain on in production.</p>\n"},{"tags":[],"owner":{"account_id":24436,"reputation":73314,"user_id":62130,"accept_rate":39,"display_name":"Esko Luontola"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1311941554,"creation_date":1311941554,"answer_id":6872885,"question_id":300639,"body_markdown":"Using JRebel without `-noverify` will give this warning on startup:\r\n\r\n&gt; JRebel: &#39;-noverify&#39; missing, changing/adding/removing constructors will not be enabled!\r\n\r\nSo appears that `-noverify` allows bytecode re-instrumentation to do some things which would otherwise not be possible.","title":"Use of -noverify when launching java apps","body":"<p>Using JRebel without <code>-noverify</code> will give this warning on startup:</p>\n\n<blockquote>\n  <p>JRebel: '-noverify' missing, changing/adding/removing constructors will not be enabled!</p>\n</blockquote>\n\n<p>So appears that <code>-noverify</code> allows bytecode re-instrumentation to do some things which would otherwise not be possible.</p>\n"},{"tags":[],"owner":{"account_id":136796,"reputation":14752,"user_id":340556,"accept_rate":88,"display_name":"Cephalopod"},"comment_count":0,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1354651404,"creation_date":1354651404,"answer_id":13710970,"question_id":300639,"body_markdown":"When it is used in conjunction with `-javaagent`, it is most likely **not** for performance reasons, but because the agent intentionally creates &quot;invalid&quot; bytecode.\r\n\r\nIt should be noted that invalid bytecode might still execute fine, because some of the verification rules are quite strict. For instance, `this` must not be accessed in a constructor before the super-constructor was called, because the variables are not initialized at this point. But there still might be other things you want to do (see the JRebel example). Then, you use `-noverify` to circumvent that rule.","title":"Use of -noverify when launching java apps","body":"<p>When it is used in conjunction with <code>-javaagent</code>, it is most likely <strong>not</strong> for performance reasons, but because the agent intentionally creates \"invalid\" bytecode.</p>\n\n<p>It should be noted that invalid bytecode might still execute fine, because some of the verification rules are quite strict. For instance, <code>this</code> must not be accessed in a constructor before the super-constructor was called, because the variables are not initialized at this point. But there still might be other things you want to do (see the JRebel example). Then, you use <code>-noverify</code> to circumvent that rule.</p>\n"},{"tags":[],"owner":{"account_id":222102,"reputation":908,"user_id":480478,"accept_rate":33,"display_name":"Aykut Kllic"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1389789845,"creation_date":1384882332,"answer_id":20078146,"question_id":300639,"body_markdown":"The new verifier that is introduced in JAVA 6 is very complicated to process for code manipulations.\r\n\r\nTake a look at this:\r\nhttp://chrononsystems.com/blog/java-7-design-flaw-leads-to-huge-backward-step-for-the-jvm\r\n\r\nand the related bug report:\r\nhttps://bugs.java.com/bugdatabase/view_bug?bug_id=8009595","title":"Use of -noverify when launching java apps","body":"<p>The new verifier that is introduced in JAVA 6 is very complicated to process for code manipulations.</p>\n<p>Take a look at this:\n<a href=\"http://chrononsystems.com/blog/java-7-design-flaw-leads-to-huge-backward-step-for-the-jvm\" rel=\"nofollow noreferrer\">http://chrononsystems.com/blog/java-7-design-flaw-leads-to-huge-backward-step-for-the-jvm</a></p>\n<p>and the related bug report:\n<a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=8009595\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=8009595</a></p>\n"},{"tags":[],"owner":{"account_id":27042767,"reputation":33,"user_id":20597388,"display_name":"pvpb0t"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682791447,"creation_date":1682791447,"answer_id":76137675,"question_id":300639,"body_markdown":"It disables bytecode verification at runtime. When this flag is set, the JVM skips the verification step that ensures that the bytecode is like complete and also skips checks for upcoming exceptions that will/might occur when the code is ran. An example would be this:\r\n\r\n```java\r\npublic class Example {\r\n    public static void main(String[] args) {\r\n        int x = 10;\r\n        int y = 0;\r\n        int z = x / y; \r\n        System.out.println(&quot;z = &quot; + z);\r\n    }\r\n}\r\n\r\n```\r\n\r\nWith the noverify flag, the code wont execute because the jvm expects **java.lang.ArithmeticException** but with the flag it will execute.","title":"Use of -noverify when launching java apps","body":"<p>It disables bytecode verification at runtime. When this flag is set, the JVM skips the verification step that ensures that the bytecode is like complete and also skips checks for upcoming exceptions that will/might occur when the code is ran. An example would be this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Example {\n    public static void main(String[] args) {\n        int x = 10;\n        int y = 0;\n        int z = x / y; \n        System.out.println(&quot;z = &quot; + z);\n    }\n}\n\n</code></pre>\n<p>With the noverify flag, the code wont execute because the jvm expects <strong>java.lang.ArithmeticException</strong> but with the flag it will execute.</p>\n"}],"owner":{"account_id":8074,"reputation":44073,"user_id":14316,"accept_rate":53,"display_name":"pdeva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55303,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"accepted_answer_id":300648,"answer_count":7,"score":54,"last_activity_date":1682791447,"creation_date":1227053547,"question_id":300639,"body_markdown":"I have seen many apps that take instrument classes and take `-javaagent` as a param when loading also put a `-noverify` to the command line.\r\n\r\nThe Java doc says that `-noverify` turns off class verification.\r\n\r\nHowever why would anyone want to turn off verification even if they are instrumenting classes?","title":"Use of -noverify when launching java apps","body":"<p>I have seen many apps that take instrument classes and take <code>-javaagent</code> as a param when loading also put a <code>-noverify</code> to the command line.</p>\n\n<p>The Java doc says that <code>-noverify</code> turns off class verification.</p>\n\n<p>However why would anyone want to turn off verification even if they are instrumenting classes?</p>\n"},{"tags":["java","types","private-key"],"comments":[{"owner":{"account_id":1217812,"reputation":777,"user_id":3887392,"display_name":"Andy Preston"},"score":1,"creation_date":1682772739,"post_id":76136233,"comment_id":134269830,"body_markdown":"Please tag the question with the programming language you are using... it looks like Java to me but I don&#39;t know.","body":"Please tag the question with the programming language you are using... it looks like Java to me but I don&#39;t know."},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1682779258,"post_id":76136233,"comment_id":134270582,"body_markdown":"I&#39;ve now seen this apparently malformed (according to lapo.it) ASN.1 private key format at least 3 times. Where is it coming from?","body":"I&#39;ve now seen this apparently malformed (according to lapo.it) ASN.1 private key format at least 3 times. Where is it coming from?"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1682791379,"post_id":76136233,"comment_id":134272051,"body_markdown":"@PresidentJamesK.Polk: I don&#39;t see anything malformed (either in lapo.it or local openssl asn1parse), although lapo.it doesn&#39;t seem to have -- at least it doesn&#39;t offer me in the pulldown -- PKCS8-unencrypted, which is the (only) correct definition for this PEM-type (see RFC7468 section 10).","body":"@PresidentJamesK.Polk: I don&#39;t see anything malformed (either in lapo.it or local openssl asn1parse), although lapo.it doesn&#39;t seem to have -- at least it doesn&#39;t offer me in the pulldown -- PKCS8-unencrypted, which is the (only) correct definition for this PEM-type (see RFC7468 section 10)."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1682890168,"post_id":76136233,"comment_id":134282177,"body_markdown":"@PresidentJamesK.Polk: yes that dupe is better focussed on the specific issue than the ones my search found -- even though it should have matched my criteria. I&#39;ve have had this problem before, where Stack&#39;s search doesn&#39;t find posts that exist and are good matches. I may give up using it.","body":"@PresidentJamesK.Polk: yes that dupe is better focussed on the specific issue than the ones my search found -- even though it should have matched my criteria. I&#39;ve have had this problem before, where Stack&#39;s search doesn&#39;t find posts that exist and are good matches. I may give up using it."}],"answers":[{"comments":[{"owner":{"account_id":28356450,"reputation":3,"user_id":21687128,"display_name":"nima tehrani"},"score":0,"creation_date":1682797667,"post_id":76137655,"comment_id":134272874,"body_markdown":"thanks alot. it worked. you saved the day for me.  as you sed i removed line break and begin/end private.... and after 1 month by your help it worked  :)))))))).","body":"thanks alot. it worked. you saved the day for me.  as you sed i removed line break and begin/end private.... and after 1 month by your help it worked  :))))))))."}],"tags":[],"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682791196,"creation_date":1682791196,"answer_id":76137655,"question_id":76136233,"body_markdown":"Although it&#39;s used with a public-key-cryptography _algorithm_, that&#39;s a private key (as the labels say) not a public key. It is _almost_ in the format used by Java crypto: it is PKCS8 and unencrypted, but is [PEM](https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail) rather than &#39;DER&#39; (binary). To un-PEM you need to remove the BEGIN and END lines, and decode the base64 to binary with the linebreaks either removed or ignored. You then put the result in [`PKCS8EncodedKeySpec`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/spec/PKCS8EncodedKeySpec.html) and feed it to the `.generatePrivate` method of a [`KeyFactory`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/KeyFactory.html) for the correct algorithm, which is `&quot;RSA&quot;`. \r\n\r\nI&#39;m certain I&#39;ve seen this case posted at least a dozen times, but on searching I can find only two decent duplicates; see  \r\nhttps://stackoverflow.com/a/48173910/2868801 (but note Java 9 up moves `javax.xml.bind` outside of &#39;base&#39;, so using `java.util.Base64` instead may be more convenient)  \r\nhttps://stackoverflow.com/a/66362542/2868801 (but skip the parts about JJWT, and note it assumes _all_ linebreaks have been removed -- on the BEGIN and END lines and on the base64)  \r\n","title":"i have public key as a text file and want to give it to a function that accepts publickey not string","body":"<p>Although it's used with a public-key-cryptography <em>algorithm</em>, that's a private key (as the labels say) not a public key. It is <em>almost</em> in the format used by Java crypto: it is PKCS8 and unencrypted, but is <a href=\"https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail\" rel=\"nofollow noreferrer\">PEM</a> rather than 'DER' (binary). To un-PEM you need to remove the BEGIN and END lines, and decode the base64 to binary with the linebreaks either removed or ignored. You then put the result in <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/spec/PKCS8EncodedKeySpec.html\" rel=\"nofollow noreferrer\"><code>PKCS8EncodedKeySpec</code></a> and feed it to the <code>.generatePrivate</code> method of a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/security/KeyFactory.html\" rel=\"nofollow noreferrer\"><code>KeyFactory</code></a> for the correct algorithm, which is <code>&quot;RSA&quot;</code>.</p>\n<p>I'm certain I've seen this case posted at least a dozen times, but on searching I can find only two decent duplicates; see<br />\n<a href=\"https://stackoverflow.com/a/48173910/2868801\">https://stackoverflow.com/a/48173910/2868801</a> (but note Java 9 up moves <code>javax.xml.bind</code> outside of 'base', so using <code>java.util.Base64</code> instead may be more convenient)<br />\n<a href=\"https://stackoverflow.com/a/66362542/2868801\">https://stackoverflow.com/a/66362542/2868801</a> (but skip the parts about JJWT, and note it assumes <em>all</em> linebreaks have been removed -- on the BEGIN and END lines and on the base64)</p>\n"}],"owner":{"account_id":28356450,"reputation":3,"user_id":21687128,"display_name":"nima tehrani"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1682931493,"accepted_answer_id":76137655,"answer_count":1,"score":-2,"last_activity_date":1682791196,"creation_date":1682771484,"question_id":76136233,"body_markdown":"helo. any help can be hopeful please. it&#39;s about 1 month that i am tring to solve the problem.\r\ni have below private key by size 2048 and a function to sign some data.\r\n\r\n```\r\n-----BEGIN PRIVATE KEY-----\r\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDMsFHds+5f72yW\r\nhhzhCL8svzk7IAoSFZqPnTYoGNz8nN82sKwY5dhkB2x0Hw7dlJhs2V2+Y8nlS13E\r\nfQQVT3NofdPVbZdCnwzrzz4VsT/0Yhg10FXNwXRzk4QTECQWaz5ZUqm2oXOBKG9R\r\nDvgLKiuQVIgnRPrh57o7njkCxtnrJg3fOqRTAIopODrZbpDd1WRpYGJMD1eRLzfj\r\nZfXcuDypb4hRZ4P4qm7W7OIuwjzmaDiG9uvf7SYn8oLaGNMaX9TmiaPVqBWH5BLO\r\nvtR+eRfq6LFpq/pyj8q7C8ODF3n6G8dhEXmScrkOn3QxWQUmlG6Fu5KItbJW72TD\r\niz/CflfPAgMBAAECggEACu+AmtpPafYIqcy7I5VWtrVLVsqnab/tugPULjWQg459\r\n/mtXRnKWf6xF3GOsZPouCo1dDMbtX8AJtRhYwiq0fRNRNfMyRETrE84cAFyv5gaM\r\n9JMPgnv2FMFU1Q/lCFhCbyiTbfEXkqxDsOOegjoxNEzP2V6TaMOl7M7PN5ltcGVH\r\njxG7mii3gj16czLX+R5XF8/exoEvrsA951gj8ZoetkRwBsPDgARgrlUr++CMd+pB\r\nPX2YvHkLulPRmjzYjSNG9KcK4IdIqVz3yCUDkBwi03Oj6BvTLLU93nj5VpVnrnJt\r\nAkDx4EFjz8wVZ5E2oS6UAbmsy/fUppVi1mrkLjXSQQKBgQDV6w29D581bV3nH/pT\r\n3xQEBUZdUk+PNvg+5nBC8mTz7MITAqe7qsI1oHsAkuW4FepucY4c0UEnskb6mu6m\r\nL7ohv+oc1ZKC/ERJs/xy2uHOfAjFNN2volB8A3D2EEhYJ/M1x8IlMXNhucWhUg2G\r\nSlAq//3yEXcoljBvNLarWH+j2wKBgQD09HiNfGL2vESicbTut1LPqTKwedl06I0B\r\nZvkpuL+qldeyfXXqu6+hU0NO6YTzVJToIM2LcfpbzNs1VIfA84f1pFUU+OhAahEt\r\nJFowhWRhDhXIQIYbZV8YPjiMv+pcOezZZZi6Qx9oytFBJ7sm8oC3UHzPCrIcrwym\r\nUMzJK9jYHQKBgB4zBMl//xXnzq3mUcytXYIDzJ84E4tAU2Nt3MNWvPHCptNQOKXB\r\nwZEYisTV+CA419OnrExdLjmQbXzLio1jh39kPIS9keVz/5/4DNeaFu6zi/lrMTCu\r\nVXZsdfIG8m+flDIvdTUS+hr9wuy3TLl8nDy1zv/xf0T3jvbkFjWyVLKpAoGBALZv\r\nZWGq5GHzMgLyQNkRvCFhWJlLBwQlNu92a9gA+u7njrAm9K2Qf2vdgWHCVfyMYCLK\r\nW4uhpd69If4EKN8yAW6Xp65o+0EOPiCq1GkS0AHg5aQxOjApPbvmi2N4g+mQUrBP\r\nFIKU/02i0FqAZsjJD8h3r5zb0G/Ah+FOiFbDy0qZAoGAAezuaIyUIpdlZnZiroOh\r\nji4CWx3mxTwWSC7HNm8e85v+QFv/p/aIrH9Xhm2KboLVWPUGugsvd1E/jQMhiDwk\r\nB7X1qlvbVpGvkE2nssP08uLpvfoUr53ONwRmaTEM5VvM150qY+dC5yn1bJSjcRjT\r\nKj460FDLWtMiX7uhKq1HkS8=\r\n-----END PRIVATE KEY-----\r\n```\r\n\r\nhear is the function\r\n\r\n\r\n```\r\npublic static String getSignedText(\r\n\t\tString text, String algorithm, PrivateKey privateKey) \r\n\t\t  throws UnsupportedEncodingException, NoSuchAlgorithmException, InvalidKeyException, SignatureException { \r\n\t  byte[] data = text.getBytes(&quot;UTF8&quot;); \r\n\t  Signature sig = Signature.getInstance(algorithm == null ? &quot;SHA256WITHRSA&quot; : algorithm); \r\n\t  sig.initSign(privateKey); \r\n\t  sig.update(data); \r\n\t  byte[] signatureBytes = sig.sign(); \r\n\t  return Base64.getEncoder().encodeToString(signatureBytes); \r\n}\r\n```\r\n\r\n\r\ni have tried some string to privatekey functions but non of them can convert the string key to privatekey type","title":"i have public key as a text file and want to give it to a function that accepts publickey not string","body":"<p>helo. any help can be hopeful please. it's about 1 month that i am tring to solve the problem.\ni have below private key by size 2048 and a function to sign some data.</p>\n<pre><code>-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDMsFHds+5f72yW\nhhzhCL8svzk7IAoSFZqPnTYoGNz8nN82sKwY5dhkB2x0Hw7dlJhs2V2+Y8nlS13E\nfQQVT3NofdPVbZdCnwzrzz4VsT/0Yhg10FXNwXRzk4QTECQWaz5ZUqm2oXOBKG9R\nDvgLKiuQVIgnRPrh57o7njkCxtnrJg3fOqRTAIopODrZbpDd1WRpYGJMD1eRLzfj\nZfXcuDypb4hRZ4P4qm7W7OIuwjzmaDiG9uvf7SYn8oLaGNMaX9TmiaPVqBWH5BLO\nvtR+eRfq6LFpq/pyj8q7C8ODF3n6G8dhEXmScrkOn3QxWQUmlG6Fu5KItbJW72TD\niz/CflfPAgMBAAECggEACu+AmtpPafYIqcy7I5VWtrVLVsqnab/tugPULjWQg459\n/mtXRnKWf6xF3GOsZPouCo1dDMbtX8AJtRhYwiq0fRNRNfMyRETrE84cAFyv5gaM\n9JMPgnv2FMFU1Q/lCFhCbyiTbfEXkqxDsOOegjoxNEzP2V6TaMOl7M7PN5ltcGVH\njxG7mii3gj16czLX+R5XF8/exoEvrsA951gj8ZoetkRwBsPDgARgrlUr++CMd+pB\nPX2YvHkLulPRmjzYjSNG9KcK4IdIqVz3yCUDkBwi03Oj6BvTLLU93nj5VpVnrnJt\nAkDx4EFjz8wVZ5E2oS6UAbmsy/fUppVi1mrkLjXSQQKBgQDV6w29D581bV3nH/pT\n3xQEBUZdUk+PNvg+5nBC8mTz7MITAqe7qsI1oHsAkuW4FepucY4c0UEnskb6mu6m\nL7ohv+oc1ZKC/ERJs/xy2uHOfAjFNN2volB8A3D2EEhYJ/M1x8IlMXNhucWhUg2G\nSlAq//3yEXcoljBvNLarWH+j2wKBgQD09HiNfGL2vESicbTut1LPqTKwedl06I0B\nZvkpuL+qldeyfXXqu6+hU0NO6YTzVJToIM2LcfpbzNs1VIfA84f1pFUU+OhAahEt\nJFowhWRhDhXIQIYbZV8YPjiMv+pcOezZZZi6Qx9oytFBJ7sm8oC3UHzPCrIcrwym\nUMzJK9jYHQKBgB4zBMl//xXnzq3mUcytXYIDzJ84E4tAU2Nt3MNWvPHCptNQOKXB\nwZEYisTV+CA419OnrExdLjmQbXzLio1jh39kPIS9keVz/5/4DNeaFu6zi/lrMTCu\nVXZsdfIG8m+flDIvdTUS+hr9wuy3TLl8nDy1zv/xf0T3jvbkFjWyVLKpAoGBALZv\nZWGq5GHzMgLyQNkRvCFhWJlLBwQlNu92a9gA+u7njrAm9K2Qf2vdgWHCVfyMYCLK\nW4uhpd69If4EKN8yAW6Xp65o+0EOPiCq1GkS0AHg5aQxOjApPbvmi2N4g+mQUrBP\nFIKU/02i0FqAZsjJD8h3r5zb0G/Ah+FOiFbDy0qZAoGAAezuaIyUIpdlZnZiroOh\nji4CWx3mxTwWSC7HNm8e85v+QFv/p/aIrH9Xhm2KboLVWPUGugsvd1E/jQMhiDwk\nB7X1qlvbVpGvkE2nssP08uLpvfoUr53ONwRmaTEM5VvM150qY+dC5yn1bJSjcRjT\nKj460FDLWtMiX7uhKq1HkS8=\n-----END PRIVATE KEY-----\n</code></pre>\n<p>hear is the function</p>\n<pre><code>public static String getSignedText(\n        String text, String algorithm, PrivateKey privateKey) \n          throws UnsupportedEncodingException, NoSuchAlgorithmException, InvalidKeyException, SignatureException { \n      byte[] data = text.getBytes(&quot;UTF8&quot;); \n      Signature sig = Signature.getInstance(algorithm == null ? &quot;SHA256WITHRSA&quot; : algorithm); \n      sig.initSign(privateKey); \n      sig.update(data); \n      byte[] signatureBytes = sig.sign(); \n      return Base64.getEncoder().encodeToString(signatureBytes); \n}\n</code></pre>\n<p>i have tried some string to privatekey functions but non of them can convert the string key to privatekey type</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9758,"page":467,"page_size":100}
