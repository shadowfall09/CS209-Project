{"items":[{"tags":["java","jsp","jakarta-ee","jsp-tags"],"comments":[{"owner":{"account_id":13022813,"reputation":722,"user_id":9411636,"display_name":"Kaneda"},"score":0,"creation_date":1656634050,"post_id":72818682,"comment_id":128626845,"body_markdown":"can&#39;t you use expression language page=&quot;pages/${element.convertToLowercase()}&gt;.jsp&quot;?","body":"can&#39;t you use expression language page=&quot;pages/${element.convertToLowercase()}&gt;.jsp&quot;?"},{"owner":{"account_id":1122178,"reputation":4384,"user_id":1110291,"display_name":"rickz"},"score":0,"creation_date":1656639296,"post_id":72818682,"comment_id":128627557,"body_markdown":"Please try using &lt;% String elementPage = &quot;pages/&quot; + element.convertToLowercase() + &quot;.jsp&quot;;%&gt;\n&lt;jsp:include page=&quot;&lt;%=elementPage%&gt;&quot;&gt;&lt;/jsp:include&gt;","body":"Please try using &lt;% String elementPage = &quot;pages/&quot; + element.convertToLowercase() + &quot;.jsp&quot;;%&gt; &lt;jsp:include page=&quot;&lt;%=elementPage%&gt;&quot;&gt;&lt;/jsp:include&gt;"},{"owner":{"account_id":18088193,"reputation":595,"user_id":13148560,"display_name":"Japhei"},"score":0,"creation_date":1656674609,"post_id":72818682,"comment_id":128635660,"body_markdown":"@Kaneda I can&#39;t. The expression language is being ignored. The output string is `pages/.jsp`","body":"@Kaneda I can&#39;t. The expression language is being ignored. The output string is <code>pages&#47;.jsp</code>"},{"owner":{"account_id":18088193,"reputation":595,"user_id":13148560,"display_name":"Japhei"},"score":0,"creation_date":1656674763,"post_id":72818682,"comment_id":128635707,"body_markdown":"@rickz Thanks, this is similar to my workaround using a function that returns the entire string, but shouldn&#39;t be the actual goal.","body":"@rickz Thanks, this is similar to my workaround using a function that returns the entire string, but shouldn&#39;t be the actual goal."}],"answers":[{"tags":[],"owner":{"account_id":15673277,"reputation":59,"user_id":11309143,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682759817,"creation_date":1682759817,"answer_id":76135426,"question_id":72818682,"body_markdown":"Your suspicion is right. You can simply build the url in a scriptlet tag before the include action. ","title":"Use jsp include tag with &quot;&lt;%= ...&quot; expression","body":"<p>Your suspicion is right. You can simply build the url in a scriptlet tag before the include action.</p>\n"}],"owner":{"account_id":18088193,"reputation":595,"user_id":13148560,"display_name":"Japhei"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682759817,"creation_date":1656604225,"question_id":72818682,"body_markdown":"Why is it not possible to combine a jsp include tag with an `&lt;%= ... %&gt;` expression?\r\n\r\n    &lt;jsp:include page=&quot;pages/&lt;%= element.convertToLowercase() %&gt;.jsp&quot;&gt;&lt;/jsp:include&gt;\r\nThe `element.convertToLowercase()` returns the page that should be displayed.\r\n\r\nInstead I&#39;m getting the error `Failed to decode [/pages/&lt;%= element.convertToLowercase() %&gt;.jsp] because the % character must be followed by two hexademical digits`.\r\n\r\nMy suspicion is that the `&lt;%=` expression is being red as part of the URL and not as an jsp expression.\r\n\r\nHow can this be implemented instead?\r\n\r\nFull stacktrace:\r\n\r\n&gt; java.lang.IllegalArgumentException: Failed to decode [/pages/&lt;%= element.convertToLowercase() %&gt;.jsp] because the % character must be followed by two hexademical digits\r\n\tat org.apache.tomcat.util.buf.UDecoder.URLDecode(UDecoder.java:431)\r\n\tat org.apache.catalina.core.ApplicationContext.getRequestDispatcher(ApplicationContext.java:429)\r\n\tat org.apache.catalina.core.ApplicationContextFacade.getRequestDispatcher(ApplicationContextFacade.java:227)\r\n\tat org.apache.catalina.connector.Request.getRequestDispatcher(Request.java:1417)\r\n\tat org.apache.catalina.connector.RequestFacade.getRequestDispatcher(RequestFacade.java:614)\r\n\tat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:952)\r\n\tat org.apache.jsp.index_jsp._jspService(index_jsp.java:285)\r\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:71)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\r\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:467)\r\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:378)\r\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:326)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:832)","title":"Use jsp include tag with &quot;&lt;%= ...&quot; expression","body":"<p>Why is it not possible to combine a jsp include tag with an <code>&lt;%= ... %&gt;</code> expression?</p>\n<pre><code>&lt;jsp:include page=&quot;pages/&lt;%= element.convertToLowercase() %&gt;.jsp&quot;&gt;&lt;/jsp:include&gt;\n</code></pre>\n<p>The <code>element.convertToLowercase()</code> returns the page that should be displayed.</p>\n<p>Instead I'm getting the error <code>Failed to decode [/pages/&lt;%= element.convertToLowercase() %&gt;.jsp] because the % character must be followed by two hexademical digits</code>.</p>\n<p>My suspicion is that the <code>&lt;%=</code> expression is being red as part of the URL and not as an jsp expression.</p>\n<p>How can this be implemented instead?</p>\n<p>Full stacktrace:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Failed to decode [/pages/&lt;%= element.convertToLowercase() %&gt;.jsp] because the % character must be followed by two hexademical digits\nat org.apache.tomcat.util.buf.UDecoder.URLDecode(UDecoder.java:431)\nat org.apache.catalina.core.ApplicationContext.getRequestDispatcher(ApplicationContext.java:429)\nat org.apache.catalina.core.ApplicationContextFacade.getRequestDispatcher(ApplicationContextFacade.java:227)\nat org.apache.catalina.connector.Request.getRequestDispatcher(Request.java:1417)\nat org.apache.catalina.connector.RequestFacade.getRequestDispatcher(RequestFacade.java:614)\nat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:952)\nat org.apache.jsp.index_jsp._jspService(index_jsp.java:285)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:71)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:467)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:378)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:326)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:832)</p>\n</blockquote>\n"},{"tags":["java","iterator","concurrentmodification"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1682607002,"post_id":76121770,"comment_id":134245467,"body_markdown":"`for (Integer x : ls)` is iterating over the list (using a second `Iterator`.) Inside the loop, the list is being modified by the first `Iterator`, that is, not by the second, so the second one is invalidated (used in the `for`)","body":"<code>for (Integer x : ls)</code> is iterating over the list (using a second <code>Iterator</code>.) Inside the loop, the list is being modified by the first <code>Iterator</code>, that is, not by the second, so the second one is invalidated (used in the <code>for</code>)"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1682607015,"post_id":76121770,"comment_id":134245471,"body_markdown":"You can&#39;t remove from a list while iterating over it, which is what you&#39;re doing.","body":"You can&#39;t remove from a list while iterating over it, which is what you&#39;re doing."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1682607760,"post_id":76121770,"comment_id":134245686,"body_markdown":"[documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ArrayList.html) of `ArrayList`, I am assuming `ls` is one: &quot;*The iterators returned by this class&#39;s iterator and listIterator methods are fail-fast: if the list is structurally modified at any time after the iterator is created, in any way except through the iterator&#39;s own remove or add methods, the iterator will throw a ConcurrentModificationException.*&quot;","body":"<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ArrayList.html\" rel=\"nofollow noreferrer\">documentation</a> of <code>ArrayList</code>, I am assuming <code>ls</code> is one: &quot;<i>The iterators returned by this class&#39;s iterator and listIterator methods are fail-fast: if the list is structurally modified at any time after the iterator is created, in any way except through the iterator&#39;s own remove or add methods, the iterator will throw a ConcurrentModificationException.</i>&quot;"},{"owner":{"account_id":6946341,"reputation":57,"user_id":6393818,"display_name":"Sandeep T"},"score":0,"creation_date":1682754493,"post_id":76121770,"comment_id":134268086,"body_markdown":"this is not in-place though. \n\n@Andy Turner has provided in-place purge algo below.","body":"this is not in-place though.   @Andy Turner has provided in-place purge algo below."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682607448,"creation_date":1682607144,"answer_id":76121810,"question_id":76121770,"body_markdown":"You have two iterators over `ls` here:\r\n\r\n* The one created explicitly via `ls.iterator()`;\r\n* The one created implicitly via `for (Integer x : ls)`.\r\n\r\nIf you call `remove()` on the first iterator, it invalidates the second iterator, meaning any invocations of `next()` on the second iterator cause (or are prone to causing) a `ConcurrentModificationException` to be thrown.\r\n\r\n---\r\n\r\nA possible way to do an in-place deduplication might be like this:\r\n\r\n```\r\nint dst = 0;\r\nfor (Integer x : ls) {\r\n  if (!ls.subList(0, dst).contains(x)) {\r\n    ls.set(dst++, x);\r\n  }\r\n}\r\nls.subList(dst, ls.size()).clear();\r\n```\r\n\r\nThis shifts elements that haven&#39;t been seen before to the left in the array; and then removes all other elements from the array afterwards.\r\n\r\nChanging the list in the loop doesn&#39;t result in a `ConcurrentModificationException` because there is no structural modification to the list.","title":"Iterator remove throws ConcurrentException","body":"<p>You have two iterators over <code>ls</code> here:</p>\n<ul>\n<li>The one created explicitly via <code>ls.iterator()</code>;</li>\n<li>The one created implicitly via <code>for (Integer x : ls)</code>.</li>\n</ul>\n<p>If you call <code>remove()</code> on the first iterator, it invalidates the second iterator, meaning any invocations of <code>next()</code> on the second iterator cause (or are prone to causing) a <code>ConcurrentModificationException</code> to be thrown.</p>\n<hr />\n<p>A possible way to do an in-place deduplication might be like this:</p>\n<pre><code>int dst = 0;\nfor (Integer x : ls) {\n  if (!ls.subList(0, dst).contains(x)) {\n    ls.set(dst++, x);\n  }\n}\nls.subList(dst, ls.size()).clear();\n</code></pre>\n<p>This shifts elements that haven't been seen before to the left in the array; and then removes all other elements from the array afterwards.</p>\n<p>Changing the list in the loop doesn't result in a <code>ConcurrentModificationException</code> because there is no structural modification to the list.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682609102,"creation_date":1682608588,"answer_id":76122044,"question_id":76121770,"body_markdown":"Here is another possibility that avoids a concurrent mod exception. To remove duplicates use a set.\r\n```\r\n List&lt;String&gt; list = new ArrayList&lt;&gt;(List.of(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;A&quot;,&quot;B&quot;,&quot;B&quot;,&quot;E&quot;));\r\n Set&lt;String&gt; set = new LinkedHashSet&lt;&gt;();\r\n set.addAll(list);\r\n System.out.println(set);\r\n```\r\nprints\r\n```\r\n[A, B, C, D, E]\r\n```\r\nNote: Any set could be used.  A linked hash set preserves insertion order.\r\n\r\n","title":"Iterator remove throws ConcurrentException","body":"<p>Here is another possibility that avoids a concurrent mod exception. To remove duplicates use a set.</p>\n<pre><code> List&lt;String&gt; list = new ArrayList&lt;&gt;(List.of(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;A&quot;,&quot;B&quot;,&quot;B&quot;,&quot;E&quot;));\n Set&lt;String&gt; set = new LinkedHashSet&lt;&gt;();\n set.addAll(list);\n System.out.println(set);\n</code></pre>\n<p>prints</p>\n<pre><code>[A, B, C, D, E]\n</code></pre>\n<p>Note: Any set could be used.  A linked hash set preserves insertion order.</p>\n"},{"tags":[],"owner":{"account_id":1490931,"reputation":410,"user_id":1398030,"display_name":"Madhawa Gunasekara"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682611306,"creation_date":1682611306,"answer_id":76122463,"question_id":76121770,"body_markdown":"In order to look in to this problem we need to study how the `Java enhanced for loop` works internally. \r\n\r\nJava enhanced for loop is internally using a `Fail Fast Iterator` which uses an internal flag named `modCount` (This updats each time when ever the collection is modified) to track the structure of collection manipulated or not. If there is any change then it&#39;s throwing `ConcurrentModificationException`.\r\n\r\nPlease see the following synonym code for the enhanced for loop.\r\n\r\n   \r\n\r\n     List&lt;Integer&gt; ls = Arrays.asList(1,2,3);\r\n\r\n     for (Integer x : ls) {\r\n    \r\n     }\r\n\r\nSynonymous code with internal code structure\r\n \r\n\r\n    for (Iterator&lt;Integer&gt; itr = ls.iterator(); itr.hasNext();) {\r\n       Integer x = itr.next(); \r\n    }\r\n\r\nBecause of the above code structure, the enhanced for loop is not allowing to remove elements while iterating. \r\n\r\nEven though there is no explicit reference to the for iterator to call the remove() method, if remove() method is called on List then ConcurrentModificationException is firing.\r\n\r\nFinally, the reason for `ConcurrentModificationException` should be you are calling remove() method on the iterator `itr`, which works on the same list `ls` while invoking enhanced for loop related to same list `ls`. \r\n","title":"Iterator remove throws ConcurrentException","body":"<p>In order to look in to this problem we need to study how the <code>Java enhanced for loop</code> works internally.</p>\n<p>Java enhanced for loop is internally using a <code>Fail Fast Iterator</code> which uses an internal flag named <code>modCount</code> (This updats each time when ever the collection is modified) to track the structure of collection manipulated or not. If there is any change then it's throwing <code>ConcurrentModificationException</code>.</p>\n<p>Please see the following synonym code for the enhanced for loop.</p>\n<pre><code> List&lt;Integer&gt; ls = Arrays.asList(1,2,3);\n\n for (Integer x : ls) {\n\n }\n</code></pre>\n<p>Synonymous code with internal code structure</p>\n<pre><code>for (Iterator&lt;Integer&gt; itr = ls.iterator(); itr.hasNext();) {\n   Integer x = itr.next(); \n}\n</code></pre>\n<p>Because of the above code structure, the enhanced for loop is not allowing to remove elements while iterating.</p>\n<p>Even though there is no explicit reference to the for iterator to call the remove() method, if remove() method is called on List then ConcurrentModificationException is firing.</p>\n<p>Finally, the reason for <code>ConcurrentModificationException</code> should be you are calling remove() method on the iterator <code>itr</code>, which works on the same list <code>ls</code> while invoking enhanced for loop related to same list <code>ls</code>.</p>\n"},{"tags":[],"owner":{"account_id":6946341,"reputation":57,"user_id":6393818,"display_name":"Sandeep T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682759449,"creation_date":1682759449,"answer_id":76135409,"question_id":76121770,"body_markdown":"There is one hiccup I ran into implementing this algo\r\n\r\npurgeInplace(Arrays.asList(1, 2, 3, 1)) \r\n\r\nthrows \r\n```\r\nException in thread &quot;main&quot; java.lang.UnsupportedOperationException\r\n        at java.base/java.util.AbstractList.remove(AbstractList.java:169)\r\n        at java.base/java.util.AbstractList$Itr.remove(AbstractList.java:389)\r\n        at java.base/java.util.AbstractList.removeRange(AbstractList.java:600)\r\n        at java.base/java.util.AbstractList$SubList.removeRange(AbstractList.java:813)     \r\n        at java.base/java.util.AbstractList.clear(AbstractList.java:245)\r\n        at PurgeUtil.purgeInplace(PurgeUtil.java:25)\r\n        at PurgeUtil.main(PurgeUtil.java:15)\r\n```\r\n\r\nHowever, \r\n purgeInplace(new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 1)));\r\n\r\nworks fine. \r\n\r\nps. Couldn&#39;t put this under a comment because of word limit. ","title":"Iterator remove throws ConcurrentException","body":"<p>There is one hiccup I ran into implementing this algo</p>\n<p>purgeInplace(Arrays.asList(1, 2, 3, 1))</p>\n<p>throws</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException\n        at java.base/java.util.AbstractList.remove(AbstractList.java:169)\n        at java.base/java.util.AbstractList$Itr.remove(AbstractList.java:389)\n        at java.base/java.util.AbstractList.removeRange(AbstractList.java:600)\n        at java.base/java.util.AbstractList$SubList.removeRange(AbstractList.java:813)     \n        at java.base/java.util.AbstractList.clear(AbstractList.java:245)\n        at PurgeUtil.purgeInplace(PurgeUtil.java:25)\n        at PurgeUtil.main(PurgeUtil.java:15)\n</code></pre>\n<p>However,\npurgeInplace(new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 1)));</p>\n<p>works fine.</p>\n<p>ps. Couldn't put this under a comment because of word limit.</p>\n"}],"owner":{"account_id":6946341,"reputation":57,"user_id":6393818,"display_name":"Sandeep T"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76121810,"answer_count":4,"score":1,"last_activity_date":1682759449,"creation_date":1682606908,"question_id":76121770,"body_markdown":"Was trying to implement in-place purge on a list.\r\n\r\n\r\n```\r\n        Iterator&lt;Integer&gt; itr = ls.iterator();\r\n        for (Integer x : ls) {\r\n            int count = 0;\r\n            while(itr.hasNext()){\r\n                if (itr.next().equals(x)) {\r\n                    count++;\r\n                    if (count &gt; 1) {\r\n                        itr.remove();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n```\r\n\r\nException in thread &quot;main&quot; java.util.ConcurrentModificationException \r\n\r\n\r\n\r\n```\r\n        Iterator&lt;Integer&gt; iterator = numbers.iterator();\r\n        while (iterator.hasNext()) {\r\n            if (iterator.next() == 1) {\r\n                iterator.remove(); // Doesn&#39;t throw exception\r\n            }\r\n        }\r\n```\r\n\r\nHowever, with just one loop thought it doesn&#39;t. Why ? \r\n\r\n\r\nwhat is the reasoning for this behavior","title":"Iterator remove throws ConcurrentException","body":"<p>Was trying to implement in-place purge on a list.</p>\n<pre><code>        Iterator&lt;Integer&gt; itr = ls.iterator();\n        for (Integer x : ls) {\n            int count = 0;\n            while(itr.hasNext()){\n                if (itr.next().equals(x)) {\n                    count++;\n                    if (count &gt; 1) {\n                        itr.remove();\n                    }\n                }\n            }\n        }\n</code></pre>\n<p>Exception in thread &quot;main&quot; java.util.ConcurrentModificationException</p>\n<pre><code>        Iterator&lt;Integer&gt; iterator = numbers.iterator();\n        while (iterator.hasNext()) {\n            if (iterator.next() == 1) {\n                iterator.remove(); // Doesn't throw exception\n            }\n        }\n</code></pre>\n<p>However, with just one loop thought it doesn't. Why ?</p>\n<p>what is the reasoning for this behavior</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":3,"creation_date":1682740422,"post_id":76133094,"comment_id":134267098,"body_markdown":"This is tantamount to asking &#39;can someone write me a tutorial about generics&#39; which is.. perhaps something along the lines of at least 100 pages. Well beyond what Stack Overflow is meant for.","body":"This is tantamount to asking &#39;can someone write me a tutorial about generics&#39; which is.. perhaps something along the lines of at least 100 pages. Well beyond what Stack Overflow is meant for."}],"answers":[{"tags":[],"owner":{"account_id":4185076,"reputation":2839,"user_id":3429015,"display_name":"Danon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682759175,"creation_date":1682759175,"answer_id":76135374,"question_id":76133094,"body_markdown":"To answer the first part of your question, you should try and always used declared type `T` as it provides more secure types, and only use `?` as the last resort (or, when you exactly know what you&#39;re doing).\r\n\r\nTo answer the second part of your question, let me use your example:\r\n```java\r\npublic abstract class Base&lt;T extends EntityInfo&gt; {}\r\n\r\npublic abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\r\n```\r\n\r\nWhen declaring a class with generics, you can only declare generic types right between `&lt;&gt;` brackets of *that* class. So for `Base`, you can declare `T` right in `Base&lt;&gt;`. But for your second example, you can correctly declare `T` in `BaseMapper&lt;T&gt;`, but the second generic type (the one you tried to declare `S`) is no longer in the brackets of `BaseMapper`, it&#39;s in bracket of another class (a class, that&#39;s not being declared right now). In Java, there&#39;s a difference between declaring a class and using the class as a type. In your example, `Base&lt;? extends EntityInfo&gt;` is a class that&#39;s being *used* in declaration (similarly to how class `Integer` has to already exist when declaring `List&lt;Integer&gt;`). You might very well declare `BaseMapper` and use `Base&lt;&gt;` as its generic type, but that used `BaseMapper` will need to have the generic type specified. You tried to specify type `S`, but that type wasn&#39;t declared anywhere in the declaraton of `BaseMapper`.\r\n\r\nFor it to work, you would need:\r\n - Declare type `S` that extends `EntityInfo`\r\n - Declare type `S` that extends `EntityInfo&lt;S&gt;`\r\n\r\nSomething similar to this:\r\n\r\n```java\r\npublic abstract class Base&lt;T extends EntityInfo&gt; {}\r\n\r\npublic abstract class BaseMapper&lt;S extends EntityInfo, T extends Base&lt;S&gt;&gt;{}\r\n```\r\n\r\nYour problem really reflects the lack of knowledge on how Java generics work.","title":"Question on Java generics type T vs WildCard","body":"<p>To answer the first part of your question, you should try and always used declared type <code>T</code> as it provides more secure types, and only use <code>?</code> as the last resort (or, when you exactly know what you're doing).</p>\n<p>To answer the second part of your question, let me use your example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Base&lt;T extends EntityInfo&gt; {}\n\npublic abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\n</code></pre>\n<p>When declaring a class with generics, you can only declare generic types right between <code>&lt;&gt;</code> brackets of <em>that</em> class. So for <code>Base</code>, you can declare <code>T</code> right in <code>Base&lt;&gt;</code>. But for your second example, you can correctly declare <code>T</code> in <code>BaseMapper&lt;T&gt;</code>, but the second generic type (the one you tried to declare <code>S</code>) is no longer in the brackets of <code>BaseMapper</code>, it's in bracket of another class (a class, that's not being declared right now). In Java, there's a difference between declaring a class and using the class as a type. In your example, <code>Base&lt;? extends EntityInfo&gt;</code> is a class that's being <em>used</em> in declaration (similarly to how class <code>Integer</code> has to already exist when declaring <code>List&lt;Integer&gt;</code>). You might very well declare <code>BaseMapper</code> and use <code>Base&lt;&gt;</code> as its generic type, but that used <code>BaseMapper</code> will need to have the generic type specified. You tried to specify type <code>S</code>, but that type wasn't declared anywhere in the declaraton of <code>BaseMapper</code>.</p>\n<p>For it to work, you would need:</p>\n<ul>\n<li>Declare type <code>S</code> that extends <code>EntityInfo</code></li>\n<li>Declare type <code>S</code> that extends <code>EntityInfo&lt;S&gt;</code></li>\n</ul>\n<p>Something similar to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Base&lt;T extends EntityInfo&gt; {}\n\npublic abstract class BaseMapper&lt;S extends EntityInfo, T extends Base&lt;S&gt;&gt;{}\n</code></pre>\n<p>Your problem really reflects the lack of knowledge on how Java generics work.</p>\n"},{"tags":[],"owner":{"account_id":8433338,"reputation":20053,"user_id":6328256,"display_name":"Sash Sinha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682759392,"creation_date":1682759392,"answer_id":76135403,"question_id":76133094,"body_markdown":"The key difference between using a wildcard and a specific type parameter is how Java handles generics during compilation.\r\n\r\nWhen you use the wildcard `?`, it represents an unknown type that extends the given bound. It allows any subtype of the given bound to be used, but the specific type information is lost. This is useful when you want to allow a wide range of types without specifying the exact type.\r\n\r\nHowever, when you use a specific type parameter, such as `S extends EntityInfo`, it signifies that you want to have a concrete type that extends `EntityInfo`. This allows you to use that type information within the class definition.\r\n\r\nIn the context of the code you provided:\r\n\r\n - The code compiles fine when you use `? extends EntityInfo` in the \r\n  `BaseMapper` class:\r\n\r\n    ```\r\n    public abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\r\n    ```\r\n\r\n    This works because the type parameter `T extends Base` with an unknown \r\n    subtype of `EntityInfo`. So, when you create the `ImpMapper` class:\r\n\r\n    ```\r\n    public class ImpMapper extends BaseMapper&lt;Imp&gt;{}\r\n    ```  \r\n\r\n    `Imp` is a valid type, as it extends `Base&lt;Individual&gt;`, and `Individual` implements `EntityInfo`.\r\n - The code does not compile when you replace the wildcard with a specific type parameter:\r\n    ```\r\n    public abstract class BaseMapper&lt;T extends Base&lt;S extends EntityInfo&gt;&gt;{}\r\n    ```\r\n    This is because you are trying to declare a type parameter `S` within the bounds of another type parameter `T`. This is not valid syntax in Java. Instead, you should declare the type parameter separately:\r\n    ```\r\n    public abstract class BaseMapper&lt;S extends EntityInfo, T extends Base&lt;S&gt;&gt;{}\r\n    ```\r\n    Now, when you try to create the `ImpMapper` class:\r\n    ```\r\n    public class ImpMapper extends BaseMapper&lt;Imp&gt;{}\r\n    ```\r\n    You will still encounter a compilation error because `BaseMapper` expects two type parameters, but you only provided one (`Imp`). To fix this, provide both type parameters:\r\n    ```\r\n    public class ImpMapper extends BaseMapper&lt;Individual, Imp&gt;{}\r\n    ```\r\n    This will compile successfully since `Imp extends Base&lt;Individual&gt;`, and `Individual` implements `EntityInfo`.\r\n","title":"Question on Java generics type T vs WildCard","body":"<p>The key difference between using a wildcard and a specific type parameter is how Java handles generics during compilation.</p>\n<p>When you use the wildcard <code>?</code>, it represents an unknown type that extends the given bound. It allows any subtype of the given bound to be used, but the specific type information is lost. This is useful when you want to allow a wide range of types without specifying the exact type.</p>\n<p>However, when you use a specific type parameter, such as <code>S extends EntityInfo</code>, it signifies that you want to have a concrete type that extends <code>EntityInfo</code>. This allows you to use that type information within the class definition.</p>\n<p>In the context of the code you provided:</p>\n<ul>\n<li><p>The code compiles fine when you use <code>? extends EntityInfo</code> in the\n<code>BaseMapper</code> class:</p>\n<pre><code>public abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\n</code></pre>\n<p>This works because the type parameter <code>T extends Base</code> with an unknown\nsubtype of <code>EntityInfo</code>. So, when you create the <code>ImpMapper</code> class:</p>\n<pre><code>public class ImpMapper extends BaseMapper&lt;Imp&gt;{}\n</code></pre>\n<p><code>Imp</code> is a valid type, as it extends <code>Base&lt;Individual&gt;</code>, and <code>Individual</code> implements <code>EntityInfo</code>.</p>\n</li>\n<li><p>The code does not compile when you replace the wildcard with a specific type parameter:</p>\n<pre><code>public abstract class BaseMapper&lt;T extends Base&lt;S extends EntityInfo&gt;&gt;{}\n</code></pre>\n<p>This is because you are trying to declare a type parameter <code>S</code> within the bounds of another type parameter <code>T</code>. This is not valid syntax in Java. Instead, you should declare the type parameter separately:</p>\n<pre><code>public abstract class BaseMapper&lt;S extends EntityInfo, T extends Base&lt;S&gt;&gt;{}\n</code></pre>\n<p>Now, when you try to create the <code>ImpMapper</code> class:</p>\n<pre><code>public class ImpMapper extends BaseMapper&lt;Imp&gt;{}\n</code></pre>\n<p>You will still encounter a compilation error because <code>BaseMapper</code> expects two type parameters, but you only provided one (<code>Imp</code>). To fix this, provide both type parameters:</p>\n<pre><code>public class ImpMapper extends BaseMapper&lt;Individual, Imp&gt;{}\n</code></pre>\n<p>This will compile successfully since <code>Imp extends Base&lt;Individual&gt;</code>, and <code>Individual</code> implements <code>EntityInfo</code>.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":26359204,"reputation":65,"user_id":20015709,"display_name":"BinaryBee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76135403,"answer_count":2,"score":4,"last_activity_date":1682759392,"creation_date":1682713926,"question_id":76133094,"body_markdown":"I am a bit confused on how generic works, specially on when we should be using type `T` vs wildcard `?`.\r\n\r\nI have the following:\r\n\r\n```java\r\npublic interface EntityInfo {}\r\n\r\npublic class Individual implements EntityInfo {}\r\n\r\npublic abstract class Base&lt;T extends EntityInfo&gt; {}\r\n\r\npublic class Imp extends Base&lt;Individual&gt;{}\r\n\r\npublic abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\r\n\r\npublic class ImpMapper extends BaseMapper&lt;Imp&gt;{}\r\n```\r\n\r\nThis compiles fine. But if I change `BaseMapper`: from `? extends EntityInfo` to `S extends EntityInfo`, the compiler will complain:\r\n\r\n1. On BaseMapper: `Unexpected bound`\r\n2. On ImpMapper: `Type parameter &#39;Imp&#39; is not within its bound; should extend &#39;Base&lt;S&gt;&#39;`\r\n\r\nI am unsure how this works, why does wildcard work here and specific type will cause the compilation error?\r\n\r\nCould anyone help me understand/explain the above?","title":"Question on Java generics type T vs WildCard","body":"<p>I am a bit confused on how generic works, specially on when we should be using type <code>T</code> vs wildcard <code>?</code>.</p>\n<p>I have the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface EntityInfo {}\n\npublic class Individual implements EntityInfo {}\n\npublic abstract class Base&lt;T extends EntityInfo&gt; {}\n\npublic class Imp extends Base&lt;Individual&gt;{}\n\npublic abstract class BaseMapper&lt;T extends Base&lt;? extends EntityInfo&gt;&gt;{}\n\npublic class ImpMapper extends BaseMapper&lt;Imp&gt;{}\n</code></pre>\n<p>This compiles fine. But if I change <code>BaseMapper</code>: from <code>? extends EntityInfo</code> to <code>S extends EntityInfo</code>, the compiler will complain:</p>\n<ol>\n<li>On BaseMapper: <code>Unexpected bound</code></li>\n<li>On ImpMapper: <code>Type parameter 'Imp' is not within its bound; should extend 'Base&lt;S&gt;'</code></li>\n</ol>\n<p>I am unsure how this works, why does wildcard work here and specific type will cause the compilation error?</p>\n<p>Could anyone help me understand/explain the above?</p>\n"},{"tags":["java","jdi"],"answers":[{"tags":[],"owner":{"account_id":9080824,"reputation":319,"user_id":7397926,"display_name":"Linuxea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682759157,"creation_date":1682759157,"answer_id":76135372,"question_id":76135113,"body_markdown":"Thanks god!I google and find a resolution from [https://itsallbinary.com/java-debug-interface-api-jdi-hello-world-example-programmatic-debugging-for-beginners/][1]\r\n\r\n\r\n  [1]: https://itsallbinary.com/java-debug-interface-api-jdi-hello-world-example-programmatic-debugging-for-beginners/","title":"A java program to debug another java program using JDI but receive nothing useful event","body":"<p>Thanks god!I google and find a resolution from <a href=\"https://itsallbinary.com/java-debug-interface-api-jdi-hello-world-example-programmatic-debugging-for-beginners/\" rel=\"nofollow noreferrer\">https://itsallbinary.com/java-debug-interface-api-jdi-hello-world-example-programmatic-debugging-for-beginners/</a></p>\n"}],"owner":{"account_id":9080824,"reputation":319,"user_id":7397926,"display_name":"Linuxea"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682759157,"creation_date":1682754709,"question_id":76135113,"body_markdown":"I have two class. One is debuggee and another one is debugger.\r\nI use debugger to debug debuggee.\r\nHere&#39;s my code:\r\n\r\nJDIExampleDebuggee\r\n```java\r\npackage com.linuxea;\r\n\r\npublic class JDIExampleDebuggee {\r\n\r\n  public static void main(String[] args) {\r\n    String jpda = &quot;Java Platform Debugger Architecture&quot;;\r\n    System.out.println(&quot;Hi Everyone, Welcome to &quot; + jpda); // add a break point here\r\n\r\n    String jdi = &quot;Java Debug Interface&quot;; // add a break point here and also stepping in here\r\n    String text = &quot;Today, we&#39;ll dive into &quot; + jdi;\r\n    System.out.println(text);\r\n  }\r\n}\r\n```\r\n\r\nJDIExampleDebugger\r\n```java\r\npackage com.linuxea;\r\n\r\nimport com.sun.jdi.AbsentInformationException;\r\nimport com.sun.jdi.Bootstrap;\r\nimport com.sun.jdi.ClassType;\r\nimport com.sun.jdi.IncompatibleThreadStateException;\r\nimport com.sun.jdi.LocalVariable;\r\nimport com.sun.jdi.Location;\r\nimport com.sun.jdi.StackFrame;\r\nimport com.sun.jdi.VMDisconnectedException;\r\nimport com.sun.jdi.Value;\r\nimport com.sun.jdi.VirtualMachine;\r\nimport com.sun.jdi.connect.Connector.Argument;\r\nimport com.sun.jdi.connect.LaunchingConnector;\r\nimport com.sun.jdi.event.BreakpointEvent;\r\nimport com.sun.jdi.event.ClassPrepareEvent;\r\nimport com.sun.jdi.event.Event;\r\nimport com.sun.jdi.event.EventSet;\r\nimport com.sun.jdi.event.LocatableEvent;\r\nimport com.sun.jdi.event.StepEvent;\r\nimport com.sun.jdi.request.BreakpointRequest;\r\nimport com.sun.jdi.request.ClassPrepareRequest;\r\nimport com.sun.jdi.request.StepRequest;\r\nimport java.util.Map;\r\n\r\npublic class JDIExampleDebugger&lt;T&gt; {\r\n\r\n  private Class&lt;T&gt; debugClass;\r\n  private int[] breakPointLines;\r\n\r\n  public static void main(String[] args) {\r\n\r\n    JDIExampleDebugger&lt;JDIExampleDebuggee&gt; debuggerInstance = new JDIExampleDebugger&lt;&gt;();\r\n    debuggerInstance.debugClass = JDIExampleDebuggee.class;\r\n    debuggerInstance.breakPointLines = new int[]{6};\r\n    VirtualMachine vm;\r\n    try {\r\n      vm = debuggerInstance.connectAndLaunchVM();\r\n      debuggerInstance.enableClassPrepareRequest(vm);\r\n      EventSet eventSet;\r\n      while ((eventSet = vm.eventQueue().remove()) != null) {\r\n        for (Event event : eventSet) {\r\n          System.out.println(event.getClass().getName());\r\n\r\n          if (event instanceof ClassPrepareEvent) {\r\n            debuggerInstance.setBreakPoints(vm, (ClassPrepareEvent) event);\r\n          }\r\n          if (event instanceof BreakpointEvent) {\r\n            debuggerInstance.displayVariables((BreakpointEvent) event);\r\n          }\r\n\r\n          if (event instanceof BreakpointEvent) {\r\n            debuggerInstance.enableStepRequest(vm, (BreakpointEvent) event);\r\n          }\r\n\r\n          if (event instanceof StepEvent) {\r\n            debuggerInstance.displayVariables((StepEvent) event);\r\n          }\r\n          vm.resume();\r\n        }\r\n      }\r\n    } catch (VMDisconnectedException e) {\r\n      System.out.println(&quot;Virtual Machine is disconnected.&quot;);\r\n      throw new RuntimeException(e);\r\n    } catch (Exception e) {\r\n      e.printStackTrace();\r\n    }\r\n  }\r\n\r\n  public void enableStepRequest(VirtualMachine vm, BreakpointEvent event) {\r\n    // enable step request for last break point\r\n    if (event.location().toString().\r\n        contains(debugClass.getName() + &quot;:&quot; + breakPointLines[breakPointLines.length - 1])) {\r\n      StepRequest stepRequest = vm.eventRequestManager()\r\n          .createStepRequest(event.thread(), StepRequest.STEP_LINE, StepRequest.STEP_OVER);\r\n      stepRequest.enable();\r\n    }\r\n  }\r\n\r\n  public VirtualMachine connectAndLaunchVM() throws Exception {\r\n\r\n    LaunchingConnector launchingConnector = Bootstrap.virtualMachineManager()\r\n        .defaultConnector();\r\n    Map&lt;String, Argument&gt; arguments = launchingConnector.defaultArguments();\r\n    arguments.get(&quot;main&quot;).setValue(debugClass.getName());\r\n    return launchingConnector.launch(arguments);\r\n  }\r\n\r\n  public void enableClassPrepareRequest(VirtualMachine vm) {\r\n    ClassPrepareRequest classPrepareRequest = vm.eventRequestManager().createClassPrepareRequest();\r\n    classPrepareRequest.addClassFilter(debugClass.getName());\r\n    classPrepareRequest.enable();\r\n  }\r\n\r\n  public void setBreakPoints(VirtualMachine vm, ClassPrepareEvent event)\r\n      throws AbsentInformationException {\r\n    ClassType classType = (ClassType) event.referenceType();\r\n    for (int lineNumber : breakPointLines) {\r\n      Location location = classType.locationsOfLine(lineNumber).get(0);\r\n      BreakpointRequest bpReq = vm.eventRequestManager().createBreakpointRequest(location);\r\n      bpReq.enable();\r\n    }\r\n  }\r\n\r\n  public void displayVariables(LocatableEvent event) throws IncompatibleThreadStateException,\r\n      AbsentInformationException {\r\n    StackFrame stackFrame = event.thread().frame(0);\r\n    if (stackFrame.location().toString().contains(debugClass.getName())) {\r\n      Map&lt;LocalVariable, Value&gt; visibleVariables = stackFrame\r\n          .getValues(stackFrame.visibleVariables());\r\n      System.out.println(&quot;Variables at &quot; + stackFrame.location().toString() + &quot; &gt; &quot;);\r\n      for (Map.Entry&lt;LocalVariable, Value&gt; entry : visibleVariables.entrySet()) {\r\n        System.out.println(entry.getKey().name() + &quot; = &quot; + entry.getValue());\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\nThis is output:\r\n```bash\r\ncom.sun.tools.jdi.EventSetImpl$VMStartEventImpl\r\ncom.sun.tools.jdi.EventSetImpl$VMDeathEventImpl\r\ncom.sun.tools.jdi.EventSetImpl$VMDisconnectEventImpl\r\nVirtual Machine is disconnected.\r\nException in thread &quot;main&quot; java.lang.RuntimeException: com.sun.jdi.VMDisconnectedException\r\n\tat com.linuxea.JDIExampleDebugger.main(JDIExampleDebugger.java:64)\r\nCaused by: com.sun.jdi.VMDisconnectedException\r\n\tat com.sun.tools.jdi.EventQueueImpl.removeUnfiltered(EventQueueImpl.java:199)\r\n\tat com.sun.tools.jdi.EventQueueImpl.remove(EventQueueImpl.java:96)\r\n\tat com.sun.tools.jdi.EventQueueImpl.remove(EventQueueImpl.java:82)\r\n\tat com.linuxea.JDIExampleDebugger.main(JDIExampleDebugger.java:41)\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\n\r\n\r\n\r\nAs you can see there is nothing useful event. The target VM is start but stop immediately.\r\n\r\n\r\n\r\nI want to learn JDI using this tutorial.\r\nThe code is learn from [java-debug-interface](https://www.baeldung.com/java-debug-interface).\r\n\r\nI try many times but could not find out anything wrong.\r\n\r\nThe tutorial looks simple.","title":"A java program to debug another java program using JDI but receive nothing useful event","body":"<p>I have two class. One is debuggee and another one is debugger.\nI use debugger to debug debuggee.\nHere's my code:</p>\n<p>JDIExampleDebuggee</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.linuxea;\n\npublic class JDIExampleDebuggee {\n\n  public static void main(String[] args) {\n    String jpda = &quot;Java Platform Debugger Architecture&quot;;\n    System.out.println(&quot;Hi Everyone, Welcome to &quot; + jpda); // add a break point here\n\n    String jdi = &quot;Java Debug Interface&quot;; // add a break point here and also stepping in here\n    String text = &quot;Today, we'll dive into &quot; + jdi;\n    System.out.println(text);\n  }\n}\n</code></pre>\n<p>JDIExampleDebugger</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.linuxea;\n\nimport com.sun.jdi.AbsentInformationException;\nimport com.sun.jdi.Bootstrap;\nimport com.sun.jdi.ClassType;\nimport com.sun.jdi.IncompatibleThreadStateException;\nimport com.sun.jdi.LocalVariable;\nimport com.sun.jdi.Location;\nimport com.sun.jdi.StackFrame;\nimport com.sun.jdi.VMDisconnectedException;\nimport com.sun.jdi.Value;\nimport com.sun.jdi.VirtualMachine;\nimport com.sun.jdi.connect.Connector.Argument;\nimport com.sun.jdi.connect.LaunchingConnector;\nimport com.sun.jdi.event.BreakpointEvent;\nimport com.sun.jdi.event.ClassPrepareEvent;\nimport com.sun.jdi.event.Event;\nimport com.sun.jdi.event.EventSet;\nimport com.sun.jdi.event.LocatableEvent;\nimport com.sun.jdi.event.StepEvent;\nimport com.sun.jdi.request.BreakpointRequest;\nimport com.sun.jdi.request.ClassPrepareRequest;\nimport com.sun.jdi.request.StepRequest;\nimport java.util.Map;\n\npublic class JDIExampleDebugger&lt;T&gt; {\n\n  private Class&lt;T&gt; debugClass;\n  private int[] breakPointLines;\n\n  public static void main(String[] args) {\n\n    JDIExampleDebugger&lt;JDIExampleDebuggee&gt; debuggerInstance = new JDIExampleDebugger&lt;&gt;();\n    debuggerInstance.debugClass = JDIExampleDebuggee.class;\n    debuggerInstance.breakPointLines = new int[]{6};\n    VirtualMachine vm;\n    try {\n      vm = debuggerInstance.connectAndLaunchVM();\n      debuggerInstance.enableClassPrepareRequest(vm);\n      EventSet eventSet;\n      while ((eventSet = vm.eventQueue().remove()) != null) {\n        for (Event event : eventSet) {\n          System.out.println(event.getClass().getName());\n\n          if (event instanceof ClassPrepareEvent) {\n            debuggerInstance.setBreakPoints(vm, (ClassPrepareEvent) event);\n          }\n          if (event instanceof BreakpointEvent) {\n            debuggerInstance.displayVariables((BreakpointEvent) event);\n          }\n\n          if (event instanceof BreakpointEvent) {\n            debuggerInstance.enableStepRequest(vm, (BreakpointEvent) event);\n          }\n\n          if (event instanceof StepEvent) {\n            debuggerInstance.displayVariables((StepEvent) event);\n          }\n          vm.resume();\n        }\n      }\n    } catch (VMDisconnectedException e) {\n      System.out.println(&quot;Virtual Machine is disconnected.&quot;);\n      throw new RuntimeException(e);\n    } catch (Exception e) {\n      e.printStackTrace();\n    }\n  }\n\n  public void enableStepRequest(VirtualMachine vm, BreakpointEvent event) {\n    // enable step request for last break point\n    if (event.location().toString().\n        contains(debugClass.getName() + &quot;:&quot; + breakPointLines[breakPointLines.length - 1])) {\n      StepRequest stepRequest = vm.eventRequestManager()\n          .createStepRequest(event.thread(), StepRequest.STEP_LINE, StepRequest.STEP_OVER);\n      stepRequest.enable();\n    }\n  }\n\n  public VirtualMachine connectAndLaunchVM() throws Exception {\n\n    LaunchingConnector launchingConnector = Bootstrap.virtualMachineManager()\n        .defaultConnector();\n    Map&lt;String, Argument&gt; arguments = launchingConnector.defaultArguments();\n    arguments.get(&quot;main&quot;).setValue(debugClass.getName());\n    return launchingConnector.launch(arguments);\n  }\n\n  public void enableClassPrepareRequest(VirtualMachine vm) {\n    ClassPrepareRequest classPrepareRequest = vm.eventRequestManager().createClassPrepareRequest();\n    classPrepareRequest.addClassFilter(debugClass.getName());\n    classPrepareRequest.enable();\n  }\n\n  public void setBreakPoints(VirtualMachine vm, ClassPrepareEvent event)\n      throws AbsentInformationException {\n    ClassType classType = (ClassType) event.referenceType();\n    for (int lineNumber : breakPointLines) {\n      Location location = classType.locationsOfLine(lineNumber).get(0);\n      BreakpointRequest bpReq = vm.eventRequestManager().createBreakpointRequest(location);\n      bpReq.enable();\n    }\n  }\n\n  public void displayVariables(LocatableEvent event) throws IncompatibleThreadStateException,\n      AbsentInformationException {\n    StackFrame stackFrame = event.thread().frame(0);\n    if (stackFrame.location().toString().contains(debugClass.getName())) {\n      Map&lt;LocalVariable, Value&gt; visibleVariables = stackFrame\n          .getValues(stackFrame.visibleVariables());\n      System.out.println(&quot;Variables at &quot; + stackFrame.location().toString() + &quot; &gt; &quot;);\n      for (Map.Entry&lt;LocalVariable, Value&gt; entry : visibleVariables.entrySet()) {\n        System.out.println(entry.getKey().name() + &quot; = &quot; + entry.getValue());\n      }\n    }\n  }\n\n}\n</code></pre>\n<p>This is output:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>com.sun.tools.jdi.EventSetImpl$VMStartEventImpl\ncom.sun.tools.jdi.EventSetImpl$VMDeathEventImpl\ncom.sun.tools.jdi.EventSetImpl$VMDisconnectEventImpl\nVirtual Machine is disconnected.\nException in thread &quot;main&quot; java.lang.RuntimeException: com.sun.jdi.VMDisconnectedException\n    at com.linuxea.JDIExampleDebugger.main(JDIExampleDebugger.java:64)\nCaused by: com.sun.jdi.VMDisconnectedException\n    at com.sun.tools.jdi.EventQueueImpl.removeUnfiltered(EventQueueImpl.java:199)\n    at com.sun.tools.jdi.EventQueueImpl.remove(EventQueueImpl.java:96)\n    at com.sun.tools.jdi.EventQueueImpl.remove(EventQueueImpl.java:82)\n    at com.linuxea.JDIExampleDebugger.main(JDIExampleDebugger.java:41)\n\nProcess finished with exit code 1\n\n</code></pre>\n<p>As you can see there is nothing useful event. The target VM is start but stop immediately.</p>\n<p>I want to learn JDI using this tutorial.\nThe code is learn from <a href=\"https://www.baeldung.com/java-debug-interface\" rel=\"nofollow noreferrer\">java-debug-interface</a>.</p>\n<p>I try many times but could not find out anything wrong.</p>\n<p>The tutorial looks simple.</p>\n"},{"tags":["java","multithreading","executorservice","countdownlatch","forkjoinpool"],"answers":[{"tags":[],"owner":{"account_id":6719,"reputation":8306,"user_id":11427,"display_name":"Aleksi Yrttiaho"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1438665176,"creation_date":1438665176,"answer_id":31801147,"question_id":31627441,"body_markdown":"An excellent question to which the answer might not be quite as satisfying. The concurrency models listed show some of the ways you might want to go about implementing an concurrent system. The API provides tools used to implementing any of these models. \r\n\r\nLets start with ExecutorService. It allows you to submit tasks to be executed in a non-blocking way. The ThreadPoolExecutor implementation then limits the maximum number of threads available. The ExecutorService does not require the task to perform the complete process as you might expect of a parallel worker. The task may be limited to specific part of the process and send a message upon completion that starts the next step in an assembly line. \r\n\r\nThe CountDownLatch and the ExecutorService provide a means to block until all workers have completed that may come in handy if a certain process has been divided to different concurrent sub-tasks. \r\n\r\nThe point of JMS is to provide a means for messaging between components. It does not enforce a specific model for concurrency. Queues and topics denote how a message is sent from a publisher to a subscriber. When you use queues the message is sent to exactly one subscriber. Topics on the other hand broadcast the message to all subscribers of the topic. \r\n\r\nSimilar behavior could be achieved within a single component by for example using the observer pattern. \r\n\r\nForkJoinPool is actually one implementation of ExecutorService (which might highlight the difficulty of matching a model and an implementation detail). It just happens to be optimized for working with large amount of small tasks. \r\n\r\nSummary: There are multiple ways to implement a certain concurrency model in the Java environment. The interfaces, classes and frameworks used in implementing a program may vary regardless of the concurrency model chosen. ","title":"Java support for three different concurrency models","body":"<p>An excellent question to which the answer might not be quite as satisfying. The concurrency models listed show some of the ways you might want to go about implementing an concurrent system. The API provides tools used to implementing any of these models. </p>\n\n<p>Lets start with ExecutorService. It allows you to submit tasks to be executed in a non-blocking way. The ThreadPoolExecutor implementation then limits the maximum number of threads available. The ExecutorService does not require the task to perform the complete process as you might expect of a parallel worker. The task may be limited to specific part of the process and send a message upon completion that starts the next step in an assembly line. </p>\n\n<p>The CountDownLatch and the ExecutorService provide a means to block until all workers have completed that may come in handy if a certain process has been divided to different concurrent sub-tasks. </p>\n\n<p>The point of JMS is to provide a means for messaging between components. It does not enforce a specific model for concurrency. Queues and topics denote how a message is sent from a publisher to a subscriber. When you use queues the message is sent to exactly one subscriber. Topics on the other hand broadcast the message to all subscribers of the topic. </p>\n\n<p>Similar behavior could be achieved within a single component by for example using the observer pattern. </p>\n\n<p>ForkJoinPool is actually one implementation of ExecutorService (which might highlight the difficulty of matching a model and an implementation detail). It just happens to be optimized for working with large amount of small tasks. </p>\n\n<p>Summary: There are multiple ways to implement a certain concurrency model in the Java environment. The interfaces, classes and frameworks used in implementing a program may vary regardless of the concurrency model chosen. </p>\n"},{"tags":[],"owner":{"account_id":668476,"reputation":18892,"user_id":504956,"accept_rate":69,"display_name":"V G"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1438761416,"creation_date":1438684419,"answer_id":31806962,"question_id":31627441,"body_markdown":"Each of those models says how the work is done/splitted from a general point of view, but when it comes to implementation, it really depends on your exact problem. Generally I see it like this:  \r\n\r\n1. **Parallel Workers**: a producer creates new jobs somewhere (e.g in a `BlockingQueue`) and many threads (via an `ExecutorService`) process those jobs in parallel. Of course, you could also use a `CountDownLatch`, but that means you want to trigger an action after exactly `N` subproblems have been processed (e.g you know your big problem may be split in `N` smaller problems, check [the second example here][1]).\r\n2. **Assembly Line**: for every intermediate step, you have a `BlockingQueue` and one `Thread` or an `ExecutorService`. On each step the jobs are taken from one `BlickingQueue` and put in the next one, to be processed further. To your idea with JMS: JMS is there to connect distributed components and is part of the Java EE and was not thought to be used in a high concurrent context (messages are kept usually on the hard disk, before being processed).\r\n3. **Functional Parallelism**: `ForkJoinPool` is a good example on how you could implement this.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html","title":"Java support for three different concurrency models","body":"<p>Each of those models says how the work is done/splitted from a general point of view, but when it comes to implementation, it really depends on your exact problem. Generally I see it like this:  </p>\n\n<ol>\n<li><strong>Parallel Workers</strong>: a producer creates new jobs somewhere (e.g in a <code>BlockingQueue</code>) and many threads (via an <code>ExecutorService</code>) process those jobs in parallel. Of course, you could also use a <code>CountDownLatch</code>, but that means you want to trigger an action after exactly <code>N</code> subproblems have been processed (e.g you know your big problem may be split in <code>N</code> smaller problems, check <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"noreferrer\">the second example here</a>).</li>\n<li><strong>Assembly Line</strong>: for every intermediate step, you have a <code>BlockingQueue</code> and one <code>Thread</code> or an <code>ExecutorService</code>. On each step the jobs are taken from one <code>BlickingQueue</code> and put in the next one, to be processed further. To your idea with JMS: JMS is there to connect distributed components and is part of the Java EE and was not thought to be used in a high concurrent context (messages are kept usually on the hard disk, before being processed).</li>\n<li><strong>Functional Parallelism</strong>: <code>ForkJoinPool</code> is a good example on how you could implement this.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":17543100,"reputation":129,"user_id":12724927,"display_name":"Mohan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663598832,"creation_date":1663598832,"answer_id":73775280,"question_id":31627441,"body_markdown":"Actor model is another example for an Assembly line. Ex: akka","title":"Java support for three different concurrency models","body":"<p>Actor model is another example for an Assembly line. Ex: akka</p>\n"}],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4066,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":31806962,"answer_count":3,"score":28,"last_activity_date":1682758354,"creation_date":1437834268,"question_id":31627441,"body_markdown":"I am going through different concurrency model in multi-threading environment (http://tutorials.jenkov.com/java-concurrency/concurrency-models.html)\r\n\r\n*The article highlights about **three concurrency** models*:\r\n\r\n&gt; 1. **Parallel Workers**\r\n&gt; \r\n&gt;  The first concurrency model is what I call the parallel worker model.\r\n&gt; Incoming jobs are assigned to different **workers**.\r\n&gt; \r\n&gt; 2. **Assembly Line**\r\n&gt; \r\n&gt;  The workers are organized like **workers** at an assembly line in a\r\n&gt; factory. Each worker only performs a part of the full job. When that\r\n&gt; part is finished the worker forwards the job to the next worker.\r\n&gt; \r\n&gt;  Each worker is running in its own thread, and shares no state with\r\n&gt; other workers. This is also sometimes referred to as a shared nothing\r\n&gt; concurrency model.\r\n&gt; \r\n&gt; 3. **Functional Parallelism**\r\n&gt; \r\n&gt;  The basic idea of functional parallelism is that you implement your\r\n&gt; program using function calls. Functions can be seen as &quot;**agents**&quot; or\r\n&gt; &quot;**actors**&quot; that send messages to each other, just like in the\r\n&gt; assembly line concurrency model (AKA reactive or event driven\r\n&gt; systems). When one function calls another, that is similar to sending\r\n&gt; a message.\r\n\r\nNow I want to map java API support for these three concepts\r\n\r\n1. **Parallel Workers** : Is it [ExecutorService][1],[ThreadPoolExecutor][2], [CountDownLatch][3] API?\r\n\r\n2. **Assembly Line** : Sending an event to messaging system like **JMS** &amp; using messaging concepts of **Queues &amp; Topics**. \r\n\r\n3. **Functional Parallelism**: [ForkJoinPool][4] to some extent &amp; java 8 streams. ForkJoin pool is easy to understand compared to streams. \r\n\r\nAm I correct in mapping these concurrency models? If not please correct me.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\r\n  [2]: http://ps://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html","title":"Java support for three different concurrency models","body":"<p>I am going through different concurrency model in multi-threading environment (<a href=\"http://tutorials.jenkov.com/java-concurrency/concurrency-models.html\" rel=\"nofollow noreferrer\">http://tutorials.jenkov.com/java-concurrency/concurrency-models.html</a>)</p>\n<p><em>The article highlights about <strong>three concurrency</strong> models</em>:</p>\n<blockquote>\n<ol>\n<li><strong>Parallel Workers</strong></li>\n</ol>\n<p>The first concurrency model is what I call the parallel worker model.\nIncoming jobs are assigned to different <strong>workers</strong>.</p>\n<ol start=\"2\">\n<li><strong>Assembly Line</strong></li>\n</ol>\n<p>The workers are organized like <strong>workers</strong> at an assembly line in a\nfactory. Each worker only performs a part of the full job. When that\npart is finished the worker forwards the job to the next worker.</p>\n<p>Each worker is running in its own thread, and shares no state with\nother workers. This is also sometimes referred to as a shared nothing\nconcurrency model.</p>\n<ol start=\"3\">\n<li><strong>Functional Parallelism</strong></li>\n</ol>\n<p>The basic idea of functional parallelism is that you implement your\nprogram using function calls. Functions can be seen as &quot;<strong>agents</strong>&quot; or\n&quot;<strong>actors</strong>&quot; that send messages to each other, just like in the\nassembly line concurrency model (AKA reactive or event driven\nsystems). When one function calls another, that is similar to sending\na message.</p>\n</blockquote>\n<p>Now I want to map java API support for these three concepts</p>\n<ol>\n<li><p><strong>Parallel Workers</strong> : Is it <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">ExecutorService</a>,<a href=\"http://ps://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"nofollow noreferrer\">ThreadPoolExecutor</a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\">CountDownLatch</a> API?</p>\n</li>\n<li><p><strong>Assembly Line</strong> : Sending an event to messaging system like <strong>JMS</strong> &amp; using messaging concepts of <strong>Queues &amp; Topics</strong>.</p>\n</li>\n<li><p><strong>Functional Parallelism</strong>: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html\" rel=\"nofollow noreferrer\">ForkJoinPool</a> to some extent &amp; java 8 streams. ForkJoin pool is easy to understand compared to streams.</p>\n</li>\n</ol>\n<p>Am I correct in mapping these concurrency models? If not please correct me.</p>\n"},{"tags":["java","apache-spark","gson"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1682584021,"post_id":76118146,"comment_id":134239872,"body_markdown":"What I would try to do is to parse data directly from the request stream using one of the available JSON streaming APIs and transforming it into the desired format on the fly; if you could stream the result too that would be even better for the memory footprint of the application. For reading JSON in a streaming way see e.g. [this (Jackson)](https://www.baeldung.com/jackson-streaming-api) and [this (JSONP)](https://javaee.github.io/tutorial/jsonp004.html).","body":"What I would try to do is to parse data directly from the request stream using one of the available JSON streaming APIs and transforming it into the desired format on the fly; if you could stream the result too that would be even better for the memory footprint of the application. For reading JSON in a streaming way see e.g. <a href=\"https://www.baeldung.com/jackson-streaming-api\" rel=\"nofollow noreferrer\">this (Jackson)</a> and <a href=\"https://javaee.github.io/tutorial/jsonp004.html\" rel=\"nofollow noreferrer\">this (JSONP)</a>."},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1682584660,"post_id":76118146,"comment_id":134240006,"body_markdown":"This piece is going to fetch json files that are typically less than 1.5Kb of data a couple times a month, so I am not too concerned with memory footprint or performance. I can indeed get the `data` field from the stream directly, I will modify my code for this. Still not sure about the conversion to spark though","body":"This piece is going to fetch json files that are typically less than 1.5Kb of data a couple times a month, so I am not too concerned with memory footprint or performance. I can indeed get the <code>data</code> field from the stream directly, I will modify my code for this. Still not sure about the conversion to spark though"}],"answers":[{"tags":[],"owner":{"account_id":24158120,"reputation":120,"user_id":18122075,"display_name":"Shah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682758157,"creation_date":1682610600,"answer_id":76122362,"question_id":76118146,"body_markdown":"So i am trying to solve(scala language) by just by load json data like\r\n\r\n    val df = spark.read.format(&quot;json&quot;).option(&quot;multiline&quot;,&quot;True&quot;).load(&quot;path&quot;)\r\n    \r\n    df.show()\r\n\r\n    +--------------------+----+----------+-------+\r\n    |                data|name|uploadDate|version|\r\n    +--------------------+----+----------+-------+\r\n    |[[123, 4, ], [456...| foo|2023-04-17|      1|\r\n    +--------------------+----+----------+-------+\r\n\r\n    df.printSchema()\r\n    root\r\n     |-- data: array (nullable = true)\r\n     |    |-- element: struct (containsNull = true)\r\n     |    |    |-- abc: string (nullable = true)\r\n     |    |    |-- alpha: string (nullable = true)\r\n     |    |    |-- xyz: string (nullable = true)\r\n     |-- name: string (nullable = true)\r\n     |-- uploadDate: string (nullable = true)\r\n     |-- version: long (nullable = true)\r\n\r\nthat data will be show as dataset\r\nbut you can explode the data in familiar. so\r\n   \r\n\r\n     val df1 = df.withColumn(&quot;data&quot;,explode($&quot;data&quot;)).select(&quot;data.*&quot;,&quot;name&quot;,&quot;version&quot;,&quot;uploadDate) \r\n        df1.show()\r\n\r\nOutput will be look like this \r\n\r\n    +---+-----+---+----+----------+-------+\r\n    |abc|alpha|xyz|name|uploadDate|version|\r\n    +---+-----+---+----+----------+-------+\r\n    |123|    4|   | foo|2023-04-17|      1|\r\n    |456|    1|   | foo|2023-04-17|      1|\r\n    |679|    2|   | foo|2023-04-17|      1|\r\n    |890|    5|   | foo|2023-04-17|      1|\r\n    +---+-----+---+----+----------+-------+\r\nif you dont want to add extra column so you can modify the code like\r\n\r\n    val df1 = df.withColumn(&quot;data&quot;,explode($&quot;data&quot;)).select(&quot;data.*&quot;) \r\n        df1.show()\r\n\r\nOutput will be as you want\r\n\r\n    +---+-----+---+\r\n    |abc|alpha|xyz|\r\n    +---+-----+---+\r\n    |123|    4|   |\r\n    |456|    1|   |\r\n    |679|    2|   |\r\n    |890|    5|   |\r\n    +---+-----+---+\r\n\r\nin java language through\r\n\r\n    import static org.apache.spark.sql.functions.*;\r\n    \r\n    // Assuming the input DataFrame is named &quot;df&quot;\r\n    DataFrame df1 = df.withColumn(&quot;data&quot;, explode(col(&quot;data&quot;)))\r\n                      .select(&quot;data.*&quot;);\r\n    df1.show();\r\n\r\n","title":"Convert JsonArray into Spark Dataset&lt;Row&gt; without an intermediate pojo","body":"<p>So i am trying to solve(scala language) by just by load json data like</p>\n<pre><code>val df = spark.read.format(&quot;json&quot;).option(&quot;multiline&quot;,&quot;True&quot;).load(&quot;path&quot;)\n\ndf.show()\n\n+--------------------+----+----------+-------+\n|                data|name|uploadDate|version|\n+--------------------+----+----------+-------+\n|[[123, 4, ], [456...| foo|2023-04-17|      1|\n+--------------------+----+----------+-------+\n\ndf.printSchema()\nroot\n |-- data: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- abc: string (nullable = true)\n |    |    |-- alpha: string (nullable = true)\n |    |    |-- xyz: string (nullable = true)\n |-- name: string (nullable = true)\n |-- uploadDate: string (nullable = true)\n |-- version: long (nullable = true)\n</code></pre>\n<p>that data will be show as dataset\nbut you can explode the data in familiar. so</p>\n<pre><code> val df1 = df.withColumn(&quot;data&quot;,explode($&quot;data&quot;)).select(&quot;data.*&quot;,&quot;name&quot;,&quot;version&quot;,&quot;uploadDate) \n    df1.show()\n</code></pre>\n<p>Output will be look like this</p>\n<pre><code>+---+-----+---+----+----------+-------+\n|abc|alpha|xyz|name|uploadDate|version|\n+---+-----+---+----+----------+-------+\n|123|    4|   | foo|2023-04-17|      1|\n|456|    1|   | foo|2023-04-17|      1|\n|679|    2|   | foo|2023-04-17|      1|\n|890|    5|   | foo|2023-04-17|      1|\n+---+-----+---+----+----------+-------+\n</code></pre>\n<p>if you dont want to add extra column so you can modify the code like</p>\n<pre><code>val df1 = df.withColumn(&quot;data&quot;,explode($&quot;data&quot;)).select(&quot;data.*&quot;) \n    df1.show()\n</code></pre>\n<p>Output will be as you want</p>\n<pre><code>+---+-----+---+\n|abc|alpha|xyz|\n+---+-----+---+\n|123|    4|   |\n|456|    1|   |\n|679|    2|   |\n|890|    5|   |\n+---+-----+---+\n</code></pre>\n<p>in java language through</p>\n<pre><code>import static org.apache.spark.sql.functions.*;\n\n// Assuming the input DataFrame is named &quot;df&quot;\nDataFrame df1 = df.withColumn(&quot;data&quot;, explode(col(&quot;data&quot;)))\n                  .select(&quot;data.*&quot;);\ndf1.show();\n</code></pre>\n"}],"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76122362,"answer_count":1,"score":1,"last_activity_date":1682758157,"creation_date":1682582891,"question_id":76118146,"body_markdown":"From a http call I receive a Json with the following format \r\n\r\n    {\r\n      &quot;name&quot;: &quot;foo&quot;,\r\n      &quot;version&quot;: 1,\r\n      &quot;uploadDate&quot;: &quot;2023-04-17&quot;,\r\n      &quot;data&quot;: [\r\n        {\r\n          &quot;abc&quot;: &quot;123&quot;,\r\n          &quot;xyz&quot;: &quot;&quot;,\r\n          &quot;alpha&quot;: &quot;4&quot;\r\n        },\r\n         {\r\n          &quot;abc&quot;: &quot;456&quot;,\r\n          &quot;xyz&quot;: &quot;&quot;,\r\n          &quot;alpha&quot;: &quot;1&quot;\r\n        },\r\n         {\r\n          &quot;abc&quot;: &quot;679&quot;,\r\n          &quot;xyz&quot;: &quot;&quot;,\r\n          &quot;alpha&quot;: &quot;2&quot;\r\n        },\r\n         {\r\n          &quot;abc&quot;: &quot;890&quot;,\r\n          &quot;xyz&quot;: &quot;&quot;,\r\n          &quot;alpha&quot;: &quot;5&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\n\r\nI would like to extract the `data` element, turn it into a `Dataset&lt;Row&gt;` and persist it to a parquet format file.\r\n\r\nIf I call this json String `responseBody`, I&#39;m extracting the `data` element with \r\n\r\n```\r\n  JsonObject responseBodyObject = new JsonParser().parse(responseBody).getAsJsonObject();\r\n  String dataString = new Gson().toJson(responseBodyObject.get(&quot;data&quot;));\r\n```\r\n\r\nIt already seems a bit wasteful to me to get the string to object to string again. I&#39;m doing this because I will feed it to `spark.read().json(string)`.\r\n\r\nMy end goal is to convert `data` into a Spark `Dataset&lt;Row&gt;` with the following structure :\r\n\r\n    | abc | xyz | alpha |\r\n    ---------------------\r\n    | 123 |     | 4     |\r\n    | 456 |     | 1     |\r\n    | 679 |     | 2     |\r\n    | 890 |     | 5     |\r\n\r\n\r\nIs it possible to do it without creating a POJO object that match the objects in the json list ? Can I just work with a JsonElement or JsonArray ? I would rather avoid making a new type for each http endpoint (don&#39;t want to change that code everytime the endpoint change the structure, as the paint isn&#39;t quite dry yet on that side), and I&#39;m going to immediately write that Dataset to a parquet file anyway, I&#39;m not going to do any manipulation of those data. So I felt like a vague type like Row was good enough.\r\n\r\nI am not very familiar with spark, how would you go about this ?\r\n\r\nEdit : grammar + a bit of extra info about why I don&#39;t want a POJO","title":"Convert JsonArray into Spark Dataset&lt;Row&gt; without an intermediate pojo","body":"<p>From a http call I receive a Json with the following format</p>\n<pre><code>{\n  &quot;name&quot;: &quot;foo&quot;,\n  &quot;version&quot;: 1,\n  &quot;uploadDate&quot;: &quot;2023-04-17&quot;,\n  &quot;data&quot;: [\n    {\n      &quot;abc&quot;: &quot;123&quot;,\n      &quot;xyz&quot;: &quot;&quot;,\n      &quot;alpha&quot;: &quot;4&quot;\n    },\n     {\n      &quot;abc&quot;: &quot;456&quot;,\n      &quot;xyz&quot;: &quot;&quot;,\n      &quot;alpha&quot;: &quot;1&quot;\n    },\n     {\n      &quot;abc&quot;: &quot;679&quot;,\n      &quot;xyz&quot;: &quot;&quot;,\n      &quot;alpha&quot;: &quot;2&quot;\n    },\n     {\n      &quot;abc&quot;: &quot;890&quot;,\n      &quot;xyz&quot;: &quot;&quot;,\n      &quot;alpha&quot;: &quot;5&quot;\n    }\n  ]\n}\n</code></pre>\n<p>I would like to extract the <code>data</code> element, turn it into a <code>Dataset&lt;Row&gt;</code> and persist it to a parquet format file.</p>\n<p>If I call this json String <code>responseBody</code>, I'm extracting the <code>data</code> element with</p>\n<pre><code>  JsonObject responseBodyObject = new JsonParser().parse(responseBody).getAsJsonObject();\n  String dataString = new Gson().toJson(responseBodyObject.get(&quot;data&quot;));\n</code></pre>\n<p>It already seems a bit wasteful to me to get the string to object to string again. I'm doing this because I will feed it to <code>spark.read().json(string)</code>.</p>\n<p>My end goal is to convert <code>data</code> into a Spark <code>Dataset&lt;Row&gt;</code> with the following structure :</p>\n<pre><code>| abc | xyz | alpha |\n---------------------\n| 123 |     | 4     |\n| 456 |     | 1     |\n| 679 |     | 2     |\n| 890 |     | 5     |\n</code></pre>\n<p>Is it possible to do it without creating a POJO object that match the objects in the json list ? Can I just work with a JsonElement or JsonArray ? I would rather avoid making a new type for each http endpoint (don't want to change that code everytime the endpoint change the structure, as the paint isn't quite dry yet on that side), and I'm going to immediately write that Dataset to a parquet file anyway, I'm not going to do any manipulation of those data. So I felt like a vague type like Row was good enough.</p>\n<p>I am not very familiar with spark, how would you go about this ?</p>\n<p>Edit : grammar + a bit of extra info about why I don't want a POJO</p>\n"},{"tags":["java","android","automation","appium-android"],"comments":[{"owner":{"account_id":21375708,"reputation":51,"user_id":15742475,"display_name":"hhhameem"},"score":1,"creation_date":1681025936,"post_id":75968871,"comment_id":133990700,"body_markdown":"can you attach some screenshots of the error this code generates?","body":"can you attach some screenshots of the error this code generates?"},{"owner":{"account_id":26654350,"reputation":1,"user_id":20268119,"display_name":"Prasaanth Sakthivel"},"score":0,"creation_date":1681114988,"post_id":75968871,"comment_id":134000350,"body_markdown":"Here is the screenshort take a look https://imgur.com/9K4cYgN","body":"Here is the screenshort take a look <a href=\"https://imgur.com/9K4cYgN\" rel=\"nofollow noreferrer\">imgur.com/9K4cYgN</a>"}],"answers":[{"tags":[],"owner":{"account_id":20459749,"reputation":33,"user_id":15012652,"display_name":"Arun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681370645,"creation_date":1681370645,"answer_id":76002704,"question_id":75968871,"body_markdown":"Try these capabilities:\r\n\r\n    DesiredCapabilities capabilities = new DesiredCapabilities();\r\n    capabilities.setCapability(MobileCapabilityType.PLATFORM_NAME, &quot;Android&quot;);\r\n    capabilities.setCapability(MobileCapabilityType.PLATFORM_VERSION, &quot;9.0&quot;);\r\n    capabilities.setCapability(MobileCapabilityType.DEVICE_NAME, &quot;OPPO A31&quot;);\r\n    capabilities.setCapability(MobileCapabilityType.AUTOMATION_NAME, &quot;UIAutomator2&quot;);\r\n    capabilities.setCapability(MobileCapabilityType.BROWSER_NAME, &quot;Chrome&quot;)\r\n\r\n","title":"Mobile Automation Testing Problem in OPPO Mobile in Appium","body":"<p>Try these capabilities:</p>\n<pre><code>DesiredCapabilities capabilities = new DesiredCapabilities();\ncapabilities.setCapability(MobileCapabilityType.PLATFORM_NAME, &quot;Android&quot;);\ncapabilities.setCapability(MobileCapabilityType.PLATFORM_VERSION, &quot;9.0&quot;);\ncapabilities.setCapability(MobileCapabilityType.DEVICE_NAME, &quot;OPPO A31&quot;);\ncapabilities.setCapability(MobileCapabilityType.AUTOMATION_NAME, &quot;UIAutomator2&quot;);\ncapabilities.setCapability(MobileCapabilityType.BROWSER_NAME, &quot;Chrome&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26654350,"reputation":1,"user_id":20268119,"display_name":"Prasaanth Sakthivel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682757532,"creation_date":1682757532,"answer_id":76135279,"question_id":75968871,"body_markdown":"The Capabilities cap.setCapability(&quot;noReset&quot;, true); it should be as noreset\r\nthe only the it will skip that and move to automation \r\n\r\n\r\npublic static void main(String[] args) throws MalformedURLException, InterruptedException, AWTException {\r\n\r\n\tDesiredCapabilities cap = new DesiredCapabilities();\r\n\r\n\tcap.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\r\n\tcap.setCapability(&quot;platformVersion&quot;, &quot;9&quot;);\r\n\tcap.setCapability(&quot;noReset&quot;, true);\r\n\tcap.setCapability(&quot;deviceName&quot;, &quot;OPPO A31&quot;);\r\n\tcap.setCapability(&quot;udid&quot;, &quot;EQEMCQ4PHISGJFOB&quot;);\r\n\tcap.setCapability(&quot;appPackage&quot;, &quot;com.android.chrome&quot;);\r\n\tcap.setCapability(&quot;appActivity&quot;, &quot;com.google.android.apps.chrome.Main&quot;);\r\n\tcap.setCapability(&quot;unicodeKeyboard&quot;, true);\r\n\tcap.setCapability(&quot;resetKeyboard&quot;, true);\r\n\r\n\tURL url = new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;);\r\n\tdriver = new AndroidDriver(url, cap);\r\n\r\n\tdriver.findElement(By.id(&quot;com.android.chrome:id/home_button&quot;)).click();\r\n\tThread.sleep(3000);\r\n\tdriver.findElement(By.id(&quot;com.android.chrome:id/search_box_text&quot;)).click();\r\n\tThread.sleep(3000);\r\n\tWebElement srcbar = driver.findElement(By.id(&quot;com.android.chrome:id/url_bar&quot;));\r\n\tsrcbar.sendKeys(&quot;Flipkart &quot;);\r\n\tActions action = new Actions(driver);\r\n\taction.sendKeys(Keys.ENTER).perform();\r\n\tThread.sleep(3000);\r\n\tdriver.findElement(By.xpath(\r\n\t\t\t&quot;//android.view.View[@content-desc=\\&quot;Flipkart https://www.flipkart.com Flipkart\\&quot;]/android.view.View[2]&quot;))\r\n\t\t\t.click();\r\n\tThread.sleep(6000);\r\n\tdriver.findElement(By.xpath(\r\n\t\t\t&quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View[2]/android.view.View[2]/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.TextView&quot;))\r\n\t\t\t.click();\r\n\tThread.sleep(6000);\r\n\tWebElement flpsrc = driver.findElement(By.xpath(\r\n\t\t\t&quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View[1]/android.widget.EditText&quot;));\r\n\tflpsrc.sendKeys(&quot;IPhone&quot;);\r\n\tThread.sleep(3000);\r\n\tActions a = new Actions(driver);\r\n\ta.sendKeys(Keys.ENTER).perform();\r\n}","title":"Mobile Automation Testing Problem in OPPO Mobile in Appium","body":"<p>The Capabilities cap.setCapability(&quot;noReset&quot;, true); it should be as noreset\nthe only the it will skip that and move to automation</p>\n<p>public static void main(String[] args) throws MalformedURLException, InterruptedException, AWTException {</p>\n<pre><code>DesiredCapabilities cap = new DesiredCapabilities();\n\ncap.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\ncap.setCapability(&quot;platformVersion&quot;, &quot;9&quot;);\ncap.setCapability(&quot;noReset&quot;, true);\ncap.setCapability(&quot;deviceName&quot;, &quot;OPPO A31&quot;);\ncap.setCapability(&quot;udid&quot;, &quot;EQEMCQ4PHISGJFOB&quot;);\ncap.setCapability(&quot;appPackage&quot;, &quot;com.android.chrome&quot;);\ncap.setCapability(&quot;appActivity&quot;, &quot;com.google.android.apps.chrome.Main&quot;);\ncap.setCapability(&quot;unicodeKeyboard&quot;, true);\ncap.setCapability(&quot;resetKeyboard&quot;, true);\n\nURL url = new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;);\ndriver = new AndroidDriver(url, cap);\n\ndriver.findElement(By.id(&quot;com.android.chrome:id/home_button&quot;)).click();\nThread.sleep(3000);\ndriver.findElement(By.id(&quot;com.android.chrome:id/search_box_text&quot;)).click();\nThread.sleep(3000);\nWebElement srcbar = driver.findElement(By.id(&quot;com.android.chrome:id/url_bar&quot;));\nsrcbar.sendKeys(&quot;Flipkart &quot;);\nActions action = new Actions(driver);\naction.sendKeys(Keys.ENTER).perform();\nThread.sleep(3000);\ndriver.findElement(By.xpath(\n        &quot;//android.view.View[@content-desc=\\&quot;Flipkart https://www.flipkart.com Flipkart\\&quot;]/android.view.View[2]&quot;))\n        .click();\nThread.sleep(6000);\ndriver.findElement(By.xpath(\n        &quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View[2]/android.view.View[2]/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.TextView&quot;))\n        .click();\nThread.sleep(6000);\nWebElement flpsrc = driver.findElement(By.xpath(\n        &quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View[1]/android.widget.EditText&quot;));\nflpsrc.sendKeys(&quot;IPhone&quot;);\nThread.sleep(3000);\nActions a = new Actions(driver);\na.sendKeys(Keys.ENTER).perform();\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":26654350,"reputation":1,"user_id":20268119,"display_name":"Prasaanth Sakthivel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682757532,"creation_date":1681017056,"question_id":75968871,"body_markdown":"Here is the Code is there any method to run this code:\r\n\r\n    public static void main(String[] args) throws MalformedURLException, InterruptedException, AWTException {\r\n\r\n    \tDesiredCapabilities cap = new DesiredCapabilities();\r\n\r\n\t    cap.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\r\n\t    cap.setCapability(&quot;platformVersion&quot;, &quot;9&quot;);\r\n\t    cap.setCapability(&quot;deviceName&quot;, &quot;OPPO A31&quot;);\r\n\t    cap.setCapability(&quot;udid&quot;, &quot;EQEMCQ4PHISGJFOB&quot;);\r\n\t    cap.setCapability(&quot;appPackage&quot;, &quot;com.android.chrome&quot;);\r\n\t    cap.setCapability(&quot;appActivity&quot;, &quot;com.google.android.apps.chrome.Main&quot;);\r\n\t    cap.setCapability(&quot;unicodeKeyboard&quot;, true);\r\n\t    cap.setCapability(&quot;resetKeyboard&quot;, true);\r\n\r\n\t    URL url = new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;);\r\n\t    driver = new AndroidDriver(url, cap);\r\n\r\n\tdriver.findElement(By.id(&quot;com.android.chrome:id/home_button&quot;)).click();\r\n\t    Thread.sleep(3000);\r\n\tdriver.findElement(By.id(&quot;com.android.chrome:id/search_box_text&quot;)).click();\r\n\tThread.sleep(3000);\r\n\tWebElement srcbar = driver.findElement(By.id(&quot;com.android.chrome:id/url_bar&quot;));\r\n\tsrcbar.sendKeys(&quot;Flipkart &quot;);\r\n\tActions action = new Actions(driver);\r\n\taction.sendKeys(Keys.ENTER).perform();\r\n\tThread.sleep(3000);\r\n\tdriver.findElement(By.xpath(\r\n\t\t\t&quot;//android.view.View[@content-desc=\\&quot;Flipkart https://www.flipkart.com Flipkart\\&quot;]/android.view.View[2]&quot;))\r\n\t\t\t.click();\r\n\tThread.sleep(6000);\r\n\tdriver.findElement(By.xpath(\r\n\t\t\t&quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View[2]/android.view.View[2]/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.TextView&quot;))\r\n\t\t\t.click();\r\n\tThread.sleep(6000);\r\n\tWebElement flpsrc = driver.findElement(By.xpath(\r\n\t\t\t&quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View[1]/android.widget.EditText&quot;));\r\n\tflpsrc.sendKeys(&quot;IPhone&quot;);\r\n\tThread.sleep(3000);\r\n\tActions a = new Actions(driver);\r\n\ta.sendKeys(Keys.ENTER).perform();\r\n    }\r\n\r\nThe DesiredCapabilities are given correctly but the code is not working.","title":"Mobile Automation Testing Problem in OPPO Mobile in Appium","body":"<p>Here is the Code is there any method to run this code:</p>\n<pre><code>public static void main(String[] args) throws MalformedURLException, InterruptedException, AWTException {\n\n    DesiredCapabilities cap = new DesiredCapabilities();\n\n    cap.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\n    cap.setCapability(&quot;platformVersion&quot;, &quot;9&quot;);\n    cap.setCapability(&quot;deviceName&quot;, &quot;OPPO A31&quot;);\n    cap.setCapability(&quot;udid&quot;, &quot;EQEMCQ4PHISGJFOB&quot;);\n    cap.setCapability(&quot;appPackage&quot;, &quot;com.android.chrome&quot;);\n    cap.setCapability(&quot;appActivity&quot;, &quot;com.google.android.apps.chrome.Main&quot;);\n    cap.setCapability(&quot;unicodeKeyboard&quot;, true);\n    cap.setCapability(&quot;resetKeyboard&quot;, true);\n\n    URL url = new URL(&quot;http://0.0.0.0:4723/wd/hub&quot;);\n    driver = new AndroidDriver(url, cap);\n\ndriver.findElement(By.id(&quot;com.android.chrome:id/home_button&quot;)).click();\n    Thread.sleep(3000);\ndriver.findElement(By.id(&quot;com.android.chrome:id/search_box_text&quot;)).click();\nThread.sleep(3000);\nWebElement srcbar = driver.findElement(By.id(&quot;com.android.chrome:id/url_bar&quot;));\nsrcbar.sendKeys(&quot;Flipkart &quot;);\nActions action = new Actions(driver);\naction.sendKeys(Keys.ENTER).perform();\nThread.sleep(3000);\ndriver.findElement(By.xpath(\n        &quot;//android.view.View[@content-desc=\\&quot;Flipkart https://www.flipkart.com Flipkart\\&quot;]/android.view.View[2]&quot;))\n        .click();\nThread.sleep(6000);\ndriver.findElement(By.xpath(\n        &quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View[2]/android.view.View[2]/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.view.View/android.widget.TextView&quot;))\n        .click();\nThread.sleep(6000);\nWebElement flpsrc = driver.findElement(By.xpath(\n        &quot;/hierarchy/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.webkit.WebView/android.view.View/android.view.View/android.view.View/android.view.View[1]/android.widget.EditText&quot;));\nflpsrc.sendKeys(&quot;IPhone&quot;);\nThread.sleep(3000);\nActions a = new Actions(driver);\na.sendKeys(Keys.ENTER).perform();\n}\n</code></pre>\n<p>The DesiredCapabilities are given correctly but the code is not working.</p>\n"},{"tags":["java","spring-boot","stomp","spring-websocket"],"answers":[{"tags":[],"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682757516,"creation_date":1682757516,"answer_id":76135276,"question_id":76134623,"body_markdown":"First you need to define `userDestinationPrefix`:\r\n\r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n    \r\n      @Override\r\n      public void configureMessageBroker(MessageBrokerRegistry config) {\r\n        config.enableSimpleBroker(&quot;/topic&quot;, &quot;/queue&quot;);\r\n        config.setUserDestinationPrefix(&quot;/user&quot;); // DEFINE HERE\r\n        //topic added again to handle SubscribeMapping\r\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;, &quot;/topic&quot;);\r\n      }\r\n    \r\n      @Override\r\n      public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n        registry\r\n            .addEndpoint(&quot;/ws&quot;)\r\n            .setAllowedOriginPatterns(&quot;*&quot;)\r\n            .setHandshakeHandler(new CustomHandshakeHandler())\r\n            .withSockJS();\r\n      }\r\n    }\r\n\r\nCustomHandshakeHandler:\r\n\r\n    public class CustomHandshakeHandler extends DefaultHandshakeHandler {\r\n      // Custom class for storing principal\r\n      @Override\r\n      protected Principal determineUser(\r\n          ServerHttpRequest request,\r\n          WebSocketHandler wsHandler,\r\n          Map&lt;String, Object&gt; attributes\r\n      ) {\r\n        // Generate principal with UUID as name\r\n        return new StompPrincipal(UUID.randomUUID().toString());\r\n      }\r\n    }\r\n\r\n\r\nFinally to send messages to specific user:\r\n\r\n     messagingTemplate.convertAndSendToUser(\r\n                      user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\r\n\r\nFull example of sending message:\r\n\r\n     @MessageMapping(&quot;/game/{room}&quot;)\r\n      public void handleGameUpdates(\r\n          @DestinationVariable String room,\r\n          @Payload GameObjectState gameObjectState,\r\n          Principal principal) {\r\n    \r\n        // Get all the users in the application\r\n        Collection&lt;SimpUser&gt; users = simpUserRegistry.getUsers();\r\n    \r\n        for (SimpUser user : users) {\r\n          for (SimpSession session : user.getSessions()) {\r\n            if (session.getSubscriptions().stream()\r\n                .anyMatch(subscription -&gt; subscription.getDestination().endsWith(room))) {\r\n              // If the user is subscribed to the room, add their userId to the list\r\n              if (!user.getName().equals(principal.getName())) {\r\n                if (gameObjectState.getType().equals(GameObjectType.PLAYER)) {\r\n                  messagingTemplate.convertAndSendToUser(\r\n                      user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\r\n                } else {\r\n                  messagingTemplate.convertAndSendToUser(\r\n                      user.getName(), &quot;/queue/bullet&quot;, new BulletState(gameObjectState));\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\nif you need more check the repo: https://github.com/gurkanucar/websockets/blob/main/stomp%20spring%20boot%20example/socket_detailed/src/main/java/com/gucardev/socket_detailed/config/WebSocketConfig.java","title":"Can&#39;t send direct message to user using Spring Boot Websocket Stomp","body":"<p>First you need to define <code>userDestinationPrefix</code>:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n  @Override\n  public void configureMessageBroker(MessageBrokerRegistry config) {\n    config.enableSimpleBroker(&quot;/topic&quot;, &quot;/queue&quot;);\n    config.setUserDestinationPrefix(&quot;/user&quot;); // DEFINE HERE\n    //topic added again to handle SubscribeMapping\n    config.setApplicationDestinationPrefixes(&quot;/app&quot;, &quot;/topic&quot;);\n  }\n\n  @Override\n  public void registerStompEndpoints(StompEndpointRegistry registry) {\n    registry\n        .addEndpoint(&quot;/ws&quot;)\n        .setAllowedOriginPatterns(&quot;*&quot;)\n        .setHandshakeHandler(new CustomHandshakeHandler())\n        .withSockJS();\n  }\n}\n</code></pre>\n<p>CustomHandshakeHandler:</p>\n<pre><code>public class CustomHandshakeHandler extends DefaultHandshakeHandler {\n  // Custom class for storing principal\n  @Override\n  protected Principal determineUser(\n      ServerHttpRequest request,\n      WebSocketHandler wsHandler,\n      Map&lt;String, Object&gt; attributes\n  ) {\n    // Generate principal with UUID as name\n    return new StompPrincipal(UUID.randomUUID().toString());\n  }\n}\n</code></pre>\n<p>Finally to send messages to specific user:</p>\n<pre><code> messagingTemplate.convertAndSendToUser(\n                  user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\n</code></pre>\n<p>Full example of sending message:</p>\n<pre><code> @MessageMapping(&quot;/game/{room}&quot;)\n  public void handleGameUpdates(\n      @DestinationVariable String room,\n      @Payload GameObjectState gameObjectState,\n      Principal principal) {\n\n    // Get all the users in the application\n    Collection&lt;SimpUser&gt; users = simpUserRegistry.getUsers();\n\n    for (SimpUser user : users) {\n      for (SimpSession session : user.getSessions()) {\n        if (session.getSubscriptions().stream()\n            .anyMatch(subscription -&gt; subscription.getDestination().endsWith(room))) {\n          // If the user is subscribed to the room, add their userId to the list\n          if (!user.getName().equals(principal.getName())) {\n            if (gameObjectState.getType().equals(GameObjectType.PLAYER)) {\n              messagingTemplate.convertAndSendToUser(\n                  user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\n            } else {\n              messagingTemplate.convertAndSendToUser(\n                  user.getName(), &quot;/queue/bullet&quot;, new BulletState(gameObjectState));\n            }\n          }\n        }\n      }\n    }\n  }\n</code></pre>\n<p>if you need more check the repo: <a href=\"https://github.com/gurkanucar/websockets/blob/main/stomp%20spring%20boot%20example/socket_detailed/src/main/java/com/gucardev/socket_detailed/config/WebSocketConfig.java\" rel=\"nofollow noreferrer\">https://github.com/gurkanucar/websockets/blob/main/stomp%20spring%20boot%20example/socket_detailed/src/main/java/com/gucardev/socket_detailed/config/WebSocketConfig.java</a></p>\n"}],"owner":{"account_id":1193165,"reputation":6176,"user_id":1165493,"accept_rate":55,"display_name":"Sandah Aung"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":730,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682757516,"creation_date":1682745292,"question_id":76134623,"body_markdown":"I have a client server application implemented in Spring Boot 3. It uses web socket with stomp to communicate with each other. Currently both the server and client are implemented using different versions of Spring and Spring Boot.\r\n\r\nI was successful with sending messages using a common topic to each other. The messages are encrypted so only the intended client can decrypt it and view it.\r\n\r\nThe application is intended for more complicated purposes but for my purpose let me present it to you as a chat application.\r\n\r\nThis is part of the code which tests the functionality:\r\n\t@Autowired\r\n\tprivate SimpMessagingTemplate simpMessagingTemplate;\r\n\t\r\n\t@Autowired\r\n\tprivate ActiveUserStore activeUserStore;\r\n\t\r\n\t@MessageMapping(&quot;/send&quot;)\r\n\t@SendToUser(&quot;/queue/chat&quot;)\r\n\tpublic void sendToUser(@Payload WsIncomingMessage wsIncomingMessage, Principal user, @Header(&quot;simpSessionId&quot;) String sessionId) {\r\n\t\tlog.info(&quot; /queue/chat &gt; incoming msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\r\n\t\tWsOutgoingMessage wsOutgoingMessage = new WsOutgoingMessage();\r\n\t\twsOutgoingMessage.setMessage(wsIncomingMessage.getMessage());\r\n\t\twsOutgoingMessage.setMessageType(wsIncomingMessage.getMessageType());\r\n\t\twsOutgoingMessage.setSentDatetime(wsIncomingMessage.getSentDatetime());\r\n\t\twsOutgoingMessage.setSource(wsIncomingMessage.getSource());\r\n\t\twsOutgoingMessage.setDestination(wsIncomingMessage.getDestination());\r\n\t\twsIncomingMessage.setAdId(wsIncomingMessage.getAdId());\r\n\t\tlog.info(&quot; /queue/chat &gt; outgoing msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\r\n\t\t\r\n\t\tsimpMessagingTemplate.convertAndSendToUser(activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal(), &quot;/queue/chat&quot;, wsOutgoingMessage);\r\n\t}\r\n\r\nCalling `activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal()` returns a phone number which identifies the user. We think the phone number in full path uniquely identifies the user.\r\n\r\nMy handshaker:\r\n\r\n    @Slf4j\r\n    public class CustomHandshakeHandler extends DefaultHandshakeHandler { \r\n    \r\n    \t\r\n    \t@Override\r\n    \tprotected Principal determineUser(ServerHttpRequest request, WebSocketHandler wsHandler,\r\n    \t\t\tMap&lt;String, Object&gt; attributes) {\r\n    \t\tString uuid = UUID.randomUUID().toString();\r\n    \t\tPrincipal pinciplal = request.getPrincipal();\r\n    \r\n    \t\tif (pinciplal instanceof UsernamePasswordAuthenticationToken) {\r\n    \t\t\tUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = (UsernamePasswordAuthenticationToken) pinciplal;\r\n    \t\t\tObject principalObj = usernamePasswordAuthenticationToken.getPrincipal();\r\n    \t\t\tif (principalObj instanceof JwtUserDetails) {\r\n    \t\t\t\tJwtUserDetails connectingUser = (JwtUserDetails) principalObj;\r\n    \t\t\t\tconnectingUser.setSessionUuid(uuid);\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tlog.info(&quot;principal in CustomHandshakeHandler: {}&quot;, pinciplal);\r\n    \t\treturn pinciplal;\r\n    \t}\r\n    }\r\n\r\nThe string representation of the principal: `UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]]`\r\n\r\n\r\nThe Spring Boot Server is receiving stomp messages. I think it is also returning messages but I don&#39;t know how to log the returned messages:\r\n\r\n\r\n    [boundChannel-13]\u001B[0;39m \u001B[36mc.l.c.f.k.c.controller.ChatController   \u001B[0;39m \u001B[2m:\u001B[0;39m  /queue/chat &gt; incoming msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\r\n    \r\n    [boundChannel-13]\u001B[0;39m \u001B[36mc.l.c.f.k.c.controller.ChatController   \u001B[0;39m \u001B[2m:\u001B[0;39m  /queue/chat &gt; outgoing msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\r\n\r\nThe server is registering subscribe events:\r\n\r\n    event: SessionSubscribeEvent[GenericMessage [payload=byte[0], headers={simpMessageType=SUBSCRIBE, stompCommand=SUBSCRIBE, nativeHeaders={destination=[/user/queue/chat], id=[0]}, simpSessionAttributes={}, simpHeartbeat=[J@197209d9, simpSubscriptionId=0, simpUser=UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], simpSessionId=36d934da-79d7-f00b-6459-331f1cef60ca, simpDestination=/user/queue/chat}]]\r\n\r\nThe client can also see the success of subscription:\r\n\r\n    StompSession.Subscription messageSubscriberSubscription = sessionStomp.get().subscribe(&quot;/user/queue/chat&quot;, messageSubscriber);\r\n    log.info(&quot;messageSubscriberSubscription: {}&quot;, messageSubscriberSubscription);\r\n\r\n    10:39:43.244 [Grizzly(2)] INFO com.lomatechnology.cambodia.fintech.kke.chat.web.ServerCommunication -- messageSubscriberSubscription: Subscription [id=0, destination=&#39;/user/queue/chat&#39;, receiptId=&#39;null&#39;, handler=com.lomatechnology.cambodia.fintech.kke.chat.web.MessageSubscriber@39fe1782]\r\n    10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.util.DatetimeUtil -- Returned date string: 2023-04-29T10:39:49+07:00\r\n    10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.ui.ChatGui -- About to send: WsOutgoingMessage(message=Hi, messageType=text/plain, destination=4, sourceImage=null, sentDatetime=2023-04-29T10:39:49+07:00, source=3, adId=no-ad)\r\n\r\nThe only problem is that the intended client is never receiving messages. Is it the wrong use of principle in `simpMessagingTemplate.convertAndSendToUser` or hace I missed anything?","title":"Can&#39;t send direct message to user using Spring Boot Websocket Stomp","body":"<p>I have a client server application implemented in Spring Boot 3. It uses web socket with stomp to communicate with each other. Currently both the server and client are implemented using different versions of Spring and Spring Boot.</p>\n<p>I was successful with sending messages using a common topic to each other. The messages are encrypted so only the intended client can decrypt it and view it.</p>\n<p>The application is intended for more complicated purposes but for my purpose let me present it to you as a chat application.</p>\n<p>This is part of the code which tests the functionality:\n@Autowired\nprivate SimpMessagingTemplate simpMessagingTemplate;</p>\n<pre><code>@Autowired\nprivate ActiveUserStore activeUserStore;\n\n@MessageMapping(&quot;/send&quot;)\n@SendToUser(&quot;/queue/chat&quot;)\npublic void sendToUser(@Payload WsIncomingMessage wsIncomingMessage, Principal user, @Header(&quot;simpSessionId&quot;) String sessionId) {\n    log.info(&quot; /queue/chat &gt; incoming msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\n    WsOutgoingMessage wsOutgoingMessage = new WsOutgoingMessage();\n    wsOutgoingMessage.setMessage(wsIncomingMessage.getMessage());\n    wsOutgoingMessage.setMessageType(wsIncomingMessage.getMessageType());\n    wsOutgoingMessage.setSentDatetime(wsIncomingMessage.getSentDatetime());\n    wsOutgoingMessage.setSource(wsIncomingMessage.getSource());\n    wsOutgoingMessage.setDestination(wsIncomingMessage.getDestination());\n    wsIncomingMessage.setAdId(wsIncomingMessage.getAdId());\n    log.info(&quot; /queue/chat &gt; outgoing msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\n    \n    simpMessagingTemplate.convertAndSendToUser(activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal(), &quot;/queue/chat&quot;, wsOutgoingMessage);\n}\n</code></pre>\n<p>Calling <code>activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal()</code> returns a phone number which identifies the user. We think the phone number in full path uniquely identifies the user.</p>\n<p>My handshaker:</p>\n<pre><code>@Slf4j\npublic class CustomHandshakeHandler extends DefaultHandshakeHandler { \n\n    \n    @Override\n    protected Principal determineUser(ServerHttpRequest request, WebSocketHandler wsHandler,\n            Map&lt;String, Object&gt; attributes) {\n        String uuid = UUID.randomUUID().toString();\n        Principal pinciplal = request.getPrincipal();\n\n        if (pinciplal instanceof UsernamePasswordAuthenticationToken) {\n            UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = (UsernamePasswordAuthenticationToken) pinciplal;\n            Object principalObj = usernamePasswordAuthenticationToken.getPrincipal();\n            if (principalObj instanceof JwtUserDetails) {\n                JwtUserDetails connectingUser = (JwtUserDetails) principalObj;\n                connectingUser.setSessionUuid(uuid);\n                \n            }\n        }\n        log.info(&quot;principal in CustomHandshakeHandler: {}&quot;, pinciplal);\n        return pinciplal;\n    }\n}\n</code></pre>\n<p>The string representation of the principal: <code>UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]]</code></p>\n<p>The Spring Boot Server is receiving stomp messages. I think it is also returning messages but I don't know how to log the returned messages:</p>\n<pre><code>[boundChannel-13][0;39m [36mc.l.c.f.k.c.controller.ChatController   [0;39m [2m:[0;39m  /queue/chat &gt; incoming msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\n\n[boundChannel-13][0;39m [36mc.l.c.f.k.c.controller.ChatController   [0;39m [2m:[0;39m  /queue/chat &gt; outgoing msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\n</code></pre>\n<p>The server is registering subscribe events:</p>\n<pre><code>event: SessionSubscribeEvent[GenericMessage [payload=byte[0], headers={simpMessageType=SUBSCRIBE, stompCommand=SUBSCRIBE, nativeHeaders={destination=[/user/queue/chat], id=[0]}, simpSessionAttributes={}, simpHeartbeat=[J@197209d9, simpSubscriptionId=0, simpUser=UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], simpSessionId=36d934da-79d7-f00b-6459-331f1cef60ca, simpDestination=/user/queue/chat}]]\n</code></pre>\n<p>The client can also see the success of subscription:</p>\n<pre><code>StompSession.Subscription messageSubscriberSubscription = sessionStomp.get().subscribe(&quot;/user/queue/chat&quot;, messageSubscriber);\nlog.info(&quot;messageSubscriberSubscription: {}&quot;, messageSubscriberSubscription);\n\n10:39:43.244 [Grizzly(2)] INFO com.lomatechnology.cambodia.fintech.kke.chat.web.ServerCommunication -- messageSubscriberSubscription: Subscription [id=0, destination='/user/queue/chat', receiptId='null', handler=com.lomatechnology.cambodia.fintech.kke.chat.web.MessageSubscriber@39fe1782]\n10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.util.DatetimeUtil -- Returned date string: 2023-04-29T10:39:49+07:00\n10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.ui.ChatGui -- About to send: WsOutgoingMessage(message=Hi, messageType=text/plain, destination=4, sourceImage=null, sentDatetime=2023-04-29T10:39:49+07:00, source=3, adId=no-ad)\n</code></pre>\n<p>The only problem is that the intended client is never receiving messages. Is it the wrong use of principle in <code>simpMessagingTemplate.convertAndSendToUser</code> or hace I missed anything?</p>\n"},{"tags":["java","static-methods"],"comments":[{"owner":{"account_id":3851476,"reputation":15138,"user_id":3191557,"accept_rate":100,"display_name":"dhke"},"score":5,"creation_date":1465989382,"post_id":37833827,"comment_id":63128858,"body_markdown":"*Since a static method is executed first when a program is run* &lt;= No, static methods are not magically executed when a program is run and that makes the rest of the question irrelevant. Did you mean static fields? Always try to provide example code with a question like this. Otherwise it leads to guesswork answers.","body":"<i>Since a static method is executed first when a program is run</i> &lt;= No, static methods are not magically executed when a program is run and that makes the rest of the question irrelevant. Did you mean static fields? Always try to provide example code with a question like this. Otherwise it leads to guesswork answers."},{"owner":{"account_id":1506611,"reputation":2200,"user_id":1409849,"accept_rate":83,"display_name":"Bhargav Kumar R"},"score":0,"creation_date":1465991874,"post_id":37833827,"comment_id":63130746,"body_markdown":"Are you speaking about static methods or static blocks?","body":"Are you speaking about static methods or static blocks?"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1465989320,"creation_date":1465989320,"answer_id":37833885,"question_id":37833827,"body_markdown":"The `main` method will be executed first, unless you explicitly execute one of the other static methods in a static initializer block or in the initialization of a static variable.\r\n\r\nFor example, here&#39;s a scenario in which static methods (`method1` and `method2`) are executed before the `main` method :\r\n\r\n    public class SomeClass\r\n    {\r\n        static int v = method2 ();\r\n\r\n        static {\r\n            method1 ();\r\n        }\r\n\r\n        public static void main (String[] args)\r\n        {\r\n\r\n        }\r\n\r\n        public static void method1 ()\r\n        {\r\n\r\n        }\r\n\r\n        public static int method2 ()\r\n        {\r\n            return 5;\r\n        }\r\n\r\n    }","title":"Multiple Static methods","body":"<p>The <code>main</code> method will be executed first, unless you explicitly execute one of the other static methods in a static initializer block or in the initialization of a static variable.</p>\n\n<p>For example, here's a scenario in which static methods (<code>method1</code> and <code>method2</code>) are executed before the <code>main</code> method :</p>\n\n<pre><code>public class SomeClass\n{\n    static int v = method2 ();\n\n    static {\n        method1 ();\n    }\n\n    public static void main (String[] args)\n    {\n\n    }\n\n    public static void method1 ()\n    {\n\n    }\n\n    public static int method2 ()\n    {\n        return 5;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3463355,"reputation":126,"user_id":2899712,"display_name":"Milan Novkovic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465991722,"creation_date":1465991722,"answer_id":37834763,"question_id":37833827,"body_markdown":"Methods you write are, in general, not executed without being called.\r\n\r\nMain you call by executing your program.","title":"Multiple Static methods","body":"<p>Methods you write are, in general, not executed without being called.</p>\n\n<p>Main you call by executing your program.</p>\n"},{"tags":[],"owner":{"account_id":28453134,"reputation":1,"user_id":21770917,"display_name":"user21770917"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682757208,"creation_date":1682757159,"answer_id":76135255,"question_id":37833827,"body_markdown":"It will be always static when it comes to execution \r\nthen it will go for Main method \r\nReason behind is static method it store in memory","title":"Multiple Static methods","body":"<p>It will be always static when it comes to execution\nthen it will go for Main method\nReason behind is static method it store in memory</p>\n"}],"owner":{"display_name":"user5860349"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1777,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"accepted_answer_id":37833885,"answer_count":3,"score":-2,"last_activity_date":1682757208,"creation_date":1465989203,"question_id":37833827,"body_markdown":"I have declared three static methods in my java program, apart from the main()\r\n\r\nmethod. Since a static method is executed first when a program is run, which\r\n\r\nmethod will be executed first? Will it be one of the static methods that I have\r\n\r\ndeclared, or will it be the main method?","title":"Multiple Static methods","body":"<p>I have declared three static methods in my java program, apart from the main()</p>\n\n<p>method. Since a static method is executed first when a program is run, which</p>\n\n<p>method will be executed first? Will it be one of the static methods that I have</p>\n\n<p>declared, or will it be the main method?</p>\n"},{"tags":["java","android","calendarview"],"answers":[{"tags":[],"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682757159,"creation_date":1682757159,"answer_id":76135256,"question_id":76134503,"body_markdown":"In order to store something so that you can retrieve later, you can consider using [```SharedPreferences```](https://www.geeksforgeeks.org/shared-preferences-in-android-with-examples/).\r\n\r\nFirst, you can have a simple SharedPreferencesUtil class as follow:\r\n```java\r\npublic class SharedPreferencesUtil {\r\n    // You can define a key here\r\n    public static final String KEY_DATE = &quot;KEY_DATE&quot;;\r\n\r\n    public static boolean setLocalDate(Context context, String key, LocalDate value) {\r\n        SharedPreferences sp = context.getPreferences(Context.MODE_PRIVATE);\r\n        Editor editor = sp.edit();\r\n        // You can convert your LocalDate to Long and store into SharedPreferences\r\n        return editor.putLong(key, value.toEpochDay()).commit();\r\n    }\r\n\r\n    public static LocalDate getLocalDate(Context context, String key) {\r\n        SharedPreferences sp = context.getPreferences(Context.MODE_PRIVATE);\r\n        Long numberOfDays = sp.getLong(key, -1);\r\n        if (numberOfDays == -1)\r\n            return null;\r\n        return LocalDate.ofEpochDay(numberOfDays);\r\n    }\r\n}\r\n```\r\n\r\nThen you can easily update and retrieve the value in your Activity like this:\r\n```java\r\n// Store the LocalDate for later retrieval\r\nSharedPreferencesUtil.setLocalDate(getActivity(), SharedPreferencesUtil.KEY_DATE, LocalDate that you want to store);\r\n\r\n// Retrieve the previous stored LocalDate\r\nLocalDate storedDate = SharedPreferencesUtil.getLocalDate(getActivity(), SharedPreferencesUtil.KEY_DATE);\r\nif (storedDate == null) {\r\n    // You have not saved LocalDate yet\r\n} else {\r\n    // You should be able to retrieve the previous stored LocalDate\r\n}\r\n```","title":"Retaining selection for CalendarView","body":"<p>In order to store something so that you can retrieve later, you can consider using <a href=\"https://www.geeksforgeeks.org/shared-preferences-in-android-with-examples/\" rel=\"nofollow noreferrer\"><code>SharedPreferences</code></a>.</p>\n<p>First, you can have a simple SharedPreferencesUtil class as follow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SharedPreferencesUtil {\n    // You can define a key here\n    public static final String KEY_DATE = &quot;KEY_DATE&quot;;\n\n    public static boolean setLocalDate(Context context, String key, LocalDate value) {\n        SharedPreferences sp = context.getPreferences(Context.MODE_PRIVATE);\n        Editor editor = sp.edit();\n        // You can convert your LocalDate to Long and store into SharedPreferences\n        return editor.putLong(key, value.toEpochDay()).commit();\n    }\n\n    public static LocalDate getLocalDate(Context context, String key) {\n        SharedPreferences sp = context.getPreferences(Context.MODE_PRIVATE);\n        Long numberOfDays = sp.getLong(key, -1);\n        if (numberOfDays == -1)\n            return null;\n        return LocalDate.ofEpochDay(numberOfDays);\n    }\n}\n</code></pre>\n<p>Then you can easily update and retrieve the value in your Activity like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Store the LocalDate for later retrieval\nSharedPreferencesUtil.setLocalDate(getActivity(), SharedPreferencesUtil.KEY_DATE, LocalDate that you want to store);\n\n// Retrieve the previous stored LocalDate\nLocalDate storedDate = SharedPreferencesUtil.getLocalDate(getActivity(), SharedPreferencesUtil.KEY_DATE);\nif (storedDate == null) {\n    // You have not saved LocalDate yet\n} else {\n    // You should be able to retrieve the previous stored LocalDate\n}\n</code></pre>\n"}],"owner":{"account_id":5222764,"reputation":49,"user_id":4175703,"display_name":"Jeremy Vidaurri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76135256,"answer_count":1,"score":1,"last_activity_date":1682757159,"creation_date":1682741899,"question_id":76134503,"body_markdown":"I am utilizing [this library](https://github.com/kizitonwose/Calendar/blob/main/docs/View.md) to set up a custom calendar but it appears that on each date click, currentSelection gets set to null. I have the following daybinder set.\r\n```java\r\ncalendarView.setDayBinder(new MonthDayBinder&lt;DayViewContainer&gt;() {\r\n            // Called only when a new container is needed.\r\n            @NonNull\r\n            @Override\r\n            public DayViewContainer create(@NonNull View view) {\r\n                return new DayViewContainer(view);\r\n            }\r\n\r\n            // Called every time we need to reuse a container.\r\n            @RequiresApi(api = Build.VERSION_CODES.O)\r\n            @Override\r\n            public void bind(@NonNull DayViewContainer container, CalendarDay data) {\r\n                container.day = data;\r\n                CalendarDay day = data;\r\n                selectedDate = container.selectedDate;\r\n                container.calendarView = calendarView;\r\n                Log.d(TAG, &quot;bind: &quot;+ container.day);\r\n                TextView textView = container.textView;\r\n                textView.setText(String.valueOf(data.getDate().getDayOfMonth()));\r\n\r\n                if (day.getPosition() == DayPosition.MonthDate) {\r\n\r\n                    textView.setVisibility(View.VISIBLE);\r\n                    LocalDate date = day.getDate();\r\n                    // If user selects same date, clear highlight\r\n                    if (date.equals(selectedDate)) {\r\n                        // New date was selected.\r\n                        textView.setTextColor(Color.WHITE);\r\n                        textView.setBackgroundColor(Color.rgb(98,0,238));\r\n                    } else {\r\n                        textView.setVisibility(View.VISIBLE);\r\n                        textView.setTextColor(Color.BLACK);\r\n                        textView.setBackgroundColor(Color.TRANSPARENT);\r\n\r\n                    }\r\n                } else {\r\n                    textView.setVisibility(View.INVISIBLE);\r\n                }\r\n            }\r\n        });\r\n\r\n        calendarView.setMonthHeaderBinder(new MonthHeaderFooterBinder&lt;MonthViewContainer&gt;() {\r\n            @NonNull\r\n            @Override\r\n            public MonthViewContainer create(@NonNull View view) {\r\n                return new MonthViewContainer(view);\r\n            }\r\n\r\n            @Override\r\n            public void bind(@NonNull MonthViewContainer container, @NonNull CalendarMonth data) {\r\n                if (container.getTitlesContainer().getTag() == null) {\r\n                    container.getTitlesContainer().setTag(data.getYearMonth());\r\n\r\n                    TextView textView = container.getTitlesContainer();\r\n                    String title = String.valueOf(data.getYearMonth());\r\n                    textView.setText(title);\r\n                }\r\n            }\r\n            });\r\n```\r\n \r\nand the related DayViewContainer class:\r\n```java\r\npublic class DayViewContainer extends ViewContainer {\r\n\r\n    public TextView textView;\r\n    @SuppressLint(&quot;NewApi&quot;)\r\n    public CalendarDay day;\r\n    public LocalDate selectedDate;\r\n    public LocalDate currentSelection;\r\n    public CalendarView calendarView;\r\n\r\n    public DayViewContainer(View view) {\r\n\r\n        super(view);\r\n        textView = view.findViewById(R.id.calendarDayText);\r\n        // With ViewBinding\r\n        CalendarDayLayoutBinding binding = CalendarDayLayoutBinding.bind(view);\r\n        textView = binding.calendarDayText;\r\n\r\n\r\n        textView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                if (day.getPosition() == DayPosition.MonthDate) {\r\n                    currentSelection = selectedDate;\r\n                    Log.d(TAG, &quot;onClick: Clicked inDate&quot;);\r\n                    // If user selects same date, clear eventContainer\r\n                    if (currentSelection != null &amp;&amp; currentSelection.equals(day.getDate())) {\r\n                        selectedDate = null;\r\n                        textView.post(() -&gt; calendarView.notifyDateChanged(currentSelection));\r\n                        Log.d(TAG, &quot;onClick: Clicked the same date that was selected&quot;);\r\n                    } else {\r\n\r\n                        selectedDate = day.getDate();\r\n\r\n                        if (currentSelection != null){\r\n                            textView.post(() -&gt; calendarView.notifyDateChanged(currentSelection));\r\n                            Log.d(TAG, &quot;onClick: Updating old date&quot;);\r\n                        }\r\n                        textView.post(() -&gt; calendarView.notifyDateChanged(selectedDate));\r\n                        Log.d(TAG, &quot;onClick: Updating new date&quot;);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nIf I&#39;m understanding correctly, each date has its own dayviewcontainer which has selectedDate. I believe storing it in my activity would probably resolve this issue but I am unsure how to do so.\r\n","title":"Retaining selection for CalendarView","body":"<p>I am utilizing <a href=\"https://github.com/kizitonwose/Calendar/blob/main/docs/View.md\" rel=\"nofollow noreferrer\">this library</a> to set up a custom calendar but it appears that on each date click, currentSelection gets set to null. I have the following daybinder set.</p>\n<pre class=\"lang-java prettyprint-override\"><code>calendarView.setDayBinder(new MonthDayBinder&lt;DayViewContainer&gt;() {\n            // Called only when a new container is needed.\n            @NonNull\n            @Override\n            public DayViewContainer create(@NonNull View view) {\n                return new DayViewContainer(view);\n            }\n\n            // Called every time we need to reuse a container.\n            @RequiresApi(api = Build.VERSION_CODES.O)\n            @Override\n            public void bind(@NonNull DayViewContainer container, CalendarDay data) {\n                container.day = data;\n                CalendarDay day = data;\n                selectedDate = container.selectedDate;\n                container.calendarView = calendarView;\n                Log.d(TAG, &quot;bind: &quot;+ container.day);\n                TextView textView = container.textView;\n                textView.setText(String.valueOf(data.getDate().getDayOfMonth()));\n\n                if (day.getPosition() == DayPosition.MonthDate) {\n\n                    textView.setVisibility(View.VISIBLE);\n                    LocalDate date = day.getDate();\n                    // If user selects same date, clear highlight\n                    if (date.equals(selectedDate)) {\n                        // New date was selected.\n                        textView.setTextColor(Color.WHITE);\n                        textView.setBackgroundColor(Color.rgb(98,0,238));\n                    } else {\n                        textView.setVisibility(View.VISIBLE);\n                        textView.setTextColor(Color.BLACK);\n                        textView.setBackgroundColor(Color.TRANSPARENT);\n\n                    }\n                } else {\n                    textView.setVisibility(View.INVISIBLE);\n                }\n            }\n        });\n\n        calendarView.setMonthHeaderBinder(new MonthHeaderFooterBinder&lt;MonthViewContainer&gt;() {\n            @NonNull\n            @Override\n            public MonthViewContainer create(@NonNull View view) {\n                return new MonthViewContainer(view);\n            }\n\n            @Override\n            public void bind(@NonNull MonthViewContainer container, @NonNull CalendarMonth data) {\n                if (container.getTitlesContainer().getTag() == null) {\n                    container.getTitlesContainer().setTag(data.getYearMonth());\n\n                    TextView textView = container.getTitlesContainer();\n                    String title = String.valueOf(data.getYearMonth());\n                    textView.setText(title);\n                }\n            }\n            });\n</code></pre>\n<p>and the related DayViewContainer class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DayViewContainer extends ViewContainer {\n\n    public TextView textView;\n    @SuppressLint(&quot;NewApi&quot;)\n    public CalendarDay day;\n    public LocalDate selectedDate;\n    public LocalDate currentSelection;\n    public CalendarView calendarView;\n\n    public DayViewContainer(View view) {\n\n        super(view);\n        textView = view.findViewById(R.id.calendarDayText);\n        // With ViewBinding\n        CalendarDayLayoutBinding binding = CalendarDayLayoutBinding.bind(view);\n        textView = binding.calendarDayText;\n\n\n        textView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                if (day.getPosition() == DayPosition.MonthDate) {\n                    currentSelection = selectedDate;\n                    Log.d(TAG, &quot;onClick: Clicked inDate&quot;);\n                    // If user selects same date, clear eventContainer\n                    if (currentSelection != null &amp;&amp; currentSelection.equals(day.getDate())) {\n                        selectedDate = null;\n                        textView.post(() -&gt; calendarView.notifyDateChanged(currentSelection));\n                        Log.d(TAG, &quot;onClick: Clicked the same date that was selected&quot;);\n                    } else {\n\n                        selectedDate = day.getDate();\n\n                        if (currentSelection != null){\n                            textView.post(() -&gt; calendarView.notifyDateChanged(currentSelection));\n                            Log.d(TAG, &quot;onClick: Updating old date&quot;);\n                        }\n                        textView.post(() -&gt; calendarView.notifyDateChanged(selectedDate));\n                        Log.d(TAG, &quot;onClick: Updating new date&quot;);\n                    }\n                }\n            }\n        });\n    }\n}\n</code></pre>\n<p>If I'm understanding correctly, each date has its own dayviewcontainer which has selectedDate. I believe storing it in my activity would probably resolve this issue but I am unsure how to do so.</p>\n"},{"tags":["java","reactjs","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682756982,"creation_date":1682756982,"answer_id":76135246,"question_id":76134313,"body_markdown":"You have to make cors configuration in backend side:\r\n\r\n    @Configuration\r\n    public class WebConfig{\r\n         @Bean\r\n          public WebMvcConfigurer corsConfigurer() {\r\n            return new WebMvcConfigurer() {\r\n              @Override\r\n              public void addCorsMappings(CorsRegistry registry) {\r\n                registry.addMapping(&quot;/**&quot;).allowedMethods(&quot;*&quot;);\r\n              }\r\n            };\r\n          }\r\n    }","title":"No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. (ReactJS + Spring Boot App)","body":"<p>You have to make cors configuration in backend side:</p>\n<pre><code>@Configuration\npublic class WebConfig{\n     @Bean\n      public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n          @Override\n          public void addCorsMappings(CorsRegistry registry) {\n            registry.addMapping(&quot;/**&quot;).allowedMethods(&quot;*&quot;);\n          }\n        };\n      }\n}\n</code></pre>\n"}],"owner":{"account_id":13970331,"reputation":11,"user_id":10089101,"display_name":"adesh landge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682756982,"creation_date":1682736564,"question_id":76134313,"body_markdown":"I&#39;m using ReactJS for the front end and Spring boot for the backend. \r\nWhenever, I invoke this API: \r\n`http://localhost:8080/api/v1/admin/member/checkIn?gymId=1&amp;email=xyz@gmail.com`, I am getting: **No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.**\r\n\r\nHere&#39;s my ReactJS code that makes the API call:\r\n\r\n```js\r\nexport const checkInMembers = (gymId, email) =&gt; {\r\n    const adminData = JSON.parse(window.sessionStorage.getItem(&quot;USER_DETAILS&quot;));\r\n    \r\n    return axios.post(&#39;http://localhost:8080/api/v1/admin/member/checkIn&#39;, { gymId, email }, {\r\n        headers: {\r\n            &#39;Authorization&#39;: `Bearer ${adminData.token}`,\r\n        },\r\n    });\r\n}\r\n```\r\n\r\nHere&#39;s my Spring Boot code:\r\n\r\n```java\r\npackage com.CMPE202.healthclub.controller;\r\n\r\nimport com.CMPE202.healthclub.entity.user.User;\r\nimport com.CMPE202.healthclub.entity.user.UserGymVisit;\r\nimport com.CMPE202.healthclub.exceptions.BadServerException;\r\nimport com.CMPE202.healthclub.exceptions.InvalidOperationException;\r\nimport com.CMPE202.healthclub.exceptions.RecordNotFoundException;\r\nimport com.CMPE202.healthclub.model.UserDetailsResponse;\r\nimport com.CMPE202.healthclub.service.AdminService;\r\nimport jakarta.annotation.security.RolesAllowed;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.validation.annotation.Validated;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/admin&quot;)\r\n@RequiredArgsConstructor\r\n@CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)\r\n@RolesAllowed(&quot;STAFF&quot;)\r\n@Validated\r\npublic class AdminController {\r\n    private final AdminService adminService;\r\n    @GetMapping({&quot;/member&quot;})\r\n    public UserDetailsResponse getUserDetailsFromEmail(@RequestParam String email) throws RecordNotFoundException {\r\n        return adminService.getUserDetailsFromEmail(email);\r\n    }\r\n    @PostMapping({&quot;/member/checkIn&quot;})\r\n    public UserGymVisit checkInUserToGym(@RequestParam(required = true) Long gymId,\r\n                                         @RequestParam(required = true) String email) throws RecordNotFoundException, InvalidOperationException, BadServerException {\r\n        return adminService.checkInUsers(gymId, email);\r\n    }\r\n    @PutMapping({&quot;/member/checkOut&quot;})\r\n    public UserGymVisit checkOutUserToGym(@RequestParam(required = true) Long userGymVisitId) throws InvalidOperationException {\r\n        return adminService.checkOutUsers(userGymVisitId);\r\n    }\r\n    @GetMapping({&quot;/member/currentCheckedInList&quot;})\r\n    public List&lt;UserDetailsResponse&gt; getAllCurrentCheckedInUsers(@RequestParam(required = true) Long gymId){\r\n        return adminService.getAllCurrentCheckedInUsers(gymId);\r\n    }\r\n}\r\n```\r\n\r\nI even tried doing this. Still doesn&#39;t work!\r\n\r\n```js\r\nexport const checkInMembers = (gymId, email) =&gt; {\r\n    const adminData = JSON.parse(window.sessionStorage.getItem(&quot;USER_DETAILS&quot;));\r\n    const corsOptions = {\r\n        origin: &#39;http://localhost:8080&#39;, // specify the URL of your server\r\n    };\r\n\r\n    const axiosInstance = axios.create();\r\n    axiosInstance.interceptors.request.use(cors(corsOptions));\r\n    return axiosInstance.post(&#39;http://localhost:8080/api/v1/admin/member/checkIn&#39;, { gymId, email }, {\r\n        headers: {\r\n            &#39;Authorization&#39;: `Bearer ${adminData.token}`,\r\n            &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,\r\n            &#39;Access-Control-Allow-Headers&#39;: &#39;*&#39;\r\n        },\r\n        mode: &#39;cors&#39;,\r\n        credentials: &#39;include&#39;\r\n    });\r\n}\r\n```","title":"No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. (ReactJS + Spring Boot App)","body":"<p>I'm using ReactJS for the front end and Spring boot for the backend.\nWhenever, I invoke this API:\n<code>http://localhost:8080/api/v1/admin/member/checkIn?gymId=1&amp;email=xyz@gmail.com</code>, I am getting: <strong>No 'Access-Control-Allow-Origin' header is present on the requested resource.</strong></p>\n<p>Here's my ReactJS code that makes the API call:</p>\n<pre class=\"lang-js prettyprint-override\"><code>export const checkInMembers = (gymId, email) =&gt; {\n    const adminData = JSON.parse(window.sessionStorage.getItem(&quot;USER_DETAILS&quot;));\n    \n    return axios.post('http://localhost:8080/api/v1/admin/member/checkIn', { gymId, email }, {\n        headers: {\n            'Authorization': `Bearer ${adminData.token}`,\n        },\n    });\n}\n</code></pre>\n<p>Here's my Spring Boot code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.CMPE202.healthclub.controller;\n\nimport com.CMPE202.healthclub.entity.user.User;\nimport com.CMPE202.healthclub.entity.user.UserGymVisit;\nimport com.CMPE202.healthclub.exceptions.BadServerException;\nimport com.CMPE202.healthclub.exceptions.InvalidOperationException;\nimport com.CMPE202.healthclub.exceptions.RecordNotFoundException;\nimport com.CMPE202.healthclub.model.UserDetailsResponse;\nimport com.CMPE202.healthclub.service.AdminService;\nimport jakarta.annotation.security.RolesAllowed;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.Optional;\n\n@RestController\n@RequestMapping(&quot;/api/v1/admin&quot;)\n@RequiredArgsConstructor\n@CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)\n@RolesAllowed(&quot;STAFF&quot;)\n@Validated\npublic class AdminController {\n    private final AdminService adminService;\n    @GetMapping({&quot;/member&quot;})\n    public UserDetailsResponse getUserDetailsFromEmail(@RequestParam String email) throws RecordNotFoundException {\n        return adminService.getUserDetailsFromEmail(email);\n    }\n    @PostMapping({&quot;/member/checkIn&quot;})\n    public UserGymVisit checkInUserToGym(@RequestParam(required = true) Long gymId,\n                                         @RequestParam(required = true) String email) throws RecordNotFoundException, InvalidOperationException, BadServerException {\n        return adminService.checkInUsers(gymId, email);\n    }\n    @PutMapping({&quot;/member/checkOut&quot;})\n    public UserGymVisit checkOutUserToGym(@RequestParam(required = true) Long userGymVisitId) throws InvalidOperationException {\n        return adminService.checkOutUsers(userGymVisitId);\n    }\n    @GetMapping({&quot;/member/currentCheckedInList&quot;})\n    public List&lt;UserDetailsResponse&gt; getAllCurrentCheckedInUsers(@RequestParam(required = true) Long gymId){\n        return adminService.getAllCurrentCheckedInUsers(gymId);\n    }\n}\n</code></pre>\n<p>I even tried doing this. Still doesn't work!</p>\n<pre class=\"lang-js prettyprint-override\"><code>export const checkInMembers = (gymId, email) =&gt; {\n    const adminData = JSON.parse(window.sessionStorage.getItem(&quot;USER_DETAILS&quot;));\n    const corsOptions = {\n        origin: 'http://localhost:8080', // specify the URL of your server\n    };\n\n    const axiosInstance = axios.create();\n    axiosInstance.interceptors.request.use(cors(corsOptions));\n    return axiosInstance.post('http://localhost:8080/api/v1/admin/member/checkIn', { gymId, email }, {\n        headers: {\n            'Authorization': `Bearer ${adminData.token}`,\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': '*'\n        },\n        mode: 'cors',\n        credentials: 'include'\n    });\n}\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1682732079,"post_id":76134135,"comment_id":134266607,"body_markdown":"In Java/Swing - you can&#39;t ... or not from a &quot;natively generated&quot; window decoration.  You &quot;could&quot; make a look and feel delegate which did the same job, but you quickly lose cross platform conformance.  You could also &quot;roll your own&quot; by making the window undecorated and apply your own &quot;fake&quot; window decoration, but it&#39;s much in the same as crafting your own look and feel delegate - some problems and issues","body":"In Java/Swing - you can&#39;t ... or not from a &quot;natively generated&quot; window decoration.  You &quot;could&quot; make a look and feel delegate which did the same job, but you quickly lose cross platform conformance.  You could also &quot;roll your own&quot; by making the window undecorated and apply your own &quot;fake&quot; window decoration, but it&#39;s much in the same as crafting your own look and feel delegate - some problems and issues"},{"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1682732889,"post_id":76134135,"comment_id":134266660,"body_markdown":"Is cross-platform compatibility necessary for your project?","body":"Is cross-platform compatibility necessary for your project?"},{"owner":{"account_id":14851115,"reputation":546,"user_id":10725037,"display_name":"Natasha"},"score":0,"creation_date":1682733115,"post_id":76134135,"comment_id":134266679,"body_markdown":"Cross-platform compatibility is important, yes.","body":"Cross-platform compatibility is important, yes."},{"owner":{"account_id":14851115,"reputation":546,"user_id":10725037,"display_name":"Natasha"},"score":0,"creation_date":1682735261,"post_id":76134135,"comment_id":134266802,"body_markdown":"@MadProgrammer Would you mind copying your above comment as an answer to get the well earned reputation points?","body":"@MadProgrammer Would you mind copying your above comment as an answer to get the well earned reputation points?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1682747118,"post_id":76134135,"comment_id":134267526,"body_markdown":"(BTW you can set Swing to ignore that button: [`setDefaultCloseOperation()`](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JFrame.html#setDefaultCloseOperation(int)))","body":"(BTW you can set Swing to ignore that button: <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JFrame.html#setDefaultCloseOperation(int)\" rel=\"nofollow noreferrer\"><code>setDefaultCloseOperation()</code></a>)"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682756182,"creation_date":1682736247,"answer_id":76134307,"question_id":76134135,"body_markdown":"In Java/Swing - you can&#39;t ... or not from a &quot;natively generated&quot; window decoration. \r\n\r\nYou &quot;could&quot; make a look and feel delegate which did the same job, but you quickly lose cross platform conformance. \r\n\r\nYou could also &quot;roll your own&quot; by making the window undecorated and apply your own &quot;fake&quot; window decoration, but it&#39;s much in the same as crafting your own look and feel delegate - same problems and issues \r\n\r\nTake a look at [Customizing the Title bar of an Application Window](https://medium.com/swlh/customizing-the-title-bar-of-an-application-window-50a4ac3ed27e) for some &quot;inspiration&quot;.\r\n\r\nThis also suggestions making use of JNI/JNA, which further complicates the issues.\r\n\r\nYou might also like to have a look at [this example](https://stackoverflow.com/questions/16869877/how-to-remove-window-box-from-any-java-gui/16869893#16869893), it demonstrates how you can move an undecorated window, resizing is simular, but a adds and additional level of complexity.","title":"How to remove the close button of a JFrame decoration in Java Swing?","body":"<p>In Java/Swing - you can't ... or not from a &quot;natively generated&quot; window decoration.</p>\n<p>You &quot;could&quot; make a look and feel delegate which did the same job, but you quickly lose cross platform conformance.</p>\n<p>You could also &quot;roll your own&quot; by making the window undecorated and apply your own &quot;fake&quot; window decoration, but it's much in the same as crafting your own look and feel delegate - same problems and issues</p>\n<p>Take a look at <a href=\"https://medium.com/swlh/customizing-the-title-bar-of-an-application-window-50a4ac3ed27e\" rel=\"nofollow noreferrer\">Customizing the Title bar of an Application Window</a> for some &quot;inspiration&quot;.</p>\n<p>This also suggestions making use of JNI/JNA, which further complicates the issues.</p>\n<p>You might also like to have a look at <a href=\"https://stackoverflow.com/questions/16869877/how-to-remove-window-box-from-any-java-gui/16869893#16869893\">this example</a>, it demonstrates how you can move an undecorated window, resizing is simular, but a adds and additional level of complexity.</p>\n"}],"owner":{"account_id":14851115,"reputation":546,"user_id":10725037,"display_name":"Natasha"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76134307,"answer_count":1,"score":1,"last_activity_date":1682756182,"creation_date":1682731830,"question_id":76134135,"body_markdown":"How can I remove the close button of a JFrame in Swing while the min/max buttons and the rest of the frame decoration shall still be available? TYVMIA","title":"How to remove the close button of a JFrame decoration in Java Swing?","body":"<p>How can I remove the close button of a JFrame in Swing while the min/max buttons and the rest of the frame decoration shall still be available? TYVMIA</p>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1509127127,"post_id":46980899,"comment_id":80909303,"body_markdown":"When you say &quot;authenticated&quot;, what does that mean exactly? Spring Security doesn&#39;t know about your user, so it&#39;s not authenticated *to it*. Perhaps you are looking for either SAML or OAuth with tokens granted by a centralized company server.","body":"When you say &quot;authenticated&quot;, what does that mean exactly? Spring Security doesn&#39;t know about your user, so it&#39;s not authenticated <i>to it</i>. Perhaps you are looking for either SAML or OAuth with tokens granted by a centralized company server."},{"owner":{"account_id":6755124,"reputation":587,"user_id":5203849,"accept_rate":73,"display_name":"ds390s"},"score":0,"creation_date":1509128721,"post_id":46980899,"comment_id":80910044,"body_markdown":"When I say that the user is &quot;authenticated,&quot; I mean that my filter will be able to tell, based on an item in the request, whether the user has gone to the central authentication system and had their credentials validated. I can&#39;t talk about it more specifically, for security reasons. I want Spring Security to perform only authorization, and not authentication.","body":"When I say that the user is &quot;authenticated,&quot; I mean that my filter will be able to tell, based on an item in the request, whether the user has gone to the central authentication system and had their credentials validated. I can&#39;t talk about it more specifically, for security reasons. I want Spring Security to perform only authorization, and not authentication."},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1509133539,"post_id":46980899,"comment_id":80912167,"body_markdown":"You *have* to authenticate to Spring Security. That authentication can take the form of an assertion from your SSO system, but it has to be passed over somehow. It looks like SAML is probably the best approach.","body":"You <i>have</i> to authenticate to Spring Security. That authentication can take the form of an assertion from your SSO system, but it has to be passed over somehow. It looks like SAML is probably the best approach."}],"owner":{"account_id":6755124,"reputation":587,"user_id":5203849,"accept_rate":73,"display_name":"ds390s"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682755724,"creation_date":1509126871,"question_id":46980899,"body_markdown":"I would like to use Spring Security&#39;s `@PreAuthorize(&quot;hasAnyRole(&#39;ADMIN&#39;)&quot;)` annotations to secure my API, however, I must use my company&#39;s centralized authentication system, instead of having the user log in through Spring-Security.\r\n\r\nTo be very clear on what that means:\r\n\r\n - My app may not ask the user for a password\r\n - The user will already be authenticated before getting anywhere near my app. If they aren&#39;t, I am just redirecting back to the central authentication server.\r\n\r\nWhat I do have access to is a mapping of users to roles, so I&#39;ve implemented a custom `UserDetailsService` based on [this tutorial][1].\r\n\r\n    @Service\r\n    public class CustomUserDetailsService implements UserDetailsService {\r\n    \r\n        @Autowired\r\n        private UsersRepository usersRepository;\r\n    \r\n        @Override\r\n        public UserDetails loadUserByUsername(final String username) throws UsernameNotFoundException {\r\n            Optional&lt;Users&gt; optionalUsers = usersRepository.findByUserId(username);\r\n    \r\n            optionalUsers\r\n                    .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found&quot;));\r\n            return optionalUsers\r\n                    .map(CustomUserDetails::new).get();\r\n        }\r\n    }\r\n\r\nAnd inject it into Spring Security in a configuration file:\r\n\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    @EnableWebSecurity\r\n    @EnableJpaRepositories(basePackageClasses = UsersRepository.class)\r\n    @Configuration\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \r\n    \t@Autowired\r\n    \tprivate CustomUserDetailsService userDetailsService;\r\n    \r\n    \t@Override\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \r\n    \t\tauth.userDetailsService(userDetailsService);\r\n    \r\n            http.addFilterAt(\r\n                new TrivialFilter(), BasicAuthenticationFilter.class);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \r\n    \t\thttp.authorizeRequests().antMatchers(&quot;**/secured/**&quot;).authenticated().anyRequest().permitAll().and().formLogin()\r\n    \t\t\t\t.permitAll();\r\n    \t}\r\n    \r\n    }\r\n\r\nThis works very well. It is successfully evaluating the user roles and allowing/denying access based on the `@PreAuthorize` annotation. I&#39;ve even added a filter to the Servlet filter chain which I can eventually use to verify authentication myself. (Right now it just logs and calls `chain.doFilter(req, res)`.)\r\n\r\nSo how do I stop Spring-Security from asking for a password, while keeping this other good stuff intact?\r\n\r\nIt seems, if I remove any part of the `HttpSecurity.authorizeRequests()` method chain, that, while it might disable the login screen, it will, for any method with the `@PreAuthorize` annotation, just assume an unauthorized user. The request doesn&#39;t access the `CustomUserDetailsService` class. (Though it does still pass through the `TrivialFilter` class.) It just responds with a 403 code. \r\n\r\nI can have my filter extract the username from the request and and validate it. I just need to know how to completely replace the basic username/password system, with my filter.\r\n\r\n  [1]: https://github.com/TechPrimers/spring-security-db-example","title":"Spring Security Role Based Authorization with Independent Authentication System","body":"<p>I would like to use Spring Security's <code>@PreAuthorize(&quot;hasAnyRole('ADMIN')&quot;)</code> annotations to secure my API, however, I must use my company's centralized authentication system, instead of having the user log in through Spring-Security.</p>\n<p>To be very clear on what that means:</p>\n<ul>\n<li>My app may not ask the user for a password</li>\n<li>The user will already be authenticated before getting anywhere near my app. If they aren't, I am just redirecting back to the central authentication server.</li>\n</ul>\n<p>What I do have access to is a mapping of users to roles, so I've implemented a custom <code>UserDetailsService</code> based on <a href=\"https://github.com/TechPrimers/spring-security-db-example\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n<pre><code>@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n\n    @Autowired\n    private UsersRepository usersRepository;\n\n    @Override\n    public UserDetails loadUserByUsername(final String username) throws UsernameNotFoundException {\n        Optional&lt;Users&gt; optionalUsers = usersRepository.findByUserId(username);\n\n        optionalUsers\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found&quot;));\n        return optionalUsers\n                .map(CustomUserDetails::new).get();\n    }\n}\n</code></pre>\n<p>And inject it into Spring Security in a configuration file:</p>\n<pre><code>@EnableGlobalMethodSecurity(prePostEnabled = true)\n@EnableWebSecurity\n@EnableJpaRepositories(basePackageClasses = UsersRepository.class)\n@Configuration\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private CustomUserDetailsService userDetailsService;\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n\n        auth.userDetailsService(userDetailsService);\n\n        http.addFilterAt(\n            new TrivialFilter(), BasicAuthenticationFilter.class);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http.authorizeRequests().antMatchers(&quot;**/secured/**&quot;).authenticated().anyRequest().permitAll().and().formLogin()\n                .permitAll();\n    }\n\n}\n</code></pre>\n<p>This works very well. It is successfully evaluating the user roles and allowing/denying access based on the <code>@PreAuthorize</code> annotation. I've even added a filter to the Servlet filter chain which I can eventually use to verify authentication myself. (Right now it just logs and calls <code>chain.doFilter(req, res)</code>.)</p>\n<p>So how do I stop Spring-Security from asking for a password, while keeping this other good stuff intact?</p>\n<p>It seems, if I remove any part of the <code>HttpSecurity.authorizeRequests()</code> method chain, that, while it might disable the login screen, it will, for any method with the <code>@PreAuthorize</code> annotation, just assume an unauthorized user. The request doesn't access the <code>CustomUserDetailsService</code> class. (Though it does still pass through the <code>TrivialFilter</code> class.) It just responds with a 403 code.</p>\n<p>I can have my filter extract the username from the request and and validate it. I just need to know how to completely replace the basic username/password system, with my filter.</p>\n"},{"tags":["java","android","html",".net","xml"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681830141,"post_id":76046115,"comment_id":134118184,"body_markdown":"It is pretty unclear what you want. You can use Socket.connect(). And then the rest. What is the problem?","body":"It is pretty unclear what you want. You can use Socket.connect(). And then the rest. What is the problem?"},{"owner":{"account_id":28337183,"reputation":1,"user_id":21670757,"display_name":"onele"},"score":0,"creation_date":1681838887,"post_id":76046115,"comment_id":134120362,"body_markdown":"@blackapps, thank you sir for the reply. I know all about the Socket parameters and how to define them including connect.  What I really want to know is how to link or interface the Socket class file to the app and make the app use it like an attached module or sort - how do i combine them e.g Socket + web browser or Facebook etc?  What is the standard procedure?","body":"@blackapps, thank you sir for the reply. I know all about the Socket parameters and how to define them including connect.  What I really want to know is how to link or interface the Socket class file to the app and make the app use it like an attached module or sort - how do i combine them e.g Socket + web browser or Facebook etc?  What is the standard procedure?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1681849931,"post_id":76046115,"comment_id":134122731,"body_markdown":"Si you want a browser like Chrome let use your socket stuff?","body":"Si you want a browser like Chrome let use your socket stuff?"},{"owner":{"account_id":28337183,"reputation":1,"user_id":21670757,"display_name":"onele"},"score":0,"creation_date":1682116747,"post_id":76046115,"comment_id":134170572,"body_markdown":"@blackapps. yes sir","body":"@blackapps. yes sir"}],"owner":{"account_id":28337183,"reputation":1,"user_id":21670757,"display_name":"onele"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682755663,"creation_date":1681829772,"question_id":76046115,"body_markdown":"I developed a custom Socket class from a separate package in the core java package library using eclipse IDE, it contains Socket and SocketImpl classes. I want networking apps to default to them for internet.\r\n\r\nI do have some experience in coding and unpacking and packing android apps.\r\n\r\nso, how do i do it?\r\n\r\nafter searching online, i tried opening up some android browsers, facebook, whatsapp, gmail, etc looking for  main activity java sources to see if i need to import my classes but it was so difficult, i couldnt tell which class was right for importing or even if i&#39;m using the correct procedure. i thought this would be straightforward but its complicated.","title":"how does an android application (e.g web browser, facebook, whatsapp, gmail, video player url streaming e.tc) access a java.net.socket for internet?","body":"<p>I developed a custom Socket class from a separate package in the core java package library using eclipse IDE, it contains Socket and SocketImpl classes. I want networking apps to default to them for internet.</p>\n<p>I do have some experience in coding and unpacking and packing android apps.</p>\n<p>so, how do i do it?</p>\n<p>after searching online, i tried opening up some android browsers, facebook, whatsapp, gmail, etc looking for  main activity java sources to see if i need to import my classes but it was so difficult, i couldnt tell which class was right for importing or even if i'm using the correct procedure. i thought this would be straightforward but its complicated.</p>\n"},{"tags":["java","ubuntu","automation","apt"],"comments":[{"owner":{"account_id":1546181,"reputation":10588,"user_id":1439688,"display_name":"zakinster"},"score":0,"creation_date":1381410140,"post_id":19275856,"comment_id":28574647,"body_markdown":"Since you&#39;re asking about the usage of the *Ubuntu/Debian* package manager, your question would better fit on [*Ask Ubuntu*](http://askubuntu.com/about) or [*Unix &amp; Linux Stack Exchange*](http://unix.stackexchange.com/).","body":"Since you&#39;re asking about the usage of the <i>Ubuntu/Debian</i> package manager, your question would better fit on <a href=\"http://askubuntu.com/about\"><i>Ask Ubuntu</i></a> or <a href=\"http://unix.stackexchange.com/\"><i>Unix &amp; Linux Stack Exchange</i></a>."},{"owner":{"account_id":481416,"reputation":355314,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"score":0,"creation_date":1422223541,"post_id":19275856,"comment_id":44655757,"body_markdown":"On askubuntu: http://askubuntu.com/questions/190582/installing-java-automatically-with-silent-option","body":"On askubuntu: <a href=\"http://askubuntu.com/questions/190582/installing-java-automatically-with-silent-option\" title=\"installing java automatically with silent option\">askubuntu.com/questions/190582/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":99792,"reputation":11836,"user_id":269377,"accept_rate":86,"display_name":"Maxym"},"down_vote_count":0,"up_vote_count":111,"is_accepted":true,"score":111,"last_activity_date":1381871073,"creation_date":1381871073,"answer_id":19391042,"question_id":19275856,"body_markdown":"try this out:\r\n\r\n    sudo add-apt-repository -y ppa:webupd8team/java\r\n    sudo apt-get update\r\n    echo debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections\r\n    echo debconf shared/accepted-oracle-license-v1-1 seen true | sudo debconf-set-selections\r\n    sudo apt-get -y install oracle-java7-installer \r\n\r\nrunning 3rd and 4th command on my debian 7.1 helps, so I think the same can help on ubuntu as well","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>try this out:</p>\n\n<pre><code>sudo add-apt-repository -y ppa:webupd8team/java\nsudo apt-get update\necho debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections\necho debconf shared/accepted-oracle-license-v1-1 seen true | sudo debconf-set-selections\nsudo apt-get -y install oracle-java7-installer \n</code></pre>\n\n<p>running 3rd and 4th command on my debian 7.1 helps, so I think the same can help on ubuntu as well</p>\n"},{"tags":[],"owner":{"account_id":2555978,"reputation":1482,"user_id":2217962,"display_name":"schrom"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1498124686,"creation_date":1414424458,"answer_id":26591300,"question_id":19275856,"body_markdown":"If you are using Ansible for automation you may want to put this into your playbook:\r\n\r\n    tasks:\r\n\r\n      - name: add java PPA\r\n        apt_repository:\r\n          repo: &quot;ppa:webupd8team/java&quot;\r\n\r\n      - name: accept oracle license\r\n        debconf:\r\n          name: &quot;oracle-java7-installer&quot;\r\n          question: &quot;shared/accepted-oracle-license-v1-1&quot;\r\n          value: &quot;true&quot;\r\n          vtype: &quot;select&quot;\r\n\r\n      - name: install jdk\r\n        apt:\r\n          name: &quot;oracle-java7-installer&quot;\r\n\r\n**Note:** The `value` argument in `debconf` must be set to `&quot;true&quot;`, including the quotes, as per [comment][1] by [Roy Wood][2].\r\n\r\n[1]: https://stackoverflow.com/questions/19275856/auto-yes-to-the-license-agreement-on-sudo-apt-get-y-install-oracle-java7-instal#comment75583581_26591300\r\n[2]: https://stackoverflow.com/users/5888928/roy-wood\r\n","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>If you are using Ansible for automation you may want to put this into your playbook:</p>\n\n<pre><code>tasks:\n\n  - name: add java PPA\n    apt_repository:\n      repo: \"ppa:webupd8team/java\"\n\n  - name: accept oracle license\n    debconf:\n      name: \"oracle-java7-installer\"\n      question: \"shared/accepted-oracle-license-v1-1\"\n      value: \"true\"\n      vtype: \"select\"\n\n  - name: install jdk\n    apt:\n      name: \"oracle-java7-installer\"\n</code></pre>\n\n<p><strong>Note:</strong> The <code>value</code> argument in <code>debconf</code> must be set to <code>\"true\"</code>, including the quotes, as per <a href=\"https://stackoverflow.com/questions/19275856/auto-yes-to-the-license-agreement-on-sudo-apt-get-y-install-oracle-java7-instal#comment75583581_26591300\">comment</a> by <a href=\"https://stackoverflow.com/users/5888928/roy-wood\">Roy Wood</a>.</p>\n"},{"tags":[],"owner":{"account_id":446439,"reputation":2037,"user_id":2956829,"accept_rate":93,"display_name":"el n00b"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1549163157,"creation_date":1549163157,"answer_id":54499612,"question_id":19275856,"body_markdown":"**ppa:linuxuprising/java &amp;&amp; oracle-java11-installer**\r\n\r\nFor anyone using the Linux Uprising Java 11 installer that stumble across this, see these:\r\n\r\n 1. https://launchpad.net/~linuxuprising/+archive/ubuntu/java\r\n 2. https://www.linuxuprising.com/2018/10/how-to-install-oracle-java-11-in-ubuntu.html\r\n\r\nInstead of the commands in the answer (as listed on their site), you want this:\r\n\r\n    echo oracle-java11-installer shared/accepted-oracle-license-v1-2 select true | \\\r\n    sudo /usr/bin/debconf-set-selections\r\n\r\nHere&#39;s my Docker setup for an Ubuntu 18.04-based container:\r\n\r\n    RUN apt-get update &amp;&amp; apt-install -y software-properties-common &amp;&amp; \\\r\n        add-apt-repository -y ppa:linuxuprising/java &amp;&amp; \\\r\n        apt-get update &amp;&amp; \\\r\n        echo oracle-java11-installer shared/accepted-oracle-license-v1-2 select true | sudo /usr/bin/debconf-set-selections &amp;&amp; \\\r\n        apt-get install -y oracle-java11-installer &amp;&amp; \\\r\n        apt install oracle-java11-set-default","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p><strong>ppa:linuxuprising/java &amp;&amp; oracle-java11-installer</strong></p>\n\n<p>For anyone using the Linux Uprising Java 11 installer that stumble across this, see these:</p>\n\n<ol>\n<li><a href=\"https://launchpad.net/~linuxuprising/+archive/ubuntu/java\" rel=\"noreferrer\">https://launchpad.net/~linuxuprising/+archive/ubuntu/java</a></li>\n<li><a href=\"https://www.linuxuprising.com/2018/10/how-to-install-oracle-java-11-in-ubuntu.html\" rel=\"noreferrer\">https://www.linuxuprising.com/2018/10/how-to-install-oracle-java-11-in-ubuntu.html</a></li>\n</ol>\n\n<p>Instead of the commands in the answer (as listed on their site), you want this:</p>\n\n<pre><code>echo oracle-java11-installer shared/accepted-oracle-license-v1-2 select true | \\\nsudo /usr/bin/debconf-set-selections\n</code></pre>\n\n<p>Here's my Docker setup for an Ubuntu 18.04-based container:</p>\n\n<pre><code>RUN apt-get update &amp;&amp; apt-install -y software-properties-common &amp;&amp; \\\n    add-apt-repository -y ppa:linuxuprising/java &amp;&amp; \\\n    apt-get update &amp;&amp; \\\n    echo oracle-java11-installer shared/accepted-oracle-license-v1-2 select true | sudo /usr/bin/debconf-set-selections &amp;&amp; \\\n    apt-get install -y oracle-java11-installer &amp;&amp; \\\n    apt install oracle-java11-set-default\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6417120,"reputation":31,"user_id":4974955,"display_name":"KireByte"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1556046241,"creation_date":1556045871,"answer_id":55817745,"question_id":19275856,"body_markdown":"For Java 11 you can use this:\r\n\r\n    add-apt-repository ppa:linuxuprising/java\r\n    echo debconf shared/accepted-oracle-license-v1-2 select true | debconf-set-selections\r\n    echo debconf shared/accepted-oracle-license-v1-2 seen true | debconf-set-selections\r\n    apt-get update &amp;&amp; apt-get install -y oracle-java11-installer\r\n\r\nThis works perfectly in a docker container.","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>For Java 11 you can use this:</p>\n\n<pre><code>add-apt-repository ppa:linuxuprising/java\necho debconf shared/accepted-oracle-license-v1-2 select true | debconf-set-selections\necho debconf shared/accepted-oracle-license-v1-2 seen true | debconf-set-selections\napt-get update &amp;&amp; apt-get install -y oracle-java11-installer\n</code></pre>\n\n<p>This works perfectly in a docker container.</p>\n"},{"tags":[],"owner":{"account_id":1587080,"reputation":3848,"user_id":2600196,"accept_rate":100,"display_name":"kakabali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682755593,"creation_date":1682755593,"answer_id":76135166,"question_id":19275856,"body_markdown":"Just like other answers, following works for the JDK 17\r\n\r\n**accepted-oracle-license-v1-3** - in specific\r\n\r\n    echo oracle-java17-installer shared/accepted-oracle-license-v1-3 select true | sudo /usr/bin/debconf-set-selections","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>Just like other answers, following works for the JDK 17</p>\n<p><strong>accepted-oracle-license-v1-3</strong> - in specific</p>\n<pre><code>echo oracle-java17-installer shared/accepted-oracle-license-v1-3 select true | sudo /usr/bin/debconf-set-selections\n</code></pre>\n"}],"owner":{"account_id":1245688,"reputation":872,"user_id":1207202,"accept_rate":75,"display_name":"kojiwell"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29993,"favorite_count":0,"down_vote_count":0,"up_vote_count":53,"closed_date":1682853107,"accepted_answer_id":19391042,"answer_count":5,"score":53,"last_activity_date":1682755614,"creation_date":1381331341,"question_id":19275856,"body_markdown":"The Oracle Java package for Ubuntu interactively asks about the License Agreement. So I have to say &#39;OK&#39; and then &#39;yes&#39; every time, but I&#39;d like to automate it. What I do is this:\r\n\r\n    sudo add-apt-repository -y ppa:webupd8team/java\r\n    sudo apt-get update\r\n    sudo apt-get -y install oracle-java7-installer \r\n\r\nIs there a simple way to automate the agreement process without using expect?","title":"Auto yes to the License Agreement on sudo apt-get -y install oracle-java7-installer","body":"<p>The Oracle Java package for Ubuntu interactively asks about the License Agreement. So I have to say 'OK' and then 'yes' every time, but I'd like to automate it. What I do is this:</p>\n\n<pre><code>sudo add-apt-repository -y ppa:webupd8team/java\nsudo apt-get update\nsudo apt-get -y install oracle-java7-installer \n</code></pre>\n\n<p>Is there a simple way to automate the agreement process without using expect?</p>\n"},{"tags":["java","debugging"],"comments":[{"owner":{"account_id":1697551,"reputation":770,"user_id":1558609,"accept_rate":83,"display_name":"chris.tian"},"score":1,"creation_date":1392145414,"post_id":21710655,"comment_id":32828191,"body_markdown":"@ceving: This is no duplicate of the posted question. Here he can still start the application in debug mode.","body":"@ceving: This is no duplicate of the posted question. Here he can still start the application in debug mode."},{"owner":{"account_id":173557,"reputation":22258,"user_id":402322,"accept_rate":67,"display_name":"ceving"},"score":0,"creation_date":1392145535,"post_id":21710655,"comment_id":32828262,"body_markdown":"@chris.tian But the answers explain how to attach to a running process which is the problem in this question.","body":"@chris.tian But the answers explain how to attach to a running process which is the problem in this question."},{"owner":{"account_id":164442,"reputation":10993,"user_id":387184,"accept_rate":97,"display_name":"user387184"},"score":0,"creation_date":1392145977,"post_id":21710655,"comment_id":32828511,"body_markdown":"I can&#39;t start it in debug mode? how? I can just start the PC application like any other one. Or what do you mean?","body":"I can&#39;t start it in debug mode? how? I can just start the PC application like any other one. Or what do you mean?"}],"answers":[{"tags":[],"owner":{"account_id":1697551,"reputation":770,"user_id":1558609,"accept_rate":83,"display_name":"chris.tian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1392145254,"creation_date":1392145254,"answer_id":21710728,"question_id":21710655,"body_markdown":"You could decompile the jar files with JAD (http://varaneckas.com/jad/), import the project into Eclipse and debug from there (see http://www.vogella.com/tutorials/EclipseDebugging/article.html). Is this what you are looking for?","title":"How to attach to a running jar and debug it?","body":"<p>You could decompile the jar files with JAD (<a href=\"http://varaneckas.com/jad/\" rel=\"nofollow\">http://varaneckas.com/jad/</a>), import the project into Eclipse and debug from there (see <a href=\"http://www.vogella.com/tutorials/EclipseDebugging/article.html\" rel=\"nofollow\">http://www.vogella.com/tutorials/EclipseDebugging/article.html</a>). Is this what you are looking for?</p>\n"}],"owner":{"account_id":164442,"reputation":10993,"user_id":387184,"accept_rate":97,"display_name":"user387184"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1987,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1392176375,"accepted_answer_id":21710728,"answer_count":1,"score":1,"last_activity_date":1682755415,"creation_date":1392145011,"question_id":21710655,"body_markdown":"I have written an old app long time ago on another computer. This one does not exist any more - and with it all the source is gone - but I still have the app in form of jar files.\r\n\r\nNow I need to check my old code what I have done in a particular place in code. I know I can create a Java from it - but I need to check it while it&#39;s running...\r\n\r\nI have tried javasnoop - but it can not attach. It keeps trying but forever - other apps I can attach to and debug.\r\n\r\nis there any other way/tool that can attach to a running jar and debug it?\r\n\r\nIf that makes a difference: the application is being started with an EXE file and then uses the jar libs...\r\n","title":"How to attach to a running jar and debug it?","body":"<p>I have written an old app long time ago on another computer. This one does not exist any more - and with it all the source is gone - but I still have the app in form of jar files.</p>\n<p>Now I need to check my old code what I have done in a particular place in code. I know I can create a Java from it - but I need to check it while it's running...</p>\n<p>I have tried javasnoop - but it can not attach. It keeps trying but forever - other apps I can attach to and debug.</p>\n<p>is there any other way/tool that can attach to a running jar and debug it?</p>\n<p>If that makes a difference: the application is being started with an EXE file and then uses the jar libs...</p>\n"},{"tags":["java","hibernate","spring-boot","gradle","liquibase"],"answers":[{"tags":[],"owner":{"account_id":1262727,"reputation":10432,"user_id":1220627,"accept_rate":76,"display_name":"Sn&#230;bj&#248;rn"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1538055240,"creation_date":1538055240,"answer_id":52538298,"question_id":52517215,"body_markdown":"Turns out I needed to add some undocumented magic sauce.\r\n\r\n    diff.dependsOn compileJava\r\n    diffChangeLog.dependsOn compileJava\r\n    generateChangelog.dependsOn compileJava\r\n    \r\n    dependencies {\r\n       // as before\r\n       liquibaseRuntime sourceSets.main.output // replaces liquibaseRuntime files(&#39;src/main&#39;)\r\n    }","title":"Setup LiquiBase in a Gradle Spring Boot Hibernate project","body":"<p>Turns out I needed to add some undocumented magic sauce.</p>\n\n<pre><code>diff.dependsOn compileJava\ndiffChangeLog.dependsOn compileJava\ngenerateChangelog.dependsOn compileJava\n\ndependencies {\n   // as before\n   liquibaseRuntime sourceSets.main.output // replaces liquibaseRuntime files('src/main')\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12525083,"reputation":143,"user_id":9115193,"display_name":"Steve Saliman"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1582467968,"creation_date":1582467968,"answer_id":60363182,"question_id":52517215,"body_markdown":"I know this is an old thread, but I wanted to add some clarification for those who find this answer later...\r\n\r\nThe `liquibaseRuntime` configuration does not inherit from any other configuration.  This is because in most cases, Liquibase only needs to be able to parse the change logs and connect to the database.  To use something like the Hibernate module, or to generate change logs from your code, you need to add extra things to the liquibaseRuntime, such as Hibernate or Spring Data, and you&#39;d need `srcSets.main.output` to be able to find your project files themselves.\r\n\r\nThe comment that said &quot;All of your normal project dependencies would be here in addition to...&quot; referred to the fact that you would have a bunch of other dependencies in the block to build and run your project, not that they would be part of the `liquibaseRuntime` configuration.  If you do want all of the libraries from your project to also be part of the `liquibaseRuntime`, you can add `configurations.liquibaseRuntime.extendsFrom configurations.runtime` you your build.gradle, or if you already have a `configurations` block, you can add `liquibaseRuntime.extendsFrom runtime` to that block.  This should add all the project dependencies, and the project files themselves, to your liquibaseRuntime.\r\n\r\nI hope this helps.","title":"Setup LiquiBase in a Gradle Spring Boot Hibernate project","body":"<p>I know this is an old thread, but I wanted to add some clarification for those who find this answer later...</p>\n\n<p>The <code>liquibaseRuntime</code> configuration does not inherit from any other configuration.  This is because in most cases, Liquibase only needs to be able to parse the change logs and connect to the database.  To use something like the Hibernate module, or to generate change logs from your code, you need to add extra things to the liquibaseRuntime, such as Hibernate or Spring Data, and you'd need <code>srcSets.main.output</code> to be able to find your project files themselves.</p>\n\n<p>The comment that said \"All of your normal project dependencies would be here in addition to...\" referred to the fact that you would have a bunch of other dependencies in the block to build and run your project, not that they would be part of the <code>liquibaseRuntime</code> configuration.  If you do want all of the libraries from your project to also be part of the <code>liquibaseRuntime</code>, you can add <code>configurations.liquibaseRuntime.extendsFrom configurations.runtime</code> you your build.gradle, or if you already have a <code>configurations</code> block, you can add <code>liquibaseRuntime.extendsFrom runtime</code> to that block.  This should add all the project dependencies, and the project files themselves, to your liquibaseRuntime.</p>\n\n<p>I hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634131970,"creation_date":1634131970,"answer_id":69556518,"question_id":52517215,"body_markdown":"This is how it worked for me with Gradle 6.3.0:\r\n\r\n    configurations {\r\n        liquibaseRuntime.extendsFrom runtimeClasspath\r\n    }\r\n    dependencies {\r\n        liquibaseRuntime sourceSets.main.output\r\n    }","title":"Setup LiquiBase in a Gradle Spring Boot Hibernate project","body":"<p>This is how it worked for me with Gradle 6.3.0:</p>\n<pre><code>configurations {\n    liquibaseRuntime.extendsFrom runtimeClasspath\n}\ndependencies {\n    liquibaseRuntime sourceSets.main.output\n}\n</code></pre>\n"}],"owner":{"account_id":1262727,"reputation":10432,"user_id":1220627,"accept_rate":76,"display_name":"Sn&#230;bj&#248;rn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16078,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":52538298,"answer_count":3,"score":10,"last_activity_date":1682755089,"creation_date":1537963041,"question_id":52517215,"body_markdown":"I&#39;m having a hard time setting up LiquiBase in my Spring Boot project. I tried looking through the docs and finding some guides - but they seem contradict each other.\r\n\r\nI wish to use LiquiBase via Gradle and I want it to generate the changelogs from Hibernate and end up with a SQL script I can run on the server to update the schema to the appropriate version.\r\n\r\nTo get it to run via Gradle I&#39;m using this plugin  https://github.com/liquibase/liquibase-gradle-plugin using the recommended setup shown in their README.\r\n\r\nTo get the Hibernate diff to work I&#39;m using https://github.com/liquibase/liquibase-hibernate\r\n\r\nHere&#39;s my **build.gradle** file:\r\n\r\n    buildscript {\r\n    \text {\r\n    \t\tspringBootVersion = &#39;2.0.5.RELEASE&#39;\r\n    \t}\r\n    \trepositories {\r\n    \t\tmavenCentral()\r\n    \t}\r\n    \tdependencies {\r\n    \t\tclasspath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n    \t}\r\n    }\r\n    \r\n    plugins {\r\n    \tid &#39;java&#39;\r\n    \tid &#39;net.ltgt.apt&#39; version &#39;0.10&#39; // https://projectlombok.org/setup/gradle\r\n    \tid &#39;org.liquibase.gradle&#39; version &#39;2.0.1&#39; // https://github.com/liquibase/liquibase-gradle-plugin\r\n    }\r\n    \r\n    apply plugin: &#39;eclipse-wtp&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    apply plugin: &#39;io.spring.dependency-management&#39;\r\n    apply plugin: &#39;war&#39;\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = 1.8\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    \r\n        maven {\r\n            credentials {\r\n                username = oracleUser\r\n                password = oraclePass\r\n            }\r\n            url &#39;https://www.oracle.com/content/secure/maven/content&#39;\r\n        }\r\n    }\r\n    \r\n    liquibase {\r\n      activities {\r\n        main {\r\n          changeLogFile &#39;main.groovy&#39;\r\n          url &#39;jdbc:oracle:thin:@localhost:1521:XE&#39;\r\n          referenceUrl &#39;hibernate:spring:com.example?dialect=org.hibernate.dialect.Oracle10gDialect&#39;\r\n          username &#39;user&#39;\r\n          password &#39;pass&#39;\r\n        }\r\n      }\r\n    }\r\n    \r\n    configurations {\r\n    \tprovidedRuntime\r\n    }\r\n    \r\n    dependencies {\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-data-rest&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-hateoas&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-jooq&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-mail&#39;)\r\n    \tcompile(&#39;com.github.waffle:waffle-spring-boot-starter:1.9.0&#39;)\r\n    \tcompile(&#39;com.oracle.jdbc:ojdbc8:12.2.0.1&#39;)\r\n    \truntime(&#39;org.springframework.boot:spring-boot-devtools&#39;)\r\n    \tcompileOnly(&#39;org.projectlombok:lombok&#39;)\r\n    \tapt(&#39;org.projectlombok:lombok:1.18.2&#39;)\r\n    \tliquibaseRuntime(&#39;org.liquibase:liquibase-core:3.6.2&#39;)\r\n    \tliquibaseRuntime(&#39;org.liquibase:liquibase-groovy-dsl:2.0.1&#39;)\r\n    \tliquibaseRuntime(&#39;org.liquibase.ext:liquibase-hibernate5:3.6&#39;)\r\n    \tliquibaseRuntime(&#39;com.oracle.jdbc:ojdbc8:12.2.0.1&#39;) // duplicate...\r\n    \tprovidedRuntime(&#39;org.springframework.boot:spring-boot-starter-tomcat&#39;)\r\n    \ttestCompile(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    \ttestCompile(&#39;org.springframework.restdocs:spring-restdocs-mockmvc&#39;)\r\n    }\r\n\r\nRunning it via\r\n\r\n    &gt; .\\gradlew diffChangeLog -PrunList=main\r\n\r\nBut fails with\r\n\r\n&gt; Task :diffChangeLog liquibase-plugin: Running the &#39;main&#39; activity... Starting Liquibase at Wed, 26 Sep 2018 13:36:24 CEST (version 3.6.2\r\n&gt; built at 2018-07-03 11:28:09) Exception in thread &quot;main&quot;\r\n&gt; java.lang.NoClassDefFoundError:\r\n&gt; org/springframework/core/io/ClassPathResource\r\n&gt;         at liquibase.ext.hibernate.database.HibernateSpringPackageDatabase.isXmlFile(HibernateSpringPackageDatabase.java:54)\r\n\r\nIt looks like it cannot find Spring Boot. So I then tried removing the `liquibaseRuntime` but then the LiquiBase Gradle plugin complains that `liquibaseRuntime` is missing.\r\n\r\nSeems I&#39;m stuck in a loop. What is a sane way of setting this up?\r\nI really don&#39;t want to repeat every dependency inside the `liquibaseRuntime`. Also the doc literally says:\r\n\r\n&gt;     dependencies {\r\n&gt;       // All of your normal project dependencies would be here in addition to...\r\n&gt;       liquibaseRuntime &#39;org.liquibase:liquibase-core:3.6.1&#39;\r\n&gt;       liquibaseRuntime &#39;org.liquibase:liquibase-groovy-dsl:2.0.1&#39;\r\n&gt;       liquibaseRuntime &#39;mysql:mysql-connector-java:5.1.34&#39;\r\n&gt;     }\r\n\r\nNote the \r\n\r\n&gt; // All of your normal project dependencies would be here in addition to...\r\n\r\nWhy is this happening?\r\n\r\n\r\nAlso, I noticed that you have to write database config twice. Why is that needed when it&#39;s already set in spring boot config?\r\n\r\n----------\r\n\r\nProgress\r\n---\r\n\r\nSo changing `liquibaseRuntime` to\r\n\r\n    liquibaseRuntime(&#39;org.liquibase:liquibase-core:3.6.2&#39;)\r\n    liquibaseRuntime(&#39;org.liquibase:liquibase-groovy-dsl:2.0.1&#39;)\r\n    liquibaseRuntime(&#39;org.liquibase.ext:liquibase-hibernate5:3.6&#39;)\r\n    liquibaseRuntime(&#39;com.oracle.jdbc:ojdbc8:12.2.0.1&#39;)\r\n    liquibaseRuntime(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n    liquibaseRuntime files(&#39;src/main&#39;)\r\n\r\nMakes the errors go away. But it still doesn&#39;t work.\r\n\r\nRunning this command:\r\n\r\n    .\\gradlew diff\r\n\r\nGives me this output:\r\n\r\n    &gt; Task :diff\r\n    liquibase-plugin: Running the &#39;main&#39; activity...\r\n    Starting Liquibase at Wed, 26 Sep 2018 16:47:19 CEST (version 3.6.2 built at 2018-07-03 11:28:09)\r\n    \r\n    Diff Results:\r\n    Reference Database: null @ hibernate:spring:com.example.model?dialect=org.hibernate.dialect.Oracle10gDialect (Default Schema: HIBERNATE)\r\n    Comparison Database: SYSTEM @ jdbc:oracle:thin:@localhost:1521:XE (Default Schema: SYSTEM)\r\n    Compared Schemas: HIBERNATE -&gt; SYSTEM\r\n    Product Name:\r\n         Reference:   &#39;Hibernate&#39;\r\n         Target: &#39;Oracle&#39;\r\n    Product Version:\r\n         Reference:   &#39;5.2.17.Final&#39;\r\n         Target: &#39;Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production&#39;\r\n    Missing Catalog(s):\r\n         HIBERNATE\r\n    Unexpected Catalog(s): NONE\r\n    Changed Catalog(s): NONE\r\n    Missing Column(s): NONE\r\n    Unexpected Column(s): NONE\r\n    Changed Column(s): NONE\r\n    Missing Foreign Key(s): NONE\r\n    Unexpected Foreign Key(s): NONE\r\n    Changed Foreign Key(s): NONE\r\n    Missing Index(s): NONE\r\n    Unexpected Index(s): NONE\r\n    Changed Index(s): NONE\r\n    Missing Primary Key(s): NONE\r\n    Unexpected Primary Key(s): NONE\r\n    Changed Primary Key(s): NONE\r\n    Missing Sequence(s): NONE\r\n    Unexpected Sequence(s): NONE\r\n    Changed Sequence(s): NONE\r\n    Missing Stored Procedure(s): NONE\r\n    Unexpected Stored Procedure(s): NONE\r\n    Changed Stored Procedure(s): NONE\r\n    Missing Table(s): NONE\r\n    Unexpected Table(s): NONE\r\n    Changed Table(s): NONE\r\n    Missing Unique Constraint(s): NONE\r\n    Unexpected Unique Constraint(s): NONE\r\n    Changed Unique Constraint(s): NONE\r\n    Missing View(s): NONE\r\n    Unexpected View(s): NONE\r\n    Changed View(s): NONE\r\n    Liquibase command &#39;diff&#39; was executed successfully.\r\n    \r\n    \r\n    BUILD SUCCESSFUL in 7s\r\n    1 actionable task: 1 executed\r\n\r\nWhen running against an empty database.\r\n","title":"Setup LiquiBase in a Gradle Spring Boot Hibernate project","body":"<p>I'm having a hard time setting up LiquiBase in my Spring Boot project. I tried looking through the docs and finding some guides - but they seem contradict each other.</p>\n<p>I wish to use LiquiBase via Gradle and I want it to generate the changelogs from Hibernate and end up with a SQL script I can run on the server to update the schema to the appropriate version.</p>\n<p>To get it to run via Gradle I'm using this plugin  <a href=\"https://github.com/liquibase/liquibase-gradle-plugin\" rel=\"nofollow noreferrer\">https://github.com/liquibase/liquibase-gradle-plugin</a> using the recommended setup shown in their README.</p>\n<p>To get the Hibernate diff to work I'm using <a href=\"https://github.com/liquibase/liquibase-hibernate\" rel=\"nofollow noreferrer\">https://github.com/liquibase/liquibase-hibernate</a></p>\n<p>Here's my <strong>build.gradle</strong> file:</p>\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '2.0.5.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\n    }\n}\n\nplugins {\n    id 'java'\n    id 'net.ltgt.apt' version '0.10' // https://projectlombok.org/setup/gradle\n    id 'org.liquibase.gradle' version '2.0.1' // https://github.com/liquibase/liquibase-gradle-plugin\n}\n\napply plugin: 'eclipse-wtp'\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\napply plugin: 'war'\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n\n    maven {\n        credentials {\n            username = oracleUser\n            password = oraclePass\n        }\n        url 'https://www.oracle.com/content/secure/maven/content'\n    }\n}\n\nliquibase {\n  activities {\n    main {\n      changeLogFile 'main.groovy'\n      url 'jdbc:oracle:thin:@localhost:1521:XE'\n      referenceUrl 'hibernate:spring:com.example?dialect=org.hibernate.dialect.Oracle10gDialect'\n      username 'user'\n      password 'pass'\n    }\n  }\n}\n\nconfigurations {\n    providedRuntime\n}\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter-data-jpa')\n    compile('org.springframework.boot:spring-boot-starter-data-rest')\n    compile('org.springframework.boot:spring-boot-starter-hateoas')\n    compile('org.springframework.boot:spring-boot-starter-jooq')\n    compile('org.springframework.boot:spring-boot-starter-web')\n    compile('org.springframework.boot:spring-boot-starter-mail')\n    compile('com.github.waffle:waffle-spring-boot-starter:1.9.0')\n    compile('com.oracle.jdbc:ojdbc8:12.2.0.1')\n    runtime('org.springframework.boot:spring-boot-devtools')\n    compileOnly('org.projectlombok:lombok')\n    apt('org.projectlombok:lombok:1.18.2')\n    liquibaseRuntime('org.liquibase:liquibase-core:3.6.2')\n    liquibaseRuntime('org.liquibase:liquibase-groovy-dsl:2.0.1')\n    liquibaseRuntime('org.liquibase.ext:liquibase-hibernate5:3.6')\n    liquibaseRuntime('com.oracle.jdbc:ojdbc8:12.2.0.1') // duplicate...\n    providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n    testCompile('org.springframework.restdocs:spring-restdocs-mockmvc')\n}\n</code></pre>\n<p>Running it via</p>\n<pre><code>&gt; .\\gradlew diffChangeLog -PrunList=main\n</code></pre>\n<p>But fails with</p>\n<blockquote>\n<p>Task :diffChangeLog liquibase-plugin: Running the 'main' activity... Starting Liquibase at Wed, 26 Sep 2018 13:36:24 CEST (version 3.6.2\nbuilt at 2018-07-03 11:28:09) Exception in thread &quot;main&quot;\njava.lang.NoClassDefFoundError:\norg/springframework/core/io/ClassPathResource\nat liquibase.ext.hibernate.database.HibernateSpringPackageDatabase.isXmlFile(HibernateSpringPackageDatabase.java:54)</p>\n</blockquote>\n<p>It looks like it cannot find Spring Boot. So I then tried removing the <code>liquibaseRuntime</code> but then the LiquiBase Gradle plugin complains that <code>liquibaseRuntime</code> is missing.</p>\n<p>Seems I'm stuck in a loop. What is a sane way of setting this up?\nI really don't want to repeat every dependency inside the <code>liquibaseRuntime</code>. Also the doc literally says:</p>\n<blockquote>\n<pre><code>dependencies {\n  // All of your normal project dependencies would be here in addition to...\n  liquibaseRuntime 'org.liquibase:liquibase-core:3.6.1'\n  liquibaseRuntime 'org.liquibase:liquibase-groovy-dsl:2.0.1'\n  liquibaseRuntime 'mysql:mysql-connector-java:5.1.34'\n}\n</code></pre>\n</blockquote>\n<p>Note the</p>\n<blockquote>\n<p>// All of your normal project dependencies would be here in addition to...</p>\n</blockquote>\n<p>Why is this happening?</p>\n<p>Also, I noticed that you have to write database config twice. Why is that needed when it's already set in spring boot config?</p>\n<hr />\n<h2>Progress</h2>\n<p>So changing <code>liquibaseRuntime</code> to</p>\n<pre><code>liquibaseRuntime('org.liquibase:liquibase-core:3.6.2')\nliquibaseRuntime('org.liquibase:liquibase-groovy-dsl:2.0.1')\nliquibaseRuntime('org.liquibase.ext:liquibase-hibernate5:3.6')\nliquibaseRuntime('com.oracle.jdbc:ojdbc8:12.2.0.1')\nliquibaseRuntime('org.springframework.boot:spring-boot-starter-data-jpa')\nliquibaseRuntime files('src/main')\n</code></pre>\n<p>Makes the errors go away. But it still doesn't work.</p>\n<p>Running this command:</p>\n<pre><code>.\\gradlew diff\n</code></pre>\n<p>Gives me this output:</p>\n<pre><code>&gt; Task :diff\nliquibase-plugin: Running the 'main' activity...\nStarting Liquibase at Wed, 26 Sep 2018 16:47:19 CEST (version 3.6.2 built at 2018-07-03 11:28:09)\n\nDiff Results:\nReference Database: null @ hibernate:spring:com.example.model?dialect=org.hibernate.dialect.Oracle10gDialect (Default Schema: HIBERNATE)\nComparison Database: SYSTEM @ jdbc:oracle:thin:@localhost:1521:XE (Default Schema: SYSTEM)\nCompared Schemas: HIBERNATE -&gt; SYSTEM\nProduct Name:\n     Reference:   'Hibernate'\n     Target: 'Oracle'\nProduct Version:\n     Reference:   '5.2.17.Final'\n     Target: 'Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production'\nMissing Catalog(s):\n     HIBERNATE\nUnexpected Catalog(s): NONE\nChanged Catalog(s): NONE\nMissing Column(s): NONE\nUnexpected Column(s): NONE\nChanged Column(s): NONE\nMissing Foreign Key(s): NONE\nUnexpected Foreign Key(s): NONE\nChanged Foreign Key(s): NONE\nMissing Index(s): NONE\nUnexpected Index(s): NONE\nChanged Index(s): NONE\nMissing Primary Key(s): NONE\nUnexpected Primary Key(s): NONE\nChanged Primary Key(s): NONE\nMissing Sequence(s): NONE\nUnexpected Sequence(s): NONE\nChanged Sequence(s): NONE\nMissing Stored Procedure(s): NONE\nUnexpected Stored Procedure(s): NONE\nChanged Stored Procedure(s): NONE\nMissing Table(s): NONE\nUnexpected Table(s): NONE\nChanged Table(s): NONE\nMissing Unique Constraint(s): NONE\nUnexpected Unique Constraint(s): NONE\nChanged Unique Constraint(s): NONE\nMissing View(s): NONE\nUnexpected View(s): NONE\nChanged View(s): NONE\nLiquibase command 'diff' was executed successfully.\n\n\nBUILD SUCCESSFUL in 7s\n1 actionable task: 1 executed\n</code></pre>\n<p>When running against an empty database.</p>\n"},{"tags":["java","spring-boot","aop","spring-aop","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":3222171,"reputation":1361,"user_id":3192775,"accept_rate":33,"display_name":"Tim"},"score":0,"creation_date":1647613978,"post_id":71528557,"comment_id":126421687,"body_markdown":"Is this spring boot or MVC? Spring boot has starter dependency already..&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;","body":"Is this spring boot or MVC? Spring boot has starter dependency already..&lt;dependencies&gt;     &lt;dependency&gt;         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;         &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;     &lt;/dependency&gt; &lt;/dependencies&gt;"},{"owner":{"account_id":3222171,"reputation":1361,"user_id":3192775,"accept_rate":33,"display_name":"Tim"},"score":0,"creation_date":1647614266,"post_id":71528557,"comment_id":126421788,"body_markdown":"Also can you try wrapping the @Around like `@Around(&quot;execution(* package (..)&quot;)..` .","body":"Also can you try wrapping the @Around like <code>@Around(&quot;execution(* package (..)&quot;)..</code> ."},{"owner":{"account_id":10149091,"reputation":372,"user_id":7496320,"accept_rate":0,"display_name":"Aks 1316"},"score":0,"creation_date":1647621260,"post_id":71528557,"comment_id":126424768,"body_markdown":"Can you just add details about how do you call AOP? Are you calling any method of class inside package? @Around is an advice type, which ensures that an advice can run before and after the method execution.","body":"Can you just add details about how do you call AOP? Are you calling any method of class inside package? @Around is an advice type, which ensures that an advice can run before and after the method execution."},{"owner":{"account_id":13547244,"reputation":51,"user_id":9773200,"display_name":"Locke Lamora"},"score":0,"creation_date":1647638359,"post_id":71528557,"comment_id":126429848,"body_markdown":"@Tim Updated the question with proper code snippets and more details. Any help is appreciated.","body":"@Tim Updated the question with proper code snippets and more details. Any help is appreciated."},{"owner":{"account_id":13547244,"reputation":51,"user_id":9773200,"display_name":"Locke Lamora"},"score":0,"creation_date":1647638447,"post_id":71528557,"comment_id":126429872,"body_markdown":"@Aks1316, Updated the question with more details. AOP is working finr if I have a class inside the same project defining the AOP aspects.. Once i move the AOP code to a different project and add the second project as a dependency on the first one, it stops working.","body":"@Aks1316, Updated the question with more details. AOP is working finr if I have a class inside the same project defining the AOP aspects.. Once i move the AOP code to a different project and add the second project as a dependency on the first one, it stops working."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1647662443,"post_id":71528557,"comment_id":126433046,"body_markdown":"Why do you have the dependencies for a whole Spring application in your aspect module? Isn&#39;t that a bit too much? Every other module that wants to use your aspect library get tons of transitive dependencies. You should isolate the aspect library and use it in both applications.","body":"Why do you have the dependencies for a whole Spring application in your aspect module? Isn&#39;t that a bit too much? Every other module that wants to use your aspect library get tons of transitive dependencies. You should isolate the aspect library and use it in both applications."},{"owner":{"account_id":10149091,"reputation":372,"user_id":7496320,"accept_rate":0,"display_name":"Aks 1316"},"score":0,"creation_date":1647676027,"post_id":71528557,"comment_id":126434603,"body_markdown":"@LockeLamora, I think answer given by kriegaex will resolve your issue. He already mentioned 2 points that you need to take care. package scanning and issue with your aspect.","body":"@LockeLamora, I think answer given by kriegaex will resolve your issue. He already mentioned 2 points that you need to take care. package scanning and issue with your aspect."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682752006,"creation_date":1647665430,"answer_id":71535462,"question_id":71528557,"body_markdown":"Like I said in my comment:\r\n\r\n&gt; Why do you have the dependencies for a whole Spring application in your aspect module? Isn&#39;t that a bit too much? Every other module that wants to use your aspect library get tons of transitive dependencies. You should isolate the aspect library and use it in both applications.\r\n\r\nBut if we ignore this for a moment, there should not be any problem for your aspect to be applied. Maybe your main class in project B is `com.akpanda.springmain.SpringmainApplication`, but your aspect is in another base package, say `com.akpanda.aop.LogAspect`. In that case, it will not be picked up by component scan. That is easy enough to fix by adding this to your application class:\r\n\r\n```java\r\n@ComponentScan(basePackages = { &quot;com.akpanda.aop&quot;, &quot;com.akpanda.springmain&quot; })\r\n```\r\n\r\nThen the aspect will work immediately. But looking at your advice method, there are problems with it:\r\n  1. You are using an `@Around` advice which returns `void`, i.e. it only makes sense to apply it to methods which also return `void`. Your target method however returns `Fees`. In order to accommodate any return type in an around-advice, change the return type to `Object`.\r\n  2. The around-advice does not return anything and it also does not `proceed()` to the original target method, returning its result.\r\n\r\nYou can fix it like this:\r\n```java\r\n  @Around(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\r\n  public Object logAround(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    CodeSignature signature = (CodeSignature) joinPoint.getSignature();\r\n    log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\r\n      signature.getDeclaringTypeName(), signature.getName(),\r\n      Arrays.toString(signature.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\r\n    return joinPoint.proceed();\r\n  }\r\n```\r\n\r\nOr alternatively, if your advice only logs and does not modify and method parameters or return values and also does not do any exception handling, simply use a `@Before` advice instead, then you are back to a `void` method there is no need to `proceed()` or declare `Throwable`:\r\n\r\n```java\r\n  @Before(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\r\n  public void logBefore(JoinPoint joinPoint) {\r\n    CodeSignature signature = (CodeSignature) joinPoint.getSignature();\r\n    log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\r\n      signature.getDeclaringTypeName(), signature.getName(),\r\n      Arrays.toString(signature.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\r\n  }\r\n```\r\n\r\nBTW, you could also write your pointcut a little simpler using `@within` instead of `within`:\r\n\r\n```java\r\n  @Pointcut(\r\n    &quot;@within(org.springframework.stereotype.Repository)&quot; +\r\n    &quot; || @within(org.springframework.stereotype.Service)&quot; +\r\n    &quot; || @within(org.springframework.web.bind.annotation.RestController)&quot;\r\n  )\r\n  public void springBeanPointcut() {}\r\n```\r\n","title":"Integrate Spring AOP as a maven dependency in a spring boot application","body":"<p>Like I said in my comment:</p>\n<blockquote>\n<p>Why do you have the dependencies for a whole Spring application in your aspect module? Isn't that a bit too much? Every other module that wants to use your aspect library get tons of transitive dependencies. You should isolate the aspect library and use it in both applications.</p>\n</blockquote>\n<p>But if we ignore this for a moment, there should not be any problem for your aspect to be applied. Maybe your main class in project B is <code>com.akpanda.springmain.SpringmainApplication</code>, but your aspect is in another base package, say <code>com.akpanda.aop.LogAspect</code>. In that case, it will not be picked up by component scan. That is easy enough to fix by adding this to your application class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ComponentScan(basePackages = { &quot;com.akpanda.aop&quot;, &quot;com.akpanda.springmain&quot; })\n</code></pre>\n<p>Then the aspect will work immediately. But looking at your advice method, there are problems with it:</p>\n<ol>\n<li>You are using an <code>@Around</code> advice which returns <code>void</code>, i.e. it only makes sense to apply it to methods which also return <code>void</code>. Your target method however returns <code>Fees</code>. In order to accommodate any return type in an around-advice, change the return type to <code>Object</code>.</li>\n<li>The around-advice does not return anything and it also does not <code>proceed()</code> to the original target method, returning its result.</li>\n</ol>\n<p>You can fix it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Around(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\n  public Object logAround(ProceedingJoinPoint joinPoint) throws Throwable {\n    CodeSignature signature = (CodeSignature) joinPoint.getSignature();\n    log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\n      signature.getDeclaringTypeName(), signature.getName(),\n      Arrays.toString(signature.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\n    return joinPoint.proceed();\n  }\n</code></pre>\n<p>Or alternatively, if your advice only logs and does not modify and method parameters or return values and also does not do any exception handling, simply use a <code>@Before</code> advice instead, then you are back to a <code>void</code> method there is no need to <code>proceed()</code> or declare <code>Throwable</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Before(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\n  public void logBefore(JoinPoint joinPoint) {\n    CodeSignature signature = (CodeSignature) joinPoint.getSignature();\n    log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\n      signature.getDeclaringTypeName(), signature.getName(),\n      Arrays.toString(signature.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\n  }\n</code></pre>\n<p>BTW, you could also write your pointcut a little simpler using <code>@within</code> instead of <code>within</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Pointcut(\n    &quot;@within(org.springframework.stereotype.Repository)&quot; +\n    &quot; || @within(org.springframework.stereotype.Service)&quot; +\n    &quot; || @within(org.springframework.web.bind.annotation.RestController)&quot;\n  )\n  public void springBeanPointcut() {}\n</code></pre>\n"}],"owner":{"account_id":13547244,"reputation":51,"user_id":9773200,"display_name":"Locke Lamora"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1279,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682752006,"creation_date":1647613656,"question_id":71528557,"body_markdown":"Application 1 : (Contains AOP code. A Spring boot application)\r\n\r\nLogAspect.Java\r\n\r\n&lt;!-- language: java --&gt;\r\n       \r\n    @Aspect\r\n    @Component\r\n    public class LogAspect {\r\n        private final Logger log = LoggerFactory.getLogger(this.getClass());\r\n    \r\n        @Pointcut(&quot;within(@org.springframework.stereotype.Repository *)&quot;\r\n                + &quot; || within(@org.springframework.stereotype.Service *)&quot;\r\n                + &quot; || within(@org.springframework.web.bind.annotation.RestController *)&quot;)\r\n        public void springBeanPointcut() {}\r\n    \r\n        @Pointcut(&quot;within(com.akpanda.springmain..*)&quot;)\r\n        public void applicationPackagePointcut() {}\r\n    \r\n        @Around(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\r\n        public void logAround(ProceedingJoinPoint joinPoint) throws Throwable {\r\n            CodeSignature c = (CodeSignature) joinPoint.getSignature();\r\n            log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\r\n                    joinPoint.getSignature().getDeclaringTypeName(), joinPoint.getSignature().getName(),\r\n                    Arrays.toString(c.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\r\n        }\r\n    }\r\n    \r\npom.xml (Application 1)\r\n    \r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;groupId&gt;com.akpanda&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aop&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;aop&lt;/name&gt;\r\n      &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n      &lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n      &lt;/properties&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n      &lt;/dependencies&gt;\r\n\r\nApplication 2 : (Another spring boot application)\r\nIt has a dependency to the above Application 1, added as a maven dependency\r\n\r\npom.xml (Application 2)\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.akpanda&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;aop&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nMain class of Application 2\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @SpringBootApplication\r\n    @EnableAspectJAutoProxy(proxyTargetClass = true)\r\n    public class SpringmainApplication {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(SpringmainApplication.class, args);\r\n    \t}\r\n    }\r\n\r\nController class of Application 2\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @RestController\r\n    public class FeesController {\r\n        @Autowired\r\n        private FeesCalculator feesCalculator;\r\n    \r\n        @RequestMapping(value = &quot;/fees/caclulate&quot;, method = RequestMethod.GET)\r\n        public Fees calculateFees() {\r\n            return feesCalculator.calculateFees();\r\n        }\r\n    }\r\n\r\nNow when i run Application 2 and hit endpoint \r\n\r\n&gt; /fees/caclulate\r\n\r\n, I expect the aop dependency added in maven to kick in.\r\n and the method logAround() to be called whenever any method of Application 2 is called.\r\n\r\nIf i do not add application 1 as a dependency but simply create class in application 2 containing aspects and advices it works. But in that case I have 10 different projects for which this needs to be duplicated.\r\nI want to separate the AOP code as a module (another spring boot application) and use it in many different spring boot projects as a maven dependency.\r\n","title":"Integrate Spring AOP as a maven dependency in a spring boot application","body":"<p>Application 1 : (Contains AOP code. A Spring boot application)</p>\n<p>LogAspect.Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\npublic class LogAspect {\n    private final Logger log = LoggerFactory.getLogger(this.getClass());\n\n    @Pointcut(&quot;within(@org.springframework.stereotype.Repository *)&quot;\n            + &quot; || within(@org.springframework.stereotype.Service *)&quot;\n            + &quot; || within(@org.springframework.web.bind.annotation.RestController *)&quot;)\n    public void springBeanPointcut() {}\n\n    @Pointcut(&quot;within(com.akpanda.springmain..*)&quot;)\n    public void applicationPackagePointcut() {}\n\n    @Around(&quot;applicationPackagePointcut() &amp;&amp; springBeanPointcut()&quot;)\n    public void logAround(ProceedingJoinPoint joinPoint) throws Throwable {\n        CodeSignature c = (CodeSignature) joinPoint.getSignature();\n        log.info(&quot;Enter: {}.{}() with ParameterName[s]= {} and argumentValue[s]= {}&quot;,\n                joinPoint.getSignature().getDeclaringTypeName(), joinPoint.getSignature().getName(),\n                Arrays.toString(c.getParameterNames()), Arrays.toString(joinPoint.getArgs()));\n    }\n}\n</code></pre>\n<p>pom.xml (Application 1)</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;groupId&gt;com.akpanda&lt;/groupId&gt;\n  &lt;artifactId&gt;aop&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;aop&lt;/name&gt;\n  &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n  &lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n  &lt;/properties&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n</code></pre>\n<p>Application 2 : (Another spring boot application)\nIt has a dependency to the above Application 1, added as a maven dependency</p>\n<p>pom.xml (Application 2)</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.akpanda&lt;/groupId&gt;\n    &lt;artifactId&gt;aop&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Main class of Application 2</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableAspectJAutoProxy(proxyTargetClass = true)\npublic class SpringmainApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringmainApplication.class, args);\n    }\n}\n</code></pre>\n<p>Controller class of Application 2</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class FeesController {\n    @Autowired\n    private FeesCalculator feesCalculator;\n\n    @RequestMapping(value = &quot;/fees/caclulate&quot;, method = RequestMethod.GET)\n    public Fees calculateFees() {\n        return feesCalculator.calculateFees();\n    }\n}\n</code></pre>\n<p>Now when i run Application 2 and hit endpoint</p>\n<blockquote>\n<p>/fees/caclulate</p>\n</blockquote>\n<p>, I expect the aop dependency added in maven to kick in.\nand the method logAround() to be called whenever any method of Application 2 is called.</p>\n<p>If i do not add application 1 as a dependency but simply create class in application 2 containing aspects and advices it works. But in that case I have 10 different projects for which this needs to be duplicated.\nI want to separate the AOP code as a module (another spring boot application) and use it in many different spring boot projects as a maven dependency.</p>\n"},{"tags":["java","spring","spring-webflux","spring-aop","aspect"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1682317520,"post_id":76087213,"comment_id":134190061,"body_markdown":"I cannot answer this question straight away, as I do not have any experience with reactive programming. But maybe I can figure it out, if you post a minimal reproducer on GitHub and post a link here. I need something reproducible.","body":"I cannot answer this question straight away, as I do not have any experience with reactive programming. But maybe I can figure it out, if you post a minimal reproducer on GitHub and post a link here. I need something reproducible."},{"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"score":0,"creation_date":1682363175,"post_id":76087213,"comment_id":134200333,"body_markdown":"i modified some online code, this should be enough i presume https://github.com/crazycatMyopic/issue-","body":"i modified some online code, this should be enough i presume <a href=\"https://github.com/crazycatMyopic/issue-\" rel=\"nofollow noreferrer\">github.com/crazycatMyopic/issue-</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1682431358,"post_id":76087213,"comment_id":134212101,"body_markdown":"You did yourself the biggest favour by providing an [MCVE](https://stackoverflow.com/help/mcve). Please keep up this practice. It helps community members to reproduce your problems and yield better answers faster. &#128578;","body":"You did yourself the biggest favour by providing an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. Please keep up this practice. It helps community members to reproduce your problems and yield better answers faster. "}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682751993,"creation_date":1682431289,"answer_id":76102036,"question_id":76087213,"body_markdown":"Let us read the error message again:\r\n\r\n```none\r\njava.lang.IllegalStateException: No MethodInvocation found:\r\n\r\nCheck that an AOP invocation is in progress and that the\r\nExposeInvocationInterceptor is upfront in the interceptor chain.\r\n\r\nSpecifically, note that advices with order HIGHEST_PRECEDENCE will execute\r\nbefore ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor\r\nand ExposeInvocationInterceptor.currentInvocation() must be invoked from the\r\nsame thread.\r\n```\r\n\r\nSo let us try by adding an `@Order` annotation to our aspect. But first, some research. You can check the Javadocs, I simply checked the source code:\r\n\r\n```java\r\npublic @interface Order {\r\n  int value() default Ordered.LOWEST_PRECEDENCE;\r\n}\r\n```\r\n\r\n```java\r\npublic interface Ordered {\r\n  int HIGHEST_PRECEDENCE = Integer.MIN_VALUE;\r\n  int LOWEST_PRECEDENCE = Integer.MAX_VALUE;\r\n\r\n  int getOrder();\r\n}\r\n```\r\n\r\nConclusion: The default order is `LOWEST_PRECEDENCE`, i.e. `Integer.MAX_VALUE`. Therefore, let us just assign a higher precedence, i.e. something smaller than `Integer.MAX_VALUE`. For your simple example on GitHub, any of the following will do: `@Order(Integer.MAX_VALUE - 1)`, `@Order(0)` or whatever you determine to be appropriate in your situation. Having added that to your aspect class, the caller will see this on the console:\r\n\r\n```none\r\n$ curl -L &quot;http://localhost:8080/login&quot; -H &quot;Authorization: Bearer ghfjhgf&quot;\r\nHI\r\n```\r\n\r\nThe Spring server log will say:\r\n\r\n```none\r\n[  restartedMain] c.a.s.SpringBootWebfluxJjwtApplication   : Started SpringBootWebfluxJjwtApplication in 1.646 seconds (JVM running for 2.156)\r\n[  restartedMain] o.s.b.a.ApplicationAvailabilityBean      : Application availability state LivenessState changed to CORRECT\r\n[  restartedMain] o.s.b.a.ApplicationAvailabilityBean      : Application availability state ReadinessState changed to ACCEPTING_TRAFFIC\r\n...\r\n[oundedElastic-1] c.a.s.rest.LoggerAspect                  : Entering function Mono com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST.login() in location org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint$SourceLocationImpl@641fcca3\r\n[oundedElastic-1] c.a.s.rest.LoggerAspect                  : Exiting function Mono com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST.login()\r\n```\r\n\r\n---\r\n\r\n**Update**, responding to this follow-up question:\r\n\r\n&gt; I still wonder why did it happen, why was `@Order` required? There is only one advice (from my AOP) which other would be running?\r\n\r\nIf you remove `@PreAuthorize` from your login method that returns a `Mono`, it works without the `@Order` annotation on the aspect. That gives you a clue: Spring Security also seems to use AOP or at least some kind of method interceptor. Let us look at the actual error in more detail:\r\n\r\n```none\r\njava.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\r\n  at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.7.jar:5.3.7]\r\n  Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\r\nError has been observed at the following site(s):\r\n  |_ checkpoint  Handler com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST#login() [DispatcherHandler]\r\n  |_ checkpoint  org.springframework.security.web.server.authorization.AuthorizationWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint  org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint  org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint  org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint  org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint  org.springframework.security.web.server.authentication.AuthenticationWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint  org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint  org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint  org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\r\n  |_ checkpoint  org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\r\n  |_ checkpoint  HTTP GET &quot;/login&quot; [ExceptionHandlingWebHandler]\r\nStack trace:\r\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.getJoinPointMatch(AbstractAspectJAdvice.java:658) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.aspectj.AspectJMethodBeforeAdvice.before(AspectJMethodBeforeAdvice.java:44) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.7.jar:5.3.7]\r\n    at org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor.proceed(PrePostAdviceReactiveMethodInterceptor.java:156) ~[spring-security-core-5.5.0.jar:5.5.0]\r\n    at org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor.lambda$invoke$4(PrePostAdviceReactiveMethodInterceptor.java:116) ~[spring-security-core-5.5.0.jar:5.5.0]\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125) ~[reactor-core-3.4.6.jar:3.4.6]\r\n(...)\r\n```\r\n\r\nPlease note `org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor` in the stacktrace. Obviously, in Spring Security there is a special method interceptor for reactive methods. As described in the error message you and I posted before, this interceptor seems to require a special ordering of the interceptor/advice chain. I guess, it is some kind of bootstrapping problem, which users who wish to combine Spring AOP, Spring Security and WebFlux need to accommodate to.","title":"Spring AOP with Spring Webflux after authentication","body":"<p>Let us read the error message again:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.IllegalStateException: No MethodInvocation found:\n\nCheck that an AOP invocation is in progress and that the\nExposeInvocationInterceptor is upfront in the interceptor chain.\n\nSpecifically, note that advices with order HIGHEST_PRECEDENCE will execute\nbefore ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor\nand ExposeInvocationInterceptor.currentInvocation() must be invoked from the\nsame thread.\n</code></pre>\n<p>So let us try by adding an <code>@Order</code> annotation to our aspect. But first, some research. You can check the Javadocs, I simply checked the source code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public @interface Order {\n  int value() default Ordered.LOWEST_PRECEDENCE;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Ordered {\n  int HIGHEST_PRECEDENCE = Integer.MIN_VALUE;\n  int LOWEST_PRECEDENCE = Integer.MAX_VALUE;\n\n  int getOrder();\n}\n</code></pre>\n<p>Conclusion: The default order is <code>LOWEST_PRECEDENCE</code>, i.e. <code>Integer.MAX_VALUE</code>. Therefore, let us just assign a higher precedence, i.e. something smaller than <code>Integer.MAX_VALUE</code>. For your simple example on GitHub, any of the following will do: <code>@Order(Integer.MAX_VALUE - 1)</code>, <code>@Order(0)</code> or whatever you determine to be appropriate in your situation. Having added that to your aspect class, the caller will see this on the console:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ curl -L &quot;http://localhost:8080/login&quot; -H &quot;Authorization: Bearer ghfjhgf&quot;\nHI\n</code></pre>\n<p>The Spring server log will say:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[  restartedMain] c.a.s.SpringBootWebfluxJjwtApplication   : Started SpringBootWebfluxJjwtApplication in 1.646 seconds (JVM running for 2.156)\n[  restartedMain] o.s.b.a.ApplicationAvailabilityBean      : Application availability state LivenessState changed to CORRECT\n[  restartedMain] o.s.b.a.ApplicationAvailabilityBean      : Application availability state ReadinessState changed to ACCEPTING_TRAFFIC\n...\n[oundedElastic-1] c.a.s.rest.LoggerAspect                  : Entering function Mono com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST.login() in location org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint$SourceLocationImpl@641fcca3\n[oundedElastic-1] c.a.s.rest.LoggerAspect                  : Exiting function Mono com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST.login()\n</code></pre>\n<hr />\n<p><strong>Update</strong>, responding to this follow-up question:</p>\n<blockquote>\n<p>I still wonder why did it happen, why was <code>@Order</code> required? There is only one advice (from my AOP) which other would be running?</p>\n</blockquote>\n<p>If you remove <code>@PreAuthorize</code> from your login method that returns a <code>Mono</code>, it works without the <code>@Order</code> annotation on the aspect. That gives you a clue: Spring Security also seems to use AOP or at least some kind of method interceptor. Let us look at the actual error in more detail:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\n  at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.7.jar:5.3.7]\n  Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\nError has been observed at the following site(s):\n  |_ checkpoint  Handler com.ard333.springbootwebfluxjjwt.rest.AuthenticationREST#login() [DispatcherHandler]\n  |_ checkpoint  org.springframework.security.web.server.authorization.AuthorizationWebFilter [DefaultWebFilterChain]\n  |_ checkpoint  org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter [DefaultWebFilterChain]\n  |_ checkpoint  org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\n  |_ checkpoint  org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\n  |_ checkpoint  org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\n  |_ checkpoint  org.springframework.security.web.server.authentication.AuthenticationWebFilter [DefaultWebFilterChain]\n  |_ checkpoint  org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\n  |_ checkpoint  org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\n  |_ checkpoint  org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\n  |_ checkpoint  org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\n  |_ checkpoint  HTTP GET &quot;/login&quot; [ExceptionHandlingWebHandler]\nStack trace:\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.getJoinPointMatch(AbstractAspectJAdvice.java:658) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.aspectj.AspectJMethodBeforeAdvice.before(AspectJMethodBeforeAdvice.java:44) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:57) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.7.jar:5.3.7]\n    at org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor.proceed(PrePostAdviceReactiveMethodInterceptor.java:156) ~[spring-security-core-5.5.0.jar:5.5.0]\n    at org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor.lambda$invoke$4(PrePostAdviceReactiveMethodInterceptor.java:116) ~[spring-security-core-5.5.0.jar:5.5.0]\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125) ~[reactor-core-3.4.6.jar:3.4.6]\n(...)\n</code></pre>\n<p>Please note <code>org.springframework.security.access.prepost.PrePostAdviceReactiveMethodInterceptor</code> in the stacktrace. Obviously, in Spring Security there is a special method interceptor for reactive methods. As described in the error message you and I posted before, this interceptor seems to require a special ordering of the interceptor/advice chain. I guess, it is some kind of bootstrapping problem, which users who wish to combine Spring AOP, Spring Security and WebFlux need to accommodate to.</p>\n"}],"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76102036,"answer_count":1,"score":0,"last_activity_date":1682751993,"creation_date":1682283079,"question_id":76087213,"body_markdown":"I have a Enabled Spring AOP for my logging purpose and use webflux for the API entrypoint,\r\nthings work fine if the api does not go through `ReactiveAuthenticationManager` like my `login` api but the moment It has to go through `ReactiveAuthenticationManager` it throws the bellow exception\r\n\r\n```\r\njava.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\nError has been observed at the following site(s):\r\n\t*__checkpoint  Handler com.ums.api.contoller.Controller#getAllUser() [DispatcherHandler]\r\n```\r\n\r\nmy AOP class\r\n```java\r\npublic class LoggerAspect {\r\n\r\n    @Pointcut(&quot;within(com.ums..*)&quot;)\r\n    public void logEveryFunction() {\r\n    }\r\n\r\n    @Before(value = &quot;logEveryFunction()&quot;)\r\n    public void log(JoinPoint joinPoint) {\r\n        log.info(&quot;Entering function {} in location {}&quot;, joinPoint.getSignature(), joinPoint.getSourceLocation());\r\n    }\r\n\r\n    @After(value = &quot;logEveryFunction()&quot;)\r\n    public void logEnd(JoinPoint joinPoint) {\r\n        log.info(&quot;Exiting function {}&quot;, joinPoint.getSignature());\r\n    }\r\n}\r\n```\r\n\r\nauthentication function\r\n```java\r\n    public Mono&lt;Authentication&gt; authenticate(Authentication authentication) {\r\n        return Mono.justOrEmpty(authentication.getCredentials().toString())\r\n                .map(value -&gt; {\r\n                    return new UsernamePasswordAuthenticationToken(\r\n                            authentication.getName(),\r\n                            null,\r\n                          Arrays.asList(new SimpleGrantedAuthority(&quot;VIEW&quot;))\r\n                });\r\n    }\r\n```\r\n\r\nhow can I make my AOP work with webflux and how can I fix the issue?","title":"Spring AOP with Spring Webflux after authentication","body":"<p>I have a Enabled Spring AOP for my logging purpose and use webflux for the API entrypoint,\nthings work fine if the api does not go through <code>ReactiveAuthenticationManager</code> like my <code>login</code> api but the moment It has to go through <code>ReactiveAuthenticationManager</code> it throws the bellow exception</p>\n<pre><code>java.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74) ~[spring-aop-5.3.23.jar:5.3.23]\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nError has been observed at the following site(s):\n    *__checkpoint  Handler com.ums.api.contoller.Controller#getAllUser() [DispatcherHandler]\n</code></pre>\n<p>my AOP class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class LoggerAspect {\n\n    @Pointcut(&quot;within(com.ums..*)&quot;)\n    public void logEveryFunction() {\n    }\n\n    @Before(value = &quot;logEveryFunction()&quot;)\n    public void log(JoinPoint joinPoint) {\n        log.info(&quot;Entering function {} in location {}&quot;, joinPoint.getSignature(), joinPoint.getSourceLocation());\n    }\n\n    @After(value = &quot;logEveryFunction()&quot;)\n    public void logEnd(JoinPoint joinPoint) {\n        log.info(&quot;Exiting function {}&quot;, joinPoint.getSignature());\n    }\n}\n</code></pre>\n<p>authentication function</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public Mono&lt;Authentication&gt; authenticate(Authentication authentication) {\n        return Mono.justOrEmpty(authentication.getCredentials().toString())\n                .map(value -&gt; {\n                    return new UsernamePasswordAuthenticationToken(\n                            authentication.getName(),\n                            null,\n                          Arrays.asList(new SimpleGrantedAuthority(&quot;VIEW&quot;))\n                });\n    }\n</code></pre>\n<p>how can I make my AOP work with webflux and how can I fix the issue?</p>\n"},{"tags":["java","apache-spark","stream"],"answers":[{"tags":[],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682750360,"creation_date":1682600615,"answer_id":76120764,"question_id":76117091,"body_markdown":"As a start of a solution, I&#39;ve wrote this method that splits a `Dataset&lt;Row&gt;` to a `List&lt;Dataset&lt;Row&gt;&gt;` given a number of records per page wished.\r\n\r\n```java\r\n/**\r\n * Paginer un dataset en renvoyant plusieurs datasets d&#39;un nombre maximal d&#39;enregistrements.\r\n * @param session Session Spark.\r\n * @param dataset Dataset &#224; diviser.\r\n * @param nombreObjetsParPage Nombre d&#39;objets maximal par dataset cr&#233;&#233;.\r\n * @return Liste des datasets cr&#233;&#233;s.\r\n */\r\npublic static List&lt;Dataset&lt;Row&gt;&gt; paginer(SparkSession session, Dataset&lt;Row&gt; dataset, int nombreObjetsParPage) {\r\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(dataset, &quot;Le dataset &#224; diviser pour sa pagination ne peut pas valoir null.&quot;);\r\n\r\n   List&lt;Dataset&lt;Row&gt;&gt; sousDatasets = new ArrayList&lt;&gt;();\r\n\r\n   // Si le nombre d&#39;enregistrements demand&#233;s par page est sup&#233;rieur ou &#233;gal au nombre qu&#39;en a le dataset re&#231;u en param&#232;tre,\r\n   // le renvoyer comme unique &#233;l&#233;ment de la liste.\r\n   long count = dataset.count();\r\n\r\n   if (nombreObjetsParPage &gt;= count) {\r\n      sousDatasets.add(dataset);\r\n      return sousDatasets;\r\n   }\r\n\r\n   // Attribuer un num&#233;ro d&#39;index, allant de z&#233;ro &#224; (count - 1), en regard du dataset.\r\n   JavaPairRDD&lt;Row, Long&gt; rdd = dataset.toJavaRDD().zipWithIndex();\r\n\r\n   long start = 0;\r\n   long end = nombreObjetsParPage;\r\n\r\n   // Alimenter une liste de datasets, chacun prenant &#224; son tour les indexs dans [start, end[\r\n   do {\r\n      final long a = start;\r\n      final long b = end;\r\n\r\n      JavaPairRDD&lt;Row, Long&gt; rddSousEnsemble = rdd.filter(f -&gt; f._2() &gt;= a &amp;&amp; f._2() &lt; b);\r\n      sousDatasets.add(session.createDataFrame(rddSousEnsemble.keys(), dataset.schema()));\r\n\r\n      start += nombreObjetsParPage;\r\n      end += nombreObjetsParPage;\r\n   }\r\n   while(start &lt; count);\r\n\r\n   return sousDatasets;\r\n}\r\n```\r\n\r\nThat complies to this test (provided you change the `Dataset&lt;Row&gt; catalogue` to one you have):\r\n\r\n```java\r\n/**\r\n * Obtention des Dataset de row, pagin&#233;s.\r\n */\r\n@Test\r\n@DisplayName(&quot;Dataset catalogue (row, pagin&#233;s) : jeux de donn&#233;es.&quot;)\r\nvoid rowCatalogueDatasetsPagines() {\r\n   LOGGER.info(&quot;Lecture du catalogue datagouv en Row, pagin&#233;s...&quot;);\r\n   Dataset&lt;Row&gt; catalogue = this.catalogueDataset.rowCatalogueDataset(this.session).limit(70);\r\n\r\n   List&lt;Dataset&lt;Row&gt;&gt; pagines = AbstractSparkDataset.paginer(this.session, catalogue, 20);\r\n   assertEquals(4, pagines.size(), &quot;Le nombre de sous-datasets n&#39;est pas celui attendu&quot;);\r\n\r\n   for(int i=0; i &lt; 3; i ++) {\r\n      pagines.get(i).show(1000, false);\r\n      assertEquals(20, pagines.get(i).count(), MessageFormat.format(&quot;Le nombre d&#39;&#39;enregistrements du sous-datasets d&#39;&#39;index {0}, {1}, n&#39;&#39;est pas celui attendu&quot;, i, pagines.get(i).count()));\r\n   }\r\n\r\n   pagines.get(3).show(1000, false);\r\n   assertEquals(10, pagines.get(3).count(), MessageFormat.format(&quot;Le dernier sous-dataset n&#39;&#39;a pas le bon nombre d&#39;&#39;enregitrements, mais {0}&quot;, pagines.get(3).count()));\r\n}\r\n```\r\n\r\nTo be more complete, this next method will return the sub datasets as `List&lt;Dataset&lt;JeuDeDonnees&gt;&gt;` or the object you&#39;re willing to have, given the mapper from a `Datatset&lt;Row&gt;` to a `Dataset&lt;target object&gt;` you can provide:\r\n\r\n```java\r\n/**\r\n  * Paginer un dataset en renvoyant plusieurs datasets d&#39;un nombre maximal d&#39;objets m&#233;tiers.\r\n  * @param session Session Spark.\r\n  * @param dataset Dataset d&#39;enregistrements &#224; diviser.\r\n  * @param encoder Fonction d&#39;encodage en dataset d&#39;objets m&#233;tiers d&#39;un Dataset&lt;Row&gt;.\r\n  * @param nombreObjetsParPage Nombre d&#39;objets maximal par dataset cr&#233;&#233;.\r\n  * @param &lt;T&gt; Type de l&#39;objet m&#233;tier cible que l&#39;on veut obtenir.\r\n  * @return Liste des datasets d&#39;objet m&#233;tier cr&#233;&#233;s.\r\n  */\r\npublic static &lt;T&gt; List&lt;Dataset&lt;T&gt;&gt; paginer(SparkSession session, Dataset&lt;?&gt; dataset, Function&lt;Dataset&lt;Row&gt;, Dataset&lt;T&gt;&gt; encoder, int nombreObjetsParPage) {\r\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination en objets ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(dataset, &quot;Le dataset &#224; diviser pour sa pagination en objets ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(encoder, &quot;La fonction d&#39;encodage, du type Dataset&lt;Row&gt; vers le type d&#39;objet m&#233;tier d&#233;sir&#233; pour la pagination en objets d&#39;un dataset, ne peut pas valoir null.&quot;);\r\n\r\n   List&lt;Dataset&lt;Row&gt;&gt; blocsEnregistrements = paginer(session, dataset.toDF(), nombreObjetsParPage);\r\n   return blocsEnregistrements.stream().map(encoder).toList();\r\n}\r\n```\r\n\r\nEventually, to get all of this, smoothly, as a `Stream&lt;JeuDeDonnees&gt;`, I had to create a dedicated iterator:\r\n\r\n```java\r\n/**\r\n * Un iterateur sur les datasets qui n&#39;extrait leur contenu que si c&#39;est n&#233;cessaire.\r\n * @param &lt;T&gt; Les &#233;l&#233;ments enfants transport&#233;s par les Dataset it&#233;r&#233;s (Dataset&lt;T&gt;).\r\n */\r\npublic class DatasetsItemIterator&lt;T&gt; implements Iterator&lt;T&gt; {\r\n   /** Logger. */\r\n   private static final Logger LOGGER = LoggerFactory.getLogger(DatasetsItemIterator.class);\r\n\r\n   /** It&#233;rateur sur les datasets. */\r\n   private final Iterator&lt;Dataset&lt;T&gt;&gt; datasetIterator;\r\n\r\n   /** Dataset actuellement parcouru. */\r\n   private Dataset&lt;T&gt; currentDataset;\r\n\r\n   /** Flux sur les objets m&#233;tiers du dataset */\r\n   private Iterator&lt;T&gt; elementsIterator = null;\r\n\r\n   /** Page actuelle */\r\n   private long currentPage = 0;\r\n\r\n   /** Page maximale */\r\n   private final long maxPage;\r\n\r\n   /**\r\n    * Construire un it&#233;rateur sur un ou plusieurs datasets.\r\n    * @param datasets Datasets.\r\n    */\r\n   @SafeVarargs\r\n   public DatasetsItemIterator(Dataset&lt;T&gt;... datasets) {\r\n      this(Arrays.asList(datasets));\r\n   }\r\n\r\n   /**\r\n    * Construire un it&#233;rateur sur une liste de datasets.\r\n    * @param datasets Datasets.\r\n    */\r\n   public DatasetsItemIterator(List&lt;Dataset&lt;T&gt;&gt; datasets) {\r\n      this.datasetIterator = datasets.iterator();\r\n      this.maxPage = datasets.size();\r\n   }\r\n\r\n   @Override\r\n   public boolean hasNext() {\r\n      // Si aucun dataset n&#39;a &#233;t&#233; encore observ&#233;, prendre le premier, s&#39;il y en a un.\r\n      if (this.currentDataset == null &amp;&amp; nextDataset() == false) {\r\n         return false;\r\n      }\r\n\r\n      // Si un it&#233;rateur existe sur des &#233;l&#233;ments et qu&#39;il en a encore &#224; donner, r&#233;pondre Oui.\r\n      if (this.elementsIterator.hasNext()) {\r\n         return true;\r\n      }\r\n\r\n      // Sinon, tenter de parcourir un nouveau dataset.\r\n      return nextDataset();\r\n   }\r\n\r\n   @Override\r\n   public T next() {\r\n      if (hasNext()) {\r\n         return this.elementsIterator.next();\r\n      }\r\n\r\n      throw new NoSuchElementException(&quot;La famille de datasets n&#39;a plus d&#39;&#233;l&#233;ments &#224; fournir.&quot;);\r\n   }\r\n\r\n   /**\r\n    * Pr&#233;parer l&#39;it&#233;ration du dataset suivant.\r\n    * @return true s&#39;il en existe un, et qu&#39;il a des &#233;l&#233;ments disponibles.\r\n    */\r\n   private boolean nextDataset() {\r\n      if (this.datasetIterator.hasNext() == false) {\r\n         return false;\r\n      }\r\n\r\n      this.currentPage ++;\r\n      LOGGER.info(&quot;Chargement de la page {}/{} du dataset pagin&#233;.&quot;, this.currentPage, this.maxPage);\r\n\r\n      this.currentDataset = this.datasetIterator.next();\r\n      this.elementsIterator = this.currentDataset.collectAsList().iterator();\r\n\r\n      return this.elementsIterator.hasNext();\r\n   }\r\n}\r\n```\r\n\r\nAnd create this method:\r\n\r\n```java\r\n/**\r\n * Paginer en stream.\r\n * @param session Session Spark.\r\n * @param dataset Dataset &#224; diviser.\r\n * @param encoder Fonction d&#39;encodage.\r\n * @param nombreObjetsParPage Nombre d&#39;objets par page.\r\n * @return Flux d&#39;objets m&#233;tiers.\r\n * @param &lt;T&gt; Classe des objets m&#233;tiers renvoy&#233;s par le stream.\r\n */\r\npublic static &lt;T&gt; Stream&lt;T&gt; paginerEnStream(SparkSession session, Dataset&lt;?&gt; dataset, Function&lt;Dataset&lt;Row&gt;, Dataset&lt;T&gt;&gt; encoder, int nombreObjetsParPage) {\r\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination en stream d&#39;objets ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(dataset, &quot;Le dataset &#224; diviser pour sa pagination en stream d&#39;objets ne peut pas valoir null.&quot;);\r\n   Objects.requireNonNull(encoder, &quot;La fonction d&#39;encodage, du type Dataset&lt;Row&gt; vers le type d&#39;objet m&#233;tier d&#233;sir&#233; pour la pagination en stream d&#39;objets d&#39;un dataset, ne peut pas valoir null.&quot;);\r\n\r\n   DatasetsItemIterator&lt;T&gt; objetsMetiersIterator = new DatasetsItemIterator&lt;&gt;(paginer(session, dataset, encoder, nombreObjetsParPage));\r\n   return StreamSupport.stream(Spliterators.spliteratorUnknownSize(objetsMetiersIterator, Spliterator.ORDERED), false);\r\n}\r\n```\r\n\r\nMy solution works:\r\n\r\n```java\r\n/**\r\n * Obtention des Dataset d&#39;objets m&#233;tiers pagin&#233;s, sous forme de stream.\r\n */\r\n@Test\r\n@DisplayName(&quot;Dataset catalogue (objets m&#233;tiers, pagin&#233;s et stream&#233;s) : jeux de donn&#233;es.&quot;)\r\nvoid catalogueDatasetsObjetsMetiersPaginesStreames() {\r\n   LOGGER.info(&quot;Lecture du catalogue datagouv en objets m&#233;tiers, pagin&#233;s et stream&#233;s...&quot;);\r\n   Dataset&lt;Row&gt; catalogue = this.catalogueDataset.rowCatalogueDataset(this.session,(AbstractSparkDataset.Verification[]) null).limit(70);\r\n\r\n   assertDoesNotThrow(() -&gt; {\r\n      Stream&lt;JeuDeDonnees&gt; jeuxDeDonnees = AbstractSparkDataset.paginerEnStream(this.session, catalogue, p -&gt; this.catalogueDataset.catalogueDataset(p), 20);\r\n\r\n      List&lt;JeuDeDonnees&gt; extrait = jeuxDeDonnees.limit(22).collect(Collectors.toList());\r\n      assertEquals(22, extrait.size(), &quot;Le flux n&#39;a pas apport&#233; le nombre de jeux de donn&#233;es attendu&quot;);\r\n      LOGGER.info(ReflectionToStringBuilder.toString(extrait));\r\n   });\r\n}\r\n```\r\n\r\nAnd I&#39;m happy to see in my logs that only the page 1 and 2 are consumed in my test.\r\n\r\n```log\r\n2023-04-29 08:10:08.375  INFO 101742 --- [           main] fr.ecoemploi.spark.DatasetsItemIterator  : Chargement de la page 1/4 du dataset pagin&#233;.\r\n2023-04-29 08:10:09.677  INFO 101742 --- [           main] fr.ecoemploi.spark.DatasetsItemIterator  : Chargement de la page 2/4 du dataset pagin&#233;.\r\n```\r\n\r\nBut it&#39;s drawback is: being slow. Because it does plenty of `filter`.\r\n\r\nAnd I haven&#39;t checked (yet) deeply if my list of methods are tuned enough to ensure that when the page 2 is being served for object streaming, the page 1 can be garbage collected (if Java feels that need).\r\n\r\nBecause, if it&#39;s for that, at the end, the full whole Dataset (that was splitted in pages at the beginning) is just here in memory with its millions of objects, it wouldn&#39;t be perfect.","title":"I created a Dataset&lt;Row&gt; from a csv file, and then a Dataset&lt;JeuDeDonnees&gt; from it. How may I read JeuDeDonnees objects, one by one, like in a stream?","body":"<p>As a start of a solution, I've wrote this method that splits a <code>Dataset&lt;Row&gt;</code> to a <code>List&lt;Dataset&lt;Row&gt;&gt;</code> given a number of records per page wished.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Paginer un dataset en renvoyant plusieurs datasets d'un nombre maximal d'enregistrements.\n * @param session Session Spark.\n * @param dataset Dataset  diviser.\n * @param nombreObjetsParPage Nombre d'objets maximal par dataset cr.\n * @return Liste des datasets crs.\n */\npublic static List&lt;Dataset&lt;Row&gt;&gt; paginer(SparkSession session, Dataset&lt;Row&gt; dataset, int nombreObjetsParPage) {\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(dataset, &quot;Le dataset  diviser pour sa pagination ne peut pas valoir null.&quot;);\n\n   List&lt;Dataset&lt;Row&gt;&gt; sousDatasets = new ArrayList&lt;&gt;();\n\n   // Si le nombre d'enregistrements demands par page est suprieur ou gal au nombre qu'en a le dataset reu en paramtre,\n   // le renvoyer comme unique lment de la liste.\n   long count = dataset.count();\n\n   if (nombreObjetsParPage &gt;= count) {\n      sousDatasets.add(dataset);\n      return sousDatasets;\n   }\n\n   // Attribuer un numro d'index, allant de zro  (count - 1), en regard du dataset.\n   JavaPairRDD&lt;Row, Long&gt; rdd = dataset.toJavaRDD().zipWithIndex();\n\n   long start = 0;\n   long end = nombreObjetsParPage;\n\n   // Alimenter une liste de datasets, chacun prenant  son tour les indexs dans [start, end[\n   do {\n      final long a = start;\n      final long b = end;\n\n      JavaPairRDD&lt;Row, Long&gt; rddSousEnsemble = rdd.filter(f -&gt; f._2() &gt;= a &amp;&amp; f._2() &lt; b);\n      sousDatasets.add(session.createDataFrame(rddSousEnsemble.keys(), dataset.schema()));\n\n      start += nombreObjetsParPage;\n      end += nombreObjetsParPage;\n   }\n   while(start &lt; count);\n\n   return sousDatasets;\n}\n</code></pre>\n<p>That complies to this test (provided you change the <code>Dataset&lt;Row&gt; catalogue</code> to one you have):</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Obtention des Dataset de row, pagins.\n */\n@Test\n@DisplayName(&quot;Dataset catalogue (row, pagins) : jeux de donnes.&quot;)\nvoid rowCatalogueDatasetsPagines() {\n   LOGGER.info(&quot;Lecture du catalogue datagouv en Row, pagins...&quot;);\n   Dataset&lt;Row&gt; catalogue = this.catalogueDataset.rowCatalogueDataset(this.session).limit(70);\n\n   List&lt;Dataset&lt;Row&gt;&gt; pagines = AbstractSparkDataset.paginer(this.session, catalogue, 20);\n   assertEquals(4, pagines.size(), &quot;Le nombre de sous-datasets n'est pas celui attendu&quot;);\n\n   for(int i=0; i &lt; 3; i ++) {\n      pagines.get(i).show(1000, false);\n      assertEquals(20, pagines.get(i).count(), MessageFormat.format(&quot;Le nombre d''enregistrements du sous-datasets d''index {0}, {1}, n''est pas celui attendu&quot;, i, pagines.get(i).count()));\n   }\n\n   pagines.get(3).show(1000, false);\n   assertEquals(10, pagines.get(3).count(), MessageFormat.format(&quot;Le dernier sous-dataset n''a pas le bon nombre d''enregitrements, mais {0}&quot;, pagines.get(3).count()));\n}\n</code></pre>\n<p>To be more complete, this next method will return the sub datasets as <code>List&lt;Dataset&lt;JeuDeDonnees&gt;&gt;</code> or the object you're willing to have, given the mapper from a <code>Datatset&lt;Row&gt;</code> to a <code>Dataset&lt;target object&gt;</code> you can provide:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n  * Paginer un dataset en renvoyant plusieurs datasets d'un nombre maximal d'objets mtiers.\n  * @param session Session Spark.\n  * @param dataset Dataset d'enregistrements  diviser.\n  * @param encoder Fonction d'encodage en dataset d'objets mtiers d'un Dataset&lt;Row&gt;.\n  * @param nombreObjetsParPage Nombre d'objets maximal par dataset cr.\n  * @param &lt;T&gt; Type de l'objet mtier cible que l'on veut obtenir.\n  * @return Liste des datasets d'objet mtier crs.\n  */\npublic static &lt;T&gt; List&lt;Dataset&lt;T&gt;&gt; paginer(SparkSession session, Dataset&lt;?&gt; dataset, Function&lt;Dataset&lt;Row&gt;, Dataset&lt;T&gt;&gt; encoder, int nombreObjetsParPage) {\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination en objets ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(dataset, &quot;Le dataset  diviser pour sa pagination en objets ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(encoder, &quot;La fonction d'encodage, du type Dataset&lt;Row&gt; vers le type d'objet mtier dsir pour la pagination en objets d'un dataset, ne peut pas valoir null.&quot;);\n\n   List&lt;Dataset&lt;Row&gt;&gt; blocsEnregistrements = paginer(session, dataset.toDF(), nombreObjetsParPage);\n   return blocsEnregistrements.stream().map(encoder).toList();\n}\n</code></pre>\n<p>Eventually, to get all of this, smoothly, as a <code>Stream&lt;JeuDeDonnees&gt;</code>, I had to create a dedicated iterator:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Un iterateur sur les datasets qui n'extrait leur contenu que si c'est ncessaire.\n * @param &lt;T&gt; Les lments enfants transports par les Dataset itrs (Dataset&lt;T&gt;).\n */\npublic class DatasetsItemIterator&lt;T&gt; implements Iterator&lt;T&gt; {\n   /** Logger. */\n   private static final Logger LOGGER = LoggerFactory.getLogger(DatasetsItemIterator.class);\n\n   /** Itrateur sur les datasets. */\n   private final Iterator&lt;Dataset&lt;T&gt;&gt; datasetIterator;\n\n   /** Dataset actuellement parcouru. */\n   private Dataset&lt;T&gt; currentDataset;\n\n   /** Flux sur les objets mtiers du dataset */\n   private Iterator&lt;T&gt; elementsIterator = null;\n\n   /** Page actuelle */\n   private long currentPage = 0;\n\n   /** Page maximale */\n   private final long maxPage;\n\n   /**\n    * Construire un itrateur sur un ou plusieurs datasets.\n    * @param datasets Datasets.\n    */\n   @SafeVarargs\n   public DatasetsItemIterator(Dataset&lt;T&gt;... datasets) {\n      this(Arrays.asList(datasets));\n   }\n\n   /**\n    * Construire un itrateur sur une liste de datasets.\n    * @param datasets Datasets.\n    */\n   public DatasetsItemIterator(List&lt;Dataset&lt;T&gt;&gt; datasets) {\n      this.datasetIterator = datasets.iterator();\n      this.maxPage = datasets.size();\n   }\n\n   @Override\n   public boolean hasNext() {\n      // Si aucun dataset n'a t encore observ, prendre le premier, s'il y en a un.\n      if (this.currentDataset == null &amp;&amp; nextDataset() == false) {\n         return false;\n      }\n\n      // Si un itrateur existe sur des lments et qu'il en a encore  donner, rpondre Oui.\n      if (this.elementsIterator.hasNext()) {\n         return true;\n      }\n\n      // Sinon, tenter de parcourir un nouveau dataset.\n      return nextDataset();\n   }\n\n   @Override\n   public T next() {\n      if (hasNext()) {\n         return this.elementsIterator.next();\n      }\n\n      throw new NoSuchElementException(&quot;La famille de datasets n'a plus d'lments  fournir.&quot;);\n   }\n\n   /**\n    * Prparer l'itration du dataset suivant.\n    * @return true s'il en existe un, et qu'il a des lments disponibles.\n    */\n   private boolean nextDataset() {\n      if (this.datasetIterator.hasNext() == false) {\n         return false;\n      }\n\n      this.currentPage ++;\n      LOGGER.info(&quot;Chargement de la page {}/{} du dataset pagin.&quot;, this.currentPage, this.maxPage);\n\n      this.currentDataset = this.datasetIterator.next();\n      this.elementsIterator = this.currentDataset.collectAsList().iterator();\n\n      return this.elementsIterator.hasNext();\n   }\n}\n</code></pre>\n<p>And create this method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Paginer en stream.\n * @param session Session Spark.\n * @param dataset Dataset  diviser.\n * @param encoder Fonction d'encodage.\n * @param nombreObjetsParPage Nombre d'objets par page.\n * @return Flux d'objets mtiers.\n * @param &lt;T&gt; Classe des objets mtiers renvoys par le stream.\n */\npublic static &lt;T&gt; Stream&lt;T&gt; paginerEnStream(SparkSession session, Dataset&lt;?&gt; dataset, Function&lt;Dataset&lt;Row&gt;, Dataset&lt;T&gt;&gt; encoder, int nombreObjetsParPage) {\n   Objects.requireNonNull(session, &quot;La session spark pour diviser un dataset pour sa pagination en stream d'objets ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(dataset, &quot;Le dataset  diviser pour sa pagination en stream d'objets ne peut pas valoir null.&quot;);\n   Objects.requireNonNull(encoder, &quot;La fonction d'encodage, du type Dataset&lt;Row&gt; vers le type d'objet mtier dsir pour la pagination en stream d'objets d'un dataset, ne peut pas valoir null.&quot;);\n\n   DatasetsItemIterator&lt;T&gt; objetsMetiersIterator = new DatasetsItemIterator&lt;&gt;(paginer(session, dataset, encoder, nombreObjetsParPage));\n   return StreamSupport.stream(Spliterators.spliteratorUnknownSize(objetsMetiersIterator, Spliterator.ORDERED), false);\n}\n</code></pre>\n<p>My solution works:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Obtention des Dataset d'objets mtiers pagins, sous forme de stream.\n */\n@Test\n@DisplayName(&quot;Dataset catalogue (objets mtiers, pagins et streams) : jeux de donnes.&quot;)\nvoid catalogueDatasetsObjetsMetiersPaginesStreames() {\n   LOGGER.info(&quot;Lecture du catalogue datagouv en objets mtiers, pagins et streams...&quot;);\n   Dataset&lt;Row&gt; catalogue = this.catalogueDataset.rowCatalogueDataset(this.session,(AbstractSparkDataset.Verification[]) null).limit(70);\n\n   assertDoesNotThrow(() -&gt; {\n      Stream&lt;JeuDeDonnees&gt; jeuxDeDonnees = AbstractSparkDataset.paginerEnStream(this.session, catalogue, p -&gt; this.catalogueDataset.catalogueDataset(p), 20);\n\n      List&lt;JeuDeDonnees&gt; extrait = jeuxDeDonnees.limit(22).collect(Collectors.toList());\n      assertEquals(22, extrait.size(), &quot;Le flux n'a pas apport le nombre de jeux de donnes attendu&quot;);\n      LOGGER.info(ReflectionToStringBuilder.toString(extrait));\n   });\n}\n</code></pre>\n<p>And I'm happy to see in my logs that only the page 1 and 2 are consumed in my test.</p>\n<pre><code>2023-04-29 08:10:08.375  INFO 101742 --- [           main] fr.ecoemploi.spark.DatasetsItemIterator  : Chargement de la page 1/4 du dataset pagin.\n2023-04-29 08:10:09.677  INFO 101742 --- [           main] fr.ecoemploi.spark.DatasetsItemIterator  : Chargement de la page 2/4 du dataset pagin.\n</code></pre>\n<p>But it's drawback is: being slow. Because it does plenty of <code>filter</code>.</p>\n<p>And I haven't checked (yet) deeply if my list of methods are tuned enough to ensure that when the page 2 is being served for object streaming, the page 1 can be garbage collected (if Java feels that need).</p>\n<p>Because, if it's for that, at the end, the full whole Dataset (that was splitted in pages at the beginning) is just here in memory with its millions of objects, it wouldn't be perfect.</p>\n"}],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682750360,"creation_date":1682574275,"question_id":76117091,"body_markdown":"I have created a:\r\n\r\n```java\r\n// &#39;datasets&#39; is the name the provider gave for that source\r\nDataset&lt;Row&gt; datasets = session.read().schema(schema).format(&quot;csv&quot;).load(&quot;datasets.csv&quot;);\r\n```\r\n\r\nThen a:\r\n\r\n```\r\nDataset&lt;JeuDeDonnees&gt; jeuxDeDonnees = datasets.map((MapFunction&lt;Row, JeuDeDonnees&gt;)row -&gt; \r\n   { /* [...mappings...] */ return new JeuDeDonnees(...); }, Encoders.bean(JeuDeDonnees.class));\r\n}\r\n```\r\n\r\nThat is for the data management part of my application.\r\n\r\nI am willing to offer an access to this whole data to my services (for the end user).  \r\nI can&#39;t return to the full `List&lt;JeuDeDonnees&gt;` _Spark_ extracted, of course: it would overflow everything.\r\n\r\nI would like:\r\n\r\n1. either returning `JeuDeDonnees` objects one by one, with a `Stream` \r\n\r\n   `Stream&lt;JeuDeDonnees&gt; getNext()`, if possible ?  \r\n   But then, how may I link it to its underlying `jeuxDeDonnees` _Spark_ dataset, a way that _Spark_ stays rather smooth when returning data?\r\n\r\n2. either returning `List&lt;JeuDeDonnees&gt; getNext(50)`  \r\n   but then, the mechanism would be more complicated to put in place, I think. As I should avoid something telling _Spark_ &quot;_start at offset x this time_&quot; (for 50 `jeuxDeDonnees`), because doing so would cost a lot, for each offset move, (if it would even be possible, what I am unsure).  \r\n....another way to ask this question is: a `Dataset::take(int n)` method exists that returns the _n_ first objects of a `Dataset`. Does another method exist that return the _n_ next objects coming after?\r\n\r\nWhat the proper way to solve my problem?","title":"I created a Dataset&lt;Row&gt; from a csv file, and then a Dataset&lt;JeuDeDonnees&gt; from it. How may I read JeuDeDonnees objects, one by one, like in a stream?","body":"<p>I have created a:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// 'datasets' is the name the provider gave for that source\nDataset&lt;Row&gt; datasets = session.read().schema(schema).format(&quot;csv&quot;).load(&quot;datasets.csv&quot;);\n</code></pre>\n<p>Then a:</p>\n<pre><code>Dataset&lt;JeuDeDonnees&gt; jeuxDeDonnees = datasets.map((MapFunction&lt;Row, JeuDeDonnees&gt;)row -&gt; \n   { /* [...mappings...] */ return new JeuDeDonnees(...); }, Encoders.bean(JeuDeDonnees.class));\n}\n</code></pre>\n<p>That is for the data management part of my application.</p>\n<p>I am willing to offer an access to this whole data to my services (for the end user).<br />\nI can't return to the full <code>List&lt;JeuDeDonnees&gt;</code> <em>Spark</em> extracted, of course: it would overflow everything.</p>\n<p>I would like:</p>\n<ol>\n<li><p>either returning <code>JeuDeDonnees</code> objects one by one, with a <code>Stream</code></p>\n<p><code>Stream&lt;JeuDeDonnees&gt; getNext()</code>, if possible ?<br />\nBut then, how may I link it to its underlying <code>jeuxDeDonnees</code> <em>Spark</em> dataset, a way that <em>Spark</em> stays rather smooth when returning data?</p>\n</li>\n<li><p>either returning <code>List&lt;JeuDeDonnees&gt; getNext(50)</code><br />\nbut then, the mechanism would be more complicated to put in place, I think. As I should avoid something telling <em>Spark</em> &quot;<em>start at offset x this time</em>&quot; (for 50 <code>jeuxDeDonnees</code>), because doing so would cost a lot, for each offset move, (if it would even be possible, what I am unsure).<br />\n....another way to ask this question is: a <code>Dataset::take(int n)</code> method exists that returns the <em>n</em> first objects of a <code>Dataset</code>. Does another method exist that return the <em>n</em> next objects coming after?</p>\n</li>\n</ol>\n<p>What the proper way to solve my problem?</p>\n"},{"tags":["java","nacos"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682699253,"post_id":76131349,"comment_id":134261930,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1682714754,"post_id":76131349,"comment_id":134264776,"body_markdown":"Are you sure that a solution that requires the change of _exactly this_ property is a very maintainable one? This property is provided by Spring automatically on purpose and while it might be possible to change it at runtime, it probably will do more harm than good to your application when it starts to fiddle with such internal stuff.","body":"Are you sure that a solution that requires the change of <i>exactly this</i> property is a very maintainable one? This property is provided by Spring automatically on purpose and while it might be possible to change it at runtime, it probably will do more harm than good to your application when it starts to fiddle with such internal stuff."},{"owner":{"account_id":26175647,"reputation":1,"user_id":19859848,"display_name":"wenjun"},"score":0,"creation_date":1682749832,"post_id":76131349,"comment_id":134267711,"body_markdown":"No, not exactly this property. Actually any property is fine, as long as the solution create the sharding of the service automatically. In cloud environment, every indexer will register under the name &quot;indexer&quot;, and probably the easier solutiuon now is to let the register center to do the job. I currently use Nacos, and are seeking a solution regarding Nacos. I&#39;v edited the original question.","body":"No, not exactly this property. Actually any property is fine, as long as the solution create the sharding of the service automatically. In cloud environment, every indexer will register under the name &quot;indexer&quot;, and probably the easier solutiuon now is to let the register center to do the job. I currently use Nacos, and are seeking a solution regarding Nacos. I&#39;v edited the original question."}],"owner":{"account_id":26175647,"reputation":1,"user_id":19859848,"display_name":"wenjun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682750183,"creation_date":1682697735,"question_id":76131349,"body_markdown":"I&#39;m implementing a distributed text search engine. A document need to be sent to a corresponding indexer appliction based on the key. So there will be indexer-1, indexer-2...indexer-n spring applications. We cannot decide how many indexer there will be at the begining, but all indexer will register itself on Nacos(any register center).\r\n\r\nNow I want Nacos create the sharding of the service automatically. Say there are 10 indexer in the cluster, then 3 of them will be indexer-1, 3 indexer-2 and 4 indexer-3.\r\n\r\n\r\n(I know the existence of ElasticSearch, and need to implement my own) \r\n\r\nNow I am just sitting there trying to wrap my head around.","title":"How to let Nacos create a sharding of the service?","body":"<p>I'm implementing a distributed text search engine. A document need to be sent to a corresponding indexer appliction based on the key. So there will be indexer-1, indexer-2...indexer-n spring applications. We cannot decide how many indexer there will be at the begining, but all indexer will register itself on Nacos(any register center).</p>\n<p>Now I want Nacos create the sharding of the service automatically. Say there are 10 indexer in the cluster, then 3 of them will be indexer-1, 3 indexer-2 and 4 indexer-3.</p>\n<p>(I know the existence of ElasticSearch, and need to implement my own)</p>\n<p>Now I am just sitting there trying to wrap my head around.</p>\n"},{"tags":["java","string","performance","optimization"],"comments":[{"owner":{"account_id":80775,"reputation":80356,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1288379192,"post_id":4052840,"comment_id":4355171,"body_markdown":"The best way would be to change your requirements if possible.  Accept a StringBuilder instead of a String and you can modify it directly.","body":"The best way would be to change your requirements if possible.  Accept a StringBuilder instead of a String and you can modify it directly."},{"owner":{"account_id":12145,"reputation":40207,"user_id":23771,"accept_rate":60,"display_name":"Mike Dunlavey"},"score":0,"creation_date":1288382048,"post_id":4052840,"comment_id":4355644,"body_markdown":"Well this is not an answer because it&#39;s outside of Java, and relies on ASCII encoding and on knowing that the character is already alphabetic. It&#39;s an old-timer&#39;s hack: `c[0] |= &#39; &#39;;`","body":"Well this is not an answer because it&#39;s outside of Java, and relies on ASCII encoding and on knowing that the character is already alphabetic. It&#39;s an old-timer&#39;s hack: <code>c[0] |= &#39; &#39;;</code>"},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1393678821,"post_id":4052840,"comment_id":33548619,"body_markdown":"possible duplicate of [Converting to upper and lower case in Java](http://stackoverflow.com/questions/2375649/converting-to-upper-and-lower-case-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2375649/converting-to-upper-and-lower-case-in-java\">Converting to upper and lower case in Java</a>"},{"owner":{"account_id":120200,"reputation":5138,"user_id":312480,"accept_rate":95,"display_name":"Andy"},"score":1,"creation_date":1394687257,"post_id":4052840,"comment_id":34003880,"body_markdown":"that&#39;s a different question","body":"that&#39;s a different question"}],"answers":[{"tags":[],"owner":{"account_id":21485,"reputation":24899,"user_id":52233,"display_name":"Alan Geleynse"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1288363115,"creation_date":1288363115,"answer_id":4052858,"question_id":4052840,"body_markdown":"Strings in Java are immutable, so either way a new string will be created.\r\n\r\nYour first example will probably be slightly more efficient because it only needs to create a new string and not a temporary character array.","title":"Most efficient way to make the first character of a String lower case?","body":"<p>Strings in Java are immutable, so either way a new string will be created.</p>\n\n<p>Your first example will probably be slightly more efficient because it only needs to create a new string and not a temporary character array.</p>\n"},{"tags":[],"owner":{"account_id":51695,"reputation":4428,"user_id":154494,"accept_rate":50,"display_name":"Carlos Tasada"},"down_vote_count":3,"up_vote_count":28,"is_accepted":false,"score":25,"last_activity_date":1438432324,"creation_date":1288363439,"answer_id":4052914,"question_id":4052840,"body_markdown":"When it comes to string manipulation take a look to Jakarta Commons Lang [StringUtils][1].\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#uncapitalize(java.lang.String)","title":"Most efficient way to make the first character of a String lower case?","body":"<p>When it comes to string manipulation take a look to Jakarta Commons Lang <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#uncapitalize(java.lang.String)\" rel=\"noreferrer\">StringUtils</a>.</p>\n"},{"tags":[],"owner":{"account_id":117745,"reputation":5429,"user_id":308219,"display_name":"Michael Konietzka"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1288380249,"creation_date":1288374650,"answer_id":4054513,"question_id":4052840,"body_markdown":"Despite a char oriented approach I would suggest a String oriented solution.\n[String.toLowerCase][1] is Locale specific, so I would take this issue into account. `String.toLowerCase` is to prefer for lower-caseing according to [Character.toLowerCase][2].\nAlso a char oriented solution is not full unicode compatible, because [Character.toLowerCase][2]  cannot handle supplementary characters.\n\n    public static final String uncapitalize(final String originalStr,\n                final Locale locale) {\n            final int splitIndex = 1;\n            final String result;\n            if (originalStr.isEmpty()) {\n            result = originalStr;\n            } else {\n            final String first = originalStr.substring(0, splitIndex).toLowerCase(\n                    locale);\n            final String rest = originalStr.substring(splitIndex);\n            final StringBuilder uncapStr = new StringBuilder(first).append(rest);\n            result = uncapStr.toString();\n            }\n            return result;\n        }\n\n**UPDATE:**\nAs an example how important the locale setting is let us lowercase `I` in turkish and german:\n\n \n\n    System.out.println(uncapitalize(&quot;I&quot;, new Locale(&quot;TR&quot;,&quot;tr&quot;)));\n    System.out.println(uncapitalize(&quot;I&quot;, new Locale(&quot;DE&quot;,&quot;de&quot;)));\n\nwill output two different results:\n\n&gt; \n&gt;\n&gt; i\n\n\n\n\n\n\n  [1]: http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#toLowerCase(java.util.Locale)\n  [2]: http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toLowerCase%28char%29","title":"Most efficient way to make the first character of a String lower case?","body":"<p>Despite a char oriented approach I would suggest a String oriented solution.\n<a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#toLowerCase(java.util.Locale)\" rel=\"noreferrer\">String.toLowerCase</a> is Locale specific, so I would take this issue into account. <code>String.toLowerCase</code> is to prefer for lower-caseing according to <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toLowerCase%28char%29\" rel=\"noreferrer\">Character.toLowerCase</a>.\nAlso a char oriented solution is not full unicode compatible, because <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toLowerCase%28char%29\" rel=\"noreferrer\">Character.toLowerCase</a>  cannot handle supplementary characters.</p>\n<pre><code>public static final String uncapitalize(final String originalStr,\n            final Locale locale) {\n        final int splitIndex = 1;\n        final String result;\n        if (originalStr.isEmpty()) {\n        result = originalStr;\n        } else {\n        final String first = originalStr.substring(0, splitIndex).toLowerCase(\n                locale);\n        final String rest = originalStr.substring(splitIndex);\n        final StringBuilder uncapStr = new StringBuilder(first).append(rest);\n        result = uncapStr.toString();\n        }\n        return result;\n    }\n</code></pre>\n<p><strong>UPDATE:</strong>\nAs an example how important the locale setting is let us lowercase <code>I</code> in turkish and german:</p>\n<pre><code>System.out.println(uncapitalize(&quot;I&quot;, new Locale(&quot;TR&quot;,&quot;tr&quot;)));\nSystem.out.println(uncapitalize(&quot;I&quot;, new Locale(&quot;DE&quot;,&quot;de&quot;)));\n</code></pre>\n<p>will output two different results:</p>\n<blockquote>\n<p></p>\n<p>i</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1818645,"reputation":1408,"user_id":1653210,"display_name":"Daniel Pacak"},"down_vote_count":0,"up_vote_count":104,"is_accepted":false,"score":104,"last_activity_date":1346966874,"creation_date":1346966874,"answer_id":12308665,"question_id":4052840,"body_markdown":"I came across a nice alternative if you don&#39;t want to use a third-party library:\r\n\r\n    import java.beans.Introspector;\r\n\r\n    Assert.assertEquals(&quot;someInputString&quot;, Introspector.decapitalize(&quot;SomeInputString&quot;));\r\n","title":"Most efficient way to make the first character of a String lower case?","body":"<p>I came across a nice alternative if you don't want to use a third-party library:</p>\n\n<pre><code>import java.beans.Introspector;\n\nAssert.assertEquals(\"someInputString\", Introspector.decapitalize(\"SomeInputString\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1170783,"reputation":8281,"user_id":1148030,"accept_rate":90,"display_name":"Peter Lamberg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1394268037,"creation_date":1394268037,"answer_id":22267095,"question_id":4052840,"body_markdown":"If what you need is very simple (eg. java class names, no locales), you can also use the [CaseFormat][1] class in the [Google Guava][2] library.\r\n\r\n    String converted = CaseFormat.UPPER_CAMEL.to(CaseFormat.LOWER_CAMEL, &quot;FooBar&quot;);\r\n    assertEquals(&quot;fooBar&quot;, converted);\r\n\r\nOr you can prepare and reuse a converter object, which could be more efficient.\r\n\r\n    Converter&lt;String, String&gt; converter=\r\n        CaseFormat.UPPER_CAMEL.converterTo(CaseFormat.LOWER_CAMEL);\r\n    \r\n    assertEquals(&quot;fooBar&quot;, converter.convert(&quot;FooBar&quot;));\r\n\r\nTo better understand philosophy of the Google Guava string manipulation, check out [this wiki page][3].\r\n\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/CaseFormat.html\r\n  [2]: https://code.google.com/p/guava-libraries/\r\n  [3]: https://code.google.com/p/guava-libraries/wiki/StringsExplained","title":"Most efficient way to make the first character of a String lower case?","body":"<p>If what you need is very simple (eg. java class names, no locales), you can also use the <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/CaseFormat.html\" rel=\"nofollow\">CaseFormat</a> class in the <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"nofollow\">Google Guava</a> library.</p>\n\n<pre><code>String converted = CaseFormat.UPPER_CAMEL.to(CaseFormat.LOWER_CAMEL, \"FooBar\");\nassertEquals(\"fooBar\", converted);\n</code></pre>\n\n<p>Or you can prepare and reuse a converter object, which could be more efficient.</p>\n\n<pre><code>Converter&lt;String, String&gt; converter=\n    CaseFormat.UPPER_CAMEL.converterTo(CaseFormat.LOWER_CAMEL);\n\nassertEquals(\"fooBar\", converter.convert(\"FooBar\"));\n</code></pre>\n\n<p>To better understand philosophy of the Google Guava string manipulation, check out <a href=\"https://code.google.com/p/guava-libraries/wiki/StringsExplained\" rel=\"nofollow\">this wiki page</a>.</p>\n"},{"tags":[],"owner":{"account_id":4300217,"reputation":878,"user_id":3514082,"display_name":"Sebastian"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1403901760,"creation_date":1403901760,"answer_id":24460478,"question_id":4052840,"body_markdown":"If you want to use Apache Commons you can do the following:\r\n\r\n    import org.apache.commons.lang3.text.WordUtils;\r\n    [...] \r\n    String s = &quot;SomeString&quot;; \r\n    String firstLower = WordUtils.uncapitalize(s);\r\n\r\nResult: someString","title":"Most efficient way to make the first character of a String lower case?","body":"<p>If you want to use Apache Commons you can do the following:</p>\n\n<pre><code>import org.apache.commons.lang3.text.WordUtils;\n[...] \nString s = \"SomeString\"; \nString firstLower = WordUtils.uncapitalize(s);\n</code></pre>\n\n<p>Result: someString</p>\n"},{"tags":[],"owner":{"account_id":3176704,"reputation":1508,"user_id":2684390,"display_name":"Bae Cheol Shin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1414604502,"creation_date":1414604502,"answer_id":26637204,"question_id":4052840,"body_markdown":"    String testString = &quot;SomeInputString&quot;;\r\n    String firstLetter = testString.substring(0,1).toLowerCase();\r\n    String restLetters = testString.substring(1);\r\n    String resultString = firstLetter + restLetters;","title":"Most efficient way to make the first character of a String lower case?","body":"<pre><code>String testString = \"SomeInputString\";\nString firstLetter = testString.substring(0,1).toLowerCase();\nString restLetters = testString.substring(1);\nString resultString = firstLetter + restLetters;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4283000,"reputation":63,"user_id":3501758,"accept_rate":100,"display_name":"user3501758"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424352803,"creation_date":1424351396,"answer_id":28607286,"question_id":4052840,"body_markdown":"I have come accross this only today.  Tried to do it myself in the most pedestrian way.  That took one line, tho longish. Here goes\r\n\r\n    String str = &quot;TaxoRank&quot;; \r\n\r\n    System.out.println(&quot; Before str = &quot; + str); \r\n\r\n    str = str.replaceFirst(str.substring(0,1), str.substring(0,1).toLowerCase());\r\n\r\n    System.out.println(&quot; After str = &quot; + str);\r\n\r\nGives:\r\n\r\n Before str = TaxoRanks\r\n\r\n   After str = taxoRanks\r\n ","title":"Most efficient way to make the first character of a String lower case?","body":"<p>I have come accross this only today.  Tried to do it myself in the most pedestrian way.  That took one line, tho longish. Here goes</p>\n\n<pre><code>String str = \"TaxoRank\"; \n\nSystem.out.println(\" Before str = \" + str); \n\nstr = str.replaceFirst(str.substring(0,1), str.substring(0,1).toLowerCase());\n\nSystem.out.println(\" After str = \" + str);\n</code></pre>\n\n<p>Gives:</p>\n\n<p>Before str = TaxoRanks</p>\n\n<p>After str = taxoRanks</p>\n"},{"tags":[],"owner":{"account_id":4785112,"reputation":918,"user_id":3865846,"accept_rate":75,"display_name":"Hllink"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1438291203,"creation_date":1438289591,"answer_id":31733835,"question_id":4052840,"body_markdown":"A very short and simple static method to archive what you want:\r\n\r\n\r\n    public static String decapitalizeString(String string) {\r\n        return string == null || string.isEmpty() ? &quot;&quot; : Character.toLowerCase(string.charAt(0)) + string.substring(1);\r\n    }","title":"Most efficient way to make the first character of a String lower case?","body":"<p>A very short and simple static method to archive what you want:</p>\n\n<pre><code>public static String decapitalizeString(String string) {\n    return string == null || string.isEmpty() ? \"\" : Character.toLowerCase(string.charAt(0)) + string.substring(1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1075043,"reputation":19715,"user_id":1073386,"accept_rate":83,"display_name":"Adam Stelmaszczyk"},"down_vote_count":0,"up_vote_count":160,"is_accepted":true,"score":160,"last_activity_date":1682749781,"creation_date":1438295441,"answer_id":31735171,"question_id":4052840,"body_markdown":"I tested the promising approaches using [JMH][1]. Full benchmark [code][2].\r\n\r\nAssumption during the tests (to avoid checking the corner cases every time): the input String length is always greater than 1.\r\n\r\nResults\r\n-------\r\n\r\n    Benchmark           Mode  Cnt         Score        Error  Units\r\n    MyBenchmark.test1  thrpt   20  10463220.493 &#177; 288805.068  ops/s\r\n    MyBenchmark.test2  thrpt   20  14730158.709 &#177; 530444.444  ops/s\r\n    MyBenchmark.test3  thrpt   20  16079551.751 &#177;  56884.357  ops/s\r\n    MyBenchmark.test4  thrpt   20   9762578.446 &#177; 584316.582  ops/s\r\n    MyBenchmark.test5  thrpt   20   6093216.066 &#177; 180062.872  ops/s\r\n    MyBenchmark.test6  thrpt   20   2104102.578 &#177;  18705.805  ops/s\r\n\r\nThe score are operations per second, the more the better. \r\n\r\nTests\r\n--------\r\n\r\n1. `test1` was first Andy&#39;s and Hllink&#39;s approach:\r\n\r\n        string = Character.toLowerCase(string.charAt(0)) + string.substring(1);\r\n\r\n2. `test2` was second Andy&#39;s approach. It is also [`Introspector.decapitalize()`][3] suggested by Daniel, but without two `if` statements. First `if` was removed because of the testing assumption. The second one was removed, because it was violating correctness (i.e. input `&quot;HI&quot;` would return `&quot;HI&quot;`). This was almost the fastest.\r\n\r\n        char c[] = string.toCharArray();\r\n        c[0] = Character.toLowerCase(c[0]);\r\n        string = new String(c);\r\n\r\n3. `test3` was a modification of `test2`, but instead of `Character.toLowerCase()`, I was adding 32, which works correctly if and only if the string is in ASCII. This was the fastest. `c[0] |= &#39; &#39;` from Mike&#39;s [comment](https://stackoverflow.com/questions/4052840/most-efficient-way-to-make-the-first-character-of-a-string-lower-case#comment-4355644) gave the same performance.\r\n\r\n        char c[] = string.toCharArray();\r\n        c[0] += 32;\r\n        string = new String(c);\r\n\r\n4. `test4` used `StringBuilder`.\r\n\r\n        StringBuilder sb = new StringBuilder(string);\r\n        sb.setCharAt(0, Character.toLowerCase(sb.charAt(0)));\r\n        string = sb.toString();\r\n\r\n5. `test5` used two `substring()` calls.\r\n\r\n        string = string.substring(0, 1).toLowerCase() + string.substring(1);\r\n\r\n6. `test6` uses reflection to change [`char value[]`][4] directly in String. This was the slowest.\r\n\r\n        try {\r\n            Field field = String.class.getDeclaredField(&quot;value&quot;);\r\n            field.setAccessible(true);\r\n            char[] value = (char[]) field.get(string);\r\n            value[0] = Character.toLowerCase(value[0]);\r\n        } catch (IllegalAccessException e) {\r\n            e.printStackTrace();\r\n        } catch (NoSuchFieldException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nConclusions\r\n-------\r\n\r\nIf the String length is always greater than 0, use `test2`.\r\n\r\nIf not, we have to check the corner cases:\r\n\r\n    public static String decapitalize(String string) {\r\n        if (string == null || string.length() == 0) {\r\n            return string;\r\n        }\r\n\r\n        char c[] = string.toCharArray();\r\n        c[0] = Character.toLowerCase(c[0]);\r\n\r\n        return new String(c);\r\n    }\r\n\r\n&lt;!----&gt;\r\n\r\nIf you are sure that your text will be always in ASCII and you are looking for extreme performance because you found this code in the  bottleneck, use `test3`.\r\n\r\n  [1]: http://openjdk.java.net/projects/code-tools/jmh/\r\n  [2]: https://gist.github.com/AdamStelmaszczyk/5593723da543940acfd1\r\n  [3]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/beans/Introspector.java#Introspector.decapitalize%28java.lang.String%29\r\n  [4]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.0value","title":"Most efficient way to make the first character of a String lower case?","body":"<p>I tested the promising approaches using <a href=\"http://openjdk.java.net/projects/code-tools/jmh/\" rel=\"nofollow noreferrer\">JMH</a>. Full benchmark <a href=\"https://gist.github.com/AdamStelmaszczyk/5593723da543940acfd1\" rel=\"nofollow noreferrer\">code</a>.</p>\n<p>Assumption during the tests (to avoid checking the corner cases every time): the input String length is always greater than 1.</p>\n<h2>Results</h2>\n<pre><code>Benchmark           Mode  Cnt         Score        Error  Units\nMyBenchmark.test1  thrpt   20  10463220.493  288805.068  ops/s\nMyBenchmark.test2  thrpt   20  14730158.709  530444.444  ops/s\nMyBenchmark.test3  thrpt   20  16079551.751   56884.357  ops/s\nMyBenchmark.test4  thrpt   20   9762578.446  584316.582  ops/s\nMyBenchmark.test5  thrpt   20   6093216.066  180062.872  ops/s\nMyBenchmark.test6  thrpt   20   2104102.578   18705.805  ops/s\n</code></pre>\n<p>The score are operations per second, the more the better.</p>\n<h2>Tests</h2>\n<ol>\n<li><p><code>test1</code> was first Andy's and Hllink's approach:</p>\n<pre><code> string = Character.toLowerCase(string.charAt(0)) + string.substring(1);\n</code></pre>\n</li>\n<li><p><code>test2</code> was second Andy's approach. It is also <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/beans/Introspector.java#Introspector.decapitalize%28java.lang.String%29\" rel=\"nofollow noreferrer\"><code>Introspector.decapitalize()</code></a> suggested by Daniel, but without two <code>if</code> statements. First <code>if</code> was removed because of the testing assumption. The second one was removed, because it was violating correctness (i.e. input <code>&quot;HI&quot;</code> would return <code>&quot;HI&quot;</code>). This was almost the fastest.</p>\n<pre><code> char c[] = string.toCharArray();\n c[0] = Character.toLowerCase(c[0]);\n string = new String(c);\n</code></pre>\n</li>\n<li><p><code>test3</code> was a modification of <code>test2</code>, but instead of <code>Character.toLowerCase()</code>, I was adding 32, which works correctly if and only if the string is in ASCII. This was the fastest. <code>c[0] |= ' '</code> from Mike's <a href=\"https://stackoverflow.com/questions/4052840/most-efficient-way-to-make-the-first-character-of-a-string-lower-case#comment-4355644\">comment</a> gave the same performance.</p>\n<pre><code> char c[] = string.toCharArray();\n c[0] += 32;\n string = new String(c);\n</code></pre>\n</li>\n<li><p><code>test4</code> used <code>StringBuilder</code>.</p>\n<pre><code> StringBuilder sb = new StringBuilder(string);\n sb.setCharAt(0, Character.toLowerCase(sb.charAt(0)));\n string = sb.toString();\n</code></pre>\n</li>\n<li><p><code>test5</code> used two <code>substring()</code> calls.</p>\n<pre><code> string = string.substring(0, 1).toLowerCase() + string.substring(1);\n</code></pre>\n</li>\n<li><p><code>test6</code> uses reflection to change <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.0value\" rel=\"nofollow noreferrer\"><code>char value[]</code></a> directly in String. This was the slowest.</p>\n<pre><code> try {\n     Field field = String.class.getDeclaredField(&quot;value&quot;);\n     field.setAccessible(true);\n     char[] value = (char[]) field.get(string);\n     value[0] = Character.toLowerCase(value[0]);\n } catch (IllegalAccessException e) {\n     e.printStackTrace();\n } catch (NoSuchFieldException e) {\n     e.printStackTrace();\n }\n</code></pre>\n</li>\n</ol>\n<h2>Conclusions</h2>\n<p>If the String length is always greater than 0, use <code>test2</code>.</p>\n<p>If not, we have to check the corner cases:</p>\n<pre><code>public static String decapitalize(String string) {\n    if (string == null || string.length() == 0) {\n        return string;\n    }\n\n    char c[] = string.toCharArray();\n    c[0] = Character.toLowerCase(c[0]);\n\n    return new String(c);\n}\n</code></pre>\n\n<p>If you are sure that your text will be always in ASCII and you are looking for extreme performance because you found this code in the  bottleneck, use <code>test3</code>.</p>\n"},{"tags":[],"owner":{"account_id":5256798,"reputation":320,"user_id":4199462,"display_name":"Vivek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1557337079,"creation_date":1557337079,"answer_id":56046279,"question_id":4052840,"body_markdown":"    val str = &quot;Hello&quot;\r\n    s&quot;${str.head.toLower}${str.tail}&quot;\r\n\r\nResult:\r\n\r\n    res4: String = hello","title":"Most efficient way to make the first character of a String lower case?","body":"<pre><code>val str = \"Hello\"\ns\"${str.head.toLower}${str.tail}\"\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>res4: String = hello\n</code></pre>\n"}],"owner":{"account_id":120200,"reputation":5138,"user_id":312480,"accept_rate":95,"display_name":"Andy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127342,"favorite_count":0,"down_vote_count":0,"up_vote_count":131,"accepted_answer_id":31735171,"answer_count":11,"score":131,"last_activity_date":1682749781,"creation_date":1288362997,"question_id":4052840,"body_markdown":"What is the most efficient way to make the first character of a `String` lower case?\r\n\r\nI can think of a number of ways to do this:\r\n\r\n___Using `charAt()` with `substring()`___\r\n\r\n    String input   = &quot;SomeInputString&quot;;\r\n    String output  = Character.toLowerCase(input.charAt(0)) +\r\n                       (input.length() &gt; 1 ? input.substring(1) : &quot;&quot;);\r\n\r\n___Or using a `char` array___\r\n\r\n     String input  = &quot;SomeInputString&quot;;\r\n     char c[]      = input.toCharArray();\r\n     c[0]          = Character.toLowerCase(c[0]);\r\n     String output = new String(c);\r\n\r\n---\r\n\r\nI am sure there are many other great ways to achieve this. What do you recommend?","title":"Most efficient way to make the first character of a String lower case?","body":"<p>What is the most efficient way to make the first character of a <code>String</code> lower case?</p>\n\n<p>I can think of a number of ways to do this:</p>\n\n<p><strong><em>Using <code>charAt()</code> with <code>substring()</code></em></strong></p>\n\n<pre><code>String input   = \"SomeInputString\";\nString output  = Character.toLowerCase(input.charAt(0)) +\n                   (input.length() &gt; 1 ? input.substring(1) : \"\");\n</code></pre>\n\n<p><strong><em>Or using a <code>char</code> array</em></strong></p>\n\n<pre><code> String input  = \"SomeInputString\";\n char c[]      = input.toCharArray();\n c[0]          = Character.toLowerCase(c[0]);\n String output = new String(c);\n</code></pre>\n\n<hr>\n\n<p>I am sure there are many other great ways to achieve this. What do you recommend?</p>\n"},{"tags":["java","python","sqlite","android-studio","sockets"],"comments":[{"owner":{"account_id":963516,"reputation":10188,"user_id":987358,"accept_rate":40,"display_name":"Michael Butscher"},"score":0,"creation_date":1591715634,"post_id":62285590,"comment_id":110157906,"body_markdown":"You should compare original and damaged file with a hex viewer or editor (also compare sizes).","body":"You should compare original and damaged file with a hex viewer or editor (also compare sizes)."},{"owner":{"account_id":18687177,"reputation":19,"user_id":13622408,"display_name":"CoffeeGod42"},"score":0,"creation_date":1591716217,"post_id":62285590,"comment_id":110158238,"body_markdown":"the corrupted file is 4 kb less then the original file, and how to spot problems with hex viewer","body":"the corrupted file is 4 kb less then the original file, and how to spot problems with hex viewer"},{"owner":{"account_id":963516,"reputation":10188,"user_id":987358,"accept_rate":40,"display_name":"Michael Butscher"},"score":1,"creation_date":1591734000,"post_id":62285590,"comment_id":110167727,"body_markdown":"I took a closer look now at the Java client: It only reads up to 20002 bytes from socket and writes exactly 20002 bytes, regardless how much data is transferred. The transfer code must be included in a while-loop and break if nothing more is read and the write must only transfer so much bytes as were really read before, not the size of the buffer.","body":"I took a closer look now at the Java client: It only reads up to 20002 bytes from socket and writes exactly 20002 bytes, regardless how much data is transferred. The transfer code must be included in a while-loop and break if nothing more is read and the write must only transfer so much bytes as were really read before, not the size of the buffer."},{"owner":{"account_id":18687177,"reputation":19,"user_id":13622408,"display_name":"CoffeeGod42"},"score":0,"creation_date":1591775088,"post_id":62285590,"comment_id":110180371,"body_markdown":"thank you so much for helping but i dont know how to make a loop of that, i am not expert at java sockets and all the other java socket tutorials didnt use loops","body":"thank you so much for helping but i dont know how to make a loop of that, i am not expert at java sockets and all the other java socket tutorials didnt use loops"},{"owner":{"account_id":963516,"reputation":10188,"user_id":987358,"accept_rate":40,"display_name":"Michael Butscher"},"score":0,"creation_date":1591790902,"post_id":62285590,"comment_id":110188871,"body_markdown":"It&#39;s a simple infinite while-loop around the read-write code which should be broken if no more input is coming.","body":"It&#39;s a simple infinite while-loop around the read-write code which should be broken if no more input is coming."},{"owner":{"account_id":18687177,"reputation":19,"user_id":13622408,"display_name":"CoffeeGod42"},"score":0,"creation_date":1591819737,"post_id":62285590,"comment_id":110205488,"body_markdown":"yeah thank i make it worked, the only problem now is to do the opposite, to  make a python server that receive the file and java client that send the file","body":"yeah thank i make it worked, the only problem now is to do the opposite, to  make a python server that receive the file and java client that send the file"}],"owner":{"account_id":18687177,"reputation":19,"user_id":13622408,"display_name":"CoffeeGod42"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":448,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682748632,"creation_date":1591714896,"question_id":62285590,"body_markdown":"i am trying to send a db file from python server to java client, for my school project.\r\n\r\nevery file is being transferred successfully \r\nHowever when i try to open the file i get this error:\r\n**&quot;could not open database file. reason database disk image is malformed&quot;**\r\n\r\n\r\ni am using an python server on my PC\r\n\r\nand a android client on my phone\r\nthey both are on the same WiFi.\r\n\r\nhere is the code for the Python server\r\n```\r\nimport socket\r\nTCP_IP = &#39;192.168.14.87&#39;\r\nTCP_PORT = 9012\r\n\r\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\ns.bind((TCP_IP, TCP_PORT))\r\ns.listen(5)\r\nprint (&#39;listening&#39;)\r\nconn, addr=s.accept()\r\nprint (&quot;Client connected: &quot;,addr)\r\nfilename=&quot;trempi.db&quot;\r\n#file=open(filename, &#39;rb&#39;)\r\n#file_data=file.read()\r\nwith open(filename, &quot;rb&quot;) as f:\r\n\t\tbytes_read=f.read()\r\n\t\tif not bytes_read:\r\n\t\t\tbreak\r\n\t\tconn.sendall(bytes_read)\t\r\nconn.close()\r\nprint (&quot;Data has been transmitted :)&quot;)\r\n```\r\n\r\nAnd there is the code of the Andorid Client:\r\n```\r\n@Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        tv=findViewById(R.id.tv1);\r\n        btn=findViewById(R.id.btn);\r\n        btn2=findViewById(R.id.btn2);\r\n        btn.setOnClickListener(this);\r\n        btn2.setOnClickListener(this);\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        if (v==btn2)\r\n        {\r\n            Intent go=new Intent(MainActivity.this,Data.class);\r\n            startActivity(go);\r\n        }\r\n        if (v==btn)\r\n        {\r\n            Thread myThread=new Thread(new MyServer());\r\n            myThread.start();\r\n        }\r\n\r\n    }\r\n    class MyServer implements Runnable\r\n    {\r\n        Handler handler=new Handler();\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                byte[] b=new byte[20002];\r\n                Socket s=new Socket(&quot;192.168.14.87&quot;,9012);\r\n                InputStream is=s.getInputStream();\r\n\r\n                FileOutputStream fr=new FileOutputStream(getDatabasePath(&quot;trempi.db&quot;).toString());\r\n                is.read(b,0,b.length);\r\n                fr.write(b,0,b.length);\r\n                s.close();\r\n                is.close();\r\n                fr.close();\r\n\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n```","title":"trying to send sqlite database file through socket","body":"<p>i am trying to send a db file from python server to java client, for my school project.</p>\n<p>every file is being transferred successfully\nHowever when i try to open the file i get this error:\n<strong>&quot;could not open database file. reason database disk image is malformed&quot;</strong></p>\n<p>i am using an python server on my PC</p>\n<p>and a android client on my phone\nthey both are on the same WiFi.</p>\n<p>here is the code for the Python server</p>\n<pre><code>import socket\nTCP_IP = '192.168.14.87'\nTCP_PORT = 9012\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.bind((TCP_IP, TCP_PORT))\ns.listen(5)\nprint ('listening')\nconn, addr=s.accept()\nprint (&quot;Client connected: &quot;,addr)\nfilename=&quot;trempi.db&quot;\n#file=open(filename, 'rb')\n#file_data=file.read()\nwith open(filename, &quot;rb&quot;) as f:\n        bytes_read=f.read()\n        if not bytes_read:\n            break\n        conn.sendall(bytes_read)    \nconn.close()\nprint (&quot;Data has been transmitted :)&quot;)\n</code></pre>\n<p>And there is the code of the Andorid Client:</p>\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        tv=findViewById(R.id.tv1);\n        btn=findViewById(R.id.btn);\n        btn2=findViewById(R.id.btn2);\n        btn.setOnClickListener(this);\n        btn2.setOnClickListener(this);\n    }\n\n    @Override\n    public void onClick(View v) {\n        if (v==btn2)\n        {\n            Intent go=new Intent(MainActivity.this,Data.class);\n            startActivity(go);\n        }\n        if (v==btn)\n        {\n            Thread myThread=new Thread(new MyServer());\n            myThread.start();\n        }\n\n    }\n    class MyServer implements Runnable\n    {\n        Handler handler=new Handler();\n        @Override\n        public void run() {\n            try {\n                byte[] b=new byte[20002];\n                Socket s=new Socket(&quot;192.168.14.87&quot;,9012);\n                InputStream is=s.getInputStream();\n\n                FileOutputStream fr=new FileOutputStream(getDatabasePath(&quot;trempi.db&quot;).toString());\n                is.read(b,0,b.length);\n                fr.write(b,0,b.length);\n                s.close();\n                is.close();\n                fr.close();\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","eclipse","environment-variables","sts"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1682753963,"post_id":76134273,"comment_id":134268040,"body_markdown":"Java properties and environment variables are different things. To set the Java property, start your Java application with the VM argument `-DenvVerNum=2.2.2`. In Java you can get the value of an environment variable via `System.getenv(&quot;envVerNum&quot;)`. Please show your code where and how you access `envVerNum` and tell why you do what (and whether you want to use a Java property or an environment variable for it).","body":"Java properties and environment variables are different things. To set the Java property, start your Java application with the VM argument <code>-DenvVerNum=2.2.2</code>. In Java you can get the value of an environment variable via <code>System.getenv(&quot;envVerNum&quot;)</code>. Please show your code where and how you access <code>envVerNum</code> and tell why you do what (and whether you want to use a Java property or an environment variable for it)."}],"answers":[{"tags":[],"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682748092,"creation_date":1682748092,"answer_id":76134763,"question_id":76134273,"body_markdown":"using CMD (not powershell) execute SET command to see all environmental variables including all that you set up through contro-lpanel. \r\n\r\nMicrosoft Docs has extensive documentation on all aspects of environmental variables (RTFM https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/set_1) \r\n\r\nThe problem, IMHO ,you are not aware of difference between &quot;environmental variable&quot; on different OS platform (*nix, windows,   Mac)\r\n\r\n\r\n","title":"Could not resolve placeholder &#39;envVerNum&#39; in value &quot;${envVerNum}&quot; in Application Properties in sts4","body":"<p>using CMD (not powershell) execute SET command to see all environmental variables including all that you set up through contro-lpanel.</p>\n<p>Microsoft Docs has extensive documentation on all aspects of environmental variables (RTFM <a href=\"https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/set_1\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/set_1</a>)</p>\n<p>The problem, IMHO ,you are not aware of difference between &quot;environmental variable&quot; on different OS platform (*nix, windows,   Mac)</p>\n"}],"owner":{"account_id":28274053,"reputation":1,"user_id":21616811,"display_name":"Sam Nithish  K C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682748092,"creation_date":1682735405,"question_id":76134273,"body_markdown":"In MacOS, they just open terminal and do these\r\n```\r\nvi .bash_profile\r\n```\r\n here vi is something like text editor .. \r\n\r\nthen the file named .bash_profile popsup and they store \r\n```\r\nexport envVerNum=2.2.2 \r\n```\r\nand save it and close it.\r\n\r\nthen open terminal again and type \r\n```\r\necho $envVerNum\r\n```\r\n\r\nit returns 2.2.2 !\r\nit also returns in sts4 !\r\n\r\nNow, Whats the process in Windows ! Please explain me as i am noob to this Spring Boot !\r\n\r\n\r\nI tried setting environment varibles directly on control panel ! that doesnt work.. tell me something &quot;it need some configuration&quot; \r\nand \r\nI tried setting environment variables insde the sts4 run and debug settings.\r\n\r\nI expect that ... i want to store envVerNum=2.2.2 outside the sts4 and call it on Application Properties.\r\n\r\nplease explain me !","title":"Could not resolve placeholder &#39;envVerNum&#39; in value &quot;${envVerNum}&quot; in Application Properties in sts4","body":"<p>In MacOS, they just open terminal and do these</p>\n<pre><code>vi .bash_profile\n</code></pre>\n<p>here vi is something like text editor ..</p>\n<p>then the file named .bash_profile popsup and they store</p>\n<pre><code>export envVerNum=2.2.2 \n</code></pre>\n<p>and save it and close it.</p>\n<p>then open terminal again and type</p>\n<pre><code>echo $envVerNum\n</code></pre>\n<p>it returns 2.2.2 !\nit also returns in sts4 !</p>\n<p>Now, Whats the process in Windows ! Please explain me as i am noob to this Spring Boot !</p>\n<p>I tried setting environment varibles directly on control panel ! that doesnt work.. tell me something &quot;it need some configuration&quot;\nand\nI tried setting environment variables insde the sts4 run and debug settings.</p>\n<p>I expect that ... i want to store envVerNum=2.2.2 outside the sts4 and call it on Application Properties.</p>\n<p>please explain me !</p>\n"},{"tags":["java","javafx","desktop-application"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1682708453,"post_id":76132499,"comment_id":134263700,"body_markdown":"You put the CSS file under the wrong directory. The `src/main/java` directory (and sub-directories, i.e., packages) are for `*.java` files only. Put CSS files, image files, FXML files, and other resources under the `src/main/resources` directory (or a sub-directory, i.e., package).","body":"You put the CSS file under the wrong directory. The <code>src&#47;main&#47;java</code> directory (and sub-directories, i.e., packages) are for <code>*.java</code> files only. Put CSS files, image files, FXML files, and other resources under the <code>src&#47;main&#47;resources</code> directory (or a sub-directory, i.e., package)."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1682708659,"post_id":76132499,"comment_id":134263727,"body_markdown":"And note `scene.getStylesheets().add(&quot;login-style.css&quot;)` will look for the resource at the **root** of the class-path. Make sure to specify the correct path; maybe use the `Class#getResource(String)` API. I recommend you read [How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?](https://stackoverflow.com/q/61531317/6395627) (which this question is probably a duplicate of).","body":"And note <code>scene.getStylesheets().add(&quot;login-style.css&quot;)</code> will look for the resource at the <b>root</b> of the class-path. Make sure to specify the correct path; maybe use the <code>Class#getResource(String)</code> API. I recommend you read <a href=\"https://stackoverflow.com/q/61531317/6395627\">How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?</a> (which this question is probably a duplicate of)."}],"owner":{"account_id":26910488,"reputation":1,"user_id":20486142,"display_name":"Noussaiba Zaoui"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682710155,"answer_count":0,"score":0,"last_activity_date":1682741032,"creation_date":1682708142,"question_id":76132499,"body_markdown":"here is a screenshoot of the hierarchy of my project :(https://i.stack.imgur.com/pY7uI.png)\r\n\r\nhere is the code source :\r\n**StylingLoginPage.java:**\r\n\r\n```\r\npackage com.example.loginpage;\r\n\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.geometry.Insets;\r\nimport javafx.scene.layout.GridPane;\r\n\r\n\r\nimport javafx.application.Application;\r\n\r\npublic class StylingLoginPage extends Application {\r\n\r\n    public static void  main (String[] args){\r\n        launch(args);\r\n    }\r\n    @Override\r\n    public void start (Stage primaryStage){\r\n        primaryStage.setTitle(&quot;CSS styling&quot;);\r\n\r\n        //Name Label:\r\n        Label namelabel = new Label(&quot;Username&quot;);\r\n        GridPane.setConstraints(namelabel,0,0);\r\n\r\n        //Username Input:\r\n        TextField nameInput = new TextField();\r\n        nameInput.setPromptText(&quot;Enter your name&quot;);\r\n        GridPane.setConstraints(nameInput,1,0);\r\n\r\n        //password Label:\r\n        Label pwdlabel = new Label(&quot;password&quot;);\r\n        GridPane.setConstraints(pwdlabel,0,1);\r\n\r\n        //Password Input:\r\n        TextField pwdInput = new TextField();\r\n        pwdInput.setPromptText(&quot;Enter your password&quot;);\r\n        GridPane.setConstraints(pwdInput,1,1);\r\n\r\n        //Login Button:\r\n        Button loginButton = new Button(&quot;Login&quot;);\r\n        GridPane.setConstraints(loginButton ,1,2);\r\n\r\n        //EventHandler:\r\n        loginButton.setOnAction(e-&gt;System.out.println(&quot;User loged in ..&quot;));\r\n\r\n        //Layout:\r\n        GridPane gridpane = new GridPane();\r\n        gridpane.setPadding(new Insets(10,10,10,10));\r\n        gridpane.setVgap(10);\r\n        gridpane.setHgap(10);\r\n        gridpane.getChildren().addAll(namelabel,nameInput,pwdlabel,pwdInput,loginButton);\r\n\r\n        //Scene:\r\n        Scene scene = new Scene(gridpane,300,300);\r\n        scene.getStylesheets().add(&quot;login-style.css&quot;);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n**login-style.css**\r\n\r\n```\r\n.root{\r\n    -fx-background-color:#383838;\r\n    -fx-font-size:11pt;\r\n}\r\n```\r\n\r\n\r\nI&#39;m building a login Page using javaFX and i tried to include some CSS style  in my project . \r\nWether i&#39;m working on Eclipe or intellij IDEA, I&#39;m getting the sam error:\r\n*com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged\r\nWARNING: Resource &quot;login-style.css&quot; not found.\r\n*","title":"CSS file not found in javaFX project","body":"<p>here is a screenshoot of the hierarchy of my project :(<a href=\"https://i.stack.imgur.com/pY7uI.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/pY7uI.png</a>)</p>\n<p>here is the code source :\n<strong>StylingLoginPage.java:</strong></p>\n<pre><code>package com.example.loginpage;\n\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextField;\nimport javafx.geometry.Insets;\nimport javafx.scene.layout.GridPane;\n\n\nimport javafx.application.Application;\n\npublic class StylingLoginPage extends Application {\n\n    public static void  main (String[] args){\n        launch(args);\n    }\n    @Override\n    public void start (Stage primaryStage){\n        primaryStage.setTitle(&quot;CSS styling&quot;);\n\n        //Name Label:\n        Label namelabel = new Label(&quot;Username&quot;);\n        GridPane.setConstraints(namelabel,0,0);\n\n        //Username Input:\n        TextField nameInput = new TextField();\n        nameInput.setPromptText(&quot;Enter your name&quot;);\n        GridPane.setConstraints(nameInput,1,0);\n\n        //password Label:\n        Label pwdlabel = new Label(&quot;password&quot;);\n        GridPane.setConstraints(pwdlabel,0,1);\n\n        //Password Input:\n        TextField pwdInput = new TextField();\n        pwdInput.setPromptText(&quot;Enter your password&quot;);\n        GridPane.setConstraints(pwdInput,1,1);\n\n        //Login Button:\n        Button loginButton = new Button(&quot;Login&quot;);\n        GridPane.setConstraints(loginButton ,1,2);\n\n        //EventHandler:\n        loginButton.setOnAction(e-&gt;System.out.println(&quot;User loged in ..&quot;));\n\n        //Layout:\n        GridPane gridpane = new GridPane();\n        gridpane.setPadding(new Insets(10,10,10,10));\n        gridpane.setVgap(10);\n        gridpane.setHgap(10);\n        gridpane.getChildren().addAll(namelabel,nameInput,pwdlabel,pwdInput,loginButton);\n\n        //Scene:\n        Scene scene = new Scene(gridpane,300,300);\n        scene.getStylesheets().add(&quot;login-style.css&quot;);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p><strong>login-style.css</strong></p>\n<pre><code>.root{\n    -fx-background-color:#383838;\n    -fx-font-size:11pt;\n}\n</code></pre>\n<p>I'm building a login Page using javaFX and i tried to include some CSS style  in my project .\nWether i'm working on Eclipe or intellij IDEA, I'm getting the sam error:\n*com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged\nWARNING: Resource &quot;login-style.css&quot; not found.\n*</p>\n"},{"tags":["java","kotlin","static-methods"],"comments":[{"owner":{"account_id":3660223,"reputation":6093,"user_id":3050249,"display_name":"Miha_x64"},"score":3,"creation_date":1494337024,"post_id":43857824,"comment_id":74777897,"body_markdown":"If you want to create a singleton, check out https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations.","body":"If you want to create a singleton, check out <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>."}],"answers":[{"tags":[],"owner":{"account_id":1483982,"reputation":6755,"user_id":1392623,"display_name":"Eduard B."},"down_vote_count":1,"up_vote_count":186,"is_accepted":true,"score":185,"last_activity_date":1682740719,"creation_date":1494280717,"answer_id":43857895,"question_id":43857824,"body_markdown":"**Update**: Anyone (like OP) who just needs a so-called &quot;Singleton&quot;, sometimes called &quot;Service&quot; (except in Android), should simply use Kotlin&#39;s built-in:\r\n```kotlin\r\nobject Foo {\r\n    // Done, this already does what OP needed,\r\n    // because the boilerplate codes (like static field and constructor),\r\n    // are taken care of by Kotlin.\r\n}\r\n```\r\n&lt;sup&gt;(Like [Roman](https://stackoverflow.com/users/1051598/roman-elizarov) rightly pointed out in the comment-section.)&lt;/sup&gt;\r\n\r\nPrevious answer; If you have (or plan to have) multiple `static` variables, then continue reading:\r\n\r\nThe closest thing to Java&#39;s static fields is a companion object. You can find the documentation reference for them here: https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\r\n\r\nYour code in Kotlin would look something like this:\r\n\r\n    class Foo {\r\n    \r\n        companion object {\r\n            private lateinit var instance: Foo\r\n\r\n            fun get(): Foo {\r\n                return instance;\r\n            }\r\n        }\r\n    \r\n        init {\r\n            if (instance == null) {\r\n                instance = this\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nIf you want your fields/methods to be exposed as static to Java callers, you can apply the [`@JvmStatic`][1] annotation:\r\n\r\n    class Foo {\r\n    \r\n        companion object {\r\n            private lateinit var instance: Foo\r\n\r\n            @JvmStatic fun get(): Foo {\r\n                return instance;\r\n            }\r\n        }\r\n    \r\n        init {\r\n            if (instance == null) {\r\n                instance = this\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n&gt; **Note** that `@JvmStatic` does not need any import (as it&#39;s built-in feature of Kotlin).\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-static/","title":"static methods and variables in Kotlin?","body":"<p><strong>Update</strong>: Anyone (like OP) who just needs a so-called &quot;Singleton&quot;, sometimes called &quot;Service&quot; (except in Android), should simply use Kotlin's built-in:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>object Foo {\n    // Done, this already does what OP needed,\n    // because the boilerplate codes (like static field and constructor),\n    // are taken care of by Kotlin.\n}\n</code></pre>\n<p><sup>(Like <a href=\"https://stackoverflow.com/users/1051598/roman-elizarov\">Roman</a> rightly pointed out in the comment-section.)</sup></p>\n<p>Previous answer; If you have (or plan to have) multiple <code>static</code> variables, then continue reading:</p>\n<p>The closest thing to Java's static fields is a companion object. You can find the documentation reference for them here: <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects</a></p>\n<p>Your code in Kotlin would look something like this:</p>\n<pre><code>class Foo {\n\n    companion object {\n        private lateinit var instance: Foo\n\n        fun get(): Foo {\n            return instance;\n        }\n    }\n\n    init {\n        if (instance == null) {\n            instance = this\n        }\n    }\n\n}\n</code></pre>\n<p>If you want your fields/methods to be exposed as static to Java callers, you can apply the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-static/\" rel=\"noreferrer\"><code>@JvmStatic</code></a> annotation:</p>\n<pre><code>class Foo {\n\n    companion object {\n        private lateinit var instance: Foo\n\n        @JvmStatic fun get(): Foo {\n            return instance;\n        }\n    }\n\n    init {\n        if (instance == null) {\n            instance = this\n        }\n    }\n\n}\n</code></pre>\n<blockquote>\n<p><strong>Note</strong> that <code>@JvmStatic</code> does not need any import (as it's built-in feature of Kotlin).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8190426,"reputation":626,"user_id":6164819,"display_name":"rakesh rajput"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1502993215,"creation_date":1498735696,"answer_id":44823868,"question_id":43857824,"body_markdown":"first you create a simple class then after create a block followed by companion object keyword\r\n\r\n\r\nfor example: \r\n\r\n\r\n    class Test{\r\n\r\n        companion object{\r\n\r\n            fun  getValue(): String{\r\n             \r\n               return &quot;Test String&quot;\r\n\r\n            }\r\n        }\r\n    }\r\n\r\nyou can call this class function using class name dot function name \r\n\r\nfor example:\r\n\r\n    // here you will get the function value\r\n    Test.getValue() ","title":"static methods and variables in Kotlin?","body":"<p>first you create a simple class then after create a block followed by companion object keyword</p>\n\n<p>for example: </p>\n\n<pre><code>class Test{\n\n    companion object{\n\n        fun  getValue(): String{\n\n           return \"Test String\"\n\n        }\n    }\n}\n</code></pre>\n\n<p>you can call this class function using class name dot function name </p>\n\n<p>for example:</p>\n\n<pre><code>// here you will get the function value\nTest.getValue() \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1112584,"reputation":629,"user_id":1102761,"display_name":"jtonic"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1598962936,"creation_date":1508268340,"answer_id":46797741,"question_id":43857824,"body_markdown":"You can create a companion object for the class, and if you want the field to be `static` you can use the annotation @JvmStatic. Companion object have access to private members of the class it is companion for.\r\n\r\nSee below an example:\r\n\r\n    class User {\r\n        private lateinit var name: String\r\n    \r\n        override fun toString() = name\r\n    \r\n        companion object {\r\n            @JvmStatic\r\n            val instance by lazy {\r\n                User().apply { name = &quot;jtonic&quot; }\r\n            }\r\n        }\r\n    }\r\n    \r\n    class CompanionTest {\r\n    \r\n        @Test\r\n        fun `test companion object`() {\r\n            User.instance.toString() shouldBe &quot;jtonic&quot;\r\n        }\r\n    }","title":"static methods and variables in Kotlin?","body":"<p>You can create a companion object for the class, and if you want the field to be <code>static</code> you can use the annotation @JvmStatic. Companion object have access to private members of the class it is companion for.</p>\n<p>See below an example:</p>\n<pre><code>class User {\n    private lateinit var name: String\n\n    override fun toString() = name\n\n    companion object {\n        @JvmStatic\n        val instance by lazy {\n            User().apply { name = &quot;jtonic&quot; }\n        }\n    }\n}\n\nclass CompanionTest {\n\n    @Test\n    fun `test companion object`() {\n        User.instance.toString() shouldBe &quot;jtonic&quot;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1046776,"reputation":27433,"user_id":1051598,"accept_rate":20,"display_name":"Roman  Elizarov"},"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1508298950,"creation_date":1508298950,"answer_id":46802549,"question_id":43857824,"body_markdown":"It looks that you want to define a singleton object. It is supported in Kotlin as a first-class concept:\r\n\r\n    object Foo {\r\n      ... \r\n    }\r\n\r\nAll the boilerplate code with static field and constructor is taken care by the Kotlin automatically. You don&#39;t have to write any of that. \r\n\r\nFrom the Kotlin code you can refer to the instance of this object simply as `Foo`. From the Java code you can referer to the instance of this object as `Foo.INSTANCE`, because the Kotlin compiler automatically creates the corresponding static field named `INSTANCE`.\r\n","title":"static methods and variables in Kotlin?","body":"<p>It looks that you want to define a singleton object. It is supported in Kotlin as a first-class concept:</p>\n\n<pre><code>object Foo {\n  ... \n}\n</code></pre>\n\n<p>All the boilerplate code with static field and constructor is taken care by the Kotlin automatically. You don't have to write any of that. </p>\n\n<p>From the Kotlin code you can refer to the instance of this object simply as <code>Foo</code>. From the Java code you can referer to the instance of this object as <code>Foo.INSTANCE</code>, because the Kotlin compiler automatically creates the corresponding static field named <code>INSTANCE</code>.</p>\n"}],"owner":{"account_id":10848361,"reputation":1894,"user_id":7977034,"accept_rate":71,"display_name":"Caleb Bassham"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174142,"favorite_count":0,"down_vote_count":0,"up_vote_count":134,"accepted_answer_id":43857895,"answer_count":4,"score":134,"last_activity_date":1682740719,"creation_date":1494280337,"question_id":43857824,"body_markdown":"I want to be able to save a class instance to a private/public static variable, but I can&#39;t figure out how to do this in Kotlin.\r\n\r\n    public class Foo {\r\n        private static Foo instance;\r\n\r\n        public Foo() {\r\n            if (instance == null) {\r\n                instance = this;\r\n            }\r\n        }\r\n        \r\n        public static Foo get() {\r\n            return instance;\r\n        }\r\n    }\r\n","title":"static methods and variables in Kotlin?","body":"<p>I want to be able to save a class instance to a private/public static variable, but I can't figure out how to do this in Kotlin.</p>\n<pre><code>public class Foo {\n    private static Foo instance;\n\n    public Foo() {\n        if (instance == null) {\n            instance = this;\n        }\n    }\n    \n    public static Foo get() {\n        return instance;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-data-jpa","spring-data","thymeleaf"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":1,"creation_date":1682713814,"post_id":76133043,"comment_id":134264619,"body_markdown":"The method `save` from anything `Repository` returns the persisted entity. In other words, your method `registerUser` can return User.","body":"The method <code>save</code> from anything <code>Repository</code> returns the persisted entity. In other words, your method <code>registerUser</code> can return User."},{"owner":{"account_id":21477997,"reputation":51,"user_id":15825902,"display_name":"Djorkaeff"},"score":0,"creation_date":1682714158,"post_id":76133043,"comment_id":134264684,"body_markdown":"Is there a method to return the new registered user id and display it with my code? Or is there something I&#39;m doing wrong and it&#39;s not the correct way?","body":"Is there a method to return the new registered user id and display it with my code? Or is there something I&#39;m doing wrong and it&#39;s not the correct way?"},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":1,"creation_date":1682714694,"post_id":76133043,"comment_id":134264768,"body_markdown":"As I said, the `save` method of your `UserRepository` returns the `User` you just saved. I don&#39;t work with Thymeleaf so I&#39;m not sure how to &quot;send&quot; or &quot;update&quot; the view with the new data (Though I think it&#39;s something with the `Model`), but with the `User` returned from the repository, you just need to call `getIdUser()` to get the Id..","body":"As I said, the <code>save</code> method of your <code>UserRepository</code> returns the <code>User</code> you just saved. I don&#39;t work with Thymeleaf so I&#39;m not sure how to &quot;send&quot; or &quot;update&quot; the view with the new data (Though I think it&#39;s something with the <code>Model</code>), but with the <code>User</code> returned from the repository, you just need to call <code>getIdUser()</code> to get the Id.."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1682742199,"post_id":76133043,"comment_id":134267215,"body_markdown":"Or just : `&quot;redirect:/home?success&amp;idUser&quot;+user.getId()`!?","body":"Or just : <code>&quot;redirect:&#47;home?success&amp;idUser&quot;+user.getId()</code>!?"}],"answers":[{"tags":[],"owner":{"account_id":2669818,"reputation":715,"user_id":2307460,"accept_rate":60,"display_name":"Yogesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682740513,"creation_date":1682740513,"answer_id":76134449,"question_id":76133043,"body_markdown":"Instead of returning `String` you need to return `ModelAndView` so you can any property of User object\r\n\r\nController \r\n\r\n    public ModelAndView userRegister(User user) {\r\n        ModelAndView  model = new ModelAndView(&quot;home&quot;);\r\n        User registerUser = userService.registerUser(user);\r\n        model.addObject(&quot;registerUser&quot;,registerUser);\r\n        return model;   \r\n    }\r\n\r\nRepository \r\n\r\n    public User registerUser(User user) {\r\n       return userRepository.save(user);\r\n    }\r\n\r\nThymeleaf code\r\n\r\n    &lt;span th:text=&quot;${registerUser.idUser}&quot;&gt;&lt;/span&gt;","title":"Spring - Is there a way to display the id of a record after being registered with Thymeleaf?","body":"<p>Instead of returning <code>String</code> you need to return <code>ModelAndView</code> so you can any property of User object</p>\n<p>Controller</p>\n<pre><code>public ModelAndView userRegister(User user) {\n    ModelAndView  model = new ModelAndView(&quot;home&quot;);\n    User registerUser = userService.registerUser(user);\n    model.addObject(&quot;registerUser&quot;,registerUser);\n    return model;   \n}\n</code></pre>\n<p>Repository</p>\n<pre><code>public User registerUser(User user) {\n   return userRepository.save(user);\n}\n</code></pre>\n<p>Thymeleaf code</p>\n<pre><code>&lt;span th:text=&quot;${registerUser.idUser}&quot;&gt;&lt;/span&gt;\n</code></pre>\n"}],"owner":{"account_id":21477997,"reputation":51,"user_id":15825902,"display_name":"Djorkaeff"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76134449,"answer_count":1,"score":1,"last_activity_date":1682740513,"creation_date":1682713344,"question_id":76133043,"body_markdown":"In my project I want to show the id of the record in the view with Thymeleaf after it has been inserted successfully.\r\n\r\nIs there any way to get that result?\r\n\r\nEntity:\r\n```\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name = &quot;id_user&quot;)\r\n\tprivate Long idUser;\r\n\t\r\n    @Column(name = &quot;first_name&quot;, nullable = false)\r\n\tprivate String firstName;\r\n\r\n\t@Column(name = &quot;last_name&quot;, nullable = false, length = 150)\r\n\tprivate String lastName;\r\n\r\n\tpublic Long getIdUser() {\r\n\t\treturn idUser;\r\n\t}\r\n\r\n\tpublic void setIdUser(Long idUser) {\r\n\t\tthis.idUser= idUser;\r\n\t}\r\n\t\r\n\tpublic String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName= firstName;\r\n    }\r\n\r\n\tpublic String getLastName() {\r\n\t\treturn lastName;\r\n\t}\r\n\r\n\tpublic void setLastName(String lastName) {\r\n\t\tthis.lastName= lastName;\r\n\t}\r\n}\r\n```\r\n\r\nService:\r\n```\r\npublic void registerUser(User user) {\r\n   userRepository.save(user);\r\n}\r\n```\r\n\r\nController (To show the user&#39;s id after being registered):\r\n```\r\npublic String userRegister(User user) {\r\n\r\n\tuserService.registerUser(user);\r\n\treturn &quot;redirect:/home?success&quot;;\r\n\t\t\r\n}\r\n```\r\n\r\nThymeleaf (The idea to be able to display the id of the new user):\r\n```\r\n&lt;span th:text=&quot;${idUser}&quot;&gt;&lt;/span&gt;\r\n```","title":"Spring - Is there a way to display the id of a record after being registered with Thymeleaf?","body":"<p>In my project I want to show the id of the record in the view with Thymeleaf after it has been inserted successfully.</p>\n<p>Is there any way to get that result?</p>\n<p>Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id_user&quot;)\n    private Long idUser;\n    \n    @Column(name = &quot;first_name&quot;, nullable = false)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;, nullable = false, length = 150)\n    private String lastName;\n\n    public Long getIdUser() {\n        return idUser;\n    }\n\n    public void setIdUser(Long idUser) {\n        this.idUser= idUser;\n    }\n    \n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName= firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName= lastName;\n    }\n}\n</code></pre>\n<p>Service:</p>\n<pre><code>public void registerUser(User user) {\n   userRepository.save(user);\n}\n</code></pre>\n<p>Controller (To show the user's id after being registered):</p>\n<pre><code>public String userRegister(User user) {\n\n    userService.registerUser(user);\n    return &quot;redirect:/home?success&quot;;\n        \n}\n</code></pre>\n<p>Thymeleaf (The idea to be able to display the id of the new user):</p>\n<pre><code>&lt;span th:text=&quot;${idUser}&quot;&gt;&lt;/span&gt;\n</code></pre>\n"},{"tags":["c#","java","hash"],"answers":[{"tags":[],"owner":{"account_id":107337,"reputation":1,"user_id":285465,"accept_rate":80,"display_name":"TomTom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1269411945,"creation_date":1269411945,"answer_id":2505756,"question_id":2505742,"body_markdown":"Havh values generated from the same input and with the same algorithm are defined to be equal. 1+1=2, regardless of the programming language I program this in.\r\n\r\nOtherwise the internet would not work at all, you know.","title":"Are hash values globally unique","body":"<p>Havh values generated from the same input and with the same algorithm are defined to be equal. 1+1=2, regardless of the programming language I program this in.</p>\n\n<p>Otherwise the internet would not work at all, you know.</p>\n"},{"tags":[],"owner":{"account_id":9936,"reputation":8011,"user_id":18548,"accept_rate":82,"display_name":"Ritesh M Nayak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1269411966,"creation_date":1269411966,"answer_id":2505758,"question_id":2505742,"body_markdown":"My suggestion would be to use a common/accepted hashing algorithm like MD5 to achieve the same hash values. ","title":"Are hash values globally unique","body":"<p>My suggestion would be to use a common/accepted hashing algorithm like MD5 to achieve the same hash values. </p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1682740222,"creation_date":1269412049,"answer_id":2505764,"question_id":2505742,"body_markdown":"Hash values are not globally unique.  But that is not what you are really asking.\r\n\r\nWhat you really want to know is whether a hashing algorithm (such as MD5) will produce the same hash value for identical files on different operating system platforms. The answer to *that* question is &quot;yes&quot; ... provided that files are byte-for-byte identical.  \r\n\r\nIn the case of binary files, they should be byte-for-byte identical. In the case of text documents, transcoding between different character encodings, or changing line termination sequences will make the files different at the byte level and result in different MD5 hash values.\r\n\r\n\r\n","title":"Are hash values globally unique","body":"<p>Hash values are not globally unique.  But that is not what you are really asking.</p>\n<p>What you really want to know is whether a hashing algorithm (such as MD5) will produce the same hash value for identical files on different operating system platforms. The answer to <em>that</em> question is &quot;yes&quot; ... provided that files are byte-for-byte identical.</p>\n<p>In the case of binary files, they should be byte-for-byte identical. In the case of text documents, transcoding between different character encodings, or changing line termination sequences will make the files different at the byte level and result in different MD5 hash values.</p>\n"},{"tags":[],"owner":{"account_id":87132,"reputation":5775,"user_id":241821,"accept_rate":81,"display_name":"Vaishak Suresh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1269412199,"creation_date":1269412199,"answer_id":2505775,"question_id":2505742,"body_markdown":"If the Hashing algorithm and the input are same, the hash value generated would be same irrespective of language or environment.\r\nThe hashing algorithm takes the full/part of the key and manipulates it to generate the value which is why it would be same in all languages.","title":"Are hash values globally unique","body":"<p>If the Hashing algorithm and the input are same, the hash value generated would be same irrespective of language or environment.\nThe hashing algorithm takes the full/part of the key and manipulates it to generate the value which is why it would be same in all languages.</p>\n"},{"tags":[],"owner":{"account_id":104451,"reputation":54096,"user_id":279259,"accept_rate":92,"display_name":"ereOn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1269417395,"creation_date":1269417395,"answer_id":2506111,"question_id":2505742,"body_markdown":"I wish I could comment on this but I don&#39;t have enough reputation to do that.\r\n\r\nWhile I don&#39;t know for what purpose you want to use a hash algorithm, I&#39;d like to say that some collisions have been found for MD5 so it might be less &quot;secure&quot; (well, we probably can&#39;t say &quot;broken&quot; since those collisions are hard to compute). The same remark applies to the SHA-1 algorithm.\r\n\r\nMore information here: http://www.mathstat.dal.ca/~selinger/md5collision/\r\n\r\nSo if you want to use a hash algorithm for security purposes, you might take a look at SHA-256 or SHA-512 which are stronger for now.\r\n\r\nOtherwise you can probably keep going with MD5.\r\n\r\nMy two cents.","title":"Are hash values globally unique","body":"<p>I wish I could comment on this but I don't have enough reputation to do that.</p>\n\n<p>While I don't know for what purpose you want to use a hash algorithm, I'd like to say that some collisions have been found for MD5 so it might be less \"secure\" (well, we probably can't say \"broken\" since those collisions are hard to compute). The same remark applies to the SHA-1 algorithm.</p>\n\n<p>More information here: <a href=\"http://www.mathstat.dal.ca/~selinger/md5collision/\" rel=\"nofollow noreferrer\">http://www.mathstat.dal.ca/~selinger/md5collision/</a></p>\n\n<p>So if you want to use a hash algorithm for security purposes, you might take a look at SHA-256 or SHA-512 which are stronger for now.</p>\n\n<p>Otherwise you can probably keep going with MD5.</p>\n\n<p>My two cents.</p>\n"}],"owner":{"display_name":"Anton P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":560,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":2505764,"answer_count":5,"score":0,"last_activity_date":1682740222,"creation_date":1269411807,"question_id":2505742,"body_markdown":"I want to generate a hash code for a file.  Using C# I would do something like this then store the value in a database.\r\n\r\n    byte[] b = File.ReadAllBytes(@&quot;C:\\image.jpg&quot;);\r\n    string hash = ComputeHash(b);\r\n\r\n\r\nNow, if i use say a Java program that implements the same hashing alogorithm (Md5), can i expect the hash values to be the equal to the value generated in C#? What if i execute the java program from different environments, Windows, Linux or Mac?\r\n","title":"Are hash values globally unique","body":"<p>I want to generate a hash code for a file.  Using C# I would do something like this then store the value in a database.</p>\n\n<pre><code>byte[] b = File.ReadAllBytes(@\"C:\\image.jpg\");\nstring hash = ComputeHash(b);\n</code></pre>\n\n<p>Now, if i use say a Java program that implements the same hashing alogorithm (Md5), can i expect the hash values to be the equal to the value generated in C#? What if i execute the java program from different environments, Windows, Linux or Mac?</p>\n"},{"tags":["java","serialization","jackson","lombok","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682738769,"creation_date":1682716355,"answer_id":76133308,"question_id":76132155,"body_markdown":"Remove the `@Jacksonized` annotation:\r\n\r\n```\r\n@Getter\r\n@Builder\r\nstatic class Person {\r\n    private final String name;\r\n    private final List&lt;Pet&gt; pets;\r\n\r\n}\r\n\r\n@Getter\r\n@Builder\r\nstatic class Pet {\r\n    private final String name;\r\n    private final String type;\r\n\r\n}\r\n```\r\n\r\n**Explanation**\r\n\r\nThe `@Jacksonized` annotation is, unfortunately, prioritized over the explicitly registered custom deserializer so Jackson is trying to use `Person.PersonBuilder` for the deserialization instead of \r\n`PersonDeserializer`. Seems like a bug in Jackson so I&#39;ve opened [#3901](https://github.com/FasterXML/jackson-databind/issues/3901).","title":"Custom deserializer with record work but @Jacksonized @Builder breaks","body":"<p>Remove the <code>@Jacksonized</code> annotation:</p>\n<pre><code>@Getter\n@Builder\nstatic class Person {\n    private final String name;\n    private final List&lt;Pet&gt; pets;\n\n}\n\n@Getter\n@Builder\nstatic class Pet {\n    private final String name;\n    private final String type;\n\n}\n</code></pre>\n<p><strong>Explanation</strong></p>\n<p>The <code>@Jacksonized</code> annotation is, unfortunately, prioritized over the explicitly registered custom deserializer so Jackson is trying to use <code>Person.PersonBuilder</code> for the deserialization instead of\n<code>PersonDeserializer</code>. Seems like a bug in Jackson so I've opened <a href=\"https://github.com/FasterXML/jackson-databind/issues/3901\" rel=\"nofollow noreferrer\">#3901</a>.</p>\n"}],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76133308,"answer_count":1,"score":0,"last_activity_date":1682739127,"creation_date":1682704813,"question_id":76132155,"body_markdown":"A custom deserializer for this simple model works fine:\r\n\r\n```\r\nstatic record Person(\r\n    String name,\r\n    List&lt;Pet&gt; pets) {\r\n}\r\n\r\nstatic record Pet(\r\n    String name,\r\n    String type) {\r\n}\r\n\r\n```\r\n\r\nbut a `@Jacksonized` Lombok builder version:\r\n\r\n```\r\n@Getter\r\n@Builder\r\n@Jacksonized\r\nstatic class Person {\r\n    private final String name;\r\n    private final List&lt;Pet&gt; pets;\r\n\r\n}\r\n\r\n@Getter\r\n@Builder\r\nstatic class Pet {\r\n    private final String name;\r\n    private final String type;\r\n\r\n}\r\n```\r\n\r\nfails with:\r\n\r\n```\r\ncom.fasterxml.jackson.databind.RuntimeJsonMappingException: Cannot construct instance of `JacksonTest$Pet` (no Creators, like default constructor, exist): no String-argument constructor/factory method to deserialize from String value (&#39;[{&#39;Cutesy&#39;,&#39;cat&#39;}, {&#39;Tootsie&#39;,&#39;cat&#39;}]&#39;)\r\n at [Source: (StringReader); line: 2, column: 5] (through reference chain: JacksonTest$Person$PersonBuilder[&quot;pets&quot;]-&gt;java.util.ArrayList[0])\r\n\tat com.fasterxml.jackson.databind.MappingIterator._handleMappingException(MappingIterator.java:416)\r\n\tat com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:201)\r\n\tat JacksonTest.readPersonFromCsv(JacksonTest.java:99)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `JacksonTest$Pet` (no Creators, like default constructor, exist): no String-argument constructor/factory method to deserialize from String value (&#39;[{&#39;Cutesy&#39;,&#39;cat&#39;}, {&#39;Tootsie&#39;,&#39;cat&#39;}]&#39;)\r\n at [Source: (StringReader); line: 2, column: 5] (through reference chain: JacksonTest$Person$PersonBuilder[&quot;pets&quot;]-&gt;java.util.ArrayList[0])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1904)\r\n\tat com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1349)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer._deserializeFromString(StdDeserializer.java:311)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromString(BeanDeserializerBase.java:1495)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:197)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:355)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\r\n\tat com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:158)\r\n\tat com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:293)\r\n\tat com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:217)\r\n\tat com.fasterxml.jackson.databind.MappingIterator.nextValue(MappingIterator.java:283)\r\n\tat com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:199)\r\n\t... 70 more\r\n\r\n```\r\nThe problem here is that `pets`, which is a list of POJOs, is serialized into a string which the custom deserializer unpacks. But, because there&#39;s &quot;no String-argument constructor/factory method to deserialize from String value (&#39;[{&#39;Cutesy&#39;,&#39;cat&#39;}, {&#39;Tootsie&#39;,&#39;cat&#39;}]&#39;)&quot; the `deserialize` method is never invoked, sadly.\r\n\r\nThe custom deserializer is:\r\n\r\n```\r\nstatic class PersonDeserializer extends StdDeserializer&lt;Person&gt; {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    public PersonDeserializer() {\r\n        this(Person.class);\r\n    }\r\n\r\n    public PersonDeserializer(Class&lt;Person&gt; type) {\r\n        super(type);\r\n    }\r\n\r\n    @Override\r\n    public Person deserialize(JsonParser p, DeserializationContext ctxt)\r\n      throws IOException, JsonProcessingException {\r\n        JsonNode node = p.getCodec().readTree(p);\r\n\r\n        String name = node.get(&quot;name&quot;).asText();\r\n        String petsSerialized = node.get(&quot;pets&quot;).asText();\r\n\r\n        List&lt;Pet&gt; pets = deserialize(petsSerialized);\r\n\r\n        //return new Person(name, pets);\r\n        return Person.builder().name(name).pets(pets).build();\r\n    }\r\n\r\n    private static List&lt;Pet&gt; deserialize(String serializedPets) {\r\n        return Arrays.stream(serializedPets.replaceAll(&quot;^.\\\\{?|}?.$&quot;, &quot;&quot;).split(&quot;},\\s*\\\\{&quot;))\r\n                .map(inner -&gt; Arrays.stream(inner.replaceAll(&quot;^.&#39;?|&#39;?.$&quot;, &quot;&quot;).split(&quot;&#39;,&#39;&quot;)).toList())\r\n                .map(l -&gt; deserialize(l))\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\n    private static Pet deserialize(List&lt;String&gt; l) {\r\n        //return new Pet(l.get(0), l.get(1));\r\n        return Pet.builder().name(l.get(0)).type(l.get(1)).build();\r\n    }\r\n}\r\n```\r\n\r\nReplacing `@Jacksonized` with an explicit `JsonDeserialize(using=PersonDeserializer.class)` does work as the `record`-based POJO version does; however, I have multiple deserializers which are selected at runtime.\r\n\r\nSo, I think I&#39;m forced to collapse the deserializers into a single multiplexing deserializer which then does what&#39;s needed at runtime...unless one of you has a bright idea?\r\n\r\nThe serializers &amp; deserializers are registered with the mapper:\r\n\r\n```\r\nprivate static CsvMapper _register(CsvMapper mapper) {\r\n    var module = new SimpleModule();\r\n\r\n    module.addSerializer(Person.class, new PersonSerializer());\r\n    module.addDeserializer(Person.class, new PersonDeserializer());\r\n\r\n    return (CsvMapper)mapper.registerModule(module);\r\n}\r\n```\r\nwhich is what I was expecting to tweak at runtime.\r\n\r\nThis looks like a short-coming/bug in Jackson&#39;s builder support; it could an issue in Lombok&#39;s Jackson support but I haven&#39;t found a manual builder pattern that works either so I suspect Lombok is just a victim of Jackson. \r\n\r\nAnyone found a workaround?\r\n\r\nHere&#39;s the driver:\r\n```\r\nvar mapper = _register(new CsvMapper());\r\n\r\nString serializedPersons = &quot;&quot;&quot;\r\n    name,pets\r\n    Ali,&quot;[{&#39;Cutesy&#39;,&#39;cat&#39;}, {&#39;Tootsie&#39;,&#39;cat&#39;}]&quot;\r\n    Jan,&quot;[{&#39;Mr. Bubbles&#39;,&#39;dog&#39;}, {&#39;Lilly&#39;,&#39;cat&#39;}]&quot;\r\n    Tom,&quot;[{&#39;Fester&#39;,&#39;dog&#39;}, {&#39;Wednesday&#39;,&#39;cat&#39;}]&quot;\r\n    Zoe,&quot;[{&#39;Jaeger&#39;,&#39;dog&#39;}, {&#39;Deira&#39;,&#39;cat&#39;}]&quot;\r\n    &quot;&quot;&quot;;\r\n\r\nCsvSchema schema = mapper.schemaFor(Person.class).withHeader();\r\n\r\nObjectReader reader = mapper.readerFor(Person.class).with(schema);\r\n\r\nMappingIterator&lt;Person&gt; i = reader.readValues(serializedPersons);\r\n\r\nwhile (i.hasNext()) {\r\n    System.out.println(&quot;Person: &quot; + i.next());\r\n}\r\n```","title":"Custom deserializer with record work but @Jacksonized @Builder breaks","body":"<p>A custom deserializer for this simple model works fine:</p>\n<pre><code>static record Person(\n    String name,\n    List&lt;Pet&gt; pets) {\n}\n\nstatic record Pet(\n    String name,\n    String type) {\n}\n\n</code></pre>\n<p>but a <code>@Jacksonized</code> Lombok builder version:</p>\n<pre><code>@Getter\n@Builder\n@Jacksonized\nstatic class Person {\n    private final String name;\n    private final List&lt;Pet&gt; pets;\n\n}\n\n@Getter\n@Builder\nstatic class Pet {\n    private final String name;\n    private final String type;\n\n}\n</code></pre>\n<p>fails with:</p>\n<pre><code>com.fasterxml.jackson.databind.RuntimeJsonMappingException: Cannot construct instance of `JacksonTest$Pet` (no Creators, like default constructor, exist): no String-argument constructor/factory method to deserialize from String value ('[{'Cutesy','cat'}, {'Tootsie','cat'}]')\n at [Source: (StringReader); line: 2, column: 5] (through reference chain: JacksonTest$Person$PersonBuilder[&quot;pets&quot;]-&gt;java.util.ArrayList[0])\n    at com.fasterxml.jackson.databind.MappingIterator._handleMappingException(MappingIterator.java:416)\n    at com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:201)\n    at JacksonTest.readPersonFromCsv(JacksonTest.java:99)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\n    at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `JacksonTest$Pet` (no Creators, like default constructor, exist): no String-argument constructor/factory method to deserialize from String value ('[{'Cutesy','cat'}, {'Tootsie','cat'}]')\n at [Source: (StringReader); line: 2, column: 5] (through reference chain: JacksonTest$Person$PersonBuilder[&quot;pets&quot;]-&gt;java.util.ArrayList[0])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1904)\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1349)\n    at com.fasterxml.jackson.databind.deser.std.StdDeserializer._deserializeFromString(StdDeserializer.java:311)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromString(BeanDeserializerBase.java:1495)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:197)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:355)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\n    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeSetAndReturn(MethodProperty.java:158)\n    at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.vanillaDeserialize(BuilderBasedDeserializer.java:293)\n    at com.fasterxml.jackson.databind.deser.BuilderBasedDeserializer.deserialize(BuilderBasedDeserializer.java:217)\n    at com.fasterxml.jackson.databind.MappingIterator.nextValue(MappingIterator.java:283)\n    at com.fasterxml.jackson.databind.MappingIterator.next(MappingIterator.java:199)\n    ... 70 more\n\n</code></pre>\n<p>The problem here is that <code>pets</code>, which is a list of POJOs, is serialized into a string which the custom deserializer unpacks. But, because there's &quot;no String-argument constructor/factory method to deserialize from String value ('[{'Cutesy','cat'}, {'Tootsie','cat'}]')&quot; the <code>deserialize</code> method is never invoked, sadly.</p>\n<p>The custom deserializer is:</p>\n<pre><code>static class PersonDeserializer extends StdDeserializer&lt;Person&gt; {\n    private static final long serialVersionUID = 1L;\n\n    public PersonDeserializer() {\n        this(Person.class);\n    }\n\n    public PersonDeserializer(Class&lt;Person&gt; type) {\n        super(type);\n    }\n\n    @Override\n    public Person deserialize(JsonParser p, DeserializationContext ctxt)\n      throws IOException, JsonProcessingException {\n        JsonNode node = p.getCodec().readTree(p);\n\n        String name = node.get(&quot;name&quot;).asText();\n        String petsSerialized = node.get(&quot;pets&quot;).asText();\n\n        List&lt;Pet&gt; pets = deserialize(petsSerialized);\n\n        //return new Person(name, pets);\n        return Person.builder().name(name).pets(pets).build();\n    }\n\n    private static List&lt;Pet&gt; deserialize(String serializedPets) {\n        return Arrays.stream(serializedPets.replaceAll(&quot;^.\\\\{?|}?.$&quot;, &quot;&quot;).split(&quot;},\\s*\\\\{&quot;))\n                .map(inner -&gt; Arrays.stream(inner.replaceAll(&quot;^.'?|'?.$&quot;, &quot;&quot;).split(&quot;','&quot;)).toList())\n                .map(l -&gt; deserialize(l))\n                .collect(Collectors.toList());\n    }\n\n    private static Pet deserialize(List&lt;String&gt; l) {\n        //return new Pet(l.get(0), l.get(1));\n        return Pet.builder().name(l.get(0)).type(l.get(1)).build();\n    }\n}\n</code></pre>\n<p>Replacing <code>@Jacksonized</code> with an explicit <code>JsonDeserialize(using=PersonDeserializer.class)</code> does work as the <code>record</code>-based POJO version does; however, I have multiple deserializers which are selected at runtime.</p>\n<p>So, I think I'm forced to collapse the deserializers into a single multiplexing deserializer which then does what's needed at runtime...unless one of you has a bright idea?</p>\n<p>The serializers &amp; deserializers are registered with the mapper:</p>\n<pre><code>private static CsvMapper _register(CsvMapper mapper) {\n    var module = new SimpleModule();\n\n    module.addSerializer(Person.class, new PersonSerializer());\n    module.addDeserializer(Person.class, new PersonDeserializer());\n\n    return (CsvMapper)mapper.registerModule(module);\n}\n</code></pre>\n<p>which is what I was expecting to tweak at runtime.</p>\n<p>This looks like a short-coming/bug in Jackson's builder support; it could an issue in Lombok's Jackson support but I haven't found a manual builder pattern that works either so I suspect Lombok is just a victim of Jackson.</p>\n<p>Anyone found a workaround?</p>\n<p>Here's the driver:</p>\n<pre><code>var mapper = _register(new CsvMapper());\n\nString serializedPersons = &quot;&quot;&quot;\n    name,pets\n    Ali,&quot;[{'Cutesy','cat'}, {'Tootsie','cat'}]&quot;\n    Jan,&quot;[{'Mr. Bubbles','dog'}, {'Lilly','cat'}]&quot;\n    Tom,&quot;[{'Fester','dog'}, {'Wednesday','cat'}]&quot;\n    Zoe,&quot;[{'Jaeger','dog'}, {'Deira','cat'}]&quot;\n    &quot;&quot;&quot;;\n\nCsvSchema schema = mapper.schemaFor(Person.class).withHeader();\n\nObjectReader reader = mapper.readerFor(Person.class).with(schema);\n\nMappingIterator&lt;Person&gt; i = reader.readValues(serializedPersons);\n\nwhile (i.hasNext()) {\n    System.out.println(&quot;Person: &quot; + i.next());\n}\n</code></pre>\n"},{"tags":["java","security","ssl","ssl-certificate"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1426542913,"post_id":29085950,"comment_id":46408182,"body_markdown":"This just shows a competed SSL handshake. There is no error here. &#39;Couldn&#39;t authorise&#39; is not a Java message. It is a message printed by your application, under circumstances which you have not disclosed. You need to provide the code that printed it in your question. Presumably you got an exception, in which case you must also provide the full exception and stack trace in your question. Not answerable as is.","body":"This just shows a competed SSL handshake. There is no error here. &#39;Couldn&#39;t authorise&#39; is not a Java message. It is a message printed by your application, under circumstances which you have not disclosed. You need to provide the code that printed it in your question. Presumably you got an exception, in which case you must also provide the full exception and stack trace in your question. Not answerable as is."}],"answers":[{"tags":[],"owner":{"account_id":2754663,"reputation":337,"user_id":2373118,"accept_rate":60,"display_name":"Gary Drocella"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426617188,"creation_date":1426617188,"answer_id":29107063,"question_id":29085950,"body_markdown":"Thanks to the comment of the EJP, I decided to dig into the client error message.  I added a debug statement that printed the error the client was getting, which was the following:\r\n\r\n    Hostname/IP doesn&#39;t match certificate&#39;s altnames\r\n\r\nI have a check in the client for this string, but I upgraded to node v0.12 and it appears they added some extra output in that statement.  The logic currently is to just ignore this error, and continue with the encrypted session.  \r\n\r\nThanks for the help.","title":"Debug Java SSL Handshake using -Djavax.net.debug=all","body":"<p>Thanks to the comment of the EJP, I decided to dig into the client error message.  I added a debug statement that printed the error the client was getting, which was the following:</p>\n\n<pre><code>Hostname/IP doesn't match certificate's altnames\n</code></pre>\n\n<p>I have a check in the client for this string, but I upgraded to node v0.12 and it appears they added some extra output in that statement.  The logic currently is to just ignore this error, and continue with the encrypted session.  </p>\n\n<p>Thanks for the help.</p>\n"}],"owner":{"account_id":2754663,"reputation":337,"user_id":2373118,"accept_rate":60,"display_name":"Gary Drocella"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10895,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1682848952,"answer_count":1,"score":3,"last_activity_date":1682737525,"creation_date":1426536270,"question_id":29085950,"body_markdown":"My Node.js client is connecting to a Java server with SSL.  It seems to work up until the CertificateVerify where then I get a cache session, and my client prints SSL Couldn&#39;t Authorize.  \r\n \r\nHere is a snippet of the Java server debug statements logged from the ssl handshake using -Djavax.net.debug=all.  The problem is, Java does not explicitly raise any red flags like couldn&#39;t verify signature.  This is the tail of the log where it stops. Note: I added an ellipses after the Cache Server Session at the end of the log.  \r\n\r\nCan anyone help me decipher this log output to determine why the ssl handshake is failing?  I&#39;m guessing that ultimately it can&#39;t verify the signature of the certificate, but I do not see this being explicitly stated. \r\n    \r\n    pool-1-thread-2, READ: TLSv1.2 Handshake, length = 264\r\n    *** CertificateVerify\r\n    Signature Algorithm SHA512withRSA\r\n    [read] MD5 and SHA1 hashes:  len = 264\r\n    0000: 0F 00 01 04 06 01 01 00   1E F6 13 87 8C 77 81 2D  .............w.-\r\n    0010: E3 33 EB E0 8F 80 49 C6   90 F9 B5 4C 9B A0 69 77  .3....I....L..iw\r\n    0020: B1 14 6C E3 B2 15 15 1F   26 D5 69 31 64 36 0D D1  ..l.....&amp;.i1d6..\r\n    0030: DA AD BA 58 BF 76 6D 25   1D 49 BA 4A C6 80 1C 49  ...X.vm%.I.J...I\r\n    0040: DC 5B D8 F0 FC B3 34 86   93 71 0D 3D 92 DB AB 0E  .[....4..q.=....\r\n    0050: 6A 34 62 FC F5 09 61 65   68 12 64 BB 6F 6E 39 96  j4b...aeh.d.on9.\r\n    0060: BC C6 40 D4 A1 63 4D 0E   68 61 02 8E 14 4B DF 6D  ..@..cM.ha...K.m\r\n    0070: B1 C2 D6 D5 E6 09 19 E9   31 A6 20 07 44 BB AD 43  ........1. .D..C\r\n    0080: D4 3C 91 9C 56 FC A8 70   8B 5C 8D 87 F2 61 30 CA  .&lt;..V..p.\\...a0.\r\n    0090: 6B 82 88 FA 3D B3 27 84   12 FE EF 2B 51 3A DD 5B  k...=.&#39;....+Q:.[\r\n    00A0: 0E 03 D6 44 E9 B8 04 EF   62 4B 7A 51 7E 6D 85 79  ...D....bKzQ.m.y\r\n    00B0: 1A 78 C8 5E 21 C8 E8 CA   2A 7D 2F 5E 6C 90 1B 00  .x.^!...*./^l...\r\n    00C0: B5 97 5F 8D FC D5 C3 D8   ED 2D 05 B6 DA 51 16 B7  .._......-...Q..\r\n    00D0: 39 14 44 46 DE 80 DD 98   31 F8 B5 DD E8 89 8C 64  9.DF....1......d\r\n    00E0: 4E DF 3C 99 38 10 87 F4   D0 67 4E C3 AA FE 25 F3  N.&lt;.8....gN...%.\r\n    00F0: 7E F1 48 60 52 09 2C 2B   C4 32 A4 58 92 3E 15 4A  ..H`R.,+.2.X.&gt;.J\r\n    0100: DA 11 CB 19 45 16 5D 79                            ....E.]y\r\n    [Raw read]: length = 5\r\n    0000: 14 03 03 00 01                                     .....\r\n    [Raw read]: length = 1\r\n    0000: 01                                                 .\r\n    pool-1-thread-2, READ: TLSv1.2 Change Cipher Spec, length = 1\r\n    [Raw read]: length = 5\r\n    0000: 16 03 03 00 50                                     ....P\r\n    [Raw read]: length = 80\r\n    0000: CE F7 6C D4 32 5C 12 6E   02 47 11 1E DA C8 7C 13  ..l.2\\.n.G......\r\n    0010: F0 F5 92 42 82 3D 58 FF   70 A3 05 D9 1F D8 00 1E  ...B.=X.p.......\r\n    0020: 88 77 06 11 78 B5 A7 AA   23 69 D5 54 E9 22 78 D6  .w..x...#i.T.&quot;x.\r\n    0030: 08 A8 B2 D8 AF CE 78 91   34 28 78 6B 50 8D 7E 32  ......x.4(xkP..2\r\n    0040: 1A 30 79 ED 31 51 FD 8D   79 59 5A 9D 99 27 B4 25  .0y.1Q..yYZ..&#39;.%\r\n    pool-1-thread-2, READ: TLSv1.2 Handshake, length = 80\r\n    Padded plaintext after DECRYPTION:  len = 80\r\n    0000: A8 92 6E 76 A7 44 8F 3F   0A 85 B0 7B 5F D9 21 CE  ..nv.D.?...._.!.\r\n    0010: 14 00 00 0C 86 62 B5 EF   19 0C 5C C2 DF 60 35 5C  .....b....\\..`5\\\r\n    0020: 84 2D 2D 20 C9 87 0A 37   33 44 5D E9 95 2D 3B B9  .-- ...73D]..-;.\r\n    0030: E3 50 F1 31 1C 54 F9 41   FB 4E C4 B6 81 C5 DF 78  .P.1.T.A.N.....x\r\n    0040: 0F 0F 0F 0F 0F 0F 0F 0F   0F 0F 0F 0F 0F 0F 0F 0F  ................\r\n    *** Finished\r\n    verify_data:  { 134, 98, 181, 239, 25, 12, 92, 194, 223, 96, 53, 92 }\r\n    ***\r\n    [read] MD5 and SHA1 hashes:  len = 16\r\n    0000: 14 00 00 0C 86 62 B5 EF   19 0C 5C C2 DF 60 35 5C  .....b....\\..`5\\\r\n    pool-1-thread-2, WRITE: TLSv1.2 Change Cipher Spec, length = 1\r\n    [Raw write]: length = 6\r\n    0000: 14 03 03 00 01 01                                  ......\r\n    *** Finished\r\n    verify_data:  { 166, 60, 137, 232, 242, 208, 180, 127, 89, 133, 80, 93 }\r\n    ***\r\n    [write] MD5 and SHA1 hashes:  len = 16\r\n    0000: 14 00 00 0C A6 3C 89 E8   F2 D0 B4 7F 59 85 50 5D  .....&lt;......Y.P]\r\n    Padded plaintext before ENCRYPTION:  len = 80\r\n    0000: 9C F6 B8 F4 10 05 57 5C   DE 38 27 7A 82 F5 04 88  ......W\\.8&#39;z....\r\n    0010: 14 00 00 0C A6 3C 89 E8   F2 D0 B4 7F 59 85 50 5D  .....&lt;......Y.P]\r\n    0020: 73 1C 58 7B 9D FD 88 E4   40 1A 04 AB A3 B3 57 38  s.X.....@.....W8\r\n    0030: 7B 22 19 CB F0 24 AE 16   69 63 04 F9 9E 20 7D 00  .&quot;...$..ic... ..\r\n    0040: 0F 0F 0F 0F 0F 0F 0F 0F   0F 0F 0F 0F 0F 0F 0F 0F  ................\r\n    pool-1-thread-2, WRITE: TLSv1.2 Handshake, length = 80\r\n    [Raw write]: length = 85\r\n    0000: 16 03 03 00 50 AB AE B3   92 D6 B2 9B D4 3F 51 A7  ....P........?Q.\r\n    0010: F6 FF B8 11 FF 81 26 33   2F 70 64 71 FF 33 F3 DA  ......&amp;3/pdq.3..\r\n    0020: EB B8 9E 5E 66 69 49 20   05 0F 1A A2 C1 C6 81 EC  ...^fiI ........\r\n    0030: 07 23 7E C8 26 11 49 8F   02 1F 53 8F 49 26 30 13  .#..&amp;.I...S.I&amp;0.\r\n    0040: DA 10 33 9F 0A 94 B5 39   86 C8 5F D9 8A 22 49 68  ..3....9.._..&quot;Ih\r\n    0050: C1 31 0A 7D CE                                     .1...\r\n    %% Cached server session: ...\r\n\r\nMore helpful information.  I&#39;ve checked the expiration of the certificate.  It expires November 2044, so I&#39;m assured that the hand shake isn&#39;t failing due to an expired certificate.","title":"Debug Java SSL Handshake using -Djavax.net.debug=all","body":"<p>My Node.js client is connecting to a Java server with SSL.  It seems to work up until the CertificateVerify where then I get a cache session, and my client prints SSL Couldn't Authorize.  </p>\n\n<p>Here is a snippet of the Java server debug statements logged from the ssl handshake using -Djavax.net.debug=all.  The problem is, Java does not explicitly raise any red flags like couldn't verify signature.  This is the tail of the log where it stops. Note: I added an ellipses after the Cache Server Session at the end of the log.  </p>\n\n<p>Can anyone help me decipher this log output to determine why the ssl handshake is failing?  I'm guessing that ultimately it can't verify the signature of the certificate, but I do not see this being explicitly stated. </p>\n\n<pre><code>pool-1-thread-2, READ: TLSv1.2 Handshake, length = 264\n*** CertificateVerify\nSignature Algorithm SHA512withRSA\n[read] MD5 and SHA1 hashes:  len = 264\n0000: 0F 00 01 04 06 01 01 00   1E F6 13 87 8C 77 81 2D  .............w.-\n0010: E3 33 EB E0 8F 80 49 C6   90 F9 B5 4C 9B A0 69 77  .3....I....L..iw\n0020: B1 14 6C E3 B2 15 15 1F   26 D5 69 31 64 36 0D D1  ..l.....&amp;.i1d6..\n0030: DA AD BA 58 BF 76 6D 25   1D 49 BA 4A C6 80 1C 49  ...X.vm%.I.J...I\n0040: DC 5B D8 F0 FC B3 34 86   93 71 0D 3D 92 DB AB 0E  .[....4..q.=....\n0050: 6A 34 62 FC F5 09 61 65   68 12 64 BB 6F 6E 39 96  j4b...aeh.d.on9.\n0060: BC C6 40 D4 A1 63 4D 0E   68 61 02 8E 14 4B DF 6D  ..@..cM.ha...K.m\n0070: B1 C2 D6 D5 E6 09 19 E9   31 A6 20 07 44 BB AD 43  ........1. .D..C\n0080: D4 3C 91 9C 56 FC A8 70   8B 5C 8D 87 F2 61 30 CA  .&lt;..V..p.\\...a0.\n0090: 6B 82 88 FA 3D B3 27 84   12 FE EF 2B 51 3A DD 5B  k...=.'....+Q:.[\n00A0: 0E 03 D6 44 E9 B8 04 EF   62 4B 7A 51 7E 6D 85 79  ...D....bKzQ.m.y\n00B0: 1A 78 C8 5E 21 C8 E8 CA   2A 7D 2F 5E 6C 90 1B 00  .x.^!...*./^l...\n00C0: B5 97 5F 8D FC D5 C3 D8   ED 2D 05 B6 DA 51 16 B7  .._......-...Q..\n00D0: 39 14 44 46 DE 80 DD 98   31 F8 B5 DD E8 89 8C 64  9.DF....1......d\n00E0: 4E DF 3C 99 38 10 87 F4   D0 67 4E C3 AA FE 25 F3  N.&lt;.8....gN...%.\n00F0: 7E F1 48 60 52 09 2C 2B   C4 32 A4 58 92 3E 15 4A  ..H`R.,+.2.X.&gt;.J\n0100: DA 11 CB 19 45 16 5D 79                            ....E.]y\n[Raw read]: length = 5\n0000: 14 03 03 00 01                                     .....\n[Raw read]: length = 1\n0000: 01                                                 .\npool-1-thread-2, READ: TLSv1.2 Change Cipher Spec, length = 1\n[Raw read]: length = 5\n0000: 16 03 03 00 50                                     ....P\n[Raw read]: length = 80\n0000: CE F7 6C D4 32 5C 12 6E   02 47 11 1E DA C8 7C 13  ..l.2\\.n.G......\n0010: F0 F5 92 42 82 3D 58 FF   70 A3 05 D9 1F D8 00 1E  ...B.=X.p.......\n0020: 88 77 06 11 78 B5 A7 AA   23 69 D5 54 E9 22 78 D6  .w..x...#i.T.\"x.\n0030: 08 A8 B2 D8 AF CE 78 91   34 28 78 6B 50 8D 7E 32  ......x.4(xkP..2\n0040: 1A 30 79 ED 31 51 FD 8D   79 59 5A 9D 99 27 B4 25  .0y.1Q..yYZ..'.%\npool-1-thread-2, READ: TLSv1.2 Handshake, length = 80\nPadded plaintext after DECRYPTION:  len = 80\n0000: A8 92 6E 76 A7 44 8F 3F   0A 85 B0 7B 5F D9 21 CE  ..nv.D.?...._.!.\n0010: 14 00 00 0C 86 62 B5 EF   19 0C 5C C2 DF 60 35 5C  .....b....\\..`5\\\n0020: 84 2D 2D 20 C9 87 0A 37   33 44 5D E9 95 2D 3B B9  .-- ...73D]..-;.\n0030: E3 50 F1 31 1C 54 F9 41   FB 4E C4 B6 81 C5 DF 78  .P.1.T.A.N.....x\n0040: 0F 0F 0F 0F 0F 0F 0F 0F   0F 0F 0F 0F 0F 0F 0F 0F  ................\n*** Finished\nverify_data:  { 134, 98, 181, 239, 25, 12, 92, 194, 223, 96, 53, 92 }\n***\n[read] MD5 and SHA1 hashes:  len = 16\n0000: 14 00 00 0C 86 62 B5 EF   19 0C 5C C2 DF 60 35 5C  .....b....\\..`5\\\npool-1-thread-2, WRITE: TLSv1.2 Change Cipher Spec, length = 1\n[Raw write]: length = 6\n0000: 14 03 03 00 01 01                                  ......\n*** Finished\nverify_data:  { 166, 60, 137, 232, 242, 208, 180, 127, 89, 133, 80, 93 }\n***\n[write] MD5 and SHA1 hashes:  len = 16\n0000: 14 00 00 0C A6 3C 89 E8   F2 D0 B4 7F 59 85 50 5D  .....&lt;......Y.P]\nPadded plaintext before ENCRYPTION:  len = 80\n0000: 9C F6 B8 F4 10 05 57 5C   DE 38 27 7A 82 F5 04 88  ......W\\.8'z....\n0010: 14 00 00 0C A6 3C 89 E8   F2 D0 B4 7F 59 85 50 5D  .....&lt;......Y.P]\n0020: 73 1C 58 7B 9D FD 88 E4   40 1A 04 AB A3 B3 57 38  s.X.....@.....W8\n0030: 7B 22 19 CB F0 24 AE 16   69 63 04 F9 9E 20 7D 00  .\"...$..ic... ..\n0040: 0F 0F 0F 0F 0F 0F 0F 0F   0F 0F 0F 0F 0F 0F 0F 0F  ................\npool-1-thread-2, WRITE: TLSv1.2 Handshake, length = 80\n[Raw write]: length = 85\n0000: 16 03 03 00 50 AB AE B3   92 D6 B2 9B D4 3F 51 A7  ....P........?Q.\n0010: F6 FF B8 11 FF 81 26 33   2F 70 64 71 FF 33 F3 DA  ......&amp;3/pdq.3..\n0020: EB B8 9E 5E 66 69 49 20   05 0F 1A A2 C1 C6 81 EC  ...^fiI ........\n0030: 07 23 7E C8 26 11 49 8F   02 1F 53 8F 49 26 30 13  .#..&amp;.I...S.I&amp;0.\n0040: DA 10 33 9F 0A 94 B5 39   86 C8 5F D9 8A 22 49 68  ..3....9.._..\"Ih\n0050: C1 31 0A 7D CE                                     .1...\n%% Cached server session: ...\n</code></pre>\n\n<p>More helpful information.  I've checked the expiration of the certificate.  It expires November 2044, so I'm assured that the hand shake isn't failing due to an expired certificate.</p>\n"},{"tags":["java","list","vector","synchronization"],"comments":[{"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"score":0,"creation_date":1361176373,"post_id":14932034,"comment_id":20953869,"body_markdown":"Consider using [`CopyOnWriteArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html) instead.","body":"Consider using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"nofollow noreferrer\"><code>CopyOnWriteArrayList</code></a> instead."},{"owner":{"account_id":72575,"reputation":40784,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"score":0,"creation_date":1361176611,"post_id":14932034,"comment_id":20953942,"body_markdown":"It is ordinarily too costly.","body":"It is ordinarily too costly."},{"owner":{"account_id":1612392,"reputation":3450,"user_id":1490986,"accept_rate":75,"display_name":"Dan King"},"score":1,"creation_date":1468919676,"post_id":14932034,"comment_id":64312637,"body_markdown":"This question has been marked as a duplicate - but the question it supposedly duplicates hasn&#39;t been answered (to be more precise, it has one &quot;answer&quot;, but it doesn&#39;t actually answer the question).","body":"This question has been marked as a duplicate - but the question it supposedly duplicates hasn&#39;t been answered (to be more precise, it has one &quot;answer&quot;, but it doesn&#39;t actually answer the question)."}],"answers":[{"tags":[],"owner":{"account_id":1509295,"reputation":3758,"user_id":1411812,"accept_rate":63,"display_name":"Vinod Jayachandran"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1361175992,"creation_date":1361175992,"answer_id":14932094,"question_id":14932034,"body_markdown":"Java Vectors are syncronized by default. You don&#39;t have to synchronize is explicitly. Even if you do so there is no extra benefit\r\n\r\nUse of Java Vector is highly discouraged and instead Syncronized &quot;ArrayList&quot; is suggested. There are clearly benefits of the same. \r\n\r\nAlso please refer [Are Vectors Obsolete ?][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5763838/java-6-se-are-vectors-obsolete","title":"In java, Vector and Collections.synchronizedList are all synchronized, what&#39;s the difference?","body":"<p>Java Vectors are syncronized by default. You don't have to synchronize is explicitly. Even if you do so there is no extra benefit</p>\n\n<p>Use of Java Vector is highly discouraged and instead Syncronized \"ArrayList\" is suggested. There are clearly benefits of the same. </p>\n\n<p>Also please refer <a href=\"https://stackoverflow.com/questions/5763838/java-6-se-are-vectors-obsolete\">Are Vectors Obsolete ?</a></p>\n"},{"tags":[],"owner":{"account_id":1052629,"reputation":3982,"user_id":1056138,"accept_rate":50,"display_name":"ATrubka"},"down_vote_count":1,"up_vote_count":15,"is_accepted":true,"score":14,"last_activity_date":1682736007,"creation_date":1361176075,"answer_id":14932111,"question_id":14932034,"body_markdown":"The main reason for this redundancy is backward compatibility with java code developed for old versions of Java.\r\n\r\nIf I remember correctly before Java 1.2 Collections were a separate library and were not part of standard JDK/JRE.\r\n\r\nAt that point the only list like data structure supplied by SDK was Vector. In Collections developers improved that Vector structure in many ways. Particularly, the new implementations like ArrayList didn&#39;t have synchronization as it proved to be unnecessary in most of the cases.\r\n\r\nStill they wanted to allow an easy way to create a synchronized version of list like collection. Thus they introduced SynchronizedList.\r\n\r\nThe main difference now between Vector and SynchronizedList is the way you use it. By calling Collections.synchronizedList you create a wrapper around your current List implementation, which means you don&#39;t copy data to another data structure and you keep underlying structure intact. For instance, if you want LinkedList structure behind it as opposed to ArrayList.\r\n\r\nIn case of a Vector, you actually copy the data to the new list like structure Vector. So it&#39;s less efficient in case you had a list before, but if you didn&#39;t have any data structure before, then you may want to use Vector as it doesn&#39;t add method wrapping cost to every method invocation. Another disadvantage of a vector is that you can&#39;t keep alternative underlying structure (such as LinkedList), you always use what&#39;s been implemented in the Vector itself.","title":"In java, Vector and Collections.synchronizedList are all synchronized, what&#39;s the difference?","body":"<p>The main reason for this redundancy is backward compatibility with java code developed for old versions of Java.</p>\n<p>If I remember correctly before Java 1.2 Collections were a separate library and were not part of standard JDK/JRE.</p>\n<p>At that point the only list like data structure supplied by SDK was Vector. In Collections developers improved that Vector structure in many ways. Particularly, the new implementations like ArrayList didn't have synchronization as it proved to be unnecessary in most of the cases.</p>\n<p>Still they wanted to allow an easy way to create a synchronized version of list like collection. Thus they introduced SynchronizedList.</p>\n<p>The main difference now between Vector and SynchronizedList is the way you use it. By calling Collections.synchronizedList you create a wrapper around your current List implementation, which means you don't copy data to another data structure and you keep underlying structure intact. For instance, if you want LinkedList structure behind it as opposed to ArrayList.</p>\n<p>In case of a Vector, you actually copy the data to the new list like structure Vector. So it's less efficient in case you had a list before, but if you didn't have any data structure before, then you may want to use Vector as it doesn't add method wrapping cost to every method invocation. Another disadvantage of a vector is that you can't keep alternative underlying structure (such as LinkedList), you always use what's been implemented in the Vector itself.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361176584,"creation_date":1361176584,"answer_id":14932234,"question_id":14932034,"body_markdown":"Vector is a synchronized List implementation and Collections.synchronziedList is a method of Collections utility class that creates a synchronized proxy for any List implementation","title":"In java, Vector and Collections.synchronizedList are all synchronized, what&#39;s the difference?","body":"<p>Vector is a synchronized List implementation and Collections.synchronziedList is a method of Collections utility class that creates a synchronized proxy for any List implementation</p>\n"}],"owner":{"account_id":1478601,"reputation":3574,"user_id":1388421,"accept_rate":55,"display_name":"roast_soul"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9803,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"closed_date":1361182281,"accepted_answer_id":14932111,"answer_count":3,"score":8,"last_activity_date":1682736007,"creation_date":1361175672,"question_id":14932034,"body_markdown":"If multiple threads access vector, vector will ensure that only one thread can access the vector at the same time. SynchronizedList is same. \r\nSo what&#39;s the difference?\r\nHow to choose in some synchronous situation?","title":"In java, Vector and Collections.synchronizedList are all synchronized, what&#39;s the difference?","body":"<p>If multiple threads access vector, vector will ensure that only one thread can access the vector at the same time. SynchronizedList is same. \nSo what's the difference?\nHow to choose in some synchronous situation?</p>\n"},{"tags":["java","arrays","multidimensional-array","primitive","deepequals"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682735602,"creation_date":1682635939,"answer_id":76125169,"question_id":76125091,"body_markdown":"The literal question asked is:\r\n\r\n&gt; Why does `Arrays.deepEquals(Object[] arr1, Object[] arr2)` work for primitive multidimensional arrays like `int[][]`, `float[][]` etc?\r\n\r\nThe simple answer to that is &quot;because the javadoc says so&quot;.  See [@Old Dog Programmer&#39;s answer][1] for details.\r\n\r\n-----------------\r\n\r\nBut the **real** question being asked (as I understand it) is:\r\n\r\n&gt; Why does it work for `int[][]`, `float[][]` etc but not for `int[]`, `float[]` etc?\r\n\r\nThis is a consequence of the way that subtyping and multidimensional array types work in Java.  In Java there is really no such thing as a multidimensional array type&lt;sup&gt;1&lt;/sup&gt;.  For example, the type `int[][]` is actually an &quot;array of arrays of `int`&quot;.   The &quot;array of `int`&quot; part is a primitive array type.  \r\n\r\nAccording to the Java subtyping rules, all arrays (including 1-D primitive arrays such as `int[]`) are subtypes of `Object`.  That means that `int[][]` (&quot;array of arrays of `int`&quot;) is a subtype of `Object[]` (&quot;array of `Object`&quot;).\r\n\r\nBy contrast an `int[]` is NOT a subtype of `Object[]` since `int` is not a subtype of `Object`.\r\n\r\nThat means that `Arrays.deepEquals` doesn&#39;t work for primitive arrays (i.e. the method is not applicable to the arguments) but it does work for *arrays of* primitive arrays; i.e. multidimensional primitive arrays.  The practical solution is to use the `Arrays.equals` overloads when comparing 1-D primitive arrays.\r\n\r\n-----------------------------\r\n\r\n&lt;sup&gt;1 - JLS Chapter 1 states: *&quot;The language supports arrays of arrays, rather than multidimensional arrays.&quot;*\r\n&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76125227/139985","title":"Why does Arrays.deepEquals(Object[]arr1,Object[]arr2) works for primitive multidimensional arrays like int[][] ,float[][] etc?","body":"<p>The literal question asked is:</p>\n<blockquote>\n<p>Why does <code>Arrays.deepEquals(Object[] arr1, Object[] arr2)</code> work for primitive multidimensional arrays like <code>int[][]</code>, <code>float[][]</code> etc?</p>\n</blockquote>\n<p>The simple answer to that is &quot;because the javadoc says so&quot;.  See <a href=\"https://stackoverflow.com/a/76125227/139985\">@Old Dog Programmer's answer</a> for details.</p>\n<hr />\n<p>But the <strong>real</strong> question being asked (as I understand it) is:</p>\n<blockquote>\n<p>Why does it work for <code>int[][]</code>, <code>float[][]</code> etc but not for <code>int[]</code>, <code>float[]</code> etc?</p>\n</blockquote>\n<p>This is a consequence of the way that subtyping and multidimensional array types work in Java.  In Java there is really no such thing as a multidimensional array type<sup>1</sup>.  For example, the type <code>int[][]</code> is actually an &quot;array of arrays of <code>int</code>&quot;.   The &quot;array of <code>int</code>&quot; part is a primitive array type.</p>\n<p>According to the Java subtyping rules, all arrays (including 1-D primitive arrays such as <code>int[]</code>) are subtypes of <code>Object</code>.  That means that <code>int[][]</code> (&quot;array of arrays of <code>int</code>&quot;) is a subtype of <code>Object[]</code> (&quot;array of <code>Object</code>&quot;).</p>\n<p>By contrast an <code>int[]</code> is NOT a subtype of <code>Object[]</code> since <code>int</code> is not a subtype of <code>Object</code>.</p>\n<p>That means that <code>Arrays.deepEquals</code> doesn't work for primitive arrays (i.e. the method is not applicable to the arguments) but it does work for <em>arrays of</em> primitive arrays; i.e. multidimensional primitive arrays.  The practical solution is to use the <code>Arrays.equals</code> overloads when comparing 1-D primitive arrays.</p>\n<hr />\n<p><sup>1 - JLS Chapter 1 states: <em>&quot;The language supports arrays of arrays, rather than multidimensional arrays.&quot;</em>\n</sup></p>\n"},{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682637314,"creation_date":1682636929,"answer_id":76125227,"question_id":76125091,"body_markdown":"It works because `Arrays.deepEquals` was written to work for 2D arrays of primitives. The [API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#deepEquals(java.lang.Object%5B%5D,java.lang.Object%5B%5D)) specifies it will work. Here is a quote, in which I emphasized the most relevant line: \r\n\r\n&gt; Two possibly null elements e1 and e2 are deeply equal if any of the following conditions hold:\r\n\r\n&gt; * e1 and e2 are both arrays of object reference types, and Arrays.deepEquals(e1, e2) would return true\r\n&gt; * **e1 and e2 are arrays of the same primitive type, and the appropriate overloading of Arrays.equals(e1, e2) would return true.**\r\n&gt; * e1 == e2\r\n&gt; * e1.equals(e2) would return true.\r\n&gt; Note that this definition permits null elements at any depth.\r\n\r\nHow was it made to work? We can look at the [source code](https://developer.classpath.org/doc/java/util/Arrays-source.html) for the method. It contains an `if ... else` chain that checks if the parameters are each an`instanceof` the same type of primitive array.\r\n\r\nThe code for the `deepToString` method contains a similar `if ... else` chain.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why does Arrays.deepEquals(Object[]arr1,Object[]arr2) works for primitive multidimensional arrays like int[][] ,float[][] etc?","body":"<p>It works because <code>Arrays.deepEquals</code> was written to work for 2D arrays of primitives. The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#deepEquals(java.lang.Object%5B%5D,java.lang.Object%5B%5D)\" rel=\"nofollow noreferrer\">API</a> specifies it will work. Here is a quote, in which I emphasized the most relevant line:</p>\n<blockquote>\n<p>Two possibly null elements e1 and e2 are deeply equal if any of the following conditions hold:</p>\n</blockquote>\n<blockquote>\n<ul>\n<li>e1 and e2 are both arrays of object reference types, and Arrays.deepEquals(e1, e2) would return true</li>\n<li><strong>e1 and e2 are arrays of the same primitive type, and the appropriate overloading of Arrays.equals(e1, e2) would return true.</strong></li>\n<li>e1 == e2</li>\n<li>e1.equals(e2) would return true.\nNote that this definition permits null elements at any depth.</li>\n</ul>\n</blockquote>\n<p>How was it made to work? We can look at the <a href=\"https://developer.classpath.org/doc/java/util/Arrays-source.html\" rel=\"nofollow noreferrer\">source code</a> for the method. It contains an <code>if ... else</code> chain that checks if the parameters are each an<code>instanceof</code> the same type of primitive array.</p>\n<p>The code for the <code>deepToString</code> method contains a similar <code>if ... else</code> chain.</p>\n"}],"owner":{"account_id":17933974,"reputation":25,"user_id":13030693,"display_name":"Anand Pandey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76125169,"answer_count":2,"score":2,"last_activity_date":1682735602,"creation_date":1682634725,"question_id":76125091,"body_markdown":"From method signature it is very clear that method accepts the argument of type Object[] but still this method works perfectly fine for primitive multidimensional arrays ?(like int[][],float[][] etc)\r\n(However it shows error for primitive one dimensional array (like int[],float[] etc))\r\n\r\nEx:\r\n      \r\n```\r\n      int[][]arr=new int[2][3];\r\n      arr[0][0]=1;\r\n      arr[0][1]=2;\r\n      arr[0][2]=3;\r\n      arr[1][0]=4;\r\n      arr[1][1]=5;\r\n      arr[1][2]=6;\r\n      int[][]arr1=new int[2][3];\r\n      arr1[0][0]=1;\r\n      arr1[0][1]=2;\r\n      arr1[0][2]=3;\r\n      arr1[1][0]=4;\r\n      arr1[1][1]=5;\r\n      arr1[1][2]=6;\r\n\r\n      System.out.println(Arrays.deepEquals(arr,arr1));\r\n\r\n      Output: true\r\n\r\n\r\nEx:  \r\n     int[]arr={1,2,3,4,5};\r\n     int[]arr1={1,2,3,4,5};\r\n     System.out.println(Arrays.deepEquals(arr,arr1));//Error\r\n/*&quot;The method deepEquals(Object[], Object[]) in the type Arrays is not applicable for the arguments (int[], int[])&quot;*/\r\n\r\n```\r\n\r\nthe same issue is with Arrays.deepToString(Object[]) From method signature it is very clear that this method too accepts the argument of type Object[] but still it works perfectly fine for primitive multidimensional arrays ?(like int[][],float[][] etc)(However it shows error for primitive one dimensional array (like int[],float[] etc))\r\n\r\n\r\n```\r\n  Ex:\r\n      int[][]arr=new int[2][3];\r\n      arr[0][0]=1;\r\n      arr[0][1]=2;\r\n      arr[0][2]=3;\r\n      arr[1][0]=4;\r\n      arr[1][1]=5;\r\n      arr[1][2]=6;\r\n\r\n      System.out.println(Arrays.deepToString(arr));\r\n\r\n      Output: [[1, 3, 0], [4, 5, 6]]\r\n\r\n\r\n Ex:\r\n\r\n     int[]arr={1,2,3,4,5}; \r\n     System.out.println(Arrays.deepToString(arr)); //Error\r\n    //&quot;The method deepToString(Object[]) in the type Arrays is not applicable for the arguments (int[])&quot;\r\n```\r\n\r\nEdit:\r\n\r\nI would also like to add few points from my end as well.\r\n\r\n1: Subtyping in Java :\r\n\r\n    What is subtyping?\r\n  =&gt;Subtyping is a key feature of object-oriented \r\n    programming languages such as Java. In Java, Sis a subtype of T if S \r\n    extends or implements T. Subtyping is transitive, meaning that if R is a \r\n    subtype of S, then R is also a subtype of T (T is the super type of both \r\n    Sand R).String is a subtype of Object, because the String class is a \r\n    subclass of the Object class.\r\n\r\n    int is not a subtype of Object, because none of Java&#39;s primitive types \r\n    are subtypes of any reference type.\r\n\r\n    StringBuilder is not a subtype of String, because the StringBuilder \r\n    class is not a subclass of the String class.\r\n\r\n     HashMap&lt;Candidate,Double&gt; is a subtype of Map&lt;Candidate,Double&gt;, \r\n     because the HashMap class implements the Map interface and the type \r\n     parameters match.\r\n\r\n     HashMap&lt;Candidate,Double&gt; is not a subtype of Map&lt;String,Ballot&gt;, even \r\n     though the HashMap class implements the Map interface, because the type \r\n     parameters do not match.\r\n\r\n2:  Subtyping among Array Types :\r\n\r\n    The following rules define the direct supertype relation among array \r\n    types:\r\n\r\n    If S and T are both reference types, then S[] &gt;1 T[] iff S &gt;1 T.\r\n\r\n    Object &gt;1 Object[]\r\n\r\n    Cloneable &gt;1 Object[]\r\n\r\n    java.io.Serializable &gt;1 Object[]\r\n\r\n    If P is a primitive type, then:\r\n\r\n    Object &gt;1 P[]\r\n\r\n    Cloneable &gt;1 P[]\r\n\r\n    java.io.Serializable &gt;1 P[]\r\n\r\n3: The direct superclass of an array type is Object.\r\n\r\n4: Every array type implements the interfaces Cloneable and \r\n   java.io.Serializable.\r\n\r\n5:In the Java programming language, arrays are objects , are dynamically \r\n  created, and may be assigned to variables of type Object. All methods of \r\n  class Object may be invoked on an array.\r\n\r\n6: An object is a class instance or an array.\r\n\r\n7: The reference values (often just references) are pointers to these \r\n   objects, and a special null reference, which refers to no object.\r\n\r\n8: A class instance is explicitly created by a class instance \r\n   creation expression.\r\n\r\n9: An array is explicitly created by an array creation expression .\r\n","title":"Why does Arrays.deepEquals(Object[]arr1,Object[]arr2) works for primitive multidimensional arrays like int[][] ,float[][] etc?","body":"<p>From method signature it is very clear that method accepts the argument of type Object[] but still this method works perfectly fine for primitive multidimensional arrays ?(like int[][],float[][] etc)\n(However it shows error for primitive one dimensional array (like int[],float[] etc))</p>\n<p>Ex:</p>\n<pre><code>      int[][]arr=new int[2][3];\n      arr[0][0]=1;\n      arr[0][1]=2;\n      arr[0][2]=3;\n      arr[1][0]=4;\n      arr[1][1]=5;\n      arr[1][2]=6;\n      int[][]arr1=new int[2][3];\n      arr1[0][0]=1;\n      arr1[0][1]=2;\n      arr1[0][2]=3;\n      arr1[1][0]=4;\n      arr1[1][1]=5;\n      arr1[1][2]=6;\n\n      System.out.println(Arrays.deepEquals(arr,arr1));\n\n      Output: true\n\n\nEx:  \n     int[]arr={1,2,3,4,5};\n     int[]arr1={1,2,3,4,5};\n     System.out.println(Arrays.deepEquals(arr,arr1));//Error\n/*&quot;The method deepEquals(Object[], Object[]) in the type Arrays is not applicable for the arguments (int[], int[])&quot;*/\n\n</code></pre>\n<p>the same issue is with Arrays.deepToString(Object[]) From method signature it is very clear that this method too accepts the argument of type Object[] but still it works perfectly fine for primitive multidimensional arrays ?(like int[][],float[][] etc)(However it shows error for primitive one dimensional array (like int[],float[] etc))</p>\n<pre><code>  Ex:\n      int[][]arr=new int[2][3];\n      arr[0][0]=1;\n      arr[0][1]=2;\n      arr[0][2]=3;\n      arr[1][0]=4;\n      arr[1][1]=5;\n      arr[1][2]=6;\n\n      System.out.println(Arrays.deepToString(arr));\n\n      Output: [[1, 3, 0], [4, 5, 6]]\n\n\n Ex:\n\n     int[]arr={1,2,3,4,5}; \n     System.out.println(Arrays.deepToString(arr)); //Error\n    //&quot;The method deepToString(Object[]) in the type Arrays is not applicable for the arguments (int[])&quot;\n</code></pre>\n<p>Edit:</p>\n<p>I would also like to add few points from my end as well.</p>\n<p>1: Subtyping in Java :</p>\n<pre><code>What is subtyping?\n</code></pre>\n<p>=&gt;Subtyping is a key feature of object-oriented\nprogramming languages such as Java. In Java, Sis a subtype of T if S\nextends or implements T. Subtyping is transitive, meaning that if R is a\nsubtype of S, then R is also a subtype of T (T is the super type of both\nSand R).String is a subtype of Object, because the String class is a\nsubclass of the Object class.</p>\n<pre><code>int is not a subtype of Object, because none of Java's primitive types \nare subtypes of any reference type.\n\nStringBuilder is not a subtype of String, because the StringBuilder \nclass is not a subclass of the String class.\n\n HashMap&lt;Candidate,Double&gt; is a subtype of Map&lt;Candidate,Double&gt;, \n because the HashMap class implements the Map interface and the type \n parameters match.\n\n HashMap&lt;Candidate,Double&gt; is not a subtype of Map&lt;String,Ballot&gt;, even \n though the HashMap class implements the Map interface, because the type \n parameters do not match.\n</code></pre>\n<p>2:  Subtyping among Array Types :</p>\n<pre><code>The following rules define the direct supertype relation among array \ntypes:\n\nIf S and T are both reference types, then S[] &gt;1 T[] iff S &gt;1 T.\n\nObject &gt;1 Object[]\n\nCloneable &gt;1 Object[]\n\njava.io.Serializable &gt;1 Object[]\n\nIf P is a primitive type, then:\n\nObject &gt;1 P[]\n\nCloneable &gt;1 P[]\n\njava.io.Serializable &gt;1 P[]\n</code></pre>\n<p>3: The direct superclass of an array type is Object.</p>\n<p>4: Every array type implements the interfaces Cloneable and\njava.io.Serializable.</p>\n<p>5:In the Java programming language, arrays are objects , are dynamically\ncreated, and may be assigned to variables of type Object. All methods of\nclass Object may be invoked on an array.</p>\n<p>6: An object is a class instance or an array.</p>\n<p>7: The reference values (often just references) are pointers to these\nobjects, and a special null reference, which refers to no object.</p>\n<p>8: A class instance is explicitly created by a class instance\ncreation expression.</p>\n<p>9: An array is explicitly created by an array creation expression .</p>\n"},{"tags":["java","swing","txt"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1682672261,"post_id":76127862,"comment_id":134255794,"body_markdown":"Swing is not thread safe - you should be using a SwingWorker","body":"Swing is not thread safe - you should be using a SwingWorker"},{"owner":{"account_id":28443448,"reputation":1,"user_id":21762501,"display_name":"Orhancan Yldrm"},"score":0,"creation_date":1682672761,"post_id":76127862,"comment_id":134255909,"body_markdown":"i used it to prevent the app from freezing","body":"i used it to prevent the app from freezing"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1682673240,"post_id":76127862,"comment_id":134256006,"body_markdown":"And, as I stated, Swing is NOT thread safe - you should be using a `SwingWorker` which will allow you to execute a long running or blocking operation in the background, but provides you with the functionality to post updates back the Event Dispatching Thread","body":"And, as I stated, Swing is NOT thread safe - you should be using a <code>SwingWorker</code> which will allow you to execute a long running or blocking operation in the background, but provides you with the functionality to post updates back the Event Dispatching Thread"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1682678360,"post_id":76127862,"comment_id":134257066,"body_markdown":"another must-not (apart from must-not access components nor any of its properties off the EDT) is a null layout manager (along with hard-coding locations/sizes of components), instead choose a manager that suits your needs, the swing tag wiki has references for tutorials to learn how to use them.","body":"another must-not (apart from must-not access components nor any of its properties off the EDT) is a null layout manager (along with hard-coding locations/sizes of components), instead choose a manager that suits your needs, the swing tag wiki has references for tutorials to learn how to use them."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682731939,"creation_date":1682674000,"answer_id":76128140,"question_id":76127862,"body_markdown":"Swing is not thread safe, this means that you should not be updating the UI, or any state the UI relies on, from outside the context of the Event Dispatching Thread.\r\n\r\nSee [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for more details.\r\n\r\nIn this case, I would suggest using a `SwingWorker`, see [Worker Threads and SwingWorker](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html) for more details.\r\n\r\nI modified your code to generate some random data and your `MusteriEkle` button code to make use of a `SwingWorker` which will update the UI with new rows of data, after a small, deliberate, delay, which is used for effect.\r\n\r\n    protected List&lt;Musteri&gt; randomData() {\r\n        List&lt;Musteri&gt; data = new ArrayList&lt;&gt;(256);\r\n        for (int index = 0; index &lt; 100 + (int) (Math.random() * 1000); index++) {\r\n            data.add(new Musteri(index));\r\n        }\r\n        return data;\r\n    }\r\n\r\n    public JButton getMusteriEkle() {\r\n        if (musteriEkle == null) {\r\n            musteriEkle = new JButton(&quot;M&#252;teri Olutur&quot;);\r\n            musteriEkle.setBounds(50, 500, 200, 30);\r\n            musteriEkle.setBackground(new Color(143, 194, 197));\r\n            musteriEkle.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    musteriEkle.setEnabled(false);\r\n                    musteriModel.setRowCount(0); // Tablodaki t&#252;m satrlar sil\r\n                    SwingWorker&lt;Void, Object[]&gt; worker = new SwingWorker&lt;&gt;() {\r\n                        @Override\r\n                        protected Void doInBackground() throws Exception {\r\n                            Thread.sleep(50);\r\n                            List&lt;Musteri&gt; musteriler = randomData();\r\n                            for (int i = 0; i &lt; musteriler.size(); i++) {\r\n                                Object[] musteriVeri = new Object[4]; // Yeni dizi olutur\r\n                                musteriVeri[0] = musteriler.get(i).getAdSoyad();\r\n                                musteriVeri[1] = musteriler.get(i).getEmail();\r\n                                musteriVeri[2] = musteriler.get(i).gettelefoNo();\r\n                                musteriVeri[3] = musteriler.get(i).getSevkAdresi();\r\n                                publish(musteriVeri);\r\n                                Thread.sleep(50);\r\n                            }\r\n                            return null;\r\n                        }\r\n\r\n                        @Override\r\n                        protected void process(List&lt;Object[]&gt; chunks) {\r\n                            for (Object[] row : chunks) {\r\n                                musteriModel.addRow(row);\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        protected void done() {\r\n                            musteriEkle.setEnabled(true);\r\n                        }\r\n                    };\r\n                    worker.execute();\r\n                }\r\n            });\r\n            //musteriEkle.addActionListener(new MusteriEkraniAction(this));\r\n\r\n        }\r\n        return musteriEkle;\r\n    }\r\n\r\nYou might want to take some time and learn the [Code Conventions for the Java  Programming Language](https://www.oracle.com/java/technologies/javase/codeconventions-contents.html), it will make it easier for other people to read your code.\r\n\r\nI would also recommend taking the time to learn, understand and use [the layout management system](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) available in Swing ... as you layout kind of broke on my system while I was trying to test your code.\r\n\r\n&gt; but when I press it, the previous data in &quot;Musteri.txt&quot; is added to the table, that is, it is repeated\r\n\r\nI was unable to reproduce your issue as you supplied a incomplete and uncompilable code example, but I would start my investigation in `MusteriController` and the `ListeyiAl` method.","title":"When I add data to the table I want it to update instantly","body":"<p>Swing is not thread safe, this means that you should not be updating the UI, or any state the UI relies on, from outside the context of the Event Dispatching Thread.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> for more details.</p>\n<p>In this case, I would suggest using a <code>SwingWorker</code>, see <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\" rel=\"nofollow noreferrer\">Worker Threads and SwingWorker</a> for more details.</p>\n<p>I modified your code to generate some random data and your <code>MusteriEkle</code> button code to make use of a <code>SwingWorker</code> which will update the UI with new rows of data, after a small, deliberate, delay, which is used for effect.</p>\n<pre><code>protected List&lt;Musteri&gt; randomData() {\n    List&lt;Musteri&gt; data = new ArrayList&lt;&gt;(256);\n    for (int index = 0; index &lt; 100 + (int) (Math.random() * 1000); index++) {\n        data.add(new Musteri(index));\n    }\n    return data;\n}\n\npublic JButton getMusteriEkle() {\n    if (musteriEkle == null) {\n        musteriEkle = new JButton(&quot;Mteri Olutur&quot;);\n        musteriEkle.setBounds(50, 500, 200, 30);\n        musteriEkle.setBackground(new Color(143, 194, 197));\n        musteriEkle.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                musteriEkle.setEnabled(false);\n                musteriModel.setRowCount(0); // Tablodaki tm satrlar sil\n                SwingWorker&lt;Void, Object[]&gt; worker = new SwingWorker&lt;&gt;() {\n                    @Override\n                    protected Void doInBackground() throws Exception {\n                        Thread.sleep(50);\n                        List&lt;Musteri&gt; musteriler = randomData();\n                        for (int i = 0; i &lt; musteriler.size(); i++) {\n                            Object[] musteriVeri = new Object[4]; // Yeni dizi olutur\n                            musteriVeri[0] = musteriler.get(i).getAdSoyad();\n                            musteriVeri[1] = musteriler.get(i).getEmail();\n                            musteriVeri[2] = musteriler.get(i).gettelefoNo();\n                            musteriVeri[3] = musteriler.get(i).getSevkAdresi();\n                            publish(musteriVeri);\n                            Thread.sleep(50);\n                        }\n                        return null;\n                    }\n\n                    @Override\n                    protected void process(List&lt;Object[]&gt; chunks) {\n                        for (Object[] row : chunks) {\n                            musteriModel.addRow(row);\n                        }\n                    }\n\n                    @Override\n                    protected void done() {\n                        musteriEkle.setEnabled(true);\n                    }\n                };\n                worker.execute();\n            }\n        });\n        //musteriEkle.addActionListener(new MusteriEkraniAction(this));\n\n    }\n    return musteriEkle;\n}\n</code></pre>\n<p>You might want to take some time and learn the <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-contents.html\" rel=\"nofollow noreferrer\">Code Conventions for the Java  Programming Language</a>, it will make it easier for other people to read your code.</p>\n<p>I would also recommend taking the time to learn, understand and use <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">the layout management system</a> available in Swing ... as you layout kind of broke on my system while I was trying to test your code.</p>\n<blockquote>\n<p>but when I press it, the previous data in &quot;Musteri.txt&quot; is added to the table, that is, it is repeated</p>\n</blockquote>\n<p>I was unable to reproduce your issue as you supplied a incomplete and uncompilable code example, but I would start my investigation in <code>MusteriController</code> and the <code>ListeyiAl</code> method.</p>\n"}],"owner":{"account_id":28443448,"reputation":1,"user_id":21762501,"display_name":"Orhancan Yldrm"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1682678466,"answer_count":1,"score":-1,"last_activity_date":1682731939,"creation_date":1682671924,"question_id":76127862,"body_markdown":"My problem is that I want the table to be updated instantly as soon as I press the &quot;MusteriEkle&quot; button while transferring the data I received from the &quot;MusteriOlusturmaEkrann&quot; to the table, but when I press it, the previous data in &quot;Musteri.txt&quot; is added to the table, that is, it is repeated, but when we click the &quot;GeriDon&quot; button and come to the &quot;AnaEkran&quot;, and again when we click on the &quot;MusteriOlusturmaEkrann&quot; It shows up correctly when we open &quot; How can I fix this?\r\n```java\r\npackage GUI;\r\n\r\nimport Action.MusteriEkraniAction;\r\nimport Controller.MusteriController;\r\nimport DAO.MusteriDao;\r\nimport Entity.Musteri;\r\nimport java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.io.IOException;\r\nimport java.util.List;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTable;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.table.DefaultTableModel;\r\n\r\npublic class MusteriOlusturmaEkrani extends JFrame {\r\n    private JTable MusteriTablo;\r\n    private JLabel AdSoyad;\r\n    private JLabel TelefoNo;\r\n    private JLabel Email;\r\n    private JLabel SevkAdres;\r\n    private JTextField AdSoyadF;\r\n    private JTextField EmailF;\r\n    private JTextField TelefoNoF;\r\n    private JTextField SevkAdresF;\r\n    private JScrollPane tabloPane;\r\n    private JButton GeriDon;\r\n    private JButton MusteriEkle;\r\n    private DefaultTableModel Musterimodel;\r\n    public Object[] musteriVeri;\r\n    public MusteriController musteriController;\r\n\r\n    public MusteriOlusturmaEkrani() throws IOException {\r\n        TabloOlustur();\r\n        Olustur();\r\n    }\r\n\r\n    private void TabloOlustur() {\r\n        MusteriDao musteridao = new MusteriDao();\r\n        musteriController = new MusteriController();\r\n        Musterimodel = new DefaultTableModel();\r\n        Object[] m&#252;steriObje = new Object[4];\r\n        m&#252;steriObje[0] = &quot;Ad Soyad&quot;;\r\n        m&#252;steriObje[1] = &quot;Tel No&quot;;\r\n        m&#252;steriObje[2] = &quot;E-mail&quot;;\r\n        m&#252;steriObje[3] = &quot;Adres&quot;;\r\n        Musterimodel.setColumnIdentifiers(m&#252;steriObje);\r\n        musteriVeri = new Object[4];\r\n        List&lt;Musteri&gt; musteriler = musteriController.ListeyiAl();\r\n        for (int i = 0; i &lt; musteriler.size(); i++) {\r\n            musteriVeri[0] = musteriler.get(i).getAdSoyad();\r\n            musteriVeri[1] = musteriler.get(i).getEmail();\r\n            musteriVeri[2] = musteriler.get(i).gettelefoNo();\r\n            musteriVeri[3] = musteriler.get(i).getSevkAdresi();\r\n            Musterimodel.addRow(musteriVeri);\r\n        }\r\n        PanelEkle();\r\n    }\r\n\r\n    public void TabloGuncelle() {\r\n        Thread thread = new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                Musterimodel.setRowCount(0); // Tablodaki t&#252;m satrlar sil\r\n                List&lt;Musteri&gt; musteriler = musteriController.ListeyiAl();\r\n                for (int i = 0; i &lt; musteriler.size(); i++) {\r\n                    Object[] musteriVeri = new Object[4]; // Yeni dizi olutur\r\n                    musteriVeri[0] = musteriler.get(i).getAdSoyad();\r\n                    musteriVeri[1] = musteriler.get(i).getEmail();\r\n                    musteriVeri[2] = musteriler.get(i).gettelefoNo();\r\n                    musteriVeri[3] = musteriler.get(i).getSevkAdresi();\r\n                    Musterimodel.addRow(musteriVeri);\r\n                }\r\n            }\r\n        });\r\n        thread.start();\r\n    }\r\n\r\n    private void Olustur() {\r\n        add(PanelEkle());\r\n        setTitle(&quot;M&#252;teri Oluturma&quot;);\r\n        setLocationRelativeTo(null);\r\n        setBounds(300, 75, 1000, 650);\r\n        setVisible(true);\r\n        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n        setResizable(false);\r\n    }\r\n\r\n    private JPanel PanelEkle() {\r\n        JPanel M&#252;steriPanel = new JPanel();\r\n        M&#252;steriPanel.setBackground(new Color(255, 240, 255));\r\n        M&#252;steriPanel.setLayout(null);\r\n        M&#252;steriPanel.add(getTabloPane());\r\n        M&#252;steriPanel.add(getAdSoyad());\r\n        M&#252;steriPanel.add(getAdSoyadF());\r\n        M&#252;steriPanel.add(getTelefoNo());\r\n        M&#252;steriPanel.add(getTelefoNoF());\r\n        M&#252;steriPanel.add(getEmail());\r\n        M&#252;steriPanel.add(getEmailF());\r\n        M&#252;steriPanel.add(getGeriDon());\r\n        M&#252;steriPanel.add(getSevkAdres());\r\n        M&#252;steriPanel.add(getSevkAdresF());\r\n        M&#252;steriPanel.add(getMusteriEkle());\r\n        return M&#252;steriPanel;\r\n    }\r\n\r\n    public JTable getMusteriTablo() {\r\n        if (MusteriTablo == null) {\r\n            MusteriTablo = new JTable();\r\n            MusteriTablo.setModel(Musterimodel);\r\n        }\r\n        return MusteriTablo;\r\n    }\r\n\r\n    public void setMusteriTablo(JTable MusteriTablo) {\r\n        this.MusteriTablo = MusteriTablo;\r\n    }\r\n\r\n    public JLabel getAdSoyad() {\r\n        if (AdSoyad == null) {\r\n            AdSoyad = new JLabel(&quot;Ad Soyad :&quot;);\r\n            AdSoyad.setBounds(50, 100, 200, 50);\r\n            AdSoyad.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\r\n        }\r\n        return AdSoyad;\r\n    }\r\n\r\n    public void setAdSoyad(JLabel AdSoyad) {\r\n        this.AdSoyad = AdSoyad;\r\n    }\r\n\r\n    public JLabel getTelefoNo() {\r\n        if (TelefoNo == null) {\r\n            TelefoNo = new JLabel(&quot;Telefon :&quot;);\r\n            TelefoNo.setBounds(50, 260, 200, 50);\r\n            TelefoNo.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\r\n        }\r\n        return TelefoNo;\r\n    }\r\n\r\n    public void setTelefoNo(JLabel TelefoNo) {\r\n        this.TelefoNo = TelefoNo;\r\n    }\r\n\r\n    public JLabel getEmail() {\r\n        if (Email == null) {\r\n            Email = new JLabel(&quot;E-mail :&quot;);\r\n            Email.setBounds(50, 180, 200, 50);\r\n            Email.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\r\n        }\r\n        return Email;\r\n    }\r\n\r\n    public void setEmail(JLabel Email) {\r\n        this.Email = Email;\r\n    }\r\n\r\n    public JTextField getAdSoyadF() {\r\n        if (AdSoyadF == null) {\r\n            AdSoyadF = new JTextField();\r\n            AdSoyadF.setBounds(50, 150, 200, 30);\r\n        }\r\n        return AdSoyadF;\r\n    }\r\n\r\n    public void setAdSoyadF(JTextField AdSoyadF) {\r\n        this.AdSoyadF = AdSoyadF;\r\n    }\r\n\r\n    public JTextField getEmailF() {\r\n        if (EmailF == null) {\r\n            EmailF = new JTextField();\r\n            EmailF.setBounds(50, 310, 200, 30);\r\n        }\r\n        return EmailF;\r\n    }\r\n\r\n    public void setEmailF(JTextField EmailF) {\r\n        this.EmailF = EmailF;\r\n    }\r\n\r\n    public JTextField getTelefoNoF() {\r\n        if (TelefoNoF == null) {\r\n            TelefoNoF = new JTextField();\r\n            TelefoNoF.setBounds(50, 230, 200, 30);\r\n        }\r\n        return TelefoNoF;\r\n    }\r\n\r\n    public void setTelefoNoF(JTextField TelefoNoF) {\r\n        this.TelefoNoF = TelefoNoF;\r\n    }\r\n\r\n    public JScrollPane getTabloPane() {\r\n        if (tabloPane == null) {\r\n            tabloPane = new JScrollPane();\r\n            tabloPane.setViewportView(getMusteriTablo());\r\n            tabloPane.setBounds(450, 50, 500, 450);\r\n        }\r\n        return tabloPane;\r\n    }\r\n\r\n    public void setTabloPane(JScrollPane tabloPane) {\r\n        this.tabloPane = tabloPane;\r\n    }\r\n\r\n    public JButton getGeriDon() {\r\n        if (GeriDon == null) {\r\n            GeriDon = new JButton(&quot;Geri d&#246;n&quot;);\r\n            GeriDon.setBounds(850, 550, 100, 30);\r\n            GeriDon.setBackground(new Color(186, 153, 187));\r\n            GeriDon.addActionListener(new MusteriEkraniAction(this));\r\n        }\r\n        return GeriDon;\r\n    }\r\n\r\n    public void setGeriDon(JButton GeriDon) {\r\n        this.GeriDon = GeriDon;\r\n    }\r\n\r\n    public JLabel getSevkAdres() {\r\n        if (SevkAdres == null) {\r\n            SevkAdres = new JLabel(&quot;Sevk Adresi :&quot;);\r\n            SevkAdres.setBounds(50, 360, 100, 30);\r\n            SevkAdres.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\r\n        }\r\n        return SevkAdres;\r\n    }\r\n\r\n    public void setSevkAdres(JLabel SevkAdres) {\r\n        this.SevkAdres = SevkAdres;\r\n    }\r\n\r\n    public JTextField getSevkAdresF() {\r\n        if (SevkAdresF == null) {\r\n            SevkAdresF = new JTextField();\r\n            SevkAdresF.setBounds(50, 410, 200, 30);\r\n        }\r\n        return SevkAdresF;\r\n    }\r\n\r\n    public void setSevkAdresF(JTextField SevkAdresF) {\r\n        this.SevkAdresF = SevkAdresF;\r\n    }\r\n\r\n    public JButton getMusteriEkle() {\r\n        if (MusteriEkle == null) {\r\n            MusteriEkle = new JButton(&quot;M&#252;teri Olutur&quot;);\r\n            MusteriEkle.setBounds(50, 500, 200, 30);\r\n            MusteriEkle.setBackground(new Color(143, 194, 197));\r\n            MusteriEkle.addActionListener(new MusteriEkraniAction(this));\r\n        }\r\n        return MusteriEkle;\r\n    }\r\n\r\n    public void setMusteriEkle(JButton MusteriEkle) {\r\n        this.MusteriEkle = MusteriEkle;\r\n    }\r\n}\r\n```\r\n&quot;Musterimodel.setRowCount(0);&quot; in &quot;TabloG&#252;ncelle&quot; I tried adding the code it was repeating twice before this code it was repeating once after adding this code","title":"When I add data to the table I want it to update instantly","body":"<p>My problem is that I want the table to be updated instantly as soon as I press the &quot;MusteriEkle&quot; button while transferring the data I received from the &quot;MusteriOlusturmaEkrann&quot; to the table, but when I press it, the previous data in &quot;Musteri.txt&quot; is added to the table, that is, it is repeated, but when we click the &quot;GeriDon&quot; button and come to the &quot;AnaEkran&quot;, and again when we click on the &quot;MusteriOlusturmaEkrann&quot; It shows up correctly when we open &quot; How can I fix this?</p>\n<pre class=\"lang-java prettyprint-override\"><code>package GUI;\n\nimport Action.MusteriEkraniAction;\nimport Controller.MusteriController;\nimport DAO.MusteriDao;\nimport Entity.Musteri;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.io.IOException;\nimport java.util.List;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTable;\nimport javax.swing.JTextField;\nimport javax.swing.table.DefaultTableModel;\n\npublic class MusteriOlusturmaEkrani extends JFrame {\n    private JTable MusteriTablo;\n    private JLabel AdSoyad;\n    private JLabel TelefoNo;\n    private JLabel Email;\n    private JLabel SevkAdres;\n    private JTextField AdSoyadF;\n    private JTextField EmailF;\n    private JTextField TelefoNoF;\n    private JTextField SevkAdresF;\n    private JScrollPane tabloPane;\n    private JButton GeriDon;\n    private JButton MusteriEkle;\n    private DefaultTableModel Musterimodel;\n    public Object[] musteriVeri;\n    public MusteriController musteriController;\n\n    public MusteriOlusturmaEkrani() throws IOException {\n        TabloOlustur();\n        Olustur();\n    }\n\n    private void TabloOlustur() {\n        MusteriDao musteridao = new MusteriDao();\n        musteriController = new MusteriController();\n        Musterimodel = new DefaultTableModel();\n        Object[] msteriObje = new Object[4];\n        msteriObje[0] = &quot;Ad Soyad&quot;;\n        msteriObje[1] = &quot;Tel No&quot;;\n        msteriObje[2] = &quot;E-mail&quot;;\n        msteriObje[3] = &quot;Adres&quot;;\n        Musterimodel.setColumnIdentifiers(msteriObje);\n        musteriVeri = new Object[4];\n        List&lt;Musteri&gt; musteriler = musteriController.ListeyiAl();\n        for (int i = 0; i &lt; musteriler.size(); i++) {\n            musteriVeri[0] = musteriler.get(i).getAdSoyad();\n            musteriVeri[1] = musteriler.get(i).getEmail();\n            musteriVeri[2] = musteriler.get(i).gettelefoNo();\n            musteriVeri[3] = musteriler.get(i).getSevkAdresi();\n            Musterimodel.addRow(musteriVeri);\n        }\n        PanelEkle();\n    }\n\n    public void TabloGuncelle() {\n        Thread thread = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                Musterimodel.setRowCount(0); // Tablodaki tm satrlar sil\n                List&lt;Musteri&gt; musteriler = musteriController.ListeyiAl();\n                for (int i = 0; i &lt; musteriler.size(); i++) {\n                    Object[] musteriVeri = new Object[4]; // Yeni dizi olutur\n                    musteriVeri[0] = musteriler.get(i).getAdSoyad();\n                    musteriVeri[1] = musteriler.get(i).getEmail();\n                    musteriVeri[2] = musteriler.get(i).gettelefoNo();\n                    musteriVeri[3] = musteriler.get(i).getSevkAdresi();\n                    Musterimodel.addRow(musteriVeri);\n                }\n            }\n        });\n        thread.start();\n    }\n\n    private void Olustur() {\n        add(PanelEkle());\n        setTitle(&quot;Mteri Oluturma&quot;);\n        setLocationRelativeTo(null);\n        setBounds(300, 75, 1000, 650);\n        setVisible(true);\n        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n        setResizable(false);\n    }\n\n    private JPanel PanelEkle() {\n        JPanel MsteriPanel = new JPanel();\n        MsteriPanel.setBackground(new Color(255, 240, 255));\n        MsteriPanel.setLayout(null);\n        MsteriPanel.add(getTabloPane());\n        MsteriPanel.add(getAdSoyad());\n        MsteriPanel.add(getAdSoyadF());\n        MsteriPanel.add(getTelefoNo());\n        MsteriPanel.add(getTelefoNoF());\n        MsteriPanel.add(getEmail());\n        MsteriPanel.add(getEmailF());\n        MsteriPanel.add(getGeriDon());\n        MsteriPanel.add(getSevkAdres());\n        MsteriPanel.add(getSevkAdresF());\n        MsteriPanel.add(getMusteriEkle());\n        return MsteriPanel;\n    }\n\n    public JTable getMusteriTablo() {\n        if (MusteriTablo == null) {\n            MusteriTablo = new JTable();\n            MusteriTablo.setModel(Musterimodel);\n        }\n        return MusteriTablo;\n    }\n\n    public void setMusteriTablo(JTable MusteriTablo) {\n        this.MusteriTablo = MusteriTablo;\n    }\n\n    public JLabel getAdSoyad() {\n        if (AdSoyad == null) {\n            AdSoyad = new JLabel(&quot;Ad Soyad :&quot;);\n            AdSoyad.setBounds(50, 100, 200, 50);\n            AdSoyad.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\n        }\n        return AdSoyad;\n    }\n\n    public void setAdSoyad(JLabel AdSoyad) {\n        this.AdSoyad = AdSoyad;\n    }\n\n    public JLabel getTelefoNo() {\n        if (TelefoNo == null) {\n            TelefoNo = new JLabel(&quot;Telefon :&quot;);\n            TelefoNo.setBounds(50, 260, 200, 50);\n            TelefoNo.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\n        }\n        return TelefoNo;\n    }\n\n    public void setTelefoNo(JLabel TelefoNo) {\n        this.TelefoNo = TelefoNo;\n    }\n\n    public JLabel getEmail() {\n        if (Email == null) {\n            Email = new JLabel(&quot;E-mail :&quot;);\n            Email.setBounds(50, 180, 200, 50);\n            Email.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\n        }\n        return Email;\n    }\n\n    public void setEmail(JLabel Email) {\n        this.Email = Email;\n    }\n\n    public JTextField getAdSoyadF() {\n        if (AdSoyadF == null) {\n            AdSoyadF = new JTextField();\n            AdSoyadF.setBounds(50, 150, 200, 30);\n        }\n        return AdSoyadF;\n    }\n\n    public void setAdSoyadF(JTextField AdSoyadF) {\n        this.AdSoyadF = AdSoyadF;\n    }\n\n    public JTextField getEmailF() {\n        if (EmailF == null) {\n            EmailF = new JTextField();\n            EmailF.setBounds(50, 310, 200, 30);\n        }\n        return EmailF;\n    }\n\n    public void setEmailF(JTextField EmailF) {\n        this.EmailF = EmailF;\n    }\n\n    public JTextField getTelefoNoF() {\n        if (TelefoNoF == null) {\n            TelefoNoF = new JTextField();\n            TelefoNoF.setBounds(50, 230, 200, 30);\n        }\n        return TelefoNoF;\n    }\n\n    public void setTelefoNoF(JTextField TelefoNoF) {\n        this.TelefoNoF = TelefoNoF;\n    }\n\n    public JScrollPane getTabloPane() {\n        if (tabloPane == null) {\n            tabloPane = new JScrollPane();\n            tabloPane.setViewportView(getMusteriTablo());\n            tabloPane.setBounds(450, 50, 500, 450);\n        }\n        return tabloPane;\n    }\n\n    public void setTabloPane(JScrollPane tabloPane) {\n        this.tabloPane = tabloPane;\n    }\n\n    public JButton getGeriDon() {\n        if (GeriDon == null) {\n            GeriDon = new JButton(&quot;Geri dn&quot;);\n            GeriDon.setBounds(850, 550, 100, 30);\n            GeriDon.setBackground(new Color(186, 153, 187));\n            GeriDon.addActionListener(new MusteriEkraniAction(this));\n        }\n        return GeriDon;\n    }\n\n    public void setGeriDon(JButton GeriDon) {\n        this.GeriDon = GeriDon;\n    }\n\n    public JLabel getSevkAdres() {\n        if (SevkAdres == null) {\n            SevkAdres = new JLabel(&quot;Sevk Adresi :&quot;);\n            SevkAdres.setBounds(50, 360, 100, 30);\n            SevkAdres.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 20));\n        }\n        return SevkAdres;\n    }\n\n    public void setSevkAdres(JLabel SevkAdres) {\n        this.SevkAdres = SevkAdres;\n    }\n\n    public JTextField getSevkAdresF() {\n        if (SevkAdresF == null) {\n            SevkAdresF = new JTextField();\n            SevkAdresF.setBounds(50, 410, 200, 30);\n        }\n        return SevkAdresF;\n    }\n\n    public void setSevkAdresF(JTextField SevkAdresF) {\n        this.SevkAdresF = SevkAdresF;\n    }\n\n    public JButton getMusteriEkle() {\n        if (MusteriEkle == null) {\n            MusteriEkle = new JButton(&quot;Mteri Olutur&quot;);\n            MusteriEkle.setBounds(50, 500, 200, 30);\n            MusteriEkle.setBackground(new Color(143, 194, 197));\n            MusteriEkle.addActionListener(new MusteriEkraniAction(this));\n        }\n        return MusteriEkle;\n    }\n\n    public void setMusteriEkle(JButton MusteriEkle) {\n        this.MusteriEkle = MusteriEkle;\n    }\n}\n</code></pre>\n<p>&quot;Musterimodel.setRowCount(0);&quot; in &quot;TabloGncelle&quot; I tried adding the code it was repeating twice before this code it was repeating once after adding this code</p>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1682711299,"post_id":76132833,"comment_id":134264173,"body_markdown":"`String[] locales = Stream.of(Locale.values()).map(loc -&gt; loc.locale).toArray(String[]::new);`.","body":"<code>String[] locales = Stream.of(Locale.values()).map(loc -&gt; loc.locale).toArray(String[]::new);</code>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1682711404,"post_id":76132833,"comment_id":134264196,"body_markdown":"Note there&#39;s no reason to use `Locale.class.getEnumConstants()` in this case. All `enum` classes implicitly have a static `values()` method that returns an array of all constants.","body":"Note there&#39;s no reason to use <code>Locale.class.getEnumConstants()</code> in this case. All <code>enum</code> classes implicitly have a static <code>values()</code> method that returns an array of all constants."},{"owner":{"account_id":20494982,"reputation":41,"user_id":15040175,"display_name":"kubas1178"},"score":0,"creation_date":1682711704,"post_id":76132833,"comment_id":134264253,"body_markdown":"@Slaw\nThank you it worked! Can&#39;t belive i missed that...","body":"@Slaw Thank you it worked! Can&#39;t belive i missed that..."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":3,"creation_date":1682712086,"post_id":76132833,"comment_id":134264325,"body_markdown":"Side note: Maybe your example `Locale` enum was created only for this question - but I would give it a different name, to avoid potential clashes with core Java&#39;s [`Locale`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html) class.","body":"Side note: Maybe your example <code>Locale</code> enum was created only for this question - but I would give it a different name, to avoid potential clashes with core Java&#39;s <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html\" rel=\"nofollow noreferrer\"><code>Locale</code></a> class."}],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1682711937,"creation_date":1682711937,"answer_id":76132913,"question_id":76132833,"body_markdown":"An enum value in Java is an object. An object is an instance of a type. In this case, the type is the enum, (&quot;Locale&quot;,) so the enum values are instances of that type, in other words, each enum value is of type &quot;Locale&quot;. Java guarantees that there will only be a fixed set of instances, one instance for each value declared in the enum. \r\n\r\nWhen you declare a constructor and fields in an `enum`, these become part of each instance. So, each one of the locales you have declared will have an extra member of type `String` which you call `locale`.\r\n\r\nKnowing that, and also knowing that to get all instances, we can use `Locale.values()`, your answer is:\r\n\r\n    for( var instance : Locale.values() )\r\n        System.out.println( instance.locale );\r\n","title":"Receiving field values from all enum members","body":"<p>An enum value in Java is an object. An object is an instance of a type. In this case, the type is the enum, (&quot;Locale&quot;,) so the enum values are instances of that type, in other words, each enum value is of type &quot;Locale&quot;. Java guarantees that there will only be a fixed set of instances, one instance for each value declared in the enum.</p>\n<p>When you declare a constructor and fields in an <code>enum</code>, these become part of each instance. So, each one of the locales you have declared will have an extra member of type <code>String</code> which you call <code>locale</code>.</p>\n<p>Knowing that, and also knowing that to get all instances, we can use <code>Locale.values()</code>, your answer is:</p>\n<pre><code>for( var instance : Locale.values() )\n    System.out.println( instance.locale );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682731673,"creation_date":1682714655,"answer_id":76133163,"question_id":76132833,"body_markdown":"The [Answer by Mike Nakis][1] is correct. I can clarify a bit more.\r\n\r\nLet&#39;s change the names in the original code, for clarity. \r\n\r\nAs [commented by andrewJames][2], Java bundles a commonly used class named `Locale`. So let&#39;s change your enum name to be more specific, something like `LocaleCode`. \r\n\r\nAnd change the field name to be more specific: `code`. \r\n\r\nThe `code` field holding the `String` object should be private, to prevent inadvertent re-assignment to another object. Add a getter method to access that string.\r\n\r\nFor fun, we can add a convenience method to return a [`java.util.Locale`][3] object matching our stored code string. By the way, the order of language and culture in your string codes seems to be the reverse of conventional/standard order (but I am no expert). \r\n\r\n\r\n```java\r\npackage work.basil.example;\r\n\r\nimport java.util.Locale;\r\n\r\npublic enum LocaleCode\r\n{\r\n    PL( &quot;PL-pl&quot; ),\r\n    DE( &quot;DE-de&quot; ),\r\n    EN( &quot;EN-en&quot; );\r\n\r\n    // Member field\r\n    private final String code;\r\n\r\n    // Constructor\r\n    private LocaleCode ( String code )\r\n    {\r\n        this.code = code;\r\n    }\r\n\r\n    // Getter method for private field.\r\n    public String getCode ( )\r\n    {\r\n        return code;\r\n    }\r\n\r\n    // Convenience method for obtaining a `java.util.Locale` object for this code.\r\n    public Locale getLocale ( )\r\n    {\r\n        \r\n    }\r\n}\r\n```\r\n\r\nYou asked:\r\n\r\n&gt; What i want to achive is to get all field values as array [&quot;PL-pl&quot;,&quot;DE-de&quot;,&quot;EN-en&quot;]\r\n\r\nLoop through each of the enum objects, interrogating for its field value, and collect.\r\n\r\nYou said:\r\n\r\n&gt;For the enum values its easy: `Locale[] yourEnums = Locale.class.getEnumConstants();`\r\n\r\nJust call `MyEnumClass.values()` for an array of all the enum objects in the order of their declaration. This special method is *not* well-documented, hidden as a mention in Javadoc for [`Enum.valueOf`][4]. To quote:\r\n\r\n&gt;All the constants of an `enum` class can be obtained by calling the implicit `public static T[] values()` method of that class.\r\n\r\n\r\n```java\r\nint count = LocaleCode.values().length;\r\nString[] codes = new String[ count ];\r\nLocaleCode[] values = LocaleCode.values();\r\nfor ( int index = 0 ; index &lt; values.length ; index++ )\r\n{\r\n    LocaleCode localeCode = values[ index ];\r\n    codes[ index ] = localeCode.getCode();\r\n}\r\nSystem.out.println( &quot;codes = &quot; + Arrays.toString( codes ) );\r\n```\r\n\r\n&gt;codes = [PL-pl, DE-de, EN-en]\r\n\r\nMore briefly using streams and method reference. \r\n\r\n```java\r\nString[] codes =\r\n        Arrays\r\n                .stream( LocaleCode.values() )\r\n                .map( LocaleCode :: getCode )\r\n                .toList()\r\n                .toArray( new String[ 0 ] );\r\n```\r\n\r\n&gt;codes = [PL-pl, DE-de, EN-en]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76132913/642706\r\n  [2]: https://stackoverflow.com/questions/76132833/receiving-field-values-from-all-enum-members#comment134264325_76132833\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html#ObtainingLocale\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#valueOf(java.lang.Class,java.lang.String)","title":"Receiving field values from all enum members","body":"<p>The <a href=\"https://stackoverflow.com/a/76132913/642706\">Answer by Mike Nakis</a> is correct. I can clarify a bit more.</p>\n<p>Let's change the names in the original code, for clarity.</p>\n<p>As <a href=\"https://stackoverflow.com/questions/76132833/receiving-field-values-from-all-enum-members#comment134264325_76132833\">commented by andrewJames</a>, Java bundles a commonly used class named <code>Locale</code>. So let's change your enum name to be more specific, something like <code>LocaleCode</code>.</p>\n<p>And change the field name to be more specific: <code>code</code>.</p>\n<p>The <code>code</code> field holding the <code>String</code> object should be private, to prevent inadvertent re-assignment to another object. Add a getter method to access that string.</p>\n<p>For fun, we can add a convenience method to return a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html#ObtainingLocale\" rel=\"nofollow noreferrer\"><code>java.util.Locale</code></a> object matching our stored code string. By the way, the order of language and culture in your string codes seems to be the reverse of conventional/standard order (but I am no expert).</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example;\n\nimport java.util.Locale;\n\npublic enum LocaleCode\n{\n    PL( &quot;PL-pl&quot; ),\n    DE( &quot;DE-de&quot; ),\n    EN( &quot;EN-en&quot; );\n\n    // Member field\n    private final String code;\n\n    // Constructor\n    private LocaleCode ( String code )\n    {\n        this.code = code;\n    }\n\n    // Getter method for private field.\n    public String getCode ( )\n    {\n        return code;\n    }\n\n    // Convenience method for obtaining a `java.util.Locale` object for this code.\n    public Locale getLocale ( )\n    {\n        \n    }\n}\n</code></pre>\n<p>You asked:</p>\n<blockquote>\n<p>What i want to achive is to get all field values as array [&quot;PL-pl&quot;,&quot;DE-de&quot;,&quot;EN-en&quot;]</p>\n</blockquote>\n<p>Loop through each of the enum objects, interrogating for its field value, and collect.</p>\n<p>You said:</p>\n<blockquote>\n<p>For the enum values its easy: <code>Locale[] yourEnums = Locale.class.getEnumConstants();</code></p>\n</blockquote>\n<p>Just call <code>MyEnumClass.values()</code> for an array of all the enum objects in the order of their declaration. This special method is <em>not</em> well-documented, hidden as a mention in Javadoc for <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#valueOf(java.lang.Class,java.lang.String)\" rel=\"nofollow noreferrer\"><code>Enum.valueOf</code></a>. To quote:</p>\n<blockquote>\n<p>All the constants of an <code>enum</code> class can be obtained by calling the implicit <code>public static T[] values()</code> method of that class.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>int count = LocaleCode.values().length;\nString[] codes = new String[ count ];\nLocaleCode[] values = LocaleCode.values();\nfor ( int index = 0 ; index &lt; values.length ; index++ )\n{\n    LocaleCode localeCode = values[ index ];\n    codes[ index ] = localeCode.getCode();\n}\nSystem.out.println( &quot;codes = &quot; + Arrays.toString( codes ) );\n</code></pre>\n<blockquote>\n<p>codes = [PL-pl, DE-de, EN-en]</p>\n</blockquote>\n<p>More briefly using streams and method reference.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] codes =\n        Arrays\n                .stream( LocaleCode.values() )\n                .map( LocaleCode :: getCode )\n                .toList()\n                .toArray( new String[ 0 ] );\n</code></pre>\n<blockquote>\n<p>codes = [PL-pl, DE-de, EN-en]</p>\n</blockquote>\n"}],"owner":{"account_id":20494982,"reputation":41,"user_id":15040175,"display_name":"kubas1178"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76132913,"answer_count":2,"score":1,"last_activity_date":1682731673,"creation_date":1682711135,"question_id":76132833,"body_markdown":"I am struggling with java enums. Due to task assumptions enum values must contain hyphens. I&#39;ve found out that enum values cannot have such character in its name so i decided to move the correct names as enum fields.\r\n\r\nLet&#39;s assume that my enum class looks like this.\r\n\r\n```\r\npublic enum Locale{\r\n    PL(&quot;PL-pl&quot;),\r\n    DE(&quot;DE-de&quot;),\r\n    EN(&quot;EN-en&quot;);\r\n\r\n    public final String locale;\r\n\r\n    private Locale(String locale) {\r\n        this.locale= locale;\r\n    }\r\n}\r\n```\r\n\r\nWhat i want to achive is to get all field values as array **[&quot;PL-pl&quot;,&quot;DE-de&quot;,&quot;EN-en&quot;]**\r\n\r\nFor the enum values its easy\r\n```\r\nLocale[] yourEnums = Locale.class.getEnumConstants();\r\n```\r\n, but I think I searched whole internet and couldn&#39;t find solution for my problem.","title":"Receiving field values from all enum members","body":"<p>I am struggling with java enums. Due to task assumptions enum values must contain hyphens. I've found out that enum values cannot have such character in its name so i decided to move the correct names as enum fields.</p>\n<p>Let's assume that my enum class looks like this.</p>\n<pre><code>public enum Locale{\n    PL(&quot;PL-pl&quot;),\n    DE(&quot;DE-de&quot;),\n    EN(&quot;EN-en&quot;);\n\n    public final String locale;\n\n    private Locale(String locale) {\n        this.locale= locale;\n    }\n}\n</code></pre>\n<p>What i want to achive is to get all field values as array <strong>[&quot;PL-pl&quot;,&quot;DE-de&quot;,&quot;EN-en&quot;]</strong></p>\n<p>For the enum values its easy</p>\n<pre><code>Locale[] yourEnums = Locale.class.getEnumConstants();\n</code></pre>\n<p>, but I think I searched whole internet and couldn't find solution for my problem.</p>\n"},{"tags":["java","loops","logic"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":5,"creation_date":1682704777,"post_id":76132111,"comment_id":134263041,"body_markdown":"You are confusing variable with object.","body":"You are confusing variable with object."},{"owner":{"account_id":20780824,"reputation":29180,"user_id":15261315,"display_name":"Chris"},"score":1,"creation_date":1682704880,"post_id":76132111,"comment_id":134263068,"body_markdown":"Perhaps you could add actual vs. expected output to your question.","body":"Perhaps you could add actual vs. expected output to your question."},{"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"score":0,"creation_date":1682706098,"post_id":76132111,"comment_id":134263297,"body_markdown":"@HovercraftFullOfEels how so?","body":"@HovercraftFullOfEels how so?"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1682719320,"creation_date":1682719320,"answer_id":76133527,"question_id":76132111,"body_markdown":"The code fragment\r\n\r\n    ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\r\n        \r\n    for(int i = 0; i&lt;10; i++)\r\n    {\r\n        String name = &quot;name: &quot;;\r\n        names.add(name);\r\n    }\r\n\r\nis equivalent to\r\n\r\n    ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\r\n    // here the `ArrayList` referenced by `names` is empty\r\n    {\r\n        String name = &quot;name: &quot;;\r\n        names.add(name);\r\n    }\r\n    // at this point there is no variable called name\r\n    // the `ArrayList` referenced by `names` contains one reference to the string &quot;name: &quot;\r\n    {\r\n        String name = &quot;name: &quot;;\r\n        names.add(name);\r\n    }\r\n    // at this point there is no variable called name\r\n    // the `ArrayList` referenced by `names` contains two references to the string &quot;name: &quot;\r\n    // some repetitions left out for brevity\r\n\r\n----\r\nI think your misunderstanding is this:\r\n\r\n&gt; I added the variable to an `ArrayList` outside of the scope of the for loop\r\n\r\nYou cannot add variables to an `ArrayList` - you can only add the objects referenced by variables to an `ArrayList`\r\n\r\nThe `ArrayList.add()` doesn&#39;t know how you called your variable - or whether you used a variable at all - maybe you were calling it as `names.add(&quot;name: &quot;);`","title":"Why can I declare variables of the same name within a for loop, but not in the main program?","body":"<p>The code fragment</p>\n<pre><code>ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\n    \nfor(int i = 0; i&lt;10; i++)\n{\n    String name = &quot;name: &quot;;\n    names.add(name);\n}\n</code></pre>\n<p>is equivalent to</p>\n<pre><code>ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\n// here the `ArrayList` referenced by `names` is empty\n{\n    String name = &quot;name: &quot;;\n    names.add(name);\n}\n// at this point there is no variable called name\n// the `ArrayList` referenced by `names` contains one reference to the string &quot;name: &quot;\n{\n    String name = &quot;name: &quot;;\n    names.add(name);\n}\n// at this point there is no variable called name\n// the `ArrayList` referenced by `names` contains two references to the string &quot;name: &quot;\n// some repetitions left out for brevity\n</code></pre>\n<hr />\n<p>I think your misunderstanding is this:</p>\n<blockquote>\n<p>I added the variable to an <code>ArrayList</code> outside of the scope of the for loop</p>\n</blockquote>\n<p>You cannot add variables to an <code>ArrayList</code> - you can only add the objects referenced by variables to an <code>ArrayList</code></p>\n<p>The <code>ArrayList.add()</code> doesn't know how you called your variable - or whether you used a variable at all - maybe you were calling it as <code>names.add(&quot;name: &quot;);</code></p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682731221,"creation_date":1682730795,"answer_id":76134110,"question_id":76132111,"body_markdown":"The [Answer by Thomas Kl&#228;ger][1] is correct. I&#39;ll add a bit to explain the syntax of your lambda code.\r\n\r\n# Two ways to do the same thing: Declare var, loop list\r\n\r\nYour two pieces of code:\r\n\r\n    names.forEach( ( name ) -&gt; { System.out.println( name ); } );\r\n\r\n and:\r\n\r\n    for ( String temp : names ) { System.out.println( temp ); }\r\n\r\n both do the very same thing: Define a local reference variable named `name` of type `String`. \r\n\r\nWe can make them even more similar by changing `temp` variable name to `name`. And your first line has unnecessary parentheses, removed here.\r\n\r\n    names.forEach( name -&gt; { System.out.println( name ); } );\r\n    for ( String name : names ) { System.out.println( name ); }\r\n\r\nBoth lines:\r\n\r\n 1. **Define a local variable named `name`**, of a type to hold a reference to a `String` object. \r\n 2. Loop the object references held in the `List` named `names`. \r\n 3. For each time through that loop, both lines pass the object referenced by the variable named `name` to `System.out.println`. \r\n\r\nDifferent syntax but same result.\r\n\r\n## Both lines contain `String name` declaration\r\n\r\nWe can make this similarity more clear by expanding the syntax of your lambda code. \r\n\r\nThe `name -&gt;` portion is actually an abbreviation of `( String name ) -&gt;`. This makes more explicit the declaration of a variable named `name` to hold a reference to an object of the class `String`. Your [IDE][2] likely offers a feature to switch between the full declaration and the abbreviation.\r\n\r\n    names.forEach( ( String name ) -&gt; { System.out.println( name ); } );\r\n\r\nThis `( String name ) -&gt;` means the same thing as `String name` in the second line `for ( String name : names ) { System.out.println( name ); }`. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76133527/642706\r\n  [2]: https://en.wikipedia.org/wiki/Integrated_development_environment","title":"Why can I declare variables of the same name within a for loop, but not in the main program?","body":"<p>The <a href=\"https://stackoverflow.com/a/76133527/642706\">Answer by Thomas Klger</a> is correct. I'll add a bit to explain the syntax of your lambda code.</p>\n<h1>Two ways to do the same thing: Declare var, loop list</h1>\n<p>Your two pieces of code:</p>\n<pre><code>names.forEach( ( name ) -&gt; { System.out.println( name ); } );\n</code></pre>\n<p> and:</p>\n<pre><code>for ( String temp : names ) { System.out.println( temp ); }\n</code></pre>\n<p> both do the very same thing: Define a local reference variable named <code>name</code> of type <code>String</code>.</p>\n<p>We can make them even more similar by changing <code>temp</code> variable name to <code>name</code>. And your first line has unnecessary parentheses, removed here.</p>\n<pre><code>names.forEach( name -&gt; { System.out.println( name ); } );\nfor ( String name : names ) { System.out.println( name ); }\n</code></pre>\n<p>Both lines:</p>\n<ol>\n<li><strong>Define a local variable named <code>name</code></strong>, of a type to hold a reference to a <code>String</code> object.</li>\n<li>Loop the object references held in the <code>List</code> named <code>names</code>.</li>\n<li>For each time through that loop, both lines pass the object referenced by the variable named <code>name</code> to <code>System.out.println</code>.</li>\n</ol>\n<p>Different syntax but same result.</p>\n<h2>Both lines contain <code>String name</code> declaration</h2>\n<p>We can make this similarity more clear by expanding the syntax of your lambda code.</p>\n<p>The <code>name -&gt;</code> portion is actually an abbreviation of <code>( String name ) -&gt;</code>. This makes more explicit the declaration of a variable named <code>name</code> to hold a reference to an object of the class <code>String</code>. Your <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a> likely offers a feature to switch between the full declaration and the abbreviation.</p>\n<pre><code>names.forEach( ( String name ) -&gt; { System.out.println( name ); } );\n</code></pre>\n<p>This <code>( String name ) -&gt;</code> means the same thing as <code>String name</code> in the second line <code>for ( String name : names ) { System.out.println( name ); }</code>.</p>\n"}],"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1682932067,"accepted_answer_id":76133527,"answer_count":2,"score":-3,"last_activity_date":1682731221,"creation_date":1682704384,"question_id":76132111,"body_markdown":"I am playing around learning Lambda within Java and needed to create a list of variables. I created a for loop which creates a new String variable on each iteration, however each one has the same variable name which is not aloud outside of a for loop. \r\n\r\nI see in the following post, https://stackoverflow.com/questions/53497746/why-is-it-allowed-to-declare-a-variable-in-a-for-loop , they detail that its because of the scope of the created variable within the loop. However, I added the variable to an ArrayList outside of the scope of the for loop and then iterated through it to see that the duplicated name variables still exists with no errors. \r\n\r\nI duplicated the code to have each variable have the same String value as well, to check if it had something to do with the values being different, but it still allowed the variables to be stored into the Array...\r\n\r\nCode is below. \r\n\r\n\r\n\r\n    import java.util.ArrayList;\r\n    \r\n    public class Lambda \r\n    {\r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n    \t\tArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\r\n    \t\t\r\n    \t\tfor(int i = 0; i&lt;10; i++)\r\n    \t\t{\r\n    \t\t\tString name = &quot;name: &quot;;\r\n    \t\t\tnames.add(name);\r\n    \t\t}\r\n    \t\t\r\n    \t\tnames.forEach((name) -&gt; {System.out.println(name);});\r\n    \t\t\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;\\n***********************************\\n&quot;);\r\n    \t\t\r\n    \t\tfor(String temp: names)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(temp);\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"Why can I declare variables of the same name within a for loop, but not in the main program?","body":"<p>I am playing around learning Lambda within Java and needed to create a list of variables. I created a for loop which creates a new String variable on each iteration, however each one has the same variable name which is not aloud outside of a for loop.</p>\n<p>I see in the following post, <a href=\"https://stackoverflow.com/questions/53497746/why-is-it-allowed-to-declare-a-variable-in-a-for-loop\">Why is it allowed to declare a variable in a for loop?</a> , they detail that its because of the scope of the created variable within the loop. However, I added the variable to an ArrayList outside of the scope of the for loop and then iterated through it to see that the duplicated name variables still exists with no errors.</p>\n<p>I duplicated the code to have each variable have the same String value as well, to check if it had something to do with the values being different, but it still allowed the variables to be stored into the Array...</p>\n<p>Code is below.</p>\n<pre><code>import java.util.ArrayList;\n\npublic class Lambda \n{\n    public static void main(String[] args)\n    {\n        ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\n        \n        for(int i = 0; i&lt;10; i++)\n        {\n            String name = &quot;name: &quot;;\n            names.add(name);\n        }\n        \n        names.forEach((name) -&gt; {System.out.println(name);});\n        \n        \n        System.out.println(&quot;\\n***********************************\\n&quot;);\n        \n        for(String temp: names)\n        {\n            System.out.println(temp);\n        }\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","algorithm","sorting","matrix","comparator"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1682728642,"post_id":76134014,"comment_id":134266354,"body_markdown":"Does this answer your question? [Java Integer compareTo() - why use comparison vs. subtraction?](https://stackoverflow.com/questions/2728793/java-integer-compareto-why-use-comparison-vs-subtraction)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2728793/java-integer-compareto-why-use-comparison-vs-subtraction\">Java Integer compareTo() - why use comparison vs. subtraction?</a>"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":2,"creation_date":1682728691,"post_id":76134014,"comment_id":134266362,"body_markdown":"In brief, this implementation is _not_ actually correct for all input values, and should be avoided.","body":"In brief, this implementation is <i>not</i> actually correct for all input values, and should be avoided."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682731058,"creation_date":1682731058,"answer_id":76134118,"question_id":76134014,"body_markdown":"That simply says:\r\n\r\n* If the first numbers are equal return the difference between the second.\r\n* Otherwise, return the diff between the first.\r\n\r\nWhich then boils down your question to:\r\n\r\n&quot;Why does `a-b` form a valid comparator&quot;?\r\n\r\nThe answer is: __It does not, actually__.\r\n\r\nA comparator must return a negative number if &#39;a&#39; comes before &#39;b&#39;, a positive number if &#39;a&#39; comes after &#39;b&#39;, and 0 if &#39;a&#39; and &#39;b&#39; are, in terms of comparison, equal.\r\n\r\n`a-b` actually sort of does that. For example, 3-5 is -2. -2 is negative, which means &#39;3&#39; comes before &#39;5&#39;. Indeed it does.\r\n\r\nIt&#39;s not a good idea because there&#39;s such a thing as overflow. `-2_000_000_000` surely comes before `1_000_000_000`. Nevertheless, `-2_000_000_000 - 1_000_000_000` is nevertheless positive (try it!) because of overflow.\r\n\r\nThe proper way to write that code as above would instead be:\r\n\r\n```\r\nArrays.sort(nx2Matrix, (a, b) -&gt; {\r\n    if (a[0] == b[0]) return Integer.comparing(a[1], b[1]);\r\n    return Integer.comparing(a[0], b[0]);\r\n});\r\n```\r\n\r\nor perhaps even:\r\n\r\n```\r\nArrays.sort(nx2Matrix, Comparator\r\n  .comparingInt(a -&gt; a[0])\r\n  .thenComparingInt(a -&gt; a[1]));\r\n```\r\n\r\nWhich is a lot more readable, and doesn&#39;t suffer from the overflow issue.\r\n\r\nThe above means:\r\n\r\n* For any element, &#39;unpack it&#39; by taking that element and running the function `a[0]` on it; this gives you an `int`, then just compare these ints to know which element is first.\r\n* If that results in 2 elements being considered equal, instead compare the ints you get when running `a[1]` on each element.\r\n","title":"How does this algorithm using Array.sort(T[] a, Comparator&lt;? super T&gt; c) sort n x 2 matrixes?","body":"<p>That simply says:</p>\n<ul>\n<li>If the first numbers are equal return the difference between the second.</li>\n<li>Otherwise, return the diff between the first.</li>\n</ul>\n<p>Which then boils down your question to:</p>\n<p>&quot;Why does <code>a-b</code> form a valid comparator&quot;?</p>\n<p>The answer is: <strong>It does not, actually</strong>.</p>\n<p>A comparator must return a negative number if 'a' comes before 'b', a positive number if 'a' comes after 'b', and 0 if 'a' and 'b' are, in terms of comparison, equal.</p>\n<p><code>a-b</code> actually sort of does that. For example, 3-5 is -2. -2 is negative, which means '3' comes before '5'. Indeed it does.</p>\n<p>It's not a good idea because there's such a thing as overflow. <code>-2_000_000_000</code> surely comes before <code>1_000_000_000</code>. Nevertheless, <code>-2_000_000_000 - 1_000_000_000</code> is nevertheless positive (try it!) because of overflow.</p>\n<p>The proper way to write that code as above would instead be:</p>\n<pre><code>Arrays.sort(nx2Matrix, (a, b) -&gt; {\n    if (a[0] == b[0]) return Integer.comparing(a[1], b[1]);\n    return Integer.comparing(a[0], b[0]);\n});\n</code></pre>\n<p>or perhaps even:</p>\n<pre><code>Arrays.sort(nx2Matrix, Comparator\n  .comparingInt(a -&gt; a[0])\n  .thenComparingInt(a -&gt; a[1]));\n</code></pre>\n<p>Which is a lot more readable, and doesn't suffer from the overflow issue.</p>\n<p>The above means:</p>\n<ul>\n<li>For any element, 'unpack it' by taking that element and running the function <code>a[0]</code> on it; this gives you an <code>int</code>, then just compare these ints to know which element is first.</li>\n<li>If that results in 2 elements being considered equal, instead compare the ints you get when running <code>a[1]</code> on each element.</li>\n</ul>\n"}],"owner":{"account_id":26945933,"reputation":7,"user_id":20515929,"display_name":"Brendan B"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682731058,"creation_date":1682728364,"question_id":76134014,"body_markdown":"```\r\nArrays.sort(nx2Matrix, (a, b) -&gt; {\r\n    if (a[0] == b[0]) return a[1] - b[1];\r\n    else return a[0] - b[0];\r\n});\r\n```\r\n\r\nThis sorts n x 2 matrixes to be in ascending order primarily by the first index, then the second, as it should:\r\n\r\n```none\r\n[[2, 0], [4, 1], [1, 2], [2, 3], [5, 4]]\r\n```\r\n\r\nturns into\r\n\r\n```none\r\n[[1, 2], [2, 0], [2, 3], [4, 1], [5, 4]]\r\n```\r\n\r\nBut how is it doing this exactly? More specifically, what is the Comparator doing? (This is from Approach 1 for https://leetcode.com/problems/the-k-weakest-rows-in-a-matrix/editorial/)\r\n\r\nI tried reading the docs for Comparator, but it didn&#39;t make sense to me. I also tried using print statements to see exactly what&#39;s going on, but I still don&#39;t understand how it sorts the matrix.\r\n","title":"How does this algorithm using Array.sort(T[] a, Comparator&lt;? super T&gt; c) sort n x 2 matrixes?","body":"<pre><code>Arrays.sort(nx2Matrix, (a, b) -&gt; {\n    if (a[0] == b[0]) return a[1] - b[1];\n    else return a[0] - b[0];\n});\n</code></pre>\n<p>This sorts n x 2 matrixes to be in ascending order primarily by the first index, then the second, as it should:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[[2, 0], [4, 1], [1, 2], [2, 3], [5, 4]]\n</code></pre>\n<p>turns into</p>\n<pre class=\"lang-none prettyprint-override\"><code>[[1, 2], [2, 0], [2, 3], [4, 1], [5, 4]]\n</code></pre>\n<p>But how is it doing this exactly? More specifically, what is the Comparator doing? (This is from Approach 1 for <a href=\"https://leetcode.com/problems/the-k-weakest-rows-in-a-matrix/editorial/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/the-k-weakest-rows-in-a-matrix/editorial/</a>)</p>\n<p>I tried reading the docs for Comparator, but it didn't make sense to me. I also tried using print statements to see exactly what's going on, but I still don't understand how it sorts the matrix.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682730429,"creation_date":1682701538,"answer_id":76131781,"question_id":76131505,"body_markdown":"Please note that you have defined 2 static ```WebDriver``` objects:\r\n- ```TestNG_Demo.driver```\r\n- ```InvoiceCreationSanity.driver```\r\n\r\nYou have just initialized ```TestNG_Demo.driver``` but ```InvoiceCreationSanity``` class is using ```InvoiceCreationSanity.driver```, which is null.\r\n\r\nYou can choose to set your ```InvoiceCreationSanity.driver``` with ```TestNG_Demo.driver``` so that ```invoicecreation()``` can use the initialized ```driver```:\r\n```java\r\npublic class InvoiceCreationSanity {\r\n    private static WebDriver driver;\r\n    \r\n    @BeforeTest\r\n    public void SetUp() throws InterruptedException {\r\n        TestNG_Demo Setupobject = new TestNG_Demo();\r\n        driver = Setupobject.SetUp(); // Set InvoiceCreationSanity.driver here\r\n        Setupobject.signin();\r\n            \r\n    }\r\n    \r\n    @Test\r\n    public void invoicecreation()  {\r\n        // As driver is set above, now it is initialized and the function should run properly\r\n        createinvoicepom.createinvoice(driver).click();\r\n    }\r\n    \r\n    public void result() {\r\n        System.out.println(&quot;Test Completed Successfully&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic class TestNG_Demo {\r\n    \r\n    public static WebDriver driver;\r\n\r\n    \r\n    // You have to return the WebDriver for this function\r\n    @BeforeTest\r\n    public WebDriver SetUp() {\r\n        System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n        WebDriverManager.chromedriver().setup();\r\n        driver = new ChromeDriver();\r\n        driver.manage().window().maximize();\r\n        return driver;\r\n    }\r\n        \r\n    \r\n    @Test   \r\n    public void signin() throws InterruptedException {\r\n        driver.get(&quot;https://zolvitdash.vakilsearch.com/login&quot;);\r\n        dashloginpagepom.Phone_number(driver).sendKeys(&quot;8825892445&quot;);\r\n        dashloginpagepom.continue_button(driver).click();\r\n        Thread.sleep(6000);\r\n        dashloginpagepom.otpone(driver).sendKeys(&quot;0&quot;);\r\n        dashloginpagepom.otptwo(driver).sendKeys(&quot;0&quot;);\r\n        dashloginpagepom.otpthree(driver).sendKeys(&quot;0&quot;);\r\n        dashloginpagepom.otpfour(driver).sendKeys(&quot;0&quot;);\r\n        dashloginpagepom.cont(driver).click();\r\n        Thread.sleep(6000);\r\n    }\r\n    \r\n    @AfterTest\r\n    public void result() {\r\n        driver.close();\r\n        System.out.println(&quot;Test Completed Successfully&quot;);\r\n    }\r\n}\r\n```\r\n\r\nSide Note: It is a good practice to follow [Java Naming Conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html) when you name your classes, functions and variables ","title":"Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;driver&quot; is null","body":"<p>Please note that you have defined 2 static <code>WebDriver</code> objects:</p>\n<ul>\n<li><code>TestNG_Demo.driver</code></li>\n<li><code>InvoiceCreationSanity.driver</code></li>\n</ul>\n<p>You have just initialized <code>TestNG_Demo.driver</code> but <code>InvoiceCreationSanity</code> class is using <code>InvoiceCreationSanity.driver</code>, which is null.</p>\n<p>You can choose to set your <code>InvoiceCreationSanity.driver</code> with <code>TestNG_Demo.driver</code> so that <code>invoicecreation()</code> can use the initialized <code>driver</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class InvoiceCreationSanity {\n    private static WebDriver driver;\n    \n    @BeforeTest\n    public void SetUp() throws InterruptedException {\n        TestNG_Demo Setupobject = new TestNG_Demo();\n        driver = Setupobject.SetUp(); // Set InvoiceCreationSanity.driver here\n        Setupobject.signin();\n            \n    }\n    \n    @Test\n    public void invoicecreation()  {\n        // As driver is set above, now it is initialized and the function should run properly\n        createinvoicepom.createinvoice(driver).click();\n    }\n    \n    public void result() {\n        System.out.println(&quot;Test Completed Successfully&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestNG_Demo {\n    \n    public static WebDriver driver;\n\n    \n    // You have to return the WebDriver for this function\n    @BeforeTest\n    public WebDriver SetUp() {\n        System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n        return driver;\n    }\n        \n    \n    @Test   \n    public void signin() throws InterruptedException {\n        driver.get(&quot;https://zolvitdash.vakilsearch.com/login&quot;);\n        dashloginpagepom.Phone_number(driver).sendKeys(&quot;8825892445&quot;);\n        dashloginpagepom.continue_button(driver).click();\n        Thread.sleep(6000);\n        dashloginpagepom.otpone(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otptwo(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otpthree(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otpfour(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.cont(driver).click();\n        Thread.sleep(6000);\n    }\n    \n    @AfterTest\n    public void result() {\n        driver.close();\n        System.out.println(&quot;Test Completed Successfully&quot;);\n    }\n}\n</code></pre>\n<p>Side Note: It is a good practice to follow <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Java Naming Conventions</a> when you name your classes, functions and variables</p>\n"}],"owner":{"account_id":17791044,"reputation":33,"user_id":12920036,"display_name":"Fayaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682730429,"creation_date":1682699093,"question_id":76131505,"body_markdown":"I&#39;m running the below TestNG code \r\n\r\n    package pages;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.testng.annotations.BeforeTest;\r\n    import org.testng.annotations.Test;\r\n    import org.openqa.selenium.By;\r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    import pages.createinvoicepom;\r\n    \r\n    \r\n    public class InvoiceCreationSanity {\r\n    \tprivate static WebDriver driver;\r\n    \t\r\n    \t@BeforeTest\r\n    \tpublic void SetUp() throws InterruptedException {\r\n    \t\tTestNG_Demo Setupobject = new TestNG_Demo();\r\n    \t\tSetupobject.SetUp();\r\n    \t\tSetupobject.signin();\r\n    \t\t\t\r\n    \t\t}\r\n    \t\r\n    \t@Test\r\n    \tpublic void invoicecreation()  {\r\n    \t\r\n    \tcreateinvoicepom.createinvoice(driver).click();\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic void result() {\r\n    \t\tSystem.out.println(&quot;Test Completed Successfully&quot;);\r\n    \t}\r\n    }\r\n\r\nBut getting the error as Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;driver&quot; is null\r\n\r\nIn the @BeforeTest I&#39;m calling the methods from another class and that is \r\n\r\n    package pages;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.support.ui.ExpectedCondition;\r\n    import org.openqa.selenium.support.ui.ExpectedConditions;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n    import org.testng.annotations.AfterTest;\r\n    import org.testng.annotations.BeforeTest;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import pages.dashloginpagepom;\r\n    import pages.createinvoicepom;\r\n    \r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    \r\n    public class TestNG_Demo {\r\n    \t\r\n    \tpublic static WebDriver driver;\r\n    \r\n    \t\r\n    \t@BeforeTest\r\n        public void SetUp() {\r\n        \tSystem.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n    \t\tWebDriverManager.chromedriver().setup();\r\n    \t\tdriver = new ChromeDriver();\r\n    \t\tdriver.manage().window().maximize();\r\n    \t}\r\n    \t\t\r\n    \t\r\n    \t@Test\t\r\n    \tpublic void signin() throws InterruptedException {\r\n    \t\tdriver.get(&quot;https://zolvitdash.vakilsearch.com/login&quot;);\r\n    \t\tdashloginpagepom.Phone_number(driver).sendKeys(&quot;8825892445&quot;);\r\n    \t\tdashloginpagepom.continue_button(driver).click();\r\n    \t\tThread.sleep(6000);\r\n    \t\tdashloginpagepom.otpone(driver).sendKeys(&quot;0&quot;);\r\n    \t\tdashloginpagepom.otptwo(driver).sendKeys(&quot;0&quot;);\r\n    \t\tdashloginpagepom.otpthree(driver).sendKeys(&quot;0&quot;);\r\n    \t\tdashloginpagepom.otpfour(driver).sendKeys(&quot;0&quot;);\r\n    \t\tdashloginpagepom.cont(driver).click();\r\n    \t\tThread.sleep(6000);\r\n    \t\t}\r\n    \t\r\n    \t@AfterTest\r\n    \tpublic void result() {\r\n    \t\tdriver.close();\r\n    \tSystem.out.println(&quot;Test Completed Successfully&quot;);\r\n    \t}\r\n    }\r\n\r\nThen in the @Test I&#39;m calling the objects from another class and that is\r\n\r\n    package pages;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    \r\n    public class createinvoicepom {\r\n    \r\n    \tpublic static WebDriver driver = null;\r\n    \t\r\n    \tpublic static WebElement element = null;\r\n    \t\r\n    \tpublic static WebElement createinvoice(WebDriver driver){\r\n    \t\telement = driver.findElement(By.xpath(&quot;//span[@class=&#39;styles_btnContent__7MVVu&#39;]&quot;));\r\n    \t\treturn element;\r\n         \t}\r\n    \t\r\n    \tpublic static WebElement additemfromdatabase(WebDriver driver) {\r\n    \t\telement = driver.findElement(By.xpath(&quot;//span[contains(text(),&#39;Add items from database&#39;)]&quot;));\r\n    \t\treturn element;\r\n    \t}\r\n    \t\r\n    \tpublic static WebElement addbutton(WebDriver driver) {\r\n    \t\t\r\n    \t\telement = driver.findElement(By.xpath(&quot;(//button[@class=&#39;mantine-ActionIcon-transparent mantine-ActionIcon-root event-track mantine-1dw43f4&#39;])[2]&quot;));\r\n    \t\treturn element;\r\n    \t}\r\n    \t\r\n    }\r\n      \r\nWhat mistake I&#39;m doing here?\r\n","title":"Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;driver&quot; is null","body":"<p>I'm running the below TestNG code</p>\n<pre><code>package pages;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.annotations.BeforeTest;\nimport org.testng.annotations.Test;\nimport org.openqa.selenium.By;\nimport io.github.bonigarcia.wdm.WebDriverManager;\nimport pages.createinvoicepom;\n\n\npublic class InvoiceCreationSanity {\n    private static WebDriver driver;\n    \n    @BeforeTest\n    public void SetUp() throws InterruptedException {\n        TestNG_Demo Setupobject = new TestNG_Demo();\n        Setupobject.SetUp();\n        Setupobject.signin();\n            \n        }\n    \n    @Test\n    public void invoicecreation()  {\n    \n    createinvoicepom.createinvoice(driver).click();\n        \n        \n    }\n    \n    public void result() {\n        System.out.println(&quot;Test Completed Successfully&quot;);\n    }\n}\n</code></pre>\n<p>But getting the error as Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;driver&quot; is null</p>\n<p>In the @BeforeTest I'm calling the methods from another class and that is</p>\n<pre><code>package pages;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.ExpectedCondition;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.testng.annotations.AfterTest;\nimport org.testng.annotations.BeforeTest;\nimport org.testng.annotations.Test;\n\nimport pages.dashloginpagepom;\nimport pages.createinvoicepom;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\n\npublic class TestNG_Demo {\n    \n    public static WebDriver driver;\n\n    \n    @BeforeTest\n    public void SetUp() {\n        System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n    }\n        \n    \n    @Test   \n    public void signin() throws InterruptedException {\n        driver.get(&quot;https://zolvitdash.vakilsearch.com/login&quot;);\n        dashloginpagepom.Phone_number(driver).sendKeys(&quot;8825892445&quot;);\n        dashloginpagepom.continue_button(driver).click();\n        Thread.sleep(6000);\n        dashloginpagepom.otpone(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otptwo(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otpthree(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.otpfour(driver).sendKeys(&quot;0&quot;);\n        dashloginpagepom.cont(driver).click();\n        Thread.sleep(6000);\n        }\n    \n    @AfterTest\n    public void result() {\n        driver.close();\n    System.out.println(&quot;Test Completed Successfully&quot;);\n    }\n}\n</code></pre>\n<p>Then in the @Test I'm calling the objects from another class and that is</p>\n<pre><code>package pages;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\n\npublic class createinvoicepom {\n\n    public static WebDriver driver = null;\n    \n    public static WebElement element = null;\n    \n    public static WebElement createinvoice(WebDriver driver){\n        element = driver.findElement(By.xpath(&quot;//span[@class='styles_btnContent__7MVVu']&quot;));\n        return element;\n        }\n    \n    public static WebElement additemfromdatabase(WebDriver driver) {\n        element = driver.findElement(By.xpath(&quot;//span[contains(text(),'Add items from database')]&quot;));\n        return element;\n    }\n    \n    public static WebElement addbutton(WebDriver driver) {\n        \n        element = driver.findElement(By.xpath(&quot;(//button[@class='mantine-ActionIcon-transparent mantine-ActionIcon-root event-track mantine-1dw43f4'])[2]&quot;));\n        return element;\n    }\n    \n}\n  \n</code></pre>\n<p>What mistake I'm doing here?</p>\n"},{"tags":["java","android-camerax","rgba"],"answers":[{"tags":[],"owner":{"account_id":15381842,"reputation":492,"user_id":11097044,"display_name":"MKD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634811315,"creation_date":1634809450,"answer_id":69659602,"question_id":69211429,"body_markdown":"I think `imageProxy.close();` is too late before analyze returns new ImageProxy. Maybe call `imageProxy.close()` below of `imageProxy.getImage();`.\r\n","title":"CameraX Image Analysis (with OUTPUT_IMAGE_FORMAT_RGBA_8888) : maxImages (4) has already been acquired, call #close before acquiring more","body":"<p>I think <code>imageProxy.close();</code> is too late before analyze returns new ImageProxy. Maybe call <code>imageProxy.close()</code> below of <code>imageProxy.getImage();</code>.</p>\n"},{"tags":[],"owner":{"account_id":17424219,"reputation":1083,"user_id":12629252,"display_name":"easy_breezy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682727209,"creation_date":1634809720,"answer_id":69659670,"question_id":69211429,"body_markdown":"You should close the image right after you got all the needed data from it like this:\r\n\r\n    public void analyze(@NonNull ImageProxy imageProxy) {\r\n        //my code to turn media image into a bitmap\r\n        Image img = imageProxy.getImage();\r\n        Image.Plane[] planes = img.getPlanes();\r\n        ByteBuffer buffer = planes[0].getBuffer();\r\n        int pixelStride = planes[0].getPixelStride();\r\n        int rowStride = planes[0].getRowStride();\r\n        int imgWidth = img.getWidth();\r\n        int imgHeight = img.getHeight();\r\n        //close imageProxy\r\n        imageProxy.close();\r\n        int rowPadding = rowStride - pixelStride * img.getWidth();\r\n        Bitmap bitmap = Bitmap.createBitmap(imgWidth + rowPadding / pixelStride, imgHeight, Bitmap.Config.ARGB_8888);\r\n        bitmap.copyPixelsFromBuffer(buffer);\r\n    }","title":"CameraX Image Analysis (with OUTPUT_IMAGE_FORMAT_RGBA_8888) : maxImages (4) has already been acquired, call #close before acquiring more","body":"<p>You should close the image right after you got all the needed data from it like this:</p>\n<pre><code>public void analyze(@NonNull ImageProxy imageProxy) {\n    //my code to turn media image into a bitmap\n    Image img = imageProxy.getImage();\n    Image.Plane[] planes = img.getPlanes();\n    ByteBuffer buffer = planes[0].getBuffer();\n    int pixelStride = planes[0].getPixelStride();\n    int rowStride = planes[0].getRowStride();\n    int imgWidth = img.getWidth();\n    int imgHeight = img.getHeight();\n    //close imageProxy\n    imageProxy.close();\n    int rowPadding = rowStride - pixelStride * img.getWidth();\n    Bitmap bitmap = Bitmap.createBitmap(imgWidth + rowPadding / pixelStride, imgHeight, Bitmap.Config.ARGB_8888);\n    bitmap.copyPixelsFromBuffer(buffer);\n}\n</code></pre>\n"}],"owner":{"account_id":18544248,"reputation":161,"user_id":13512017,"display_name":"MickaelD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682727209,"creation_date":1631806958,"question_id":69211429,"body_markdown":"I am trying to implement a very basic CameraX Image Analysis use case where I would send the images received by the analyzer to a tflite classifier model. The model only accepting bitmap as inputs I thought I would set OUTPUT_IMAGE_FORMAT_RGBA_8888 when building the ImageAmalysis. Resulting media images are easier to convert to bitmaps than the standard YUV_420_888 ones. Problem is I get a error : &quot;java.lang.IllegalStateException: maxImages (4) has already been acquired, call #close before acquiring more.&quot; Usually it would mean I have forgotten to close the imageProxy but it is not the case so I don&#39;t know what is wrong with my code. See below:\r\n\r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import android.graphics.Bitmap;\r\n\r\n    import android.media.Image;\r\n    import android.os.Bundle;\r\n    import android.util.Size;\r\n\r\n    import androidx.camera.core.Camera;\r\n    import androidx.camera.core.CameraSelector;\r\n    import androidx.camera.core.ExperimentalGetImage;\r\n    import androidx.camera.core.ImageAnalysis;\r\n    import androidx.camera.core.ImageProxy;\r\n    import androidx.camera.core.Preview;\r\n    import androidx.camera.lifecycle.ProcessCameraProvider;\r\n    import androidx.camera.view.PreviewView;\r\n    import androidx.core.content.ContextCompat;\r\n    import androidx.lifecycle.LifecycleOwner;\r\n\r\n    import com.google.common.util.concurrent.ListenableFuture;\r\n\r\n    import java.nio.ByteBuffer;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.Executor;\r\n    import java.util.concurrent.Executors;\r\n\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        private ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture;\r\n    \r\n        private Executor analysisExecutor;\r\n    \r\n        private PreviewView previewView;\r\n    \r\n        @Override\r\n        protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            analysisExecutor = Executors.newSingleThreadExecutor();\r\n    \r\n            setContentView(R.layout.activity_main);\r\n            previewView = findViewById(R.id.viewFinder);\r\n    \r\n            cameraProviderFuture = ProcessCameraProvider.getInstance(this);       \r\n    \r\n            cameraProviderFuture.addListener(() -&gt; {\r\n                try {\r\n                    ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\r\n                    cameraProvider.unbindAll();\r\n                    bindUseCases(cameraProvider);\r\n                } catch (ExecutionException | InterruptedException e) {\r\n                    // No errors need to be handled for this Future.\r\n                    // This should never be reached.\r\n                }\r\n            }, ContextCompat.getMainExecutor(this));\r\n    \r\n        }\r\n    \r\n        void bindUseCases(@NonNull ProcessCameraProvider cameraProvider) {\r\n    \r\n            CameraSelector cameraSelector = new CameraSelector.Builder()\r\n                    .requireLensFacing(CameraSelector.LENS_FACING_BACK)\r\n                    .build();\r\n    \r\n            //Preview\r\n            Preview preview = new Preview.Builder()\r\n                    .build();\r\n            preview.setSurfaceProvider(previewView.getSurfaceProvider());\r\n    \r\n            //ImageAnalysis\r\n            ImageAnalysis imageAnalysis =\r\n                    new ImageAnalysis.Builder()\r\n                            .setTargetResolution(new Size(1280, 720))\r\n                            .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\r\n                            .setOutputImageFormat(ImageAnalysis.OUTPUT_IMAGE_FORMAT_RGBA_8888)\r\n                            .build();\r\n            imageAnalysis.setAnalyzer(analysisExecutor, new ImageAnalysis.Analyzer() {\r\n                @Override\r\n                @ExperimentalGetImage\r\n                public void analyze(@NonNull ImageProxy imageProxy) {\r\n                    //my code to turn media image into a bitmap\r\n                    Image img = imageProxy.getImage();\r\n                    Image.Plane[] planes = img.getPlanes();\r\n                    ByteBuffer buffer = planes[0].getBuffer();\r\n                    int pixelStride = planes[0].getPixelStride();\r\n                    int rowStride = planes[0].getRowStride();\r\n                    int rowPadding = rowStride - pixelStride * img.getWidth();\r\n                    Bitmap bitmap = Bitmap.createBitmap(img.getWidth()+rowPadding/pixelStride, img.getHeight(), Bitmap.Config.ARGB_8888);\r\n                    bitmap.copyPixelsFromBuffer(buffer);\r\n                    //close img and imageProxy\r\n                    img.close();\r\n                    imageProxy.close();\r\n                }\r\n            });\r\n    \r\n            Camera camera = cameraProvider.bindToLifecycle((LifecycleOwner)this, cameraSelector, imageAnalysis, preview);\r\n        }\r\n    \r\n    }\r\n\r\nAnd the complete error message:\r\n\r\n&gt; E/ImageAnalysisAnalyzer: Failed to acquire image.\r\n&gt;     java.lang.IllegalStateException: maxImages (4) has already been acquired, call #close before acquiring more.\r\n&gt;         at android.media.ImageReader.acquireNextImage(ImageReader.java:527)\r\n&gt;         at android.media.ImageReader.acquireLatestImage(ImageReader.java:411)\r\n&gt;         at androidx.camera.core.AndroidImageReaderProxy.acquireLatestImage(AndroidImageReaderProxy.java:56)\r\n&gt;         at androidx.camera.core.SafeCloseImageReaderProxy.acquireLatestImage(SafeCloseImageReaderProxy.java:67)\r\n&gt;         at androidx.camera.core.ImageYuvToRgbConverter.convertYUVToRGB(ImageYuvToRgbConverter.java:83)\r\n&gt;         at androidx.camera.core.ImageAnalysisAbstractAnalyzer.analyzeImage(ImageAnalysisAbstractAnalyzer.java:125)\r\n&gt;         at androidx.camera.core.ImageAnalysisNonBlockingAnalyzer.onValidImageAvailable(ImageAnalysisNonBlockingAnalyzer.java:103)\r\n&gt;         at androidx.camera.core.ImageAnalysisAbstractAnalyzer.onImageAvailable(ImageAnalysisAbstractAnalyzer.java:69)\r\n&gt;         at androidx.camera.core.SafeCloseImageReaderProxy.lambda$setOnImageAvailableListener$1$SafeCloseImageReaderProxy(SafeCloseImageReaderProxy.java:170)\r\n&gt;         at androidx.camera.core.-$$Lambda$SafeCloseImageReaderProxy$vlVuGMKvMVqmwbJFm3dTgGgUzu4.onImageAvailable(Unknown\r\n&gt; Source:4)\r\n&gt;         at androidx.camera.core.AndroidImageReaderProxy.lambda$setOnImageAvailableListener$0$AndroidImageReaderProxy(AndroidImageReaderProxy.java:139)\r\n&gt;         at androidx.camera.core.-$$Lambda$AndroidImageReaderProxy$ydxkGVJ03P0ZMYkq3dfSV-hzi3E.run(Unknown\r\n&gt; Source:4)\r\n&gt;         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n&gt;         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n&gt;         at java.lang.Thread.run(Thread.java:923)","title":"CameraX Image Analysis (with OUTPUT_IMAGE_FORMAT_RGBA_8888) : maxImages (4) has already been acquired, call #close before acquiring more","body":"<p>I am trying to implement a very basic CameraX Image Analysis use case where I would send the images received by the analyzer to a tflite classifier model. The model only accepting bitmap as inputs I thought I would set OUTPUT_IMAGE_FORMAT_RGBA_8888 when building the ImageAmalysis. Resulting media images are easier to convert to bitmaps than the standard YUV_420_888 ones. Problem is I get a error : &quot;java.lang.IllegalStateException: maxImages (4) has already been acquired, call #close before acquiring more.&quot; Usually it would mean I have forgotten to close the imageProxy but it is not the case so I don't know what is wrong with my code. See below:</p>\n<pre><code>import androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.graphics.Bitmap;\n\nimport android.media.Image;\nimport android.os.Bundle;\nimport android.util.Size;\n\nimport androidx.camera.core.Camera;\nimport androidx.camera.core.CameraSelector;\nimport androidx.camera.core.ExperimentalGetImage;\nimport androidx.camera.core.ImageAnalysis;\nimport androidx.camera.core.ImageProxy;\nimport androidx.camera.core.Preview;\nimport androidx.camera.lifecycle.ProcessCameraProvider;\nimport androidx.camera.view.PreviewView;\nimport androidx.core.content.ContextCompat;\nimport androidx.lifecycle.LifecycleOwner;\n\nimport com.google.common.util.concurrent.ListenableFuture;\n\nimport java.nio.ByteBuffer;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.Executor;\nimport java.util.concurrent.Executors;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture;\n\n    private Executor analysisExecutor;\n\n    private PreviewView previewView;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        analysisExecutor = Executors.newSingleThreadExecutor();\n\n        setContentView(R.layout.activity_main);\n        previewView = findViewById(R.id.viewFinder);\n\n        cameraProviderFuture = ProcessCameraProvider.getInstance(this);       \n\n        cameraProviderFuture.addListener(() -&gt; {\n            try {\n                ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\n                cameraProvider.unbindAll();\n                bindUseCases(cameraProvider);\n            } catch (ExecutionException | InterruptedException e) {\n                // No errors need to be handled for this Future.\n                // This should never be reached.\n            }\n        }, ContextCompat.getMainExecutor(this));\n\n    }\n\n    void bindUseCases(@NonNull ProcessCameraProvider cameraProvider) {\n\n        CameraSelector cameraSelector = new CameraSelector.Builder()\n                .requireLensFacing(CameraSelector.LENS_FACING_BACK)\n                .build();\n\n        //Preview\n        Preview preview = new Preview.Builder()\n                .build();\n        preview.setSurfaceProvider(previewView.getSurfaceProvider());\n\n        //ImageAnalysis\n        ImageAnalysis imageAnalysis =\n                new ImageAnalysis.Builder()\n                        .setTargetResolution(new Size(1280, 720))\n                        .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\n                        .setOutputImageFormat(ImageAnalysis.OUTPUT_IMAGE_FORMAT_RGBA_8888)\n                        .build();\n        imageAnalysis.setAnalyzer(analysisExecutor, new ImageAnalysis.Analyzer() {\n            @Override\n            @ExperimentalGetImage\n            public void analyze(@NonNull ImageProxy imageProxy) {\n                //my code to turn media image into a bitmap\n                Image img = imageProxy.getImage();\n                Image.Plane[] planes = img.getPlanes();\n                ByteBuffer buffer = planes[0].getBuffer();\n                int pixelStride = planes[0].getPixelStride();\n                int rowStride = planes[0].getRowStride();\n                int rowPadding = rowStride - pixelStride * img.getWidth();\n                Bitmap bitmap = Bitmap.createBitmap(img.getWidth()+rowPadding/pixelStride, img.getHeight(), Bitmap.Config.ARGB_8888);\n                bitmap.copyPixelsFromBuffer(buffer);\n                //close img and imageProxy\n                img.close();\n                imageProxy.close();\n            }\n        });\n\n        Camera camera = cameraProvider.bindToLifecycle((LifecycleOwner)this, cameraSelector, imageAnalysis, preview);\n    }\n\n}\n</code></pre>\n<p>And the complete error message:</p>\n<blockquote>\n<p>E/ImageAnalysisAnalyzer: Failed to acquire image.\njava.lang.IllegalStateException: maxImages (4) has already been acquired, call #close before acquiring more.\nat android.media.ImageReader.acquireNextImage(ImageReader.java:527)\nat android.media.ImageReader.acquireLatestImage(ImageReader.java:411)\nat androidx.camera.core.AndroidImageReaderProxy.acquireLatestImage(AndroidImageReaderProxy.java:56)\nat androidx.camera.core.SafeCloseImageReaderProxy.acquireLatestImage(SafeCloseImageReaderProxy.java:67)\nat androidx.camera.core.ImageYuvToRgbConverter.convertYUVToRGB(ImageYuvToRgbConverter.java:83)\nat androidx.camera.core.ImageAnalysisAbstractAnalyzer.analyzeImage(ImageAnalysisAbstractAnalyzer.java:125)\nat androidx.camera.core.ImageAnalysisNonBlockingAnalyzer.onValidImageAvailable(ImageAnalysisNonBlockingAnalyzer.java:103)\nat androidx.camera.core.ImageAnalysisAbstractAnalyzer.onImageAvailable(ImageAnalysisAbstractAnalyzer.java:69)\nat androidx.camera.core.SafeCloseImageReaderProxy.lambda$setOnImageAvailableListener$1$SafeCloseImageReaderProxy(SafeCloseImageReaderProxy.java:170)\nat androidx.camera.core.-$$Lambda$SafeCloseImageReaderProxy$vlVuGMKvMVqmwbJFm3dTgGgUzu4.onImageAvailable(Unknown\nSource:4)\nat androidx.camera.core.AndroidImageReaderProxy.lambda$setOnImageAvailableListener$0$AndroidImageReaderProxy(AndroidImageReaderProxy.java:139)\nat androidx.camera.core.-$$Lambda$AndroidImageReaderProxy$ydxkGVJ03P0ZMYkq3dfSV-hzi3E.run(Unknown\nSource:4)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\nat java.lang.Thread.run(Thread.java:923)</p>\n</blockquote>\n"},{"tags":["java","android","xml","android-layout","layout-inflater"],"comments":[{"owner":{"account_id":2622541,"reputation":3681,"user_id":2270271,"display_name":"cyroxis"},"score":0,"creation_date":1410353944,"post_id":25749761,"comment_id":40292738,"body_markdown":"What do you mean by mean by &quot;simply&quot; merges it&#39;s child views? The reason you have two different view group is because the LinerLayout which you are extending is already inflating the xml layout. Your code is causing it to be inflated twice.","body":"What do you mean by mean by &quot;simply&quot; merges it&#39;s child views? The reason you have two different view group is because the LinerLayout which you are extending is already inflating the xml layout. Your code is causing it to be inflated twice."},{"owner":{"account_id":4770903,"reputation":344,"user_id":3855685,"accept_rate":50,"display_name":"Martin Majewski"},"score":0,"creation_date":1410354824,"post_id":25749761,"comment_id":40293375,"body_markdown":"How to explain this? The problem with my (the above shown) code is (from my understanding), that the Java class is a ViewGroup (extending LinearLayout), which gets hooked up into the view hierarchy and it inflates the xml file with another ViewGroup (in this case also a LinearLayout - could be also a different VG) and hooks this up to the Java class ViewGroup. So in this case I have two LL nodes.\nBut: I want to be able to have my Java class VG acting as the parent VG in place of the xml&#39;s parent VG. Every sub-component should be attached to the Java&#39;s VG. Do you understand what I mean?","body":"How to explain this? The problem with my (the above shown) code is (from my understanding), that the Java class is a ViewGroup (extending LinearLayout), which gets hooked up into the view hierarchy and it inflates the xml file with another ViewGroup (in this case also a LinearLayout - could be also a different VG) and hooks this up to the Java class ViewGroup. So in this case I have two LL nodes. But: I want to be able to have my Java class VG acting as the parent VG in place of the xml&#39;s parent VG. Every sub-component should be attached to the Java&#39;s VG. Do you understand what I mean?"},{"owner":{"account_id":2622541,"reputation":3681,"user_id":2270271,"display_name":"cyroxis"},"score":0,"creation_date":1410358130,"post_id":25749761,"comment_id":40295723,"body_markdown":"My suggestion below will do exactly that, I will add more information on how to use it.","body":"My suggestion below will do exactly that, I will add more information on how to use it."}],"answers":[{"tags":[],"owner":{"account_id":2622541,"reputation":3681,"user_id":2270271,"display_name":"cyroxis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1410359247,"creation_date":1410282198,"answer_id":25750238,"question_id":25749761,"body_markdown":"You **should not** be inflating the layout in your extended class, instead you should specify the fully qualified class name in your xml file. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;com.package.MyCustomView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:orientation=&quot;vertical&quot; android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;New Text&quot;\r\n            android:id=&quot;@+id/textView&quot; /&gt;\r\n    \r\n        &lt;ImageView\r\n            android:layout_width=&quot;64dp&quot;\r\n            android:layout_height=&quot;64dp&quot;\r\n            android:id=&quot;@+id/imageView&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot; /&gt;\r\n    \r\n        &lt;Button\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;New Button&quot;\r\n            android:id=&quot;@+id/button&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nHere is an [article][1] with more information\r\n\r\n**EDIT**\r\n\r\nNormal android XML files can be considered shorthand for programmatically creating views. Your XML above instructs android to create view of type LinearLayout with the given params then to adds a child TextView with the given params and so forth. \r\n\r\nThis layout can be used two way.\r\n\r\n 1. Include the layout inside another layout\r\n 2. Inflate the layout (i.e. use the layout inflator) which will return an object of type LinearLayout\r\n\r\nYou can create a class as follows\r\n\r\n    public class MyCustomView extends LinearLayout {\r\n    \r\n      // Note: I am not inflating the layout here\r\n\r\n      public void foo() {\r\n          // Do some foo\r\n      }\r\n\r\n      public void setTitle(String text) {\r\n          findViewById(R.id.textView).setText(text);\r\n      }\r\n      ....\r\n        \r\n    }\r\n\r\nThen using the layout above you can use the following code (say activity/fragment)\r\n    \r\n\r\n\r\n     MyCustomView view = (MyCustomView) LayoutInflater.from(context).inflate(R.layout.my_xml_layout, parent, true);\r\n     view.foo(); // Do some foo\r\n     view.setTitle(&quot;Hello Word!!!&quot;);\r\n\r\n\r\nThis allows you to create your own custom &quot;widgets&quot; that behave much like the built in system widgets (TextView, ListView, etc). It will only have one view group (MyCustomView) and you can add any extra behavior you need. \r\n\r\n  [1]: http://www.vogella.com/tutorials/AndroidCustomViews/article.html","title":"Android: How to avoid doubling ViewGroups with LayoutInflater","body":"<p>You <strong>should not</strong> be inflating the layout in your extended class, instead you should specify the fully qualified class name in your xml file. </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;com.package.MyCustomView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"New Text\"\n        android:id=\"@+id/textView\" /&gt;\n\n    &lt;ImageView\n        android:layout_width=\"64dp\"\n        android:layout_height=\"64dp\"\n        android:id=\"@+id/imageView\"\n        android:layout_gravity=\"center_horizontal\" /&gt;\n\n    &lt;Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"New Button\"\n        android:id=\"@+id/button\"\n        android:layout_gravity=\"center_horizontal\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Here is an <a href=\"http://www.vogella.com/tutorials/AndroidCustomViews/article.html\" rel=\"nofollow\">article</a> with more information</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Normal android XML files can be considered shorthand for programmatically creating views. Your XML above instructs android to create view of type LinearLayout with the given params then to adds a child TextView with the given params and so forth. </p>\n\n<p>This layout can be used two way.</p>\n\n<ol>\n<li>Include the layout inside another layout</li>\n<li>Inflate the layout (i.e. use the layout inflator) which will return an object of type LinearLayout</li>\n</ol>\n\n<p>You can create a class as follows</p>\n\n<pre><code>public class MyCustomView extends LinearLayout {\n\n  // Note: I am not inflating the layout here\n\n  public void foo() {\n      // Do some foo\n  }\n\n  public void setTitle(String text) {\n      findViewById(R.id.textView).setText(text);\n  }\n  ....\n\n}\n</code></pre>\n\n<p>Then using the layout above you can use the following code (say activity/fragment)</p>\n\n<pre><code> MyCustomView view = (MyCustomView) LayoutInflater.from(context).inflate(R.layout.my_xml_layout, parent, true);\n view.foo(); // Do some foo\n view.setTitle(\"Hello Word!!!\");\n</code></pre>\n\n<p>This allows you to create your own custom \"widgets\" that behave much like the built in system widgets (TextView, ListView, etc). It will only have one view group (MyCustomView) and you can add any extra behavior you need. </p>\n"}],"owner":{"account_id":4770903,"reputation":344,"user_id":3855685,"accept_rate":50,"display_name":"Martin Majewski"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1064,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":25750238,"answer_count":1,"score":2,"last_activity_date":1682725992,"creation_date":1410280410,"question_id":25749761,"body_markdown":"**I found an solution**\r\n\r\nA big thank you to cyroxis for the constructive criticism and suggestions that led me into the correct direction. At the beginning I thought it isn&#39;t the accepted answer, but after some thinking I am sure it is.\r\n\r\nNevertheless I want to provide some additionale informations that matches my case more precisely.\r\n\r\nYou can find the solution text at the bottom of this post\r\n\r\n**Original question**\r\n\r\nmy first question here. :-) Let&#39;s start:\r\n\r\nI wonder if there is a simple way (through the API, maybe?!) to avoid a unnecessary deep view hierarchy when using LayoutInflater inside a custom class that extends a ViewGroup e.g. LinearLayout.\r\n\r\nFor example\r\n\r\nThis is an Android xml layout file &quot;my_xml_layout.xml&quot;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    \r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:orientation=&quot;vertical&quot; android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;New Text&quot;\r\n            android:id=&quot;@+id/textView&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:layout_width=&quot;64dp&quot;\r\n            android:layout_height=&quot;64dp&quot;\r\n            android:id=&quot;@+id/imageView&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;New Button&quot;\r\n            android:id=&quot;@+id/button&quot;\r\n            android:layout_gravity=&quot;center_horizontal&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\nAnd now I want to encapsulate the layout into a custom view and control the behavior and interaction of all its components (the TextView, the Button and the ImageView). So I create a class which extends e.g LinearLayout like this one\r\n\r\n    public class MyCustomView extends LinearLayout {\r\n    \r\n        public MyCustomView(Context context) {\r\n            super(context);\r\n            inflateLayout(context);\r\n        }\r\n    \r\n        public MyCustomView(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n            inflateLayout(context);\r\n        }\r\n\r\n        public MyCustomView(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n            inflateLayout(context);\r\n        }\r\n\r\n        private void inflateLayout(Context context){\r\n            LayoutInflater.from(context).inflate(R.layout.my_xml_layout, this, true);\r\n        }\r\n\r\n    ...\r\n\r\n    }\r\n\r\nThis works fine and now I have all subcomponents accessible inside MyCustomView on the one Hand and can simple add MyCustomView as a View to e.g. an Activity or a Fragment layout.\r\n\r\nBUT: Now I have two LinearLayout nodes in my layout hierarchy. One that comes from the layout xml file and a second that comes from the MyCustomView parent ViewGroup class.\r\n\r\nSo how can I, say, delete one of the redundant ViewGroups (but leave the attribute values of the xml file&#39;s ViewGroup intact).\r\n\r\nThe previous way I always achieved this was to type an extensive number of code that inflates the xml layout into a local variable and extracts every subcomponent from it just to attach it to the java ViewGroup again.\r\n\r\nOr am I doing things totally wrong? Is there another way to program a complex view&#39;s behavior but designing it within the xml editor?\r\n\r\nYour thoughts are very appreciated.\r\n\r\nThank you! \r\n\r\nMartin\r\n\r\n**Update #1**\r\n\r\nThe suggested solution from cyroxis is sadly not the solution. Let me explain my observation (sorry for my bad English and please correct me if I make mistakes - this helps me improve my English skills :-) ):\r\n\r\nUsing the full qualifier name makes (from my experience) only sense when you create a fully customized view in Java code with all the onDraw and onMeasure implementation. Then to include your custom view into a layout hierarchy in xml you have to go this way and use the full qualifier name in the layout file. Having also defined additional attributes within a styleable xml file you can simple configure the custom view without changing a single line in Java code.\r\n\r\nNevertheless I&#39;ve tried to use the full qualifier just to tests if I missed something or if my knowledge lags behind the implemented functionality of the Android APIs. But no, I couldn&#39;t find a configuration where the usage of the full qualifier name helps me out. Even worse, Android Studio is very sensitive to qualifier name changes at this stage of development and crashes very often when the preview renderer is enabled and there are syntax errors or some weird dependency loops. ;-)\r\n\r\nTo be clear: Encapsulating the whole layout structure with the full qualifier name works in general (in terms of not crashing the IDE) but does not &quot;simply&quot; merges it&#39;s child views without another call of the LayoutInflater - what cyroxis wants to avoid.\r\n\r\nSpeaking of &quot;merging&quot;: The merge tag is the closest thing I&#39;ve found that behaves the way I want it to. Encapsulating my layout with merge and inflating it within my custom view class does spare one level of layout hierarchy but at the cost of an intuitive xml layout workflow - because the layout editor has no ViewGroup informations anymore to set the merge&#39;s child views position (but it works at runtime).\r\n\r\nTo make my position clear: I want to be able to use Android&#39;s standard views to compose a more complex view and then orchestrate all the sub-components in Java code to create a fancy new view that I can reuse in other xml layout files, Activities and Fragments. Programming the logic of the composed view within an Activity or a Fragment is no a good choice in my opinion, because it makes the code redundant for any further Activities or Fragments. Creating static methods, or completely loose classes that requires an instance to one, some or all layout components of my complex view hits the idea of easily maintainable code and encapsulated modules.\r\n\r\nI&#39;ll provide here another workaround I&#39;ve been using for a longer time now in a couple of hours. It makes me wonder if I&#39;m one of only few people who are really bothered by this issue?!\r\n\r\n**Update #2**\r\n\r\nI did some further investigations and found something interesting - and maybe it has a lot in common with cyroxis&#39; solution:\r\n\r\n 1. I added the full qualifier name to my composed xml view&#39;s topmost ViewGroup, pointing to my Java Class (like cyroxis said)\r\n 2. I added the xml layout to my Fragment&#39;s layout xml file by using the &quot;include&quot; directive. \r\n\r\n    &lt;include layout=&quot;@layout/my_xml_layout&quot; /&gt;\r\n\r\nThe result is, that the renderer (and my device) is showing the composed view correctly. So I assume that it takes the ViewGroup informations (that it is actually a LinearLayout) from my Java class, because this is the only place where this is noted.\r\n\r\nNow: If this is the case, how can I access the different sub-components?\r\n\r\n    this.getChildAt(...) \r\n\r\ndoes not work for me.\r\n\r\nThe second observation:\r\n\r\nIf I add the xml layout not via the include-directive but directly with\r\n\r\n    &lt;net.martinmajewski.challengeme.views.panels.HintActivationPanel/&gt;\r\n\r\nI get a invisible node without any dimensions.\r\nSo the layout attributes are not available at the Java Class at this point.\r\n\r\nMy Java Class does nothing special so far. It just implements the three constructors, and (like mentioned above) tries to access the sub-components.\r\n\r\n**Solution**\r\n\r\nPrerequisite: \r\n\r\n - You create a layout xml file containing all the (standard Android) views you want to compose into a single complex view. This is the design stage of your view.\r\n - You create a corresponding Java class file that extends a ViewGroup of your choice - preferably the root ViewGroup type of your xml file. This is the class holding the view&#39;s logic for behavior and sub-view orchestration.\r\n - You replace the ViewGroup type name in the xml file with the full qualifier name of your Java class. This links the both files together (direction: XML -&gt; Java class. Say: The xml layout knows about and needs the Java class, but that does not hold true the other way round).\r\n \r\nNow you can (re)use your view in different layouts by including it with the &lt;include&gt; directive. By layouts I literally mean layout xml files. I want to be able to design my UI in a WYSIWYG manner for quick prototyping and reviewing. So I want to enable the preview renderer to use a xml file without having to write a single logic line at this point in time. And there comes the problem. When you place your composed view inside an Activity&#39;s / fragment&#39;s layout it gets completely and &quot;automatically&quot; inflated by the setContentView or within the onCreateView Method. So at this point it is already there and it has called one of the three available public constructors of your Java class. I realized this fact thanks to cyroxis. Cyroxis suggested to inflate the view manually inside an Activity, but that would lead to a redundant inflations. I think cyroxis just forgot to take into account that the custom view is already a part of the parent layout.\r\n\r\nSo now that the layout exists and is correctly hooked to a parent **without doubling** any node everything is perfect, right?\r\n\r\nNo yet.\r\n\r\nYour Java class has no references to its sub-components.\r\nYou can do this like cyroxis, but if you have implemented some interaction of the sub components without any outside influence intended, you have to initialize your sub-views at the beginning (saving the references).\r\nTo do so you have to provide a public initialization method that you call after the inflation process. At this point of time your Java object can finally find the ids of the sub-views and call the findViewById method without getting a null pointer back. This is also true for the getChildAt method.\r\n\r\nMaybe this will help some of you, too.\r\n\r\nBye\r\nMartin\r\n\r\n\r\n","title":"Android: How to avoid doubling ViewGroups with LayoutInflater","body":"<p><strong>I found an solution</strong></p>\n\n<p>A big thank you to cyroxis for the constructive criticism and suggestions that led me into the correct direction. At the beginning I thought it isn't the accepted answer, but after some thinking I am sure it is.</p>\n\n<p>Nevertheless I want to provide some additionale informations that matches my case more precisely.</p>\n\n<p>You can find the solution text at the bottom of this post</p>\n\n<p><strong>Original question</strong></p>\n\n<p>my first question here. :-) Let's start:</p>\n\n<p>I wonder if there is a simple way (through the API, maybe?!) to avoid a unnecessary deep view hierarchy when using LayoutInflater inside a custom class that extends a ViewGroup e.g. LinearLayout.</p>\n\n<p>For example</p>\n\n<p>This is an Android xml layout file \"my_xml_layout.xml\"</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"New Text\"\n        android:id=\"@+id/textView\" /&gt;\n\n    &lt;ImageView\n        android:layout_width=\"64dp\"\n        android:layout_height=\"64dp\"\n        android:id=\"@+id/imageView\"\n        android:layout_gravity=\"center_horizontal\" /&gt;\n\n    &lt;Button\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"New Button\"\n        android:id=\"@+id/button\"\n        android:layout_gravity=\"center_horizontal\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>And now I want to encapsulate the layout into a custom view and control the behavior and interaction of all its components (the TextView, the Button and the ImageView). So I create a class which extends e.g LinearLayout like this one</p>\n\n<pre><code>public class MyCustomView extends LinearLayout {\n\n    public MyCustomView(Context context) {\n        super(context);\n        inflateLayout(context);\n    }\n\n    public MyCustomView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        inflateLayout(context);\n    }\n\n    public MyCustomView(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n        inflateLayout(context);\n    }\n\n    private void inflateLayout(Context context){\n        LayoutInflater.from(context).inflate(R.layout.my_xml_layout, this, true);\n    }\n\n...\n\n}\n</code></pre>\n\n<p>This works fine and now I have all subcomponents accessible inside MyCustomView on the one Hand and can simple add MyCustomView as a View to e.g. an Activity or a Fragment layout.</p>\n\n<p>BUT: Now I have two LinearLayout nodes in my layout hierarchy. One that comes from the layout xml file and a second that comes from the MyCustomView parent ViewGroup class.</p>\n\n<p>So how can I, say, delete one of the redundant ViewGroups (but leave the attribute values of the xml file's ViewGroup intact).</p>\n\n<p>The previous way I always achieved this was to type an extensive number of code that inflates the xml layout into a local variable and extracts every subcomponent from it just to attach it to the java ViewGroup again.</p>\n\n<p>Or am I doing things totally wrong? Is there another way to program a complex view's behavior but designing it within the xml editor?</p>\n\n<p>Your thoughts are very appreciated.</p>\n\n<p>Thank you! </p>\n\n<p>Martin</p>\n\n<p><strong>Update #1</strong></p>\n\n<p>The suggested solution from cyroxis is sadly not the solution. Let me explain my observation (sorry for my bad English and please correct me if I make mistakes - this helps me improve my English skills :-) ):</p>\n\n<p>Using the full qualifier name makes (from my experience) only sense when you create a fully customized view in Java code with all the onDraw and onMeasure implementation. Then to include your custom view into a layout hierarchy in xml you have to go this way and use the full qualifier name in the layout file. Having also defined additional attributes within a styleable xml file you can simple configure the custom view without changing a single line in Java code.</p>\n\n<p>Nevertheless I've tried to use the full qualifier just to tests if I missed something or if my knowledge lags behind the implemented functionality of the Android APIs. But no, I couldn't find a configuration where the usage of the full qualifier name helps me out. Even worse, Android Studio is very sensitive to qualifier name changes at this stage of development and crashes very often when the preview renderer is enabled and there are syntax errors or some weird dependency loops. ;-)</p>\n\n<p>To be clear: Encapsulating the whole layout structure with the full qualifier name works in general (in terms of not crashing the IDE) but does not \"simply\" merges it's child views without another call of the LayoutInflater - what cyroxis wants to avoid.</p>\n\n<p>Speaking of \"merging\": The merge tag is the closest thing I've found that behaves the way I want it to. Encapsulating my layout with merge and inflating it within my custom view class does spare one level of layout hierarchy but at the cost of an intuitive xml layout workflow - because the layout editor has no ViewGroup informations anymore to set the merge's child views position (but it works at runtime).</p>\n\n<p>To make my position clear: I want to be able to use Android's standard views to compose a more complex view and then orchestrate all the sub-components in Java code to create a fancy new view that I can reuse in other xml layout files, Activities and Fragments. Programming the logic of the composed view within an Activity or a Fragment is no a good choice in my opinion, because it makes the code redundant for any further Activities or Fragments. Creating static methods, or completely loose classes that requires an instance to one, some or all layout components of my complex view hits the idea of easily maintainable code and encapsulated modules.</p>\n\n<p>I'll provide here another workaround I've been using for a longer time now in a couple of hours. It makes me wonder if I'm one of only few people who are really bothered by this issue?!</p>\n\n<p><strong>Update #2</strong></p>\n\n<p>I did some further investigations and found something interesting - and maybe it has a lot in common with cyroxis' solution:</p>\n\n<ol>\n<li>I added the full qualifier name to my composed xml view's topmost ViewGroup, pointing to my Java Class (like cyroxis said)</li>\n<li><p>I added the xml layout to my Fragment's layout xml file by using the \"include\" directive. </p>\n\n<p></p></li>\n</ol>\n\n<p>The result is, that the renderer (and my device) is showing the composed view correctly. So I assume that it takes the ViewGroup informations (that it is actually a LinearLayout) from my Java class, because this is the only place where this is noted.</p>\n\n<p>Now: If this is the case, how can I access the different sub-components?</p>\n\n<pre><code>this.getChildAt(...) \n</code></pre>\n\n<p>does not work for me.</p>\n\n<p>The second observation:</p>\n\n<p>If I add the xml layout not via the include-directive but directly with</p>\n\n<pre><code>&lt;net.martinmajewski.challengeme.views.panels.HintActivationPanel/&gt;\n</code></pre>\n\n<p>I get a invisible node without any dimensions.\nSo the layout attributes are not available at the Java Class at this point.</p>\n\n<p>My Java Class does nothing special so far. It just implements the three constructors, and (like mentioned above) tries to access the sub-components.</p>\n\n<p><strong>Solution</strong></p>\n\n<p>Prerequisite: </p>\n\n<ul>\n<li>You create a layout xml file containing all the (standard Android) views you want to compose into a single complex view. This is the design stage of your view.</li>\n<li>You create a corresponding Java class file that extends a ViewGroup of your choice - preferably the root ViewGroup type of your xml file. This is the class holding the view's logic for behavior and sub-view orchestration.</li>\n<li>You replace the ViewGroup type name in the xml file with the full qualifier name of your Java class. This links the both files together (direction: XML -> Java class. Say: The xml layout knows about and needs the Java class, but that does not hold true the other way round).</li>\n</ul>\n\n<p>Now you can (re)use your view in different layouts by including it with the  directive. By layouts I literally mean layout xml files. I want to be able to design my UI in a WYSIWYG manner for quick prototyping and reviewing. So I want to enable the preview renderer to use a xml file without having to write a single logic line at this point in time. And there comes the problem. When you place your composed view inside an Activity's / fragment's layout it gets completely and \"automatically\" inflated by the setContentView or within the onCreateView Method. So at this point it is already there and it has called one of the three available public constructors of your Java class. I realized this fact thanks to cyroxis. Cyroxis suggested to inflate the view manually inside an Activity, but that would lead to a redundant inflations. I think cyroxis just forgot to take into account that the custom view is already a part of the parent layout.</p>\n\n<p>So now that the layout exists and is correctly hooked to a parent <strong>without doubling</strong> any node everything is perfect, right?</p>\n\n<p>No yet.</p>\n\n<p>Your Java class has no references to its sub-components.\nYou can do this like cyroxis, but if you have implemented some interaction of the sub components without any outside influence intended, you have to initialize your sub-views at the beginning (saving the references).\nTo do so you have to provide a public initialization method that you call after the inflation process. At this point of time your Java object can finally find the ids of the sub-views and call the findViewById method without getting a null pointer back. This is also true for the getChildAt method.</p>\n\n<p>Maybe this will help some of you, too.</p>\n\n<p>Bye\nMartin</p>\n"},{"tags":["java","twilio","mms"],"answers":[{"tags":[],"owner":{"account_id":2215084,"reputation":6791,"user_id":2919731,"accept_rate":100,"display_name":"Swimburger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682724706,"creation_date":1682724706,"answer_id":76133847,"question_id":76080819,"body_markdown":"The way MMS is sent/received depends on the country you are sending MMS to.\r\n\r\nBased on the country code `+996`, it seems that you&#39;re sending an MMS to Kyrgyzstan. For that Kyrgyzstan, MMS are converted to SMS with embedded URL, [as documented on the Kyrgyzstan SMS guidelines][1].\r\n\r\n\r\n  [1]: https://www.twilio.com/en-us/guidelines/kg/sms","title":"How to send MMS message to phone number using Java and Twilio?","body":"<p>The way MMS is sent/received depends on the country you are sending MMS to.</p>\n<p>Based on the country code <code>+996</code>, it seems that you're sending an MMS to Kyrgyzstan. For that Kyrgyzstan, MMS are converted to SMS with embedded URL, <a href=\"https://www.twilio.com/en-us/guidelines/kg/sms\" rel=\"nofollow noreferrer\">as documented on the Kyrgyzstan SMS guidelines</a>.</p>\n"}],"owner":{"account_id":24626922,"reputation":59,"user_id":18526553,"display_name":"Beksultan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76133847,"answer_count":1,"score":1,"last_activity_date":1682725450,"creation_date":1682182227,"question_id":76080819,"body_markdown":"I wanted to send MMS message (image) to phone number using Java and Twilio. \r\n\r\nHow Can I send MMS message (Images) to phone number?\r\nIs it possible?\r\nPlease let me know if you know better solution or better service &#128591;&#127995;\r\nThank u \r\n\r\n\r\n\r\nI created an account in Twilio and got SID, AUTH_TOKEN, and new phone number.\r\nAdd this dependency below to my project.\r\n`implementation &#39;com.twilio.sdk:twilio:9.2.5&#39;`\r\nand sent simple message to phone number at first using this code below\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n\r\n        Message message = Message.creator(\r\n                        new PhoneNumber(&quot;+996*********&quot;),\r\n                        new PhoneNumber(&quot;+16*********&quot;),\r\n                        &quot;Ahoy world! I love writing code in Java.&quot;)\r\n                .create();\r\n\r\n        System.out.println(message.getSid());\r\n    }\r\n```\r\nit works perfectly\r\n\r\nAfter I tried to send MMS message.\r\nI asked from ChatGPT and it gave me this code below\r\n\r\n```\r\npublic static void main(String[] args) throws URISyntaxException {\r\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n\r\n        Message message = Message.creator(\r\n                        new PhoneNumber(&quot;+996552157541&quot;),\r\n                        new PhoneNumber(&quot;+16207054562&quot;),\r\n                        &quot;Ahoy world! I love writing code in Java.&quot;)\r\n                .setMediaUrl(\r\n                        List.of(new URI(&quot;https://i.pinimg.com/474x/f5/36/01/f53601133f236d1cb167ac19f05a3d60.jpg&quot;))\r\n                )\r\n                .create();\r\n\r\n        System.out.println(message.getSid());\r\n    }\r\n```\r\nit also works but not as I expected\r\nit sends image link instead of image","title":"How to send MMS message to phone number using Java and Twilio?","body":"<p>I wanted to send MMS message (image) to phone number using Java and Twilio.</p>\n<p>How Can I send MMS message (Images) to phone number?\nIs it possible?\nPlease let me know if you know better solution or better service \nThank u</p>\n<p>I created an account in Twilio and got SID, AUTH_TOKEN, and new phone number.\nAdd this dependency below to my project.\n<code>implementation 'com.twilio.sdk:twilio:9.2.5'</code>\nand sent simple message to phone number at first using this code below</p>\n<pre><code>    public static void main(String[] args) {\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n\n        Message message = Message.creator(\n                        new PhoneNumber(&quot;+996*********&quot;),\n                        new PhoneNumber(&quot;+16*********&quot;),\n                        &quot;Ahoy world! I love writing code in Java.&quot;)\n                .create();\n\n        System.out.println(message.getSid());\n    }\n</code></pre>\n<p>it works perfectly</p>\n<p>After I tried to send MMS message.\nI asked from ChatGPT and it gave me this code below</p>\n<pre><code>public static void main(String[] args) throws URISyntaxException {\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n\n        Message message = Message.creator(\n                        new PhoneNumber(&quot;+996552157541&quot;),\n                        new PhoneNumber(&quot;+16207054562&quot;),\n                        &quot;Ahoy world! I love writing code in Java.&quot;)\n                .setMediaUrl(\n                        List.of(new URI(&quot;https://i.pinimg.com/474x/f5/36/01/f53601133f236d1cb167ac19f05a3d60.jpg&quot;))\n                )\n                .create();\n\n        System.out.println(message.getSid());\n    }\n</code></pre>\n<p>it also works but not as I expected\nit sends image link instead of image</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":34541,"reputation":33228,"user_id":97688,"accept_rate":76,"display_name":"clamp"},"score":0,"creation_date":1266083088,"post_id":2258031,"comment_id":2218495,"body_markdown":"when you install the jdk there is an option to also install the sources. after that you will find them in the src.zip just as said below","body":"when you install the jdk there is an option to also install the sources. after that you will find them in the src.zip just as said below"},{"owner":{"account_id":1537474,"reputation":3656,"user_id":1433066,"accept_rate":68,"display_name":"Nick Dong"},"score":0,"creation_date":1377758843,"post_id":2258031,"comment_id":27206199,"body_markdown":"where is the source code of tools.jar","body":"where is the source code of tools.jar"}],"answers":[{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1613678378,"creation_date":1266074854,"answer_id":2258040,"question_id":2258031,"body_markdown":"For old versions of Java with separate JRE and JDK downloads, download the JDK.  The sources for the public classes are in src.zip.","title":"Source code for the Java library classes","body":"<p>For old versions of Java with separate JRE and JDK downloads, download the JDK.  The sources for the public classes are in src.zip.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1266077251,"creation_date":1266076926,"answer_id":2258163,"question_id":2258031,"body_markdown":"Sources are in `src.zip` located in the installation folder:\r\n\r\n- On Windows, the JDK includes `src.zip` [by default][1] if I remember well.\r\n\r\n- On a Linux distro, you may have to install the `sun-java6-source` package.\r\n\r\n- On Mac, you&#39;ll have to download the Developer Documentation. Have a look at [this answer][2].\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/technotes/tools/windows/jdkfiles.html\r\n  [2]: https://stackoverflow.com/questions/440441/location-of-1-5-x-jdk-source-code","title":"Source code for the Java library classes","body":"<p>Sources are in <code>src.zip</code> located in the installation folder:</p>\n\n<ul>\n<li><p>On Windows, the JDK includes <code>src.zip</code> <a href=\"http://java.sun.com/javase/6/docs/technotes/tools/windows/jdkfiles.html\" rel=\"nofollow noreferrer\">by default</a> if I remember well.</p></li>\n<li><p>On a Linux distro, you may have to install the <code>sun-java6-source</code> package.</p></li>\n<li><p>On Mac, you'll have to download the Developer Documentation. Have a look at <a href=\"https://stackoverflow.com/questions/440441/location-of-1-5-x-jdk-source-code\">this answer</a>.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":88014,"reputation":60053,"user_id":1178669,"accept_rate":93,"display_name":"helpermethod"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1442393830,"creation_date":1266077529,"answer_id":2258195,"question_id":2258031,"body_markdown":"If you only need to have a look at the source/implemenation, i would suggest using \r\n\r\n[Docjar][1]\r\n\r\n\r\n  [1]: http://www.docjar.com/\r\n\r\n**Edit**\r\n\r\nGrepCode is even better\r\n\r\n[GrepCode][1]\r\n\r\n[1]: http://grepcode.com/","title":"Source code for the Java library classes","body":"<p>If you only need to have a look at the source/implemenation, i would suggest using </p>\n\n<p><a href=\"http://grepcode.com/\" rel=\"nofollow noreferrer\">Docjar</a></p>\n\n<p><strong>Edit</strong></p>\n\n<p>GrepCode is even better</p>\n\n<p><a href=\"http://grepcode.com/\" rel=\"nofollow noreferrer\">GrepCode</a></p>\n"},{"tags":[],"owner":{"account_id":91637,"reputation":253,"user_id":251505,"display_name":"Tal "},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1266135046,"creation_date":1266087644,"answer_id":2258662,"question_id":2258031,"body_markdown":"As mention above, most of the source files can be found by downloading the SDK.\r\nHowever for some classes you can find the source code (javax.ssl etc&#39;) for I suggest adding the jad eclipse plugin that will decompile any class without using external site such as Docjar.\r\nJad eclipse info:\r\nhttp://jadclipse.sourceforge.net/wiki/index.php/Main_Page\r\n","title":"Source code for the Java library classes","body":"<p>As mention above, most of the source files can be found by downloading the SDK.\nHowever for some classes you can find the source code (javax.ssl etc') for I suggest adding the jad eclipse plugin that will decompile any class without using external site such as Docjar.\nJad eclipse info:\n<a href=\"http://jadclipse.sourceforge.net/wiki/index.php/Main_Page\" rel=\"nofollow noreferrer\">http://jadclipse.sourceforge.net/wiki/index.php/Main_Page</a></p>\n"},{"tags":[],"owner":{"account_id":315381,"reputation":6586,"user_id":631051,"accept_rate":85,"display_name":"Ellen Spertus"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1603212821,"creation_date":1328749035,"answer_id":9204027,"question_id":2258031,"body_markdown":"Here&#39;s the [browsable source code for OpenJDK 7][1].\r\n\r\nUpdate: As of June 2018 grepcode seems to be down. Here you can find [an alternative][2].\r\n\r\nUpdate^2: As of October 2020, the two previous links do not work. View it at [OpenJDK](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/) and vote up the [answer by Nosrep](https://stackoverflow.com/a/62687925/631051), which I got it from.\r\n\r\n\r\n  [1]: http://grepcode.com/snapshot/repository.grepcode.com/java/root/jdk/openjdk/7-b147/\r\n  [2]:\r\nhttps://www.zgrepcode.com/java/oracle/","title":"Source code for the Java library classes","body":"<p>Here's the <a href=\"http://grepcode.com/snapshot/repository.grepcode.com/java/root/jdk/openjdk/7-b147/\" rel=\"nofollow noreferrer\">browsable source code for OpenJDK 7</a>.</p>\n<p>Update: As of June 2018 grepcode seems to be down. Here you can find <a href=\"https://www.zgrepcode.com/java/oracle/\" rel=\"nofollow noreferrer\">an alternative</a>.</p>\n<p>Update^2: As of October 2020, the two previous links do not work. View it at <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/\" rel=\"nofollow noreferrer\">OpenJDK</a> and vote up the <a href=\"https://stackoverflow.com/a/62687925/631051\">answer by Nosrep</a>, which I got it from.</p>\n"},{"tags":[],"owner":{"account_id":1413944,"reputation":59678,"user_id":1339987,"accept_rate":54,"display_name":"djechlin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359907323,"creation_date":1359907323,"answer_id":14674362,"question_id":2258031,"body_markdown":"There is also grepcode.com (not sure how old this site is, perhaps this answer is an update for new solutions now), sample query:\r\n\r\nhttp://grepcode.com/search?query=java.lang.Math.sin&amp;start=0&amp;entity=type&amp;n=","title":"Source code for the Java library classes","body":"<p>There is also grepcode.com (not sure how old this site is, perhaps this answer is an update for new solutions now), sample query:</p>\n\n<p><a href=\"http://grepcode.com/search?query=java.lang.Math.sin&amp;start=0&amp;entity=type&amp;n=\" rel=\"nofollow\">http://grepcode.com/search?query=java.lang.Math.sin&amp;start=0&amp;entity=type&amp;n=</a></p>\n"},{"tags":[],"owner":{"account_id":15279763,"reputation":49,"user_id":11024520,"display_name":"Dylan Smith"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1549476002,"creation_date":1549476002,"answer_id":54559856,"question_id":2258031,"body_markdown":"You can directly browse the code online here for Java : https://zgrepcode.com/java/openjdk/10.0.2/\r\n\r\nIt is a great tool also for browsing most of the open source projects as it gives you internal linking to classes.","title":"Source code for the Java library classes","body":"<p>You can directly browse the code online here for Java : <a href=\"https://zgrepcode.com/java/openjdk/10.0.2/\" rel=\"nofollow noreferrer\">https://zgrepcode.com/java/openjdk/10.0.2/</a></p>\n\n<p>It is a great tool also for browsing most of the open source projects as it gives you internal linking to classes.</p>\n"},{"tags":[],"owner":{"account_id":13165284,"reputation":521,"user_id":9509713,"display_name":"Nosrep"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1682722932,"creation_date":1593656070,"answer_id":62687925,"question_id":2258031,"body_markdown":"As almost all the suggestions seem to be either grepcode or zgrepcode which are both down, I found one from OpenJDK here: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/\r\n\r\nEdit: a more complete version of all OpenJDK projects and JDK 6-15 can be found here: https://hg.openjdk.java.net/\r\n\r\nEdit Edit: Apparently there&#39;s a jdk Github repository now, dunno if it was created after this answer or I just couldn&#39;t find it; either way: https://github.com/openjdk/jdk\r\n\r\nHarder to find classes than in the mercurial repository for me at least, but for example here is the ArrayList file: https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ArrayList.java\r\n\r\nOr, yknow just use search","title":"Source code for the Java library classes","body":"<p>As almost all the suggestions seem to be either grepcode or zgrepcode which are both down, I found one from OpenJDK here: <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/\" rel=\"nofollow noreferrer\">http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/</a></p>\n<p>Edit: a more complete version of all OpenJDK projects and JDK 6-15 can be found here: <a href=\"https://hg.openjdk.java.net/\" rel=\"nofollow noreferrer\">https://hg.openjdk.java.net/</a></p>\n<p>Edit Edit: Apparently there's a jdk Github repository now, dunno if it was created after this answer or I just couldn't find it; either way: <a href=\"https://github.com/openjdk/jdk\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk</a></p>\n<p>Harder to find classes than in the mercurial repository for me at least, but for example here is the ArrayList file: <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ArrayList.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ArrayList.java</a></p>\n<p>Or, yknow just use search</p>\n"}],"owner":{"account_id":87077,"reputation":25964,"user_id":241717,"accept_rate":73,"display_name":"GuruKulki"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34357,"favorite_count":0,"down_vote_count":1,"up_vote_count":36,"accepted_answer_id":2258040,"answer_count":8,"score":35,"last_activity_date":1682722932,"creation_date":1266074728,"question_id":2258031,"body_markdown":"Where can I find the source code for the Java library classes? I mean classes in `rt.jar`. \r\n\r\nPlatform: Windows.","title":"Source code for the Java library classes","body":"<p>Where can I find the source code for the Java library classes? I mean classes in <code>rt.jar</code>. </p>\n\n<p>Platform: Windows.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1682712512,"post_id":76132226,"comment_id":134264409,"body_markdown":"*B: Tried but did not work * - that is the approach I use. If it didn&#39;t work then you didn&#39;t implement it correctly. Post a proper [mre] demonstrating the problem. For the MRE all you need is a frame with a scroll pane and your panels. Create a button to add a new row of data. Once the MRE works and you understand the concept, then you change your real code. If you can&#39;t get the MRE to work, then you have simple code to post.","body":"*B: Tried but did not work * - that is the approach I use. If it didn&#39;t work then you didn&#39;t implement it correctly. Post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. For the MRE all you need is a frame with a scroll pane and your panels. Create a button to add a new row of data. Once the MRE works and you understand the concept, then you change your real code. If you can&#39;t get the MRE to work, then you have simple code to post."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1682712761,"post_id":76132226,"comment_id":134264442,"body_markdown":"Maybe this will help: https://stackoverflow.com/a/75674828/131872","body":"Maybe this will help: <a href=\"https://stackoverflow.com/a/75674828/131872\">stackoverflow.com/a/75674828/131872</a>"}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1682714623,"creation_date":1682706070,"answer_id":76132291,"question_id":76132226,"body_markdown":"Possible solutions:\r\n\r\n* Use a JTable for tabular data and display\r\n\r\nOr \r\n* Place the JPanel rows into a JPanel that uses a GridLayout\r\n* And place that GridLayout-using JPanel into the BorderLayout.PAGE_START (also known as BorderLayout.NORTH) position of a BorderLayout-using JPanel\r\n* Then place *that* JPanel into the JScrollPane. The rows will all be sized their preferred heights.\r\n\r\nOr\r\n* Use a GridBagLayout, but use a GridBagConstraints.weighty of 0 so that it does not expand.\r\n\r\n_________________________\r\nFor example:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nimport java.awt.*;\r\nimport javax.swing.*;\r\n\r\npublic class GridPanelExample extends JPanel {\r\n\tprivate static final int PREF_W = 500;\r\n\tprivate static final int PREF_H = 300;\r\n\tprivate JPanel gridPanel = new JPanel(new GridLayout(0, 1)); // 1 column, variable number of rows\r\n\tprivate JPanel BorderLayoutPanel = new JPanel(new BorderLayout());\r\n\tprivate JScrollPane scrollPane = new JScrollPane(BorderLayoutPanel);\r\n\tprivate int index = 0;\r\n\r\n\tpublic GridPanelExample() {\r\n\t\tBorderLayoutPanel.add(gridPanel, BorderLayout.PAGE_START);\r\n\t\tsetLayout(new BorderLayout());\r\n\r\n\t\tfor (index = 0; index &lt; 3; index++) {\r\n\t\t\tStudentRow row = new StudentRow(index);\r\n\t\t\tgridPanel.add(row);\r\n\t\t}\r\n\r\n\t\tJButton addStudentButton = new JButton(&quot;Add Student&quot;);\r\n\t\taddStudentButton.addActionListener(e -&gt; {\r\n\t\t\tStudentRow row = new StudentRow(index++);\r\n\t\t\tgridPanel.add(row);\r\n\t\t\tgridPanel.revalidate();\r\n\t\t\tgridPanel.repaint();\r\n\t\t});\r\n\t\tJPanel buttonPanel = new JPanel();\r\n\t\tbuttonPanel.add(addStudentButton);\r\n\r\n\t\tscrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\r\n\t\tadd(scrollPane, BorderLayout.CENTER);\r\n\t\tadd(buttonPanel, BorderLayout.PAGE_END);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Dimension getPreferredSize() {\r\n\t\tDimension superSize = super.getPreferredSize();\r\n\t\tint width = Math.max(superSize.width, PREF_W);\r\n\t\treturn new Dimension(width, PREF_H);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSwingUtilities.invokeLater(() -&gt; {\r\n\t\t\tGridPanelExample mainPanel = new GridPanelExample();\r\n\t\t\tJFrame frame = new JFrame(&quot;GridPanelExample&quot;);\r\n\t\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\tframe.getContentPane().add(mainPanel);\r\n\t\t\tframe.pack();\r\n\t\t\tframe.setLocationByPlatform(true);\r\n\t\t\tframe.setVisible(true);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nclass StudentRow extends JPanel {\r\n\r\n\tpublic int index;\r\n\tprivate JLabel nameLabel;\r\n\tprivate JLabel ageLabel;\r\n\tprivate JButton editButton;\r\n\tprivate JButton deleteButton;\r\n\r\n\tpublic StudentRow(int index) {\r\n\t\tthis.index = index;\r\n\t\tsetLayout(new GridBagLayout());\r\n\r\n\t\tString nameText = String.format(&quot;name: %03d&quot;, index);\r\n\t\tnameLabel = new JLabel(nameText);\r\n\t\tageLabel = new JLabel();\r\n\t\tageLabel.setText(Integer.toString(20));\r\n\t\teditButton = new JButton(&quot;Edit&quot;);\r\n\t\tdeleteButton = new JButton(&quot;Delete&quot;);\r\n\t\tdeleteButton.addActionListener(e -&gt; {\r\n\t\t\tContainer parent = getParent();\r\n\t\t\tparent.remove(this);\r\n\t\t\tparent.revalidate();\r\n\t\t\tparent.repaint();\r\n\t\t});\r\n\r\n\t\tGridBagConstraints gbc = new GridBagConstraints();\r\n\t\tgbc.gridx = 0;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n\t\tgbc.weightx = 1;\r\n\t\tgbc.weighty = 0;\r\n\t\tadd(nameLabel, gbc);\r\n\r\n\t\tgbc.gridx = 1;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.fill = GridBagConstraints.WEST;\r\n\t\tadd(ageLabel, gbc);\r\n\r\n\t\tgbc.gridx = 2;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.fill = GridBagConstraints.EAST;\r\n\t\tadd(editButton, gbc);\r\n\r\n\t\tgbc.gridx = 3;\r\n\t\tgbc.gridy = 0;\r\n\t\tgbc.fill = GridBagConstraints.EAST;\r\n\t\tadd(deleteButton, gbc);\r\n\r\n\t\tint gap = 3;\r\n\t\tsetBorder(BorderFactory.createEmptyBorder(gap, gap, gap, gap));\r\n\t}\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gqIje.gif","title":"Stop even space dividing vertically","body":"<p>Possible solutions:</p>\n<ul>\n<li>Use a JTable for tabular data and display</li>\n</ul>\n<p>Or</p>\n<ul>\n<li>Place the JPanel rows into a JPanel that uses a GridLayout</li>\n<li>And place that GridLayout-using JPanel into the BorderLayout.PAGE_START (also known as BorderLayout.NORTH) position of a BorderLayout-using JPanel</li>\n<li>Then place <em>that</em> JPanel into the JScrollPane. The rows will all be sized their preferred heights.</li>\n</ul>\n<p>Or</p>\n<ul>\n<li>Use a GridBagLayout, but use a GridBagConstraints.weighty of 0 so that it does not expand.</li>\n</ul>\n<hr />\n<p>For example:</p>\n<p><a href=\"https://i.stack.imgur.com/gqIje.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gqIje.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\n\npublic class GridPanelExample extends JPanel {\n    private static final int PREF_W = 500;\n    private static final int PREF_H = 300;\n    private JPanel gridPanel = new JPanel(new GridLayout(0, 1)); // 1 column, variable number of rows\n    private JPanel BorderLayoutPanel = new JPanel(new BorderLayout());\n    private JScrollPane scrollPane = new JScrollPane(BorderLayoutPanel);\n    private int index = 0;\n\n    public GridPanelExample() {\n        BorderLayoutPanel.add(gridPanel, BorderLayout.PAGE_START);\n        setLayout(new BorderLayout());\n\n        for (index = 0; index &lt; 3; index++) {\n            StudentRow row = new StudentRow(index);\n            gridPanel.add(row);\n        }\n\n        JButton addStudentButton = new JButton(&quot;Add Student&quot;);\n        addStudentButton.addActionListener(e -&gt; {\n            StudentRow row = new StudentRow(index++);\n            gridPanel.add(row);\n            gridPanel.revalidate();\n            gridPanel.repaint();\n        });\n        JPanel buttonPanel = new JPanel();\n        buttonPanel.add(addStudentButton);\n\n        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n        add(scrollPane, BorderLayout.CENTER);\n        add(buttonPanel, BorderLayout.PAGE_END);\n    }\n\n    @Override\n    public Dimension getPreferredSize() {\n        Dimension superSize = super.getPreferredSize();\n        int width = Math.max(superSize.width, PREF_W);\n        return new Dimension(width, PREF_H);\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            GridPanelExample mainPanel = new GridPanelExample();\n            JFrame frame = new JFrame(&quot;GridPanelExample&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.getContentPane().add(mainPanel);\n            frame.pack();\n            frame.setLocationByPlatform(true);\n            frame.setVisible(true);\n        });\n    }\n}\n\nclass StudentRow extends JPanel {\n\n    public int index;\n    private JLabel nameLabel;\n    private JLabel ageLabel;\n    private JButton editButton;\n    private JButton deleteButton;\n\n    public StudentRow(int index) {\n        this.index = index;\n        setLayout(new GridBagLayout());\n\n        String nameText = String.format(&quot;name: %03d&quot;, index);\n        nameLabel = new JLabel(nameText);\n        ageLabel = new JLabel();\n        ageLabel.setText(Integer.toString(20));\n        editButton = new JButton(&quot;Edit&quot;);\n        deleteButton = new JButton(&quot;Delete&quot;);\n        deleteButton.addActionListener(e -&gt; {\n            Container parent = getParent();\n            parent.remove(this);\n            parent.revalidate();\n            parent.repaint();\n        });\n\n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.HORIZONTAL;\n        gbc.weightx = 1;\n        gbc.weighty = 0;\n        add(nameLabel, gbc);\n\n        gbc.gridx = 1;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.WEST;\n        add(ageLabel, gbc);\n\n        gbc.gridx = 2;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.EAST;\n        add(editButton, gbc);\n\n        gbc.gridx = 3;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.EAST;\n        add(deleteButton, gbc);\n\n        int gap = 3;\n        setBorder(BorderFactory.createEmptyBorder(gap, gap, gap, gap));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20190529,"reputation":100,"user_id":14808851,"display_name":"Nex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76132291,"answer_count":1,"score":0,"last_activity_date":1682722661,"creation_date":1682705538,"question_id":76132226,"body_markdown":"First of all I am new to JAVA, started yesterday...so be gentle haha.\r\n\r\nIn short I am adding a list of JPanels to a JPanel that is set as a viewport of a JScrollPane. \r\n\r\nThe issue is that when I add an item it divides the remaning space in the JPanel evenly between my rows... \r\nHere is how it looks with 2 items added:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd here is how it looks with 3 items added:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAfter reachnig 10 -ish items the list starts to expand and becomes scrollable.\r\nBeen searching the internet for a couple of hours now with no luck... any suggestions are welcome!\r\n\r\n\r\nHere is the source code if it helps:\r\n\r\n```\r\npublic class StudentListView extends JScrollPane {\r\n\r\n    private  JPanel myList;\r\n    private  EventManager events;\r\n    private  List&lt;StudentModel&gt; students;\r\n    private  StudentRow listRow;\r\n\r\n    public StudentListView(List&lt;StudentModel&gt; students, EventManager events) {\r\n        this.students = students;\r\n        this.events = events;\r\n\r\n        myList = new JPanel();\r\n        myList.setLayout(new BoxLayout(myList, BoxLayout.Y_AXIS));\r\n\r\n        for (int i = 0; i &lt; this.students.size(); i++) {     \r\n            listRow = new StudentRow(students.get(i), events, i);\r\n            listRow.setAlignmentY(Component.TOP_ALIGNMENT);\r\n            myList.add(listRow);\r\n        }\r\n\r\n        setViewportView(myList);\r\n    }\r\n\r\n    public void updateView(List&lt;StudentModel&gt; students) {\r\n        myList.removeAll();\r\n\r\n        this.students = students;\r\n        for (int i = 0; i &lt; this.students.size(); i++) { \r\n            listRow = new StudentRow(students.get(i), events, i);\r\n            myList.add(listRow);\r\n        }\r\n\r\n        myList.revalidate();\r\n        setViewportView(myList);\r\n    }\r\n}\r\n```\r\n\r\nAnd the ROWS:\r\n\r\n```\r\npublic class StudentRow extends JPanel {\r\n    \r\n    public int index;\r\n    private JLabel nameLabel;\r\n    private JLabel ageLabel;\r\n    private JButton editButton;\r\n    private JButton deleteButton;\r\n\r\n    public StudentRow(StudentModel student, EventManager events, int index) {\r\n        this.index = index;\r\n\r\n        setPreferredSize(new Dimension(400, 30));\r\n\r\n        nameLabel = new JLabel();\r\n        nameLabel.setText(student.getName());\r\n        ageLabel = new JLabel();\r\n        ageLabel.setText(Integer.toString(student.getAge()));\r\n        editButton = new JButton(&quot;Edit&quot;);\r\n        deleteButton = new JButton(&quot;Delete&quot;);\r\n        \r\n        GridBagConstraints gbc = new GridBagConstraints();\r\n        gbc.gridx = 0;\r\n        gbc.gridy = 0;\r\n        gbc.fill = GridBagConstraints.WEST;\r\n        add(nameLabel, gbc);\r\n        \r\n        gbc.gridx = 1;\r\n        gbc.gridy = 0;\r\n        gbc.fill = GridBagConstraints.WEST;\r\n        add(ageLabel, gbc);\r\n        \r\n        gbc.gridx = 2;\r\n        gbc.gridy = 0;\r\n        gbc.fill = GridBagConstraints.EAST;\r\n        add(editButton, gbc);\r\n        \r\n        gbc.gridx = 3;\r\n        gbc.gridy = 0;\r\n        gbc.fill = GridBagConstraints.EAST;\r\n        add(deleteButton, gbc);\r\n\r\n        // Create component action listeners\r\n        deleteButton.addActionListener(new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n                events.notify(&quot;removeStudent&quot;, student);\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nSOLUTION:\r\n\r\n```\r\npublic class StudentListView extends JScrollPane {\r\n\r\n    private  JPanel myList;\r\n    private  EventManager events;\r\n    private  List&lt;StudentModel&gt; students;\r\n    private  StudentRow listRow;\r\n    private  JPanel BorderLayoutPanel;\r\n\r\n    public StudentListView(List&lt;StudentModel&gt; students, EventManager events) {\r\n        this.students = students;\r\n        this.events = events;\r\n\r\n        myList = new JPanel();\r\n        myList.setLayout(new GridLayout(0,1));\r\n\r\n        BorderLayoutPanel = new JPanel(new BorderLayout());\r\n        BorderLayoutPanel.add(myList, BorderLayout.PAGE_START);\r\n\r\n        for (int i = 0; i &lt; this.students.size(); i++) {  \r\n            listRow = new StudentRow(students.get(i), events, i);\r\n            myList.add(listRow);\r\n        }\r\n\r\n        setViewportView(BorderLayoutPanel);\r\n    }\r\n\r\n    public void updateView(List&lt;StudentModel&gt; students) {\r\n        myList.removeAll();\r\n\r\n        this.students = students;\r\n        for (int i = 0; i &lt; this.students.size(); i++) { \r\n            listRow = new StudentRow(students.get(i), events, i);\r\n            myList.add(listRow);\r\n        }\r\n\r\n        myList.revalidate();\r\n        setViewportView(BorderLayoutPanel);\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/PIpni.png\r\n  [2]: https://i.stack.imgur.com/Usj5H.png","title":"Stop even space dividing vertically","body":"<p>First of all I am new to JAVA, started yesterday...so be gentle haha.</p>\n<p>In short I am adding a list of JPanels to a JPanel that is set as a viewport of a JScrollPane.</p>\n<p>The issue is that when I add an item it divides the remaning space in the JPanel evenly between my rows...\nHere is how it looks with 2 items added:</p>\n<p><a href=\"https://i.stack.imgur.com/PIpni.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PIpni.png\" alt=\"enter image description here\" /></a></p>\n<p>And here is how it looks with 3 items added:</p>\n<p><a href=\"https://i.stack.imgur.com/Usj5H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Usj5H.png\" alt=\"enter image description here\" /></a></p>\n<p>After reachnig 10 -ish items the list starts to expand and becomes scrollable.\nBeen searching the internet for a couple of hours now with no luck... any suggestions are welcome!</p>\n<p>Here is the source code if it helps:</p>\n<pre><code>public class StudentListView extends JScrollPane {\n\n    private  JPanel myList;\n    private  EventManager events;\n    private  List&lt;StudentModel&gt; students;\n    private  StudentRow listRow;\n\n    public StudentListView(List&lt;StudentModel&gt; students, EventManager events) {\n        this.students = students;\n        this.events = events;\n\n        myList = new JPanel();\n        myList.setLayout(new BoxLayout(myList, BoxLayout.Y_AXIS));\n\n        for (int i = 0; i &lt; this.students.size(); i++) {     \n            listRow = new StudentRow(students.get(i), events, i);\n            listRow.setAlignmentY(Component.TOP_ALIGNMENT);\n            myList.add(listRow);\n        }\n\n        setViewportView(myList);\n    }\n\n    public void updateView(List&lt;StudentModel&gt; students) {\n        myList.removeAll();\n\n        this.students = students;\n        for (int i = 0; i &lt; this.students.size(); i++) { \n            listRow = new StudentRow(students.get(i), events, i);\n            myList.add(listRow);\n        }\n\n        myList.revalidate();\n        setViewportView(myList);\n    }\n}\n</code></pre>\n<p>And the ROWS:</p>\n<pre><code>public class StudentRow extends JPanel {\n    \n    public int index;\n    private JLabel nameLabel;\n    private JLabel ageLabel;\n    private JButton editButton;\n    private JButton deleteButton;\n\n    public StudentRow(StudentModel student, EventManager events, int index) {\n        this.index = index;\n\n        setPreferredSize(new Dimension(400, 30));\n\n        nameLabel = new JLabel();\n        nameLabel.setText(student.getName());\n        ageLabel = new JLabel();\n        ageLabel.setText(Integer.toString(student.getAge()));\n        editButton = new JButton(&quot;Edit&quot;);\n        deleteButton = new JButton(&quot;Delete&quot;);\n        \n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.WEST;\n        add(nameLabel, gbc);\n        \n        gbc.gridx = 1;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.WEST;\n        add(ageLabel, gbc);\n        \n        gbc.gridx = 2;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.EAST;\n        add(editButton, gbc);\n        \n        gbc.gridx = 3;\n        gbc.gridy = 0;\n        gbc.fill = GridBagConstraints.EAST;\n        add(deleteButton, gbc);\n\n        // Create component action listeners\n        deleteButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                events.notify(&quot;removeStudent&quot;, student);\n            }\n        });\n    }\n}\n</code></pre>\n<p>SOLUTION:</p>\n<pre><code>public class StudentListView extends JScrollPane {\n\n    private  JPanel myList;\n    private  EventManager events;\n    private  List&lt;StudentModel&gt; students;\n    private  StudentRow listRow;\n    private  JPanel BorderLayoutPanel;\n\n    public StudentListView(List&lt;StudentModel&gt; students, EventManager events) {\n        this.students = students;\n        this.events = events;\n\n        myList = new JPanel();\n        myList.setLayout(new GridLayout(0,1));\n\n        BorderLayoutPanel = new JPanel(new BorderLayout());\n        BorderLayoutPanel.add(myList, BorderLayout.PAGE_START);\n\n        for (int i = 0; i &lt; this.students.size(); i++) {  \n            listRow = new StudentRow(students.get(i), events, i);\n            myList.add(listRow);\n        }\n\n        setViewportView(BorderLayoutPanel);\n    }\n\n    public void updateView(List&lt;StudentModel&gt; students) {\n        myList.removeAll();\n\n        this.students = students;\n        for (int i = 0; i &lt; this.students.size(); i++) { \n            listRow = new StudentRow(students.get(i), events, i);\n            myList.add(listRow);\n        }\n\n        myList.revalidate();\n        setViewportView(BorderLayoutPanel);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","logging","log4j"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682721480,"creation_date":1682721480,"answer_id":76133674,"question_id":76132925,"body_markdown":"Filters can have three results:\r\n * `ACCEPT` - accepts the message,\r\n * `DENY`   - drops the message,\r\n * `NEUTRAL` - continues to the **next** filter.\r\n\r\nIn your configuration:\r\n\r\n```lang-xml\r\n&lt;Filters&gt;\r\n    &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n    &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n&lt;/Filters&gt;\r\n```\r\n\r\nthe first filter accepts all messages at least as specific as `INFO`. The second filter is never used. What you want is:\r\n\r\n```lang-xml\r\n&lt;Filters&gt;\r\n    &lt;ThresholdFilter level=&quot;INFO&quot; onMatch=&quot;NEUTRAL&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n    &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\r\n&lt;/Filters&gt;\r\n```\r\n\r\n**Remark**: since version 2.13.0 there is a `LevelMatchFilter` that you can use instead of the entire `&lt;Filters&gt;` component:\r\n\r\n```lang-xml\r\n&lt;LevelMatchFilter level=&quot;INFO&quot;/&gt;\r\n```\r\n\r\nAlternatively you can use a [`RoutingAppender`](https://logging.apache.org/log4j/2.x/manual/appenders.html#RoutingAppender) to define a single appender without filters, e.g.:\r\n\r\n```lang-xml\r\n&lt;Routing name=&quot;FILE&quot;&gt;\r\n  &lt;Routes pattern=&quot;$${event:Level}&quot;&gt;\r\n    &lt;Route&gt;\r\n      &lt;RollingFile name=&quot;${event:Level}File&quot;\r\n                   fileName=&quot;${LOG_DIRECTORY}/${lower:${event:Level}}.log&quot;\r\n                   filePattern=&quot;${LOG_DIRECTORY}/logs/${lower:${event:Level}}-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n        &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\r\n        &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n        &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\r\n      &lt;/RollingFile&gt;\r\n    &lt;/Route&gt;\r\n  &lt;/Routes&gt;\r\n&lt;/Routing&gt;\r\n```\r\n```","title":"Log4j2 configuration (Filters)","body":"<p>Filters can have three results:</p>\n<ul>\n<li><code>ACCEPT</code> - accepts the message,</li>\n<li><code>DENY</code>   - drops the message,</li>\n<li><code>NEUTRAL</code> - continues to the <strong>next</strong> filter.</li>\n</ul>\n<p>In your configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Filters&gt;\n    &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n    &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\n&lt;/Filters&gt;\n</code></pre>\n<p>the first filter accepts all messages at least as specific as <code>INFO</code>. The second filter is never used. What you want is:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Filters&gt;\n    &lt;ThresholdFilter level=&quot;INFO&quot; onMatch=&quot;NEUTRAL&quot; onMismatch=&quot;DENY&quot;/&gt;\n    &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\n&lt;/Filters&gt;\n</code></pre>\n<p><strong>Remark</strong>: since version 2.13.0 there is a <code>LevelMatchFilter</code> that you can use instead of the entire <code>&lt;Filters&gt;</code> component:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;LevelMatchFilter level=&quot;INFO&quot;/&gt;\n</code></pre>\n<p>Alternatively you can use a <a href=\"https://logging.apache.org/log4j/2.x/manual/appenders.html#RoutingAppender\" rel=\"nofollow noreferrer\"><code>RoutingAppender</code></a> to define a single appender without filters, e.g.:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Routing name=&quot;FILE&quot;&gt;\n  &lt;Routes pattern=&quot;$${event:Level}&quot;&gt;\n    &lt;Route&gt;\n      &lt;RollingFile name=&quot;${event:Level}File&quot;\n                   fileName=&quot;${LOG_DIRECTORY}/${lower:${event:Level}}.log&quot;\n                   filePattern=&quot;${LOG_DIRECTORY}/logs/${lower:${event:Level}}-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n        &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\n        &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n        &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\n      &lt;/RollingFile&gt;\n    &lt;/Route&gt;\n  &lt;/Routes&gt;\n&lt;/Routing&gt;\n</code></pre>\n<pre><code></code></pre>\n"}],"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76133674,"answer_count":1,"score":1,"last_activity_date":1682721480,"creation_date":1682712035,"question_id":76132925,"body_markdown":"I want my *warnings*, *errors*, and *info* to be saved in separate files. All 2 files are created automatically, however in the *info.log*, I see *warnings* as well. How can I fix **log4j2.xml**, so all three files, that is ***warn.log***, **info.log**, and **error.log** contain **ONLY** warnings, info, and errors respectively?&lt;br&gt;&lt;br&gt;\r\n\r\nHere is the **log4j2.xml** implementation:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;WARN&quot;&gt;\r\n    &lt;Properties&gt;\r\n        &lt;Property name=&quot;PID&quot;&gt;%pid&lt;/Property&gt;\r\n        &lt;Property name=&quot;LOG_DIRECTORY&quot;&gt;/media/edoyou/HDD/Kanan/k2s-project/k2sbeauty/logs&lt;/Property&gt;\r\n        &lt;Property name=&quot;LOG_EXCEPTION_CONVERSION_WORD&quot;&gt;%xwEx&lt;/Property&gt;\r\n        &lt;Property name=&quot;LOG_LEVEL_PATTERN&quot;&gt;%5p&lt;/Property&gt;\r\n        &lt;Property name=&quot;LOG_DATEFORMAT_PATTERN&quot;&gt;yyyy-MM-dd HH:mm:ss.SSS&lt;/Property&gt;\r\n        &lt;Property name=&quot;CONSOLE_LOG_PATTERN&quot;&gt;%clr{%d{${LOG_DATEFORMAT_PATTERN}}}{faint} %clr{${LOG_LEVEL_PATTERN}}\r\n            %clr{${sys:PID}}{magenta} %clr{---}{faint} %clr{[%15.15t]}{faint} %clr{%-40.40c{1.}}{cyan} %clr{:}{faint}\r\n            %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}\r\n        &lt;/Property&gt;\r\n        &lt;Property name=&quot;FILE_LOG_PATTERN&quot;&gt;%d{${LOG_DATEFORMAT_PATTERN}} ${LOG_LEVEL_PATTERN} ${sys:PID} --- [%t]\r\n            %-40.40c{1.} : %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}\r\n        &lt;/Property&gt;\r\n    &lt;/Properties&gt;\r\n\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;${sys:CONSOLE_LOG_PATTERN}&quot;/&gt;\r\n        &lt;/Console&gt;\r\n        &lt;RollingFile name=&quot;InfoFile&quot; fileName=&quot;${LOG_DIRECTORY}/info.log&quot;\r\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/info-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\r\n            &lt;Filters&gt;\r\n                &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;/Filters&gt;\r\n        &lt;/RollingFile&gt;\r\n        &lt;RollingFile name=&quot;ErrorFile&quot; fileName=&quot;${LOG_DIRECTORY}/error.log&quot;\r\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/error-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\r\n            &lt;Filters&gt;\r\n                &lt;ThresholdFilter level=&quot;error&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n            &lt;/Filters&gt;\r\n        &lt;/RollingFile&gt;\r\n        &lt;RollingFile name=&quot;WarnFile&quot; fileName=&quot;${LOG_DIRECTORY}/warn.log&quot;\r\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/warn-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\r\n            &lt;Filters&gt;\r\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n            &lt;/Filters&gt;\r\n        &lt;/RollingFile&gt;\r\n\r\n    &lt;/Appenders&gt;\r\n\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;info&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;InfoFile&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;WarnFile&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;ErrorFile&quot;/&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\n\r\n-------------------------------\r\n","title":"Log4j2 configuration (Filters)","body":"<p>I want my <em>warnings</em>, <em>errors</em>, and <em>info</em> to be saved in separate files. All 2 files are created automatically, however in the <em>info.log</em>, I see <em>warnings</em> as well. How can I fix <strong>log4j2.xml</strong>, so all three files, that is <em><strong>warn.log</strong></em>, <strong>info.log</strong>, and <strong>error.log</strong> contain <strong>ONLY</strong> warnings, info, and errors respectively?<br><br></p>\n<p>Here is the <strong>log4j2.xml</strong> implementation:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot;&gt;\n    &lt;Properties&gt;\n        &lt;Property name=&quot;PID&quot;&gt;%pid&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_DIRECTORY&quot;&gt;/media/edoyou/HDD/Kanan/k2s-project/k2sbeauty/logs&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_EXCEPTION_CONVERSION_WORD&quot;&gt;%xwEx&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_LEVEL_PATTERN&quot;&gt;%5p&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_DATEFORMAT_PATTERN&quot;&gt;yyyy-MM-dd HH:mm:ss.SSS&lt;/Property&gt;\n        &lt;Property name=&quot;CONSOLE_LOG_PATTERN&quot;&gt;%clr{%d{${LOG_DATEFORMAT_PATTERN}}}{faint} %clr{${LOG_LEVEL_PATTERN}}\n            %clr{${sys:PID}}{magenta} %clr{---}{faint} %clr{[%15.15t]}{faint} %clr{%-40.40c{1.}}{cyan} %clr{:}{faint}\n            %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}\n        &lt;/Property&gt;\n        &lt;Property name=&quot;FILE_LOG_PATTERN&quot;&gt;%d{${LOG_DATEFORMAT_PATTERN}} ${LOG_LEVEL_PATTERN} ${sys:PID} --- [%t]\n            %-40.40c{1.} : %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}\n        &lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${sys:CONSOLE_LOG_PATTERN}&quot;/&gt;\n        &lt;/Console&gt;\n        &lt;RollingFile name=&quot;InfoFile&quot; fileName=&quot;${LOG_DIRECTORY}/info.log&quot;\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/info-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\n            &lt;Filters&gt;\n                &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\n                &lt;/Filters&gt;\n        &lt;/RollingFile&gt;\n        &lt;RollingFile name=&quot;ErrorFile&quot; fileName=&quot;${LOG_DIRECTORY}/error.log&quot;\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/error-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\n            &lt;Filters&gt;\n                &lt;ThresholdFilter level=&quot;error&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\n            &lt;/Filters&gt;\n        &lt;/RollingFile&gt;\n        &lt;RollingFile name=&quot;WarnFile&quot; fileName=&quot;${LOG_DIRECTORY}/warn.log&quot;\n                     filePattern=&quot;${LOG_DIRECTORY}/logs/warn-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${sys:FILE_LOG_PATTERN}&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;10&quot;/&gt;\n            &lt;Filters&gt;\n                &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n                &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;DENY&quot;/&gt;\n            &lt;/Filters&gt;\n        &lt;/RollingFile&gt;\n\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n            &lt;AppenderRef ref=&quot;InfoFile&quot;/&gt;\n            &lt;AppenderRef ref=&quot;WarnFile&quot;/&gt;\n            &lt;AppenderRef ref=&quot;ErrorFile&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<hr />\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1682722464,"post_id":76133630,"comment_id":134265787,"body_markdown":"IF you are using SQL database, have you tried using a `nativeQuery`?","body":"IF you are using SQL database, have you tried using a <code>nativeQuery</code>?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1682723138,"post_id":76133630,"comment_id":134265852,"body_markdown":"you already have the data of your `personaBefore` in your `update` method, so why don&#39;t you pass it as second parameter to your `checkChanges` method? You even could make a copy of it. Or you detach the instance from the database, so it doesn&#39;t get updates from there. (Fetch it, detach it, keep it for further reference)","body":"you already have the data of your <code>personaBefore</code> in your <code>update</code> method, so why don&#39;t you pass it as second parameter to your <code>checkChanges</code> method? You even could make a copy of it. Or you detach the instance from the database, so it doesn&#39;t get updates from there. (Fetch it, detach it, keep it for further reference)"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1682723238,"post_id":76133630,"comment_id":134265863,"body_markdown":"You have to think of the in-memory representation of DB attached objects as a cache of the DB. Never try to work around this as long as the object is attached to the DB! It will bring you more trouble than it will help.","body":"You have to think of the in-memory representation of DB attached objects as a cache of the DB. Never try to work around this as long as the object is attached to the DB! It will bring you more trouble than it will help."},{"owner":{"account_id":18718661,"reputation":164,"user_id":13647086,"display_name":"pauzca"},"score":0,"creation_date":1682723352,"post_id":76133630,"comment_id":134265882,"body_markdown":"@JettoMart&#237;nez yes, It doesn&#39;t work, it returns the value with the copied attributes of changedPersona","body":"@JettoMart&#237;nez yes, It doesn&#39;t work, it returns the value with the copied attributes of changedPersona"},{"owner":{"account_id":18718661,"reputation":164,"user_id":13647086,"display_name":"pauzca"},"score":0,"creation_date":1682723477,"post_id":76133630,"comment_id":134265893,"body_markdown":"@cyberbrain I know, I found a way to work around it like that. But since I need to call the checkChanges function in other functions as well, I would like a cleaner more straightforward way to do it.","body":"@cyberbrain I know, I found a way to work around it like that. But since I need to call the checkChanges function in other functions as well, I would like a cleaner more straightforward way to do it."},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1682724113,"post_id":76133630,"comment_id":134265971,"body_markdown":"If both `persona` will have the same attributes after the `copyAttributesOfObjectAToObjectB` method is called, and that call is complicating your requirement, why can&#39;t you check before it? I mean, as the method signature implies, `changedPersona` attributes are copied to `personaBefore`, right? If so, then check before that happens. Your method is supposed to only **check**, so it can return a boolean and after the copying, do whatever your `if` statement is supposed to if needed.","body":"If both <code>persona</code> will have the same attributes after the <code>copyAttributesOfObjectAToObjectB</code> method is called, and that call is complicating your requirement, why can&#39;t you check before it? I mean, as the method signature implies, <code>changedPersona</code> attributes are copied to <code>personaBefore</code>, right? If so, then check before that happens. Your method is supposed to only <b>check</b>, so it can return a boolean and after the copying, do whatever your <code>if</code> statement is supposed to if needed."},{"owner":{"account_id":18718661,"reputation":164,"user_id":13647086,"display_name":"pauzca"},"score":0,"creation_date":1682724474,"post_id":76133630,"comment_id":134266025,"body_markdown":"@JettoMart&#237;nez I know there are other solutions, what I am asking is if there is a good, recommended way of discarding the personaBefore stored in spring-boot memory, so that I can get the actual value stored in the database.","body":"@JettoMart&#237;nez I know there are other solutions, what I am asking is if there is a good, recommended way of discarding the personaBefore stored in spring-boot memory, so that I can get the actual value stored in the database."},{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1682744229,"post_id":76133630,"comment_id":134267336,"body_markdown":"Although you are not indicating persistence framework, I would suggest to check if your assumption on &quot;equality&quot; method is correct. Check implementation of &quot;equals&quot; method on  Persona  class.","body":"Although you are not indicating persistence framework, I would suggest to check if your assumption on &quot;equality&quot; method is correct. Check implementation of &quot;equals&quot; method on  Persona  class."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1682779020,"post_id":76133630,"comment_id":134270558,"body_markdown":"Does the method `copyAttributesOfObjectAToObjectB` also modify its first parameter, `changedPersona`?","body":"Does the method <code>copyAttributesOfObjectAToObjectB</code> also modify its first parameter, <code>changedPersona</code>?"}],"owner":{"account_id":18718661,"reputation":164,"user_id":13647086,"display_name":"pauzca"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682720825,"creation_date":1682720825,"question_id":76133630,"body_markdown":"I have a problem with spring boot, let&#39;s say I have a method &quot;update&quot; to update the record of a Person. I am making fixes over somebody else&#39;s code so this is just the way things are. I am simplifying things here but the function has way more validations and things I don&#39;t want to change. The thing is, that between all those things this method does, it copies the values of the changedPersona to the object of persona stored in the database at the time.\r\n\r\nWhat I need to do is check if some specific fields from changedPersona are different to the ones stored for that person in the database. That I try to do in the &quot;checkChanges&quot; function, the problem is that even though I try to get the value of personaBefore fresh out of the database, Spring boot returns the object with the attributes of changedPersona (because of the copying in the &quot;update&quot; function I did before). So the comparison doesn&#39;t work.\r\n\r\nNotice that the updated values are not being officially stored in the database until AFTER I call the checkChanges function.\r\n\r\n```java\r\n@Override\r\npublic void update(Persona changedPersona){\r\n    Persona personaBefore = this.personaRepository.findById(changedPersona.getId());\r\n    // because of the way this method was written personaBefore will eventualy have the same values as changedPersona\r\n    copyAttributesOfObjectAToObjectB(changedPersona, personaBefore);\r\n    .\r\n    .\r\n    .\r\n    //this is what i need to do \r\n    checkChanges(changedPersona);\r\n\r\n    this.personaRepository.save(changedPersona);\r\n\r\n\r\n}\r\n\r\nprivate void checkChanges(Persona changedPersona){\r\n    Persona personaBefore = this.personaRepository.findById(changedPersona.getId());\r\n    if(changedPersona.equals(personaBefore){\r\n    // do something\r\n    }\r\n}\r\n```\r\n\r\nI need a way to get the personaBefore object CURRENT value in the database, not as it is stored in spring boot memory. Something like\r\n```java\r\n var personaBefore = this.personaRepository.findRealTimeValueById(changedPersona.idPersona);\r\n```\r\nHelp please","title":"SpringBoot: get object current value stored in database","body":"<p>I have a problem with spring boot, let's say I have a method &quot;update&quot; to update the record of a Person. I am making fixes over somebody else's code so this is just the way things are. I am simplifying things here but the function has way more validations and things I don't want to change. The thing is, that between all those things this method does, it copies the values of the changedPersona to the object of persona stored in the database at the time.</p>\n<p>What I need to do is check if some specific fields from changedPersona are different to the ones stored for that person in the database. That I try to do in the &quot;checkChanges&quot; function, the problem is that even though I try to get the value of personaBefore fresh out of the database, Spring boot returns the object with the attributes of changedPersona (because of the copying in the &quot;update&quot; function I did before). So the comparison doesn't work.</p>\n<p>Notice that the updated values are not being officially stored in the database until AFTER I call the checkChanges function.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void update(Persona changedPersona){\n    Persona personaBefore = this.personaRepository.findById(changedPersona.getId());\n    // because of the way this method was written personaBefore will eventualy have the same values as changedPersona\n    copyAttributesOfObjectAToObjectB(changedPersona, personaBefore);\n    .\n    .\n    .\n    //this is what i need to do \n    checkChanges(changedPersona);\n\n    this.personaRepository.save(changedPersona);\n\n\n}\n\nprivate void checkChanges(Persona changedPersona){\n    Persona personaBefore = this.personaRepository.findById(changedPersona.getId());\n    if(changedPersona.equals(personaBefore){\n    // do something\n    }\n}\n</code></pre>\n<p>I need a way to get the personaBefore object CURRENT value in the database, not as it is stored in spring boot memory. Something like</p>\n<pre class=\"lang-java prettyprint-override\"><code> var personaBefore = this.personaRepository.findRealTimeValueById(changedPersona.idPersona);\n</code></pre>\n<p>Help please</p>\n"},{"tags":["java","selenium","annotations","testng","invocation"],"comments":[{"owner":{"account_id":13663575,"reputation":1059,"user_id":9857994,"display_name":"AutomatedOwl"},"score":0,"creation_date":1530680327,"post_id":51160440,"comment_id":89315175,"body_markdown":"Please supply output and given error.","body":"Please supply output and given error."}],"answers":[{"tags":[],"owner":{"account_id":346350,"reputation":14221,"user_id":679824,"accept_rate":40,"display_name":"Krishnan Mahadevan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1530764686,"creation_date":1530764686,"answer_id":51183370,"question_id":51160440,"body_markdown":"You can make use an `IAnnotationTransformer` implementation to get this done.\r\n\r\nHere&#39;s a sample that shows how to pass in the method name and the invocation count via JVM arguments and how the annotation transformer implementation changes the invocation count in runtime.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.rationaleemotions.stackoverflow.qn51160440;\r\n    \r\n    import org.testng.ITestResult;\r\n    import org.testng.Reporter;\r\n    import org.testng.annotations.Test;\r\n    \r\n    public class TestClassSample {\r\n      @Test\r\n      public void fooTest() {\r\n        ITestResult r = Reporter.getCurrentTestResult();\r\n        String methodname = r.getMethod().getMethodName();\r\n        System.err.println(\r\n            &quot;Running &quot; + methodname + &quot;() on Thread [&quot; + Thread.currentThread().getId() + &quot;]&quot;);\r\n      }\r\n    }\r\n\r\nHere&#39;s how the annotation transformer looks like\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.rationaleemotions.stackoverflow.qn51160440;\r\n    \r\n    import java.lang.reflect.Constructor;\r\n    import java.lang.reflect.Method;\r\n    import org.testng.IAnnotationTransformer;\r\n    import org.testng.annotations.ITestAnnotation;\r\n    \r\n    public class AnnotationTransformerImpl implements IAnnotationTransformer {\r\n    \r\n      @Override\r\n      public void transform(\r\n          ITestAnnotation annotation, Class testClass, Constructor testConstructor, Method testMethod) {\r\n        //Pass the value via JVM argument -Dkvp=someMethod=400\r\n        //Here &quot;someMethod&quot; is the name of the method and 400 is the invocation count value\r\n        String kvp = System.getProperty(&quot;kvp&quot;, &quot;fooTest=200&quot;);\r\n        String keyValue[] = kvp.split(&quot;=&quot;);\r\n        if (keyValue.length != 2) {\r\n          return;\r\n        }\r\n        if (!testMethod.getName().equalsIgnoreCase(keyValue[0])) {\r\n          return;\r\n        }\r\n        annotation.setInvocationCount(Integer.parseInt(keyValue[1]));\r\n        annotation.setThreadPoolSize(25);\r\n      }\r\n    }\r\n\r\nHere&#39;s how the suite file looks like\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    &lt;suite name=&quot;45160355_Suite&quot; parallel=&quot;methods&quot; verbose=&quot;2&quot; &gt;\r\n        &lt;listeners&gt;\r\n            &lt;listener\r\n              class-name=&quot;com.rationaleemotions.stackoverflow.qn51160440.AnnotationTransformerImpl&quot;/&gt;\r\n        &lt;/listeners&gt;\r\n        &lt;test name=&quot;45160355_test&quot; verbose=&quot;2&quot;&gt;\r\n            &lt;classes&gt;\r\n                &lt;class name=&quot;com.rationaleemotions.stackoverflow.qn51160440.TestClassSample&quot;/&gt;\r\n            &lt;/classes&gt;\r\n        &lt;/test&gt;\r\n    &lt;/suite&gt;\r\n\r\n","title":"How to set invocation count during execution for the method using TestNG &amp; Java","body":"<p>You can make use an <code>IAnnotationTransformer</code> implementation to get this done.</p>\n\n<p>Here's a sample that shows how to pass in the method name and the invocation count via JVM arguments and how the annotation transformer implementation changes the invocation count in runtime.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.rationaleemotions.stackoverflow.qn51160440;\n\nimport org.testng.ITestResult;\nimport org.testng.Reporter;\nimport org.testng.annotations.Test;\n\npublic class TestClassSample {\n  @Test\n  public void fooTest() {\n    ITestResult r = Reporter.getCurrentTestResult();\n    String methodname = r.getMethod().getMethodName();\n    System.err.println(\n        \"Running \" + methodname + \"() on Thread [\" + Thread.currentThread().getId() + \"]\");\n  }\n}\n</code></pre>\n\n<p>Here's how the annotation transformer looks like</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.rationaleemotions.stackoverflow.qn51160440;\n\nimport java.lang.reflect.Constructor;\nimport java.lang.reflect.Method;\nimport org.testng.IAnnotationTransformer;\nimport org.testng.annotations.ITestAnnotation;\n\npublic class AnnotationTransformerImpl implements IAnnotationTransformer {\n\n  @Override\n  public void transform(\n      ITestAnnotation annotation, Class testClass, Constructor testConstructor, Method testMethod) {\n    //Pass the value via JVM argument -Dkvp=someMethod=400\n    //Here \"someMethod\" is the name of the method and 400 is the invocation count value\n    String kvp = System.getProperty(\"kvp\", \"fooTest=200\");\n    String keyValue[] = kvp.split(\"=\");\n    if (keyValue.length != 2) {\n      return;\n    }\n    if (!testMethod.getName().equalsIgnoreCase(keyValue[0])) {\n      return;\n    }\n    annotation.setInvocationCount(Integer.parseInt(keyValue[1]));\n    annotation.setThreadPoolSize(25);\n  }\n}\n</code></pre>\n\n<p>Here's how the suite file looks like</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE suite SYSTEM \"http://testng.org/testng-1.0.dtd\"&gt;\n&lt;suite name=\"45160355_Suite\" parallel=\"methods\" verbose=\"2\" &gt;\n    &lt;listeners&gt;\n        &lt;listener\n          class-name=\"com.rationaleemotions.stackoverflow.qn51160440.AnnotationTransformerImpl\"/&gt;\n    &lt;/listeners&gt;\n    &lt;test name=\"45160355_test\" verbose=\"2\"&gt;\n        &lt;classes&gt;\n            &lt;class name=\"com.rationaleemotions.stackoverflow.qn51160440.TestClassSample\"/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n"}],"owner":{"account_id":2576992,"reputation":5,"user_id":2234432,"display_name":"Bhavik Gandhi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11929,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":51183370,"answer_count":1,"score":0,"last_activity_date":1682720688,"creation_date":1530640404,"question_id":51160440,"body_markdown":"I am having one test method, which I am manually executing for 200 times. \r\n\r\n    @Test(priority=2, invocationCount = 200)\r\n    public void inviteTalents() throws InterruptedException\r\n    {\r\n\t  logger.log(Status.INFO, &quot;Count &quot; + logins[count]);\r\n    }\r\n\r\nHow can I set the invocation count variable? I have tried something like this, but doesn&#39;t work. Any help?\r\n\r\n\t  @BeforeMethod\r\n\t  public void setUp(Method method, ITestContext context) {\r\n\t    \r\n\t    if(method.getName().equals(&quot;test3&quot;))\r\n\t    {\r\n\t    \tITestNGMethod currentTestNGMethod = null;\r\n\t        for (ITestNGMethod testNGMethod : context.getAllTestMethods())\r\n\t        {\r\n\t          if (testNGMethod.getInstance() == this)\r\n\t          {\r\n\t            currentTestNGMethod = testNGMethod;\r\n\t            break;\r\n\t          }\r\n\t        }\r\n\t        currentTestNGMethod.setInvocationCount(count);\t\r\n\t    }\r\n\t  }","title":"How to set invocation count during execution for the method using TestNG &amp; Java","body":"<p>I am having one test method, which I am manually executing for 200 times. </p>\n\n<pre><code>@Test(priority=2, invocationCount = 200)\npublic void inviteTalents() throws InterruptedException\n{\n  logger.log(Status.INFO, \"Count \" + logins[count]);\n}\n</code></pre>\n\n<p>How can I set the invocation count variable? I have tried something like this, but doesn't work. Any help?</p>\n\n<pre><code>  @BeforeMethod\n  public void setUp(Method method, ITestContext context) {\n\n    if(method.getName().equals(\"test3\"))\n    {\n        ITestNGMethod currentTestNGMethod = null;\n        for (ITestNGMethod testNGMethod : context.getAllTestMethods())\n        {\n          if (testNGMethod.getInstance() == this)\n          {\n            currentTestNGMethod = testNGMethod;\n            break;\n          }\n        }\n        currentTestNGMethod.setInvocationCount(count);  \n    }\n  }\n</code></pre>\n"},{"tags":["java","openapi","openapi-generator","codegen"],"answers":[{"tags":[],"owner":{"account_id":1657072,"reputation":1210,"user_id":1526322,"accept_rate":100,"display_name":"Knox"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1585468171,"creation_date":1585468171,"answer_id":60911455,"question_id":60808674,"body_markdown":"The way to specify this in OpenAPI would be using `multipleOf`:\r\n```yaml\r\ncommissionAmount:\r\n  type: number\r\n  minimum: -99999.99\r\n  maximum: 99999.99\r\n  multipleOf: 0.01\r\n```\r\n\r\nHowever, using the OpenAPI Generator **will not produce an annotation** for this. The reason being is that there is no `javax.validation` annotation that can represent `multipleOf` effectively (imagine trying to express `multipleOf: 0.02`- `@Digits` would be insufficient).\r\n\r\nHowever, you can create your own annotation as this user has: https://github.com/OpenAPITools/openapi-generator/issues/2192#issuecomment-575132233\r\n\r\nWith the following annotation and validator:\r\n```java\r\n@Target({METHOD, FIELD})\r\n@Retention(RUNTIME)\r\n@Repeatable(MultipleOf.List.class)\r\n@Constraint(validatedBy = MultipleOfValidator.class)\r\npublic @interface MultipleOf {\r\n\r\n    double value();\r\n\r\n    String message() default &quot;{error.multipleOf}&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default { };\r\n\r\n    @Target({ METHOD, FIELD })\r\n    @Retention(RUNTIME)\r\n    @Documented\r\n    @interface List {\r\n        MultipleOf[] value();\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\npublic class MultipleOfValidator implements ConstraintValidator&lt;MultipleOf, Number&gt; {\r\n\r\n    private double value;\r\n\r\n    @Override\r\n    public void initialize(MultipleOf constraintAnnotation) {\r\n        this.value = constraintAnnotation.value();\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(Number value, ConstraintValidatorContext context) {\r\n        return (value == null) || (value.doubleValue() / this.value) % 1 == 0;\r\n    }\r\n\r\n}\r\n```\r\n\r\nYou would then be able to fork the generator and add your new annotation to the template: https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/beanValidationCore.mustache\r\n\r\nWith a line like this:\r\n```mustache\r\n{{#multipleOf}}@MultipleOf({{multipleOf}}){{/multipleOf}}","title":"openapi 3.0 valid minimum and maximum values","body":"<p>The way to specify this in OpenAPI would be using <code>multipleOf</code>:</p>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>commissionAmount:\n  type: number\n  minimum: -99999.99\n  maximum: 99999.99\n  multipleOf: 0.01\n</code></pre>\n\n<p>However, using the OpenAPI Generator <strong>will not produce an annotation</strong> for this. The reason being is that there is no <code>javax.validation</code> annotation that can represent <code>multipleOf</code> effectively (imagine trying to express <code>multipleOf: 0.02</code>- <code>@Digits</code> would be insufficient).</p>\n\n<p>However, you can create your own annotation as this user has: <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/2192#issuecomment-575132233\" rel=\"noreferrer\">https://github.com/OpenAPITools/openapi-generator/issues/2192#issuecomment-575132233</a></p>\n\n<p>With the following annotation and validator:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Target({METHOD, FIELD})\n@Retention(RUNTIME)\n@Repeatable(MultipleOf.List.class)\n@Constraint(validatedBy = MultipleOfValidator.class)\npublic @interface MultipleOf {\n\n    double value();\n\n    String message() default \"{error.multipleOf}\";\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default { };\n\n    @Target({ METHOD, FIELD })\n    @Retention(RUNTIME)\n    @Documented\n    @interface List {\n        MultipleOf[] value();\n    }\n\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class MultipleOfValidator implements ConstraintValidator&lt;MultipleOf, Number&gt; {\n\n    private double value;\n\n    @Override\n    public void initialize(MultipleOf constraintAnnotation) {\n        this.value = constraintAnnotation.value();\n    }\n\n    @Override\n    public boolean isValid(Number value, ConstraintValidatorContext context) {\n        return (value == null) || (value.doubleValue() / this.value) % 1 == 0;\n    }\n\n}\n</code></pre>\n\n<p>You would then be able to fork the generator and add your new annotation to the template: <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/beanValidationCore.mustache\" rel=\"noreferrer\">https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/beanValidationCore.mustache</a></p>\n\n<p>With a line like this:</p>\n\n<pre><code>{{#multipleOf}}@MultipleOf({{multipleOf}}){{/multipleOf}}\n</code></pre>\n"}],"owner":{"account_id":2020088,"reputation":1882,"user_id":1806481,"accept_rate":65,"display_name":"Sridhar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14059,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1682719241,"creation_date":1584943866,"question_id":60808674,"body_markdown":"I have below schema definition to represent `commission amount` in my openapi contract.\r\n\r\n```\r\ncommissionAmount:\r\n  type: number\r\n  minimum: -99999.99\r\n  maximum: 99999.99\r\n```\r\n\r\nGenerated Code:\r\n```\r\n@Valid\r\n@DecimalMin(&quot;-99999.99&quot;) @DecimalMax(&quot;99999.99&quot;) \r\npublic BigDecimal getCommissionAmount() {\r\n  return commAmt;\r\n}\r\n```\r\n\r\nThe generated code is good and as expected. I just wanted to know are these `-99999.99` and `99999.99` valid values for `minimum` and `maximum`. \r\n\r\nThe reason for asking this question is it does not check the limit in the fractional part. For example, I expect `12345.678` is invalid , `12345.67` is valid. But it marks both as valid.\r\n\r\nI read `@Digits` is used to check for the digit limit of integer and fractional part. How do I tell `openapi-generator-maven-plugin` to annotate `Digits` as well?\r\n\r\nExpected Generated Code:\r\n```\r\n@Valid\r\n@Digits(integer = 5, fraction = 2)\r\n@DecimalMin(&quot;-99999.99&quot;) @DecimalMax(&quot;99999.99&quot;) \r\npublic BigDecimal getCommissionAmount() {\r\n  return commAmt;\r\n}\r\n```\r\n","title":"openapi 3.0 valid minimum and maximum values","body":"<p>I have below schema definition to represent <code>commission amount</code> in my openapi contract.</p>\n\n<pre><code>commissionAmount:\n  type: number\n  minimum: -99999.99\n  maximum: 99999.99\n</code></pre>\n\n<p>Generated Code:</p>\n\n<pre><code>@Valid\n@DecimalMin(\"-99999.99\") @DecimalMax(\"99999.99\") \npublic BigDecimal getCommissionAmount() {\n  return commAmt;\n}\n</code></pre>\n\n<p>The generated code is good and as expected. I just wanted to know are these <code>-99999.99</code> and <code>99999.99</code> valid values for <code>minimum</code> and <code>maximum</code>. </p>\n\n<p>The reason for asking this question is it does not check the limit in the fractional part. For example, I expect <code>12345.678</code> is invalid , <code>12345.67</code> is valid. But it marks both as valid.</p>\n\n<p>I read <code>@Digits</code> is used to check for the digit limit of integer and fractional part. How do I tell <code>openapi-generator-maven-plugin</code> to annotate <code>Digits</code> as well?</p>\n\n<p>Expected Generated Code:</p>\n\n<pre><code>@Valid\n@Digits(integer = 5, fraction = 2)\n@DecimalMin(\"-99999.99\") @DecimalMax(\"99999.99\") \npublic BigDecimal getCommissionAmount() {\n  return commAmt;\n}\n</code></pre>\n"},{"tags":["java","protocol-buffers","protobuf-java"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1682382042,"post_id":76094939,"comment_id":134203190,"body_markdown":"The answer will first depend on what fields are actually present in the serialized data.  Are all fields actually there?","body":"The answer will first depend on what fields are actually present in the serialized data.  Are all fields actually there?"},{"owner":{"account_id":9588169,"reputation":1265,"user_id":7120087,"display_name":"Baiqing"},"score":0,"creation_date":1682395068,"post_id":76094939,"comment_id":134204374,"body_markdown":"Required fields are there, optional fields may or may not be but mostly will be present","body":"Required fields are there, optional fields may or may not be but mostly will be present"}],"answers":[{"tags":[],"owner":{"account_id":4382998,"reputation":406,"user_id":3574093,"display_name":"Florian Enner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682718165,"creation_date":1682718165,"answer_id":76133460,"question_id":76094939,"body_markdown":"The location of the data in memory is independent of the field number, so protobuf still needs to do some amount of parsing for each field. Removing fields will likely result in a benefit, but the gains depend on your field types. \r\n\r\nUnknown varint fields (int32, int64,...) need to be parsed entirely, but fixed size (float, double, fixed32,...) and length-delimited types (messages, strings, bytes) can be skipped efficiently.","title":"Protobuf deserialization speed up via hiding extra fields","body":"<p>The location of the data in memory is independent of the field number, so protobuf still needs to do some amount of parsing for each field. Removing fields will likely result in a benefit, but the gains depend on your field types.</p>\n<p>Unknown varint fields (int32, int64,...) need to be parsed entirely, but fixed size (float, double, fixed32,...) and length-delimited types (messages, strings, bytes) can be skipped efficiently.</p>\n"}],"owner":{"account_id":9588169,"reputation":1265,"user_id":7120087,"display_name":"Baiqing"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76133460,"answer_count":1,"score":0,"last_activity_date":1682718165,"creation_date":1682360410,"question_id":76094939,"body_markdown":"Not too familiar with protobuf&#39;s implementation in java so I&#39;m not certain if this will yield any benefits, but here is a thought I had.\r\n\r\nSay for a large pb struct that looks like the following:\r\n```protobuf\r\nmessage data {\r\n    required string field1 = 1;\r\n    required int64 field2 = 2;\r\n    optional string field3 = 3;\r\n    ...\r\n    required string field1000 = 1000;\r\n}\r\n```\r\nThe above example hopefully shows a combination of 1000 fields, which could be a mix of required and optional fields with a mix of datatypes.\r\n\r\nIf I were to only want, per say, field 1 and 3, and give the deserialize job the following:\r\n```protobuf\r\nmessage data {\r\n    required string field1 = 1;\r\n    optional string field3 = 3;\r\n}\r\n```\r\nFirst of all, what would happen here, would the deserializer still attempt to parse all fields? Or would it know to only look for certain fields in their respective indexes.","title":"Protobuf deserialization speed up via hiding extra fields","body":"<p>Not too familiar with protobuf's implementation in java so I'm not certain if this will yield any benefits, but here is a thought I had.</p>\n<p>Say for a large pb struct that looks like the following:</p>\n<pre class=\"lang-protobuf prettyprint-override\"><code>message data {\n    required string field1 = 1;\n    required int64 field2 = 2;\n    optional string field3 = 3;\n    ...\n    required string field1000 = 1000;\n}\n</code></pre>\n<p>The above example hopefully shows a combination of 1000 fields, which could be a mix of required and optional fields with a mix of datatypes.</p>\n<p>If I were to only want, per say, field 1 and 3, and give the deserialize job the following:</p>\n<pre class=\"lang-protobuf prettyprint-override\"><code>message data {\n    required string field1 = 1;\n    optional string field3 = 3;\n}\n</code></pre>\n<p>First of all, what would happen here, would the deserializer still attempt to parse all fields? Or would it know to only look for certain fields in their respective indexes.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":10565292,"reputation":2108,"user_id":7783718,"display_name":"Abhay Koradiya"},"score":0,"creation_date":1560252430,"post_id":56542557,"comment_id":99666890,"body_markdown":"find view by it&#39;s id of given.","body":"find view by it&#39;s id of given."},{"owner":{"account_id":16112833,"reputation":1,"user_id":11630681,"display_name":"CBergy"},"score":0,"creation_date":1560317257,"post_id":56542557,"comment_id":99691092,"body_markdown":"May you please explain better?\n\nThere is no layout or fragment ora activity in the code which belongs to that dialog, I looked for it and was not able to find it.","body":"May you please explain better?  There is no layout or fragment ora activity in the code which belongs to that dialog, I looked for it and was not able to find it."},{"owner":{"account_id":10565292,"reputation":2108,"user_id":7783718,"display_name":"Abhay Koradiya"},"score":0,"creation_date":1560318003,"post_id":56542557,"comment_id":99691302,"body_markdown":"from Which library it&#39;s come ?","body":"from Which library it&#39;s come ?"},{"owner":{"account_id":16112833,"reputation":1,"user_id":11630681,"display_name":"CBergy"},"score":0,"creation_date":1560324359,"post_id":56542557,"comment_id":99693754,"body_markdown":"I don&#39;t know: this was my question. \n\nI was not able to track the dialog, nor I was able to find where is istantiated in the code. I performed a step-by-step debug and the dialog seems to be originated in some system library, but I may be wrong.","body":"I don&#39;t know: this was my question.   I was not able to track the dialog, nor I was able to find where is istantiated in the code. I performed a step-by-step debug and the dialog seems to be originated in some system library, but I may be wrong."}],"owner":{"account_id":16112833,"reputation":1,"user_id":11630681,"display_name":"CBergy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682717462,"creation_date":1560251965,"question_id":56542557,"body_markdown":"I need trying to change/translate the message shown in the OneBusAway Android app after sending with success a report about an arrival time or a bus stop.\r\n\r\nThe dialog shows the message &quot;Your issue has been successfully reported&quot;, plus an &quot;Ok&quot; button: \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe message shown does not depend on the language of the operating system. I looked in the whole code for that string, and for substrings, without beeing able to find anything.\r\n\r\nMore, debugging step-by-step it seems the dialog is originated from some Android library.\r\n\r\nAny idea on how to approach the problem in order to change and/or translate the message?\r\n\r\n  [1]: https://i.stack.imgur.com/21ffX.jpg","title":"Android - OneBusAway: translate message for succesfully sent problems","body":"<p>I need trying to change/translate the message shown in the OneBusAway Android app after sending with success a report about an arrival time or a bus stop.</p>\n\n<p>The dialog shows the message \"Your issue has been successfully reported\", plus an \"Ok\" button: </p>\n\n<p><a href=\"https://i.stack.imgur.com/21ffX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/21ffX.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The message shown does not depend on the language of the operating system. I looked in the whole code for that string, and for substrings, without beeing able to find anything.</p>\n\n<p>More, debugging step-by-step it seems the dialog is originated from some Android library.</p>\n\n<p>Any idea on how to approach the problem in order to change and/or translate the message?</p>\n"},{"tags":["java","generics"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682687345,"creation_date":1682684360,"answer_id":76129514,"question_id":76129388,"body_markdown":"The case of `method3` is not similar to the case of `method2` at all. Namely, there are no [raw types][1] involved when calling `method3`. `DerivedClass` in `DerivedClass.class` is a raw type.\r\n\r\nIt *would* be similar if you return a raw `DerivedClass` in the supplier:\r\n\r\n    final var m5 = method3(arg, () -&gt; new DerivedClass());\r\n\r\n    // this doesn&#39;t compile, for the same reason as in the method2 case\r\n    s = m5.getSomething();\r\n\r\nThe type argument for `method2` *cannot* be inferred as `DerivedClass&lt;T&gt;`, because then the second parameter (`arg2`) would be of type `Class&lt;? extends DerivedClass&lt;T&gt;&gt;`, but you are passing a `Class&lt;DerivedClass&gt;` to it.\r\n\r\nIt&#39;s like assigning a `Class&lt;DerivedClass&gt;` to `Class&lt;? extends DerivedClass&lt;T&gt;&gt;` variable:\r\n\r\n    // this does not compile either\r\n    Class&lt;? extends DerivedClass&lt;T&gt;&gt; x = DerivedClass.class;\r\n\r\nThis doesn&#39;t compile because the raw `DerivedClass` is not a subtype of `DerivedClass&lt;T&gt;`. In fact, if you look at [section 4.10.2][2] of the JLS, `DerivedClass` is a direct *supertype* of `DerivedClass&lt;T&gt;`.\r\n\r\n&gt; Given a generic class or interface `C` with type parameters F1,...,Fn (n &gt; 0), the direct supertypes of the parameterized type `C&lt;T1,...,Tn&gt;`, where each of Ti (1  i  n) is a type, are all of the following:\r\n&gt;\r\n&gt; - [...]\r\n&gt;\r\n&gt; - The raw type `C`.\r\n\r\nTherefore, the type parameter of `method2` is inferred as the raw `DerivedClass`. This works for `arg1` too, as the generic `DerivedClass&lt;T&gt;` is a subtype of the raw `DerivedClass`.\r\n\r\nThat said, [it is not possible to get a `Class&lt;DerivedClass&lt;T&gt;&gt;`][3] unless you do unchecked casts.\r\n\r\nNow you might be wondering how this assignment works if `method2` returns a raw `DerivedClass`, but you are assigning it to `DerivedClass&lt;T&gt;`:\r\n\r\n    final DerivedClass&lt;T&gt; m4 = BaseClass.method2(arg, DerivedClass.class);\r\n\r\nThis works because in assignment contexts just are [specified][4] to work like this. The important sentence is:\r\n\r\n&gt; If, after the conversions listed above have been applied, the resulting type is a raw type (&#167;4.8), an unchecked conversion (&#167;5.1.9) may then be applied.\r\n\r\nThere is an implicit unchecked conversion here converting `DerivedClass` to `DerivedClass&lt;T&gt;`. This is also why you get the warning.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/2770321/5133585\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.10.2\r\n  [3]: https://stackoverflow.com/q/2390662/5133585\r\n  [4]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.2","title":"A special case of Java generics matching","body":"<p>The case of <code>method3</code> is not similar to the case of <code>method2</code> at all. Namely, there are no <a href=\"https://stackoverflow.com/q/2770321/5133585\">raw types</a> involved when calling <code>method3</code>. <code>DerivedClass</code> in <code>DerivedClass.class</code> is a raw type.</p>\n<p>It <em>would</em> be similar if you return a raw <code>DerivedClass</code> in the supplier:</p>\n<pre><code>final var m5 = method3(arg, () -&gt; new DerivedClass());\n\n// this doesn't compile, for the same reason as in the method2 case\ns = m5.getSomething();\n</code></pre>\n<p>The type argument for <code>method2</code> <em>cannot</em> be inferred as <code>DerivedClass&lt;T&gt;</code>, because then the second parameter (<code>arg2</code>) would be of type <code>Class&lt;? extends DerivedClass&lt;T&gt;&gt;</code>, but you are passing a <code>Class&lt;DerivedClass&gt;</code> to it.</p>\n<p>It's like assigning a <code>Class&lt;DerivedClass&gt;</code> to <code>Class&lt;? extends DerivedClass&lt;T&gt;&gt;</code> variable:</p>\n<pre><code>// this does not compile either\nClass&lt;? extends DerivedClass&lt;T&gt;&gt; x = DerivedClass.class;\n</code></pre>\n<p>This doesn't compile because the raw <code>DerivedClass</code> is not a subtype of <code>DerivedClass&lt;T&gt;</code>. In fact, if you look at <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.10.2\" rel=\"nofollow noreferrer\">section 4.10.2</a> of the JLS, <code>DerivedClass</code> is a direct <em>supertype</em> of <code>DerivedClass&lt;T&gt;</code>.</p>\n<blockquote>\n<p>Given a generic class or interface <code>C</code> with type parameters F1,...,Fn (n &gt; 0), the direct supertypes of the parameterized type <code>C&lt;T1,...,Tn&gt;</code>, where each of Ti (1  i  n) is a type, are all of the following:</p>\n<ul>\n<li><p>[...]</p>\n</li>\n<li><p>The raw type <code>C</code>.</p>\n</li>\n</ul>\n</blockquote>\n<p>Therefore, the type parameter of <code>method2</code> is inferred as the raw <code>DerivedClass</code>. This works for <code>arg1</code> too, as the generic <code>DerivedClass&lt;T&gt;</code> is a subtype of the raw <code>DerivedClass</code>.</p>\n<p>That said, <a href=\"https://stackoverflow.com/q/2390662/5133585\">it is not possible to get a <code>Class&lt;DerivedClass&lt;T&gt;&gt;</code></a> unless you do unchecked casts.</p>\n<p>Now you might be wondering how this assignment works if <code>method2</code> returns a raw <code>DerivedClass</code>, but you are assigning it to <code>DerivedClass&lt;T&gt;</code>:</p>\n<pre><code>final DerivedClass&lt;T&gt; m4 = BaseClass.method2(arg, DerivedClass.class);\n</code></pre>\n<p>This works because in assignment contexts just are <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.2\" rel=\"nofollow noreferrer\">specified</a> to work like this. The important sentence is:</p>\n<blockquote>\n<p>If, after the conversions listed above have been applied, the resulting type is a raw type (4.8), an unchecked conversion (5.1.9) may then be applied.</p>\n</blockquote>\n<p>There is an implicit unchecked conversion here converting <code>DerivedClass</code> to <code>DerivedClass&lt;T&gt;</code>. This is also why you get the warning.</p>\n"},{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682684761,"creation_date":1682684761,"answer_id":76129568,"question_id":76129388,"body_markdown":"Because both `BaseClass` and `DerivedClass` are generic classes, but `DerivedClass.class` is a raw type (namely `Class&lt;DerivedClass&gt;` and not `Class&lt;DerivedClass&lt;T&gt;&gt;`).\r\n\r\n`var` is inferred to be the raw type and your statement is identical to:\r\n\r\n```\r\nfinal DerivedClass m2 = method2(arg, DerivedClass.class);\r\n```\r\n\r\nOnce you use raw types, all generic information is &quot;lost&quot;/erased and you have to deal with plain `Object`s.\r\n\r\n`this.&lt;DerivedClass&lt;T&gt;&gt;method2(arg, DerivedClass.class)` should make `m2` generic again (but you probably still have the unchecked cast warning, just for the argument).\r\n\r\nAnd it&#39;s exactly this &quot;unchecked assignment&quot; that&#39;s causing the issues (unchecked from the raw type to the generic closed type).","title":"A special case of Java generics matching","body":"<p>Because both <code>BaseClass</code> and <code>DerivedClass</code> are generic classes, but <code>DerivedClass.class</code> is a raw type (namely <code>Class&lt;DerivedClass&gt;</code> and not <code>Class&lt;DerivedClass&lt;T&gt;&gt;</code>).</p>\n<p><code>var</code> is inferred to be the raw type and your statement is identical to:</p>\n<pre><code>final DerivedClass m2 = method2(arg, DerivedClass.class);\n</code></pre>\n<p>Once you use raw types, all generic information is &quot;lost&quot;/erased and you have to deal with plain <code>Object</code>s.</p>\n<p><code>this.&lt;DerivedClass&lt;T&gt;&gt;method2(arg, DerivedClass.class)</code> should make <code>m2</code> generic again (but you probably still have the unchecked cast warning, just for the argument).</p>\n<p>And it's exactly this &quot;unchecked assignment&quot; that's causing the issues (unchecked from the raw type to the generic closed type).</p>\n"}],"owner":{"account_id":454778,"reputation":532,"user_id":852569,"accept_rate":64,"display_name":"Fabrizio Giudici"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76129514,"answer_count":2,"score":3,"last_activity_date":1682716930,"creation_date":1682682861,"question_id":76129388,"body_markdown":"I&#39;d like to resolve a dubious point that has been affecting some parts of my code for years  it is fixed with a trivial cast, but now I&#39;d like to understand the rationale behind it and possibly a reference in official specifications.\r\n\r\nLet me introduce this piece of code:\r\n\r\n    import java.util.function.Supplier;\r\n\r\n    class BaseClass&lt;T, R&gt; {\r\n      R getSomething() { return null; }\r\n      static &lt;U&gt; U method1 (final U arg1) { return arg1; }\r\n      static &lt;U&gt; U method2 (final U arg1, final Class&lt;? extends U&gt; arg2) { return arg1; }\r\n      static &lt;U&gt; U method3 (final U arg1, final Supplier&lt;? extends U&gt; arg2) { return arg1; }\r\n    }\r\n\r\nNow let me have a subclass with a partial generics binding (`T` is still unbound):\r\n\r\n    class DerivedClass&lt;T&gt; extends BaseClass&lt;T, String&gt; {\r\n      private String s;\r\n\r\n      void test (final DerivedClass&lt;T&gt; arg) {\r\n        final var m1 = method1(arg);\r\n        s = m1.getSomething();\r\n\r\n        final DerivedClass&lt;T&gt; m3 = method1(arg);\r\n        s = m3.getSomething();\r\n\r\n        final var m2 = method2(arg, DerivedClass.class);\r\n        // 1. ERROR: requires String, found Object\r\n        s = m2.getSomething();\r\n\r\n        // 2. WARNING: unchecked assignment DerivedClass to DerivedClass&lt;T&gt;\r\n        final DerivedClass&lt;T&gt; m4 = method2(arg, DerivedClass.class);\r\n        s = m4.getSomething();\r\n\r\n        final var m5 = method3(arg, () -&gt; new DerivedClass&lt;&gt;());\r\n        s = m5.getSomething();\r\n        } \r\n    }\r\n  \r\nWith `method1` everything is fine and the returned object carries the binding `R` -&gt; `String`. In other words, the `U` type of `arg1` is correctly propagated to the result.\r\n\r\nWith `method2` the binding is lost (and &quot;downgraded&quot; to `Object`): this ends up in a warning if I force things with an explicit type declaration of `m4` (of course an explicit cast would work too) and an error if I use `var`.\r\n\r\nWith `method3`, in spite of `arg2` being declared in a similar way as in `method2`, everything is fine again.\r\n\r\nSo it seems that the culprit is the presence of an argument of `Class&lt;&gt;` type. Why? In general, why doesn&#39;t the compiler use `arg1` for a complete match even when there is a `Class&lt;&gt;` parameter?\r\n\r\nAs far as I can remember this happens since Java 5 (of course the portions with `var` refer to Java 17).","title":"A special case of Java generics matching","body":"<p>I'd like to resolve a dubious point that has been affecting some parts of my code for years  it is fixed with a trivial cast, but now I'd like to understand the rationale behind it and possibly a reference in official specifications.</p>\n<p>Let me introduce this piece of code:</p>\n<pre><code>import java.util.function.Supplier;\n\nclass BaseClass&lt;T, R&gt; {\n  R getSomething() { return null; }\n  static &lt;U&gt; U method1 (final U arg1) { return arg1; }\n  static &lt;U&gt; U method2 (final U arg1, final Class&lt;? extends U&gt; arg2) { return arg1; }\n  static &lt;U&gt; U method3 (final U arg1, final Supplier&lt;? extends U&gt; arg2) { return arg1; }\n}\n</code></pre>\n<p>Now let me have a subclass with a partial generics binding (<code>T</code> is still unbound):</p>\n<pre><code>class DerivedClass&lt;T&gt; extends BaseClass&lt;T, String&gt; {\n  private String s;\n\n  void test (final DerivedClass&lt;T&gt; arg) {\n    final var m1 = method1(arg);\n    s = m1.getSomething();\n\n    final DerivedClass&lt;T&gt; m3 = method1(arg);\n    s = m3.getSomething();\n\n    final var m2 = method2(arg, DerivedClass.class);\n    // 1. ERROR: requires String, found Object\n    s = m2.getSomething();\n\n    // 2. WARNING: unchecked assignment DerivedClass to DerivedClass&lt;T&gt;\n    final DerivedClass&lt;T&gt; m4 = method2(arg, DerivedClass.class);\n    s = m4.getSomething();\n\n    final var m5 = method3(arg, () -&gt; new DerivedClass&lt;&gt;());\n    s = m5.getSomething();\n    } \n}\n</code></pre>\n<p>With <code>method1</code> everything is fine and the returned object carries the binding <code>R</code> -&gt; <code>String</code>. In other words, the <code>U</code> type of <code>arg1</code> is correctly propagated to the result.</p>\n<p>With <code>method2</code> the binding is lost (and &quot;downgraded&quot; to <code>Object</code>): this ends up in a warning if I force things with an explicit type declaration of <code>m4</code> (of course an explicit cast would work too) and an error if I use <code>var</code>.</p>\n<p>With <code>method3</code>, in spite of <code>arg2</code> being declared in a similar way as in <code>method2</code>, everything is fine again.</p>\n<p>So it seems that the culprit is the presence of an argument of <code>Class&lt;&gt;</code> type. Why? In general, why doesn't the compiler use <code>arg1</code> for a complete match even when there is a <code>Class&lt;&gt;</code> parameter?</p>\n<p>As far as I can remember this happens since Java 5 (of course the portions with <code>var</code> refer to Java 17).</p>\n"},{"tags":["java","xml","schema","aem"],"comments":[{"owner":{"account_id":70798,"reputation":2030,"user_id":204968,"display_name":"ronnyfm"},"score":1,"creation_date":1684511895,"post_id":76130291,"comment_id":134532856,"body_markdown":"By the way, if you have custom properties, beware of calling them something like: cn:myPropery, where cn is custom name, the idea is that anything like prefix:Property can cause problems when importing the content into AEM and you have to register these custom prefixes. See this: https://experienceleague.adobe.com/docs/experience-manager-learn/cloud-service/developing/advanced/custom-namespaces.html?lang=en","body":"By the way, if you have custom properties, beware of calling them something like: cn:myPropery, where cn is custom name, the idea is that anything like prefix:Property can cause problems when importing the content into AEM and you have to register these custom prefixes. See this: <a href=\"https://experienceleague.adobe.com/docs/experience-manager-learn/cloud-service/developing/advanced/custom-namespaces.html?lang=en\" rel=\"nofollow noreferrer\">experienceleague.adobe.com/docs/experience-manager-learn/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6995,"reputation":18400,"user_id":11940,"accept_rate":88,"display_name":"Raphael Schweikert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682716678,"creation_date":1682716678,"answer_id":76133331,"question_id":76130291,"body_markdown":"[OakPAL](http://adamcin.net/oakpal/) can validate the XML used to import nodes into AEM. Its not a schema, as I dont believe such a thing exists, since JCR node types (the thing described by the `jcr:primaryType` attribute, which is `cq:Component` in your example) can have declarations that arent static and, thus, not representable in schemata.\r\n\r\nAlso, Ive only ever used it to validate entire packages (ZIP files) with nodes, not single XML files so maybe youll have to package up your XMLs in order to use it.","title":"Is there an XML schema for JCR (Java Content Repository)?","body":"<p><a href=\"http://adamcin.net/oakpal/\" rel=\"nofollow noreferrer\">OakPAL</a> can validate the XML used to import nodes into AEM. Its not a schema, as I dont believe such a thing exists, since JCR node types (the thing described by the <code>jcr:primaryType</code> attribute, which is <code>cq:Component</code> in your example) can have declarations that arent static and, thus, not representable in schemata.</p>\n<p>Also, Ive only ever used it to validate entire packages (ZIP files) with nodes, not single XML files so maybe youll have to package up your XMLs in order to use it.</p>\n"}],"owner":{"account_id":60637,"reputation":487,"user_id":181097,"accept_rate":89,"display_name":"jfix"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682716678,"creation_date":1682690070,"question_id":76130291,"body_markdown":"We&#39;ve been asked to provide content via API to the Adobe Experience Manager CMS (previously CQ?).\r\n\r\nAs we store our information in our own system in an XML database, it would make sense to provide some JCR-compliant XML which may have to be enriched by AEM. To make sure our XML is correct we would like to validate it before sending it to AEM.\r\n\r\nBut despite having spent quite some time looking for an XML schema (or a JSON schema), we cannot find one. Does it not exist, or does it have a different name? If there is no schema, how can one make sure the XML is valid?\r\n\r\n\r\nHere is a code bit from Adobe&#39;s [AEM Github repository][1]\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;jcr:root xmlns:cq=&quot;http://www.day.com/jcr/cq/1.0&quot; xmlns:jcr=&quot;http://www.jcp.org/jcr/1.0&quot;\r\n    cq:icon=&quot;textLeft&quot;\r\n    jcr:description=&quot;Rich Text Section&quot;\r\n    jcr:primaryType=&quot;cq:Component&quot;\r\n    jcr:title=&quot;Text (v2)&quot;\r\n    componentGroup=&quot;.core-wcm&quot;/&gt;\r\n```\r\n\r\nThere are namespaces which lead us to think that somewhere there may be a schema, but so far no luck.\r\n\r\n  [1]: https://github.com/adobe/aem-core-wcm-components/blob/main/content/src/content/jcr_root/apps/core/wcm/components/text/v2/text/.content.xml","title":"Is there an XML schema for JCR (Java Content Repository)?","body":"<p>We've been asked to provide content via API to the Adobe Experience Manager CMS (previously CQ?).</p>\n<p>As we store our information in our own system in an XML database, it would make sense to provide some JCR-compliant XML which may have to be enriched by AEM. To make sure our XML is correct we would like to validate it before sending it to AEM.</p>\n<p>But despite having spent quite some time looking for an XML schema (or a JSON schema), we cannot find one. Does it not exist, or does it have a different name? If there is no schema, how can one make sure the XML is valid?</p>\n<p>Here is a code bit from Adobe's <a href=\"https://github.com/adobe/aem-core-wcm-components/blob/main/content/src/content/jcr_root/apps/core/wcm/components/text/v2/text/.content.xml\" rel=\"nofollow noreferrer\">AEM Github repository</a></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jcr:root xmlns:cq=&quot;http://www.day.com/jcr/cq/1.0&quot; xmlns:jcr=&quot;http://www.jcp.org/jcr/1.0&quot;\n    cq:icon=&quot;textLeft&quot;\n    jcr:description=&quot;Rich Text Section&quot;\n    jcr:primaryType=&quot;cq:Component&quot;\n    jcr:title=&quot;Text (v2)&quot;\n    componentGroup=&quot;.core-wcm&quot;/&gt;\n</code></pre>\n<p>There are namespaces which lead us to think that somewhere there may be a schema, but so far no luck.</p>\n"},{"tags":["java","primes","biginteger"],"comments":[{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":2,"creation_date":1647900029,"post_id":71564562,"comment_id":126483348,"body_markdown":"My guess is that there are other ranges of primes for which you get considerably poorer results. It might be that many of the first 1M integers are the &quot;easy ones&quot; to check.","body":"My guess is that there are other ranges of primes for which you get considerably poorer results. It might be that many of the first 1M integers are the &quot;easy ones&quot; to check."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1647900907,"post_id":71564562,"comment_id":126483565,"body_markdown":"The implementation references ANSI X9.80 for the logic.","body":"The implementation references ANSI X9.80 for the logic."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1647909251,"post_id":71564562,"comment_id":126485099,"body_markdown":"Even at a certainty of `2`,  `BigInteger b = (BigInteger.TWO.pow(82589933)).subtract(BigInteger.ONE);` which is the largest known prime takes a long time (at least 10 minutes on my PC) to return.  And that is small since the largest BigInteger permitted takes `Integer.MAX_VALUE` as  an argument to the `pow` method.","body":"Even at a certainty of <code>2</code>,  <code>BigInteger b = (BigInteger.TWO.pow(82589933)).subtract(BigInteger.ONE);</code> which is the largest known prime takes a long time (at least 10 minutes on my PC) to return.  And that is small since the largest BigInteger permitted takes <code>Integer.MAX_VALUE</code> as  an argument to the <code>pow</code> method."},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1647912222,"post_id":71564562,"comment_id":126485543,"body_markdown":"The probability is related solely to one of the internal underlying tests called the miller-rabin primality test. *Most* composites will be detected rather easily, but a few stubborn ones are harder to reveal. That probability is a worst case probability in case the composite you are testing just happens to be one of the stubborn ones.","body":"The probability is related solely to one of the internal underlying tests called the miller-rabin primality test. <i>Most</i> composites will be detected rather easily, but a few stubborn ones are harder to reveal. That probability is a worst case probability in case the composite you are testing just happens to be one of the stubborn ones."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1647903636,"creation_date":1647903489,"answer_id":71565106,"question_id":71564562,"body_markdown":"The documentation you&#39;ve cited is correct.\r\n\r\n&gt; certainty - a measure of the uncertainty that the caller is willing to tolerate: if the call returns true the probability that this BigInteger is prime exceeds (1 - 1/2&lt;sup&gt;certainty&lt;/sup&gt;)\r\n\r\n99.9% indeed exceeds 1 - 1/(2&lt;sup&gt;2&lt;/sup&gt;) = 3/4, so there&#39;s nothing wrong with what you&#39;ve shown us.\r\n\r\nThe implementation makes no guarantees that that&#39;s _exactly_ the probability, it just provides an implementation whose error is _definitely bounded_ by that certainty.\r\n\r\nMost quality primality testers will have lots of optimizations for small primes, or rather, numbers whose divisors are small composite numbers.  These likely kick in before the random aspects of the algorithm, resulting in higher-than-usual accuracy for small primes.","title":"BigInteger.isProbablePrime seems much more certain than it says it is","body":"<p>The documentation you've cited is correct.</p>\n<blockquote>\n<p>certainty - a measure of the uncertainty that the caller is willing to tolerate: if the call returns true the probability that this BigInteger is prime exceeds (1 - 1/2<sup>certainty</sup>)</p>\n</blockquote>\n<p>99.9% indeed exceeds 1 - 1/(2<sup>2</sup>) = 3/4, so there's nothing wrong with what you've shown us.</p>\n<p>The implementation makes no guarantees that that's <em>exactly</em> the probability, it just provides an implementation whose error is <em>definitely bounded</em> by that certainty.</p>\n<p>Most quality primality testers will have lots of optimizations for small primes, or rather, numbers whose divisors are small composite numbers.  These likely kick in before the random aspects of the algorithm, resulting in higher-than-usual accuracy for small primes.</p>\n"},{"tags":[],"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1682716163,"creation_date":1647991414,"answer_id":71580103,"question_id":71564562,"body_markdown":"These statements frequently cause confusion. I will attempt to explain it a little better here.\r\n\r\nJava&#39;s `BigInteger.isProbablePrime()` contains no optimizations for small integers at all, except 0, 1, and 2 are treated as special cases and all even integers except 2 are immediately declared composite. This will be true as of the time this was written.\r\n\r\nAll other odd integers are checked for primality using the Miller-Rabin (MR) primality test. In addition, if the integer is 100 bits or larger it is also checked with something called the Lucas-Lehmer test.\r\n\r\nMR is a complicated primality test whose explanation and analysis are beyond the scope of an SO answer. The key point is that, as far as MR is concerned, not all composites are created equal. A very, very tiny fraction are *stubborn*, which means it&#39;s much, much harder to discover their compositeness. A few examples: amongst the small odd composites, 91, 703, and 1891 are stubborn. MR overcomes this by trying multiple randomized attempts to discover the compositeness of an integer. Rabin&#39;s analysis shows that, for the most stubborn composites, a single randomized attempt still has at least a 75% (3/4) probability of revealing its compositeness.\r\n\r\nThe algorithm has no way to know which composites are stubborn. And for cryptography, getting a number you&#39;re told is prime but is actually composite can be potentially disastrous. So, for safety, the formula for `certainty` assumes that *all* the numbers it tests for primality are are stubborn composites or real primes. The `certainty` argument is almost equivalent to specifying the number of randomized attempts that the MR algorithm needs to perform. In reality, the relationship between the `certainty` argument and the number of randomized attempts in the Java implementation seems more complicated and I don&#39;t completely understand it myself just from reading the source code.\r\n\r\nBut remember I said that the fraction of composites that are stubborn is very, very small. Almost every composite you test is not stubborn, and will fail MR after only a single randomized attempt as primes get larger. That&#39;s why your success rate appears to be 99.9%.\r\n\r\nAs an experiment to see how different composites perform, change your program to instead just repeatedly try confirming the compositeness of, say, 1891. You will see something closer to only 75% success.\r\n\r\nA list of relatively small MR-stubborn composites is [here](https://oeis.org/A090659).","title":"BigInteger.isProbablePrime seems much more certain than it says it is","body":"<p>These statements frequently cause confusion. I will attempt to explain it a little better here.</p>\n<p>Java's <code>BigInteger.isProbablePrime()</code> contains no optimizations for small integers at all, except 0, 1, and 2 are treated as special cases and all even integers except 2 are immediately declared composite. This will be true as of the time this was written.</p>\n<p>All other odd integers are checked for primality using the Miller-Rabin (MR) primality test. In addition, if the integer is 100 bits or larger it is also checked with something called the Lucas-Lehmer test.</p>\n<p>MR is a complicated primality test whose explanation and analysis are beyond the scope of an SO answer. The key point is that, as far as MR is concerned, not all composites are created equal. A very, very tiny fraction are <em>stubborn</em>, which means it's much, much harder to discover their compositeness. A few examples: amongst the small odd composites, 91, 703, and 1891 are stubborn. MR overcomes this by trying multiple randomized attempts to discover the compositeness of an integer. Rabin's analysis shows that, for the most stubborn composites, a single randomized attempt still has at least a 75% (3/4) probability of revealing its compositeness.</p>\n<p>The algorithm has no way to know which composites are stubborn. And for cryptography, getting a number you're told is prime but is actually composite can be potentially disastrous. So, for safety, the formula for <code>certainty</code> assumes that <em>all</em> the numbers it tests for primality are are stubborn composites or real primes. The <code>certainty</code> argument is almost equivalent to specifying the number of randomized attempts that the MR algorithm needs to perform. In reality, the relationship between the <code>certainty</code> argument and the number of randomized attempts in the Java implementation seems more complicated and I don't completely understand it myself just from reading the source code.</p>\n<p>But remember I said that the fraction of composites that are stubborn is very, very small. Almost every composite you test is not stubborn, and will fail MR after only a single randomized attempt as primes get larger. That's why your success rate appears to be 99.9%.</p>\n<p>As an experiment to see how different composites perform, change your program to instead just repeatedly try confirming the compositeness of, say, 1891. You will see something closer to only 75% success.</p>\n<p>A list of relatively small MR-stubborn composites is <a href=\"https://oeis.org/A090659\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71580103,"answer_count":2,"score":3,"last_activity_date":1682716163,"creation_date":1647899596,"question_id":71564562,"body_markdown":"I understand the [certainty](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html#isProbablePrime(int)) argument to mean:\r\n\r\n&gt; certainty - a measure of the uncertainty that the caller is willing to tolerate: if the call returns true the probability that this BigInteger is prime exceeds (1 - 1/2&lt;sup&gt;certainty&lt;/sup&gt;)\r\n\r\nFrom my experiments, it seems to exceed it by quite a lot! The code below finds &quot;probable primes&quot; between 2 and 1 million and checks against a set of definite primes to see if it was a false positive.\r\n\r\nI&#39;m using a certainty argument of 2. I therefore expect that only 75% of &quot;probable primes&quot; will be actual primes. (1 - 1/2&lt;sup&gt;2&lt;/sup&gt; = 0.75 = 75%.)\r\n\r\nActually, it gets it right 99.9% of the time.\r\n\r\nIs my understanding of the meaning of &quot;certainty&quot; correct? I suspect it might not be if the certainty I&#39;ve seen experimentally exceeds my expectation by so much.\r\n\r\n\r\n    import java.math.BigInteger;\r\n    import java.util.BitSet;\r\n    \r\n    import static java.lang.Math.sqrt;\r\n    \r\n    public class PrimesCalculator {\r\n        public final int max;\r\n        private final BitSet sieve;  // Set of all non-primes from 2 to max.\r\n    \r\n        public PrimesCalculator(int max) {\r\n            this.max = max;\r\n            sieve = new BitSet(max+1);\r\n            for (int n = 2, sqrtMax = (int) sqrt(max); n &lt; sqrtMax; n++)\r\n                for (int i = n * 2; i &lt; max; i += n)\r\n                    sieve.set(i);\r\n        }\r\n    \r\n        public boolean isPrime(int n) {\r\n            return !sieve.get(n);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            PrimesCalculator calc = new PrimesCalculator(1_000_000);\r\n            int numPrimes = 0;\r\n            int numProbablePrimes = 0;\r\n            for (int i = 2; i &lt; calc.max; i++)\r\n                if (BigInteger.valueOf(i).isProbablePrime(2)) {\r\n                    numProbablePrimes++;\r\n                    if (calc.isPrime(i))\r\n                        numPrimes++;\r\n                }\r\n            System.out.printf(&quot;%s/%s (%s%%)%n&quot;, numPrimes, numProbablePrimes, numPrimes / (numProbablePrimes / 100.0));\r\n        }\r\n    }\r\n\r\n","title":"BigInteger.isProbablePrime seems much more certain than it says it is","body":"<p>I understand the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html#isProbablePrime(int)\" rel=\"nofollow noreferrer\">certainty</a> argument to mean:</p>\n<blockquote>\n<p>certainty - a measure of the uncertainty that the caller is willing to tolerate: if the call returns true the probability that this BigInteger is prime exceeds (1 - 1/2<sup>certainty</sup>)</p>\n</blockquote>\n<p>From my experiments, it seems to exceed it by quite a lot! The code below finds &quot;probable primes&quot; between 2 and 1 million and checks against a set of definite primes to see if it was a false positive.</p>\n<p>I'm using a certainty argument of 2. I therefore expect that only 75% of &quot;probable primes&quot; will be actual primes. (1 - 1/2<sup>2</sup> = 0.75 = 75%.)</p>\n<p>Actually, it gets it right 99.9% of the time.</p>\n<p>Is my understanding of the meaning of &quot;certainty&quot; correct? I suspect it might not be if the certainty I've seen experimentally exceeds my expectation by so much.</p>\n<pre><code>import java.math.BigInteger;\nimport java.util.BitSet;\n\nimport static java.lang.Math.sqrt;\n\npublic class PrimesCalculator {\n    public final int max;\n    private final BitSet sieve;  // Set of all non-primes from 2 to max.\n\n    public PrimesCalculator(int max) {\n        this.max = max;\n        sieve = new BitSet(max+1);\n        for (int n = 2, sqrtMax = (int) sqrt(max); n &lt; sqrtMax; n++)\n            for (int i = n * 2; i &lt; max; i += n)\n                sieve.set(i);\n    }\n\n    public boolean isPrime(int n) {\n        return !sieve.get(n);\n    }\n\n    public static void main(String[] args) {\n        PrimesCalculator calc = new PrimesCalculator(1_000_000);\n        int numPrimes = 0;\n        int numProbablePrimes = 0;\n        for (int i = 2; i &lt; calc.max; i++)\n            if (BigInteger.valueOf(i).isProbablePrime(2)) {\n                numProbablePrimes++;\n                if (calc.isPrime(i))\n                    numPrimes++;\n            }\n        System.out.printf(&quot;%s/%s (%s%%)%n&quot;, numPrimes, numProbablePrimes, numPrimes / (numProbablePrimes / 100.0));\n    }\n}\n</code></pre>\n"},{"tags":["java","jframe","jpanel","jbutton"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1682398043,"post_id":76097622,"comment_id":134204610,"body_markdown":"1) Don&#39;t use a null layout and setBounds(). Swing was designed to be used with layout managers. 2) Read the section from the Swing tutorial on [How to Use CardLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/card.html) for working examples to get you started.","body":"1) Don&#39;t use a null layout and setBounds(). Swing was designed to be used with layout managers. 2) Read the section from the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\" rel=\"nofollow noreferrer\">How to Use CardLayout</a> for working examples to get you started."},{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":1,"creation_date":1682403659,"post_id":76097622,"comment_id":134205261,"body_markdown":"Welcome to SO, I think it would be usefull to read: https://stackoverflow.com/help/minimal-reproducible-example","body":"Welcome to SO, I think it would be usefull to read: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}],"owner":{"account_id":28407200,"reputation":1,"user_id":21731060,"display_name":"SoraKing"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682716140,"creation_date":1682396544,"question_id":76097622,"body_markdown":"I am new to programming just picked up for the last six months and have been on and off. My question is how do I get my button to take me to my next panel to show my game panel from my main panel. I have a switch case which should check for my value of my button which I set to start when clicked. But for some reason I am not understanding what I am doing wrong.\r\n\r\nI am at lost and just need some help really picking up on my mistake that I am making and how to improve. Each of these class are different files.\r\n\r\n```\r\n// Just to start game and nothing else\r\npublic class Starter\r\n{\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tWindow window = new Window();\r\n\t\twindow.createWindow();\r\n\t}\r\n}\r\n\r\n// Has values that can be used for all classes\r\npublic class Common\r\n{\r\n\tint width, height;\r\n\tFont titleFont;\r\n\tFont normalFont;\r\n\tColor white;\r\n\tColor black;\r\n\t\r\n\tpublic Common()\r\n\t{\r\n\t\twidth = 800;\r\n\t\theight = 600;\r\n\t\ttitleFont = new Font(&quot;Time New Roman&quot;, Font.PLAIN, 90);\r\n\t\tnormalFont = new Font(&quot;Time New Roman&quot;, Font.PLAIN, 26);\r\n\t\twhite = Color.white;\r\n\t\tblack = Color.black;\r\n\t}\r\n}\r\n\r\n//Class to create just Frame and add to frame\r\npublic class Window\r\n{\r\n\tJFrame window;\r\n\tString title;\r\n\tMainPanel mainPanel;\r\n\tCommon values;\r\n\t\r\n\tpublic Window()\r\n\t{\r\n\t\twindow = new JFrame();\r\n\t\ttitle = &quot;Game&quot;;\r\n\t\tmainPanel = new MainPanel();\r\n\t\tvalues = new Common();\r\n\t}\r\n\t\r\n\tpublic void createWindow()\r\n\t{\r\n\t\twindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\twindow.setTitle(title);\r\n\t\twindow.setSize(values.width, values.height);\r\n\t\twindow.setLayout(null);\r\n\t\twindow.setLocationRelativeTo(null);\r\n\t\t\r\n\t\twindow.add(mainPanel.mainPanel());\r\n\t\tmainPanel.createMainPanel();\r\n\t\t\r\n\t\twindow.setVisible(true);\t\r\n\t}\r\n}\r\n\r\n//Main Menu Panel\r\npublic class MainPanel\r\n{\r\n\tJPanel mainPanel;\r\n\tCommon values;\r\n\tJButton startButton;\r\n\tJLabel titleLabel;\r\n\tManager manager;\r\n\t\r\n\tpublic MainPanel()\r\n\t{\r\n\t\tmainPanel = new JPanel();\r\n\t\tvalues = new Common();\r\n\t\tstartButton = new JButton();\r\n\t\ttitleLabel = new JLabel();\r\n\t\tmanager = new Manager();\r\n\t}\r\n\t\r\n\tpublic void createMainPanel()\r\n\t{\r\n\t\tmainPanel.setBounds(0, 0, values.width, values.height);\r\n\t\tmainPanel.setBackground(Color.black);\r\n\t\tmainPanel.setLayout(null);\r\n\t\t\r\n\t\tstartButton.setText(&quot;Start&quot;);\r\n\t\tstartButton.setBounds(350, 400, 100, 50);\r\n\t\tstartButton.setFocusable(false);\r\n\t\tstartButton.setBackground(values.black);\r\n\t\tstartButton.setForeground(values.white);\r\n\t\tstartButton.setFont(values.normalFont);\r\n\t\tstartButton.setFocusPainted(false);\r\n\t\tstartButton.addActionListener(manager);\r\n\t\tstartButton.setActionCommand(&quot;Start&quot;);\r\n\t\t\r\n\t\ttitleLabel.setText(&quot;Solo Level&quot;);\r\n\t\ttitleLabel.setBounds(200, 100, 600, 100);\r\n\t\ttitleLabel.setFont(values.titleFont);\r\n\t\ttitleLabel.setForeground(values.white);\r\n\t\ttitleLabel.setBackground(values.black);\r\n\t\t\r\n\t\t//Add everything to Main Panel\r\n\t\tmainPanel.add(titleLabel);\r\n\t\tmainPanel.add(startButton);\r\n\t}\r\n\t\r\n\tpublic JPanel mainPanel()\r\n\t{\r\n\t\treturn mainPanel;\r\n\t}\r\n}\r\n\r\n// Class to control buttons and change panels\r\npublic class Manager implements ActionListener\r\n{\r\n\tString choice;\r\n\tMainPanel mp;\r\n\tGamePanel gp;\r\n\r\n\tpublic void actionPerformed(ActionEvent e)\r\n\t{\r\n\t\tchoice = e.getActionCommand();\r\n\t\t\r\n\t\tswitch(choice)\r\n\t\t{\r\n\t\t\tcase &quot;Start&quot; :\r\n\t\t\t\tchangeMainPanel();\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;next&quot; : \r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;left&quot; : \r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;right&quot; :\r\n\t\t\t\tbreak;\r\n\t\t} \r\n\t}\r\n\t\r\n\tpublic void changeMainPanel()\r\n\t{\r\n\t\tmp.mainPanel.setVisible(false);\r\n\t\tgp.gamePanel.setVisible(true);\r\n\t}\r\n}\r\n\r\n// Game Panel not working\r\npublic class GamePanel\r\n{\r\n\tJPanel gamePanel;\r\n\tCommon values;\r\n\tJLabel test;\r\n\t\r\n\tpublic GamePanel()\r\n\t{\r\n\t\tgamePanel = new JPanel();\r\n\t\tvalues = new Common();\r\n\t\ttest = new JLabel();\r\n\t}\r\n\t\r\n\tpublic void createGamePanel()\r\n\t{\r\n\t\tgamePanel.setBounds(0, 0, values.width, values.height);\r\n\t\ttest.setText(&quot;This is a test&quot;);\r\n\t\ttest.setBounds(100, 100, 250, 250);\r\n\t\tgamePanel.add(test);\r\n\t}\r\n}","title":"How to use buttons in java","body":"<p>I am new to programming just picked up for the last six months and have been on and off. My question is how do I get my button to take me to my next panel to show my game panel from my main panel. I have a switch case which should check for my value of my button which I set to start when clicked. But for some reason I am not understanding what I am doing wrong.</p>\n<p>I am at lost and just need some help really picking up on my mistake that I am making and how to improve. Each of these class are different files.</p>\n<pre><code>// Just to start game and nothing else\npublic class Starter\n{\n    public static void main(String[] args)\n    {\n        Window window = new Window();\n        window.createWindow();\n    }\n}\n\n// Has values that can be used for all classes\npublic class Common\n{\n    int width, height;\n    Font titleFont;\n    Font normalFont;\n    Color white;\n    Color black;\n    \n    public Common()\n    {\n        width = 800;\n        height = 600;\n        titleFont = new Font(&quot;Time New Roman&quot;, Font.PLAIN, 90);\n        normalFont = new Font(&quot;Time New Roman&quot;, Font.PLAIN, 26);\n        white = Color.white;\n        black = Color.black;\n    }\n}\n\n//Class to create just Frame and add to frame\npublic class Window\n{\n    JFrame window;\n    String title;\n    MainPanel mainPanel;\n    Common values;\n    \n    public Window()\n    {\n        window = new JFrame();\n        title = &quot;Game&quot;;\n        mainPanel = new MainPanel();\n        values = new Common();\n    }\n    \n    public void createWindow()\n    {\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        window.setTitle(title);\n        window.setSize(values.width, values.height);\n        window.setLayout(null);\n        window.setLocationRelativeTo(null);\n        \n        window.add(mainPanel.mainPanel());\n        mainPanel.createMainPanel();\n        \n        window.setVisible(true);    \n    }\n}\n\n//Main Menu Panel\npublic class MainPanel\n{\n    JPanel mainPanel;\n    Common values;\n    JButton startButton;\n    JLabel titleLabel;\n    Manager manager;\n    \n    public MainPanel()\n    {\n        mainPanel = new JPanel();\n        values = new Common();\n        startButton = new JButton();\n        titleLabel = new JLabel();\n        manager = new Manager();\n    }\n    \n    public void createMainPanel()\n    {\n        mainPanel.setBounds(0, 0, values.width, values.height);\n        mainPanel.setBackground(Color.black);\n        mainPanel.setLayout(null);\n        \n        startButton.setText(&quot;Start&quot;);\n        startButton.setBounds(350, 400, 100, 50);\n        startButton.setFocusable(false);\n        startButton.setBackground(values.black);\n        startButton.setForeground(values.white);\n        startButton.setFont(values.normalFont);\n        startButton.setFocusPainted(false);\n        startButton.addActionListener(manager);\n        startButton.setActionCommand(&quot;Start&quot;);\n        \n        titleLabel.setText(&quot;Solo Level&quot;);\n        titleLabel.setBounds(200, 100, 600, 100);\n        titleLabel.setFont(values.titleFont);\n        titleLabel.setForeground(values.white);\n        titleLabel.setBackground(values.black);\n        \n        //Add everything to Main Panel\n        mainPanel.add(titleLabel);\n        mainPanel.add(startButton);\n    }\n    \n    public JPanel mainPanel()\n    {\n        return mainPanel;\n    }\n}\n\n// Class to control buttons and change panels\npublic class Manager implements ActionListener\n{\n    String choice;\n    MainPanel mp;\n    GamePanel gp;\n\n    public void actionPerformed(ActionEvent e)\n    {\n        choice = e.getActionCommand();\n        \n        switch(choice)\n        {\n            case &quot;Start&quot; :\n                changeMainPanel();\n                break;\n            case &quot;next&quot; : \n                break;\n            case &quot;left&quot; : \n                break;\n            case &quot;right&quot; :\n                break;\n        } \n    }\n    \n    public void changeMainPanel()\n    {\n        mp.mainPanel.setVisible(false);\n        gp.gamePanel.setVisible(true);\n    }\n}\n\n// Game Panel not working\npublic class GamePanel\n{\n    JPanel gamePanel;\n    Common values;\n    JLabel test;\n    \n    public GamePanel()\n    {\n        gamePanel = new JPanel();\n        values = new Common();\n        test = new JLabel();\n    }\n    \n    public void createGamePanel()\n    {\n        gamePanel.setBounds(0, 0, values.width, values.height);\n        test.setText(&quot;This is a test&quot;);\n        test.setBounds(100, 100, 250, 250);\n        gamePanel.add(test);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-mvc"],"owner":{"account_id":27971586,"reputation":49,"user_id":21361197,"display_name":"xdd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682715879,"creation_date":1681485813,"question_id":76016663,"body_markdown":"     @ModelAttribute and Session\r\nwhen i was searching about model Attribute i found tutorials that store entire Object like user but i    can do it also with Session to identify the User\r\n\r\nwhat i want to know is what is the difference between Session and ModelAttribute and when to use Session and when to Use ModelAttribute`","title":"what is the difference between Session and ModelAttribute in spring mvc","body":"<pre><code> @ModelAttribute and Session\n</code></pre>\n<p>when i was searching about model Attribute i found tutorials that store entire Object like user but i    can do it also with Session to identify the User</p>\n<p>what i want to know is what is the difference between Session and ModelAttribute and when to use Session and when to Use ModelAttribute`</p>\n"},{"tags":["java","jvm","websphere"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":6,"creation_date":1682596063,"post_id":76120002,"comment_id":134242534,"body_markdown":"February 2002. That software is old enough to vote. And is totally unsupported at this time.","body":"February 2002. That software is old enough to vote. And is totally unsupported at this time."},{"owner":{"account_id":213468,"reputation":103487,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682597945,"post_id":76120002,"comment_id":134242982,"body_markdown":"I think replacing it with the cacerts of a recent Java version might work, though I&#39;m not sure if the file format changed between then and now.","body":"I think replacing it with the cacerts of a recent Java version might work, though I&#39;m not sure if the file format changed between then and now."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1682598049,"post_id":76120002,"comment_id":134243012,"body_markdown":"There is not enough context in the question to understand if the issue is on the server side or a custom keystone in the application.","body":"There is not enough context in the question to understand if the issue is on the server side or a custom keystone in the application."}],"owner":{"account_id":28384358,"reputation":21,"user_id":21711051,"display_name":"Ben Wang"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1682715011,"creation_date":1682595921,"question_id":76120002,"body_markdown":"I think I may have met an &quot;IBM java 1.4.2 certificate expired&quot; issue.\r\n\r\nThe app, which calls IBM java 1.4.2, and then connects the server, throws the error:\r\n\r\n```\r\njavax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_expired.\r\n```\r\n\r\nIn the client, I into `/usr/java142/lib/security/`.\r\n\r\nI use `keytool -list -v -keystore cacerts` to check the `cacerts` file.\r\n\r\nBut I do not know how to update this `cacerts`? Or is there any way I can update it?\r\n\r\nFor the server, it is a black box, which I have no rights into it.","title":"IBM java/IBM JVM 1.4.2 certificate expired, can I update it without server?","body":"<p>I think I may have met an &quot;IBM java 1.4.2 certificate expired&quot; issue.</p>\n<p>The app, which calls IBM java 1.4.2, and then connects the server, throws the error:</p>\n<pre><code>javax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_expired.\n</code></pre>\n<p>In the client, I into <code>/usr/java142/lib/security/</code>.</p>\n<p>I use <code>keytool -list -v -keystore cacerts</code> to check the <code>cacerts</code> file.</p>\n<p>But I do not know how to update this <code>cacerts</code>? Or is there any way I can update it?</p>\n<p>For the server, it is a black box, which I have no rights into it.</p>\n"},{"tags":["java","ssl","rally","apache-httpclient-4.x","sslhandshakeexception"],"comments":[{"owner":{"account_id":376614,"reputation":8400,"user_id":728184,"display_name":"Kyle Morse"},"score":0,"creation_date":1461637456,"post_id":36851534,"comment_id":61277157,"body_markdown":"Is there a reason you can&#39;t use the Rally Rest Toolkit for Java? https://github.com/RallyTools/RallyRestToolkitForJava","body":"Is there a reason you can&#39;t use the Rally Rest Toolkit for Java? <a href=\"https://github.com/RallyTools/RallyRestToolkitForJava\" rel=\"nofollow noreferrer\">github.com/RallyTools/RallyRestToolkitForJava</a>"},{"owner":{"account_id":4785622,"reputation":79,"user_id":3866223,"accept_rate":80,"display_name":"Tontodoin"},"score":0,"creation_date":1461683887,"post_id":36851534,"comment_id":61305410,"body_markdown":"I&#39;m using the Rally Rest Toolkit for java. The issue arises in the query function of the api. The get this SSLhandshakeException at this stage. I can temporarily tackle this issue by adding the certificate in trusted keystore but the validity is set to a small range.","body":"I&#39;m using the Rally Rest Toolkit for java. The issue arises in the query function of the api. The get this SSLhandshakeException at this stage. I can temporarily tackle this issue by adding the certificate in trusted keystore but the validity is set to a small range."}],"answers":[{"tags":[],"owner":{"account_id":2807640,"reputation":5946,"user_id":2414556,"display_name":"nickm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461692264,"creation_date":1461692264,"answer_id":36871986,"question_id":36851534,"body_markdown":"You wrote that you want to find a way to allow all certificates, and use HttpClient with Rally Rest Toolkit for Java. Here is how you can access HttpClient from restApi:\r\n\r\n    HttpClient client = restApi.getClient();\r\n\r\nHere is an example that trusts all certs, e.g. self-signed certs:\r\n\r\n    public class ConnnectionTestWithHTTPClient {\r\n    \r\n    \tpublic static void main(String[] args) throws URISyntaxException, IOException {\r\n    \t\t\r\n    \r\n    \t    String host = &quot;https://rally1.rallydev.com&quot;;\r\n    \t    String apiKey = &quot;_abc123&quot;;\r\n    \t    String applicationName = &quot;Connnection Test With HTTPClient&quot;;\r\n    \t    RallyRestApi restApi = new RallyRestApi(new URI(host),apiKey);\r\n            restApi.setApplicationName(applicationName); \r\n            //restApi.setProxy(new URI(&quot;http://myproxy.mycompany.com&quot;), &quot;MyProxyUsername&quot;, &quot;MyProxyPassword&quot;);  //YOUR PROXY SETTINGS HERE\r\n            HttpClient client = restApi.getClient();\r\n            try {\r\n            \tSSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy() {\r\n                    public boolean isTrusted(X509Certificate[] certificate, String authType)\r\n                        throws CertificateException {\r\n                        //trust all certs\r\n                        return true;\r\n                    }\r\n                }, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n                client.getConnectionManager().getSchemeRegistry().register(new Scheme(&quot;https&quot;, 443, sf));\r\n                \r\n            \tString workspaceRef = &quot;/workspace/12345&quot;; \r\n            \tGetRequest getRequest = new GetRequest(workspaceRef);\r\n            \tGetResponse getResponse = restApi.get(getRequest);\r\n            \tSystem.out.println(getResponse.getObject());\r\n            } catch (Exception e) {\r\n            \tSystem.out.println(e);\r\n            } finally {\r\n                restApi.close();\r\n            }   \r\n    \t} \r\n    }","title":"SSLHandshakeException with Rally rest api","body":"<p>You wrote that you want to find a way to allow all certificates, and use HttpClient with Rally Rest Toolkit for Java. Here is how you can access HttpClient from restApi:</p>\n\n<pre><code>HttpClient client = restApi.getClient();\n</code></pre>\n\n<p>Here is an example that trusts all certs, e.g. self-signed certs:</p>\n\n<pre><code>public class ConnnectionTestWithHTTPClient {\n\n    public static void main(String[] args) throws URISyntaxException, IOException {\n\n\n        String host = \"https://rally1.rallydev.com\";\n        String apiKey = \"_abc123\";\n        String applicationName = \"Connnection Test With HTTPClient\";\n        RallyRestApi restApi = new RallyRestApi(new URI(host),apiKey);\n        restApi.setApplicationName(applicationName); \n        //restApi.setProxy(new URI(\"http://myproxy.mycompany.com\"), \"MyProxyUsername\", \"MyProxyPassword\");  //YOUR PROXY SETTINGS HERE\n        HttpClient client = restApi.getClient();\n        try {\n            SSLSocketFactory sf = new SSLSocketFactory(new TrustStrategy() {\n                public boolean isTrusted(X509Certificate[] certificate, String authType)\n                    throws CertificateException {\n                    //trust all certs\n                    return true;\n                }\n            }, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n            client.getConnectionManager().getSchemeRegistry().register(new Scheme(\"https\", 443, sf));\n\n            String workspaceRef = \"/workspace/12345\"; \n            GetRequest getRequest = new GetRequest(workspaceRef);\n            GetResponse getResponse = restApi.get(getRequest);\n            System.out.println(getResponse.getObject());\n        } catch (Exception e) {\n            System.out.println(e);\n        } finally {\n            restApi.close();\n        }   \n    } \n}\n</code></pre>\n"}],"owner":{"account_id":4785622,"reputation":79,"user_id":3866223,"accept_rate":80,"display_name":"Tontodoin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":629,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36871986,"answer_count":1,"score":1,"last_activity_date":1682714834,"creation_date":1461620265,"question_id":36851534,"body_markdown":"The query function in the api is failing with the following exception:\r\n\r\n    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\nTo counter this exception, I manually downloaded the certificate and imported it to cacerts and everything works as excepted. But the validity duration of this certificate has been set to a few days making this solution nonviable. \r\n\r\nFor the test purpose, I have created a trust strategy to allow all certificates but I do not find a way to integrate it with Rest Api. I&#39;m using HttpClient 4.4.\r\n\r\nHow do I get past this issue? Thanks.\r\n","title":"SSLHandshakeException with Rally rest api","body":"<p>The query function in the api is failing with the following exception:</p>\n\n<pre><code>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n\n<p>To counter this exception, I manually downloaded the certificate and imported it to cacerts and everything works as excepted. But the validity duration of this certificate has been set to a few days making this solution nonviable. </p>\n\n<p>For the test purpose, I have created a trust strategy to allow all certificates but I do not find a way to integrate it with Rest Api. I'm using HttpClient 4.4.</p>\n\n<p>How do I get past this issue? Thanks.</p>\n"},{"tags":["java","spring","spring-boot","liquibase"],"comments":[{"owner":{"account_id":7723297,"reputation":1774,"user_id":5848801,"accept_rate":75,"display_name":"Simon Ludwig"},"score":0,"creation_date":1480200825,"post_id":35997898,"comment_id":68866712,"body_markdown":"I had the same problem and posted my answer here: http://stackoverflow.com/questions/40210247/how-to-drop-in-memory-h2db-between-spring-integration-tests/40805764#40805764","body":"I had the same problem and posted my answer here: <a href=\"http://stackoverflow.com/questions/40210247/how-to-drop-in-memory-h2db-between-spring-integration-tests/40805764#40805764\" title=\"how to drop in memory h2db between spring integration tests\">stackoverflow.com/questions/40210247/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1708812,"reputation":790,"user_id":1567291,"accept_rate":77,"display_name":"bytor99999"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475090089,"creation_date":1475090089,"answer_id":39755881,"question_id":35997898,"body_markdown":"Not sure if this completely answers your question. There is another property liquibase.default-schema=schemaNameToCreate\r\n\r\nBut even with that I was never able to get it to create the schema from scratch. ","title":"Spring Boot: How to setup test data with liquibase in unit test","body":"<p>Not sure if this completely answers your question. There is another property liquibase.default-schema=schemaNameToCreate</p>\n\n<p>But even with that I was never able to get it to create the schema from scratch. </p>\n"},{"tags":[],"owner":{"account_id":1250945,"reputation":4498,"user_id":1221807,"accept_rate":85,"display_name":"MemLeak"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1579708914,"creation_date":1525613441,"answer_id":50200248,"question_id":35997898,"body_markdown":"There is a `spring.liquibase.dropFirst` config property. Maybe this is what you&#39;re looking for? ","title":"Spring Boot: How to setup test data with liquibase in unit test","body":"<p>There is a <code>spring.liquibase.dropFirst</code> config property. Maybe this is what you're looking for? </p>\n"},{"tags":[],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682714220,"creation_date":1682714220,"answer_id":76133123,"question_id":35997898,"body_markdown":"7 years later I&#39;m maybe a bit smarter to answer my own question. Spring uses a test context cache between tests. That is, if the spring context remains the same between tests, the context is restored from the cache. This is for speeding up the tests. If you change the data, Spring doesn&#39;t notice and restores the context from the cache, even though the requirements have changed. There are several ways to fix this: \r\n- use @DirtiesContext \r\n- use @Transactional on the test \r\n- delete and setup all data &quot;manually&quot; in @BeforeEach","title":"Spring Boot: How to setup test data with liquibase in unit test","body":"<p>7 years later I'm maybe a bit smarter to answer my own question. Spring uses a test context cache between tests. That is, if the spring context remains the same between tests, the context is restored from the cache. This is for speeding up the tests. If you change the data, Spring doesn't notice and restores the context from the cache, even though the requirements have changed. There are several ways to fix this:</p>\n<ul>\n<li>use @DirtiesContext</li>\n<li>use @Transactional on the test</li>\n<li>delete and setup all data &quot;manually&quot; in @BeforeEach</li>\n</ul>\n"}],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23126,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":76133123,"answer_count":3,"score":27,"last_activity_date":1682714220,"creation_date":1457988921,"question_id":35997898,"body_markdown":"I&#39;m trying to setup the database schema and some test data with liquibase for some tests. Each test has a separate changelog which setup the schema and some specific data for the test.\r\n\r\nIn order to make my tests working, I need to drop the schema before each test and fill it with new test data. However, it seems that this is not working because some tests are failing because the old test data is still available. I think something with my configuration is not correct. How can I force liquibase to drop the schema before each test?\r\n\r\nMy tests look as following:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringApplicationConfiguration(classes = MyTestConfig.class)\r\n    @TestPropertySource(properties = &quot;liquibase.change-log=classpath:changelog/schema-with-testdata.xml&quot;)\r\n    public class MyRepositoryTest {\r\n\r\nThe config for the tests looks as follows:\r\n\r\n    @SpringApplicationConfiguration\r\n    @Configuration\r\n    @EnableAutoConfiguration\r\n    @ComponentScan(&quot;com.mypackage&quot;)\r\n    @EntityScan(basePackages = { &quot;com.mypackage.domain&quot; })\r\n    @EnableJpaRepositories(basePackages = { &quot;com.mypackage.domain&quot;, &quot;com.mypackage.infra.persistence&quot; })\r\n    public class MyTestConfig {\r\n\r\nAnd the application.properties under src/main/test/resources is \r\n\r\n    liquibase.drop-first=true\r\n    spring.jpa.hibernate.ddl-auto=none","title":"Spring Boot: How to setup test data with liquibase in unit test","body":"<p>I'm trying to setup the database schema and some test data with liquibase for some tests. Each test has a separate changelog which setup the schema and some specific data for the test.</p>\n\n<p>In order to make my tests working, I need to drop the schema before each test and fill it with new test data. However, it seems that this is not working because some tests are failing because the old test data is still available. I think something with my configuration is not correct. How can I force liquibase to drop the schema before each test?</p>\n\n<p>My tests look as following:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringApplicationConfiguration(classes = MyTestConfig.class)\n@TestPropertySource(properties = \"liquibase.change-log=classpath:changelog/schema-with-testdata.xml\")\npublic class MyRepositoryTest {\n</code></pre>\n\n<p>The config for the tests looks as follows:</p>\n\n<pre><code>@SpringApplicationConfiguration\n@Configuration\n@EnableAutoConfiguration\n@ComponentScan(\"com.mypackage\")\n@EntityScan(basePackages = { \"com.mypackage.domain\" })\n@EnableJpaRepositories(basePackages = { \"com.mypackage.domain\", \"com.mypackage.infra.persistence\" })\npublic class MyTestConfig {\n</code></pre>\n\n<p>And the application.properties under src/main/test/resources is </p>\n\n<pre><code>liquibase.drop-first=true\nspring.jpa.hibernate.ddl-auto=none\n</code></pre>\n"},{"tags":["java","android-studio","error-handling","compiler-errors","android-manifest"],"comments":[{"owner":{"account_id":3529755,"reputation":613,"user_id":2949696,"accept_rate":67,"display_name":"apex39"},"score":0,"creation_date":1644413761,"post_id":71044526,"comment_id":125599889,"body_markdown":"Please review your project dependencies if they contain legacy libraries","body":"Please review your project dependencies if they contain legacy libraries"}],"answers":[{"tags":[],"owner":{"account_id":14686445,"reputation":307,"user_id":10606297,"display_name":"JJ Smith"},"down_vote_count":2,"up_vote_count":31,"is_accepted":false,"score":29,"last_activity_date":1682713555,"creation_date":1645521815,"answer_id":71218726,"question_id":71044526,"body_markdown":"1. Comment this line in settings.gradle\r\n```\r\nrepositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n```    \r\n2. Add this in build.gradle (project level):\r\n```\r\nallprojects {\r\n   repositories {\r\n       google()\r\n       jcenter()\r\n       maven { url &quot;https://jitpack.io&quot; }\r\n   }\r\n}\r\n```\r\n3. Add in gradle.properties:\r\n```\r\nandroid.enableJetifier=true\r\nandroid.useAndroidX=true\r\n```","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<ol>\n<li>Comment this line in settings.gradle</li>\n</ol>\n<pre><code>repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n</code></pre>\n<ol start=\"2\">\n<li>Add this in build.gradle (project level):</li>\n</ol>\n<pre><code>allprojects {\n   repositories {\n       google()\n       jcenter()\n       maven { url &quot;https://jitpack.io&quot; }\n   }\n}\n</code></pre>\n<ol start=\"3\">\n<li>Add in gradle.properties:</li>\n</ol>\n<pre><code>android.enableJetifier=true\nandroid.useAndroidX=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4859445,"reputation":961,"user_id":3919531,"accept_rate":60,"display_name":"Damien"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652189061,"creation_date":1652189061,"answer_id":72187193,"question_id":71044526,"body_markdown":"My solution is simialar to @JJ Smith one. But I didn&#39;t do anything to `build.gradle` file. So:\r\n1. Comment this line in `setting.gradle`:\r\n\r\n```\r\nrepositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n```\r\n\r\n2. Make sure you have these 2 lines in `gradle.properties` (if not add them or change them to true):\r\n```\r\nandroid.enableJetifier=true\r\nandroid.useAndroidX=true\r\n```\r\n\r\n3. Sync gradle\r\n\r\nI **DID NOT** change the `build.gradle`(at project level) file. I report it here just for the sake of completeness:\r\n```\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n    }\r\n    dependencies {\r\n        //...\r\n    }\r\n}\r\n\r\n\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;7.2.0&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.2.0&#39; apply false\r\n    id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.6.21&#39; apply false\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<p>My solution is simialar to @JJ Smith one. But I didn't do anything to <code>build.gradle</code> file. So:</p>\n<ol>\n<li>Comment this line in <code>setting.gradle</code>:</li>\n</ol>\n<pre><code>repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n</code></pre>\n<ol start=\"2\">\n<li>Make sure you have these 2 lines in <code>gradle.properties</code> (if not add them or change them to true):</li>\n</ol>\n<pre><code>android.enableJetifier=true\nandroid.useAndroidX=true\n</code></pre>\n<ol start=\"3\">\n<li>Sync gradle</li>\n</ol>\n<p>I <strong>DID NOT</strong> change the <code>build.gradle</code>(at project level) file. I report it here just for the sake of completeness:</p>\n<pre><code>buildscript {\n    repositories {\n        google()\n    }\n    dependencies {\n        //...\n    }\n}\n\n\nplugins {\n    id 'com.android.application' version '7.2.0' apply false\n    id 'com.android.library' version '7.2.0' apply false\n    id 'org.jetbrains.kotlin.android' version '1.6.21' apply false\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23365040,"reputation":802,"user_id":17436751,"display_name":"Sayooj"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1657355750,"creation_date":1657351704,"answer_id":72919692,"question_id":71044526,"body_markdown":"Add these in gradle.properties:\r\n\r\n    android.enableJetifier=true\r\n    android.useAndroidX=true\r\n\r\nSync your `gradle` and Run the app. It worked fine for me and I didn&#39;t have to do the changes in `setting.gradle` and `build.gradle` (Project level) or any other files.","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<p>Add these in gradle.properties:</p>\n<pre><code>android.enableJetifier=true\nandroid.useAndroidX=true\n</code></pre>\n<p>Sync your <code>gradle</code> and Run the app. It worked fine for me and I didn't have to do the changes in <code>setting.gradle</code> and <code>build.gradle</code> (Project level) or any other files.</p>\n"},{"tags":[],"owner":{"account_id":22083723,"reputation":124,"user_id":16342910,"display_name":"Prasanna Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663930115,"creation_date":1663930115,"answer_id":73826607,"question_id":71044526,"body_markdown":"Check if you the following dependency:\r\n\r\n    implementation &#39;com.android.support:multidex:1.0.3&#39;\r\n\r\nIf you have it, just remove it.\r\nIt worked for me.","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<p>Check if you the following dependency:</p>\n<pre><code>implementation 'com.android.support:multidex:1.0.3'\n</code></pre>\n<p>If you have it, just remove it.\nIt worked for me.</p>\n"}],"owner":{"account_id":23435740,"reputation":479,"user_id":17493859,"display_name":"Arnav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35510,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":4,"score":21,"last_activity_date":1682713555,"creation_date":1644385392,"question_id":71044526,"body_markdown":"I am getting an warning in android studio when I run my app. the warning is-\r\n***Your project has set `android.useAndroidX=true`, but configuration `debugRuntimeClasspath` still contains legacy support libraries, which may cause runtime issues.***\r\nAnd a error-\r\n***Manifest merger failed with multiple errors, see logs***\r\nI checked my manifest file and there is no error in my manifest file. I tried debugging the app but it still doesn&#39;t fix. I am getting this after updating android studio from android studio arctic fox to android studio bumble bee which is recently released. I updated the gradle version tried cleaning project, invalidating caches but nothing worked. I increased the memory heap size and enabled multidex but still it is not fixed. Please help me out.\r\n","title":"Your project has set `android.useAndroidX=true` but configuration `debugRuntimeClasspath` still contains legacy support libraries","body":"<p>I am getting an warning in android studio when I run my app. the warning is-\n<em><strong>Your project has set <code>android.useAndroidX=true</code>, but configuration <code>debugRuntimeClasspath</code> still contains legacy support libraries, which may cause runtime issues.</strong></em>\nAnd a error-\n<em><strong>Manifest merger failed with multiple errors, see logs</strong></em>\nI checked my manifest file and there is no error in my manifest file. I tried debugging the app but it still doesn't fix. I am getting this after updating android studio from android studio arctic fox to android studio bumble bee which is recently released. I updated the gradle version tried cleaning project, invalidating caches but nothing worked. I increased the memory heap size and enabled multidex but still it is not fixed. Please help me out.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677780875,"creation_date":1677779590,"answer_id":75619156,"question_id":75607788,"body_markdown":"You are only searching for `id=2`, so `mode = incrementing` doesn&#39;t really make sense for that `query`, as it will always append `ORDER BY ID ASC` to the query. \r\n\r\nIf you always want to search for `id = 2`, and get constant updates for that row, then you probably want `mode = bulk`\r\n\r\nOr, at the very least, you cannot end the query with a semi-colon as `WHERE id &gt; -1 ORDER BY id ASC` is added with incrementing mode. ","title":"Kafka: Not able to run query using where clause in MySQL connector Kafka","body":"<p>You are only searching for <code>id=2</code>, so <code>mode = incrementing</code> doesn't really make sense for that <code>query</code>, as it will always append <code>ORDER BY ID ASC</code> to the query.</p>\n<p>If you always want to search for <code>id = 2</code>, and get constant updates for that row, then you probably want <code>mode = bulk</code></p>\n<p>Or, at the very least, you cannot end the query with a semi-colon as <code>WHERE id &gt; -1 ORDER BY id ASC</code> is added with incrementing mode.</p>\n"},{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677780094,"creation_date":1677780094,"answer_id":75619244,"question_id":75607788,"body_markdown":"Removed the semicolon from the query. Afterthat, it started working\r\n\r\nWorking code:\r\n\r\n    {\r\n      &quot;name&quot;: &quot;mysql-jdbc&quot;,\r\n      &quot;config&quot;: {\r\n        &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;,\r\n        &quot;connection.url&quot;  : &quot;jdbc:mysql://mysqldb:3306/silicon&quot;,\r\n        &quot;connection.user&quot; : &quot;root&quot;,\r\n        &quot;connection.password&quot; : &quot;root&quot;,\r\n        &quot;mode&quot;            : &quot;incrementing&quot;,\r\n        &quot;incrementing.column.name&quot;: &quot;id&quot;,\r\n        &quot;query&quot;: &quot;select * from (select * from credit_lines where id=2) test&quot;,\r\n        &quot;topic.prefix&quot;    : &quot;JDBC.test_db_test&quot;,\r\n        &quot;validate.non.null&quot;       : &quot;false&quot;,\r\n        &quot;poll.interval.ms&quot;        : &quot;1000&quot;\r\n      }\r\n    }","title":"Kafka: Not able to run query using where clause in MySQL connector Kafka","body":"<p>Removed the semicolon from the query. Afterthat, it started working</p>\n<p>Working code:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;mysql-jdbc&quot;,\n  &quot;config&quot;: {\n    &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;,\n    &quot;connection.url&quot;  : &quot;jdbc:mysql://mysqldb:3306/silicon&quot;,\n    &quot;connection.user&quot; : &quot;root&quot;,\n    &quot;connection.password&quot; : &quot;root&quot;,\n    &quot;mode&quot;            : &quot;incrementing&quot;,\n    &quot;incrementing.column.name&quot;: &quot;id&quot;,\n    &quot;query&quot;: &quot;select * from (select * from credit_lines where id=2) test&quot;,\n    &quot;topic.prefix&quot;    : &quot;JDBC.test_db_test&quot;,\n    &quot;validate.non.null&quot;       : &quot;false&quot;,\n    &quot;poll.interval.ms&quot;        : &quot;1000&quot;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":252,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75619156,"answer_count":2,"score":-1,"last_activity_date":1682712989,"creation_date":1677696521,"question_id":75607788,"body_markdown":"JSON file:\r\n\r\n&lt;!-- language: lang-json --&gt;\r\n\r\n    {\r\n      &quot;name&quot;: &quot;mysql-jdbc&quot;,\r\n      &quot;config&quot;: {\r\n        &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;,\r\n        &quot;connection.url&quot;  : &quot;jdbc:mysql://mysqldb:3306/silicon&quot;,\r\n        &quot;connection.user&quot; : &quot;root&quot;,\r\n        &quot;connection.password&quot; : &quot;root&quot;,\r\n        &quot;mode&quot;            : &quot;incrementing&quot;,\r\n        &quot;incrementing.column.name&quot;: &quot;id&quot;,\r\n        &quot;query&quot;: &quot;select * from (select * from credit_lines where id=2) test;&quot;,\r\n        &quot;topic.prefix&quot;    : &quot;JDBC.test_db_test&quot;,\r\n        &quot;validate.non.null&quot;       : &quot;false&quot;,\r\n        &quot;poll.interval.ms&quot;        : &quot;1000&quot;\r\n      }\r\n    }\r\n\r\n\r\nQuery in logs:\r\n\r\n    connect  |  (org.apache.kafka.connect.runtime.tracing.TracerConfig)\r\n    connect  | [2023-03-01 19:42:30,132] INFO Initializing: org.apache.kafka.connect.runtime.TransformationChain{} (org.apache.kafka.connect.runtime.Worker)\r\n    connect  | [2023-03-01 19:42:30,133] INFO [Worker clientId=connect-1, groupId=jdbc_source_connector] Finished starting connectors and tasks (org.apache.kafka.connect.runtime.distributed.DistributedHerder)\r\n    connect  | [2023-03-01 19:42:30,133] INFO Starting JDBC source task (io.confluent.connect.jdbc.source.JdbcSourceTask)\r\n    connect  | [2023-03-01 19:42:30,133] INFO JdbcSourceTaskConfig values: \r\n    connect  |      batch.max.rows = 100\r\n    connect  |      catalog.pattern = null\r\n    connect  |      connection.attempts = 3\r\n    connect  |      connection.backoff.ms = 10000\r\n    connect  |      connection.password = [hidden]\r\n    connect  |      connection.url = jdbc:mysql://mysqldb:3306/silicon\r\n    connect  |      connection.user = root\r\n    connect  |      db.timezone = UTC\r\n    connect  |      dialect.name = \r\n    connect  |      incrementing.column.name = id\r\n    connect  |      mode = incrementing\r\n    connect  |      numeric.mapping = null\r\n    connect  |      numeric.precision.mapping = false\r\n    connect  |      poll.interval.ms = 1000\r\n    connect  |      query = select * from (select * from credit_lines where id=2) test;\r\n    connect  |      query.retry.attempts = -1\r\n    connect  |      query.suffix = \r\n    connect  |      quote.sql.identifiers = ALWAYS\r\n    connect  |      schema.pattern = null\r\n    connect  |      table.blacklist = []\r\n    connect  |      table.monitoring.startup.polling.limit.ms = 10000\r\n    connect  |      table.poll.interval.ms = 60000\r\n    connect  |      table.types = [TABLE]\r\n    connect  |      table.whitelist = []\r\n    connect  |      tables = []\r\n    connect  |      timestamp.column.name = []\r\n    connect  |      timestamp.delay.interval.ms = 0\r\n    connect  |      timestamp.granularity = connect_logical\r\n    connect  |      timestamp.initial = null\r\n    connect  |      topic.prefix = JDBC.test_db_test\r\n    connect  |      transaction.isolation.mode = DEFAULT\r\n    connect  |      validate.non.null = false\r\n    connect  |  (io.confluent.connect.jdbc.source.JdbcSourceTaskConfig)\r\n\r\n\r\nError I am getting:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n     ERROR WorkerSourceTask{id=mysql-jdbc-0} Task threw an uncaught and unrecoverable exception. Task is being killed and will not recover until manually restarted (org.apache.kafka.connect.runtime.WorkerTask)\r\n    connect  | org.apache.kafka.connect.errors.ConnectException: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;WHERE `id` &gt; -1 ORDER BY `id` ASC&#39; at line 1\r\n    connect  |      at io.confluent.connect.jdbc.source.JdbcSourceTask.poll(JdbcSourceTask.java:452)\r\n    connect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.poll(AbstractWorkerSourceTask.java:470)\r\n    connect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.execute(AbstractWorkerSourceTask.java:349)\r\n    connect  |      at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:201)\r\n    connect  |      at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:256)\r\n    connect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.run(AbstractWorkerSourceTask.java:75)\r\n    connect  |      at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n    connect  |      at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    connect  |      at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    connect  |      at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    connect  |      at java.base/java.lang.Thread.run(Thread.java:829)\r\n    connect  | Caused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;WHERE `id` &gt; -1 ORDER BY `id` ASC&#39; at line 1\r\n","title":"Kafka: Not able to run query using where clause in MySQL connector Kafka","body":"<p>JSON file:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;name&quot;: &quot;mysql-jdbc&quot;,\n  &quot;config&quot;: {\n    &quot;connector.class&quot; : &quot;io.confluent.connect.jdbc.JdbcSourceConnector&quot;,\n    &quot;connection.url&quot;  : &quot;jdbc:mysql://mysqldb:3306/silicon&quot;,\n    &quot;connection.user&quot; : &quot;root&quot;,\n    &quot;connection.password&quot; : &quot;root&quot;,\n    &quot;mode&quot;            : &quot;incrementing&quot;,\n    &quot;incrementing.column.name&quot;: &quot;id&quot;,\n    &quot;query&quot;: &quot;select * from (select * from credit_lines where id=2) test;&quot;,\n    &quot;topic.prefix&quot;    : &quot;JDBC.test_db_test&quot;,\n    &quot;validate.non.null&quot;       : &quot;false&quot;,\n    &quot;poll.interval.ms&quot;        : &quot;1000&quot;\n  }\n}\n</code></pre>\n<p>Query in logs:</p>\n<pre><code>connect  |  (org.apache.kafka.connect.runtime.tracing.TracerConfig)\nconnect  | [2023-03-01 19:42:30,132] INFO Initializing: org.apache.kafka.connect.runtime.TransformationChain{} (org.apache.kafka.connect.runtime.Worker)\nconnect  | [2023-03-01 19:42:30,133] INFO [Worker clientId=connect-1, groupId=jdbc_source_connector] Finished starting connectors and tasks (org.apache.kafka.connect.runtime.distributed.DistributedHerder)\nconnect  | [2023-03-01 19:42:30,133] INFO Starting JDBC source task (io.confluent.connect.jdbc.source.JdbcSourceTask)\nconnect  | [2023-03-01 19:42:30,133] INFO JdbcSourceTaskConfig values: \nconnect  |      batch.max.rows = 100\nconnect  |      catalog.pattern = null\nconnect  |      connection.attempts = 3\nconnect  |      connection.backoff.ms = 10000\nconnect  |      connection.password = [hidden]\nconnect  |      connection.url = jdbc:mysql://mysqldb:3306/silicon\nconnect  |      connection.user = root\nconnect  |      db.timezone = UTC\nconnect  |      dialect.name = \nconnect  |      incrementing.column.name = id\nconnect  |      mode = incrementing\nconnect  |      numeric.mapping = null\nconnect  |      numeric.precision.mapping = false\nconnect  |      poll.interval.ms = 1000\nconnect  |      query = select * from (select * from credit_lines where id=2) test;\nconnect  |      query.retry.attempts = -1\nconnect  |      query.suffix = \nconnect  |      quote.sql.identifiers = ALWAYS\nconnect  |      schema.pattern = null\nconnect  |      table.blacklist = []\nconnect  |      table.monitoring.startup.polling.limit.ms = 10000\nconnect  |      table.poll.interval.ms = 60000\nconnect  |      table.types = [TABLE]\nconnect  |      table.whitelist = []\nconnect  |      tables = []\nconnect  |      timestamp.column.name = []\nconnect  |      timestamp.delay.interval.ms = 0\nconnect  |      timestamp.granularity = connect_logical\nconnect  |      timestamp.initial = null\nconnect  |      topic.prefix = JDBC.test_db_test\nconnect  |      transaction.isolation.mode = DEFAULT\nconnect  |      validate.non.null = false\nconnect  |  (io.confluent.connect.jdbc.source.JdbcSourceTaskConfig)\n</code></pre>\n<p>Error I am getting:</p>\n<pre class=\"lang-none prettyprint-override\"><code> ERROR WorkerSourceTask{id=mysql-jdbc-0} Task threw an uncaught and unrecoverable exception. Task is being killed and will not recover until manually restarted (org.apache.kafka.connect.runtime.WorkerTask)\nconnect  | org.apache.kafka.connect.errors.ConnectException: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `id` &gt; -1 ORDER BY `id` ASC' at line 1\nconnect  |      at io.confluent.connect.jdbc.source.JdbcSourceTask.poll(JdbcSourceTask.java:452)\nconnect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.poll(AbstractWorkerSourceTask.java:470)\nconnect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.execute(AbstractWorkerSourceTask.java:349)\nconnect  |      at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:201)\nconnect  |      at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:256)\nconnect  |      at org.apache.kafka.connect.runtime.AbstractWorkerSourceTask.run(AbstractWorkerSourceTask.java:75)\nconnect  |      at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\nconnect  |      at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nconnect  |      at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\nconnect  |      at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\nconnect  |      at java.base/java.lang.Thread.run(Thread.java:829)\nconnect  | Caused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `id` &gt; -1 ORDER BY `id` ASC' at line 1\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","testing","spring-rest"],"comments":[{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":0,"creation_date":1682585912,"post_id":76118452,"comment_id":134240298,"body_markdown":"That&#39;s because you have specified `@Column(nullable = false)` and the value when inserting is null, therefore, it will raise an exception. You can set a default value in the database engine or in the code","body":"That&#39;s because you have specified <code>@Column(nullable = false)</code> and the value when inserting is null, therefore, it will raise an exception. You can set a default value in the database engine or in the code"},{"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"score":0,"creation_date":1682589616,"post_id":76118452,"comment_id":134241110,"body_markdown":"I actually tried to set it to **true** as well, I get exactly the same error message. I don&#39;t understand the connection between `Client` and `Hairdresser` actually. If my hairdresser-related method failed, I would understand somehow. I get an error whilst running **shouldSaveClient()**","body":"I actually tried to set it to <b>true</b> as well, I get exactly the same error message. I don&#39;t understand the connection between <code>Client</code> and <code>Hairdresser</code> actually. If my hairdresser-related method failed, I would understand somehow. I get an error whilst running <b>shouldSaveClient()</b>"},{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":0,"creation_date":1682599057,"post_id":76118452,"comment_id":134243311,"body_markdown":"How does the table look like? Can you print the SQL to see what&#39;s happening?","body":"How does the table look like? Can you print the SQL to see what&#39;s happening?"},{"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"score":0,"creation_date":1682663653,"post_id":76118452,"comment_id":134254036,"body_markdown":"Sorry for the late response, I edited my question above, view of the database added.","body":"Sorry for the late response, I edited my question above, view of the database added."},{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":0,"creation_date":1682711438,"post_id":76118452,"comment_id":134264198,"body_markdown":"Please do not edit solution announcements into the question. Accept (i.e. click the &quot;tick&quot; next to it) one of the existing answer, if there are any. You can also create your own answer, and even accept it, if your solution is not yet covered by an existing answer. Compare https://stackoverflow.com/help/self-answer","body":"Please do not edit solution announcements into the question. Accept (i.e. click the &quot;tick&quot; next to it) one of the existing answer, if there are any. You can also create your own answer, and even accept it, if your solution is not yet covered by an existing answer. Compare <a href=\"https://stackoverflow.com/help/self-answer\">stackoverflow.com/help/self-answer</a>"}],"answers":[{"tags":[],"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682712986,"creation_date":1682712986,"answer_id":76133006,"question_id":76118452,"body_markdown":"There were reasons that `UserRepositoryTest` was failing. \r\n\r\n - *First*, `@Inheritance(strategy = InheritanceType.JOINED)` annotation should have added right above the `User` class as it is the base class for `Client` and `Hairdresser`. Here is the modified form of the **User** class:\r\n```\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\n@Inheritance(strategy = InheritanceType.JOINED)\r\npublic class User { ... }\r\n```\r\n\r\n - *Second*, there was a problem with my database as it was changed during the development and not updated. So, the solution was dropping the table, and it&#39;s done by adding **create-drop** to the configuration file, in my case it&#39;s *application.properties*:\r\n```\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\n```\r\n","title":"Facing an error whilst testing the repository in Spring Boot Application","body":"<p>There were reasons that <code>UserRepositoryTest</code> was failing.</p>\n<ul>\n<li><em>First</em>, <code>@Inheritance(strategy = InheritanceType.JOINED)</code> annotation should have added right above the <code>User</code> class as it is the base class for <code>Client</code> and <code>Hairdresser</code>. Here is the modified form of the <strong>User</strong> class:</li>\n</ul>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class User { ... }\n</code></pre>\n<ul>\n<li><em>Second</em>, there was a problem with my database as it was changed during the development and not updated. So, the solution was dropping the table, and it's done by adding <strong>create-drop</strong> to the configuration file, in my case it's <em>application.properties</em>:</li>\n</ul>\n<pre><code>spring.jpa.hibernate.ddl-auto=create-drop\n</code></pre>\n"}],"owner":{"account_id":27683932,"reputation":25,"user_id":21132073,"display_name":"EDOYou"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682712986,"creation_date":1682585052,"question_id":76118452,"body_markdown":"&lt;br&gt;&lt;br&gt;\r\nI am working on project using Spring Boot (version 3.0.5). I am trying to test `UserRepository` if my `Client` and `Hairdresser`(which are the children of the `User` class) are saved fine in the repo. However, I get an error whilst trying to save the `Client`, `Hairdresser` works fine.&lt;br&gt;&lt;br&gt;\r\n\r\n----------------------------------------------------------\r\n\r\n**UserRepositoryTest.java**:\r\n\r\n\r\n```\r\npackage com.edoyou.k2sbeauty.repositories;\r\n\r\nimport com.edoyou.k2sbeauty.entities.model.Client;\r\nimport com.edoyou.k2sbeauty.entities.model.Hairdresser;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.test.context.TestPropertySource;\r\n\r\nimport java.time.LocalDateTime;\r\n\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\n\r\n@DataJpaTest\r\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\r\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\npublic class UserRepositoryTest {\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    private Client client;\r\n    private Hairdresser hairdresser;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        client = new Client();\r\n        client.setFirstName(&quot;Barbara&quot;);\r\n        client.setLastName(&quot;O&#39;Conner&quot;);\r\n        client.setEmail(&quot;myemail@gmail.com&quot;);\r\n        client.setPassword(&quot;password&quot;);\r\n        client.setPhone(&quot;36707733373&quot;);\r\n        client.setCreatedAt(LocalDateTime.now());\r\n        client.setUpdatedAt(LocalDateTime.now());\r\n\r\n        hairdresser = new Hairdresser();\r\n        hairdresser.setFirstName(&quot;Jane&quot;);\r\n        hairdresser.setLastName(&quot;Doe&quot;);\r\n        hairdresser.setEmail(&quot;jane.doe@gmail.com&quot;);\r\n        hairdresser.setPassword(&quot;password&quot;);\r\n        hairdresser.setPhone(&quot;36707733444&quot;);\r\n        hairdresser.setCreatedAt(LocalDateTime.now());\r\n        hairdresser.setUpdatedAt(LocalDateTime.now());\r\n        hairdresser.setSpecialization(&quot;Hairstyling&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void shouldSaveClient() {\r\n        Client savedClient = userRepository.save(client);\r\n        assertThat(savedClient).isNotNull();\r\n        assertThat(savedClient.getId()).isNotNull();\r\n    }\r\n\r\n    @Test\r\n    public void shouldSaveHairdresser() {\r\n        Hairdresser savedHairdresser = userRepository.save(hairdresser);\r\n        assertThat(savedHairdresser).isNotNull();\r\n        assertThat(savedHairdresser.getId()).isNotNull();\r\n    }\r\n}\r\n```\r\n\r\n*shouldSaveHairdresser()* test is fine, *shouldSaveClient()* test method fails.&lt;br&gt;&lt;br&gt;\r\n\r\n**User.java**:\r\n\r\n\r\n```\r\npackage com.edoyou.k2sbeauty.entities.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport java.time.LocalDateTime;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private Long id;\r\n\r\n  @Column(nullable = false)\r\n  private String firstName;\r\n\r\n  @Column(nullable = false)\r\n  private String lastName;\r\n\r\n  @Column(nullable = false, unique = true)\r\n  private String email;\r\n\r\n  @Column(nullable = false)\r\n  private String password;\r\n\r\n  @Column(nullable = false)\r\n  private String phone;\r\n\r\n  @Column(nullable = false)\r\n  private LocalDateTime createdAt;\r\n\r\n  @Column(nullable = false)\r\n  private LocalDateTime updatedAt;\r\n\r\n  @ManyToMany(fetch = FetchType.LAZY)\r\n  @JoinTable(name = &quot;user_roles&quot;,\r\n      joinColumns = @JoinColumn(name = &quot;user_id&quot;),\r\n      inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n  private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n\r\n  public void setId(Long id) {\r\n    this.id = id;\r\n  }\r\n\r\n  public void setFirstName(String firstName) {\r\n    this.firstName = firstName;\r\n  }\r\n\r\n  public void setLastName(String lastName) {\r\n    this.lastName = lastName;\r\n  }\r\n\r\n  public void setEmail(String email) {\r\n    this.email = email;\r\n  }\r\n\r\n  public void setPassword(String password) {\r\n    this.password = password;\r\n  }\r\n\r\n  public void setPhone(String phone) {\r\n    this.phone = phone;\r\n  }\r\n\r\n  public void setCreatedAt(LocalDateTime createdAt) {\r\n    this.createdAt = createdAt;\r\n  }\r\n\r\n  public void setUpdatedAt(LocalDateTime updatedAt) {\r\n    this.updatedAt = updatedAt;\r\n  }\r\n\r\n  public void setRoles(Set&lt;Role&gt; roles) {\r\n    this.roles = roles;\r\n  }\r\n\r\n  public Long getId() {\r\n    return id;\r\n  }\r\n\r\n  public String getFirstName() {\r\n    return firstName;\r\n  }\r\n\r\n  public String getLastName() {\r\n    return lastName;\r\n  }\r\n\r\n  public String getEmail() {\r\n    return email;\r\n  }\r\n\r\n  public String getPassword() {\r\n    return password;\r\n  }\r\n\r\n  public String getPhone() {\r\n    return phone;\r\n  }\r\n\r\n  public LocalDateTime getCreatedAt() {\r\n    return createdAt;\r\n  }\r\n\r\n  public LocalDateTime getUpdatedAt() {\r\n    return updatedAt;\r\n  }\r\n\r\n  public Set&lt;Role&gt; getRoles() {\r\n    return roles;\r\n  }\r\n}\r\n```\r\n\r\n**Hairdresser.java**:\r\n\r\n\r\n```\r\npackage com.edoyou.k2sbeauty.entities.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@Table(name = &quot;hairdressers&quot;)\r\npublic class Hairdresser extends User {\r\n  @Column(nullable = false)\r\n  private String specialization;\r\n\r\n  @OneToMany(mappedBy = &quot;hairdresser&quot;)\r\n  private Set&lt;Appointment&gt; appointments = new HashSet&lt;&gt;();\r\n\r\n  public void setSpecialization(String specialization) {\r\n    this.specialization = specialization;\r\n  }\r\n\r\n  public void setAppointments(Set&lt;Appointment&gt; appointments) {\r\n    this.appointments = appointments;\r\n  }\r\n\r\n  public String getSpecialization() {\r\n    return specialization;\r\n  }\r\n\r\n  public Set&lt;Appointment&gt; getAppointments() {\r\n    return appointments;\r\n  }\r\n}\r\n```\r\n\r\n**Client.java**:\r\n\r\n\r\n```\r\npackage com.edoyou.k2sbeauty.entities.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@Table(name = &quot;clients&quot;)\r\npublic class Client extends User {\r\n  @OneToMany(mappedBy = &quot;client&quot;)\r\n  private Set&lt;Appointment&gt; appointments = new HashSet&lt;&gt;();\r\n\r\n  public void setAppointments(Set&lt;Appointment&gt; appointments) {\r\n    this.appointments = appointments;\r\n  }\r\n\r\n  public Set&lt;Appointment&gt; getAppointments() {\r\n    return appointments;\r\n  }\r\n}\r\n```\r\n\r\n# ERROR:\r\n```\r\n2023-04-27 10:20:42.145 ERROR 43965 --- [main] o.h.e.j.s.SqlExceptionHelper             : Field &#39;specialization&#39; doesn&#39;t have a default value\r\n\r\n```\r\n--------------------------------------------------\r\n\r\n*Here is the full view of the database tables:*&lt;br&gt;&lt;br&gt;\r\n[![---][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UUtP7.png","title":"Facing an error whilst testing the repository in Spring Boot Application","body":"<p><br><br>\nI am working on project using Spring Boot (version 3.0.5). I am trying to test <code>UserRepository</code> if my <code>Client</code> and <code>Hairdresser</code>(which are the children of the <code>User</code> class) are saved fine in the repo. However, I get an error whilst trying to save the <code>Client</code>, <code>Hairdresser</code> works fine.<br><br></p>\n<hr />\n<p><strong>UserRepositoryTest.java</strong>:</p>\n<pre><code>package com.edoyou.k2sbeauty.repositories;\n\nimport com.edoyou.k2sbeauty.entities.model.Client;\nimport com.edoyou.k2sbeauty.entities.model.Hairdresser;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.test.context.TestPropertySource;\n\nimport java.time.LocalDateTime;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\npublic class UserRepositoryTest {\n    @Autowired\n    private UserRepository userRepository;\n    private Client client;\n    private Hairdresser hairdresser;\n\n    @BeforeEach\n    void setUp() {\n        client = new Client();\n        client.setFirstName(&quot;Barbara&quot;);\n        client.setLastName(&quot;O'Conner&quot;);\n        client.setEmail(&quot;myemail@gmail.com&quot;);\n        client.setPassword(&quot;password&quot;);\n        client.setPhone(&quot;36707733373&quot;);\n        client.setCreatedAt(LocalDateTime.now());\n        client.setUpdatedAt(LocalDateTime.now());\n\n        hairdresser = new Hairdresser();\n        hairdresser.setFirstName(&quot;Jane&quot;);\n        hairdresser.setLastName(&quot;Doe&quot;);\n        hairdresser.setEmail(&quot;jane.doe@gmail.com&quot;);\n        hairdresser.setPassword(&quot;password&quot;);\n        hairdresser.setPhone(&quot;36707733444&quot;);\n        hairdresser.setCreatedAt(LocalDateTime.now());\n        hairdresser.setUpdatedAt(LocalDateTime.now());\n        hairdresser.setSpecialization(&quot;Hairstyling&quot;);\n    }\n\n    @Test\n    public void shouldSaveClient() {\n        Client savedClient = userRepository.save(client);\n        assertThat(savedClient).isNotNull();\n        assertThat(savedClient.getId()).isNotNull();\n    }\n\n    @Test\n    public void shouldSaveHairdresser() {\n        Hairdresser savedHairdresser = userRepository.save(hairdresser);\n        assertThat(savedHairdresser).isNotNull();\n        assertThat(savedHairdresser.getId()).isNotNull();\n    }\n}\n</code></pre>\n<p><em>shouldSaveHairdresser()</em> test is fine, <em>shouldSaveClient()</em> test method fails.<br><br></p>\n<p><strong>User.java</strong>:</p>\n<pre><code>package com.edoyou.k2sbeauty.entities.model;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDateTime;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n\n  @Column(nullable = false)\n  private String firstName;\n\n  @Column(nullable = false)\n  private String lastName;\n\n  @Column(nullable = false, unique = true)\n  private String email;\n\n  @Column(nullable = false)\n  private String password;\n\n  @Column(nullable = false)\n  private String phone;\n\n  @Column(nullable = false)\n  private LocalDateTime createdAt;\n\n  @Column(nullable = false)\n  private LocalDateTime updatedAt;\n\n  @ManyToMany(fetch = FetchType.LAZY)\n  @JoinTable(name = &quot;user_roles&quot;,\n      joinColumns = @JoinColumn(name = &quot;user_id&quot;),\n      inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\n  private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n\n  public void setId(Long id) {\n    this.id = id;\n  }\n\n  public void setFirstName(String firstName) {\n    this.firstName = firstName;\n  }\n\n  public void setLastName(String lastName) {\n    this.lastName = lastName;\n  }\n\n  public void setEmail(String email) {\n    this.email = email;\n  }\n\n  public void setPassword(String password) {\n    this.password = password;\n  }\n\n  public void setPhone(String phone) {\n    this.phone = phone;\n  }\n\n  public void setCreatedAt(LocalDateTime createdAt) {\n    this.createdAt = createdAt;\n  }\n\n  public void setUpdatedAt(LocalDateTime updatedAt) {\n    this.updatedAt = updatedAt;\n  }\n\n  public void setRoles(Set&lt;Role&gt; roles) {\n    this.roles = roles;\n  }\n\n  public Long getId() {\n    return id;\n  }\n\n  public String getFirstName() {\n    return firstName;\n  }\n\n  public String getLastName() {\n    return lastName;\n  }\n\n  public String getEmail() {\n    return email;\n  }\n\n  public String getPassword() {\n    return password;\n  }\n\n  public String getPhone() {\n    return phone;\n  }\n\n  public LocalDateTime getCreatedAt() {\n    return createdAt;\n  }\n\n  public LocalDateTime getUpdatedAt() {\n    return updatedAt;\n  }\n\n  public Set&lt;Role&gt; getRoles() {\n    return roles;\n  }\n}\n</code></pre>\n<p><strong>Hairdresser.java</strong>:</p>\n<pre><code>package com.edoyou.k2sbeauty.entities.model;\n\nimport jakarta.persistence.*;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Entity\n@Table(name = &quot;hairdressers&quot;)\npublic class Hairdresser extends User {\n  @Column(nullable = false)\n  private String specialization;\n\n  @OneToMany(mappedBy = &quot;hairdresser&quot;)\n  private Set&lt;Appointment&gt; appointments = new HashSet&lt;&gt;();\n\n  public void setSpecialization(String specialization) {\n    this.specialization = specialization;\n  }\n\n  public void setAppointments(Set&lt;Appointment&gt; appointments) {\n    this.appointments = appointments;\n  }\n\n  public String getSpecialization() {\n    return specialization;\n  }\n\n  public Set&lt;Appointment&gt; getAppointments() {\n    return appointments;\n  }\n}\n</code></pre>\n<p><strong>Client.java</strong>:</p>\n<pre><code>package com.edoyou.k2sbeauty.entities.model;\n\nimport jakarta.persistence.*;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Entity\n@Table(name = &quot;clients&quot;)\npublic class Client extends User {\n  @OneToMany(mappedBy = &quot;client&quot;)\n  private Set&lt;Appointment&gt; appointments = new HashSet&lt;&gt;();\n\n  public void setAppointments(Set&lt;Appointment&gt; appointments) {\n    this.appointments = appointments;\n  }\n\n  public Set&lt;Appointment&gt; getAppointments() {\n    return appointments;\n  }\n}\n</code></pre>\n<h1>ERROR:</h1>\n<pre><code>2023-04-27 10:20:42.145 ERROR 43965 --- [main] o.h.e.j.s.SqlExceptionHelper             : Field 'specialization' doesn't have a default value\n\n</code></pre>\n<hr />\n<p><em>Here is the full view of the database tables:</em><br><br>\n<a href=\"https://i.stack.imgur.com/UUtP7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UUtP7.png\" alt=\"---\" /></a></p>\n"},{"tags":["java","android","json","android-recyclerview"],"comments":[{"owner":{"account_id":5617891,"reputation":4182,"user_id":4448617,"display_name":"Ratilal Chopda"},"score":0,"creation_date":1511872658,"post_id":47531756,"comment_id":82019980,"body_markdown":"youe json response is true","body":"youe json response is true"},{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1511872763,"post_id":47531756,"comment_id":82020047,"body_markdown":"Possible duplicate of [ANDROID, Parse JSON data from a web server and display on ListView](https://stackoverflow.com/questions/36221795/android-parse-json-data-from-a-web-server-and-display-on-listview)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/36221795/android-parse-json-data-from-a-web-server-and-display-on-listview\">ANDROID, Parse JSON data from a web server and display on ListView</a>"},{"owner":{"account_id":9871999,"reputation":1058,"user_id":7311269,"accept_rate":62,"display_name":"Nero"},"score":0,"creation_date":1511873640,"post_id":47531756,"comment_id":82020593,"body_markdown":"Now you have to implement the hard stuff. I would recommend you create a class for the Json response with getters and setters so this way you can call out the information whenever needed. \nYou will also have to create a custom listview (another XML design) which will be the design of each item in your list. Then an adapter class which will work in conjunction to your listview and set the values where necessary. It&#39;s well complicated but I would recommend you to follow tutorial on custom listview.","body":"Now you have to implement the hard stuff. I would recommend you create a class for the Json response with getters and setters so this way you can call out the information whenever needed.  You will also have to create a custom listview (another XML design) which will be the design of each item in your list. Then an adapter class which will work in conjunction to your listview and set the values where necessary. It&#39;s well complicated but I would recommend you to follow tutorial on custom listview."},{"owner":{"account_id":8203605,"reputation":55,"user_id":6174132,"accept_rate":33,"display_name":"Clau "},"score":0,"creation_date":1511874529,"post_id":47531756,"comment_id":82021143,"body_markdown":"and how can i set value for them ?","body":"and how can i set value for them ?"},{"owner":{"account_id":8203605,"reputation":55,"user_id":6174132,"accept_rate":33,"display_name":"Clau "},"score":0,"creation_date":1511875382,"post_id":47531756,"comment_id":82021775,"body_markdown":"Please take a look, I did some changes.","body":"Please take a look, I did some changes."}],"answers":[{"tags":[],"owner":{"account_id":4967767,"reputation":56,"user_id":3996504,"display_name":"Piyush Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511873098,"creation_date":1511873098,"answer_id":47531966,"question_id":47531756,"body_markdown":"You can create a bean class with setter getter for your List Items and the bean class should implement parcelable so that you can send the bean object to other activity. For recycler View you use adapter of same bean type and set that adapter once data is loaded from server. ","title":"Display data from JSON inside RecyclerView(CardView)","body":"<p>You can create a bean class with setter getter for your List Items and the bean class should implement parcelable so that you can send the bean object to other activity. For recycler View you use adapter of same bean type and set that adapter once data is loaded from server. </p>\n"}],"owner":{"account_id":8203605,"reputation":55,"user_id":6174132,"accept_rate":33,"display_name":"Clau "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":306,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682712734,"creation_date":1511872407,"question_id":47531756,"body_markdown":"I have a `JSON node` which is displayed in `logcat` and look like this: \r\n\r\n    jsonData[{&quot;numarProduse&quot;:&quot;4&quot;,&quot;pretTotal&quot;:&quot;1138&quot;,&quot;data&quot;:&quot;11-27-2017&quot;,&quot;numeVanzator&quot;:&quot;Clau&quot;,&quot;numarClient&quot;:0,&quot;detaliiCos&quot;:{&quot;metodaPlata&quot;:&quot;CASH&quot;}}]\r\n\r\nBut I want from this `JSON response` to display in another activity just 3 of them **&quot;numarProduse&quot;:&quot;4&quot;, &quot;pretTotal&quot;:&quot;1138&quot;, &quot;numarClient&quot;:0**. \r\n\r\nI tried something else, to upload data to `Firebase` and then retrieve data from `Firebase`. \r\n\r\n**Here is my `RecyclerView Adapter`**:\r\n\r\n    public class CardArrayAdapter  extends RecyclerView.Adapter&lt;CardArrayAdapter.ViewHolder&gt; {\r\n    private List&lt;Card&gt; listdata;\r\n\r\n    public CardArrayAdapter(List&lt;Card&gt; listdata) {\r\n        this.listdata = listdata;\r\n    }\r\n\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.list_item_card, parent, false);\r\n        return new ViewHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(ViewHolder holder, int position) {\r\n\r\n        Card vanzatorProduse = listdata.get(position);\r\n\r\n        holder.txtViewNumarCumparator.setText(vanzatorProduse.getProdusId());\r\n        holder.listaProduse.setText(vanzatorProduse.getQty());\r\n        holder.sumaProduse.setText(vanzatorProduse.getSubTotal());\r\n    }\r\n    @Override\r\n    public int getItemCount() {\r\n        return listdata.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        public TextView txtViewNumarCumparator;\r\n        public TextView listaProduse;\r\n        public TextView sumaProduse;\r\n\r\n        public ViewHolder(View itemView) {\r\n            super(itemView);\r\n\r\n            txtViewNumarCumparator = (TextView) itemView.findViewById(R.id.txtViewNumarCumparator);\r\n            listaProduse = (TextView) itemView.findViewById(R.id.listaProduse);\r\n            sumaProduse = (TextView) itemView.findViewById(R.id.sumaProduse);\r\n        }\r\n    }\r\n    }\r\n\r\nI made my layout for `CardView`, and object class with getters and setters.\r\n\r\n    public class Card implements Serializable {\r\n    public String produsId;\r\n    public String subTotal;\r\n    public String qty;\r\n\r\n    public Card(){}\r\n\r\n    public Card(String produsId, String subTotal, String qty) {\r\n        this.produsId = produsId;\r\n        this.subTotal = subTotal;\r\n        this.qty = qty;\r\n    }\r\n\r\n    public String getProdusId() {\r\n        return produsId;\r\n    }\r\n\r\n    public void setProdusId(String produsId) {\r\n        this.produsId = produsId;\r\n    }\r\n\r\n    public String getSubTotal() {\r\n        return subTotal;\r\n    }\r\n\r\n    public void setSubTotal(String subTotal) {\r\n        this.subTotal = subTotal;\r\n    }\r\n\r\n    public String getQty() {\r\n        return qty;\r\n    }\r\n\r\n    public void setQty(String qty) {\r\n        this.qty = qty;\r\n    }\r\n    }\r\n\r\nAnd here is where I tried to retrieve data from `Firebase`: \r\n\r\n    myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n                list = new ArrayList&lt;&gt;();\r\n\r\n                for (DataSnapshot snapshot : dataSnapshot.getChildren()){\r\n\r\n                    VanzatorProduse produse = snapshot.getValue(VanzatorProduse.class);\r\n                    Card listdata = new Card();\r\n                    String id = produse.getProdusId();\r\n                    String qty = String.valueOf(produse.getQty());\r\n                    String suma = String.valueOf(produse.getSubTotal());\r\n\r\n                    listdata.setProdusId(id);\r\n                    listdata.setQty(qty);\r\n                    listdata.setSubTotal(suma);\r\n                    list.add(listdata);\r\n\r\n                }\r\n                CardArrayAdapter recycler = new CardArrayAdapter(list);\r\n                RecyclerView.LayoutManager layoutmanager = new LinearLayoutManager(VanzatorActivity.this);\r\n                recyclerview.setLayoutManager(layoutmanager);\r\n                recyclerview.setItemAnimator( new DefaultItemAnimator());\r\n                recyclerview.setAdapter(recycler);\r\n            }\r\n\r\nBut is not working, I get two columns where is 0 displayed. I have no idea what to do next, here I&#39;m blocked. ","title":"Display data from JSON inside RecyclerView(CardView)","body":"<p>I have a <code>JSON node</code> which is displayed in <code>logcat</code> and look like this:</p>\n<pre><code>jsonData[{&quot;numarProduse&quot;:&quot;4&quot;,&quot;pretTotal&quot;:&quot;1138&quot;,&quot;data&quot;:&quot;11-27-2017&quot;,&quot;numeVanzator&quot;:&quot;Clau&quot;,&quot;numarClient&quot;:0,&quot;detaliiCos&quot;:{&quot;metodaPlata&quot;:&quot;CASH&quot;}}]\n</code></pre>\n<p>But I want from this <code>JSON response</code> to display in another activity just 3 of them <strong>&quot;numarProduse&quot;:&quot;4&quot;, &quot;pretTotal&quot;:&quot;1138&quot;, &quot;numarClient&quot;:0</strong>.</p>\n<p>I tried something else, to upload data to <code>Firebase</code> and then retrieve data from <code>Firebase</code>.</p>\n<p><strong>Here is my <code>RecyclerView Adapter</code></strong>:</p>\n<pre><code>public class CardArrayAdapter  extends RecyclerView.Adapter&lt;CardArrayAdapter.ViewHolder&gt; {\nprivate List&lt;Card&gt; listdata;\n\npublic CardArrayAdapter(List&lt;Card&gt; listdata) {\n    this.listdata = listdata;\n}\n\n@Override\npublic ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n    View v = LayoutInflater.from(parent.getContext())\n            .inflate(R.layout.list_item_card, parent, false);\n    return new ViewHolder(v);\n}\n\n@Override\npublic void onBindViewHolder(ViewHolder holder, int position) {\n\n    Card vanzatorProduse = listdata.get(position);\n\n    holder.txtViewNumarCumparator.setText(vanzatorProduse.getProdusId());\n    holder.listaProduse.setText(vanzatorProduse.getQty());\n    holder.sumaProduse.setText(vanzatorProduse.getSubTotal());\n}\n@Override\npublic int getItemCount() {\n    return listdata.size();\n}\n\npublic class ViewHolder extends RecyclerView.ViewHolder {\n\n    public TextView txtViewNumarCumparator;\n    public TextView listaProduse;\n    public TextView sumaProduse;\n\n    public ViewHolder(View itemView) {\n        super(itemView);\n\n        txtViewNumarCumparator = (TextView) itemView.findViewById(R.id.txtViewNumarCumparator);\n        listaProduse = (TextView) itemView.findViewById(R.id.listaProduse);\n        sumaProduse = (TextView) itemView.findViewById(R.id.sumaProduse);\n    }\n}\n}\n</code></pre>\n<p>I made my layout for <code>CardView</code>, and object class with getters and setters.</p>\n<pre><code>public class Card implements Serializable {\npublic String produsId;\npublic String subTotal;\npublic String qty;\n\npublic Card(){}\n\npublic Card(String produsId, String subTotal, String qty) {\n    this.produsId = produsId;\n    this.subTotal = subTotal;\n    this.qty = qty;\n}\n\npublic String getProdusId() {\n    return produsId;\n}\n\npublic void setProdusId(String produsId) {\n    this.produsId = produsId;\n}\n\npublic String getSubTotal() {\n    return subTotal;\n}\n\npublic void setSubTotal(String subTotal) {\n    this.subTotal = subTotal;\n}\n\npublic String getQty() {\n    return qty;\n}\n\npublic void setQty(String qty) {\n    this.qty = qty;\n}\n}\n</code></pre>\n<p>And here is where I tried to retrieve data from <code>Firebase</code>:</p>\n<pre><code>myRef.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot) {\n            list = new ArrayList&lt;&gt;();\n\n            for (DataSnapshot snapshot : dataSnapshot.getChildren()){\n\n                VanzatorProduse produse = snapshot.getValue(VanzatorProduse.class);\n                Card listdata = new Card();\n                String id = produse.getProdusId();\n                String qty = String.valueOf(produse.getQty());\n                String suma = String.valueOf(produse.getSubTotal());\n\n                listdata.setProdusId(id);\n                listdata.setQty(qty);\n                listdata.setSubTotal(suma);\n                list.add(listdata);\n\n            }\n            CardArrayAdapter recycler = new CardArrayAdapter(list);\n            RecyclerView.LayoutManager layoutmanager = new LinearLayoutManager(VanzatorActivity.this);\n            recyclerview.setLayoutManager(layoutmanager);\n            recyclerview.setItemAnimator( new DefaultItemAnimator());\n            recyclerview.setAdapter(recycler);\n        }\n</code></pre>\n<p>But is not working, I get two columns where is 0 displayed. I have no idea what to do next, here I'm blocked.</p>\n"},{"tags":["java","arrays","multidimensional-array","duplicates"],"comments":[{"owner":{"account_id":1749597,"reputation":1030,"user_id":1599011,"display_name":"mykaf"},"score":1,"creation_date":1682709208,"post_id":76132575,"comment_id":134263816,"body_markdown":"You tagged `javascript` but use `java` in your question; which is it?","body":"You tagged <code>javascript</code> but use <code>java</code> in your question; which is it?"},{"owner":{"account_id":28447405,"reputation":11,"user_id":21765945,"display_name":"alana"},"score":0,"creation_date":1682709577,"post_id":76132575,"comment_id":134263886,"body_markdown":"Java, i will remove javascript for the confusion","body":"Java, i will remove javascript for the confusion"}],"answers":[{"tags":[],"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682712650,"creation_date":1682712650,"answer_id":76132976,"question_id":76132575,"body_markdown":"This is not the most efficient solution, but one way would be to create a method `removeInvalidData`, that:\r\n\r\n1. Orders the data to have the invalid data (`-1`) at the beginning or end of the array\r\n2. Counts the amount of invalid data\r\n3. Creates a new array of the size of the valid data (total data count - invalid data count)\r\n4. Fills the new array with the valid data\r\n\r\nAn example for this would be:\r\n\r\n    private static int[] removeInvalidNumbers(int[] numbers) {\r\n        int numberOfInvalidData = 0;\r\n        \r\n        for (int i = 0; i &lt; numbers.length; i++) {\r\n            for (int j = i + 1; j &lt; numbers.length; j++) {\r\n                if (numbers[i] &lt; numbers[j]) {\r\n                    int temp = numbers[i];\r\n                    numbers[i] = numbers[j];\r\n                    numbers[j] = temp;\r\n                }\r\n            }\r\n        }\r\n        \r\n        for (int i = 0; i &lt; numbers.length; i++) {\r\n            if (numbers[i] == -1) {\r\n                numberOfInvalidData++;\r\n            }\r\n        }\r\n        \r\n        int[] newNumbers = new int[numbers.length - numberOfInvalidData];\r\n        \r\n        for (int i = 0; i &lt; newNumbers.length; i++) {\r\n            newNumbers[i] = numbers[i];\r\n        }\r\n        \r\n        return newNumbers;\r\n    }\r\n\r\nYou would call this function in the `return` statement of `eliminateDuplicates`:\r\n\r\n    return removeInvalidNumbers(list);\r\n\r\nAs you can see, it uses multiple `for-loops` even nested ones multiple times.\r\n\r\n-----------\r\n\r\nI like this approach better:\r\n\r\n1. Creates a new array that has the non duplicated numbers in it `nonDuplicatedNumbers`\r\n2. Creates a flag for `isDuplicate` that tells us if the number is duplicated\r\n3. Adds the number to `nonDuplicatedNumber` if `isDuplicate` is false\r\n4. Counts the number of invalid data at the same time\r\n5. Calls the function to remove invalid data\r\n\r\n        private static int[] eliminateDuplicates(int[] list) {\r\n            int[] nonDuplicatedNumbers = new int[list.length];\r\n            int numberOfDuplicates = 0;\r\n            for (int i = 0; i &lt; list.length; i++) {\r\n                boolean isDuplicate = false;\r\n                for (int j = 0; j &lt; nonDuplicatedNumbers.length; j++) {\r\n                    if (list[i] == nonDuplicatedNumbers[j]) {\r\n                        isDuplicate = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!isDuplicate) {\r\n                    nonDuplicatedNumbers[i - numberOfDuplicates] = list[i];\r\n                } else {\r\n                    numberOfDuplicates++;\r\n                }\r\n            }\r\n\r\n            nonDuplicatedNumbers = removeInvalidData(nonDuplicatedNumbers, numberOfDuplicates);\r\n\r\n            return nonDuplicatedNumbers;\r\n        }\r\n\r\nAnd now `removeInvalidData` does the following:\r\n\r\n1. Creates a new array of the size of the valid data (total - invalid data counts)\r\n2. Iterates over the array using the new array&#39;s length to store the non duplicated values\r\n3. Returns the non duplicated numbers\r\n\r\n        private static int[] removeInvalidData(int[] numbers, int numberOfDuplicates) {\r\n            int[] validNumbers = new int[numbers.length - numberOfDuplicates];\r\n\r\n            for (int i = 0; i &lt; validNumbers.length; i++) {\r\n                validNumbers[i] = numbers[i];\r\n            }\r\n\r\n            return validNumbers;\r\n        }","title":"Could I fix the -1 in the EliminateDuplicates method?","body":"<p>This is not the most efficient solution, but one way would be to create a method <code>removeInvalidData</code>, that:</p>\n<ol>\n<li>Orders the data to have the invalid data (<code>-1</code>) at the beginning or end of the array</li>\n<li>Counts the amount of invalid data</li>\n<li>Creates a new array of the size of the valid data (total data count - invalid data count)</li>\n<li>Fills the new array with the valid data</li>\n</ol>\n<p>An example for this would be:</p>\n<pre><code>private static int[] removeInvalidNumbers(int[] numbers) {\n    int numberOfInvalidData = 0;\n    \n    for (int i = 0; i &lt; numbers.length; i++) {\n        for (int j = i + 1; j &lt; numbers.length; j++) {\n            if (numbers[i] &lt; numbers[j]) {\n                int temp = numbers[i];\n                numbers[i] = numbers[j];\n                numbers[j] = temp;\n            }\n        }\n    }\n    \n    for (int i = 0; i &lt; numbers.length; i++) {\n        if (numbers[i] == -1) {\n            numberOfInvalidData++;\n        }\n    }\n    \n    int[] newNumbers = new int[numbers.length - numberOfInvalidData];\n    \n    for (int i = 0; i &lt; newNumbers.length; i++) {\n        newNumbers[i] = numbers[i];\n    }\n    \n    return newNumbers;\n}\n</code></pre>\n<p>You would call this function in the <code>return</code> statement of <code>eliminateDuplicates</code>:</p>\n<pre><code>return removeInvalidNumbers(list);\n</code></pre>\n<p>As you can see, it uses multiple <code>for-loops</code> even nested ones multiple times.</p>\n<hr />\n<p>I like this approach better:</p>\n<ol>\n<li><p>Creates a new array that has the non duplicated numbers in it <code>nonDuplicatedNumbers</code></p>\n</li>\n<li><p>Creates a flag for <code>isDuplicate</code> that tells us if the number is duplicated</p>\n</li>\n<li><p>Adds the number to <code>nonDuplicatedNumber</code> if <code>isDuplicate</code> is false</p>\n</li>\n<li><p>Counts the number of invalid data at the same time</p>\n</li>\n<li><p>Calls the function to remove invalid data</p>\n<pre><code> private static int[] eliminateDuplicates(int[] list) {\n     int[] nonDuplicatedNumbers = new int[list.length];\n     int numberOfDuplicates = 0;\n     for (int i = 0; i &lt; list.length; i++) {\n         boolean isDuplicate = false;\n         for (int j = 0; j &lt; nonDuplicatedNumbers.length; j++) {\n             if (list[i] == nonDuplicatedNumbers[j]) {\n                 isDuplicate = true;\n                 break;\n             }\n         }\n         if (!isDuplicate) {\n             nonDuplicatedNumbers[i - numberOfDuplicates] = list[i];\n         } else {\n             numberOfDuplicates++;\n         }\n     }\n\n     nonDuplicatedNumbers = removeInvalidData(nonDuplicatedNumbers, numberOfDuplicates);\n\n     return nonDuplicatedNumbers;\n }\n</code></pre>\n</li>\n</ol>\n<p>And now <code>removeInvalidData</code> does the following:</p>\n<ol>\n<li><p>Creates a new array of the size of the valid data (total - invalid data counts)</p>\n</li>\n<li><p>Iterates over the array using the new array's length to store the non duplicated values</p>\n</li>\n<li><p>Returns the non duplicated numbers</p>\n<pre><code> private static int[] removeInvalidData(int[] numbers, int numberOfDuplicates) {\n     int[] validNumbers = new int[numbers.length - numberOfDuplicates];\n\n     for (int i = 0; i &lt; validNumbers.length; i++) {\n         validNumbers[i] = numbers[i];\n     }\n\n     return validNumbers;\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":28447405,"reputation":11,"user_id":21765945,"display_name":"alana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682712650,"creation_date":1682708777,"question_id":76132575,"body_markdown":"Problem: Eliminate duplicates\r\n\r\nWrite a method that returns a new array by eliminating the duplicate values in the array using the following method header:\r\n\r\npublic static int[] eliminateDuplicates (int[] list)\r\n\r\nWrite a program that reads in ten integers, invokes the method, and displays the result.\r\n\r\nI am trying to remove the -1s in my java code. I figured out the first part but im confusing myself on how to fix my eliminateDuplicates method. I was told to add int[] list2 = new int[count] Can anyone give me advice on how to fix this. I am still very new to coding\r\n\r\n```import java.util.Scanner;\r\n\r\npublic class Lab09 {\r\n    public static void main(String[] args) {\r\n        Scanner s = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Enter ten numbers: &quot;);\r\n        int[] num = new int[10];\r\n\r\n        for (int i = 0; i &lt; num.length; i++) {\r\n            num[i] = s.nextInt();\r\n        }\r\n        num = eliminateDuplicates(num);\r\n\r\n        System.out.print(&quot;The distinct numbers are: &quot;);\r\n        for (int i = 0; i &lt; num.length; i++) {\r\n            System.out.print(num[i] + &quot; &quot;);\r\n        }\r\n        s.close();\r\n    }\r\n\r\n    public static int[] eliminateDuplicates(int[] list) {\r\n        for (int i = 0; i &lt; list.length; i++) {\r\n            for (int v = i + 1; v &lt; list.length; v++) {\r\n                if (list[i] == list[v]) {\r\n                    list[v] = -1;\r\n                }\r\n            }\r\n        }\r\n        return list;\r\n    }\r\n}\r\n","title":"Could I fix the -1 in the EliminateDuplicates method?","body":"<p>Problem: Eliminate duplicates</p>\n<p>Write a method that returns a new array by eliminating the duplicate values in the array using the following method header:</p>\n<p>public static int[] eliminateDuplicates (int[] list)</p>\n<p>Write a program that reads in ten integers, invokes the method, and displays the result.</p>\n<p>I am trying to remove the -1s in my java code. I figured out the first part but im confusing myself on how to fix my eliminateDuplicates method. I was told to add int[] list2 = new int[count] Can anyone give me advice on how to fix this. I am still very new to coding</p>\n<pre><code>\npublic class Lab09 {\n    public static void main(String[] args) {\n        Scanner s = new Scanner(System.in);\n\n        System.out.println(&quot;Enter ten numbers: &quot;);\n        int[] num = new int[10];\n\n        for (int i = 0; i &lt; num.length; i++) {\n            num[i] = s.nextInt();\n        }\n        num = eliminateDuplicates(num);\n\n        System.out.print(&quot;The distinct numbers are: &quot;);\n        for (int i = 0; i &lt; num.length; i++) {\n            System.out.print(num[i] + &quot; &quot;);\n        }\n        s.close();\n    }\n\n    public static int[] eliminateDuplicates(int[] list) {\n        for (int i = 0; i &lt; list.length; i++) {\n            for (int v = i + 1; v &lt; list.length; v++) {\n                if (list[i] == list[v]) {\n                    list[v] = -1;\n                }\n            }\n        }\n        return list;\n    }\n}\n</code></pre>\n"},{"tags":["java","datetime","timezone","datetime-parsing","datetime-conversion"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1682074572,"post_id":76072437,"comment_id":134162166,"body_markdown":"&quot;And then how do I&quot; - please restrict yourself to one question per post. I suspect there are *lots* of posts about how to convert an Instant to a specific time zone.","body":"&quot;And then how do I&quot; - please restrict yourself to one question per post. I suspect there are <i>lots</i> of posts about how to convert an Instant to a specific time zone."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1682074608,"post_id":76072437,"comment_id":134162173,"body_markdown":"@JonSkeet Yes but this string does not contain the Z suffix while it&#39;s actually UTC. I explained that I looked around but didn&#39;t find anything quite the same. Most examples assume the input string has the appropriate time zone info, mine doesn&#39;t.","body":"@JonSkeet Yes but this string does not contain the Z suffix while it&#39;s actually UTC. I explained that I looked around but didn&#39;t find anything quite the same. Most examples assume the input string has the appropriate time zone info, mine doesn&#39;t."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1682074713,"post_id":76072437,"comment_id":134162196,"body_markdown":"&quot; Yes but this instant does not contain the Z suffix&quot; - an *Instant* doesn&#39;t have a Z or not have a Z. By the time you&#39;ve converted the original string to an Instant, the format of that original string is completely irrelevant... so it really is a separate question, which shouldn&#39;t be asked in the same post.","body":"&quot; Yes but this instant does not contain the Z suffix&quot; - an <i>Instant</i> doesn&#39;t have a Z or not have a Z. By the time you&#39;ve converted the original string to an Instant, the format of that original string is completely irrelevant... so it really is a separate question, which shouldn&#39;t be asked in the same post."},{"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1682074743,"post_id":76072437,"comment_id":134162202,"body_markdown":"@JonSkeet I meant of course that the input string doesn&#39;t contain Z suffix... come on...","body":"@JonSkeet I meant of course that the input string doesn&#39;t contain Z suffix... come on..."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1682075410,"post_id":76072437,"comment_id":134162344,"body_markdown":"Either you understand that the resulting Instant is completely independent of the original text - in which case you shouldn&#39;t be asking the second question, as it&#39;s independent of the first, and a post should ask only one question... or you *don&#39;t* understand that, in which case I&#39;m correcting your expectations. Fundamentally I think you should remove the &quot;and then how do I&quot; paragraph.","body":"Either you understand that the resulting Instant is completely independent of the original text - in which case you shouldn&#39;t be asking the second question, as it&#39;s independent of the first, and a post should ask only one question... or you <i>don&#39;t</i> understand that, in which case I&#39;m correcting your expectations. Fundamentally I think you should remove the &quot;and then how do I&quot; paragraph."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682075510,"post_id":76072437,"comment_id":134162373,"body_markdown":"`ZonedDateTime ldtZoned = LocalDateTime.parse(&quot;2023-04-17T03:56:59.257&quot;).atZone(ZoneId.systemDefault());ZonedDateTime utcZoned = ldtZoned.withZoneSameInstant(ZoneId.of(&quot;UTC&quot;));System.out.println(utcZoned.toLocalDateTime());\n` is one way","body":"<code>ZonedDateTime ldtZoned = LocalDateTime.parse(&quot;2023-04-17T03:56:59.257&quot;).atZone(ZoneId&zwnj;&#8203;.systemDefault());Zo&zwnj;&#8203;nedDateTime utcZoned = ldtZoned.withZoneSameInstant(ZoneId.of(&quot;UTC&quot;));System.out.pr&zwnj;&#8203;intln(utcZoned.toLoc&zwnj;&#8203;alDateTime()); </code> is one way"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1682075626,"post_id":76072437,"comment_id":134162405,"body_markdown":"@g00se: That would be a *bad* way to go, because `atZone(ZoneId.systemDefault())` would be interpreting it incorrectly. Sweeper&#39;s answer is the right way to go.","body":"@g00se: That would be a <i>bad</i> way to go, because <code>atZone(ZoneId.systemDefault())</code> would be interpreting it incorrectly. Sweeper&#39;s answer is the right way to go."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682077537,"post_id":76072437,"comment_id":134162823,"body_markdown":"@JonSkeet I&#39;m not over-happy with it - but not for that reason ;) It works, correctly adjusting the offset-less datetime string to be the correct time. So, if like me, you&#39;re not in UTC, it will adjust that time accordingly. That doesn&#39;t happen with Sweeper&#39;s afaics","body":"@JonSkeet I&#39;m not over-happy with it - but not for that reason ;) It works, correctly adjusting the offset-less datetime string to be the correct time. So, if like me, you&#39;re not in UTC, it will adjust that time accordingly. That doesn&#39;t happen with Sweeper&#39;s afaics"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1682077637,"post_id":76072437,"comment_id":134162851,"body_markdown":"@g00se: I think you&#39;ve misinterpreted the question. The string *must not* be adjusted, because it already represents a UTC value. Sweeper&#39;s answer doesn&#39;t do that *because it shouldn&#39;t*.","body":"@g00se: I think you&#39;ve misinterpreted the question. The string <i>must not</i> be adjusted, because it already represents a UTC value. Sweeper&#39;s answer doesn&#39;t do that <i>because it shouldn&#39;t</i>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1682087338,"post_id":76072437,"comment_id":134165232,"body_markdown":"@g00se You are making the opposite conversion of the one that I think was asked for (and in any case you are correct, if the default time zone is already in UTC on the date in question, effectively no conversion happens).","body":"@g00se You are making the opposite conversion of the one that I think was asked for (and in any case you are correct, if the default time zone is already in UTC on the date in question, effectively no conversion happens)."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1682111940,"post_id":76072437,"comment_id":134169992,"body_markdown":"@peter.petrov The down-vote may have been because we have covered all the issues in your Question many many times before in existing Questions &amp; Answers. However, you also got some up-votes, so I took the time to post a complete Answer here.","body":"@peter.petrov The down-vote may have been because we have covered all the issues in your Question many many times before in existing Questions &amp; Answers. However, you also got some up-votes, so I took the time to post a complete Answer here."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682075358,"creation_date":1682075358,"answer_id":76072571,"question_id":76072437,"body_markdown":"First, parse the string into a `LocalDateTime`, because that&#39;s all there is in the string - a date and a time.\r\n\r\nThen, you can convert it to a `ZonedDateTime` or an `Instant`, depending on your interpretation - whether this is a date and time in the `UTC` zone, or a point in time. \r\n\r\n```\r\nvar parsedResult =\r\n    LocalDateTime.parse(string/*, DateTimeFormatter.ISO_DATE_TIME*/)\r\n        .toInstant(ZoneOffset.UTC); // for an Instant\r\n//      .atZone(ZoneOffset.UTC); // for a ZonedDateTime\r\n```\r\n\r\nAfter you have either of those, you can use `withZoneSameInstant`/`atZone` respectively to put it into another zone.\r\n\r\n```\r\n// if parsedResult is Instant\r\nvar atAnotherZone = parsedResult.atZone(anotherZone);\r\n// if parsedResult is ZonedDateTime\r\nvar atAnotherZone = parsedResult.withZoneSameInstant(anotherZone);\r\n```\r\n","title":"Parse non-UTC date string as UTC Instant, and print it out in another TimeZone","body":"<p>First, parse the string into a <code>LocalDateTime</code>, because that's all there is in the string - a date and a time.</p>\n<p>Then, you can convert it to a <code>ZonedDateTime</code> or an <code>Instant</code>, depending on your interpretation - whether this is a date and time in the <code>UTC</code> zone, or a point in time.</p>\n<pre><code>var parsedResult =\n    LocalDateTime.parse(string/*, DateTimeFormatter.ISO_DATE_TIME*/)\n        .toInstant(ZoneOffset.UTC); // for an Instant\n//      .atZone(ZoneOffset.UTC); // for a ZonedDateTime\n</code></pre>\n<p>After you have either of those, you can use <code>withZoneSameInstant</code>/<code>atZone</code> respectively to put it into another zone.</p>\n<pre><code>// if parsedResult is Instant\nvar atAnotherZone = parsedResult.atZone(anotherZone);\n// if parsedResult is ZonedDateTime\nvar atAnotherZone = parsedResult.withZoneSameInstant(anotherZone);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682076777,"creation_date":1682076610,"answer_id":76072732,"question_id":76072437,"body_markdown":"Thanks for all the comments and answers. Putting them all together, I think this is what I needed.   \r\n\r\n\r\n\timport java.time.Instant;\r\n\timport java.time.LocalDateTime;\r\n\timport java.time.ZoneId;\r\n\timport java.time.ZonedDateTime;\r\n\timport java.time.format.DateTimeFormatter;\r\n\t\r\n\tpublic class Main001 {\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\t\r\n\t\t\t// Do first test with a winter date\r\n\t\t\tString text = &quot;2023-02-17T03:56:50.254&quot;;\r\n\t\t\t\t\t\r\n\t\t\tLocalDateTime local = LocalDateTime.parse(text);\r\n\t\t\tZonedDateTime zdt = local.atZone(ZoneId.of(&quot;UTC&quot;));\r\n\t\t\tInstant instant = zdt.toInstant();\r\n\t\t\t\r\n\t\t\tSystem.out.println(instant);\r\n\t\t\t\r\n\t\t\tDateTimeFormatter formatter =\r\n\t\t\t\t\tDateTimeFormatter\r\n\t\t\t\t\t.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;)\r\n\t\t\t\t\t.withZone(ZoneId.of(&quot;America/New_York&quot;));\r\n\t\t\t\r\n\t\t\tSystem.out.println(formatter.format(instant));\r\n\t\t\t\r\n\t\t\t// Do second test with a summer date\r\n\t\t\ttext = &quot;2023-07-17T03:56:59.257&quot;;\r\n\t\t\t\r\n\t\t\tlocal = LocalDateTime.parse(text);\r\n\t\t\tzdt = local.atZone(ZoneId.of(&quot;UTC&quot;));\r\n\t\t\tinstant = zdt.toInstant();\r\n\t\t\t\r\n\t\t\tSystem.out.println(instant);\r\n\t\t\t\r\n\t\t\tformatter =\r\n\t\t\t\t\tDateTimeFormatter\r\n\t\t\t\t\t.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;)\r\n\t\t\t\t\t.withZone(ZoneId.of(&quot;America/New_York&quot;));\r\n\t\t\tSystem.out.println(formatter.format(instant));\r\n\t\r\n\t\t}\r\n\t\r\n\t}\r\n\t\r\nOutput:\r\n\r\n```none\r\n2023-02-17T03:56:50.254Z\r\n2023-02-16T22:56:50.254\r\n2023-07-17T03:56:59.257Z\r\n2023-07-16T23:56:59.257\r\n```\t\r\n\r\n","title":"Parse non-UTC date string as UTC Instant, and print it out in another TimeZone","body":"<p>Thanks for all the comments and answers. Putting them all together, I think this is what I needed.</p>\n<pre><code>import java.time.Instant;\nimport java.time.LocalDateTime;\nimport java.time.ZoneId;\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\n\npublic class Main001 {\n\n    public static void main(String[] args) {\n        \n        // Do first test with a winter date\n        String text = &quot;2023-02-17T03:56:50.254&quot;;\n                \n        LocalDateTime local = LocalDateTime.parse(text);\n        ZonedDateTime zdt = local.atZone(ZoneId.of(&quot;UTC&quot;));\n        Instant instant = zdt.toInstant();\n        \n        System.out.println(instant);\n        \n        DateTimeFormatter formatter =\n                DateTimeFormatter\n                .ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS&quot;)\n                .withZone(ZoneId.of(&quot;America/New_York&quot;));\n        \n        System.out.println(formatter.format(instant));\n        \n        // Do second test with a summer date\n        text = &quot;2023-07-17T03:56:59.257&quot;;\n        \n        local = LocalDateTime.parse(text);\n        zdt = local.atZone(ZoneId.of(&quot;UTC&quot;));\n        instant = zdt.toInstant();\n        \n        System.out.println(instant);\n        \n        formatter =\n                DateTimeFormatter\n                .ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS&quot;)\n                .withZone(ZoneId.of(&quot;America/New_York&quot;));\n        System.out.println(formatter.format(instant));\n\n    }\n\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-02-17T03:56:50.254Z\n2023-02-16T22:56:50.254\n2023-07-17T03:56:59.257Z\n2023-07-16T23:56:59.257\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682712364,"creation_date":1682111028,"answer_id":76076691,"question_id":76072437,"body_markdown":"# tl;dr\r\n\r\n```java\r\nLocalDateTime                           // Represent a date with time-of-day, but lacking the context of a time zone or offset from UTC.\r\n.parse( &quot;2023-02-17T03:56:50.254&quot; )     // Parse text in standard ISO 8601 format.\r\n.atOffset(                              // Assign an offset to this date-with-time.\r\n    ZoneOffset.UTC                      // Constant for an offset-from-UTC of zero hours-minutes-seconds.\r\n)                                       // Returns an `OffsetDateTime` object.\r\n.atZoneSameInstant(                     // Adjust from a moment as seen with an offset of zero to being seen with a time zone some number of hours-minutes-seconds ahead/behind UTC.\r\n    ZoneId.of( &quot;America/New_York&quot; )     // Represent a time zone. Name is in format of Continent/Region. \r\n)                                       // Returns a `ZonedDateTime` object.\r\n.toString()                             // Generate text in standard ISO 8601 format extended wisely to append the name of the zone in square brackets.\r\n```\r\n\r\nSee this code [run at Ideone.com][1]. Notice how the date as well as the time-of-day differ from that of the input.\r\n\r\n```none\r\n2023-02-16T22:56:50.254-05:00[America/New_York]\r\n```\r\n\r\n\r\n# Offset versus zone\r\n\r\nPer the [Comment by Ole V.V.][2], the appropriate class here is `OffsetDateTime` rather than `ZonedDateTime`.\r\n\r\n - An ***offset* is merely a number** hours, minutes, and second ahead of or behind the temporal meridian of [UTC][3].\r\n - A ***time zone* is a named history** of the past, present, and future changes to the offset used by the people of a particular region as decided by their politicians. Named in format of `Continent/Region`. \r\n\r\nThe *java.time* classes offer two classes to represent each concept:\r\n\r\n - `ZoneOffset`\r\n - `ZoneId`\r\n\r\nAnd the *java.time* classes offer two classes to represent a moment as seen in each way.\r\n\r\n - `OffsetDateTime`\r\n - `ZonedDateTime`\r\n\r\nBy the way, the [`Instant`][4] class is a more basic building-block class in *java.time*, representing a moment as seen in UTC, always in UTC (an offset of zero).\r\n\r\n# `LocalDateTime`\r\n\r\nSo, yes parse your input as date with time-of-day, a `LocalDateTime`.\r\n\r\n    LocalDateTime ldt = LocalDateTime.parse( &quot;2023-02-17T03:56:50.254&quot; ) ;\r\n\r\nThe `LocalDateTime` does *not* represent a moment, as it lacks the context of an offset or zone.\r\n\r\n# `ZoneOffet` &amp; `OffsetDateTime`\r\n\r\nYou said:\r\n\r\n&gt;How do I parse this string taking into account it&#39;s actually in UTC \r\n\r\nIf you are certain that date and time was intended to represent a moment &quot;in UTC&quot;, that is with an offset of zero hours-minutes-seconds, then apply a [`ZoneOffset`][5] rather than a [`ZoneId`][6] to produce an [`OffsetDateTime`][7] rather than a [`ZonedDateTime`][8]. \r\n\r\nJava comes with a constant defined for an offset of zero, [`ZoneOffset.UTC`][9]. \r\n\r\n    OffsetDateTime odt = ldt.atOffset( ZoneOffset.UTC ) ;\r\n\r\n\r\n# `ZoneId` &amp; `ZonedDateTime`\r\n\r\nYou asked:\r\n\r\n&gt;And then how do I convert it to another string which represents the same date/time in e.g. America/NewYork time zone?\r\n\r\nDefine your desired time zone. Use `ZoneId` for a zone (`ZoneOffset` for a mere offset).\r\n\r\n    ZoneId zoneId = ZoneId.of( &quot;America/New_York&quot; ) ;\r\n\r\n[Apply that time zone][10] to produce a `ZonedDateTime`.\r\n\r\n    ZonedDateTime zdt = odt.atZoneSameInstant( zoneId ) ;\r\n\r\nIn this example, **both `odt` and `zdt` represent the same simultaneous  moment**, the same point on the timeline. That moment is what is meant by Instant in the method name `atZoneSameInstant` and in the class `Instant`. The `odt` and `zdt` variables differ in their wall-clock time &amp; calendar. Like someone in Reykjav&#237;k Iceland calling someone in Los Angeles California  when each party simultaneously glances at the clock and calendar hanging on their respective wall, they see a different time and date.\r\n\r\nIn contrast, the `LocalDateTime` variable named `ldt` does *not* represent a moment, is *not* a point on the timeline. That class purposely lacks the context of a time zone or offset. So the `LocalDateTime` class cannot represent a moment.\r\n\r\n\r\n  [1]: https://ideone.com/AvE9ZA\r\n  [2]: https://stackoverflow.com/questions/76072437/parse-non-utc-date-string-as-utc-instant-and-print-it-out-in-another-timezone#comment134162675_76072732\r\n  [3]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Instant.html\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZoneOffset.html\r\n  [6]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZoneId.html\r\n  [7]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/OffsetDateTime.html\r\n  [8]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html\r\n  [9]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZoneOffset.html#UTC\r\n  [10]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/OffsetDateTime.html#atZoneSameInstant(java.time.ZoneId)","title":"Parse non-UTC date string as UTC Instant, and print it out in another TimeZone","body":"<h1>tl;dr</h1>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime                           // Represent a date with time-of-day, but lacking the context of a time zone or offset from UTC.\n.parse( &quot;2023-02-17T03:56:50.254&quot; )     // Parse text in standard ISO 8601 format.\n.atOffset(                              // Assign an offset to this date-with-time.\n    ZoneOffset.UTC                      // Constant for an offset-from-UTC of zero hours-minutes-seconds.\n)                                       // Returns an `OffsetDateTime` object.\n.atZoneSameInstant(                     // Adjust from a moment as seen with an offset of zero to being seen with a time zone some number of hours-minutes-seconds ahead/behind UTC.\n    ZoneId.of( &quot;America/New_York&quot; )     // Represent a time zone. Name is in format of Continent/Region. \n)                                       // Returns a `ZonedDateTime` object.\n.toString()                             // Generate text in standard ISO 8601 format extended wisely to append the name of the zone in square brackets.\n</code></pre>\n<p>See this code <a href=\"https://ideone.com/AvE9ZA\" rel=\"nofollow noreferrer\">run at Ideone.com</a>. Notice how the date as well as the time-of-day differ from that of the input.</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-02-16T22:56:50.254-05:00[America/New_York]\n</code></pre>\n<h1>Offset versus zone</h1>\n<p>Per the <a href=\"https://stackoverflow.com/questions/76072437/parse-non-utc-date-string-as-utc-instant-and-print-it-out-in-another-timezone#comment134162675_76072732\">Comment by Ole V.V.</a>, the appropriate class here is <code>OffsetDateTime</code> rather than <code>ZonedDateTime</code>.</p>\n<ul>\n<li>An <strong><em>offset</em> is merely a number</strong> hours, minutes, and second ahead of or behind the temporal meridian of <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a>.</li>\n<li>A <strong><em>time zone</em> is a named history</strong> of the past, present, and future changes to the offset used by the people of a particular region as decided by their politicians. Named in format of <code>Continent/Region</code>.</li>\n</ul>\n<p>The <em>java.time</em> classes offer two classes to represent each concept:</p>\n<ul>\n<li><code>ZoneOffset</code></li>\n<li><code>ZoneId</code></li>\n</ul>\n<p>And the <em>java.time</em> classes offer two classes to represent a moment as seen in each way.</p>\n<ul>\n<li><code>OffsetDateTime</code></li>\n<li><code>ZonedDateTime</code></li>\n</ul>\n<p>By the way, the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> class is a more basic building-block class in <em>java.time</em>, representing a moment as seen in UTC, always in UTC (an offset of zero).</p>\n<h1><code>LocalDateTime</code></h1>\n<p>So, yes parse your input as date with time-of-day, a <code>LocalDateTime</code>.</p>\n<pre><code>LocalDateTime ldt = LocalDateTime.parse( &quot;2023-02-17T03:56:50.254&quot; ) ;\n</code></pre>\n<p>The <code>LocalDateTime</code> does <em>not</em> represent a moment, as it lacks the context of an offset or zone.</p>\n<h1><code>ZoneOffet</code> &amp; <code>OffsetDateTime</code></h1>\n<p>You said:</p>\n<blockquote>\n<p>How do I parse this string taking into account it's actually in UTC</p>\n</blockquote>\n<p>If you are certain that date and time was intended to represent a moment &quot;in UTC&quot;, that is with an offset of zero hours-minutes-seconds, then apply a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZoneOffset.html\" rel=\"nofollow noreferrer\"><code>ZoneOffset</code></a> rather than a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZoneId.html\" rel=\"nofollow noreferrer\"><code>ZoneId</code></a> to produce an <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a> rather than a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a>.</p>\n<p>Java comes with a constant defined for an offset of zero, <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZoneOffset.html#UTC\" rel=\"nofollow noreferrer\"><code>ZoneOffset.UTC</code></a>.</p>\n<pre><code>OffsetDateTime odt = ldt.atOffset( ZoneOffset.UTC ) ;\n</code></pre>\n<h1><code>ZoneId</code> &amp; <code>ZonedDateTime</code></h1>\n<p>You asked:</p>\n<blockquote>\n<p>And then how do I convert it to another string which represents the same date/time in e.g. America/NewYork time zone?</p>\n</blockquote>\n<p>Define your desired time zone. Use <code>ZoneId</code> for a zone (<code>ZoneOffset</code> for a mere offset).</p>\n<pre><code>ZoneId zoneId = ZoneId.of( &quot;America/New_York&quot; ) ;\n</code></pre>\n<p><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/OffsetDateTime.html#atZoneSameInstant(java.time.ZoneId)\" rel=\"nofollow noreferrer\">Apply that time zone</a> to produce a <code>ZonedDateTime</code>.</p>\n<pre><code>ZonedDateTime zdt = odt.atZoneSameInstant( zoneId ) ;\n</code></pre>\n<p>In this example, <strong>both <code>odt</code> and <code>zdt</code> represent the same simultaneous  moment</strong>, the same point on the timeline. That moment is what is meant by Instant in the method name <code>atZoneSameInstant</code> and in the class <code>Instant</code>. The <code>odt</code> and <code>zdt</code> variables differ in their wall-clock time &amp; calendar. Like someone in Reykjavk Iceland calling someone in Los Angeles California  when each party simultaneously glances at the clock and calendar hanging on their respective wall, they see a different time and date.</p>\n<p>In contrast, the <code>LocalDateTime</code> variable named <code>ldt</code> does <em>not</em> represent a moment, is <em>not</em> a point on the timeline. That class purposely lacks the context of a time zone or offset. So the <code>LocalDateTime</code> class cannot represent a moment.</p>\n"}],"owner":{"account_id":2660877,"reputation":38533,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":3,"score":1,"last_activity_date":1682712364,"creation_date":1682074403,"question_id":76072437,"body_markdown":"I am using Java 11.  \r\n\r\nI have a datetime string which looks like this \r\n\r\n**&quot;2023-02-17T03:56:50.254&quot;** \r\n\r\nBut I know it represents a point in time in UTC time zone.  \r\n\r\nHow do I parse this string taking into account it&#39;s actually in UTC (the parsing has to be independent of my default JVM time-zone)? \r\n\r\nAnd then how do I convert it to another string which represents the same date/time in e.g. America/NewYork time zone?     \r\n\r\n\r\nThere are many parsing examples here but none of them seems to represent exactly my case.   \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Parse non-UTC date string as UTC Instant, and print it out in another TimeZone","body":"<p>I am using Java 11.</p>\n<p>I have a datetime string which looks like this</p>\n<p><strong>&quot;2023-02-17T03:56:50.254&quot;</strong></p>\n<p>But I know it represents a point in time in UTC time zone.</p>\n<p>How do I parse this string taking into account it's actually in UTC (the parsing has to be independent of my default JVM time-zone)?</p>\n<p>And then how do I convert it to another string which represents the same date/time in e.g. America/NewYork time zone?</p>\n<p>There are many parsing examples here but none of them seems to represent exactly my case.</p>\n"},{"tags":["java","json","spring-mvc","postman"],"comments":[{"owner":{"account_id":17648796,"reputation":619,"user_id":12809667,"display_name":"Ray Zion"},"score":2,"creation_date":1597144546,"post_id":39037049,"comment_id":112040839,"body_markdown":"AFTER ALL IS SAID AND DONE\nthis fixed my issue add `[]` to the name of the file upload parameter eg.\n`image[]`\n`file[]`\n`upload[]`","body":"AFTER ALL IS SAID AND DONE this fixed my issue add <code>[]</code> to the name of the file upload parameter eg. <code>image[]</code> <code>file[]</code> <code>upload[]</code>"}],"answers":[{"tags":[],"owner":{"account_id":8690774,"reputation":771,"user_id":6503727,"display_name":"burakozgul"},"down_vote_count":18,"up_vote_count":53,"is_accepted":false,"score":35,"last_activity_date":1642380401,"creation_date":1471603884,"answer_id":39037196,"question_id":39037049,"body_markdown":"Like this :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nBody -&gt; form-data -&gt; select file \r\n\r\nYou must write &quot;file&quot; instead of &quot;name&quot;\r\n\r\nAlso you can send JSON data from Body -&gt; raw field. (Just paste JSON string)\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/OvBFy.png\r\n  [2]: https://i.stack.imgur.com/qltDv.png","title":"How to upload a file and JSON data in Postman?","body":"<p>Like this :</p>\n<p><a href=\"https://i.stack.imgur.com/OvBFy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/OvBFy.png\" alt=\"enter image description here\" /></a></p>\n<p>Body -&gt; form-data -&gt; select file</p>\n<p>You must write &quot;file&quot; instead of &quot;name&quot;</p>\n<p>Also you can send JSON data from Body -&gt; raw field. (Just paste JSON string)</p>\n<p><a href=\"https://i.stack.imgur.com/qltDv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qltDv.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":4097326,"reputation":722,"user_id":3363715,"display_name":"Sandesh Jain"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1471604294,"creation_date":1471604294,"answer_id":39037341,"question_id":39037049,"body_markdown":"If you are using cookies to keep session, you can use **interceptor** to share cookies from browser to postman.\r\n\r\nAlso to upload a file you can use form-data tab under body tab on postman, In which you can provide data in key-value format and for each key you can select the type of value text/file. when you select file type option appeared to upload the file.","title":"How to upload a file and JSON data in Postman?","body":"<p>If you are using cookies to keep session, you can use <strong>interceptor</strong> to share cookies from browser to postman.</p>\n\n<p>Also to upload a file you can use form-data tab under body tab on postman, In which you can provide data in key-value format and for each key you can select the type of value text/file. when you select file type option appeared to upload the file.</p>\n"},{"tags":[],"owner":{"account_id":2246079,"reputation":7967,"user_id":1979380,"accept_rate":89,"display_name":"jarvo69"},"down_vote_count":8,"up_vote_count":821,"is_accepted":true,"score":813,"last_activity_date":1655318477,"creation_date":1471605968,"answer_id":39037889,"question_id":39037049,"body_markdown":"In postman, set method type to **POST**.\r\n\r\nThen select\r\nBody -&gt; form-data -&gt; Enter your parameter name (**file** according to your code)\r\n\r\nOn the right side of the Key field, while hovering your mouse over it, there is a **dropdown menu** to select between **Text/File**. Select File, then a &quot;Select Files&quot; button will appear in the Value field.\r\n\r\nFor rest of **&quot;text&quot; based parameters**, you can post it like normally you do with postman. Just enter parameter name and select &quot;text&quot; from that right side dropdown menu and enter any value for it, hit send button. Your controller method should get called.","title":"How to upload a file and JSON data in Postman?","body":"<p>In postman, set method type to <strong>POST</strong>.</p>\n<p>Then select\nBody -&gt; form-data -&gt; Enter your parameter name (<strong>file</strong> according to your code)</p>\n<p>On the right side of the Key field, while hovering your mouse over it, there is a <strong>dropdown menu</strong> to select between <strong>Text/File</strong>. Select File, then a &quot;Select Files&quot; button will appear in the Value field.</p>\n<p>For rest of <strong>&quot;text&quot; based parameters</strong>, you can post it like normally you do with postman. Just enter parameter name and select &quot;text&quot; from that right side dropdown menu and enter any value for it, hit send button. Your controller method should get called.</p>\n"},{"tags":[],"owner":{"account_id":1534622,"reputation":1593,"user_id":1430991,"display_name":"gce"},"down_vote_count":4,"up_vote_count":92,"is_accepted":false,"score":88,"last_activity_date":1493910060,"creation_date":1493910060,"answer_id":43786496,"question_id":39037049,"body_markdown":"Maybe you could do it this way:\r\n\r\n[![postman_file_upload_with_json][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CcnSb.png","title":"How to upload a file and JSON data in Postman?","body":"<p>Maybe you could do it this way:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CcnSb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CcnSb.png\" alt=\"postman_file_upload_with_json\"></a></p>\n"},{"tags":[],"owner":{"account_id":7064942,"reputation":244,"user_id":5408574,"accept_rate":50,"display_name":"Rohit Thakur"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1509613240,"creation_date":1509613240,"answer_id":47071190,"question_id":39037049,"body_markdown":" 1. Don&#39;t give any headers. \r\n 2. Put your json data inside a .json file.\r\n 3. Select your both files one is your .txt file and other is .json file\r\n    for your request param keys.\r\n\r\n ","title":"How to upload a file and JSON data in Postman?","body":"<ol>\n<li>Don't give any headers. </li>\n<li>Put your json data inside a .json file.</li>\n<li>Select your both files one is your .txt file and other is .json file\nfor your request param keys.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9326891,"reputation":836,"user_id":6923849,"display_name":"Marcos Dantas"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1514853525,"creation_date":1514853525,"answer_id":48054400,"question_id":39037049,"body_markdown":"If somebody needed:\r\n\r\n**body -&gt; form-data**\r\n\r\nAdd field name as array\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AwTNO.png","title":"How to upload a file and JSON data in Postman?","body":"<p>If somebody needed:</p>\n\n<p><strong>body -> form-data</strong></p>\n\n<p>Add field name as array</p>\n\n<p><a href=\"https://i.stack.imgur.com/AwTNO.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AwTNO.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":264212,"reputation":11412,"user_id":550314,"accept_rate":75,"display_name":"Chris F Carroll"},"down_vote_count":1,"up_vote_count":374,"is_accepted":false,"score":373,"last_activity_date":1574391152,"creation_date":1527259318,"answer_id":50531746,"question_id":39037049,"body_markdown":"**The Missing Visual Guide**\r\n\r\nYou must *first* find the nearly-invisible pale-grey-on-white dropdown for `File` which is the magic key that unlocks the `Choose Files` button.\r\n\r\n*After* you choose `POST`, *then* choose `Body-&gt;form-data`, *then* find the File dropdown, and *then* choose &#39;File&#39;, *only then* will the &#39;Choose Files&#39; button magically appear:\r\n\r\n[![Postman POST file setup - (Text,File) dropdown highlighted][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GygPZ.png","title":"How to upload a file and JSON data in Postman?","body":"<p><strong>The Missing Visual Guide</strong></p>\n\n<p>You must <em>first</em> find the nearly-invisible pale-grey-on-white dropdown for <code>File</code> which is the magic key that unlocks the <code>Choose Files</code> button.</p>\n\n<p><em>After</em> you choose <code>POST</code>, <em>then</em> choose <code>Body-&gt;form-data</code>, <em>then</em> find the File dropdown, and <em>then</em> choose 'File', <em>only then</em> will the 'Choose Files' button magically appear:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GygPZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GygPZ.png\" alt=\"Postman POST file setup - (Text,File) dropdown highlighted\"></a></p>\n"},{"tags":[],"owner":{"account_id":362669,"reputation":5105,"user_id":705982,"accept_rate":83,"display_name":"kubilay"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1528099208,"creation_date":1528099208,"answer_id":50675894,"question_id":39037049,"body_markdown":"If you want to make a `PUT` request, just do everything as a `POST` request but add `_method` =&gt; `PUT` to your `form-data` parameters.","title":"How to upload a file and JSON data in Postman?","body":"<p>If you want to make a <code>PUT</code> request, just do everything as a <code>POST</code> request but add <code>_method</code> => <code>PUT</code> to your <code>form-data</code> parameters.</p>\n"},{"tags":[],"owner":{"account_id":8627048,"reputation":304,"user_id":6459952,"display_name":"Sebastian Ardila"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1540584107,"creation_date":1539204343,"answer_id":52748531,"question_id":39037049,"body_markdown":"If somebody wants to send json data in form-data format just need to declare the variables like this\r\n\r\nPostman:\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/e6d3Q.png&quot; /&gt;\r\n\r\nAs you see, the description parameter will be in basic json format, result of that:\r\n\r\n    { description: { spanish: &#39;hola&#39;, english: &#39;hello&#39; } }","title":"How to upload a file and JSON data in Postman?","body":"<p>If somebody wants to send json data in form-data format just need to declare the variables like this</p>\n\n<p>Postman:</p>\n\n<p><img src=\"https://i.stack.imgur.com/e6d3Q.png\" /></p>\n\n<p>As you see, the description parameter will be in basic json format, result of that:</p>\n\n<pre><code>{ description: { spanish: 'hola', english: 'hello' } }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10828745,"reputation":121,"user_id":7963878,"display_name":"Ajay k"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1540567619,"creation_date":1540562913,"answer_id":53010568,"question_id":39037049,"body_markdown":"\r\n[![][1]][1]\r\n\r\nIf you need like\r\nUpload file in **multipart** using form data and send **json** data(Dto object) in same **POST** Request\r\n\r\nGet yor JSON object as String in Controller and make it Deserialize by adding this line\r\n\r\n    ContactDto contactDto  = new ObjectMapper().readValue(yourJSONString, ContactDto.class);\r\n    \r\n    \r\n  [1]: https://i.stack.imgur.com/X1Lym.png","title":"How to upload a file and JSON data in Postman?","body":"<p><a href=\"https://i.stack.imgur.com/X1Lym.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/X1Lym.png\" alt=\"\"></a></p>\n\n<p>If you need like\nUpload file in <strong>multipart</strong> using form data and send <strong>json</strong> data(Dto object) in same <strong>POST</strong> Request</p>\n\n<p>Get yor JSON object as String in Controller and make it Deserialize by adding this line</p>\n\n<pre><code>ContactDto contactDto  = new ObjectMapper().readValue(yourJSONString, ContactDto.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15614987,"reputation":614,"user_id":11265399,"display_name":"vinci mojamdar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1553681557,"creation_date":1553681557,"answer_id":55374680,"question_id":39037049,"body_markdown":"I needed to pass both: a file and an integer. I did it this way:\r\n\r\n1. \r\n   needed to pass a file to upload:\r\n   did it as per Sumit&#39;s answer.\r\n \r\n   Request type : **POST**\r\n\r\n   **Body** -&gt; **form-data** \r\n\r\n   under the heading **KEY**, entered the name of the variable (&#39;file&#39; in my backend code). \r\n\r\n   in the backend:\r\n\r\n   `file = request.files[&#39;file&#39;]`\r\n\r\n Next to &#39;file&#39;, there&#39;s a drop-down box which allows you to choose between &#39;File&#39; or &#39;Text&#39;. Chose &#39;File&#39; and under the heading **VALUE**, &#39;Select files&#39; appeared. Clicked on this which opened a window to select the file.\r\n\r\n\r\n2.\r\nneeded to pass an integer: \r\n\r\nwent to:\r\n\r\n**Params**\r\n\r\nentered variable name (e.g.: id) under **KEY** and its value (e.g.: 1) under **VALUE**\r\n\r\nin the backend:\r\n\r\n    id = request.args.get(&#39;id&#39;)\r\n\r\nWorked!","title":"How to upload a file and JSON data in Postman?","body":"<p>I needed to pass both: a file and an integer. I did it this way:</p>\n\n<ol>\n<li><p>needed to pass a file to upload:\ndid it as per Sumit's answer.</p>\n\n<p>Request type : <strong>POST</strong></p>\n\n<p><strong>Body</strong> -> <strong>form-data</strong> </p>\n\n<p>under the heading <strong>KEY</strong>, entered the name of the variable ('file' in my backend code). </p>\n\n<p>in the backend:</p>\n\n<p><code>file = request.files['file']</code></p>\n\n<p>Next to 'file', there's a drop-down box which allows you to choose between 'File' or 'Text'. Chose 'File' and under the heading <strong>VALUE</strong>, 'Select files' appeared. Clicked on this which opened a window to select the file.</p></li>\n</ol>\n\n<p>2.\nneeded to pass an integer: </p>\n\n<p>went to:</p>\n\n<p><strong>Params</strong></p>\n\n<p>entered variable name (e.g.: id) under <strong>KEY</strong> and its value (e.g.: 1) under <strong>VALUE</strong></p>\n\n<p>in the backend:</p>\n\n<pre><code>id = request.args.get('id')\n</code></pre>\n\n<p>Worked!</p>\n"},{"tags":[],"owner":{"account_id":12273240,"reputation":239,"user_id":8957848,"display_name":"otamega"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1557037381,"creation_date":1557037381,"answer_id":55989374,"question_id":39037049,"body_markdown":"[![Postman multipart form-data content-type][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YTh8M.png\r\n\r\nSelect [Content Type] from [SHOW COLUMNS] then set content-type of &quot;application/json&quot; to the parameter of json text.","title":"How to upload a file and JSON data in Postman?","body":"<p><a href=\"https://i.stack.imgur.com/YTh8M.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YTh8M.png\" alt=\"Postman multipart form-data content-type\"></a></p>\n\n<p>Select [Content Type] from [SHOW COLUMNS] then set content-type of \"application/json\" to the parameter of json text.</p>\n"},{"tags":[],"owner":{"account_id":1250652,"reputation":1029,"user_id":1211127,"display_name":"Anand_5050"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1577035080,"creation_date":1577035080,"answer_id":59446435,"question_id":39037049,"body_markdown":"**Use below code in spring rest side :**\r\n\r\n\r\n    @PostMapping(value = Constant.API_INITIAL + &quot;/uploadFile&quot;)\r\n        public UploadFileResponse uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file,String jsonFileVo) {\r\n    \t\tFileUploadVo fileUploadVo = null;\r\n    \t\ttry {\r\n    \t\t\tfileUploadVo = new ObjectMapper().readValue(jsonFileVo, FileUploadVo.class);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lpV4c.png","title":"How to upload a file and JSON data in Postman?","body":"<p><strong>Use below code in spring rest side :</strong></p>\n\n<pre><code>@PostMapping(value = Constant.API_INITIAL + \"/uploadFile\")\n    public UploadFileResponse uploadFile(@RequestParam(\"file\") MultipartFile file,String jsonFileVo) {\n        FileUploadVo fileUploadVo = null;\n        try {\n            fileUploadVo = new ObjectMapper().readValue(jsonFileVo, FileUploadVo.class);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/lpV4c.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lpV4c.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":10890404,"reputation":899,"user_id":8006405,"display_name":"Ahsan Farooq"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1609496905,"creation_date":1584612637,"answer_id":60754930,"question_id":39037049,"body_markdown":"The way to send mulitpart data which containts a file with the json data is the following, we need to set the content-type of the respective json key fields to &#39;application/json&#39; in the postman body tab like the following:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yqJGU.png","title":"How to upload a file and JSON data in Postman?","body":"<p>The way to send mulitpart data which containts a file with the json data is the following, we need to set the content-type of the respective json key fields to 'application/json' in the postman body tab like the following:\n<a href=\"https://i.stack.imgur.com/yqJGU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yqJGU.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":3507932,"reputation":172,"user_id":3069985,"accept_rate":43,"display_name":"Hritcu Andrei"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1585152229,"creation_date":1585152229,"answer_id":60852624,"question_id":39037049,"body_markdown":"For each form data key you can set Content-Type, there is a postman button on the right to add the Content-Type column, and you don&#39;t have to parse a json from a string inside your Controller.","title":"How to upload a file and JSON data in Postman?","body":"<p>For each form data key you can set Content-Type, there is a postman button on the right to add the Content-Type column, and you don't have to parse a json from a string inside your Controller.</p>\n"},{"tags":[],"owner":{"account_id":17036151,"reputation":11,"user_id":12325147,"display_name":"Anshu Kumar"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1598199200,"creation_date":1598198438,"answer_id":63549107,"question_id":39037049,"body_markdown":"At Back-end part\r\n\r\nRest service in Controller will have mixed @RequestPart and MultipartFile to serve such Multipart + JSON request.\r\n\r\n    @RequestMapping(value = &quot;/executesampleservice&quot;, method = RequestMethod.POST,\r\n    consumes = {&quot;multipart/form-data&quot;})\r\n\r\n    @ResponseBody\r\n    public boolean yourEndpointMethod(\r\n        @RequestPart(&quot;properties&quot;) @Valid ConnectionProperties properties,\r\n        @RequestPart(&quot;file&quot;) @Valid @NotNull @NotBlank MultipartFile file) {\r\n    return projectService.executeSampleService(properties, file);\r\n    }\r\n\r\nAt front-end :\r\n    \r\n    formData = new FormData();\r\n\r\n    formData.append(&quot;file&quot;, document.forms[formName].file.files[0]);\r\n    formData.append(&#39;properties&#39;, new Blob([JSON.stringify({\r\n                &quot;name&quot;: &quot;root&quot;,\r\n                &quot;password&quot;: &quot;root&quot;                    \r\n            })], {\r\n                type: &quot;application/json&quot;\r\n            }));\r\n\r\nSee in the image (POSTMAN request):\r\n\r\n[Click to view Postman request in form data for both file and json ][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mosdz.png","title":"How to upload a file and JSON data in Postman?","body":"<p>At Back-end part</p>\n<p>Rest service in Controller will have mixed @RequestPart and MultipartFile to serve such Multipart + JSON request.</p>\n<pre><code>@RequestMapping(value = &quot;/executesampleservice&quot;, method = RequestMethod.POST,\nconsumes = {&quot;multipart/form-data&quot;})\n\n@ResponseBody\npublic boolean yourEndpointMethod(\n    @RequestPart(&quot;properties&quot;) @Valid ConnectionProperties properties,\n    @RequestPart(&quot;file&quot;) @Valid @NotNull @NotBlank MultipartFile file) {\nreturn projectService.executeSampleService(properties, file);\n}\n</code></pre>\n<p>At front-end :</p>\n<pre><code>formData = new FormData();\n\nformData.append(&quot;file&quot;, document.forms[formName].file.files[0]);\nformData.append('properties', new Blob([JSON.stringify({\n            &quot;name&quot;: &quot;root&quot;,\n            &quot;password&quot;: &quot;root&quot;                    \n        })], {\n            type: &quot;application/json&quot;\n        }));\n</code></pre>\n<p>See in the image (POSTMAN request):</p>\n<p><a href=\"https://i.stack.imgur.com/mosdz.png\" rel=\"nofollow noreferrer\">Click to view Postman request in form data for both file and json </a></p>\n"},{"tags":[],"owner":{"account_id":6404121,"reputation":1186,"user_id":4965921,"accept_rate":100,"display_name":"Tom McDonough"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602842339,"creation_date":1602842339,"answer_id":64386976,"question_id":39037049,"body_markdown":"If you want the Id and File in one object you can add your request object to a method as standard and then within Postman set the Body to form-data and prefix your keys with your request object name. e.g. request.SessionId and request.File.","title":"How to upload a file and JSON data in Postman?","body":"<p>If you want the Id and File in one object you can add your request object to a method as standard and then within Postman set the Body to form-data and prefix your keys with your request object name. e.g. request.SessionId and request.File.</p>\n"},{"tags":[],"owner":{"account_id":17519416,"reputation":671,"user_id":12705795,"display_name":"kishan maharana"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1602942712,"creation_date":1602942712,"answer_id":64403210,"question_id":39037049,"body_markdown":"To send image along with json data in postman you just have to follow the below steps .\r\n\r\n - Make your method to post in postman\r\n - go to the body section and click on form-data\r\n - provide your field name select **file** from the dropdown list as shown below \r\n - you can also provide your other fields .\r\n - now just write your image storing code in your controller as shown below .\r\n\r\n**postman :**\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/k3m0y.png\r\n\r\n**my controller :**\r\n\r\n    public function sendImage(Request $request)\r\n    {\r\n        $image=new ImgUpload;  \r\n        if($request-&gt;hasfile(&#39;image&#39;))  \r\n        {  \r\n            $file=$request-&gt;file(&#39;image&#39;);  \r\n            $extension=$file-&gt;getClientOriginalExtension();  \r\n            $filename=time().&#39;.&#39;.$extension;  \r\n            $file-&gt;move(&#39;public/upload/userimg/&#39;,$filename);  \r\n            $image-&gt;image=$filename;  \r\n        }  \r\n        else  \r\n        {  \r\n            return $request;  \r\n            $image-&gt;image=&#39;&#39;;  \r\n        }  \r\n        $image-&gt;save();\r\n        return response()-&gt;json([&#39;response&#39;=&gt;[&#39;code&#39;=&gt;&#39;200&#39;,&#39;message&#39;=&gt;&#39;image uploaded successfull&#39;]]);\r\n    }\r\n\r\nThat&#39;s it hope it will help you\r\n\r\n","title":"How to upload a file and JSON data in Postman?","body":"<p>To send image along with json data in postman you just have to follow the below steps .</p>\n<ul>\n<li>Make your method to post in postman</li>\n<li>go to the body section and click on form-data</li>\n<li>provide your field name select <strong>file</strong> from the dropdown list as shown below</li>\n<li>you can also provide your other fields .</li>\n<li>now just write your image storing code in your controller as shown below .</li>\n</ul>\n<p><strong>postman :</strong>\n<a href=\"https://i.stack.imgur.com/k3m0y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k3m0y.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>my controller :</strong></p>\n<pre><code>public function sendImage(Request $request)\n{\n    $image=new ImgUpload;  \n    if($request-&gt;hasfile('image'))  \n    {  \n        $file=$request-&gt;file('image');  \n        $extension=$file-&gt;getClientOriginalExtension();  \n        $filename=time().'.'.$extension;  \n        $file-&gt;move('public/upload/userimg/',$filename);  \n        $image-&gt;image=$filename;  \n    }  \n    else  \n    {  \n        return $request;  \n        $image-&gt;image='';  \n    }  \n    $image-&gt;save();\n    return response()-&gt;json(['response'=&gt;['code'=&gt;'200','message'=&gt;'image uploaded successfull']]);\n}\n</code></pre>\n<p>That's it hope it will help you</p>\n"},{"tags":[],"owner":{"account_id":11924356,"reputation":485,"user_id":8726069,"display_name":"Ankur prajapati"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1611249166,"creation_date":1611249166,"answer_id":65832429,"question_id":39037049,"body_markdown":"Kindly follow steps from top to bottom as shown in below image.\r\n\r\n[![postman image][1]][1]\r\n\r\n\r\nAt third step you will find dropdown of type selection as shown in below image\r\n\r\n[![postman dropdown][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lice6.png\r\n  [2]: https://i.stack.imgur.com/qhFjC.png","title":"How to upload a file and JSON data in Postman?","body":"<p>Kindly follow steps from top to bottom as shown in below image.</p>\n<p><a href=\"https://i.stack.imgur.com/lice6.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lice6.png\" alt=\"postman image\" /></a></p>\n<p>At third step you will find dropdown of type selection as shown in below image</p>\n<p><a href=\"https://i.stack.imgur.com/qhFjC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qhFjC.png\" alt=\"postman dropdown\" /></a></p>\n"},{"tags":[],"owner":{"account_id":8073710,"reputation":2832,"user_id":6085521,"display_name":"Farid Chowdhury"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1619732013,"creation_date":1619732013,"answer_id":67325344,"question_id":39037049,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nI got confused after seeing all of the answers, I couldn&#39;t find any proper screenshot to bring the `Content Type` column. After some time, I found it by my own. Hope this will help somebody like me. \r\n\r\nHere is the steps:\r\n\r\n1) click on **red** marked area of postman.\r\n2) Now check the **green** marked option (`Content Type`).\r\n3) Now change the search content type, in the **yellow** marked area. \r\n\r\nIn my case:\r\n1) `invoice_id_ls` (key) contains the `json` data. \r\n2) `documents` contains the `file` data. \r\n3) `placed_amount` contains `normal text` string.\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5y67n.jpg","title":"How to upload a file and JSON data in Postman?","body":"<p><a href=\"https://i.stack.imgur.com/5y67n.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5y67n.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I got confused after seeing all of the answers, I couldn't find any proper screenshot to bring the <code>Content Type</code> column. After some time, I found it by my own. Hope this will help somebody like me.</p>\n<p>Here is the steps:</p>\n<ol>\n<li>click on <strong>red</strong> marked area of postman.</li>\n<li>Now check the <strong>green</strong> marked option (<code>Content Type</code>).</li>\n<li>Now change the search content type, in the <strong>yellow</strong> marked area.</li>\n</ol>\n<p>In my case:</p>\n<ol>\n<li><code>invoice_id_ls</code> (key) contains the <code>json</code> data.</li>\n<li><code>documents</code> contains the <code>file</code> data.</li>\n<li><code>placed_amount</code> contains <code>normal text</code> string.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5663168,"reputation":55596,"user_id":4480164,"accept_rate":73,"display_name":"code-8"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1620663983,"creation_date":1620663371,"answer_id":67474044,"question_id":39037049,"body_markdown":"Body &gt; binary &gt; Select File \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jyDsF.png","title":"How to upload a file and JSON data in Postman?","body":"<p>Body &gt; binary &gt; Select File</p>\n<p><a href=\"https://i.stack.imgur.com/jyDsF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jyDsF.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":22802497,"reputation":21,"user_id":16954958,"display_name":"Rizka Khoirotunnisa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1632311271,"creation_date":1632311271,"answer_id":69283606,"question_id":39037049,"body_markdown":"first, set post in method and fill link API\r\n\r\nThen select Body -&gt; form-data -&gt; Enter your parameter name (file according to your code)\r\n\r\n\r\n\r\n","title":"How to upload a file and JSON data in Postman?","body":"<p>first, set post in method and fill link API</p>\n<p>Then select Body -&gt; form-data -&gt; Enter your parameter name (file according to your code)</p>\n"},{"tags":[],"owner":{"account_id":7372298,"reputation":41,"user_id":5612127,"display_name":"jitendra singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646716573,"creation_date":1646716573,"answer_id":71390332,"question_id":39037049,"body_markdown":"The steps of uploading a file through postman along with passing some input data is very well discussed in below blog along with the screenshot. In this blog, the api code is written in node js. You can go through it once to have more clarity.\r\n\r\nhttps://jksnu.blogspot.com/2021/09/how-to-create-post-request-with.html","title":"How to upload a file and JSON data in Postman?","body":"<p>The steps of uploading a file through postman along with passing some input data is very well discussed in below blog along with the screenshot. In this blog, the api code is written in node js. You can go through it once to have more clarity.</p>\n<p><a href=\"https://jksnu.blogspot.com/2021/09/how-to-create-post-request-with.html\" rel=\"nofollow noreferrer\">https://jksnu.blogspot.com/2021/09/how-to-create-post-request-with.html</a></p>\n"},{"tags":[],"owner":{"account_id":14028474,"reputation":91,"user_id":10179585,"display_name":"Darren Quadros"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1656971445,"creation_date":1656824191,"answer_id":72843992,"question_id":39037049,"body_markdown":"You can send both Image and optional/mandatory parameters.\r\n\r\nIn postman, there is `Params` tab.\r\n\r\n![](https://i.ibb.co/xDQ0KZL/ParamTab.jpg)","title":"How to upload a file and JSON data in Postman?","body":"<p>You can send both Image and optional/mandatory parameters.</p>\n<p>In postman, there is <code>Params</code> tab.</p>\n<p><img src=\"https://i.ibb.co/xDQ0KZL/ParamTab.jpg\" alt=\"\" /></p>\n"}],"owner":{"account_id":8036268,"reputation":4660,"user_id":6059272,"display_name":"Harikrishnan K.N."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":998783,"favorite_count":0,"down_vote_count":0,"up_vote_count":434,"accepted_answer_id":39037889,"answer_count":24,"score":434,"last_activity_date":1682711901,"creation_date":1471603439,"question_id":39037049,"body_markdown":"I am using Spring MVC and this is my method:\r\n\r\n    /**\r\n    * Upload single file using Spring Controller.\r\n    */\r\n    @RequestMapping(value = &quot;/uploadFile&quot;, method = RequestMethod.POST)\r\n    public @ResponseBody ResponseEntity&lt;GenericResponseVO&lt;? extends IServiceVO&gt;&gt; uploadFileHandler(\r\n                @RequestParam(&quot;name&quot;) String name,\r\n                @RequestParam(&quot;file&quot;) MultipartFile file,\r\n                HttpServletRequest request,\r\n                HttpServletResponse response) {\r\n            \r\n        if (!file.isEmpty()) {\r\n            try {\r\n                byte[] bytes = file.getBytes();\r\n                \r\n                // Creating the directory to store file\r\n                String rootPath = System.getProperty(&quot;catalina.home&quot;);\r\n                File dir = new File(rootPath + File.separator + &quot;tmpFiles&quot;);\r\n                if (!dir.exists()) {\r\n                    dir.mkdirs();\r\n                }\r\n                \r\n                // Create the file on server\r\n                File serverFile = new File(dir.getAbsolutePath() + File.separator + name);\r\n                BufferedOutputStream stream = new BufferedOutputStream(new FileOutputStream(serverFile));\r\n                stream.write(bytes);\r\n                stream.close();\r\n                \r\n                System.out.println(&quot;Server File Location=&quot; + serverFile.getAbsolutePath());\r\n                \r\n                return null;\r\n            } catch (Exception e) {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n&lt;br&gt;\r\nI need to pass the session id in postman and also the file. How can I do that?","title":"How to upload a file and JSON data in Postman?","body":"<p>I am using Spring MVC and this is my method:</p>\n\n<pre><code>/**\n* Upload single file using Spring Controller.\n*/\n@RequestMapping(value = \"/uploadFile\", method = RequestMethod.POST)\npublic @ResponseBody ResponseEntity&lt;GenericResponseVO&lt;? extends IServiceVO&gt;&gt; uploadFileHandler(\n            @RequestParam(\"name\") String name,\n            @RequestParam(\"file\") MultipartFile file,\n            HttpServletRequest request,\n            HttpServletResponse response) {\n\n    if (!file.isEmpty()) {\n        try {\n            byte[] bytes = file.getBytes();\n\n            // Creating the directory to store file\n            String rootPath = System.getProperty(\"catalina.home\");\n            File dir = new File(rootPath + File.separator + \"tmpFiles\");\n            if (!dir.exists()) {\n                dir.mkdirs();\n            }\n\n            // Create the file on server\n            File serverFile = new File(dir.getAbsolutePath() + File.separator + name);\n            BufferedOutputStream stream = new BufferedOutputStream(new FileOutputStream(serverFile));\n            stream.write(bytes);\n            stream.close();\n\n            System.out.println(\"Server File Location=\" + serverFile.getAbsolutePath());\n\n            return null;\n        } catch (Exception e) {\n            return null;\n        }\n    }\n}\n</code></pre>\n\n<p><br>\nI need to pass the session id in postman and also the file. How can I do that?</p>\n"},{"tags":["java","spring-boot","docker","jackson","openshift"],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682711742,"creation_date":1682710501,"answer_id":76132770,"question_id":76131144,"body_markdown":"# tl;dr\r\n\r\nUse [`java.time.Instant`][1], not [`java.time.LocalDateTime`][2]. No issue with time zone.\r\n\r\n# Use `Instant`, not `LocalDateTime`\r\n\r\n&gt; uses java.util.Date on it&#39;s entity and dto objects and we are working to change to LocalDateTime\r\n\r\n`LocalDateTime` is the wrong class to use here. That class purposely lacks any concept of time zone or offset-from-UTC. Therefore, objects of that class cannot represent a moment, a specific point on the timeline. With just a date and a time-of-day, we have know way to know if you mean that time in Tokyo, Toulouse, or Toledo, for example  three very different moments several hours apart.\r\n\r\nThe class replacing `java.util.Date` is [`java.time.Instant`][1]. Both represent a moment, a specific point on the timeline, as seen with an offset of zero hours-minutes-seconds from UTC.\r\n\r\n&#128073; So **use `Instant`**. Your time zone issue goes away entirely. \r\n\r\n# ISO 8601\r\n\r\nWhen serializing textually to JSON, XML, etc., use only standard [ISO 8601][3] formats. For a moment in UTC, that would like this: `2023-04-28T19:31:41.078125Z`. The `Z` on the end is an abbreviation of `+00:00`, an offset of zero; pronounced Zulu. \r\n\r\nThe *java.time* classes use ISO 8601 formats by default when parsing/generating text. No need to specify a formatting pattern.\r\n\r\n    String output = myInstant.toString() ;\r\n\r\n and:\r\n\r\n    Instant myInstant = Instant.parse( input ) ;\r\n\r\n\r\n# Applying a time zone\r\n\r\n\r\nTo view that moment through the wall-clock time of a particular time zone, apply a `ZoneId` to get a `ZonedDateTime`.\r\n\r\n    ZoneId z = ZoneId.of( &quot;America/Vancouver&quot; ) ;\r\n    ZonedDateTime zdt = myInstant.atZone( z ) ;  // Same moment as the `Instant` object, but different wall-clock time &amp; possibly different date.\r\n\r\nIn this code, both `myInstant` and `zdt` represent the very same moment, the same simultaneous point on the timeline. Like two people calling each other in Vancouver BC and Reykjav&#237;k [Iceland][4], if both persons simultaneously look up at the calendar and clock on their respective walls, they will see a different time of day and possibly a different date.\r\n\r\n\r\n# Avoid default zone\r\n\r\n\r\n&gt; We are naturally having timezone issues when Jackson serializes our dto\r\n\r\nYou are **unnecessarily introducing time zone** where it is not needed.\r\n\r\nNotice how **none of the code above depends on a default** time zone. Write your code to avoid implicitly depending on the JVMs current default time zone. Always pass the optional time zone argument. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Instant.html\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalDateTime.html\r\n  [3]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [4]: https://en.wikipedia.org/wiki/Time_in_Iceland","title":"Jackson time-zone property in Spring Boot application.yaml works in IDE but not in docker container","body":"<h1>tl;dr</h1>\n<p>Use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>java.time.Instant</code></a>, not <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>java.time.LocalDateTime</code></a>. No issue with time zone.</p>\n<h1>Use <code>Instant</code>, not <code>LocalDateTime</code></h1>\n<blockquote>\n<p>uses java.util.Date on it's entity and dto objects and we are working to change to LocalDateTime</p>\n</blockquote>\n<p><code>LocalDateTime</code> is the wrong class to use here. That class purposely lacks any concept of time zone or offset-from-UTC. Therefore, objects of that class cannot represent a moment, a specific point on the timeline. With just a date and a time-of-day, we have know way to know if you mean that time in Tokyo, Toulouse, or Toledo, for example  three very different moments several hours apart.</p>\n<p>The class replacing <code>java.util.Date</code> is <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>java.time.Instant</code></a>. Both represent a moment, a specific point on the timeline, as seen with an offset of zero hours-minutes-seconds from UTC.</p>\n<p> So <strong>use <code>Instant</code></strong>. Your time zone issue goes away entirely.</p>\n<h1>ISO 8601</h1>\n<p>When serializing textually to JSON, XML, etc., use only standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> formats. For a moment in UTC, that would like this: <code>2023-04-28T19:31:41.078125Z</code>. The <code>Z</code> on the end is an abbreviation of <code>+00:00</code>, an offset of zero; pronounced Zulu.</p>\n<p>The <em>java.time</em> classes use ISO 8601 formats by default when parsing/generating text. No need to specify a formatting pattern.</p>\n<pre><code>String output = myInstant.toString() ;\n</code></pre>\n<p> and:</p>\n<pre><code>Instant myInstant = Instant.parse( input ) ;\n</code></pre>\n<h1>Applying a time zone</h1>\n<p>To view that moment through the wall-clock time of a particular time zone, apply a <code>ZoneId</code> to get a <code>ZonedDateTime</code>.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;America/Vancouver&quot; ) ;\nZonedDateTime zdt = myInstant.atZone( z ) ;  // Same moment as the `Instant` object, but different wall-clock time &amp; possibly different date.\n</code></pre>\n<p>In this code, both <code>myInstant</code> and <code>zdt</code> represent the very same moment, the same simultaneous point on the timeline. Like two people calling each other in Vancouver BC and Reykjavk <a href=\"https://en.wikipedia.org/wiki/Time_in_Iceland\" rel=\"nofollow noreferrer\">Iceland</a>, if both persons simultaneously look up at the calendar and clock on their respective walls, they will see a different time of day and possibly a different date.</p>\n<h1>Avoid default zone</h1>\n<blockquote>\n<p>We are naturally having timezone issues when Jackson serializes our dto</p>\n</blockquote>\n<p>You are <strong>unnecessarily introducing time zone</strong> where it is not needed.</p>\n<p>Notice how <strong>none of the code above depends on a default</strong> time zone. Write your code to avoid implicitly depending on the JVMs current default time zone. Always pass the optional time zone argument.</p>\n"}],"owner":{"account_id":2279697,"reputation":358,"user_id":2005109,"display_name":"cditcher"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682711742,"creation_date":1682696153,"question_id":76131144,"body_markdown":"Ok, full disclosure first. I am working on a project that uses java.util.Date on it&#39;s entity and dto objects and we are working to change to LocalDateTime. We are naturally having timezone issues when Jackson serializes our dto objects to JSON at the controller layer. We are working to change the Date to LocalDateTime, but in the interim, setting the following property:\r\n\r\n      jackson:\r\n        time-zone: Canada/Pacific\r\n\r\nworks to convert the date/time to the correct value. However, our application is deployed as a docker container hosted on Openshift. Once in docker, even on my local machine, I can change this value to anything and the date never changes. I have tried checking the TZ value in the linux container and it matches our timezone, etc. Any thoughts?","title":"Jackson time-zone property in Spring Boot application.yaml works in IDE but not in docker container","body":"<p>Ok, full disclosure first. I am working on a project that uses java.util.Date on it's entity and dto objects and we are working to change to LocalDateTime. We are naturally having timezone issues when Jackson serializes our dto objects to JSON at the controller layer. We are working to change the Date to LocalDateTime, but in the interim, setting the following property:</p>\n<pre><code>  jackson:\n    time-zone: Canada/Pacific\n</code></pre>\n<p>works to convert the date/time to the correct value. However, our application is deployed as a docker container hosted on Openshift. Once in docker, even on my local machine, I can change this value to anything and the date never changes. I have tried checking the TZ value in the linux container and it matches our timezone, etc. Any thoughts?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4383501,"reputation":16972,"user_id":5496177,"accept_rate":60,"display_name":"TheWanderer"},"score":0,"creation_date":1549723452,"post_id":54607294,"comment_id":96009671,"body_markdown":"Well you&#39;re setting the ID of each from 1-5, so, try `findViewById(1)`?","body":"Well you&#39;re setting the ID of each from 1-5, so, try <code>findViewById(1)</code>?"},{"owner":{"account_id":1710326,"reputation":10640,"user_id":1568530,"accept_rate":60,"display_name":"Vladyslav Matviienko"},"score":0,"creation_date":1549724000,"post_id":54607294,"comment_id":96009795,"body_markdown":"`setId(i)` don&#39;t do this. Those IDs might already been taken. You can store them in variables","body":"<code>setId(i)</code> don&#39;t do this. Those IDs might already been taken. You can store them in variables"},{"owner":{"account_id":4740119,"reputation":153,"user_id":3833192,"display_name":"FatalError"},"score":0,"creation_date":1549724806,"post_id":54607294,"comment_id":96010019,"body_markdown":"@TheWanderer yes it&#39;s work, thank u :)","body":"@TheWanderer yes it&#39;s work, thank u :)"},{"owner":{"account_id":4740119,"reputation":153,"user_id":3833192,"display_name":"FatalError"},"score":0,"creation_date":1549724850,"post_id":54607294,"comment_id":96010039,"body_markdown":"@VladyslavMatviienko how can I? I &#39;m new on Android, can u share your idea?","body":"@VladyslavMatviienko how can I? I &#39;m new on Android, can u share your idea?"},{"owner":{"account_id":4383501,"reputation":16972,"user_id":5496177,"accept_rate":60,"display_name":"TheWanderer"},"score":0,"creation_date":1549724985,"post_id":54607294,"comment_id":96010078,"body_markdown":"@VladyslavMatviienko guaranteed, IDs 0x1 to 0x5 aren&#39;t used. The resource ID format prevents IDs from being smaller than 0x10000000.","body":"@VladyslavMatviienko guaranteed, IDs 0x1 to 0x5 aren&#39;t used. The resource ID format prevents IDs from being smaller than 0x10000000."},{"owner":{"account_id":4740119,"reputation":153,"user_id":3833192,"display_name":"FatalError"},"score":0,"creation_date":1549725342,"post_id":54607294,"comment_id":96010162,"body_markdown":"yeah I see, I will do it.","body":"yeah I see, I will do it."}],"answers":[{"tags":[],"owner":{"account_id":10898766,"reputation":4116,"user_id":8011713,"display_name":"Rene Ferrari"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549723507,"creation_date":1549723507,"answer_id":54607311,"question_id":54607294,"body_markdown":"Either you create a member variable of this TextView which you can then use inside this class or you can use findViewById() on your LinearLayout.","title":"Find TextView which was created programmatically?","body":"<p>Either you create a member variable of this TextView which you can then use inside this class or you can use findViewById() on your LinearLayout.</p>\n"},{"tags":[],"owner":{"account_id":14213575,"reputation":2908,"user_id":10268067,"display_name":"Steve Moretz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1662625751,"creation_date":1549724622,"answer_id":54607486,"question_id":54607294,"body_markdown":"Well you don&#39;t necessarily need to use id here, There are several ways to achieve this:\r\n\r\n1.\r\n\r\n    TextView textView = (TextView) linearLayout.findViewById(i);\r\n\r\n`i` is what you set before from 1 to 5.\r\n\r\n2.\r\n\r\n    TextView textView = (TextView) linearLayout.getChildAt(i);\r\n\r\n`i` here is the number of set item, for instance `i=0` is the first textView you added using addView() method.","title":"Find TextView which was created programmatically?","body":"<p>Well you don't necessarily need to use id here, There are several ways to achieve this:</p>\n<p>1.</p>\n<pre><code>TextView textView = (TextView) linearLayout.findViewById(i);\n</code></pre>\n<p><code>i</code> is what you set before from 1 to 5.</p>\n<p>2.</p>\n<pre><code>TextView textView = (TextView) linearLayout.getChildAt(i);\n</code></pre>\n<p><code>i</code> here is the number of set item, for instance <code>i=0</code> is the first textView you added using addView() method.</p>\n"},{"tags":[],"owner":{"account_id":4383501,"reputation":16972,"user_id":5496177,"accept_rate":60,"display_name":"TheWanderer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549725235,"creation_date":1549725235,"answer_id":54607580,"question_id":54607294,"body_markdown":"Use the normal `findViewById()` method. You&#39;re giving the TextViews unique IDs from 1 to 5, so you can find those TextViews by supplying 1-5 to `findViewById()`.\r\n\r\nHowever, you probably shouldn&#39;t be doing it this way, and you shouldn&#39;t have a global `textView` variable (it&#39;ll only hold a reference to the last-created TextView).\r\n\r\nInstead, try using an ArrayList and adding all of your TextViews to it. Then you won&#39;t need to give them IDs that don&#39;t follow the standards.\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private LinearLayout linearLayout;\r\n    private ArrayList&lt;TextView&gt; textViews = new ArrayList&lt;&gt;();\r\n\r\n    public void CreateDesign(){\r\n\r\n        linearLayout = (LinearLayout) findById(R.id.linearLayout);\r\n\r\n        for(int i = 1; i &lt;= 5; i++) {\r\n            TextView textView = new TextView(this);\r\n            textView.setText(i + &quot;. TextView&quot;);\r\n\r\n            linearLayout.addView(textView);\r\n            textViews.add(textView); //add it to the ArrayList\r\n        }\r\n    }\r\n}\r\n\r\n```","title":"Find TextView which was created programmatically?","body":"<p>Use the normal <code>findViewById()</code> method. You're giving the TextViews unique IDs from 1 to 5, so you can find those TextViews by supplying 1-5 to <code>findViewById()</code>.</p>\n\n<p>However, you probably shouldn't be doing it this way, and you shouldn't have a global <code>textView</code> variable (it'll only hold a reference to the last-created TextView).</p>\n\n<p>Instead, try using an ArrayList and adding all of your TextViews to it. Then you won't need to give them IDs that don't follow the standards.</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private LinearLayout linearLayout;\n    private ArrayList&lt;TextView&gt; textViews = new ArrayList&lt;&gt;();\n\n    public void CreateDesign(){\n\n        linearLayout = (LinearLayout) findById(R.id.linearLayout);\n\n        for(int i = 1; i &lt;= 5; i++) {\n            TextView textView = new TextView(this);\n            textView.setText(i + \". TextView\");\n\n            linearLayout.addView(textView);\n            textViews.add(textView); //add it to the ArrayList\n        }\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":4740119,"reputation":153,"user_id":3833192,"display_name":"FatalError"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":703,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":54607486,"answer_count":3,"score":1,"last_activity_date":1682711548,"creation_date":1549723395,"question_id":54607294,"body_markdown":"How can I find those TextView&#39;s another function on same class?\r\nI will use `setText()`, `serBackgroundColor()` after create.\r\n\r\nThis code part is on `CreateDesign()` and this func `calling onCreate()`:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    private LinearLayout linearLayout;\r\n    private TextView textView;\r\n\r\n    public void CreateDesign(){\r\n\r\n       linearLayout = (LinearLayout) findById(R.id.linearLayout);\r\n\r\n       for(int i = 1; i &lt;= 5; i++){\r\n            textView = new TextView(this);\r\n            textView.setId(i);\r\n            textView.setText(i + &quot;. TextView&quot;);\r\n            \r\n            linearLayout.addView(textView);\r\n        }\r\n    }\r\n","title":"Find TextView which was created programmatically?","body":"<p>How can I find those TextView's another function on same class?\nI will use <code>setText()</code>, <code>serBackgroundColor()</code> after create.</p>\n<p>This code part is on <code>CreateDesign()</code> and this func <code>calling onCreate()</code>:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nprivate LinearLayout linearLayout;\nprivate TextView textView;\n\npublic void CreateDesign(){\n\n   linearLayout = (LinearLayout) findById(R.id.linearLayout);\n\n   for(int i = 1; i &lt;= 5; i++){\n        textView = new TextView(this);\n        textView.setId(i);\n        textView.setText(i + &quot;. TextView&quot;);\n        \n        linearLayout.addView(textView);\n    }\n}\n</code></pre>\n"},{"tags":["java","log4j","log4j2","configure"],"answers":[{"tags":[],"owner":{"account_id":9021418,"reputation":127,"user_id":6722389,"display_name":"Pirax"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1518598325,"creation_date":1518598325,"answer_id":48783031,"question_id":47454626,"body_markdown":"FYI\r\n\r\nMy approach to solve all requirements: \r\n\r\nI switched back to XML and added some dynamical properties. Some properties are taken from system properties. If they don&#39;t exist, the default value, defined as xml property, will be taken.\r\n\r\nHave a special look to the property &quot;logFile&quot;. It&#39;s a mix of system property(for fix path to log file) and dynamically determined by log4j. This isn&#39;t really thread-safe. But in our case acceptable.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;info&quot; strict=&quot;true&quot; name=&quot;XMLConfig&quot;\r\n                   packages=&quot;org.apache.logging.log4j.test&quot;&gt;\r\n        &lt;Properties&gt;\r\n            &lt;Property name=&quot;logLevel&quot;&gt;INFO&lt;/Property&gt;\r\n            &lt;Property name=&quot;logFileDir&quot;&gt;log/&lt;/Property&gt;\r\n            &lt;Property name=&quot;logLevelFile&quot;&gt;OFF&lt;/Property&gt;\r\n            &lt;Property name=&quot;logFile&quot;&gt;${sys:logFileDir}ConfigMgmt-${date:yyyyMMdd_HHmmss-SSS}.log&lt;/Property&gt;\r\n            &lt;Property name=&quot;packageName&quot;&gt;com.hamburgsud&lt;/Property&gt;\r\n            &lt;Property name=&quot;messagePattern&quot;&gt;%d{HH:mm:ss.SSS} (Test) %-5level %logger{1.} - %msg%n&lt;/Property&gt;\r\n        &lt;/Properties&gt;\r\n    \r\n        &lt;Appenders&gt;\r\n            &lt;!-- Console Logging --&gt;\r\n            &lt;Appender type=&quot;Console&quot; name=&quot;STDOUT&quot;&gt;\r\n                &lt;Filters&gt;\r\n                    &lt;Filter type=&quot;MarkerFilter&quot; marker=&quot;lifecycle&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\r\n                    &lt;Filter type=&quot;ThresholdFilter&quot; level=&quot;${sys:logLevel}&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;/Filters&gt;\r\n                &lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;${sys:messagePattern}&quot;/&gt;\r\n            &lt;/Appender&gt;\r\n            &lt;!-- LIFECYCLE is analog to gradles lifecycle log level - means always logging\r\n                 When the marker for lifecycle-logging is added, the message will always be logged --&gt;\r\n            &lt;Appender type=&quot;Console&quot; name=&quot;LIFECYCLE&quot;&gt;\r\n                &lt;Filters&gt;\r\n                    &lt;Filter type=&quot;MarkerFilter&quot; marker=&quot;lifecycle&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;/Filters&gt;\r\n                &lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;%logger{1.} - %msg%n&quot;/&gt;\r\n            &lt;/Appender&gt;\r\n    \r\n    \r\n            &lt;!-- File Logging --&gt;\r\n            &lt;Appender type=&quot;File&quot; name=&quot;FILE&quot; fileName=&quot;${sys:logFile}&quot; createOnDemand=&quot;true&quot;&gt;\r\n                &lt;Filters&gt;\r\n                    &lt;Filter type=&quot;MarkerFilter&quot; marker=&quot;lifecycle&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\r\n                    &lt;Filter type=&quot;ThresholdFilter&quot; level=&quot;${sys:logLevelFile}&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;/Filters&gt;\r\n                &lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;${sys:messagePattern}&quot;/&gt;\r\n            &lt;/Appender&gt;\r\n            &lt;!-- Counterpart to consoles LIFECYCLE logging. When file logging is activated and a log is marked with\r\n                 lifecycle, the message will be logged to the file too. --&gt;\r\n            &lt;Appender type=&quot;File&quot; name=&quot;FILELIFECYCLE&quot; fileName=&quot;${sys:logFile}&quot; createOnDemand=&quot;true&quot;&gt;\r\n                &lt;Filters&gt;\r\n                    &lt;Filter type=&quot;MarkerFilter&quot; marker=&quot;lifecycle&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;/Filters&gt;\r\n                &lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;%logger{1.} - %msg%n&quot;/&gt;\r\n            &lt;/Appender&gt;\r\n        &lt;/Appenders&gt;\r\n    \r\n        &lt;Loggers&gt;\r\n            &lt;Root level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\r\n                &lt;AppenderRef ref=&quot;LIFECYCLE&quot;/&gt;\r\n                &lt;AppenderRef ref=&quot;FILE&quot;/&gt;\r\n                &lt;AppenderRef ref=&quot;FILELIFECYCLE&quot;/&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;","title":"Log4j 2.9.1 adding ThresholdFilter to Appender programmatically","body":"<p>FYI</p>\n\n<p>My approach to solve all requirements: </p>\n\n<p>I switched back to XML and added some dynamical properties. Some properties are taken from system properties. If they don't exist, the default value, defined as xml property, will be taken.</p>\n\n<p>Have a special look to the property \"logFile\". It's a mix of system property(for fix path to log file) and dynamically determined by log4j. This isn't really thread-safe. But in our case acceptable.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"info\" strict=\"true\" name=\"XMLConfig\"\n               packages=\"org.apache.logging.log4j.test\"&gt;\n    &lt;Properties&gt;\n        &lt;Property name=\"logLevel\"&gt;INFO&lt;/Property&gt;\n        &lt;Property name=\"logFileDir\"&gt;log/&lt;/Property&gt;\n        &lt;Property name=\"logLevelFile\"&gt;OFF&lt;/Property&gt;\n        &lt;Property name=\"logFile\"&gt;${sys:logFileDir}ConfigMgmt-${date:yyyyMMdd_HHmmss-SSS}.log&lt;/Property&gt;\n        &lt;Property name=\"packageName\"&gt;com.hamburgsud&lt;/Property&gt;\n        &lt;Property name=\"messagePattern\"&gt;%d{HH:mm:ss.SSS} (Test) %-5level %logger{1.} - %msg%n&lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;!-- Console Logging --&gt;\n        &lt;Appender type=\"Console\" name=\"STDOUT\"&gt;\n            &lt;Filters&gt;\n                &lt;Filter type=\"MarkerFilter\" marker=\"lifecycle\" onMatch=\"DENY\" onMismatch=\"NEUTRAL\"/&gt;\n                &lt;Filter type=\"ThresholdFilter\" level=\"${sys:logLevel}\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"/&gt;\n            &lt;/Filters&gt;\n            &lt;Layout type=\"PatternLayout\" pattern=\"${sys:messagePattern}\"/&gt;\n        &lt;/Appender&gt;\n        &lt;!-- LIFECYCLE is analog to gradles lifecycle log level - means always logging\n             When the marker for lifecycle-logging is added, the message will always be logged --&gt;\n        &lt;Appender type=\"Console\" name=\"LIFECYCLE\"&gt;\n            &lt;Filters&gt;\n                &lt;Filter type=\"MarkerFilter\" marker=\"lifecycle\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"/&gt;\n            &lt;/Filters&gt;\n            &lt;Layout type=\"PatternLayout\" pattern=\"%logger{1.} - %msg%n\"/&gt;\n        &lt;/Appender&gt;\n\n\n        &lt;!-- File Logging --&gt;\n        &lt;Appender type=\"File\" name=\"FILE\" fileName=\"${sys:logFile}\" createOnDemand=\"true\"&gt;\n            &lt;Filters&gt;\n                &lt;Filter type=\"MarkerFilter\" marker=\"lifecycle\" onMatch=\"DENY\" onMismatch=\"NEUTRAL\"/&gt;\n                &lt;Filter type=\"ThresholdFilter\" level=\"${sys:logLevelFile}\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"/&gt;\n            &lt;/Filters&gt;\n            &lt;Layout type=\"PatternLayout\" pattern=\"${sys:messagePattern}\"/&gt;\n        &lt;/Appender&gt;\n        &lt;!-- Counterpart to consoles LIFECYCLE logging. When file logging is activated and a log is marked with\n             lifecycle, the message will be logged to the file too. --&gt;\n        &lt;Appender type=\"File\" name=\"FILELIFECYCLE\" fileName=\"${sys:logFile}\" createOnDemand=\"true\"&gt;\n            &lt;Filters&gt;\n                &lt;Filter type=\"MarkerFilter\" marker=\"lifecycle\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"/&gt;\n            &lt;/Filters&gt;\n            &lt;Layout type=\"PatternLayout\" pattern=\"%logger{1.} - %msg%n\"/&gt;\n        &lt;/Appender&gt;\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Root level=\"trace\" additivity=\"false\"&gt;\n            &lt;AppenderRef ref=\"STDOUT\"/&gt;\n            &lt;AppenderRef ref=\"LIFECYCLE\"/&gt;\n            &lt;AppenderRef ref=\"FILE\"/&gt;\n            &lt;AppenderRef ref=\"FILELIFECYCLE\"/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":9021418,"reputation":127,"user_id":6722389,"display_name":"Pirax"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2274,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682711365,"creation_date":1511437097,"question_id":47454626,"body_markdown":"I have a serious problem with log4j 2.9.x\r\nI write &quot;serious&quot; because the documentation of log4j is reeeeally crap!\r\nThere is no clear and up-to-date documentation for this version. Even the existing documented code don&#39;t pass the compiler since they did breaking changes every now and then and you can&#39;t be sure which version they have documented. I googled a whole day but what i found is mostly outdated too.  \r\nSo I am a bit confused configuring log4j2 programmatically.\r\n\r\nwhat I want to achieve:\r\n\r\n 1) additional &quot;loglevel&quot; that always prints to console independently of current loglevel (analog to gradles LIFECYCLE)\r\n\r\n 2) log to console and file\r\n\r\n 3) filename determined at runtime\r\n\r\nI found a way to achieve 1) and 2) with XML. I haven&#39;t found a suitable way for 3) . I dont like to use a static context or system variable for the filename since i expect concurrency issues. \r\n\r\nTherefore my approach is to configure log4j programmatically. Here my configuration factory:\r\n\r\n    package my.abc\r\n    \r\n    import org.apache.logging.log4j.Level\r\n    import org.apache.logging.log4j.core.Filter\r\n    import org.apache.logging.log4j.core.LoggerContext\r\n    import org.apache.logging.log4j.core.config.Configuration\r\n    import org.apache.logging.log4j.core.config.ConfigurationFactory\r\n    import org.apache.logging.log4j.core.config.ConfigurationSource\r\n    import org.apache.logging.log4j.core.config.Order\r\n    import org.apache.logging.log4j.core.config.builder.api.AppenderComponentBuilder\r\n    import org.apache.logging.log4j.core.config.builder.api.ConfigurationBuilder\r\n    import org.apache.logging.log4j.core.config.builder.api.LoggerComponentBuilder\r\n    import org.apache.logging.log4j.core.config.builder.impl.BuiltConfiguration\r\n    import org.apache.logging.log4j.core.config.plugins.Plugin\r\n    \r\n    @Plugin(name = &quot;CustomConfigurationFactory&quot;, category = ConfigurationFactory.CATEGORY)\r\n    @Order(50)\r\n    class CustomConfigurationFactory extends ConfigurationFactory {\r\n    \r\n        private static String MESSAGE_PATTERN = &quot;%d{HH:mm:ss.SSS} [%t] %-5level 123 %logger{36} - %msg%n&quot;\r\n    \r\n        Level logLevel\r\n        String packageToScan\r\n    \r\n        CustomConfigurationFactory(Level logLevel, String packageToScan) {\r\n            this.logLevel = logLevel\r\n            this.packageToScan = packageToScan\r\n        }\r\n    \r\n        private Configuration createConfiguration(final String name, ConfigurationBuilder&lt;BuiltConfiguration&gt; builder) {\r\n            builder.setConfigurationName(name)\r\n            builder.setStatusLevel(Level.ERROR)\r\n    \r\n            //add appender\r\n            builder.add(createConsoleAppender(builder))\r\n            builder.add(createLifecycleAppender(builder))\r\n    \r\n            //add logger\r\n            builder.add(createLogger(builder))\r\n    \r\n    //        builder.add(builder.newFilter(&quot;ThresholdFilter&quot;, Filter.Result.ACCEPT, Filter.Result.DENY)\r\n    //                .addAttribute(&quot;level&quot;, logLevel))\r\n    \r\n            builder.add(builder.newRootLogger(Level.TRACE).add(builder.newAppenderRef(&quot;stdout&quot;)))\r\n            return builder.build()\r\n        }\r\n    \r\n        @Override\r\n        Configuration getConfiguration(final LoggerContext loggerContext, final ConfigurationSource source) {\r\n            return getConfiguration(loggerContext, source.toString(), null)\r\n        }\r\n    \r\n        @Override\r\n        Configuration getConfiguration(final LoggerContext loggerContext, final String name, final URI configLocation) {\r\n            ConfigurationBuilder&lt;BuiltConfiguration&gt; builder = newConfigurationBuilder()\r\n            return createConfiguration(name, builder)\r\n        }\r\n    \r\n        @Override\r\n        protected String[] getSupportedTypes() {\r\n            return [{ &quot;*&quot; }]\r\n        }\r\n    \r\n        private AppenderComponentBuilder createConsoleAppender(ConfigurationBuilder&lt;BuiltConfiguration&gt; builder) {\r\n            AppenderComponentBuilder appenderBuilder = builder.newAppender(&quot;stdout&quot;, &quot;CONSOLE&quot;)\r\n            appenderBuilder.add(builder.newLayout(&quot;PatternLayout&quot;).\r\n                    addAttribute(&quot;pattern&quot;, MESSAGE_PATTERN))\r\n            appenderBuilder.add(builder.newFilter(&quot;MarkerFilter&quot;, Filter.Result.DENY,\r\n                    Filter.Result.NEUTRAL).addAttribute(&quot;marker&quot;, &quot;lifecycle&quot;))\r\n    //        appenderBuilder.add(builder.newFilter(&quot;ThresholdFilter&quot;, Filter.Result.ACCEPT,\r\n    //                Filter.Result.DENY).addAttribute(&quot;level&quot;, logLevel))\r\n            return appenderBuilder\r\n        }\r\n    \r\n        private AppenderComponentBuilder createLifecycleAppender(ConfigurationBuilder&lt;BuiltConfiguration&gt; builder) {\r\n            AppenderComponentBuilder appenderBuilder = builder.newAppender(&quot;lifecycle&quot;, &quot;CONSOLE&quot;)\r\n            appenderBuilder.add(builder.newLayout(&quot;PatternLayout&quot;).\r\n                    addAttribute(&quot;pattern&quot;, &quot;%d{HH:mm:ss.SSS} [%t] LIFECYCLE %logger{36} - %msg%n&quot;))\r\n            appenderBuilder.add(builder.newFilter(&quot;MarkerFilter&quot;, Filter.Result.ACCEPT, Filter.Result.DENY)\r\n                    .addAttribute(&quot;marker&quot;, &quot;lifecycle&quot;))\r\n            return appenderBuilder\r\n        }\r\n    \r\n        private LoggerComponentBuilder createLogger(ConfigurationBuilder&lt;BuiltConfiguration&gt; builder) {\r\n            builder.newLogger(packageToScan, &quot;trace&quot;)\r\n                    .add(builder.newAppenderRef(&quot;stdout&quot;))\r\n                    .add(builder.newAppenderRef(&quot;lifecycle&quot;))\r\n                    .addAttribute(&quot;additivity&quot;, false)\r\n        }\r\n    }\r\n\r\nYou may noticed the 2 outcommented lines. Thats my problem. \r\n\r\nWhen i use `builder.add(builder.newFilter(&quot;ThresholdFilter&quot;...` all logs will be filtered out when they dont fit the loglevel. Even the &quot;lifecycle&quot;-logs that i want to be logged in any case.\r\n\r\nWhen i use \r\n`appenderBuilder.add(builder.newFilter(&quot;ThresholdFilter...` i got the error message `2017-11-23 12:12:34,905 main ERROR appender CONSOLE has no parameter that matches element ThresholdFilter`\r\n\r\nWhat is wierd. Because when i configure everything with xml, i can do exactly that thing(adding thresholdfilter to a single appender) and it works.\r\n\r\n    &lt;Appender type=&quot;Console&quot; name=&quot;STDOUT&quot; &gt;\r\n       &lt;Filters&gt;\r\n          &lt;Filter type=&quot;MarkerFilter&quot; marker=&quot;lifecycle&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\r\n          &lt;Filter type=&quot;ThresholdFilter&quot; level=&quot;${logLevel}&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot; /&gt;\r\n       &lt;/Filters&gt;\r\n       &lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;${pattern}&quot;/&gt;\r\n    &lt;/Appender&gt;\r\n\r\nTo beeing complete here the whole xml that works for erequirements 1) and 2)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;info&quot; strict=&quot;true&quot; name=&quot;XMLConfigTest&quot;\r\n                   packages=&quot;org.apache.logging.log4j.test&quot;&gt;\r\n        &lt;Properties&gt;\r\n            &lt;Property name=&quot;logLevel&quot;&gt;error&lt;/Property&gt;\r\n            &lt;Property name=&quot;filename&quot;&gt;target/test.log&lt;/Property&gt;\r\n            &lt;Property name=&quot;pattern&quot;&gt;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&lt;/Property&gt;\r\n        &lt;/Properties&gt;\r\n    \r\n        &lt;Appenders&gt;\r\n            &lt;Appender type=&quot;Console&quot; name=&quot;STDOUT&quot;&gt;\r\n                &lt;Filters&gt;\r\n                    &lt;Filter type=&quot;MarkerFilter&quot; marker=&quot;lifecycle&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;\r\n                    &lt;Filter type=&quot;ThresholdFilter&quot; level=&quot;${logLevel}&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;/Filters&gt;\r\n                &lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;${pattern}&quot;/&gt;\r\n            &lt;/Appender&gt;\r\n            &lt;Appender type=&quot;Console&quot; name=&quot;LIFECYCLE&quot;&gt;\r\n                &lt;Filters&gt;\r\n                    &lt;Filter type=&quot;MarkerFilter&quot; marker=&quot;lifecycle&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n                &lt;/Filters&gt;\r\n                &lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;%d{HH:mm:ss.SSS} [%t] LIFECYCLE %logger{36} - %msg%n&quot;/&gt;\r\n            &lt;/Appender&gt;\r\n            &lt;Appender type=&quot;File&quot; name=&quot;File&quot; fileName=&quot;${filename}&quot;&gt;\r\n                &lt;Layout type=&quot;PatternLayout&quot;&gt;\r\n                    &lt;Pattern&gt;%d %p %C{1.} [%t] %m%n&lt;/Pattern&gt;\r\n                &lt;/Layout&gt;\r\n            &lt;/Appender&gt;\r\n        &lt;/Appenders&gt;\r\n    \r\n        &lt;Loggers&gt;\r\n            &lt;Logger name=&quot;my.abc&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\r\n                &lt;AppenderRef ref=&quot;LIFECYCLE&quot;/&gt;\r\n            &lt;/Logger&gt;\r\n    \r\n            &lt;Root level=&quot;error&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nThere has to be a way to add ThresholdFilter to the appender. I found the class ThresholdFilter. But i have absolutely no idea how to use it. instantiating works `ThresholdFilter.createFilter(...)` but where can I add it? \r\n\r\nTo cut a long story short..\r\n\r\nHow can I add ThresholdFilter to a single Appender without xml?","title":"Log4j 2.9.1 adding ThresholdFilter to Appender programmatically","body":"<p>I have a serious problem with log4j 2.9.x\nI write \"serious\" because the documentation of log4j is reeeeally crap!\nThere is no clear and up-to-date documentation for this version. Even the existing documented code don't pass the compiler since they did breaking changes every now and then and you can't be sure which version they have documented. I googled a whole day but what i found is mostly outdated too.<br>\nSo I am a bit confused configuring log4j2 programmatically.</p>\n\n<p>what I want to achieve:</p>\n\n<p>1) additional \"loglevel\" that always prints to console independently of current loglevel (analog to gradles LIFECYCLE)</p>\n\n<p>2) log to console and file</p>\n\n<p>3) filename determined at runtime</p>\n\n<p>I found a way to achieve 1) and 2) with XML. I haven't found a suitable way for 3) . I dont like to use a static context or system variable for the filename since i expect concurrency issues. </p>\n\n<p>Therefore my approach is to configure log4j programmatically. Here my configuration factory:</p>\n\n<pre><code>package my.abc\n\nimport org.apache.logging.log4j.Level\nimport org.apache.logging.log4j.core.Filter\nimport org.apache.logging.log4j.core.LoggerContext\nimport org.apache.logging.log4j.core.config.Configuration\nimport org.apache.logging.log4j.core.config.ConfigurationFactory\nimport org.apache.logging.log4j.core.config.ConfigurationSource\nimport org.apache.logging.log4j.core.config.Order\nimport org.apache.logging.log4j.core.config.builder.api.AppenderComponentBuilder\nimport org.apache.logging.log4j.core.config.builder.api.ConfigurationBuilder\nimport org.apache.logging.log4j.core.config.builder.api.LoggerComponentBuilder\nimport org.apache.logging.log4j.core.config.builder.impl.BuiltConfiguration\nimport org.apache.logging.log4j.core.config.plugins.Plugin\n\n@Plugin(name = \"CustomConfigurationFactory\", category = ConfigurationFactory.CATEGORY)\n@Order(50)\nclass CustomConfigurationFactory extends ConfigurationFactory {\n\n    private static String MESSAGE_PATTERN = \"%d{HH:mm:ss.SSS} [%t] %-5level 123 %logger{36} - %msg%n\"\n\n    Level logLevel\n    String packageToScan\n\n    CustomConfigurationFactory(Level logLevel, String packageToScan) {\n        this.logLevel = logLevel\n        this.packageToScan = packageToScan\n    }\n\n    private Configuration createConfiguration(final String name, ConfigurationBuilder&lt;BuiltConfiguration&gt; builder) {\n        builder.setConfigurationName(name)\n        builder.setStatusLevel(Level.ERROR)\n\n        //add appender\n        builder.add(createConsoleAppender(builder))\n        builder.add(createLifecycleAppender(builder))\n\n        //add logger\n        builder.add(createLogger(builder))\n\n//        builder.add(builder.newFilter(\"ThresholdFilter\", Filter.Result.ACCEPT, Filter.Result.DENY)\n//                .addAttribute(\"level\", logLevel))\n\n        builder.add(builder.newRootLogger(Level.TRACE).add(builder.newAppenderRef(\"stdout\")))\n        return builder.build()\n    }\n\n    @Override\n    Configuration getConfiguration(final LoggerContext loggerContext, final ConfigurationSource source) {\n        return getConfiguration(loggerContext, source.toString(), null)\n    }\n\n    @Override\n    Configuration getConfiguration(final LoggerContext loggerContext, final String name, final URI configLocation) {\n        ConfigurationBuilder&lt;BuiltConfiguration&gt; builder = newConfigurationBuilder()\n        return createConfiguration(name, builder)\n    }\n\n    @Override\n    protected String[] getSupportedTypes() {\n        return [{ \"*\" }]\n    }\n\n    private AppenderComponentBuilder createConsoleAppender(ConfigurationBuilder&lt;BuiltConfiguration&gt; builder) {\n        AppenderComponentBuilder appenderBuilder = builder.newAppender(\"stdout\", \"CONSOLE\")\n        appenderBuilder.add(builder.newLayout(\"PatternLayout\").\n                addAttribute(\"pattern\", MESSAGE_PATTERN))\n        appenderBuilder.add(builder.newFilter(\"MarkerFilter\", Filter.Result.DENY,\n                Filter.Result.NEUTRAL).addAttribute(\"marker\", \"lifecycle\"))\n//        appenderBuilder.add(builder.newFilter(\"ThresholdFilter\", Filter.Result.ACCEPT,\n//                Filter.Result.DENY).addAttribute(\"level\", logLevel))\n        return appenderBuilder\n    }\n\n    private AppenderComponentBuilder createLifecycleAppender(ConfigurationBuilder&lt;BuiltConfiguration&gt; builder) {\n        AppenderComponentBuilder appenderBuilder = builder.newAppender(\"lifecycle\", \"CONSOLE\")\n        appenderBuilder.add(builder.newLayout(\"PatternLayout\").\n                addAttribute(\"pattern\", \"%d{HH:mm:ss.SSS} [%t] LIFECYCLE %logger{36} - %msg%n\"))\n        appenderBuilder.add(builder.newFilter(\"MarkerFilter\", Filter.Result.ACCEPT, Filter.Result.DENY)\n                .addAttribute(\"marker\", \"lifecycle\"))\n        return appenderBuilder\n    }\n\n    private LoggerComponentBuilder createLogger(ConfigurationBuilder&lt;BuiltConfiguration&gt; builder) {\n        builder.newLogger(packageToScan, \"trace\")\n                .add(builder.newAppenderRef(\"stdout\"))\n                .add(builder.newAppenderRef(\"lifecycle\"))\n                .addAttribute(\"additivity\", false)\n    }\n}\n</code></pre>\n\n<p>You may noticed the 2 outcommented lines. Thats my problem. </p>\n\n<p>When i use <code>builder.add(builder.newFilter(\"ThresholdFilter\"...</code> all logs will be filtered out when they dont fit the loglevel. Even the \"lifecycle\"-logs that i want to be logged in any case.</p>\n\n<p>When i use \n<code>appenderBuilder.add(builder.newFilter(\"ThresholdFilter...</code> i got the error message <code>2017-11-23 12:12:34,905 main ERROR appender CONSOLE has no parameter that matches element ThresholdFilter</code></p>\n\n<p>What is wierd. Because when i configure everything with xml, i can do exactly that thing(adding thresholdfilter to a single appender) and it works.</p>\n\n<pre><code>&lt;Appender type=\"Console\" name=\"STDOUT\" &gt;\n   &lt;Filters&gt;\n      &lt;Filter type=\"MarkerFilter\" marker=\"lifecycle\" onMatch=\"DENY\" onMismatch=\"NEUTRAL\"/&gt;\n      &lt;Filter type=\"ThresholdFilter\" level=\"${logLevel}\" onMatch=\"ACCEPT\" onMismatch=\"DENY\" /&gt;\n   &lt;/Filters&gt;\n   &lt;Layout type=\"PatternLayout\" pattern=\"${pattern}\"/&gt;\n&lt;/Appender&gt;\n</code></pre>\n\n<p>To beeing complete here the whole xml that works for erequirements 1) and 2)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"info\" strict=\"true\" name=\"XMLConfigTest\"\n               packages=\"org.apache.logging.log4j.test\"&gt;\n    &lt;Properties&gt;\n        &lt;Property name=\"logLevel\"&gt;error&lt;/Property&gt;\n        &lt;Property name=\"filename\"&gt;target/test.log&lt;/Property&gt;\n        &lt;Property name=\"pattern\"&gt;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;Appender type=\"Console\" name=\"STDOUT\"&gt;\n            &lt;Filters&gt;\n                &lt;Filter type=\"MarkerFilter\" marker=\"lifecycle\" onMatch=\"DENY\" onMismatch=\"NEUTRAL\"/&gt;\n                &lt;Filter type=\"ThresholdFilter\" level=\"${logLevel}\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"/&gt;\n            &lt;/Filters&gt;\n            &lt;Layout type=\"PatternLayout\" pattern=\"${pattern}\"/&gt;\n        &lt;/Appender&gt;\n        &lt;Appender type=\"Console\" name=\"LIFECYCLE\"&gt;\n            &lt;Filters&gt;\n                &lt;Filter type=\"MarkerFilter\" marker=\"lifecycle\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"/&gt;\n            &lt;/Filters&gt;\n            &lt;Layout type=\"PatternLayout\" pattern=\"%d{HH:mm:ss.SSS} [%t] LIFECYCLE %logger{36} - %msg%n\"/&gt;\n        &lt;/Appender&gt;\n        &lt;Appender type=\"File\" name=\"File\" fileName=\"${filename}\"&gt;\n            &lt;Layout type=\"PatternLayout\"&gt;\n                &lt;Pattern&gt;%d %p %C{1.} [%t] %m%n&lt;/Pattern&gt;\n            &lt;/Layout&gt;\n        &lt;/Appender&gt;\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Logger name=\"my.abc\" level=\"trace\" additivity=\"false\"&gt;\n            &lt;AppenderRef ref=\"STDOUT\"/&gt;\n            &lt;AppenderRef ref=\"LIFECYCLE\"/&gt;\n        &lt;/Logger&gt;\n\n        &lt;Root level=\"error\"&gt;\n            &lt;AppenderRef ref=\"STDOUT\"/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n\n<p>There has to be a way to add ThresholdFilter to the appender. I found the class ThresholdFilter. But i have absolutely no idea how to use it. instantiating works <code>ThresholdFilter.createFilter(...)</code> but where can I add it? </p>\n\n<p>To cut a long story short..</p>\n\n<p>How can I add ThresholdFilter to a single Appender without xml?</p>\n"},{"tags":["java","android","android-constraintlayout"],"comments":[{"owner":{"account_id":8362290,"reputation":1926,"user_id":6280156,"accept_rate":80,"display_name":"Ankit Tale"},"score":0,"creation_date":1532199274,"post_id":51458123,"comment_id":89887716,"body_markdown":"That kinda somewhat difficult but define a group in XML and view through code to that group view","body":"That kinda somewhat difficult but define a group in XML and view through code to that group view"}],"answers":[{"tags":[],"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532201838,"creation_date":1532201838,"answer_id":51459485,"question_id":51458123,"body_markdown":"`setX()` does the following according to the [documentation](https://developer.android.com/reference/android/view/View.html#setX(float)):\r\n\r\n&gt;Sets the visual x position of this view, in pixels. This is equivalent to setting the translationX property to be the difference between the x value passed in and the current left property.\r\n\r\n`setTranslationX()` does this also according to the [documentation](https://developer.android.com/reference/android/view/View.html#setTranslationX(float)):\r\n\r\n&gt;Sets the horizontal location of this view relative to its left position. This effectively positions the object post-layout, in addition to wherever the object&#39;s layout placed it.\r\n\r\n`setY()` and `setTranslationY()` do the same for the y coordinate.\r\n\r\nThe key phrase here is _post-layout_. Your `ImageView` is being placed at the top/left because it has no constraints. The `TextView` is placed on the `ImageView` according to its constraints, so it is also placed in the top/left. Now that both views are laid out in the top/left, the `ImageView` is shifted according to `setX()` and `setY()` leaving the `TextView` behind.\r\n\r\nThere are a couple of approaches to fixing this. Probably the easiest is to apply the same translation that was applied to the `ImageView` to the `TextView`.\r\n","title":"Added View programmatically to Constraint Layout jumps to origin","body":"<p><code>setX()</code> does the following according to the <a href=\"https://developer.android.com/reference/android/view/View.html#setX(float)\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Sets the visual x position of this view, in pixels. This is equivalent to setting the translationX property to be the difference between the x value passed in and the current left property.</p>\n</blockquote>\n\n<p><code>setTranslationX()</code> does this also according to the <a href=\"https://developer.android.com/reference/android/view/View.html#setTranslationX(float)\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Sets the horizontal location of this view relative to its left position. This effectively positions the object post-layout, in addition to wherever the object's layout placed it.</p>\n</blockquote>\n\n<p><code>setY()</code> and <code>setTranslationY()</code> do the same for the y coordinate.</p>\n\n<p>The key phrase here is <em>post-layout</em>. Your <code>ImageView</code> is being placed at the top/left because it has no constraints. The <code>TextView</code> is placed on the <code>ImageView</code> according to its constraints, so it is also placed in the top/left. Now that both views are laid out in the top/left, the <code>ImageView</code> is shifted according to <code>setX()</code> and <code>setY()</code> leaving the <code>TextView</code> behind.</p>\n\n<p>There are a couple of approaches to fixing this. Probably the easiest is to apply the same translation that was applied to the <code>ImageView</code> to the <code>TextView</code>.</p>\n"}],"owner":{"account_id":1324323,"reputation":480,"user_id":1269493,"accept_rate":50,"display_name":"Miguel Lasa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1052,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682711345,"creation_date":1532191056,"question_id":51458123,"body_markdown":"I&#39;m doing some animations in android and I have players inside a soccer court. For some of the elements I want to add a label, add some constraints to group them with their respective view and when the animation starts have the labels sort of follow them around.\r\n\r\nI&#39;ve tried this two solutions but the textview keeps jumping to the origin of the constraint layout:\r\n\r\nhttps://stackoverflow.com/questions/40275152/how-to-programmatically-add-views-and-constraints-to-a-constraintlayout\r\n\r\nhttps://stackoverflow.com/questions/42844776/add-a-view-programmatically-in-constraintlayout?rq=1\r\n\r\nI&#39;ve tried A LOT of variations for these solutions with no luck. I&#39;m missing something of course...any thoughts would be greatly appreciated!\r\n\r\nMy code where I create the views:\r\n \r\n\r\n       //init imageview\r\n                    ImageView imageView = new ImageView(this);\r\n                    imageView.setId(View.generateViewId());\r\n                    imageView.setTag(key);\r\n                    imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);\r\n                    //buscar el drawable correspondiente\r\n                    imageView.setImageDrawable(setViewDrawable(vista));\r\n                    imageView.setOnLongClickListener(this);\r\n    //set width and height of the view\r\n                    Pair&lt;Integer, Integer&gt; widthAndHeight = getWidthAndHeight(key);\r\n                    //set ancho y alto\r\n                    ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(widthAndHeight.first, widthAndHeight.second);\r\n                    imageView.setLayoutParams(params);\r\n                    mTacticLayout.addView(imageView);\r\n                    //set position\r\n                    if (!isEdit) {\r\n                        Pair&lt;Float, Float&gt; xAndY = getViewXY(key);\r\n                        Float rotation = getViewRotation(key);\r\n                        //account for offsets\r\n                        imageView.setX(xAndY.first - widthAndHeight.first / 2);\r\n                        imageView.setY(xAndY.second - widthAndHeight.second / 2);\r\n                        imageView.setRotation(rotation);\r\n                    }\r\n        \r\n    //HERE HERE HERE LOOK AT ME  \r\n           if(imageView.getTag().toString().equals(r.getString(R.string.ball_tag))){\r\n                        TextView textView = new TextView(this);\r\n                        textView.setId(View.generateViewId());\r\n                        textView.setText(&quot;My View&quot;);\r\n        \r\n                        mTacticLayout.addView(textView);\r\n                        ConstraintSet set = new ConstraintSet();\r\n                        set.clone(mTacticLayout);\r\n                        set.connect(textView.getId(), ConstraintSet.TOP, imageView.getId(), ConstraintSet.BOTTOM, 0);\r\n                        set.connect(textView.getId(), ConstraintSet.RIGHT, imageView.getId(), ConstraintSet.RIGHT, 0);\r\n                        set.connect(textView.getId(), ConstraintSet.LEFT, imageView.getId(), ConstraintSet.LEFT, 0);\r\n                        set.applyTo(mTacticLayout);\r\n                    }","title":"Added View programmatically to Constraint Layout jumps to origin","body":"<p>I'm doing some animations in android and I have players inside a soccer court. For some of the elements I want to add a label, add some constraints to group them with their respective view and when the animation starts have the labels sort of follow them around.</p>\n\n<p>I've tried this two solutions but the textview keeps jumping to the origin of the constraint layout:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/40275152/how-to-programmatically-add-views-and-constraints-to-a-constraintlayout\">How to programmatically add views and constraints to a ConstraintLayout?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/42844776/add-a-view-programmatically-in-constraintlayout?rq=1\">Add a view programmatically in ConstraintLayout</a></p>\n\n<p>I've tried A LOT of variations for these solutions with no luck. I'm missing something of course...any thoughts would be greatly appreciated!</p>\n\n<p>My code where I create the views:</p>\n\n<pre><code>   //init imageview\n                ImageView imageView = new ImageView(this);\n                imageView.setId(View.generateViewId());\n                imageView.setTag(key);\n                imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);\n                //buscar el drawable correspondiente\n                imageView.setImageDrawable(setViewDrawable(vista));\n                imageView.setOnLongClickListener(this);\n//set width and height of the view\n                Pair&lt;Integer, Integer&gt; widthAndHeight = getWidthAndHeight(key);\n                //set ancho y alto\n                ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(widthAndHeight.first, widthAndHeight.second);\n                imageView.setLayoutParams(params);\n                mTacticLayout.addView(imageView);\n                //set position\n                if (!isEdit) {\n                    Pair&lt;Float, Float&gt; xAndY = getViewXY(key);\n                    Float rotation = getViewRotation(key);\n                    //account for offsets\n                    imageView.setX(xAndY.first - widthAndHeight.first / 2);\n                    imageView.setY(xAndY.second - widthAndHeight.second / 2);\n                    imageView.setRotation(rotation);\n                }\n\n//HERE HERE HERE LOOK AT ME  \n       if(imageView.getTag().toString().equals(r.getString(R.string.ball_tag))){\n                    TextView textView = new TextView(this);\n                    textView.setId(View.generateViewId());\n                    textView.setText(\"My View\");\n\n                    mTacticLayout.addView(textView);\n                    ConstraintSet set = new ConstraintSet();\n                    set.clone(mTacticLayout);\n                    set.connect(textView.getId(), ConstraintSet.TOP, imageView.getId(), ConstraintSet.BOTTOM, 0);\n                    set.connect(textView.getId(), ConstraintSet.RIGHT, imageView.getId(), ConstraintSet.RIGHT, 0);\n                    set.connect(textView.getId(), ConstraintSet.LEFT, imageView.getId(), ConstraintSet.LEFT, 0);\n                    set.applyTo(mTacticLayout);\n                }\n</code></pre>\n"},{"tags":["java","html","spring-mvc","thymeleaf","spring-thymeleaf"],"comments":[{"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"score":0,"creation_date":1682742942,"post_id":76132824,"comment_id":134267239,"body_markdown":"No, you can&#39;t use `th:checked` with `th:field`.  Why don&#39;t you set the value of `data[__${iStat.index}__].targetIsRestricted = data_set.rawDataMap.get(&#39;isRestricted&#39;)`  in your controller?","body":"No, you can&#39;t use <code>th:checked</code> with <code>th:field</code>.  Why don&#39;t you set the value of <code>data[__${iStat.index}__].targetIsRestricted = data_set.rawDataMap.get(&#39;isRestricted&#39;)</code>  in your controller?"}],"owner":{"account_id":10525614,"reputation":414,"user_id":7756713,"accept_rate":86,"display_name":"Jon H"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682711011,"creation_date":1682711011,"question_id":76132824,"body_markdown":"In my `Java 11`, `Spring Boot 2.7.4` application, I use `Spring MVC` and `Thymeleaf` to bind server objects to HTML pages. This generally works very well but I am struggling with a checkbox issue.\r\n\r\nIn the model, I have a map containing file names (String) and whether the file is restricted or not (boolean). I represent this in a table within a form in the following code snippet, which works fine:\r\n\r\n```\r\n&lt;tr th:each=&quot;data_set, iStat: ${resultSet.data}&quot;&gt;\r\n       &lt;td th:text=&quot;${data_set.rawDataMap.get(&#39;filename&#39;)}&quot; /&gt;\r\n       &lt;td&gt;\r\n              &lt;div class=&quot;form-check&quot;&gt;\r\n                     &lt;input class=&quot;form-check-input&quot;\r\n                            type=&quot;checkbox&quot;\r\n                            th:checked=&quot;${data_set.rawDataMap.get(&#39;isRestricted&#39;) == 1 ? true : false}&quot;\r\n                            value=&quot;permissions-check&quot;\r\n                     &gt;\r\n                     &lt;!--Other fields below--&gt;\r\n              &lt;/div&gt;\r\n       &lt;/td&gt;\r\n&lt;/tr&gt;\r\n```\r\n\r\nHowever, I want the user to be able to check/uncheck the checkbox and submit the form to a controller so that the permissions may be changed. To do this, I want to bind the checkbox to another object on the model in order to capture any changes that the user may make. To do this I added one extra line, the th:field section on line 9 below:\r\n\r\n```\r\n&lt;tr th:each=&quot;data_set, iStat: ${resultSet.data}&quot;&gt;\r\n       &lt;td th:text=&quot;${data_set.rawDataMap.get(&#39;filename&#39;)}&quot; /&gt;\r\n       &lt;td&gt;\r\n              &lt;div class=&quot;form-check&quot;&gt;\r\n                     &lt;input class=&quot;form-check-input&quot;\r\n                            type=&quot;checkbox&quot;\r\n                            th:checked=&quot;${data_set.rawDataMap.get(&#39;isRestricted&#39;) == 1 ? true : false}&quot;\r\n                            value=&quot;permissions-check&quot;\r\n                            th:field=&quot;*{data[__${iStat.index}__].targetIsRestricted}&quot;&gt;\r\n                     &lt;!--Other fields below--&gt;\r\n              &lt;/div&gt;\r\n       &lt;/td&gt;\r\n&lt;/tr&gt;\r\n```\r\n\r\nThis works in capturing the user changes, which are sent correctly to the server. The issue is that the `th:checked` section (line 7) no longer works. All checkboxes now appear unticked. So it appears that I can use either `th:checked` or `th:field`, but not both together. On the server side, I have tried making the targetIsRestricted variable on the model object a String, boolean and Object, but none have worked so far. I would be very grateful to receive any suggestions. Many thanks.","title":"Thymeleaf - can th:checked and th:field be used together?","body":"<p>In my <code>Java 11</code>, <code>Spring Boot 2.7.4</code> application, I use <code>Spring MVC</code> and <code>Thymeleaf</code> to bind server objects to HTML pages. This generally works very well but I am struggling with a checkbox issue.</p>\n<p>In the model, I have a map containing file names (String) and whether the file is restricted or not (boolean). I represent this in a table within a form in the following code snippet, which works fine:</p>\n<pre><code>&lt;tr th:each=&quot;data_set, iStat: ${resultSet.data}&quot;&gt;\n       &lt;td th:text=&quot;${data_set.rawDataMap.get('filename')}&quot; /&gt;\n       &lt;td&gt;\n              &lt;div class=&quot;form-check&quot;&gt;\n                     &lt;input class=&quot;form-check-input&quot;\n                            type=&quot;checkbox&quot;\n                            th:checked=&quot;${data_set.rawDataMap.get('isRestricted') == 1 ? true : false}&quot;\n                            value=&quot;permissions-check&quot;\n                     &gt;\n                     &lt;!--Other fields below--&gt;\n              &lt;/div&gt;\n       &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n<p>However, I want the user to be able to check/uncheck the checkbox and submit the form to a controller so that the permissions may be changed. To do this, I want to bind the checkbox to another object on the model in order to capture any changes that the user may make. To do this I added one extra line, the th:field section on line 9 below:</p>\n<pre><code>&lt;tr th:each=&quot;data_set, iStat: ${resultSet.data}&quot;&gt;\n       &lt;td th:text=&quot;${data_set.rawDataMap.get('filename')}&quot; /&gt;\n       &lt;td&gt;\n              &lt;div class=&quot;form-check&quot;&gt;\n                     &lt;input class=&quot;form-check-input&quot;\n                            type=&quot;checkbox&quot;\n                            th:checked=&quot;${data_set.rawDataMap.get('isRestricted') == 1 ? true : false}&quot;\n                            value=&quot;permissions-check&quot;\n                            th:field=&quot;*{data[__${iStat.index}__].targetIsRestricted}&quot;&gt;\n                     &lt;!--Other fields below--&gt;\n              &lt;/div&gt;\n       &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n<p>This works in capturing the user changes, which are sent correctly to the server. The issue is that the <code>th:checked</code> section (line 7) no longer works. All checkboxes now appear unticked. So it appears that I can use either <code>th:checked</code> or <code>th:field</code>, but not both together. On the server side, I have tried making the targetIsRestricted variable on the model object a String, boolean and Object, but none have worked so far. I would be very grateful to receive any suggestions. Many thanks.</p>\n"},{"tags":["java","gradle","logback","slf4j","modular"],"owner":{"account_id":3523773,"reputation":87,"user_id":2945440,"display_name":"skrenato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682710839,"creation_date":1682710839,"question_id":76132800,"body_markdown":"I&#39;ve been trying to setup SMTP Appender in Logback&#39;s configuration and I keep receiving the following error:\r\n\r\n    java.lang.IllegalAccessError:superclass access check failed: class ch.qos.logback.core.net.LoginAuthenticator (in module ch.qos.logback.core) cannot access class javax.mail.Authenticator (in unnamed module &lt;module&gt;) because module ch.qos.logback.core does not read unnamed module &lt;module&gt;\r\n\r\nThis is the SMTP Appender configuration:\r\n\r\n```\r\n&lt;appender name=&quot;SMTP&quot; class=&quot;ch.qos.logback.classic.net.SMTPAppender&quot;&gt;\r\n        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;\r\n            &lt;pattern&gt;%d{dd/MM/yyyy HH:mm:ss} | %-5level | %logger{0} | %thread | %msg%n&lt;/pattern&gt;\r\n        &lt;/layout&gt;\r\n        &lt;smtpHost&gt;smtp_server&lt;/smtpHost&gt;\r\n        &lt;smtpPort&gt;port&lt;/smtpPort&gt;\r\n        &lt;username&gt;username&lt;/username&gt;\r\n        &lt;password&gt;password&lt;/password&gt;\r\n        &lt;STARTTLS&gt;true&lt;/STARTTLS&gt;\r\n        &lt;SSL&gt;true&lt;/SSL&gt;\r\n        &lt;from&gt;sender&lt;/from&gt;\r\n        &lt;to&gt;recipient&lt;/to&gt;\r\n        &lt;subject&gt;subject&lt;/subject&gt;\r\n    &lt;/appender&gt;\r\n```\r\n\r\nGiven that my application is a gradle project, I declared the following dependencies:\r\n\r\n```\r\ndependencies {\r\n    implementation &#39;javax.activation:activation:1.1.1&#39;\r\n    implementation &#39;javax.mail:mail:1.4&#39;\r\n}\r\n```\r\n\r\nFrom the official documentation:\r\n\r\n&gt; The SMTPAppender relies on the JavaMail API. It has been tested with JavaMail API version 1.4. The JavaMail API requires the JavaBeans Activation Framework package. You can download the JavaMail API and the JavaBeans Activation Framework from their respective websites. Make sure to place these two jar files in the classpath before trying the following examples.\r\n\r\nThis is how my application is being instantiated:\r\n\r\n```\r\nCLASSPATH=$APP_HOME/lib/mail-1.4.jar:$APP_HOME/lib/activation-1.1.1.jar:$APP_HOME/etc\r\nMODULE_PATH=$APP_HOME/lib/application.jar:&lt;other_dependencies&gt;\r\n\r\njava $DEFAULT_JVM_OPTS $JAVA_OPTS -classpath &quot;\\&quot;$CLASSPATH\\&quot;&quot; --module-path &quot;\\&quot;$MODULE_PATH\\&quot;&quot; --module &lt;module&gt;/&lt;main_class&gt; &quot;$APP_ARGS&quot;\r\n\r\n```\r\n\r\n\r\nI think worth to mention that my application is a java 11 implementation, so it uses java modular and runs Logback under SLF4J.\r\n","title":"Logback SMTP Appender under SLF4J + java modular","body":"<p>I've been trying to setup SMTP Appender in Logback's configuration and I keep receiving the following error:</p>\n<pre><code>java.lang.IllegalAccessError:superclass access check failed: class ch.qos.logback.core.net.LoginAuthenticator (in module ch.qos.logback.core) cannot access class javax.mail.Authenticator (in unnamed module &lt;module&gt;) because module ch.qos.logback.core does not read unnamed module &lt;module&gt;\n</code></pre>\n<p>This is the SMTP Appender configuration:</p>\n<pre><code>&lt;appender name=&quot;SMTP&quot; class=&quot;ch.qos.logback.classic.net.SMTPAppender&quot;&gt;\n        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;\n            &lt;pattern&gt;%d{dd/MM/yyyy HH:mm:ss} | %-5level | %logger{0} | %thread | %msg%n&lt;/pattern&gt;\n        &lt;/layout&gt;\n        &lt;smtpHost&gt;smtp_server&lt;/smtpHost&gt;\n        &lt;smtpPort&gt;port&lt;/smtpPort&gt;\n        &lt;username&gt;username&lt;/username&gt;\n        &lt;password&gt;password&lt;/password&gt;\n        &lt;STARTTLS&gt;true&lt;/STARTTLS&gt;\n        &lt;SSL&gt;true&lt;/SSL&gt;\n        &lt;from&gt;sender&lt;/from&gt;\n        &lt;to&gt;recipient&lt;/to&gt;\n        &lt;subject&gt;subject&lt;/subject&gt;\n    &lt;/appender&gt;\n</code></pre>\n<p>Given that my application is a gradle project, I declared the following dependencies:</p>\n<pre><code>dependencies {\n    implementation 'javax.activation:activation:1.1.1'\n    implementation 'javax.mail:mail:1.4'\n}\n</code></pre>\n<p>From the official documentation:</p>\n<blockquote>\n<p>The SMTPAppender relies on the JavaMail API. It has been tested with JavaMail API version 1.4. The JavaMail API requires the JavaBeans Activation Framework package. You can download the JavaMail API and the JavaBeans Activation Framework from their respective websites. Make sure to place these two jar files in the classpath before trying the following examples.</p>\n</blockquote>\n<p>This is how my application is being instantiated:</p>\n<pre><code>CLASSPATH=$APP_HOME/lib/mail-1.4.jar:$APP_HOME/lib/activation-1.1.1.jar:$APP_HOME/etc\nMODULE_PATH=$APP_HOME/lib/application.jar:&lt;other_dependencies&gt;\n\njava $DEFAULT_JVM_OPTS $JAVA_OPTS -classpath &quot;\\&quot;$CLASSPATH\\&quot;&quot; --module-path &quot;\\&quot;$MODULE_PATH\\&quot;&quot; --module &lt;module&gt;/&lt;main_class&gt; &quot;$APP_ARGS&quot;\n\n</code></pre>\n<p>I think worth to mention that my application is a java 11 implementation, so it uses java modular and runs Logback under SLF4J.</p>\n"},{"tags":["java","image","pdf","itext"],"comments":[{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":0,"creation_date":1387207717,"post_id":20614350,"comment_id":30849292,"body_markdown":"What are you saving the images as?  Have you considered a lossless format like png?","body":"What are you saving the images as?  Have you considered a lossless format like png?"},{"owner":{"account_id":2802171,"reputation":653,"user_id":2410210,"accept_rate":67,"display_name":"Daniel Mulcahy"},"score":0,"creation_date":1387208143,"post_id":20614350,"comment_id":30849541,"body_markdown":"Images are stored in png format and brought into the document using a generator called doc1(3rd party). Thanks for the quick reply :)","body":"Images are stored in png format and brought into the document using a generator called doc1(3rd party). Thanks for the quick reply :)"},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":1,"creation_date":1387208256,"post_id":20614350,"comment_id":30849619,"body_markdown":"If the bulk of the pdf size is those images and they&#39;re already compressed, you might be at an impasse.  I did some research in the interim and pdf will store images with compression: https://en.wikipedia.org/wiki/Pdf#Raster_images so you may want to tune how the pdf is assembled.  Not sure much can be done once the pdf is already assembled unless you remove and re-add the images.","body":"If the bulk of the pdf size is those images and they&#39;re already compressed, you might be at an impasse.  I did some research in the interim and pdf will store images with compression: <a href=\"https://en.wikipedia.org/wiki/Pdf#Raster_images\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Pdf#Raster_images</a> so you may want to tune how the pdf is assembled.  Not sure much can be done once the pdf is already assembled unless you remove and re-add the images."},{"owner":{"account_id":2802171,"reputation":653,"user_id":2410210,"accept_rate":67,"display_name":"Daniel Mulcahy"},"score":0,"creation_date":1387209832,"post_id":20614350,"comment_id":30850714,"body_markdown":"Thanks Taylor, I have compressed the pdf&#39;s using tinyPNG. I reckon this will knock around 50% off. It is still probably not enough so I may need to use the 3rd party tool. If anyone knows how to extract and re-add the image I would be interested in giving that a go also...","body":"Thanks Taylor, I have compressed the pdf&#39;s using tinyPNG. I reckon this will knock around 50% off. It is still probably not enough so I may need to use the 3rd party tool. If anyone knows how to extract and re-add the image I would be interested in giving that a go also..."},{"owner":{"account_id":1779372,"reputation":76344,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":0,"creation_date":1387211000,"post_id":20614350,"comment_id":30851577,"body_markdown":"Your iText code looks funny because it doesn&#39;t do anything to reduce the image size! Have you taken a look at this example http://itextpdf.com/examples/iia.php?id=286 and this solution http://support.itextpdf.com/node/23","body":"Your iText code looks funny because it doesn&#39;t do anything to reduce the image size! Have you taken a look at this example <a href=\"http://itextpdf.com/examples/iia.php?id=286\" rel=\"nofollow noreferrer\">itextpdf.com/examples/iia.php?id=286</a> and this solution <a href=\"http://support.itextpdf.com/node/23\" rel=\"nofollow noreferrer\">support.itextpdf.com/node/23</a>"},{"owner":{"account_id":2802171,"reputation":653,"user_id":2410210,"accept_rate":67,"display_name":"Daniel Mulcahy"},"score":1,"creation_date":1387217209,"post_id":20614350,"comment_id":30855575,"body_markdown":"Thanks Bruno. That put me on the right path. With some minor modifications to that code I have exactly what I need. I was able to get the 7546KB down to 408KB. Result! I will post the modified code now :)","body":"Thanks Bruno. That put me on the right path. With some minor modifications to that code I have exactly what I need. I was able to get the 7546KB down to 408KB. Result! I will post the modified code now :)"},{"owner":{"account_id":156901,"reputation":1816,"user_id":374480,"accept_rate":50,"display_name":"steve"},"score":0,"creation_date":1469303848,"post_id":20614350,"comment_id":64483552,"body_markdown":"I dont think setFullCompression and setCompressionLevel should be used together. Also, valid levels are 0 - 9. Not 50;","body":"I dont think setFullCompression and setCompressionLevel should be used together. Also, valid levels are 0 - 9. Not 50;"},{"owner":{"account_id":1529451,"reputation":790,"user_id":1427037,"accept_rate":29,"display_name":"Erum"},"score":0,"creation_date":1511327444,"post_id":20614350,"comment_id":81808915,"body_markdown":"@DanielMulcahy YOUR CODE is using so many classes have u import any library ?","body":"@DanielMulcahy YOUR CODE is using so many classes have u import any library ?"}],"answers":[{"tags":[],"owner":{"account_id":2802171,"reputation":653,"user_id":2410210,"accept_rate":67,"display_name":"Daniel Mulcahy"},"down_vote_count":0,"up_vote_count":43,"is_accepted":true,"score":43,"last_activity_date":1387217467,"creation_date":1387217467,"answer_id":20617824,"question_id":20614350,"body_markdown":"I used code below for a proof of concept... Works a treat :) Thanks to Bruno for setting me on the right path :)\r\n\r\n    package compressPDF;\r\n\r\n    import java.awt.Graphics2D;\r\n    import java.awt.geom.AffineTransform;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n\r\n    import javax.imageio.ImageIO;\r\n\r\n    import com.itextpdf.text.DocumentException;\r\n    import com.itextpdf.text.pdf.PRStream;\r\n    import com.itextpdf.text.pdf.PdfName;\r\n    import com.itextpdf.text.pdf.PdfNumber;\r\n    import com.itextpdf.text.pdf.PdfObject;\r\n    import com.itextpdf.text.pdf.PdfReader;\r\n    import com.itextpdf.text.pdf.PdfStamper;\r\n    import com.itextpdf.text.pdf.parser.PdfImageObject;\r\n\r\n    public class ResizeImage {\r\n\r\n\t/** The resulting PDF file. */\r\n    //public static String RESULT = &quot;results/part4/chapter16/resized_image.pdf&quot;;\r\n    /** The multiplication factor for the image. */\r\n    public static float FACTOR = 0.5f;\r\n    \r\n    /**\r\n     * Manipulates a PDF file src with the file dest as result\r\n     * @param src the original PDF\r\n     * @param dest the resulting PDF\r\n     * @throws IOException\r\n     * @throws DocumentException \r\n     */\r\n    public void manipulatePdf(String src, String dest) throws IOException, DocumentException {\r\n        PdfName key = new PdfName(&quot;ITXT_SpecialId&quot;);\r\n        PdfName value = new PdfName(&quot;123456789&quot;);\r\n        // Read the file\r\n        PdfReader reader = new PdfReader(src);\r\n        int n = reader.getXrefSize();\r\n        PdfObject object;\r\n        PRStream stream;\r\n        // Look for image and manipulate image stream\r\n        for (int i = 0; i &lt; n; i++) {\r\n            object = reader.getPdfObject(i);\r\n            if (object == null || !object.isStream())\r\n                continue;\r\n            stream = (PRStream)object;\r\n           // if (value.equals(stream.get(key))) {\r\n\t\t    PdfObject pdfsubtype = stream.get(PdfName.SUBTYPE);\r\n\t\t    System.out.println(stream.type());\r\n\t\t    if (pdfsubtype != null &amp;&amp; pdfsubtype.toString().equals(PdfName.IMAGE.toString())) {\r\n                PdfImageObject image = new PdfImageObject(stream);\r\n                BufferedImage bi = image.getBufferedImage();\r\n                if (bi == null) continue;\r\n                int width = (int)(bi.getWidth() * FACTOR);\r\n                int height = (int)(bi.getHeight() * FACTOR);\r\n                BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\r\n                AffineTransform at = AffineTransform.getScaleInstance(FACTOR, FACTOR);\r\n                Graphics2D g = img.createGraphics();\r\n                g.drawRenderedImage(bi, at);\r\n                ByteArrayOutputStream imgBytes = new ByteArrayOutputStream();\r\n                ImageIO.write(img, &quot;JPG&quot;, imgBytes);\r\n                stream.clear();\r\n                stream.setData(imgBytes.toByteArray(), false, PRStream.BEST_COMPRESSION);\r\n                stream.put(PdfName.TYPE, PdfName.XOBJECT);\r\n                stream.put(PdfName.SUBTYPE, PdfName.IMAGE);\r\n                stream.put(key, value);\r\n                stream.put(PdfName.FILTER, PdfName.DCTDECODE);\r\n                stream.put(PdfName.WIDTH, new PdfNumber(width));\r\n                stream.put(PdfName.HEIGHT, new PdfNumber(height));\r\n                stream.put(PdfName.BITSPERCOMPONENT, new PdfNumber(8));\r\n                stream.put(PdfName.COLORSPACE, PdfName.DEVICERGB);\r\n            }\r\n        }\r\n        // Save altered PDF\r\n        PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(dest));\r\n        stamper.close();\r\n        reader.close();\r\n    }\r\n\r\n    /**\r\n     * Main method.\r\n     *\r\n     * @param    args    no arguments needed\r\n     * @throws DocumentException \r\n     * @throws IOException\r\n     */\r\n    public static void main(String[] args) throws IOException, DocumentException {\r\n        //createPdf(RESULT);\r\n        new ResizeImage().manipulatePdf(&quot;C:/_dev_env_/TEMP/compressPDF/TRPT_135002_1470_20131212_121423.PDF&quot;, &quot;C:/_dev_env_/TEMP/compressPDF/compressTest.pdf&quot;);\r\n    }\r\n    \r\n    }\r\n","title":"compress pdf with large images via java","body":"<p>I used code below for a proof of concept... Works a treat :) Thanks to Bruno for setting me on the right path :)</p>\n\n<pre><code>package compressPDF;\n\nimport java.awt.Graphics2D;\nimport java.awt.geom.AffineTransform;\nimport java.awt.image.BufferedImage;\nimport java.io.ByteArrayOutputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\nimport javax.imageio.ImageIO;\n\nimport com.itextpdf.text.DocumentException;\nimport com.itextpdf.text.pdf.PRStream;\nimport com.itextpdf.text.pdf.PdfName;\nimport com.itextpdf.text.pdf.PdfNumber;\nimport com.itextpdf.text.pdf.PdfObject;\nimport com.itextpdf.text.pdf.PdfReader;\nimport com.itextpdf.text.pdf.PdfStamper;\nimport com.itextpdf.text.pdf.parser.PdfImageObject;\n\npublic class ResizeImage {\n\n/** The resulting PDF file. */\n//public static String RESULT = \"results/part4/chapter16/resized_image.pdf\";\n/** The multiplication factor for the image. */\npublic static float FACTOR = 0.5f;\n\n/**\n * Manipulates a PDF file src with the file dest as result\n * @param src the original PDF\n * @param dest the resulting PDF\n * @throws IOException\n * @throws DocumentException \n */\npublic void manipulatePdf(String src, String dest) throws IOException, DocumentException {\n    PdfName key = new PdfName(\"ITXT_SpecialId\");\n    PdfName value = new PdfName(\"123456789\");\n    // Read the file\n    PdfReader reader = new PdfReader(src);\n    int n = reader.getXrefSize();\n    PdfObject object;\n    PRStream stream;\n    // Look for image and manipulate image stream\n    for (int i = 0; i &lt; n; i++) {\n        object = reader.getPdfObject(i);\n        if (object == null || !object.isStream())\n            continue;\n        stream = (PRStream)object;\n       // if (value.equals(stream.get(key))) {\n        PdfObject pdfsubtype = stream.get(PdfName.SUBTYPE);\n        System.out.println(stream.type());\n        if (pdfsubtype != null &amp;&amp; pdfsubtype.toString().equals(PdfName.IMAGE.toString())) {\n            PdfImageObject image = new PdfImageObject(stream);\n            BufferedImage bi = image.getBufferedImage();\n            if (bi == null) continue;\n            int width = (int)(bi.getWidth() * FACTOR);\n            int height = (int)(bi.getHeight() * FACTOR);\n            BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n            AffineTransform at = AffineTransform.getScaleInstance(FACTOR, FACTOR);\n            Graphics2D g = img.createGraphics();\n            g.drawRenderedImage(bi, at);\n            ByteArrayOutputStream imgBytes = new ByteArrayOutputStream();\n            ImageIO.write(img, \"JPG\", imgBytes);\n            stream.clear();\n            stream.setData(imgBytes.toByteArray(), false, PRStream.BEST_COMPRESSION);\n            stream.put(PdfName.TYPE, PdfName.XOBJECT);\n            stream.put(PdfName.SUBTYPE, PdfName.IMAGE);\n            stream.put(key, value);\n            stream.put(PdfName.FILTER, PdfName.DCTDECODE);\n            stream.put(PdfName.WIDTH, new PdfNumber(width));\n            stream.put(PdfName.HEIGHT, new PdfNumber(height));\n            stream.put(PdfName.BITSPERCOMPONENT, new PdfNumber(8));\n            stream.put(PdfName.COLORSPACE, PdfName.DEVICERGB);\n        }\n    }\n    // Save altered PDF\n    PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(dest));\n    stamper.close();\n    reader.close();\n}\n\n/**\n * Main method.\n *\n * @param    args    no arguments needed\n * @throws DocumentException \n * @throws IOException\n */\npublic static void main(String[] args) throws IOException, DocumentException {\n    //createPdf(RESULT);\n    new ResizeImage().manipulatePdf(\"C:/_dev_env_/TEMP/compressPDF/TRPT_135002_1470_20131212_121423.PDF\", \"C:/_dev_env_/TEMP/compressPDF/compressTest.pdf\");\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5613712,"reputation":631,"user_id":4445742,"accept_rate":25,"display_name":"Marti P&#224;mies Sol&#224;"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1605446002,"creation_date":1605446002,"answer_id":64844818,"question_id":20614350,"body_markdown":"Just to update the excellent answer from @Daniel, I update his code to be compatible with iText7.\r\n\r\n    package opencde.builder.compresspdf;\r\n    \r\n    import java.awt.Graphics2D;\r\n    import java.awt.geom.AffineTransform;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.util.Iterator;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    import com.itextpdf.io.image.ImageDataFactory;\r\n    import com.itextpdf.kernel.pdf.PdfDictionary;\r\n    import com.itextpdf.kernel.pdf.PdfDocument;\r\n    import com.itextpdf.kernel.pdf.PdfName;\r\n    import com.itextpdf.kernel.pdf.PdfPage;\r\n    import com.itextpdf.kernel.pdf.PdfReader;\r\n    import com.itextpdf.kernel.pdf.PdfStream;\r\n    import com.itextpdf.kernel.pdf.PdfWriter;\r\n    import com.itextpdf.kernel.pdf.xobject.PdfImageXObject;\r\n    import com.itextpdf.layout.element.Image;\r\n    \r\n    public class ResizeImageV7 {\r\n    \t\r\n    \t// Logging\r\n    \tprivate static Logger logger = LoggerFactory.getLogger(ResizeImageV7.class);\r\n    \r\n    \t/**\r\n    \t * Manipulates a PDF file src with the file dest as result\r\n    \t * \r\n    \t * @param src  the original PDF\r\n    \t * @param dest the resulting PDF\r\n    \t * @param resizeFactor factor to multiplicate to resize image\r\n    \t * @throws IOException\r\n    \t */\r\n    \tpublic void manipulatePdf(String src, String dest,Float resizeFactor) throws IOException {\r\n            \r\n    \t\t//Get source pdf\r\n    \t\tPdfDocument pdfDoc = new PdfDocument(new PdfReader(src), new PdfWriter(dest));\r\n    \r\n            // Iterate over all pages to get all images.\r\n            for (int i = 1; i &lt;= pdfDoc.getNumberOfPages(); i++)\r\n            {\r\n                PdfPage page = pdfDoc.getPage(i);\r\n                PdfDictionary pageDict = page.getPdfObject();\r\n                PdfDictionary resources = pageDict.getAsDictionary(PdfName.Resources);\r\n                // Get images\r\n                PdfDictionary xObjects = resources.getAsDictionary(PdfName.XObject);\r\n                for (Iterator&lt;PdfName&gt; iter = xObjects.keySet().iterator() ; iter.hasNext(); ) {\r\n                \t// Get image\r\n                \tPdfName imgRef = iter.next();\r\n                \tPdfStream stream = xObjects.getAsStream(imgRef);\r\n                \tPdfImageXObject image = new PdfImageXObject(stream);\r\n     \t\t\t\tBufferedImage bi = image.getBufferedImage();\r\n     \t\t\t\tif (bi == null)\r\n     \t\t\t\t\tcontinue;\r\n     \t\t\t\t\r\n     \t\t\t\t// Create new image\r\n     \t\t\t\tint width = (int) (bi.getWidth() * resizeFactor);\r\n     \t\t\t\tint height = (int) (bi.getHeight() * resizeFactor);\r\n     \t\t\t\tBufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\r\n     \t\t\t\tAffineTransform at = AffineTransform.getScaleInstance(resizeFactor, resizeFactor);\r\n     \t\t\t\tGraphics2D g = img.createGraphics();\r\n     \t\t\t\tg.drawRenderedImage(bi, at);\r\n     \t\t\t\tByteArrayOutputStream imgBytes = new ByteArrayOutputStream();\r\n     \t\t\t\t\r\n     \t\t\t\t// Write new image\r\n     \t\t\t\tImageIO.write(img, &quot;JPG&quot;, imgBytes);\r\n     \t\t\t\tImage imgNew =new Image(ImageDataFactory.create(imgBytes.toByteArray()));\r\n     \t\t\t\t\r\n                    // Replace the original image with the resized image\r\n                    xObjects.put(imgRef, imgNew.getXObject().getPdfObject());\r\n    \t\t\t}          \r\n            }\r\n            \r\n            pdfDoc.close();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Main method.\r\n    \t *\r\n    \t * @param src  the original PDF\r\n    \t * @param dest the resulting PDF\r\n    \t * @param resizeFactor factor to multiplicate to resize image\r\n    \t * @throws IOException\r\n    \t */\r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\t//Get input parametres\r\n    \t\tif (args.length&lt;3 ) {\r\n    \t\t\tSystem.out.println(&quot;Source PDF, Destination PDF and Resize Factor must be provided as parametres&quot;);\r\n    \t\t} else {\r\n    \t\t\tString sourcePDF=args[0];\r\n    \t\t\tString destPDF=args[1];\r\n    \t\t\tFloat resizeFactor=Float.valueOf(new String(args[2]));\r\n    \t\t\tlogger.info(&quot;Inovking Resize with args, source:&quot; + sourcePDF\r\n    \t\t\t\t\t+ &quot; destination:&quot; + destPDF \r\n    \t\t\t\t\t+ &quot; factor:&quot; + resizeFactor);\r\n    \t\t\t//Call method to resize images\r\n    \t\t\tnew ResizeImageV7().manipulatePdf(sourcePDF,destPDF,resizeFactor);\r\n    \t\t\tlogger.info(&quot;PDF resized&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"compress pdf with large images via java","body":"<p>Just to update the excellent answer from @Daniel, I update his code to be compatible with iText7.</p>\n<pre><code>package opencde.builder.compresspdf;\n\nimport java.awt.Graphics2D;\nimport java.awt.geom.AffineTransform;\nimport java.awt.image.BufferedImage;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.util.Iterator;\n\nimport javax.imageio.ImageIO;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport com.itextpdf.io.image.ImageDataFactory;\nimport com.itextpdf.kernel.pdf.PdfDictionary;\nimport com.itextpdf.kernel.pdf.PdfDocument;\nimport com.itextpdf.kernel.pdf.PdfName;\nimport com.itextpdf.kernel.pdf.PdfPage;\nimport com.itextpdf.kernel.pdf.PdfReader;\nimport com.itextpdf.kernel.pdf.PdfStream;\nimport com.itextpdf.kernel.pdf.PdfWriter;\nimport com.itextpdf.kernel.pdf.xobject.PdfImageXObject;\nimport com.itextpdf.layout.element.Image;\n\npublic class ResizeImageV7 {\n    \n    // Logging\n    private static Logger logger = LoggerFactory.getLogger(ResizeImageV7.class);\n\n    /**\n     * Manipulates a PDF file src with the file dest as result\n     * \n     * @param src  the original PDF\n     * @param dest the resulting PDF\n     * @param resizeFactor factor to multiplicate to resize image\n     * @throws IOException\n     */\n    public void manipulatePdf(String src, String dest,Float resizeFactor) throws IOException {\n        \n        //Get source pdf\n        PdfDocument pdfDoc = new PdfDocument(new PdfReader(src), new PdfWriter(dest));\n\n        // Iterate over all pages to get all images.\n        for (int i = 1; i &lt;= pdfDoc.getNumberOfPages(); i++)\n        {\n            PdfPage page = pdfDoc.getPage(i);\n            PdfDictionary pageDict = page.getPdfObject();\n            PdfDictionary resources = pageDict.getAsDictionary(PdfName.Resources);\n            // Get images\n            PdfDictionary xObjects = resources.getAsDictionary(PdfName.XObject);\n            for (Iterator&lt;PdfName&gt; iter = xObjects.keySet().iterator() ; iter.hasNext(); ) {\n                // Get image\n                PdfName imgRef = iter.next();\n                PdfStream stream = xObjects.getAsStream(imgRef);\n                PdfImageXObject image = new PdfImageXObject(stream);\n                BufferedImage bi = image.getBufferedImage();\n                if (bi == null)\n                    continue;\n                \n                // Create new image\n                int width = (int) (bi.getWidth() * resizeFactor);\n                int height = (int) (bi.getHeight() * resizeFactor);\n                BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n                AffineTransform at = AffineTransform.getScaleInstance(resizeFactor, resizeFactor);\n                Graphics2D g = img.createGraphics();\n                g.drawRenderedImage(bi, at);\n                ByteArrayOutputStream imgBytes = new ByteArrayOutputStream();\n                \n                // Write new image\n                ImageIO.write(img, &quot;JPG&quot;, imgBytes);\n                Image imgNew =new Image(ImageDataFactory.create(imgBytes.toByteArray()));\n                \n                // Replace the original image with the resized image\n                xObjects.put(imgRef, imgNew.getXObject().getPdfObject());\n            }          \n        }\n        \n        pdfDoc.close();\n    }\n\n    /**\n     * Main method.\n     *\n     * @param src  the original PDF\n     * @param dest the resulting PDF\n     * @param resizeFactor factor to multiplicate to resize image\n     * @throws IOException\n     */\n    public static void main(String[] args) throws IOException {\n        //Get input parametres\n        if (args.length&lt;3 ) {\n            System.out.println(&quot;Source PDF, Destination PDF and Resize Factor must be provided as parametres&quot;);\n        } else {\n            String sourcePDF=args[0];\n            String destPDF=args[1];\n            Float resizeFactor=Float.valueOf(new String(args[2]));\n            logger.info(&quot;Inovking Resize with args, source:&quot; + sourcePDF\n                    + &quot; destination:&quot; + destPDF \n                    + &quot; factor:&quot; + resizeFactor);\n            //Call method to resize images\n            new ResizeImageV7().manipulatePdf(sourcePDF,destPDF,resizeFactor);\n            logger.info(&quot;PDF resized&quot;);\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":2802171,"reputation":653,"user_id":2410210,"accept_rate":67,"display_name":"Daniel Mulcahy"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37363,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":20617824,"answer_count":2,"score":20,"last_activity_date":1682709934,"creation_date":1387207241,"question_id":20614350,"body_markdown":"Looking for a way to compress images in a pdf and to output a pdf for archiving. I cannot compress the images before creation as it would compromise the quality of the print. \r\n\r\nThe size of each pdf is around 8MB with the bulk of this being made up of 2 images. Images are in png format and are brought into pdf during generation(3rd party generator used)\r\n\r\nIs there a way to compress these in java without using a 3rd party tool. I have tried with pdfbox, itext and a 3rd party exe(neevia), the 3rd party tool the only one that has given me any results so far(Down to around half a MB) but I do not want to relinquish control to an exe.\r\nSample code is below.\r\n\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.util.Arrays;\r\n\r\n    import org.apache.pdfbox.exceptions.COSVisitorException;\r\n    import org.apache.pdfbox.pdmodel.PDDocument;\r\n    import org.apache.pdfbox.pdmodel.common.PDStream;\r\n\r\n    import com.itextpdf.text.DocumentException;\r\n    import com.itextpdf.text.pdf.PdfReader;\r\n    import com.itextpdf.text.pdf.PdfStamper;\r\n    import com.itextpdf.text.pdf.PdfWriter;\r\n\r\n    public class compressPDF {\r\n\r\n\tpublic static void main (String[] args) throws IOException, DocumentException, COSVisitorException {\r\n\t\t\r\n\t\t\r\n\t\t/*\r\n\t\t * Using PDF Box\r\n\t\t */\r\n\t\t\r\n\t\tPDDocument doc; // = new PDDocument();\r\n\t\t\r\n\t\tdoc = PDDocument.load(&quot;C:/_dev_env_/TEMP/compressPDF/TRPT_135002_1470_20131212_121423.PDF&quot;);\r\n\t\t\r\n\t\tPDStream stream= new PDStream(doc);\r\n\t\tstream.addCompression();\r\n\t\t\r\n\t\tdoc.save(&quot;C:/_dev_env_/TEMP/compressPDF/compressed_pdfBox.pdf&quot;);\r\n\t\t\r\n\t\tdoc.close();\r\n\t\t\r\n\t\t/*\r\n\t\t * Using itext\r\n\t\t */\r\n\t\t\r\n\t\tPdfReader reader = new PdfReader(&quot;C:/_dev_env_/TEMP/compressPDF/TRPT_135002_1470_20131212_121423.PDF&quot;);\r\n\t\t\r\n        PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(&quot;C:/_dev_env_/TEMP/compressPDF/compressed_Itext.pdf&quot;), PdfWriter.VERSION_1_5);\r\n        stamper.setFullCompression();\r\n        stamper.getWriter().setCompressionLevel(50);\r\n        int total = reader.getNumberOfPages() + 1;\r\n        for (int i = 1; i &lt; total; i++) {\r\n            reader.setPageContent(i, reader.getPageContent(i));\r\n        }\r\n        stamper.close();\r\n        reader.close();\r\n        \r\n\t\t/*\r\n\t\t * Using 3rd party - Neevia \r\n\t\t */\r\n\t\ttry {\r\n        Process process = new ProcessBuilder(&quot;C:/Program Files (x86)/neeviaPDF.com/PDFcompress/cmdLine/CLcompr.exe&quot;,&quot;C:/_dev_env_/TEMP/compressPDF/TRPT_135002_1470_20131212_121423.PDF&quot;, &quot;C:/_dev_env_/TEMP/compressPDF/compressed_Neevia.pdf&quot;).start();\r\n        InputStream is = process.getInputStream();\r\n        InputStreamReader isr = new InputStreamReader(is);\r\n        BufferedReader br = new BufferedReader(isr);\r\n        String line;\r\n\r\n        System.out.printf(&quot;Output of running %s is:&quot;, Arrays.toString(args));\r\n\r\n        while ((line = br.readLine()) != null) {\r\n          System.out.println(line);\r\n        }\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(e);\r\n\t\t} finally {\r\n\t\t\tSystem.out.println(&quot;Created!!&quot;);\r\n\t\t}\r\n\t\r\n\t}\r\n\t\r\n    }\r\n","title":"compress pdf with large images via java","body":"<p>Looking for a way to compress images in a pdf and to output a pdf for archiving. I cannot compress the images before creation as it would compromise the quality of the print. </p>\n\n<p>The size of each pdf is around 8MB with the bulk of this being made up of 2 images. Images are in png format and are brought into pdf during generation(3rd party generator used)</p>\n\n<p>Is there a way to compress these in java without using a 3rd party tool. I have tried with pdfbox, itext and a 3rd party exe(neevia), the 3rd party tool the only one that has given me any results so far(Down to around half a MB) but I do not want to relinquish control to an exe.\nSample code is below.</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.Arrays;\n\nimport org.apache.pdfbox.exceptions.COSVisitorException;\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.common.PDStream;\n\nimport com.itextpdf.text.DocumentException;\nimport com.itextpdf.text.pdf.PdfReader;\nimport com.itextpdf.text.pdf.PdfStamper;\nimport com.itextpdf.text.pdf.PdfWriter;\n\npublic class compressPDF {\n\npublic static void main (String[] args) throws IOException, DocumentException, COSVisitorException {\n\n\n    /*\n     * Using PDF Box\n     */\n\n    PDDocument doc; // = new PDDocument();\n\n    doc = PDDocument.load(\"C:/_dev_env_/TEMP/compressPDF/TRPT_135002_1470_20131212_121423.PDF\");\n\n    PDStream stream= new PDStream(doc);\n    stream.addCompression();\n\n    doc.save(\"C:/_dev_env_/TEMP/compressPDF/compressed_pdfBox.pdf\");\n\n    doc.close();\n\n    /*\n     * Using itext\n     */\n\n    PdfReader reader = new PdfReader(\"C:/_dev_env_/TEMP/compressPDF/TRPT_135002_1470_20131212_121423.PDF\");\n\n    PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(\"C:/_dev_env_/TEMP/compressPDF/compressed_Itext.pdf\"), PdfWriter.VERSION_1_5);\n    stamper.setFullCompression();\n    stamper.getWriter().setCompressionLevel(50);\n    int total = reader.getNumberOfPages() + 1;\n    for (int i = 1; i &lt; total; i++) {\n        reader.setPageContent(i, reader.getPageContent(i));\n    }\n    stamper.close();\n    reader.close();\n\n    /*\n     * Using 3rd party - Neevia \n     */\n    try {\n    Process process = new ProcessBuilder(\"C:/Program Files (x86)/neeviaPDF.com/PDFcompress/cmdLine/CLcompr.exe\",\"C:/_dev_env_/TEMP/compressPDF/TRPT_135002_1470_20131212_121423.PDF\", \"C:/_dev_env_/TEMP/compressPDF/compressed_Neevia.pdf\").start();\n    InputStream is = process.getInputStream();\n    InputStreamReader isr = new InputStreamReader(is);\n    BufferedReader br = new BufferedReader(isr);\n    String line;\n\n    System.out.printf(\"Output of running %s is:\", Arrays.toString(args));\n\n    while ((line = br.readLine()) != null) {\n      System.out.println(line);\n    }\n    } catch (Exception e) {\n        System.out.println(e);\n    } finally {\n        System.out.println(\"Created!!\");\n    }\n\n}\n\n}\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1682540073,"post_id":76114600,"comment_id":134234089,"body_markdown":"You can&#39;t pass a null to an  int in the constructor  carCode is an int.  Please include your complete class including constructors and getters.  And why is the car name an int?  If is really a string, any answer provided won&#39;t be of use to you.","body":"You can&#39;t pass a null to an  int in the constructor  carCode is an int.  Please include your complete class including constructors and getters.  And why is the car name an int?  If is really a string, any answer provided won&#39;t be of use to you."},{"owner":{"account_id":1894123,"reputation":619,"user_id":1711465,"accept_rate":40,"display_name":"Vamsi"},"score":1,"creation_date":1682540432,"post_id":76114600,"comment_id":134234171,"body_markdown":"Thanks for pointing it out. I corrected them.","body":"Thanks for pointing it out. I corrected them."},{"owner":{"account_id":1894123,"reputation":619,"user_id":1711465,"accept_rate":40,"display_name":"Vamsi"},"score":1,"creation_date":1682540709,"post_id":76114600,"comment_id":134234227,"body_markdown":"I removed unnecessary properties from the class in the question.","body":"I removed unnecessary properties from the class in the question."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682542833,"creation_date":1682539637,"answer_id":76114695,"question_id":76114600,"body_markdown":"Predicates provide the method [`and()`][1], which allows you to combine two predicates with a logical **AND**.\r\n\r\n&gt; Returns a composed predicate that represents a short-circuiting logical AND of this predicate and another. When evaluating the composed predicate, if this predicate is false, then the other predicate is not evaluated.\r\n\r\nExample:\r\n```\r\nPredicate&lt;Car&gt; distinctByCarNum = distinctByKey(Car::getCarNum);\r\nPredicate&lt;Car&gt; engineNonNull = car -&gt; Objects.nonNull(car.getCarEngine());\r\nPredicate&lt;Car&gt; combinedPredicate = distinctByCarNum.and(engineNonNull);\r\nList&lt;Car&gt; filtered = carList.stream()\r\n    .filter(combinedPredicate)\r\n    .collect(Collectors.toList());\r\n```\r\n**Edit:** After requirement update, you need grouping, not filtering. Refer to the [answer from shmosel][2] for correct solution.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Predicate.html#and(java.util.function.Predicate)\r\n  [2]: https://stackoverflow.com/a/76114896/17795888","title":"Filtering data based on two conditions in java streams","body":"<p>Predicates provide the method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Predicate.html#and(java.util.function.Predicate)\" rel=\"nofollow noreferrer\"><code>and()</code></a>, which allows you to combine two predicates with a logical <strong>AND</strong>.</p>\n<blockquote>\n<p>Returns a composed predicate that represents a short-circuiting logical AND of this predicate and another. When evaluating the composed predicate, if this predicate is false, then the other predicate is not evaluated.</p>\n</blockquote>\n<p>Example:</p>\n<pre><code>Predicate&lt;Car&gt; distinctByCarNum = distinctByKey(Car::getCarNum);\nPredicate&lt;Car&gt; engineNonNull = car -&gt; Objects.nonNull(car.getCarEngine());\nPredicate&lt;Car&gt; combinedPredicate = distinctByCarNum.and(engineNonNull);\nList&lt;Car&gt; filtered = carList.stream()\n    .filter(combinedPredicate)\n    .collect(Collectors.toList());\n</code></pre>\n<p><strong>Edit:</strong> After requirement update, you need grouping, not filtering. Refer to the <a href=\"https://stackoverflow.com/a/76114896/17795888\">answer from shmosel</a> for correct solution.</p>\n"},{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682542376,"creation_date":1682541391,"answer_id":76114896,"question_id":76114600,"body_markdown":"I would recommend the `toMap()` collector with a merge function to select the one with a non-null engine:\r\n\r\n    carList.stream()\r\n            .collect(Collectors.collectingAndThen(\r\n                    Collectors.toMap(\r\n                            Car::getCarNum,\r\n                            c -&gt; c,\r\n                            (a, b) -&gt; a.getCarEngine() != null ? a : b),\r\n                    map -&gt; new ArrayList&lt;&gt;(map.values())))\r\n\r\nThis way, if there&#39;s a `carNum` with only null engines, the first one will remain the final result.","title":"Filtering data based on two conditions in java streams","body":"<p>I would recommend the <code>toMap()</code> collector with a merge function to select the one with a non-null engine:</p>\n<pre><code>carList.stream()\n        .collect(Collectors.collectingAndThen(\n                Collectors.toMap(\n                        Car::getCarNum,\n                        c -&gt; c,\n                        (a, b) -&gt; a.getCarEngine() != null ? a : b),\n                map -&gt; new ArrayList&lt;&gt;(map.values())))\n</code></pre>\n<p>This way, if there's a <code>carNum</code> with only null engines, the first one will remain the final result.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682709850,"creation_date":1682543829,"answer_id":76115160,"question_id":76114600,"body_markdown":"Here is one way.\r\n- first I group by `carNum`.\r\n- then for each collection of same `carNums` I first check that all are null for `carEngine`.  If so, I simply return the first in the collection.\r\n- otherwise, I stream the list and choose the first one that is not null since one **must** be. \r\n```\r\nList&lt;Car&gt; results = carList.stream()\r\n   .collect(Collectors.groupingBy(Car::getCarNum)).values()\r\n   .stream().map(lst -&gt; {\r\n      if (lst.stream().allMatch(car -&gt; car.getCarEngine() == null)) {\r\n          return lst.get(0);\r\n      } else {\r\n          return lst.stream()\r\n                 .filter(car -&gt; car.getCarEngine() != null)\r\n                 .findFirst().get();\r\n            }\r\n        }).toList();\r\n```\r\nprints\r\n```\r\nCar [carNum=1, carEngine=S02K]\r\nCar [carNum=2, carEngine=S9K]\r\nCar [carNum=3, carEngine=null]\r\n","title":"Filtering data based on two conditions in java streams","body":"<p>Here is one way.</p>\n<ul>\n<li>first I group by <code>carNum</code>.</li>\n<li>then for each collection of same <code>carNums</code> I first check that all are null for <code>carEngine</code>.  If so, I simply return the first in the collection.</li>\n<li>otherwise, I stream the list and choose the first one that is not null since one <strong>must</strong> be.</li>\n</ul>\n<pre><code>List&lt;Car&gt; results = carList.stream()\n   .collect(Collectors.groupingBy(Car::getCarNum)).values()\n   .stream().map(lst -&gt; {\n      if (lst.stream().allMatch(car -&gt; car.getCarEngine() == null)) {\n          return lst.get(0);\n      } else {\n          return lst.stream()\n                 .filter(car -&gt; car.getCarEngine() != null)\n                 .findFirst().get();\n            }\n        }).toList();\n</code></pre>\n<p>prints</p>\n<pre><code>Car [carNum=1, carEngine=S02K]\nCar [carNum=2, carEngine=S9K]\nCar [carNum=3, carEngine=null]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7547772,"reputation":8583,"user_id":5730279,"display_name":"hc_dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682550119,"creation_date":1682548177,"answer_id":76115521,"question_id":76114600,"body_markdown":"## Sort with [`nullsLast`][1] before filtering\r\nThe trick is to sort with **nulls last** before the distinct-filter:\r\n```java\r\n// first by number\r\nComparator.comparing(Car::getNum)\r\n  // we prefer with engine before no engine.\r\n  .thenComparing(Car::getEngine, Comparator.nullsLast(Comparator.naturalOrder()))\r\n```\r\nYou can pass this comparator to the `Stream.sorted()` step, before filtering.\r\n\r\n### Solution\r\n```java\r\nimport java.util.*\r\nimport java.util.Comparator;\r\nimport java.util.concurrent.*;\r\nimport java.util.function.*;\r\nimport java.util.stream.*;\r\n\r\nclass Car {\r\n  int num;\r\n  String engine;\r\n\r\n  public Car(int num, String engine) {\r\n    this.num = num;\r\n    this.engine = engine;\r\n  }\r\n\r\n  public Integer getNum() {\r\n    return this.num;\r\n  }\r\n\r\n  public String getEngine() {\r\n    return this.engine;\r\n  }\r\n\r\n  public String toString() {\r\n    return String.format(&quot;Car: %d, %s&quot;, num, engine);\r\n  }\r\n}\r\n\r\n/* Name of the class has to be &quot;Main&quot; only if the class is public. */\r\nclass Ideone {\r\n  public static &lt;T&gt; Predicate&lt;T&gt; distinctByKey(\r\n      Function&lt;? super T, ?&gt; keyExtractor) {\r\n    Set&lt;Object&gt; seen = ConcurrentHashMap.newKeySet();\r\n    return t -&gt; seen.add(keyExtractor.apply(t));\r\n  }\r\n\r\n  public static Comparator&lt;Car&gt; withNullEnginesLast() {\r\n    return Comparator.comparing(Car::getNum)\r\n        .thenComparing(\r\n            Car::getEngine, Comparator.nullsLast(Comparator.naturalOrder()));\r\n  }\r\n\r\n  public static void main(String[] args) throws java.lang.Exception {\r\n    // your code goes here\r\n\r\n    var carList = List.of(\r\n        // num, engine\r\n        new Car(1, &quot;S02K&quot;),\r\n        new Car(1, null),  // filter out as duplicate (nulls last)\r\n        new Car(2, null),  // filter out as duplicate (nulls last)\r\n        new Car(2, &quot;S9K&quot;),\r\n        new Car(3, null)  // include because only occurrence for number\r\n    );\r\n\r\n    var result =\r\n        carList.stream()\r\n            .sorted(withNullEnginesLast()) // sort first by num, then engine\r\n                                           // where null-engines last\r\n            .filter(distinctByKey(Car::getNum))\r\n            .collect(Collectors.toList());\r\n\r\n    System.out.println(result);\r\n  }\r\n}\r\n```\r\nPrints the car 2 **with engine**:\r\n```\r\n[Car: 1, S02K, Car: 2, S9K, Car: 3, null]\r\n```\r\nTry it online: [IDEone demo](https://ideone.com/69nfTx)\r\n### See also\r\n* Baeldung Tutorial: [Java 8 - Comparison with Lambdas](https://www.baeldung.com/java-8-sort-lambda)\r\n* Similar Car sorting: https://stackoverflow.com/questions/58332511/how-to-do-stream-sort-based-on-multiple-comparsions-of-nested-object\r\n* JavaDocs for the important decorator: [`Comparator.nullsLast()`][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/10/docs/api/java/util/Comparator.html#nullsLast(java.util.Comparator)","title":"Filtering data based on two conditions in java streams","body":"<h2>Sort with <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Comparator.html#nullsLast(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>nullsLast</code></a> before filtering</h2>\n<p>The trick is to sort with <strong>nulls last</strong> before the distinct-filter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// first by number\nComparator.comparing(Car::getNum)\n  // we prefer with engine before no engine.\n  .thenComparing(Car::getEngine, Comparator.nullsLast(Comparator.naturalOrder()))\n</code></pre>\n<p>You can pass this comparator to the <code>Stream.sorted()</code> step, before filtering.</p>\n<h3>Solution</h3>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*\nimport java.util.Comparator;\nimport java.util.concurrent.*;\nimport java.util.function.*;\nimport java.util.stream.*;\n\nclass Car {\n  int num;\n  String engine;\n\n  public Car(int num, String engine) {\n    this.num = num;\n    this.engine = engine;\n  }\n\n  public Integer getNum() {\n    return this.num;\n  }\n\n  public String getEngine() {\n    return this.engine;\n  }\n\n  public String toString() {\n    return String.format(&quot;Car: %d, %s&quot;, num, engine);\n  }\n}\n\n/* Name of the class has to be &quot;Main&quot; only if the class is public. */\nclass Ideone {\n  public static &lt;T&gt; Predicate&lt;T&gt; distinctByKey(\n      Function&lt;? super T, ?&gt; keyExtractor) {\n    Set&lt;Object&gt; seen = ConcurrentHashMap.newKeySet();\n    return t -&gt; seen.add(keyExtractor.apply(t));\n  }\n\n  public static Comparator&lt;Car&gt; withNullEnginesLast() {\n    return Comparator.comparing(Car::getNum)\n        .thenComparing(\n            Car::getEngine, Comparator.nullsLast(Comparator.naturalOrder()));\n  }\n\n  public static void main(String[] args) throws java.lang.Exception {\n    // your code goes here\n\n    var carList = List.of(\n        // num, engine\n        new Car(1, &quot;S02K&quot;),\n        new Car(1, null),  // filter out as duplicate (nulls last)\n        new Car(2, null),  // filter out as duplicate (nulls last)\n        new Car(2, &quot;S9K&quot;),\n        new Car(3, null)  // include because only occurrence for number\n    );\n\n    var result =\n        carList.stream()\n            .sorted(withNullEnginesLast()) // sort first by num, then engine\n                                           // where null-engines last\n            .filter(distinctByKey(Car::getNum))\n            .collect(Collectors.toList());\n\n    System.out.println(result);\n  }\n}\n</code></pre>\n<p>Prints the car 2 <strong>with engine</strong>:</p>\n<pre><code>[Car: 1, S02K, Car: 2, S9K, Car: 3, null]\n</code></pre>\n<p>Try it online: <a href=\"https://ideone.com/69nfTx\" rel=\"nofollow noreferrer\">IDEone demo</a></p>\n<h3>See also</h3>\n<ul>\n<li>Baeldung Tutorial: <a href=\"https://www.baeldung.com/java-8-sort-lambda\" rel=\"nofollow noreferrer\">Java 8 - Comparison with Lambdas</a></li>\n<li>Similar Car sorting: <a href=\"https://stackoverflow.com/questions/58332511/how-to-do-stream-sort-based-on-multiple-comparsions-of-nested-object\">How to do stream sort based on multiple comparsions of nested object?</a></li>\n<li>JavaDocs for the important decorator: <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Comparator.html#nullsLast(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>Comparator.nullsLast()</code></a></li>\n</ul>\n"}],"owner":{"account_id":1894123,"reputation":619,"user_id":1711465,"accept_rate":40,"display_name":"Vamsi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1682709850,"creation_date":1682538902,"question_id":76114600,"body_markdown":"I have the following code\r\n\r\n    public class Car {\r\n        Long carNum;\r\n        String carEngine;\r\n    }\r\n\r\n\r\nThe data in List&lt;Car&gt; object is as follows:\r\n\r\n    Car(carNum=1, carEngine=S02K), \r\n    Car(carNum=1, carEngine=null), \r\n    Car(carNum=2, carEngine=null),\r\n    Car(carNum=2, carEngine=S9K),\r\n    Car(carNum=3, carEngine=null)\r\n\r\nHow can I filter out data from the car object where\r\n\r\ncheck for **distinct carNum** If there are more than one similar carNum then check where **carEngine is not null** and return the data in a list.\r\n\r\nI am able to do the distinct carNum using \r\n\r\n    public static &lt;T&gt; Predicate&lt;T&gt; distinctByKey(Function&lt;? super T, ?&gt; keyExtractor) {\r\n    \t\tSet&lt;Object&gt; seen = ConcurrentHashMap.newKeySet();\r\n    \t\treturn t -&gt; seen.add(keyExtractor.apply(t));\r\n    }\r\n\r\nin the following way:\r\n\r\n    carList.stream().filter(distinctByKey(Car::getCarNum)).collect(Collectors.toList());\r\n\r\nThe above code gets the distinct carNum but there is a very good chance that it will return the results with null carEngine.\r\n\r\nHow can I check where carEngine is not null along with distinct carNum combined.\r\n\r\n**NOTE:** If there is only one distinct carNum without carEngine then I should return that row along with other rows.\r\n\r\nFor example: If the input data looks like this:\r\n\r\n    Car(carNum=1, carEngine=S02K), \r\n    Car(carNum=1, carEngine=null), \r\n    Car(carNum=2, carEngine=null),\r\n    Car(carNum=2, carEngine=S9K),\r\n    Car(carNum=3, carEngine=null)\r\n\r\nthen the output should be:\r\n\r\n    Car(carNum=1, carEngine=S02K), \r\n    Car(carNum=2, carEngine=S9K),\r\n    Car(carNum=3, carEngine=null)\r\n\r\nPlease let me know. Thank you!\r\n","title":"Filtering data based on two conditions in java streams","body":"<p>I have the following code</p>\n<pre><code>public class Car {\n    Long carNum;\n    String carEngine;\n}\n</code></pre>\n<p>The data in List object is as follows:</p>\n<pre><code>Car(carNum=1, carEngine=S02K), \nCar(carNum=1, carEngine=null), \nCar(carNum=2, carEngine=null),\nCar(carNum=2, carEngine=S9K),\nCar(carNum=3, carEngine=null)\n</code></pre>\n<p>How can I filter out data from the car object where</p>\n<p>check for <strong>distinct carNum</strong> If there are more than one similar carNum then check where <strong>carEngine is not null</strong> and return the data in a list.</p>\n<p>I am able to do the distinct carNum using</p>\n<pre><code>public static &lt;T&gt; Predicate&lt;T&gt; distinctByKey(Function&lt;? super T, ?&gt; keyExtractor) {\n        Set&lt;Object&gt; seen = ConcurrentHashMap.newKeySet();\n        return t -&gt; seen.add(keyExtractor.apply(t));\n}\n</code></pre>\n<p>in the following way:</p>\n<pre><code>carList.stream().filter(distinctByKey(Car::getCarNum)).collect(Collectors.toList());\n</code></pre>\n<p>The above code gets the distinct carNum but there is a very good chance that it will return the results with null carEngine.</p>\n<p>How can I check where carEngine is not null along with distinct carNum combined.</p>\n<p><strong>NOTE:</strong> If there is only one distinct carNum without carEngine then I should return that row along with other rows.</p>\n<p>For example: If the input data looks like this:</p>\n<pre><code>Car(carNum=1, carEngine=S02K), \nCar(carNum=1, carEngine=null), \nCar(carNum=2, carEngine=null),\nCar(carNum=2, carEngine=S9K),\nCar(carNum=3, carEngine=null)\n</code></pre>\n<p>then the output should be:</p>\n<pre><code>Car(carNum=1, carEngine=S02K), \nCar(carNum=2, carEngine=S9K),\nCar(carNum=3, carEngine=null)\n</code></pre>\n<p>Please let me know. Thank you!</p>\n"},{"tags":["java","google-api","google-oauth"],"answers":[{"tags":[],"owner":{"account_id":6165775,"reputation":1029,"user_id":4805765,"accept_rate":51,"display_name":"Scooter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442100937,"creation_date":1442100937,"answer_id":32544849,"question_id":32543510,"body_markdown":"The answer was simple. I had the wrong dependencies the whole time. Make sure that you have gdata-client version 1.47. Here&#39;s a link to the jar file http://mvnrepository.com/artifact/com.google.gdata/core/1.47.1. Once I used that as a library all my problems went away :)","title":"Java Google Sheets API OAuth 2.0","body":"<p>The answer was simple. I had the wrong dependencies the whole time. Make sure that you have gdata-client version 1.47. Here's a link to the jar file <a href=\"http://mvnrepository.com/artifact/com.google.gdata/core/1.47.1\" rel=\"nofollow\">http://mvnrepository.com/artifact/com.google.gdata/core/1.47.1</a>. Once I used that as a library all my problems went away :)</p>\n"},{"tags":[],"owner":{"account_id":2197855,"reputation":889,"user_id":1943085,"accept_rate":100,"display_name":"Lenymm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682709768,"creation_date":1682709768,"answer_id":76132683,"question_id":32543510,"body_markdown":"There&#39;s an updated quickstart guide for this:\r\n\r\nhttps://developers.google.com/sheets/api/quickstart/java\r\n\r\nThe tldr; version is:\r\n 1. set up the desktop app in Google Cloud console (set up the app, authorize credentials, create new credentials.json)\r\n 2. set up the project, hook up the credentials.json (working code example in the link)\r\n 3. run the project and you should already be able to at least read from a specific spreadsheet/sheet\r\n\r\nThe quickstart guide helped me get started, but there was a lot to learn when I wanted to wipe sheets, add values, add conditional formatting or alternating row colors and such. You can follow the next steps in the guide to see the rest of what the API can do. It was a great fun to mess with it as the results can be seen immediatelly &#39;cause the sheets update automatically.\r\n\r\nWhen it comes to dependencies, the current set of dependencies you need is:\r\n\r\nGradle:\r\n\r\n    implementation &#39;com.google.api-client:google-api-client:2.0.0&#39;\r\n    implementation &#39;com.google.oauth-client:google-oauth-client-jetty:1.34.1&#39;\r\n    implementation &#39;com.google.apis:google-api-services-sheets:v4-rev20220927-2.0.0&#39;\r\n\r\nMaven:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\r\n            &lt;version&gt;1.34.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-services-sheets&lt;/artifactId&gt;\r\n            &lt;version&gt;v4-rev20220927-2.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n","title":"Java Google Sheets API OAuth 2.0","body":"<p>There's an updated quickstart guide for this:</p>\n<p><a href=\"https://developers.google.com/sheets/api/quickstart/java\" rel=\"nofollow noreferrer\">https://developers.google.com/sheets/api/quickstart/java</a></p>\n<p>The tldr; version is:</p>\n<ol>\n<li>set up the desktop app in Google Cloud console (set up the app, authorize credentials, create new credentials.json)</li>\n<li>set up the project, hook up the credentials.json (working code example in the link)</li>\n<li>run the project and you should already be able to at least read from a specific spreadsheet/sheet</li>\n</ol>\n<p>The quickstart guide helped me get started, but there was a lot to learn when I wanted to wipe sheets, add values, add conditional formatting or alternating row colors and such. You can follow the next steps in the guide to see the rest of what the API can do. It was a great fun to mess with it as the results can be seen immediatelly 'cause the sheets update automatically.</p>\n<p>When it comes to dependencies, the current set of dependencies you need is:</p>\n<p>Gradle:</p>\n<pre><code>implementation 'com.google.api-client:google-api-client:2.0.0'\nimplementation 'com.google.oauth-client:google-oauth-client-jetty:1.34.1'\nimplementation 'com.google.apis:google-api-services-sheets:v4-rev20220927-2.0.0'\n</code></pre>\n<p>Maven:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n        &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\n        &lt;version&gt;2.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\n        &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\n        &lt;version&gt;1.34.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n        &lt;artifactId&gt;google-api-services-sheets&lt;/artifactId&gt;\n        &lt;version&gt;v4-rev20220927-2.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":6165775,"reputation":1029,"user_id":4805765,"accept_rate":51,"display_name":"Scooter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682709768,"creation_date":1442090572,"question_id":32543510,"body_markdown":"I&#39;m having problems setting up my program to make calls to the Google Sheets API. Currently, I&#39;m authorizing my credential this way:\r\n\r\n    public static Credential authorize() throws IOException, GeneralSecurityException {\r\n        InputStream p12 = GoogleUtils.class.getResourceAsStream(&quot;/key.p12&quot;);\r\n\r\n\t\tFile file = new File(&quot;hi&quot;);\r\n\t\tOutputStream outputStream = new FileOutputStream(file);\r\n\t\tIOUtils.copy(p12, outputStream);\r\n\t\toutputStream.close();\r\n\r\n        // Build flow and trigger user authorization request.\r\n       GoogleCredential credential = new GoogleCredential.Builder()\r\n       \t\t.setTransport(HTTP_TRANSPORT)\r\n       \t\t.setJsonFactory(JSON_FACTORY)\r\n       \t\t.setServiceAccountId(&quot;8429209348-1nfuorcfko5pmqh2l0b1au968igchaoq@developer.gserviceaccount.com&quot;)\r\n       \t\t.setServiceAccountScopes(SCOPES)\r\n       \t\t.setServiceAccountPrivateKeyFromP12File(file)\r\n       \t\t.build();\r\n        return credential;\r\n    }\r\n\r\nBut, I don&#39;t know what to do with this credential now that I have it. In another class, I&#39;m opening up a `SpreadsheetService`, but I can&#39;t find the method to actually authorize with the `Credential` object. I remember doing this in one of my older projects:\r\n\r\n    public GoogleDrive() {\r\n\t\t/** Our view of Google Spreadsheets as an authenticated Google user. */\r\n\t\ttry {\r\n\t\t\tInputStream p12 = BotPanel.class.getResourceAsStream(&quot;/key.p12&quot;);\r\n\r\n\t\t\tFile file = new File(&quot;hi&quot;);\r\n\t\t\tOutputStream outputStream = new FileOutputStream(file);\r\n\t\t\tIOUtils.copy(p12, outputStream);\r\n\t\t\toutputStream.close();\r\n\r\n\t\t\tString emailAddress = &quot;81607255786-225dt8i2s8q6qgi0lgg814p27mumqro2@developer.gserviceaccount.com&quot;;\r\n\t\t\tHttpTransport httpTransport = new NetHttpTransport();\r\n\t\t\tJacksonFactory jsonFactory = new JacksonFactory();\r\n\t\t\tString[] SCOPESArray = { &quot;https://spreadsheets.google.com/feeds&quot;, &quot;https://spreadsheets.google.com/feeds/spreadsheets/private/full&quot;, &quot;https://docs.google.com/feeds&quot; };\r\n\t\t\tfinal List&lt;String&gt; SCOPES = Arrays.asList(SCOPESArray);\r\n\t\t\tGoogleCredential credential = new GoogleCredential.Builder()\r\n\t\t\t\t\t\t.setTransport(httpTransport).setJsonFactory(jsonFactory)\r\n\t\t\t\t\t\t.setServiceAccountId(emailAddress).setServiceAccountScopes(SCOPES)\r\n\t\t\t\t\t\t.setServiceAccountPrivateKeyFromP12File(file)\r\n\t\t\t\t\t\t.build();\r\n\r\n\t\t\tfile.delete();\r\n\t\t\tservice = new SpreadsheetService(&quot;Test&quot;);\r\n\t\t\tservice.setOAuth2Credentials(credential);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nAs you can see I get the `Credential` the same way, and at the end I&#39;m able to just call `service.setOAuth2Credentials(credential);`But in my newer project, this is what I&#39;m getting:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/tijSk.png\r\n\r\nAs you can see there isn&#39;t a method called `.setOAuth2Credential(...)` anymore.\r\n\r\nDigging into the src code, I found the method in the `GoogleService` class, only it had the annotation @Beta.\r\n\r\n  \r\n\r\n    @Beta\r\n      public void setOAuth2Credentials(Credential credential) {\r\n        GoogleAuthTokenFactory googleAuthTokenFactory = getGoogleAuthTokenFactory();\r\n        googleAuthTokenFactory.setOAuth2Credentials(credential);\r\n        requestFactory.setAuthToken(authTokenFactory.getAuthToken());\r\n      }\r\n\r\nIs there a reason why this code is annotated with @Beta? Is there some other way I&#39;m supposed to authorize calls to the sheets api? Or is there some way to still authorize with this method? (that would be ideal).","title":"Java Google Sheets API OAuth 2.0","body":"<p>I'm having problems setting up my program to make calls to the Google Sheets API. Currently, I'm authorizing my credential this way:</p>\n\n<pre><code>public static Credential authorize() throws IOException, GeneralSecurityException {\n    InputStream p12 = GoogleUtils.class.getResourceAsStream(\"/key.p12\");\n\n    File file = new File(\"hi\");\n    OutputStream outputStream = new FileOutputStream(file);\n    IOUtils.copy(p12, outputStream);\n    outputStream.close();\n\n    // Build flow and trigger user authorization request.\n   GoogleCredential credential = new GoogleCredential.Builder()\n        .setTransport(HTTP_TRANSPORT)\n        .setJsonFactory(JSON_FACTORY)\n        .setServiceAccountId(\"8429209348-1nfuorcfko5pmqh2l0b1au968igchaoq@developer.gserviceaccount.com\")\n        .setServiceAccountScopes(SCOPES)\n        .setServiceAccountPrivateKeyFromP12File(file)\n        .build();\n    return credential;\n}\n</code></pre>\n\n<p>But, I don't know what to do with this credential now that I have it. In another class, I'm opening up a <code>SpreadsheetService</code>, but I can't find the method to actually authorize with the <code>Credential</code> object. I remember doing this in one of my older projects:</p>\n\n<pre><code>public GoogleDrive() {\n    /** Our view of Google Spreadsheets as an authenticated Google user. */\n    try {\n        InputStream p12 = BotPanel.class.getResourceAsStream(\"/key.p12\");\n\n        File file = new File(\"hi\");\n        OutputStream outputStream = new FileOutputStream(file);\n        IOUtils.copy(p12, outputStream);\n        outputStream.close();\n\n        String emailAddress = \"81607255786-225dt8i2s8q6qgi0lgg814p27mumqro2@developer.gserviceaccount.com\";\n        HttpTransport httpTransport = new NetHttpTransport();\n        JacksonFactory jsonFactory = new JacksonFactory();\n        String[] SCOPESArray = { \"https://spreadsheets.google.com/feeds\", \"https://spreadsheets.google.com/feeds/spreadsheets/private/full\", \"https://docs.google.com/feeds\" };\n        final List&lt;String&gt; SCOPES = Arrays.asList(SCOPESArray);\n        GoogleCredential credential = new GoogleCredential.Builder()\n                    .setTransport(httpTransport).setJsonFactory(jsonFactory)\n                    .setServiceAccountId(emailAddress).setServiceAccountScopes(SCOPES)\n                    .setServiceAccountPrivateKeyFromP12File(file)\n                    .build();\n\n        file.delete();\n        service = new SpreadsheetService(\"Test\");\n        service.setOAuth2Credentials(credential);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>As you can see I get the <code>Credential</code> the same way, and at the end I'm able to just call <code>service.setOAuth2Credentials(credential);</code>But in my newer project, this is what I'm getting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tijSk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tijSk.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see there isn't a method called <code>.setOAuth2Credential(...)</code> anymore.</p>\n\n<p>Digging into the src code, I found the method in the <code>GoogleService</code> class, only it had the annotation @Beta.</p>\n\n<pre><code>@Beta\n  public void setOAuth2Credentials(Credential credential) {\n    GoogleAuthTokenFactory googleAuthTokenFactory = getGoogleAuthTokenFactory();\n    googleAuthTokenFactory.setOAuth2Credentials(credential);\n    requestFactory.setAuthToken(authTokenFactory.getAuthToken());\n  }\n</code></pre>\n\n<p>Is there a reason why this code is annotated with @Beta? Is there some other way I'm supposed to authorize calls to the sheets api? Or is there some way to still authorize with this method? (that would be ideal).</p>\n"},{"tags":["java","selenium-webdriver","intellij-idea"],"comments":[{"owner":{"account_id":22214143,"reputation":3393,"user_id":16452840,"display_name":"pmadhu"},"score":0,"creation_date":1682681453,"post_id":76128804,"comment_id":134257651,"body_markdown":"For an `Expected Condition - visibility_of` you are passing an `Element` not a `Locator`. So it has to first find the `Element ` to use it for `visibility_of` condition. Its not waiting 15s for finding that `Element`.","body":"For an <code>Expected Condition - visibility_of</code> you are passing an <code>Element</code> not a <code>Locator</code>. So it has to first find the <code>Element </code> to use it for <code>visibility_of</code> condition. Its not waiting 15s for finding that <code>Element</code>."},{"owner":{"account_id":1416016,"reputation":158,"user_id":7101236,"display_name":"kakemonsteret"},"score":0,"creation_date":1682681933,"post_id":76128804,"comment_id":134257754,"body_markdown":"Hm. So that will only work if we are checking to see if an existing element is visible or not then?","body":"Hm. So that will only work if we are checking to see if an existing element is visible or not then?"},{"owner":{"account_id":22214143,"reputation":3393,"user_id":16452840,"display_name":"pmadhu"},"score":0,"creation_date":1682682306,"post_id":76128804,"comment_id":134257845,"body_markdown":"If you are waiting for that element to appear and send text to it and it is also an `input` field, it should be obviously be clickable. Try using `element_to_be_clickable` instead of `visibility_of`.","body":"If you are waiting for that element to appear and send text to it and it is also an <code>input</code> field, it should be obviously be clickable. Try using <code>element_to_be_clickable</code> instead of <code>visibility_of</code>."}],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682709299,"creation_date":1682709299,"answer_id":76132627,"question_id":76128804,"body_markdown":"Exception is being thrown in `driver.findElement` code , you are  doing `driver.findElement(By.id(&quot;given_name&quot;)` which will throw exception first and you WebDriver wait is not evaluating at all\r\n\r\n    Browser.Wait(15).until(ExpectedConditions.visibilityOf(**driver.findElement(By.id(&quot;given_name&quot;)**))).sendKeys(selectAll + fornavnOgEtternavn.getFornavn());\r\n\r\nuse below instead where we are passing By locator Object \r\n\r\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;given_name&quot;)))\r\n    \t\t\t.sendKeys(selectAll + fornavnOgEtternavn.getFornavn());","title":"Selenium: Wait and visibilityOf element not working","body":"<p>Exception is being thrown in <code>driver.findElement</code> code , you are  doing <code>driver.findElement(By.id(&quot;given_name&quot;)</code> which will throw exception first and you WebDriver wait is not evaluating at all</p>\n<pre><code>Browser.Wait(15).until(ExpectedConditions.visibilityOf(**driver.findElement(By.id(&quot;given_name&quot;)**))).sendKeys(selectAll + fornavnOgEtternavn.getFornavn());\n</code></pre>\n<p>use below instead where we are passing By locator Object</p>\n<pre><code>wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;given_name&quot;)))\n            .sendKeys(selectAll + fornavnOgEtternavn.getFornavn());\n</code></pre>\n"}],"owner":{"account_id":1416016,"reputation":158,"user_id":7101236,"display_name":"kakemonsteret"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682709299,"creation_date":1682678750,"question_id":76128804,"body_markdown":"I&#39;ve got this pretty simple piece of code:\r\n\r\n    Browser.Wait(15).until(ExpectedConditions.visibilityOf(driver.findElement(By.id(&quot;given_name&quot;)))).sendKeys(selectAll + fornavnOgEtternavn.getFornavn());\r\n\r\nTesting this markup:\r\n\r\n    &lt;&lt;form id=&quot;egendefinert&quot; action=&quot;...method=&quot;post&quot;&gt;\r\n    &lt;h2&gt;Egendefinert bruker&lt;/h2&gt;\r\n        &lt;input type=&quot;hidden&quot; name=&quot;custom&quot; value=&quot;true&quot;&gt;\r\n            &lt;div class=&quot;inputfelt avansertModus&quot; style=&quot;display: none;&quot;&gt;\r\n                &lt;div class=&quot;label-wrapper&quot;&gt;\r\n                    &lt;label for=&quot;preferred_username&quot;&gt;\r\n                        &lt;span&gt;Brukernavn&lt;/span&gt;\r\n                        &lt;span class=&quot;label-description&quot;&gt;(preferred_username)&lt;/span&gt;\r\n                    &lt;/label&gt;\r\n                 &lt;/div&gt;\r\n                 &lt;input name=&quot;preferred_username&quot; id=&quot;preferred_username&quot;&gt;\r\n                &lt;/div&gt;\r\n                &lt;div class=&quot;inputfelt &quot;&gt;\r\n                    &lt;div class=&quot;label-wrapper&quot;&gt;\r\n                        &lt;label for=&quot;given_name&quot;&gt;\r\n                            &lt;span&gt;Fornavn&lt;/span&gt;\r\n                            &lt;span class=&quot;label-description&quot;&gt;(given_name)&lt;/span&gt;\r\n                         &lt;/label&gt;\r\n                     &lt;/div&gt;\r\n                     &lt;input name=&quot;given_name&quot; id=&quot;given_name&quot;&gt;\r\n                    &lt;/div&gt;\r\n    ...\r\n\r\nThis is supposed to wait for up to 15 seconds for an input field to be visible, and then use sendKeys() on it to enter text.\r\n\r\nHowever, when I run the test, it IMMEDIATELY fails with this error:\r\n\r\n    org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;#given_name&quot;}   \r\n\r\nIt doesn&#39;t wait for even a second - just concludes with the element not existing immediately.\r\n\r\nHowever, if I put break points in the code and step through each line accessing this and following input fields, it works fine.\r\n\r\nSo, why does Selenium rush ahead and claim that the elements are doesn&#39;t exist, instead of wait for the visibility as specified?","title":"Selenium: Wait and visibilityOf element not working","body":"<p>I've got this pretty simple piece of code:</p>\n<pre><code>Browser.Wait(15).until(ExpectedConditions.visibilityOf(driver.findElement(By.id(&quot;given_name&quot;)))).sendKeys(selectAll + fornavnOgEtternavn.getFornavn());\n</code></pre>\n<p>Testing this markup:</p>\n<pre><code>&lt;&lt;form id=&quot;egendefinert&quot; action=&quot;...method=&quot;post&quot;&gt;\n&lt;h2&gt;Egendefinert bruker&lt;/h2&gt;\n    &lt;input type=&quot;hidden&quot; name=&quot;custom&quot; value=&quot;true&quot;&gt;\n        &lt;div class=&quot;inputfelt avansertModus&quot; style=&quot;display: none;&quot;&gt;\n            &lt;div class=&quot;label-wrapper&quot;&gt;\n                &lt;label for=&quot;preferred_username&quot;&gt;\n                    &lt;span&gt;Brukernavn&lt;/span&gt;\n                    &lt;span class=&quot;label-description&quot;&gt;(preferred_username)&lt;/span&gt;\n                &lt;/label&gt;\n             &lt;/div&gt;\n             &lt;input name=&quot;preferred_username&quot; id=&quot;preferred_username&quot;&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;inputfelt &quot;&gt;\n                &lt;div class=&quot;label-wrapper&quot;&gt;\n                    &lt;label for=&quot;given_name&quot;&gt;\n                        &lt;span&gt;Fornavn&lt;/span&gt;\n                        &lt;span class=&quot;label-description&quot;&gt;(given_name)&lt;/span&gt;\n                     &lt;/label&gt;\n                 &lt;/div&gt;\n                 &lt;input name=&quot;given_name&quot; id=&quot;given_name&quot;&gt;\n                &lt;/div&gt;\n...\n</code></pre>\n<p>This is supposed to wait for up to 15 seconds for an input field to be visible, and then use sendKeys() on it to enter text.</p>\n<p>However, when I run the test, it IMMEDIATELY fails with this error:</p>\n<pre><code>org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;#given_name&quot;}   \n</code></pre>\n<p>It doesn't wait for even a second - just concludes with the element not existing immediately.</p>\n<p>However, if I put break points in the code and step through each line accessing this and following input fields, it works fine.</p>\n<p>So, why does Selenium rush ahead and claim that the elements are doesn't exist, instead of wait for the visibility as specified?</p>\n"},{"tags":["java","maven","jsf","tomcat7","netbeans-12"],"comments":[{"owner":{"account_id":9242367,"reputation":1023,"user_id":6865328,"display_name":"WoAiNii"},"score":0,"creation_date":1682879429,"post_id":76132606,"comment_id":134280871,"body_markdown":"How do you deploy your war?","body":"How do you deploy your war?"},{"owner":{"account_id":24492114,"reputation":1,"user_id":18409043,"display_name":"user18409043"},"score":0,"creation_date":1683027333,"post_id":76132606,"comment_id":134300534,"body_markdown":"didn&#39;t. much, beyond, import the maven project, ande the tomcat 7, i also changed some data in context of the tomcat to use my local server, and of course i configuered the maven  settings on java for use my current version  but just that","body":"didn&#39;t. much, beyond, import the maven project, ande the tomcat 7, i also changed some data in context of the tomcat to use my local server, and of course i configuered the maven  settings on java for use my current version  but just that"},{"owner":{"account_id":9242367,"reputation":1023,"user_id":6865328,"display_name":"WoAiNii"},"score":0,"creation_date":1683032462,"post_id":76132606,"comment_id":134301732,"body_markdown":"In eclipse you have to add the war to your server, so I suppose NetBeans could have a similar behavior.","body":"In eclipse you have to add the war to your server, so I suppose NetBeans could have a similar behavior."}],"owner":{"account_id":24492114,"reputation":1,"user_id":18409043,"display_name":"user18409043"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682709031,"creation_date":1682709031,"question_id":76132606,"body_markdown":"I tring to deploy a application on my localhost, and even though i can find any significative error message, and also seems like is evrithing is alright with the Deployment when try in my Localhost, the page does not appear\r\n\r\ni seted up the maven and the tomcat on 8084 port as its seted on my tomcat propeties, still i cant get it worked\r\n\r\nhere are the project running in tomcat Log;\r\n\r\nScanning for projects...\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\n-` br.com.agapesistemas:AgPortalNew &gt;------------------\r\n- Building AgPortalNew 11.23\r\n- war ]---------------------------------\r\n- The POM for com.lowagie:itext:jar:2.1.7.js2 is missing, no dependency information available\r\n- The POM for org.olap4j:olap4j:jar:0.9.7.309-JS-3 is missing, no dependency information available\r\n- The POM for org.primefaces.sentinel:primefaces-sentinel:jar:2.1.2 is missing, no dependency information available\r\n- \r\n- maven-clean-plugin:2.5:clean (default-clean) @ AgPortalNew ---\r\n- Deleting C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\r\n- \r\n- maven-dependency-plugin:2.1:copy (default)  AgPortalNew ---\r\n- \r\n- maven-resources-plugin:2.6:resources (default-resources) @ AgPortalNew ---\r\n- Using &#39;ISO-8859-1&#39; encoding to copy filtered resources.\r\nCopying 0 resource\r\n\r\n--- maven-compiler-plugin:2.3.2:compile (default-compile) @ AgPortalNew ---\r\nCompiling 570 source files to C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\\classes\r\n\r\n--- maven-resources-plugin:2.6:testResources (default-testResources) @ AgPortalNew ---\r\nUsing &#39;ISO-8859-1&#39; encoding to copy filtered resources.\r\nskip non existing resourceDirectory C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\src\\test\\resources\r\n\r\n--- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ AgPortalNew ---\r\nNothing to compile - all classes are up to date\r\n\r\n--- maven-surefire-plugin:2.12.4:test (default-test) @ AgPortalNew ---\r\nNo tests to run.\r\n\r\n--- maven-war-plugin:2.1.1:war (default-war) @ AgPortalNew ---\r\nPackaging webapp\r\nAssembling webapp [AgPortalNew] in [C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\\AgPortalNew-11.23]\r\nProcessing war project\r\nCopying webapp resources [C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\src\\main\\webapp]\r\nWebapp assembled in [19123 msecs]\r\nBuilding war: C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\\AgPortalNew-11.23.war\r\nWarning: selected war files include a WEB-INF/web.xml which will be ignored \r\n(webxml attribute is missing from war task, or ignoreWebxml attribute is specified as &#39;true&#39;)\r\n\r\n--- maven-install-plugin:2.4:install (default-install) @ AgPortalNew ---\r\nInstalling C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\\AgPortalNew-11.23.war to C:\\Users\\Agape\\.m2\\repository\\br\\com\\agapesistemas\\AgPortalNew\\11.23\\AgPortalNew-11.23.war\r\nInstalling C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\pom.xml to C:\\Users\\Agape\\.m2\\repository\\br\\com\\agapesistemas\\AgPortalNew\\11.23\\AgPortalNew-11.23.pom\r\n------------------------------------------------------------------------\r\nBUILD SUCCESS\r\n------------------------------------------------------------------------\r\n&lt;/code&gt;&lt;/pre&gt;`\r\n\r\nTotal time:  01:55 min\r\nFinished at: 2023-04-28T14:35:32-03:00\r\n\\---------------------------------------------\\`\r\n\r\n\r\n\r\ni could not see anything that could be reason behind the issue an also i am not finding any error log either\r\n`\r\nthats the link that i am trying to access\r\n\r\nhttp://localhost:8084/AgPortalNew\r\n[that image shows my Web Applications folder completely empty without my project ](https://i.stack.imgur.com/6jqz0.png)\r\n\r\n","title":"I cant get my project working on Tomcat in netbeans","body":"<p>I tring to deploy a application on my localhost, and even though i can find any significative error message, and also seems like is evrithing is alright with the Deployment when try in my Localhost, the page does not appear</p>\n<p>i seted up the maven and the tomcat on 8084 port as its seted on my tomcat propeties, still i cant get it worked</p>\n<p>here are the project running in tomcat Log;</p>\n<p>Scanning for projects...</p>\n<pre><code>\n\n-` br.com.agapesistemas:AgPortalNew >------------------\n- Building AgPortalNew 11.23\n- war ]---------------------------------\n- The POM for com.lowagie:itext:jar:2.1.7.js2 is missing, no dependency information available\n- The POM for org.olap4j:olap4j:jar:0.9.7.309-JS-3 is missing, no dependency information available\n- The POM for org.primefaces.sentinel:primefaces-sentinel:jar:2.1.2 is missing, no dependency information available\n- \n- maven-clean-plugin:2.5:clean (default-clean) @ AgPortalNew ---\n- Deleting C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\n- \n- maven-dependency-plugin:2.1:copy (default)  AgPortalNew ---\n- \n- maven-resources-plugin:2.6:resources (default-resources) @ AgPortalNew ---\n- Using 'ISO-8859-1' encoding to copy filtered resources.\nCopying 0 resource\n\n--- maven-compiler-plugin:2.3.2:compile (default-compile) @ AgPortalNew ---\nCompiling 570 source files to C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\\classes\n\n--- maven-resources-plugin:2.6:testResources (default-testResources) @ AgPortalNew ---\nUsing 'ISO-8859-1' encoding to copy filtered resources.\nskip non existing resourceDirectory C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\src\\test\\resources\n\n--- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ AgPortalNew ---\nNothing to compile - all classes are up to date\n\n--- maven-surefire-plugin:2.12.4:test (default-test) @ AgPortalNew ---\nNo tests to run.\n\n--- maven-war-plugin:2.1.1:war (default-war) @ AgPortalNew ---\nPackaging webapp\nAssembling webapp [AgPortalNew] in [C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\\AgPortalNew-11.23]\nProcessing war project\nCopying webapp resources [C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\src\\main\\webapp]\nWebapp assembled in [19123 msecs]\nBuilding war: C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\\AgPortalNew-11.23.war\nWarning: selected war files include a WEB-INF/web.xml which will be ignored \n(webxml attribute is missing from war task, or ignoreWebxml attribute is specified as 'true')\n\n--- maven-install-plugin:2.4:install (default-install) @ AgPortalNew ---\nInstalling C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\target\\AgPortalNew-11.23.war to C:\\Users\\Agape\\.m2\\repository\\br\\com\\agapesistemas\\AgPortalNew\\11.23\\AgPortalNew-11.23.war\nInstalling C:\\Agape\\AgSistemas\\branches\\Sprint 6 - Desenv\\AgPortal\\Fontes\\Aplicacao\\Maven\\AgPortalNew\\pom.xml to C:\\Users\\Agape\\.m2\\repository\\br\\com\\agapesistemas\\AgPortalNew\\11.23\\AgPortalNew-11.23.pom\n------------------------------------------------------------------------\nBUILD SUCCESS\n------------------------------------------------------------------------\n</code></pre>`\n<p>Total time:  01:55 min\nFinished at: 2023-04-28T14:35:32-03:00\n---------------------------------------------`</p>\n<p>i could not see anything that could be reason behind the issue an also i am not finding any error log either\n`\nthats the link that i am trying to access</p>\n<p>http://localhost:8084/AgPortalNew\n<a href=\"https://i.stack.imgur.com/6jqz0.png\" rel=\"nofollow noreferrer\">that image shows my Web Applications folder completely empty without my project </a></p>\n"},{"tags":["java","spring","spring-boot","okta"],"answers":[{"tags":[],"owner":{"account_id":1777687,"reputation":169,"user_id":1621147,"display_name":"Arvind Krishnakumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682705968,"creation_date":1682705968,"answer_id":76132275,"question_id":76131704,"body_markdown":"Please use okta-sdk-api version 8.2.3 or lower, the 10.x version of the SDK has breaking changes which are not fully compatible with okta-spring-boot 3.0.3 yet.","title":"Okta Java/Spring API generating ClassNotFoundException","body":"<p>Please use okta-sdk-api version 8.2.3 or lower, the 10.x version of the SDK has breaking changes which are not fully compatible with okta-spring-boot 3.0.3 yet.</p>\n"}],"owner":{"account_id":10970180,"reputation":31,"user_id":8060734,"display_name":"Filipe Dias"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682708506,"creation_date":1682700898,"question_id":76131704,"body_markdown":"I&#39;m trying to connect my local Okta server to a Spring Boot application, but I&#39;m getting &quot;The following method did not exist:\r\n\r\n    &#39;void org.springframework.http.client.HttpComponentsClientHttpRequestFactory.setHttpClient(org.apache.http.client.HttpClient)&#39;\r\n&quot; error \r\n\r\nI&#39;ve tried connect my local Okta server to a Spring Boot application, but a more detailed error is being thrown when trying to add Okta ApiClient to my Spring service: \r\n\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n\r\n    com.okta.sdk.impl.client.DefaultClientBuilder.requestFactory(DefaultClientBuilder.java:471)\r\n\r\nThe following method did not exist:\r\n\r\n    &#39;void org.springframework.http.client.HttpComponentsClientHttpRequestFactory.setHttpClient(org.apache.http.client.HttpClient)&#39;\r\n\r\nThe calling method&#39;s class, com.okta.sdk.impl.client.DefaultClientBuilder, was loaded from the following location:\r\n\r\n    jar:file:/Users/filipe-lima/.m2/repository/com/okta/sdk/okta-sdk-impl/10.3.0/okta-sdk-impl-10.3.0.jar!/com/okta/sdk/impl/client/DefaultClientBuilder.class\r\n\r\nThe called method&#39;s class, org.springframework.http.client.HttpComponentsClientHttpRequestFactory, is available from the following locations:\r\n\r\n    jar:file:/Users/filipe-lima/.m2/repository/org/springframework/spring-web/6.0.8/spring-web-6.0.8.jar!/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.class\r\n\r\nThe called method&#39;s class hierarchy was loaded from the following locations:\r\n\r\n    org.springframework.http.client.HttpComponentsClientHttpRequestFactory: file:/Users/user/.m2/repository/org/springframework/spring-web/6.0.8/spring-web-6.0.8.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains compatible versions of the classes com.okta.sdk.impl.client.DefaultClientBuilder and org.springframework.http.client.HttpComponentsClientHttpRequestFactory\r\n```\r\n\r\nIn my pom.xml there&#39;s the following configuration:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.6&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.cision&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;okta-spring-integration&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;okta-spring-integration&lt;/name&gt;\r\n\t&lt;description&gt;Okta Proof of Concept for Spring App&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.okta.spring&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;okta-spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.okta.sdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;okta-sdk-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;10.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.okta.sdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;okta-sdk-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;10.3.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.okta.spring&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;okta-spring-sdk&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents.client5&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpclient5&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents.core5&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpcore5&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.5.14&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAlready tried to update HttpClient libs on POM, change Okta-SDK versions, and even looked at [Okta SDK Java Github Repository](https://github.com/okta/okta-sdk-java/issues/794), but still got no success.","title":"Okta Java/Spring API generating ClassNotFoundException","body":"<p>I'm trying to connect my local Okta server to a Spring Boot application, but I'm getting &quot;The following method did not exist:</p>\n<pre><code>'void org.springframework.http.client.HttpComponentsClientHttpRequestFactory.setHttpClient(org.apache.http.client.HttpClient)'\n</code></pre>\n<p>&quot; error</p>\n<p>I've tried connect my local Okta server to a Spring Boot application, but a more detailed error is being thrown when trying to add Okta ApiClient to my Spring service:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\n\n    com.okta.sdk.impl.client.DefaultClientBuilder.requestFactory(DefaultClientBuilder.java:471)\n\nThe following method did not exist:\n\n    'void org.springframework.http.client.HttpComponentsClientHttpRequestFactory.setHttpClient(org.apache.http.client.HttpClient)'\n\nThe calling method's class, com.okta.sdk.impl.client.DefaultClientBuilder, was loaded from the following location:\n\n    jar:file:/Users/filipe-lima/.m2/repository/com/okta/sdk/okta-sdk-impl/10.3.0/okta-sdk-impl-10.3.0.jar!/com/okta/sdk/impl/client/DefaultClientBuilder.class\n\nThe called method's class, org.springframework.http.client.HttpComponentsClientHttpRequestFactory, is available from the following locations:\n\n    jar:file:/Users/filipe-lima/.m2/repository/org/springframework/spring-web/6.0.8/spring-web-6.0.8.jar!/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.class\n\nThe called method's class hierarchy was loaded from the following locations:\n\n    org.springframework.http.client.HttpComponentsClientHttpRequestFactory: file:/Users/user/.m2/repository/org/springframework/spring-web/6.0.8/spring-web-6.0.8.jar\n\n\nAction:\n\nCorrect the classpath of your application so that it contains compatible versions of the classes com.okta.sdk.impl.client.DefaultClientBuilder and org.springframework.http.client.HttpComponentsClientHttpRequestFactory\n</code></pre>\n<p>In my pom.xml there's the following configuration:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.cision&lt;/groupId&gt;\n    &lt;artifactId&gt;okta-spring-integration&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;okta-spring-integration&lt;/name&gt;\n    &lt;description&gt;Okta Proof of Concept for Spring App&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.okta.spring&lt;/groupId&gt;\n            &lt;artifactId&gt;okta-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.okta.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;okta-sdk-api&lt;/artifactId&gt;\n            &lt;version&gt;10.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.okta.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;okta-sdk-impl&lt;/artifactId&gt;\n            &lt;version&gt;10.3.0&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.okta.spring&lt;/groupId&gt;\n            &lt;artifactId&gt;okta-spring-sdk&lt;/artifactId&gt;\n            &lt;version&gt;3.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents.client5&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient5&lt;/artifactId&gt;\n            &lt;version&gt;5.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents.core5&lt;/groupId&gt;\n            &lt;artifactId&gt;httpcore5&lt;/artifactId&gt;\n            &lt;version&gt;5.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n            &lt;version&gt;4.5.14&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Already tried to update HttpClient libs on POM, change Okta-SDK versions, and even looked at <a href=\"https://github.com/okta/okta-sdk-java/issues/794\" rel=\"nofollow noreferrer\">Okta SDK Java Github Repository</a>, but still got no success.</p>\n"},{"tags":["java","twilio","totp","authy"],"comments":[{"owner":{"account_id":4177313,"reputation":282,"user_id":3423442,"accept_rate":75,"display_name":"Michal Hene"},"score":0,"creation_date":1682594349,"post_id":75995658,"comment_id":134242155,"body_markdown":"I have exactly the same issue. No matter how fast I am, its always unverified... Tried to downgrade twilio-java library but to no avail... Getting a little bit frustrated at this point, answer would be nice","body":"I have exactly the same issue. No matter how fast I am, its always unverified... Tried to downgrade twilio-java library but to no avail... Getting a little bit frustrated at this point, answer would be nice"}],"answers":[{"tags":[],"owner":{"account_id":4177313,"reputation":282,"user_id":3423442,"accept_rate":75,"display_name":"Michal Hene"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682687022,"creation_date":1682687022,"answer_id":76129863,"question_id":75995658,"body_markdown":"So I had the same exact issue and I was in contact with the devs.\r\nYou need to keep the default values in the Twilio console in the Verify Service settings of the TOTP. The defaults seems to be:\r\n\r\nCode length = 6&lt;br/&gt;\r\nTime step = 30&lt;br/&gt;\r\nSkew = 1\r\n\r\nI have changed these values in my case, and everything started working again.\r\nAlso keep in mind, some authentication apps like google have in the settings possibility to &quot;Sync&quot; time and that was really needed in my case in order to have working solution.\r\n\r\nHope it will work for you aswell.","title":"Cannot validate Authy TOTP via Java API","body":"<p>So I had the same exact issue and I was in contact with the devs.\nYou need to keep the default values in the Twilio console in the Verify Service settings of the TOTP. The defaults seems to be:</p>\n<p>Code length = 6<br/>\nTime step = 30<br/>\nSkew = 1</p>\n<p>I have changed these values in my case, and everything started working again.\nAlso keep in mind, some authentication apps like google have in the settings possibility to &quot;Sync&quot; time and that was really needed in my case in order to have working solution.</p>\n<p>Hope it will work for you aswell.</p>\n"},{"tags":[],"owner":{"account_id":2197855,"reputation":889,"user_id":1943085,"accept_rate":100,"display_name":"Lenymm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682707732,"creation_date":1682707732,"answer_id":76132459,"question_id":75995658,"body_markdown":"One way to debug this is to check the creation date when working with the API and compare that to your local time. If there&#39;s a difference between the client and server time, you&#39;re most likely only going to produce unverified results (kind of like an immediate timeout). Change your phone&#39;s time to the server time and test it again. If it works, you&#39;ve found your issue. \r\n\r\nThe core of the problem still most likely lies in the default values messing with the API like @MichalHene mentioned, but I wanted to provide another way of debugging this.\r\n\r\nIt might look like you can change the timezone in your user settings, but that&#39;s only for the console and it won&#39;t affect your API responses as all dates are given in [RFC 2822][1] format.\r\n\r\n\r\n  [1]: http://www.ietf.org/rfc/rfc2822.txt","title":"Cannot validate Authy TOTP via Java API","body":"<p>One way to debug this is to check the creation date when working with the API and compare that to your local time. If there's a difference between the client and server time, you're most likely only going to produce unverified results (kind of like an immediate timeout). Change your phone's time to the server time and test it again. If it works, you've found your issue.</p>\n<p>The core of the problem still most likely lies in the default values messing with the API like @MichalHene mentioned, but I wanted to provide another way of debugging this.</p>\n<p>It might look like you can change the timezone in your user settings, but that's only for the console and it won't affect your API responses as all dates are given in <a href=\"http://www.ietf.org/rfc/rfc2822.txt\" rel=\"nofollow noreferrer\">RFC 2822</a> format.</p>\n"}],"owner":{"account_id":8114023,"reputation":1631,"user_id":6113110,"accept_rate":62,"display_name":"Robert"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682707732,"creation_date":1681303842,"question_id":75995658,"body_markdown":"I would like to authenticate my users with the Authy Mobile App and TOTP.\r\n\r\nI created these two test cases, besed on this guide https://www.twilio.com/docs/verify/quickstarts/totp#verify-a-user\r\n\r\nI can create a `Factor`. But no matter what I do, I cannot *verify* that factor.\r\n\r\n### Step 1: Create a new factor for a new user\r\n\r\n````\r\n    @Test\r\n\tpublic void testCreateTotpFactor() {\r\n\t\tlog.info(&quot;Twilio ACCOUNT_SID=&quot; + ACCOUNT_SID);\r\n\t\tlong now = new Date().getTime();\r\n\t\tString userUUID = UUID.randomUUID().toString();\r\n\t\tString username = &quot;TwilioUser&quot; + now;\r\n\r\n\t\tTwilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n\r\n\t\t// 1. Create a new TOTP Factor  https://www.twilio.com/docs/verify/quickstarts/totp#create-a-new-totp-factor\r\n\t\tNewFactor newFactor = NewFactor.creator(\r\n\t\t\t\t\t\tSERVICE_SID,\r\n\t\t\t\t\t\tuserUUID,\r\n\t\t\t\t\t\tusername,\r\n\t\t\t\t\t\tNewFactor.FactorTypes.TOTP)\r\n\t\t\t\t.setConfigAppId(&quot;org.liquido&quot;)\r\n\t\t\t\t//.setConfigCodeLength(6)\r\n\t\t\t\t//.setConfigSkew(1)\r\n\t\t\t\t//.setConfigTimeStep(60)\r\n\t\t\t\t.create();\r\n\r\n\t\tSystem.out.println(&quot;========================&quot;);\r\n\t\tSystem.out.println(newFactor);\r\n\t\tSystem.out.println(&quot;========================&quot;);\r\n\t\tSystem.out.println(&quot;TOTP URL           &quot; + newFactor.getBinding().get(&quot;uri&quot;));\r\n\t\tSystem.out.println(&quot;Twilio Username:   &quot; + username);\r\n\t\tSystem.out.println(&quot;Twilio userUUID:   &quot; + userUUID);\r\n\t\tSystem.out.println(&quot;Twilio Factor_SID: &quot; + newFactor.getSid());\r\n\t\tSystem.out.println(&quot;========================&quot;);\r\n\t}\r\n````\r\n\r\n### Step 2 - Create QR code from TOTP URL\r\n\r\nThis step work, I can scan the QR code in the authy app. But for example the ConfigTimeStep is not adapted if I set it to 60 by uncommenting the line above. It is always 30. &lt;= I am not absolutely sure if this step works correctly.   What can I check/test/debug??\r\n\r\n### Step 3 - Validate this Factor by entering the first TOTP\r\n\r\nOf course the data in this test case needs to be manually adapted from the returned values from above. And the authToken must be entered from the authy app\r\n\r\n````\r\n    @Test  // &lt;==== This CANNOT be tested automatically. (That&#39;s the whole reason for 2FA in the first place! :-) I adapt the values and run this manually.\r\n\tpublic void testVerifyTotpFactor() {\r\n\t\t// Manually set these parameters as returned by the previous test:  testCreateTotpFactor()\r\n\t\tString userUUID    = &quot;&lt;userUUID from above&gt;&quot;;\r\n\t\tString FACTOR_SID  = &quot;&lt;factorSID from above&gt;&quot;;\r\n\t\tString authToken   = &quot;123456&quot;;    // &lt;==== the current token as shown in the Authy App\r\n\r\n\t\tTwilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n\r\n\t\tSystem.out.println(&quot;===========================&quot;);\r\n\t\tSystem.out.println(&quot;Available TOTP Factors (FACTOR_SID) for Twilio authentication:&quot;);\r\n\t\t// List available factors\r\n\t\tResourceSet&lt;Factor&gt; factors = Factor.reader(\r\n\t\t\t\t\tSERVICE_SID,\r\n\t\t\t\t\tuserUUID)\r\n\t\t\t//.limit(20)\r\n\t\t  .read();\r\n\t\tfor(Factor record : factors) {\r\n\t\t\tSystem.out.println(record);    // &lt;== this works. I see my one factor\r\n\t\t}\r\n\t\tSystem.out.println(&quot;===========================&quot;);\r\n\r\n\t\t// Update a factor\r\n\t\tFactor factor = Factor.updater(\r\n\t\t\t\t\t\tSERVICE_SID,\r\n\t\t\t\t\t\tuserUUID,\r\n\t\t\t\t\t\tFACTOR_SID)\r\n\t\t\t\t.setAuthPayload(authToken).update();\r\n\t\tSystem.out.println(factor);\r\n\r\n\t\tassertEquals(Factor.FactorStatuses.VERIFIED, factor.getStatus(), &quot;Factor should  now be verified&quot;);   // &lt;============ THIS ALWAYS FAILS!!!\r\n\r\n\t\tlog.info(&quot;Successfully verified TOTP factor&quot;);\r\n\t}\r\n````\r\n\r\nThe factor is always returned as &quot;unverified&quot;.  What am I missing? Are my parameters for all methods correct?","title":"Cannot validate Authy TOTP via Java API","body":"<p>I would like to authenticate my users with the Authy Mobile App and TOTP.</p>\n<p>I created these two test cases, besed on this guide <a href=\"https://www.twilio.com/docs/verify/quickstarts/totp#verify-a-user\" rel=\"nofollow noreferrer\">https://www.twilio.com/docs/verify/quickstarts/totp#verify-a-user</a></p>\n<p>I can create a <code>Factor</code>. But no matter what I do, I cannot <em>verify</em> that factor.</p>\n<h3>Step 1: Create a new factor for a new user</h3>\n<pre><code>    @Test\n    public void testCreateTotpFactor() {\n        log.info(&quot;Twilio ACCOUNT_SID=&quot; + ACCOUNT_SID);\n        long now = new Date().getTime();\n        String userUUID = UUID.randomUUID().toString();\n        String username = &quot;TwilioUser&quot; + now;\n\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n\n        // 1. Create a new TOTP Factor  https://www.twilio.com/docs/verify/quickstarts/totp#create-a-new-totp-factor\n        NewFactor newFactor = NewFactor.creator(\n                        SERVICE_SID,\n                        userUUID,\n                        username,\n                        NewFactor.FactorTypes.TOTP)\n                .setConfigAppId(&quot;org.liquido&quot;)\n                //.setConfigCodeLength(6)\n                //.setConfigSkew(1)\n                //.setConfigTimeStep(60)\n                .create();\n\n        System.out.println(&quot;========================&quot;);\n        System.out.println(newFactor);\n        System.out.println(&quot;========================&quot;);\n        System.out.println(&quot;TOTP URL           &quot; + newFactor.getBinding().get(&quot;uri&quot;));\n        System.out.println(&quot;Twilio Username:   &quot; + username);\n        System.out.println(&quot;Twilio userUUID:   &quot; + userUUID);\n        System.out.println(&quot;Twilio Factor_SID: &quot; + newFactor.getSid());\n        System.out.println(&quot;========================&quot;);\n    }\n</code></pre>\n<h3>Step 2 - Create QR code from TOTP URL</h3>\n<p>This step work, I can scan the QR code in the authy app. But for example the ConfigTimeStep is not adapted if I set it to 60 by uncommenting the line above. It is always 30. &lt;= I am not absolutely sure if this step works correctly.   What can I check/test/debug??</p>\n<h3>Step 3 - Validate this Factor by entering the first TOTP</h3>\n<p>Of course the data in this test case needs to be manually adapted from the returned values from above. And the authToken must be entered from the authy app</p>\n<pre><code>    @Test  // &lt;==== This CANNOT be tested automatically. (That's the whole reason for 2FA in the first place! :-) I adapt the values and run this manually.\n    public void testVerifyTotpFactor() {\n        // Manually set these parameters as returned by the previous test:  testCreateTotpFactor()\n        String userUUID    = &quot;&lt;userUUID from above&gt;&quot;;\n        String FACTOR_SID  = &quot;&lt;factorSID from above&gt;&quot;;\n        String authToken   = &quot;123456&quot;;    // &lt;==== the current token as shown in the Authy App\n\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n\n        System.out.println(&quot;===========================&quot;);\n        System.out.println(&quot;Available TOTP Factors (FACTOR_SID) for Twilio authentication:&quot;);\n        // List available factors\n        ResourceSet&lt;Factor&gt; factors = Factor.reader(\n                    SERVICE_SID,\n                    userUUID)\n            //.limit(20)\n          .read();\n        for(Factor record : factors) {\n            System.out.println(record);    // &lt;== this works. I see my one factor\n        }\n        System.out.println(&quot;===========================&quot;);\n\n        // Update a factor\n        Factor factor = Factor.updater(\n                        SERVICE_SID,\n                        userUUID,\n                        FACTOR_SID)\n                .setAuthPayload(authToken).update();\n        System.out.println(factor);\n\n        assertEquals(Factor.FactorStatuses.VERIFIED, factor.getStatus(), &quot;Factor should  now be verified&quot;);   // &lt;============ THIS ALWAYS FAILS!!!\n\n        log.info(&quot;Successfully verified TOTP factor&quot;);\n    }\n</code></pre>\n<p>The factor is always returned as &quot;unverified&quot;.  What am I missing? Are my parameters for all methods correct?</p>\n"},{"tags":["java","artificial-intelligence","neural-network"],"comments":[{"owner":{"account_id":19055,"reputation":77531,"user_id":44309,"display_name":"High Performance Mark"},"score":1,"creation_date":1270829166,"post_id":2608944,"comment_id":2619322,"body_markdown":"Some topics are taught at advanced levels because they require a grasp of more basic topics before one can approach them properly.  I suspect that ANN should only be attacked by someone who does grasp summation and vectors.  So I&#39;ll be intrigued by any answers you get.","body":"Some topics are taught at advanced levels because they require a grasp of more basic topics before one can approach them properly.  I suspect that ANN should only be attacked by someone who does grasp summation and vectors.  So I&#39;ll be intrigued by any answers you get."},{"owner":{"account_id":18923,"reputation":6184,"user_id":43851,"accept_rate":64,"display_name":"Carlos Rendon"},"score":1,"creation_date":1270829373,"post_id":2608944,"comment_id":2619354,"body_markdown":"Maybe it would be helpful to look for tutorials on solving the problem that you want to solve instead of focusing specifically on neural networks.  I find that concrete examples can really make a solution strategy more clear.","body":"Maybe it would be helpful to look for tutorials on solving the problem that you want to solve instead of focusing specifically on neural networks.  I find that concrete examples can really make a solution strategy more clear."},{"owner":{"display_name":"user263078"},"score":0,"creation_date":1270830941,"post_id":2608944,"comment_id":2619572,"body_markdown":"Okay, thanks.  FrustratedWithFormsDesigner&#39;s answer helped me with a lot of things, so I&#39;ll probably give him a check soon.","body":"Okay, thanks.  FrustratedWithFormsDesigner&#39;s answer helped me with a lot of things, so I&#39;ll probably give him a check soon."},{"owner":{"account_id":14153,"reputation":18311,"user_id":28875,"accept_rate":74,"display_name":"Kylotan"},"score":0,"creation_date":1271685147,"post_id":2608944,"comment_id":2685911,"body_markdown":"@High Performance Mark: I believe addition and multiplication are taught at reasonably young ages these days...\n\nTo put it another way - simple feedforward networks are unbelievably trivial. There&#39;s no reason why there couldn&#39;t be a very simple tutorial for them.","body":"@High Performance Mark: I believe addition and multiplication are taught at reasonably young ages these days...  To put it another way - simple feedforward networks are unbelievably trivial. There&#39;s no reason why there couldn&#39;t be a very simple tutorial for them."}],"answers":[{"tags":[],"owner":{"account_id":65544,"reputation":26923,"user_id":192801,"accept_rate":90,"display_name":"FrustratedWithFormsDesigner"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1270830602,"creation_date":1270829433,"answer_id":2609010,"question_id":2608944,"body_markdown":"Summation is just adding up a bunch of things. So,\r\n\r\n    Summation(1,2,3,4,5) = 1+2+3+4+5 = 15\r\n\r\n(note: it&#39;s *always* adding: if you want to subtract, do a summation with negative numbers)\r\n\r\nThat was easy, right? ;) \r\n\r\nA vector is an ordered tuple, which really just means it&#39;s bunch of numbers in a specific order. Most often seen in physics to describe position, force, velocity, etc... it&#39;s really nothing special, just some ordered numbers, where the ordering is significant:\r\n\r\n    v = &lt;1,2,3&gt;\r\nIf we are talking about geometry, then this vector represents a point in 3-dimensional space where the x coordinate is 1, the y coordinate is 2, and the z coordinate is 3 (See that was easy too, right)?\r\n\r\nIn neural nets, the vector is usually the vector of inputs to a neuron, so it&#39;s really just a list of numeric values. The summation of the vector would be nothing more than adding up all of the values in the vector and getting a single number as a result (which may be referred to as as &quot;scalar&quot; value).\r\n\r\n(this was rushed and simplified - I&#39;m sure someone else will help me refine it ;) )\r\n\r\nPS. Kudos to you for diving into this stuff at the middle school level! :)","title":"Simple explanation on artificial neural networks?","body":"<p>Summation is just adding up a bunch of things. So,</p>\n\n<pre><code>Summation(1,2,3,4,5) = 1+2+3+4+5 = 15\n</code></pre>\n\n<p>(note: it's <em>always</em> adding: if you want to subtract, do a summation with negative numbers)</p>\n\n<p>That was easy, right? ;) </p>\n\n<p>A vector is an ordered tuple, which really just means it's bunch of numbers in a specific order. Most often seen in physics to describe position, force, velocity, etc... it's really nothing special, just some ordered numbers, where the ordering is significant:</p>\n\n<pre><code>v = &lt;1,2,3&gt;\n</code></pre>\n\n<p>If we are talking about geometry, then this vector represents a point in 3-dimensional space where the x coordinate is 1, the y coordinate is 2, and the z coordinate is 3 (See that was easy too, right)?</p>\n\n<p>In neural nets, the vector is usually the vector of inputs to a neuron, so it's really just a list of numeric values. The summation of the vector would be nothing more than adding up all of the values in the vector and getting a single number as a result (which may be referred to as as \"scalar\" value).</p>\n\n<p>(this was rushed and simplified - I'm sure someone else will help me refine it ;) )</p>\n\n<p>PS. Kudos to you for diving into this stuff at the middle school level! :)</p>\n"},{"tags":[],"owner":{"account_id":2445684,"reputation":1553,"user_id":2133137,"accept_rate":91,"display_name":"Hovestar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1376151463,"creation_date":1376151463,"answer_id":18163851,"question_id":2608944,"body_markdown":"I&#39;ve had the same problem for a while. I&#39;m a high school student, so you&#39;re a little ahead of me. I got a vacation and I used it to learn all I could on backpropagation, and I&#39;ve found almost no resources that really help too much unless you want to read so much calculus that you want to die. My advice is to first write a perceptron, which is a network with only input layers and output layers. This inspired me o write a post, so hopefully within half an hour of my posting here there should be a tutorial on http://certioraomnia.blogspot.com/. It may be a little late as this question was asked three years ago, but it may help others later.\r\n","title":"Simple explanation on artificial neural networks?","body":"<p>I've had the same problem for a while. I'm a high school student, so you're a little ahead of me. I got a vacation and I used it to learn all I could on backpropagation, and I've found almost no resources that really help too much unless you want to read so much calculus that you want to die. My advice is to first write a perceptron, which is a network with only input layers and output layers. This inspired me o write a post, so hopefully within half an hour of my posting here there should be a tutorial on <a href=\"http://certioraomnia.blogspot.com/\" rel=\"nofollow\">http://certioraomnia.blogspot.com/</a>. It may be a little late as this question was asked three years ago, but it may help others later.</p>\n"}],"owner":{"display_name":"user263078"},"comment_count":4,"delete_vote_count":2,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2968,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"closed_date":1376675146,"accepted_answer_id":2609010,"answer_count":2,"score":4,"last_activity_date":1682707501,"creation_date":1270828928,"question_id":2608944,"body_markdown":"I&#39;ve Googled, StackOverflowed, everything, and I cannot seem to find a tutorial I can understand.  I understand the concept of genetic algorithms, and how to implement them, (Though I haven&#39;t tried) but I cannot grasp the concept of neural networks.\r\n\r\nI know vaguely how they work... And that&#39;s about it.  Could someone give an explanation that can help someone who has not even graduated middle school yet?\r\n","title":"Simple explanation on artificial neural networks?","body":"<p>I've Googled, StackOverflowed, everything, and I cannot seem to find a tutorial I can understand.  I understand the concept of genetic algorithms, and how to implement them, (Though I haven't tried) but I cannot grasp the concept of neural networks.</p>\n<p>I know vaguely how they work... And that's about it.  Could someone give an explanation that can help someone who has not even graduated middle school yet?</p>\n"},{"tags":["java","string","macos","unicode","macos-ventura"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1682708123,"post_id":76132390,"comment_id":134263630,"body_markdown":"`\\u022` == `&quot;`. What you have is equivalent to `&quot;Hello, &quot; + &quot;world!&quot;` (i.e., concatenating two strings).","body":"<code>\\u022</code> == <code>&quot;</code>. What you have is equivalent to <code>&quot;Hello, &quot; + &quot;world!&quot;</code> (i.e., concatenating two strings)."}],"owner":{"account_id":28448230,"reputation":19,"user_id":21766667,"display_name":"Cinimod"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1682707361,"answer_count":0,"score":1,"last_activity_date":1682707321,"creation_date":1682707031,"question_id":76132390,"body_markdown":"I was trying to use unicode to insert quotes around the &quot;world&quot; in a java hello world program. \r\nI forgot to save it and it just worked anyway. I&#39;m just super confused about this. \r\n\r\nI use a MacBook Pro with macOS Ventura 13.2.1, and openJDK 19.0.1.\r\n\r\nThis is the code that I ran.\r\n\r\n```java\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Hello, \\u0022 + &quot;world!&quot;);\r\n    }\r\n}\r\n```","title":"why does this java string not cause an compiler error?","body":"<p>I was trying to use unicode to insert quotes around the &quot;world&quot; in a java hello world program.\nI forgot to save it and it just worked anyway. I'm just super confused about this.</p>\n<p>I use a MacBook Pro with macOS Ventura 13.2.1, and openJDK 19.0.1.</p>\n<p>This is the code that I ran.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello, \\u0022 + &quot;world!&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","spotbugs"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1657892125,"post_id":72994814,"comment_id":128924263,"body_markdown":"https://openjdk.org/jeps/411","body":"<a href=\"https://openjdk.org/jeps/411\" rel=\"nofollow noreferrer\">openjdk.org/jeps/411</a>"},{"owner":{"display_name":"user11255252"},"score":0,"creation_date":1657892178,"post_id":72994814,"comment_id":128924280,"body_markdown":"shouldn&#39;t be on jdk 11 afaik","body":"shouldn&#39;t be on jdk 11 afaik"},{"owner":{"account_id":213468,"reputation":103487,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1657894298,"post_id":72994814,"comment_id":128925141,"body_markdown":"What is the output of `mvn -v`. Also, please replace the screenshot with actual text. The error suggests you&#39;re using Java 12 or higher, with `-Djava.security.manager=disallow` specified, or with Java 18 where that behaviour has become the default.","body":"What is the output of <code>mvn -v</code>. Also, please replace the screenshot with actual text. The error suggests you&#39;re using Java 12 or higher, with <code>-Djava.security.manager=disallow</code> specified, or with Java 18 where that behaviour has become the default."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1657895603,"post_id":72994814,"comment_id":128925708,"body_markdown":"I strongly recommend to upgrade your spotbugs-maven-plugin to most recent version","body":"I strongly recommend to upgrade your spotbugs-maven-plugin to most recent version"}],"answers":[{"tags":[],"owner":{"account_id":14402163,"reputation":39,"user_id":10779932,"display_name":"Anist Plenitud Mampuru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682706516,"creation_date":1682706516,"answer_id":76132334,"question_id":72994814,"body_markdown":"Had the same issue. Simply add JAVA_HOME to your system environment variables and point it to your jdk-11 folder e.g C:\\Users\\Program Files\\Java\\jdk-11. This resolved it for me","title":"spotbugs failed: java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release","body":"<p>Had the same issue. Simply add JAVA_HOME to your system environment variables and point it to your jdk-11 folder e.g C:\\Users\\Program Files\\Java\\jdk-11. This resolved it for me</p>\n"}],"owner":{"display_name":"user11255252"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1605,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682706516,"creation_date":1657891884,"question_id":72994814,"body_markdown":"I&#39;m getting an error while running mvn clean install. Locally, I have jdk 11 installed. The project is also using jdk 11. \r\n[![Here is the error I get. On most threads on internet I saw it only on JDK 17+.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QyuDd.png\r\n\r\nI am using a Macbook pro with an M1 chip.","title":"spotbugs failed: java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release","body":"<p>I'm getting an error while running mvn clean install. Locally, I have jdk 11 installed. The project is also using jdk 11.\n<a href=\"https://i.stack.imgur.com/QyuDd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QyuDd.png\" alt=\"Here is the error I get. On most threads on internet I saw it only on JDK 17+.\" /></a></p>\n<p>I am using a Macbook pro with an M1 chip.</p>\n"},{"tags":["java","multithreading","kotlin","opencv","javafx"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1682704973,"post_id":76132068,"comment_id":134263094,"body_markdown":"If it&#39;s a large chunk of code, you know what to do: form a [mcve]. And you also know that&#39;s not even so much &quot;for us&quot;, but primarily &quot;for yourself&quot;: forcing  yourself to run through the MCVE exercise in order to put it in a post almost always lets you find the problem all on your own because you&#39;re _forcing_ yourself to be critical what what happens where (and what is irrelevant). With the upside that if your minimal code _still_ has that problem, now you have the perfect code for putting in a question.","body":"If it&#39;s a large chunk of code, you know what to do: form a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. And you also know that&#39;s not even so much &quot;for us&quot;, but primarily &quot;for yourself&quot;: forcing  yourself to run through the MCVE exercise in order to put it in a post almost always lets you find the problem all on your own because you&#39;re <i>forcing</i> yourself to be critical what what happens where (and what is irrelevant). With the upside that if your minimal code <i>still</i> has that problem, now you have the perfect code for putting in a question."},{"owner":{"account_id":213468,"reputation":103487,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682850016,"post_id":76132068,"comment_id":134277151,"body_markdown":"https://learn.microsoft.com/en-us/shows/inside/c0000409","body":"<a href=\"https://learn.microsoft.com/en-us/shows/inside/c0000409\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/shows/inside/c0000409</a>"},{"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"score":0,"creation_date":1682943570,"post_id":76132068,"comment_id":134287398,"body_markdown":"Wow, so it&#39;s basically an exit code saying &quot;There has been an exception&quot;... Thank you Microsoft, I would not have guessed that a non-zero-exit code means that something went wrong...","body":"Wow, so it&#39;s basically an exit code saying &quot;There has been an exception&quot;... Thank you Microsoft, I would not have guessed that a non-zero-exit code means that something went wrong..."}],"answers":[{"tags":[],"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682705920,"creation_date":1682705920,"answer_id":76132272,"question_id":76132068,"body_markdown":"As I mentioned in my edit, OpenCV suddenly spat out this message in the log:\r\n\r\n    OpenCL error CL_MEM_OBJECT_ALLOCATION_FAILURE (-4) during call: clEnqueueNDRangeKernel(&#39;warpAffine&#39;, dims=2, globalsize=6656x6424x1, localsize=NULL) sync=false\r\n\r\nThis basically confirms my theory that it is indeed an issue with OpenCV corrupting the VM. The issue is [already known](https://github.com/opencv/opencv_contrib/issues/2114) and the proposed solution is to disable OpenCL. To do so, one of the following steps can be used:\r\n\r\n- Set an environment variable like so: `export OPENCV_OPENCL_DEVICE=disabled`\r\n- `cv2.ocl.setUseOpenCL(False)` (on python).","title":"Meaning of exit code -1073740791 (0xC0000409) in Java","body":"<p>As I mentioned in my edit, OpenCV suddenly spat out this message in the log:</p>\n<pre><code>OpenCL error CL_MEM_OBJECT_ALLOCATION_FAILURE (-4) during call: clEnqueueNDRangeKernel('warpAffine', dims=2, globalsize=6656x6424x1, localsize=NULL) sync=false\n</code></pre>\n<p>This basically confirms my theory that it is indeed an issue with OpenCV corrupting the VM. The issue is <a href=\"https://github.com/opencv/opencv_contrib/issues/2114\" rel=\"nofollow noreferrer\">already known</a> and the proposed solution is to disable OpenCL. To do so, one of the following steps can be used:</p>\n<ul>\n<li>Set an environment variable like so: <code>export OPENCV_OPENCL_DEVICE=disabled</code></li>\n<li><code>cv2.ocl.setUseOpenCL(False)</code> (on python).</li>\n</ul>\n"}],"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76132272,"answer_count":1,"score":1,"last_activity_date":1682705920,"creation_date":1682703982,"question_id":76132068,"body_markdown":"I am facing a weird issue in my Java/Kotlin project where the JVM just exits without any stacktrace or crash dump. The only debugging information I have is that it exits with exit code -1073740791 (0xC0000409), which is also why this question is very vague.\r\n\r\nI am trying to detect chessboards in images using OpenCV using the code below, but before I show you the code, here&#39;s what I found out so far:\r\n- When I run the code in a single thread, it works fine\r\n- When I try to process multiple frames in parallel on different threads (which are in theory independent of each other), the code randomly crashes as described above (This happens as soon as I add just a 2nd thread).\r\n\r\nHere&#39;s the code in question. Unfortunately, it is a rather large chunk of code since I could not really narrow down the exact location where it crashes.\r\n\r\n```kotlin\r\noverride fun track(\r\n    frameToTrackIn: Mat,\r\n    options: Options\r\n): Map&lt;Key, KeyFrame&gt; = manageResources {\r\n    // Prepare some input arguments\r\n    val corners = MatOfPoint2f().releaseLater()\r\n    val patternSize = Size(\r\n        options.minimumNumberOfInternalCornerCols.toDouble(),\r\n        options.minimumNumberOfInternalCornerRows.toDouble()\r\n    )\r\n\r\n    // Remove the alpha channel if the image has one\r\n    val rgbFrame = if (frameToTrackIn.channels() &lt;= 3) frameToTrackIn\r\n    else Mat().releaseLater().also { rgbFrame -&gt;\r\n        Imgproc.cvtColor(frameToTrackIn, rgbFrame, Imgproc.COLOR_RGBA2RGB)\r\n    }\r\n\r\n    // Set some flags for OpenCV\r\n    var flags = CALIB_CB_NORMALIZE_IMAGE or CALIB_CB_EXHAUSTIVE or CALIB_CB_ACCURACY\r\n    if (options.patternHasMarker)\r\n        flags = flags or CALIB_CB_MARKER or CALIB_CB_LARGER\r\n\r\n    val metadata = Mat().releaseLater()\r\n    // Actually call OpenCV to search for chess boards\r\n    val colorPatternFound = findChessboardCornersSBWithMeta(rgbFrame, patternSize, corners, flags, metadata)\r\n\r\n    if (colorPatternFound) {\r\n        val actualPatternSize = Key(metadata.rows(), metadata.cols())\r\n        return mapOf(actualPatternSize to corners.toKeyFrame())\r\n    }\r\n\r\n    return mapOf()\r\n}\r\n\r\n```\r\n\r\nOther, maybe noteworthy details:\r\n- OpenCV version 4.6.0\r\n- JDK 19\r\n- JavaFX 19.0.2.1\r\n- Nvidia GPU driver v531.68\r\n\r\nHere are the hypothesis which I have come up so far:\r\n- To rule out the obvious: No, I am not calling `System.exit()` or `exitProcess()` myself.\r\n- Other questions (a couple of years old) mention that there has been a bug in the Nvidia driver that caused JavaFX applications to crash at startup. While I don&#39;t think that this is the case, as my app is starting up, and it works when running the code in a single thread, I don&#39;t want to rule it out completely.\r\n- Since OpenCV is native code, it could try to allocate some weird chunks of memory when being called from multiple threads, thus corrupting the JVM (unlikely, since OpenCV developers are usually pretty skilled)\r\n- I have a race condition in some other place of my code that causes JavaFX and/or OpenCV to glitch out.\r\n\r\nEither way, knowing the possible meanings of this exit code would be very helpful to find the culprit.\r\n\r\nEdit: After adding lots of print statements, I found out two more things:\r\n- When executing the code, all threads get stuck for a while waiting for the call to OpenCV to return and then crash, indicating that there is indeed something wrong with OpenCV.\r\n- During one of my test runs, I suddenly also got the following log output from somewhere: `OpenCL error CL_MEM_OBJECT_ALLOCATION_FAILURE (-4) during call: clEnqueueNDRangeKernel(&#39;warpAffine&#39;, dims=2, globalsize=6656x6424x1, localsize=NULL) sync=false`\r\n","title":"Meaning of exit code -1073740791 (0xC0000409) in Java","body":"<p>I am facing a weird issue in my Java/Kotlin project where the JVM just exits without any stacktrace or crash dump. The only debugging information I have is that it exits with exit code -1073740791 (0xC0000409), which is also why this question is very vague.</p>\n<p>I am trying to detect chessboards in images using OpenCV using the code below, but before I show you the code, here's what I found out so far:</p>\n<ul>\n<li>When I run the code in a single thread, it works fine</li>\n<li>When I try to process multiple frames in parallel on different threads (which are in theory independent of each other), the code randomly crashes as described above (This happens as soon as I add just a 2nd thread).</li>\n</ul>\n<p>Here's the code in question. Unfortunately, it is a rather large chunk of code since I could not really narrow down the exact location where it crashes.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun track(\n    frameToTrackIn: Mat,\n    options: Options\n): Map&lt;Key, KeyFrame&gt; = manageResources {\n    // Prepare some input arguments\n    val corners = MatOfPoint2f().releaseLater()\n    val patternSize = Size(\n        options.minimumNumberOfInternalCornerCols.toDouble(),\n        options.minimumNumberOfInternalCornerRows.toDouble()\n    )\n\n    // Remove the alpha channel if the image has one\n    val rgbFrame = if (frameToTrackIn.channels() &lt;= 3) frameToTrackIn\n    else Mat().releaseLater().also { rgbFrame -&gt;\n        Imgproc.cvtColor(frameToTrackIn, rgbFrame, Imgproc.COLOR_RGBA2RGB)\n    }\n\n    // Set some flags for OpenCV\n    var flags = CALIB_CB_NORMALIZE_IMAGE or CALIB_CB_EXHAUSTIVE or CALIB_CB_ACCURACY\n    if (options.patternHasMarker)\n        flags = flags or CALIB_CB_MARKER or CALIB_CB_LARGER\n\n    val metadata = Mat().releaseLater()\n    // Actually call OpenCV to search for chess boards\n    val colorPatternFound = findChessboardCornersSBWithMeta(rgbFrame, patternSize, corners, flags, metadata)\n\n    if (colorPatternFound) {\n        val actualPatternSize = Key(metadata.rows(), metadata.cols())\n        return mapOf(actualPatternSize to corners.toKeyFrame())\n    }\n\n    return mapOf()\n}\n\n</code></pre>\n<p>Other, maybe noteworthy details:</p>\n<ul>\n<li>OpenCV version 4.6.0</li>\n<li>JDK 19</li>\n<li>JavaFX 19.0.2.1</li>\n<li>Nvidia GPU driver v531.68</li>\n</ul>\n<p>Here are the hypothesis which I have come up so far:</p>\n<ul>\n<li>To rule out the obvious: No, I am not calling <code>System.exit()</code> or <code>exitProcess()</code> myself.</li>\n<li>Other questions (a couple of years old) mention that there has been a bug in the Nvidia driver that caused JavaFX applications to crash at startup. While I don't think that this is the case, as my app is starting up, and it works when running the code in a single thread, I don't want to rule it out completely.</li>\n<li>Since OpenCV is native code, it could try to allocate some weird chunks of memory when being called from multiple threads, thus corrupting the JVM (unlikely, since OpenCV developers are usually pretty skilled)</li>\n<li>I have a race condition in some other place of my code that causes JavaFX and/or OpenCV to glitch out.</li>\n</ul>\n<p>Either way, knowing the possible meanings of this exit code would be very helpful to find the culprit.</p>\n<p>Edit: After adding lots of print statements, I found out two more things:</p>\n<ul>\n<li>When executing the code, all threads get stuck for a while waiting for the call to OpenCV to return and then crash, indicating that there is indeed something wrong with OpenCV.</li>\n<li>During one of my test runs, I suddenly also got the following log output from somewhere: <code>OpenCL error CL_MEM_OBJECT_ALLOCATION_FAILURE (-4) during call: clEnqueueNDRangeKernel('warpAffine', dims=2, globalsize=6656x6424x1, localsize=NULL) sync=false</code></li>\n</ul>\n"},{"tags":["java","concurrency","one-liner"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1682610551,"post_id":76122045,"comment_id":134246396,"body_markdown":"Explain concurrent/thread-safe alter ego of the used DSs. And what is DS?","body":"Explain concurrent/thread-safe alter ego of the used DSs. And what is DS?"},{"owner":{"account_id":1490931,"reputation":410,"user_id":1398030,"display_name":"Madhawa Gunasekara"},"score":0,"creation_date":1682613568,"post_id":76122045,"comment_id":134247156,"body_markdown":"@BasilBourque: I thought he refers to the Distributed Systems = DS, better to clarify like you said :)","body":"@BasilBourque: I thought he refers to the Distributed Systems = DS, better to clarify like you said :)"},{"owner":{"account_id":22905355,"reputation":53,"user_id":17043505,"display_name":"Gabriele Passoni"},"score":0,"creation_date":1682662613,"post_id":76122045,"comment_id":134253843,"body_markdown":"@BasilBourque I&#39;m referring to Data Structure. And with the final s is just obviously the plural. I&#39;m gonna make it clear by editing the question","body":"@BasilBourque I&#39;m referring to Data Structure. And with the final s is just obviously the plural. I&#39;m gonna make it clear by editing the question"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682705810,"creation_date":1682610737,"answer_id":76122387,"question_id":76122045,"body_markdown":"&gt; So the underlying question is: single line of codes are thread safe or not?\r\n\r\nThat really isn&#39;t how it works. Interactions are &#39;safe&#39; or &#39;unsafe&#39;; single lines are not individually so.\r\n\r\nHowever, in general the rule: It&#39;s never safe.\r\n\r\nIf you fail to synchronize on a `.size()` call, that may return a size that is wildly wrong. Here&#39;s the simple rule:\r\n\r\n* If a field, of any object, is being accessed by 2 or more threads, at least one of which is writing it, __that code is broken__.\r\n\r\nThe only way it isn&#39;t broken is if you take care to write a so-called Happens-Before relationship across __all__ such accesses. An HB relationship is a thing described in the Java Memory Model documentation that establishes the following notion:\r\n\r\n* If line A has a happens-before relationship relative to line B, then when B executes, it is not possible to observe state as it was _before_ A finished execution.\r\n\r\nThat&#39;s all you get.\r\n\r\nThus, if you fail to establish HB, The JVM is free to feed you state that has long since passed on. However, the JVM is not __obligated__ either - the JMM is the one place in the java documentation where the term &#39;may&#39; shows up a ton. That&#39;s because java has to run on many, many platforms and they just don&#39;t behave the same in regards to on-core caches and other such hardware concerns. In order to ensure a JVM can run code speedily instead of having to slow everything down to a crawl with e.g. global interpreter locks the way python and co have to do it, the JMM instead claims sizable swaths of &quot;the JVM is free to do this thing, or not do this thing - it is on you, the coder, to ensure this &#39;I may or may not do that thing&#39; does not affect the output of your program&quot;.\r\n\r\nTo establish HB, there are a few strategies:\r\n\r\n* &quot;Natural&quot;: Within one thread, obvious lexical rules. Given: `foo(); bar();` in a single method, foo() is HB relative to bar(). This one is the obvious one.\r\n* Thread starting. `thread.start();` is HB relative to the first line that thread&#39;s `run()`.\r\n* `synchronized`. The line exiting a sync block is HB relative to any entering of a sync block, so long as these sync blocks are syncing on the same object of course.\r\n* access to a `volatile` field, but note that it tends to be difficult to know which line was HB and which one is HA, with `volatilez`.\r\n\r\nThere are a few more, but those are the basics.\r\n\r\nThus, here you want the last time this object is modified by some thread to be HB relative to invoking `size()`, because otherwise `size()` might as well be telling you what the size() was 18 hours ago.\r\n","title":"Thread safety of single line in Java","body":"<blockquote>\n<p>So the underlying question is: single line of codes are thread safe or not?</p>\n</blockquote>\n<p>That really isn't how it works. Interactions are 'safe' or 'unsafe'; single lines are not individually so.</p>\n<p>However, in general the rule: It's never safe.</p>\n<p>If you fail to synchronize on a <code>.size()</code> call, that may return a size that is wildly wrong. Here's the simple rule:</p>\n<ul>\n<li>If a field, of any object, is being accessed by 2 or more threads, at least one of which is writing it, <strong>that code is broken</strong>.</li>\n</ul>\n<p>The only way it isn't broken is if you take care to write a so-called Happens-Before relationship across <strong>all</strong> such accesses. An HB relationship is a thing described in the Java Memory Model documentation that establishes the following notion:</p>\n<ul>\n<li>If line A has a happens-before relationship relative to line B, then when B executes, it is not possible to observe state as it was <em>before</em> A finished execution.</li>\n</ul>\n<p>That's all you get.</p>\n<p>Thus, if you fail to establish HB, The JVM is free to feed you state that has long since passed on. However, the JVM is not <strong>obligated</strong> either - the JMM is the one place in the java documentation where the term 'may' shows up a ton. That's because java has to run on many, many platforms and they just don't behave the same in regards to on-core caches and other such hardware concerns. In order to ensure a JVM can run code speedily instead of having to slow everything down to a crawl with e.g. global interpreter locks the way python and co have to do it, the JMM instead claims sizable swaths of &quot;the JVM is free to do this thing, or not do this thing - it is on you, the coder, to ensure this 'I may or may not do that thing' does not affect the output of your program&quot;.</p>\n<p>To establish HB, there are a few strategies:</p>\n<ul>\n<li>&quot;Natural&quot;: Within one thread, obvious lexical rules. Given: <code>foo(); bar();</code> in a single method, foo() is HB relative to bar(). This one is the obvious one.</li>\n<li>Thread starting. <code>thread.start();</code> is HB relative to the first line that thread's <code>run()</code>.</li>\n<li><code>synchronized</code>. The line exiting a sync block is HB relative to any entering of a sync block, so long as these sync blocks are syncing on the same object of course.</li>\n<li>access to a <code>volatile</code> field, but note that it tends to be difficult to know which line was HB and which one is HA, with <code>volatilez</code>.</li>\n</ul>\n<p>There are a few more, but those are the basics.</p>\n<p>Thus, here you want the last time this object is modified by some thread to be HB relative to invoking <code>size()</code>, because otherwise <code>size()</code> might as well be telling you what the size() was 18 hours ago.</p>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682610924,"creation_date":1682610924,"answer_id":76122409,"question_id":76122045,"body_markdown":"&gt; while I&#39;m working (iterating/reading multiple times) on that DS I don&#39;t want anyone to write it externally.\r\n\r\nMay I suggest a different way of thinking about `synchronized`? In most programs, we deal with _structured_ data. At a low-level we have general-purpose, reusable structures such as your `HashMap`, and at higher levels we have structures that are narrowly specified to meet the needs of a specific application.\r\n\r\nIt frequently is impossible for any single thread to update data without _temporarily_ putting some structure into an invalid or inconsistent state. This is because the thread can only update the data piece-by-piece. It cannot _atomically_ make all of the changes in a single instant. So, if a structure is shared by two or more threads, then how can any thread make a change without the risk of letting some other thread see the structure as inconsistent/invalid?\r\n\r\nThe `synchronized` keyword rescues us. If we make sure that every thread that updates _or even just looks at_ a certain structure only ever does it from inside a block that is `synchronized` on some certain object,&#160;O,\\* then we can create the _illusion_ (as seen by threads&#160;B, C, D, E, and F) that the changes made by thread&#160;A happened atomically (I.e., all in a single instant.)\r\n\r\n------------\r\n\r\n\\* For best results, declare the variable that refers to object, O, as `final`, and put it somewhere close to the declarations of the variables that refer to the data it protects.  E.g., If the data are members of some class, then you might declare `final&#160;Object&#160;lock=new&#160;Object()` in that class. Or, if the data are `static` members, then you&#39;d have `static&#160;final&#160;Object&#160;lock=new&#160;Object()`, etc.\r\n ","title":"Thread safety of single line in Java","body":"<blockquote>\n<p>while I'm working (iterating/reading multiple times) on that DS I don't want anyone to write it externally.</p>\n</blockquote>\n<p>May I suggest a different way of thinking about <code>synchronized</code>? In most programs, we deal with <em>structured</em> data. At a low-level we have general-purpose, reusable structures such as your <code>HashMap</code>, and at higher levels we have structures that are narrowly specified to meet the needs of a specific application.</p>\n<p>It frequently is impossible for any single thread to update data without <em>temporarily</em> putting some structure into an invalid or inconsistent state. This is because the thread can only update the data piece-by-piece. It cannot <em>atomically</em> make all of the changes in a single instant. So, if a structure is shared by two or more threads, then how can any thread make a change without the risk of letting some other thread see the structure as inconsistent/invalid?</p>\n<p>The <code>synchronized</code> keyword rescues us. If we make sure that every thread that updates <em>or even just looks at</em> a certain structure only ever does it from inside a block that is <code>synchronized</code> on some certain object,O,* then we can create the <em>illusion</em> (as seen by threadsB, C, D, E, and F) that the changes made by threadA happened atomically (I.e., all in a single instant.)</p>\n<hr />\n<p>* For best results, declare the variable that refers to object, O, as <code>final</code>, and put it somewhere close to the declarations of the variables that refer to the data it protects.  E.g., If the data are members of some class, then you might declare <code>finalObjectlock=newObject()</code> in that class. Or, if the data are <code>static</code> members, then you'd have <code>staticfinalObjectlock=newObject()</code>, etc.</p>\n"}],"owner":{"account_id":22905355,"reputation":53,"user_id":17043505,"display_name":"Gabriele Passoni"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76122387,"answer_count":2,"score":0,"last_activity_date":1682705810,"creation_date":1682608589,"question_id":76122045,"body_markdown":"Since I&#39;m implementing for the first time a quite complex multi-threaded application in java, I was wondering about thread safety on data structures. Obviously my first goal is to achieve thread safety but I would like also to achieve a good performance avoiding useless extra locks. The hypothesis is that I&#39;m not using concurrent/thread-safe alter ego of the used DSs (I&#39;m going to use DS as &quot;data structure&quot; from now on).\r\n\r\nMy general approach is this one:\r\n\r\nWhen the same data structure is used for more than one line or there&#39;s an iteration on it in the same method/code block I&#39;m going to synchronize that block on the DS. Even if it&#39;s a read only block. For example this code:\r\n\r\n    synchronized (networkView) {\r\n        for (int othersID : networkView.keySet()) {\r\n            networkView.get(othersID).send(new CloseConnectionMessage(ID));\r\n            networkView.get(othersID).close();\r\n            networkView.get(othersID).join();\r\n        }\r\n    }\r\nWhere `networkView` is a classic HashMap. This is because while I&#39;m working (iterating/reading multiple times) on that DS I don&#39;t want anyone to write it externally. Now every time I&#39;m writing `networkView` I&#39;m going to synchronize that block even if it&#39;s a one-liner to avoid concurrent modification like this other example:\r\n\r\n    public void clearNetwork() {\r\n        synchronized (networkView) {\r\n            networkView.clear();\r\n        }\r\n    }\r\n\r\nAnd here&#39;s the first question: is it also necessary to synchronize on one-liners that only read the structure? For example if a method returns the lenght of this data structure, is it thread safe without a synchronized block? like this one:\r\n\r\n    public int getNetworkView() {\r\n        return networkView.size();\r\n    }\r\n\r\nSo the underlying question is: single line of codes are thread safe or not? As I said before modification one-liners should anyway be synchronized because they should not interfere with mutliple read blocks (like the first example) but can they also interfere with one-liner reads and write? If example 2 and 3 methods are executed concurrently, is it thread safe?\r\n\r\nAnother question is this one: with DS used only with one-liners I would say it&#39;s enough to use their thread-safe counterparts (like ConcurrentHashMap), while they&#39;re not enough in a case like the first example without the synchronized block. Am I right about this?","title":"Thread safety of single line in Java","body":"<p>Since I'm implementing for the first time a quite complex multi-threaded application in java, I was wondering about thread safety on data structures. Obviously my first goal is to achieve thread safety but I would like also to achieve a good performance avoiding useless extra locks. The hypothesis is that I'm not using concurrent/thread-safe alter ego of the used DSs (I'm going to use DS as &quot;data structure&quot; from now on).</p>\n<p>My general approach is this one:</p>\n<p>When the same data structure is used for more than one line or there's an iteration on it in the same method/code block I'm going to synchronize that block on the DS. Even if it's a read only block. For example this code:</p>\n<pre><code>synchronized (networkView) {\n    for (int othersID : networkView.keySet()) {\n        networkView.get(othersID).send(new CloseConnectionMessage(ID));\n        networkView.get(othersID).close();\n        networkView.get(othersID).join();\n    }\n}\n</code></pre>\n<p>Where <code>networkView</code> is a classic HashMap. This is because while I'm working (iterating/reading multiple times) on that DS I don't want anyone to write it externally. Now every time I'm writing <code>networkView</code> I'm going to synchronize that block even if it's a one-liner to avoid concurrent modification like this other example:</p>\n<pre><code>public void clearNetwork() {\n    synchronized (networkView) {\n        networkView.clear();\n    }\n}\n</code></pre>\n<p>And here's the first question: is it also necessary to synchronize on one-liners that only read the structure? For example if a method returns the lenght of this data structure, is it thread safe without a synchronized block? like this one:</p>\n<pre><code>public int getNetworkView() {\n    return networkView.size();\n}\n</code></pre>\n<p>So the underlying question is: single line of codes are thread safe or not? As I said before modification one-liners should anyway be synchronized because they should not interfere with mutliple read blocks (like the first example) but can they also interfere with one-liner reads and write? If example 2 and 3 methods are executed concurrently, is it thread safe?</p>\n<p>Another question is this one: with DS used only with one-liners I would say it's enough to use their thread-safe counterparts (like ConcurrentHashMap), while they're not enough in a case like the first example without the synchronized block. Am I right about this?</p>\n"},{"tags":["java","kotlin","file","zip4j"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1682705579,"creation_date":1682705579,"answer_id":76132235,"question_id":76132160,"body_markdown":"The crucial thing you&#39;re missing is that you have heard an oversimplification that is incorrect and has now led you astray. What you think you know/heard is:\r\n\r\n* `finally` blocks run _before the return statement_.\r\n\r\nBut that is __incorrect__. The correct thought is:\r\n\r\n* `finally` blocks run _before returning_.\r\n\r\nAs in, _first_ `out.toByteArray()` is evaluated, _then_ the finally block runs (closing the zip stream, which causes it to write the zip header, because in zip files, those are at the end), _then_ the evaluated-before-running-the-finally byte array is returned. Which doesn&#39;t have that header because it didn&#39;t yet when it was created. Whereas in your second snippet, the zip stream writes its header out prior to evaluating `out.toByteArray()`.\r\n\r\nFor what its worth, `try/finally` is useless here - none of these things are system resources that demand that you safely close them. The code is a lot simpler to read if you just make it:\r\n\r\n```\r\nfun createZipFile(filename: String, vararg containers: Pair&lt;String, ByteArray?&gt;): ByteArray {\r\n     val out = ByteArrayOutputStream()\r\n     val zipFile = ZipOutputStream(out, passwordGenerator.generate());\r\n     for ((name, file) in containers.toList()) {\r\n         if (file != null) {\r\n             val parameters = createZipParameters(name)\r\n             zipFile.putNextEntry(parameters)\r\n             zipFile.write(file)\r\n             zipFile.closeEntry()\r\n         }\r\n     }\r\n     zipFile.close()\r\n     return out.toByteArray()\r\n }\r\n```\r\n\r\nA few notes on the above:\r\n\r\n* There is no need to `out.close()` - closing a wrapper stream also closing the thing it wraps.\r\n* If your linter complains, fix your linter, don&#39;t fix your code. A linter exists to make your code easier to read. If you write harder to read code to avoid it, you need to ask yourself some serious questions.\r\n","title":"Got error &quot;inappropriate format&quot; when returning a file inside of a try block","body":"<p>The crucial thing you're missing is that you have heard an oversimplification that is incorrect and has now led you astray. What you think you know/heard is:</p>\n<ul>\n<li><code>finally</code> blocks run <em>before the return statement</em>.</li>\n</ul>\n<p>But that is <strong>incorrect</strong>. The correct thought is:</p>\n<ul>\n<li><code>finally</code> blocks run <em>before returning</em>.</li>\n</ul>\n<p>As in, <em>first</em> <code>out.toByteArray()</code> is evaluated, <em>then</em> the finally block runs (closing the zip stream, which causes it to write the zip header, because in zip files, those are at the end), <em>then</em> the evaluated-before-running-the-finally byte array is returned. Which doesn't have that header because it didn't yet when it was created. Whereas in your second snippet, the zip stream writes its header out prior to evaluating <code>out.toByteArray()</code>.</p>\n<p>For what its worth, <code>try/finally</code> is useless here - none of these things are system resources that demand that you safely close them. The code is a lot simpler to read if you just make it:</p>\n<pre><code>fun createZipFile(filename: String, vararg containers: Pair&lt;String, ByteArray?&gt;): ByteArray {\n     val out = ByteArrayOutputStream()\n     val zipFile = ZipOutputStream(out, passwordGenerator.generate());\n     for ((name, file) in containers.toList()) {\n         if (file != null) {\n             val parameters = createZipParameters(name)\n             zipFile.putNextEntry(parameters)\n             zipFile.write(file)\n             zipFile.closeEntry()\n         }\n     }\n     zipFile.close()\n     return out.toByteArray()\n }\n</code></pre>\n<p>A few notes on the above:</p>\n<ul>\n<li>There is no need to <code>out.close()</code> - closing a wrapper stream also closing the thing it wraps.</li>\n<li>If your linter complains, fix your linter, don't fix your code. A linter exists to make your code easier to read. If you write harder to read code to avoid it, you need to ask yourself some serious questions.</li>\n</ul>\n"}],"owner":{"account_id":13467469,"reputation":778,"user_id":9740664,"display_name":"Patrick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76132235,"answer_count":1,"score":0,"last_activity_date":1682705579,"creation_date":1682704832,"question_id":76132160,"body_markdown":"I am trying to create a password-protected zip file using zip4j that contains several files. This is the code I have so far\r\n\r\n    fun createZipFile(filename: String, vararg containers: Pair&lt;String, ByteArray?&gt;): ByteArray {\r\n         val out = ByteArrayOutputStream()\r\n         val zipFile = ZipOutputStream(out, passwordGenerator.generate());\r\n         try {\r\n             for ((name, file) in containers.toList()) {\r\n                 if (file != null) {\r\n                     val parameters = createZipParameters(name)\r\n                     zipFile.putNextEntry(parameters)\r\n                     zipFile.write(file)\r\n                     zipFile.closeEntry()\r\n                 }\r\n             }\r\n             // return here cause error\r\n             return out.toByteArray()\r\n         }\r\n         finally {\r\n             zipFile.close()\r\n             out.close()\r\n         }\r\n     }\r\n\r\nI received an &quot;inappropriate format&quot; error when I tried to open the file. However, when I made a small change and moved the return statement after the finally block, it worked fine\r\n\r\n       // return out.toByteArray()\r\n    }\r\n    finally {\r\n       zipFile.close()\r\n       out.close()\r\n    }\r\n    return out.toByteArray()\r\n\r\nCan you explain why this change made a difference and why the original code did not work?","title":"Got error &quot;inappropriate format&quot; when returning a file inside of a try block","body":"<p>I am trying to create a password-protected zip file using zip4j that contains several files. This is the code I have so far</p>\n<pre><code>fun createZipFile(filename: String, vararg containers: Pair&lt;String, ByteArray?&gt;): ByteArray {\n     val out = ByteArrayOutputStream()\n     val zipFile = ZipOutputStream(out, passwordGenerator.generate());\n     try {\n         for ((name, file) in containers.toList()) {\n             if (file != null) {\n                 val parameters = createZipParameters(name)\n                 zipFile.putNextEntry(parameters)\n                 zipFile.write(file)\n                 zipFile.closeEntry()\n             }\n         }\n         // return here cause error\n         return out.toByteArray()\n     }\n     finally {\n         zipFile.close()\n         out.close()\n     }\n }\n</code></pre>\n<p>I received an &quot;inappropriate format&quot; error when I tried to open the file. However, when I made a small change and moved the return statement after the finally block, it worked fine</p>\n<pre><code>   // return out.toByteArray()\n}\nfinally {\n   zipFile.close()\n   out.close()\n}\nreturn out.toByteArray()\n</code></pre>\n<p>Can you explain why this change made a difference and why the original code did not work?</p>\n"},{"tags":["java","kubernetes","kubernetes-helm","apache-pulsar"],"owner":{"account_id":17891954,"reputation":138,"user_id":12998229,"display_name":"Thomas Turner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682705573,"creation_date":1682675741,"question_id":76128386,"body_markdown":"We have recently been working on migrating our Pulsar cluster to run on Kubernetes. We have successfully moved over basic functionality as well as our sinks, however we have been struggling with our functions.\r\nWe have two functions, both use state values, however when they are called, we get the following error when they try to access their state:\r\n\r\n```\r\n2023-04-28T07:58:33,565+0000 [public/tracking/playStartFunction-0] ERROR function-playStartFunction - Failed to process multi-cam message\r\njava.lang.IllegalStateException: State public/tracking/playStartFunction is not enabled.\r\n```\r\n\r\nOur current cluster runs on EC2 instances and we configure Pulsar using Ansible. In this set up we define the following value:\r\n\r\n```\r\n# the service url points to bookkeeper table service\r\nstateStorageServiceUrl: bk://{{ bookie_url }}:4181\r\n```\r\n\r\nWe can&#39;t, however, seem to find an equivalent for this in our new K8s deployment.\r\n\r\nDoes anyone have experience running stateful functions on a K8s Pulsar cluster that could help?\r\n\r\nWe have looked through the official HELM chart but were unable to find any properties which seemed relevant.","title":"How to configure function state storage for Pulsar running on Kubernetes","body":"<p>We have recently been working on migrating our Pulsar cluster to run on Kubernetes. We have successfully moved over basic functionality as well as our sinks, however we have been struggling with our functions.\nWe have two functions, both use state values, however when they are called, we get the following error when they try to access their state:</p>\n<pre><code>2023-04-28T07:58:33,565+0000 [public/tracking/playStartFunction-0] ERROR function-playStartFunction - Failed to process multi-cam message\njava.lang.IllegalStateException: State public/tracking/playStartFunction is not enabled.\n</code></pre>\n<p>Our current cluster runs on EC2 instances and we configure Pulsar using Ansible. In this set up we define the following value:</p>\n<pre><code># the service url points to bookkeeper table service\nstateStorageServiceUrl: bk://{{ bookie_url }}:4181\n</code></pre>\n<p>We can't, however, seem to find an equivalent for this in our new K8s deployment.</p>\n<p>Does anyone have experience running stateful functions on a K8s Pulsar cluster that could help?</p>\n<p>We have looked through the official HELM chart but were unable to find any properties which seemed relevant.</p>\n"},{"tags":["java","redirect","console","java.util.scanner","stdin"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682693612,"post_id":76130348,"comment_id":134260699,"body_markdown":"I&#39;m not sure it&#39;s a good use of time commenting on &#39;surprising&#39; results when the *code itself* is surprising. Why, for instance, would you read the user name *twice* from a redirected file?","body":"I&#39;m not sure it&#39;s a good use of time commenting on &#39;surprising&#39; results when the <i>code itself</i> is surprising. Why, for instance, would you read the user name <i>twice</i> from a redirected file?"},{"owner":{"account_id":28445954,"reputation":13,"user_id":21764659,"display_name":"Siva"},"score":0,"creation_date":1682703313,"post_id":76130348,"comment_id":134262759,"body_markdown":"So, when teaching (usually Python), I often ask students to take a piece of functionality and move it to a separate method. In this case, we take user interaction, move it to a method, then add more stuff (like input validation). This serves as a little piece of encapsulation. I build auto graders to test student code, and typically feed input from files for rapid testing.","body":"So, when teaching (usually Python), I often ask students to take a piece of functionality and move it to a separate method. In this case, we take user interaction, move it to a method, then add more stuff (like input validation). This serves as a little piece of encapsulation. I build auto graders to test student code, and typically feed input from files for rapid testing."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682705004,"creation_date":1682700932,"answer_id":76131712,"question_id":76130348,"body_markdown":"The problem is that you reopen scanner each time, essentially using a different input stream each time.  So subsequent streams would hit an end of file. Open the scanner only once and not in `getUserName`.  And in general I don&#39;t usually prompt in input methods.  As in this case it doesn&#39;t make sense to prompt when taking input from a file.\r\n```\r\nimport java.util.Scanner;\r\nclass Broken {\r\n    static Scanner s = new Scanner(System.in);\r\n    public static String getUserName() {\r\n       \r\n        System.out.print(&quot;Enter Name: &quot;);\r\n        return s.nextLine();\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        String a = getUserName();\r\n        String b = getUserName();\r\n        System.out.println(a);\r\n        System.out.println(b);\r\n    }\r\n}\r\n```\r\nWhen run as `java Broken &lt; names.txt`\r\nprints\r\n```\r\nEnter Name: Bob\r\nEnter Name: Lisa\r\n","title":"Java Scanner and console input redirect","body":"<p>The problem is that you reopen scanner each time, essentially using a different input stream each time.  So subsequent streams would hit an end of file. Open the scanner only once and not in <code>getUserName</code>.  And in general I don't usually prompt in input methods.  As in this case it doesn't make sense to prompt when taking input from a file.</p>\n<pre><code>import java.util.Scanner;\nclass Broken {\n    static Scanner s = new Scanner(System.in);\n    public static String getUserName() {\n       \n        System.out.print(&quot;Enter Name: &quot;);\n        return s.nextLine();\n    }\n    \n    public static void main(String[] args) {\n        String a = getUserName();\n        String b = getUserName();\n        System.out.println(a);\n        System.out.println(b);\n    }\n}\n</code></pre>\n<p>When run as <code>java Broken &lt; names.txt</code>\nprints</p>\n<pre><code>Enter Name: Bob\nEnter Name: Lisa\n</code></pre>\n"}],"owner":{"account_id":28445954,"reputation":13,"user_id":21764659,"display_name":"Siva"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76131712,"answer_count":1,"score":0,"last_activity_date":1682705004,"creation_date":1682690434,"question_id":76130348,"body_markdown":"Stdin redirect breaks with simple Java (20.0.1) program using Scanner on Mac.\r\n\r\nError: java.util.NoSuchElementException: No line found\r\n\r\n*Broken.java*\r\n\r\n``` lang-java\r\nimport java.util.Scanner;\r\nclass Broken {\r\n\tpublic static String getUserName() {\r\n\t\tScanner s = new Scanner(System.in);\r\n\t\tSystem.out.print(&quot;Enter Name: &quot;);\r\n\t\treturn s.nextLine();\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tString a = getUserName();\r\n\t\tString b = getUserName();\r\n\t}\r\n}\r\n```\r\n\r\n*names.txt*\r\n\r\n```\r\nBob\r\nLisa\r\n```\r\n\r\n*Bash Command Line*\r\n\r\n```\r\njavac Broken.java \r\njava Broken &lt; names.txt \r\n```\r\n\r\nThis shouldn&#39;t crash, but it does with a NoSuchElementException. I don&#39;t want to know other ways of solving this problem. I want to know why this fails. Is the stdin steam being closed by Scanner? What else could it be?","title":"Java Scanner and console input redirect","body":"<p>Stdin redirect breaks with simple Java (20.0.1) program using Scanner on Mac.</p>\n<p>Error: java.util.NoSuchElementException: No line found</p>\n<p><em>Broken.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\nclass Broken {\n    public static String getUserName() {\n        Scanner s = new Scanner(System.in);\n        System.out.print(&quot;Enter Name: &quot;);\n        return s.nextLine();\n    }\n    \n    public static void main(String[] args) {\n        String a = getUserName();\n        String b = getUserName();\n    }\n}\n</code></pre>\n<p><em>names.txt</em></p>\n<pre><code>Bob\nLisa\n</code></pre>\n<p><em>Bash Command Line</em></p>\n<pre><code>javac Broken.java \njava Broken &lt; names.txt \n</code></pre>\n<p>This shouldn't crash, but it does with a NoSuchElementException. I don't want to know other ways of solving this problem. I want to know why this fails. Is the stdin steam being closed by Scanner? What else could it be?</p>\n"},{"tags":["java","cucumber","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682704599,"creation_date":1682492256,"answer_id":76107955,"question_id":76106562,"body_markdown":"First thing is to make sure that you are using same version for below ,if you are using rest-assured of version `4.2.0` then you should keep all the related version for json-path ,rest-assured-common and  xml-path \r\n\r\n    rest-assured-4.2.0\r\n    json-path-4.2.0\r\n    xml-path-4.2.0\r\n    rest-assured-common- 4.2.0\r\n\r\nif it doesn&#39;t work Try to exclude the conflicting dependency by adding the exclusion tag in your pom.xml file. \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n        &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n        &lt;version&gt;${rest-assured.version}&lt;/version&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf this doesn&#39;t work then you need to run command `mvn dependency:tree`\r\nIt might be related to conflicting dependencies or different versions of dependencies, you can use the mvn dependency:tree command to generate a tree-like structure of all the dependencies required to build the project. This structure includes information about the group ID, artifact ID, and version of each dependency, as well as their transitive dependencies. By examining the output of this command, you can identify any conflicts or duplication of dependencies that might be causing the issue.\r\n\r\nYou can also see read detailed info [here][1]\r\n\r\n\r\n  [1]: https://www.digitalocean.com/community/tutorials/maven-dependency-tree-resolving-conflicts\r\n\r\nUpdated - Give this version a try\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n        &lt;artifactId&gt;rest-assured-all&lt;/artifactId&gt;\r\n        &lt;version&gt;5.3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"Getting &quot;NoSuchMethodError&quot; error when trying to set up restassured framework using cucumber bdd","body":"<p>First thing is to make sure that you are using same version for below ,if you are using rest-assured of version <code>4.2.0</code> then you should keep all the related version for json-path ,rest-assured-common and  xml-path</p>\n<pre><code>rest-assured-4.2.0\njson-path-4.2.0\nxml-path-4.2.0\nrest-assured-common- 4.2.0\n</code></pre>\n<p>if it doesn't work Try to exclude the conflicting dependency by adding the exclusion tag in your pom.xml file.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n    &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n    &lt;version&gt;${rest-assured.version}&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>If this doesn't work then you need to run command <code>mvn dependency:tree</code>\nIt might be related to conflicting dependencies or different versions of dependencies, you can use the mvn dependency:tree command to generate a tree-like structure of all the dependencies required to build the project. This structure includes information about the group ID, artifact ID, and version of each dependency, as well as their transitive dependencies. By examining the output of this command, you can identify any conflicts or duplication of dependencies that might be causing the issue.</p>\n<p>You can also see read detailed info <a href=\"https://www.digitalocean.com/community/tutorials/maven-dependency-tree-resolving-conflicts\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Updated - Give this version a try</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n    &lt;artifactId&gt;rest-assured-all&lt;/artifactId&gt;\n    &lt;version&gt;5.3.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":3506599,"reputation":357,"user_id":2932012,"accept_rate":35,"display_name":"nikhil udgirkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682704599,"creation_date":1682473105,"question_id":76106562,"body_markdown":"I am trying to setup API automation framework with rest-assured library and cucumber BDD. Previously I had setup but never encountered this error. I got this error\r\n\r\n    java.lang.NoSuchMethodError: &#39;boolean io.restassured.common.mapper.resolver.ObjectMapperResolver.isJakartaEEInClassPath()&#39;\r\n\r\nBelow is my code \r\n\r\n    public class ReqResApi implements AutoCloseable {\r\n    \r\n        private String baseUri;\r\n        private String basePath;\r\n        private static RequestSpecification requestSpecification;\r\n    \r\n        public ReqResApi(String baseUri, String basePath) {\r\n            this.baseUri = baseUri;\r\n            this.basePath = basePath;\r\n        }\r\n    \r\n        public RequestSpecification getRequestSpecification() {\r\n            return requestSpecification = new RequestSpecBuilder()\r\n                    .setBaseUri(baseUri)\r\n                    .setBasePath(basePath)\r\n                    .build();\r\n    \r\n        }\r\n    }\r\n\r\nAnd this is my step definition code\r\n\r\n    public class AssignmentDefinition {\r\n    \r\n        private HashMap&lt;String, String&gt; map;\r\n        private RequestSpecification requestSpecification;\r\n        private String baseUri;\r\n        private Response response;\r\n        private ReqResApi reqResApi;\r\n        private String endpoint;\r\n    \r\n        public AssignmentDefinition() {\r\n            this.baseUri = ReqResConstants.propertiesConfig.baseUri();\r\n            this.endpoint = ReqResConstants.propertiesConfig.endpoint();\r\n            reqResApi = new ReqResApi(this.baseUri, endpoint);\r\n        }\r\n    \r\n        @Given(&quot;user should be able to list users&quot;)\r\n        public void userShouldBeAbleToListUsers() {\r\n            response = given()\r\n                    .spec(reqResApi.getRequestSpecification())\r\n                    .when().get().then().statusCode(200).extract().response();\r\n    \r\n            System.out.println(response.getStatusLine());\r\n    \r\n        }\r\n    }\r\n\r\nThis is the first time I have received an error. Can anyone provide some pointers?\r\n","title":"Getting &quot;NoSuchMethodError&quot; error when trying to set up restassured framework using cucumber bdd","body":"<p>I am trying to setup API automation framework with rest-assured library and cucumber BDD. Previously I had setup but never encountered this error. I got this error</p>\n<pre><code>java.lang.NoSuchMethodError: 'boolean io.restassured.common.mapper.resolver.ObjectMapperResolver.isJakartaEEInClassPath()'\n</code></pre>\n<p>Below is my code</p>\n<pre><code>public class ReqResApi implements AutoCloseable {\n\n    private String baseUri;\n    private String basePath;\n    private static RequestSpecification requestSpecification;\n\n    public ReqResApi(String baseUri, String basePath) {\n        this.baseUri = baseUri;\n        this.basePath = basePath;\n    }\n\n    public RequestSpecification getRequestSpecification() {\n        return requestSpecification = new RequestSpecBuilder()\n                .setBaseUri(baseUri)\n                .setBasePath(basePath)\n                .build();\n\n    }\n}\n</code></pre>\n<p>And this is my step definition code</p>\n<pre><code>public class AssignmentDefinition {\n\n    private HashMap&lt;String, String&gt; map;\n    private RequestSpecification requestSpecification;\n    private String baseUri;\n    private Response response;\n    private ReqResApi reqResApi;\n    private String endpoint;\n\n    public AssignmentDefinition() {\n        this.baseUri = ReqResConstants.propertiesConfig.baseUri();\n        this.endpoint = ReqResConstants.propertiesConfig.endpoint();\n        reqResApi = new ReqResApi(this.baseUri, endpoint);\n    }\n\n    @Given(&quot;user should be able to list users&quot;)\n    public void userShouldBeAbleToListUsers() {\n        response = given()\n                .spec(reqResApi.getRequestSpecification())\n                .when().get().then().statusCode(200).extract().response();\n\n        System.out.println(response.getStatusLine());\n\n    }\n}\n</code></pre>\n<p>This is the first time I have received an error. Can anyone provide some pointers?</p>\n"},{"tags":["java","log4j2","java-11"],"comments":[{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1540828761,"post_id":53049346,"comment_id":92998435,"body_markdown":"anything that you&#39;ve observed changing from Java10 to Java11? Looks strange.","body":"anything that you&#39;ve observed changing from Java10 to Java11? Looks strange."},{"owner":{"account_id":9573991,"reputation":11925,"user_id":7110799,"accept_rate":87,"display_name":"Dmitriy Dumanskiy"},"score":0,"creation_date":1540828825,"post_id":53049346,"comment_id":92998482,"body_markdown":"I didn&#39;t change anything, same jar, same env., different JVMs.","body":"I didn&#39;t change anything, same jar, same env., different JVMs."},{"owner":{"account_id":35077,"reputation":28118,"user_id":99256,"accept_rate":89,"display_name":"MartyIX"},"score":0,"creation_date":1541149278,"post_id":53049346,"comment_id":93125270,"body_markdown":"@nullpointer I can see the same warning when running my app on JDK 11 (with 2.11.1 and 2.11.0). There is no warning on JDK 10. My project is large so it&#39;s hard to create a reproducible example.","body":"@nullpointer I can see the same warning when running my app on JDK 11 (with 2.11.1 and 2.11.0). There is no warning on JDK 10. My project is large so it&#39;s hard to create a reproducible example."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1548894014,"post_id":53049346,"comment_id":95711493,"body_markdown":"*&quot;Seems like this part is no longer work with Java 11.&quot;* - The warning doesn&#39;t say it is not working.  It says it is working ... slowly.","body":"<i>&quot;Seems like this part is no longer work with Java 11.&quot;</i> - The warning doesn&#39;t say it is not working.  It says it is working ... slowly."},{"owner":{"account_id":9573991,"reputation":11925,"user_id":7110799,"accept_rate":87,"display_name":"Dmitriy Dumanskiy"},"score":0,"creation_date":1548923371,"post_id":53049346,"comment_id":95720602,"body_markdown":"Yes, but those code is no longer works with Java 11.","body":"Yes, but those code is no longer works with Java 11."}],"answers":[{"tags":[],"owner":{"account_id":1891192,"reputation":8826,"user_id":1709216,"display_name":"rgoers"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1548891398,"creation_date":1548891398,"answer_id":54451212,"question_id":53049346,"body_markdown":"If you are getting this message then your application is not setup to use multi-release jars. Log4j supports Java 9+ by using Stackwalker in a version of StackLocator that is located in META-INF/versions/9. Depending on how your application works, you may need to  have Multi-Release set to true in the jar manifest. This is true for Spring Boot jars. Without multi-release support you will use the pre-Java 9 version of StackLocator which tries to use Reflection.getCallerClass(). That class was removed in Java 9. Log4j will fall back to a slower way to calculate stack locations but it will still work. Hence the warning.","title":"Is log4j2 compatible with Java 11?","body":"<p>If you are getting this message then your application is not setup to use multi-release jars. Log4j supports Java 9+ by using Stackwalker in a version of StackLocator that is located in META-INF/versions/9. Depending on how your application works, you may need to  have Multi-Release set to true in the jar manifest. This is true for Spring Boot jars. Without multi-release support you will use the pre-Java 9 version of StackLocator which tries to use Reflection.getCallerClass(). That class was removed in Java 9. Log4j will fall back to a slower way to calculate stack locations but it will still work. Hence the warning.</p>\n"},{"tags":[],"owner":{"account_id":1391655,"reputation":14169,"user_id":1432281,"display_name":"dadoonet"},"down_vote_count":0,"up_vote_count":88,"is_accepted":true,"score":88,"last_activity_date":1550249810,"creation_date":1550249810,"answer_id":54713830,"question_id":53049346,"body_markdown":"If someone is using Maven and is having the same issue while assembling a flat jar, here is what I did to fix the same issue:\r\n\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.2.1&lt;/version&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;shade&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n                &lt;transformers&gt;\r\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                        &lt;mainClass&gt;foo.bar.Generate&lt;/mainClass&gt;\r\n                        &lt;manifestEntries&gt;\r\n                            &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\r\n                        &lt;/manifestEntries&gt;\r\n                    &lt;/transformer&gt;\r\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n                &lt;/transformers&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nThe important part is `&lt;Multi-Release&gt;true&lt;/Multi-Release&gt;`.\r\n\r\nNote that the Java code I&#39;m using now to change loggers level is:\r\n\r\n```\r\nConfigurator.setAllLevels(&quot;foo.bar&quot;, Level.DEBUG);\r\n```\r\n","title":"Is log4j2 compatible with Java 11?","body":"<p>If someone is using Maven and is having the same issue while assembling a flat jar, here is what I did to fix the same issue:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;transformers&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt;\n                        &lt;mainClass&gt;foo.bar.Generate&lt;/mainClass&gt;\n                        &lt;manifestEntries&gt;\n                            &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\n                        &lt;/manifestEntries&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"/&gt;\n                &lt;/transformers&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>The important part is <code>&lt;Multi-Release&gt;true&lt;/Multi-Release&gt;</code>.</p>\n\n<p>Note that the Java code I'm using now to change loggers level is:</p>\n\n<pre><code>Configurator.setAllLevels(\"foo.bar\", Level.DEBUG);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15853174,"reputation":71,"user_id":11438407,"display_name":"Damien"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1556735220,"creation_date":1556735220,"answer_id":55940859,"question_id":53049346,"body_markdown":"&gt; Seems like this part is no longer work with Java 11.\r\n\r\nI ran into the same problem with programmatically updating LogLevel settings using the LoggerContext after upgrading to JDK 11 from JDK 8. If the ```LogManager.getContext(boolean)``` can&#39;t find the LoggerContext it will create and return a new instance  changing that new object will have no effect. Specifying the classloader of Log4j&#39;s LogManager class fixed the issue in our case:\r\n\r\n```\r\nLoggerContext ctx = (LoggerContext) LogManager.getContext(LogManager.class.getClassLoader(), false);\r\n```\r\n","title":"Is log4j2 compatible with Java 11?","body":"<blockquote>\n  <p>Seems like this part is no longer work with Java 11.</p>\n</blockquote>\n\n<p>I ran into the same problem with programmatically updating LogLevel settings using the LoggerContext after upgrading to JDK 11 from JDK 8. If the <code>LogManager.getContext(boolean)</code> can't find the LoggerContext it will create and return a new instance  changing that new object will have no effect. Specifying the classloader of Log4j's LogManager class fixed the issue in our case:</p>\n\n<pre><code>LoggerContext ctx = (LoggerContext) LogManager.getContext(LogManager.class.getClassLoader(), false);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10370797,"reputation":361,"user_id":7919834,"display_name":"Svante Schubert"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1566507143,"creation_date":1566507143,"answer_id":57616897,"question_id":53049346,"body_markdown":"Log4J2 is of course compatible it uses the [JDK Multi-Release feature][1] or in [more detail][2].\r\n\r\n\r\nBUT...\r\n\r\n1) First, when you are using - like me - the slf4j interface, you need to use a different Maven artefact, see http://logging.apache.org/log4j/2.x/log4j-slf4j-impl/index.html\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;log4j-slf4j18-impl&lt;/artifactId&gt;\r\n    &lt;version&gt;2.12.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nwhich adds all dependencies as &#39;mvn dependency:tree&#39; reveals:\r\n\r\n    \\- org.apache.logging.log4j:log4j-slf4j18-impl:jar:2.12.1:compile\r\n    [INFO] +- org.slf4j:slf4j-api:jar:1.8.0-alpha2:compile\r\n    [INFO] +- org.apache.logging.log4j:log4j-api:jar:2.12.1:compile\r\n    [INFO] \\- org.apache.logging.log4j:log4j-core:jar:2.12.1:runtime\r\n\r\n2) And second, when you are creating - like me - one single JAR, which includes all dependencies, you need to add the Multi-Release manifest entry as well, see https://issues.apache.org/jira/browse/LOG4J2-2537\r\nor in my project&#39;s [pom.xml][3] and search for\r\n\r\n    &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\r\n\r\n\r\n  [1]: https://openjdk.java.net/jeps/238\r\n  [2]: https://blog.codefx.org/tools/multi-release-jars-multiple-java-versions/\r\n  [3]: https://github.com/svanteschubert/en16931-data-extractor/blob/master/en16931-3-reader/pom.xml","title":"Is log4j2 compatible with Java 11?","body":"<p>Log4J2 is of course compatible it uses the <a href=\"https://openjdk.java.net/jeps/238\" rel=\"noreferrer\">JDK Multi-Release feature</a> or in <a href=\"https://blog.codefx.org/tools/multi-release-jars-multiple-java-versions/\" rel=\"noreferrer\">more detail</a>.</p>\n\n<p>BUT...</p>\n\n<p>1) First, when you are using - like me - the slf4j interface, you need to use a different Maven artefact, see <a href=\"http://logging.apache.org/log4j/2.x/log4j-slf4j-impl/index.html\" rel=\"noreferrer\">http://logging.apache.org/log4j/2.x/log4j-slf4j-impl/index.html</a></p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n&lt;artifactId&gt;log4j-slf4j18-impl&lt;/artifactId&gt;\n&lt;version&gt;2.12.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>which adds all dependencies as 'mvn dependency:tree' reveals:</p>\n\n<pre><code>\\- org.apache.logging.log4j:log4j-slf4j18-impl:jar:2.12.1:compile\n[INFO] +- org.slf4j:slf4j-api:jar:1.8.0-alpha2:compile\n[INFO] +- org.apache.logging.log4j:log4j-api:jar:2.12.1:compile\n[INFO] \\- org.apache.logging.log4j:log4j-core:jar:2.12.1:runtime\n</code></pre>\n\n<p>2) And second, when you are creating - like me - one single JAR, which includes all dependencies, you need to add the Multi-Release manifest entry as well, see <a href=\"https://issues.apache.org/jira/browse/LOG4J2-2537\" rel=\"noreferrer\">https://issues.apache.org/jira/browse/LOG4J2-2537</a>\nor in my project's <a href=\"https://github.com/svanteschubert/en16931-data-extractor/blob/master/en16931-3-reader/pom.xml\" rel=\"noreferrer\">pom.xml</a> and search for</p>\n\n<pre><code>&lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2455794,"reputation":1764,"user_id":2141064,"display_name":"Lorinczy Zsigmond"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1583732593,"creation_date":1583732593,"answer_id":60595238,"question_id":53049346,"body_markdown":"This message comes from `org/apache/logging/log4j/util/StackLocator.&lt;classconstructor&gt;` which is part of `log4j2-api.jar` (or `log4j-api-2.x.y.jar` etc).\r\n\r\nYou get this message because some smart guys decided  `sun.reflect.Reflection.getCallerClass` has to be removed from JRE (guess they pulled a page from Herostratus&#39;s book or something). This actually happened in Openjdk11.\r\n\r\nMind you, you shouldn&#39;t get this message if you have a not-too-old version of `log4j2-api.jar`, as it is a [multi-release-jar][1] meaning it contains another implementation of this class for Java9+ (`META-INF/versions/9/org/apache/logging/log4j/util/StackLocator.class`) which doesn&#39;t give this message.\r\n\r\nBut, if you use some Helping Product(TM), such as Spring Boot, that has its own classloader, it might not be multi-relase-jar compatible, so it loads the Java8 compatible `StackLocator.class` instead of the Java9+ compatible, and you still get this message.\r\n\r\n  [1]: https://openjdk.java.net/jeps/238","title":"Is log4j2 compatible with Java 11?","body":"<p>This message comes from <code>org/apache/logging/log4j/util/StackLocator.&lt;classconstructor&gt;</code> which is part of <code>log4j2-api.jar</code> (or <code>log4j-api-2.x.y.jar</code> etc).</p>\n\n<p>You get this message because some smart guys decided  <code>sun.reflect.Reflection.getCallerClass</code> has to be removed from JRE (guess they pulled a page from Herostratus's book or something). This actually happened in Openjdk11.</p>\n\n<p>Mind you, you shouldn't get this message if you have a not-too-old version of <code>log4j2-api.jar</code>, as it is a <a href=\"https://openjdk.java.net/jeps/238\" rel=\"noreferrer\">multi-release-jar</a> meaning it contains another implementation of this class for Java9+ (<code>META-INF/versions/9/org/apache/logging/log4j/util/StackLocator.class</code>) which doesn't give this message.</p>\n\n<p>But, if you use some Helping Product(TM), such as Spring Boot, that has its own classloader, it might not be multi-relase-jar compatible, so it loads the Java8 compatible <code>StackLocator.class</code> instead of the Java9+ compatible, and you still get this message.</p>\n"},{"tags":[],"owner":{"account_id":28447087,"reputation":11,"user_id":21765670,"display_name":"Jonathan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682704234,"creation_date":1682703076,"answer_id":76131961,"question_id":53049346,"body_markdown":"Similar problem with Java 17.  I&#39;ve tried several solutions above (editing pom.xml to include manifestEntries tags, log4j.xml, etc) with no success in creating a runnable JAR from within Eclipse without the error.  The POM for whatever reason would not create the multi-release tag inside the ANT build script.  \r\n\r\nThe workarounds were to either select &quot;Copy required libraries into a sub-folder next to the generated JAR&quot; or, \r\n\r\n&quot;Extract required libraries into generated JAR&quot; and choose the &quot;Save as ANT script&quot; option into the project. Edit the script by adding the Multi-Release attribute to the manifest tag: \r\n\r\n    &lt;manifest&gt;\r\n       ...\r\n       &lt;attribute name=&quot;Multi-Release&quot; value=&quot;true&quot;/&gt;\r\n    &lt;/manifest&gt;\r\n\r\nWithin Eclipse, right-click the updated script and select Run-As ANT-build.  The new runnable JAR worked after that. ","title":"Is log4j2 compatible with Java 11?","body":"<p>Similar problem with Java 17.  I've tried several solutions above (editing pom.xml to include manifestEntries tags, log4j.xml, etc) with no success in creating a runnable JAR from within Eclipse without the error.  The POM for whatever reason would not create the multi-release tag inside the ANT build script.</p>\n<p>The workarounds were to either select &quot;Copy required libraries into a sub-folder next to the generated JAR&quot; or,</p>\n<p>&quot;Extract required libraries into generated JAR&quot; and choose the &quot;Save as ANT script&quot; option into the project. Edit the script by adding the Multi-Release attribute to the manifest tag:</p>\n<pre><code>&lt;manifest&gt;\n   ...\n   &lt;attribute name=&quot;Multi-Release&quot; value=&quot;true&quot;/&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>Within Eclipse, right-click the updated script and select Run-As ANT-build.  The new runnable JAR worked after that.</p>\n"}],"owner":{"account_id":9573991,"reputation":11925,"user_id":7110799,"accept_rate":87,"display_name":"Dmitriy Dumanskiy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60836,"favorite_count":0,"down_vote_count":0,"up_vote_count":76,"accepted_answer_id":54713830,"answer_count":6,"score":76,"last_activity_date":1682704234,"creation_date":1540828635,"question_id":53049346,"body_markdown":"I tried to run my project on the latest Java 11. Everything works, except the specific file logger. Logging works fine on previous Java versions - 10, 9, 8, but not on Java 11.\r\n\r\nDuring server run I see only 1 warning:\r\n\r\n&gt; WARNING: sun.reflect.Reflection.getCallerClass is not supported. This\r\n&gt; will impact performance.\r\n\r\nHere is my configuration:\r\n\r\n    &lt;Configuration&gt;\r\n    \r\n        &lt;Appenders&gt;\r\n    \r\n            &lt;RollingFile name=&quot;postgresDBLog&quot; fileName=&quot;${sys:logs.folder}/postgres.log&quot;\r\n                  filePattern=&quot;${sys:logs.folder}/archive/postgres.log.%d{yyyy-MM-dd}&quot;&gt;\r\n                &lt;PatternLayout&gt;\r\n                    &lt;pattern&gt;%d{HH:mm:ss.SSS} - %msg%n&lt;/pattern&gt;\r\n                &lt;/PatternLayout&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy/&gt;\r\n                &lt;/Policies&gt;\r\n            &lt;/RollingFile&gt;\r\n    \r\n            &lt;RollingFile name=&quot;workersLog&quot; fileName=&quot;${sys:logs.folder}/worker.log&quot;\r\n                         filePattern=&quot;${sys:logs.folder}/archive/worker.log.%d{yyyy-MM-dd}&quot;&gt;\r\n                &lt;PatternLayout&gt;\r\n                    &lt;pattern&gt;%d{HH:mm:ss.SSS} - %msg%n&lt;/pattern&gt;\r\n                &lt;/PatternLayout&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy/&gt;\r\n                &lt;/Policies&gt;\r\n            &lt;/RollingFile&gt;\r\n    \r\n            &lt;RollingFile name=&quot;statsLog&quot; fileName=&quot;${sys:logs.folder}/stats.log&quot;\r\n                         filePattern=&quot;${sys:logs.folder}/archive/stats.log.%d{yyyy-MM-dd}&quot;&gt;\r\n                &lt;PatternLayout&gt;\r\n                    &lt;pattern&gt;%msg%n&lt;/pattern&gt;\r\n                &lt;/PatternLayout&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy/&gt;\r\n                &lt;/Policies&gt;\r\n            &lt;/RollingFile&gt;\r\n    \r\n            &lt;RollingFile name=&quot;userLog&quot; fileName=&quot;${sys:logs.folder}/blynk.log&quot;\r\n                         filePattern=&quot;${sys:logs.folder}/archive/blynk.log.%d{yyyy-MM-dd}&quot;&gt;\r\n                &lt;PatternLayout&gt;\r\n                    &lt;pattern&gt;%d{HH:mm:ss.SSS} %-5level- %msg%n&lt;/pattern&gt;\r\n                &lt;/PatternLayout&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy/&gt;\r\n                &lt;/Policies&gt;\r\n            &lt;/RollingFile&gt;\r\n    \r\n        &lt;/Appenders&gt;\r\n    \r\n        &lt;Loggers&gt;\r\n    \r\n            &lt;Logger name=&quot;cc.blynk.server.workers&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;\r\n                &lt;appender-ref ref=&quot;workersLog&quot;/&gt;\r\n            &lt;/Logger&gt;\r\n            &lt;Logger name=&quot;cc.blynk.server.workers.StatsWorker&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;\r\n                &lt;appender-ref ref=&quot;statsLog&quot;/&gt;\r\n            &lt;/Logger&gt;\r\n            &lt;Logger name=&quot;cc.blynk.server.db&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;\r\n                &lt;appender-ref ref=&quot;postgresDBLog&quot;/&gt;\r\n            &lt;/Logger&gt;\r\n            &lt;Logger name=&quot;com.zaxxer.hikari&quot; level=&quot;OFF&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;/Logger&gt;\r\n    \r\n            &lt;Logger name=&quot;org.asynchttpclient.netty.channel&quot; level=&quot;OFF&quot; additivity=&quot;false&quot; /&gt;\r\n    \r\n            &lt;!-- turn off netty errors in debug mode for native library loading\r\n             https://github.com/blynkkk/blynk-server/issues/751 --&gt;\r\n            &lt;Logger name=&quot;io.netty&quot; level=&quot;INFO&quot; additivity=&quot;false&quot; /&gt;\r\n    \r\n            &lt;Root&gt;\r\n                &lt;AppenderRef ref=&quot;userLog&quot;/&gt;\r\n            &lt;/Root&gt;\r\n    \r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nAll loggers, except `userLog` works fine. However, `userLog` is empty.\r\n\r\n    log4j2 version 2.11.1\r\n\r\n    Ubuntu 16.04.5 LTS\r\n\r\n    java version &quot;11.0.1&quot; 2018-10-16 LTS\r\n    Java(TM) SE Runtime Environment 18.9 (build 11.0.1+13-LTS)\r\n    Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode)\r\n\r\n**Update:**\r\n\r\nAdding `level=&quot;info&quot;` to the root level fixes the issue.\r\n\r\n        &lt;Root level=&quot;info&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;userLog&quot;/&gt;\r\n        &lt;/Root&gt;\r\n\r\nHowever, in my project I was using a code that was setting a log level based on properties file. Here is a code:\r\n\r\n    private static void changeLogLevel(String level) {\r\n        Level newLevel = Level.valueOf(level);\r\n        LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\r\n        Configuration conf = ctx.getConfiguration();\r\n        conf.getLoggerConfig(LogManager.ROOT_LOGGER_NAME).setLevel(newLevel);\r\n        ctx.updateLoggers(conf);\r\n    }\r\n\r\nSeems like this part is no longer work with Java 11.\r\n\r\n","title":"Is log4j2 compatible with Java 11?","body":"<p>I tried to run my project on the latest Java 11. Everything works, except the specific file logger. Logging works fine on previous Java versions - 10, 9, 8, but not on Java 11.</p>\n\n<p>During server run I see only 1 warning:</p>\n\n<blockquote>\n  <p>WARNING: sun.reflect.Reflection.getCallerClass is not supported. This\n  will impact performance.</p>\n</blockquote>\n\n<p>Here is my configuration:</p>\n\n<pre><code>&lt;Configuration&gt;\n\n    &lt;Appenders&gt;\n\n        &lt;RollingFile name=\"postgresDBLog\" fileName=\"${sys:logs.folder}/postgres.log\"\n              filePattern=\"${sys:logs.folder}/archive/postgres.log.%d{yyyy-MM-dd}\"&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} - %msg%n&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n\n        &lt;RollingFile name=\"workersLog\" fileName=\"${sys:logs.folder}/worker.log\"\n                     filePattern=\"${sys:logs.folder}/archive/worker.log.%d{yyyy-MM-dd}\"&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} - %msg%n&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n\n        &lt;RollingFile name=\"statsLog\" fileName=\"${sys:logs.folder}/stats.log\"\n                     filePattern=\"${sys:logs.folder}/archive/stats.log.%d{yyyy-MM-dd}\"&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;%msg%n&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n\n        &lt;RollingFile name=\"userLog\" fileName=\"${sys:logs.folder}/blynk.log\"\n                     filePattern=\"${sys:logs.folder}/archive/blynk.log.%d{yyyy-MM-dd}\"&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} %-5level- %msg%n&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n\n        &lt;Logger name=\"cc.blynk.server.workers\" level=\"debug\" additivity=\"false\"&gt;\n            &lt;appender-ref ref=\"workersLog\"/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=\"cc.blynk.server.workers.StatsWorker\" level=\"debug\" additivity=\"false\"&gt;\n            &lt;appender-ref ref=\"statsLog\"/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=\"cc.blynk.server.db\" level=\"debug\" additivity=\"false\"&gt;\n            &lt;appender-ref ref=\"postgresDBLog\"/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=\"com.zaxxer.hikari\" level=\"OFF\" additivity=\"false\"&gt;\n        &lt;/Logger&gt;\n\n        &lt;Logger name=\"org.asynchttpclient.netty.channel\" level=\"OFF\" additivity=\"false\" /&gt;\n\n        &lt;!-- turn off netty errors in debug mode for native library loading\n         https://github.com/blynkkk/blynk-server/issues/751 --&gt;\n        &lt;Logger name=\"io.netty\" level=\"INFO\" additivity=\"false\" /&gt;\n\n        &lt;Root&gt;\n            &lt;AppenderRef ref=\"userLog\"/&gt;\n        &lt;/Root&gt;\n\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n\n<p>All loggers, except <code>userLog</code> works fine. However, <code>userLog</code> is empty.</p>\n\n<pre><code>log4j2 version 2.11.1\n\nUbuntu 16.04.5 LTS\n\njava version \"11.0.1\" 2018-10-16 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.1+13-LTS)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode)\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>Adding <code>level=\"info\"</code> to the root level fixes the issue.</p>\n\n<pre><code>    &lt;Root level=\"info\"&gt;\n        &lt;AppenderRef ref=\"userLog\"/&gt;\n    &lt;/Root&gt;\n</code></pre>\n\n<p>However, in my project I was using a code that was setting a log level based on properties file. Here is a code:</p>\n\n<pre><code>private static void changeLogLevel(String level) {\n    Level newLevel = Level.valueOf(level);\n    LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\n    Configuration conf = ctx.getConfiguration();\n    conf.getLoggerConfig(LogManager.ROOT_LOGGER_NAME).setLevel(newLevel);\n    ctx.updateLoggers(conf);\n}\n</code></pre>\n\n<p>Seems like this part is no longer work with Java 11.</p>\n"},{"tags":["java","android","fm-radio"],"answers":[{"tags":[],"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384336522,"creation_date":1384336522,"answer_id":19950607,"question_id":19950469,"body_markdown":"The Android device can communicate with the FM transmitter via the USB. See [USB Host Documentation][1].\r\n\r\nAnother alternative is to connect the FM transmitter to a micro-controller, or a ready kit like Arduino, which is also connected to a Wi-Fi or Bluetooth module, then communication would be occurred through that channel.\r\n\r\n\r\n  [1]: http://developer.android.com/guide/topics/connectivity/usb/host.html","title":"Transmit FM via android","body":"<p>The Android device can communicate with the FM transmitter via the USB. See <a href=\"http://developer.android.com/guide/topics/connectivity/usb/host.html\" rel=\"nofollow\">USB Host Documentation</a>.</p>\n\n<p>Another alternative is to connect the FM transmitter to a micro-controller, or a ready kit like Arduino, which is also connected to a Wi-Fi or Bluetooth module, then communication would be occurred through that channel.</p>\n"}],"owner":{"account_id":933648,"reputation":153,"user_id":963005,"accept_rate":25,"display_name":"Asaf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":696,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1384347249,"answer_count":1,"score":2,"last_activity_date":1682703869,"creation_date":1384336135,"question_id":19950469,"body_markdown":"I want to buy FM transmitter such as &lt;a href=&quot;http://www.ebay.com/itm/New-Portable-Car-FM-Radio-Transmitter-For-iPhone-4-5-Samsung-Galaxy-S-2-3-II-III-/261300615584&quot;&gt;this one&lt;/a&gt;. Is it possible to communicate with the transmitter from Android device using Android API? change freq. etc.\r\n\r\nIf not - Is there any FM hardware that can communicate with android API? \r\nThanks.","title":"Transmit FM via android","body":"<p>I want to buy FM transmitter such as <a href=\"http://www.ebay.com/itm/New-Portable-Car-FM-Radio-Transmitter-For-iPhone-4-5-Samsung-Galaxy-S-2-3-II-III-/261300615584\" rel=\"nofollow\">this one</a>. Is it possible to communicate with the transmitter from Android device using Android API? change freq. etc.</p>\n\n<p>If not - Is there any FM hardware that can communicate with android API? \nThanks.</p>\n"},{"tags":["java","jsp","session","radio-button","struts2"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1401005828,"post_id":23848618,"comment_id":36710199,"body_markdown":"Why do you need to set this variable?","body":"Why do you need to set this variable?"},{"owner":{"account_id":3737960,"reputation":109,"user_id":3108460,"accept_rate":25,"display_name":"Abhishek Raj"},"score":0,"creation_date":1401008830,"post_id":23848618,"comment_id":36710871,"body_markdown":"There are set of `questions` like ques1, ques2, ques3 and so on..as given above.  \nSo I need to keep the `answers` in session, so as to evaluate and calculate the marks(how many of them are `right`) at the end based on these `answers`.","body":"There are set of <code>questions</code> like ques1, ques2, ques3 and so on..as given above.   So I need to keep the <code>answers</code> in session, so as to evaluate and calculate the marks(how many of them are <code>right</code>) at the end based on these <code>answers</code>."},{"owner":{"account_id":3737960,"reputation":109,"user_id":3108460,"accept_rate":25,"display_name":"Abhishek Raj"},"score":0,"creation_date":1401009396,"post_id":23848618,"comment_id":36711003,"body_markdown":"I know that I can set these answer values using `getModel()` of `ModelDriven` interface, but I want to set these values on jsp itself.\nI can also use jstl tags **&lt;c:set var=&quot;ans_submit&quot; value=&quot;${param.ans1}&quot; scope=&quot;session&quot;/&gt;**. But it can be set only after submit button is pressed and that too on the next jsp page. `I want to set the value of this variable as soon as one changes the option immediately`.","body":"I know that I can set these answer values using <code>getModel()</code> of <code>ModelDriven</code> interface, but I want to set these values on jsp itself. I can also use jstl tags <b>&lt;c:set var=&quot;ans_submit&quot; value=&quot;${param.ans1}&quot; scope=&quot;session&quot;/&gt;</b>. But it can be set only after submit button is pressed and that too on the next jsp page. <code>I want to set the value of this variable as soon as one changes the option immediately</code>."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1401009777,"post_id":23848618,"comment_id":36711095,"body_markdown":"What do you mean by immediately? Do you submit the value as soon as one changes the option?","body":"What do you mean by immediately? Do you submit the value as soon as one changes the option?"},{"owner":{"account_id":3737960,"reputation":109,"user_id":3108460,"accept_rate":25,"display_name":"Abhishek Raj"},"score":0,"creation_date":1401010203,"post_id":23848618,"comment_id":36711199,"body_markdown":"I want to give back button functionality.\nSo when the back button is pressed, the question moves to previous page and when one wants to change the previous answer, he can do this only by changing the option. And This `change of option` should reflect in my session variable.","body":"I want to give back button functionality. So when the back button is pressed, the question moves to previous page and when one wants to change the previous answer, he can do this only by changing the option. And This <code>change of option</code> should reflect in my session variable."}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401012025,"creation_date":1401012025,"answer_id":23854112,"question_id":23848618,"body_markdown":"Use a map to populate a radio tag. \r\n\r\n    &lt;s:radio name=&quot;ans1&quot; list=&quot;#{&#39;option1&#39;: &#39;1. &#39;,&#39;option2&#39;: &#39;2. &#39;,&#39;option3&#39;: &#39;3. &#39;,&#39;option4&#39;: &#39;4. &#39;}&quot; /&gt;\r\n\r\nIn the action class you should have a property for `ans1` where the value would be set when you submit the form. This property is local to the action instance which is created every time when you make a new request. So, you need to save the value in the session.\r\n\r\n    session.put(&quot;ans1&quot;, ans1);  \r\n\r\nNow to retrieve this value from session in another action you can initialize the `ans1` property\r\n\r\n    ans1 = (String) session.get(&quot;ans1&quot;);\r\n\r\nor you can preset the value in the radio tag using a `value` attribute.\r\n\r\n    &lt;s:radio name=&quot;ans1&quot; list=&quot;#{&#39;option1&#39;: &#39;1. &#39;,&#39;option2&#39;: &#39;2. &#39;,&#39;option3&#39;: &#39;3. &#39;,&#39;option4&#39;: &#39;4. &#39;}&quot; value=&quot;%{#session.ans1}&quot;/&gt;\r\n","title":"How to assign value of &lt;s:radio&gt; to another variable using &lt;s:set&gt; in struts2","body":"<p>Use a map to populate a radio tag. </p>\n\n<pre><code>&lt;s:radio name=\"ans1\" list=\"#{'option1': '1. ','option2': '2. ','option3': '3. ','option4': '4. '}\" /&gt;\n</code></pre>\n\n<p>In the action class you should have a property for <code>ans1</code> where the value would be set when you submit the form. This property is local to the action instance which is created every time when you make a new request. So, you need to save the value in the session.</p>\n\n<pre><code>session.put(\"ans1\", ans1);  \n</code></pre>\n\n<p>Now to retrieve this value from session in another action you can initialize the <code>ans1</code> property</p>\n\n<pre><code>ans1 = (String) session.get(\"ans1\");\n</code></pre>\n\n<p>or you can preset the value in the radio tag using a <code>value</code> attribute.</p>\n\n<pre><code>&lt;s:radio name=\"ans1\" list=\"#{'option1': '1. ','option2': '2. ','option3': '3. ','option4': '4. '}\" value=\"%{#session.ans1}\"/&gt;\n</code></pre>\n"}],"owner":{"account_id":3737960,"reputation":109,"user_id":3108460,"accept_rate":25,"display_name":"Abhishek Raj"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":770,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682703630,"creation_date":1400957999,"question_id":23848618,"body_markdown":"I&#39;m trying to assign the value of radio button `ans1` to another variable `ans_submit`.\r\n\r\n    &lt;s:form action=&quot;ques2&quot; namespace=&quot;/questions&quot; theme=&quot;simple&quot;&gt;\r\n\r\n        Question 1: &lt;s:property value=&quot;#session.ques1.question&quot;/&gt;&lt;br/&gt;&lt;br/&gt;\r\n\r\n    &lt;s:radio list=&quot;#session.ques1.option1&quot; name=&quot;ans1&quot; value=&quot;%{&#39;option1&#39;}&quot; label=&quot;1. &quot;/&gt;&lt;br/&gt;\r\n    &lt;s:radio list=&quot;#session.ques1.option2&quot; name=&quot;ans1&quot; value=&quot;%{&#39;option2&#39;}&quot; label=&quot;2. &quot;/&gt;&lt;br/&gt;\r\n    &lt;s:radio list=&quot;#session.ques1.option3&quot; name=&quot;ans1&quot; value=&quot;%{&#39;option3&#39;}&quot; label=&quot;3. &quot;/&gt;&lt;br/&gt;\r\n    &lt;s:radio list=&quot;#session.ques1.option4&quot; name=&quot;ans1&quot; value=&quot;%{&#39;option4&#39;}&quot; label=&quot;4. &quot;/&gt;&lt;br/&gt;\r\n\r\n        &lt;s:submit name=&quot;submit&quot; value=&quot; Next&quot;/&gt;\r\n    \r\n    &lt;/s:form&gt;\r\n\r\n    &lt;s:set var=&quot;ans_submit&quot; value=&quot;%{#ans1}&quot; scope=&quot;session&quot; /&gt;\r\n    \r\nBut when I retrieve `ans_submit` in action class, it is giving `null`.  \r\nI have to keep `&lt;s:set&gt;` tag outside of `&lt;s:form&gt;` tag. Because there is no variable defined as such in my model.\r\nI don&#39;t want to use javascript!","title":"How to assign value of &lt;s:radio&gt; to another variable using &lt;s:set&gt; in struts2","body":"<p>I'm trying to assign the value of radio button <code>ans1</code> to another variable <code>ans_submit</code>.</p>\n\n<pre><code>&lt;s:form action=\"ques2\" namespace=\"/questions\" theme=\"simple\"&gt;\n\n    Question 1: &lt;s:property value=\"#session.ques1.question\"/&gt;&lt;br/&gt;&lt;br/&gt;\n\n&lt;s:radio list=\"#session.ques1.option1\" name=\"ans1\" value=\"%{'option1'}\" label=\"1. \"/&gt;&lt;br/&gt;\n&lt;s:radio list=\"#session.ques1.option2\" name=\"ans1\" value=\"%{'option2'}\" label=\"2. \"/&gt;&lt;br/&gt;\n&lt;s:radio list=\"#session.ques1.option3\" name=\"ans1\" value=\"%{'option3'}\" label=\"3. \"/&gt;&lt;br/&gt;\n&lt;s:radio list=\"#session.ques1.option4\" name=\"ans1\" value=\"%{'option4'}\" label=\"4. \"/&gt;&lt;br/&gt;\n\n    &lt;s:submit name=\"submit\" value=\" Next\"/&gt;\n\n&lt;/s:form&gt;\n\n&lt;s:set var=\"ans_submit\" value=\"%{#ans1}\" scope=\"session\" /&gt;\n</code></pre>\n\n<p>But when I retrieve <code>ans_submit</code> in action class, it is giving <code>null</code>.<br>\nI have to keep <code>&lt;s:set&gt;</code> tag outside of <code>&lt;s:form&gt;</code> tag. Because there is no variable defined as such in my model.\nI don't want to use javascript!</p>\n"},{"tags":["java","android","fm-radio"],"answers":[{"tags":[],"owner":{"account_id":351236,"reputation":10182,"user_id":687572,"display_name":"Jim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416385761,"creation_date":1416385761,"answer_id":27012110,"question_id":27011688,"body_markdown":"The &quot;radio&quot; on a phone is not the same as &quot;broadcast radio&quot; or what most people simply refer to as &quot;radio&quot;. Radio is band of frequencies that is regulated by different nations for different purposes. Cellular &quot;radio&quot; is actually a similar band as UHF TV, WiFi and Bluetooth (http://en.wikipedia.org/wiki/Cellular_frequencies) These are 800MHz to about 5 GHz.\r\n\r\nAM/FM Radio frequencies are not even close. \r\n\r\nFM operates at about 60-90MHz (http://en.wikipedia.org/wiki/FM_broadcasting)\r\n\r\nAM operates at about 150 - 1600 kHz or 0.15 - 1.6 MHz (http://en.wikipedia.org/wiki/AM_broadcasting) although &quot;short wave radio&quot; operates at lightly higher frequencies.\r\n\r\nIn other words, the &quot;radio&quot; on an Android device (or cellular phone) doesn&#39;t detect the &quot;radio&quot; that you tune into with a car or home stereo/radio system. They both use a form of light called &quot;radio&quot; but it&#39;s like using blue shaded glasses to see red light - it doesn&#39;t work. (Like the old 3D glasses, they are colored so you can only see certain wavelengths.)","title":"Radio app For Android","body":"<p>The \"radio\" on a phone is not the same as \"broadcast radio\" or what most people simply refer to as \"radio\". Radio is band of frequencies that is regulated by different nations for different purposes. Cellular \"radio\" is actually a similar band as UHF TV, WiFi and Bluetooth (<a href=\"http://en.wikipedia.org/wiki/Cellular_frequencies\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Cellular_frequencies</a>) These are 800MHz to about 5 GHz.</p>\n\n<p>AM/FM Radio frequencies are not even close. </p>\n\n<p>FM operates at about 60-90MHz (<a href=\"http://en.wikipedia.org/wiki/FM_broadcasting\" rel=\"nofollow\">http://en.wikipedia.org/wiki/FM_broadcasting</a>)</p>\n\n<p>AM operates at about 150 - 1600 kHz or 0.15 - 1.6 MHz (<a href=\"http://en.wikipedia.org/wiki/AM_broadcasting\" rel=\"nofollow\">http://en.wikipedia.org/wiki/AM_broadcasting</a>) although \"short wave radio\" operates at lightly higher frequencies.</p>\n\n<p>In other words, the \"radio\" on an Android device (or cellular phone) doesn't detect the \"radio\" that you tune into with a car or home stereo/radio system. They both use a form of light called \"radio\" but it's like using blue shaded glasses to see red light - it doesn't work. (Like the old 3D glasses, they are colored so you can only see certain wavelengths.)</p>\n"}],"owner":{"account_id":4967386,"reputation":1,"user_id":3996222,"display_name":"venkatesh waran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":523,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1416385898,"answer_count":1,"score":-2,"last_activity_date":1682703487,"creation_date":1416383866,"question_id":27011688,"body_markdown":"Am trying to develop Android application for radio app without streaming process. which means i would like to bring all fm frequency into my app where users can search frequency and can listen to their fav radio. so is it possible to bring radio app into my app ","title":"Radio app For Android","body":"<p>Am trying to develop Android application for radio app without streaming process. which means i would like to bring all fm frequency into my app where users can search frequency and can listen to their fav radio. so is it possible to bring radio app into my app </p>\n"},{"tags":["java","spring","postgresql","spring-boot","jdbctemplate"],"comments":[{"owner":{"account_id":16499925,"reputation":1286,"user_id":11921495,"display_name":"Sanket Singh"},"score":0,"creation_date":1682702879,"post_id":76131901,"comment_id":134262683,"body_markdown":"Could you please add some code snippets to analyse?","body":"Could you please add some code snippets to analyse?"},{"owner":{"account_id":20101747,"reputation":1,"user_id":14740068,"display_name":"qwoke"},"score":0,"creation_date":1682703463,"post_id":76131901,"comment_id":134262789,"body_markdown":"@SanketSingh, added some more info","body":"@SanketSingh, added some more info"}],"owner":{"account_id":20101747,"reputation":1,"user_id":14740068,"display_name":"qwoke"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682703441,"creation_date":1682702522,"question_id":76131901,"body_markdown":"I have spring application where I&#39;m using JdbcTemplate to perform sql queries to Postgres. I need to execute several sql statements in a row and some of the statements (randomly) make jdbcTemplate method hangs for about 30 minutes (sql return ~90 rows and executes in DBeaver for 1 sec).\r\n\r\nWhy this happens? Why Connection works fine and jdbcTemplate not?\r\n\r\nI&#39;m using such construction:\r\n\r\n```\r\ntransactionTemplate.executeWithoutResult {\r\n    try {\r\n        jdbcTemplate.execute(sql)\r\n    } catch (ex: Exception) {\r\n        log.error(&quot;...&quot;)\r\n    }\r\n}\r\n```\r\n\r\nAnd exactly the same code, replacing `jdbcTemplate.execute(sql)` with defined Connection works fine\r\n\r\n```\r\nval cur = DriverManager.getConnection(...).createStatement()\r\n\r\ntransactionTemplate.executeWithoutResult {\r\n    try {\r\n        cur.execute(sql)\r\n    } catch (ex: Exception) {\r\n        log.error(&quot;...&quot;)\r\n    }\r\n}\r\n```\r\n\r\nSql is something like `INSERT INTO table SELECT * FROM (select ...) t`\r\n\r\nBy the way, project is written in kotlin","title":"JdbcTemplate.execute or update hangs while simple Connection.createStatement().execute works fine","body":"<p>I have spring application where I'm using JdbcTemplate to perform sql queries to Postgres. I need to execute several sql statements in a row and some of the statements (randomly) make jdbcTemplate method hangs for about 30 minutes (sql return ~90 rows and executes in DBeaver for 1 sec).</p>\n<p>Why this happens? Why Connection works fine and jdbcTemplate not?</p>\n<p>I'm using such construction:</p>\n<pre><code>transactionTemplate.executeWithoutResult {\n    try {\n        jdbcTemplate.execute(sql)\n    } catch (ex: Exception) {\n        log.error(&quot;...&quot;)\n    }\n}\n</code></pre>\n<p>And exactly the same code, replacing <code>jdbcTemplate.execute(sql)</code> with defined Connection works fine</p>\n<pre><code>val cur = DriverManager.getConnection(...).createStatement()\n\ntransactionTemplate.executeWithoutResult {\n    try {\n        cur.execute(sql)\n    } catch (ex: Exception) {\n        log.error(&quot;...&quot;)\n    }\n}\n</code></pre>\n<p>Sql is something like <code>INSERT INTO table SELECT * FROM (select ...) t</code></p>\n<p>By the way, project is written in kotlin</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1682701621,"post_id":76131500,"comment_id":134262429,"body_markdown":"If the data is static, then why have it in the annotation at all? Or why not expose the map as static field on a public class? I&#39;m not sure if annotations are the best way to go here","body":"If the data is static, then why have it in the annotation at all? Or why not expose the map as static field on a public class? I&#39;m not sure if annotations are the best way to go here"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682703064,"creation_date":1682701847,"answer_id":76131818,"question_id":76131500,"body_markdown":"Using Enums with properties might be a viable workaround:\r\n\r\n```\r\npublic enum DataMap {\r\n  EMPTY(Map.of()),\r\n  X(Map.of(&quot;A&quot;, &quot;X1&quot;, &quot;B&quot;, &quot;X2&quot;, &quot;C&quot;, &quot;X3&quot;));\r\n\r\n  private final Map&lt;String, String&gt; map;\r\n  public DataMap(final Map&lt;String, String&gt; map) { this.map = map; }\r\n\r\n  public Map&lt;String, String&gt; getMap() { return map; }\r\n}\r\n\r\n@Data(data = DataMap.X)\r\nprivate String property;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.FIELD)\r\npublic @interface Data {\r\n    DataMap data() default DataMap.EMPTY;\r\n}\r\n```\r\n\r\nThis has the additional advantage of using immutable maps, so the values can never be changed once created.\r\n\r\n****\r\n\r\nAlternatively, set a plain enum value and use it to look up your map from another map which is keyed with the enum:\r\n\r\n```\r\npublic Map&lt;DataMap, Map&lt;String, String&gt;&gt; dataMaps = Map.ofEntries(\r\n    Map.entry(DataMap.EMPTY, Map.of()),\r\n    Map.entry(DataMap.X, Map.of(&quot;A&quot;, &quot;X1&quot;, &quot;B&quot;, &quot;X2&quot;, &quot;C&quot;, &quot;X3&quot;))\r\n);\r\n\r\npublic enum DataMap {\r\n  EMPTY,\r\n  X;\r\n}\r\n\r\n@Data(data = DataMap.X)\r\nprivate String property;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.FIELD)\r\npublic @interface Data {\r\n    DataMap data() default DataMap.EMPTY;\r\n}\r\n```","title":"HashMap as Value for custom Annotation","body":"<p>Using Enums with properties might be a viable workaround:</p>\n<pre><code>public enum DataMap {\n  EMPTY(Map.of()),\n  X(Map.of(&quot;A&quot;, &quot;X1&quot;, &quot;B&quot;, &quot;X2&quot;, &quot;C&quot;, &quot;X3&quot;));\n\n  private final Map&lt;String, String&gt; map;\n  public DataMap(final Map&lt;String, String&gt; map) { this.map = map; }\n\n  public Map&lt;String, String&gt; getMap() { return map; }\n}\n\n@Data(data = DataMap.X)\nprivate String property;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface Data {\n    DataMap data() default DataMap.EMPTY;\n}\n</code></pre>\n<p>This has the additional advantage of using immutable maps, so the values can never be changed once created.</p>\n<hr />\n<p>Alternatively, set a plain enum value and use it to look up your map from another map which is keyed with the enum:</p>\n<pre><code>public Map&lt;DataMap, Map&lt;String, String&gt;&gt; dataMaps = Map.ofEntries(\n    Map.entry(DataMap.EMPTY, Map.of()),\n    Map.entry(DataMap.X, Map.of(&quot;A&quot;, &quot;X1&quot;, &quot;B&quot;, &quot;X2&quot;, &quot;C&quot;, &quot;X3&quot;))\n);\n\npublic enum DataMap {\n  EMPTY,\n  X;\n}\n\n@Data(data = DataMap.X)\nprivate String property;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface Data {\n    DataMap data() default DataMap.EMPTY;\n}\n</code></pre>\n"}],"owner":{"account_id":9147861,"reputation":159,"user_id":6803365,"display_name":"Hans FooBar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76131818,"answer_count":1,"score":1,"last_activity_date":1682703064,"creation_date":1682699068,"question_id":76131500,"body_markdown":"I would like to be able to define a hash map as a parameter value for an annotation because I want to use this hash map within the application. The idea is not to maintain the data multiple times. The data is static and only needs to be adjusted when a new key-value pair is added.\r\n\r\nOf course, the following definition does not work because HashMap is not allowed as a type in an annotation.\r\n\r\n\r\n```java\r\npublic static final HashMap&lt;String, String&gt; dataX = new HashMap&lt;&gt;() {\r\n    {\r\n        put(&quot;A&quot;, &quot;X1&quot;);\r\n        put(&quot;B&quot;, &quot;X2&quot;);\r\n        put(&quot;C&quot;, &quot;X3&quot;);\r\n    };\r\n};\r\n\r\n@Data(data = dataX)\r\nprivate String property;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.FIELD)\r\npublic @interface Data {\r\n    Map&lt;Integer, String&gt; data() default new HashMap&lt;&gt;();\r\n}\r\n```\r\n\r\nThe only thing I could think of is to mask the data as JSON. \r\n\r\n\r\n```javascript\r\n\r\n@Data(data = &quot;{\\&quot;A\\&quot;: \\&quot;X1\\&quot;, \\&quot;B\\&quot;: \\&quot;X2\\&quot;, \\&quot;C\\&quot;: \\&quot;X3\\&quot;}&quot;)\r\nprivate String property;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.FIELD)\r\npublic @interface Data {\r\n    String data() default &quot;{}&quot;;\r\n}\r\n```\r\n\r\nDoes anyone have an idea how to solve this elegantly?","title":"HashMap as Value for custom Annotation","body":"<p>I would like to be able to define a hash map as a parameter value for an annotation because I want to use this hash map within the application. The idea is not to maintain the data multiple times. The data is static and only needs to be adjusted when a new key-value pair is added.</p>\n<p>Of course, the following definition does not work because HashMap is not allowed as a type in an annotation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static final HashMap&lt;String, String&gt; dataX = new HashMap&lt;&gt;() {\n    {\n        put(&quot;A&quot;, &quot;X1&quot;);\n        put(&quot;B&quot;, &quot;X2&quot;);\n        put(&quot;C&quot;, &quot;X3&quot;);\n    };\n};\n\n@Data(data = dataX)\nprivate String property;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface Data {\n    Map&lt;Integer, String&gt; data() default new HashMap&lt;&gt;();\n}\n</code></pre>\n<p>The only thing I could think of is to mask the data as JSON.</p>\n<pre class=\"lang-js prettyprint-override\"><code>\n@Data(data = &quot;{\\&quot;A\\&quot;: \\&quot;X1\\&quot;, \\&quot;B\\&quot;: \\&quot;X2\\&quot;, \\&quot;C\\&quot;: \\&quot;X3\\&quot;}&quot;)\nprivate String property;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface Data {\n    String data() default &quot;{}&quot;;\n}\n</code></pre>\n<p>Does anyone have an idea how to solve this elegantly?</p>\n"},{"tags":["java","android","opencv"],"owner":{"account_id":21204475,"reputation":11,"user_id":15594412,"display_name":"oscar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682702606,"creation_date":1682702606,"question_id":76131915,"body_markdown":"i am learning to write a object detection app\r\ni want to capture a photo and save in phone when i click on a button\r\n\r\nHowever,when it run to &quot;Utils.matToBitmap(mRgba, newbitmap);&quot;\r\n\r\nthe app crash!why?i do a research that mRgba is CV_8UC4,it should be able to do &quot;matToBitmap&quot;\r\n\r\nhere is my code\r\n``` \r\n\r\npublic void onCameraViewStarted(int width ,int height){\r\n        mRgba=new Mat(height,width, CvType.CV_8UC4);\r\n        \r\n        mGray =new Mat(height,width,CvType.CV_8UC1);\r\n    }\r\n    public void onCameraViewStopped(){\r\n        mRgba.release();\r\n    }\r\n    public Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame){\r\n        mRgba=inputFrame.rgba();\r\n        mGray=inputFrame.gray();\r\n\r\n\r\n        // now call that function\r\n        Mat out=new Mat();\r\n        out=objectDetectorClass.recognizeImage(mRgba);\r\n\r\n        return out;\r\n    }\r\n    public void takePicture(View view) {\r\n        // Create a Bitmap from the camera preview frame\r\n        Bitmap newbitmap = Bitmap.createBitmap(mOpenCvCameraView.getWidth(), mOpenCvCameraView.getHeight(), Bitmap.Config.ARGB_8888);\r\n       Utils.matToBitmap(mRgba, newbitmap);//app crash here\r\n\r\n\r\n\r\n\r\n  // Save the bitmap to the device&#39;s gallery\r\n       MediaStore.Images.Media.insertImage(getContentResolver(), newbitmap, &quot;Image&quot;, &quot;Image captured using Image&quot;);\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n```\r\n\r\n\r\nThe error code is \r\n```\r\n\r\n\r\n\r\njava.lang.IllegalStateException: Could not execute method for android:onClick\r\n                                                                                                    \tat android.view.View$DeclaredOnClickListener.onClick(View.java:6113)\r\n                                                                                                    \tat android.view.View.performClick(View.java:7259)\r\n                                                                                                    \tat android.view.View.performClickInternal(View.java:7236)\r\n                                                                                                    \tat android.view.View.access$3600(View.java:801)\r\n                                                                                                    \tat android.view.View$PerformClick.run(View.java:27892)\r\n                                                                                                    \tat android.os.Handler.handleCallback(Handler.java:883)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:100)\r\n```\r\n","title":"how to capture a photo and save in phone using opencv?","body":"<p>i am learning to write a object detection app\ni want to capture a photo and save in phone when i click on a button</p>\n<p>However,when it run to &quot;Utils.matToBitmap(mRgba, newbitmap);&quot;</p>\n<p>the app crash!why?i do a research that mRgba is CV_8UC4,it should be able to do &quot;matToBitmap&quot;</p>\n<p>here is my code</p>\n<pre><code>\npublic void onCameraViewStarted(int width ,int height){\n        mRgba=new Mat(height,width, CvType.CV_8UC4);\n        \n        mGray =new Mat(height,width,CvType.CV_8UC1);\n    }\n    public void onCameraViewStopped(){\n        mRgba.release();\n    }\n    public Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame){\n        mRgba=inputFrame.rgba();\n        mGray=inputFrame.gray();\n\n\n        // now call that function\n        Mat out=new Mat();\n        out=objectDetectorClass.recognizeImage(mRgba);\n\n        return out;\n    }\n    public void takePicture(View view) {\n        // Create a Bitmap from the camera preview frame\n        Bitmap newbitmap = Bitmap.createBitmap(mOpenCvCameraView.getWidth(), mOpenCvCameraView.getHeight(), Bitmap.Config.ARGB_8888);\n       Utils.matToBitmap(mRgba, newbitmap);//app crash here\n\n\n\n\n  // Save the bitmap to the device's gallery\n       MediaStore.Images.Media.insertImage(getContentResolver(), newbitmap, &quot;Image&quot;, &quot;Image captured using Image&quot;);\n\n    }\n\n\n\n\n</code></pre>\n<p>The error code is</p>\n<pre><code>\n\n\njava.lang.IllegalStateException: Could not execute method for android:onClick\n                                                                                                        at android.view.View$DeclaredOnClickListener.onClick(View.java:6113)\n                                                                                                        at android.view.View.performClick(View.java:7259)\n                                                                                                        at android.view.View.performClickInternal(View.java:7236)\n                                                                                                        at android.view.View.access$3600(View.java:801)\n                                                                                                        at android.view.View$PerformClick.run(View.java:27892)\n                                                                                                        at android.os.Handler.handleCallback(Handler.java:883)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:100)\n</code></pre>\n"},{"tags":["java","algorithm","data-structures","nearest-neighbor","greedy"],"answers":[{"tags":[],"owner":{"account_id":14725244,"reputation":482,"user_id":10634487,"display_name":"Bill Naylor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589036837,"creation_date":1589036837,"answer_id":61698903,"question_id":61698720,"body_markdown":"Check out this link here:\r\nhttps://en.wikipedia.org/wiki/Travelling_salesman_problem\r\nIt gives an in depth description of the problem. There are many different solutions to the TSP, the Nearest Neighbour solution is a Greedy Solution, so these are indeed the same.\r\n","title":"What are the differences between Nearest Neighbor Algorithm and Greedy Algorithm?","body":"<p>Check out this link here:\n<a href=\"https://en.wikipedia.org/wiki/Travelling_salesman_problem\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Travelling_salesman_problem</a>\nIt gives an in depth description of the problem. There are many different solutions to the TSP, the Nearest Neighbour solution is a Greedy Solution, so these are indeed the same.</p>\n"},{"tags":[],"owner":{"account_id":13866774,"reputation":61,"user_id":10011120,"display_name":"&#199;aatay en"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1601037914,"creation_date":1601037914,"answer_id":64064459,"question_id":61698720,"body_markdown":"Answer is NN Algorithm basically creates segments to closest nodes that it can reach, Greedy is the method of it but it directly takes the node which is the closest to current node. ","title":"What are the differences between Nearest Neighbor Algorithm and Greedy Algorithm?","body":"<p>Answer is NN Algorithm basically creates segments to closest nodes that it can reach, Greedy is the method of it but it directly takes the node which is the closest to current node.</p>\n"}],"owner":{"account_id":13866774,"reputation":61,"user_id":10011120,"display_name":"&#199;aatay en"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3204,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64064459,"answer_count":2,"score":2,"last_activity_date":1682702559,"creation_date":1589036109,"question_id":61698720,"body_markdown":"I&#39;m trying to develop 2 different algorithms for Travelling Salesman Algorithm (TSP) which are Nearest Neighbor and Greedy. I can&#39;t figure out the differences between them while thinking about cities. \r\n\r\nI think they will follow the same way because shortest path between two cities is greedy and the nearest at the same time. which part am i wrong? Can you explain with a few cities example thank you!","title":"What are the differences between Nearest Neighbor Algorithm and Greedy Algorithm?","body":"<p>I'm trying to develop 2 different algorithms for Travelling Salesman Algorithm (TSP) which are Nearest Neighbor and Greedy. I can't figure out the differences between them while thinking about cities. </p>\n\n<p>I think they will follow the same way because shortest path between two cities is greedy and the nearest at the same time. which part am i wrong? Can you explain with a few cities example thank you!</p>\n"},{"tags":["java","parsing","antlr4","lexer","parse-tree"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1682702704,"post_id":76130894,"comment_id":134262647,"body_markdown":"Is it only the graphic or is it really parsing that way? Have you verified?","body":"Is it only the graphic or is it really parsing that way? Have you verified?"},{"owner":{"account_id":6128906,"reputation":1172,"user_id":4779853,"display_name":"kaby76"},"score":0,"creation_date":1682707077,"post_id":76130894,"comment_id":134263448,"body_markdown":"`BOOL: &#39;true&#39; | &#39;false&#39;;`. You really should make `true` and `false` as individual tokens because these are keywords. Make `BOOL` and `COLLISION` both parser symbols (a symbol name that begins with a lowercase letter).","body":"<code>BOOL: &#39;true&#39; | &#39;false&#39;;</code>. You really should make <code>true</code> and <code>false</code> as individual tokens because these are keywords. Make <code>BOOL</code> and <code>COLLISION</code> both parser symbols (a symbol name that begins with a lowercase letter)."}],"answers":[{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682702149,"creation_date":1682702149,"answer_id":76131852,"question_id":76130894,"body_markdown":"The problem is that your `COLLISION` rule is a *lex* rule, but the `true` token in your input is already being tokenised as a `BOOL` token. If you rename the `COLLISION` rule in your grammar to `collision`, like this:\r\n\r\n    move: Movetype collision Attacktype direction moveExtra;\r\n    collision: BOOL;\r\n\r\nThen it becomes a *parse* rule, and the parsing works for your test input:\r\n\r\n    (program (line (statement (assignment la = (moveList (move Path (collision true) ATTACK (direction UP) (moveExtra 5)))) ;)) &lt;EOF&gt;)","title":"ANTLR4 doesnt parse the .g4 file the way I expected","body":"<p>The problem is that your <code>COLLISION</code> rule is a <em>lex</em> rule, but the <code>true</code> token in your input is already being tokenised as a <code>BOOL</code> token. If you rename the <code>COLLISION</code> rule in your grammar to <code>collision</code>, like this:</p>\n<pre><code>move: Movetype collision Attacktype direction moveExtra;\ncollision: BOOL;\n</code></pre>\n<p>Then it becomes a <em>parse</em> rule, and the parsing works for your test input:</p>\n<pre><code>(program (line (statement (assignment la = (moveList (move Path (collision true) ATTACK (direction UP) (moveExtra 5)))) ;)) &lt;EOF&gt;)\n</code></pre>\n"}],"owner":{"account_id":28446539,"reputation":23,"user_id":21765174,"display_name":"cluelessButTrying"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76131852,"answer_count":1,"score":2,"last_activity_date":1682702149,"creation_date":1682694427,"question_id":76130894,"body_markdown":"We are a couple of guys doing a University project, which led us to play around with ANTLR4. We are just trying to figure it out as we go, but have stumbled upon a issue we cant seem to fix. \r\n\r\nWe were currently trying to figure out the &quot;moveList&quot; in the grammar, and we have been running a simple test.txt `la = Path true ATTACK UP 5;`.\r\n\r\nCurrently we are working with this .g4 file: \r\n\r\n```\r\ngrammar hess;\r\n\r\nprogram: line* EOF;\r\n\r\ndefineBoard: &#39;BOARD&#39; &#39;(&#39; BOARDPOSITION &#39;)&#39;;\r\n\r\nline: statement | ifBlock | whileBlock | defineBoard;\r\n\r\nstatement: (assignment | functionCall) &#39;;&#39;;\r\n\r\nifBlock: &#39;if&#39; expression block (&#39;else&#39; elseIfBlock);\r\n\r\nelseIfBlock: block | ifBlock;\r\n\r\nwhileBlock: &#39;while&#39; expression block (&#39;else&#39; elseIfBlock);\r\n\r\nassignment: IDENTIFIER &#39;=&#39; moveList | IDENTIFIER &#39;=&#39; expression;\r\n\r\nfunctionCall: IDENTIFIER &#39;(&#39; (expression (&#39;,&#39; expression))? &#39;)&#39;;\r\n\r\nexpression:\r\n\tconstant\t\t\t\t\t\t\t# constantExpression\r\n\t| IDENTIFIER\t\t\t\t\t\t# identifierExpression\r\n\t| &#39;(&#39; expression &#39;)&#39;\t\t\t\t# parenthesizedExpression\r\n\t| &#39;!&#39; expression\t\t\t\t\t# notExpression\r\n\t| expression multOp expression\t\t# multiplicativeExpression\r\n\t| expression addOp expression\t\t# additiveExpression\r\n\t| expression compareOp expression\t# comparisonExpression\r\n\t| expression boolOp expression\t\t# booleanExpression;\r\n\r\nmoveList: move | move moveTail;\r\nmoveTail: &#39;,&#39; move moveTail;\r\nmoveExtra:\r\n\tINTEGER\r\n\t| INTEGER direction INTEGER\r\n\t| direction INTEGER;\r\nmove: Movetype COLLISION Attacktype direction moveExtra;\r\n\r\nIDENTIFIER: [a-zA-Z][a-zA-Z0-9];\r\nconstant:\r\n\tBOARDPOSITION\r\n\t| INTEGER\r\n\t| FLOAT\r\n\t| LETTER\r\n\t| STRING\r\n\t| BOOL\r\n\t| NULL;\r\nBOARDPOSITION: LETTER INTEGER;\r\nINTEGER: [1-9][0-9]* | [0];\r\nFLOAT: [0-9]+ &#39;.&#39; [0-9]+;\r\nSTRING: (&#39;&quot;&#39; ~&#39;&quot;&#39;* &#39;&quot;&#39;) | (&#39;\\&#39;&#39; ~&#39;\\&#39;&#39;* &#39;\\&#39;&#39;);\r\nLETTER: [a-zA-Z];\r\n\r\nBOOL: &#39;true&#39; | &#39;false&#39;;\r\nCOLLISION: BOOL;\r\nNULL: &#39;null&#39;;\r\n\r\nblock: &#39;{&#39; line* &#39;}&#39;;\r\n\r\nWS: [ \\t\\r\\n]+ -&gt; skip;\r\n\r\nmultOp: &#39;*&#39; | &#39;/&#39; | &#39;%&#39;;\r\naddOp: &#39;+&#39; | &#39;-&#39;;\r\nboolOp: &#39;and&#39; | &#39;or&#39; | &#39;xor&#39;;\r\ncompareOp: &#39;==&#39; | &#39;!=&#39; | &#39;&gt;&#39; | &#39;&lt;&#39; | &#39;&gt;=&#39; | &#39;&lt;=&#39;;\r\ndirection: &#39;UP&#39; | &#39;LEFT&#39; | &#39;RIGHT&#39; | &#39;DOWN&#39;;\r\nMovetype: &#39;Direct&#39; | &#39;Path&#39;;\r\nAttacktype: &#39;ATTACK&#39; | &#39;MOVE&#39; | &#39;ATKMOVE&#39;;\r\n```\r\n\r\nOur thought process, regarding the grammar, would be like so:\r\n\r\n`line -&gt; statement -&gt; assigment -&gt; moveList`\r\n\r\nand then\r\n\r\n```\r\n&quot;la&quot; = IDENTIFIER\r\n&quot;Path&quot; = Movetype\r\n&quot;ATTACK&quot; = Attacktype\r\n&quot;UP&quot; = Direction\r\n&quot;5&quot; = INTEGER\r\n```\r\n\r\nWe get the following Parse Tree when we debug/run the .g4 file: [Parse Tree](https://i.stack.imgur.com/r4FG0.png)\r\n\r\nAs you can see in the Parse Tree it says unexpected values, for what in my eyes look like an expected value. \r\n","title":"ANTLR4 doesnt parse the .g4 file the way I expected","body":"<p>We are a couple of guys doing a University project, which led us to play around with ANTLR4. We are just trying to figure it out as we go, but have stumbled upon a issue we cant seem to fix.</p>\n<p>We were currently trying to figure out the &quot;moveList&quot; in the grammar, and we have been running a simple test.txt <code>la = Path true ATTACK UP 5;</code>.</p>\n<p>Currently we are working with this .g4 file:</p>\n<pre><code>grammar hess;\n\nprogram: line* EOF;\n\ndefineBoard: 'BOARD' '(' BOARDPOSITION ')';\n\nline: statement | ifBlock | whileBlock | defineBoard;\n\nstatement: (assignment | functionCall) ';';\n\nifBlock: 'if' expression block ('else' elseIfBlock);\n\nelseIfBlock: block | ifBlock;\n\nwhileBlock: 'while' expression block ('else' elseIfBlock);\n\nassignment: IDENTIFIER '=' moveList | IDENTIFIER '=' expression;\n\nfunctionCall: IDENTIFIER '(' (expression (',' expression))? ')';\n\nexpression:\n    constant                            # constantExpression\n    | IDENTIFIER                        # identifierExpression\n    | '(' expression ')'                # parenthesizedExpression\n    | '!' expression                    # notExpression\n    | expression multOp expression      # multiplicativeExpression\n    | expression addOp expression       # additiveExpression\n    | expression compareOp expression   # comparisonExpression\n    | expression boolOp expression      # booleanExpression;\n\nmoveList: move | move moveTail;\nmoveTail: ',' move moveTail;\nmoveExtra:\n    INTEGER\n    | INTEGER direction INTEGER\n    | direction INTEGER;\nmove: Movetype COLLISION Attacktype direction moveExtra;\n\nIDENTIFIER: [a-zA-Z][a-zA-Z0-9];\nconstant:\n    BOARDPOSITION\n    | INTEGER\n    | FLOAT\n    | LETTER\n    | STRING\n    | BOOL\n    | NULL;\nBOARDPOSITION: LETTER INTEGER;\nINTEGER: [1-9][0-9]* | [0];\nFLOAT: [0-9]+ '.' [0-9]+;\nSTRING: ('&quot;' ~'&quot;'* '&quot;') | ('\\'' ~'\\''* '\\'');\nLETTER: [a-zA-Z];\n\nBOOL: 'true' | 'false';\nCOLLISION: BOOL;\nNULL: 'null';\n\nblock: '{' line* '}';\n\nWS: [ \\t\\r\\n]+ -&gt; skip;\n\nmultOp: '*' | '/' | '%';\naddOp: '+' | '-';\nboolOp: 'and' | 'or' | 'xor';\ncompareOp: '==' | '!=' | '&gt;' | '&lt;' | '&gt;=' | '&lt;=';\ndirection: 'UP' | 'LEFT' | 'RIGHT' | 'DOWN';\nMovetype: 'Direct' | 'Path';\nAttacktype: 'ATTACK' | 'MOVE' | 'ATKMOVE';\n</code></pre>\n<p>Our thought process, regarding the grammar, would be like so:</p>\n<p><code>line -&gt; statement -&gt; assigment -&gt; moveList</code></p>\n<p>and then</p>\n<pre><code>&quot;la&quot; = IDENTIFIER\n&quot;Path&quot; = Movetype\n&quot;ATTACK&quot; = Attacktype\n&quot;UP&quot; = Direction\n&quot;5&quot; = INTEGER\n</code></pre>\n<p>We get the following Parse Tree when we debug/run the .g4 file: <a href=\"https://i.stack.imgur.com/r4FG0.png\" rel=\"nofollow noreferrer\">Parse Tree</a></p>\n<p>As you can see in the Parse Tree it says unexpected values, for what in my eyes look like an expected value.</p>\n"},{"tags":["java","configuration","ini"],"answers":[{"tags":[],"owner":{"account_id":130645,"reputation":81695,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1313514267,"creation_date":1313514267,"answer_id":7082035,"question_id":7081994,"body_markdown":"make an ini folder in your root directory, and put it in there. Then when you start your program, it&#39;s all relative to where you start from.\r\n\r\n    Properties p = new Properties();\r\n    p.load(new FileInputStream(&quot;.\\\\ini\\\\myconfigfile.ini&quot;);\r\n\r\n","title":"Java Config File not specific to directory","body":"<p>make an ini folder in your root directory, and put it in there. Then when you start your program, it's all relative to where you start from.</p>\n\n<pre><code>Properties p = new Properties();\np.load(new FileInputStream(\".\\\\ini\\\\myconfigfile.ini\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1313514271,"creation_date":1313514271,"answer_id":7082036,"question_id":7081994,"body_markdown":"Put it in the CLASSPATH and load resource as stream using the class loader.  That&#39;ll always work, even for web apps in WAR files or JARs.","title":"Java Config File not specific to directory","body":"<p>Put it in the CLASSPATH and load resource as stream using the class loader.  That'll always work, even for web apps in WAR files or JARs.</p>\n"},{"tags":[],"owner":{"account_id":292185,"reputation":7185,"user_id":594793,"display_name":"Jon7"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682701650,"creation_date":1313514327,"answer_id":7082060,"question_id":7081994,"body_markdown":"You should put your ini in a resources folder and load them as resources. Here&#39;s an [excellent tutorial](https://www.infoworld.com/article/2077352/smartly-load-your-properties.html) to get you started.","title":"Java Config File not specific to directory","body":"<p>You should put your ini in a resources folder and load them as resources. Here's an <a href=\"https://www.infoworld.com/article/2077352/smartly-load-your-properties.html\" rel=\"nofollow noreferrer\">excellent tutorial</a> to get you started.</p>\n"},{"tags":[],"owner":{"account_id":284516,"reputation":14349,"user_id":582675,"accept_rate":75,"display_name":"Fabian Barney"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1313514454,"creation_date":1313514454,"answer_id":7082080,"question_id":7081994,"body_markdown":"Have a look at [Apache Commons Configuration][1].\r\nIt is solving many issues around configuration files. It also supports having individual configs for each user what is imho very important for development in a team.\r\n\r\n\r\n  [1]: http://commons.apache.org/configuration/","title":"Java Config File not specific to directory","body":"<p>Have a look at <a href=\"http://commons.apache.org/configuration/\" rel=\"nofollow\">Apache Commons Configuration</a>.\nIt is solving many issues around configuration files. It also supports having individual configs for each user what is imho very important for development in a team.</p>\n"}],"owner":{"account_id":390562,"reputation":5376,"user_id":750711,"accept_rate":100,"display_name":"sealz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":7082060,"answer_count":4,"score":0,"last_activity_date":1682701650,"creation_date":1313514073,"question_id":7081994,"body_markdown":"I am using a configuration (.ini) file with my java app. At the moment I am specifically calling the location of the dll like this.\r\n\r\n    Properties p = new Properties();\r\n    p.load(new FileInputStream(&quot;C:\\\\myconfigfile.ini&quot;);\r\n\r\nI would like to have it so the user does not have to put it into a certain directory before the program operates.\r\n\r\nIs there a way to implement this or is this just the best practice to go with.\r\n","title":"Java Config File not specific to directory","body":"<p>I am using a configuration (.ini) file with my java app. At the moment I am specifically calling the location of the dll like this.</p>\n\n<pre><code>Properties p = new Properties();\np.load(new FileInputStream(\"C:\\\\myconfigfile.ini\");\n</code></pre>\n\n<p>I would like to have it so the user does not have to put it into a certain directory before the program operates.</p>\n\n<p>Is there a way to implement this or is this just the best practice to go with.</p>\n"},{"tags":["java","garbage-collection","weak-references"],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1682701617,"creation_date":1682701617,"answer_id":76131795,"question_id":76109525,"body_markdown":"Yes, its possible that your method returns `null`. In principle, when you have code like this\r\n\r\n```java\r\nWeakReference&lt;Object&gt; ref = new WeakReference&lt;&gt;(new Object());\r\nObject o = ref.get();\r\n```\r\n\r\nits already possible that `o` is `null`.\r\n\r\nInstead of creating a loop, you should ensure that there is no phase where the result object is only weakly reachable between the check for an existing object or the creation of a new object and the final return statement.\r\n\r\nOr, in other words, enforce that the object is strongly reachable throughout the operation.\r\n\r\nFor example\r\n\r\n```java\r\npublic V getCached(int id, int version) {\r\n    // do not abuse assertions for argument checking\r\n    if(version &lt; 0) throw new IllegalArgumentException();\r\n\r\n    VAR&lt;V&gt; ref = cache.get(id);\r\n    V storedData = ref == null? null: ref.get();\r\n\r\n    if(storedData != null &amp;&amp; ref.getVersion() &gt;= version) {\r\n        return storedData;\r\n    }\r\n\r\n    List&lt;V&gt; strongReference = new ArrayList&lt;&gt;(1);\r\n\r\n    cache.compute(id, (key, existing) -&gt; {\r\n        V data = existing == null? null: existing.get();\r\n        if(data != null &amp;&amp; existing.getVersion() &gt;= version) {\r\n            strongReference.add(data);\r\n            return existing;\r\n        }\r\n        data = factory.apply(key);\r\n        strongReference.add(data);\r\n        return new WeakVAR(data, key, version);\r\n    });\r\n\r\n    return strongReference.get(0);\r\n}\r\n```\r\n\r\nThe fast path at the beginning does not need additional effort, as the `storedData` variable is already a strong reference, which is consistently used for checking the presence of an old object and returning it.\r\n\r\nThe function passed to the `compute` method must return the weak reference to conform to the maps type, hence, it needs an additional storage to keep a strong reference while returning through the `compute` method. The example uses an `ArrayList` but any local object with a reference variable would do.\r\n\r\nOften, a single element array is used for such a purpose, but Java doesnt support creating a `V[]` array. In the end, the overhead doesnt matter much, as long as the code succeeds in the fast path with the optimistic `get()` often enough.\r\n","title":"Adding WeakReferences into HashMap via #compute - may I get null or not?","body":"<p>Yes, its possible that your method returns <code>null</code>. In principle, when you have code like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>WeakReference&lt;Object&gt; ref = new WeakReference&lt;&gt;(new Object());\nObject o = ref.get();\n</code></pre>\n<p>its already possible that <code>o</code> is <code>null</code>.</p>\n<p>Instead of creating a loop, you should ensure that there is no phase where the result object is only weakly reachable between the check for an existing object or the creation of a new object and the final return statement.</p>\n<p>Or, in other words, enforce that the object is strongly reachable throughout the operation.</p>\n<p>For example</p>\n<pre class=\"lang-java prettyprint-override\"><code>public V getCached(int id, int version) {\n    // do not abuse assertions for argument checking\n    if(version &lt; 0) throw new IllegalArgumentException();\n\n    VAR&lt;V&gt; ref = cache.get(id);\n    V storedData = ref == null? null: ref.get();\n\n    if(storedData != null &amp;&amp; ref.getVersion() &gt;= version) {\n        return storedData;\n    }\n\n    List&lt;V&gt; strongReference = new ArrayList&lt;&gt;(1);\n\n    cache.compute(id, (key, existing) -&gt; {\n        V data = existing == null? null: existing.get();\n        if(data != null &amp;&amp; existing.getVersion() &gt;= version) {\n            strongReference.add(data);\n            return existing;\n        }\n        data = factory.apply(key);\n        strongReference.add(data);\n        return new WeakVAR(data, key, version);\n    });\n\n    return strongReference.get(0);\n}\n</code></pre>\n<p>The fast path at the beginning does not need additional effort, as the <code>storedData</code> variable is already a strong reference, which is consistently used for checking the presence of an old object and returning it.</p>\n<p>The function passed to the <code>compute</code> method must return the weak reference to conform to the maps type, hence, it needs an additional storage to keep a strong reference while returning through the <code>compute</code> method. The example uses an <code>ArrayList</code> but any local object with a reference variable would do.</p>\n<p>Often, a single element array is used for such a purpose, but Java doesnt support creating a <code>V[]</code> array. In the end, the overhead doesnt matter much, as long as the code succeeds in the fast path with the optimistic <code>get()</code> often enough.</p>\n"}],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76131795,"answer_count":1,"score":1,"last_activity_date":1682701617,"creation_date":1682503591,"question_id":76109525,"body_markdown":"Let&#39;s say I have following implementation of cache, purposed to associate some data (connection pool in my case) with the latest state/version of another object:\r\n\r\n```\r\npublic class Demo&lt;V&gt; {\r\n\r\n    private final Map&lt;Integer, VAR&lt;V&gt;&gt; cache = new ConcurrentHashMap&lt;&gt;();\r\n\r\n    private final ReferenceQueue&lt;V&gt; refq = new ReferenceQueue&lt;&gt;();\r\n\r\n    private final Function&lt;Integer, V&gt; factory;\r\n\r\n    public Demo(Function&lt;Integer, V&gt; factory) {\r\n        this.factory = factory;\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Demo&lt;Object&gt; demo = new Demo&lt;&gt;(id -&gt; new Object());\r\n\r\n        Object data = demo.getCached(1, 0);\r\n        assert data != null;\r\n\r\n        WeakReference&lt;Object&gt; keyReference = new WeakReference&lt;&gt;(data);\r\n        data = null;\r\n        while (keyReference.get() != null) {\r\n            System.gc();\r\n            Thread.sleep(1_000);\r\n        }\r\n\r\n    }\r\n\r\n    public V getCached(int id, int version) {\r\n        assert version &gt;= 0;\r\n        VAR&lt;V&gt; ref = cache.get(id);\r\n        V storedData = ref == null ? null : ref.get();\r\n        int storedVersion = storedData == null ? -1 : ref.getVersion();\r\n\r\n        if (storedData == null) {\r\n            cache.remove(id, ref);\r\n        }\r\n\r\n        if (storedVersion &gt;= version) {\r\n            return storedData;\r\n        }\r\n\r\n        Supplier&lt;VAR&lt;V&gt;&gt; varFactory = () -&gt; {\r\n            V data = factory.apply(id);\r\n            return new WeakVAR(data, id, version);\r\n        };\r\n\r\n        BiFunction&lt;Integer, VAR&lt;V&gt;, VAR&lt;V&gt;&gt; replaceFunction = (key, existing) -&gt; {\r\n            V data = existing == null ? null : existing.get();\r\n            if (data == null) {\r\n                return varFactory.get();\r\n            }\r\n            if (existing.getVersion() &gt;= version) {\r\n                return existing;\r\n            }\r\n            return varFactory.get();\r\n        };\r\n\r\n        Supplier&lt;V&gt; vFactory = () -&gt; cache.compute(id, replaceFunction).get();\r\n\r\n/*\r\n        V result;\r\n        while ((result = vFactory.get()) == null) {\r\n            // nop\r\n        }\r\n        return result;\r\n*/\r\n\r\n        return vFactory.get();\r\n    }\r\n\r\n\r\n    interface VAR&lt;V&gt; {\r\n\r\n        int getVersion();\r\n\r\n        int getId();\r\n\r\n        V get();\r\n\r\n    }\r\n\r\n    class WeakVAR extends WeakReference&lt;V&gt;\r\n            implements VAR&lt;V&gt; {\r\n\r\n        private final int id;\r\n\r\n        private final int version;\r\n\r\n        public WeakVAR(V referent, int id, int version) {\r\n            super(referent, refq);\r\n            this.id = id;\r\n            this.version = version;\r\n        }\r\n\r\n        @Override\r\n        public int getVersion() {\r\n            return version;\r\n        }\r\n\r\n        @Override\r\n        public int getId() {\r\n            return id;\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe question is: is it possible that `public V getCached(int id, int version)` method may return null when dereferencing `WeakReference` returned from `Map#compute`? If so, what is the best way to overcome this issue? Is busy loop a felicitous solution?","title":"Adding WeakReferences into HashMap via #compute - may I get null or not?","body":"<p>Let's say I have following implementation of cache, purposed to associate some data (connection pool in my case) with the latest state/version of another object:</p>\n<pre><code>public class Demo&lt;V&gt; {\n\n    private final Map&lt;Integer, VAR&lt;V&gt;&gt; cache = new ConcurrentHashMap&lt;&gt;();\n\n    private final ReferenceQueue&lt;V&gt; refq = new ReferenceQueue&lt;&gt;();\n\n    private final Function&lt;Integer, V&gt; factory;\n\n    public Demo(Function&lt;Integer, V&gt; factory) {\n        this.factory = factory;\n    }\n\n    public static void main(String[] args) throws Exception {\n        Demo&lt;Object&gt; demo = new Demo&lt;&gt;(id -&gt; new Object());\n\n        Object data = demo.getCached(1, 0);\n        assert data != null;\n\n        WeakReference&lt;Object&gt; keyReference = new WeakReference&lt;&gt;(data);\n        data = null;\n        while (keyReference.get() != null) {\n            System.gc();\n            Thread.sleep(1_000);\n        }\n\n    }\n\n    public V getCached(int id, int version) {\n        assert version &gt;= 0;\n        VAR&lt;V&gt; ref = cache.get(id);\n        V storedData = ref == null ? null : ref.get();\n        int storedVersion = storedData == null ? -1 : ref.getVersion();\n\n        if (storedData == null) {\n            cache.remove(id, ref);\n        }\n\n        if (storedVersion &gt;= version) {\n            return storedData;\n        }\n\n        Supplier&lt;VAR&lt;V&gt;&gt; varFactory = () -&gt; {\n            V data = factory.apply(id);\n            return new WeakVAR(data, id, version);\n        };\n\n        BiFunction&lt;Integer, VAR&lt;V&gt;, VAR&lt;V&gt;&gt; replaceFunction = (key, existing) -&gt; {\n            V data = existing == null ? null : existing.get();\n            if (data == null) {\n                return varFactory.get();\n            }\n            if (existing.getVersion() &gt;= version) {\n                return existing;\n            }\n            return varFactory.get();\n        };\n\n        Supplier&lt;V&gt; vFactory = () -&gt; cache.compute(id, replaceFunction).get();\n\n/*\n        V result;\n        while ((result = vFactory.get()) == null) {\n            // nop\n        }\n        return result;\n*/\n\n        return vFactory.get();\n    }\n\n\n    interface VAR&lt;V&gt; {\n\n        int getVersion();\n\n        int getId();\n\n        V get();\n\n    }\n\n    class WeakVAR extends WeakReference&lt;V&gt;\n            implements VAR&lt;V&gt; {\n\n        private final int id;\n\n        private final int version;\n\n        public WeakVAR(V referent, int id, int version) {\n            super(referent, refq);\n            this.id = id;\n            this.version = version;\n        }\n\n        @Override\n        public int getVersion() {\n            return version;\n        }\n\n        @Override\n        public int getId() {\n            return id;\n        }\n    }\n\n}\n</code></pre>\n<p>The question is: is it possible that <code>public V getCached(int id, int version)</code> method may return null when dereferencing <code>WeakReference</code> returned from <code>Map#compute</code>? If so, what is the best way to overcome this issue? Is busy loop a felicitous solution?</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection","spring-framework-beans"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1672991705,"post_id":75025944,"comment_id":132401853,"body_markdown":"Why are you even refreshing the context, that is pretty dangerous actually...","body":"Why are you even refreshing the context, that is pretty dangerous actually..."},{"owner":{"account_id":12099367,"reputation":31,"user_id":12734082,"display_name":"FireBreather"},"score":0,"creation_date":1673375977,"post_id":75025944,"comment_id":132483299,"body_markdown":"When our service starts up right after being installed we configure it at run time with things like database configuration. Our beans rely on that configuration and so we start up with dummy beans and swap them out once configuration input is added.","body":"When our service starts up right after being installed we configure it at run time with things like database configuration. Our beans rely on that configuration and so we start up with dummy beans and swap them out once configuration input is added."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673376304,"post_id":75025944,"comment_id":132483390,"body_markdown":"Which seems wrong as you now have doubled the amount of beans. Why isn&#39;t this part of the startup process or regular configuration phase. What is so special about it?","body":"Which seems wrong as you now have doubled the amount of beans. Why isn&#39;t this part of the startup process or regular configuration phase. What is so special about it?"}],"answers":[{"tags":[],"owner":{"account_id":14451450,"reputation":87,"user_id":10438820,"display_name":"sina zarei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682701344,"creation_date":1682701344,"answer_id":76131759,"question_id":75025944,"body_markdown":"I am not sure about Injecting ApplicationContext in that way that you have done,i think it could be error prone; if you want to Inject ApplicationContaxt in your beans, its better to  implements ApplicationContextAware with target bean and let to spring container do that.","title":"Intermittent occurrences of: No bean named &#39;org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry&#39; available","body":"<p>I am not sure about Injecting ApplicationContext in that way that you have done,i think it could be error prone; if you want to Inject ApplicationContaxt in your beans, its better to  implements ApplicationContextAware with target bean and let to spring container do that.</p>\n"}],"owner":{"account_id":12099367,"reputation":31,"user_id":12734082,"display_name":"FireBreather"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1682701344,"creation_date":1672966881,"question_id":75025944,"body_markdown":"Our application somehow gets into an unusable state very intermittently and in a hard to reproduce fashion. We found it follows a path that uses this code that we think is likely the cause of the issue but aren&#39;t sure why or how to fix it. We don&#39;t see this around specific if statements so it doesn&#39;t seem like it&#39;s going down a different path of code but rather more likely a timing issue. \r\n\r\n    `import org.springframework.context.ApplicationContext;\r\n    import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;\r\n\r\n    ((AnnotationConfigWebApplicationContext) applicationContext).refresh();`\r\n\r\nIt seems like the refresh triggers the following error so the next time we try and go through normal code paths spring is in a bad state. \r\n\r\n    `Unsatisfied dependency expressed through constructor parameter 0; nested exception is     org.springframework.beans.factory.BeanCreationException:Error creating bean with name &#39;MyCodeClass&#39; defined in URL [jar:file:/path/repo-version.jar!/com/mypathtoMyCodeClassImpl.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.cache.annotation.ProxyCachingConfiguration&#39;: Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry&#39; available`\r\n    \r\n\r\n\r\nMyCodeClass semi looks like \r\n\r\n    `import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.Lazy;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component(&quot;MyCodeClass&quot;)\r\n    public class MyCodeClassImpl implements MyCodeClass, AnotherInterface {\r\n    \r\n        @Autowired\r\n        @Lazy\r\n        private ApplicationContext applicationContext;\r\n    \r\n    ... Other code\r\n    }`\r\n","title":"Intermittent occurrences of: No bean named &#39;org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry&#39; available","body":"<p>Our application somehow gets into an unusable state very intermittently and in a hard to reproduce fashion. We found it follows a path that uses this code that we think is likely the cause of the issue but aren't sure why or how to fix it. We don't see this around specific if statements so it doesn't seem like it's going down a different path of code but rather more likely a timing issue.</p>\n<pre><code>`import org.springframework.context.ApplicationContext;\nimport org.springframework.web.context.support.AnnotationConfigWebApplicationContext;\n\n((AnnotationConfigWebApplicationContext) applicationContext).refresh();`\n</code></pre>\n<p>It seems like the refresh triggers the following error so the next time we try and go through normal code paths spring is in a bad state.</p>\n<pre><code>`Unsatisfied dependency expressed through constructor parameter 0; nested exception is     org.springframework.beans.factory.BeanCreationException:Error creating bean with name 'MyCodeClass' defined in URL [jar:file:/path/repo-version.jar!/com/mypathtoMyCodeClassImpl.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cache.annotation.ProxyCachingConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry' available`\n</code></pre>\n<p>MyCodeClass semi looks like</p>\n<pre><code>`import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.Lazy;\nimport org.springframework.stereotype.Component;\n\n@Component(&quot;MyCodeClass&quot;)\npublic class MyCodeClassImpl implements MyCodeClass, AnotherInterface {\n\n    @Autowired\n    @Lazy\n    private ApplicationContext applicationContext;\n\n... Other code\n}`\n</code></pre>\n"},{"tags":["java","android","gradle","jgit"],"comments":[{"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"score":0,"creation_date":1682700085,"post_id":76126240,"comment_id":134262112,"body_markdown":"This looks incorrect, Android is more strict and thus complains but it is not a good idea to have duplicate classes in different jars. I&#39;d report a bug at https://www.eclipse.org/jgit/, maybe they need to remove some dependency or exclude the transitive dependency on sshd-common or Apache SSHD needs fixing to not include duplicate stuff in sshd-osgi","body":"This looks incorrect, Android is more strict and thus complains but it is not a good idea to have duplicate classes in different jars. I&#39;d report a bug at <a href=\"https://www.eclipse.org/jgit/\" rel=\"nofollow noreferrer\">eclipse.org/jgit</a>, maybe they need to remove some dependency or exclude the transitive dependency on sshd-common or Apache SSHD needs fixing to not include duplicate stuff in sshd-osgi"}],"answers":[{"tags":[],"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682700488,"creation_date":1682700488,"answer_id":76131661,"question_id":76126240,"body_markdown":"Dependencies of JGit should be adjusted to not contain duplicate classes in different jars.\r\n\r\nAs a workaround you could try to exclude the duplicate transitive dependency on `org.apache.sshd:sshd-common:2.7.0` via the following in `build.gradle`:\r\n\r\n    configurations {\r\n\t    all*.exclude group: &#39;org.apache.sshd&#39;, module: &#39;sshd-common&#39;\r\n    }\r\n\r\n","title":"JGit is causing duplicate classes error out of the box","body":"<p>Dependencies of JGit should be adjusted to not contain duplicate classes in different jars.</p>\n<p>As a workaround you could try to exclude the duplicate transitive dependency on <code>org.apache.sshd:sshd-common:2.7.0</code> via the following in <code>build.gradle</code>:</p>\n<pre><code>configurations {\n    all*.exclude group: 'org.apache.sshd', module: 'sshd-common'\n}\n</code></pre>\n"}],"owner":{"account_id":4742401,"reputation":864,"user_id":7858768,"display_name":"user7858768"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682700488,"creation_date":1682655685,"question_id":76126240,"body_markdown":"Attempting to integrate JGit into an Android project and getting lots of duplicate classes ERRORs all coming from JGit transitive dependency:\r\n\r\n\r\nDuplicate class detect shows among others:\r\n\r\n```md\r\n    - org/apache/sshd/common/util/closeable/SequentialCloseable.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\r\n    - org/apache/sshd/common/util/closeable/SimpleCloseable.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\r\n    - org/apache/sshd/common/util/functors/Int2IntFunction.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\r\n    - org/apache/sshd/common/util/functors/UnaryEquator.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\r\n    - org/apache/sshd/common/util/helper/LazyIterablesConcatenator$1.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\r\n    - org/apache/sshd/common/util/helper/LazyIterablesConcatenator.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\r\n    - org/apache/sshd/common/util/helper/LazyMatchingTypeIterable.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\r\n    - org/apache/sshd/common/util/helper/LazyMatchingTypeIterator.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\r\n    - org/apache/sshd/common/util/io/CloseableEmptyInputStream.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\r\n```\r\n\r\nBoth sshd-osgi-2.7.0.jar AND sshd-common-2.7.0.jar are coming from `org.eclipse.jgit:org.eclipse.jgit.ssh.apache` showed here when running `gradle dependencies`:\r\n\r\n```md\r\n    |    +--- org.eclipse.jgit:org.eclipse.jgit.ssh.apache:5.13.1.202206130422-r\r\n    |    |    +--- org.eclipse.jgit:org.eclipse.jgit:5.13.1.202206130422-r (*)\r\n    |    |    +--- org.apache.sshd:sshd-osgi:2.7.0\r\n    |    |    |    +--- org.slf4j:slf4j-api:1.7.30\r\n    |    |    |    \\--- org.slf4j:jcl-over-slf4j:1.7.30\r\n    |    |    |         \\--- org.slf4j:slf4j-api:1.7.30\r\n    |    |    +--- org.apache.sshd:sshd-sftp:2.7.0\r\n    |    |    |    +--- org.apache.sshd:sshd-core:2.7.0\r\n    |    |    |    |    +--- org.apache.sshd:sshd-common:2.7.0\r\n```\r\n\r\nAm I missing something or is this fairly commonly used package actually has duplicate classes in its dependencies that are breaking usage of it within Android platform out of the box??\r\n","title":"JGit is causing duplicate classes error out of the box","body":"<p>Attempting to integrate JGit into an Android project and getting lots of duplicate classes ERRORs all coming from JGit transitive dependency:</p>\n<p>Duplicate class detect shows among others:</p>\n<pre><code>    - org/apache/sshd/common/util/closeable/SequentialCloseable.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\n    - org/apache/sshd/common/util/closeable/SimpleCloseable.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\n    - org/apache/sshd/common/util/functors/Int2IntFunction.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\n    - org/apache/sshd/common/util/functors/UnaryEquator.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\n    - org/apache/sshd/common/util/helper/LazyIterablesConcatenator$1.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\n    - org/apache/sshd/common/util/helper/LazyIterablesConcatenator.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\n    - org/apache/sshd/common/util/helper/LazyMatchingTypeIterable.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\n    - org/apache/sshd/common/util/helper/LazyMatchingTypeIterator.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\n    - org/apache/sshd/common/util/io/CloseableEmptyInputStream.class is in [sshd-osgi-2.7.0.jar, sshd-common-2.7.0.jar]\n</code></pre>\n<p>Both sshd-osgi-2.7.0.jar AND sshd-common-2.7.0.jar are coming from <code>org.eclipse.jgit:org.eclipse.jgit.ssh.apache</code> showed here when running <code>gradle dependencies</code>:</p>\n<pre><code>    |    +--- org.eclipse.jgit:org.eclipse.jgit.ssh.apache:5.13.1.202206130422-r\n    |    |    +--- org.eclipse.jgit:org.eclipse.jgit:5.13.1.202206130422-r (*)\n    |    |    +--- org.apache.sshd:sshd-osgi:2.7.0\n    |    |    |    +--- org.slf4j:slf4j-api:1.7.30\n    |    |    |    \\--- org.slf4j:jcl-over-slf4j:1.7.30\n    |    |    |         \\--- org.slf4j:slf4j-api:1.7.30\n    |    |    +--- org.apache.sshd:sshd-sftp:2.7.0\n    |    |    |    +--- org.apache.sshd:sshd-core:2.7.0\n    |    |    |    |    +--- org.apache.sshd:sshd-common:2.7.0\n</code></pre>\n<p>Am I missing something or is this fairly commonly used package actually has duplicate classes in its dependencies that are breaking usage of it within Android platform out of the box??</p>\n"},{"tags":["java","security","certificate","code-signing","pki"],"comments":[{"owner":{"account_id":20177,"reputation":45320,"user_id":47961,"accept_rate":83,"display_name":"Eugene Mayevski &#39;Callback"},"score":1,"creation_date":1283840905,"post_id":3655263,"comment_id":3845785,"body_markdown":"You know, dealing with certificates closely (we develop and sell PKI library), I have the same questions and no response. This seems marketing BS, cause as you correctly noticed, key usage is the same and from technical point of view the certificates are the same. Maybe they try to fool some users into buying several different certificates, or issue them directly in applicable format (PKCS#7/PKCS#8, JKS, PKCS#12).","body":"You know, dealing with certificates closely (we develop and sell PKI library), I have the same questions and no response. This seems marketing BS, cause as you correctly noticed, key usage is the same and from technical point of view the certificates are the same. Maybe they try to fool some users into buying several different certificates, or issue them directly in applicable format (PKCS#7/PKCS#8, JKS, PKCS#12)."},{"owner":{"account_id":647863,"reputation":113,"user_id":441024,"display_name":"Daniel Marschall"},"score":0,"creation_date":1283892922,"post_id":3655263,"comment_id":3853660,"body_markdown":"Thank you for your comment. Well, what do you think? Might a CA revoke my certificate if they find out that I also sign JAR software? I am very unsure if it is according to their legal terms, since there are these &quot;products&quot;.","body":"Thank you for your comment. Well, what do you think? Might a CA revoke my certificate if they find out that I also sign JAR software? I am very unsure if it is according to their legal terms, since there are these &quot;products&quot;."},{"owner":{"account_id":20177,"reputation":45320,"user_id":47961,"accept_rate":83,"display_name":"Eugene Mayevski &#39;Callback"},"score":0,"creation_date":1288798589,"post_id":3655263,"comment_id":4397670,"body_markdown":"Sorry for not answering before - your question was not noticed . I am investigating this question again now and for GlobalSign CA there&#39;s no indication in their documents that explicitly prohibits use of say Authenticode certificates for Adobe AIR. It can happen, though, that they treat it as violation of Subscriber Agreement (though there&#39;s no such restriction set there). So I am having this problem myself now (trying to decide if I need to buy another certificates for different signing types) and have no solution.","body":"Sorry for not answering before - your question was not noticed . I am investigating this question again now and for GlobalSign CA there&#39;s no indication in their documents that explicitly prohibits use of say Authenticode certificates for Adobe AIR. It can happen, though, that they treat it as violation of Subscriber Agreement (though there&#39;s no such restriction set there). So I am having this problem myself now (trying to decide if I need to buy another certificates for different signing types) and have no solution."}],"answers":[{"tags":[],"owner":{"account_id":249565,"reputation":9766,"user_id":525725,"accept_rate":67,"display_name":"Emmanuel Bourg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681591863,"creation_date":1337030160,"answer_id":10591180,"question_id":3655263,"body_markdown":"There is no technical difference as you guessed, the certificate provided works for any code signing context (except macOS/iOS which use certificates issued by Apple). The CAs just try to deliver the certificate in a format suitable for the developer environment. For example a JKS file for Java developers signing JAR files, a SPC file (i.e. a DER encoded PKCS#7 certificate) or a PKCS#12 file for Authenticode.\r\n\r\nThe code signing tools often accept various key and certificate formats:\r\n* [signtool][1] can use PKCS#12 keystores and PKV+SPC files for Authenticode signing\r\n* [keytool][2] can use PKCS#12 and JKS keystores for signing JAR files\r\n* [Jsign][3] can use PKCS#12 and JKS keystores, or PKV+SPC files  for Authenticode signing (disclaimer: I&#39;m the author)\r\n* [osslsigncode][4] PKCS#12 keystores or PKV+SPC files\r\n\r\nRegardless of the format used, these tools will produce the same signature for a given file (except for the signing time and the timestamp of course).\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/seccrypto/signtool\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/specs/man/keytool.html\r\n  [3]: https://ebourg.github.io/jsign/\r\n  [4]: https://github.com/mtrojnar/osslsigncode","title":"Difference between Authenticode, SPC and Java CodeSign?","body":"<p>There is no technical difference as you guessed, the certificate provided works for any code signing context (except macOS/iOS which use certificates issued by Apple). The CAs just try to deliver the certificate in a format suitable for the developer environment. For example a JKS file for Java developers signing JAR files, a SPC file (i.e. a DER encoded PKCS#7 certificate) or a PKCS#12 file for Authenticode.</p>\n<p>The code signing tools often accept various key and certificate formats:</p>\n<ul>\n<li><a href=\"https://learn.microsoft.com/en-us/windows/win32/seccrypto/signtool\" rel=\"nofollow noreferrer\">signtool</a> can use PKCS#12 keystores and PKV+SPC files for Authenticode signing</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/keytool.html\" rel=\"nofollow noreferrer\">keytool</a> can use PKCS#12 and JKS keystores for signing JAR files</li>\n<li><a href=\"https://ebourg.github.io/jsign/\" rel=\"nofollow noreferrer\">Jsign</a> can use PKCS#12 and JKS keystores, or PKV+SPC files  for Authenticode signing (disclaimer: I'm the author)</li>\n<li><a href=\"https://github.com/mtrojnar/osslsigncode\" rel=\"nofollow noreferrer\">osslsigncode</a> PKCS#12 keystores or PKV+SPC files</li>\n</ul>\n<p>Regardless of the format used, these tools will produce the same signature for a given file (except for the signing time and the timestamp of course).</p>\n"}],"owner":{"account_id":647863,"reputation":113,"user_id":441024,"display_name":"Daniel Marschall"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2280,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1682700347,"creation_date":1283824267,"question_id":3655263,"body_markdown":"Most CAs are selling code signing certificates in different &quot;products&quot;, like Verisign or Certum:\r\n\r\n- Microsoft Authenticode - &quot;Allows you to sign EXE, OCX, DLL, bla...&quot;\r\n\r\n- Java CodeSign - &quot;Allows you to sign Java code&quot;\r\n\r\n- Software Publisher Certificate - &quot;Allows you to sign software&quot;\r\n\r\nWell, I am REALLY confused about this. What is the difference between all these products - except the PRICE? I asked Verisign and other CAs a few times since I am curious, but got no answer.\r\n\r\nI got a Authenticode certificate from Certum CA. I enrolled it in Internet Explorer, exported it as PKCS#12 PFX and could sign EXE, DLL, ... as promised.\r\n\r\nNow... I tried to import this PFX into Java with keytool, then I tried to sign a JAR. And it worked!\r\n\r\nAnd then there is the mysterious &quot;Software Publisher certificate&quot; as product. I don&#39;t know what I can/should sign with that... Mac? Linux? Isn&#39;t &quot;Microsoft Authenticode&quot; a Software publisher certificate too? Isn&#39;t a EXE &quot;software&quot;? That really confuses me.\r\n\r\n\r\nSo, my question is now: When I have ordered a Microsoft Authenticode cert, is it then illegal to use it to sign e.g. JAR files or if possible any other content? There seems to be no technical difference between these certificates. All of those products should have the same codesigning EKU-OID &quot;1.3.6.1.5.5.7.3.3&quot;, which does not make any differences between EXE, JAR, Adobe Air and what the hell also exists around there. So, if all &quot;CodeSigning&quot; certificates are technically equal, why do I have to decide then if I want to be a &quot;Java Developer&quot; or &quot;Windows Developer&quot; or &quot;Software Developer&quot;?\r\n\r\nMaybe there are still differences in the certificate? Maybe I get not enough rights in JARs when I use Authenticode-certs for signing?\r\n\r\n(PS: I do not use my software commercially!)","title":"Difference between Authenticode, SPC and Java CodeSign?","body":"<p>Most CAs are selling code signing certificates in different \"products\", like Verisign or Certum:</p>\n\n<ul>\n<li><p>Microsoft Authenticode - \"Allows you to sign EXE, OCX, DLL, bla...\"</p></li>\n<li><p>Java CodeSign - \"Allows you to sign Java code\"</p></li>\n<li><p>Software Publisher Certificate - \"Allows you to sign software\"</p></li>\n</ul>\n\n<p>Well, I am REALLY confused about this. What is the difference between all these products - except the PRICE? I asked Verisign and other CAs a few times since I am curious, but got no answer.</p>\n\n<p>I got a Authenticode certificate from Certum CA. I enrolled it in Internet Explorer, exported it as PKCS#12 PFX and could sign EXE, DLL, ... as promised.</p>\n\n<p>Now... I tried to import this PFX into Java with keytool, then I tried to sign a JAR. And it worked!</p>\n\n<p>And then there is the mysterious \"Software Publisher certificate\" as product. I don't know what I can/should sign with that... Mac? Linux? Isn't \"Microsoft Authenticode\" a Software publisher certificate too? Isn't a EXE \"software\"? That really confuses me.</p>\n\n<p>So, my question is now: When I have ordered a Microsoft Authenticode cert, is it then illegal to use it to sign e.g. JAR files or if possible any other content? There seems to be no technical difference between these certificates. All of those products should have the same codesigning EKU-OID \"1.3.6.1.5.5.7.3.3\", which does not make any differences between EXE, JAR, Adobe Air and what the hell also exists around there. So, if all \"CodeSigning\" certificates are technically equal, why do I have to decide then if I want to be a \"Java Developer\" or \"Windows Developer\" or \"Software Developer\"?</p>\n\n<p>Maybe there are still differences in the certificate? Maybe I get not enough rights in JARs when I use Authenticode-certs for signing?</p>\n\n<p>(PS: I do not use my software commercially!)</p>\n"},{"tags":["java","apache-kafka","avro","confluent-schema-registry","jackson-dataformat-avro"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1682610494,"post_id":76122258,"comment_id":134246386,"body_markdown":"Confluent&#39;s KafkaAvroSerializer already supports Avro ReflectDatum types. You shouldn&#39;t need Jackson. Otherwise, you should use Avro schema to generate a POJO, not the other way around","body":"Confluent&#39;s KafkaAvroSerializer already supports Avro ReflectDatum types. You shouldn&#39;t need Jackson. Otherwise, you should use Avro schema to generate a POJO, not the other way around"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1682610539,"post_id":76122258,"comment_id":134246393,"body_markdown":"Also, `writeValueAsBytes` doesn&#39;t encode the data correctly for the Schema Registry","body":"Also, <code>writeValueAsBytes</code> doesn&#39;t encode the data correctly for the Schema Registry"},{"owner":{"account_id":7568933,"reputation":695,"user_id":5743485,"display_name":"MelleD"},"score":0,"creation_date":1682615944,"post_id":76122258,"comment_id":134247758,"body_markdown":"@OneCricketeer the DTO are already existing. I would like to reuse it. I see no need to create extra avro files and then regenerate the same classes and then need a mapping between DTO and Avro DTOs. You see in the Link how you can generate a Schema during runtime from an Object. That&#39;s the idea what Jackson supports\n\n&quot;Also, writeValueAsBytes doesn&#39;t encode the data correctly for the Schema Registry&quot; --&gt; Thats the message payload from the DTO and not the schema.\n\nFor the schema registry it&#39;s the line before the return. And this ist just a Schema","body":"@OneCricketeer the DTO are already existing. I would like to reuse it. I see no need to create extra avro files and then regenerate the same classes and then need a mapping between DTO and Avro DTOs. You see in the Link how you can generate a Schema during runtime from an Object. That&#39;s the idea what Jackson supports  &quot;Also, writeValueAsBytes doesn&#39;t encode the data correctly for the Schema Registry&quot; --&gt; Thats the message payload from the DTO and not the schema.  For the schema registry it&#39;s the line before the return. And this ist just a Schema"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1682617385,"post_id":76122258,"comment_id":134248089,"body_markdown":"Okay fine. Your error is with the HTTP response, anyway. So, what url are you using? What version of the registry client and server?","body":"Okay fine. Your error is with the HTTP response, anyway. So, what url are you using? What version of the registry client and server?"},{"owner":{"account_id":7568933,"reputation":695,"user_id":5743485,"display_name":"MelleD"},"score":0,"creation_date":1682666135,"post_id":76122258,"comment_id":134254527,"body_markdown":"@OneCricketeer added the information in the Post.","body":"@OneCricketeer added the information in the Post."},{"owner":{"account_id":7568933,"reputation":695,"user_id":5743485,"display_name":"MelleD"},"score":1,"creation_date":1682680852,"post_id":76122258,"comment_id":134257532,"body_markdown":"@OneCricketeer ok its a general issue, because json schema also not work to register","body":"@OneCricketeer ok its a general issue, because json schema also not work to register"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1682685111,"post_id":76122258,"comment_id":134258517,"body_markdown":"Can you verify things work without using testcontainers with the same image? And just using kafka-avro-console-producer, for example? Also, do you really need Docker / Integration tests, when there are mocks available?","body":"Can you verify things work without using testcontainers with the same image? And just using kafka-avro-console-producer, for example? Also, do you really need Docker / Integration tests, when there are mocks available?"}],"answers":[{"tags":[],"owner":{"account_id":7568933,"reputation":695,"user_id":5743485,"display_name":"MelleD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682700247,"creation_date":1682700247,"answer_id":76131638,"question_id":76122258,"body_markdown":"The env for the Schema Registry Testcontainer was wrong\r\nchanged from\r\n  \r\n\r\n    withEnv( &quot;SCHEMA_REGISTRY_HOST_NAME&quot;, &quot;localhost&quot; );\r\n\r\nto\r\n\r\n \r\n\r\n    withEnv( &quot;SCHEMA_REGISTRY_HOST_NAME&quot;, &quot;cp-schema-registry&quot; );","title":"Error register jackson avro schema with confluent cloud schema registry client","body":"<p>The env for the Schema Registry Testcontainer was wrong\nchanged from</p>\n<pre><code>withEnv( &quot;SCHEMA_REGISTRY_HOST_NAME&quot;, &quot;localhost&quot; );\n</code></pre>\n<p>to</p>\n<pre><code>withEnv( &quot;SCHEMA_REGISTRY_HOST_NAME&quot;, &quot;cp-schema-registry&quot; );\n</code></pre>\n"}],"owner":{"account_id":7568933,"reputation":695,"user_id":5743485,"display_name":"MelleD"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":298,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76131638,"answer_count":1,"score":1,"last_activity_date":1682700247,"creation_date":1682609878,"question_id":76122258,"body_markdown":"I generate an Avro schema from a POJO using [Jackson][1] and serialize it. This works quite well so far with the help of Jackson.\r\n\r\nHowever, I cannot upload this schema to the schema registry using the Cached Schema registry.\r\n\r\nTest setup is with Testcontainer see [here][2]:\r\n\r\n\r\n\r\n      SchemaRegistryClient schemaRegistryClient( final String url ) {\r\n         return new CachedSchemaRegistryClient( url, 100 );\r\n      }\r\n\r\n     public byte[] serialize( final Optional&lt;Object&gt; root ) {\r\n          if ( root.isEmpty() ) {\r\n             return new byte[0];\r\n          }\r\n          final Object rootObject = root.get();\r\n          final String subjectName = rootObject.getClass().getSimpleName();\r\n    \r\n          try {\r\n             // Jackson Avro Schema\r\n             final AvroSchema schema = getAvroSchema( rootObject );\r\n             final io.confluent.kafka.schemaregistry.avro.AvroSchema avroSchema = new io.confluent.kafka.schemaregistry.avro.AvroSchema( schema.getAvroSchema(),\r\n                   1 );\r\n             schemaRegistryClient.register( subjectName, avroSchema, false );\r\n             return avroMapper.writer( schema ).writeValueAsBytes( rootObject );\r\n          } catch ( final IOException | RuntimeException e ) {\r\n             throw new SerializationException( &quot;Error serializing Avro message&quot;, e );\r\n          } catch ( final RestClientException e ) {\r\n             throw toKafkaException( e );\r\n          }\r\n    \r\n       }\r\n\r\n\r\nError is:\r\n\r\n    java.net.SocketException: Unexpected end of file from server\r\n    \tat java.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:903)\r\n    \tat java.base/sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:726)\r\n    \tat java.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:900)\r\n    \tat java.base/sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:726)\r\n    \tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1688)\r\n    \tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1589)\r\n    \tat java.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:529)\r\n    \tat io.confluent.kafka.schemaregistry.client.rest.RestService.sendHttpRequest(RestService.java:294)\r\n    \tat io.confluent.kafka.schemaregistry.client.rest.RestService.httpRequest(RestService.java:384)\r\n    \tat io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema(RestService.java:561)\r\n    \tat io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema(RestService.java:549)\r\n    \tat io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.registerAndGetId(CachedSchemaRegistryClient.java:290)\r\n    \tat io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.register(CachedSchemaRegistryClient.java:397)\r\n    \tat io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.register(CachedSchemaRegistryClient.java:370)\r\n\r\nAnyone know experience with this?\r\n\r\n\r\nEDIT\r\n\r\nClient is 7.3.3 and the Container is confluentinc/cp-schema-registry:7.3.3.\r\n\r\nInteresting is the url. Reused the idea from KafkaContainer, but maybe I need another port?\r\n\r\nFirst try:\r\n\r\n       public String getClientUrl() {\r\n          return String.format( &quot;http://%s:%s&quot;, getHost(), getMappedPort( SCHEMA_REGISTRY_PORT ) );\r\n       }\r\n\r\nError:\r\n\r\n    Caused by: java.net.SocketException: Unexpected end of file from server\r\n\r\nSecond try:\r\n\r\n           public String getClientUrl() {\r\n              return String.format( &quot;http://%s:%s&quot;, getHost(), getExposedPorts().get( 0 ) );\r\n           }\r\n    \r\nError:\r\n\r\n    Caused by: java.net.ConnectException: Connection refused\r\n\r\n\r\nAvro Schema looks like this:\r\n\r\n    {\r\n      &quot;type&quot;: &quot;record&quot;,\r\n      &quot;name&quot;: &quot;TestDto&quot;,\r\n      &quot;namespace&quot;: &quot;test.model&quot;,\r\n      &quot;fields&quot;: [\r\n        {\r\n          &quot;name&quot;: &quot;id&quot;,\r\n          &quot;type&quot;: [\r\n            &quot;null&quot;,\r\n            {\r\n              &quot;type&quot;: &quot;long&quot;,\r\n              &quot;java-class&quot;: &quot;java.lang.Long&quot;\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          &quot;name&quot;: &quot;labels&quot;,\r\n          &quot;type&quot;: [\r\n            &quot;null&quot;,\r\n            {\r\n              &quot;type&quot;: &quot;array&quot;,\r\n              &quot;items&quot;: &quot;string&quot;,\r\n              &quot;java-class&quot;: &quot;java.util.Set&quot;\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n\r\nI&#39;m a little puzzled as to why all the java types are in there, but I guess that&#39;s another topic.\r\n\r\n\r\nNext try, was to take the confluent user avro example:\r\n\r\n          final io.confluent.kafka.schemaregistry.avro.AvroSchema schema1 = new io.confluent.kafka.schemaregistry.avro.AvroSchema( new Schema.Parser().parse( &quot;{\\n&quot;\r\n                + &quot;  \\&quot;namespace\\&quot;: \\&quot;io.confluent.developer\\&quot;,\\n&quot;\r\n                + &quot;  \\&quot;type\\&quot;: \\&quot;record\\&quot;,\\n&quot;\r\n                + &quot;  \\&quot;name\\&quot;: \\&quot;User\\&quot;,\\n&quot;\r\n                + &quot;  \\&quot;fields\\&quot;: [\\n&quot;\r\n                + &quot;    {\\n&quot;\r\n                + &quot;      \\&quot;name\\&quot;: \\&quot;name\\&quot;,\\n&quot;\r\n                + &quot;      \\&quot;type\\&quot;: \\&quot;string\\&quot;,\\n&quot;\r\n                + &quot;      \\&quot;avro.java.string\\&quot;: \\&quot;String\\&quot;\\n&quot;\r\n                + &quot;    },\\n&quot;\r\n                + &quot;    {\\n&quot;\r\n                + &quot;      \\&quot;name\\&quot;: \\&quot;age\\&quot;,\\n&quot;\r\n                + &quot;      \\&quot;type\\&quot;: \\&quot;int\\&quot;\\n&quot;\r\n                + &quot;    }\\n&quot;\r\n                + &quot;  ]\\n&quot;\r\n                + &quot;}&quot;));\r\n    schemaRegistryClient.register( subjectName, schema1, false );\r\n\r\nJson Schema register is also not working right now. So looks for a general issue with the schema registry.\r\n\r\nTried with:\r\n\r\n    spring.kafka.producer.value-serializer=io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\r\n\r\n    Caused by: java.net.SocketException: Unexpected end of file from server\r\n    \tat java.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:903)\r\n\r\n  [1]: https://github.com/FasterXML/jackson-dataformats-binary/tree/master/avro#generating-avro-schema-from-pojo-definition\r\n  [2]: https://stackoverflow.com/questions/76119369/containers-schemaregistry-cant-connect-to-kafka-container/76121640#76121640\r\n\r\n\r\n\r\n\r\n","title":"Error register jackson avro schema with confluent cloud schema registry client","body":"<p>I generate an Avro schema from a POJO using <a href=\"https://github.com/FasterXML/jackson-dataformats-binary/tree/master/avro#generating-avro-schema-from-pojo-definition\" rel=\"nofollow noreferrer\">Jackson</a> and serialize it. This works quite well so far with the help of Jackson.</p>\n<p>However, I cannot upload this schema to the schema registry using the Cached Schema registry.</p>\n<p>Test setup is with Testcontainer see <a href=\"https://stackoverflow.com/questions/76119369/containers-schemaregistry-cant-connect-to-kafka-container/76121640#76121640\">here</a>:</p>\n<pre><code>  SchemaRegistryClient schemaRegistryClient( final String url ) {\n     return new CachedSchemaRegistryClient( url, 100 );\n  }\n\n public byte[] serialize( final Optional&lt;Object&gt; root ) {\n      if ( root.isEmpty() ) {\n         return new byte[0];\n      }\n      final Object rootObject = root.get();\n      final String subjectName = rootObject.getClass().getSimpleName();\n\n      try {\n         // Jackson Avro Schema\n         final AvroSchema schema = getAvroSchema( rootObject );\n         final io.confluent.kafka.schemaregistry.avro.AvroSchema avroSchema = new io.confluent.kafka.schemaregistry.avro.AvroSchema( schema.getAvroSchema(),\n               1 );\n         schemaRegistryClient.register( subjectName, avroSchema, false );\n         return avroMapper.writer( schema ).writeValueAsBytes( rootObject );\n      } catch ( final IOException | RuntimeException e ) {\n         throw new SerializationException( &quot;Error serializing Avro message&quot;, e );\n      } catch ( final RestClientException e ) {\n         throw toKafkaException( e );\n      }\n\n   }\n</code></pre>\n<p>Error is:</p>\n<pre><code>java.net.SocketException: Unexpected end of file from server\n    at java.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:903)\n    at java.base/sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:726)\n    at java.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:900)\n    at java.base/sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:726)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1688)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1589)\n    at java.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:529)\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.sendHttpRequest(RestService.java:294)\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.httpRequest(RestService.java:384)\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema(RestService.java:561)\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema(RestService.java:549)\n    at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.registerAndGetId(CachedSchemaRegistryClient.java:290)\n    at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.register(CachedSchemaRegistryClient.java:397)\n    at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.register(CachedSchemaRegistryClient.java:370)\n</code></pre>\n<p>Anyone know experience with this?</p>\n<p>EDIT</p>\n<p>Client is 7.3.3 and the Container is confluentinc/cp-schema-registry:7.3.3.</p>\n<p>Interesting is the url. Reused the idea from KafkaContainer, but maybe I need another port?</p>\n<p>First try:</p>\n<pre><code>   public String getClientUrl() {\n      return String.format( &quot;http://%s:%s&quot;, getHost(), getMappedPort( SCHEMA_REGISTRY_PORT ) );\n   }\n</code></pre>\n<p>Error:</p>\n<pre><code>Caused by: java.net.SocketException: Unexpected end of file from server\n</code></pre>\n<p>Second try:</p>\n<pre><code>       public String getClientUrl() {\n          return String.format( &quot;http://%s:%s&quot;, getHost(), getExposedPorts().get( 0 ) );\n       }\n</code></pre>\n<p>Error:</p>\n<pre><code>Caused by: java.net.ConnectException: Connection refused\n</code></pre>\n<p>Avro Schema looks like this:</p>\n<pre><code>{\n  &quot;type&quot;: &quot;record&quot;,\n  &quot;name&quot;: &quot;TestDto&quot;,\n  &quot;namespace&quot;: &quot;test.model&quot;,\n  &quot;fields&quot;: [\n    {\n      &quot;name&quot;: &quot;id&quot;,\n      &quot;type&quot;: [\n        &quot;null&quot;,\n        {\n          &quot;type&quot;: &quot;long&quot;,\n          &quot;java-class&quot;: &quot;java.lang.Long&quot;\n        }\n      ]\n    },\n    {\n      &quot;name&quot;: &quot;labels&quot;,\n      &quot;type&quot;: [\n        &quot;null&quot;,\n        {\n          &quot;type&quot;: &quot;array&quot;,\n          &quot;items&quot;: &quot;string&quot;,\n          &quot;java-class&quot;: &quot;java.util.Set&quot;\n        }\n      ]\n    }\n  ]\n}\n</code></pre>\n<p>I'm a little puzzled as to why all the java types are in there, but I guess that's another topic.</p>\n<p>Next try, was to take the confluent user avro example:</p>\n<pre><code>      final io.confluent.kafka.schemaregistry.avro.AvroSchema schema1 = new io.confluent.kafka.schemaregistry.avro.AvroSchema( new Schema.Parser().parse( &quot;{\\n&quot;\n            + &quot;  \\&quot;namespace\\&quot;: \\&quot;io.confluent.developer\\&quot;,\\n&quot;\n            + &quot;  \\&quot;type\\&quot;: \\&quot;record\\&quot;,\\n&quot;\n            + &quot;  \\&quot;name\\&quot;: \\&quot;User\\&quot;,\\n&quot;\n            + &quot;  \\&quot;fields\\&quot;: [\\n&quot;\n            + &quot;    {\\n&quot;\n            + &quot;      \\&quot;name\\&quot;: \\&quot;name\\&quot;,\\n&quot;\n            + &quot;      \\&quot;type\\&quot;: \\&quot;string\\&quot;,\\n&quot;\n            + &quot;      \\&quot;avro.java.string\\&quot;: \\&quot;String\\&quot;\\n&quot;\n            + &quot;    },\\n&quot;\n            + &quot;    {\\n&quot;\n            + &quot;      \\&quot;name\\&quot;: \\&quot;age\\&quot;,\\n&quot;\n            + &quot;      \\&quot;type\\&quot;: \\&quot;int\\&quot;\\n&quot;\n            + &quot;    }\\n&quot;\n            + &quot;  ]\\n&quot;\n            + &quot;}&quot;));\nschemaRegistryClient.register( subjectName, schema1, false );\n</code></pre>\n<p>Json Schema register is also not working right now. So looks for a general issue with the schema registry.</p>\n<p>Tried with:</p>\n<pre><code>spring.kafka.producer.value-serializer=io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\n\nCaused by: java.net.SocketException: Unexpected end of file from server\n    at java.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:903)\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9525,"page":467,"page_size":100}
