{"items":[{"tags":["java","java-8","java-stream"],"answers":[{"comments":[{"owner":{"account_id":6669020,"reputation":371,"user_id":5145695,"display_name":"zaozaoer"},"score":0,"creation_date":1542183889,"post_id":53295769,"comment_id":93472405,"body_markdown":"I think you are right, could you let me know how to fix it?\nsorry I am new to java stream...","body":"I think you are right, could you let me know how to fix it? sorry I am new to java stream..."},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1542183982,"post_id":53295769,"comment_id":93472449,"body_markdown":"If you want to filter `occList` and allow only those which `getOccSCd` is in list of string I can give you code sample.","body":"If you want to filter <code>occList</code> and allow only those which <code>getOccSCd</code> is in list of string I can give you code sample."},{"owner":{"account_id":6669020,"reputation":371,"user_id":5145695,"display_name":"zaozaoer"},"score":0,"creation_date":1542185769,"post_id":53295769,"comment_id":93473359,"body_markdown":"thanks so much for your quick answer as well. It was very helpful!","body":"thanks so much for your quick answer as well. It was very helpful!"}],"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1542185236,"creation_date":1542183823,"answer_id":53295769,"question_id":53295725,"body_markdown":"In your loop `for(String word: strings)` you overwrite your `separatedByComma` variable.","title":"get a comma separated string using java stream","body":"<p>In your loop <code>for(String word: strings)</code> you overwrite your <code>separatedByComma</code> variable.</p>\n"},{"comments":[{"owner":{"account_id":6669020,"reputation":371,"user_id":5145695,"display_name":"zaozaoer"},"score":0,"creation_date":1542185800,"post_id":53295809,"comment_id":93473377,"body_markdown":"Thank you very much, your solution produces exactly what I needed.","body":"Thank you very much, your solution produces exactly what I needed."}],"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":1,"down_vote_count":1,"up_vote_count":33,"is_accepted":true,"score":32,"last_activity_date":1542184863,"creation_date":1542183943,"answer_id":53295809,"question_id":53295725,"body_markdown":"Each iteration of your `for` loop overwrites the value of `separatedByComma`. The first iteration assigns the `String` &quot;a&quot; to it, and the second replaces it with &quot;b&quot;.\r\n\r\nYou should `Stream` over the elements of the `strings` `List` in order to join the `String`s that match each of them into a single output `String`:\r\n\r\n    String separatedByComma = \r\n        strings.stream()\r\n               .flatMap(word -&gt; occList.stream()\r\n                                       .filter(occ -&gt; word.equalsIgnoreCase (occ.getOccSCd()))\r\n                                       .map (occ -&gt; occ.getOccSNm()))\r\n               .collect(Collectors.joining (&quot;,&quot;));\r\n\r\nOutput:\r\n\r\n    a,b","title":"get a comma separated string using java stream","body":"<p>Each iteration of your <code>for</code> loop overwrites the value of <code>separatedByComma</code>. The first iteration assigns the <code>String</code> \"a\" to it, and the second replaces it with \"b\".</p>\n\n<p>You should <code>Stream</code> over the elements of the <code>strings</code> <code>List</code> in order to join the <code>String</code>s that match each of them into a single output <code>String</code>:</p>\n\n<pre><code>String separatedByComma = \n    strings.stream()\n           .flatMap(word -&gt; occList.stream()\n                                   .filter(occ -&gt; word.equalsIgnoreCase (occ.getOccSCd()))\n                                   .map (occ -&gt; occ.getOccSNm()))\n           .collect(Collectors.joining (\",\"));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a,b\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1565312,"reputation":21,"user_id":1454254,"display_name":"Pribic Rubik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693570088,"creation_date":1693570088,"answer_id":77022970,"question_id":53295725,"body_markdown":"You can also use `String.join(&quot;,&quot;, strings)`","title":"get a comma separated string using java stream","body":"<p>You can also use <code>String.join(&quot;,&quot;, strings)</code></p>\n"}],"owner":{"account_id":6669020,"reputation":371,"user_id":5145695,"display_name":"zaozaoer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19283,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":53295809,"answer_count":3,"score":16,"last_activity_date":1693570088,"creation_date":1542183637,"question_id":53295725,"body_markdown":"I have the following code using java `Stream`.\r\n\r\nI am trying the get the function to build a string of value: &quot;a,b&quot; in this case.\r\nhowever, the output (`separatedByComma` in this case) is always &quot;b&quot;.\r\n\r\nCould somebody shed some light please?\r\n\r\n    @Test\r\n    public void testJoin() {\r\n        List&lt;MOccS&gt; occList = new ArrayList&lt;&gt; (  );\r\n        MOccS mOccS = new MOccS ();\r\n        mOccS.setOccSCd ( &quot;1&quot; );\r\n        mOccS.setOccSNm ( &quot;a&quot; );\r\n        occList.add ( mOccS );\r\n\r\n        MOccS mOccS2 = new MOccS ();\r\n        mOccS2.setOccSCd ( &quot;2&quot; );\r\n        mOccS2.setOccSNm ( &quot;b&quot; );\r\n        occList.add ( mOccS2 );\r\n\r\n\r\n        List&lt;String&gt; strings = new ArrayList&lt;&gt; (  );\r\n        strings.add ( &quot;1&quot; );\r\n        strings.add ( &quot;2&quot; );\r\n\r\n        String separatedByComma = &quot;&quot;;\r\n        for(String word: strings) {\r\n            separatedByComma = occList.stream ()\r\n                                      .filter ( occ -&gt; word.equalsIgnoreCase ( occ.getOccSCd () ) )         \r\n                                      .map ( occ -&gt; occ.getOccSNm () )\r\n                                      .collect ( Collectors.joining ( &quot;,&quot; ) );\r\n         }\r\n\r\n         System.out.println (separatedByComma);\r\n    }\r\n\r\n\r\n    class MOccS{\r\n        String occSCd;\r\n        String occSNm;\r\n        ...\r\n        getter/setter\r\n        ...\r\n    }\r\n\r\n\r\n   \r\n","title":"get a comma separated string using java stream","body":"<p>I have the following code using java <code>Stream</code>.</p>\n\n<p>I am trying the get the function to build a string of value: \"a,b\" in this case.\nhowever, the output (<code>separatedByComma</code> in this case) is always \"b\".</p>\n\n<p>Could somebody shed some light please?</p>\n\n<pre><code>@Test\npublic void testJoin() {\n    List&lt;MOccS&gt; occList = new ArrayList&lt;&gt; (  );\n    MOccS mOccS = new MOccS ();\n    mOccS.setOccSCd ( \"1\" );\n    mOccS.setOccSNm ( \"a\" );\n    occList.add ( mOccS );\n\n    MOccS mOccS2 = new MOccS ();\n    mOccS2.setOccSCd ( \"2\" );\n    mOccS2.setOccSNm ( \"b\" );\n    occList.add ( mOccS2 );\n\n\n    List&lt;String&gt; strings = new ArrayList&lt;&gt; (  );\n    strings.add ( \"1\" );\n    strings.add ( \"2\" );\n\n    String separatedByComma = \"\";\n    for(String word: strings) {\n        separatedByComma = occList.stream ()\n                                  .filter ( occ -&gt; word.equalsIgnoreCase ( occ.getOccSCd () ) )         \n                                  .map ( occ -&gt; occ.getOccSNm () )\n                                  .collect ( Collectors.joining ( \",\" ) );\n     }\n\n     System.out.println (separatedByComma);\n}\n\n\nclass MOccS{\n    String occSCd;\n    String occSNm;\n    ...\n    getter/setter\n    ...\n}\n</code></pre>\n"},{"tags":["java","mongodb","mongodb-query","aggregation-framework"],"answers":[{"tags":[],"owner":{"account_id":10907337,"reputation":38824,"user_id":8017690,"display_name":"Yong Shun"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663331389,"creation_date":1663331389,"answer_id":73744848,"question_id":73744784,"body_markdown":"You should use the `$or` operator instead of `$and`.\r\n\r\nThis will fulfill:\r\n\r\n1. If `?0` is null, the document is selected.\r\n\r\n2. If `?0` is matched with `companyName` value, the document is selected.\r\n\r\n```\r\n{\r\n  $match: {\r\n    $expr: {\r\n      $or: [\r\n        { $eq: [?0, null] },\r\n        { $eq: [&quot;$companyName&quot;, ?0] }\r\n      ]\r\n    }\r\n  }\r\n}\r\n\r\n```","title":"MongoDB Aggregation - Match if variable is not null","body":"<p>You should use the <code>$or</code> operator instead of <code>$and</code>.</p>\n<p>This will fulfill:</p>\n<ol>\n<li><p>If <code>?0</code> is null, the document is selected.</p>\n</li>\n<li><p>If <code>?0</code> is matched with <code>companyName</code> value, the document is selected.</p>\n</li>\n</ol>\n<pre><code>{\n  $match: {\n    $expr: {\n      $or: [\n        { $eq: [?0, null] },\n        { $eq: [&quot;$companyName&quot;, ?0] }\n      ]\n    }\n  }\n}\n\n</code></pre>\n"}],"owner":{"account_id":17796153,"reputation":83,"user_id":12923941,"display_name":"PWJ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73744848,"answer_count":1,"score":0,"last_activity_date":1693569859,"creation_date":1663331017,"question_id":73744784,"body_markdown":"I want to write a MongoDB Aggregation query to do the following:\r\n\r\n1. I pass a variable to the query method.\r\n2. If the variable is not null, I want to check if it matches.\r\n3. If the variable is null, no match is required\r\n\r\nFor example:\r\nI pass companyName as a variable and if it is not null, I get records for that company name, otherwise, if it is null, I get records for all company names.\r\n\r\nI have come up with something like this: (The match is a part of a larger aggregation query)\r\n\r\n```\r\n{ $match : { $and: [ { ?0: { $ne : null }} , {&#39;companyName&#39; : ?0}] }}\r\n\r\nList&lt;AggregationGroupSum&gt; getCountByCompany(String companyName)\r\n```\r\n\r\nThe `?0` is the variable companyName.\r\n\r\nI understand that the approach to check it is quite juvenile, but I am new to MongoDB and aggregation query and I would like any help on how to tackle this, whether it be through the aggregation or otherwise.\r\n\r\nThanks!","title":"MongoDB Aggregation - Match if variable is not null","body":"<p>I want to write a MongoDB Aggregation query to do the following:</p>\n<ol>\n<li>I pass a variable to the query method.</li>\n<li>If the variable is not null, I want to check if it matches.</li>\n<li>If the variable is null, no match is required</li>\n</ol>\n<p>For example:\nI pass companyName as a variable and if it is not null, I get records for that company name, otherwise, if it is null, I get records for all company names.</p>\n<p>I have come up with something like this: (The match is a part of a larger aggregation query)</p>\n<pre><code>{ $match : { $and: [ { ?0: { $ne : null }} , {'companyName' : ?0}] }}\n\nList&lt;AggregationGroupSum&gt; getCountByCompany(String companyName)\n</code></pre>\n<p>The <code>?0</code> is the variable companyName.</p>\n<p>I understand that the approach to check it is quite juvenile, but I am new to MongoDB and aggregation query and I would like any help on how to tackle this, whether it be through the aggregation or otherwise.</p>\n<p>Thanks!</p>\n"},{"tags":["java","web-services","soap","wsdl","jax-ws"],"answers":[{"comments":[{"owner":{"account_id":6628797,"reputation":364,"user_id":5657937,"display_name":"Binoy Cherian"},"score":2,"creation_date":1598961921,"post_id":42905108,"comment_id":112620334,"body_markdown":"Answers via links are not good. Both the links are down. It&quot;s always best to copy a snippet here","body":"Answers via links are not good. Both the links are down. It&quot;s always best to copy a snippet here"}],"tags":[],"owner":{"account_id":5347166,"reputation":383,"user_id":4262397,"display_name":"Nikhil D&#232;vr&#232;"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1490044441,"creation_date":1490017212,"answer_id":42905108,"question_id":42897047,"body_markdown":"You can use this below line to add header before making a request, since you&#39;re using JAX-WS:\r\n\r\n    SOAPHeader header = envelope.addHeader();\r\n\r\n\r\nThere are plenty of tutorials that you could refer to.  Go to google and search for consuming SOAP Web Service. Here is one such tutorial you can refer to:\r\n\r\nhttp://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client/\r\n\r\nHere is another good example you could use:\r\nhttps://soa2world.blogspot.com/2009/05/direct-web-service-client-using-java.html\r\n\r\n\r\nHope this helps.\r\n\r\n","title":"How to set headers in Soap Request Java","body":"<p>You can use this below line to add header before making a request, since you're using JAX-WS:</p>\n\n<pre><code>SOAPHeader header = envelope.addHeader();\n</code></pre>\n\n<p>There are plenty of tutorials that you could refer to.  Go to google and search for consuming SOAP Web Service. Here is one such tutorial you can refer to:</p>\n\n<p><a href=\"http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client/\" rel=\"nofollow noreferrer\">http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client/</a></p>\n\n<p>Here is another good example you could use:\n<a href=\"https://soa2world.blogspot.com/2009/05/direct-web-service-client-using-java.html\" rel=\"nofollow noreferrer\">https://soa2world.blogspot.com/2009/05/direct-web-service-client-using-java.html</a></p>\n\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":2570248,"reputation":185,"user_id":2229181,"accept_rate":0,"display_name":"ROHIT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14099,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693569780,"creation_date":1489990980,"question_id":42897047,"body_markdown":"I am facing issue in forming a SOAP request.\r\n \r\nIn that request i am supposed to add username , password and some other info in header part not the part of payload.\r\n\r\nBelow the Entry in wsdl\r\n\r\n    &lt;wsdl:message name=&quot;InputUploadCustomerDocument_Headers&quot;&gt;\r\n    &lt;wsdl:part name=&quot;DocumentType&quot; element=&quot;tns:DocumentType&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;FileName&quot; element=&quot;tns:FileName&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;Password&quot; element=&quot;tns:Password&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;PinNo&quot; element=&quot;tns:PinNo&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;UserName&quot; element=&quot;tns:UserName&quot;/&gt;\r\n    &lt;/wsdl:message&gt;\r\n    &lt;wsdl:message name=&quot;ReturnUploadCustomerDocument&quot;&gt;\r\n    &lt;wsdl:part name=&quot;parameters&quot; element=&quot;tns:ReturnUploadCustomerDocument&quot;/&gt;\r\n    &lt;/wsdl:message&gt;\r\n\r\n\r\n    &lt;wsdl:operation name=&quot;UploadCustomerDocument&quot;&gt;\r\n    &lt;soap:operation soapAction=&quot;http://tempuri.org/ISend/UploadCustomerDocument&quot; style=&quot;document&quot;/&gt;\r\n    &lt;wsdl:input name=&quot;InputUploadCustomerDocument&quot;&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;DocumentType&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;FileName&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;Password&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;PinNo&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;UserName&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:body use=&quot;literal&quot;/&gt;\r\n    &lt;/wsdl:input&gt;\r\n    &lt;wsdl:output name=&quot;ReturnUploadCustomerDocument&quot;&gt;\r\n    &lt;soap:body use=&quot;literal&quot;/&gt;\r\n    &lt;/wsdl:output&gt;\r\n    &lt;/wsdl:operation&gt;\r\n\r\n\r\nAnd the InputUploadCustomerDocument Java File Below, the file don&#39;t have username, password and other fields, and i need to set these parameters before making reuqest\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n    &quot;fileData&quot;\r\n    })\r\n    @XmlRootElement(name = &quot;InputUploadCustomerDocument&quot;)\r\n    public class InputUploadCustomerDocument {\r\n\r\n    @XmlElement(name = &quot;FileData&quot;, required = true)\r\n    protected byte[] fileData;\r\n  \r\n    /**\r\n     * Gets the value of the fileData property.\r\n     * \r\n     * @return\r\n     *     possible object is\r\n     *     byte[]\r\n     */\r\n    public byte[] getFileData() {\r\n        return fileData;\r\n    }\r\n\r\n    /**\r\n     * Sets the value of the fileData property.\r\n     * \r\n     * @param value\r\n     *     allowed object is\r\n     *     byte[]\r\n     */\r\n    public void setFileData(byte[] value) {\r\n        this.fileData = value;\r\n    }\r\n}\r\n\r\n\r\nHere is the function i need to call\r\n\r\n    @WebMethod(operationName = &quot;UploadCustomerDocument&quot;, action = &quot;http://tempuri.org/ISend/UploadCustomerDocument&quot;)\r\n    @WebResult(name = &quot;ReturnUploadCustomerDocument&quot;, targetNamespace = &quot;http://tempuri.org/&quot;, partName = &quot;parameters&quot;)\r\n    @SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)\r\n    public ReturnUploadCustomerDocument uploadCustomerDocument(\r\n        @WebParam(name = &quot;InputUploadCustomerDocument&quot;, targetNamespace = &quot;http://tempuri.org/&quot;, partName = &quot;parameters&quot;)\r\n        InputUploadCustomerDocument parameters);\r\n\r\nCan someone help how i can set these headers?","title":"How to set headers in Soap Request Java","body":"<p>I am facing issue in forming a SOAP request.</p>\n\n<p>In that request i am supposed to add username , password and some other info in header part not the part of payload.</p>\n\n<p>Below the Entry in wsdl</p>\n\n<pre><code>&lt;wsdl:message name=\"InputUploadCustomerDocument_Headers\"&gt;\n&lt;wsdl:part name=\"DocumentType\" element=\"tns:DocumentType\"/&gt;\n&lt;wsdl:part name=\"FileName\" element=\"tns:FileName\"/&gt;\n&lt;wsdl:part name=\"Password\" element=\"tns:Password\"/&gt;\n&lt;wsdl:part name=\"PinNo\" element=\"tns:PinNo\"/&gt;\n&lt;wsdl:part name=\"UserName\" element=\"tns:UserName\"/&gt;\n&lt;/wsdl:message&gt;\n&lt;wsdl:message name=\"ReturnUploadCustomerDocument\"&gt;\n&lt;wsdl:part name=\"parameters\" element=\"tns:ReturnUploadCustomerDocument\"/&gt;\n&lt;/wsdl:message&gt;\n\n\n&lt;wsdl:operation name=\"UploadCustomerDocument\"&gt;\n&lt;soap:operation soapAction=\"http://tempuri.org/ISend/UploadCustomerDocument\" style=\"document\"/&gt;\n&lt;wsdl:input name=\"InputUploadCustomerDocument\"&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"DocumentType\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"FileName\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"Password\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"PinNo\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"UserName\" use=\"literal\"/&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:input&gt;\n&lt;wsdl:output name=\"ReturnUploadCustomerDocument\"&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:output&gt;\n&lt;/wsdl:operation&gt;\n</code></pre>\n\n<p>And the InputUploadCustomerDocument Java File Below, the file don't have username, password and other fields, and i need to set these parameters before making reuqest</p>\n\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = \"\", propOrder = {\n\"fileData\"\n})\n@XmlRootElement(name = \"InputUploadCustomerDocument\")\npublic class InputUploadCustomerDocument {\n\n@XmlElement(name = \"FileData\", required = true)\nprotected byte[] fileData;\n\n/**\n * Gets the value of the fileData property.\n * \n * @return\n *     possible object is\n *     byte[]\n */\npublic byte[] getFileData() {\n    return fileData;\n}\n\n/**\n * Sets the value of the fileData property.\n * \n * @param value\n *     allowed object is\n *     byte[]\n */\npublic void setFileData(byte[] value) {\n    this.fileData = value;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Here is the function i need to call</p>\n\n<pre><code>@WebMethod(operationName = \"UploadCustomerDocument\", action = \"http://tempuri.org/ISend/UploadCustomerDocument\")\n@WebResult(name = \"ReturnUploadCustomerDocument\", targetNamespace = \"http://tempuri.org/\", partName = \"parameters\")\n@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)\npublic ReturnUploadCustomerDocument uploadCustomerDocument(\n    @WebParam(name = \"InputUploadCustomerDocument\", targetNamespace = \"http://tempuri.org/\", partName = \"parameters\")\n    InputUploadCustomerDocument parameters);\n</code></pre>\n\n<p>Can someone help how i can set these headers?</p>\n"},{"tags":["java","kotlin","localdate"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693689505,"post_id":77022907,"comment_id":135794548,"body_markdown":"Stop using both `java.sql.Date` and `java.util.Date`. Both legacy classes were supplanted years ago by the modern *java.time* classes, replaced by `java.time.LocalDate` and `java.time.Instant` respectively. JDBC 4.2+ requires all JDBC drivers to support the *java.time* types.","body":"Stop using both <code>java.sql.Date</code> and <code>java.util.Date</code>. Both legacy classes were supplanted years ago by the modern <i>java.time</i> classes, replaced by <code>java.time.LocalDate</code> and <code>java.time.Instant</code> respectively. JDBC 4.2+ requires all JDBC drivers to support the <i>java.time</i> types."}],"owner":{"account_id":2881516,"reputation":77,"user_id":2472307,"display_name":"AAA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1693569658,"answer_count":0,"score":0,"last_activity_date":1693569568,"creation_date":1693569568,"question_id":77022907,"body_markdown":"it.date is a &quot;Date&quot; type (we retrieve from mysql db) and I am trying to do a comparison of a LocalDate.now and return the value in LocalDate type. However, I couldn&#39;t find the right way to do this as I am getting parser errors     \r\n    \r\n    private val datePattern = &quot;M/d/yy&quot; \r\n            \r\n    if (LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern)) &gt; LocalDate.now().minusYears(1)){  \r\n             return LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern))\r\n    }","title":"Kotlin Date to LocalDate comparison","body":"<p>it.date is a &quot;Date&quot; type (we retrieve from mysql db) and I am trying to do a comparison of a LocalDate.now and return the value in LocalDate type. However, I couldn't find the right way to do this as I am getting parser errors</p>\n<pre><code>private val datePattern = &quot;M/d/yy&quot; \n        \nif (LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern)) &gt; LocalDate.now().minusYears(1)){  \n         return LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern))\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-3"],"comments":[{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693306943,"post_id":76999508,"comment_id":135740297,"body_markdown":"I think with minor changes and @Configuration itself you can make this work? Do you want to specifically use @Autoconfiguration?","body":"I think with minor changes and @Configuration itself you can make this work? Do you want to specifically use @Autoconfiguration?"},{"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"score":0,"creation_date":1693314837,"post_id":76999508,"comment_id":135742038,"body_markdown":"`proxyBeanMethods = false` means that your `prototypeComponent` `@Bean` method is now an unproxied factory bean that must return a complete `PrototypeComponent`. You cannot rely on Spring to inject dependencies into it because there is no method proxy in place to do it. You can add more bean parameters to your `@Bean` method and spring will resolve them, or you can add them as members to your `TestPrototypeConfiguration` class because it is itself a bean.","body":"<code>proxyBeanMethods = false</code> means that your <code>prototypeComponent</code> <code>@Bean</code> method is now an unproxied factory bean that must return a complete <code>PrototypeComponent</code>. You cannot rely on Spring to inject dependencies into it because there is no method proxy in place to do it. You can add more bean parameters to your <code>@Bean</code> method and spring will resolve them, or you can add them as members to your <code>TestPrototypeConfiguration</code> class because it is itself a bean."},{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693316013,"post_id":76999508,"comment_id":135742324,"body_markdown":"I think that the spring cannot resolve arguments which i would like to pass from my code :)","body":"I think that the spring cannot resolve arguments which i would like to pass from my code :)"}],"answers":[{"comments":[{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693311029,"post_id":76999661,"comment_id":135741175,"body_markdown":"This code is not work. At least `SingletonComponent` will create `PrototypeComponent` once when the singletone-bean will be constructed.\n\nYes, we can change annotation in java-configuration for prototype bean for the following\n\n    `@Scope(value = &quot;prototype&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)`\n\n\nBut my question is how to create prototype-bean with arguments in constructor-stage?","body":"This code is not work. At least <code>SingletonComponent</code> will create <code>PrototypeComponent</code> once when the singletone-bean will be constructed.  Yes, we can change annotation in java-configuration for prototype bean for the following      <code>@Scope(value = &quot;prototype&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)</code>   But my question is how to create prototype-bean with arguments in constructor-stage?"},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693311092,"post_id":76999661,"comment_id":135741183,"body_markdown":"Okay, in that case can you try creating an ObjectFactory&lt;PrototypeComponent&gt; (Some sort of factory design pattern) ?","body":"Okay, in that case can you try creating an ObjectFactory&lt;PrototypeComponent&gt; (Some sort of factory design pattern) ?"},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693311242,"post_id":76999661,"comment_id":135741219,"body_markdown":"I meant Autowired private PrototypeComponent prototypeComponent; instead of this use Autowired private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;","body":"I meant Autowired private PrototypeComponent prototypeComponent; instead of this use Autowired private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;"},{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693313370,"post_id":76999661,"comment_id":135741698,"body_markdown":"Yes, but this does not solve the problem for passing arguments to the prototype bean.","body":"Yes, but this does not solve the problem for passing arguments to the prototype bean."},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693313761,"post_id":76999661,"comment_id":135741780,"body_markdown":"updated the answer, see if that make sense.","body":"updated the answer, see if that make sense."},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693313833,"post_id":76999661,"comment_id":135741798,"body_markdown":"By default, Spring doesn&#39;t provide a built-in mechanism to pass arguments to prototype beans through the ObjectFactory. If you encounter issues with the above approach, you might need to implement a custom scope. A custom scope allows you to control the creation of prototype beans and pass arguments. Let me know if you need any help there.","body":"By default, Spring doesn&#39;t provide a built-in mechanism to pass arguments to prototype beans through the ObjectFactory. If you encounter issues with the above approach, you might need to implement a custom scope. A custom scope allows you to control the creation of prototype beans and pass arguments. Let me know if you need any help there."},{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693314734,"post_id":76999661,"comment_id":135742003,"body_markdown":"Yes, I see that the ObjectFactory does not accept arguments. In my opinion very strange that in spring boot v3 the compatibility for creation of prototype bean with arguments is missed.","body":"Yes, I see that the ObjectFactory does not accept arguments. In my opinion very strange that in spring boot v3 the compatibility for creation of prototype bean with arguments is missed."},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693314802,"post_id":76999661,"comment_id":135742029,"body_markdown":"Not sure about it, being long time since i did this, Lets raise it to spring may be?","body":"Not sure about it, being long time since i did this, Lets raise it to spring may be?"},{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693478304,"post_id":76999661,"comment_id":135767747,"body_markdown":"I have found ObjectProvider which can solve this problem. But I don&#39;t know Is it the good practice for spring?","body":"I have found ObjectProvider which can solve this problem. But I don&#39;t know Is it the good practice for spring?"}],"tags":[],"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"comment_count":9,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693313730,"creation_date":1693307545,"answer_id":76999661,"question_id":76999508,"body_markdown":" here&#39;s the modified code that should work in Spring Boot 3\r\n    \r\n  \r\n       public class PrototypeComponent {\r\n        private final int value;\r\n    \r\n        public PrototypeComponent(int value) {\r\n            this.value = value;\r\n        }\r\n    \r\n        // Other methods and properties\r\n    }\r\n\r\n\r\n    @Component\r\n    public class SingletonComponent {\r\n    \r\n        @Autowired\r\n        private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;\r\n    \r\n        public void test() {\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                PrototypeComponent instance = prototypeComponentFactory.getObject(i); // Pass argument here\r\n                // Use the instance as needed\r\n            }\r\n        }\r\n    }\r\n\r\n   \r\n\r\nIn this example, I&#39;ve used constructor injection to inject the prototype bean (PrototypeComponent) into the singleton bean (SingletonComponent). This way, each time you use the prototypeComponent field in the SingletonComponent class, you&#39;ll get a new instance of the prototype bean.\r\n\r\n*Please note that in Spring Boot 3, you don&#39;t need to manually define the bean creation logic using the supplier approach as in your initial code. Spring Boot&#39;s dependency injection mechanism will automatically take care of injecting the prototype bean when needed. This approach aligns with the principles of dependency injection and encapsulates the creation logic within the Spring framework.*\r\n","title":"How to create Prototype bean with parameters","body":"<p>here's the modified code that should work in Spring Boot 3</p>\n<pre><code>   public class PrototypeComponent {\n    private final int value;\n\n    public PrototypeComponent(int value) {\n        this.value = value;\n    }\n\n    // Other methods and properties\n}\n\n\n@Component\npublic class SingletonComponent {\n\n    @Autowired\n    private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            PrototypeComponent instance = prototypeComponentFactory.getObject(i); // Pass argument here\n            // Use the instance as needed\n        }\n    }\n}\n</code></pre>\n<p>In this example, I've used constructor injection to inject the prototype bean (PrototypeComponent) into the singleton bean (SingletonComponent). This way, each time you use the prototypeComponent field in the SingletonComponent class, you'll get a new instance of the prototype bean.</p>\n<p><em>Please note that in Spring Boot 3, you don't need to manually define the bean creation logic using the supplier approach as in your initial code. Spring Boot's dependency injection mechanism will automatically take care of injecting the prototype bean when needed. This approach aligns with the principles of dependency injection and encapsulates the creation logic within the Spring framework.</em></p>\n"},{"tags":[],"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693568624,"creation_date":1693568624,"answer_id":77022824,"question_id":76999508,"body_markdown":"What I do, which works (i.e., this is in production and has been for a while and is fine on both Spring 5 and 6), is use an [`ObjectProvider`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/ObjectProvider.html).\r\n```java\r\n@Component\r\npublic class SingletonComponent {\r\n    @Autowired\r\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\r\n\r\n    public void test() {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            var instance = prototypeComponentFactory.getObject(i);\r\n            // Use the instance as needed\r\n        }\r\n    }\r\n}\r\n```\r\nThis will pass the argument through, assuming you have suitably annotated objects and constructors (i.e., there is a bean of type `PrototypeComponent` with scope `PROTOTYPE` in your context whose constructor takes an `int` or `Integer`).\r\n\r\nI _prefer_ to wrap it slightly, like this, so that I have more type safety:\r\n```java\r\n@Component\r\npublic class SingletonComponent {\r\n    @Autowired\r\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\r\n\r\n    private PrototypeComponent getComponent(int i) {\r\n        return prototypeComponentFactory.getObject(i);\r\n    }\r\n\r\n    public void test() {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            var instance = getComponent(i);\r\n            // Use the instance as needed\r\n        }\r\n    }\r\n}\r\n```\r\nYou might delegate that wrapping to a bean, but that&#39;s not really necessary if you&#39;re only building instances for one place (which was true in my particular use-case).","title":"How to create Prototype bean with parameters","body":"<p>What I do, which works (i.e., this is in production and has been for a while and is fine on both Spring 5 and 6), is use an <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/ObjectProvider.html\" rel=\"nofollow noreferrer\"><code>ObjectProvider</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SingletonComponent {\n    @Autowired\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            var instance = prototypeComponentFactory.getObject(i);\n            // Use the instance as needed\n        }\n    }\n}\n</code></pre>\n<p>This will pass the argument through, assuming you have suitably annotated objects and constructors (i.e., there is a bean of type <code>PrototypeComponent</code> with scope <code>PROTOTYPE</code> in your context whose constructor takes an <code>int</code> or <code>Integer</code>).</p>\n<p>I <em>prefer</em> to wrap it slightly, like this, so that I have more type safety:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SingletonComponent {\n    @Autowired\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\n\n    private PrototypeComponent getComponent(int i) {\n        return prototypeComponentFactory.getObject(i);\n    }\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            var instance = getComponent(i);\n            // Use the instance as needed\n        }\n    }\n}\n</code></pre>\n<p>You might delegate that wrapping to a bean, but that's not really necessary if you're only building instances for one place (which was true in my particular use-case).</p>\n"}],"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693568624,"creation_date":1693306175,"question_id":76999508,"body_markdown":"In Spring Boot 3 for jar-starters now we should use `@Autoconfiguration`. `@Autoconfiguration` is the `@Configuration` with `proxyBeanMethods = false` parameter.\r\n\r\nIn Spring Boot 2 i used the code like this. In singleton component i can create any count of prototype beans.\r\n\r\n```\r\n@Configuration\r\npublic class TestPrototypeConfiguration {\r\n\r\n    @Bean\r\n    public SingletonComponent singletoneComponent() {\r\n        return new SingletonComponent(this::prototypeComponent);\r\n    }\r\n\r\n    @Bean\r\n    @Scope(value = BeanDefinition.SCOPE_PROTOTYPE)\r\n    public PrototypeComponent prototypeComponent(int value) {\r\n        return new PrototypeComponent(value);\r\n    }\r\n\r\n}\r\n\r\n@RequiredArgsConstructor\r\npublic class PrototypeComponent {\r\n\r\n    private final int value;\r\n}\r\n\r\n@RequiredArgsConstructor\r\npublic class SingletonComponent {\r\n\r\n    private final IntFunction&lt;PrototypeComponent&gt; supplier;\r\n\r\n    public void test() {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            supplier.apply(i);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBut for Spring boot 3 if I simple change `@Configuration -&gt; @Autoconfiguration` the code will start work incorrect. Because when i call `supplier` the prototype bean will not construct as spring boot. It will be created as the simple java class.\r\n\r\nCan you provide me any suggestion about how to solve this problem, please? Is it possible to solve this problem w/o `ApplicationContext.getBean`?","title":"How to create Prototype bean with parameters","body":"<p>In Spring Boot 3 for jar-starters now we should use <code>@Autoconfiguration</code>. <code>@Autoconfiguration</code> is the <code>@Configuration</code> with <code>proxyBeanMethods = false</code> parameter.</p>\n<p>In Spring Boot 2 i used the code like this. In singleton component i can create any count of prototype beans.</p>\n<pre><code>@Configuration\npublic class TestPrototypeConfiguration {\n\n    @Bean\n    public SingletonComponent singletoneComponent() {\n        return new SingletonComponent(this::prototypeComponent);\n    }\n\n    @Bean\n    @Scope(value = BeanDefinition.SCOPE_PROTOTYPE)\n    public PrototypeComponent prototypeComponent(int value) {\n        return new PrototypeComponent(value);\n    }\n\n}\n\n@RequiredArgsConstructor\npublic class PrototypeComponent {\n\n    private final int value;\n}\n\n@RequiredArgsConstructor\npublic class SingletonComponent {\n\n    private final IntFunction&lt;PrototypeComponent&gt; supplier;\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            supplier.apply(i);\n        }\n    }\n}\n</code></pre>\n<p>But for Spring boot 3 if I simple change <code>@Configuration -&gt; @Autoconfiguration</code> the code will start work incorrect. Because when i call <code>supplier</code> the prototype bean will not construct as spring boot. It will be created as the simple java class.</p>\n<p>Can you provide me any suggestion about how to solve this problem, please? Is it possible to solve this problem w/o <code>ApplicationContext.getBean</code>?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693513035,"post_id":77018738,"comment_id":135775006,"body_markdown":"If you are using Spring don&#39;t use a static variable to store an instance of class. Instead use `@Mapper(componentModel = &quot;spring&quot;)`. You are using Spring IOC incorrectly.","body":"If you are using Spring don&#39;t use a static variable to store an instance of class. Instead use <code>@Mapper(componentModel = &quot;spring&quot;)</code>. You are using Spring IOC incorrectly."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693566835,"post_id":77018738,"comment_id":135781465,"body_markdown":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error.","body":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693567430,"post_id":77018738,"comment_id":135781568,"body_markdown":"Have you removed `ProductMapper MAPPER = Mappers.getMapper(ProductMapper.class);` from `ProductMapper`? I still see it in the code snippets.","body":"Have you removed <code>ProductMapper MAPPER = Mappers.getMapper(ProductMapper.class);</code> from <code>ProductMapper</code>? I still see it in the code snippets."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693568265,"post_id":77018738,"comment_id":135781704,"body_markdown":"I have updated the files and now i am getting an error, in question i have updated the stackrace.","body":"I have updated the files and now i am getting an error, in question i have updated the stackrace."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693576664,"post_id":77018738,"comment_id":135783416,"body_markdown":"Eclipse doesn&#39;t seem to see the generated code. I have no idea what is going wrong","body":"Eclipse doesn&#39;t seem to see the generated code. I have no idea what is going wrong"},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693580795,"post_id":77018738,"comment_id":135784323,"body_markdown":"Thank you, I will try to solve the problem myself.","body":"Thank you, I will try to solve the problem myself."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693587922,"post_id":77018738,"comment_id":135785595,"body_markdown":"Made a new jetbrains account, took intellij idea for a month, launched the project and it works...","body":"Made a new jetbrains account, took intellij idea for a month, launched the project and it works..."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693590264,"post_id":77018738,"comment_id":135785993,"body_markdown":"Nothing surprising =) You can also download Intellij IDEA Community Edition, it is free and you don&#39;t need to create any account","body":"Nothing surprising =) You can also download Intellij IDEA Community Edition, it is free and you don&#39;t need to create any account"},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693639501,"post_id":77018738,"comment_id":135789813,"body_markdown":"But this version lacks the tools for web development that are available in the ultimate version","body":"But this version lacks the tools for web development that are available in the ultimate version"},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693639831,"post_id":77018738,"comment_id":135789841,"body_markdown":"I find that even the Community Edition is better than Eclipse","body":"I find that even the Community Edition is better than Eclipse"}],"answers":[{"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693513130,"post_id":77018822,"comment_id":135775020,"body_markdown":"Can you complete your answer with code examples? It doesn&#39;t seem to be completed.","body":"Can you complete your answer with code examples? It doesn&#39;t seem to be completed."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693566535,"post_id":77018822,"comment_id":135781406,"body_markdown":"I added controller and products service.","body":"I added controller and products service."}],"tags":[],"owner":{"account_id":15455414,"reputation":41,"user_id":11149650,"display_name":"Peter Martin"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693510931,"creation_date":1693510931,"answer_id":77018822,"question_id":77018738,"body_markdown":"In your mapper annotation you have to set the componentModel property.  You probably want spring.","title":"Mapstruct cannot find implemention for ProductMapper","body":"<p>In your mapper annotation you have to set the componentModel property.  You probably want spring.</p>\n"},{"comments":[{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693566630,"post_id":77019991,"comment_id":135781424,"body_markdown":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error.","body":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1693567976,"post_id":77019991,"comment_id":135781656,"body_markdown":"@МатвейЗуев Please autowire the mapper interface in the ImageService class as well and use it.","body":"@МатвейЗуев Please autowire the mapper interface in the ImageService class as well and use it."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693568246,"post_id":77019991,"comment_id":135781701,"body_markdown":"I have updated the files and now i am getting an error, in question i have updated the stackrace.","body":"I have updated the files and now i am getting an error, in question i have updated the stackrace."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1693570146,"post_id":77019991,"comment_id":135782044,"body_markdown":"@МатвейЗуев Are you auto wiring product service in the controller class?","body":"@МатвейЗуев Are you auto wiring product service in the controller class?"},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693570343,"post_id":77019991,"comment_id":135782081,"body_markdown":"Yes, I added annotation.","body":"Yes, I added annotation."}],"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693530192,"creation_date":1693530192,"answer_id":77019991,"question_id":77018738,"body_markdown":"As mentioned in the comments, please use component model as `spring`.\r\n\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;)","title":"Mapstruct cannot find implemention for ProductMapper","body":"<p>As mentioned in the comments, please use component model as <code>spring</code>.</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;)\n</code></pre>\n"}],"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77019991,"answer_count":2,"score":1,"last_activity_date":1693568573,"creation_date":1693510035,"question_id":77018738,"body_markdown":"Mapstruct cannot find implemention of my Mapper.Using latest version of mapstruct 1.5.5 Final,my IDE is eclipse.\r\nAnd I&#39;m getting this error:\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nField productMapper in com.example.springshop.service.ImageService required a bean of type &#39;com.example.springshop.mapper.ProductMapper&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.example.springshop.mapper.ProductMapper&#39; in your configuration.\r\n\r\n```\r\n\r\nProduct entity:\r\n```\r\npackage com.example.springshop.entity;\r\n\r\nimport java.math.BigDecimal;\r\nimport java.time.LocalDateTime;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport jakarta.persistence.CascadeType;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.PrePersist;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@Table(name = &quot;products&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Product {\r\n\t@Id\r\n\t@Column(name = &quot;id&quot;)\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@Column(name = &quot;title&quot;, nullable = false)\r\n\tprivate String title;\r\n\r\n\t@Column(name = &quot;description&quot;, nullable = false)\r\n\tprivate String description;\r\n\r\n\t@Column(name = &quot;price&quot;, nullable = false)\r\n\tprivate BigDecimal price;\r\n\r\n\t@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;product&quot;)\r\n\t@Builder.Default\r\n\tprivate List&lt;Image&gt; images = new ArrayList&lt;&gt;();\r\n\r\n\t@Column(name = &quot;preview_image_id&quot;)\r\n\tprivate Long previewImageId;\r\n\r\n\t@Column(name = &quot;date_of_created&quot;)\r\n\tprivate LocalDateTime dateOfCreated;\r\n\r\n\t@PrePersist\r\n\tprivate void init() {\r\n\t\tdateOfCreated = LocalDateTime.now();\r\n\t}\r\n}\r\n```\r\n\r\nProductDTO class:\r\n```\r\npackage com.example.springshop.dto;\r\n\r\nimport java.math.BigDecimal;\r\nimport java.util.List;\r\n\r\nimport com.example.springshop.entity.Image;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class ProductDTO {\r\n\tprivate String title;\r\n\tprivate String description;\r\n\tprivate BigDecimal price;\r\n\tprivate List&lt;Image&gt; images;\r\n\tprivate Long previewImageId;\r\n}\r\n```\r\n\r\nProduct Controller:\r\n```\r\npackage com.example.springshop.controllers;\r\n\r\nimport java.security.Principal;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\n\r\nimport com.example.springshop.repository.ProductRepository;\r\nimport com.example.springshop.service.ProductService;\r\n\r\n@Controller\r\npublic class ProductController {\r\n\t@Autowired\r\n\tprivate ProductRepository productRepository;\r\n\r\n\t@Autowired\r\n\tprivate ProductService productService;\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String mainPage(Model model) {\r\n\t\tmodel.addAttribute(&quot;products&quot;, productRepository.findAll());\r\n\t\treturn &quot;main&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/products/{id}&quot;)\r\n\tpublic String productInfo(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\r\n\t\tif (!productRepository.existsById(id)) {\r\n\t\t\treturn &quot;redirect:/&quot;;\r\n\t\t}\r\n\r\n\t\tmodel.addAttribute(&quot;product&quot;, productService.findProductById(id));\r\n\r\n\t\treturn &quot;product_info&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/products/{id}/bucket&quot;)\r\n\tpublic String addBucket(@PathVariable Long id, Principal principal) {\r\n\t\tif (principal == null) {\r\n\t\t\treturn &quot;redirect:/&quot;;\r\n\t\t}\r\n\r\n\t\tproductService.addToUserBucket(id, principal.getName());\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nAdmin controller:\r\n```\r\npackage com.example.springshop.controllers;\r\n\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.service.ProductService;\r\n\r\n@Controller\r\npublic class AdminController {\r\n\tprivate final ProductService productService;\r\n\r\n\tpublic AdminController(ProductService productService) {\r\n\t\tthis.productService = productService;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/create_product&quot;)\r\n\tpublic String productCreatePage() {\r\n\t\treturn &quot;create_product&quot;;\r\n\t}\r\n\r\n\t@PostMapping(&quot;/create_product&quot;)\r\n\tpublic String productCreate(@RequestParam(&quot;file1&quot;) MultipartFile file1,\r\n\t\t\t@RequestParam(&quot;file2&quot;) MultipartFile file2,\r\n\t\t\t@RequestParam(&quot;file3&quot;) MultipartFile file3,\r\n\t\t\tProductDTO product) throws IOException {\r\n\t\tproductService.saveProduct(product, file1, file2, file3);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/edit_product/{id}&quot;)\r\n\tpublic String editProductPage(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\r\n\t\tList&lt;ProductDTO&gt; result = productService.findProductById(id);\r\n\r\n\t\tif (result == null) {\r\n\t\t\treturn &quot;redirect:/&quot;;\r\n\t\t}\r\n\r\n\t\tmodel.addAttribute(&quot;product&quot;, result);\r\n\r\n\t\treturn &quot;edit_product&quot;;\r\n\t}\r\n\r\n\t@PostMapping(&quot;/edit_product/{id}&quot;)\r\n\tpublic String editProduct(ProductDTO productDTO) {\r\n\t\tproductService.editProduct(productDTO);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/delete_product/{id}&quot;)\r\n\tpublic String deleteProduct(@PathVariable(value = &quot;id&quot;) Long id) {\r\n\t\tproductService.deleteProduct(id);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nProduct Service:\r\n```\r\npackage com.example.springshop.service;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.entity.Bucket;\r\nimport com.example.springshop.entity.Image;\r\nimport com.example.springshop.entity.Product;\r\nimport com.example.springshop.entity.User;\r\nimport com.example.springshop.mapper.ImageMapper;\r\nimport com.example.springshop.mapper.ProductMapper;\r\nimport com.example.springshop.repository.ProductRepository;\r\nimport com.example.springshop.repository.UserRepository;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\n@Service\r\n@Slf4j\r\npublic class ProductService {\r\n\t@Autowired\r\n\tprivate ProductMapper productMapper;\r\n\t\r\n\t@Autowired\r\n\tprivate ImageMapper imageMapper;\r\n\r\n\tprivate final ProductRepository productRepository;\r\n\tprivate final UserRepository userRepository;\r\n\r\n\tprivate final BucketService bucketService;\r\n\tprivate final ImageService imageService;\r\n\r\n\tpublic ProductService(ProductRepository productRepository, UserRepository userRepository,\r\n\t\t\tBucketService bucketService, ImageService imageService) {\r\n\t\tthis.productRepository = productRepository;\r\n\t\tthis.userRepository = userRepository;\r\n\t\tthis.bucketService = bucketService;\r\n\t\tthis.imageService = imageService;\r\n\t}\r\n\r\n\tpublic List&lt;ProductDTO&gt; listOfProducts() {\r\n\t\treturn productMapper.fromProductList(productRepository.findAll());\r\n\t}\r\n\r\n\tpublic ProductDTO getProductById(Long id) {\r\n\t\treturn productMapper.fromProduct(productRepository.findById(id).orElse(null));\r\n\t}\r\n\r\n\tpublic void saveProduct(ProductDTO product, MultipartFile file1, MultipartFile file2, MultipartFile file3)\r\n\t\t\tthrows IOException {\r\n\t\tImage image1;\r\n\t\tImage image2;\r\n\t\tImage image3;\r\n\t\tif (file1.getSize() != 0) {\r\n\t\t\timage1 = imageMapper.fromMultipartToImage(file1);\r\n\t\t\timage1.setPreviewImage(true);\r\n\t\t\timageService.addImageToProduct(product, image1);\r\n\t\t}\r\n\t\tif (file2.getSize() != 0) {\r\n\t\t\timage2 = imageMapper.fromMultipartToImage(file2);\r\n\t\t\timageService.addImageToProduct(product, image2);\r\n\t\t}\r\n\t\tif (file3.getSize() != 0) {\r\n\t\t\timage3 = imageMapper.fromMultipartToImage(file3);\r\n\t\t\timageService.addImageToProduct(product, image3);\r\n\t\t}\r\n\t\tlog.info(&quot;Saving new Product. Title: {}&quot;, product.getTitle());\r\n\t\tProduct productFromDb = productRepository.save(productMapper.toProduct(product));\r\n\t\tproductFromDb.setPreviewImageId(productFromDb.getImages().get(0).getId());\r\n\t\tproductRepository.save(productMapper.toProduct(product));\r\n\t}\r\n\r\n\tpublic List&lt;ProductDTO&gt; findProductById(Long id) {\r\n\t\tList&lt;Product&gt; res = new ArrayList&lt;&gt;();\r\n\r\n\t\tif (!productRepository.existsById(id)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tOptional&lt;Product&gt; product = productRepository.findById(id);\r\n\t\tproduct.ifPresent(res::add);\r\n\r\n\t\treturn productMapper.fromProductList(res);\r\n\r\n\t}\r\n\r\n\tpublic boolean deleteProduct(Long id) {\r\n\t\tif (!productRepository.existsById(id)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tproductRepository.deleteById(id);\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean editProduct(ProductDTO productDTO) {\r\n\t\tString title = productDTO.getTitle();\r\n\r\n\t\tif (productRepository.findByTitle(title) == null) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tProduct product = Product.builder()\r\n\t\t\t\t.title(title)\r\n\t\t\t\t.description(productDTO.getDescription())\r\n\t\t\t\t.price(productDTO.getPrice())\r\n\t\t\t\t.build();\r\n\r\n\t\tproductRepository.save(product);\r\n\r\n\t\tlog.info(&quot;Edit new User with title : {}&quot;, title);\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t@Transactional\r\n\tpublic void addToUserBucket(Long productId, String username) {\r\n\t\tUser user = userRepository.findByUsername(username);\r\n\t\tif (user == null) {\r\n\t\t\tthrow new RuntimeException(&quot;User not found&quot; + username);\r\n\t\t}\r\n\r\n\t\tBucket bucket = user.getBucket();\r\n\t\tif (bucket == null) {\r\n\t\t\tBucket newBucket = bucketService.createBucket(user, Collections.singletonList(productId));\r\n\t\t\tuser.setBucket(newBucket);\r\n\t\t\tuserRepository.save(user);\r\n\t\t} else {\r\n\t\t\tbucketService.addProducts(bucket, Collections.singletonList(productId));\r\n\t\t}\r\n\r\n\t}\r\n}\r\n```\r\n\r\n\r\nImage Service:\r\n```\r\npackage com.example.springshop.service;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.entity.Image;\r\nimport com.example.springshop.entity.Product;\r\nimport com.example.springshop.mapper.ProductMapper;\r\n\r\n@Service\r\npublic class ImageService {\r\n\t@Autowired\r\n\tprivate ProductMapper productMapper;\r\n\r\n\tpublic void addImageToProduct(ProductDTO productDTO, Image image) {\r\n\t\tProduct product = productMapper.toProduct(productDTO);\r\n\r\n\t\timage.setProduct(product);\r\n\t\tproduct.getImages().add(image);\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nMapper class:\r\n```\r\npackage com.example.springshop.mapper;\r\n\r\nimport java.util.List;\r\n\r\nimport org.mapstruct.InheritInverseConfiguration;\r\nimport org.mapstruct.Mapper;\r\nimport org.mapstruct.Mapping;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.entity.Product;\r\n\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface ProductMapper {\r\n\t@Mapping(target = &quot;id&quot;, ignore = true)\r\n\t@Mapping(target = &quot;dateOfCreated&quot;, ignore = true)\r\n\tProduct toProduct(ProductDTO productDTO);\r\n\r\n\t@InheritInverseConfiguration\r\n\tProductDTO fromProduct(Product product);\r\n\r\n\tList&lt;Product&gt; toProductList(List&lt;ProductDTO&gt; productDTOs);\r\n\r\n\tList&lt;ProductDTO&gt; fromProductList(List&lt;Product&gt; products);\r\n}\r\n```\r\n\r\nbuild.gradle:\r\n```\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;3.1.2&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.1.2&#39;\r\n\tid &#39;com.diffplug.eclipse.apt&#39; version &#39;3.37.2&#39;\r\n}\r\n\r\ngroup = &#39;com.example&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\njava {\r\n\tsourceCompatibility = &#39;20&#39;\r\n}\r\n\r\nconfigurations {\r\n\tcompileOnly {\r\n\t\textendsFrom annotationProcessor\r\n\t}\r\n}\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa:3.1.2&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n\tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n\tdevelopmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web:3.1.2&#39;\r\n\truntimeOnly &#39;org.postgresql:postgresql&#39;\r\n\tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security:3.1.2&#39;\r\n\timplementation &#39;org.thymeleaf.extras:thymeleaf-extras-springsecurity6:3.1.2.RELEASE&#39;\r\n\timplementation &#39;org.mapstruct:mapstruct:1.5.5.Final&#39;\r\n\tannotationProcessor &#39;org.mapstruct:mapstruct-processor:1.5.5.Final&#39;\r\n\timplementation &#39;io.springfox:springfox-swagger2:3.0.0&#39;\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n}\r\n```\r\n\r\nTried a lot of ways and nothing helped.\r\nPlease could you take a look where I&#39;m going wrong?\r\n","title":"Mapstruct cannot find implemention for ProductMapper","body":"<p>Mapstruct cannot find implemention of my Mapper.Using latest version of mapstruct 1.5.5 Final,my IDE is eclipse.\nAnd I'm getting this error:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField productMapper in com.example.springshop.service.ImageService required a bean of type 'com.example.springshop.mapper.ProductMapper' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.example.springshop.mapper.ProductMapper' in your configuration.\n\n</code></pre>\n<p>Product entity:</p>\n<pre><code>package com.example.springshop.entity;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.PrePersist;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Table(name = &quot;products&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Product {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;title&quot;, nullable = false)\n    private String title;\n\n    @Column(name = &quot;description&quot;, nullable = false)\n    private String description;\n\n    @Column(name = &quot;price&quot;, nullable = false)\n    private BigDecimal price;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;product&quot;)\n    @Builder.Default\n    private List&lt;Image&gt; images = new ArrayList&lt;&gt;();\n\n    @Column(name = &quot;preview_image_id&quot;)\n    private Long previewImageId;\n\n    @Column(name = &quot;date_of_created&quot;)\n    private LocalDateTime dateOfCreated;\n\n    @PrePersist\n    private void init() {\n        dateOfCreated = LocalDateTime.now();\n    }\n}\n</code></pre>\n<p>ProductDTO class:</p>\n<pre><code>package com.example.springshop.dto;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\nimport com.example.springshop.entity.Image;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class ProductDTO {\n    private String title;\n    private String description;\n    private BigDecimal price;\n    private List&lt;Image&gt; images;\n    private Long previewImageId;\n}\n</code></pre>\n<p>Product Controller:</p>\n<pre><code>package com.example.springshop.controllers;\n\nimport java.security.Principal;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\n\nimport com.example.springshop.repository.ProductRepository;\nimport com.example.springshop.service.ProductService;\n\n@Controller\npublic class ProductController {\n    @Autowired\n    private ProductRepository productRepository;\n\n    @Autowired\n    private ProductService productService;\n\n    @GetMapping(&quot;/&quot;)\n    public String mainPage(Model model) {\n        model.addAttribute(&quot;products&quot;, productRepository.findAll());\n        return &quot;main&quot;;\n    }\n\n    @GetMapping(&quot;/products/{id}&quot;)\n    public String productInfo(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\n        if (!productRepository.existsById(id)) {\n            return &quot;redirect:/&quot;;\n        }\n\n        model.addAttribute(&quot;product&quot;, productService.findProductById(id));\n\n        return &quot;product_info&quot;;\n    }\n\n    @GetMapping(&quot;/products/{id}/bucket&quot;)\n    public String addBucket(@PathVariable Long id, Principal principal) {\n        if (principal == null) {\n            return &quot;redirect:/&quot;;\n        }\n\n        productService.addToUserBucket(id, principal.getName());\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>Admin controller:</p>\n<pre><code>package com.example.springshop.controllers;\n\nimport java.io.IOException;\nimport java.util.List;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.service.ProductService;\n\n@Controller\npublic class AdminController {\n    private final ProductService productService;\n\n    public AdminController(ProductService productService) {\n        this.productService = productService;\n    }\n\n    @GetMapping(&quot;/create_product&quot;)\n    public String productCreatePage() {\n        return &quot;create_product&quot;;\n    }\n\n    @PostMapping(&quot;/create_product&quot;)\n    public String productCreate(@RequestParam(&quot;file1&quot;) MultipartFile file1,\n            @RequestParam(&quot;file2&quot;) MultipartFile file2,\n            @RequestParam(&quot;file3&quot;) MultipartFile file3,\n            ProductDTO product) throws IOException {\n        productService.saveProduct(product, file1, file2, file3);\n        return &quot;redirect:/&quot;;\n    }\n\n    @GetMapping(&quot;/edit_product/{id}&quot;)\n    public String editProductPage(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\n        List&lt;ProductDTO&gt; result = productService.findProductById(id);\n\n        if (result == null) {\n            return &quot;redirect:/&quot;;\n        }\n\n        model.addAttribute(&quot;product&quot;, result);\n\n        return &quot;edit_product&quot;;\n    }\n\n    @PostMapping(&quot;/edit_product/{id}&quot;)\n    public String editProduct(ProductDTO productDTO) {\n        productService.editProduct(productDTO);\n        return &quot;redirect:/&quot;;\n    }\n\n    @GetMapping(&quot;/delete_product/{id}&quot;)\n    public String deleteProduct(@PathVariable(value = &quot;id&quot;) Long id) {\n        productService.deleteProduct(id);\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>Product Service:</p>\n<pre><code>package com.example.springshop.service;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Optional;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.entity.Bucket;\nimport com.example.springshop.entity.Image;\nimport com.example.springshop.entity.Product;\nimport com.example.springshop.entity.User;\nimport com.example.springshop.mapper.ImageMapper;\nimport com.example.springshop.mapper.ProductMapper;\nimport com.example.springshop.repository.ProductRepository;\nimport com.example.springshop.repository.UserRepository;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@Service\n@Slf4j\npublic class ProductService {\n    @Autowired\n    private ProductMapper productMapper;\n    \n    @Autowired\n    private ImageMapper imageMapper;\n\n    private final ProductRepository productRepository;\n    private final UserRepository userRepository;\n\n    private final BucketService bucketService;\n    private final ImageService imageService;\n\n    public ProductService(ProductRepository productRepository, UserRepository userRepository,\n            BucketService bucketService, ImageService imageService) {\n        this.productRepository = productRepository;\n        this.userRepository = userRepository;\n        this.bucketService = bucketService;\n        this.imageService = imageService;\n    }\n\n    public List&lt;ProductDTO&gt; listOfProducts() {\n        return productMapper.fromProductList(productRepository.findAll());\n    }\n\n    public ProductDTO getProductById(Long id) {\n        return productMapper.fromProduct(productRepository.findById(id).orElse(null));\n    }\n\n    public void saveProduct(ProductDTO product, MultipartFile file1, MultipartFile file2, MultipartFile file3)\n            throws IOException {\n        Image image1;\n        Image image2;\n        Image image3;\n        if (file1.getSize() != 0) {\n            image1 = imageMapper.fromMultipartToImage(file1);\n            image1.setPreviewImage(true);\n            imageService.addImageToProduct(product, image1);\n        }\n        if (file2.getSize() != 0) {\n            image2 = imageMapper.fromMultipartToImage(file2);\n            imageService.addImageToProduct(product, image2);\n        }\n        if (file3.getSize() != 0) {\n            image3 = imageMapper.fromMultipartToImage(file3);\n            imageService.addImageToProduct(product, image3);\n        }\n        log.info(&quot;Saving new Product. Title: {}&quot;, product.getTitle());\n        Product productFromDb = productRepository.save(productMapper.toProduct(product));\n        productFromDb.setPreviewImageId(productFromDb.getImages().get(0).getId());\n        productRepository.save(productMapper.toProduct(product));\n    }\n\n    public List&lt;ProductDTO&gt; findProductById(Long id) {\n        List&lt;Product&gt; res = new ArrayList&lt;&gt;();\n\n        if (!productRepository.existsById(id)) {\n            return null;\n        }\n\n        Optional&lt;Product&gt; product = productRepository.findById(id);\n        product.ifPresent(res::add);\n\n        return productMapper.fromProductList(res);\n\n    }\n\n    public boolean deleteProduct(Long id) {\n        if (!productRepository.existsById(id)) {\n            return false;\n        }\n\n        productRepository.deleteById(id);\n\n        return true;\n    }\n\n    public boolean editProduct(ProductDTO productDTO) {\n        String title = productDTO.getTitle();\n\n        if (productRepository.findByTitle(title) == null) {\n            return false;\n        }\n\n        Product product = Product.builder()\n                .title(title)\n                .description(productDTO.getDescription())\n                .price(productDTO.getPrice())\n                .build();\n\n        productRepository.save(product);\n\n        log.info(&quot;Edit new User with title : {}&quot;, title);\n\n        return true;\n    }\n\n    @Transactional\n    public void addToUserBucket(Long productId, String username) {\n        User user = userRepository.findByUsername(username);\n        if (user == null) {\n            throw new RuntimeException(&quot;User not found&quot; + username);\n        }\n\n        Bucket bucket = user.getBucket();\n        if (bucket == null) {\n            Bucket newBucket = bucketService.createBucket(user, Collections.singletonList(productId));\n            user.setBucket(newBucket);\n            userRepository.save(user);\n        } else {\n            bucketService.addProducts(bucket, Collections.singletonList(productId));\n        }\n\n    }\n}\n</code></pre>\n<p>Image Service:</p>\n<pre><code>package com.example.springshop.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.entity.Image;\nimport com.example.springshop.entity.Product;\nimport com.example.springshop.mapper.ProductMapper;\n\n@Service\npublic class ImageService {\n    @Autowired\n    private ProductMapper productMapper;\n\n    public void addImageToProduct(ProductDTO productDTO, Image image) {\n        Product product = productMapper.toProduct(productDTO);\n\n        image.setProduct(product);\n        product.getImages().add(image);\n    }\n}\n</code></pre>\n<p>Mapper class:</p>\n<pre><code>package com.example.springshop.mapper;\n\nimport java.util.List;\n\nimport org.mapstruct.InheritInverseConfiguration;\nimport org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.entity.Product;\n\n@Mapper(componentModel = &quot;spring&quot;)\npublic interface ProductMapper {\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;dateOfCreated&quot;, ignore = true)\n    Product toProduct(ProductDTO productDTO);\n\n    @InheritInverseConfiguration\n    ProductDTO fromProduct(Product product);\n\n    List&lt;Product&gt; toProductList(List&lt;ProductDTO&gt; productDTOs);\n\n    List&lt;ProductDTO&gt; fromProductList(List&lt;Product&gt; products);\n}\n</code></pre>\n<p>build.gradle:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.2'\n    id 'io.spring.dependency-management' version '1.1.2'\n    id 'com.diffplug.eclipse.apt' version '3.37.2'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '20'\n}\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa:3.1.2'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    implementation 'org.springframework.boot:spring-boot-starter-web:3.1.2'\n    runtimeOnly 'org.postgresql:postgresql'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'org.springframework.boot:spring-boot-starter-security:3.1.2'\n    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity6:3.1.2.RELEASE'\n    implementation 'org.mapstruct:mapstruct:1.5.5.Final'\n    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'\n    implementation 'io.springfox:springfox-swagger2:3.0.0'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>Tried a lot of ways and nothing helped.\nPlease could you take a look where I'm going wrong?</p>\n"},{"tags":["java","maven","dependencies","dependency-management"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1692113664,"post_id":76906867,"comment_id":135578894,"body_markdown":"You should share the actual dependencies you are using so others can understand what artifacts exactly are you using.","body":"You should share the actual dependencies you are using so others can understand what artifacts exactly are you using."}],"answers":[{"tags":[],"owner":{"account_id":24440814,"reputation":41,"user_id":18364543,"display_name":"Om Shreenidhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693568418,"creation_date":1693568418,"answer_id":77022806,"question_id":76906867,"body_markdown":"You can download the targ.gz file from here -\r\nhttps://netty.io/downloads.html.  \r\n\r\nInside the &quot;all&quot; folder edit the pom.xml by adding this snippet in the `plugins` section - \r\n```\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.3.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;descriptorRefs&gt;\r\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n          &lt;/descriptorRefs&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;make-assembly&lt;/id&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;single&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n```\r\n\r\nand then run -\r\n```\r\nmvn clean package \r\n```\r\nThe jar you need will be created inside `all/target`. It&#39;ll have a prefix like *`-all-dependencies.jar`.","title":"Update Java Dependency from Fat Jar to Thin Jahr","body":"<p>You can download the targ.gz file from here -\n<a href=\"https://netty.io/downloads.html\" rel=\"nofollow noreferrer\">https://netty.io/downloads.html</a>.</p>\n<p>Inside the &quot;all&quot; folder edit the pom.xml by adding this snippet in the <code>plugins</code> section -</p>\n<pre><code>      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n          &lt;/descriptorRefs&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;make-assembly&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;single&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>and then run -</p>\n<pre><code>mvn clean package \n</code></pre>\n<p>The jar you need will be created inside <code>all/target</code>. It'll have a prefix like *<code>-all-dependencies.jar</code>.</p>\n"}],"owner":{"account_id":17060626,"reputation":49,"user_id":12344149,"display_name":"Mhanxsolo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693568418,"creation_date":1692110721,"question_id":76906867,"body_markdown":"I&#39;m currently working with Talend Studio, and in one of our projects, we need to update the netty-all library from version 4.1.68 to 4.1.96. After importing the newer jar file, we discovered that version 4.1.96 is significantly smaller than the previous one. Consequently, we encountered a series of ClassNotFoundException errors.\r\n\r\nTo resolve these issues, we had to manually import several specific Netty dependencies, such as netty-transport and netty-resolver. This approach feels cumbersome, and I&#39;m wondering if there might be a more efficient way to handle this update.\r\n\r\nSpecifically, I have two questions:\r\n\r\nIs there a method to generate a netty-all 4.1.96 jar file that includes all necessary dependencies (a fat jar)?\r\nIf the above solution is not feasible or optimal, what alternative approaches could be more efficient for updating the Netty library in our Talend Studio project?\r\nAny guidance or insights from those experienced with Netty and Talend Studio would be greatly appreciated. Thank you!","title":"Update Java Dependency from Fat Jar to Thin Jahr","body":"<p>I'm currently working with Talend Studio, and in one of our projects, we need to update the netty-all library from version 4.1.68 to 4.1.96. After importing the newer jar file, we discovered that version 4.1.96 is significantly smaller than the previous one. Consequently, we encountered a series of ClassNotFoundException errors.</p>\n<p>To resolve these issues, we had to manually import several specific Netty dependencies, such as netty-transport and netty-resolver. This approach feels cumbersome, and I'm wondering if there might be a more efficient way to handle this update.</p>\n<p>Specifically, I have two questions:</p>\n<p>Is there a method to generate a netty-all 4.1.96 jar file that includes all necessary dependencies (a fat jar)?\nIf the above solution is not feasible or optimal, what alternative approaches could be more efficient for updating the Netty library in our Talend Studio project?\nAny guidance or insights from those experienced with Netty and Talend Studio would be greatly appreciated. Thank you!</p>\n"},{"tags":["python","java","encryption","md5","pycrypto"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1693560482,"post_id":77021824,"comment_id":135780352,"body_markdown":"Did you check that `generateKeyAndIv()` and `generate_key_and_iv()` generate the same key and IV for the same input data?","body":"Did you check that <code>generateKeyAndIv()</code> and <code>generate_key_and_iv()</code> generate the same key and IV for the same input data?"},{"owner":{"account_id":22080350,"reputation":45,"user_id":16340011,"display_name":"Abhishek Kumar"},"score":0,"creation_date":1693564799,"post_id":77021824,"comment_id":135781142,"body_markdown":"No, they are in completely different format, \nfor java its like this: \nkey: [101, 120, -81, 7, -122, 38, -36, 27, -51, 120, -105, 62, 38, -109, 94, 47, -10, 92, 42, 43, -7, 77, -70, -16, -125, -48, -125, -101, 32, -101, -26, -4]\n\nand in python:\n bytearray(b&quot;U\\xb2,\\x95\\x16\\&#39;\\x96\\x96\\\\x\\xf4=\\xd9\\xec\\nB!\\xc5Y\\xcc\\xa8]\\x86\\xd41\\x84\\xe2\\x06\\xb9\\n\\x1d\\x82&quot;)","body":"No, they are in completely different format,  for java its like this:  key: [101, 120, -81, 7, -122, 38, -36, 27, -51, 120, -105, 62, 38, -109, 94, 47, -10, 92, 42, 43, -7, 77, -70, -16, -125, -48, -125, -101, 32, -101, -26, -4]  and in python:  bytearray(b&quot;U\\xb2,\\x95\\x16\\&#39;\\x96\\x96\\\\x\\xf4=\\xd9\\xec\\nB!\\xc5&zwnj;&#8203;Y\\xcc\\xa8]\\x86\\xd41\\&zwnj;&#8203;x84\\xe2\\x06\\xb9\\n\\x1&zwnj;&#8203;d\\x82&quot;)"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1693567655,"post_id":77021824,"comment_id":135781599,"body_markdown":"The problem is a flaw in the key derivation, see my answer.","body":"The problem is a flaw in the key derivation, see my answer."}],"answers":[{"comments":[{"owner":{"account_id":22080350,"reputation":45,"user_id":16340011,"display_name":"Abhishek Kumar"},"score":0,"creation_date":1693573829,"post_id":77022566,"comment_id":135782835,"body_markdown":"Thanks!!!!! working now... wasted 3 days on this.","body":"Thanks!!!!! working now... wasted 3 days on this."}],"tags":[],"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693568096,"creation_date":1693566198,"answer_id":77022566,"question_id":77021824,"body_markdown":"The bug is in the key derivation: The Java implementation of the digest automatically resets the instance to the initial state after a `digest()` call, unlike the Python implementation.  \r\nTherefore, in the Python implementation, the digest must be *explicitly* reset, e.g. by creating a new digest object.  \r\nAttention: This is necessary in two places (whereby the second modification is only noticeable for iterations greater than 1).\r\n\r\nThe following changes are required in `generate_key_and_iv()`:\r\n\r\n```py\r\n...\r\ntry:\r\n    while generated_length &lt; key_length + iv_length:\r\n        h = md() # create new instance (1.)\r\n        if generated_length &gt; 0:\r\n            h.update(generated_data[generated_length - digest_length:generated_length])\r\n        h.update(password)\r\n        if salt is not None:\r\n            h.update(salt[:8])\r\n        generated_data[generated_length:generated_length + digest_length] = h.digest()\r\n\r\n        for i in range(1, iterations):\r\n            h = md() # create new instance (2.)\r\n            h.update(generated_data[generated_length:generated_length + digest_length])\r\n            generated_data[generated_length:generated_length + digest_length] = h.digest()\r\n\r\n        generated_length += digest_length\r\n\t\t...\r\n```\r\n\r\nFor a test (and only for the test), a static salt can be used in both implementations. With identical plaintext and password, both encryptions then provide the same ciphertext.\r\n\r\nFor completeness, the key derivation implemented in the Java code is a lightweight implementation of [`EVP_BytesToKey()`][2].\r\n\r\n----------\r\n\r\nIn addition, a `safe=&#39;&#39;` should be passed as 2nd parameter in [`urllib.parse.quote()`][1] so that `/` is also replaced by an escape sequence.\r\n\r\n[1]: https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote\r\n[2]: https://www.openssl.org/docs/man3.1/man3/EVP_BytesToKey.html","title":"Converting AES 256 Java Encryption in python","body":"<p>The bug is in the key derivation: The Java implementation of the digest automatically resets the instance to the initial state after a <code>digest()</code> call, unlike the Python implementation.<br />\nTherefore, in the Python implementation, the digest must be <em>explicitly</em> reset, e.g. by creating a new digest object.<br />\nAttention: This is necessary in two places (whereby the second modification is only noticeable for iterations greater than 1).</p>\n<p>The following changes are required in <code>generate_key_and_iv()</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>...\ntry:\n    while generated_length &lt; key_length + iv_length:\n        h = md() # create new instance (1.)\n        if generated_length &gt; 0:\n            h.update(generated_data[generated_length - digest_length:generated_length])\n        h.update(password)\n        if salt is not None:\n            h.update(salt[:8])\n        generated_data[generated_length:generated_length + digest_length] = h.digest()\n\n        for i in range(1, iterations):\n            h = md() # create new instance (2.)\n            h.update(generated_data[generated_length:generated_length + digest_length])\n            generated_data[generated_length:generated_length + digest_length] = h.digest()\n\n        generated_length += digest_length\n        ...\n</code></pre>\n<p>For a test (and only for the test), a static salt can be used in both implementations. With identical plaintext and password, both encryptions then provide the same ciphertext.</p>\n<p>For completeness, the key derivation implemented in the Java code is a lightweight implementation of <a href=\"https://www.openssl.org/docs/man3.1/man3/EVP_BytesToKey.html\" rel=\"nofollow noreferrer\"><code>EVP_BytesToKey()</code></a>.</p>\n<hr />\n<p>In addition, a <code>safe=''</code> should be passed as 2nd parameter in <a href=\"https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote\" rel=\"nofollow noreferrer\"><code>urllib.parse.quote()</code></a> so that <code>/</code> is also replaced by an escape sequence.</p>\n"}],"owner":{"account_id":22080350,"reputation":45,"user_id":16340011,"display_name":"Abhishek Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77022566,"answer_count":1,"score":0,"last_activity_date":1693568096,"creation_date":1693559049,"question_id":77021824,"body_markdown":"I have enryption code written in Java, and I am trying to write it in python, But the issue is python encryption and decryption is working fine but when trying to decrypt the  java encrypted string using python, its not working.\r\n\r\nThis is the Java code that I had. \r\n\r\n\r\n```\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.spec.IvParameterSpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport java.net.URLEncoder;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.*;\r\nimport java.util.Arrays;\r\nimport java.util.Base64;\r\n\r\n\r\n@Slf4j\r\npublic class EncryptUsingAES {\r\n\r\n\r\n    /**\r\n     * This function takes a String as input and encrypts it using AES Algorithm\r\n     * @param stringToEncrypt\r\n     * @param publicKey\r\n     * @return\r\n     */\r\n    public String returnEncryptedString(String stringToEncrypt, String publicKey) {\r\n\r\n        Security.addProvider(new BouncyCastleProvider());\r\n        try{\r\n            SecureRandom sr = new SecureRandom();\r\n            byte[] salt = new byte[8];\r\n            sr.nextBytes(salt);\r\n            final byte[][] keyAndIV = generateKeyAndIV(salt, publicKey.getBytes(StandardCharsets.UTF_8), MessageDigest.getInstance(&quot;MD5&quot;));\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;, BouncyCastleProvider.PROVIDER_NAME);\r\n            cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(keyAndIV[0], &quot;AES&quot;), new IvParameterSpec(keyAndIV[1]));\r\n            byte[] encryptedData = cipher.doFinal(stringToEncrypt.getBytes(StandardCharsets.UTF_8));\r\n            byte[] prefixAndSaltAndEncryptedData = new byte[16 + encryptedData.length];\r\n\r\n            System.arraycopy(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8), 0, prefixAndSaltAndEncryptedData, 0, 8);\r\n\r\n            System.arraycopy(salt, 0, prefixAndSaltAndEncryptedData, 8, 8);\r\n\r\n            System.arraycopy(encryptedData, 0, prefixAndSaltAndEncryptedData, 16, encryptedData.length);\r\n            String encryptedString = URLEncoder.encode(Base64.getEncoder().encodeToString(prefixAndSaltAndEncryptedData),&quot;UTF-8&quot;);\r\n\r\n            return encryptedString;\r\n        } catch (Exception e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * this function creates key Initialisation Vector which is required for AES Encryption\r\n     * @param salt\r\n     * @param password\r\n     * @param md\r\n     * @return\r\n     */\r\n    protected byte[][] generateKeyAndIV(byte[] salt, byte[] password, MessageDigest md) {\r\n\r\n        int keyLength = 32;\r\n        int ivLength = 16;\r\n        int iterations = 1;\r\n        int digestLength = md.getDigestLength();\r\n        int requiredLength = (keyLength + ivLength + digestLength - 1) / digestLength * digestLength;\r\n        byte[] generatedData = new byte[requiredLength];\r\n        int generatedLength = 0;\r\n\r\n        try {\r\n            md.reset();\r\n\r\n            while (generatedLength &lt; keyLength + ivLength) {\r\n\r\n                if (generatedLength &gt; 0)\r\n                    md.update(generatedData, generatedLength - digestLength, digestLength);\r\n                md.update(password);\r\n                if (salt != null)\r\n                    md.update(salt, 0, 8);\r\n                md.digest(generatedData, generatedLength, digestLength);\r\n\r\n\r\n                for (int i = 1; i &lt; iterations; i++) {\r\n                    md.update(generatedData, generatedLength, digestLength);\r\n                    md.digest(generatedData, generatedLength, digestLength);\r\n                }\r\n\r\n                generatedLength += digestLength;\r\n            }\r\n\r\n            byte[][] result = new byte[2][];\r\n            result[0] = Arrays.copyOfRange(generatedData, 0, keyLength);\r\n            if (ivLength &gt; 0)\r\n                result[1] = Arrays.copyOfRange(generatedData, keyLength, keyLength + ivLength);\r\n\r\n            return result;\r\n\r\n        } catch (DigestException e) {\r\n            log.error(OrderStatusSmsTrackerConstants.ORDER_STATUS_SMS_TRACKER_SERVICE+ \r\n            return null;\r\n        } finally {\r\n\r\n            Arrays.fill(generatedData, (byte)0);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd this is my python encryption and decryption code, \r\n\r\n\r\n```\r\nfrom Crypto.Cipher import AES\r\nfrom Crypto.Util.Padding import pad, unpad\r\nfrom Crypto.Random import get_random_bytes\r\nimport base64\r\nimport urllib.parse\r\nimport hashlib\r\nimport logging\r\n\r\nclass EncryptUsingAES:\r\n    def return_encrypted_string(self, string_to_encrypt, public_key):\r\n        try:\r\n            salt = get_random_bytes(8)\r\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode(&#39;utf-8&#39;), hashlib.md5)\r\n\r\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\r\n            encrypted_data = cipher.encrypt(pad(string_to_encrypt.encode(&#39;utf-8&#39;), AES.block_size))\r\n\r\n            prefix_and_salt_and_encrypted_data = b&quot;Salted__&quot; + salt + encrypted_data\r\n            encrypted_string = urllib.parse.quote(base64.b64encode(prefix_and_salt_and_encrypted_data))\r\n\r\n            return encrypted_string\r\n        except Exception as e:\r\n            logging.error(&quot;Error when encrypting: &quot; + str(e))\r\n            return None\r\n        \r\n    def return_decrypted_string(self, encrypted_string, public_key):\r\n        try:\r\n            encrypted_data = base64.b64decode(urllib.parse.unquote(encrypted_string))\r\n            salt = encrypted_data[8:16]\r\n            encrypted_data = encrypted_data[16:]\r\n\r\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode(&#39;utf-8&#39;), hashlib.md5)\r\n\r\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\r\n            decrypted_data = unpad(cipher.decrypt(encrypted_data), AES.block_size)\r\n\r\n            return decrypted_data.decode(&#39;utf-8&#39;)\r\n        except Exception as e:\r\n            logging.error(&quot;Error when decrypting: &quot; + str(e))\r\n            return None\r\n\r\n    def generate_key_and_iv(self, salt, password, md):\r\n        key_length = 32\r\n        iv_length = 16\r\n        iterations = 1\r\n        digest_length = md().digest_size\r\n        required_length = (key_length + iv_length + digest_length - 1) // digest_length * digest_length\r\n        generated_data = bytearray([0]) * required_length\r\n        generated_length = 0\r\n\r\n        try:\r\n            md = md()\r\n            while generated_length &lt; key_length + iv_length:\r\n                if generated_length &gt; 0:\r\n                    md.update(generated_data[generated_length - digest_length:generated_length])\r\n                md.update(password)\r\n                if salt is not None:\r\n                    md.update(salt[:8])\r\n                generated_data[generated_length:generated_length + digest_length] = md.digest()\r\n\r\n                for i in range(1, iterations):\r\n                    md.update(generated_data[generated_length:generated_length + digest_length])\r\n                    generated_data[generated_length:generated_length + digest_length] = md.digest()\r\n\r\n                generated_length += digest_length\r\n\r\n            key = generated_data[:key_length]\r\n            iv = generated_data[key_length:key_length + iv_length]\r\n            return key, iv\r\n\r\n        except Exception as e:\r\n            logging.error(&quot;Error when generating key and IV: &quot; + str(e))\r\n            return None\r\n        finally:\r\n            for i in range(len(generated_data)):\r\n                generated_data[i] = 0\r\n```\r\n\r\nCan anyone help me on this. ","title":"Converting AES 256 Java Encryption in python","body":"<p>I have enryption code written in Java, and I am trying to write it in python, But the issue is python encryption and decryption is working fine but when trying to decrypt the  java encrypted string using python, its not working.</p>\n<p>This is the Java code that I had.</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.security.*;\nimport java.util.Arrays;\nimport java.util.Base64;\n\n\n@Slf4j\npublic class EncryptUsingAES {\n\n\n    /**\n     * This function takes a String as input and encrypts it using AES Algorithm\n     * @param stringToEncrypt\n     * @param publicKey\n     * @return\n     */\n    public String returnEncryptedString(String stringToEncrypt, String publicKey) {\n\n        Security.addProvider(new BouncyCastleProvider());\n        try{\n            SecureRandom sr = new SecureRandom();\n            byte[] salt = new byte[8];\n            sr.nextBytes(salt);\n            final byte[][] keyAndIV = generateKeyAndIV(salt, publicKey.getBytes(StandardCharsets.UTF_8), MessageDigest.getInstance(&quot;MD5&quot;));\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;, BouncyCastleProvider.PROVIDER_NAME);\n            cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(keyAndIV[0], &quot;AES&quot;), new IvParameterSpec(keyAndIV[1]));\n            byte[] encryptedData = cipher.doFinal(stringToEncrypt.getBytes(StandardCharsets.UTF_8));\n            byte[] prefixAndSaltAndEncryptedData = new byte[16 + encryptedData.length];\n\n            System.arraycopy(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8), 0, prefixAndSaltAndEncryptedData, 0, 8);\n\n            System.arraycopy(salt, 0, prefixAndSaltAndEncryptedData, 8, 8);\n\n            System.arraycopy(encryptedData, 0, prefixAndSaltAndEncryptedData, 16, encryptedData.length);\n            String encryptedString = URLEncoder.encode(Base64.getEncoder().encodeToString(prefixAndSaltAndEncryptedData),&quot;UTF-8&quot;);\n\n            return encryptedString;\n        } catch (Exception e) {\n            return null;\n        }\n    }\n\n\n    /**\n     * this function creates key Initialisation Vector which is required for AES Encryption\n     * @param salt\n     * @param password\n     * @param md\n     * @return\n     */\n    protected byte[][] generateKeyAndIV(byte[] salt, byte[] password, MessageDigest md) {\n\n        int keyLength = 32;\n        int ivLength = 16;\n        int iterations = 1;\n        int digestLength = md.getDigestLength();\n        int requiredLength = (keyLength + ivLength + digestLength - 1) / digestLength * digestLength;\n        byte[] generatedData = new byte[requiredLength];\n        int generatedLength = 0;\n\n        try {\n            md.reset();\n\n            while (generatedLength &lt; keyLength + ivLength) {\n\n                if (generatedLength &gt; 0)\n                    md.update(generatedData, generatedLength - digestLength, digestLength);\n                md.update(password);\n                if (salt != null)\n                    md.update(salt, 0, 8);\n                md.digest(generatedData, generatedLength, digestLength);\n\n\n                for (int i = 1; i &lt; iterations; i++) {\n                    md.update(generatedData, generatedLength, digestLength);\n                    md.digest(generatedData, generatedLength, digestLength);\n                }\n\n                generatedLength += digestLength;\n            }\n\n            byte[][] result = new byte[2][];\n            result[0] = Arrays.copyOfRange(generatedData, 0, keyLength);\n            if (ivLength &gt; 0)\n                result[1] = Arrays.copyOfRange(generatedData, keyLength, keyLength + ivLength);\n\n            return result;\n\n        } catch (DigestException e) {\n            log.error(OrderStatusSmsTrackerConstants.ORDER_STATUS_SMS_TRACKER_SERVICE+ \n            return null;\n        } finally {\n\n            Arrays.fill(generatedData, (byte)0);\n        }\n    }\n}\n</code></pre>\n<p>And this is my python encryption and decryption code,</p>\n<pre><code>from Crypto.Cipher import AES\nfrom Crypto.Util.Padding import pad, unpad\nfrom Crypto.Random import get_random_bytes\nimport base64\nimport urllib.parse\nimport hashlib\nimport logging\n\nclass EncryptUsingAES:\n    def return_encrypted_string(self, string_to_encrypt, public_key):\n        try:\n            salt = get_random_bytes(8)\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode('utf-8'), hashlib.md5)\n\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\n            encrypted_data = cipher.encrypt(pad(string_to_encrypt.encode('utf-8'), AES.block_size))\n\n            prefix_and_salt_and_encrypted_data = b&quot;Salted__&quot; + salt + encrypted_data\n            encrypted_string = urllib.parse.quote(base64.b64encode(prefix_and_salt_and_encrypted_data))\n\n            return encrypted_string\n        except Exception as e:\n            logging.error(&quot;Error when encrypting: &quot; + str(e))\n            return None\n        \n    def return_decrypted_string(self, encrypted_string, public_key):\n        try:\n            encrypted_data = base64.b64decode(urllib.parse.unquote(encrypted_string))\n            salt = encrypted_data[8:16]\n            encrypted_data = encrypted_data[16:]\n\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode('utf-8'), hashlib.md5)\n\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\n            decrypted_data = unpad(cipher.decrypt(encrypted_data), AES.block_size)\n\n            return decrypted_data.decode('utf-8')\n        except Exception as e:\n            logging.error(&quot;Error when decrypting: &quot; + str(e))\n            return None\n\n    def generate_key_and_iv(self, salt, password, md):\n        key_length = 32\n        iv_length = 16\n        iterations = 1\n        digest_length = md().digest_size\n        required_length = (key_length + iv_length + digest_length - 1) // digest_length * digest_length\n        generated_data = bytearray([0]) * required_length\n        generated_length = 0\n\n        try:\n            md = md()\n            while generated_length &lt; key_length + iv_length:\n                if generated_length &gt; 0:\n                    md.update(generated_data[generated_length - digest_length:generated_length])\n                md.update(password)\n                if salt is not None:\n                    md.update(salt[:8])\n                generated_data[generated_length:generated_length + digest_length] = md.digest()\n\n                for i in range(1, iterations):\n                    md.update(generated_data[generated_length:generated_length + digest_length])\n                    generated_data[generated_length:generated_length + digest_length] = md.digest()\n\n                generated_length += digest_length\n\n            key = generated_data[:key_length]\n            iv = generated_data[key_length:key_length + iv_length]\n            return key, iv\n\n        except Exception as e:\n            logging.error(&quot;Error when generating key and IV: &quot; + str(e))\n            return None\n        finally:\n            for i in range(len(generated_data)):\n                generated_data[i] = 0\n</code></pre>\n<p>Can anyone help me on this.</p>\n"},{"tags":["java","swig"],"comments":[{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":0,"creation_date":1693562479,"post_id":77021846,"comment_id":135780727,"body_markdown":"I guess you can do so by creating a long variable in Java and passing it to the JNI function then in the JNI code, you can cast the long variable to a void** type and pass it to the C function...","body":"I guess you can do so by creating a long variable in Java and passing it to the JNI function then in the JNI code, you can cast the long variable to a void** type and pass it to the C function..."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1693567660,"post_id":77021846,"comment_id":135781601,"body_markdown":"Create a c wrapper function that returns a pointer of the appropriate type. Your calling code will be much nicer.","body":"Create a c wrapper function that returns a pointer of the appropriate type. Your calling code will be much nicer."}],"owner":{"account_id":1702087,"reputation":88,"user_id":1561860,"display_name":"ITmindCo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693567673,"creation_date":1693559257,"question_id":77021846,"body_markdown":"There is the following function in shared library (dll):\r\n\r\n    intptr_t GetClassObject(void** pptr)\r\n    {\r\n        if(!*pptr)\r\n        {\r\n            int value = 10;\r\n            *pptr= &amp;value; //here is another code like new Obj()\r\n            return 0;\r\n        }\r\n    \r\n        return (intptr_t )*pptr;\r\n    }\r\n\r\n\r\nSWIG made the following wrapper:\r\n\r\n    SWIGEXPORT jint JNICALL Java_AddInSwigJNI_GetClassObject(JNIEnv *jenv, jclass jcls, jlong jarg1) {\r\n      jint jresult = 0 ;\r\n      void **arg1 = (void **) 0 ;\r\n      long result;\r\n      \r\n      (void)jenv;\r\n      (void)jcls;\r\n      arg1 = *(void***)&amp;jarg1; \r\n      result = (long)GetClassObject(arg1);\r\n      jresult = (jint)result; \r\n      return jresult;\r\n    }\r\n\r\njava:\r\n\r\n    public class AddInSwigJNI {\r\n      public final static native int GetClassObject(long jarg1);\r\n    }\r\n\r\nHow can I now make a null pointer in Java code and pass its address to this function?\r\nFurther, for example, I want to see the number 10 written at this pointer in java code","title":"How to pass null pointer (double pointer) to c function via java jni?","body":"<p>There is the following function in shared library (dll):</p>\n<pre><code>intptr_t GetClassObject(void** pptr)\n{\n    if(!*pptr)\n    {\n        int value = 10;\n        *pptr= &amp;value; //here is another code like new Obj()\n        return 0;\n    }\n\n    return (intptr_t )*pptr;\n}\n</code></pre>\n<p>SWIG made the following wrapper:</p>\n<pre><code>SWIGEXPORT jint JNICALL Java_AddInSwigJNI_GetClassObject(JNIEnv *jenv, jclass jcls, jlong jarg1) {\n  jint jresult = 0 ;\n  void **arg1 = (void **) 0 ;\n  long result;\n  \n  (void)jenv;\n  (void)jcls;\n  arg1 = *(void***)&amp;jarg1; \n  result = (long)GetClassObject(arg1);\n  jresult = (jint)result; \n  return jresult;\n}\n</code></pre>\n<p>java:</p>\n<pre><code>public class AddInSwigJNI {\n  public final static native int GetClassObject(long jarg1);\n}\n</code></pre>\n<p>How can I now make a null pointer in Java code and pass its address to this function?\nFurther, for example, I want to see the number 10 written at this pointer in java code</p>\n"},{"tags":["java","concurrency","reactive-programming","quarkus"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1693297141,"post_id":76997701,"comment_id":135738548,"body_markdown":"I don&#39;t understand the `I would know at runtime what all methods I need to call` part. Can you elaborate?","body":"I don&#39;t understand the <code>I would know at runtime what all methods I need to call</code> part. Can you elaborate?"},{"owner":{"account_id":8696301,"reputation":1231,"user_id":6507527,"accept_rate":83,"display_name":"Akhil Prajapati"},"score":0,"creation_date":1693371649,"post_id":76997701,"comment_id":135750145,"body_markdown":"Based on the list of providers I would be getting in request, I would know what all APIs I need to call at runtime.","body":"Based on the list of providers I would be getting in request, I would know what all APIs I need to call at runtime."}],"answers":[{"tags":[],"owner":{"account_id":3568344,"reputation":639,"user_id":2979325,"display_name":"Serkan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693566580,"creation_date":1693566580,"answer_id":77022616,"question_id":76997701,"body_markdown":"I’m typing this from my phone and out of my head, so apologies for errors but you should do something like this:\r\n\r\n    Uni&lt;Tuple&gt; parallelCalls(List params) {\r\n       return Uni.combine()\r\n                 .all()\r\n                 .unis(\r\n                    restCallA(params),    \r\n                    restCallB(params))\r\n                 .asTuple();\r\n    }\r\n\r\n\r\n    Uni&lt;ResultA&gt; restCallA(List params) {\r\n          return Multi.createFrom().iterable(params)\r\n                      .invoke(param-&gt; clientA.send(param))\r\n                      //combine results &amp; return as uni\r\n    }","title":"Call Rest APIs parallely and combina their results - Java + Quarkus","body":"<p>I’m typing this from my phone and out of my head, so apologies for errors but you should do something like this:</p>\n<pre><code>Uni&lt;Tuple&gt; parallelCalls(List params) {\n   return Uni.combine()\n             .all()\n             .unis(\n                restCallA(params),    \n                restCallB(params))\n             .asTuple();\n}\n\n\nUni&lt;ResultA&gt; restCallA(List params) {\n      return Multi.createFrom().iterable(params)\n                  .invoke(param-&gt; clientA.send(param))\n                  //combine results &amp; return as uni\n}\n</code></pre>\n"}],"owner":{"account_id":8696301,"reputation":1231,"user_id":6507527,"accept_rate":83,"display_name":"Akhil Prajapati"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693566580,"creation_date":1693289247,"question_id":76997701,"body_markdown":"I need to call multiple APIs in parallel and combine their results as array and return to the consumer.\r\n\r\nHere is some context:\r\n\r\n - I would get the list of &quot;providers&quot; in the request. This list can have at least 1 or at most 10 values. This list could be different in different requests.\r\n - For each item in the list, I need to call a REST API. For example, if list contains [A,B], then I will be calling RestApiA and RestApiB, combine the result of both these APIs and return to the consumer.\r\n - These API calls will be independent of each other and should be called parallely. \r\n - If any of the API call fails, we should log an error but the rest of the API calls should still succeed. \r\n\r\nI came across this article https://quarkus.io/blog/mutiny-concurrent-uni/ but the problem here is I need to hardcode the functions I need to call concurrently. \r\n\r\nIn my case, I would know at runtime what all methods I need to call. ","title":"Call Rest APIs parallely and combina their results - Java + Quarkus","body":"<p>I need to call multiple APIs in parallel and combine their results as array and return to the consumer.</p>\n<p>Here is some context:</p>\n<ul>\n<li>I would get the list of &quot;providers&quot; in the request. This list can have at least 1 or at most 10 values. This list could be different in different requests.</li>\n<li>For each item in the list, I need to call a REST API. For example, if list contains [A,B], then I will be calling RestApiA and RestApiB, combine the result of both these APIs and return to the consumer.</li>\n<li>These API calls will be independent of each other and should be called parallely.</li>\n<li>If any of the API call fails, we should log an error but the rest of the API calls should still succeed.</li>\n</ul>\n<p>I came across this article <a href=\"https://quarkus.io/blog/mutiny-concurrent-uni/\" rel=\"nofollow noreferrer\">https://quarkus.io/blog/mutiny-concurrent-uni/</a> but the problem here is I need to hardcode the functions I need to call concurrently.</p>\n<p>In my case, I would know at runtime what all methods I need to call.</p>\n"},{"tags":["java","maven-2","compilation","package"],"comments":[{"owner":{"account_id":93007,"reputation":51990,"user_id":254643,"display_name":"Raghuram"},"score":1,"creation_date":1311213703,"post_id":6770455,"comment_id":8030411,"body_markdown":"Which version of maven compiler plugin?  Could you be hitting http://jira.codehaus.org/browse/MCOMPILER-71?  You could post the relevant pom snippet as well","body":"Which version of maven compiler plugin?  Could you be hitting <a href=\"http://jira.codehaus.org/browse/MCOMPILER-71\" rel=\"nofollow noreferrer\">jira.codehaus.org/browse/MCOMPILER-71</a>?  You could post the relevant pom snippet as well"},{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":0,"creation_date":1311239790,"post_id":6770455,"comment_id":8034811,"body_markdown":"Raghuram, good catch, but ironically, when I added annotation, it started working :)Compiler plugin 2.3.2, source &amp; target = 1.6","body":"Raghuram, good catch, but ironically, when I added annotation, it started working :)Compiler plugin 2.3.2, source &amp; target = 1.6"}],"answers":[{"comments":[{"owner":{"account_id":39078,"reputation":2247,"user_id":112637,"accept_rate":70,"display_name":"Ar3s"},"score":1,"creation_date":1569849072,"post_id":6770598,"comment_id":102718507,"body_markdown":"Could you describe what you mean by &quot;works correctly&quot; because I tried and maven 3.6.0 does not generate `package-info.class` files where I stand :/","body":"Could you describe what you mean by &quot;works correctly&quot; because I tried and maven 3.6.0 does not generate <code>package-info.class</code> files where I stand :/"}],"tags":[],"owner":{"account_id":350198,"reputation":15550,"user_id":685923,"accept_rate":70,"display_name":"Ed Staub"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1311214189,"creation_date":1311214189,"answer_id":6770598,"question_id":6770455,"body_markdown":"Works correctly in Maven 3; don&#39;t know about 2.  Is it possible that the package declaration in package-info.java is missing or wrong?","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>Works correctly in Maven 3; don't know about 2.  Is it possible that the package declaration in package-info.java is missing or wrong?</p>\n"},{"comments":[{"owner":{"account_id":1291135,"reputation":2869,"user_id":2587343,"display_name":"Vlastimil Ovč&#225;č&#237;k"},"score":2,"creation_date":1455110807,"post_id":6773781,"comment_id":58341734,"body_markdown":"You should have introduce the extra annotation for this purpose.","body":"You should have introduce the extra annotation for this purpose."}],"tags":[],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1693565576,"creation_date":1311239539,"answer_id":6773781,"question_id":6770455,"body_markdown":"The error was that the `package-info.java` must have any annotation with `Retention=RUNTIME` to compile into a class. Otherwise, JDK 6 omits it.  \r\nI used `@Deprecated` which is the only one in Java SE (and I  didn&#39;t want to introduce an annotation just because of that).\r\n\r\n    @Deprecated\r\n    package cz.zizka.ondra.packageinfo.test","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>The error was that the <code>package-info.java</code> must have any annotation with <code>Retention=RUNTIME</code> to compile into a class. Otherwise, JDK 6 omits it.<br />\nI used <code>@Deprecated</code> which is the only one in Java SE (and I  didn't want to introduce an annotation just because of that).</p>\n<pre><code>@Deprecated\npackage cz.zizka.ondra.packageinfo.test\n</code></pre>\n"},{"comments":[{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":1,"creation_date":1486006760,"post_id":33177922,"comment_id":71164576,"body_markdown":"Thanks for adding. It wasn&#39;t available at the time - added in JDK 7.","body":"Thanks for adding. It wasn&#39;t available at the time - added in JDK 7."}],"tags":[],"owner":{"account_id":175470,"reputation":5175,"user_id":405505,"display_name":"zbyszek"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1648461088,"creation_date":1445022501,"answer_id":33177922,"question_id":6770455,"body_markdown":"Give `-Xpkginfo:always` option to javac.\r\n\r\nSee the \r\n\r\n - [`javac` 1.8 documentation](http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html)\r\n\r\n - [`javac` 17 documentation](https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html)","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>Give <code>-Xpkginfo:always</code> option to javac.</p>\n<p>See the</p>\n<ul>\n<li><p><a href=\"http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html\" rel=\"noreferrer\"><code>javac</code> 1.8 documentation</a></p>\n</li>\n<li><p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html\" rel=\"noreferrer\"><code>javac</code> 17 documentation</a></p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13161416,"reputation":213,"user_id":11278676,"display_name":"Denis"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690358803,"creation_date":1690358803,"answer_id":76769173,"question_id":6770455,"body_markdown":"Alternative solution (inspired by zbyszek&#39;s answer) is to add this to your `pom.xml`:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;-Xpkginfo:always&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>Alternative solution (inspired by zbyszek's answer) is to add this to your <code>pom.xml</code>:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;compilerArgs&gt;\n                    &lt;arg&gt;-Xpkginfo:always&lt;/arg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7162,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":6773781,"answer_count":4,"score":8,"last_activity_date":1693565576,"creation_date":1311212379,"question_id":6770455,"body_markdown":"I have package-info.java in my package, Hibernate wants it for some features (programatic entity scanning).\r\n\r\nHowever, `mvn package` does not result in `package-info.class` being in `classes/` thus not in the artifact.\r\n\r\nHow can I force that happening?\r\n\r\n    mvn -v\r\n    Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)\r\n    Java version: 1.6.0_26\r\n    Java home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre\r\n    Default locale: en_US, platform encoding: UTF-8\r\n    OS name: &quot;linux&quot; version: &quot;2.6.35-30-generic&quot; arch: &quot;amd64&quot; Family: &quot;unix&quot;\r\n","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>I have package-info.java in my package, Hibernate wants it for some features (programatic entity scanning).</p>\n\n<p>However, <code>mvn package</code> does not result in <code>package-info.class</code> being in <code>classes/</code> thus not in the artifact.</p>\n\n<p>How can I force that happening?</p>\n\n<pre><code>mvn -v\nApache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)\nJava version: 1.6.0_26\nJava home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"linux\" version: \"2.6.35-30-generic\" arch: \"amd64\" Family: \"unix\"\n</code></pre>\n"},{"tags":["java","testing","junit","mocking","mockito"],"answers":[{"comments":[{"owner":{"account_id":15975342,"reputation":51,"user_id":11528412,"display_name":"t1808"},"score":0,"creation_date":1602149070,"post_id":64259346,"comment_id":113631006,"body_markdown":"Thanks for the reply, but I&#39;m sorry i am not using power-mockito and can&#39;t switch to it for one method.. is there any other way?","body":"Thanks for the reply, but I&#39;m sorry i am not using power-mockito and can&#39;t switch to it for one method.. is there any other way?"},{"owner":{"account_id":543862,"reputation":53458,"user_id":913124,"accept_rate":100,"display_name":"Christos"},"score":0,"creation_date":1602150256,"post_id":64259346,"comment_id":113631610,"body_markdown":"You are very welcome ! I would say unfortunately not or at least this I am aware of as of now. Specifically, with power mockito you can mock static methods, while with mockito this cannot be done.","body":"You are very welcome ! I would say unfortunately not or at least this I am aware of as of now. Specifically, with power mockito you can mock static methods, while with mockito this cannot be done."}],"tags":[],"owner":{"account_id":543862,"reputation":53458,"user_id":913124,"accept_rate":100,"display_name":"Christos"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602148759,"creation_date":1602148385,"answer_id":64259346,"question_id":64259197,"body_markdown":"You could try something like this:\r\n\r\n    import org.junit.runner.RunWith;\r\n    import org.powermock.core.classloader.annotations.PrepareForTest;\r\n    \r\n    @RunWith( PowerMockRunner.class )\r\n    @PrepareForTest( NetworkReader.class )\r\n    public class Tests {\r\n    \r\n        @Test\r\n        public void testGetServerAddress() {\r\n            mockStatic(NetworkUtil.class);\r\n            when(NetworkReader.getLocalHostname()).thenThrow(new Exception(&quot;exception message));\r\n        \r\n            // Here you could test your interface. \r\n        }\r\n    }","title":"how to mock inetaddress.getlocalhost().gethostname() to throw an exception","body":"<p>You could try something like this:</p>\n<pre><code>import org.junit.runner.RunWith;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\n\n@RunWith( PowerMockRunner.class )\n@PrepareForTest( NetworkReader.class )\npublic class Tests {\n\n    @Test\n    public void testGetServerAddress() {\n        mockStatic(NetworkUtil.class);\n        when(NetworkReader.getLocalHostname()).thenThrow(new Exception(&quot;exception message));\n    \n        // Here you could test your interface. \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1594349,"reputation":1990,"user_id":1476921,"display_name":"chipiik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693565287,"creation_date":1693565287,"answer_id":77022475,"question_id":64259197,"body_markdown":"You can mock static methods even with Mockito (since 3.4.0). See [docs][1] or [tutorial][2].\r\n\r\nThe other possibility would be to wrap the static call into your own class and inject this into the final usage place. Your wrapper object could be then mocked in a standard way.\r\n\r\n  [1]: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#48\r\n  [2]: https://www.baeldung.com/mockito-mock-static-methods","title":"how to mock inetaddress.getlocalhost().gethostname() to throw an exception","body":"<p>You can mock static methods even with Mockito (since 3.4.0). See <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#48\" rel=\"nofollow noreferrer\">docs</a> or <a href=\"https://www.baeldung.com/mockito-mock-static-methods\" rel=\"nofollow noreferrer\">tutorial</a>.</p>\n<p>The other possibility would be to wrap the static call into your own class and inject this into the final usage place. Your wrapper object could be then mocked in a standard way.</p>\n"}],"owner":{"account_id":15975342,"reputation":51,"user_id":11528412,"display_name":"t1808"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3247,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1693565287,"creation_date":1602147830,"question_id":64259197,"body_markdown":"I want my junit test coverage to include default method from interface. Following is the method from the interface\r\n\r\n    public default String getServerAddress() {\r\n\t\ttry {\r\n\t\t\treturn InetAddress.getLocalHost().getHostAddress();\r\n\t\t} catch (Exception e) {\r\n\t\t\t return null;\r\n\t\t}\r\n\t}\r\nMy target is to cover exception part of this method. So i probably need to mock InetAddress to make it throw exception. But i&#39;m not sure how?\r\nI tried to mock inetAddress and do the following but doesn&#39;t seem to be working:\r\n\r\n    when(inetAddress.getLocalHost().getHostAddress()).thenThrow(Exception.class)\r\n","title":"how to mock inetaddress.getlocalhost().gethostname() to throw an exception","body":"<p>I want my junit test coverage to include default method from interface. Following is the method from the interface</p>\n<pre><code>public default String getServerAddress() {\n    try {\n        return InetAddress.getLocalHost().getHostAddress();\n    } catch (Exception e) {\n         return null;\n    }\n}\n</code></pre>\n<p>My target is to cover exception part of this method. So i probably need to mock InetAddress to make it throw exception. But i'm not sure how?\nI tried to mock inetAddress and do the following but doesn't seem to be working:</p>\n<pre><code>when(inetAddress.getLocalHost().getHostAddress()).thenThrow(Exception.class)\n</code></pre>\n"},{"tags":["java","user-interface","exception"],"comments":[{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":2,"creation_date":1693510890,"post_id":77018802,"comment_id":135774600,"body_markdown":"What does doing a quick search on that error bring to you? Did you try?","body":"What does doing a quick search on that error bring to you? Did you try?"},{"owner":{"account_id":29303039,"reputation":1,"user_id":22450784,"display_name":"tailwind"},"score":0,"creation_date":1693511275,"post_id":77018802,"comment_id":135774670,"body_markdown":"@esQmo_ i am literally trying to fix these errors for 3 days.....if you know the answer than help me","body":"@esQmo_ i am literally trying to fix these errors for 3 days.....if you know the answer than help me"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693512965,"post_id":77018802,"comment_id":135774992,"body_markdown":"This is your full code? I&#39;ve tested here and it works!","body":"This is your full code? I&#39;ve tested here and it works!"},{"owner":{"account_id":29303039,"reputation":1,"user_id":22450784,"display_name":"tailwind"},"score":0,"creation_date":1693513019,"post_id":77018802,"comment_id":135775004,"body_markdown":"u tested it in what IDE ?","body":"u tested it in what IDE ?"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693513128,"post_id":77018802,"comment_id":135775019,"body_markdown":"Eclipse Version 2023-06","body":"Eclipse Version 2023-06"},{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":0,"creation_date":1693513559,"post_id":77018802,"comment_id":135775092,"body_markdown":"The goal is not to for us to fix your issue but to help you fix it yourself so that you can learn. I know it can be tough but it worth it.","body":"The goal is not to for us to fix your issue but to help you fix it yourself so that you can learn. I know it can be tough but it worth it."},{"owner":{"account_id":29303039,"reputation":1,"user_id":22450784,"display_name":"tailwind"},"score":0,"creation_date":1693514100,"post_id":77018802,"comment_id":135775158,"body_markdown":"@DiegoBorba I&#39;m using that eclipse version too..anyways that new code by you is working &amp; that my old code is working in VS code","body":"@DiegoBorba I&#39;m using that eclipse version too..anyways that new code by you is working &amp; that my old code is working in VS code"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693514241,"post_id":77018802,"comment_id":135775181,"body_markdown":"The problem are in the java version I gess... What java version are you using?","body":"The problem are in the java version I gess... What java version are you using?"},{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":0,"creation_date":1693514253,"post_id":77018802,"comment_id":135775184,"body_markdown":"The code is working. You get the exception when you dont fiil in age when promted","body":"The code is working. You get the exception when you dont fiil in age when promted"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693514399,"post_id":77018802,"comment_id":135775219,"body_markdown":"@esQmo_ I don&#39;t think so, when you dont fiil in age it returns a empty string and not null.","body":"@esQmo_ I don&#39;t think so, when you dont fiil in age it returns a empty string and not null."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693516721,"post_id":77018802,"comment_id":135775572,"body_markdown":"Always add a tag for your particular Java GUI framework, as we have several in Java (JavaFX, Swing, SWT, Vaadin, etc.). In this case, Swing. I did so for you this time.","body":"Always add a tag for your particular Java GUI framework, as we have several in Java (JavaFX, Swing, SWT, Vaadin, etc.). In this case, Swing. I did so for you this time."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1693560046,"creation_date":1693516188,"answer_id":77019285,"question_id":77018802,"body_markdown":"The exception you see means that the method `&#204;nteger.parseInt()` complains having to parse an unsuitable string (null). That null must have come from `JOptionPane.showInputDialog(...)`.\r\n\r\nWhen you look into the [API documentation][1] it does not mention that showInputDialog() can return null. But it also does not specify what happens if the user\r\n- enters data and presses Ok\r\n- enters no data and presses Ok\r\n- enters or not data and presses Cancel\r\n\r\nWhile the null value might indicate the user pressed Cancel (we still don&#39;t know), your code needs to deal with that situation. Either check for `null` before calling `parseInt()`, or call `parseInt()` regardless, catch the `NumberFormatException` and react in an appropriate way.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/JOptionPane.html#showInputDialog(java.awt.Component,java.lang.Object)","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string","body":"<p>The exception you see means that the method <code>Ìnteger.parseInt()</code> complains having to parse an unsuitable string (null). That null must have come from <code>JOptionPane.showInputDialog(...)</code>.</p>\n<p>When you look into the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/JOptionPane.html#showInputDialog(java.awt.Component,java.lang.Object)\" rel=\"nofollow noreferrer\">API documentation</a> it does not mention that showInputDialog() can return null. But it also does not specify what happens if the user</p>\n<ul>\n<li>enters data and presses Ok</li>\n<li>enters no data and presses Ok</li>\n<li>enters or not data and presses Cancel</li>\n</ul>\n<p>While the null value might indicate the user pressed Cancel (we still don't know), your code needs to deal with that situation. Either check for <code>null</code> before calling <code>parseInt()</code>, or call <code>parseInt()</code> regardless, catch the <code>NumberFormatException</code> and react in an appropriate way.</p>\n"},{"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1693560190,"post_id":77019561,"comment_id":135780279,"body_markdown":"Just the input not being null and not emtpy does not guarantee it can be parsed as Integer.","body":"Just the input not being null and not emtpy does not guarantee it can be parsed as Integer."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693520358,"creation_date":1693520358,"answer_id":77019561,"question_id":77018802,"body_markdown":"&gt; _&quot;... IDK what happened I am new to java and not familiar with these types of errors... &quot;_\r\n\r\nIf you cancel the _age_ input dialog it will return _null_.  \r\nAnd, passing a _null_ argument to _[Integer#parseInt](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String))_ will produce a _[NumberFormatException](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/NumberFormatException.html)_.\r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string\r\n\tat java.base/java.lang.Integer.parseInt(Integer.java:627)\r\n\tat java.base/java.lang.Integer.parseInt(Integer.java:781)\r\n\tat test.main(test.java:13)\r\n```\r\n\r\nHere is the source for _Integer#parseInt_.  \r\n_[GitHub &amp;ndash; jdk/src/java.base/share/classes/java/lang/Integer.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/Integer.java#L623)_.\r\n\r\n```java\r\npublic static int parseInt(String s, int radix)\r\n            throws NumberFormatException\r\n{\r\n    /* ... */\r\n\r\n    if (s == null) {\r\n        throw new NumberFormatException(&quot;Cannot parse null string&quot;);\r\n    }\r\n\r\n    ...\r\n```\r\n\r\nYou&#39;ll need to check for _null_.  \r\nI suggest using the _Integer_ and _Double_ classes, you can utilize the _null_ assignment.\r\n\r\n```java\r\nString name = JOptionPane.showInputDialog (&quot;Enter your name&quot;);\r\nJOptionPane.showMessageDialog (null, &quot;Hello &quot; + name);\r\n\r\nInteger age = null;\r\nString string = JOptionPane.showInputDialog (&quot;Enter your age&quot;);\r\nif (string != null &amp;&amp; !string.isBlank()) age = Integer.valueOf(string);\r\nJOptionPane.showMessageDialog (null, &quot;You are &quot; + age + &quot; years old&quot;);\r\n\r\nDouble height = null;\r\nstring = JOptionPane.showInputDialog (&quot;Enter your height&quot;);\r\nif (string != null &amp;&amp; !string.isBlank()) height = Double.valueOf(string);\r\nJOptionPane.showMessageDialog (null, &quot;You are &quot; + height + &quot; cm tall&quot;);\r\n```\r\n\r\nHere is the the tutorial on _Java Dialogs_.  \r\n_[How to Make Dialogs (The Java&amp;trade; Tutorials &amp;gt; Creating a GUI With Swing &amp;gt; Using Swing Components)](https://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)_.\r\n\r\n","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string","body":"<blockquote>\n<p><em>&quot;... IDK what happened I am new to java and not familiar with these types of errors... &quot;</em></p>\n</blockquote>\n<p>If you cancel the <em>age</em> input dialog it will return <em>null</em>.<br />\nAnd, passing a <em>null</em> argument to <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String)\" rel=\"nofollow noreferrer\">Integer#parseInt</a></em> will produce a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/NumberFormatException.html\" rel=\"nofollow noreferrer\">NumberFormatException</a></em>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string\n    at java.base/java.lang.Integer.parseInt(Integer.java:627)\n    at java.base/java.lang.Integer.parseInt(Integer.java:781)\n    at test.main(test.java:13)\n</code></pre>\n<p>Here is the source for <em>Integer#parseInt</em>.<br />\n<em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/Integer.java#L623\" rel=\"nofollow noreferrer\">GitHub – jdk/src/java.base/share/classes/java/lang/Integer.java</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int parseInt(String s, int radix)\n            throws NumberFormatException\n{\n    /* ... */\n\n    if (s == null) {\n        throw new NumberFormatException(&quot;Cannot parse null string&quot;);\n    }\n\n    ...\n</code></pre>\n<p>You'll need to check for <em>null</em>.<br />\nI suggest using the <em>Integer</em> and <em>Double</em> classes, you can utilize the <em>null</em> assignment.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String name = JOptionPane.showInputDialog (&quot;Enter your name&quot;);\nJOptionPane.showMessageDialog (null, &quot;Hello &quot; + name);\n\nInteger age = null;\nString string = JOptionPane.showInputDialog (&quot;Enter your age&quot;);\nif (string != null &amp;&amp; !string.isBlank()) age = Integer.valueOf(string);\nJOptionPane.showMessageDialog (null, &quot;You are &quot; + age + &quot; years old&quot;);\n\nDouble height = null;\nstring = JOptionPane.showInputDialog (&quot;Enter your height&quot;);\nif (string != null &amp;&amp; !string.isBlank()) height = Double.valueOf(string);\nJOptionPane.showMessageDialog (null, &quot;You are &quot; + height + &quot; cm tall&quot;);\n</code></pre>\n<p>Here is the the tutorial on <em>Java Dialogs</em>.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html\" rel=\"nofollow noreferrer\">How to Make Dialogs (The Java™ Tutorials &gt; Creating a GUI With Swing &gt; Using Swing Components)</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693564857,"creation_date":1693564857,"answer_id":77022430,"question_id":77018802,"body_markdown":"So now you know the deal. To simply recap, the [Integer.parseInt()](https://www.tutorialspoint.com/java/number_parseint.htm) method can only accept a string consisting of *one* or *more* digits from **0** to **9** *(no spaces at all)* but, only up to [Integer.MAX_VALUE](https://www.educative.io/answers/what-is-integermaxvalue) which happens to be `2147483647` OR [Integer.MIN_VALUE](https://www.educative.io/answers/what-is-integerminvalue-in-java) which happens to be `-2147483648`. Yes, there are two specific characters the [Integer.parseInt()](https://www.tutorialspoint.com/java/number_parseint.htm) method will accept and they are the *plus* (**+**) character (which basically indicates an *unsigned*, positive value and is rarely used) and the **minus** (*-*) character which indicates a *signed* (negative) value.\r\n\r\nIf there are any alpha characters within the argument passed to the [Integer.parseInt()](https://www.tutorialspoint.com/java/number_parseint.htm) method (including any white-spaces) other than `+` or `-`, then the method will fail with a [NumberFormatException](https://docs.oracle.com/javase/8/docs/api/java/lang/NumberFormatException.html).\r\n\r\nThe [Double.parseDouble()](https://www.tutorialspoint.com/java/lang/double_parsedouble.htm) method works in very much the same fashion however, it does accept more alpha characters, for example:\r\n\r\n - `.` Decimal Point (period)       {only after the whole number portion\r\n   of the string: `&quot;234.342&quot;`);\r\n - `+` Unsigned designator          (only at the beginning of the\r\n   string: `&quot;+234.342&quot;`);\r\n - `-` Signed designator            (only at the beginning of the\r\n   string: `&quot;-234.342&quot;`);\r\n - `d` or `D` Double Type indicator (only at the end of the string: `&quot;234.342D&quot;`);\r\n - `f` or `F` Float Type indicator  (only at the end of the string: `&quot;234.342F&quot;`);\r\n - `e` or `E` Exponent Notation     (only within the decimal portion of\r\n   the string: `&quot;234.34E2&quot;`);\r\n\r\nAnd, you can also supply a string representation of an Integer value (whole number) to this method and it will convert it to Double Type, for example:\r\n\r\n    double dblValue = Double.parseDouble(&quot;234&quot;);\r\n\r\nThe `dbleValue` variable will hold: `234.0` \r\n\r\nAs already explained to you, the Input Dialog will return `null` when the &lt;kbd&gt;Cancel&lt;/kbd&gt; button is selected or the dialog window is closed with the &lt;kbd&gt;X&lt;/kbd&gt; button in the upper-right corner. Obviously, this needs to be dealt with and the best way to that is to **validate** the data you receive from the User. If the User makes a mistake then, inform that User and let him or her try again on the same prompt. Each bit of data entry provided from the User should be validated so to eliminate problems down the road. Deal with those problems at the entry level.\r\n\r\nHere is a runnable example. Be sure to read the comments in code. It looks like a lot of code but, if you delete all the commenting...it really isn&#39;t. Try it out if you like:\r\n\r\n```\r\npublic class Test {\r\n    \r\n    // Class member variables:\r\n    private final javax.swing.JFrame parent = new javax.swing.JFrame();\r\n        {\r\n            parent.setAlwaysOnTop(true);\r\n            parent.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);\r\n            parent.setLocationRelativeTo(null);\r\n        }\r\n\r\n    private String name;\r\n    private int age;\r\n    private double height;\r\n\r\n\r\n    // Application entry point:\r\n    public static void main(String[] args) {\r\n        // This app takes no Command-Line arguments.\r\n\r\n        /* App started this way to avoid the need for \r\n           statics (unless we really want them):          */\r\n        new Test().startApp(args);\r\n    }\r\n\r\n    /* Code pertinent to this application is run here \r\n       and is initially called from the `main()` method: */\r\n    private void startApp(String[] args) {\r\n        // Outer Loop...Continues looping until User is happy with the entries:\r\n        int yesNo = 1; // Used in final JOptionPane Confirm Dialog:\r\n        while (yesNo != 0) {\r\n            // Initialize class member variables upon every iteration of the outer loop:\r\n            name = &quot;&quot;;\r\n            age = 0;\r\n            height = 0.0d;\r\n        \r\n            // PROMPT #1:\r\n            /* Name...If nothing is supplied the app ends (inner loop).\r\n               While name is empty...keep looping:            */\r\n            while (name.isEmpty()) {\r\n                // Get User&#39;s input:\r\n                name = javax.swing.JOptionPane.showInputDialog(parent,\r\n                        &quot;&lt;html&gt;&lt;b&gt;Please enter your name:&lt;/b&gt;&lt;br&gt;&quot;\r\n                        + &quot;&lt;font size=&#39;2&#39; color=gray&gt;If you enter nothing, this &quot;\r\n                        + &quot;application will close.&lt;/font&gt;&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\r\n                        &quot;Your Name?&quot;, javax.swing.JOptionPane.PLAIN_MESSAGE);\r\n                \r\n                // VALIDATION:\r\n                // If null or empty string is returned from dialog then end application:\r\n                if (name == null || name.trim().isEmpty()) {\r\n                    quit(); // Release the JFrame (parent) resource.\r\n                    return;\r\n                }\r\n                /* If there are numerical digits within the name then \r\n                   inform the User and allow to try again. Digits are\r\n                   not allowed in name for this particular case:   */\r\n                else if (name.matches(&quot;.*[0-9].*&quot;) || name.matches(&quot;.*?\\\\p{Punct}.*?&quot;)) {\r\n                    // Inform of Invalid Entry...\r\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;Invalid Name Supplied!&lt;/center&gt;&quot;\r\n                            + &quot;&lt;center&gt;&lt;font size=&#39;5&#39; color=red&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\r\n                            + &quot;&lt;/center&gt;There can be no numerical digits or special&lt;br&gt; characters in your name! &quot;\r\n                            + &quot;Select &lt;b&gt;OK&lt;/b&gt; to try&lt;br&gt;again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Name!&quot;,\r\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\r\n                    name = &quot;&quot;;  // Empty name to ensure re-loop:\r\n                }\r\n            }\r\n            // If we&#39;ve made it here the &#39;name&#39; validation has passed.\r\n\r\n            \r\n            // PROMPT #2:\r\n            /* Age...Continue looping until a valid age is supplied:\r\n               If nothing is supplied then the application ends:\r\n               Allowable age range is from 1 to 120 years (inclusive): */\r\n            String theAge = &quot;&quot;;\r\n            while (theAge.isEmpty()) {\r\n                // Get User&#39;s input:\r\n                theAge = javax.swing.JOptionPane.showInputDialog(parent,\r\n                        &quot;&lt;html&gt;Hello &lt;font color=blue&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;, &quot;\r\n                        + &quot;now please enter your age:&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Your Age?&quot;,\r\n                        javax.swing.JOptionPane.PLAIN_MESSAGE);\r\n                \r\n                // VALIDATION:\r\n                /* If Nothing was supplied or the Cancel or close \r\n                   buttons were selected then quit.           */\r\n                if (theAge == null || theAge.trim().isEmpty()) {\r\n                    quit();     // Release the JFrame (parent) resource.\r\n                    return;     // Simply returning effectively ends this appliction.\r\n                }\r\n                // If the User&#39;s entry all digits?\r\n                else if (!theAge.matches(&quot;\\\\d+&quot;)) {\r\n                    // No...Inform User and allow to try again:\r\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Age!&lt;/center&gt;&quot;\r\n                            + &quot;&lt;center&gt;&lt;font size=&#39;5&#39; color=red&gt;&lt;b&gt;&quot; + theAge + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\r\n                            + &quot;&lt;/center&gt;Your age must contain numerical digits relating to an&lt;br&gt;&quot;\r\n                            + &quot;inclusive integer value from 1 (min) to 120 (max)!&lt;br&gt;&lt;br&gt;&quot;\r\n                            + &quot;Select the &lt;b&gt;OK&lt;/b&gt; button to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Age!&quot;,\r\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\r\n                    theAge = &quot;&quot;;  // Empty name to ensure proper re-loop:\r\n                    continue;\r\n                }\r\n                \r\n                // Convert input to int:\r\n                age = Integer.parseInt(theAge);\r\n                \r\n                // Is &#39;age&#39; within a desire range? (1 to 120 years)\r\n                if (age &lt; 1 || age &gt; 120) {\r\n                    // No...Inform User and allow to try again...\r\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Age!&lt;/center&gt;&quot;\r\n                            + &quot;&lt;center&gt;&lt;font size=&#39;5&#39; color=red&gt;&lt;b&gt;&quot; + theAge + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\r\n                            + &quot;&lt;/center&gt;Your age must a value from 1 (min) to 120 (max)!&lt;br&gt;&quot;\r\n                            + &quot;Select OK to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Age!&quot;,\r\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\r\n                    theAge = &quot;&quot;;  // Empty name to ensure re-loop:\r\n                    age = 0;      // Make sure &#39;age&#39; is reset to 0:\r\n                }\r\n            }\r\n            // If we&#39;ve made it here the `age` validation has passed.\r\n\r\n            \r\n            // PROMPT #3:\r\n            /* Height...Continue looping until a valid height is supplied:\r\n               Hieght range is from 8 inches to 102 inches:            */\r\n            String theHeight = &quot;&quot;;\r\n            while (theHeight.isEmpty()) {\r\n                // Get User&#39;s input:\r\n                theHeight = javax.swing.JOptionPane.showInputDialog(parent,\r\n                        &quot;&lt;html&gt;Well &lt;font color=blue&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;, we know &quot;\r\n                        + &quot;your name and we know that you are&lt;br&gt;&lt;font color=blue&gt;&lt;b&gt;&quot;\r\n                        + age + &quot;&lt;/b&gt;&lt;/font&gt; years old but, we still yet need to know &quot;\r\n                        + &quot;your height.&lt;br&gt;&lt;br&gt;Please supply your height in inches:&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\r\n                        &quot;Your Height?&quot;, javax.swing.JOptionPane.PLAIN_MESSAGE);\r\n                \r\n                /* If Nothing was supplied or the Cancel or close \r\n                   buttons were selected then quit.           */\r\n                if (theHeight == null || theHeight.trim().isEmpty() || !theHeight.matches(&quot;\\\\d+(\\\\.\\\\d+)?&quot;)) {\r\n                    quit();     // Release the JFrame (parent) resource.\r\n                    return;\r\n                }\r\n                \r\n                // Convert input to double type:\r\n                height = Double.parseDouble(theHeight);\r\n\r\n                // Is &#39;height&#39; within a desire range? (8 to 102 inches)\r\n                if (height &lt; 8.0d || height &gt; 102.0d) {\r\n                    // No...inform User and allow to retry:\r\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Height!&lt;/center&gt;&quot;\r\n                            + &quot;&lt;center&gt;&lt;font size=&#39;5&#39; color=red&gt;&lt;b&gt;&quot; + theHeight + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\r\n                            + &quot;&lt;/center&gt;Your height must a value from 8.0 (min) to 102.0 (max)!&lt;br&gt;&quot;\r\n                            + &quot;Select OK to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Height!&quot;,\r\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\r\n                    theHeight = &quot;&quot;;     // Empty name to ensure re-loop:\r\n                    height = 0.0d;      // Reset &#39;height&#39; to 0.0 (height is a double value):\r\n                }\r\n            }\r\n            // If we&#39;ve made it here the `age` validation has passed.\r\n            \r\n            \r\n            // FINAL PROMPT - DISPLAY:\r\n            /* Display Results...If User selects anything other than YES\r\n               then he/she is allowed to re-enter all the data otherwise\r\n               the application ends:                        :      */\r\n            yesNo = javax.swing.JOptionPane.showConfirmDialog(parent,\r\n                    &quot;&lt;html&gt;&quot;\r\n                    + &quot;So, overall, the information you provided is:&lt;br&gt;&quot;\r\n                    + &quot;&lt;ul&gt;&quot;\r\n                    + &quot;• &lt;b&gt;Name:&lt;/b&gt; &amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;&quot; + name + &quot;&lt;/font&gt;&lt;br&gt;&quot;\r\n                    + &quot;• &lt;b&gt;Age:&lt;/b&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=red&gt;&quot; + age + &quot;&lt;/font&gt; years&lt;br&gt;&quot;\r\n                    + &quot;• &lt;b&gt;Height:&lt;/b&gt; &lt;font color=purple&gt;&quot; + height + &quot;&lt;/font&gt; inches&lt;br&gt;&quot;\r\n                    + &quot;&lt;/ul&gt;&quot;\r\n                    + &quot;Is this correct?&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\r\n                    &quot;Confirm your Input:&quot;, javax.swing.JOptionPane.YES_NO_OPTION,\r\n                    javax.swing.JOptionPane.INFORMATION_MESSAGE);\r\n        }\r\n\r\n        // YES WAS SELECTED SO QUIT:\r\n        /* Release the JFrame (parent) resource and, display \r\n          a Notification Box in the bottom-right corner of \r\n          your screen, that you have quit:               */\r\n        quit();\r\n        \r\n        // DONE\r\n    }\r\n    \r\n    /* Quits the Application:    */\r\n    private void quit() { \r\n        // Dispose of the JFrame used as parent for all the dialogs:\r\n        parent.dispose();\r\n        // Display a Quit Notification:\r\n        sendNotification(&quot;Quiting Demo Application!&quot;, &quot;Bye Bye For Now. Try it &quot;\r\n                       + &quot;again later.&quot;, java.awt.TrayIcon.MessageType.NONE);\r\n    }\r\n    \r\n    /**\r\n     * Displays a typical Windows Notification above the Taskbar. If a\r\n     * SystemTray is not supported within the system this method was called then\r\n     * nothing is displayed (the method is not processed).&lt;br&gt;\r\n     *\r\n     * @param title           (String) Message Title&lt;br&gt;\r\n     *\r\n     * @param message         (String) Message&lt;br&gt;\r\n     *\r\n     * @param messageTypeIcon (MessageType) The MessageType is a ENUM from the\r\n     *                        TrayIncon Class, for example: TrayIcon.MessageType.INFO&lt;pre&gt;\r\n     *  The different MessageTypes available are:\r\n     *\r\n     *      TrayIcon.MessageType.ERROR\r\n     *      TrayIcon.MessageType.INFO\r\n     *      TrayIcon.MessageType.NONE\r\n     *      TrayIcon.MessageType.WARNING&lt;/pre&gt;\r\n     */\r\n    private void sendNotification(String title, String message, java.awt.TrayIcon.MessageType messageTypeIcon) {\r\n        try {\r\n            //Obtain only one instance of the SystemTray object\r\n            java.awt.SystemTray tray = java.awt.SystemTray.getSystemTray();\r\n            if (!java.awt.SystemTray.isSupported()) {\r\n                return;\r\n            }\r\n            java.awt.Image image = java.awt.Toolkit.getDefaultToolkit().createImage(&quot;&quot;);\r\n            java.awt.TrayIcon trayIcon = new java.awt.TrayIcon(image, &quot;&quot;);\r\n            tray.add(trayIcon);\r\n            \r\n            trayIcon.displayMessage(title, message, messageTypeIcon);\r\n            tray.remove(trayIcon);\r\n        }\r\n        catch (java.awt.AWTException ex) {\r\n            System.err.println(ex);\r\n        }\r\n    }\r\n}\r\n```","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string","body":"<p>So now you know the deal. To simply recap, the <a href=\"https://www.tutorialspoint.com/java/number_parseint.htm\" rel=\"nofollow noreferrer\">Integer.parseInt()</a> method can only accept a string consisting of <em>one</em> or <em>more</em> digits from <strong>0</strong> to <strong>9</strong> <em>(no spaces at all)</em> but, only up to <a href=\"https://www.educative.io/answers/what-is-integermaxvalue\" rel=\"nofollow noreferrer\">Integer.MAX_VALUE</a> which happens to be <code>2147483647</code> OR <a href=\"https://www.educative.io/answers/what-is-integerminvalue-in-java\" rel=\"nofollow noreferrer\">Integer.MIN_VALUE</a> which happens to be <code>-2147483648</code>. Yes, there are two specific characters the <a href=\"https://www.tutorialspoint.com/java/number_parseint.htm\" rel=\"nofollow noreferrer\">Integer.parseInt()</a> method will accept and they are the <em>plus</em> (<strong>+</strong>) character (which basically indicates an <em>unsigned</em>, positive value and is rarely used) and the <strong>minus</strong> (<em>-</em>) character which indicates a <em>signed</em> (negative) value.</p>\n<p>If there are any alpha characters within the argument passed to the <a href=\"https://www.tutorialspoint.com/java/number_parseint.htm\" rel=\"nofollow noreferrer\">Integer.parseInt()</a> method (including any white-spaces) other than <code>+</code> or <code>-</code>, then the method will fail with a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/NumberFormatException.html\" rel=\"nofollow noreferrer\">NumberFormatException</a>.</p>\n<p>The <a href=\"https://www.tutorialspoint.com/java/lang/double_parsedouble.htm\" rel=\"nofollow noreferrer\">Double.parseDouble()</a> method works in very much the same fashion however, it does accept more alpha characters, for example:</p>\n<ul>\n<li><code>.</code> Decimal Point (period)       {only after the whole number portion\nof the string: <code>&quot;234.342&quot;</code>);</li>\n<li><code>+</code> Unsigned designator          (only at the beginning of the\nstring: <code>&quot;+234.342&quot;</code>);</li>\n<li><code>-</code> Signed designator            (only at the beginning of the\nstring: <code>&quot;-234.342&quot;</code>);</li>\n<li><code>d</code> or <code>D</code> Double Type indicator (only at the end of the string: <code>&quot;234.342D&quot;</code>);</li>\n<li><code>f</code> or <code>F</code> Float Type indicator  (only at the end of the string: <code>&quot;234.342F&quot;</code>);</li>\n<li><code>e</code> or <code>E</code> Exponent Notation     (only within the decimal portion of\nthe string: <code>&quot;234.34E2&quot;</code>);</li>\n</ul>\n<p>And, you can also supply a string representation of an Integer value (whole number) to this method and it will convert it to Double Type, for example:</p>\n<pre><code>double dblValue = Double.parseDouble(&quot;234&quot;);\n</code></pre>\n<p>The <code>dbleValue</code> variable will hold: <code>234.0</code></p>\n<p>As already explained to you, the Input Dialog will return <code>null</code> when the <kbd>Cancel</kbd> button is selected or the dialog window is closed with the <kbd>X</kbd> button in the upper-right corner. Obviously, this needs to be dealt with and the best way to that is to <strong>validate</strong> the data you receive from the User. If the User makes a mistake then, inform that User and let him or her try again on the same prompt. Each bit of data entry provided from the User should be validated so to eliminate problems down the road. Deal with those problems at the entry level.</p>\n<p>Here is a runnable example. Be sure to read the comments in code. It looks like a lot of code but, if you delete all the commenting...it really isn't. Try it out if you like:</p>\n<pre><code>public class Test {\n    \n    // Class member variables:\n    private final javax.swing.JFrame parent = new javax.swing.JFrame();\n        {\n            parent.setAlwaysOnTop(true);\n            parent.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);\n            parent.setLocationRelativeTo(null);\n        }\n\n    private String name;\n    private int age;\n    private double height;\n\n\n    // Application entry point:\n    public static void main(String[] args) {\n        // This app takes no Command-Line arguments.\n\n        /* App started this way to avoid the need for \n           statics (unless we really want them):          */\n        new Test().startApp(args);\n    }\n\n    /* Code pertinent to this application is run here \n       and is initially called from the `main()` method: */\n    private void startApp(String[] args) {\n        // Outer Loop...Continues looping until User is happy with the entries:\n        int yesNo = 1; // Used in final JOptionPane Confirm Dialog:\n        while (yesNo != 0) {\n            // Initialize class member variables upon every iteration of the outer loop:\n            name = &quot;&quot;;\n            age = 0;\n            height = 0.0d;\n        \n            // PROMPT #1:\n            /* Name...If nothing is supplied the app ends (inner loop).\n               While name is empty...keep looping:            */\n            while (name.isEmpty()) {\n                // Get User's input:\n                name = javax.swing.JOptionPane.showInputDialog(parent,\n                        &quot;&lt;html&gt;&lt;b&gt;Please enter your name:&lt;/b&gt;&lt;br&gt;&quot;\n                        + &quot;&lt;font size='2' color=gray&gt;If you enter nothing, this &quot;\n                        + &quot;application will close.&lt;/font&gt;&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\n                        &quot;Your Name?&quot;, javax.swing.JOptionPane.PLAIN_MESSAGE);\n                \n                // VALIDATION:\n                // If null or empty string is returned from dialog then end application:\n                if (name == null || name.trim().isEmpty()) {\n                    quit(); // Release the JFrame (parent) resource.\n                    return;\n                }\n                /* If there are numerical digits within the name then \n                   inform the User and allow to try again. Digits are\n                   not allowed in name for this particular case:   */\n                else if (name.matches(&quot;.*[0-9].*&quot;) || name.matches(&quot;.*?\\\\p{Punct}.*?&quot;)) {\n                    // Inform of Invalid Entry...\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;Invalid Name Supplied!&lt;/center&gt;&quot;\n                            + &quot;&lt;center&gt;&lt;font size='5' color=red&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\n                            + &quot;&lt;/center&gt;There can be no numerical digits or special&lt;br&gt; characters in your name! &quot;\n                            + &quot;Select &lt;b&gt;OK&lt;/b&gt; to try&lt;br&gt;again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Name!&quot;,\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\n                    name = &quot;&quot;;  // Empty name to ensure re-loop:\n                }\n            }\n            // If we've made it here the 'name' validation has passed.\n\n            \n            // PROMPT #2:\n            /* Age...Continue looping until a valid age is supplied:\n               If nothing is supplied then the application ends:\n               Allowable age range is from 1 to 120 years (inclusive): */\n            String theAge = &quot;&quot;;\n            while (theAge.isEmpty()) {\n                // Get User's input:\n                theAge = javax.swing.JOptionPane.showInputDialog(parent,\n                        &quot;&lt;html&gt;Hello &lt;font color=blue&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;, &quot;\n                        + &quot;now please enter your age:&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Your Age?&quot;,\n                        javax.swing.JOptionPane.PLAIN_MESSAGE);\n                \n                // VALIDATION:\n                /* If Nothing was supplied or the Cancel or close \n                   buttons were selected then quit.           */\n                if (theAge == null || theAge.trim().isEmpty()) {\n                    quit();     // Release the JFrame (parent) resource.\n                    return;     // Simply returning effectively ends this appliction.\n                }\n                // If the User's entry all digits?\n                else if (!theAge.matches(&quot;\\\\d+&quot;)) {\n                    // No...Inform User and allow to try again:\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Age!&lt;/center&gt;&quot;\n                            + &quot;&lt;center&gt;&lt;font size='5' color=red&gt;&lt;b&gt;&quot; + theAge + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\n                            + &quot;&lt;/center&gt;Your age must contain numerical digits relating to an&lt;br&gt;&quot;\n                            + &quot;inclusive integer value from 1 (min) to 120 (max)!&lt;br&gt;&lt;br&gt;&quot;\n                            + &quot;Select the &lt;b&gt;OK&lt;/b&gt; button to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Age!&quot;,\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\n                    theAge = &quot;&quot;;  // Empty name to ensure proper re-loop:\n                    continue;\n                }\n                \n                // Convert input to int:\n                age = Integer.parseInt(theAge);\n                \n                // Is 'age' within a desire range? (1 to 120 years)\n                if (age &lt; 1 || age &gt; 120) {\n                    // No...Inform User and allow to try again...\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Age!&lt;/center&gt;&quot;\n                            + &quot;&lt;center&gt;&lt;font size='5' color=red&gt;&lt;b&gt;&quot; + theAge + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\n                            + &quot;&lt;/center&gt;Your age must a value from 1 (min) to 120 (max)!&lt;br&gt;&quot;\n                            + &quot;Select OK to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Age!&quot;,\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\n                    theAge = &quot;&quot;;  // Empty name to ensure re-loop:\n                    age = 0;      // Make sure 'age' is reset to 0:\n                }\n            }\n            // If we've made it here the `age` validation has passed.\n\n            \n            // PROMPT #3:\n            /* Height...Continue looping until a valid height is supplied:\n               Hieght range is from 8 inches to 102 inches:            */\n            String theHeight = &quot;&quot;;\n            while (theHeight.isEmpty()) {\n                // Get User's input:\n                theHeight = javax.swing.JOptionPane.showInputDialog(parent,\n                        &quot;&lt;html&gt;Well &lt;font color=blue&gt;&lt;b&gt;&quot; + name + &quot;&lt;/b&gt;&lt;/font&gt;, we know &quot;\n                        + &quot;your name and we know that you are&lt;br&gt;&lt;font color=blue&gt;&lt;b&gt;&quot;\n                        + age + &quot;&lt;/b&gt;&lt;/font&gt; years old but, we still yet need to know &quot;\n                        + &quot;your height.&lt;br&gt;&lt;br&gt;Please supply your height in inches:&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\n                        &quot;Your Height?&quot;, javax.swing.JOptionPane.PLAIN_MESSAGE);\n                \n                /* If Nothing was supplied or the Cancel or close \n                   buttons were selected then quit.           */\n                if (theHeight == null || theHeight.trim().isEmpty() || !theHeight.matches(&quot;\\\\d+(\\\\.\\\\d+)?&quot;)) {\n                    quit();     // Release the JFrame (parent) resource.\n                    return;\n                }\n                \n                // Convert input to double type:\n                height = Double.parseDouble(theHeight);\n\n                // Is 'height' within a desire range? (8 to 102 inches)\n                if (height &lt; 8.0d || height &gt; 102.0d) {\n                    // No...inform User and allow to retry:\n                    javax.swing.JOptionPane.showMessageDialog(parent, &quot;&lt;html&gt;&lt;center&gt;You Have supplied An Invalid Height!&lt;/center&gt;&quot;\n                            + &quot;&lt;center&gt;&lt;font size='5' color=red&gt;&lt;b&gt;&quot; + theHeight + &quot;&lt;/b&gt;&lt;/font&gt;&quot;\n                            + &quot;&lt;/center&gt;Your height must a value from 8.0 (min) to 102.0 (max)!&lt;br&gt;&quot;\n                            + &quot;Select OK to try again...&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Invalid Height!&quot;,\n                            javax.swing.JOptionPane.WARNING_MESSAGE);\n                    theHeight = &quot;&quot;;     // Empty name to ensure re-loop:\n                    height = 0.0d;      // Reset 'height' to 0.0 (height is a double value):\n                }\n            }\n            // If we've made it here the `age` validation has passed.\n            \n            \n            // FINAL PROMPT - DISPLAY:\n            /* Display Results...If User selects anything other than YES\n               then he/she is allowed to re-enter all the data otherwise\n               the application ends:                        :      */\n            yesNo = javax.swing.JOptionPane.showConfirmDialog(parent,\n                    &quot;&lt;html&gt;&quot;\n                    + &quot;So, overall, the information you provided is:&lt;br&gt;&quot;\n                    + &quot;&lt;ul&gt;&quot;\n                    + &quot;• &lt;b&gt;Name:&lt;/b&gt; &amp;nbsp;&amp;nbsp;&lt;font color=blue&gt;&quot; + name + &quot;&lt;/font&gt;&lt;br&gt;&quot;\n                    + &quot;• &lt;b&gt;Age:&lt;/b&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=red&gt;&quot; + age + &quot;&lt;/font&gt; years&lt;br&gt;&quot;\n                    + &quot;• &lt;b&gt;Height:&lt;/b&gt; &lt;font color=purple&gt;&quot; + height + &quot;&lt;/font&gt; inches&lt;br&gt;&quot;\n                    + &quot;&lt;/ul&gt;&quot;\n                    + &quot;Is this correct?&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;,\n                    &quot;Confirm your Input:&quot;, javax.swing.JOptionPane.YES_NO_OPTION,\n                    javax.swing.JOptionPane.INFORMATION_MESSAGE);\n        }\n\n        // YES WAS SELECTED SO QUIT:\n        /* Release the JFrame (parent) resource and, display \n          a Notification Box in the bottom-right corner of \n          your screen, that you have quit:               */\n        quit();\n        \n        // DONE\n    }\n    \n    /* Quits the Application:    */\n    private void quit() { \n        // Dispose of the JFrame used as parent for all the dialogs:\n        parent.dispose();\n        // Display a Quit Notification:\n        sendNotification(&quot;Quiting Demo Application!&quot;, &quot;Bye Bye For Now. Try it &quot;\n                       + &quot;again later.&quot;, java.awt.TrayIcon.MessageType.NONE);\n    }\n    \n    /**\n     * Displays a typical Windows Notification above the Taskbar. If a\n     * SystemTray is not supported within the system this method was called then\n     * nothing is displayed (the method is not processed).&lt;br&gt;\n     *\n     * @param title           (String) Message Title&lt;br&gt;\n     *\n     * @param message         (String) Message&lt;br&gt;\n     *\n     * @param messageTypeIcon (MessageType) The MessageType is a ENUM from the\n     *                        TrayIncon Class, for example: TrayIcon.MessageType.INFO&lt;pre&gt;\n     *  The different MessageTypes available are:\n     *\n     *      TrayIcon.MessageType.ERROR\n     *      TrayIcon.MessageType.INFO\n     *      TrayIcon.MessageType.NONE\n     *      TrayIcon.MessageType.WARNING&lt;/pre&gt;\n     */\n    private void sendNotification(String title, String message, java.awt.TrayIcon.MessageType messageTypeIcon) {\n        try {\n            //Obtain only one instance of the SystemTray object\n            java.awt.SystemTray tray = java.awt.SystemTray.getSystemTray();\n            if (!java.awt.SystemTray.isSupported()) {\n                return;\n            }\n            java.awt.Image image = java.awt.Toolkit.getDefaultToolkit().createImage(&quot;&quot;);\n            java.awt.TrayIcon trayIcon = new java.awt.TrayIcon(image, &quot;&quot;);\n            tray.add(trayIcon);\n            \n            trayIcon.displayMessage(title, message, messageTypeIcon);\n            tray.remove(trayIcon);\n        }\n        catch (java.awt.AWTException ex) {\n            System.err.println(ex);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29303039,"reputation":1,"user_id":22450784,"display_name":"tailwind"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1693564857,"creation_date":1693510727,"question_id":77018802,"body_markdown":"\r\n```\r\npackage semester2;\r\nimport javax.swing.*;\r\n\r\npublic class test\r\n{\r\n  public static void main (String[]args)\r\n  {\r\n\t  \r\n    String name = JOptionPane.showInputDialog (&quot;Enter your name&quot;);\r\n      JOptionPane.showMessageDialog (null, &quot;Hello &quot; + name);\r\n      \r\n    int age =\r\n      Integer.parseInt (JOptionPane.showInputDialog (&quot;Enter your age&quot;));\r\n      JOptionPane.showMessageDialog (null, &quot;You are &quot; + age + &quot; years old&quot;);\r\n      \r\n    double height =\r\n      Double.parseDouble (JOptionPane.showInputDialog (&quot;Enter your height&quot;));\r\n      JOptionPane.showMessageDialog (null, &quot;You are &quot; + height + &quot; cm tall&quot;);\r\n      \r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n[These are the errors](https://i.stack.imgur.com/d5SA7.png)\r\n\r\n\r\nIDK what happened I am new to java and not familiar with these types of errors...\r\n   ","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: Cannot parse null string","body":"<pre><code>package semester2;\nimport javax.swing.*;\n\npublic class test\n{\n  public static void main (String[]args)\n  {\n      \n    String name = JOptionPane.showInputDialog (&quot;Enter your name&quot;);\n      JOptionPane.showMessageDialog (null, &quot;Hello &quot; + name);\n      \n    int age =\n      Integer.parseInt (JOptionPane.showInputDialog (&quot;Enter your age&quot;));\n      JOptionPane.showMessageDialog (null, &quot;You are &quot; + age + &quot; years old&quot;);\n      \n    double height =\n      Double.parseDouble (JOptionPane.showInputDialog (&quot;Enter your height&quot;));\n      JOptionPane.showMessageDialog (null, &quot;You are &quot; + height + &quot; cm tall&quot;);\n      \n  }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/d5SA7.png\" rel=\"nofollow noreferrer\">These are the errors</a></p>\n<p>IDK what happened I am new to java and not familiar with these types of errors...</p>\n"},{"tags":["java","sorting","mergesort"],"comments":[{"owner":{"account_id":3043063,"reputation":51,"user_id":9771468,"display_name":"Bayu Sri Hernogo"},"score":0,"creation_date":1693563352,"post_id":77022263,"comment_id":135780880,"body_markdown":"Where the link bro?","body":"Where the link bro?"},{"owner":{"account_id":29215899,"reputation":13,"user_id":22382733,"display_name":"DJ PRAGO_28"},"score":0,"creation_date":1693563610,"post_id":77022263,"comment_id":135780921,"body_markdown":"Sorry man I forgot .Its posted now.","body":"Sorry man I forgot .Its posted now."}],"answers":[{"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693564359,"creation_date":1693564006,"answer_id":77022347,"question_id":77022263,"body_markdown":"You forgot to increment your `j` index while breaking down the original array into 2.\r\n\r\n    else{\r\n         rightArray[j++] = array[i];\r\n    }\r\n\r\nIn your code, you are just setting and replacing again and again the first element of the array, `rightArray`.","title":"MergeSort function in java displaying zeroes","body":"<p>You forgot to increment your <code>j</code> index while breaking down the original array into 2.</p>\n<pre><code>else{\n     rightArray[j++] = array[i];\n}\n</code></pre>\n<p>In your code, you are just setting and replacing again and again the first element of the array, <code>rightArray</code>.</p>\n"}],"owner":{"account_id":29215899,"reputation":13,"user_id":22382733,"display_name":"DJ PRAGO_28"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77022347,"answer_count":1,"score":1,"last_activity_date":1693564661,"creation_date":1693563261,"question_id":77022263,"body_markdown":"I followed a tutorial on mergesort algoorithm in java and it displayed 0000002468 as result.\r\n\r\nI gave input of number from 1,2,3...9,0.\r\nIt was supposed to sort in ascending order.\r\nI double checked with the tutorial also and found nothing wrong.\r\nI can&#39;t solve it myself since i didn&#39;t really understand.\r\nTutorial is by BroCode btw.\r\n\r\nCode:\r\n\r\n    class m{\r\n        public static void main(String[]args){\r\n            int array[] = {8,4,5,3,2,7,1,9,0,6};\r\n\r\n            mergeSort(array);\r\n        \r\n        for(int i =0;i&lt;array.length;i++){\r\n            System.out.print(array[i] + &quot;&quot;);\r\n\r\n        }\r\n\r\n    }\r\n    private static void mergeSort(int[]array){\r\n\r\n        int length = array.length;\r\n        if(length&lt;=1)return;//base case\r\n        int middle = length/2;\r\n        int leftArray[] = new int[middle];\r\n        int rightArray[] = new int[length-middle];\r\n        int i=0;//left array\r\n        int j = 0;//right array\r\n        for(;i&lt;length;i++){\r\n            if(i&lt;middle){\r\n                leftArray[i] = array[i];\r\n\r\n            }else{\r\n                rightArray[j] = array[i];\r\n            }\r\n        }mergeSort(leftArray);\r\n         mergeSort(rightArray);\r\n         merge(leftArray,rightArray,array);\r\n\r\n        }\r\n\r\n        private static void merge(int[]leftArray,int[]rightArray,int[]array){\r\n            int leftSize = array.length/2;\r\n            int rightSize = array.length-leftSize;\r\n            int i=0,l=0,r=0;\r\n\r\n            // check conditions for merging\r\n\r\n            while(l&lt;leftSize &amp;&amp; r&lt;rightSize){\r\n                if(leftArray[l]&lt;rightArray[r]){\r\n                    array[i] = leftArray[l];\r\n                    i++;\r\n                    l++;\r\n                }else{\r\n                    array[i] = rightArray[r];\r\n                    i++;\r\n                    r++;\r\n                }\r\n            }\r\n            while(l&lt;leftSize){\r\n                array[i] = leftArray[l];\r\n                i++;\r\n                l++;\r\n\r\n            }\r\n            while(r&lt;rightSize){\r\n                array[i] = rightArray[r];\r\n                i++;\r\n                r++;\r\n            }\r\n        }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n","title":"MergeSort function in java displaying zeroes","body":"<p>I followed a tutorial on mergesort algoorithm in java and it displayed 0000002468 as result.</p>\n<p>I gave input of number from 1,2,3...9,0.\nIt was supposed to sort in ascending order.\nI double checked with the tutorial also and found nothing wrong.\nI can't solve it myself since i didn't really understand.\nTutorial is by BroCode btw.</p>\n<p>Code:</p>\n<pre><code>class m{\n    public static void main(String[]args){\n        int array[] = {8,4,5,3,2,7,1,9,0,6};\n\n        mergeSort(array);\n    \n    for(int i =0;i&lt;array.length;i++){\n        System.out.print(array[i] + &quot;&quot;);\n\n    }\n\n}\nprivate static void mergeSort(int[]array){\n\n    int length = array.length;\n    if(length&lt;=1)return;//base case\n    int middle = length/2;\n    int leftArray[] = new int[middle];\n    int rightArray[] = new int[length-middle];\n    int i=0;//left array\n    int j = 0;//right array\n    for(;i&lt;length;i++){\n        if(i&lt;middle){\n            leftArray[i] = array[i];\n\n        }else{\n            rightArray[j] = array[i];\n        }\n    }mergeSort(leftArray);\n     mergeSort(rightArray);\n     merge(leftArray,rightArray,array);\n\n    }\n\n    private static void merge(int[]leftArray,int[]rightArray,int[]array){\n        int leftSize = array.length/2;\n        int rightSize = array.length-leftSize;\n        int i=0,l=0,r=0;\n\n        // check conditions for merging\n\n        while(l&lt;leftSize &amp;&amp; r&lt;rightSize){\n            if(leftArray[l]&lt;rightArray[r]){\n                array[i] = leftArray[l];\n                i++;\n                l++;\n            }else{\n                array[i] = rightArray[r];\n                i++;\n                r++;\n            }\n        }\n        while(l&lt;leftSize){\n            array[i] = leftArray[l];\n            i++;\n            l++;\n\n        }\n        while(r&lt;rightSize){\n            array[i] = rightArray[r];\n            i++;\n            r++;\n        }\n    }\n</code></pre>\n<p>}</p>\n"},{"tags":["java","windows","batch-file","processbuilder","poc"],"comments":[{"owner":{"account_id":3692224,"reputation":46725,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692724979,"post_id":76952519,"comment_id":135662578,"body_markdown":"The first mistake is naming the batch file `start.bat`. Batch files should have never the name of any [Windows command](https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/windows-commands). __START__ is an internal command of `cmd.exe`. No batch file should have ever `start` as file name. The batch file could be named `StartCalc.cmd`. Note: The file extension should be also nowadays `.cmd` and not `.bat` although the difference in processing the lines inside the batch file by `cmd.exe` depending on file extension of the batch file is minimal.","body":"The first mistake is naming the batch file <code>start.bat</code>. Batch files should have never the name of any <a href=\"https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/windows-commands\" rel=\"nofollow noreferrer\">Windows command</a>. <b>START</b> is an internal command of <code>cmd.exe</code>. No batch file should have ever <code>start</code> as file name. The batch file could be named <code>StartCalc.cmd</code>. Note: The file extension should be also nowadays <code>.cmd</code> and not <code>.bat</code> although the difference in processing the lines inside the batch file by <code>cmd.exe</code> depending on file extension of the batch file is minimal."},{"owner":{"account_id":3692224,"reputation":46725,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692725226,"post_id":76952519,"comment_id":135662621,"body_markdown":"The Java [Class ProcessBuilder](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html) is on Windows a Java wrapper class for the the Windows kernel library function [CreateProcess](https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessw). There can be run executables. A batch file is not an executable, it is a text file containing lines which `cmd.exe` can process and execute.","body":"The Java <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">Class ProcessBuilder</a> is on Windows a Java wrapper class for the the Windows kernel library function <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessw\" rel=\"nofollow noreferrer\">CreateProcess</a>. There can be run executables. A batch file is not an executable, it is a text file containing lines which <code>cmd.exe</code> can process and execute."},{"owner":{"account_id":3692224,"reputation":46725,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692725425,"post_id":76952519,"comment_id":135662646,"body_markdown":"A double click on a batch file results in `explorer.exe` calling `CreateProcess` for starting `%ComSpec%` with the option `/c` and with full qualified batch file name appended as command to execute by `cmd.exe` and then close. `ComSpec` is an environment variable which is defined by Windows default with `%SystemRoot%\\System32\\cmd.exe` which expands usually to `C:\\Windows\\System32\\cmd.exe`. The Java code should therefore get the string value of the environment variable `SystemRoot` (better than getting `ComSpec` value for several reasons).","body":"A double click on a batch file results in <code>explorer.exe</code> calling <code>CreateProcess</code> for starting <code>%ComSpec%</code> with the option <code>&#47;c</code> and with full qualified batch file name appended as command to execute by <code>cmd.exe</code> and then close. <code>ComSpec</code> is an environment variable which is defined by Windows default with <code>%SystemRoot%\\System32\\cmd.exe</code> which expands usually to <code>C:\\Windows\\System32\\cmd.exe</code>. The Java code should therefore get the string value of the environment variable <code>SystemRoot</code> (better than getting <code>ComSpec</code> value for several reasons)."},{"owner":{"account_id":3692224,"reputation":46725,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692725663,"post_id":76952519,"comment_id":135662683,"body_markdown":"`SystemRoot` is usually always defined as Windows defines it already at a very early state on booting Windows because of many Windows services depend on `SystemRoot`. The only possibility existing for a not (correct) defined `SystemRoot` is that a user opens a console (command prompt or PowerShell console or Windows Terminal) and explicitly undefines or redefines `SystemRoot`. I have never seen that a user really did that as nearly no Windows program works anymore on starting next a program like `java.exe`. However, if there is no or an empty string returned, use `&quot;C:\\\\Windows&quot;` as replacement","body":"<code>SystemRoot</code> is usually always defined as Windows defines it already at a very early state on booting Windows because of many Windows services depend on <code>SystemRoot</code>. The only possibility existing for a not (correct) defined <code>SystemRoot</code> is that a user opens a console (command prompt or PowerShell console or Windows Terminal) and explicitly undefines or redefines <code>SystemRoot</code>. I have never seen that a user really did that as nearly no Windows program works anymore on starting next a program like <code>java.exe</code>. However, if there is no or an empty string returned, use <code>&quot;C:\\\\Windows&quot;</code> as replacement"},{"owner":{"account_id":3692224,"reputation":46725,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692725888,"post_id":76952519,"comment_id":135662728,"body_markdown":"Then concatenate the Windows system directory path string with `&quot;\\\\System32\\\\cmd.exe&quot;` for the fully qualified file name of the *Windows Command Processor*. There could be used next a simple check if this file really exist and inform the user if it does not. This might be useless at the moment but who knows if Windows in 20 years will still have `cmd.exe`. Then can be used `ProcessBuilder` with most likely the string `C:\\Windows\\System32\\cmd.exe` for the application to run with the arguments `/D` and `/C` and the fully qualified batch file name, best enclosed in `&quot;`.","body":"Then concatenate the Windows system directory path string with <code>&quot;\\\\System32\\\\cmd.exe&quot;</code> for the fully qualified file name of the <i>Windows Command Processor</i>. There could be used next a simple check if this file really exist and inform the user if it does not. This might be useless at the moment but who knows if Windows in 20 years will still have <code>cmd.exe</code>. Then can be used <code>ProcessBuilder</code> with most likely the string <code>C:\\Windows\\System32\\cmd.exe</code> for the application to run with the arguments <code>&#47;D</code> and <code>&#47;C</code> and the fully qualified batch file name, best enclosed in <code>&quot;</code>."},{"owner":{"account_id":3692224,"reputation":46725,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692726065,"post_id":76952519,"comment_id":135662771,"body_markdown":"Run in a command prompt window `cmd /?` and read the output usage help. I recommend using `/D` as too many users corrupt their *Command Processor* configuration by adding an `AutoRun` registry value which is not used __only__ by `cmd.exe` on the user opens a command prompt by running `cmd` from Windows shell, as most users think but on __every__ execution of `cmd.exe` from any process and not only `explorer.exe` running as Windows shell without usage of option `/D`. Then your Java application can at least run `cmd.exe` as you want it even on a misconfigured Windows.","body":"Run in a command prompt window <code>cmd &#47;?</code> and read the output usage help. I recommend using <code>&#47;D</code> as too many users corrupt their <i>Command Processor</i> configuration by adding an <code>AutoRun</code> registry value which is not used <b>only</b> by <code>cmd.exe</code> on the user opens a command prompt by running <code>cmd</code> from Windows shell, as most users think but on <b>every</b> execution of <code>cmd.exe</code> from any process and not only <code>explorer.exe</code> running as Windows shell without usage of option <code>&#47;D</code>. Then your Java application can at least run <code>cmd.exe</code> as you want it even on a misconfigured Windows."},{"owner":{"account_id":3692224,"reputation":46725,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692726855,"post_id":76952519,"comment_id":135662958,"body_markdown":"I have not installed Java on the computer which I use at the moment and can&#39;t verify the Java code for that reason if there is something else in the Java code responsible for failed execution of the *Windows Command Processor* for processing the batch file `C:\\\\22840c1a\\start.bat`. BTW: In the batch file can be used `cd /d &quot;%~dp0subfolder&quot; || (echo There is no &quot;subfolder&quot; in &quot;%~dp0&quot;&amp; exit /B)` and `&quot;%~dp0subfolder\\calc.exe&quot;` to get the batch file itself working independent on the name of the batch file folder (as long as not using a shared folder on a network resource and its UNC path).","body":"I have not installed Java on the computer which I use at the moment and can&#39;t verify the Java code for that reason if there is something else in the Java code responsible for failed execution of the <i>Windows Command Processor</i> for processing the batch file <code>C:\\\\22840c1a\\start.bat</code>. BTW: In the batch file can be used <code>cd &#47;d &quot;%~dp0subfolder&quot; || (echo There is no &quot;subfolder&quot; in &quot;%~dp0&quot;&amp; exit &#47;B)</code> and <code>&quot;%~dp0subfolder\\calc.exe&quot;</code> to get the batch file itself working independent on the name of the batch file folder (as long as not using a shared folder on a network resource and its UNC path)."},{"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"score":0,"creation_date":1692765601,"post_id":76952519,"comment_id":135667301,"body_markdown":"I agree with you on the proper naming, but I don&#39;t think that it&#39;s the cause of the Problem. Also one thing to mention, it works with an absolute path but not with a relative path. For me it feels like ProcessBuilder is not using the working directory correctly.","body":"I agree with you on the proper naming, but I don&#39;t think that it&#39;s the cause of the Problem. Also one thing to mention, it works with an absolute path but not with a relative path. For me it feels like ProcessBuilder is not using the working directory correctly."},{"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"score":0,"creation_date":1692766996,"post_id":76952519,"comment_id":135667444,"body_markdown":"I just updated the PoCs. As you can see both PoCs that use cmd /c (with and without absolute path work) also the PoC to start a batch file directly from an absolute path works as well. Only the version starting a batch file from a relative path with properly set working directory is not working.","body":"I just updated the PoCs. As you can see both PoCs that use cmd /c (with and without absolute path work) also the PoC to start a batch file directly from an absolute path works as well. Only the version starting a batch file from a relative path with properly set working directory is not working."},{"owner":{"account_id":3692224,"reputation":46725,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692772126,"post_id":76952519,"comment_id":135668091,"body_markdown":"There can be used the free Windows Sysinternals (Microsoft) tool [Process Monitor](https://learn.microsoft.com/en-us/sysinternals/downloads/procmon) to view how `java.exe` starts `cmd.exe` with which command line. Double click on first recorded `cmd.exe` line in log of Process Monitor after a line with `java.exe` and select the tab __Process__. It can be seen in the log in which directory `cmd.exe` searches first for `Start.bat` which is the current working directory set by `CreateProcess` which must not be the directory set by `ProcessBuilder` on starting `Start.bat` instead of `cmd.exe`.","body":"There can be used the free Windows Sysinternals (Microsoft) tool <a href=\"https://learn.microsoft.com/en-us/sysinternals/downloads/procmon\" rel=\"nofollow noreferrer\">Process Monitor</a> to view how <code>java.exe</code> starts <code>cmd.exe</code> with which command line. Double click on first recorded <code>cmd.exe</code> line in log of Process Monitor after a line with <code>java.exe</code> and select the tab <b>Process</b>. It can be seen in the log in which directory <code>cmd.exe</code> searches first for <code>Start.bat</code> which is the current working directory set by <code>CreateProcess</code> which must not be the directory set by <code>ProcessBuilder</code> on starting <code>Start.bat</code> instead of <code>cmd.exe</code>."},{"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"score":0,"creation_date":1692845755,"post_id":76952519,"comment_id":135680352,"body_markdown":"I just tried it myself, were you able to record how the Process is started in the not working example? What Filters do you set? But if i understand you correctly, ProcessBuilder tries to execute my command using Java built-ins, therefore one of these tries to call CreateProcess to execute my actual command. CreateProcess takes directory as a parameter. And normally I would expect that this parameter is set to the working directory. I just tried some other variations and it shows that only BatchScripts relative to their working directory don&#39;t work, executables are fine.","body":"I just tried it myself, were you able to record how the Process is started in the not working example? What Filters do you set? But if i understand you correctly, ProcessBuilder tries to execute my command using Java built-ins, therefore one of these tries to call CreateProcess to execute my actual command. CreateProcess takes directory as a parameter. And normally I would expect that this parameter is set to the working directory. I just tried some other variations and it shows that only BatchScripts relative to their working directory don&#39;t work, executables are fine."},{"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"score":0,"creation_date":1692846027,"post_id":76952519,"comment_id":135680370,"body_markdown":"For me the fix is to use absolute paths, but i&#39;m still curious where the difference is between starting a batch script with absolute path or with relative path. I think if absolute works, relative should work as well. Unfortunately I wasn&#39;t able to monitor with Process Monitor, I think I set the wrong filters that&#39;s why I asked about yours.","body":"For me the fix is to use absolute paths, but i&#39;m still curious where the difference is between starting a batch script with absolute path or with relative path. I think if absolute works, relative should work as well. Unfortunately I wasn&#39;t able to monitor with Process Monitor, I think I set the wrong filters that&#39;s why I asked about yours."},{"owner":{"account_id":3692224,"reputation":46725,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1692857099,"post_id":76952519,"comment_id":135681297,"body_markdown":"In this case use in addition to the default filters __Process Name is cmd.exe__ then __Include__ and __Process Name is java.exe__ then __Include__ and __Path ends with Start.bat__ then __Include__. It is advisable to toggle off in the toolbar the last five symbols with exception of the filing cabinet icon to get only the file system activity shown in the *Process Monitor* window and not the other activities (registry, network, process and thread, profiling events).","body":"In this case use in addition to the default filters <b>Process Name is cmd.exe</b> then <b>Include</b> and <b>Process Name is java.exe</b> then <b>Include</b> and <b>Path ends with Start.bat</b> then <b>Include</b>. It is advisable to toggle off in the toolbar the last five symbols with exception of the filing cabinet icon to get only the file system activity shown in the <i>Process Monitor</i> window and not the other activities (registry, network, process and thread, profiling events)."}],"answers":[{"comments":[{"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"score":0,"creation_date":1693574950,"post_id":77022323,"comment_id":135783063,"body_markdown":"I really ask myself why they implement it like that. I mean I come from DOS times and I don&#39;t really understand what the workingDirectory from ProcessBuilder is used for then, as it always was like, workingDirectory was the actual directory of your CommandProcessor and commands would be executed relative to this. Anway I tested and it&#39;s working as you said. If I add the Directory to the PATH-Variable the tests are working. Thanks, I see this as the answer to my question.","body":"I really ask myself why they implement it like that. I mean I come from DOS times and I don&#39;t really understand what the workingDirectory from ProcessBuilder is used for then, as it always was like, workingDirectory was the actual directory of your CommandProcessor and commands would be executed relative to this. Anway I tested and it&#39;s working as you said. If I add the Directory to the PATH-Variable the tests are working. Thanks, I see this as the answer to my question."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1693575639,"post_id":77022323,"comment_id":135783190,"body_markdown":"The only reason I can think of for this behaviour is that it avoids having to choose which script to run if there is a &quot;start.bat&quot; in both the `Path` and `workingDirectory`. By only using Path, the decision is made.","body":"The only reason I can think of for this behaviour is that it avoids having to choose which script to run if there is a &quot;start.bat&quot; in both the <code>Path</code> and <code>workingDirectory</code>. By only using Path, the decision is made."}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693564344,"creation_date":1693563846,"answer_id":77022323,"question_id":76952519,"body_markdown":"The `ProcessBuilder` command line launch using a relative path as you&#39;ve used in `pocNotWorking()` isn&#39;t implemented as you think.\r\n\r\n`ProcessBuilder` is applying a normal search using `Path` of your JVM. It does not - rightly or wrongly - consider checking in proposed subprocess `workingDirectory` to resolve a relative pathname to the command.\r\n\r\nYou can verify this by appending `C:\\22840c1a` to the path BEFORE launching your JVM for the unit tests, and then I would expect all 4 tests to work:\r\n\r\n    set Path=%Path%;C:\\22840c1a\r\n\r\nI also tested `pocWorking/pocNotWorking` on Linux with a shell script `start.sh` and it gives consistent results to Windows when calling `pocWorking/pocNotWorking`. The relative path version won&#39;t run unless you adjust PATH beforehand so that `start.sh` is resolved in PATH rather than the working directory:\r\n\r\n    export PATH=$PATH:/somepathto/22840c1a\r\n\r\nNote that you cannot fix this by attempting to edit path for the subprocess via `pb.environment().set(&quot;Path&quot;, xxx)`, the path edit must be to the JVM parent process. \r\n\r\nOverall, it seems good practice to use absolute path to `ProcessBuilder` or resolve command as `workingDirectory + File.separator + relativeExeName`","title":"Executing a Batch Script with ProcessBuilder","body":"<p>The <code>ProcessBuilder</code> command line launch using a relative path as you've used in <code>pocNotWorking()</code> isn't implemented as you think.</p>\n<p><code>ProcessBuilder</code> is applying a normal search using <code>Path</code> of your JVM. It does not - rightly or wrongly - consider checking in proposed subprocess <code>workingDirectory</code> to resolve a relative pathname to the command.</p>\n<p>You can verify this by appending <code>C:\\22840c1a</code> to the path BEFORE launching your JVM for the unit tests, and then I would expect all 4 tests to work:</p>\n<pre><code>set Path=%Path%;C:\\22840c1a\n</code></pre>\n<p>I also tested <code>pocWorking/pocNotWorking</code> on Linux with a shell script <code>start.sh</code> and it gives consistent results to Windows when calling <code>pocWorking/pocNotWorking</code>. The relative path version won't run unless you adjust PATH beforehand so that <code>start.sh</code> is resolved in PATH rather than the working directory:</p>\n<pre><code>export PATH=$PATH:/somepathto/22840c1a\n</code></pre>\n<p>Note that you cannot fix this by attempting to edit path for the subprocess via <code>pb.environment().set(&quot;Path&quot;, xxx)</code>, the path edit must be to the JVM parent process.</p>\n<p>Overall, it seems good practice to use absolute path to <code>ProcessBuilder</code> or resolve command as <code>workingDirectory + File.separator + relativeExeName</code></p>\n"}],"owner":{"account_id":8703458,"reputation":224,"user_id":6512438,"display_name":"kSp"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77022323,"answer_count":1,"score":1,"last_activity_date":1693564344,"creation_date":1692701191,"question_id":76952519,"body_markdown":"I&#39;m trying to execute a Batch Script with ProcessBuilder and can&#39;t figure out why it&#39;s not working. \r\n\r\nI built a small PoC to show my problem, in order for this to work you would need to create some folders on C Drive:\r\n\r\n22840c1a\r\n\r\n22840c1a\\subfolder\r\n\r\nThen copy your calc.exe into the subfolder. Next create start.bat inside of 22840c1a. Paste the following content into start.bat\r\n\r\n    @echo off\r\n    echo &quot;Set WorkingDirectory&quot;\r\n    cd /d C:\\22840c1a\\subfolder\r\n    echo &quot;Start&quot;\r\n    C:\\22840c1a\\subfolder\\calc.exe\r\n\r\n\r\n\r\nWith that you&#39;re able to run the following unit test and reproduce the problem:\r\n\r\nUpdate: Added working PoC\r\n\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    class BatchExecutionTest {\r\n        @Test\r\n        void pocWorking() {\r\n            execute(Arrays.asList(&quot;C:\\\\22840c1a\\\\start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\r\n        }\r\n        @Test\r\n        void pocNotWorking() {\r\n            execute(Arrays.asList(&quot;start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\r\n        }\r\n        @Test\r\n        void pocWorkingCmd1() {\r\n            execute(Arrays.asList(&quot;cmd&quot;, &quot;/c&quot;, &quot;C:\\\\22840c1a\\\\start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\r\n        }\r\n        @Test\r\n        void pocWorkingCmd2() {\r\n            execute(Arrays.asList(&quot;cmd&quot;, &quot;/c&quot;, &quot;start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\r\n        }\r\n    \r\n        public static void execute(List&lt;String&gt; commands, String workingDirectory) {\r\n            try {\r\n                final ProcessBuilder pb = new ProcessBuilder(commands);\r\n                pb.redirectErrorStream(true);\r\n                pb.directory(new File(workingDirectory));\r\n                pb.start();\r\n            } catch (IOException e) {\r\n                throw new IllegalStateException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nIf everything works as expected the Unit Test is not able to execute start.bat because the  File could not be found. However you can run start.bat from cmd and its working fine. Why is ProcessBuilder not able to execute the Batch Script?","title":"Executing a Batch Script with ProcessBuilder","body":"<p>I'm trying to execute a Batch Script with ProcessBuilder and can't figure out why it's not working.</p>\n<p>I built a small PoC to show my problem, in order for this to work you would need to create some folders on C Drive:</p>\n<p>22840c1a</p>\n<p>22840c1a\\subfolder</p>\n<p>Then copy your calc.exe into the subfolder. Next create start.bat inside of 22840c1a. Paste the following content into start.bat</p>\n<pre><code>@echo off\necho &quot;Set WorkingDirectory&quot;\ncd /d C:\\22840c1a\\subfolder\necho &quot;Start&quot;\nC:\\22840c1a\\subfolder\\calc.exe\n</code></pre>\n<p>With that you're able to run the following unit test and reproduce the problem:</p>\n<p>Update: Added working PoC</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport java.util.List;\n\nclass BatchExecutionTest {\n    @Test\n    void pocWorking() {\n        execute(Arrays.asList(&quot;C:\\\\22840c1a\\\\start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\n    }\n    @Test\n    void pocNotWorking() {\n        execute(Arrays.asList(&quot;start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\n    }\n    @Test\n    void pocWorkingCmd1() {\n        execute(Arrays.asList(&quot;cmd&quot;, &quot;/c&quot;, &quot;C:\\\\22840c1a\\\\start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\n    }\n    @Test\n    void pocWorkingCmd2() {\n        execute(Arrays.asList(&quot;cmd&quot;, &quot;/c&quot;, &quot;start.bat&quot;), &quot;C:\\\\22840c1a&quot;);\n    }\n\n    public static void execute(List&lt;String&gt; commands, String workingDirectory) {\n        try {\n            final ProcessBuilder pb = new ProcessBuilder(commands);\n            pb.redirectErrorStream(true);\n            pb.directory(new File(workingDirectory));\n            pb.start();\n        } catch (IOException e) {\n            throw new IllegalStateException(e);\n        }\n    }\n}\n</code></pre>\n<p>If everything works as expected the Unit Test is not able to execute start.bat because the  File could not be found. However you can run start.bat from cmd and its working fine. Why is ProcessBuilder not able to execute the Batch Script?</p>\n"},{"tags":["java","graphql"],"comments":[{"owner":{"account_id":1076091,"reputation":1392,"user_id":2438538,"display_name":"Arel"},"score":0,"creation_date":1686676775,"post_id":44737043,"comment_id":134830953,"body_markdown":"You could go out of your way to introduce a `Void` type as shown below, but **the return value is how the client tells whether an operation succeeded.** It&#39;s possible for the request to succeed (e.g., status 200) and yet one or more mutations fail (e.g., because of a database error).","body":"You could go out of your way to introduce a <code>Void</code> type as shown below, but <b>the return value is how the client tells whether an operation succeeded.</b> It&#39;s possible for the request to succeed (e.g., status 200) and yet one or more mutations fail (e.g., because of a database error)."}],"answers":[{"comments":[{"owner":{"account_id":4618967,"reputation":5758,"user_id":3744574,"display_name":"Avius"},"score":30,"creation_date":1539616835,"post_id":44773532,"comment_id":92557117,"body_markdown":"In case of deletion you are better off returning the product ID, as suggested (since it&#39;s graphql, perhaps even the whole product). However, some operations truly require no data. For those cases one could define ```type Void``` and then do ```someOperation(input: InputObject!): Void``` to indicate the intent clearly.","body":"In case of deletion you are better off returning the product ID, as suggested (since it&#39;s graphql, perhaps even the whole product). However, some operations truly require no data. For those cases one could define <code>type Void</code> and then do <code>someOperation(input: InputObject!): Void</code> to indicate the intent clearly."},{"owner":{"account_id":371574,"reputation":2552,"user_id":720175,"accept_rate":66,"display_name":"Sandy"},"score":2,"creation_date":1648891701,"post_id":44773532,"comment_id":126741848,"body_markdown":"An example of a mutation that needs to return value is a logout, which would just destroy the session.","body":"An example of a mutation that needs to return value is a logout, which would just destroy the session."},{"owner":{"account_id":1076091,"reputation":1392,"user_id":2438538,"display_name":"Arel"},"score":1,"creation_date":1686677399,"post_id":44773532,"comment_id":134831095,"body_markdown":"@Sandy, even with a logout mutation, a client may still want to know whether the operation succeeded (in which case a return value is necessary). A mutation that truly needs no return value would be one in which the API developer wants *no* client to know whether it succeeded or not. I&#39;m sure there are examples, but they are likely uncommon.","body":"@Sandy, even with a logout mutation, a client may still want to know whether the operation succeeded (in which case a return value is necessary). A mutation that truly needs no return value would be one in which the API developer wants <i>no</i> client to know whether it succeeded or not. I&#39;m sure there are examples, but they are likely uncommon."}],"tags":[],"owner":{"account_id":5692330,"reputation":3440,"user_id":4500001,"accept_rate":60,"display_name":"Locco0_0"},"comment_count":3,"down_vote_count":0,"up_vote_count":89,"is_accepted":false,"score":89,"last_activity_date":1583908241,"creation_date":1498544752,"answer_id":44773532,"question_id":44737043,"body_markdown":"According to this [Github issue][1] you cannot return nothing.\r\n\r\nYou can define a return type which is nullable e.g.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    type Mutation {\r\n      addElement(element: ElementData): ID\r\n      removeElement(id: ID): Boolean\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nBut I suggest you return the id of the deleted element, because if you want to work with a cached store you have to update the store when the delete mutation has ran successfully.\r\n\r\n  [1]: https://github.com/apollographql/graphql-tools/issues/277","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>According to this <a href=\"https://github.com/apollographql/graphql-tools/issues/277\" rel=\"noreferrer\">Github issue</a> you cannot return nothing.</p>\n\n<p>You can define a return type which is nullable e.g.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>type Mutation {\r\n  addElement(element: ElementData): ID\r\n  removeElement(id: ID): Boolean\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>But I suggest you return the id of the deleted element, because if you want to work with a cached store you have to update the store when the delete mutation has ran successfully.</p>\n"},{"comments":[{"owner":{"account_id":99203,"reputation":1506,"user_id":268091,"accept_rate":46,"display_name":"MEMark"},"score":8,"creation_date":1601283858,"post_id":61714123,"comment_id":113348543,"body_markdown":"What part of the linked &quot;GQL best practices&quot; do you suggest is saying that a void-returning mutation is bad practise? I was unable to find any such recommendation.","body":"What part of the linked &quot;GQL best practices&quot; do you suggest is saying that a void-returning mutation is bad practise? I was unable to find any such recommendation."},{"owner":{"account_id":1128545,"reputation":4332,"user_id":1115187,"accept_rate":71,"display_name":"maxkoryukov"},"score":2,"creation_date":1626978092,"post_id":61714123,"comment_id":121042318,"body_markdown":"@MEMark https://graphql-rules.com/rules/mutation-payload : _&quot;Every mutation should have a unique payload type&quot;_ . and I&#39;m going to update the link in the answer","body":"@MEMark <a href=\"https://graphql-rules.com/rules/mutation-payload\" rel=\"nofollow noreferrer\">graphql-rules.com/rules/mutation-payload</a> : <i>&quot;Every mutation should have a unique payload type&quot;</i> . and I&#39;m going to update the link in the answer"},{"owner":{"account_id":75997,"reputation":9579,"user_id":217844,"accept_rate":73,"display_name":"ssc"},"score":1,"creation_date":1693913664,"post_id":61714123,"comment_id":135819284,"body_markdown":"https://graphql-rules.com seems dead.","body":"<a href=\"https://graphql-rules.com\" rel=\"nofollow noreferrer\">graphql-rules.com</a> seems dead."}],"tags":[],"owner":{"account_id":1128545,"reputation":4332,"user_id":1115187,"accept_rate":71,"display_name":"maxkoryukov"},"comment_count":3,"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1631471600,"creation_date":1589123095,"answer_id":61714123,"question_id":44737043,"body_markdown":"## (A) Solution with `graphql-scalars`\r\n\r\nThe original answer is below.\r\n\r\nHere is another one solution with [`graphql-scalars`](https://www.npmjs.com/package/graphql-scalars) library:\r\n\r\n 1. install `npm install graphql-scalars` and then\r\n 2. import their `Void` type: https://www.graphql-scalars.dev/docs/scalars/void\r\n\r\n## (B) Solution with a custom `scalar`\r\n\r\n&gt; **Note**: design with `void`-result from mutations goes against [_&quot;GQL best practices&quot;_](https://graphql-rules.com/rules/mutation-payload)\r\n\r\nThis example was written for NodeJS Apollo Framework, but it is pretty easy to convert the implementation for your language/framework \r\n\r\nI&#39;m pretty sure: there is an NPM-package named `graphql-void` but if you don&#39;t want to add another one dependency just copy this code.\r\n\r\n### 1. define `Void`-scalar in your schema\r\n\r\n```graphql\r\n# file: ./schema.gql\r\n\r\nscalar Void\r\n```\r\n\r\n### 2. implement resolver\r\n\r\n```javascript\r\n// file ./scalar-void.js\r\n\r\nimport { GraphQLScalarType } from &#39;graphql&#39;\r\n\r\nconst Void = new GraphQLScalarType({\r\n\tname: &#39;Void&#39;,\r\n\r\n\tdescription: &#39;Represents NULL values&#39;,\r\n\r\n\tserialize() {\r\n\t\treturn null\r\n\t},\r\n\r\n\tparseValue() {\r\n\t\treturn null\r\n\t},\r\n\r\n\tparseLiteral() {\r\n\t\treturn null\r\n\t}\r\n})\r\nexport Void\r\n```\r\n\r\n### 3. add the resolver to ApolloServer\r\n\r\nAdd the `Void` resolver to the options of your instance of Apollo Server:\r\n \r\n```javascript\r\n# file: ./server.js\r\n\r\nimport { ApolloServer } from &#39;apollo-server-express&#39;\r\nimport { Void } from &#39;./scalar-void&#39;\r\n\r\nconst server = new ApolloServer({\r\n\ttypeDefs,  // use your schema\r\n\tresolvers: {\r\n\t\tVoid: Void,\r\n\t\t// ... your resolvers\r\n\t},\r\n\t\r\n})\r\n```\r\n\r\n### 4. use `Void` for your mutations in the schema\r\n\r\n**Finally**, use the new `scalar` in your schema:\r\n\r\n```graphql\r\n# file: ./schema.gql\r\n\r\ntype Mutation{\r\n\taddElement(element: ElementData): ID\r\n\tremoveElement(id: ID): Void\r\n}\r\n```\r\n","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<h2>(A) Solution with <code>graphql-scalars</code></h2>\n<p>The original answer is below.</p>\n<p>Here is another one solution with <a href=\"https://www.npmjs.com/package/graphql-scalars\" rel=\"noreferrer\"><code>graphql-scalars</code></a> library:</p>\n<ol>\n<li>install <code>npm install graphql-scalars</code> and then</li>\n<li>import their <code>Void</code> type: <a href=\"https://www.graphql-scalars.dev/docs/scalars/void\" rel=\"noreferrer\">https://www.graphql-scalars.dev/docs/scalars/void</a></li>\n</ol>\n<h2>(B) Solution with a custom <code>scalar</code></h2>\n<blockquote>\n<p><strong>Note</strong>: design with <code>void</code>-result from mutations goes against <a href=\"https://graphql-rules.com/rules/mutation-payload\" rel=\"noreferrer\"><em>&quot;GQL best practices&quot;</em></a></p>\n</blockquote>\n<p>This example was written for NodeJS Apollo Framework, but it is pretty easy to convert the implementation for your language/framework</p>\n<p>I'm pretty sure: there is an NPM-package named <code>graphql-void</code> but if you don't want to add another one dependency just copy this code.</p>\n<h3>1. define <code>Void</code>-scalar in your schema</h3>\n<pre><code># file: ./schema.gql\n\nscalar Void\n</code></pre>\n<h3>2. implement resolver</h3>\n<pre class=\"lang-js prettyprint-override\"><code>// file ./scalar-void.js\n\nimport { GraphQLScalarType } from 'graphql'\n\nconst Void = new GraphQLScalarType({\n    name: 'Void',\n\n    description: 'Represents NULL values',\n\n    serialize() {\n        return null\n    },\n\n    parseValue() {\n        return null\n    },\n\n    parseLiteral() {\n        return null\n    }\n})\nexport Void\n</code></pre>\n<h3>3. add the resolver to ApolloServer</h3>\n<p>Add the <code>Void</code> resolver to the options of your instance of Apollo Server:</p>\n<pre class=\"lang-js prettyprint-override\"><code># file: ./server.js\n\nimport { ApolloServer } from 'apollo-server-express'\nimport { Void } from './scalar-void'\n\nconst server = new ApolloServer({\n    typeDefs,  // use your schema\n    resolvers: {\n        Void: Void,\n        // ... your resolvers\n    },\n    \n})\n</code></pre>\n<h3>4. use <code>Void</code> for your mutations in the schema</h3>\n<p><strong>Finally</strong>, use the new <code>scalar</code> in your schema:</p>\n<pre><code># file: ./schema.gql\n\ntype Mutation{\n    addElement(element: ElementData): ID\n    removeElement(id: ID): Void\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":283069,"reputation":2943,"user_id":580371,"accept_rate":27,"display_name":"Leksat"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1597651542,"creation_date":1591272716,"answer_id":62194285,"question_id":44737043,"body_markdown":"If you use TypeScript and `graphql-codegen`:\r\n\r\n- In the GraphQL schema:  \r\n    ```gql\r\n    scalar Void\r\n\r\n    type Mutation {\r\n      removeElement(id: ID): Void\r\n    }\r\n    ```\r\n\r\n- In the codegen config for resolvers:\r\n    ```yaml\r\n    config:\r\n      scalars:\r\n        Void: &quot;void&quot;\r\n    ```\r\n\r\nWith this config TypeScript will ensure that nothing is returned from the `removeElement` mutation resolver. And the returning value for the mutation will always be `null` on the GraphQL side.","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>If you use TypeScript and <code>graphql-codegen</code>:</p>\n<ul>\n<li><p>In the GraphQL schema:</p>\n<pre><code>scalar Void\n\ntype Mutation {\n  removeElement(id: ID): Void\n}\n</code></pre>\n</li>\n<li><p>In the codegen config for resolvers:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>config:\n  scalars:\n    Void: &quot;void&quot;\n</code></pre>\n</li>\n</ul>\n<p>With this config TypeScript will ensure that nothing is returned from the <code>removeElement</code> mutation resolver. And the returning value for the mutation will always be <code>null</code> on the GraphQL side.</p>\n"},{"tags":[],"owner":{"account_id":1045369,"reputation":151,"user_id":1050483,"display_name":"user1050483"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1630992197,"creation_date":1630095392,"answer_id":68958950,"question_id":44737043,"body_markdown":"Check out [graphql-scalars Void][1].  This is standard boilerplate for all of my GraphQL projects.\r\n\r\n    npm i graphql-scalars \r\n\r\n\r\n  [1]: https://www.graphql-scalars.dev/docs/scalars/void/","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>Check out <a href=\"https://www.graphql-scalars.dev/docs/scalars/void/\" rel=\"nofollow noreferrer\">graphql-scalars Void</a>.  This is standard boilerplate for all of my GraphQL projects.</p>\n<pre><code>npm i graphql-scalars \n</code></pre>\n"},{"tags":[],"owner":{"account_id":183306,"reputation":9436,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693564280,"creation_date":1693564280,"answer_id":77022375,"question_id":44737043,"body_markdown":"Here my solution...\r\n\r\n**mutation.graphql**\r\n\r\n```graphql\r\ntype Mutation {\r\n\r\n    invokeNullMutation: Void\r\n\r\n}\r\n```\r\n\r\n**GraphQLScalar.java**\r\n\r\n```java\r\n@Internal\r\npublic class GraphQLVoidScalar {\r\n\r\n    static final Coercing&lt;Void, Void&gt; COERCING = new Coercing&lt;&gt;() {\r\n\r\n        @Override\r\n        public Void serialize(Object dataFetcherResult, GraphQLContext graphQLContext, Locale locale) {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public Void parseValue(Object input, GraphQLContext graphQLContext, Locale locale) {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public Void parseLiteral(Value&lt;?&gt; input, CoercedVariables variables, GraphQLContext graphQLContext, Locale locale) {\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public Value&lt;?&gt; valueToLiteral(Object input, GraphQLContext graphQLContext, Locale locale) {\r\n            return Coercing.super.valueToLiteral(input, graphQLContext, locale);\r\n        }\r\n    };\r\n\r\n    public static final GraphQLScalarType INSTANCE = GraphQLScalarType\r\n        .newScalar()\r\n        .name(&quot;Void&quot;)\r\n        .description(&quot;Void scalar wrapper&quot;)\r\n        .coercing(COERCING)\r\n        .build();\r\n\r\n}\r\n```\r\n\r\n**GraphQLConfiguration.java**\r\n\r\n```java\r\npublic class GraphQLConfiguration {\r\n\r\n    @Bean\r\n    public RuntimeWiringConfigurer runtimeWiringConfigurer() {\r\n\r\n        return wiringBuilder -&gt; wiringBuilder\r\n            .scalar(GraphQLCustomScalars.VOID);\r\n\r\n    }\r\n\r\n}\r\n```","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>Here my solution...</p>\n<p><strong>mutation.graphql</strong></p>\n<pre><code>type Mutation {\n\n    invokeNullMutation: Void\n\n}\n</code></pre>\n<p><strong>GraphQLScalar.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Internal\npublic class GraphQLVoidScalar {\n\n    static final Coercing&lt;Void, Void&gt; COERCING = new Coercing&lt;&gt;() {\n\n        @Override\n        public Void serialize(Object dataFetcherResult, GraphQLContext graphQLContext, Locale locale) {\n            return null;\n        }\n\n        @Override\n        public Void parseValue(Object input, GraphQLContext graphQLContext, Locale locale) {\n            return null;\n        }\n\n        @Override\n        public Void parseLiteral(Value&lt;?&gt; input, CoercedVariables variables, GraphQLContext graphQLContext, Locale locale) {\n            return null;\n        }\n\n        @Override\n        public Value&lt;?&gt; valueToLiteral(Object input, GraphQLContext graphQLContext, Locale locale) {\n            return Coercing.super.valueToLiteral(input, graphQLContext, locale);\n        }\n    };\n\n    public static final GraphQLScalarType INSTANCE = GraphQLScalarType\n        .newScalar()\n        .name(&quot;Void&quot;)\n        .description(&quot;Void scalar wrapper&quot;)\n        .coercing(COERCING)\n        .build();\n\n}\n</code></pre>\n<p><strong>GraphQLConfiguration.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GraphQLConfiguration {\n\n    @Bean\n    public RuntimeWiringConfigurer runtimeWiringConfigurer() {\n\n        return wiringBuilder -&gt; wiringBuilder\n            .scalar(GraphQLCustomScalars.VOID);\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3680938,"reputation":3864,"user_id":3065924,"accept_rate":82,"display_name":"angrykoala"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94467,"favorite_count":0,"down_vote_count":0,"up_vote_count":98,"accepted_answer_id":61714123,"answer_count":5,"score":98,"last_activity_date":1693564331,"creation_date":1498311900,"question_id":44737043,"body_markdown":"I have several GraphQL queries and mutations, now I&#39;m trying to implement a _delete_ mutation without returning any data:\r\n\r\n```\r\n    type Mutation{\r\n        addElement(element: ElementData): ID\r\n        removeElement(id: ID): &#191;?\r\n    }\r\n```\r\n\r\nHowever, it seems to be required to have a return value for the delete operation. Is there a way to perform an &quot;empty&quot; response in GraphQL? I would like to avoid things like returning a boolean or status flag if possible. \r\n\r\nI&#39;m not sure on what are the best practices for GraphQL delete operations.","title":"Is it possible to not return any data when using a GraphQL mutation?","body":"<p>I have several GraphQL queries and mutations, now I'm trying to implement a <em>delete</em> mutation without returning any data:</p>\n\n<pre><code>    type Mutation{\n        addElement(element: ElementData): ID\n        removeElement(id: ID): ¿?\n    }\n</code></pre>\n\n<p>However, it seems to be required to have a return value for the delete operation. Is there a way to perform an \"empty\" response in GraphQL? I would like to avoid things like returning a boolean or status flag if possible. </p>\n\n<p>I'm not sure on what are the best practices for GraphQL delete operations.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":6370022,"reputation":1,"user_id":4942722,"display_name":"Ryan Song"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472544247,"creation_date":1472519382,"answer_id":39217384,"question_id":26516254,"body_markdown":"I had the same issue and the followings are what I&#39;ve found out:\r\n\r\n 1. Can&#39;t use switchTo within lambda which driver instance is a parameter \r\n    e.g:\r\n\r\n         wait.Until( driver =&gt;  driver.SwitchTo().Alert() );\r\n   would cause unstable behavior (sometimes works, sometimes not as it hangs). I think it&#39;s because `driver.switchTo()` changes driver state where lamdba parameter is supposed to be immutable.\r\n\r\n 2. Incompatible browser driver version, Just change driver version would resolve this issue.\r\n","title":"Webdriver hangs when trying to handle alerts","body":"<p>I had the same issue and the followings are what I've found out:</p>\n\n<ol>\n<li><p>Can't use switchTo within lambda which driver instance is a parameter \ne.g:</p>\n\n<pre><code> wait.Until( driver =&gt;  driver.SwitchTo().Alert() );\n</code></pre>\n\n<p>would cause unstable behavior (sometimes works, sometimes not as it hangs). I think it's because <code>driver.switchTo()</code> changes driver state where lamdba parameter is supposed to be immutable.</p></li>\n<li><p>Incompatible browser driver version, Just change driver version would resolve this issue.</p></li>\n</ol>\n"}],"owner":{"account_id":5216831,"reputation":11,"user_id":4171513,"display_name":"FlashAzul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":834,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693564021,"creation_date":1414008702,"question_id":26516254,"body_markdown":"I&#39;m using the code from [this question](https://stackoverflow.com/questions/12893478/selenium-webdriver-cant-accept-alert). For some reason any time my test hits anything with an alert it will not return. It hits this:\r\n\r\n    webDriver.switchTo().alert();\r\n\r\nand then just spins forever, never returning. I expect the no alert present exception, but nothing happens.\r\n\r\nI&#39;ve also tried [this](https://stackoverflow.com/questions/8244723/alert-handling-in-selenium-webdriver-selenium-2-with-java) with no success. As soon as it hits the\r\n\r\n    wait.until(ExpectedConditions.alertIsPresent());\r\n\r\nit spins forever. I have noticed that if I close the browser manually it will skip past it without throwing an exception. I&#39;m using Ubuntu 14, latest version of Chrome, latest version of Webdriver and Chrome driver. My IDE is IntelliJ IDEA.\r\n\r\nI&#39;ve looked for quite a while with little success. Can anyone tell me how to fix my problem?\r\n\r\n---\r\n**(UPDATE)**\r\n\r\nI&#39;ve played around with this quite a bit and I&#39;ve noticed something strange. In my test if I use alert functions in the main body of code it works just fine. However, if I make a call from the main body of code to another function, and then in the function make a call to the alert functions, it will never return from the call. Not sure if that helps but I have no idea why that would matter. ","title":"Webdriver hangs when trying to handle alerts","body":"<p>I'm using the code from <a href=\"https://stackoverflow.com/questions/12893478/selenium-webdriver-cant-accept-alert\">this question</a>. For some reason any time my test hits anything with an alert it will not return. It hits this:</p>\n\n<pre><code>webDriver.switchTo().alert();\n</code></pre>\n\n<p>and then just spins forever, never returning. I expect the no alert present exception, but nothing happens.</p>\n\n<p>I've also tried <a href=\"https://stackoverflow.com/questions/8244723/alert-handling-in-selenium-webdriver-selenium-2-with-java\">this</a> with no success. As soon as it hits the</p>\n\n<pre><code>wait.until(ExpectedConditions.alertIsPresent());\n</code></pre>\n\n<p>it spins forever. I have noticed that if I close the browser manually it will skip past it without throwing an exception. I'm using Ubuntu 14, latest version of Chrome, latest version of Webdriver and Chrome driver. My IDE is IntelliJ IDEA.</p>\n\n<p>I've looked for quite a while with little success. Can anyone tell me how to fix my problem?</p>\n\n<hr>\n\n<p><strong>(UPDATE)</strong></p>\n\n<p>I've played around with this quite a bit and I've noticed something strange. In my test if I use alert functions in the main body of code it works just fine. However, if I make a call from the main body of code to another function, and then in the function make a call to the alert functions, it will never return from the call. Not sure if that helps but I have no idea why that would matter. </p>\n"},{"tags":["java","jsp","struts-1"],"comments":[{"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1306746920,"post_id":6110075,"comment_id":7178571,"body_markdown":"I don&#39;t see your mappings of `UserAction` in your `struts-config.xml`.","body":"I don&#39;t see your mappings of <code>UserAction</code> in your <code>struts-config.xml</code>."}],"answers":[{"tags":[],"owner":{"account_id":1519726,"reputation":9,"user_id":1419743,"display_name":"vikas"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1338091816,"creation_date":1338091816,"answer_id":10771592,"question_id":6110075,"body_markdown":"Simply pass method name to your parameter variable, which you want to call \r\n\r\n\r\n&lt;action-mappings&gt;\r\n    &lt;action input=&quot;/index.jsp&quot; parameter=&quot;methodtocall&quot; name=&quot;UserForm&quot; path=&quot;/UserAction&quot; scope=&quot;session&quot; type=&quot;com.tk20.UserAction&quot;&gt;\r\n        &lt;forward name=&quot;success&quot; path=&quot;/dispatch.do?getMethodtocall= METHOD NAME&quot; /&gt;\r\n    &lt;/action&gt;\r\n\r\n    &lt;action path=&quot;/dispatch.do?getMethodtocall=display&quot; parameter=&quot;getMethodtocall&quot; name=&quot;UserForm&quot; scope=&quot;session&quot; type=&quot;com.tk20.TestDispatchAction&quot;&gt;\r\n        &lt;forward name=&quot;success&quot; path=&quot;/index.jsp&quot; /&gt;\r\n    &lt;/action&gt;\r\n\r\n    &lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot; /&gt;\r\n&lt;/action-mappings&gt;\r\n","title":"Struts : call a a method of DispatchAction from another DispatchAction","body":"<p>Simply pass method name to your parameter variable, which you want to call </p>\n\n<p>\n    \n        \n    </p>\n\n<pre><code>&lt;action path=\"/dispatch.do?getMethodtocall=display\" parameter=\"getMethodtocall\" name=\"UserForm\" scope=\"session\" type=\"com.tk20.TestDispatchAction\"&gt;\n    &lt;forward name=\"success\" path=\"/index.jsp\" /&gt;\n&lt;/action&gt;\n\n&lt;action path=\"/Welcome\" forward=\"/welcomeStruts.jsp\" /&gt;\n</code></pre>\n\n<p></p>\n"}],"owner":{"account_id":756581,"reputation":11,"user_id":767669,"display_name":"amit4444"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8394,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693562835,"creation_date":1306238547,"question_id":6110075,"body_markdown":"I want to call a a method of dispatchAction from another dispatch action.\r\nI want that when I click on update or delete &quot;Inside display user method&quot; will be diplayed on my jsp.\r\n\r\n**Struts config file**\r\n\r\n    &lt;action-mappings&gt;\r\n    \t&lt;action input=&quot;/index.jsp&quot; parameter=&quot;methodtocall&quot; name=&quot;UserForm&quot; path=&quot;/UserAction&quot; scope=&quot;session&quot; type=&quot;com.tk20.UserAction&quot;&gt;\r\n    \t\t&lt;forward name=&quot;success&quot; path=&quot;/dispatch.do?getMethodtocall=display.do&quot; /&gt;\r\n    \t&lt;/action&gt;\r\n    \t\r\n    \t&lt;action path=&quot;/dispatch.do?getMethodtocall=display&quot; parameter=&quot;getMethodtocall&quot; name=&quot;UserForm&quot; scope=&quot;session&quot; type=&quot;com.tk20.TestDispatchAction&quot;&gt;\r\n    \t\t&lt;forward name=&quot;success&quot; path=&quot;/index.jsp&quot; /&gt;\r\n    \t&lt;/action&gt;\r\n    \t\r\n    \t&lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot; /&gt;\r\n    &lt;/action-mappings&gt;\r\n   \r\n\r\n**dispactch action classes**\r\n\r\n    public class UserAction extends DispatchAction {\r\n    \r\n        /* forward name=&quot;success&quot; path=&quot;&quot; */\r\n        private final static String SUCCESS = &quot;success&quot;;\r\n    \r\n        /**\r\n         * This is the Struts action method called on\r\n         * http://.../actionPath?method=myAction1,\r\n         * where &quot;method&quot; is the value specified in &lt;action&gt; element : \r\n         * ( &lt;action parameter=&quot;method&quot; .../&gt; )\r\n         */\r\n        public ActionForward add(ActionMapping mapping, ActionForm form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            UserForm userForm = (UserForm) form;\r\n       \r\n            return mapping.findForward(&quot;dispatch&quot;);\r\n        }\r\n       \r\n        \r\n        public ActionForward update(ActionMapping mapping, ActionForm form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            UserForm userForm = (UserForm) form;\r\n            userForm.setMessage(&quot;Inside update user method.&quot;);\r\n            return mapping.findForward(SUCCESS);\r\n        }\r\n    \r\n        public ActionForward delete(ActionMapping mapping, ActionForm form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            UserForm userForm = (UserForm) form;\r\n            userForm.setMessage(&quot;Inside delete user method.&quot;);\r\n            return mapping.findForward(SUCCESS);\r\n        }\r\n    }\r\n&lt;p&gt;\r\n\r\n    public class TestDispatchAction extends DispatchAction {\r\n    \r\n        /* forward name=&quot;success&quot; path=&quot;&quot; */\r\n        private final static String SUCCESS = &quot;success&quot;;\r\n    \r\n        /**\r\n         * This is the Struts action method called on\r\n         * http://.../actionPath?method=myAction1,\r\n         * where &quot;method&quot; is the value specified in &lt;action&gt; element : \r\n         * ( &lt;action parameter=&quot;method&quot; .../&gt; )\r\n         */\r\n        public ActionForward display(ActionMapping mapping, ActionForm form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            UserForm userForm = (UserForm) form;\r\n            userForm.setMessage(&quot;Inside display user method.&quot;);\r\n            return mapping.findForward(SUCCESS);\r\n        }\r\n        \r\n    }\r\n\r\nJSP page\r\n\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;script type=&quot;text/javascript&quot;&gt;\r\n    \tfunction submitForm() {\r\n    \t\tdocument.forms[0].action = &quot;UserAction.do?methodtocall=add&quot;;\r\n    \t\tdocument.forms[0].submit();\r\n    \t}\r\n    &lt;/script&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;html:form action=&quot;UserAction&quot;&gt;\r\n    \t&lt;table&gt;\r\n    \t\t&lt;tr&gt;&lt;td&gt;&lt;bean:write name=&quot;UserForm&quot; property=&quot;message&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\r\n    \t\t&lt;tr&gt;&lt;td&gt;&lt;html:submit value=&quot;Add&quot; onclick=&quot;submitForm()&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\r\n    \t\t&lt;tr&gt;&lt;td&gt;&lt;html:submit property=&quot;methodtocall&quot; value=&quot;update&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\r\n    \t\t&lt;tr&gt;&lt;td&gt;&lt;html:submit property=&quot;methodtocall&quot;&gt;delete&lt;/html:submit&gt;&lt;/td&gt;&lt;/tr&gt;\r\n    \t&lt;/table&gt;\r\n    &lt;/html:form&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nthanks\r\n","title":"Struts : call a a method of DispatchAction from another DispatchAction","body":"<p>I want to call a a method of dispatchAction from another dispatch action.\nI want that when I click on update or delete \"Inside display user method\" will be diplayed on my jsp.</p>\n\n<p><strong>Struts config file</strong></p>\n\n<pre><code>&lt;action-mappings&gt;\n    &lt;action input=\"/index.jsp\" parameter=\"methodtocall\" name=\"UserForm\" path=\"/UserAction\" scope=\"session\" type=\"com.tk20.UserAction\"&gt;\n        &lt;forward name=\"success\" path=\"/dispatch.do?getMethodtocall=display.do\" /&gt;\n    &lt;/action&gt;\n\n    &lt;action path=\"/dispatch.do?getMethodtocall=display\" parameter=\"getMethodtocall\" name=\"UserForm\" scope=\"session\" type=\"com.tk20.TestDispatchAction\"&gt;\n        &lt;forward name=\"success\" path=\"/index.jsp\" /&gt;\n    &lt;/action&gt;\n\n    &lt;action path=\"/Welcome\" forward=\"/welcomeStruts.jsp\" /&gt;\n&lt;/action-mappings&gt;\n</code></pre>\n\n<p><strong>dispactch action classes</strong></p>\n\n<pre><code>public class UserAction extends DispatchAction {\n\n    /* forward name=\"success\" path=\"\" */\n    private final static String SUCCESS = \"success\";\n\n    /**\n     * This is the Struts action method called on\n     * http://.../actionPath?method=myAction1,\n     * where \"method\" is the value specified in &lt;action&gt; element : \n     * ( &lt;action parameter=\"method\" .../&gt; )\n     */\n    public ActionForward add(ActionMapping mapping, ActionForm form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        UserForm userForm = (UserForm) form;\n\n        return mapping.findForward(\"dispatch\");\n    }\n\n\n    public ActionForward update(ActionMapping mapping, ActionForm form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        UserForm userForm = (UserForm) form;\n        userForm.setMessage(\"Inside update user method.\");\n        return mapping.findForward(SUCCESS);\n    }\n\n    public ActionForward delete(ActionMapping mapping, ActionForm form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        UserForm userForm = (UserForm) form;\n        userForm.setMessage(\"Inside delete user method.\");\n        return mapping.findForward(SUCCESS);\n    }\n}\n</code></pre>\n\n<p><p></p>\n\n<pre><code>public class TestDispatchAction extends DispatchAction {\n\n    /* forward name=\"success\" path=\"\" */\n    private final static String SUCCESS = \"success\";\n\n    /**\n     * This is the Struts action method called on\n     * http://.../actionPath?method=myAction1,\n     * where \"method\" is the value specified in &lt;action&gt; element : \n     * ( &lt;action parameter=\"method\" .../&gt; )\n     */\n    public ActionForward display(ActionMapping mapping, ActionForm form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        UserForm userForm = (UserForm) form;\n        userForm.setMessage(\"Inside display user method.\");\n        return mapping.findForward(SUCCESS);\n    }\n\n}\n</code></pre>\n\n<p>JSP page</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;script type=\"text/javascript\"&gt;\n    function submitForm() {\n        document.forms[0].action = \"UserAction.do?methodtocall=add\";\n        document.forms[0].submit();\n    }\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;html:form action=\"UserAction\"&gt;\n    &lt;table&gt;\n        &lt;tr&gt;&lt;td&gt;&lt;bean:write name=\"UserForm\" property=\"message\" /&gt;&lt;/td&gt;&lt;/tr&gt;\n        &lt;tr&gt;&lt;td&gt;&lt;html:submit value=\"Add\" onclick=\"submitForm()\" /&gt;&lt;/td&gt;&lt;/tr&gt;\n        &lt;tr&gt;&lt;td&gt;&lt;html:submit property=\"methodtocall\" value=\"update\" /&gt;&lt;/td&gt;&lt;/tr&gt;\n        &lt;tr&gt;&lt;td&gt;&lt;html:submit property=\"methodtocall\"&gt;delete&lt;/html:submit&gt;&lt;/td&gt;&lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/html:form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>thanks</p>\n"},{"tags":["java","xml","spring","yaml","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1693582031,"post_id":77021421,"comment_id":135784558,"body_markdown":"It is probably a quoting problem, see [YAML: Do I need quotes for strings in YAML?](https://stackoverflow.com/q/19109912/11748454).","body":"It is probably a quoting problem, see <a href=\"https://stackoverflow.com/q/19109912/11748454\">YAML: Do I need quotes for strings in YAML?</a>."}],"answers":[{"comments":[{"owner":{"account_id":17353082,"reputation":1,"user_id":12571132,"display_name":"Trong Nghia Vu"},"score":0,"creation_date":1693882292,"post_id":77022138,"comment_id":135814580,"body_markdown":"Thank you very much for the answer. I checked again as you suggested but unfortunately I still can&#39;t solve it.","body":"Thank you very much for the answer. I checked again as you suggested but unfortunately I still can&#39;t solve it."}],"tags":[],"owner":{"account_id":20867359,"reputation":101,"user_id":15328090,"display_name":"Igor"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693562119,"creation_date":1693562119,"answer_id":77022138,"question_id":77021421,"body_markdown":"I was able to successfully run a simple app with your configuration and small additions(added Policies to RollingFileAppender and a couple Loggers, see the listings below).\r\n\r\nSource files:\r\n\r\n**Main.java**\r\n\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n    \r\n    public class Main {\r\n        private static final Logger logger = LogManager.getLogger(Main.class);\r\n    \r\n        public static void main(String[] args) {\r\n           logger.info(&quot;hello&quot;);\r\n        }\r\n    }\r\n\r\n**log4j2.yaml**\r\n\r\n    Configuration:\r\n      packages: &quot;com.igorgoose&quot;\r\n    \r\n      Properties:\r\n        Property:\r\n          - name: log-path\r\n            value: &quot;C:\\\\Users\\\\i.shchepov\\\\Desktop\\\\projects\\\\log4j2-yaml-test&quot;\r\n          - name: log-name\r\n            value: &quot;my-service&quot;\r\n    \r\n      Appenders:\r\n        Console:\r\n          name: Console\r\n          target: SYSTEM_OUT\r\n          PatternLayout:\r\n            pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\r\n    \r\n        RollingFile:\r\n          name: File\r\n          Policies:\r\n            SizeBasedTriggeringPolicy:\r\n              size: 1 KB\r\n          fileName: ${log-path}/${log-name}.log\r\n          append: true\r\n          filePattern: ${log-path}/${log-name}.log-%d{yyyy-MM}/${log-name}.log-%d{yyyy-MM-dd}-%i.log.gz\r\n          PatternLayout:\r\n            charset: &quot;UTF-8&quot;\r\n            pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\r\n    \r\n      Loggers:\r\n        Root:\r\n          level: debug\r\n          AppenderRef:\r\n            - ref: Console\r\n        Logger:\r\n          - name: com.igorgoose\r\n            level: debug\r\n            AppenderRef:\r\n              - ref: File\r\n\r\n**pom.xml**\r\n\r\n    &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.13.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.13.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n                &lt;version&gt;2.10.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                &lt;version&gt;2.10.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nHowever, I was able to reproduce your issue by accidentally messing up the indentation in the log4j2 config, so that `Loggers` attribute was on the same level as `Configuration`.\r\n\r\n**log4j2.yaml(messed up)**\r\n\r\n    Configuration:\r\n      packages: &quot;com.igorgoose&quot;\r\n    \r\n    # ------the rest of configuration-----------\r\n    \r\n    Loggers:\r\n      Root:\r\n        level: debug\r\n        AppenderRef:\r\n          - ref: Console\r\n      Logger:\r\n        - name: com.igorgoose\r\n          level: debug\r\n          AppenderRef:\r\n            - ref: File\r\n\r\nSo please make sure that your indentations are correct and let me know if the issue is still there. Hope this helps!","title":"Declare multiple property variables in log4j2.yml configuration file","body":"<p>I was able to successfully run a simple app with your configuration and small additions(added Policies to RollingFileAppender and a couple Loggers, see the listings below).</p>\n<p>Source files:</p>\n<p><strong>Main.java</strong></p>\n<pre><code>import org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\npublic class Main {\n    private static final Logger logger = LogManager.getLogger(Main.class);\n\n    public static void main(String[] args) {\n       logger.info(&quot;hello&quot;);\n    }\n}\n</code></pre>\n<p><strong>log4j2.yaml</strong></p>\n<pre><code>Configuration:\n  packages: &quot;com.igorgoose&quot;\n\n  Properties:\n    Property:\n      - name: log-path\n        value: &quot;C:\\\\Users\\\\i.shchepov\\\\Desktop\\\\projects\\\\log4j2-yaml-test&quot;\n      - name: log-name\n        value: &quot;my-service&quot;\n\n  Appenders:\n    Console:\n      name: Console\n      target: SYSTEM_OUT\n      PatternLayout:\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\n\n    RollingFile:\n      name: File\n      Policies:\n        SizeBasedTriggeringPolicy:\n          size: 1 KB\n      fileName: ${log-path}/${log-name}.log\n      append: true\n      filePattern: ${log-path}/${log-name}.log-%d{yyyy-MM}/${log-name}.log-%d{yyyy-MM-dd}-%i.log.gz\n      PatternLayout:\n        charset: &quot;UTF-8&quot;\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\n\n  Loggers:\n    Root:\n      level: debug\n      AppenderRef:\n        - ref: Console\n    Logger:\n      - name: com.igorgoose\n        level: debug\n        AppenderRef:\n          - ref: File\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.13.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.13.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>However, I was able to reproduce your issue by accidentally messing up the indentation in the log4j2 config, so that <code>Loggers</code> attribute was on the same level as <code>Configuration</code>.</p>\n<p><strong>log4j2.yaml(messed up)</strong></p>\n<pre><code>Configuration:\n  packages: &quot;com.igorgoose&quot;\n\n# ------the rest of configuration-----------\n\nLoggers:\n  Root:\n    level: debug\n    AppenderRef:\n      - ref: Console\n  Logger:\n    - name: com.igorgoose\n      level: debug\n      AppenderRef:\n        - ref: File\n</code></pre>\n<p>So please make sure that your indentations are correct and let me know if the issue is still there. Hope this helps!</p>\n"}],"owner":{"account_id":17353082,"reputation":1,"user_id":12571132,"display_name":"Trong Nghia Vu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693562119,"creation_date":1693555224,"question_id":77021421,"body_markdown":"I am facing problems with these property variables when converting config files of log4j2 from .xml to .yml.\r\nMy well working .xml file looks like this, with 2 property variables &quot;log-path&quot; and &quot;log-name&quot;:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration xmlns=&quot;http://logging.apache.org/log4j/2.0/config&quot; packages=&quot;com.mypackage&quot;&gt;\r\n\r\n    &lt;Properties&gt;\r\n        &lt;Property name=&quot;log-path&quot;&gt;/var/work/logs/my-service&lt;/Property&gt;\r\n        &lt;Property name=&quot;log-name&quot;&gt;my-service&lt;/Property&gt;\r\n    &lt;/Properties&gt;\r\n\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;/&gt;\r\n        &lt;/Console&gt;\r\n\r\n        &lt;RollingFile name=&quot;File&quot; fileName=&quot;${log-path}/${log-name}.log&quot; append=&quot;true&quot;\r\n                     filePattern=&quot;${log-path}/${log-name}-%d{yyyy-MM}/${log-name}-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout charset=&quot;UTF-8&quot; pattern=&quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;/&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;200 MB&quot; /&gt;\r\n                &lt;TimeBasedTriggeringPolicy /&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;10000&quot; compressionLevel=&quot;9&quot;/&gt;\r\n        &lt;/RollingFile&gt;\r\n//..............................\r\n```\r\n\r\nMy .yml file looks like this:\r\n\r\n```\r\nConfiguration:\r\n  packages: &quot;com.mypackage&quot;\r\n\r\n  Properties:\r\n    Property:\r\n      - name: log-path\r\n        value: &quot;/var/work/logs/my-service&quot;\r\n      - name: log-name\r\n        value: &quot;my-service&quot;\r\n\r\n  Appenders:\r\n    Console:\r\n      name: Console\r\n      target: SYSTEM_OUT\r\n      PatternLayout:\r\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\r\n\r\n    RollingFile:\r\n      name: File\r\n      fileName: ${log-path}/${log-name}.log\r\n      append: true\r\n      filePattern: ${log-path}/${log-name}.log-%d{yyyy-MM}/${log-name}.log-%d{yyyy-MM-dd}-%i.log.gz\r\n      PatternLayout:\r\n        charset: &quot;UTF-8&quot;\r\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\r\n// ......................\r\n```\r\n\r\nThe problem here is that the values ​​of &quot;log-path&quot; and &quot;log-name&quot; are not retrieved as I expected: `&quot;/var/work/logs/my-service/my-service.log&quot;`, instead the log file is generated right in my application directory with the path: `&quot;${log-path}/${log-name}.log&quot;`.\r\n\r\nBut it only has problems when I declare more than 1 variable. If I just declare a variable like this, everything works fine again:\r\n\r\n```\r\nConfiguration:\r\n  packages: &quot;com.mypackage&quot;\r\n\r\n  Properties:\r\n    Property:\r\n      name: log-path\r\n      value: &quot;/var/work/logs/my-service&quot;\r\n\r\n  Appenders:\r\n    Console:\r\n      name: Console\r\n      target: SYSTEM_OUT\r\n      PatternLayout:\r\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\r\n\r\n    RollingFile:\r\n      name: File\r\n      fileName: ${log-path}/my-service.log\r\n      append: true\r\n      filePattern: ${log-path}/my-service.log-%d{yyyy-MM}/my-service.log-%d{yyyy-MM-dd}-%i.log.gz\r\n      PatternLayout:\r\n        charset: &quot;UTF-8&quot;\r\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\r\n// ......................\r\n```\r\n\r\nI tried searching but couldn&#39;t find anything. Can you guys help me? How do I declare multiple property variables?","title":"Declare multiple property variables in log4j2.yml configuration file","body":"<p>I am facing problems with these property variables when converting config files of log4j2 from .xml to .yml.\nMy well working .xml file looks like this, with 2 property variables &quot;log-path&quot; and &quot;log-name&quot;:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration xmlns=&quot;http://logging.apache.org/log4j/2.0/config&quot; packages=&quot;com.mypackage&quot;&gt;\n\n    &lt;Properties&gt;\n        &lt;Property name=&quot;log-path&quot;&gt;/var/work/logs/my-service&lt;/Property&gt;\n        &lt;Property name=&quot;log-name&quot;&gt;my-service&lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;/&gt;\n        &lt;/Console&gt;\n\n        &lt;RollingFile name=&quot;File&quot; fileName=&quot;${log-path}/${log-name}.log&quot; append=&quot;true&quot;\n                     filePattern=&quot;${log-path}/${log-name}-%d{yyyy-MM}/${log-name}-%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout charset=&quot;UTF-8&quot; pattern=&quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;200 MB&quot; /&gt;\n                &lt;TimeBasedTriggeringPolicy /&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;10000&quot; compressionLevel=&quot;9&quot;/&gt;\n        &lt;/RollingFile&gt;\n//..............................\n</code></pre>\n<p>My .yml file looks like this:</p>\n<pre><code>Configuration:\n  packages: &quot;com.mypackage&quot;\n\n  Properties:\n    Property:\n      - name: log-path\n        value: &quot;/var/work/logs/my-service&quot;\n      - name: log-name\n        value: &quot;my-service&quot;\n\n  Appenders:\n    Console:\n      name: Console\n      target: SYSTEM_OUT\n      PatternLayout:\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\n\n    RollingFile:\n      name: File\n      fileName: ${log-path}/${log-name}.log\n      append: true\n      filePattern: ${log-path}/${log-name}.log-%d{yyyy-MM}/${log-name}.log-%d{yyyy-MM-dd}-%i.log.gz\n      PatternLayout:\n        charset: &quot;UTF-8&quot;\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\n// ......................\n</code></pre>\n<p>The problem here is that the values ​​of &quot;log-path&quot; and &quot;log-name&quot; are not retrieved as I expected: <code>&quot;/var/work/logs/my-service/my-service.log&quot;</code>, instead the log file is generated right in my application directory with the path: <code>&quot;${log-path}/${log-name}.log&quot;</code>.</p>\n<p>But it only has problems when I declare more than 1 variable. If I just declare a variable like this, everything works fine again:</p>\n<pre><code>Configuration:\n  packages: &quot;com.mypackage&quot;\n\n  Properties:\n    Property:\n      name: log-path\n      value: &quot;/var/work/logs/my-service&quot;\n\n  Appenders:\n    Console:\n      name: Console\n      target: SYSTEM_OUT\n      PatternLayout:\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{userName}] [mid%X{mid}] - %m%n%exception&quot;\n\n    RollingFile:\n      name: File\n      fileName: ${log-path}/my-service.log\n      append: true\n      filePattern: ${log-path}/my-service.log-%d{yyyy-MM}/my-service.log-%d{yyyy-MM-dd}-%i.log.gz\n      PatternLayout:\n        charset: &quot;UTF-8&quot;\n        pattern: &quot;%d{DEFAULT} %5p [%20C{1}] [%4L] [trace%X{requestId}] [user%X{username}] [mid%X{mid}] - %m%n%exception&quot;\n// ......................\n</code></pre>\n<p>I tried searching but couldn't find anything. Can you guys help me? How do I declare multiple property variables?</p>\n"},{"tags":["java","code-generation","neovim","vscode-snippets","nvim.cmp"],"comments":[{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1693562059,"post_id":77022008,"comment_id":135780666,"body_markdown":"Have you tried doing a search for &quot;auto complete&quot; or intellisense plugins?","body":"Have you tried doing a search for &quot;auto complete&quot; or intellisense plugins?"},{"owner":{"account_id":29173721,"reputation":1,"user_id":22349421,"display_name":"wuhelang"},"score":0,"creation_date":1693661445,"post_id":77022008,"comment_id":135791784,"body_markdown":"yes intellisense plugin","body":"yes intellisense plugin"}],"owner":{"account_id":29173721,"reputation":1,"user_id":22349421,"display_name":"wuhelang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693561974,"creation_date":1693560901,"question_id":77022008,"body_markdown":" 1. when new a ArrayList in Jetbrains IDEA , like:\r\n\r\n    ```java\r\n      new ArrayList&lt;String&gt;()\r\n    ```\r\n\r\n 2. then write  &#39;.var&#39; at last\r\n\r\n    ```java\r\n     new ArrayList&lt;String&gt;().var\r\n    ```\r\n\r\n 3. then press Tab,IDEA automatic generate the local variable\r\n     ```java\r\n      ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;();\r\n     ```\r\n 4. Question: if use neovim, is there any plugin for this scene? \r\n        now i use Luasnip plugin and friendly-snippets plugin\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/z60E7.png","title":"How to automatic generate variable in neovim like in Jetbrains IDEA","body":"<ol>\n<li><p>when new a ArrayList in Jetbrains IDEA , like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  new ArrayList&lt;String&gt;()\n</code></pre>\n</li>\n<li><p>then write  '.var' at last</p>\n<pre class=\"lang-java prettyprint-override\"><code> new ArrayList&lt;String&gt;().var\n</code></pre>\n</li>\n<li><p>then press Tab,IDEA automatic generate the local variable</p>\n<pre class=\"lang-java prettyprint-override\"><code> ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;();\n</code></pre>\n</li>\n<li><p>Question: if use neovim, is there any plugin for this scene?\nnow i use Luasnip plugin and friendly-snippets plugin</p>\n</li>\n</ol>\n"},{"tags":["java","openldap","lsc"],"answers":[{"tags":[],"owner":{"account_id":29333276,"reputation":1,"user_id":22474241,"display_name":"Marcin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693561893,"creation_date":1693561846,"answer_id":77022112,"question_id":77012025,"body_markdown":"Resolution is to make rjs script for all three attributes:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    &lt;dataset&gt;\r\n    \t\t&lt;name&gt;proxyAddresses&lt;/name&gt;\r\n    \t\t&lt;policy&gt;FORCE&lt;/policy&gt;\r\n            &lt;forceValues&gt;\r\n    \t\t&lt;string&gt;\r\n    \t\t&lt;![CDATA[rjs:\r\n    \t\t\t\tvar number = &quot;smtp:&quot; + srcBean.getDatasetValuesById(&quot;employeeNumber&quot;);\r\n    \t\t\t\tvar str = number.toString().toLowerCase();\r\n    \t\t\t\tvar emptystr = str.replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\r\n    \t\t\t\tif (srcBean.getDatasetValuesById(&quot;employeeNumber&quot;) != null &amp;&amp; !srcBean.getDatasetValuesById(&quot;employeeNumber&quot;).isEmpty()) {\r\n    \t\t\t\t\temptystr;\r\n                   } else {\r\n    \t\t\t\t\tnull;\r\n    \t\t\r\n    \t\t\t\t}\r\n    \t\t]]&gt;\t\t\r\n    \t\t&lt;/string&gt;\t\t\r\n    \t\t&lt;string&gt;\r\n    \t\t&lt;![CDATA[rjs:\t\t\r\n    \t\t\t\tvar type = &quot;smtp:&quot; + srcBean.getDatasetValuesById(&quot;employeeType&quot;);\r\n    \t\t\t\tvar str2 = type.toString().toLowerCase();\r\n    \t\t\t\tvar emptystr2 = str2.replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\r\n    \t\t\t\tif (srcBean.getDatasetValuesById(&quot;employeeType&quot;) != null &amp;&amp; !srcBean.getDatasetValuesById(&quot;employeeType&quot;).isEmpty()) {\r\n    \t\t\t\t\temptystr2;\r\n                   } else {\r\n    \t\t\t\t\tnull;\r\n    \t\t\t\t}\r\n    \t\t]]&gt;\r\n    \t\t&lt;/string&gt;\r\n    \t\t&lt;string&gt;\r\n    \t\t&lt;![CDATA[rjs:\r\n    \t\t\t\tvar umail = &quot;SMTP:&quot; + srcBean.getDatasetValuesById(&quot;mail&quot;);\r\n    \t\t\t\tvar str3 = umail.toString();\r\n    \t\t\t\tvar emptystr3 = str3.replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);\r\n    \t\t\t\tif (srcBean.getDatasetValuesById(&quot;mail&quot;) != null &amp;&amp; !srcBean.getDatasetValuesById(&quot;mail&quot;).isEmpty()) {\r\n    \t\t\t\t\temptystr3;\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tnull;\r\n    \t\t\t\t}\r\n    \t\t]]&gt;\r\n    \t\t&lt;/string&gt;\r\n    \t\t&lt;/forceValues&gt;\r\n    \t\t&lt;/dataset&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"LSC check if attribute is not null","body":"<p>Resolution is to make rjs script for all three attributes:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>&lt;dataset&gt;\n        &lt;name&gt;proxyAddresses&lt;/name&gt;\n        &lt;policy&gt;FORCE&lt;/policy&gt;\n        &lt;forceValues&gt;\n        &lt;string&gt;\n        &lt;![CDATA[rjs:\n                var number = \"smtp:\" + srcBean.getDatasetValuesById(\"employeeNumber\");\n                var str = number.toString().toLowerCase();\n                var emptystr = str.replace(\"[\", \"\").replace(\"]\", \"\");\n                if (srcBean.getDatasetValuesById(\"employeeNumber\") != null &amp;&amp; !srcBean.getDatasetValuesById(\"employeeNumber\").isEmpty()) {\n                    emptystr;\n               } else {\n                    null;\n        \n                }\n        ]]&gt;     \n        &lt;/string&gt;       \n        &lt;string&gt;\n        &lt;![CDATA[rjs:       \n                var type = \"smtp:\" + srcBean.getDatasetValuesById(\"employeeType\");\n                var str2 = type.toString().toLowerCase();\n                var emptystr2 = str2.replace(\"[\", \"\").replace(\"]\", \"\");\n                if (srcBean.getDatasetValuesById(\"employeeType\") != null &amp;&amp; !srcBean.getDatasetValuesById(\"employeeType\").isEmpty()) {\n                    emptystr2;\n               } else {\n                    null;\n                }\n        ]]&gt;\n        &lt;/string&gt;\n        &lt;string&gt;\n        &lt;![CDATA[rjs:\n                var umail = \"SMTP:\" + srcBean.getDatasetValuesById(\"mail\");\n                var str3 = umail.toString();\n                var emptystr3 = str3.replace(\"[\", \"\").replace(\"]\", \"\");\n                if (srcBean.getDatasetValuesById(\"mail\") != null &amp;&amp; !srcBean.getDatasetValuesById(\"mail\").isEmpty()) {\n                    emptystr3;\n                } else {\n                    null;\n                }\n        ]]&gt;\n        &lt;/string&gt;\n        &lt;/forceValues&gt;\n        &lt;/dataset&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":29333276,"reputation":1,"user_id":22474241,"display_name":"Marcin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693561893,"creation_date":1693437037,"question_id":77012025,"body_markdown":"I&#39;m using `LSC` to sync `OpenLDAP` to AD `DS`. I need to sync two attributes from `OpenLDAP` to one (`proxyaddresses`) in AD DS, with &quot;smtp:&quot; added before attribute. Attribute need to be senced only when it is not null in `OpenLDAP`.\r\n\r\n    &lt;dataset&gt;\t&lt;name&gt;proxyAddresses&lt;/name&gt;\t\t\t\t&lt;!-- Add proxyAddresses from employeeType and employeeNumber and mail --&gt;\r\n    \t\t&lt;policy&gt;FORCE&lt;/policy&gt;\r\n            &lt;forceValues&gt;\r\n    \t&lt;string&gt;js:(srcBean.getDatasetFirstValueById(&quot;employeeType&quot;) != null ? ((&quot;smtp:&quot;) + (srcBean.getDatasetFirstValueById(&quot;employeeType&quot;))) : null) &lt;/string&gt;\r\n    \t&lt;/forceValues&gt;\r\n    \t&lt;/dataset&gt;\r\n\r\nAbove is not working. When attribute employeeType is null in OpenLDAP, it is syncing only &quot;smtp:&quot;.\r\n\r\nHow to sync attribute with prefix, but only when it is not null?\r\n\r\nTired changing attribute from OpenLDAP.","title":"LSC check if attribute is not null","body":"<p>I'm using <code>LSC</code> to sync <code>OpenLDAP</code> to AD <code>DS</code>. I need to sync two attributes from <code>OpenLDAP</code> to one (<code>proxyaddresses</code>) in AD DS, with &quot;smtp:&quot; added before attribute. Attribute need to be senced only when it is not null in <code>OpenLDAP</code>.</p>\n<pre><code>&lt;dataset&gt;   &lt;name&gt;proxyAddresses&lt;/name&gt;             &lt;!-- Add proxyAddresses from employeeType and employeeNumber and mail --&gt;\n        &lt;policy&gt;FORCE&lt;/policy&gt;\n        &lt;forceValues&gt;\n    &lt;string&gt;js:(srcBean.getDatasetFirstValueById(&quot;employeeType&quot;) != null ? ((&quot;smtp:&quot;) + (srcBean.getDatasetFirstValueById(&quot;employeeType&quot;))) : null) &lt;/string&gt;\n    &lt;/forceValues&gt;\n    &lt;/dataset&gt;\n</code></pre>\n<p>Above is not working. When attribute employeeType is null in OpenLDAP, it is syncing only &quot;smtp:&quot;.</p>\n<p>How to sync attribute with prefix, but only when it is not null?</p>\n<p>Tired changing attribute from OpenLDAP.</p>\n"},{"tags":["java","multiplexing"],"comments":[{"owner":{"account_id":395867,"reputation":2757,"user_id":759049,"accept_rate":96,"display_name":"Pateman"},"score":0,"creation_date":1692947999,"post_id":76974991,"comment_id":135696602,"body_markdown":"Did you check the example in the JavaDoc of `java.util.concurrent.BlockingQueue`?","body":"Did you check the example in the JavaDoc of <code>java.util.concurrent.BlockingQueue</code>?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":2,"creation_date":1692948163,"post_id":76974991,"comment_id":135696643,"body_markdown":"Why do you need to have multiple `BlockingQueue`s and listen to them from one thread?","body":"Why do you need to have multiple <code>BlockingQueue</code>s and listen to them from one thread?"}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1692951102,"post_id":76975142,"comment_id":135697216,"body_markdown":"This code blocks on both `take()` and `put()`, so the situation you describe in your last paragraph cannot arise.","body":"This code blocks on both <code>take()</code> and <code>put()</code>, so the situation you describe in your last paragraph cannot arise."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1692952125,"post_id":76975142,"comment_id":135697436,"body_markdown":"@user207421 While blocking on `put()`, the element is removed from the `toListenFrom` queue but not (yet) inserted i `masterQueue`.","body":"@user207421 While blocking on <code>put()</code>, the element is removed from the <code>toListenFrom</code> queue but not (yet) inserted i <code>masterQueue</code>."},{"owner":{"account_id":20102709,"reputation":47,"user_id":14740858,"display_name":"spin"},"score":0,"creation_date":1693189967,"post_id":76975142,"comment_id":135722725,"body_markdown":"Thanks, the reason why I need to listen to multiple `BlockQueue`s instead of one is that I need to listen to part of them dynamically. I think the second method is helpful, thanks again.","body":"Thanks, the reason why I need to listen to multiple <code>BlockQueue</code>s instead of one is that I need to listen to part of them dynamically. I think the second method is helpful, thanks again."}],"tags":[],"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693561850,"creation_date":1692948669,"answer_id":76975142,"question_id":76974991,"body_markdown":"If you come across a situation like this, I would recommend you to first think about why you need to listen to multiple `BlockingQueue`s. If possible, try inserting to the same `BlockingQueue` in all of the producer tasks. This should be applicable if all consumer tasks are want to listen to all of the queues.\r\n\r\n---\r\n\r\nYou can create another (master) `BlockingQueue` that gets entries from all other `BlockingQueue` and one Thread for each `BlockingQueue` you want to listen to that moves data to the master `BlockingQueue`:\r\n\r\n```java\r\n//data\r\nprivate BlockingQueue&lt;T&gt; masterQueue = new LinkedBlockingQueue&lt;T&gt;(1);\r\nprivate List&lt;BlockingQueue&lt;T&gt;&gt; toListenFrom = new ArrayList&lt;&gt;();//assume that has elements\r\n\r\nprivate ExecutorService queueDistributorExecutor = Executors.newVirtualThreadPerTaskExecutor();//use virtual threads if they are available - if not, use a different executor\r\n```\r\n\r\n```java\r\n// distribute elements\r\nfor(BlockingQueue queue : toListenFrom){\r\n    queueDistributorExecutor.execute(()-&gt;{\r\n        try {\r\n            while(true) {\r\n                masterQueue.put(queue.take());\r\n            }\r\n        } catch(InterruptedException e){\r\n            Thread.currentThread().interrupt();\r\n        }\r\n    });\r\n}\r\n```\r\n\r\nThen, you can read from all queues by reading from `masterQueue`.\r\n\r\nThis code makes the assumptions that it&#39;s no problem if elements from `toListenFrom` queues are removed for `masterQueue` even if `masterQueue` is full (these will be inserted later).  \r\nDue to that, my implementation is not &quot;fair&quot;. The threads reading from the `masterQueue` would &quot;reserve&quot; one element from each other queue.","title":"Is there a way for a thread to listen to multiple BlockingQueues in Java?","body":"<p>If you come across a situation like this, I would recommend you to first think about why you need to listen to multiple <code>BlockingQueue</code>s. If possible, try inserting to the same <code>BlockingQueue</code> in all of the producer tasks. This should be applicable if all consumer tasks are want to listen to all of the queues.</p>\n<hr />\n<p>You can create another (master) <code>BlockingQueue</code> that gets entries from all other <code>BlockingQueue</code> and one Thread for each <code>BlockingQueue</code> you want to listen to that moves data to the master <code>BlockingQueue</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//data\nprivate BlockingQueue&lt;T&gt; masterQueue = new LinkedBlockingQueue&lt;T&gt;(1);\nprivate List&lt;BlockingQueue&lt;T&gt;&gt; toListenFrom = new ArrayList&lt;&gt;();//assume that has elements\n\nprivate ExecutorService queueDistributorExecutor = Executors.newVirtualThreadPerTaskExecutor();//use virtual threads if they are available - if not, use a different executor\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// distribute elements\nfor(BlockingQueue queue : toListenFrom){\n    queueDistributorExecutor.execute(()-&gt;{\n        try {\n            while(true) {\n                masterQueue.put(queue.take());\n            }\n        } catch(InterruptedException e){\n            Thread.currentThread().interrupt();\n        }\n    });\n}\n</code></pre>\n<p>Then, you can read from all queues by reading from <code>masterQueue</code>.</p>\n<p>This code makes the assumptions that it's no problem if elements from <code>toListenFrom</code> queues are removed for <code>masterQueue</code> even if <code>masterQueue</code> is full (these will be inserted later).<br />\nDue to that, my implementation is not &quot;fair&quot;. The threads reading from the <code>masterQueue</code> would &quot;reserve&quot; one element from each other queue.</p>\n"}],"owner":{"account_id":20102709,"reputation":47,"user_id":14740858,"display_name":"spin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76975142,"answer_count":1,"score":0,"last_activity_date":1693561850,"creation_date":1692947325,"question_id":76974991,"body_markdown":"In Java, is there a way for a thread to listen to multiple `java.util.concurrent.BlockingQueue`? Just like `java.nio.channels.Selector` listen to multiple `java.nio.channels.SocketChannel`.","title":"Is there a way for a thread to listen to multiple BlockingQueues in Java?","body":"<p>In Java, is there a way for a thread to listen to multiple <code>java.util.concurrent.BlockingQueue</code>? Just like <code>java.nio.channels.Selector</code> listen to multiple <code>java.nio.channels.SocketChannel</code>.</p>\n"},{"tags":["java","kotlin","encryption","bouncycastle","ed25519"],"comments":[{"owner":{"account_id":29330050,"reputation":76,"user_id":22471702,"display_name":"user22471702"},"score":2,"creation_date":1693511598,"post_id":77018840,"comment_id":135774740,"body_markdown":"related [How to create an OpenSSH compatible ED25519 key with Bouncy Castle?](https://stackoverflow.com/q/67273915/22471702)","body":"related <a href=\"https://stackoverflow.com/q/67273915/22471702\">How to create an OpenSSH compatible ED25519 key with Bouncy Castle?</a>"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1693522413,"post_id":77018840,"comment_id":135776265,"body_markdown":"The public key conversion is analogous to the private key conversion in the linked post, but using `PublicKeyFactory.createKey()` and `OpenSSHPublicKeyUtil.encodePublicKey()`. The PEM conversion is to be omitted. Instead, a Base64 encoding is sufficient, which gives the central part of the key (`AAAAC3...`) following `ssh-ed25519` (see e.g. [here](https://www.thedigitalcatonline.com/blog/2018/04/25/rsa-keys/#:~:text=The%20OpenSSH%20public%20key%20format) for a format description).","body":"The public key conversion is analogous to the private key conversion in the linked post, but using <code>PublicKeyFactory.createKey()</code> and <code>OpenSSHPublicKeyUtil.encodePublicKey()</code>. The PEM conversion is to be omitted. Instead, a Base64 encoding is sufficient, which gives the central part of the key (<code>AAAAC3...</code>) following <code>ssh-ed25519</code> (see e.g. <a href=\"https://www.thedigitalcatonline.com/blog/2018/04/25/rsa-keys/#:~:text=The%20OpenSSH%20public%20key%20format\" rel=\"nofollow noreferrer\">here</a> for a format description)."}],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693524373,"creation_date":1693524373,"answer_id":77019767,"question_id":77018840,"body_markdown":"First, that isn&#39;t Java, although it is some language that compiles to run in the JVM and access Java libraries -- I&#39;m guessing Scala or Kotlin, although I&#39;m not familiar enough with either to say which. Second, you can&#39;t be using _only_ bcpkix, because the classes you use aren&#39;t there; they are in bcprov (or bcprov-ext).\r\n\r\nYour problem is the &#39;blob&#39; in **OpenSSH publickey format uses the SSH protocol&#39;s encoding** for the relevant keytype, which for ed25519 adds prefix lengths and a (redundant) copy of the keytype string. This can be done by hand, but since you&#39;re already using Bouncy it can do most of it for you:\r\n```Java\r\n// I only know Java, translate back to your language as needed\r\n// invoke keyPairGenerator as you have, with result AsymmetricCipherKeyPair keyPair\r\nbyte[] wire = OpenSSHPublicKeyUtils.encodePublicKey(keyPair.getPublic());\r\nString line = &quot;ssh-ed25519 &quot; + Base64.getEncoder().encodeToString(wire) + &quot; comment_field&quot;;\r\n// write that to a file, or display it, or whatever you need\r\n```\r\nFor OpenSSH the third component doesn&#39;t have to be an email address, it can be any information you want to associate with the key. I don&#39;t know if GitHub is stricter here, but as you have a working value you might as well keep it.","title":"Generate Ed25519 keys in Java","body":"<p>First, that isn't Java, although it is some language that compiles to run in the JVM and access Java libraries -- I'm guessing Scala or Kotlin, although I'm not familiar enough with either to say which. Second, you can't be using <em>only</em> bcpkix, because the classes you use aren't there; they are in bcprov (or bcprov-ext).</p>\n<p>Your problem is the 'blob' in <strong>OpenSSH publickey format uses the SSH protocol's encoding</strong> for the relevant keytype, which for ed25519 adds prefix lengths and a (redundant) copy of the keytype string. This can be done by hand, but since you're already using Bouncy it can do most of it for you:</p>\n<pre><code>// I only know Java, translate back to your language as needed\n// invoke keyPairGenerator as you have, with result AsymmetricCipherKeyPair keyPair\nbyte[] wire = OpenSSHPublicKeyUtils.encodePublicKey(keyPair.getPublic());\nString line = &quot;ssh-ed25519 &quot; + Base64.getEncoder().encodeToString(wire) + &quot; comment_field&quot;;\n// write that to a file, or display it, or whatever you need\n</code></pre>\n<p>For OpenSSH the third component doesn't have to be an email address, it can be any information you want to associate with the key. I don't know if GitHub is stricter here, but as you have a working value you might as well keep it.</p>\n"}],"owner":{"account_id":26942366,"reputation":181,"user_id":20512942,"display_name":"wiiznokes3"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693560734,"creation_date":1693511055,"question_id":77018840,"body_markdown":"I&#39;m trying to generate keys of type Ed25519 on Android. Right now i use the library `org.bouncycastle:bcpkix-jdk15on`.\r\n\r\nThis is my code:\r\n```\r\nval keyPairGenerator = Ed25519KeyPairGenerator()\r\nkeyPairGenerator.init(Ed25519KeyGenerationParameters(SecureRandom()))\r\n\r\nval keyPair = keyPairGenerator.generateKeyPair()\r\n\r\nval privateKey = (keyPair.private as Ed25519PrivateKeyParameters).encoded\r\nval publicKey = (keyPair.public as Ed25519PublicKeyParameters).encoded\r\n\r\nval privateKeyBase64 = Base64.toBase64String(privateKey)\r\nval publicKeyBase64 = Base64.toBase64String(publicKey)\r\nLog.d(TAG, publicKeyBase64)\r\n```\r\n\r\nThis print this public key (one example):\r\n`JU+YTj99pb35tX+pLZAZAzdpwVp7GMGPkX0TcmsC7iQ=`\r\n\r\nThis is an example of a public key I generated with the command line tool `ssh-keygen`:\r\n\r\n`\r\nssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKuDxTrKvkL3HbXrFuU796bmi9+KbKLTzT0QLumiJFmk example@gmail.com\r\n`\r\n\r\nYou can see the payload has not the same size.\r\n\r\nThen, when i try to use it on Github, the one generated by `ssh-keygen` works, but the other one don&#39;t. Even if i add `ssh-ed25519` and the email.\r\n\r\nThis is the error message i get:\r\n`Key is invalid. You must supply a key in OpenSSH public key format`.\r\n\r\nSo how can i generate a key in the right format with Java?","title":"Generate Ed25519 keys in Java","body":"<p>I'm trying to generate keys of type Ed25519 on Android. Right now i use the library <code>org.bouncycastle:bcpkix-jdk15on</code>.</p>\n<p>This is my code:</p>\n<pre><code>val keyPairGenerator = Ed25519KeyPairGenerator()\nkeyPairGenerator.init(Ed25519KeyGenerationParameters(SecureRandom()))\n\nval keyPair = keyPairGenerator.generateKeyPair()\n\nval privateKey = (keyPair.private as Ed25519PrivateKeyParameters).encoded\nval publicKey = (keyPair.public as Ed25519PublicKeyParameters).encoded\n\nval privateKeyBase64 = Base64.toBase64String(privateKey)\nval publicKeyBase64 = Base64.toBase64String(publicKey)\nLog.d(TAG, publicKeyBase64)\n</code></pre>\n<p>This print this public key (one example):\n<code>JU+YTj99pb35tX+pLZAZAzdpwVp7GMGPkX0TcmsC7iQ=</code></p>\n<p>This is an example of a public key I generated with the command line tool <code>ssh-keygen</code>:</p>\n<p><code>ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKuDxTrKvkL3HbXrFuU796bmi9+KbKLTzT0QLumiJFmk example@gmail.com</code></p>\n<p>You can see the payload has not the same size.</p>\n<p>Then, when i try to use it on Github, the one generated by <code>ssh-keygen</code> works, but the other one don't. Even if i add <code>ssh-ed25519</code> and the email.</p>\n<p>This is the error message i get:\n<code>Key is invalid. You must supply a key in OpenSSH public key format</code>.</p>\n<p>So how can i generate a key in the right format with Java?</p>\n"},{"tags":["java","micronaut","micronaut-client"],"answers":[{"comments":[{"owner":{"account_id":82452,"reputation":15242,"user_id":231821,"accept_rate":92,"display_name":"Jim"},"score":0,"creation_date":1620711696,"post_id":67470729,"comment_id":119273801,"body_markdown":"Though interestingly, the method above is not called, you need to use `Object value` and then do some checks and balances, as the object passed in is actually an `ArrayList` containing the value, I assume because query parameters can have multiple values.\n\nIn my case there is only one.","body":"Though interestingly, the method above is not called, you need to use <code>Object value</code> and then do some checks and balances, as the object passed in is actually an <code>ArrayList</code> containing the value, I assume because query parameters can have multiple values.  In my case there is only one."},{"owner":{"account_id":468677,"reputation":7486,"user_id":874814,"display_name":"Babl"},"score":0,"creation_date":1620717819,"post_id":67470729,"comment_id":119275847,"body_markdown":"@Jim yes you are right, parameters are stored as a `Map&lt;String, List&gt;` format ... so it makes sense ... Updated the code snipped )","body":"@Jim yes you are right, parameters are stored as a <code>Map&lt;String, List&gt;</code> format ... so it makes sense ... Updated the code snipped )"}],"tags":[],"owner":{"account_id":468677,"reputation":7486,"user_id":874814,"display_name":"Babl"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693559746,"creation_date":1620650963,"answer_id":67470729,"question_id":67470130,"body_markdown":"Seems you are using the _Binding from Multiple Query values_ functionality which under the hood is just creating the map of the query parameters you passed in and uses the Jackson to convert the map into your own POJO. So it does not rely on the system converters but only on the Jackson itself.\r\n\r\nWhat you can do is just use Jacksons `@JsonCreator` annotation to customize the conversation.\r\n\r\nSomething like this should work.\r\n\r\n    public enum TransactionType {\r\n        A (&quot;A&quot;),\r\n        B (&quot;B&quot;);\r\n\r\n        private final String transactionType;\r\n\r\n        TransactionType(String transactionType){\r\n            this.transactionType = transactionType;\r\n        }\r\n\r\n        public String getTransactionType() {\r\n            return transactionType;\r\n        }\r\n\r\n        @JsonCreator\r\n        public static TransactionType forValue(Collection&lt;String&gt; values) {           \r\n            if(values == null || values.isEmpty()){\r\n                return null;\r\n            }\r\n            String value = values.get(0);\r\n            return Arrays.stream(TransactionType.values())\r\n                .filter(txnType -&gt; StringUtils.equals(txnType.getTransactionType(), value) || StringUtils.equals(txnType.name(), value))\r\n                .findFirst().orElse(null);\r\n        }\r\n    }\r\n","title":"Micronaut fails to load and use my TypeConverter implementation","body":"<p>Seems you are using the <em>Binding from Multiple Query values</em> functionality which under the hood is just creating the map of the query parameters you passed in and uses the Jackson to convert the map into your own POJO. So it does not rely on the system converters but only on the Jackson itself.</p>\n<p>What you can do is just use Jacksons <code>@JsonCreator</code> annotation to customize the conversation.</p>\n<p>Something like this should work.</p>\n<pre><code>public enum TransactionType {\n    A (&quot;A&quot;),\n    B (&quot;B&quot;);\n\n    private final String transactionType;\n\n    TransactionType(String transactionType){\n        this.transactionType = transactionType;\n    }\n\n    public String getTransactionType() {\n        return transactionType;\n    }\n\n    @JsonCreator\n    public static TransactionType forValue(Collection&lt;String&gt; values) {           \n        if(values == null || values.isEmpty()){\n            return null;\n        }\n        String value = values.get(0);\n        return Arrays.stream(TransactionType.values())\n            .filter(txnType -&gt; StringUtils.equals(txnType.getTransactionType(), value) || StringUtils.equals(txnType.name(), value))\n            .findFirst().orElse(null);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13846532,"reputation":319,"user_id":9995556,"display_name":"pbthorste"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693558859,"creation_date":1693558859,"answer_id":77021805,"question_id":67470130,"body_markdown":"An alternative way to do this, if you cannot change the sourcecode of the class you need to load, would be to create a Jackson module. By default micronaut will scan and load modules into jackson if they are defined as beans. Example:\r\n\r\n```java\r\nimport com.fasterxml.jackson.core.JacksonException;\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport jakarta.inject.Singleton;\r\n\r\nimport java.io.IOException;\r\n\r\n@Singleton\r\npublic class TransactionTypeDeserializer extends StdDeserializer&lt;TransactionType&gt; {\r\n\r\n    public TransactionTypeDeserializer() {\r\n        this(null);\r\n    }\r\n\r\n    public TransactionTypeDeserializer(Class&lt;?&gt; vc) {\r\n        super(vc);\r\n    }\r\n\r\n    @Override\r\n    public TransactionType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JacksonException {\r\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\r\n        // Do conversion\r\n        return result;\r\n    }\r\n}\r\n\r\n```","title":"Micronaut fails to load and use my TypeConverter implementation","body":"<p>An alternative way to do this, if you cannot change the sourcecode of the class you need to load, would be to create a Jackson module. By default micronaut will scan and load modules into jackson if they are defined as beans. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.core.JacksonException;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport jakarta.inject.Singleton;\n\nimport java.io.IOException;\n\n@Singleton\npublic class TransactionTypeDeserializer extends StdDeserializer&lt;TransactionType&gt; {\n\n    public TransactionTypeDeserializer() {\n        this(null);\n    }\n\n    public TransactionTypeDeserializer(Class&lt;?&gt; vc) {\n        super(vc);\n    }\n\n    @Override\n    public TransactionType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JacksonException {\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\n        // Do conversion\n        return result;\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":82452,"reputation":15242,"user_id":231821,"accept_rate":92,"display_name":"Jim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":820,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67470729,"answer_count":2,"score":0,"last_activity_date":1693559746,"creation_date":1620648372,"question_id":67470130,"body_markdown":"I have a controller method, that takes in a POJO.\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    \r\n    public class Dto {    \r\n        private LocalDate endDate;\r\n        private String token;\r\n        private TransactionType type;   \r\n    }\r\n\r\nTransaction type is a simple `enum`, but I want to use a custom conversion from the inbound value to the transaction type.\r\n\r\n    @Slf4j\r\n    @Controller(&quot;/api/transactions&quot;)\r\n    public class IssuerTransactionController {\r\n        @Get(value = &quot;/{?tr*}&quot;, produces = APPLICATION_JSON)\r\n        public List&lt;String&gt; get(Dto tr) {\r\n            return new ArrayList&lt;&gt;();\r\n        }\r\n    }\r\n\r\nI have written a converter:\r\n\r\n    @Slf4j\r\n    @Singleton\r\n    public class TransactionTypeConverter implements TypeConverter&lt;String, TransactionType&gt; {\r\n        @Override\r\n        public Optional&lt;TransactionType&gt; convert(String value, Class&lt;TransactionType&gt; targetType, ConversionContext context) {\r\n            return Arrays.stream(TransactionType.values())\r\n                    .filter(txnType -&gt; StringUtils.equals(txnType.getTransactionType(), value) || StringUtils.equals(txnType.name(), value))\r\n                    .findFirst();\r\n        }\r\n    }\r\n\r\nMicronaut is not using the type converter to transform the inbound value?  \r\nIs some special registration process needed in order for Micronaut to know that it should be using the converter?\r\n\r\nIf I add a constructor to `TransactionTypeConverter` I can see that the class is never actually created by Micronaut at all.\r\n\r\nIf I add it as a regular dependency to the controller, it&#39;s loaded (no surprise there), but still not used. Is there a step I am missing?","title":"Micronaut fails to load and use my TypeConverter implementation","body":"<p>I have a controller method, that takes in a POJO.</p>\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n\npublic class Dto {    \n    private LocalDate endDate;\n    private String token;\n    private TransactionType type;   \n}\n</code></pre>\n<p>Transaction type is a simple <code>enum</code>, but I want to use a custom conversion from the inbound value to the transaction type.</p>\n<pre><code>@Slf4j\n@Controller(&quot;/api/transactions&quot;)\npublic class IssuerTransactionController {\n    @Get(value = &quot;/{?tr*}&quot;, produces = APPLICATION_JSON)\n    public List&lt;String&gt; get(Dto tr) {\n        return new ArrayList&lt;&gt;();\n    }\n}\n</code></pre>\n<p>I have written a converter:</p>\n<pre><code>@Slf4j\n@Singleton\npublic class TransactionTypeConverter implements TypeConverter&lt;String, TransactionType&gt; {\n    @Override\n    public Optional&lt;TransactionType&gt; convert(String value, Class&lt;TransactionType&gt; targetType, ConversionContext context) {\n        return Arrays.stream(TransactionType.values())\n                .filter(txnType -&gt; StringUtils.equals(txnType.getTransactionType(), value) || StringUtils.equals(txnType.name(), value))\n                .findFirst();\n    }\n}\n</code></pre>\n<p>Micronaut is not using the type converter to transform the inbound value?<br />\nIs some special registration process needed in order for Micronaut to know that it should be using the converter?</p>\n<p>If I add a constructor to <code>TransactionTypeConverter</code> I can see that the class is never actually created by Micronaut at all.</p>\n<p>If I add it as a regular dependency to the controller, it's loaded (no surprise there), but still not used. Is there a step I am missing?</p>\n"},{"tags":["python","java","information-retrieval"],"owner":{"account_id":16241689,"reputation":25,"user_id":15557400,"display_name":"TheTenthBox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693559456,"creation_date":1693559456,"question_id":77021871,"body_markdown":"I am trying to use PyTerrier to conduct information retrieval experiments.There are several weighting models implemented in the original Java code and in the original Terrier documentation - http://terrier.org/docs/current/javadoc/org/terrier/matching/models/package-summary.html\r\n\r\nHowever, I am unable to tune and assign parameter values for models mentioned in the Java documentation but not in the PyTerrier docs:\r\n\r\n\r\n```\r\ndfr = pt.BatchRetrieve(index, wmodel=&quot;DFR_BM25&quot;, controls={&quot;c.0&quot;:10, &quot;c.1&quot;:0},metadata=[&quot;docno&quot;,&#39;text&#39;], num_results=100)\r\n```\r\n\r\nFor example, here I am unable to set the control properties/parameters for the DFR_BM25 model. The results of this retrieval does not change with changing values of &#39;c.0&#39; or &#39;c.1&#39;. The documentation does not state what each model&#39;s parameters are, except for the standard ones like BM25.","title":"PyTerrier - Assigning parameter values to non-standard models","body":"<p>I am trying to use PyTerrier to conduct information retrieval experiments.There are several weighting models implemented in the original Java code and in the original Terrier documentation - <a href=\"http://terrier.org/docs/current/javadoc/org/terrier/matching/models/package-summary.html\" rel=\"nofollow noreferrer\">http://terrier.org/docs/current/javadoc/org/terrier/matching/models/package-summary.html</a></p>\n<p>However, I am unable to tune and assign parameter values for models mentioned in the Java documentation but not in the PyTerrier docs:</p>\n<pre><code>dfr = pt.BatchRetrieve(index, wmodel=&quot;DFR_BM25&quot;, controls={&quot;c.0&quot;:10, &quot;c.1&quot;:0},metadata=[&quot;docno&quot;,'text'], num_results=100)\n</code></pre>\n<p>For example, here I am unable to set the control properties/parameters for the DFR_BM25 model. The results of this retrieval does not change with changing values of 'c.0' or 'c.1'. The documentation does not state what each model's parameters are, except for the standard ones like BM25.</p>\n"},{"tags":["java","junit","mockito","parameter-passing","junit5"],"answers":[{"tags":[],"owner":{"account_id":10014547,"reputation":1156,"user_id":7406338,"display_name":"Morph21"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693559075,"creation_date":1693558022,"answer_id":77021710,"question_id":77021328,"body_markdown":"you are using myRepository.findComponentByKey_1()\r\n\r\nto build your arguments stream but your repository is not initialized at this point.\r\n\r\nFirst your TestParameter class will be initalized to be passed into a function. It will happen before @Mock annotation will work to mock an instance of your repository\r\n\r\nThen your repository will be initialized by @Mock\r\n\r\nThen your @BeforeEach function will fire\r\n\r\nAnd lastly your test function will be called\r\n\r\nI hope that clears things for you.\r\n\r\n\r\nEdit:\r\n\r\nYou could add another function with annotation @BeforeAll it needs to be static then inside that you need to manually mock your repository\r\nand it should work since @BeforeAll function will fire before generating argument source\r\n\r\n    myRepository = mock(MyRepository.class);","title":"NullPointerException Parameterized Test passing input using Mockitos","body":"<p>you are using myRepository.findComponentByKey_1()</p>\n<p>to build your arguments stream but your repository is not initialized at this point.</p>\n<p>First your TestParameter class will be initalized to be passed into a function. It will happen before @Mock annotation will work to mock an instance of your repository</p>\n<p>Then your repository will be initialized by @Mock</p>\n<p>Then your @BeforeEach function will fire</p>\n<p>And lastly your test function will be called</p>\n<p>I hope that clears things for you.</p>\n<p>Edit:</p>\n<p>You could add another function with annotation @BeforeAll it needs to be static then inside that you need to manually mock your repository\nand it should work since @BeforeAll function will fire before generating argument source</p>\n<pre><code>myRepository = mock(MyRepository.class);\n</code></pre>\n"}],"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77021710,"answer_count":1,"score":0,"last_activity_date":1693559075,"creation_date":1693554211,"question_id":77021328,"body_markdown":"```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class MyServiceTest\r\n{\r\n   @Mock\r\n   private static MyRepository myRepository;\r\n   private MyService myService;\r\n\r\n   @BeforeEach\r\n   void setUp()\r\n   {\r\n      myService = new MyService(myRepository);\r\n   }\r\n\r\n@ParameterizedTest\r\n   @ArgumentsSource(TestParameter.class)\r\n   void findAllTest(Map&lt;String, String&gt; allParamaters, List&lt;Element&gt; methodCall) throws JsonProcessingException\r\n   {\r\n\r\n      Element element = Element.builder().identification(&quot;id&quot;).build();\r\n\r\n      when(methodCall).thenReturn(List.of(element));\r\n\r\n      var expectedResponse = myService.excute(allParamaters);\r\n\r\n      //assert....;\r\n   }\r\n\r\n   private static class TestParameter implements ArgumentsProvider\r\n   {\r\n      @Override\r\n      public Stream&lt;? extends Arguments&gt; provideArguments(ExtensionContext context)\r\n      {\r\n         return Stream.of(\r\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_1(....)),\r\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_2(....)),\r\n         );\r\n      }\r\n   }\r\n```\r\n\r\ni get a NullPointerException of `myRepository` in `provideArguments(ExtensionContext context)`. ","title":"NullPointerException Parameterized Test passing input using Mockitos","body":"<pre><code>@ExtendWith(MockitoExtension.class)\npublic class MyServiceTest\n{\n   @Mock\n   private static MyRepository myRepository;\n   private MyService myService;\n\n   @BeforeEach\n   void setUp()\n   {\n      myService = new MyService(myRepository);\n   }\n\n@ParameterizedTest\n   @ArgumentsSource(TestParameter.class)\n   void findAllTest(Map&lt;String, String&gt; allParamaters, List&lt;Element&gt; methodCall) throws JsonProcessingException\n   {\n\n      Element element = Element.builder().identification(&quot;id&quot;).build();\n\n      when(methodCall).thenReturn(List.of(element));\n\n      var expectedResponse = myService.excute(allParamaters);\n\n      //assert....;\n   }\n\n   private static class TestParameter implements ArgumentsProvider\n   {\n      @Override\n      public Stream&lt;? extends Arguments&gt; provideArguments(ExtensionContext context)\n      {\n         return Stream.of(\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_1(....)),\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_2(....)),\n         );\n      }\n   }\n</code></pre>\n<p>i get a NullPointerException of <code>myRepository</code> in <code>provideArguments(ExtensionContext context)</code>.</p>\n"},{"tags":["java","arrays","arraylist","clone","deep-copy"],"comments":[{"owner":{"account_id":8915282,"reputation":4892,"user_id":6654077,"display_name":"Fabien"},"score":0,"creation_date":1502225847,"post_id":45577876,"comment_id":78115255,"body_markdown":"Honestly, this does not look ugly! You&#39;re a prefectionistah ;-)","body":"Honestly, this does not look ugly! You&#39;re a prefectionistah ;-)"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1502226205,"post_id":45577876,"comment_id":78115412,"body_markdown":"do you have java-8?","body":"do you have java-8?"},{"owner":{"account_id":1491409,"reputation":6134,"user_id":1398418,"display_name":"Oleg"},"score":0,"creation_date":1502226431,"post_id":45577876,"comment_id":78115500,"body_markdown":"`.getPlayers().addAll(teams[i].getPlayers())` can save you nested `for`","body":"<code>.getPlayers().addAll(teams[i].getPlayers())</code> can save you nested <code>for</code>"}],"answers":[{"tags":[],"owner":{"account_id":322516,"reputation":121953,"user_id":641955,"accept_rate":72,"display_name":"janos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1502226621,"creation_date":1502226456,"answer_id":45578041,"question_id":45577876,"body_markdown":"Your current solution is equivalent to this simpler form:\r\n\r\n    private Team[] deepClone(Team[] teams) {\r\n        Team[] new_teams = new Team[teams.length];\r\n        for (int i = 0; i &lt; teams.length; i++) {\r\n            new_teams[i] = new Team();\r\n            new_teams[i].getPlayers().addAll(teams[i].getPlayers());\r\n        }\r\n        return new_teams;\r\n    }\r\n\r\nYou can make this more elegant without the loop indexes using streams and lambdas:\r\n\r\n    private Team[] deepClone(Team[] teams) {\r\n        return Stream.of(teams).map(team -&gt; {\r\n            Team newTeam = new Team();\r\n            return newTeam.getPlayers().addAll(team.getPlayers());\r\n        }).toArray(Team[]::new);\r\n    }\r\n\r\n","title":"how to efficiently deep clone an array of objects with an arraylist as a field","body":"<p>Your current solution is equivalent to this simpler form:</p>\n\n<pre><code>private Team[] deepClone(Team[] teams) {\n    Team[] new_teams = new Team[teams.length];\n    for (int i = 0; i &lt; teams.length; i++) {\n        new_teams[i] = new Team();\n        new_teams[i].getPlayers().addAll(teams[i].getPlayers());\n    }\n    return new_teams;\n}\n</code></pre>\n\n<p>You can make this more elegant without the loop indexes using streams and lambdas:</p>\n\n<pre><code>private Team[] deepClone(Team[] teams) {\n    return Stream.of(teams).map(team -&gt; {\n        Team newTeam = new Team();\n        return newTeam.getPlayers().addAll(team.getPlayers());\n    }).toArray(Team[]::new);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3412987,"reputation":415,"user_id":2862544,"display_name":"user2862544"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502243594,"creation_date":1502243594,"answer_id":45580493,"question_id":45577876,"body_markdown":"ideally you should clone Players also if you wanna do perfect deep cloning , we should always write clone method in each class and just call that clone method to get clone, anyways you can go in below way .  \r\n\r\n    class Team {\r\n            //fields contain:\r\n            ArrayList&lt;Player&gt; players;\r\n            public Team clone() {\r\n               Team team = new Team();\r\n               team.players.addAll(players);\r\n               return team;\r\n            }\r\n        }\r\n    \r\n    // ...\r\n    \r\n        Team[] deepCloneTeams(Team[] teams) {\r\n            Team[] newTeams = new Team[teams.length];\r\n            for (int i = 0; i &lt; teams.length; i++)\r\n                newTeams[i] = teams[i].clone();\r\n            return newTeams;\r\n        }","title":"how to efficiently deep clone an array of objects with an arraylist as a field","body":"<p>ideally you should clone Players also if you wanna do perfect deep cloning , we should always write clone method in each class and just call that clone method to get clone, anyways you can go in below way .  </p>\n\n<pre><code>class Team {\n        //fields contain:\n        ArrayList&lt;Player&gt; players;\n        public Team clone() {\n           Team team = new Team();\n           team.players.addAll(players);\n           return team;\n        }\n    }\n\n// ...\n\n    Team[] deepCloneTeams(Team[] teams) {\n        Team[] newTeams = new Team[teams.length];\n        for (int i = 0; i &lt; teams.length; i++)\n            newTeams[i] = teams[i].clone();\n        return newTeams;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1882784,"reputation":21,"user_id":1702587,"display_name":"ferrema"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693558824,"creation_date":1693558227,"answer_id":77021747,"question_id":45577876,"body_markdown":"you&#39;re not technically cloning players, you&#39;re using the same reference of players. \r\nYou should have some method that instances a new player and copies the (immutable) values of player and clones the mutable object attributes of player if you want to actually (deep) clone them.\r\n\r\nSomething along the lines of:\r\n\r\n\r\n    class Player{\r\n        // your attributes and methods\r\n        Player getClone(){\r\n            Player p = new Player();\r\n            // set all immutable attributes and clone all mutable attribute objects\r\n            return p;\r\n        }\r\n    }\r\n    \r\n    class Team {\r\n        //fields contain:\r\n        ArrayList&lt;Player&gt; players;\r\n        public Team clone() {\r\n            Team team = new Team();\r\n            team.players.addAll(players.stream().forEach(p-&gt;p.getClone()).collect(Collectors.toList());\r\n            return team;\r\n        }\r\n    }\r\n\r\nThere&#39;s a nice example here https://howtodoinjava.com/java/collections/arraylist/arraylist-clone-deep-copy/","title":"how to efficiently deep clone an array of objects with an arraylist as a field","body":"<p>you're not technically cloning players, you're using the same reference of players.\nYou should have some method that instances a new player and copies the (immutable) values of player and clones the mutable object attributes of player if you want to actually (deep) clone them.</p>\n<p>Something along the lines of:</p>\n<pre><code>class Player{\n    // your attributes and methods\n    Player getClone(){\n        Player p = new Player();\n        // set all immutable attributes and clone all mutable attribute objects\n        return p;\n    }\n}\n\nclass Team {\n    //fields contain:\n    ArrayList&lt;Player&gt; players;\n    public Team clone() {\n        Team team = new Team();\n        team.players.addAll(players.stream().forEach(p-&gt;p.getClone()).collect(Collectors.toList());\n        return team;\n    }\n}\n</code></pre>\n<p>There's a nice example here <a href=\"https://howtodoinjava.com/java/collections/arraylist/arraylist-clone-deep-copy/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/java/collections/arraylist/arraylist-clone-deep-copy/</a></p>\n"}],"owner":{"account_id":10793876,"reputation":1326,"user_id":8315934,"display_name":"Tobi208"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":45578041,"answer_count":3,"score":1,"last_activity_date":1693558824,"creation_date":1502225726,"question_id":45577876,"body_markdown":"deepest element:\r\n\r\n    class Player {\r\n        //fields contain:\r\n        int value;\r\n    }\r\n\r\ncollected in:\r\n\r\n    class Team {\r\n        //fields contain:\r\n        ArrayList&lt;Player&gt; players;\r\n    }\r\n\r\ncollected in:\r\n\r\n    class Splitter {\r\n        //fields contain:\r\n        Teams[] teams;\r\n    }\r\n\r\nIn a function in `Splitter` I have to clone `teams`. I basically have to clone the array `teams` by cloning each `Team` object, which each contains an ArrayList `players` I have to clone. I *do not* want to clone the Player objects themselves.\r\n\r\nMy solution thus far looks something like this:\r\n\r\n    private Team[] deepClone(Team[] teams) {\r\n        Team[] new_teams = new Team[teams.length];\r\n        for (int i = 0; i &lt; teams.length; i++) {\r\n            new_teams[i] = new Team();\r\n            for (Player player : teams[i].getPlayers())\r\n                new_teams[i].getPlayers().add(player);\r\n        }\r\n        return new_teams;\r\n    }\r\n\r\nanything I could change to make this more efficient or elegant?","title":"how to efficiently deep clone an array of objects with an arraylist as a field","body":"<p>deepest element:</p>\n\n<pre><code>class Player {\n    //fields contain:\n    int value;\n}\n</code></pre>\n\n<p>collected in:</p>\n\n<pre><code>class Team {\n    //fields contain:\n    ArrayList&lt;Player&gt; players;\n}\n</code></pre>\n\n<p>collected in:</p>\n\n<pre><code>class Splitter {\n    //fields contain:\n    Teams[] teams;\n}\n</code></pre>\n\n<p>In a function in <code>Splitter</code> I have to clone <code>teams</code>. I basically have to clone the array <code>teams</code> by cloning each <code>Team</code> object, which each contains an ArrayList <code>players</code> I have to clone. I <em>do not</em> want to clone the Player objects themselves.</p>\n\n<p>My solution thus far looks something like this:</p>\n\n<pre><code>private Team[] deepClone(Team[] teams) {\n    Team[] new_teams = new Team[teams.length];\n    for (int i = 0; i &lt; teams.length; i++) {\n        new_teams[i] = new Team();\n        for (Player player : teams[i].getPlayers())\n            new_teams[i].getPlayers().add(player);\n    }\n    return new_teams;\n}\n</code></pre>\n\n<p>anything I could change to make this more efficient or elegant?</p>\n"},{"tags":["java","jenkins","jelly"],"owner":{"account_id":7713782,"reputation":321,"user_id":5842254,"accept_rate":75,"display_name":"epR8GaYuh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693558446,"creation_date":1693414195,"question_id":77010035,"body_markdown":"I am trying to test Jelly templates of a Jenkins plugin for their HTML rendering without having to rely on using some interactive session or similar.\r\n\r\nThis is my current code:\r\n\r\n```java\r\nimport java.io.OutputStream;\r\nimport java.io.ByteArrayOutputStream;\r\n\r\nimport org.apache.commons.jelly.Script;\r\nimport org.apache.commons.jelly.XMLOutput;\r\nimport org.apache.commons.jelly.test.BaseJellyTest;\r\n\r\nimport org.junit.Test;\r\nimport static org.hamcrest.MatcherAssert.assertThat;\r\nimport static org.hamcrest.CoreMatchers.containsString;\r\n\r\npublic class JellyTest extends BaseJellyTest {\r\n\r\n    public JellyTest() {\r\n        super(&quot;dummy&quot;);\r\n    }\r\n\r\n    public int getKey() {\r\n        return 42;\r\n    }\r\n\r\n    public String getDescription(Object job) {\r\n        return &quot;abc&quot;;\r\n    }\r\n\r\n    @Test\r\n    public void testRendering() throws Exception {\r\n        setUpScript(&quot;/testing.jelly&quot;);\r\n        Script script = getJelly().compileScript();\r\n        getJellyContext().setVariable(&quot;it&quot;, this);\r\n\r\n        OutputStream outputStream = new ByteArrayOutputStream();\r\n        XMLOutput output = XMLOutput.createXMLOutput(outputStream);\r\n        script.run(getJellyContext(), output);\r\n        output.flush();\r\n        String result = outputStream.toString();\r\n\r\n        assertThat(result, containsString(&quot;42&quot;));\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe corresponding `testing.jelly` looks something like this:\r\n\r\n```xml\r\n&lt;?jelly escape-by-default=&#39;true?&gt;\r\n&lt;j:jelly xmlns:j=&quot;jelly:core&quot; xmlns:l=&quot;/lib/layout&quot;&gt;\r\n    &lt;j:set var=&quot;key&quot; value=&quot;${it.getKey()}&quot;/&gt;\r\n    &lt;j:set var=&quot;description&quot; value=&quot;${it.getDescription(job)}&quot;/&gt;\r\n    &lt;p&gt;${key}&lt;/p&gt;\r\n    &lt;j:if test=&quot;${description}&quot;&gt;\r\n        &lt;j:out value=&quot;${description}&quot;/&gt;\r\n    &lt;/j:if&gt;\r\n    &lt;p&gt;${%translationKey}&lt;/p&gt;\r\n&lt;/j:jelly&gt;\r\n```\r\n\r\nThe test will not succeed and fail with\r\n\r\n&gt; org.apache.commons.jelly.JellyException: could not parse Jelly script\r\n\r\ndue to using the Jenkins-specific `${#` syntax for translations. If I remove this section, the error goes away, but this does not allow for Jenkins-specific functionality inside the templates at all.\r\n\r\nExpected result:\r\n\r\n```xml\r\n&lt;p&gt;42&lt;/p&gt;\r\n&lt;p&gt;abc&lt;/p&gt;\r\n```\r\n\r\nWhat is the correct approach to write such tests? How to inject a custom `Job` instance to the template?","title":"Testing Jenkins Jelly template HTML output","body":"<p>I am trying to test Jelly templates of a Jenkins plugin for their HTML rendering without having to rely on using some interactive session or similar.</p>\n<p>This is my current code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.OutputStream;\nimport java.io.ByteArrayOutputStream;\n\nimport org.apache.commons.jelly.Script;\nimport org.apache.commons.jelly.XMLOutput;\nimport org.apache.commons.jelly.test.BaseJellyTest;\n\nimport org.junit.Test;\nimport static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.CoreMatchers.containsString;\n\npublic class JellyTest extends BaseJellyTest {\n\n    public JellyTest() {\n        super(&quot;dummy&quot;);\n    }\n\n    public int getKey() {\n        return 42;\n    }\n\n    public String getDescription(Object job) {\n        return &quot;abc&quot;;\n    }\n\n    @Test\n    public void testRendering() throws Exception {\n        setUpScript(&quot;/testing.jelly&quot;);\n        Script script = getJelly().compileScript();\n        getJellyContext().setVariable(&quot;it&quot;, this);\n\n        OutputStream outputStream = new ByteArrayOutputStream();\n        XMLOutput output = XMLOutput.createXMLOutput(outputStream);\n        script.run(getJellyContext(), output);\n        output.flush();\n        String result = outputStream.toString();\n\n        assertThat(result, containsString(&quot;42&quot;));\n    }\n\n}\n</code></pre>\n<p>The corresponding <code>testing.jelly</code> looks something like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?jelly escape-by-default='true?&gt;\n&lt;j:jelly xmlns:j=&quot;jelly:core&quot; xmlns:l=&quot;/lib/layout&quot;&gt;\n    &lt;j:set var=&quot;key&quot; value=&quot;${it.getKey()}&quot;/&gt;\n    &lt;j:set var=&quot;description&quot; value=&quot;${it.getDescription(job)}&quot;/&gt;\n    &lt;p&gt;${key}&lt;/p&gt;\n    &lt;j:if test=&quot;${description}&quot;&gt;\n        &lt;j:out value=&quot;${description}&quot;/&gt;\n    &lt;/j:if&gt;\n    &lt;p&gt;${%translationKey}&lt;/p&gt;\n&lt;/j:jelly&gt;\n</code></pre>\n<p>The test will not succeed and fail with</p>\n<blockquote>\n<p>org.apache.commons.jelly.JellyException: could not parse Jelly script</p>\n</blockquote>\n<p>due to using the Jenkins-specific <code>${#</code> syntax for translations. If I remove this section, the error goes away, but this does not allow for Jenkins-specific functionality inside the templates at all.</p>\n<p>Expected result:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;p&gt;42&lt;/p&gt;\n&lt;p&gt;abc&lt;/p&gt;\n</code></pre>\n<p>What is the correct approach to write such tests? How to inject a custom <code>Job</code> instance to the template?</p>\n"},{"tags":["java","android","progressdialog"],"comments":[{"owner":{"account_id":6017569,"reputation":3366,"user_id":8007341,"display_name":"Kishan Maurya"},"score":0,"creation_date":1693561968,"post_id":77021766,"comment_id":135780647,"body_markdown":"Actually in updateDialog(), you are setting value for textView which is actually null. No view is initialised yet.  After initialising your ProgressDialog class , you are immediately calling  updateDialog.  ProgressDialog has its own lifecycle. After onCreateDialog, try to set value.","body":"Actually in updateDialog(), you are setting value for textView which is actually null. No view is initialised yet.  After initialising your ProgressDialog class , you are immediately calling  updateDialog.  ProgressDialog has its own lifecycle. After onCreateDialog, try to set value."},{"owner":{"account_id":6017569,"reputation":3366,"user_id":8007341,"display_name":"Kishan Maurya"},"score":0,"creation_date":1693562103,"post_id":77021766,"comment_id":135780672,"body_markdown":"Once dialog is created, then set value.  So store passed value and set after view init.\n\nupdateDialog(String title, @Nullable String message) {\n        this.title = title;\n        this.message = message;\n  }","body":"Once dialog is created, then set value.  So store passed value and set after view init.  updateDialog(String title, @Nullable String message) {         this.title = title;         this.message = message;   }"}],"owner":{"account_id":219520,"reputation":7090,"user_id":476467,"accept_rate":65,"display_name":"thotheolh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693558388,"creation_date":1693558388,"question_id":77021766,"body_markdown":"I am trying to create a customized version of the ProgressDialog as it does not meet my current layout requirements.\r\n\r\nI would like to render a vertically stacked ProgressDialog with the title centered on top of a centered spinner and the centered spinner on top of a message that typically receives updates on percentage of completion in a string format.\r\n\r\nWhile trying to update the ProgressDialog&#39;s title and message, I am returned NullPointerException for the components.\r\n\r\nHow do I attempt to update the title and message of the progress dialog periodically ?\r\n\r\nMy code for the `ProgressDialog.java` class:\r\n\r\n    public class ProgressDialog extends AppCompatDialogFragment {\r\n        public volatile TextView progressDialogMessage = null;\r\n        public volatile TextView progressDialogTitle = null;\r\n        private View view = null;\r\n        private volatile AlertDialog aldialogInst = null;\r\n        private String title = &quot;&quot;;\r\n        private String message = &quot;&quot;;\r\n    \r\n        public ProgressDialog() {\r\n        }\r\n    \r\n        public ProgressDialog(String title, String message) {\r\n            this.title = title;\r\n            this.message = message;\r\n        }\r\n    \r\n        @Override\r\n        public AlertDialog onCreateDialog(@Nullable Bundle savedInstanceState) {\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.CustomAlertDialog);\r\n            LayoutInflater inflater = getActivity().getLayoutInflater();\r\n            view = inflater.inflate(R.layout.activity_progress_dialog, null);\r\n            progressDialogMessage = view.findViewById(R.id.progressDialogMessage);\r\n            progressDialogTitle = view.findViewById(R.id.progressDialogTitle);\r\n    \r\n            System.out.println(&quot;[INF] ProgressDialog :: onCreate :: started ...&quot;);\r\n    \r\n            if (progressDialogTitle == null) {\r\n                System.out.println(&quot;DIALOG TITLE IS NULL !!!&quot;);\r\n            }\r\n    \r\n            builder.setView(view).setTitle(null);\r\n    \r\n            progressDialogTitle.setText(this.title);\r\n            progressDialogMessage.setText(this.message);\r\n    \r\n            aldialogInst = builder.create();\r\n    \r\n            return aldialogInst;\r\n        }\r\n    \r\n        @Override\r\n        public void onAttach(Context context) {\r\n            super.onAttach(context);\r\n            System.out.println(&quot;[INF] ProgressDialog :: onAttach :: started ...&quot;);\r\n        }\r\n    \r\n        public void updateDialog(String title, @Nullable String message) {\r\n            progressDialogTitle.setText(title);\r\n            progressDialogMessage.setText(message);\r\n            progressDialogTitle.invalidate();\r\n            progressDialogMessage.invalidate();\r\n        }\r\n    \r\n        public boolean isReady() {\r\n            if (aldialogInst != null) {\r\n                return true;\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    \r\n        public AlertDialog getAlertDialog() {\r\n            return aldialogInst;\r\n        }\r\n    }\r\n\r\nThe XML for layout `activity_progress_dialog.xml`:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/progressDialogTitle&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:layout_marginTop=&quot;32dp&quot;\r\n            android:layout_marginEnd=&quot;16dp&quot;\r\n            android:fontFamily=&quot;@font/lexend_deca_bold&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:textColor=&quot;@color/ventac_black&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/progressDialogMessage&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:layout_marginTop=&quot;32dp&quot;\r\n            android:layout_marginEnd=&quot;16dp&quot;\r\n            android:fontFamily=&quot;@font/lexend_deca_light&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:textColor=&quot;@color/ventac_gray_1&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogSpinner&quot; /&gt;\r\n    \r\n        &lt;ProgressBar\r\n            android:id=&quot;@+id/progressDialogSpinner&quot;\r\n            style=&quot;?android:attr/progressBarStyleLarge&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;32dp&quot;\r\n            android:indeterminateDrawable=&quot;@drawable/spinner&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogTitle&quot; /&gt;\r\n    \r\n        &lt;Space\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;32dp&quot;\r\n            android:layout_marginStart=&quot;157dp&quot;\r\n            android:layout_marginEnd=&quot;218dp&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogMessage&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\nThe `MainActivity.java` class:\r\n\r\n    package com.xxx.yyy.ui;\r\n    \r\n    import androidx.activity.OnBackPressedCallback;\r\n    import androidx.annotation.RequiresApi;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.lifecycle.LiveData;\r\n    import androidx.work.Operation;\r\n    import androidx.work.PeriodicWorkRequest;\r\n    import androidx.work.WorkInfo;\r\n    import androidx.work.WorkManager;\r\n    \r\n    import android.app.ActivityManager;\r\n    import android.app.ApplicationExitInfo;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.graphics.drawable.Drawable;\r\n    import android.hardware.usb.UsbDevice;\r\n    import android.os.Build;\r\n    import android.os.Bundle;\r\n    import android.view.Gravity;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.security.Security;\r\n    import java.util.List;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private static Context myContext = null;\r\n    \r\n        @RequiresApi(api = Build.VERSION_CODES.TIRAMISU)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);    \r\n            myContext = this;\r\n            System.out.println(&quot;===== SHOWING CUSTOM NOTIFICATION DIALOG START =====&quot;);\r\n    \r\n            ProgressDialog dialog = new ProgressDialog(&quot;Downloading Provenance&quot;, &quot;0%&quot;);\r\n            dialog.show(((AppCompatActivity) myContext).getSupportFragmentManager(), &quot;progdialog&quot;);\r\n            dialog.updateDialog(&quot;HELLO&quot;, &quot;100%&quot;);\r\n            System.out.println(&quot;===== SHOWING CUSTOM NOTIFICATION DIALOG END =====&quot;);\r\n        }\r\n    \r\n        @Override\r\n        protected void onResume() {\r\n            super.onResume();\r\n        }\r\n    \r\n        @Override\r\n        protected void onStop() {\r\n            super.onStop();\r\n        }\r\n    \r\n        @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n        }\r\n    }\r\n\r\nThe error message:\r\n\r\n    Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.TextView.setText(java.lang.CharSequence)&#39; on a null object reference\r\n    at com.watchlink.keepertag.ui.ProgressDialog.updateDialog(ProgressDialog.java:69)\r\n    at com.watchlink.keepertag.ui.MainActivity.onCreate(MainActivity.java:45)\r\n    at android.app.Activity.performCreate(Activity.java:8591)\r\n    at android.app.Activity.performCreate(Activity.java:8570)\r\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1384)\r\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:4150)","title":"Custom Progress Dialog not able to access components","body":"<p>I am trying to create a customized version of the ProgressDialog as it does not meet my current layout requirements.</p>\n<p>I would like to render a vertically stacked ProgressDialog with the title centered on top of a centered spinner and the centered spinner on top of a message that typically receives updates on percentage of completion in a string format.</p>\n<p>While trying to update the ProgressDialog's title and message, I am returned NullPointerException for the components.</p>\n<p>How do I attempt to update the title and message of the progress dialog periodically ?</p>\n<p>My code for the <code>ProgressDialog.java</code> class:</p>\n<pre><code>public class ProgressDialog extends AppCompatDialogFragment {\n    public volatile TextView progressDialogMessage = null;\n    public volatile TextView progressDialogTitle = null;\n    private View view = null;\n    private volatile AlertDialog aldialogInst = null;\n    private String title = &quot;&quot;;\n    private String message = &quot;&quot;;\n\n    public ProgressDialog() {\n    }\n\n    public ProgressDialog(String title, String message) {\n        this.title = title;\n        this.message = message;\n    }\n\n    @Override\n    public AlertDialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.CustomAlertDialog);\n        LayoutInflater inflater = getActivity().getLayoutInflater();\n        view = inflater.inflate(R.layout.activity_progress_dialog, null);\n        progressDialogMessage = view.findViewById(R.id.progressDialogMessage);\n        progressDialogTitle = view.findViewById(R.id.progressDialogTitle);\n\n        System.out.println(&quot;[INF] ProgressDialog :: onCreate :: started ...&quot;);\n\n        if (progressDialogTitle == null) {\n            System.out.println(&quot;DIALOG TITLE IS NULL !!!&quot;);\n        }\n\n        builder.setView(view).setTitle(null);\n\n        progressDialogTitle.setText(this.title);\n        progressDialogMessage.setText(this.message);\n\n        aldialogInst = builder.create();\n\n        return aldialogInst;\n    }\n\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        System.out.println(&quot;[INF] ProgressDialog :: onAttach :: started ...&quot;);\n    }\n\n    public void updateDialog(String title, @Nullable String message) {\n        progressDialogTitle.setText(title);\n        progressDialogMessage.setText(message);\n        progressDialogTitle.invalidate();\n        progressDialogMessage.invalidate();\n    }\n\n    public boolean isReady() {\n        if (aldialogInst != null) {\n            return true;\n        }\n\n        return false;\n    }\n\n    public AlertDialog getAlertDialog() {\n        return aldialogInst;\n    }\n}\n</code></pre>\n<p>The XML for layout <code>activity_progress_dialog.xml</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/progressDialogTitle&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginStart=&quot;16dp&quot;\n        android:layout_marginTop=&quot;32dp&quot;\n        android:layout_marginEnd=&quot;16dp&quot;\n        android:fontFamily=&quot;@font/lexend_deca_bold&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textColor=&quot;@color/ventac_black&quot;\n        android:textSize=&quot;20sp&quot;\n        android:textStyle=&quot;bold&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/progressDialogMessage&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginStart=&quot;16dp&quot;\n        android:layout_marginTop=&quot;32dp&quot;\n        android:layout_marginEnd=&quot;16dp&quot;\n        android:fontFamily=&quot;@font/lexend_deca_light&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textColor=&quot;@color/ventac_gray_1&quot;\n        android:textSize=&quot;18sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogSpinner&quot; /&gt;\n\n    &lt;ProgressBar\n        android:id=&quot;@+id/progressDialogSpinner&quot;\n        style=&quot;?android:attr/progressBarStyleLarge&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;32dp&quot;\n        android:indeterminateDrawable=&quot;@drawable/spinner&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogTitle&quot; /&gt;\n\n    &lt;Space\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;32dp&quot;\n        android:layout_marginStart=&quot;157dp&quot;\n        android:layout_marginEnd=&quot;218dp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/progressDialogMessage&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>The <code>MainActivity.java</code> class:</p>\n<pre><code>package com.xxx.yyy.ui;\n\nimport androidx.activity.OnBackPressedCallback;\nimport androidx.annotation.RequiresApi;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.lifecycle.LiveData;\nimport androidx.work.Operation;\nimport androidx.work.PeriodicWorkRequest;\nimport androidx.work.WorkInfo;\nimport androidx.work.WorkManager;\n\nimport android.app.ActivityManager;\nimport android.app.ApplicationExitInfo;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.graphics.drawable.Drawable;\nimport android.hardware.usb.UsbDevice;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.view.Gravity;\nimport android.view.View;\nimport android.widget.Button;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.security.Security;\nimport java.util.List;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.TimeUnit;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private static Context myContext = null;\n\n    @RequiresApi(api = Build.VERSION_CODES.TIRAMISU)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);    \n        myContext = this;\n        System.out.println(&quot;===== SHOWING CUSTOM NOTIFICATION DIALOG START =====&quot;);\n\n        ProgressDialog dialog = new ProgressDialog(&quot;Downloading Provenance&quot;, &quot;0%&quot;);\n        dialog.show(((AppCompatActivity) myContext).getSupportFragmentManager(), &quot;progdialog&quot;);\n        dialog.updateDialog(&quot;HELLO&quot;, &quot;100%&quot;);\n        System.out.println(&quot;===== SHOWING CUSTOM NOTIFICATION DIALOG END =====&quot;);\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n    }\n}\n</code></pre>\n<p>The error message:</p>\n<pre><code>Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.TextView.setText(java.lang.CharSequence)' on a null object reference\nat com.watchlink.keepertag.ui.ProgressDialog.updateDialog(ProgressDialog.java:69)\nat com.watchlink.keepertag.ui.MainActivity.onCreate(MainActivity.java:45)\nat android.app.Activity.performCreate(Activity.java:8591)\nat android.app.Activity.performCreate(Activity.java:8570)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1384)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:4150)\n</code></pre>\n"},{"tags":["java","spring","windows-authentication","spring-webclient","ntlm-authentication"],"answers":[{"comments":[{"owner":{"account_id":5644474,"reputation":451,"user_id":4467091,"display_name":"Oleg Maksymuk"},"score":0,"creation_date":1693517643,"post_id":74691339,"comment_id":135775677,"body_markdown":"Great answer!!!\nDo you know why it does not work without .publishOn(Schedulers.single()) ??\nis it something related to next exchange function and how it works ?","body":"Great answer!!! Do you know why it does not work without .publishOn(Schedulers.single()) ?? is it something related to next exchange function and how it works ?"}],"tags":[],"owner":{"account_id":9238932,"reputation":69,"user_id":6862684,"display_name":"spCH"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670267172,"creation_date":1670257577,"answer_id":74691339,"question_id":74575496,"body_markdown":"I have recently been looking into NTLM for Spring WebClient. First I tried it with Apache HttpClient, but got no response on request. I didn&#39;t investigate the cause further...\r\n\r\nSince I wanted to use the netty HttpClient anyway, I implemented my own `ExchangeFilterFunction` using the JCIFS implementation (the same as Apache HttpClient uses). Similar to that:\r\n\r\n```java\r\npublic final class NtlmAuthorizedClientExchangeFilterFunction implements ExchangeFilterFunction {\r\n\r\n    private final NtlmPasswordAuthentication ntlmPasswordAuthentication;\r\n    private final boolean doSigning;\r\n\r\n    public NtlmAuthorizedClientExchangeFilterFunction(String domain, String username, String password, boolean doSigning, int lmCompatibility) {\r\n        this.ntlmPasswordAuthentication = new NtlmPasswordAuthentication(domain, username, password);\r\n        this.doSigning = doSigning;\r\n        System.setProperty(&quot;jcifs.smb.lmCompatibility&quot;, Integer.toString(lmCompatibility));\r\n    }\r\n\r\n\r\n    @Override\r\n    public Mono&lt;ClientResponse&gt; filter(final ClientRequest request, final ExchangeFunction next) {\r\n        NtlmContext ntlmContext = new NtlmContext(ntlmPasswordAuthentication, doSigning);\r\n        try {\r\n            return next.exchange(addNtlmHeader(request, ntlmContext.initSecContext(new byte[0], 0, 0)))\r\n                .publishOn(Schedulers.single()) // this is necessary to make sure that the requests are processed sequential and thus http keep alive is working\r\n                .flatMap(clientResponse -&gt; {\r\n                    List&lt;String&gt; ntlmAuthHeaders = getNtlmAuthHeaders(clientResponse);\r\n                    if (ntlmAuthHeaders.isEmpty()) return Mono.error(...);\r\n                    String ntlmHeader = ntlmAuthHeaders.get(0);\r\n                    if (ntlmHeader.length() &lt;= 5) return Mono.error(...);\r\n                    try {\r\n                        byte[] type2 = Base64.decode(ntlmHeader.substring(5));\r\n                        return next.exchange(addNtlmHeader(request, ntlmContext.initSecContext(type2, 0, type2.length)));\r\n                    } catch (IOException e) {\r\n                        return Mono.error(...);\r\n                    }\r\n                });\r\n        } catch (SmbException e) {\r\n            return Mono.error(...);\r\n        }\r\n    }\r\n\r\n    @NotNull\r\n    private static List&lt;String&gt; getNtlmAuthHeaders(ClientResponse clientResponse) {\r\n        List&lt;String&gt; wwwAuthHeaders = clientResponse.headers().header(HttpHeaders.WWW_AUTHENTICATE);\r\n        List&lt;String&gt; ntlmAuthHeaders = wwwAuthHeaders.stream().filter(h -&gt; h.startsWith(&quot;NTLM&quot;)).sorted(Comparator.comparingInt(String::length)).collect(Collectors.toList());\r\n        return ntlmAuthHeaders;\r\n    }\r\n\r\n    private ClientRequest addNtlmHeader(ClientRequest clientRequest, byte[] ntlmPayload) {\r\n        ClientRequest.Builder request = ClientRequest\r\n            .from(clientRequest)\r\n            .header(HttpHeaders.AUTHORIZATION, &quot;NTLM &quot;.concat(Base64.encode(ntlmPayload)));\r\n        return request.build();\r\n    }\r\n```\r\n\r\nI don&#39;t have an answer to your second question. My system was a Linux.","title":"Spring WebClient Windows NTLM Authentication","body":"<p>I have recently been looking into NTLM for Spring WebClient. First I tried it with Apache HttpClient, but got no response on request. I didn't investigate the cause further...</p>\n<p>Since I wanted to use the netty HttpClient anyway, I implemented my own <code>ExchangeFilterFunction</code> using the JCIFS implementation (the same as Apache HttpClient uses). Similar to that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class NtlmAuthorizedClientExchangeFilterFunction implements ExchangeFilterFunction {\n\n    private final NtlmPasswordAuthentication ntlmPasswordAuthentication;\n    private final boolean doSigning;\n\n    public NtlmAuthorizedClientExchangeFilterFunction(String domain, String username, String password, boolean doSigning, int lmCompatibility) {\n        this.ntlmPasswordAuthentication = new NtlmPasswordAuthentication(domain, username, password);\n        this.doSigning = doSigning;\n        System.setProperty(&quot;jcifs.smb.lmCompatibility&quot;, Integer.toString(lmCompatibility));\n    }\n\n\n    @Override\n    public Mono&lt;ClientResponse&gt; filter(final ClientRequest request, final ExchangeFunction next) {\n        NtlmContext ntlmContext = new NtlmContext(ntlmPasswordAuthentication, doSigning);\n        try {\n            return next.exchange(addNtlmHeader(request, ntlmContext.initSecContext(new byte[0], 0, 0)))\n                .publishOn(Schedulers.single()) // this is necessary to make sure that the requests are processed sequential and thus http keep alive is working\n                .flatMap(clientResponse -&gt; {\n                    List&lt;String&gt; ntlmAuthHeaders = getNtlmAuthHeaders(clientResponse);\n                    if (ntlmAuthHeaders.isEmpty()) return Mono.error(...);\n                    String ntlmHeader = ntlmAuthHeaders.get(0);\n                    if (ntlmHeader.length() &lt;= 5) return Mono.error(...);\n                    try {\n                        byte[] type2 = Base64.decode(ntlmHeader.substring(5));\n                        return next.exchange(addNtlmHeader(request, ntlmContext.initSecContext(type2, 0, type2.length)));\n                    } catch (IOException e) {\n                        return Mono.error(...);\n                    }\n                });\n        } catch (SmbException e) {\n            return Mono.error(...);\n        }\n    }\n\n    @NotNull\n    private static List&lt;String&gt; getNtlmAuthHeaders(ClientResponse clientResponse) {\n        List&lt;String&gt; wwwAuthHeaders = clientResponse.headers().header(HttpHeaders.WWW_AUTHENTICATE);\n        List&lt;String&gt; ntlmAuthHeaders = wwwAuthHeaders.stream().filter(h -&gt; h.startsWith(&quot;NTLM&quot;)).sorted(Comparator.comparingInt(String::length)).collect(Collectors.toList());\n        return ntlmAuthHeaders;\n    }\n\n    private ClientRequest addNtlmHeader(ClientRequest clientRequest, byte[] ntlmPayload) {\n        ClientRequest.Builder request = ClientRequest\n            .from(clientRequest)\n            .header(HttpHeaders.AUTHORIZATION, &quot;NTLM &quot;.concat(Base64.encode(ntlmPayload)));\n        return request.build();\n    }\n</code></pre>\n<p>I don't have an answer to your second question. My system was a Linux.</p>\n"},{"tags":[],"owner":{"account_id":5644474,"reputation":451,"user_id":4467091,"display_name":"Oleg Maksymuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693556552,"creation_date":1693556552,"answer_id":77021558,"question_id":74575496,"body_markdown":"```\r\nwebClientBuilder.filter((request, next) -&gt; {\r\n\r\n            final NtlmPasswordAuthentication ntlmPasswordAuthentication =\r\n                    new NtlmPasswordAuthentication(\r\n                            domain,\r\n                            username,\r\n                            password);\r\n            final NtlmContext ctxt = new NtlmContext(ntlmPasswordAuthentication, true);\r\n\r\n            final byte[] token1 = ntlm(ctxt, new byte[0]);\r\n\r\n            final ClientRequest ntlmChallenge = ClientRequest.from(request)\r\n                    .header(HttpHeaders.AUTHORIZATION, NTLM_PREFIX.concat(Base64.encode(token1)))\r\n                    .build();\r\n\r\n\r\n            final ExchangeFunction exchangeFunction = ExchangeFunctions.create(singleConnKeepAliveConnector());\r\n\r\n            return exchangeFunction\r\n                    .exchange(ntlmChallenge)\r\n                    .flatMap(clientResponse -&gt; {\r\n\r\n                        byte[] token2 = ntlm(ctxt, Base64.decode(extractNtlmHeaderValue(clientResponse)));\r\n\r\n                        return exchangeFunction.exchange(ClientRequest.from(request)\r\n                                .header(HttpHeaders.AUTHORIZATION, NTLM_PREFIX.concat(Base64.encode(token2)))\r\n                                .build());\r\n                    });\r\n        });\r\n```\r\n\r\n---\r\n\r\n```\r\nprivate byte[] ntlm(NtlmContext ctxt, byte[] token) {\r\n        try {\r\n            return ctxt.initSecContext(token, 0, token.length);\r\n        } catch (SmbException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\n---\r\n\r\n```\r\nprivate String extractNtlmHeaderValue(ClientResponse response) {\r\n        return response\r\n                .headers()\r\n                .header(HttpHeaders.WWW_AUTHENTICATE).get(0).replace(NTLM_PREFIX, &quot;&quot;);\r\n         \r\n    }\r\n```\r\n---\r\n```\r\n    private ClientHttpConnector singleConnKeepAliveConnector() {\r\n\r\n        final HttpClient httpClient = HttpClient.create(\r\n                ConnectionProvider.builder(&quot;single-conn&quot;).maxConnections(1).build());\r\n\r\n        return new ReactorClientHttpConnector(httpClient);\r\n    }\r\n```\r\n\r\n---\r\n```\r\nNTLM_PREFIX=&quot;NTLM &quot;\r\n```","title":"Spring WebClient Windows NTLM Authentication","body":"<pre><code>webClientBuilder.filter((request, next) -&gt; {\n\n            final NtlmPasswordAuthentication ntlmPasswordAuthentication =\n                    new NtlmPasswordAuthentication(\n                            domain,\n                            username,\n                            password);\n            final NtlmContext ctxt = new NtlmContext(ntlmPasswordAuthentication, true);\n\n            final byte[] token1 = ntlm(ctxt, new byte[0]);\n\n            final ClientRequest ntlmChallenge = ClientRequest.from(request)\n                    .header(HttpHeaders.AUTHORIZATION, NTLM_PREFIX.concat(Base64.encode(token1)))\n                    .build();\n\n\n            final ExchangeFunction exchangeFunction = ExchangeFunctions.create(singleConnKeepAliveConnector());\n\n            return exchangeFunction\n                    .exchange(ntlmChallenge)\n                    .flatMap(clientResponse -&gt; {\n\n                        byte[] token2 = ntlm(ctxt, Base64.decode(extractNtlmHeaderValue(clientResponse)));\n\n                        return exchangeFunction.exchange(ClientRequest.from(request)\n                                .header(HttpHeaders.AUTHORIZATION, NTLM_PREFIX.concat(Base64.encode(token2)))\n                                .build());\n                    });\n        });\n</code></pre>\n<hr />\n<pre><code>private byte[] ntlm(NtlmContext ctxt, byte[] token) {\n        try {\n            return ctxt.initSecContext(token, 0, token.length);\n        } catch (SmbException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<hr />\n<pre><code>private String extractNtlmHeaderValue(ClientResponse response) {\n        return response\n                .headers()\n                .header(HttpHeaders.WWW_AUTHENTICATE).get(0).replace(NTLM_PREFIX, &quot;&quot;);\n         \n    }\n</code></pre>\n<hr />\n<pre><code>    private ClientHttpConnector singleConnKeepAliveConnector() {\n\n        final HttpClient httpClient = HttpClient.create(\n                ConnectionProvider.builder(&quot;single-conn&quot;).maxConnections(1).build());\n\n        return new ReactorClientHttpConnector(httpClient);\n    }\n</code></pre>\n<hr />\n<pre><code>NTLM_PREFIX=&quot;NTLM &quot;\n</code></pre>\n"}],"owner":{"account_id":55837,"reputation":3854,"user_id":167304,"accept_rate":33,"display_name":"Jason"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":772,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693556552,"creation_date":1669393154,"question_id":74575496,"body_markdown":"I can&#39;t find any good sample or doc that explains this clearly.  I can successfully authenticate with the (older) RestTemplate:\r\n\r\n    HttpClientBuilder httpClient = HttpClients.custom();\r\n    BasicCredentialsProvider provider = new BasicCredentialsProvider();\r\n    Credentials cred = new NTCredentials(&quot;my-user&quot;, &quot;my-password&quot;, null, &quot;my-domain&quot;);\r\n    \r\n    provider.setCredentials(AuthScope.ANY, cred);\r\n    httpClient.setDefaultCredentialsProvider(provider);\r\n    \r\n    HttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\r\n    requestFactory.httpClient = httpClient.build();\r\n    \r\n    RestTemplate restTemplate = new RestTemplate(request);\r\n    \r\n    restTemplate.getForEntity(&quot;https://my.url.com&quot;, String.class)\r\n\r\nI haven&#39;t been able to find a way to pass `NTCredentials` (or `Credentials`) to WebClient, have tried\r\n\r\n    WebClient client = WebClient.builder()\r\n    .filter(ExchangeFilterFunctions.basicAuthentication(&quot;user&quot;, &quot;password&quot;))\r\n    .build();\r\n\r\nalso\r\n\r\n    WebClient client = WebClient.builder().build();\r\n    client.get().headers(h -&gt; h.setBasicAuth(&quot;user&quot;, &quot;password&quot;))...\r\n\r\nBut neither approach worked with WebClient\r\n\r\n**Questions:**\r\n\r\n 1. How do you do Windows/NTLM authentication with Spring WebClient?\r\n 2. Is there anyway I can get NTLM or Windows auth working without\r\n    supplying user/password when running in Windows using currrent user\r\n    context?","title":"Spring WebClient Windows NTLM Authentication","body":"<p>I can't find any good sample or doc that explains this clearly.  I can successfully authenticate with the (older) RestTemplate:</p>\n<pre><code>HttpClientBuilder httpClient = HttpClients.custom();\nBasicCredentialsProvider provider = new BasicCredentialsProvider();\nCredentials cred = new NTCredentials(&quot;my-user&quot;, &quot;my-password&quot;, null, &quot;my-domain&quot;);\n\nprovider.setCredentials(AuthScope.ANY, cred);\nhttpClient.setDefaultCredentialsProvider(provider);\n\nHttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\nrequestFactory.httpClient = httpClient.build();\n\nRestTemplate restTemplate = new RestTemplate(request);\n\nrestTemplate.getForEntity(&quot;https://my.url.com&quot;, String.class)\n</code></pre>\n<p>I haven't been able to find a way to pass <code>NTCredentials</code> (or <code>Credentials</code>) to WebClient, have tried</p>\n<pre><code>WebClient client = WebClient.builder()\n.filter(ExchangeFilterFunctions.basicAuthentication(&quot;user&quot;, &quot;password&quot;))\n.build();\n</code></pre>\n<p>also</p>\n<pre><code>WebClient client = WebClient.builder().build();\nclient.get().headers(h -&gt; h.setBasicAuth(&quot;user&quot;, &quot;password&quot;))...\n</code></pre>\n<p>But neither approach worked with WebClient</p>\n<p><strong>Questions:</strong></p>\n<ol>\n<li>How do you do Windows/NTLM authentication with Spring WebClient?</li>\n<li>Is there anyway I can get NTLM or Windows auth working without\nsupplying user/password when running in Windows using currrent user\ncontext?</li>\n</ol>\n"},{"tags":["java","eclipse","maven","selenium-webdriver"],"comments":[{"owner":{"account_id":29343325,"reputation":1,"user_id":22482256,"display_name":"Bhumika Sonawane"},"score":0,"creation_date":1693555872,"post_id":77021486,"comment_id":135779439,"body_markdown":"I have downloaded chrome version of 116","body":"I have downloaded chrome version of 116"},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":1,"creation_date":1693556034,"post_id":77021486,"comment_id":135779465,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Instead, [edit] your question to include the code as properly formatted text.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead, <a href=\"https://stackoverflow.com/posts/77021486/edit\">edit</a> your question to include the code as properly formatted text."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1693556432,"post_id":77021486,"comment_id":135779534,"body_markdown":"No errors there, only warnings","body":"No errors there, only warnings"},{"owner":{"account_id":29343325,"reputation":1,"user_id":22482256,"display_name":"Bhumika Sonawane"},"score":0,"creation_date":1693557346,"post_id":77021486,"comment_id":135779715,"body_markdown":"Yes definitely I am remember that thing at next time  @seenukarthi","body":"Yes definitely I am remember that thing at next time  @seenukarthi"}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693556334,"creation_date":1693556334,"answer_id":77021543,"question_id":77021486,"body_markdown":"Assuming you are using selenium `v4.11.0`, refer the below screenshot. Selenium supports only up to `CDP 115`. This is the reason for the WARN which you are seeing in your console. Having said that, it is just a warning and not error, it will not stop your code from running.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p1a5E.png\r\n\r\nSource : https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG","title":"unable to find an exact match of CDP version 116","body":"<p>Assuming you are using selenium <code>v4.11.0</code>, refer the below screenshot. Selenium supports only up to <code>CDP 115</code>. This is the reason for the WARN which you are seeing in your console. Having said that, it is just a warning and not error, it will not stop your code from running.</p>\n<p><a href=\"https://i.stack.imgur.com/p1a5E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p1a5E.png\" alt=\"enter image description here\" /></a></p>\n<p>Source : <a href=\"https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG</a></p>\n"}],"owner":{"account_id":29343325,"reputation":1,"user_id":22482256,"display_name":"Bhumika Sonawane"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":297,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1693556443,"creation_date":1693555768,"question_id":77021486,"body_markdown":"Console log:\r\n````\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nSep 01, 2023 1:10:54 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\r\nWARNING: Unable to find an exact match for CDP version 116, so returning the closest version found: 115\r\n````\r\n\r\nCode:\r\n\r\n![enter image description here](https://i.stack.imgur.com/XFqS5.png)","title":"unable to find an exact match of CDP version 116","body":"<p>Console log:</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nSep 01, 2023 1:10:54 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\nWARNING: Unable to find an exact match for CDP version 116, so returning the closest version found: 115\n</code></pre>\n<p>Code:</p>\n<p><img src=\"https://i.stack.imgur.com/XFqS5.png\" alt=\"enter image description here\" /></p>\n"},{"tags":["java","rest","jax-rs","resteasy"],"answers":[{"tags":[],"owner":{"account_id":4444082,"reputation":122,"user_id":3617903,"accept_rate":83,"display_name":"fbutter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1431981107,"creation_date":1431981107,"answer_id":30312306,"question_id":30124365,"body_markdown":"The best solution i found was to use a Filter to process the incoming response header.\r\n\r\n    public class HeaderFilter implements ClientResponseFilter {\r\n\r\n\r\n\t  private Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\r\n\t\r\n\t  private List&lt;String&gt; headerFilter = new ArrayList&lt;&gt;();\r\n\t\r\n\r\n\t  public final void addHeaderFilter(final String header) {\r\n\t\t\r\n\t\t  headerFilter.add(header);\r\n\t  }\r\n\r\n\t  public final void removeHeaderFilter(final String header) {\r\n\t\r\n\t\t  headerFilter.remove(header);\r\n\t  }\r\n\r\n\t  public final String getHeader(final String header) {\r\n\t\t\r\n\t\t  return headers.get(header);\r\n\t  }\r\n\t\r\n\t  @Override\r\n\t  public final void filter(final ClientRequestContext requestContext,\r\n\t\t\t  final ClientResponseContext responseContext) \r\n\t\t\t\t\t\t\t\t\t\t  throws IOException {\r\n\r\n\t\t  headers = new HashMap&lt;&gt;();\r\n\t\t\r\n\t\t  for (String headerToLookFor : headerFilter) {\r\n\t\t\t\r\n\t\t\t  String header = responseContext.getHeaderString(headerToLookFor);\r\n\t\t\t\r\n\t\t\t  if (header != null) {\r\n\t\t\t\t\r\n\t\t\t\t  headers.put(headerToLookFor, header);\r\n\t\t\t  } else {\r\n\t\t\t\t\r\n\t\t\t\t  ...\r\n\t\t\t  }\r\n\t\t  }\r\n\t  }\r\n    }","title":"How to get the response header in a RestEasy client?","body":"<p>The best solution i found was to use a Filter to process the incoming response header.</p>\n\n<pre><code>public class HeaderFilter implements ClientResponseFilter {\n\n\n  private Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\n\n  private List&lt;String&gt; headerFilter = new ArrayList&lt;&gt;();\n\n\n  public final void addHeaderFilter(final String header) {\n\n      headerFilter.add(header);\n  }\n\n  public final void removeHeaderFilter(final String header) {\n\n      headerFilter.remove(header);\n  }\n\n  public final String getHeader(final String header) {\n\n      return headers.get(header);\n  }\n\n  @Override\n  public final void filter(final ClientRequestContext requestContext,\n          final ClientResponseContext responseContext) \n                                      throws IOException {\n\n      headers = new HashMap&lt;&gt;();\n\n      for (String headerToLookFor : headerFilter) {\n\n          String header = responseContext.getHeaderString(headerToLookFor);\n\n          if (header != null) {\n\n              headers.put(headerToLookFor, header);\n          } else {\n\n              ...\n          }\n      }\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22084389,"reputation":211938,"user_id":16343464,"display_name":"mozway"},"score":2,"creation_date":1693554299,"post_id":77021321,"comment_id":135779171,"body_markdown":"You might want to [add context around the link](//meta.stackexchange.com/a/8259) so your fellow users will have some idea what it is and why it is there, then quote the most relevant part of the page you are linking to in case the target page is unavailable. [Answers that are little more than a link may be deleted.](/help/deleted-answers)","body":"You might want to <a href=\"//meta.stackexchange.com/a/8259\">add context around the link</a> so your fellow users will have some idea what it is and why it is there, then quote the most relevant part of the page you are linking to in case the target page is unavailable. <a href=\"/help/deleted-answers\">Answers that are little more than a link may be deleted.</a>"}],"tags":[],"owner":{"account_id":20441512,"reputation":1,"user_id":14998258,"display_name":"ksu"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693555600,"creation_date":1693554115,"answer_id":77021321,"question_id":30124365,"body_markdown":"@ResposeObject can be used for it. It marks interface which will give access to the response. Using annotaions like @Body, @HeaderParam, @Status one can get those parameters from the response. See the examples below.\r\n\r\n&gt; a client proxy method returns an interface that represents the information contained in a javax.ws.rs.core.Response. Such an interface must be annotated with @ResponseObject from package org.jboss.resteasy.annotations, and its methods may be further annotated with @Body, @LinkHeaderParam, and @Status from the same package, as well as javax.ws.rs.HeaderParam.\r\n\r\nThere are some more example in documentation, see here: [Link for the RestEasy documentation][1]\r\n\r\n\r\nMy example:\r\n\r\n        @ResponseObject\r\n        public interface MyResponseObject {\r\n        \r\n            @HeaderParam(&quot;my_header_name&quot;)\r\n            String myHeader();\r\n        \r\n            @Body\r\n            MyBody body();\r\n        }\r\n        \r\n        public class MyBody {        \r\n         List&lt;MyDto&gt; value;\r\n        }\r\n    \r\n    \r\n        @Path(&quot;test&quot;)\r\n        public interface TestClient {\r\n       \r\n           @GET\r\n           MyResponseObject get();\r\n        }\r\n\r\n\r\n  [1]: https://docs.jboss.org/resteasy/docs/3.5.1.Final/userguide/html_single/index.html","title":"How to get the response header in a RestEasy client?","body":"<p>@ResposeObject can be used for it. It marks interface which will give access to the response. Using annotaions like @Body, @HeaderParam, @Status one can get those parameters from the response. See the examples below.</p>\n<blockquote>\n<p>a client proxy method returns an interface that represents the information contained in a javax.ws.rs.core.Response. Such an interface must be annotated with @ResponseObject from package org.jboss.resteasy.annotations, and its methods may be further annotated with @Body, @LinkHeaderParam, and @Status from the same package, as well as javax.ws.rs.HeaderParam.</p>\n</blockquote>\n<p>There are some more example in documentation, see here: <a href=\"https://docs.jboss.org/resteasy/docs/3.5.1.Final/userguide/html_single/index.html\" rel=\"nofollow noreferrer\">Link for the RestEasy documentation</a></p>\n<p>My example:</p>\n<pre><code>    @ResponseObject\n    public interface MyResponseObject {\n    \n        @HeaderParam(&quot;my_header_name&quot;)\n        String myHeader();\n    \n        @Body\n        MyBody body();\n    }\n    \n    public class MyBody {        \n     List&lt;MyDto&gt; value;\n    }\n\n\n    @Path(&quot;test&quot;)\n    public interface TestClient {\n   \n       @GET\n       MyResponseObject get();\n    }\n</code></pre>\n"}],"owner":{"account_id":4444082,"reputation":122,"user_id":3617903,"accept_rate":83,"display_name":"fbutter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2949,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":30312306,"answer_count":2,"score":1,"last_activity_date":1693555600,"creation_date":1431089475,"question_id":30124365,"body_markdown":"i&#180;m implementing a Restful service using Jax-RS 2.0 ([Resteasy 3.0.7.Final][1]) and share the interface between client and service.\r\n\r\nThe return value is void because ClientResponse is deprecated since RestEasy introduced JAX-RS 2.0 in version 3+.\r\n\r\nTo return the location of the new created object i inject the response, using the `@Context` annotation, and add the Content-Location header.\r\n\r\nFor example:\r\n\r\nShared Interface:\r\n\r\n       @Path(&quot;/&quot;)\r\n       @Consumes(&quot;application/xml&quot;)\r\n       @Produces(&quot;application/xml&quot;)\r\n       interface Resource {\r\n\r\n           \t@Path(&quot;createSomething&quot;)\r\n\t        void createSomething(AnyObject object);\r\n\r\n            ...\r\n       }\r\n\r\nImplementation class (The Service):\r\n\r\n        class ResourceImpl {\r\n        \r\n             ...\r\n             @Context org.jboss.resteasy.spi.HttpResponse response;\r\n             ...\r\n    \t     \r\n             @Override\r\n             void createSomething(AnyObject object) throws AnyException {\r\n         \r\n                 String id = service.create(object);\r\n\r\n                 response.getOutputHeaders().putSingle(&quot;Content-Location&quot;,\r\n\t\t\t\t\t  &quot;/createSomething/&quot; + id);\r\n\t\t\t\r\n\t             response.setStatus(Response.Status.CREATED.getStatusCode());\r\n             }\r\n\r\n        }\r\n\r\nThe client (build with the Resteasy Proxy Framework):\r\n\r\n\r\n         ...\r\n         ResteasyClient client = new ResteasyClientBuilder().build();\r\n\t     ResteasyWebTarget target = client.target(baseUrl);\r\n\r\n\t     Resource resource = (Resource) target.proxy(Resource.class);\t\r\n\r\n         resource.createSomething(anyObject);\r\n         ...\r\n\r\n\r\n\r\nHow can i retrieve Header information (and others, like Atom Links) which has been  injected by the service?\r\n\r\nIs it reasonable to use client side Filters and Interceptors?\r\n\r\n\r\nThank You\r\n\r\n  [1]: http://docs.jboss.org/resteasy/docs/3.0.7.Final/userguide/html_single/index.html","title":"How to get the response header in a RestEasy client?","body":"<p>i´m implementing a Restful service using Jax-RS 2.0 (<a href=\"http://docs.jboss.org/resteasy/docs/3.0.7.Final/userguide/html_single/index.html\" rel=\"nofollow\">Resteasy 3.0.7.Final</a>) and share the interface between client and service.</p>\n\n<p>The return value is void because ClientResponse is deprecated since RestEasy introduced JAX-RS 2.0 in version 3+.</p>\n\n<p>To return the location of the new created object i inject the response, using the <code>@Context</code> annotation, and add the Content-Location header.</p>\n\n<p>For example:</p>\n\n<p>Shared Interface:</p>\n\n<pre><code>   @Path(\"/\")\n   @Consumes(\"application/xml\")\n   @Produces(\"application/xml\")\n   interface Resource {\n\n        @Path(\"createSomething\")\n        void createSomething(AnyObject object);\n\n        ...\n   }\n</code></pre>\n\n<p>Implementation class (The Service):</p>\n\n<pre><code>    class ResourceImpl {\n\n         ...\n         @Context org.jboss.resteasy.spi.HttpResponse response;\n         ...\n\n         @Override\n         void createSomething(AnyObject object) throws AnyException {\n\n             String id = service.create(object);\n\n             response.getOutputHeaders().putSingle(\"Content-Location\",\n                  \"/createSomething/\" + id);\n\n             response.setStatus(Response.Status.CREATED.getStatusCode());\n         }\n\n    }\n</code></pre>\n\n<p>The client (build with the Resteasy Proxy Framework):</p>\n\n<pre><code>     ...\n     ResteasyClient client = new ResteasyClientBuilder().build();\n     ResteasyWebTarget target = client.target(baseUrl);\n\n     Resource resource = (Resource) target.proxy(Resource.class);   \n\n     resource.createSomething(anyObject);\n     ...\n</code></pre>\n\n<p>How can i retrieve Header information (and others, like Atom Links) which has been  injected by the service?</p>\n\n<p>Is it reasonable to use client side Filters and Interceptors?</p>\n\n<p>Thank You</p>\n"},{"tags":["java","spring","spring-mvc","logging","log4j"],"answers":[{"comments":[{"owner":{"account_id":4808362,"reputation":483,"user_id":3882606,"accept_rate":29,"display_name":"StackQuestion"},"score":0,"creation_date":1458614307,"post_id":36144201,"comment_id":59928276,"body_markdown":"I put the file in ./WEB-INF/ but still it doesn&#39;t work, I edited my question","body":"I put the file in ./WEB-INF/ but still it doesn&#39;t work, I edited my question"}],"tags":[],"owner":{"account_id":960456,"reputation":949,"user_id":984929,"accept_rate":50,"display_name":"lincolnadym"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458606829,"creation_date":1458606829,"answer_id":36144201,"question_id":36143287,"body_markdown":"Try moving the log4j.properties file to ./WEB-INF/.  Your Spring Resources handler is certainly ok with looking in ./WEB-INF/resources/.  I don&#39;t believe log4j knows anything about spring, nor does log4j care about spring.  Log4j is going to look in the classpath for a properties file unless you expicitly tell log4j to look elsewhere.\r\n\r\nI think right now, you&#39;ve only told spring where to look for things.","title":"How to configure log4j in a Spring Mvc application configured with Java Annotations and using a log4j.properties file","body":"<p>Try moving the log4j.properties file to ./WEB-INF/.  Your Spring Resources handler is certainly ok with looking in ./WEB-INF/resources/.  I don't believe log4j knows anything about spring, nor does log4j care about spring.  Log4j is going to look in the classpath for a properties file unless you expicitly tell log4j to look elsewhere.</p>\n\n<p>I think right now, you've only told spring where to look for things.</p>\n"},{"comments":[{"owner":{"account_id":960456,"reputation":949,"user_id":984929,"accept_rate":50,"display_name":"lincolnadym"},"score":0,"creation_date":1458688560,"post_id":36144204,"comment_id":59971218,"body_markdown":"Did the -Dlog4j.debug reveal anything as Filip suggested in this post?  http://stackoverflow.com/questions/1485987/log4j-properties-file-where-to-put-it","body":"Did the -Dlog4j.debug reveal anything as Filip suggested in this post?  <a href=\"http://stackoverflow.com/questions/1485987/log4j-properties-file-where-to-put-it\" title=\"log4j properties file where to put it\">stackoverflow.com/questions/1485987/&hellip;</a>"}],"tags":[],"owner":{"account_id":416079,"reputation":1214,"user_id":791260,"display_name":"Filip"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458606844,"creation_date":1458606844,"answer_id":36144204,"question_id":36143287,"body_markdown":"I believe it&#39;s the invalid placement of the log4j.properties file that&#39;s breaking your expectations.\r\nYou could have a look at the answers presented in this stack article about [log4j-properties-file-where-to-put-it][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1485987/log4j-properties-file-where-to-put-it","title":"How to configure log4j in a Spring Mvc application configured with Java Annotations and using a log4j.properties file","body":"<p>I believe it's the invalid placement of the log4j.properties file that's breaking your expectations.\nYou could have a look at the answers presented in this stack article about <a href=\"https://stackoverflow.com/questions/1485987/log4j-properties-file-where-to-put-it\">log4j-properties-file-where-to-put-it</a></p>\n"}],"owner":{"account_id":4808362,"reputation":483,"user_id":3882606,"accept_rate":29,"display_name":"StackQuestion"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11650,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693555305,"creation_date":1458601531,"question_id":36143287,"body_markdown":"I&#39;m working on a Maven Web application using `Spring MVC 4.2.5.RELEASE`, I&#39;m using `Netbeans` IDE with `GlassFishSErver 4.1`, I want to use `log4j 1.2.17` so I created a log4j.properties file but it seems like my properties file it&#39;s not being found because I get the following error: \r\n\r\n    log4j:WARN No appenders could be found for logger (org.springframework.web.servlet.DispatcherServlet).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n\r\nI configured my Spring application using java annotations here is my configuration\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ComponentScan({&quot;config&quot;, &quot;controllers&quot;})\r\n    public class ConfigMVC extends WebMvcConfigurerAdapter {\r\n\r\n    @Override\r\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n        registry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/WEB-INF/resources/&quot;);\r\n    }\r\n\r\n    @Bean\r\n    public UrlBasedViewResolver setupViewResolver() {\r\n        UrlBasedViewResolver resolver = new UrlBasedViewResolver();\r\n        resolver.setPrefix(&quot;/WEB-INF/jsp/&quot;);\r\n        resolver.setSuffix(&quot;.jsp&quot;);\r\n        resolver.setViewClass(JstlView.class);\r\n        return resolver;\r\n    }\r\n\r\n}\r\n\r\nhere is my WebInitializer\r\n\r\n    public class WebInicializar implements WebApplicationInitializer {\r\n    \r\n        @Override\r\n        public void onStartup(ServletContext servletContext) throws ServletException {\r\n            AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();\r\n            ctx.register(ConfigMVC.class);\r\n            ctx.setServletContext(servletContext);\r\n            Dynamic servlet = servletContext.addServlet(&quot;dispatcher&quot;, new DispatcherServlet(ctx));\r\n            servlet.addMapping(&quot;/&quot;);\r\n            servlet.setLoadOnStartup(1);\r\n            servlet.setInitParameter(&quot;throwExceptionIfNoHandlerFound&quot;, &quot;true&quot;);\r\n        }\r\n    }\r\n\r\nand here is my controller\r\n\r\n    @Controller\r\n    public class HomeController {\r\n    \r\n        private static final Logger logger = Logger.getLogger(HomeController.class);\r\n      \r\n        @RequestMapping(value = &quot;/myPage&quot;, method = RequestMethod.GET)\r\n        public String paginaSinMap(ModelMap map) {\r\n    \r\n        logger.info(&quot;This is an info log entry&quot;);\r\n        logger.error(&quot;This is an error log entry&quot;);\r\n    \r\n        return &quot;myPage&quot;;\r\n    }\r\n\r\nand here it&#39;s my `log4j.properties`\r\n\r\n    # LOG4J configuration\r\n    log4j.rootLogger=INFO, Appender1, Appender2\r\n     \r\n    log4j.appender.Appender1=org.apache.log4j.ConsoleAppender\r\n    log4j.appender.Appender1.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.Appender1.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n\r\n     \r\n    log4j.appender.Appender2=org.apache.log4j.FileAppender\r\n    log4j.appender.Appender2.File=D:/Logs/SpringMVC.log\r\n    log4j.appender.Appender2.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.Appender2.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n\r\n\r\nand I put this log4j.properties in my resources folder, here is my project structure\r\n\r\nEDIT: I didn&#39;t mention that my project is a maven web application using spring \r\nand this is my project structure\r\n\r\n    MyWebAppProjectName\r\n    --Web Pages\r\n      --WEB-INF\r\n        --jsp\r\n             index.jsp\r\n        --resources\r\n          --js\r\n             js.js\r\n          --css\r\n             site.css\r\n          log4j.properties\r\n    --Source Packages\r\n      --config\r\n          ConfigMVC.java\r\n          WebInitializaer.java\r\n      --controllers\r\n          HomeController.java\r\n    --Test Packages\r\n    --Other Resources\r\n      --src/main/resources\r\n        --default package\r\n    --Dependencies\r\n    --Java Dependencies\r\n    --Project FIles\r\n\r\nSo I put the log4j.properties in the `Other Resources/src/main/resources` and when I did this Netbeans created a `default Package` with the file inside like this `default package/log4j-properties` and it worked the logs starting to appear in the output and everything worked fine as expected. \r\n\r\nI tried to create a package named `Log4jResource` inside this path `src/main/resources` but when I did this it stopped to work and the error showed again, so it&#39;s there a way to put this file in that folder but without having to use `default package` that NetBeans creates when I put the folder in there.\r\n\r\nI tried doing refactor rename the default package but it shows me this error `Module JPA Refactoring threw java.lang.NullPointerException. Please report a bug against JPA Refactoring module and attach your var/log/messages.log.`\r\n\r\nMy final project structure looks like this\r\n\r\n    MyWebAppProjectName\r\n    --Web Pages\r\n      --WEB-INF\r\n        --jsp\r\n             index.jsp\r\n        --resources\r\n          --js\r\n             js.js\r\n          --css\r\n             site.css\r\n          log4j.properties\r\n    --Source Packages\r\n      --config\r\n          ConfigMVC.java\r\n          WebInitializaer.java\r\n      --controllers\r\n          HomeController.java\r\n    --Test Packages\r\n    --Other Resources\r\n      --src/main/resources\r\n        --default package\r\n          --log4j.properties\r\n    --Dependencies\r\n    --Java Dependencies\r\n    --Project FIles","title":"How to configure log4j in a Spring Mvc application configured with Java Annotations and using a log4j.properties file","body":"<p>I'm working on a Maven Web application using <code>Spring MVC 4.2.5.RELEASE</code>, I'm using <code>Netbeans</code> IDE with <code>GlassFishSErver 4.1</code>, I want to use <code>log4j 1.2.17</code> so I created a log4j.properties file but it seems like my properties file it's not being found because I get the following error: </p>\n\n<pre><code>log4j:WARN No appenders could be found for logger (org.springframework.web.servlet.DispatcherServlet).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\n</code></pre>\n\n<p>I configured my Spring application using java annotations here is my configuration</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan({\"config\", \"controllers\"})\npublic class ConfigMVC extends WebMvcConfigurerAdapter {\n\n@Override\npublic void addResourceHandlers(ResourceHandlerRegistry registry) {\n    registry.addResourceHandler(\"/resources/**\").addResourceLocations(\"/WEB-INF/resources/\");\n}\n\n@Bean\npublic UrlBasedViewResolver setupViewResolver() {\n    UrlBasedViewResolver resolver = new UrlBasedViewResolver();\n    resolver.setPrefix(\"/WEB-INF/jsp/\");\n    resolver.setSuffix(\".jsp\");\n    resolver.setViewClass(JstlView.class);\n    return resolver;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>here is my WebInitializer</p>\n\n<pre><code>public class WebInicializar implements WebApplicationInitializer {\n\n    @Override\n    public void onStartup(ServletContext servletContext) throws ServletException {\n        AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();\n        ctx.register(ConfigMVC.class);\n        ctx.setServletContext(servletContext);\n        Dynamic servlet = servletContext.addServlet(\"dispatcher\", new DispatcherServlet(ctx));\n        servlet.addMapping(\"/\");\n        servlet.setLoadOnStartup(1);\n        servlet.setInitParameter(\"throwExceptionIfNoHandlerFound\", \"true\");\n    }\n}\n</code></pre>\n\n<p>and here is my controller</p>\n\n<pre><code>@Controller\npublic class HomeController {\n\n    private static final Logger logger = Logger.getLogger(HomeController.class);\n\n    @RequestMapping(value = \"/myPage\", method = RequestMethod.GET)\n    public String paginaSinMap(ModelMap map) {\n\n    logger.info(\"This is an info log entry\");\n    logger.error(\"This is an error log entry\");\n\n    return \"myPage\";\n}\n</code></pre>\n\n<p>and here it's my <code>log4j.properties</code></p>\n\n<pre><code># LOG4J configuration\nlog4j.rootLogger=INFO, Appender1, Appender2\n\nlog4j.appender.Appender1=org.apache.log4j.ConsoleAppender\nlog4j.appender.Appender1.layout=org.apache.log4j.PatternLayout\nlog4j.appender.Appender1.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n\n\nlog4j.appender.Appender2=org.apache.log4j.FileAppender\nlog4j.appender.Appender2.File=D:/Logs/SpringMVC.log\nlog4j.appender.Appender2.layout=org.apache.log4j.PatternLayout\nlog4j.appender.Appender2.layout.ConversionPattern=%-7p %d [%t] %c %x - %m%n\n</code></pre>\n\n<p>and I put this log4j.properties in my resources folder, here is my project structure</p>\n\n<p>EDIT: I didn't mention that my project is a maven web application using spring \nand this is my project structure</p>\n\n<pre><code>MyWebAppProjectName\n--Web Pages\n  --WEB-INF\n    --jsp\n         index.jsp\n    --resources\n      --js\n         js.js\n      --css\n         site.css\n      log4j.properties\n--Source Packages\n  --config\n      ConfigMVC.java\n      WebInitializaer.java\n  --controllers\n      HomeController.java\n--Test Packages\n--Other Resources\n  --src/main/resources\n    --default package\n--Dependencies\n--Java Dependencies\n--Project FIles\n</code></pre>\n\n<p>So I put the log4j.properties in the <code>Other Resources/src/main/resources</code> and when I did this Netbeans created a <code>default Package</code> with the file inside like this <code>default package/log4j-properties</code> and it worked the logs starting to appear in the output and everything worked fine as expected. </p>\n\n<p>I tried to create a package named <code>Log4jResource</code> inside this path <code>src/main/resources</code> but when I did this it stopped to work and the error showed again, so it's there a way to put this file in that folder but without having to use <code>default package</code> that NetBeans creates when I put the folder in there.</p>\n\n<p>I tried doing refactor rename the default package but it shows me this error <code>Module JPA Refactoring threw java.lang.NullPointerException. Please report a bug against JPA Refactoring module and attach your var/log/messages.log.</code></p>\n\n<p>My final project structure looks like this</p>\n\n<pre><code>MyWebAppProjectName\n--Web Pages\n  --WEB-INF\n    --jsp\n         index.jsp\n    --resources\n      --js\n         js.js\n      --css\n         site.css\n      log4j.properties\n--Source Packages\n  --config\n      ConfigMVC.java\n      WebInitializaer.java\n  --controllers\n      HomeController.java\n--Test Packages\n--Other Resources\n  --src/main/resources\n    --default package\n      --log4j.properties\n--Dependencies\n--Java Dependencies\n--Project FIles\n</code></pre>\n"},{"tags":["java","hashmap","hashcode"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":5,"creation_date":1693544568,"post_id":77020612,"comment_id":135777759,"body_markdown":"&quot;hashCode needs to be different for different objects&quot;. That&#39;s not true. It just has to be the same for equal objects.","body":"&quot;hashCode needs to be different for different objects&quot;. That&#39;s not true. It just has to be the same for equal objects."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693561424,"post_id":77020612,"comment_id":135780536,"body_markdown":"There’s an infinite number of possible maps. How could you expect to get a distinct 32 bit number for each of them?","body":"There’s an infinite number of possible maps. How could you expect to get a distinct 32 bit number for each of them?"}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693561843,"post_id":77020652,"comment_id":135780623,"body_markdown":"There is no need to study the source code. Maps have a [precisely specified contract](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html#hashCode()) which should not surprise, as for example, `Map.of (&quot;u&quot; , 0 , &quot;h&quot; , 3).equals(new HashMap&lt;&gt;(Map.of (&quot;u&quot; , 0 , &quot;h&quot; , 3)))` and therefore, `Map.of (&quot;u&quot; , 0 , &quot;h&quot; , 3).hashCode() == new HashMap&lt;&gt;( Map.of (&quot;u&quot; , 0 , &quot;h&quot; , 3)).hashCode()` must be `true`, which can only work if those different implementation classes adhere to a common contract.","body":"There is no need to study the source code. Maps have a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html#hashCode()\" rel=\"nofollow noreferrer\">precisely specified contract</a> which should not surprise, as for example, <code>Map.of (&quot;u&quot; , 0 , &quot;h&quot; , 3).equals(new HashMap&lt;&gt;(Map.of (&quot;u&quot; , 0 , &quot;h&quot; , 3)))</code> and therefore, <code>Map.of (&quot;u&quot; , 0 , &quot;h&quot; , 3).hashCode() == new HashMap&lt;&gt;( Map.of (&quot;u&quot; , 0 , &quot;h&quot; , 3)).hashCode()</code> must be <code>true</code>, which can only work if those different implementation classes adhere to a common contract."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693583874,"post_id":77020652,"comment_id":135784971,"body_markdown":"@Holger The code in this Question is not about different implementations of `Map`, only the `HashMap` implementation. And, the code in this Question is not about adding entries in a different order. This Question asks why two `HashMap` objects with *completely different keys* would produce the same hash result. So, I do not understand the point of your Comment. To understand why those particular inputs generate the same numerical result, one must indeed examine the mathematics of the particular hash function. That function is found in the source code of OpenJDK.","body":"@Holger The code in this Question is not about different implementations of <code>Map</code>, only the <code>HashMap</code> implementation. And, the code in this Question is not about adding entries in a different order. This Question asks why two <code>HashMap</code> objects with <i>completely different keys</i> would produce the same hash result. So, I do not understand the point of your Comment. To understand why those particular inputs generate the same numerical result, one must indeed examine the mathematics of the particular hash function. That function is found in the source code of OpenJDK."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693819290,"post_id":77020652,"comment_id":135805812,"body_markdown":"My comment is not about the order of elements either. Don’t know where you get that from. My comment is about the fact that the algorithm is *precisely specified for **all** maps*. You don’t have to dig into implementation details. You can read the specification. That was my point. I even linked the specification. And I consider it helpful to all future readers (and the OP) to mention that this is not an implementation detail but a well specified behavior.","body":"My comment is not about the order of elements either. Don’t know where you get that from. My comment is about the fact that the algorithm is <i>precisely specified for <b>all</b> maps</i>. You don’t have to dig into implementation details. You can read the specification. That was my point. I even linked the specification. And I consider it helpful to all future readers (and the OP) to mention that this is not an implementation detail but a well specified behavior."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693547356,"creation_date":1693545348,"answer_id":77020652,"question_id":77020612,"body_markdown":"As [Commented][1], your statement:\r\n\r\n&gt; hashCode needs to be different for different objects\r\n\r\nis incorrect.\r\n\r\nA [hash function][2] takes an input, and returns a value derived from the input. The returned value is consistent. The same input always returns the same hash value.\r\n\r\nHowever, two inputs *can* indeed coincidentally return the same hash value. This is known as a *collision*. One aspect of a good hash function is that collisions are unlikely. But collisions are always possible. Inputs are infinite but hash values are finite; so obviously collisions *must* be possible.\r\n\r\nLet&#39;s test your assertion your two example maps result in the same hash value.\r\n\r\n```java\r\nMap &lt; String, Integer &gt; mapX =\r\n        new HashMap &lt;&gt; (\r\n                Map.of (\r\n                        &quot;u&quot; , 0 ,\r\n                        &quot;h&quot; , 3\r\n                )\r\n        );\r\n\r\nMap &lt; String, Integer &gt; mapY =\r\n        new HashMap &lt;&gt; (\r\n                Map.of (\r\n                        &quot;t&quot; , 3 ,\r\n                        &quot;i&quot; , 0\r\n                )\r\n        );\r\n\r\nMap &lt; String, Integer &gt; mapZ =\r\n        new HashMap &lt;&gt; (\r\n                Map.of (\r\n                        &quot;Alphabet&quot; , 7 ,\r\n                        &quot;Street&quot; , 42\r\n                )\r\n        );\r\n\r\nint hashX = mapX.hashCode ( );\r\nint hashY = mapY.hashCode ( );\r\nint hashZ = mapZ.hashCode ( );\r\n```\r\n\r\nDump to console.\r\n\r\n```java\r\nSystem.out.println ( &quot;mapX = &quot; + mapX );\r\nSystem.out.println ( &quot;mapY = &quot; + mapY );\r\nSystem.out.println ( &quot;mapZ = &quot; + mapZ );\r\n\r\nSystem.out.println ( &quot;hashX = &quot; + hashX );\r\nSystem.out.println ( &quot;hashY = &quot; + hashY );\r\nSystem.out.println ( &quot;hashZ = &quot; + hashZ );\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nmapX = {h=3, u=0}\r\nmapY = {t=3, i=0}\r\nmapZ = {Alphabet=7, Street=42}\r\nhashX = 224\r\nhashY = 224\r\nhashZ = 177047197\r\n```\r\n\r\nIndeed, both your maps result in the same value returned from `hashCode`: 224. Our third map results in a different hash value: 177,047,197.\r\n\r\nIf you want to know exactly why those particular inputs result in the same hash value, study the [source code from OpenJDK](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/HashMap.java). \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/77020612/two-different-hashmap-returning-the-same-hashcode#comment135777759_77020612\r\n  [2]: https://en.wikipedia.org/wiki/Hash_function","title":"Two different HashMap returning the same hashCode","body":"<p>As <a href=\"https://stackoverflow.com/questions/77020612/two-different-hashmap-returning-the-same-hashcode#comment135777759_77020612\">Commented</a>, your statement:</p>\n<blockquote>\n<p>hashCode needs to be different for different objects</p>\n</blockquote>\n<p>is incorrect.</p>\n<p>A <a href=\"https://en.wikipedia.org/wiki/Hash_function\" rel=\"nofollow noreferrer\">hash function</a> takes an input, and returns a value derived from the input. The returned value is consistent. The same input always returns the same hash value.</p>\n<p>However, two inputs <em>can</em> indeed coincidentally return the same hash value. This is known as a <em>collision</em>. One aspect of a good hash function is that collisions are unlikely. But collisions are always possible. Inputs are infinite but hash values are finite; so obviously collisions <em>must</em> be possible.</p>\n<p>Let's test your assertion your two example maps result in the same hash value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map &lt; String, Integer &gt; mapX =\n        new HashMap &lt;&gt; (\n                Map.of (\n                        &quot;u&quot; , 0 ,\n                        &quot;h&quot; , 3\n                )\n        );\n\nMap &lt; String, Integer &gt; mapY =\n        new HashMap &lt;&gt; (\n                Map.of (\n                        &quot;t&quot; , 3 ,\n                        &quot;i&quot; , 0\n                )\n        );\n\nMap &lt; String, Integer &gt; mapZ =\n        new HashMap &lt;&gt; (\n                Map.of (\n                        &quot;Alphabet&quot; , 7 ,\n                        &quot;Street&quot; , 42\n                )\n        );\n\nint hashX = mapX.hashCode ( );\nint hashY = mapY.hashCode ( );\nint hashZ = mapZ.hashCode ( );\n</code></pre>\n<p>Dump to console.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;mapX = &quot; + mapX );\nSystem.out.println ( &quot;mapY = &quot; + mapY );\nSystem.out.println ( &quot;mapZ = &quot; + mapZ );\n\nSystem.out.println ( &quot;hashX = &quot; + hashX );\nSystem.out.println ( &quot;hashY = &quot; + hashY );\nSystem.out.println ( &quot;hashZ = &quot; + hashZ );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>mapX = {h=3, u=0}\nmapY = {t=3, i=0}\nmapZ = {Alphabet=7, Street=42}\nhashX = 224\nhashY = 224\nhashZ = 177047197\n</code></pre>\n<p>Indeed, both your maps result in the same value returned from <code>hashCode</code>: 224. Our third map results in a different hash value: 177,047,197.</p>\n<p>If you want to know exactly why those particular inputs result in the same hash value, study the <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/HashMap.java\" rel=\"nofollow noreferrer\">source code from OpenJDK</a>.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693555079,"creation_date":1693546385,"answer_id":77020707,"question_id":77020612,"body_markdown":"You are perhaps misunderstanding the point of the `hashCode()` method.\r\n\r\n`hashCode()` is a method that works in tandem with `equals(Object)`:\r\n\r\n* `equals(Object)` is for telling you if two objects are definitely equal\r\n* `hashCode()` if for telling you if two objects are definitely _not_ equal:\r\n  * Two objects with different `hashCode()` values are definitely not equal\r\n  * Two objects with the same `hashCode()` values may be equal\r\n\r\nThis might sound a bit odd: it&#39;s kinda vague to know if things aren&#39;t equal: you have to do something more to determine if they _are_ equal (that is, use the `equals(Object)` method).\r\n\r\nWhat&#39;s the point of having two methods, one vague, one precise, to determine equality?\r\n\r\nLet&#39;s say you&#39;ve got 1000 objects, and you want to know which ones are equal: armed only with the `equals` method, you&#39;ve got to do a pairwise comparison between all of them, so, roughly 500000 comparisons.\r\n\r\nEnter `hashCode()`: you can use the hash of each object to put them into buckets: there&#39;s no point in checking if objects with different hash codes are `equals`, because they won&#39;t be (assuming correct implementation of `hashCode()`). You only have to do 1000 bucket operations.\r\n\r\nMaybe you end up with only one item in each bucket; maybe you end up with 5 things in one bucket; now, you only have to do 12 pairwise comparisons to find which ones are equal.\r\n\r\n`hashCode()` is really an ugly internal implementation detail: it is only present in order to support `HashMap`, `HashTable` etc (as described in the Javadoc).\r\n\r\nYou shouldn&#39;t ever really care about or use its value. All equal objects will have the same value, but some unequal objects will also have the same value. `hashCode()` is a source of bugs because it needs to be implemented consistently with `equals(Object)`, but there is no language-level support to ensure that consistency. In an ideal world, it wouldn&#39;t be visible to us.\r\n\r\nDon&#39;t expect it to have any properties beyond what it&#39;s designed for.","title":"Two different HashMap returning the same hashCode","body":"<p>You are perhaps misunderstanding the point of the <code>hashCode()</code> method.</p>\n<p><code>hashCode()</code> is a method that works in tandem with <code>equals(Object)</code>:</p>\n<ul>\n<li><code>equals(Object)</code> is for telling you if two objects are definitely equal</li>\n<li><code>hashCode()</code> if for telling you if two objects are definitely <em>not</em> equal:\n<ul>\n<li>Two objects with different <code>hashCode()</code> values are definitely not equal</li>\n<li>Two objects with the same <code>hashCode()</code> values may be equal</li>\n</ul>\n</li>\n</ul>\n<p>This might sound a bit odd: it's kinda vague to know if things aren't equal: you have to do something more to determine if they <em>are</em> equal (that is, use the <code>equals(Object)</code> method).</p>\n<p>What's the point of having two methods, one vague, one precise, to determine equality?</p>\n<p>Let's say you've got 1000 objects, and you want to know which ones are equal: armed only with the <code>equals</code> method, you've got to do a pairwise comparison between all of them, so, roughly 500000 comparisons.</p>\n<p>Enter <code>hashCode()</code>: you can use the hash of each object to put them into buckets: there's no point in checking if objects with different hash codes are <code>equals</code>, because they won't be (assuming correct implementation of <code>hashCode()</code>). You only have to do 1000 bucket operations.</p>\n<p>Maybe you end up with only one item in each bucket; maybe you end up with 5 things in one bucket; now, you only have to do 12 pairwise comparisons to find which ones are equal.</p>\n<p><code>hashCode()</code> is really an ugly internal implementation detail: it is only present in order to support <code>HashMap</code>, <code>HashTable</code> etc (as described in the Javadoc).</p>\n<p>You shouldn't ever really care about or use its value. All equal objects will have the same value, but some unequal objects will also have the same value. <code>hashCode()</code> is a source of bugs because it needs to be implemented consistently with <code>equals(Object)</code>, but there is no language-level support to ensure that consistency. In an ideal world, it wouldn't be visible to us.</p>\n<p>Don't expect it to have any properties beyond what it's designed for.</p>\n"}],"owner":{"account_id":20065617,"reputation":11,"user_id":14711352,"display_name":"Anguraj Dinesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693555079,"creation_date":1693544419,"question_id":77020612,"body_markdown":"I have two different sets of HashMap (**{u=0, h=3}** and **{t=3, i=0}**), and it is returning the **same hashCode** (**224**). I don&#39;t understand this, hashCode needs to be different for different objects, and here the HashMap contains different sets of key and value pairs, but it still returns the same hashCode. **Can someone please explain how this works?**\r\n\r\ntrying to get the hashcode of the hashmap in java","title":"Two different HashMap returning the same hashCode","body":"<p>I have two different sets of HashMap (<strong>{u=0, h=3}</strong> and <strong>{t=3, i=0}</strong>), and it is returning the <strong>same hashCode</strong> (<strong>224</strong>). I don't understand this, hashCode needs to be different for different objects, and here the HashMap contains different sets of key and value pairs, but it still returns the same hashCode. <strong>Can someone please explain how this works?</strong></p>\n<p>trying to get the hashcode of the hashmap in java</p>\n"},{"tags":["java","algorithm","statistics"],"comments":[{"owner":{"account_id":61302,"reputation":7370,"user_id":182768,"accept_rate":92,"display_name":"James Goodwin"},"score":2,"creation_date":1261167692,"post_id":1930454,"comment_id":1838835,"body_markdown":"Define &quot;average&quot;, could be mean, median or mode. The last two don&#39;t require you to add up all the values.","body":"Define &quot;average&quot;, could be mean, median or mode. The last two don&#39;t require you to add up all the values."},{"owner":{"account_id":12256,"reputation":79165,"user_id":24039,"accept_rate":56,"display_name":"Simon"},"score":1,"creation_date":1261168376,"post_id":1930454,"comment_id":1838894,"body_markdown":"I was using it in the vernacular sense, i.e. arithmetic mean.","body":"I was using it in the vernacular sense, i.e. arithmetic mean."},{"owner":{"account_id":18674,"reputation":5411,"user_id":43012,"accept_rate":100,"display_name":"Will Bickford"},"score":14,"creation_date":1261170100,"post_id":1930454,"comment_id":1839082,"body_markdown":"@James Very few people would say &#39;average&#39; when they want the median or the mode.  While I agree it isn&#39;t precise, generally outside of statistics departments most people assume average == mean.","body":"@James Very few people would say &#39;average&#39; when they want the median or the mode.  While I agree it isn&#39;t precise, generally outside of statistics departments most people assume average == mean."},{"owner":{"account_id":35310,"reputation":1041,"user_id":99978,"accept_rate":100,"display_name":"j.p."},"score":5,"creation_date":1261658656,"post_id":1930454,"comment_id":1870802,"body_markdown":"An efficient and numerically stable algorithm for mean and empirical variance you can find at http://www.johndcook.com/standard_deviation.html or for parallel computation in http://infoserve.sandia.gov/sand_doc/2008/086212.pdf","body":"An efficient and numerically stable algorithm for mean and empirical variance you can find at <a href=\"http://www.johndcook.com/standard_deviation.html\" rel=\"nofollow noreferrer\">johndcook.com/standard_deviation.html</a> or for parallel computation in <a href=\"http://infoserve.sandia.gov/sand_doc/2008/086212.pdf\" rel=\"nofollow noreferrer\">infoserve.sandia.gov/sand_doc/2008/086212.pdf</a>"},{"owner":{"account_id":12256,"reputation":79165,"user_id":24039,"accept_rate":56,"display_name":"Simon"},"score":0,"creation_date":1261817853,"post_id":1930454,"comment_id":1876435,"body_markdown":"@jug, if you had posted this as an answer I would have upvoted you!  Plus I can&#39;t get to your second link, is it broken?","body":"@jug, if you had posted this as an answer I would have upvoted you!  Plus I can&#39;t get to your second link, is it broken?"},{"owner":{"account_id":35310,"reputation":1041,"user_id":99978,"accept_rate":100,"display_name":"j.p."},"score":0,"creation_date":1262019983,"post_id":1930454,"comment_id":1884608,"body_markdown":"@Simon: If I click the second link, then it works for me (it&#39;s a pdf by Phillippe Pebay with the title &quot;Formulas for Robust, One-Pass Parallel Computation of Covariances and Arbitrary-Order Statistical Moments&quot;). You get it also on second place on google&#39;s advanced search with the two words pebay and covariance in the field &quot;all these words&quot;. By the way I used a comment so that the references don&#39;t get buried below all the answers given.","body":"@Simon: If I click the second link, then it works for me (it&#39;s a pdf by Phillippe Pebay with the title &quot;Formulas for Robust, One-Pass Parallel Computation of Covariances and Arbitrary-Order Statistical Moments&quot;). You get it also on second place on google&#39;s advanced search with the two words pebay and covariance in the field &quot;all these words&quot;. By the way I used a comment so that the references don&#39;t get buried below all the answers given."},{"owner":{"account_id":56876,"reputation":44038,"user_id":170352,"accept_rate":94,"display_name":"Brandon Bertelsen"},"score":0,"creation_date":1262152877,"post_id":1930454,"comment_id":1893908,"body_markdown":"How accurate do you have to be? You could divide each number by 10^9, and chop the result to say 4-6 digits (decimal places) - divide by #of values and mutiply again by 10^9.","body":"How accurate do you have to be? You could divide each number by 10^9, and chop the result to say 4-6 digits (decimal places) - divide by #of values and mutiply again by 10^9."}],"answers":[{"comments":[{"owner":{"account_id":13006,"reputation":17208,"user_id":25891,"accept_rate":83,"display_name":"Davide"},"score":0,"creation_date":1261179848,"post_id":1930463,"comment_id":1839940,"body_markdown":"A much better example of this is below: http://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930913#1930913","body":"A much better example of this is below: <a href=\"http://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930913#1930913\" title=\"what is a good solution for calculating an average where the sum of all values ex\">stackoverflow.com/questions/1930454/&hellip;</a>"}],"tags":[],"owner":{"account_id":30464,"reputation":71749,"user_id":83109,"accept_rate":100,"display_name":"David M"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1261172986,"creation_date":1261167662,"answer_id":1930463,"question_id":1930454,"body_markdown":"You could take the average of averages of equal-sized subsets of numbers that don&#39;t exceed the limit. ","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>You could take the average of averages of equal-sized subsets of numbers that don't exceed the limit. </p>\n"},{"comments":[{"owner":{"account_id":13006,"reputation":17208,"user_id":25891,"accept_rate":83,"display_name":"Davide"},"score":4,"creation_date":1261167867,"post_id":1930464,"comment_id":1838847,"body_markdown":"you might hit underflows, though, instead of overflow","body":"you might hit underflows, though, instead of overflow"},{"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"score":0,"creation_date":1261170266,"post_id":1930464,"comment_id":1839103,"body_markdown":"If dividing by the number of elements in the total input will give &quot;underflow&quot;, as in &quot;loss of precision&quot;, then I&#39;d venture a guess that *double* isn&#39;t a good enough data type for this problem.","body":"If dividing by the number of elements in the total input will give &quot;underflow&quot;, as in &quot;loss of precision&quot;, then I&#39;d venture a guess that <i>double</i> isn&#39;t a good enough data type for this problem."},{"owner":{"account_id":71650,"reputation":4872,"user_id":207223,"display_name":"Alon"},"score":1,"creation_date":1261170654,"post_id":1930464,"comment_id":1839148,"body_markdown":"@davide: java double range is 4.94065645841246544e-324d to 1.79769313486231570e+308d,  if the numbers are so small to cause an underflow then there would not have been the risk of an overflow.   if there is a combination of large and small number its recommended to use the split sets approach described in the other good  answers  but it will make the function a bit less readable, then the simplistic approche.","body":"@davide: java double range is 4.94065645841246544e-324d to 1.79769313486231570e+308d,  if the numbers are so small to cause an underflow then there would not have been the risk of an overflow.   if there is a combination of large and small number its recommended to use the split sets approach described in the other good  answers  but it will make the function a bit less readable, then the simplistic approche."},{"owner":{"account_id":12436,"reputation":27545,"user_id":24468,"accept_rate":100,"display_name":"akuhn"},"score":1,"creation_date":1261258973,"post_id":1930464,"comment_id":1843265,"body_markdown":"Right direction, but this na&#239;ve approach this will lead to loss of precision. You better divide large values by some power of two, and leave small values as they are. See my solution.","body":"Right direction, but this na&#239;ve approach this will lead to loss of precision. You better divide large values by some power of two, and leave small values as they are. See my solution."}],"tags":[],"owner":{"account_id":71650,"reputation":4872,"user_id":207223,"display_name":"Alon"},"comment_count":4,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1261167668,"creation_date":1261167668,"answer_id":1930464,"question_id":1930454,"body_markdown":"divide all values by the set size and then sum it up ","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>divide all values by the set size and then sum it up </p>\n"},{"comments":[{"owner":{"account_id":82818,"reputation":58393,"user_id":232593,"accept_rate":79,"display_name":"Merlyn Morgan-Graham"},"score":1,"creation_date":1261172177,"post_id":1930478,"comment_id":1839330,"body_markdown":"Most of the other answers are assuming they know more about your problem than they do.  These are the correct general-purpose answers.  Without knowing more about your problem, including all your requirements, more about your specific data, etc, any optimization advice is worthless.","body":"Most of the other answers are assuming they know more about your problem than they do.  These are the correct general-purpose answers.  Without knowing more about your problem, including all your requirements, more about your specific data, etc, any optimization advice is worthless."}],"tags":[],"owner":{"account_id":78982,"reputation":59009,"user_id":224346,"display_name":"Anon."},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1261167763,"creation_date":1261167763,"answer_id":1930478,"question_id":1930454,"body_markdown":"Option 1 is to use an arbitrary-precision library so you don&#39;t have an upper-bound.\r\n\r\nOther options (which lose precision) are to sum in groups rather than all at once, or to divide before summing.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Option 1 is to use an arbitrary-precision library so you don't have an upper-bound.</p>\n\n<p>Other options (which lose precision) are to sum in groups rather than all at once, or to divide before summing.</p>\n"},{"comments":[{"owner":{"account_id":81712,"reputation":5648,"user_id":230267,"accept_rate":50,"display_name":"cyborg"},"score":3,"creation_date":1261170468,"post_id":1930492,"comment_id":1839126,"body_markdown":"Don&#39;t make life more difficult for yourself unless absolutely necessary - if you need to deal with very large numbers or high precision and you can sacrifice time then using complex number types is a good way to go.","body":"Don&#39;t make life more difficult for yourself unless absolutely necessary - if you need to deal with very large numbers or high precision and you can sacrifice time then using complex number types is a good way to go."},{"owner":{"account_id":59191,"reputation":7109,"user_id":177161,"accept_rate":100,"display_name":"Fedearne"},"score":2,"creation_date":1261179507,"post_id":1930492,"comment_id":1839916,"body_markdown":"Slower is a relative term. In the case of calculating the average of 10^9 values, with BigDecimal, slow is several minutes (maybe even 30)... If a faster algorithm is required, the BigDecimal approach would be great to verify the faster implementation.","body":"Slower is a relative term. In the case of calculating the average of 10^9 values, with BigDecimal, slow is several minutes (maybe even 30)... If a faster algorithm is required, the BigDecimal approach would be great to verify the faster implementation."},{"owner":{"account_id":12436,"reputation":27545,"user_id":24468,"accept_rate":100,"display_name":"akuhn"},"score":3,"creation_date":1261259232,"post_id":1930492,"comment_id":1843276,"body_markdown":"Bad idea, this will create 10^9 objects for nothing. Since all input numbers fit into double range, the mean will also fit into double range, thus a solution using doubles only is possible.","body":"Bad idea, this will create 10^9 objects for nothing. Since all input numbers fit into double range, the mean will also fit into double range, thus a solution using doubles only is possible."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1261262801,"post_id":1930492,"comment_id":1843402,"body_markdown":"Of course. I did propose using the better approaches already suggested. (Some of those objects should be garbage-collected at some point.)","body":"Of course. I did propose using the better approaches already suggested. (Some of those objects should be garbage-collected at some point.)"}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":4,"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1261167949,"creation_date":1261167949,"answer_id":1930492,"question_id":1930454,"body_markdown":"Apart from using the better approaches already suggested, you can use &lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/java/math/BigDecimal.html&quot;&gt;BigDecimal&lt;/a&gt; to make your calculations. (Bear in mind it is immutable)","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Apart from using the better approaches already suggested, you can use <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/math/BigDecimal.html\" rel=\"noreferrer\">BigDecimal</a> to make your calculations. (Bear in mind it is immutable)</p>\n"},{"comments":[{"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"score":1,"creation_date":1261169671,"post_id":1930514,"comment_id":1839029,"body_markdown":"Note that the size of the sets must be equal, ie. 3-value sets, or 15-value sets, or whatever-value sets, but you can&#39;t mix different value sets, or values in smaller sets will have a higher impact on the result than those in larger sets.","body":"Note that the size of the sets must be equal, ie. 3-value sets, or 15-value sets, or whatever-value sets, but you can&#39;t mix different value sets, or values in smaller sets will have a higher impact on the result than those in larger sets."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1261170215,"post_id":1930514,"comment_id":1839094,"body_markdown":"This approach can also be made multi-threaded to make sue of all the CPUs in your system.","body":"This approach can also be made multi-threaded to make sue of all the CPUs in your system."},{"owner":{"account_id":18674,"reputation":5411,"user_id":43012,"accept_rate":100,"display_name":"Will Bickford"},"score":2,"creation_date":1261170547,"post_id":1930514,"comment_id":1839137,"body_markdown":"You want to avoid sorting a large collection of items if you can.  The average does not depend upon the order of items, so this is a lot of extra work.  Scanning for the largest N elements would give you enough information to make informed group size choices I think.","body":"You want to avoid sorting a large collection of items if you can.  The average does not depend upon the order of items, so this is a lot of extra work.  Scanning for the largest N elements would give you enough information to make informed group size choices I think."},{"owner":{"account_id":13006,"reputation":17208,"user_id":25891,"accept_rate":83,"display_name":"Davide"},"score":1,"creation_date":1261171075,"post_id":1930514,"comment_id":1839209,"body_markdown":"@Lasse not necessarily. You just have to weight the sum appropriately (=depending on the size set)","body":"@Lasse not necessarily. You just have to weight the sum appropriately (=depending on the size set)"},{"owner":{"account_id":13006,"reputation":17208,"user_id":25891,"accept_rate":83,"display_name":"Davide"},"score":4,"creation_date":1261171469,"post_id":1930514,"comment_id":1839266,"body_markdown":"@Will: in math, the sum does not depend on the order of items. In floating pointing arithmetics, it does. The most robust way to solve the sum problem, is indeed the one I wrote: sort and sum in chunks. It is not the fastest, but it&#39;s safe, and easily parallelized.","body":"@Will: in math, the sum does not depend on the order of items. In floating pointing arithmetics, it does. The most robust way to solve the sum problem, is indeed the one I wrote: sort and sum in chunks. It is not the fastest, but it&#39;s safe, and easily parallelized."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1261172251,"post_id":1930514,"comment_id":1839339,"body_markdown":"in Java terms, &#39;sorting a set&#39; sounds inappropriate ;)","body":"in Java terms, &#39;sorting a set&#39; sounds inappropriate ;)"},{"owner":{"account_id":561101,"reputation":1066,"user_id":166849,"accept_rate":33,"display_name":"Ken"},"score":0,"creation_date":1261172531,"post_id":1930514,"comment_id":1839367,"body_markdown":"Are you dividing in there somewhere?  :-)","body":"Are you dividing in there somewhere?  :-)"},{"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"score":0,"creation_date":1261180541,"post_id":1930514,"comment_id":1839979,"body_markdown":"I&#39;ve picked up the gauntlet, please tell me where I&#39;m being a fool: http://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way","body":"I&#39;ve picked up the gauntlet, please tell me where I&#39;m being a fool: <a href=\"http://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way\" title=\"how to reduce calculation of average to sub sets in a general way\">stackoverflow.com/questions/1931359/&hellip;</a>"},{"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"score":0,"creation_date":1261180712,"post_id":1930514,"comment_id":1839988,"body_markdown":"And note that I&#39;m going to have/find a reallllly good excuse for why I&#39;m not seeing the solution right now, regardless of how obvious it is :) Like, it&#39;s 1 in the morning sunday ... :) - Seriously though, I really can&#39;t see this solution and I do have present code that suffers a similar problem (not with the limitation to &quot;double&quot;, but more about how I retrieve the values) where I need to calculate the averaage; any good solution to this which makes me slap my forehead would be a great benefit.","body":"And note that I&#39;m going to have/find a reallllly good excuse for why I&#39;m not seeing the solution right now, regardless of how obvious it is :) Like, it&#39;s 1 in the morning sunday ... :) - Seriously though, I really can&#39;t see this solution and I do have present code that suffers a similar problem (not with the limitation to &quot;double&quot;, but more about how I retrieve the values) where I need to calculate the averaage; any good solution to this which makes me slap my forehead would be a great benefit."},{"owner":{"account_id":12436,"reputation":27545,"user_id":24468,"accept_rate":100,"display_name":"akuhn"},"score":3,"creation_date":1261259164,"post_id":1930514,"comment_id":1843272,"body_markdown":"Bad idea, sorting a large array is time consuming. You better group values into large and small ones as you iterate over them. See my solution.","body":"Bad idea, sorting a large array is time consuming. You better group values into large and small ones as you iterate over them. See my solution."},{"owner":{"account_id":36964,"reputation":126505,"user_id":105570,"accept_rate":67,"display_name":"Dan Tao"},"score":0,"creation_date":1261266398,"post_id":1930514,"comment_id":1843578,"body_markdown":"Note that this, as well as most of the other answers, requires you to store all of the data in memory (to sort it, split it into groups, etc.), which may not be possible if we&#39;re talking 10^9 values (depends on the platform, obviously). My answer and martinus&#39;s do not require storing the data in memory.","body":"Note that this, as well as most of the other answers, requires you to store all of the data in memory (to sort it, split it into groups, etc.), which may not be possible if we&#39;re talking 10^9 values (depends on the platform, obviously). My answer and martinus&#39;s do not require storing the data in memory."},{"owner":{"account_id":14335,"reputation":6589,"user_id":29411,"accept_rate":76,"display_name":"Christopher Edwards"},"score":0,"creation_date":1261266805,"post_id":1930514,"comment_id":1843592,"body_markdown":"If you want a faster sort using less memory, just sort on the exponent, not the mantissa.","body":"If you want a faster sort using less memory, just sort on the exponent, not the mantissa."}],"tags":[],"owner":{"account_id":13006,"reputation":17208,"user_id":25891,"accept_rate":83,"display_name":"Davide"},"comment_count":12,"down_vote_count":3,"up_vote_count":14,"is_accepted":false,"score":11,"last_activity_date":1261173303,"creation_date":1261168250,"answer_id":1930514,"question_id":1930454,"body_markdown":"IMHO, the most robust way of solving your problem is\r\n\r\n 1. sort your set\r\n 2. split in groups of elements whose sum wouldn&#39;t overflow - since they are sorted, this is fast and easy\r\n 3. do the sum in each group - and divide by the group size\r\n 4. do the sum of the group&#39;s sum&#39;s (possibly calling this same algorithm recursively) - be aware that if the groups will not be equally sized, you&#39;ll have to weight them by their size\r\n\r\nOne nice thing of this approach is that it scales nicely if you have a really large number of elements to sum - and a large number of processors/machines to use to do the math","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>IMHO, the most robust way of solving your problem is</p>\n\n<ol>\n<li>sort your set</li>\n<li>split in groups of elements whose sum wouldn't overflow - since they are sorted, this is fast and easy</li>\n<li>do the sum in each group - and divide by the group size</li>\n<li>do the sum of the group's sum's (possibly calling this same algorithm recursively) - be aware that if the groups will not be equally sized, you'll have to weight them by their size</li>\n</ol>\n\n<p>One nice thing of this approach is that it scales nicely if you have a really large number of elements to sum - and a large number of processors/machines to use to do the math</p>\n"},{"comments":[{"owner":{"account_id":12436,"reputation":27545,"user_id":24468,"accept_rate":100,"display_name":"akuhn"},"score":2,"creation_date":1261251113,"post_id":1930694,"comment_id":1842844,"body_markdown":"To sum large and small values, one should use Kahan summations.","body":"To sum large and small values, one should use Kahan summations."},{"owner":{"account_id":1384325,"reputation":1143,"user_id":1316659,"display_name":"Dewi Morgan"},"score":0,"creation_date":1637487081,"post_id":1930694,"comment_id":123834718,"body_markdown":"&quot;determine a rough average (you may already know this number). then subtract each value from the rough average before you sum it. That way you are summing the distances from the average, so your sum should never get very large.&quot;\nGiven a completely accurate &quot;rough average&quot; of MAXDOUBLE/2, and an input of six numbers, 0, 0, 0, MAXDOUBLE, MAXDOUBLE, MAXDOUBLE, ...wouldn&#39;t this fail?","body":"&quot;determine a rough average (you may already know this number). then subtract each value from the rough average before you sum it. That way you are summing the distances from the average, so your sum should never get very large.&quot; Given a completely accurate &quot;rough average&quot; of MAXDOUBLE/2, and an input of six numbers, 0, 0, 0, MAXDOUBLE, MAXDOUBLE, MAXDOUBLE, ...wouldn&#39;t this fail?"}],"tags":[],"owner":{"account_id":83845,"reputation":33704,"user_id":234815,"display_name":"John Knoeller"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1261170533,"creation_date":1261170533,"answer_id":1930694,"question_id":1930454,"body_markdown":"A double can be divided by a power of 2 without loss of precision. So if your only problem if the absolute size of the sum you could pre-scale your numbers before summing them.  But with a dataset of this size, there is still the risk that you will hit a situation where you are adding small numbers to a large one, and the small numbers will end up being mostly (or completely) ignored. \r\n\r\nfor instance,  when you add  2.2e-20  to 9.0e20 the result is 9.0e20 because once the scales are adjusted so that they numbers can be added together, the smaller number is 0.  Doubles can only hold about 17 digits, and you would need more than 40 digits to add these two numbers together without loss.\r\n\r\nSo, depending on your data set and how many digits of precision you can afford to loose, you may need to do other things.   Breaking the data into sets will help, but a better way to preserve precision might be to determine a rough average (you may already know this number).  then subtract each value from the rough average before you sum it.  That way you are summing the distances from the average, so your sum should never get very large.  \r\n\r\nThen you take the average delta, and add it to your rough sum to get the correct average.  Keeping track of the min and max delta will also tell you how much precision you lost during the summing process.  If you have lots of time and need a very accurate result, you can iterate.\r\n\r\n\r\n\r\n\r\n\r\n","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>A double can be divided by a power of 2 without loss of precision. So if your only problem if the absolute size of the sum you could pre-scale your numbers before summing them.  But with a dataset of this size, there is still the risk that you will hit a situation where you are adding small numbers to a large one, and the small numbers will end up being mostly (or completely) ignored. </p>\n\n<p>for instance,  when you add  2.2e-20  to 9.0e20 the result is 9.0e20 because once the scales are adjusted so that they numbers can be added together, the smaller number is 0.  Doubles can only hold about 17 digits, and you would need more than 40 digits to add these two numbers together without loss.</p>\n\n<p>So, depending on your data set and how many digits of precision you can afford to loose, you may need to do other things.   Breaking the data into sets will help, but a better way to preserve precision might be to determine a rough average (you may already know this number).  then subtract each value from the rough average before you sum it.  That way you are summing the distances from the average, so your sum should never get very large.  </p>\n\n<p>Then you take the average delta, and add it to your rough sum to get the correct average.  Keeping track of the min and max delta will also tell you how much precision you lost during the summing process.  If you have lots of time and need a very accurate result, you can iterate.</p>\n"},{"comments":[{"owner":{"account_id":13006,"reputation":17208,"user_id":25891,"accept_rate":83,"display_name":"Davide"},"score":9,"creation_date":1261171999,"post_id":1930714,"comment_id":1839316,"body_markdown":"You can trivially have not-equally-sized sets if you weight them appropriately.","body":"You can trivially have not-equally-sized sets if you weight them appropriately."},{"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"score":0,"creation_date":1261173534,"post_id":1930714,"comment_id":1839466,"body_markdown":"Please tell me how that works, I would love to learn how to do this correctly because I have a similar problem in a private project of mine and I have yet to find a good solution! For instance, tell me how to weigh the simple sequence of the values from 1 through 7, in such a way that I don&#39;t have to sum them all up together.","body":"Please tell me how that works, I would love to learn how to do this correctly because I have a similar problem in a private project of mine and I have yet to find a good solution! For instance, tell me how to weigh the simple sequence of the values from 1 through 7, in such a way that I don&#39;t have to sum them all up together."},{"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"score":0,"creation_date":1261173595,"post_id":1930714,"comment_id":1839471,"body_markdown":"... let me emphasis this. Please prove me wrong, I need this solution as well.","body":"... let me emphasis this. Please prove me wrong, I need this solution as well."},{"owner":{"account_id":56079,"reputation":7550,"user_id":167973,"accept_rate":82,"display_name":"Carl"},"score":0,"creation_date":1261173938,"post_id":1930714,"comment_id":1839498,"body_markdown":"my answer has the trivial case for non-equally sized sets.","body":"my answer has the trivial case for non-equally sized sets."},{"owner":{"account_id":56079,"reputation":7550,"user_id":167973,"accept_rate":82,"display_name":"Carl"},"score":0,"creation_date":1261174043,"post_id":1930714,"comment_id":1839508,"body_markdown":"well, as does Davide&#39;s, though he wasn&#39;t explicit about the weighting is done.","body":"well, as does Davide&#39;s, though he wasn&#39;t explicit about the weighting is done."},{"owner":{"account_id":13006,"reputation":17208,"user_id":25891,"accept_rate":83,"display_name":"Davide"},"score":0,"creation_date":1261179764,"post_id":1930714,"comment_id":1839931,"body_markdown":"@Lasse ask the detailed question on that famous site called stackoverflow, and you&#39;ll get several good answers :-) If you want **my** answer, be sure to link your question under one of my answers - I think it&#39;s trivial, so I&#39;m not editing mine here per your request in a comment to yours","body":"@Lasse ask the detailed question on that famous site called stackoverflow, and you&#39;ll get several good answers :-) If you want <b>my</b> answer, be sure to link your question under one of my answers - I think it&#39;s trivial, so I&#39;m not editing mine here per your request in a comment to yours"},{"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"score":0,"creation_date":1261179814,"post_id":1930714,"comment_id":1839936,"body_markdown":"Ok, I&#39;ll pick up that gauntlet.","body":"Ok, I&#39;ll pick up that gauntlet."},{"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"score":0,"creation_date":1261180489,"post_id":1930714,"comment_id":1839975,"body_markdown":"Ok, posted: http://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way, please let me know if you think I&#39;ve changed the problem in any significant way.","body":"Ok, posted: <a href=\"http://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way\" title=\"how to reduce calculation of average to sub sets in a general way\">stackoverflow.com/questions/1931359/&hellip;</a>, please let me know if you think I&#39;ve changed the problem in any significant way."},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1480888551,"post_id":1930714,"comment_id":69137666,"body_markdown":"@LasseV.Karlsen In your example with numbers 1 - 7, if you chose to divide it into sets of 2, you would have (1,2), (3,4), (5,6), (3.5, 3.5). I just calculated this using your subset method and it comes out to an average of 4. With (3/7) + 1 + (11/7) + 1, for each subset respectively.","body":"@LasseV.Karlsen In your example with numbers 1 - 7, if you chose to divide it into sets of 2, you would have (1,2), (3,4), (5,6), (3.5, 3.5). I just calculated this using your subset method and it comes out to an average of 4. With (3/7) + 1 + (11/7) + 1, for each subset respectively."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1485873699,"post_id":1930714,"comment_id":71099362,"body_markdown":"There is a comment by a new user (http://stackoverflow.com/users/6643428/zkutch)  --- I leave to you to decide if it makes sense: *About answer from Lasse V. Karlsen with tag equally sized sets: when take numbers 1..7 they average, obviously, is 28/7=4, but author of answer divide it on 9 in place of 7 and this mistake bring as proof of that groups should be equally sized. Yes, if you take numbers 1..7 0 0 then this, now 9, numbers have different average. Again this means nothing for proof that groups should be equally sized.*","body":"There is a comment by a new user (<a href=\"http://stackoverflow.com/users/6643428/zkutch\">stackoverflow.com/users/6643428/zkutch</a>)  --- I leave to you to decide if it makes sense: <i>About answer from Lasse V. Karlsen with tag equally sized sets: when take numbers 1..7 they average, obviously, is 28/7=4, but author of answer divide it on 9 in place of 7 and this mistake bring as proof of that groups should be equally sized. Yes, if you take numbers 1..7 0 0 then this, now 9, numbers have different average. Again this means nothing for proof that groups should be equally sized.</i>"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1485873706,"post_id":1930714,"comment_id":71099371,"body_markdown":"*May be there is some other way to argue why it is need to take same amount in all groups, but brought formulas proof nothing. You can group numbers in any way, if you keep mathematical equality, then this cannot impact on result. Have somebody normal explanations or proof?*","body":"<i>May be there is some other way to argue why it is need to take same amount in all groups, but brought formulas proof nothing. You can group numbers in any way, if you keep mathematical equality, then this cannot impact on result. Have somebody normal explanations or proof?</i>"}],"tags":[],"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"comment_count":11,"down_vote_count":6,"up_vote_count":18,"is_accepted":false,"score":12,"last_activity_date":1261171634,"creation_date":1261170784,"answer_id":1930714,"question_id":1930454,"body_markdown":"The very first issue I&#39;d like to ask you is this:\r\n\r\n* Do you know the number of values beforehand?\r\n\r\nIf not, then you have little choice but to sum, and count, and divide, to do the average. If `Double` isn&#39;t high enough precision to handle this, then tough luck, you can&#39;t use `Double`, you need to find a data type that can handle it.\r\n\r\nIf, on the other hand, you *do* know the number of values beforehand, you can look at what you&#39;re really doing and change *how* you do it, but keep the overall result.\r\n\r\nThe average of N values, stored in some collection A, is this:\r\n\r\n    A[0]   A[1]   A[2]   A[3]          A[N-1]   A[N]\r\n    ---- + ---- + ---- + ---- + .... + ------ + ----\r\n     N      N      N      N               N       N\r\n\r\nTo calculate subsets of this result, you can split up the calculation into equally sized sets, so you can do this, for 3-valued sets (assuming the number of values is divisable by 3, otherwise you need a different divisor)\r\n\r\n    / A[0]   A[1]   A[2] \\   / A[3]   A[4]   A[5] \\   //      A[N-1]   A[N] \\\r\n    | ---- + ---- + ---- |   | ---- + ---- + ---- |   \\\\    + ------ + ---- |\r\n    \\  3      3      3   /   \\  3      3      3   /   //        3       3   /\r\n     --------------------- +  --------------------  + \\\\      --------------\r\n              N                        N                        N\r\n             ---                      ---                      ---\r\n              3                        3                        3\r\n\r\nNote that you need **equally sized sets**, otherwise numbers in the last set, which will not have enough values compared to all the sets before it, will have a higher impact on the final result.\r\n\r\nConsider the numbers 1-7 in sequence, if you pick a set-size of 3, you&#39;ll get this result:\r\n\r\n    / 1   2   3 \\   / 4   5   6 \\   / 7 \\ \r\n    | - + - + - | + | - + - + - | + | - |\r\n    \\ 3   3   3 /   \\ 3   3   3 /   \\ 3 /\r\n     -----------     -----------     ---\r\n          y               y           y\r\n\r\nwhich gives:\r\n\r\n         2   5   7/3\r\n         - + - + ---\r\n         y   y    y\r\n\r\nIf y is 3 for all the sets, you get this:\r\n\r\n         2   5   7/3\r\n         - + - + ---\r\n         3   3    3\r\n\r\nwhich gives:\r\n\r\n    2*3   5*3    7\r\n    --- + --- + ---\r\n     9     9     9\r\n\r\nwhich is:\r\n\r\n    6   15   7\r\n    - + -- + -\r\n    9    9   9\r\n\r\nwhich totals:\r\n\r\n    28\r\n    -- ~ 3,1111111111111111111111.........1111111.........\r\n     9\r\n\r\nThe average of 1-7, is 4. Obviously this won&#39;t work. Note that if you do the above exercise with the numbers 1, 2, 3, 4, 5, 6, 7, 0, 0 (note the two zeroes at the end there), then you&#39;ll get the above result.\r\n\r\nIn other words, if you can&#39;t split the number of values up into equally sized sets, the last set will be counted as though it has the same number of values as all the sets preceeding it, but it will be padded with zeroes for all the missing values.\r\n\r\nSo, **you need equally sized sets**. Tough luck if your original input set consists of a prime number of values.\r\n\r\nWhat I&#39;m worried about here though is loss of precision. I&#39;m not entirely sure `Double` will give you good enough precision in such a case, if it initially cannot hold the entire sum of the values.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>The very first issue I'd like to ask you is this:</p>\n\n<ul>\n<li>Do you know the number of values beforehand?</li>\n</ul>\n\n<p>If not, then you have little choice but to sum, and count, and divide, to do the average. If <code>Double</code> isn't high enough precision to handle this, then tough luck, you can't use <code>Double</code>, you need to find a data type that can handle it.</p>\n\n<p>If, on the other hand, you <em>do</em> know the number of values beforehand, you can look at what you're really doing and change <em>how</em> you do it, but keep the overall result.</p>\n\n<p>The average of N values, stored in some collection A, is this:</p>\n\n<pre><code>A[0]   A[1]   A[2]   A[3]          A[N-1]   A[N]\n---- + ---- + ---- + ---- + .... + ------ + ----\n N      N      N      N               N       N\n</code></pre>\n\n<p>To calculate subsets of this result, you can split up the calculation into equally sized sets, so you can do this, for 3-valued sets (assuming the number of values is divisable by 3, otherwise you need a different divisor)</p>\n\n<pre><code>/ A[0]   A[1]   A[2] \\   / A[3]   A[4]   A[5] \\   //      A[N-1]   A[N] \\\n| ---- + ---- + ---- |   | ---- + ---- + ---- |   \\\\    + ------ + ---- |\n\\  3      3      3   /   \\  3      3      3   /   //        3       3   /\n --------------------- +  --------------------  + \\\\      --------------\n          N                        N                        N\n         ---                      ---                      ---\n          3                        3                        3\n</code></pre>\n\n<p>Note that you need <strong>equally sized sets</strong>, otherwise numbers in the last set, which will not have enough values compared to all the sets before it, will have a higher impact on the final result.</p>\n\n<p>Consider the numbers 1-7 in sequence, if you pick a set-size of 3, you'll get this result:</p>\n\n<pre><code>/ 1   2   3 \\   / 4   5   6 \\   / 7 \\ \n| - + - + - | + | - + - + - | + | - |\n\\ 3   3   3 /   \\ 3   3   3 /   \\ 3 /\n -----------     -----------     ---\n      y               y           y\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>     2   5   7/3\n     - + - + ---\n     y   y    y\n</code></pre>\n\n<p>If y is 3 for all the sets, you get this:</p>\n\n<pre><code>     2   5   7/3\n     - + - + ---\n     3   3    3\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>2*3   5*3    7\n--- + --- + ---\n 9     9     9\n</code></pre>\n\n<p>which is:</p>\n\n<pre><code>6   15   7\n- + -- + -\n9    9   9\n</code></pre>\n\n<p>which totals:</p>\n\n<pre><code>28\n-- ~ 3,1111111111111111111111.........1111111.........\n 9\n</code></pre>\n\n<p>The average of 1-7, is 4. Obviously this won't work. Note that if you do the above exercise with the numbers 1, 2, 3, 4, 5, 6, 7, 0, 0 (note the two zeroes at the end there), then you'll get the above result.</p>\n\n<p>In other words, if you can't split the number of values up into equally sized sets, the last set will be counted as though it has the same number of values as all the sets preceeding it, but it will be padded with zeroes for all the missing values.</p>\n\n<p>So, <strong>you need equally sized sets</strong>. Tough luck if your original input set consists of a prime number of values.</p>\n\n<p>What I'm worried about here though is loss of precision. I'm not entirely sure <code>Double</code> will give you good enough precision in such a case, if it initially cannot hold the entire sum of the values.</p>\n"},{"comments":[{"owner":{"account_id":11188,"reputation":75684,"user_id":21441,"accept_rate":100,"display_name":"Mark Elliot"},"score":0,"creation_date":1261198965,"post_id":1930748,"comment_id":1840793,"body_markdown":"That wouldn&#39;t solve the problem as incrementing the average effectively requires recovering the Nth-1 sum, which here would still be large...","body":"That wouldn&#39;t solve the problem as incrementing the average effectively requires recovering the Nth-1 sum, which here would still be large..."}],"tags":[],"owner":{"account_id":232,"reputation":29734,"user_id":287,"accept_rate":91,"display_name":"basszero"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1261171237,"creation_date":1261171237,"answer_id":1930748,"question_id":1930454,"body_markdown":"Check out the section for [cummulative moving average][1]\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Moving_average","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Check out the section for <a href=\"http://en.wikipedia.org/wiki/Moving_average\" rel=\"nofollow noreferrer\">cummulative moving average</a></p>\n"},{"comments":[{"owner":{"account_id":56079,"reputation":7550,"user_id":167973,"accept_rate":82,"display_name":"Carl"},"score":1,"creation_date":1261174262,"post_id":1930913,"comment_id":1839531,"body_markdown":"fyi, this is essentially Davide&#39;s answer, without the pre-sort.  The pre-sort should reduce numerical error, but perhaps not at the level that matters relative to the expense of the sort.","body":"fyi, this is essentially Davide&#39;s answer, without the pre-sort.  The pre-sort should reduce numerical error, but perhaps not at the level that matters relative to the expense of the sort."},{"owner":{"account_id":213,"reputation":383059,"user_id":267,"accept_rate":87,"display_name":"Lasse V. Karlsen"},"score":0,"creation_date":1261175572,"post_id":1930913,"comment_id":1839610,"body_markdown":"Can you give a specific example of how to handle the sequence 1-7? Your answer looks promising, but perhaps it&#39;s late, but I can&#39;t wrap my head around it fully :P","body":"Can you give a specific example of how to handle the sequence 1-7? Your answer looks promising, but perhaps it&#39;s late, but I can&#39;t wrap my head around it fully :P"}],"tags":[],"owner":{"account_id":56079,"reputation":7550,"user_id":167973,"accept_rate":82,"display_name":"Carl"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1261173667,"creation_date":1261173667,"answer_id":1930913,"question_id":1930454,"body_markdown":"So I don&#39;t repeat myself so much, let me state that I am assuming that the list of numbers is normally distributed, and that you can sum many numbers before you overflow.  The technique still works for non-normal distros, but somethings will not meet the expectations I describe below.\r\n\r\n--\r\n\r\nSum up a sub-series, keeping track of how many numbers you eat, until you approach the overflow, then take the average.  This will give you an average a0, and count n0.  Repeat until you exhaust the list.  Now you should have many ai, ni.\r\n\r\nEach ai and ni should be relatively close, with the possible exception of the last bite of the list.  You can mitigate that by under-biting near the end of the list.\r\n\r\nYou can combine any subset of these ai, ni by picking any ni in the subset (call it np) and dividing all the ni in the subset by that value.  The max size of the subsets to combine is the roughly constant value of the n&#39;s.\r\n\r\nThe ni/np should be close to one.  Now sum ni/np * ai and multiple by np/(sum ni), keeping track of sum ni.  This gives you a new ni, ai combination, if you need to repeat the procedure.\r\n\r\nIf you will need to repeat (i.e., the number of ai, ni pairs is much larger than the typical ni), try to keep relative n sizes constant by combining all the averages at one n level first, then combining at the next level, and so on.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>So I don't repeat myself so much, let me state that I am assuming that the list of numbers is normally distributed, and that you can sum many numbers before you overflow.  The technique still works for non-normal distros, but somethings will not meet the expectations I describe below.</p>\n\n<p>--</p>\n\n<p>Sum up a sub-series, keeping track of how many numbers you eat, until you approach the overflow, then take the average.  This will give you an average a0, and count n0.  Repeat until you exhaust the list.  Now you should have many ai, ni.</p>\n\n<p>Each ai and ni should be relatively close, with the possible exception of the last bite of the list.  You can mitigate that by under-biting near the end of the list.</p>\n\n<p>You can combine any subset of these ai, ni by picking any ni in the subset (call it np) and dividing all the ni in the subset by that value.  The max size of the subsets to combine is the roughly constant value of the n's.</p>\n\n<p>The ni/np should be close to one.  Now sum ni/np * ai and multiple by np/(sum ni), keeping track of sum ni.  This gives you a new ni, ai combination, if you need to repeat the procedure.</p>\n\n<p>If you will need to repeat (i.e., the number of ai, ni pairs is much larger than the typical ni), try to keep relative n sizes constant by combining all the averages at one n level first, then combining at the next level, and so on.</p>\n"},{"comments":[{"owner":{"account_id":48509,"reputation":30547,"user_id":144157,"accept_rate":100,"display_name":"Rob Hyndman"},"score":0,"creation_date":1261290060,"post_id":1931999,"comment_id":1844166,"body_markdown":"Sampling might be useful in some contexts, but normality has nothing to do with it.","body":"Sampling might be useful in some contexts, but normality has nothing to do with it."}],"tags":[],"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1261800728,"creation_date":1261198226,"answer_id":1931999,"question_id":1930454,"body_markdown":"A random sampling of a small set of the full dataset will often result in a &#39;good enough&#39; solution.  You obviously have to make this determination yourself based on system requirements.  Sample size can be remarkably small and still obtain reasonably good answers.  This can be adaptively computed by calculating the average of an increasing number of randomly chosen  samples - the average will converge within some interval.\r\n\r\nSampling not only addresses the double overflow concern, but is much, much faster.  Not applicable for all problems, but certainly useful for many problems.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>A random sampling of a small set of the full dataset will often result in a 'good enough' solution.  You obviously have to make this determination yourself based on system requirements.  Sample size can be remarkably small and still obtain reasonably good answers.  This can be adaptively computed by calculating the average of an increasing number of randomly chosen  samples - the average will converge within some interval.</p>\n\n<p>Sampling not only addresses the double overflow concern, but is much, much faster.  Not applicable for all problems, but certainly useful for many problems.</p>\n"},{"tags":[],"owner":{"account_id":16612,"reputation":29113,"user_id":36388,"accept_rate":91,"display_name":"P Daddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1261242174,"creation_date":1261242174,"answer_id":1933470,"question_id":1930454,"body_markdown":"I posted [an answer][a] to [a question][q] spawned from this one, realizing afterwards that my answer is better suited to this question than to that one.  I&#39;ve reproduced it below.  I notice though, that my answer is similar to a combination of [Bozho&#39;s][Bozho] and [Anon&lt;sub&gt;&lt;sup&gt;.&lt;/sup&gt;&lt;/sub&gt;&#39;s][Anon.].\r\n\r\nAs the other question was tagged language-agnostic, I chose C# for the code sample I&#39;ve included.  Its relative ease of use and easy-to-follow syntax, along with its inclusion of a couple of features facilitating this routine (a DivRem function in the BCL, and support for iterator functions), as well as my own familiarity with it, made it a good choice for this problem.  Since the OP here is interested in a Java solution, but I&#39;m not Java-fluent enough to write it effectively, it might be nice if someone could add a translation of this code to Java.\r\n\r\n---------------------------------------------------------\r\n\r\nSome of the mathematical solutions here are very good.  Here&#39;s a simple technical solution.\r\n\r\nUse a larger data type.  This breaks down into two possibilities:\r\n\r\n1. Use a high-precision floating point library.  One who encounters a need to average a billion numbers probably has the resources to purchase, or the brain power to write, a 128-bit (or longer) floating point library.\r\n\r\n   I understand the drawbacks here.  It would certainly be slower than using intrinsic types. You still might over/underflow if the number of values grows too high.  Yada yada.\r\n\r\n2. If your values are integers or can be easily scaled to integers, keep your sum in a list of integers.  When you overflow, simply add another integer.  This is essentially a simplified implementation of the first option.  A simple &lt;s&gt;(untested)&lt;/s&gt; example in C# follows\r\n\r\n&lt;b&gt;&lt;/b&gt;\r\n\r\n    class BigMeanSet{\r\n        List&lt;uint&gt; list = new List&lt;uint&gt;();\r\n\r\n        public double GetAverage(IEnumerable&lt;uint&gt; values){\r\n            list.Clear();\r\n            list.Add(0);\r\n\r\n            uint count = 0;\r\n\r\n            foreach(uint value in values){\r\n                Add(0, value);\r\n                count++;\r\n            }\r\n\r\n            return DivideBy(count);\r\n        }\r\n\r\n        void Add(int listIndex, uint value){\r\n            if((list[listIndex] += value) &lt; value){ // then overflow has ocurred\r\n                if(list.Count == listIndex + 1)\r\n                    list.Add(0);\r\n                Add(listIndex + 1, 1);\r\n            }\r\n        }\r\n\r\n        double DivideBy(uint count){\r\n            const double shift = 4.0 * 1024 * 1024 * 1024;\r\n\r\n            double rtn       = 0;\r\n            long   remainder = 0;\r\n\r\n            for(int i = list.Count - 1; i &gt;= 0; i--){\r\n                rtn *= shift;\r\n                remainder &lt;&lt;= 32;\r\n                rtn += Math.DivRem(remainder + list[i], count, out remainder);\r\n            }\r\n\r\n            rtn += remainder / (double)count;\r\n\r\n            return rtn;\r\n        }\r\n    }\r\n\r\n&lt;s&gt;Like I said, this is untested—I don&#39;t have a billion values I really want to average—so I&#39;ve probably made a mistake or two, especially in the `DivideBy` function, but it should demonstrate the general idea.&lt;/s&gt;\r\n\r\nThis should provide as much accuracy as a double can represent and should work for any number of 32-bit elements, up to 2&lt;sup&gt;32&lt;/sup&gt; - 1.  If more elements are needed, then the `count` variable will need be expanded and the `DivideBy` function will increase in complexity, but I&#39;ll leave that as an exercise for the reader.\r\n\r\nIn terms of efficiency, it should be as fast or faster than any other technique here, as it only requires iterating through the list once, only performs one division operation (well, one set of them), and does most of its work with integers.  I didn&#39;t optimize it, though, and I&#39;m pretty certain it could be made slightly faster still if necessary.  Ditching the recursive function call and list indexing would be a good start.  Again, an exercise for the reader.  The code is intended to be easy to understand.\r\n\r\n&lt;s&gt;If anybody more motivated than I am at the moment feels like verifying the correctness of the code, and fixing whatever problems there might be, please be my guest.&lt;/s&gt;\r\n\r\n-----------------------------------------\r\n\r\nI&#39;ve now tested this code, and made a couple of small corrections (a missing pair of parentheses in the `List&lt;uint&gt;` constructor call, and an incorrect divisor in the final division of the `DivideBy` function).\r\n\r\nI tested it by first running it through 1000 sets of random length (ranging between 1 and 1000) filled with random integers (ranging between 0 and 2&lt;sup&gt;32&lt;/sup&gt; - 1).  These were sets for which I could easily and quickly verify accuracy by also running a canonical mean on them.\r\n\r\nI then tested with 100&lt;sup&gt;*&lt;/sup&gt; large series, with random length between 10&lt;sup&gt;5&lt;/sup&gt; and 10&lt;sup&gt;9&lt;/sup&gt;.  The lower and upper bounds of these series were also chosen at random, constrained so that the series would fit within the range of a 32-bit integer.  For any series, the results are easily verifiable as `(lowerbound + upperbound) / 2`.\r\n\r\n&lt;sup&gt;&lt;sub&gt;&lt;sup&gt;*&lt;/sup&gt;Okay, that&#39;s a little white lie.  I aborted the large-series test after about 20 or 30 successful runs.  A series of length 10&lt;sup&gt;9&lt;/sup&gt; takes just under a minute and a half to run on my machine, so half an hour or so of testing this routine was enough for my tastes.&lt;/sub&gt;&lt;/sup&gt;\r\n\r\nFor those interested, my test code is below:\r\n\r\n    static IEnumerable&lt;uint&gt; GetSeries(uint lowerbound, uint upperbound){\r\n        for(uint i = lowerbound; i &lt;= upperbound; i++)\r\n            yield return i;\r\n    }\r\n\r\n    static void Test(){\r\n        Console.BufferHeight = 1200;\r\n        Random rnd = new Random();\r\n\r\n        for(int i = 0; i &lt; 1000; i++){\r\n            uint[] numbers = new uint[rnd.Next(1, 1000)];\r\n            for(int j = 0; j &lt; numbers.Length; j++)\r\n                numbers[j] = (uint)rnd.Next();\r\n\r\n            double sum = 0;\r\n            foreach(uint n in numbers)\r\n                sum += n;\r\n\r\n            double avg = sum / numbers.Length;\r\n            double ans = new BigMeanSet().GetAverage(numbers);\r\n\r\n            Console.WriteLine(&quot;{0}: {1} - {2} = {3}&quot;, numbers.Length, avg, ans, avg - ans);\r\n\r\n            if(avg != ans)\r\n                Debugger.Break();\r\n        }\r\n\r\n        for(int i = 0; i &lt; 100; i++){\r\n            uint length     = (uint)rnd.Next(100000, 1000000001);\r\n            uint lowerbound = (uint)rnd.Next(int.MaxValue - (int)length);\r\n            uint upperbound = lowerbound + length;\r\n\r\n            double avg = ((double)lowerbound + upperbound) / 2;\r\n            double ans = new BigMeanSet().GetAverage(GetSeries(lowerbound, upperbound));\r\n\r\n            Console.WriteLine(&quot;{0}: {1} - {2} = {3}&quot;, length, avg, ans, avg - ans);\r\n\r\n            if(avg != ans)\r\n                Debugger.Break();\r\n        }\r\n    }\r\n\r\n\r\n[a]: https://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way/1931759#1931759\r\n[q]: https://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way/\r\n[Bozho]: https://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930492#1930492\r\n[Anon.]: https://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930478#1930478","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>I posted <a href=\"https://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way/1931759#1931759\">an answer</a> to <a href=\"https://stackoverflow.com/questions/1931359/how-to-reduce-calculation-of-average-to-sub-sets-in-a-general-way/\">a question</a> spawned from this one, realizing afterwards that my answer is better suited to this question than to that one.  I've reproduced it below.  I notice though, that my answer is similar to a combination of <a href=\"https://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930492#1930492\">Bozho's</a> and <a href=\"https://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1930478#1930478\">Anon<sub><sup>.</sup></sub>'s</a>.</p>\n\n<p>As the other question was tagged language-agnostic, I chose C# for the code sample I've included.  Its relative ease of use and easy-to-follow syntax, along with its inclusion of a couple of features facilitating this routine (a DivRem function in the BCL, and support for iterator functions), as well as my own familiarity with it, made it a good choice for this problem.  Since the OP here is interested in a Java solution, but I'm not Java-fluent enough to write it effectively, it might be nice if someone could add a translation of this code to Java.</p>\n\n<hr>\n\n<p>Some of the mathematical solutions here are very good.  Here's a simple technical solution.</p>\n\n<p>Use a larger data type.  This breaks down into two possibilities:</p>\n\n<ol>\n<li><p>Use a high-precision floating point library.  One who encounters a need to average a billion numbers probably has the resources to purchase, or the brain power to write, a 128-bit (or longer) floating point library.</p>\n\n<p>I understand the drawbacks here.  It would certainly be slower than using intrinsic types. You still might over/underflow if the number of values grows too high.  Yada yada.</p></li>\n<li><p>If your values are integers or can be easily scaled to integers, keep your sum in a list of integers.  When you overflow, simply add another integer.  This is essentially a simplified implementation of the first option.  A simple <s>(untested)</s> example in C# follows</p></li>\n</ol>\n\n<p><b></b></p>\n\n<pre><code>class BigMeanSet{\n    List&lt;uint&gt; list = new List&lt;uint&gt;();\n\n    public double GetAverage(IEnumerable&lt;uint&gt; values){\n        list.Clear();\n        list.Add(0);\n\n        uint count = 0;\n\n        foreach(uint value in values){\n            Add(0, value);\n            count++;\n        }\n\n        return DivideBy(count);\n    }\n\n    void Add(int listIndex, uint value){\n        if((list[listIndex] += value) &lt; value){ // then overflow has ocurred\n            if(list.Count == listIndex + 1)\n                list.Add(0);\n            Add(listIndex + 1, 1);\n        }\n    }\n\n    double DivideBy(uint count){\n        const double shift = 4.0 * 1024 * 1024 * 1024;\n\n        double rtn       = 0;\n        long   remainder = 0;\n\n        for(int i = list.Count - 1; i &gt;= 0; i--){\n            rtn *= shift;\n            remainder &lt;&lt;= 32;\n            rtn += Math.DivRem(remainder + list[i], count, out remainder);\n        }\n\n        rtn += remainder / (double)count;\n\n        return rtn;\n    }\n}\n</code></pre>\n\n<p><s>Like I said, this is untested—I don't have a billion values I really want to average—so I've probably made a mistake or two, especially in the <code>DivideBy</code> function, but it should demonstrate the general idea.</s></p>\n\n<p>This should provide as much accuracy as a double can represent and should work for any number of 32-bit elements, up to 2<sup>32</sup> - 1.  If more elements are needed, then the <code>count</code> variable will need be expanded and the <code>DivideBy</code> function will increase in complexity, but I'll leave that as an exercise for the reader.</p>\n\n<p>In terms of efficiency, it should be as fast or faster than any other technique here, as it only requires iterating through the list once, only performs one division operation (well, one set of them), and does most of its work with integers.  I didn't optimize it, though, and I'm pretty certain it could be made slightly faster still if necessary.  Ditching the recursive function call and list indexing would be a good start.  Again, an exercise for the reader.  The code is intended to be easy to understand.</p>\n\n<p><s>If anybody more motivated than I am at the moment feels like verifying the correctness of the code, and fixing whatever problems there might be, please be my guest.</s></p>\n\n<hr>\n\n<p>I've now tested this code, and made a couple of small corrections (a missing pair of parentheses in the <code>List&lt;uint&gt;</code> constructor call, and an incorrect divisor in the final division of the <code>DivideBy</code> function).</p>\n\n<p>I tested it by first running it through 1000 sets of random length (ranging between 1 and 1000) filled with random integers (ranging between 0 and 2<sup>32</sup> - 1).  These were sets for which I could easily and quickly verify accuracy by also running a canonical mean on them.</p>\n\n<p>I then tested with 100<sup>*</sup> large series, with random length between 10<sup>5</sup> and 10<sup>9</sup>.  The lower and upper bounds of these series were also chosen at random, constrained so that the series would fit within the range of a 32-bit integer.  For any series, the results are easily verifiable as <code>(lowerbound + upperbound) / 2</code>.</p>\n\n<p><sup><sub><sup>*</sup>Okay, that's a little white lie.  I aborted the large-series test after about 20 or 30 successful runs.  A series of length 10<sup>9</sup> takes just under a minute and a half to run on my machine, so half an hour or so of testing this routine was enough for my tastes.</sub></sup></p>\n\n<p>For those interested, my test code is below:</p>\n\n<pre><code>static IEnumerable&lt;uint&gt; GetSeries(uint lowerbound, uint upperbound){\n    for(uint i = lowerbound; i &lt;= upperbound; i++)\n        yield return i;\n}\n\nstatic void Test(){\n    Console.BufferHeight = 1200;\n    Random rnd = new Random();\n\n    for(int i = 0; i &lt; 1000; i++){\n        uint[] numbers = new uint[rnd.Next(1, 1000)];\n        for(int j = 0; j &lt; numbers.Length; j++)\n            numbers[j] = (uint)rnd.Next();\n\n        double sum = 0;\n        foreach(uint n in numbers)\n            sum += n;\n\n        double avg = sum / numbers.Length;\n        double ans = new BigMeanSet().GetAverage(numbers);\n\n        Console.WriteLine(\"{0}: {1} - {2} = {3}\", numbers.Length, avg, ans, avg - ans);\n\n        if(avg != ans)\n            Debugger.Break();\n    }\n\n    for(int i = 0; i &lt; 100; i++){\n        uint length     = (uint)rnd.Next(100000, 1000000001);\n        uint lowerbound = (uint)rnd.Next(int.MaxValue - (int)length);\n        uint upperbound = lowerbound + length;\n\n        double avg = ((double)lowerbound + upperbound) / 2;\n        double ans = new BigMeanSet().GetAverage(GetSeries(lowerbound, upperbound));\n\n        Console.WriteLine(\"{0}: {1} - {2} = {3}\", length, avg, ans, avg - ans);\n\n        if(avg != ans)\n            Debugger.Break();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4495,"reputation":335863,"user_id":6782,"accept_rate":78,"display_name":"Alnitak"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1261262705,"creation_date":1261243134,"answer_id":1933544,"question_id":1930454,"body_markdown":"Please clarify the potential ranges of the values.\r\n\r\nGiven that a double has a range ~= +/-10^308, and you&#39;re summing 10^9 values, the apparent range suggested in your question is values of the order of 10^299.\r\n\r\nThat seems somewhat, well, unlikely...\r\n\r\nIf your values really _are_ that large, then with a normal double you&#39;ve got only 17 significant decimal digits to play with, so you&#39;ll be throwing away about 280 digits worth of information before you can even think about averaging the values.\r\n\r\nI would also note (since no-one else has) that for any set of numbers `X`:\r\n\r\n    mean(X) = sum(X[i] - c)  +  c\r\n              -------------\r\n                    N\r\n\r\nfor any arbitrary constant `c`.\r\n\r\nIn this particular problem, setting `c = min(X)` _might_ dramatically reduce the risk of overflow during the summation.\r\n\r\nMay I humbly suggest that the problem statement is incomplete...?","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Please clarify the potential ranges of the values.</p>\n\n<p>Given that a double has a range ~= +/-10^308, and you're summing 10^9 values, the apparent range suggested in your question is values of the order of 10^299.</p>\n\n<p>That seems somewhat, well, unlikely...</p>\n\n<p>If your values really <em>are</em> that large, then with a normal double you've got only 17 significant decimal digits to play with, so you'll be throwing away about 280 digits worth of information before you can even think about averaging the values.</p>\n\n<p>I would also note (since no-one else has) that for any set of numbers <code>X</code>:</p>\n\n<pre><code>mean(X) = sum(X[i] - c)  +  c\n          -------------\n                N\n</code></pre>\n\n<p>for any arbitrary constant <code>c</code>.</p>\n\n<p>In this particular problem, setting <code>c = min(X)</code> <em>might</em> dramatically reduce the risk of overflow during the summation.</p>\n\n<p>May I humbly suggest that the problem statement is incomplete...?</p>\n"},{"tags":[],"owner":{"account_id":12436,"reputation":27545,"user_id":24468,"accept_rate":100,"display_name":"akuhn"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1261259498,"creation_date":1261250014,"answer_id":1933869,"question_id":1930454,"body_markdown":"First of all, make yourself familiar with the internal representation of `double` values. Wikipedia should be a good starting point.\r\n\r\nThen, consider that doubles are expressed as &quot;value plus exponent&quot; where exponent is a power of two. The limit of the largest double value is an upper limit of the exponent, and not a limit of the value! So you may divide all large input numbers by a large enough power of two. This should be safe for all large enough numbers. You can re-multiply the result with the factor to check whether you lost precision with the multiplication.\r\n\r\nHere we go with an algorithm\r\n\r\n    public static double sum(double[] numbers) { \r\n      double eachSum, tempSum;\r\n      double factor = Math.pow(2.0,30); // about as large as 10^9\r\n      for (double each: numbers) {\r\n        double temp = each / factor;\r\n        if (t * factor != each) {\r\n          eachSum += each;\r\n        else {\r\n          tempSum += temp;\r\n        }\r\n      }\r\n      return (tempSum / numbers.length) * factor + (eachSum / numbers.length);\r\n    }\r\n\r\nand dont be worried by the additional division and multiplication. The FPU will optimize the hell out of them since they are done with a power of two (for comparison imagine adding and removing digits at the end of a decimal numbers).\r\n\r\n&amp;nbsp;\r\n\r\nPS: *in addition, you may want to use [Kahan summation](http://en.wikipedia.org/wiki/Kahan_summation_algorithm) to improve the precision. Kahan summation avoids loss of precision when very large and very small numbers are summed up.*","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>First of all, make yourself familiar with the internal representation of <code>double</code> values. Wikipedia should be a good starting point.</p>\n\n<p>Then, consider that doubles are expressed as \"value plus exponent\" where exponent is a power of two. The limit of the largest double value is an upper limit of the exponent, and not a limit of the value! So you may divide all large input numbers by a large enough power of two. This should be safe for all large enough numbers. You can re-multiply the result with the factor to check whether you lost precision with the multiplication.</p>\n\n<p>Here we go with an algorithm</p>\n\n<pre><code>public static double sum(double[] numbers) { \n  double eachSum, tempSum;\n  double factor = Math.pow(2.0,30); // about as large as 10^9\n  for (double each: numbers) {\n    double temp = each / factor;\n    if (t * factor != each) {\n      eachSum += each;\n    else {\n      tempSum += temp;\n    }\n  }\n  return (tempSum / numbers.length) * factor + (eachSum / numbers.length);\n}\n</code></pre>\n\n<p>and dont be worried by the additional division and multiplication. The FPU will optimize the hell out of them since they are done with a power of two (for comparison imagine adding and removing digits at the end of a decimal numbers).</p>\n\n<p>&nbsp;</p>\n\n<p>PS: <em>in addition, you may want to use <a href=\"http://en.wikipedia.org/wiki/Kahan_summation_algorithm\" rel=\"nofollow noreferrer\">Kahan summation</a> to improve the precision. Kahan summation avoids loss of precision when very large and very small numbers are summed up.</em></p>\n"},{"comments":[{"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"score":1,"creation_date":1261363642,"post_id":1934266,"comment_id":1847519,"body_markdown":"I think this as a solid solution to the OPs question.  Nice.","body":"I think this as a solid solution to the OPs question.  Nice."},{"owner":{"account_id":45714,"reputation":23770,"user_id":134877,"display_name":"Martin B"},"score":1,"creation_date":1261470348,"post_id":1934266,"comment_id":1855532,"body_markdown":"If you have a large number of values to average (which is the only case in which you would have the problem that the sum overflows a double), then this algorithm will have severe underflow issues. Essentially, at some point, (x-avg) becomes zero.","body":"If you have a large number of values to average (which is the only case in which you would have the problem that the sum overflows a double), then this algorithm will have severe underflow issues. Essentially, at some point, (x-avg) becomes zero."},{"owner":{"account_id":20245,"reputation":17785,"user_id":48181,"accept_rate":100,"display_name":"martinus"},"score":1,"creation_date":1261483136,"post_id":1934266,"comment_id":1856477,"body_markdown":"you only have the underflow issues when x and average is very close to each other, so I do not think it is an issue","body":"you only have the underflow issues when x and average is very close to each other, so I do not think it is an issue"},{"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"score":0,"creation_date":1261538237,"post_id":1934266,"comment_id":1861949,"body_markdown":"note also that if underflow is a concern, the order of magnitude of avg can be monitored and the avg re-baselined by a fixed multiplier. x would have to be divided by the multiplier in the above code. Finally, with this size of set, it is highly likely that random sampling will produce an acceptable result (engineering is about being good enough, not perfect).","body":"note also that if underflow is a concern, the order of magnitude of avg can be monitored and the avg re-baselined by a fixed multiplier. x would have to be divided by the multiplier in the above code. Finally, with this size of set, it is highly likely that random sampling will produce an acceptable result (engineering is about being good enough, not perfect)."},{"owner":{"account_id":35310,"reputation":1041,"user_id":99978,"accept_rate":100,"display_name":"j.p."},"score":28,"creation_date":1262095199,"post_id":1934266,"comment_id":1889343,"body_markdown":"@Martin B: This method is numerically stable and recommended in Knuth, The Art of Computer Programming Vol 2, section 4.2.2. It is by the way the only sensible answer posted until now, so please upvote!!!","body":"@Martin B: This method is numerically stable and recommended in Knuth, The Art of Computer Programming Vol 2, section 4.2.2. It is by the way the only sensible answer posted until now, so please upvote!!!"},{"owner":{"account_id":4733348,"reputation":340,"user_id":3828334,"display_name":"socom1880"},"score":1,"creation_date":1459201921,"post_id":1934266,"comment_id":60170652,"body_markdown":"Couldn&#39;t the largest variable actually be 2x the largest value in the set? For example, if the array was `[-100, 100]`, on the second iteration, `x - avg` would result in `100 - -100` or `200` which is actually 2x the magnitude of the largest element in the set.","body":"Couldn&#39;t the largest variable actually be 2x the largest value in the set? For example, if the array was <code>[-100, 100]</code>, on the second iteration, <code>x - avg</code> would result in <code>100 - -100</code> or <code>200</code> which is actually 2x the magnitude of the largest element in the set."},{"owner":{"account_id":1269336,"reputation":912,"user_id":1225999,"accept_rate":75,"display_name":"user1225999"},"score":1,"creation_date":1476369520,"post_id":1934266,"comment_id":67325197,"body_markdown":"@socom1880: `avg` always stays between `min` and `max`; the result of the subtraction is always not larger than `max - min` in magnitude; same holds for the result of the division.","body":"@socom1880: <code>avg</code> always stays between <code>min</code> and <code>max</code>; the result of the subtraction is always not larger than <code>max - min</code> in magnitude; same holds for the result of the division."},{"owner":{"account_id":241904,"reputation":4316,"user_id":513038,"accept_rate":55,"display_name":"Erhannis"},"score":1,"creation_date":1493764773,"post_id":1934266,"comment_id":74539774,"body_markdown":"It may be worth noting that, in my tests, the iterative method was slightly less accurate than the sum method for values not overflowing a double.  (At least for my ordered test case.)  I theorize that the iterative method gives more weight to the first values, in that the precision of much later values is effectively reduced.  However, the difference in the avg of 1e9 values was very small, in my test; about 1e-9.","body":"It may be worth noting that, in my tests, the iterative method was slightly less accurate than the sum method for values not overflowing a double.  (At least for my ordered test case.)  I theorize that the iterative method gives more weight to the first values, in that the precision of much later values is effectively reduced.  However, the difference in the avg of 1e9 values was very small, in my test; about 1e-9."},{"owner":{"account_id":1602299,"reputation":594,"user_id":1483126,"accept_rate":60,"display_name":"Toomtarm Kung"},"score":4,"creation_date":1527246359,"post_id":1934266,"comment_id":88066977,"body_markdown":"Be careful using this function. There might be overflow if data during start are too large and too small. For example, what if the array is [Double.MIN, Double.MAX]. You will end up with overflow because the divider of the first and second round are too small. \n\nLet&#39;s proof by define MIN = -127 and MAX=128, First Round:: avg += (-127 - 0) /1 = -127). Then the second round avg += (128 - (-127))/2 //Boom overflow because 128 -(-127) &gt; MAX","body":"Be careful using this function. There might be overflow if data during start are too large and too small. For example, what if the array is [Double.MIN, Double.MAX]. You will end up with overflow because the divider of the first and second round are too small.   Let&#39;s proof by define MIN = -127 and MAX=128, First Round:: avg += (-127 - 0) /1 = -127). Then the second round avg += (128 - (-127))/2 //Boom overflow because 128 -(-127) &gt; MAX"}],"tags":[],"owner":{"account_id":20245,"reputation":17785,"user_id":48181,"accept_rate":100,"display_name":"martinus"},"comment_count":9,"down_vote_count":0,"up_vote_count":218,"is_accepted":true,"score":218,"last_activity_date":1441922082,"creation_date":1261260495,"answer_id":1934266,"question_id":1930454,"body_markdown":"You can [calculate the mean iteratively][1]. This algorithm is simple, fast, you have to process each value just once, and the variables never get larger than the largest value in the set, so you won&#39;t get an overflow.\r\n\r\n    double mean(double[] ary) {\r\n      double avg = 0;\r\n      int t = 1;\r\n      for (double x : ary) {\r\n        avg += (x - avg) / t;\r\n        ++t;\r\n      }\r\n      return avg;\r\n    }\r\n\r\nInside the loop `avg` always is the average value of all values processed so far. In other words, if all the values are finite you should not get an overflow.\r\n\r\n  [1]: http://www.heikohoffmann.de/htmlthesis/node134.html\r\n\r\n","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>You can <a href=\"http://www.heikohoffmann.de/htmlthesis/node134.html\" rel=\"noreferrer\">calculate the mean iteratively</a>. This algorithm is simple, fast, you have to process each value just once, and the variables never get larger than the largest value in the set, so you won't get an overflow.</p>\n\n<pre><code>double mean(double[] ary) {\n  double avg = 0;\n  int t = 1;\n  for (double x : ary) {\n    avg += (x - avg) / t;\n    ++t;\n  }\n  return avg;\n}\n</code></pre>\n\n<p>Inside the loop <code>avg</code> always is the average value of all values processed so far. In other words, if all the values are finite you should not get an overflow.</p>\n"},{"tags":[],"owner":{"account_id":36964,"reputation":126505,"user_id":105570,"accept_rate":67,"display_name":"Dan Tao"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1261265008,"creation_date":1261264664,"answer_id":1934431,"question_id":1930454,"body_markdown":"Consider this:\r\n\r\n    avg(n1)         : n1                               = a1\r\n    avg(n1, n2)     : ((1/2)*n1)+((1/2)*n2)            = ((1/2)*a1)+((1/2)*n2) = a2\r\n    avg(n1, n2, n3) : ((1/3)*n1)+((1/3)*n2)+((1/3)*n3) = ((2/3)*a2)+((1/3)*n3) = a3\r\n\r\nSo for any set of doubles of arbitrary size, you could do this (this is in C#, but I&#39;m pretty sure it could be easily translated to Java):\r\n\r\n    static double GetAverage(IEnumerable&lt;double&gt; values) {\r\n        int i = 0;\r\n        double avg = 0.0;\r\n        foreach (double value in values) {\r\n            avg = (((double)i / (double)(i + 1)) * avg) + ((1.0 / (double)(i + 1)) * value);\r\n            i++;\r\n        }\r\n        \r\n        return avg;\r\n    }\r\n\r\nActually, this simplifies nicely into (already provided by martinus):\r\n\r\n    static double GetAverage(IEnumerable&lt;double&gt; values) {\r\n        int i = 1;\r\n        double avg = 0.0;\r\n        foreach (double value in values) {\r\n            avg += (value - avg) / (i++);\r\n        }\r\n\r\n        return avg;\r\n    }\r\n\r\nI wrote a quick test to try this function out against the more conventional method of summing up the values and dividing by the count (`GetAverage_old`). For my input I wrote this quick function to return as many random positive doubles as desired:\r\n\r\n    static IEnumerable&lt;double&gt; GetRandomDoubles(long numValues, double maxValue, int seed) {\r\n        Random r = new Random(seed);\r\n        for (long i = 0L; i &lt; numValues; i++)\r\n            yield return r.NextDouble() * maxValue;\r\n\r\n        yield break;\r\n    }\r\n\r\nAnd here are the results of a few test trials:\r\n\r\n    long N = 100L;\r\n    double max = double.MaxValue * 0.01;\r\n\r\n    IEnumerable&lt;double&gt; doubles = GetRandomDoubles(N, max, 0);\r\n    double oldWay = GetAverage_old(doubles); // 1.00535024998431E+306\r\n    double newWay = GetAverage(doubles); // 1.00535024998431E+306\r\n\r\n    doubles = GetRandomDoubles(N, max, 1);\r\n    oldWay = GetAverage_old(doubles); // 8.75142021696299E+305\r\n    newWay = GetAverage(doubles); // 8.75142021696299E+305\r\n\r\n    doubles = GetRandomDoubles(N, max, 2);\r\n    oldWay = GetAverage_old(doubles); // 8.70772312848651E+305\r\n    newWay = GetAverage(doubles); // 8.70772312848651E+305\r\n\r\nOK, but what about for 10^9 values?\r\n\r\n    long N = 1000000000;\r\n    double max = 100.0; // we start small, to verify accuracy\r\n    \r\n    IEnumerable&lt;double&gt; doubles = GetRandomDoubles(N, max, 0);\r\n    double oldWay = GetAverage_old(doubles); // 49.9994879713857\r\n    double newWay = GetAverage(doubles); // 49.9994879713868 -- pretty close\r\n    \r\n    max = double.MaxValue * 0.001; // now let&#39;s try something enormous\r\n\r\n    doubles = GetRandomDoubles(N, max, 0);\r\n    oldWay = GetAverage_old(doubles); // Infinity\r\n    newWay = GetAverage(doubles); // 8.98837362725198E+305 -- no overflow\r\n\r\nNaturally, how acceptable this solution is will depend on your accuracy requirements. But it&#39;s worth considering.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Consider this:</p>\n\n<pre><code>avg(n1)         : n1                               = a1\navg(n1, n2)     : ((1/2)*n1)+((1/2)*n2)            = ((1/2)*a1)+((1/2)*n2) = a2\navg(n1, n2, n3) : ((1/3)*n1)+((1/3)*n2)+((1/3)*n3) = ((2/3)*a2)+((1/3)*n3) = a3\n</code></pre>\n\n<p>So for any set of doubles of arbitrary size, you could do this (this is in C#, but I'm pretty sure it could be easily translated to Java):</p>\n\n<pre><code>static double GetAverage(IEnumerable&lt;double&gt; values) {\n    int i = 0;\n    double avg = 0.0;\n    foreach (double value in values) {\n        avg = (((double)i / (double)(i + 1)) * avg) + ((1.0 / (double)(i + 1)) * value);\n        i++;\n    }\n\n    return avg;\n}\n</code></pre>\n\n<p>Actually, this simplifies nicely into (already provided by martinus):</p>\n\n<pre><code>static double GetAverage(IEnumerable&lt;double&gt; values) {\n    int i = 1;\n    double avg = 0.0;\n    foreach (double value in values) {\n        avg += (value - avg) / (i++);\n    }\n\n    return avg;\n}\n</code></pre>\n\n<p>I wrote a quick test to try this function out against the more conventional method of summing up the values and dividing by the count (<code>GetAverage_old</code>). For my input I wrote this quick function to return as many random positive doubles as desired:</p>\n\n<pre><code>static IEnumerable&lt;double&gt; GetRandomDoubles(long numValues, double maxValue, int seed) {\n    Random r = new Random(seed);\n    for (long i = 0L; i &lt; numValues; i++)\n        yield return r.NextDouble() * maxValue;\n\n    yield break;\n}\n</code></pre>\n\n<p>And here are the results of a few test trials:</p>\n\n<pre><code>long N = 100L;\ndouble max = double.MaxValue * 0.01;\n\nIEnumerable&lt;double&gt; doubles = GetRandomDoubles(N, max, 0);\ndouble oldWay = GetAverage_old(doubles); // 1.00535024998431E+306\ndouble newWay = GetAverage(doubles); // 1.00535024998431E+306\n\ndoubles = GetRandomDoubles(N, max, 1);\noldWay = GetAverage_old(doubles); // 8.75142021696299E+305\nnewWay = GetAverage(doubles); // 8.75142021696299E+305\n\ndoubles = GetRandomDoubles(N, max, 2);\noldWay = GetAverage_old(doubles); // 8.70772312848651E+305\nnewWay = GetAverage(doubles); // 8.70772312848651E+305\n</code></pre>\n\n<p>OK, but what about for 10^9 values?</p>\n\n<pre><code>long N = 1000000000;\ndouble max = 100.0; // we start small, to verify accuracy\n\nIEnumerable&lt;double&gt; doubles = GetRandomDoubles(N, max, 0);\ndouble oldWay = GetAverage_old(doubles); // 49.9994879713857\ndouble newWay = GetAverage(doubles); // 49.9994879713868 -- pretty close\n\nmax = double.MaxValue * 0.001; // now let's try something enormous\n\ndoubles = GetRandomDoubles(N, max, 0);\noldWay = GetAverage_old(doubles); // Infinity\nnewWay = GetAverage(doubles); // 8.98837362725198E+305 -- no overflow\n</code></pre>\n\n<p>Naturally, how acceptable this solution is will depend on your accuracy requirements. But it's worth considering.</p>\n"},{"comments":[{"owner":{"account_id":41390,"reputation":34400,"user_id":120261,"display_name":"mtrw"},"score":3,"creation_date":1275461036,"post_id":2955488,"comment_id":3013019,"body_markdown":"-1 - This is a repeat of Martinus&#39;s answer (http://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1934266#1934266).","body":"-1 - This is a repeat of Martinus&#39;s answer (<a href=\"http://stackoverflow.com/questions/1930454/what-is-a-good-solution-for-calculating-an-average-where-the-sum-of-all-values-ex/1934266#1934266\" title=\"what is a good solution for calculating an average where the sum of all values ex\">stackoverflow.com/questions/1930454/&hellip;</a>)."},{"owner":{"account_id":433754,"reputation":38783,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":0,"creation_date":1647791895,"post_id":2955488,"comment_id":126454845,"body_markdown":"and it&#39;s completely wrong. `(i / i+1)` is always 2 unless i is zero","body":"and it&#39;s completely wrong. <code>(i &#47; i+1)</code> is always 2 unless i is zero"}],"tags":[],"owner":{"account_id":621217,"reputation":9,"user_id":356139,"display_name":"Anil"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1647791861,"creation_date":1275460413,"answer_id":2955488,"question_id":1930454,"body_markdown":"Why so many complicated long answers. Here is the simplest way to find the running average till now without any need to know how many elements or size etc..\r\n```\r\nlong int i = 0;\r\ndouble average = 0;\r\nwhile(there are still elements)\r\n{\r\n   average = average * (i / i+1) + X[i] / (i+1);\r\n   i++;\r\n}\r\nreturn average;\r\n```","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>Why so many complicated long answers. Here is the simplest way to find the running average till now without any need to know how many elements or size etc..</p>\n<pre><code>long int i = 0;\ndouble average = 0;\nwhile(there are still elements)\n{\n   average = average * (i / i+1) + X[i] / (i+1);\n   i++;\n}\nreturn average;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1602299,"reputation":594,"user_id":1483126,"accept_rate":60,"display_name":"Toomtarm Kung"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528892825,"creation_date":1528886913,"answer_id":50835306,"question_id":1930454,"body_markdown":"In order to keep logic simple, and keep performance not the best but acceptable, i recommend you to use BigDecimal together with the primitive type. \r\nThe concept is very simple, you use primitive type to sum values together, whenever the value will underflow or overflow, you move the calculate value to the BigDecimal, then reset it for the next sum calculation. One more thing you should aware is when you construct BigDecimal, you ought to always use String instead of double.\r\n\r\n    BigDecimal average(double[] values){\r\n        BigDecimal totalSum = BigDecimal.ZERO;\r\n        double tempSum = 0.00;\r\n        for (double value : values){\r\n            if (isOutOfRange(tempSum, value)) {\r\n                totalSum = sum(totalSum, tempSum);\r\n                tempSum = 0.00;\r\n            }\r\n            tempSum += value;\r\n        }\r\n        totalSum = sum(totalSum, tempSum);\r\n        BigDecimal count = new BigDecimal(values.length);\r\n        return totalSum.divide(count);\r\n    }\r\n    \r\n    BigDecimal sum(BigDecimal val1, double val2){\r\n        BigDecimal val = new BigDecimal(String.valueOf(val2));\r\n        return val1.add(val);\r\n    }\r\n    \r\n    boolean isOutOfRange(double sum, double value){\r\n        // because sum + value &gt; max will be error if both sum and value are positive\r\n        // so I adapt the equation to be value &gt; max - sum \r\n        if(sum &gt;= 0.00 &amp;&amp; value &gt; Double.MAX - sum){\r\n            return true;\r\n        }\r\n    \r\n        // because sum + value &lt; min will be error if both sum and value are negative\r\n        // so I adapt the equation to be value &lt; min - sum\r\n        if(sum &lt; 0.00 &amp;&amp; value &lt; Double.MIN - sum){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\nFrom this concept, every time the result is underflow or overflow, we will keep that value into the bigger variable, this solution might a bit slowdown the performance due to the BigDecimal calculation, but it guarantee the runtime stability.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>In order to keep logic simple, and keep performance not the best but acceptable, i recommend you to use BigDecimal together with the primitive type. \nThe concept is very simple, you use primitive type to sum values together, whenever the value will underflow or overflow, you move the calculate value to the BigDecimal, then reset it for the next sum calculation. One more thing you should aware is when you construct BigDecimal, you ought to always use String instead of double.</p>\n\n<pre><code>BigDecimal average(double[] values){\n    BigDecimal totalSum = BigDecimal.ZERO;\n    double tempSum = 0.00;\n    for (double value : values){\n        if (isOutOfRange(tempSum, value)) {\n            totalSum = sum(totalSum, tempSum);\n            tempSum = 0.00;\n        }\n        tempSum += value;\n    }\n    totalSum = sum(totalSum, tempSum);\n    BigDecimal count = new BigDecimal(values.length);\n    return totalSum.divide(count);\n}\n\nBigDecimal sum(BigDecimal val1, double val2){\n    BigDecimal val = new BigDecimal(String.valueOf(val2));\n    return val1.add(val);\n}\n\nboolean isOutOfRange(double sum, double value){\n    // because sum + value &gt; max will be error if both sum and value are positive\n    // so I adapt the equation to be value &gt; max - sum \n    if(sum &gt;= 0.00 &amp;&amp; value &gt; Double.MAX - sum){\n        return true;\n    }\n\n    // because sum + value &lt; min will be error if both sum and value are negative\n    // so I adapt the equation to be value &lt; min - sum\n    if(sum &lt; 0.00 &amp;&amp; value &lt; Double.MIN - sum){\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>From this concept, every time the result is underflow or overflow, we will keep that value into the bigger variable, this solution might a bit slowdown the performance due to the BigDecimal calculation, but it guarantee the runtime stability.</p>\n"},{"tags":[],"owner":{"account_id":20013438,"reputation":1,"user_id":22482038,"display_name":"Manuel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693554971,"creation_date":1693554971,"answer_id":77021393,"question_id":1930454,"body_markdown":"There are two ways, already mentioned:\r\n\r\n    int i = 1;\r\n    for ( double x : arr ){\r\n        mean = mean + (x-mean)/n;\r\n        ++n;\r\n    }\r\n\r\nif the (x-mean)/n part becomes too small you can use\r\n\r\n    int i = 1;\r\n    for (double x : arr){\r\n        mean = mean*((i-1)/i) + x/i;\r\n        ++i; \r\n    }\r\n\r\nCalculating (i-1)/i first makes approaching zero, so x/i should be your only concern.","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>There are two ways, already mentioned:</p>\n<pre><code>int i = 1;\nfor ( double x : arr ){\n    mean = mean + (x-mean)/n;\n    ++n;\n}\n</code></pre>\n<p>if the (x-mean)/n part becomes too small you can use</p>\n<pre><code>int i = 1;\nfor (double x : arr){\n    mean = mean*((i-1)/i) + x/i;\n    ++i; \n}\n</code></pre>\n<p>Calculating (i-1)/i first makes approaching zero, so x/i should be your only concern.</p>\n"}],"owner":{"account_id":12256,"reputation":79165,"user_id":24039,"accept_rate":56,"display_name":"Simon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43367,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"accepted_answer_id":1934266,"answer_count":18,"score":55,"last_activity_date":1693554971,"creation_date":1261167528,"question_id":1930454,"body_markdown":"I have a requirement to calculate the average of a very large set of doubles (10^9 values).  The sum of the values exceeds the upper bound of a double, so does anyone know any neat little tricks for calculating an average that doesn&#39;t require also calculating the sum?\r\n\r\nI am using Java 1.5.  ","title":"What is a good solution for calculating an average where the sum of all values exceeds a double&#39;s limits?","body":"<p>I have a requirement to calculate the average of a very large set of doubles (10^9 values).  The sum of the values exceeds the upper bound of a double, so does anyone know any neat little tricks for calculating an average that doesn't require also calculating the sum?</p>\n\n<p>I am using Java 1.5.  </p>\n"},{"tags":["java","android","multiple-instances","android-handler"],"answers":[{"tags":[],"owner":{"account_id":6485263,"reputation":623,"user_id":5021056,"display_name":"ryankuck"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693554502,"creation_date":1693554502,"answer_id":77021357,"question_id":77021137,"body_markdown":"You should call the removeCallbacksAndMessages function when the activity ends using onDestroy(). This will clean up the handler so that there will only be one running at a time.","title":"Manage handler execution in multiple instance of activity running","body":"<p>You should call the removeCallbacksAndMessages function when the activity ends using onDestroy(). This will clean up the handler so that there will only be one running at a time.</p>\n"}],"owner":{"account_id":1931992,"reputation":4921,"user_id":1741203,"accept_rate":57,"display_name":"Rajeev Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693554502,"creation_date":1693551851,"question_id":77021137,"body_markdown":"I have been running a activity with `mode = singleInstance` in my app. In this activity onStart() method i am initializing a handler like this\r\n  \r\n    Handler handler;\r\n    @Override\r\n    protected void onStart() { // running handler with post delayed of 5 seconds\r\n       handler = new Handler();\r\n       handler.postDelayed(() -&gt; {\r\n         // doing something\r\n       }\r\n    }, 5000);\r\n\r\nNow sometime when user comes back to my activity from any other app following sequence of Activity life cycle events fires\r\n\r\n    -&gt; onCreate() // first instance created\r\n    -&gt; onStart() // on start of first instance called\r\n    -&gt; onCreate() // second instance created\r\n    -&gt; onStart() // on start of second instance called\r\n    -&gt; onDestroy() // first instance on destroy called\r\n\r\nNow handler running twice as onStart() called twice for two different instance created. \r\nI want to stop the handler execution of first instance as it destroyed immidiately after created. I i use `handler.removeCallbacksAndMessages(null);` it is stopping the second instance handler execution. \r\n\r\nHow can i make sure that only running activity handler instance executes ?\r\n\r\n\r\n\r\n","title":"Manage handler execution in multiple instance of activity running","body":"<p>I have been running a activity with <code>mode = singleInstance</code> in my app. In this activity onStart() method i am initializing a handler like this</p>\n<pre><code>Handler handler;\n@Override\nprotected void onStart() { // running handler with post delayed of 5 seconds\n   handler = new Handler();\n   handler.postDelayed(() -&gt; {\n     // doing something\n   }\n}, 5000);\n</code></pre>\n<p>Now sometime when user comes back to my activity from any other app following sequence of Activity life cycle events fires</p>\n<pre><code>-&gt; onCreate() // first instance created\n-&gt; onStart() // on start of first instance called\n-&gt; onCreate() // second instance created\n-&gt; onStart() // on start of second instance called\n-&gt; onDestroy() // first instance on destroy called\n</code></pre>\n<p>Now handler running twice as onStart() called twice for two different instance created.\nI want to stop the handler execution of first instance as it destroyed immidiately after created. I i use <code>handler.removeCallbacksAndMessages(null);</code> it is stopping the second instance handler execution.</p>\n<p>How can i make sure that only running activity handler instance executes ?</p>\n"},{"tags":["java","logging","mapreduce","hadoop-yarn"],"owner":{"account_id":18697505,"reputation":3,"user_id":13630477,"display_name":"Canerc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693554390,"creation_date":1693482620,"question_id":77015571,"body_markdown":"In the Hadoop JobHistory WEB UI, I see all applications, running, killed, finished(succeeded), etc. However, I can not access **some** of the MapReduce jobs tracking URL history logs. \r\n\r\nWhen I run `hadoop fs -ls /user/history/done/2023/08/31/00003/` command, I see job_XXXXXX_404 jhist and xml logs. So log exists but web ui not found job. (When I click the history button, (http://server:19888/jobhistory/job/job_XXXXXX_4047 page) only one sentence appears: Not found: job_XXXXXX_4047 )\r\n\r\n\r\n\r\nhadoop-hdfs-historyserver-XXX.Log:\r\n**ERROR** `org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047`\r\n\r\nThen I changed log level INFO to DEBUG:\r\n\r\nhadoop-hdfs-historyserver-XXX.Log:\r\n\r\n~~~\r\nDEBUG org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Looking for Job job_XXXXXX_4047\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate_dirs\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/hdfs\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/root\r\norg.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047\r\n~~~\r\n\r\nSome other jobs, hadoop-hdfs-historyserver-XXX.Log logs like\r\n\r\n\r\n~~~\r\nDEBUG org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Looking for Job job_XXXXXX_4047\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate_dirs\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/hdfs\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate dir hdfs://ha-cluster:8020/user/history/done_intermediate/root\r\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Found 0 files\r\norg.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047\r\n~~~\r\n\r\n\r\n[Hadoop HistoryFileManager.java](https://github.com/apache/hadoop/blob/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/HistoryFileManager.java#L1087):\r\n```\r\n...\r\n  public HistoryFileInfo getFileInfo(JobId jobId) throws IOException {\r\n    // FileInfo available in cache.\r\n    HistoryFileInfo fileInfo = jobListCache.get(jobId);\r\n    if (fileInfo != null) {\r\n      return fileInfo;\r\n    }\r\n    // OK so scan the intermediate to be sure we did not lose it that way\r\n    scanIntermediateDirectory();\r\n    fileInfo = jobListCache.get(jobId);\r\n    if (fileInfo != null) {\r\n      return fileInfo;\r\n    }\r\n\r\n    // Intermediate directory does not contain job. Search through older ones.\r\n    fileInfo = scanOldDirsForJob(jobId);\r\n    if (fileInfo != null) {\r\n      return fileInfo;\r\n    }\r\n    return null;\r\n  }\r\n...\r\n```\r\nFinally, I restarted the history server service(`mapred --daemon stop historyserver, mapred --daemon start historyser`), and I saw the logs. But I&#39;m tired of restarting the service. Why can&#39;t the history server find the job logs?\r\n","title":"Hadoop Map Reduce History Server UI - unable to find job logs (but log exists at hdfs)","body":"<p>In the Hadoop JobHistory WEB UI, I see all applications, running, killed, finished(succeeded), etc. However, I can not access <strong>some</strong> of the MapReduce jobs tracking URL history logs.</p>\n<p>When I run <code>hadoop fs -ls /user/history/done/2023/08/31/00003/</code> command, I see job_XXXXXX_404 jhist and xml logs. So log exists but web ui not found job. (When I click the history button, (http://server:19888/jobhistory/job/job_XXXXXX_4047 page) only one sentence appears: Not found: job_XXXXXX_4047 )</p>\n<p>hadoop-hdfs-historyserver-XXX.Log:\n<strong>ERROR</strong> <code>org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047</code></p>\n<p>Then I changed log level INFO to DEBUG:</p>\n<p>hadoop-hdfs-historyserver-XXX.Log:</p>\n<pre><code>DEBUG org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Looking for Job job_XXXXXX_4047\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate_dirs\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/hdfs\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/root\norg.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047\n</code></pre>\n<p>Some other jobs, hadoop-hdfs-historyserver-XXX.Log logs like</p>\n<pre><code>DEBUG org.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Looking for Job job_XXXXXX_4047\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate_dirs\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scan not needed of hdfs://ha-cluster:8020/user/history/done_intermediate/hdfs\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Scanning intermediate dir hdfs://ha-cluster:8020/user/history/done_intermediate/root\norg.apache.hadoop.mapreduce.v2.hs.HistoryFileManager: Found 0 files\norg.apache.hadoop.mapreduce.v2.hs.CachedHistoryStorage: Unable to find job job_XXXXXX_4047\n</code></pre>\n<p><a href=\"https://github.com/apache/hadoop/blob/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-hs/src/main/java/org/apache/hadoop/mapreduce/v2/hs/HistoryFileManager.java#L1087\" rel=\"nofollow noreferrer\">Hadoop HistoryFileManager.java</a>:</p>\n<pre><code>...\n  public HistoryFileInfo getFileInfo(JobId jobId) throws IOException {\n    // FileInfo available in cache.\n    HistoryFileInfo fileInfo = jobListCache.get(jobId);\n    if (fileInfo != null) {\n      return fileInfo;\n    }\n    // OK so scan the intermediate to be sure we did not lose it that way\n    scanIntermediateDirectory();\n    fileInfo = jobListCache.get(jobId);\n    if (fileInfo != null) {\n      return fileInfo;\n    }\n\n    // Intermediate directory does not contain job. Search through older ones.\n    fileInfo = scanOldDirsForJob(jobId);\n    if (fileInfo != null) {\n      return fileInfo;\n    }\n    return null;\n  }\n...\n</code></pre>\n<p>Finally, I restarted the history server service(<code>mapred --daemon stop historyserver, mapred --daemon start historyser</code>), and I saw the logs. But I'm tired of restarting the service. Why can't the history server find the job logs?</p>\n"},{"tags":["java","spring-boot","intellij-idea","microservices","mapstruct"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693406069,"post_id":77008817,"comment_id":135757022,"body_markdown":"if you will remove `lombok` from `NotificationGetDTO ` and `Notification` is it will work ?","body":"if you will remove <code>lombok</code> from <code>NotificationGetDTO </code> and <code>Notification</code> is it will work ?"},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1693408174,"post_id":77008817,"comment_id":135757531,"body_markdown":"IMO this annotation should not cause runtime problems as it is a source code level annotation. Do you have the stack trace of the runtime issue you are facing ?","body":"IMO this annotation should not cause runtime problems as it is a source code level annotation. Do you have the stack trace of the runtime issue you are facing ?"},{"owner":{"account_id":26558861,"reputation":43,"user_id":20187025,"display_name":"Tessa"},"score":0,"creation_date":1693465715,"post_id":77008817,"comment_id":135765198,"body_markdown":"@greg Well, I&#39;m not facing any real runtime problems, it&#39;s just that when I try to see the Mappings in IDEA, it doesn&#39;t display the actual mappings and endpoints and just states the error. As for now, it seems to be running, but I don&#39;t want to deploy the service like that. My biggest concern is the the &quot;residual&quot; javax import, which is not supposed to be there.","body":"@greg Well, I&#39;m not facing any real runtime problems, it&#39;s just that when I try to see the Mappings in IDEA, it doesn&#39;t display the actual mappings and endpoints and just states the error. As for now, it seems to be running, but I don&#39;t want to deploy the service like that. My biggest concern is the the &quot;residual&quot; javax import, which is not supposed to be there."},{"owner":{"account_id":26558861,"reputation":43,"user_id":20187025,"display_name":"Tessa"},"score":0,"creation_date":1693466199,"post_id":77008817,"comment_id":135765301,"body_markdown":"@AndreiLisa I tried that, but it didn&#39;t yield any changes to the behavior of the service.","body":"@AndreiLisa I tried that, but it didn&#39;t yield any changes to the behavior of the service."}],"answers":[{"tags":[],"owner":{"account_id":26558861,"reputation":43,"user_id":20187025,"display_name":"Tessa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693554094,"creation_date":1693552561,"answer_id":77021194,"question_id":77008817,"body_markdown":"So, I discovered it wasn&#39;t a code-based problem at all. \r\nStill not really sure, why it was happening, but I uninstalled the IDE and installed the new version of IntellijIDEA. Now everything is working just fine. \r\nI mean, the generated annotation is no longer using the javax dependency and the error is no longer displayed. \r\n\r\nThank yall for your help. ","title":"Javax dependency in mapstruct generated file after upgrading to spring boot 3","body":"<p>So, I discovered it wasn't a code-based problem at all.\nStill not really sure, why it was happening, but I uninstalled the IDE and installed the new version of IntellijIDEA. Now everything is working just fine.\nI mean, the generated annotation is no longer using the javax dependency and the error is no longer displayed.</p>\n<p>Thank yall for your help.</p>\n"}],"owner":{"account_id":26558861,"reputation":43,"user_id":20187025,"display_name":"Tessa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":463,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77021194,"answer_count":1,"score":2,"last_activity_date":1693554094,"creation_date":1693404571,"question_id":77008817,"body_markdown":"I was tasked with upgrading one rest service in our hub so that it uses spring boot 3. Among others, I removed all javax imports and substituted them with jakarta imports instead. \r\nBut when I maven package my app I&#39;m getting a javax import in one of the generated files. \r\n\r\nSpecifically, the import is in this generated class (if the implementation of this class is important to paint the problem I&#39;ll add it): \r\n\r\n```\r\nimport cz.cvut.fel.czm.api.dto.NotificationGetDTO;\r\nimport cz.cvut.fel.czm.api.dto.NotificationPostDTO;\r\nimport cz.cvut.fel.czm.model.notification.Notification;\r\nimport java.time.LocalDateTime;\r\nimport javax.annotation.processing.Generated;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Generated(\r\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\r\n    date = &quot;2023-08-30T15:34:27+0200&quot;,\r\n    comments = &quot;version: 1.5.5.Final, compiler: javac, environment: Java 17.0.2 (Oracle Corporation)&quot;\r\n)\r\n@Component\r\npublic class NotificationMapperImpl implements NotificationMapper {\r\n\r\n...\r\n}\r\n```\r\n\r\nAnd this is the actual mapper: \r\n\r\n```\r\nimport cz.cvut.fel.czm.api.dto.NotificationGetDTO;\r\nimport cz.cvut.fel.czm.api.dto.NotificationPostDTO;\r\nimport cz.cvut.fel.czm.model.notification.Notification;\r\nimport org.mapstruct.Mapper;\r\n\r\nimport java.time.LocalDateTime;\r\n\r\n@Mapper(componentModel = &quot;spring&quot;, imports = {LocalDateTime.class})\r\npublic interface NotificationMapper {\r\n    NotificationGetDTO toDTO(Notification notification);\r\n\r\n    Notification toModel(NotificationPostDTO notificationPostDTO);\r\n}\r\n```\r\n\r\nI&#39;m using a custom parent for the service, so I&#39;m not in charge of changing the versions of dependencies. But there could be a bug somewhere in the parent files too. \r\n\r\nThis is my mapstruct dependency from the pom: \r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n```\r\n\r\nAnd this is the maven plugin configuration I&#39;m using: \r\n\r\n```\r\n&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;annotationProcessorPaths&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;version&gt;${org.projectlombok.lombok.version}&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                            &lt;version&gt;${org.mapstruct.mapstruct.version}&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                    &lt;/annotationProcessorPaths&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;compilerArg&gt;-Amapstruct.defaultComponentModel=spring&lt;/compilerArg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\nI reviewed it and the version of mapstruct we&#39;re using is 1.5.5final. \r\n\r\n\r\nIt appears that when I run the service locally, the endpoints are avaliable and working, when I access them via Insomnia, but when I open it in InteliJIDEA, I&#39;m met with\r\n&quot;javax.management.InstanceNotFoundException: orh.springframework.boot:type=Endpoint,name=Mappings,*&quot;\r\nmessage. \r\n\r\nI tried hardcoding the version of the mapstruct dependency, but it doesn&#39;t seem to be the reason for the problem. \r\nI also researched which other dependencies could result in the javax dependency, but I couldn&#39;t find the culprit. \r\n\r\nIn other words, everything works, but I&#39;d hate it if this minor thing caused any problems later in production. I checked with other services that had already been migrated, and I don&#39;t think any of those had this thing happening.\r\n\r\nThank you for any suggestions. ","title":"Javax dependency in mapstruct generated file after upgrading to spring boot 3","body":"<p>I was tasked with upgrading one rest service in our hub so that it uses spring boot 3. Among others, I removed all javax imports and substituted them with jakarta imports instead.\nBut when I maven package my app I'm getting a javax import in one of the generated files.</p>\n<p>Specifically, the import is in this generated class (if the implementation of this class is important to paint the problem I'll add it):</p>\n<pre><code>import cz.cvut.fel.czm.api.dto.NotificationGetDTO;\nimport cz.cvut.fel.czm.api.dto.NotificationPostDTO;\nimport cz.cvut.fel.czm.model.notification.Notification;\nimport java.time.LocalDateTime;\nimport javax.annotation.processing.Generated;\nimport org.springframework.stereotype.Component;\n\n@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2023-08-30T15:34:27+0200&quot;,\n    comments = &quot;version: 1.5.5.Final, compiler: javac, environment: Java 17.0.2 (Oracle Corporation)&quot;\n)\n@Component\npublic class NotificationMapperImpl implements NotificationMapper {\n\n...\n}\n</code></pre>\n<p>And this is the actual mapper:</p>\n<pre><code>import cz.cvut.fel.czm.api.dto.NotificationGetDTO;\nimport cz.cvut.fel.czm.api.dto.NotificationPostDTO;\nimport cz.cvut.fel.czm.model.notification.Notification;\nimport org.mapstruct.Mapper;\n\nimport java.time.LocalDateTime;\n\n@Mapper(componentModel = &quot;spring&quot;, imports = {LocalDateTime.class})\npublic interface NotificationMapper {\n    NotificationGetDTO toDTO(Notification notification);\n\n    Notification toModel(NotificationPostDTO notificationPostDTO);\n}\n</code></pre>\n<p>I'm using a custom parent for the service, so I'm not in charge of changing the versions of dependencies. But there could be a bug somewhere in the parent files too.</p>\n<p>This is my mapstruct dependency from the pom:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>And this is the maven plugin configuration I'm using:</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;${org.projectlombok.lombok.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                            &lt;version&gt;${org.mapstruct.mapstruct.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;compilerArg&gt;-Amapstruct.defaultComponentModel=spring&lt;/compilerArg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>I reviewed it and the version of mapstruct we're using is 1.5.5final.</p>\n<p>It appears that when I run the service locally, the endpoints are avaliable and working, when I access them via Insomnia, but when I open it in InteliJIDEA, I'm met with\n&quot;javax.management.InstanceNotFoundException: orh.springframework.boot:type=Endpoint,name=Mappings,*&quot;\nmessage.</p>\n<p>I tried hardcoding the version of the mapstruct dependency, but it doesn't seem to be the reason for the problem.\nI also researched which other dependencies could result in the javax dependency, but I couldn't find the culprit.</p>\n<p>In other words, everything works, but I'd hate it if this minor thing caused any problems later in production. I checked with other services that had already been migrated, and I don't think any of those had this thing happening.</p>\n<p>Thank you for any suggestions.</p>\n"},{"tags":["java","vaadin","add-on"],"comments":[{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1693588231,"post_id":77021301,"comment_id":135785657,"body_markdown":"If you inspect the element, is the shadow DOM rendered? Try `zXingVaadin.setSizeFull()`.","body":"If you inspect the element, is the shadow DOM rendered? Try <code>zXingVaadin.setSizeFull()</code>."}],"owner":{"account_id":27518510,"reputation":91,"user_id":20999057,"display_name":"Ji Lin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1693553787,"creation_date":1693553787,"question_id":77021301,"body_markdown":"I want to use the zXingVaadin Addon, in case to provide the function to scan QR Codes.\r\nUsing the following code:\r\n\r\n    public ZXingVaadinReader zXingVaadin;\r\n\tFlexLayout flexLayout;\r\n\r\n\tpublic FlexLayout getQRScanButton() {\r\n\t\tflexLayout = new FlexLayout();\r\n\t\tDiv div = new Div();\r\n\t\tdiv.getStyle().set(&quot;height&quot;, &quot;100px&quot;).set(&quot;width&quot;, &quot;100px&quot;).set(&quot;background-color&quot;, &quot;grey&quot;);\r\n\t\tdiv.add(getzXingVaadinReader());\r\n\t\tflexLayout.add(div);\r\n\t\tflexLayout.setId(&quot;outerQRDiv&quot;);\r\n\r\n\t\treturn flexLayout;\r\n\t}\r\n\r\n\tprivate ZXingVaadinReader getzXingVaadinReader() {\r\n\t\tzXingVaadin = new ZXingVaadinReader();\r\n\t\tzXingVaadin.setFrom(Constants.From.camera);\r\n\t\tzXingVaadin.setId(&quot;video&quot;);\r\n\t\treturn zXingVaadin;\r\n\t}\r\n\r\n\r\nand this in the MainView:\r\n\r\n    QrScanButton qrScanButton = new QrScanButton();\r\n        add(qrScanButton.getQRScanButton());\r\n\r\ni only get an empty zXingVaadinReader Component with the size 0x0. I dont understand what the problem is.\r\n\r\nLink to the Vaadin Addon: \r\nhttps://vaadin.com/directory/component/zxingvaadin\r\n\r\nI also imported the dependency as shown on the website in the pom.xml file","title":"Vaadin Addon doesnt work, not showing component","body":"<p>I want to use the zXingVaadin Addon, in case to provide the function to scan QR Codes.\nUsing the following code:</p>\n<pre><code>public ZXingVaadinReader zXingVaadin;\nFlexLayout flexLayout;\n\npublic FlexLayout getQRScanButton() {\n    flexLayout = new FlexLayout();\n    Div div = new Div();\n    div.getStyle().set(&quot;height&quot;, &quot;100px&quot;).set(&quot;width&quot;, &quot;100px&quot;).set(&quot;background-color&quot;, &quot;grey&quot;);\n    div.add(getzXingVaadinReader());\n    flexLayout.add(div);\n    flexLayout.setId(&quot;outerQRDiv&quot;);\n\n    return flexLayout;\n}\n\nprivate ZXingVaadinReader getzXingVaadinReader() {\n    zXingVaadin = new ZXingVaadinReader();\n    zXingVaadin.setFrom(Constants.From.camera);\n    zXingVaadin.setId(&quot;video&quot;);\n    return zXingVaadin;\n}\n</code></pre>\n<p>and this in the MainView:</p>\n<pre><code>QrScanButton qrScanButton = new QrScanButton();\n    add(qrScanButton.getQRScanButton());\n</code></pre>\n<p>i only get an empty zXingVaadinReader Component with the size 0x0. I dont understand what the problem is.</p>\n<p>Link to the Vaadin Addon:\n<a href=\"https://vaadin.com/directory/component/zxingvaadin\" rel=\"nofollow noreferrer\">https://vaadin.com/directory/component/zxingvaadin</a></p>\n<p>I also imported the dependency as shown on the website in the pom.xml file</p>\n"},{"tags":["java","string","lambda","java-stream"],"comments":[{"owner":{"account_id":1405229,"reputation":8733,"user_id":1333133,"accept_rate":51,"display_name":"Satya"},"score":2,"creation_date":1511762379,"post_id":47504758,"comment_id":81965309,"body_markdown":"a) What have you tried so far? b) Are you trying to re-invent the wheel?","body":"a) What have you tried so far? b) Are you trying to re-invent the wheel?"},{"owner":{"account_id":9165235,"reputation":15414,"user_id":6815131,"display_name":"Joe C"},"score":9,"creation_date":1511762441,"post_id":47504758,"comment_id":81965333,"body_markdown":"Why do you insist on lambdas and streams?","body":"Why do you insist on lambdas and streams?"},{"owner":{"account_id":11474562,"reputation":847,"user_id":8410408,"display_name":"Abhijeetk431"},"score":0,"creation_date":1511762685,"post_id":47504758,"comment_id":81965429,"body_markdown":"Hello and welcome! It might be worth having a look at [this article](https://stackoverflow.com/help/how-to-ask) which has some tips on how to ask a great question that&#39;ll get you the answer you&#39;re looking for.","body":"Hello and welcome! It might be worth having a look at <a href=\"https://stackoverflow.com/help/how-to-ask\">this article</a> which has some tips on how to ask a great question that&#39;ll get you the answer you&#39;re looking for."},{"owner":{"account_id":5715909,"reputation":15062,"user_id":4516110,"accept_rate":81,"display_name":"Mehraj Malik"},"score":1,"creation_date":1511775532,"post_id":47504758,"comment_id":81971230,"body_markdown":"Why to invent **Wheel** again? Cannot use library function??","body":"Why to invent <b>Wheel</b> again? Cannot use library function??"}],"answers":[{"comments":[{"owner":{"account_id":4708838,"reputation":3351,"user_id":3810024,"accept_rate":94,"display_name":"shinjw"},"score":13,"creation_date":1511763111,"post_id":47504825,"comment_id":81965590,"body_markdown":"kind of a testament to @satya&#39;s point... do we really need to use streams or lamdas in this case when `new StringBuilder(word).reverse()` provides the desired effect? IMHO, this is over engineered","body":"kind of a testament to @satya&#39;s point... do we really need to use streams or lamdas in this case when <code>new StringBuilder(word).reverse()</code> provides the desired effect? IMHO, this is over engineered"}],"tags":[],"owner":{"account_id":3869926,"reputation":3576,"user_id":3205437,"accept_rate":100,"display_name":"Vishnu T S"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1511764697,"creation_date":1511762691,"answer_id":47504825,"question_id":47504758,"body_markdown":"Try this for reverse a string using lambda and streams\r\n\r\n   \r\n\r\n    import java.util.stream.Stream;\r\n    import java.util.stream.Collectors;\r\n        \r\n        public class Test  {\r\n        \r\n          \r\n            public static void main(String[] args) {\r\n        \r\n        \t    System.out.println(reverse(&quot;Anirudh&quot;));;\r\n            }\r\n            public static String reverse(String string) {\r\n                return Stream.of(string)\r\n                    .map(word-&gt;new StringBuilder(word).reverse())\r\n                    .collect(Collectors.joining(&quot; &quot;));\r\n            }\r\n        }","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Try this for reverse a string using lambda and streams</p>\n\n<pre><code>import java.util.stream.Stream;\nimport java.util.stream.Collectors;\n\n    public class Test  {\n\n\n        public static void main(String[] args) {\n\n            System.out.println(reverse(\"Anirudh\"));;\n        }\n        public static String reverse(String string) {\n            return Stream.of(string)\n                .map(word-&gt;new StringBuilder(word).reverse())\n                .collect(Collectors.joining(\" \"));\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4708838,"reputation":3351,"user_id":3810024,"accept_rate":94,"display_name":"shinjw"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1511764601,"creation_date":1511764601,"answer_id":47505198,"question_id":47504758,"body_markdown":"Another approach to reversing your String. You can use an IntStream to pull the correct character out of a `char` array.\r\n\r\n    public static void main(String[] args) {\r\n        char[] charArray = &quot;Aniruddh&quot;.toCharArray();\r\n        IntStream.range(0, charArray.length)\r\n            .mapToObj(i -&gt; charArray[(charArray.length - 1) - i])\r\n            .forEach(System.out::print);\r\n    }","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Another approach to reversing your String. You can use an IntStream to pull the correct character out of a <code>char</code> array.</p>\n\n<pre><code>public static void main(String[] args) {\n    char[] charArray = \"Aniruddh\".toCharArray();\n    IntStream.range(0, charArray.length)\n        .mapToObj(i -&gt; charArray[(charArray.length - 1) - i])\n        .forEach(System.out::print);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1522927184,"creation_date":1511784780,"answer_id":47510744,"question_id":47504758,"body_markdown":"If you *really* want to do it for learning purposes, why not reverse the char array?\r\n\r\n    public static String reverse(String test) {\r\n        return IntStream.range(0, test.length())\r\n                .map(i -&gt; test.charAt(test.length() - i - 1))\r\n                .collect(StringBuilder::new, (sb, c) -&gt; sb.append((char) c), StringBuilder::append)\r\n                .toString();\r\n    }\r\n\r\n          ","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>If you <em>really</em> want to do it for learning purposes, why not reverse the char array?</p>\n\n<pre><code>public static String reverse(String test) {\n    return IntStream.range(0, test.length())\n            .map(i -&gt; test.charAt(test.length() - i - 1))\n            .collect(StringBuilder::new, (sb, c) -&gt; sb.append((char) c), StringBuilder::append)\n            .toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7505,"reputation":7034,"user_id":13075,"accept_rate":83,"display_name":"Henrik Aasted S&#248;rensen"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1511785256,"creation_date":1511785256,"answer_id":47510887,"question_id":47504758,"body_markdown":"The easiest way to achieve what you&#39;re asking using streams is probably this:\r\n\r\n    String result = Stream.of(&quot;Aniruddh&quot;).map(__ -&gt; &quot;hddurinA&quot;).findFirst().get();","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>The easiest way to achieve what you're asking using streams is probably this:</p>\n\n<pre><code>String result = Stream.of(\"Aniruddh\").map(__ -&gt; \"hddurinA\").findFirst().get();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1511795676,"post_id":47513712,"comment_id":81984003,"body_markdown":"ingenious way via `reduce` :)","body":"ingenious way via <code>reduce</code> :)"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684742082,"post_id":47513712,"comment_id":134555641,"body_markdown":"I believe you mean &quot;idiomatic&quot;, as opposed to &quot;canonical&quot;.  I don&#39;t believe abstraction can be deemed canonical.","body":"I believe you mean &quot;idiomatic&quot;, as opposed to &quot;canonical&quot;.  I don&#39;t believe abstraction can be deemed canonical."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1684747355,"post_id":47513712,"comment_id":134556783,"body_markdown":"@Reilas yes, today, I’d rather use the word “idiomatic” here.","body":"@Reilas yes, today, I’d rather use the word “idiomatic” here."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684793335,"post_id":47513712,"comment_id":134566083,"body_markdown":"@Holger, lol! Despite that, great answer, +1.","body":"@Holger, lol! Despite that, great answer, +1."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":4,"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1684747501,"creation_date":1511794168,"answer_id":47513712,"question_id":47504758,"body_markdown":"Given a string like\r\n\r\n    String str = &quot;Aniruddh&quot;;\r\n\r\nthe idiomatic solution is\r\n\r\n    String reversed = new StringBuilder(str).reverse().toString();\r\n\r\nIf, perhaps for educational purposes, you want to solve this by streaming over the string’s characters, you can do it like\r\n\r\n    String reversed = str.chars()\r\n        .mapToObj(c -&gt; (char)c)\r\n        .reduce(&quot;&quot;, (s,c) -&gt; c+s, (s1,s2) -&gt; s2+s1);\r\n\r\nThis is not only much more complicated, it also has performance drawbacks.\r\n\r\nThe following solution eliminates boxing related overhead\r\n\r\n    String reversed = str.chars()\r\n        .collect(StringBuilder::new,\r\n                 (b, c) -&gt; b.insert(0, (char)c), (b1, b2) -&gt; b1.insert(0, b2))\r\n        .toString();\r\n\r\nbut is still less efficient because inserting into the beginning of an array based buffer implies copying all previously collected data.\r\n\r\nThe bottom line is, for real applications, stay with the idiomatic solution shown at the beginning.\r\n","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Given a string like</p>\n<pre><code>String str = &quot;Aniruddh&quot;;\n</code></pre>\n<p>the idiomatic solution is</p>\n<pre><code>String reversed = new StringBuilder(str).reverse().toString();\n</code></pre>\n<p>If, perhaps for educational purposes, you want to solve this by streaming over the string’s characters, you can do it like</p>\n<pre><code>String reversed = str.chars()\n    .mapToObj(c -&gt; (char)c)\n    .reduce(&quot;&quot;, (s,c) -&gt; c+s, (s1,s2) -&gt; s2+s1);\n</code></pre>\n<p>This is not only much more complicated, it also has performance drawbacks.</p>\n<p>The following solution eliminates boxing related overhead</p>\n<pre><code>String reversed = str.chars()\n    .collect(StringBuilder::new,\n             (b, c) -&gt; b.insert(0, (char)c), (b1, b2) -&gt; b1.insert(0, b2))\n    .toString();\n</code></pre>\n<p>but is still less efficient because inserting into the beginning of an array based buffer implies copying all previously collected data.</p>\n<p>The bottom line is, for real applications, stay with the idiomatic solution shown at the beginning.</p>\n"},{"comments":[{"owner":{"account_id":16393347,"reputation":13088,"user_id":11841571,"display_name":"Lamanus"},"score":4,"creation_date":1570972476,"post_id":58361965,"comment_id":103078753,"body_markdown":"Even if this is a valid answer, you&#39;d better comment on what is going on and explain a bit of your code.","body":"Even if this is a valid answer, you&#39;d better comment on what is going on and explain a bit of your code."},{"owner":{"account_id":1235278,"reputation":2660,"user_id":1198979,"accept_rate":82,"display_name":"SSP"},"score":2,"creation_date":1570990775,"post_id":58361965,"comment_id":103083367,"body_markdown":"Please explain your answer.","body":"Please explain your answer."}],"tags":[],"owner":{"account_id":11968607,"reputation":29,"user_id":8757622,"display_name":"Rohan Aggarwal"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1570960741,"creation_date":1570956649,"answer_id":58361965,"question_id":47504758,"body_markdown":"```\r\nFunction&lt;String, String&gt; reverse = s -&gt; new StringBuilder(s).reverse().toString();\r\n```","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>Function&lt;String, String&gt; reverse = s -&gt; new StringBuilder(s).reverse().toString();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1650251593,"post_id":59166517,"comment_id":127065258,"body_markdown":"Sorting is redundant, you can generate a descending sequence of indices instead `IntStream.iterate(s.length() - 1, i -&gt; i &gt;= 0, i -&gt; --i)`.","body":"Sorting is redundant, you can generate a descending sequence of indices instead <code>IntStream.iterate(s.length() - 1, i -&gt; i &gt;= 0, i -&gt; --i)</code>."}],"tags":[],"owner":{"account_id":1163881,"reputation":13909,"user_id":1142881,"accept_rate":99,"display_name":"SkyWalker"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575413071,"creation_date":1575413071,"answer_id":59166517,"question_id":47504758,"body_markdown":"Here is another way, doesn&#39;t seem super efficient but will explain why:\r\n\r\n    String s = &quot;blast&quot;;\r\n    IntStream.range(0, s.length()).           // create index [0 .. s.length - 1] \r\n       boxed().                               // the next step requires them boxed\r\n       sorted(Collections.reverseOrder()).    // indices in reverse order\r\n       map(i -&gt; String.valueOf(s.charAt(i))). // grab each index&#39;s character \r\n       collect(Collectors.joining());         // join each single-character String into the final String\r\n\r\nIt would be better if there was a way to append all the Characters without converting each to `String` and then joining them. That&#39;s why I said it doesn&#39;t seem super efficient.\r\n","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Here is another way, doesn't seem super efficient but will explain why:</p>\n\n<pre><code>String s = \"blast\";\nIntStream.range(0, s.length()).           // create index [0 .. s.length - 1] \n   boxed().                               // the next step requires them boxed\n   sorted(Collections.reverseOrder()).    // indices in reverse order\n   map(i -&gt; String.valueOf(s.charAt(i))). // grab each index's character \n   collect(Collectors.joining());         // join each single-character String into the final String\n</code></pre>\n\n<p>It would be better if there was a way to append all the Characters without converting each to <code>String</code> and then joining them. That's why I said it doesn't seem super efficient.</p>\n"},{"tags":[],"owner":{"account_id":8696462,"reputation":1,"user_id":6507654,"display_name":"Chinmay Bhat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578370742,"creation_date":1578370742,"answer_id":59622113,"question_id":47504758,"body_markdown":"Another alternative way would be to split the string into an array of string and use reduce() on it.\r\n\r\n    Stream.of(&quot;Aniruddh&quot;.split(&quot;&quot;)).reduce(&quot;&quot;, (reversed, character) -&gt; character + reversed);","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Another alternative way would be to split the string into an array of string and use reduce() on it.</p>\n\n<pre><code>Stream.of(\"Aniruddh\".split(\"\")).reduce(\"\", (reversed, character) -&gt; character + reversed);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4288616,"reputation":39,"user_id":3505544,"display_name":"Mehdi najafian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581973298,"creation_date":1581967082,"answer_id":60269079,"question_id":47504758,"body_markdown":"Given a String of length S, reverse the whole string without reversing the individual words in it. Words are separated by dots.\r\n\r\n    String str=&quot;abcd.efg.qwerty&quot;;\r\n    \r\n    String reversed = Arrays.asList(str.split(&quot;\\\\.&quot;)).stream().map(m -&gt; new \r\n    StringBuilder(m).reverse().toString()).collect(Collectors.joining(&quot;.&quot;));\r\n    \r\n    System.out.println(reversed);\r\n\r\n","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Given a String of length S, reverse the whole string without reversing the individual words in it. Words are separated by dots.</p>\n\n<pre><code>String str=\"abcd.efg.qwerty\";\n\nString reversed = Arrays.asList(str.split(\"\\\\.\")).stream().map(m -&gt; new \nStringBuilder(m).reverse().toString()).collect(Collectors.joining(\".\"));\n\nSystem.out.println(reversed);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3991944,"reputation":1372,"user_id":3290584,"display_name":"Noorus Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635798565,"creation_date":1635798565,"answer_id":69802476,"question_id":47504758,"body_markdown":"    String str = &quot;Noorus Khan&quot;;\r\n           int len = str.length();\r\n            IntStream.range(0, len)\r\n                    .map(i -&gt; len - 1 - i)\r\n                    .mapToObj(j-&gt;str.charAt(j))\r\n                    .forEach(System.out::print);\r\n\r\n\r\noutput :: nahK surooN","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>String str = &quot;Noorus Khan&quot;;\n       int len = str.length();\n        IntStream.range(0, len)\n                .map(i -&gt; len - 1 - i)\n                .mapToObj(j-&gt;str.charAt(j))\n                .forEach(System.out::print);\n</code></pre>\n<p>output :: nahK surooN</p>\n"},{"tags":[],"owner":{"account_id":8274627,"reputation":95,"user_id":6221281,"display_name":"imshikhararora"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643576109,"creation_date":1643575695,"answer_id":70918788,"question_id":47504758,"body_markdown":"Following is another approach to reverse the input String `str` using Java 8 streams API.\r\n\r\n    String abc = Arrays.asList(str).stream()\r\n        .map(s -&gt; new StringBuilder(s).reverse().toString())\r\n        .collect(Collectors.toList()).get(0);","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>Following is another approach to reverse the input String <code>str</code> using Java 8 streams API.</p>\n<pre><code>String abc = Arrays.asList(str).stream()\n    .map(s -&gt; new StringBuilder(s).reverse().toString())\n    .collect(Collectors.toList()).get(0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7850898,"reputation":353,"user_id":5934386,"display_name":"ITIB"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646929020,"creation_date":1646929020,"answer_id":71427398,"question_id":47504758,"body_markdown":"You can use the below technique to reverse a string using stream.    \r\n\r\n    String str = &quot;Aniruddh&quot;;\r\n\r\n    Stream.iterate(str.length()-1, n-&gt; n &gt;= 0, n-&gt; n-1)\r\n            .map(input::charAt)\r\n            .forEach(System.out::print);","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>You can use the below technique to reverse a string using stream.</p>\n<pre><code>String str = &quot;Aniruddh&quot;;\n\nStream.iterate(str.length()-1, n-&gt; n &gt;= 0, n-&gt; n-1)\n        .map(input::charAt)\n        .forEach(System.out::print);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650251235,"creation_date":1650251235,"answer_id":71907225,"question_id":47504758,"body_markdown":"A **custom collector** can be handy if you want to achieve it with **Stream API** (*I&#39;m treating this task exclusively as an exercise*).\r\n\r\nSince none of the contributors of this question mentioned this possibility, here&#39;s a brief description of how to do that.\r\n\r\n&lt;h3&gt;Creating a Custom Collector&lt;/h3&gt;\r\n\r\nYou can create a *custom collector* either inline by using one of the versions of the static method [`Collector.of()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.function.Function,java.util.stream.Collector.Characteristics...)) or by creating a `class` that implements the `Collector` interface.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n* **Supplier** `Supplier&lt;A&gt;` is meant to provide a *mutable container* which store elements of the stream. It could be a `Collection`, `StringBuilder` or any other mutable object.\r\n* **Accumulator** BiConsumer&lt;A,T&gt; defines how to add elements into the *container* provided by the *supplier*.\r\n* **Combiner** `BinaryOperator&lt;A&gt; combiner()` establishes a rule on how to merge two *containers* in case of parallel execution.\r\n* **Finisher** `Function&lt;A,R&gt;` is meant to produce the final result by transforming the mutable container.\r\n* **Characteristics** allows to provide additional information, for instance `Collector.Characteristics.UNORDERED` signifies that the collector does not guarantee to preserve initial order of elements when the source of the stream is ordered, which can provide better performance in parallel.\r\n\r\n\r\nThe minimum set of parameters boils down to **supplier**, **accumulator** and **combiner** which resembles the arguments of [`collect()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BiConsumer)) operation with one difference - combiner argument expected by `of()` (*as well as the return type of the* `combiner()` *method*) is `BinaryOperator&lt;A&gt;`.\r\n\r\n&lt;h3&gt;Implementations&lt;/h3&gt;\r\n\r\nThe idea behind the first collector is to use `ArrayDeque` as a *mutable container* and add each element from the stream of *code points* to the front of the *deque*.\r\n\r\nPortions of tasks created in parallel will result into several *deques* has to be combined in reversed order. Therefore, in the *combiner* the *left deque* (*containing values from closer to the start of the source string*) gets appended to the *right deque* (*containing values from closer to the end of the source string*), and the *right deque* is being returned as a result.\r\n\r\nFinisher produces an array `int[]` of code point and returns a string based on it.\r\n\r\n`Collector&lt;Integer, Deque&lt;Integer&gt;, String&gt;`\r\n```\r\nString source = &quot;abcdefgh&quot;;\r\n\r\nString reversed = source.codePoints()\r\n    .boxed()\r\n    .collect(Collector.of(\r\n        ArrayDeque::new,\r\n        Deque::addFirst,\r\n        (Deque&lt;Integer&gt; left, Deque&lt;Integer&gt; right) -&gt; { right.addAll(left); return right; },\r\n        (Deque&lt;Integer&gt; deque) -&gt; new String(\r\n            deque.stream().mapToInt(Integer::intValue).toArray(),\r\n            0,\r\n            deque.size())\r\n    ));\r\n```\r\nThe second collector utilizes `char[]` as its mutable container which is being populated according to the indices of the source `IntStream`.\r\n\r\nCombiner merges two arrays by peek the largest value for each position of the array.\r\n\r\nFinisher utilizes constructor `new String(char[])` to generate the resulting string.\r\n\r\n`Collector&lt;Integer, char[], String&gt;`\r\n```\r\nString reversed = IntStream.range(0, source.length())\r\n    .boxed()\r\n    .collect(Collector.of(\r\n        () -&gt; new char[source.length()],\r\n        (char[] arr, Integer i) -&gt; arr[(source.length() - 1) - i] = source.charAt(i),\r\n        (char[] left, char[] right) -&gt; {\r\n            for (int i = 0; i &lt; left.length; i++) left[i] = (char) Math.max(left[i], right[i]); return left;\r\n        },\r\n        String::new\r\n    ));\r\n```\r\n**Output** (*for string* `&quot;abcdefgh&quot;`)\r\n```\r\nhgfedcba\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/e77Xjl.jpg","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>A <strong>custom collector</strong> can be handy if you want to achieve it with <strong>Stream API</strong> (<em>I'm treating this task exclusively as an exercise</em>).</p>\n<p>Since none of the contributors of this question mentioned this possibility, here's a brief description of how to do that.</p>\n<h3>Creating a Custom Collector</h3>\n<p>You can create a <em>custom collector</em> either inline by using one of the versions of the static method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.function.Function,java.util.stream.Collector.Characteristics...)\" rel=\"nofollow noreferrer\"><code>Collector.of()</code></a> or by creating a <code>class</code> that implements the <code>Collector</code> interface.</p>\n<p><a href=\"https://i.stack.imgur.com/e77Xjl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e77Xjl.jpg\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li><strong>Supplier</strong> <code>Supplier&lt;A&gt;</code> is meant to provide a <em>mutable container</em> which store elements of the stream. It could be a <code>Collection</code>, <code>StringBuilder</code> or any other mutable object.</li>\n<li><strong>Accumulator</strong> BiConsumer&lt;A,T&gt; defines how to add elements into the <em>container</em> provided by the <em>supplier</em>.</li>\n<li><strong>Combiner</strong> <code>BinaryOperator&lt;A&gt; combiner()</code> establishes a rule on how to merge two <em>containers</em> in case of parallel execution.</li>\n<li><strong>Finisher</strong> <code>Function&lt;A,R&gt;</code> is meant to produce the final result by transforming the mutable container.</li>\n<li><strong>Characteristics</strong> allows to provide additional information, for instance <code>Collector.Characteristics.UNORDERED</code> signifies that the collector does not guarantee to preserve initial order of elements when the source of the stream is ordered, which can provide better performance in parallel.</li>\n</ul>\n<p>The minimum set of parameters boils down to <strong>supplier</strong>, <strong>accumulator</strong> and <strong>combiner</strong> which resembles the arguments of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>collect()</code></a> operation with one difference - combiner argument expected by <code>of()</code> (<em>as well as the return type of the</em> <code>combiner()</code> <em>method</em>) is <code>BinaryOperator&lt;A&gt;</code>.</p>\n<h3>Implementations</h3>\n<p>The idea behind the first collector is to use <code>ArrayDeque</code> as a <em>mutable container</em> and add each element from the stream of <em>code points</em> to the front of the <em>deque</em>.</p>\n<p>Portions of tasks created in parallel will result into several <em>deques</em> has to be combined in reversed order. Therefore, in the <em>combiner</em> the <em>left deque</em> (<em>containing values from closer to the start of the source string</em>) gets appended to the <em>right deque</em> (<em>containing values from closer to the end of the source string</em>), and the <em>right deque</em> is being returned as a result.</p>\n<p>Finisher produces an array <code>int[]</code> of code point and returns a string based on it.</p>\n<p><code>Collector&lt;Integer, Deque&lt;Integer&gt;, String&gt;</code></p>\n<pre><code>String source = &quot;abcdefgh&quot;;\n\nString reversed = source.codePoints()\n    .boxed()\n    .collect(Collector.of(\n        ArrayDeque::new,\n        Deque::addFirst,\n        (Deque&lt;Integer&gt; left, Deque&lt;Integer&gt; right) -&gt; { right.addAll(left); return right; },\n        (Deque&lt;Integer&gt; deque) -&gt; new String(\n            deque.stream().mapToInt(Integer::intValue).toArray(),\n            0,\n            deque.size())\n    ));\n</code></pre>\n<p>The second collector utilizes <code>char[]</code> as its mutable container which is being populated according to the indices of the source <code>IntStream</code>.</p>\n<p>Combiner merges two arrays by peek the largest value for each position of the array.</p>\n<p>Finisher utilizes constructor <code>new String(char[])</code> to generate the resulting string.</p>\n<p><code>Collector&lt;Integer, char[], String&gt;</code></p>\n<pre><code>String reversed = IntStream.range(0, source.length())\n    .boxed()\n    .collect(Collector.of(\n        () -&gt; new char[source.length()],\n        (char[] arr, Integer i) -&gt; arr[(source.length() - 1) - i] = source.charAt(i),\n        (char[] left, char[] right) -&gt; {\n            for (int i = 0; i &lt; left.length; i++) left[i] = (char) Math.max(left[i], right[i]); return left;\n        },\n        String::new\n    ));\n</code></pre>\n<p><strong>Output</strong> (<em>for string</em> <code>&quot;abcdefgh&quot;</code>)</p>\n<pre><code>hgfedcba\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3747484,"reputation":3573,"user_id":3115822,"display_name":"Borja"},"score":0,"creation_date":1677142043,"post_id":75502112,"comment_id":133280288,"body_markdown":"Code-only answers are considered low quality: make sure to provide an explanation what your code does and how it solves the problem.\nIt will help the asker and future readers both if you can add more information in your post. See also Explaining entirely code-based answers: https://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers","body":"Code-only answers are considered low quality: make sure to provide an explanation what your code does and how it solves the problem. It will help the asker and future readers both if you can add more information in your post. See also Explaining entirely code-based answers: <a href=\"https://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\" title=\"explaining entirely code based answers\">meta.stackexchange.com/questions/114762/&hellip;</a>"}],"tags":[],"owner":{"account_id":27826588,"reputation":1,"user_id":21245880,"display_name":"vijay babu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676828107,"creation_date":1676828107,"answer_id":75502112,"question_id":47504758,"body_markdown":"      public static String reverseStreams(String ex)\r\n      {\r\n    \tchar[] charray=ex.toCharArray();\r\n    \tStringWriter str=new StringWriter();\r\n    \t  IntStream.range(0, charray.length)\r\n    \t    .mapToObj(i-&gt;(charray[(charray.length-1)-i]))\r\n    \t //   .collect(Collectors.toList())\r\n    \t    \r\n    \t    .forEach(s-&gt;str.append(s));\r\n    \t    return str.toString();\r\n    \t    \r\n    \t\r\n    \t\r\n    \r\n       }","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>  public static String reverseStreams(String ex)\n  {\n    char[] charray=ex.toCharArray();\n    StringWriter str=new StringWriter();\n      IntStream.range(0, charray.length)\n        .mapToObj(i-&gt;(charray[(charray.length-1)-i]))\n     //   .collect(Collectors.toList())\n        \n        .forEach(s-&gt;str.append(s));\n        return str.toString();\n        \n    \n    \n\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6401714,"reputation":5744,"user_id":4964136,"accept_rate":100,"display_name":"Vishwa Ratna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681899264,"creation_date":1681899264,"answer_id":76053303,"question_id":47504758,"body_markdown":"    public static void main(String[] args) {\r\n        String str = &quot;I am Vishwa Ratna&quot;;\r\n        String[] split = str.split(&quot;&quot;);\r\n        int len = str.length();\r\n        String collect = IntStream.range(0, len).mapToObj(s -&gt; {\r\n            int k = len - 1;\r\n            String sq = &quot;&quot;;\r\n            sq = split[k - s];\r\n            --k;\r\n            return sq;\r\n\r\n        }).collect(Collectors.joining(&quot;&quot;));\r\n        System.out.println(collect);\r\n    }\r\n\r\nFirst you convert your `String` to `String array` then you iterate through it in reverse order using `Intstream` and then you `collect` your stream to string by `joining`.","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>public static void main(String[] args) {\n    String str = &quot;I am Vishwa Ratna&quot;;\n    String[] split = str.split(&quot;&quot;);\n    int len = str.length();\n    String collect = IntStream.range(0, len).mapToObj(s -&gt; {\n        int k = len - 1;\n        String sq = &quot;&quot;;\n        sq = split[k - s];\n        --k;\n        return sq;\n\n    }).collect(Collectors.joining(&quot;&quot;));\n    System.out.println(collect);\n}\n</code></pre>\n<p>First you convert your <code>String</code> to <code>String array</code> then you iterate through it in reverse order using <code>Intstream</code> and then you <code>collect</code> your stream to string by <code>joining</code>.</p>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684155872,"creation_date":1684155872,"answer_id":76254379,"question_id":47504758,"body_markdown":"One more approach could be writing a custom comparator (this could help reverse any element in collection/array) which would always return &quot;-1&quot;.&quot;-1&quot; being whenever 2 objects are compared the second object will be prior to first in placing order.\r\n\r\n\r\n        Comparator&lt;String&gt; comparator = (s1,s2) -&gt; -1;\r\n        \r\n        String reversed = Arrays.stream(input.split(&quot;&quot;))\r\n                               .sorted(comparator)\r\n                               .collect(Collectors.joining());\r\n                \r\n","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>One more approach could be writing a custom comparator (this could help reverse any element in collection/array) which would always return &quot;-1&quot;.&quot;-1&quot; being whenever 2 objects are compared the second object will be prior to first in placing order.</p>\n<pre><code>    Comparator&lt;String&gt; comparator = (s1,s2) -&gt; -1;\n    \n    String reversed = Arrays.stream(input.split(&quot;&quot;))\n                           .sorted(comparator)\n                           .collect(Collectors.joining());\n            \n</code></pre>\n"},{"tags":[],"owner":{"account_id":9913536,"reputation":33,"user_id":7339305,"display_name":"AmolRavan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693483930,"creation_date":1693483930,"answer_id":77015721,"question_id":47504758,"body_markdown":"The simple Approach I used is\r\n\r\n    String str = &quot;INDIA&quot;;\r\n        IntStream.range(0, str.length()).forEach(i -&gt; System.out.print(str.charAt(str.length() - 1 - i)));","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>The simple Approach I used is</p>\n<pre><code>String str = &quot;INDIA&quot;;\n    IntStream.range(0, str.length()).forEach(i -&gt; System.out.print(str.charAt(str.length() - 1 - i)));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6767185,"reputation":17855,"user_id":5211833,"accept_rate":83,"display_name":"Adriaan"},"score":4,"creation_date":1693553565,"post_id":77021283,"comment_id":135779024,"body_markdown":"Please read [answer] and [edit] your answer to contain an explanation as to why this code would actually solve the problem at hand. Always remember that you&#39;re not only solving the problem, but are also educating the OP and any future readers of this post.","body":"Please read <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a> and <a href=\"https://stackoverflow.com/posts/77021283/edit\">edit</a> your answer to contain an explanation as to why this code would actually solve the problem at hand. Always remember that you&#39;re not only solving the problem, but are also educating the OP and any future readers of this post."}],"tags":[],"owner":{"account_id":3872677,"reputation":1,"user_id":3207578,"display_name":"nasakh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693553667,"creation_date":1693553515,"answer_id":77021283,"question_id":47504758,"body_markdown":"```\r\nString str = &quot;abc&quot;;\r\nStringBuilder result = new StringBuilder(&quot;&quot;);\r\nStream.of(str.split(&quot;&quot;)).forEach(c -&gt; result.insert(0,c));\r\n```","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<pre><code>String str = &quot;abc&quot;;\nStringBuilder result = new StringBuilder(&quot;&quot;);\nStream.of(str.split(&quot;&quot;)).forEach(c -&gt; result.insert(0,c));\n</code></pre>\n"}],"owner":{"account_id":1813648,"reputation":259,"user_id":1649217,"display_name":"Aniruddh Dwivedi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71773,"favorite_count":0,"down_vote_count":2,"up_vote_count":21,"answer_count":18,"score":19,"last_activity_date":1693553667,"creation_date":1511762295,"question_id":47504758,"body_markdown":"I have one string say `&quot;Aniruddh&quot;` and I want to reverse it using lambdas and streams in Java 8. How can I do it?","title":"How can I reverse a single String in Java 8 using Lambda and Streams?","body":"<p>I have one string say <code>\"Aniruddh\"</code> and I want to reverse it using lambdas and streams in Java 8. How can I do it?</p>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1693552658,"creation_date":1693552658,"answer_id":77021204,"question_id":77020800,"body_markdown":"Certainly! You should include both slf4j-api and log4j-over-slf4j libraries in your project. They serve different roles within the SLF4J logging framework.\r\n\r\nslf4j-api: Think of this as the &quot;logging interface&quot; you use in your code to make log statements. It&#39;s like the language you speak when you want to log something. Without it, you won&#39;t be able to write log messages using SLF4J.\r\n\r\nlog4j-over-slf4j: This library acts like a bridge between SLF4J and the Log4j logging system. It allows you to use Log4j for actual logging while speaking SLF4J. This can be handy if you have other parts of your project that rely on Log4j but you prefer using SLF4J for your application&#39;s logging.\r\n\r\nSince you mentioned that removing slf4j-api would cause compile-time issues, it means your code relies on SLF4J for logging. So, you should keep both slf4j-api and log4j-over-slf4j in your project dependencies. This way, your code can continue to use the SLF4J API for logging, and the log4j-over-slf4j library will make sure those log calls get directed to Log4j behind the scenes.\r\n\r\nIn summary, having both slf4j-api and log4j-over-slf4j in your build.gradle is the way to go to ensure your logging works as expected.","title":"How to handle library specific implicit dependencies in gradle","body":"<p>Certainly! You should include both slf4j-api and log4j-over-slf4j libraries in your project. They serve different roles within the SLF4J logging framework.</p>\n<p>slf4j-api: Think of this as the &quot;logging interface&quot; you use in your code to make log statements. It's like the language you speak when you want to log something. Without it, you won't be able to write log messages using SLF4J.</p>\n<p>log4j-over-slf4j: This library acts like a bridge between SLF4J and the Log4j logging system. It allows you to use Log4j for actual logging while speaking SLF4J. This can be handy if you have other parts of your project that rely on Log4j but you prefer using SLF4J for your application's logging.</p>\n<p>Since you mentioned that removing slf4j-api would cause compile-time issues, it means your code relies on SLF4J for logging. So, you should keep both slf4j-api and log4j-over-slf4j in your project dependencies. This way, your code can continue to use the SLF4J API for logging, and the log4j-over-slf4j library will make sure those log calls get directed to Log4j behind the scenes.</p>\n<p>In summary, having both slf4j-api and log4j-over-slf4j in your build.gradle is the way to go to ensure your logging works as expected.</p>\n"}],"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77021204,"answer_count":1,"score":0,"last_activity_date":1693552658,"creation_date":1693548051,"question_id":77020800,"body_markdown":"./gradlew dependencies shows the following slf4j libraries, should I include both of these libraries or should I use log4j-over-slf4j alone since it includes the slf4j-api\r\n\r\n    +--- org.slf4j:slf4j-api:2.0.7\r\n    +--- org.slf4j:log4j-over-slf4j:2.0.7\r\n    |    \\--- org.slf4j:slf4j-api:2.0.7\r\n\r\n\r\nRight now, I include both of the libraries in build.gradle. If I remove slf4j-api, I would run into compile time issues","title":"How to handle library specific implicit dependencies in gradle","body":"<p>./gradlew dependencies shows the following slf4j libraries, should I include both of these libraries or should I use log4j-over-slf4j alone since it includes the slf4j-api</p>\n<pre><code>+--- org.slf4j:slf4j-api:2.0.7\n+--- org.slf4j:log4j-over-slf4j:2.0.7\n|    \\--- org.slf4j:slf4j-api:2.0.7\n</code></pre>\n<p>Right now, I include both of the libraries in build.gradle. If I remove slf4j-api, I would run into compile time issues</p>\n"},{"tags":["java","string","expression","evaluator"],"comments":[{"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"score":1,"creation_date":1285861710,"post_id":3832323,"comment_id":4069318,"body_markdown":"That&#39;s not remotely syntactically correct Java code. Is that intentional?","body":"That&#39;s not remotely syntactically correct Java code. Is that intentional?"},{"owner":{"account_id":26091,"reputation":178014,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"score":1,"creation_date":1285861822,"post_id":3832323,"comment_id":4069343,"body_markdown":"I guess it is. He&#39;s looking for a Java-Evaluator for a Non-Java-Language (string and mathematical expressions).","body":"I guess it is. He&#39;s looking for a Java-Evaluator for a Non-Java-Language (string and mathematical expressions)."},{"owner":{"account_id":26091,"reputation":178014,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"score":0,"creation_date":1285861846,"post_id":3832323,"comment_id":4069348,"body_markdown":"Take a look at JEKS: http://www.eteks.com/jeks/en/","body":"Take a look at JEKS: <a href=\"http://www.eteks.com/jeks/en/\" rel=\"nofollow noreferrer\">eteks.com/jeks/en</a>"},{"owner":{"account_id":175182,"reputation":5658,"user_id":405022,"accept_rate":57,"display_name":"Andez"},"score":0,"creation_date":1285862386,"post_id":3832323,"comment_id":4069436,"body_markdown":"We use Jeks...  But I cannot see how you can evaluate IF(&quot;Test 1&quot; = &quot;Test 2&quot;)","body":"We use Jeks...  But I cannot see how you can evaluate IF(&quot;Test 1&quot; = &quot;Test 2&quot;)"}],"answers":[{"tags":[],"owner":{"account_id":648221,"reputation":2065,"user_id":442720,"display_name":"Anon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1285862842,"creation_date":1285862842,"answer_id":3832542,"question_id":3832323,"body_markdown":"There are a lot of tools out there to evaluate expressions; the correct answer will depend on your exact goals.\r\n\r\nTwo things that I&#39;d look at:\r\n\r\n - [Commons EL][1], which evaluates [JSP 2.0 expression language][2].\r\n - [Rhino][3], which evaluates JavaScript (I think this is part of JDK 1.6, but haven&#39;t used it as such).\r\n\r\n\r\n  [1]: http://commons.apache.org/el/\r\n  [2]: http://java.sun.com/products/jsp/syntax/2.0/syntaxref207.html\r\n  [3]: http://www.mozilla.org/rhino/","title":"Java String and Mathematical Expression Evaluators","body":"<p>There are a lot of tools out there to evaluate expressions; the correct answer will depend on your exact goals.</p>\n\n<p>Two things that I'd look at:</p>\n\n<ul>\n<li><a href=\"http://commons.apache.org/el/\" rel=\"nofollow\">Commons EL</a>, which evaluates <a href=\"http://java.sun.com/products/jsp/syntax/2.0/syntaxref207.html\" rel=\"nofollow\">JSP 2.0 expression language</a>.</li>\n<li><a href=\"http://www.mozilla.org/rhino/\" rel=\"nofollow\">Rhino</a>, which evaluates JavaScript (I think this is part of JDK 1.6, but haven't used it as such).</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":175182,"reputation":5658,"user_id":405022,"accept_rate":57,"display_name":"Andez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1287069109,"creation_date":1287069109,"answer_id":3934680,"question_id":3832323,"body_markdown":"The answer was a posting on the Jeks forum.  I got an answer from Manu.  I thought it was not active especially as I could not register on it - but that got sorted.\r\n\r\nBut if anyone has the same problem then the following lines of code will get it working:\r\n\r\n    ExpressionParser parser; // we did have = new ExpressionParser(new JeksExpressionSyntax(), null);\r\n    JeksInterpreter interpreter; // \r\n\r\nAnd to create the interpreter:\r\n\r\n    interpreter = new JeksInterpreter() {\r\n            \r\n          @Override\r\n          public Object getBinaryOperatorValue (Object binaryOperatorKey, Object param1, Object param2)\r\n          {\r\n            // Only functions may take a cell set as parameter\r\n            if ( param1 instanceof JeksCellSet || param2 instanceof JeksCellSet)\r\n              throw new IllegalArgumentException ();\r\n            // Enabled comparison between any type supported by Jeks\r\n            else if (binaryOperatorKey.equals (JeksExpressionSyntax.OPERATOR_EQUAL))\r\n              return param1 != null &amp;&amp; param1.equals (param2)\r\n                       ? Boolean.TRUE : Boolean.FALSE;\r\n            // Enabled comparison between any type supported by Jeks\r\n            else if (binaryOperatorKey.equals (JeksExpressionSyntax.OPERATOR_DIFFERENT))\r\n              return param1 != null &amp;&amp; param1.equals (param2) ? Boolean.FALSE : Boolean.TRUE;\r\n            else\r\n              return super.getBinaryOperatorValue (binaryOperatorKey, param1, param2);\r\n          }\r\n        };\r\n\r\n        parser = new ExpressionParser(new JeksExpressionSyntax(), null);","title":"Java String and Mathematical Expression Evaluators","body":"<p>The answer was a posting on the Jeks forum.  I got an answer from Manu.  I thought it was not active especially as I could not register on it - but that got sorted.</p>\n\n<p>But if anyone has the same problem then the following lines of code will get it working:</p>\n\n<pre><code>ExpressionParser parser; // we did have = new ExpressionParser(new JeksExpressionSyntax(), null);\nJeksInterpreter interpreter; // \n</code></pre>\n\n<p>And to create the interpreter:</p>\n\n<pre><code>interpreter = new JeksInterpreter() {\n\n      @Override\n      public Object getBinaryOperatorValue (Object binaryOperatorKey, Object param1, Object param2)\n      {\n        // Only functions may take a cell set as parameter\n        if ( param1 instanceof JeksCellSet || param2 instanceof JeksCellSet)\n          throw new IllegalArgumentException ();\n        // Enabled comparison between any type supported by Jeks\n        else if (binaryOperatorKey.equals (JeksExpressionSyntax.OPERATOR_EQUAL))\n          return param1 != null &amp;&amp; param1.equals (param2)\n                   ? Boolean.TRUE : Boolean.FALSE;\n        // Enabled comparison between any type supported by Jeks\n        else if (binaryOperatorKey.equals (JeksExpressionSyntax.OPERATOR_DIFFERENT))\n          return param1 != null &amp;&amp; param1.equals (param2) ? Boolean.FALSE : Boolean.TRUE;\n        else\n          return super.getBinaryOperatorValue (binaryOperatorKey, param1, param2);\n      }\n    };\n\n    parser = new ExpressionParser(new JeksExpressionSyntax(), null);\n</code></pre>\n"}],"owner":{"account_id":175182,"reputation":5658,"user_id":405022,"accept_rate":57,"display_name":"Andez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2805,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":3934680,"answer_count":2,"score":1,"last_activity_date":1693552391,"creation_date":1285861650,"question_id":3832323,"body_markdown":"We use the Jeks parser at present to evaluate expressions.  I cannot see a way to evaluate string expressions with it - for example:\r\n\r\n**IF( &quot;Test 1&quot; = &quot;Test 2&quot;)**\r\n\r\nIs there anything out there that can evaluate string and mathematical expressions in Java?  Preferably free or open source.\r\n","title":"Java String and Mathematical Expression Evaluators","body":"<p>We use the Jeks parser at present to evaluate expressions.  I cannot see a way to evaluate string expressions with it - for example:</p>\n<p><strong>IF( &quot;Test 1&quot; = &quot;Test 2&quot;)</strong></p>\n<p>Is there anything out there that can evaluate string and mathematical expressions in Java?  Preferably free or open source.</p>\n"},{"tags":["java","string","math","scriptengine","symja"],"comments":[{"owner":{"account_id":3467749,"reputation":926,"user_id":2902894,"accept_rate":80,"display_name":"drgPP"},"score":1,"creation_date":1427276606,"post_id":29252057,"comment_id":46707940,"body_markdown":"can you give a example of string you are using ?","body":"can you give a example of string you are using ?"},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1460687152,"post_id":29252057,"comment_id":60869382,"body_markdown":"The ScriptEngine solution you are already using is a complete JavaScript interpreter, so it already supports functions.","body":"The ScriptEngine solution you are already using is a complete JavaScript interpreter, so it already supports functions."}],"answers":[{"tags":[],"owner":{"account_id":3914698,"reputation":469,"user_id":3238865,"accept_rate":77,"display_name":"grey00"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427277515,"creation_date":1427277515,"answer_id":29252490,"question_id":29252057,"body_markdown":"Take a look at the Math and String classes of the javadoc. If you know the format of the string, you should be able to search through it to find the specific numbers and functions you&#39;re using. If you are only using one of the avg/max/min per input, it should be pretty easy.\r\n\r\nHere&#39;s an example, lets say you want it formatted like so (it&#39;s easy if theres a comma after every value):\r\n\r\n&quot;FUNCTION(a, b, c,)&quot; -&gt; &quot;MIN(3,6,8,)&quot;\r\n\r\nThe first thing you want to do is have it figure out which function you&#39;re doing. Using the indexOf method, we can figure out if it contains MIN or MAX or whatever.\r\n\r\n     if(expression.indexOf(&quot;MIN&quot; != -1){\r\n          //calculate min value\r\n     }\r\n\r\nYou&#39;ll also need to create a list of all the numbers you&#39;re using.\r\n     \r\n     int lastIndex = exression.indexOf(&quot;(&quot;);\r\n     while(lastIndex &lt; expression.lastIndexOf(&quot;,&quot;){\r\n          listOfNums.add(Integer.parseInt(expression.subString(lastIndex + 1, expression.indexOf(&quot;,&quot;, lastIndex + 1)));\r\n          lastIndex = expression.indexOf(&quot;,&quot;, lastIndex + 1);\r\n      }","title":"How to evaluate string math expression in java","body":"<p>Take a look at the Math and String classes of the javadoc. If you know the format of the string, you should be able to search through it to find the specific numbers and functions you're using. If you are only using one of the avg/max/min per input, it should be pretty easy.</p>\n\n<p>Here's an example, lets say you want it formatted like so (it's easy if theres a comma after every value):</p>\n\n<p>\"FUNCTION(a, b, c,)\" -> \"MIN(3,6,8,)\"</p>\n\n<p>The first thing you want to do is have it figure out which function you're doing. Using the indexOf method, we can figure out if it contains MIN or MAX or whatever.</p>\n\n<pre><code> if(expression.indexOf(\"MIN\" != -1){\n      //calculate min value\n }\n</code></pre>\n\n<p>You'll also need to create a list of all the numbers you're using.</p>\n\n<pre><code> int lastIndex = exression.indexOf(\"(\");\n while(lastIndex &lt; expression.lastIndexOf(\",\"){\n      listOfNums.add(Integer.parseInt(expression.subString(lastIndex + 1, expression.indexOf(\",\", lastIndex + 1)));\n      lastIndex = expression.indexOf(\",\", lastIndex + 1);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3058979,"reputation":169,"user_id":2592073,"display_name":"Michael Couck"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693552383,"creation_date":1427285172,"answer_id":29255203,"question_id":29252057,"body_markdown":"There are two very good expression parsers, JEP(paid now unfortunately - http://www.singularsys.com/jep/) and Jexl(much more than just an expression parser - http://commons.apache.org/proper/commons-jexl/).\r\n\r\nI prefer Jexl, so here is an example:\r\n\r\n    JexlEngine jexl = new JexlEngine();\r\n    // The expression to evaluate\r\n    Expression e = jexl.createExpression(&quot;((a || b) || !c) &amp;&amp; !(d &amp;&amp; e)&quot;);\r\n\r\n    // Populate the context\r\n    JexlContext context = new MapContext();\r\n    context.set(&quot;a&quot;, true);\r\n    context.set(&quot;b&quot;, true);\r\n    context.set(&quot;c&quot;, true);\r\n    context.set(&quot;d&quot;, true);\r\n    context.set(&quot;e&quot;, true);\r\n\r\n    // Work it out\r\n    Object result = e.evaluate(context);\r\n\r\nMore examples - http://commons.apache.org/proper/commons-jexl/reference/examples.html\r\n","title":"How to evaluate string math expression in java","body":"<p>There are two very good expression parsers, JEP(paid now unfortunately - <a href=\"http://www.singularsys.com/jep/\" rel=\"nofollow noreferrer\">http://www.singularsys.com/jep/</a>) and Jexl(much more than just an expression parser - <a href=\"http://commons.apache.org/proper/commons-jexl/\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-jexl/</a>).</p>\n<p>I prefer Jexl, so here is an example:</p>\n<pre><code>JexlEngine jexl = new JexlEngine();\n// The expression to evaluate\nExpression e = jexl.createExpression(&quot;((a || b) || !c) &amp;&amp; !(d &amp;&amp; e)&quot;);\n\n// Populate the context\nJexlContext context = new MapContext();\ncontext.set(&quot;a&quot;, true);\ncontext.set(&quot;b&quot;, true);\ncontext.set(&quot;c&quot;, true);\ncontext.set(&quot;d&quot;, true);\ncontext.set(&quot;e&quot;, true);\n\n// Work it out\nObject result = e.evaluate(context);\n</code></pre>\n<p>More examples - <a href=\"http://commons.apache.org/proper/commons-jexl/reference/examples.html\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-jexl/reference/examples.html</a></p>\n"}],"owner":{"account_id":5996884,"reputation":1,"user_id":4711290,"display_name":"Fridolin Amadou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1460687190,"answer_count":2,"score":0,"last_activity_date":1693552383,"creation_date":1427276402,"question_id":29252057,"body_markdown":"\r\nI want to evaluate a sting math expression in java. This string should contain functions (avg, max, min, ...)  applied to vectors or simple numbers.\r\nI already use ScriptEngineManager with javasript engine but it just use numbers. I also see symja lib but it look too complicated et not documented. How to do?\r\nThanks","title":"How to evaluate string math expression in java","body":"<p>I want to evaluate a sting math expression in java. This string should contain functions (avg, max, min, ...)  applied to vectors or simple numbers.\nI already use ScriptEngineManager with javasript engine but it just use numbers. I also see symja lib but it look too complicated et not documented. How to do?\nThanks</p>\n"},{"tags":["java","apache-fop"],"comments":[{"owner":{"account_id":5624664,"reputation":3721,"user_id":4453460,"display_name":"lfurini"},"score":0,"creation_date":1693570096,"post_id":77020497,"comment_id":135782028,"body_markdown":"Do you have any `&lt;directory&gt;/path/to/folder&lt;directory&gt;` or `&lt;auto-detect/&gt;` element in your configuration? If that&#39;s the case, there could be an unusual font in the folder that FOP cannot configure automatically, and the error would pop up only when the [font cache](https://xmlgraphics.apache.org/fop/2.9/fonts.html#font-cache) is built.","body":"Do you have any <code>&lt;directory&gt;&#47;path&#47;to&#47;folder&lt;directory&gt;</code> or <code>&lt;auto-detect&#47;&gt;</code> element in your configuration? If that&#39;s the case, there could be an unusual font in the folder that FOP cannot configure automatically, and the error would pop up only when the <a href=\"https://xmlgraphics.apache.org/fop/2.9/fonts.html#font-cache\" rel=\"nofollow noreferrer\">font cache</a> is built."},{"owner":{"account_id":1826220,"reputation":795,"user_id":1658941,"accept_rate":22,"display_name":"Naveen"},"score":0,"creation_date":1693946840,"post_id":77020497,"comment_id":135826139,"body_markdown":"I dont have &lt;auto-detect/&gt; in project,  directory folder exist in pom.xml. &lt;build&gt; &lt;resources&gt;&lt;directory&gt;src/main/resources&lt;/directory&gt;...","body":"I dont have &lt;auto-detect/&gt; in project,  directory folder exist in pom.xml. &lt;build&gt; &lt;resources&gt;&lt;directory&gt;src/main/resources&lt;/directory&gt;..."}],"owner":{"account_id":1826220,"reputation":795,"user_id":1658941,"accept_rate":22,"display_name":"Naveen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693552030,"creation_date":1693542356,"question_id":77020497,"body_markdown":"I am getting intermittent error while generating PDF using FOP.\r\n\r\n   \r\n\r\n     org.apache.fop.apps.FOPException: font without font-triplet\r\n    \tat org.apache.fop.util.LogUtil.handleError(LogUtil.java:42)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$ParserHelper.parseFonts(DefaultFontConfig.java:146)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$ParserHelper.parse(DefaultFontConfig.java:113)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$ParserHelper.&lt;init&gt;(DefaultFontConfig.java:108)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$ParserHelper.&lt;init&gt;(DefaultFontConfig.java:84)\r\n    \tat org.apache.fop.fonts.DefaultFontConfig$DefaultFontConfigParser.parse(DefaultFontConfig.java:74)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfig$ParserHelper.&lt;init&gt;(PDFRendererConfig.java:126)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfig$ParserHelper.&lt;init&gt;(PDFRendererConfig.java:109)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfig$PDFRendererConfigParser.build(PDFRendererConfig.java:101)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfig$PDFRendererConfigParser.build(PDFRendererConfig.java:97)\r\n    \tat org.apache.fop.apps.FopFactory.getRendererConfig(FopFactory.java:310)\r\n    \tat org.apache.fop.apps.FOUserAgent.getRendererConfig(FOUserAgent.java:663)\r\n    \tat org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:91)\r\n    \tat org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:80)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfigurator.configure(PDFRendererConfigurator.java:45)\r\n    Wrapped by: org.apache.fop.apps.FOPException: font without font-triplet\r\n    \tat org.apache.fop.apps.FopFactory.getRendererConfig(FopFactory.java:313)\r\n    \tat org.apache.fop.apps.FOUserAgent.getRendererConfig(FOUserAgent.java:663)\r\n    \tat org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:91)\r\n    \tat org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:80)\r\n    \tat org.apache.fop.render.pdf.PDFRendererConfigurator.configure(PDFRendererConfigurator.java:45)\r\n    \tat org.apache.fop.render.RendererFactory.createDocumentHandler(RendererFactory.java:397)\r\n    \tat org.apache.fop.render.RendererFactory.tryIFDocumentHandlerMaker(RendererFactory.java:297)\r\n\r\nI have configured font triplets:\r\n\r\n            &lt;font embed-url=&quot;classpath:/fop/static/fonts/arial.ttf&quot;&gt;\r\n              &lt;font-triplet style=&quot;normal&quot; name=&quot;Arial&quot; weight=&quot;normal&quot;/&gt;\r\n            &lt;/font&gt;\r\n            &lt;font embed-url=&quot;classpath:/fop/static/fonts/arialbd.ttf&quot;&gt;\r\n              &lt;font-triplet style=&quot;normal&quot; name=&quot;Arial&quot; weight=&quot;bold&quot;/&gt;\r\n            &lt;/font&gt;\r\n            .........\r\n\r\nThis issue is happening randomly most of the time PDF is generated successfully. Error is not specific for which font its not able to find font-triplet. \r\n\r\n","title":"org.apache.fop.apps.FOPException: font without font-triplet","body":"<p>I am getting intermittent error while generating PDF using FOP.</p>\n<pre><code> org.apache.fop.apps.FOPException: font without font-triplet\n    at org.apache.fop.util.LogUtil.handleError(LogUtil.java:42)\n    at org.apache.fop.fonts.DefaultFontConfig$ParserHelper.parseFonts(DefaultFontConfig.java:146)\n    at org.apache.fop.fonts.DefaultFontConfig$ParserHelper.parse(DefaultFontConfig.java:113)\n    at org.apache.fop.fonts.DefaultFontConfig$ParserHelper.&lt;init&gt;(DefaultFontConfig.java:108)\n    at org.apache.fop.fonts.DefaultFontConfig$ParserHelper.&lt;init&gt;(DefaultFontConfig.java:84)\n    at org.apache.fop.fonts.DefaultFontConfig$DefaultFontConfigParser.parse(DefaultFontConfig.java:74)\n    at org.apache.fop.render.pdf.PDFRendererConfig$ParserHelper.&lt;init&gt;(PDFRendererConfig.java:126)\n    at org.apache.fop.render.pdf.PDFRendererConfig$ParserHelper.&lt;init&gt;(PDFRendererConfig.java:109)\n    at org.apache.fop.render.pdf.PDFRendererConfig$PDFRendererConfigParser.build(PDFRendererConfig.java:101)\n    at org.apache.fop.render.pdf.PDFRendererConfig$PDFRendererConfigParser.build(PDFRendererConfig.java:97)\n    at org.apache.fop.apps.FopFactory.getRendererConfig(FopFactory.java:310)\n    at org.apache.fop.apps.FOUserAgent.getRendererConfig(FOUserAgent.java:663)\n    at org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:91)\n    at org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:80)\n    at org.apache.fop.render.pdf.PDFRendererConfigurator.configure(PDFRendererConfigurator.java:45)\nWrapped by: org.apache.fop.apps.FOPException: font without font-triplet\n    at org.apache.fop.apps.FopFactory.getRendererConfig(FopFactory.java:313)\n    at org.apache.fop.apps.FOUserAgent.getRendererConfig(FOUserAgent.java:663)\n    at org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:91)\n    at org.apache.fop.render.PrintRendererConfigurator.getRendererConfig(PrintRendererConfigurator.java:80)\n    at org.apache.fop.render.pdf.PDFRendererConfigurator.configure(PDFRendererConfigurator.java:45)\n    at org.apache.fop.render.RendererFactory.createDocumentHandler(RendererFactory.java:397)\n    at org.apache.fop.render.RendererFactory.tryIFDocumentHandlerMaker(RendererFactory.java:297)\n</code></pre>\n<p>I have configured font triplets:</p>\n<pre><code>        &lt;font embed-url=&quot;classpath:/fop/static/fonts/arial.ttf&quot;&gt;\n          &lt;font-triplet style=&quot;normal&quot; name=&quot;Arial&quot; weight=&quot;normal&quot;/&gt;\n        &lt;/font&gt;\n        &lt;font embed-url=&quot;classpath:/fop/static/fonts/arialbd.ttf&quot;&gt;\n          &lt;font-triplet style=&quot;normal&quot; name=&quot;Arial&quot; weight=&quot;bold&quot;/&gt;\n        &lt;/font&gt;\n        .........\n</code></pre>\n<p>This issue is happening randomly most of the time PDF is generated successfully. Error is not specific for which font its not able to find font-triplet.</p>\n"},{"tags":["java","json","jackson","deserialization"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":6,"creation_date":1398278855,"post_id":16570073,"comment_id":35581125,"body_markdown":"Are you certain `@JsonUnwrapped` is working for deserialization? I just tried it and am getting `Could not read JSON: Unrecognized field...` errors when I try to deserialize the flattened JSON.","body":"Are you certain <code>@JsonUnwrapped</code> is working for deserialization? I just tried it and am getting <code>Could not read JSON: Unrecognized field...</code> errors when I try to deserialize the flattened JSON."}],"answers":[{"comments":[{"owner":{"account_id":146532,"reputation":2490,"user_id":357026,"accept_rate":69,"display_name":"Shaun"},"score":2,"creation_date":1368635871,"post_id":16570333,"comment_id":23809460,"body_markdown":"Good point. This does answer the question of how to preserve jackson type/field checking in JsonCreators in general, which might be the only useful question remaining. =)","body":"Good point. This does answer the question of how to preserve jackson type/field checking in JsonCreators in general, which might be the only useful question remaining. =)"}],"tags":[],"owner":{"account_id":2014980,"reputation":9943,"user_id":1802512,"accept_rate":80,"display_name":"hoaz"},"comment_count":1,"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1368635225,"creation_date":1368635225,"answer_id":16570333,"question_id":16570073,"body_markdown":"You can use `@JsonCreator` with `@JsonProperty` for each field:\r\n\r\n\t@JsonCreator\r\n\tpublic Parent(@JsonProperty(&quot;age&quot;) Integer age, @JsonProperty(&quot;firstName&quot;) String firstName,\r\n            @JsonProperty(&quot;lastName&quot;) String lastName) {\r\n\t\tthis.age = age;\r\n\t\tthis.name = new Name(firstName, lastName);\r\n\t}\r\n\r\nJackson does type checking and unknown field checking for you in this case.","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>You can use <code>@JsonCreator</code> with <code>@JsonProperty</code> for each field:</p>\n\n<pre><code>@JsonCreator\npublic Parent(@JsonProperty(\"age\") Integer age, @JsonProperty(\"firstName\") String firstName,\n        @JsonProperty(\"lastName\") String lastName) {\n    this.age = age;\n    this.name = new Name(firstName, lastName);\n}\n</code></pre>\n\n<p>Jackson does type checking and unknown field checking for you in this case.</p>\n"},{"tags":[],"owner":{"account_id":3941187,"reputation":797,"user_id":3255540,"display_name":"Jan Mares"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1529606936,"creation_date":1529606936,"answer_id":50975650,"question_id":16570073,"body_markdown":"For those who googled here like me, trying to resolve issue when deserializing unwrapepd `Map`, there is a solution with `@JsonAnySetter`:\r\n\r\n    public class CountryList\r\n    {\r\n\r\n    \tMap&lt;String, Country&gt; countries = new HashMap&lt;&gt;();\r\n\r\n    \t@JsonAnySetter\r\n    \tpublic void setCountry(String key, Country value)\r\n\t    {\r\n\t\t    countries.put(key, value);\r\n\t    }\r\n\r\n    }\r\n","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>For those who googled here like me, trying to resolve issue when deserializing unwrapepd <code>Map</code>, there is a solution with <code>@JsonAnySetter</code>:</p>\n\n<pre><code>public class CountryList\n{\n\n    Map&lt;String, Country&gt; countries = new HashMap&lt;&gt;();\n\n    @JsonAnySetter\n    public void setCountry(String key, Country value)\n    {\n        countries.put(key, value);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1381048,"reputation":3561,"user_id":1314028,"accept_rate":75,"display_name":"spinlok"},"comment_count":0,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1535396211,"creation_date":1535396211,"answer_id":52045439,"question_id":16570073,"body_markdown":"It does work for deserialization as well, although it&#39;s not mentioned in the docs explicitly, like you said. See the unit test for deserialization of `@JsonUnwrapped` here for confirmation - https://github.com/FasterXML/jackson-databind/blob/d2c083a6220f2875c97c29f4823d9818972511dc/src/test/java/com/fasterxml/jackson/databind/struct/TestUnwrapped.java#L138","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>It does work for deserialization as well, although it's not mentioned in the docs explicitly, like you said. See the unit test for deserialization of <code>@JsonUnwrapped</code> here for confirmation - <a href=\"https://github.com/FasterXML/jackson-databind/blob/d2c083a6220f2875c97c29f4823d9818972511dc/src/test/java/com/fasterxml/jackson/databind/struct/TestUnwrapped.java#L138\" rel=\"noreferrer\">https://github.com/FasterXML/jackson-databind/blob/d2c083a6220f2875c97c29f4823d9818972511dc/src/test/java/com/fasterxml/jackson/databind/struct/TestUnwrapped.java#L138</a></p>\n"},{"tags":[],"owner":{"account_id":7173795,"reputation":159,"user_id":5480471,"display_name":"Artem Areshko"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1581008519,"creation_date":1580998894,"answer_id":60097109,"question_id":16570073,"body_markdown":"`@JsonUnwrapped` works for both serialization and deserialization, you shouldn&#39;t need to take any additional steps.","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p><code>@JsonUnwrapped</code> works for both serialization and deserialization, you shouldn't need to take any additional steps.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1693551529,"creation_date":1612549284,"answer_id":66068579,"question_id":16570073,"body_markdown":"No changes are needed to your source object using `@JsonUnwrapped` to deserialize JSON back into the `Parent` class.\r\n\r\nDespite not being mentioned in the Javadocs prior to Jackson 2.13 (per [\r\njackson-annotations#184](https://github.com/FasterXML/jackson-annotations/issues/184)), the `@JsonUnwrapped` annotation applies to deserialization as well as serialization, so no additional configuration is needed to support deserialization of a field using the annotation.\r\n\r\nThe Jackson 2.13 [Javadocs for `@JsonUnwrapped`](http://fasterxml.github.io/jackson-annotations/javadoc/2.13/com/fasterxml/jackson/annotation/JsonUnwrapped.html) clarify that the annotation applies to deserialization as well as serialization:\r\n\r\n&gt; Annotation used to indicate that a property should be serialized &quot;unwrapped&quot; -- that is, if it would be serialized as JSON Object, its properties are instead included as properties of its containing Object -- and deserialized reproducing &quot;missing&quot; structure. \r\n&gt;\r\n&gt; [...]\r\n&gt;\r\n&gt; When values are deserialized &quot;wrapping&quot; is applied so that serialized output can be read back in.","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>No changes are needed to your source object using <code>@JsonUnwrapped</code> to deserialize JSON back into the <code>Parent</code> class.</p>\n<p>Despite not being mentioned in the Javadocs prior to Jackson 2.13 (per <a href=\"https://github.com/FasterXML/jackson-annotations/issues/184\" rel=\"nofollow noreferrer\">\njackson-annotations#184</a>), the <code>@JsonUnwrapped</code> annotation applies to deserialization as well as serialization, so no additional configuration is needed to support deserialization of a field using the annotation.</p>\n<p>The Jackson 2.13 <a href=\"http://fasterxml.github.io/jackson-annotations/javadoc/2.13/com/fasterxml/jackson/annotation/JsonUnwrapped.html\" rel=\"nofollow noreferrer\">Javadocs for <code>@JsonUnwrapped</code></a> clarify that the annotation applies to deserialization as well as serialization:</p>\n<blockquote>\n<p>Annotation used to indicate that a property should be serialized &quot;unwrapped&quot; -- that is, if it would be serialized as JSON Object, its properties are instead included as properties of its containing Object -- and deserialized reproducing &quot;missing&quot; structure.</p>\n<p>[...]</p>\n<p>When values are deserialized &quot;wrapping&quot; is applied so that serialized output can be read back in.</p>\n</blockquote>\n"}],"owner":{"account_id":146532,"reputation":2490,"user_id":357026,"accept_rate":69,"display_name":"Shaun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29571,"favorite_count":0,"down_vote_count":0,"up_vote_count":62,"accepted_answer_id":16570333,"answer_count":5,"score":62,"last_activity_date":1693551753,"creation_date":1368634381,"question_id":16570073,"body_markdown":"Say I have the following class:\r\n\r\n```lang-java\r\npublic class Parent {\r\n  public int age;\r\n  @JsonUnwrapped\r\n  public Name name;\r\n}\r\n```\r\n\r\nProducing JSON:\r\n\r\n```lang-json\r\n{\r\n  &quot;age&quot; : 18,\r\n  &quot;first&quot; : &quot;Joey&quot;,\r\n  &quot;last&quot; : &quot;Sixpack&quot;\r\n}\r\n```\r\n\r\nHow do I deserialize this back into the Parent class? I could use `@JsonCreator`:\r\n\r\n```lang-java\r\n@JsonCreator\r\npublic Parent(Map&lt;String,String&gt; jsonMap) {\r\n  age = jsonMap.get(&quot;age&quot;);\r\n  name = new Name(jsonMap.get(&quot;first&quot;), jsonMap.get(&quot;last&quot;));\r\n}\r\n```\r\n\r\nBut this also effectively adds `@JsonIgnoreProperties(ignoreUnknown=true)` to the `Parent` class, as all properties map to here. So if you wanted unknown JSON fields to throw an exception, you&#39;d have to do that yourself. In addition, if the map values could be something other than Strings, you&#39;d have to do some manual type checking and conversion. Is there a way for Jackson to handle this case automatically?\r\n\r\n**Edit:**\r\nI might be crazy, but this actually appears to work despite never being explicitly mentioned in the documentation: [`JsonUnwrapped`](http://fasterxml.github.io/jackson-annotations/javadoc/2.2/com/fasterxml/jackson/annotation/JsonUnwrapped.html). \r\nI was pretty sure it didn&#39;t work for me previously. Still, the proposed `@JsonCreator` approach might be preferred when custom logic is required to deserialize unwrapped polymorphic types.","title":"What&#39;s the Jackson deserialization equivalent of @JsonUnwrapped?","body":"<p>Say I have the following class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Parent {\n  public int age;\n  @JsonUnwrapped\n  public Name name;\n}\n</code></pre>\n<p>Producing JSON:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;age&quot; : 18,\n  &quot;first&quot; : &quot;Joey&quot;,\n  &quot;last&quot; : &quot;Sixpack&quot;\n}\n</code></pre>\n<p>How do I deserialize this back into the Parent class? I could use <code>@JsonCreator</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonCreator\npublic Parent(Map&lt;String,String&gt; jsonMap) {\n  age = jsonMap.get(&quot;age&quot;);\n  name = new Name(jsonMap.get(&quot;first&quot;), jsonMap.get(&quot;last&quot;));\n}\n</code></pre>\n<p>But this also effectively adds <code>@JsonIgnoreProperties(ignoreUnknown=true)</code> to the <code>Parent</code> class, as all properties map to here. So if you wanted unknown JSON fields to throw an exception, you'd have to do that yourself. In addition, if the map values could be something other than Strings, you'd have to do some manual type checking and conversion. Is there a way for Jackson to handle this case automatically?</p>\n<p><strong>Edit:</strong>\nI might be crazy, but this actually appears to work despite never being explicitly mentioned in the documentation: <a href=\"http://fasterxml.github.io/jackson-annotations/javadoc/2.2/com/fasterxml/jackson/annotation/JsonUnwrapped.html\" rel=\"nofollow noreferrer\"><code>JsonUnwrapped</code></a>.\nI was pretty sure it didn't work for me previously. Still, the proposed <code>@JsonCreator</code> approach might be preferred when custom logic is required to deserialize unwrapped polymorphic types.</p>\n"},{"tags":["java","postgresql","querydsl"],"answers":[{"tags":[],"owner":{"account_id":12334308,"reputation":11,"user_id":8999242,"display_name":"Kyung Song"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693551079,"creation_date":1693551079,"answer_id":77021065,"question_id":76661197,"body_markdown":"probably way too late, but check to see if you are using the correct &quot;list&quot; method\r\n\r\nyou should use list from\r\n\r\n    import static com.querydsl.core.group.GroupBy.list;\r\n\r\nNOT\r\n\r\n    import static com.querydsl.core.types.Projections.list;","title":"Querydsl SQL one-to-many relation Projection into object with nested list not working correctly","body":"<p>probably way too late, but check to see if you are using the correct &quot;list&quot; method</p>\n<p>you should use list from</p>\n<pre><code>import static com.querydsl.core.group.GroupBy.list;\n</code></pre>\n<p>NOT</p>\n<pre><code>import static com.querydsl.core.types.Projections.list;\n</code></pre>\n"}],"owner":{"account_id":4343059,"reputation":436,"user_id":3545829,"display_name":"Marek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693551079,"creation_date":1689072468,"question_id":76661197,"body_markdown":"I have simple relation in database\r\n\r\n\r\nACCOUNT\r\n\r\n|id|name |\r\n|--| --- |\r\n|1 | Euro account |\r\n|2 | Dolar account |\r\n\r\n\r\nACCOUNT_SETTING\r\n\r\n|id|account_id|name|value|\r\n|--| --- | --- | --- |\r\n|1 | 1|primary |true|\r\n|2 |1|active|true|\r\n|3 |1|temporal|false|\r\n|4 |2|active|false|\r\n\r\n\r\nI would like to get joined data from both tables projected into following DTO classes:\r\n\r\n```\r\npublic class Account {\r\n  private Long id;\r\n  private String name;\r\n  private List&lt;AccountSetting&gt; accountSettings;\r\n\r\n  public Account(Long id, String name, List&lt;AccountSetting&gt; accountSettings) {\r\n    this.id = id;\r\n    this.name = name;\r\n    this.accountSettings = accountSettings;\r\n  }\r\n\r\n  // getters setters\r\n} \r\n```\r\n\r\n\r\n```\r\npublic class AccountSetting {\r\n  private String name;\r\n  private boolean value;\r\n\r\n  public AccountSetting(String name, boolean value) {\r\n    this.name = name;\r\n    this.value = value;\r\n  }\r\n\r\n  // getters setters\r\n}\r\n```\r\n\r\nI have generated Q-classes for this database.\r\n\r\nI&#39;ve tried to set projection using grouping: \r\n\r\n```\r\nPostgreSQLQuery&lt;Tuple&gt; result = sqlQueryFactory\r\n      .select(\r\n        account.id,\r\n        account.name,\r\n        accountSetting.name,\r\n        accountSetting.value)\r\n      .from(account)\r\n      .join(accountSetting).on(accountSetting.accountId.eq(account.id));\r\n\r\nMap&lt;Long, Account&gt; resultMap = result.transform(\r\n      GroupBy.groupBy(\r\n        account.id\r\n      ).as(\r\n        Projections.constructor(\r\n          Account.class,\r\n          account.id,\r\n          account.name,\r\n          list(Projections.constructor(\r\n              AccountSetting.class,\r\n              accountSetting.name,\r\n              accountSetting.value\r\n            )\r\n          )\r\n        )\r\n      )\r\n    );\r\n```\r\n\r\nAlso tied projection in select as follow:\r\n\r\n```\r\n    PostgreSQLQuery&lt;Account&gt; accountRows = sqlQueryFactory\r\n      .select(Projections.constructor(\r\n          Account.class,\r\n          account.id,\r\n          account.name,\r\n          list(Projections.constructor(\r\n              AccountSetting.class,\r\n              accountSetting.name,\r\n              accountSetting.value\r\n            )\r\n          )\r\n        )\r\n      )\r\n      .from(account)\r\n      .join(accountSetting).on(accountSetting.accountId.eq(account.id));\r\n```\r\n\r\n\r\nEach time I&#39;m getting nested single-element-list of accountSettings (instead of 3 settings for account.id=1 and 1 setting list for account.id=2\r\n\r\n\r\nI&#39;m using querydsl v5.0.0.\r\n\r\nI will appreciate any advice...\r\n\r\nI found many answers (mostly related to QueryDSL JPA or QueryDSL Collections) related to QueryDSL resutls projections. Might be that for QueryDSL SQL I&#39;m doing something wrong?\r\n\r\nI&#39;ve checked already:\r\nhttps://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-collections/src/test/java/com/querydsl/collections/GroupByTest.java#L219C17-L219C42\r\n\r\nor \r\n\r\nhttps://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-core/src/test/java/com/querydsl/core/group/GroupByListTest.java#L185\r\n\r\nas a reference but it just doesn&#39;t work as expected for me.","title":"Querydsl SQL one-to-many relation Projection into object with nested list not working correctly","body":"<p>I have simple relation in database</p>\n<p>ACCOUNT</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>id</th>\n<th>name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>Euro account</td>\n</tr>\n<tr>\n<td>2</td>\n<td>Dolar account</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>ACCOUNT_SETTING</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>id</th>\n<th>account_id</th>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>primary</td>\n<td>true</td>\n</tr>\n<tr>\n<td>2</td>\n<td>1</td>\n<td>active</td>\n<td>true</td>\n</tr>\n<tr>\n<td>3</td>\n<td>1</td>\n<td>temporal</td>\n<td>false</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2</td>\n<td>active</td>\n<td>false</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I would like to get joined data from both tables projected into following DTO classes:</p>\n<pre><code>public class Account {\n  private Long id;\n  private String name;\n  private List&lt;AccountSetting&gt; accountSettings;\n\n  public Account(Long id, String name, List&lt;AccountSetting&gt; accountSettings) {\n    this.id = id;\n    this.name = name;\n    this.accountSettings = accountSettings;\n  }\n\n  // getters setters\n} \n</code></pre>\n<pre><code>public class AccountSetting {\n  private String name;\n  private boolean value;\n\n  public AccountSetting(String name, boolean value) {\n    this.name = name;\n    this.value = value;\n  }\n\n  // getters setters\n}\n</code></pre>\n<p>I have generated Q-classes for this database.</p>\n<p>I've tried to set projection using grouping:</p>\n<pre><code>PostgreSQLQuery&lt;Tuple&gt; result = sqlQueryFactory\n      .select(\n        account.id,\n        account.name,\n        accountSetting.name,\n        accountSetting.value)\n      .from(account)\n      .join(accountSetting).on(accountSetting.accountId.eq(account.id));\n\nMap&lt;Long, Account&gt; resultMap = result.transform(\n      GroupBy.groupBy(\n        account.id\n      ).as(\n        Projections.constructor(\n          Account.class,\n          account.id,\n          account.name,\n          list(Projections.constructor(\n              AccountSetting.class,\n              accountSetting.name,\n              accountSetting.value\n            )\n          )\n        )\n      )\n    );\n</code></pre>\n<p>Also tied projection in select as follow:</p>\n<pre><code>    PostgreSQLQuery&lt;Account&gt; accountRows = sqlQueryFactory\n      .select(Projections.constructor(\n          Account.class,\n          account.id,\n          account.name,\n          list(Projections.constructor(\n              AccountSetting.class,\n              accountSetting.name,\n              accountSetting.value\n            )\n          )\n        )\n      )\n      .from(account)\n      .join(accountSetting).on(accountSetting.accountId.eq(account.id));\n</code></pre>\n<p>Each time I'm getting nested single-element-list of accountSettings (instead of 3 settings for account.id=1 and 1 setting list for account.id=2</p>\n<p>I'm using querydsl v5.0.0.</p>\n<p>I will appreciate any advice...</p>\n<p>I found many answers (mostly related to QueryDSL JPA or QueryDSL Collections) related to QueryDSL resutls projections. Might be that for QueryDSL SQL I'm doing something wrong?</p>\n<p>I've checked already:\n<a href=\"https://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-collections/src/test/java/com/querydsl/collections/GroupByTest.java#L219C17-L219C42\" rel=\"nofollow noreferrer\">https://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-collections/src/test/java/com/querydsl/collections/GroupByTest.java#L219C17-L219C42</a></p>\n<p>or</p>\n<p><a href=\"https://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-core/src/test/java/com/querydsl/core/group/GroupByListTest.java#L185\" rel=\"nofollow noreferrer\">https://github.com/querydsl/querydsl/blob/cd608f04ed7534b1b62a78a28beb141071d149b6/querydsl-core/src/test/java/com/querydsl/core/group/GroupByListTest.java#L185</a></p>\n<p>as a reference but it just doesn't work as expected for me.</p>\n"},{"tags":["java","wicket"],"answers":[{"comments":[{"owner":{"account_id":7509469,"reputation":1,"user_id":5704932,"display_name":"Jack Sparrow"},"score":0,"creation_date":1693581217,"post_id":77021011,"comment_id":135784410,"body_markdown":"Thank you for your reply\nAdding RestartResponseException does not change anything\n\nTha call stack is different between the first (correct) call and the following 2 calls to the noargs and the PageParameters constructor. In the first call stack i see my own component and the onSubmit() call. In the other 2 call stacks there is no class of mine included. Everything comes from wicket libs.\n\ni&#39;d attach both screenshots with the different call stacks, but i do not know how to attach files in SO.\n\nThanks again","body":"Thank you for your reply Adding RestartResponseException does not change anything  Tha call stack is different between the first (correct) call and the following 2 calls to the noargs and the PageParameters constructor. In the first call stack i see my own component and the onSubmit() call. In the other 2 call stacks there is no class of mine included. Everything comes from wicket libs.  i&#39;d attach both screenshots with the different call stacks, but i do not know how to attach files in SO.  Thanks again"}],"tags":[],"owner":{"account_id":232499,"reputation":17233,"user_id":497381,"display_name":"martin-g"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693550467,"creation_date":1693550467,"answer_id":77021011,"question_id":76982811,"body_markdown":"    I expect setresponsePage to call the right constructor only once and pass the model.\r\n\r\nMe too! But I need to debug it to see why this happens.\r\n\r\nYou could try with:\r\n\r\n    @Override\r\n    public void onSubmit() {\r\n        throw new RestartResponseException(new PageTwo((IModel&lt;?&gt;)getDefaultModel()));\r\n    }","title":"Wicket setResponsePage calls constructor multiple times","body":"<pre><code>I expect setresponsePage to call the right constructor only once and pass the model.\n</code></pre>\n<p>Me too! But I need to debug it to see why this happens.</p>\n<p>You could try with:</p>\n<pre><code>@Override\npublic void onSubmit() {\n    throw new RestartResponseException(new PageTwo((IModel&lt;?&gt;)getDefaultModel()));\n}\n</code></pre>\n"}],"owner":{"account_id":7509469,"reputation":1,"user_id":5704932,"display_name":"Jack Sparrow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693550467,"creation_date":1693050375,"question_id":76982811,"body_markdown":"Trying to pass a model from one page to another. \r\nApplication.init\r\n`getRequestCycleSettings().setRenderStrategy(RequestCycleSettings.RenderStrategy.ONE_PASS_RENDER)`\r\n\r\n\r\nI have two pages, both defined with 3 constructors each. PageOne has a form. OnSubmit is supposed to pass the page model from PageOne to PageTwo.\r\n\r\nThe call to setResponsePage first calls the constructor WebPage​(IModel&lt;?&gt; model) and passes the model, as expected.\r\n\r\nBut immediately after that, it also calls the WebPage​() (noargs) _and_ the WebPage​(PageParameters parameters) constructor. \r\nAs a result, PageTwo gets constructed 3 times and ends up having a null DefaultModel.\r\n\r\nHow can i tell Wicket to stop after calling the WebPage​(IModel&lt;?&gt; model) contructor?\r\n\r\nHere is the code:\r\n\r\n```\r\npublic class PageOne extends WebPage {\r\n    // Similar constructors for PageTwo\r\n    public PageOne() {\r\n        super();\r\n    }\r\n\r\n    public PageOne(PageParameters p) {\r\n        super(p);\r\n    }\r\n\r\n    public PageOne(IModel&lt;?&gt; model) {\r\n        super(model);\r\n    }\r\n\r\n   @Override\r\n   protected void onInitialize() {\r\n       super.onInitialize();\r\n\r\n       Form&lt;Void&gt; form = new Form&lt;Void&gt;(&quot;form&quot;) {\r\n           @Override\r\n           public void onSubmit() {\r\n               setResponsePage(new PageTwo((IModel&lt;?&gt;)getDefaultModel()));\r\n           }\r\n      };\r\n   }\r\n}\r\n```\r\n\r\nThank you\r\n\r\nWicket version is 9.13.0\r\n\r\nApplication is a Springboot App (springboot version 2.7.11), in case that matters.\r\n\r\nI expect setresponsePage to call the right constructor only once and pass the model.","title":"Wicket setResponsePage calls constructor multiple times","body":"<p>Trying to pass a model from one page to another.\nApplication.init\n<code>getRequestCycleSettings().setRenderStrategy(RequestCycleSettings.RenderStrategy.ONE_PASS_RENDER)</code></p>\n<p>I have two pages, both defined with 3 constructors each. PageOne has a form. OnSubmit is supposed to pass the page model from PageOne to PageTwo.</p>\n<p>The call to setResponsePage first calls the constructor WebPage​(IModel&lt;?&gt; model) and passes the model, as expected.</p>\n<p>But immediately after that, it also calls the WebPage​() (noargs) <em>and</em> the WebPage​(PageParameters parameters) constructor.\nAs a result, PageTwo gets constructed 3 times and ends up having a null DefaultModel.</p>\n<p>How can i tell Wicket to stop after calling the WebPage​(IModel&lt;?&gt; model) contructor?</p>\n<p>Here is the code:</p>\n<pre><code>public class PageOne extends WebPage {\n    // Similar constructors for PageTwo\n    public PageOne() {\n        super();\n    }\n\n    public PageOne(PageParameters p) {\n        super(p);\n    }\n\n    public PageOne(IModel&lt;?&gt; model) {\n        super(model);\n    }\n\n   @Override\n   protected void onInitialize() {\n       super.onInitialize();\n\n       Form&lt;Void&gt; form = new Form&lt;Void&gt;(&quot;form&quot;) {\n           @Override\n           public void onSubmit() {\n               setResponsePage(new PageTwo((IModel&lt;?&gt;)getDefaultModel()));\n           }\n      };\n   }\n}\n</code></pre>\n<p>Thank you</p>\n<p>Wicket version is 9.13.0</p>\n<p>Application is a Springboot App (springboot version 2.7.11), in case that matters.</p>\n<p>I expect setresponsePage to call the right constructor only once and pass the model.</p>\n"},{"tags":["java","apache-kafka","apache-flink","kafka-consumer-api"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639687111,"creation_date":1639687111,"answer_id":70385328,"question_id":70384274,"body_markdown":"Sure, you can download whatever you want from wherever before you give a properties object to a KafkaConsumer. However, the user running the Java process will need some access to the local filesystem in order to download files. \r\n\r\nI think packaging the files as part of your application JAR makes more sense, however, I don&#39;t know an easy way to refer to a classpath resource as if it were a regular filesystem path. If the code runs in YARN cluster, you can try using `yarn.provided.lib.dirs` option when submitting as well","title":"Kafka Configure PKCS12 `ssl.keystore.location=user.p12` without access to local file system","body":"<p>Sure, you can download whatever you want from wherever before you give a properties object to a KafkaConsumer. However, the user running the Java process will need some access to the local filesystem in order to download files.</p>\n<p>I think packaging the files as part of your application JAR makes more sense, however, I don't know an easy way to refer to a classpath resource as if it were a regular filesystem path. If the code runs in YARN cluster, you can try using <code>yarn.provided.lib.dirs</code> option when submitting as well</p>\n"},{"tags":[],"owner":{"account_id":25611257,"reputation":1,"user_id":19384650,"display_name":"William Chukwu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655829649,"creation_date":1655828987,"answer_id":72704241,"question_id":70384274,"body_markdown":"I used a workaround tempoarily, upload your certificates to a fileshare and make your application, during initialization, dowload the certificates from the file share and save it to the location of choice like /home/site/ca.p12 then kakfa properties should read \r\n...\r\nssl.truststore.location=/home/site/ca.p12\r\n...\r\n\r\nHere are few lines of code to help you download and save your certificate.\r\n\r\n```    CloudStorageAccount storageAccount = CloudStorageAccount.parse(connectionString);\r\n// Create the Azure Files client.\r\n    CloudFileClient fileClient = storageAccount.createCloudFileClient();\r\n// Get a reference to the file share\r\n    CloudFileShare share = fileClient.getShareReference(&quot;[SHARENAME]&quot;);\r\n// Get a reference to the root directory for the share.\r\n    CloudFileDirectory rootDir = share.getRootDirectoryReference();\r\n// Get a reference to the directory where the file to be deleted is in\r\n    CloudFileDirectory containerDir = rootDir.getDirectoryReference(&quot;[DIRECTORY]&quot;);\r\n    CloudFile file = containerDir.getFileReference(&quot;[FILENAME]&quot;);\r\nfile.downloadToFile(&quot;/home/site/ca.p12&quot;);\r\n```","title":"Kafka Configure PKCS12 `ssl.keystore.location=user.p12` without access to local file system","body":"<p>I used a workaround tempoarily, upload your certificates to a fileshare and make your application, during initialization, dowload the certificates from the file share and save it to the location of choice like /home/site/ca.p12 then kakfa properties should read\n...\nssl.truststore.location=/home/site/ca.p12\n...</p>\n<p>Here are few lines of code to help you download and save your certificate.</p>\n<pre><code>// Create the Azure Files client.\n    CloudFileClient fileClient = storageAccount.createCloudFileClient();\n// Get a reference to the file share\n    CloudFileShare share = fileClient.getShareReference(&quot;[SHARENAME]&quot;);\n// Get a reference to the root directory for the share.\n    CloudFileDirectory rootDir = share.getRootDirectoryReference();\n// Get a reference to the directory where the file to be deleted is in\n    CloudFileDirectory containerDir = rootDir.getDirectoryReference(&quot;[DIRECTORY]&quot;);\n    CloudFile file = containerDir.getFileReference(&quot;[FILENAME]&quot;);\nfile.downloadToFile(&quot;/home/site/ca.p12&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1531501,"reputation":487,"user_id":1428596,"accept_rate":100,"display_name":"DoNuT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693550160,"creation_date":1693550160,"answer_id":77020981,"question_id":70384274,"body_markdown":"You can use alternate settings to provide the files dynamically without going the way around of dumping it in the file system.\r\n\r\n**ssl.truststore.certificates**\r\n\r\n&gt; Trusted certificates in the format specified by &#39;ssl.truststore.type&#39;. Default SSL engine factory supports only PEM format with X.509 certificates.\r\n\r\n**ssl.keystore.key**\r\n\r\n&gt; Certificate chain in the format specified by &#39;ssl.keystore.type&#39;. Default SSL engine factory supports only PEM format with a list of X.509 certificates\r\n\r\nFor example, see samples in https://cwiki.apache.org/confluence/display/KAFKA/KIP-651+-+Support+PEM+format+for+SSL+certificates+and+private+key#KIP651SupportPEMformatforSSLcertificatesandprivatekey-ProposedChanges\r\n\r\n    ssl.keystore.certificate.chain=-----BEGIN CERTIFICATE----- \\\r\n    MIIC4jCCAcqgAwIBAgIIJHw42Lu1+w8wDQYJKoZIhvcNAQEFBQAwJDEPMA0GA1UE \\\r\n    AwwGY2xpZW50MREwDwYDVQQKDAhBIGNsaWVudDAeFw0yMDA4MDMwOTU4MTZaFw0y \\\r\n    MDA5MDIwOTU4MTZaMCQxDzANBgNVBAMMBmNsaWVudDERMA8GA1UECgwIQSBjbGll \\\r\n    bnQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwTUf499MROpsz8LFr \\\r\n    EOZEvUH6e1qks6AJEWjD7BY/SmwRijNPAaJhHaogYaVPrDEmFfexZDVhtc4eDkDI \\\r\n    rW6+ZlkpNZupkINCR4R49f7JCjFz6rwGl4lSpa3mIhkXS/ZD0pjCYB9t2xBuTWVq \\\r\n    ap40WqbQDsJHNH+9V/nzktX0ZOB6AgUuzFwLu3YDKS8XFD5TAdZKIu8rtxFzL1Uo \\\r\n    HmiWFU9EoHROs23xJn7jCEOBq3L2b5IEE/ZHZVw/ooi/jJIID21bkiI731RWOoE3 \\\r\n    ClEsh7CQHWlXwyoJmMP2dZrXbERpZclH0ozb5JJwJiMtB1uxUiD3wKF/rlcfRAcZ \\\r\n    AR4vAgMBAAGjGDAWMBQGA1UdEQQNMAuCCWxvY2FsaG9zdDANBgkqhkiG9w0BAQUF \\\r\n    AAOCAQEAOqNAWknyUljdFeC/O5fDwoGYqHJY3dkinhjfiDEQm+RLLli64xjlNyRJ \\\r\n    u4ZMHqEE4yQBnQGFxHkKIcA/poDgntSJrSFsfnpHzZJ5kz5zQdNDT9BYQIPWqoe2 \\\r\n    0plNB6NjZeUn2OH+hAJIbclye0PXMrLwnDVUOJPS9xnlfgbrvIM0HCjtG95oeWv4 \\\r\n    VLLOKaxiNYEX0xx9fT/lKjnqgi7OPAMTvfp5y1t4BCoe/43o8Pd0Ih2hdgVE6rLn \\\r\n    mxEaTdlbQNp1ju70Ztl3NNt17+tceq0VbfTRI1xufTB5dCPWeeg0ekC9jMMs42R+ \\\r\n    PiGYp7h8A3hRC5m8pYnKLSJp5ymITg== \\\r\n    -----END CERTIFICATE-----\r\n     \r\n    ssl.keystore.key=-----BEGIN ENCRYPTED PRIVATE KEY----- \\\r\n    ... \\\r\n    -----END ENCRYPTED PRIVATE KEY--\r\n\r\nThis method of providing the keys is more convenient when keys are not packaged or static.","title":"Kafka Configure PKCS12 `ssl.keystore.location=user.p12` without access to local file system","body":"<p>You can use alternate settings to provide the files dynamically without going the way around of dumping it in the file system.</p>\n<p><strong>ssl.truststore.certificates</strong></p>\n<blockquote>\n<p>Trusted certificates in the format specified by 'ssl.truststore.type'. Default SSL engine factory supports only PEM format with X.509 certificates.</p>\n</blockquote>\n<p><strong>ssl.keystore.key</strong></p>\n<blockquote>\n<p>Certificate chain in the format specified by 'ssl.keystore.type'. Default SSL engine factory supports only PEM format with a list of X.509 certificates</p>\n</blockquote>\n<p>For example, see samples in <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-651+-+Support+PEM+format+for+SSL+certificates+and+private+key#KIP651SupportPEMformatforSSLcertificatesandprivatekey-ProposedChanges\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/display/KAFKA/KIP-651+-+Support+PEM+format+for+SSL+certificates+and+private+key#KIP651SupportPEMformatforSSLcertificatesandprivatekey-ProposedChanges</a></p>\n<pre><code>ssl.keystore.certificate.chain=-----BEGIN CERTIFICATE----- \\\nMIIC4jCCAcqgAwIBAgIIJHw42Lu1+w8wDQYJKoZIhvcNAQEFBQAwJDEPMA0GA1UE \\\nAwwGY2xpZW50MREwDwYDVQQKDAhBIGNsaWVudDAeFw0yMDA4MDMwOTU4MTZaFw0y \\\nMDA5MDIwOTU4MTZaMCQxDzANBgNVBAMMBmNsaWVudDERMA8GA1UECgwIQSBjbGll \\\nbnQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwTUf499MROpsz8LFr \\\nEOZEvUH6e1qks6AJEWjD7BY/SmwRijNPAaJhHaogYaVPrDEmFfexZDVhtc4eDkDI \\\nrW6+ZlkpNZupkINCR4R49f7JCjFz6rwGl4lSpa3mIhkXS/ZD0pjCYB9t2xBuTWVq \\\nap40WqbQDsJHNH+9V/nzktX0ZOB6AgUuzFwLu3YDKS8XFD5TAdZKIu8rtxFzL1Uo \\\nHmiWFU9EoHROs23xJn7jCEOBq3L2b5IEE/ZHZVw/ooi/jJIID21bkiI731RWOoE3 \\\nClEsh7CQHWlXwyoJmMP2dZrXbERpZclH0ozb5JJwJiMtB1uxUiD3wKF/rlcfRAcZ \\\nAR4vAgMBAAGjGDAWMBQGA1UdEQQNMAuCCWxvY2FsaG9zdDANBgkqhkiG9w0BAQUF \\\nAAOCAQEAOqNAWknyUljdFeC/O5fDwoGYqHJY3dkinhjfiDEQm+RLLli64xjlNyRJ \\\nu4ZMHqEE4yQBnQGFxHkKIcA/poDgntSJrSFsfnpHzZJ5kz5zQdNDT9BYQIPWqoe2 \\\n0plNB6NjZeUn2OH+hAJIbclye0PXMrLwnDVUOJPS9xnlfgbrvIM0HCjtG95oeWv4 \\\nVLLOKaxiNYEX0xx9fT/lKjnqgi7OPAMTvfp5y1t4BCoe/43o8Pd0Ih2hdgVE6rLn \\\nmxEaTdlbQNp1ju70Ztl3NNt17+tceq0VbfTRI1xufTB5dCPWeeg0ekC9jMMs42R+ \\\nPiGYp7h8A3hRC5m8pYnKLSJp5ymITg== \\\n-----END CERTIFICATE-----\n \nssl.keystore.key=-----BEGIN ENCRYPTED PRIVATE KEY----- \\\n... \\\n-----END ENCRYPTED PRIVATE KEY--\n</code></pre>\n<p>This method of providing the keys is more convenient when keys are not packaged or static.</p>\n"}],"owner":{"account_id":1888553,"reputation":18649,"user_id":1767106,"accept_rate":78,"display_name":"clay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5582,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77020981,"answer_count":3,"score":0,"last_activity_date":1693550160,"creation_date":1639681069,"question_id":70384274,"body_markdown":"I can successfully connect to an SSL secured Kafka cluster with the following client properties:\r\n\r\n    security.protocol=SSL\r\n    ssl.truststore.type=PKCS12\r\n    ssl.truststore.location=ca.p12\r\n    ssl.truststore.password=&lt;redacted&gt;\r\n    ssl.keystore.type=PKCS12\r\n    ssl.keystore.location=user.p12\r\n    ssl.keystore.password=&lt;redacted&gt;\r\n\r\nHowever, I’m writing a Java app that is running in a managed cloud environment, where I don’t have access to the file system.  So I can’t just give it a local file path to .p12 files.\r\n\r\nAre there any other alternatives, like using loading from S3, or from memory, or from a JVM classpath resource?\r\n\r\nSpecifically, this is a Flink app running on Amazon&#39;s Kinesis Analytics Managed Flink cluster service.","title":"Kafka Configure PKCS12 `ssl.keystore.location=user.p12` without access to local file system","body":"<p>I can successfully connect to an SSL secured Kafka cluster with the following client properties:</p>\n<pre><code>security.protocol=SSL\nssl.truststore.type=PKCS12\nssl.truststore.location=ca.p12\nssl.truststore.password=&lt;redacted&gt;\nssl.keystore.type=PKCS12\nssl.keystore.location=user.p12\nssl.keystore.password=&lt;redacted&gt;\n</code></pre>\n<p>However, I’m writing a Java app that is running in a managed cloud environment, where I don’t have access to the file system.  So I can’t just give it a local file path to .p12 files.</p>\n<p>Are there any other alternatives, like using loading from S3, or from memory, or from a JVM classpath resource?</p>\n<p>Specifically, this is a Flink app running on Amazon's Kinesis Analytics Managed Flink cluster service.</p>\n"},{"tags":["java","pdf","pdfbox","fillable"],"comments":[{"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"score":0,"creation_date":1693485005,"post_id":77014863,"comment_id":135769156,"body_markdown":"@TilmanHausherr changing the version to 2.0.29 didn&#39;t help either.","body":"@TilmanHausherr changing the version to 2.0.29 didn&#39;t help either."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1693488176,"post_id":77014863,"comment_id":135769835,"body_markdown":"Please share the PDF. If you can&#39;t share the PDF, try to reproduce the problem with a non confidential document and share that one. We do support comb fields. Btw setTextField() is too complex, you can access the field directly with `acroform.getField(name)`.","body":"Please share the PDF. If you can&#39;t share the PDF, try to reproduce the problem with a non confidential document and share that one. We do support comb fields. Btw setTextField() is too complex, you can access the field directly with <code>acroform.getField(name)</code>."},{"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"score":0,"creation_date":1693489228,"post_id":77014863,"comment_id":135770139,"body_markdown":"https://drive.google.com/file/d/11u_gQQbshb1ARFVMU1VMZDarKT9nhnUV/view?usp=sharing.\n@TilmanHausherr, Please find above the fillable pdf document. Also, thanks for the suggestion.","body":"<a href=\"https://drive.google.com/file/d/11u_gQQbshb1ARFVMU1VMZDarKT9nhnUV/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/11u_gQQbshb1ARFVMU1VMZDarKT9nhnUV/&hellip;</a>. @TilmanHausherr, Please find above the fillable pdf document. Also, thanks for the suggestion."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1693505197,"post_id":77014863,"comment_id":135773621,"body_markdown":"I had a look... the glyphs look better on my machine. But I think what you&#39;re complaining about is that you&#39;re missing the combs. The PDF specification doesn&#39;t mention these, although I see that Adobe does them. Maybe it didn&#39;t at the time this was written.","body":"I had a look... the glyphs look better on my machine. But I think what you&#39;re complaining about is that you&#39;re missing the combs. The PDF specification doesn&#39;t mention these, although I see that Adobe does them. Maybe it didn&#39;t at the time this was written."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1693505388,"post_id":77014863,"comment_id":135773655,"body_markdown":"Here&#39;s how it looks: https://imgur.com/a/3ZQabae","body":"Here&#39;s how it looks: <a href=\"https://imgur.com/a/3ZQabae\" rel=\"nofollow noreferrer\">imgur.com/a/3ZQabae</a>"},{"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"score":1,"creation_date":1693549608,"post_id":77014863,"comment_id":135778333,"body_markdown":"Figured out that it was an issue with the pdf. Flattened the pdf and recreated the form fields using adobe acrobat. Now it is working just fine. Thanks @KJ &amp; TilmanHausherr.","body":"Figured out that it was an issue with the pdf. Flattened the pdf and recreated the form fields using adobe acrobat. Now it is working just fine. Thanks @KJ &amp; TilmanHausherr."}],"answers":[{"tags":[],"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693549882,"creation_date":1693549882,"answer_id":77020958,"question_id":77014863,"body_markdown":"It was an issue with the pdf i was using. Flattening the pdf and then recreating the form fields using adobe acrobat made it work. \r\n\r\nAlso, a smaller optimisation in setTextField method(suggested by @TilmanHausherr)\r\n\r\n    private void setTextField(PDAcroForm acroForm, String fieldName, String value,boolean isCombField) throws IOException {\r\n\t\tif (value != null) {\r\n\t\t\tacroForm.getField(fieldName).setValue(value);\r\n\t\t\tif(isCombField) {\r\n\t\t\t\t((PDTextField)acroForm.getField(fieldName)).setComb(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"Apache PDFBox segmented digits display not working","body":"<p>It was an issue with the pdf i was using. Flattening the pdf and then recreating the form fields using adobe acrobat made it work.</p>\n<p>Also, a smaller optimisation in setTextField method(suggested by @TilmanHausherr)</p>\n<pre><code>private void setTextField(PDAcroForm acroForm, String fieldName, String value,boolean isCombField) throws IOException {\n    if (value != null) {\n        acroForm.getField(fieldName).setValue(value);\n        if(isCombField) {\n            ((PDTextField)acroForm.getField(fieldName)).setComb(true);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21260644,"reputation":46,"user_id":15641448,"display_name":"Mohit Kumar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77020958,"answer_count":1,"score":1,"last_activity_date":1693549882,"creation_date":1693476555,"question_id":77014863,"body_markdown":"I have a fillable pdf in which i have a field IFSC code to be filled.\r\n\r\n[![This is the fillable field that needs to be filled in segments][1]][1]\r\n\r\nThis is my code to fill the acroform\r\n\r\n```\r\npublic String generatePreFilledMandateForm(PnachDownloadRequestDto request) {\r\n\t\tByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n\t\ttry {\r\n\t\t\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(Constants.DATE_FORMAT_DD_MM_YYYY);\r\n\t\t\tLocalDateTime now = LocalDateTime.now();\r\n\t\t\tString currentDate = dtf.format(now);\r\n\t\t\tString currentDateAdded10Years = dtf.format(now.plusYears(10));\r\n\r\n\t\t\tPDDocument pdfDocument = PDDocument.load(new ClassPathResource(&quot;templates/IDFCPnachForm.pdf&quot;).getInputStream());\r\n\r\n\t\t\tByteArrayOutputStream byteData = new ByteArrayOutputStream();\r\n\r\n\t\t\tPDAcroForm acroForm = pdfDocument.getDocumentCatalog().getAcroForm();\r\n\t\t\tsetTextField(acroForm,&quot;date&quot;,currentDate,true);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleWithBank&quot;,request.getBankName().toUpperCase(),false);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleBankAcNumber&quot;,request.getAccountNumber(),true);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleIfscMicr&quot;,request.getIfscCode(),true);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleAmountWords&quot;,MoneyConverterDigitToWordsUtil.convertToWord(request.getAmountInRupees().toString()),false);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleAmount&quot;,request.getAmountInRupees().toString() + &quot;/-&quot;,false);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleReference1&quot;,request.getLoanNo(),false);\r\n\t\t\tsetTextField(acroForm,&quot;rectangleMobileNo&quot;,request.getPhoneNo(),false);\r\n\t\t\tsetTextField(acroForm,&quot;rectanglePrimaryNameField&quot;,request.getCustomerName(),false);\r\n\t\t\tsetTextField(acroForm,&quot;fromDate&quot;,currentDate,true);\r\n\t\t\tsetTextField(acroForm,&quot;toDate&quot;,currentDateAdded10Years,true);\r\n\r\n\t\t\tacroForm.flatten();\r\n\r\n\t\t\tpdfDocument.save(byteArrayOutputStream);\r\n\r\n\t\t\tpdfDocument.close();\r\n\t\t\tString base64EncodedPdf = Base64.getEncoder().encodeToString(byteArrayOutputStream.toByteArray());\r\n\r\n\t\t\treturn base64EncodedPdf;\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.error(&quot;Exception in generatePreFilledMandateForm {}&quot;,e.getMessage());\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\nprivate void setTextField(PDAcroForm acroForm, String fieldName, String value,boolean isCombField) throws IOException {\r\n\t\tif (value != null) {\r\n\t\t\tList&lt;PDField&gt; fields = acroForm.getFields();\r\n\t\t\tfor (PDField field : fields) {\r\n\t\t\t\tif (field.getFullyQualifiedName().equals(fieldName)) {\r\n\t\t\t\t\tif (isCombField) {\r\n\t\t\t\t\t\t((PDTextField) field).setComb(true);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfield.setValue(value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\nBut post filling and flattening. The response pdf doesn&#39;t have proper comb structure. PFB Response.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAlso,\r\nI am using Apache PDFBox 2.0.29.\r\n\r\n\r\nExpected form:\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XJgqW.png\r\n  [2]: https://i.stack.imgur.com/pvWyU.png\r\n  [3]: https://i.stack.imgur.com/SfdsE.png","title":"Apache PDFBox segmented digits display not working","body":"<p>I have a fillable pdf in which i have a field IFSC code to be filled.</p>\n<p><a href=\"https://i.stack.imgur.com/XJgqW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XJgqW.png\" alt=\"This is the fillable field that needs to be filled in segments\" /></a></p>\n<p>This is my code to fill the acroform</p>\n<pre><code>public String generatePreFilledMandateForm(PnachDownloadRequestDto request) {\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n        try {\n            DateTimeFormatter dtf = DateTimeFormatter.ofPattern(Constants.DATE_FORMAT_DD_MM_YYYY);\n            LocalDateTime now = LocalDateTime.now();\n            String currentDate = dtf.format(now);\n            String currentDateAdded10Years = dtf.format(now.plusYears(10));\n\n            PDDocument pdfDocument = PDDocument.load(new ClassPathResource(&quot;templates/IDFCPnachForm.pdf&quot;).getInputStream());\n\n            ByteArrayOutputStream byteData = new ByteArrayOutputStream();\n\n            PDAcroForm acroForm = pdfDocument.getDocumentCatalog().getAcroForm();\n            setTextField(acroForm,&quot;date&quot;,currentDate,true);\n            setTextField(acroForm,&quot;rectangleWithBank&quot;,request.getBankName().toUpperCase(),false);\n            setTextField(acroForm,&quot;rectangleBankAcNumber&quot;,request.getAccountNumber(),true);\n            setTextField(acroForm,&quot;rectangleIfscMicr&quot;,request.getIfscCode(),true);\n            setTextField(acroForm,&quot;rectangleAmountWords&quot;,MoneyConverterDigitToWordsUtil.convertToWord(request.getAmountInRupees().toString()),false);\n            setTextField(acroForm,&quot;rectangleAmount&quot;,request.getAmountInRupees().toString() + &quot;/-&quot;,false);\n            setTextField(acroForm,&quot;rectangleReference1&quot;,request.getLoanNo(),false);\n            setTextField(acroForm,&quot;rectangleMobileNo&quot;,request.getPhoneNo(),false);\n            setTextField(acroForm,&quot;rectanglePrimaryNameField&quot;,request.getCustomerName(),false);\n            setTextField(acroForm,&quot;fromDate&quot;,currentDate,true);\n            setTextField(acroForm,&quot;toDate&quot;,currentDateAdded10Years,true);\n\n            acroForm.flatten();\n\n            pdfDocument.save(byteArrayOutputStream);\n\n            pdfDocument.close();\n            String base64EncodedPdf = Base64.getEncoder().encodeToString(byteArrayOutputStream.toByteArray());\n\n            return base64EncodedPdf;\n        } catch (Exception e) {\n            log.error(&quot;Exception in generatePreFilledMandateForm {}&quot;,e.getMessage());\n            e.printStackTrace();\n        }\n        return null;\n    }\n\nprivate void setTextField(PDAcroForm acroForm, String fieldName, String value,boolean isCombField) throws IOException {\n        if (value != null) {\n            List&lt;PDField&gt; fields = acroForm.getFields();\n            for (PDField field : fields) {\n                if (field.getFullyQualifiedName().equals(fieldName)) {\n                    if (isCombField) {\n                        ((PDTextField) field).setComb(true);\n\n                    }\n                    field.setValue(value);\n                }\n            }\n        }\n    }\n</code></pre>\n<p>But post filling and flattening. The response pdf doesn't have proper comb structure. PFB Response.</p>\n<p><a href=\"https://i.stack.imgur.com/pvWyU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pvWyU.png\" alt=\"enter image description here\" /></a></p>\n<p>Also,\nI am using Apache PDFBox 2.0.29.</p>\n<p>Expected form:\n<a href=\"https://i.stack.imgur.com/SfdsE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SfdsE.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","grpc","grpc-java"],"answers":[{"tags":[],"owner":{"account_id":14947494,"reputation":506,"user_id":10792320,"display_name":"San P"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693459146,"creation_date":1693459146,"answer_id":77012994,"question_id":77005163,"body_markdown":"&gt; but in Java , ConfigFileInfo not generate , I can not find this class, how to fix it ?\r\n\r\nIn Java too this will be a nested (inner) class inside `GetTaskConfigsReply`. So if you find `GetTaskConfigsReply.java`, you will see `ConfigFileInfo` class defined as a nested class inside `GetTaskConfigsReply`","title":"Java gRPC, nested class not generate","body":"<blockquote>\n<p>but in Java , ConfigFileInfo not generate , I can not find this class, how to fix it ?</p>\n</blockquote>\n<p>In Java too this will be a nested (inner) class inside <code>GetTaskConfigsReply</code>. So if you find <code>GetTaskConfigsReply.java</code>, you will see <code>ConfigFileInfo</code> class defined as a nested class inside <code>GetTaskConfigsReply</code></p>\n"},{"tags":[],"owner":{"account_id":16242465,"reputation":61,"user_id":11728446,"display_name":"nsj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693549820,"creation_date":1693549820,"answer_id":77020949,"question_id":77005163,"body_markdown":"Ok, this should be use `Maven` to compiler, everything is ok now. ","title":"Java gRPC, nested class not generate","body":"<p>Ok, this should be use <code>Maven</code> to compiler, everything is ok now.</p>\n"}],"owner":{"account_id":16242465,"reputation":61,"user_id":11728446,"display_name":"nsj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77020949,"answer_count":2,"score":1,"last_activity_date":1693549820,"creation_date":1693372978,"question_id":77005163,"body_markdown":"\r\n\r\npart of proto:\r\n```\r\nmessage GetTaskConfigsReply{\r\n  message ConfigFileInfo{\r\n    string name = 1;\r\n    string path = 2;\r\n    string modified_time = 3;\r\n  }\r\n  repeated ConfigFileInfo configs = 1;\r\n}\r\n```\r\n\r\nHi,I&#39;m new in Java,I want to use gRPC to remote control another C# Application,The C# Application will send this Java Application `GetTaskConfigsReply`, C# application works good,but in Java , `ConfigFileInfo` not generate , I can not find this class, how to fix it ? Thank you!\r\n\r\npom.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;\r\n  &lt;artifactId&gt;xx&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;name&gt;xx&lt;/name&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n &lt;!-- &lt;repositories&gt;\r\n    &lt;repository&gt;\r\n        &lt;id&gt;google-maven&lt;/id&gt;\r\n        &lt;name&gt;Google Maven Repository&lt;/name&gt;\r\n        &lt;url&gt;https://maven.pkg.github.com/grpc/grpc-java&lt;/url&gt;\r\n    &lt;/repository&gt;\r\n&lt;/repositories&gt; --&gt;\r\n\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n      &lt;artifactId&gt;grpc-netty-shaded&lt;/artifactId&gt;\r\n      &lt;version&gt;1.41.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n      &lt;artifactId&gt;grpc-protobuf&lt;/artifactId&gt;\r\n      &lt;version&gt;1.41.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n      &lt;artifactId&gt;grpc-stub&lt;/artifactId&gt;\r\n      &lt;version&gt;1.41.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt; &lt;!-- necessary for Java 9+ --&gt;\r\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;annotations-api&lt;/artifactId&gt;\r\n      &lt;version&gt;6.0.53&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to\r\n      parent pom) --&gt;\r\n      &lt;plugins&gt;\r\n        &lt;!-- clean lifecycle, see\r\n        https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- default lifecycle, jar packaging: see\r\n        https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.22.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.8.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- site lifecycle, see\r\n        https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.7.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n    &lt;extensions&gt;\r\n      &lt;extension&gt;\r\n        &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\r\n        &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.7.1&lt;/version&gt;\r\n      &lt;/extension&gt;\r\n    &lt;/extensions&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;0.6.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;protocArtifact&gt;com.google.protobuf:protoc:3.19.6:exe:${os.detected.classifier}&lt;/protocArtifact&gt;\r\n          &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;\r\n          &lt;pluginArtifact&gt;io.grpc:protoc-gen-grpc-java:1.41.3:exe:${os.detected.classifier}&lt;/pluginArtifact&gt;\r\n          &lt;clearOutputDirectory&gt;false&lt;/clearOutputDirectory&gt;\r\n          &lt;outputDirectory&gt;${basedir}/src/main/java&lt;/outputDirectory&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;compile&lt;/goal&gt;\r\n              &lt;goal&gt;compile-custom&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nproto:\r\n```\r\nsyntax = &quot;proto3&quot;;\r\n\r\nservice RemoteControl {\r\n  rpc GetTaskConfigs(GetTaskConfigsRequest) returns (GetTaskConfigsReply);\r\n  \r\n}\r\n\r\nmessage GetTaskConfigsRequest {\r\n\r\n}\r\n\r\nmessage GetTaskConfigsReply{\r\n  message ConfigFileInfo{\r\n    string name = 1;\r\n    string path = 2;\r\n    string modified_time = 3;\r\n  }\r\n  repeated ConfigFileInfo configs = 1;\r\n}\r\n```\r\nJava code:\r\n```\r\n private static List&lt;ConfigFileInfo&gt; GetTaskConfigs(RemoteControlBlockingStub remoteControlBlockingStub) {\r\n        GetTaskConfigsRequest request = GetTaskConfigsRequest.newBuilder().build();\r\n\r\n        GetTaskConfigsReply reply = remoteControlBlockingStub.getTaskConfigs(request);\r\n        List&lt;ConfigFileInfo&gt; configFileInfos = new ArrayList&lt;ConfigFileInfo&gt;();\r\n        for (int i = 0; i &lt; reply.getConfigsCount(); i++) {\r\n            configFileInfos.add(reply.getConfigs(i));\r\n        }\r\n        return configFileInfos;\r\n    }\r\n```\r\n","title":"Java gRPC, nested class not generate","body":"<p>part of proto:</p>\n<pre><code>message GetTaskConfigsReply{\n  message ConfigFileInfo{\n    string name = 1;\n    string path = 2;\n    string modified_time = 3;\n  }\n  repeated ConfigFileInfo configs = 1;\n}\n</code></pre>\n<p>Hi,I'm new in Java,I want to use gRPC to remote control another C# Application,The C# Application will send this Java Application <code>GetTaskConfigsReply</code>, C# application works good,but in Java , <code>ConfigFileInfo</code> not generate , I can not find this class, how to fix it ? Thank you!</p>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;\n  &lt;artifactId&gt;xx&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;xx&lt;/name&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n &lt;!-- &lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;google-maven&lt;/id&gt;\n        &lt;name&gt;Google Maven Repository&lt;/name&gt;\n        &lt;url&gt;https://maven.pkg.github.com/grpc/grpc-java&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt; --&gt;\n\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n      &lt;artifactId&gt;grpc-netty-shaded&lt;/artifactId&gt;\n      &lt;version&gt;1.41.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n      &lt;artifactId&gt;grpc-protobuf&lt;/artifactId&gt;\n      &lt;version&gt;1.41.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n      &lt;artifactId&gt;grpc-stub&lt;/artifactId&gt;\n      &lt;version&gt;1.41.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt; &lt;!-- necessary for Java 9+ --&gt;\n      &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n      &lt;artifactId&gt;annotations-api&lt;/artifactId&gt;\n      &lt;version&gt;6.0.53&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to\n      parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;!-- clean lifecycle, see\n        https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- default lifecycle, jar packaging: see\n        https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- site lifecycle, see\n        https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n    &lt;extensions&gt;\n      &lt;extension&gt;\n        &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;1.7.1&lt;/version&gt;\n      &lt;/extension&gt;\n    &lt;/extensions&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;0.6.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;protocArtifact&gt;com.google.protobuf:protoc:3.19.6:exe:${os.detected.classifier}&lt;/protocArtifact&gt;\n          &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;\n          &lt;pluginArtifact&gt;io.grpc:protoc-gen-grpc-java:1.41.3:exe:${os.detected.classifier}&lt;/pluginArtifact&gt;\n          &lt;clearOutputDirectory&gt;false&lt;/clearOutputDirectory&gt;\n          &lt;outputDirectory&gt;${basedir}/src/main/java&lt;/outputDirectory&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;compile&lt;/goal&gt;\n              &lt;goal&gt;compile-custom&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>proto:</p>\n<pre><code>syntax = &quot;proto3&quot;;\n\nservice RemoteControl {\n  rpc GetTaskConfigs(GetTaskConfigsRequest) returns (GetTaskConfigsReply);\n  \n}\n\nmessage GetTaskConfigsRequest {\n\n}\n\nmessage GetTaskConfigsReply{\n  message ConfigFileInfo{\n    string name = 1;\n    string path = 2;\n    string modified_time = 3;\n  }\n  repeated ConfigFileInfo configs = 1;\n}\n</code></pre>\n<p>Java code:</p>\n<pre><code> private static List&lt;ConfigFileInfo&gt; GetTaskConfigs(RemoteControlBlockingStub remoteControlBlockingStub) {\n        GetTaskConfigsRequest request = GetTaskConfigsRequest.newBuilder().build();\n\n        GetTaskConfigsReply reply = remoteControlBlockingStub.getTaskConfigs(request);\n        List&lt;ConfigFileInfo&gt; configFileInfos = new ArrayList&lt;ConfigFileInfo&gt;();\n        for (int i = 0; i &lt; reply.getConfigsCount(); i++) {\n            configFileInfos.add(reply.getConfigs(i));\n        }\n        return configFileInfos;\n    }\n</code></pre>\n"},{"tags":["java","bytecode","string-concatenation","java-bytecode-asm","bytecode-manipulation"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1693483728,"post_id":77015657,"comment_id":135768900,"body_markdown":"You seem to asking how the compiler decides which bytecode emits in each case rather than how bytecode works. What is the actual issue that you have? Why do you need to control the generation of code for concatenating strings?","body":"You seem to asking how the compiler decides which bytecode emits in each case rather than how bytecode works. What is the actual issue that you have? Why do you need to control the generation of code for concatenating strings?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1693483869,"post_id":77015657,"comment_id":135768929,"body_markdown":"You seem to be saying that the same class is compiled to two different bytecode sequences in &quot;different places&quot;.  This doesn&#39;t make a lot of sense.  Normally a Java (source code) class is only compiled once.  Are you actually saying that you have two .class files from different builds?   If yes, the probable explanation is that they were compiled with different `javac` compilers from different JDKs.   The first version looks like an older compiler.","body":"You seem to be saying that the same class is compiled to two different bytecode sequences in &quot;different places&quot;.  This doesn&#39;t make a lot of sense.  Normally a Java (source code) class is only compiled once.  Are you actually saying that you have two .class files from different builds?   If yes, the probable explanation is that they were compiled with different <code>javac</code> compilers from different JDKs.   The first version looks like an older compiler."},{"owner":{"account_id":8198,"reputation":176803,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"score":0,"creation_date":1693484015,"post_id":77015657,"comment_id":135768962,"body_markdown":"Do you have two source files with _exactly the same_ content in your application? If not, please edit your question to also show the second one. (FWIW, using javac 20.0.2 from OpenJDK, compiling your first code I get the bytecode from the second one.)","body":"Do you have two source files with <i>exactly the same</i> content in your application? If not, please edit your question to also show the second one. (FWIW, using javac 20.0.2 from OpenJDK, compiling your first code I get the bytecode from the second one.)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1693484047,"post_id":77015657,"comment_id":135768969,"body_markdown":"See https://www.baeldung.com/java-string-concatenation-invoke-dynamic.  The use of `invokedynamic` for string concatenation was introduced in Java 9.","body":"See <a href=\"https://www.baeldung.com/java-string-concatenation-invoke-dynamic\" rel=\"nofollow noreferrer\">baeldung.com/java-string-concatenation-invoke-dynamic</a>.  The use of <code>invokedynamic</code> for string concatenation was introduced in Java 9."},{"owner":{"account_id":8198,"reputation":176803,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"score":0,"creation_date":1693484124,"post_id":77015657,"comment_id":135768978,"body_markdown":"@StephenC Are you suggesting that the first was compiled using Java 8 or before, and the second with Java 9 or later?","body":"@StephenC Are you suggesting that the first was compiled using Java 8 or before, and the second with Java 9 or later?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1693484165,"post_id":77015657,"comment_id":135768988,"body_markdown":"Probably.  I don&#39;t think this feature was back-ported.  Ask a **real** expert :-)","body":"Probably.  I don&#39;t think this feature was back-ported.  Ask a <b>real</b> expert :-)"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1693485230,"post_id":77015657,"comment_id":135769207,"body_markdown":"Here&#39;s the [JEP](https://openjdk.org/jeps/280) for &quot;Indify String concatenation&quot; that was done in Java 9.","body":"Here&#39;s the <a href=\"https://openjdk.org/jeps/280\" rel=\"nofollow noreferrer\">JEP</a> for &quot;Indify String concatenation&quot; that was done in Java 9."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693486557,"post_id":77015657,"comment_id":135769482,"body_markdown":"The last section suggests that you have an actual task to solve which you didn’t describe. And no, the first variant does not consist of a single `ldc` instruction, the entire sequence from `new  #1 // java/lang/StringBuilder` up to `invokevirtual #13 // java/lang/StringBuilder.toString:()Ljava/lang/String;` is the string concatenation. Likewise, the second variant also consists of more than one instruction, as the `aload_1` preceding the `invokedynamic` instruction also belongs to the string concatenation. Whether you have to consider more than these variants depends on your actual task.","body":"The last section suggests that you have an actual task to solve which you didn’t describe. And no, the first variant does not consist of a single <code>ldc</code> instruction, the entire sequence from <code>new  #1 &#47;&#47; java&#47;lang&#47;StringBuilder</code> up to <code>invokevirtual #13 &#47;&#47; java&#47;lang&#47;StringBuilder.toString:()Ljava&#47;lang&#47;String;</code> is the string concatenation. Likewise, the second variant also consists of more than one instruction, as the <code>aload_1</code> preceding the <code>invokedynamic</code> instruction also belongs to the string concatenation. Whether you have to consider more than these variants depends on your actual task."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693488524,"post_id":77015657,"comment_id":135769943,"body_markdown":"There are at least four strategies you may encounter in practice. But do you need to identify code that is a string concatenation *semantically*, then you’d also have to consider, e.g. `&quot;This is the message: &quot; .concat(msg)` or `String.join(&quot;&quot;, &quot;This is the message: &quot;, msg)`, or *literally*, then you have the problem that you can’t distinguish the first variant from the code produced by the source code fragment `new StringBuilder().append(&quot;This is the message: &quot;).append(msg) .toString()`. What about future Java versions, do you need to detect `STR .&quot;This&#160;is&#160;the&#160;message:&#160;\\{msg}&quot;` or not?","body":"There are at least four strategies you may encounter in practice. But do you need to identify code that is a string concatenation <i>semantically</i>, then you’d also have to consider, e.g. <code>&quot;This is the message: &quot; .concat(msg)</code> or <code>String.join(&quot;&quot;, &quot;This is the message: &quot;, msg)</code>, or <i>literally</i>, then you have the problem that you can’t distinguish the first variant from the code produced by the source code fragment <code>new StringBuilder().append(&quot;This is the message: &quot;).append(msg) .toString()</code>. What about future Java versions, do you need to detect <code>STR .&quot;This is the message: \\{msg}&quot;</code> or not?"}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693556090,"post_id":77020935,"comment_id":135779473,"body_markdown":"The `ldc` instruction only pushes a constant part of the string concatenation to the operand stack, **if** there is such a constant part. For `public static String test(String s1, String s2) { return s1 + s2 + &quot;blah&quot;; }`, the `ldc` instruction will be *after* the local variables have been pushed. But for `public static String test(String s1, String s2) { return s1 + s2; }`, there is no constant part, hence no `ldc` instruction. Further, byte code can contain `ldc` instructions even without any string concatenation. As said, you should explain your actual task, then, we can suggest an solution.","body":"The <code>ldc</code> instruction only pushes a constant part of the string concatenation to the operand stack, <b>if</b> there is such a constant part. For <code>public static String test(String s1, String s2) { return s1 + s2 + &quot;blah&quot;; }</code>, the <code>ldc</code> instruction will be <i>after</i> the local variables have been pushed. But for <code>public static String test(String s1, String s2) { return s1 + s2; }</code>, there is no constant part, hence no <code>ldc</code> instruction. Further, byte code can contain <code>ldc</code> instructions even without any string concatenation. As said, you should explain your actual task, then, we can suggest an solution."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693556156,"post_id":77020935,"comment_id":135779485,"body_markdown":"See also [What is the XY problem?](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378)","body":"See also <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378\">What is the XY problem?</a>"},{"owner":{"account_id":10775834,"reputation":528,"user_id":9165920,"display_name":"Irfan Latif"},"score":0,"creation_date":1693563176,"post_id":77020935,"comment_id":135780845,"body_markdown":"@Holger what I asked in the question very clearly has been answered very clearly. It solves my problem. I&#39;ve fixed my code. I gave a brief context of bytecode manipulation in the question to avoid &quot;why do you care?&quot; type comments. If I need help with `ldc` or bytecode manipulation in general, I&#39;ll post another question. Thank you for your great help.","body":"@Holger what I asked in the question very clearly has been answered very clearly. It solves my problem. I&#39;ve fixed my code. I gave a brief context of bytecode manipulation in the question to avoid &quot;why do you care?&quot; type comments. If I need help with <code>ldc</code> or bytecode manipulation in general, I&#39;ll post another question. Thank you for your great help."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693564407,"post_id":77020935,"comment_id":135781068,"body_markdown":"No, the question as asked has not been answered. As I said earlier, there are at least *four* different strategies you can encounter in practice. You covered only two of them. Whether the others you have missed matter, depends on your actual task. I’m not wasting my time to explain what you’ve missed so far. Maybe it doesn’t matter to you anyway. But maybe you’re just creating a ticking time bomb. Who knows. Good luck with that.","body":"No, the question as asked has not been answered. As I said earlier, there are at least <i>four</i> different strategies you can encounter in practice. You covered only two of them. Whether the others you have missed matter, depends on your actual task. I’m not wasting my time to explain what you’ve missed so far. Maybe it doesn’t matter to you anyway. But maybe you’re just creating a ticking time bomb. Who knows. Good luck with that."}],"tags":[],"owner":{"account_id":10775834,"reputation":528,"user_id":9165920,"display_name":"Irfan Latif"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693549611,"creation_date":1693549611,"answer_id":77020935,"question_id":77015657,"body_markdown":"String concatenation behavior was changed in Java 9.\r\n\r\nIn the former case, the class belongs to the main app which was built using `-source 8 -target 8`. While in the latter case, the class belongs to a library which is (a dependency of the app but) built with `-source 11 -target 11`. So the compiled bytecode differs w.r.t. string concatenation.\r\n\r\nThanks to [@Stephen C](https://stackoverflow.com/users/139985) and [@Kayaman](https://stackoverflow.com/users/2541560) for the links:\r\n- [String Concatenation with Invoke Dynamic](https://www.baeldung.com/java-string-concatenation-invoke-dynamic)\r\n- [JEP 280: Indify String Concatenation](https://openjdk.org/jeps/280)\r\n\r\n---\r\n\r\nFor the sake of completeness, as [@Holger](https://stackoverflow.com/users/2711488) mentioned in comments, `StringBuilder`, `String.concat()` and `String.join()` are identical when it comes to string manipulation in the compiled bytecode. Because in all three cases the string constant is first pushed onto the stack using `ldc` (where it can be simply manipulated). But in the case of `StringConcatFactory.makeConcatWithConstants()`, references of local string variables are first pushed onto the stack using `aload`.","title":"How is string concatenation handled in Java bytecode compilation?","body":"<p>String concatenation behavior was changed in Java 9.</p>\n<p>In the former case, the class belongs to the main app which was built using <code>-source 8 -target 8</code>. While in the latter case, the class belongs to a library which is (a dependency of the app but) built with <code>-source 11 -target 11</code>. So the compiled bytecode differs w.r.t. string concatenation.</p>\n<p>Thanks to <a href=\"https://stackoverflow.com/users/139985\">@Stephen C</a> and <a href=\"https://stackoverflow.com/users/2541560\">@Kayaman</a> for the links:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/java-string-concatenation-invoke-dynamic\" rel=\"nofollow noreferrer\">String Concatenation with Invoke Dynamic</a></li>\n<li><a href=\"https://openjdk.org/jeps/280\" rel=\"nofollow noreferrer\">JEP 280: Indify String Concatenation</a></li>\n</ul>\n<hr />\n<p>For the sake of completeness, as <a href=\"https://stackoverflow.com/users/2711488\">@Holger</a> mentioned in comments, <code>StringBuilder</code>, <code>String.concat()</code> and <code>String.join()</code> are identical when it comes to string manipulation in the compiled bytecode. Because in all three cases the string constant is first pushed onto the stack using <code>ldc</code> (where it can be simply manipulated). But in the case of <code>StringConcatFactory.makeConcatWithConstants()</code>, references of local string variables are first pushed onto the stack using <code>aload</code>.</p>\n"}],"owner":{"account_id":10775834,"reputation":528,"user_id":9165920,"display_name":"Irfan Latif"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693549611,"creation_date":1693483322,"question_id":77015657,"body_markdown":"```\r\npublic class TestException extends Exception {\r\n\r\n  public TestException(String msg) {\r\n    super(&quot;This is the message: &quot; + msg);\r\n  }\r\n}\r\n```\r\n\r\nThe above code is compiled to:\r\n```\r\npublic class TestException extends java.lang.Exception {\r\n  public TestException(java.lang.String);\r\n    Code:\r\n       0: aload_0\r\n       1: new           #1                  // class java/lang/StringBuilder\r\n       4: dup\r\n       5: invokespecial #3                  // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V\r\n       8: ldc           #7                  // String This is the message:\r\n      10: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\r\n      13: aload_1\r\n      14: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\r\n      17: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;\r\n      20: invokespecial #17                 // Method java/lang/Exception.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n      23: return\r\n}\r\n```\r\nHere a `StringBuilder` object is created to concatenate the strings.\r\n\r\nWhile in the same app at another place an exactly similar class is compiled to:\r\n```\r\npublic class TestException extends java.lang.Exception {\r\n  public TestException(java.lang.String);\r\n    Code:\r\n       0: aload_0\r\n       1: aload_1\r\n       2: invokedynamic #1,  0              // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;)Ljava/lang/String;\r\n       7: invokespecial #5                  // Method java/lang/Exception.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\r\n      10: return\r\n}\r\n```\r\nHere `StringConcatFactory.makeConcatWithConstants()` is invoked to concatenate the strings.\r\n\r\nWhich factors determine this different behavior? How it can be predicted / controlled?\r\n\r\n---\r\n\r\n**PS:**  \r\nIn the former case `ldc` instruction is called, which can be intercepted by overriding the [`MethodVisitor.visitLdcInsn()`](https://asm.ow2.io/javadoc/org/objectweb/asm/MethodVisitor.html#visitLdcInsn(java.lang.Object)) method and the String can be manipulated.\r\n\r\nTo address the latter behavior [`MethodVisitor.visitInvokeDynamicInsn()`](https://asm.ow2.io/javadoc/org/objectweb/asm/MethodVisitor.html#visitInvokeDynamicInsn(java.lang.String,java.lang.String,org.objectweb.asm.Handle,java.lang.Object...)) callback also needs to be overridden.\r\n\r\nAnd I&#39;m not sure if there are other possible behaviors too.","title":"How is string concatenation handled in Java bytecode compilation?","body":"<pre><code>public class TestException extends Exception {\n\n  public TestException(String msg) {\n    super(&quot;This is the message: &quot; + msg);\n  }\n}\n</code></pre>\n<p>The above code is compiled to:</p>\n<pre><code>public class TestException extends java.lang.Exception {\n  public TestException(java.lang.String);\n    Code:\n       0: aload_0\n       1: new           #1                  // class java/lang/StringBuilder\n       4: dup\n       5: invokespecial #3                  // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V\n       8: ldc           #7                  // String This is the message:\n      10: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n      13: aload_1\n      14: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;\n      17: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;\n      20: invokespecial #17                 // Method java/lang/Exception.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\n      23: return\n}\n</code></pre>\n<p>Here a <code>StringBuilder</code> object is created to concatenate the strings.</p>\n<p>While in the same app at another place an exactly similar class is compiled to:</p>\n<pre><code>public class TestException extends java.lang.Exception {\n  public TestException(java.lang.String);\n    Code:\n       0: aload_0\n       1: aload_1\n       2: invokedynamic #1,  0              // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;)Ljava/lang/String;\n       7: invokespecial #5                  // Method java/lang/Exception.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V\n      10: return\n}\n</code></pre>\n<p>Here <code>StringConcatFactory.makeConcatWithConstants()</code> is invoked to concatenate the strings.</p>\n<p>Which factors determine this different behavior? How it can be predicted / controlled?</p>\n<hr />\n<p><strong>PS:</strong><br />\nIn the former case <code>ldc</code> instruction is called, which can be intercepted by overriding the <a href=\"https://asm.ow2.io/javadoc/org/objectweb/asm/MethodVisitor.html#visitLdcInsn(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>MethodVisitor.visitLdcInsn()</code></a> method and the String can be manipulated.</p>\n<p>To address the latter behavior <a href=\"https://asm.ow2.io/javadoc/org/objectweb/asm/MethodVisitor.html#visitInvokeDynamicInsn(java.lang.String,java.lang.String,org.objectweb.asm.Handle,java.lang.Object...)\" rel=\"nofollow noreferrer\"><code>MethodVisitor.visitInvokeDynamicInsn()</code></a> callback also needs to be overridden.</p>\n<p>And I'm not sure if there are other possible behaviors too.</p>\n"},{"tags":["java","angular","typescript"],"comments":[{"owner":{"account_id":6263943,"reputation":249,"user_id":4870257,"display_name":"Sumit Kumar"},"score":0,"creation_date":1693481204,"post_id":77015254,"comment_id":135768344,"body_markdown":"please share code along with classes and imports.","body":"please share code along with classes and imports."},{"owner":{"account_id":14915043,"reputation":93,"user_id":10769117,"display_name":"J.Klimov"},"score":0,"creation_date":1693482465,"post_id":77015254,"comment_id":135768610,"body_markdown":"Added all necessary information","body":"Added all necessary information"},{"owner":{"account_id":6263943,"reputation":249,"user_id":4870257,"display_name":"Sumit Kumar"},"score":0,"creation_date":1693493418,"post_id":77015254,"comment_id":135771148,"body_markdown":"From where are you calling the assetService.getAssets()?","body":"From where are you calling the assetService.getAssets()?"},{"owner":{"account_id":6263943,"reputation":249,"user_id":4870257,"display_name":"Sumit Kumar"},"score":0,"creation_date":1693493633,"post_id":77015254,"comment_id":135771194,"body_markdown":"It&#39;s working fine. \nhttps://stackblitz.com/edit/stackblitz-starters-ujegec?file=src%2Fmain.ts","body":"It&#39;s working fine.  <a href=\"https://stackblitz.com/edit/stackblitz-starters-ujegec?file=src%2Fmain.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/&hellip;</a>"},{"owner":{"account_id":14915043,"reputation":93,"user_id":10769117,"display_name":"J.Klimov"},"score":0,"creation_date":1693548127,"post_id":77015254,"comment_id":135778129,"body_markdown":"Do I need caching expiration mechanism to work? Added place where it called from","body":"Do I need caching expiration mechanism to work? Added place where it called from"}],"answers":[{"comments":[{"owner":{"account_id":14915043,"reputation":93,"user_id":10769117,"display_name":"J.Klimov"},"score":0,"creation_date":1693481915,"post_id":77015404,"comment_id":135768501,"body_markdown":"This part of code returns Promis:\nconst promise = this.http.get(this.getApiUrl(url), options).toPromise();","body":"This part of code returns Promis: const promise = this.http.get(this.getApiUrl(url), options).toPromise();"}],"tags":[],"owner":{"account_id":475852,"reputation":2089,"user_id":886432,"accept_rate":29,"display_name":"FunkMonkey33"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693481326,"creation_date":1693481326,"answer_id":77015404,"question_id":77015254,"body_markdown":"You forgot to subscribe() to your observable. The Angular HttpClient&#39;s get() method returns an observable, not a Promise.\r\n\r\nJust add .subscribe() after the closing parentheses and you should be good.","title":"Angular HttpClient not interacting with Spring Controller","body":"<p>You forgot to subscribe() to your observable. The Angular HttpClient's get() method returns an observable, not a Promise.</p>\n<p>Just add .subscribe() after the closing parentheses and you should be good.</p>\n"}],"owner":{"account_id":14915043,"reputation":93,"user_id":10769117,"display_name":"J.Klimov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693548190,"creation_date":1693480123,"question_id":77015254,"body_markdown":"I have encountered an issue where my Angular application&#39;s HttpClient doesn&#39;t seem to be interacting correctly with my Spring Controller. I have configured the necessary endpoints and methods in the Spring Controller. The Angular service isn&#39;t making the corresponding HTTP requests using HttpClient.\r\n\r\nI have verified the correctness of the API URLs, ensured that the CORS configuration is properly set up, and checked for any error messages in the browser&#39;s developer console. Developer console shows no call to endpoint. All checks was made in incognito mode, cache issues are excluded.\r\n\r\nI would appreciate any insights, suggestions, or troubleshooting steps that can help me diagnose and resolve this issue effectively.\r\n\r\nController:\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;&quot; + Role.MANAGER_ROLE_NAME + &quot;&#39;) or hasRole(&#39;&quot; + Role.STORE_ROLE_NAME + &quot;&#39;)&quot;)\r\n\t@GetMapping(value = &quot;{organizationId}&quot;)\r\n\tpublic List&lt;SapAsset&gt; getAssets(@PathVariable final long organizationId) {\r\n\t\treturn sapAssetService.getStoreAssets(organizationId);\r\n\t}\r\n\r\nAngular:\r\n```\r\nimport {Injectable} from &#39;@angular/core&#39;;\r\nimport {SecureHttpClientService} from &#39;../../core/services/secure-http-client.service&#39;;\r\nimport {Asset} from &quot;../models/asset&quot;;\r\nimport {DateTimeFormatterService} from &quot;../../core/services/date-time-formatter.service&quot;;\r\nimport {AlertService} from &quot;../../core/services/alert.service&quot;;\r\n\r\n@Injectable()\r\nexport class AssetService {\r\n\r\n\tprotected url = &#39;/assets&#39;;\r\n\tprivate readonly storeAssetsCacheKey = &#39;cachedStoreAssets&#39;;\r\n\tprivate readonly dcAssetsCacheKey = &#39;cachedDcAssets&#39;;\r\n\r\n\tconstructor(private secureHttpClient: SecureHttpClientService, private dateTimeFormatterService: DateTimeFormatterService,\r\n\t\t\t\tprivate alertService: AlertService) {\r\n\t}\r\n\r\n\tpublic getAssets(storeId: number): Promise&lt;Asset[]&gt; {\r\n\t\tconst cachedStoreAssets = this.getFromCache(this.storeAssetsCacheKey);\r\n\t\tif (Array.isArray(cachedStoreAssets)) {\r\n\t\t\treturn Promise.resolve(cachedStoreAssets);\r\n\t\t}\r\n\r\n\t\treturn this.secureHttpClient.get(this.url + &#39;/&#39; + storeId)\r\n\t\t\t.then((response: Asset[]) =&gt; {\r\n\t\t\t\tthis.saveToCache(response, this.storeAssetsCacheKey);\r\n\t\t\t\treturn response;\r\n\t\t\t})\r\n\t\t\t.catch((error: any) =&gt; {\r\n\t\t\t\tthis.alertService.error(&quot;general.sap_error&quot;);\r\n\t\t\t});\r\n\t}\r\n```\r\n\r\nAngular rest wrapper:\r\n```\r\nimport {Injectable} from &#39;@angular/core&#39;;\r\nimport {HttpClientService} from &#39;./http-client.service&#39;;\r\nimport {HttpHeaders} from &#39;@angular/common/http&#39;;\r\nimport {AuthService} from &#39;../../authentication/services/auth.service&#39;;\r\n\r\n@Injectable()\r\nexport class SecureHttpClientService {\r\n\r\n\tapiUrl: string;\r\n\r\n\tconstructor(private httpClient: HttpClientService, private authService: AuthService) {\r\n\t}\r\n\r\n\tprivate createAuthHeader() {\r\n\t\tconst headers = new HttpHeaders({\r\n\t\t\tAuthorization: &#39;Bearer &#39; + this.authService.getToken(),\r\n\t\t});\r\n\r\n\t\tconst options = {\r\n\t\t\theaders\r\n\t\t};\r\n\r\n\t\treturn options;\r\n\t}\r\n\r\n\tpublic get(url: string): any {\r\n\t\treturn this.httpClient.get(url, this.createAuthHeader());\r\n\t}\r\n```\r\n    \r\n\r\nAngular get service:\r\n\r\n```\r\nimport {Injectable} from &#39;@angular/core&#39;;\r\nimport {EnvironmentSpecificService} from &#39;./environment-specific.service&#39;;\r\nimport {EnvSpecific} from &#39;../models/env-specific&#39;;\r\nimport {HttpClient} from &#39;@angular/common/http&#39;;\r\nimport {PageLoadingService} from &#39;../../../services/page-loading.service&#39;;\r\n\r\n@Injectable()\r\nexport class HttpClientService {\r\n\r\n\tapiUrl: string;\r\n\r\n\tconstructor(private http: HttpClient, private environmentSpecificService: EnvironmentSpecificService, private pageLoadingService: PageLoadingService) {\r\n\t\tenvironmentSpecificService.subscribe(this, this.setApiUrl);\r\n\t}\r\n\r\n\tprivate setApiUrl(caller: any, es: EnvSpecific) {\r\n\t\tconst thisCaller = caller as HttpClientService;\r\n\t\tcaller.apiUrl = es.apiUrl;\r\n\t}\r\n\r\n\tpublic getApiUrl(url: string): string {\r\n\t\treturn this.apiUrl + url;\r\n\t}\r\n\r\n\tprivate extractBase64ImageData(response: Response): String {\r\n\t\treturn &#39;data:image/png;base64,&#39; + response.text();\r\n\t}\r\n\r\n\tprivate handleError(error: Response | any) {\r\n\t\tlet errMsg: string;\r\n\t\tif (error instanceof Response) {\r\n\t\t\tconst body = error || &#39;&#39;;\r\n\t\t\tconst err = JSON.stringify(body);\r\n\t\t\terrMsg = `${error.status} - ${error.statusText || &#39;&#39;} ${err}`;\r\n\t\t} else {\r\n\t\t\terrMsg = error.message ? error.message : error.toString();\r\n\t\t}\r\n\t\tconsole.error(error);\r\n\t\treturn Promise.reject(errMsg);\r\n\t}\r\n\r\n\tpublic get(url: string, options?: any): any {\r\n\t\tconst promise = this.http.get(this.getApiUrl(url), options).toPromise();\r\n\t\tthis.pageLoadingService.addPromise(promise);\r\n\t\treturn promise.catch(this.handleError);\r\n\t}\r\n```\r\n\r\nPlace where it called from:\r\n```\r\nimport {Component, NgZone, OnInit} from &#39;@angular/core&#39;;\r\nimport {Router} from &#39;@angular/router&#39;;\r\nimport {AlertService} from &quot;../../../../core/services/alert.service&quot;;\r\nimport {DateTimeFormatterService} from &quot;../../../../core/services/date-time-formatter.service&quot;;\r\nimport {NotificationService} from &quot;../../../../core/services/notification.service&quot;;\r\nimport {Asset} from &quot;../../../models/asset&quot;;\r\nimport {Organization} from &quot;../../../../organizations/models/organization&quot;;\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from &quot;@angular/forms&quot;;\r\nimport {AuthService} from &quot;../../../../authentication/services/auth.service&quot;;\r\nimport {OrganizationService} from &quot;../../../../organizations/services/organization.service&quot;;\r\nimport {MatSelectChange} from &quot;@angular/material/select&quot;;\r\nimport {Utils} from &quot;../../../../core/utils/utils&quot;;\r\nimport {AssetService} from &quot;../../../services/asset.service&quot;;\r\nimport {RoleEnum} from &quot;../../../../authentication/enums/role-enum&quot;;\r\nimport {ExternalMovementsService} from &quot;../../../services/external-movements.service&quot;;\r\nimport {FormUtils} from &quot;../../../../shared/utils/form-utils&quot;;\r\n\r\n@Component({\r\n\tselector: &#39;create-external-order&#39;,\r\n\ttemplateUrl: &#39;./create-external-movement-order.component.html&#39;,\r\n\tstyleUrls: [&#39;./create-external-movement-order.component.css&#39;]\r\n})\r\nexport class CreateExternalMovementOrderComponent implements OnInit {\r\n\r\n\tfilterValue: string = &quot;&quot;;\r\n\tassignableOrganizations: Organization[] = [];\r\n\tfilteredOrganizations: Organization[];\r\n\tassignableAssets: Asset[] = [];\r\n\tfilteredAssets: Asset[] = [];\r\n\r\n\tpublic storeFilterControl = new FormControl();\r\n\r\n\tform: FormGroup;\r\n\r\n\tconstructor(private dateTimeFormatterService: DateTimeFormatterService, private zone: NgZone,\r\n\t            private alertService: AlertService, private router: Router,\r\n\t            private notificationService: NotificationService,\r\n\t            private formBuilder: FormBuilder,\r\n\t            private externalMovementsService: ExternalMovementsService,\r\n\t            private authService: AuthService,\r\n\t            private organizationService: OrganizationService,\r\n\t            private assetService: AssetService) {\r\n\r\n\t\tthis.form = this.formBuilder.group({\r\n\t\t\tfromOrganizationId: [null, Validators.compose([])],\r\n\t\t\ttoOrganization: [null, Validators.compose([Validators.required])],\r\n\t\t});\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\tif ((this.authService.getRole() == RoleEnum.MANAGER)) {\r\n\t\t\tthis.organizationService.getAssignableWithDc().then(result =&gt; {\r\n\t\t\t\tthis.assignableOrganizations = result.filter(item =&gt; item.externalId != null);\r\n\t\t\t\tthis.filteredOrganizations = this.assignableOrganizations;\r\n\r\n\t\t\t\tconst sourceOrganization = this.externalMovementsService.getOrderSourceOrganization();\r\n\t\t\t\tif (!sourceOrganization) {\r\n\t\t\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).setValidators(Validators.compose([Validators.required]));\r\n\t\t\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).updateValueAndValidity();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).setValue(sourceOrganization.id);\r\n\t\t\t\t\tthis.loadAssets(sourceOrganization.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst destinationOrganization = this.externalMovementsService.getOrderDestinationOrganization();\r\n\t\t\t\tthis.form.get(&quot;toOrganization&quot;).setValue(destinationOrganization);\r\n\t\t\t}, error =&gt; {\r\n\t\t\t\tthis.alertService.genericError();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst storeId = this.authService.getOrganizationId();\r\n\t\t\tthis.assignableOrganizations = [this.authService.getOrganization()];\r\n\t\t\tthis.filteredOrganizations = [this.authService.getOrganization()];\r\n\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).setValue(storeId);\r\n\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).disable();\r\n\r\n\t\t\tthis.loadAssetsAndSelectOrganization(storeId);\r\n\t\t}\r\n\t}\r\n\r\n\tnavigateToCheckout() {\r\n\t\tFormUtils.validateAllFormFields(this.form);\r\n\r\n\t\tif (this.form.valid) {\r\n\t\t\tthis.externalMovementsService.setOrderDestinationOrganization(this.form.get(&quot;toOrganization&quot;).value);\r\n\t\t\tthis.router.navigateByUrl(&#39;/movements/external/create/checkout&#39;);\r\n\t\t}\r\n\t}\r\n\r\n\tloadAssets(storeId: number) {\r\n\t\tthis.assetService.getAssets(storeId).then(result =&gt; {\r\n\t\t\tthis.assignableAssets = result;\r\n\t\t\tthis.filteredAssets = result;\r\n\t\t}, error =&gt; {\r\n\t\t\tthis.alertService.genericError();\r\n\t\t});\r\n\t}\r\n\r\n\tfromOrganizationSelected(event: MatSelectChange) {\r\n\t\tconst storeId = event.value;\r\n\t\tthis.updateSelectedOrganization(storeId);\r\n\t}\r\n\r\n\tupdateSelectedOrganization(organizationId: number) {\r\n\t\tconst previousOrganizationId = this.externalMovementsService.getOrderSourceOrganization()?.id || null;\r\n\t\tconst orderHasItems = this.externalMovementsService.getOrderItems().length &gt; 0;\r\n\r\n\t\tif (previousOrganizationId !== null &amp;&amp; previousOrganizationId !== organizationId) {\r\n\t\t\tif (orderHasItems) {\r\n\t\t\t\tthis.alertService.confirm(() =&gt; {\r\n\t\t\t\t\tthis.externalMovementsService.clearOrder();\r\n\t\t\t\t\tthis.loadAssetsAndSelectOrganization(organizationId);\r\n\t\t\t\t}, &quot;You are about to change order organization, all cart items will be lost, proceed?&quot;, null, () =&gt; {\r\n\t\t\t\t\tthis.form.get(&#39;fromOrganizationId&#39;).setValue(previousOrganizationId);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.loadAssetsAndSelectOrganization(organizationId);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.loadAssetsAndSelectOrganization(organizationId);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate loadAssetsAndSelectOrganization(organizationId: number) {\r\n\t\tthis.assignableAssets = [];\r\n\t\tthis.loadAssets(organizationId);\r\n\t\tconst organization = this.assignableOrganizations.filter(item =&gt; item.id == organizationId).pop();\r\n\t\tthis.externalMovementsService.setOrderSourceOrganization(organization);\r\n\t}\r\n\r\n\tisItemAlreadyAddedToCart(asset: Asset) {\r\n\t\treturn this.externalMovementsService.isItemAlreadyAddedToCart(asset.assetId);\r\n\t}\r\n\r\n\taddToOrder(asset: Asset) {\r\n\t\tthis.externalMovementsService.addToOrder(asset);\r\n\t}\r\n\r\n\tfilterUpdated(filterValue) {\r\n\t\tif (filterValue == null || filterValue == &quot;&quot;) {\r\n\t\t\tthis.filteredAssets = this.assignableAssets;\r\n\t\t} else {\r\n\t\t\tthis.filteredAssets = this.assignableAssets.filter(element =&gt; {\r\n\t\t\t\tfor (let value of Object.values(element)) {\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tif (value.toString().toLowerCase().indexOf(filterValue.toLowerCase()) &gt; -1) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tremoveFromOrder(asset: Asset) {\r\n\t\tthis.externalMovementsService.deleteFromOrder(asset.assetId);\r\n\t}\r\n\r\n\tclearOrder() {\r\n\t\tthis.externalMovementsService.clearOrder();\r\n\t}\r\n\r\n\tshoppingCartIsNotEmpty() {\r\n\t\treturn this.externalMovementsService.getOrderItems().length != 0;\r\n\t}\r\n\r\n\tnavigateBack() {\r\n\t\tthis.router.navigateByUrl(&#39;/movements/external&#39;);\r\n\t}\r\n\r\n\tformatOrganizationTitle(organization: Organization): string {\r\n\t\tif (!Utils.isNullOrUndefinedOrEmpty(organization.externalId)) {\r\n\t\t\treturn organization.name + &quot; (&quot; + organization.externalId + &quot;)&quot;;\r\n\t\t}\r\n\r\n\t\treturn organization.name;\r\n\t}\r\n\r\n\r\n\tgetFormattedDate(date: number): string {\r\n\t\treturn this.dateTimeFormatterService.formatTimestampToDisplayDate(date);\r\n\t}\r\n\r\n\tupdateFilteredOrganizations() {\r\n\t\tconst value = this.storeFilterControl.value;\r\n\t\tif (!value) {\r\n\t\t\tthis.filteredOrganizations = this.assignableOrganizations;\r\n\t\t} else {\r\n\t\t\tthis.filteredOrganizations = this.assignableOrganizations\r\n\t\t\t\t.filter(item =&gt; {\r\n\t\t\t\t\tconst searchIn = item.name + &#39; &#39; + item.externalId;\r\n\t\t\t\t\treturn searchIn.toLocaleLowerCase().includes(value.toLowerCase());\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonPanelClose() {\r\n\t\tthis.storeFilterControl.setValue(&#39;&#39;);\r\n\t\tthis.updateFilteredOrganizations();\r\n\t}\r\n\r\n\tgetAssetTooltip(asset: Asset) {\r\n\t\treturn this.assetService.getAssetTooltip(asset);\r\n\t}\r\n}\r\n\r\n```","title":"Angular HttpClient not interacting with Spring Controller","body":"<p>I have encountered an issue where my Angular application's HttpClient doesn't seem to be interacting correctly with my Spring Controller. I have configured the necessary endpoints and methods in the Spring Controller. The Angular service isn't making the corresponding HTTP requests using HttpClient.</p>\n<p>I have verified the correctness of the API URLs, ensured that the CORS configuration is properly set up, and checked for any error messages in the browser's developer console. Developer console shows no call to endpoint. All checks was made in incognito mode, cache issues are excluded.</p>\n<p>I would appreciate any insights, suggestions, or troubleshooting steps that can help me diagnose and resolve this issue effectively.</p>\n<p>Controller:</p>\n<pre><code>@PreAuthorize(&quot;hasRole('&quot; + Role.MANAGER_ROLE_NAME + &quot;') or hasRole('&quot; + Role.STORE_ROLE_NAME + &quot;')&quot;)\n@GetMapping(value = &quot;{organizationId}&quot;)\npublic List&lt;SapAsset&gt; getAssets(@PathVariable final long organizationId) {\n    return sapAssetService.getStoreAssets(organizationId);\n}\n</code></pre>\n<p>Angular:</p>\n<pre><code>import {Injectable} from '@angular/core';\nimport {SecureHttpClientService} from '../../core/services/secure-http-client.service';\nimport {Asset} from &quot;../models/asset&quot;;\nimport {DateTimeFormatterService} from &quot;../../core/services/date-time-formatter.service&quot;;\nimport {AlertService} from &quot;../../core/services/alert.service&quot;;\n\n@Injectable()\nexport class AssetService {\n\n    protected url = '/assets';\n    private readonly storeAssetsCacheKey = 'cachedStoreAssets';\n    private readonly dcAssetsCacheKey = 'cachedDcAssets';\n\n    constructor(private secureHttpClient: SecureHttpClientService, private dateTimeFormatterService: DateTimeFormatterService,\n                private alertService: AlertService) {\n    }\n\n    public getAssets(storeId: number): Promise&lt;Asset[]&gt; {\n        const cachedStoreAssets = this.getFromCache(this.storeAssetsCacheKey);\n        if (Array.isArray(cachedStoreAssets)) {\n            return Promise.resolve(cachedStoreAssets);\n        }\n\n        return this.secureHttpClient.get(this.url + '/' + storeId)\n            .then((response: Asset[]) =&gt; {\n                this.saveToCache(response, this.storeAssetsCacheKey);\n                return response;\n            })\n            .catch((error: any) =&gt; {\n                this.alertService.error(&quot;general.sap_error&quot;);\n            });\n    }\n</code></pre>\n<p>Angular rest wrapper:</p>\n<pre><code>import {Injectable} from '@angular/core';\nimport {HttpClientService} from './http-client.service';\nimport {HttpHeaders} from '@angular/common/http';\nimport {AuthService} from '../../authentication/services/auth.service';\n\n@Injectable()\nexport class SecureHttpClientService {\n\n    apiUrl: string;\n\n    constructor(private httpClient: HttpClientService, private authService: AuthService) {\n    }\n\n    private createAuthHeader() {\n        const headers = new HttpHeaders({\n            Authorization: 'Bearer ' + this.authService.getToken(),\n        });\n\n        const options = {\n            headers\n        };\n\n        return options;\n    }\n\n    public get(url: string): any {\n        return this.httpClient.get(url, this.createAuthHeader());\n    }\n</code></pre>\n<p>Angular get service:</p>\n<pre><code>import {Injectable} from '@angular/core';\nimport {EnvironmentSpecificService} from './environment-specific.service';\nimport {EnvSpecific} from '../models/env-specific';\nimport {HttpClient} from '@angular/common/http';\nimport {PageLoadingService} from '../../../services/page-loading.service';\n\n@Injectable()\nexport class HttpClientService {\n\n    apiUrl: string;\n\n    constructor(private http: HttpClient, private environmentSpecificService: EnvironmentSpecificService, private pageLoadingService: PageLoadingService) {\n        environmentSpecificService.subscribe(this, this.setApiUrl);\n    }\n\n    private setApiUrl(caller: any, es: EnvSpecific) {\n        const thisCaller = caller as HttpClientService;\n        caller.apiUrl = es.apiUrl;\n    }\n\n    public getApiUrl(url: string): string {\n        return this.apiUrl + url;\n    }\n\n    private extractBase64ImageData(response: Response): String {\n        return 'data:image/png;base64,' + response.text();\n    }\n\n    private handleError(error: Response | any) {\n        let errMsg: string;\n        if (error instanceof Response) {\n            const body = error || '';\n            const err = JSON.stringify(body);\n            errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\n        } else {\n            errMsg = error.message ? error.message : error.toString();\n        }\n        console.error(error);\n        return Promise.reject(errMsg);\n    }\n\n    public get(url: string, options?: any): any {\n        const promise = this.http.get(this.getApiUrl(url), options).toPromise();\n        this.pageLoadingService.addPromise(promise);\n        return promise.catch(this.handleError);\n    }\n</code></pre>\n<p>Place where it called from:</p>\n<pre><code>import {Component, NgZone, OnInit} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {AlertService} from &quot;../../../../core/services/alert.service&quot;;\nimport {DateTimeFormatterService} from &quot;../../../../core/services/date-time-formatter.service&quot;;\nimport {NotificationService} from &quot;../../../../core/services/notification.service&quot;;\nimport {Asset} from &quot;../../../models/asset&quot;;\nimport {Organization} from &quot;../../../../organizations/models/organization&quot;;\nimport {FormBuilder, FormControl, FormGroup, Validators} from &quot;@angular/forms&quot;;\nimport {AuthService} from &quot;../../../../authentication/services/auth.service&quot;;\nimport {OrganizationService} from &quot;../../../../organizations/services/organization.service&quot;;\nimport {MatSelectChange} from &quot;@angular/material/select&quot;;\nimport {Utils} from &quot;../../../../core/utils/utils&quot;;\nimport {AssetService} from &quot;../../../services/asset.service&quot;;\nimport {RoleEnum} from &quot;../../../../authentication/enums/role-enum&quot;;\nimport {ExternalMovementsService} from &quot;../../../services/external-movements.service&quot;;\nimport {FormUtils} from &quot;../../../../shared/utils/form-utils&quot;;\n\n@Component({\n    selector: 'create-external-order',\n    templateUrl: './create-external-movement-order.component.html',\n    styleUrls: ['./create-external-movement-order.component.css']\n})\nexport class CreateExternalMovementOrderComponent implements OnInit {\n\n    filterValue: string = &quot;&quot;;\n    assignableOrganizations: Organization[] = [];\n    filteredOrganizations: Organization[];\n    assignableAssets: Asset[] = [];\n    filteredAssets: Asset[] = [];\n\n    public storeFilterControl = new FormControl();\n\n    form: FormGroup;\n\n    constructor(private dateTimeFormatterService: DateTimeFormatterService, private zone: NgZone,\n                private alertService: AlertService, private router: Router,\n                private notificationService: NotificationService,\n                private formBuilder: FormBuilder,\n                private externalMovementsService: ExternalMovementsService,\n                private authService: AuthService,\n                private organizationService: OrganizationService,\n                private assetService: AssetService) {\n\n        this.form = this.formBuilder.group({\n            fromOrganizationId: [null, Validators.compose([])],\n            toOrganization: [null, Validators.compose([Validators.required])],\n        });\n    }\n\n    ngOnInit(): void {\n        if ((this.authService.getRole() == RoleEnum.MANAGER)) {\n            this.organizationService.getAssignableWithDc().then(result =&gt; {\n                this.assignableOrganizations = result.filter(item =&gt; item.externalId != null);\n                this.filteredOrganizations = this.assignableOrganizations;\n\n                const sourceOrganization = this.externalMovementsService.getOrderSourceOrganization();\n                if (!sourceOrganization) {\n                    this.form.get('fromOrganizationId').setValidators(Validators.compose([Validators.required]));\n                    this.form.get('fromOrganizationId').updateValueAndValidity();\n                } else {\n                    this.form.get('fromOrganizationId').setValue(sourceOrganization.id);\n                    this.loadAssets(sourceOrganization.id);\n                }\n\n                const destinationOrganization = this.externalMovementsService.getOrderDestinationOrganization();\n                this.form.get(&quot;toOrganization&quot;).setValue(destinationOrganization);\n            }, error =&gt; {\n                this.alertService.genericError();\n            });\n        } else {\n            const storeId = this.authService.getOrganizationId();\n            this.assignableOrganizations = [this.authService.getOrganization()];\n            this.filteredOrganizations = [this.authService.getOrganization()];\n            this.form.get('fromOrganizationId').setValue(storeId);\n            this.form.get('fromOrganizationId').disable();\n\n            this.loadAssetsAndSelectOrganization(storeId);\n        }\n    }\n\n    navigateToCheckout() {\n        FormUtils.validateAllFormFields(this.form);\n\n        if (this.form.valid) {\n            this.externalMovementsService.setOrderDestinationOrganization(this.form.get(&quot;toOrganization&quot;).value);\n            this.router.navigateByUrl('/movements/external/create/checkout');\n        }\n    }\n\n    loadAssets(storeId: number) {\n        this.assetService.getAssets(storeId).then(result =&gt; {\n            this.assignableAssets = result;\n            this.filteredAssets = result;\n        }, error =&gt; {\n            this.alertService.genericError();\n        });\n    }\n\n    fromOrganizationSelected(event: MatSelectChange) {\n        const storeId = event.value;\n        this.updateSelectedOrganization(storeId);\n    }\n\n    updateSelectedOrganization(organizationId: number) {\n        const previousOrganizationId = this.externalMovementsService.getOrderSourceOrganization()?.id || null;\n        const orderHasItems = this.externalMovementsService.getOrderItems().length &gt; 0;\n\n        if (previousOrganizationId !== null &amp;&amp; previousOrganizationId !== organizationId) {\n            if (orderHasItems) {\n                this.alertService.confirm(() =&gt; {\n                    this.externalMovementsService.clearOrder();\n                    this.loadAssetsAndSelectOrganization(organizationId);\n                }, &quot;You are about to change order organization, all cart items will be lost, proceed?&quot;, null, () =&gt; {\n                    this.form.get('fromOrganizationId').setValue(previousOrganizationId);\n                });\n            } else {\n                this.loadAssetsAndSelectOrganization(organizationId);\n            }\n        } else {\n            this.loadAssetsAndSelectOrganization(organizationId);\n        }\n    }\n\n    private loadAssetsAndSelectOrganization(organizationId: number) {\n        this.assignableAssets = [];\n        this.loadAssets(organizationId);\n        const organization = this.assignableOrganizations.filter(item =&gt; item.id == organizationId).pop();\n        this.externalMovementsService.setOrderSourceOrganization(organization);\n    }\n\n    isItemAlreadyAddedToCart(asset: Asset) {\n        return this.externalMovementsService.isItemAlreadyAddedToCart(asset.assetId);\n    }\n\n    addToOrder(asset: Asset) {\n        this.externalMovementsService.addToOrder(asset);\n    }\n\n    filterUpdated(filterValue) {\n        if (filterValue == null || filterValue == &quot;&quot;) {\n            this.filteredAssets = this.assignableAssets;\n        } else {\n            this.filteredAssets = this.assignableAssets.filter(element =&gt; {\n                for (let value of Object.values(element)) {\n                    if (value) {\n                        if (value.toString().toLowerCase().indexOf(filterValue.toLowerCase()) &gt; -1) {\n                            return true;\n                        }\n                    }\n                }\n                return false;\n            });\n        }\n    }\n\n    removeFromOrder(asset: Asset) {\n        this.externalMovementsService.deleteFromOrder(asset.assetId);\n    }\n\n    clearOrder() {\n        this.externalMovementsService.clearOrder();\n    }\n\n    shoppingCartIsNotEmpty() {\n        return this.externalMovementsService.getOrderItems().length != 0;\n    }\n\n    navigateBack() {\n        this.router.navigateByUrl('/movements/external');\n    }\n\n    formatOrganizationTitle(organization: Organization): string {\n        if (!Utils.isNullOrUndefinedOrEmpty(organization.externalId)) {\n            return organization.name + &quot; (&quot; + organization.externalId + &quot;)&quot;;\n        }\n\n        return organization.name;\n    }\n\n\n    getFormattedDate(date: number): string {\n        return this.dateTimeFormatterService.formatTimestampToDisplayDate(date);\n    }\n\n    updateFilteredOrganizations() {\n        const value = this.storeFilterControl.value;\n        if (!value) {\n            this.filteredOrganizations = this.assignableOrganizations;\n        } else {\n            this.filteredOrganizations = this.assignableOrganizations\n                .filter(item =&gt; {\n                    const searchIn = item.name + ' ' + item.externalId;\n                    return searchIn.toLocaleLowerCase().includes(value.toLowerCase());\n                });\n        }\n    }\n\n    onPanelClose() {\n        this.storeFilterControl.setValue('');\n        this.updateFilteredOrganizations();\n    }\n\n    getAssetTooltip(asset: Asset) {\n        return this.assetService.getAssetTooltip(asset);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","multithreading","spring-boot","spring-batch","nosuchelementexception"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1673379950,"post_id":75074922,"comment_id":132484459,"body_markdown":"Multiple threads call `hasNext` all get `true` they all call `next()`.. That fails. `Iterator` isn&#39;t thread-safe so your solution is wrong. It also feels wrong to have an iterator to list files and then read them in a processor. Feels like you should be using a `MultiResourceItemReader` with a `FlatFileItemReader` instead. But that depends on what you are all doing in your processor. Else wrap the `IteratorItemReader` in a `SynchronizedItemStreamReader` to make it (sort of) thread-safe.","body":"Multiple threads call <code>hasNext</code> all get <code>true</code> they all call <code>next()</code>.. That fails. <code>Iterator</code> isn&#39;t thread-safe so your solution is wrong. It also feels wrong to have an iterator to list files and then read them in a processor. Feels like you should be using a <code>MultiResourceItemReader</code> with a <code>FlatFileItemReader</code> instead. But that depends on what you are all doing in your processor. Else wrap the <code>IteratorItemReader</code> in a <code>SynchronizedItemStreamReader</code> to make it (sort of) thread-safe."},{"owner":{"account_id":27163278,"reputation":11,"user_id":20701131,"display_name":"Guest_017"},"score":0,"creation_date":1673414838,"post_id":75074922,"comment_id":132491003,"body_markdown":"Hi @M.Denium thanks for your time and your inputs, i just have one doubt adding **synchronized** to reader method will do any magic here? like `public synchronized ItemReader&lt;File&gt; testReader(){ }`","body":"Hi @M.Denium thanks for your time and your inputs, i just have one doubt adding <b>synchronized</b> to reader method will do any magic here? like <code>public synchronized ItemReader&lt;File&gt; testReader(){ }</code>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673420877,"post_id":75074922,"comment_id":132492207,"body_markdown":"No it won&#39;t. As stated you need to wrap it in the `SynchronizedItemStreamReader`.","body":"No it won&#39;t. As stated you need to wrap it in the <code>SynchronizedItemStreamReader</code>."},{"owner":{"account_id":27163278,"reputation":11,"user_id":20701131,"display_name":"Guest_017"},"score":0,"creation_date":1673443577,"post_id":75074922,"comment_id":132499863,"body_markdown":"i&#39;m very new to this spring batch can you please provide sample of how to wrap it in the `SynchronizedItemStreamReader`","body":"i&#39;m very new to this spring batch can you please provide sample of how to wrap it in the <code>SynchronizedItemStreamReader</code>"}],"answers":[{"tags":[],"owner":{"account_id":5071493,"reputation":95,"user_id":8068699,"display_name":"Aliabbas Merchant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693548079,"creation_date":1693548079,"answer_id":77020803,"question_id":75074922,"body_markdown":"Directly wrapping it in a `SynchronizedItemStreamReader` does not work, as that needs an `ItemStreamReader`, but `IteratorItemReader` is not an `ItemStreamReader`.\r\nI figure that the best way out would be to create a custom `SynchronizedIteratorItemReader`. It would be the exact same as an `IteratorItemReader`, just that the `read()` method should be marked as synchronized.","title":"Spring batch multithreading problem with Iterator Item Reader","body":"<p>Directly wrapping it in a <code>SynchronizedItemStreamReader</code> does not work, as that needs an <code>ItemStreamReader</code>, but <code>IteratorItemReader</code> is not an <code>ItemStreamReader</code>.\nI figure that the best way out would be to create a custom <code>SynchronizedIteratorItemReader</code>. It would be the exact same as an <code>IteratorItemReader</code>, just that the <code>read()</code> method should be marked as synchronized.</p>\n"}],"owner":{"account_id":27163278,"reputation":11,"user_id":20701131,"display_name":"Guest_017"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":498,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693548079,"creation_date":1673378907,"question_id":75074922,"body_markdown":"I&#39;m new to spring batch and still learning, I have batch configuration with IteratorItemReader , Custom Processor and Custom Writer as below,\r\n\r\n```\r\n@Autowired\r\nJobBuilderFactory jobBuilderFactory;\r\n@Autowired\r\nStepBuilderFactory stepBuilderFactory;\r\n@Value(&quot;${inputFile.location}&quot;)\r\nprivate String inputFile;\r\n\r\n@Bean\r\npublic Job testJob() throws IOException {\r\n\treturn jobBuilderFactory.get(&quot;testJob&quot;)\r\n                .incrementer(new RunIdIncrementer())\r\n                .start(testStep())\r\n                .listener(new JobListener())\r\n                .build();\r\n}\r\n\r\n@Bean\r\npublic Step testStep() throws IOException {\r\n\treturn stepBuilderFactory.get(&quot;testStep&quot;)\r\n                .&lt;File, File&gt;chunk(1)\r\n                .reader(testReader())\r\n                .processor(testProcessor())\r\n                .writer(testWriter())\r\n                .taskExecutor(threadPoolTaskExecutor())\r\n                .build();\r\n}\r\n\r\n@Bean\r\npublic ItemReader&lt;File&gt; testReader() throws IOException {\r\n\tList&lt;File&gt; files = Files.walk(Paths.get(inputFile), 1)\r\n                    .filter(Files::isRegularFile)\r\n                    .map(Path::toFile)\r\n                    .collect(Collectors.toList());\r\n\r\n        return new IteratorItemReader&lt;&gt;(files);\r\n}\r\n\r\n@Bean\r\npublic CustomProcessor testProcessor() {\r\n\treturn new CustomProcessor();\r\n}\r\n\r\n@Bean\r\npublic CustomWriter testWriter() {\r\n\treturn new CustomWriter();\r\n}\r\n@Bean\r\npublic ThreadPoolTaskExecutor threadPoolTaskExecutor() {\r\n\tThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n\texecutor.setCorePoolSize(4);\r\n\texecutor.setMaxPoolSize(6);\r\n\texecutor.setQueueCapacity(4);\r\n\texecutor.initialize();\r\n\treturn executor;\r\n}\r\n```\r\n\r\nHere testReader() will check the given input path and list all the files into a List then it returns IteratorItemReader, and then in processor business logic is happening.\r\n\r\nwith multithreading  If there are multiple files (more than one) in the input location everything is working fine, i&#39;m not getting any error but,\r\n\r\nProblem Statement :   Let&#39;s say there&#39;s only one file in the input location (Ex: C:/User/documents/abc.txt), one thread will process the file completely everything is ok but in the end i&#39;m getting this below exception,\r\n\r\n```\r\nERROR - Encountered an error executing step testStep in job testJob\r\njava.util.NoSuchElementException: null\r\nat java.util.ArrayList$Itr.next(ArrayList.java:864)\r\nat org.springframework.batch.item.support.IteratorItemReader.read  (IteratorItemReader.java:70)\r\nat org.springframework.batch.core.step.item.SimpleChunkProvider.doRead (SimpleChunk Provider.java:99)\r\nat org.springframework.batch.core.step.item.SimpleChunkProvider.read (SimpleChunkProvider.java:180)\r\nat org.springframework.batch.core.step.item.SimpleChunkProvider$1.doInIteration (SimpleChunk Provider.java:126)\r\nat org.springframework.batch.repeat.support.RepeatTemplate.getNextResult (RepeatTemplate.java:375)\r\nat org.springframework.batch.repeat.support.RepeatTemplate.executeInternal (RepeatTemplate.java:215)\r\nat org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)\r\nat org.springframework.batch.core.step.item.SimpleChunk Provider.provide (SimpleChunkProvider.java:118)\r\nat org.springframework.batch.core.step.item. ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:71)\r\nat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction (TaskletStep.java:407)\r\nat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)\r\nat org.springframework.transaction.support. Transaction Template.execute(Transaction Template.java:140)\r\nat org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext (TaskletStep.java:273)\r\nat org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration (StepContextRepeatCallback.java:82)\r\nat org.springframework.batch.repeat.support.TaskExecutorRepeatTemplate$ExecutingRunnable.run (TaskExecutorRepeatTemplate.java:262)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\nat java.lang.Thread.run(Thread.java:750)\r\n```\r\n\r\nThis Exception is happening because of multithreading only, when i tried to look into the **IteratorItemReader** class line number **70** i&#39;ve found this below code,\r\n\r\n```\r\nif (iterator.hasNext())\r\n\treturn iterator.next();\r\nelse\r\n\treturn null; // end of data\r\n```\r\n\r\nWhat will be the best solution to over come this issue please provide your inputs on this, \r\n\r\nThanks in advance.\r\n\r\nany suggestions would be helpful.","title":"Spring batch multithreading problem with Iterator Item Reader","body":"<p>I'm new to spring batch and still learning, I have batch configuration with IteratorItemReader , Custom Processor and Custom Writer as below,</p>\n<pre><code>@Autowired\nJobBuilderFactory jobBuilderFactory;\n@Autowired\nStepBuilderFactory stepBuilderFactory;\n@Value(&quot;${inputFile.location}&quot;)\nprivate String inputFile;\n\n@Bean\npublic Job testJob() throws IOException {\n    return jobBuilderFactory.get(&quot;testJob&quot;)\n                .incrementer(new RunIdIncrementer())\n                .start(testStep())\n                .listener(new JobListener())\n                .build();\n}\n\n@Bean\npublic Step testStep() throws IOException {\n    return stepBuilderFactory.get(&quot;testStep&quot;)\n                .&lt;File, File&gt;chunk(1)\n                .reader(testReader())\n                .processor(testProcessor())\n                .writer(testWriter())\n                .taskExecutor(threadPoolTaskExecutor())\n                .build();\n}\n\n@Bean\npublic ItemReader&lt;File&gt; testReader() throws IOException {\n    List&lt;File&gt; files = Files.walk(Paths.get(inputFile), 1)\n                    .filter(Files::isRegularFile)\n                    .map(Path::toFile)\n                    .collect(Collectors.toList());\n\n        return new IteratorItemReader&lt;&gt;(files);\n}\n\n@Bean\npublic CustomProcessor testProcessor() {\n    return new CustomProcessor();\n}\n\n@Bean\npublic CustomWriter testWriter() {\n    return new CustomWriter();\n}\n@Bean\npublic ThreadPoolTaskExecutor threadPoolTaskExecutor() {\n    ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n    executor.setCorePoolSize(4);\n    executor.setMaxPoolSize(6);\n    executor.setQueueCapacity(4);\n    executor.initialize();\n    return executor;\n}\n</code></pre>\n<p>Here testReader() will check the given input path and list all the files into a List then it returns IteratorItemReader, and then in processor business logic is happening.</p>\n<p>with multithreading  If there are multiple files (more than one) in the input location everything is working fine, i'm not getting any error but,</p>\n<p>Problem Statement :   Let's say there's only one file in the input location (Ex: C:/User/documents/abc.txt), one thread will process the file completely everything is ok but in the end i'm getting this below exception,</p>\n<pre><code>ERROR - Encountered an error executing step testStep in job testJob\njava.util.NoSuchElementException: null\nat java.util.ArrayList$Itr.next(ArrayList.java:864)\nat org.springframework.batch.item.support.IteratorItemReader.read  (IteratorItemReader.java:70)\nat org.springframework.batch.core.step.item.SimpleChunkProvider.doRead (SimpleChunk Provider.java:99)\nat org.springframework.batch.core.step.item.SimpleChunkProvider.read (SimpleChunkProvider.java:180)\nat org.springframework.batch.core.step.item.SimpleChunkProvider$1.doInIteration (SimpleChunk Provider.java:126)\nat org.springframework.batch.repeat.support.RepeatTemplate.getNextResult (RepeatTemplate.java:375)\nat org.springframework.batch.repeat.support.RepeatTemplate.executeInternal (RepeatTemplate.java:215)\nat org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)\nat org.springframework.batch.core.step.item.SimpleChunk Provider.provide (SimpleChunkProvider.java:118)\nat org.springframework.batch.core.step.item. ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:71)\nat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction (TaskletStep.java:407)\nat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)\nat org.springframework.transaction.support. Transaction Template.execute(Transaction Template.java:140)\nat org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext (TaskletStep.java:273)\nat org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration (StepContextRepeatCallback.java:82)\nat org.springframework.batch.repeat.support.TaskExecutorRepeatTemplate$ExecutingRunnable.run (TaskExecutorRepeatTemplate.java:262)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:750)\n</code></pre>\n<p>This Exception is happening because of multithreading only, when i tried to look into the <strong>IteratorItemReader</strong> class line number <strong>70</strong> i've found this below code,</p>\n<pre><code>if (iterator.hasNext())\n    return iterator.next();\nelse\n    return null; // end of data\n</code></pre>\n<p>What will be the best solution to over come this issue please provide your inputs on this,</p>\n<p>Thanks in advance.</p>\n<p>any suggestions would be helpful.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"comment_count":0,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1296164806,"creation_date":1296164806,"answer_id":4822268,"question_id":4822256,"body_markdown":"    String[] subset = Arrays.copyOfRange(originalArray, 1, originalArray.length);\r\n\r\n**See Also:**\r\n\r\n- [java.util.Arrays][1]\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html","title":"Java: is there an easy way to select a subset of an array?","body":"<pre><code>String[] subset = Arrays.copyOfRange(originalArray, 1, originalArray.length);\n</code></pre>\n\n<p><strong>See Also:</strong></p>\n\n<ul>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html\" rel=\"noreferrer\">java.util.Arrays</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":14,"creation_date":1296164943,"post_id":4822280,"comment_id":5348575,"body_markdown":"The end index is exclusive","body":"The end index is exclusive"},{"owner":{"account_id":146405,"reputation":62788,"user_id":356849,"accept_rate":88,"display_name":"NullVoxPopuli"},"score":0,"creation_date":1296167161,"post_id":4822280,"comment_id":5349048,"body_markdown":"Wait, so does that mean I need a +1 to the .length?","body":"Wait, so does that mean I need a +1 to the .length?"},{"owner":{"account_id":48192,"reputation":10791,"user_id":143069,"display_name":"ILMTitan"},"score":4,"creation_date":1296167318,"post_id":4822280,"comment_id":5349088,"body_markdown":"No, because arrays are 0 based. Half open ranges and 0 based indexing work together nicely like that.","body":"No, because arrays are 0 based. Half open ranges and 0 based indexing work together nicely like that."},{"owner":{"account_id":1342007,"reputation":807,"user_id":1283512,"accept_rate":25,"display_name":"matthaeus"},"score":4,"creation_date":1584020415,"post_id":4822280,"comment_id":107312344,"body_markdown":"Sorry java-folks, but, coming from python code this looks just absurd","body":"Sorry java-folks, but, coming from python code this looks just absurd"}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":4,"down_vote_count":0,"up_vote_count":136,"is_accepted":true,"score":136,"last_activity_date":1693547112,"creation_date":1296164846,"answer_id":4822280,"question_id":4822256,"body_markdown":"Use [`copyOfRange`][1], available since Java 1.6:\r\n\r\n    Arrays.copyOfRange(array, 1, array.length);\r\n\r\nAlternatives include:\r\n\r\n- [`ArrayUtils.subarray(array, 1, array.length)`](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#subarray-T:A-int-int-) from Apache [commons-lang][2]\r\n- [`System.arraycopy(...)`][3] - rather unfriendly with the long param list.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\r\n  [2]: http://commons.apache.org/lang/\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#arraycopy(java.lang.Object,int,java.lang.Object,int,int)","title":"Java: is there an easy way to select a subset of an array?","body":"<p>Use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\" rel=\"nofollow noreferrer\"><code>copyOfRange</code></a>, available since Java 1.6:</p>\n<pre><code>Arrays.copyOfRange(array, 1, array.length);\n</code></pre>\n<p>Alternatives include:</p>\n<ul>\n<li><a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#subarray-T:A-int-int-\" rel=\"nofollow noreferrer\"><code>ArrayUtils.subarray(array, 1, array.length)</code></a> from Apache <a href=\"http://commons.apache.org/lang/\" rel=\"nofollow noreferrer\">commons-lang</a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#arraycopy(java.lang.Object,int,java.lang.Object,int,int)\" rel=\"nofollow noreferrer\"><code>System.arraycopy(...)</code></a> - rather unfriendly with the long param list.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"score":0,"creation_date":1524590253,"post_id":45296832,"comment_id":87031372,"body_markdown":"@AndreaBergonzo unfortunately, they provided methods for `String[]`, `int[]`, `long[]`, `double[]` but not for `byte[]` :)","body":"@AndreaBergonzo unfortunately, they provided methods for <code>String[]</code>, <code>int[]</code>, <code>long[]</code>, <code>double[]</code> but not for <code>byte[]</code> :)"}],"tags":[],"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1576394306,"creation_date":1500968310,"answer_id":45296832,"question_id":4822256,"body_markdown":"Stream API could be used too:\r\n\r\n    String[] array = {&quot;A&quot;, &quot;B&quot;};\r\n        \r\n    Arrays.stream(array).skip(1).toArray(String[]::new);\r\n\r\nHowever, the answer from Bozho should be preferred.","title":"Java: is there an easy way to select a subset of an array?","body":"<p>Stream API could be used too:</p>\n\n<pre><code>String[] array = {\"A\", \"B\"};\n\nArrays.stream(array).skip(1).toArray(String[]::new);\n</code></pre>\n\n<p>However, the answer from Bozho should be preferred.</p>\n"}],"owner":{"account_id":146405,"reputation":62788,"user_id":356849,"accept_rate":88,"display_name":"NullVoxPopuli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103360,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"accepted_answer_id":4822280,"answer_count":3,"score":77,"last_activity_date":1693547112,"creation_date":1296164717,"question_id":4822256,"body_markdown":"I have a `String[]` that has at least 2 elements.\r\n\r\nI want to create a new `String[]` that has elements 1 through the rest of them. So.. basically, just skipping the first one.\r\n\r\nCan this be done in one line? easily?","title":"Java: is there an easy way to select a subset of an array?","body":"<p>I have a <code>String[]</code> that has at least 2 elements.</p>\n\n<p>I want to create a new <code>String[]</code> that has elements 1 through the rest of them. So.. basically, just skipping the first one.</p>\n\n<p>Can this be done in one line? easily?</p>\n"},{"tags":["java","encoding","xom"],"comments":[{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1693382656,"post_id":77006003,"comment_id":135751707,"body_markdown":"The console may be badly configured, so when  it receives the bytes misinterpret them. Change the console encoding to the correct value.","body":"The console may be badly configured, so when  it receives the bytes misinterpret them. Change the console encoding to the correct value."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1693383131,"post_id":77006003,"comment_id":135751805,"body_markdown":"&quot;I tried many different things with different encodings&quot; please show these things.","body":"&quot;I tried many different things with different encodings&quot; please show these things."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1693383980,"post_id":77006003,"comment_id":135751985,"body_markdown":"Why do you care? The String encoding of binary data isn&#39;t useful, and neither is streaming serializations to `System.out`. Print out the actual bytes. You will find they are exactly the same and that you have nothing to worry about.","body":"Why do you care? The String encoding of binary data isn&#39;t useful, and neither is streaming serializations to <code>System.out</code>. Print out the actual bytes. You will find they are exactly the same and that you have nothing to worry about."},{"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"score":0,"creation_date":1693385462,"post_id":77006003,"comment_id":135752313,"body_markdown":"The problem is actually that I am sending this xml to another service which is saying invalid UTF-8. I thought if I can just get the output of the correct stream to System.out somehow it should work. And the System.out only shows the correct string if I use UTF-8, so I think it is the correct encoding.","body":"The problem is actually that I am sending this xml to another service which is saying invalid UTF-8. I thought if I can just get the output of the correct stream to System.out somehow it should work. And the System.out only shows the correct string if I use UTF-8, so I think it is the correct encoding."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1693385971,"post_id":77006003,"comment_id":135752431,"body_markdown":"What `Serializer` class are you using? And how are you sending the data to the server? If that involves `String` or `Writer`, don&#39;t. Send the bytes.","body":"What <code>Serializer</code> class are you using? And how are you sending the data to the server? If that involves <code>String</code> or <code>Writer</code>, don&#39;t. Send the bytes."},{"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"score":0,"creation_date":1693386214,"post_id":77006003,"comment_id":135752472,"body_markdown":"I am using the nu.xom.Serializer. I could solve the console problem by setting the encoding of the console to UTF-8. I still have to figure out why my other service is throwing an error, thought that would be related, but this question is solved.","body":"I am using the nu.xom.Serializer. I could solve the console problem by setting the encoding of the console to UTF-8. I still have to figure out why my other service is throwing an error, thought that would be related, but this question is solved."},{"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"score":0,"creation_date":1693386298,"post_id":77006003,"comment_id":135752492,"body_markdown":"Ah sending the bytes is a good call, I will try that thanks.","body":"Ah sending the bytes is a good call, I will try that thanks."},{"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"score":0,"creation_date":1693386415,"post_id":77006003,"comment_id":135752517,"body_markdown":"Yeah, sending the bytes and not a string also solved my other problem, thank you!","body":"Yeah, sending the bytes and not a string also solved my other problem, thank you!"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1693547004,"post_id":77006003,"comment_id":135778001,"body_markdown":"@MichaelLamprecht FYI, I edited your question to remove the solution to your problem, which you have posted as an answer. Please don&#39;t edit your question to do that. It is simply not how things are done here, and it is confusing to readers.","body":"@MichaelLamprecht FYI, I edited your question to remove the solution to your problem, which you have posted as an answer. Please don&#39;t edit your question to do that. It is simply not how things are done here, and it is confusing to readers."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1693385157,"post_id":77006264,"comment_id":135752233,"body_markdown":"`ByteArrayOutputStream` doesn&#39;t &#39;handle character encoding&#39; *at all.* It doesn&#39;t have to.","body":"<code>ByteArrayOutputStream</code> doesn&#39;t &#39;handle character encoding&#39; <i>at all.</i> It doesn&#39;t have to."}],"tags":[],"owner":{"account_id":11624596,"reputation":1170,"user_id":8514772,"display_name":"Pradipta Sarma"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693384551,"creation_date":1693384551,"answer_id":77006264,"question_id":77006003,"body_markdown":"You get the right output with `serializer2` maybe because the console probably uses the default encoding of your system (mostlikely UTF8, which can display the special characters correctly).\r\n\r\nWith `serializer` you&#39;re using ByteArrayOutputStream, which may not inherently handle character encoding like Console does. You can try explicitly providing the encoding while converting the ByteArrayOutputStream to a string. Something like `new String(stream.toByteArray(), StandardCharsets.UTF_8)`.","title":"Why is the output different when serializing to different streams? (Java)","body":"<p>You get the right output with <code>serializer2</code> maybe because the console probably uses the default encoding of your system (mostlikely UTF8, which can display the special characters correctly).</p>\n<p>With <code>serializer</code> you're using ByteArrayOutputStream, which may not inherently handle character encoding like Console does. You can try explicitly providing the encoding while converting the ByteArrayOutputStream to a string. Something like <code>new String(stream.toByteArray(), StandardCharsets.UTF_8)</code>.</p>\n"},{"tags":[],"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693402134,"creation_date":1693402134,"answer_id":77008506,"question_id":77006003,"body_markdown":"Putting the line `System.setOut(new PrintStream(System.out, true, StandardCharsets.UTF_8));` above the console output solved the problem, now the console is always showing the correct string.","title":"Why is the output different when serializing to different streams? (Java)","body":"<p>Putting the line <code>System.setOut(new PrintStream(System.out, true, StandardCharsets.UTF_8));</code> above the console output solved the problem, now the console is always showing the correct string.</p>\n"}],"owner":{"account_id":29327648,"reputation":1,"user_id":22469782,"display_name":"Michael Lamprecht"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77008506,"answer_count":2,"score":-1,"last_activity_date":1693547081,"creation_date":1693382413,"question_id":77006003,"body_markdown":"I have a problem with an xml that contains special characters (the problematic string is **l&#246;&#246;&#246;schee\\`\\*‘‘&#167;a**). The xml comes as an XOM Object in Java.\r\nWhile investigating the problem I tried to print out the text of the xml with a serializer.\r\nI noticed that streaming directly to System.out was the only way to get the correct string.\r\n\r\nHere is the code I used for printing out the xml:\r\n\r\n```\r\nElement pEntry; //this is the XOM object I get, it contains the xml\r\nDocument document = pEntry.getDocument();\r\nByteArrayOutputStream stream = new ByteArrayOutputStream();\r\nSerializer serializer = new Serializer(stream);\r\nSerializer serializer2 = new Serializer(System.out);\r\ntry {\r\n    serializer.write(document);\r\n    serializer2.write(document);\r\n} catch (IOException e) {\r\n    System.out.println(e.getMessage());\r\n}\r\nSystem.out.println(&quot;#####################################################################&quot;);\r\nSystem.out.println(stream);\r\n```\r\n\r\nSo serializer2 writes directly to System.out, there the string is as it should be.\r\nThe System.out.println prints the string as **l??????schee\\`\\*????????a**. I tried many different things with different encodings (the standard encoding for the serializer is &quot;UTF-8&quot; which seems correct), but the only way I found, that prints out the correct string is directly streaming to System.out.&lt;br&gt;\r\nI also printed the bytes of the first stream, that does not work and this was the output:&lt;br&gt;\r\n6c ffffffc3 ffffffb6 ffffffc3 ffffffb6 ffffffc3 ffffffb6 73 63 68 65 65 60 2a ffffffe2 ffffff80 ffffff98 ffffffe2 ffffff80 ffffff98 ffffffc2 ffffffa7 61.&lt;br&gt;\r\nI don&#39;t really know if this is correct and I can&#39;t print out the bytes that are streaming directly to System.out. I saw that c3 b6 for example should be an &#246;, which would be correct, but I don&#39;t know about the ffffffs.&lt;br&gt;\r\nWhy are they different, even if they use the same encoding?\r\n\r\nOther things I tried:\r\n - adding -J-Dfile.encoding=UTF-8 to the javac command -&gt; didn&#39;t make a difference\r\n - initializing the serializers with different encodings (UTF-8, UTF-16, US-ASII) -&gt; the only thing that worked correct for serializer2 was UTF-8 so I assume this is the correct encoding\r\n - Instead of `System.out.println(stream)` putting\r\n   ```\r\n   String xmlContent = stream.toString(StandardCharsets.UTF_8);\r\n   System.out.println(xmlContent);\r\n   ```\r\n   -&gt; this was at least an improvement I think, the string then looked like **l???schee\\`\\*?????a**\r\n\r\n","title":"Why is the output different when serializing to different streams? (Java)","body":"<p>I have a problem with an xml that contains special characters (the problematic string is <strong>löööschee`*‘‘§a</strong>). The xml comes as an XOM Object in Java.\nWhile investigating the problem I tried to print out the text of the xml with a serializer.\nI noticed that streaming directly to System.out was the only way to get the correct string.</p>\n<p>Here is the code I used for printing out the xml:</p>\n<pre><code>Element pEntry; //this is the XOM object I get, it contains the xml\nDocument document = pEntry.getDocument();\nByteArrayOutputStream stream = new ByteArrayOutputStream();\nSerializer serializer = new Serializer(stream);\nSerializer serializer2 = new Serializer(System.out);\ntry {\n    serializer.write(document);\n    serializer2.write(document);\n} catch (IOException e) {\n    System.out.println(e.getMessage());\n}\nSystem.out.println(&quot;#####################################################################&quot;);\nSystem.out.println(stream);\n</code></pre>\n<p>So serializer2 writes directly to System.out, there the string is as it should be.\nThe System.out.println prints the string as <strong>l??????schee`*????????a</strong>. I tried many different things with different encodings (the standard encoding for the serializer is &quot;UTF-8&quot; which seems correct), but the only way I found, that prints out the correct string is directly streaming to System.out.<br>\nI also printed the bytes of the first stream, that does not work and this was the output:<br>\n6c ffffffc3 ffffffb6 ffffffc3 ffffffb6 ffffffc3 ffffffb6 73 63 68 65 65 60 2a ffffffe2 ffffff80 ffffff98 ffffffe2 ffffff80 ffffff98 ffffffc2 ffffffa7 61.<br>\nI don't really know if this is correct and I can't print out the bytes that are streaming directly to System.out. I saw that c3 b6 for example should be an ö, which would be correct, but I don't know about the ffffffs.<br>\nWhy are they different, even if they use the same encoding?</p>\n<p>Other things I tried:</p>\n<ul>\n<li>adding -J-Dfile.encoding=UTF-8 to the javac command -&gt; didn't make a difference</li>\n<li>initializing the serializers with different encodings (UTF-8, UTF-16, US-ASII) -&gt; the only thing that worked correct for serializer2 was UTF-8 so I assume this is the correct encoding</li>\n<li>Instead of <code>System.out.println(stream)</code> putting\n<pre><code>String xmlContent = stream.toString(StandardCharsets.UTF_8);\nSystem.out.println(xmlContent);\n</code></pre>\n-&gt; this was at least an improvement I think, the string then looked like <strong>l???schee`*?????a</strong></li>\n</ul>\n"},{"tags":["java","arrays"],"answers":[{"comments":[{"owner":{"account_id":1249289,"reputation":3789,"user_id":1422630,"accept_rate":55,"display_name":"Aquarius Power"},"score":0,"creation_date":1479344515,"post_id":11001759,"comment_id":68521987,"body_markdown":"there seems to be a size limit? only this works: `Arrays.copyOfRange(Thread.currentThread().getStackTrace(),1,255)` as instead of 255 I cannot use Integer.MAX_VALUE, in case I dont want to get the real length","body":"there seems to be a size limit? only this works: <code>Arrays.copyOfRange(Thread.currentThread().getStackTrace(),1,&zwnj;&#8203;255)</code> as instead of 255 I cannot use Integer.MAX_VALUE, in case I dont want to get the real length"},{"owner":{"account_id":153578,"reputation":15120,"user_id":368926,"accept_rate":63,"display_name":"elias"},"score":0,"creation_date":1479381524,"post_id":11001759,"comment_id":68538161,"body_markdown":"@AquariusPower the size limit is the array size, and it can be bigger than 255. You just cannot provide an `endIndex` bigger than the size of the array passed as the first argument. So, if you want a full copy, create a variable referring to this array and use `Arrays.copyOfRange(var, 0, var.length)` or `Arrays.copyOf(var, var.length)`","body":"@AquariusPower the size limit is the array size, and it can be bigger than 255. You just cannot provide an <code>endIndex</code> bigger than the size of the array passed as the first argument. So, if you want a full copy, create a variable referring to this array and use <code>Arrays.copyOfRange(var, 0, var.length)</code> or <code>Arrays.copyOf(var, var.length)</code>"},{"owner":{"account_id":1249289,"reputation":3789,"user_id":1422630,"accept_rate":55,"display_name":"Aquarius Power"},"score":0,"creation_date":1479413712,"post_id":11001759,"comment_id":68559547,"body_markdown":"I would have to create a local var for the stacktrace sub-array, but I found that this works!!! `Arrays.copyOfRange(Thread.currentThread().getStackTrace(),1,Short.MAX_VALUE)`","body":"I would have to create a local var for the stacktrace sub-array, but I found that this works!!! <code>Arrays.copyOfRange(Thread.currentThread().getStackTrace(),1,&zwnj;&#8203;Short.MAX_VALUE)</code>"},{"owner":{"account_id":153578,"reputation":15120,"user_id":368926,"accept_rate":63,"display_name":"elias"},"score":0,"creation_date":1479475782,"post_id":11001759,"comment_id":68586378,"body_markdown":"Be careful about `ArrayIndexOutOfBoundsException`.","body":"Be careful about <code>ArrayIndexOutOfBoundsException</code>."},{"owner":{"account_id":431395,"reputation":8238,"user_id":815408,"accept_rate":74,"display_name":"LookIntoEast"},"score":0,"creation_date":1502048262,"post_id":11001759,"comment_id":78031768,"body_markdown":"What will happen if startIndex == endIndex, say Arrays.copyofRange(arr, 0, 0) ?","body":"What will happen if startIndex == endIndex, say Arrays.copyofRange(arr, 0, 0) ?"},{"owner":{"account_id":153578,"reputation":15120,"user_id":368926,"accept_rate":63,"display_name":"elias"},"score":0,"creation_date":1502129068,"post_id":11001759,"comment_id":78066018,"body_markdown":"If `startIndex == endIndex`, a zero length array will be returned.","body":"If <code>startIndex == endIndex</code>, a zero length array will be returned."},{"owner":{"account_id":3698221,"reputation":179,"user_id":6784380,"display_name":"Vishnu Dahatonde"},"score":1,"creation_date":1507630833,"post_id":11001759,"comment_id":80276683,"body_markdown":"there is another problem. What if I need to split the string array of length say 500K into the subarrays of 250K. These method accepts interegr which max out at 65000.","body":"there is another problem. What if I need to split the string array of length say 500K into the subarrays of 250K. These method accepts interegr which max out at 65000."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1543182059,"post_id":11001759,"comment_id":93815115,"body_markdown":"Integer in Java is max 2^31-1, not 2^16.","body":"Integer in Java is max 2^31-1, not 2^16."},{"owner":{"account_id":14682196,"reputation":464,"user_id":10603313,"display_name":"Sakhawat Hossain"},"score":1,"creation_date":1587370983,"post_id":11001759,"comment_id":108474710,"body_markdown":"@elias , just the answer I was looking for. Thanks.","body":"@elias , just the answer I was looking for. Thanks."}],"tags":[],"owner":{"account_id":153578,"reputation":15120,"user_id":368926,"accept_rate":63,"display_name":"elias"},"comment_count":9,"down_vote_count":0,"up_vote_count":594,"is_accepted":true,"score":594,"last_activity_date":1693546787,"creation_date":1339522184,"answer_id":11001759,"question_id":11001720,"body_markdown":"The length of an array in Java is immutable. So, you need to copy the desired part into a new array.  \r\n\r\nUse [`copyOfRange`][1] method from [`java.util.Arrays`][2] class:\r\n\r\n    int[] newArray = Arrays.copyOfRange(oldArray, startIndex, endIndex);\r\n\r\n&gt; **startIndex** is the initial index of the range to be copied, inclusive.&lt;br&gt;\r\n**endIndex** is the final index of the range to be copied, exclusive. (This index may lie outside the array)\r\n\r\nE.g.:\r\n  \r\n       //index   0   1   2   3   4\r\n    int[] arr = {10, 20, 30, 40, 50};\r\n    Arrays.copyOfRange(arr, 0, 2);          // returns {10, 20}\r\n    Arrays.copyOfRange(arr, 1, 4);          // returns {20, 30, 40}\r\n    Arrays.copyOfRange(arr, 2, arr.length); // returns {30, 40, 50} (length = 5)\r\n\r\n\r\n    \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html","title":"Get only part of an Array in Java?","body":"<p>The length of an array in Java is immutable. So, you need to copy the desired part into a new array.</p>\n<p>Use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\" rel=\"nofollow noreferrer\"><code>copyOfRange</code></a> method from <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Arrays.html\" rel=\"nofollow noreferrer\"><code>java.util.Arrays</code></a> class:</p>\n<pre><code>int[] newArray = Arrays.copyOfRange(oldArray, startIndex, endIndex);\n</code></pre>\n<blockquote>\n<p><strong>startIndex</strong> is the initial index of the range to be copied, inclusive.<br>\n<strong>endIndex</strong> is the final index of the range to be copied, exclusive. (This index may lie outside the array)</p>\n</blockquote>\n<p>E.g.:</p>\n<pre><code>   //index   0   1   2   3   4\nint[] arr = {10, 20, 30, 40, 50};\nArrays.copyOfRange(arr, 0, 2);          // returns {10, 20}\nArrays.copyOfRange(arr, 1, 4);          // returns {20, 30, 40}\nArrays.copyOfRange(arr, 2, arr.length); // returns {30, 40, 50} (length = 5)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1339523339,"post_id":11001763,"comment_id":14376569,"body_markdown":"That said, if you don&#39;t want to make an explicit copy, you&#39;ll need to use a `List` and a `subList` as outlined in @K-ballo&#39;s answer.","body":"That said, if you don&#39;t want to make an explicit copy, you&#39;ll need to use a <code>List</code> and a <code>subList</code> as outlined in @K-ballo&#39;s answer."},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":0,"creation_date":1339523425,"post_id":11001763,"comment_id":14376598,"body_markdown":"That&#39;s right. Java doesn&#39;t have the array slicing facilities that more modern languages offer.","body":"That&#39;s right. Java doesn&#39;t have the array slicing facilities that more modern languages offer."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1339523509,"post_id":11001763,"comment_id":14376638,"body_markdown":"I&#39;m not sure if I&#39;d put it that way, but...yes, Java doesn&#39;t offer array slicing.  (That said, there are some advantages to this approach: reduced possibilities for memory leaks, reduced array overhead by avoiding the extra fields, etc.  You could go either way.)","body":"I&#39;m not sure if I&#39;d put it that way, but...yes, Java doesn&#39;t offer array slicing.  (That said, there are some advantages to this approach: reduced possibilities for memory leaks, reduced array overhead by avoiding the extra fields, etc.  You could go either way.)"},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":0,"creation_date":1339524181,"post_id":11001763,"comment_id":14376921,"body_markdown":"Yes, you&#39;re right again (and I didn&#39;t try to start a flame war ;) ). Slicing makes GC very complex. And when Java did try object based implicit slicing in Strings [it made it more evident that this was dangerous](http://stackoverflow.com/questions/10951812/java-not-garbage-collecting-memory/10951867#10951867).","body":"Yes, you&#39;re right again (and I didn&#39;t try to start a flame war ;) ). Slicing makes GC very complex. And when Java did try object based implicit slicing in Strings <a href=\"http://stackoverflow.com/questions/10951812/java-not-garbage-collecting-memory/10951867#10951867\">it made it more evident that this was dangerous</a>."}],"tags":[],"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"comment_count":4,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1339523495,"creation_date":1339522197,"answer_id":11001763,"question_id":11001720,"body_markdown":"Yes, you can use [Arrays.copyOfRange](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)\r\n\r\nIt does about the same thing (note there is a copy : you don&#39;t change the initial array).","title":"Get only part of an Array in Java?","body":"<p>Yes, you can use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html\" rel=\"noreferrer\">Arrays.copyOfRange</a></p>\n\n<p>It does about the same thing (note there is a copy : you don't change the initial array).</p>\n"},{"tags":[],"owner":{"account_id":38160,"reputation":54668,"user_id":109360,"accept_rate":98,"display_name":"dcp"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1517610949,"creation_date":1339522199,"answer_id":11001765,"question_id":11001720,"body_markdown":"Check out [copyOfRange](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean\\[\\],%20int,%20int%29); and example:\r\n\r\n    int[] arr2 = Arrays.copyOfRange(arr,0,3);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean%5B%5D,%20int,%20int%29","title":"Get only part of an Array in Java?","body":"<p>Check out <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean[],%20int,%20int%29\" rel=\"nofollow noreferrer\">copyOfRange</a>; and example:</p>\n\n<pre><code>int[] arr2 = Arrays.copyOfRange(arr,0,3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":888101,"reputation":80674,"user_id":927034,"accept_rate":100,"display_name":"K-ballo"},"comment_count":0,"down_vote_count":1,"up_vote_count":41,"is_accepted":false,"score":40,"last_activity_date":1339523344,"creation_date":1339522211,"answer_id":11001772,"question_id":11001720,"body_markdown":"You could wrap your array as a list, and request a sublist of it.\r\n\r\n    MyClass[] array = ...;\r\n    List&lt;MyClass&gt; subArray = Arrays.asList(array).subList(index, array.length);","title":"Get only part of an Array in Java?","body":"<p>You could wrap your array as a list, and request a sublist of it.</p>\n\n<pre><code>MyClass[] array = ...;\nList&lt;MyClass&gt; subArray = Arrays.asList(array).subList(index, array.length);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":35717,"reputation":131899,"user_id":101258,"accept_rate":100,"display_name":"Justin Ethier"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1339523066,"creation_date":1339522329,"answer_id":11001798,"question_id":11001720,"body_markdown":"If you are using Java 1.6 or greater, you can use [`Arrays.copyOfRange`][1] to copy a portion of the array. From the javadoc:\r\n\r\n&gt; Copies the specified range of the specified array into a new array. The initial index of the range (from) must lie between zero and `original.length`, inclusive. The value at `original[from]` is placed into the initial element of the copy (unless `from == original.length` or `from == to`). Values from subsequent elements in the original array are placed into subsequent elements in the copy. The final index of the range (`to`), which must be greater than or equal to `from`, may be greater than `original.length`, in which case `false` is placed in all elements of the copy whose index is greater than or equal to `original.length - from`. The length of the returned array will be `to - from`.\r\n\r\nHere is a [simple example][2]:\r\n\r\n    /**\r\n     * @Program that Copies the specified range of the specified array into a new \r\n     * array.\r\n     * CopyofRange8Array.java \r\n     * Author:-RoseIndia Team\r\n     * Date:-15-May-2008\r\n     */\r\n    import java.util.*;\r\n    public class CopyofRange8Array {\r\n        public static void main(String[] args) {\r\n           //creating a short array\r\n           Object T[]={&quot;Rose&quot;,&quot;India&quot;,&quot;Net&quot;,&quot;Limited&quot;,&quot;Rohini&quot;};\r\n            // //Copies the specified  short array upto specified range,\r\n            Object T1[] = Arrays.copyOfRange(T, 1,5);\r\n            for (int i = 0; i &lt; T1.length; i++) \r\n                //Displaying the Copied short array upto specified range\r\n                System.out.println(T1[i]);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean%5B%5D,%20int,%20int%29\r\n  [2]: http://www.codingdiary.com/developers/developers/diary/javaapi/java/util/SampleCode/CopyofRange8ArrayExampleCode.html","title":"Get only part of an Array in Java?","body":"<p>If you are using Java 1.6 or greater, you can use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28boolean%5B%5D,%20int,%20int%29\"><code>Arrays.copyOfRange</code></a> to copy a portion of the array. From the javadoc:</p>\n\n<blockquote>\n  <p>Copies the specified range of the specified array into a new array. The initial index of the range (from) must lie between zero and <code>original.length</code>, inclusive. The value at <code>original[from]</code> is placed into the initial element of the copy (unless <code>from == original.length</code> or <code>from == to</code>). Values from subsequent elements in the original array are placed into subsequent elements in the copy. The final index of the range (<code>to</code>), which must be greater than or equal to <code>from</code>, may be greater than <code>original.length</code>, in which case <code>false</code> is placed in all elements of the copy whose index is greater than or equal to <code>original.length - from</code>. The length of the returned array will be <code>to - from</code>.</p>\n</blockquote>\n\n<p>Here is a <a href=\"http://www.codingdiary.com/developers/developers/diary/javaapi/java/util/SampleCode/CopyofRange8ArrayExampleCode.html\">simple example</a>:</p>\n\n<pre><code>/**\n * @Program that Copies the specified range of the specified array into a new \n * array.\n * CopyofRange8Array.java \n * Author:-RoseIndia Team\n * Date:-15-May-2008\n */\nimport java.util.*;\npublic class CopyofRange8Array {\n    public static void main(String[] args) {\n       //creating a short array\n       Object T[]={\"Rose\",\"India\",\"Net\",\"Limited\",\"Rohini\"};\n        // //Copies the specified  short array upto specified range,\n        Object T1[] = Arrays.copyOfRange(T, 1,5);\n        for (int i = 0; i &lt; T1.length; i++) \n            //Displaying the Copied short array upto specified range\n            System.out.println(T1[i]);\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":352555,"reputation":774,"user_id":689706,"display_name":"Dave"},"score":3,"creation_date":1524490466,"post_id":33879200,"comment_id":86981073,"body_markdown":"I just love how this is exactly how Arrays.copyOf() and Arrays.copyOfRange() are actually implemented (sans bounds checks) and yet it gets no votes whilst the slightly higher overhead utility method wrappers rack up the votes despite System.arraycopy dating back to 1995.","body":"I just love how this is exactly how Arrays.copyOf() and Arrays.copyOfRange() are actually implemented (sans bounds checks) and yet it gets no votes whilst the slightly higher overhead utility method wrappers rack up the votes despite System.arraycopy dating back to 1995."},{"owner":{"account_id":352555,"reputation":774,"user_id":689706,"display_name":"Dave"},"score":2,"creation_date":1524490523,"post_id":33879200,"comment_id":86981117,"body_markdown":"I guess it just doesn&#39;t look &quot;modern&quot; enough for some.","body":"I guess it just doesn&#39;t look &quot;modern&quot; enough for some."},{"owner":{"account_id":1233122,"reputation":3934,"user_id":1197297,"accept_rate":67,"display_name":"StvnBrkdll"},"score":0,"creation_date":1524491757,"post_id":33879200,"comment_id":86982048,"body_markdown":"I like going old school, no shiny bells and whistles just the required machinery. Like memcpy in C","body":"I like going old school, no shiny bells and whistles just the required machinery. Like memcpy in C"},{"owner":{"account_id":3116542,"reputation":1299,"user_id":3450840,"accept_rate":56,"display_name":"Florian F"},"score":3,"creation_date":1582451146,"post_id":33879200,"comment_id":106776057,"body_markdown":"But using arrays.copyOfRange() increases readability and reduces significantly the possibility of bugs.","body":"But using arrays.copyOfRange() increases readability and reduces significantly the possibility of bugs."},{"owner":{"account_id":516070,"reputation":124,"user_id":1382801,"display_name":"mithunc"},"score":0,"creation_date":1698801923,"post_id":33879200,"comment_id":136450841,"body_markdown":"I&#39;ve never understood this reasoning. Arrays.copyOfRange() wouldn&#39;t have been invented if there weren&#39;t a justifiable effect on readability and ease-of-use. Saying something is better because it has existed for longer doesn&#39;t justify anything. Slightly more performant is a better argument, but with the key word &quot;slightly&quot;, the tradeoff is not invalid for those who find it worth it.","body":"I&#39;ve never understood this reasoning. Arrays.copyOfRange() wouldn&#39;t have been invented if there weren&#39;t a justifiable effect on readability and ease-of-use. Saying something is better because it has existed for longer doesn&#39;t justify anything. Slightly more performant is a better argument, but with the key word &quot;slightly&quot;, the tradeoff is not invalid for those who find it worth it."}],"tags":[],"owner":{"account_id":1233122,"reputation":3934,"user_id":1197297,"accept_rate":67,"display_name":"StvnBrkdll"},"comment_count":5,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1448307459,"creation_date":1448307459,"answer_id":33879200,"question_id":11001720,"body_markdown":"You can try: \r\n\r\n    System.arraycopy(sourceArray, 0, targetArray, 0, targetArray.length);// copies whole array\r\n\r\n    // copies elements 1 and 2 from sourceArray to targetArray\r\n    System.arraycopy(sourceArray, 1, targetArray, 0, 2); \r\n\r\nSee [javadoc for System][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/System.html","title":"Get only part of an Array in Java?","body":"<p>You can try: </p>\n\n<pre><code>System.arraycopy(sourceArray, 0, targetArray, 0, targetArray.length);// copies whole array\n\n// copies elements 1 and 2 from sourceArray to targetArray\nSystem.arraycopy(sourceArray, 1, targetArray, 0, 2); \n</code></pre>\n\n<p>See <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html\" rel=\"noreferrer\">javadoc for System</a>.</p>\n"},{"tags":[],"owner":{"account_id":12354613,"reputation":35,"user_id":9011591,"display_name":"A. Ab"},"comment_count":0,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1569168904,"creation_date":1569168904,"answer_id":58051085,"question_id":11001720,"body_markdown":"You can use `subList(int fromIndex, int toIndex)` method on your integers arr, something like this:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            List&lt;Integer&gt; arr = new ArrayList&lt;&gt;();\r\n            arr.add(1);\r\n            arr.add(2);\r\n            arr.add(3);\r\n            arr.add(4);\r\n            List&lt;Integer&gt; partialArr = arr.subList(1, 3);\r\n            \r\n            // print the subArr\r\n            for (Integer i: partialArr)\r\n                System.out.println(i + &quot; &quot;);\r\n        }\r\n    }\r\n\r\nOutput will be: `2 3`.\r\n\r\nNote that `subList(int fromIndex, int toIndex)` method performs minus 1 on the 2nd variable it receives (var2 - 1), i don&#39;t know exactly why, but that&#39;s what happens, maybe to reduce the chance of exceeding the size of the array.\r\n\r\n\r\n","title":"Get only part of an Array in Java?","body":"<p>You can use <code>subList(int fromIndex, int toIndex)</code> method on your integers arr, something like this:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Main {\n    public static void main(String[] args) {\n        List&lt;Integer&gt; arr = new ArrayList&lt;&gt;();\n        arr.add(1);\n        arr.add(2);\n        arr.add(3);\n        arr.add(4);\n        List&lt;Integer&gt; partialArr = arr.subList(1, 3);\n\n        // print the subArr\n        for (Integer i: partialArr)\n            System.out.println(i + \" \");\n    }\n}\n</code></pre>\n\n<p>Output will be: <code>2 3</code>.</p>\n\n<p>Note that <code>subList(int fromIndex, int toIndex)</code> method performs minus 1 on the 2nd variable it receives (var2 - 1), i don't know exactly why, but that's what happens, maybe to reduce the chance of exceeding the size of the array.</p>\n"},{"comments":[{"owner":{"account_id":1674243,"reputation":10078,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1601903668,"post_id":64209302,"comment_id":113542043,"body_markdown":"`returner[x] = array[x+start];` does not copy the array.","body":"<code>returner[x] = array[x+start];</code> does not copy the array."}],"tags":[],"owner":{"account_id":16323110,"reputation":11,"user_id":11788371,"display_name":"Persons123"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601903419,"creation_date":1601903419,"answer_id":64209302,"question_id":11001720,"body_markdown":"```\r\npublic static int[] range(int[] array, int start, int end){\r\n        int returner[] = new int[end-start];\r\n        for(int x = 0; x &lt;= end-start-1; x++){\r\n            returner[x] = array[x+start];\r\n        }\r\n        return returner;\r\n    }\r\n```\r\nthis is a way to do the same thing as Array.copyOfRange but without importing anything","title":"Get only part of an Array in Java?","body":"<pre><code>public static int[] range(int[] array, int start, int end){\n        int returner[] = new int[end-start];\n        for(int x = 0; x &lt;= end-start-1; x++){\n            returner[x] = array[x+start];\n        }\n        return returner;\n    }\n</code></pre>\n<p>this is a way to do the same thing as Array.copyOfRange but without importing anything</p>\n"}],"owner":{"account_id":451722,"reputation":15865,"user_id":847773,"accept_rate":69,"display_name":"Borut Flis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":542839,"favorite_count":0,"down_vote_count":2,"up_vote_count":366,"closed_date":1615639939,"accepted_answer_id":11001759,"answer_count":8,"score":364,"last_activity_date":1693546787,"creation_date":1339522040,"question_id":11001720,"body_markdown":"I have an array of Integers in Java, I would like use only a part of it. I know in Python you can do something like this array[index:] and it returns the array from the index. Is something like this possible in Java.","title":"Get only part of an Array in Java?","body":"<p>I have an array of Integers in Java, I would like use only a part of it. I know in Python you can do something like this array[index:] and it returns the array from the index. Is something like this possible in Java.</p>\n"},{"tags":["java","android","android-gradle-plugin","android-api-31"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693551738,"post_id":77020725,"comment_id":135778697,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27751241,"reputation":1,"user_id":21185644,"display_name":"SAGAR DIXIT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693546702,"creation_date":1693546702,"question_id":77020725,"body_markdown":"Failed to apply plugin class &#39;org.gradle.plugins.ide.idea.IdeaPlugin&#39;.\r\nCannot run Project.afterEvaluate(Action) when the project is already evaluated.\r\n\r\n\r\nI am New to android programming  and i face this error when try to open build view i serach about it but not found the solution \r\nthank you","title":"I face an error when try to open build view","body":"<p>Failed to apply plugin class 'org.gradle.plugins.ide.idea.IdeaPlugin'.\nCannot run Project.afterEvaluate(Action) when the project is already evaluated.</p>\n<p>I am New to android programming  and i face this error when try to open build view i serach about it but not found the solution\nthank you</p>\n"},{"tags":["java","docker","jdbc","mysql-connector","graalvm"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1655966064,"post_id":72723781,"comment_id":128457856,"body_markdown":"The error indicates that the resource file `com/mysql/cj/LocalizedErrorMessages.properties` is missing. I have never used Graal, but https://www.graalvm.org/22.0/reference-manual/native-image/Resources/ mentions _&quot;By default, the native-image tool will not integrate any of the resources which are on the classpath during the generation into the final image. To make calls such as Class.getResource() or Class.getResourceAsStream() (or their corresponding ClassLoader methods) return specific resources (instead of null), you must specify the resources that should be accessible at run time.&quot;_","body":"The error indicates that the resource file <code>com&#47;mysql&#47;cj&#47;LocalizedErrorMessages.properties</code> is missing. I have never used Graal, but <a href=\"https://www.graalvm.org/22.0/reference-manual/native-image/Resources/\" rel=\"nofollow noreferrer\">graalvm.org/22.0/reference-manual/native-image/Resources</a> mentions <i>&quot;By default, the native-image tool will not integrate any of the resources which are on the classpath during the generation into the final image. To make calls such as Class.getResource() or Class.getResourceAsStream() (or their corresponding ClassLoader methods) return specific resources (instead of null), you must specify the resources that should be accessible at run time.&quot;</i>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1655966148,"post_id":72723781,"comment_id":128457889,"body_markdown":"In other words, you will need to identify all resources needed by your application and its dependencies, and specify them to be included. Also read the section title [_&quot;Resource Bundles in Native Image&quot;_](https://www.graalvm.org/22.0/reference-manual/native-image/Resources/#resource-bundles-in-native-image) as that seems to be specifically relevant to your case.","body":"In other words, you will need to identify all resources needed by your application and its dependencies, and specify them to be included. Also read the section title <a href=\"https://www.graalvm.org/22.0/reference-manual/native-image/Resources/#resource-bundles-in-native-image\" rel=\"nofollow noreferrer\"><i>&quot;Resource Bundles in Native Image&quot;</i></a> as that seems to be specifically relevant to your case."},{"owner":{"account_id":94604,"reputation":1021,"user_id":258182,"display_name":"EderBaum"},"score":0,"creation_date":1656002660,"post_id":72723781,"comment_id":128471606,"body_markdown":"Thank you very much Mark. Fixed the current error, but as expected we have a new one. I&#39;ll put the details right away.","body":"Thank you very much Mark. Fixed the current error, but as expected we have a new one. I&#39;ll put the details right away."},{"owner":{"account_id":12527141,"reputation":747,"user_id":9390343,"display_name":"jms"},"score":0,"creation_date":1656390187,"post_id":72723781,"comment_id":128553715,"body_markdown":"I&#39;m not very familiar with GraalVM, but from what I see, you are copying an uber/fat jar into the container which contains all the dependencies. Could it be that the mysql-connecter library included in this fat jar(which your build tool downloaded for your current architecture) is one compatible with `amazoncorretto:18-alpine` and not compatible with `ghcr.io/graalvm/graalvm-ce:latest` ?","body":"I&#39;m not very familiar with GraalVM, but from what I see, you are copying an uber/fat jar into the container which contains all the dependencies. Could it be that the mysql-connecter library included in this fat jar(which your build tool downloaded for your current architecture) is one compatible with <code>amazoncorretto:18-alpine</code> and not compatible with <code>ghcr.io&#47;graalvm&#47;graalvm-ce:latest</code> ?"},{"owner":{"account_id":94604,"reputation":1021,"user_id":258182,"display_name":"EderBaum"},"score":0,"creation_date":1656421508,"post_id":72723781,"comment_id":128564123,"body_markdown":"The command `RUN native-image -jar ./app.jar --verbose --no-fallback` transforms the java code to native. In my example on GitHub I changed the docker file to use a `FROM scratch`  image, where the code that &quot;was java&quot;, now runs without even needing an OS or VM. I tested several versions of `mysql-connector-java`, all are in the maven repository which in principle works on different platforms.","body":"The command <code>RUN native-image -jar .&#47;app.jar --verbose --no-fallback</code> transforms the java code to native. In my example on GitHub I changed the docker file to use a <code>FROM scratch</code>  image, where the code that &quot;was java&quot;, now runs without even needing an OS or VM. I tested several versions of <code>mysql-connector-java</code>, all are in the maven repository which in principle works on different platforms."}],"owner":{"account_id":94604,"reputation":1021,"user_id":258182,"display_name":"EderBaum"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":735,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1693546243,"creation_date":1655950096,"question_id":72723781,"body_markdown":"I&#39;m trying to do a basic SQL query using JDBC and mysql-connector-java on an image with Graalvm (The cause of the problem). \r\n\r\nApparently everyone who tries to use GraalVM with JDBC/MySQL and Docker will have the same problem every time.\r\n\r\nI&#39;m having the following Exception\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n\t   at com.mysql.cj.Constants.&lt;clinit&gt;(Constants.java:49)\r\n\t   at com.mysql.cj.util.Util.&lt;clinit&gt;(Util.java:67)\r\n\t   at com.mysql.cj.conf.ConnectionUrl$Type.getImplementingInstance(ConnectionUrl.java:241)\r\n\t   at com.mysql.cj.conf.ConnectionUrl$Type.getConnectionUrlInstance(ConnectionUrl.java:211)\r\n\t   at com.mysql.cj.conf.ConnectionUrl.getConnectionUrlInstance(ConnectionUrl.java:280)\r\n\t   at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:195)\r\n\t   at java.sql.DriverManager.getConnection(DriverManager.java:681)\r\n\t   at java.sql.DriverManager.getConnection(DriverManager.java:229)\r\n\t   at com.me.test.Main.testJDBC(Main.java:73)\r\n\t   at com.me.test.Main.main(Main.java:94)\r\n    Caused by: java.lang.RuntimeException: Can&#39;t load resource bundle due to underlying     exception java.util.MissingResourceException: Can&#39;t find bundle for base name com.mysql.cj.LocalizedErrorMessages, locale en_US\r\n\t   at com.mysql.cj.Messages.&lt;clinit&gt;(Messages.java:60)\r\n\t... 10 more\r\n    Caused by: java.util.MissingResourceException: Can&#39;t find bundle for base name com.mysql.cj.LocalizedErrorMessages, locale en_US\r\n\t   at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:2045)\r\n\t   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1683)\r\n\t   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1586)\r\n\t   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1549)\r\n\t   at java.util.ResourceBundle.getBundle(ResourceBundle.java:858)\r\n\t   at com.mysql.cj.Messages.&lt;clinit&gt;(Messages.java:58)\r\n\t... 10 more\r\n\r\nMy Dockerfile\r\n\r\n    FROM ghcr.io/graalvm/graalvm-ce:latest\r\n\r\n    RUN gu install native-image\r\n    WORKDIR /tmp/dist\r\n    ADD ./app.jar ./app.jar\r\n\r\n    COPY ./reflect-config.json ./reflect-config.json\r\n\r\n    RUN native-image -jar ./app.jar --verbose --no-fallback\r\n    RUN  microdnf install zip\r\n\r\n    ADD bootstrap bootstrap\r\n\r\n    RUN chmod +x bootstrap\r\n    RUN chmod +x ./app\r\n\r\n    RUN zip -j function.zip bootstrap app\r\n\r\n\r\n    ENTRYPOINT [&quot;./app&quot;]\r\n\r\n\r\n\r\nDependencies in my pom file\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n  &lt;version&gt;8.0.29&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n  &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n  &lt;version&gt;21.5.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAnd finally my java code:\r\n\r\n```java\r\npublic void testJDBC() throws SQLException, IOException {\r\n    String url = &quot;jdbc:mysql://foo.blabla.aws-region.rds.amazonaws.com:3306/database&quot;;\r\n    String user = &quot;root&quot;;\r\n    String password = &quot;password&quot;;\r\n    try(java.sql.Connection conn = java.sql.DriverManager.getConnection(url, user, password)){\r\n        doSomething(conn);\r\n    }\r\n}\r\n```\r\n\r\n**EDIT 1:**\r\n\r\nI followed Mark Rotteveel&#39;s recommendation, and added a *&quot;resource-config.json&quot;* file with the following:\r\n\r\n    {\r\n      &quot;resources&quot;: {\r\n        &quot;includes&quot;: [\r\n          {&quot;pattern&quot;: &quot;com.mysql.cj.LocalizedErrorMessages.properties&quot;}\r\n        ]\r\n      }\r\n    }\r\n\r\nAnd in the *&quot;native-image.properties&quot;* file the following\r\n\r\n    Args = -H:EnableURLProtocols=http,https -H:ReflectionConfigurationFiles=/tmp/dist/reflect-config.json -H:ResourceConfigurationFiles=/tmp/dist/resource-config.json\r\n\r\nFixed the current error, but as expected we have a new one:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ClassCastException: com.mysql.cj.exceptions.CJException cannot be cast to com.mysql.cj.exceptions.WrongArgumentException\r\n\t   at com.mysql.cj.util.Util.getInstance(Util.java:169)\r\n\t   at com.mysql.cj.util.Util.getInstance(Util.java:174)\r\n\t   at com.mysql.cj.conf.ConnectionUrl$Type.getImplementingInstance(ConnectionUrl.java:241)\r\n\t   at com.mysql.cj.conf.ConnectionUrl$Type.getConnectionUrlInstance(ConnectionUrl.java:211)\r\n\t   at com.mysql.cj.conf.ConnectionUrl.getConnectionUrlInstance(ConnectionUrl.java:280)\r\n\t   at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:195)\r\n\t   at java.sql.DriverManager.getConnection(DriverManager.java:681)\r\n\t   at java.sql.DriverManager.getConnection(DriverManager.java:229)\r\n\t   at com.me.test.Main.testJDBC(Main.java:77)\r\n\t   at com.me.test.Main.main(Main.java:98)\r\n\r\n\r\n**EDIT 2:**\r\n\r\nI configured the following in the file *&quot;reflect-config.json&quot;*\r\n\r\n    [\r\n    \r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.SingleConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.FailoverDnsSrvConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.LoadBalanceDnsSrvConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.ReplicationDnsSrvConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.XDevApiDnsSrvConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.FailoverConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.LoadBalanceConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.conf.url.ReplicationConnectionUrl&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },  {\r\n      &quot;name&quot;: &quot;com.mysql.cj.conf.url.XDevApiConnectionUrl&quot;,\r\n      &quot;allDeclaredFields&quot;: true,\r\n      &quot;allDeclaredMethods&quot;: true,\r\n      &quot;allDeclaredConstructors&quot;: true\r\n    },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.log.Jdk14Logger&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.cj.log.NullLogger&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n      {\r\n            &quot;name&quot;: &quot;com.mysql.cj.log.Slf4JLogger&quot;,\r\n            &quot;allDeclaredFields&quot;: true,\r\n            &quot;allDeclaredMethods&quot;: true,\r\n            &quot;allDeclaredConstructors&quot;: true\r\n        },\r\n      {\r\n      &quot;name&quot;: &quot;com.mysql.cj.log.StandardLogger&quot;,\r\n      &quot;allDeclaredFields&quot;: true,\r\n      &quot;allDeclaredMethods&quot;: true,\r\n      &quot;allDeclaredConstructors&quot;: true\r\n    },\r\n      {\r\n        &quot;name&quot;: &quot;com.mysql.jdbc.Driver&quot;,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allDeclaredConstructors&quot;: true\r\n      },\r\n    \r\n      {\r\n        &quot;name&quot;:&quot;oracle.jdbc.OracleDriver&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.jdbc.driver.T4CDriverExtension&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot; : &quot;oracle.jdbc.driver.T2CDriverExtension&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.Ano&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.AuthenticationService&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.DataIntegrityService&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.EncryptionService&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      },\r\n      {\r\n        &quot;name&quot;:&quot;oracle.net.ano.SupervisorService&quot;,\r\n        &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\r\n      }\r\n    ]\r\n\r\nBut for some reason there is a connection error (Tested With AWS RDS, and host.docker.internal). \r\n\r\n    Exception in thread &quot;main&quot; java.sql.SQLNonTransientConnectionException: Cannot connect to MySQL server on foo.blabla.aws-region.rds.amazonaws.com:3,306.\r\n    \r\n    Make sure that there is a MySQL server running on the machine/port you are trying to connect to and that the machine this software is running on is able to connect to this host/port (i.e. not firewalled). Also make sure that the server has not been started with the --skip-networking flag.\r\n    \r\n    \r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:462)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\r\n    \tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:681)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:229)\r\n    \tat com.me.test.Main.testJDBC(Main.java:104)\r\n    \tat com.me.test.Main.main(Main.java:125)\r\n    Caused by: java.lang.ClassCastException: com.mysql.cj.exceptions.CJException cannot be cast to com.mysql.cj.exceptions.UnableToConnectException\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\r\n    \t... 6 more\r\n\r\n\r\nThis error only occurs using *&quot;ghcr.io/graalvm/graalvm-ce:latest&quot;*, if I use another VM like *&quot;amazoncorretto:18-alpine&quot;* everything works perfect.\r\n\r\nFull Source Code: https://github.com/ederbaum/MySQLGraalVM\r\n\r\nAny possible solution?","title":"MySQL connector does not work with GraalVM and Docker","body":"<p>I'm trying to do a basic SQL query using JDBC and mysql-connector-java on an image with Graalvm (The cause of the problem).</p>\n<p>Apparently everyone who tries to use GraalVM with JDBC/MySQL and Docker will have the same problem every time.</p>\n<p>I'm having the following Exception</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\n   at com.mysql.cj.Constants.&lt;clinit&gt;(Constants.java:49)\n   at com.mysql.cj.util.Util.&lt;clinit&gt;(Util.java:67)\n   at com.mysql.cj.conf.ConnectionUrl$Type.getImplementingInstance(ConnectionUrl.java:241)\n   at com.mysql.cj.conf.ConnectionUrl$Type.getConnectionUrlInstance(ConnectionUrl.java:211)\n   at com.mysql.cj.conf.ConnectionUrl.getConnectionUrlInstance(ConnectionUrl.java:280)\n   at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:195)\n   at java.sql.DriverManager.getConnection(DriverManager.java:681)\n   at java.sql.DriverManager.getConnection(DriverManager.java:229)\n   at com.me.test.Main.testJDBC(Main.java:73)\n   at com.me.test.Main.main(Main.java:94)\nCaused by: java.lang.RuntimeException: Can't load resource bundle due to underlying     exception java.util.MissingResourceException: Can't find bundle for base name com.mysql.cj.LocalizedErrorMessages, locale en_US\n   at com.mysql.cj.Messages.&lt;clinit&gt;(Messages.java:60)\n... 10 more\nCaused by: java.util.MissingResourceException: Can't find bundle for base name com.mysql.cj.LocalizedErrorMessages, locale en_US\n   at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:2045)\n   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1683)\n   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1586)\n   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1549)\n   at java.util.ResourceBundle.getBundle(ResourceBundle.java:858)\n   at com.mysql.cj.Messages.&lt;clinit&gt;(Messages.java:58)\n... 10 more\n</code></pre>\n<p>My Dockerfile</p>\n<pre><code>FROM ghcr.io/graalvm/graalvm-ce:latest\n\nRUN gu install native-image\nWORKDIR /tmp/dist\nADD ./app.jar ./app.jar\n\nCOPY ./reflect-config.json ./reflect-config.json\n\nRUN native-image -jar ./app.jar --verbose --no-fallback\nRUN  microdnf install zip\n\nADD bootstrap bootstrap\n\nRUN chmod +x bootstrap\nRUN chmod +x ./app\n\nRUN zip -j function.zip bootstrap app\n\n\nENTRYPOINT [&quot;./app&quot;]\n</code></pre>\n<p>Dependencies in my pom file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;mysql&lt;/groupId&gt;\n  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n  &lt;version&gt;8.0.29&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n  &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n  &lt;version&gt;21.5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And finally my java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void testJDBC() throws SQLException, IOException {\n    String url = &quot;jdbc:mysql://foo.blabla.aws-region.rds.amazonaws.com:3306/database&quot;;\n    String user = &quot;root&quot;;\n    String password = &quot;password&quot;;\n    try(java.sql.Connection conn = java.sql.DriverManager.getConnection(url, user, password)){\n        doSomething(conn);\n    }\n}\n</code></pre>\n<p><strong>EDIT 1:</strong></p>\n<p>I followed Mark Rotteveel's recommendation, and added a <em>&quot;resource-config.json&quot;</em> file with the following:</p>\n<pre><code>{\n  &quot;resources&quot;: {\n    &quot;includes&quot;: [\n      {&quot;pattern&quot;: &quot;com.mysql.cj.LocalizedErrorMessages.properties&quot;}\n    ]\n  }\n}\n</code></pre>\n<p>And in the <em>&quot;native-image.properties&quot;</em> file the following</p>\n<pre><code>Args = -H:EnableURLProtocols=http,https -H:ReflectionConfigurationFiles=/tmp/dist/reflect-config.json -H:ResourceConfigurationFiles=/tmp/dist/resource-config.json\n</code></pre>\n<p>Fixed the current error, but as expected we have a new one:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: com.mysql.cj.exceptions.CJException cannot be cast to com.mysql.cj.exceptions.WrongArgumentException\n   at com.mysql.cj.util.Util.getInstance(Util.java:169)\n   at com.mysql.cj.util.Util.getInstance(Util.java:174)\n   at com.mysql.cj.conf.ConnectionUrl$Type.getImplementingInstance(ConnectionUrl.java:241)\n   at com.mysql.cj.conf.ConnectionUrl$Type.getConnectionUrlInstance(ConnectionUrl.java:211)\n   at com.mysql.cj.conf.ConnectionUrl.getConnectionUrlInstance(ConnectionUrl.java:280)\n   at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:195)\n   at java.sql.DriverManager.getConnection(DriverManager.java:681)\n   at java.sql.DriverManager.getConnection(DriverManager.java:229)\n   at com.me.test.Main.testJDBC(Main.java:77)\n   at com.me.test.Main.main(Main.java:98)\n</code></pre>\n<p><strong>EDIT 2:</strong></p>\n<p>I configured the following in the file <em>&quot;reflect-config.json&quot;</em></p>\n<pre><code>[\n\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.SingleConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.FailoverDnsSrvConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.LoadBalanceDnsSrvConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.ReplicationDnsSrvConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.XDevApiDnsSrvConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.FailoverConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.LoadBalanceConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.conf.url.ReplicationConnectionUrl&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },  {\n  &quot;name&quot;: &quot;com.mysql.cj.conf.url.XDevApiConnectionUrl&quot;,\n  &quot;allDeclaredFields&quot;: true,\n  &quot;allDeclaredMethods&quot;: true,\n  &quot;allDeclaredConstructors&quot;: true\n},\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.log.Jdk14Logger&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;com.mysql.cj.log.NullLogger&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n        &quot;name&quot;: &quot;com.mysql.cj.log.Slf4JLogger&quot;,\n        &quot;allDeclaredFields&quot;: true,\n        &quot;allDeclaredMethods&quot;: true,\n        &quot;allDeclaredConstructors&quot;: true\n    },\n  {\n  &quot;name&quot;: &quot;com.mysql.cj.log.StandardLogger&quot;,\n  &quot;allDeclaredFields&quot;: true,\n  &quot;allDeclaredMethods&quot;: true,\n  &quot;allDeclaredConstructors&quot;: true\n},\n  {\n    &quot;name&quot;: &quot;com.mysql.jdbc.Driver&quot;,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n\n  {\n    &quot;name&quot;:&quot;oracle.jdbc.OracleDriver&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.jdbc.driver.T4CDriverExtension&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot; : &quot;oracle.jdbc.driver.T2CDriverExtension&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.Ano&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.AuthenticationService&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.DataIntegrityService&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.EncryptionService&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  },\n  {\n    &quot;name&quot;:&quot;oracle.net.ano.SupervisorService&quot;,\n    &quot;methods&quot;:[{&quot;name&quot;:&quot;&lt;init&gt;&quot;,&quot;parameterTypes&quot;:[] }]\n  }\n]\n</code></pre>\n<p>But for some reason there is a connection error (Tested With AWS RDS, and host.docker.internal).</p>\n<pre><code>Exception in thread &quot;main&quot; java.sql.SQLNonTransientConnectionException: Cannot connect to MySQL server on foo.blabla.aws-region.rds.amazonaws.com:3,306.\n\nMake sure that there is a MySQL server running on the machine/port you are trying to connect to and that the machine this software is running on is able to connect to this host/port (i.e. not firewalled). Also make sure that the server has not been started with the --skip-networking flag.\n\n\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:462)\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\n    at java.sql.DriverManager.getConnection(DriverManager.java:681)\n    at java.sql.DriverManager.getConnection(DriverManager.java:229)\n    at com.me.test.Main.testJDBC(Main.java:104)\n    at com.me.test.Main.main(Main.java:125)\nCaused by: java.lang.ClassCastException: com.mysql.cj.exceptions.CJException cannot be cast to com.mysql.cj.exceptions.UnableToConnectException\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\n    ... 6 more\n</code></pre>\n<p>This error only occurs using <em>&quot;ghcr.io/graalvm/graalvm-ce:latest&quot;</em>, if I use another VM like <em>&quot;amazoncorretto:18-alpine&quot;</em> everything works perfect.</p>\n<p>Full Source Code: <a href=\"https://github.com/ederbaum/MySQLGraalVM\" rel=\"nofollow noreferrer\">https://github.com/ederbaum/MySQLGraalVM</a></p>\n<p>Any possible solution?</p>\n"},{"tags":["java","freemarker"],"answers":[{"comments":[{"owner":{"account_id":7943601,"reputation":15,"user_id":5996770,"display_name":"Marcus"},"score":0,"creation_date":1472116503,"post_id":35926330,"comment_id":65626739,"body_markdown":"Wow...sorry... In fact I think I do not get you. Seems my &quot;Java&quot; is not nearly as good, as hoped. :)","body":"Wow...sorry... In fact I think I do not get you. Seems my &quot;Java&quot; is not nearly as good, as hoped. :)"}],"tags":[],"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457640848,"creation_date":1457640848,"answer_id":35926330,"question_id":35918052,"body_markdown":"There&#39;s no such feature out of the box, but it&#39;s just the question of the `TemplateHashModel` implementation you pass in as the data model. (The data model is always a `TemplateHashModel`, though if you pass in a POJO FreeMarker will adapt it automatically via the `ObjectWrapper` in the `Configuration`.) You could easily write a `TemplateHashModel` implementation that encloses a list of other `TemplateHashModel`-s, and whose `get(String)` returns the requested variable from the first enclosed `TemplateHashModel` whose `get(String)` returns non-`null`. To adapt your POJO (`CDATA1` etc.) to `TemplateHashModel` call `cfg.getObjectWrapper().wrap(myObject)`, where `cfg` is the `freemarker.template.Configuration` object.","title":"Java: Using 2 or more Classes for Freemarker Data Model processing","body":"<p>There's no such feature out of the box, but it's just the question of the <code>TemplateHashModel</code> implementation you pass in as the data model. (The data model is always a <code>TemplateHashModel</code>, though if you pass in a POJO FreeMarker will adapt it automatically via the <code>ObjectWrapper</code> in the <code>Configuration</code>.) You could easily write a <code>TemplateHashModel</code> implementation that encloses a list of other <code>TemplateHashModel</code>-s, and whose <code>get(String)</code> returns the requested variable from the first enclosed <code>TemplateHashModel</code> whose <code>get(String)</code> returns non-<code>null</code>. To adapt your POJO (<code>CDATA1</code> etc.) to <code>TemplateHashModel</code> call <code>cfg.getObjectWrapper().wrap(myObject)</code>, where <code>cfg</code> is the <code>freemarker.template.Configuration</code> object.</p>\n"},{"tags":[],"owner":{"account_id":12025007,"reputation":83,"user_id":8797251,"display_name":"mohd sabahat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693545573,"creation_date":1693545573,"answer_id":77020658,"question_id":35918052,"body_markdown":"I know i am too late but why not do something like\r\n```java\r\nMap&lt;String, Object&gt; dataModel = new HashMap&lt;&gt;();\r\ndataModel.put(&quot;CDATA1&quot;, config_generator.CDATA1);\r\ndataModel.put(&quot;CDATA2&quot;, config_generator.CDATA2);\r\ntemplateValues.process(dataModel, stringWriter);\r\n```\r\nCorrect me if I got something wrong.","title":"Java: Using 2 or more Classes for Freemarker Data Model processing","body":"<p>I know i am too late but why not do something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Object&gt; dataModel = new HashMap&lt;&gt;();\ndataModel.put(&quot;CDATA1&quot;, config_generator.CDATA1);\ndataModel.put(&quot;CDATA2&quot;, config_generator.CDATA2);\ntemplateValues.process(dataModel, stringWriter);\n</code></pre>\n<p>Correct me if I got something wrong.</p>\n"}],"owner":{"account_id":7943601,"reputation":15,"user_id":5996770,"display_name":"Marcus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693545573,"creation_date":1457616942,"question_id":35918052,"body_markdown":"I&#39;ve got a problem with understanding the Freemarker Data Model and how to work with it correctly.\r\nI currently have 1 Core Data Class.\r\nIt is stuffed as hell (a lot of variables with getters and setters) and I want to split it into different Classes.\r\n\r\nBut my Core Class is fueling a Freemarker processing... And I just don&#39;t get, how to get this working with several classes.\r\n\r\nCurrently I use this:\r\n\r\n    templateValues.process(config_generator.CDATA, stringWriter);\r\nCDATA is my Core Data Class...\r\nI checked the Freemarker guide several times, but I just don&#39;t get it.\r\n\r\nIf I would implement 2 Classes (CDATA1 &amp; CDATA2 i.e.) how would I set up the processing? And would this work with even more Classes as well? (CDATA3 to X).","title":"Java: Using 2 or more Classes for Freemarker Data Model processing","body":"<p>I've got a problem with understanding the Freemarker Data Model and how to work with it correctly.\nI currently have 1 Core Data Class.\nIt is stuffed as hell (a lot of variables with getters and setters) and I want to split it into different Classes.</p>\n\n<p>But my Core Class is fueling a Freemarker processing... And I just don't get, how to get this working with several classes.</p>\n\n<p>Currently I use this:</p>\n\n<pre><code>templateValues.process(config_generator.CDATA, stringWriter);\n</code></pre>\n\n<p>CDATA is my Core Data Class...\nI checked the Freemarker guide several times, but I just don't get it.</p>\n\n<p>If I would implement 2 Classes (CDATA1 &amp; CDATA2 i.e.) how would I set up the processing? And would this work with even more Classes as well? (CDATA3 to X).</p>\n"},{"tags":["java","arrays","arraylist"],"answers":[{"comments":[{"owner":{"account_id":29342033,"reputation":1,"user_id":22481220,"display_name":"Immortal Sugimoto"},"score":0,"creation_date":1693541749,"post_id":77020446,"comment_id":135777565,"body_markdown":"Thanks! after changing the required things... I&#39;m still getting compilation error \nCompilation Failed\n./Solution.java:19: error: unexpected type\n            arr.get(left) = arr.get(right);\n                   ^\n  required: variable\n  found:    value\n./Solution.java:20: error: unexpected type\n            arr.get(right) = temp;\n                   ^\n  required: variable\n  found:    value\n2 errors\nCan you help?","body":"Thanks! after changing the required things... I&#39;m still getting compilation error  Compilation Failed ./Solution.java:19: error: unexpected type             arr.get(left) = arr.get(right);                    ^   required: variable   found:    value ./Solution.java:20: error: unexpected type             arr.get(right) = temp;                    ^   required: variable   found:    value 2 errors Can you help?"},{"owner":{"account_id":244572,"reputation":2040,"user_id":2266682,"accept_rate":75,"display_name":"Aqeel Ashiq"},"score":0,"creation_date":1693548108,"post_id":77020446,"comment_id":135778125,"body_markdown":"@ImmortalSugimoto I have updated my answer, for your new error you mentioned. Please check","body":"@ImmortalSugimoto I have updated my answer, for your new error you mentioned. Please check"}],"tags":[],"owner":{"account_id":244572,"reputation":2040,"user_id":2266682,"accept_rate":75,"display_name":"Aqeel Ashiq"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693542330,"creation_date":1693541173,"answer_id":77020446,"question_id":77020391,"body_markdown":"`arr` is an `ArrayList`. Its syntax is little bit different from `Array`.\r\n\r\nTo get a value: `arr.get(i)` \r\n\r\nTo get length: `arr.size()`\r\n\r\n**Update:**\r\n\r\nTo update a value in `ArrayList`, you cannot do `arr.get(left) = arr.get(right)` or `arr.get(right) = temp`. Rather you have to do:\r\n\r\n    \r\n    arr.set(left, arr.get(right));\r\n    arr.set(right, temp);\r\n","title":"Reverse the array after a fixed position","body":"<p><code>arr</code> is an <code>ArrayList</code>. Its syntax is little bit different from <code>Array</code>.</p>\n<p>To get a value: <code>arr.get(i)</code></p>\n<p>To get length: <code>arr.size()</code></p>\n<p><strong>Update:</strong></p>\n<p>To update a value in <code>ArrayList</code>, you cannot do <code>arr.get(left) = arr.get(right)</code> or <code>arr.get(right) = temp</code>. Rather you have to do:</p>\n<pre><code>arr.set(left, arr.get(right));\narr.set(right, temp);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1693544911,"creation_date":1693544372,"answer_id":77020610,"question_id":77020391,"body_markdown":"```java\r\npublic static void reverse(int[] arr, int m) {\r\n    int lo = Math.max(0, m + 1);\r\n    int hi = arr.length - 1;\r\n\r\n    for (int i = lo, j = hi; i &lt; j; i++, j--) {\r\n        // swap arr[i] and arr[j]\r\n        int tmp = arr[i];\r\n        arr[i] = arr[j];\r\n        arr[j] = tmp;\r\n    }\r\n}\r\n```\r\n\r\n**Demo:**\r\n```java\r\nint[] arr = { 0, 1, 2, 3, 4, 5, 6 };\r\nreverse(arr, 3);\r\nSystem.out.println(Arrays.toString(arr));    // [0, 1, 2, 3, 6, 5, 4]\r\n```\r\n---\r\nIn case you have a `ArrayList`, then you shuld do similar:\r\n```java\r\npublic static void reverse(List&lt;Integer&gt; arr, int m) {\r\n    int lo = Math.max(0, m + 1);\r\n    int hi = arr.size() - 1;\r\n\r\n    for (int i = lo, j = hi; i &lt; j; i++, j--) {\r\n        // swap arr[i] and arr[j]\r\n        int tmp = arr.get(i);\r\n        arr.set(i, arr.get(j));\r\n        arr.set(j, tmp);\r\n    }\r\n}\r\n``` ","title":"Reverse the array after a fixed position","body":"<pre class=\"lang-java prettyprint-override\"><code>public static void reverse(int[] arr, int m) {\n    int lo = Math.max(0, m + 1);\n    int hi = arr.length - 1;\n\n    for (int i = lo, j = hi; i &lt; j; i++, j--) {\n        // swap arr[i] and arr[j]\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n}\n</code></pre>\n<p><strong>Demo:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] arr = { 0, 1, 2, 3, 4, 5, 6 };\nreverse(arr, 3);\nSystem.out.println(Arrays.toString(arr));    // [0, 1, 2, 3, 6, 5, 4]\n</code></pre>\n<hr />\n<p>In case you have a <code>ArrayList</code>, then you shuld do similar:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void reverse(List&lt;Integer&gt; arr, int m) {\n    int lo = Math.max(0, m + 1);\n    int hi = arr.size() - 1;\n\n    for (int i = lo, j = hi; i &lt; j; i++, j--) {\n        // swap arr[i] and arr[j]\n        int tmp = arr.get(i);\n        arr.set(i, arr.get(j));\n        arr.set(j, tmp);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29342033,"reputation":1,"user_id":22481220,"display_name":"Immortal Sugimoto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1693544911,"creation_date":1693539974,"question_id":77020391,"body_markdown":"Given an ArrayList &#39;arr&#39; of integers and a position &#39;m&#39; . You have to reverse the array after that position.\r\n\r\nExample\r\n```\r\nWe have an Array arr = {1, 2, 3, 4, 5, 6} and m = 3, considering O based indexing so the subarray   {5, 6} will be reversed and our output array will be {1, 2, 3, 4, 6, 5}\r\n```\r\n\r\nConstraints\r\n```\r\n1&lt;=T&lt;=10\r\n0 &lt;= M &lt;= N &lt;= 5*10^4\r\n10^(-9) &lt;= arr[i] &lt;= 10^(9)\r\nTime Limit: 1 second\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nfor this question this is what I did\r\n\r\n```\r\nimport java.util.* ;\r\nimport java.io.*; \r\nimport java.util.ArrayList;\r\n\r\npublic class Solution \r\n{\r\n    \r\n    public static void reverseArray(ArrayList&lt;Integer&gt; arr, int m)\r\n    {\r\n        ArrayList&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\r\n\r\n        for(int i = 0; i&lt;= m ; i++){\r\n            nums.add(arr.get[i]);\r\n        }\r\n        int left = m+1;\r\n        int right = arr.length -1;\r\n        while(left&lt;right){\r\n            int temp = arr.get[left];\r\n            arr.get[left] = arr.get[right];\r\n            arr.get[right] = temp;\r\n\r\n            teft++;\r\n            right--;\r\n        }\r\n        for(int i = m+1; i&lt; arr.length; i++){\r\n            nums.add(arr.get[m+1]);\r\n        }\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\non running it shows this error\r\n\r\n```\r\nCompilation Failed\r\n./Solution.java:13: error: cannot find symbol\r\n            nums.add(arr.get[i]);\r\n                        ^\r\n  symbol:   variable get\r\n  location: variable arr of type ArrayList\r\n./Solution.java:16: error: cannot find symbol\r\n        int right = arr.length -1;\r\n                       ^\r\n  symbol:   variable length\r\n  location: variable arr of type ArrayList\r\n./Solution.java:18: error: cannot find symbol\r\n            int temp = arr.get[left];\r\n                          ^\r\n  symbol:   variable get\r\n  location: variable arr of type ArrayList\r\n\r\n```\r\n\r\nCan you help in identifying my mistake in the code and as well as how to read the compilation error like I&#39;m not able to understand them.\r\n","title":"Reverse the array after a fixed position","body":"<p>Given an ArrayList 'arr' of integers and a position 'm' . You have to reverse the array after that position.</p>\n<p>Example</p>\n<pre><code>We have an Array arr = {1, 2, 3, 4, 5, 6} and m = 3, considering O based indexing so the subarray   {5, 6} will be reversed and our output array will be {1, 2, 3, 4, 6, 5}\n</code></pre>\n<p>Constraints</p>\n<pre><code>1&lt;=T&lt;=10\n0 &lt;= M &lt;= N &lt;= 5*10^4\n10^(-9) &lt;= arr[i] &lt;= 10^(9)\nTime Limit: 1 second\n</code></pre>\n<p>for this question this is what I did</p>\n<pre><code>import java.util.* ;\nimport java.io.*; \nimport java.util.ArrayList;\n\npublic class Solution \n{\n    \n    public static void reverseArray(ArrayList&lt;Integer&gt; arr, int m)\n    {\n        ArrayList&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\n\n        for(int i = 0; i&lt;= m ; i++){\n            nums.add(arr.get[i]);\n        }\n        int left = m+1;\n        int right = arr.length -1;\n        while(left&lt;right){\n            int temp = arr.get[left];\n            arr.get[left] = arr.get[right];\n            arr.get[right] = temp;\n\n            teft++;\n            right--;\n        }\n        for(int i = m+1; i&lt; arr.length; i++){\n            nums.add(arr.get[m+1]);\n        }\n\n    }\n}\n\n</code></pre>\n<p>on running it shows this error</p>\n<pre><code>Compilation Failed\n./Solution.java:13: error: cannot find symbol\n            nums.add(arr.get[i]);\n                        ^\n  symbol:   variable get\n  location: variable arr of type ArrayList\n./Solution.java:16: error: cannot find symbol\n        int right = arr.length -1;\n                       ^\n  symbol:   variable length\n  location: variable arr of type ArrayList\n./Solution.java:18: error: cannot find symbol\n            int temp = arr.get[left];\n                          ^\n  symbol:   variable get\n  location: variable arr of type ArrayList\n\n</code></pre>\n<p>Can you help in identifying my mistake in the code and as well as how to read the compilation error like I'm not able to understand them.</p>\n"},{"tags":["java","spring-boot","testing"],"answers":[{"comments":[{"owner":{"account_id":20100957,"reputation":285,"user_id":14739428,"display_name":"william"},"score":0,"creation_date":1615886988,"post_id":66416049,"comment_id":117824144,"body_markdown":"this will not solve this problem ,response in chrome is still in XML","body":"this will not solve this problem ,response in chrome is still in XML"}],"tags":[],"owner":{"account_id":5853192,"reputation":58,"user_id":4611288,"display_name":"Randi Trigger"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614567351,"creation_date":1614567351,"answer_id":66416049,"question_id":66415881,"body_markdown":"It sounds like you&#39;ll want to define a ContentNegotiationCongiurer. Here&#39;s a doc: https://www.baeldung.com/spring-mvc-content-negotiation-json-xml\r\n\r\nThe short answer is to add something like this to the Spring context\r\n\r\n```\r\n@Configuration\r\npublic class WebConfig extends WebMvcConfigurerAdapter {\r\n    @Override\r\n    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\r\n        configurer.defaultContentType(MediaType.APPLICATION_JSON);\r\n    }\r\n}\r\n```","title":"How to force springboot return Json response with global settings","body":"<p>It sounds like you'll want to define a ContentNegotiationCongiurer. Here's a doc: <a href=\"https://www.baeldung.com/spring-mvc-content-negotiation-json-xml\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-mvc-content-negotiation-json-xml</a></p>\n<p>The short answer is to add something like this to the Spring context</p>\n<pre><code>@Configuration\npublic class WebConfig extends WebMvcConfigurerAdapter {\n    @Override\n    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\n        configurer.defaultContentType(MediaType.APPLICATION_JSON);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8609684,"reputation":996,"user_id":6448518,"display_name":"rougou"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693543459,"creation_date":1693543459,"answer_id":77020564,"question_id":66415881,"body_markdown":"You can force a JSON response with the following configuration:\r\n\r\n    @Configuration\r\n    public class WebConfig implements WebMvcConfigurer {\r\n\r\n        @Override\r\n        public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\r\n            configurer.strategies(List.of(new FixedContentNegotiationStrategy(MediaType.APPLICATION_JSON)));\r\n        }\r\n    }","title":"How to force springboot return Json response with global settings","body":"<p>You can force a JSON response with the following configuration:</p>\n<pre><code>@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\n        configurer.strategies(List.of(new FixedContentNegotiationStrategy(MediaType.APPLICATION_JSON)));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20100957,"reputation":285,"user_id":14739428,"display_name":"william"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1596,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1693543459,"creation_date":1614565595,"question_id":66415881,"body_markdown":"Here are problems. They who are testing my application told me that when they trying to directly input the url into address to query a GET url by chrome. My api will always return a XML formatted response like this.\r\n[![enter image description here][1]][1]\r\n&lt;br&gt;&lt;br&gt;\r\nBut all the response should be formatted in JSON string ! XML is unacceptable !\r\n&lt;br&gt;&lt;br&gt;\r\nI tried to analyze the source code and found request sending by chrome directly will bear attributes like this:\r\n&lt;br&gt;&lt;br&gt;\r\naccept= text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\r\n&lt;br&gt;\r\ncontent-type=null\r\n&lt;br&gt;&lt;br&gt;\r\nwhile any other application will send request with:\r\n&lt;br&gt;&lt;br&gt;\r\naccept= \\*/*   (or accept = application/json)\r\n&lt;br&gt;\r\ncontent-type = application/json\r\n&lt;br&gt;&lt;br&gt;\r\nIn this case , springboot will then response XML to the request send by chrome because of the missing content-type and specified accept properties.\r\n&lt;br&gt;&lt;br&gt;\r\nThere is a way to fix this case by excluding jackson for XML in pom. But I don&#39;t think it is a graceful way.\r\n&lt;br&gt;&lt;br&gt;\r\nSo far I refused to fix this problem because I have told Front-end code colleague to send request with specified &quot;application/json&quot; attribute and no problem occured again.\r\n&lt;br&gt;&lt;br&gt;\r\nBut still, I think I have responsibilities to fix it and there should be ways more graceful to fix this problem.\r\n&lt;br&gt;&lt;br&gt;\r\nThere are too many api deployed in my application and there is no way to set a response type for every controller. I&#39;m looking for a global setting for this case.\r\n&lt;br&gt;&lt;br&gt;\r\nI think there should be some way to act like RequestInterceptor to set headers of a request, but I found that impossible to directly modify the headers from those request in my gateway service.\r\n&lt;br&gt;&lt;br&gt;\r\nHelp me with this case please. Thanks a lot!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8BNrQ.png","title":"How to force springboot return Json response with global settings","body":"<p>Here are problems. They who are testing my application told me that when they trying to directly input the url into address to query a GET url by chrome. My api will always return a XML formatted response like this.\n<a href=\"https://i.stack.imgur.com/8BNrQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8BNrQ.png\" alt=\"enter image description here\" /></a>\n<br><br>\nBut all the response should be formatted in JSON string ! XML is unacceptable !\n<br><br>\nI tried to analyze the source code and found request sending by chrome directly will bear attributes like this:\n<br><br>\naccept= text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,<em>/</em>;q=0.8,application/signed-exchange;v=b3;q=0.9\n<br>\ncontent-type=null\n<br><br>\nwhile any other application will send request with:\n<br><br>\naccept= */*   (or accept = application/json)\n<br>\ncontent-type = application/json\n<br><br>\nIn this case , springboot will then response XML to the request send by chrome because of the missing content-type and specified accept properties.\n<br><br>\nThere is a way to fix this case by excluding jackson for XML in pom. But I don't think it is a graceful way.\n<br><br>\nSo far I refused to fix this problem because I have told Front-end code colleague to send request with specified &quot;application/json&quot; attribute and no problem occured again.\n<br><br>\nBut still, I think I have responsibilities to fix it and there should be ways more graceful to fix this problem.\n<br><br>\nThere are too many api deployed in my application and there is no way to set a response type for every controller. I'm looking for a global setting for this case.\n<br><br>\nI think there should be some way to act like RequestInterceptor to set headers of a request, but I found that impossible to directly modify the headers from those request in my gateway service.\n<br><br>\nHelp me with this case please. Thanks a lot!</p>\n"},{"tags":["java","spring-webflux","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693543220,"creation_date":1693543220,"answer_id":77020552,"question_id":77001146,"body_markdown":"You can use `switchIfEmpty` operator to handle empty responses and as an option return error\r\n\r\n```\r\nwebClient.get()\r\n  .uri(&quot;&lt;endpoint&gt;&quot;)\r\n  .retrieve()\r\n  .bodyToMono(Response.class)\r\n  .switchIfEmpty(Mono.error(new RuntimeException(&quot;Error response&quot;)));\r\n```","title":"Handle empty response with Spring WebClient in a reactive way","body":"<p>You can use <code>switchIfEmpty</code> operator to handle empty responses and as an option return error</p>\n<pre><code>webClient.get()\n  .uri(&quot;&lt;endpoint&gt;&quot;)\n  .retrieve()\n  .bodyToMono(Response.class)\n  .switchIfEmpty(Mono.error(new RuntimeException(&quot;Error response&quot;)));\n</code></pre>\n"}],"owner":{"account_id":896384,"reputation":163,"user_id":933547,"accept_rate":71,"display_name":"Christof Buechi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77020552,"answer_count":1,"score":1,"last_activity_date":1693543255,"creation_date":1693319686,"question_id":77001146,"body_markdown":"Is there a way to react on empty responses in Spring WebClient without checking the http status code? The endpoint from which I get data does return http200 even if an error occurs, which is why I need to check the payload itself. In case of an error it returns empty, in case of success it returns a valid payload which should be mapped into a POJO. \r\n\r\nAs the payload could only consumed once, is a there a way to handle this in a reactive way?","title":"Handle empty response with Spring WebClient in a reactive way","body":"<p>Is there a way to react on empty responses in Spring WebClient without checking the http status code? The endpoint from which I get data does return http200 even if an error occurs, which is why I need to check the payload itself. In case of an error it returns empty, in case of success it returns a valid payload which should be mapped into a POJO.</p>\n<p>As the payload could only consumed once, is a there a way to handle this in a reactive way?</p>\n"},{"tags":["java","android","kotlin","android-developer-api"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693514409,"post_id":77009709,"comment_id":135775221,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":21095103,"reputation":11,"user_id":15506243,"display_name":"Axim Amin"},"score":0,"creation_date":1693542876,"post_id":77009709,"comment_id":135777630,"body_markdown":"code added. please help.;","body":"code added. please help.;"}],"owner":{"account_id":21095103,"reputation":11,"user_id":15506243,"display_name":"Axim Amin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693542855,"creation_date":1693411250,"question_id":77009709,"body_markdown":"I&#39;m currently facing an issue where the overlay layout fails to appear upon launching the system settings app. The intended functionality is reminiscent of an app lock feature: upon tapping the settings app, an overlay layout should activate, requesting a pattern input to initiate the unlocking process. However, I&#39;m unable to achieve this behavior successfully.\r\n\r\nAfter successfully granting permission for the top app overlay. The desired behavior is similar to an app lock functionality, where upon clicking the settings app, an overlay layout should appear asking for a pattern to unlock. \r\n\r\nWhile my overlay layouts work seamlessly in various apps, they don&#39;t seem to function as intended in the system settings app, particularly on Android versions above 10.\r\n\r\n\r\n    private fun CheckOverlayPermission() {\r\n        // Choose a request code\r\n    \r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\r\n            // If the permission is not granted, open the overlay permission settings\r\n            val intent = Intent(\r\n                Settings.ACTION_MANAGE_OVERLAY_PERMISSION,\r\n                Uri.parse(&quot;package:$packageName&quot;)\r\n            )\r\n            startActivityForResult(intent, overlayPermissionCode)\r\n        } else {\r\n            // Permission is already granted or not needed on this version\r\n            // Your overlay logic here\r\n        }\r\n    \r\n    }\r\n    // this function to to check the package name if exist in the \r\n    database and show the overlay layout \r\n    \r\n    private fun onAppForeground(foregroundAppPackage: String) {\r\n    \r\n        hideOverlay()\r\n    \r\n        //UnInstall Application............\r\n    \r\n        //Lock overlay work\r\n        if (lockedAppPackageSet.contains(foregroundAppPackage)) {\r\n            if (appLockerPreferences.getFingerPrintEnabled() || PermissionChecker.checkOverlayPermission(\r\n                    applicationContext\r\n                ).not()\r\n            ) {\r\n                val intent =\r\n                    OverlayValidationActivity.newIntent(applicationContext, foregroundAppPackage)\r\n                if (lastForegroundAppPackage == applicationContext.packageName) {\r\n                    intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK\r\n                } else {\r\n                    intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\r\n                }\r\n    \r\n                startActivity(intent)\r\n    \r\n            } else {\r\n                showOverlay(foregroundAppPackage)\r\n            }\r\n        }\r\n        lastForegroundAppPackage = foregroundAppPackage\r\n    }\r\n    \r\n    // show overlay layout \r\n    \r\n    private fun showOverlay(lockedAppPackageName: String) {\r\n        if (isOverlayShowing.not()) {\r\n            isOverlayShowing = true\r\n            overlayView.setHiddenDrawingMode(appLockerPreferences.getHiddenDrawingMode())\r\n            overlayView.setAppPackageName(lockedAppPackageName)\r\n            windowManager.addView(overlayView, overlayParams);\r\n        }\r\n    }\r\n    \r\n    // forground observer to checks the locked apps\r\n    \r\n    \r\n    //         for above 10 or 11\r\n    \r\n        private fun getForegroundObservableaboveQ(): Flowable&lt;String&gt;? {\r\n            return Flowable.interval(0, TimeUnit.MILLISECONDS)\r\n                .filter { PermissionChecker.checkUsageAccessPermission(context) }\r\n                .map {\r\n                    val mUsageStatsManager =\r\n                        context.getSystemService(Service.USAGE_STATS_SERVICE) as UsageStatsManager\r\n                    val time = System.currentTimeMillis()\r\n    \r\n                    val usageEvents =\r\n                        mUsageStatsManager.queryUsageStats(INTERVAL_DAILY, time - 10000, time)\r\n                    val sortedUsageEvents = usageEvents.sortedBy { it.lastTimeUsed }\r\n                    val usageEvent = sortedUsageEvents.lastOrNull()\r\n    \r\n                    UsageEventWrapper(usageEvent)\r\n                }\r\n                .filter { it.usageEvent != null }\r\n                .map { it.usageEvent }\r\n                .filter { it.packageName != null }\r\n                .map { it.packageName }\r\n                .distinctUntilChanged()\r\n        }\r\n    \r\n    // overlay layouts params\r\n    \r\n    \r\n    object OverlayViewLayoutParams {\r\n    \r\n        fun get(): WindowManager.LayoutParams {\r\n            val layoutFlag: Int = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY\r\n            } else {\r\n                WindowManager.LayoutParams.TYPE_PHONE\r\n            }\r\n    \r\n    \r\n            return WindowManager.LayoutParams(\r\n                    WindowManager.LayoutParams.MATCH_PARENT,\r\n                    WindowManager.LayoutParams.MATCH_PARENT,\r\n                    layoutFlag,\r\n                    WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH or\r\n                            WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN or\r\n                            WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL or\r\n    \r\n                            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\r\n                    PixelFormat.TRANSLUCENT\r\n                )\r\n        }\r\n    } \r\n\r\n","title":"why overlay layout does not work on the system settings app?","body":"<p>I'm currently facing an issue where the overlay layout fails to appear upon launching the system settings app. The intended functionality is reminiscent of an app lock feature: upon tapping the settings app, an overlay layout should activate, requesting a pattern input to initiate the unlocking process. However, I'm unable to achieve this behavior successfully.</p>\n<p>After successfully granting permission for the top app overlay. The desired behavior is similar to an app lock functionality, where upon clicking the settings app, an overlay layout should appear asking for a pattern to unlock.</p>\n<p>While my overlay layouts work seamlessly in various apps, they don't seem to function as intended in the system settings app, particularly on Android versions above 10.</p>\n<pre><code>private fun CheckOverlayPermission() {\n    // Choose a request code\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {\n        // If the permission is not granted, open the overlay permission settings\n        val intent = Intent(\n            Settings.ACTION_MANAGE_OVERLAY_PERMISSION,\n            Uri.parse(&quot;package:$packageName&quot;)\n        )\n        startActivityForResult(intent, overlayPermissionCode)\n    } else {\n        // Permission is already granted or not needed on this version\n        // Your overlay logic here\n    }\n\n}\n// this function to to check the package name if exist in the \ndatabase and show the overlay layout \n\nprivate fun onAppForeground(foregroundAppPackage: String) {\n\n    hideOverlay()\n\n    //UnInstall Application............\n\n    //Lock overlay work\n    if (lockedAppPackageSet.contains(foregroundAppPackage)) {\n        if (appLockerPreferences.getFingerPrintEnabled() || PermissionChecker.checkOverlayPermission(\n                applicationContext\n            ).not()\n        ) {\n            val intent =\n                OverlayValidationActivity.newIntent(applicationContext, foregroundAppPackage)\n            if (lastForegroundAppPackage == applicationContext.packageName) {\n                intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK\n            } else {\n                intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\n            }\n\n            startActivity(intent)\n\n        } else {\n            showOverlay(foregroundAppPackage)\n        }\n    }\n    lastForegroundAppPackage = foregroundAppPackage\n}\n\n// show overlay layout \n\nprivate fun showOverlay(lockedAppPackageName: String) {\n    if (isOverlayShowing.not()) {\n        isOverlayShowing = true\n        overlayView.setHiddenDrawingMode(appLockerPreferences.getHiddenDrawingMode())\n        overlayView.setAppPackageName(lockedAppPackageName)\n        windowManager.addView(overlayView, overlayParams);\n    }\n}\n\n// forground observer to checks the locked apps\n\n\n//         for above 10 or 11\n\n    private fun getForegroundObservableaboveQ(): Flowable&lt;String&gt;? {\n        return Flowable.interval(0, TimeUnit.MILLISECONDS)\n            .filter { PermissionChecker.checkUsageAccessPermission(context) }\n            .map {\n                val mUsageStatsManager =\n                    context.getSystemService(Service.USAGE_STATS_SERVICE) as UsageStatsManager\n                val time = System.currentTimeMillis()\n\n                val usageEvents =\n                    mUsageStatsManager.queryUsageStats(INTERVAL_DAILY, time - 10000, time)\n                val sortedUsageEvents = usageEvents.sortedBy { it.lastTimeUsed }\n                val usageEvent = sortedUsageEvents.lastOrNull()\n\n                UsageEventWrapper(usageEvent)\n            }\n            .filter { it.usageEvent != null }\n            .map { it.usageEvent }\n            .filter { it.packageName != null }\n            .map { it.packageName }\n            .distinctUntilChanged()\n    }\n\n// overlay layouts params\n\n\nobject OverlayViewLayoutParams {\n\n    fun get(): WindowManager.LayoutParams {\n        val layoutFlag: Int = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY\n        } else {\n            WindowManager.LayoutParams.TYPE_PHONE\n        }\n\n\n        return WindowManager.LayoutParams(\n                WindowManager.LayoutParams.MATCH_PARENT,\n                WindowManager.LayoutParams.MATCH_PARENT,\n                layoutFlag,\n                WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH or\n                        WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN or\n                        WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL or\n\n                        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,\n                PixelFormat.TRANSLUCENT\n            )\n    }\n} \n</code></pre>\n"},{"tags":["java","xpath","pmd"],"answers":[{"comments":[{"owner":{"account_id":22162173,"reputation":186,"user_id":16408987,"display_name":"DeLorean"},"score":0,"creation_date":1693531384,"post_id":77004012,"comment_id":135776927,"body_markdown":"Hi Thanks for the answer but the provided Xpath doesn&#39;t seem to work for me","body":"Hi Thanks for the answer but the provided Xpath doesn&#39;t seem to work for me"},{"owner":{"account_id":22162173,"reputation":186,"user_id":16408987,"display_name":"DeLorean"},"score":0,"creation_date":1693531728,"post_id":77004012,"comment_id":135776951,"body_markdown":"PS: I have tried chat-gpt answers as well they don&#39;t work for some reason &#128530;","body":"PS: I have tried chat-gpt answers as well they don&#39;t work for some reason 😒"}],"tags":[],"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693349761,"creation_date":1693349127,"answer_id":77004012,"question_id":76974522,"body_markdown":"I don&#39;t know anything about PMD and didn&#39;t succeed in getting it set up, so here&#39;s a guess based upon my XPath experience:\r\n```xpath\r\n//Name[@Image=&#39;System&#39;]/Name[@Image=&#39;out&#39;]/Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\nAt any point in the tree,  \r\n  look for a Name element with an Image attribute of &quot;System&quot;,  \r\n  find its Name child element with an Image attribute of &quot;out&quot;,  \r\n  find its Name child element with an Image attribute of &quot;println&quot;,\r\n  and it also has a predicate for not having an IfStatement ancestor.\r\n\r\nXPath refresher: https://www.w3schools.com/xml/xpath_syntax.asp","title":"Xpath expression not working to identify print statements in java code using eclipse-PMD","body":"<p>I don't know anything about PMD and didn't succeed in getting it set up, so here's a guess based upon my XPath experience:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>//Name[@Image='System']/Name[@Image='out']/Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<p>At any point in the tree,<br />\nlook for a Name element with an Image attribute of &quot;System&quot;,<br />\nfind its Name child element with an Image attribute of &quot;out&quot;,<br />\nfind its Name child element with an Image attribute of &quot;println&quot;,\nand it also has a predicate for not having an IfStatement ancestor.</p>\n<p>XPath refresher: <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/xml/xpath_syntax.asp</a></p>\n"},{"tags":[],"owner":{"account_id":22162173,"reputation":186,"user_id":16408987,"display_name":"DeLorean"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693542236,"creation_date":1693542236,"answer_id":77020493,"question_id":76974522,"body_markdown":"After 3 days of beating my head, I finally figured it out. I&#39;m not too fond of the documentation of the PMD\r\n\r\nanyways here is the solution\r\n```\r\n//MethodCall[ starts-with(@MethodName, &#39;print&#39;) ]\r\n  /FieldAccess[ @Name = (&#39;err&#39;, &#39;out&#39;) ]\r\n  /TypeExpression[ pmd-java:typeIsExactly(&#39;java.lang.System&#39;) ]\r\n  [not(ancestor::IfStatement[VariableAccess[@Name = &#39;verbose&#39;]])]\r\n```\r\n\r\nThis expression is used to select the print statements in Java code that are not inside an if statement whose condition is not verbose. Let me break it down for you:\r\n\r\n - `//MethodCall[ starts-with(@MethodName, &#39;print&#39;) ]` : This part selects all the method calls that start with the word print, such as println, printf, or printStackTrace.\r\n\r\n- `/FieldAccess[ @Name = (&#39;err&#39;, &#39;out&#39;) ]` : This part selects the field accesses that have the name err or out, such as System.err or System.out.\r\n\r\n- `/TypeExpression[ pmd-java:typeIsExactly(&#39;java.lang.System&#39;) ]` : This part selects the type expressions that are exactly the java.lang.System class, such as System or (System).\r\n\r\n- `[not(ancestor::IfStatement[VariableAccess[@Name != &#39;verbose&#39;]])]` : This part filters out the nodes that have an ancestor (parent, grandparent, etc.) that is an if statement whose condition is a variable access with a name that is not verbose, such as if (DEBUG) or if (flag).","title":"Xpath expression not working to identify print statements in java code using eclipse-PMD","body":"<p>After 3 days of beating my head, I finally figured it out. I'm not too fond of the documentation of the PMD</p>\n<p>anyways here is the solution</p>\n<pre><code>//MethodCall[ starts-with(@MethodName, 'print') ]\n  /FieldAccess[ @Name = ('err', 'out') ]\n  /TypeExpression[ pmd-java:typeIsExactly('java.lang.System') ]\n  [not(ancestor::IfStatement[VariableAccess[@Name = 'verbose']])]\n</code></pre>\n<p>This expression is used to select the print statements in Java code that are not inside an if statement whose condition is not verbose. Let me break it down for you:</p>\n<ul>\n<li><p><code>//MethodCall[ starts-with(@MethodName, 'print') ]</code> : This part selects all the method calls that start with the word print, such as println, printf, or printStackTrace.</p>\n</li>\n<li><p><code>/FieldAccess[ @Name = ('err', 'out') ]</code> : This part selects the field accesses that have the name err or out, such as System.err or System.out.</p>\n</li>\n<li><p><code>/TypeExpression[ pmd-java:typeIsExactly('java.lang.System') ]</code> : This part selects the type expressions that are exactly the java.lang.System class, such as System or (System).</p>\n</li>\n<li><p><code>[not(ancestor::IfStatement[VariableAccess[@Name != 'verbose']])]</code> : This part filters out the nodes that have an ancestor (parent, grandparent, etc.) that is an if statement whose condition is a variable access with a name that is not verbose, such as if (DEBUG) or if (flag).</p>\n</li>\n</ul>\n"}],"owner":{"account_id":22162173,"reputation":186,"user_id":16408987,"display_name":"DeLorean"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77020493,"answer_count":2,"score":2,"last_activity_date":1693542236,"creation_date":1692942222,"question_id":76974522,"body_markdown":"I want to identify print statements that are not inside the conditional statements (i.e., to check if the print statement has any if statement as its ancestor)\r\n\r\nfew test cases are as follows :\r\n\r\n* Identify all the print statements in the snippet below\r\n\r\n```\r\nint x = 5;\r\nint y = 10;\r\nSystem.out.println(&quot;The value of x is &quot; + x);\r\nSystem.out.println(&quot;The value of y is &quot; + y);\r\n```\r\n\r\n\r\n* Ignore the first print statement and identify the second print statement as the second print statement is not inside an if statement.\r\n```\r\nif (x &gt; 10) {\r\n    System.out.println(&quot;x is greater than 10&quot;);\r\n}\r\nSystem.out.println(&quot;This is the end of the program&quot;);\r\n\r\n```\r\n\r\n\r\nI have tried the below Xpath expressions but have had no luck could anyone help me out with it?\r\n\r\n * Expression 1\r\n```\r\n//Name[@Image=&#39;System&#39;]/following-sibling::Name[@Image=&#39;out&#39;]/following-sibling::Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\n * Expression 2\r\n```\r\n//Name[@Image=&#39;System&#39;]/descendant-or-self::Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\n * Expression 3\r\n```\r\n//Name[@Image=&#39;System&#39;]/child::Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\n * Expression 4\r\n```\r\n//attribute::Image[.=&#39;System&#39;]/parent::Name/following-sibling::Name[attribute::Image=&#39;out&#39;]/following-sibling::Name[attribute::Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\n * Expression 5\r\n```\r\n//Name[@Image=&#39;System&#39;]/preceding-sibling::Name[@Image=&#39;out&#39;]/preceding-sibling::Name[@Image=&#39;println&#39;][not(ancestor::IfStatement)]\r\n```\r\n\r\nPlease note I am using PMD rule designer from PMD to test the XPath expressions.\r\n\r\nThanks in advance.\r\n\r\n","title":"Xpath expression not working to identify print statements in java code using eclipse-PMD","body":"<p>I want to identify print statements that are not inside the conditional statements (i.e., to check if the print statement has any if statement as its ancestor)</p>\n<p>few test cases are as follows :</p>\n<ul>\n<li>Identify all the print statements in the snippet below</li>\n</ul>\n<pre><code>int x = 5;\nint y = 10;\nSystem.out.println(&quot;The value of x is &quot; + x);\nSystem.out.println(&quot;The value of y is &quot; + y);\n</code></pre>\n<ul>\n<li>Ignore the first print statement and identify the second print statement as the second print statement is not inside an if statement.</li>\n</ul>\n<pre><code>if (x &gt; 10) {\n    System.out.println(&quot;x is greater than 10&quot;);\n}\nSystem.out.println(&quot;This is the end of the program&quot;);\n\n</code></pre>\n<p>I have tried the below Xpath expressions but have had no luck could anyone help me out with it?</p>\n<ul>\n<li>Expression 1</li>\n</ul>\n<pre><code>//Name[@Image='System']/following-sibling::Name[@Image='out']/following-sibling::Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<ul>\n<li>Expression 2</li>\n</ul>\n<pre><code>//Name[@Image='System']/descendant-or-self::Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<ul>\n<li>Expression 3</li>\n</ul>\n<pre><code>//Name[@Image='System']/child::Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<ul>\n<li>Expression 4</li>\n</ul>\n<pre><code>//attribute::Image[.='System']/parent::Name/following-sibling::Name[attribute::Image='out']/following-sibling::Name[attribute::Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<ul>\n<li>Expression 5</li>\n</ul>\n<pre><code>//Name[@Image='System']/preceding-sibling::Name[@Image='out']/preceding-sibling::Name[@Image='println'][not(ancestor::IfStatement)]\n</code></pre>\n<p>Please note I am using PMD rule designer from PMD to test the XPath expressions.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","maven","jenkins","maven-surefire-plugin"],"comments":[{"owner":{"account_id":4872208,"reputation":1786,"user_id":3928295,"accept_rate":80,"display_name":"Manmohan_singh"},"score":0,"creation_date":1575546328,"post_id":59194387,"comment_id":104607208,"body_markdown":"add more [Error] logs please.","body":"add more [Error] logs please."}],"answers":[{"comments":[{"owner":{"account_id":2869041,"reputation":4363,"user_id":2462759,"accept_rate":52,"display_name":"paul"},"score":2,"creation_date":1583083372,"post_id":59506242,"comment_id":106988821,"body_markdown":"What&#39;s the solution? Didn&#39;t what you are proposing?","body":"What&#39;s the solution? Didn&#39;t what you are proposing?"},{"owner":{"account_id":3277032,"reputation":1073,"user_id":2758738,"display_name":"tibor17"},"score":0,"creation_date":1584840587,"post_id":59506242,"comment_id":107561968,"body_markdown":"Simply, move the file **Learning_Suite.xml** to **src/test/resources** and then the configuration looks like this **&lt;file&gt;src/test/resources/Learning_Suite.xml&lt;/file&gt;**.","body":"Simply, move the file <b>Learning_Suite.xml</b> to <b>src/test/resources</b> and then the configuration looks like this <b>&lt;file&gt;src/test/resources/Learning_Suite.xml&lt;/file&gt;</b>."}],"tags":[],"owner":{"account_id":3277032,"reputation":1073,"user_id":2758738,"display_name":"tibor17"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577482479,"creation_date":1577482479,"answer_id":59506242,"question_id":59194387,"body_markdown":"@Nivi\r\nFirst of all, the rule is not to read all what the people write on the Google because they also write bad pages. The right thing is to read the original tutorial from the Apache Maven.\r\n\r\nCan you read this documentation properly and see all occurences of the word **&quot;suiteXmlFiles&quot;** on the page https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html that these configuration parameters, you have used in your POM, should not be combined.\r\n\r\nNext that you use absolute paths completely breaks all what the Maven is about. Your file **Learning_Suite.xml** should be a realtive path to module&#39;s base dir. Therefore it is a resource file and the configuration looks like this `&lt;file&gt;src/test/resources/suite.xml&lt;/file&gt;` in the documentation:\r\nhttps://maven.apache.org/surefire/maven-surefire-plugin/examples/testng.html\r\n\r\nAdditionally, the version **&lt;java.version&gt;1.8.0_222&lt;/java.version&gt;** is something what nobody should use. This is enough and transparent for every POM:\r\n\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;","title":"Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test (default-test)","body":"<p>@Nivi\nFirst of all, the rule is not to read all what the people write on the Google because they also write bad pages. The right thing is to read the original tutorial from the Apache Maven.</p>\n\n<p>Can you read this documentation properly and see all occurences of the word <strong>\"suiteXmlFiles\"</strong> on the page <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html</a> that these configuration parameters, you have used in your POM, should not be combined.</p>\n\n<p>Next that you use absolute paths completely breaks all what the Maven is about. Your file <strong>Learning_Suite.xml</strong> should be a realtive path to module's base dir. Therefore it is a resource file and the configuration looks like this <code>&lt;file&gt;src/test/resources/suite.xml&lt;/file&gt;</code> in the documentation:\n<a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/testng.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/surefire/maven-surefire-plugin/examples/testng.html</a></p>\n\n<p>Additionally, the version <strong>1.8.0_222</strong> is something what nobody should use. This is enough and transparent for every POM:</p>\n\n<pre><code>&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13133212,"reputation":1,"user_id":9487115,"display_name":"Gabri EL"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585897375,"creation_date":1585895340,"answer_id":61006202,"question_id":59194387,"body_markdown":"    &lt;suiteXmlFile&gt;src/test/resources/${suiteXmlFile}.xml&lt;/suiteXmlFile&gt;\r\n\r\nAny name will have the XML file, the tests will run","title":"Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test (default-test)","body":"<pre><code>&lt;suiteXmlFile&gt;src/test/resources/${suiteXmlFile}.xml&lt;/suiteXmlFile&gt;\n</code></pre>\n\n<p>Any name will have the XML file, the tests will run</p>\n"}],"owner":{"account_id":7170593,"reputation":1,"user_id":5478188,"display_name":"Nivi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8671,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693541255,"creation_date":1575546160,"question_id":59194387,"body_markdown":"I am facing this issue with maven-surefire-plugin 3.0.0-M4 and Maven versions 3.6.3, 3.6.0 and 3.3.9 with jdk1.8.0_222 (Ubuntu 18.0.4). My pom.xml is as follows:\r\n\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\t    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t  &lt;groupId&gt;Expertus&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;Expertus&lt;/artifactId&gt;\r\n\t  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t  &lt;name&gt;ExpertusONE_4.5&lt;/name&gt;\r\n\t  &lt;description&gt;ExpertusONE_4.5&lt;/description&gt;\r\n\t  &lt;dependencies&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t      &lt;version&gt;3.141.59&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n\t      &lt;version&gt;7.0.0&lt;/version&gt;\r\n\t      &lt;scope&gt;test&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n\t      &lt;version&gt;1.2.17&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t      &lt;version&gt;4.1.1&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t      &lt;version&gt;4.1.1&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n\t      &lt;version&gt;3.0.0-M4&lt;/version&gt;\r\n\t      &lt;scope&gt;test&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n\t  &lt;/dependencies&gt;\r\n\t  &lt;packaging&gt;war&lt;/packaging&gt;\r\n\t  &lt;build&gt;\r\n\t    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n\t    &lt;resources&gt;\r\n\t      &lt;resource&gt;\r\n\t        &lt;directory&gt;src&lt;/directory&gt;\r\n\t      &lt;/resource&gt;\r\n\t    &lt;/resources&gt;\r\n\t    &lt;plugins&gt;\r\n\t      &lt;plugin&gt;\r\n\t        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t        &lt;version&gt;3.8.0&lt;/version&gt;\r\n\t        &lt;configuration&gt;\r\n\t          &lt;source&gt;1.8&lt;/source&gt;\r\n\t          &lt;target&gt;1.8&lt;/target&gt;\r\n\t        &lt;/configuration&gt;\r\n\t      &lt;/plugin&gt;\r\n\t      &lt;plugin&gt;\r\n\t        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t        &lt;version&gt;3.0.0-M4&lt;/version&gt;\r\n\t        &lt;configuration&gt;\r\n\t          &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\r\n\t          &lt;includes&gt;\r\n\t            &lt;include&gt;CreateOrganization.java&lt;/include&gt;\r\n\t          &lt;/includes&gt;\r\n\t          &lt;suiteXmlFiles&gt;\r\n\t            &lt;suiteXmlFile&gt;/home/nivedab/Desktop/LocalCode/ExpertusONE_4.5/Learning_Suite.xml&lt;/suiteXmlFile&gt;\r\n\t          &lt;/suiteXmlFiles&gt;\r\n\t        &lt;/configuration&gt;\r\n\t      &lt;/plugin&gt;\r\n\t    &lt;/plugins&gt;\r\n\t  &lt;/build&gt;\r\n\t  &lt;properties&gt;\r\n\t    &lt;java.version&gt;1.8.0_222&lt;/java.version&gt;\r\n\t    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n\t    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\t  &lt;/properties&gt;\r\n\t&lt;/project&gt;\r\n\r\nJenkins output is as follows:\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test\r\n      (default-test) on project Expertus: There are test failures.","title":"Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test (default-test)","body":"<p>I am facing this issue with maven-surefire-plugin 3.0.0-M4 and Maven versions 3.6.3, 3.6.0 and 3.3.9 with jdk1.8.0_222 (Ubuntu 18.0.4). My pom.xml is as follows:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;Expertus&lt;/groupId&gt;\n  &lt;artifactId&gt;Expertus&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;ExpertusONE_4.5&lt;/name&gt;\n  &lt;description&gt;ExpertusONE_4.5&lt;/description&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n      &lt;version&gt;3.141.59&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.testng&lt;/groupId&gt;\n      &lt;artifactId&gt;testng&lt;/artifactId&gt;\n      &lt;version&gt;7.0.0&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n      &lt;version&gt;1.2.17&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n      &lt;artifactId&gt;poi&lt;/artifactId&gt;\n      &lt;version&gt;4.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n      &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n      &lt;version&gt;4.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0-M4&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;build&gt;\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n    &lt;resources&gt;\n      &lt;resource&gt;\n        &lt;directory&gt;src&lt;/directory&gt;\n      &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M4&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\n          &lt;includes&gt;\n            &lt;include&gt;CreateOrganization.java&lt;/include&gt;\n          &lt;/includes&gt;\n          &lt;suiteXmlFiles&gt;\n            &lt;suiteXmlFile&gt;/home/nivedab/Desktop/LocalCode/ExpertusONE_4.5/Learning_Suite.xml&lt;/suiteXmlFile&gt;\n          &lt;/suiteXmlFiles&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;properties&gt;\n    &lt;java.version&gt;1.8.0_222&lt;/java.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Jenkins output is as follows:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test\n  (default-test) on project Expertus: There are test failures.\n</code></pre>\n"},{"tags":["java","fonts","pdfbox"],"answers":[{"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":2,"creation_date":1634698689,"post_id":69636858,"comment_id":123092484,"body_markdown":"3.0.0 has a different API.","body":"3.0.0 has a different API."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1634716962,"post_id":69636858,"comment_id":123096847,"body_markdown":"https://pdfbox.apache.org/3.0/migration.html","body":"<a href=\"https://pdfbox.apache.org/3.0/migration.html\" rel=\"nofollow noreferrer\">pdfbox.apache.org/3.0/migration.html</a>"}],"tags":[],"owner":{"account_id":15306923,"reputation":35,"user_id":11043320,"display_name":"A. O&#39;Mary"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634672749,"creation_date":1634672749,"answer_id":69636858,"question_id":69635887,"body_markdown":"I removed version 3.0.0-alpha2 and added 2.0.24 and was able to pick the font. 3.0.0-alpha2 was not working for me.","title":"HELVETICA cannot be resolved or is not a field","body":"<p>I removed version 3.0.0-alpha2 and added 2.0.24 and was able to pick the font. 3.0.0-alpha2 was not working for me.</p>\n"},{"tags":[],"owner":{"account_id":25824501,"reputation":71,"user_id":19562950,"display_name":"HS Nain."},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1693540878,"creation_date":1693540878,"answer_id":77020431,"question_id":69635887,"body_markdown":"Use this line of code instead.\r\n\r\n     contentStream.setFont(new PDType1Font(Standard14Fonts.FontName.HELVETICA), 14);\r\n\r\n","title":"HELVETICA cannot be resolved or is not a field","body":"<p>Use this line of code instead.</p>\n<pre><code> contentStream.setFont(new PDType1Font(Standard14Fonts.FontName.HELVETICA), 14);\n</code></pre>\n"}],"owner":{"account_id":15306923,"reputation":35,"user_id":11043320,"display_name":"A. O&#39;Mary"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2438,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693540878,"creation_date":1634667441,"question_id":69635887,"body_markdown":"I am following a tutorial online. I am working with PDFBox with Eclipse and am having issues with loading the font that is suppose to be in the libraries. I&#39;ve loaded all 9 jars into my external libraries and the different fonts give me the same &quot;cannot be resolved or is not a field&quot;.\r\n```\r\nimport java.io.IOException;  \r\nimport org.apache.pdfbox.pdmodel.*;\r\nimport org.apache.pdfbox.pdmodel.font.PDType1Font;\r\nimport org.apache.pdfbox.pdmodel.font.PDFont;\r\n\r\npublic class PCSRR {\r\n\t\r\n\tpublic static void main(String[] args)throws IOException {\r\n\t     PDDocument doc = new PDDocument();   \r\n\t     PDPage blankPage = new PDPage();  \r\n\t\t doc.addPage( blankPage );  \r\n\t\t \r\n\t\t PDPage page = doc.getPage(1);  \r\n         PDPageContentStream contentStream = new PDPageContentStream(doc, page);  \r\n         \r\n         //Begin the Content stream   \r\n         contentStream.beginText();   \r\n         contentStream.setFont(PDType1Font.HELVETICA , 14);\r\n         contentStream.newLineAtOffset(20, 450);  \r\n         \tString text = &quot;Hi!!! This is the first sample PDF document.&quot;;  \r\n         contentStream.showText(text);        \r\n         contentStream.endText();  \r\n         \tSystem.out.println(&quot;New Text Content is added in the PDF Document.&quot;);  \r\n         contentStream.close();  \r\n         \r\n         doc.save(&quot;C:\\\\Users\\\\Aaron\\\\Desktop\\\\pdfbox\\\\practice.pdf&quot;);  \r\n\t\t\tSystem.out.println(&quot;PDF created&quot;); \r\n\t\t doc.close();  \r\n\t}\r\n}\r\n```\r\n[![External Jars][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xENq3.png","title":"HELVETICA cannot be resolved or is not a field","body":"<p>I am following a tutorial online. I am working with PDFBox with Eclipse and am having issues with loading the font that is suppose to be in the libraries. I've loaded all 9 jars into my external libraries and the different fonts give me the same &quot;cannot be resolved or is not a field&quot;.</p>\n<pre><code>import java.io.IOException;  \nimport org.apache.pdfbox.pdmodel.*;\nimport org.apache.pdfbox.pdmodel.font.PDType1Font;\nimport org.apache.pdfbox.pdmodel.font.PDFont;\n\npublic class PCSRR {\n    \n    public static void main(String[] args)throws IOException {\n         PDDocument doc = new PDDocument();   \n         PDPage blankPage = new PDPage();  \n         doc.addPage( blankPage );  \n         \n         PDPage page = doc.getPage(1);  \n         PDPageContentStream contentStream = new PDPageContentStream(doc, page);  \n         \n         //Begin the Content stream   \n         contentStream.beginText();   \n         contentStream.setFont(PDType1Font.HELVETICA , 14);\n         contentStream.newLineAtOffset(20, 450);  \n            String text = &quot;Hi!!! This is the first sample PDF document.&quot;;  \n         contentStream.showText(text);        \n         contentStream.endText();  \n            System.out.println(&quot;New Text Content is added in the PDF Document.&quot;);  \n         contentStream.close();  \n         \n         doc.save(&quot;C:\\\\Users\\\\Aaron\\\\Desktop\\\\pdfbox\\\\practice.pdf&quot;);  \n            System.out.println(&quot;PDF created&quot;); \n         doc.close();  \n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/xENq3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xENq3.png\" alt=\"External Jars\" /></a></p>\n"},{"tags":["java","lombok","non-nullable","java-annotations","nullaway"],"comments":[{"owner":{"account_id":1880443,"reputation":11,"user_id":1700773,"display_name":"user1700773"},"score":0,"creation_date":1693524337,"post_id":77019739,"comment_id":135776430,"body_markdown":"From the docs: &quot;@RequiredArgsConstructor generates a constructor with 1 parameter for each field that requires special handling. All non-initialized final fields get a parameter, as well as any fields that are marked as @NonNull that aren&#39;t initialized where they are declared.&quot;\n\nEssentially what I&#39;d like to do is change what it means to &quot;require special handling&quot;.\n\nhttps://projectlombok.org/features/constructor","body":"From the docs: &quot;@RequiredArgsConstructor generates a constructor with 1 parameter for each field that requires special handling. All non-initialized final fields get a parameter, as well as any fields that are marked as @NonNull that aren&#39;t initialized where they are declared.&quot;  Essentially what I&#39;d like to do is change what it means to &quot;require special handling&quot;.  <a href=\"https://projectlombok.org/features/constructor\" rel=\"nofollow noreferrer\">projectlombok.org/features/constructor</a>"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1693531025,"post_id":77019739,"comment_id":135776889,"body_markdown":"Did you read [this section](https://github.com/uber/NullAway#lombok) of the NullAway readme?","body":"Did you read <a href=\"https://github.com/uber/NullAway#lombok\" rel=\"nofollow noreferrer\">this section</a> of the NullAway readme?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693540603,"creation_date":1693540603,"answer_id":77020418,"question_id":77019739,"body_markdown":"Make a text file and name it `lombok.config`. Inside, stick some lines of text. See [the documentation](https://projectlombok.org/features/configuration#addNullAnnotations) of the feature. You can tell lombok about your nullable annotations. You can also tell it to add `@Generated` annotations which [NullAway understands](https://github.com/uber/NullAway#lombok) - thanks to @Sweeper who linked to that section of the NullAway docs in the comments.\r\n\r\nlombok.config can be in a package, or any parent directory of it; even `/` / `C:\\` though that&#39;d perhaps be a bit weird. Generally you&#39;d put this either in `projectroot` or `projectroot/src`.","title":"How to use Lombok&#39;s RequiredArgsConstructor with Nullaway?","body":"<p>Make a text file and name it <code>lombok.config</code>. Inside, stick some lines of text. See <a href=\"https://projectlombok.org/features/configuration#addNullAnnotations\" rel=\"nofollow noreferrer\">the documentation</a> of the feature. You can tell lombok about your nullable annotations. You can also tell it to add <code>@Generated</code> annotations which <a href=\"https://github.com/uber/NullAway#lombok\" rel=\"nofollow noreferrer\">NullAway understands</a> - thanks to @Sweeper who linked to that section of the NullAway docs in the comments.</p>\n<p>lombok.config can be in a package, or any parent directory of it; even <code>/</code> / <code>C:\\</code> though that'd perhaps be a bit weird. Generally you'd put this either in <code>projectroot</code> or <code>projectroot/src</code>.</p>\n"}],"owner":{"account_id":1880443,"reputation":11,"user_id":1700773,"display_name":"user1700773"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693540603,"creation_date":1693523724,"question_id":77019739,"body_markdown":"We&#39;re trying to add &quot;Nullaway&quot; (https://github.com/uber/NullAway) to our repo. This is a tool that assumes everything not annotated with @Nullable can&#39;t be null and enforces it in compile time. \r\n\r\nWe also use Lombok, with focus on @Data. Lombok decides which fields to add to the RequiredArgsConstructor based on a @NonNull annotation. Furthermore, Nullaway requires that all constructurs set a value to all the fields not marked as @Nullable.\r\n\r\nOur issue is - we don&#39;t wish to annotate all fields (both with @Nonnull and @Nullable), as it&#39;s redundant. We&#39;d like to have one of them be a &quot;default&quot; (preferably the @Nonnull option).\r\n\r\nHow can we solve this? An ideal solution would be to configure the RequiredArgsConstructor to treat any field not marked as @Nullable as required, but that option doesn&#39;t exist. We&#39;re open to any and all creative ideas.\r\n\r\nI tried looking for such a configuration in Lombok, which doesn&#39;t exist. I also tried annotating at the class level to no avail.","title":"How to use Lombok&#39;s RequiredArgsConstructor with Nullaway?","body":"<p>We're trying to add &quot;Nullaway&quot; (<a href=\"https://github.com/uber/NullAway\" rel=\"nofollow noreferrer\">https://github.com/uber/NullAway</a>) to our repo. This is a tool that assumes everything not annotated with @Nullable can't be null and enforces it in compile time.</p>\n<p>We also use Lombok, with focus on @Data. Lombok decides which fields to add to the RequiredArgsConstructor based on a @NonNull annotation. Furthermore, Nullaway requires that all constructurs set a value to all the fields not marked as @Nullable.</p>\n<p>Our issue is - we don't wish to annotate all fields (both with @Nonnull and @Nullable), as it's redundant. We'd like to have one of them be a &quot;default&quot; (preferably the @Nonnull option).</p>\n<p>How can we solve this? An ideal solution would be to configure the RequiredArgsConstructor to treat any field not marked as @Nullable as required, but that option doesn't exist. We're open to any and all creative ideas.</p>\n<p>I tried looking for such a configuration in Lombok, which doesn't exist. I also tried annotating at the class level to no avail.</p>\n"},{"tags":["java","lombok","builder"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693462715,"post_id":77013246,"comment_id":135764702,"body_markdown":"Why would you have separate `userEmail` and `email` properties?","body":"Why would you have separate <code>userEmail</code> and <code>email</code> properties?"},{"owner":{"account_id":11293769,"reputation":13,"user_id":8281866,"display_name":"ragingDino"},"score":0,"creation_date":1693464767,"post_id":77013246,"comment_id":135765032,"body_markdown":"It was just for example purpose, in my use case I have a class variable whose value would depend on one of these inputs","body":"It was just for example purpose, in my use case I have a class variable whose value would depend on one of these inputs"},{"owner":{"account_id":11293769,"reputation":13,"user_id":8281866,"display_name":"ragingDino"},"score":0,"creation_date":1693465090,"post_id":77013246,"comment_id":135765074,"body_markdown":"I updated the question with the real use case","body":"I updated the question with the real use case"}],"answers":[{"comments":[{"owner":{"account_id":11293769,"reputation":13,"user_id":8281866,"display_name":"ragingDino"},"score":0,"creation_date":1693464091,"post_id":77013307,"comment_id":135764903,"body_markdown":"Thanks, I will try this out! Yes, that field `userEmail`  was just for example purposes, my use case here is to assign a class variable based on other input variables. I want that class variable to not be initialized via the Builder","body":"Thanks, I will try this out! Yes, that field <code>userEmail</code>  was just for example purposes, my use case here is to assign a class variable based on other input variables. I want that class variable to not be initialized via the Builder"},{"owner":{"account_id":11293769,"reputation":13,"user_id":8281866,"display_name":"ragingDino"},"score":0,"creation_date":1693465319,"post_id":77013307,"comment_id":135765116,"body_markdown":"I updated the question with the actual use case and the variable I want to set","body":"I updated the question with the actual use case and the variable I want to set"},{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":0,"creation_date":1693466585,"post_id":77013307,"comment_id":135765378,"body_markdown":"Updated answer accordingly.","body":"Updated answer accordingly."},{"owner":{"account_id":11293769,"reputation":13,"user_id":8281866,"display_name":"ragingDino"},"score":0,"creation_date":1693495106,"post_id":77013307,"comment_id":135771548,"body_markdown":"This looks good! It works perfectly!","body":"This looks good! It works perfectly!"}],"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693535372,"creation_date":1693463216,"answer_id":77013307,"question_id":77013246,"body_markdown":"You could use Lombok&#39;s [GetterLazy](https://projectlombok.org/features/GetterLazy)\r\n\r\nFrom the doc,\r\n&gt; You can let lombok generate a getter which will calculate a value once, the first time this getter is called, and cache it from then on. [...] To use this feature, create a private final variable, initialize it with the expression that&#39;s expensive to run, and annotate your field with @Getter(lazy=true). The field will be hidden from the rest of your code, and the expression will be evaluated no more than once, when the getter is first called. \r\n\r\n```\r\n@Builder\r\nprivate static class User {\r\n    private String userName;\r\n    private String email;\r\n    private String device;\r\n    @Getter(lazy=true)\r\n    private final String deviceType = deriveDeviceType();\r\n\r\n    private String deriveDeviceType() {\r\n        Objects.requireNonNull(device);\r\n        switch (device) {\r\n            case &quot;iPhone&quot;: return &quot;mobile&quot;;\r\n            case &quot;Kindle&quot;: return &quot;tablet&quot;;\r\n            // and so on...\r\n        }\r\n        throw new RuntimeException(&quot;Invalid value set for device&quot;);\r\n    }\r\n}\r\n```\r\nWith this, the `deviceType` field won&#39;t be available to be set via the builder.\r\n\r\nNote that the field will be initialized *only* when the getter (`getDeviceType()`) is called and not when the field is accessed directly.\r\n\r\n```\r\nUser u = User.builder()\r\n            .userName(&quot;test-name&quot;)\r\n            .email(&quot;test-email&quot;)\r\n            .device(&quot;Kindle&quot;)\r\n            .build();\r\n\r\nSystem.out.println(user.getDeviceType()); //tablet \r\n```\r\n\r\nSince it is possible to pass an invalid value for device, I suggest you to look into using *enums* to model `device` and `deviceType` (if possible).","title":"Update a different variable in the class with Java Lombok Builder","body":"<p>You could use Lombok's <a href=\"https://projectlombok.org/features/GetterLazy\" rel=\"nofollow noreferrer\">GetterLazy</a></p>\n<p>From the doc,</p>\n<blockquote>\n<p>You can let lombok generate a getter which will calculate a value once, the first time this getter is called, and cache it from then on. [...] To use this feature, create a private final variable, initialize it with the expression that's expensive to run, and annotate your field with @Getter(lazy=true). The field will be hidden from the rest of your code, and the expression will be evaluated no more than once, when the getter is first called.</p>\n</blockquote>\n<pre><code>@Builder\nprivate static class User {\n    private String userName;\n    private String email;\n    private String device;\n    @Getter(lazy=true)\n    private final String deviceType = deriveDeviceType();\n\n    private String deriveDeviceType() {\n        Objects.requireNonNull(device);\n        switch (device) {\n            case &quot;iPhone&quot;: return &quot;mobile&quot;;\n            case &quot;Kindle&quot;: return &quot;tablet&quot;;\n            // and so on...\n        }\n        throw new RuntimeException(&quot;Invalid value set for device&quot;);\n    }\n}\n</code></pre>\n<p>With this, the <code>deviceType</code> field won't be available to be set via the builder.</p>\n<p>Note that the field will be initialized <em>only</em> when the getter (<code>getDeviceType()</code>) is called and not when the field is accessed directly.</p>\n<pre><code>User u = User.builder()\n            .userName(&quot;test-name&quot;)\n            .email(&quot;test-email&quot;)\n            .device(&quot;Kindle&quot;)\n            .build();\n\nSystem.out.println(user.getDeviceType()); //tablet \n</code></pre>\n<p>Since it is possible to pass an invalid value for device, I suggest you to look into using <em>enums</em> to model <code>device</code> and <code>deviceType</code> (if possible).</p>\n"}],"owner":{"account_id":11293769,"reputation":13,"user_id":8281866,"display_name":"ragingDino"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77013307,"answer_count":1,"score":0,"last_activity_date":1693539949,"creation_date":1693462632,"question_id":77013246,"body_markdown":"I have the following class\r\n\r\n```\r\n@Builder\r\npublic class User {\r\n\r\n    private String userName;\r\n    private String email;\r\n    private String device;\r\n    private String deviceType;\r\n}\r\n```\r\n\r\nI want to set the value `deviceType` based on the inputs I get for `device`. Is that possible with `Builder`? I don&#39;t want to set the value of `deviceType` directly.\r\n\r\nExample\r\n\r\n```\r\nif (device == &quot;iPhone&quot;) {\r\n    this.deviceType = &quot;mobile&quot;\r\n} else if (device == &quot;Kindle&quot;) {\r\n    this.deviceType = &quot;tablet&quot;\r\n} .. and so on\r\n```\r\nIdeally, I want this to be done in the constructor one time\r\n\r\nI am currently building the object like this but I am not sure how to initialize the `userEmail` field.\r\n\r\n```\r\nUser.builder()\r\n.userName(&quot;sample-username)\r\n.email(&quot;sample-email&quot;)\r\n.device(&quot;iPhone&quot;)\r\n.build();\r\n```","title":"Update a different variable in the class with Java Lombok Builder","body":"<p>I have the following class</p>\n<pre><code>@Builder\npublic class User {\n\n    private String userName;\n    private String email;\n    private String device;\n    private String deviceType;\n}\n</code></pre>\n<p>I want to set the value <code>deviceType</code> based on the inputs I get for <code>device</code>. Is that possible with <code>Builder</code>? I don't want to set the value of <code>deviceType</code> directly.</p>\n<p>Example</p>\n<pre><code>if (device == &quot;iPhone&quot;) {\n    this.deviceType = &quot;mobile&quot;\n} else if (device == &quot;Kindle&quot;) {\n    this.deviceType = &quot;tablet&quot;\n} .. and so on\n</code></pre>\n<p>Ideally, I want this to be done in the constructor one time</p>\n<p>I am currently building the object like this but I am not sure how to initialize the <code>userEmail</code> field.</p>\n<pre><code>User.builder()\n.userName(&quot;sample-username)\n.email(&quot;sample-email&quot;)\n.device(&quot;iPhone&quot;)\n.build();\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"comments":[{"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"score":0,"creation_date":1693564604,"post_id":77020387,"comment_id":135781108,"body_markdown":"Thank you @Ken Chan it seems that `order` param is no longer available, since `@ EnableGlobalMethodSecurity` is deprecated.  And is it a &quot;hack&quot; or is it something common in large production applications?","body":"Thank you @Ken Chan it seems that <code>order</code> param is no longer available, since <code>@ EnableGlobalMethodSecurity</code> is deprecated.  And is it a &quot;hack&quot; or is it something common in large production applications?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1693582962,"post_id":77020387,"comment_id":135784778,"body_markdown":"Use `@EnableMethodSecurity` instead but not sure what is the replacement of the order  attribute. But it is still the same if you can make sure `@Transactional` to execute at the very beginning by setting it to have a very large priority.","body":"Use <code>@EnableMethodSecurity</code> instead but not sure what is the replacement of the order  attribute. But it is still the same if you can make sure <code>@Transactional</code> to execute at the very beginning by setting it to have a very large priority."},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1693583084,"post_id":77020387,"comment_id":135784803,"body_markdown":"what cause you think it is a hack ? i just use it very naturally based on the feature provided by spring and never use it in a strange way","body":"what cause you think it is a hack ? i just use it very naturally based on the feature provided by spring and never use it in a strange way"}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693539903,"creation_date":1693539903,"answer_id":77020387,"question_id":77019729,"body_markdown":"Assuming you are using JPA , you can make sure `@Transactional` is executed before `@PreAuthorize` such that both business service method and the `@PreAuthorize` method are running in the same transaction as JPA will cache the entity that is fetched by Id into the 1st level cache for the same transaction. \r\n\r\nThat means in the `@PreAuthorize` method , it fetches the entity from DB and then will put it in the 1st level cache. Then later in the business method, it  will check if the 1st level cache contain the entity with the same Id. If yes it will get it without hitting DB.\r\n\r\nYou can configure the execution order of `@Transactional` and `@PreAuthorize`  through `@EnableTransactionManagement` and `@EnableGlobalMethodSecurity` like :\r\n\r\n``` java \r\n@EnableTransactionManagement(order=1)\r\n@EnableGlobalMethodSecurity(order=2)\r\n@Configuration\r\npublic class AppConfig {\r\n\r\n\r\n}\r\n```\r\n\r\nGuess that the smaller order value will execute first but I leave it to you to confirm.\r\n","title":"@PreAuthorize Spring Security - avoid duplicate queries to bdd","body":"<p>Assuming you are using JPA , you can make sure <code>@Transactional</code> is executed before <code>@PreAuthorize</code> such that both business service method and the <code>@PreAuthorize</code> method are running in the same transaction as JPA will cache the entity that is fetched by Id into the 1st level cache for the same transaction.</p>\n<p>That means in the <code>@PreAuthorize</code> method , it fetches the entity from DB and then will put it in the 1st level cache. Then later in the business method, it  will check if the 1st level cache contain the entity with the same Id. If yes it will get it without hitting DB.</p>\n<p>You can configure the execution order of <code>@Transactional</code> and <code>@PreAuthorize</code>  through <code>@EnableTransactionManagement</code> and <code>@EnableGlobalMethodSecurity</code> like :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableTransactionManagement(order=1)\n@EnableGlobalMethodSecurity(order=2)\n@Configuration\npublic class AppConfig {\n\n\n}\n</code></pre>\n<p>Guess that the smaller order value will execute first but I leave it to you to confirm.</p>\n"}],"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693539903,"creation_date":1693523526,"question_id":77019729,"body_markdown":"I have an authorization class (Spring `@Component`) with methods that take an entity as a param and check whether the current user has the necessary rights to access it.\r\n\r\n\r\n\r\nSo first, I annotate my controller&#39;s method to check rights:\r\n```java\r\n@PreAuthorize(&quot;@authorizationComponent.hasPermission(@myService.findById(#entityId))&quot;)\r\n```\r\n\r\nThis makes ***an initial query*** to the database to retrieve the entity via `findById`.\r\n\r\nThen, once again, I want to retrieve the entity in the body of the method to perform my route logic:\r\n\r\n```java\r\n// can be inside a service method\r\nMyEntity entity = this.myService.findById(entityId)\r\n```\r\n\r\nThis makes ***a second request*** to the database.\r\n\r\n**Is this the right way to do things with Spring?**\r\nI know I could, for example, create a method in my authorization component that would return the loaded entity and which I could then call, but is this really the way to go?\r\n\r\nI have complicated requirements for my authorizations, where I sometimes have to check that the entity is owned by a certain relationship to which the user have rights on it... This can quickly become complicated.\r\n\r\n","title":"@PreAuthorize Spring Security - avoid duplicate queries to bdd","body":"<p>I have an authorization class (Spring <code>@Component</code>) with methods that take an entity as a param and check whether the current user has the necessary rights to access it.</p>\n<p>So first, I annotate my controller's method to check rights:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PreAuthorize(&quot;@authorizationComponent.hasPermission(@myService.findById(#entityId))&quot;)\n</code></pre>\n<p>This makes <em><strong>an initial query</strong></em> to the database to retrieve the entity via <code>findById</code>.</p>\n<p>Then, once again, I want to retrieve the entity in the body of the method to perform my route logic:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// can be inside a service method\nMyEntity entity = this.myService.findById(entityId)\n</code></pre>\n<p>This makes <em><strong>a second request</strong></em> to the database.</p>\n<p><strong>Is this the right way to do things with Spring?</strong>\nI know I could, for example, create a method in my authorization component that would return the loaded entity and which I could then call, but is this really the way to go?</p>\n<p>I have complicated requirements for my authorizations, where I sometimes have to check that the entity is owned by a certain relationship to which the user have rights on it... This can quickly become complicated.</p>\n"},{"tags":["java","spring-boot","rest","apache-camel"],"owner":{"account_id":27897187,"reputation":11,"user_id":21302227,"display_name":"simak35"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693538554,"creation_date":1677568579,"question_id":75588910,"body_markdown":"I have defined the following RouteBuilder in Apache Camel framework:\r\n\r\n\r\n```\r\n@RequiredArgsConstructor\r\n@Component\r\npublic class FilesRouteBuilder extends RouteBuilder {\r\n\r\n\t@Override\r\n\tpublic void configure() throws Exception {\r\n\t\trest()\r\n\t\t\t\t.post(&quot;/files/{version}/file-import&quot;)\r\n\t\t\t\t.id(FilesConstants.REST_FILE_IMPORT_ROUTE)\r\n\t\t\t\t.produces(&quot;application/zip&quot;)\r\n\t\t\t\t.consumes(&quot;multipart/form-data&quot;)\r\n\t\t\t\t.route()\r\n\t\t\t\t.doTry()\r\n\t\t\t\t.to(FilesConstants.FILE_IMPORT)\r\n\r\n\t\tString apiEndpoint = RouteUtil.toHttpRoute(&quot;https://localhost:8080&quot;);\r\n\r\n\t\tfrom(FilesConstants.FILE_IMPORT)\r\n\t\t\t\t.id(FilesConstants.FILE_IMPORT)\r\n\t\t\t\t.setHeader(Exchange.HTTP_PATH, constant(String.format(&quot;/cust/files/%s/file-import&quot;, &quot;v1.56&quot;)))\r\n\t\t\t\t.setHeader(Exchange.HTTP_METHOD, constant(HttpMethod.POST))\r\n\t\t\t\t.process(exchange -&gt; {\r\n\t\t\t\t\tFileImportRequest fileImportRequest = exchange.getMessage().getBody(FileImportRequest.class);\r\n\t\t\t\t})\r\n\t\t\t\t.to(RouteHelper.createToEndpoint(apiEndpoint));\r\n\r\n\t}\r\n}\r\n```\r\nIn RouteBuilder above I am exposing rest api endpoint for files import. This is request body I get:\r\n\r\n```\r\n----------------------------894364363213737457457453\r\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;some_file.csv&quot;\r\nContent-Type: text/csv\r\n\r\n7;abcdefe;8efsefs4;34\r\n----------------------------894364363213737457457453\r\nContent-Disposition: form-data; name=&quot;configuration&quot;\r\nContent-Type: application/json\r\n\r\n{&quot;fileTypeId&quot;:19}\r\n----------------------------894364363213737457457453--\r\n```\r\n\r\n\r\n\r\nMy questions are:\r\n1. How can I modify &quot;configuration&quot; content part in processor block to add another parameter in json body to have something like that:\r\n```\r\n----------------------------894364363213737457457453\r\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;some_file.csv&quot;\r\nContent-Type: text/csv\r\n\r\n7;abcdefe;8efsefs4;34\r\n----------------------------894364363213737457457453\r\nContent-Disposition: form-data; name=&quot;configuration&quot;\r\nContent-Type: application/json\r\n\r\n{&quot;fileTypeId&quot;:19, &quot;sample_second_name&quot;:&quot;abcdefg&quot;}\r\n----------------------------894364363213737457457453--\r\n```\r\n2. How to assign request body to some entity class?\r\n\r\n\r\n\r\nI have tried to assign request body to FileImportRequest that has following definition:\r\n\r\n```\r\n@Value\r\n@Data\r\n@AllArgsConstructor\r\npublic class FileImportRequest implements Serializable {\r\n\r\n\t\tMultipartFile file;\r\n\r\n\t\tConfiguration configuration;\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n@RequiredArgsConstructor\r\n@Value\r\n@Data\r\npublic class Configuration implements Serializable {\r\n\r\n\tLong fileTypeId;\r\n\r\n}\r\n```\r\n\r\nbut it returns null value in processor block.\r\n","title":"How to retrieve individual parts of multipart/form-data request body in Apache Camel framework?","body":"<p>I have defined the following RouteBuilder in Apache Camel framework:</p>\n<pre><code>@RequiredArgsConstructor\n@Component\npublic class FilesRouteBuilder extends RouteBuilder {\n\n    @Override\n    public void configure() throws Exception {\n        rest()\n                .post(&quot;/files/{version}/file-import&quot;)\n                .id(FilesConstants.REST_FILE_IMPORT_ROUTE)\n                .produces(&quot;application/zip&quot;)\n                .consumes(&quot;multipart/form-data&quot;)\n                .route()\n                .doTry()\n                .to(FilesConstants.FILE_IMPORT)\n\n        String apiEndpoint = RouteUtil.toHttpRoute(&quot;https://localhost:8080&quot;);\n\n        from(FilesConstants.FILE_IMPORT)\n                .id(FilesConstants.FILE_IMPORT)\n                .setHeader(Exchange.HTTP_PATH, constant(String.format(&quot;/cust/files/%s/file-import&quot;, &quot;v1.56&quot;)))\n                .setHeader(Exchange.HTTP_METHOD, constant(HttpMethod.POST))\n                .process(exchange -&gt; {\n                    FileImportRequest fileImportRequest = exchange.getMessage().getBody(FileImportRequest.class);\n                })\n                .to(RouteHelper.createToEndpoint(apiEndpoint));\n\n    }\n}\n</code></pre>\n<p>In RouteBuilder above I am exposing rest api endpoint for files import. This is request body I get:</p>\n<pre><code>----------------------------894364363213737457457453\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;some_file.csv&quot;\nContent-Type: text/csv\n\n7;abcdefe;8efsefs4;34\n----------------------------894364363213737457457453\nContent-Disposition: form-data; name=&quot;configuration&quot;\nContent-Type: application/json\n\n{&quot;fileTypeId&quot;:19}\n----------------------------894364363213737457457453--\n</code></pre>\n<p>My questions are:</p>\n<ol>\n<li>How can I modify &quot;configuration&quot; content part in processor block to add another parameter in json body to have something like that:</li>\n</ol>\n<pre><code>----------------------------894364363213737457457453\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;some_file.csv&quot;\nContent-Type: text/csv\n\n7;abcdefe;8efsefs4;34\n----------------------------894364363213737457457453\nContent-Disposition: form-data; name=&quot;configuration&quot;\nContent-Type: application/json\n\n{&quot;fileTypeId&quot;:19, &quot;sample_second_name&quot;:&quot;abcdefg&quot;}\n----------------------------894364363213737457457453--\n</code></pre>\n<ol start=\"2\">\n<li>How to assign request body to some entity class?</li>\n</ol>\n<p>I have tried to assign request body to FileImportRequest that has following definition:</p>\n<pre><code>@Value\n@Data\n@AllArgsConstructor\npublic class FileImportRequest implements Serializable {\n\n        MultipartFile file;\n\n        Configuration configuration;\n\n}\n</code></pre>\n<pre><code>@RequiredArgsConstructor\n@Value\n@Data\npublic class Configuration implements Serializable {\n\n    Long fileTypeId;\n\n}\n</code></pre>\n<p>but it returns null value in processor block.</p>\n"},{"tags":["java","logging","fluent"],"answers":[{"tags":[],"owner":{"account_id":2158186,"reputation":302,"user_id":1912944,"display_name":"David"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693536586,"creation_date":1693536586,"answer_id":77020243,"question_id":75630967,"body_markdown":"In general I would not advise turning off the context segment altogether (some code in libraries you don&#39;t control may want to provide useful data using it).\r\n\r\nThere is, internal to Google, a customizable formatter which I think would do what you want. You could trying raising an issue and asking them to open-source it (I no longer work at Google so cannot help directly).\r\n\r\nFailing that, it&#39;s not actually that difficult to replace the default backend with an alternative, which uses a different &quot;MetadataProcessor&quot; and can be configured to ignore certain metadata keys.\r\n\r\nIf you are using the JDK backend, you would be able to easily replace `SimpleBackendFactory` and have your own version of `SimpleLoggerBackend` and `SimpleLogRecord` to go with it.\r\n\r\nIn your version of `SimpleLogRecord` you would overload the method:\r\n\r\n```\r\n  protected LogMessageFormatter getLogMessageFormatter()\r\n```\r\n\r\nAnd return a customized formatter.\r\n\r\nI would start by looking at the following method in `SimpleMessageFormatter`:\r\n\r\n```\r\npublic static LogMessageFormatter getSimpleFormatterIgnoring(MetadataKey&lt;?&gt;... extraIgnoredKeys)\r\n```\r\n\r\nWhich you can pass a list of keys you want ignored (in your case the keys are in `LogContext.Keys.XXX`)\r\n\r\nWhen I wrote Flogger I always envisaged people would want to make their own customized backends, so rather than attempt to add hundreds of flags and options to customize things, I made a lot of helper classes and made it easy to replace the default (simple) backend implementation(s) if they don&#39;t suit your needs.","title":"Can Google flogger be configured to omit CONTEXT from being included in log","body":"<p>In general I would not advise turning off the context segment altogether (some code in libraries you don't control may want to provide useful data using it).</p>\n<p>There is, internal to Google, a customizable formatter which I think would do what you want. You could trying raising an issue and asking them to open-source it (I no longer work at Google so cannot help directly).</p>\n<p>Failing that, it's not actually that difficult to replace the default backend with an alternative, which uses a different &quot;MetadataProcessor&quot; and can be configured to ignore certain metadata keys.</p>\n<p>If you are using the JDK backend, you would be able to easily replace <code>SimpleBackendFactory</code> and have your own version of <code>SimpleLoggerBackend</code> and <code>SimpleLogRecord</code> to go with it.</p>\n<p>In your version of <code>SimpleLogRecord</code> you would overload the method:</p>\n<pre><code>  protected LogMessageFormatter getLogMessageFormatter()\n</code></pre>\n<p>And return a customized formatter.</p>\n<p>I would start by looking at the following method in <code>SimpleMessageFormatter</code>:</p>\n<pre><code>public static LogMessageFormatter getSimpleFormatterIgnoring(MetadataKey&lt;?&gt;... extraIgnoredKeys)\n</code></pre>\n<p>Which you can pass a list of keys you want ignored (in your case the keys are in <code>LogContext.Keys.XXX</code>)</p>\n<p>When I wrote Flogger I always envisaged people would want to make their own customized backends, so rather than attempt to add hundreds of flags and options to customize things, I made a lot of helper classes and made it easy to replace the default (simple) backend implementation(s) if they don't suit your needs.</p>\n"}],"owner":{"account_id":41830,"reputation":1442,"user_id":121678,"accept_rate":42,"display_name":"stanlick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693536586,"creation_date":1677870383,"question_id":75630967,"body_markdown":"We are using the rate limiting support in FluentLogger and this is resulting in spurious output being included with our log messages \r\n\r\n&gt; messages have been saved destined for corp [CONTEXT ratelimit_period=&quot;30 SECONDS [skipped: 6]&quot; ]\r\n\r\nIs there a way to turn this off?","title":"Can Google flogger be configured to omit CONTEXT from being included in log","body":"<p>We are using the rate limiting support in FluentLogger and this is resulting in spurious output being included with our log messages</p>\n<blockquote>\n<p>messages have been saved destined for corp [CONTEXT ratelimit_period=&quot;30 SECONDS [skipped: 6]&quot; ]</p>\n</blockquote>\n<p>Is there a way to turn this off?</p>\n"},{"tags":["java","intellij-idea","java-8","mapstruct"],"comments":[{"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"score":0,"creation_date":1693509457,"post_id":47694501,"comment_id":135774372,"body_markdown":"by side-effect of your question, thank you for helping me learn `expression = &quot;java()&quot;`","body":"by side-effect of your question, thank you for helping me learn <code>expression = &quot;java()&quot;</code>"}],"answers":[{"comments":[{"owner":{"account_id":5169610,"reputation":2584,"user_id":4138572,"accept_rate":60,"display_name":"Vivek Gupta"},"score":0,"creation_date":1512720134,"post_id":47705023,"comment_id":82379830,"body_markdown":"thanks for the inputs @Filip, this seems very close to what I require, there is one more issue that I am facing here, in my real project there are 4 parameters, one entity object and 3 supporting properties, 2 of the three supporting properties are Integer, and there can not be multiple contexts with the same type, I tried making entity as Context and keeping one of the Integer in source but that ways it ignores all the other attributes in entity. \n\nI have updated the code snippet in my question if you could suggest something for this?","body":"thanks for the inputs @Filip, this seems very close to what I require, there is one more issue that I am facing here, in my real project there are 4 parameters, one entity object and 3 supporting properties, 2 of the three supporting properties are Integer, and there can not be multiple contexts with the same type, I tried making entity as Context and keeping one of the Integer in source but that ways it ignores all the other attributes in entity.   I have updated the code snippet in my question if you could suggest something for this?"},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1512751843,"post_id":47705023,"comment_id":82397741,"body_markdown":"I&#39;ve updated the answer. Basically you can replace all the properties that you have with a wrapper class that would represent the `@Context`. That one is much more powerful and allows you to perform a to of things. Have a look at the documentation for [passing context / state objects](http://mapstruct.org/documentation/stable/reference/html/#passing-context)","body":"I&#39;ve updated the answer. Basically you can replace all the properties that you have with a wrapper class that would represent the <code>@Context</code>. That one is much more powerful and allows you to perform a to of things. Have a look at the documentation for <a href=\"http://mapstruct.org/documentation/stable/reference/html/#passing-context\" rel=\"nofollow noreferrer\">passing context / state objects</a>"},{"owner":{"account_id":5169610,"reputation":2584,"user_id":4138572,"accept_rate":60,"display_name":"Vivek Gupta"},"score":0,"creation_date":1512842207,"post_id":47705023,"comment_id":82423520,"body_markdown":"In my application defining a new class for the filter purpose might be tough, however i&#39;ll check for the feasibility, and decide for one of the two, using Expression or defining a Filer. Thanks for your effort and time.","body":"In my application defining a new class for the filter purpose might be tough, however i&#39;ll check for the feasibility, and decide for one of the two, using Expression or defining a Filer. Thanks for your effort and time."},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1512845733,"post_id":47705023,"comment_id":82424565,"body_markdown":"I don&#39;t know your code, so I can&#39;t say. In any case not allowing same types is due to the fact that we can&#39;t really do a proper job in mapping which one woth which. By the way you should accept the answer if it answers your question &#128521;","body":"I don&#39;t know your code, so I can&#39;t say. In any case not allowing same types is due to the fact that we can&#39;t really do a proper job in mapping which one woth which. By the way you should accept the answer if it answers your question 😉"},{"owner":{"account_id":2047476,"reputation":3789,"user_id":1827254,"accept_rate":62,"display_name":"Eselfar"},"score":2,"creation_date":1519295000,"post_id":47705023,"comment_id":84856039,"body_markdown":"Thx a lot, it has helped to me to partially solve my issue. However it didn&#39;t work for me like that. I had to specified the source in `@Mapping(target=&quot;qualified&quot;, qualifiedByName=&quot;checkQualifiedNamed&quot;)`. How can you then pass the 2 parameters to `checkQualified`? (In my case the second parameter is not a @Context)","body":"Thx a lot, it has helped to me to partially solve my issue. However it didn&#39;t work for me like that. I had to specified the source in <code>@Mapping(target=&quot;qualified&quot;, qualifiedByName=&quot;checkQualifiedNamed&quot;)</code>. How can you then pass the 2 parameters to <code>checkQualified</code>? (In my case the second parameter is not a @Context)"}],"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"comment_count":5,"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1512751738,"creation_date":1512686363,"answer_id":47705023,"question_id":47694501,"body_markdown":"Currently MapStruct does not support mapping methods with multiple source properties.\r\n\r\nHowever, in your case you can use the `@Context` from 1.2.0. From what I understand the `projId` and the `code` are there just as helper of the mapping, and they are not used to map target properties from.\r\n\r\nSo you can do something like (It should work in theory):\r\n\r\n\r\n    @Mapper\r\n    public interface OneMapper {\r\n    \r\n        @Mapping(target=&quot;id&quot;, source=&quot;one.id&quot;)\r\n        @Mapping(target=&quot;qualified&quot;, qualifiedByName=&quot;checkQualifiedNamed&quot;)\r\n        OneDto createOne (One one, @Context Integer projId, @Context String code);\r\n    \r\n        @Named(&quot;checkQualifiedNamed&quot;)\r\n        default Boolean checkQualified (One one, @Context Integer projId, @Context String code) {\r\n            if(one.getProjectId() == projId &amp;&amp; one.getCode().equalsIgnoreCase(code)) {\r\n                return Boolean.TRUE;\r\n            }\r\n            return Boolean.FALSE;                   \r\n        }\r\n    }\r\n\r\nAnother alternative would be to extract all those properties into a separate class and pass that along (this would allow for multiple parameters of the same type).\r\n\r\nThe class would look like:\r\n\r\n    public class Filter {\r\n\r\n        private final Integer projId;\r\n        private final Integer val;\r\n        private final String code;\r\n\r\n        public Filter (Integer projId, Integer val, String code) {\r\n            this.projId = projId;\r\n            this.val = val;\r\n            this.code = code;\r\n        }\r\n\r\n        //getters\r\n    }\r\n\r\nYour mapper will then look like:\r\n\r\n\r\n    @Mapper\r\n    public interface OneMapper {\r\n    \r\n        @Mapping(target=&quot;id&quot;, source=&quot;one.id&quot;)\r\n        @Mapping(target=&quot;qualified&quot;, qualifiedByName=&quot;checkQualifiedNamed&quot;)\r\n        OneDto createOne (One one, @Context Filter filter);\r\n    \r\n        @Named(&quot;checkQualifiedNamed&quot;)\r\n        default Boolean checkQualified (One one, @Context Filter filter) {\r\n            if(one.getProjectId() == filter.getProjId() &amp;&amp; one.getVal() == filter.getVal() &amp;&amp; one.getCode().equalsIgnoreCase(filter.getCode())) {\r\n                return Boolean.TRUE;\r\n            }\r\n            return Boolean.FALSE;                   \r\n        }\r\n    }\r\n\r\nYou can then call the mapper like: `mapper.createOne(one, new Filter(projId, val, code));`\r\n","title":"MapStruct QualifiedByName with multiple parameters","body":"<p>Currently MapStruct does not support mapping methods with multiple source properties.</p>\n\n<p>However, in your case you can use the <code>@Context</code> from 1.2.0. From what I understand the <code>projId</code> and the <code>code</code> are there just as helper of the mapping, and they are not used to map target properties from.</p>\n\n<p>So you can do something like (It should work in theory):</p>\n\n<pre><code>@Mapper\npublic interface OneMapper {\n\n    @Mapping(target=\"id\", source=\"one.id\")\n    @Mapping(target=\"qualified\", qualifiedByName=\"checkQualifiedNamed\")\n    OneDto createOne (One one, @Context Integer projId, @Context String code);\n\n    @Named(\"checkQualifiedNamed\")\n    default Boolean checkQualified (One one, @Context Integer projId, @Context String code) {\n        if(one.getProjectId() == projId &amp;&amp; one.getCode().equalsIgnoreCase(code)) {\n            return Boolean.TRUE;\n        }\n        return Boolean.FALSE;                   \n    }\n}\n</code></pre>\n\n<p>Another alternative would be to extract all those properties into a separate class and pass that along (this would allow for multiple parameters of the same type).</p>\n\n<p>The class would look like:</p>\n\n<pre><code>public class Filter {\n\n    private final Integer projId;\n    private final Integer val;\n    private final String code;\n\n    public Filter (Integer projId, Integer val, String code) {\n        this.projId = projId;\n        this.val = val;\n        this.code = code;\n    }\n\n    //getters\n}\n</code></pre>\n\n<p>Your mapper will then look like:</p>\n\n<pre><code>@Mapper\npublic interface OneMapper {\n\n    @Mapping(target=\"id\", source=\"one.id\")\n    @Mapping(target=\"qualified\", qualifiedByName=\"checkQualifiedNamed\")\n    OneDto createOne (One one, @Context Filter filter);\n\n    @Named(\"checkQualifiedNamed\")\n    default Boolean checkQualified (One one, @Context Filter filter) {\n        if(one.getProjectId() == filter.getProjId() &amp;&amp; one.getVal() == filter.getVal() &amp;&amp; one.getCode().equalsIgnoreCase(filter.getCode())) {\n            return Boolean.TRUE;\n        }\n        return Boolean.FALSE;                   \n    }\n}\n</code></pre>\n\n<p>You can then call the mapper like: <code>mapper.createOne(one, new Filter(projId, val, code));</code></p>\n"},{"comments":[{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":5,"creation_date":1598452826,"post_id":52168618,"comment_id":112464896,"body_markdown":"You haven&#39;t told anything about `qualifiedByName` ((","body":"You haven&#39;t told anything about <code>qualifiedByName</code> (("},{"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"score":1,"creation_date":1598557862,"post_id":52168618,"comment_id":112506368,"body_markdown":"Because there is no need to use it. qualifiedby is handy if you have multiple mapping methods with the same method signature but different behaviour. Anyway, you struck my curiosity and I have updated my answer with a more elaborate example to more closely resemble the OP code.","body":"Because there is no need to use it. qualifiedby is handy if you have multiple mapping methods with the same method signature but different behaviour. Anyway, you struck my curiosity and I have updated my answer with a more elaborate example to more closely resemble the OP code."},{"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"score":0,"creation_date":1693534734,"post_id":52168618,"comment_id":135777159,"body_markdown":"if I&#39;m not mistaken.. Does it matter which of `qualified` or `notQualified ` you meant instead of (undefined) `isQualified`?","body":"if I&#39;m not mistaken.. Does it matter which of <code>qualified</code> or <code>notQualified </code> you meant instead of (undefined) <code>isQualified</code>?"},{"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"score":0,"creation_date":1693833163,"post_id":52168618,"comment_id":135808390,"body_markdown":"Depends wether you want to create in instance of OneDto using the mapper with the property `qualified` set to true or false.  `OneDto oneDto = mapper.toOneDto(one, isQualified);` will generate a oneDto with qualified=true, whereas `OneDto oneDto = mapper.toOneDto(one, notQualified);` will generate a oneDto with qualified=false. In other words, this demonstrates how to compute the value of a property externally from the mapper as it is less complex and more readable than doing this with mapstruct annotations/logic alone. The fact you can, doesn&#39;t mean you should ;-)","body":"Depends wether you want to create in instance of OneDto using the mapper with the property <code>qualified</code> set to true or false.  <code>OneDto oneDto = mapper.toOneDto(one, isQualified);</code> will generate a oneDto with qualified=true, whereas <code>OneDto oneDto = mapper.toOneDto(one, notQualified);</code> will generate a oneDto with qualified=false. In other words, this demonstrates how to compute the value of a property externally from the mapper as it is less complex and more readable than doing this with mapstruct annotations/logic alone. The fact you can, doesn&#39;t mean you should ;-)"}],"tags":[],"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"comment_count":4,"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1611506236,"creation_date":1536071486,"answer_id":52168618,"question_id":47694501,"body_markdown":"Since version 1.2 it is supported:\r\nhttp://mapstruct.org/documentation/stable/reference/html/#mappings-with-several-source-parameters\r\n\r\nFor example like this:\r\n\r\n    @Mapping(source = &quot;person.description&quot;, target = &quot;description&quot;)\r\n    @Mapping(source = &quot;address.houseNo&quot;, target = &quot;houseNumber&quot;)\r\n    DeliveryAddressDto personAndAddressToDeliveryAddressDto(Person person, Address address);\r\n\r\nUPDATE\r\n\r\nSince Mapstruct allows to map multiple source arguments into a single target, I would advise to extract the `checkQualified` method from the mapper and instead compute the outcome beforehand and invoke the mapper with the result of the checkQualified method. Mapstruct is a _mapping_ library, and does not excel in performing arbitrary logic. It&#39;s not impossible, but personally, I don&#39;t see the value it adds in your particular case. \r\n\r\nWith the logic extracted your mapper could look like this:\r\n\r\n```java\r\n@Mapper\r\npublic interface OneMapper {\r\n    OneDto toOneDto(One one, Boolean qualified);\r\n}\r\n```\r\n\r\nThe mapper can be used like this:\r\n```java\r\nOne one = new One(1, 10, 100, &quot;one&quot;);\r\nboolean qualified = checkQualified(one, 10, 100, &quot;one&quot;);\r\nboolean notQualified = checkQualified(one, 10, 100, &quot;two&quot;);\r\nOneDto oneDto = mapper.toOneDto(one, isQualified);\r\n```\r\n\r\nFor a full example, see: https://github.com/phazebroek/so-mapstruct/blob/master/src/main/java/nl/phazebroek/so/MapStructDemo.java","title":"MapStruct QualifiedByName with multiple parameters","body":"<p>Since version 1.2 it is supported:\n<a href=\"http://mapstruct.org/documentation/stable/reference/html/#mappings-with-several-source-parameters\" rel=\"noreferrer\">http://mapstruct.org/documentation/stable/reference/html/#mappings-with-several-source-parameters</a></p>\n<p>For example like this:</p>\n<pre><code>@Mapping(source = &quot;person.description&quot;, target = &quot;description&quot;)\n@Mapping(source = &quot;address.houseNo&quot;, target = &quot;houseNumber&quot;)\nDeliveryAddressDto personAndAddressToDeliveryAddressDto(Person person, Address address);\n</code></pre>\n<p>UPDATE</p>\n<p>Since Mapstruct allows to map multiple source arguments into a single target, I would advise to extract the <code>checkQualified</code> method from the mapper and instead compute the outcome beforehand and invoke the mapper with the result of the checkQualified method. Mapstruct is a <em>mapping</em> library, and does not excel in performing arbitrary logic. It's not impossible, but personally, I don't see the value it adds in your particular case.</p>\n<p>With the logic extracted your mapper could look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic interface OneMapper {\n    OneDto toOneDto(One one, Boolean qualified);\n}\n</code></pre>\n<p>The mapper can be used like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>One one = new One(1, 10, 100, &quot;one&quot;);\nboolean qualified = checkQualified(one, 10, 100, &quot;one&quot;);\nboolean notQualified = checkQualified(one, 10, 100, &quot;two&quot;);\nOneDto oneDto = mapper.toOneDto(one, isQualified);\n</code></pre>\n<p>For a full example, see: <a href=\"https://github.com/phazebroek/so-mapstruct/blob/master/src/main/java/nl/phazebroek/so/MapStructDemo.java\" rel=\"noreferrer\">https://github.com/phazebroek/so-mapstruct/blob/master/src/main/java/nl/phazebroek/so/MapStructDemo.java</a></p>\n"},{"comments":[{"owner":{"account_id":308365,"reputation":2377,"user_id":620192,"accept_rate":64,"display_name":"ScrappyDev"},"score":0,"creation_date":1701438452,"post_id":63989442,"comment_id":136778841,"body_markdown":"The default method and the non-@Context fields are not needed in order to accomplish this.","body":"The default method and the non-@Context fields are not needed in order to accomplish this."}],"tags":[],"owner":{"account_id":6019085,"reputation":87,"user_id":4726867,"display_name":"Farhad Baghirov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600680140,"creation_date":1600680140,"answer_id":63989442,"question_id":47694501,"body_markdown":"You can create a default method which calls internally mapstruct method with additional context params.in this way, you can obtain all parameters in &#39;qualifiedByName&#39; part\r\n\r\n    @Mapper\r\n    public interface OneMapper {\r\n\r\n        default OneDto createOne(One one, Integer projId, Integer val, String code) {\r\n            return createOneWithContext(one,porjId,val,code\r\n                                        one,porjId,val,code //as context params\r\n            );\r\n        }\r\n\r\n        @Mapping(target=&quot;id&quot;, source=&quot;one.id&quot;)\r\n        @Mapping(target=&quot;qualified&quot;,source=&quot;one&quot;,qualifiedByName=&quot;checkQualifiedNamed&quot;)\r\n        OneDto createOneWithContext (One one, Integer projId, Integer val, String code\r\n                         @Context One oneAsContext, \r\n                         @Context Integer projIdAsContext, \r\n                         @Context Integer valAsContext, \r\n                         @Context String codeAsContext\r\n        \r\n    );\r\n\r\n        @Named(&quot;checkQualifiedNamed&quot;)\r\n        default Boolean checkQualified (One one, @Context Integer projId, @Context Integer val, @Context String code) {\r\n            if(one.getProjectId() == projId &amp;&amp; one.getVal() == val &amp;&amp; one.getCode().equalsIgnoreCase(code)) {\r\n                return Boolean.TRUE;\r\n            }\r\n        return Boolean.FALSE;                   \r\n        }\r\n    }\r\n\r\n\r\n\r\n    ```","title":"MapStruct QualifiedByName with multiple parameters","body":"<p>You can create a default method which calls internally mapstruct method with additional context params.in this way, you can obtain all parameters in 'qualifiedByName' part</p>\n<pre><code>@Mapper\npublic interface OneMapper {\n\n    default OneDto createOne(One one, Integer projId, Integer val, String code) {\n        return createOneWithContext(one,porjId,val,code\n                                    one,porjId,val,code //as context params\n        );\n    }\n\n    @Mapping(target=&quot;id&quot;, source=&quot;one.id&quot;)\n    @Mapping(target=&quot;qualified&quot;,source=&quot;one&quot;,qualifiedByName=&quot;checkQualifiedNamed&quot;)\n    OneDto createOneWithContext (One one, Integer projId, Integer val, String code\n                     @Context One oneAsContext, \n                     @Context Integer projIdAsContext, \n                     @Context Integer valAsContext, \n                     @Context String codeAsContext\n    \n);\n\n    @Named(&quot;checkQualifiedNamed&quot;)\n    default Boolean checkQualified (One one, @Context Integer projId, @Context Integer val, @Context String code) {\n        if(one.getProjectId() == projId &amp;&amp; one.getVal() == val &amp;&amp; one.getCode().equalsIgnoreCase(code)) {\n            return Boolean.TRUE;\n        }\n    return Boolean.FALSE;                   \n    }\n}\n\n\n\n```\n</code></pre>\n"},{"comments":[{"owner":{"account_id":361565,"reputation":512,"user_id":704246,"accept_rate":50,"display_name":"Saad Benbouzid"},"score":0,"creation_date":1635196748,"post_id":69500971,"comment_id":123227370,"body_markdown":"Sounds good, doesn&#39;t work.\n~D.J. T.","body":"Sounds good, doesn&#39;t work. ~D.J. T."},{"owner":{"account_id":7402277,"reputation":340,"user_id":5632321,"display_name":"Anatoly Yakimchuk"},"score":3,"creation_date":1668429055,"post_id":69500971,"comment_id":131395139,"body_markdown":"Works perfectly with mapstruct v1.5.3","body":"Works perfectly with mapstruct v1.5.3"}],"tags":[],"owner":{"account_id":156389,"reputation":839,"user_id":1183840,"display_name":"Wes Grant"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1693535366,"creation_date":1633721865,"answer_id":69500971,"question_id":47694501,"body_markdown":"If you need to calculate a single target field based on **multiple source fields from the same source object**, you can pass the **full source object** to the custom mapper function instead of individual fields:  \r\n\r\nExample Entity:\r\n```\r\n@Entity\r\n@Data\r\npublic class User {\r\n    private String firstName;\r\n    private String lastName;\r\n}\r\n\r\n```\r\n\r\nExample DTO:\r\n```\r\n\r\npublic class UserDto {\r\n    private String fullName;\r\n}\r\n```\r\n\r\n... and the mapper... Instead of passing a single source (firstName): \r\n```\r\n@Mapper\r\npublic abstract class UserMapper {\r\n\r\n    @Mapping(source = &quot;firstName&quot;, target = &quot;fullName&quot;, qualifiedByName = &quot;nameTofullName&quot;)\r\n    public abstract UserDto userEntityToUserDto(UserEntity userEntity);\r\n\r\n\r\n    @Named(&quot;nameToFullName&quot;)\r\n    public String nameToFullName(String firstName) {\r\n        return String.format(&quot;%s HOW DO I GET THE LAST NAME HERE?&quot;, firstName);\r\n    }\r\n```\r\n... pass the full **entity object** (userEntity) as the source:  \r\n```\r\n@Mapper\r\npublic abstract class UserMapper {\r\n\r\n    @Mapping(source = &quot;userEntity&quot;, target = &quot;fullName&quot;, qualifiedByName = &quot;nameToFullName&quot;)\r\n    public abstract UserDto userEntityToUserDto(UserEntity userEntity);\r\n\r\n\r\n    @Named(&quot;nameToFullName&quot;)\r\n    public String nameToOwner(UserEntity userEntity) {\r\n        return String.format(&quot;%s %s&quot;, userEntity.getFirstName(), userEntity.getLastName());\r\n    }\r\n```\r\n","title":"MapStruct QualifiedByName with multiple parameters","body":"<p>If you need to calculate a single target field based on <strong>multiple source fields from the same source object</strong>, you can pass the <strong>full source object</strong> to the custom mapper function instead of individual fields:</p>\n<p>Example Entity:</p>\n<pre><code>@Entity\n@Data\npublic class User {\n    private String firstName;\n    private String lastName;\n}\n\n</code></pre>\n<p>Example DTO:</p>\n<pre><code>\npublic class UserDto {\n    private String fullName;\n}\n</code></pre>\n<p>... and the mapper... Instead of passing a single source (firstName):</p>\n<pre><code>@Mapper\npublic abstract class UserMapper {\n\n    @Mapping(source = &quot;firstName&quot;, target = &quot;fullName&quot;, qualifiedByName = &quot;nameTofullName&quot;)\n    public abstract UserDto userEntityToUserDto(UserEntity userEntity);\n\n\n    @Named(&quot;nameToFullName&quot;)\n    public String nameToFullName(String firstName) {\n        return String.format(&quot;%s HOW DO I GET THE LAST NAME HERE?&quot;, firstName);\n    }\n</code></pre>\n<p>... pass the full <strong>entity object</strong> (userEntity) as the source:</p>\n<pre><code>@Mapper\npublic abstract class UserMapper {\n\n    @Mapping(source = &quot;userEntity&quot;, target = &quot;fullName&quot;, qualifiedByName = &quot;nameToFullName&quot;)\n    public abstract UserDto userEntityToUserDto(UserEntity userEntity);\n\n\n    @Named(&quot;nameToFullName&quot;)\n    public String nameToOwner(UserEntity userEntity) {\n        return String.format(&quot;%s %s&quot;, userEntity.getFirstName(), userEntity.getLastName());\n    }\n</code></pre>\n"}],"owner":{"account_id":5169610,"reputation":2584,"user_id":4138572,"accept_rate":60,"display_name":"Vivek Gupta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100305,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":47705023,"answer_count":4,"score":35,"last_activity_date":1693535366,"creation_date":1512647455,"question_id":47694501,"body_markdown":"I have come across a situation where my mapping method has 3 parameters, and all the three are being used in deriving one of the properties of the target type.\r\n\r\nI have created a default mapping method in the interface keeping the logic for deriving the property, now for calling this method, I could use an `expression = &quot;java( /*method call here*/ )&quot;` in the `@Mapping` annotation. \r\n\r\nIs there any way to do this with any of the mapstruct annotation like `@qualifiedByName`, I tried commenting the annotation having expression property and used qualifiedByName, but it doesn&#39;t work :\r\n\r\n    @Mapper\r\n    public interface OneMapper {\r\n    \t\r\n    \t@Mapping(target=&quot;id&quot;, source=&quot;one.id&quot;)\r\n    \t//@Mapping(target=&quot;qualified&quot;,expression = &quot;java( checkQualified (one, projId, code) )&quot;)\r\n    \t@Mapping(target=&quot;qualified&quot;,qualifiedByName=&quot;checkQualifiedNamed&quot;)\r\n    \tOneDto createOne (One one, Integer projId, Integer val, String code);\r\n    \t\t\r\n    \t@Named(&quot;checkQualifiedNamed&quot;)\r\n    \tdefault Boolean checkQualified (One one, Integer projId, Integer val, String code) {\r\n    \t\tif(one.getProjectId() == projId &amp;&amp; one.getVal() == val &amp;&amp; one.getCode().equalsIgnoreCase(code)) {\r\n    \t\t\treturn Boolean.TRUE;\r\n    \t\t}\r\n    \t\treturn Boolean.FALSE;\t\t\t\t\t\r\n    \t}\r\n    }","title":"MapStruct QualifiedByName with multiple parameters","body":"<p>I have come across a situation where my mapping method has 3 parameters, and all the three are being used in deriving one of the properties of the target type.</p>\n\n<p>I have created a default mapping method in the interface keeping the logic for deriving the property, now for calling this method, I could use an <code>expression = \"java( /*method call here*/ )\"</code> in the <code>@Mapping</code> annotation. </p>\n\n<p>Is there any way to do this with any of the mapstruct annotation like <code>@qualifiedByName</code>, I tried commenting the annotation having expression property and used qualifiedByName, but it doesn't work :</p>\n\n<pre><code>@Mapper\npublic interface OneMapper {\n\n    @Mapping(target=\"id\", source=\"one.id\")\n    //@Mapping(target=\"qualified\",expression = \"java( checkQualified (one, projId, code) )\")\n    @Mapping(target=\"qualified\",qualifiedByName=\"checkQualifiedNamed\")\n    OneDto createOne (One one, Integer projId, Integer val, String code);\n\n    @Named(\"checkQualifiedNamed\")\n    default Boolean checkQualified (One one, Integer projId, Integer val, String code) {\n        if(one.getProjectId() == projId &amp;&amp; one.getVal() == val &amp;&amp; one.getCode().equalsIgnoreCase(code)) {\n            return Boolean.TRUE;\n        }\n        return Boolean.FALSE;                   \n    }\n}\n</code></pre>\n"},{"tags":["java","database","javafx","phpmyadmin","mariadb"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1693471011,"post_id":77014129,"comment_id":135766236,"body_markdown":"the table nor database have any say in what will be shown. That&#39;s decided by the code you write/execute. If you only do a &quot;SELECT ID FROM TABLE&quot;, you&#39;ll only get the id, if you perform a &quot;SELECT * FROM TABLE&quot; you could show everything","body":"the table nor database have any say in what will be shown. That&#39;s decided by the code you write/execute. If you only do a &quot;SELECT ID FROM TABLE&quot;, you&#39;ll only get the id, if you perform a &quot;SELECT * FROM TABLE&quot; you could show everything"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1693492627,"post_id":77014129,"comment_id":135770983,"body_markdown":"If the database is embedded on the local machine, then no, changes by a client on one machine will not be seen by a client on another machine. However, if you have the database hosted on a server, and that server is reachable by all clients, then yes, changes by one client will be seen by the others. Though you will likely need to implement a &quot;refresh&quot; feature for the clients. In short, what matters is if you have &quot;one&quot; database or multiple _separate_ databases.","body":"If the database is embedded on the local machine, then no, changes by a client on one machine will not be seen by a client on another machine. However, if you have the database hosted on a server, and that server is reachable by all clients, then yes, changes by one client will be seen by the others. Though you will likely need to implement a &quot;refresh&quot; feature for the clients. In short, what matters is if you have &quot;one&quot; database or multiple <i>separate</i> databases."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693535016,"post_id":77014129,"comment_id":135777186,"body_markdown":"Crop your image.","body":"Crop your image."}],"answers":[{"comments":[{"owner":{"account_id":26342666,"reputation":3,"user_id":20001535,"display_name":"biggX"},"score":0,"creation_date":1694427628,"post_id":77014221,"comment_id":135885035,"body_markdown":"Yes.. very clear and understandable","body":"Yes.. very clear and understandable"}],"tags":[],"owner":{"account_id":29335801,"reputation":53,"user_id":22476210,"display_name":"codernik"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693471510,"creation_date":1693471510,"answer_id":77014221,"question_id":77014129,"body_markdown":"if the software running on both clients accesses the same database - if the database is on a central server, for example - if client 1 changes something in the database, the dashboard on client 2 will also be affected.\r\n\r\nThe software on both clients has the same data basis.\r\n\r\nDepending on how your program is structured, you may have to make a commit after a change on client 1 so that the data is written to the database. And of course you have to update your scene in Java FX on client 2 so that the new data can be displayed.\r\n\r\nWas that helpful? ","title":"Can a database table work differently for each user?","body":"<p>if the software running on both clients accesses the same database - if the database is on a central server, for example - if client 1 changes something in the database, the dashboard on client 2 will also be affected.</p>\n<p>The software on both clients has the same data basis.</p>\n<p>Depending on how your program is structured, you may have to make a commit after a change on client 1 so that the data is written to the database. And of course you have to update your scene in Java FX on client 2 so that the new data can be displayed.</p>\n<p>Was that helpful?</p>\n"},{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693515582,"creation_date":1693475527,"answer_id":77014728,"question_id":77014129,"body_markdown":"&quot;So what i want to know is if i migrate the software and install it on another machine and enter my own details as an employee and then enter details on another machine.. will the dashboard on the second machine show the information from the first machine since the software uses the same table.&quot;\r\n\r\nThis depends on how you move the software.\r\n\r\nCopy application to the new machine\r\n=\r\n\r\nIf you copy the application such that it connects to the already existing database, you only have one set of data that you can view/modify from two clients. Any change done one one of those will be visible on the other as well.\r\n\r\nCopy application and database to the new machine\r\n=\r\n\r\nIf you copy both application and database to a new machine and ensure each of the applications connect to their local database you have two sets of data. A change on one machine will affect the local database but not the one on the other machine.\r\n\r\nMove application to new machine\r\n=\r\n\r\nIf you move the application it means you copy it over but remove the application on the first machine. I assume the database stays where it was.\r\nThis is a common pattern to separate application and database into different servers, possibly on different network segments.\r\n\r\nHere you have only one client (the new machine you moved the application to) and one data set. Of course you can still view and edit it, but it will only be visible/editable on the new machine.","title":"Can a database table work differently for each user?","body":"<p>&quot;So what i want to know is if i migrate the software and install it on another machine and enter my own details as an employee and then enter details on another machine.. will the dashboard on the second machine show the information from the first machine since the software uses the same table.&quot;</p>\n<p>This depends on how you move the software.</p>\n<h1>Copy application to the new machine</h1>\n<p>If you copy the application such that it connects to the already existing database, you only have one set of data that you can view/modify from two clients. Any change done one one of those will be visible on the other as well.</p>\n<h1>Copy application and database to the new machine</h1>\n<p>If you copy both application and database to a new machine and ensure each of the applications connect to their local database you have two sets of data. A change on one machine will affect the local database but not the one on the other machine.</p>\n<h1>Move application to new machine</h1>\n<p>If you move the application it means you copy it over but remove the application on the first machine. I assume the database stays where it was.\nThis is a common pattern to separate application and database into different servers, possibly on different network segments.</p>\n<p>Here you have only one client (the new machine you moved the application to) and one data set. Of course you can still view and edit it, but it will only be visible/editable on the new machine.</p>\n"}],"owner":{"account_id":26342666,"reputation":3,"user_id":20001535,"display_name":"biggX"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":2,"score":-3,"last_activity_date":1693535005,"creation_date":1693470880,"question_id":77014129,"body_markdown":"Im working on an employee management system using java and javafx. \r\n\r\nim just wondering ;in this project there&#39;s an admin part and there&#39;s an employee part. Employees will sign up and login then after logging in they enter their personal details which will be kept on the database and then displayed on the dashboard. \r\nSo what i want to know is if i migrate the software and install it on another machine and enter my own details as an employee and then enter details on another machine.. will the dashboard on the second machine show the information from the first machine since the software uses the same table. \r\n\r\n[![screenshot][1]][1]\r\n\r\nI migrated the software to another machine unfortunately it didn&#39;t run because the machine did not have access to the database (another issue) so I couldn&#39;t find out exactly what I wanted thats why I came here\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0NWbg.jpg","title":"Can a database table work differently for each user?","body":"<p>Im working on an employee management system using java and javafx.</p>\n<p>im just wondering ;in this project there's an admin part and there's an employee part. Employees will sign up and login then after logging in they enter their personal details which will be kept on the database and then displayed on the dashboard.\nSo what i want to know is if i migrate the software and install it on another machine and enter my own details as an employee and then enter details on another machine.. will the dashboard on the second machine show the information from the first machine since the software uses the same table.</p>\n<p><a href=\"https://i.stack.imgur.com/0NWbg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0NWbg.jpg\" alt=\"screenshot\" /></a></p>\n<p>I migrated the software to another machine unfortunately it didn't run because the machine did not have access to the database (another issue) so I couldn't find out exactly what I wanted thats why I came here</p>\n"},{"tags":["java","multithreading","scheduledexecutorservice"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1693482195,"post_id":77015509,"comment_id":135768555,"body_markdown":"Looks like you really only have one task per database and these tasks then execute each individual step. Scheduling the individual steps only makes sense if they are truly independent and should be scheduled as such.","body":"Looks like you really only have one task per database and these tasks then execute each individual step. Scheduling the individual steps only makes sense if they are truly independent and should be scheduled as such."},{"owner":{"account_id":5159758,"reputation":1872,"user_id":4131849,"display_name":"Roshan Upreti"},"score":0,"creation_date":1693482387,"post_id":77015509,"comment_id":135768595,"body_markdown":"@JoachimSauer I&#39;m basically performing the same set of tasks for multiple databases (hundreds of them), and looking for a way to do that concurrently.","body":"@JoachimSauer I&#39;m basically performing the same set of tasks for multiple databases (hundreds of them), and looking for a way to do that concurrently."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1693482524,"post_id":77015509,"comment_id":135768634,"body_markdown":"`newScheduledThreadPool(Runtime.getRuntime().availableProcessors())` doesn’t allocate a thread for each database, it allocates a thread for each CPU. To have a thread per database, you’d need `newScheduledThreadPool(dbInfoMap.size())`, but the optimal number of threads is more likely something between those values.","body":"<code>newScheduledThreadPool(Runtime.getRuntime().availableProcess&zwnj;&#8203;ors())</code> doesn’t allocate a thread for each database, it allocates a thread for each CPU. To have a thread per database, you’d need <code>newScheduledThreadPool(dbInfoMap.size())</code>, but the optimal number of threads is more likely something between those values."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1693483021,"post_id":77015509,"comment_id":135768753,"body_markdown":"@RoshanUpreti: but in your question you say &quot;want to allocate **a thread** for each database&quot;. So if you have (for example) 10 databases and 100 tasks each, how many threads do you want to run concurrently? It *sounds* to me that you want (at most) 10, yet your code tries to schedule 1000 tasks).","body":"@RoshanUpreti: but in your question you say &quot;want to allocate <b>a thread</b> for each database&quot;. So if you have (for example) 10 databases and 100 tasks each, how many threads do you want to run concurrently? It <i>sounds</i> to me that you want (at most) 10, yet your code tries to schedule 1000 tasks)."},{"owner":{"account_id":5159758,"reputation":1872,"user_id":4131849,"display_name":"Roshan Upreti"},"score":0,"creation_date":1693484062,"post_id":77015509,"comment_id":135768971,"body_markdown":"@JoachimSauer I want to allocate a thread for each database and use that thread to execute the runnable. So, if there are 10 databases, there should be 10 threads and each thread running its list of runnable. My apologies if I phrased the question incorrectly.","body":"@JoachimSauer I want to allocate a thread for each database and use that thread to execute the runnable. So, if there are 10 databases, there should be 10 threads and each thread running its list of runnable. My apologies if I phrased the question incorrectly."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1693484826,"post_id":77015509,"comment_id":135769124,"body_markdown":"Then you shouldn&#39;t schedule each element of the `runnableList` individually. Instead construct a `Runnable` that simply loops over them and calls each of them (normally, serially) and schedule that.","body":"Then you shouldn&#39;t schedule each element of the <code>runnableList</code> individually. Instead construct a <code>Runnable</code> that simply loops over them and calls each of them (normally, serially) and schedule that."},{"owner":{"account_id":5159758,"reputation":1872,"user_id":4131849,"display_name":"Roshan Upreti"},"score":0,"creation_date":1693491239,"post_id":77015509,"comment_id":135770646,"body_markdown":"@JoachimSauer Thank you for pointing me towards the right direction :)","body":"@JoachimSauer Thank you for pointing me towards the right direction :)"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693534402,"creation_date":1693521892,"answer_id":77019641,"question_id":77015509,"body_markdown":"## tl;dr\r\n\r\nFor maximum efficiency, pass a collection of your hundreds of tasks to an executor service assigning one virtual thread per task. \r\n\r\n    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\r\n    executorService.invokeAll ( collectionOfTasks )\r\n    \r\n\r\n## Scheduling of a thread’s execution is out of your control\r\n\r\nYour title says:\r\n\r\n&gt;ensure that all the runnables get fired concurrently\r\n\r\nIf you mean that you want all of the `Runnable` tasks to execute simultaneously, that is not possible using Java threads. \r\n\r\n### Platform threads\r\n\r\nIn Java, you ask for a thread to be executed, but when execution begins, and how long execution lasts, is up to the whims of the host OS’ thread scheduler. Threads in today’s Java are each mapped to a host OS thread. ([Virtual threads][1] in upcoming Java 21+ will be quite different than these “platform” threads.) A Java programmer has no control over when a thread runs.\r\n\r\nYou *can* collect a bunch of tasks to be submitted together to an executor service. Pass the collection of tasks `ExecutorService#invokeAll`. But `invokeAll` does *not* mean they will be executed together. They can be executed in any order, with each task’s execution beginning at any time, and completing at any time. The `invokeAll` method is merely a convenience for you the programmer if you have chosen to instantiate all your tasks up front. You could just as well write a loop that submits each instantiated task object to the executor service, one task at a time.\r\n\r\nHere is an example app to demonstrate passing a collection of `Callable` objects to the `invokeAll` method of an `ExecutorService`. \r\n\r\n```java\r\npackage work.basil.example;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.List;\r\nimport java.util.concurrent.*;\r\nimport java.util.stream.IntStream;\r\n\r\npublic class ManyDatabases\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        ManyDatabases app = new ManyDatabases ( );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        System.out.println ( &quot;INFO - Demo done. &quot; + Instant.now ( ) );\r\n        // Dummy data\r\n        List &lt; DatabaseInfo &gt; databaseInfos =\r\n                IntStream\r\n                        .rangeClosed ( 1 , 1_000 )\r\n                        .mapToObj ( ( int index ) -&gt;\r\n                                new DatabaseInfo (\r\n                                        ENGINE.values ( )[ ThreadLocalRandom.current ( ).nextInt ( ENGINE.values ( ).length ) ] ,\r\n                                        index\r\n                                )\r\n                        )\r\n                        .toList ( );\r\n        System.out.println ( &quot;databaseInfos = &quot; + databaseInfos );\r\n\r\n        // Make tasks.\r\n        List &lt; DbTask &gt; tasks = databaseInfos.stream ( ).map ( DbTask :: new ).toList ( );\r\n\r\n        // Execute tasks.\r\n        try (\r\n                ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\r\n        )\r\n        {\r\n            try\r\n            {\r\n                List &lt; Future &lt; Boolean &gt; &gt; futures = executorService.invokeAll ( tasks );\r\n            }\r\n            catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n        }\r\n        System.out.println ( &quot;INFO - Demo done. &quot; + Instant.now ( ) );\r\n    }\r\n}\r\n\r\nenum ENGINE { POSTGRES, MS_SQL_SERVER, MYSQL }\r\n\r\nrecord DatabaseInfo( ENGINE engine , int address ) { }\r\n\r\nclass DbTask implements Callable &lt; Boolean &gt;\r\n{\r\n    final private DatabaseInfo databaseInfo;\r\n\r\n    public DbTask ( final DatabaseInfo databaseInfo )\r\n    {\r\n        this.databaseInfo = databaseInfo;\r\n    }\r\n\r\n    @Override\r\n    public Boolean call ( )\r\n    {\r\n        System.out.println ( Instant.now ( ) + &quot; TASK Simulating update to database: &quot; + this.databaseInfo );\r\n        try { Thread.sleep ( Duration.ofMillis ( ThreadLocalRandom.current ( ).nextInt ( 400 , 800 ) ) ); /* Simulate real work being done. */ } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nWhen run.\r\n\r\n```none\r\nINFO - Demo done. 2023-09-01T01:54:11.199225Z\r\ndatabaseInfos = [DatabaseInfo[engine=MS_SQL_SERVER, address=1], DatabaseInfo[engine=POSTGRES, address=2], DatabaseInfo[engine=POSTGRES, address=3], DatabaseInfo[engine=POSTGRES, address=4], DatabaseInfo[engine=POSTGRES, address=5], DatabaseInfo[engine=MYSQL, address=6], DatabaseInfo[engine=MYSQL, address=7]]\r\n2023-09-01T01:54:11.229579Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=5]\r\n2023-09-01T01:54:11.229285Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=2]\r\n2023-09-01T01:54:11.229423Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=4]\r\n2023-09-01T01:54:11.229342Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=3]\r\n2023-09-01T01:54:11.229840Z TASK Simulating update to database: DatabaseInfo[engine=MYSQL, address=7]\r\n2023-09-01T01:54:11.229797Z TASK Simulating update to database: DatabaseInfo[engine=MYSQL, address=6]\r\n2023-09-01T01:54:11.229291Z TASK Simulating update to database: DatabaseInfo[engine=MS_SQL_SERVER, address=1]\r\nINFO - Demo done. 2023-09-01T01:54:12.051448Z\r\n```\r\n\r\n\r\n## Virtual threads\r\n\r\nIn Java 21+, we have [virtual threads][1], an alternative to platform threads. The scheduling of virtual threads is managed within the [JVM][2] rather than by the host OS. When the JVM detects a virtual thread is blocking, the virtual thread is dismounted from the “real” platform thread where it executes. The virtual thread is parked while waiting for the blocking to resolve. In the meantime, the JVM mounts another virtual thread onto the platform thread. This means vastly greater utilization of your CPU cores as the host OS threads rarely sit idle. \r\n\r\nDatabase calls always involve much [blocking][3], taking a long time while waiting for a response. You are making hundreds of such calls at a time. So this is ideal situation for switching to virtual threads rather than platform threads. \r\n\r\nSwitching to virtual threads is utterly simple: just swap out the `Executors` call.\r\n\r\n    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\r\n\r\nAnd we can increase our example calls to a thousand, or even a million. Virtual threads are vastly lightweight than platform threads. Millions of concurrent virtual threads is reasonable.\r\n\r\n    .rangeClosed ( 1 , 1_000 )\r\n\r\nAnd let&#39;s not dump the entire `databaseInfos` list of a thousand. Just first and last, now easier to do as `List` implements `SequencedCollection` with convenient `getFirst` &amp; `getLast` methods. See [*JEP 431: Sequenced Collections*](https://openjdk.org/jeps/431).\r\n\r\n    System.out.println ( &quot;databaseInfos = &quot; + databaseInfos.getFirst () + &quot; … &quot; + databaseInfos.getLast () );\r\n\r\nWhen run:\r\n\r\n```none\r\nINFO - Demo done. 2023-09-01T02:03:50.729476Z\r\ndatabaseInfos = DatabaseInfo[engine=MYSQL, address=1] … DatabaseInfo[engine=POSTGRES, address=1000]\r\n2023-09-01T02:03:50.781280Z TASK Simulating update to database: DatabaseInfo[engine=MS_SQL_SERVER, address=3]\r\n2023-09-01T02:03:50.781686Z TASK Simulating update to database: DatabaseInfo[engine=MYSQL, address=8]\r\n2023-09-01T02:03:50.781739Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=7]\r\n…\r\n2023-09-01T02:03:50.807384Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=1000]\r\n2023-09-01T02:03:50.807377Z TASK Simulating update to database: DatabaseInfo[engine=MYSQL, address=997]\r\n2023-09-01T02:03:50.806946Z TASK Simulating update to database: DatabaseInfo[engine=MS_SQL_SERVER, address=951]\r\nINFO - Demo done. 2023-09-01T02:03:51.638269Z\r\n```\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/444\r\n  [2]: https://en.wikipedia.org/wiki/Java_virtual_machine\r\n  [3]: https://en.wikipedia.org/wiki/Blocking_%28computing%29","title":"How to ensure that all the runnables get fired concurrently, using a ScheduledExecutorService in Java","body":"<h2>tl;dr</h2>\n<p>For maximum efficiency, pass a collection of your hundreds of tasks to an executor service assigning one virtual thread per task.</p>\n<pre><code>ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\nexecutorService.invokeAll ( collectionOfTasks )\n</code></pre>\n<h2>Scheduling of a thread’s execution is out of your control</h2>\n<p>Your title says:</p>\n<blockquote>\n<p>ensure that all the runnables get fired concurrently</p>\n</blockquote>\n<p>If you mean that you want all of the <code>Runnable</code> tasks to execute simultaneously, that is not possible using Java threads.</p>\n<h3>Platform threads</h3>\n<p>In Java, you ask for a thread to be executed, but when execution begins, and how long execution lasts, is up to the whims of the host OS’ thread scheduler. Threads in today’s Java are each mapped to a host OS thread. (<a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">Virtual threads</a> in upcoming Java 21+ will be quite different than these “platform” threads.) A Java programmer has no control over when a thread runs.</p>\n<p>You <em>can</em> collect a bunch of tasks to be submitted together to an executor service. Pass the collection of tasks <code>ExecutorService#invokeAll</code>. But <code>invokeAll</code> does <em>not</em> mean they will be executed together. They can be executed in any order, with each task’s execution beginning at any time, and completing at any time. The <code>invokeAll</code> method is merely a convenience for you the programmer if you have chosen to instantiate all your tasks up front. You could just as well write a loop that submits each instantiated task object to the executor service, one task at a time.</p>\n<p>Here is an example app to demonstrate passing a collection of <code>Callable</code> objects to the <code>invokeAll</code> method of an <code>ExecutorService</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.List;\nimport java.util.concurrent.*;\nimport java.util.stream.IntStream;\n\npublic class ManyDatabases\n{\n    public static void main ( String[] args )\n    {\n        ManyDatabases app = new ManyDatabases ( );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        System.out.println ( &quot;INFO - Demo done. &quot; + Instant.now ( ) );\n        // Dummy data\n        List &lt; DatabaseInfo &gt; databaseInfos =\n                IntStream\n                        .rangeClosed ( 1 , 1_000 )\n                        .mapToObj ( ( int index ) -&gt;\n                                new DatabaseInfo (\n                                        ENGINE.values ( )[ ThreadLocalRandom.current ( ).nextInt ( ENGINE.values ( ).length ) ] ,\n                                        index\n                                )\n                        )\n                        .toList ( );\n        System.out.println ( &quot;databaseInfos = &quot; + databaseInfos );\n\n        // Make tasks.\n        List &lt; DbTask &gt; tasks = databaseInfos.stream ( ).map ( DbTask :: new ).toList ( );\n\n        // Execute tasks.\n        try (\n                ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\n        )\n        {\n            try\n            {\n                List &lt; Future &lt; Boolean &gt; &gt; futures = executorService.invokeAll ( tasks );\n            }\n            catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n        }\n        System.out.println ( &quot;INFO - Demo done. &quot; + Instant.now ( ) );\n    }\n}\n\nenum ENGINE { POSTGRES, MS_SQL_SERVER, MYSQL }\n\nrecord DatabaseInfo( ENGINE engine , int address ) { }\n\nclass DbTask implements Callable &lt; Boolean &gt;\n{\n    final private DatabaseInfo databaseInfo;\n\n    public DbTask ( final DatabaseInfo databaseInfo )\n    {\n        this.databaseInfo = databaseInfo;\n    }\n\n    @Override\n    public Boolean call ( )\n    {\n        System.out.println ( Instant.now ( ) + &quot; TASK Simulating update to database: &quot; + this.databaseInfo );\n        try { Thread.sleep ( Duration.ofMillis ( ThreadLocalRandom.current ( ).nextInt ( 400 , 800 ) ) ); /* Simulate real work being done. */ } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n        return true;\n    }\n}\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO - Demo done. 2023-09-01T01:54:11.199225Z\ndatabaseInfos = [DatabaseInfo[engine=MS_SQL_SERVER, address=1], DatabaseInfo[engine=POSTGRES, address=2], DatabaseInfo[engine=POSTGRES, address=3], DatabaseInfo[engine=POSTGRES, address=4], DatabaseInfo[engine=POSTGRES, address=5], DatabaseInfo[engine=MYSQL, address=6], DatabaseInfo[engine=MYSQL, address=7]]\n2023-09-01T01:54:11.229579Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=5]\n2023-09-01T01:54:11.229285Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=2]\n2023-09-01T01:54:11.229423Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=4]\n2023-09-01T01:54:11.229342Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=3]\n2023-09-01T01:54:11.229840Z TASK Simulating update to database: DatabaseInfo[engine=MYSQL, address=7]\n2023-09-01T01:54:11.229797Z TASK Simulating update to database: DatabaseInfo[engine=MYSQL, address=6]\n2023-09-01T01:54:11.229291Z TASK Simulating update to database: DatabaseInfo[engine=MS_SQL_SERVER, address=1]\nINFO - Demo done. 2023-09-01T01:54:12.051448Z\n</code></pre>\n<h2>Virtual threads</h2>\n<p>In Java 21+, we have <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">virtual threads</a>, an alternative to platform threads. The scheduling of virtual threads is managed within the <a href=\"https://en.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow noreferrer\">JVM</a> rather than by the host OS. When the JVM detects a virtual thread is blocking, the virtual thread is dismounted from the “real” platform thread where it executes. The virtual thread is parked while waiting for the blocking to resolve. In the meantime, the JVM mounts another virtual thread onto the platform thread. This means vastly greater utilization of your CPU cores as the host OS threads rarely sit idle.</p>\n<p>Database calls always involve much <a href=\"https://en.wikipedia.org/wiki/Blocking_%28computing%29\" rel=\"nofollow noreferrer\">blocking</a>, taking a long time while waiting for a response. You are making hundreds of such calls at a time. So this is ideal situation for switching to virtual threads rather than platform threads.</p>\n<p>Switching to virtual threads is utterly simple: just swap out the <code>Executors</code> call.</p>\n<pre><code>ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\n</code></pre>\n<p>And we can increase our example calls to a thousand, or even a million. Virtual threads are vastly lightweight than platform threads. Millions of concurrent virtual threads is reasonable.</p>\n<pre><code>.rangeClosed ( 1 , 1_000 )\n</code></pre>\n<p>And let's not dump the entire <code>databaseInfos</code> list of a thousand. Just first and last, now easier to do as <code>List</code> implements <code>SequencedCollection</code> with convenient <code>getFirst</code> &amp; <code>getLast</code> methods. See <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\"><em>JEP 431: Sequenced Collections</em></a>.</p>\n<pre><code>System.out.println ( &quot;databaseInfos = &quot; + databaseInfos.getFirst () + &quot; … &quot; + databaseInfos.getLast () );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO - Demo done. 2023-09-01T02:03:50.729476Z\ndatabaseInfos = DatabaseInfo[engine=MYSQL, address=1] … DatabaseInfo[engine=POSTGRES, address=1000]\n2023-09-01T02:03:50.781280Z TASK Simulating update to database: DatabaseInfo[engine=MS_SQL_SERVER, address=3]\n2023-09-01T02:03:50.781686Z TASK Simulating update to database: DatabaseInfo[engine=MYSQL, address=8]\n2023-09-01T02:03:50.781739Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=7]\n…\n2023-09-01T02:03:50.807384Z TASK Simulating update to database: DatabaseInfo[engine=POSTGRES, address=1000]\n2023-09-01T02:03:50.807377Z TASK Simulating update to database: DatabaseInfo[engine=MYSQL, address=997]\n2023-09-01T02:03:50.806946Z TASK Simulating update to database: DatabaseInfo[engine=MS_SQL_SERVER, address=951]\nINFO - Demo done. 2023-09-01T02:03:51.638269Z\n</code></pre>\n"}],"owner":{"account_id":5159758,"reputation":1872,"user_id":4131849,"display_name":"Roshan Upreti"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693534402,"creation_date":1693482081,"question_id":77015509,"body_markdown":"I&#39;m trying to implement a Java program that prepares a bunch of runnables for databases(there are hundreds of them, and I want to allocate a thread for each database), and run each of those runnables using a `ScheduledExecutorService`, with an initial delay and some delay in between executions. This is what I&#39;ve managed so far:\r\n\r\n    public static void main(String[] args) throws Exception {\r\n    \r\n            // Get db name and info as key-value pairs\r\n            Map&lt;String, DbInfo&gt; dbInfoMap = getDbInfoMap();;\r\n            \r\n            // Initialize the scheduled executor service.\r\n            final ScheduledExecutorService executorService = Executors\r\n                    .newScheduledThreadPool(Runtime.getRuntime().availableProcessors());\r\n    \r\n    \r\n            // For each database, get a list of runnable and process accordingly.\r\n            dbInfoMap.forEach((db, dbInfo) -&gt; {\r\n                // Get a list of runnable(s).\r\n                List&lt;Runnable&gt; runnableList = new MigrationTaskManager(db, dbInfo).getRunnableTasksForDB();\r\n                // Schedule all the runnable(s) using the scheduled executor service, and a delay\r\n                runnableList.forEach(runnable -&gt; executorService\r\n                        .scheduleWithFixedDelay(runnable, INITIAL_DELAY, DELAY, TimeUnit.MILLISECONDS));\r\n            });\r\n        }\r\n    }\r\n\r\nThis sort of does what I intend, albeit with some caveats (It takes a really long time to start processing some databases if the list is too long). How can I implement it so that all the runnables for each database get fired at the same time? For instance, If I have 100 databases to read from, how can I ensure that 100 threads get fired with a bunch of runnables in each thread when the program starts? I&#39;d really appreciate some help with this.","title":"How to ensure that all the runnables get fired concurrently, using a ScheduledExecutorService in Java","body":"<p>I'm trying to implement a Java program that prepares a bunch of runnables for databases(there are hundreds of them, and I want to allocate a thread for each database), and run each of those runnables using a <code>ScheduledExecutorService</code>, with an initial delay and some delay in between executions. This is what I've managed so far:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n\n        // Get db name and info as key-value pairs\n        Map&lt;String, DbInfo&gt; dbInfoMap = getDbInfoMap();;\n        \n        // Initialize the scheduled executor service.\n        final ScheduledExecutorService executorService = Executors\n                .newScheduledThreadPool(Runtime.getRuntime().availableProcessors());\n\n\n        // For each database, get a list of runnable and process accordingly.\n        dbInfoMap.forEach((db, dbInfo) -&gt; {\n            // Get a list of runnable(s).\n            List&lt;Runnable&gt; runnableList = new MigrationTaskManager(db, dbInfo).getRunnableTasksForDB();\n            // Schedule all the runnable(s) using the scheduled executor service, and a delay\n            runnableList.forEach(runnable -&gt; executorService\n                    .scheduleWithFixedDelay(runnable, INITIAL_DELAY, DELAY, TimeUnit.MILLISECONDS));\n        });\n    }\n}\n</code></pre>\n<p>This sort of does what I intend, albeit with some caveats (It takes a really long time to start processing some databases if the list is too long). How can I implement it so that all the runnables for each database get fired at the same time? For instance, If I have 100 databases to read from, how can I ensure that 100 threads get fired with a bunch of runnables in each thread when the program starts? I'd really appreciate some help with this.</p>\n"},{"tags":["java","spring-boot","serialization","deserialization","jackson-dataformat-xml"],"owner":{"account_id":13566861,"reputation":1,"user_id":10048134,"display_name":"Ashish "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693534020,"creation_date":1693534020,"question_id":77020125,"body_markdown":"I have an xml element \r\n```\r\n&lt;root&gt;\r\n\t&lt;name1 p=&quot;xyz&quot; b =&quot;678&quot;/&gt;\r\n\t&lt;name2 p=&quot;abc&quot;/&gt;\r\n&lt;/root&gt;\r\n```\r\nI would like to parse this XML to java pojo using Jackson dataformat XML library. But i need to do that without creating a class for name1 element or name2 element because i just want the attribute values and name1/name2 tags will not have any children. \r\n\r\nI tried using isAttribute = true over jacksonXmlproperty annotation. But I will not be able to give the fieldname which i want in java class, because we have to give the same name as attribute name. And that would conflict with name1 attribute p and name2 attribute p. This approach will result in a java class like below\r\n\r\n```\r\nclass Root {\r\n    \r\n    @JacksonXmlproperty(localName=&quot;name1&quot; isAttribute=true)\r\n    String p;\r\n\r\n    @JacksonXmlproperty(localName=&quot;name2&quot; isAttribute=true)\r\n    String p;         // another attribute with same name p in the name2 element.\r\n\r\n}\r\n\r\n```\r\n\r\nI am not sure if we need to use any custom deserializer to acheive this.\r\n\r\nCan anyone help on this? Thanks in advance !","title":"Parsing XML element without children but with attributes using jackson","body":"<p>I have an xml element</p>\n<pre><code>&lt;root&gt;\n    &lt;name1 p=&quot;xyz&quot; b =&quot;678&quot;/&gt;\n    &lt;name2 p=&quot;abc&quot;/&gt;\n&lt;/root&gt;\n</code></pre>\n<p>I would like to parse this XML to java pojo using Jackson dataformat XML library. But i need to do that without creating a class for name1 element or name2 element because i just want the attribute values and name1/name2 tags will not have any children.</p>\n<p>I tried using isAttribute = true over jacksonXmlproperty annotation. But I will not be able to give the fieldname which i want in java class, because we have to give the same name as attribute name. And that would conflict with name1 attribute p and name2 attribute p. This approach will result in a java class like below</p>\n<pre><code>class Root {\n    \n    @JacksonXmlproperty(localName=&quot;name1&quot; isAttribute=true)\n    String p;\n\n    @JacksonXmlproperty(localName=&quot;name2&quot; isAttribute=true)\n    String p;         // another attribute with same name p in the name2 element.\n\n}\n\n</code></pre>\n<p>I am not sure if we need to use any custom deserializer to acheive this.</p>\n<p>Can anyone help on this? Thanks in advance !</p>\n"},{"tags":["java","sql","hibernate","jpa"],"comments":[{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1693529441,"post_id":77019890,"comment_id":135776780,"body_markdown":"I think both are same albeit limit is in query level while getSingleResult() is api level. Also if someone messes up the query, the method ensures that is returns single result always.","body":"I think both are same albeit limit is in query level while getSingleResult() is api level. Also if someone messes up the query, the method ensures that is returns single result always."},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1693557495,"post_id":77019890,"comment_id":135779747,"body_markdown":"`getSingleResult` was meant for queries that are *guaranteed* to return a single result, like `SELECT SUM / AVG` etc. For all queries that *might* return a single result (but might also return no results, depending on a business condition), `getResultList` was intended. Also remember that sometimes (e.g. with `FETCH JOIN`), **1 result = multiple result rows**, so `LIMIT 1` does not always make sense. For similar reasons, `setFirstResult() / setMaxResults()` is not always equivalent to setting `OFFSET / LIMIT / ROWNUM`","body":"<code>getSingleResult</code> was meant for queries that are <i>guaranteed</i> to return a single result, like <code>SELECT SUM &#47; AVG</code> etc. For all queries that <i>might</i> return a single result (but might also return no results, depending on a business condition), <code>getResultList</code> was intended. Also remember that sometimes (e.g. with <code>FETCH JOIN</code>), <b>1 result = multiple result rows</b>, so <code>LIMIT 1</code> does not always make sense. For similar reasons, <code>setFirstResult() &#47; setMaxResults()</code> is not always equivalent to setting <code>OFFSET &#47; LIMIT &#47; ROWNUM</code>"}],"answers":[{"comments":[{"owner":{"account_id":10703557,"reputation":475,"user_id":7878083,"display_name":"Ray Bond"},"score":0,"creation_date":1693533233,"post_id":77020061,"comment_id":135777047,"body_markdown":"So are they doing the same thing, albeit some have better exception messages?","body":"So are they doing the same thing, albeit some have better exception messages?"},{"owner":{"account_id":10703557,"reputation":475,"user_id":7878083,"display_name":"Ray Bond"},"score":0,"creation_date":1693533681,"post_id":77020061,"comment_id":135777082,"body_markdown":"So LIMIT 1 just limits the results 1 (and has the sort) - whereas getOneResult doesnt get a single result from a resultlist, but is a check that the query returns 1.","body":"So LIMIT 1 just limits the results 1 (and has the sort) - whereas getOneResult doesnt get a single result from a resultlist, but is a check that the query returns 1."},{"owner":{"account_id":11548963,"reputation":36,"user_id":14679352,"display_name":"Cavor Kehl"},"score":0,"creation_date":1693537467,"post_id":77020061,"comment_id":135777319,"body_markdown":"@RayBond Yes, it basically act as a wrapper like: 1. Execute getResultList() and get the result. 2. Check if the result has and only has  one row.(turns out it throws Exception too when 0 rows is returned, since null has other meaning. Here&#39;s [another question on this topic](https://stackoverflow.com/questions/2002993/jpa-getsingleresult-or-null)  ) 3. If everything goes as expected, return the row.","body":"@RayBond Yes, it basically act as a wrapper like: 1. Execute getResultList() and get the result. 2. Check if the result has and only has  one row.(turns out it throws Exception too when 0 rows is returned, since null has other meaning. Here&#39;s <a href=\"https://stackoverflow.com/questions/2002993/jpa-getsingleresult-or-null\">another question on this topic</a>  ) 3. If everything goes as expected, return the row."}],"tags":[],"owner":{"account_id":11548963,"reputation":36,"user_id":14679352,"display_name":"Cavor Kehl"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693532161,"creation_date":1693532161,"answer_id":77020061,"question_id":77019890,"body_markdown":"[The doc][1] says if the query returned more than one row, it throws `NonUniqueResultException`. Besides, when using `getResultList()`, it returns a `List` rather than an `Object`. When you know it SHOULD return one row, better to use \r\n`getSingleResult()`, because returning more rows in this case is a logic error or the data is in an inconsistent state, better to stop processing.\r\n\r\n  [1]: https://docs.oracle.com/javaee%2F6%2Fapi%2F%2F/javax/persistence/Query.html#getSingleResult()","title":"JPA - getSingleResult vs LIMIT 1","body":"<p><a href=\"https://docs.oracle.com/javaee%2F6%2Fapi%2F%2F/javax/persistence/Query.html#getSingleResult()\" rel=\"nofollow noreferrer\">The doc</a> says if the query returned more than one row, it throws <code>NonUniqueResultException</code>. Besides, when using <code>getResultList()</code>, it returns a <code>List</code> rather than an <code>Object</code>. When you know it SHOULD return one row, better to use\n<code>getSingleResult()</code>, because returning more rows in this case is a logic error or the data is in an inconsistent state, better to stop processing.</p>\n"}],"owner":{"account_id":10703557,"reputation":475,"user_id":7878083,"display_name":"Ray Bond"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77020061,"answer_count":1,"score":1,"last_activity_date":1693532161,"creation_date":1693527476,"question_id":77019890,"body_markdown":"What is the difference between `.getSingleResult()` and `LIMIT 1` for example in the below hibernate 6 query:\r\n\r\n    @Override\r\n    public Test customQuery3(Long id) {\r\n    return (Test) entityManager.createQuery(\r\n                    &quot;SELECT NEW com.view.Test(a.id, b) FROM Author a &quot; +\r\n                            &quot;LEFT JOIN Book b ON b.author.id=a.id &quot; +\r\n                            &quot;WHERE b.id=:id &quot; +\r\n                            &quot;GROUP BY a, b ORDER BY b.newestBook DESC LIMIT 1&quot;)\r\n            .setParameter(&quot;id&quot;, id)\r\n            .getSingleResult();\r\n}\r\n\r\nFrom reading SQL documentation `LIMIT 1` restricts the results to one and in the example above the newest.\r\n\r\nThe documentation on .getSingleResult() appears to do the same albeit with some errors thrown if the id is not found.\r\n\r\nSo why are both needed?","title":"JPA - getSingleResult vs LIMIT 1","body":"<p>What is the difference between <code>.getSingleResult()</code> and <code>LIMIT 1</code> for example in the below hibernate 6 query:</p>\n<pre><code>@Override\npublic Test customQuery3(Long id) {\nreturn (Test) entityManager.createQuery(\n                &quot;SELECT NEW com.view.Test(a.id, b) FROM Author a &quot; +\n                        &quot;LEFT JOIN Book b ON b.author.id=a.id &quot; +\n                        &quot;WHERE b.id=:id &quot; +\n                        &quot;GROUP BY a, b ORDER BY b.newestBook DESC LIMIT 1&quot;)\n        .setParameter(&quot;id&quot;, id)\n        .getSingleResult();\n</code></pre>\n<p>}</p>\n<p>From reading SQL documentation <code>LIMIT 1</code> restricts the results to one and in the example above the newest.</p>\n<p>The documentation on .getSingleResult() appears to do the same albeit with some errors thrown if the id is not found.</p>\n<p>So why are both needed?</p>\n"},{"tags":["java","micronaut"],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693531826,"creation_date":1693531826,"answer_id":77020050,"question_id":77020049,"body_markdown":"For loading the bean eagerly we should use [@Context][1] annotation, by default all Singleton bean definitions as lazy and will only load them on demand.\r\n\r\n&gt;Context scope indicates that the classes life cycle is bound to that of the BeanContext and it should be initialized and shutdown during startup and shutdown of the underlying BeanContext.\r\n\r\n&gt;Micronaut by default treats all Singleton bean definitions as lazy and will only load them on demand. By annotating a bean with @Context you can ensure that the bean is loaded at the same time as the context.\r\n\r\n&gt;WARNING: This annotation should be used sparingly as Micronaut is designed in such a way as to encourage minimal bean creation during startup.\r\n\r\n    @Factory\r\n    public class Config {\r\n\r\n      @Context\r\n      public ResponseScheduler response() {\r\n         System.out.println(&quot;Invoked&quot;);\r\n         //invoking some code\r\n         return new ResponseScheduler(&quot;test&quot;);\r\n       }\r\n    }\r\n\r\n\r\n  [1]: https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/Context.html","title":"Difference between @singleton and @context in micronuat","body":"<p>For loading the bean eagerly we should use <a href=\"https://docs.micronaut.io/latest/api/io/micronaut/context/annotation/Context.html\" rel=\"nofollow noreferrer\">@Context</a> annotation, by default all Singleton bean definitions as lazy and will only load them on demand.</p>\n<blockquote>\n<p>Context scope indicates that the classes life cycle is bound to that of the BeanContext and it should be initialized and shutdown during startup and shutdown of the underlying BeanContext.</p>\n</blockquote>\n<blockquote>\n<p>Micronaut by default treats all Singleton bean definitions as lazy and will only load them on demand. By annotating a bean with @Context you can ensure that the bean is loaded at the same time as the context.</p>\n</blockquote>\n<blockquote>\n<p>WARNING: This annotation should be used sparingly as Micronaut is designed in such a way as to encourage minimal bean creation during startup.</p>\n</blockquote>\n<pre><code>@Factory\npublic class Config {\n\n  @Context\n  public ResponseScheduler response() {\n     System.out.println(&quot;Invoked&quot;);\n     //invoking some code\n     return new ResponseScheduler(&quot;test&quot;);\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693531826,"creation_date":1693531826,"question_id":77020049,"body_markdown":"I have a micronaut application and beans annotated with `@Singleton` are not getting eagerly initialized during application start up. Even setting `eagerInitSingletons` true doesn&#39;t help the beans to be initialized at start up.\r\n\r\n**Main Class**\r\n\r\n    public class Application {\r\n\r\n    public static void main(String[] args) {\r\n        Micronaut.build(args)\r\n                .eagerInitSingletons(true)\r\n                .mainClass(Application.class)\r\n                .start();\r\n      }\r\n   }\r\n\r\n**Factory Class**\r\n\r\n    @Factory\r\n    public class Config {\r\n\r\n      @Singleton\r\n      public ResponseScheduler response() {\r\n        System.out.println(&quot;Invoked&quot;);\r\n        //invoking some code\r\n        return new ResponseScheduler(&quot;test&quot;);\r\n       }\r\n    }\r\n\r\nThe application start up without executing loading the `ResponseScheduler` bean, this `ResponseScheduler` is from third party library and creating bean will create a scheduler with default config. But this bean is not used in any part of the application, it is just a scheduler to periodically check some functionality.\r\n\r\nWith `@Singleton` annotation the bean is not getting initialized, is there a way in micronaut to load the bean for running in background.\r\n\r\n","title":"Difference between @singleton and @context in micronuat","body":"<p>I have a micronaut application and beans annotated with <code>@Singleton</code> are not getting eagerly initialized during application start up. Even setting <code>eagerInitSingletons</code> true doesn't help the beans to be initialized at start up.</p>\n<p><strong>Main Class</strong></p>\n<pre><code>public class Application {\n\npublic static void main(String[] args) {\n    Micronaut.build(args)\n            .eagerInitSingletons(true)\n            .mainClass(Application.class)\n            .start();\n  }\n</code></pre>\n<p>}</p>\n<p><strong>Factory Class</strong></p>\n<pre><code>@Factory\npublic class Config {\n\n  @Singleton\n  public ResponseScheduler response() {\n    System.out.println(&quot;Invoked&quot;);\n    //invoking some code\n    return new ResponseScheduler(&quot;test&quot;);\n   }\n}\n</code></pre>\n<p>The application start up without executing loading the <code>ResponseScheduler</code> bean, this <code>ResponseScheduler</code> is from third party library and creating bean will create a scheduler with default config. But this bean is not used in any part of the application, it is just a scheduler to periodically check some functionality.</p>\n<p>With <code>@Singleton</code> annotation the bean is not getting initialized, is there a way in micronaut to load the bean for running in background.</p>\n"},{"tags":["java","opencv","java-native-interface","java.library.path"],"comments":[{"owner":{"account_id":2035621,"reputation":29377,"user_id":1818045,"accept_rate":89,"display_name":"ben75"},"score":3,"creation_date":1424515315,"post_id":28644735,"comment_id":45587625,"body_markdown":"What is your OS ? What is the full name of your library file ? What is line 8 in hello.java ? What means *project has OpenCV-2.4.9 as one of its libraries* ? (did you put the native lib in classpath ? or something else ?) What is the value of the system variable `java.library.path` (just do `System.out.println(System.getProperty(&quot;java.library.path&quot;));` ? Do you know the difference between a native library and a java library ?","body":"What is your OS ? What is the full name of your library file ? What is line 8 in hello.java ? What means <i>project has OpenCV-2.4.9 as one of its libraries</i> ? (did you put the native lib in classpath ? or something else ?) What is the value of the system variable <code>java.library.path</code> (just do <code>System.out.println(System.getProperty(&quot;java.library.path&quot;));</code> ? Do you know the difference between a native library and a java library ?"},{"owner":{"account_id":3245578,"reputation":569,"user_id":2737268,"accept_rate":41,"display_name":"Zetland"},"score":0,"creation_date":1424521458,"post_id":28644735,"comment_id":45589220,"body_markdown":"I&#39;m using Windows 7. \n\nMy library file&#39;s full name is opencv-249.jar. \n\nLine 8 is `System.loadLibrary( Core.NATIVE_LIBRARY_NAME );`\n\nNot sure about the native library question, but I put it in the bit that appears when you click down on &#39;opencv-249.jar. \n\n`java.library.path` = C:\\Program Files\\OpenCV\\opencv\\build\\x86. \n\nThanks for taking the time to write such a good comment.","body":"I&#39;m using Windows 7.   My library file&#39;s full name is opencv-249.jar.   Line 8 is <code>System.loadLibrary( Core.NATIVE_LIBRARY_NAME );</code>  Not sure about the native library question, but I put it in the bit that appears when you click down on &#39;opencv-249.jar.   <code>java.library.path</code> = C:\\Program Files\\OpenCV\\opencv\\build\\x86.   Thanks for taking the time to write such a good comment."}],"answers":[{"comments":[{"owner":{"account_id":3245578,"reputation":569,"user_id":2737268,"accept_rate":41,"display_name":"Zetland"},"score":0,"creation_date":1424524984,"post_id":28646094,"comment_id":45590215,"body_markdown":"Thanks for this. Where do I put the parameter though? Should it go in the main method?","body":"Thanks for this. Where do I put the parameter though? Should it go in the main method?"},{"owner":{"account_id":2035621,"reputation":29377,"user_id":1818045,"accept_rate":89,"display_name":"ben75"},"score":0,"creation_date":1424527182,"post_id":28646094,"comment_id":45590860,"body_markdown":"on the command line (if you are using command line) . If you are using an IDE (like eclipse) : there must be a field named *VM arguments*  in your &quot;Run configuration&quot; (or something similar). (it is not program args : this is a JVM parameter)","body":"on the command line (if you are using command line) . If you are using an IDE (like eclipse) : there must be a field named <i>VM arguments</i>  in your &quot;Run configuration&quot; (or something similar). (it is not program args : this is a JVM parameter)"},{"owner":{"account_id":3245578,"reputation":569,"user_id":2737268,"accept_rate":41,"display_name":"Zetland"},"score":1,"creation_date":1424529114,"post_id":28646094,"comment_id":45591435,"body_markdown":"Thanks! I can&#39;t find `libopencv_java249.so` though. It doesn&#39;t seem to have been downloaded with OpenCV-2.4.9. Is this something that I need to download separately downloaded?","body":"Thanks! I can&#39;t find <code>libopencv_java249.so</code> though. It doesn&#39;t seem to have been downloaded with OpenCV-2.4.9. Is this something that I need to download separately downloaded?"},{"owner":{"account_id":1453149,"reputation":1909,"user_id":1369473,"accept_rate":100,"display_name":"Fr0zenFyr"},"score":0,"creation_date":1432586013,"post_id":28646094,"comment_id":48973289,"body_markdown":"Gosh!! I got so dumb... I importedd a project in NetBeans from my old lappy and forgot to change this path which was pointing to a non existent location on my brand new system. Thanks man.. I either need some coffee or some sleep...","body":"Gosh!! I got so dumb... I importedd a project in NetBeans from my old lappy and forgot to change this path which was pointing to a non existent location on my brand new system. Thanks man.. I either need some coffee or some sleep..."}],"tags":[],"owner":{"account_id":2035621,"reputation":29377,"user_id":1818045,"accept_rate":89,"display_name":"ben75"},"comment_count":4,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1424523752,"creation_date":1424523752,"answer_id":28646094,"question_id":28644735,"body_markdown":"The problem is that the native opencv library cannot be found because it is not in the `java.library.path` (it is a native library and it should not be in usual java classpath, but it must be in the java.library.path).\r\n\r\nYour opencv distribution should contains:\r\n\r\n- a java library : opencv249.jar. This library is mainly a java to native library with jni stuff allowing you to do native calls from java code. It must be in the classpath (and according the error you have and your explanations : it is on your classpath --&gt; everything is ok here)\r\n\r\n- a native library named `libopencv_java249.so` and this must be in your `java.library.path` . Obviously : it is not : the UnsatisfiedLinkError is the symptom of a missing native library. To include this native library: start your java program with the following parameter: \r\n\r\n    -Djava.library.path=/path/to/the/directory/of/ibopencv_java249.so","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no opencv_java249 in java.library.path","body":"<p>The problem is that the native opencv library cannot be found because it is not in the <code>java.library.path</code> (it is a native library and it should not be in usual java classpath, but it must be in the java.library.path).</p>\n\n<p>Your opencv distribution should contains:</p>\n\n<ul>\n<li><p>a java library : opencv249.jar. This library is mainly a java to native library with jni stuff allowing you to do native calls from java code. It must be in the classpath (and according the error you have and your explanations : it is on your classpath --> everything is ok here)</p></li>\n<li><p>a native library named <code>libopencv_java249.so</code> and this must be in your <code>java.library.path</code> . Obviously : it is not : the UnsatisfiedLinkError is the symptom of a missing native library. To include this native library: start your java program with the following parameter: </p>\n\n<p>-Djava.library.path=/path/to/the/directory/of/ibopencv_java249.so</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4277406,"reputation":1,"user_id":3497709,"display_name":"DK Rajput"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1451979384,"creation_date":1441281657,"answer_id":32375058,"question_id":28644735,"body_markdown":"I had the same issue on ubuntu 14.o and I struggled a lot and found this solution. \r\n\r\n 1. use below line to print your Native lib path:\r\nSystem.out.println(System.getProperty(&quot;java.library.path&quot;));\r\n 2. if you are adding external openc4-version.jar then, in eclipse open\r\nBuildConfigurationPath-&gt;Library-&gt;opencv249.jar-&gt;Native Library\r\nand click edit and choose external folder which will be located inside /home/dav/Downloads/opencv-2.4.9/build/lib\r\n\r\nBefore this I built opencv as they metioned in java-opencv quickstart tutorial by creating build folder inside opencv unziped folder then ran 2 commands\r\n1.cmake -DBUILD_SHARED_LIBS=OFF ..\r\nif you get error then check make installed or not\r\n2.make -j8\r\n\r\nDone.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/6gcSM.png","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no opencv_java249 in java.library.path","body":"<p>I had the same issue on ubuntu 14.o and I struggled a lot and found this solution. </p>\n\n<ol>\n<li>use below line to print your Native lib path:\nSystem.out.println(System.getProperty(\"java.library.path\"));</li>\n<li>if you are adding external openc4-version.jar then, in eclipse open\nBuildConfigurationPath->Library->opencv249.jar->Native Library\nand click edit and choose external folder which will be located inside /home/dav/Downloads/opencv-2.4.9/build/lib</li>\n</ol>\n\n<p>Before this I built opencv as they metioned in java-opencv quickstart tutorial by creating build folder inside opencv unziped folder then ran 2 commands\n1.cmake -DBUILD_SHARED_LIBS=OFF ..\nif you get error then check make installed or not\n2.make -j8</p>\n\n<p>Done.</p>\n"},{"tags":[],"owner":{"account_id":10122130,"reputation":1238,"user_id":7478712,"accept_rate":80,"display_name":"Ognjen Mišić"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1490349930,"creation_date":1490348762,"answer_id":42996093,"question_id":28644735,"body_markdown":"Another possible solution which worked for me on Ubuntu:\r\nInstead of setting the JVM parameter to the exact `libopen.so` file, try setting it to the folder:\r\n\r\n    -Djava.library.path=/opencv-3.2.0/opencv/build/lib/","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no opencv_java249 in java.library.path","body":"<p>Another possible solution which worked for me on Ubuntu:\nInstead of setting the JVM parameter to the exact <code>libopen.so</code> file, try setting it to the folder:</p>\n\n<pre><code>-Djava.library.path=/opencv-3.2.0/opencv/build/lib/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20917870,"reputation":1,"user_id":15367164,"display_name":"clara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615369924,"creation_date":1615369592,"answer_id":66562118,"question_id":28644735,"body_markdown":"good day!i saw this one from the other forum. \r\n\r\nhttps://stackoverflow.com/questions/957700/how-to-set-the-java-library-path-from-eclipse?newreg=67155181ff574e98b88cae1c3f7dec15\r\n\r\ni found out that you should copy the .dll file from your opencv and paste it to your windows folder. to do that, kindly locate the .dll from this path folder \r\n\r\n**opencv&gt;build&gt;java&gt;x64 (for 64bit platform)** \r\nor \r\n**opencv&gt;build&gt;java&gt;x86 (for x86/32 bit platform).** \r\n\r\ncopy the .dll file and paste it to your windows folder ( c:/windows ) after that you may recompile your work to check if it works. \r\n\r\n***note this tutorial is applicable only if you already set the .jar file of opencv to the preference setting of eclipse.**\r\n\r\nthis method works for me.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no opencv_java249 in java.library.path","body":"<p>good day!i saw this one from the other forum.</p>\n<p><a href=\"https://stackoverflow.com/questions/957700/how-to-set-the-java-library-path-from-eclipse?newreg=67155181ff574e98b88cae1c3f7dec15\">How to set the java.library.path from Eclipse</a></p>\n<p>i found out that you should copy the .dll file from your opencv and paste it to your windows folder. to do that, kindly locate the .dll from this path folder</p>\n<p><strong>opencv&gt;build&gt;java&gt;x64 (for 64bit platform)</strong>\nor\n<strong>opencv&gt;build&gt;java&gt;x86 (for x86/32 bit platform).</strong></p>\n<p>copy the .dll file and paste it to your windows folder ( c:/windows ) after that you may recompile your work to check if it works.</p>\n<p>*<strong>note this tutorial is applicable only if you already set the .jar file of opencv to the preference setting of eclipse.</strong></p>\n<p>this method works for me.</p>\n"},{"tags":[],"owner":{"account_id":14804379,"reputation":1,"user_id":10691814,"display_name":"M. REYSEY"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646742720,"creation_date":1646698203,"answer_id":71388619,"question_id":28644735,"body_markdown":"Using Java in Netbeans, when including \r\n    \r\n    -Djava.library.path=&quot;E:\\Program Files\\opencv\\build\\java\\x64&quot; \r\n\r\nin the `Project Property&gt;Run` I just forgot the double quotes between the path. Add double quotes then everything worked fine.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no opencv_java249 in java.library.path","body":"<p>Using Java in Netbeans, when including</p>\n<pre><code>-Djava.library.path=&quot;E:\\Program Files\\opencv\\build\\java\\x64&quot; \n</code></pre>\n<p>in the <code>Project Property&gt;Run</code> I just forgot the double quotes between the path. Add double quotes then everything worked fine.</p>\n"},{"tags":[],"owner":{"account_id":15751044,"reputation":381,"user_id":11365594,"display_name":"Jasper"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693531325,"creation_date":1693531325,"answer_id":77020029,"question_id":28644735,"body_markdown":"Hi if someone is still facing  the same challenge on intelij, you can easily config this by first downloading OpenCv [here][1] then you can then click on file&gt;Project Structure\r\n\r\n[![snip][2]][2]\r\nClick on + sign as shown on the image\r\nSelect Jars/directories\r\nThen navigate to the opencv installation folder as shown \r\n[![link][3]][3]\r\nthen double click opencv-version.jar\r\n[![opencv][4]][4]\r\n\r\nthen click add [![add][5]][5]\r\n\r\nThen select either 1 or 2 as shown below based on your OS\r\n[![os][6]][6]\r\n\r\nAfter that click okay okay and then try to run the application again\r\n\r\nThis solution was inspired by [this][7] article \r\n\r\n\r\n  [1]: https://opencv.org/releases/page/1/\r\n  [2]: https://i.stack.imgur.com/OYlRu.png\r\n  [3]: https://i.stack.imgur.com/iuPK0.png\r\n  [4]: https://i.stack.imgur.com/B9L5r.png\r\n  [5]: https://i.stack.imgur.com/aGHyx.png\r\n  [6]: https://i.stack.imgur.com/bBIeH.png\r\n  [7]: https://medium.com/@aadimator/how-to-set-up-opencv-in-intellij-idea-6eb103c1d45c#:~:text=Select%20Modules%20from%20the%20side,the%20Add%20Jar%2FDirectory%20option.&amp;text=Then%20browse%20to%20the%20path,%2Fopencv%2D***.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no opencv_java249 in java.library.path","body":"<p>Hi if someone is still facing  the same challenge on intelij, you can easily config this by first downloading OpenCv <a href=\"https://opencv.org/releases/page/1/\" rel=\"nofollow noreferrer\">here</a> then you can then click on file&gt;Project Structure</p>\n<p><a href=\"https://i.stack.imgur.com/OYlRu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OYlRu.png\" alt=\"snip\" /></a>\nClick on + sign as shown on the image\nSelect Jars/directories\nThen navigate to the opencv installation folder as shown\n<a href=\"https://i.stack.imgur.com/iuPK0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iuPK0.png\" alt=\"link\" /></a>\nthen double click opencv-version.jar\n<a href=\"https://i.stack.imgur.com/B9L5r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B9L5r.png\" alt=\"opencv\" /></a></p>\n<p>then click add <a href=\"https://i.stack.imgur.com/aGHyx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aGHyx.png\" alt=\"add\" /></a></p>\n<p>Then select either 1 or 2 as shown below based on your OS\n<a href=\"https://i.stack.imgur.com/bBIeH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bBIeH.png\" alt=\"os\" /></a></p>\n<p>After that click okay okay and then try to run the application again</p>\n<p>This solution was inspired by <a href=\"https://medium.com/@aadimator/how-to-set-up-opencv-in-intellij-idea-6eb103c1d45c#:%7E:text=Select%20Modules%20from%20the%20side,the%20Add%20Jar%2FDirectory%20option.&amp;text=Then%20browse%20to%20the%20path,%2Fopencv%2D***.\" rel=\"nofollow noreferrer\">this</a> article</p>\n"}],"owner":{"account_id":3245578,"reputation":569,"user_id":2737268,"accept_rate":41,"display_name":"Zetland"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29222,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":6,"score":4,"last_activity_date":1693531325,"creation_date":1424514722,"question_id":28644735,"body_markdown":"I&#39;m currently trying to set up OpenCV on my 32-bit laptop, but I keep getting an error message which is confusing me:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no opencv_java249 in java.library.path\r\n    at java.lang.ClassLoader.loadLibrary(Unknown Source)\r\n\tat java.lang.Runtime.loadLibrary0(Unknown Source)\r\n\tat java.lang.System.loadLibrary(Unknown Source)\r\n\tat hello.main(hello.java:8)\r\n\r\nI&#39;ve tried switching a few things around, like going into User Libraries and changing the Native Library Location to \\x64 instead of \\x86, but that hasn&#39;t worked. I&#39;ve also made sure that my Java project has OpenCV-2.4.9 as one of its libraries, which it has. I&#39;ve also tried &#39;cleaning&#39; all projects, but that hasn&#39;t worked (does it ever?). So I&#39;ve followed all the instructions in the set-up tutorial but it still isn&#39;t working.\r\n\r\nDoes anyone know what the problem might be here? Thanks in advance...","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no opencv_java249 in java.library.path","body":"<p>I'm currently trying to set up OpenCV on my 32-bit laptop, but I keep getting an error message which is confusing me:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no opencv_java249 in java.library.path\nat java.lang.ClassLoader.loadLibrary(Unknown Source)\nat java.lang.Runtime.loadLibrary0(Unknown Source)\nat java.lang.System.loadLibrary(Unknown Source)\nat hello.main(hello.java:8)\n</code></pre>\n\n<p>I've tried switching a few things around, like going into User Libraries and changing the Native Library Location to \\x64 instead of \\x86, but that hasn't worked. I've also made sure that my Java project has OpenCV-2.4.9 as one of its libraries, which it has. I've also tried 'cleaning' all projects, but that hasn't worked (does it ever?). So I've followed all the instructions in the set-up tutorial but it still isn't working.</p>\n\n<p>Does anyone know what the problem might be here? Thanks in advance...</p>\n"},{"tags":["java","sql-server","driver","pom.xml","talend"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1693402296,"post_id":77008505,"comment_id":135756073,"body_markdown":"*i have this :* [Please never post images of text](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly. Try adding JAXB dependency to [your pom](https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api/2.3.1)","body":"<i>i have this :</i> <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Please never post images of text</a>. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly. Try adding JAXB dependency to <a href=\"https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api/2.3.1\" rel=\"nofollow noreferrer\">your pom</a>"}],"answers":[{"comments":[{"owner":{"account_id":29329846,"reputation":11,"user_id":22471537,"display_name":"Max"},"score":0,"creation_date":1693405385,"post_id":77008767,"comment_id":135756861,"body_markdown":"Thanks for yoyr answer. I will try this","body":"Thanks for yoyr answer. I will try this"},{"owner":{"account_id":9365949,"reputation":2414,"user_id":6950859,"accept_rate":92,"display_name":"cela"},"score":0,"creation_date":1693411742,"post_id":77008767,"comment_id":135758324,"body_markdown":"@Max Let me know if it works or not!","body":"@Max Let me know if it works or not!"}],"tags":[],"owner":{"account_id":9365949,"reputation":2414,"user_id":6950859,"accept_rate":92,"display_name":"cela"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693529449,"creation_date":1693404194,"answer_id":77008767,"question_id":77008505,"body_markdown":"[Talend 8][1] supports and recommends Java 11, with some caveats in specific cases stated in the documentation. The `javax.xml.bind` module was removed starting with Java 11.\r\n\r\nYou have to add it manually as a dependency in your POM.\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.3.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://help.talend.com/r/en-US/8.0/data-catalog-installation-and-upgrade-guide-windows/compatible-java-runtime-environments","title":"Talend DI V8 : Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter","body":"<p><a href=\"https://help.talend.com/r/en-US/8.0/data-catalog-installation-and-upgrade-guide-windows/compatible-java-runtime-environments\" rel=\"nofollow noreferrer\">Talend 8</a> supports and recommends Java 11, with some caveats in specific cases stated in the documentation. The <code>javax.xml.bind</code> module was removed starting with Java 11.</p>\n<p>You have to add it manually as a dependency in your POM.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":29329846,"reputation":11,"user_id":22471537,"display_name":"Max"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693529449,"creation_date":1693402129,"question_id":77008505,"body_markdown":"I&#39;ve encountered an issue with a component in Talend DI V8. I recently transitioned from Talend V7 to Talend V8 locally and need to migrate my old job to this new version due to a database change.\r\n\r\nIn Talend V7, my job successfully connects to the SQL Server database and executes without issues. However, when I attempt to run the job in Talend V8, I encounter the following error:\r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:4098)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:3160)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection.access$100(SQLServerConnection.java:43)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:3123)\r\n    \tat com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7505)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2445)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1981)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:1628)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:1459)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:773)\r\n    \tat com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1168)\r\n    \tat java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\r\n    \tat java.sql/java.sql.DriverManager.getConnection(DriverManager.java:228)\r\n    \tat interfaces...\r\n    Caused by: java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n    \t... 19 more\r\n\r\nBefore running my job, I had to locate and integrate the `sqljdbc41-6.0.8112.jar` driver for my `tDBConnection` component.\r\n\r\nCould this be a driver issue? Or might I need to make modifications in my POM files or dependencies?\r\n\r\nI&#39;ve attempted to use different drivers, but they didn&#39;t seem to resolve the problem. I&#39;m considering making changes to my POM files.\r\n","title":"Talend DI V8 : Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter","body":"<p>I've encountered an issue with a component in Talend DI V8. I recently transitioned from Talend V7 to Talend V8 locally and need to migrate my old job to this new version due to a database change.</p>\n<p>In Talend V7, my job successfully connects to the SQL Server database and executes without issues. However, when I attempt to run the job in Talend V8, I encounter the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:4098)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:3160)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.access$100(SQLServerConnection.java:43)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:3123)\n    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7505)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2445)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1981)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:1628)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:1459)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:773)\n    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1168)\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:228)\n    at interfaces...\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n    ... 19 more\n</code></pre>\n<p>Before running my job, I had to locate and integrate the <code>sqljdbc41-6.0.8112.jar</code> driver for my <code>tDBConnection</code> component.</p>\n<p>Could this be a driver issue? Or might I need to make modifications in my POM files or dependencies?</p>\n<p>I've attempted to use different drivers, but they didn't seem to resolve the problem. I'm considering making changes to my POM files.</p>\n"},{"tags":["java","email","amazon-web-services"],"comments":[{"owner":{"account_id":49931,"reputation":25463,"user_id":148844,"accept_rate":67,"display_name":"Chloe"},"score":1,"creation_date":1548546525,"post_id":7963439,"comment_id":95580569,"body_markdown":"https://docs.aws.amazon.com/ses/latest/DeveloperGuide/examples-send-raw-using-sdk.html","body":"<a href=\"https://docs.aws.amazon.com/ses/latest/DeveloperGuide/examples-send-raw-using-sdk.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/ses/latest/DeveloperGuide/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":363819,"reputation":683,"user_id":707808,"accept_rate":64,"display_name":"Jason"},"score":0,"creation_date":1320177411,"post_id":7971669,"comment_id":9748316,"body_markdown":"Thanks, this looks like what I&#39;m after.","body":"Thanks, this looks like what I&#39;m after."},{"owner":{"account_id":1275039,"reputation":1174,"user_id":1230483,"accept_rate":44,"display_name":"Aashish Katta"},"score":0,"creation_date":1345616544,"post_id":7971669,"comment_id":16117912,"body_markdown":"I am not able to find the class &quot;MailAWSCredentials&quot; and &quot;AWStransport&quot;. Kindly help","body":"I am not able to find the class &quot;MailAWSCredentials&quot; and &quot;AWStransport&quot;. Kindly help"}],"tags":[],"owner":{"account_id":333568,"reputation":168,"user_id":659494,"display_name":"Ivan Savchenko"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1320175156,"creation_date":1320175156,"answer_id":7971669,"question_id":7963439,"body_markdown":"Maybe a little bit late, but you can use this code (you also need Java Mail):\r\n\r\n    public class MailSender\r\n    {\r\n          private Transport AWSTransport;\r\n          ...\r\n          //Initialize transport\r\n          private void initAWSTransport() throws MessagingException\r\n          {\r\n            String keyID = &lt;your key id&gt;\r\n            String secretKey = &lt;your secret key&gt;\r\n            MailAWSCredentials credentials = new MailAWSCredentials();\r\n            credentials.setCredentials(keyID, secretKey);\r\n            AmazonSimpleEmailService ses = new AmazonSimpleEmailServiceClient(credentials);\r\n            Properties props = new Properties();\r\n        \t\tprops.setProperty(&quot;mail.transport.protocol&quot;, &quot;aws&quot;);\r\n            props.setProperty(&quot;mail.aws.user&quot;, credentials.getAWSAccessKeyId());\r\n            props.setProperty(&quot;mail.aws.password&quot;, credentials.getAWSSecretKey());\r\n            AWSsession = Session.getInstance(props);\r\n            AWStransport = new AWSJavaMailTransport(AWSsession, null);\r\n            AWStransport.connect();\r\n          }\r\n\r\n      public void sendEmail(byte[] attachment)\r\n      {\r\n        //mail properties\r\n        String senderAddress = &lt;Sender address&gt;;\r\n        String recipientAddress = &lt;Recipient address&gt;;\r\n        String subject = &lt;Mail subject&gt;;\r\n        String text = &lt;Your text&gt;;\r\n        String mimeTypeOfText = &lt;MIME type of text part&gt;;\r\n        String fileMimeType = &lt;MIME type of your attachment&gt;;\r\n        String fileName = &lt;Name of attached file&gt;;\r\n\r\n        initAWSTransport();\r\n\r\n        try\r\n        {\r\n          // Create new message\r\n          Message msg = new MimeMessage(AWSsession);\r\n          msg.setFrom(new InternetAddress(senderAddress));\r\n          msg.addRecipient(Message.RecipientType.TO, new InternetAddress(recipientAddress));\r\n          msg.setSubject(subject);\r\n\r\n          //Text part\r\n          Multipart multipart = new MimeMultipart();\r\n          BodyPart messageBodyPart = new MimeBodyPart();\r\n          messageBodyPart.setContent(text, mimeTypeOfText);\r\n          multipart.addBodyPart(messageBodyPart);\r\n\r\n          //Attachment part\r\n          if (attachment != null &amp;&amp; attachment.length != 0)\r\n          {\r\n            messageBodyPart = new MimeBodyPart();\r\n            DataSource source = new ByteArrayDataSource(attachment,fileMimeType);\r\n            messageBodyPart.setDataHandler(new DataHandler(source));\r\n            messageBodyPart.setFileName(fileName);\r\n            multipart.addBodyPart(messageBodyPart);\r\n          }\r\n          msg.setContent(multipart);\r\n\r\n          //send message\r\n          msg.saveChanges();\r\n          AWSTransport.sendMessage(msg, null);\r\n        } catch (MessagingException e){...}\r\n      }\r\n    }","title":"Example of sending an email with attachment via Amazon in Java","body":"<p>Maybe a little bit late, but you can use this code (you also need Java Mail):</p>\n\n<pre><code>public class MailSender\n{\n      private Transport AWSTransport;\n      ...\n      //Initialize transport\n      private void initAWSTransport() throws MessagingException\n      {\n        String keyID = &lt;your key id&gt;\n        String secretKey = &lt;your secret key&gt;\n        MailAWSCredentials credentials = new MailAWSCredentials();\n        credentials.setCredentials(keyID, secretKey);\n        AmazonSimpleEmailService ses = new AmazonSimpleEmailServiceClient(credentials);\n        Properties props = new Properties();\n            props.setProperty(\"mail.transport.protocol\", \"aws\");\n        props.setProperty(\"mail.aws.user\", credentials.getAWSAccessKeyId());\n        props.setProperty(\"mail.aws.password\", credentials.getAWSSecretKey());\n        AWSsession = Session.getInstance(props);\n        AWStransport = new AWSJavaMailTransport(AWSsession, null);\n        AWStransport.connect();\n      }\n\n  public void sendEmail(byte[] attachment)\n  {\n    //mail properties\n    String senderAddress = &lt;Sender address&gt;;\n    String recipientAddress = &lt;Recipient address&gt;;\n    String subject = &lt;Mail subject&gt;;\n    String text = &lt;Your text&gt;;\n    String mimeTypeOfText = &lt;MIME type of text part&gt;;\n    String fileMimeType = &lt;MIME type of your attachment&gt;;\n    String fileName = &lt;Name of attached file&gt;;\n\n    initAWSTransport();\n\n    try\n    {\n      // Create new message\n      Message msg = new MimeMessage(AWSsession);\n      msg.setFrom(new InternetAddress(senderAddress));\n      msg.addRecipient(Message.RecipientType.TO, new InternetAddress(recipientAddress));\n      msg.setSubject(subject);\n\n      //Text part\n      Multipart multipart = new MimeMultipart();\n      BodyPart messageBodyPart = new MimeBodyPart();\n      messageBodyPart.setContent(text, mimeTypeOfText);\n      multipart.addBodyPart(messageBodyPart);\n\n      //Attachment part\n      if (attachment != null &amp;&amp; attachment.length != 0)\n      {\n        messageBodyPart = new MimeBodyPart();\n        DataSource source = new ByteArrayDataSource(attachment,fileMimeType);\n        messageBodyPart.setDataHandler(new DataHandler(source));\n        messageBodyPart.setFileName(fileName);\n        multipart.addBodyPart(messageBodyPart);\n      }\n      msg.setContent(multipart);\n\n      //send message\n      msg.saveChanges();\n      AWSTransport.sendMessage(msg, null);\n    } catch (MessagingException e){...}\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":438607,"reputation":183,"user_id":826975,"display_name":"Christiano Guedes"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1393250366,"creation_date":1393250366,"answer_id":21989928,"question_id":7963439,"body_markdown":"Maybe a little bit late too.\r\nAlternative to send mail using Java Mail and Amazon Raw Mail Sender\r\n\r\n\tpublic static void sendMail(String subject, String message, byte[] attachement, String fileName, String contentType, String from, String[] to) {\r\n\t\ttry {\r\n\t\t\t// JavaMail representation of the message\r\n\t\t\tSession s = Session.getInstance(new Properties(), null);\r\n\t\t\tMimeMessage mimeMessage = new MimeMessage(s);\r\n\r\n\t\t\t// Sender and recipient\r\n\t\t\tmimeMessage.setFrom(new InternetAddress(from));\r\n\t\t\tfor (String toMail : to) {\r\n\t\t\t\tmimeMessage.addRecipient(javax.mail.Message.RecipientType.TO, new InternetAddress(toMail));\r\n\t\t\t}\r\n\r\n\t\t\t// Subject\r\n\t\t\tmimeMessage.setSubject(subject);\r\n\r\n\t\t\t// Add a MIME part to the message\r\n\t\t\tMimeMultipart mimeBodyPart = new MimeMultipart();\r\n\t\t\tBodyPart part = new MimeBodyPart();\r\n\t\t\tpart.setContent(message, MediaType.TEXT_HTML);\r\n\t\t\tmimeBodyPart.addBodyPart(part);\r\n\r\n\t\t\t// Add a attachement to the message\r\n\t\t\tpart = new MimeBodyPart();\r\n\t\t\tDataSource source = new ByteArrayDataSource(attachement, contentType);\r\n\t\t\tpart.setDataHandler(new DataHandler(source));\r\n\t\t\tpart.setFileName(fileName);\r\n\t\t\tmimeBodyPart.addBodyPart(part);\r\n\r\n\t\t\tmimeMessage.setContent(mimeBodyPart);\r\n\r\n\t\t\t// Create Raw message\r\n\t\t\tByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n\t\t\tmimeMessage.writeTo(outputStream);\r\n\t\t\tRawMessage rawMessage = new RawMessage(ByteBuffer.wrap(outputStream.toByteArray()));\r\n\r\n\t\t\t// Credentials\r\n\t\t\tString keyID = &quot;&quot;;// &lt;your key id&gt;\r\n\t\t\tString secretKey = &quot;&quot;;// &lt;your secret key&gt;\r\n\t\t\tAWSCredentials credentials = new BasicAWSCredentials(keyID, secretKey);\r\n\t\t\tAmazonSimpleEmailServiceClient client = new AmazonSimpleEmailServiceClient(credentials);\r\n\r\n\t\t\t// Send Mail\r\n\t\t\tSendRawEmailRequest rawEmailRequest = new SendRawEmailRequest(rawMessage);\r\n\t\t\trawEmailRequest.setDestinations(Arrays.asList(to));\r\n\t\t\trawEmailRequest.setSource(from);\r\n\t\t\tclient.sendRawEmail(rawEmailRequest);\r\n\r\n\t\t} catch (IOException | MessagingException e) {\r\n\t\t\t// your Exception\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}","title":"Example of sending an email with attachment via Amazon in Java","body":"<p>Maybe a little bit late too.\nAlternative to send mail using Java Mail and Amazon Raw Mail Sender</p>\n\n<pre><code>public static void sendMail(String subject, String message, byte[] attachement, String fileName, String contentType, String from, String[] to) {\n    try {\n        // JavaMail representation of the message\n        Session s = Session.getInstance(new Properties(), null);\n        MimeMessage mimeMessage = new MimeMessage(s);\n\n        // Sender and recipient\n        mimeMessage.setFrom(new InternetAddress(from));\n        for (String toMail : to) {\n            mimeMessage.addRecipient(javax.mail.Message.RecipientType.TO, new InternetAddress(toMail));\n        }\n\n        // Subject\n        mimeMessage.setSubject(subject);\n\n        // Add a MIME part to the message\n        MimeMultipart mimeBodyPart = new MimeMultipart();\n        BodyPart part = new MimeBodyPart();\n        part.setContent(message, MediaType.TEXT_HTML);\n        mimeBodyPart.addBodyPart(part);\n\n        // Add a attachement to the message\n        part = new MimeBodyPart();\n        DataSource source = new ByteArrayDataSource(attachement, contentType);\n        part.setDataHandler(new DataHandler(source));\n        part.setFileName(fileName);\n        mimeBodyPart.addBodyPart(part);\n\n        mimeMessage.setContent(mimeBodyPart);\n\n        // Create Raw message\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        mimeMessage.writeTo(outputStream);\n        RawMessage rawMessage = new RawMessage(ByteBuffer.wrap(outputStream.toByteArray()));\n\n        // Credentials\n        String keyID = \"\";// &lt;your key id&gt;\n        String secretKey = \"\";// &lt;your secret key&gt;\n        AWSCredentials credentials = new BasicAWSCredentials(keyID, secretKey);\n        AmazonSimpleEmailServiceClient client = new AmazonSimpleEmailServiceClient(credentials);\n\n        // Send Mail\n        SendRawEmailRequest rawEmailRequest = new SendRawEmailRequest(rawMessage);\n        rawEmailRequest.setDestinations(Arrays.asList(to));\n        rawEmailRequest.setSource(from);\n        client.sendRawEmail(rawEmailRequest);\n\n    } catch (IOException | MessagingException e) {\n        // your Exception\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":49931,"reputation":25463,"user_id":148844,"accept_rate":67,"display_name":"Chloe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548552819,"creation_date":1548552819,"answer_id":54384366,"question_id":7963439,"body_markdown":"Here is an updated, cleaned up version with logging and check for production.\r\n\r\n\tpublic void sendEmail(String to, String subject, String body, String attachment, String mimeType, String fileName) {\r\n\t\tif (to == null) return;\r\n\t\t\r\n\t\tString environment = System.getProperty(&quot;ENVIRONMENT&quot;, System.getenv(&quot;ENVIRONMENT&quot;));\r\n\t\tString logMessage;\r\n\t\tif (environment != null &amp;&amp; environment.equals(&quot;production&quot;)) {\r\n\t\t\tlogMessage = &quot;Sent email to &quot; + to + &quot;.&quot;;\r\n\t\t} else {\r\n\t\t\tto = &quot;success@simulator.amazonses.com&quot;;\r\n\t\t\tlogMessage = &quot;Email sent to success@simulator.amazonses.com because $ENVIRONMENT != &#39;production&#39;&quot;;\r\n\t\t}\r\n\r\n\t\t// https://docs.aws.amazon.com/ses/latest/DeveloperGuide/examples-send-raw-using-sdk.html\r\n    \tSession session = Session.getDefaultInstance(new Properties());\r\n        MimeMessage message = new MimeMessage(session);\r\n        try {\r\n\t        message.setSubject(subject, &quot;UTF-8&quot;);\r\n\t        message.setFrom(new InternetAddress(FROM));\r\n\t        message.setRecipients(javax.mail.Message.RecipientType.TO, InternetAddress.parse(to));\r\n\t\t        MimeMultipart msg = new MimeMultipart(&quot;mixed&quot;);\r\n\t\t\t        MimeBodyPart wrap = new MimeBodyPart();\r\n\t\t\t\t        MimeMultipart msgBody = new MimeMultipart(&quot;alternative&quot;);\r\n\t\t\t\t\t        MimeBodyPart textPart = new MimeBodyPart();\r\n\t\t\t\t\t        MimeBodyPart htmlPart = new MimeBodyPart();\r\n\t\t\t\t\t        textPart.setContent(body, &quot;text/plain; charset=UTF-8&quot;);\r\n\t\t\t\t\t        htmlPart.setContent(body,&quot;text/html; charset=UTF-8&quot;);\r\n\t\t\t\t        msgBody.addBodyPart(textPart);\r\n\t\t\t\t        msgBody.addBodyPart(htmlPart);\r\n\t\t\t        wrap.setContent(msgBody);\r\n\t\t        msg.addBodyPart(wrap);\r\n\t\t\t        MimeBodyPart att = new MimeBodyPart();\r\n\t\t\t        att.setDataHandler(new DataHandler(attachment, mimeType));\r\n\t\t\t        att.setFileName(fileName);\r\n    //\t\t\t        DataSource fds = new FileDataSource(attachment);\r\n    //\t\t\t        att.setDataHandler(new DataHandler(fds));\r\n    //\t\t\t        att.setFileName(fds.getName());\r\n\t\t        msg.addBodyPart(att);\r\n\t        message.setContent(msg);\r\n        \r\n\t\t\tAmazonSimpleEmailService client = AmazonSimpleEmailServiceClientBuilder\r\n\t\t\t\t\t.standard().withRegion(Regions.US_EAST_1).build();\r\n            message.writeTo(System.out);\r\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n            message.writeTo(outputStream);\r\n            RawMessage rawMessage = new RawMessage(ByteBuffer.wrap(outputStream.toByteArray()));\r\n            SendRawEmailRequest rawEmailRequest = new SendRawEmailRequest(rawMessage);\r\n    //            \t\t    .withConfigurationSetName(CONFIGURATION_SET);\r\n            client.sendRawEmail(rawEmailRequest);\r\n\t\t\tLogger.info(this.getClass(), &quot;sendEmail()&quot;, logMessage);\r\n\t\t} catch (Exception ex) {\r\n\t\t\tLogger.info(this.getClass(), &quot;sendEmail()&quot;, &quot;The email was not sent. Error: &quot; + ex.getMessage());\r\n        }\r\n    }\r\n\r\nhttps://docs.aws.amazon.com/ses/latest/DeveloperGuide/examples-send-raw-using-sdk.html\r\n\r\n&gt; You use a shared credentials file to pass your AWS access key ID and secret access key. As an alternative to using a shared credentials file, you can specify your AWS access key ID and secret access key by setting two environment variables (AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY, respectively).","title":"Example of sending an email with attachment via Amazon in Java","body":"<p>Here is an updated, cleaned up version with logging and check for production.</p>\n\n<pre><code>public void sendEmail(String to, String subject, String body, String attachment, String mimeType, String fileName) {\n    if (to == null) return;\n\n    String environment = System.getProperty(\"ENVIRONMENT\", System.getenv(\"ENVIRONMENT\"));\n    String logMessage;\n    if (environment != null &amp;&amp; environment.equals(\"production\")) {\n        logMessage = \"Sent email to \" + to + \".\";\n    } else {\n        to = \"success@simulator.amazonses.com\";\n        logMessage = \"Email sent to success@simulator.amazonses.com because $ENVIRONMENT != 'production'\";\n    }\n\n    // https://docs.aws.amazon.com/ses/latest/DeveloperGuide/examples-send-raw-using-sdk.html\n    Session session = Session.getDefaultInstance(new Properties());\n    MimeMessage message = new MimeMessage(session);\n    try {\n        message.setSubject(subject, \"UTF-8\");\n        message.setFrom(new InternetAddress(FROM));\n        message.setRecipients(javax.mail.Message.RecipientType.TO, InternetAddress.parse(to));\n            MimeMultipart msg = new MimeMultipart(\"mixed\");\n                MimeBodyPart wrap = new MimeBodyPart();\n                    MimeMultipart msgBody = new MimeMultipart(\"alternative\");\n                        MimeBodyPart textPart = new MimeBodyPart();\n                        MimeBodyPart htmlPart = new MimeBodyPart();\n                        textPart.setContent(body, \"text/plain; charset=UTF-8\");\n                        htmlPart.setContent(body,\"text/html; charset=UTF-8\");\n                    msgBody.addBodyPart(textPart);\n                    msgBody.addBodyPart(htmlPart);\n                wrap.setContent(msgBody);\n            msg.addBodyPart(wrap);\n                MimeBodyPart att = new MimeBodyPart();\n                att.setDataHandler(new DataHandler(attachment, mimeType));\n                att.setFileName(fileName);\n//                  DataSource fds = new FileDataSource(attachment);\n//                  att.setDataHandler(new DataHandler(fds));\n//                  att.setFileName(fds.getName());\n            msg.addBodyPart(att);\n        message.setContent(msg);\n\n        AmazonSimpleEmailService client = AmazonSimpleEmailServiceClientBuilder\n                .standard().withRegion(Regions.US_EAST_1).build();\n        message.writeTo(System.out);\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        message.writeTo(outputStream);\n        RawMessage rawMessage = new RawMessage(ByteBuffer.wrap(outputStream.toByteArray()));\n        SendRawEmailRequest rawEmailRequest = new SendRawEmailRequest(rawMessage);\n//                      .withConfigurationSetName(CONFIGURATION_SET);\n        client.sendRawEmail(rawEmailRequest);\n        Logger.info(this.getClass(), \"sendEmail()\", logMessage);\n    } catch (Exception ex) {\n        Logger.info(this.getClass(), \"sendEmail()\", \"The email was not sent. Error: \" + ex.getMessage());\n    }\n}\n</code></pre>\n\n<p><a href=\"https://docs.aws.amazon.com/ses/latest/DeveloperGuide/examples-send-raw-using-sdk.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/ses/latest/DeveloperGuide/examples-send-raw-using-sdk.html</a></p>\n\n<blockquote>\n  <p>You use a shared credentials file to pass your AWS access key ID and secret access key. As an alternative to using a shared credentials file, you can specify your AWS access key ID and secret access key by setting two environment variables (AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY, respectively).</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1304331,"reputation":1454,"user_id":1253613,"accept_rate":71,"display_name":"zalpha314"},"score":0,"creation_date":1588880076,"post_id":59099485,"comment_id":109078849,"body_markdown":"Worked like a charm!","body":"Worked like a charm!"}],"tags":[],"owner":{"account_id":7717417,"reputation":4037,"user_id":5844686,"display_name":"Big Pumpkin"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575008106,"creation_date":1575007441,"answer_id":59099485,"question_id":7963439,"body_markdown":"https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-raw.html has an example that sends both html and text bodies (with an attachment, of course). FWIW, here is the conversion and reorganization of its Java code to Kotlin. The dependency is `&#39;com.sun.mail:javax.mail:1.6.2&#39;`.\r\n\r\n    data class Attachment(val fileName: String, val contentType: String, val data: ByteArray)\r\n    \r\n    fun sendEmailWithAttachment(from: String, to: List&lt;String&gt;, subject: String, htmlBody: String, textBody: String,\r\n                                attachment: Attachment) {\r\n        try {\r\n            val textPart = MimeBodyPart().apply {\r\n                setContent(textBody, &quot;text/plain; charset=UTF-8&quot;)\r\n            }\r\n    \r\n            val htmlPart = MimeBodyPart().apply {\r\n                setContent(htmlBody, &quot;text/html; charset=UTF-8&quot;)\r\n            }\r\n    \r\n            // Create a multipart/alternative child container.\r\n            val childPart = MimeMultipart(&quot;alternative&quot;).apply {\r\n                // Add the text and HTML parts to the child container.\r\n                addBodyPart(textPart)\r\n                addBodyPart(htmlPart)\r\n            }\r\n    \r\n            // Create a wrapper for the HTML and text parts.\r\n            val childWrapper = MimeBodyPart().apply {\r\n                setContent(childPart)\r\n            }\r\n    \r\n            // Define the attachment\r\n            val dataSource = ByteArrayDataSource(attachment.data, attachment.contentType)\r\n            // val dataSource = FileDataSource(filePath)  // if using file directly\r\n            val attPart = MimeBodyPart().apply {\r\n                dataHandler = DataHandler(dataSource)\r\n                fileName = attachment.fileName\r\n            }\r\n    \r\n            // Create a multipart/mixed parent container.\r\n            val parentPart = MimeMultipart(&quot;mixed&quot;).apply {\r\n                // Add the multipart/alternative part to the message.\r\n                addBodyPart(childWrapper)\r\n                addBodyPart(attPart)  // Add the attachment to the message.\r\n            }\r\n    \r\n            // JavaMail representation of the message\r\n            val s = Session.getDefaultInstance(Properties())\r\n            val mimeMessage = MimeMessage(s).apply {\r\n                // Add subject, from and to lines\r\n                this.subject = subject\r\n                setFrom(InternetAddress(from))\r\n                to.forEach() {\r\n                    addRecipient(javax.mail.Message.RecipientType.TO, InternetAddress(it))\r\n                }\r\n    \r\n                // Add the parent container to the message.\r\n                setContent(parentPart)\r\n            }\r\n    \r\n            // Create Raw message\r\n            val rawMessage = with(ByteArrayOutputStream()) {\r\n                mimeMessage.writeTo(this)\r\n                RawMessage(ByteBuffer.wrap(this.toByteArray()))\r\n            }\r\n    \r\n            val rawEmailRequest = SendRawEmailRequest(rawMessage).apply {\r\n                source = from\r\n                setDestinations(to)\r\n            }\r\n    \r\n            // Send Mail\r\n            val client = AmazonSimpleEmailServiceClientBuilder.standard()\r\n                    .withRegion(Regions.US_EAST_1).build()\r\n            client.sendRawEmail(rawEmailRequest)\r\n            println(&quot;Email with attachment sent to $to&quot;)\r\n        } catch (e: Exception) {\r\n            println(e)\r\n        }\r\n    }","title":"Example of sending an email with attachment via Amazon in Java","body":"<p><a href=\"https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-raw.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-raw.html</a> has an example that sends both html and text bodies (with an attachment, of course). FWIW, here is the conversion and reorganization of its Java code to Kotlin. The dependency is <code>'com.sun.mail:javax.mail:1.6.2'</code>.</p>\n\n<pre><code>data class Attachment(val fileName: String, val contentType: String, val data: ByteArray)\n\nfun sendEmailWithAttachment(from: String, to: List&lt;String&gt;, subject: String, htmlBody: String, textBody: String,\n                            attachment: Attachment) {\n    try {\n        val textPart = MimeBodyPart().apply {\n            setContent(textBody, \"text/plain; charset=UTF-8\")\n        }\n\n        val htmlPart = MimeBodyPart().apply {\n            setContent(htmlBody, \"text/html; charset=UTF-8\")\n        }\n\n        // Create a multipart/alternative child container.\n        val childPart = MimeMultipart(\"alternative\").apply {\n            // Add the text and HTML parts to the child container.\n            addBodyPart(textPart)\n            addBodyPart(htmlPart)\n        }\n\n        // Create a wrapper for the HTML and text parts.\n        val childWrapper = MimeBodyPart().apply {\n            setContent(childPart)\n        }\n\n        // Define the attachment\n        val dataSource = ByteArrayDataSource(attachment.data, attachment.contentType)\n        // val dataSource = FileDataSource(filePath)  // if using file directly\n        val attPart = MimeBodyPart().apply {\n            dataHandler = DataHandler(dataSource)\n            fileName = attachment.fileName\n        }\n\n        // Create a multipart/mixed parent container.\n        val parentPart = MimeMultipart(\"mixed\").apply {\n            // Add the multipart/alternative part to the message.\n            addBodyPart(childWrapper)\n            addBodyPart(attPart)  // Add the attachment to the message.\n        }\n\n        // JavaMail representation of the message\n        val s = Session.getDefaultInstance(Properties())\n        val mimeMessage = MimeMessage(s).apply {\n            // Add subject, from and to lines\n            this.subject = subject\n            setFrom(InternetAddress(from))\n            to.forEach() {\n                addRecipient(javax.mail.Message.RecipientType.TO, InternetAddress(it))\n            }\n\n            // Add the parent container to the message.\n            setContent(parentPart)\n        }\n\n        // Create Raw message\n        val rawMessage = with(ByteArrayOutputStream()) {\n            mimeMessage.writeTo(this)\n            RawMessage(ByteBuffer.wrap(this.toByteArray()))\n        }\n\n        val rawEmailRequest = SendRawEmailRequest(rawMessage).apply {\n            source = from\n            setDestinations(to)\n        }\n\n        // Send Mail\n        val client = AmazonSimpleEmailServiceClientBuilder.standard()\n                .withRegion(Regions.US_EAST_1).build()\n        client.sendRawEmail(rawEmailRequest)\n        println(\"Email with attachment sent to $to\")\n    } catch (e: Exception) {\n        println(e)\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17957498,"reputation":49,"user_id":13049157,"display_name":"Alexander Ochoa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693527097,"creation_date":1693527097,"answer_id":77019881,"question_id":7963439,"body_markdown":"This works for me:\r\n\r\nlibraries: &lt;br&gt;\r\nnet.sf.jasperreports &lt;br&gt;\r\ncom.lowagie &lt;br&gt;\r\nspring-boot-starter-mail\r\n\r\n\r\n    @Autowired\r\n    private AmazonSimpleEmailServiceAsync amazonSimpleEmailService;\r\n    \r\n    public void send(String destination, byte[] attachment) {\r\n            try {\r\n                Session session = Session.getInstance(new Properties());\r\n    \r\n                MimeMessage message = new MimeMessage(session);\r\n                message.setSubject(subject);\r\n    \r\n                MimeBodyPart mimeBodyPart = new MimeBodyPart();\r\n                ByteArrayDataSource byteArrayDataSource =\r\n                        new ByteArrayDataSource(attachment, MimeTypeUtils.APPLICATION_OCTET_STREAM_VALUE);\r\n                mimeBodyPart.setDataHandler(new DataHandler(byteArrayDataSource));\r\n                mimeBodyPart.setFileName(nameAttachment);\r\n    \r\n                Multipart multipart = new MimeMultipart();\r\n                multipart.addBodyPart(mimeBodyPart);\r\n    \r\n                message.setContent(multipart);\r\n    \r\n                ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n                message.writeTo(outputStream);\r\n                RawMessage rawMessage = new RawMessage(ByteBuffer.wrap(outputStream.toByteArray()));\r\n                SendRawEmailRequest rawEmailRequest = new SendRawEmailRequest(rawMessage);\r\n                rawEmailRequest.withDestinations(destination);\r\n                rawEmailRequest.withSource(mail);\r\n    \r\n                amazonSimpleEmailService.sendRawEmailAsync(rawEmailRequest);\r\n            } catch (Exception e) {\r\n                ...\r\n            }\r\n        }","title":"Example of sending an email with attachment via Amazon in Java","body":"<p>This works for me:</p>\n<p>libraries: <br>\nnet.sf.jasperreports <br>\ncom.lowagie <br>\nspring-boot-starter-mail</p>\n<pre><code>@Autowired\nprivate AmazonSimpleEmailServiceAsync amazonSimpleEmailService;\n\npublic void send(String destination, byte[] attachment) {\n        try {\n            Session session = Session.getInstance(new Properties());\n\n            MimeMessage message = new MimeMessage(session);\n            message.setSubject(subject);\n\n            MimeBodyPart mimeBodyPart = new MimeBodyPart();\n            ByteArrayDataSource byteArrayDataSource =\n                    new ByteArrayDataSource(attachment, MimeTypeUtils.APPLICATION_OCTET_STREAM_VALUE);\n            mimeBodyPart.setDataHandler(new DataHandler(byteArrayDataSource));\n            mimeBodyPart.setFileName(nameAttachment);\n\n            Multipart multipart = new MimeMultipart();\n            multipart.addBodyPart(mimeBodyPart);\n\n            message.setContent(multipart);\n\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n            message.writeTo(outputStream);\n            RawMessage rawMessage = new RawMessage(ByteBuffer.wrap(outputStream.toByteArray()));\n            SendRawEmailRequest rawEmailRequest = new SendRawEmailRequest(rawMessage);\n            rawEmailRequest.withDestinations(destination);\n            rawEmailRequest.withSource(mail);\n\n            amazonSimpleEmailService.sendRawEmailAsync(rawEmailRequest);\n        } catch (Exception e) {\n            ...\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":363819,"reputation":683,"user_id":707808,"accept_rate":64,"display_name":"Jason"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24380,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":7971669,"answer_count":5,"score":13,"last_activity_date":1693527097,"creation_date":1320131252,"question_id":7963439,"body_markdown":"Does anyone have an example of sending an email, with an attachment, via Amazon SES (in Java)?","title":"Example of sending an email with attachment via Amazon in Java","body":"<p>Does anyone have an example of sending an email, with an attachment, via Amazon SES (in Java)?</p>\n"},{"tags":["java","aes","encryption"],"comments":[{"owner":{"account_id":1047596,"reputation":9325,"user_id":1052284,"accept_rate":44,"display_name":"Mark Jeronimus"},"score":0,"creation_date":1457265648,"post_id":15434802,"comment_id":59319821,"body_markdown":"AES is always 128 bits and only supports 128, 192, and 256 bit keys. What you&#39;re confusing it with is Rijndael, which supports more key sizes and different block sizes. Apparently .NET also confuses them (but only if it doesn&#39;t throw an exception when choosing parameters outside the AES specification, which I cannot infer from your question).","body":"AES is always 128 bits and only supports 128, 192, and 256 bit keys. What you&#39;re confusing it with is Rijndael, which supports more key sizes and different block sizes. Apparently .NET also confuses them (but only if it doesn&#39;t throw an exception when choosing parameters outside the AES specification, which I cannot infer from your question)."}],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1693525612,"creation_date":1363361425,"answer_id":15436216,"question_id":15434802,"body_markdown":"Since you&#39;re initializing the cipher with a key of 16 bytes (128 bits), it uses that as the key size implicitly. \r\n\r\nAnd regarding the block size, the [JCA specification][1] says:\r\n\r\n&gt; AES is a 128-bit block cipher supporting keys of 128, 192, and 256 bits.\r\n\r\nSo the block size is always 128-bits.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#Cipher","title":"How to set BlockSize and KeySize using AES encryption in java","body":"<p>Since you're initializing the cipher with a key of 16 bytes (128 bits), it uses that as the key size implicitly.</p>\n<p>And regarding the block size, the <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#Cipher\" rel=\"nofollow noreferrer\">JCA specification</a> says:</p>\n<blockquote>\n<p>AES is a 128-bit block cipher supporting keys of 128, 192, and 256 bits.</p>\n</blockquote>\n<p>So the block size is always 128-bits.</p>\n"}],"owner":{"account_id":2426593,"reputation":91,"user_id":2118406,"accept_rate":40,"display_name":"Jivan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13044,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":15436216,"answer_count":1,"score":5,"last_activity_date":1693525612,"creation_date":1363357327,"question_id":15434802,"body_markdown":"I am trying to set the BlockSize and KeySize in java encryption code.&lt;br&gt;\r\nHere is my code that works fine but how to specify the aes.BlockSize=128 and aes.KeySize=128?&lt;br&gt;\r\nI have taking reference of Aes aes = AesManaged() in .NET in which we can set the following parameter as follows\r\n\r\n    aes.BlockSize = 128;\r\n    aes.KeySize = 128;\r\n    CipherMode.ECB;\r\n    aes.Padding = PaddingMode.None;           \r\n\r\nIn the code below I have set the following three parameters:\r\n\r\n    aes.Key = key\r\n    aes.Mode = CipherMode.ECB\r\n    aes.Padding = PaddingMode.None\r\n\r\nbut I am not able to set \r\n\r\n    aes.BlockSize = 128\r\n    aes.KeySize = 128;\r\n\r\n---\r\n\r\n    public static void main(String args[]) {\r\n        \r\n        \t\tbyte[] keyForEncription = new byte[16];\r\n        \t\tbyte[] keyForDecription = new byte[16];\r\n        \t\tlong FixedKey = 81985526925837671L;\r\n        \t\tlong VariableKey = 744818830;\r\n        \r\n        \t\tfor (int i1 = 0; i1 &lt; 8; i1++) {\r\n        \r\n        \t\t\tkeyForEncription[i1] = (byte) (FixedKey &gt;&gt; (8 * i1));\r\n        \t\t\tkeyForEncription[i1 + 8] = (byte) (VariableKey &gt;&gt; (8 * i1));\r\n        \t\t}\r\n        \r\n        \t\tshort[] data = new short[96];\r\n        \r\n        \t\tdata[0] = 2;\r\n        \t\tdata[1] = 0;\r\n        \t\tdata[2] = 0;\r\n        \t\tdata[3] = 0;\r\n        \t\tdata[4] = 0;\r\n        \t\tdata[5] = 6;\r\n        \t\tdata[6] = 6;\r\n        \t\tdata[7] = 81;\r\n        \t\tdata[8] = 124;\r\n        \t\tdata[9] = 23;\r\n        \t\tdata[10] = 3;\r\n        \t\r\n        \t\tSecretKeySpec skeySpec = new SecretKeySpec(keyForEncription, &quot;AES&quot;);\r\n        \t\tCipher cipher = Cipher.getInstance(&quot;AES/ECB/NoPadding&quot;);\r\n        \t\tcipher.init(Cipher.ENCRYPT_MODE, skeySpec);\r\n        \r\n        \t\tByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n        \t\tCipherOutputStream cos = new CipherOutputStream(bos, cipher);\r\n        \t\tDataOutputStream dos = new DataOutputStream(cos);\r\n        \r\n        \t\tbyte[] byteArray_data = new byte[data.length];\r\n        \r\n        \t\tfor (int i1 = 0; i1 &lt; data.length; i1++)\r\n        \t\t\tbyteArray_data[i1] = (byte) data[i1];\r\n        \r\n        \t        dos.write(byteArray_data, 0, 16);\r\n        \t\tdos.close();\r\n        \r\n        \t\tbyte[] ENCRYPTED_DATA = bos.toByteArray();\r\n        \r\n        \t\tfor (int i1 = 0; i1 &lt; 8; i1++) {\r\n        \r\n        \t\t\tkeyForDecription[i1] = (byte) (FixedKey &gt;&gt; (8 * i1));\r\n        \t\t\tkeyForDecription[i1 + 8] = (byte) (VariableKey &gt;&gt; (8 * i1));\r\n        \t\t}\r\n        \r\n        \t\tSecretKeySpec skeySpec_decryption = new SecretKeySpec(keyForDecription,\r\n        \t\t\t\t&quot;AES&quot;);\r\n        \t\tCipher cipher1 = Cipher.getInstance(&quot;AES/ECB/NoPadding&quot;);\r\n        \t\tcipher1.init(Cipher.DECRYPT_MODE, skeySpec_decryption);\r\n                        \r\n                        ByteArrayInputStream bis = new ByteArrayInputStream(ENCRYPTED_DATA);\r\n        \t\tCipherInputStream cis = new CipherInputStream(bis, cipher1);\r\n        \t\tDataInputStream dis = new DataInputStream(cis);\r\n        \r\n        \t\tbyte[] DECRYPTED_DATA = new byte[byteArray_data.length];\r\n        \t\tdis.readFully(DECRYPTED_DATA, 4, 16);\r\n        \t\tcis.close();","title":"How to set BlockSize and KeySize using AES encryption in java","body":"<p>I am trying to set the BlockSize and KeySize in java encryption code.<br>\nHere is my code that works fine but how to specify the aes.BlockSize=128 and aes.KeySize=128?<br>\nI have taking reference of Aes aes = AesManaged() in .NET in which we can set the following parameter as follows</p>\n\n<pre><code>aes.BlockSize = 128;\naes.KeySize = 128;\nCipherMode.ECB;\naes.Padding = PaddingMode.None;           \n</code></pre>\n\n<p>In the code below I have set the following three parameters:</p>\n\n<pre><code>aes.Key = key\naes.Mode = CipherMode.ECB\naes.Padding = PaddingMode.None\n</code></pre>\n\n<p>but I am not able to set </p>\n\n<pre><code>aes.BlockSize = 128\naes.KeySize = 128;\n</code></pre>\n\n<hr>\n\n<pre><code>public static void main(String args[]) {\n\n            byte[] keyForEncription = new byte[16];\n            byte[] keyForDecription = new byte[16];\n            long FixedKey = 81985526925837671L;\n            long VariableKey = 744818830;\n\n            for (int i1 = 0; i1 &lt; 8; i1++) {\n\n                keyForEncription[i1] = (byte) (FixedKey &gt;&gt; (8 * i1));\n                keyForEncription[i1 + 8] = (byte) (VariableKey &gt;&gt; (8 * i1));\n            }\n\n            short[] data = new short[96];\n\n            data[0] = 2;\n            data[1] = 0;\n            data[2] = 0;\n            data[3] = 0;\n            data[4] = 0;\n            data[5] = 6;\n            data[6] = 6;\n            data[7] = 81;\n            data[8] = 124;\n            data[9] = 23;\n            data[10] = 3;\n\n            SecretKeySpec skeySpec = new SecretKeySpec(keyForEncription, \"AES\");\n            Cipher cipher = Cipher.getInstance(\"AES/ECB/NoPadding\");\n            cipher.init(Cipher.ENCRYPT_MODE, skeySpec);\n\n            ByteArrayOutputStream bos = new ByteArrayOutputStream();\n            CipherOutputStream cos = new CipherOutputStream(bos, cipher);\n            DataOutputStream dos = new DataOutputStream(cos);\n\n            byte[] byteArray_data = new byte[data.length];\n\n            for (int i1 = 0; i1 &lt; data.length; i1++)\n                byteArray_data[i1] = (byte) data[i1];\n\n                dos.write(byteArray_data, 0, 16);\n            dos.close();\n\n            byte[] ENCRYPTED_DATA = bos.toByteArray();\n\n            for (int i1 = 0; i1 &lt; 8; i1++) {\n\n                keyForDecription[i1] = (byte) (FixedKey &gt;&gt; (8 * i1));\n                keyForDecription[i1 + 8] = (byte) (VariableKey &gt;&gt; (8 * i1));\n            }\n\n            SecretKeySpec skeySpec_decryption = new SecretKeySpec(keyForDecription,\n                    \"AES\");\n            Cipher cipher1 = Cipher.getInstance(\"AES/ECB/NoPadding\");\n            cipher1.init(Cipher.DECRYPT_MODE, skeySpec_decryption);\n\n                    ByteArrayInputStream bis = new ByteArrayInputStream(ENCRYPTED_DATA);\n            CipherInputStream cis = new CipherInputStream(bis, cipher1);\n            DataInputStream dis = new DataInputStream(cis);\n\n            byte[] DECRYPTED_DATA = new byte[byteArray_data.length];\n            dis.readFully(DECRYPTED_DATA, 4, 16);\n            cis.close();\n</code></pre>\n"},{"tags":["java","android","exception"],"answers":[{"comments":[{"owner":{"account_id":147829,"reputation":10444,"user_id":359219,"accept_rate":60,"display_name":"pitosalas"},"score":0,"creation_date":1310156208,"post_id":6629321,"comment_id":7830065,"body_markdown":"That worked. And a further improvement is to create a Jar for the referenced Eclipse project and copy just the jar over to the referencing Eclipse project. Only weakness with that scheme is that as I am still writing the library, every time I change the library and it gets rebuilt I have to manually recreate the jar and put it in the client project. Thanks!","body":"That worked. And a further improvement is to create a Jar for the referenced Eclipse project and copy just the jar over to the referencing Eclipse project. Only weakness with that scheme is that as I am still writing the library, every time I change the library and it gets rebuilt I have to manually recreate the jar and put it in the client project. Thanks!"}],"tags":[],"owner":{"account_id":238730,"reputation":46651,"user_id":507810,"accept_rate":82,"display_name":"FoamyGuy"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1310152612,"creation_date":1310152612,"answer_id":6629321,"question_id":6628926,"body_markdown":"I have never seen a project that uses a class from a separate project. I don&#39;t know for a fact that this won&#39;t work, I&#39;ve just never seen it. So I would suggest copying your edu.brandeis.minigamee package into the same project that contains GameOfLifeGameActivity.","title":"Nested android application won&#39;t launch","body":"<p>I have never seen a project that uses a class from a separate project. I don't know for a fact that this won't work, I've just never seen it. So I would suggest copying your edu.brandeis.minigamee package into the same project that contains GameOfLifeGameActivity.</p>\n"}],"owner":{"account_id":147829,"reputation":10444,"user_id":359219,"accept_rate":60,"display_name":"pitosalas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":402,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":6629321,"answer_count":1,"score":0,"last_activity_date":1693524681,"creation_date":1310150473,"question_id":6628926,"body_markdown":"I have an Android application with a main activity called GameOfLifeGameActivity in a package called edu.brandeis.gameoflife. \r\n\r\nIt extends a class in a different package (and different Eclipse project) called GameActivity in a package called edu.brandeis.minigamee. I am having trouble getting it to launch.\r\n\r\nI think it has to do with the cross-package and cross project reference. It never gets to the onCreate. Instead, it looks like during startup of the app, I get this fatal exception (see below.) \r\n\r\nWhat might that mean and how to fix it?\r\n\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347): FATAL EXCEPTION: main\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{edu.brandeis.gameoflife/edu.brandeis.gameoflife.GameOfLifeGameActivity}: java.lang.ClassNotFoundException: edu.brandeis.gameoflife.GameOfLifeGameActivity in loader dalvik.system.PathClassLoader[/data/app/edu.brandeis.gameoflife-1.apk]\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.os.Handler.dispatchMessage(Handler.java:99)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.os.Looper.loop(Looper.java:123)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.main(ActivityThread.java:3683)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at java.lang.reflect.Method.invokeNative(Native Method)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at java.lang.reflect.Method.invoke(Method.java:507)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at dalvik.system.NativeStart.main(Native Method)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347): Caused by: java.lang.ClassNotFoundException: edu.brandeis.gameoflife.GameOfLifeGameActivity in loader dalvik.system.PathClassLoader[/data/app/edu.brandeis.gameoflife-1.apk]\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)\r\n    07-08 13:50:19.970: ERROR/AndroidRuntime(347):     ... 11 more\r\n    07-08 13:50:19.980: WARN/ActivityManager(60):   Force finishing activity edu.brandeis.gameoflife/.GameOfLifeGameActivity\r\n    07-08 13:50:20.491: WARN/ActivityManager(60): Activity pause timeout for HistoryRecord{4052d618 edu.brandeis.gameoflife/.GameOfLifeGameActivity}\r\n    07-08 13:50:30.691: WARN/ActivityManager(60): Activity destroy timeout for HistoryRecord{4052d618 edu.brandeis.gameoflife/.GameOfLifeGameActivity}\r\n\r\n","title":"Nested android application won&#39;t launch","body":"<p>I have an Android application with a main activity called GameOfLifeGameActivity in a package called edu.brandeis.gameoflife.</p>\n<p>It extends a class in a different package (and different Eclipse project) called GameActivity in a package called edu.brandeis.minigamee. I am having trouble getting it to launch.</p>\n<p>I think it has to do with the cross-package and cross project reference. It never gets to the onCreate. Instead, it looks like during startup of the app, I get this fatal exception (see below.)</p>\n<p>What might that mean and how to fix it?</p>\n<pre><code>07-08 13:50:19.970: ERROR/AndroidRuntime(347): FATAL EXCEPTION: main\n07-08 13:50:19.970: ERROR/AndroidRuntime(347): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{edu.brandeis.gameoflife/edu.brandeis.gameoflife.GameOfLifeGameActivity}: java.lang.ClassNotFoundException: edu.brandeis.gameoflife.GameOfLifeGameActivity in loader dalvik.system.PathClassLoader[/data/app/edu.brandeis.gameoflife-1.apk]\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.os.Handler.dispatchMessage(Handler.java:99)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.os.Looper.loop(Looper.java:123)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.main(ActivityThread.java:3683)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at java.lang.reflect.Method.invokeNative(Native Method)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at java.lang.reflect.Method.invoke(Method.java:507)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at dalvik.system.NativeStart.main(Native Method)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347): Caused by: java.lang.ClassNotFoundException: edu.brandeis.gameoflife.GameOfLifeGameActivity in loader dalvik.system.PathClassLoader[/data/app/edu.brandeis.gameoflife-1.apk]\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)\n07-08 13:50:19.970: ERROR/AndroidRuntime(347):     ... 11 more\n07-08 13:50:19.980: WARN/ActivityManager(60):   Force finishing activity edu.brandeis.gameoflife/.GameOfLifeGameActivity\n07-08 13:50:20.491: WARN/ActivityManager(60): Activity pause timeout for HistoryRecord{4052d618 edu.brandeis.gameoflife/.GameOfLifeGameActivity}\n07-08 13:50:30.691: WARN/ActivityManager(60): Activity destroy timeout for HistoryRecord{4052d618 edu.brandeis.gameoflife/.GameOfLifeGameActivity}\n</code></pre>\n"},{"tags":["java","android","authentication","dropbox","dropbox-api"],"answers":[{"tags":[],"owner":{"account_id":3783849,"reputation":39,"user_id":3142475,"accept_rate":25,"display_name":"AndresRuizDeElv"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390386543,"creation_date":1390386543,"answer_id":21280299,"question_id":21255698,"body_markdown":"It didn&#39;t work because it ran on the simulator not on the phone.\r\nUsed it on the phone, no problems.","title":"Android DropBox API-Link with DropBox Fails(DBRoulette)","body":"<p>It didn't work because it ran on the simulator not on the phone.\nUsed it on the phone, no problems.</p>\n"}],"owner":{"account_id":3783849,"reputation":39,"user_id":3142475,"accept_rate":25,"display_name":"AndresRuizDeElv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":381,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693524026,"creation_date":1390300804,"question_id":21255698,"body_markdown":"When I try access dropbox API with DBRoulette, example application from Dropbox API, using Android, \r\nI get the following two messages in the simulator:\r\nLink to Dropbox(I click it) then\r\n-Unfortunately browser has stopped.\r\nI&#39;ve got an APP_KEY, SECRET_KEY from dropbox, my manifest file is:\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n       package=&quot;com.dropbox.android.sample&quot;\r\n        android:versionCode=&quot;1&quot;\r\n        android:versionName=&quot;1.0&quot;&gt;\r\n\r\n    &lt;uses-sdk android:minSdkVersion=&quot;19&quot; /&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n\r\n    &lt;application android:icon=&quot;@drawable/icon&quot; android:label=&quot;@string/app_name&quot;&gt;\r\n      &lt;activity\r\n        android:name=&quot;.DBRoulette&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:configChanges=&quot;orientation|keyboard&quot;&gt;\r\n      &lt;intent-filter&gt;\r\n        &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n        &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n      &lt;/intent-filter&gt;\r\n      &lt;/activity&gt;\r\n\r\n    &lt;activity\r\n      android:name=&quot;com.dropbox.client2.android.AuthActivity&quot;\r\n      android:launchMode=&quot;singleTask&quot;\r\n      android:configChanges=&quot;orientation|keyboard&quot;&gt;\r\n      &lt;intent-filter&gt;\r\n        &lt;!-- Change this to be db- followed by your app key --&gt;\r\n        &lt;data android:scheme=&quot;db-XXXXXXX&quot; /&gt;\r\n        &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\r\n        &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot;/&gt;\r\n        &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n      &lt;/intent-filter&gt;\r\n    &lt;/activity&gt;\r\n\r\n  &lt;/application&gt;\r\n&lt;/manifest&gt; \r\nMy main file is DBRoulette, identical to the example app:\r\n\r\n    com.dropbox.android.sample;\r\n    public class DBRoulette extends Activity {\r\n    private static final String TAG = &quot;DBRoulette&quot;;\r\n\r\n    ///////////////////////////////////////////////////////////////////////////\r\n    //                      Your app-specific settings.                      //\r\n    ///////////////////////////////////////////////////////////////////////////\r\n\r\n    // Replace this with your app key and secret assigned by Dropbox.\r\n    // Note that this is a really insecure way to do this, and you shouldn&#39;t\r\n    // ship code which contains your key &amp; secret in such an obvious way.\r\n    // Obfuscation is good.\r\n    final static private String APP_KEY = &quot;xxxxxx&quot;;\r\n    final static private String APP_SECRET = &quot;xxxx&quot;;\r\n    ....\r\n\r\nI am using all jars suggested:dropbox-api, http-mime, json-simple, and android 4.4 as the version.\r\nWhy can&#39;t I access dropbox? is it because the simulator?","title":"Android DropBox API-Link with DropBox Fails(DBRoulette)","body":"<p>When I try access dropbox API with DBRoulette, example application from Dropbox API, using Android,\nI get the following two messages in the simulator:\nLink to Dropbox(I click it) then\n-Unfortunately browser has stopped.\nI've got an APP_KEY, SECRET_KEY from dropbox, my manifest file is:\n\n</p>\n<pre><code>&lt;uses-sdk android:minSdkVersion=&quot;19&quot; /&gt;\n\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n\n&lt;application android:icon=&quot;@drawable/icon&quot; android:label=&quot;@string/app_name&quot;&gt;\n  &lt;activity\n    android:name=&quot;.DBRoulette&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:configChanges=&quot;orientation|keyboard&quot;&gt;\n  &lt;intent-filter&gt;\n    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n  &lt;/intent-filter&gt;\n  &lt;/activity&gt;\n\n&lt;activity\n  android:name=&quot;com.dropbox.client2.android.AuthActivity&quot;\n  android:launchMode=&quot;singleTask&quot;\n  android:configChanges=&quot;orientation|keyboard&quot;&gt;\n  &lt;intent-filter&gt;\n    &lt;!-- Change this to be db- followed by your app key --&gt;\n    &lt;data android:scheme=&quot;db-XXXXXXX&quot; /&gt;\n    &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\n    &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot;/&gt;\n    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n  &lt;/intent-filter&gt;\n&lt;/activity&gt;\n</code></pre>\n  \n \nMy main file is DBRoulette, identical to the example app:\n<pre><code>com.dropbox.android.sample;\npublic class DBRoulette extends Activity {\nprivate static final String TAG = &quot;DBRoulette&quot;;\n\n///////////////////////////////////////////////////////////////////////////\n//                      Your app-specific settings.                      //\n///////////////////////////////////////////////////////////////////////////\n\n// Replace this with your app key and secret assigned by Dropbox.\n// Note that this is a really insecure way to do this, and you shouldn't\n// ship code which contains your key &amp; secret in such an obvious way.\n// Obfuscation is good.\nfinal static private String APP_KEY = &quot;xxxxxx&quot;;\nfinal static private String APP_SECRET = &quot;xxxx&quot;;\n....\n</code></pre>\n<p>I am using all jars suggested:dropbox-api, http-mime, json-simple, and android 4.4 as the version.\nWhy can't I access dropbox? is it because the simulator?</p>\n"},{"tags":["java","spring","rest","http","cors"],"comments":[{"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"score":1,"creation_date":1693438763,"post_id":77012018,"comment_id":135762804,"body_markdown":"`serverip:8080` looks weird. Are you sure, that this is the endpoint of your frontend?","body":"<code>serverip:8080</code> looks weird. Are you sure, that this is the endpoint of your frontend?"},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693439839,"post_id":77012018,"comment_id":135762886,"body_markdown":"No. Where you see &quot;serverip&quot; you can replace by the actual ip number. I just didn&#39;t want to inform the ip address in here and so I wrote that.","body":"No. Where you see &quot;serverip&quot; you can replace by the actual ip number. I just didn&#39;t want to inform the ip address in here and so I wrote that."},{"owner":{"account_id":7275588,"reputation":81,"user_id":5547163,"display_name":"Tush"},"score":0,"creation_date":1693462298,"post_id":77012018,"comment_id":135764636,"body_markdown":"You can try checking once again by checking it on incognito window  to see if `origin` header is there.\n\nIs your backend service on the same ip as the serverip and same port (8080)? Because browsers might not send origin header for the same origin requests.","body":"You can try checking once again by checking it on incognito window  to see if <code>origin</code> header is there.  Is your backend service on the same ip as the serverip and same port (8080)? Because browsers might not send origin header for the same origin requests."},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1693469332,"post_id":77012018,"comment_id":135765916,"body_markdown":"To echo @akop&#39;s question, is `http://serverip:8080` where a browser-based client lives? Only browsers (not all user agents) automatically include an `Origin` in cross-origin requests.","body":"To echo @akop&#39;s question, is <code>http:&#47;&#47;serverip:8080</code> where a browser-based client lives? Only browsers (not all user agents) automatically include an <code>Origin</code> in cross-origin requests."},{"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"score":0,"creation_date":1693473126,"post_id":77012018,"comment_id":135766694,"body_markdown":"@jkfe `serverip:8080` seems that it pointing to your spring backend. But the origin should be your frontend. It is maybe `serverip:80` or `serverip:4200`.","body":"@jkfe <code>serverip:8080</code> seems that it pointing to your spring backend. But the origin should be your frontend. It is maybe <code>serverip:80</code> or <code>serverip:4200</code>."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693487833,"post_id":77012018,"comment_id":135769772,"body_markdown":"@Tush You are correct. It was returning null because both frontend and backend are in the same serverip:port. Thus, both are in the same origin. The code works to identify origin when front and backend are in different origins.","body":"@Tush You are correct. It was returning null because both frontend and backend are in the same serverip:port. Thus, both are in the same origin. The code works to identify origin when front and backend are in different origins."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693487929,"post_id":77012018,"comment_id":135769784,"body_markdown":"@jub0bs Right. The call was from a browser, but both front and backend are in the same origin. That&#39;s why it returned null.","body":"@jub0bs Right. The call was from a browser, but both front and backend are in the same origin. That&#39;s why it returned null."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693487965,"post_id":77012018,"comment_id":135769793,"body_markdown":"@akop The frontend is also on 8080 (frontend deployed to Tomcat). So ip and port were correct. Like replied to others, it was returning null because both front and backend are in the same origin.","body":"@akop The frontend is also on 8080 (frontend deployed to Tomcat). So ip and port were correct. Like replied to others, it was returning null because both front and backend are in the same origin."},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1693490242,"post_id":77012018,"comment_id":135770388,"body_markdown":"@jkfe If both server and client are on the same [Web origin](https://developer.mozilla.org/en-US/docs/Glossary/Origin), there shouldn&#39;t be a need to configure CORS, by definition.","body":"@jkfe If both server and client are on the same <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Origin\" rel=\"nofollow noreferrer\">Web origin</a>, there shouldn&#39;t be a need to configure CORS, by definition."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":1,"creation_date":1693491469,"post_id":77012018,"comment_id":135770710,"body_markdown":"@jub0bs Right. Learned that now. That was the reason.","body":"@jub0bs Right. Learned that now. That was the reason."},{"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"score":0,"creation_date":1693504078,"post_id":77012018,"comment_id":135773415,"body_markdown":"@jub0bs (or TE) can you write it as an answer?","body":"@jub0bs (or TE) can you write it as an answer?"},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":1,"creation_date":1693519588,"post_id":77012018,"comment_id":135775925,"body_markdown":"@akop Feel free to write an answer. You were on the right track before I chimed in.","body":"@akop Feel free to write an answer. You were on the right track before I chimed in."}],"answers":[{"tags":[],"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693522748,"creation_date":1693522748,"answer_id":77019696,"question_id":77012018,"body_markdown":"As pointed out in the comments (creds also to [jub0bs](https://stackoverflow.com/users/2541573/jub0bs):\r\n\r\nThe backend and the frontend are served by the same endpoint (`serverip:8080`). Webbrowsers will only send the origin, if backend and frontend are different hosts.\r\n\r\nRead more about CORS at mozilla. https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS","title":"How to identify the origin of an Http request?","body":"<p>As pointed out in the comments (creds also to <a href=\"https://stackoverflow.com/users/2541573/jub0bs\">jub0bs</a>:</p>\n<p>The backend and the frontend are served by the same endpoint (<code>serverip:8080</code>). Webbrowsers will only send the origin, if backend and frontend are different hosts.</p>\n<p>Read more about CORS at mozilla. <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</a></p>\n"}],"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77019696,"answer_count":1,"score":0,"last_activity_date":1693522748,"creation_date":1693436923,"question_id":77012018,"body_markdown":"I have this code that adds Cors Mappings to my java spring application.\r\n\r\nIt works well to allow requests comming from ```http://localhost:4200```.\r\n\r\nBut it is not working to allow requests from the second origin (test server).\r\n\r\n```\r\n@Override\r\npublic void addCorsMappings(CorsRegistry registry) {\t\r\n\t\t\r\n\tregistry.addMapping(&quot;/**&quot;) //all paths\r\n\t.allowedMethods(&quot;*&quot;) //all methods/endpoints\r\n\t.allowedOrigins(&quot;http://localhost:4200&quot;, //dev\r\n\t&quot;http://serverip:8080&quot;); //test server\r\n}\r\n```\r\n\r\nI&#39;m guessing ```&quot;http://serverip:8080&quot;``` in that code is not quite right.\r\n\r\nSo I wanted to identify the exact origin where the call is comming. \r\n\r\nThen I can add that origin &quot;as is&quot; in the allowedOrigins list.\r\n\r\nHow can I do that?\r\n\r\nI tried this but it&#39;s returning null.\r\n\r\n    @RequestMapping(value  = &quot;/httprequestorigin&quot;, method = RequestMethod.GET)\r\n    public String getHttpRequestOrigin() throws UnknownHostException {\r\n    \t\r\n    \t String origin = &quot;&quot;;\r\n    \t\t\r\n    \t RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();\r\n    \t    if (requestAttributes instanceof ServletRequestAttributes) {\r\n    \t    \tHttpServletRequest request = ((ServletRequestAttributes)requestAttributes).getRequest();\r\n    \t    \torigin = request.getHeader(&quot;HttpHeaders.ORIGIN&quot;);\r\n    \t    }\r\n    \t\r\n\t      return origin;\r\n    \t\r\n    }\r\n\r\nAlso tried like this and it also returns null.\r\n\r\n```origin = request.getHeader(&quot;Origin&quot;);```\r\n\r\n\r\nAnd when I read the http headers in Chrome Dev Tools I don&#39;t see &quot;Origin&quot; in there. \r\n\r\nUnderstand this code is not working because the origin header is not available.\r\n\r\nSo how to identify the origin of the Http request in that case?","title":"How to identify the origin of an Http request?","body":"<p>I have this code that adds Cors Mappings to my java spring application.</p>\n<p>It works well to allow requests comming from <code>http://localhost:4200</code>.</p>\n<p>But it is not working to allow requests from the second origin (test server).</p>\n<pre><code>@Override\npublic void addCorsMappings(CorsRegistry registry) {    \n        \n    registry.addMapping(&quot;/**&quot;) //all paths\n    .allowedMethods(&quot;*&quot;) //all methods/endpoints\n    .allowedOrigins(&quot;http://localhost:4200&quot;, //dev\n    &quot;http://serverip:8080&quot;); //test server\n}\n</code></pre>\n<p>I'm guessing <code>&quot;http://serverip:8080&quot;</code> in that code is not quite right.</p>\n<p>So I wanted to identify the exact origin where the call is comming.</p>\n<p>Then I can add that origin &quot;as is&quot; in the allowedOrigins list.</p>\n<p>How can I do that?</p>\n<p>I tried this but it's returning null.</p>\n<pre><code>@RequestMapping(value  = &quot;/httprequestorigin&quot;, method = RequestMethod.GET)\npublic String getHttpRequestOrigin() throws UnknownHostException {\n    \n     String origin = &quot;&quot;;\n        \n     RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();\n        if (requestAttributes instanceof ServletRequestAttributes) {\n            HttpServletRequest request = ((ServletRequestAttributes)requestAttributes).getRequest();\n            origin = request.getHeader(&quot;HttpHeaders.ORIGIN&quot;);\n        }\n    \n      return origin;\n    \n}\n</code></pre>\n<p>Also tried like this and it also returns null.</p>\n<p><code>origin = request.getHeader(&quot;Origin&quot;);</code></p>\n<p>And when I read the http headers in Chrome Dev Tools I don't see &quot;Origin&quot; in there.</p>\n<p>Understand this code is not working because the origin header is not available.</p>\n<p>So how to identify the origin of the Http request in that case?</p>\n"},{"tags":["java","gradle","apk","android-virtual-device"],"comments":[{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":0,"creation_date":1693523249,"post_id":77019672,"comment_id":135776334,"body_markdown":"You should add import for R class: `import com.name.app.R;`","body":"You should add import for R class: <code>import com.name.app.R;</code>"},{"owner":{"account_id":29324348,"reputation":1,"user_id":22467228,"display_name":"camcam"},"score":0,"creation_date":1693605838,"post_id":77019672,"comment_id":135787945,"body_markdown":"@marcinj i did and now the error says `cannot find symbol import com.name.app.R`","body":"@marcinj i did and now the error says <code>cannot find symbol import com.name.app.R</code>"}],"owner":{"account_id":29324348,"reputation":1,"user_id":22467228,"display_name":"camcam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693522369,"creation_date":1693522369,"question_id":77019672,"body_markdown":"I&#39;m running `./gradle assembleDebug` and i&#39;m having this error\r\n\r\n```\r\n...app/src/main/java/com/name/app/MainActivity.java:11: error: package R does not exist\r\n        setContentView(R.layout.activity_main);\r\n                        ^\r\n1 error\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:app:compileDebugJavaWithJavac&#39;.\r\n&gt; Compilation failed; see the compiler error output for details.\r\n```\r\nif i run it with --info:\r\n\r\n```\r\nCaching disabled for task &#39;:app:compileDebugJavaWithJavac&#39; because:\r\n  Build cache is disabled\r\nTask &#39;:app:compileDebugJavaWithJavac&#39; is not up-to-date because:\r\n  Task has failed previously.\r\nThe input changes require a full rebuild for incremental task &#39;:app:compileDebugJavaWithJavac&#39;.\r\nWatching 47 directories to track changes\r\nWatching 46 directories to track changes\r\nWatching 45 directories to track changes\r\nFull recompilation is required because no incremental change information is available. This is usually caused by clean builds or changing compiler arguments.\r\nCompiling with toolchain &#39;/usr/lib/jvm/java-17-openjdk-amd64&#39;.\r\n```\r\nI had previously ran `gradle clean`, but I don&#39;t know if it has anything to do with it.\r\n\r\nI tried changing things in my .xml files, but it keeps failing, I have no idea how to fix it.\r\nThis is my `AndroidManifest.xml`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;application\r\n        android:label=&quot;app&quot;\r\n        android:theme=&quot;@style/AppTheme&quot;&gt;\r\n\r\n        &lt;activity android:name=&quot;.MainActivity&quot;\r\n        \tandroid:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n`MainActivity.java`\r\n\r\n```\r\npackage com.name.app;\r\n\r\nimport android.app.Activity;\r\nimport android.os.Bundle;\r\n\r\npublic class MainActivity extends Activity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    }\r\n}\r\n```\r\n\r\nAny help would be appreciated. Thanks","title":"Hox to fix &quot;package R does not exist setContentView(R.layout.activity_main)&quot;","body":"<p>I'm running <code>./gradle assembleDebug</code> and i'm having this error</p>\n<pre><code>...app/src/main/java/com/name/app/MainActivity.java:11: error: package R does not exist\n        setContentView(R.layout.activity_main);\n                        ^\n1 error\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileDebugJavaWithJavac'.\n&gt; Compilation failed; see the compiler error output for details.\n</code></pre>\n<p>if i run it with --info:</p>\n<pre><code>Caching disabled for task ':app:compileDebugJavaWithJavac' because:\n  Build cache is disabled\nTask ':app:compileDebugJavaWithJavac' is not up-to-date because:\n  Task has failed previously.\nThe input changes require a full rebuild for incremental task ':app:compileDebugJavaWithJavac'.\nWatching 47 directories to track changes\nWatching 46 directories to track changes\nWatching 45 directories to track changes\nFull recompilation is required because no incremental change information is available. This is usually caused by clean builds or changing compiler arguments.\nCompiling with toolchain '/usr/lib/jvm/java-17-openjdk-amd64'.\n</code></pre>\n<p>I had previously ran <code>gradle clean</code>, but I don't know if it has anything to do with it.</p>\n<p>I tried changing things in my .xml files, but it keeps failing, I have no idea how to fix it.\nThis is my <code>AndroidManifest.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;application\n        android:label=&quot;app&quot;\n        android:theme=&quot;@style/AppTheme&quot;&gt;\n\n        &lt;activity android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p><code>MainActivity.java</code></p>\n<pre><code>package com.name.app;\n\nimport android.app.Activity;\nimport android.os.Bundle;\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n}\n</code></pre>\n<p>Any help would be appreciated. Thanks</p>\n"},{"tags":["java","arrays","sorting","java-7","bigdecimal"],"comments":[{"owner":{"account_id":2089510,"reputation":390,"user_id":1859657,"accept_rate":43,"display_name":"Hemang"},"score":0,"creation_date":1451629019,"post_id":34553984,"comment_id":56850805,"body_markdown":"what is your error? your expected input/output?","body":"what is your error? your expected input/output?"},{"owner":{"account_id":6132527,"reputation":3968,"user_id":4932070,"accept_rate":100,"display_name":"A J"},"score":0,"creation_date":1451629100,"post_id":34553984,"comment_id":56850823,"body_markdown":"Please mention your problem or expected i/o","body":"Please mention your problem or expected i/o"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":1,"creation_date":1451629218,"post_id":34553984,"comment_id":56850844,"body_markdown":"The method of working on this site is that *you* explain what the problem is, and then people can try to help you. If you don&#39;t know if there is a problem or what the problem is, you should first figure that out before posting a question on this site.","body":"The method of working on this site is that <i>you</i> explain what the problem is, and then people can try to help you. If you don&#39;t know if there is a problem or what the problem is, you should first figure that out before posting a question on this site."},{"owner":{"account_id":2000274,"reputation":814,"user_id":1791492,"accept_rate":100,"display_name":"Aaditya Gavandalkar"},"score":0,"creation_date":1451629603,"post_id":34553984,"comment_id":56850908,"body_markdown":"What is the problem here really? Are you facing any errors (if so, please paste stack trace too)","body":"What is the problem here really? Are you facing any errors (if so, please paste stack trace too)"},{"owner":{"account_id":6439502,"reputation":2409,"user_id":4989929,"display_name":"Ronak Poriya"},"score":0,"creation_date":1458975277,"post_id":34553984,"comment_id":60095908,"body_markdown":"This is think problem is for 0.12 &amp; .12.While initializing these numbers using BigDecimal,It consider both as 0.12.https://www.hackerrank.com/challenges/java-bigdecimal","body":"This is think problem is for 0.12 &amp; .12.While initializing these numbers using BigDecimal,It consider both as 0.12.<a href=\"https://www.hackerrank.com/challenges/java-bigdecimal\" rel=\"nofollow noreferrer\">hackerrank.com/challenges/java-bigdecimal</a>"}],"answers":[{"tags":[],"owner":{"account_id":1206734,"reputation":3867,"user_id":1176178,"accept_rate":100,"display_name":"Zack"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1451630502,"creation_date":1451629498,"answer_id":34554050,"question_id":34553984,"body_markdown":"Looks like you&#39;re throwing an NPE because you&#39;re trying to access a null array.\r\n\r\n\r\n\t\tBigDecimal a[] = null;  // &lt;---- null array\r\n\r\n\t\tfor (int i = 0; i &lt; n; i++) {\r\n\t\t\ts[i] = sc.next();\r\n\t\t\ta[i] = new BigDecimal(s[i]); // &lt;---- accessing null array a\r\n\t\t}\r\n\r\nTry initializing your array with the n length used on input\r\n\r\n\t\tBigDecimal a[] = new BigDecimal[n];\r\n\r\n**Edit**\r\n\r\nin response to Mariano&#39;s answer, your \r\n\r\n\t\tif (a[i].compareTo(a[j]) == -1)\r\n\r\nis correct, as is. See [BigDecimal javadoc][1]\r\n\r\n\r\n&gt; Returns: \r\n&gt; -1, 0, or 1 as this BigDecimal is numerically less than, equal to, or greater than val.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo(java.math.BigDecimal)","title":"Sorting BigDecimal","body":"<p>Looks like you're throwing an NPE because you're trying to access a null array.</p>\n\n<pre><code>    BigDecimal a[] = null;  // &lt;---- null array\n\n    for (int i = 0; i &lt; n; i++) {\n        s[i] = sc.next();\n        a[i] = new BigDecimal(s[i]); // &lt;---- accessing null array a\n    }\n</code></pre>\n\n<p>Try initializing your array with the n length used on input</p>\n\n<pre><code>    BigDecimal a[] = new BigDecimal[n];\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>in response to Mariano's answer, your </p>\n\n<pre><code>    if (a[i].compareTo(a[j]) == -1)\n</code></pre>\n\n<p>is correct, as is. See <a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo(java.math.BigDecimal)\" rel=\"nofollow\">BigDecimal javadoc</a></p>\n\n<blockquote>\n  <p>Returns: \n  -1, 0, or 1 as this BigDecimal is numerically less than, equal to, or greater than val.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7345617,"reputation":664,"user_id":5593397,"display_name":"marian0"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1452039662,"creation_date":1451629817,"answer_id":34554072,"question_id":34553984,"body_markdown":"&lt;p&gt;You have a couple of errors in your code.&lt;/p&gt;\r\n\r\nFirst you are not initializing the &lt;b&gt;a&lt;/b&gt; array, `BigDecimal a[] = null` should be replaced by `BigDecimal a[] = new BigDecimal[n]` to avoid the NullPointerException.\r\n\r\nFinally you are implementing the sort algorithm wrong, you should replace the inner `for (int j = 1; j &lt; n; j++)` with `for (int j = i + 1; j &lt; n; j++)`\r\n\r\nHere is how your code should look like:\r\n\r\n    import java.math.BigDecimal;\r\n    import java.util.Scanner;\r\n    \r\n    public class Solution {\r\n        public static void main(final String[] argh) {\r\n    \r\n            Scanner sc = new Scanner(System.in);\r\n            int n = sc.nextInt();\r\n            String[] s = new String[n];\r\n            BigDecimal a[] = new BigDecimal[n];\r\n    \r\n            for (int i = 0; i &lt; n; i++) {\r\n                s[i] = sc.next();\r\n                a[i] = new BigDecimal(s[i]);\r\n            }\r\n    \r\n            for (int i = 0; i &lt; n - 1; i++) {\r\n                for (int j = i + 1; j &lt; n; j++) {\r\n                    if (a[i].compareTo(a[j]) == -1) {\r\n                        BigDecimal temp = a[j];\r\n                        a[j] = a[i];\r\n                        a[i] = temp;\r\n                    }\r\n                }\r\n            }\r\n            // Output\r\n            for (int i = 0; i &lt; n; i++) {\r\n                s[i] = a[i].toString();\r\n                System.out.println(s[i]);\r\n            }\r\n        }\r\n    }\r\n","title":"Sorting BigDecimal","body":"<p>You have a couple of errors in your code.</p>\n\n<p>First you are not initializing the <b>a</b> array, <code>BigDecimal a[] = null</code> should be replaced by <code>BigDecimal a[] = new BigDecimal[n]</code> to avoid the NullPointerException.</p>\n\n<p>Finally you are implementing the sort algorithm wrong, you should replace the inner <code>for (int j = 1; j &lt; n; j++)</code> with <code>for (int j = i + 1; j &lt; n; j++)</code></p>\n\n<p>Here is how your code should look like:</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.util.Scanner;\n\npublic class Solution {\n    public static void main(final String[] argh) {\n\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        String[] s = new String[n];\n        BigDecimal a[] = new BigDecimal[n];\n\n        for (int i = 0; i &lt; n; i++) {\n            s[i] = sc.next();\n            a[i] = new BigDecimal(s[i]);\n        }\n\n        for (int i = 0; i &lt; n - 1; i++) {\n            for (int j = i + 1; j &lt; n; j++) {\n                if (a[i].compareTo(a[j]) == -1) {\n                    BigDecimal temp = a[j];\n                    a[j] = a[i];\n                    a[i] = temp;\n                }\n            }\n        }\n        // Output\n        for (int i = 0; i &lt; n; i++) {\n            s[i] = a[i].toString();\n            System.out.println(s[i]);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":389692,"reputation":39228,"user_id":749284,"accept_rate":100,"display_name":"mah"},"score":2,"creation_date":1462143165,"post_id":36972702,"comment_id":61501351,"body_markdown":"An explanation of _why_ this is a valid solution when compared to the poster&#39;s code would be very appropriate. For bonus points, a comparison to the other answers (which were posted several months before you showed up) and why yours is either better or at least different (and worthy of having been posted well after these others) would be nice.","body":"An explanation of <i>why</i> this is a valid solution when compared to the poster&#39;s code would be very appropriate. For bonus points, a comparison to the other answers (which were posted several months before you showed up) and why yours is either better or at least different (and worthy of having been posted well after these others) would be nice."}],"tags":[],"owner":{"account_id":8360574,"reputation":81,"user_id":6279081,"display_name":"Shubham Pandey"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1462141638,"creation_date":1462141638,"answer_id":36972702,"question_id":34553984,"body_markdown":"    import java.math.BigDecimal;\r\n    import java.util.*;\r\n    class Solution{\r\n    \r\n        public static void main(String []argh)\r\n        {\r\n            Scanner sc= new Scanner(System.in);\r\n            int n=sc.nextInt();\r\n            String []s=new String[n+2];\r\n            for(int i=0;i&lt;n;i++)\r\n            {\r\n                s[i]=sc.next();\r\n            }\r\n    \r\n            for(int i=0;i&lt;n;i++)\r\n            {\r\n                BigDecimal max=new BigDecimal(s[i]);\r\n                int idx=i;\r\n                for(int j=i+1;j&lt;n;j++)\r\n                {\r\n                    BigDecimal curr=new BigDecimal(s[j]);\r\n                    if(curr.compareTo(max)==1)\r\n                    {\r\n                        max=curr;\r\n                        idx=j;\r\n                    }\r\n                }\r\n                String temp=s[i];\r\n                s[i]=s[idx];\r\n                s[idx]=temp;\r\n            }\r\n    \r\n            for(int i=0;i&lt;n;i++)\r\n            {\r\n                System.out.println(s[i]);\r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n    }","title":"Sorting BigDecimal","body":"<pre><code>import java.math.BigDecimal;\nimport java.util.*;\nclass Solution{\n\n    public static void main(String []argh)\n    {\n        Scanner sc= new Scanner(System.in);\n        int n=sc.nextInt();\n        String []s=new String[n+2];\n        for(int i=0;i&lt;n;i++)\n        {\n            s[i]=sc.next();\n        }\n\n        for(int i=0;i&lt;n;i++)\n        {\n            BigDecimal max=new BigDecimal(s[i]);\n            int idx=i;\n            for(int j=i+1;j&lt;n;j++)\n            {\n                BigDecimal curr=new BigDecimal(s[j]);\n                if(curr.compareTo(max)==1)\n                {\n                    max=curr;\n                    idx=j;\n                }\n            }\n            String temp=s[i];\n            s[i]=s[idx];\n            s[idx]=temp;\n        }\n\n        for(int i=0;i&lt;n;i++)\n        {\n            System.out.println(s[i]);\n        }\n\n    }\n\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":231117,"reputation":8541,"user_id":495157,"accept_rate":40,"display_name":"JGFMK"},"score":0,"creation_date":1578022302,"post_id":54122769,"comment_id":105313176,"body_markdown":"Why compare on Object and cast? Stick with String?","body":"Why compare on Object and cast? Stick with String?"},{"owner":{"account_id":6177462,"reputation":197,"user_id":4813937,"accept_rate":25,"display_name":"mohamed haleem"},"score":0,"creation_date":1615200598,"post_id":54122769,"comment_id":117608741,"body_markdown":"What is the diff between Arrays.sort(s, new Comparator&lt;Object&gt;() ...) and Arrays.sort(s, 0, n, new Comparator&lt;Object&gt;()...)? I am getting Null point exception in the first case.","body":"What is the diff between Arrays.sort(s, new Comparator&lt;Object&gt;() ...) and Arrays.sort(s, 0, n, new Comparator&lt;Object&gt;()...)? I am getting Null point exception in the first case."}],"tags":[],"owner":{"account_id":11855851,"reputation":613,"user_id":8675852,"display_name":"Sahil"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1547100343,"creation_date":1547100343,"answer_id":54122769,"question_id":34553984,"body_markdown":"You can use the comparator to sort the BigDecimal\r\n\r\n    import java.math.BigDecimal;\r\n    import java.util.*;\r\n\r\n    class Solution{\r\n\r\n    public static void main(String []args){\r\n        Scanner sc= new Scanner(System.in);\r\n        int n=sc.nextInt();\r\n        String []s=new String[n+2];\r\n        for(int i=0;i&lt;n;i++){\r\n            s[i]=sc.next();\r\n        }\r\n      \tsc.close();\r\n\r\n        Arrays.sort(s, 0, n, new Comparator&lt;Object&gt;() {\r\n            public int compare(Object a1, Object a2) {\r\n                BigDecimal bigDec1 = new BigDecimal((String) a1);\r\n                BigDecimal bigDec2 = new BigDecimal((String) a2);\r\n                return bigDec2.compareTo(bigDec1);\r\n            }\r\n        });\r\n\r\n\r\n        //Output\r\n        for(int i=0;i&lt;n;i++)\r\n        {\r\n            System.out.println(s[i]);\r\n        }\r\n    }","title":"Sorting BigDecimal","body":"<p>You can use the comparator to sort the BigDecimal</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.util.*;\n\nclass Solution{\n\npublic static void main(String []args){\n    Scanner sc= new Scanner(System.in);\n    int n=sc.nextInt();\n    String []s=new String[n+2];\n    for(int i=0;i&lt;n;i++){\n        s[i]=sc.next();\n    }\n    sc.close();\n\n    Arrays.sort(s, 0, n, new Comparator&lt;Object&gt;() {\n        public int compare(Object a1, Object a2) {\n            BigDecimal bigDec1 = new BigDecimal((String) a1);\n            BigDecimal bigDec2 = new BigDecimal((String) a2);\n            return bigDec2.compareTo(bigDec1);\n        }\n    });\n\n\n    //Output\n    for(int i=0;i&lt;n;i++)\n    {\n        System.out.println(s[i]);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":234978,"reputation":3313,"user_id":501481,"display_name":"Dave"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693521806,"creation_date":1693521806,"answer_id":77019636,"question_id":34553984,"body_markdown":"Using `Collections.sort()` provides a simpler version of Sahil&#39;s answer:\r\n\r\n    List&lt;BigDecimal&gt; values = Arrays.asList(new BigDecimal[] {\r\n      new BigDecimal(&quot;1.2&quot;),\r\n      new BigDecimal(&quot;1.1&quot;),\r\n      new BigDecimal(&quot;9.2&quot;),\r\n      new BigDecimal(&quot;4.2&quot;),\r\n    });\r\n\r\n    // Sort from low to high\r\n    Collections.sort(values);    \r\n    \r\n    for (var value : values) {\r\n      System.out.println(value);\r\n    }","title":"Sorting BigDecimal","body":"<p>Using <code>Collections.sort()</code> provides a simpler version of Sahil's answer:</p>\n<pre><code>List&lt;BigDecimal&gt; values = Arrays.asList(new BigDecimal[] {\n  new BigDecimal(&quot;1.2&quot;),\n  new BigDecimal(&quot;1.1&quot;),\n  new BigDecimal(&quot;9.2&quot;),\n  new BigDecimal(&quot;4.2&quot;),\n});\n\n// Sort from low to high\nCollections.sort(values);    \n\nfor (var value : values) {\n  System.out.println(value);\n}\n</code></pre>\n"}],"owner":{"account_id":7555642,"reputation":41,"user_id":5735371,"display_name":"Pratyaksh Prajapati"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13301,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":5,"score":3,"last_activity_date":1693521806,"creation_date":1451628658,"question_id":34553984,"body_markdown":"What is the problem with this BigDecimalSorting? The code takes in numbers as string and then converts it to BigDecimal and then sort and print the sorted BigDecimals.\r\n \r\n\r\n\r\n    import java.math.BigDecimal;\r\n    import java.util.*;\r\n\r\n    class Solution {\r\n    public static void main(String []argh){\r\n\r\n        Scanner sc= new Scanner(System.in);\r\n        int n=sc.nextInt();\r\n        String []s=new String[n];\r\n        BigDecimal a[] = null;\r\n\r\n        for(int i = 0; i &lt; n ; i++){\r\n            s[i]=sc.next();\r\n            a[i] = new BigDecimal(s[i]);\r\n        }\r\n        for(int i = 0; i &lt; n-1; i++){\r\n            for(int j = 1; j &lt; n; j++){\r\n                if(a[i].compareTo(a[j]) == -1){\r\n                    BigDecimal temp = a[j];\r\n                    a[j] = a[i];\r\n                    a[i] = temp;\r\n                }\r\n            }\r\n        }\r\n        //Output\r\n        for(int i=0;i&lt;n;i++){\r\n            s[i] = a[i].toString();\r\n            System.out.println(s[i]);\r\n        }\r\n    }\r\n    }\r\n\r\nSample Input:\r\n9\r\n-100\r\n50\r\n0\r\n56.6\r\n90\r\n0.12\r\n.12\r\n02.34\r\n000.000\r\n\r\nExpected Output:\r\n90\r\n56.6\r\n50\r\n02.34\r\n0.12\r\n.12\r\n0\r\n000.000\r\n-100\r\n","title":"Sorting BigDecimal","body":"<p>What is the problem with this BigDecimalSorting? The code takes in numbers as string and then converts it to BigDecimal and then sort and print the sorted BigDecimals.</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.util.*;\n\nclass Solution {\npublic static void main(String []argh){\n\n    Scanner sc= new Scanner(System.in);\n    int n=sc.nextInt();\n    String []s=new String[n];\n    BigDecimal a[] = null;\n\n    for(int i = 0; i &lt; n ; i++){\n        s[i]=sc.next();\n        a[i] = new BigDecimal(s[i]);\n    }\n    for(int i = 0; i &lt; n-1; i++){\n        for(int j = 1; j &lt; n; j++){\n            if(a[i].compareTo(a[j]) == -1){\n                BigDecimal temp = a[j];\n                a[j] = a[i];\n                a[i] = temp;\n            }\n        }\n    }\n    //Output\n    for(int i=0;i&lt;n;i++){\n        s[i] = a[i].toString();\n        System.out.println(s[i]);\n    }\n}\n}\n</code></pre>\n\n<p>Sample Input:\n9\n-100\n50\n0\n56.6\n90\n0.12\n.12\n02.34\n000.000</p>\n\n<p>Expected Output:\n90\n56.6\n50\n02.34\n0.12\n.12\n0\n000.000\n-100</p>\n"},{"tags":["python","java","python-3.x","hash","guava"],"comments":[{"owner":{"account_id":7062708,"reputation":7697,"user_id":5407270,"display_name":"Andriy Makukha"},"score":0,"creation_date":1693520941,"post_id":75915829,"comment_id":135776077,"body_markdown":"If your strings are printable ASCII characters, you can use `pyfarmhash` just fine.","body":"If your strings are printable ASCII characters, you can use <code>pyfarmhash</code> just fine."}],"owner":{"account_id":1413624,"reputation":161,"user_id":1339741,"accept_rate":0,"display_name":"007coder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693520769,"creation_date":1680492267,"question_id":75915829,"body_markdown":"I have java code here:\r\n```\r\n\r\nimport com.google.common.base.CharMatcher;\r\nimport com.google.common.hash.HashFunction;\r\nimport com.google.common.hash.Hashing;\r\nimport java.util.Base64;\r\n\r\npublic final class SomeHashing {\r\n    private static final HashFunction FARM_HASH_64 = Hashing.farmHashFingerprint64();\r\n\r\n    @Override\r\n    public String hashEntity(String uid) {\r\n      byte[] hash = FARM_HASH_64.hashBytes(userId.getBytes()).asBytes();\r\n      String b64Hash = Base64.getEncoder().encodeToString(hash);\r\n      return CharMatcher.is(&#39;=&#39;).trimFrom(b64Hash);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nI m trying to convert it into python code. I see python has a farmhash package too: https://pypi.org/project/pyfarmhash/ but I dont see a `hashBytes` equivalent there, hence I cannot proceed.\r\n\r\nBefore that I even tried to get similar long-output from java&#39;s lib (`hashString().asLong()`)  and comparing to pythons long-output (`farmhash.fingerprint64()`) but they are not equal. \r\n\r\nCan someone comment on how to approach this problem and a simpler solution here? Or is there an equivalent python package for google&#39;s guava hash&#39;s module `com.google.common.hash` ?","title":"Equivalent python code for java code (using guava hash lib)","body":"<p>I have java code here:</p>\n<pre><code>\nimport com.google.common.base.CharMatcher;\nimport com.google.common.hash.HashFunction;\nimport com.google.common.hash.Hashing;\nimport java.util.Base64;\n\npublic final class SomeHashing {\n    private static final HashFunction FARM_HASH_64 = Hashing.farmHashFingerprint64();\n\n    @Override\n    public String hashEntity(String uid) {\n      byte[] hash = FARM_HASH_64.hashBytes(userId.getBytes()).asBytes();\n      String b64Hash = Base64.getEncoder().encodeToString(hash);\n      return CharMatcher.is('=').trimFrom(b64Hash);\n    }\n  }\n}\n</code></pre>\n<p>I m trying to convert it into python code. I see python has a farmhash package too: <a href=\"https://pypi.org/project/pyfarmhash/\" rel=\"nofollow noreferrer\">https://pypi.org/project/pyfarmhash/</a> but I dont see a <code>hashBytes</code> equivalent there, hence I cannot proceed.</p>\n<p>Before that I even tried to get similar long-output from java's lib (<code>hashString().asLong()</code>)  and comparing to pythons long-output (<code>farmhash.fingerprint64()</code>) but they are not equal.</p>\n<p>Can someone comment on how to approach this problem and a simpler solution here? Or is there an equivalent python package for google's guava hash's module <code>com.google.common.hash</code> ?</p>\n"},{"tags":["java","spring","spring-boot","ldap","classloader"],"owner":{"account_id":11876127,"reputation":1,"user_id":8691115,"display_name":"Csaba Csenteri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693520042,"creation_date":1693520042,"question_id":77019546,"body_markdown":"I have a Spring Boot (v2.4.5) web application that is using (in one of the Service classes) an LDAP search if user detail data.\r\nThis search worked while we were using JDK8 but once we transitioned to JDK11, this feature is broken.\r\nThe relevant parts of the stack trace:\r\n```\r\njavax.naming.NoInitialContextException: Cannot instantiate class: &quot;com.sun.jndi.ldap.LdapCtxFactory&quot; [Root exception is java.lang.ClassNotFoundException: &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;]\r\n        at java.naming/javax.naming.spi.NamingManager.getFactory(Unknown Source)\r\n        at java.naming/javax.naming.spi.NamingManager.lambda$getInitialContext$1(Unknown Source)\r\n        at java.base/jdk.internal.loader.AbstractClassLoaderValue$Memoizer.get(Unknown Source)\r\n        at java.base/jdk.internal.loader.AbstractClassLoaderValue.computeIfAbsent(Unknown Source)\r\n        at java.naming/javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\r\n        at java.naming/javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\r\n        at java.naming/javax.naming.InitialContext.init(Unknown Source)\r\n        at java.naming/javax.naming.InitialContext.&lt;init&gt;(Unknown Source)\r\n        at java.naming/javax.naming.directory.InitialDirContext.&lt;init&gt;(Unknown Source)\r\nCaused by: java.lang.ClassNotFoundException: &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;\r\n        at org.springframework.boot.web.embedded.tomcat.TomcatEmbeddedWebappClassLoader.loadClass(TomcatEmbeddedWebappClassLoader.java:72)\r\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1187)\r\n        at java.base/java.lang.Class.forName0(Native Method)\r\n        at java.base/java.lang.Class.forName(Unknown Source)\r\n        at java.naming/com.sun.naming.internal.VersionHelper.loadClass(Unknown Source)\r\n        at java.naming/com.sun.naming.internal.VersionHelper.loadClass(Unknown Source)\r\n        at java.naming/com.sun.naming.internal.VersionHelper.loadClass(Unknown Source)\r\n```\r\nThe setup of the LDAP part is standard:\r\n```\r\nHashtable&lt;String, String&gt; env = new Hashtable&lt;&gt;();\r\nenv.put(Context.INITIAL_CONTEXT_FACTORY, INITCTX);\r\nenv.put(Context.PROVIDER_URL, HOST);\r\nenv.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\nenv.put(Context.SECURITY_PRINCIPAL, LDAP_USERNAME + DOMAIN);\r\nenv.put(Context.SECURITY_CREDENTIALS, LDAP_PASSWORD);\r\n\r\nDirContext ctx = new InitialDirContext(env);\r\n```\r\nThe error happens in the line above.\r\n\r\n\r\nSearched extensively the SO archives and it seemed to me that the java.naming module is not exporting anymore the ldap package content so followed the advice (from the java migration guide and from SO articles) and added --add-exports java.naming/com.sun.jndi.ldap=ALL-UNNAMED command line arguments. This did not help.\r\nThe Classloader that&#39;s active in the thread is\r\n`Thread.currentThread().getContextClassLoader()\r\nTomcatEmbeddedWebappClassLoader@148 &quot;TomcatEmbeddedWebappClassLoader&quot;`\r\nWhat else should I try?","title":"Cannot instantiate class: &quot;com.sun.jndi.ldap.LdapCtxFactory&quot; since moved from jdk8 to jdk11","body":"<p>I have a Spring Boot (v2.4.5) web application that is using (in one of the Service classes) an LDAP search if user detail data.\nThis search worked while we were using JDK8 but once we transitioned to JDK11, this feature is broken.\nThe relevant parts of the stack trace:</p>\n<pre><code>javax.naming.NoInitialContextException: Cannot instantiate class: &quot;com.sun.jndi.ldap.LdapCtxFactory&quot; [Root exception is java.lang.ClassNotFoundException: &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;]\n        at java.naming/javax.naming.spi.NamingManager.getFactory(Unknown Source)\n        at java.naming/javax.naming.spi.NamingManager.lambda$getInitialContext$1(Unknown Source)\n        at java.base/jdk.internal.loader.AbstractClassLoaderValue$Memoizer.get(Unknown Source)\n        at java.base/jdk.internal.loader.AbstractClassLoaderValue.computeIfAbsent(Unknown Source)\n        at java.naming/javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\n        at java.naming/javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\n        at java.naming/javax.naming.InitialContext.init(Unknown Source)\n        at java.naming/javax.naming.InitialContext.&lt;init&gt;(Unknown Source)\n        at java.naming/javax.naming.directory.InitialDirContext.&lt;init&gt;(Unknown Source)\nCaused by: java.lang.ClassNotFoundException: &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;\n        at org.springframework.boot.web.embedded.tomcat.TomcatEmbeddedWebappClassLoader.loadClass(TomcatEmbeddedWebappClassLoader.java:72)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1187)\n        at java.base/java.lang.Class.forName0(Native Method)\n        at java.base/java.lang.Class.forName(Unknown Source)\n        at java.naming/com.sun.naming.internal.VersionHelper.loadClass(Unknown Source)\n        at java.naming/com.sun.naming.internal.VersionHelper.loadClass(Unknown Source)\n        at java.naming/com.sun.naming.internal.VersionHelper.loadClass(Unknown Source)\n</code></pre>\n<p>The setup of the LDAP part is standard:</p>\n<pre><code>Hashtable&lt;String, String&gt; env = new Hashtable&lt;&gt;();\nenv.put(Context.INITIAL_CONTEXT_FACTORY, INITCTX);\nenv.put(Context.PROVIDER_URL, HOST);\nenv.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\nenv.put(Context.SECURITY_PRINCIPAL, LDAP_USERNAME + DOMAIN);\nenv.put(Context.SECURITY_CREDENTIALS, LDAP_PASSWORD);\n\nDirContext ctx = new InitialDirContext(env);\n</code></pre>\n<p>The error happens in the line above.</p>\n<p>Searched extensively the SO archives and it seemed to me that the java.naming module is not exporting anymore the ldap package content so followed the advice (from the java migration guide and from SO articles) and added --add-exports java.naming/com.sun.jndi.ldap=ALL-UNNAMED command line arguments. This did not help.\nThe Classloader that's active in the thread is\n<code>Thread.currentThread().getContextClassLoader() TomcatEmbeddedWebappClassLoader@148 &quot;TomcatEmbeddedWebappClassLoader&quot;</code>\nWhat else should I try?</p>\n"},{"tags":["java","log4j2","webmethods"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1692938049,"post_id":76971264,"comment_id":135695190,"body_markdown":"Give your configuration each message should end up in all four appenders. Is this the case?","body":"Give your configuration each message should end up in all four appenders. Is this the case?"},{"owner":{"account_id":29292230,"reputation":21,"user_id":22442419,"display_name":"Ragav J"},"score":0,"creation_date":1692952251,"post_id":76971264,"comment_id":135697461,"body_markdown":"No.  ITLFileHandler, PublishCarrierEvent, ABC, XYZ are all separate code modules. The logging java code will be common which in run time when called will get 3 inputs. Logger Name, Level, Message.  So if the input logger name is ITLFileHandler, WARN, message - I want that content to be logged in ITLFileHandler.log file. Similarly for other appenders as well.  Basically the appender/file should be selected in run time based on Logger name i pass to java code. But right now no matter what i give as input to logger name, everything is getting added into the same log (the last appender (EFG.log)","body":"No.  ITLFileHandler, PublishCarrierEvent, ABC, XYZ are all separate code modules. The logging java code will be common which in run time when called will get 3 inputs. Logger Name, Level, Message.  So if the input logger name is ITLFileHandler, WARN, message - I want that content to be logged in ITLFileHandler.log file. Similarly for other appenders as well.  Basically the appender/file should be selected in run time based on Logger name i pass to java code. But right now no matter what i give as input to logger name, everything is getting added into the same log (the last appender (EFG.log)"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1692988569,"post_id":76971264,"comment_id":135705275,"body_markdown":"_&quot;everything is getting added into the same log (the last appender (EFG.log)&quot;_ I have no doubt about that: you set `additivity=&quot;true&quot;`, so everything reaches the root logger. My question is: does **every** message also end up in **all** other log files? If not try running with `-Dlog4j.debug=true` to see what&#39;s going on.","body":"<i>&quot;everything is getting added into the same log (the last appender (EFG.log)&quot;</i> I have no doubt about that: you set <code>additivity=&quot;true&quot;</code>, so everything reaches the root logger. My question is: does <b>every</b> message also end up in <b>all</b> other log files? If not try running with <code>-Dlog4j.debug=true</code> to see what&#39;s going on."},{"owner":{"account_id":29292230,"reputation":21,"user_id":22442419,"display_name":"Ragav J"},"score":1,"creation_date":1693311285,"post_id":76971264,"comment_id":135741229,"body_markdown":"Thanks for getting back. No . All the logs go into only 1 file whatever file that is present in the last appender config XML. I will try the debug logs and check.","body":"Thanks for getting back. No . All the logs go into only 1 file whatever file that is present in the last appender config XML. I will try the debug logs and check."},{"owner":{"account_id":29292230,"reputation":21,"user_id":22442419,"display_name":"Ragav J"},"score":0,"creation_date":1693429001,"post_id":76971264,"comment_id":135761638,"body_markdown":"Please refer to the comments in below discussion on the DEBUG logs at JVM level. THe approach suggested below is not even creating a file :( It only works and creates the file, if I use the set up which I have put above in the issue.","body":"Please refer to the comments in below discussion on the DEBUG logs at JVM level. THe approach suggested below is not even creating a file :( It only works and creates the file, if I use the set up which I have put above in the issue."}],"answers":[{"comments":[{"owner":{"account_id":29292230,"reputation":21,"user_id":22442419,"display_name":"Ragav J"},"score":0,"creation_date":1693384453,"post_id":76994546,"comment_id":135752086,"body_markdown":"Tried this above but not able to get ThreadContext.add working (as method). Tried ThreadContext.put, but still not working.  It works only if I use the Logger Context and the XML configuration which I have posted above . Just that it keeps adding all logs to only 1 file, no matter what the logger name is. FYR I am using the log4j-12api.jar, log4j-api.jar &amp; log4j-core.jar","body":"Tried this above but not able to get ThreadContext.add working (as method). Tried ThreadContext.put, but still not working.  It works only if I use the Logger Context and the XML configuration which I have posted above . Just that it keeps adding all logs to only 1 file, no matter what the logger name is. FYR I am using the log4j-12api.jar, log4j-api.jar &amp; log4j-core.jar"},{"owner":{"account_id":23064315,"reputation":21,"user_id":17178965,"display_name":"FKhan"},"score":0,"creation_date":1693402539,"post_id":76994546,"comment_id":135756130,"body_markdown":"My bad it is supposed to be ThreadContext.put . I&#39;ll make the edit. Any errors? Try writing the routes tag as &lt;Routes pattern = &quot;$${ctx::fileName}&quot;&gt;&lt;/Routes&gt; . Also the name of attribute in xml and your ThreadContext should match. I made another error of writing fileName in xml and FileName in ThreadContext.","body":"My bad it is supposed to be ThreadContext.put . I&#39;ll make the edit. Any errors? Try writing the routes tag as &lt;Routes pattern = &quot;$${ctx::fileName}&quot;&gt;&lt;/Routes&gt; . Also the name of attribute in xml and your ThreadContext should match. I made another error of writing fileName in xml and FileName in ThreadContext."},{"owner":{"account_id":29292230,"reputation":21,"user_id":22442419,"display_name":"Ragav J"},"score":0,"creation_date":1693406697,"post_id":76994546,"comment_id":135757206,"body_markdown":"Could see the below trace logs ----DEBUG StatusLogger createLogger(additivity=&quot;true&quot;, level=&quot;INFO&quot;, name=&quot;GenericInfoLogger&quot;, includeLocation=&quot;null&quot;, ={GenericInfoLogger}, ={}, Configuration, Filter=null)\nDEBUG StatusLogger Building Plugin[name=loggers, class=org.apache.logging.log4j.core.config.LoggersPlugin].\nDEBUG StatusLogger createLoggers(={GenericLogger, GenericInfoLogger})\nWARN StatusLogger No Root logger was configured, creating default ERROR-level Root logger with Console appender","body":"Could see the below trace logs ----DEBUG StatusLogger createLogger(additivity=&quot;true&quot;, level=&quot;INFO&quot;, name=&quot;GenericInfoLogger&quot;, includeLocation=&quot;null&quot;, ={GenericInfoLogger}, ={}, Configuration, Filter=null) DEBUG StatusLogger Building Plugin[name=loggers, class=org.apache.logging.log4j.core.config.LoggersPlugin]. DEBUG StatusLogger createLoggers(={GenericLogger, GenericInfoLogger}) WARN StatusLogger No Root logger was configured, creating default ERROR-level Root logger with Console appender"},{"owner":{"account_id":29292230,"reputation":21,"user_id":22442419,"display_name":"Ragav J"},"score":0,"creation_date":1693428933,"post_id":76994546,"comment_id":135761629,"body_markdown":"Just to highlight with the above WARN message, the file itself is not getting created. It only works and creates the file, if I use the set up which I have put above in the issue.","body":"Just to highlight with the above WARN message, the file itself is not getting created. It only works and creates the file, if I use the set up which I have put above in the issue."}],"tags":[],"owner":{"account_id":23064315,"reputation":21,"user_id":17178965,"display_name":"FKhan"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693402604,"creation_date":1693240256,"answer_id":76994546,"question_id":76971264,"body_markdown":"You can try 1 appender with multiple file routes. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;DEBUG&quot;&gt;\r\n        &lt;Appenders&gt;\r\n            &lt;Routing name=&quot;GenericLogger&quot;&gt;\r\n                &lt;Routes pattern = &quot;$${ctx::fileName}&quot;&gt;\r\n                    &lt;Route key=&quot;$${ctx::fileName}&quot;&gt;\r\n                        &lt;RollingFile name=&quot;$${ctx::fileName}&quot; fileName=&quot;/esblogdata/logs/$${ctx::fileName}.log&quot; filePattern=&quot;/esblogdata/logs/$${ctx::fileName}%d{yyyy-MM-dd}.log&quot;&gt;\r\n                            &lt;PatternLayout&gt;\r\n                                &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\r\n                            &lt;/PatternLayout&gt;\r\n                            &lt;Policies&gt;\r\n                                &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                            &lt;/Policies&gt;\r\n                        &lt;/RollingFile&gt;\r\n                    &lt;/Route&gt;\r\n                &lt;/Routes&gt;\r\n            &lt;/Routing&gt;\r\n            &lt;Routing name=&quot;GenericInfoLogger&quot;&gt;\r\n                &lt;Routes pattern = &quot;$${ctx&quot;&quot;fileName}&quot;&gt;\r\n                    &lt;Route key=&quot;$${ctx::fileName}&quot;&gt;\r\n                        &lt;RollingFile name=&quot;$${ctx::fileName}&quot; fileName=&quot;/esblogdata/logs/$${ctx::fileName}.log&quot; filePattern=&quot;/esblogdata/logs/$${ctx::fileName}%d{yyyy-MM-dd}.log&quot;&gt;\r\n                            &lt;PatternLayout&gt;\r\n                                &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\r\n                            &lt;/PatternLayout&gt;\r\n                            &lt;Policies&gt;\r\n                                &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                            &lt;/Policies&gt;\r\n                        &lt;/RollingFile&gt;\r\n                    &lt;/Route&gt;\r\n                &lt;/Routes&gt;\r\n            &lt;/Routing&gt;\r\n        &lt;/Appenders&gt;\r\n        &lt;Loggers&gt;\r\n            &lt;Logger name=&quot;GenericLogger&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;GenericLogger&quot;/&gt;\r\n            &lt;/Logger&gt;\r\n            &lt;Logger name=&quot;GenericInfoLogger&quot; level=&quot;INFO&quot; additivity=&quot;true&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;GenericInfoLogger&quot;/&gt;\r\n            &lt;/Logger&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nGet the logger object using `Logger infoLogger = LogManager.getLogger(&quot;GenericInfoLogger&quot;);`. \r\n\r\nUse `ThreadContext.put(&quot;fileName&quot;, userGetFileName)` to route logMessages to appropriate files.\r\n\r\nFinally `infoLogger.debug(userMessage)` to log user messages. \r\n\r\n\r\n\r\n","title":"Log4j2 - to write separate log files for every appender/logger - webMethods","body":"<p>You can try 1 appender with multiple file routes.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;DEBUG&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Routing name=&quot;GenericLogger&quot;&gt;\n            &lt;Routes pattern = &quot;$${ctx::fileName}&quot;&gt;\n                &lt;Route key=&quot;$${ctx::fileName}&quot;&gt;\n                    &lt;RollingFile name=&quot;$${ctx::fileName}&quot; fileName=&quot;/esblogdata/logs/$${ctx::fileName}.log&quot; filePattern=&quot;/esblogdata/logs/$${ctx::fileName}%d{yyyy-MM-dd}.log&quot;&gt;\n                        &lt;PatternLayout&gt;\n                            &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\n                        &lt;/PatternLayout&gt;\n                        &lt;Policies&gt;\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n                        &lt;/Policies&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n            &lt;/Routes&gt;\n        &lt;/Routing&gt;\n        &lt;Routing name=&quot;GenericInfoLogger&quot;&gt;\n            &lt;Routes pattern = &quot;$${ctx&quot;&quot;fileName}&quot;&gt;\n                &lt;Route key=&quot;$${ctx::fileName}&quot;&gt;\n                    &lt;RollingFile name=&quot;$${ctx::fileName}&quot; fileName=&quot;/esblogdata/logs/$${ctx::fileName}.log&quot; filePattern=&quot;/esblogdata/logs/$${ctx::fileName}%d{yyyy-MM-dd}.log&quot;&gt;\n                        &lt;PatternLayout&gt;\n                            &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\n                        &lt;/PatternLayout&gt;\n                        &lt;Policies&gt;\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n                        &lt;/Policies&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n            &lt;/Routes&gt;\n        &lt;/Routing&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;GenericLogger&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;GenericLogger&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=&quot;GenericInfoLogger&quot; level=&quot;INFO&quot; additivity=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;GenericInfoLogger&quot;/&gt;\n        &lt;/Logger&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>Get the logger object using <code>Logger infoLogger = LogManager.getLogger(&quot;GenericInfoLogger&quot;);</code>.</p>\n<p>Use <code>ThreadContext.put(&quot;fileName&quot;, userGetFileName)</code> to route logMessages to appropriate files.</p>\n<p>Finally <code>infoLogger.debug(userMessage)</code> to log user messages.</p>\n"},{"tags":[],"owner":{"account_id":29292230,"reputation":21,"user_id":22442419,"display_name":"Ragav J"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693519530,"creation_date":1693519530,"answer_id":77019508,"question_id":76971264,"body_markdown":"I have managed to fix this. There were couple of issues.\r\n\r\n - The code/set up for me worked only if used a LoggerContext. I had implemented that incorrectly when the log4j2 XML was being loaded, which caused all the trouble.\r\n- The suggestion provided above by FKhan also helped a lot with a slight change. The Routes pattern should be having a singe colon and not two. Corrected this from $${ctx::fileName} to $${ctx:fileName}\r\n\r\nThe below Log4j2XML and Java service works perfectly where users can dynamically pass the log file name at run time\r\n\r\nLog4j2 XML\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;DEBUG&quot;&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;Routing name=&quot;Routing&quot;&gt;\r\n\t\t\t&lt;Routes pattern=&quot;$${ctx:fileName}&quot;&gt;\r\n\t\t\t\t&lt;Route&gt;\r\n\t\t\t\t\t&lt;RollingFile name=&quot;RoutingLog&quot; fileName=&quot;/esblogdata/logs/${ctx:fileName}.log&quot; filePattern=&quot;/esblogdata/logs/${ctx:fileName}%d{yyyy-MM-dd}.log&quot;&gt;\r\n\t\t\t\t\t\t&lt;PatternLayout&gt;\r\n\t\t\t\t\t\t\t&lt;Pattern&gt;%m%n&lt;/Pattern&gt;\r\n\t\t\t\t\t\t&lt;/PatternLayout&gt;\r\n\t\t\t\t\t\t&lt;Policies&gt;\r\n\t\t\t\t\t\t\t&lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n\t\t\t\t\t\t&lt;/Policies&gt;\r\n\t\t\t\t\t&lt;/RollingFile&gt;\r\n\t\t\t\t&lt;/Route&gt;\r\n\t\t\t&lt;/Routes&gt;\r\n\t\t&lt;/Routing&gt;\r\n\t&lt;/Appenders&gt;\r\n\t&lt;Loggers&gt;\r\n\t    &lt;Logger name=&quot;RoutingLogger&quot; level=&quot;debug&quot; additivity=&quot;true&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;Routing&quot; level =&quot;DEBUG&quot;/&gt;\r\n\t    &lt;/Logger&gt;\r\n\t    &lt;Root level=&quot;debug&quot;&gt;\r\n            \t&lt;appender-ref ref=&quot;Routing&quot; /&gt;\r\n            &lt;/Root&gt;\r\n\t&lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n\r\n```\r\n\r\n\r\nJava Code for creating log files\r\n\r\n                            //Logging process LOG4J_CFG - String location of XML file\r\n\t\t\t\t\t\t\tConfigurationFactory factory =  XmlConfigurationFactory.getInstance();\r\n\t\t\t\t\t\t\tConfigurationSource configurationSource = new ConfigurationSource(new FileInputStream(new File(LOG4J_CFG)));\r\n\t\t\t\t\t\t\tConfiguration configuration = factory.getConfiguration(null, configurationSource);\r\n\t\t\t\t\t\t\t//debugLog (&quot;Config setu up complete&quot;);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// Get context instance\r\n\t\t\t\t\t\t\tfinal LoggerContext context = new LoggerContext(&quot;test&quot;);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// Start logging system\r\n\t\t\t\t\t\t\tcontext.start(configuration);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// Get a reference for logger\r\n\t\t\t\t\t\t\tLogger logger = context.getLogger(&quot;Routing&quot;);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t    //Log data - finalLogFilename and finalMessage string to passed by users\t\t\t\t\t\r\n\t\t\t\t\t\t\tThreadContext.put(&quot;fileName&quot;, finalLogFileName);\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlogger.debug(finalMessage);\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tThreadContext.remove(&quot;fileName&quot;);\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//Close Context\r\n\t\t\t\t\t\t\tcontext.close();\r\n\r\n\r\nThanks again for Piotr P. Karwasz and FKhan for the suggestions and pointers.\r\n","title":"Log4j2 - to write separate log files for every appender/logger - webMethods","body":"<p>I have managed to fix this. There were couple of issues.</p>\n<ul>\n<li>The code/set up for me worked only if used a LoggerContext. I had implemented that incorrectly when the log4j2 XML was being loaded, which caused all the trouble.</li>\n<li>The suggestion provided above by FKhan also helped a lot with a slight change. The Routes pattern should be having a singe colon and not two. Corrected this from $${ctx::fileName} to $${ctx:fileName}</li>\n</ul>\n<p>The below Log4j2XML and Java service works perfectly where users can dynamically pass the log file name at run time</p>\n<p>Log4j2 XML</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;DEBUG&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Routing name=&quot;Routing&quot;&gt;\n            &lt;Routes pattern=&quot;$${ctx:fileName}&quot;&gt;\n                &lt;Route&gt;\n                    &lt;RollingFile name=&quot;RoutingLog&quot; fileName=&quot;/esblogdata/logs/${ctx:fileName}.log&quot; filePattern=&quot;/esblogdata/logs/${ctx:fileName}%d{yyyy-MM-dd}.log&quot;&gt;\n                        &lt;PatternLayout&gt;\n                            &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\n                        &lt;/PatternLayout&gt;\n                        &lt;Policies&gt;\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n                        &lt;/Policies&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n            &lt;/Routes&gt;\n        &lt;/Routing&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;RoutingLogger&quot; level=&quot;debug&quot; additivity=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;Routing&quot; level =&quot;DEBUG&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;debug&quot;&gt;\n                &lt;appender-ref ref=&quot;Routing&quot; /&gt;\n            &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n\n</code></pre>\n<p>Java Code for creating log files</p>\n<pre><code>                        //Logging process LOG4J_CFG - String location of XML file\n                        ConfigurationFactory factory =  XmlConfigurationFactory.getInstance();\n                        ConfigurationSource configurationSource = new ConfigurationSource(new FileInputStream(new File(LOG4J_CFG)));\n                        Configuration configuration = factory.getConfiguration(null, configurationSource);\n                        //debugLog (&quot;Config setu up complete&quot;);\n                        \n                        // Get context instance\n                        final LoggerContext context = new LoggerContext(&quot;test&quot;);\n                        \n                        \n                        // Start logging system\n                        context.start(configuration);\n                                \n                        // Get a reference for logger\n                        Logger logger = context.getLogger(&quot;Routing&quot;);\n                        \n                    \n                        //Log data - finalLogFilename and finalMessage string to passed by users                    \n                        ThreadContext.put(&quot;fileName&quot;, finalLogFileName);                            \n                        logger.debug(finalMessage);                         \n                        ThreadContext.remove(&quot;fileName&quot;);           \n                \n                        \n                        //Close Context\n                        context.close();\n</code></pre>\n<p>Thanks again for Piotr P. Karwasz and FKhan for the suggestions and pointers.</p>\n"}],"owner":{"account_id":29292230,"reputation":21,"user_id":22442419,"display_name":"Ragav J"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77019508,"answer_count":2,"score":1,"last_activity_date":1693519530,"creation_date":1692894477,"question_id":76971264,"body_markdown":"I am trying to create log4j2 log files for code in webMethods. The logger Name , the message and LEVEL will be passed by the user in run time, and based on that separate log files needs to be created per appender.\r\n\r\nI have managed to make it work with the below set up\r\n\r\nLog4j2 XML\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;DEBUG&quot;&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;RollingFile name=&quot;ROLL_ITLFileHandler&quot; fileName=&quot;/esblogdata/logs/ITLFileHandler.log&quot; filePattern=&quot;/esblogdata/logs/ITLFileHandler%d{yyyy-MM-dd}.log&quot;&gt;\r\n\t\t\t&lt;PatternLayout&gt;\r\n\t\t\t\t&lt;Pattern&gt;%m%n&lt;/Pattern&gt;\r\n\t\t\t&lt;/PatternLayout&gt;\r\n\t\t\t&lt;Policies&gt;\r\n\t\t\t\t&lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n\t\t\t&lt;/Policies&gt;\r\n\t\t&lt;/RollingFile&gt;\r\n\t&lt;/Appenders&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;RollingFile name=&quot;ROLL_PublishCarrierEvent&quot; fileName=&quot;/esblogdata/logs/PublishCarrierEvent.log&quot; filePattern=&quot;/esblogdata/logs/PublishCarrierEvent%d{yyyy-MM-dd}.log&quot;&gt;\r\n\t\t\t&lt;PatternLayout&gt;\r\n\t\t\t\t&lt;Pattern&gt;%m%n&lt;/Pattern&gt;\r\n\t\t\t&lt;/PatternLayout&gt;\r\n\t\t\t&lt;Policies&gt;\r\n\t\t\t\t&lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n\t\t\t&lt;/Policies&gt;\r\n\t\t&lt;/RollingFile&gt;\r\n\t&lt;/Appenders&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;RollingFile name=&quot;ROLL_ABC&quot; fileName=&quot;/esblogdata/logs/ABC.log&quot; filePattern=&quot;/esblogdata/logs/ABC%d{yyyy-MM-dd}.log&quot;&gt;\r\n\t\t\t&lt;PatternLayout&gt;\r\n\t\t\t\t&lt;Pattern&gt;%m%n&lt;/Pattern&gt;\r\n\t\t\t&lt;/PatternLayout&gt;\r\n\t\t\t&lt;Policies&gt;\r\n\t\t\t\t&lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n\t\t\t&lt;/Policies&gt;\r\n\t\t&lt;/RollingFile&gt;\r\n\t&lt;/Appenders&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;RollingFile name=&quot;ROLL_EFG&quot; fileName=&quot;/esblogdata/logs/EFG.log&quot; filePattern=&quot;/esblogdata/logs/EFG%d{yyyy-MM-dd}.log&quot;&gt;\r\n\t\t\t&lt;PatternLayout&gt;\r\n\t\t\t\t&lt;Pattern&gt;%m%n&lt;/Pattern&gt;\r\n\t\t\t&lt;/PatternLayout&gt;\r\n\t\t\t&lt;Policies&gt;\r\n\t\t\t\t&lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n\t\t\t&lt;/Policies&gt;\r\n\t\t&lt;/RollingFile&gt;\r\n\t&lt;/Appenders&gt;\r\n\t&lt;Loggers&gt;\r\n\t\t&lt;Logger name=&quot;ITLFileHandler&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;ROLL_ITLFileHandler&quot;/&gt;\r\n\t\t&lt;/Logger&gt;\r\n\t\t&lt;Logger name=&quot;PublishCarrierEvent&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;ROLL_PublishCarrierEvent&quot;/&gt;\r\n\t\t&lt;/Logger&gt;\r\n\t\t&lt;Logger name=&quot;ABC&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;ROLL_ABC&quot;/&gt;\r\n\t\t&lt;/Logger&gt;\r\n\t\t&lt;Logger name=&quot;EFG&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;ROLL_EFG&quot;/&gt;\r\n\t\t&lt;/Logger&gt;\r\n\t\t&lt;Root level=&quot;DEBUG&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;ROLL_ITLFileHandler&quot;/&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;ROLL_PublishCarrierEvent&quot;/&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;ROLL_ABC&quot;/&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;ROLL_EFG&quot;/&gt;\r\n\t\t&lt;/Root&gt;\r\n\t&lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\nJava Code to write Logs\r\n\r\n```\r\n\t\t\t//Set Level - severity received from user in in run time as INFO, DEBUG etc.,\r\n\t\t\tLevel level = Level.getLevel(severity);\t\t\t\r\n\t\t\tConfigurationFactory factory =  XmlConfigurationFactory.getInstance();\r\n\r\n\t\t\t//LOG4J_CFG points to the location where log4j2 XML is kept\r\n\t\t\tConfigurationSource configurationSource = new ConfigurationSource(new FileInputStream(new File(LOG4J_CFG)));\r\n\t\t\tConfiguration configuration = factory.getConfiguration(null, configurationSource);\t\r\n\t\t\t\r\n\t\t\t// Get context instance\r\n\t\t\tLoggerContext context = new LoggerContext(&quot;test&quot;);\t\t\t\r\n\t\t\t\r\n\t\t\t//Start logging system\r\n\t\t\tcontext.start(configuration);\r\n\t\t\t\t\t\r\n\t\t\t// Get a reference for logger (logger name will be passed in runtime by user which will be similar to the Logger name Ex: ITLFilehandler, ABC, XYZ in above XML\r\n\t\t\tLogger logger = context.getLogger(loggerName);\r\n\t\t    logger.log(level, finalMessage);\t\t\t\r\n\t\t\tcontext.close();\r\n\r\n```\r\n\r\nBut the problem is with the above set up, the logs are written only to the same file which is present in the last appender EFG.log\r\n\r\nNo matter what logger name i pass in the runtime (ABC, XYZ etc.,) everything goes to the same file EFG.log \r\n\r\nCan someone guide here on what is wrong please ?\r\n\r\nThanks\r\nRagav J\r\n\r\n","title":"Log4j2 - to write separate log files for every appender/logger - webMethods","body":"<p>I am trying to create log4j2 log files for code in webMethods. The logger Name , the message and LEVEL will be passed by the user in run time, and based on that separate log files needs to be created per appender.</p>\n<p>I have managed to make it work with the below set up</p>\n<p>Log4j2 XML</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;DEBUG&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;RollingFile name=&quot;ROLL_ITLFileHandler&quot; fileName=&quot;/esblogdata/logs/ITLFileHandler.log&quot; filePattern=&quot;/esblogdata/logs/ITLFileHandler%d{yyyy-MM-dd}.log&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Appenders&gt;\n        &lt;RollingFile name=&quot;ROLL_PublishCarrierEvent&quot; fileName=&quot;/esblogdata/logs/PublishCarrierEvent.log&quot; filePattern=&quot;/esblogdata/logs/PublishCarrierEvent%d{yyyy-MM-dd}.log&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Appenders&gt;\n        &lt;RollingFile name=&quot;ROLL_ABC&quot; fileName=&quot;/esblogdata/logs/ABC.log&quot; filePattern=&quot;/esblogdata/logs/ABC%d{yyyy-MM-dd}.log&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Appenders&gt;\n        &lt;RollingFile name=&quot;ROLL_EFG&quot; fileName=&quot;/esblogdata/logs/EFG.log&quot; filePattern=&quot;/esblogdata/logs/EFG%d{yyyy-MM-dd}.log&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%m%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;ITLFileHandler&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;ROLL_ITLFileHandler&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=&quot;PublishCarrierEvent&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;ROLL_PublishCarrierEvent&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=&quot;ABC&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;ROLL_ABC&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=&quot;EFG&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;ROLL_EFG&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;DEBUG&quot;&gt;\n            &lt;AppenderRef ref=&quot;ROLL_ITLFileHandler&quot;/&gt;\n            &lt;AppenderRef ref=&quot;ROLL_PublishCarrierEvent&quot;/&gt;\n            &lt;AppenderRef ref=&quot;ROLL_ABC&quot;/&gt;\n            &lt;AppenderRef ref=&quot;ROLL_EFG&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>Java Code to write Logs</p>\n<pre><code>            //Set Level - severity received from user in in run time as INFO, DEBUG etc.,\n            Level level = Level.getLevel(severity);         \n            ConfigurationFactory factory =  XmlConfigurationFactory.getInstance();\n\n            //LOG4J_CFG points to the location where log4j2 XML is kept\n            ConfigurationSource configurationSource = new ConfigurationSource(new FileInputStream(new File(LOG4J_CFG)));\n            Configuration configuration = factory.getConfiguration(null, configurationSource);  \n            \n            // Get context instance\n            LoggerContext context = new LoggerContext(&quot;test&quot;);          \n            \n            //Start logging system\n            context.start(configuration);\n                    \n            // Get a reference for logger (logger name will be passed in runtime by user which will be similar to the Logger name Ex: ITLFilehandler, ABC, XYZ in above XML\n            Logger logger = context.getLogger(loggerName);\n            logger.log(level, finalMessage);            \n            context.close();\n\n</code></pre>\n<p>But the problem is with the above set up, the logs are written only to the same file which is present in the last appender EFG.log</p>\n<p>No matter what logger name i pass in the runtime (ABC, XYZ etc.,) everything goes to the same file EFG.log</p>\n<p>Can someone guide here on what is wrong please ?</p>\n<p>Thanks\nRagav J</p>\n"},{"tags":["java","mongodb"],"owner":{"account_id":179070,"reputation":3412,"user_id":411459,"accept_rate":82,"display_name":"Duncan Krebs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693519467,"creation_date":1693519467,"question_id":77019505,"body_markdown":"I have a Java object that has a numeric data field, in some cases it can be a double, int or long and I am using java.lang.Number as the field type which works fine for serialization via JSON. \r\n\r\nWhen inserting into Mongo I am creating a document, and for the field I look to see what its sub class is, if its a double i then use setDouble() etc. This works fine. \r\n\r\nThe challenge I have is how do I convert the Document back to the POJO object when reading data from the Database. It seems like I have to call getDouble() or getInt() and what I need to know is how do I figure out at query time what the data type is of the field so I can set it correctly. I don&#39;t see a way to getNumber() or anything so I&#39;m stuck on figuring it out. Maybe getObject() and then check its class type, I don&#39;t know if that is possible or performant. This is for several million documents of data and trying to find the right solution. I could add a field that is an int that tells the data type but trying to avoid that. ","title":"Storing/Query Java Numbers In MongoDB with Java Driver","body":"<p>I have a Java object that has a numeric data field, in some cases it can be a double, int or long and I am using java.lang.Number as the field type which works fine for serialization via JSON.</p>\n<p>When inserting into Mongo I am creating a document, and for the field I look to see what its sub class is, if its a double i then use setDouble() etc. This works fine.</p>\n<p>The challenge I have is how do I convert the Document back to the POJO object when reading data from the Database. It seems like I have to call getDouble() or getInt() and what I need to know is how do I figure out at query time what the data type is of the field so I can set it correctly. I don't see a way to getNumber() or anything so I'm stuck on figuring it out. Maybe getObject() and then check its class type, I don't know if that is possible or performant. This is for several million documents of data and trying to find the right solution. I could add a field that is an int that tells the data type but trying to avoid that.</p>\n"},{"tags":["java","oauth","jwt","cryptography","java-security"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":3,"creation_date":1693520561,"post_id":77019496,"comment_id":135776028,"body_markdown":"You are using the public exponent instead of the private exponent when instantiating the private key, which is wrong. See the documentation on [`RSAPrivateKeySpec`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/spec/RSAPrivateKeySpec.html) and the basics on public and private RSA keys, e.g. [here](https://crypto.stackexchange.com/q/66770).","body":"You are using the public exponent instead of the private exponent when instantiating the private key, which is wrong. See the documentation on <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/spec/RSAPrivateKeySpec.html\" rel=\"nofollow noreferrer\"><code>RSAPrivateKeySpec</code></a> and the basics on public and private RSA keys, e.g. <a href=\"https://crypto.stackexchange.com/q/66770\">here</a>."},{"owner":{"account_id":5164013,"reputation":29,"user_id":4134699,"display_name":"Kuldeep Singh"},"score":0,"creation_date":1693561775,"post_id":77019496,"comment_id":135780611,"body_markdown":"Thankyou @Topaco It worked, used KeyPairGenerator instead of generating keys manually through mod and exp.","body":"Thankyou @Topaco It worked, used KeyPairGenerator instead of generating keys manually through mod and exp."}],"owner":{"account_id":5164013,"reputation":29,"user_id":4134699,"display_name":"Kuldeep Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693519281,"creation_date":1693519281,"question_id":77019496,"body_markdown":"I have first signed a string message using private key then I&#39;m verifying signed message using public key. verify returns false, it should verify true. I have attached code used below. I&#39;m new to cryptography not sure if I&#39;m following the logic here. Thanks for your time and help.\r\n\r\n```\r\nimport java.math.BigInteger;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.*;\r\nimport java.security.spec.InvalidKeySpecException;\r\nimport java.security.spec.RSAPrivateKeySpec;\r\nimport java.security.spec.RSAPublicKeySpec;\r\nimport java.util.Base64;\r\n\r\npublic class JWT2 {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String plainTextMessage = &quot;A Secret!&quot;;\r\n        String n = &quot;nsvTaplDkhFc-M1T-9EUtPPmzHsEvxFtiyZO9XXpx6HbU3NSIquvKAetH6LFteKGGqnF_XV2Qs9lQ2ZSI57YUyvFSWAiNoxT9a36smm71lxm8slvu6K6WGnQlKzCWZ0AxWqAB2lHUsff_OgXCOam9rGMizCQAuTyowvY6XtMswLB-FoVyRaM2zoRPo9_dEeu1y1Cyn8Bu2Ff02mGX_rP0J_UZM1OH1GpjfP4IU51ToqxZx-ZeTZsIoSgd7xfSt5vMS-Q-kvVWXcljoPyNEZ3vegwPHwXUMI4xKPpaXqZzuChfDFHIHwsSafwbCfcx0CHBURuYbjNYjeCBgtbPtaLCw&quot;;\r\n        e = &quot;AQAB&quot;;\r\n\r\n        byte[] signedMessageBytes = signMessage(plainTextMessage, generatePrivateKey(n, e));\r\n\r\n        boolean isMsgValid = verifySignedMessage(plainTextMessage.getBytes(StandardCharsets.UTF_8), signedMessageBytes, generatePublicKey(n, e));\r\n        System.out.println(&quot;isMsgValid = &quot; + isMsgValid);\r\n    }\r\n\r\n    static boolean verifySignedMessage(byte[] plainTextMessagebytes, byte[] signedMessageBytes, PublicKey publicKey) throws Exception {\r\n        Signature signature = Signature.getInstance(&quot;SHA256withRSA&quot;);\r\n        signature.initVerify(publicKey);\r\n        signature.update(plainTextMessagebytes);\r\n        return signature.verify(signedMessageBytes);\r\n    }\r\n\r\n    static byte[] signMessage(String plainTextMessage, PrivateKey privateKey) throws Exception {\r\n        Signature signature = Signature.getInstance(&quot;SHA256withRSA&quot;);\r\n        signature.initSign(privateKey);\r\n        signature.update(plainTextMessage.getBytes(StandardCharsets.UTF_8));\r\n        return signature.sign();\r\n    }\r\n\r\n    static PublicKey generatePublicKey(String modulus, String publicExponent) throws NoSuchAlgorithmException, InvalidKeySpecException {\r\n        BigInteger n = new BigInteger(1, Base64.getUrlDecoder().decode(modulus));\r\n        BigInteger e = new BigInteger(1, Base64.getUrlDecoder().decode(publicExponent));\r\n\r\n        PublicKey pk = KeyFactory.getInstance(&quot;RSA&quot;).generatePublic(new RSAPublicKeySpec(n, e));\r\n        return pk;\r\n    }\r\n\r\n    static PrivateKey generatePrivateKey(String modulus, String publicExponent) throws NoSuchAlgorithmException, InvalidKeySpecException {\r\n        BigInteger n = new BigInteger(1, Base64.getUrlDecoder().decode(modulus));\r\n        BigInteger e = new BigInteger(1, Base64.getUrlDecoder().decode(publicExponent));\r\n\r\n        PrivateKey pk = KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(new RSAPrivateKeySpec(n, e));\r\n        return pk;\r\n    }\r\n}\r\n\r\n```","title":"Java Signature verify using PublicKey not working","body":"<p>I have first signed a string message using private key then I'm verifying signed message using public key. verify returns false, it should verify true. I have attached code used below. I'm new to cryptography not sure if I'm following the logic here. Thanks for your time and help.</p>\n<pre><code>import java.math.BigInteger;\nimport java.nio.charset.StandardCharsets;\nimport java.security.*;\nimport java.security.spec.InvalidKeySpecException;\nimport java.security.spec.RSAPrivateKeySpec;\nimport java.security.spec.RSAPublicKeySpec;\nimport java.util.Base64;\n\npublic class JWT2 {\n\n    public static void main(String[] args) throws Exception {\n        String plainTextMessage = &quot;A Secret!&quot;;\n        String n = &quot;nsvTaplDkhFc-M1T-9EUtPPmzHsEvxFtiyZO9XXpx6HbU3NSIquvKAetH6LFteKGGqnF_XV2Qs9lQ2ZSI57YUyvFSWAiNoxT9a36smm71lxm8slvu6K6WGnQlKzCWZ0AxWqAB2lHUsff_OgXCOam9rGMizCQAuTyowvY6XtMswLB-FoVyRaM2zoRPo9_dEeu1y1Cyn8Bu2Ff02mGX_rP0J_UZM1OH1GpjfP4IU51ToqxZx-ZeTZsIoSgd7xfSt5vMS-Q-kvVWXcljoPyNEZ3vegwPHwXUMI4xKPpaXqZzuChfDFHIHwsSafwbCfcx0CHBURuYbjNYjeCBgtbPtaLCw&quot;;\n        e = &quot;AQAB&quot;;\n\n        byte[] signedMessageBytes = signMessage(plainTextMessage, generatePrivateKey(n, e));\n\n        boolean isMsgValid = verifySignedMessage(plainTextMessage.getBytes(StandardCharsets.UTF_8), signedMessageBytes, generatePublicKey(n, e));\n        System.out.println(&quot;isMsgValid = &quot; + isMsgValid);\n    }\n\n    static boolean verifySignedMessage(byte[] plainTextMessagebytes, byte[] signedMessageBytes, PublicKey publicKey) throws Exception {\n        Signature signature = Signature.getInstance(&quot;SHA256withRSA&quot;);\n        signature.initVerify(publicKey);\n        signature.update(plainTextMessagebytes);\n        return signature.verify(signedMessageBytes);\n    }\n\n    static byte[] signMessage(String plainTextMessage, PrivateKey privateKey) throws Exception {\n        Signature signature = Signature.getInstance(&quot;SHA256withRSA&quot;);\n        signature.initSign(privateKey);\n        signature.update(plainTextMessage.getBytes(StandardCharsets.UTF_8));\n        return signature.sign();\n    }\n\n    static PublicKey generatePublicKey(String modulus, String publicExponent) throws NoSuchAlgorithmException, InvalidKeySpecException {\n        BigInteger n = new BigInteger(1, Base64.getUrlDecoder().decode(modulus));\n        BigInteger e = new BigInteger(1, Base64.getUrlDecoder().decode(publicExponent));\n\n        PublicKey pk = KeyFactory.getInstance(&quot;RSA&quot;).generatePublic(new RSAPublicKeySpec(n, e));\n        return pk;\n    }\n\n    static PrivateKey generatePrivateKey(String modulus, String publicExponent) throws NoSuchAlgorithmException, InvalidKeySpecException {\n        BigInteger n = new BigInteger(1, Base64.getUrlDecoder().decode(modulus));\n        BigInteger e = new BigInteger(1, Base64.getUrlDecoder().decode(publicExponent));\n\n        PrivateKey pk = KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(new RSAPrivateKeySpec(n, e));\n        return pk;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","logging","logback","slf4j"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1507547709,"post_id":46644023,"comment_id":80239154,"body_markdown":"You could just display the full MDC (this of course requires that you store only important information there), then it would log only the contents that exist. In your example you&#39;ve hardcoded the `user_uuid=` part, so that&#39;s not going to go anywhere.","body":"You could just display the full MDC (this of course requires that you store only important information there), then it would log only the contents that exist. In your example you&#39;ve hardcoded the <code>user_uuid=</code> part, so that&#39;s not going to go anywhere."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1507547752,"post_id":46644023,"comment_id":80239176,"body_markdown":"See https://stackoverflow.com/questions/24616745/how-to-conditionally-add-text-from-mdc-on-a-log4j-pattern for a duplicate.","body":"See <a href=\"https://stackoverflow.com/questions/24616745/how-to-conditionally-add-text-from-mdc-on-a-log4j-pattern\" title=\"how to conditionally add text from mdc on a log4j pattern\">stackoverflow.com/questions/24616745/&hellip;</a> for a duplicate."}],"answers":[{"comments":[{"owner":{"account_id":1979618,"reputation":2791,"user_id":1776540,"accept_rate":62,"display_name":"Robin Jonsson"},"score":1,"creation_date":1507553246,"post_id":46645367,"comment_id":80242610,"body_markdown":"Very comprehensive answer! Thank you very much :)\nI will create some kind of util class to manage the MDC `put` calls. (Which will wrap them with `key=&lt;val&gt;`","body":"Very comprehensive answer! Thank you very much :) I will create some kind of util class to manage the MDC <code>put</code> calls. (Which will wrap them with <code>key=&lt;val&gt;</code>"}],"tags":[],"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1507548540,"creation_date":1507548540,"answer_id":46645367,"question_id":46644023,"body_markdown":"This entry in your pattern ...\r\n\r\n    user_uuid=%mdc{user_uuid:-}\r\n\r\n... consists of two parts: \r\n\r\n1. A static &#39;root&#39; (i.e. the left hand side of the assignment) this is always present in the output. The decision to include this is made when Logback initialises itself.\r\n\r\n2. A value (i.e. the right hand side of the assignment), this is only present in the output if the MDC attribute `user_uuid` is populated. The decision to include this is made at runtime for each log event.\r\n\r\nProbably not telling you anything new there but the key point is that the inclusion of the left hand side cannot be undone by any conditional logic which kicks in when evaluating each log event emitted by your application. Logback&#39;s `PatternLayoutBase` walks through its given pattern and each time it comes to something conditional or derivable it evaluates it and appends the evaluated value to the pattern it is walking through. So, for your pattern; Logback has already assigned &quot;user_uuid=&quot; to the current StringBuilder before it even starts evaluating the MDC condition.\r\n\r\nHowever, you _could_ achieve the desired end goal by populating the `user_uuid` MDC attribute with: `user_uuid=&lt;the user id&gt;` and then change you logging pattern to simply log the MDC value without the assignment. For example:\r\n\r\n    %-5p [%d{ISO8601,UTC}] %mdc{user_uuid:-}%c: %m%n%rEx\r\n\r\nWith that pattern in place the following log invocations ...\r\n\r\n    logger.info(&quot;Does this include the user_uuid?&quot;);\r\n    MDC.put(&quot;user_uuid&quot;, &quot;user_uuid=me &quot;);\r\n    logger.info(&quot;Or does this include the user_uuid?&quot;);\r\n\r\n... will emit:\r\n\r\n    INFO  [2017-10-09 11:15:22,420] com.stackoverflow.SomeClassTest: Does this include the user_uuid?\r\n    INFO  [2017-10-09 11:15:22,435] user_uuid=me com.stackoverflow.SomeClassTest: Or does this include the user_uuid?\r\n\r\nThough that&#39;s a bit awkward because you have to remember to include a space at the end of the MDC value and this `user_uuid` MDC value is only useful for logging within this specific pattern (whereas simply including the `user_uuid` - without the left hand side and the equals operator - would be more generally useful).\r\n\r\nIf these drawbacks render this approach unuseable for you then I think you&#39;ll have to get stuck into Logback&#39;s `PatternLayoutBase` or `FormattingConverter` to implement some form of look-ahead or some way of amending the in-progress StringBuilder if the right hand side of an assignment returns an empty String.\r\n","title":"Logging optional key values","body":"<p>This entry in your pattern ...</p>\n\n<pre><code>user_uuid=%mdc{user_uuid:-}\n</code></pre>\n\n<p>... consists of two parts: </p>\n\n<ol>\n<li><p>A static 'root' (i.e. the left hand side of the assignment) this is always present in the output. The decision to include this is made when Logback initialises itself.</p></li>\n<li><p>A value (i.e. the right hand side of the assignment), this is only present in the output if the MDC attribute <code>user_uuid</code> is populated. The decision to include this is made at runtime for each log event.</p></li>\n</ol>\n\n<p>Probably not telling you anything new there but the key point is that the inclusion of the left hand side cannot be undone by any conditional logic which kicks in when evaluating each log event emitted by your application. Logback's <code>PatternLayoutBase</code> walks through its given pattern and each time it comes to something conditional or derivable it evaluates it and appends the evaluated value to the pattern it is walking through. So, for your pattern; Logback has already assigned \"user_uuid=\" to the current StringBuilder before it even starts evaluating the MDC condition.</p>\n\n<p>However, you <em>could</em> achieve the desired end goal by populating the <code>user_uuid</code> MDC attribute with: <code>user_uuid=&lt;the user id&gt;</code> and then change you logging pattern to simply log the MDC value without the assignment. For example:</p>\n\n<pre><code>%-5p [%d{ISO8601,UTC}] %mdc{user_uuid:-}%c: %m%n%rEx\n</code></pre>\n\n<p>With that pattern in place the following log invocations ...</p>\n\n<pre><code>logger.info(\"Does this include the user_uuid?\");\nMDC.put(\"user_uuid\", \"user_uuid=me \");\nlogger.info(\"Or does this include the user_uuid?\");\n</code></pre>\n\n<p>... will emit:</p>\n\n<pre><code>INFO  [2017-10-09 11:15:22,420] com.stackoverflow.SomeClassTest: Does this include the user_uuid?\nINFO  [2017-10-09 11:15:22,435] user_uuid=me com.stackoverflow.SomeClassTest: Or does this include the user_uuid?\n</code></pre>\n\n<p>Though that's a bit awkward because you have to remember to include a space at the end of the MDC value and this <code>user_uuid</code> MDC value is only useful for logging within this specific pattern (whereas simply including the <code>user_uuid</code> - without the left hand side and the equals operator - would be more generally useful).</p>\n\n<p>If these drawbacks render this approach unuseable for you then I think you'll have to get stuck into Logback's <code>PatternLayoutBase</code> or <code>FormattingConverter</code> to implement some form of look-ahead or some way of amending the in-progress StringBuilder if the right hand side of an assignment returns an empty String.</p>\n"},{"comments":[{"owner":{"account_id":78490,"reputation":1643,"user_id":223365,"accept_rate":50,"display_name":"KidCrippler"},"score":0,"creation_date":1613781575,"post_id":58203509,"comment_id":117191192,"body_markdown":"That&#39;s a really nice and almost elegant hack that actually achieves the end goal","body":"That&#39;s a really nice and almost elegant hack that actually achieves the end goal"}],"tags":[],"owner":{"account_id":11831233,"reputation":9024,"user_id":8657904,"display_name":"Alin S&#238;npălean"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1570026214,"creation_date":1570026214,"answer_id":58203509,"question_id":46644023,"body_markdown":"You can use `%replace` to replace `user_uuid=` with an empty string if the value is missing (note the trailing `$` in the regex, meaning &quot;end of input&quot;):\r\n\r\n```\r\n%-5p [%d{ISO8601,UTC}]%replace( user_uuid=%mdc{user_uuid}){&#39; user_uuid=$&#39;, &#39;&#39;} %c: %m%n%rEx\r\n```\r\n\r\nAs a bonus, the above will also remove the leading space if the value is missing, so you don&#39;t get two successive spaces in your log message if the value is missing.","title":"Logging optional key values","body":"<p>You can use <code>%replace</code> to replace <code>user_uuid=</code> with an empty string if the value is missing (note the trailing <code>$</code> in the regex, meaning \"end of input\"):</p>\n\n<pre><code>%-5p [%d{ISO8601,UTC}]%replace( user_uuid=%mdc{user_uuid}){' user_uuid=$', ''} %c: %m%n%rEx\n</code></pre>\n\n<p>As a bonus, the above will also remove the leading space if the value is missing, so you don't get two successive spaces in your log message if the value is missing.</p>\n"},{"tags":[],"owner":{"account_id":2800516,"reputation":960,"user_id":2408843,"display_name":"minivac"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693518944,"creation_date":1693518944,"answer_id":77019473,"question_id":46644023,"body_markdown":"Similar to Alin S&#238;npălean response, this hack will also help with trailing spaces,\r\n\r\n\r\n```\r\n[text before]%replace( %X{any_key} ){&#39;  &#39;, &#39; &#39;}[text after]\r\n```\r\nNote the two empty spaces wrapping the expression in `%replace( %X{any_key} )`\r\n\r\nif the variable is empty, the double space will be replaced by a single one, so it looks consistent:\r\n```\r\n[text before] [text after] \r\n```\r\nAnd it will be properly spaced if it contains anything\r\n```\r\n[text before] content [text after] \r\n```\r\n\r\n","title":"Logging optional key values","body":"<p>Similar to Alin Sînpălean response, this hack will also help with trailing spaces,</p>\n<pre><code>[text before]%replace( %X{any_key} ){'  ', ' '}[text after]\n</code></pre>\n<p>Note the two empty spaces wrapping the expression in <code>%replace( %X{any_key} )</code></p>\n<p>if the variable is empty, the double space will be replaced by a single one, so it looks consistent:</p>\n<pre><code>[text before] [text after] \n</code></pre>\n<p>And it will be properly spaced if it contains anything</p>\n<pre><code>[text before] content [text after] \n</code></pre>\n"}],"owner":{"account_id":1979618,"reputation":2791,"user_id":1776540,"accept_rate":62,"display_name":"Robin Jonsson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5264,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":46645367,"answer_count":3,"score":12,"last_activity_date":1693518944,"creation_date":1507544035,"question_id":46644023,"body_markdown":"I have this webapplication that logs quite heavily. We have implemented a call to `MDC` for each requesting thread to be able to trace a user in our logs.\r\n\r\nA logmessage could look as follows: \r\n\r\n    INFO  [2017-10-09 10:10:55,841] user_uuid=123-123-123 com.myapp.SomeClass: Some log message...\r\n\r\nNow the problem is that most of the time, no current user exist, and we don&#39;t have use for the `user_uuid` field in the log example above. So instead, it will look like this:\r\n\r\n    INFO  [2017-10-09 10:10:55,841] user_uuid= com.myapp.SomeClass: Some log message...\r\n\r\n**Is there any way of not writing the MDC key &amp; value in log if there is no MDC value? Some log format I haven&#39;t found yet?**\r\n\r\nI want it to look like this, if no MDC value is found:\r\n\r\n    INFO  [2017-10-09 10:10:55,841] com.myapp.SomeClass: Some log message...\r\n\r\nThe above (MDC) examples are configured like so:\r\n\r\n    %-5p [%d{ISO8601,UTC}] user_uuid=%mdc{user_uuid:-} %c: %m%n%rEx","title":"Logging optional key values","body":"<p>I have this webapplication that logs quite heavily. We have implemented a call to <code>MDC</code> for each requesting thread to be able to trace a user in our logs.</p>\n\n<p>A logmessage could look as follows: </p>\n\n<pre><code>INFO  [2017-10-09 10:10:55,841] user_uuid=123-123-123 com.myapp.SomeClass: Some log message...\n</code></pre>\n\n<p>Now the problem is that most of the time, no current user exist, and we don't have use for the <code>user_uuid</code> field in the log example above. So instead, it will look like this:</p>\n\n<pre><code>INFO  [2017-10-09 10:10:55,841] user_uuid= com.myapp.SomeClass: Some log message...\n</code></pre>\n\n<p><strong>Is there any way of not writing the MDC key &amp; value in log if there is no MDC value? Some log format I haven't found yet?</strong></p>\n\n<p>I want it to look like this, if no MDC value is found:</p>\n\n<pre><code>INFO  [2017-10-09 10:10:55,841] com.myapp.SomeClass: Some log message...\n</code></pre>\n\n<p>The above (MDC) examples are configured like so:</p>\n\n<pre><code>%-5p [%d{ISO8601,UTC}] user_uuid=%mdc{user_uuid:-} %c: %m%n%rEx\n</code></pre>\n"},{"tags":["java","json","spring-boot","date-parsing"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1693162372,"post_id":76988438,"comment_id":135720510,"body_markdown":"How do you expect anyone to debug code that you don&#39;t bother posting?","body":"How do you expect anyone to debug code that you don&#39;t bother posting?"},{"owner":{"account_id":28730357,"reputation":73,"user_id":22002449,"display_name":"dracile"},"score":0,"creation_date":1693162742,"post_id":76988438,"comment_id":135720560,"body_markdown":"@ArfurNarf Updated code, though I guess code is working fine, there is some issue with Date data type still not sure how can I handle this.","body":"@ArfurNarf Updated code, though I guess code is working fine, there is some issue with Date data type still not sure how can I handle this."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":2,"creation_date":1693164086,"post_id":76988438,"comment_id":135720696,"body_markdown":"I suggest you stop using `java.util.Date` and switch to the `java.time` API.","body":"I suggest you stop using <code>java.util.Date</code> and switch to the <code>java.time</code> API."},{"owner":{"account_id":28730357,"reputation":73,"user_id":22002449,"display_name":"dracile"},"score":0,"creation_date":1693164541,"post_id":76988438,"comment_id":135720746,"body_markdown":"@ArvindKumarAvinash yeah I tried with ```LocalDate DataType``` and it worked for me, this comes under ```java.time```, Thanks \nBut it has a restriction of Date format to ```yyyy-mm-dd``` only and my request from payload is going in this format ```yyyymmdd```","body":"@ArvindKumarAvinash yeah I tried with <code>LocalDate DataType</code> and it worked for me, this comes under <code>java.time</code>, Thanks  But it has a restriction of Date format to <code>yyyy-mm-dd</code> only and my request from payload is going in this format <code>yyyymmdd</code>"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1693298003,"post_id":76988438,"comment_id":135738729,"body_markdown":"You should **never** log DOB. Or any [PII](https://en.wikipedia.org/wiki/Personal_data).","body":"You should <b>never</b> log DOB. Or any <a href=\"https://en.wikipedia.org/wiki/Personal_data\" rel=\"nofollow noreferrer\">PII</a>."}],"answers":[{"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1693298080,"post_id":76988585,"comment_id":135738736,"body_markdown":"Or more simply `if (Objects.equals(newValue, oldValue))`","body":"Or more simply <code>if (Objects.equals(newValue, oldValue))</code>"}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693163741,"creation_date":1693163741,"answer_id":76988585,"question_id":76988438,"body_markdown":"I would focus a bit on the lines\r\n\r\n    if (newValue == null || newValue.equals(oldValue)) {\r\n      return this;\r\n    }\r\n    this.updatedFields.add(fieldName);\r\n\r\nFor some reason the updatedField.add(...) is called every time for dob.\r\nSo what may be happening that newValue is either null or equals does not work as expected. Apply a debugging session or add more log output so you understand why that comparison fails.","title":"Why DOB logging every time whether updated or not during update API in Java?","body":"<p>I would focus a bit on the lines</p>\n<pre><code>if (newValue == null || newValue.equals(oldValue)) {\n  return this;\n}\nthis.updatedFields.add(fieldName);\n</code></pre>\n<p>For some reason the updatedField.add(...) is called every time for dob.\nSo what may be happening that newValue is either null or equals does not work as expected. Apply a debugging session or add more log output so you understand why that comparison fails.</p>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693297031,"creation_date":1693167137,"answer_id":76988777,"question_id":76988438,"body_markdown":"java.time\r\n--\r\nThe `java.util` date-time API and their corresponding parsing/formatting type, `SimpleDateFormat` are outdated and error-prone. In March 2014, the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) supplanted the legacy date-time API. Since then, it has been strongly recommended to switch to `java.time`, the modern date-time API.\r\n\r\nYou can use [`DateTimeFormatter#BASIC_ISO_DATE`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#BASIC_ISO_DATE) (which corresponds to yyyyMMdd pattern) to parse your date string, 20101212 to a `LocalDate`.\r\n\r\n**Demo:**\r\n\r\n    import java.time.LocalDate;\r\n    import java.time.format.DateTimeFormatter;\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            System.out.println(LocalDate.parse(&quot;20101212&quot;, DateTimeFormatter.BASIC_ISO_DATE));\r\n        }\r\n    }\r\n**Output:**\r\n\r\n    2010-12-12\r\n\r\nBased on this description, you can make the following changes in your code:\r\n\r\n    @JsonProperty(value = &quot;DOB&quot;)\r\n    @JsonFormat(pattern = &quot;yyyyMMdd&quot;, shape = JsonFormat.Shape.STRING)\r\n    private LocalDate DOB;\r\n\r\nLearn about the modern date-time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**","title":"Why DOB logging every time whether updated or not during update API in Java?","body":"<h2>java.time</h2>\n<p>The <code>java.util</code> date-time API and their corresponding parsing/formatting type, <code>SimpleDateFormat</code> are outdated and error-prone. In March 2014, the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a> supplanted the legacy date-time API. Since then, it has been strongly recommended to switch to <code>java.time</code>, the modern date-time API.</p>\n<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#BASIC_ISO_DATE\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter#BASIC_ISO_DATE</code></a> (which corresponds to yyyyMMdd pattern) to parse your date string, 20101212 to a <code>LocalDate</code>.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\n\nclass Main {\n    public static void main(String[] args) {\n        System.out.println(LocalDate.parse(&quot;20101212&quot;, DateTimeFormatter.BASIC_ISO_DATE));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2010-12-12\n</code></pre>\n<p>Based on this description, you can make the following changes in your code:</p>\n<pre><code>@JsonProperty(value = &quot;DOB&quot;)\n@JsonFormat(pattern = &quot;yyyyMMdd&quot;, shape = JsonFormat.Shape.STRING)\nprivate LocalDate DOB;\n</code></pre>\n<p>Learn about the modern date-time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong></p>\n"}],"owner":{"account_id":28730357,"reputation":73,"user_id":22002449,"display_name":"dracile"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76988777,"answer_count":2,"score":1,"last_activity_date":1693518405,"creation_date":1693161035,"question_id":76988438,"body_markdown":"I am logging fields which will be update during update API call.\r\nBut getting DOB field every time whether it is updating or not \r\n\r\nDOB is of Date type\r\n```\r\nprivate Date DOB;\r\n```\r\nLogging DOB VALUE when passing this in payload ```{ &quot;DOB&quot;: &quot;1990-01-01&quot;}```\r\n```\r\ndob: Mon Jan 01 05:30:00 IST 1990\r\nUpdated Fields during request: DOB  \r\n```\r\nis it because it has time also? Though I&#39;m getting same time on every request, still, it is printing that DOB is updated even when value was same and not updated. Why so? \r\n\r\nAnd if I am passing DOB in payload (postman) like this: \r\n```\r\n &quot;DOB&quot;: &quot;20101212&quot;\r\n\r\n//it is printing only this 1970 value on log console\r\ndob: Thu Jan 01 11:05:01 IST 1970 \r\n```\r\nHow can I handle these situations? \r\n\r\nCode \r\n```\r\npublic static class Updater {\r\n  private final OrgEmployeeMap existing;\r\n  private final EmployeeInformation information;\r\n  private final Set&lt;String&gt; updatedFields = new HashSet&lt;&gt;();\r\n\r\n  public Updater(OrgEmployeeMap existing, EmployeeInformation information) {\r\n    this.existing = existing;\r\n    this.information = information;\r\n  }\r\n\r\n  public &lt;T&gt; Updater update(String fieldName,\r\n                            Function&lt;EmployeeInformation, T&gt; newValueGetter,\r\n                            Function&lt;OrgEmployeeMap, T&gt; oldValueGetter,\r\n                            BiConsumer&lt;OrgEmployeeMap, T&gt; oldValueSetter) {\r\n    final var newValue = newValueGetter.apply(information);\r\n    final var oldValue = oldValueGetter.apply(existing);\r\n    if (newValue == null || newValue.equals(oldValue)) {\r\n      return this;\r\n    }\r\n    this.updatedFields.add(fieldName);\r\n    oldValueSetter.accept(existing, newValue);\r\n    return this;\r\n  }\r\n\r\n  public Set&lt;String&gt; getUpdatedFields() {\r\n    return updatedFields;\r\n  }\r\n}\r\nprivate void updateExistingEmployee(OrgEmployeeMap existingOrgEmployee, RequestMessage requestMessage) {\r\n    try {\r\n        EmployeeInformation employeeInfo = requestMessage.getData().get(0).getDemographicData().getEmployeeInformation().get(0);\r\n        final var updater = new Updater(existingOrgEmployee, employeeInfo);\r\n\r\n        updater\r\n            .update(&quot;FirstName&quot;, EmployeeInformation::getEmployeeFirstName, OrgEmployeeMap::getFirstName, OrgEmployeeMap::setFirstName)\r\n            .update(&quot;LastName&quot;, EmployeeInformation::getEmployeeLastName, OrgEmployeeMap::getLastName, OrgEmployeeMap::setLastName)\r\n            .update(&quot;DOB&quot;, EmployeeInformation::getDOB, OrgEmployeeMap::getDob, OrgEmployeeMap::setDob)\r\n            .update(&quot;Gender&quot;, EmployeeInformation::getGender, OrgEmployeeMap::getGender, OrgEmployeeMap::setGender)\r\n            .update(&quot;Email&quot;, EmployeeInformation::getEmail, OrgEmployeeMap::getEmail, OrgEmployeeMap::setEmail);\r\n\r\n        final var modifiedFields = updater.getUpdatedFields();\r\n        if (!modifiedFields.isEmpty()) {\r\n            log.info(&quot;Updated employee : &quot; + String.join(&quot;, &quot;, modifiedFields));\r\n        }\r\n\r\n        orgEmployeeMapRepository.save(existingOrgEmployee);\r\n\r\n        log.info(&quot;Updated Employee : &quot; + existingOrgEmployee);\r\n    } catch (JSONException e) {\r\n        log.error(&quot;error in processing the request error&quot;, e.getMessage());\r\n    } catch (Exception ex) {\r\n        log.error(&quot;An unexpected error occurred: &quot; + ex.getMessage(), ex);\r\n    }\r\n}\r\n```\r\n\r\ndto class\r\n```\r\n@Data\r\npublic class EmployeeInformation {\r\n\r\n    @JsonProperty(value = &quot;Email&quot;)\r\n    private String Email;\r\n\r\n    @JsonProperty(value = &quot;EmployeeFirstName&quot;)\r\n    private String EmployeeFirstName;\r\n\r\n    @JsonProperty(value = &quot;EmployeeLastName&quot;)\r\n    private String EmployeeLastName;\r\n\r\n    @JsonProperty(value = &quot;DOB&quot;)\r\n    private Date DOB;\r\n\r\n..\r\n}\r\n```\r\n\r\nmodel class\r\n```\r\n@Data\r\n@Entity\r\n@Table(name = &quot;employee&quot;)\r\npublic class EmployeeMap {\r\n@Id\r\n    @Column(name = &quot;Id&quot;, length = 100, nullable = false)\r\n    private String Id;\r\n\r\n    @Column(name = &quot;firstName&quot;, length = 100, nullable = false)\r\n    private String firstName;\r\n\r\n    @Column(name = &quot;lastName&quot;, length = 100)\r\n    private String lastName;\r\n\r\n    @Column(name = &quot;email&quot;, length = 100, nullable = false)\r\n    private String email;\r\n\r\n    @Column(name = &quot;gender&quot;)\r\n    private String gender;\r\n\r\n    @Column(name = &quot;dob&quot;, nullable = false)\r\n    private Date dob;\r\n}\r\n```","title":"Why DOB logging every time whether updated or not during update API in Java?","body":"<p>I am logging fields which will be update during update API call.\nBut getting DOB field every time whether it is updating or not</p>\n<p>DOB is of Date type</p>\n<pre><code>private Date DOB;\n</code></pre>\n<p>Logging DOB VALUE when passing this in payload <code>{ &quot;DOB&quot;: &quot;1990-01-01&quot;}</code></p>\n<pre><code>dob: Mon Jan 01 05:30:00 IST 1990\nUpdated Fields during request: DOB  \n</code></pre>\n<p>is it because it has time also? Though I'm getting same time on every request, still, it is printing that DOB is updated even when value was same and not updated. Why so?</p>\n<p>And if I am passing DOB in payload (postman) like this:</p>\n<pre><code> &quot;DOB&quot;: &quot;20101212&quot;\n\n//it is printing only this 1970 value on log console\ndob: Thu Jan 01 11:05:01 IST 1970 \n</code></pre>\n<p>How can I handle these situations?</p>\n<p>Code</p>\n<pre><code>public static class Updater {\n  private final OrgEmployeeMap existing;\n  private final EmployeeInformation information;\n  private final Set&lt;String&gt; updatedFields = new HashSet&lt;&gt;();\n\n  public Updater(OrgEmployeeMap existing, EmployeeInformation information) {\n    this.existing = existing;\n    this.information = information;\n  }\n\n  public &lt;T&gt; Updater update(String fieldName,\n                            Function&lt;EmployeeInformation, T&gt; newValueGetter,\n                            Function&lt;OrgEmployeeMap, T&gt; oldValueGetter,\n                            BiConsumer&lt;OrgEmployeeMap, T&gt; oldValueSetter) {\n    final var newValue = newValueGetter.apply(information);\n    final var oldValue = oldValueGetter.apply(existing);\n    if (newValue == null || newValue.equals(oldValue)) {\n      return this;\n    }\n    this.updatedFields.add(fieldName);\n    oldValueSetter.accept(existing, newValue);\n    return this;\n  }\n\n  public Set&lt;String&gt; getUpdatedFields() {\n    return updatedFields;\n  }\n}\nprivate void updateExistingEmployee(OrgEmployeeMap existingOrgEmployee, RequestMessage requestMessage) {\n    try {\n        EmployeeInformation employeeInfo = requestMessage.getData().get(0).getDemographicData().getEmployeeInformation().get(0);\n        final var updater = new Updater(existingOrgEmployee, employeeInfo);\n\n        updater\n            .update(&quot;FirstName&quot;, EmployeeInformation::getEmployeeFirstName, OrgEmployeeMap::getFirstName, OrgEmployeeMap::setFirstName)\n            .update(&quot;LastName&quot;, EmployeeInformation::getEmployeeLastName, OrgEmployeeMap::getLastName, OrgEmployeeMap::setLastName)\n            .update(&quot;DOB&quot;, EmployeeInformation::getDOB, OrgEmployeeMap::getDob, OrgEmployeeMap::setDob)\n            .update(&quot;Gender&quot;, EmployeeInformation::getGender, OrgEmployeeMap::getGender, OrgEmployeeMap::setGender)\n            .update(&quot;Email&quot;, EmployeeInformation::getEmail, OrgEmployeeMap::getEmail, OrgEmployeeMap::setEmail);\n\n        final var modifiedFields = updater.getUpdatedFields();\n        if (!modifiedFields.isEmpty()) {\n            log.info(&quot;Updated employee : &quot; + String.join(&quot;, &quot;, modifiedFields));\n        }\n\n        orgEmployeeMapRepository.save(existingOrgEmployee);\n\n        log.info(&quot;Updated Employee : &quot; + existingOrgEmployee);\n    } catch (JSONException e) {\n        log.error(&quot;error in processing the request error&quot;, e.getMessage());\n    } catch (Exception ex) {\n        log.error(&quot;An unexpected error occurred: &quot; + ex.getMessage(), ex);\n    }\n}\n</code></pre>\n<p>dto class</p>\n<pre><code>@Data\npublic class EmployeeInformation {\n\n    @JsonProperty(value = &quot;Email&quot;)\n    private String Email;\n\n    @JsonProperty(value = &quot;EmployeeFirstName&quot;)\n    private String EmployeeFirstName;\n\n    @JsonProperty(value = &quot;EmployeeLastName&quot;)\n    private String EmployeeLastName;\n\n    @JsonProperty(value = &quot;DOB&quot;)\n    private Date DOB;\n\n..\n}\n</code></pre>\n<p>model class</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;employee&quot;)\npublic class EmployeeMap {\n@Id\n    @Column(name = &quot;Id&quot;, length = 100, nullable = false)\n    private String Id;\n\n    @Column(name = &quot;firstName&quot;, length = 100, nullable = false)\n    private String firstName;\n\n    @Column(name = &quot;lastName&quot;, length = 100)\n    private String lastName;\n\n    @Column(name = &quot;email&quot;, length = 100, nullable = false)\n    private String email;\n\n    @Column(name = &quot;gender&quot;)\n    private String gender;\n\n    @Column(name = &quot;dob&quot;, nullable = false)\n    private Date dob;\n}\n</code></pre>\n"},{"tags":["java","groovy"],"answers":[{"tags":[],"owner":{"account_id":28972490,"reputation":11,"user_id":22192451,"display_name":"javanut"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693517666,"creation_date":1693517666,"answer_id":77019389,"question_id":71708127,"body_markdown":"HTTPBuilder does not work with groovy 4. Some of the components have moved packages in the move from codehaus to apache. It will work with groovy 3 with some minor modifications. It works fine with groovy 2.","title":"Trying to use Groovy HTTPBuilder throws NoClassDefFoundError for groovy/util/slurpersupport/GPathResult","body":"<p>HTTPBuilder does not work with groovy 4. Some of the components have moved packages in the move from codehaus to apache. It will work with groovy 3 with some minor modifications. It works fine with groovy 2.</p>\n"}],"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":527,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693517666,"creation_date":1648821650,"question_id":71708127,"body_markdown":"I&#39;m taking the UDEMY **The Complete Apache Groovy Developer Course** in section *112. Using REST based APIs&#39; there is some sample code that is provided that doesn&#39;t work.  The sample code is:\r\n\r\n```\r\nimport groovyx.net.http.ContentType\r\nimport groovyx.net.http.RESTClient\r\n\r\n@Grab(&#39;org.codehaus.groovy.modules.http-builder:http-builder:0.7.1&#39;)\r\n\r\nString base = &#39;http://api.icndb.com&#39;\r\n\r\ndef chuck = new RESTClient(base)\r\ndef params = [firstName: &quot;Dan&quot;, lastName: &quot;Vega&quot;]\r\n\r\nchuck.contentType = ContentType.JSON\r\nchuck.get( path: &#39;/jokes/random&#39;, query: params ) { response, json -&gt;\r\n    println response.status\r\n    println json\r\n}\r\n```\r\nand the error is\r\n```\r\ngroovy chuck.groovy\r\nCaught: java.lang.NoClassDefFoundError: groovy/util/slurpersupport/GPathResult\r\njava.lang.NoClassDefFoundError: groovy/util/slurpersupport/GPathResult\r\n```\r\n**Problem: Trying to use HttpClient apparently fails because that code is using something in Groovy that doesn&#39;t exist (or that is my take on the issue).**\r\n\r\nThe problem might be due to **old** *HttpBuilder* code trying to use something that is no longer in newer Groovy releases. (This is my suspicion).\r\n\r\nThe versions of Java and Groovy I&#39;m using are:\r\n```\r\ngroovy --version\r\nGroovy Version: 4.0.0 JVM: 17.0.2 Vendor: Oracle Corporation OS: Windows 10\r\n```\r\n\r\nI tried searching for an answer to the problem and found https://stackoverflow.com/a/34814548/3281336 which offers a way to verify HttpBuilder is found but it also fails with the same error.\r\n\r\nSearches on HttpBuilder show the software is quite old in software years (2014-ish was last update, see [Maven Repository for HttpBuilder][1]).  \r\n\r\nHttpBuilder has moved, see https://stackoverflow.com/questions/60043572/where-does-the-groovy-http-builder-module-live-now.\r\n\r\nEven a newer fork of HttpBuilder at https://github.com/http-builder-ng/http-builder-ng shows last commits in May 2020.  I&#39;ll try that code next but need to learn a new way to import code to use it.\r\n\r\nI&#39;m heading back to the class and skipping this module for now, and will point to this link when asking about the problem.  Perhaps the instructor will answer it. :-)\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.codehaus.groovy.modules.http-builder/http-builder","title":"Trying to use Groovy HTTPBuilder throws NoClassDefFoundError for groovy/util/slurpersupport/GPathResult","body":"<p>I'm taking the UDEMY <strong>The Complete Apache Groovy Developer Course</strong> in section *112. Using REST based APIs' there is some sample code that is provided that doesn't work.  The sample code is:</p>\n<pre><code>import groovyx.net.http.ContentType\nimport groovyx.net.http.RESTClient\n\n@Grab('org.codehaus.groovy.modules.http-builder:http-builder:0.7.1')\n\nString base = 'http://api.icndb.com'\n\ndef chuck = new RESTClient(base)\ndef params = [firstName: &quot;Dan&quot;, lastName: &quot;Vega&quot;]\n\nchuck.contentType = ContentType.JSON\nchuck.get( path: '/jokes/random', query: params ) { response, json -&gt;\n    println response.status\n    println json\n}\n</code></pre>\n<p>and the error is</p>\n<pre><code>groovy chuck.groovy\nCaught: java.lang.NoClassDefFoundError: groovy/util/slurpersupport/GPathResult\njava.lang.NoClassDefFoundError: groovy/util/slurpersupport/GPathResult\n</code></pre>\n<p><strong>Problem: Trying to use HttpClient apparently fails because that code is using something in Groovy that doesn't exist (or that is my take on the issue).</strong></p>\n<p>The problem might be due to <strong>old</strong> <em>HttpBuilder</em> code trying to use something that is no longer in newer Groovy releases. (This is my suspicion).</p>\n<p>The versions of Java and Groovy I'm using are:</p>\n<pre><code>groovy --version\nGroovy Version: 4.0.0 JVM: 17.0.2 Vendor: Oracle Corporation OS: Windows 10\n</code></pre>\n<p>I tried searching for an answer to the problem and found <a href=\"https://stackoverflow.com/a/34814548/3281336\">https://stackoverflow.com/a/34814548/3281336</a> which offers a way to verify HttpBuilder is found but it also fails with the same error.</p>\n<p>Searches on HttpBuilder show the software is quite old in software years (2014-ish was last update, see <a href=\"https://mvnrepository.com/artifact/org.codehaus.groovy.modules.http-builder/http-builder\" rel=\"nofollow noreferrer\">Maven Repository for HttpBuilder</a>).</p>\n<p>HttpBuilder has moved, see <a href=\"https://stackoverflow.com/questions/60043572/where-does-the-groovy-http-builder-module-live-now\">Where does the groovy http-builder module live now?</a>.</p>\n<p>Even a newer fork of HttpBuilder at <a href=\"https://github.com/http-builder-ng/http-builder-ng\" rel=\"nofollow noreferrer\">https://github.com/http-builder-ng/http-builder-ng</a> shows last commits in May 2020.  I'll try that code next but need to learn a new way to import code to use it.</p>\n<p>I'm heading back to the class and skipping this module for now, and will point to this link when asking about the problem.  Perhaps the instructor will answer it. :-)</p>\n"},{"tags":["java","excel","apache-poi","poi-hssf","hssfworkbook"],"answers":[{"comments":[{"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"score":0,"creation_date":1693509647,"post_id":77018594,"comment_id":135774403,"body_markdown":"I checked the charset encoding of the file. It is UTF-8.","body":"I checked the charset encoding of the file. It is UTF-8."},{"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"score":0,"creation_date":1693510050,"post_id":77018594,"comment_id":135774460,"body_markdown":"I checked the contents of the file. It&#39;s not CSV. It&#39;s an excel format data, with tables and rows.","body":"I checked the contents of the file. It&#39;s not CSV. It&#39;s an excel format data, with tables and rows."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1693512176,"post_id":77018594,"comment_id":135774841,"body_markdown":"Did you really try it by changing the file extension to .txt? &quot;mx lm...&quot; is weird though.","body":"Did you really try it by changing the file extension to .txt? &quot;mx lm...&quot; is weird though."},{"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"score":0,"creation_date":1693513535,"post_id":77018594,"comment_id":135775088,"body_markdown":"Yes. I did. Pardon me, where does it say &quot;mx lm...&quot;?","body":"Yes. I did. Pardon me, where does it say &quot;mx lm...&quot;?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1693517398,"post_id":77018594,"comment_id":135775650,"body_markdown":"The hexadecimal codes 6D = thirteenth small letter = m, 78  = 24th letter = x. Hence my assumption that the file is plain text, faked to be opened by Excel.","body":"The hexadecimal codes 6D = thirteenth small letter = m, 78  = 24th letter = x. Hence my assumption that the file is plain text, faked to be opened by Excel."},{"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"score":0,"creation_date":1693524338,"post_id":77018594,"comment_id":135776431,"body_markdown":"I noticed that the mime type for this .xls file is listed as Export.xls: HTML document, ASCII text, with CRLF line terminators","body":"I noticed that the mime type for this .xls file is listed as Export.xls: HTML document, ASCII text, with CRLF line terminators"},{"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"score":0,"creation_date":1693524350,"post_id":77018594,"comment_id":135776432,"body_markdown":"I am wondering if this is the root cause of the issue.","body":"I am wondering if this is the root cause of the issue."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1693560577,"post_id":77018594,"comment_id":135780375,"body_markdown":"Still the root cause is that you are trying to open a file as OLE2 document while it is not. The filename is misleading, and the mime type is further indication something is wrong. But ultimately you need to check the content of the document.","body":"Still the root cause is that you are trying to open a file as OLE2 document while it is not. The filename is misleading, and the mime type is further indication something is wrong. But ultimately you need to check the content of the document."}],"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693508387,"creation_date":1693508387,"answer_id":77018594,"question_id":77018543,"body_markdown":"That seems plain text &quot;mx lm...&quot;.\r\n\r\nOften CSV text files are given an .xls extension so the browser  opens the file with Excel.\r\n\r\nRename the file as .txt and check the charset encoding, and read it with the correct charset. Maybe a CSV reader.","title":"Java - How to extract text from an XLS which has wrong format/extension issue?","body":"<p>That seems plain text &quot;mx lm...&quot;.</p>\n<p>Often CSV text files are given an .xls extension so the browser  opens the file with Excel.</p>\n<p>Rename the file as .txt and check the charset encoding, and read it with the correct charset. Maybe a CSV reader.</p>\n"},{"comments":[{"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"score":0,"creation_date":1693524364,"post_id":77019373,"comment_id":135776433,"body_markdown":"I noticed that the mime type for this .xls file is listed as Export.xls: HTML document, ASCII text, with CRLF line terminators","body":"I noticed that the mime type for this .xls file is listed as Export.xls: HTML document, ASCII text, with CRLF line terminators"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1693560730,"post_id":77019373,"comment_id":135780406,"body_markdown":"The mime type is a hint but also no guarantee. Check the content.","body":"The mime type is a hint but also no guarantee. Check the content."}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693517320,"creation_date":1693517320,"answer_id":77019373,"question_id":77018543,"body_markdown":"The file content is not in sync with the file name/extension.\r\n\r\nTo find out what the content really is, you could run `file Export.xls` in a Linux system (see [man file][1]). Do that with the file before and after opening/saving it in Excel.\r\n\r\n\r\n  [1]: https://www.man7.org/linux/man-pages/man1/file.1.html","title":"Java - How to extract text from an XLS which has wrong format/extension issue?","body":"<p>The file content is not in sync with the file name/extension.</p>\n<p>To find out what the content really is, you could run <code>file Export.xls</code> in a Linux system (see <a href=\"https://www.man7.org/linux/man-pages/man1/file.1.html\" rel=\"nofollow noreferrer\">man file</a>). Do that with the file before and after opening/saving it in Excel.</p>\n"}],"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693517320,"creation_date":1693507865,"question_id":77018543,"body_markdown":"I have an excel (`.xls`) file - `Export.xls`.\r\n\r\nWhen I manually try to open it, I get the following message:\r\n\r\n&quot;**`The file format and extension of &#39;Export.xls&#39; don&#39;t match. The file could be corrupted or unsafe. Unless you trust its source, don&#39;t open it. Do you want to open it anyway`**?&quot;\r\n\r\nIf I click on &#39;Yes&#39; and proceed, the file opens. Then, if I &#39;`Save As`&#39; `Excel 97-2003 Workbook (*.xls)`, the file is saved and the next time I open it I don&#39;t get the above error message.\r\n\r\nNow, my need is to do this via Java code. Because due to restrictions, I cannot fix it manually before I run the Java program.\r\n\r\n**My working code for a non-corrupted (regular) file below:**\r\n\r\n    import org.apache.poi.hssf.extractor.ExcelExtractor;\r\n    import org.apache.poi.hssf.usermodel.HSSFWorkbook;\r\n    \r\n        HSSFWorkbook hwb = new HSSFWorkbook(new FileInputStream(expFile));\r\n        String expFileText = new ExcelExtractor(expWorkBook).getText();\r\n        System.out.println(&quot;Export xls file text: &quot; + expFileText);\r\n\r\nThis works fine on a regular `xls` file. However, for the above file (if I haven&#39;t manually saved it with a different format), the Java program throws the below error:\r\n\r\n**`Invalid header signature; read 0x6D78206C6D74683C, expected 0xE11AB1A1E011CFD0 - Your file appears not to be a valid OLE2 document`**\r\n\r\nHow can I fix this?","title":"Java - How to extract text from an XLS which has wrong format/extension issue?","body":"<p>I have an excel (<code>.xls</code>) file - <code>Export.xls</code>.</p>\n<p>When I manually try to open it, I get the following message:</p>\n<p>&quot;<strong><code>The file format and extension of 'Export.xls' don't match. The file could be corrupted or unsafe. Unless you trust its source, don't open it. Do you want to open it anyway</code></strong>?&quot;</p>\n<p>If I click on 'Yes' and proceed, the file opens. Then, if I '<code>Save As</code>' <code>Excel 97-2003 Workbook (*.xls)</code>, the file is saved and the next time I open it I don't get the above error message.</p>\n<p>Now, my need is to do this via Java code. Because due to restrictions, I cannot fix it manually before I run the Java program.</p>\n<p><strong>My working code for a non-corrupted (regular) file below:</strong></p>\n<pre><code>import org.apache.poi.hssf.extractor.ExcelExtractor;\nimport org.apache.poi.hssf.usermodel.HSSFWorkbook;\n\n    HSSFWorkbook hwb = new HSSFWorkbook(new FileInputStream(expFile));\n    String expFileText = new ExcelExtractor(expWorkBook).getText();\n    System.out.println(&quot;Export xls file text: &quot; + expFileText);\n</code></pre>\n<p>This works fine on a regular <code>xls</code> file. However, for the above file (if I haven't manually saved it with a different format), the Java program throws the below error:</p>\n<p><strong><code>Invalid header signature; read 0x6D78206C6D74683C, expected 0xE11AB1A1E011CFD0 - Your file appears not to be a valid OLE2 document</code></strong></p>\n<p>How can I fix this?</p>\n"},{"tags":["java","debugging","intellij-idea","microservices","software-design"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1693528650,"post_id":77018419,"comment_id":135776742,"body_markdown":"Read the code. Make notes. Make a start on writing the &#39;system logic manual&#39; that does not now exist. Dicking around in a debugger is just trial and error.","body":"Read the code. Make notes. Make a start on writing the &#39;system logic manual&#39; that does not now exist. Dicking around in a debugger is just trial and error."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693516775,"creation_date":1693516775,"answer_id":77019334,"question_id":77018419,"body_markdown":"You have not yet mentioned why debugging would not work. Here are some things that you can do on top:\r\n\r\n- To better understand the code, start adding [JavaDoc comments][1].\r\n- Add [unit tests][2] to ensure some methods do what they are expected to do.\r\n- Add [logging][3] that you can use while developing and deactivate by configuraton in production environments.\r\n\r\nThis may mean you touch code that you are expected to only read, so your team can react annoyed.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/javadoc/javadoc.html#GUID-7A344353-3BBF-45C4-8B28-15025DDCC643\r\n  [2]: https://junit.org/\r\n  [3]: https://logging.apache.org/log4j/2.x/index.html","title":"How to deal with a project where debugging is not possible?","body":"<p>You have not yet mentioned why debugging would not work. Here are some things that you can do on top:</p>\n<ul>\n<li>To better understand the code, start adding <a href=\"https://docs.oracle.com/en/java/javase/20/javadoc/javadoc.html#GUID-7A344353-3BBF-45C4-8B28-15025DDCC643\" rel=\"nofollow noreferrer\">JavaDoc comments</a>.</li>\n<li>Add <a href=\"https://junit.org/\" rel=\"nofollow noreferrer\">unit tests</a> to ensure some methods do what they are expected to do.</li>\n<li>Add <a href=\"https://logging.apache.org/log4j/2.x/index.html\" rel=\"nofollow noreferrer\">logging</a> that you can use while developing and deactivate by configuraton in production environments.</li>\n</ul>\n<p>This may mean you touch code that you are expected to only read, so your team can react annoyed.</p>\n"}],"owner":{"account_id":8148408,"reputation":155,"user_id":6136336,"accept_rate":43,"display_name":"ra_pri"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693516775,"creation_date":1693506541,"question_id":77018419,"body_markdown":"I have joined a new project recently and realized the debugging is impossible or not enabled. It&#39;s very difficult for me to work since the whole code has weird(finance) terminology, so reading the code is also very difficult.\r\n\r\nBut everyone on the team has spent almost a decade on the project and I am new so facing the problem of understanding the code. I don&#39;t understand how people keep on saying &quot;Read the code&quot;. \r\n\r\nI believed that reading the code is &quot;sin&quot; and the only way through is either debugging or playing around the changes.\r\n\r\nI want to know the experienced people&#39;s perspective on how to work on such a project as a developer. Any suggestion to go forward?","title":"How to deal with a project where debugging is not possible?","body":"<p>I have joined a new project recently and realized the debugging is impossible or not enabled. It's very difficult for me to work since the whole code has weird(finance) terminology, so reading the code is also very difficult.</p>\n<p>But everyone on the team has spent almost a decade on the project and I am new so facing the problem of understanding the code. I don't understand how people keep on saying &quot;Read the code&quot;.</p>\n<p>I believed that reading the code is &quot;sin&quot; and the only way through is either debugging or playing around the changes.</p>\n<p>I want to know the experienced people's perspective on how to work on such a project as a developer. Any suggestion to go forward?</p>\n"},{"tags":["java","android","unit-testing","mockito","powermockito"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1693502179,"post_id":77017777,"comment_id":135773068,"body_markdown":"Did you read the limitation? &quot;You are seeing this disclaimer because Mockito is configured to create inlined mocks. You can learn about inline mocks and their limitations under item #39 of the Mockito class javadoc.&quot;? Is it unclear?","body":"Did you read the limitation? &quot;You are seeing this disclaimer because Mockito is configured to create inlined mocks. You can learn about inline mocks and their limitations under item #39 of the Mockito class javadoc.&quot;? Is it unclear?"},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1693513681,"post_id":77017777,"comment_id":135775108,"body_markdown":"Try looking at [Complete guide of creating mocks with mockito](https://davidvlijmincx.com/posts/complete_guide_of_creating_mocks_with_mockito/).","body":"Try looking at <a href=\"https://davidvlijmincx.com/posts/complete_guide_of_creating_mocks_with_mockito/\" rel=\"nofollow noreferrer\">Complete guide of creating mocks with mockito</a>."}],"answers":[{"comments":[{"owner":{"account_id":22712146,"reputation":19,"user_id":16877951,"display_name":"xxrapunzelxx"},"score":0,"creation_date":1693926686,"post_id":77019307,"comment_id":135822399,"body_markdown":"Thanks, I tried it but it has the same error.","body":"Thanks, I tried it but it has the same error."}],"tags":[],"owner":{"account_id":378053,"reputation":4160,"user_id":730549,"accept_rate":68,"display_name":"Maulzey"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693516375,"creation_date":1693516375,"answer_id":77019307,"question_id":77017777,"body_markdown":"In your unit test, you can then create a mock or a fake implementation of the MainActivity and pass it to SomeClass. This way, you&#39;re testing the logic in SomeClass without worrying about the complexities of MainActivity. \r\n\r\n    @Test \r\n    fun testSomeClass() { \r\n    val mockMainActivity = mock(MainActivity::class.java) \r\n    val someClass = SomeClass(mockMainActivity) // Test the behavior of SomeClass }","title":"How to mock MainActivity using Mockito or another mocking framework?","body":"<p>In your unit test, you can then create a mock or a fake implementation of the MainActivity and pass it to SomeClass. This way, you're testing the logic in SomeClass without worrying about the complexities of MainActivity.</p>\n<pre><code>@Test \nfun testSomeClass() { \nval mockMainActivity = mock(MainActivity::class.java) \nval someClass = SomeClass(mockMainActivity) // Test the behavior of SomeClass }\n</code></pre>\n"}],"owner":{"account_id":22712146,"reputation":19,"user_id":16877951,"display_name":"xxrapunzelxx"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693516375,"creation_date":1693500015,"question_id":77017777,"body_markdown":"I need to mock MainActivity as it is a parameter of an unit test I have. I tried `private val mockMainActivity: MainActivity = mock()`. However I get:\r\n\r\n&gt; Mockito cannot mock this class: class\r\n&gt; se.username.mmi.onboard.activities.MainActivity.\r\n&gt; \r\n&gt; \r\n&gt; \r\n&gt; Java               : 11 JVM vendor name    : JetBrains s.r.o. JVM\r\n&gt; vendor version : 11.0.15+0-b2043.56-8887301 JVM name           :\r\n&gt; OpenJDK 64-Bit Server VM JVM version        :\r\n&gt; 11.0.15+0-b2043.56-8887301 JVM info           : mixed mode OS name            : Linux OS version         : 6.2.0-31-generic\r\n&gt; \r\n&gt;  \r\n&gt; \r\n&gt;  \r\n&gt; \r\n&gt; You are seeing this disclaimer because Mockito is configured to create\r\n&gt; inlined mocks. You can learn about inline mocks and their limitations\r\n&gt; under item #39 of the Mockito class javadoc.\r\n&gt; \r\n&gt;  \r\n&gt; \r\n&gt; Underlying exception : java.lang.IllegalArgumentException: Could not\r\n&gt; create type org.mockito.exceptions.base.MockitoException:  Mockito\r\n&gt; cannot mock this class: class\r\n&gt; se.username.mmi.onboard.activities.MainActivity.\r\n&gt; \r\n&gt;  \r\n&gt; \r\n&gt; If you&#39;re not sure why you&#39;re getting this error, please open an issue\r\n&gt; on GitHub.\r\n\r\nHow can I mock MainActivity then?","title":"How to mock MainActivity using Mockito or another mocking framework?","body":"<p>I need to mock MainActivity as it is a parameter of an unit test I have. I tried <code>private val mockMainActivity: MainActivity = mock()</code>. However I get:</p>\n<blockquote>\n<p>Mockito cannot mock this class: class\nse.username.mmi.onboard.activities.MainActivity.</p>\n<p>Java               : 11 JVM vendor name    : JetBrains s.r.o. JVM\nvendor version : 11.0.15+0-b2043.56-8887301 JVM name           :\nOpenJDK 64-Bit Server VM JVM version        :\n11.0.15+0-b2043.56-8887301 JVM info           : mixed mode OS name            : Linux OS version         : 6.2.0-31-generic</p>\n<p>You are seeing this disclaimer because Mockito is configured to create\ninlined mocks. You can learn about inline mocks and their limitations\nunder item #39 of the Mockito class javadoc.</p>\n<p>Underlying exception : java.lang.IllegalArgumentException: Could not\ncreate type org.mockito.exceptions.base.MockitoException:  Mockito\ncannot mock this class: class\nse.username.mmi.onboard.activities.MainActivity.</p>\n<p>If you're not sure why you're getting this error, please open an issue\non GitHub.</p>\n</blockquote>\n<p>How can I mock MainActivity then?</p>\n"},{"tags":["java","arrays","type-conversion"],"answers":[{"comments":[{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":5,"creation_date":1301660071,"post_id":5513167,"comment_id":6259933,"body_markdown":"Using the platform&#39;s default charset is wrong most of the time (web apps).","body":"Using the platform&#39;s default charset is wrong most of the time (web apps)."},{"owner":{"account_id":3765239,"reputation":11306,"user_id":3128926,"accept_rate":76,"display_name":"Levent Divilioglu"},"score":5,"creation_date":1527683163,"post_id":5513167,"comment_id":88218575,"body_markdown":"This is a trivial solution, because of using a new String, the space needed for the operation is doubled. It won&#39;t work very well for extremely large inputs.","body":"This is a trivial solution, because of using a new String, the space needed for the operation is doubled. It won&#39;t work very well for extremely large inputs."},{"owner":{"account_id":195423,"reputation":317,"user_id":438293,"display_name":"NBJack"},"score":1,"creation_date":1618870100,"post_id":5513167,"comment_id":118729187,"body_markdown":"Note this is not ideal if security is an issue due to how Java caches strings.","body":"Note this is not ideal if security is an issue due to how Java caches strings."},{"owner":{"account_id":4093298,"reputation":4962,"user_id":3360759,"display_name":"frhack"},"score":0,"creation_date":1666855516,"post_id":5513167,"comment_id":131035116,"body_markdown":"this is unsafe if char array is used to avoid string. (refer to String vs char[] in java for passwrd)","body":"this is unsafe if char array is used to avoid string. (refer to String vs char[] in java for passwrd)"}],"tags":[],"owner":{"account_id":262720,"reputation":10054,"user_id":547779,"accept_rate":83,"display_name":"Tarlog"},"comment_count":4,"down_vote_count":2,"up_vote_count":88,"is_accepted":true,"score":86,"last_activity_date":1670339165,"creation_date":1301659837,"answer_id":5513167,"question_id":5513144,"body_markdown":"    char[] ch = ?\r\n    new String(ch).getBytes();\r\n\r\nOr, to get non-default charset:\r\n\r\n    new String(ch).getBytes(&quot;UTF-8&quot;);\r\n\r\n**Update:** Since Java 7:\r\n\r\n    new String(ch).getBytes(StandardCharsets.UTF_8);\r\n","title":"Converting char[] to byte[]","body":"<pre><code>char[] ch = ?\nnew String(ch).getBytes();\n</code></pre>\n<p>Or, to get non-default charset:</p>\n<pre><code>new String(ch).getBytes(&quot;UTF-8&quot;);\n</code></pre>\n<p><strong>Update:</strong> Since Java 7:</p>\n<pre><code>new String(ch).getBytes(StandardCharsets.UTF_8);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":187702,"reputation":5902,"user_id":425962,"accept_rate":73,"display_name":"Andi Jay"},"score":0,"creation_date":1341258063,"post_id":9670279,"comment_id":14867526,"body_markdown":"Wouldn&#39;t this create a ByteBuffer? I guess that&#39;s less costly than a String object?","body":"Wouldn&#39;t this create a ByteBuffer? I guess that&#39;s less costly than a String object?"},{"owner":{"account_id":1727801,"reputation":3678,"user_id":1582089,"display_name":"Cassian"},"score":0,"creation_date":1495035735,"post_id":9670279,"comment_id":75085201,"body_markdown":"@Andrii Nemchenko Yes you get a trailing 0 in last position if you use UTF-8 (originally I was using US-ASCII). I have refactored the code, now it works correctly with UTF-8 to. Thanks for notice!","body":"@Andrii Nemchenko Yes you get a trailing 0 in last position if you use UTF-8 (originally I was using US-ASCII). I have refactored the code, now it works correctly with UTF-8 to. Thanks for notice!"},{"owner":{"account_id":3358051,"reputation":4973,"user_id":2820534,"accept_rate":82,"display_name":"Prabs"},"score":0,"creation_date":1534746192,"post_id":9670279,"comment_id":90799475,"body_markdown":"@AndriiNemchenko Here 1 char takes 1 byte. Can I make it a half byte. I remember reading that 1 char occupies 4 bits.","body":"@AndriiNemchenko Here 1 char takes 1 byte. Can I make it a half byte. I remember reading that 1 char occupies 4 bits."},{"owner":{"account_id":3699650,"reputation":228,"user_id":3079849,"display_name":"Guangliang"},"score":1,"creation_date":1540934581,"post_id":9670279,"comment_id":93044559,"body_markdown":"This &#39;toBytes()&#39; method has an important side effect.  It wipes the input chars. charBuffer.array() actually is the input chars.  Arrays.fill() would actually wipe out the input.  In many cases it is OK, but sometime it creates undesired effect.","body":"This &#39;toBytes()&#39; method has an important side effect.  It wipes the input chars. charBuffer.array() actually is the input chars.  Arrays.fill() would actually wipe out the input.  In many cases it is OK, but sometime it creates undesired effect."}],"tags":[],"owner":{"account_id":145589,"reputation":8293,"user_id":355491,"display_name":"multitask landscape"},"comment_count":4,"down_vote_count":0,"up_vote_count":186,"is_accepted":false,"score":186,"last_activity_date":1693516144,"creation_date":1331567372,"answer_id":9670279,"question_id":5513144,"body_markdown":"Convert without creating `String` object:\r\n\r\n    import java.nio.CharBuffer;\r\n    import java.nio.ByteBuffer;\r\n    import java.util.Arrays;\r\n    \r\n    byte[] toBytes(char[] chars) {\r\n      CharBuffer charBuffer = CharBuffer.wrap(chars);\r\n      ByteBuffer byteBuffer = Charset.forName(&quot;UTF-8&quot;).encode(charBuffer);\r\n      byte[] bytes = Arrays.copyOfRange(byteBuffer.array(),\r\n                byteBuffer.position(), byteBuffer.limit());\r\n      Arrays.fill(byteBuffer.array(), (byte) 0); // clear sensitive data\r\n      return bytes;\r\n    }\r\n\r\nUsage:\r\n\r\n    char[] chars = {&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;};\r\n    byte[] bytes = toBytes(chars);\r\n    /* do something with chars/bytes */\r\n    Arrays.fill(chars, &#39;\\u0000&#39;); // clear sensitive data\r\n    Arrays.fill(bytes, (byte) 0); // clear sensitive data\r\n\r\nSolution is inspired from Swing recommendation to store passwords in char[]. (See [Why is char[] preferred over String for passwords?][1])\r\n\r\nRemember not to write sensitive data to logs and ensure that JVM won&#39;t hold any references to it.\r\n\r\nThis method is needed only for security concerns. If data is not sensitive it better to use `String.getBytes` instead.\r\n\r\n---\r\nHere is pseudo-code (actually, Scala code) how to do the same thing manually for **UTF-8**:\r\n\r\n    val xs: Array[Char] = &quot;A &#223; € 嗨 &#119070; &#128578;&quot;.toArray\r\n    val len = xs.length\r\n    val ys: Array[Byte] = new Array(3 * len) // worst case\r\n    var i = 0; var j = 0 // i for chars; j for bytes\r\n    while (i &lt; len) { // fill ys with bytes\r\n      val c = xs(i)\r\n      if (c &lt; 0x80) {\r\n        ys(j) = c.toByte\r\n        i = i + 1\r\n        j = j + 1\r\n      } else if (c &lt; 0x800) {\r\n        ys(j) = (0xc0 | (c &gt;&gt; 6)).toByte\r\n        ys(j + 1) = (0x80 | (c &amp; 0x3f)).toByte\r\n        i = i + 1\r\n        j = j + 2\r\n      } else if (Character.isHighSurrogate(c)) {\r\n        if (len - i &lt; 2) throw new Exception(&quot;overflow&quot;)\r\n        val d = xs(i + 1)\r\n        val uc: Int = \r\n          if (Character.isLowSurrogate(d)) {\r\n            Character.toCodePoint(c, d)\r\n          } else {\r\n            throw new Exception(&quot;malformed&quot;)\r\n          }\r\n        ys(j) = (0xf0 | ((uc &gt;&gt; 18))).toByte\r\n        ys(j + 1) = (0x80 | ((uc &gt;&gt; 12) &amp; 0x3f)).toByte\r\n        ys(j + 2) = (0x80 | ((uc &gt;&gt;  6) &amp; 0x3f)).toByte\r\n        ys(j + 3) = (0x80 | (uc &amp; 0x3f)).toByte\r\n        i = i + 2 // 2 chars\r\n        j = j + 4\r\n      } else if (Character.isLowSurrogate(c)) {\r\n        throw new Exception(&quot;malformed&quot;)\r\n      } else {\r\n        ys(j) = (0xe0 | (c &gt;&gt; 12)).toByte\r\n        ys(j + 1) = (0x80 | ((c &gt;&gt; 6) &amp; 0x3f)).toByte\r\n        ys(j + 2) = (0x80 | (c &amp; 0x3f)).toByte\r\n        i = i + 1\r\n        j = j + 3\r\n      }\r\n    }\r\n    // check\r\n    println(new String(ys, 0, j, &quot;UTF-8&quot;))\r\n\r\nThis code looks similar to what is in JDK[[2]] and Protobuf[[3]].\r\n\r\n  [1]: https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords\r\n  [2]: https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.base/share/classes/sun/nio/cs/UTF_8.java#L455\r\n  [3]: https://github.com/protocolbuffers/protobuf/blob/master/java/core/src/main/java/com/google/protobuf/Utf8.java#L1038","title":"Converting char[] to byte[]","body":"<p>Convert without creating <code>String</code> object:</p>\n<pre><code>import java.nio.CharBuffer;\nimport java.nio.ByteBuffer;\nimport java.util.Arrays;\n\nbyte[] toBytes(char[] chars) {\n  CharBuffer charBuffer = CharBuffer.wrap(chars);\n  ByteBuffer byteBuffer = Charset.forName(&quot;UTF-8&quot;).encode(charBuffer);\n  byte[] bytes = Arrays.copyOfRange(byteBuffer.array(),\n            byteBuffer.position(), byteBuffer.limit());\n  Arrays.fill(byteBuffer.array(), (byte) 0); // clear sensitive data\n  return bytes;\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>char[] chars = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9'};\nbyte[] bytes = toBytes(chars);\n/* do something with chars/bytes */\nArrays.fill(chars, '\\u0000'); // clear sensitive data\nArrays.fill(bytes, (byte) 0); // clear sensitive data\n</code></pre>\n<p>Solution is inspired from Swing recommendation to store passwords in char[]. (See <a href=\"https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords\">Why is char[] preferred over String for passwords?</a>)</p>\n<p>Remember not to write sensitive data to logs and ensure that JVM won't hold any references to it.</p>\n<p>This method is needed only for security concerns. If data is not sensitive it better to use <code>String.getBytes</code> instead.</p>\n<hr />\n<p>Here is pseudo-code (actually, Scala code) how to do the same thing manually for <strong>UTF-8</strong>:</p>\n<pre><code>val xs: Array[Char] = &quot;A ß € 嗨 𝄞 🙂&quot;.toArray\nval len = xs.length\nval ys: Array[Byte] = new Array(3 * len) // worst case\nvar i = 0; var j = 0 // i for chars; j for bytes\nwhile (i &lt; len) { // fill ys with bytes\n  val c = xs(i)\n  if (c &lt; 0x80) {\n    ys(j) = c.toByte\n    i = i + 1\n    j = j + 1\n  } else if (c &lt; 0x800) {\n    ys(j) = (0xc0 | (c &gt;&gt; 6)).toByte\n    ys(j + 1) = (0x80 | (c &amp; 0x3f)).toByte\n    i = i + 1\n    j = j + 2\n  } else if (Character.isHighSurrogate(c)) {\n    if (len - i &lt; 2) throw new Exception(&quot;overflow&quot;)\n    val d = xs(i + 1)\n    val uc: Int = \n      if (Character.isLowSurrogate(d)) {\n        Character.toCodePoint(c, d)\n      } else {\n        throw new Exception(&quot;malformed&quot;)\n      }\n    ys(j) = (0xf0 | ((uc &gt;&gt; 18))).toByte\n    ys(j + 1) = (0x80 | ((uc &gt;&gt; 12) &amp; 0x3f)).toByte\n    ys(j + 2) = (0x80 | ((uc &gt;&gt;  6) &amp; 0x3f)).toByte\n    ys(j + 3) = (0x80 | (uc &amp; 0x3f)).toByte\n    i = i + 2 // 2 chars\n    j = j + 4\n  } else if (Character.isLowSurrogate(c)) {\n    throw new Exception(&quot;malformed&quot;)\n  } else {\n    ys(j) = (0xe0 | (c &gt;&gt; 12)).toByte\n    ys(j + 1) = (0x80 | ((c &gt;&gt; 6) &amp; 0x3f)).toByte\n    ys(j + 2) = (0x80 | (c &amp; 0x3f)).toByte\n    i = i + 1\n    j = j + 3\n  }\n}\n// check\nprintln(new String(ys, 0, j, &quot;UTF-8&quot;))\n</code></pre>\n<p>This code looks similar to what is in JDK[<a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.base/share/classes/sun/nio/cs/UTF_8.java#L455\" rel=\"nofollow noreferrer\">2</a>] and Protobuf[<a href=\"https://github.com/protocolbuffers/protobuf/blob/master/java/core/src/main/java/com/google/protobuf/Utf8.java#L1038\" rel=\"nofollow noreferrer\">3</a>].</p>\n"},{"comments":[{"owner":{"display_name":"user968363"},"score":0,"creation_date":1390711597,"post_id":20604909,"comment_id":32207213,"body_markdown":"Could the trailing \\0 be implementation specific? I&#39;m using 1.7_51 with netbeans 7.4 and not noticing any trailing \\0.","body":"Could the trailing \\0 be implementation specific? I&#39;m using 1.7_51 with netbeans 7.4 and not noticing any trailing \\0."},{"owner":{"account_id":3232589,"reputation":5274,"user_id":2727476,"display_name":"djsutho"},"score":0,"creation_date":1390898162,"post_id":20604909,"comment_id":32280116,"body_markdown":"@orthopteroid yes this example could be jvm specific. This was run with oracle 1.7.0_45 linux 64 bit (from memory). With the following implementation (http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/java/nio/charset/CharsetEncoder.java?av=f#773) you will get errors if  `averageBytesPerChar()` returns anything other than 1 (I get 1.1). Out of interest what OS/arch are you using as I double checked with oracle 1.7.0_51 and openjdk 1.7.0_51 and found it broken with 10 chars.","body":"@orthopteroid yes this example could be jvm specific. This was run with oracle 1.7.0_45 linux 64 bit (from memory). With the following implementation (<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7u40-b43/java/nio/charset/CharsetEncoder.java?av=f#773\" rel=\"nofollow noreferrer\">grepcode.com/file/repository.grepcode.com/java/root/jdk/ope&zwnj;&#8203;njdk/&hellip;</a>) you will get errors if  <code>averageBytesPerChar()</code> returns anything other than 1 (I get 1.1). Out of interest what OS/arch are you using as I double checked with oracle 1.7.0_51 and openjdk 1.7.0_51 and found it broken with 10 chars."},{"owner":{"account_id":3232589,"reputation":5274,"user_id":2727476,"display_name":"djsutho"},"score":0,"creation_date":1390982359,"post_id":20604909,"comment_id":32323151,"body_markdown":"@Andrey no worries. Note that `buffer.array()` in the `toBytes` function still needs to be overridden, currently only the copy is.","body":"@Andrey no worries. Note that <code>buffer.array()</code> in the <code>toBytes</code> function still needs to be overridden, currently only the copy is."},{"owner":{"account_id":3232589,"reputation":5274,"user_id":2727476,"display_name":"djsutho"},"score":0,"creation_date":1391073695,"post_id":20604909,"comment_id":32371648,"body_markdown":"@Andrey I have edited my answer to reflect the changes.","body":"@Andrey I have edited my answer to reflect the changes."},{"owner":{"display_name":"user968363"},"score":0,"creation_date":1391153091,"post_id":20604909,"comment_id":32410979,"body_markdown":"@djsutho Today, my platform is windows7x64. Sorry, can&#39;t show the code - I&#39;m using code like &quot;System.arraycopy( str.getBytes( &quot;UTF-8&quot; ), 0, stor, 0, used );&quot; now.","body":"@djsutho Today, my platform is windows7x64. Sorry, can&#39;t show the code - I&#39;m using code like &quot;System.arraycopy( str.getBytes( &quot;UTF-8&quot; ), 0, stor, 0, used );&quot; now."},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":0,"creation_date":1523591691,"post_id":20604909,"comment_id":86632901,"body_markdown":"I guess this also assumes that arrayOffset() is 0. I do wonder whether it&#39;s okay to do so... our own code is doing the same, and I thought I&#39;d roam around looking for a cleaner alternative.","body":"I guess this also assumes that arrayOffset() is 0. I do wonder whether it&#39;s okay to do so... our own code is doing the same, and I thought I&#39;d roam around looking for a cleaner alternative."}],"tags":[],"owner":{"account_id":3232589,"reputation":5274,"user_id":2727476,"display_name":"djsutho"},"comment_count":6,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1391073545,"creation_date":1387176123,"answer_id":20604909,"question_id":5513144,"body_markdown":"## Edit: Andrey&#39;s answer has been updated so the following no longer applies. ##\n\nAndrey&#39;s answer (the highest voted at the time of writing) is slightly\nincorrect. I would have added this as comment but I am not\nreputable enough.\n\nIn Andrey&#39;s answer:\n\n    char[] chars = {&#39;c&#39;, &#39;h&#39;, &#39;a&#39;, &#39;r&#39;, &#39;s&#39;}\n    byte[] bytes = Charset.forName(&quot;UTF-8&quot;).encode(CharBuffer.wrap(chars)).array();\n\nthe call to array() may not return the desired value, for example:\n\n    char[] c = &quot;aaaaaaaaaa&quot;.toCharArray();\n    System.out.println(Arrays.toString(Charset.forName(&quot;UTF-8&quot;).encode(CharBuffer.wrap(c)).array()));\n\noutput:\n\n    [97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 0]\n\nAs can be seen a zero byte has been added. To avoid this use the following:\n\n    char[] c = &quot;aaaaaaaaaa&quot;.toCharArray();\n    ByteBuffer bb = Charset.forName(&quot;UTF-8&quot;).encode(CharBuffer.wrap(c));\n    byte[] b = new byte[bb.remaining()];\n    bb.get(b);\n    System.out.println(Arrays.toString(b));\n\noutput:\n\n    [97, 97, 97, 97, 97, 97, 97, 97, 97, 97]\n\nAs the answer also alluded to using passwords it might be worth\nblanking out the array that backs the ByteBuffer (accessed via the\narray() function):\n\n    ByteBuffer bb = Charset.forName(&quot;UTF-8&quot;).encode(CharBuffer.wrap(c));\n    byte[] b = new byte[bb.remaining()];\n    bb.get(b);\n    blankOutByteArray(bb.array());\n    System.out.println(Arrays.toString(b));","title":"Converting char[] to byte[]","body":"<h2>Edit: Andrey's answer has been updated so the following no longer applies.</h2>\n<p>Andrey's answer (the highest voted at the time of writing) is slightly\nincorrect. I would have added this as comment but I am not\nreputable enough.</p>\n<p>In Andrey's answer:</p>\n<pre><code>char[] chars = {'c', 'h', 'a', 'r', 's'}\nbyte[] bytes = Charset.forName(&quot;UTF-8&quot;).encode(CharBuffer.wrap(chars)).array();\n</code></pre>\n<p>the call to array() may not return the desired value, for example:</p>\n<pre><code>char[] c = &quot;aaaaaaaaaa&quot;.toCharArray();\nSystem.out.println(Arrays.toString(Charset.forName(&quot;UTF-8&quot;).encode(CharBuffer.wrap(c)).array()));\n</code></pre>\n<p>output:</p>\n<pre><code>[97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 0]\n</code></pre>\n<p>As can be seen a zero byte has been added. To avoid this use the following:</p>\n<pre><code>char[] c = &quot;aaaaaaaaaa&quot;.toCharArray();\nByteBuffer bb = Charset.forName(&quot;UTF-8&quot;).encode(CharBuffer.wrap(c));\nbyte[] b = new byte[bb.remaining()];\nbb.get(b);\nSystem.out.println(Arrays.toString(b));\n</code></pre>\n<p>output:</p>\n<pre><code>[97, 97, 97, 97, 97, 97, 97, 97, 97, 97]\n</code></pre>\n<p>As the answer also alluded to using passwords it might be worth\nblanking out the array that backs the ByteBuffer (accessed via the\narray() function):</p>\n<pre><code>ByteBuffer bb = Charset.forName(&quot;UTF-8&quot;).encode(CharBuffer.wrap(c));\nbyte[] b = new byte[bb.remaining()];\nbb.get(b);\nblankOutByteArray(bb.array());\nSystem.out.println(Arrays.toString(b));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":141939,"reputation":484,"user_id":349315,"accept_rate":33,"display_name":"Ilane"},"score":8,"creation_date":1414522040,"post_id":26028759,"comment_id":41843581,"body_markdown":"This answer is incorrect because char data is Unicode and as such there may be up to 4 bytes per character (more are possible, but in real life, I&#39;ve only found up to 4).  Simply taking one byte from each character will only work for a very limited character set.  Please read &#39;The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)&#39; at http://www.joelonsoftware.com/articles/Unicode.html.","body":"This answer is incorrect because char data is Unicode and as such there may be up to 4 bytes per character (more are possible, but in real life, I&#39;ve only found up to 4).  Simply taking one byte from each character will only work for a very limited character set.  Please read &#39;The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)&#39; at <a href=\"http://www.joelonsoftware.com/articles/Unicode.html\" rel=\"nofollow noreferrer\">joelonsoftware.com/articles/Unicode.html</a>."}],"tags":[],"owner":{"account_id":3934345,"reputation":552,"user_id":3251360,"accept_rate":80,"display_name":"Java Is Cool"},"comment_count":1,"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1411606014,"creation_date":1411606014,"answer_id":26028759,"question_id":5513144,"body_markdown":"You could make a method:\r\n\r\n    public byte[] toBytes(char[] data) {\r\n    byte[] toRet = new byte[data.length];\r\n    for(int i = 0; i &lt; toRet.length; i++) {\r\n    toRet[i] = (byte) data[i];\r\n    }\r\n    return toRet;\r\n    }\r\n\r\nHope this helps","title":"Converting char[] to byte[]","body":"<p>You could make a method:</p>\n\n<pre><code>public byte[] toBytes(char[] data) {\nbyte[] toRet = new byte[data.length];\nfor(int i = 0; i &lt; toRet.length; i++) {\ntoRet[i] = (byte) data[i];\n}\nreturn toRet;\n}\n</code></pre>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":3364879,"reputation":409,"user_id":2825770,"display_name":"Matt"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523853945,"creation_date":1523853945,"answer_id":49849791,"question_id":5513144,"body_markdown":"\r\n\r\n    private static byte[] charArrayToByteArray(char[] c_array) {\r\n            byte[] b_array = new byte[c_array.length];\r\n            for(int i= 0; i &lt; c_array.length; i++) {\r\n                b_array[i] = (byte)(0xFF &amp; (int)c_array[i]);\r\n            }\r\n            return b_array;\r\n    }","title":"Converting char[] to byte[]","body":"<pre><code>private static byte[] charArrayToByteArray(char[] c_array) {\n        byte[] b_array = new byte[c_array.length];\n        for(int i= 0; i &lt; c_array.length; i++) {\n            b_array[i] = (byte)(0xFF &amp; (int)c_array[i]);\n        }\n        return b_array;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8081606,"reputation":178,"user_id":6090603,"display_name":"henry700"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623698358,"creation_date":1623695799,"answer_id":67975528,"question_id":5513144,"body_markdown":"If you just want to convert the data container (the array) type itself, only regarding the data size and being agnostic to any encoding:\r\n\r\n```java\r\n// original byte[]\r\nbyte[] pattern = null;\r\nchar[] arr = new char[pattern.length * 2];\r\nByteBuffer wrapper = ByteBuffer.wrap(pattern);\r\nwrapper.position(0);\r\nint i = 0;\r\nwhile(wrapper.hasRemaining()) {\r\n    char character = wrapper.remaining() &lt; 2 ? ((char) (((int) wrapper.get()) &lt;&lt; 8)) : wrapper.getChar();\r\n    arr[i++] = character;\r\n}\r\n```","title":"Converting char[] to byte[]","body":"<p>If you just want to convert the data container (the array) type itself, only regarding the data size and being agnostic to any encoding:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// original byte[]\nbyte[] pattern = null;\nchar[] arr = new char[pattern.length * 2];\nByteBuffer wrapper = ByteBuffer.wrap(pattern);\nwrapper.position(0);\nint i = 0;\nwhile(wrapper.hasRemaining()) {\n    char character = wrapper.remaining() &lt; 2 ? ((char) (((int) wrapper.get()) &lt;&lt; 8)) : wrapper.getChar();\n    arr[i++] = character;\n}\n</code></pre>\n"}],"owner":{"account_id":201517,"reputation":4011,"user_id":448005,"accept_rate":73,"display_name":"Arun Abraham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167681,"favorite_count":0,"down_vote_count":1,"up_vote_count":101,"accepted_answer_id":5513167,"answer_count":6,"score":100,"last_activity_date":1693516144,"creation_date":1301659710,"question_id":5513144,"body_markdown":"I would like to convert a character array to a byte array in Java.  What methods exists for making this conversion?","title":"Converting char[] to byte[]","body":"<p>I would like to convert a character array to a byte array in Java.  What methods exists for making this conversion?</p>\n"},{"tags":["java","mocking"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":4,"creation_date":1693517505,"post_id":77019193,"comment_id":135775663,"body_markdown":"We do like specifics, because without specifics it is impossible to answer questions! If you have a problem with syntax, you need to show the actual code and the actual error. Otherwise it isn&#39;t possible to help.","body":"We do like specifics, because without specifics it is impossible to answer questions! If you have a problem with syntax, you need to show the actual code and the actual error. Otherwise it isn&#39;t possible to help."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693593919,"post_id":77019193,"comment_id":135786539,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":8063776,"reputation":1,"user_id":6078591,"display_name":"CaptainPaul"},"score":0,"creation_date":1693752828,"post_id":77019193,"comment_id":135799115,"body_markdown":"I am trying to set up the code so I can post it.  Its taking a while","body":"I am trying to set up the code so I can post it.  Its taking a while"}],"owner":{"account_id":8063776,"reputation":1,"user_id":6078591,"display_name":"CaptainPaul"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693514951,"creation_date":1693514951,"question_id":77019193,"body_markdown":"Way too much code to post here so let me try to be more specific.\r\n\r\nI&#39;m charged with writing unit tests on a lot of older code.  I ran into a method that needs testing, but it calls a second method in another class, which calls other method in its Class.\r\n\r\nClassA.method is to be tested. It sets 3 attributes,2 strings and a List. then it calls classB.method with those 3 attributes. \r\n\r\n\r\nso its like this:\r\n\r\n```\r\n    ClassA.method(string, string, List)\r\n       get value of local_tag\r\n       get Action from list\r\n\r\n       Switch (Action)\r\n           Case Action-1\r\n              Call ClassB.method( str, str, LIST)\r\n              If(local_tag = string set from list )  //  not actuall that straight forward..    \r\n                   set responseString to &quot;xyz&quot;\r\n              break\r\n           Case Action-2\r\n```\r\n              etc.\r\n         \r\nMy question is, how do you mock a method with a List?   \r\n       \r\nI don&#39;t have access to Mockito, but do have EasyMock and PowerMock.  (still not clear on the differences)  \r\n\r\nSeems like most of the answers I&#39;ve seen here rely on Mockito.  I&#39;ve also noticed that most of the answers are 8,9, 10 or more years old, so I wonder it they are still accurate.  \r\n\r\nI&#39;ve tried all sorts of syntax to make this work, searched every where, here included. but nothing that seems to address this scenario. (mocking a different class method WITH a List attribute inside the method being tested.\r\n\r\nI just want to know if i&#39;m wasting my timne.\r\n\r\nSorry to be so general.  I know you guys like specifics.  I&#39;ll add that I&#39;m new to Java and Mocking.  This is how I&#39;m getting &quot;broken in&quot;.  I&#39;m just wondering if this is like the Old logger prank where then tell the new guy to go get the chain stretcher.\r\n\r\n```\r\n    ClassB myClassB =PowerMock.createMock(ClassB.class);\r\n    expect(classB.method( strA, strB, List)).andReturn();\r\n    verifyAll();\r\n    replayAll();\r\n\r\n    or\r\n\r\n    ClassB myClassB = PowerMock.createMock(ClassB.class);\r\n    expect(classB.method(EasyMock.isA(classxyz.class)EasyMock.isA(classabc.class),\r\n            EasyMock.isA(List.class))).andReturn();\r\n    replayAll();\r\n\r\n    or\r\n\r\n    ClassB myClassB =PowerMock.createMock(ClassB.class);\r\n    expect(classB.method(EasyMock.&lt;classA&gt;anyObject(),EasyMock.&lt;List&lt;classB&gt;&gt;anyObject(),\r\n         EasyMock.&lt;classC&gt;.anyObject())).andReturn();\r\n    replayAll();\r\n\r\n```\r\nI get all sorts of errors depending on what I try of course. One i get quite frequently is\r\n     Required type Void, provided void.\r\nI have no idea what that means, I interpret it to mean, you got the wrong syntax.\r\n","title":"General Java unit test question. I have to mock a method (with a List parameter) inside the method I&#39;m testing, Issue is with syntax","body":"<p>Way too much code to post here so let me try to be more specific.</p>\n<p>I'm charged with writing unit tests on a lot of older code.  I ran into a method that needs testing, but it calls a second method in another class, which calls other method in its Class.</p>\n<p>ClassA.method is to be tested. It sets 3 attributes,2 strings and a List. then it calls classB.method with those 3 attributes.</p>\n<p>so its like this:</p>\n<pre><code>    ClassA.method(string, string, List)\n       get value of local_tag\n       get Action from list\n\n       Switch (Action)\n           Case Action-1\n              Call ClassB.method( str, str, LIST)\n              If(local_tag = string set from list )  //  not actuall that straight forward..    \n                   set responseString to &quot;xyz&quot;\n              break\n           Case Action-2\n</code></pre>\n<pre><code>          etc.\n     \n</code></pre>\n<p>My question is, how do you mock a method with a List?</p>\n<p>I don't have access to Mockito, but do have EasyMock and PowerMock.  (still not clear on the differences)</p>\n<p>Seems like most of the answers I've seen here rely on Mockito.  I've also noticed that most of the answers are 8,9, 10 or more years old, so I wonder it they are still accurate.</p>\n<p>I've tried all sorts of syntax to make this work, searched every where, here included. but nothing that seems to address this scenario. (mocking a different class method WITH a List attribute inside the method being tested.</p>\n<p>I just want to know if i'm wasting my timne.</p>\n<p>Sorry to be so general.  I know you guys like specifics.  I'll add that I'm new to Java and Mocking.  This is how I'm getting &quot;broken in&quot;.  I'm just wondering if this is like the Old logger prank where then tell the new guy to go get the chain stretcher.</p>\n<pre><code>    ClassB myClassB =PowerMock.createMock(ClassB.class);\n    expect(classB.method( strA, strB, List)).andReturn();\n    verifyAll();\n    replayAll();\n\n    or\n\n    ClassB myClassB = PowerMock.createMock(ClassB.class);\n    expect(classB.method(EasyMock.isA(classxyz.class)EasyMock.isA(classabc.class),\n            EasyMock.isA(List.class))).andReturn();\n    replayAll();\n\n    or\n\n    ClassB myClassB =PowerMock.createMock(ClassB.class);\n    expect(classB.method(EasyMock.&lt;classA&gt;anyObject(),EasyMock.&lt;List&lt;classB&gt;&gt;anyObject(),\n         EasyMock.&lt;classC&gt;.anyObject())).andReturn();\n    replayAll();\n\n</code></pre>\n<p>I get all sorts of errors depending on what I try of course. One i get quite frequently is\nRequired type Void, provided void.\nI have no idea what that means, I interpret it to mean, you got the wrong syntax.</p>\n"},{"tags":["java","scala","java-text-blocks"],"comments":[{"owner":{"account_id":5362663,"reputation":4519,"user_id":4273446,"display_name":"Dyrandz Famador"},"score":0,"creation_date":1423184179,"post_id":28356801,"comment_id":45057052,"body_markdown":"take a look at this.. http://stackoverflow.com/questions/20324715/double-quotes-within-string-like-triple-double-quote-in-python","body":"take a look at this.. <a href=\"http://stackoverflow.com/questions/20324715/double-quotes-within-string-like-triple-double-quote-in-python\" title=\"double quotes within string like triple double quote in python\">stackoverflow.com/questions/20324715/&hellip;</a>"},{"owner":{"account_id":4558421,"reputation":2296,"user_id":3701433,"accept_rate":46,"display_name":"Prudhvi"},"score":0,"creation_date":1423184246,"post_id":28356801,"comment_id":45057070,"body_markdown":"I don&#39;t think there&#39;s an other way in Java. You know every language is different!","body":"I don&#39;t think there&#39;s an other way in Java. You know every language is different!"},{"owner":{"account_id":3791748,"reputation":933,"user_id":3148067,"accept_rate":67,"display_name":"Ypnypn"},"score":1,"creation_date":1423184281,"post_id":28356801,"comment_id":45057081,"body_markdown":"It might be easier to the JSON in a separate file, and read from it.","body":"It might be easier to the JSON in a separate file, and read from it."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1423186573,"post_id":28356801,"comment_id":45057666,"body_markdown":"You should use a JSON library to compose your JSON, rather than string concatenation.","body":"You should use a JSON library to compose your JSON, rather than string concatenation."},{"owner":{"account_id":2475356,"reputation":1618,"user_id":2472760,"accept_rate":59,"display_name":"HiChews123"},"score":1,"creation_date":1423200877,"post_id":28356801,"comment_id":45061252,"body_markdown":"@DavidConrad - I agree, but if you&#39;re just trying to whip up something simple, triple quotes out of the box as a language feature would be super nifty","body":"@DavidConrad - I agree, but if you&#39;re just trying to whip up something simple, triple quotes out of the box as a language feature would be super nifty"},{"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"score":0,"creation_date":1693511627,"post_id":28356801,"comment_id":135774750,"body_markdown":"Although this mostly duplicates [prior Question](https://stackoverflow.com/q/20324715/1357094), this one has since received better [Java 15] Answers for `Text Blocks`.","body":"Although this mostly duplicates <a href=\"https://stackoverflow.com/q/20324715/1357094\">prior Question</a>, this one has since received better [Java 15] Answers for <code>Text Blocks</code>."}],"answers":[{"comments":[{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":3,"creation_date":1423185702,"post_id":28357019,"comment_id":45057460,"body_markdown":"Using Groovy is might also be an option.","body":"Using Groovy is might also be an option."},{"owner":{"account_id":1529569,"reputation":32719,"user_id":1427124,"accept_rate":91,"display_name":"DaoWen"},"score":0,"creation_date":1423186139,"post_id":28357019,"comment_id":45057566,"body_markdown":"Why would you use `DOUBLE_QUOTE` or `(char)34` instead of `&#39;&quot;&#39;` (a single-quoted double-quote char)? The best option is still `\\&quot;`, but I think it&#39;s strange you left out `&#39;&quot;&#39;`.","body":"Why would you use <code>DOUBLE_QUOTE</code> or <code>(char)34</code> instead of <code>&#39;&quot;&#39;</code> (a single-quoted double-quote char)? The best option is still <code>\\&quot;</code>, but I think it&#39;s strange you left out <code>&#39;&quot;&#39;</code>."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1423186233,"post_id":28357019,"comment_id":45057591,"body_markdown":"I suppose, for completeness, you could mention using some unrelated character that you know will not be in the data, say &#39;#&#39;, and then doing a replace afterwards to turn them into quotes. But that seems very hack-y.","body":"I suppose, for completeness, you could mention using some unrelated character that you know will not be in the data, say &#39;#&#39;, and then doing a replace afterwards to turn them into quotes. But that seems very hack-y."},{"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"score":0,"creation_date":1693511391,"post_id":28357019,"comment_id":135774692,"body_markdown":"[Java 13/15+](https://stackoverflow.com/a/59839267/1357094) has better `Text Blocks` alternative.","body":"<a href=\"https://stackoverflow.com/a/59839267/1357094\">Java 13/15+</a> has better <code>Text Blocks</code> alternative."}],"tags":[],"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"comment_count":4,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1693514798,"creation_date":1423185316,"answer_id":28357019,"question_id":28356801,"body_markdown":"_Note: This answer was written prior to Java 15, which [introduced the triple-quote text block feature](https://www.baeldung.com/java-text-blocks).  Please see [@epox&#39;s answer](https://stackoverflow.com/questions/28356801/triple-quotes-in-java-like-scala/59839267#59839267) for how to use this feature._\r\n\r\n---\r\n\r\nThere is no good alternative to using `\\&quot;` to include double-quotes in your string literal.\r\n\r\nThere are bad alternatives:\r\n\r\n- Use `\\u0022`, the Unicode escape for a double-quote character.  The compiler treats a Unicode escape as if that character was typed.  It&#39;s treated as a double-quote character in the _source code_, ending/beginning a `String` literal, so this does NOT work.\r\n- Concatenate the character `&#39;&quot;&#39;`, e.g. `&quot;This is a &quot; + &#39;&quot;&#39; + &quot;string&quot;`.  This will work, but it seems to be even uglier and less readable than just using `\\&quot;`.\r\n- Concatenate the `char` 34 to represent the double-quote character, e.g. `&quot;This is a &quot; + (char) 34 + &quot;string&quot;`.  This will work, but it&#39;s even less obvious that you&#39;re attempting to place a double-quote character in your string.\r\n- Copy and paste Word&#39;s &quot;smart quotes&quot;, e.g. `&quot;This is a “string” with “quotes” in it!&quot;`.  These aren&#39;t the same characters (Unicode U+201C and U+201D); they have different appearances, but they&#39;ll work.\r\n\r\nI suppose to hide the &quot;disgusting&quot;-ness, you could hide it behind a constant.\r\n\r\n    public static final String DOUBLE_QUOTE = &quot;\\&quot;&quot;;\r\n\r\nThen you could use:\r\n\r\n    String expr = &quot; This is a &quot; + DOUBLE_QUOTE + &quot;string&quot; + DOUBLE_QUOTE + ...;\r\n\r\nIt&#39;s more readable than other options, but it&#39;s still not very readable, and it&#39;s still ugly.\r\n\r\nThere is no `&quot;&quot;&quot;` mechanism in Java, so using the escape `\\&quot;`, is the best option.  It&#39;s the most readable, and it&#39;s the least ugly.","title":"Triple quotes in Java like Scala","body":"<p><em>Note: This answer was written prior to Java 15, which <a href=\"https://www.baeldung.com/java-text-blocks\" rel=\"nofollow noreferrer\">introduced the triple-quote text block feature</a>.  Please see <a href=\"https://stackoverflow.com/questions/28356801/triple-quotes-in-java-like-scala/59839267#59839267\">@epox's answer</a> for how to use this feature.</em></p>\n<hr />\n<p>There is no good alternative to using <code>\\&quot;</code> to include double-quotes in your string literal.</p>\n<p>There are bad alternatives:</p>\n<ul>\n<li>Use <code>\\u0022</code>, the Unicode escape for a double-quote character.  The compiler treats a Unicode escape as if that character was typed.  It's treated as a double-quote character in the <em>source code</em>, ending/beginning a <code>String</code> literal, so this does NOT work.</li>\n<li>Concatenate the character <code>'&quot;'</code>, e.g. <code>&quot;This is a &quot; + '&quot;' + &quot;string&quot;</code>.  This will work, but it seems to be even uglier and less readable than just using <code>\\&quot;</code>.</li>\n<li>Concatenate the <code>char</code> 34 to represent the double-quote character, e.g. <code>&quot;This is a &quot; + (char) 34 + &quot;string&quot;</code>.  This will work, but it's even less obvious that you're attempting to place a double-quote character in your string.</li>\n<li>Copy and paste Word's &quot;smart quotes&quot;, e.g. <code>&quot;This is a “string” with “quotes” in it!&quot;</code>.  These aren't the same characters (Unicode U+201C and U+201D); they have different appearances, but they'll work.</li>\n</ul>\n<p>I suppose to hide the &quot;disgusting&quot;-ness, you could hide it behind a constant.</p>\n<pre><code>public static final String DOUBLE_QUOTE = &quot;\\&quot;&quot;;\n</code></pre>\n<p>Then you could use:</p>\n<pre><code>String expr = &quot; This is a &quot; + DOUBLE_QUOTE + &quot;string&quot; + DOUBLE_QUOTE + ...;\n</code></pre>\n<p>It's more readable than other options, but it's still not very readable, and it's still ugly.</p>\n<p>There is no <code>&quot;&quot;&quot;</code> mechanism in Java, so using the escape <code>\\&quot;</code>, is the best option.  It's the most readable, and it's the least ugly.</p>\n"},{"comments":[{"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"score":0,"creation_date":1579964714,"post_id":47038599,"comment_id":105946076,"body_markdown":"Unstable. You would unpredictably break original values in some cases: {&quot;msg&quot;: &quot;Expected: not empty string. Was: arg=&#39; &#39; .&quot;}.","body":"Unstable. You would unpredictably break original values in some cases: {&quot;msg&quot;: &quot;Expected: not empty string. Was: arg=&#39; &#39; .&quot;}."},{"owner":{"account_id":5593566,"reputation":412,"user_id":4431955,"display_name":"Joris"},"score":2,"creation_date":1580372854,"post_id":47038599,"comment_id":106077846,"body_markdown":"As I said, &quot;Obviously this doesn&#39;t work if there&#39;s a regular double single quote&quot;. This is just a quick stopgap for debugging, shouldn&#39;t be used in production code. But I thought that was obvous from the answer...","body":"As I said, &quot;Obviously this doesn&#39;t work if there&#39;s a regular double single quote&quot;. This is just a quick stopgap for debugging, shouldn&#39;t be used in production code. But I thought that was obvous from the answer..."},{"owner":{"account_id":358715,"reputation":1714,"user_id":699665,"display_name":"MarkHu"},"score":0,"creation_date":1621156969,"post_id":47038599,"comment_id":119405401,"body_markdown":"Elegant hack! I&#39;d be even cruder*, and use single-quotes, a-la JavaScript. *Crude-but-effective.","body":"Elegant hack! I&#39;d be even cruder*, and use single-quotes, a-la JavaScript. *Crude-but-effective."},{"owner":{"account_id":5593566,"reputation":412,"user_id":4431955,"display_name":"Joris"},"score":0,"creation_date":1622104466,"post_id":47038599,"comment_id":119696074,"body_markdown":"@Markhu, yes, this would work with basically any non-double-quote character (or character sequence). I simply picked `&#39;&#39;` because it&#39;s similar to double-quote and unlikely to appear in the tokens I wanted to add.","body":"@Markhu, yes, this would work with basically any non-double-quote character (or character sequence). I simply picked <code>&#39;&#39;</code> because it&#39;s similar to double-quote and unlikely to appear in the tokens I wanted to add."}],"tags":[],"owner":{"account_id":5593566,"reputation":412,"user_id":4431955,"display_name":"Joris"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1509462379,"creation_date":1509462379,"answer_id":47038599,"question_id":28356801,"body_markdown":"Found this question while doing the same thing: composing small literal JSON strings for quick testing. One alternative that didn&#39;t come up is to use double single-quotes and replace them with double quotes, something like:\r\n\r\n    String json = &quot;{ &#39;&#39;label&#39;&#39; : &#39;&#39;set range&#39;&#39;, &#39;&#39;min&#39;&#39; : 0, &#39;&#39;max&#39;&#39; : 100}&quot;.replace(&quot;&#39;&#39;&quot;, &quot;\\&quot;&quot;)\r\n\r\nObviously this doesn&#39;t work if there&#39;s a regular double single quote, but chances of that should be slim. It&#39;s not a great solution, but looks better than lots of backslashes, imo. As an intermediate step to putting the json in a separate file, this is probably not too bad.\r\n\r\n","title":"Triple quotes in Java like Scala","body":"<p>Found this question while doing the same thing: composing small literal JSON strings for quick testing. One alternative that didn't come up is to use double single-quotes and replace them with double quotes, something like:</p>\n\n<pre><code>String json = \"{ ''label'' : ''set range'', ''min'' : 0, ''max'' : 100}\".replace(\"''\", \"\\\"\")\n</code></pre>\n\n<p>Obviously this doesn't work if there's a regular double single quote, but chances of that should be slim. It's not a great solution, but looks better than lots of backslashes, imo. As an intermediate step to putting the json in a separate file, this is probably not too bad.</p>\n"},{"tags":[],"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1691714092,"creation_date":1579603205,"answer_id":59839267,"question_id":28356801,"body_markdown":"Since Java 15\r\n-\r\nor since Java 13 **preview feature**. REF: https://openjdk.java.net/jeps/355\r\n\r\nIt doesn&#39;t work precisely in Scala way. The opening triple quotes **must** be followed by a new line.\r\n\r\n    var expr = &quot;&quot;&quot;\r\n               This is a 1-line &quot;string&quot; with &quot;quotes&quot; and no leading spaces in it! &quot;&quot;&quot;;\r\n\r\nThe position of the closing triple quotes matters. It defines the indent size. For example, for having 2 spaces indent, you position your closing `&quot;&quot;&quot;` as follows:\r\n\r\n    String sql = &quot;&quot;&quot;\r\n                   SELECT   emp_id, last_name\r\n                   FROM     postgres.employee\r\n                   WHERE    city = &#39;INDIANAPOLIS&#39;\r\n                   ORDER BY emp_id, last_name;\r\n                 &quot;&quot;&quot;;\r\n\r\nthis would result in 4 lines of text:\r\n\r\n      SELECT   emp_id, last_name\r\n      FROM     postgres.employee\r\n      WHERE    city = &#39;INDIANAPOLIS&#39;\r\n      ORDER BY emp_id, last_name;\r\n\r\n---\r\nEscaping:\r\n-\r\n\r\nTripple quotes escaping is intuitive:\r\n\r\n    String txt = &quot;&quot;&quot;\r\n        A text block with three quotes \\&quot;&quot;&quot; inside.&quot;&quot;&quot;;\r\n\r\n`\\` (backslash) is still a special symbol&#129301;. You have to escape it by doubling `\\\\`:\r\n\r\n    String txt = &quot;&quot;&quot;\r\n        A text block with a single blackslash \\\\ in it.&quot;&quot;&quot;;\r\n\r\n---\r\nTrailing spaces\r\n-\r\nJava compiler **ignores** any ending spaces. \r\n\r\nWORKAROUND: add `\\s` to the end of the line. ([Baeldung example][1])\r\n\r\n---\r\nWindows `\\r\\n` line terminators\r\n-\r\nNo matter if you compile in MacOs or Windows, the string constant will always use `\\n` and only `\\n`\r\n\r\nWORKAROUND: add `\\r` to the end of the line. ([Baeldung example][2])\r\n\r\n---\r\nConcatenating 2 lines\r\n-\r\nSince Java 14 preview, you may continue the same line below, if the previous one ended with a single backslash:\r\n\r\n     var oneLine = &quot;&quot;&quot;\r\n                   This is one \\\r\n                     line of text!&quot;&quot;&quot;;\r\n\r\nResult:\r\n\r\n    This is one   line of text!\r\n\r\nEnjoy ;)\r\n=\r\nYou can play with the output right away in an online Java 17+ compiler: https://www.jdoodle.com/online-java-compiler/\r\n\r\n---\r\n**NOTE:** If using in Java 13(14), the feature was preview, there. So you could not use it in Java 13(14), unless you set the `--enable-preview TextBlock` key.\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-text-blocks#escaping-spaces\r\n  [2]: https://www.baeldung.com/java-text-blocks#escaping-line-terminators","title":"Triple quotes in Java like Scala","body":"<h2>Since Java 15</h2>\n<p>or since Java 13 <strong>preview feature</strong>. REF: <a href=\"https://openjdk.java.net/jeps/355\" rel=\"nofollow noreferrer\">https://openjdk.java.net/jeps/355</a></p>\n<p>It doesn't work precisely in Scala way. The opening triple quotes <strong>must</strong> be followed by a new line.</p>\n<pre><code>var expr = &quot;&quot;&quot;\n           This is a 1-line &quot;string&quot; with &quot;quotes&quot; and no leading spaces in it! &quot;&quot;&quot;;\n</code></pre>\n<p>The position of the closing triple quotes matters. It defines the indent size. For example, for having 2 spaces indent, you position your closing <code>&quot;&quot;&quot;</code> as follows:</p>\n<pre><code>String sql = &quot;&quot;&quot;\n               SELECT   emp_id, last_name\n               FROM     postgres.employee\n               WHERE    city = 'INDIANAPOLIS'\n               ORDER BY emp_id, last_name;\n             &quot;&quot;&quot;;\n</code></pre>\n<p>this would result in 4 lines of text:</p>\n<pre><code>  SELECT   emp_id, last_name\n  FROM     postgres.employee\n  WHERE    city = 'INDIANAPOLIS'\n  ORDER BY emp_id, last_name;\n</code></pre>\n<hr />\n<h2>Escaping:</h2>\n<p>Tripple quotes escaping is intuitive:</p>\n<pre><code>String txt = &quot;&quot;&quot;\n    A text block with three quotes \\&quot;&quot;&quot; inside.&quot;&quot;&quot;;\n</code></pre>\n<p><code>\\</code> (backslash) is still a special symbol🤕. You have to escape it by doubling <code>\\\\</code>:</p>\n<pre><code>String txt = &quot;&quot;&quot;\n    A text block with a single blackslash \\\\ in it.&quot;&quot;&quot;;\n</code></pre>\n<hr />\n<h2>Trailing spaces</h2>\n<p>Java compiler <strong>ignores</strong> any ending spaces.</p>\n<p>WORKAROUND: add <code>\\s</code> to the end of the line. (<a href=\"https://www.baeldung.com/java-text-blocks#escaping-spaces\" rel=\"nofollow noreferrer\">Baeldung example</a>)</p>\n<hr />\n<h2>Windows <code>\\r\\n</code> line terminators</h2>\n<p>No matter if you compile in MacOs or Windows, the string constant will always use <code>\\n</code> and only <code>\\n</code></p>\n<p>WORKAROUND: add <code>\\r</code> to the end of the line. (<a href=\"https://www.baeldung.com/java-text-blocks#escaping-line-terminators\" rel=\"nofollow noreferrer\">Baeldung example</a>)</p>\n<hr />\n<h2>Concatenating 2 lines</h2>\n<p>Since Java 14 preview, you may continue the same line below, if the previous one ended with a single backslash:</p>\n<pre><code> var oneLine = &quot;&quot;&quot;\n               This is one \\\n                 line of text!&quot;&quot;&quot;;\n</code></pre>\n<p>Result:</p>\n<pre><code>This is one   line of text!\n</code></pre>\n<h1>Enjoy ;)</h1>\n<p>You can play with the output right away in an online Java 17+ compiler: <a href=\"https://www.jdoodle.com/online-java-compiler/\" rel=\"nofollow noreferrer\">https://www.jdoodle.com/online-java-compiler/</a></p>\n<hr />\n<p><strong>NOTE:</strong> If using in Java 13(14), the feature was preview, there. So you could not use it in Java 13(14), unless you set the <code>--enable-preview TextBlock</code> key.</p>\n"},{"tags":[],"owner":{"account_id":4814456,"reputation":3960,"user_id":3886961,"accept_rate":79,"display_name":"kiedysktos"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609859745,"creation_date":1599633130,"answer_id":63805952,"question_id":28356801,"body_markdown":"The feature of `&quot;Raw String Literals&quot;` was meant to be in **Java 12**, but was [withdrawn][1] due to some criticism, because they planned to use variable number of backquotes (`). \r\n\r\nSo it is in **Java 13** finally, as `&quot;Text Block&quot;` feature, but in **preview** only. It is using `&quot;&quot;&quot;` operator like in Scala.\r\n\r\nYou can read more on Java 13 features [here][2].\r\n\r\n\r\n  [1]: https://mail.openjdk.java.net/pipermail/jdk-dev/2018-December/002402.html\r\n  [2]: https://www.journaldev.com/33204/java-13-features#1-text-blocks-8211-jep-355","title":"Triple quotes in Java like Scala","body":"<p>The feature of <code>&quot;Raw String Literals&quot;</code> was meant to be in <strong>Java 12</strong>, but was <a href=\"https://mail.openjdk.java.net/pipermail/jdk-dev/2018-December/002402.html\" rel=\"nofollow noreferrer\">withdrawn</a> due to some criticism, because they planned to use variable number of backquotes (`).</p>\n<p>So it is in <strong>Java 13</strong> finally, as <code>&quot;Text Block&quot;</code> feature, but in <strong>preview</strong> only. It is using <code>&quot;&quot;&quot;</code> operator like in Scala.</p>\n<p>You can read more on Java 13 features <a href=\"https://www.journaldev.com/33204/java-13-features#1-text-blocks-8211-jep-355\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":10123132,"reputation":639,"user_id":7479415,"display_name":"Paul Rambags"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660830948,"creation_date":1660830948,"answer_id":73404326,"question_id":28356801,"body_markdown":"The triple quote feature is available since **Java 14**. For more details, see for instance, https://howtodoinjava.com/java14/java-text-blocks/","title":"Triple quotes in Java like Scala","body":"<p>The triple quote feature is available since <strong>Java 14</strong>. For more details, see for instance, <a href=\"https://howtodoinjava.com/java14/java-text-blocks/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/java14/java-text-blocks/</a></p>\n"},{"tags":[],"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669171805,"creation_date":1669171805,"answer_id":74541242,"question_id":28356801,"body_markdown":"The feature that you want is called `Text Blocks` and delivered in Java 15, [JEP378](https://openjdk.org/jeps/378).\r\n\r\n### History\r\n\r\n&gt; Text blocks were proposed by JEP 355 in early 2019 as a follow-on to\r\n&gt; explorations begun in JEP 326 (Raw String Literals), which was\r\n&gt; initially targeted to JDK 12 but eventually withdrawn and did not\r\n&gt; appear in that release. JEP 355 was targeted to JDK 13 in June 2019 as\r\n&gt; a preview feature. Feedback on JDK 13 suggested that text blocks\r\n&gt; should be previewed again in JDK 14, with the addition of two new\r\n&gt; escape sequences. Consequently, JEP 368 was targeted to JDK 14 in\r\n&gt; November 2019 as a preview feature. Feedback on JDK 14 suggested that\r\n&gt; text blocks were ready to become final and permanent in JDK 15 with no\r\n&gt; further changes.\r\n\r\n### Usage\r\n\r\n    String query = &quot;&quot;&quot;\r\n                   SELECT &quot;EMP_ID&quot;, &quot;LAST_NAME&quot; FROM &quot;EMPLOYEE_TB&quot;\r\n                   WHERE &quot;CITY&quot; = &#39;INDIANAPOLIS&#39;\r\n                   ORDER BY &quot;EMP_ID&quot;, &quot;LAST_NAME&quot;;\r\n                   &quot;&quot;&quot;;","title":"Triple quotes in Java like Scala","body":"<p>The feature that you want is called <code>Text Blocks</code> and delivered in Java 15, <a href=\"https://openjdk.org/jeps/378\" rel=\"nofollow noreferrer\">JEP378</a>.</p>\n<h3>History</h3>\n<blockquote>\n<p>Text blocks were proposed by JEP 355 in early 2019 as a follow-on to\nexplorations begun in JEP 326 (Raw String Literals), which was\ninitially targeted to JDK 12 but eventually withdrawn and did not\nappear in that release. JEP 355 was targeted to JDK 13 in June 2019 as\na preview feature. Feedback on JDK 13 suggested that text blocks\nshould be previewed again in JDK 14, with the addition of two new\nescape sequences. Consequently, JEP 368 was targeted to JDK 14 in\nNovember 2019 as a preview feature. Feedback on JDK 14 suggested that\ntext blocks were ready to become final and permanent in JDK 15 with no\nfurther changes.</p>\n</blockquote>\n<h3>Usage</h3>\n<pre><code>String query = &quot;&quot;&quot;\n               SELECT &quot;EMP_ID&quot;, &quot;LAST_NAME&quot; FROM &quot;EMPLOYEE_TB&quot;\n               WHERE &quot;CITY&quot; = 'INDIANAPOLIS'\n               ORDER BY &quot;EMP_ID&quot;, &quot;LAST_NAME&quot;;\n               &quot;&quot;&quot;;\n</code></pre>\n"}],"owner":{"account_id":2475356,"reputation":1618,"user_id":2472760,"accept_rate":59,"display_name":"HiChews123"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33418,"favorite_count":0,"down_vote_count":1,"up_vote_count":20,"accepted_answer_id":28357019,"answer_count":6,"score":19,"last_activity_date":1693514798,"creation_date":1423183882,"question_id":28356801,"body_markdown":"In Scala you can do something like this:\r\n\r\n    val expr = &quot;&quot;&quot; This is a &quot;string&quot; with &quot;quotes&quot; in it! &quot;&quot;&quot;\r\n\r\nIs there something like this in Java? I abhor using `&quot;\\&quot;&quot;` to represent strings with quotes in them. Especially when composing key/value pairs in JSON. Disgusting!\r\n\r\n","title":"Triple quotes in Java like Scala","body":"<p>In Scala you can do something like this:</p>\n\n<pre><code>val expr = \"\"\" This is a \"string\" with \"quotes\" in it! \"\"\"\n</code></pre>\n\n<p>Is there something like this in Java? I abhor using <code>\"\\\"\"</code> to represent strings with quotes in them. Especially when composing key/value pairs in JSON. Disgusting!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9924,"page":210,"page_size":100}
