{"items":[{"tags":["java"],"comments":[{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1590704892,"post_id":62036280,"comment_id":109789916,"body_markdown":"Why do you want to restrict the line-end characters?","body":"Why do you want to restrict the line-end characters?"},{"owner":{"account_id":4508316,"reputation":391,"user_id":3665135,"display_name":"luoshao23"},"score":0,"creation_date":1590742795,"post_id":62036280,"comment_id":109801467,"body_markdown":"@NomadMaker Each line of the file is the query from one user. It is supposed to be treated as a whole while some users input invisible characters such as \\u2028.","body":"@NomadMaker Each line of the file is the query from one user. It is supposed to be treated as a whole while some users input invisible characters such as \\u2028."}],"answers":[{"comments":[{"owner":{"account_id":4508316,"reputation":391,"user_id":3665135,"display_name":"luoshao23"},"score":0,"creation_date":1590649753,"post_id":62036383,"comment_id":109760113,"body_markdown":"```scanner.hasNext()``` will skip blank line automatically, I&#39;m afraid.","body":"<code>scanner.hasNext()</code> will skip blank line automatically, I&#39;m afraid."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1590702326,"post_id":62036383,"comment_id":109789000,"body_markdown":"@luoshao23 OK. Try edited answer. If that doesn&#39;t work, please tell me the char sequence you want it to work with.","body":"@luoshao23 OK. Try edited answer. If that doesn&#39;t work, please tell me the char sequence you want it to work with."}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1590702284,"creation_date":1590559091,"answer_id":62036383,"question_id":62036280,"body_markdown":"Scanner does not provide a way to override the pattern it uses for line endings.\r\n\r\nHowever, you can achieve somerhing similar like this:\r\n\r\n    String line = scanner.next(&quot;[\\R \\u2028\\u2029\\u0085]&quot;);\r\n\r\nand use `scanner.hasNext(&quot;[\\R\\u2028\\u2029\\u0085]&quot;)` instead of `scanner.hasNextLine()`.\r\n\r\nNote: `\\R` was introduced in version 8 and means any flavour of &quot;line end&quot; character sequence (ie `\\r\\n`, `\\n` or `\\r` which works for windows, *nix and mac)  ","title":"Java Scanner specify line separator","body":"<p>Scanner does not provide a way to override the pattern it uses for line endings.</p>\n\n<p>However, you can achieve somerhing similar like this:</p>\n\n<pre><code>String line = scanner.next(\"[\\R \\u2028\\u2029\\u0085]\");\n</code></pre>\n\n<p>and use <code>scanner.hasNext(\"[\\R\\u2028\\u2029\\u0085]\")</code> instead of <code>scanner.hasNextLine()</code>.</p>\n\n<p>Note: <code>\\R</code> was introduced in version 8 and means any flavour of \"line end\" character sequence (ie <code>\\r\\n</code>, <code>\\n</code> or <code>\\r</code> which works for windows, *nix and mac)  </p>\n"},{"tags":[],"owner":{"account_id":20068238,"reputation":33,"user_id":14713531,"display_name":"Kotbi Abderrahmane"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691600120,"creation_date":1691581019,"answer_id":76867395,"question_id":62036280,"body_markdown":"I read @Bohemian answer and I believe that you can achieve this easily. Since java 8 you have the two functions `useDelimiter` and `delimiter`. These functions allow you to define your delimiter and check its value. In this case you want &#39;\\r&#39; or &#39;\\n&#39;, etc. Then you can use simply `hasNext` and `next` simply:\r\n\r\n```\r\nScanner sc = new Scanner(inputStream);\r\nsc.useDelimiter(&quot;\\n&quot;);\r\nwhile(sc.hasNext()) {\r\n    String line =  sc.next();\r\n}\r\n```\r\n\r\nThis code snippet logic rhymes well with the description given in the java 8 [Scanner documentation][1]:\r\n\r\n&gt; A Scanner breaks its input into tokens using a delimiter pattern, which by default matches whitespace. The resulting tokens may then be converted into values of different types using the various next methods. \r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html#Scanner-java.io.InputStream-java.lang.String-","title":"Java Scanner specify line separator","body":"<p>I read @Bohemian answer and I believe that you can achieve this easily. Since java 8 you have the two functions <code>useDelimiter</code> and <code>delimiter</code>. These functions allow you to define your delimiter and check its value. In this case you want '\\r' or '\\n', etc. Then you can use simply <code>hasNext</code> and <code>next</code> simply:</p>\n<pre><code>Scanner sc = new Scanner(inputStream);\nsc.useDelimiter(&quot;\\n&quot;);\nwhile(sc.hasNext()) {\n    String line =  sc.next();\n}\n</code></pre>\n<p>This code snippet logic rhymes well with the description given in the java 8 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html#Scanner-java.io.InputStream-java.lang.String-\" rel=\"nofollow noreferrer\">Scanner documentation</a>:</p>\n<blockquote>\n<p>A Scanner breaks its input into tokens using a delimiter pattern, which by default matches whitespace. The resulting tokens may then be converted into values of different types using the various next methods.</p>\n</blockquote>\n"}],"owner":{"account_id":4508316,"reputation":391,"user_id":3665135,"display_name":"luoshao23"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":576,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62036383,"answer_count":2,"score":2,"last_activity_date":1691600120,"creation_date":1590558524,"question_id":62036280,"body_markdown":"I use ```Scanner``` class in Java for IO operation.\r\nI want to read every line in a file that ends with &quot;\\n\\r|[\\r\\n]&quot;, excluding other separator that may also stand for the line separator, such as &quot;[  \\u2028\\2029\\0085]&quot;.\r\nIf I use ```Scanner.nextLine()```, these unicode separators will be included unless I change the source code of the ```Scanner```.\r\nIf I use ```Scanner.next(&quot;some pattern&quot;)```, the empty line will be ignored which is not what I expect.\r\nIs there any proper way to do this? Thanks.\r\n","title":"Java Scanner specify line separator","body":"<p>I use <code>Scanner</code> class in Java for IO operation.\nI want to read every line in a file that ends with \"\\n\\r|[\\r\\n]\", excluding other separator that may also stand for the line separator, such as \"[  \\u2028\\2029\\0085]\".\nIf I use <code>Scanner.nextLine()</code>, these unicode separators will be included unless I change the source code of the <code>Scanner</code>.\nIf I use <code>Scanner.next(\"some pattern\")</code>, the empty line will be ignored which is not what I expect.\nIs there any proper way to do this? Thanks.</p>\n"},{"tags":["java","apache-kafka","apache-camel","spring-camel"],"comments":[{"owner":{"account_id":15611683,"reputation":69,"user_id":11262937,"display_name":"Jack Bourner"},"score":0,"creation_date":1692974685,"post_id":76869053,"comment_id":135702448,"body_markdown":"Looks like the issue could be related to spring transactions being used in one of the processes(Persisting to DB using  JPA). I suspect  the transactional nature of the flow  does not work  with the deadletterchannel. I have opted to handle the exception in the route itself as I only have one route. \nAlso, theres the TransactionErrorHandler, but  I couldn&#39;t get the deadletterqueue to work with this.","body":"Looks like the issue could be related to spring transactions being used in one of the processes(Persisting to DB using  JPA). I suspect  the transactional nature of the flow  does not work  with the deadletterchannel. I have opted to handle the exception in the route itself as I only have one route.  Also, theres the TransactionErrorHandler, but  I couldn&#39;t get the deadletterqueue to work with this."}],"owner":{"account_id":15611683,"reputation":69,"user_id":11262937,"display_name":"Jack Bourner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691599684,"creation_date":1691593453,"question_id":76869053,"body_markdown":"I am connecting to 12 kafka brokers (6 in each data center) \r\n\r\n - Kafka : Confluent 7.3.1\r\n - Java:11 \r\n - Camel: 3.16.0\r\n - Spring-boot: 2.7.13\r\n\r\n\r\n\r\n\r\n```\r\nauto.commit.interval.ms = 2000\r\nauto.offset.reset = latest\r\nconnections.max.idle.ms = 540000\r\nenable.auto.commit = true\r\nfetch.max.bytes = 52428800\r\nfetch.max.wait.ms = 500\r\nfetch.min.bytes = 1\r\nheartbeat.interval.ms = 3000\r\nmax.poll.interval.ms = 300000\r\nmax.poll.records = 10\r\nreconnect.backoff.max.ms = 1000\r\nreconnect.backoff.ms = 50\r\nrequest.timeout.ms = 40000\r\n```\r\nCamel setup \r\n``` lang-java\r\n@Autowire DeadLetterChannelBuilder deadLetterHandler;\r\n\r\n@Override\r\npublic void configure() {\r\n\r\n  errorHandler(deadLetterHandler);\r\n\r\n  from(ENDPOINT)\r\n      .routeId(Constants.ROUTE_NAME)\r\n      .process(entityMappingProcessor)\r\n      .log(&quot;Persisted message into database&quot;)\r\n}\r\n\r\n@Bean\r\npublic RedeliveryPolicy redeliveryPolicy() {\r\n  RedeliveryPolicy rp = new RedeliveryPolicy();\r\n  rp.setMaximumRedeliveries(0);\r\n  rp.setRedeliveryDelay(500);\r\n  rp.setRetryAttemptedLogLevel(LoggingLevel.ERROR);\r\n  return rp;\r\n}\r\n\r\n@Bean\r\npublic DeadLetterChannelBuilder bridgeDeadLetterHandler(RedeliveryPolicy redeliveryPolicy) {\r\n  DeadLetterChannelBuilder bridgeDeadLetterHandler = new DeadLetterChannelBuilder();\r\n  bridgeDeadLetterHandler.setDeadLetterUri(EXCEPTION_URI);\r\n  bridgeDeadLetterHandler.setUseOriginalMessage(true);\r\n  bridgeDeadLetterHandler.setRedeliveryPolicy(redeliveryPolicy);\r\n  return bridgeDeadLetterHandler;\r\n}\r\n\r\n@Override\r\npublic void configure() {\r\n  from(EXCEPTION_URI)\r\n      .routeId(&quot;rt.generic.exception.route&quot;)\r\n      .process(exceptionProcessor)\r\n      .to(DEAD_LETTER_QUEUE);\r\n}\r\n  \r\n```\r\n\r\nWhen conduction a DR test, where the brokers on 1 data center and shutdown, we are seeing the below logs. The consumer does not reconnect and either the other consumer gets assigned the partition or the same happens on the other consumer and no messages are consumed from then on (Until a service restart). \r\n```\r\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] ERROR org.apache.kafka.clients.consumer.internals.ConsumerCoordinator - handle - AL0812120F - [Consumer clientId=consumer-2, groupId=my-consumer-group] Offset commit failed on partition TOPIC-2-1 at offset 588742: The coordinator is not aware of this member.\r\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.component.kafka.KafkaFetchRecords - startPolling - AL0812120230808T1ption org.apache.kafka.clients.consumer.CommitFailedException caught while polling TOPIC-2-Thread 0 from kafka topic TOPIC-2 at offset {TOPIC-2/1=588741}: Commity rebalanced and assigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spendddress this either by increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.\r\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.component.kafka.KafkaFetchRecords - handlePollErrorHandler - AL081210XF - Deferring processing to the exception handler based on polling exception strategy\r\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] ERROR org.apache.camel.processor.errorhandler.DeadLetterChannel - log - AL0812120230808T15d delivery for (MessageId: 41555711D74864E-000000000002364E on ExchangeId: 41555711D74864E-000000000002364E). On delivery attempt: 0 caught: org.apache.kafka.clients.consumer.CommitFailedException: Commit cannot be completedigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spending too much time mey increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.\r\n2023-08-08-15.18.48.349 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.impl.engine.DefaultReactiveExecutor - schedule - AL0812120230808T151executing reactive work due to null. This exception is ignored.\r\njava.lang.NullPointerException: null\r\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleException(RedeliveryErrorHandler.java:489) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:461) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:193) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:64) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.processor.Pipeline.process(Pipeline.java:184) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:399) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41) ~[camel-support-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:79) ~[camel-support-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:57) ~[camel-support-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:52) ~[camel-support-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.component.kafka.KafkaFetchRecords.handlePollErrorHandler(KafkaFetchRecords.java:399) ~[camel-kafka-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.component.kafka.KafkaFetchRecords.handleAccordingToStrategy(KafkaFetchRecords.java:343) ~[camel-kafka-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.component.kafka.KafkaFetchRecords.startPolling(KafkaFetchRecords.java:323) ~[camel-kafka-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.component.kafka.KafkaFetchRecords.run(KafkaFetchRecords.java:181) ~[camel-kafka-3.16.0.jar!/:3.16.0]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n        at java.lang.Thread.run(Thread.java:866) ~[?:?]\r\n\r\n```\r\n\r\nIs the errorHandler causing the issue in how camel/ kafka handle the re-connection ? \r\nDo I need to remove the redelivery handler as this is confusing the flow? \r\nAny guidance would be helpful. \r\n \r\n","title":"Camel kafka - Consumer removed from consumer group during DR test","body":"<p>I am connecting to 12 kafka brokers (6 in each data center)</p>\n<ul>\n<li>Kafka : Confluent 7.3.1</li>\n<li>Java:11</li>\n<li>Camel: 3.16.0</li>\n<li>Spring-boot: 2.7.13</li>\n</ul>\n<pre><code>auto.commit.interval.ms = 2000\nauto.offset.reset = latest\nconnections.max.idle.ms = 540000\nenable.auto.commit = true\nfetch.max.bytes = 52428800\nfetch.max.wait.ms = 500\nfetch.min.bytes = 1\nheartbeat.interval.ms = 3000\nmax.poll.interval.ms = 300000\nmax.poll.records = 10\nreconnect.backoff.max.ms = 1000\nreconnect.backoff.ms = 50\nrequest.timeout.ms = 40000\n</code></pre>\n<p>Camel setup</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowire DeadLetterChannelBuilder deadLetterHandler;\n\n@Override\npublic void configure() {\n\n  errorHandler(deadLetterHandler);\n\n  from(ENDPOINT)\n      .routeId(Constants.ROUTE_NAME)\n      .process(entityMappingProcessor)\n      .log(&quot;Persisted message into database&quot;)\n}\n\n@Bean\npublic RedeliveryPolicy redeliveryPolicy() {\n  RedeliveryPolicy rp = new RedeliveryPolicy();\n  rp.setMaximumRedeliveries(0);\n  rp.setRedeliveryDelay(500);\n  rp.setRetryAttemptedLogLevel(LoggingLevel.ERROR);\n  return rp;\n}\n\n@Bean\npublic DeadLetterChannelBuilder bridgeDeadLetterHandler(RedeliveryPolicy redeliveryPolicy) {\n  DeadLetterChannelBuilder bridgeDeadLetterHandler = new DeadLetterChannelBuilder();\n  bridgeDeadLetterHandler.setDeadLetterUri(EXCEPTION_URI);\n  bridgeDeadLetterHandler.setUseOriginalMessage(true);\n  bridgeDeadLetterHandler.setRedeliveryPolicy(redeliveryPolicy);\n  return bridgeDeadLetterHandler;\n}\n\n@Override\npublic void configure() {\n  from(EXCEPTION_URI)\n      .routeId(&quot;rt.generic.exception.route&quot;)\n      .process(exceptionProcessor)\n      .to(DEAD_LETTER_QUEUE);\n}\n  \n</code></pre>\n<p>When conduction a DR test, where the brokers on 1 data center and shutdown, we are seeing the below logs. The consumer does not reconnect and either the other consumer gets assigned the partition or the same happens on the other consumer and no messages are consumed from then on (Until a service restart).</p>\n<pre><code>2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] ERROR org.apache.kafka.clients.consumer.internals.ConsumerCoordinator - handle - AL0812120F - [Consumer clientId=consumer-2, groupId=my-consumer-group] Offset commit failed on partition TOPIC-2-1 at offset 588742: The coordinator is not aware of this member.\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.component.kafka.KafkaFetchRecords - startPolling - AL0812120230808T1ption org.apache.kafka.clients.consumer.CommitFailedException caught while polling TOPIC-2-Thread 0 from kafka topic TOPIC-2 at offset {TOPIC-2/1=588741}: Commity rebalanced and assigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spendddress this either by increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.component.kafka.KafkaFetchRecords - handlePollErrorHandler - AL081210XF - Deferring processing to the exception handler based on polling exception strategy\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] ERROR org.apache.camel.processor.errorhandler.DeadLetterChannel - log - AL0812120230808T15d delivery for (MessageId: 41555711D74864E-000000000002364E on ExchangeId: 41555711D74864E-000000000002364E). On delivery attempt: 0 caught: org.apache.kafka.clients.consumer.CommitFailedException: Commit cannot be completedigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spending too much time mey increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.\n2023-08-08-15.18.48.349 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.impl.engine.DefaultReactiveExecutor - schedule - AL0812120230808T151executing reactive work due to null. This exception is ignored.\njava.lang.NullPointerException: null\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleException(RedeliveryErrorHandler.java:489) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:461) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:193) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:64) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.processor.Pipeline.process(Pipeline.java:184) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:399) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41) ~[camel-support-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:79) ~[camel-support-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:57) ~[camel-support-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:52) ~[camel-support-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.component.kafka.KafkaFetchRecords.handlePollErrorHandler(KafkaFetchRecords.java:399) ~[camel-kafka-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.component.kafka.KafkaFetchRecords.handleAccordingToStrategy(KafkaFetchRecords.java:343) ~[camel-kafka-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.component.kafka.KafkaFetchRecords.startPolling(KafkaFetchRecords.java:323) ~[camel-kafka-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.component.kafka.KafkaFetchRecords.run(KafkaFetchRecords.java:181) ~[camel-kafka-3.16.0.jar!/:3.16.0]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\n        at java.lang.Thread.run(Thread.java:866) ~[?:?]\n\n</code></pre>\n<p>Is the errorHandler causing the issue in how camel/ kafka handle the re-connection ?\nDo I need to remove the redelivery handler as this is confusing the flow?\nAny guidance would be helpful.</p>\n"},{"tags":["java","windows","tomcat","openssl","pfx"],"comments":[{"owner":{"account_id":301110,"reputation":98854,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":2,"creation_date":1510097582,"post_id":47158200,"comment_id":81288199,"body_markdown":"Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See [What topics can I ask about here](http://stackoverflow.com/help/on-topic) in the Help Center. Perhaps [Super User](http://superuser.com/) or [Unix &amp; Linux Stack Exchange](http://unix.stackexchange.com/) would be a better place to ask.","body":"Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here</a> in the Help Center. Perhaps <a href=\"http://superuser.com/\">Super User</a> or <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a> would be a better place to ask."}],"answers":[{"comments":[{"owner":{"account_id":5395500,"reputation":642,"user_id":4296851,"accept_rate":71,"display_name":"Richard Sand"},"score":7,"creation_date":1565832808,"post_id":47258265,"comment_id":101476384,"body_markdown":"Tomcat can use a PFX (PKCS12) file just fine, there is no need to convert to JKS","body":"Tomcat can use a PFX (PKCS12) file just fine, there is no need to convert to JKS"},{"owner":{"account_id":1175345,"reputation":127,"user_id":5820870,"display_name":"senko"},"score":1,"creation_date":1634051297,"post_id":47258265,"comment_id":122919740,"body_markdown":"Tomcat 8.5.71 accepts PFX without a problem.","body":"Tomcat 8.5.71 accepts PFX without a problem."},{"owner":{"account_id":4910719,"reputation":962,"user_id":3956100,"accept_rate":100,"display_name":"Niklas"},"score":1,"creation_date":1696380417,"post_id":47258265,"comment_id":136144483,"body_markdown":"tomcat 7 even, can use pfx","body":"tomcat 7 even, can use pfx"}],"tags":[],"owner":{"account_id":11968652,"reputation":404,"user_id":8757653,"display_name":"Nick Desai"},"comment_count":3,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1533904407,"creation_date":1510554441,"answer_id":47258265,"question_id":47158200,"body_markdown":"Please convert the PFX file into a Tomcat compatible format . The command is given below\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    Keytool -importkeystore -srckeystore server.pfx -srcstoretype pkcs12 -destkeystore tomcat.jks -deststoretype jks\r\n\r\nThe tomcat.jks file directives can be provided in the server.xml file of tomcat.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CPcWW.jpg","title":"Installing pfx SSL certificate in tomcat 8.5 on windows","body":"<p>Please convert the PFX file into a Tomcat compatible format . The command is given below</p>\n\n<p><a href=\"https://i.stack.imgur.com/CPcWW.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CPcWW.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>Keytool -importkeystore -srckeystore server.pfx -srcstoretype pkcs12 -destkeystore tomcat.jks -deststoretype jks\n</code></pre>\n\n<p>The tomcat.jks file directives can be provided in the server.xml file of tomcat.</p>\n"},{"comments":[{"owner":{"account_id":369465,"reputation":465,"user_id":716861,"display_name":"Cavaleiro"},"score":1,"creation_date":1695291693,"post_id":47258830,"comment_id":136006260,"body_markdown":"I can confirm that this config also work on Tomcat 7.","body":"I can confirm that this config also work on Tomcat 7."}],"tags":[],"owner":{"account_id":238788,"reputation":1905,"user_id":507913,"accept_rate":83,"display_name":"Milind"},"comment_count":1,"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1691599651,"creation_date":1510557066,"answer_id":47258830,"question_id":47158200,"body_markdown":"I could do it successfully. As I have mentioned that my certificate was installed on IIS web server on windows with intermediate certificate. So I follow below steps\r\n\r\n **Step 1: Create a Microsoft Management Console (MMC) Snap-in for managing certificates** \r\n\r\n 1. Access the Search menu. In the search box, type **mmc** \r\n 2. From the **Microsoft Management Console (MMC)**, click  **File &gt; Add/Remove Snap-in**\r\n 3. From the list of snap-ins, select **Certificates** \r\n 4. Click **Add** \r\n 5. Select **Computer Account** \r\n 6. Click **Next** \r\n 7. Select **Local Computer** (the computer this console is running on) \r\n 8. Click **Finish** \r\n 9. In the Add/Remove Snap-in window, click **OK** \r\n 10. Save these console settings for future use\r\n\r\n**Step 2: Export/ Back Up the certificate**\r\n\r\n 1. Open the Certificates (Local Computer) snap-in you added &gt; select **Personal** &gt; **Certificates**\r\n\r\n 2. Right-click certificate name &gt; select **All Tasks** &gt; **Export**.\r\n\r\n 3. The Certificate Export Wizard opens &gt; click **Next**\r\n\r\n 4. Select **Yes, export the private key** &gt; click **Next**\r\n\r\n 5. Select **Personal Information Exchange**\r\n\r\n 6. Ensure to check only ***Include all certificates in the certificate path if possible*** &gt; click **Next**\r\n\r\n 7. Enter and confirm a password &gt; click **Next**\r\n\r\n 8. Choose a file name and location for the export file &gt; click **Next**\r\n\r\n 9. Click **Finish**\r\n\r\n**Step 3:  Configure PKCS12 (.pfx) file on Tomcat server**\r\n\r\n 1. Open %TOMCAT_HOME/conf/server.xml in XML or text editor\r\n\r\n 2. Find the following lines: (**In my case, I could not find below lines, So I directly jump to point 4 and add whole tag in my server.xml and change keystorefile and keystorePassword**)\r\n\r\n    `&lt;!--\r\n        &lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\r\n        maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n        clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt;\r\n        --&gt;`\r\n\r\n\r\n\r\n 3. Delete the comment markers at the beginning of the code (`&lt;!--`) and at the end of the code (`--&gt;`)\r\n 4. Immediately after sslProtocol=&quot;TLS&quot; and before /&gt;,  add the following attributes:    \r\n\r\n    `&lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\r\n        maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n        clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot;\r\n        keystoreFile=&quot;/path/to/mycert.pfx&quot;\r\n        keystoreType=&quot;PKCS12&quot;\r\n        keystorePass=&quot;your_PKCS12_password&quot; /&gt;`\r\n\r\n 5. Save server.xml\r\n 6. Restart Tomcat\r\n \r\n\r\nHope it will help somebody :) \r\n","title":"Installing pfx SSL certificate in tomcat 8.5 on windows","body":"<p>I could do it successfully. As I have mentioned that my certificate was installed on IIS web server on windows with intermediate certificate. So I follow below steps</p>\n<p><strong>Step 1: Create a Microsoft Management Console (MMC) Snap-in for managing certificates</strong></p>\n<ol>\n<li>Access the Search menu. In the search box, type <strong>mmc</strong></li>\n<li>From the <strong>Microsoft Management Console (MMC)</strong>, click  <strong>File &gt; Add/Remove Snap-in</strong></li>\n<li>From the list of snap-ins, select <strong>Certificates</strong></li>\n<li>Click <strong>Add</strong></li>\n<li>Select <strong>Computer Account</strong></li>\n<li>Click <strong>Next</strong></li>\n<li>Select <strong>Local Computer</strong> (the computer this console is running on)</li>\n<li>Click <strong>Finish</strong></li>\n<li>In the Add/Remove Snap-in window, click <strong>OK</strong></li>\n<li>Save these console settings for future use</li>\n</ol>\n<p><strong>Step 2: Export/ Back Up the certificate</strong></p>\n<ol>\n<li><p>Open the Certificates (Local Computer) snap-in you added &gt; select <strong>Personal</strong> &gt; <strong>Certificates</strong></p>\n</li>\n<li><p>Right-click certificate name &gt; select <strong>All Tasks</strong> &gt; <strong>Export</strong>.</p>\n</li>\n<li><p>The Certificate Export Wizard opens &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Select <strong>Yes, export the private key</strong> &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Select <strong>Personal Information Exchange</strong></p>\n</li>\n<li><p>Ensure to check only <em><strong>Include all certificates in the certificate path if possible</strong></em> &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Enter and confirm a password &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Choose a file name and location for the export file &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Click <strong>Finish</strong></p>\n</li>\n</ol>\n<p><strong>Step 3:  Configure PKCS12 (.pfx) file on Tomcat server</strong></p>\n<ol>\n<li><p>Open %TOMCAT_HOME/conf/server.xml in XML or text editor</p>\n</li>\n<li><p>Find the following lines: (<strong>In my case, I could not find below lines, So I directly jump to point 4 and add whole tag in my server.xml and change keystorefile and keystorePassword</strong>)</p>\n<p><code>&lt;!-- &lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot; maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot; clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt; --&gt;</code></p>\n</li>\n<li><p>Delete the comment markers at the beginning of the code (<code>&lt;!--</code>) and at the end of the code (<code>--&gt;</code>)</p>\n</li>\n<li><p>Immediately after sslProtocol=&quot;TLS&quot; and before /&gt;,  add the following attributes:</p>\n<p><code>&lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot; maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot; clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; keystoreFile=&quot;/path/to/mycert.pfx&quot; keystoreType=&quot;PKCS12&quot; keystorePass=&quot;your_PKCS12_password&quot; /&gt;</code></p>\n</li>\n<li><p>Save server.xml</p>\n</li>\n<li><p>Restart Tomcat</p>\n</li>\n</ol>\n<p>Hope it will help somebody :)</p>\n"}],"owner":{"account_id":238788,"reputation":1905,"user_id":507913,"accept_rate":83,"display_name":"Milind"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44107,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":47258830,"answer_count":2,"score":10,"last_activity_date":1691599651,"creation_date":1510058219,"question_id":47158200,"body_markdown":"I have wild card pfx certificate with its Intermediate certificate in p7b/crt format. Those certificate are installed on IIS 8.0. How to install those certificates in tomcat 8.0? Tomcat is installed on windows\r\n","title":"Installing pfx SSL certificate in tomcat 8.5 on windows","body":"<p>I have wild card pfx certificate with its Intermediate certificate in p7b/crt format. Those certificate are installed on IIS 8.0. How to install those certificates in tomcat 8.0? Tomcat is installed on windows</p>\n"},{"tags":["java","hashset"],"comments":[{"owner":{"account_id":200183,"reputation":6610,"user_id":445901,"accept_rate":80,"display_name":"SimonC"},"score":3,"creation_date":1384049876,"post_id":19885506,"comment_id":29581177,"body_markdown":"What have you tried so far?  Anything specific you are having trouble with?","body":"What have you tried so far?  Anything specific you are having trouble with?"}],"answers":[{"tags":[],"owner":{"account_id":3526709,"reputation":16307,"user_id":2947592,"accept_rate":71,"display_name":"wvdz"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1384049992,"creation_date":1384049992,"answer_id":19885535,"question_id":19885506,"body_markdown":"HashSet has the function contains() for this, since it implements the Collection interface.","title":"How can I use hash sets in java to determine if a string contains valid characters?","body":"<p>HashSet has the function contains() for this, since it implements the Collection interface.</p>\n"},{"tags":[],"owner":{"account_id":134022,"reputation":717193,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1384050059,"creation_date":1384050059,"answer_id":19885540,"question_id":19885506,"body_markdown":"You cannot compare an entire string to a `HashSet&lt;Character&gt;`, but you can do it one character at a time:\r\n\r\n    HashSet&lt;Character&gt; valid = new HashSet&lt;Character&gt;();\r\n\tvalid.add(&#39;a&#39;);\r\n\tvalid.add(&#39;d&#39;);\r\n    valid.add(&#39;f&#39;);\r\n\tboolean allOk = true;\r\n\tfor (char c : &quot;fad&quot;.toCharArray()) {\r\n\t\tif (!valid.contains(c)) {\r\n\t\t\tallOk = false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tSystem.out.println(allOk);\r\n\r\nHowever, this is not the most efficient way of doing it. A better approach would be to construct a regex with the characters that you need, and call `match()` on the string:\r\n\r\n    // Let&#39;s say x, y, and z are the valid characters\r\n    String regex = &quot;[xyz]*&quot;;\r\n    if (myString.matches(regex)) {\r\n        System.out.println(&quot;All characters in the string are in &#39;x&#39;, &#39;y&#39;, and &#39;z&#39;&quot;);\r\n    }","title":"How can I use hash sets in java to determine if a string contains valid characters?","body":"<p>You cannot compare an entire string to a <code>HashSet&lt;Character&gt;</code>, but you can do it one character at a time:</p>\n\n<pre><code>HashSet&lt;Character&gt; valid = new HashSet&lt;Character&gt;();\nvalid.add('a');\nvalid.add('d');\nvalid.add('f');\nboolean allOk = true;\nfor (char c : \"fad\".toCharArray()) {\n    if (!valid.contains(c)) {\n        allOk = false;\n        break;\n    }\n}\nSystem.out.println(allOk);\n</code></pre>\n\n<p>However, this is not the most efficient way of doing it. A better approach would be to construct a regex with the characters that you need, and call <code>match()</code> on the string:</p>\n\n<pre><code>// Let's say x, y, and z are the valid characters\nString regex = \"[xyz]*\";\nif (myString.matches(regex)) {\n    System.out.println(\"All characters in the string are in 'x', 'y', and 'z'\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691598562,"creation_date":1384050310,"answer_id":19885560,"question_id":19885506,"body_markdown":"I think you are probably over-thinking this problem.  (For instance, spending too much time thinking how to make the lexer &quot;efficient&quot; ...)\r\n\r\nThe conventional ways to test for valid / invalid characters in a lexer are:\r\n\r\n  - use a big switch statement, or \r\n\r\n  - perform a sequence of &quot;character class&quot; tests; e.g. using the result of `Character.getType(char)`\r\n\r\nOr better still, use a lexer generator.\r\n\r\n---------------\r\n\r\nUsing a HashSet is neither more efficient or more readable than a `switch`.  And the &quot;character class&quot; approach *could* be a lot more readable than both ... depending on your validation rules.","title":"How can I use hash sets in java to determine if a string contains valid characters?","body":"<p>I think you are probably over-thinking this problem.  (For instance, spending too much time thinking how to make the lexer &quot;efficient&quot; ...)</p>\n<p>The conventional ways to test for valid / invalid characters in a lexer are:</p>\n<ul>\n<li><p>use a big switch statement, or</p>\n</li>\n<li><p>perform a sequence of &quot;character class&quot; tests; e.g. using the result of <code>Character.getType(char)</code></p>\n</li>\n</ul>\n<p>Or better still, use a lexer generator.</p>\n<hr />\n<p>Using a HashSet is neither more efficient or more readable than a <code>switch</code>.  And the &quot;character class&quot; approach <em>could</em> be a lot more readable than both ... depending on your validation rules.</p>\n"}],"owner":{"account_id":3562874,"reputation":1,"user_id":2975289,"display_name":"user2975289"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691598562,"creation_date":1384049637,"question_id":19885506,"body_markdown":"I&#39;m writing a lexical analyzer and have never used hash sets. I want to take a string and make sure it&#39;s legal. I think I understand how to build the hash set with valid characters but I&#39;m not sure how to compare the string with teh hash set to ensure it contains valid characters. I can&#39;t find an example anywhere. Can someone point me to code that would do this?","title":"How can I use hash sets in java to determine if a string contains valid characters?","body":"<p>I'm writing a lexical analyzer and have never used hash sets. I want to take a string and make sure it's legal. I think I understand how to build the hash set with valid characters but I'm not sure how to compare the string with teh hash set to ensure it contains valid characters. I can't find an example anywhere. Can someone point me to code that would do this?</p>\n"},{"tags":["java","spring","mongodb","spring-boot"],"comments":[{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1691610249,"post_id":76867446,"comment_id":135516331,"body_markdown":"I have no clue about Docker, but I assume the user is created in database `documents` rather than `admin`. See https://stackoverflow.com/questions/63754742/authentication-failure-while-trying-to-save-to-mongodb/63755470#63755470","body":"I have no clue about Docker, but I assume the user is created in database <code>documents</code> rather than <code>admin</code>. See <a href=\"https://stackoverflow.com/questions/63754742/authentication-failure-while-trying-to-save-to-mongodb/63755470#63755470\" title=\"authentication failure while trying to save to mongodb\">stackoverflow.com/questions/63754742/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":16780485,"reputation":453,"user_id":12130813,"display_name":"arevilla009"},"score":0,"creation_date":1691595843,"post_id":76868418,"comment_id":135513759,"body_markdown":"Hey @Hermann Steidel, thanks for your reply. I just tried initializing db when running docker instance and with both cases, with uri and properties separately, but the error persists. Any idea what could be?","body":"Hey @Hermann Steidel, thanks for your reply. I just tried initializing db when running docker instance and with both cases, with uri and properties separately, but the error persists. Any idea what could be?"},{"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"score":0,"creation_date":1691596940,"post_id":76868418,"comment_id":135514007,"body_markdown":"Just a shot in the dark but, try changing the username from `root` to something else like `admin`. You&#39;ll have to do it on the container as well of course!","body":"Just a shot in the dark but, try changing the username from <code>root</code> to something else like <code>admin</code>. You&#39;ll have to do it on the container as well of course!"},{"owner":{"account_id":16780485,"reputation":453,"user_id":12130813,"display_name":"arevilla009"},"score":0,"creation_date":1691598663,"post_id":76868418,"comment_id":135514396,"body_markdown":"Tried but the problem persists. I tried to initialize database manually once the container is running (code in question edited), but nothing :(","body":"Tried but the problem persists. I tried to initialize database manually once the container is running (code in question edited), but nothing :("},{"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"score":0,"creation_date":1691599334,"post_id":76868418,"comment_id":135514524,"body_markdown":"Looks like there might a bug in 3.1.0? https://github.com/spring-projects/spring-boot/issues/35632\n\nTry moving to Spring 3.1.1. Worth a shot.","body":"Looks like there might a bug in 3.1.0? <a href=\"https://github.com/spring-projects/spring-boot/issues/35632\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/35632</a>  Try moving to Spring 3.1.1. Worth a shot."},{"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"score":0,"creation_date":1691599531,"post_id":76868418,"comment_id":135514565,"body_markdown":"The only other thing I can think of is in the line of this post: https://stackoverflow.com/questions/39086471/authentication-error-when-accessing-mongodb-through-spring-boot-app\n\nWhere someone commented they needed to add `?authSource=admin&amp;authMechanism=SCRAM-SHA-1` to the URI. However, based on the Mongo Documentation `SCRAM-SHA-256` is the default value. So you might want to try both.  https://www.mongodb.com/docs/drivers/go/current/fundamentals/auth/#:~:text=SCRAM%2DSHA%2D256%20is%20the,algorithm%2C%20to%20authenticate%20your%20user.","body":"The only other thing I can think of is in the line of this post: <a href=\"https://stackoverflow.com/questions/39086471/authentication-error-when-accessing-mongodb-through-spring-boot-app\" title=\"authentication error when accessing mongodb through spring boot app\">stackoverflow.com/questions/39086471/&hellip;</a>  Where someone commented they needed to add <code>?authSource=admin&amp;authMechanism=SCRAM-SHA-1</code> to the URI. However, based on the Mongo Documentation <code>SCRAM-SHA-256</code> is the default value. So you might want to try both.  <a href=\"https://www.mongodb.com/docs/drivers/go/current/fundamentals/auth/#:~:text=SCRAM%2DSHA%2D256%20is%20the,algorithm%2C%20to%20authenticate%20your%20user\" rel=\"nofollow noreferrer\">mongodb.com/docs/drivers/go/current/fundamentals/auth/&hellip;</a>."},{"owner":{"account_id":16780485,"reputation":453,"user_id":12130813,"display_name":"arevilla009"},"score":0,"creation_date":1691683859,"post_id":76868418,"comment_id":135527850,"body_markdown":"Hey I finally found the problem, it was that the port 27107 was already used by another service, that happened when the machine turned on. So when I was trying to connect, it was trying to connect to another mongo instance with other credentials not same of properties file. Here is the issue: https://www.mongodb.com/community/forums/t/mongodb-authentication-failed-with-spring-data-uri/109256/12","body":"Hey I finally found the problem, it was that the port 27107 was already used by another service, that happened when the machine turned on. So when I was trying to connect, it was trying to connect to another mongo instance with other credentials not same of properties file. Here is the issue: <a href=\"https://www.mongodb.com/community/forums/t/mongodb-authentication-failed-with-spring-data-uri/109256/12\" rel=\"nofollow noreferrer\">mongodb.com/community/forums/t/&hellip;</a>"},{"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"score":0,"creation_date":1691686698,"post_id":76868418,"comment_id":135528379,"body_markdown":"Interest, if that was the case, I would have suspected the `docker run` command to fail because the port was already in use. Glad you sorted it out though!","body":"Interest, if that was the case, I would have suspected the <code>docker run</code> command to fail because the port was already in use. Glad you sorted it out though!"}],"tags":[],"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691588975,"creation_date":1691588975,"answer_id":76868418,"question_id":76867446,"body_markdown":"What could be happening here is that you could be facing a configuration mix up.\r\n\r\n 1. Either use all the properties separately and let Spring set things up for you.\r\n ```\r\nspring.data.mongodb.host=localhost\r\nspring.data.mongodb.port=27017\r\nspring.data.mongodb.database=documents\r\nspring.data.mongodb.username=root\r\nspring.data.mongodb.password=password\r\nspring.data.mongodb.authentication-database=admin\r\n```\r\n\r\nor\r\n\r\n 2. Just use the uri.\r\n\r\n```\r\nspring.data.mongodb.uri=mongodb://root:password@localhost:27017/documents?authSource=admin\r\n```\r\n\r\nAlso for good measure, you might want to also intialize your DB when you run the Docker instance.\r\n\r\n```\r\n-e MONGO_INITDB_DATABASE=documents\r\n```\r\n","title":"Error authentication to MongoDB - Exception authenticating MongoCredential","body":"<p>What could be happening here is that you could be facing a configuration mix up.</p>\n<ol>\n<li>Either use all the properties separately and let Spring set things up for you.</li>\n</ol>\n<pre><code>spring.data.mongodb.host=localhost\nspring.data.mongodb.port=27017\nspring.data.mongodb.database=documents\nspring.data.mongodb.username=root\nspring.data.mongodb.password=password\nspring.data.mongodb.authentication-database=admin\n</code></pre>\n<p>or</p>\n<ol start=\"2\">\n<li>Just use the uri.</li>\n</ol>\n<pre><code>spring.data.mongodb.uri=mongodb://root:password@localhost:27017/documents?authSource=admin\n</code></pre>\n<p>Also for good measure, you might want to also intialize your DB when you run the Docker instance.</p>\n<pre><code>-e MONGO_INITDB_DATABASE=documents\n</code></pre>\n"}],"owner":{"account_id":16780485,"reputation":453,"user_id":12130813,"display_name":"arevilla009"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76868418,"answer_count":1,"score":0,"last_activity_date":1691598497,"creation_date":1691581381,"question_id":76867446,"body_markdown":"Just working locally on a Windows machine, with a Java Spring Boot 3.1.0 app and a latest mongo db version, and getting failure when connecting the app with database.\r\n\r\nThe db is deployed locally with the next docker command:\r\n```\r\ndocker run -d -p 27017:27017 --name mongo-db -e MONGO_INITDB_ROOT_USERNAME=adrian -e MONGO_INITDB_ROOT_PASSWORD=password -e MONGO_INITDB_DATABASE=documents mongo:latest\r\n```\r\nAnd the app has next connection properties to the database:\r\n```\r\nspring.data.mongodb.host=localhost\r\nspring.data.mongodb.port=27017\r\nspring.data.mongodb.database=documents\r\nspring.data.mongodb.username=adrian\r\nspring.data.mongodb.password=password\r\nspring.data.mongodb.authentication-database=admin\r\n```\r\nOr using uri:\r\n```\r\nspring.data.mongodb.uri=mongodb://adrian:password@localhost:27017/documents?authSource=admin\r\n```\r\nWhen any operation is performed through the database, this next error is printed:\r\n```\r\norg.springframework.data.mongodb.UncategorizedMongoDbException: Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName=&#39;adrian&#39;, source=&#39;documents&#39;, password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}\r\n```\r\n\r\nAlso tried to create database manually after running the container, and then initializing the app, but the problem persists:\r\n```\r\ndocker exec -it dd1b012c0e1a /bin/bash\r\nuse admin\r\ndb.auth(&#39;adrian&#39;, &#39;password&#39;)\r\nuse documents\r\n```\r\nAnyone knows, which is the source of the problem?","title":"Error authentication to MongoDB - Exception authenticating MongoCredential","body":"<p>Just working locally on a Windows machine, with a Java Spring Boot 3.1.0 app and a latest mongo db version, and getting failure when connecting the app with database.</p>\n<p>The db is deployed locally with the next docker command:</p>\n<pre><code>docker run -d -p 27017:27017 --name mongo-db -e MONGO_INITDB_ROOT_USERNAME=adrian -e MONGO_INITDB_ROOT_PASSWORD=password -e MONGO_INITDB_DATABASE=documents mongo:latest\n</code></pre>\n<p>And the app has next connection properties to the database:</p>\n<pre><code>spring.data.mongodb.host=localhost\nspring.data.mongodb.port=27017\nspring.data.mongodb.database=documents\nspring.data.mongodb.username=adrian\nspring.data.mongodb.password=password\nspring.data.mongodb.authentication-database=admin\n</code></pre>\n<p>Or using uri:</p>\n<pre><code>spring.data.mongodb.uri=mongodb://adrian:password@localhost:27017/documents?authSource=admin\n</code></pre>\n<p>When any operation is performed through the database, this next error is printed:</p>\n<pre><code>org.springframework.data.mongodb.UncategorizedMongoDbException: Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName='adrian', source='documents', password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}\n</code></pre>\n<p>Also tried to create database manually after running the container, and then initializing the app, but the problem persists:</p>\n<pre><code>docker exec -it dd1b012c0e1a /bin/bash\nuse admin\ndb.auth('adrian', 'password')\nuse documents\n</code></pre>\n<p>Anyone knows, which is the source of the problem?</p>\n"},{"tags":["java","spring-boot","github","camunda","tasklist"],"answers":[{"comments":[{"owner":{"account_id":18258323,"reputation":109,"user_id":13291702,"display_name":"Neha"},"score":0,"creation_date":1682663866,"post_id":76126067,"comment_id":134254061,"body_markdown":"Thanks for response @rob2universe. I am using io.camunda-zeebe-client-kava-8.19,io.camunda-camunda-tasklist-client-java-1.6.2,io.camunda-spring-zeebe-starter-8.1.17,camunda modeler 8.1 ,I am not able to find tasklist client java dependency version to 8.1 anywhere. Please suggest","body":"Thanks for response @rob2universe. I am using io.camunda-zeebe-client-kava-8.19,io.camunda-camunda-tasklis&zwnj;&#8203;t-client-java-1.6.2,&zwnj;&#8203;io.camunda-spring-ze&zwnj;&#8203;ebe-starter-8.1.17,c&zwnj;&#8203;amunda modeler 8.1 ,I am not able to find tasklist client java dependency version to 8.1 anywhere. Please suggest"},{"owner":{"account_id":1612994,"reputation":7243,"user_id":1491439,"display_name":"rob2universe"},"score":0,"creation_date":1682693239,"post_id":76126067,"comment_id":134260604,"body_markdown":"These are all client side. What version are you using on the sever side? This needs to be upgraded. In SaaS use the upgrade feature in self-managed follow upgrade instruction or use fresh install","body":"These are all client side. What version are you using on the sever side? This needs to be upgraded. In SaaS use the upgrade feature in self-managed follow upgrade instruction or use fresh install"}],"tags":[],"owner":{"account_id":1612994,"reputation":7243,"user_id":1491439,"display_name":"rob2universe"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682652409,"creation_date":1682652409,"answer_id":76126067,"question_id":76109610,"body_markdown":"Have you checked if the versions of the client library and the servers side API match? It looks like the client lib is including processDefinitionId, but the the Taskquery API does not contain it.\r\n\r\nVersion 8.1 an 8.2 contains processDefinitionId:\r\n\r\n    input TaskQuery {\r\n      state: TaskState\r\n      assigned: Boolean\r\n      assignee: String\r\n      candidateGroup: String\r\n      candidateUser: String\r\n      processDefinitionId: String\r\n      processInstanceId: String\r\n      followUpDate: DateFilter\r\n      dueDate: DateFilter\r\n      pageSize: Int\r\n      taskDefinitionId: String\r\n      searchAfter: [String!]\r\n      searchAfterOrEqual: [String!]\r\n      searchBefore: [String!]\r\n      searchBeforeOrEqual: [String!]\r\n      sort: [TaskOrderBy]\r\n    }\r\n\r\nhttps://docs.camunda.io/docs/apis-tools/tasklist-api/inputs/task-query/\r\n\r\nVersion 8.0 does not contain it:\r\n\r\n    type TaskQuery {\r\n      state: TaskState\r\n      assigned: Boolean\r\n      assignee: String\r\n      candidateGroup: String\r\n      pageSize: Int\r\n      taskDefinitionId: String\r\n      searchAfter: [String!]\r\n      searchAfterOrEqual: [String!]\r\n      searchBefore: [String!]\r\n      searchBeforeOrEqual: [String!]\r\n    }\r\n\r\nhttps://docs.camunda.io/docs/8.0/apis-tools/tasklist-api/inputs/task-query/\r\n\r\n\r\n=&gt; Upgrade your server side and try again","title":"How to get tasks from process instance id using camundatasklistclient api in java camunda 8","body":"<p>Have you checked if the versions of the client library and the servers side API match? It looks like the client lib is including processDefinitionId, but the the Taskquery API does not contain it.</p>\n<p>Version 8.1 an 8.2 contains processDefinitionId:</p>\n<pre><code>input TaskQuery {\n  state: TaskState\n  assigned: Boolean\n  assignee: String\n  candidateGroup: String\n  candidateUser: String\n  processDefinitionId: String\n  processInstanceId: String\n  followUpDate: DateFilter\n  dueDate: DateFilter\n  pageSize: Int\n  taskDefinitionId: String\n  searchAfter: [String!]\n  searchAfterOrEqual: [String!]\n  searchBefore: [String!]\n  searchBeforeOrEqual: [String!]\n  sort: [TaskOrderBy]\n}\n</code></pre>\n<p><a href=\"https://docs.camunda.io/docs/apis-tools/tasklist-api/inputs/task-query/\" rel=\"nofollow noreferrer\">https://docs.camunda.io/docs/apis-tools/tasklist-api/inputs/task-query/</a></p>\n<p>Version 8.0 does not contain it:</p>\n<pre><code>type TaskQuery {\n  state: TaskState\n  assigned: Boolean\n  assignee: String\n  candidateGroup: String\n  pageSize: Int\n  taskDefinitionId: String\n  searchAfter: [String!]\n  searchAfterOrEqual: [String!]\n  searchBefore: [String!]\n  searchBeforeOrEqual: [String!]\n}\n</code></pre>\n<p><a href=\"https://docs.camunda.io/docs/8.0/apis-tools/tasklist-api/inputs/task-query/\" rel=\"nofollow noreferrer\">https://docs.camunda.io/docs/8.0/apis-tools/tasklist-api/inputs/task-query/</a></p>\n<p>=&gt; Upgrade your server side and try again</p>\n"},{"tags":[],"owner":{"account_id":8993036,"reputation":17,"user_id":6704334,"display_name":"Abdul Renish"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691596699,"creation_date":1691596699,"answer_id":76869466,"question_id":76109610,"body_markdown":"The Camunda 8 Tasklist client API seems to be encountering issues without a viable resolution from the Camunda team. In lieu of a functional fix, the suggested approach is to manually obtain a token using HTTP, followed by retrieving a session ID, and consequently employing the REST API for desired operations. This alternate method involves obtaining authentication through token-based processes and utilizing the REST API to facilitate the required functionalities.","title":"How to get tasks from process instance id using camundatasklistclient api in java camunda 8","body":"<p>The Camunda 8 Tasklist client API seems to be encountering issues without a viable resolution from the Camunda team. In lieu of a functional fix, the suggested approach is to manually obtain a token using HTTP, followed by retrieving a session ID, and consequently employing the REST API for desired operations. This alternate method involves obtaining authentication through token-based processes and utilizing the REST API to facilitate the required functionalities.</p>\n"}],"owner":{"account_id":18258323,"reputation":109,"user_id":13291702,"display_name":"Neha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":702,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691596699,"creation_date":1682504154,"question_id":76109610,"body_markdown":"*I am using camunda 8 and refering below link for getting task from processinstance id*\r\nhttps://github.com/camunda-community-hub/camunda-tasklist-client-java\r\n\r\nI have added the dependency mentioned in link.\r\nMy simpleauthentication is also done.\r\nCamundatasklistclient object is also initialised.\r\nBut when running below step it shows error :\r\nimpleAuthentication sa = new SimpleAuthentication(&quot;demo&quot;, &quot;demo&quot;);\r\n\r\n//shouldReturnVariables will change the default behaviour for the client to query variables along with tasks.\r\n\r\n    CamundaTaskListClient client = new CamundaTaskListClient.Builder().taskListUrl(&quot;http://localhost:8081&quot;).shouldReturnVariables().authentication(sa).build();\r\n    //get tasks from a process instance (TaskSearch can take many more parameters)\r\n    TaskSearch ts = new TaskSearch().setProcessInstanceId(&quot;2251799818839086&quot;);\r\n    TaskList tasksFromInstance = client.getTasks(ts); // this statement gives error at runtime \r\n\r\nError : \r\nio.camunda.tasklist.exception.TaskListException:Error(message=Validation error of type wrongtype argument query with value &#39;ObjectValue{objectfields{objectfields=candidategroup, assignee, assigned,state,processDefinitionId,processInstanceId,pagesize,search after,search before,contains a filed not in Taskquery : processDefinitionId @ tasks \r\n\r\nHow to resolve this error ? \r\n\r\n\r\n","title":"How to get tasks from process instance id using camundatasklistclient api in java camunda 8","body":"<p><em>I am using camunda 8 and refering below link for getting task from processinstance id</em>\n<a href=\"https://github.com/camunda-community-hub/camunda-tasklist-client-java\" rel=\"nofollow noreferrer\">https://github.com/camunda-community-hub/camunda-tasklist-client-java</a></p>\n<p>I have added the dependency mentioned in link.\nMy simpleauthentication is also done.\nCamundatasklistclient object is also initialised.\nBut when running below step it shows error :\nimpleAuthentication sa = new SimpleAuthentication(&quot;demo&quot;, &quot;demo&quot;);</p>\n<p>//shouldReturnVariables will change the default behaviour for the client to query variables along with tasks.</p>\n<pre><code>CamundaTaskListClient client = new CamundaTaskListClient.Builder().taskListUrl(&quot;http://localhost:8081&quot;).shouldReturnVariables().authentication(sa).build();\n//get tasks from a process instance (TaskSearch can take many more parameters)\nTaskSearch ts = new TaskSearch().setProcessInstanceId(&quot;2251799818839086&quot;);\nTaskList tasksFromInstance = client.getTasks(ts); // this statement gives error at runtime \n</code></pre>\n<p>Error :\nio.camunda.tasklist.exception.TaskListException:Error(message=Validation error of type wrongtype argument query with value 'ObjectValue{objectfields{objectfields=candidategroup, assignee, assigned,state,processDefinitionId,processInstanceId,pagesize,search after,search before,contains a filed not in Taskquery : processDefinitionId @ tasks</p>\n<p>How to resolve this error ?</p>\n"},{"tags":["java","time","datetime-format","tai-time"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1691594320,"post_id":76869094,"comment_id":135513384,"body_markdown":"Parse them as if they&#39;re UTC, then add the appropriate number of seconds based on the date? (Presumably as these are TAI values, you don&#39;t need to worry about them ever representing leap seconds themselves.)","body":"Parse them as if they&#39;re UTC, then add the appropriate number of seconds based on the date? (Presumably as these are TAI values, you don&#39;t need to worry about them ever representing leap seconds themselves.)"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691596883,"post_id":76869094,"comment_id":135513991,"body_markdown":"How do the [`convert…`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/UtcRules.html) methods in *ThreeTen-Extra* not accomplish your goal?","body":"How do the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/UtcRules.html\" rel=\"nofollow noreferrer\"><code>convert…</code></a> methods in <i>ThreeTen-Extra</i> not accomplish your goal?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1691597049,"post_id":76869094,"comment_id":135514036,"body_markdown":"@JonSkeet At first glance, it seems the [`convert…`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/UtcRules.html)  methods in *ThreeTen-Extra* do just that, using the leap second count in effect at the moment of interest.","body":"@JonSkeet At first glance, it seems the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/UtcRules.html\" rel=\"nofollow noreferrer\"><code>convert…</code></a>  methods in <i>ThreeTen-Extra</i> do just that, using the leap second count in effect at the moment of interest."},{"owner":{"account_id":29192698,"reputation":11,"user_id":22364506,"display_name":"gumitmu"},"score":0,"creation_date":1691653818,"post_id":76869094,"comment_id":135521310,"body_markdown":"The conversion methods would work, if I were able to get a TAI Instant with the correct date and time. The problem is, that the creation of the TAI Instant needs a different input format, and the creation of a UTC Instant with the same input would falsify the time, since the leap second difference would be ignored. But I guess I could use the getLeapSecondsAdjustment method  to get the leap seconds to add as JonSkeet suggested.  Thank you all for helping.","body":"The conversion methods would work, if I were able to get a TAI Instant with the correct date and time. The problem is, that the creation of the TAI Instant needs a different input format, and the creation of a UTC Instant with the same input would falsify the time, since the leap second difference would be ignored. But I guess I could use the getLeapSecondsAdjustment method  to get the leap seconds to add as JonSkeet suggested.  Thank you all for helping."},{"owner":{"account_id":29192698,"reputation":11,"user_id":22364506,"display_name":"gumitmu"},"score":0,"creation_date":1691656422,"post_id":76869094,"comment_id":135521810,"body_markdown":"Didn&#39;t use the getLeapSecondAdjustment but getTaiOffset method.","body":"Didn&#39;t use the getLeapSecondAdjustment but getTaiOffset method."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691662606,"post_id":76869094,"comment_id":135523016,"body_markdown":"Does this work using Three-Ten Extra? (1) Define the TAI epoch as `TaiInstant taiEpoch = TaiInstant.ofTaiSeconds(0, 0);`. (2) Calculate the duration since the TAI apoch on the local time line since it hasn’t got leap seconds either. (2.a) `LocalDateTime taiEpochLocal = taiEpoch.toInstant().atOffset(ZoneOffset.UTC).toLocalDateTime();` (2.b) `Duration durSinceTaiEpoch = Duration.between(taiEpochLocal, LocalDateTime.parse(&quot;2016-01-01T12:00:00.0&quot;));`. (3) Add the duration to the epoch: `TaiInstant taiTimestamp = taiEpoch.plus(durSinceTaiEpoch);`.","body":"Does this work using Three-Ten Extra? (1) Define the TAI epoch as <code>TaiInstant taiEpoch = TaiInstant.ofTaiSeconds(0, 0);</code>. (2) Calculate the duration since the TAI apoch on the local time line since it hasn’t got leap seconds either. (2.a) <code>LocalDateTime taiEpochLocal = taiEpoch.toInstant().atOffset(ZoneOffset.UTC).toLocalDateTim&zwnj;&#8203;e();</code> (2.b) <code>Duration durSinceTaiEpoch = Duration.between(taiEpochLocal, LocalDateTime.parse(&quot;2016-01-01T12:00:00.0&quot;));</code>. (3) Add the duration to the epoch: <code>TaiInstant taiTimestamp = taiEpoch.plus(durSinceTaiEpoch);</code>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691662713,"post_id":76869094,"comment_id":135523038,"body_markdown":"Result from my attempt using the example input string from the previous comment is `1830340810.000000000s(TAI)` corresponding to `2016-01-01T11:59:34Z` UTC. It looks 26 seconds early compared to the input string because there were 26 leap seconds from 1972 to 2016.","body":"Result from my attempt using the example input string from the previous comment is <code>1830340810.000000000s(TAI)</code> corresponding to <code>2016-01-01T11:59:34Z</code> UTC. It looks 26 seconds early compared to the input string because there were 26 leap seconds from 1972 to 2016."}],"owner":{"account_id":29192698,"reputation":11,"user_id":22364506,"display_name":"gumitmu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691596659,"creation_date":1691593714,"question_id":76869094,"body_markdown":"In my Java task I get some timestamps in Strings in the format of: YYYY-MM-ddTHH:mm:ss.S.\r\nThese timestamps are supposed to be interpreted as [TAI time (International atomic time)][1]. \r\n\r\nI need to compare these timestamps to others, some of which might be [UTC][2] times. Therefore I want to convert the TAI times to UTC times (or UNIX time). Now my problem is, that I can&#39;t find an option which allows me to parse the timestamp Strings without interpreting the (TAI) time in a wrong timescale. \r\n\r\nFor example using the standard LocalDateTime would interprete the timestamp as time including leap seconds, if I understood it correctly. Now I could try adding the seconds via an ZoneOffset, but I don&#39;t know how I would calculate these without already knowing/ having the correct date and time in either timescale.\r\n\r\nI also looked at [ThreeTen-Extra][3], which [supports TAI time][4], but here they only allow parsing from TAI seconds. I am not able to change the input format to get the representation as TAI seconds.\r\n\r\nHow should I go forward from this?\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/International_Atomic_Time\r\n  [2]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time\r\n  [3]: https://www.threeten.org/threeten-extra/\r\n  [4]: https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/package-summary.html","title":"TAI time from String with date time representation","body":"<p>In my Java task I get some timestamps in Strings in the format of: YYYY-MM-ddTHH:mm:ss.S.\nThese timestamps are supposed to be interpreted as <a href=\"https://en.wikipedia.org/wiki/International_Atomic_Time\" rel=\"nofollow noreferrer\">TAI time (International atomic time)</a>.</p>\n<p>I need to compare these timestamps to others, some of which might be <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> times. Therefore I want to convert the TAI times to UTC times (or UNIX time). Now my problem is, that I can't find an option which allows me to parse the timestamp Strings without interpreting the (TAI) time in a wrong timescale.</p>\n<p>For example using the standard LocalDateTime would interprete the timestamp as time including leap seconds, if I understood it correctly. Now I could try adding the seconds via an ZoneOffset, but I don't know how I would calculate these without already knowing/ having the correct date and time in either timescale.</p>\n<p>I also looked at <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\">ThreeTen-Extra</a>, which <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/package-summary.html\" rel=\"nofollow noreferrer\">supports TAI time</a>, but here they only allow parsing from TAI seconds. I am not able to change the input format to get the representation as TAI seconds.</p>\n<p>How should I go forward from this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6718742,"reputation":321,"user_id":5179636,"display_name":"colouredmirrorball"},"score":0,"creation_date":1691597518,"post_id":76869403,"comment_id":135514150,"body_markdown":"What is the error?","body":"What is the error?"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1691597666,"post_id":76869403,"comment_id":135514189,"body_markdown":"At a guess, you&#39;re trying to compile with a version of Java that doesn&#39;t also work with the version of Android you&#39;re using.","body":"At a guess, you&#39;re trying to compile with a version of Java that doesn&#39;t also work with the version of Android you&#39;re using."},{"owner":{"account_id":29112314,"reputation":1,"user_id":22301840,"display_name":"Ruben iraheta"},"score":0,"creation_date":1691597777,"post_id":76869403,"comment_id":135514218,"body_markdown":"symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)","body":"symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)"}],"owner":{"account_id":29112314,"reputation":1,"user_id":22301840,"display_name":"Ruben iraheta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691651305,"answer_count":0,"score":0,"last_activity_date":1691596454,"creation_date":1691596191,"question_id":76869403,"body_markdown":"I have the following string that I want to use to download the google maps route with `retrofit2`, however it generates the error:  \r\n\r\n    symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)\r\n    \r\n    String requestUrl = &quot;https://maps.googleapis.com/maps/api/directions/json?&quot;\r\n                            + &quot;mode=driving&amp;&quot; + &quot;transit_routing_preference=less_driving&amp;&quot;\r\n                            + &quot;origin=&quot; + mLastLocation.getLatitude() + &quot;,&quot;\r\n                            + mLastLocation.getLongitude() + &quot;&amp;&quot; + &quot;destination=&quot;\r\n                            + &quot;13.767152&quot; + &quot;,&quot; + &quot;-89.655844&quot; + &quot;&amp;&quot;\r\n                            + &quot;key=&quot; + getResources().getString(R.string.google_directions_key);\r\n\r\n                Log.d(&quot;URL&quot;, requestUrl);\r\n\r\nY need route from google API","title":"Java 9 cant makeConcatWithConstants(Lookup,String,MethodType,String)","body":"<p>I have the following string that I want to use to download the google maps route with <code>retrofit2</code>, however it generates the error:</p>\n<pre><code>symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)\n\nString requestUrl = &quot;https://maps.googleapis.com/maps/api/directions/json?&quot;\n                        + &quot;mode=driving&amp;&quot; + &quot;transit_routing_preference=less_driving&amp;&quot;\n                        + &quot;origin=&quot; + mLastLocation.getLatitude() + &quot;,&quot;\n                        + mLastLocation.getLongitude() + &quot;&amp;&quot; + &quot;destination=&quot;\n                        + &quot;13.767152&quot; + &quot;,&quot; + &quot;-89.655844&quot; + &quot;&amp;&quot;\n                        + &quot;key=&quot; + getResources().getString(R.string.google_directions_key);\n\n            Log.d(&quot;URL&quot;, requestUrl);\n</code></pre>\n<p>Y need route from google API</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691595698,"creation_date":1691595698,"answer_id":76869337,"question_id":76868700,"body_markdown":"Put it in a utility method and call it from each activity that uses it:\r\n\r\n```\r\npublic final class ActivityLayouts {\r\n\r\n    private ActivityLayouts() {}\r\n\r\n    public static void applyEdgeToEdge(ComponentActivity activity, int fittedViewId) {\r\n        // Set window to full screen\r\n        WindowCompat.setDecorFitsSystemWindows(activity.getWindow(), false);\r\n\r\n        View view = activity.findViewById(fittedViewId);\r\n\r\n        // Set Listener\r\n        ViewCompat.setOnApplyWindowInsetsListener(view, (v, windowInsets) -&gt; {\r\n            Insets insets = windowInsets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            ViewGroup.MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) v.getLayoutParams();\r\n            mlp.leftMargin = insets.left;\r\n            mlp.bottomMargin = insets.bottom;\r\n            mlp.rightMargin = insets.right;\r\n            v.setLayoutParams(mlp);\r\n            return windowInsets;\r\n        });\r\n    }\r\n```\r\n\r\nThen in each activity, you call it:\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        ActivityLayouts.applyEdgeToEdge(this, R.id.activity_main);\r\n    }\r\n\r\n---\r\n\r\nSome people might suggest creating a BaseActivity class that you extend to make your other classes. Here are some writings about why you might not want to use that strategy:\r\n\r\n * [Composition over inheritance](https://en.wikipedia.org/wiki/Composition_over_inheritance)\r\n * [Android Nightmares &#128561; | Base classes](https://levelup.gitconnected.com/android-nightmares-base-classes-ccf55dbd0604)\r\n * [Say no to BaseActivity and BaseFragment](https://proandroiddev.com/say-no-to-baseactivity-and-basefragment-83b156ed8998)\r\n * [BaseActivity and BaseFragment are monsters](https://proandroiddev.com/baseactivity-and-basefragment-are-monsters-5cda31639938)","title":"Set insets for all activities (Android)","body":"<p>Put it in a utility method and call it from each activity that uses it:</p>\n<pre><code>public final class ActivityLayouts {\n\n    private ActivityLayouts() {}\n\n    public static void applyEdgeToEdge(ComponentActivity activity, int fittedViewId) {\n        // Set window to full screen\n        WindowCompat.setDecorFitsSystemWindows(activity.getWindow(), false);\n\n        View view = activity.findViewById(fittedViewId);\n\n        // Set Listener\n        ViewCompat.setOnApplyWindowInsetsListener(view, (v, windowInsets) -&gt; {\n            Insets insets = windowInsets.getInsets(WindowInsetsCompat.Type.systemBars());\n            ViewGroup.MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) v.getLayoutParams();\n            mlp.leftMargin = insets.left;\n            mlp.bottomMargin = insets.bottom;\n            mlp.rightMargin = insets.right;\n            v.setLayoutParams(mlp);\n            return windowInsets;\n        });\n    }\n</code></pre>\n<p>Then in each activity, you call it:</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    ActivityLayouts.applyEdgeToEdge(this, R.id.activity_main);\n}\n</code></pre>\n<hr />\n<p>Some people might suggest creating a BaseActivity class that you extend to make your other classes. Here are some writings about why you might not want to use that strategy:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">Composition over inheritance</a></li>\n<li><a href=\"https://levelup.gitconnected.com/android-nightmares-base-classes-ccf55dbd0604\" rel=\"nofollow noreferrer\">Android Nightmares 😱 | Base classes</a></li>\n<li><a href=\"https://proandroiddev.com/say-no-to-baseactivity-and-basefragment-83b156ed8998\" rel=\"nofollow noreferrer\">Say no to BaseActivity and BaseFragment</a></li>\n<li><a href=\"https://proandroiddev.com/baseactivity-and-basefragment-are-monsters-5cda31639938\" rel=\"nofollow noreferrer\">BaseActivity and BaseFragment are monsters</a></li>\n</ul>\n"}],"owner":{"account_id":18069948,"reputation":19,"user_id":13134851,"display_name":"Dynamic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76869337,"answer_count":1,"score":0,"last_activity_date":1691595698,"creation_date":1691590854,"question_id":76868700,"body_markdown":"I&#39;m trying to understand how to create an edge-to-edge layout in android studio with java although I find that I am having to duplicate the ViewCompat.setOnApplyWindowInsetListener() for every activity. Is there a way of making sure this applies to all activities without duplicating code across each activity?\r\n\r\nThis is currently how I&#39;m setting the insets:\r\n```\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        // Set window to full screen\r\n        WindowCompat.setDecorFitsSystemWindows(getWindow(), false);\r\n\r\n        // Get view activity_main.xml from id\r\n        View view = findViewById(R.id.activity_main);\r\n\r\n        // Set Listener\r\n        ViewCompat.setOnApplyWindowInsetsListener(view, (v, windowInsets) -&gt; {\r\n            Insets insets = windowInsets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            ViewGroup.MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) v.getLayoutParams();\r\n            mlp.leftMargin = insets.left;\r\n            mlp.bottomMargin = insets.bottom;\r\n            mlp.rightMargin = insets.right;\r\n            v.setLayoutParams(mlp);\r\n            return windowInsets;\r\n        });\r\n    }\r\n```\r\n\r\nThanks\r\n\r\n","title":"Set insets for all activities (Android)","body":"<p>I'm trying to understand how to create an edge-to-edge layout in android studio with java although I find that I am having to duplicate the ViewCompat.setOnApplyWindowInsetListener() for every activity. Is there a way of making sure this applies to all activities without duplicating code across each activity?</p>\n<p>This is currently how I'm setting the insets:</p>\n<pre><code>    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // Set window to full screen\n        WindowCompat.setDecorFitsSystemWindows(getWindow(), false);\n\n        // Get view activity_main.xml from id\n        View view = findViewById(R.id.activity_main);\n\n        // Set Listener\n        ViewCompat.setOnApplyWindowInsetsListener(view, (v, windowInsets) -&gt; {\n            Insets insets = windowInsets.getInsets(WindowInsetsCompat.Type.systemBars());\n            ViewGroup.MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) v.getLayoutParams();\n            mlp.leftMargin = insets.left;\n            mlp.bottomMargin = insets.bottom;\n            mlp.rightMargin = insets.right;\n            v.setLayoutParams(mlp);\n            return windowInsets;\n        });\n    }\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":2522926,"reputation":30310,"user_id":2192903,"accept_rate":73,"display_name":"Arnaud Denoyelle"},"score":0,"creation_date":1525444479,"post_id":50177385,"comment_id":87371957,"body_markdown":"Honestly, I don&#39;t think that you will ever join 1 million strings. So prefer the most readable, regardless of the performance.","body":"Honestly, I don&#39;t think that you will ever join 1 million strings. So prefer the most readable, regardless of the performance."},{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":1,"creation_date":1525444824,"post_id":50177385,"comment_id":87372184,"body_markdown":"The best method is probably to [use `String.join`](https://stackoverflow.com/questions/1751844/java-convert-liststring-to-a-string). But you should probably [benchmark](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java).","body":"The best method is probably to <a href=\"https://stackoverflow.com/questions/1751844/java-convert-liststring-to-a-string\">use <code>String.join</code></a>. But you should probably <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\">benchmark</a>."},{"owner":{"account_id":1597009,"reputation":5417,"user_id":1478852,"accept_rate":63,"display_name":"Sagar"},"score":0,"creation_date":1525444907,"post_id":50177385,"comment_id":87372236,"body_markdown":"@JaroslawPawlak Yes, I looked at the code and I am still not sure about the performance, that&#39;s why raised the question. Plus I am saving the time of a lot of devs who might have the same question in future. Hope that justifies the question. And I bet you too will learn something new with the discussion that&#39;s happening here!","body":"@JaroslawPawlak Yes, I looked at the code and I am still not sure about the performance, that&#39;s why raised the question. Plus I am saving the time of a lot of devs who might have the same question in future. Hope that justifies the question. And I bet you too will learn something new with the discussion that&#39;s happening here!"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1525444980,"post_id":50177385,"comment_id":87372281,"body_markdown":"in `StringBuilder` you can specify a capacity, in `StringJoiner` you can&#39;t, it will grow `*2` every time, `8 -&gt; 16 -&gt; 32` array of Strings, these re-size use `Array.copyOf`. I&#39;d say with a proper capacity `StringBuilder` would win in a speed test","body":"in <code>StringBuilder</code> you can specify a capacity, in <code>StringJoiner</code> you can&#39;t, it will grow <code>*2</code> every time, <code>8 -&gt; 16 -&gt; 32</code> array of Strings, these re-size use <code>Array.copyOf</code>. I&#39;d say with a proper capacity <code>StringBuilder</code> would win in a speed test"},{"owner":{"account_id":1625605,"reputation":5548,"user_id":1501234,"accept_rate":72,"display_name":"Jaroslaw Pawlak"},"score":0,"creation_date":1525449718,"post_id":50177385,"comment_id":87375107,"body_markdown":"@Sagar Both approaches use `StringBuilder` so the difference will be insignificant. You can see some boiler plate code in the `joining` - all those new objects created (like `StringBuilder`) and all the if statements so it will be definitely a bit slower. Both approaches have `O(n)` complexity so it really comes down to what @ArnaudDenoyelle already said above - &quot;prefer the most readable&quot;.","body":"@Sagar Both approaches use <code>StringBuilder</code> so the difference will be insignificant. You can see some boiler plate code in the <code>joining</code> - all those new objects created (like <code>StringBuilder</code>) and all the if statements so it will be definitely a bit slower. Both approaches have <code>O(n)</code> complexity so it really comes down to what @ArnaudDenoyelle already said above - &quot;prefer the most readable&quot;."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1525452861,"post_id":50177385,"comment_id":87376674,"body_markdown":"Since the code does not do the same, it is pointless to discuss the performance differences. The first variant appends a trailing `&quot;,&quot;` which the joiner does not. Further, the first variant is not thread safe. Besides these differences, they do the same below the surface. So any performance difference stems from not doing the same thing. [As said by Dukeling](https://stackoverflow.com/questions/50177385/collectors-joining-vs-stringbuilder-append#comment87372184_50177385) you may also use `String.join(&quot;,&quot;, finalWords)` which is simpler (but also does basically the same)…","body":"Since the code does not do the same, it is pointless to discuss the performance differences. The first variant appends a trailing <code>&quot;,&quot;</code> which the joiner does not. Further, the first variant is not thread safe. Besides these differences, they do the same below the surface. So any performance difference stems from not doing the same thing. <a href=\"https://stackoverflow.com/questions/50177385/collectors-joining-vs-stringbuilder-append#comment87372184_50177385\">As said by Dukeling</a> you may also use <code>String.join(&quot;,&quot;, finalWords)</code> which is simpler (but also does basically the same)…"}],"answers":[{"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1525445222,"post_id":50177597,"comment_id":87372433,"body_markdown":"this is not a fair test, the first one does not initiate anything from `Stream API`, eating your time","body":"this is not a fair test, the first one does not initiate anything from <code>Stream API</code>, eating your time"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1525445317,"post_id":50177597,"comment_id":87372478,"body_markdown":"I also doubt you need `Level.Invocation` here, since all you do is collect them to a String ultimately","body":"I also doubt you need <code>Level.Invocation</code> here, since all you do is collect them to a String ultimately"},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":0,"creation_date":1525445346,"post_id":50177597,"comment_id":87372498,"body_markdown":"@Eugene Are you recommending I use `stream().forEach(`?","body":"@Eugene Are you recommending I use <code>stream().forEach(</code>?"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1525445473,"post_id":50177597,"comment_id":87372584,"body_markdown":"The question itself is probably which is faster `StringJoiner` or `StringBuilder`, and this what the test should be about, this way, well you are comparing different things. I would also add a test with an initial capacity of `StringBuilder`","body":"The question itself is probably which is faster <code>StringJoiner</code> or <code>StringBuilder</code>, and this what the test should be about, this way, well you are comparing different things. I would also add a test with an initial capacity of <code>StringBuilder</code>"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":2,"creation_date":1525445772,"post_id":50177597,"comment_id":87372774,"body_markdown":"since the OP ultimately wants a String, this can go even further, how about `java-9 concat` + `java-9 with a different strategy`, something like `@Fork(jvmArgsAppend = &quot;-Djava.lang.invoke.stringConcat=BC_SB&quot;)` or even `guava Joiner`, this would make a test I would like","body":"since the OP ultimately wants a String, this can go even further, how about <code>java-9 concat</code> + <code>java-9 with a different strategy</code>, something like <code>@Fork(jvmArgsAppend = &quot;-Djava.lang.invoke.stringConcat=BC_SB&quot;)</code> or even <code>guava Joiner</code>, this would make a test I would like"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1525861449,"post_id":50177597,"comment_id":87519202,"body_markdown":"Would be interesting to also replace and benchmark the unnecessary `Stream.forEach()` loop with an ordinary `for` loop","body":"Would be interesting to also replace and benchmark the unnecessary <code>Stream.forEach()</code> loop with an ordinary <code>for</code> loop"},{"owner":{"account_id":5482441,"reputation":2640,"user_id":4358405,"accept_rate":62,"display_name":"TMG"},"score":0,"creation_date":1576677168,"post_id":50177597,"comment_id":104976388,"body_markdown":"@JacobG. What did you use for that benchmark? Are the annotations part of some benchmarking framework API?","body":"@JacobG. What did you use for that benchmark? Are the annotations part of some benchmarking framework API?"},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":1,"creation_date":1576677239,"post_id":50177597,"comment_id":104976421,"body_markdown":"@TMG It was most-likely JMH, the Java Microbenchmark Harness","body":"@TMG It was most-likely JMH, the Java Microbenchmark Harness"},{"owner":{"account_id":5482441,"reputation":2640,"user_id":4358405,"accept_rate":62,"display_name":"TMG"},"score":1,"creation_date":1576677301,"post_id":50177597,"comment_id":104976458,"body_markdown":"@JacobG. Wow, that was blazing fast answer! Thanks :-)","body":"@JacobG. Wow, that was blazing fast answer! Thanks :-)"}],"tags":[],"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"comment_count":9,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1525445138,"creation_date":1525445138,"answer_id":50177597,"question_id":50177385,"body_markdown":"I put together a small benchmark to test this out because I was curious.  It initializes the `List` with `size` randomly-generated lowercase `String`s, each having a length of `10`:\r\n\r\n    @State(Scope.Benchmark)\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    @OutputTimeUnit(TimeUnit.NANOSECONDS)\r\n    @Warmup(iterations = 5, time = 500, timeUnit = TimeUnit.MILLISECONDS)\r\n    @Measurement(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\r\n    @Fork(3)\r\n    public class MyBenchmark {\r\n\r\n        @Param({&quot;10&quot;, &quot;100&quot;, &quot;1000&quot;, &quot;10000&quot;, &quot;100000&quot;})\r\n        private int size;\r\n\r\n        private List&lt;String&gt; finalWords;\r\n\r\n        @Setup(Level.Invocation)\r\n        public void initialize() {\r\n            finalWords = IntStream.range(0, size)\r\n                                  .mapToObj(i -&gt; {\r\n                                      return ThreadLocalRandom.current()\r\n                                                              .ints(10, &#39;a&#39;, &#39;z&#39; + 1)\r\n                                                              .mapToObj(c -&gt; Character.toString((char) c))\r\n                                                              .collect(Collectors.joining());\r\n                                  }).collect(Collectors.toList());\r\n        }\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            org.openjdk.jmh.Main.main(args);\r\n        }\r\n\r\n        @Benchmark\r\n        public String stringBuilder() {\r\n            StringBuilder sb = new StringBuilder();\r\n            finalWords.forEach(word -&gt; sb.append(word).append(&quot;,&quot;));\r\n            return sb.toString();\r\n        }\r\n\r\n        @Benchmark\r\n        public String stream() {\r\n            return finalWords.stream().collect(Collectors.joining(&quot;,&quot;));\r\n        }\r\n    }\r\n\r\nHere are the results:\r\n\r\n    Benchmark                  (size)  Mode  Cnt        Score        Error  Units\r\n    MyBenchmark.stream             10  avgt   30      242.330 &#177;      5.177  ns/op\r\n    MyBenchmark.stream            100  avgt   30     1426.333 &#177;     20.183  ns/op\r\n    MyBenchmark.stream           1000  avgt   30    30779.509 &#177;   1114.992  ns/op\r\n    MyBenchmark.stream          10000  avgt   30   720944.424 &#177;  27845.997  ns/op\r\n    MyBenchmark.stream         100000  avgt   30  7701294.456 &#177; 648084.759  ns/op\r\n    MyBenchmark.stringBuilder      10  avgt   30      170.566 &#177;      1.833  ns/op\r\n    MyBenchmark.stringBuilder     100  avgt   30     1166.153 &#177;     21.162  ns/op\r\n    MyBenchmark.stringBuilder    1000  avgt   30    32374.567 &#177;    979.288  ns/op\r\n    MyBenchmark.stringBuilder   10000  avgt   30   473022.229 &#177;   8982.260  ns/op\r\n    MyBenchmark.stringBuilder  100000  avgt   30  4524267.849 &#177; 242801.008  ns/op\r\n\r\nAs you can see, the `StringBuilder` method is faster in this case, even when I don&#39;t specify an initial capacity.","title":"Collectors.joining vs StringBuilder.append","body":"<p>I put together a small benchmark to test this out because I was curious.  It initializes the <code>List</code> with <code>size</code> randomly-generated lowercase <code>String</code>s, each having a length of <code>10</code>:</p>\n\n<pre><code>@State(Scope.Benchmark)\n@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\n@Warmup(iterations = 5, time = 500, timeUnit = TimeUnit.MILLISECONDS)\n@Measurement(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\n@Fork(3)\npublic class MyBenchmark {\n\n    @Param({\"10\", \"100\", \"1000\", \"10000\", \"100000\"})\n    private int size;\n\n    private List&lt;String&gt; finalWords;\n\n    @Setup(Level.Invocation)\n    public void initialize() {\n        finalWords = IntStream.range(0, size)\n                              .mapToObj(i -&gt; {\n                                  return ThreadLocalRandom.current()\n                                                          .ints(10, 'a', 'z' + 1)\n                                                          .mapToObj(c -&gt; Character.toString((char) c))\n                                                          .collect(Collectors.joining());\n                              }).collect(Collectors.toList());\n    }\n\n    public static void main(String[] args) throws Exception {\n        org.openjdk.jmh.Main.main(args);\n    }\n\n    @Benchmark\n    public String stringBuilder() {\n        StringBuilder sb = new StringBuilder();\n        finalWords.forEach(word -&gt; sb.append(word).append(\",\"));\n        return sb.toString();\n    }\n\n    @Benchmark\n    public String stream() {\n        return finalWords.stream().collect(Collectors.joining(\",\"));\n    }\n}\n</code></pre>\n\n<p>Here are the results:</p>\n\n<pre><code>Benchmark                  (size)  Mode  Cnt        Score        Error  Units\nMyBenchmark.stream             10  avgt   30      242.330 ±      5.177  ns/op\nMyBenchmark.stream            100  avgt   30     1426.333 ±     20.183  ns/op\nMyBenchmark.stream           1000  avgt   30    30779.509 ±   1114.992  ns/op\nMyBenchmark.stream          10000  avgt   30   720944.424 ±  27845.997  ns/op\nMyBenchmark.stream         100000  avgt   30  7701294.456 ± 648084.759  ns/op\nMyBenchmark.stringBuilder      10  avgt   30      170.566 ±      1.833  ns/op\nMyBenchmark.stringBuilder     100  avgt   30     1166.153 ±     21.162  ns/op\nMyBenchmark.stringBuilder    1000  avgt   30    32374.567 ±    979.288  ns/op\nMyBenchmark.stringBuilder   10000  avgt   30   473022.229 ±   8982.260  ns/op\nMyBenchmark.stringBuilder  100000  avgt   30  4524267.849 ± 242801.008  ns/op\n</code></pre>\n\n<p>As you can see, the <code>StringBuilder</code> method is faster in this case, even when I don't specify an initial capacity.</p>\n"},{"tags":[],"owner":{"account_id":11554395,"reputation":94,"user_id":8465978,"display_name":"Badr Kacimi"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691595381,"creation_date":1691595381,"answer_id":76869308,"question_id":50177385,"body_markdown":"In java 17, the String concatenation was improved so we do not longer need StringBuffer anymore.\r\n\r\nFor more check JEP caf&#233; : https://www.youtube.com/watch?v=w56RUzBLaRE&amp;list=PLX8CzqL3ArzV4BpOzLanxd4bZr46x5e87&amp;index=15","title":"Collectors.joining vs StringBuilder.append","body":"<p>In java 17, the String concatenation was improved so we do not longer need StringBuffer anymore.</p>\n<p>For more check JEP café : <a href=\"https://www.youtube.com/watch?v=w56RUzBLaRE&amp;list=PLX8CzqL3ArzV4BpOzLanxd4bZr46x5e87&amp;index=15\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=w56RUzBLaRE&amp;list=PLX8CzqL3ArzV4BpOzLanxd4bZr46x5e87&amp;index=15</a></p>\n"}],"owner":{"account_id":1597009,"reputation":5417,"user_id":1478852,"accept_rate":63,"display_name":"Sagar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6497,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":50177597,"answer_count":2,"score":9,"last_activity_date":1691595381,"creation_date":1525444346,"question_id":50177385,"body_markdown":"Which one is better in terms of performance?   \r\n\r\n    finalWords.stream().forEach(word -&gt; stringBuilder.append(word).append(”,“)); \r\n    String finalResult = stringBuilder.toString();\r\n\r\nVS \r\n\r\n    String finalResult = finalWords.stream().collect(Collectors.joining(&quot;,&quot;));\r\n\r\n\r\n","title":"Collectors.joining vs StringBuilder.append","body":"<p>Which one is better in terms of performance?   </p>\n\n<pre><code>finalWords.stream().forEach(word -&gt; stringBuilder.append(word).append(”,“)); \nString finalResult = stringBuilder.toString();\n</code></pre>\n\n<p>VS </p>\n\n<pre><code>String finalResult = finalWords.stream().collect(Collectors.joining(\",\"));\n</code></pre>\n"},{"tags":["java","docker","tomcat"],"owner":{"account_id":3468584,"reputation":41,"user_id":2903551,"display_name":"Rupesh S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691595213,"creation_date":1691594465,"question_id":76869186,"body_markdown":"- On our production instance we run a our application on docker.\r\n- Docker image we use is tomcat:9.0.41-jdk8-openjdk.\r\n- One day suddenly this tomcat stopped responding.\r\n\r\nTo Troubleshoot issue we did following:\r\n- We ran curl command from inside of container also but it still not responding.\r\n- We thought default 200 thread config of tomcat could be issue but we tried load on similar instance on some other environment. Its thread count gone beyond and then it automatically came down.\r\n- We also thought this could be some jvm issue. And we tried troubleshooting through [jcmd](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html) tool. But the tomcat process inside inside docker was not responding.\r\n\r\nWhat can be reason for this?","title":"Tomcat Inside docker has suddenly stopped responding","body":"<ul>\n<li>On our production instance we run a our application on docker.</li>\n<li>Docker image we use is tomcat:9.0.41-jdk8-openjdk.</li>\n<li>One day suddenly this tomcat stopped responding.</li>\n</ul>\n<p>To Troubleshoot issue we did following:</p>\n<ul>\n<li>We ran curl command from inside of container also but it still not responding.</li>\n<li>We thought default 200 thread config of tomcat could be issue but we tried load on similar instance on some other environment. Its thread count gone beyond and then it automatically came down.</li>\n<li>We also thought this could be some jvm issue. And we tried troubleshooting through <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html\" rel=\"nofollow noreferrer\">jcmd</a> tool. But the tomcat process inside inside docker was not responding.</li>\n</ul>\n<p>What can be reason for this?</p>\n"},{"tags":["java","swing","validation","input"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1498896065,"post_id":44858677,"comment_id":76697496,"body_markdown":"It really depends on what type of fields you&#39;re trying to validate - you could use an `InputVerifier`, it&#39;s post validation process, or for text components a `DocumentListener` or `DocumentFilter`","body":"It really depends on what type of fields you&#39;re trying to validate - you could use an <code>InputVerifier</code>, it&#39;s post validation process, or for text components a <code>DocumentListener</code> or <code>DocumentFilter</code>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1498897436,"post_id":44858677,"comment_id":76697743,"body_markdown":"You could also do post validation through an `ActionListener` attached to a `JButton`","body":"You could also do post validation through an <code>ActionListener</code> attached to a <code>JButton</code>"},{"owner":{"account_id":11090869,"reputation":5,"user_id":8142802,"accept_rate":40,"display_name":"ManuellsenDeve"},"score":0,"creation_date":1498897581,"post_id":44858677,"comment_id":76697771,"body_markdown":"Yeah I would make it with the button but the normal console Validation dont work am I right? So that code what I am posted is a example how my console validation worked.","body":"Yeah I would make it with the button but the normal console Validation dont work am I right? So that code what I am posted is a example how my console validation worked."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1498900671,"post_id":44858677,"comment_id":76698493,"body_markdown":"Most GUIs are event driven frameworks, that is, something happens and you respond to it. It can take a little getting use to.  Basically, you won&#39;t need a loop of any kind (that&#39;s taken care for you) and you simply respond to the appropriate events when they a triggered","body":"Most GUIs are event driven frameworks, that is, something happens and you respond to it. It can take a little getting use to.  Basically, you won&#39;t need a loop of any kind (that&#39;s taken care for you) and you simply respond to the appropriate events when they a triggered"}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1498914456,"creation_date":1498914456,"answer_id":44861290,"question_id":44858677,"body_markdown":"Your error message now appears on the console. It looks like you want the message to appear in the GUI. As shown in [*How to Use the Focus Subsystem: Validating Input*][1], [`InputVerifier`][2] is a good choice. Because your implementation of `shouldYieldFocus()` is permitted to have sided effects, you can update a status display as needed. Starting from this complete [example][3], the variation below adds a `JLabel` and conditions it in `shouldYieldFocus()` according to the result of calling `verify()`.\r\n\r\n    private static final String OK = &quot;Values OK.&quot;;\r\n    private JLabel status = new JLabel(OK, JLabel.CENTER);\r\n    …\r\n    if (verify(input)) {\r\n        …\r\n        status.setText(OK);\r\n        return true;\r\n    } else {\r\n        …\r\n        status.setText(&quot;Please enter a number.&quot;);\r\n        return false;\r\n    }\r\n\r\nA complementary approach might include a [`DocumentListener`][4], as suggested [here][5].\r\n\r\n[![image][6]][6]\r\n\r\n\timport java.awt.*;\r\n\timport javax.swing.*;\r\n\r\n\t/**\r\n     * @see http://stackoverflow.com/a/44861290/230513\r\n\t * @see http://stackoverflow.com/a/11818183/522444\r\n\t */\r\n\tpublic class VerifierEg {\r\n\r\n\t\tprivate static final String ZERO = &quot;0.0&quot;;\r\n\t\tprivate static final String OK = &quot;Values OK.&quot;;\r\n\t\tprivate JTextField field1 = new JTextField(ZERO, 5);\r\n\t\tprivate JTextField field2 = new JTextField(ZERO, 5);\r\n\t\tprivate JTextField resultField = new JTextField(ZERO, 10);\r\n\t\tprivate JLabel status = new JLabel(OK, JLabel.CENTER);\r\n\r\n\t\tprivate void createAndShowGui() {\r\n\t\t\tresultField.setEditable(false);\r\n\t\t\tresultField.setFocusable(false);\r\n\r\n\t\t\tJPanel mainPanel = new JPanel();\r\n\t\t\tfinal JTextField[] fields = {field1, field2};\r\n\r\n\t\t\tmainPanel.add(field1);\r\n\t\t\tmainPanel.add(new JLabel(&quot; x &quot;));\r\n\t\t\tmainPanel.add(field2);\r\n\t\t\tmainPanel.add(new JLabel(&quot; = &quot;));\r\n\t\t\tmainPanel.add(resultField);\r\n\r\n\t\t\tfor (JTextField field : fields) {\r\n\t\t\t\tfield.setInputVerifier(new MyInputVerifier(field));\r\n\t\t\t}\r\n\r\n\t\t\tJFrame frame = new JFrame(&quot;VerifierEg&quot;);\r\n\t\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\tframe.add(mainPanel);\r\n\t\t\tframe.add(status, BorderLayout.SOUTH);\r\n\t\t\tframe.pack();\r\n\t\t\tframe.setLocationByPlatform(true);\r\n\t\t\tframe.setVisible(true);\r\n\t\t}\r\n\r\n\t\tprivate void calcProduct() {\r\n\t\t\tdouble d1 = Double.parseDouble(field1.getText());\r\n\t\t\tdouble d2 = Double.parseDouble(field2.getText());\r\n\t\t\tdouble prod = d1 * d2;\r\n\t\t\tresultField.setText(String.valueOf(prod));\r\n\t\t}\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tSwingUtilities.invokeLater(new Runnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tVerifierEg eg = new VerifierEg();\r\n\t\t\t\t\teg.createAndShowGui();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t* @see http://stackoverflow.com/a/11818946/230513\r\n\t\t*/\r\n\t\tprivate class MyInputVerifier extends InputVerifier {\r\n\r\n\t\t\tprivate JTextField field;\r\n\t\t\tprivate double value;\r\n\r\n\t\t\tpublic MyInputVerifier(JTextField field) {\r\n\t\t\t\tthis.field = field;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean shouldYieldFocus(JComponent input) {\r\n\t\t\t\tif (verify(input)) {\r\n\t\t\t\t\tfield.setText(String.valueOf(value));\r\n\t\t\t\t\tcalcProduct();\r\n\t\t\t\t\tstatus.setText(OK);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfield.setText(ZERO);\r\n\t\t\t\t\tfield.selectAll();\r\n\t\t\t\t\tstatus.setText(&quot;Please enter a number.&quot;);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean verify(JComponent input) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvalue = Double.parseDouble(field.getText());\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} catch (NumberFormatException e) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/javax/swing/InputVerifier.html\r\n  [3]: https://stackoverflow.com/a/11818183/230513\r\n  [4]: https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\r\n  [5]: https://stackoverflow.com/a/14171442/230513\r\n  [6]: https://i.stack.imgur.com/2GVS6.png","title":"How to validate the Input of the User in a Swing?","body":"<p>Your error message now appears on the console. It looks like you want the message to appear in the GUI. As shown in <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\" rel=\"nofollow noreferrer\"><em>How to Use the Focus Subsystem: Validating Input</em></a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/InputVerifier.html\" rel=\"nofollow noreferrer\"><code>InputVerifier</code></a> is a good choice. Because your implementation of <code>shouldYieldFocus()</code> is permitted to have sided effects, you can update a status display as needed. Starting from this complete <a href=\"https://stackoverflow.com/a/11818183/230513\">example</a>, the variation below adds a <code>JLabel</code> and conditions it in <code>shouldYieldFocus()</code> according to the result of calling <code>verify()</code>.</p>\n\n<pre><code>private static final String OK = \"Values OK.\";\nprivate JLabel status = new JLabel(OK, JLabel.CENTER);\n…\nif (verify(input)) {\n    …\n    status.setText(OK);\n    return true;\n} else {\n    …\n    status.setText(\"Please enter a number.\");\n    return false;\n}\n</code></pre>\n\n<p>A complementary approach might include a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\" rel=\"nofollow noreferrer\"><code>DocumentListener</code></a>, as suggested <a href=\"https://stackoverflow.com/a/14171442/230513\">here</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2GVS6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2GVS6.png\" alt=\"image\"></a></p>\n\n<pre><code>import java.awt.*;\nimport javax.swing.*;\n\n/**\n * @see http://stackoverflow.com/a/44861290/230513\n * @see http://stackoverflow.com/a/11818183/522444\n */\npublic class VerifierEg {\n\n    private static final String ZERO = \"0.0\";\n    private static final String OK = \"Values OK.\";\n    private JTextField field1 = new JTextField(ZERO, 5);\n    private JTextField field2 = new JTextField(ZERO, 5);\n    private JTextField resultField = new JTextField(ZERO, 10);\n    private JLabel status = new JLabel(OK, JLabel.CENTER);\n\n    private void createAndShowGui() {\n        resultField.setEditable(false);\n        resultField.setFocusable(false);\n\n        JPanel mainPanel = new JPanel();\n        final JTextField[] fields = {field1, field2};\n\n        mainPanel.add(field1);\n        mainPanel.add(new JLabel(\" x \"));\n        mainPanel.add(field2);\n        mainPanel.add(new JLabel(\" = \"));\n        mainPanel.add(resultField);\n\n        for (JTextField field : fields) {\n            field.setInputVerifier(new MyInputVerifier(field));\n        }\n\n        JFrame frame = new JFrame(\"VerifierEg\");\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(mainPanel);\n        frame.add(status, BorderLayout.SOUTH);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private void calcProduct() {\n        double d1 = Double.parseDouble(field1.getText());\n        double d2 = Double.parseDouble(field2.getText());\n        double prod = d1 * d2;\n        resultField.setText(String.valueOf(prod));\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n\n            @Override\n            public void run() {\n                VerifierEg eg = new VerifierEg();\n                eg.createAndShowGui();\n            }\n        });\n    }\n\n    /**\n    * @see http://stackoverflow.com/a/11818946/230513\n    */\n    private class MyInputVerifier extends InputVerifier {\n\n        private JTextField field;\n        private double value;\n\n        public MyInputVerifier(JTextField field) {\n            this.field = field;\n        }\n\n        @Override\n        public boolean shouldYieldFocus(JComponent input) {\n            if (verify(input)) {\n                field.setText(String.valueOf(value));\n                calcProduct();\n                status.setText(OK);\n                return true;\n            } else {\n                field.setText(ZERO);\n                field.selectAll();\n                status.setText(\"Please enter a number.\");\n                return false;\n            }\n\n        }\n\n        @Override\n        public boolean verify(JComponent input) {\n            try {\n                value = Double.parseDouble(field.getText());\n                return true;\n            } catch (NumberFormatException e) {\n                return false;\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11090869,"reputation":5,"user_id":8142802,"accept_rate":40,"display_name":"ManuellsenDeve"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2668,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691594515,"creation_date":1498895683,"question_id":44858677,"body_markdown":"I have created a console Application and now I&#39;m starting to convert it into a swing Application. I have one question and I searched many times for an answer but I didn&#39;t find any. \r\n\r\nMy application has an class which validates the input of the user and also if the input is wrong it gives a error msg into console. So what I try to do is, I have an Jtextfield and validate this input, if the input is wrong it should give me the error msg.\r\n\r\nThat&#39;s my Input class where the User is allowed to write\r\n\r\n    public class Input {\r\n\r\n        private static BufferedReader eingabe = new BufferedReader(new InputStreamReader(System.in));\r\n        private Output output = new Output();\r\n        \r\n        private static String captureText() throws Exception {\r\n            return eingabe.readLine();\r\n        }\r\n        public String formatInput() {\r\n            boolean again = true;\r\n\r\n            while (again) {\r\n                try {\r\n                    String format = captureText();\r\n\r\n                    if (!format.equalsIgnoreCase(&quot;Y&quot;) &amp;&amp; !format.equalsIgnoreCase(&quot;N&quot;)) {\r\n                        again = true;\r\n                        throw new Exception();\r\n                    }\r\n                    again = false;\r\n                    return format;\r\n                } catch (Exception e) {\r\n                    this.output.formatInputWrong();\r\n                }\r\n            }\r\n            return null;\r\n\r\n        }\r\n    }\r\n\r\nThat&#39;s my output class method\r\n\r\n    void formatInputWrong() {\r\n        System.out.print(&quot;\\nThe Format Input is wrong.&quot;);\r\n               \r\n    }\r\n\r\n**I just want to know can I use the Validation of the Input class or should I create a special class for the swing input validation because I know I can take out the Input of the JTextfield?**","title":"How to validate the Input of the User in a Swing?","body":"<p>I have created a console Application and now I'm starting to convert it into a swing Application. I have one question and I searched many times for an answer but I didn't find any.</p>\n<p>My application has an class which validates the input of the user and also if the input is wrong it gives a error msg into console. So what I try to do is, I have an Jtextfield and validate this input, if the input is wrong it should give me the error msg.</p>\n<p>That's my Input class where the User is allowed to write</p>\n<pre><code>public class Input {\n\n    private static BufferedReader eingabe = new BufferedReader(new InputStreamReader(System.in));\n    private Output output = new Output();\n    \n    private static String captureText() throws Exception {\n        return eingabe.readLine();\n    }\n    public String formatInput() {\n        boolean again = true;\n\n        while (again) {\n            try {\n                String format = captureText();\n\n                if (!format.equalsIgnoreCase(&quot;Y&quot;) &amp;&amp; !format.equalsIgnoreCase(&quot;N&quot;)) {\n                    again = true;\n                    throw new Exception();\n                }\n                again = false;\n                return format;\n            } catch (Exception e) {\n                this.output.formatInputWrong();\n            }\n        }\n        return null;\n\n    }\n}\n</code></pre>\n<p>That's my output class method</p>\n<pre><code>void formatInputWrong() {\n    System.out.print(&quot;\\nThe Format Input is wrong.&quot;);\n           \n}\n</code></pre>\n<p><strong>I just want to know can I use the Validation of the Input class or should I create a special class for the swing input validation because I know I can take out the Input of the JTextfield?</strong></p>\n"},{"tags":["java","icmp"],"comments":[{"owner":{"account_id":15599618,"reputation":51,"user_id":11254096,"display_name":"Eric sun"},"score":0,"creation_date":1691144414,"post_id":76834860,"comment_id":135455254,"body_markdown":"I got it one minute after I posted it. isReachable() sends out echo request with seq 1 all the time, which will mess up its behavior when there is packet delay but not packet loss. I&#39;m an idiot.","body":"I got it one minute after I posted it. isReachable() sends out echo request with seq 1 all the time, which will mess up its behavior when there is packet delay but not packet loss. I&#39;m an idiot."},{"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"score":0,"creation_date":1691594623,"post_id":76834860,"comment_id":135513454,"body_markdown":"because the `isReachable` relies on the operating system&#39;s network stack implementation,which can vary across different platforms and this can lead to inconsistent results and unexpected behavior!","body":"because the <code>isReachable</code> relies on the operating system&#39;s network stack implementation,which can vary across different platforms and this can lead to inconsistent results and unexpected behavior!"}],"answers":[{"tags":[],"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691594423,"creation_date":1691594423,"answer_id":76869182,"question_id":76834860,"body_markdown":"I think you can use the `Socket` class to establish a TCP connection instead of `isReachable`!\r\n\r\ncheck this out:\r\n\r\n    import java.io.IOException;\r\n    import java.net.InetAddress;\r\n    import java.net.Socket;\r\n    \r\n    public class PingTimeoutTest {\r\n        public static void main(String[] args) {\r\n            String ipAddress = args[0];\r\n            int timeoutStepMilli = 20;\r\n            int timeoutBase = 10;\r\n            boolean reachable = false;\r\n    \r\n            while (!reachable &amp;&amp; timeoutBase &lt;= 2000) {\r\n                try (Socket socket = new Socket()) {\r\n                    socket.connect(new InetSocketAddress(ipAddress, 80), timeoutBase);\r\n                    reachable = true;\r\n                } catch (IOException e) {\r\n                    System.out.println(timeoutBase + &quot;: bad&quot;);\r\n                    timeoutBase += timeoutStepMilli;\r\n                }\r\n            }\r\n    \r\n            if (reachable) {\r\n                System.out.println(timeoutBase + &quot;: ok&quot;);\r\n            } else {\r\n                System.out.println(&quot;Connection not successful&quot;);\r\n            }\r\n        }\r\n    }","title":"the timeout parameter for InetAddress.isReachable() doesn&#39;t match the value of netem delay","body":"<p>I think you can use the <code>Socket</code> class to establish a TCP connection instead of <code>isReachable</code>!</p>\n<p>check this out:</p>\n<pre><code>import java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.Socket;\n\npublic class PingTimeoutTest {\n    public static void main(String[] args) {\n        String ipAddress = args[0];\n        int timeoutStepMilli = 20;\n        int timeoutBase = 10;\n        boolean reachable = false;\n\n        while (!reachable &amp;&amp; timeoutBase &lt;= 2000) {\n            try (Socket socket = new Socket()) {\n                socket.connect(new InetSocketAddress(ipAddress, 80), timeoutBase);\n                reachable = true;\n            } catch (IOException e) {\n                System.out.println(timeoutBase + &quot;: bad&quot;);\n                timeoutBase += timeoutStepMilli;\n            }\n        }\n\n        if (reachable) {\n            System.out.println(timeoutBase + &quot;: ok&quot;);\n        } else {\n            System.out.println(&quot;Connection not successful&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15599618,"reputation":51,"user_id":11254096,"display_name":"Eric sun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76869182,"answer_count":1,"score":0,"last_activity_date":1691594423,"creation_date":1691143153,"question_id":76834860,"body_markdown":"I used netem to add packet delay for certain IP address.\r\n\r\n```tc filter add dev ens33 protocol ip parent 1:0 prio 1 u32 match ip dst 192.168.106.182 flowid 1:1```\r\n\r\nThe ```ping``` tool indicated that it worked.\r\n\r\n```\r\nPING 192.168.106.182 (192.168.106.182) 56(84) bytes of data.\r\n64 bytes from 192.168.106.182: icmp_seq=1 ttl=63 time=2003 ms\r\n```\r\n\r\nFollowing was my code for test\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.net.InetAddress;\r\n\r\n\r\npublic class PingTimeoutTest {\r\n    public static void main(String[] args) throws IOException {\r\n        InetAddress inetAddress = InetAddress.getByName(args[0]);\r\n        int timeoutStepMilli = 20;\r\n        int timeoutBase = 10;\r\n        while (!inetAddress.isReachable(timeoutBase)) {\r\n            System.out.println(timeoutBase + &quot;: bad&quot;);\r\n            timeoutBase += timeoutStepMilli;\r\n        }\r\n        System.out.println(timeoutBase + &quot;: ok&quot;);\r\n    }\r\n}\r\n```\r\nAnd the result is \r\n\r\n```\r\n10: bad\r\n30: bad\r\n50: bad\r\n70: bad\r\n90: bad\r\n110: bad\r\n130: bad\r\n150: bad\r\n170: bad\r\n190: bad\r\n210: bad\r\n230: bad\r\n250: bad\r\n270: bad\r\n290: ok\r\n```\r\nI have no idea why this happened. It&#39;s the same 290ms timeout when I set 2000ms netem delay both on this side or remote side.\r\n\r\nAny help will be grateful.","title":"the timeout parameter for InetAddress.isReachable() doesn&#39;t match the value of netem delay","body":"<p>I used netem to add packet delay for certain IP address.</p>\n<p><code>tc filter add dev ens33 protocol ip parent 1:0 prio 1 u32 match ip dst 192.168.106.182 flowid 1:1</code></p>\n<p>The <code>ping</code> tool indicated that it worked.</p>\n<pre><code>PING 192.168.106.182 (192.168.106.182) 56(84) bytes of data.\n64 bytes from 192.168.106.182: icmp_seq=1 ttl=63 time=2003 ms\n</code></pre>\n<p>Following was my code for test</p>\n<pre><code>import java.io.IOException;\nimport java.net.InetAddress;\n\n\npublic class PingTimeoutTest {\n    public static void main(String[] args) throws IOException {\n        InetAddress inetAddress = InetAddress.getByName(args[0]);\n        int timeoutStepMilli = 20;\n        int timeoutBase = 10;\n        while (!inetAddress.isReachable(timeoutBase)) {\n            System.out.println(timeoutBase + &quot;: bad&quot;);\n            timeoutBase += timeoutStepMilli;\n        }\n        System.out.println(timeoutBase + &quot;: ok&quot;);\n    }\n}\n</code></pre>\n<p>And the result is</p>\n<pre><code>10: bad\n30: bad\n50: bad\n70: bad\n90: bad\n110: bad\n130: bad\n150: bad\n170: bad\n190: bad\n210: bad\n230: bad\n250: bad\n270: bad\n290: ok\n</code></pre>\n<p>I have no idea why this happened. It's the same 290ms timeout when I set 2000ms netem delay both on this side or remote side.</p>\n<p>Any help will be grateful.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":6231757,"reputation":5087,"user_id":4848308,"display_name":"Gueorgui Obregon"},"score":0,"creation_date":1454390912,"post_id":35145540,"comment_id":58010954,"body_markdown":"post your build.gradle so we can make an more accurate answer based on your dependencies","body":"post your build.gradle so we can make an more accurate answer based on your dependencies"},{"owner":{"account_id":6231757,"reputation":5087,"user_id":4848308,"display_name":"Gueorgui Obregon"},"score":0,"creation_date":1454390932,"post_id":35145540,"comment_id":58010967,"body_markdown":"here is some reference http://stackoverflow.com/questions/30934729/cant-generate-signed-apk-from-android-studio-execution-failed-for-task-packa","body":"here is some reference <a href=\"http://stackoverflow.com/questions/30934729/cant-generate-signed-apk-from-android-studio-execution-failed-for-task-packa\" title=\"cant generate signed apk from android studio execution failed for task packa\">stackoverflow.com/questions/30934729/&hellip;</a>"},{"owner":{"account_id":7555738,"reputation":466,"user_id":5735415,"display_name":"Ashish Rajvanshi"},"score":0,"creation_date":1454392671,"post_id":35145540,"comment_id":58011583,"body_markdown":"here is some reference http://stackoverflow.com/questions/20885725/how-to-use-the-proguard-in-android-studio","body":"here is some reference <a href=\"http://stackoverflow.com/questions/20885725/how-to-use-the-proguard-in-android-studio\" title=\"how to use the proguard in android studio\">stackoverflow.com/questions/20885725/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":5382785,"reputation":369,"user_id":4287598,"accept_rate":100,"display_name":"visual process"},"score":0,"creation_date":1454407061,"post_id":35145651,"comment_id":58019005,"body_markdown":"but still i got error friend  http://stackoverflow.com/questions/35150026/how-to-generate-proguard-obfuscation-in-using-android-studio","body":"but still i got error friend  <a href=\"http://stackoverflow.com/questions/35150026/how-to-generate-proguard-obfuscation-in-using-android-studio\" title=\"how to generate proguard obfuscation in using android studio\">stackoverflow.com/questions/35150026/&hellip;</a>"}],"tags":[],"owner":{"account_id":7052208,"reputation":1344,"user_id":5840085,"accept_rate":43,"display_name":"Harshad"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1454390593,"creation_date":1454390593,"answer_id":35145651,"question_id":35145540,"body_markdown":"I figured out the problem:\r\n\r\nOpen up the proguard-rules.pro for your project and add this to the bottom:\r\n\r\n    -dontwarn java.nio.file.Files\r\n    -dontwarn java.nio.file.Path\r\n    -dontwarn java.nio.file.OpenOption\r\n    -dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\r\n\r\nBasically how I solved it was this I tried to run my app in &#39;release&#39; mode and got a bunch of errors similar to this guy here: [https://github.com/square/okio/issues/144][1]\r\n\r\nI pretty much followed what he said and fixed it.\r\n\r\nHope this can help others with generating their APK&#39;s!\r\n\r\n\r\nvisit more detail here :\r\n\r\n[https://stackoverflow.com/questions/31643339/errorexecution-failed-for-task-apppackagerelease-unable-to-compute-hash][2]\r\n\r\n\r\n  [1]: https://github.com/square/okio/issues/144\r\n  [2]: https://stackoverflow.com/questions/31643339/errorexecution-failed-for-task-apppackagerelease-unable-to-compute-hash","title":"How to enable ProGuard obfuscation in Android Studio?","body":"<p>I figured out the problem:</p>\n\n<p>Open up the proguard-rules.pro for your project and add this to the bottom:</p>\n\n<pre><code>-dontwarn java.nio.file.Files\n-dontwarn java.nio.file.Path\n-dontwarn java.nio.file.OpenOption\n-dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\n</code></pre>\n\n<p>Basically how I solved it was this I tried to run my app in 'release' mode and got a bunch of errors similar to this guy here: <a href=\"https://github.com/square/okio/issues/144\" rel=\"noreferrer\">https://github.com/square/okio/issues/144</a></p>\n\n<p>I pretty much followed what he said and fixed it.</p>\n\n<p>Hope this can help others with generating their APK's!</p>\n\n<p>visit more detail here :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31643339/errorexecution-failed-for-task-apppackagerelease-unable-to-compute-hash\">Error:Execution failed for task &#39;:app:packageRelease&#39;. &gt; Unable to compute hash of /../AndroidStudioProjects/../classes.jar</a></p>\n"},{"comments":[{"owner":{"account_id":7527241,"reputation":652,"user_id":9416473,"display_name":"Akhil Surapuram"},"score":1,"creation_date":1562759254,"post_id":35145658,"comment_id":100476573,"body_markdown":"why do we need to obfuscate for debug?","body":"why do we need to obfuscate for debug?"},{"owner":{"account_id":3845739,"reputation":6759,"user_id":3187349,"accept_rate":56,"display_name":"Maheshwar Ligade"},"score":0,"creation_date":1562852438,"post_id":35145658,"comment_id":100515807,"body_markdown":"good question!! but this is an available option if you want to use based on the use case you can or just ignore.","body":"good question!! but this is an available option if you want to use based on the use case you can or just ignore."}],"tags":[],"owner":{"account_id":3845739,"reputation":6759,"user_id":3187349,"accept_rate":56,"display_name":"Maheshwar Ligade"},"comment_count":2,"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1567836084,"creation_date":1454390623,"answer_id":35145658,"question_id":35145540,"body_markdown":"To enable ProGuard in Android Studio.\r\n\r\nBelow is the sample how to enable default ProGuard in Android Studio.\r\n\r\n1. Go to the build.gradle file of app\r\n2. enable the **minifyEnabled true**\r\n3. enable  **shrinkResources true** to reduce the APK size\r\n4. `proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;)`\r\n to enable the default one. If you want to use your own proguard file then use the below rules.\r\n\r\n\r\n        buildTypes {\r\n            release {\r\n                debuggable false\r\n                minifyEnabled true\r\n                shrinkResources true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n    \r\n            debug {\r\n                debuggable true\r\n                minifyEnabled true\r\n                shrinkResources true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n\r\nThe link with ProGuard settings for Android and other settings are available in these links:\r\n\r\n - [Default ProGuard file][1]\r\n - [Gist with example][2]\r\n\r\nFor more detail go through [this link][3] \r\n\r\n\r\n  [1]: https://developer.android.com/studio/build/shrink-code.html\r\n  [2]: https://gist.github.com/maheshwarLigade/7143ae567fe8ac7c1e20\r\n  [3]: https://techwasti.com/enabling-proguard-for-android/","title":"How to enable ProGuard obfuscation in Android Studio?","body":"<p>To enable ProGuard in Android Studio.</p>\n\n<p>Below is the sample how to enable default ProGuard in Android Studio.</p>\n\n<ol>\n<li>Go to the build.gradle file of app</li>\n<li>enable the <strong>minifyEnabled true</strong></li>\n<li>enable  <strong>shrinkResources true</strong> to reduce the APK size</li>\n<li><p><code>proguardFiles getDefaultProguardFile('proguard-android.txt')</code>\nto enable the default one. If you want to use your own proguard file then use the below rules.</p>\n\n<pre><code>buildTypes {\n    release {\n        debuggable false\n        minifyEnabled true\n        shrinkResources true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n\n    debug {\n        debuggable true\n        minifyEnabled true\n        shrinkResources true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>The link with ProGuard settings for Android and other settings are available in these links:</p>\n\n<ul>\n<li><a href=\"https://developer.android.com/studio/build/shrink-code.html\" rel=\"noreferrer\">Default ProGuard file</a></li>\n<li><a href=\"https://gist.github.com/maheshwarLigade/7143ae567fe8ac7c1e20\" rel=\"noreferrer\">Gist with example</a></li>\n</ul>\n\n<p>For more detail go through <a href=\"https://techwasti.com/enabling-proguard-for-android/\" rel=\"noreferrer\">this link</a> </p>\n"},{"tags":[],"owner":{"account_id":3029321,"reputation":612,"user_id":2568673,"display_name":"appapurapu"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1523816704,"creation_date":1486395727,"answer_id":42071688,"question_id":35145540,"body_markdown":"if you are building the android project with jack, then it will automatically do the shrinking, obfuscation, repackaging and multidex.\r\nJust add below in :\r\n    \r\n    defaultConfig {\r\n           jackOptions {\r\n                enabled true\r\n            }        \r\n        }\r\n    \r\nand in build types, mention the project `proguard` file :\r\n\r\n    buildTypes {\r\n            release {\r\n                // Jack build environment does not require minifyEnabled or shrinkResources.\r\n                // Conceptually, the jack compiler consolidates the functionality of javac, ProGuard, and dex in a single conversion step\r\n                //minifyEnabled = true      \r\n                //shrinkResources true\r\n                \r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-project.txt&#39;\r\n           }\r\n    \r\n           debug {\r\n    ...................\r\n            }\r\n        } \r\n    \r\n    \r\n    \r\nTo disable the ProGuard obfuscation, it is required to add below line in your proguard-project.txt file\r\n    \r\n    ####No obfuscation\r\n    -dontobfuscate\r\n\r\n","title":"How to enable ProGuard obfuscation in Android Studio?","body":"<p>if you are building the android project with jack, then it will automatically do the shrinking, obfuscation, repackaging and multidex.\nJust add below in :</p>\n\n<pre><code>defaultConfig {\n       jackOptions {\n            enabled true\n        }        \n    }\n</code></pre>\n\n<p>and in build types, mention the project <code>proguard</code> file :</p>\n\n<pre><code>buildTypes {\n        release {\n            // Jack build environment does not require minifyEnabled or shrinkResources.\n            // Conceptually, the jack compiler consolidates the functionality of javac, ProGuard, and dex in a single conversion step\n            //minifyEnabled = true      \n            //shrinkResources true\n\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-project.txt'\n       }\n\n       debug {\n...................\n        }\n    } \n</code></pre>\n\n<p>To disable the ProGuard obfuscation, it is required to add below line in your proguard-project.txt file</p>\n\n<pre><code>####No obfuscation\n-dontobfuscate\n</code></pre>\n"}],"owner":{"account_id":5382785,"reputation":369,"user_id":4287598,"accept_rate":100,"display_name":"visual process"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68178,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":35145651,"answer_count":3,"score":35,"last_activity_date":1691594357,"creation_date":1454389999,"question_id":35145540,"body_markdown":"I have to protect my app by enabling Proguard obfuscation in Android Studio. I have searched for the process of how to apply it but i did not get any clear solution. When i try it, i always get an error. So can anyone tell me the clear steps to apply it in my app?\r\n\r\nI am doing this by the following steps:\r\n\r\n1. In Android Studio, open up an Android project.\r\n\r\n2. Change to Project View.\r\n\r\n3. Change the following line:\r\n\r\n  `minifyEnable false` to `minifyEnable true`\r\n\r\n4. Set ProGuard Rules(optional)\r\n\r\n   4.1 In Project View, select the proguard-rules.pro file.\r\n \r\n   4.2 Add in the following lines to tell ProGuard not to obfuscate certain classes. \r\n\r\n        -keepclassmembers class com.dom925.xxxx \r\n        {\r\n          public *\r\n        }\r\n\r\n**Error that I am getting by following the steps are** &lt;br&gt;\r\n\r\n&gt; Error:Execution failed for task &#39;:app:packageRelease&#39;.\r\n&gt; Unable to compute hash of D:\\Android\\Pojectname\\app\\build\\intermediates\\classes-proguard\\release\\classes.jar\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to enable ProGuard obfuscation in Android Studio?","body":"<p>I have to protect my app by enabling Proguard obfuscation in Android Studio. I have searched for the process of how to apply it but i did not get any clear solution. When i try it, i always get an error. So can anyone tell me the clear steps to apply it in my app?</p>\n\n<p>I am doing this by the following steps:</p>\n\n<ol>\n<li><p>In Android Studio, open up an Android project.</p></li>\n<li><p>Change to Project View.</p></li>\n<li><p>Change the following line:</p>\n\n<p><code>minifyEnable false</code> to <code>minifyEnable true</code></p></li>\n<li><p>Set ProGuard Rules(optional)</p>\n\n<p>4.1 In Project View, select the proguard-rules.pro file.</p>\n\n<p>4.2 Add in the following lines to tell ProGuard not to obfuscate certain classes. </p>\n\n<pre><code>-keepclassmembers class com.dom925.xxxx \n{\n  public *\n}\n</code></pre></li>\n</ol>\n\n<p><strong>Error that I am getting by following the steps are</strong> <br></p>\n\n<blockquote>\n  <p>Error:Execution failed for task ':app:packageRelease'.\n  Unable to compute hash of D:\\Android\\Pojectname\\app\\build\\intermediates\\classes-proguard\\release\\classes.jar</p>\n</blockquote>\n"},{"tags":["java","overloading"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1691594512,"post_id":76868926,"comment_id":135513428,"body_markdown":"Note you have a `Boolean` object in the `SomeClImpl#getAttribute` method. You then cast that to `T`. _This_ is where the CCE arises, because you called `doSmth(someCl.getAttribute(...));`. Note the parameter you passed to `#getAttribute` doesn&#39;t matter, it just accepts `Object`. Using `&lt;T&gt; T` without any type of token is _dangerous_ for this reason: try passing a `Class&lt;T&gt;` parameter, which would let you do `someCl.getAttribute(boolean.class)` to call the boolean method.","body":"Note you have a <code>Boolean</code> object in the <code>SomeClImpl#getAttribute</code> method. You then cast that to <code>T</code>. <i>This</i> is where the CCE arises, because you called <code>doSmth(someCl.getAttribute(...));</code>. Note the parameter you passed to <code>#getAttribute</code> doesn&#39;t matter, it just accepts <code>Object</code>. Using <code>&lt;T&gt; T</code> without any type of token is <i>dangerous</i> for this reason: try passing a <code>Class&lt;T&gt;</code> parameter, which would let you do <code>someCl.getAttribute(boolean.class)</code> to call the boolean method."}],"answers":[{"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1691596775,"post_id":76869159,"comment_id":135513973,"body_markdown":"Then why `doSmth(String b)` is more specific than `doSmth(boolean b)`, which is applicable for a boxed Boolean extends Object?","body":"Then why <code>doSmth(String b)</code> is more specific than <code>doSmth(boolean b)</code>, which is applicable for a boxed Boolean extends Object?"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1691597112,"post_id":76869159,"comment_id":135514053,"body_markdown":"@gdomo when choosing between the `doSmth` overloads, it uses only the type of argument passed, which is a generic type, which can&#39;t possibly be the primitive `boolean`. It _may_ be a `Boolean` which is an `Object` but it can only choose between `Object` and `String`.","body":"@gdomo when choosing between the <code>doSmth</code> overloads, it uses only the type of argument passed, which is a generic type, which can&#39;t possibly be the primitive <code>boolean</code>. It <i>may</i> be a <code>Boolean</code> which is an <code>Object</code> but it can only choose between <code>Object</code> and <code>String</code>."},{"owner":{"account_id":12419314,"reputation":535,"user_id":11968199,"display_name":"Maksym Kosenko"},"score":1,"creation_date":1691597329,"post_id":76869159,"comment_id":135514097,"body_markdown":"I believe a more accurate version of the answer would contain the exact rule which I managed to identify from the referred section by myself: \n&quot;If no preferred method exists according to the above rules, then a maximally specific method is preferred if it:\nhas a signature that is a subsignature of every maximally specific method&#39;s signature; and\nis return-type-substitutable (&#167;8.4.5) for every maximally specific method.&quot;","body":"I believe a more accurate version of the answer would contain the exact rule which I managed to identify from the referred section by myself:  &quot;If no preferred method exists according to the above rules, then a maximally specific method is preferred if it: has a signature that is a subsignature of every maximally specific method&#39;s signature; and is return-type-substitutable (&#167;8.4.5) for every maximally specific method.&quot;"}],"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691594253,"creation_date":1691594253,"answer_id":76869159,"question_id":76868926,"body_markdown":"The Java compiler chooses to call `doSmth(String b)` instead of `doSmth(Object b)` because of the language rule for [choosing the most specific method](https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.12.2.5).\r\n\r\nThe compiler doesn&#39;t know the type of the argument you pass to `doSmth`, which has a generic return type, so it chooses the most specific method.","title":"Method overloading and default return type of a parameterized method","body":"<p>The Java compiler chooses to call <code>doSmth(String b)</code> instead of <code>doSmth(Object b)</code> because of the language rule for <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.12.2.5\" rel=\"nofollow noreferrer\">choosing the most specific method</a>.</p>\n<p>The compiler doesn't know the type of the argument you pass to <code>doSmth</code>, which has a generic return type, so it chooses the most specific method.</p>\n"}],"owner":{"account_id":12419314,"reputation":535,"user_id":11968199,"display_name":"Maksym Kosenko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76869159,"answer_count":1,"score":2,"last_activity_date":1691594253,"creation_date":1691592457,"question_id":76868926,"body_markdown":"I have the following setup:\r\n\r\n```\r\npublic class SomeUtil {\r\n\r\n    public static void doSmth(boolean b) {\r\n        System.out.println(&quot;boolean&quot;);\r\n    }\r\n\r\n    public static void doSmth(String b) {\r\n        System.out.println(&quot;string&quot;);\r\n    }\r\n\r\n    public static void doSmth(Object b) {\r\n        System.out.println(&quot;object&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic interface SomeCl {\r\n    &lt;T&gt; T getAttribute(Object var1);\r\n}\r\n```\r\n\r\n```\r\npublic class SomeClImpl implements SomeCl {\r\n    @Override\r\n    public &lt;T&gt; T getAttribute(Object var1) {\r\n        Boolean o = Boolean.TRUE;\r\n        return (T)o;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class Demo {\r\n    public static void main(String[] args) {\r\n        SomeCl someCl = new SomeClImpl();\r\n        SomeUtil.doSmth(someCl.getAttribute(Boolean.TRUE));\r\n    }\r\n}\r\n```\r\nAnd when I run the main method the execution fails with a ClassCastException:\r\n&gt; Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class java.lang.String (java.lang.Boolean and java.lang.String are in module java.base of loader &#39;bootstrap&#39;) at Demo2.main(Demo2.java:4)\r\n\r\nSo the question is: why is JVM trying to cast Boolean to String? Why not to Object?\r\n\r\n\r\np.s. please do not advice me to cast it manually before **someCl.getAttribute(arg)** method calling or call it like **someCl.&lt;/&lt;/DesiredType/&gt;/&gt;getAttribute(arg)**","title":"Method overloading and default return type of a parameterized method","body":"<p>I have the following setup:</p>\n<pre><code>public class SomeUtil {\n\n    public static void doSmth(boolean b) {\n        System.out.println(&quot;boolean&quot;);\n    }\n\n    public static void doSmth(String b) {\n        System.out.println(&quot;string&quot;);\n    }\n\n    public static void doSmth(Object b) {\n        System.out.println(&quot;object&quot;);\n    }\n}\n</code></pre>\n<pre><code>public interface SomeCl {\n    &lt;T&gt; T getAttribute(Object var1);\n}\n</code></pre>\n<pre><code>public class SomeClImpl implements SomeCl {\n    @Override\n    public &lt;T&gt; T getAttribute(Object var1) {\n        Boolean o = Boolean.TRUE;\n        return (T)o;\n    }\n}\n</code></pre>\n<pre><code>public class Demo {\n    public static void main(String[] args) {\n        SomeCl someCl = new SomeClImpl();\n        SomeUtil.doSmth(someCl.getAttribute(Boolean.TRUE));\n    }\n}\n</code></pre>\n<p>And when I run the main method the execution fails with a ClassCastException:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class java.lang.String (java.lang.Boolean and java.lang.String are in module java.base of loader 'bootstrap') at Demo2.main(Demo2.java:4)</p>\n</blockquote>\n<p>So the question is: why is JVM trying to cast Boolean to String? Why not to Object?</p>\n<p>p.s. please do not advice me to cast it manually before <strong>someCl.getAttribute(arg)</strong> method calling or call it like <strong>someCl.&lt;/&lt;/DesiredType/&gt;/&gt;getAttribute(arg)</strong></p>\n"},{"tags":["java","arrays","sorting","lambda","java-8"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":0,"creation_date":1393171887,"post_id":21970719,"comment_id":33291357,"body_markdown":"_&quot;Did it exactly the same way, yet it doesn&#39;t work.&quot;_ No you didn&#39;t, read carefully what they did. You have syntax errors.","body":"<i>&quot;Did it exactly the same way, yet it doesn&#39;t work.&quot;</i> No you didn&#39;t, read carefully what they did. You have syntax errors."},{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":0,"creation_date":1393172510,"post_id":21970719,"comment_id":33291596,"body_markdown":"@ZouZou Perhaps he did. I don&#39;t think the OP is even using Java 8.","body":"@ZouZou Perhaps he did. I don&#39;t think the OP is even using Java 8."}],"answers":[{"comments":[{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":0,"creation_date":1393172339,"post_id":21970798,"comment_id":33291534,"body_markdown":"Works for me... Are you sure you&#39;re using Java 8? Which IDE are you using?","body":"Works for me... Are you sure you&#39;re using Java 8? Which IDE are you using?"},{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":1,"creation_date":1393172401,"post_id":21970798,"comment_id":33291553,"body_markdown":"@lavsprat It also works for me, it prints `[May, June, July, March, April, August, January, October, February, December, September]`... What Java 8 version are you using?","body":"@lavsprat It also works for me, it prints <code>[May, June, July, March, April, August, January, October, February, December, September]</code>... What Java 8 version are you using?"},{"owner":{"account_id":3468605,"reputation":1689,"user_id":2903567,"accept_rate":80,"display_name":"matt-pielat"},"score":0,"creation_date":1393172762,"post_id":21970798,"comment_id":33291691,"body_markdown":"I&#39;m using Eclipse.\n[This](http://www.java.com/en/download/installed.jsp?detect=jre) site says I have Version 7 Update 51.","body":"I&#39;m using Eclipse. <a href=\"http://www.java.com/en/download/installed.jsp?detect=jre\" rel=\"nofollow noreferrer\">This</a> site says I have Version 7 Update 51."},{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":2,"creation_date":1393172985,"post_id":21970798,"comment_id":33291788,"body_markdown":"Well of course you can&#39;t use lambdas then, as they are only available in Java 8.","body":"Well of course you can&#39;t use lambdas then, as they are only available in Java 8."}],"tags":[],"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1393172083,"creation_date":1393172083,"answer_id":21970798,"question_id":21970719,"body_markdown":"You&#39;re looking for this:\r\n\r\n    Arrays.sort(months, (a, b) -&gt; Integer.signum(a.length() - b.length()));\r\n","title":"java: Arrays.sort() with lambda expression","body":"<p>You're looking for this:</p>\n\n<pre><code>Arrays.sort(months, (a, b) -&gt; Integer.signum(a.length() - b.length()));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":2,"creation_date":1393172246,"post_id":21970805,"comment_id":33291493,"body_markdown":"+1 for showing `Comparator.comparing`, it is so much easier to grasp than writing a custom lambda or `Comparator`.","body":"+1 for showing <code>Comparator.comparing</code>, it is so much easier to grasp than writing a custom lambda or <code>Comparator</code>."},{"owner":{"account_id":3468605,"reputation":1689,"user_id":2903567,"accept_rate":80,"display_name":"matt-pielat"},"score":0,"creation_date":1393172296,"post_id":21970805,"comment_id":33291514,"body_markdown":"Well, that&#39;s helpful, but I&#39;d like to know what&#39;s wrong with my solution.","body":"Well, that&#39;s helpful, but I&#39;d like to know what&#39;s wrong with my solution."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1393172371,"post_id":21970805,"comment_id":33291541,"body_markdown":"@lavsprat I have added something showing your syntax error.","body":"@lavsprat I have added something showing your syntax error."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1393172533,"post_id":21970805,"comment_id":33291608,"body_markdown":"I suggest using `Integer.compare` instead of signum of `-`.","body":"I suggest using <code>Integer.compare</code> instead of signum of <code>-</code>."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1393172592,"post_id":21970805,"comment_id":33291634,"body_markdown":"@PeterLawrey Indeed - `signum(a-b)` has the risk of overflowing (even if it&#39;s unlikely for strings).","body":"@PeterLawrey Indeed - <code>signum(a-b)</code> has the risk of overflowing (even if it&#39;s unlikely for strings)."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1393172745,"post_id":21970805,"comment_id":33291687,"body_markdown":"@lavsprat Then you don&#39;t have java 8 installed or you are not compiling with the right JDK or your IDE does not support it or you have a very old version or...","body":"@lavsprat Then you don&#39;t have java 8 installed or you are not compiling with the right JDK or your IDE does not support it or you have a very old version or..."},{"owner":{"account_id":3468605,"reputation":1689,"user_id":2903567,"accept_rate":80,"display_name":"matt-pielat"},"score":0,"creation_date":1393172867,"post_id":21970805,"comment_id":33291738,"body_markdown":"Oracle site says &quot;You have the recommended Java installed (Version 7 Update 51).&quot;.","body":"Oracle site says &quot;You have the recommended Java installed (Version 7 Update 51).&quot;."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1393172899,"post_id":21970805,"comment_id":33291750,"body_markdown":"@lavsprat huh.... Version 7 != Version 8... Java 8 is here: https://jdk8.java.net/download.html","body":"@lavsprat huh.... Version 7 != Version 8... Java 8 is here: <a href=\"https://jdk8.java.net/download.html\" rel=\"nofollow noreferrer\">jdk8.java.net/download.html</a>"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1393175006,"post_id":21970805,"comment_id":33292566,"body_markdown":"I don&#39;t think `-` can overflow in this case, as both values are non-negative.","body":"I don&#39;t think <code>-</code> can overflow in this case, as both values are non-negative."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1393241924,"post_id":21970805,"comment_id":33319068,"body_markdown":"`Integer.signum` is obsolete. Just returning `a-b` (for these special `a` and `b` where `a-b` cannot overflow, of course) is enough. There is no need to set the absolute value to `1`. So wrapping a value which has the right sign already with an `Integer.signum(…)` call makes no sense for a `Comparator`.","body":"<code>Integer.signum</code> is obsolete. Just returning <code>a-b</code> (for these special <code>a</code> and <code>b</code> where <code>a-b</code> cannot overflow, of course) is enough. There is no need to set the absolute value to <code>1</code>. So wrapping a value which has the right sign already with an <code>Integer.signum(…)</code> call makes no sense for a <code>Comparator</code>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1477656266,"post_id":21970805,"comment_id":67866319,"body_markdown":"I certainly prefer `Comparator.comparingInt()` over `comparing()` when what you are comparing are indeed `int`s. It’s clearer (and also avoids unnecessary boxing).","body":"I certainly prefer <code>Comparator.comparingInt()</code> over <code>comparing()</code> when what you are comparing are indeed <code>int</code>s. It’s clearer (and also avoids unnecessary boxing)."}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":11,"down_vote_count":0,"up_vote_count":86,"is_accepted":true,"score":86,"last_activity_date":1477656862,"creation_date":1393172118,"answer_id":21970805,"question_id":21970719,"body_markdown":"The cleanest way would be:\r\n\r\n    Arrays.sort(months, Comparator.comparingInt(String::length));\r\n\r\nor, with a static import:\r\n\r\n    Arrays.sort(months, comparingInt(String::length));\r\n\r\n----\r\n\r\nHowever, this would work too but is more verbose:\r\n\r\n    Arrays.sort(months,\r\n                (String a, String b) -&gt; a.length() - b.length());\r\n\r\nOr shorter:\r\n\r\n    Arrays.sort(months, (a, b) -&gt; a.length() - b.length());\r\n\r\n----\r\nFinally your last one:\r\n\r\n    Arrays.sort(months, \r\n        (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()) }; \r\n    );\r\n\r\nhas the `;` misplaced - it should be:\r\n\r\n    Arrays.sort(months, \r\n        (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()); }\r\n    );\r\n","title":"java: Arrays.sort() with lambda expression","body":"<p>The cleanest way would be:</p>\n\n<pre><code>Arrays.sort(months, Comparator.comparingInt(String::length));\n</code></pre>\n\n<p>or, with a static import:</p>\n\n<pre><code>Arrays.sort(months, comparingInt(String::length));\n</code></pre>\n\n<hr>\n\n<p>However, this would work too but is more verbose:</p>\n\n<pre><code>Arrays.sort(months,\n            (String a, String b) -&gt; a.length() - b.length());\n</code></pre>\n\n<p>Or shorter:</p>\n\n<pre><code>Arrays.sort(months, (a, b) -&gt; a.length() - b.length());\n</code></pre>\n\n<hr>\n\n<p>Finally your last one:</p>\n\n<pre><code>Arrays.sort(months, \n    (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()) }; \n);\n</code></pre>\n\n<p>has the <code>;</code> misplaced - it should be:</p>\n\n<pre><code>Arrays.sort(months, \n    (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()); }\n);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":4,"creation_date":1393178979,"post_id":21971055,"comment_id":33294051,"body_markdown":"Useful comment, but not an answer.","body":"Useful comment, but not an answer."},{"owner":{"account_id":3659411,"reputation":40844,"user_id":3049628,"accept_rate":78,"display_name":"Tim B"},"score":0,"creation_date":1393180975,"post_id":21971055,"comment_id":33294824,"body_markdown":"@TedHopp It is an answer. His code isn&#39;t compiling because he&#39;s trying to use a Java 8 feature in Java 7!","body":"@TedHopp It is an answer. His code isn&#39;t compiling because he&#39;s trying to use a Java 8 feature in Java 7!"},{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":2,"creation_date":1393184607,"post_id":21971055,"comment_id":33296148,"body_markdown":"His code isn&#39;t compiling because it has a syntax error (semicolon at the end of the second argument to `Arrays.sort`).","body":"His code isn&#39;t compiling because it has a syntax error (semicolon at the end of the second argument to <code>Arrays.sort</code>)."},{"owner":{"account_id":29398,"reputation":10394,"user_id":1859863,"display_name":"Maurice Naftalin"},"score":1,"creation_date":1393352463,"post_id":21971055,"comment_id":33384069,"body_markdown":"This comment is a bit misleading, unless you count three weeks as being &quot;a few months&quot;: ship date is March 18th","body":"This comment is a bit misleading, unless you count three weeks as being &quot;a few months&quot;: ship date is March 18th"}],"tags":[],"owner":{"account_id":3659411,"reputation":40844,"user_id":3049628,"accept_rate":78,"display_name":"Tim B"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1393173332,"creation_date":1393173332,"answer_id":21971055,"question_id":21970719,"body_markdown":"The functionality you are looking for is in Java 8, which has not yet been released. It is scheduled for release in a few months if you want to wait, or if not beta downloads are available.\r\n","title":"java: Arrays.sort() with lambda expression","body":"<p>The functionality you are looking for is in Java 8, which has not yet been released. It is scheduled for release in a few months if you want to wait, or if not beta downloads are available.</p>\n"},{"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1691593910,"post_id":76869043,"comment_id":135513311,"body_markdown":"Note that `Integer#compare` doesn&#39;t state it, but the return value is always `-1`, `0`, or `1` (whereas the javadoc implies it&#39;s merely `&lt;0` or `&gt;0`, so it is subject to change). `#signum` explicitly states this relationship. Either way, for `Arrays#sort`, I don&#39;t see what this answer contributes that the others didn&#39;t already cover 9 years ago.","body":"Note that <code>Integer#compare</code> doesn&#39;t state it, but the return value is always <code>-1</code>, <code>0</code>, or <code>1</code> (whereas the javadoc implies it&#39;s merely <code>&lt;0</code> or <code>&gt;0</code>, so it is subject to change). <code>#signum</code> explicitly states this relationship. Either way, for <code>Arrays#sort</code>, I don&#39;t see what this answer contributes that the others didn&#39;t already cover 9 years ago."}],"tags":[],"owner":{"account_id":26901436,"reputation":1,"user_id":20478516,"display_name":"Mohamed Bilal D"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691593395,"creation_date":1691593395,"answer_id":76869043,"question_id":21970719,"body_markdown":"You can try this:\r\n\r\n    Arrays.sort(months, (a,b) -&gt; Integer.compare(a.length(), b.length()));","title":"java: Arrays.sort() with lambda expression","body":"<p>You can try this:</p>\n<pre><code>Arrays.sort(months, (a,b) -&gt; Integer.compare(a.length(), b.length()));\n</code></pre>\n"}],"owner":{"account_id":3468605,"reputation":1689,"user_id":2903567,"accept_rate":80,"display_name":"matt-pielat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132995,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":21970805,"answer_count":4,"score":34,"last_activity_date":1691593395,"creation_date":1393171663,"question_id":21970719,"body_markdown":"I want to sort String elements in the array `months` by length using `Arrays.sort` method. I was told [here](http://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html), that it&#39;s possible to use lambda expressions instead of creating new class implementing Comparator&lt;String&gt;. Did it exactly the same way, yet it doesn&#39;t work.\r\n\r\n\timport java.util.Arrays;\r\n\timport java.util.Comparator;\r\n\r\n\tpublic class MainClass {\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\t\r\n\t\tString[] months = {&quot;January&quot;,&quot;February&quot;,&quot;March&quot;,&quot;April&quot;,&quot;May&quot;,&quot;June&quot;,&quot;July&quot;,&quot;August&quot;,&quot;September&quot;,&quot;October&quot;,&quot;December&quot;};\r\n\t\t\r\n\t\tSystem.out.println(Arrays.toString(months)); //printing before\r\n\t\t\r\n\t\t\r\n\t\t//neither this works:\r\n\t\tArrays.sort(months, \r\n\t\t\t\t(a, b) -&gt; Integer.signum(a.length() - b.length())   \r\n\t\t);\r\n\r\n\t\t//nor this:\r\n\t\tArrays.sort(months, \r\n\t\t\t\t(String a, String b) -&gt; { return Integer.signum(a.length() - b.length()) }; \r\n\t\t);\r\n\r\n\r\n\t\tSystem.out.println(Arrays.toString(months)); //printing after\r\n\t}\r\n\t}","title":"java: Arrays.sort() with lambda expression","body":"<p>I want to sort String elements in the array <code>months</code> by length using <code>Arrays.sort</code> method. I was told <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"noreferrer\">here</a>, that it's possible to use lambda expressions instead of creating new class implementing Comparator. Did it exactly the same way, yet it doesn't work.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.Comparator;\n\npublic class MainClass {\npublic static void main(String[] args)\n{\n\n    String[] months = {\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"December\"};\n\n    System.out.println(Arrays.toString(months)); //printing before\n\n\n    //neither this works:\n    Arrays.sort(months, \n            (a, b) -&gt; Integer.signum(a.length() - b.length())   \n    );\n\n    //nor this:\n    Arrays.sort(months, \n            (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()) }; \n    );\n\n\n    System.out.println(Arrays.toString(months)); //printing after\n}\n}\n</code></pre>\n"},{"tags":["java","spring-integration-dsl"],"owner":{"account_id":29191196,"reputation":1,"user_id":22363291,"display_name":"Ilya Ilya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691593290,"creation_date":1691578956,"question_id":76867135,"body_markdown":"I have a code similar to this and my main problem that in first transform method the generic for the Message.class is &lt;MessageEvent&gt; and for the second one is &lt;String&gt; (because in the first one we transforming the payload from Message.class from MessageEvent.class to String.class) and as I specifying the same class (Message.class) in the second transform message spring applcation context also expect Message&lt;MessageEvent&gt;, but getting Message&lt;String&gt; and throwing exception below. I can&#39;t specify payload classes directly, because we also have we also use Headers in Message.class, that we need. \r\n\r\n```java\r\n@Override\r\n  protected IntegrationFlowDefinition&lt;?&gt; buildFlow() {\r\n        return IntegrationFlow.from(Kafka.messageDrivenChannelAdapter(consumerFactory, sourceTopic)))\r\n            .publishSubscribeChannel(channel -&gt; {\r\n                channel.subscribe(flow -&gt; flow\r\n                    .transform(Message.class, firstClass::someMethod)\r\n                    .transform(Message.class, secondClass::someMethod)\r\n                    .intercept(doLog(log, Level.INFO, &quot;OUT&quot;))\r\n                    .handle(Jms.outboundAdapter(connectionFactory)\r\n                        .headerMapper(jmsHeaderMapper)\r\n                        .destination(outputQueue)));\r\n    }\r\n```\r\n\r\nException message:\r\n\r\n```\r\n    no suitable method found for transform(Class, firstClass[...]method)\r\n    .transform(Message.class, firstClass::someMethod)\r\n    ^\r\n    method BaseIntegrationFlowDefinition.transform(String, Consumer) is not applicable (argument mismatch; Class cannot be converted to String)\r\n    method BaseIntegrationFlowDefinition.transform(Object, String) is not applicable (argument mismatch; String is not a functional interface)\r\n    method BaseIntegrationFlowDefinition.transform(MessageProcessorSpec, Consumer) is not applicable (argument mismatch; Class cannot be converted to MessageProcessorSpec)\r\n    method BaseIntegrationFlowDefinition.transform(Class, GenericTransformer) is not applicable (argument mismatch; invalid method reference incompatible types: Object cannot be converted to Message)\r\n    method IntegrationFlowDefinition.transform(GenericTransformer, Consumer) is not applicable (argument mismatch; Class cannot be converted to GenericTransformer)\r\n```\r\n\r\nI found solution with workaround how to directly specify generic for the class (&quot;(Class&lt;Message&lt;MessageEvent&gt;&gt;) (Class&lt;?&gt;) Message.class&quot;) and it is works correctly, but I don&#39;t think that it is the best approach. How can I resolve this issue without that workaround? \r\n\r\nIf i specify methods without expected class I&#39;m getting classCastException, because of the same issue\r\n```java\r\n    @Override\r\n    protected IntegrationFlowDefinition&lt;?&gt; buildFlow() {\r\n        return IntegrationFlow.from(Kafka.messageDrivenChannelAdapter()))\r\n            .publishSubscribeChannel(channel -&gt; {\r\n                channel.subscribe(flow -&gt; flow\r\n                    .transform(firstClass::someMethod)\r\n                    .transform(secondClass::someMethod)\r\n                    .intercept(doLog(log, Level.INFO, &quot;OUT&quot;))\r\n                    .handle()\r\n```","title":"Java Spring DSL Is it possible to use two transformers with Message.class but different Generics in it?","body":"<p>I have a code similar to this and my main problem that in first transform method the generic for the Message.class is  and for the second one is  (because in the first one we transforming the payload from Message.class from MessageEvent.class to String.class) and as I specifying the same class (Message.class) in the second transform message spring applcation context also expect Message, but getting Message and throwing exception below. I can't specify payload classes directly, because we also have we also use Headers in Message.class, that we need.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n  protected IntegrationFlowDefinition&lt;?&gt; buildFlow() {\n        return IntegrationFlow.from(Kafka.messageDrivenChannelAdapter(consumerFactory, sourceTopic)))\n            .publishSubscribeChannel(channel -&gt; {\n                channel.subscribe(flow -&gt; flow\n                    .transform(Message.class, firstClass::someMethod)\n                    .transform(Message.class, secondClass::someMethod)\n                    .intercept(doLog(log, Level.INFO, &quot;OUT&quot;))\n                    .handle(Jms.outboundAdapter(connectionFactory)\n                        .headerMapper(jmsHeaderMapper)\n                        .destination(outputQueue)));\n    }\n</code></pre>\n<p>Exception message:</p>\n<pre><code>    no suitable method found for transform(Class, firstClass[...]method)\n    .transform(Message.class, firstClass::someMethod)\n    ^\n    method BaseIntegrationFlowDefinition.transform(String, Consumer) is not applicable (argument mismatch; Class cannot be converted to String)\n    method BaseIntegrationFlowDefinition.transform(Object, String) is not applicable (argument mismatch; String is not a functional interface)\n    method BaseIntegrationFlowDefinition.transform(MessageProcessorSpec, Consumer) is not applicable (argument mismatch; Class cannot be converted to MessageProcessorSpec)\n    method BaseIntegrationFlowDefinition.transform(Class, GenericTransformer) is not applicable (argument mismatch; invalid method reference incompatible types: Object cannot be converted to Message)\n    method IntegrationFlowDefinition.transform(GenericTransformer, Consumer) is not applicable (argument mismatch; Class cannot be converted to GenericTransformer)\n</code></pre>\n<p>I found solution with workaround how to directly specify generic for the class (&quot;(Class&lt;Message&gt;) (Class&lt;?&gt;) Message.class&quot;) and it is works correctly, but I don't think that it is the best approach. How can I resolve this issue without that workaround?</p>\n<p>If i specify methods without expected class I'm getting classCastException, because of the same issue</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected IntegrationFlowDefinition&lt;?&gt; buildFlow() {\n        return IntegrationFlow.from(Kafka.messageDrivenChannelAdapter()))\n            .publishSubscribeChannel(channel -&gt; {\n                channel.subscribe(flow -&gt; flow\n                    .transform(firstClass::someMethod)\n                    .transform(secondClass::someMethod)\n                    .intercept(doLog(log, Level.INFO, &quot;OUT&quot;))\n                    .handle()\n</code></pre>\n"},{"tags":["java","trim"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1691580275,"post_id":76867286,"comment_id":135510128,"body_markdown":"It&#39;s unclear to me what the input text looks like and what the output would be. Can you please edit your question to include a relevant sample of this text and the output you expect? There&#39;s no way to exclude characters from `trim`, but an alternate solution may be possible knowing the inputs and outputs.","body":"It&#39;s unclear to me what the input text looks like and what the output would be. Can you please edit your question to include a relevant sample of this text and the output you expect? There&#39;s no way to exclude characters from <code>trim</code>, but an alternate solution may be possible knowing the inputs and outputs."},{"owner":{"account_id":462886,"reputation":2853,"user_id":865448,"accept_rate":82,"display_name":"tostao"},"score":0,"creation_date":1691580329,"post_id":76867286,"comment_id":135510138,"body_markdown":"Please add kind of example what have you done/tried and what is needed.","body":"Please add kind of example what have you done/tried and what is needed."},{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":3,"creation_date":1691584361,"post_id":76867286,"comment_id":135510993,"body_markdown":"Why don&#39;t you split on `\\n`, trim and then add `\\n` to each row afterwards? When splitting on new line char  like `text.split(&quot;\\n&quot;)` this sequence gets lost anyway and must be put back afterwards. I would anyway rather suggest to split on `\\\\R` which is Java&#39;s new version of detecting new lines: `text.split(&quot;\\\\R&quot;)`","body":"Why don&#39;t you split on <code>\\n</code>, trim and then add <code>\\n</code> to each row afterwards? When splitting on new line char  like <code>text.split(&quot;\\n&quot;)</code> this sequence gets lost anyway and must be put back afterwards. I would anyway rather suggest to split on <code>\\\\R</code> which is Java&#39;s new version of detecting new lines: <code>text.split(&quot;\\\\R&quot;)</code>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691595700,"post_id":76867286,"comment_id":135513732,"body_markdown":"and add the second argument as in `text.split(&quot;\\n&quot;, -1)` (to @Slevin suggestion) if you want to preserve all `\\n` (including the ones on the end of the text)","body":"and add the second argument as in <code>text.split(&quot;\\n&quot;, -1)</code> (to @Slevin suggestion) if you want to preserve all <code>\\n</code> (including the ones on the end of the text)"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691596232,"post_id":76867286,"comment_id":135513852,"body_markdown":"I would  also test `text.stripIndent().indent(Integer.MIN_VALUE)` (but not sure if I did understand the question correctly)","body":"I would  also test <code>text.stripIndent().indent(Integer.MIN_VALUE)</code> (but not sure if I did understand the question correctly)"}],"answers":[{"comments":[{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":2,"creation_date":1691582643,"post_id":76867444,"comment_id":135510638,"body_markdown":"Don&#39;t forget that `trim` returns a NEW string, it doesn&#39;t modify the string! You have to assign the return value to something.","body":"Don&#39;t forget that <code>trim</code> returns a NEW string, it doesn&#39;t modify the string! You have to assign the return value to something."},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1691591473,"post_id":76867444,"comment_id":135512735,"body_markdown":"Yes, modified the code, thanks for catching, but that doesn&#39;t take away from clarity of the answer","body":"Yes, modified the code, thanks for catching, but that doesn&#39;t take away from clarity of the answer"}],"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591452,"creation_date":1691581377,"answer_id":76867444,"question_id":76867286,"body_markdown":"You will have to do it manually, but it is not that hard. If you already split your string into multiple strings based on `\\n` character than all your string will only have character `\\n` only once or not at all, and if your String has `\\n` character it will always will be the last one. So, what you can do is\r\n\r\n    boolean newLinePresent = myString.endsWith(&quot;\\n&quot;);\r\n    myString = myString.trim();\r\n    if(newLinePresent) {\r\n      myString = myString + &quot;\\n&quot;;\r\n    }","title":"How to exclude &quot;\\n&quot; escape character from trim() method?","body":"<p>You will have to do it manually, but it is not that hard. If you already split your string into multiple strings based on <code>\\n</code> character than all your string will only have character <code>\\n</code> only once or not at all, and if your String has <code>\\n</code> character it will always will be the last one. So, what you can do is</p>\n<pre><code>boolean newLinePresent = myString.endsWith(&quot;\\n&quot;);\nmyString = myString.trim();\nif(newLinePresent) {\n  myString = myString + &quot;\\n&quot;;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691595833,"post_id":76869014,"comment_id":135513756,"body_markdown":"but be aware that using the one-argument `split()` will discard all newlines at the end of the text (maybe even desired?)","body":"but be aware that using the one-argument <code>split()</code> will discard all newlines at the end of the text (maybe even desired?)"}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691593108,"creation_date":1691593108,"answer_id":76869014,"question_id":76867286,"body_markdown":"If you’re reading from a file, don’t read the entire file content into a single string.  Instead, trim each line:\r\n\r\n    List&lt;String&gt; lines = new ArrayList&lt;&gt;();\r\n\r\n    try (BufferedReader reader = Files.newBufferedReader(\r\n            Path.of(&quot;C:\\\\Users\\\\caliskanata\\\\Documents\\\\file.txt&quot;))) {\r\n\r\n        String line;\r\n        while ((line = reader.readLine()) != null) {\r\n            lines.add(line.trim());\r\n        }\r\n    }\r\n\r\nIf your text is not coming from a file, you can split it as Slevin suggested, and trim each part:\r\n\r\n    String[] untrimmedLines = text.split(&quot;\\\\R&quot;);\r\n    List&lt;String&gt; lines = new ArrayList&lt;&gt;(untrimmedLines.length);\r\n    for (String untrimmedLine : untrimmedLines) {\r\n        lines.add(untrimmedLine.trim());\r\n    }\r\n\r\nYou can also do it with a [Stream](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html#splitAsStream(java.lang.CharSequence)):\r\n\r\n    List&lt;String&gt; lines =\r\n        Pattern.compile(&quot;\\\\R&quot;).splitAsStream(text).map(String::trim).toList();\r\n\r\nSince you wrote “save them into an array,” you can easily convert a List to an array:\r\n\r\n    String[] array = lines.toArray(String[]::new);\r\n","title":"How to exclude &quot;\\n&quot; escape character from trim() method?","body":"<p>If you’re reading from a file, don’t read the entire file content into a single string.  Instead, trim each line:</p>\n<pre><code>List&lt;String&gt; lines = new ArrayList&lt;&gt;();\n\ntry (BufferedReader reader = Files.newBufferedReader(\n        Path.of(&quot;C:\\\\Users\\\\caliskanata\\\\Documents\\\\file.txt&quot;))) {\n\n    String line;\n    while ((line = reader.readLine()) != null) {\n        lines.add(line.trim());\n    }\n}\n</code></pre>\n<p>If your text is not coming from a file, you can split it as Slevin suggested, and trim each part:</p>\n<pre><code>String[] untrimmedLines = text.split(&quot;\\\\R&quot;);\nList&lt;String&gt; lines = new ArrayList&lt;&gt;(untrimmedLines.length);\nfor (String untrimmedLine : untrimmedLines) {\n    lines.add(untrimmedLine.trim());\n}\n</code></pre>\n<p>You can also do it with a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html#splitAsStream(java.lang.CharSequence)\" rel=\"nofollow noreferrer\">Stream</a>:</p>\n<pre><code>List&lt;String&gt; lines =\n    Pattern.compile(&quot;\\\\R&quot;).splitAsStream(text).map(String::trim).toList();\n</code></pre>\n<p>Since you wrote “save them into an array,” you can easily convert a List to an array:</p>\n<pre><code>String[] array = lines.toArray(String[]::new);\n</code></pre>\n"}],"owner":{"account_id":24808949,"reputation":548,"user_id":18690626,"display_name":"eaidy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691593108,"creation_date":1691580139,"question_id":76867286,"body_markdown":"Given a text, it contains information rows as new lines. I need to perform something like a custom parsing to split these rows and save them into an array. Since the new lines in the text are determined by the escape character &quot;\\n&quot;, i&#39;m performing the parsing according to these escape characters. The problem is, some text data comes with a lot of whitespaces outside the main data text. And when i proceed to perform another split operation to turn the rows into key, value pairs, these whitespaces causing me problems during runtime.\r\n\r\nIs there a way in Java so i can trim a String but exclude &quot;\\n&quot; escape character ?\r\n\r\n","title":"How to exclude &quot;\\n&quot; escape character from trim() method?","body":"<p>Given a text, it contains information rows as new lines. I need to perform something like a custom parsing to split these rows and save them into an array. Since the new lines in the text are determined by the escape character &quot;\\n&quot;, i'm performing the parsing according to these escape characters. The problem is, some text data comes with a lot of whitespaces outside the main data text. And when i proceed to perform another split operation to turn the rows into key, value pairs, these whitespaces causing me problems during runtime.</p>\n<p>Is there a way in Java so i can trim a String but exclude &quot;\\n&quot; escape character ?</p>\n"},{"tags":["java","string","string-interning","string-pool"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688032405,"post_id":76579840,"comment_id":135020546,"body_markdown":"You&#39;re overlooking the possibility that the compiler elided your redundant `new String(&quot;12&quot;)` and `new String(&quot;21&quot;)` into `&quot;1221&quot;` at compile time.","body":"You&#39;re overlooking the possibility that the compiler elided your redundant <code>new String(&quot;12&quot;)</code> and <code>new String(&quot;21&quot;)</code> into <code>&quot;1221&quot;</code> at compile time."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1688032486,"post_id":76579840,"comment_id":135020559,"body_markdown":"@user207421 In that case whether `intern` is called would not matter and both cases should print true.","body":"@user207421 In that case whether <code>intern</code> is called would not matter and both cases should print true."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1688032690,"post_id":76579840,"comment_id":135020604,"body_markdown":"I think this is just unspecified behaviour. Nothing says this cannot happen. Nothing I can find says that the string literal has to be *in* the string pool by the time `intern` is called. `intern` could have added `new String(&quot;12&quot;) + new String(&quot;21&quot;)` to the string pool instead, and `&quot;1221&quot;` refers to the interned string.","body":"I think this is just unspecified behaviour. Nothing says this cannot happen. Nothing I can find says that the string literal has to be <i>in</i> the string pool by the time <code>intern</code> is called. <code>intern</code> could have added <code>new String(&quot;12&quot;) + new String(&quot;21&quot;)</code> to the string pool instead, and <code>&quot;1221&quot;</code> refers to the interned string."},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688034868,"post_id":76579840,"comment_id":135020981,"body_markdown":"@user207421 I have checked the bytecode, and at least it call the new Instruction.    7 new #4 &lt;java/lang/String&gt;. And I have no reason to believe it was optimized in the JIT stage.","body":"@user207421 I have checked the bytecode, and at least it call the new Instruction.    7 new #4 &lt;java/lang/String&gt;. And I have no reason to believe it was optimized in the JIT stage."},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688035926,"post_id":76579840,"comment_id":135021126,"body_markdown":"@Sweeper So is there any difference between constant pool and string pool? [constant pool](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4) and [Run-Time Constant Pool](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.1). I have not seen string pool in JVM Specification. So I consider string pool as a part of run-time constant pool, and it was loaded at &quot;Loading, Linking, and Initializing&quot; stage while a class was loaded by classloader.","body":"@Sweeper So is there any difference between constant pool and string pool? <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4\" rel=\"nofollow noreferrer\">constant pool</a> and <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.1\" rel=\"nofollow noreferrer\">Run-Time Constant Pool</a>. I have not seen string pool in JVM Specification. So I consider string pool as a part of run-time constant pool, and it was loaded at &quot;Loading, Linking, and Initializing&quot; stage while a class was loaded by classloader."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1688036323,"post_id":76579840,"comment_id":135021198,"body_markdown":"Oh wait, the answer to your question is literally in the second link: &quot;If the method `String.intern` has previously been called on an instance of class `String` containing a sequence of Unicode code points identical to that given by the `CONSTANT_String_info` structure, then the result of string literal derivation is a `reference` to that same instance of class `String`.&quot;","body":"Oh wait, the answer to your question is literally in the second link: &quot;If the method <code>String.intern</code> has previously been called on an instance of class <code>String</code> containing a sequence of Unicode code points identical to that given by the <code>CONSTANT_String_info</code> structure, then the result of string literal derivation is a <code>reference</code> to that same instance of class <code>String</code>.&quot;"},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688049632,"post_id":76579840,"comment_id":135024269,"body_markdown":"@Sweeper That make sense! The constant pool and string pool are indeed different. The Unicode code point in bytecode constant pool was loaded into run-time constant pool when class loaded. While that corresponding String instance was not created in string pool. In constant pool is just a Unicode sequence, while in string pool is a string instance, which contains other fields in addition to the Unicode sequence. The string instance is create and added into string pool when `ldc` instruction first push a string constant from constant pool or call intern function on string instance manually.","body":"@Sweeper That make sense! The constant pool and string pool are indeed different. The Unicode code point in bytecode constant pool was loaded into run-time constant pool when class loaded. While that corresponding String instance was not created in string pool. In constant pool is just a Unicode sequence, while in string pool is a string instance, which contains other fields in addition to the Unicode sequence. The string instance is create and added into string pool when <code>ldc</code> instruction first push a string constant from constant pool or call intern function on string instance manually."},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688050734,"post_id":76579840,"comment_id":135024547,"body_markdown":"@user16320675 Thank you so much to correct my misunderstanding on &quot;String Pool&quot; and &quot;Constant Pool&quot;. There is too much misinformation about it on the web. Its name is indeed misleading - we usally call &quot;string constant pool&quot;, and we do see CONSTANT_String_info in constant pool of bytecode. So in the above code, there is There are three identical &quot;1221&quot; sequences in memory. One is string object in heap by calling `StringBuilder.toString()`, One is string object added to string pool by calling `intern()` function, and the last is Unicode sequences in constant pool.","body":"@user16320675 Thank you so much to correct my misunderstanding on &quot;String Pool&quot; and &quot;Constant Pool&quot;. There is too much misinformation about it on the web. Its name is indeed misleading - we usally call &quot;string constant pool&quot;, and we do see CONSTANT_String_info in constant pool of bytecode. So in the above code, there is There are three identical &quot;1221&quot; sequences in memory. One is string object in heap by calling <code>StringBuilder.toString()</code>, One is string object added to string pool by calling <code>intern()</code> function, and the last is Unicode sequences in constant pool."},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688051399,"post_id":76579840,"comment_id":135024690,"body_markdown":"@user16320675 The last question I&#39;m not sure about is that I can&#39;t see the code or entry of the string pool in the String class source code. Which is said &quot;A pool of strings, initially empty, is maintained privately by the class String&quot; in [string](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#intern()) . And there is no more description in the JVM specification. Maybe it depends on the specific jvm implementation. And maybe Hotspot treats the string class in a special way and does extra work, compared to other custom classes.","body":"@user16320675 The last question I&#39;m not sure about is that I can&#39;t see the code or entry of the string pool in the String class source code. Which is said &quot;A pool of strings, initially empty, is maintained privately by the class String&quot; in <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#intern()\" rel=\"nofollow noreferrer\">string</a> . And there is no more description in the JVM specification. Maybe it depends on the specific jvm implementation. And maybe Hotspot treats the string class in a special way and does extra work, compared to other custom classes."}],"answers":[{"tags":[],"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691567895,"creation_date":1691567895,"answer_id":76865704,"question_id":76579840,"body_markdown":"I am the questioner.\r\n\r\nThanks for the discussion with @Sweeper and @user16320675, I have new understanding of this problem, and I share it with you here.\r\n\r\nThe error occurred in understanding 2 and 6, the string pool was not loaded along with the class loading. `s1.intern()` is the first time adds &quot;1221&quot; to the string pool. And then `String s2 = &quot;1221&quot;` will change the behavior according to whether &quot;1221&quot; exists in the string pool.\r\n\r\nIn order to better explain this problem, first define the key concepts involved.\r\n\r\n## key concept\r\n\r\n - [Constant pool](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4): A Data structure in bytecode, used to store constants, strings, classes, fields, methods, interfaces, parameter types, etc. used in source code. Stored in a bytecode file on the hard disk.\r\n - [Runtime constant pool](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.1): When the program is running, the constant pool in memory. When the class is loaded, the constant pool data will be loaded into the JVM method area to form a runtime constant pool.\r\n - [CONSTANT_String_info](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.3): A data structure in the constant pool, which stores the Unicode sequence corresponding to the string literal in the source code\r\n - [String pool](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#intern()): A memory area in the JDK8 heap for accessing used String instances.\r\n - [ldc #5](https://docs.oracle.com/javase/specs/jvms/se19/html/jvms-6.html#jvms-6.5.ldc): push the No.5 constant from the runtime constant pool to the operand stack. When using a string represented by a literal, it will first check whether there is a corresponding string instance in the string pool. If it exists, its reference address is pushed into the stack; if it does not exist, a string instance is created in the string pool and its address is pushed into the stack.\r\n\r\n## wrong reason\r\n\r\nThe error comes from misunderstanding the relationship between the `string pool` and the `constant pool` (hereafter using the constant pool and the runtime constant pool indiscriminately).\r\n\r\nAlthough it is usually called `string constant pool`, it does not have a relationship with the `constant pool`. Therefore, it will not be loaded as the class is loaded. In JDK6, both the `string pool` and the `constant pool` are located in the permanent generation, and there seems to be some relationship between them. But in JDK8, the `string pool` was moved to the heap. It is not so much part of the `constant pool` as it is part of the `String class`. It can be understood as a private member variable of the `String class`, although it cannot be observed in the `String` source code.\r\n\r\nAfter the `String instance` in the `string pool` is created, the byte array in the `instance` cannot be changed. If a change operation is performed on an existing `String instance`, a new `String instance` will be generated, showing the characteristics of a constant, so it is usually called a `string constant pool`. But in order to avoid confusing the `string pool` and the `constant pool`, I tries to use the `string pool` instead of the string constant pool.\r\n\r\nAnother concept that is easily confused with it is `CONSTANT_String_info` in the `constant pool`. `String literals` are stored in Unicode sequences, and will be loaded into the `runtime constant pool` along with class loading. But it is fundamentally different from the `string pool`: `CONSTANT_String_info` only stores `Unicode sequences`, while the string pool stores `String instances`. `String instances` not only contain `Unicode sequences`, but also other member attributes, such as hash. And the `String class` is bound with many methods which cannot be executed on `CONSTANT_String_info`. The corresponding `String instance` can be generated by executing the String initialization function with the Unicode sequence in `CONSTANT_String_info` as a parameter.\r\n","title":"Java String intern function and ==","body":"<p>I am the questioner.</p>\n<p>Thanks for the discussion with @Sweeper and @user16320675, I have new understanding of this problem, and I share it with you here.</p>\n<p>The error occurred in understanding 2 and 6, the string pool was not loaded along with the class loading. <code>s1.intern()</code> is the first time adds &quot;1221&quot; to the string pool. And then <code>String s2 = &quot;1221&quot;</code> will change the behavior according to whether &quot;1221&quot; exists in the string pool.</p>\n<p>In order to better explain this problem, first define the key concepts involved.</p>\n<h2>key concept</h2>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4\" rel=\"nofollow noreferrer\">Constant pool</a>: A Data structure in bytecode, used to store constants, strings, classes, fields, methods, interfaces, parameter types, etc. used in source code. Stored in a bytecode file on the hard disk.</li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.1\" rel=\"nofollow noreferrer\">Runtime constant pool</a>: When the program is running, the constant pool in memory. When the class is loaded, the constant pool data will be loaded into the JVM method area to form a runtime constant pool.</li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.3\" rel=\"nofollow noreferrer\">CONSTANT_String_info</a>: A data structure in the constant pool, which stores the Unicode sequence corresponding to the string literal in the source code</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#intern()\" rel=\"nofollow noreferrer\">String pool</a>: A memory area in the JDK8 heap for accessing used String instances.</li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se19/html/jvms-6.html#jvms-6.5.ldc\" rel=\"nofollow noreferrer\">ldc #5</a>: push the No.5 constant from the runtime constant pool to the operand stack. When using a string represented by a literal, it will first check whether there is a corresponding string instance in the string pool. If it exists, its reference address is pushed into the stack; if it does not exist, a string instance is created in the string pool and its address is pushed into the stack.</li>\n</ul>\n<h2>wrong reason</h2>\n<p>The error comes from misunderstanding the relationship between the <code>string pool</code> and the <code>constant pool</code> (hereafter using the constant pool and the runtime constant pool indiscriminately).</p>\n<p>Although it is usually called <code>string constant pool</code>, it does not have a relationship with the <code>constant pool</code>. Therefore, it will not be loaded as the class is loaded. In JDK6, both the <code>string pool</code> and the <code>constant pool</code> are located in the permanent generation, and there seems to be some relationship between them. But in JDK8, the <code>string pool</code> was moved to the heap. It is not so much part of the <code>constant pool</code> as it is part of the <code>String class</code>. It can be understood as a private member variable of the <code>String class</code>, although it cannot be observed in the <code>String</code> source code.</p>\n<p>After the <code>String instance</code> in the <code>string pool</code> is created, the byte array in the <code>instance</code> cannot be changed. If a change operation is performed on an existing <code>String instance</code>, a new <code>String instance</code> will be generated, showing the characteristics of a constant, so it is usually called a <code>string constant pool</code>. But in order to avoid confusing the <code>string pool</code> and the <code>constant pool</code>, I tries to use the <code>string pool</code> instead of the string constant pool.</p>\n<p>Another concept that is easily confused with it is <code>CONSTANT_String_info</code> in the <code>constant pool</code>. <code>String literals</code> are stored in Unicode sequences, and will be loaded into the <code>runtime constant pool</code> along with class loading. But it is fundamentally different from the <code>string pool</code>: <code>CONSTANT_String_info</code> only stores <code>Unicode sequences</code>, while the string pool stores <code>String instances</code>. <code>String instances</code> not only contain <code>Unicode sequences</code>, but also other member attributes, such as hash. And the <code>String class</code> is bound with many methods which cannot be executed on <code>CONSTANT_String_info</code>. The corresponding <code>String instance</code> can be generated by executing the String initialization function with the Unicode sequence in <code>CONSTANT_String_info</code> as a parameter.</p>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691575150,"creation_date":1691575150,"answer_id":76866607,"question_id":76579840,"body_markdown":"Here is a short explanation. First operator `==` will be only `true` if two compared strings are actually the same instance of a `String` class. For 2 different instances of a String class that hold the same content the result would be `false`. So if you really want to compare the content of 2 Strings you **MUST** use methods `equals()` of a String class. Now if you write the following code:\r\n\r\n    String s1 = &quot;test&quot;;\r\n    //s1.intern();\r\n    String s2 = &quot;test&quot;;\r\n    System.out.println(s1==s2) // output most likely will be true;\r\n\r\nEven if you don&#39;t invoke `s1.intern()` it will most likely (although not guaranteed) will be invoked behind the scenes by JVM and `s2` will be assigned the same instance, and that is why the `s1==s2` will be `true`. (If you invoke `s1.intern()` than the `true` result is guaranteed). Now if you run the following code:\r\n\r\n    String s1 = &quot;test&quot;;\r\n    s1.intern();\r\n    String s2 = new String(&quot;test&quot;);\r\n    System.out.println(s1==s2) // output will be false;\r\nBecause with `new String(&quot;test&quot;)` you forse creation of a new instance of a String regardless of what is already in existence in the internal pool\r\n","title":"Java String intern function and ==","body":"<p>Here is a short explanation. First operator <code>==</code> will be only <code>true</code> if two compared strings are actually the same instance of a <code>String</code> class. For 2 different instances of a String class that hold the same content the result would be <code>false</code>. So if you really want to compare the content of 2 Strings you <strong>MUST</strong> use methods <code>equals()</code> of a String class. Now if you write the following code:</p>\n<pre><code>String s1 = &quot;test&quot;;\n//s1.intern();\nString s2 = &quot;test&quot;;\nSystem.out.println(s1==s2) // output most likely will be true;\n</code></pre>\n<p>Even if you don't invoke <code>s1.intern()</code> it will most likely (although not guaranteed) will be invoked behind the scenes by JVM and <code>s2</code> will be assigned the same instance, and that is why the <code>s1==s2</code> will be <code>true</code>. (If you invoke <code>s1.intern()</code> than the <code>true</code> result is guaranteed). Now if you run the following code:</p>\n<pre><code>String s1 = &quot;test&quot;;\ns1.intern();\nString s2 = new String(&quot;test&quot;);\nSystem.out.println(s1==s2) // output will be false;\n</code></pre>\n<p>Because with <code>new String(&quot;test&quot;)</code> you forse creation of a new instance of a String regardless of what is already in existence in the internal pool</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691592831,"creation_date":1691575739,"answer_id":76866711,"question_id":76579840,"body_markdown":"```java\r\nString one = new String(&quot;abc&quot;);\r\nString two = new String(&quot;abc&quot;);\r\n\r\nboolean res1 = one == two;      // false -&gt; two different objects\r\nboolean res2 = one.equals(two); // true -&gt; content identical\r\n\r\none = one.intern(); // i.e. put string (if not exist) to the StringPool\r\n// and retrieve the object from the StringPool back \r\ntwo = two.intern();\r\nboolean res3 = one == two;      // true -&gt; same object from the StringPool\r\nboolean res4 = one.equals(two); // true -&gt; content identical\r\n```\r\n---\r\n```java\r\n// Put string literal &quot;12&quot; into StringPool\r\n// Create and object in heap with &quot;12&quot;\r\nString one = new String(&quot;12&quot;);\r\nString two = new String(&quot;21&quot;);\r\n\r\n// Concatenate two strings\r\n// Put result into StringPool and retrieve it back \r\nString two = one + two;\r\n\r\n\r\n// Concatenate two strings\r\n// Put result into StringPool and retrieve it back\r\n// Create an object in heap with result string\r\nString three = new String(one + two);\r\n\r\n\r\n// Put string literal to the StringPool and retrieve it back\r\nString four = &quot;1221&quot;;\r\n\r\nboolean res1 = two == four;  // true -&gt; both objects are from StringPool\r\nboolean res2 = three == four; // false -&gt; `three` is in Heap,\r\n// `four` is in StringPool\r\n\r\n\r\n// Put string into StringPool and retrieve it back\r\nthree = three.intern(); \r\n\r\nboolean res3 = three == four; // true -&gt; both objects are from StringPool\r\n```","title":"Java String intern function and ==","body":"<pre class=\"lang-java prettyprint-override\"><code>String one = new String(&quot;abc&quot;);\nString two = new String(&quot;abc&quot;);\n\nboolean res1 = one == two;      // false -&gt; two different objects\nboolean res2 = one.equals(two); // true -&gt; content identical\n\none = one.intern(); // i.e. put string (if not exist) to the StringPool\n// and retrieve the object from the StringPool back \ntwo = two.intern();\nboolean res3 = one == two;      // true -&gt; same object from the StringPool\nboolean res4 = one.equals(two); // true -&gt; content identical\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>// Put string literal &quot;12&quot; into StringPool\n// Create and object in heap with &quot;12&quot;\nString one = new String(&quot;12&quot;);\nString two = new String(&quot;21&quot;);\n\n// Concatenate two strings\n// Put result into StringPool and retrieve it back \nString two = one + two;\n\n\n// Concatenate two strings\n// Put result into StringPool and retrieve it back\n// Create an object in heap with result string\nString three = new String(one + two);\n\n\n// Put string literal to the StringPool and retrieve it back\nString four = &quot;1221&quot;;\n\nboolean res1 = two == four;  // true -&gt; both objects are from StringPool\nboolean res2 = three == four; // false -&gt; `three` is in Heap,\n// `four` is in StringPool\n\n\n// Put string into StringPool and retrieve it back\nthree = three.intern(); \n\nboolean res3 = three == four; // true -&gt; both objects are from StringPool\n</code></pre>\n"}],"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":3,"score":1,"last_activity_date":1691592831,"creation_date":1688031357,"question_id":76579840,"body_markdown":"Recently I&#39;m learning Hotspot JVM. When learning the string constant pool and String intern function, I encountered a very weird situation. After browsing a lot of answers, I still can’t explain this phenomenon, so I’m sending it out to discuss with you.\r\n\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        String s1 = new String(&quot;12&quot;) + new String(&quot;21&quot;);\r\n        s1.intern();\r\n        String s2 = &quot;1221&quot;;\r\n        System.out.println(s1 == s2); // true\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        String s1 = new String(&quot;12&quot;) + new String(&quot;21&quot;);\r\n        // s1.intern();\r\n        String s2 = &quot;1221&quot;;\r\n        System.out.println(s1 == s2); // false\r\n    }\r\n```\r\nThe reslut is based on Java8.\r\n\r\nSo the only difference between the two codes is call s1.intern() or not.\r\n\r\nHere is the document of intern function.\r\n&gt; When the intern method is invoked, if the pool already contains a string equal to this String object as determined by the equals(Object) method, then the string from the pool is returned. Otherwise, this String object is added to the pool and a reference to this String object is returned.\r\n\r\n\r\n\r\nHere is my understanding:\r\n\r\n1. By browsing the bytecode file, we can find &quot;12&quot;, &quot;21&quot;, &quot;1221&quot; in the constant pool.\r\n2. When the class is loaded, the constant pool in bytecode file is loaded into run-time constant pool. So the String pool contains &quot;12&quot;, &quot;21&quot;, &quot;1221&quot;.\r\n3. new String(&quot;12&quot;) create a String instance on the heap, which is different from &quot;12&quot; in String pool. So does new String(&quot;21&quot;).\r\n4. The &quot;+&quot; operator is transformed into StringBuilder and call its append and toString method, which can be seen in bytecode.\r\n5. In toString method calls new string, so s1 is String instance &quot;1221&quot; on the heap.\r\n6. s1.intern() look into String pool, and a &quot;1221&quot; is there, so it dose nothing. Btw, we don&#39;t use the return value, so it has nothing to do with s1.\r\n7. String s2 = &quot;1221&quot; just loaded the &quot;1221&quot; instance in the string pool. In bytecode, ldc #11, #11 is the index of &quot;1221&quot; in constant pool.\r\n8. The &quot;==&quot; operator comapre the address of reference type. The s1 point to the instance on the heap, the s2 point to the instance in the string pool. How can these two be equal?\r\n\r\nMy wonder:\r\n1. What exactly do s1 and s2 point to?\r\n2. Why call intern() methed will change the behavior? Even don&#39;t use the return value.\r\n\r\nHere is my assumption:\r\n1. The string pool is not initilized when class is loaded. Some answer said s1.intern() is the first time &quot;1221&quot; is loaded into string pool.\r\nBut how to explain &quot;1221&quot; is in the constant pool of bytecode file. Is there any specification about string pool loading timing?\r\n\r\n2. Another saying is intern function just save the reference to the instance on the heap, but the renference s1, s2 are still different. s1 point the heap, s2 point to the string pool, and string pool point to the heap. The reference is different from reference of a reference.","title":"Java String intern function and ==","body":"<p>Recently I'm learning Hotspot JVM. When learning the string constant pool and String intern function, I encountered a very weird situation. After browsing a lot of answers, I still can’t explain this phenomenon, so I’m sending it out to discuss with you.</p>\n<pre><code>    public static void main(String[] args) {\n        String s1 = new String(&quot;12&quot;) + new String(&quot;21&quot;);\n        s1.intern();\n        String s2 = &quot;1221&quot;;\n        System.out.println(s1 == s2); // true\n    }\n\n    public static void main(String[] args) {\n        String s1 = new String(&quot;12&quot;) + new String(&quot;21&quot;);\n        // s1.intern();\n        String s2 = &quot;1221&quot;;\n        System.out.println(s1 == s2); // false\n    }\n</code></pre>\n<p>The reslut is based on Java8.</p>\n<p>So the only difference between the two codes is call s1.intern() or not.</p>\n<p>Here is the document of intern function.</p>\n<blockquote>\n<p>When the intern method is invoked, if the pool already contains a string equal to this String object as determined by the equals(Object) method, then the string from the pool is returned. Otherwise, this String object is added to the pool and a reference to this String object is returned.</p>\n</blockquote>\n<p>Here is my understanding:</p>\n<ol>\n<li>By browsing the bytecode file, we can find &quot;12&quot;, &quot;21&quot;, &quot;1221&quot; in the constant pool.</li>\n<li>When the class is loaded, the constant pool in bytecode file is loaded into run-time constant pool. So the String pool contains &quot;12&quot;, &quot;21&quot;, &quot;1221&quot;.</li>\n<li>new String(&quot;12&quot;) create a String instance on the heap, which is different from &quot;12&quot; in String pool. So does new String(&quot;21&quot;).</li>\n<li>The &quot;+&quot; operator is transformed into StringBuilder and call its append and toString method, which can be seen in bytecode.</li>\n<li>In toString method calls new string, so s1 is String instance &quot;1221&quot; on the heap.</li>\n<li>s1.intern() look into String pool, and a &quot;1221&quot; is there, so it dose nothing. Btw, we don't use the return value, so it has nothing to do with s1.</li>\n<li>String s2 = &quot;1221&quot; just loaded the &quot;1221&quot; instance in the string pool. In bytecode, ldc #11, #11 is the index of &quot;1221&quot; in constant pool.</li>\n<li>The &quot;==&quot; operator comapre the address of reference type. The s1 point to the instance on the heap, the s2 point to the instance in the string pool. How can these two be equal?</li>\n</ol>\n<p>My wonder:</p>\n<ol>\n<li>What exactly do s1 and s2 point to?</li>\n<li>Why call intern() methed will change the behavior? Even don't use the return value.</li>\n</ol>\n<p>Here is my assumption:</p>\n<ol>\n<li><p>The string pool is not initilized when class is loaded. Some answer said s1.intern() is the first time &quot;1221&quot; is loaded into string pool.\nBut how to explain &quot;1221&quot; is in the constant pool of bytecode file. Is there any specification about string pool loading timing?</p>\n</li>\n<li><p>Another saying is intern function just save the reference to the instance on the heap, but the renference s1, s2 are still different. s1 point the heap, s2 point to the string pool, and string pool point to the heap. The reference is different from reference of a reference.</p>\n</li>\n</ol>\n"},{"tags":["java","stream","gzip"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691573668,"post_id":76866078,"comment_id":135508730,"body_markdown":"*It never enters the while because the read always return -1 and so nothing is read.* That doesn&#39;t make sense. The return value of `read` is checked *inside* the loop.","body":"<i>It never enters the while because the read always return -1 and so nothing is read.</i> That doesn&#39;t make sense. The return value of <code>read</code> is checked <i>inside</i> the loop."},{"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"score":0,"creation_date":1691574503,"post_id":76866078,"comment_id":135508904,"body_markdown":"By &quot;it never enters the while&quot;, I mean that the &#39;byteArrayOutputStream.write(data, 0, bytesRead)&#39; is never executed.","body":"By &quot;it never enters the while&quot;, I mean that the &#39;byteArrayOutputStream.write(data, 0, bytesRead)&#39; is never executed."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691579450,"post_id":76866078,"comment_id":135509958,"body_markdown":"How do you know it&#39;s &quot;never executed&quot;?","body":"How do you know it&#39;s &quot;never executed&quot;?"},{"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"score":0,"creation_date":1691580282,"post_id":76866078,"comment_id":135510130,"body_markdown":"I put breakpoints in my code.","body":"I put breakpoints in my code."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691583572,"post_id":76866078,"comment_id":135510841,"body_markdown":"There&#39;s only one way I can think of that it wouldn&#39;t and that&#39;s if an exception is thrown. There is nothing wrong with the code and it works fine for me","body":"There&#39;s only one way I can think of that it wouldn&#39;t and that&#39;s if an exception is thrown. There is nothing wrong with the code and it works fine for me"},{"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"score":0,"creation_date":1691590177,"post_id":76866078,"comment_id":135512397,"body_markdown":"No exception is thrown, I even catch Throwable to be sure.","body":"No exception is thrown, I even catch Throwable to be sure."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691590359,"post_id":76866078,"comment_id":135512454,"body_markdown":"Which OS are you using? Do you have a small `compressed` (you mentioned things around 32 bytes)","body":"Which OS are you using? Do you have a small <code>compressed</code> (you mentioned things around 32 bytes)"},{"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"score":0,"creation_date":1691591535,"post_id":76866078,"comment_id":135512752,"body_markdown":"I use Windows 10","body":"I use Windows 10"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691592520,"post_id":76866078,"comment_id":135512974,"body_markdown":"I was thinking of using your *actual* `compressed` but it would have to be in a binary file first","body":"I was thinking of using your <i>actual</i> <code>compressed</code> but it would have to be in a binary file first"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1691599782,"post_id":76866078,"comment_id":135514605,"body_markdown":"Are you sure that the code in your question is the real code?  `response = byteArrayOutputStream.toByteArray();` suggests that the type of `response` is either `byte[]` or `Object`, but two lines above, you are calling `response.getBytes()` which is not a method available with either of those types.  I don’t see how that code can compile.  If you don’t tell us what you’re actually doing, we won’t be able to spot your problem.","body":"Are you sure that the code in your question is the real code?  <code>response = byteArrayOutputStream.toByteArray();</code> suggests that the type of <code>response</code> is either <code>byte[]</code> or <code>Object</code>, but two lines above, you are calling <code>response.getBytes()</code> which is not a method available with either of those types.  I don’t see how that code can compile.  If you don’t tell us what you’re actually doing, we won’t be able to spot your problem."}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691592634,"creation_date":1691592634,"answer_id":76868940,"question_id":76866078,"body_markdown":"This is essentially *your* code (though the zip input stream should be in the try-with-resources block), which you can run:\r\n```\r\nimport java.util.*;\r\nimport java.util.zip.*;\r\nimport java.io.*;\r\n\r\npublic class Unzip {\r\n    public static void main(String[] args) throws Exception {\r\n        String s = &quot;H4sIAAAAAAAAA3WRQW+CQBCF7/6K0dOSUNKeiYeaYMNJo+nFxjQrTHQTYMkwhNLG/95lESSIe9jDmzffm51lqkGsasZ3IllvSs5L3jOhTOE0qS4hwwomO4TjwwzM6athNoEbiiPaoCQineaERYGx48Cf5X4cwu2w+/yr8kfayCWmgl1Yfa7Xwe57Hx4Cx7f0xvd1hFiyvJGsMjAeW6PK2JaKHcrYn1mtuqgEQYheN4jReJ65YtHgzYPmS3h5697VpT9s1KtIMdoeF17de+pt5GsbPg6KEl2g+Y22SsglZU8CWPfLbxquEEmOLiDCTfATYc5KZ4DdnIk+e0ikSSy2pE8JpmYXEGP3Vca8cI3dcP4BN4CC8VgCAAA=&quot;;\r\n        final int BUFFER_SIZE = 32;\r\n        byte[] compressed = Base64.getDecoder().decode(s);\r\n        try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n                ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(compressed)) {\r\n            GZIPInputStream gzipInputStream = new GZIPInputStream(byteArrayInputStream, BUFFER_SIZE);\r\n            byte[] data = new byte[BUFFER_SIZE];\r\n            int bytesRead;\r\n\r\n            while ((bytesRead = gzipInputStream.read(data)) != -1) {\r\n                byteArrayOutputStream.write(data, 0, bytesRead);\r\n            }\r\n\r\n            gzipInputStream.close();\r\n\r\n            System.out.println(new String(byteArrayOutputStream.toByteArray()));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();    \r\n        }\r\n    }\r\n}\r\n```","title":"Unable to read small compressed byte array from GZIPInputStream","body":"<p>This is essentially <em>your</em> code (though the zip input stream should be in the try-with-resources block), which you can run:</p>\n<pre><code>import java.util.*;\nimport java.util.zip.*;\nimport java.io.*;\n\npublic class Unzip {\n    public static void main(String[] args) throws Exception {\n        String s = &quot;H4sIAAAAAAAAA3WRQW+CQBCF7/6K0dOSUNKeiYeaYMNJo+nFxjQrTHQTYMkwhNLG/95lESSIe9jDmzffm51lqkGsasZ3IllvSs5L3jOhTOE0qS4hwwomO4TjwwzM6athNoEbiiPaoCQineaERYGx48Cf5X4cwu2w+/yr8kfayCWmgl1Yfa7Xwe57Hx4Cx7f0xvd1hFiyvJGsMjAeW6PK2JaKHcrYn1mtuqgEQYheN4jReJ65YtHgzYPmS3h5697VpT9s1KtIMdoeF17de+pt5GsbPg6KEl2g+Y22SsglZU8CWPfLbxquEEmOLiDCTfATYc5KZ4DdnIk+e0ikSSy2pE8JpmYXEGP3Vca8cI3dcP4BN4CC8VgCAAA=&quot;;\n        final int BUFFER_SIZE = 32;\n        byte[] compressed = Base64.getDecoder().decode(s);\n        try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n                ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(compressed)) {\n            GZIPInputStream gzipInputStream = new GZIPInputStream(byteArrayInputStream, BUFFER_SIZE);\n            byte[] data = new byte[BUFFER_SIZE];\n            int bytesRead;\n\n            while ((bytesRead = gzipInputStream.read(data)) != -1) {\n                byteArrayOutputStream.write(data, 0, bytesRead);\n            }\n\n            gzipInputStream.close();\n\n            System.out.println(new String(byteArrayOutputStream.toByteArray()));\n        } catch (IOException e) {\n            e.printStackTrace();    \n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76868940,"answer_count":1,"score":0,"last_activity_date":1691592634,"creation_date":1691571186,"question_id":76866078,"body_markdown":"I struggle with a problem and I can&#39;t solve it or find a useful answer to it.  \r\nI have a piece of code that compress an array of bytes :\r\n\r\n```\r\ntry (final ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\r\n    final GZIPOutputStream gzip = new GZIPOutputStream(byteArrayOutputStream);\r\n    gzip.write(response.getBytes());\r\n    gzip.close();\r\n    response = byteArrayOutputStream.toByteArray();\r\n} catch (IOException e) {\r\n    log.error(&quot;Problem in compression&quot;, e);\r\n}\r\n```\r\n\r\nIt works pretty well, and the resulting compressed array of bytes is saved in a database.\r\n\r\nI have another piece of code that will get the compressed array of bytes in the database and that will decompress it :\r\n\r\n```\r\ntry (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); \r\n    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(compressed)) {\r\n    GZIPInputStream gzipInputStream = new GZIPInputStream(byteArrayInputStream, BUFFER_SIZE);\r\n    byte[] data = new byte[BUFFER_SIZE];\r\n    int bytesRead;\r\n\r\n    while ((bytesRead = gzipInputStream.read(data)) != -1) {\r\n        byteArrayOutputStream.write(data, 0, bytesRead);\r\n    }\r\n\r\n    gzipInputStream.close();\r\n\r\n    return byteArrayOutputStream.toByteArray();\r\n} catch (IOException e) {\r\n    log.error(&quot;Problem in decompression&quot;, e);\r\n}\r\n```\r\n\r\nThe decompression works very well for &quot;big&quot; byte array (bigger than 32 bytes), but I have, for example a compressed array of 20 bytes and I cannot decompress it.   \r\nIt never enters the while because the read always return -1 and so nothing is read.   \r\nI tried to change the buffer size, etc..., but nothing works.   \r\nWhat am I doing wrong ?\r\n\r\nThank you in advance !","title":"Unable to read small compressed byte array from GZIPInputStream","body":"<p>I struggle with a problem and I can't solve it or find a useful answer to it.<br />\nI have a piece of code that compress an array of bytes :</p>\n<pre><code>try (final ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\n    final GZIPOutputStream gzip = new GZIPOutputStream(byteArrayOutputStream);\n    gzip.write(response.getBytes());\n    gzip.close();\n    response = byteArrayOutputStream.toByteArray();\n} catch (IOException e) {\n    log.error(&quot;Problem in compression&quot;, e);\n}\n</code></pre>\n<p>It works pretty well, and the resulting compressed array of bytes is saved in a database.</p>\n<p>I have another piece of code that will get the compressed array of bytes in the database and that will decompress it :</p>\n<pre><code>try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); \n    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(compressed)) {\n    GZIPInputStream gzipInputStream = new GZIPInputStream(byteArrayInputStream, BUFFER_SIZE);\n    byte[] data = new byte[BUFFER_SIZE];\n    int bytesRead;\n\n    while ((bytesRead = gzipInputStream.read(data)) != -1) {\n        byteArrayOutputStream.write(data, 0, bytesRead);\n    }\n\n    gzipInputStream.close();\n\n    return byteArrayOutputStream.toByteArray();\n} catch (IOException e) {\n    log.error(&quot;Problem in decompression&quot;, e);\n}\n</code></pre>\n<p>The decompression works very well for &quot;big&quot; byte array (bigger than 32 bytes), but I have, for example a compressed array of 20 bytes and I cannot decompress it.<br />\nIt never enters the while because the read always return -1 and so nothing is read.<br />\nI tried to change the buffer size, etc..., but nothing works.<br />\nWhat am I doing wrong ?</p>\n<p>Thank you in advance !</p>\n"},{"tags":["java","spring","spring-mvc","spring-scheduled"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691591381,"post_id":76868362,"comment_id":135512715,"body_markdown":"Interrupting threads is intentional, there&#39;s nothing to fix (but your expectations).","body":"Interrupting threads is intentional, there&#39;s nothing to fix (but your expectations)."},{"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"score":2,"creation_date":1691592413,"post_id":76868362,"comment_id":135512949,"body_markdown":"Thanks for your response @Kayaman, but unfortunately I think your expectations are wrong. If you were right the following code should not work as well: https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java","body":"Thanks for your response @Kayaman, but unfortunately I think your expectations are wrong. If you were right the following code should not work as well: <a href=\"https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java\" rel=\"nofollow noreferrer\">github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":62234,"reputation":19819,"user_id":185034,"accept_rate":100,"display_name":"Paul"},"score":2,"creation_date":1691597388,"post_id":76868362,"comment_id":135514114,"body_markdown":"I believe you need to configure the task executor via `setWaitForTasksToCompleteOnShutdown`, see https://www.baeldung.com/spring-boot-graceful-shutdown.","body":"I believe you need to configure the task executor via <code>setWaitForTasksToCompleteOnShutdown</code>, see <a href=\"https://www.baeldung.com/spring-boot-graceful-shutdown\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-graceful-shutdown</a>."},{"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"score":0,"creation_date":1691599102,"post_id":76868362,"comment_id":135514478,"body_markdown":"That&#39;s the application properties","body":"That&#39;s the application properties"},{"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"score":0,"creation_date":1691599433,"post_id":76868362,"comment_id":135514541,"body_markdown":"If you look at the class `TaskSchedulerBuilder` from spring, that&#39;s the one that maps properties to the scheduler configuration.","body":"If you look at the class <code>TaskSchedulerBuilder</code> from spring, that&#39;s the one that maps properties to the scheduler configuration."},{"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"score":2,"creation_date":1691605476,"post_id":76868362,"comment_id":135515596,"body_markdown":"I opened a bug fix issue on Spring Framework, supposedly they&#39;ll be fixing this behavior for the next version: https://github.com/spring-projects/spring-framework/issues/31019","body":"I opened a bug fix issue on Spring Framework, supposedly they&#39;ll be fixing this behavior for the next version: <a href=\"https://github.com/spring-projects/spring-framework/issues/31019\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/issues/31019</a>"}],"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":349,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1691592463,"creation_date":1691588609,"question_id":76868362,"body_markdown":"I have a Spring Boot 3 application making use of @Scheduled jobs for polling messages from SQS. I want to configure a graceful shutdown (when I send a SIGTERM via `kill pid`) so the current process messages can be finished before the POD is tore down.\r\n\r\nI set the following properties in `application.properties` file:\r\n```\r\nserver.shutdown=graceful\r\nspring.lifecycle.timeout-per-shutdown-phase=60s\r\nspring.task.execution.shutdown.await-termination=true\r\nspring.task.execution.shutdown.await-termination-period=60s\r\nspring.task.scheduling.shutdown.await-termination=true\r\nspring.task.scheduling.shutdown.await-termination-period=60s\r\n```\r\n\r\nAnd I have jobs scheduled like so:\r\n```java\r\n@Scheduled(fixedDelay = 1L, timeUnit = TimeUnit.SECONDS, initialDelay = 3L)\r\npublic void pollMessages() {\r\n    final var messages = sqsClient.receiveMessage(ReceiveMessageRequest.builder()\r\n                .queueUrl(queueUrl)\r\n                .waitTimeSeconds(maxWaitTime)\r\n                .maxNumberOfMessages(numberOfMessages)\r\n                .messageAttributeNames(&quot;.*&quot;)\r\n                .build());\r\n    // process messages....\r\n}\r\n```\r\n\r\nHowever, I&#39;m getting errors from AWS SDK when shutting down the application if there&#39;s any pending job polling for messages. It seems the shutdown process is interrupting Threads that are waiting a response from AWS SQS service.\r\n\r\n```\r\nUnexpected error occurred in scheduled task\r\ns.a.a.c.e.SdkInterruptedException: null\r\n    at s.a.a.c.i.h.InterruptMonitor.checkInterrupted(InterruptMonitor.java:55)\r\n    at s.a.a.c.i.h.p.s.AfterTransmissionExecutionInterceptorsStage.execute(AfterTransmissionExecutionInterceptorsStage.java:34)\r\n    at s.a.a.c.i.h.p.s.AfterTransmissionExecutionInterceptorsStage.execute(AfterTransmissionExecutionInterceptorsStage.java:28)\r\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:72)\r\n    ... 54 common frames omitted\r\nWrapped by: s.a.a.c.e.AbortedException: Thread was interrupted\r\n    at s.a.a.c.e.AbortedException$BuilderImpl.build(AbortedException.java:93)\r\n    at s.a.a.c.e.AbortedException.create(AbortedException.java:38)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.handleInterruptedException(ApiCallAttemptTimeoutTrackingStage.java:141)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.translatePipelineException(ApiCallAttemptTimeoutTrackingStage.java:105)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:89)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\r\n    at s.a.a.c.i.h.p.s.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\r\n    at s.a.a.c.i.h.p.s.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:52)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:37)\r\n    at s.a.a.c.i.h.p.s.RetryableStage.execute(RetryableStage.java:81)\r\n    at s.a.a.c.i.h.p.s.RetryableStage.execute(RetryableStag...\r\n```\r\n\r\nThe same happens if I have a scheduled job with a `Thread.sleep()`, the graceful shutdown interrupts the sleeping thread. For example:\r\n\r\n```java\r\n@Scheduled(fixedDelay = 1L, timeUnit = TimeUnit.SECONDS, initialDelay = 3L)\r\npublic void pollMessages() throws Exception {\r\n    Thread.sleep(10000); // Graceful shutdown interrupts this thread during sleep\r\n    // Extra processing steps omitted\r\n}\r\n```\r\n\r\nAny ideas on how to fix this to make the Graceful Shutdown not to interrupt sleeping threads on Scheduled tasks?\r\n\r\nEdit ------\r\n\r\nI made a standalone Java application that does pretty much what I would expect spring to do here: https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java","title":"Spring graceful shutdown not waiting for scheduled tasks with thread sleep","body":"<p>I have a Spring Boot 3 application making use of @Scheduled jobs for polling messages from SQS. I want to configure a graceful shutdown (when I send a SIGTERM via <code>kill pid</code>) so the current process messages can be finished before the POD is tore down.</p>\n<p>I set the following properties in <code>application.properties</code> file:</p>\n<pre><code>server.shutdown=graceful\nspring.lifecycle.timeout-per-shutdown-phase=60s\nspring.task.execution.shutdown.await-termination=true\nspring.task.execution.shutdown.await-termination-period=60s\nspring.task.scheduling.shutdown.await-termination=true\nspring.task.scheduling.shutdown.await-termination-period=60s\n</code></pre>\n<p>And I have jobs scheduled like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Scheduled(fixedDelay = 1L, timeUnit = TimeUnit.SECONDS, initialDelay = 3L)\npublic void pollMessages() {\n    final var messages = sqsClient.receiveMessage(ReceiveMessageRequest.builder()\n                .queueUrl(queueUrl)\n                .waitTimeSeconds(maxWaitTime)\n                .maxNumberOfMessages(numberOfMessages)\n                .messageAttributeNames(&quot;.*&quot;)\n                .build());\n    // process messages....\n}\n</code></pre>\n<p>However, I'm getting errors from AWS SDK when shutting down the application if there's any pending job polling for messages. It seems the shutdown process is interrupting Threads that are waiting a response from AWS SQS service.</p>\n<pre><code>Unexpected error occurred in scheduled task\ns.a.a.c.e.SdkInterruptedException: null\n    at s.a.a.c.i.h.InterruptMonitor.checkInterrupted(InterruptMonitor.java:55)\n    at s.a.a.c.i.h.p.s.AfterTransmissionExecutionInterceptorsStage.execute(AfterTransmissionExecutionInterceptorsStage.java:34)\n    at s.a.a.c.i.h.p.s.AfterTransmissionExecutionInterceptorsStage.execute(AfterTransmissionExecutionInterceptorsStage.java:28)\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:72)\n    ... 54 common frames omitted\nWrapped by: s.a.a.c.e.AbortedException: Thread was interrupted\n    at s.a.a.c.e.AbortedException$BuilderImpl.build(AbortedException.java:93)\n    at s.a.a.c.e.AbortedException.create(AbortedException.java:38)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.handleInterruptedException(ApiCallAttemptTimeoutTrackingStage.java:141)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.translatePipelineException(ApiCallAttemptTimeoutTrackingStage.java:105)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:89)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\n    at s.a.a.c.i.h.p.s.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\n    at s.a.a.c.i.h.p.s.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:52)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:37)\n    at s.a.a.c.i.h.p.s.RetryableStage.execute(RetryableStage.java:81)\n    at s.a.a.c.i.h.p.s.RetryableStage.execute(RetryableStag...\n</code></pre>\n<p>The same happens if I have a scheduled job with a <code>Thread.sleep()</code>, the graceful shutdown interrupts the sleeping thread. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Scheduled(fixedDelay = 1L, timeUnit = TimeUnit.SECONDS, initialDelay = 3L)\npublic void pollMessages() throws Exception {\n    Thread.sleep(10000); // Graceful shutdown interrupts this thread during sleep\n    // Extra processing steps omitted\n}\n</code></pre>\n<p>Any ideas on how to fix this to make the Graceful Shutdown not to interrupt sleeping threads on Scheduled tasks?</p>\n<p>Edit ------</p>\n<p>I made a standalone Java application that does pretty much what I would expect spring to do here: <a href=\"https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java\" rel=\"nofollow noreferrer\">https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java</a></p>\n"},{"tags":["java","reflection","annotations"],"comments":[{"owner":{"account_id":14603438,"reputation":820,"user_id":10547108,"display_name":"fuggerjaki61"},"score":0,"creation_date":1584194221,"post_id":60682431,"comment_id":107364468,"body_markdown":"read [this](https://stackoverflow.com/questions/1805200/retrieve-java-annotation-attribute). i think there is a List/Array where you can remove/add/change them","body":"read <a href=\"https://stackoverflow.com/questions/1805200/retrieve-java-annotation-attribute\">this</a>. i think there is a List/Array where you can remove/add/change them"}],"answers":[{"comments":[{"owner":{"account_id":12804526,"reputation":1368,"user_id":9264713,"display_name":"Bahij.Mik"},"score":0,"creation_date":1584220969,"post_id":60686595,"comment_id":107371780,"body_markdown":"Thanks man! this works! \nOn another note, I had to also change the getDeclaredMethod to getMethod when fetching the method so that the new annotation values are actually changed inside the class once instantiated.","body":"Thanks man! this works!  On another note, I had to also change the getDeclaredMethod to getMethod when fetching the method so that the new annotation values are actually changed inside the class once instantiated."},{"owner":{"account_id":2693962,"reputation":1997,"user_id":2326534,"display_name":"Murolack"},"score":1,"creation_date":1670602695,"post_id":60686595,"comment_id":131918880,"body_markdown":"Do you have some hints for me? I tried the exact way, but I still receive the following exception:\n`java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map sun.reflect.annotation.AnnotationInvocationHandler.memberValues accessible: module java.base does not &quot;opens sun.reflect.annotation&quot; to unnamed module @400008bf`","body":"Do you have some hints for me? I tried the exact way, but I still receive the following exception: <code>java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map sun.reflect.annotation.AnnotationInvocationHandler.memberVal&zwnj;&#8203;ues accessible: module java.base does not &quot;opens sun.reflect.annotation&quot; to unnamed module @400008bf</code>"}],"tags":[],"owner":{"account_id":14766084,"reputation":495,"user_id":10664080,"display_name":"Sergej Masljukow"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1584214516,"creation_date":1584214516,"answer_id":60686595,"question_id":60682431,"body_markdown":"Man, you were just 2 steps away from the solution. After you retrieved invocation handler you have to change it&#39;s field memberValues. Here is the complete code:\r\n\r\n    import java.lang.annotation.*;\r\n    import java.lang.reflect.Field;\r\n    import java.lang.reflect.Method;\r\n    import java.lang.reflect.Proxy;\r\n    import java.util.Arrays;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class NewApp {\r\n    \r\n        public static void main(String[] args) throws NoSuchMethodException, NoSuchFieldException, IllegalAccessException {\r\n    \r\n    \r\n            // get the edit map method\r\n            Method method = CustomMap.class.getDeclaredMethod(&quot;editMap&quot;, Map.class);\r\n    \r\n            // get the annotation\r\n            UpdateKey updateKeyAnnotation = method.getDeclaredAnnotation(UpdateKey.class);\r\n            System.out.println(&quot;current annotation: &quot; + updateKeyAnnotation);\r\n    \r\n            Object handler = Proxy.getInvocationHandler(updateKeyAnnotation);\r\n    \r\n            System.out.println(Arrays.toString(handler.getClass().getDeclaredFields()));\r\n    \r\n            // field memberValues contains annotation attributes and their values\r\n            // just modify it\r\n            Field memberValues = handler.getClass().getDeclaredField(&quot;memberValues&quot;);\r\n            memberValues.setAccessible(true);\r\n            System.out.println(memberValues.get(handler));\r\n    \r\n            Map&lt;String, String&gt; annotationAttributes = new HashMap&lt;&gt;();\r\n            annotationAttributes.put(&quot;newKey&quot;, &quot;otherProduct&quot;);\r\n            annotationAttributes.put(&quot;oldKey&quot;, &quot;otherDescription&quot;);\r\n            memberValues.set(handler, annotationAttributes);\r\n    \r\n    \r\n            System.out.println(&quot;changed annotation: &quot; + updateKeyAnnotation);\r\n        }\r\n    }\r\n    \r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.METHOD)\r\n    @interface UpdateKey {\r\n        String oldKey() default &quot;&quot;;    //The key that needs to be replaced\r\n    \r\n        String newKey() default &quot;&quot;;    //The new key\r\n    }\r\n    \r\n    class CustomMap {\r\n    \r\n        @UpdateKey(oldKey = &quot;description&quot;, newKey = &quot;productName&quot;)\r\n        public void editMap(Map&lt;String, String&gt; map) throws NoSuchMethodException {\r\n            //get the annotation values\r\n            UpdateKey updateKey = this.getClass().getMethod(&quot;editMap&quot;).getAnnotation(UpdateKey.class);\r\n    \r\n            //save value and delete old key\r\n            Object obj = map.remove(updateKey.oldKey());\r\n    \r\n            //set the value to the new key\r\n            map.put(updateKey.newKey(), obj.toString());\r\n        }\r\n    }\r\n\r\noutput of this code \r\n\r\n    current annotation: @UpdateKey(newKey=productName, oldKey=description)\r\n    [private static final long sun.reflect.annotation.AnnotationInvocationHandler.serialVersionUID, private final java.lang.Class sun.reflect.annotation.AnnotationInvocationHandler.type, private final java.util.Map sun.reflect.annotation.AnnotationInvocationHandler.memberValues, private transient volatile java.lang.reflect.Method[] sun.reflect.annotation.AnnotationInvocationHandler.memberMethods, static final boolean sun.reflect.annotation.AnnotationInvocationHandler.$assertionsDisabled]\r\n    {newKey=productName, oldKey=description}\r\n    changed annotation: @UpdateKey(oldKey=otherDescription, newKey=otherProduct)\r\n\r\n","title":"How to edit method annotation attributes on runtime?","body":"<p>Man, you were just 2 steps away from the solution. After you retrieved invocation handler you have to change it's field memberValues. Here is the complete code:</p>\n\n<pre><code>import java.lang.annotation.*;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Proxy;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class NewApp {\n\n    public static void main(String[] args) throws NoSuchMethodException, NoSuchFieldException, IllegalAccessException {\n\n\n        // get the edit map method\n        Method method = CustomMap.class.getDeclaredMethod(\"editMap\", Map.class);\n\n        // get the annotation\n        UpdateKey updateKeyAnnotation = method.getDeclaredAnnotation(UpdateKey.class);\n        System.out.println(\"current annotation: \" + updateKeyAnnotation);\n\n        Object handler = Proxy.getInvocationHandler(updateKeyAnnotation);\n\n        System.out.println(Arrays.toString(handler.getClass().getDeclaredFields()));\n\n        // field memberValues contains annotation attributes and their values\n        // just modify it\n        Field memberValues = handler.getClass().getDeclaredField(\"memberValues\");\n        memberValues.setAccessible(true);\n        System.out.println(memberValues.get(handler));\n\n        Map&lt;String, String&gt; annotationAttributes = new HashMap&lt;&gt;();\n        annotationAttributes.put(\"newKey\", \"otherProduct\");\n        annotationAttributes.put(\"oldKey\", \"otherDescription\");\n        memberValues.set(handler, annotationAttributes);\n\n\n        System.out.println(\"changed annotation: \" + updateKeyAnnotation);\n    }\n}\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\n@interface UpdateKey {\n    String oldKey() default \"\";    //The key that needs to be replaced\n\n    String newKey() default \"\";    //The new key\n}\n\nclass CustomMap {\n\n    @UpdateKey(oldKey = \"description\", newKey = \"productName\")\n    public void editMap(Map&lt;String, String&gt; map) throws NoSuchMethodException {\n        //get the annotation values\n        UpdateKey updateKey = this.getClass().getMethod(\"editMap\").getAnnotation(UpdateKey.class);\n\n        //save value and delete old key\n        Object obj = map.remove(updateKey.oldKey());\n\n        //set the value to the new key\n        map.put(updateKey.newKey(), obj.toString());\n    }\n}\n</code></pre>\n\n<p>output of this code </p>\n\n<pre><code>current annotation: @UpdateKey(newKey=productName, oldKey=description)\n[private static final long sun.reflect.annotation.AnnotationInvocationHandler.serialVersionUID, private final java.lang.Class sun.reflect.annotation.AnnotationInvocationHandler.type, private final java.util.Map sun.reflect.annotation.AnnotationInvocationHandler.memberValues, private transient volatile java.lang.reflect.Method[] sun.reflect.annotation.AnnotationInvocationHandler.memberMethods, static final boolean sun.reflect.annotation.AnnotationInvocationHandler.$assertionsDisabled]\n{newKey=productName, oldKey=description}\nchanged annotation: @UpdateKey(oldKey=otherDescription, newKey=otherProduct)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17899572,"reputation":31,"user_id":16543524,"display_name":"SleeplessChallenger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591947,"creation_date":1691591947,"answer_id":76868850,"question_id":60682431,"body_markdown":"For those who have issues as in the comment above (can&#39;t make comments yet), add `--add-opens=java.base/sun.reflect.annotation=ALL-UNNAMED` to VM options. This package has lots of default access modifiers, hence we need to tweak it with this option","title":"How to edit method annotation attributes on runtime?","body":"<p>For those who have issues as in the comment above (can't make comments yet), add <code>--add-opens=java.base/sun.reflect.annotation=ALL-UNNAMED</code> to VM options. This package has lots of default access modifiers, hence we need to tweak it with this option</p>\n"}],"owner":{"account_id":12804526,"reputation":1368,"user_id":9264713,"display_name":"Bahij.Mik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1125,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":60686595,"answer_count":2,"score":2,"last_activity_date":1691591947,"creation_date":1584186909,"question_id":60682431,"body_markdown":"I have a simple annotation for editing keys of a map on runtime:\r\n```\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.METHOD)\r\npublic @interface UpdateKey\r\n{\r\n    String oldKey() default &quot;&quot;;    //The key that needs to be replaced\r\n\r\n    String newKey() default &quot;&quot;;    //The new key\r\n\r\n}\r\n```\r\nAnd i am using it on a method in some class:\r\n```\r\npublic class CustomMap\r\n{\r\n    @UpdateKey(oldKey = &quot;description&quot;, newKey = &quot;productName&quot;)\r\n    public void editMap(Map&lt;String,String&gt; map) throws NoSuchMethodException\r\n    {\r\n        //get the annotation values\r\n        UpdateKey updateKey = this.getClass().getMethod(&quot;editMap&quot;).getAnnotation(UpdateKey.class);\r\n\r\n        //save value and delete old key\r\n        Object obj = map.remove(updateKey.oldKey());\r\n\r\n        //set the value to the new key\r\n        map.put(updateKey.newKey(),obj);\r\n    }\r\n}\r\n```\r\nBut nothing seems to work to manipulate this annotation before calling the method, i already tried :\r\n```     \r\n        // get the edit map method\r\n        Method method = CustomMap.class.getDeclaredMethod(&quot;editMap&quot;);\r\n\r\n        // get the annotation \r\n        UpdateKey updateKeyAnnotation = method.getDeclaredAnnotation(UpdateKey.class);\r\n\r\n        Object handler = Proxy.getInvocationHandler(updateKeyAnnotation);\r\n\r\n        //this is retrieving the reflection class fields NOT my annotation fields\r\n        sout(handler.getClass().getDeclaredFields());\r\n    \r\n        Field f;\r\n\r\n        //of course this will fail since there is no oldKey field in the reflection class\r\n        f = handler.getClass().getDeclaredField(&quot;oldKey&quot;);  \r\n\r\n```","title":"How to edit method annotation attributes on runtime?","body":"<p>I have a simple annotation for editing keys of a map on runtime:</p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface UpdateKey\n{\n    String oldKey() default \"\";    //The key that needs to be replaced\n\n    String newKey() default \"\";    //The new key\n\n}\n</code></pre>\n\n<p>And i am using it on a method in some class:</p>\n\n<pre><code>public class CustomMap\n{\n    @UpdateKey(oldKey = \"description\", newKey = \"productName\")\n    public void editMap(Map&lt;String,String&gt; map) throws NoSuchMethodException\n    {\n        //get the annotation values\n        UpdateKey updateKey = this.getClass().getMethod(\"editMap\").getAnnotation(UpdateKey.class);\n\n        //save value and delete old key\n        Object obj = map.remove(updateKey.oldKey());\n\n        //set the value to the new key\n        map.put(updateKey.newKey(),obj);\n    }\n}\n</code></pre>\n\n<p>But nothing seems to work to manipulate this annotation before calling the method, i already tried :</p>\n\n<pre><code>        // get the edit map method\n        Method method = CustomMap.class.getDeclaredMethod(\"editMap\");\n\n        // get the annotation \n        UpdateKey updateKeyAnnotation = method.getDeclaredAnnotation(UpdateKey.class);\n\n        Object handler = Proxy.getInvocationHandler(updateKeyAnnotation);\n\n        //this is retrieving the reflection class fields NOT my annotation fields\n        sout(handler.getClass().getDeclaredFields());\n\n        Field f;\n\n        //of course this will fail since there is no oldKey field in the reflection class\n        f = handler.getClass().getDeclaredField(\"oldKey\");  \n\n</code></pre>\n"},{"tags":["java","amazon-web-services","aws-lambda"],"comments":[{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":2,"creation_date":1673796478,"post_id":75126190,"comment_id":132573050,"body_markdown":"how about &quot;System.getenv(&quot;AWS_LAMBDA_FUNCTION_NAME&quot;) != null&quot; Have you checked that way?","body":"how about &quot;System.getenv(&quot;AWS_LAMBDA_FUNCTION_NAME&quot;) != null&quot; Have you checked that way?"},{"owner":{"account_id":9955907,"reputation":606,"user_id":7366850,"accept_rate":100,"display_name":"Jamal Alkelani"},"score":0,"creation_date":1673796487,"post_id":75126190,"comment_id":132573054,"body_markdown":"Can you please add more details? are you trying to figure out if the called lambda function has invoked any utils from the commons package?","body":"Can you please add more details? are you trying to figure out if the called lambda function has invoked any utils from the commons package?"},{"owner":{"account_id":12666543,"reputation":415,"user_id":17478317,"display_name":"Abdullah Khilji"},"score":0,"creation_date":1673796698,"post_id":75126190,"comment_id":132573096,"body_markdown":"@JamalAlkelani I am trying to determine if the util package is used from Lambda or EC2 instances for example.","body":"@JamalAlkelani I am trying to determine if the util package is used from Lambda or EC2 instances for example."},{"owner":{"account_id":9955907,"reputation":606,"user_id":7366850,"accept_rate":100,"display_name":"Jamal Alkelani"},"score":0,"creation_date":1673796760,"post_id":75126190,"comment_id":132573104,"body_markdown":"@AbdullahKhilji Where does that package lives? is it self-hosted? or lives inside AWS lambda layers?","body":"@AbdullahKhilji Where does that package lives? is it self-hosted? or lives inside AWS lambda layers?"},{"owner":{"account_id":12666543,"reputation":415,"user_id":17478317,"display_name":"Abdullah Khilji"},"score":0,"creation_date":1673796874,"post_id":75126190,"comment_id":132573131,"body_markdown":"The commons package is a normal Java package, and can be included as a dependency to any other package.","body":"The commons package is a normal Java package, and can be included as a dependency to any other package."},{"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1673805235,"post_id":75126190,"comment_id":132574658,"body_markdown":"Checking environment variables, as mentioned in the first comment, is the best way to do this.","body":"Checking environment variables, as mentioned in the first comment, is the best way to do this."}],"answers":[{"tags":[],"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691591895,"creation_date":1691591895,"answer_id":76868841,"question_id":75126190,"body_markdown":"You can check using:\r\n\r\n    System.getenv(&quot;AWS_LAMBDA_FUNCTION_NAME&quot;) != null\r\n\r\nto verify whether the runtime is within a Lambda or not.","title":"Java function call to determine whether code is executed inside AWS Lambda or not","body":"<p>You can check using:</p>\n<pre><code>System.getenv(&quot;AWS_LAMBDA_FUNCTION_NAME&quot;) != null\n</code></pre>\n<p>to verify whether the runtime is within a Lambda or not.</p>\n"}],"owner":{"account_id":12666543,"reputation":415,"user_id":17478317,"display_name":"Abdullah Khilji"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76868841,"answer_count":1,"score":1,"last_activity_date":1691591895,"creation_date":1673796218,"question_id":75126190,"body_markdown":"We have a commons package that has some utils in it. For a certain method we need to check if the commons piece of code is executed inside a AWS Lambda or not, is there a simple call to determine this?","title":"Java function call to determine whether code is executed inside AWS Lambda or not","body":"<p>We have a commons package that has some utils in it. For a certain method we need to check if the commons piece of code is executed inside a AWS Lambda or not, is there a simple call to determine this?</p>\n"},{"tags":["java","spring","javabeans"],"answers":[{"tags":[],"owner":{"account_id":1908489,"reputation":9264,"user_id":1722882,"accept_rate":100,"display_name":"Plog"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1510139537,"creation_date":1510139537,"answer_id":47178231,"question_id":47177924,"body_markdown":"You should make sure the `PropertyPlaceholderConfigurer` bean is loaded before trying to evaluate properties by making the bean static. Spring instantiates static beans before other beans definitions.\r\n\r\n    @Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\r\n    public class AppConfig {\r\n    @Bean\r\n    public static PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n        PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\r\n        propertyPlaceholderConfigurer.setLocation(new ClassPathResource(&quot;application.properties&quot;));\r\n        propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\r\n        return propertyPlaceholderConfigurer;\r\n    }","title":"Could not resolve placeholder for some property","body":"<p>You should make sure the <code>PropertyPlaceholderConfigurer</code> bean is loaded before trying to evaluate properties by making the bean static. Spring instantiates static beans before other beans definitions.</p>\n\n<pre><code>@Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\npublic class AppConfig {\n@Bean\npublic static PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\n    PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\n    propertyPlaceholderConfigurer.setLocation(new ClassPathResource(\"application.properties\"));\n    propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\n    return propertyPlaceholderConfigurer;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2119697,"reputation":998,"user_id":1883236,"display_name":"Elyor Murodov"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1510139555,"creation_date":1510139555,"answer_id":47178237,"question_id":47177924,"body_markdown":"Looks like your property source config in MailSenderConfiguration is overriding the one in AppConfig.\r\n\r\nYou can remove PropertyPlaceholderConfigurer bean from MailSenderConfiguration, and in AppConfig, set additional location for &quot;mail.properties&quot; (use setLocations() method instead of setLocation()):\r\n\r\n    @Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\r\n    public class AppConfig {\r\n    @Bean\r\n    public PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n        PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\r\n        propertyPlaceholderConfigurer.setLocations(new ClassPathResource(&quot;application.properties&quot;), new ClassPathResource(&quot;mail.properties&quot;));\r\n        propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\r\n        return propertyPlaceholderConfigurer;\r\n    }\r\n\r\n","title":"Could not resolve placeholder for some property","body":"<p>Looks like your property source config in MailSenderConfiguration is overriding the one in AppConfig.</p>\n\n<p>You can remove PropertyPlaceholderConfigurer bean from MailSenderConfiguration, and in AppConfig, set additional location for \"mail.properties\" (use setLocations() method instead of setLocation()):</p>\n\n<pre><code>@Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\npublic class AppConfig {\n@Bean\npublic PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\n    PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\n    propertyPlaceholderConfigurer.setLocations(new ClassPathResource(\"application.properties\"), new ClassPathResource(\"mail.properties\"));\n    propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\n    return propertyPlaceholderConfigurer;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29158065,"reputation":1,"user_id":22337403,"display_name":"Manoj Mandal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591884,"creation_date":1691133939,"answer_id":76833782,"question_id":47177924,"body_markdown":"Thanks for other suggestions maybe it works for them but in my case it&#39;s like : some time it&#39;s happened due to JDK mismatch so, better first check your IDE JDK version and project JDK version. ","title":"Could not resolve placeholder for some property","body":"<p>Thanks for other suggestions maybe it works for them but in my case it's like : some time it's happened due to JDK mismatch so, better first check your IDE JDK version and project JDK version.</p>\n"}],"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19690,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":47178237,"answer_count":3,"score":4,"last_activity_date":1691591884,"creation_date":1510138687,"question_id":47177924,"body_markdown":"&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;dbDataSource&#39; defined in\r\n&gt; cz.ita.javaee.config.DatabaseConfiguration: Unexpected exception\r\n&gt; during bean creation; nested exception is\r\n&gt; java.lang.IllegalArgumentException: Could not resolve placeholder\r\n&gt; &#39;db.jndi&#39; in value &quot;${db.jndi}&quot; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:518)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:756)\r\n&gt; \tat\r\n&gt; org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)\r\n&gt; \tat\r\n&gt; org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\r\n&gt; \tat\r\n&gt; org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:409)\r\n&gt; \tat\r\n&gt; org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:291)\r\n&gt; \tat\r\n&gt; org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4743)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5207)\r\n&gt; \tat\r\n&gt; org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1739)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\r\n&gt; \tat\r\n&gt; com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n&gt; \tat\r\n&gt; com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n&gt; \tat\r\n&gt; org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:482)\r\n&gt; \tat\r\n&gt; org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:431)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\r\n&gt; \tat\r\n&gt; com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n&gt; \tat\r\n&gt; com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)\r\n&gt; \tat sun.rmi.transport.Transport$1.run(Transport.java:200) \tat\r\n&gt; sun.rmi.transport.Transport$1.run(Transport.java:197) \tat\r\n&gt; java.security.AccessController.doPrivileged(Native Method) \tat\r\n&gt; sun.rmi.transport.Transport.serviceCall(Transport.java:196) \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\r\n&gt; \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\r\n&gt; \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\r\n&gt; \tat java.security.AccessController.doPrivileged(Native Method) \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n&gt; \tat java.lang.Thread.run(Thread.java:748) Caused by:\r\n&gt; java.lang.IllegalArgumentException: Could not resolve placeholder\r\n&gt; &#39;db.jndi&#39; in value &quot;${db.jndi}&quot; \tat\r\n&gt; org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:172)\r\n&gt; \tat\r\n&gt; org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:124)\r\n&gt; \tat\r\n&gt; org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:237)\r\n&gt; \tat\r\n&gt; org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:211)\r\n&gt; \tat\r\n&gt; org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:175)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:834)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1081)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1060)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:809)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:715)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:458)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1249)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1098)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:502)\r\n&gt; \t... 55 more\r\n\r\nMy Database Configuration class:\r\n\r\n    @EnableTransactionManagement\r\n    public class DatabaseConfiguration {\r\n    \r\n        @Bean(name = &quot;dbDataSource&quot;)\r\n        @Profile(&quot;!development&quot;)\r\n        public DataSource dataSource(@Value(&quot;${db.jndi}&quot;) String dbJndiName) {\r\n            JndiDataSourceLookup lookup = new JndiDataSourceLookup();\r\n            return lookup.getDataSource(dbJndiName);\r\n        }\r\n    \r\n        @Profile(&quot;development&quot;)\r\n        public DataSource dataSource(@Value(&quot;${development.db.driver}&quot;) String dbDriver,\r\n                @Value(&quot;${development.db.url}&quot;) String dbUrl,\r\n                @Value(&quot;${development.db.username}&quot;) String dbUsername,\r\n                @Value(&quot;${development.db.password}&quot;) String dbPassword) {\r\n            DriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource(dbUrl);\r\n            driverManagerDataSource.setDriverClassName(dbDriver);\r\n            driverManagerDataSource.setUsername(dbUsername);\r\n            driverManagerDataSource.setPassword(dbPassword);\r\n            return driverManagerDataSource;\r\n        }\r\n    \r\n    }\r\n\r\nAnd AppConfig:\r\n\r\n    @Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\r\n    public class AppConfig {\r\n    @Bean\r\n    public PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n        PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\r\n        propertyPlaceholderConfigurer.setLocation(new ClassPathResource(&quot;application.properties&quot;));\r\n        propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\r\n        return propertyPlaceholderConfigurer;\r\n    }\r\n}\r\n\r\nHi, I got error above and I don&#39;t know how to fix it, can you help me? My project working fine until I&#39;ve added this bean:\r\n\r\n    @PropertySource(&quot;classpath:mail.properties&quot;)\r\n    public class MailSenderConfiguration {\r\n\r\n    @Value(&quot;${mail.smtp.host}&quot;)\r\n    private String mailHost;\r\n\r\n    @Value(&quot;${mail.smtp.port}&quot;)\r\n    private int mailPort;\r\n\r\n    @Value(&quot;${mail.username}&quot;)\r\n    private String mailUsername;\r\n\r\n    @Value(&quot;${mail.password}&quot;)\r\n    private String mailPassword;\r\n\r\n    @Value(&quot;${mail.protocol}&quot;)\r\n    private String mailProtocol;\r\n\r\n    @Value(&quot;${mail.smtp.auth}&quot;)\r\n    private boolean mailAuth;\r\n\r\n    @Value(&quot;${mail.smtp.starttls.enable}&quot;)\r\n    private String mailEnableTls;\r\n\r\n    @Value(&quot;${mail.smtp.debug}&quot;)\r\n    private boolean mailDebug;\r\n\r\n    @Bean\r\n    public JavaMailSender getMailSender() {\r\n        JavaMailSenderImpl mailSender = new JavaMailSenderImpl();\r\n\r\n        mailSender.setHost(mailHost);\r\n        mailSender.setPort(mailPort);\r\n        mailSender.setUsername(mailUsername);\r\n        mailSender.setPassword(mailPassword);\r\n\r\n        Properties mailProperties = new Properties();\r\n        mailProperties.put(&quot;mail.transport.protocol&quot;, mailProtocol);\r\n        mailProperties.put(&quot;mail.smtp.auth&quot;, mailAuth);\r\n        mailProperties.put(&quot;mail.smtp.starttls.enable&quot;, mailEnableTls);\r\n        mailProperties.put(&quot;mail.smtp.debug&quot;, mailDebug);\r\n        mailSender.setJavaMailProperties(mailProperties);\r\n\r\n        return mailSender;\r\n    }\r\n\r\n    @Bean\r\n    public PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n        PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\r\n        propertyPlaceholderConfigurer.setLocation(new ClassPathResource(&quot;mail.properties&quot;));\r\n        propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\r\n        return propertyPlaceholderConfigurer;\r\n    }\r\n}","title":"Could not resolve placeholder for some property","body":"<blockquote>\n  <p>org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'dbDataSource' defined in\n  cz.ita.javaee.config.DatabaseConfiguration: Unexpected exception\n  during bean creation; nested exception is\n  java.lang.IllegalArgumentException: Could not resolve placeholder\n  'db.jndi' in value \"${db.jndi}\"   at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:518)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312)\n    at\n  org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at\n  org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:756)\n    at\n  org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)\n    at\n  org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\n    at\n  org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:409)\n    at\n  org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:291)\n    at\n  org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n    at\n  org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4743)\n    at\n  org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5207)\n    at\n  org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at\n  org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\n    at\n  org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\n    at\n  org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\n    at\n  org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1739)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at\n  com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at\n  com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at\n  org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:482)\n    at\n  org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:431)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at\n  com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at\n  com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)    at\n  sun.rmi.transport.Transport$1.run(Transport.java:197)     at\n  java.security.AccessController.doPrivileged(Native Method)    at\n  sun.rmi.transport.Transport.serviceCall(Transport.java:196)   at\n  sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at\n  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at\n  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)   at\n  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at\n  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748) Caused by:\n  java.lang.IllegalArgumentException: Could not resolve placeholder\n  'db.jndi' in value \"${db.jndi}\"   at\n  org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:172)\n    at\n  org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:124)\n    at\n  org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:237)\n    at\n  org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:211)\n    at\n  org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:175)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:834)\n    at\n  org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1081)\n    at\n  org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1060)\n    at\n  org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:809)\n    at\n  org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:715)\n    at\n  org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:458)\n    at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1249)\n    at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1098)\n    at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\n    at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:502)\n    ... 55 more</p>\n</blockquote>\n\n<p>My Database Configuration class:</p>\n\n<pre><code>@EnableTransactionManagement\npublic class DatabaseConfiguration {\n\n    @Bean(name = \"dbDataSource\")\n    @Profile(\"!development\")\n    public DataSource dataSource(@Value(\"${db.jndi}\") String dbJndiName) {\n        JndiDataSourceLookup lookup = new JndiDataSourceLookup();\n        return lookup.getDataSource(dbJndiName);\n    }\n\n    @Profile(\"development\")\n    public DataSource dataSource(@Value(\"${development.db.driver}\") String dbDriver,\n            @Value(\"${development.db.url}\") String dbUrl,\n            @Value(\"${development.db.username}\") String dbUsername,\n            @Value(\"${development.db.password}\") String dbPassword) {\n        DriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource(dbUrl);\n        driverManagerDataSource.setDriverClassName(dbDriver);\n        driverManagerDataSource.setUsername(dbUsername);\n        driverManagerDataSource.setPassword(dbPassword);\n        return driverManagerDataSource;\n    }\n\n}\n</code></pre>\n\n<p>And AppConfig:</p>\n\n<pre><code>@Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\npublic class AppConfig {\n@Bean\npublic PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\n    PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\n    propertyPlaceholderConfigurer.setLocation(new ClassPathResource(\"application.properties\"));\n    propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\n    return propertyPlaceholderConfigurer;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Hi, I got error above and I don't know how to fix it, can you help me? My project working fine until I've added this bean:</p>\n\n<pre><code>@PropertySource(\"classpath:mail.properties\")\npublic class MailSenderConfiguration {\n\n@Value(\"${mail.smtp.host}\")\nprivate String mailHost;\n\n@Value(\"${mail.smtp.port}\")\nprivate int mailPort;\n\n@Value(\"${mail.username}\")\nprivate String mailUsername;\n\n@Value(\"${mail.password}\")\nprivate String mailPassword;\n\n@Value(\"${mail.protocol}\")\nprivate String mailProtocol;\n\n@Value(\"${mail.smtp.auth}\")\nprivate boolean mailAuth;\n\n@Value(\"${mail.smtp.starttls.enable}\")\nprivate String mailEnableTls;\n\n@Value(\"${mail.smtp.debug}\")\nprivate boolean mailDebug;\n\n@Bean\npublic JavaMailSender getMailSender() {\n    JavaMailSenderImpl mailSender = new JavaMailSenderImpl();\n\n    mailSender.setHost(mailHost);\n    mailSender.setPort(mailPort);\n    mailSender.setUsername(mailUsername);\n    mailSender.setPassword(mailPassword);\n\n    Properties mailProperties = new Properties();\n    mailProperties.put(\"mail.transport.protocol\", mailProtocol);\n    mailProperties.put(\"mail.smtp.auth\", mailAuth);\n    mailProperties.put(\"mail.smtp.starttls.enable\", mailEnableTls);\n    mailProperties.put(\"mail.smtp.debug\", mailDebug);\n    mailSender.setJavaMailProperties(mailProperties);\n\n    return mailSender;\n}\n\n@Bean\npublic PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\n    PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\n    propertyPlaceholderConfigurer.setLocation(new ClassPathResource(\"mail.properties\"));\n    propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\n    return propertyPlaceholderConfigurer;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","maven","installation","path-variables"],"comments":[{"owner":{"account_id":430557,"reputation":3444,"user_id":814074,"accept_rate":50,"display_name":"Sachin"},"score":0,"creation_date":1372236447,"post_id":17315425,"comment_id":25119742,"body_markdown":"Set valid JAVA_HOME path in System environment","body":"Set valid JAVA_HOME path in System environment"},{"owner":{"account_id":2342481,"reputation":1289,"user_id":2053461,"accept_rate":83,"display_name":"Ahmad Azwar Anas"},"score":1,"creation_date":1372236783,"post_id":17315425,"comment_id":25114226,"body_markdown":"try this.. `C:\\ YourFolder &gt;set path=C:\\Program Files\\Java\\jdk1.7.0_09\\bin;`, in this case, my jdk version is `1.7.0_09` **OR** you can looked out [this question](http://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or/16562626#16562626). Welcome to [StackOverFlow](http://stackoverflow.com/).. ^^","body":"try this.. <code>C:\\ YourFolder &gt;set path=C:\\Program Files\\Java\\jdk1.7.0_09\\bin;</code>, in this case, my jdk version is <code>1.7.0_09</code> <b>OR</b> you can looked out <a href=\"http://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or/16562626#16562626\">this question</a>. Welcome to <a href=\"http://stackoverflow.com/\">StackOverFlow</a>.. ^^"},{"owner":{"account_id":3429571,"reputation":1922,"user_id":2874409,"accept_rate":48,"display_name":"Andiana"},"score":3,"creation_date":1488422105,"post_id":17315425,"comment_id":72227176,"body_markdown":"With Maven, your JAVA_HOME must NOT CONTAIN the &quot;bin&quot;, just ...\\jdk1.7.0_09\\ is enough.","body":"With Maven, your JAVA_HOME must NOT CONTAIN the &quot;bin&quot;, just ...\\jdk1.7.0_09\\ is enough."},{"owner":{"display_name":"user12200634"},"score":1,"creation_date":1585660468,"post_id":17315425,"comment_id":107834607,"body_markdown":"If you did everything correctly and it still doesn&#39;t work, try **restarting** your machine","body":"If you did everything correctly and it still doesn&#39;t work, try <b>restarting</b> your machine"}],"answers":[{"tags":[],"owner":{"account_id":459462,"reputation":2067,"user_id":859955,"accept_rate":91,"display_name":"nwaltham"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372236414,"creation_date":1372236414,"answer_id":17315463,"question_id":17315425,"body_markdown":"The JAVA_HOME should point to the JDK home rather than the JRE home if you are going to be compiling stuff, likewise - I would try and install the JDK in a directory that doesn&#39;t include a space. Even if this is not your problem now, it can cause problems in the future!","title":"Error in setting JAVA_HOME","body":"<p>The JAVA_HOME should point to the JDK home rather than the JRE home if you are going to be compiling stuff, likewise - I would try and install the JDK in a directory that doesn't include a space. Even if this is not your problem now, it can cause problems in the future!</p>\n"},{"comments":[{"owner":{"account_id":2869041,"reputation":4363,"user_id":2462759,"accept_rate":52,"display_name":"paul"},"score":2,"creation_date":1372239907,"post_id":17315470,"comment_id":25116026,"body_markdown":"Thanks Juned it worked , but why jdk not jre...and why ant was working and maven wasn&#39;t.","body":"Thanks Juned it worked , but why jdk not jre...and why ant was working and maven wasn&#39;t."},{"owner":{"account_id":2976682,"reputation":1138,"user_id":2527604,"display_name":"Francesco"},"score":0,"creation_date":1444226657,"post_id":17315470,"comment_id":53813386,"body_markdown":"thanks, it&#39;s worked! For OSX path we can read here: http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/","body":"thanks, it&#39;s worked! For OSX path we can read here: <a href=\"http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/\" rel=\"nofollow noreferrer\">mkyong.com/java/&hellip;</a>"},{"owner":{"account_id":322928,"reputation":414,"user_id":642632,"accept_rate":33,"display_name":"Jeppen"},"score":0,"creation_date":1574274581,"post_id":17315470,"comment_id":104177385,"body_markdown":"This worked for me https://www.mkyong.com/java/how-to-set-java_home-on-windows-10/","body":"This worked for me <a href=\"https://www.mkyong.com/java/how-to-set-java_home-on-windows-10/\" rel=\"nofollow noreferrer\">mkyong.com/java/how-to-set-java_home-on-windows-10</a>"}],"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"comment_count":3,"down_vote_count":0,"up_vote_count":88,"is_accepted":true,"score":88,"last_activity_date":1404943811,"creation_date":1372236422,"answer_id":17315470,"question_id":17315425,"body_markdown":"JAVA_HOME should point to jdk directory and not to jre directory. Also JAVA_HOME should point to the home jdk directory and not to jdk/bin directory.\r\n\r\nAssuming that you have JDK installed in your program files directory then you need to set the JAVA_HOME like this:\r\n\r\n    JAVA_HOME=&quot;C:\\Program Files\\Java\\jdkxxx&quot;\r\n\r\nxxx is the jdk version\r\n\r\nFollow this link to learn more about setting JAVA_HOME:\r\n\r\nhttp://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/index.html","title":"Error in setting JAVA_HOME","body":"<p>JAVA_HOME should point to jdk directory and not to jre directory. Also JAVA_HOME should point to the home jdk directory and not to jdk/bin directory.</p>\n\n<p>Assuming that you have JDK installed in your program files directory then you need to set the JAVA_HOME like this:</p>\n\n<pre><code>JAVA_HOME=\"C:\\Program Files\\Java\\jdkxxx\"\n</code></pre>\n\n<p>xxx is the jdk version</p>\n\n<p>Follow this link to learn more about setting JAVA_HOME:</p>\n\n<p><a href=\"http://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/index.html\" rel=\"noreferrer\">http://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":2784074,"reputation":1439,"user_id":2395943,"accept_rate":50,"display_name":"sadhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1372236458,"creation_date":1372236458,"answer_id":17315480,"question_id":17315425,"body_markdown":"Do not include bin in your JAVA_HOME env variable","title":"Error in setting JAVA_HOME","body":"<p>Do not include bin in your JAVA_HOME env variable</p>\n"},{"comments":[{"owner":{"account_id":1310585,"reputation":557,"user_id":1258657,"accept_rate":64,"display_name":"luisdev"},"score":0,"creation_date":1616661734,"post_id":17315536,"comment_id":118074216,"body_markdown":"Does it require quotes around the path?","body":"Does it require quotes around the path?"}],"tags":[],"owner":{"account_id":2102673,"reputation":35121,"user_id":1869846,"accept_rate":56,"display_name":"Ruchira Gayan Ranaweera"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1372236642,"creation_date":1372236642,"answer_id":17315536,"question_id":17315425,"body_markdown":"Follow the instruction in [here][1].\r\n\r\n\r\n  [1]: http://www.mkyong.com/maven/how-to-install-maven-in-windows/\r\n\r\n`JAVA_HOME`should be like this\r\n\r\n    JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_07","title":"Error in setting JAVA_HOME","body":"<p>Follow the instruction in <a href=\"http://www.mkyong.com/maven/how-to-install-maven-in-windows/\" rel=\"noreferrer\">here</a>.</p>\n\n<p><code>JAVA_HOME</code>should be like this</p>\n\n<pre><code>JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_07\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2921966,"reputation":3572,"user_id":2504013,"accept_rate":86,"display_name":"JREN"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372236719,"creation_date":1372236719,"answer_id":17315555,"question_id":17315425,"body_markdown":"You are pointing your JAVA_HOME to the JRE which is the Java Runtime Environment. The runtime environment doesn&#39;t have a java compiler in its bin folder.\r\nYou should download the JDK which is the Java Development Kit. Once you&#39;ve installed that, you can see in your bin folder that there&#39;s a file called javac.exe. That&#39;s your compiler.","title":"Error in setting JAVA_HOME","body":"<p>You are pointing your JAVA_HOME to the JRE which is the Java Runtime Environment. The runtime environment doesn't have a java compiler in its bin folder.\nYou should download the JDK which is the Java Development Kit. Once you've installed that, you can see in your bin folder that there's a file called javac.exe. That's your compiler.</p>\n"},{"comments":[{"owner":{"account_id":2381622,"reputation":21322,"user_id":2083523,"accept_rate":68,"display_name":"Avi"},"score":0,"creation_date":1401922288,"post_id":24048650,"comment_id":37078590,"body_markdown":"This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post - you can always comment on your own posts, and once you have sufficient [reputation](http://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](http://stackoverflow.com/help/privileges/comment).","body":"This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post - you can always comment on your own posts, and once you have sufficient <a href=\"http://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"http://stackoverflow.com/help/privileges/comment\">comment on any post</a>."},{"owner":{"account_id":2093874,"reputation":21,"user_id":1863075,"display_name":"jonorri"},"score":0,"creation_date":1402326110,"post_id":24048650,"comment_id":37217108,"body_markdown":"Ahhhh I see. Just wanted to leave this here since I ended up experiencing the problem with the answer above from Ruchira Gayan.\n&quot;JAVA_HOME should be like this\nJAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_07&quot;\nAnd I had to wrap the path with quotes. But comment noted. Will come back when I have any questions.","body":"Ahhhh I see. Just wanted to leave this here since I ended up experiencing the problem with the answer above from Ruchira Gayan. &quot;JAVA_HOME should be like this JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_07&quot; And I had to wrap the path with quotes. But comment noted. Will come back when I have any questions."}],"tags":[],"owner":{"account_id":2093874,"reputation":21,"user_id":1863075,"display_name":"jonorri"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1401920860,"creation_date":1401920860,"answer_id":24048650,"question_id":17315425,"body_markdown":"Just remember to add quotes into the path if you have a space in your path to java home.\r\nC:\\Program Files\\java\\javaxxx\\ doesn&#39;t work\r\nbut\r\n&quot;C:\\Program Files\\java\\javaxxx\\&quot; does.","title":"Error in setting JAVA_HOME","body":"<p>Just remember to add quotes into the path if you have a space in your path to java home.\nC:\\Program Files\\java\\javaxxx\\ doesn't work\nbut\n\"C:\\Program Files\\java\\javaxxx\\\" does.</p>\n"},{"comments":[{"owner":{"account_id":321094,"reputation":2734,"user_id":639713,"accept_rate":63,"display_name":"gdubs"},"score":1,"creation_date":1533608349,"post_id":49591499,"comment_id":90396782,"body_markdown":"thank you for this. been struggling for hours with this until i read the restart part. don&#39;t forget to restart, cuz even if you change it so many times it won&#39;t work until you do.","body":"thank you for this. been struggling for hours with this until i read the restart part. don&#39;t forget to restart, cuz even if you change it so many times it won&#39;t work until you do."},{"owner":{"account_id":3170177,"reputation":147,"user_id":2679339,"display_name":"aatif"},"score":0,"creation_date":1612293267,"post_id":49591499,"comment_id":116720177,"body_markdown":"Thank you. After setting was struggling for minutes. Restart is required.","body":"Thank you. After setting was struggling for minutes. Restart is required."}],"tags":[],"owner":{"account_id":11372337,"reputation":248,"user_id":8337597,"display_name":"karthik padav"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522523981,"creation_date":1522523981,"answer_id":49591499,"question_id":17315425,"body_markdown":"JAVA_HOME = C:\\Program Files\\Java\\jdk(JDK version number)\r\n\r\nExample: C:\\Program Files\\Java\\jdk-10\r\n\r\nAnd then restart you command prompt it works.","title":"Error in setting JAVA_HOME","body":"<p>JAVA_HOME = C:\\Program Files\\Java\\jdk(JDK version number)</p>\n\n<p>Example: C:\\Program Files\\Java\\jdk-10</p>\n\n<p>And then restart you command prompt it works.</p>\n"},{"comments":[{"owner":{"account_id":18770784,"reputation":177,"user_id":13687639,"display_name":"MoKi"},"score":1,"creation_date":1680543005,"post_id":72787281,"comment_id":133912842,"body_markdown":"thanks! this needs to be at the top","body":"thanks! this needs to be at the top"}],"tags":[],"owner":{"account_id":9321584,"reputation":1230,"user_id":6920169,"accept_rate":75,"display_name":"Loki"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1656422771,"creation_date":1656422771,"answer_id":72787281,"question_id":17315425,"body_markdown":"**JAVA_HOME** should point to jdk directory like in the image with new variable, like below\r\n\r\n[![JAVA_HOME][1]][1]\r\n\r\n**PATH** should point to jdk bin like below\r\n \r\n[![PATH][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QTZmO.png\r\n  [2]: https://i.stack.imgur.com/oKFQ2.png","title":"Error in setting JAVA_HOME","body":"<p><strong>JAVA_HOME</strong> should point to jdk directory like in the image with new variable, like below</p>\n<p><a href=\"https://i.stack.imgur.com/QTZmO.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QTZmO.png\" alt=\"JAVA_HOME\" /></a></p>\n<p><strong>PATH</strong> should point to jdk bin like below</p>\n<p><a href=\"https://i.stack.imgur.com/oKFQ2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oKFQ2.png\" alt=\"PATH\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2726668,"reputation":4982,"user_id":2351527,"accept_rate":67,"display_name":"codeX"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668729174,"creation_date":1668729174,"answer_id":74483466,"question_id":17315425,"body_markdown":"Run the below command in your terminal and restart it.\r\n\r\n    &gt; set JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk-xx.xx&quot;\r\n\r\nxx.xx is the java version\r\n","title":"Error in setting JAVA_HOME","body":"<p>Run the below command in your terminal and restart it.</p>\n<pre><code>&gt; set JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk-xx.xx&quot;\n</code></pre>\n<p>xx.xx is the java version</p>\n"},{"tags":[],"owner":{"account_id":23622254,"reputation":11,"user_id":17655316,"display_name":"Rohitash Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678900032,"creation_date":1678900032,"answer_id":75747951,"question_id":17315425,"body_markdown":"\r\nJAVA_HOME should point to the home jdk directory and not to jdk/bin directory.\r\n\r\nMake sure you have JDK installed in your computer and then you need to set the JAVA_HOME like this:\r\n\r\n    JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk&quot; + &quot;Your current installed version of jdk in your system&quot;","title":"Error in setting JAVA_HOME","body":"<p>JAVA_HOME should point to the home jdk directory and not to jdk/bin directory.</p>\n<p>Make sure you have JDK installed in your computer and then you need to set the JAVA_HOME like this:</p>\n<pre><code>JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk&quot; + &quot;Your current installed version of jdk in your system&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4912463,"reputation":1,"user_id":3957382,"display_name":"Paramanand Biradar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591563,"creation_date":1691550871,"answer_id":76864338,"question_id":17315425,"body_markdown":"After installing java , you have to make two changes in environment variables .\r\n1. `JAVA_HOME` : which should point to jdk installation directory (not including bin) .\r\n2. Path : Which will put the bin on the path  .\r\n\r\nif the error is which respect to `JAVA_HOME` , try below :\r\n\r\n1. Ensure you have mentioned the directory path correctly  .\r\n\r\n2.  `JAVA_HOME`  value ending with semicolon could be the ERROR sometimes.If you are not able to remove semicolon from environment, try using cmd as below \r\n\r\n   \r\n\r\n    set  JAVA_HOME  = [path of you jdk installation directory ]","title":"Error in setting JAVA_HOME","body":"<p>After installing java , you have to make two changes in environment variables .</p>\n<ol>\n<li><code>JAVA_HOME</code> : which should point to jdk installation directory (not including bin) .</li>\n<li>Path : Which will put the bin on the path  .</li>\n</ol>\n<p>if the error is which respect to <code>JAVA_HOME</code> , try below :</p>\n<ol>\n<li><p>Ensure you have mentioned the directory path correctly  .</p>\n</li>\n<li><p><code>JAVA_HOME</code>  value ending with semicolon could be the ERROR sometimes.If you are not able to remove semicolon from environment, try using cmd as below</p>\n<p>set  JAVA_HOME  = [path of you jdk installation directory ]</p>\n</li>\n</ol>\n"}],"owner":{"account_id":2869041,"reputation":4363,"user_id":2462759,"accept_rate":52,"display_name":"paul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326002,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":17315470,"answer_count":11,"score":35,"last_activity_date":1691591563,"creation_date":1372236284,"question_id":17315425,"body_markdown":"I have recently downloaded Maven and followed the instructions given on this [this](http://www.example.com/) page. I already have ant installed on my machine.\r\nNow, if I want to verify that Maven is installed perfectly or not it is giving me error that JAVA_HOME is not set correctly, but same works perfectly fine for ANT.\r\n\r\n    For Maven I tried :\r\n    1. open cmd\r\n    2. type mvn -version\r\n    3. Error appeared :\r\n    C:\\Users\\Admin&gt;mvn -version\r\n    \r\n    ERROR: JAVA_HOME is set to an invalid directory.\r\n    JAVA_HOME = &quot;C:\\Program Files\\Java\\jre7\\bin&quot;\r\n    Please set the JAVA_HOME variable in your environment to match the\r\n    location of your Java installation\r\n\r\n    For ANT I tried and worked :\r\n    1. open cmd\r\n    2. type mvn -version\r\n    3. Apache Ant(TM) version 1.9.1 compiled on May 15 2013\r\nI went to the directory to check that java.exe is actually there in that directory or not and it was there. I checked the environment variables they set fine. I restarted the system and checked again but same problem. Please let me know what am I missing.","title":"Error in setting JAVA_HOME","body":"<p>I have recently downloaded Maven and followed the instructions given on this <a href=\"http://www.example.com/\">this</a> page. I already have ant installed on my machine.\nNow, if I want to verify that Maven is installed perfectly or not it is giving me error that JAVA_HOME is not set correctly, but same works perfectly fine for ANT.</p>\n\n<pre><code>For Maven I tried :\n1. open cmd\n2. type mvn -version\n3. Error appeared :\nC:\\Users\\Admin&gt;mvn -version\n\nERROR: JAVA_HOME is set to an invalid directory.\nJAVA_HOME = \"C:\\Program Files\\Java\\jre7\\bin\"\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation\n\nFor ANT I tried and worked :\n1. open cmd\n2. type mvn -version\n3. Apache Ant(TM) version 1.9.1 compiled on May 15 2013\n</code></pre>\n\n<p>I went to the directory to check that java.exe is actually there in that directory or not and it was there. I checked the environment variables they set fine. I restarted the system and checked again but same problem. Please let me know what am I missing.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1691591562,"post_id":76868766,"comment_id":135512757,"body_markdown":"When you do `a = new A();` then you are no longer dealing with the `A` you passed in. You are dealing with a new `A`. When you do `a.val = 50` then you are assigning the value of **the new A**. If the value is static then the new A and the old A point to the same static value. Which, an IDE will warn you, should be referenced as `A.val = 50;` to remove confusion.","body":"When you do <code>a = new A();</code> then you are no longer dealing with the <code>A</code> you passed in. You are dealing with a new <code>A</code>. When you do <code>a.val = 50</code> then you are assigning the value of <b>the new A</b>. If the value is static then the new A and the old A point to the same static value. Which, an IDE will warn you, should be referenced as <code>A.val = 50;</code> to remove confusion."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1691591592,"post_id":76868766,"comment_id":135512765,"body_markdown":"Does this answer your question? [Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a>"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1691592997,"post_id":76868766,"comment_id":135513089,"body_markdown":"In the static case, `a.val` is not really `a.val`, but `A.val` (all instances share the same field)","body":"In the static case, <code>a.val</code> is not really <code>a.val</code>, but <code>A.val</code> (all instances share the same field)"}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691591440,"creation_date":1691591440,"answer_id":76868787,"question_id":76868766,"body_markdown":"If the field is non-static, each instance has its own `val` field with its own value. Since Java is pass-by-value, not pass-by-reference, the statement `a = new A()` inside `updateVal` does **not** update the `val` field of the instance that was created in `main.`\r\n\r\nIf the field is static, all instances share the same field. The update inside `updateVal` is now that one shared field.","title":"Why using static results in a different output?","body":"<p>If the field is non-static, each instance has its own <code>val</code> field with its own value. Since Java is pass-by-value, not pass-by-reference, the statement <code>a = new A()</code> inside <code>updateVal</code> does <strong>not</strong> update the <code>val</code> field of the instance that was created in <code>main.</code></p>\n<p>If the field is static, all instances share the same field. The update inside <code>updateVal</code> is now that one shared field.</p>\n"}],"owner":{"account_id":83131,"reputation":8752,"user_id":233286,"accept_rate":73,"display_name":"ilhan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76868787,"answer_count":1,"score":-1,"last_activity_date":1691591440,"creation_date":1691591255,"question_id":76868766,"body_markdown":"I have the following code that prints 20.\r\n\r\n    import java.util.*;\r\n    import java.lang.*;\r\n    import java.io.*;\r\n    \r\n    class A {\r\n        public int val = 20; // &lt;- no static\r\n    }\r\n    \r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            A a = new A();\r\n            updateVal(a);\r\n            \r\n            System.out.println(a.val);\r\n        }\r\n        \r\n        private static void updateVal(A a) {\r\n            a = new A();\r\n            a.val = 50;\r\n        }\r\n    }\r\n\r\nBut if I change val to static then it prints 50. How it works?\r\n\r\n    import java.util.*;\r\n    import java.lang.*;\r\n    import java.io.*;\r\n    \r\n    class A {\r\n        public static int val = 20; // &lt;- there is static\r\n    }\r\n    \r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            A a = new A();\r\n            updateVal(a);\r\n            \r\n            System.out.println(a.val);\r\n        }\r\n        \r\n        private static void updateVal(A a) {\r\n            a = new A();\r\n            a.val = 50;\r\n        }\r\n    }","title":"Why using static results in a different output?","body":"<p>I have the following code that prints 20.</p>\n<pre><code>import java.util.*;\nimport java.lang.*;\nimport java.io.*;\n\nclass A {\n    public int val = 20; // &lt;- no static\n}\n\n\nclass Main {\n    public static void main(String[] args) {\n        A a = new A();\n        updateVal(a);\n        \n        System.out.println(a.val);\n    }\n    \n    private static void updateVal(A a) {\n        a = new A();\n        a.val = 50;\n    }\n}\n</code></pre>\n<p>But if I change val to static then it prints 50. How it works?</p>\n<pre><code>import java.util.*;\nimport java.lang.*;\nimport java.io.*;\n\nclass A {\n    public static int val = 20; // &lt;- there is static\n}\n\n\nclass Main {\n    public static void main(String[] args) {\n        A a = new A();\n        updateVal(a);\n        \n        System.out.println(a.val);\n    }\n    \n    private static void updateVal(A a) {\n        a = new A();\n        a.val = 50;\n    }\n}\n</code></pre>\n"},{"tags":["java","testing","junit5"],"comments":[{"owner":{"account_id":5644665,"reputation":35951,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"score":0,"creation_date":1687422162,"post_id":76529816,"comment_id":134935392,"body_markdown":"Can you include the whole test class?","body":"Can you include the whole test class?"},{"owner":{"account_id":21383112,"reputation":3,"user_id":15894213,"display_name":"Pradeep"},"score":0,"creation_date":1687422642,"post_id":76529816,"comment_id":134935518,"body_markdown":"@MuratKarag&#246;z updated","body":"@MuratKarag&#246;z updated"},{"owner":{"account_id":5644665,"reputation":35951,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"score":0,"creation_date":1687423957,"post_id":76529816,"comment_id":134935791,"body_markdown":"You probably have something else going on. Your code as it looks fine.","body":"You probably have something else going on. Your code as it looks fine."},{"owner":{"account_id":15361,"reputation":4976,"user_id":32352,"accept_rate":62,"display_name":"johanneslink"},"score":0,"creation_date":1687432111,"post_id":76529816,"comment_id":134937582,"body_markdown":"The error message suggests a lib version mismatch. Please add your full Maven pom.","body":"The error message suggests a lib version mismatch. Please add your full Maven pom."},{"owner":{"account_id":21383112,"reputation":3,"user_id":15894213,"display_name":"Pradeep"},"score":0,"creation_date":1687439158,"post_id":76529816,"comment_id":134939190,"body_markdown":"added full pom.xml file @johanneslink","body":"added full pom.xml file @johanneslink"}],"answers":[{"comments":[{"owner":{"account_id":21383112,"reputation":3,"user_id":15894213,"display_name":"Pradeep"},"score":0,"creation_date":1687439331,"post_id":76530172,"comment_id":134939229,"body_markdown":"the example I quoted was an oversimplified demo of what I intent. I want to use `Arguments` of more complex Objects, but getting same error while trying that so cannot simply use `@ValueSource`","body":"the example I quoted was an oversimplified demo of what I intent. I want to use <code>Arguments</code> of more complex Objects, but getting same error while trying that so cannot simply use <code>@ValueSource</code>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1687463330,"post_id":76530172,"comment_id":134944305,"body_markdown":"Using `Stream&lt;Arguments&gt;` is not _required_. It could be a `Stream&lt;String&gt;` or `String[]`, since the test method has only a single `String` parameter. See [the documentation](https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/MethodSource.html).","body":"Using <code>Stream&lt;Arguments&gt;</code> is not <i>required</i>. It could be a <code>Stream&lt;String&gt;</code> or <code>String[]</code>, since the test method has only a single <code>String</code> parameter. See <a href=\"https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/MethodSource.html\" rel=\"nofollow noreferrer\">the documentation</a>."}],"tags":[],"owner":{"account_id":12849899,"reputation":996,"user_id":9295125,"display_name":"Daniel Rafael Wosch"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1687424257,"creation_date":1687424257,"answer_id":76530172,"question_id":76529816,"body_markdown":"For `@ParameterizedTest` in combination with `@MethodSource` you need to return a Stream of Arguments `Stream&lt;Arguments&gt;` from your method. `Arguments` is located in package `package org.junit.jupiter.params.provider`\r\n\r\nFor Example:\r\n\r\n    private static Stream&lt;Arguments&gt; validPurchasePlatformGenerator() {\r\n        return Arrays.stream(PurchasePlatform.values())\r\n            .filter(purchasePlatform -&gt; !purchasePlatform.equals(PurchasePlatform.WEB))\r\n            .map(Arguments::of);\r\n    }\r\n\r\nand then\r\n\r\n    @ParameterizedTest\r\n    @DisplayName(&quot;Some DisplayText&quot;)\r\n    @MethodSource(&quot;validPurchasePlatformGenerator&quot;)\r\n    void purchaseValid_shouldReturnValidResult(PurchasePlatform purchasePlatform) { \r\n        // test code\r\n    }\r\n\r\nIf you want to use just plain string, you can also use `@ValueSource` instead of `@MethodSource` which would make more sense for your provided test.\r\n\r\nFor Example \r\n\r\n    @ParameterizedTest\r\n    @ValueSource(strings = { &quot;a1&quot;, &quot;a2&quot; })\r\n    void testABC(String word) {\r\n        System.out.println(word);\r\n    }","title":"Not able to use @MethodSource in @ParameterizedTest","body":"<p>For <code>@ParameterizedTest</code> in combination with <code>@MethodSource</code> you need to return a Stream of Arguments <code>Stream&lt;Arguments&gt;</code> from your method. <code>Arguments</code> is located in package <code>package org.junit.jupiter.params.provider</code></p>\n<p>For Example:</p>\n<pre><code>private static Stream&lt;Arguments&gt; validPurchasePlatformGenerator() {\n    return Arrays.stream(PurchasePlatform.values())\n        .filter(purchasePlatform -&gt; !purchasePlatform.equals(PurchasePlatform.WEB))\n        .map(Arguments::of);\n}\n</code></pre>\n<p>and then</p>\n<pre><code>@ParameterizedTest\n@DisplayName(&quot;Some DisplayText&quot;)\n@MethodSource(&quot;validPurchasePlatformGenerator&quot;)\nvoid purchaseValid_shouldReturnValidResult(PurchasePlatform purchasePlatform) { \n    // test code\n}\n</code></pre>\n<p>If you want to use just plain string, you can also use <code>@ValueSource</code> instead of <code>@MethodSource</code> which would make more sense for your provided test.</p>\n<p>For Example</p>\n<pre><code>@ParameterizedTest\n@ValueSource(strings = { &quot;a1&quot;, &quot;a2&quot; })\nvoid testABC(String word) {\n    System.out.println(word);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29178657,"reputation":1,"user_id":22353401,"display_name":"Kostiantyn Perehuda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591025,"creation_date":1691424151,"answer_id":76853356,"question_id":76529816,"body_markdown":"As mentioned by @johanneslink, you have a lib version mismatch. You are using `JUnit4` framework (specifically `JUnit 4.12`), while `@ParameterizedTest` annotation (as well as `junit-jupiter-params` dependency in your `pom.xml`) belongs to `Junit5` framework.\r\n\r\nTo include `JUnit5` into your project, remove the `JUnit4` dependency and add the following to your `pom.xml`:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n        &lt;version&gt;5.10.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n        &lt;version&gt;5.10.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\r\n        &lt;version&gt;5.10.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n[Here][1] is the guide for setting up JUnit5\r\n\r\n\r\n\r\nNote that it is important to maintain the same versions of dependecies even when you are using `JUnit5`. For example, including `junit-jupiter-engine 5.10.0` with `junit-jupiter-params 5.9.2` will result in non-working code.\r\n\r\nAdditionaly, there is a [JUnit5 Aggregator][2], which is a shorthand for including three dependencies listed above, using it will make your pom less cluttered and leave out burden of checking that the versions of all three dependencies are the same.\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n    &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n    &lt;version&gt;5.10.0&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n\r\nAlso note that there is a way to create parameterized tests with `JUnit4` ([see here][3]), but I recommend to upgrade to `JUnit5` anyway, because it is a more capable and easier to use framework overall.\r\n\r\n\r\n  [1]: https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html\r\n  [2]: https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter/5.10.0\r\n  [3]: https://www.tutorialspoint.com/junit/junit_parameterized_test.htm","title":"Not able to use @MethodSource in @ParameterizedTest","body":"<p>As mentioned by @johanneslink, you have a lib version mismatch. You are using <code>JUnit4</code> framework (specifically <code>JUnit 4.12</code>), while <code>@ParameterizedTest</code> annotation (as well as <code>junit-jupiter-params</code> dependency in your <code>pom.xml</code>) belongs to <code>Junit5</code> framework.</p>\n<p>To include <code>JUnit5</code> into your project, remove the <code>JUnit4</code> dependency and add the following to your <code>pom.xml</code>:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n    &lt;version&gt;5.10.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n    &lt;version&gt;5.10.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\n    &lt;version&gt;5.10.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html\" rel=\"nofollow noreferrer\">Here</a> is the guide for setting up JUnit5</p>\n<p>Note that it is important to maintain the same versions of dependecies even when you are using <code>JUnit5</code>. For example, including <code>junit-jupiter-engine 5.10.0</code> with <code>junit-jupiter-params 5.9.2</code> will result in non-working code.</p>\n<p>Additionaly, there is a <a href=\"https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter/5.10.0\" rel=\"nofollow noreferrer\">JUnit5 Aggregator</a>, which is a shorthand for including three dependencies listed above, using it will make your pom less cluttered and leave out burden of checking that the versions of all three dependencies are the same.</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n&lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n&lt;version&gt;5.10.0&lt;/version&gt;\n&lt;scope&gt;test&lt;/scope&gt;\n</code></pre>\n\n<p>Also note that there is a way to create parameterized tests with <code>JUnit4</code> (<a href=\"https://www.tutorialspoint.com/junit/junit_parameterized_test.htm\" rel=\"nofollow noreferrer\">see here</a>), but I recommend to upgrade to <code>JUnit5</code> anyway, because it is a more capable and easier to use framework overall.</p>\n"}],"owner":{"account_id":21383112,"reputation":3,"user_id":15894213,"display_name":"Pradeep"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":497,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691591025,"creation_date":1687421563,"question_id":76529816,"body_markdown":"I am trying to create a parameterised test with a method source. Following is the code :\r\n\r\n```\r\nimport java.util.stream.Stream;\r\nimport org.junit.jupiter.params.ParameterizedTest;\r\nimport org.junit.jupiter.params.provider.MethodSource;\r\n\r\nclass ABCTest {\r\n\r\n    @ParameterizedTest\r\n    @MethodSource(&quot;abc&quot;)\r\n    void testABC(String word) {\r\n        System.out.println(word);\r\n    }\r\n\r\n    static Stream&lt;String&gt; abc() {\r\n        return Stream.of(&quot;a1&quot;,\r\n                &quot;b2&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nBut this doesn&#39;t work; while trying to run the test case, I am \r\n\r\n```\r\njava.lang.NoSuchMethodError: &#39;java.lang.String[] org.junit.platform.commons.util.ReflectionUtils.parseQualifiedMethodName(java.lang.String)&#39;\r\n.\r\n.\r\n.\r\n\tSuppressed: org.junit.platform.commons.PreconditionViolationException: Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\r\n\t\tat org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:281)\r\n\t\tat org.junit.jupiter.params.ParameterizedTestExtension.lambda$provideTestTemplateInvocationContexts$5(ParameterizedTestExtension.java:98)\r\n```\r\n\r\nFollowing is my `pom.xml` : \r\n\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;&lt;hiding_this_intentionally&gt;&lt;/groupId&gt;\r\n    &lt;artifactId&gt;&lt;hiding_this_intentionally&gt;&lt;/artifactId&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;version&gt;4.3.20-SNAPSHOT&lt;/version&gt;\r\n    &lt;modules&gt;\r\n        &lt;module&gt;&lt;hiding_this_intentionally&gt;&lt;/module&gt;\r\n        &lt;module&gt;&lt;hiding_this_intentionally&gt;&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;&lt;hiding_this_intentionally&gt;&lt;/groupId&gt;\r\n        &lt;artifactId&gt;&lt;hiding_this_intentionally&gt;&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.19&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n&lt;!--        Java related properties --&gt;\r\n        &lt;jdk.source.version&gt;17&lt;/jdk.source.version&gt;\r\n        &lt;jdk.target.version&gt;17&lt;/jdk.target.version&gt;\r\n        &lt;jdk.release.version&gt;17&lt;/jdk.release.version&gt;\r\n&lt;!--        Maven related properties --&gt;\r\n        &lt;maven.compiler.plugin.version&gt;3.9.0&lt;/maven.compiler.plugin.version&gt;\r\n        &lt;maven.deploy.plugin.version&gt;2.8.2&lt;/maven.deploy.plugin.version&gt;\r\n        &lt;maven.shade.plugin.version&gt;3.3.0&lt;/maven.shade.plugin.version&gt;\r\n        &lt;maven.javadoc.skip&gt;true&lt;/maven.javadoc.skip&gt;\r\n\r\n        &lt;userservice-model.version&gt;2.0.8&lt;/userservice-model.version&gt;\r\n        &lt;vault-model.version&gt;0.0.66&lt;/vault-model.version&gt;\r\n        &lt;ablaze.version&gt;3.0.15&lt;/ablaze.version&gt;\r\n\r\n        &lt;aspectj.maven.plugin.version&gt;1.13.1&lt;/aspectj.maven.plugin.version&gt;\r\n\r\n        &lt;json-rules.version&gt;1.0.11&lt;/json-rules.version&gt;\r\n        &lt;zjsonpatch.version&gt;0.4.3&lt;/zjsonpatch.version&gt;\r\n        &lt;lombok.version&gt;1.18.22&lt;/lombok.version&gt;\r\n        &lt;lombok.maven.version&gt;1.18.20.0&lt;/lombok.maven.version&gt;\r\n        &lt;junit.version&gt;4.12&lt;/junit.version&gt;\r\n        &lt;guava.version&gt;30.1.1-jre&lt;/guava.version&gt;\r\n        &lt;h2.version&gt;1.4.191&lt;/h2.version&gt;\r\n        &lt;!-- Sonar-JaCoCo properties --&gt;\r\n        &lt;sonar.java.coveragePlugin&gt;jacoco&lt;/sonar.java.coveragePlugin&gt;\r\n        &lt;sonar.dynamicAnalysis&gt;reuseReports&lt;/sonar.dynamicAnalysis&gt;\r\n        &lt;sonar.jacoco.reportPaths&gt;${project.basedir}/../target/jacoco.exec&lt;/sonar.jacoco.reportPaths&gt;\r\n        &lt;sonar.language&gt;java&lt;/sonar.language&gt;\r\n        &lt;sonar.buildbreaker.skip&gt;true&lt;/sonar.buildbreaker.skip&gt;\r\n        &lt;giftcard.provider.model.version&gt;1.0.3&lt;/giftcard.provider.model.version&gt;\r\n        &lt;log4j.to.slf4j.version&gt;2.8.2&lt;/log4j.to.slf4j.version&gt;\r\n        &lt;jersey.guava.version&gt;2.6&lt;/jersey.guava.version&gt;\r\n        &lt;clearspring.analytics.stream.version&gt;2.9.5&lt;/clearspring.analytics.stream.version&gt;\r\n        &lt;sonar.qualitygate.wait&gt;false&lt;/sonar.qualitygate.wait&gt;\r\n\r\n        &lt;gpp.aerospike.version&gt;4.1.8&lt;/gpp.aerospike.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.flipkart.ranger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ranger&lt;/artifactId&gt;\r\n                &lt;version&gt;0.6.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hbase-shaded-client&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;${guava.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-module-afterburner&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.raven.dropwizard&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dropwizard-jmxmp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.raskasa.metrics&lt;/groupId&gt;\r\n            &lt;artifactId&gt;metrics-okhttp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.clearspring.analytics&lt;/groupId&gt;\r\n            &lt;artifactId&gt;stream&lt;/artifactId&gt;\r\n            &lt;version&gt;${clearspring.analytics.stream.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.appform.rules&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-rules&lt;/artifactId&gt;\r\n            &lt;version&gt;${json-rules.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.flipkart.zjsonpatch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;zjsonpatch&lt;/artifactId&gt;\r\n            &lt;version&gt;${zjsonpatch.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.dropwizard&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dropwizard-jackson&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j.to.slf4j.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.bundles.repackaged&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-guava&lt;/artifactId&gt;\r\n            &lt;version&gt;${jersey.guava.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.reflections&lt;/groupId&gt;\r\n            &lt;artifactId&gt;reflections&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Testing --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;version&gt;${h2.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.dropwizard&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dropwizard-testing&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven.deploy.plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;skip&gt;false&lt;/skip&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;delombok&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;version&gt;${lombok.maven.version}&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${jdk.source.version}&lt;/source&gt;\r\n                    &lt;target&gt;${jdk.target.version}&lt;/target&gt;\r\n                    &lt;release&gt;${jdk.release.version}&lt;/release&gt;\r\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n                    &lt;debug&gt;false&lt;/debug&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;docker&lt;/id&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nCan someone help me here?\r\n\r\nTried changing the version of junit-jupiter-params as suggested in https://stackoverflow.com/questions/53926264/nosuchmethoderror-org-junit-platform-commons-util-reflectionutils-trytoloadclas, still didn&#39;t work","title":"Not able to use @MethodSource in @ParameterizedTest","body":"<p>I am trying to create a parameterised test with a method source. Following is the code :</p>\n<pre><code>import java.util.stream.Stream;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.MethodSource;\n\nclass ABCTest {\n\n    @ParameterizedTest\n    @MethodSource(&quot;abc&quot;)\n    void testABC(String word) {\n        System.out.println(word);\n    }\n\n    static Stream&lt;String&gt; abc() {\n        return Stream.of(&quot;a1&quot;,\n                &quot;b2&quot;);\n    }\n\n}\n</code></pre>\n<p>But this doesn't work; while trying to run the test case, I am</p>\n<pre><code>java.lang.NoSuchMethodError: 'java.lang.String[] org.junit.platform.commons.util.ReflectionUtils.parseQualifiedMethodName(java.lang.String)'\n.\n.\n.\n    Suppressed: org.junit.platform.commons.PreconditionViolationException: Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\n        at org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:281)\n        at org.junit.jupiter.params.ParameterizedTestExtension.lambda$provideTestTemplateInvocationContexts$5(ParameterizedTestExtension.java:98)\n</code></pre>\n<p>Following is my <code>pom.xml</code> :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;&lt;hiding_this_intentionally&gt;&lt;/groupId&gt;\n    &lt;artifactId&gt;&lt;hiding_this_intentionally&gt;&lt;/artifactId&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;version&gt;4.3.20-SNAPSHOT&lt;/version&gt;\n    &lt;modules&gt;\n        &lt;module&gt;&lt;hiding_this_intentionally&gt;&lt;/module&gt;\n        &lt;module&gt;&lt;hiding_this_intentionally&gt;&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;&lt;hiding_this_intentionally&gt;&lt;/groupId&gt;\n        &lt;artifactId&gt;&lt;hiding_this_intentionally&gt;&lt;/artifactId&gt;\n        &lt;version&gt;1.0.19&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;!--        Java related properties --&gt;\n        &lt;jdk.source.version&gt;17&lt;/jdk.source.version&gt;\n        &lt;jdk.target.version&gt;17&lt;/jdk.target.version&gt;\n        &lt;jdk.release.version&gt;17&lt;/jdk.release.version&gt;\n&lt;!--        Maven related properties --&gt;\n        &lt;maven.compiler.plugin.version&gt;3.9.0&lt;/maven.compiler.plugin.version&gt;\n        &lt;maven.deploy.plugin.version&gt;2.8.2&lt;/maven.deploy.plugin.version&gt;\n        &lt;maven.shade.plugin.version&gt;3.3.0&lt;/maven.shade.plugin.version&gt;\n        &lt;maven.javadoc.skip&gt;true&lt;/maven.javadoc.skip&gt;\n\n        &lt;userservice-model.version&gt;2.0.8&lt;/userservice-model.version&gt;\n        &lt;vault-model.version&gt;0.0.66&lt;/vault-model.version&gt;\n        &lt;ablaze.version&gt;3.0.15&lt;/ablaze.version&gt;\n\n        &lt;aspectj.maven.plugin.version&gt;1.13.1&lt;/aspectj.maven.plugin.version&gt;\n\n        &lt;json-rules.version&gt;1.0.11&lt;/json-rules.version&gt;\n        &lt;zjsonpatch.version&gt;0.4.3&lt;/zjsonpatch.version&gt;\n        &lt;lombok.version&gt;1.18.22&lt;/lombok.version&gt;\n        &lt;lombok.maven.version&gt;1.18.20.0&lt;/lombok.maven.version&gt;\n        &lt;junit.version&gt;4.12&lt;/junit.version&gt;\n        &lt;guava.version&gt;30.1.1-jre&lt;/guava.version&gt;\n        &lt;h2.version&gt;1.4.191&lt;/h2.version&gt;\n        &lt;!-- Sonar-JaCoCo properties --&gt;\n        &lt;sonar.java.coveragePlugin&gt;jacoco&lt;/sonar.java.coveragePlugin&gt;\n        &lt;sonar.dynamicAnalysis&gt;reuseReports&lt;/sonar.dynamicAnalysis&gt;\n        &lt;sonar.jacoco.reportPaths&gt;${project.basedir}/../target/jacoco.exec&lt;/sonar.jacoco.reportPaths&gt;\n        &lt;sonar.language&gt;java&lt;/sonar.language&gt;\n        &lt;sonar.buildbreaker.skip&gt;true&lt;/sonar.buildbreaker.skip&gt;\n        &lt;giftcard.provider.model.version&gt;1.0.3&lt;/giftcard.provider.model.version&gt;\n        &lt;log4j.to.slf4j.version&gt;2.8.2&lt;/log4j.to.slf4j.version&gt;\n        &lt;jersey.guava.version&gt;2.6&lt;/jersey.guava.version&gt;\n        &lt;clearspring.analytics.stream.version&gt;2.9.5&lt;/clearspring.analytics.stream.version&gt;\n        &lt;sonar.qualitygate.wait&gt;false&lt;/sonar.qualitygate.wait&gt;\n\n        &lt;gpp.aerospike.version&gt;4.1.8&lt;/gpp.aerospike.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.flipkart.ranger&lt;/groupId&gt;\n                &lt;artifactId&gt;ranger&lt;/artifactId&gt;\n                &lt;version&gt;0.6.3&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\n            &lt;artifactId&gt;hbase-shaded-client&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;${guava.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-module-afterburner&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.raven.dropwizard&lt;/groupId&gt;\n            &lt;artifactId&gt;dropwizard-jmxmp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.raskasa.metrics&lt;/groupId&gt;\n            &lt;artifactId&gt;metrics-okhttp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.clearspring.analytics&lt;/groupId&gt;\n            &lt;artifactId&gt;stream&lt;/artifactId&gt;\n            &lt;version&gt;${clearspring.analytics.stream.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.appform.rules&lt;/groupId&gt;\n            &lt;artifactId&gt;json-rules&lt;/artifactId&gt;\n            &lt;version&gt;${json-rules.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.flipkart.zjsonpatch&lt;/groupId&gt;\n            &lt;artifactId&gt;zjsonpatch&lt;/artifactId&gt;\n            &lt;version&gt;${zjsonpatch.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${lombok.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.dropwizard&lt;/groupId&gt;\n            &lt;artifactId&gt;dropwizard-jackson&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.to.slf4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.bundles.repackaged&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-guava&lt;/artifactId&gt;\n            &lt;version&gt;${jersey.guava.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.reflections&lt;/groupId&gt;\n            &lt;artifactId&gt;reflections&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Testing --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\n            &lt;version&gt;5.9.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;${h2.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.dropwizard&lt;/groupId&gt;\n            &lt;artifactId&gt;dropwizard-testing&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.deploy.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;skip&gt;false&lt;/skip&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;delombok&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;version&gt;${lombok.maven.version}&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${jdk.source.version}&lt;/source&gt;\n                    &lt;target&gt;${jdk.target.version}&lt;/target&gt;\n                    &lt;release&gt;${jdk.release.version}&lt;/release&gt;\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                    &lt;debug&gt;false&lt;/debug&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;docker&lt;/id&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>Can someone help me here?</p>\n<p>Tried changing the version of junit-jupiter-params as suggested in <a href=\"https://stackoverflow.com/questions/53926264/nosuchmethoderror-org-junit-platform-commons-util-reflectionutils-trytoloadclas\">NoSuchMethodError: org.junit.platform.commons.util.ReflectionUtils.tryToLoadClass</a>, still didn't work</p>\n"},{"tags":["java","mongodb","spring-boot","spring-data-mongodb"],"answers":[{"comments":[{"owner":{"account_id":6685684,"reputation":540,"user_id":5459444,"display_name":"Ashutosh dwivedi"},"score":0,"creation_date":1587220129,"post_id":61290055,"comment_id":108426892,"body_markdown":"I tried adding this as well but the issue remains the same","body":"I tried adding this as well but the issue remains the same"}],"tags":[],"owner":{"account_id":17153701,"reputation":379,"user_id":12415069,"display_name":"Bojan Krkic"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587217158,"creation_date":1587217158,"answer_id":61290055,"question_id":61289948,"body_markdown":"Along with `maxIdleTimeMS`, try setting a `keepAlive` value manually too.\r\n\r\nAlso, refer to solutions in [this related question](https://stackoverflow.com/questions/39079876/mongosocketreadexception-prematurely-reached-end-of-stream-after-a-period-of-i).","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>Along with <code>maxIdleTimeMS</code>, try setting a <code>keepAlive</code> value manually too.</p>\n\n<p>Also, refer to solutions in <a href=\"https://stackoverflow.com/questions/39079876/mongosocketreadexception-prematurely-reached-end-of-stream-after-a-period-of-i\">this related question</a>.</p>\n"},{"tags":[],"owner":{"account_id":1772872,"reputation":81,"user_id":1617311,"display_name":"Adrian Hall"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1610631447,"creation_date":1610631447,"answer_id":65720045,"question_id":61289948,"body_markdown":"One possibility is that in MongoDB Atlas you have (sensibly) restricted access to specific IP addresses, and the IP address of the machine you are connecting from has changed because it is set dynamically.  If that&#39;s the case, you may have to add your IP address to your MongoDB Atlas account each time it changes, or set yourself up with a static IP address.","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>One possibility is that in MongoDB Atlas you have (sensibly) restricted access to specific IP addresses, and the IP address of the machine you are connecting from has changed because it is set dynamically.  If that's the case, you may have to add your IP address to your MongoDB Atlas account each time it changes, or set yourself up with a static IP address.</p>\n"},{"tags":[],"owner":{"account_id":28817236,"reputation":1,"user_id":22070574,"display_name":"Vishwa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689857778,"creation_date":1689606904,"answer_id":76705877,"question_id":61289948,"body_markdown":"I got this error when i tried to connect to `mongodb` on atlas cluster from my `springboot` app. Adding `allow access from anywhere (0.0.0.0/0)` to network permission list fixed my issue.","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>I got this error when i tried to connect to <code>mongodb</code> on atlas cluster from my <code>springboot</code> app. Adding <code>allow access from anywhere (0.0.0.0/0)</code> to network permission list fixed my issue.</p>\n"},{"tags":[],"owner":{"account_id":17659919,"reputation":608,"user_id":12818585,"display_name":"Andrea Ciccotta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691590951,"creation_date":1691590951,"answer_id":76868718,"question_id":61289948,"body_markdown":"Add your ip to the acl, it worked for me\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jJvkx.png","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>Add your ip to the acl, it worked for me</p>\n<p><a href=\"https://i.stack.imgur.com/jJvkx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jJvkx.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":6685684,"reputation":540,"user_id":5459444,"display_name":"Ashutosh dwivedi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2537,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1691590951,"creation_date":1587216679,"question_id":61289948,"body_markdown":"I am using MongoDB atlas (cluster) to connect to my spring boot application. I was earlier able to successfully insert &amp; get the data from the cluster but after few minutes of inactivity I started getting, \r\n\r\n```com.mongodb.MongoSocketReadException: Prematurely reached the end of stream```.\r\nI tried to make some changes in the mongodb cluster URI such as:\r\n\r\n```spring.data.mongodb.uri=mongodb+srv://emuser:empassword@emp-mate-bzmeh.gcp.mongodb.net/emp-mate-db?retryWrites=true&amp;retryReads=true&amp;w=majority```\r\n     and also tried \r\n\r\n```spring.data.mongodb.uri=mongodb+srv://emuser:empassword@emp-mate-bzmeh.gcp.mongodb.net/emp-mate-db?ssl=true&amp;retryWrites=true&amp;retryReads=true&amp;w=majority&amp;maxIdleTimeMS=80```\r\n\r\nI have also checked the SSL settings in JRE and its fine &amp; I did not also see any error log in the Alert section on MongoDB cluster. Below is the snippet of the code where I have used  `MongoTemplate`.\r\n \r\n\r\n    import java.util.List;\r\n    import java.util.Optional;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.data.mongodb.core.MongoTemplate;\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    import org.springframework.data.mongodb.core.query.Query;\r\n    import org.springframework.data.mongodb.core.query.Update;\r\n    import org.springframework.stereotype.Service;\r\n    import com.mongodb.client.result.UpdateResult;\r\n    import employeemate.repository.UsersRepository;\r\n    import employeemate.resources.Users;\r\n\r\n        @Service\r\n        public class UserService {\r\n        \t@Autowired\r\n        \tMongoTemplate mongoTemplate;\r\n        \t@Autowired\r\n        \tUsersRepository usersRepository;\r\n        \r\n        \tpublic void addSampleData() {\r\n        \t\t System.out.println(&quot;Adding sample data&quot;);\r\n        \t\t usersRepository.save(new Users(&quot;1&quot;,&quot;Ashu&quot;,&quot;test@gmail.com&quot;, 24, &quot;Male&quot;, &quot;1111111111&quot;, &quot;Delhi&quot;));\r\n        \t\t usersRepository.save(new Users(&quot;2&quot;,&quot;Adam Clark&quot;, &quot;adam@gmail.com&quot;,24,&quot;Male&quot;, &quot;2222222222&quot;, &quot;Shelton CT&quot;));\r\n        \t\t\r\n        \t\t }\r\n        \t}\r\n\r\nPOM.xml\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>I am using MongoDB atlas (cluster) to connect to my spring boot application. I was earlier able to successfully insert &amp; get the data from the cluster but after few minutes of inactivity I started getting, </p>\n\n<p><code>com.mongodb.MongoSocketReadException: Prematurely reached the end of stream</code>.\nI tried to make some changes in the mongodb cluster URI such as:</p>\n\n<p><code>spring.data.mongodb.uri=mongodb+srv://emuser:empassword@emp-mate-bzmeh.gcp.mongodb.net/emp-mate-db?retryWrites=true&amp;retryReads=true&amp;w=majority</code>\n     and also tried </p>\n\n<p><code>spring.data.mongodb.uri=mongodb+srv://emuser:empassword@emp-mate-bzmeh.gcp.mongodb.net/emp-mate-db?ssl=true&amp;retryWrites=true&amp;retryReads=true&amp;w=majority&amp;maxIdleTimeMS=80</code></p>\n\n<p>I have also checked the SSL settings in JRE and its fine &amp; I did not also see any error log in the Alert section on MongoDB cluster. Below is the snippet of the code where I have used  <code>MongoTemplate</code>.</p>\n\n<pre><code>import java.util.List;\nimport java.util.Optional;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.mongodb.core.MongoTemplate;\nimport org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.data.mongodb.core.query.Query;\nimport org.springframework.data.mongodb.core.query.Update;\nimport org.springframework.stereotype.Service;\nimport com.mongodb.client.result.UpdateResult;\nimport employeemate.repository.UsersRepository;\nimport employeemate.resources.Users;\n\n    @Service\n    public class UserService {\n        @Autowired\n        MongoTemplate mongoTemplate;\n        @Autowired\n        UsersRepository usersRepository;\n\n        public void addSampleData() {\n             System.out.println(\"Adding sample data\");\n             usersRepository.save(new Users(\"1\",\"Ashu\",\"test@gmail.com\", 24, \"Male\", \"1111111111\", \"Delhi\"));\n             usersRepository.save(new Users(\"2\",\"Adam Clark\", \"adam@gmail.com\",24,\"Male\", \"2222222222\", \"Shelton CT\"));\n\n             }\n        }\n</code></pre>\n\n<p>POM.xml</p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","java-io"],"comments":[{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":1,"creation_date":1691591003,"post_id":76868643,"comment_id":135512621,"body_markdown":"Does this answer your question? [how to define path in SMB](https://stackoverflow.com/questions/50233098/how-to-define-path-in-smb)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/50233098/how-to-define-path-in-smb\">how to define path in SMB</a>"},{"owner":{"account_id":29158723,"reputation":1,"user_id":22337927,"display_name":"Fra"},"score":0,"creation_date":1691652746,"post_id":76868643,"comment_id":135521112,"body_markdown":"Unfortunately no :( That is pretty much the other way around. I need to read from a sbm location (wich I can do with no troubles at all) and write to a non-smb location (wich is where I&#39;m struggling)","body":"Unfortunately no :( That is pretty much the other way around. I need to read from a sbm location (wich I can do with no troubles at all) and write to a non-smb location (wich is where I&#39;m struggling)"},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1691666233,"post_id":76868643,"comment_id":135523651,"body_markdown":"I have retracted my duplicate vote.","body":"I have retracted my duplicate vote."}],"owner":{"account_id":29158723,"reputation":1,"user_id":22337927,"display_name":"Fra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691590733,"creation_date":1691590527,"question_id":76868643,"body_markdown":"I have to move a file from a server to another. I can connect to the source serve and retrieve the file via smb, but once I have the file, I can save it on my machine without any problem, but I&#39;m having troubles on copying it to another server. The target server is a Windows machine, I know IP address and the folder where I want to save the file to.\r\nBased on the error I&#39;m receiving, I think something is wrong on the target path.\r\n\r\nHere&#39;s what I&#39;m using:\r\n\r\n```\r\npublic static void main(String args[]) throws Exception {\r\n\tString from = &quot;smb://IpAddress/.../tmp/&quot;;\r\n\tString toServer = &quot;//.... what should i write here??&quot;;\r\n\tString filename = &quot;someFileName.xml&quot;;\r\n\r\n\tmoveSmbFileToServer(from, toServer, filename);\r\n} // main\t\r\n\r\npublic static void moveSmbFileToServer (String smbPathFrom, String pathTo, String fileName)  throws Exception {\r\n\tSmbFile smbFileFrom = new SmbFile(smbPathFrom + fileName);\r\n\tFile fileTo = new File(pathTo + fileName);\r\n\tInputStream is = null;\r\n    OutputStream os = null;\r\n    try {\r\n        is = smbFileFrom.getInputStream();\r\n        os = new FileOutputStream(fileTo);\r\n        byte[] buffer = new byte[1024];\r\n        int length;\r\n        while ((length = is.read(buffer)) &gt; 0)\r\n            os.write(buffer, 0, length);\r\n\r\n//\t    smbFileFrom.delete(); // commented so I can test multiple times. Will be uncommented once the writing works\r\n    } finally {\r\n        is.close();\r\n        os.close();\r\n    }\r\n    \r\n} // moveSmbFileToServer\r\n```","title":"How to save a file in another computer within the same network knowing IP address and path","body":"<p>I have to move a file from a server to another. I can connect to the source serve and retrieve the file via smb, but once I have the file, I can save it on my machine without any problem, but I'm having troubles on copying it to another server. The target server is a Windows machine, I know IP address and the folder where I want to save the file to.\nBased on the error I'm receiving, I think something is wrong on the target path.</p>\n<p>Here's what I'm using:</p>\n<pre><code>public static void main(String args[]) throws Exception {\n    String from = &quot;smb://IpAddress/.../tmp/&quot;;\n    String toServer = &quot;//.... what should i write here??&quot;;\n    String filename = &quot;someFileName.xml&quot;;\n\n    moveSmbFileToServer(from, toServer, filename);\n} // main   \n\npublic static void moveSmbFileToServer (String smbPathFrom, String pathTo, String fileName)  throws Exception {\n    SmbFile smbFileFrom = new SmbFile(smbPathFrom + fileName);\n    File fileTo = new File(pathTo + fileName);\n    InputStream is = null;\n    OutputStream os = null;\n    try {\n        is = smbFileFrom.getInputStream();\n        os = new FileOutputStream(fileTo);\n        byte[] buffer = new byte[1024];\n        int length;\n        while ((length = is.read(buffer)) &gt; 0)\n            os.write(buffer, 0, length);\n\n//      smbFileFrom.delete(); // commented so I can test multiple times. Will be uncommented once the writing works\n    } finally {\n        is.close();\n        os.close();\n    }\n    \n} // moveSmbFileToServer\n</code></pre>\n"},{"tags":["java","android","android-studio","emulation"],"answers":[{"comments":[{"owner":{"account_id":1673022,"reputation":2576,"user_id":1539100,"accept_rate":59,"display_name":"sorosh_sabz"},"score":0,"creation_date":1671218433,"post_id":69789845,"comment_id":132059673,"body_markdown":"I need HyperV on my windows, Did you have any other solution?","body":"I need HyperV on my windows, Did you have any other solution?"},{"owner":{"account_id":771526,"reputation":629,"user_id":804509,"display_name":"Michael"},"score":0,"creation_date":1672049290,"post_id":69789845,"comment_id":132212305,"body_markdown":"It seems to be fixed (https://issuetracker.google.com/issues/202188690?pli=1) as mentioned in the thread with the original solution (see link above). I haven&#39;t researched any further as I don&#39;t need HyperV. Good luck!","body":"It seems to be fixed (<a href=\"https://issuetracker.google.com/issues/202188690?pli=1\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/202188690?pli=1</a>) as mentioned in the thread with the original solution (see link above). I haven&#39;t researched any further as I don&#39;t need HyperV. Good luck!"}],"tags":[],"owner":{"account_id":771526,"reputation":629,"user_id":804509,"display_name":"Michael"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691590535,"creation_date":1635707808,"answer_id":69789845,"question_id":68914500,"body_markdown":"This helps me in getting it to work: switch off [Hyper-V][1] on Windows:\r\n\r\nOpen a PowerShell window as *Administrator* and run:\r\n\r\n    bcdedit /set hypervisorlaunchtype off\r\n\r\nReboot afterwards. Alternatively, run &#39;optionalfeatures&#39; and select the hypervisor platform to remove. To test if it really worked, run:\r\n\r\n    emulator.exe -verbose -avd &lt;YOUR AVD NAME&gt;\r\n\r\nYou can list the [AVDs][2] with &#39;emulator.exe -list-avds&#39;.\r\n\r\nIt is not my credits, but those of &#39;viet-quocnguyen&#39;. See *[Android emulator not starting anymore #6471][3]*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Hyper-V\r\n  [2]: https://developer.android.com/studio/run/managing-avds\r\n  [3]: https://github.com/microsoft/WSL/issues/6471#issuecomment-770417782\r\n","title":"qemu-system-x86_64.exe is not responding","body":"<p>This helps me in getting it to work: switch off <a href=\"https://en.wikipedia.org/wiki/Hyper-V\" rel=\"nofollow noreferrer\">Hyper-V</a> on Windows:</p>\n<p>Open a PowerShell window as <em>Administrator</em> and run:</p>\n<pre><code>bcdedit /set hypervisorlaunchtype off\n</code></pre>\n<p>Reboot afterwards. Alternatively, run 'optionalfeatures' and select the hypervisor platform to remove. To test if it really worked, run:</p>\n<pre><code>emulator.exe -verbose -avd &lt;YOUR AVD NAME&gt;\n</code></pre>\n<p>You can list the <a href=\"https://developer.android.com/studio/run/managing-avds\" rel=\"nofollow noreferrer\">AVDs</a> with 'emulator.exe -list-avds'.</p>\n<p>It is not my credits, but those of 'viet-quocnguyen'. See <em><a href=\"https://github.com/microsoft/WSL/issues/6471#issuecomment-770417782\" rel=\"nofollow noreferrer\">Android emulator not starting anymore #6471</a></em></p>\n"}],"owner":{"account_id":18176502,"reputation":27,"user_id":13225133,"display_name":"Zero03"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2835,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691590679,"creation_date":1629841976,"question_id":68914500,"body_markdown":"I just installed Android Studio and I&#39;ve been trying to figure out for the past 3 hours why it is that when I try to run my newly created project on a emulated phone it doesn&#39;t work.\r\n\r\nIt&#39;s not even that the program doesn&#39;t work; it&#39;s that it freezes the moment I open it. I&#39;ve tried uninstalling/reinstalling [HAXM][1], SDKs for the phone, and recreating the phone / wiping the data on the phone and retrying, and nothing&#39;s worked so far.\r\n\r\nWhat causes this problem? Please see the picture to see what the problem is.\r\n\r\nP.S.: I&#39;m using Android Studio on Windows. My system is beefy and should be able to run the emulator fine. I have *Virtualization Enabled* too.\r\n\r\n[![Emulator broken window][2]][2]\r\n\r\n[![Not responding window][3]][3]\r\n\r\n  [1]: https://en.wikipedia.org/wiki/QEMU#Accelerator\r\n  [2]: https://i.stack.imgur.com/e9eXq.png\r\n  [3]: https://i.stack.imgur.com/VJaz4.png\r\n","title":"qemu-system-x86_64.exe is not responding","body":"<p>I just installed Android Studio and I've been trying to figure out for the past 3 hours why it is that when I try to run my newly created project on a emulated phone it doesn't work.</p>\n<p>It's not even that the program doesn't work; it's that it freezes the moment I open it. I've tried uninstalling/reinstalling <a href=\"https://en.wikipedia.org/wiki/QEMU#Accelerator\" rel=\"nofollow noreferrer\">HAXM</a>, SDKs for the phone, and recreating the phone / wiping the data on the phone and retrying, and nothing's worked so far.</p>\n<p>What causes this problem? Please see the picture to see what the problem is.</p>\n<p>P.S.: I'm using Android Studio on Windows. My system is beefy and should be able to run the emulator fine. I have <em>Virtualization Enabled</em> too.</p>\n<p><a href=\"https://i.stack.imgur.com/e9eXq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e9eXq.png\" alt=\"Emulator broken window\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/VJaz4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VJaz4.png\" alt=\"Not responding window\" /></a></p>\n"},{"tags":["java","dao"],"answers":[{"comments":[{"owner":{"account_id":3306323,"reputation":4878,"user_id":2781031,"accept_rate":69,"display_name":"Vasanth Nag K V"},"score":4,"creation_date":1380801736,"post_id":19154487,"comment_id":28339797,"body_markdown":"hi rami, m really glad thayt you tried explaining me with a very simple exaple, which is what i needed. can you please explain wat you meant with &#39;concrete implementation&#39; did you mean that we have to next write the definition for the methods by implementing the interface to a class.. ??","body":"hi rami, m really glad thayt you tried explaining me with a very simple exaple, which is what i needed. can you please explain wat you meant with &#39;concrete implementation&#39; did you mean that we have to next write the definition for the methods by implementing the interface to a class.. ??"},{"owner":{"account_id":252942,"reputation":7182,"user_id":531310,"accept_rate":100,"display_name":"Rami"},"score":1,"creation_date":1380843964,"post_id":19154487,"comment_id":28361620,"body_markdown":"Yes that&#39;s right. Like a class called EmployeeSQLServerDAO which implements the EmployeeDAO interface by providing full implementation for its methods in a way relevant to SQL Server","body":"Yes that&#39;s right. Like a class called EmployeeSQLServerDAO which implements the EmployeeDAO interface by providing full implementation for its methods in a way relevant to SQL Server"},{"owner":{"account_id":3306323,"reputation":4878,"user_id":2781031,"accept_rate":69,"display_name":"Vasanth Nag K V"},"score":8,"creation_date":1380867122,"post_id":19154487,"comment_id":28367269,"body_markdown":"so that is all a DAO is?? it is just a class that WE are writing to access the database. whenever we need a service from the database, we create an object of a DAO use it for database operations and then get rid of the DAO once we get what we want from the database. Am i right?? and may i know the Scope of this DAO concept rami??","body":"so that is all a DAO is?? it is just a class that WE are writing to access the database. whenever we need a service from the database, we create an object of a DAO use it for database operations and then get rid of the DAO once we get what we want from the database. Am i right?? and may i know the Scope of this DAO concept rami??"},{"owner":{"account_id":252942,"reputation":7182,"user_id":531310,"accept_rate":100,"display_name":"Rami"},"score":8,"creation_date":1380869565,"post_id":19154487,"comment_id":28368151,"body_markdown":"Yes, The DAO as its name implies is for accessing/updating the underlying storage regarding a certain entity/class. So in the above example we have an employee class/entity which we use a SQL server DB table to persist. The Employee DAO will contain methods to insert/delete/update/select employee(s)","body":"Yes, The DAO as its name implies is for accessing/updating the underlying storage regarding a certain entity/class. So in the above example we have an employee class/entity which we use a SQL server DB table to persist. The Employee DAO will contain methods to insert/delete/update/select employee(s)"},{"owner":{"account_id":2003177,"reputation":16895,"user_id":1793718,"accept_rate":69,"display_name":"Lucky"},"score":0,"creation_date":1473491403,"post_id":19154487,"comment_id":66171374,"body_markdown":"insert, update and delete will return int(no. of rows affected) instead of boolean right?","body":"insert, update and delete will return int(no. of rows affected) instead of boolean right?"},{"owner":{"account_id":252942,"reputation":7182,"user_id":531310,"accept_rate":100,"display_name":"Rami"},"score":0,"creation_date":1473671929,"post_id":19154487,"comment_id":66215733,"body_markdown":"@Lucky Yes right you can implement it that way specially if the method accepts a list to be inserted/updated/deleted but I was thinking here about a single insert/update/delete and whether it is successful or not.","body":"@Lucky Yes right you can implement it that way specially if the method accepts a list to be inserted/updated/deleted but I was thinking here about a single insert/update/delete and whether it is successful or not."},{"owner":{"account_id":2140162,"reputation":13295,"user_id":1899020,"accept_rate":80,"display_name":"user1899020"},"score":0,"creation_date":1497671940,"post_id":19154487,"comment_id":76189114,"body_markdown":"@Rami Which layer is the Employee class at? Persistence layer or database layer?","body":"@Rami Which layer is the Employee class at? Persistence layer or database layer?"},{"owner":{"account_id":252942,"reputation":7182,"user_id":531310,"accept_rate":100,"display_name":"Rami"},"score":0,"creation_date":1497926441,"post_id":19154487,"comment_id":76271514,"body_markdown":"@user1899020 persistence layer.","body":"@user1899020 persistence layer."},{"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"score":1,"creation_date":1514306823,"post_id":19154487,"comment_id":82931217,"body_markdown":"That makes no sense to create an interface for employee dao. No reason you&#39;d want more than 1 implementation.","body":"That makes no sense to create an interface for employee dao. No reason you&#39;d want more than 1 implementation."},{"owner":{"account_id":252942,"reputation":7182,"user_id":531310,"accept_rate":100,"display_name":"Rami"},"score":3,"creation_date":1514860036,"post_id":19154487,"comment_id":83082195,"body_markdown":"@PhilipRego we can certainly have multiple implementations for example a MSSQL server implementation, and another one that uses a CSV file to be used with unit tests.","body":"@PhilipRego we can certainly have multiple implementations for example a MSSQL server implementation, and another one that uses a CSV file to be used with unit tests."},{"owner":{"account_id":8632300,"reputation":91988,"user_id":6463558,"accept_rate":48,"display_name":"Lin Du"},"score":0,"creation_date":1550223659,"post_id":19154487,"comment_id":96198495,"body_markdown":"Another question is how to handle the cross table join query? Like query `users` with their `posts`? How to name the function?","body":"Another question is how to handle the cross table join query? Like query <code>users</code> with their <code>posts</code>? How to name the function?"},{"owner":{"account_id":252942,"reputation":7182,"user_id":531310,"accept_rate":100,"display_name":"Rami"},"score":0,"creation_date":1550446178,"post_id":19154487,"comment_id":96259765,"body_markdown":"@slideshowp2 there is no specific way to name the method/function, just use a descriptive name :)","body":"@slideshowp2 there is no specific way to name the method/function, just use a descriptive name :)"},{"owner":{"account_id":6401714,"reputation":5744,"user_id":4964136,"accept_rate":100,"display_name":"Vishwa Ratna"},"score":0,"creation_date":1557380886,"post_id":19154487,"comment_id":98746652,"body_markdown":"DAO is abstract , it is sub divided into DAOimpl.","body":"DAO is abstract , it is sub divided into DAOimpl."},{"owner":{"account_id":9597376,"reputation":341,"user_id":7126092,"display_name":"赣西狠人"},"score":0,"creation_date":1645165711,"post_id":19154487,"comment_id":125803388,"body_markdown":"Another question that might be beyond the scope of this discussion is: as the class `Employee` gradually becomes complicated, with more attributes filled in, like `department`, `region` and so on, we might need to query this entity with these attributes as well. Then do we have to add methods like `findByDepartment` and `findByRegion`?","body":"Another question that might be beyond the scope of this discussion is: as the class <code>Employee</code> gradually becomes complicated, with more attributes filled in, like <code>department</code>, <code>region</code> and so on, we might need to query this entity with these attributes as well. Then do we have to add methods like <code>findByDepartment</code> and <code>findByRegion</code>?"},{"owner":{"account_id":4185192,"reputation":661,"user_id":3429115,"display_name":"Rafs"},"score":0,"creation_date":1677169629,"post_id":19154487,"comment_id":133289018,"body_markdown":"@赣西狠人 I&#39;d say yes","body":"@赣西狠人 I&#39;d say yes"}],"tags":[],"owner":{"account_id":252942,"reputation":7182,"user_id":531310,"accept_rate":100,"display_name":"Rami"},"comment_count":15,"down_vote_count":0,"up_vote_count":521,"is_accepted":true,"score":521,"last_activity_date":1457295419,"creation_date":1380789372,"answer_id":19154487,"question_id":19154202,"body_markdown":"The Data Access Object is basically an object or an interface that provides access to an underlying database or any other persistence storage. \r\n\r\nThat definition from:\r\nhttp://en.wikipedia.org/wiki/Data_access_object\r\n\r\nCheck also the sequence diagram here: \r\nhttp://www.oracle.com/technetwork/java/dataaccessobject-138824.html\r\n\r\nMaybe a simple example can help you understand the concept:\r\n\r\nLet&#39;s say we have an entity to represent an employee:\r\n\r\n\r\n   \r\n\r\n    public class Employee {\r\n\r\n    \tprivate int id;\r\n    \tprivate String name;\r\n    \t\r\n    \t\r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n\r\n    }\r\n\r\n\r\nThe employee entities will be persisted into a corresponding **`Employee`** table in a database.\r\nA simple DAO interface to handle the database operation required to manipulate an employee entity will be like:\r\n\r\n    interface EmployeeDAO {\r\n    \t\r\n    \tList&lt;Employee&gt; findAll();\r\n    \tList&lt;Employee&gt; findById();\r\n    \tList&lt;Employee&gt; findByName();\r\n    \tboolean insertEmployee(Employee employee);\r\n    \tboolean updateEmployee(Employee employee);\r\n    \tboolean deleteEmployee(Employee employee);\r\n    \t\r\n    }\r\n\r\nNext we have to provide a concrete implementation for that interface to deal with SQL server, and another to deal with flat files, etc.","title":"Data access object (DAO) in Java","body":"<p>The Data Access Object is basically an object or an interface that provides access to an underlying database or any other persistence storage. </p>\n\n<p>That definition from:\n<a href=\"http://en.wikipedia.org/wiki/Data_access_object\">http://en.wikipedia.org/wiki/Data_access_object</a></p>\n\n<p>Check also the sequence diagram here: \n<a href=\"http://www.oracle.com/technetwork/java/dataaccessobject-138824.html\">http://www.oracle.com/technetwork/java/dataaccessobject-138824.html</a></p>\n\n<p>Maybe a simple example can help you understand the concept:</p>\n\n<p>Let's say we have an entity to represent an employee:</p>\n\n<pre><code>public class Employee {\n\n    private int id;\n    private String name;\n\n\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n\n<p>The employee entities will be persisted into a corresponding <strong><code>Employee</code></strong> table in a database.\nA simple DAO interface to handle the database operation required to manipulate an employee entity will be like:</p>\n\n<pre><code>interface EmployeeDAO {\n\n    List&lt;Employee&gt; findAll();\n    List&lt;Employee&gt; findById();\n    List&lt;Employee&gt; findByName();\n    boolean insertEmployee(Employee employee);\n    boolean updateEmployee(Employee employee);\n    boolean deleteEmployee(Employee employee);\n\n}\n</code></pre>\n\n<p>Next we have to provide a concrete implementation for that interface to deal with SQL server, and another to deal with flat files, etc.</p>\n"},{"tags":[],"owner":{"account_id":2418179,"reputation":756,"user_id":2111798,"display_name":"umanganiello"},"comment_count":0,"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1380789412,"creation_date":1380789412,"answer_id":19154508,"question_id":19154202,"body_markdown":"DAO (Data Access Object) is a very used design pattern in enterprise applications. It basically is the module that is used to access data from every source (DBMS, XML and so on). I suggest you to read some examples, like this one:\r\n\r\n[DAO Example][1]\r\n\r\n\r\nPlease note that there are different ways to implements the original [DAO Pattern][2], and there are many frameworks that can simplify your work. For example, the ORM (Object Relational Mapping) frameworks like iBatis or Hibernate, are used to map the result of SQL queries to java objects.\r\n\r\n\r\n  [1]: http://www.informit.com/guides/content.aspx?g=java&amp;seqNum=137\r\n  [2]: http://en.wikipedia.org/wiki/Data_access_object\r\n\r\nHope it helps,\r\nBye!\r\n","title":"Data access object (DAO) in Java","body":"<p>DAO (Data Access Object) is a very used design pattern in enterprise applications. It basically is the module that is used to access data from every source (DBMS, XML and so on). I suggest you to read some examples, like this one:</p>\n\n<p><a href=\"http://www.informit.com/guides/content.aspx?g=java&amp;seqNum=137\" rel=\"noreferrer\">DAO Example</a></p>\n\n<p>Please note that there are different ways to implements the original <a href=\"http://en.wikipedia.org/wiki/Data_access_object\" rel=\"noreferrer\">DAO Pattern</a>, and there are many frameworks that can simplify your work. For example, the ORM (Object Relational Mapping) frameworks like iBatis or Hibernate, are used to map the result of SQL queries to java objects.</p>\n\n<p>Hope it helps,\nBye!</p>\n"},{"tags":[],"owner":{"account_id":4614882,"reputation":91,"user_id":3741745,"display_name":"babu"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1514713743,"creation_date":1402813320,"answer_id":24227092,"question_id":19154202,"body_markdown":"Data Access Object Pattern or DAO pattern is used to separate low level data accessing API or operations from high level business services. Following are the participants in Data Access Object Pattern.\r\n\r\nData Access Object Interface - This interface defines the standard operations to be performed on a model object(s).\r\n\r\nData Access Object concrete class -This class implements above interface. This class is responsible to get data from a datasource which can be database / xml or any other storage mechanism.\r\n\r\nModel Object or Value Object - This object is simple POJO containing get/set methods to store data retrieved using DAO class.\r\n\r\nSample code [here][1]..\r\n\r\n\r\n  [1]: https://dzone.com/articles/building-simple-data-access-layer-using-jdbc","title":"Data access object (DAO) in Java","body":"<p>Data Access Object Pattern or DAO pattern is used to separate low level data accessing API or operations from high level business services. Following are the participants in Data Access Object Pattern.</p>\n\n<p>Data Access Object Interface - This interface defines the standard operations to be performed on a model object(s).</p>\n\n<p>Data Access Object concrete class -This class implements above interface. This class is responsible to get data from a datasource which can be database / xml or any other storage mechanism.</p>\n\n<p>Model Object or Value Object - This object is simple POJO containing get/set methods to store data retrieved using DAO class.</p>\n\n<p>Sample code <a href=\"https://dzone.com/articles/building-simple-data-access-layer-using-jdbc\" rel=\"noreferrer\">here</a>..</p>\n"},{"tags":[],"owner":{"account_id":4394923,"reputation":550,"user_id":3582295,"display_name":"Rohit Goyal"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1403074446,"creation_date":1403074446,"answer_id":24278861,"question_id":19154202,"body_markdown":"The Data Access Object manages the connection with the data source to obtain and store data.It abstracts the underlying data access implementation for the Business Object to enable transparent access to the data source. \r\nA data source could be any database such as an RDBMS, XML repository or flat file system etc.","title":"Data access object (DAO) in Java","body":"<p>The Data Access Object manages the connection with the data source to obtain and store data.It abstracts the underlying data access implementation for the Business Object to enable transparent access to the data source. \nA data source could be any database such as an RDBMS, XML repository or flat file system etc.</p>\n"},{"tags":[],"owner":{"account_id":2113203,"reputation":9798,"user_id":1878022,"accept_rate":96,"display_name":"VedantK"},"comment_count":0,"down_vote_count":0,"up_vote_count":110,"is_accepted":false,"score":110,"last_activity_date":1632477365,"creation_date":1438330852,"answer_id":31741434,"question_id":19154202,"body_markdown":"&gt; **What is DATA ACCESS OBJECT (DAO)** - \r\n\r\n *It is a **object/interface**, which is used to **access data** from database of data storage.* &lt;br&gt;\r\n\r\n\r\n&gt; **WHY WE USE DAO:** \r\n\r\nTo abstract the retrieval of data from a data resource such as a database.         \r\nThe concept is to **&quot;separate a data resource&#39;s client interface from its data access mechanism.&quot;**    \r\n&amp;nbsp;\r\n\r\nThe problem with accessing data directly is that the source of the data can change. Consider, for example, that your application is deployed in an environment that accesses an Oracle database. Then it is subsequently deployed to an environment that uses Microsoft SQL Server. If your application uses stored procedures and database-specific code (such as generating a number sequence), how do you handle that in your application? You have two options:\r\n\r\n - Rewrite your application to use SQL Server instead of Oracle (or add conditional code to handle the differences), or\r\n - Create a layer in-between your application logic and data access layers\r\n\r\n&lt;br&gt;\r\n\r\nThe **DAO Pattern** consists of the following:\r\n\r\n&gt;  - **Data Access Object Interface** - This interface *defines the standard operations* to be performed on a model object(s).\r\n&gt;  - **Data Access Object concrete class** -This class implements above interface. This class is *responsible to get data from a datasource*\r\n&gt; which can be database / xml or any other storage mechanism.\r\n&gt;  - **Model Object or Value Object** - This object is *simple POJO containing get/set methods* to store data retrieved using DAO class.\r\n&gt; \r\n&gt; \r\n\r\n[See examples][1]&lt;br&gt;\r\n\r\nI hope this has cleared up your understanding of DAO!  \r\n\r\n\r\n  [1]: http://www.tutorialspoint.com/design_pattern/data_access_object_pattern.htm\r\n\r\n\r\n\r\n","title":"Data access object (DAO) in Java","body":"<blockquote>\n<p><strong>What is DATA ACCESS OBJECT (DAO)</strong> -</p>\n</blockquote>\n<p><em>It is a <strong>object/interface</strong>, which is used to <strong>access data</strong> from database of data storage.</em> <br></p>\n<blockquote>\n<p><strong>WHY WE USE DAO:</strong></p>\n</blockquote>\n<p>To abstract the retrieval of data from a data resource such as a database.<br />\nThe concept is to <strong>&quot;separate a data resource's client interface from its data access mechanism.&quot;</strong><br />\n </p>\n<p>The problem with accessing data directly is that the source of the data can change. Consider, for example, that your application is deployed in an environment that accesses an Oracle database. Then it is subsequently deployed to an environment that uses Microsoft SQL Server. If your application uses stored procedures and database-specific code (such as generating a number sequence), how do you handle that in your application? You have two options:</p>\n<ul>\n<li>Rewrite your application to use SQL Server instead of Oracle (or add conditional code to handle the differences), or</li>\n<li>Create a layer in-between your application logic and data access layers</li>\n</ul>\n<br>\n<p>The <strong>DAO Pattern</strong> consists of the following:</p>\n<blockquote>\n<ul>\n<li><strong>Data Access Object Interface</strong> - This interface <em>defines the standard operations</em> to be performed on a model object(s).</li>\n<li><strong>Data Access Object concrete class</strong> -This class implements above interface. This class is <em>responsible to get data from a datasource</em>\nwhich can be database / xml or any other storage mechanism.</li>\n<li><strong>Model Object or Value Object</strong> - This object is <em>simple POJO containing get/set methods</em> to store data retrieved using DAO class.</li>\n</ul>\n</blockquote>\n<p><a href=\"http://www.tutorialspoint.com/design_pattern/data_access_object_pattern.htm\" rel=\"noreferrer\">See examples</a><br></p>\n<p>I hope this has cleared up your understanding of DAO!</p>\n"},{"tags":[],"owner":{"account_id":4066076,"reputation":2498,"user_id":3340968,"accept_rate":43,"display_name":"Yasir Shabbir Choudhary"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461740223,"creation_date":1461740223,"answer_id":36882531,"question_id":19154202,"body_markdown":"DAO is an act like  as &quot;Persistence Manager &quot; in 3 tier architecture as well as DAO also design pattern as you can consult &quot;Gang of Four&quot; book.\r\nYour application service layer just need to call the method of DAO class without knowing hidden &amp; internal details of DAO&#39;s method.","title":"Data access object (DAO) in Java","body":"<p>DAO is an act like  as \"Persistence Manager \" in 3 tier architecture as well as DAO also design pattern as you can consult \"Gang of Four\" book.\nYour application service layer just need to call the method of DAO class without knowing hidden &amp; internal details of DAO's method.</p>\n"},{"tags":[],"owner":{"account_id":8809294,"reputation":51,"user_id":6582815,"display_name":"Amrit Baghel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1468390910,"creation_date":1468390910,"answer_id":38344001,"question_id":19154202,"body_markdown":"Pojo also consider as Model class in Java where we can create getter and setter for particular variable defined in private .\r\nRemember all variables are here declared with private modifier ","title":"Data access object (DAO) in Java","body":"<p>Pojo also consider as Model class in Java where we can create getter and setter for particular variable defined in private .\nRemember all variables are here declared with private modifier </p>\n"},{"tags":[],"owner":{"account_id":8809294,"reputation":51,"user_id":6582815,"display_name":"Amrit Baghel"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1468391736,"creation_date":1468391736,"answer_id":38344229,"question_id":19154202,"body_markdown":"Dao clases are used to reuse the jdbc logic &amp; Dao(Data Access Object) is a design pattern.\r\ndao is a simple java class which contains JDBC logic .\r\n\r\nData Access Layer has proven good in separate business logic layer and persistent layer. The DAO design pattern completely hides the data access implementation from its clients\r\n\r\n\r\nThe Java Data Access Object (Java DAO) is an important component in business applications. Business applications almost always need access to data from relational or object databases and the Java platform offers many techniques for accessingthis data. The oldest and most mature technique is to use the Java Database Connectivity (JDBC)API, which provides the capability to execute SQL queries against a databaseand then fetch the results, one column at a time. \r\n\r\n\r\n","title":"Data access object (DAO) in Java","body":"<p>Dao clases are used to reuse the jdbc logic &amp; Dao(Data Access Object) is a design pattern.\ndao is a simple java class which contains JDBC logic .</p>\n\n<p>Data Access Layer has proven good in separate business logic layer and persistent layer. The DAO design pattern completely hides the data access implementation from its clients</p>\n\n<p>The Java Data Access Object (Java DAO) is an important component in business applications. Business applications almost always need access to data from relational or object databases and the Java platform offers many techniques for accessingthis data. The oldest and most mature technique is to use the Java Database Connectivity (JDBC)API, which provides the capability to execute SQL queries against a databaseand then fetch the results, one column at a time. </p>\n"},{"tags":[],"owner":{"account_id":5408151,"reputation":1823,"user_id":4305935,"accept_rate":56,"display_name":"ArunValaven"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1591044818,"creation_date":1469641210,"answer_id":38619781,"question_id":19154202,"body_markdown":"Don&#39;t get confused with too many explanations. DAO: From the name itself it means Accessing Data using Object. DAO is separated from other Business Logic.","title":"Data access object (DAO) in Java","body":"<p>Don't get confused with too many explanations. DAO: From the name itself it means Accessing Data using Object. DAO is separated from other Business Logic.</p>\n"},{"tags":[],"owner":{"account_id":5640424,"reputation":1415,"user_id":4464457,"display_name":"Orhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1592464724,"creation_date":1527251403,"answer_id":50529284,"question_id":19154202,"body_markdown":"I am going to be general and not specific to Java as DAO and ORM are used in all languages. \r\n\r\nTo understand DAO you first need to understand ORM (Object Relational Mapping). This means that if you have a table called &quot;person&quot; with columns &quot;name&quot; and &quot;age&quot;, then you would create object-template for that table:\r\n\r\n    type Person {\r\n    name\r\n    age\r\n    }\r\n\r\nNow with help of DAO instead of writing some specific queries, to fetch all persons, for what ever type of db you are using (which can be error-prone) instead you do:\r\n\r\n    list persons = DAO.getPersons();\r\n    ...\r\n    person = DAO.getPersonWithName(&quot;John&quot;);\r\n    age = person.age;\r\n\r\nYou do not write the DAO abstraction yourself, instead it is usually part of some opensource project, depending on what language and framework you are using.\r\n\r\nNow to the main question here. &quot;**..where it is used..**&quot;. Well usually if you are writing complex business and domain specific code your life will be very difficult without DAO. Of course you do not need to use ORM and DAO provided, instead you can write your own abstraction and native queries. I have done that in the past and almost always regretted it later.","title":"Data access object (DAO) in Java","body":"<p>I am going to be general and not specific to Java as DAO and ORM are used in all languages. </p>\n\n<p>To understand DAO you first need to understand ORM (Object Relational Mapping). This means that if you have a table called \"person\" with columns \"name\" and \"age\", then you would create object-template for that table:</p>\n\n<pre><code>type Person {\nname\nage\n}\n</code></pre>\n\n<p>Now with help of DAO instead of writing some specific queries, to fetch all persons, for what ever type of db you are using (which can be error-prone) instead you do:</p>\n\n<pre><code>list persons = DAO.getPersons();\n...\nperson = DAO.getPersonWithName(\"John\");\nage = person.age;\n</code></pre>\n\n<p>You do not write the DAO abstraction yourself, instead it is usually part of some opensource project, depending on what language and framework you are using.</p>\n\n<p>Now to the main question here. \"<strong>..where it is used..</strong>\". Well usually if you are writing complex business and domain specific code your life will be very difficult without DAO. Of course you do not need to use ORM and DAO provided, instead you can write your own abstraction and native queries. I have done that in the past and almost always regretted it later.</p>\n"},{"comments":[{"owner":{"account_id":2195330,"reputation":451,"user_id":1941180,"display_name":"BuzZin&#39;"},"score":0,"creation_date":1589818379,"post_id":54673141,"comment_id":109437982,"body_markdown":"This seems to be explaining the Repository pattern and not the DAO pattern as per the original authors request. Additionally I believe that your example can be misleading as your interface should follow a Collection like approach, so some of your operations aren&#39;t suited.","body":"This seems to be explaining the Repository pattern and not the DAO pattern as per the original authors request. Additionally I believe that your example can be misleading as your interface should follow a Collection like approach, so some of your operations aren&#39;t suited."}],"tags":[],"owner":{"account_id":9366242,"reputation":2001,"user_id":6951063,"display_name":"Andriy"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1550069890,"creation_date":1550069890,"answer_id":54673141,"question_id":19154202,"body_markdown":"Spring JPA DAO\r\n-----------------------------------------------------------\r\nFor example we have some entity Group.\r\n\r\nFor this entity we create the repository GroupRepository.\r\n\r\n    public interface GroupRepository extends JpaRepository&lt;Group, Long&gt; {   \r\n    }\r\n\r\nThen we need to create a service layer with which we will use this repository.\r\n\r\n    public interface Service&lt;T, ID&gt; {\r\n    \r\n        T save(T entity);\r\n    \r\n        void deleteById(ID id);\r\n    \r\n        List&lt;T&gt; findAll();\r\n    \r\n        T getOne(ID id);\r\n    \r\n        T editEntity(T entity);\r\n    \r\n        Optional&lt;T&gt; findById(ID id);\r\n    }\r\n\r\n    public abstract class AbstractService&lt;T, ID, R extends JpaRepository&lt;T, ID&gt;&gt; implements Service&lt;T, ID&gt; {\r\n    \r\n        private final R repository;\r\n    \r\n        protected AbstractService(R repository) {\r\n            this.repository = repository;\r\n        }\r\n    \r\n        @Override\r\n        public T save(T entity) {\r\n            return repository.save(entity);\r\n        }\r\n    \r\n        @Override\r\n        public void deleteById(ID id) {\r\n            repository.deleteById(id);\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;T&gt; findAll() {\r\n            return repository.findAll();\r\n        }\r\n    \r\n        @Override\r\n        public T getOne(ID id) {\r\n            return repository.getOne(id);\r\n        }\r\n    \r\n        @Override\r\n        public Optional&lt;T&gt; findById(ID id) {\r\n            return repository.findById(id);\r\n        }\r\n    \r\n        @Override\r\n        public T editEntity(T entity) {\r\n            return repository.saveAndFlush(entity);\r\n        }\r\n    }\r\n\r\n    @org.springframework.stereotype.Service\r\n    public class GroupServiceImpl extends AbstractService&lt;Group, Long, GroupRepository&gt; {\r\n    \r\n        private final GroupRepository groupRepository;\r\n    \r\n        @Autowired\r\n        protected GroupServiceImpl(GroupRepository repository) {\r\n            super(repository);\r\n            this.groupRepository = repository;\r\n        }\r\n    }\r\n\r\nAnd in the controller we use this service.\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    class GroupController {\r\n    \r\n        private final Logger log = LoggerFactory.getLogger(GroupController.class);\r\n    \r\n        private final GroupServiceImpl groupService;\r\n    \r\n        @Autowired\r\n        public GroupController(GroupServiceImpl groupService) {\r\n            this.groupService = groupService;\r\n        }\r\n    \r\n        @GetMapping(&quot;/groups&quot;)\r\n        Collection&lt;Group&gt; groups() {\r\n            return groupService.findAll();\r\n        }\r\n    \r\n        @GetMapping(&quot;/group/{id}&quot;)\r\n        ResponseEntity&lt;?&gt; getGroup(@PathVariable Long id) {\r\n            Optional&lt;Group&gt; group = groupService.findById(id);\r\n            return group.map(response -&gt; ResponseEntity.ok().body(response))\r\n                    .orElse(new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND));\r\n        }\r\n    \r\n        @PostMapping(&quot;/group&quot;)\r\n        ResponseEntity&lt;Group&gt; createGroup(@Valid @RequestBody Group group) throws URISyntaxException {\r\n            log.info(&quot;Request to create group: {}&quot;, group);\r\n            Group result = groupService.save(group);\r\n            return ResponseEntity.created(new URI(&quot;/api/group/&quot; + result.getId()))\r\n                    .body(result);\r\n        }\r\n    \r\n        @PutMapping(&quot;/group&quot;)\r\n        ResponseEntity&lt;Group&gt; updateGroup(@Valid @RequestBody Group group) {\r\n            log.info(&quot;Request to update group: {}&quot;, group);\r\n            Group result = groupService.save(group);\r\n            return ResponseEntity.ok().body(result);\r\n        }\r\n    \r\n        @DeleteMapping(&quot;/group/{id}&quot;)\r\n        public ResponseEntity&lt;?&gt; deleteGroup(@PathVariable Long id) {\r\n            log.info(&quot;Request to delete group: {}&quot;, id);\r\n            groupService.deleteById(id);\r\n            return ResponseEntity.ok().build();\r\n        }    \r\n    }\r\n\r\n ","title":"Data access object (DAO) in Java","body":"<h2>Spring JPA DAO</h2>\n\n<p>For example we have some entity Group.</p>\n\n<p>For this entity we create the repository GroupRepository.</p>\n\n<pre><code>public interface GroupRepository extends JpaRepository&lt;Group, Long&gt; {   \n}\n</code></pre>\n\n<p>Then we need to create a service layer with which we will use this repository.</p>\n\n<pre><code>public interface Service&lt;T, ID&gt; {\n\n    T save(T entity);\n\n    void deleteById(ID id);\n\n    List&lt;T&gt; findAll();\n\n    T getOne(ID id);\n\n    T editEntity(T entity);\n\n    Optional&lt;T&gt; findById(ID id);\n}\n\npublic abstract class AbstractService&lt;T, ID, R extends JpaRepository&lt;T, ID&gt;&gt; implements Service&lt;T, ID&gt; {\n\n    private final R repository;\n\n    protected AbstractService(R repository) {\n        this.repository = repository;\n    }\n\n    @Override\n    public T save(T entity) {\n        return repository.save(entity);\n    }\n\n    @Override\n    public void deleteById(ID id) {\n        repository.deleteById(id);\n    }\n\n    @Override\n    public List&lt;T&gt; findAll() {\n        return repository.findAll();\n    }\n\n    @Override\n    public T getOne(ID id) {\n        return repository.getOne(id);\n    }\n\n    @Override\n    public Optional&lt;T&gt; findById(ID id) {\n        return repository.findById(id);\n    }\n\n    @Override\n    public T editEntity(T entity) {\n        return repository.saveAndFlush(entity);\n    }\n}\n\n@org.springframework.stereotype.Service\npublic class GroupServiceImpl extends AbstractService&lt;Group, Long, GroupRepository&gt; {\n\n    private final GroupRepository groupRepository;\n\n    @Autowired\n    protected GroupServiceImpl(GroupRepository repository) {\n        super(repository);\n        this.groupRepository = repository;\n    }\n}\n</code></pre>\n\n<p>And in the controller we use this service.</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api\")\nclass GroupController {\n\n    private final Logger log = LoggerFactory.getLogger(GroupController.class);\n\n    private final GroupServiceImpl groupService;\n\n    @Autowired\n    public GroupController(GroupServiceImpl groupService) {\n        this.groupService = groupService;\n    }\n\n    @GetMapping(\"/groups\")\n    Collection&lt;Group&gt; groups() {\n        return groupService.findAll();\n    }\n\n    @GetMapping(\"/group/{id}\")\n    ResponseEntity&lt;?&gt; getGroup(@PathVariable Long id) {\n        Optional&lt;Group&gt; group = groupService.findById(id);\n        return group.map(response -&gt; ResponseEntity.ok().body(response))\n                .orElse(new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND));\n    }\n\n    @PostMapping(\"/group\")\n    ResponseEntity&lt;Group&gt; createGroup(@Valid @RequestBody Group group) throws URISyntaxException {\n        log.info(\"Request to create group: {}\", group);\n        Group result = groupService.save(group);\n        return ResponseEntity.created(new URI(\"/api/group/\" + result.getId()))\n                .body(result);\n    }\n\n    @PutMapping(\"/group\")\n    ResponseEntity&lt;Group&gt; updateGroup(@Valid @RequestBody Group group) {\n        log.info(\"Request to update group: {}\", group);\n        Group result = groupService.save(group);\n        return ResponseEntity.ok().body(result);\n    }\n\n    @DeleteMapping(\"/group/{id}\")\n    public ResponseEntity&lt;?&gt; deleteGroup(@PathVariable Long id) {\n        log.info(\"Request to delete group: {}\", id);\n        groupService.deleteById(id);\n        return ResponseEntity.ok().build();\n    }    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9686627,"reputation":6334,"user_id":7200133,"display_name":"Gk Mohammad Emon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600492789,"creation_date":1600492789,"answer_id":63965487,"question_id":19154202,"body_markdown":"I just want to explain it in my own way with a small story that I experienced in one of my projects. First I want to explain **Why DAO is important?** rather than go to **What is DAO?** for better understanding. \r\n\r\n**Why DAO is important?**   \r\nIn my one project of my project, I used `Client.class` which contains all the basic information of our system users. Where I need client then every time I need to do an ugly query where it is needed. Then I felt that decreases the **readability** and made a lot of redundant **boilerplate code**. \r\n\r\nThen one of my senior developers introduced a `QueryUtils.class` where all queries are added using `public static` access modifier and then I don&#39;t need to do query everywhere. Suppose when I needed *activated clients* then I just call - \r\n\r\n    QueryUtils.findAllActivatedClients();\r\n\r\n In this way, I made some optimizations of my code.\r\n\r\n***But there was another problem !!!***\r\n\r\nI felt that the QueryUtils.class was growing very highly. 100+ methods were included in that class which was also very cumbersome to read and use. Because this class contains other queries of another domain models *( For example- products, categories locations, etc )*. \r\n\r\nThen the superhero **Mr. CTO** introduced a new solution named **DAO** which solved the problem finally. I felt DAO is very domain-specific. For example, he created a DAO called `ClientDAO.class` where all `Client.class` related queries are found which seems very easy for me to use and maintain. The giant `QueryUtils.class` was broken down into many other domain-specific DAO for example - `ProductsDAO.class`, `CategoriesDAO.class`, etc which made the code more **Readable**, more **Maintainable**, more **Decoupled**.\r\n\r\n**What is DAO?**\r\n\r\nIt is an object or interface, which made an easy way to access data from the database without writing **complex** and **ugly** queries every time in a reusable way. ","title":"Data access object (DAO) in Java","body":"<p>I just want to explain it in my own way with a small story that I experienced in one of my projects. First I want to explain <strong>Why DAO is important?</strong> rather than go to <strong>What is DAO?</strong> for better understanding.</p>\n<p><strong>Why DAO is important?</strong><br />\nIn my one project of my project, I used <code>Client.class</code> which contains all the basic information of our system users. Where I need client then every time I need to do an ugly query where it is needed. Then I felt that decreases the <strong>readability</strong> and made a lot of redundant <strong>boilerplate code</strong>.</p>\n<p>Then one of my senior developers introduced a <code>QueryUtils.class</code> where all queries are added using <code>public static</code> access modifier and then I don't need to do query everywhere. Suppose when I needed <em>activated clients</em> then I just call -</p>\n<pre><code>QueryUtils.findAllActivatedClients();\n</code></pre>\n<p>In this way, I made some optimizations of my code.</p>\n<p><em><strong>But there was another problem !!!</strong></em></p>\n<p>I felt that the QueryUtils.class was growing very highly. 100+ methods were included in that class which was also very cumbersome to read and use. Because this class contains other queries of another domain models <em>( For example- products, categories locations, etc )</em>.</p>\n<p>Then the superhero <strong>Mr. CTO</strong> introduced a new solution named <strong>DAO</strong> which solved the problem finally. I felt DAO is very domain-specific. For example, he created a DAO called <code>ClientDAO.class</code> where all <code>Client.class</code> related queries are found which seems very easy for me to use and maintain. The giant <code>QueryUtils.class</code> was broken down into many other domain-specific DAO for example - <code>ProductsDAO.class</code>, <code>CategoriesDAO.class</code>, etc which made the code more <strong>Readable</strong>, more <strong>Maintainable</strong>, more <strong>Decoupled</strong>.</p>\n<p><strong>What is DAO?</strong></p>\n<p>It is an object or interface, which made an easy way to access data from the database without writing <strong>complex</strong> and <strong>ugly</strong> queries every time in a reusable way.</p>\n"}],"owner":{"account_id":3306323,"reputation":4878,"user_id":2781031,"accept_rate":69,"display_name":"Vasanth Nag K V"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477457,"favorite_count":0,"down_vote_count":3,"up_vote_count":416,"accepted_answer_id":19154487,"answer_count":12,"score":413,"last_activity_date":1691590671,"creation_date":1380788437,"question_id":19154202,"body_markdown":"I was going through a document and I came across a term called `DAO`. I found out that it is a Data Access Object. Can someone please explain me what this actually is? \r\n\r\nI know that it is some kind of an interface for accessing data from different types of sources, and in the middle of this little research of mine I bumped into a concept called *data source* or *data source object*, which confused me even further. \r\n\r\nI really want to know what a `DAO` is programmatically in terms of where it is used. How it is used? Any links to pages that explain this concept from the very basic stuff is also appreciated.","title":"Data access object (DAO) in Java","body":"<p>I was going through a document and I came across a term called <code>DAO</code>. I found out that it is a Data Access Object. Can someone please explain me what this actually is?</p>\n<p>I know that it is some kind of an interface for accessing data from different types of sources, and in the middle of this little research of mine I bumped into a concept called <em>data source</em> or <em>data source object</em>, which confused me even further.</p>\n<p>I really want to know what a <code>DAO</code> is programmatically in terms of where it is used. How it is used? Any links to pages that explain this concept from the very basic stuff is also appreciated.</p>\n"},{"tags":["java","android","mobile"],"answers":[{"comments":[{"owner":{"account_id":23114739,"reputation":89,"user_id":17222180,"display_name":"tsukingo"},"score":1,"creation_date":1669391862,"post_id":74574973,"comment_id":131638143,"body_markdown":"yes . that was my fix too !","body":"yes . that was my fix too !"},{"owner":{"account_id":88195,"reputation":9902,"user_id":244104,"accept_rate":90,"display_name":"tronman"},"score":1,"creation_date":1683234230,"post_id":74574973,"comment_id":134339890,"body_markdown":"The option was File-&gt;Repair IDE for me (Android Studio Flamingo). Selecting the operation eventually terminated the existing process and reloaded the project, then the Logcat started working.","body":"The option was File-&gt;Repair IDE for me (Android Studio Flamingo). Selecting the operation eventually terminated the existing process and reloaded the project, then the Logcat started working."}],"tags":[],"owner":{"account_id":15408791,"reputation":41,"user_id":11116154,"display_name":"Alexa Guiar"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669390363,"creation_date":1669390363,"answer_id":74574973,"question_id":74087099,"body_markdown":"Had the same problem. Solved with menu File-&gt;Restart IDE.","title":"Why do i have &quot;No connected devices&quot; in Logcat window despite having a virtual device set up already?","body":"<p>Had the same problem. Solved with menu File-&gt;Restart IDE.</p>\n"},{"comments":[{"owner":{"account_id":4983705,"reputation":2582,"user_id":4007935,"accept_rate":33,"display_name":"Sid"},"score":0,"creation_date":1694678287,"post_id":76868619,"comment_id":135923412,"body_markdown":"This only worked. I am using Android Studio zipped extract. I updated it to latest version, did cache invalidate but only updating to latest SDK Platform-Tools fixed it. Thanks","body":"This only worked. I am using Android Studio zipped extract. I updated it to latest version, did cache invalidate but only updating to latest SDK Platform-Tools fixed it. Thanks"}],"tags":[],"owner":{"account_id":29192471,"reputation":11,"user_id":22364332,"display_name":"Shanazar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691590342,"creation_date":1691590342,"answer_id":76868619,"question_id":74087099,"body_markdown":"Had the same issue after updating Android Studio, installing the latest SDK Platform-Tools fixed it.","title":"Why do i have &quot;No connected devices&quot; in Logcat window despite having a virtual device set up already?","body":"<p>Had the same issue after updating Android Studio, installing the latest SDK Platform-Tools fixed it.</p>\n"}],"owner":{"account_id":23114739,"reputation":89,"user_id":17222180,"display_name":"tsukingo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1609,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1691590342,"creation_date":1665923193,"question_id":74087099,"body_markdown":"I&#39;m new to Mobile Dev and Android Studio .\r\nI&#39;m trying to disable a button when it gets clicked ...\r\nand i&#39;m trying to log some message to Logcat window using ```Log.d(&quot;success&quot;, &quot;button is disabled now&quot;);``` \r\nbut the Logcat show &quot;No connected devices&quot;\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NfIQK.png\r\n\r\nAny solutions ???","title":"Why do i have &quot;No connected devices&quot; in Logcat window despite having a virtual device set up already?","body":"<p>I'm new to Mobile Dev and Android Studio .\nI'm trying to disable a button when it gets clicked ...\nand i'm trying to log some message to Logcat window using <code>Log.d(&quot;success&quot;, &quot;button is disabled now&quot;);</code>\nbut the Logcat show &quot;No connected devices&quot;\n<a href=\"https://i.stack.imgur.com/NfIQK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NfIQK.png\" alt=\"enter image description here\" /></a></p>\n<p>Any solutions ???</p>\n"},{"tags":["java","xml","compilation","jaxb","compiler-optimization"],"answers":[{"tags":[],"owner":{"account_id":12480263,"reputation":10843,"user_id":9085273,"display_name":"rieckpil"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536503761,"creation_date":1536502367,"answer_id":52245351,"question_id":48393051,"body_markdown":"This document from IBM about the JAXB Context initialization might help you: [JAXBContext Initialization Takes A Long Time](https://www-01.ibm.com/support/docview.wss?uid=swg21641260)\r\n\r\n&gt; **Problem(Abstract)**\r\n\r\n&gt; JAXBContext initialization slows down application performance.\r\n\r\n&gt; **Symptom**\r\n\r\n&gt; Slow performance in WebSphere Application Server.\r\n\r\n\r\n&gt; **Cause**\r\n\r\n&gt; JAXB context (javax.xml.bind.JAXBContext) object instantiation is a resource intensive operation. JAXB Context instantiation involves the pre-load and pre-creation of contexts (called the pre-caching process) of all packages and classes associated with the context, and then all of the packages and classes which are statically (directly and indirectly) referenced from those. Performance latency will correlate with the number of classes which are passed during JAXB creation during this pre-caching process.","title":"Usage and performance of com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize","body":"<p>This document from IBM about the JAXB Context initialization might help you: <a href=\"https://www-01.ibm.com/support/docview.wss?uid=swg21641260\" rel=\"nofollow noreferrer\">JAXBContext Initialization Takes A Long Time</a></p>\n\n<blockquote>\n  <p><strong>Problem(Abstract)</strong></p>\n  \n  <p>JAXBContext initialization slows down application performance.</p>\n  \n  <p><strong>Symptom</strong></p>\n  \n  <p>Slow performance in WebSphere Application Server.</p>\n  \n  <p><strong>Cause</strong></p>\n  \n  <p>JAXB context (javax.xml.bind.JAXBContext) object instantiation is a resource intensive operation. JAXB Context instantiation involves the pre-load and pre-creation of contexts (called the pre-caching process) of all packages and classes associated with the context, and then all of the packages and classes which are statically (directly and indirectly) referenced from those. Performance latency will correlate with the number of classes which are passed during JAXB creation during this pre-caching process.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11451482,"reputation":41,"user_id":8393753,"display_name":"Kourosh Delfani"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691590198,"creation_date":1691590198,"answer_id":76868598,"question_id":48393051,"body_markdown":"In a project, we faced a problem with OutOfMemoryError: Metaspace on a daily and regular basis. By adding this setting, the problem was completely resolved and no problem was observed in the overall performance of the service.","title":"Usage and performance of com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize","body":"<p>In a project, we faced a problem with OutOfMemoryError: Metaspace on a daily and regular basis. By adding this setting, the problem was completely resolved and no problem was observed in the overall performance of the service.</p>\n"}],"owner":{"account_id":1825355,"reputation":1445,"user_id":2015965,"accept_rate":70,"display_name":"Ashish Thukral"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6967,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1691590198,"creation_date":1516672680,"question_id":48393051,"body_markdown":"We came across a JaxB class loading issue as highlighted by [Jaxb classCastException][1].\r\n \r\nTo fix that I added **com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize=true** and that actually FIXED the issue. \r\n\r\nHowever, I read that this will disable Jaxb&#39;s ability to directly interact with bytecode and go through Java Reflection API and so might have a slight performance hit while initilazation of new Jaxb Contexts via &quot;*JAXBContext.newInstance*&quot;.\r\n\r\nTo test the performance I added a simple method which invokes JAXBContext.newInstance in a for loop some 500 times. And I ran this with the flag=true and =false. \r\n\r\nIn the worst case, I saw a performance hit of only about 3.5 ms on an average per invocation.\r\n\r\nHas anyone had a similar issue and tried the above fix? What were your findings? I couldn&#39;t find much information on the **com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize**. Can you share more info on its behavior and impact?\r\n\r\n  [1]: https://stackoverflow.com/questions/42499436/classcastexception-cannot-be-cast-to-com-sun-xml-internal-bind-v2-runtime-refle","title":"Usage and performance of com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize","body":"<p>We came across a JaxB class loading issue as highlighted by <a href=\"https://stackoverflow.com/questions/42499436/classcastexception-cannot-be-cast-to-com-sun-xml-internal-bind-v2-runtime-refle\">Jaxb classCastException</a>.</p>\n\n<p>To fix that I added <strong>com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize=true</strong> and that actually FIXED the issue. </p>\n\n<p>However, I read that this will disable Jaxb's ability to directly interact with bytecode and go through Java Reflection API and so might have a slight performance hit while initilazation of new Jaxb Contexts via \"<em>JAXBContext.newInstance</em>\".</p>\n\n<p>To test the performance I added a simple method which invokes JAXBContext.newInstance in a for loop some 500 times. And I ran this with the flag=true and =false. </p>\n\n<p>In the worst case, I saw a performance hit of only about 3.5 ms on an average per invocation.</p>\n\n<p>Has anyone had a similar issue and tried the above fix? What were your findings? I couldn't find much information on the <strong>com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize</strong>. Can you share more info on its behavior and impact?</p>\n"},{"tags":["java","sdn","onos"],"owner":{"account_id":29182543,"reputation":1,"user_id":22356365,"display_name":"Onur Kaya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691589959,"creation_date":1691480136,"question_id":76857362,"body_markdown":"I used the following command and created a default Onos application = `mvn archetype:generate -DarchetypeGroupId=org.onosproject -DarchetypeArtifactId=onos-bundle-archetype -DarchetypeVersion=2.4.0 -DgroupId=com.example -DartifactId=onos-app -Dversion=1.0.0-SNAPSHOT`\r\n\r\nThis is pom.xml:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;!--\r\n  ~ Copyright 2022 Open Networking Foundation\r\n  ~\r\n  ~ Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n  ~ you may not use this file except in compliance with the License.\r\n  ~ You may obtain a copy of the License at\r\n  ~\r\n  ~     http://www.apache.org/licenses/LICENSE-2.0\r\n  ~\r\n  ~ Unless required by applicable law or agreed to in writing, software\r\n  ~ distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  ~ See the License for the specific language governing permissions and\r\n  ~ limitations under the License.\r\n  --&gt;\r\n\r\n    4\\.0.0\r\n    \r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n        &lt;artifactId&gt;onos-dependencies&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.0&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    \r\n    &lt;groupId&gt;org.foo&lt;/groupId&gt;\r\n    &lt;artifactId&gt;foo-app&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;bundle&lt;/packaging&gt;\r\n    \r\n    &lt;description&gt;ONOS OSGi bundle archetype&lt;/description&gt;\r\n    &lt;url&gt;http://onosproject.org&lt;/url&gt;\r\n    \r\n    &lt;properties&gt;\r\n        &lt;onos.app.name&gt;org.foo.app&lt;/onos.app.name&gt;\r\n        &lt;onos.app.title&gt;Foo App&lt;/onos.app.title&gt;\r\n        &lt;onos.app.origin&gt;Foo, Inc.&lt;/onos.app.origin&gt;\r\n        &lt;onos.app.category&gt;default&lt;/onos.app.category&gt;\r\n        &lt;onos.app.url&gt;http://onosproject.org&lt;/onos.app.url&gt;\r\n        &lt;onos.app.readme&gt;ONOS OSGi bundle archetype.&lt;/onos.app.readme&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;onos-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;onlab-osgi&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;onlab-misc&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;onos-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;classifier&gt;tests&lt;/classifier&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n    \r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n                &lt;artifactId&gt;onos-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n             &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;skip&gt;true&lt;/skip&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;17&lt;/source&gt;\r\n                    &lt;target&gt;17&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nThe AppComponent.java =\r\n\r\n```java\r\npackage org.foo.app;\r\n\r\nimport org.onosproject.cfg.ComponentConfigService;\r\nimport org.osgi.service.component.ComponentContext;\r\nimport org.osgi.service.component.annotations.Activate;\r\nimport org.osgi.service.component.annotations.Component;\r\nimport org.osgi.service.component.annotations.Deactivate;\r\nimport org.osgi.service.component.annotations.Modified;\r\nimport org.osgi.service.component.annotations.Reference;\r\nimport org.osgi.service.component.annotations.ReferenceCardinality;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport java.util.Dictionary;\r\nimport java.util.Properties;\r\n\r\nimport static org.onlab.util.Tools.get;\r\n\r\n/******\r\n* Skeletal ONOS application component.\r\n*/\r\n@Component(immediate = true,\r\nservice = {SomeInterface.class},\r\nproperty = {\r\n  &quot;someProperty=Some Default String Value&quot;,\r\n})\r\npublic class AppComponent implements SomeInterface {\r\n  private final Logger log = LoggerFactory.getLogger(getClass());\r\n\r\n  /** Some configurable property. */\r\n  private String someProperty;\r\n\r\n  @Reference(cardinality = ReferenceCardinality.MANDATORY)\r\n  protected ComponentConfigService cfgService;\r\n\r\n  @Activate\r\n  protected void activate() {\r\n  cfgService.registerProperties(getClass());\r\n  log.info(&quot;Started&quot;);\r\n  }\r\n\r\n  @Deactivate\r\n  protected void deactivate() {\r\n  cfgService.unregisterProperties(getClass(), false);\r\n  log.info(&quot;Stopped&quot;);\r\n  }\r\n\r\n  @Modified\r\n  public void modified(ComponentContext context) {\r\n  Dictionary\\&lt;?, ?\\&gt; properties = context != null ? context.getProperties() : new Properties();\r\n  if (context != null) {\r\n  someProperty = get(properties, &quot;someProperty&quot;);\r\n  }\r\n  log.info(&quot;Reconfigured&quot;);\r\n  }\r\n\r\n  @Override\r\n  public void someMethod() {\r\n  log.info(&quot;Invoked&quot;);\r\n  }\r\n}\r\n```\r\n\r\nThe error I get is like this =\r\n\r\n```none\r\nonur@staj2:~/Downloads/foo-app$ mvn compile \r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; org.foo:foo-app &gt;---------------------------\r\n[INFO] Building foo-app 1.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] -------------------------------[ bundle ]-------------------------------\r\n[INFO] \r\n[INFO] --- enforcer:3.0.0-M2:enforce (enforce-maven) @ foo-app ---\r\n[INFO] \r\n[INFO] --- enforcer:3.0.0-M2:enforce (enforce-java) @ foo-app ---\r\n[INFO] \r\n[INFO] --- onos:2.4.0:swagger (swagger) @ foo-app ---\r\n[INFO] \r\n[INFO] --- onos:2.4.0:cfg (cfg) @ foo-app ---\r\n[INFO] Generating ONOS component configuration catalogues...\r\n[INFO] Processing property someProperty|STRING|Some Default String Value|Some configurable property. ...\r\n[INFO] \r\n[INFO] --- resources:3.1.0:resources (default-resources) @ foo-app ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] skip non existing resourceDirectory /home/onur/Downloads/foo-app/src/main/resources\r\n[INFO] \r\n[INFO] --- compiler:3.8.1:compile (default-compile) @ foo-app ---\r\n[INFO] Changes detected - recompiling the module!\r\n[INFO] Compiling 3 source files to /home/onur/Downloads/foo-app/target/classes\r\nAn exception has occurred in the compiler (17.0.8). Please file a bug against the Java compiler via the Java bug reporting page (https://bugreport.java.com) after checking the Bug Database (https://bugs.java.com) for duplicates. Include your program, the following diagnostic, and the parameters passed to the Java compiler in your report. Thank you.\r\njava.lang.IllegalAccessError: class com.google.errorprone.ErrorProneJavacPlugin (in unnamed module @0x120350eb) cannot access class com.sun.tools.javac.api.BasicJavacTask (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.api to unnamed module @0x120350eb\r\n        at com.google.errorprone.ErrorProneJavacPlugin.init(ErrorProneJavacPlugin.java:38)\r\n        at jdk.compiler/com.sun.tools.javac.api.BasicJavacTask.initPlugin(BasicJavacTask.java:255)\r\n        at jdk.compiler/com.sun.tools.javac.api.BasicJavacTask.initPlugins(BasicJavacTask.java:229)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.prepareCompiler(JavacTaskImpl.java:204)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0(JavacTaskImpl.java:101)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.invocationHelper(JavacTaskImpl.java:152)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:100)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:94)\r\n        at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess(JavaxToolsCompiler.java:126)\r\n        at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile(JavacCompiler.java:174)\r\n        at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:1134)\r\n        at org.apache.maven.plugin.compiler.CompilerMojo.execute(CompilerMojo.java:187)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:126)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2(MojoExecutor.java:328)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:316)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:212)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:174)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000(MojoExecutor.java:75)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run(MojoExecutor.java:162)\r\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute(DefaultMojosExecutionStrategy.java:39)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:159)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:105)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:73)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:53)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:118)\r\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:261)\r\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:173)\r\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:101)\r\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:906)\r\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:283)\r\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:206)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:283)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:226)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:407)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:348)\r\n[INFO] -------------------------------------------------------------\r\n[ERROR] COMPILATION ERROR : \r\n[INFO] -------------------------------------------------------------\r\n[ERROR] An unknown compilation problem occurred\r\n[INFO] 1 error\r\n[INFO] -------------------------------------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  2.257 s\r\n[INFO] Finished at: 2023-08-08T10:00:22+03:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project foo-app: Compilation failure\r\n[ERROR] An unknown compilation problem occurred\r\n[ERROR] \r\n[ERROR] -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n```\r\n\r\nPlease help to solve the errors, I&#39;ve been dealing with this for a long time, I couldn&#39;t find where I made a mistake.","title":"Errors creating Onos project with maven archetype","body":"<p>I used the following command and created a default Onos application = <code>mvn archetype:generate -DarchetypeGroupId=org.onosproject -DarchetypeArtifactId=onos-bundle-archetype -DarchetypeVersion=2.4.0 -DgroupId=com.example -DartifactId=onos-app -Dversion=1.0.0-SNAPSHOT</code></p>\n<p>This is pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;!--\n  ~ Copyright 2022 Open Networking Foundation\n  ~\n  ~ Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n  ~ you may not use this file except in compliance with the License.\n  ~ You may obtain a copy of the License at\n  ~\n  ~     http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~ Unless required by applicable law or agreed to in writing, software\n  ~ distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~ See the License for the specific language governing permissions and\n  ~ limitations under the License.\n  --&gt;\n\n    4\\.0.0\n    \n    &lt;parent&gt;\n        &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n        &lt;artifactId&gt;onos-dependencies&lt;/artifactId&gt;\n        &lt;version&gt;2.7.0&lt;/version&gt;\n    &lt;/parent&gt;\n    \n    &lt;groupId&gt;org.foo&lt;/groupId&gt;\n    &lt;artifactId&gt;foo-app&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;bundle&lt;/packaging&gt;\n    \n    &lt;description&gt;ONOS OSGi bundle archetype&lt;/description&gt;\n    &lt;url&gt;http://onosproject.org&lt;/url&gt;\n    \n    &lt;properties&gt;\n        &lt;onos.app.name&gt;org.foo.app&lt;/onos.app.name&gt;\n        &lt;onos.app.title&gt;Foo App&lt;/onos.app.title&gt;\n        &lt;onos.app.origin&gt;Foo, Inc.&lt;/onos.app.origin&gt;\n        &lt;onos.app.category&gt;default&lt;/onos.app.category&gt;\n        &lt;onos.app.url&gt;http://onosproject.org&lt;/onos.app.url&gt;\n        &lt;onos.app.readme&gt;ONOS OSGi bundle archetype.&lt;/onos.app.readme&gt;\n    &lt;/properties&gt;\n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n            &lt;artifactId&gt;onos-api&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n            &lt;artifactId&gt;onlab-osgi&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n            &lt;artifactId&gt;onlab-misc&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n            &lt;artifactId&gt;onos-api&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;classifier&gt;tests&lt;/classifier&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n    \n            &lt;plugin&gt;\n                &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n                &lt;artifactId&gt;onos-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n             &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;skip&gt;true&lt;/skip&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>The AppComponent.java =</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.foo.app;\n\nimport org.onosproject.cfg.ComponentConfigService;\nimport org.osgi.service.component.ComponentContext;\nimport org.osgi.service.component.annotations.Activate;\nimport org.osgi.service.component.annotations.Component;\nimport org.osgi.service.component.annotations.Deactivate;\nimport org.osgi.service.component.annotations.Modified;\nimport org.osgi.service.component.annotations.Reference;\nimport org.osgi.service.component.annotations.ReferenceCardinality;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.util.Dictionary;\nimport java.util.Properties;\n\nimport static org.onlab.util.Tools.get;\n\n/******\n* Skeletal ONOS application component.\n*/\n@Component(immediate = true,\nservice = {SomeInterface.class},\nproperty = {\n  &quot;someProperty=Some Default String Value&quot;,\n})\npublic class AppComponent implements SomeInterface {\n  private final Logger log = LoggerFactory.getLogger(getClass());\n\n  /** Some configurable property. */\n  private String someProperty;\n\n  @Reference(cardinality = ReferenceCardinality.MANDATORY)\n  protected ComponentConfigService cfgService;\n\n  @Activate\n  protected void activate() {\n  cfgService.registerProperties(getClass());\n  log.info(&quot;Started&quot;);\n  }\n\n  @Deactivate\n  protected void deactivate() {\n  cfgService.unregisterProperties(getClass(), false);\n  log.info(&quot;Stopped&quot;);\n  }\n\n  @Modified\n  public void modified(ComponentContext context) {\n  Dictionary\\&lt;?, ?\\&gt; properties = context != null ? context.getProperties() : new Properties();\n  if (context != null) {\n  someProperty = get(properties, &quot;someProperty&quot;);\n  }\n  log.info(&quot;Reconfigured&quot;);\n  }\n\n  @Override\n  public void someMethod() {\n  log.info(&quot;Invoked&quot;);\n  }\n}\n</code></pre>\n<p>The error I get is like this =</p>\n<pre class=\"lang-none prettyprint-override\"><code>onur@staj2:~/Downloads/foo-app$ mvn compile \n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; org.foo:foo-app &gt;---------------------------\n[INFO] Building foo-app 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] -------------------------------[ bundle ]-------------------------------\n[INFO] \n[INFO] --- enforcer:3.0.0-M2:enforce (enforce-maven) @ foo-app ---\n[INFO] \n[INFO] --- enforcer:3.0.0-M2:enforce (enforce-java) @ foo-app ---\n[INFO] \n[INFO] --- onos:2.4.0:swagger (swagger) @ foo-app ---\n[INFO] \n[INFO] --- onos:2.4.0:cfg (cfg) @ foo-app ---\n[INFO] Generating ONOS component configuration catalogues...\n[INFO] Processing property someProperty|STRING|Some Default String Value|Some configurable property. ...\n[INFO] \n[INFO] --- resources:3.1.0:resources (default-resources) @ foo-app ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory /home/onur/Downloads/foo-app/src/main/resources\n[INFO] \n[INFO] --- compiler:3.8.1:compile (default-compile) @ foo-app ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 3 source files to /home/onur/Downloads/foo-app/target/classes\nAn exception has occurred in the compiler (17.0.8). Please file a bug against the Java compiler via the Java bug reporting page (https://bugreport.java.com) after checking the Bug Database (https://bugs.java.com) for duplicates. Include your program, the following diagnostic, and the parameters passed to the Java compiler in your report. Thank you.\njava.lang.IllegalAccessError: class com.google.errorprone.ErrorProneJavacPlugin (in unnamed module @0x120350eb) cannot access class com.sun.tools.javac.api.BasicJavacTask (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.api to unnamed module @0x120350eb\n        at com.google.errorprone.ErrorProneJavacPlugin.init(ErrorProneJavacPlugin.java:38)\n        at jdk.compiler/com.sun.tools.javac.api.BasicJavacTask.initPlugin(BasicJavacTask.java:255)\n        at jdk.compiler/com.sun.tools.javac.api.BasicJavacTask.initPlugins(BasicJavacTask.java:229)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.prepareCompiler(JavacTaskImpl.java:204)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0(JavacTaskImpl.java:101)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.invocationHelper(JavacTaskImpl.java:152)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:100)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:94)\n        at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess(JavaxToolsCompiler.java:126)\n        at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile(JavacCompiler.java:174)\n        at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:1134)\n        at org.apache.maven.plugin.compiler.CompilerMojo.execute(CompilerMojo.java:187)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:126)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2(MojoExecutor.java:328)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:316)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:212)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:174)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000(MojoExecutor.java:75)\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run(MojoExecutor.java:162)\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute(DefaultMojosExecutionStrategy.java:39)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:159)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:105)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:73)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:53)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:118)\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:261)\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:173)\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:101)\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:906)\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:283)\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:206)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:283)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:226)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:407)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:348)\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] An unknown compilation problem occurred\n[INFO] 1 error\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  2.257 s\n[INFO] Finished at: 2023-08-08T10:00:22+03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project foo-app: Compilation failure\n[ERROR] An unknown compilation problem occurred\n[ERROR] \n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n<p>Please help to solve the errors, I've been dealing with this for a long time, I couldn't find where I made a mistake.</p>\n"},{"tags":["java","junit","aem","sling"],"comments":[{"owner":{"account_id":1503775,"reputation":18065,"user_id":1407656,"accept_rate":81,"display_name":"toniedzwiedz"},"score":1,"creation_date":1605602329,"post_id":64867814,"comment_id":114693548,"body_markdown":"Can you post the code of your model, as well as the JSON document you&#39;re loading into the test AEM Context? This could be a simple property name mismatch but it&#39;s difficult to say without seeing the line where the NPE occurs.","body":"Can you post the code of your model, as well as the JSON document you&#39;re loading into the test AEM Context? This could be a simple property name mismatch but it&#39;s difficult to say without seeing the line where the NPE occurs."}],"answers":[{"tags":[],"owner":{"account_id":11074819,"reputation":1673,"user_id":8131885,"display_name":"Alexander Berndt"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1605827955,"creation_date":1605827955,"answer_id":64921484,"question_id":64867814,"body_markdown":"It seems that `resource.adaptTo(CtaModel.class)` returned null. The problem is, that adaptTo(...) returns null very silently, if anything fails. Therefore the SlingMocks documentation recommends `ModelFactory.createModel(...)` instead of `adaptTo(...)` for SlingModels.\r\n\r\nhttps://sling.apache.org/documentation/development/sling-mock.html#model-instantiation\r\n\r\n\r\n    // load some content into the mocked repo\r\n    context.load().json(..., &quot;/resource1&quot;);\r\n\r\n    // load resource\r\n    Resource myResource = content.resourceResolver().getResource(&quot;/resource1&quot;);\r\n\r\n    // instantiate Sling Model (adaptable via Resource)\r\n    // this will throw exceptions if model cannot be instantiated\r\n    MyModel myModel = context.getService(ModelFactory.class).createModel(myResource, MyModel.class);\r\n\r\nIf you doing this, the ModelFactory will log error-details, why the Sling model couldn&#39;t be created. So you know, what the problem is, and you don&#39;t need to guess.\r\n","title":"&quot;resource.adaptTo&quot; NullPointer Unit test AEM Sling Model Java","body":"<p>It seems that <code>resource.adaptTo(CtaModel.class)</code> returned null. The problem is, that adaptTo(...) returns null very silently, if anything fails. Therefore the SlingMocks documentation recommends <code>ModelFactory.createModel(...)</code> instead of <code>adaptTo(...)</code> for SlingModels.</p>\n<p><a href=\"https://sling.apache.org/documentation/development/sling-mock.html#model-instantiation\" rel=\"nofollow noreferrer\">https://sling.apache.org/documentation/development/sling-mock.html#model-instantiation</a></p>\n<pre><code>// load some content into the mocked repo\ncontext.load().json(..., &quot;/resource1&quot;);\n\n// load resource\nResource myResource = content.resourceResolver().getResource(&quot;/resource1&quot;);\n\n// instantiate Sling Model (adaptable via Resource)\n// this will throw exceptions if model cannot be instantiated\nMyModel myModel = context.getService(ModelFactory.class).createModel(myResource, MyModel.class);\n</code></pre>\n<p>If you doing this, the ModelFactory will log error-details, why the Sling model couldn't be created. So you know, what the problem is, and you don't need to guess.</p>\n"},{"tags":[],"owner":{"account_id":21650064,"reputation":1,"user_id":15970843,"display_name":"Yogesh Mahajan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621422509,"creation_date":1621422509,"answer_id":67602066,"question_id":64867814,"body_markdown":"If there are issues with init method, specially if any object injected like currentPage or services are null, then model will return null silently even when createModel is used. \r\n\r\nhttps://myaemlearnings.blogspot.com/2020/08/unit-testing-in-aem-debugging-issues-in.html","title":"&quot;resource.adaptTo&quot; NullPointer Unit test AEM Sling Model Java","body":"<p>If there are issues with init method, specially if any object injected like currentPage or services are null, then model will return null silently even when createModel is used.</p>\n<p><a href=\"https://myaemlearnings.blogspot.com/2020/08/unit-testing-in-aem-debugging-issues-in.html\" rel=\"nofollow noreferrer\">https://myaemlearnings.blogspot.com/2020/08/unit-testing-in-aem-debugging-issues-in.html</a></p>\n"},{"tags":[],"owner":{"account_id":13004250,"reputation":1,"user_id":9399316,"display_name":"Luis Felix"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691589695,"creation_date":1691521799,"answer_id":76862559,"question_id":64867814,"body_markdown":"Make sure that you have defined  your\r\n\r\n`defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL`\r\n\r\n in your model&#39;s configurations. This resolved the issue for me pretty quickly\r\n\r\n\r\n```\r\n@Model(\r\n    adaptables = SlingHttpServletRequest.class,\r\n    adapters = {MyModel.class, ComponentExporter.class},\r\n    resourceType = MyModelImpl.RESOURCE_TYPE,\r\n    defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL\r\n)\r\n@Exporter(\r\n    name = ExporterConstants.SLING_MODEL_EXPORTER_NAME,\r\n    extensions = ExporterConstants.SLING_MODEL_EXTENSION\r\n)\r\npublic class MyModelnImpl extends AbstractComponentImpl implements MyModel{\r\n```","title":"&quot;resource.adaptTo&quot; NullPointer Unit test AEM Sling Model Java","body":"<p>Make sure that you have defined  your</p>\n<p><code>defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL</code></p>\n<p>in your model's configurations. This resolved the issue for me pretty quickly</p>\n<pre><code>@Model(\n    adaptables = SlingHttpServletRequest.class,\n    adapters = {MyModel.class, ComponentExporter.class},\n    resourceType = MyModelImpl.RESOURCE_TYPE,\n    defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL\n)\n@Exporter(\n    name = ExporterConstants.SLING_MODEL_EXPORTER_NAME,\n    extensions = ExporterConstants.SLING_MODEL_EXTENSION\n)\npublic class MyModelnImpl extends AbstractComponentImpl implements MyModel{\n</code></pre>\n"}],"owner":{"account_id":4280077,"reputation":621,"user_id":10399628,"display_name":"e-israel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6642,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":64921484,"answer_count":3,"score":3,"last_activity_date":1691589695,"creation_date":1605574181,"question_id":64867814,"body_markdown":"I&#39;m doing a pretty basic Unit test for **Sling Model** in **AEM**, so, when I run the test I get the following error:\r\n\r\n&gt; [ERROR]   CtaModelTest.testGetText:36 NullPointer\r\n\r\nThis is my Java code, the Model is a very basic Sling AEM Model, I&#39;m using the `@ModelAnnotation` as follow:\r\n\r\n```java\r\n@Model(adaptables = SlingHttpServletRequest.class, defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL)\r\n```\r\n\r\n```java\r\npackage com.myproject.core.models;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.apache.sling.api.resource.Resource;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport com.day.cq.wcm.api.Page;\r\nimport io.wcm.testing.mock.aem.junit5.AemContext;\r\nimport io.wcm.testing.mock.aem.junit5.AemContextExtension;\r\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\r\nimport static org.junit.jupiter.api.Assertions.assertTrue;\r\nimport junitx.util.PrivateAccessor;\r\nimport javax.inject.Inject;\r\n\r\n@ExtendWith(AemContextExtension.class)\r\nclass CtaModelTest {\r\n\tprivate static final String COMPONENT_PATH = &quot;/content/campaigns/myproject/master/demo-campaign/demo-email&quot;;\r\n\t\r\n    private CtaModel ctaModel;\r\n\r\n    private Page page;\r\n    private Resource resource;\r\n\r\n    @BeforeEach\r\n    public void setup(AemContext context) throws Exception {\r\n    \t\r\n    \tcontext.load().json(&quot;/ctaModelTest.json&quot;, COMPONENT_PATH);\r\n\t\tcontext.addModelsForClasses(CtaModel.class);\r\n\t\t\r\n\t\tresource = context.resourceResolver().getResource(COMPONENT_PATH + &quot;/jcr:content/par/hero/cta&quot;);\r\n\t\tctaModel = resource.adaptTo(CtaModel.class);\r\n    }\r\n\r\n    @Test\r\n    void testGetText() throws Exception {\r\n\t\tString txt = ctaModel.getText();\r\n        assertNotNull(txt);\r\n    }\r\n}\r\n\r\n```\r\n\r\nCan anyone help me to fix it?","title":"&quot;resource.adaptTo&quot; NullPointer Unit test AEM Sling Model Java","body":"<p>I'm doing a pretty basic Unit test for <strong>Sling Model</strong> in <strong>AEM</strong>, so, when I run the test I get the following error:</p>\n<blockquote>\n<p>[ERROR]   CtaModelTest.testGetText:36 NullPointer</p>\n</blockquote>\n<p>This is my Java code, the Model is a very basic Sling AEM Model, I'm using the <code>@ModelAnnotation</code> as follow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Model(adaptables = SlingHttpServletRequest.class, defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myproject.core.models;\nimport org.apache.commons.lang3.StringUtils;\nimport org.apache.sling.api.resource.Resource;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport com.day.cq.wcm.api.Page;\nimport io.wcm.testing.mock.aem.junit5.AemContext;\nimport io.wcm.testing.mock.aem.junit5.AemContextExtension;\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\nimport static org.junit.jupiter.api.Assertions.assertTrue;\nimport junitx.util.PrivateAccessor;\nimport javax.inject.Inject;\n\n@ExtendWith(AemContextExtension.class)\nclass CtaModelTest {\n    private static final String COMPONENT_PATH = &quot;/content/campaigns/myproject/master/demo-campaign/demo-email&quot;;\n    \n    private CtaModel ctaModel;\n\n    private Page page;\n    private Resource resource;\n\n    @BeforeEach\n    public void setup(AemContext context) throws Exception {\n        \n        context.load().json(&quot;/ctaModelTest.json&quot;, COMPONENT_PATH);\n        context.addModelsForClasses(CtaModel.class);\n        \n        resource = context.resourceResolver().getResource(COMPONENT_PATH + &quot;/jcr:content/par/hero/cta&quot;);\n        ctaModel = resource.adaptTo(CtaModel.class);\n    }\n\n    @Test\n    void testGetText() throws Exception {\n        String txt = ctaModel.getText();\n        assertNotNull(txt);\n    }\n}\n\n</code></pre>\n<p>Can anyone help me to fix it?</p>\n"},{"tags":["java","multithreading","performance"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1691587103,"post_id":76868087,"comment_id":135511639,"body_markdown":"On JDK 20 this program fails with: `Exception in thread &quot;main&quot; java.lang.IllegalArgumentException at java.base/java.util.concurrent.ThreadPoolExecutor.setCorePoolSize(ThreadPoolExecutor.java:1561) at com.example.demo.PoolTest.main(PoolTest.java:20)` because the argument to setCorePoolSize` is more than the `maximumPoolSize`","body":"On JDK 20 this program fails with: <code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException at java.base&#47;java.util.concurrent.ThreadPoolExecutor.setCorePoo&zwnj;&#8203;lSize(ThreadPoolExec&zwnj;&#8203;utor.java:1561) at com.example.demo.PoolTest.main(PoolTest.java:20)</code> because the argument to setCorePoolSize` is more than the <code>maximumPoolSize</code>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1691588210,"post_id":76868087,"comment_id":135511918,"body_markdown":"If you use `Executors.newFixedThreadPool(4)` you get the expected behaviour. Which JDK are you running with?","body":"If you use <code>Executors.newFixedThreadPool(4)</code> you get the expected behaviour. Which JDK are you running with?"},{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1691588420,"post_id":76868087,"comment_id":135511963,"body_markdown":"yes @tgdavies . Setting the initial size of ThreadPoolExecutor to 4 does eliminate the issue. I am using OpenJDK by Zulu build 1.8.0_362-b09","body":"yes @tgdavies . Setting the initial size of ThreadPoolExecutor to 4 does eliminate the issue. I am using OpenJDK by Zulu build 1.8.0_362-b09"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1692792966,"post_id":76868087,"comment_id":135672055,"body_markdown":"Side note: this use of `AtomicInteger` is entirely obsolete. You could achieve the same result by simply passing `i` as first argument to the `task(…)` call. Besides that, the documentation of `Executors.newFixedThreadPool` does not say anywhere that you can assume the return value to be an instance of `ThreadPoolExecutor` to begin with. If you want a configurable thread pool, do not use a factory method even having “fixed” in its name. Instantiate a `ThreadPoolExecutor` explicitly.","body":"Side note: this use of <code>AtomicInteger</code> is entirely obsolete. You could achieve the same result by simply passing <code>i</code> as first argument to the <code>task(…)</code> call. Besides that, the documentation of <code>Executors.newFixedThreadPool</code> does not say anywhere that you can assume the return value to be an instance of <code>ThreadPoolExecutor</code> to begin with. If you want a configurable thread pool, do not use a factory method even having “fixed” in its name. Instantiate a <code>ThreadPoolExecutor</code> explicitly."}],"answers":[{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1691588731,"creation_date":1691587454,"answer_id":76868223,"question_id":76868087,"body_markdown":"You are on a wrong track, completely.\r\n\r\n```Java\r\nString log = &quot;Thread: &quot; + count +\r\n             &quot;,  Start: &quot; + start +\r\n             &quot;,  Stop: &quot; + end +\r\n             &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\r\n             &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\r\nSystem.out.println(log);\r\n```\r\n\r\nThat snippet above is from inside your method `task()`. It displays something like\r\n\r\n```shell\r\nThread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\r\n```\r\n\r\nBut the value of &quot;Thread&quot; is not the thread count or number, but the number of the Task (more precise, of the `Runnable` returned by `task()`). Meaning that your code does not tell you anything about the running threads.\r\n\r\nYour statement\r\n\r\n&gt; In the above program, you will see the 10 Threads being executed\r\n\r\nis wrong. Because the code is in `task()`, it shows just that this method is executed, but nothing about threads.\r\n\r\nYou forgot that during its lifetime a `Thread` from a pool can execute multiple `Runnable` instances, one after the other. That&#39;s why you have a pool. Refer to [the Javadoc for `Executor`][1] that describes the intention of the `ExecutorService`.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html","title":"ThreadPoolExecutor executing in single thread even though corePoolSize is set more","body":"<p>You are on a wrong track, completely.</p>\n<pre><code>String log = &quot;Thread: &quot; + count +\n             &quot;,  Start: &quot; + start +\n             &quot;,  Stop: &quot; + end +\n             &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\n             &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\nSystem.out.println(log);\n</code></pre>\n<p>That snippet above is from inside your method <code>task()</code>. It displays something like</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Thread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\n</code></pre>\n<p>But the value of &quot;Thread&quot; is not the thread count or number, but the number of the Task (more precise, of the <code>Runnable</code> returned by <code>task()</code>). Meaning that your code does not tell you anything about the running threads.</p>\n<p>Your statement</p>\n<blockquote>\n<p>In the above program, you will see the 10 Threads being executed</p>\n</blockquote>\n<p>is wrong. Because the code is in <code>task()</code>, it shows just that this method is executed, but nothing about threads.</p>\n<p>You forgot that during its lifetime a <code>Thread</code> from a pool can execute multiple <code>Runnable</code> instances, one after the other. That's why you have a pool. Refer to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html\" rel=\"nofollow noreferrer\">the Javadoc for <code>Executor</code></a> that describes the intention of the <code>ExecutorService</code>.</p>\n"},{"tags":[],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1691589510,"creation_date":1691589510,"answer_id":76868499,"question_id":76868087,"body_markdown":"I am answering my question. Thanks to @tgdavies for providing the exception thrown in JDK 20. The solution is to increase the maxPoolSize.\r\n\r\nAfter setting the maxPoolSize to something like\r\n```java\r\nthreadPoolExecutor.setMaximumPoolSize(Runtime.getRuntime().availableProcessors());\r\n```\r\nThings are executing parallely.","title":"ThreadPoolExecutor executing in single thread even though corePoolSize is set more","body":"<p>I am answering my question. Thanks to @tgdavies for providing the exception thrown in JDK 20. The solution is to increase the maxPoolSize.</p>\n<p>After setting the maxPoolSize to something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>threadPoolExecutor.setMaximumPoolSize(Runtime.getRuntime().availableProcessors());\n</code></pre>\n<p>Things are executing parallely.</p>\n"}],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76868499,"answer_count":2,"score":-1,"last_activity_date":1691589510,"creation_date":1691586310,"question_id":76868087,"body_markdown":"My problem is related to the executor returned by `Executors.newFixedThreadPool(1)` which is explained after the following program:\r\n\r\n```java\r\npublic static void main(String[] args) throws InterruptedException {\r\n    AtomicInteger atomicInteger = new AtomicInteger(0);\r\n    ThreadPoolExecutor threadPoolExecutor = (ThreadPoolExecutor) Executors.newFixedThreadPool(1);\r\n    List&lt;Runnable&gt; runnableList = new ArrayList&lt;&gt;();\r\n    for (int i = 0; i &lt; 10; i++) {\r\n        runnableList.add(task(atomicInteger.incrementAndGet(), threadPoolExecutor));\r\n    }\r\n    System.out.println(&quot;Starting Stage-1.&quot;);\r\n    threadPoolExecutor.setCorePoolSize(4);\r\n    runnableList.forEach(threadPoolExecutor::execute);\r\n\r\n    waitForCompletion(threadPoolExecutor);\r\n    System.out.println(&quot;Stage-1 complete.&quot;);\r\n\r\n    threadPoolExecutor.setCorePoolSize(0);\r\n    TimeUnit.SECONDS.sleep(10);\r\n\r\n    System.out.println(&quot;Starting Stage-2.&quot;);\r\n    threadPoolExecutor.setCorePoolSize(6);\r\n    runnableList.forEach(threadPoolExecutor::execute);\r\n\r\n    waitForCompletion(threadPoolExecutor);\r\n    System.out.println(&quot;Stage-2 complete.&quot;);\r\n    threadPoolExecutor.shutdown();\r\n}\r\n\r\nstatic Runnable task(int count, ThreadPoolExecutor threadPoolExecutor) {\r\n    return () -&gt; {\r\n        LocalTime start;\r\n        LocalTime end;\r\n        try {\r\n            start = LocalTime.now();\r\n            TimeUnit.SECONDS.sleep(5);\r\n            end = LocalTime.now();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        String log = &quot;Thread: &quot; + count +\r\n                &quot;,  Start: &quot; + start +\r\n                &quot;,  Stop: &quot; + end +\r\n                &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\r\n                &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\r\n        System.out.println(log);\r\n    };\r\n}\r\n\r\nstatic void waitForCompletion(ThreadPoolExecutor threadPoolExecutor) throws InterruptedException {\r\n    while (threadPoolExecutor.getActiveCount() != 0) {\r\n        TimeUnit.SECONDS.sleep(5);\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nStarting Stage-1.\r\nThread: 2,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 3,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 1,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 4,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 6,  Start: 18:27:17.492,  Stop: 18:27:22.497,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 7,  Start: 18:27:22.497,  Stop: 18:27:27.502,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 8,  Start: 18:27:27.502,  Stop: 18:27:32.506,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 9,  Start: 18:27:32.506,  Stop: 18:27:37.512,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 10,  Start: 18:27:37.512,  Stop: 18:27:42.515,  ActiveCount: 1,  CorePoolSize: 4\r\nStage-1 complete.\r\nStarting Stage-2.\r\nThread: 3,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\r\nThread: 5,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\r\nThread: 6,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 5,  CorePoolSize: 6\r\nThread: 4,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\r\nThread: 2,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\r\nThread: 1,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 7,  Start: 18:28:02.507,  Stop: 18:28:07.512,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 8,  Start: 18:28:07.512,  Stop: 18:28:12.517,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 9,  Start: 18:28:12.517,  Stop: 18:28:17.522,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 10,  Start: 18:28:17.522,  Stop: 18:28:22.524,  ActiveCount: 1,  CorePoolSize: 6\r\nStage-2 complete.\r\n```\r\n\r\nIn the above program, you will see the 10 Threads being executed, first with a corePoolSize of 4. After the execution of the first four threads, the execution continues executing sequentially even though the corePoolSize is set higher than 1. I have demonstrated the above findings twice with 2 stages with corePoolSize of 4 and 6, confirming the uniformity of the behaviour.\r\n\r\nMy expectation is when there is empty slot in the executor, it should utilise that.\r\n\r\n\r\n","title":"ThreadPoolExecutor executing in single thread even though corePoolSize is set more","body":"<p>My problem is related to the executor returned by <code>Executors.newFixedThreadPool(1)</code> which is explained after the following program:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws InterruptedException {\n    AtomicInteger atomicInteger = new AtomicInteger(0);\n    ThreadPoolExecutor threadPoolExecutor = (ThreadPoolExecutor) Executors.newFixedThreadPool(1);\n    List&lt;Runnable&gt; runnableList = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; 10; i++) {\n        runnableList.add(task(atomicInteger.incrementAndGet(), threadPoolExecutor));\n    }\n    System.out.println(&quot;Starting Stage-1.&quot;);\n    threadPoolExecutor.setCorePoolSize(4);\n    runnableList.forEach(threadPoolExecutor::execute);\n\n    waitForCompletion(threadPoolExecutor);\n    System.out.println(&quot;Stage-1 complete.&quot;);\n\n    threadPoolExecutor.setCorePoolSize(0);\n    TimeUnit.SECONDS.sleep(10);\n\n    System.out.println(&quot;Starting Stage-2.&quot;);\n    threadPoolExecutor.setCorePoolSize(6);\n    runnableList.forEach(threadPoolExecutor::execute);\n\n    waitForCompletion(threadPoolExecutor);\n    System.out.println(&quot;Stage-2 complete.&quot;);\n    threadPoolExecutor.shutdown();\n}\n\nstatic Runnable task(int count, ThreadPoolExecutor threadPoolExecutor) {\n    return () -&gt; {\n        LocalTime start;\n        LocalTime end;\n        try {\n            start = LocalTime.now();\n            TimeUnit.SECONDS.sleep(5);\n            end = LocalTime.now();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n        String log = &quot;Thread: &quot; + count +\n                &quot;,  Start: &quot; + start +\n                &quot;,  Stop: &quot; + end +\n                &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\n                &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\n        System.out.println(log);\n    };\n}\n\nstatic void waitForCompletion(ThreadPoolExecutor threadPoolExecutor) throws InterruptedException {\n    while (threadPoolExecutor.getActiveCount() != 0) {\n        TimeUnit.SECONDS.sleep(5);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Starting Stage-1.\nThread: 2,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 3,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 1,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 4,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\nThread: 6,  Start: 18:27:17.492,  Stop: 18:27:22.497,  ActiveCount: 1,  CorePoolSize: 4\nThread: 7,  Start: 18:27:22.497,  Stop: 18:27:27.502,  ActiveCount: 1,  CorePoolSize: 4\nThread: 8,  Start: 18:27:27.502,  Stop: 18:27:32.506,  ActiveCount: 1,  CorePoolSize: 4\nThread: 9,  Start: 18:27:32.506,  Stop: 18:27:37.512,  ActiveCount: 1,  CorePoolSize: 4\nThread: 10,  Start: 18:27:37.512,  Stop: 18:27:42.515,  ActiveCount: 1,  CorePoolSize: 4\nStage-1 complete.\nStarting Stage-2.\nThread: 3,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\nThread: 5,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\nThread: 6,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 5,  CorePoolSize: 6\nThread: 4,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\nThread: 2,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\nThread: 1,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 1,  CorePoolSize: 6\nThread: 7,  Start: 18:28:02.507,  Stop: 18:28:07.512,  ActiveCount: 1,  CorePoolSize: 6\nThread: 8,  Start: 18:28:07.512,  Stop: 18:28:12.517,  ActiveCount: 1,  CorePoolSize: 6\nThread: 9,  Start: 18:28:12.517,  Stop: 18:28:17.522,  ActiveCount: 1,  CorePoolSize: 6\nThread: 10,  Start: 18:28:17.522,  Stop: 18:28:22.524,  ActiveCount: 1,  CorePoolSize: 6\nStage-2 complete.\n</code></pre>\n<p>In the above program, you will see the 10 Threads being executed, first with a corePoolSize of 4. After the execution of the first four threads, the execution continues executing sequentially even though the corePoolSize is set higher than 1. I have demonstrated the above findings twice with 2 stages with corePoolSize of 4 and 6, confirming the uniformity of the behaviour.</p>\n<p>My expectation is when there is empty slot in the executor, it should utilise that.</p>\n"},{"tags":["java","sonarlint-intellij","cognitive-complexity"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":2,"creation_date":1691588689,"post_id":76868330,"comment_id":135512039,"body_markdown":"Extracting a part of the logic to another method will help decrease the complexity. Many IDEs can help you do that easily.","body":"Extracting a part of the logic to another method will help decrease the complexity. Many IDEs can help you do that easily."},{"owner":{"account_id":6148867,"reputation":4677,"user_id":4793951,"display_name":"Zircon"},"score":1,"creation_date":1691589004,"post_id":76868330,"comment_id":135512119,"body_markdown":"I&#39;m not sure exactly how SonarLint calculates Cognitive Complexity, but what version of Java are you using? Are Streams available to you? At the least, it would make your code much more readable.","body":"I&#39;m not sure exactly how SonarLint calculates Cognitive Complexity, but what version of Java are you using? Are Streams available to you? At the least, it would make your code much more readable."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":2,"creation_date":1691589068,"post_id":76868330,"comment_id":135512135,"body_markdown":"You could start by extracting the `for (JsonElement index : indexes) {` loop. But your goal should not be to get rid of the warning but to make your code as clear as possible. As such, you should make sure the method makes sense and has a descriptive name. SonarLint&#39;s cognitive complexity is calculated using the number of control flow statements (e.g. conditions or loops) while increasing the weight of nested statements. For example, if you have an `if` in a `while` loop, you get 1 &quot;complexity&quot; for the `while` and 2 for the `if` because it&#39;s nested once.","body":"You could start by extracting the <code>for (JsonElement index : indexes) {</code> loop. But your goal should not be to get rid of the warning but to make your code as clear as possible. As such, you should make sure the method makes sense and has a descriptive name. SonarLint&#39;s cognitive complexity is calculated using the number of control flow statements (e.g. conditions or loops) while increasing the weight of nested statements. For example, if you have an <code>if</code> in a <code>while</code> loop, you get 1 &quot;complexity&quot; for the <code>while</code> and 2 for the <code>if</code> because it&#39;s nested once."},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1691671410,"post_id":76868330,"comment_id":135524754,"body_markdown":"@dan1st extracting the for loop you mentioned removed the error. \nThat was so easy. I understand though that the methods should be more descriptive","body":"@dan1st extracting the for loop you mentioned removed the error.  That was so easy. I understand though that the methods should be more descriptive"},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1692383306,"post_id":76868330,"comment_id":135620515,"body_markdown":"@dan1st you can post your solution, so I can mark it","body":"@dan1st you can post your solution, so I can mark it"}],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691589443,"creation_date":1691589443,"answer_id":76868489,"question_id":76868330,"body_markdown":"Below I listed a couple of hints based on your code. Of course, there are many many more. You might find Clean Code by Robert Martin an interesting read.\r\n\r\n 1. Extract code that is in for loops to a separate method (in your case you can do this twice)\r\n 2. Extract code that is in if or else conditions to separate methods\r\n```\r\nif (condition){\r\n   doSomething();\r\n} else{\r\n   doSomethingElse();\r\n}\r\n```\r\n 3. Avoid `continue`\r\n\r\nBetter to change\r\n```\r\nif (indexes == null)\r\n                continue;\r\n```\r\nto\r\n```\r\nif (indexes != null){\r\n    for (JsonElement index : indexes) {...}\r\n}\r\n```","title":"Reduce cognitive Complexity of a method from 26 to 15","body":"<p>Below I listed a couple of hints based on your code. Of course, there are many many more. You might find Clean Code by Robert Martin an interesting read.</p>\n<ol>\n<li>Extract code that is in for loops to a separate method (in your case you can do this twice)</li>\n<li>Extract code that is in if or else conditions to separate methods</li>\n</ol>\n<pre><code>if (condition){\n   doSomething();\n} else{\n   doSomethingElse();\n}\n</code></pre>\n<ol start=\"3\">\n<li>Avoid <code>continue</code></li>\n</ol>\n<p>Better to change</p>\n<pre><code>if (indexes == null)\n                continue;\n</code></pre>\n<p>to</p>\n<pre><code>if (indexes != null){\n    for (JsonElement index : indexes) {...}\n}\n</code></pre>\n"}],"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691589443,"creation_date":1691588343,"question_id":76868330,"body_markdown":"I have the following code:  \r\n\r\n    private void generateKeyList(String pdm, List&lt;Key&gt; uKs,\r\n                                     List&lt;PhysicalKey&gt; pKs) {\r\n            if (pKs == null &amp;&amp; uKs == null)\r\n                return;\r\n            JsonObject concepts = getConcepts(pdm);\r\n            String indexTypeRequired = uKs == null ? &quot;PRIMARY-KEY&quot; : &quot;UNIQUE&quot;;\r\n            for (String concept : concepts.keySet()) {\r\n                var indexes = concepts.getAsJsonObject(concept).getAsJsonArray(&quot;indexes&quot;);\r\n                if (indexes == null)\r\n                    continue;\r\n                for (JsonElement index : indexes) {\r\n                    JsonObject indexO = (JsonObject) index;\r\n                    var indexType = indexO.getAsJsonPrimitive(&quot;indexType&quot;).getAsString();\r\n                    var name = indexO.getAsJsonPrimitive(&quot;name&quot;).getAsString();\r\n                    var keys = indexO.getAsJsonArray(&quot;key&quot;).getAsJsonArray();\r\n                    if (indexType.equals(indexTypeRequired)) {\r\n                        for (JsonElement indexKey : keys) {\r\n                            var keyString = indexKey.getAsString();\r\n                            var key = pKs == null ? new Key() : new PhysicalKey();\r\n                            key.setName(name).setType(indexType).setTable(concept).setColumn(keyString);\r\n                            if (uKs == null)\r\n                                pKs.add((PhysicalKey) key);\r\n                            else\r\n                                uKs.add(key);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\nI am getting an issue from sonarLint that the Cognitive Complexity of this code is 26 and it should be &lt;=15  \r\nNot sure how to reduce the complexity here.  \r\nAny ideas of hints?\r\n\r\n","title":"Reduce cognitive Complexity of a method from 26 to 15","body":"<p>I have the following code:</p>\n<pre><code>private void generateKeyList(String pdm, List&lt;Key&gt; uKs,\n                                 List&lt;PhysicalKey&gt; pKs) {\n        if (pKs == null &amp;&amp; uKs == null)\n            return;\n        JsonObject concepts = getConcepts(pdm);\n        String indexTypeRequired = uKs == null ? &quot;PRIMARY-KEY&quot; : &quot;UNIQUE&quot;;\n        for (String concept : concepts.keySet()) {\n            var indexes = concepts.getAsJsonObject(concept).getAsJsonArray(&quot;indexes&quot;);\n            if (indexes == null)\n                continue;\n            for (JsonElement index : indexes) {\n                JsonObject indexO = (JsonObject) index;\n                var indexType = indexO.getAsJsonPrimitive(&quot;indexType&quot;).getAsString();\n                var name = indexO.getAsJsonPrimitive(&quot;name&quot;).getAsString();\n                var keys = indexO.getAsJsonArray(&quot;key&quot;).getAsJsonArray();\n                if (indexType.equals(indexTypeRequired)) {\n                    for (JsonElement indexKey : keys) {\n                        var keyString = indexKey.getAsString();\n                        var key = pKs == null ? new Key() : new PhysicalKey();\n                        key.setName(name).setType(indexType).setTable(concept).setColumn(keyString);\n                        if (uKs == null)\n                            pKs.add((PhysicalKey) key);\n                        else\n                            uKs.add(key);\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n<p>I am getting an issue from sonarLint that the Cognitive Complexity of this code is 26 and it should be &lt;=15<br />\nNot sure how to reduce the complexity here.<br />\nAny ideas of hints?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":120028,"reputation":35744,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1299630228,"creation_date":1299590946,"answer_id":5233133,"question_id":5233012,"body_markdown":"See `java.text.NumberFormat` and `DecimalFormat`:\r\n\r\n     NumberFormat nf = new DecimalFormat (&quot;990.0&quot;);\r\n     double d = nf.parse (text);\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>See <code>java.text.NumberFormat</code> and <code>DecimalFormat</code>:</p>\n\n<pre><code> NumberFormat nf = new DecimalFormat (\"990.0\");\n double d = nf.parse (text);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"comment_count":0,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1455801454,"creation_date":1299591009,"answer_id":5233147,"question_id":5233012,"body_markdown":"The `Float.parseFloat()` method is not locale-dependent. It expects a dot as decimal separator. If the decimal separator in your input is always dot, you can use this safely.\r\n\r\nThe `NumberFormat` class provides locale-aware parse and format should you need to adapt for different locales.","title":"Convert String with Dot or Comma to Float Number","body":"<p>The <code>Float.parseFloat()</code> method is not locale-dependent. It expects a dot as decimal separator. If the decimal separator in your input is always dot, you can use this safely.</p>\n\n<p>The <code>NumberFormat</code> class provides locale-aware parse and format should you need to adapt for different locales.</p>\n"},{"comments":[{"owner":{"account_id":125373,"reputation":2944,"user_id":321108,"display_name":"yurez"},"score":1,"creation_date":1374508849,"post_id":5233638,"comment_id":25955129,"body_markdown":"Alternatively, `new DecimalFormat(&quot;0.#&quot;,  DecimalFormatSymbols.getInstance(Locale.ENGLISH));`","body":"Alternatively, <code>new DecimalFormat(&quot;0.#&quot;,  DecimalFormatSymbols.getInstance(Locale.ENGLISH));</code>"},{"owner":{"account_id":27505,"reputation":32693,"user_id":72673,"accept_rate":72,"display_name":"Maurice Perry"},"score":0,"creation_date":1374514106,"post_id":5233638,"comment_id":25957890,"body_markdown":"Yes, but you&#39;re relying on the system settings","body":"Yes, but you&#39;re relying on the system settings"},{"owner":{"account_id":125373,"reputation":2944,"user_id":321108,"display_name":"yurez"},"score":1,"creation_date":1374566627,"post_id":5233638,"comment_id":25977503,"body_markdown":"How so? Won&#39;t hard coding the English locale use dot separator regardless of system settings?","body":"How so? Won&#39;t hard coding the English locale use dot separator regardless of system settings?"},{"owner":{"account_id":27505,"reputation":32693,"user_id":72673,"accept_rate":72,"display_name":"Maurice Perry"},"score":2,"creation_date":1444319636,"post_id":5233638,"comment_id":53863933,"body_markdown":"No: the user can change the format of numbers for the english language.","body":"No: the user can change the format of numbers for the english language."},{"owner":{"account_id":36130,"reputation":6733,"user_id":102901,"accept_rate":80,"display_name":"Cosmin"},"score":0,"creation_date":1613639858,"post_id":5233638,"comment_id":117138846,"body_markdown":"This is very very slow if you need to make 1000+ conversions. Use the solution below with the &quot;replace&quot; for much better speed.","body":"This is very very slow if you need to make 1000+ conversions. Use the solution below with the &quot;replace&quot; for much better speed."}],"tags":[],"owner":{"account_id":27505,"reputation":32693,"user_id":72673,"accept_rate":72,"display_name":"Maurice Perry"},"comment_count":5,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1299593973,"creation_date":1299593667,"answer_id":5233638,"question_id":5233012,"body_markdown":"    DecimalFormatSymbols symbols = new DecimalFormatSymbols();\r\n    symbols.setDecimalSeparator(&#39;.&#39;);\r\n    DecimalFormat format = new DecimalFormat(&quot;0.#&quot;);\r\n    format.setDecimalFormatSymbols(symbols);\r\n    float f = format.parse(str).floatValue();\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<pre><code>DecimalFormatSymbols symbols = new DecimalFormatSymbols();\nsymbols.setDecimalSeparator('.');\nDecimalFormat format = new DecimalFormat(\"0.#\");\nformat.setDecimalFormatSymbols(symbols);\nfloat f = format.parse(str).floatValue();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1931246,"reputation":1297,"user_id":1740593,"accept_rate":95,"display_name":"Vargan"},"score":11,"creation_date":1385985012,"post_id":13758320,"comment_id":30336846,"body_markdown":"This is really a bad solution.. for a great amount of values, this could be a bottleneck. Really bad performance!","body":"This is really a bad solution.. for a great amount of values, this could be a bottleneck. Really bad performance!"},{"owner":{"account_id":1326635,"reputation":700,"user_id":1271317,"display_name":"flamming_python"},"score":0,"creation_date":1386086533,"post_id":13758320,"comment_id":30386921,"body_markdown":"Why? All it effectively is, is a series of primitive character comparisons, then the creation of a new String, then a parseFloat. It&#39;s less expensive to create a String then a DecimalFormat, DecimalFormatSymbols or any of this malarkey. Gimme my point back =)","body":"Why? All it effectively is, is a series of primitive character comparisons, then the creation of a new String, then a parseFloat. It&#39;s less expensive to create a String then a DecimalFormat, DecimalFormatSymbols or any of this malarkey. Gimme my point back =)"},{"owner":{"account_id":1931246,"reputation":1297,"user_id":1740593,"accept_rate":95,"display_name":"Vargan"},"score":0,"creation_date":1386155036,"post_id":13758320,"comment_id":30417261,"body_markdown":"The replace needs to parse all the string unless he find the comma, and is not safe in case of change of locale. There are better way to have a mechanism working for both cases. Parsing a string in this way can be a bottleneck if you&#39;re using the function for a lot of times per second","body":"The replace needs to parse all the string unless he find the comma, and is not safe in case of change of locale. There are better way to have a mechanism working for both cases. Parsing a string in this way can be a bottleneck if you&#39;re using the function for a lot of times per second"},{"owner":{"account_id":1326635,"reputation":700,"user_id":1271317,"display_name":"flamming_python"},"score":3,"creation_date":1386247568,"post_id":13758320,"comment_id":30463441,"body_markdown":"Naturally it&#39;s an ad-hoc solution; it&#39;s only safe when you&#39;re sure that the String double values you&#39;re getting will definitely always be using commas or dots. Otherwise you can use the replaceAll(String, String) with a regex to match multiple types of possible seperators/delimiters at once; although it would be slower for sure. Anyway, I don&#39;t know how the internals of the DecimalFormat work; but I don&#39;t see how it will be faster. Even if it is, then this is still a perfectly reasonable solution in MOST cases","body":"Naturally it&#39;s an ad-hoc solution; it&#39;s only safe when you&#39;re sure that the String double values you&#39;re getting will definitely always be using commas or dots. Otherwise you can use the replaceAll(String, String) with a regex to match multiple types of possible seperators/delimiters at once; although it would be slower for sure. Anyway, I don&#39;t know how the internals of the DecimalFormat work; but I don&#39;t see how it will be faster. Even if it is, then this is still a perfectly reasonable solution in MOST cases"},{"owner":{"account_id":36130,"reputation":6733,"user_id":102901,"accept_rate":80,"display_name":"Cosmin"},"score":0,"creation_date":1613639776,"post_id":13758320,"comment_id":117138811,"body_markdown":"This is the best solution related to speed, the others are very very slow if you need to make 1000+ conversions.","body":"This is the best solution related to speed, the others are very very slow if you need to make 1000+ conversions."}],"tags":[],"owner":{"account_id":1326635,"reputation":700,"user_id":1271317,"display_name":"flamming_python"},"comment_count":5,"down_vote_count":12,"up_vote_count":37,"is_accepted":false,"score":25,"last_activity_date":1360325492,"creation_date":1354863181,"answer_id":13758320,"question_id":5233012,"body_markdown":"    valueStr = valueStr.replace(&#39;,&#39;, &#39;.&#39;);\r\n    return new Float(valueStr);\r\n\r\nDone","title":"Convert String with Dot or Comma to Float Number","body":"<pre><code>valueStr = valueStr.replace(',', '.');\nreturn new Float(valueStr);\n</code></pre>\n\n<p>Done</p>\n"},{"tags":[],"owner":{"account_id":3845435,"reputation":63,"user_id":3187137,"display_name":"user3187137"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1470403945,"creation_date":1389526417,"answer_id":21074114,"question_id":5233012,"body_markdown":"What about this:\r\n \r\n    Float floatFromStringOrZero(String s){\r\n        Float val = Float.valueOf(0);\r\n        try{\r\n            val = Float.valueOf(s);\r\n        } catch(NumberFormatException ex){\r\n            DecimalFormat df = new DecimalFormat();\r\n            Number n = null;\r\n            try{\r\n                n = df.parse(s);\r\n            } catch(ParseException ex2){\r\n            }\r\n            if(n != null)\r\n                val = n.floatValue();\r\n        }\r\n        return val;\r\n    }\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>What about this:</p>\n\n<pre><code>Float floatFromStringOrZero(String s){\n    Float val = Float.valueOf(0);\n    try{\n        val = Float.valueOf(s);\n    } catch(NumberFormatException ex){\n        DecimalFormat df = new DecimalFormat();\n        Number n = null;\n        try{\n            n = df.parse(s);\n        } catch(ParseException ex2){\n        }\n        if(n != null)\n            val = n.floatValue();\n    }\n    return val;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5400671,"reputation":1252,"user_id":4300670,"display_name":"Aliton Oliveira"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551832678,"creation_date":1551832678,"answer_id":55013765,"question_id":5233012,"body_markdown":"I hope this piece of code may help you.\r\n\r\n    public static Float getDigit(String quote){\r\n            char decimalSeparator = new DecimalFormatSymbols().getDecimalSeparator();\r\n            String regex = &quot;[^0-9&quot; + decimalSeparator + &quot;]&quot;;\r\n            String valueOnlyDigit = quote.replaceAll(regex, &quot;&quot;);\r\n    \r\n            if (String.valueOf(decimalSeparator).equals(&quot;,&quot;)) {\r\n                valueOnlyDigit = valueOnlyDigit.replace(&quot;,&quot;, &quot;.&quot;);\r\n                //Log.i(&quot;debinf purcadap&quot;, &quot;substituted comma by dot&quot;);\r\n            }\r\n    \r\n            try {\r\n                return Float.parseFloat(valueOnlyDigit);\r\n            } catch (ArithmeticException | NumberFormatException e) {\r\n                //Log.i(&quot;debinf purcadap&quot;, &quot;Error in getMoneyAsDecimal&quot;, e);\r\n                return null;\r\n            }\r\n        }\r\n\r\n\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>I hope this piece of code may help you.</p>\n\n<pre><code>public static Float getDigit(String quote){\n        char decimalSeparator = new DecimalFormatSymbols().getDecimalSeparator();\n        String regex = \"[^0-9\" + decimalSeparator + \"]\";\n        String valueOnlyDigit = quote.replaceAll(regex, \"\");\n\n        if (String.valueOf(decimalSeparator).equals(\",\")) {\n            valueOnlyDigit = valueOnlyDigit.replace(\",\", \".\");\n            //Log.i(\"debinf purcadap\", \"substituted comma by dot\");\n        }\n\n        try {\n            return Float.parseFloat(valueOnlyDigit);\n        } catch (ArithmeticException | NumberFormatException e) {\n            //Log.i(\"debinf purcadap\", \"Error in getMoneyAsDecimal\", e);\n            return null;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23808129,"reputation":924,"user_id":17817329,"display_name":"robni"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641463046,"creation_date":1641154519,"answer_id":70559426,"question_id":5233012,"body_markdown":"You can use the placeholder %s-String for any primitive type.\r\n\r\n```java\r\nfloat x = 3.15f, y = 1.2345f;\r\n\r\nSystem.out.printf(&quot;%.4s and %.5s&quot;, x, y);\r\n```\r\n**Output: 3.15 and 1.234**\r\n\r\n**%s is always english formatting regardless of localization.**\r\n\r\nIf you want a **specif local formatting**, you could also do:\r\n```java\r\nimport java.util.Locale;\r\n\r\nfloat x = 3.15f, y = 1.2345f;\r\n\r\nSystem.out.printf(Locale.GERMAN, &quot;%.2f and %.4f&quot;, x, y);\r\n```\r\n**Output: 3,15 and 1,2345**","title":"Convert String with Dot or Comma to Float Number","body":"<p>You can use the placeholder %s-String for any primitive type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>float x = 3.15f, y = 1.2345f;\n\nSystem.out.printf(&quot;%.4s and %.5s&quot;, x, y);\n</code></pre>\n<p><strong>Output: 3.15 and 1.234</strong></p>\n<p><strong>%s is always english formatting regardless of localization.</strong></p>\n<p>If you want a <strong>specif local formatting</strong>, you could also do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Locale;\n\nfloat x = 3.15f, y = 1.2345f;\n\nSystem.out.printf(Locale.GERMAN, &quot;%.2f and %.4f&quot;, x, y);\n</code></pre>\n<p><strong>Output: 3,15 and 1,2345</strong></p>\n"},{"tags":[],"owner":{"account_id":21110101,"reputation":1,"user_id":15546121,"display_name":"Henry Lang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691588700,"creation_date":1691522667,"answer_id":76862653,"question_id":5233012,"body_markdown":"To convert the string to float regardless of localization you can always replace the comma &quot;,&quot; with the dot &quot;.&quot; using the `str.replace()` method, as following:\r\n\r\n    // Set value as string first\r\n    String s = &quot;9,9&quot;;\r\n    // Replacing , with .\r\n    s = s.replace(&quot;,&quot;, &quot;.&quot;);\r\n    // Parsing the value\r\n    float x = Float.parseFloat(s);\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>To convert the string to float regardless of localization you can always replace the comma &quot;,&quot; with the dot &quot;.&quot; using the <code>str.replace()</code> method, as following:</p>\n<pre><code>// Set value as string first\nString s = &quot;9,9&quot;;\n// Replacing , with .\ns = s.replace(&quot;,&quot;, &quot;.&quot;);\n// Parsing the value\nfloat x = Float.parseFloat(s);\n</code></pre>\n"}],"owner":{"account_id":716842,"reputation":1385,"user_id":644553,"accept_rate":0,"display_name":"Dayanne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103345,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":8,"score":34,"last_activity_date":1691588700,"creation_date":1299590384,"question_id":5233012,"body_markdown":"I always like input in my function to get numbers that range from 0.1 to 999.9 (the decimal part is always separated by &#39;.&#39;, if there is no decimal then there is no &#39;.&#39; for example 9 or 7 .\r\n\r\nHow do I convert this String to float value regardless of localization (some countries use &#39;,&#39; to separate decimal part of number. I always get it with the &#39;.&#39;)? Does this depend on local computer settings?","title":"Convert String with Dot or Comma to Float Number","body":"<p>I always like input in my function to get numbers that range from 0.1 to 999.9 (the decimal part is always separated by '.', if there is no decimal then there is no '.' for example 9 or 7 .</p>\n\n<p>How do I convert this String to float value regardless of localization (some countries use ',' to separate decimal part of number. I always get it with the '.')? Does this depend on local computer settings?</p>\n"},{"tags":["java","spring","spring-mvc","scheduled-tasks"],"comments":[{"owner":{"account_id":8434884,"reputation":613,"user_id":6329331,"display_name":"MiGo"},"score":0,"creation_date":1668083763,"post_id":43664259,"comment_id":131323748,"body_markdown":"Can you please answer this ?\nhttps://stackoverflow.com/questions/74376294/how-to-gracefully-shutdown-spring-boot-app-using-configuration-and-programatical","body":"Can you please answer this ? <a href=\"https://stackoverflow.com/questions/74376294/how-to-gracefully-shutdown-spring-boot-app-using-configuration-and-programatical\" title=\"how to gracefully shutdown spring boot app using configuration and programatical\">stackoverflow.com/questions/74376294/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1613240,"reputation":2365,"user_id":1491636,"accept_rate":46,"display_name":"user1491636"},"score":2,"creation_date":1493393631,"post_id":43668082,"comment_id":74413816,"body_markdown":"Actually, I just realized that the `@PreDestroy` is still being called prior to the task completing. I&#39;m using a solution like this: http://stackoverflow.com/a/35017579/1491636 however I&#39;m additionally setting the `setWaitForTasksToCompleteOnShutdown` flag to true.","body":"Actually, I just realized that the <code>@PreDestroy</code> is still being called prior to the task completing. I&#39;m using a solution like this: <a href=\"http://stackoverflow.com/a/35017579/1491636\">stackoverflow.com/a/35017579/1491636</a> however I&#39;m additionally setting the <code>setWaitForTasksToCompleteOnShutdown</code> flag to true."}],"tags":[],"owner":{"account_id":8081998,"reputation":1365,"user_id":6090847,"display_name":"Matej Marconak"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1493327949,"creation_date":1493327949,"answer_id":43668082,"question_id":43664259,"body_markdown":"You need update configuration of `ThreadPoolTaskScheduler`. Set true for `waitForJobsToCompleteOnShutdown` (method `setWaitForTasksToCompleteOnShutdown`).\r\n\r\nFrom documentation:\r\n\r\n&gt; Set whether to wait for scheduled tasks to complete on shutdown, not interrupting running tasks and executing all tasks in the queue.\r\nDefault is &quot;false&quot;, shutting down immediately through interrupting ongoing tasks and clearing the queue. Switch this flag to &quot;true&quot; if you prefer fully completed tasks at the expense of a longer shutdown phase.\r\n\r\n","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>You need update configuration of <code>ThreadPoolTaskScheduler</code>. Set true for <code>waitForJobsToCompleteOnShutdown</code> (method <code>setWaitForTasksToCompleteOnShutdown</code>).</p>\n\n<p>From documentation:</p>\n\n<blockquote>\n  <p>Set whether to wait for scheduled tasks to complete on shutdown, not interrupting running tasks and executing all tasks in the queue.\n  Default is \"false\", shutting down immediately through interrupting ongoing tasks and clearing the queue. Switch this flag to \"true\" if you prefer fully completed tasks at the expense of a longer shutdown phase.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"score":0,"creation_date":1623244484,"post_id":43674132,"comment_id":120023657,"body_markdown":"This solution does not work for me:\n\n```\nThe dependencies of some of the beans in the application context form a cycle:\n\n┌──-&gt;──┐\n|  setSchedulerToWait defined in class path resource [at/codemonkey/shutdown/scheduler/TaskExecutorConfiguration.class]\n└──&lt;-──┘\n```","body":"This solution does not work for me:  ``` The dependencies of some of the beans in the application context form a cycle:  ┌──-&gt;──┐ |  setSchedulerToWait defined in class path resource [at/codemonkey/shutdown/scheduler/TaskExecutorConfiguration.&zwnj;&#8203;class] └──&lt;-──┘ ```"}],"tags":[],"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493363361,"creation_date":1493363361,"answer_id":43674132,"question_id":43664259,"body_markdown":"@Matej is right. Some thing like this should do the trick   \r\n\r\n     @Bean\r\n      public ThreadPoolTaskScheduler setSchedulerToWait(ThreadPoolTaskScheduler threadPoolTaskScheduler){\r\n       threadPoolTaskScheduler.setWaitForTasksToCompleteOnShutdown(true);\r\n       return threadPoolTaskScheduler;\r\n     }","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>@Matej is right. Some thing like this should do the trick   </p>\n\n<pre><code> @Bean\n  public ThreadPoolTaskScheduler setSchedulerToWait(ThreadPoolTaskScheduler threadPoolTaskScheduler){\n   threadPoolTaskScheduler.setWaitForTasksToCompleteOnShutdown(true);\n   return threadPoolTaskScheduler;\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1120462,"reputation":2781,"user_id":1108890,"accept_rate":48,"display_name":"GokcenG"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1563809290,"creation_date":1563809290,"answer_id":57149240,"question_id":43664259,"body_markdown":"Starting from Spring Boot 2.1.0, you can use this:\r\n\r\n    @Bean\r\n    TaskSchedulerCustomizer taskSchedulerCustomizer() {\r\n        return taskScheduler -&gt; {\r\n            taskScheduler.setAwaitTerminationSeconds(60);\r\n            taskScheduler.setWaitForTasksToCompleteOnShutdown(true);\r\n        };\r\n    }\r\n\r\n`TaskSchedulerCustomizer` will be used to modify configured `ThreadPoolTaskScheduler`\r\n\r\nDetails: \r\n\r\n 1. [ExecutorConfigurationSupport][1]\r\n 2. [TaskSchedulerCustomizer][2]\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ExecutorConfigurationSupport.html#setAwaitTerminationSeconds-int-\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/task/TaskSchedulerCustomizer.html","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>Starting from Spring Boot 2.1.0, you can use this:</p>\n\n<pre><code>@Bean\nTaskSchedulerCustomizer taskSchedulerCustomizer() {\n    return taskScheduler -&gt; {\n        taskScheduler.setAwaitTerminationSeconds(60);\n        taskScheduler.setWaitForTasksToCompleteOnShutdown(true);\n    };\n}\n</code></pre>\n\n<p><code>TaskSchedulerCustomizer</code> will be used to modify configured <code>ThreadPoolTaskScheduler</code></p>\n\n<p>Details: </p>\n\n<ol>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ExecutorConfigurationSupport.html#setAwaitTerminationSeconds-int-\" rel=\"noreferrer\">ExecutorConfigurationSupport</a></li>\n<li><a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/task/TaskSchedulerCustomizer.html\" rel=\"noreferrer\">TaskSchedulerCustomizer</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691588670,"creation_date":1691588670,"answer_id":76868371,"question_id":43664259,"body_markdown":"In later versions of spring boot you can also set these properties via `application.properties`. For example\r\n\r\n```\r\nserver.shutdown=graceful\r\nspring.lifecycle.timeout-per-shutdown-phase=60s\r\nspring.task.execution.shutdown.await-termination=true\r\nspring.task.execution.shutdown.await-termination-period=60s\r\nspring.task.scheduling.shutdown.await-termination=true\r\nspring.task.scheduling.shutdown.await-termination-period=60s\r\n```","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>In later versions of spring boot you can also set these properties via <code>application.properties</code>. For example</p>\n<pre><code>server.shutdown=graceful\nspring.lifecycle.timeout-per-shutdown-phase=60s\nspring.task.execution.shutdown.await-termination=true\nspring.task.execution.shutdown.await-termination-period=60s\nspring.task.scheduling.shutdown.await-termination=true\nspring.task.scheduling.shutdown.await-termination-period=60s\n</code></pre>\n"}],"owner":{"account_id":1613240,"reputation":2365,"user_id":1491636,"accept_rate":46,"display_name":"user1491636"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13963,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":43668082,"answer_count":4,"score":8,"last_activity_date":1691588670,"creation_date":1493313783,"question_id":43664259,"body_markdown":"I have a Spring-Boot application with a bean running a scheduled task at about 1 minute intervals, and this bean has a `@PreDestroy` method. \r\n\r\nIs there a solution for allowing a task which is currently being executed to complete - or at least given some time to complete - before the life cycle reaches the pre-destroy phase? ","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>I have a Spring-Boot application with a bean running a scheduled task at about 1 minute intervals, and this bean has a <code>@PreDestroy</code> method. </p>\n\n<p>Is there a solution for allowing a task which is currently being executed to complete - or at least given some time to complete - before the life cycle reaches the pre-destroy phase? </p>\n"},{"tags":["java","spring","spring-boot","lombok"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":1,"creation_date":1691583409,"post_id":76867601,"comment_id":135510810,"body_markdown":"This might be relevant - [Is there a Lombok way to initialise a final field that is calculated from other fields?](https://stackoverflow.com/questions/47187111/is-there-a-lombok-way-to-initialise-a-final-field-that-is-calculated-from-other). But that will require you to have `CollectorRegistry` as an instance variable.","body":"This might be relevant - <a href=\"https://stackoverflow.com/questions/47187111/is-there-a-lombok-way-to-initialise-a-final-field-that-is-calculated-from-other\">Is there a Lombok way to initialise a final field that is calculated from other fields?</a>. But that will require you to have <code>CollectorRegistry</code> as an instance variable."}],"answers":[{"comments":[{"owner":{"account_id":1854386,"reputation":274,"user_id":2270948,"accept_rate":83,"display_name":"TomDoes"},"score":0,"creation_date":1691589600,"post_id":76868314,"comment_id":135512247,"body_markdown":"Exactly this is what I&#39;ve done, now that I wanted to use the same counter in a different class as well.","body":"Exactly this is what I&#39;ve done, now that I wanted to use the same counter in a different class as well."},{"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"score":0,"creation_date":1691589882,"post_id":76868314,"comment_id":135512309,"body_markdown":"@TomDoes Yes, you kinda went a little behind Spring&#39;s back trying to create your own Counter but that&#39;s ok, it happens :D . When working with Spring, I always think about my college days example...&quot;A Car never produces its own Engine; it&#39;s always installed by the Factory&quot;. Unless you have a specific case, we always want to try to leverage Dependency Injection.","body":"@TomDoes Yes, you kinda went a little behind Spring&#39;s back trying to create your own Counter but that&#39;s ok, it happens :D . When working with Spring, I always think about my college days example...&quot;A Car never produces its own Engine; it&#39;s always installed by the Factory&quot;. Unless you have a specific case, we always want to try to leverage Dependency Injection."}],"tags":[],"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691588217,"creation_date":1691588217,"answer_id":76868314,"question_id":76867601,"body_markdown":"Based on your current design in that `UserController` is a singleton and it has a Counter, why don&#39;t you just make Counter a spring bean as well? That way, you don&#39;t need the special constructor? Something like this..\r\n\r\n```\r\n@Configuration\r\npublic class CounterConfigSample {\r\n\r\n  /* Spring will auto-inject CollectorRegistry here*/\r\n  @Bean\r\n  public Counter registerCount(CollectorRegistry collectorRegistry) {\r\n     return Counter.build()\r\n                .name(&quot;register_count&quot;)\r\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\r\n                .help(&quot;Number of registrations&quot;)\r\n                .register(collectorRegistry);\r\n\r\n   }\r\n\r\n}\r\n```\r\n\r\nThen in your `UserController`\r\n\r\n```\r\n public UpdateUserController(UserService userService, UserDetailsService userDetailsService, Counter registerCount) {\r\n        this.userService = userService;\r\n        this.userDetailsService = userDetailsService;\r\n        this.registerCount = registerCount;\r\n    }","title":"Lombok Constructor annotation with a single custom field initialization","body":"<p>Based on your current design in that <code>UserController</code> is a singleton and it has a Counter, why don't you just make Counter a spring bean as well? That way, you don't need the special constructor? Something like this..</p>\n<pre><code>@Configuration\npublic class CounterConfigSample {\n\n  /* Spring will auto-inject CollectorRegistry here*/\n  @Bean\n  public Counter registerCount(CollectorRegistry collectorRegistry) {\n     return Counter.build()\n                .name(&quot;register_count&quot;)\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\n                .help(&quot;Number of registrations&quot;)\n                .register(collectorRegistry);\n\n   }\n\n}\n</code></pre>\n<p>Then in your <code>UserController</code></p>\n<pre><code> public UpdateUserController(UserService userService, UserDetailsService userDetailsService, Counter registerCount) {\n        this.userService = userService;\n        this.userDetailsService = userDetailsService;\n        this.registerCount = registerCount;\n    }\n</code></pre>\n"}],"owner":{"account_id":1854386,"reputation":274,"user_id":2270948,"accept_rate":83,"display_name":"TomDoes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76868314,"answer_count":1,"score":0,"last_activity_date":1691588217,"creation_date":1691582599,"question_id":76867601,"body_markdown":"I would like to update this sample code by using a lombok annotation. But I struggle to extract the `registerCount` initialization from the constructor, because it depends on the injected `collectorRegistry` bean.\r\n\r\n```Java\r\n@RestController\r\n@RequestMapping(&quot;/api/user&quot;)\r\npublic class UserController {\r\n\r\n    private final UserService userService;\r\n    private final UserDetailsService userDetailsService;\r\n    private final Counter registerCount;\r\n\r\n    public UpdateUserController(UserService userService, UserDetailsService userDetailsService, CollectorRegistry collectorRegistry) {\r\n        this.userService = userService;\r\n        this.userDetailsService = userDetailsService;\r\n        registerCount = Counter.build()\r\n                .name(&quot;register_count&quot;)\r\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\r\n                .help(&quot;Number of registrations&quot;)\r\n                .register(collectorRegistry);\r\n    }\r\n...\r\n```\r\n\r\nIs this possible in Lombok?\r\n\r\n(I understand Lombok is not the holy grail, but I would like to know if this is also possible when using a lombok annotation like `@RequiredArgsConstructor`)","title":"Lombok Constructor annotation with a single custom field initialization","body":"<p>I would like to update this sample code by using a lombok annotation. But I struggle to extract the <code>registerCount</code> initialization from the constructor, because it depends on the injected <code>collectorRegistry</code> bean.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/user&quot;)\npublic class UserController {\n\n    private final UserService userService;\n    private final UserDetailsService userDetailsService;\n    private final Counter registerCount;\n\n    public UpdateUserController(UserService userService, UserDetailsService userDetailsService, CollectorRegistry collectorRegistry) {\n        this.userService = userService;\n        this.userDetailsService = userDetailsService;\n        registerCount = Counter.build()\n                .name(&quot;register_count&quot;)\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\n                .help(&quot;Number of registrations&quot;)\n                .register(collectorRegistry);\n    }\n...\n</code></pre>\n<p>Is this possible in Lombok?</p>\n<p>(I understand Lombok is not the holy grail, but I would like to know if this is also possible when using a lombok annotation like <code>@RequiredArgsConstructor</code>)</p>\n"},{"tags":["java","microservices","keycloak","licensing"],"answers":[{"comments":[{"owner":{"account_id":12875129,"reputation":1,"user_id":9312103,"display_name":"AlexandrGv"},"score":0,"creation_date":1691572144,"post_id":76865672,"comment_id":135508431,"body_markdown":"Oh, sorry, slightly misunderstood the question. Wanna to know how to change the current provider to your own?","body":"Oh, sorry, slightly misunderstood the question. Wanna to know how to change the current provider to your own?"}],"tags":[],"owner":{"account_id":16541357,"reputation":53,"user_id":11952052,"display_name":"Jon"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691588112,"creation_date":1691567576,"answer_id":76865672,"question_id":76865604,"body_markdown":"To override the `JpaUserProvider` with extension, you need to create a custom `SPI` (Service Provider Interface). Use the `UserProvide`r interface to create a custom user provider and override the methods you think you might need.\r\nHere&#39;s an example:\r\n\r\n```Java\r\n public class CustomUserProvider implements UserProvider {\r\n        \r\n        private final EntityManager em;\r\n        \r\n        public CustomUserProvider(EntityManager em) {\r\n            this.em = em;\r\n        }\r\n\r\n        @Override\r\n        public UserModel addUser(RealmModel realm, String username) {\r\n            UserModel user = ... // Add user to your database\r\n            \r\n            // Call your external microservice here\r\n            \r\n            return user;\r\n        }\r\n        \r\n        // Override other methods...\r\n    }\r\n\r\n    public class CustomUserProviderFactory implements UserProviderFactory {\r\n\r\n        @Override\r\n        public UserProvider create(KeycloakSession session) {\r\n            EntityManager em = session.getProvider(JpaConnectionProvider.class).getEntityManager();\r\n            return new CustomUserProvider(em);\r\n        }\r\n        \r\n        // Implement other methods...\r\n    }\r\n```\r\n\r\nNote: You might want to look at [this article](https://medium.com/@bcarunmail/securing-rest-api-using-keycloak-and-spring-oauth2-6ddf3a1efcc2) for more info.","title":"Override Keyclock JpaUserProvider","body":"<p>To override the <code>JpaUserProvider</code> with extension, you need to create a custom <code>SPI</code> (Service Provider Interface). Use the <code>UserProvide</code>r interface to create a custom user provider and override the methods you think you might need.\nHere's an example:</p>\n<pre><code> public class CustomUserProvider implements UserProvider {\n        \n        private final EntityManager em;\n        \n        public CustomUserProvider(EntityManager em) {\n            this.em = em;\n        }\n\n        @Override\n        public UserModel addUser(RealmModel realm, String username) {\n            UserModel user = ... // Add user to your database\n            \n            // Call your external microservice here\n            \n            return user;\n        }\n        \n        // Override other methods...\n    }\n\n    public class CustomUserProviderFactory implements UserProviderFactory {\n\n        @Override\n        public UserProvider create(KeycloakSession session) {\n            EntityManager em = session.getProvider(JpaConnectionProvider.class).getEntityManager();\n            return new CustomUserProvider(em);\n        }\n        \n        // Implement other methods...\n    }\n</code></pre>\n<p>Note: You might want to look at <a href=\"https://medium.com/@bcarunmail/securing-rest-api-using-keycloak-and-spring-oauth2-6ddf3a1efcc2\" rel=\"nofollow noreferrer\">this article</a> for more info.</p>\n"}],"owner":{"account_id":12875129,"reputation":1,"user_id":9312103,"display_name":"AlexandrGv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691588112,"creation_date":1691567077,"question_id":76865604,"body_markdown":"Dose anybody know how overide Keyclock JpaUserProvider using extension?\r\n\r\nHi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. Can anyone know how to do this?","title":"Override Keyclock JpaUserProvider","body":"<p>Dose anybody know how overide Keyclock JpaUserProvider using extension?</p>\n<p>Hi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. Can anyone know how to do this?</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":29191953,"reputation":1,"user_id":22363910,"display_name":"yi deng"},"score":0,"creation_date":1691587994,"post_id":76868257,"comment_id":135511874,"body_markdown":"Ok, there is no way to upload pictures, I want to export these picture data in the picture column in the same size of the cell sorted well, but I exported the pictures are overlapping, the size is not right","body":"Ok, there is no way to upload pictures, I want to export these picture data in the picture column in the same size of the cell sorted well, but I exported the pictures are overlapping, the size is not right"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1691600259,"post_id":76868257,"comment_id":135514696,"body_markdown":"https://stackoverflow.com/questions/33712621/how-put-a-image-in-a-cell-of-excel-java/33721090#33721090","body":"<a href=\"https://stackoverflow.com/questions/33712621/how-put-a-image-in-a-cell-of-excel-java/33721090#33721090\" title=\"how put a image in a cell of excel java\">stackoverflow.com/questions/33712621/&hellip;</a>"}],"owner":{"account_id":29191953,"reputation":1,"user_id":22363910,"display_name":"yi deng"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691587708,"creation_date":1691587708,"question_id":76868257,"body_markdown":"I need to export pictures to excel in this way, what can I use to achieve this, is poi OK or is there a better solution.\r\n\r\n```\r\nprivate static void insertImagesToCell(Workbook workbook, Sheet sheet, Cell cell, String[] imageUrls) {\r\n\r\n        CreationHelper helper = workbook.getCreationHelper();\r\n        Drawing drawing = sheet.createDrawingPatriarch();\r\n\r\n        for (String imageUrl : imageUrls) {\r\n            if (imageUrl != null &amp;&amp; !imageUrl.isEmpty()) {\r\n                byte[] imageBytes = loadImage(imageUrl);\r\n                int pictureIdx = workbook.addPicture(imageBytes, Workbook.PICTURE_TYPE_JPEG);\r\n                imageBytes = null; // Clear the byte array\r\n\r\n                ClientAnchor anchor = helper.createClientAnchor();\r\n                anchor.setCol1(cell.getColumnIndex());\r\n                anchor.setRow1(cell.getRowIndex());\r\n//                anchor.setAnchorType(ClientAnchor.AnchorType.DONT_MOVE_AND_RESIZE);\r\n                Picture picture = drawing.createPicture(anchor, pictureIdx);\r\n                picture.resize(0.7874,0.7874); // Resize the picture as needed\r\n            }\r\n        }\r\n    }\r\n```\r\nI inserted the picture data into the cell this way, but the pictures kept overlapping and the picture size was strange\r\n","title":"How to export picture data fields to excel cells using java","body":"<p>I need to export pictures to excel in this way, what can I use to achieve this, is poi OK or is there a better solution.</p>\n<pre><code>private static void insertImagesToCell(Workbook workbook, Sheet sheet, Cell cell, String[] imageUrls) {\n\n        CreationHelper helper = workbook.getCreationHelper();\n        Drawing drawing = sheet.createDrawingPatriarch();\n\n        for (String imageUrl : imageUrls) {\n            if (imageUrl != null &amp;&amp; !imageUrl.isEmpty()) {\n                byte[] imageBytes = loadImage(imageUrl);\n                int pictureIdx = workbook.addPicture(imageBytes, Workbook.PICTURE_TYPE_JPEG);\n                imageBytes = null; // Clear the byte array\n\n                ClientAnchor anchor = helper.createClientAnchor();\n                anchor.setCol1(cell.getColumnIndex());\n                anchor.setRow1(cell.getRowIndex());\n//                anchor.setAnchorType(ClientAnchor.AnchorType.DONT_MOVE_AND_RESIZE);\n                Picture picture = drawing.createPicture(anchor, pictureIdx);\n                picture.resize(0.7874,0.7874); // Resize the picture as needed\n            }\n        }\n    }\n</code></pre>\n<p>I inserted the picture data into the cell this way, but the pictures kept overlapping and the picture size was strange</p>\n"},{"tags":["java","android","kotlin","audiorecord","android-audiorecord"],"comments":[{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1691579719,"post_id":76866990,"comment_id":135510006,"body_markdown":"So what is the actual value you&#39;re getting? I&#39;m asking because the documentation lists 4 different errors you could get from `read`, but you only check for 2 of them. The version of `read` that you&#39;re calling is supposed to be blocking (i.e shouldn&#39;t return until all requested data has been read or an error occurs).","body":"So what is the actual value you&#39;re getting? I&#39;m asking because the documentation lists 4 different errors you could get from <code>read</code>, but you only check for 2 of them. The version of <code>read</code> that you&#39;re calling is supposed to be blocking (i.e shouldn&#39;t return until all requested data has been read or an error occurs)."},{"owner":{"account_id":11782607,"reputation":519,"user_id":8621574,"display_name":"flamyoad"},"score":0,"creation_date":1691585155,"post_id":76866990,"comment_id":135511197,"body_markdown":"@Michael I&#39;m calling the method inside a thread. Yeah I&#39;m going to add the checks for other errors too.","body":"@Michael I&#39;m calling the method inside a thread. Yeah I&#39;m going to add the checks for other errors too."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691587158,"creation_date":1691579711,"answer_id":76867237,"question_id":76866990,"body_markdown":"Yes.  It is safe to continue.\r\n\r\nThe javadoc for that method says:\r\n\r\n&gt; Returns: zero or the positive number of bytes that were read, or one of the following error codes. The number of bytes will not exceed `sizeInBytes`. \r\n&gt; \r\n&gt; `ERROR_INVALID_OPERATION` if the object isn&#39;t properly initialized\r\n&gt;\r\n&gt; `ERROR_BAD_VALUE` if the parameters don&#39;t resolve to valid data and indexes\r\n&gt;\r\n&gt; `ERROR_DEAD_OBJECT` if the object is not valid anymore and needs to be recreated. The dead object error code is not returned if some data was successfully transferred. In this case, the error is returned at the next read()\r\n&gt;\r\n&gt; `ERROR` in case of other error\r\n\r\n\r\nIn your example, I can think of two scenarios where the result will be greater than zero and less than `audioRecordData.size`.\r\n\r\n  1.  You are close to the end of an audio file, and there aren&#39;t enough unread bytes left to fill the buffer you provided.\r\n\r\n  2.  You are reading an audio stream from a device or a remote source in &quot;real time&quot; ... and the `read` is delivering all of the audio bytes available right now.\r\n\r\nBasically, your application needs to act appropriately when `read` returns fewer bytes than you asked for.\r\n\r\nFor what it is worth, the `ERROR*` values are all less than zero, so the correct interpretation of the result is:\r\n\r\n - `result &lt; 0` - an error as indicated by the error code\r\n - `result == 0` - end of stream\r\n - `result &gt; 0` - a successful read ... and the result value is the number of bytes (or shorts) read into the supplied array or `ByteBuffer`.","title":"AudioRecord read() does not return same amount of bytes as requested in sizeInBytes","body":"<p>Yes.  It is safe to continue.</p>\n<p>The javadoc for that method says:</p>\n<blockquote>\n<p>Returns: zero or the positive number of bytes that were read, or one of the following error codes. The number of bytes will not exceed <code>sizeInBytes</code>.</p>\n<p><code>ERROR_INVALID_OPERATION</code> if the object isn't properly initialized</p>\n<p><code>ERROR_BAD_VALUE</code> if the parameters don't resolve to valid data and indexes</p>\n<p><code>ERROR_DEAD_OBJECT</code> if the object is not valid anymore and needs to be recreated. The dead object error code is not returned if some data was successfully transferred. In this case, the error is returned at the next read()</p>\n<p><code>ERROR</code> in case of other error</p>\n</blockquote>\n<p>In your example, I can think of two scenarios where the result will be greater than zero and less than <code>audioRecordData.size</code>.</p>\n<ol>\n<li><p>You are close to the end of an audio file, and there aren't enough unread bytes left to fill the buffer you provided.</p>\n</li>\n<li><p>You are reading an audio stream from a device or a remote source in &quot;real time&quot; ... and the <code>read</code> is delivering all of the audio bytes available right now.</p>\n</li>\n</ol>\n<p>Basically, your application needs to act appropriately when <code>read</code> returns fewer bytes than you asked for.</p>\n<p>For what it is worth, the <code>ERROR*</code> values are all less than zero, so the correct interpretation of the result is:</p>\n<ul>\n<li><code>result &lt; 0</code> - an error as indicated by the error code</li>\n<li><code>result == 0</code> - end of stream</li>\n<li><code>result &gt; 0</code> - a successful read ... and the result value is the number of bytes (or shorts) read into the supplied array or <code>ByteBuffer</code>.</li>\n</ul>\n"}],"owner":{"account_id":11782607,"reputation":519,"user_id":8621574,"display_name":"flamyoad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691587158,"creation_date":1691577800,"question_id":76866990,"body_markdown":"I have built voice recording feature in my app and have launched it in production for few months. From error logs, I have found that sometimes, the `read()` method in `AudioRecord` will return different number of bytes than indicated in `sizeInBytes` argument.\r\n```\r\npublic int read(byte[] audioData, int offsetInBytes, int sizeInBytes)\r\n```\r\n\r\nBelow is the code snippet to help understand better.\r\n```\r\nval audioRecordData = ByteArray(bufferSize)\r\nval length = audioRecord.read(audioRecordData, 0, audioRecordData.size)\r\nif (length == AudioRecord.ERROR_BAD_VALUE || length == AudioRecord.ERROR_INVALID_OPERATION || length != audioRecordData.size) {\r\n    // Quitting because Audio record encountered fatal exception\r\n    throw RuntimeException()\r\n}\r\n``` \r\n\r\nQuestion: Is it safe to continue calling `read()` even though the number of bytes returned by `audioRecord.read()` is not equal to the `sizeInBytes`? ","title":"AudioRecord read() does not return same amount of bytes as requested in sizeInBytes","body":"<p>I have built voice recording feature in my app and have launched it in production for few months. From error logs, I have found that sometimes, the <code>read()</code> method in <code>AudioRecord</code> will return different number of bytes than indicated in <code>sizeInBytes</code> argument.</p>\n<pre><code>public int read(byte[] audioData, int offsetInBytes, int sizeInBytes)\n</code></pre>\n<p>Below is the code snippet to help understand better.</p>\n<pre><code>val audioRecordData = ByteArray(bufferSize)\nval length = audioRecord.read(audioRecordData, 0, audioRecordData.size)\nif (length == AudioRecord.ERROR_BAD_VALUE || length == AudioRecord.ERROR_INVALID_OPERATION || length != audioRecordData.size) {\n    // Quitting because Audio record encountered fatal exception\n    throw RuntimeException()\n}\n</code></pre>\n<p>Question: Is it safe to continue calling <code>read()</code> even though the number of bytes returned by <code>audioRecord.read()</code> is not equal to the <code>sizeInBytes</code>?</p>\n"},{"tags":["java","mybatis","spring-mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":1,"creation_date":1691563186,"post_id":76862189,"comment_id":135506750,"body_markdown":"As the PK is specified, the query against `t1` would return only one `Pojo1`, but you seem to expect two `Pojo1`s. Do you repeat the query for each row of `t1`? Or, are you trying to join two separate result sets like [this test](https://github.com/mybatis/mybatis-3/blob/621de2602b7d6bc1ba65237b26409ebeb086c45a/src/test/java/org/apache/ibatis/submitted/sptests/SPTest.java#L692-L704)?","body":"As the PK is specified, the query against <code>t1</code> would return only one <code>Pojo1</code>, but you seem to expect two <code>Pojo1</code>s. Do you repeat the query for each row of <code>t1</code>? Or, are you trying to join two separate result sets like <a href=\"https://github.com/mybatis/mybatis-3/blob/621de2602b7d6bc1ba65237b26409ebeb086c45a/src/test/java/org/apache/ibatis/submitted/sptests/SPTest.java#L692-L704\" rel=\"nofollow noreferrer\">this test</a>?"},{"owner":{"account_id":3630600,"reputation":5980,"user_id":3026886,"accept_rate":93,"display_name":"rado"},"score":0,"creation_date":1691586914,"post_id":76862189,"comment_id":135511586,"body_markdown":"your observation is correct, i don&#39;t expect two `Pojo1`s. i&#39;ll update the question","body":"your observation is correct, i don&#39;t expect two <code>Pojo1</code>s. i&#39;ll update the question"},{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1691594441,"post_id":76862189,"comment_id":135513411,"body_markdown":"I see. Then you just need to 1) add `pk` to the column list of `select1` and 2) replace `column=&quot;dontKnowWhatToPutHere&quot;` with `column=&quot;pk&quot;`. The value of `pk` is passed to the nested `select2` query as the sole parameter. This is explained as &quot;nested select&quot; in the [doc](https://mybatis.org/mybatis-3/sqlmap-xml.html#nested-select-for-collection). BTW, you should use `#{key1}` instead of `${key1}` (see the [FAQ](https://github.com/mybatis/mybatis-3/wiki/FAQ#what-is-the-difference-between--and-)).","body":"I see. Then you just need to 1) add <code>pk</code> to the column list of <code>select1</code> and 2) replace <code>column=&quot;dontKnowWhatToPutHere&quot;</code> with <code>column=&quot;pk&quot;</code>. The value of <code>pk</code> is passed to the nested <code>select2</code> query as the sole parameter. This is explained as &quot;nested select&quot; in the <a href=\"https://mybatis.org/mybatis-3/sqlmap-xml.html#nested-select-for-collection\" rel=\"nofollow noreferrer\">doc</a>. BTW, you should use <code>#{key1}</code> instead of <code>${key1}</code> (see the <a href=\"https://github.com/mybatis/mybatis-3/wiki/FAQ#what-is-the-difference-between--and-\" rel=\"nofollow noreferrer\">FAQ</a>)."}],"owner":{"account_id":3630600,"reputation":5980,"user_id":3026886,"accept_rate":93,"display_name":"rado"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691586999,"creation_date":1691518286,"question_id":76862189,"body_markdown":"i have the following data (which were simplified for the purpose of this question):\r\n```\r\nt1\r\npk | a     | b   | c     | other1\r\n1  | text1 | 123 | text3 | otherValues1\r\n2  | text2 | 456 | text4 | otherValues2\r\n\r\nt2\r\npk | fk | d     | e  | other2\r\n1  | 1  | text5 | 10 | otherValues3\r\n2  | 1  | text6 | 20 | otherValues4 \r\n3  | 1  | text7 | 30 | otherValues5\r\n4  | 2  | text8 | 40 | otherValues6\r\n```\r\n\r\nwith these pojos:\r\n```\r\n@Data\r\npublic class Pojo1 {\r\n  private String p11;\r\n  private Integer p12;\r\n  private String p13;\r\n  private List&lt;Pojo2&gt; list;\r\n}\r\n\r\n@Data\r\npublic class Pojo2 {\r\n  private String p21;\r\n  private Integer p22;\r\n}\r\n```\r\ni want an output like this:\r\n```\r\n{\r\n  &quot;p11&quot;: &quot;text1&quot;,\r\n  &quot;p12&quot;: 123,\r\n  &quot;p13&quot;: &quot;text3&quot;,\r\n  &quot;list&quot;: [ \r\n            {&quot;p21&quot;:&quot;text5&quot;,&quot;p22&quot;:10},\r\n            {&quot;p21&quot;:&quot;text6&quot;,&quot;p22&quot;:20},\r\n            {&quot;p21&quot;:&quot;text7&quot;,&quot;p22&quot;:30}\r\n          ]\r\n}\r\n\r\n```\r\nunfortunately i&#39;m restriced to use this naming convention (response attributes are named differently than columns) and i have to use these 2 queries separately:\r\n```\r\nselect a, b, c, other1 from table t1 where t1.pk = ${key1}\r\n\r\nselect d, e, other2 from table t2 where t2.fk = ${key1}\r\n```\r\nthese queries are way bigger and more complex with a huge where clause not related to problem. the issue is: they cannot be joined directly and should be executed separately.\r\n\r\nthis is my mapper file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;\r\n&lt;mapper namespace=&quot;something.MyMapper&quot;&gt;\r\n\r\n    &lt;resultMap id=&quot;map1&quot; type=&quot;Pojo1&quot;&gt;\r\n        &lt;result column=&quot;a&quot; property=&quot;p11&quot;/&gt;\r\n        &lt;result column=&quot;b&quot; property=&quot;p12&quot;/&gt;\r\n        &lt;result column=&quot;c&quot; property=&quot;p13&quot;/&gt;\r\n        &lt;collection property=&quot;list&quot; column=&quot;dontKnowWhatToPutHere&quot; ofType=&quot;Pojo2&quot; select=&quot;select2&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;select id=&quot;select1&quot; resultMap=&quot;map1&quot;&gt;\r\n        select a, b, c, other1 from table t1 where t1.pk = ${key1}\r\n    &lt;/select&gt;\r\n\r\n    &lt;resultMap id=&quot;map2&quot; type=&quot;Pojo2&quot;&gt;\r\n        &lt;result column=&quot;d&quot; property=&quot;p21&quot;/&gt;\r\n        &lt;result column=&quot;e&quot; property=&quot;p22&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;select id=&quot;select2&quot; resultMap=&quot;map2&quot;&gt;\r\n        select d, e, other2 from table t2 where t2.fk = ${key1}\r\n    &lt;/select&gt;\r\n\r\n&lt;/mapper&gt;\r\n```\r\n\r\nbut this is giving me an answer like this:\r\n```\r\n{\r\n  &quot;p11&quot;: &quot;text1&quot;,\r\n  &quot;p12&quot;: 123,\r\n  &quot;p13&quot;: &quot;text3&quot;,\r\n  &quot;list&quot;: null\r\n}\r\n```\r\n\r\nlooking [here](https://stackoverflow.com/a/53104888/3026886) made me realize i should create a fake hard coded column at `map1` to force the relationship (btw this worked). is this the only option considering my restrictions?","title":"how to use mybatis collection property when tables don&#39;t have direct relationship?","body":"<p>i have the following data (which were simplified for the purpose of this question):</p>\n<pre><code>t1\npk | a     | b   | c     | other1\n1  | text1 | 123 | text3 | otherValues1\n2  | text2 | 456 | text4 | otherValues2\n\nt2\npk | fk | d     | e  | other2\n1  | 1  | text5 | 10 | otherValues3\n2  | 1  | text6 | 20 | otherValues4 \n3  | 1  | text7 | 30 | otherValues5\n4  | 2  | text8 | 40 | otherValues6\n</code></pre>\n<p>with these pojos:</p>\n<pre><code>@Data\npublic class Pojo1 {\n  private String p11;\n  private Integer p12;\n  private String p13;\n  private List&lt;Pojo2&gt; list;\n}\n\n@Data\npublic class Pojo2 {\n  private String p21;\n  private Integer p22;\n}\n</code></pre>\n<p>i want an output like this:</p>\n<pre><code>{\n  &quot;p11&quot;: &quot;text1&quot;,\n  &quot;p12&quot;: 123,\n  &quot;p13&quot;: &quot;text3&quot;,\n  &quot;list&quot;: [ \n            {&quot;p21&quot;:&quot;text5&quot;,&quot;p22&quot;:10},\n            {&quot;p21&quot;:&quot;text6&quot;,&quot;p22&quot;:20},\n            {&quot;p21&quot;:&quot;text7&quot;,&quot;p22&quot;:30}\n          ]\n}\n\n</code></pre>\n<p>unfortunately i'm restriced to use this naming convention (response attributes are named differently than columns) and i have to use these 2 queries separately:</p>\n<pre><code>select a, b, c, other1 from table t1 where t1.pk = ${key1}\n\nselect d, e, other2 from table t2 where t2.fk = ${key1}\n</code></pre>\n<p>these queries are way bigger and more complex with a huge where clause not related to problem. the issue is: they cannot be joined directly and should be executed separately.</p>\n<p>this is my mapper file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;\n&lt;mapper namespace=&quot;something.MyMapper&quot;&gt;\n\n    &lt;resultMap id=&quot;map1&quot; type=&quot;Pojo1&quot;&gt;\n        &lt;result column=&quot;a&quot; property=&quot;p11&quot;/&gt;\n        &lt;result column=&quot;b&quot; property=&quot;p12&quot;/&gt;\n        &lt;result column=&quot;c&quot; property=&quot;p13&quot;/&gt;\n        &lt;collection property=&quot;list&quot; column=&quot;dontKnowWhatToPutHere&quot; ofType=&quot;Pojo2&quot; select=&quot;select2&quot;/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=&quot;select1&quot; resultMap=&quot;map1&quot;&gt;\n        select a, b, c, other1 from table t1 where t1.pk = ${key1}\n    &lt;/select&gt;\n\n    &lt;resultMap id=&quot;map2&quot; type=&quot;Pojo2&quot;&gt;\n        &lt;result column=&quot;d&quot; property=&quot;p21&quot;/&gt;\n        &lt;result column=&quot;e&quot; property=&quot;p22&quot;/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=&quot;select2&quot; resultMap=&quot;map2&quot;&gt;\n        select d, e, other2 from table t2 where t2.fk = ${key1}\n    &lt;/select&gt;\n\n&lt;/mapper&gt;\n</code></pre>\n<p>but this is giving me an answer like this:</p>\n<pre><code>{\n  &quot;p11&quot;: &quot;text1&quot;,\n  &quot;p12&quot;: 123,\n  &quot;p13&quot;: &quot;text3&quot;,\n  &quot;list&quot;: null\n}\n</code></pre>\n<p>looking <a href=\"https://stackoverflow.com/a/53104888/3026886\">here</a> made me realize i should create a fake hard coded column at <code>map1</code> to force the relationship (btw this worked). is this the only option considering my restrictions?</p>\n"},{"tags":["java","callable"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691455059,"post_id":76855769,"comment_id":135491062,"body_markdown":"`createCSV` will be called immediately `invokeAll` returns. As long as you call `get` on the `Future`s, that will wait until the result is available. Please explain exactly what the problem is. Add ing the code of `createCSV` would help.","body":"<code>createCSV</code> will be called immediately <code>invokeAll</code> returns. As long as you call <code>get</code> on the <code>Future</code>s, that will wait until the result is available. Please explain exactly what the problem is. Add ing the code of <code>createCSV</code> would help."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1691456724,"post_id":76855769,"comment_id":135491175,"body_markdown":"[`invokeAll`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection)) is defined to return only once every task has completed (normally or exceptionally). And you have to call [`get`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Future.html#get()) on each future anyway to get the result (or error), which is also defined to wait until the task is complete. I would guess you have improperly synchronized code in the tasks themselves. Please provide a [mre].","body":"<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>invokeAll</code></a> is defined to return only once every task has completed (normally or exceptionally). And you have to call <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Future.html#get()\" rel=\"nofollow noreferrer\"><code>get</code></a> on each future anyway to get the result (or error), which is also defined to wait until the task is complete. I would guess you have improperly synchronized code in the tasks themselves. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1691463618,"post_id":76855769,"comment_id":135491665,"body_markdown":"What behaviour leads you to conclude that `calculateRows` *hasn&#39;t* finished running?","body":"What behaviour leads you to conclude that <code>calculateRows</code> <i>hasn&#39;t</i> finished running?"},{"owner":{"account_id":28973632,"reputation":1,"user_id":22193295,"display_name":"PondleDondle"},"score":0,"creation_date":1691464694,"post_id":76855769,"comment_id":135491752,"body_markdown":"I receive the following error java.util.concurrent.ExecutionException: java.util.NoSuchElementException a number of times equal to the number of times that my calculateRows did not run. I placed a println at the begining of calculateRows and counted the missing runs.","body":"I receive the following error java.util.concurrent.ExecutionException: java.util.NoSuchElementException a number of times equal to the number of times that my calculateRows did not run. I placed a println at the begining of calculateRows and counted the missing runs."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1691541874,"post_id":76855769,"comment_id":135504789,"body_markdown":"Then your problem isn&#39;t that the code continues without waiting for the tasks to complete. An `ExecutionException` means the task completed, but exceptionally. The underlying error is a `NoSuchElementException`; you should look at whatever line of code **in the task** that is throwing that error and figure out why. If you don&#39;t know how to determine which line is throwing that error, then I suggest reading [What is a stack trace, and how can I use it to debug my application errors?](https://stackoverflow.com/q/3988788/6395627). And if you need more help, please provide a [mre].","body":"Then your problem isn&#39;t that the code continues without waiting for the tasks to complete. An <code>ExecutionException</code> means the task completed, but exceptionally. The underlying error is a <code>NoSuchElementException</code>; you should look at whatever line of code <b>in the task</b> that is throwing that error and figure out why. If you don&#39;t know how to determine which line is throwing that error, then I suggest reading <a href=\"https://stackoverflow.com/q/3988788/6395627\">What is a stack trace, and how can I use it to debug my application errors?</a>. And if you need more help, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":28973632,"reputation":1,"user_id":22193295,"display_name":"PondleDondle"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691586283,"creation_date":1691452558,"question_id":76855769,"body_markdown":"I have a method that is called with multi threading and runs to around 99% completion. At this point it runs the next method which needs the first method to of finished running before attempting as it takes data created from that and places it into a file.\r\n\r\n\r\n```\r\npublic static void main(String[] args)\r\n    {\r\n        final int MAX_THREADS = 2;\r\n        ExecutorService executor = Executors.newFixedThreadPool(MAX_THREADS);\r\n        \r\n        List&lt;String&gt; row = new ArrayList&lt;&gt;();\r\n        \r\n        for (int a : listA)\r\n        {\r\n            for (double b : listB)\r\n            {\r\n                for (int c : listC)\r\n                {\r\n                    for (int d : listD)\r\n                    {\r\n                        for (int e : listE)\r\n                        {\r\n                            for (int f : listF)\r\n                            {\r\n                                for (double g : listG)\r\n                                {\r\n                                    for (double h : listH)\r\n                                    {\r\n                                        for (double i : listI)\r\n                                        {\r\n                                            if (i &lt; h) \r\n                                            {\r\n                                                try\r\n\t\t\t\t\t\t\t\t                {\r\n\t\t                                            Callable&lt;RowEarnings&gt; task = () -&gt; calculateRows(&quot;C://CSV&quot;, a, b, c, d, e, f, g, h, i);\r\n\t\t                                            tasks.add(task);\r\n\t\t                                        }\r\n\t\t\t\t\t\t\t\t                catch (Exception e)\r\n\t\t\t\t\t\t\t\t                {\r\n\t\t                                            System.out.println(&quot;Error Message&quot;);\r\n\t\t                                            e.printStackTrace();\r\n\t\t                                        }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\t\t\t\ttry {\r\n\t\t\t\t\tList&lt;Future&lt;RowEarnings&gt;&gt; results = executor.invokeAll(tasks);\r\n\t\t\t        createCSV(directory, results, a, b);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (InterruptedException e)\r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;Error while invoking tasks.&quot;);\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        executor.shutdown();\r\n\t\ttry\r\n\t\t{\r\n\t\t    while (!executor.isTerminated())\r\n\t\t    {\r\n\t\t    }\r\n\t\t    System.out.println(&quot;TEST COMPLETE&quot;);\r\n\t\t}\r\n\t\tcatch (Exception e)\r\n\t\t{\r\n\t\t    System.out.println(&quot;Thread execution interrupted.&quot;);\r\n\t\t    Thread.currentThread().interrupt();\r\n\t\t}\r\n    }\r\n```\r\n\r\n\r\nHow can I stop it running createCSV until all the calculateRows has finished running for that for loop? It seems to be that calculateRows is taking too long and it just tries to run createCSV as it thinks its finished.\r\n\r\nEdit:\r\n\r\nAdding createCSV code:\r\n```\r\npublic static void createCSV(String directory, List&lt;Future&lt;RowEarnings&gt;&gt; futures, int a, double b)\r\n\t{\r\n\t\tList&lt;RowEarnings&gt; rowComplete = new ArrayList&lt;&gt;();\r\n\t    for (Future&lt;RowEarnings&gt; future : futures)\r\n\t    {\r\n\t        try\r\n\t        {\r\n\t        \tRowEarnings rowEarnings = future.get();\r\n\t            if (rowEarnings != null)\r\n\t            {\r\n\t                rowComplete.add(rowEarnings);\r\n\t            }\r\n\t        }\r\n\t        catch (Exception e)\r\n\t        {\r\n\t        \tSystem.out.println(&quot;Error retrieving task result.&quot;);\r\n\t            e.printStackTrace();\r\n\t            Throwable cause = e.getCause();\r\n\t            if (cause != null)\r\n\t            {\r\n\t                System.out.println(&quot;Cause of the exception:&quot;);\r\n\t                cause.printStackTrace();\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t\tStringBuilder outputCSVFilePath = new StringBuilder(directory);\r\n\t\toutputCSVFilePath.append(Main.resultFolder).append(a).append(&quot;_&quot;).append(b).append(&quot;.csv&quot;);\r\n\t\tSystem.out.println(outputCSVFilePath);\r\n\t\ttry\r\n\t\t{\r\n\t\t\tCSVEditor.createCSVFile(outputCSVFilePath.toString(), rowComplete, RowEarnings::mapToStringArray);\r\n\t\t\tSystem.out.println(&quot;Complete&quot;);\r\n\t\t}\r\n\t\tcatch(IOException e)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;BROKE AINT IT&quot;);\r\n\t\t}\r\n\t}\r\n```\r\n\r\nEssentially calculateRows should run a few thousand times for each running of createCSV, each time calculateRows runs it sends out a row of the csv and so forth. Sometimes there can be a couple million rows being sent to each createCSV.","title":"Java Callable Attempts to Complete Prematurely","body":"<p>I have a method that is called with multi threading and runs to around 99% completion. At this point it runs the next method which needs the first method to of finished running before attempting as it takes data created from that and places it into a file.</p>\n<pre><code>public static void main(String[] args)\n    {\n        final int MAX_THREADS = 2;\n        ExecutorService executor = Executors.newFixedThreadPool(MAX_THREADS);\n        \n        List&lt;String&gt; row = new ArrayList&lt;&gt;();\n        \n        for (int a : listA)\n        {\n            for (double b : listB)\n            {\n                for (int c : listC)\n                {\n                    for (int d : listD)\n                    {\n                        for (int e : listE)\n                        {\n                            for (int f : listF)\n                            {\n                                for (double g : listG)\n                                {\n                                    for (double h : listH)\n                                    {\n                                        for (double i : listI)\n                                        {\n                                            if (i &lt; h) \n                                            {\n                                                try\n                                                {\n                                                    Callable&lt;RowEarnings&gt; task = () -&gt; calculateRows(&quot;C://CSV&quot;, a, b, c, d, e, f, g, h, i);\n                                                    tasks.add(task);\n                                                }\n                                                catch (Exception e)\n                                                {\n                                                    System.out.println(&quot;Error Message&quot;);\n                                                    e.printStackTrace();\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                try {\n                    List&lt;Future&lt;RowEarnings&gt;&gt; results = executor.invokeAll(tasks);\n                    createCSV(directory, results, a, b);\n                }\n                catch (InterruptedException e)\n                {\n                    System.out.println(&quot;Error while invoking tasks.&quot;);\n                    e.printStackTrace();\n                }\n            }\n        }\n        executor.shutdown();\n        try\n        {\n            while (!executor.isTerminated())\n            {\n            }\n            System.out.println(&quot;TEST COMPLETE&quot;);\n        }\n        catch (Exception e)\n        {\n            System.out.println(&quot;Thread execution interrupted.&quot;);\n            Thread.currentThread().interrupt();\n        }\n    }\n</code></pre>\n<p>How can I stop it running createCSV until all the calculateRows has finished running for that for loop? It seems to be that calculateRows is taking too long and it just tries to run createCSV as it thinks its finished.</p>\n<p>Edit:</p>\n<p>Adding createCSV code:</p>\n<pre><code>public static void createCSV(String directory, List&lt;Future&lt;RowEarnings&gt;&gt; futures, int a, double b)\n    {\n        List&lt;RowEarnings&gt; rowComplete = new ArrayList&lt;&gt;();\n        for (Future&lt;RowEarnings&gt; future : futures)\n        {\n            try\n            {\n                RowEarnings rowEarnings = future.get();\n                if (rowEarnings != null)\n                {\n                    rowComplete.add(rowEarnings);\n                }\n            }\n            catch (Exception e)\n            {\n                System.out.println(&quot;Error retrieving task result.&quot;);\n                e.printStackTrace();\n                Throwable cause = e.getCause();\n                if (cause != null)\n                {\n                    System.out.println(&quot;Cause of the exception:&quot;);\n                    cause.printStackTrace();\n                }\n            }\n        }\n        StringBuilder outputCSVFilePath = new StringBuilder(directory);\n        outputCSVFilePath.append(Main.resultFolder).append(a).append(&quot;_&quot;).append(b).append(&quot;.csv&quot;);\n        System.out.println(outputCSVFilePath);\n        try\n        {\n            CSVEditor.createCSVFile(outputCSVFilePath.toString(), rowComplete, RowEarnings::mapToStringArray);\n            System.out.println(&quot;Complete&quot;);\n        }\n        catch(IOException e)\n        {\n            System.out.println(&quot;BROKE AINT IT&quot;);\n        }\n    }\n</code></pre>\n<p>Essentially calculateRows should run a few thousand times for each running of createCSV, each time calculateRows runs it sends out a row of the csv and so forth. Sometimes there can be a couple million rows being sent to each createCSV.</p>\n"},{"tags":["java","spring-boot","mapping","modelmapper"],"answers":[{"tags":[],"owner":{"account_id":18669557,"reputation":640,"user_id":13608717,"display_name":"Daniel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678739362,"creation_date":1678739362,"answer_id":75726630,"question_id":75723047,"body_markdown":"Both ModelMapper objects can be defined as Spring beans - mark one of them with @Primary annotation and inject second one by its qualifier where needed.\r\n\r\nThis would help to use 1 mapper as-is - and second can also be used in other classes with use of @Qualifier","title":"Model mapper sharing or creating new modelMapper per mapper instance","body":"<p>Both ModelMapper objects can be defined as Spring beans - mark one of them with @Primary annotation and inject second one by its qualifier where needed.</p>\n<p>This would help to use 1 mapper as-is - and second can also be used in other classes with use of @Qualifier</p>\n"},{"tags":[],"owner":{"account_id":19090913,"reputation":491,"user_id":13941207,"display_name":"EACUAMBA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691586093,"creation_date":1691586093,"answer_id":76868053,"question_id":75723047,"body_markdown":"Yes modelMapper instance can be shared, but if you have differents typeMap mapping the same class to another the same class you need to create new modelMapper or remove the old typeMap and set the new typeMap.\r\n\r\nI usually share the same modelMapper instance, but in the mapper i use the  method annotated with @PostConstruct to build the typeMap with all the property mappings one time in the lifecycle of this mapper.\r\n\r\n```java\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class ObjectMapper{\r\n\r\n   private final ModelMapper modelMapper;\r\n\r\n   @PostConstruct \r\n   public void postConstructor() {\r\n      // here put your typeMap and propertyMappings\r\n\r\n      this.modelMapper.createTypeMap(ObjectDTORequest.class, ObjectEntity.class)\r\n        .implicitMappings()\r\n        .addMappings(mapping -&gt; mapping.map(dto::getProperty, entity::setProperty));\r\n   }\r\n\r\n   public Objectentity mapTo(ObjectDtoRequest objDtoRequest){\r\n      //your mp logic.\r\n   }\r\n}\r\n```\r\n\r\nSo I can use the same Mapper to map a lot of requests without worry about errors.","title":"Model mapper sharing or creating new modelMapper per mapper instance","body":"<p>Yes modelMapper instance can be shared, but if you have differents typeMap mapping the same class to another the same class you need to create new modelMapper or remove the old typeMap and set the new typeMap.</p>\n<p>I usually share the same modelMapper instance, but in the mapper i use the  method annotated with @PostConstruct to build the typeMap with all the property mappings one time in the lifecycle of this mapper.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@RequiredArgsConstructor\npublic class ObjectMapper{\n\n   private final ModelMapper modelMapper;\n\n   @PostConstruct \n   public void postConstructor() {\n      // here put your typeMap and propertyMappings\n\n      this.modelMapper.createTypeMap(ObjectDTORequest.class, ObjectEntity.class)\n        .implicitMappings()\n        .addMappings(mapping -&gt; mapping.map(dto::getProperty, entity::setProperty));\n   }\n\n   public Objectentity mapTo(ObjectDtoRequest objDtoRequest){\n      //your mp logic.\n   }\n}\n</code></pre>\n<p>So I can use the same Mapper to map a lot of requests without worry about errors.</p>\n"}],"owner":{"account_id":8796452,"reputation":440,"user_id":6574204,"accept_rate":33,"display_name":"fbm fatma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":423,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691586093,"creation_date":1678716808,"question_id":75723047,"body_markdown":"I am creating an application using spring boot as framework and using model mapper for mapping objects between diffrent app is layers.\r\nIn my application i have many mappers to which i am actually usnig the same modelMapper which is instantiate as @config bean but the problem with this is sometimes the configs between mappers is entring in conlict.\r\n\r\nExample for mapper1 i want to add a converter for dates which i don&#39;t want to use for mapper2.\r\nSo what shall i do?  i am thinking about a mapper like that (code bellow ) but the problem with that is memory as i will instantiate a new ModelMapper for each mapper\r\n\r\n    @Slf4j\r\n    @Setter\r\n    @Component\r\n    public class CarMapper{\r\n    \r\n      private ModelMapper mapper;\r\n    \r\n    \r\n      @PostConstruct\r\n      public void configure(){\r\n         mapper = new ModelMapper();\r\n        configureMapperToIgnoreNullValues();\r\n        mapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT);\r\n        mapper.getConfiguration().setFieldAccessLevel(Configuration.AccessLevel.PRIVATE);\r\n        addFromStringToDateConverterToMapper();\r\n        addFromDateToStringConverterToMapper();\r\n        addPropertyMapForCarDto();\r\n        log.debug(&quot;Mapper configured&quot;);\r\n      }\r\n    \r\n    protected toCarDto(Car car){\r\n    // mapping code here\r\n    }\r\n    \r\n     public void addPropertyMapForCarDto() {\r\n        // check if a type map exist for Car, CarDto\r\n        if (mapper.getTypeMap(Car.class, CarDto.class) == null) {\r\n    \r\n          TypeMap&lt;Car, CarDto&gt; propertyMapper = mapper.createTypeMap(\r\n              Car.class, CarDto.class);\r\n          propertyMapper.addMappings(\r\n              addedMapper -&gt; addedMapper.map(Car::getId,\r\n                 CarDto::setId));\r\n          log.debug(&quot;Property mapping for CarDto added to mapper&quot;);\r\n      }\r\n    }\r\n    }\r\n\r\n","title":"Model mapper sharing or creating new modelMapper per mapper instance","body":"<p>I am creating an application using spring boot as framework and using model mapper for mapping objects between diffrent app is layers.\nIn my application i have many mappers to which i am actually usnig the same modelMapper which is instantiate as @config bean but the problem with this is sometimes the configs between mappers is entring in conlict.</p>\n<p>Example for mapper1 i want to add a converter for dates which i don't want to use for mapper2.\nSo what shall i do?  i am thinking about a mapper like that (code bellow ) but the problem with that is memory as i will instantiate a new ModelMapper for each mapper</p>\n<pre><code>@Slf4j\n@Setter\n@Component\npublic class CarMapper{\n\n  private ModelMapper mapper;\n\n\n  @PostConstruct\n  public void configure(){\n     mapper = new ModelMapper();\n    configureMapperToIgnoreNullValues();\n    mapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT);\n    mapper.getConfiguration().setFieldAccessLevel(Configuration.AccessLevel.PRIVATE);\n    addFromStringToDateConverterToMapper();\n    addFromDateToStringConverterToMapper();\n    addPropertyMapForCarDto();\n    log.debug(&quot;Mapper configured&quot;);\n  }\n\nprotected toCarDto(Car car){\n// mapping code here\n}\n\n public void addPropertyMapForCarDto() {\n    // check if a type map exist for Car, CarDto\n    if (mapper.getTypeMap(Car.class, CarDto.class) == null) {\n\n      TypeMap&lt;Car, CarDto&gt; propertyMapper = mapper.createTypeMap(\n          Car.class, CarDto.class);\n      propertyMapper.addMappings(\n          addedMapper -&gt; addedMapper.map(Car::getId,\n             CarDto::setId));\n      log.debug(&quot;Property mapping for CarDto added to mapper&quot;);\n  }\n}\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","aggregate","axon"],"answers":[{"comments":[{"owner":{"account_id":19911713,"reputation":65,"user_id":14589598,"display_name":"Jan"},"score":0,"creation_date":1689608760,"post_id":76705851,"comment_id":135234231,"body_markdown":"Thanks for the very quick response @Steven.\nI removed the `@aggregate` from all but the root aggregate, so only `Onderzoek` is annotated.\nI rebuild the project and cot same issues.\nCleared all in my Intellij project and dit a rebuild and now i have the problem in both the aggregateMembers, `Referentschap` and `Waarschuwing`.\nI am clueless about the litle snatch.","body":"Thanks for the very quick response @Steven. I removed the <code>@aggregate</code> from all but the root aggregate, so only <code>Onderzoek</code> is annotated. I rebuild the project and cot same issues. Cleared all in my Intellij project and dit a rebuild and now i have the problem in both the aggregateMembers, <code>Referentschap</code> and <code>Waarschuwing</code>. I am clueless about the litle snatch."},{"owner":{"account_id":2552081,"reputation":7045,"user_id":2215649,"display_name":"Steven"},"score":0,"creation_date":1689666550,"post_id":76705851,"comment_id":135242119,"body_markdown":"That&#39;s very curious... As a second step, are you able to share this project with us? In doing so I should be able to run the setup myself and debug the scenario.","body":"That&#39;s very curious... As a second step, are you able to share this project with us? In doing so I should be able to run the setup myself and debug the scenario."},{"owner":{"account_id":19911713,"reputation":65,"user_id":14589598,"display_name":"Jan"},"score":1,"creation_date":1689772629,"post_id":76705851,"comment_id":135260606,"body_markdown":"Hi @Steven Sharing project will not be an option, but i am making an test project to share.","body":"Hi @Steven Sharing project will not be an option, but i am making an test project to share."}],"tags":[],"owner":{"account_id":2552081,"reputation":7045,"user_id":2215649,"display_name":"Steven"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691586075,"creation_date":1689606773,"answer_id":76705851,"question_id":76705739,"body_markdown":"It&#39;s a hunch, but I guess Axon Framework&#39;s `AggregateModel` isn&#39;t correctly constructed due to the `@Aggregate` annotation on your Aggregate Members too.\r\n\r\nAggregate Members should only be referenced within the aggregate through the `@AggregateMember` annotation. The `@Aggregate` annotation is there to:\r\n1. Mark a class as an Aggregate, and\r\n2. Let it be auto-wired through Axon&#39;s Spring auto-configuration.\r\n\r\nIf you have a &quot;simple&quot; aggregate, you only need to use the `@Aggregate` annotation once, on the so-called Aggregate Root.\r\nIf you have a [polymorphic aggregate][1], you only have to use the `@Aggregate` annotation on the root class and all concrete implementations (essentially the children of the graph).\r\n\r\nAny classes that are not a root aggregate or polymorphic aggregate do not need the `@Aggregate` annotation.\r\nMy hunch that this is the culprit stems from the fact the `@Aggregate` annotation performs the auto-wiring and is used for polymorphic aggregate logic, by the way.\r\n\r\nSo, please remove the annotation from your members and tell us whether that solves the problem!\r\n\r\n### Update\r\n\r\nAfter receiving the sample project through a different channel, I was able to debug the scenario @Jan was facing.\r\nThe Aggregate structure turned out to contain two inconsistencies we had to deal with.\r\n\r\n**One - Polymorphic Aggregate Members**\r\n\r\nFirst and foremost, the sample project contains an aggregate with polymorphic entities (read: `@AggregateMember` annotated fields inside the aggregate).\r\nCurrently, Axon Framework **does not** investigate the entire hierarchy of the `Type` of the field that&#39;s annotated to be an entity.\r\n\r\nDue to this, Axon Framework will **only** discover message-handling methods on the actual annotated field, not on any other layer in the hierarchy.\r\n\r\nTo clarify, regard the following sample:\r\n```java\r\npublic class AggregateRoot {\r\n    @AggregateMember\r\n    private RootEntity entity\r\n    // omitting message handlers for simplicity\r\n\r\n}\r\n\r\npublic RootEntity {\r\n    // omitting message handlers for simplicity\r\n}\r\n\r\npublic ChildEntity {\r\n    // Message handlers here are not found!\r\n}\r\n```\r\n\r\nThe `AggregateRoot` aggregate class has an entity field of type `RootEntity`. By annotating it with `@AggregateMember`, you tell Axon Framework, &quot;this class has message handlers you need to register with the message buses.&quot; However, this support *does not* extend to the implementation of the `RootEntity`.\r\n\r\n**Two - Aggregate Members on each level in the Aggregate Hierarchy**\r\n\r\nThe second predicament had to do with the fact Entities/Aggregate Members were present on several layers in the Aggregate hierarchy.\r\nAxon Framework would only move one layer down the (so-called) &quot;child entity set&quot; to uncover command handlers to register with the internal Aggregate Model. \r\n\r\nHowever, it is perfectly valid to have Aggregate Members on several layers of the Aggregate hierarchy. Due to this bug, the Framework would thus miss aggregate members during the construction of the internal model. \r\n\r\nAs this was a bug, a pull request was provided to fix this, which you can find [here][2]. This fix is part of Axon Framework release 4.8.1, by the way.\r\n\r\n  [1]: https://docs.axoniq.io/reference-guide/axon-framework/axon-framework-commands/modeling/aggregate-polymorphism\r\n  [2]: https://github.com/AxonFramework/AxonFramework/pull/2794","title":"Axon CommandHandlers in AggregateMember Not found","body":"<p>It's a hunch, but I guess Axon Framework's <code>AggregateModel</code> isn't correctly constructed due to the <code>@Aggregate</code> annotation on your Aggregate Members too.</p>\n<p>Aggregate Members should only be referenced within the aggregate through the <code>@AggregateMember</code> annotation. The <code>@Aggregate</code> annotation is there to:</p>\n<ol>\n<li>Mark a class as an Aggregate, and</li>\n<li>Let it be auto-wired through Axon's Spring auto-configuration.</li>\n</ol>\n<p>If you have a &quot;simple&quot; aggregate, you only need to use the <code>@Aggregate</code> annotation once, on the so-called Aggregate Root.\nIf you have a <a href=\"https://docs.axoniq.io/reference-guide/axon-framework/axon-framework-commands/modeling/aggregate-polymorphism\" rel=\"nofollow noreferrer\">polymorphic aggregate</a>, you only have to use the <code>@Aggregate</code> annotation on the root class and all concrete implementations (essentially the children of the graph).</p>\n<p>Any classes that are not a root aggregate or polymorphic aggregate do not need the <code>@Aggregate</code> annotation.\nMy hunch that this is the culprit stems from the fact the <code>@Aggregate</code> annotation performs the auto-wiring and is used for polymorphic aggregate logic, by the way.</p>\n<p>So, please remove the annotation from your members and tell us whether that solves the problem!</p>\n<h3>Update</h3>\n<p>After receiving the sample project through a different channel, I was able to debug the scenario @Jan was facing.\nThe Aggregate structure turned out to contain two inconsistencies we had to deal with.</p>\n<p><strong>One - Polymorphic Aggregate Members</strong></p>\n<p>First and foremost, the sample project contains an aggregate with polymorphic entities (read: <code>@AggregateMember</code> annotated fields inside the aggregate).\nCurrently, Axon Framework <strong>does not</strong> investigate the entire hierarchy of the <code>Type</code> of the field that's annotated to be an entity.</p>\n<p>Due to this, Axon Framework will <strong>only</strong> discover message-handling methods on the actual annotated field, not on any other layer in the hierarchy.</p>\n<p>To clarify, regard the following sample:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AggregateRoot {\n    @AggregateMember\n    private RootEntity entity\n    // omitting message handlers for simplicity\n\n}\n\npublic RootEntity {\n    // omitting message handlers for simplicity\n}\n\npublic ChildEntity {\n    // Message handlers here are not found!\n}\n</code></pre>\n<p>The <code>AggregateRoot</code> aggregate class has an entity field of type <code>RootEntity</code>. By annotating it with <code>@AggregateMember</code>, you tell Axon Framework, &quot;this class has message handlers you need to register with the message buses.&quot; However, this support <em>does not</em> extend to the implementation of the <code>RootEntity</code>.</p>\n<p><strong>Two - Aggregate Members on each level in the Aggregate Hierarchy</strong></p>\n<p>The second predicament had to do with the fact Entities/Aggregate Members were present on several layers in the Aggregate hierarchy.\nAxon Framework would only move one layer down the (so-called) &quot;child entity set&quot; to uncover command handlers to register with the internal Aggregate Model.</p>\n<p>However, it is perfectly valid to have Aggregate Members on several layers of the Aggregate hierarchy. Due to this bug, the Framework would thus miss aggregate members during the construction of the internal model.</p>\n<p>As this was a bug, a pull request was provided to fix this, which you can find <a href=\"https://github.com/AxonFramework/AxonFramework/pull/2794\" rel=\"nofollow noreferrer\">here</a>. This fix is part of Axon Framework release 4.8.1, by the way.</p>\n"}],"owner":{"account_id":19911713,"reputation":65,"user_id":14589598,"display_name":"Jan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76705851,"answer_count":1,"score":0,"last_activity_date":1691586075,"creation_date":1689605918,"question_id":76705739,"body_markdown":"I have an aggregate with multiple AggregateMembers.\r\nNo is the problem that the for 1 aggregateMember (Referentschap) the CommandHandlers in this aggregate member are not found.\r\nThis problem also occurs with junit testing using the AggregateTestFixture&lt;&gt;(Onderzoek.class).\r\n\r\nIn one AggregateMember `Waarschuwing` the CommandHandlers are reached as it should, but in the other aggregateMember `Referentschap` the Commandhandlers are not found.\r\nMy question is how can i work around this problem?\r\nIs there a way that i can make a configuration to fix this?\r\n\r\nCurious issue is that in a copy of the project for some debugging, the same issue arises but then the problem is swapped to `Waarschuwing` and is `Referentschap` ok.\r\nThis curious swap of problems gives me the impression that there is an issue in how the CommandHandlers are collected.\r\n\r\nupdate:\r\nOn a hint of Axoniq is placed only the `@Aggregae` annotation on the root aggregate. Cleared chaces and all from my Intellij IDE and rerun the junit test. \r\nNow the not found ComandHandler issue rises on both the AggregateMembers `Referentschap` and `Waarschuwing`. \r\n\r\nI have made some integration test with an Axon testcontainer and they al succeed.\r\nAs it seems is it a JUnit test problem, where the order of extending of aggregate classes is relevant for which CommandHandler is found.\r\n\r\n\r\nAxon 4.5.17  \r\nSpring boot 2.7.12  \r\nJava temurin 17.0.6   \r\n\r\n```java\r\n@NoArgsConstructor\r\npublic class Onderzoek extends OnderzoekReferentschap {\r\n\r\n    @CommandHandler\r\n    public Onderzoek(InitieerOnderzoek command) {\r\n        apply(OnderzoekGeinitieerd.builder().build());\r\n    }\r\n\r\n    @EventSourcingHandler\r\n    public void onderzoekGeinitieerd(OnderzoekGeinitieerd event) {\r\n        this.onderzoekId = event.getOnderzoekId();\r\n        this.onderzoekStatus = INITIEEL;\r\n    }\r\n```\r\n\r\n```java\r\n@NoArgsConstructor\r\npublic abstract class OnderzoekReferentschap extends OnderzoekMaatregel {\r\n\r\n    @AggregateMember\r\n    private final Map&lt;UUID, Referentschap&gt; referentschappen = new HashMap&lt;&gt;();\r\n\r\n    @CommandHandler\r\n    public void verwerkReferentschapOntstaan(VerwerkReferentschapOntstaan command) {\r\n            apply(ReferentschapOntstaanVerwerkt.builder()\r\n                    .onderzoekId(command.getOnderzoekId())\r\n                    .referentschapId(command.getReferentschapId())\r\n                    .build());\r\n        }\r\n    }\r\n\r\n    @EventSourcingHandler\r\n    public void referentschapOntstaanVerwerkt(ReferentschapOntstaanVerwerkt event) {\r\n        UUID referentschapId = event.getReferentschapId();\r\n        Referentschap referentschap = Referentschap.builder()\r\n                .referentschapId(referentschapId)\r\n                .persoonId(event.getPersoonId())\r\n                .build();\r\n\r\n        referentschappen.put(referentschapId, referentschap);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@NoArgsConstructor\r\nabstract class OnderzoekMaatregel extends OnderzoekBasis {\r\n    @AggregateMember\r\n    final Map&lt;UUID, Waarschuwing&gt; waarschuwingen = new HashMap&lt;&gt;();\r\n\r\n    @CommandHandler\r\n    public void verwerkWaarschuwingOpgelegd(VerwerkWaarschuwingOpgelegd command) {\r\n            apply(WaarschuwingOpgelegdVerwerkt.builder()\r\n                    .onderzoekId(command.getOnderzoekId())\r\n                    .referentschapId(command.getWaarschuwingId())\r\n                    .build());\r\n    }\r\n\r\n    @EventSourcingHandler\r\n    public void waarschuwingOpgelegdVerwerkt(WaarschuwingOpgelegdVerwerkt event) {\r\n        UUID waarschuwingId = event.getWaarschuwingId();\r\n        waarschuwingen.put(waarschuwingId, new Waarschuwing(waarschuwingId));\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@NoArgsConstructor\r\nabstract class OnderzoekBasis {\r\n\r\n    @AggregateIdentifier\r\n    UUID onderzoekId;\r\n    OnderzoekStatus onderzoekStatus;\r\n}\r\n```\r\n\r\nThe following class are the AggregateMembers with the troublesome Not Found CommandHandlers.\r\n```java\r\n@Aggregate\r\n@EqualsAndHashCode\r\n@NoArgsConstructor\r\npublic class Referentschap {\r\n\r\n    @EntityId\r\n    private UUID referentschapId;\r\n\r\n// This command handler is never reached.\r\n    @CommandHandler\r\n    public void verwerkReferentschapBijgewerkt(VerwerkReferentschapBijgewerkt command) {\r\n        apply(ReferentschapBijgewerktVerwerkt.builder()\r\n                .onderzoekId(command.getOnderzoekId())\r\n                .referentschapId(command.getReferentschapId())\r\n                .einddatum(command.getEinddatum())\r\n                .build());\r\n    }\r\n\r\n```\r\n\r\n```java\r\n@Aggregate\r\n@EqualsAndHashCode\r\n@NoArgsConstructor\r\npublic class Waarschuwing {\r\n\r\n    @EntityId\r\n    private UUID waarschuwingId;\r\n\r\n// this command handler is never reached.\r\n    @CommandHandler\r\n    public void verwerkWaarschuwingVerlopen(VerwerkWaarschuwingVerlopen command) {\r\n        apply(WaarschuwingVerlopenVerwerkt.builder()\r\n                .onderzoekId(command.getOnderzoekId())\r\n                .waarschuwingId(command.getWaarschuwingId())\r\n                .verloopdatum(command.getVerloopdatum())\r\n                .build());\r\n    }\r\n}\r\n```","title":"Axon CommandHandlers in AggregateMember Not found","body":"<p>I have an aggregate with multiple AggregateMembers.\nNo is the problem that the for 1 aggregateMember (Referentschap) the CommandHandlers in this aggregate member are not found.\nThis problem also occurs with junit testing using the AggregateTestFixture&lt;&gt;(Onderzoek.class).</p>\n<p>In one AggregateMember <code>Waarschuwing</code> the CommandHandlers are reached as it should, but in the other aggregateMember <code>Referentschap</code> the Commandhandlers are not found.\nMy question is how can i work around this problem?\nIs there a way that i can make a configuration to fix this?</p>\n<p>Curious issue is that in a copy of the project for some debugging, the same issue arises but then the problem is swapped to <code>Waarschuwing</code> and is <code>Referentschap</code> ok.\nThis curious swap of problems gives me the impression that there is an issue in how the CommandHandlers are collected.</p>\n<p>update:\nOn a hint of Axoniq is placed only the <code>@Aggregae</code> annotation on the root aggregate. Cleared chaces and all from my Intellij IDE and rerun the junit test.\nNow the not found ComandHandler issue rises on both the AggregateMembers <code>Referentschap</code> and <code>Waarschuwing</code>.</p>\n<p>I have made some integration test with an Axon testcontainer and they al succeed.\nAs it seems is it a JUnit test problem, where the order of extending of aggregate classes is relevant for which CommandHandler is found.</p>\n<p>Axon 4.5.17<br />\nSpring boot 2.7.12<br />\nJava temurin 17.0.6</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\npublic class Onderzoek extends OnderzoekReferentschap {\n\n    @CommandHandler\n    public Onderzoek(InitieerOnderzoek command) {\n        apply(OnderzoekGeinitieerd.builder().build());\n    }\n\n    @EventSourcingHandler\n    public void onderzoekGeinitieerd(OnderzoekGeinitieerd event) {\n        this.onderzoekId = event.getOnderzoekId();\n        this.onderzoekStatus = INITIEEL;\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\npublic abstract class OnderzoekReferentschap extends OnderzoekMaatregel {\n\n    @AggregateMember\n    private final Map&lt;UUID, Referentschap&gt; referentschappen = new HashMap&lt;&gt;();\n\n    @CommandHandler\n    public void verwerkReferentschapOntstaan(VerwerkReferentschapOntstaan command) {\n            apply(ReferentschapOntstaanVerwerkt.builder()\n                    .onderzoekId(command.getOnderzoekId())\n                    .referentschapId(command.getReferentschapId())\n                    .build());\n        }\n    }\n\n    @EventSourcingHandler\n    public void referentschapOntstaanVerwerkt(ReferentschapOntstaanVerwerkt event) {\n        UUID referentschapId = event.getReferentschapId();\n        Referentschap referentschap = Referentschap.builder()\n                .referentschapId(referentschapId)\n                .persoonId(event.getPersoonId())\n                .build();\n\n        referentschappen.put(referentschapId, referentschap);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\nabstract class OnderzoekMaatregel extends OnderzoekBasis {\n    @AggregateMember\n    final Map&lt;UUID, Waarschuwing&gt; waarschuwingen = new HashMap&lt;&gt;();\n\n    @CommandHandler\n    public void verwerkWaarschuwingOpgelegd(VerwerkWaarschuwingOpgelegd command) {\n            apply(WaarschuwingOpgelegdVerwerkt.builder()\n                    .onderzoekId(command.getOnderzoekId())\n                    .referentschapId(command.getWaarschuwingId())\n                    .build());\n    }\n\n    @EventSourcingHandler\n    public void waarschuwingOpgelegdVerwerkt(WaarschuwingOpgelegdVerwerkt event) {\n        UUID waarschuwingId = event.getWaarschuwingId();\n        waarschuwingen.put(waarschuwingId, new Waarschuwing(waarschuwingId));\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\nabstract class OnderzoekBasis {\n\n    @AggregateIdentifier\n    UUID onderzoekId;\n    OnderzoekStatus onderzoekStatus;\n}\n</code></pre>\n<p>The following class are the AggregateMembers with the troublesome Not Found CommandHandlers.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aggregate\n@EqualsAndHashCode\n@NoArgsConstructor\npublic class Referentschap {\n\n    @EntityId\n    private UUID referentschapId;\n\n// This command handler is never reached.\n    @CommandHandler\n    public void verwerkReferentschapBijgewerkt(VerwerkReferentschapBijgewerkt command) {\n        apply(ReferentschapBijgewerktVerwerkt.builder()\n                .onderzoekId(command.getOnderzoekId())\n                .referentschapId(command.getReferentschapId())\n                .einddatum(command.getEinddatum())\n                .build());\n    }\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Aggregate\n@EqualsAndHashCode\n@NoArgsConstructor\npublic class Waarschuwing {\n\n    @EntityId\n    private UUID waarschuwingId;\n\n// this command handler is never reached.\n    @CommandHandler\n    public void verwerkWaarschuwingVerlopen(VerwerkWaarschuwingVerlopen command) {\n        apply(WaarschuwingVerlopenVerwerkt.builder()\n                .onderzoekId(command.getOnderzoekId())\n                .waarschuwingId(command.getWaarschuwingId())\n                .verloopdatum(command.getVerloopdatum())\n                .build());\n    }\n}\n</code></pre>\n"},{"tags":["java","json","jolt"],"answers":[{"comments":[{"owner":{"account_id":29190271,"reputation":25,"user_id":22362539,"display_name":"Mehdi Abniki"},"score":1,"creation_date":1691586050,"post_id":76868009,"comment_id":135511394,"body_markdown":"that&#39;s fine\nthanks Barbaros","body":"that&#39;s fine thanks Barbaros"},{"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"score":0,"creation_date":1691586224,"post_id":76868009,"comment_id":135511427,"body_markdown":"Welcome to SO @MehdiAbniki","body":"Welcome to SO @MehdiAbniki"},{"owner":{"account_id":29190271,"reputation":25,"user_id":22362539,"display_name":"Mehdi Abniki"},"score":0,"creation_date":1691587468,"post_id":76868009,"comment_id":135511727,"body_markdown":"thanks for your attention @BarbarosOzhan\nwhere can I find such deep guide for Jolt?","body":"thanks for your attention @BarbarosOzhan where can I find such deep guide for Jolt?"},{"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"score":0,"creation_date":1691589052,"post_id":76868009,"comment_id":135512130,"body_markdown":"@MehdiAbniki There are some sources which I like ;[1](https://erbalvindersingh.medium.com/applying-jolttransform-on-json-object-array-and-fetching-specific-fields-48946870b4fc), [2](https://intercom.help/godigibee/en/articles/3096940-simple-if-else-with-jolt), [3](https://community.cloudera.com/t5/Community-Articles/Jolt-quick-reference-for-Nifi-Jolt-Processors/ta-p/244350), [4](https://cool-cheng.blogspot.com/2019/12/json-jolt-tutorial.html)","body":"@MehdiAbniki There are some sources which I like ;<a href=\"https://erbalvindersingh.medium.com/applying-jolttransform-on-json-object-array-and-fetching-specific-fields-48946870b4fc\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://intercom.help/godigibee/en/articles/3096940-simple-if-else-with-jolt\" rel=\"nofollow noreferrer\">2</a>, <a href=\"https://community.cloudera.com/t5/Community-Articles/Jolt-quick-reference-for-Nifi-Jolt-Processors/ta-p/244350\" rel=\"nofollow noreferrer\">3</a>, <a href=\"https://cool-cheng.blogspot.com/2019/12/json-jolt-tutorial.html\" rel=\"nofollow noreferrer\">4</a>"},{"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"score":0,"creation_date":1691589215,"post_id":76868009,"comment_id":135512163,"body_markdown":"and you can check out the [tag info](https://stackoverflow.com/tags/jolt/info) stated within SO @MehdiAbniki","body":"and you can check out the <a href=\"https://stackoverflow.com/tags/jolt/info\">tag info</a> stated within SO @MehdiAbniki"}],"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691585724,"creation_date":1691585724,"answer_id":76868009,"question_id":76867922,"body_markdown":"You might change the order of the transformations while adding `&quot;parameters&quot;` case along with the else case( `&quot;*&quot;` ) to the shift transformation spec such as\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;default&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: {\r\n        &quot;name&quot;: &quot;P_RQID&quot;,\r\n        &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: &quot;&amp;&quot;,\r\n      &quot;*&quot;: { // non-parameters case\r\n        &quot;$&quot;: &quot;parameters[#2].name&quot;,\r\n        &quot;@&quot;: &quot;parameters[#2].value&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\nthe ***demo*** on the site http://jolt-demo.appspot.com/ is :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YiZ2P.jpg","title":"how to add an entry into final list by jolt map to list","body":"<p>You might change the order of the transformations while adding <code>&quot;parameters&quot;</code> case along with the else case( <code>&quot;*&quot;</code> ) to the shift transformation spec such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;default&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: {\n        &quot;name&quot;: &quot;P_RQID&quot;,\n        &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: &quot;&amp;&quot;,\n      &quot;*&quot;: { // non-parameters case\n        &quot;$&quot;: &quot;parameters[#2].name&quot;,\n        &quot;@&quot;: &quot;parameters[#2].value&quot;\n      }\n    }\n  }\n]\n</code></pre>\n<p>the <em><strong>demo</strong></em> on the site <a href=\"http://jolt-demo.appspot.com/\" rel=\"nofollow noreferrer\">http://jolt-demo.appspot.com/</a> is :</p>\n<p><a href=\"https://i.stack.imgur.com/YiZ2P.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YiZ2P.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29190271,"reputation":25,"user_id":22362539,"display_name":"Mehdi Abniki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76868009,"answer_count":1,"score":1,"last_activity_date":1691585857,"creation_date":1691585048,"question_id":76867922,"body_markdown":"I&#39;m trying to transform a map to list by Jolt, which is done ok\r\nthe problem is that I need to add an entry as a default(not in input schema)\r\nbut it doesn&#39;t work\r\n\r\nI have a simple schema as is:\r\n\r\n```json\r\n{\r\n  &quot;iban&quot;: &quot;IR970130100000000000001399&quot;,\r\n  &quot;paymentCode&quot;: &quot;124&quot;\r\n}\r\n```\r\n\r\nand except the output like this:\r\n\r\n```json\r\n{\r\n  &quot;parameters&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;iban&quot;,\r\n      &quot;value&quot;: &quot;IR970130100000000000001399&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;paymentCode&quot;,\r\n      &quot;value&quot;: &quot;124&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;P_RQID&quot;,\r\n      &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\nthis is my spec:\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;$&quot;: &quot;parameters.[#2].name&quot;,\r\n        &quot;@&quot;: &quot;parameters.[#2].value&quot;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;default&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;parameters&quot;: {\r\n        &quot;name&quot;: &quot;P_RQID&quot;,\r\n        &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\n\r\n\r\nand this is the output I have:\r\n\r\n```json\r\n{\r\n  &quot;parameters&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;iban&quot;,\r\n      &quot;value&quot;: &quot;IR970130100000000000001399&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;paymentCode&quot;,\r\n      &quot;value&quot;: &quot;124&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\nwithout the effect of default operation.\r\nanyone can help?\r\n","title":"how to add an entry into final list by jolt map to list","body":"<p>I'm trying to transform a map to list by Jolt, which is done ok\nthe problem is that I need to add an entry as a default(not in input schema)\nbut it doesn't work</p>\n<p>I have a simple schema as is:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;iban&quot;: &quot;IR970130100000000000001399&quot;,\n  &quot;paymentCode&quot;: &quot;124&quot;\n}\n</code></pre>\n<p>and except the output like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;parameters&quot;: [\n    {\n      &quot;name&quot;: &quot;iban&quot;,\n      &quot;value&quot;: &quot;IR970130100000000000001399&quot;\n    },\n    {\n      &quot;name&quot;: &quot;paymentCode&quot;,\n      &quot;value&quot;: &quot;124&quot;\n    },\n    {\n      &quot;name&quot;: &quot;P_RQID&quot;,\n      &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\n    }\n  ]\n}\n</code></pre>\n<p>this is my spec:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;$&quot;: &quot;parameters.[#2].name&quot;,\n        &quot;@&quot;: &quot;parameters.[#2].value&quot;\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;default&quot;,\n    &quot;spec&quot;: {\n      &quot;parameters&quot;: {\n        &quot;name&quot;: &quot;P_RQID&quot;,\n        &quot;value&quot;: &quot;4f2ba174-690f-4d41-9bcc-b958789fe6d7&quot;\n      }\n    }\n  }\n]\n</code></pre>\n<p>and this is the output I have:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;parameters&quot;: [\n    {\n      &quot;name&quot;: &quot;iban&quot;,\n      &quot;value&quot;: &quot;IR970130100000000000001399&quot;\n    },\n    {\n      &quot;name&quot;: &quot;paymentCode&quot;,\n      &quot;value&quot;: &quot;124&quot;\n    }\n  ]\n}\n</code></pre>\n<p>without the effect of default operation.\nanyone can help?</p>\n"},{"tags":["java","android","kotlin","android-webview"],"comments":[{"owner":{"account_id":15709144,"reputation":101,"user_id":11335075,"display_name":"magon"},"score":0,"creation_date":1690892283,"post_id":76811467,"comment_id":135413786,"body_markdown":"Can you show me your &quot;MyWebViewClient&quot; - Code?","body":"Can you show me your &quot;MyWebViewClient&quot; - Code?"}],"answers":[{"comments":[{"owner":{"account_id":5984835,"reputation":741,"user_id":4702671,"display_name":"neatchuck"},"score":2,"creation_date":1700052041,"post_id":76867965,"comment_id":136606927,"body_markdown":"These properties don&#39;t seem to be available/accessible for android.webkit WebView &amp; WebSettings. So this probably doesn&#39;t work or answer the question.\n\nhttps://developer.android.com/reference/android/webkit/WebSettings","body":"These properties don&#39;t seem to be available/accessible for android.webkit WebView &amp; WebSettings. So this probably doesn&#39;t work or answer the question.  <a href=\"https://developer.android.com/reference/android/webkit/WebSettings\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/webkit/WebSettings</a>"}],"tags":[],"owner":{"account_id":19628545,"reputation":1,"user_id":14367360,"display_name":"Erfan mahdavi athar"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691585426,"creation_date":1691585426,"answer_id":76867965,"question_id":76811467,"body_markdown":"I think adding these two lines of code will solve your problem:\r\n\r\n``` Koltin\r\nwebView?.let { webView -&gt;\r\n    ...\r\n    // Add these two lines of code\r\n    webView.settings.setConnectTimeout(TIMEOUT_MILLIS)\r\n    webView.settings.setReadTimeout(TIMEOUT_MILLIS)\r\n}\r\n```\r\nReplace the value of `TIMEOUT_MILLIS` with the value you need","title":"How to increase the default timeout on Webview to load URL in Android?","body":"<p>I think adding these two lines of code will solve your problem:</p>\n<pre><code>webView?.let { webView -&gt;\n    ...\n    // Add these two lines of code\n    webView.settings.setConnectTimeout(TIMEOUT_MILLIS)\n    webView.settings.setReadTimeout(TIMEOUT_MILLIS)\n}\n</code></pre>\n<p>Replace the value of <code>TIMEOUT_MILLIS</code> with the value you need</p>\n"}],"owner":{"account_id":6900526,"reputation":35,"user_id":5300327,"display_name":"Narendar "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691585426,"creation_date":1690891684,"question_id":76811467,"body_markdown":"I&#39;m currently loading the URL in webview and everything works perfect. However, in poor network condition I&#39;m getting Err: Timedout on webview with in 10 seconds. I would like to increase this time out value to lets say 60 seconds. \r\nThank you in Advance. \r\nHere is my webview :\r\n\r\n&#39;&#39;&#39;\r\n\r\n    webView = findViewById(R.id.webview)\r\n            webView?.let { webView -&gt;\r\n                webView.clearCache(true)\r\n                webView.clearFormData()\r\n                webView.clearHistory()\r\n                Log.i(LOG_TAG,&quot;cleared cache &amp; history on webview&quot;)\r\n                webView.settings.javaScriptEnabled = true;\r\n                webView.settings.setAllowUniversalAccessFromFileURLs(true);\r\n                webView.settings.allowContentAccess = true;\r\n                webView.settings.domStorageEnabled = true;\r\n                webView.webViewClient = MyWebViewClient(this, progressbarView, progressbar)\r\n            }\r\n\r\n&#39;&#39;&#39;\r\n\r\nHere is my webview client code:\r\n\r\n&#39;&#39;&#39;\r\noverride fun shouldOverrideUrlLoading(view: WebView, request: WebResourceRequest?): Boolean {\r\n            val url: String = request?.url.toString();\r\n            if (Global.isNetworkConnected(this@Orderdetailswebview)){\r\n                return checkAndProcessHolsterManagerCall(view, url)\r\n            }else{\r\n                var networkDialog = NetworkErrorVideoFragment()\r\n                networkDialog.show(fragmentManager, &quot;NetworkErrorDialog&quot;)\r\n            }\r\n            return true\r\n        }\r\n override fun shouldOverrideUrlLoading(view: WebView, url: String): Boolean {\r\n            return checkAndProcessHolsterManagerCall(view, url)\r\n        }\r\n        override fun shouldInterceptRequest(view: WebView, request: WebResourceRequest): WebResourceResponse? {\r\n            if(fromActivityVal == &quot;ViewTogether&quot;) {\r\n                return super.shouldInterceptRequest(view, request)\r\n            }else {\r\n                return webResponse(request)\r\n            }\r\n        }\r\n&#39;&#39;&#39;\r\n","title":"How to increase the default timeout on Webview to load URL in Android?","body":"<p>I'm currently loading the URL in webview and everything works perfect. However, in poor network condition I'm getting Err: Timedout on webview with in 10 seconds. I would like to increase this time out value to lets say 60 seconds.\nThank you in Advance.\nHere is my webview :</p>\n<p>'''</p>\n<pre><code>webView = findViewById(R.id.webview)\n        webView?.let { webView -&gt;\n            webView.clearCache(true)\n            webView.clearFormData()\n            webView.clearHistory()\n            Log.i(LOG_TAG,&quot;cleared cache &amp; history on webview&quot;)\n            webView.settings.javaScriptEnabled = true;\n            webView.settings.setAllowUniversalAccessFromFileURLs(true);\n            webView.settings.allowContentAccess = true;\n            webView.settings.domStorageEnabled = true;\n            webView.webViewClient = MyWebViewClient(this, progressbarView, progressbar)\n        }\n</code></pre>\n<p>'''</p>\n<p>Here is my webview client code:</p>\n<p>'''\noverride fun shouldOverrideUrlLoading(view: WebView, request: WebResourceRequest?): Boolean {\nval url: String = request?.url.toString();\nif (Global.isNetworkConnected(this@Orderdetailswebview)){\nreturn checkAndProcessHolsterManagerCall(view, url)\n}else{\nvar networkDialog = NetworkErrorVideoFragment()\nnetworkDialog.show(fragmentManager, &quot;NetworkErrorDialog&quot;)\n}\nreturn true\n}\noverride fun shouldOverrideUrlLoading(view: WebView, url: String): Boolean {\nreturn checkAndProcessHolsterManagerCall(view, url)\n}\noverride fun shouldInterceptRequest(view: WebView, request: WebResourceRequest): WebResourceResponse? {\nif(fromActivityVal == &quot;ViewTogether&quot;) {\nreturn super.shouldInterceptRequest(view, request)\n}else {\nreturn webResponse(request)\n}\n}\n'''</p>\n"},{"tags":["c#","java"],"comments":[{"owner":{"account_id":437776,"reputation":20871,"user_id":825637,"accept_rate":85,"display_name":"MasterMastic"},"score":17,"creation_date":1380189861,"post_id":4504508,"comment_id":28111458,"body_markdown":"Actually, it&#39;s neither pedantic *nor* silly. [Coding conventions](http://en.wikipedia.org/wiki/Coding_conventions) exist for a reason. Although this one is perhaps flexible.. I capitalize only the first letter in C# and so does .NET.","body":"Actually, it&#39;s neither pedantic <i>nor</i> silly. <a href=\"http://en.wikipedia.org/wiki/Coding_conventions\" rel=\"nofollow noreferrer\">Coding conventions</a> exist for a reason. Although this one is perhaps flexible.. I capitalize only the first letter in C# and so does .NET."}],"answers":[{"comments":[{"owner":{"account_id":134964,"reputation":22313,"user_id":337455,"accept_rate":80,"display_name":"Jeffrey Blattman"},"score":2,"creation_date":1292972479,"post_id":4504521,"comment_id":4930541,"body_markdown":"i see this is tagged for c# and java, but the style guidelines are going to be different for each.","body":"i see this is tagged for c# and java, but the style guidelines are going to be different for each."},{"owner":{"account_id":32093,"reputation":650743,"user_id":88656,"display_name":"Eric Lippert"},"score":13,"creation_date":1292973427,"post_id":4504521,"comment_id":4930698,"body_markdown":"An additional guideline is: if the acronym is derived from the names of people, then keep all of it upper cased. It&#39;s &quot;RSACryptoServiceProvider&quot;, not &quot;RsaCryptoServiceProvider&quot;. Would you want to be the one to tell Shamir or Adelman that they don&#39;t rate a capital letter? I think not. :-)","body":"An additional guideline is: if the acronym is derived from the names of people, then keep all of it upper cased. It&#39;s &quot;RSACryptoServiceProvider&quot;, not &quot;RsaCryptoServiceProvider&quot;. Would you want to be the one to tell Shamir or Adelman that they don&#39;t rate a capital letter? I think not. :-)"},{"owner":{"account_id":15935,"reputation":346512,"user_id":34211,"accept_rate":83,"display_name":"Andrew Hare"},"score":1,"creation_date":1292973595,"post_id":4504521,"comment_id":4930722,"body_markdown":"@Eric - Nice :) I am wondering if it was the `RSACryptoServiceProvider` class that prompted that additional rule.","body":"@Eric - Nice :) I am wondering if it was the <code>RSACryptoServiceProvider</code> class that prompted that additional rule."},{"owner":{"account_id":949182,"reputation":4225,"user_id":975724,"accept_rate":97,"display_name":"Nicholas Miller"},"score":0,"creation_date":1395348184,"post_id":4504521,"comment_id":34310833,"body_markdown":"Is it also safe to put abbreviations in the same category as acronyms?  For example, the abbreviation &#39;Mfg.&#39; (Manufactrer) could be used as a class/property like this: `MfgName`.  As a parameter/field, it would be: `mfgName`.","body":"Is it also safe to put abbreviations in the same category as acronyms?  For example, the abbreviation &#39;Mfg.&#39; (Manufactrer) could be used as a class/property like this: <code>MfgName</code>.  As a parameter/field, it would be: <code>mfgName</code>."},{"owner":{"account_id":1054830,"reputation":9695,"user_id":1057791,"accept_rate":86,"display_name":"BornToCode"},"score":2,"creation_date":1410938025,"post_id":4504521,"comment_id":40509135,"body_markdown":"That link says &quot;DO NOT capitalize each word in so-called closed-form compound words. These are compound words written as a single word, such as endpoint.&quot; - so therefore it is Database and not DataBase and DB is an abbreviation and not an acronym (and should be DbRate and not DBRate)?","body":"That link says &quot;DO NOT capitalize each word in so-called closed-form compound words. These are compound words written as a single word, such as endpoint.&quot; - so therefore it is Database and not DataBase and DB is an abbreviation and not an acronym (and should be DbRate and not DBRate)?"}],"tags":[],"owner":{"account_id":15935,"reputation":346512,"user_id":34211,"accept_rate":83,"display_name":"Andrew Hare"},"comment_count":5,"down_vote_count":1,"up_vote_count":58,"is_accepted":true,"score":57,"last_activity_date":1292970263,"creation_date":1292970263,"answer_id":4504521,"question_id":4504508,"body_markdown":"For C#, check out [Microsoft&#39;s guidelines][1]:\r\n\r\n&gt; **Do capitalize both characters of two-character acronyms, except the\r\n&gt; first word of a camel-cased\r\n&gt; identifier.**\r\n&gt; \r\n&gt; A property named DBRate is an example\r\n&gt; of a short acronym (DB) used as the\r\n&gt; first word of a Pascal-cased\r\n&gt; identifier. A parameter named\r\n&gt; ioChannel is an example of a short\r\n&gt; acronym (IO) used as the first word of\r\n&gt; a camel-cased identifier.\r\n&gt; \r\n&gt; **Do capitalize only the first character of acronyms with three or\r\n&gt; more characters, except the first word\r\n&gt; of a camel-cased identifier.**\r\n&gt; \r\n&gt; A class named XmlWriter is an example\r\n&gt; of a long acronym used as the first\r\n&gt; word of a Pascal-cased identifier. A\r\n&gt; parameter named htmlReader is an\r\n&gt; example of a long acronym used as the\r\n&gt; first word of a camel-cased\r\n&gt; identifier.\r\n&gt; \r\n&gt; **Do not capitalize any of the characters of any acronyms, whatever\r\n&gt; their length, at the beginning of a\r\n&gt; camel-cased identifier.**\r\n&gt; \r\n&gt; A parameter named xmlStream is an\r\n&gt; example of a long acronym (xml) used\r\n&gt; as the first word of a camel-cased\r\n&gt; identifier. A parameter named\r\n&gt; dbServerName is an example of a short\r\n&gt; acronym (db) used as the first word of\r\n&gt; a camel-cased identifier.\r\n\r\n  \r\n\r\n[1]: http://msdn.microsoft.com/en-us/library/ms229043.aspx\r\n\r\n\r\n\r\n","title":"Camel casing acronyms?","body":"<p>For C#, check out <a href=\"http://msdn.microsoft.com/en-us/library/ms229043.aspx\" rel=\"noreferrer\">Microsoft's guidelines</a>:</p>\n\n<blockquote>\n  <p><strong>Do capitalize both characters of two-character acronyms, except the\n  first word of a camel-cased\n  identifier.</strong></p>\n  \n  <p>A property named DBRate is an example\n  of a short acronym (DB) used as the\n  first word of a Pascal-cased\n  identifier. A parameter named\n  ioChannel is an example of a short\n  acronym (IO) used as the first word of\n  a camel-cased identifier.</p>\n  \n  <p><strong>Do capitalize only the first character of acronyms with three or\n  more characters, except the first word\n  of a camel-cased identifier.</strong></p>\n  \n  <p>A class named XmlWriter is an example\n  of a long acronym used as the first\n  word of a Pascal-cased identifier. A\n  parameter named htmlReader is an\n  example of a long acronym used as the\n  first word of a camel-cased\n  identifier.</p>\n  \n  <p><strong>Do not capitalize any of the characters of any acronyms, whatever\n  their length, at the beginning of a\n  camel-cased identifier.</strong></p>\n  \n  <p>A parameter named xmlStream is an\n  example of a long acronym (xml) used\n  as the first word of a camel-cased\n  identifier. A parameter named\n  dbServerName is an example of a short\n  acronym (db) used as the first word of\n  a camel-cased identifier.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8252,"reputation":41559,"user_id":14768,"accept_rate":82,"display_name":"Joshua"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1292970276,"creation_date":1292970276,"answer_id":4504523,"question_id":4504508,"body_markdown":"We have no hard &amp; fast rule, but we generally do not camel case acronyms. A few with more than three letters are but most aren&#39;t.","title":"Camel casing acronyms?","body":"<p>We have no hard &amp; fast rule, but we generally do not camel case acronyms. A few with more than three letters are but most aren't.</p>\n"},{"tags":[],"owner":{"account_id":51577,"reputation":54292,"user_id":154152,"display_name":"Noon Silk"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1292970287,"creation_date":1292970287,"answer_id":4504524,"question_id":4504508,"body_markdown":"Personal preference.\r\n\r\nI tend to do it just because it doesn&#39;t merge well with other words, like, `XMLHTTPParser`, compared to `XmlHttpParser`. Do whatever makes you feel good, but do it in a standard way.","title":"Camel casing acronyms?","body":"<p>Personal preference.</p>\n\n<p>I tend to do it just because it doesn't merge well with other words, like, <code>XMLHTTPParser</code>, compared to <code>XmlHttpParser</code>. Do whatever makes you feel good, but do it in a standard way.</p>\n"},{"comments":[{"owner":{"account_id":134964,"reputation":22313,"user_id":337455,"accept_rate":80,"display_name":"Jeffrey Blattman"},"score":0,"creation_date":1354641273,"post_id":4504611,"comment_id":18826598,"body_markdown":"see above: `HttpURLConnection`. the acronym `Http` is camel cased but `URL` is not.","body":"see above: <code>HttpURLConnection</code>. the acronym <code>Http</code> is camel cased but <code>URL</code> is not."}],"tags":[],"owner":{"account_id":134964,"reputation":22313,"user_id":337455,"accept_rate":80,"display_name":"Jeffrey Blattman"},"comment_count":1,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1458158306,"creation_date":1292971114,"answer_id":4504611,"question_id":4504508,"body_markdown":"Here&#39;s what i like, and this is for Java: classes start with upper-case, fields with lower case, and acronyms do not affect that. That leads to things that look like this,\r\n\r\n    UrlConnection urlConnection;\r\n\r\nThe problem is that if you try to apply a rule where you always upper case acronyms, or even the first letter of an acronym irrespective of it being a field or class name, you get strange things like,\r\n\r\n    URLConnection URLConnection; // huh?\r\n\r\n \r\nIn other words, the field starts with lower case rule contradicts with a hypothetical uppercase acronym rule. You can&#39;t apply them both.\r\n\r\nEven the Java SDK has examples of both, within a single class name: `HttpURLConnection`. You&#39;d think it would be either `HTTPURLConnection` or `HttpUrlConnection`.\r\n\r\n","title":"Camel casing acronyms?","body":"<p>Here's what i like, and this is for Java: classes start with upper-case, fields with lower case, and acronyms do not affect that. That leads to things that look like this,</p>\n\n<pre><code>UrlConnection urlConnection;\n</code></pre>\n\n<p>The problem is that if you try to apply a rule where you always upper case acronyms, or even the first letter of an acronym irrespective of it being a field or class name, you get strange things like,</p>\n\n<pre><code>URLConnection URLConnection; // huh?\n</code></pre>\n\n<p>In other words, the field starts with lower case rule contradicts with a hypothetical uppercase acronym rule. You can't apply them both.</p>\n\n<p>Even the Java SDK has examples of both, within a single class name: <code>HttpURLConnection</code>. You'd think it would be either <code>HTTPURLConnection</code> or <code>HttpUrlConnection</code>.</p>\n"},{"tags":[],"owner":{"account_id":194186,"reputation":70518,"user_id":436376,"accept_rate":94,"display_name":"KeithS"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1292971674,"creation_date":1292971674,"answer_id":4504673,"question_id":4504508,"body_markdown":"Generally, our acronyms are PascalCased or camelCased as most have stated.\r\n\r\nSome exceptions:\r\n\r\n* If an acronym used in a member name is well known in the business for which the software is being written, and it is a true acronym (the capital letters form a dictionary word, as opposed to just an initialism like XML), we often capitalize it to avoid confusion with the dictionary word.\r\n\r\n* Sometimes in ORMs working against existing DBs, I&#39;ve just named the mapped variable the same as the DB column, capitalization and all, rather than having to map FdicId =&gt; FDICID explicitly in a case-sensitive DB. This does have its downside, as future developers can silently break functionality if they feel more strongly than I did that it should be properly cased, but didn&#39;t know why.\r\n\r\n* ID is a bit of a flip-flopper when used on the end of a member name; Whether it&#39;s ID or Id depends on the developer who writes the first such member in a class or namespace, and they&#39;re seldom revised.","title":"Camel casing acronyms?","body":"<p>Generally, our acronyms are PascalCased or camelCased as most have stated.</p>\n\n<p>Some exceptions:</p>\n\n<ul>\n<li><p>If an acronym used in a member name is well known in the business for which the software is being written, and it is a true acronym (the capital letters form a dictionary word, as opposed to just an initialism like XML), we often capitalize it to avoid confusion with the dictionary word.</p></li>\n<li><p>Sometimes in ORMs working against existing DBs, I've just named the mapped variable the same as the DB column, capitalization and all, rather than having to map FdicId => FDICID explicitly in a case-sensitive DB. This does have its downside, as future developers can silently break functionality if they feel more strongly than I did that it should be properly cased, but didn't know why.</p></li>\n<li><p>ID is a bit of a flip-flopper when used on the end of a member name; Whether it's ID or Id depends on the developer who writes the first such member in a class or namespace, and they're seldom revised.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4383791,"reputation":8744,"user_id":3672465,"display_name":"Beejor"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1437111778,"creation_date":1437111778,"answer_id":31469065,"question_id":4504508,"body_markdown":"In general, **treating acronyms the same as the overall word case** is the most intuitive, for the following reasons.\r\n\r\n 1. It helps avoid memorization of a bunch of special rules (case in point, the MS guidelines above)\r\n 2. The lettercase of specific terms may change over time or between personal interpretations like with `posix`, `unix`, `regex`, `radar`, `scuba`, `laser`, and `email`\r\n 3. It can otherwise get visually clunky when you need to deal with (and/or combine) tech terms like `miniiOSLayout`, `SSHHTTPSSession`, `CPUURLLinkC`, and schemaeBay (granted these specific examples are unlikely, they help illustrate the problem)\r\n 4. It removes some confusion if the language uses different cases for different things, like capitalizing `AClassName` but not `anObjectName`\r\n\r\nYes, `httpUrl` looks dumb. But the more you code, the more you&#39;re likely to realize the above points on your own. And while not a huge deal in and of itself, a lot of little things can add up and create frustration with your work.","title":"Camel casing acronyms?","body":"<p>In general, <strong>treating acronyms the same as the overall word case</strong> is the most intuitive, for the following reasons.</p>\n\n<ol>\n<li>It helps avoid memorization of a bunch of special rules (case in point, the MS guidelines above)</li>\n<li>The lettercase of specific terms may change over time or between personal interpretations like with <code>posix</code>, <code>unix</code>, <code>regex</code>, <code>radar</code>, <code>scuba</code>, <code>laser</code>, and <code>email</code></li>\n<li>It can otherwise get visually clunky when you need to deal with (and/or combine) tech terms like <code>miniiOSLayout</code>, <code>SSHHTTPSSession</code>, <code>CPUURLLinkC</code>, and schemaeBay (granted these specific examples are unlikely, they help illustrate the problem)</li>\n<li>It removes some confusion if the language uses different cases for different things, like capitalizing <code>AClassName</code> but not <code>anObjectName</code></li>\n</ol>\n\n<p>Yes, <code>httpUrl</code> looks dumb. But the more you code, the more you're likely to realize the above points on your own. And while not a huge deal in and of itself, a lot of little things can add up and create frustration with your work.</p>\n"},{"tags":[],"owner":{"account_id":10030576,"reputation":483,"user_id":7417349,"accept_rate":67,"display_name":"javalearner_heaven"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1504771425,"creation_date":1504771425,"answer_id":46091079,"question_id":4504508,"body_markdown":"Depends on the length of acronyms also. \r\n\r\nDB---&gt;looks decent\r\n\r\n    openDBConnection\r\nHTTP---&gt;looks odd\r\n\r\n    openHTTPCConnection\r\n\r\nApart from rules:\r\n\r\n - Readability matters a lot to me.\r\n   \r\n  \r\n - Consistency shows your effort on programming. \r\n\r\nSo, do it consistent and legible.\r\n\r\n","title":"Camel casing acronyms?","body":"<p>Depends on the length of acronyms also. </p>\n\n<p>DB--->looks decent</p>\n\n<pre><code>openDBConnection\n</code></pre>\n\n<p>HTTP--->looks odd</p>\n\n<pre><code>openHTTPCConnection\n</code></pre>\n\n<p>Apart from rules:</p>\n\n<ul>\n<li><p>Readability matters a lot to me.</p></li>\n<li><p>Consistency shows your effort on programming. </p></li>\n</ul>\n\n<p>So, do it consistent and legible.</p>\n"},{"tags":[],"owner":{"account_id":8993869,"reputation":628,"user_id":6704959,"display_name":"luizv"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691584797,"creation_date":1690571466,"answer_id":76790486,"question_id":4504508,"body_markdown":"### TL&#39;DR\r\nAs thumb rule, you should prefer `MyUrlClass`, not `MyURLClass`.\r\n\r\n### Conventions \r\nEach language has its own style guide.\r\n - C# allows for two letter acronyms to be all uppercased (pascal or camel case) or lowercased (when first word of camel case), but bigger acronyms should behave like normal words.\r\n - Java doesn&#39;t have a single convention, but in practice you could use .NET as reference, as [explained at another SO question][1]:\r\n\r\n&gt; For Java:\r\n&gt; \r\n&gt; For 4+ letter acronyms, use mixed case. The standard library does\r\n&gt; this, and it just makes good sense.\r\n&gt; \r\n&gt; For 3 letter acronyms, you can use all uppercase like the JCL, or you\r\n&gt; can use mixed case like the .NET Framework does. Either way, be\r\n&gt; consistent.\r\n&gt; \r\n&gt; For 2 letter acronyms, use all uppercase.\r\n&gt; \r\n&gt; For 2 letter abbreviations, Java does not really have a standard, but\r\n&gt; I suggest using mixed case, unless consistency with other names would\r\n&gt; make all uppercase look better.\r\n\r\n\r\n### If you&#39;re came here thinking of each letter of an acronym as a different word, think again\r\nIf that&#39;s your reasoning, analyse this:\r\n\r\nBy considering each letter a different word, a class of name `XMLDBParser` (in PascalCase) **for consistency,** would have identifiers looking like `xMLDBParser` (in camelCase). And that doesn&#39;t make any sense as naming convention. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/7366332/6704959","title":"Camel casing acronyms?","body":"<h3>TL'DR</h3>\n<p>As thumb rule, you should prefer <code>MyUrlClass</code>, not <code>MyURLClass</code>.</p>\n<h3>Conventions</h3>\n<p>Each language has its own style guide.</p>\n<ul>\n<li>C# allows for two letter acronyms to be all uppercased (pascal or camel case) or lowercased (when first word of camel case), but bigger acronyms should behave like normal words.</li>\n<li>Java doesn't have a single convention, but in practice you could use .NET as reference, as <a href=\"https://stackoverflow.com/a/7366332/6704959\">explained at another SO question</a>:</li>\n</ul>\n<blockquote>\n<p>For Java:</p>\n<p>For 4+ letter acronyms, use mixed case. The standard library does\nthis, and it just makes good sense.</p>\n<p>For 3 letter acronyms, you can use all uppercase like the JCL, or you\ncan use mixed case like the .NET Framework does. Either way, be\nconsistent.</p>\n<p>For 2 letter acronyms, use all uppercase.</p>\n<p>For 2 letter abbreviations, Java does not really have a standard, but\nI suggest using mixed case, unless consistency with other names would\nmake all uppercase look better.</p>\n</blockquote>\n<h3>If you're came here thinking of each letter of an acronym as a different word, think again</h3>\n<p>If that's your reasoning, analyse this:</p>\n<p>By considering each letter a different word, a class of name <code>XMLDBParser</code> (in PascalCase) <strong>for consistency,</strong> would have identifiers looking like <code>xMLDBParser</code> (in camelCase). And that doesn't make any sense as naming convention.</p>\n"}],"owner":{"account_id":114839,"reputation":23525,"user_id":301816,"accept_rate":84,"display_name":"stevebot"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13181,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":4504521,"answer_count":8,"score":42,"last_activity_date":1691584797,"creation_date":1292970138,"question_id":4504508,"body_markdown":"This question may seem pedantic or just silly, but what is your practice for camel casing when it comes to acronyms? Do you insist that everything, even acronyms must be camel cased, or do you make an exception for acronyms. Explanations would be great too. I&#39;m not sure how this practice effects IDE features (autocomplete) or what the industry standard are.","title":"Camel casing acronyms?","body":"<p>This question may seem pedantic or just silly, but what is your practice for camel casing when it comes to acronyms? Do you insist that everything, even acronyms must be camel cased, or do you make an exception for acronyms. Explanations would be great too. I'm not sure how this practice effects IDE features (autocomplete) or what the industry standard are.</p>\n"},{"tags":["java","maven","java-11","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1621521113,"post_id":67621344,"comment_id":119526031,"body_markdown":"Tried upgrading to the latest version of the plugin as well? Their [Github issues](https://github.com/mojohaus/aspectj-maven-plugin/issues) seems to be passive as well. At least the AspectJ [release notes, with 1.9.0](https://www.eclipse.org/aspectj/doc/released/README-190.html) states a way to perform what you desire.","body":"Tried upgrading to the latest version of the plugin as well? Their <a href=\"https://github.com/mojohaus/aspectj-maven-plugin/issues\" rel=\"nofollow noreferrer\">Github issues</a> seems to be passive as well. At least the AspectJ <a href=\"https://www.eclipse.org/aspectj/doc/released/README-190.html\" rel=\"nofollow noreferrer\">release notes, with 1.9.0</a> states a way to perform what you desire."}],"answers":[{"tags":[],"owner":{"account_id":1003622,"reputation":516,"user_id":1017901,"display_name":"bodrin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691584793,"creation_date":1691584793,"answer_id":76867886,"question_id":67621344,"body_markdown":"See\r\n\r\nhttps://github.com/eclipse-aspectj/aspectj/pull/146#issuecomment-1079883826\r\n\r\nhttps://github.com/mojohaus/aspectj-maven-plugin/issues/139\r\n\r\nhttps://github.com/eclipse-aspectj/aspectj/issues/145\r\n\r\nExamples using other two different packages that I needed for \r\n\r\n          import sun.security.tools.keytool.CertAndKeyGen;\r\n          import sun.security.x509.X500Name;\r\n\r\nbut you get the idea:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;!--fixes:\r\n                                   [ERROR] exporting a package from system module java.base is not allowed with &amp;#45;&amp;#45;releas--&gt;\r\n                    &lt;release combine.self=&quot;override&quot;/&gt;\r\n\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                        &lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\r\n                        \r\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                        &lt;arg&gt;java.base/sun.security.tools.keytool=ALL-UNNAMED&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                    &lt;!-- this fixes: [142,6] error: cannot find symbol [ERROR]   symbol:   class sun.security.tools.keytool.CertAndKeyGen --&gt;\r\n\r\n                    &lt;source&gt;${java.source.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.target.version}&lt;/target&gt;\r\n                    &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\r\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\r\n\r\n            &lt;!-- AspectJ Compile Time Weaving --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${java.source.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.target.version}&lt;/target&gt;\r\n                    &lt;complianceLevel&gt;${java.target.version}&lt;/complianceLevel&gt;\r\n                    &lt;XnoInline&gt;true&lt;/XnoInline&gt;\r\n                    &lt;aspectLibraries&gt;\r\n                        &lt;aspectLibrary&gt;\r\n                            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n                        &lt;/aspectLibrary&gt;\r\n                    &lt;/aspectLibraries&gt;\r\n                    &lt;verbose&gt;true&lt;/verbose&gt;\r\n                    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n                    &lt;additionalCompilerArgs&gt;\r\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                        &lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\r\n                        \r\n                        &lt;!-- fix for:                       [ERROR]   (package sun.security.tools.keytool is declared in module java.base, which does not export it)--&gt;\r\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                        &lt;arg&gt;java.base/sun.security.tools.keytool=ALL-UNNAMED&lt;/arg&gt;\r\n                    &lt;/additionalCompilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\r\n                        &lt;version&gt;${org.aspectj.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                            &lt;goal&gt;test-compile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n","title":"aspecj accessing sun packages in java 11","body":"<p>See</p>\n<p><a href=\"https://github.com/eclipse-aspectj/aspectj/pull/146#issuecomment-1079883826\" rel=\"nofollow noreferrer\">https://github.com/eclipse-aspectj/aspectj/pull/146#issuecomment-1079883826</a></p>\n<p><a href=\"https://github.com/mojohaus/aspectj-maven-plugin/issues/139\" rel=\"nofollow noreferrer\">https://github.com/mojohaus/aspectj-maven-plugin/issues/139</a></p>\n<p><a href=\"https://github.com/eclipse-aspectj/aspectj/issues/145\" rel=\"nofollow noreferrer\">https://github.com/eclipse-aspectj/aspectj/issues/145</a></p>\n<p>Examples using other two different packages that I needed for</p>\n<pre><code>      import sun.security.tools.keytool.CertAndKeyGen;\n      import sun.security.x509.X500Name;\n</code></pre>\n<p>but you get the idea:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;!--fixes:\n                               [ERROR] exporting a package from system module java.base is not allowed with &amp;#45;&amp;#45;releas--&gt;\n                &lt;release combine.self=&quot;override&quot;/&gt;\n\n                &lt;compilerArgs&gt;\n                    &lt;arg&gt;--add-exports&lt;/arg&gt;\n                    &lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\n                    \n                    &lt;arg&gt;--add-exports&lt;/arg&gt;\n                    &lt;arg&gt;java.base/sun.security.tools.keytool=ALL-UNNAMED&lt;/arg&gt;\n                &lt;/compilerArgs&gt;\n                &lt;!-- this fixes: [142,6] error: cannot find symbol [ERROR]   symbol:   class sun.security.tools.keytool.CertAndKeyGen --&gt;\n\n                &lt;source&gt;${java.source.version}&lt;/source&gt;\n                &lt;target&gt;${java.target.version}&lt;/target&gt;\n                &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n                &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n\n\n        &lt;!-- AspectJ Compile Time Weaving --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${java.source.version}&lt;/source&gt;\n                &lt;target&gt;${java.target.version}&lt;/target&gt;\n                &lt;complianceLevel&gt;${java.target.version}&lt;/complianceLevel&gt;\n                &lt;XnoInline&gt;true&lt;/XnoInline&gt;\n                &lt;aspectLibraries&gt;\n                    &lt;aspectLibrary&gt;\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n                    &lt;/aspectLibrary&gt;\n                &lt;/aspectLibraries&gt;\n                &lt;verbose&gt;true&lt;/verbose&gt;\n                &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n                &lt;additionalCompilerArgs&gt;\n                    &lt;arg&gt;--add-exports&lt;/arg&gt;\n                    &lt;arg&gt;java.base/sun.security.x509=ALL-UNNAMED&lt;/arg&gt;\n                    \n                    &lt;!-- fix for:                       [ERROR]   (package sun.security.tools.keytool is declared in module java.base, which does not export it)--&gt;\n                    &lt;arg&gt;--add-exports&lt;/arg&gt;\n                    &lt;arg&gt;java.base/sun.security.tools.keytool=ALL-UNNAMED&lt;/arg&gt;\n                &lt;/additionalCompilerArgs&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n                    &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\n                    &lt;version&gt;${org.aspectj.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;goal&gt;test-compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":20808929,"reputation":11,"user_id":15283306,"display_name":"Piyush Narula"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691584793,"creation_date":1621517468,"question_id":67621344,"body_markdown":"I am using ValidatorException class which is inside the package sun.security.validator.ValidatorException in java 11. But I am getting the following error :\r\n&gt;AJC compiler errors:\r\nThe type sun.security.validator.ValidatorException is not accessible\r\n\r\nIn maven compiler, i have fixed this problem using the compiler arguments --add-exports java.base/sun.security.validator=ALL-UNNAMED\r\n\r\nbut I don&#39;t know how to do with the AspectJ plugin.\r\n\r\nSnapshot of my pom.xml for maven compiler\r\n\r\n    &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;compilerArgs&gt;\r\n                &lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.validator=ALL-UNNAMED&lt;/arg&gt;\r\n              &lt;/compilerArgs&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-compile&lt;/id&gt;\r\n                &lt;phase&gt;none&lt;/phase&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nSnapshot my pom.xml for aspectj plugin\r\n\r\n      \r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.7&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n          &lt;verbose&gt;true&lt;/verbose&gt;\r\n          &lt;source&gt;11&lt;/source&gt;\r\n          &lt;target&gt;11&lt;/target&gt;\r\n          &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;compile-with-aspectj&lt;/id&gt;\r\n            &lt;phase&gt;compile&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;compile&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;weaveDirectories&gt;\r\n                &lt;weaveDirectory&gt;${project.build.outputDirectory}/aspectJ-classes&lt;/weaveDirectory&gt;\r\n              &lt;/weaveDirectories&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tools&lt;/artifactId&gt;\r\n            &lt;version&gt;11&lt;/version&gt;\r\n            &lt;scope&gt;system&lt;/scope&gt;\r\n            &lt;systemPath&gt;${project.basedir}/pom.xml&lt;/systemPath&gt;\r\n          &lt;/dependency&gt;\r\n    \r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.6&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.6&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n    \r\n        &lt;/dependencies&gt;\r\n      &lt;/plugin&gt;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"aspecj accessing sun packages in java 11","body":"<p>I am using ValidatorException class which is inside the package sun.security.validator.ValidatorException in java 11. But I am getting the following error :</p>\n<blockquote>\n<p>AJC compiler errors:\nThe type sun.security.validator.ValidatorException is not accessible</p>\n</blockquote>\n<p>In maven compiler, i have fixed this problem using the compiler arguments --add-exports java.base/sun.security.validator=ALL-UNNAMED</p>\n<p>but I don't know how to do with the AspectJ plugin.</p>\n<p>Snapshot of my pom.xml for maven compiler</p>\n<pre><code>&lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;compilerArgs&gt;\n            &lt;arg&gt;--add-exports&lt;/arg&gt;&lt;arg&gt;java.base/sun.security.validator=ALL-UNNAMED&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-compile&lt;/id&gt;\n            &lt;phase&gt;none&lt;/phase&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Snapshot my pom.xml for aspectj plugin</p>\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.7&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n      &lt;verbose&gt;true&lt;/verbose&gt;\n      &lt;source&gt;11&lt;/source&gt;\n      &lt;target&gt;11&lt;/target&gt;\n      &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;compile-with-aspectj&lt;/id&gt;\n        &lt;phase&gt;compile&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;compile&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n          &lt;weaveDirectories&gt;\n            &lt;weaveDirectory&gt;${project.build.outputDirectory}/aspectJ-classes&lt;/weaveDirectory&gt;\n          &lt;/weaveDirectories&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;com.sun&lt;/groupId&gt;\n        &lt;artifactId&gt;tools&lt;/artifactId&gt;\n        &lt;version&gt;11&lt;/version&gt;\n        &lt;scope&gt;system&lt;/scope&gt;\n        &lt;systemPath&gt;${project.basedir}/pom.xml&lt;/systemPath&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;version&gt;1.9.6&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjtools&lt;/artifactId&gt;\n        &lt;version&gt;1.9.6&lt;/version&gt;\n      &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n  &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","json","spring","mongodb","oauth-2.0"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691677599,"post_id":76867479,"comment_id":135526285,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691584755,"creation_date":1691584755,"answer_id":76867880,"question_id":76867479,"body_markdown":"A general remark: it seems like you are trying to merge a command (change the state) and a query (retrieve the state) at the same time. This is generally not recommended, but of course I don&#39;t know your exact use-case.\r\n\r\nThis being said, if your query is located in a repository extending [`MongoRepository`](https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html), you can do operations like save, find, delete, count, exists, ... (and use customize those by using attributes of your entity, see [Defining Query Methods](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.details).\r\n\r\nHowever, if you want to leverage more specific MongoDB capabilities like updating or upserting, you would better use `MongoTemplate` or `MongoOperations`\r\n\r\n```\r\n@Component\r\npublic class RepositoryImpl {\r\n\r\n\tprivate final MongoTemplate mongoTemplate;\r\n\r\n\tpublic RepositoryImpl (MongoTemplate mongoTemplate) {\r\n\t\tthis.mongoTemplate = mongoTemplate;\r\n\t}\r\n\r\n\tpublic void updateMulti(...) {\r\n\t\tQuery query = new Query();\r\n\t\tquery.addCriteria(...);\r\n\t\tUpdate update = new Update();\r\n\t\tupdate.set(...);\r\n\t\tUpdateResult updateResult = mongoTemplate.updateMulti(query, update, Entity.class);\r\n\t}\r\n}\r\n```\r\n\r\nDo note that `update`, `updateMulti` or `upsert` will not return the updated data, but the can get the modifiedCount from the `UpdateResult`.","title":"@Query(&quot;{&#39;ao.status&#39;: ?0, &#39;ao.otp_type&#39;: ?1}&quot;) void updateOtpStatus(String otpStatus, String otpType); query is giving null result what can be ans","body":"<p>A general remark: it seems like you are trying to merge a command (change the state) and a query (retrieve the state) at the same time. This is generally not recommended, but of course I don't know your exact use-case.</p>\n<p>This being said, if your query is located in a repository extending <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html\" rel=\"nofollow noreferrer\"><code>MongoRepository</code></a>, you can do operations like save, find, delete, count, exists, ... (and use customize those by using attributes of your entity, see <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.details\" rel=\"nofollow noreferrer\">Defining Query Methods</a>.</p>\n<p>However, if you want to leverage more specific MongoDB capabilities like updating or upserting, you would better use <code>MongoTemplate</code> or <code>MongoOperations</code></p>\n<pre><code>@Component\npublic class RepositoryImpl {\n\n    private final MongoTemplate mongoTemplate;\n\n    public RepositoryImpl (MongoTemplate mongoTemplate) {\n        this.mongoTemplate = mongoTemplate;\n    }\n\n    public void updateMulti(...) {\n        Query query = new Query();\n        query.addCriteria(...);\n        Update update = new Update();\n        update.set(...);\n        UpdateResult updateResult = mongoTemplate.updateMulti(query, update, Entity.class);\n    }\n}\n</code></pre>\n<p>Do note that <code>update</code>, <code>updateMulti</code> or <code>upsert</code> will not return the updated data, but the can get the modifiedCount from the <code>UpdateResult</code>.</p>\n"}],"owner":{"account_id":29191580,"reputation":11,"user_id":22363603,"display_name":"Kajal Juwar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691584755,"creation_date":1691581662,"question_id":76867479,"body_markdown":"give a query for mongodb to update the status of certain rows in a database table named &quot;auth_otp&quot;. It will change the status to &#39;INACTIVE&#39; for rows that match the provided otpStatus and otpType\r\n\r\nTried this-\r\n@Query(&quot;{&#39;ao.status&#39;: ?0, &#39;ao.otp_type&#39;: ?1}&quot;)\r\n&#160; &#160; void updateOtpStatus(String otpStatus, String otpType);\r\n\r\n\r\n\r\nexpected - want updated rows or updated data\r\n","title":"@Query(&quot;{&#39;ao.status&#39;: ?0, &#39;ao.otp_type&#39;: ?1}&quot;) void updateOtpStatus(String otpStatus, String otpType); query is giving null result what can be ans","body":"<p>give a query for mongodb to update the status of certain rows in a database table named &quot;auth_otp&quot;. It will change the status to 'INACTIVE' for rows that match the provided otpStatus and otpType</p>\n<p>Tried this-\n@Query(&quot;{'ao.status': ?0, 'ao.otp_type': ?1}&quot;)\n    void updateOtpStatus(String otpStatus, String otpType);</p>\n<p>expected - want updated rows or updated data</p>\n"},{"tags":["java","android","pdf"],"owner":{"account_id":28625477,"reputation":81,"user_id":21917572,"display_name":"abhishek_6198"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691584265,"creation_date":1691584265,"question_id":76867818,"body_markdown":"I want to render a PDF file from the URL. The file is stored in my server. This is my code:\r\n\r\n```\r\nPDFView pdf = new PDFView(MainActivity.this,null); \r\npdf.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT,RelativeLayout.LayoutParams.MATCH_PARENT));\r\nString pdfUrl = &quot;https://....&quot;;\r\nnew Thread(() -&gt; {\r\n     try {\r\n         URL url = new URL(pdfUrl);\r\n         HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n         InputStream stream = new BufferedInputStream(connection.getInputStream());\r\n         pdf.fromStream(stream)\r\n             .onLoad(nbPages -&gt; { layout.addView(pdf);})\r\n             .onPageChange((page, pageCount) -&gt; { })\r\n             .load();\r\n         connection.disconnect();\r\n     } catch (IOException e) {  e.printStackTrace(); }\r\n}).start();\r\n```\r\nStrangely, the `PDFView` doesn&#39;t render the file, the parent `layout` is completely blank. When I run the `pdfUrl` in my browser, it shows the PDF file. So my url is correct.\r\n\r\nThen where does the problem lie? Why isn&#39;t the file rendering?","title":"How do I render a PDF file from the URL in android using barteksc PDFView library?","body":"<p>I want to render a PDF file from the URL. The file is stored in my server. This is my code:</p>\n<pre><code>PDFView pdf = new PDFView(MainActivity.this,null); \npdf.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT,RelativeLayout.LayoutParams.MATCH_PARENT));\nString pdfUrl = &quot;https://....&quot;;\nnew Thread(() -&gt; {\n     try {\n         URL url = new URL(pdfUrl);\n         HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n         InputStream stream = new BufferedInputStream(connection.getInputStream());\n         pdf.fromStream(stream)\n             .onLoad(nbPages -&gt; { layout.addView(pdf);})\n             .onPageChange((page, pageCount) -&gt; { })\n             .load();\n         connection.disconnect();\n     } catch (IOException e) {  e.printStackTrace(); }\n}).start();\n</code></pre>\n<p>Strangely, the <code>PDFView</code> doesn't render the file, the parent <code>layout</code> is completely blank. When I run the <code>pdfUrl</code> in my browser, it shows the PDF file. So my url is correct.</p>\n<p>Then where does the problem lie? Why isn't the file rendering?</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","mapstruct"],"answers":[{"comments":[{"owner":{"account_id":17875756,"reputation":106,"user_id":12985876,"display_name":"Taras"},"score":0,"creation_date":1691654833,"post_id":76867770,"comment_id":135521531,"body_markdown":"Sometimes I think that stackoverflow is dead :(","body":"Sometimes I think that stackoverflow is dead :("}],"tags":[],"owner":{"account_id":17875756,"reputation":106,"user_id":12985876,"display_name":"Taras"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691583945,"creation_date":1691583945,"answer_id":76867770,"question_id":76857272,"body_markdown":"I rewrote my method in SampleShipmentDiscrepanciesUpdateUseCase to set it directly. I still don&#39;t understand what is the problem. And why MapStruct can&#39;t automatically map it properly. \r\n\r\n\r\n      public SampleShipmentDiscrepanciesUpdateResponse execute(long id, SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\r\n        SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity = sampleShipmentDiscrepanciesStore.load(id, IncludeFilter.EXCLUDE);\r\n        mapper.fromUpdateRequest(updateRequest, sampleShipmentDiscrepanciesEntity);\r\n        sampleShipmentDiscrepanciesEntity.setSampleShipment(sampleShipmentStore.load(updateRequest.getSampleShipmentId()));\r\n        sampleShipmentDiscrepanciesEntity.setSample(sampleRepository.findById(updateRequest.getSampleId())\r\n            .orElseThrow(SampleNotFoundException::new));\r\n        SampleShipmentDiscrepanciesEntity updatedSampleShipmentDiscrepanciesEntity =\r\n            sampleShipmentDiscrepanciesStore.save(sampleShipmentDiscrepanciesEntity);\r\n        return mapper.toUpdateResponse(updatedSampleShipmentDiscrepanciesEntity);\r\n      }\r\n\r\n","title":"Can&#39;t update table. Showing &quot;identifier of an instance altered from X to Y&quot;?","body":"<p>I rewrote my method in SampleShipmentDiscrepanciesUpdateUseCase to set it directly. I still don't understand what is the problem. And why MapStruct can't automatically map it properly.</p>\n<pre><code>  public SampleShipmentDiscrepanciesUpdateResponse execute(long id, SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\n    SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity = sampleShipmentDiscrepanciesStore.load(id, IncludeFilter.EXCLUDE);\n    mapper.fromUpdateRequest(updateRequest, sampleShipmentDiscrepanciesEntity);\n    sampleShipmentDiscrepanciesEntity.setSampleShipment(sampleShipmentStore.load(updateRequest.getSampleShipmentId()));\n    sampleShipmentDiscrepanciesEntity.setSample(sampleRepository.findById(updateRequest.getSampleId())\n        .orElseThrow(SampleNotFoundException::new));\n    SampleShipmentDiscrepanciesEntity updatedSampleShipmentDiscrepanciesEntity =\n        sampleShipmentDiscrepanciesStore.save(sampleShipmentDiscrepanciesEntity);\n    return mapper.toUpdateResponse(updatedSampleShipmentDiscrepanciesEntity);\n  }\n</code></pre>\n"}],"owner":{"account_id":17875756,"reputation":106,"user_id":12985876,"display_name":"Taras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691583945,"creation_date":1691479343,"question_id":76857272,"body_markdown":"I want to update: **sampleShipmentId**, **sampleId**, **description** in my **SampleShipmentDiscrepanciesEntity** \r\nI’m using Spring Boot, Java 17, Hibernate, JPA, MapStruct and Lombok. \r\nError message:\r\n&gt; org.springframework.orm.jpa.JpaSystemException: identifier of an\r\n&gt; instance of domain.sampleshipment.persistence.SampleShipmentEntity was\r\n&gt; altered from 3 to 1; nested exception is\r\n&gt; org.hibernate.HibernateException: identifier of an instance of\r\n&gt; domain.sampleshipment.persistence.SampleShipmentEntity was altered\r\n&gt; from 3 to 1]\r\n\r\n    @Service\r\n    @Transactional\r\n    @RequiredArgsConstructor\r\n    public class SampleShipmentDiscrepanciesUpdateUseCase {\r\n      private final SampleShipmentDiscrepanciesStore store;\r\n      private final DtoMapper mapper;\r\n    \r\n      public SampleShipmentDiscrepanciesUpdateResponse execute(long id, SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\r\n        SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity = store.load(id, IncludeFilter.EXCLUDE);\r\n        mapper.fromUpdateRequest(updateRequest, sampleShipmentDiscrepanciesEntity);\r\n        sampleShipmentDiscrepanciesEntity = store.save(sampleShipmentDiscrepanciesEntity);\r\n        return mapper.toUpdateResponse(sampleShipmentDiscrepanciesEntity);\r\n      }\r\n    \r\n      @Mapper(componentModel = &quot;spring&quot;)\r\n      interface DtoMapper {\r\n    \r\n        @Mapping(target = &quot;sampleShipment.id&quot;, source = &quot;sampleShipmentId&quot;)\r\n        @Mapping(target = &quot;sample.id&quot;, source = &quot;sampleId&quot;)\r\n        void fromUpdateRequest(SampleShipmentDiscrepanciesUpdateRequest updateRequest,\r\n                                                          @MappingTarget SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity);\r\n    \r\n        @Mapping(source = &quot;sampleShipmentDiscrepanciesEntity.sampleShipment.id&quot;, target = &quot;sampleShipmentId&quot;)\r\n        @Mapping(source = &quot;sampleShipmentDiscrepanciesEntity.sample.id&quot;, target = &quot;sampleId&quot;)\r\n        SampleShipmentDiscrepanciesUpdateResponse toUpdateResponse(SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity);\r\n      }\r\n    }\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class SampleShipmentDiscrepanciesUpdateRequest {\r\n      private long sampleShipmentId;\r\n      private long sampleId;\r\n      private String description;\r\n    }\r\n    \r\n    \r\n    @Entity\r\n    @Table(name = &quot;sample_shipment_discrepancies&quot;)\r\n    @Getter\r\n    @Setter\r\n    @ToString(onlyExplicitlyIncluded = true)\r\n    public class SampleShipmentDiscrepanciesEntity {\r\n    \r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      @Column(name = &quot;id&quot;)\r\n      @ToString.Include\r\n      private Long id;\r\n    \r\n      @ManyToOne(fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;sample_shipment_id&quot;, nullable = false)\r\n      private SampleShipmentEntity sampleShipment; // it has id that I want to map\r\n    \r\n      @ManyToOne(fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;sample_id&quot;)\r\n      private SampleEntity sample;// it has id that I want to map\r\n    \r\n      @Column(name = &quot;description&quot;, nullable = false)\r\n      @ToString.Include\r\n      private String description;\r\n    }\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class SampleShipmentDiscrepanciesUpdateResponse {\r\n      private long id;\r\n      private long sampleShipmentId;\r\n      private long sampleId;\r\n      private String description;\r\n    }\r\n    \r\n    \r\n    @PutMapping(&quot;/{id}&quot;)\r\n    public SampleShipmentDiscrepanciesUpdateResponse update(@PathVariable long id, @RequestBody SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\r\n      return sampleShipmentDiscrepanciesUpdateUseCase.execute(id, updateRequest);\r\n    }\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    @NoTransactional\r\n    class SampleShipmentDiscrepanciesStoreAdapter implements SampleShipmentDiscrepanciesStore {\r\n      private final SampleShipmentDiscrepanciesRepository repository;\r\n    \r\n       @Override\r\n      public SampleShipmentDiscrepanciesEntity load(final long id, IncludeFilter deleted) {\r\n        Specification&lt;SampleShipmentDiscrepanciesEntity&gt; spec = SpecificationHelper.create(FilterBuilder.equal(&quot;id&quot;, id));\r\n        spec = SpecificationHelper.addDeletedFilter(spec, deleted);\r\n        return repository.findOne(spec).orElseThrow(SampleShipmentDiscrepanciesNotFoundException::new);\r\n      }\r\n    \r\n      @Override\r\n      public SampleShipmentDiscrepanciesEntity save(final SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity) {\r\n        return repository.save(sampleShipmentDiscrepanciesEntity);\r\n      }\r\n    \r\n    \r\n      @Repository\r\n      interface SampleShipmentDiscrepanciesRepository extends JpaRepository&lt;SampleShipmentDiscrepanciesEntity, Long&gt;,\r\n          JpaSpecificationExecutor&lt;SampleShipmentDiscrepanciesEntity&gt; {\r\n      }\r\n    }\r\n\r\n","title":"Can&#39;t update table. Showing &quot;identifier of an instance altered from X to Y&quot;?","body":"<p>I want to update: <strong>sampleShipmentId</strong>, <strong>sampleId</strong>, <strong>description</strong> in my <strong>SampleShipmentDiscrepanciesEntity</strong>\nI’m using Spring Boot, Java 17, Hibernate, JPA, MapStruct and Lombok.\nError message:</p>\n<blockquote>\n<p>org.springframework.orm.jpa.JpaSystemException: identifier of an\ninstance of domain.sampleshipment.persistence.SampleShipmentEntity was\naltered from 3 to 1; nested exception is\norg.hibernate.HibernateException: identifier of an instance of\ndomain.sampleshipment.persistence.SampleShipmentEntity was altered\nfrom 3 to 1]</p>\n</blockquote>\n<pre><code>@Service\n@Transactional\n@RequiredArgsConstructor\npublic class SampleShipmentDiscrepanciesUpdateUseCase {\n  private final SampleShipmentDiscrepanciesStore store;\n  private final DtoMapper mapper;\n\n  public SampleShipmentDiscrepanciesUpdateResponse execute(long id, SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\n    SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity = store.load(id, IncludeFilter.EXCLUDE);\n    mapper.fromUpdateRequest(updateRequest, sampleShipmentDiscrepanciesEntity);\n    sampleShipmentDiscrepanciesEntity = store.save(sampleShipmentDiscrepanciesEntity);\n    return mapper.toUpdateResponse(sampleShipmentDiscrepanciesEntity);\n  }\n\n  @Mapper(componentModel = &quot;spring&quot;)\n  interface DtoMapper {\n\n    @Mapping(target = &quot;sampleShipment.id&quot;, source = &quot;sampleShipmentId&quot;)\n    @Mapping(target = &quot;sample.id&quot;, source = &quot;sampleId&quot;)\n    void fromUpdateRequest(SampleShipmentDiscrepanciesUpdateRequest updateRequest,\n                                                      @MappingTarget SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity);\n\n    @Mapping(source = &quot;sampleShipmentDiscrepanciesEntity.sampleShipment.id&quot;, target = &quot;sampleShipmentId&quot;)\n    @Mapping(source = &quot;sampleShipmentDiscrepanciesEntity.sample.id&quot;, target = &quot;sampleId&quot;)\n    SampleShipmentDiscrepanciesUpdateResponse toUpdateResponse(SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity);\n  }\n}\n\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SampleShipmentDiscrepanciesUpdateRequest {\n  private long sampleShipmentId;\n  private long sampleId;\n  private String description;\n}\n\n\n@Entity\n@Table(name = &quot;sample_shipment_discrepancies&quot;)\n@Getter\n@Setter\n@ToString(onlyExplicitlyIncluded = true)\npublic class SampleShipmentDiscrepanciesEntity {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;id&quot;)\n  @ToString.Include\n  private Long id;\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;sample_shipment_id&quot;, nullable = false)\n  private SampleShipmentEntity sampleShipment; // it has id that I want to map\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;sample_id&quot;)\n  private SampleEntity sample;// it has id that I want to map\n\n  @Column(name = &quot;description&quot;, nullable = false)\n  @ToString.Include\n  private String description;\n}\n\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SampleShipmentDiscrepanciesUpdateResponse {\n  private long id;\n  private long sampleShipmentId;\n  private long sampleId;\n  private String description;\n}\n\n\n@PutMapping(&quot;/{id}&quot;)\npublic SampleShipmentDiscrepanciesUpdateResponse update(@PathVariable long id, @RequestBody SampleShipmentDiscrepanciesUpdateRequest updateRequest) {\n  return sampleShipmentDiscrepanciesUpdateUseCase.execute(id, updateRequest);\n}\n\n@Service\n@RequiredArgsConstructor\n@NoTransactional\nclass SampleShipmentDiscrepanciesStoreAdapter implements SampleShipmentDiscrepanciesStore {\n  private final SampleShipmentDiscrepanciesRepository repository;\n\n   @Override\n  public SampleShipmentDiscrepanciesEntity load(final long id, IncludeFilter deleted) {\n    Specification&lt;SampleShipmentDiscrepanciesEntity&gt; spec = SpecificationHelper.create(FilterBuilder.equal(&quot;id&quot;, id));\n    spec = SpecificationHelper.addDeletedFilter(spec, deleted);\n    return repository.findOne(spec).orElseThrow(SampleShipmentDiscrepanciesNotFoundException::new);\n  }\n\n  @Override\n  public SampleShipmentDiscrepanciesEntity save(final SampleShipmentDiscrepanciesEntity sampleShipmentDiscrepanciesEntity) {\n    return repository.save(sampleShipmentDiscrepanciesEntity);\n  }\n\n\n  @Repository\n  interface SampleShipmentDiscrepanciesRepository extends JpaRepository&lt;SampleShipmentDiscrepanciesEntity, Long&gt;,\n      JpaSpecificationExecutor&lt;SampleShipmentDiscrepanciesEntity&gt; {\n  }\n}\n</code></pre>\n"},{"tags":["java","kotlin","gradle","jar","firebase-admin"],"answers":[{"tags":[],"owner":{"account_id":7174689,"reputation":822,"user_id":5481069,"display_name":"Psijic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691583745,"creation_date":1691583745,"answer_id":76867747,"question_id":76820531,"body_markdown":"Seems ok after updating Java from 17 to 19 and add\r\n\r\n        exclude(&quot;META-INF/*.SF&quot;)\r\n        exclude(&quot;META-INF/*.DSA&quot;)\r\n        exclude(&quot;META-INF/*.RSA&quot;)","title":"Can&#39;t build .jar file with firebase-admin-java","body":"<p>Seems ok after updating Java from 17 to 19 and add</p>\n<pre><code>    exclude(&quot;META-INF/*.SF&quot;)\n    exclude(&quot;META-INF/*.DSA&quot;)\n    exclude(&quot;META-INF/*.RSA&quot;)\n</code></pre>\n"}],"owner":{"account_id":7174689,"reputation":822,"user_id":5481069,"display_name":"Psijic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691583745,"creation_date":1690983939,"question_id":76820531,"body_markdown":"[This bug][1] prevents to use firebase-admin in pure Java/Kotlin projects. Is there a known fix/ad-hoc?\r\n\r\n&gt; The error happens after running the .jar:\r\n&gt; \r\n&gt;     Error: Could not find or load main class MainKt\r\n&gt; \r\n&gt; It looks like the problem appears because of firebase:\r\n&gt; \r\n&gt;     implementation(&quot;com.google.firebase:firebase-admin:9.2.0&quot;)\r\n&gt; \r\n&gt; Adding it in an empty project provides this error while all is ok\r\n&gt; without this dependency.\r\n\r\n\r\n  [1]: https://github.com/firebase/firebase-admin-java/issues/845","title":"Can&#39;t build .jar file with firebase-admin-java","body":"<p><a href=\"https://github.com/firebase/firebase-admin-java/issues/845\" rel=\"nofollow noreferrer\">This bug</a> prevents to use firebase-admin in pure Java/Kotlin projects. Is there a known fix/ad-hoc?</p>\n<blockquote>\n<p>The error happens after running the .jar:</p>\n<pre><code>Error: Could not find or load main class MainKt\n</code></pre>\n<p>It looks like the problem appears because of firebase:</p>\n<pre><code>implementation(&quot;com.google.firebase:firebase-admin:9.2.0&quot;)\n</code></pre>\n<p>Adding it in an empty project provides this error while all is ok\nwithout this dependency.</p>\n</blockquote>\n"},{"tags":["java","postgresql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691507355,"post_id":76860857,"comment_id":135499497,"body_markdown":"The code you posted doesn&#39;t even compile. `&quot;\\_&quot;` is an illegal escape. Either way, you probably need to have a double escape &quot;\\\\\\\\&quot;, so that it&#39;s going into the SQL still correctly escaped.","body":"The code you posted doesn&#39;t even compile. <code>&quot;\\_&quot;</code> is an illegal escape. Either way, you probably need to have a double escape &quot;\\\\\\\\&quot;, so that it&#39;s going into the SQL still correctly escaped."},{"owner":{"account_id":10728310,"reputation":53,"user_id":7895169,"display_name":"KonradK"},"score":0,"creation_date":1691520720,"post_id":76860857,"comment_id":135502093,"body_markdown":"I&#39;ve edited the question :). However, the problem is that the escape character is a char, not a string, so you can&#39;t really use double escape","body":"I&#39;ve edited the question :). However, the problem is that the escape character is a char, not a string, so you can&#39;t really use double escape"},{"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"score":1,"creation_date":1694154088,"post_id":76860857,"comment_id":135856487,"body_markdown":"I have the same problem using Spring Data JPA repoository. For example I do not have special characters in search term, but I receive this query. `select id, name from table where name like &#39;%test%&#39; escape !`, and this is not valid query in MySQL. I saw that HQL is correct with quotes around `!`, but when it is transformed to real query string, it is missing quotes. This was correct in previous version of Hibernate.","body":"I have the same problem using Spring Data JPA repoository. For example I do not have special characters in search term, but I receive this query. <code>select id, name from table where name like &#39;%test%&#39; escape !</code>, and this is not valid query in MySQL. I saw that HQL is correct with quotes around <code>!</code>, but when it is transformed to real query string, it is missing quotes. This was correct in previous version of Hibernate."},{"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"score":0,"creation_date":1694175651,"post_id":76860857,"comment_id":135860456,"body_markdown":"We upgraded Spring Boot to 3.1.3 and Hibernate to 6.2.7.Final. Also we were using hypersistence-utils version 3.5.0. When we upgraded hypersistence-utils to 3.5.2, everything worked correctly. I am no sure is it something in some of those dependencies, but it fixed our problem, so maybe it will give you some idea for your problem. I think that Spring Boo and Hibernate Version upgrade did not have much effect, but just in case. Cheers.","body":"We upgraded Spring Boot to 3.1.3 and Hibernate to 6.2.7.Final. Also we were using hypersistence-utils version 3.5.0. When we upgraded hypersistence-utils to 3.5.2, everything worked correctly. I am no sure is it something in some of those dependencies, but it fixed our problem, so maybe it will give you some idea for your problem. I think that Spring Boo and Hibernate Version upgrade did not have much effect, but just in case. Cheers."}],"owner":{"account_id":10728310,"reputation":53,"user_id":7895169,"display_name":"KonradK"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691583542,"creation_date":1691507215,"question_id":76860857,"body_markdown":"I am using *Spring Boot 3.1.2* with *Hibernate 6.2.6.Final* version with PostgreSQL and I&#39;ve encountered a problem in *Criteria Builder* `like(Expression&lt;String&gt; x, String pattern, char escapeChar)` method (and equivalents).\r\nThe generated SQL query is invalid, when the escape char is set. \r\n\r\nExample: \r\n\r\nThe criteria built with following code:\r\n\r\n    String searchTerm = &quot;\\\\_&quot;;\r\n    cb.like(root.get(&quot;name&quot;), &quot;%&quot; + searchTerm + &quot;%&quot;, &#39;\\\\&#39;)\r\n\r\nresult in:\r\n`org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;\\&quot;`\r\n\r\nand the generated query is: `select name from project where name like ? escape \\`\r\n\r\nIs that a bug on Hibernate&#39;s side or is it possible to format the query in criteria builder so its syntax is correct for PostgreSQL (which is I believe: `select name from project where name like ? escape &#39;\\&#39;`, note the escape char is quoted in &#39;&#39;)","title":"Error in Criteria Builder LIKE clause when escaping a character","body":"<p>I am using <em>Spring Boot 3.1.2</em> with <em>Hibernate 6.2.6.Final</em> version with PostgreSQL and I've encountered a problem in <em>Criteria Builder</em> <code>like(Expression&lt;String&gt; x, String pattern, char escapeChar)</code> method (and equivalents).\nThe generated SQL query is invalid, when the escape char is set.</p>\n<p>Example:</p>\n<p>The criteria built with following code:</p>\n<pre><code>String searchTerm = &quot;\\\\_&quot;;\ncb.like(root.get(&quot;name&quot;), &quot;%&quot; + searchTerm + &quot;%&quot;, '\\\\')\n</code></pre>\n<p>result in:\n<code>org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;\\&quot;</code></p>\n<p>and the generated query is: <code>select name from project where name like ? escape \\</code></p>\n<p>Is that a bug on Hibernate's side or is it possible to format the query in criteria builder so its syntax is correct for PostgreSQL (which is I believe: <code>select name from project where name like ? escape '\\'</code>, note the escape char is quoted in '')</p>\n"},{"tags":["java","azure","maven","azure-functions"],"answers":[{"comments":[{"owner":{"account_id":9610071,"reputation":2910,"user_id":7134737,"accept_rate":45,"display_name":"ng.newbie"},"score":0,"creation_date":1691525025,"post_id":76862861,"comment_id":135502816,"body_markdown":"Nopes its still null. Try using the above code in an `HTTPTrigger`. I started the functions using the following command: `mvn clean package azure-functions:run`","body":"Nopes its still null. Try using the above code in an <code>HTTPTrigger</code>. I started the functions using the following command: <code>mvn clean package azure-functions:run</code>"},{"owner":{"account_id":7442305,"reputation":1217,"user_id":5659695,"display_name":"Daredevil"},"score":0,"creation_date":1691525471,"post_id":76862861,"comment_id":135502888,"body_markdown":"@ng.newbie When you define settings in the azure-functions-maven-plugin, those settings are applied during the deployment process to Azure. Therefore, when you&#39;re running the function locally, the settings you&#39;ve defined in the Maven configuration won&#39;t automatically apply to your local environment. You can either manually set the environment variables on your local machine or If you&#39;re using the Azure Functions Core Tools or the Visual Studio/VS Code Azure Functions extension, you can manually add the required application settings (environment variables) to the local.settings.json file","body":"@ng.newbie When you define settings in the azure-functions-maven-plugin, those settings are applied during the deployment process to Azure. Therefore, when you&#39;re running the function locally, the settings you&#39;ve defined in the Maven configuration won&#39;t automatically apply to your local environment. You can either manually set the environment variables on your local machine or If you&#39;re using the Azure Functions Core Tools or the Visual Studio/VS Code Azure Functions extension, you can manually add the required application settings (environment variables) to the local.settings.json file"},{"owner":{"account_id":9610071,"reputation":2910,"user_id":7134737,"accept_rate":45,"display_name":"ng.newbie"},"score":0,"creation_date":1691525666,"post_id":76862861,"comment_id":135502924,"body_markdown":"it has to be passed as a command line argument. How do I do that? What I am trying to do involves passing the deployed commit version of the code so I can display that via an endpoint.","body":"it has to be passed as a command line argument. How do I do that? What I am trying to do involves passing the deployed commit version of the code so I can display that via an endpoint."},{"owner":{"account_id":7442305,"reputation":1217,"user_id":5659695,"display_name":"Daredevil"},"score":1,"creation_date":1691526015,"post_id":76862861,"comment_id":135502978,"body_markdown":"You can use azure cli to set the app configuration value after deploying azure function. az functionapp config appsettings set --name acmefunction2 --resource-group acmeapp --settings FUNCTIONS_WORKER_RUNTIME=node WEBSITE_RUN_FROM_PACKAGE=1 SCM_DO_BUILD_DURING_DEPLOYMENT=true","body":"You can use azure cli to set the app configuration value after deploying azure function. az functionapp config appsettings set --name acmefunction2 --resource-group acmeapp --settings FUNCTIONS_WORKER_RUNTIME=node WEBSITE_RUN_FROM_PACKAGE=1 SCM_DO_BUILD_DURING_DEPLOYMENT=true"},{"owner":{"account_id":9610071,"reputation":2910,"user_id":7134737,"accept_rate":45,"display_name":"ng.newbie"},"score":0,"creation_date":1691579766,"post_id":76862861,"comment_id":135510012,"body_markdown":"could you please add in the answer that it is only exposed as an env variable during the `deploy` phase?","body":"could you please add in the answer that it is only exposed as an env variable during the <code>deploy</code> phase?"}],"tags":[],"owner":{"account_id":7442305,"reputation":1217,"user_id":5659695,"display_name":"Daredevil"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691583429,"creation_date":1691524723,"answer_id":76862861,"question_id":76862805,"body_markdown":"In an Azure Function App, these application settings are set as environment variables. Therefore, in Java, you can access these settings using System.getenv() rather than System.getProperty().\r\n\r\nHere&#39;s how you would do it for the FUNCTIONS_EXTENSION_VERSION setting:\r\n\r\n\r\n    String functionsExtensionVersion = System.getenv(&quot;FUNCTIONS_EXTENSION_VERSION&quot;);\r\n    System.out.println(&quot;FUNCTIONS_EXTENSION_VERSION: &quot; + functionsExtensionVersion);\r\n\r\n\r\nWhen you define settings in the azure-functions-maven-plugin, those settings are applied during the deployment process to Azure. Therefore, when you&#39;re running the function locally, the settings you&#39;ve defined in the Maven configuration won&#39;t automatically apply to your local environment. You can either manually set the environment variables on your local machine or If you&#39;re using the Azure Functions Core Tools or the Visual Studio/VS Code Azure Functions extension, you can manually add the required application settings (environment variables) to the local.settings.json file\r\n\r\nYou can use azure cli to set the app configuration value after deploying azure function. \r\n\r\n```bash\r\naz functionapp config appsettings set --name acmefunction2 --resource-group acmeapp --settings FUNCTIONS_WORKER_RUNTIME=node WEBSITE_RUN_FROM_PACKAGE=1 SCM_DO_BUILD_DURING_DEPLOYMENT=true\r\n```","title":"How do you read appSettings variables from azure-maven-plugin in Java code?","body":"<p>In an Azure Function App, these application settings are set as environment variables. Therefore, in Java, you can access these settings using System.getenv() rather than System.getProperty().</p>\n<p>Here's how you would do it for the FUNCTIONS_EXTENSION_VERSION setting:</p>\n<pre><code>String functionsExtensionVersion = System.getenv(&quot;FUNCTIONS_EXTENSION_VERSION&quot;);\nSystem.out.println(&quot;FUNCTIONS_EXTENSION_VERSION: &quot; + functionsExtensionVersion);\n</code></pre>\n<p>When you define settings in the azure-functions-maven-plugin, those settings are applied during the deployment process to Azure. Therefore, when you're running the function locally, the settings you've defined in the Maven configuration won't automatically apply to your local environment. You can either manually set the environment variables on your local machine or If you're using the Azure Functions Core Tools or the Visual Studio/VS Code Azure Functions extension, you can manually add the required application settings (environment variables) to the local.settings.json file</p>\n<p>You can use azure cli to set the app configuration value after deploying azure function.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>az functionapp config appsettings set --name acmefunction2 --resource-group acmeapp --settings FUNCTIONS_WORKER_RUNTIME=node WEBSITE_RUN_FROM_PACKAGE=1 SCM_DO_BUILD_DURING_DEPLOYMENT=true\n</code></pre>\n"}],"owner":{"account_id":9610071,"reputation":2910,"user_id":7134737,"accept_rate":45,"display_name":"ng.newbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76862861,"answer_count":1,"score":0,"last_activity_date":1691583429,"creation_date":1691524174,"question_id":76862805,"body_markdown":"Is there a way to read the `&lt;appSettings&gt;` property values in java code ?\r\n\r\nhttps://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details\r\n\r\nI have tried to use `System.getProperty` but it is not set.\r\n\r\n**This is not a Spring Boot project.**\r\n\r\nIs there a way to set environment variables in the [azure-maven-plugin][1] ?\r\n\r\nMy azure-maven-plugin is the following:\r\n\r\n           &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;azure-functions-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${azure.functions.maven.plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;!-- function app name --&gt;\r\n                        &lt;appName&gt;${functionAppName}&lt;/appName&gt;\r\n                        &lt;!-- function app resource group --&gt;\r\n                        &lt;resourceGroup&gt;${resourceGroupName}&lt;/resourceGroup&gt;\r\n                        &lt;!-- function app service plan name --&gt;\r\n                        &lt;appServicePlanName&gt;${appServicePlanName}&lt;/appServicePlanName&gt;\r\n                        &lt;!-- function app region--&gt;\r\n                        &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-regions for all valid values --&gt;\r\n                        &lt;region&gt;${azure.region}&lt;/region&gt;\r\n                        &lt;!-- function pricingTier, default to be consumption if not specified --&gt;\r\n                        &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-pricing-tiers for all valid values --&gt;\r\n                        &lt;!-- &lt;pricingTier&gt;&lt;/pricingTier&gt; --&gt;\r\n    \r\n                        &lt;!-- Whether to disable application insights, default is false --&gt;\r\n                        &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details for all valid configurations for application insights--&gt;\r\n                        &lt;!-- &lt;disableAppInsights&gt;&lt;/disableAppInsights&gt; --&gt;\r\n                        &lt;runtime&gt;\r\n                            &lt;!-- runtime os, could be windows, linux or docker--&gt;\r\n                            &lt;os&gt;Linux&lt;/os&gt;\r\n                            &lt;javaVersion&gt;11&lt;/javaVersion&gt;\r\n                            &lt;!-- for docker function, please set the following parameters --&gt;\r\n                            &lt;!-- &lt;image&gt;[hub-user/]repo-name[:tag]&lt;/image&gt; --&gt;\r\n                            &lt;!-- &lt;serverId&gt;&lt;/serverId&gt; --&gt;\r\n                            &lt;!-- &lt;registryUrl&gt;&lt;/registryUrl&gt;  --&gt;\r\n                        &lt;/runtime&gt;\r\n                        &lt;appSettings&gt;\r\n                            &lt;property&gt;\r\n                                &lt;name&gt;FUNCTIONS_EXTENSION_VERSION&lt;/name&gt;\r\n                                &lt;value&gt;~4&lt;/value&gt;\r\n                            &lt;/property&gt;\r\n                        &lt;/appSettings&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;package-functions&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;package&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n\r\n  [1]: https://github.com/microsoft/azure-maven-plugins/tree/develop/azure-functions-maven-plugin\r\n","title":"How do you read appSettings variables from azure-maven-plugin in Java code?","body":"<p>Is there a way to read the <code>&lt;appSettings&gt;</code> property values in java code ?</p>\n<p><a href=\"https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details\" rel=\"nofollow noreferrer\">https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details</a></p>\n<p>I have tried to use <code>System.getProperty</code> but it is not set.</p>\n<p><strong>This is not a Spring Boot project.</strong></p>\n<p>Is there a way to set environment variables in the <a href=\"https://github.com/microsoft/azure-maven-plugins/tree/develop/azure-functions-maven-plugin\" rel=\"nofollow noreferrer\">azure-maven-plugin</a> ?</p>\n<p>My azure-maven-plugin is the following:</p>\n<pre><code>       &lt;plugin&gt;\n                &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n                &lt;artifactId&gt;azure-functions-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${azure.functions.maven.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;!-- function app name --&gt;\n                    &lt;appName&gt;${functionAppName}&lt;/appName&gt;\n                    &lt;!-- function app resource group --&gt;\n                    &lt;resourceGroup&gt;${resourceGroupName}&lt;/resourceGroup&gt;\n                    &lt;!-- function app service plan name --&gt;\n                    &lt;appServicePlanName&gt;${appServicePlanName}&lt;/appServicePlanName&gt;\n                    &lt;!-- function app region--&gt;\n                    &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-regions for all valid values --&gt;\n                    &lt;region&gt;${azure.region}&lt;/region&gt;\n                    &lt;!-- function pricingTier, default to be consumption if not specified --&gt;\n                    &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details#supported-pricing-tiers for all valid values --&gt;\n                    &lt;!-- &lt;pricingTier&gt;&lt;/pricingTier&gt; --&gt;\n\n                    &lt;!-- Whether to disable application insights, default is false --&gt;\n                    &lt;!-- refers https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions:-Configuration-Details for all valid configurations for application insights--&gt;\n                    &lt;!-- &lt;disableAppInsights&gt;&lt;/disableAppInsights&gt; --&gt;\n                    &lt;runtime&gt;\n                        &lt;!-- runtime os, could be windows, linux or docker--&gt;\n                        &lt;os&gt;Linux&lt;/os&gt;\n                        &lt;javaVersion&gt;11&lt;/javaVersion&gt;\n                        &lt;!-- for docker function, please set the following parameters --&gt;\n                        &lt;!-- &lt;image&gt;[hub-user/]repo-name[:tag]&lt;/image&gt; --&gt;\n                        &lt;!-- &lt;serverId&gt;&lt;/serverId&gt; --&gt;\n                        &lt;!-- &lt;registryUrl&gt;&lt;/registryUrl&gt;  --&gt;\n                    &lt;/runtime&gt;\n                    &lt;appSettings&gt;\n                        &lt;property&gt;\n                            &lt;name&gt;FUNCTIONS_EXTENSION_VERSION&lt;/name&gt;\n                            &lt;value&gt;~4&lt;/value&gt;\n                        &lt;/property&gt;\n                    &lt;/appSettings&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;package-functions&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;package&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","android","wear-os-tiles"],"answers":[{"tags":[],"owner":{"account_id":373961,"reputation":21,"user_id":723903,"display_name":"George Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582638,"creation_date":1691582638,"answer_id":76867609,"question_id":76841897,"body_markdown":"Uninstalled and reinstalled my app and now I see it!","title":"Android WearOS tile does not show up","body":"<p>Uninstalled and reinstalled my app and now I see it!</p>\n"}],"owner":{"account_id":373961,"reputation":21,"user_id":723903,"display_name":"George Brown"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691582638,"creation_date":1691242570,"question_id":76841897,"body_markdown":"I have a Java WearOS app that tries to implement a simple tile. The tile does not appear in the Add Tile list.\r\n\r\nAndroidManifest.xml\r\n\r\n    &lt;service\r\n        android:name=&#39;com.gncbrown.GetMeBackWatch.Utilities.GetMeBackTileService&#39;\r\n        android:exported=&#39;true&#39;\r\n        android:label=&#39;GetMeBack Tile&#39;\r\n        android:icon=&#39;@drawable/icon&#39;\r\n        android:permission=&#39;com.google.android.wearable.permission.BIND_TILE_PROVIDER&#39;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&#39;androidx.wear.tiles.action.BIND_TILE_PROVIDER&#39; /&gt;\r\n        &lt;/intent-filter&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&#39;androidx.wear.tiles.PREVIEW&#39;\r\n            android:resource=&#39;@drawable/icon&#39; /&gt;\r\n    &lt;/service&gt;\r\n\r\nGetMeBackTileService\r\n\r\n    public class GetMeBackTileService extends TileService {\r\n        private static final String RESOURCES_VERSION = &#39;5&#39;;\r\n    \r\n        @NonNull\r\n        @Override\r\n        protected ListenableFuture&lt;TileBuilders.Tile&gt; onTileRequest(@NonNull RequestBuilders.TileRequest requestParams) {\r\n    \r\n            return Futures.immediateFuture(new TileBuilders.Tile.Builder()\r\n                    .setResourcesVersion(RESOURCES_VERSION)\r\n                    //.setFreshnessIntervalMillis(60*1000*5) // 60 minutes\r\n                    .setTimeline(new TimelineBuilders.Timeline.Builder()\r\n                            .addTimelineEntry(new TimelineBuilders.TimelineEntry.Builder()\r\n                                    .setLayout(new LayoutElementBuilders.Layout.Builder()\r\n                                            .setRoot(new LayoutElementBuilders.Text.Builder().setText(&#39;Test&#39;).\r\n                                                    setModifiers(new ModifiersBuilders.Modifiers.Builder().setSemantics(\r\n                                                            new ModifiersBuilders.Semantics.Builder().setContentDescription(&#39;lol&#39;).build()).build()\r\n                                                    ).build()\r\n                                            ).build()\r\n                                    ).build()\r\n                            ).build()\r\n                    ).build()\r\n            );\r\n        }\r\n    \r\n        @NonNull\r\n        @Override\r\n        protected ListenableFuture&lt;ResourceBuilders.Resources&gt; onResourcesRequest(@NonNull RequestBuilders.ResourcesRequest requestParams) {\r\n            return Futures.immediateFuture(new ResourceBuilders.Resources.Builder()\r\n                    .setVersion(&#39;5&#39;)\r\n                    .build());\r\n        }\r\n    }\r\n\r\nI don&#39;t see my tile appear in the tile list for apps.\r\n","title":"Android WearOS tile does not show up","body":"<p>I have a Java WearOS app that tries to implement a simple tile. The tile does not appear in the Add Tile list.</p>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;service\n    android:name='com.gncbrown.GetMeBackWatch.Utilities.GetMeBackTileService'\n    android:exported='true'\n    android:label='GetMeBack Tile'\n    android:icon='@drawable/icon'\n    android:permission='com.google.android.wearable.permission.BIND_TILE_PROVIDER'&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name='androidx.wear.tiles.action.BIND_TILE_PROVIDER' /&gt;\n    &lt;/intent-filter&gt;\n\n    &lt;meta-data\n        android:name='androidx.wear.tiles.PREVIEW'\n        android:resource='@drawable/icon' /&gt;\n&lt;/service&gt;\n</code></pre>\n<p>GetMeBackTileService</p>\n<pre><code>public class GetMeBackTileService extends TileService {\n    private static final String RESOURCES_VERSION = '5';\n\n    @NonNull\n    @Override\n    protected ListenableFuture&lt;TileBuilders.Tile&gt; onTileRequest(@NonNull RequestBuilders.TileRequest requestParams) {\n\n        return Futures.immediateFuture(new TileBuilders.Tile.Builder()\n                .setResourcesVersion(RESOURCES_VERSION)\n                //.setFreshnessIntervalMillis(60*1000*5) // 60 minutes\n                .setTimeline(new TimelineBuilders.Timeline.Builder()\n                        .addTimelineEntry(new TimelineBuilders.TimelineEntry.Builder()\n                                .setLayout(new LayoutElementBuilders.Layout.Builder()\n                                        .setRoot(new LayoutElementBuilders.Text.Builder().setText('Test').\n                                                setModifiers(new ModifiersBuilders.Modifiers.Builder().setSemantics(\n                                                        new ModifiersBuilders.Semantics.Builder().setContentDescription('lol').build()).build()\n                                                ).build()\n                                        ).build()\n                                ).build()\n                        ).build()\n                ).build()\n        );\n    }\n\n    @NonNull\n    @Override\n    protected ListenableFuture&lt;ResourceBuilders.Resources&gt; onResourcesRequest(@NonNull RequestBuilders.ResourcesRequest requestParams) {\n        return Futures.immediateFuture(new ResourceBuilders.Resources.Builder()\n                .setVersion('5')\n                .build());\n    }\n}\n</code></pre>\n<p>I don't see my tile appear in the tile list for apps.</p>\n"},{"tags":["java","spring","postgresql","hibernate"],"answers":[{"comments":[{"owner":{"account_id":3520251,"reputation":114,"user_id":2942745,"display_name":"cogitoboy"},"score":0,"creation_date":1556480910,"post_id":55733302,"comment_id":98444472,"body_markdown":"I beleive it is a hibernate error, read elsewhere, and just need to get a more recent hibernate version.","body":"I beleive it is a hibernate error, read elsewhere, and just need to get a more recent hibernate version."}],"tags":[],"owner":{"account_id":9193259,"reputation":425,"user_id":6832959,"display_name":"Christopher"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1555523100,"creation_date":1555523100,"answer_id":55733302,"question_id":55732898,"body_markdown":"try to add\r\n\r\n    spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true","title":"How to resolve org.postgresql.jdbc.PgConnection.createClob() is not yet implemented","body":"<p>try to add</p>\n\n<pre><code>spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3520251,"reputation":114,"user_id":2942745,"display_name":"cogitoboy"},"score":0,"creation_date":1556480852,"post_id":55750127,"comment_id":98444457,"body_markdown":"Same experience here.  Seems versions 5.2.17 or hibernate-core and hibernate-entitymanager produces the error, while versions 5.4.2.Final does not.","body":"Same experience here.  Seems versions 5.2.17 or hibernate-core and hibernate-entitymanager produces the error, while versions 5.4.2.Final does not."}],"tags":[],"owner":{"account_id":2807605,"reputation":587,"user_id":2414526,"display_name":"OneNoOne"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1555604395,"creation_date":1555604395,"answer_id":55750127,"question_id":55732898,"body_markdown":"After some tests I could resolve this. It seems Hibernate implementation was missing, so to resolve this I&#39;ve added It in gradle.build file. I thought Spring-boot already took care of It when getting JPA, but I was wrong. Here It is my updated dependencies from gradle.build:\r\n\r\n    dependencies {\r\n\r\n    //Spring\r\n    //implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    //runtimeOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\r\n    //Hibernate\r\n    implementation &#39;org.hibernate:hibernate-core:5.4.2.Final&#39;\r\n    implementation &#39;org.hibernate:hibernate-entitymanager:5.4.2.Final&#39;\r\n\r\n    //Postgres\r\n    implementation &#39;org.postgresql:postgresql:42.2.5.jre7&#39;\r\n\r\n    //Gson\r\n    implementation &#39;com.google.code.gson:gson:2.8.5&#39;\r\n\r\n    //Logger\r\n    implementation &#39;log4j:log4j:1.2.17&#39;\r\n\r\n\r\n}","title":"How to resolve org.postgresql.jdbc.PgConnection.createClob() is not yet implemented","body":"<p>After some tests I could resolve this. It seems Hibernate implementation was missing, so to resolve this I've added It in gradle.build file. I thought Spring-boot already took care of It when getting JPA, but I was wrong. Here It is my updated dependencies from gradle.build:</p>\n\n<pre><code>dependencies {\n\n//Spring\n//implementation 'org.springframework.boot:spring-boot-starter-actuator'\nimplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\nimplementation 'org.springframework.boot:spring-boot-starter-web'\n//runtimeOnly 'org.springframework.boot:spring-boot-devtools'\ntestImplementation 'org.springframework.boot:spring-boot-starter-test'\n\n//Hibernate\nimplementation 'org.hibernate:hibernate-core:5.4.2.Final'\nimplementation 'org.hibernate:hibernate-entitymanager:5.4.2.Final'\n\n//Postgres\nimplementation 'org.postgresql:postgresql:42.2.5.jre7'\n\n//Gson\nimplementation 'com.google.code.gson:gson:2.8.5'\n\n//Logger\nimplementation 'log4j:log4j:1.2.17'\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":6281226,"reputation":35,"user_id":4882162,"accept_rate":100,"display_name":"Wim Veldhuis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582631,"creation_date":1691582631,"answer_id":76867607,"question_id":55732898,"body_markdown":"I had a similar issue, but in an older grails application. The issue started\r\nwhen we replaced c3p0 connection pool with Hikari.\r\n\r\nThe normal solution of setting the property in the hibernate.cfg file only works for the first datasource, but we have a second jpa datasource defined as beans in xml.\r\n\r\nFinally figured out that adding the following fragment to the related entityManagerFactory fixed the issue:\r\n\r\n      &lt;bean id=&quot;mediationEntitiyManagerFactory&quot; \r\n    class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;mediationDataSource&quot; /&gt;\r\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;...&quot;/&gt;\r\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n            &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\r\n        &lt;/property&gt;\r\n\r\n        &lt;!--  Using HikariCP, gave the warning:  Connection org.postgresql.jdbc.PgConnection@270d7864\r\n               marked as broken because of SQLSTATE(0A000), ErrorCode(0) java.sql.SQLFeatureNotSupportedException.\r\n               Setting this property is to avoid that warning\r\n               Hibernate before v5.4.0.CR1 has an issue with this, see\r\n               https://stackoverflow.com/questions/49110818/method-org-postgresql-jdbc-pgconnection-createclob-is-not-yet-implemented\r\n               This is what fixed it for jBillingMediationDataSource bean\r\n        --&gt;\r\n        &lt;property name=&quot;jpaProperties&quot;&gt;\r\n            &lt;props&gt;\r\n                &lt;prop key=&quot;hibernate.temp.use_jdbc_metadata_defaults&quot;&gt;false&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nHope this helps someone else who runs into this issue.\r\n","title":"How to resolve org.postgresql.jdbc.PgConnection.createClob() is not yet implemented","body":"<p>I had a similar issue, but in an older grails application. The issue started\nwhen we replaced c3p0 connection pool with Hikari.</p>\n<p>The normal solution of setting the property in the hibernate.cfg file only works for the first datasource, but we have a second jpa datasource defined as beans in xml.</p>\n<p>Finally figured out that adding the following fragment to the related entityManagerFactory fixed the issue:</p>\n<pre><code>  &lt;bean id=&quot;mediationEntitiyManagerFactory&quot; \nclass=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;mediationDataSource&quot; /&gt;\n    &lt;property name=&quot;packagesToScan&quot; value=&quot;...&quot;/&gt;\n    &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\n        &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\n    &lt;/property&gt;\n\n    &lt;!--  Using HikariCP, gave the warning:  Connection org.postgresql.jdbc.PgConnection@270d7864\n           marked as broken because of SQLSTATE(0A000), ErrorCode(0) java.sql.SQLFeatureNotSupportedException.\n           Setting this property is to avoid that warning\n           Hibernate before v5.4.0.CR1 has an issue with this, see\n           https://stackoverflow.com/questions/49110818/method-org-postgresql-jdbc-pgconnection-createclob-is-not-yet-implemented\n           This is what fixed it for jBillingMediationDataSource bean\n    --&gt;\n    &lt;property name=&quot;jpaProperties&quot;&gt;\n        &lt;props&gt;\n            &lt;prop key=&quot;hibernate.temp.use_jdbc_metadata_defaults&quot;&gt;false&lt;/prop&gt;\n            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Hope this helps someone else who runs into this issue.</p>\n"}],"owner":{"account_id":2807605,"reputation":587,"user_id":2414526,"display_name":"OneNoOne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4961,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":55750127,"answer_count":3,"score":2,"last_activity_date":1691582631,"creation_date":1555521276,"question_id":55732898,"body_markdown":"## The exception ##\r\n\r\nWhen starting spring-boot application I&#39;ve received:\r\n\r\nCaused by: java.sql.SQLFeatureNotSupportedException: Method org.postgresql.jdbc.PgConnection.createClob() is not yet implemented.\r\n\r\nI know this is related to some issue from Postgresql driver, which I am using now. \r\n\r\n## Unsucessful attempt ##\r\nMany people resolved the problem just putting this following line in application.properties file:\r\n\r\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=true\r\n\r\n\r\nI still have the same issue. Is there any other tip for It? In case thinking about see my project with current configuration:\r\nhttps://github.com/caliari77/hiRank\r\n","title":"How to resolve org.postgresql.jdbc.PgConnection.createClob() is not yet implemented","body":"<h2>The exception</h2>\n\n<p>When starting spring-boot application I've received:</p>\n\n<p>Caused by: java.sql.SQLFeatureNotSupportedException: Method org.postgresql.jdbc.PgConnection.createClob() is not yet implemented.</p>\n\n<p>I know this is related to some issue from Postgresql driver, which I am using now. </p>\n\n<h2>Unsucessful attempt</h2>\n\n<p>Many people resolved the problem just putting this following line in application.properties file:</p>\n\n<p>spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=true</p>\n\n<p>I still have the same issue. Is there any other tip for It? In case thinking about see my project with current configuration:\n<a href=\"https://github.com/caliari77/hiRank\" rel=\"nofollow noreferrer\">https://github.com/caliari77/hiRank</a></p>\n"},{"tags":["java","xml","xslt","xslt-2.0","bxslider"],"comments":[{"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"score":0,"creation_date":1691581697,"post_id":76867363,"comment_id":135510427,"body_markdown":"What exactly are you trying to accomplish by this?","body":"What exactly are you trying to accomplish by this?"}],"answers":[{"comments":[{"owner":{"account_id":22396420,"reputation":57,"user_id":16607621,"display_name":"Ankit Singh"},"score":0,"creation_date":1691581953,"post_id":76867511,"comment_id":135510468,"body_markdown":"I want all the Path2 tags to be concatenated and the use substring to restrict to max value","body":"I want all the Path2 tags to be concatenated and the use substring to restrict to max value"},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691582200,"post_id":76867511,"comment_id":135510518,"body_markdown":"@AnkitSingh, see the edit.","body":"@AnkitSingh, see the edit."}],"tags":[],"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691582159,"creation_date":1691581865,"answer_id":76867511,"question_id":76867363,"body_markdown":"You need to select a single Path2, not a sequence, so either make sure you use a positional predicate e.g. `Path2[1]` or make sure you use the substring in the context of a single `Path2` by e.g. matching on `Path2`.\r\n\r\nAs for your comment, that sounds as if you want e.g. `string-join(Path2) =&gt; substring(1, 500)` in XPath 3.1 or `substring(string-join(Path2, &#39;&#39;), 1, 500)` in XPath 2.","title":"A sequence of more than one item is not allowed as the first argument of fn:substring()","body":"<p>You need to select a single Path2, not a sequence, so either make sure you use a positional predicate e.g. <code>Path2[1]</code> or make sure you use the substring in the context of a single <code>Path2</code> by e.g. matching on <code>Path2</code>.</p>\n<p>As for your comment, that sounds as if you want e.g. <code>string-join(Path2) =&gt; substring(1, 500)</code> in XPath 3.1 or <code>substring(string-join(Path2, ''), 1, 500)</code> in XPath 2.</p>\n"},{"tags":[],"owner":{"account_id":9152577,"reputation":309,"user_id":6806608,"display_name":"SimmeD"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582140,"creation_date":1691582140,"answer_id":76867551,"question_id":76867363,"body_markdown":"The error occurs because there are multiple Path2 elements and you are trying to apply substring function directly on them which returns multiple output sequences, as a result, the function fails as it expects a single string not multiple strings.\r\n\r\nAs a workaround, you can apply substring to each Path2 element individually by iterating over each Path2 element. Here is how you could do it:\r\n```XSLT\r\n    &lt;xsl:element name=&quot;EB&quot;&gt;\r\n      &lt;xsl:element name=&quot;ID&quot;&gt;  \r\n        &lt;xsl:for-each select=&quot;*:Path1/*:Path2&quot;&gt;\r\n           &lt;xsl:value-of select=&quot;substring(.,1,500)&quot;/&gt; \r\n        &lt;/xsl:for-each&gt;\r\n      &lt;/xsl:element&gt;\r\n    &lt;/xsl:element&gt;\r\n```\r\nIn this code, I have used a for-each loop to iterate over each Path2 element, and then applied substring to each of them individually.\r\n\r\nRemember to replace * with your appropriate namespace prefix. Also if you are looking to concat those strings instead of having separate values you can use concat or string-join function.\r\n```XSLT\r\n    &lt;xsl:element name=&quot;EB&quot;&gt;\r\n      &lt;xsl:element name=&quot;ID&quot;&gt;  \r\n        &lt;xsl:value-of select=&quot;string-join(*:Path1/*:Path2, &#39;, &#39;)&quot;/&gt;\r\n      &lt;/xsl:element&gt;\r\n    &lt;/xsl:element&gt;\r\n```\r\nThis would join all Path2 values with a comma. Then you can apply substring function on the joined string.","title":"A sequence of more than one item is not allowed as the first argument of fn:substring()","body":"<p>The error occurs because there are multiple Path2 elements and you are trying to apply substring function directly on them which returns multiple output sequences, as a result, the function fails as it expects a single string not multiple strings.</p>\n<p>As a workaround, you can apply substring to each Path2 element individually by iterating over each Path2 element. Here is how you could do it:</p>\n<pre><code>    &lt;xsl:element name=&quot;EB&quot;&gt;\n      &lt;xsl:element name=&quot;ID&quot;&gt;  \n        &lt;xsl:for-each select=&quot;*:Path1/*:Path2&quot;&gt;\n           &lt;xsl:value-of select=&quot;substring(.,1,500)&quot;/&gt; \n        &lt;/xsl:for-each&gt;\n      &lt;/xsl:element&gt;\n    &lt;/xsl:element&gt;\n</code></pre>\n<p>In this code, I have used a for-each loop to iterate over each Path2 element, and then applied substring to each of them individually.</p>\n<p>Remember to replace * with your appropriate namespace prefix. Also if you are looking to concat those strings instead of having separate values you can use concat or string-join function.</p>\n<pre><code>    &lt;xsl:element name=&quot;EB&quot;&gt;\n      &lt;xsl:element name=&quot;ID&quot;&gt;  \n        &lt;xsl:value-of select=&quot;string-join(*:Path1/*:Path2, ', ')&quot;/&gt;\n      &lt;/xsl:element&gt;\n    &lt;/xsl:element&gt;\n</code></pre>\n<p>This would join all Path2 values with a comma. Then you can apply substring function on the joined string.</p>\n"},{"comments":[{"owner":{"account_id":22396420,"reputation":57,"user_id":16607621,"display_name":"Ankit Singh"},"score":0,"creation_date":1691583240,"post_id":76867566,"comment_id":135510782,"body_markdown":"wow, this is what i was looking for, thanks a lot, appreciate it.","body":"wow, this is what i was looking for, thanks a lot, appreciate it."}],"tags":[],"owner":{"account_id":23033964,"reputation":1245,"user_id":17153010,"display_name":"y.arazim"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582616,"creation_date":1691582252,"answer_id":76867566,"question_id":76867363,"body_markdown":"&gt; I want all the Path2 tags to be concatenated and the use substring to restrict to max value\r\n\r\nThat could be done simply by:\r\n\r\n    &lt;xsl:value-of select=&quot;substring(string-join(Path1/Path2, &#39;&#39;), 1 , 500)&quot;/&gt;","title":"A sequence of more than one item is not allowed as the first argument of fn:substring()","body":"<blockquote>\n<p>I want all the Path2 tags to be concatenated and the use substring to restrict to max value</p>\n</blockquote>\n<p>That could be done simply by:</p>\n<pre><code>&lt;xsl:value-of select=&quot;substring(string-join(Path1/Path2, ''), 1 , 500)&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":22396420,"reputation":57,"user_id":16607621,"display_name":"Ankit Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76867511,"answer_count":3,"score":0,"last_activity_date":1691582616,"creation_date":1691580797,"question_id":76867363,"body_markdown":"I am getting this error while using substring in xslt, the error message is clear, hence i tried putting the multiple sequence value in variable and using substring for the variable, it doesn&#39;t work either, same error. Can someone provide a workaround for this?\r\n\r\nInput:\r\n\r\n\t&lt;Path1&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt;SENDER 1&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; SENDER xyc&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; SENDER &lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; ORG ID:&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; ORG:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; ORG &lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF &lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF NAME:=A&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF ADDRESS&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF FI ID:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; BNF FI:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; REC FI:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; REC ID:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Path2&gt; OBI:=&lt;/Path2&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/Path1&gt;\r\n\r\nxslt:\r\n\r\n&lt;xsl:element name=&quot;EB&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;xsl:element name=&quot;ID&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&lt;xsl:value-of select=&quot;substring(*:Path1/*:Path2,1,500)&quot;/&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t&lt;/xsl:element&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/xsl:element&gt;","title":"A sequence of more than one item is not allowed as the first argument of fn:substring()","body":"<p>I am getting this error while using substring in xslt, the error message is clear, hence i tried putting the multiple sequence value in variable and using substring for the variable, it doesn't work either, same error. Can someone provide a workaround for this?</p>\n<p>Input:</p>\n<pre><code>&lt;Path1&gt;\n                                    &lt;Path2&gt;SENDER 1&lt;/Path2&gt;\n                                    &lt;Path2&gt; SENDER xyc&lt;/Path2&gt;\n                                    &lt;Path2&gt; SENDER &lt;/Path2&gt;\n                                    &lt;Path2&gt; ORG ID:&lt;/Path2&gt;\n                                    &lt;Path2&gt; ORG:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; ORG &lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF &lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF NAME:=A&lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF ADDRESS&lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF FI ID:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; BNF FI:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; REC FI:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; REC ID:=&lt;/Path2&gt;\n                                    &lt;Path2&gt; OBI:=&lt;/Path2&gt;\n                                &lt;/Path1&gt;\n</code></pre>\n<p>xslt:</p>\n<p>&lt;xsl:element name=&quot;EB&quot;&gt;</p>\n<pre><code>                                            &lt;xsl:element name=&quot;ID&quot;&gt;\n                                                &lt;xsl:value-of select=&quot;substring(*:Path1/*:Path2,1,500)&quot;/&gt;\n                                            &lt;/xsl:element&gt;\n                                &lt;/xsl:element&gt;\n</code></pre>\n"},{"tags":["java","type-conversion","mapping","lombok","modelmapper"],"owner":{"account_id":29191634,"reputation":1,"user_id":22363643,"display_name":"Andrea Anglada Reina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691582560,"creation_date":1691582560,"question_id":76867598,"body_markdown":"I am trying to convert an Entity to a DTO using ModelMapper and when mapping the properties are always to null, when the Entity is returning the values correctly:\r\n\r\nEntity:\r\n```\r\npackage org.example.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.*;\r\n\r\n@Entity\r\n@Table(name= &quot;user&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column(name = &quot;name&quot;, nullable = false, length = 40)\r\n    private String name;\r\n    @Column(name = &quot;password&quot;, nullable = false, length = 40)\r\n    private String password;\r\n}\r\n\r\n```\r\n\r\nDto:\r\n```\r\npackage org.example.dto;\r\n\r\nimport lombok.*;\r\n\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class UserDto {\r\n    private Long id;\r\n    private String name;\r\n    private String password;\r\n}\r\n```\r\n\r\nService where mapping is done:\r\n```\r\npackage org.example.services;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.example.dto.UserDto;\r\nimport org.example.model.User;\r\nimport org.example.repository.UserRepository;\r\nimport org.modelmapper.ModelMapper;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.Objects;\r\n\r\n@Slf4j\r\n@Service\r\n@AllArgsConstructor\r\npublic class UserService {\r\n\r\n    private final UserRepository userRepository;\r\n    @Autowired\r\n    private ModelMapper mapper;\r\n\r\n    public UserDto getUser(Long id) throws Exception {\r\n        var res = userRepository.findById(id);\r\n        if(res.isEmpty()) {\r\n            throw new Exception(&quot;No existe el usuario con id=&quot; + id);\r\n        }\r\n        log.info(&quot;Se ha devuelto el usuario: &quot; + res.get());\r\n        return mapper.map(res.get(), UserDto.class);\r\n    }\r\n```\r\n\r\nI use lombok, but as far as I know this should not be a problem. The configuration is as follows:\r\n```\r\npackage org.example.config;\r\n\r\nimport org.modelmapper.ModelMapper;\r\nimport org.modelmapper.convention.MatchingStrategies;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class AcmeConfig {\r\n    @Bean\r\n    public ModelMapper modelMapper() {\r\n        ModelMapper mapper = new ModelMapper();\r\n        mapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT);\r\n        return mapper;\r\n    }\r\n}\r\n```\r\n\r\n\r\nThe truth is that I have always been able to map directly without problems since the process is very simple but for this project it does not work for me and it is quite frustrating.\r\n\r\nI have tried several times to change the configuration, change the lombok annotations to manual getters/setters, but I have not obtained any change.","title":"ModelMapper not working mapping Entity to DTO","body":"<p>I am trying to convert an Entity to a DTO using ModelMapper and when mapping the properties are always to null, when the Entity is returning the values correctly:</p>\n<p>Entity:</p>\n<pre><code>package org.example.model;\n\nimport jakarta.persistence.*;\nimport lombok.*;\n\n@Entity\n@Table(name= &quot;user&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = &quot;name&quot;, nullable = false, length = 40)\n    private String name;\n    @Column(name = &quot;password&quot;, nullable = false, length = 40)\n    private String password;\n}\n\n</code></pre>\n<p>Dto:</p>\n<pre><code>package org.example.dto;\n\nimport lombok.*;\n\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class UserDto {\n    private Long id;\n    private String name;\n    private String password;\n}\n</code></pre>\n<p>Service where mapping is done:</p>\n<pre><code>package org.example.services;\n\nimport lombok.AllArgsConstructor;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.example.dto.UserDto;\nimport org.example.model.User;\nimport org.example.repository.UserRepository;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport java.util.Objects;\n\n@Slf4j\n@Service\n@AllArgsConstructor\npublic class UserService {\n\n    private final UserRepository userRepository;\n    @Autowired\n    private ModelMapper mapper;\n\n    public UserDto getUser(Long id) throws Exception {\n        var res = userRepository.findById(id);\n        if(res.isEmpty()) {\n            throw new Exception(&quot;No existe el usuario con id=&quot; + id);\n        }\n        log.info(&quot;Se ha devuelto el usuario: &quot; + res.get());\n        return mapper.map(res.get(), UserDto.class);\n    }\n</code></pre>\n<p>I use lombok, but as far as I know this should not be a problem. The configuration is as follows:</p>\n<pre><code>package org.example.config;\n\nimport org.modelmapper.ModelMapper;\nimport org.modelmapper.convention.MatchingStrategies;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class AcmeConfig {\n    @Bean\n    public ModelMapper modelMapper() {\n        ModelMapper mapper = new ModelMapper();\n        mapper.getConfiguration().setMatchingStrategy(MatchingStrategies.STRICT);\n        return mapper;\n    }\n}\n</code></pre>\n<p>The truth is that I have always been able to map directly without problems since the process is very simple but for this project it does not work for me and it is quite frustrating.</p>\n<p>I have tried several times to change the configuration, change the lombok annotations to manual getters/setters, but I have not obtained any change.</p>\n"},{"tags":["java","excel","groovy","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1691567980,"post_id":76864925,"comment_id":135507625,"body_markdown":"Is the last calculated value of use to you? You could always read that for formula cells instead of re-evaluating the formula","body":"Is the last calculated value of use to you? You could always read that for formula cells instead of re-evaluating the formula"},{"owner":{"account_id":2309337,"reputation":3776,"user_id":2027839,"accept_rate":71,"display_name":"Mike Warren"},"score":0,"creation_date":1691576763,"post_id":76864925,"comment_id":135509425,"body_markdown":"The value that was calculated when the Excel file was open is of use to me...","body":"The value that was calculated when the Excel file was open is of use to me..."},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1691581432,"post_id":76864925,"comment_id":135510371,"body_markdown":"Call https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Cell.html#getCachedFormulaResultType-- to see the cached type, then fetch the value based on that","body":"Call <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Cell.html#getCachedFormulaResultType--\" rel=\"nofollow noreferrer\">poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/&hellip;</a> to see the cached type, then fetch the value based on that"}],"answers":[{"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1691586440,"post_id":76867593,"comment_id":135511470,"body_markdown":"`FormulaEvaluator` is normally workbook-scoped, you should be fine to re-use it with the same excel file, but you&#39;ll need a new one for each file","body":"<code>FormulaEvaluator</code> is normally workbook-scoped, you should be fine to re-use it with the same excel file, but you&#39;ll need a new one for each file"},{"owner":{"account_id":2309337,"reputation":3776,"user_id":2027839,"accept_rate":71,"display_name":"Mike Warren"},"score":0,"creation_date":1691590534,"post_id":76867593,"comment_id":135512501,"body_markdown":"In this case, I needed it just to re-evaluate a formula cell in the same sheet...!","body":"In this case, I needed it just to re-evaluate a formula cell in the same sheet...!"}],"tags":[],"owner":{"account_id":2309337,"reputation":3776,"user_id":2027839,"accept_rate":71,"display_name":"Mike Warren"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691582529,"creation_date":1691582529,"answer_id":76867593,"question_id":76864925,"body_markdown":"I was able to fix this problem, with some tweaking of the code:\r\n\r\n\tpublic static double GetDollarAmount(Cell cell) { \r\n\t\tswitch (cell.getCellType()) { \r\n\t\t\tcase CellType.NUMERIC.code:\r\n\t\t\t\treturn cell.getNumericCellValue();\r\n\t\t\tcase CellType.STRING.code:\r\n\t\t\t\treturn SMDNumberUtils.parseDouble(cell.getStringCellValue());\r\n\t\t\tcase CellType.FORMULA.code:\r\n\t\t\t\tCellValue cellValue = this.EvaluateCellFormula(cell);\r\n\t\t\t\t\t\r\n\t\t\t\tif (!cellValue.getCellTypeEnum().equals(CellType.ERROR))\r\n\t\t\t\t\treturn cellValue.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\t\tcell.setCellFormula(cell.getCellFormula()\r\n\t\t\t\t\t.replaceAll(/[A-Z]+\\d+/, { match -&gt;\r\n\t\t\t\t\t    return &quot;VALUE($match)&quot;\r\n\t\t\t\t\t}))\r\n\t\t\t\t\r\n\t\t\t\treturn this.EvaluateCellFormula(cell)\r\n\t\t\t\t\t.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\tdefault: \r\n\t\t\t\tthrow new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static CellValue EvaluateCellFormula(Cell cell) { \r\n\t\treturn cell.getSheet().getWorkbook()\r\n\t\t\t\t.getCreationHelper()\r\n\t\t\t\t.createFormulaEvaluator()\r\n\t\t\t\t.evaluate(cell)\r\n\r\nIt looks like we need new `FormulaEvaluator` every time we `evaluate()`...","title":"Apache POI&#39;s FormulaEvaluator doesn&#39;t work after modifying a Cell&#39;s formula","body":"<p>I was able to fix this problem, with some tweaking of the code:</p>\n<pre><code>public static double GetDollarAmount(Cell cell) { \n    switch (cell.getCellType()) { \n        case CellType.NUMERIC.code:\n            return cell.getNumericCellValue();\n        case CellType.STRING.code:\n            return SMDNumberUtils.parseDouble(cell.getStringCellValue());\n        case CellType.FORMULA.code:\n            CellValue cellValue = this.EvaluateCellFormula(cell);\n                \n            if (!cellValue.getCellTypeEnum().equals(CellType.ERROR))\n                return cellValue.getNumberValue();\n                \n            cell.setCellFormula(cell.getCellFormula()\n                .replaceAll(/[A-Z]+\\d+/, { match -&gt;\n                    return &quot;VALUE($match)&quot;\n                }))\n            \n            return this.EvaluateCellFormula(cell)\n                .getNumberValue();\n                \n        default: \n            throw new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\n    }\n}\n\npublic static CellValue EvaluateCellFormula(Cell cell) { \n    return cell.getSheet().getWorkbook()\n            .getCreationHelper()\n            .createFormulaEvaluator()\n            .evaluate(cell)\n</code></pre>\n<p>It looks like we need new <code>FormulaEvaluator</code> every time we <code>evaluate()</code>...</p>\n"}],"owner":{"account_id":2309337,"reputation":3776,"user_id":2027839,"accept_rate":71,"display_name":"Mike Warren"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76867593,"answer_count":1,"score":0,"last_activity_date":1691582529,"creation_date":1691560538,"question_id":76864925,"body_markdown":"I am using Apache POI to write to a spreadsheet some test case expectations...\r\n\r\nThese expectations, as of right now, are all in the form of string cell values. They contain some expected dollar amounts...\r\n\r\nHere&#39;s example row:\r\n\r\n|Member ID|NPI Number|Member Prefix|Member First Name|Member Last Name|Member Suffix|Payment Frequency (A, M, S, Q)|Is Child Member?|Expected Fee|Expected Frequency Discount|Expected Family Discount|Expected Net Amount|Expected Gross Installment|Expected Net Installment|Test Case Step 2 Passed?|\r\n|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|\r\n|139|1209360364||Main07-28-2023 01:28:49|RandomMember||A|true|$ 2,362.00|$ 326.00|$ 116.91|$1,919.09|$ 2,362.00|$ 1,919.09|true|\r\n\r\nI make sure that the dollar amounts have the *Accounting Number Format*.\r\n\r\nI did notice a need to **have Excel calculate an Expected Net Amount** (one cell minus the sum of some others), instead of my code, by entering in a formula like:\r\n\r\n```\r\n=I34-(J34+K34)\r\n```\r\n\r\nThis works in the spreadsheet: after hitting enter, the value is calculated. However, when I try to read it programmatically, I face some issue: \r\n\r\nThe util method: \r\n\r\n```\r\n\tpublic static double GetDollarAmount(Cell cell) { \r\n\t\tswitch (cell.getCellType()) { \r\n\t\t\tcase CellType.NUMERIC.code:\r\n\t\t\t\treturn cell.getNumericCellValue();\r\n\t\t\tcase CellType.STRING.code:\r\n\t\t\t\treturn SMDNumberUtils.parseDouble(cell.getStringCellValue());\r\n\t\t\tcase CellType.FORMULA.code:\r\n\t\t\t\treturn cell.getSheet().getWorkbook()\r\n\t\t\t\t\t.getCreationHelper()\r\n\t\t\t\t\t.createFormulaEvaluator()\r\n\t\t\t\t\t.evaluate(cell)\r\n\t\t\t\t\t.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\tdefault: \r\n\t\t\t\tthrow new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\r\n\t\t}\r\n\t}\r\n```\r\n\r\nfails for the formula-type cell, because it returns 0 instead of, in the case of that example row, 1919.09 . When I check the `CellValue` that the `evaluate()` call returns, I see a `CellValue` with `#VALUE!` (which typically gets thrown when you&#39;re tryna use a numeric formula on string values)\r\n\r\nEven when I try to tweak my code to re-write the formula, by wrapping &quot;VALUE()&quot; around any cell references: \r\n\r\n```\r\n\tpublic static double GetDollarAmount(Cell cell) { \r\n\t\tswitch (cell.getCellType()) { \r\n\t\t\tcase CellType.NUMERIC.code:\r\n\t\t\t\treturn cell.getNumericCellValue();\r\n\t\t\tcase CellType.STRING.code:\r\n\t\t\t\treturn SMDNumberUtils.parseDouble(cell.getStringCellValue());\r\n\t\t\tcase CellType.FORMULA.code:\r\n\t\t\t\t\r\n\t\t\t\tFormulaEvaluator evaluator = cell.getSheet().getWorkbook()\r\n\t\t\t\t\t.getCreationHelper()\r\n\t\t\t\t\t.createFormulaEvaluator();\r\n\t\t\t\r\n\t\t\t\tCellValue cellValue = evaluator.evaluate(cell);\r\n\t\t\t\t\t\r\n\t\t\t\tif (!cellValue.getCellTypeEnum().equals(CellType.ERROR))\r\n\t\t\t\t\treturn cellValue.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\t\tcell.setCellFormula(cell.getCellFormula()\r\n\t\t\t\t\t.replaceAll(/[A-Z]+\\d+/, { match -&gt;\r\n\t\t\t\t\t    return &quot;VALUE($match)&quot;\r\n\t\t\t\t\t}))\r\n\t\t\t\t\r\n\t\t\t\treturn evaluator.evaluate(cell)\r\n\t\t\t\t\t.getNumberValue();\r\n\t\t\t\t\t\r\n\t\t\tdefault: \r\n\t\t\t\tthrow new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\r\n\t\t}\r\n\t}\r\n```\r\n\r\nIt still fails, with the same issue! Nothing changes, except we have a safe formula for next run!\r\n\r\n**How can I fix this**, given that my testing framework, Katalon Studio, has me stuck on Apache POI **v3.17** ? ","title":"Apache POI&#39;s FormulaEvaluator doesn&#39;t work after modifying a Cell&#39;s formula","body":"<p>I am using Apache POI to write to a spreadsheet some test case expectations...</p>\n<p>These expectations, as of right now, are all in the form of string cell values. They contain some expected dollar amounts...</p>\n<p>Here's example row:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Member ID</th>\n<th>NPI Number</th>\n<th>Member Prefix</th>\n<th>Member First Name</th>\n<th>Member Last Name</th>\n<th>Member Suffix</th>\n<th>Payment Frequency (A, M, S, Q)</th>\n<th>Is Child Member?</th>\n<th>Expected Fee</th>\n<th>Expected Frequency Discount</th>\n<th>Expected Family Discount</th>\n<th>Expected Net Amount</th>\n<th>Expected Gross Installment</th>\n<th>Expected Net Installment</th>\n<th>Test Case Step 2 Passed?</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>139</td>\n<td>1209360364</td>\n<td></td>\n<td>Main07-28-2023 01:28:49</td>\n<td>RandomMember</td>\n<td></td>\n<td>A</td>\n<td>true</td>\n<td>$ 2,362.00</td>\n<td>$ 326.00</td>\n<td>$ 116.91</td>\n<td>$1,919.09</td>\n<td>$ 2,362.00</td>\n<td>$ 1,919.09</td>\n<td>true</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I make sure that the dollar amounts have the <em>Accounting Number Format</em>.</p>\n<p>I did notice a need to <strong>have Excel calculate an Expected Net Amount</strong> (one cell minus the sum of some others), instead of my code, by entering in a formula like:</p>\n<pre><code>=I34-(J34+K34)\n</code></pre>\n<p>This works in the spreadsheet: after hitting enter, the value is calculated. However, when I try to read it programmatically, I face some issue:</p>\n<p>The util method:</p>\n<pre><code>    public static double GetDollarAmount(Cell cell) { \n        switch (cell.getCellType()) { \n            case CellType.NUMERIC.code:\n                return cell.getNumericCellValue();\n            case CellType.STRING.code:\n                return SMDNumberUtils.parseDouble(cell.getStringCellValue());\n            case CellType.FORMULA.code:\n                return cell.getSheet().getWorkbook()\n                    .getCreationHelper()\n                    .createFormulaEvaluator()\n                    .evaluate(cell)\n                    .getNumberValue();\n                    \n            default: \n                throw new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\n        }\n    }\n</code></pre>\n<p>fails for the formula-type cell, because it returns 0 instead of, in the case of that example row, 1919.09 . When I check the <code>CellValue</code> that the <code>evaluate()</code> call returns, I see a <code>CellValue</code> with <code>#VALUE!</code> (which typically gets thrown when you're tryna use a numeric formula on string values)</p>\n<p>Even when I try to tweak my code to re-write the formula, by wrapping &quot;VALUE()&quot; around any cell references:</p>\n<pre><code>    public static double GetDollarAmount(Cell cell) { \n        switch (cell.getCellType()) { \n            case CellType.NUMERIC.code:\n                return cell.getNumericCellValue();\n            case CellType.STRING.code:\n                return SMDNumberUtils.parseDouble(cell.getStringCellValue());\n            case CellType.FORMULA.code:\n                \n                FormulaEvaluator evaluator = cell.getSheet().getWorkbook()\n                    .getCreationHelper()\n                    .createFormulaEvaluator();\n            \n                CellValue cellValue = evaluator.evaluate(cell);\n                    \n                if (!cellValue.getCellTypeEnum().equals(CellType.ERROR))\n                    return cellValue.getNumberValue();\n                    \n                cell.setCellFormula(cell.getCellFormula()\n                    .replaceAll(/[A-Z]+\\d+/, { match -&gt;\n                        return &quot;VALUE($match)&quot;\n                    }))\n                \n                return evaluator.evaluate(cell)\n                    .getNumberValue();\n                    \n            default: \n                throw new IllegalStateException(&quot;Cell Type ${cell.getCellTypeEnum().name} not yet supported!&quot;)\n        }\n    }\n</code></pre>\n<p>It still fails, with the same issue! Nothing changes, except we have a safe formula for next run!</p>\n<p><strong>How can I fix this</strong>, given that my testing framework, Katalon Studio, has me stuck on Apache POI <strong>v3.17</strong> ?</p>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691133987,"post_id":76833588,"comment_id":135453264,"body_markdown":"Your best bet is to make special handling for `Map`s (and probably `List`s too). I don&#39;t recommend reflecting into the innards of those classes.","body":"Your best bet is to make special handling for <code>Map</code>s (and probably <code>List</code>s too). I don&#39;t recommend reflecting into the innards of those classes."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691134471,"creation_date":1691134471,"answer_id":76833849,"question_id":76833588,"body_markdown":"You haven&#39;t provided much code, so I assume you&#39;re looping over the fields something like this:\r\n\r\n```\r\n        for (Field field : MainClass.class.getDeclaredFields()) {\r\n            String name = field.getName();\r\n            Class&lt;?&gt; type = field.getType();\r\n            Object value = field.get(mainClassInstance);\r\n        }\r\n```\r\n\r\nWhat you should do is have special handling for when you hit &quot;known&quot; types, such as `Map`:\r\n\r\n```\r\n        for (Field field : MainClass.class.getDeclaredFields()) {\r\n            if (Map.class.isAssignableFrom(field.getType())) {\r\n                Map&lt;?,?&gt; map = (Map&lt;?, ?&gt;) field.get(mainClass);\r\n                System.out.println(&quot;Found a map &quot; + map);\r\n                for (Map.Entry&lt;?, ?&gt; entry : map.entrySet()) {\r\n                    System.out.printf(&quot;%s: %s%n&quot;, entry.getKey(), entry.getValue());\r\n                }\r\n            } else {\r\n                System.out.printf(&quot;%s %s: %s%n&quot;, field.getType(), field.getName(), field.get(mainClass));\r\n            }\r\n        }\r\n```\r\n\r\nYou can extend this for `List`s, and even for your own types like `SubClass`.","title":"How to access and process Fields of Type Map in a Class using Java Reflection","body":"<p>You haven't provided much code, so I assume you're looping over the fields something like this:</p>\n<pre><code>        for (Field field : MainClass.class.getDeclaredFields()) {\n            String name = field.getName();\n            Class&lt;?&gt; type = field.getType();\n            Object value = field.get(mainClassInstance);\n        }\n</code></pre>\n<p>What you should do is have special handling for when you hit &quot;known&quot; types, such as <code>Map</code>:</p>\n<pre><code>        for (Field field : MainClass.class.getDeclaredFields()) {\n            if (Map.class.isAssignableFrom(field.getType())) {\n                Map&lt;?,?&gt; map = (Map&lt;?, ?&gt;) field.get(mainClass);\n                System.out.println(&quot;Found a map &quot; + map);\n                for (Map.Entry&lt;?, ?&gt; entry : map.entrySet()) {\n                    System.out.printf(&quot;%s: %s%n&quot;, entry.getKey(), entry.getValue());\n                }\n            } else {\n                System.out.printf(&quot;%s %s: %s%n&quot;, field.getType(), field.getName(), field.get(mainClass));\n            }\n        }\n</code></pre>\n<p>You can extend this for <code>List</code>s, and even for your own types like <code>SubClass</code>.</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1691555299,"post_id":76835414,"comment_id":135505822,"body_markdown":"The OP wants to use [reflection](https://docs.oracle.com/javase/tutorial/reflect/). I don&#39;t see how the code in your answer uses reflection.","body":"The OP wants to use <a href=\"https://docs.oracle.com/javase/tutorial/reflect/\" rel=\"nofollow noreferrer\">reflection</a>. I don&#39;t see how the code in your answer uses reflection."}],"tags":[],"owner":{"account_id":23002072,"reputation":1,"user_id":17125905,"display_name":"Aakash K"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691555405,"creation_date":1691147984,"answer_id":76835414,"question_id":76833588,"body_markdown":"```java\r\nsubClassMap=[{1=SubClass [aLong=1234567, aFloat=2.0, aDouble=2.234], 2=SubClass [aLong=31234567, aFloat=32.0, aDouble=32.234]}]\r\n```\r\nUse `toString()` method in both classes.\r\n\r\nMainClass:\r\n\r\n    @Override\r\n    public String toString() {\r\n\t    return &quot;subClassMap=[&quot; + subClassMap + &quot;]&quot;;\r\n\t}\r\n\r\nSubClass:\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;SubClass [aLong=&quot; + aLong + &quot;, aFloat=&quot; + aFloat + &quot;, aDouble=&quot; + aDouble + &quot;]&quot;;\r\n    }\r\n","title":"How to access and process Fields of Type Map in a Class using Java Reflection","body":"<pre class=\"lang-java prettyprint-override\"><code>subClassMap=[{1=SubClass [aLong=1234567, aFloat=2.0, aDouble=2.234], 2=SubClass [aLong=31234567, aFloat=32.0, aDouble=32.234]}]\n</code></pre>\n<p>Use <code>toString()</code> method in both classes.</p>\n<p>MainClass:</p>\n<pre><code>@Override\npublic String toString() {\n    return &quot;subClassMap=[&quot; + subClassMap + &quot;]&quot;;\n}\n</code></pre>\n<p>SubClass:</p>\n<pre><code>@Override\npublic String toString() {\n    return &quot;SubClass [aLong=&quot; + aLong + &quot;, aFloat=&quot; + aFloat + &quot;, aDouble=&quot; + aDouble + &quot;]&quot;;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1986288,"reputation":619,"user_id":1781423,"accept_rate":75,"display_name":"Krishna"},"score":0,"creation_date":1691582142,"post_id":76848877,"comment_id":135510507,"body_markdown":"Thanks Reilas, getGenericType() helped to print Key and Value part of MainClass.subClassMap. But I am trying to print all fields and sub-fields **recursively** (sorry I didn&#39;t mention it specifically, will update my question accordingly)","body":"Thanks Reilas, getGenericType() helped to print Key and Value part of MainClass.subClassMap. But I am trying to print all fields and sub-fields <b>recursively</b> (sorry I didn&#39;t mention it specifically, will update my question accordingly)"}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691384199,"creation_date":1691384199,"answer_id":76848877,"question_id":76833588,"body_markdown":"&gt; _&quot;... But how I can access and print the details like *Key* and *Value* part of Field **subClassMap** of Type *Map* (Map&lt;Integer, SubClass&gt;). ..._\r\n\r\nYou&#39;re looking to use the _[Field#getGenericType](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Field.html#getGenericType())_ method, instead of the _[getType](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Field.html#getType())_ method.\r\n\r\nAnd, resourcefully the _getGenericType_ method will fall back to the _getType_ method, if the class does not have any _type variables_.\r\n\r\nHere is the source; _[GitHub &amp;ndash; OpenJDK &amp;ndash; jdk/src/java.base/share/classes/java/lang/reflect/Field.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/reflect/Field.java#L292),_\r\n\r\n```java\r\npublic Type getGenericType() {\r\n    if (getGenericSignature() != null)\r\n        return getGenericInfo().getGenericType();\r\n    else\r\n        return getType();\r\n}\r\n```\r\n\r\nHere is an example, with the classes you provided.\r\n\r\n```java\r\nSystem.out.println(MainClass.class.getSimpleName());\r\nfor (Field field : MainClass.class.getDeclaredFields())\r\n    System.out.printf(&quot;- %s of Type %s%n&quot;, field.getName(), field.getGenericType());\r\n        \r\nSystem.out.println(SubClass.class.getSimpleName());\r\nfor (Field field : SubClass.class.getDeclaredFields())\r\n    System.out.printf(&quot;- %s of Type %s%n&quot;, field.getName(), field.getGenericType());\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nMainClass\r\n- aInt of Type int\r\n- aChar of Type char\r\n- aBoolean of Type boolean\r\n- subClassMap of Type java.util.Map&lt;java.lang.Integer, SubClass&gt;\r\nSubClass\r\n- aLong of Type long\r\n- aFloat of Type float\r\n- aDouble of Type double\r\n```","title":"How to access and process Fields of Type Map in a Class using Java Reflection","body":"<blockquote>\n<p><em>&quot;... But how I can access and print the details like <em>Key</em> and <em>Value</em> part of Field <strong>subClassMap</strong> of Type <em>Map</em> (Map&lt;Integer, SubClass&gt;). ...</em></p>\n</blockquote>\n<p>You're looking to use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Field.html#getGenericType()\" rel=\"nofollow noreferrer\">Field#getGenericType</a></em> method, instead of the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Field.html#getType()\" rel=\"nofollow noreferrer\">getType</a></em> method.</p>\n<p>And, resourcefully the <em>getGenericType</em> method will fall back to the <em>getType</em> method, if the class does not have any <em>type variables</em>.</p>\n<p>Here is the source; <em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/reflect/Field.java#L292\" rel=\"nofollow noreferrer\">GitHub – OpenJDK – jdk/src/java.base/share/classes/java/lang/reflect/Field.java</a>,</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>public Type getGenericType() {\n    if (getGenericSignature() != null)\n        return getGenericInfo().getGenericType();\n    else\n        return getType();\n}\n</code></pre>\n<p>Here is an example, with the classes you provided.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(MainClass.class.getSimpleName());\nfor (Field field : MainClass.class.getDeclaredFields())\n    System.out.printf(&quot;- %s of Type %s%n&quot;, field.getName(), field.getGenericType());\n        \nSystem.out.println(SubClass.class.getSimpleName());\nfor (Field field : SubClass.class.getDeclaredFields())\n    System.out.printf(&quot;- %s of Type %s%n&quot;, field.getName(), field.getGenericType());\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>MainClass\n- aInt of Type int\n- aChar of Type char\n- aBoolean of Type boolean\n- subClassMap of Type java.util.Map&lt;java.lang.Integer, SubClass&gt;\nSubClass\n- aLong of Type long\n- aFloat of Type float\n- aDouble of Type double\n</code></pre>\n"}],"owner":{"account_id":1986288,"reputation":619,"user_id":1781423,"accept_rate":75,"display_name":"Krishna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691582486,"creation_date":1691132048,"question_id":76833588,"body_markdown":"I am trying to access and print all Fields of below mentioned Class (MainClass) using Java Reflection\r\n\r\n```\r\npublic class MainClass{\r\n  private int aInt;\r\n  private char aChar;\r\n  private boolean aBoolean;\r\n  private Map&lt;Integer, SubClass&gt; subClassMap;\r\n\r\n/*** Setters &amp; Getters ***/\r\n\r\n}\r\n\r\npublic class SubClass{\r\n  private long aLong;\r\n  private float aFloat;\r\n  private double aDouble;\r\n\r\n/*** Setters &amp; Getters ***/\r\n}\r\n```\r\n\r\nIt is able to access all Fields and print the details like Type, Name etc using \r\n\r\n```(new MainClass()).getClass().getDeclaredFields()```\r\n\r\nBut how I can access and print the details like *Key* and *Value* part of Field **subClassMap** of Type *Map* (Map&lt;Integer, SubClass&gt;).\r\n\r\nI am trying to print all fields &amp; sub-fields of MainClass **recursively** like,\r\n\r\n```\r\n** Class MainClass contains following Fields and Objects...\r\n- aInt of Type int\r\n- aChar of Type char\r\n- aBoolean of Type boolean\r\n- subClassMap of Type Map&lt;Integer, SubClass&gt;\r\n\r\n   ** SubClass of subClassMap Field contains following Fields and Objects...\r\n   - aLong of Type long\r\n   - aFloat of Type float\r\n   - aDouble of Type double\r\n```","title":"How to access and process Fields of Type Map in a Class using Java Reflection","body":"<p>I am trying to access and print all Fields of below mentioned Class (MainClass) using Java Reflection</p>\n<pre><code>public class MainClass{\n  private int aInt;\n  private char aChar;\n  private boolean aBoolean;\n  private Map&lt;Integer, SubClass&gt; subClassMap;\n\n/*** Setters &amp; Getters ***/\n\n}\n\npublic class SubClass{\n  private long aLong;\n  private float aFloat;\n  private double aDouble;\n\n/*** Setters &amp; Getters ***/\n}\n</code></pre>\n<p>It is able to access all Fields and print the details like Type, Name etc using</p>\n<p><code>(new MainClass()).getClass().getDeclaredFields()</code></p>\n<p>But how I can access and print the details like <em>Key</em> and <em>Value</em> part of Field <strong>subClassMap</strong> of Type <em>Map</em> (Map&lt;Integer, SubClass&gt;).</p>\n<p>I am trying to print all fields &amp; sub-fields of MainClass <strong>recursively</strong> like,</p>\n<pre><code>** Class MainClass contains following Fields and Objects...\n- aInt of Type int\n- aChar of Type char\n- aBoolean of Type boolean\n- subClassMap of Type Map&lt;Integer, SubClass&gt;\n\n   ** SubClass of subClassMap Field contains following Fields and Objects...\n   - aLong of Type long\n   - aFloat of Type float\n   - aDouble of Type double\n</code></pre>\n"},{"tags":["java","lambda","java-8"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1691584359,"post_id":26747982,"comment_id":135510990,"body_markdown":"Nobody should be running JDK 8 anymore.  You need to upgrade to LTS version JDK 17 immediately.","body":"Nobody should be running JDK 8 anymore.  You need to upgrade to LTS version JDK 17 immediately."}],"answers":[{"comments":[{"owner":{"account_id":64324,"reputation":76490,"user_id":189950,"accept_rate":79,"display_name":"Kirk Woll"},"score":0,"creation_date":1415151522,"post_id":26747983,"comment_id":42081176,"body_markdown":"What do you mean by &quot;(not so)&quot;?","body":"What do you mean by &quot;(not so)&quot;?"},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":1,"creation_date":1415151602,"post_id":26747983,"comment_id":42081187,"body_markdown":"@KirkWoll sort of a pun; that is, I deem these side notes as important as the answer itself","body":"@KirkWoll sort of a pun; that is, I deem these side notes as important as the answer itself"}],"tags":[],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1415150507,"creation_date":1415149062,"answer_id":26747983,"question_id":26747982,"body_markdown":"One solution:\r\n\r\n    public final class Foo\r\n    {\r\n        private static void printProperty(final Object key, final Object value)\r\n        {\r\n            System.out.println(key + &quot;: &quot; + value);\r\n        }\r\n    \r\n        public static void main(final String... args)\r\n        {\r\n            System.getProperties().forEach(Foo::printProperty);\r\n        }\r\n    }\r\n\r\nRundown:\r\n\r\n* `Properties` extends `Hashtable&lt;Object, Object&gt;` which itself implements `Map&lt;Object, Object&gt;`;\r\n* `Map` has a [`.forEach()`][1] method whose argument is a [`BiConsumer`][2];\r\n* `BiConsumer` is a [functional interface][3];\r\n* static method `printProperty()` of class `Foo` happens to have the same signature as a `BiConsumer&lt;Object, Object&gt;`: its &quot;return value&quot; is `void`, its first argument is `Object`, its second argument is `Object`;\r\n* we can therefore use `Foo::printProperty` as a method reference.\r\n\r\nA shorter version would be:\r\n\r\n    public final class ShorterFoo\r\n    {\r\n        public static void main(final String... args)\r\n        {\r\n            System.getProperties()\r\n                .forEach((key, value) -&gt; System.out.println(key + &quot;: &quot; + value));\r\n        }\r\n    }\r\n\r\nAt runtime, this would not make a difference. Note the type inference in the second example: the compiler can infer that `key` and `value` are of type `Object`. Another way to write this &quot;anonymous lambda&quot; would have been:\r\n\r\n    (Object key, Object value) -&gt; System.out.println(key + &quot;: &quot; + value)\r\n\r\n---\r\n\r\n(not so) Side note: even though it is a little outdated, you really want to watch [this video](http://www.youtube.com/watch?v=C_QbkGU_lqY) (yes, it&#39;s one hour long; yes, it is worth watching it all).\r\n\r\n---\r\n\r\n(not so) Side note 2: you may have noticed that [`Map`&#39;s `.forEach()` mentions a default implementation][4]; this means that your custom `Map` implementations, or other implementations from external libraries, will be able to use `.forEach()` (for instance, Guava&#39;s `ImmutableMap`s). Many such methods on Java collections exist; do not hesitate to use these &quot;new methods&quot; on &quot;old dogs&quot;.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/function/BiConsumer.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p>One solution:</p>\n\n<pre><code>public final class Foo\n{\n    private static void printProperty(final Object key, final Object value)\n    {\n        System.out.println(key + \": \" + value);\n    }\n\n    public static void main(final String... args)\n    {\n        System.getProperties().forEach(Foo::printProperty);\n    }\n}\n</code></pre>\n\n<p>Rundown:</p>\n\n<ul>\n<li><code>Properties</code> extends <code>Hashtable&lt;Object, Object&gt;</code> which itself implements <code>Map&lt;Object, Object&gt;</code>;</li>\n<li><code>Map</code> has a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-\" rel=\"noreferrer\"><code>.forEach()</code></a> method whose argument is a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/function/BiConsumer.html\" rel=\"noreferrer\"><code>BiConsumer</code></a>;</li>\n<li><code>BiConsumer</code> is a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html\" rel=\"noreferrer\">functional interface</a>;</li>\n<li>static method <code>printProperty()</code> of class <code>Foo</code> happens to have the same signature as a <code>BiConsumer&lt;Object, Object&gt;</code>: its \"return value\" is <code>void</code>, its first argument is <code>Object</code>, its second argument is <code>Object</code>;</li>\n<li>we can therefore use <code>Foo::printProperty</code> as a method reference.</li>\n</ul>\n\n<p>A shorter version would be:</p>\n\n<pre><code>public final class ShorterFoo\n{\n    public static void main(final String... args)\n    {\n        System.getProperties()\n            .forEach((key, value) -&gt; System.out.println(key + \": \" + value));\n    }\n}\n</code></pre>\n\n<p>At runtime, this would not make a difference. Note the type inference in the second example: the compiler can infer that <code>key</code> and <code>value</code> are of type <code>Object</code>. Another way to write this \"anonymous lambda\" would have been:</p>\n\n<pre><code>(Object key, Object value) -&gt; System.out.println(key + \": \" + value)\n</code></pre>\n\n<hr>\n\n<p>(not so) Side note: even though it is a little outdated, you really want to watch <a href=\"http://www.youtube.com/watch?v=C_QbkGU_lqY\" rel=\"noreferrer\">this video</a> (yes, it's one hour long; yes, it is worth watching it all).</p>\n\n<hr>\n\n<p>(not so) Side note 2: you may have noticed that <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-\" rel=\"noreferrer\"><code>Map</code>'s <code>.forEach()</code> mentions a default implementation</a>; this means that your custom <code>Map</code> implementations, or other implementations from external libraries, will be able to use <code>.forEach()</code> (for instance, Guava's <code>ImmutableMap</code>s). Many such methods on Java collections exist; do not hesitate to use these \"new methods\" on \"old dogs\".</p>\n"},{"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1415151408,"post_id":26748280,"comment_id":42081157,"body_markdown":"Nice one... In fact I haven&#39;t even tried that. Of note here is that it really &quot;calls&quot; the `.forEach()` method on a `Set`. (also, pure English question: wouldn&#39;t you write &quot;admittedly&quot; instead of &quot;admittingly&quot;?)","body":"Nice one... In fact I haven&#39;t even tried that. Of note here is that it really &quot;calls&quot; the <code>.forEach()</code> method on a <code>Set</code>. (also, pure English question: wouldn&#39;t you write &quot;admittedly&quot; instead of &quot;admittingly&quot;?)"},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1415159227,"post_id":26748280,"comment_id":42083003,"body_markdown":"Might I suggest that you highlight the &quot;rundown&quot; of your code snippets like I did?","body":"Might I suggest that you highlight the &quot;rundown&quot; of your code snippets like I did?"}],"tags":[],"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1416902414,"creation_date":1415151240,"answer_id":26748280,"question_id":26747982,"body_markdown":"@fge has missed one very short version that admittedly depends on the `toString` implementation of `Map.Entry`.\r\n\r\n    public class VeryShortFoo {\r\n        public static void main(String... args) {\r\n            System.getProperties().entrySet().forEach(System.out::println);\r\n        }\r\n    }\r\n\r\n - Here, the `entrySet` is streamed and each `Map.Entry` is printed with a reference to `out.println`.\r\n - `Map.Entry` implementations of `toString` generally return `getKey() + &quot;=&quot; + getValue()`.\r\n\r\nHere&#39;s another one I quite like.\r\n\r\n    public class ElegantFoo {\r\n        public static void main(String... args) {\r\n            System.getProperties().entrySet().stream()\r\n                .map(e -&gt; e.getKey() + &quot;: &quot; + e.getValue())\r\n                .forEach(System.out::println);\r\n        }\r\n    }\r\n\r\n - The `entrySet` is streamed again (this time explicitly with a call to `stream`).\r\n - [`Stream#map`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-) performs a 1:1 conversion from elements of one type to elements of another. Here, it turns a `Stream&lt;Map.Entry&gt;` in to a `Stream&lt;String&gt;`.\r\n - The `Stream&lt;String&gt;` is printed.","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p>@fge has missed one very short version that admittedly depends on the <code>toString</code> implementation of <code>Map.Entry</code>.</p>\n\n<pre><code>public class VeryShortFoo {\n    public static void main(String... args) {\n        System.getProperties().entrySet().forEach(System.out::println);\n    }\n}\n</code></pre>\n\n<ul>\n<li>Here, the <code>entrySet</code> is streamed and each <code>Map.Entry</code> is printed with a reference to <code>out.println</code>.</li>\n<li><code>Map.Entry</code> implementations of <code>toString</code> generally return <code>getKey() + \"=\" + getValue()</code>.</li>\n</ul>\n\n<p>Here's another one I quite like.</p>\n\n<pre><code>public class ElegantFoo {\n    public static void main(String... args) {\n        System.getProperties().entrySet().stream()\n            .map(e -&gt; e.getKey() + \": \" + e.getValue())\n            .forEach(System.out::println);\n    }\n}\n</code></pre>\n\n<ul>\n<li>The <code>entrySet</code> is streamed again (this time explicitly with a call to <code>stream</code>).</li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#map-java.util.function.Function-\" rel=\"nofollow\"><code>Stream#map</code></a> performs a 1:1 conversion from elements of one type to elements of another. Here, it turns a <code>Stream&lt;Map.Entry&gt;</code> in to a <code>Stream&lt;String&gt;</code>.</li>\n<li>The <code>Stream&lt;String&gt;</code> is printed.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6954684,"reputation":680,"user_id":5336085,"accept_rate":80,"display_name":"programmar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1463187424,"creation_date":1463187424,"answer_id":37221356,"question_id":26747982,"body_markdown":"In Java 8, the `Properties` class inherits a new method from `HashTable` called `forEach`. This new method accepts functions (*functional interfaces*) to be passed to it as arguments. To be more specific, it accepts the functional interface `BiConsumer&lt;T,U&gt;`. This functional interface&#39;s *functional method* is `accept(T t, U u)`. In Java 8, all functional interfaces can be written as Lambda expressions. Therefore, here is how we would display all properties in a `Property` instance:\r\n\r\n    Properties vmProps = System.getProperties();\r\n    vmProps.forEach((t,u) -&gt; System.out.println(&quot;Property: &quot; + t + &quot;\\nValue: &quot; + u + &quot;\\n&quot;));\r\n","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p>In Java 8, the <code>Properties</code> class inherits a new method from <code>HashTable</code> called <code>forEach</code>. This new method accepts functions (<em>functional interfaces</em>) to be passed to it as arguments. To be more specific, it accepts the functional interface <code>BiConsumer&lt;T,U&gt;</code>. This functional interface's <em>functional method</em> is <code>accept(T t, U u)</code>. In Java 8, all functional interfaces can be written as Lambda expressions. Therefore, here is how we would display all properties in a <code>Property</code> instance:</p>\n\n<pre><code>Properties vmProps = System.getProperties();\nvmProps.forEach((t,u) -&gt; System.out.println(\"Property: \" + t + \"\\nValue: \" + u + \"\\n\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582479,"creation_date":1550650119,"answer_id":54781548,"question_id":26747982,"body_markdown":"**Sorted** by key using a TreeSet. This makes the output easier to read. \r\n\r\n    printMap(System.getProperties());\r\n    printMap(System.getenv());\r\n\r\n    public static void printMap(Map properties) {\r\n\t\tnew TreeSet&lt;&gt;(properties.keySet()).forEach((k) -&gt; {\r\n\t\t\tSystem.out.println(k + &quot; : &quot; + properties.get(k));\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\r\n","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p><strong>Sorted</strong> by key using a TreeSet. This makes the output easier to read.</p>\n<pre><code>printMap(System.getProperties());\nprintMap(System.getenv());\n\npublic static void printMap(Map properties) {\n    new TreeSet&lt;&gt;(properties.keySet()).forEach((k) -&gt; {\n        System.out.println(k + &quot; : &quot; + properties.get(k));\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1366480,"reputation":212,"user_id":1302799,"display_name":"mlapeyre"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557935014,"creation_date":1557935014,"answer_id":56153182,"question_id":26747982,"body_markdown":"\r\n    System.getProperties().list(System.out);","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<pre><code>System.getProperties().list(System.out);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15065643,"reputation":1,"user_id":10872888,"display_name":"Leonard Schiller"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649700404,"creation_date":1649700404,"answer_id":71832383,"question_id":26747982,"body_markdown":"```\r\npublic static void main(String[] args) {\r\n\r\n        System.getProperties().keySet().forEach((k)-&gt; System.out.println(k + &quot;   ::::   &quot;+ System.getProperty(k.toString())) );\r\n\r\n    }\r\n```\r\nShortest Version for me :D\r\nThe following for System Variables\r\n```\r\nSystem.getenv().forEach((String env, String val) -&gt; System.out.println(new StringBuilder(env).append(&quot;  =&gt;&gt;  &quot;).append(val).toString()));\r\n```\r\n","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<pre><code>public static void main(String[] args) {\n\n        System.getProperties().keySet().forEach((k)-&gt; System.out.println(k + &quot;   ::::   &quot;+ System.getProperty(k.toString())) );\n\n    }\n</code></pre>\n<p>Shortest Version for me :D\nThe following for System Variables</p>\n<pre><code>System.getenv().forEach((String env, String val) -&gt; System.out.println(new StringBuilder(env).append(&quot;  =&gt;&gt;  &quot;).append(val).toString()));\n</code></pre>\n"}],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6770,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":6,"score":8,"last_activity_date":1691582479,"creation_date":1415149062,"question_id":26747982,"body_markdown":"You can obtain a `Properties` instance of the JVM properties using [`System.getProperties()`][1]; how would you go about using Java 8 code to print all properties to the console?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getProperties--","title":"How would I print the JVM&#39;s system properties using Java 8 and lambdas?","body":"<p>You can obtain a <code>Properties</code> instance of the JVM properties using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getProperties--\"><code>System.getProperties()</code></a>; how would you go about using Java 8 code to print all properties to the console?</p>\n"},{"tags":["java","validation","stream"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1691582221,"post_id":76867519,"comment_id":135510525,"body_markdown":"`fooList.stream().map(this::validate).filter(Objects::nonNull).findFirst().orElse(null)`. The `map` operation gives a `Stream&lt;FooError&gt;` with possible `null` values, so these need to be filtered out.","body":"<code>fooList.stream().map(this::validate).filter(Objects::nonNull&zwnj;&#8203;).findFirst().orElse&zwnj;&#8203;(null)</code>. The <code>map</code> operation gives a <code>Stream&lt;FooError&gt;</code> with possible <code>null</code> values, so these need to be filtered out."}],"answers":[{"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691582336,"creation_date":1691582336,"answer_id":76867575,"question_id":76867519,"body_markdown":"```\r\npublic FooError validateFooList(final List&lt;Foo&gt; fooList) {\r\n    return fooList.stream()\r\n            .map(this::validate)\r\n            .filter(Objects::nonNull)\r\n            .findFirst()\r\n            .orElse(null);\r\n    }\r\n```\r\n\r\nThis calls the `validate` method for each `Foo` instance and filters  only the non-null `FooError` values, finds and returns the first `FooError` in the stream or *null* if there are none.","title":"Return enum object using validate method inside list validate function","body":"<pre><code>public FooError validateFooList(final List&lt;Foo&gt; fooList) {\n    return fooList.stream()\n            .map(this::validate)\n            .filter(Objects::nonNull)\n            .findFirst()\n            .orElse(null);\n    }\n</code></pre>\n<p>This calls the <code>validate</code> method for each <code>Foo</code> instance and filters  only the non-null <code>FooError</code> values, finds and returns the first <code>FooError</code> in the stream or <em>null</em> if there are none.</p>\n"}],"owner":{"account_id":5214373,"reputation":79,"user_id":4169810,"display_name":"JBallester"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76867575,"answer_count":1,"score":-1,"last_activity_date":1691582336,"creation_date":1691581925,"question_id":76867519,"body_markdown":"I have a problem that I want to resolve with Java streams if possible. This is my code.\r\n\r\n\tclass Foo {\r\n\t\tprivate String name;\r\n\t\tprivate String surname;\r\n\t\t// getters and setters\r\n\t}\r\n\r\n\tenum FooError {\r\n\t\tNO_NAME(&quot;Name cannot be null.&quot;), NO_SURNAME(&quot;Surname cannot be null&quot;);\r\n\r\n\t\tprivate final String message;\r\n\r\n\t\tFooError(final String message) {\r\n\t\t\tthis.message = message;\r\n\t\t}\r\n\r\n\t\tpublic String message() {\r\n\t\t\treturn message;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic FooError validate(final Foo foo) {\r\n\t\tif (StringUtils.isBlank(foo.getName())) {\r\n\t\t\treturn FooError.NO_NAME;\r\n\t\t}\r\n\r\n\t\tif (StringUtils.isBlank(foo.getSurname())) {\r\n\t\t\treturn FooError.NO_SURNAME;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic FooError validateFooList(final List&lt;Foo&gt; fooList) {\r\n\t\tFooError = fooList.stream()....\r\n\t}\r\n\r\nI want to return the first FooError ocurrence or null in the list using streams. Is it possible and if so, how can I do it?","title":"Return enum object using validate method inside list validate function","body":"<p>I have a problem that I want to resolve with Java streams if possible. This is my code.</p>\n<pre><code>class Foo {\n    private String name;\n    private String surname;\n    // getters and setters\n}\n\nenum FooError {\n    NO_NAME(&quot;Name cannot be null.&quot;), NO_SURNAME(&quot;Surname cannot be null&quot;);\n\n    private final String message;\n\n    FooError(final String message) {\n        this.message = message;\n    }\n\n    public String message() {\n        return message;\n    }\n\n}\n\npublic FooError validate(final Foo foo) {\n    if (StringUtils.isBlank(foo.getName())) {\n        return FooError.NO_NAME;\n    }\n\n    if (StringUtils.isBlank(foo.getSurname())) {\n        return FooError.NO_SURNAME;\n    }\n    return null;\n}\n\npublic FooError validateFooList(final List&lt;Foo&gt; fooList) {\n    FooError = fooList.stream()....\n}\n</code></pre>\n<p>I want to return the first FooError ocurrence or null in the list using streams. Is it possible and if so, how can I do it?</p>\n"},{"tags":["java","swagger","openapi","code-generation","swagger-codegen"],"comments":[{"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"score":0,"creation_date":1691572208,"post_id":76865635,"comment_id":135508445,"body_markdown":"For me the point of openapi-swagger is to provide the Description and constraints about JSON and REST.  There are no notion of inheritance in Json and in Json-schema and openAPI uses json-schema if i&#39;m not wrong, see https://stackoverflow.com/questions/71034983/json-schema-vs-open-api-java-support","body":"For me the point of openapi-swagger is to provide the Description and constraints about JSON and REST.  There are no notion of inheritance in Json and in Json-schema and openAPI uses json-schema if i&#39;m not wrong, see <a href=\"https://stackoverflow.com/questions/71034983/json-schema-vs-open-api-java-support\" title=\"json schema vs open api java support\">stackoverflow.com/questions/71034983/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582243,"creation_date":1691582243,"answer_id":76867564,"question_id":76865635,"body_markdown":"I have no idea why but it works:\r\n\r\n \r\n\r\n    Parent:\r\n       discriminator:\r\n         propertyName: stub_type\r\n       description: Parent\r\n       properties:\r\n         id: \r\n            $ref: &#39;#/components/schemas/id&#39;","title":"How to describe inheritance of DTO in open api 3.0 to have java inheritance in generated classes?","body":"<p>I have no idea why but it works:</p>\n<pre><code>Parent:\n   discriminator:\n     propertyName: stub_type\n   description: Parent\n   properties:\n     id: \n        $ref: '#/components/schemas/id'\n</code></pre>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691582243,"creation_date":1691567308,"question_id":76865635,"body_markdown":"I have 3 entities\r\n\r\n    parent \r\n     - child_1\r\n     - child_2\r\n\r\nAnd my openApi definition:\r\n    \r\n     Parent:\r\n      description: Parent\r\n      properties:\r\n        id: \r\n          $ref: &#39;#/components/schemas/id&#39;\r\n      \r\n      Child1:\r\n        allOf:\r\n          - $ref: &#39;#/components/schemas/Parent&#39;\r\n          - type: object\r\n            description: Child_1\r\n            properties:\r\n              child1Fied:\r\n                $ref: &#39;#/components/schemas/child1Fied&#39;\r\n\r\n       Child2:\r\n        allOf:\r\n          - $ref: &#39;#/components/schemas/Parent&#39;\r\n          - type: object\r\n            description: Child_2\r\n            properties:\r\n              child1Fied:\r\n                $ref: &#39;#/components/schemas/child2Fied&#39;\r\n\r\n\r\nI expected to have generated classes like this:\r\n\r\n    Child1 extends Parent\r\n    ...\r\n    Child2 extends Parent\r\n    ...\r\n\r\n\r\nBut as a result all 3 classes are independent with their own fields (parent has id field, Child1 has his own id and child1Fied, Child2 has his own id and child2Fied). \r\n\r\nIs there way to make a hint for code generator to implement classes via inheritance ?\r\n\r\n**P.S.**\r\nI haven&#39;t found answer here: https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/\r\n","title":"How to describe inheritance of DTO in open api 3.0 to have java inheritance in generated classes?","body":"<p>I have 3 entities</p>\n<pre><code>parent \n - child_1\n - child_2\n</code></pre>\n<p>And my openApi definition:</p>\n<pre><code> Parent:\n  description: Parent\n  properties:\n    id: \n      $ref: '#/components/schemas/id'\n  \n  Child1:\n    allOf:\n      - $ref: '#/components/schemas/Parent'\n      - type: object\n        description: Child_1\n        properties:\n          child1Fied:\n            $ref: '#/components/schemas/child1Fied'\n\n   Child2:\n    allOf:\n      - $ref: '#/components/schemas/Parent'\n      - type: object\n        description: Child_2\n        properties:\n          child1Fied:\n            $ref: '#/components/schemas/child2Fied'\n</code></pre>\n<p>I expected to have generated classes like this:</p>\n<pre><code>Child1 extends Parent\n...\nChild2 extends Parent\n...\n</code></pre>\n<p>But as a result all 3 classes are independent with their own fields (parent has id field, Child1 has his own id and child1Fied, Child2 has his own id and child2Fied).</p>\n<p>Is there way to make a hint for code generator to implement classes via inheritance ?</p>\n<p><strong>P.S.</strong>\nI haven't found answer here: <a href=\"https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/\" rel=\"nofollow noreferrer\">https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/</a></p>\n"},{"tags":["java","eclipse","macos"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691574163,"post_id":76866453,"comment_id":135508840,"body_markdown":"Is the java process behind Eclipse running as the same user?","body":"Is the java process behind Eclipse running as the same user?"},{"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"score":0,"creation_date":1691574397,"post_id":76866453,"comment_id":135508891,"body_markdown":"@g00se yes, both are running under my user account (verified in `Activity Monitor` using PID).","body":"@g00se yes, both are running under my user account (verified in <code>Activity Monitor</code> using PID)."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1691581673,"post_id":76866453,"comment_id":135510421,"body_markdown":"Applications like Eclipse don&#39;t get the path set up for Terminal. See [here](https://stackoverflow.com/q/135688/2670892) for lots of discussion","body":"Applications like Eclipse don&#39;t get the path set up for Terminal. See <a href=\"https://stackoverflow.com/q/135688/2670892\">here</a> for lots of discussion"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691581735,"post_id":76866453,"comment_id":135510435,"body_markdown":"Does this answer your question? [Environment variables in Eclipse](https://stackoverflow.com/questions/7048216/environment-variables-in-eclipse)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7048216/environment-variables-in-eclipse\">Environment variables in Eclipse</a>"},{"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"score":0,"creation_date":1691581955,"post_id":76866453,"comment_id":135510469,"body_markdown":"@aled no - I don&#39;t want to manually copy my `$PATH` to my IDE, and that&#39;s not portable.","body":"@aled no - I don&#39;t want to manually copy my <code>$PATH</code> to my IDE, and that&#39;s not portable."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1691666336,"post_id":76866453,"comment_id":135523672,"body_markdown":"By default, applications are launched from within Eclipse without any environment variables set (for reasons of portability).  [If you want to pass or local environment variable `PATH` to your application, in your launch configuration in the tab _Environment_ set `PATH` to `${env_var:PATH}`](https://stackoverflow.com/a/55698254/6505250).","body":"By default, applications are launched from within Eclipse without any environment variables set (for reasons of portability).  <a href=\"https://stackoverflow.com/a/55698254/6505250\">If you want to pass or local environment variable <code>PATH</code> to your application, in your launch configuration in the tab <i>Environment</i> set <code>PATH</code> to <code>${env_var:PATH}</code></a>."}],"answers":[{"comments":[{"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"score":0,"creation_date":1691575575,"post_id":76866627,"comment_id":135509179,"body_markdown":"I haven&#39;t changed the `$PATH` in this session, and a reboot hasn&#39;t helped.","body":"I haven&#39;t changed the <code>$PATH</code> in this session, and a reboot hasn&#39;t helped."},{"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"score":0,"creation_date":1691576068,"post_id":76866627,"comment_id":135509285,"body_markdown":"Where do you set the $PATH? If you use `.bashrc` or some other user specific profile config it might be ignored by eclipse, like stated here: See: https://stackoverflow.com/a/7048245/1485527 .","body":"Where do you set the $PATH? If you use <code>.bashrc</code> or some other user specific profile config it might be ignored by eclipse, like stated here: See: <a href=\"https://stackoverflow.com/a/7048245/1485527\">stackoverflow.com/a/7048245/1485527</a> ."},{"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"score":0,"creation_date":1691576240,"post_id":76866627,"comment_id":135509327,"body_markdown":"Also see: https://superuser.com/questions/457889/order-of-execution-and-purpose-of-profile-vs-zshrc","body":"Also see: <a href=\"https://superuser.com/questions/457889/order-of-execution-and-purpose-of-profile-vs-zshrc\" title=\"order of execution and purpose of profile vs zshrc\">superuser.com/questions/457889/&hellip;</a>"}],"tags":[],"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582200,"creation_date":1691575260,"answer_id":76866627,"question_id":76866453,"body_markdown":"Coming from Linux. I would try:\r\n\r\n**Understanding environment variables**\r\n\r\nIf you run java from your console it executes in the context of the current console session.\r\n\r\n1. If you change `$PATH` in your current session it doesn&#180;t mean that the value is available system wide. e.g. when you start a different session (eclipse) the content of the variable can differ.\r\n\r\n2. Different shells behave differently depending on where you have defined your variables. e.g  ~/.profile is only loaded when running zsh in sh compatibility mode, otherwise it reads .zprofile, as well as .zshrc for interactive and .zlogin for login shells.\r\n\r\nEclipse might have problems with `env` vars on the user level.\r\nSee: [Eclipse and Bash](https://stackoverflow.com/a/7048245/1485527)\r\nSee: [Zsh invocation order](https://superuser.com/questions/457889/order-of-execution-and-purpose-of-profile-vs-zshrc)\r\n\r\n\r\n**Persist $PATH**\r\n\r\nThis is typically done by initializing the variable during logging via a config file on **user** or **system level**. For macos see https://stackoverflow.com/questions/22465332/setting-path-environment-variable-in-osx-permanently .\r\n\r\n**Logout and login again**\r\n\r\nAfter adding the variable to the system configuration you have to logout and login again to make its contents available through all sessions.\r\n\r\n**Verify user**\r\n\r\nIf the `$PATH` is persistent it should be the same in all console sessions. Print `System.getProperty(&quot;user.name&quot;);` to verify that the expected user is calling `java -jar`. [1]\r\n\r\n[1] [Howto print all environment vars and properties](https://stackoverflow.com/a/54781548/1485527)\r\n","title":"Eclipse not reading System.getenv() correctly - PATH missing elements","body":"<p>Coming from Linux. I would try:</p>\n<p><strong>Understanding environment variables</strong></p>\n<p>If you run java from your console it executes in the context of the current console session.</p>\n<ol>\n<li><p>If you change <code>$PATH</code> in your current session it doesn´t mean that the value is available system wide. e.g. when you start a different session (eclipse) the content of the variable can differ.</p>\n</li>\n<li><p>Different shells behave differently depending on where you have defined your variables. e.g  ~/.profile is only loaded when running zsh in sh compatibility mode, otherwise it reads .zprofile, as well as .zshrc for interactive and .zlogin for login shells.</p>\n</li>\n</ol>\n<p>Eclipse might have problems with <code>env</code> vars on the user level.\nSee: <a href=\"https://stackoverflow.com/a/7048245/1485527\">Eclipse and Bash</a>\nSee: <a href=\"https://superuser.com/questions/457889/order-of-execution-and-purpose-of-profile-vs-zshrc\">Zsh invocation order</a></p>\n<p><strong>Persist $PATH</strong></p>\n<p>This is typically done by initializing the variable during logging via a config file on <strong>user</strong> or <strong>system level</strong>. For macos see <a href=\"https://stackoverflow.com/questions/22465332/setting-path-environment-variable-in-osx-permanently\">Setting PATH environment variable in OSX permanently</a> .</p>\n<p><strong>Logout and login again</strong></p>\n<p>After adding the variable to the system configuration you have to logout and login again to make its contents available through all sessions.</p>\n<p><strong>Verify user</strong></p>\n<p>If the <code>$PATH</code> is persistent it should be the same in all console sessions. Print <code>System.getProperty(&quot;user.name&quot;);</code> to verify that the expected user is calling <code>java -jar</code>. [1]</p>\n<p>[1] <a href=\"https://stackoverflow.com/a/54781548/1485527\">Howto print all environment vars and properties</a></p>\n"}],"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691582200,"creation_date":1691574018,"question_id":76866453,"body_markdown":"If I run `echo $PATH`, I get:\r\n```\r\n/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin\r\n```\r\nAmongst others.\r\n\r\nIf I make a simple application that does the same:\r\n```\r\npublic class Test {\r\n    public static void main(final String[] args) {\r\n        System.out.println(System.getenv().get(&quot;PATH&quot;));\r\n    }\r\n}\r\n```\r\n\r\nWhen I run this from the console (`java -jar test.jar`):\r\n```\r\n/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin\r\n```\r\n\r\nAnd yet when I run that same application in Eclipse:\r\n```\r\n/usr/bin:/bin:/usr/sbin:/sbin\r\n```\r\n\r\nWhy isn&#39;t Eclipse picking up all the environment variables?","title":"Eclipse not reading System.getenv() correctly - PATH missing elements","body":"<p>If I run <code>echo $PATH</code>, I get:</p>\n<pre><code>/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin\n</code></pre>\n<p>Amongst others.</p>\n<p>If I make a simple application that does the same:</p>\n<pre><code>public class Test {\n    public static void main(final String[] args) {\n        System.out.println(System.getenv().get(&quot;PATH&quot;));\n    }\n}\n</code></pre>\n<p>When I run this from the console (<code>java -jar test.jar</code>):</p>\n<pre><code>/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin\n</code></pre>\n<p>And yet when I run that same application in Eclipse:</p>\n<pre><code>/usr/bin:/bin:/usr/sbin:/sbin\n</code></pre>\n<p>Why isn't Eclipse picking up all the environment variables?</p>\n"},{"tags":["java","asynchronous","trace","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":1976110,"reputation":10792,"user_id":1773866,"display_name":"Marcin Grzejszczak"},"score":0,"creation_date":1646815368,"post_id":71406380,"comment_id":126214706,"body_markdown":"Please provide any meaningful information like which version of sleuth, boot, cloud you&#39;re using? how are you making the call etc. Without this information there&#39;s no way to help you","body":"Please provide any meaningful information like which version of sleuth, boot, cloud you&#39;re using? how are you making the call etc. Without this information there&#39;s no way to help you"},{"owner":{"account_id":23161913,"reputation":67,"user_id":17262444,"display_name":"Fedor Nikolaev"},"score":0,"creation_date":1646815731,"post_id":71406380,"comment_id":126214838,"body_markdown":"boot version 2.5.6\nsleuth version is 3.0.5\nThe call provides by : CompletableFuture.runAsync(() -&gt; methodName())","body":"boot version 2.5.6 sleuth version is 3.0.5 The call provides by : CompletableFuture.runAsync(() -&gt; methodName())"},{"owner":{"account_id":23161913,"reputation":67,"user_id":17262444,"display_name":"Fedor Nikolaev"},"score":0,"creation_date":1646816772,"post_id":71406380,"comment_id":126215223,"body_markdown":"@MarcinGrzejszczak","body":"@MarcinGrzejszczak"}],"answers":[{"tags":[],"owner":{"account_id":12646638,"reputation":71,"user_id":9192148,"display_name":"snesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691582102,"creation_date":1691582102,"answer_id":76867540,"question_id":71406380,"body_markdown":"You will have to enable this behavior by setting the value of `spring.sleuth.async.enabled` to `true`.","title":"Spring-cloud-sleuth async methods","body":"<p>You will have to enable this behavior by setting the value of <code>spring.sleuth.async.enabled</code> to <code>true</code>.</p>\n"}],"owner":{"account_id":23161913,"reputation":67,"user_id":17262444,"display_name":"Fedor Nikolaev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":811,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691582102,"creation_date":1646814702,"question_id":71406380,"body_markdown":"I have to add @Async annotation to method so Sleuth could generate span id and trace id. The problem is that it i need the same trace id as from the call side, but it is another.\r\n```\r\nmain log: INFO [label-service,**a3a1f1db46aecf7a**,**a3a1f1db46aecf7a**]\r\nasync log: INFO [label-service,**b819bd0e67ee86c4**,b819bd0e67ee86c4]\r\n```\r\nI need ids in ** to be the same.","title":"Spring-cloud-sleuth async methods","body":"<p>I have to add @Async annotation to method so Sleuth could generate span id and trace id. The problem is that it i need the same trace id as from the call side, but it is another.</p>\n<pre><code>main log: INFO [label-service,**a3a1f1db46aecf7a**,**a3a1f1db46aecf7a**]\nasync log: INFO [label-service,**b819bd0e67ee86c4**,b819bd0e67ee86c4]\n</code></pre>\n<p>I need ids in ** to be the same.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691586287,"post_id":76867491,"comment_id":135511437,"body_markdown":"You should tag your question with whatever mapping library you&#39;re using, and show the import statement for the annotation.","body":"You should tag your question with whatever mapping library you&#39;re using, and show the import statement for the annotation."}],"owner":{"account_id":1416016,"reputation":158,"user_id":7101236,"display_name":"kakemonsteret"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691581739,"creation_date":1691581739,"question_id":76867491,"body_markdown":"I&#39;m working with a piece of code that gives me a build failure (in IntelliJ). \r\nThere are no reds or other indications of errors, but it fails when I build the application.\r\n\r\nThe error:\r\n\r\n    java: Unmapped target property: &quot;removeLaneAreneItem&quot;. Mapping from property &quot;LaneBudsjett laneBudsjettAnnenBank&quot; to &quot;LaneBudsjettTO laneBudsjettAnnenBank&quot;.\r\n\r\nThe code:\r\n\r\n    @Mapping(target = &quot;removeLaneAreneItem&quot;, ignore = true)\r\n    LaneBudsjettTO laneBudsjett(no.husbanken.saksbehandling.simulering.domain.LaneBudsjett v1);\r\n\r\nAll I seem to be able to find about this is about warnings, not errors. Also, the mapping target and &quot;ignore=true I though would solve the problem.\r\n\r\nAny ideas?","title":"Java: Unmapped target property error (not warning)","body":"<p>I'm working with a piece of code that gives me a build failure (in IntelliJ).\nThere are no reds or other indications of errors, but it fails when I build the application.</p>\n<p>The error:</p>\n<pre><code>java: Unmapped target property: &quot;removeLaneAreneItem&quot;. Mapping from property &quot;LaneBudsjett laneBudsjettAnnenBank&quot; to &quot;LaneBudsjettTO laneBudsjettAnnenBank&quot;.\n</code></pre>\n<p>The code:</p>\n<pre><code>@Mapping(target = &quot;removeLaneAreneItem&quot;, ignore = true)\nLaneBudsjettTO laneBudsjett(no.husbanken.saksbehandling.simulering.domain.LaneBudsjett v1);\n</code></pre>\n<p>All I seem to be able to find about this is about warnings, not errors. Also, the mapping target and &quot;ignore=true I though would solve the problem.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","spring-boot","maven","graphql","graphiql"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691677827,"post_id":76867464,"comment_id":135526359,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":25791289,"reputation":1,"user_id":19535325,"display_name":"Dmitry"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691581546,"creation_date":1691581546,"question_id":76867464,"body_markdown":"I&#39;m testing graphQL fucntional and have a problem: if I use libraries of com.graphql-java (graphql-spring-boot-starter, graphql-java-tools, graphiql-spring-boot-starter) Its work, but if I use GraphQL Java Kickstart (graphql-spring-boot-starter and so on) I catch 404 error.[GraphQL Java Kickstart](https://i.stack.imgur.com/ppEuG.png) [com.graphql-java](https://i.stack.imgur.com/CIQrK.png)\r\nIn both cases application is sucssesfully started\r\n\r\nMy pom:\r\n[pom](https://i.stack.imgur.com/2Dvyb.png) Use java 11, spring boot 2.5.0 and maven 3.8.0\r\nCommented dependency is my problem I think.Structure of .graphqls files and resolvers are working [file structure](https://i.stack.imgur.com/BhyR0.png) [resolver](https://i.stack.imgur.com/LlhR4.png) [service layer](https://i.stack.imgur.com/ge5z0.png)\r\nI have tried work with .properties file like [prop file](https://i.stack.imgur.com/dcBos.png)\r\nI need to connect GraphQL Java Kickstart because it has a lot of settings for graphql (work with exceprion handlers, dataLoader, pagination, depth of query and another problematic stuff, that has not at com.graphql-java)\r\nUsung not last versions because want to test move  to new versions\r\n","title":"App can&#39;t connect with graphql using graphql-java-kickstart","body":"<p>I'm testing graphQL fucntional and have a problem: if I use libraries of com.graphql-java (graphql-spring-boot-starter, graphql-java-tools, graphiql-spring-boot-starter) Its work, but if I use GraphQL Java Kickstart (graphql-spring-boot-starter and so on) I catch 404 error.<a href=\"https://i.stack.imgur.com/ppEuG.png\" rel=\"nofollow noreferrer\">GraphQL Java Kickstart</a> <a href=\"https://i.stack.imgur.com/CIQrK.png\" rel=\"nofollow noreferrer\">com.graphql-java</a>\nIn both cases application is sucssesfully started</p>\n<p>My pom:\n<a href=\"https://i.stack.imgur.com/2Dvyb.png\" rel=\"nofollow noreferrer\">pom</a> Use java 11, spring boot 2.5.0 and maven 3.8.0\nCommented dependency is my problem I think.Structure of .graphqls files and resolvers are working <a href=\"https://i.stack.imgur.com/BhyR0.png\" rel=\"nofollow noreferrer\">file structure</a> <a href=\"https://i.stack.imgur.com/LlhR4.png\" rel=\"nofollow noreferrer\">resolver</a> <a href=\"https://i.stack.imgur.com/ge5z0.png\" rel=\"nofollow noreferrer\">service layer</a>\nI have tried work with .properties file like <a href=\"https://i.stack.imgur.com/dcBos.png\" rel=\"nofollow noreferrer\">prop file</a>\nI need to connect GraphQL Java Kickstart because it has a lot of settings for graphql (work with exceprion handlers, dataLoader, pagination, depth of query and another problematic stuff, that has not at com.graphql-java)\nUsung not last versions because want to test move  to new versions</p>\n"},{"tags":["java","linux","websocket","permissions"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691538037,"post_id":76863680,"comment_id":135504464,"body_markdown":"*my problem is they all belong to root as it seems to be normal for lets encrypt.* Well they should belong to whomever is running the process to which the certs belong. And that should *not* be root for security reasons. If Apache, that would often be www-data on Debian systems","body":"<i>my problem is they all belong to root as it seems to be normal for lets encrypt.</i> Well they should belong to whomever is running the process to which the certs belong. And that should <i>not</i> be root for security reasons. If Apache, that would often be www-data on Debian systems"},{"owner":{"account_id":29187907,"reputation":1,"user_id":22360607,"display_name":"Treeda"},"score":0,"creation_date":1691539599,"post_id":76863680,"comment_id":135504588,"body_markdown":"they are used by multiple application, for example also by apache and it seems that apache is reading them as root during startup","body":"they are used by multiple application, for example also by apache and it seems that apache is reading them as root during startup"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691567086,"post_id":76863680,"comment_id":135507436,"body_markdown":"AFAIK Apache starts under root then continues as another user (www-data on Debian). In theory it&#39;s only the private key file you should have to worry about. I&#39;m not sure it needs to be owned by root but you could give it a group read permission","body":"AFAIK Apache starts under root then continues as another user (www-data on Debian). In theory it&#39;s only the private key file you should have to worry about. I&#39;m not sure it needs to be owned by root but you could give it a group read permission"}],"owner":{"account_id":29187907,"reputation":1,"user_id":22360607,"display_name":"Treeda"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691581500,"creation_date":1691536599,"question_id":76863680,"body_markdown":"I am experimenting with a java service using vertx and websockets to create a chat server.\r\n\r\nEverything works fine except secure connections on the live machine.\r\n\r\nI have the certificate files from Let&#39;s Encrypt configured in a resource file, so far so good.\r\n\r\n```\r\n  &quot;certificate&quot;: {\r\n    &quot;chain&quot;: &quot;/home/letsencrypt/cert/live/x/chain.pem&quot;,\r\n    &quot;privkey&quot;: &quot;/home/letsencrypt/cert/live/x/privkey.pem&quot;,\r\n    &quot;cert&quot;: &quot;/home/letsencrypt/cert/live/x/cert.pem&quot;\r\n  }\r\n```\r\n\r\nMy problem is they all belong to root as it seems to be normal for Let&#39;s Encrypt. My java app is registered as a service and starts but I get an access denied error when I try to load the files.\r\n\r\nSo what would be the best practice or solution to solve that? Copying them to another location and lowering the access rights might not the best solution. \r\n\r\n\r\n\r\nI haven&#39;t tried anything else so far.","title":"Access root owned certificate files (Let&#39;s Encrypt) from java app running as service","body":"<p>I am experimenting with a java service using vertx and websockets to create a chat server.</p>\n<p>Everything works fine except secure connections on the live machine.</p>\n<p>I have the certificate files from Let's Encrypt configured in a resource file, so far so good.</p>\n<pre><code>  &quot;certificate&quot;: {\n    &quot;chain&quot;: &quot;/home/letsencrypt/cert/live/x/chain.pem&quot;,\n    &quot;privkey&quot;: &quot;/home/letsencrypt/cert/live/x/privkey.pem&quot;,\n    &quot;cert&quot;: &quot;/home/letsencrypt/cert/live/x/cert.pem&quot;\n  }\n</code></pre>\n<p>My problem is they all belong to root as it seems to be normal for Let's Encrypt. My java app is registered as a service and starts but I get an access denied error when I try to load the files.</p>\n<p>So what would be the best practice or solution to solve that? Copying them to another location and lowering the access rights might not the best solution.</p>\n<p>I haven't tried anything else so far.</p>\n"},{"tags":["java","swing","jtable","awt","defaulttablemodel"],"answers":[{"comments":[{"owner":{"account_id":3595933,"reputation":1375,"user_id":3157033,"accept_rate":33,"display_name":"Flatron"},"score":0,"creation_date":1456236192,"post_id":35579547,"comment_id":58845684,"body_markdown":"`public CustomTableModel(ColumnDefinition... columns) { ... }` **↝**  `{ ... }` **↝** `super(columns);` ?","body":"<code>public CustomTableModel(ColumnDefinition... columns) { ... }</code> <b>↝</b>  <code>{ ... }</code> <b>↝</b> <code>super(columns);</code> ?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1456236242,"post_id":35579547,"comment_id":58845719,"body_markdown":"@Flatron  don&#39;t get it. `AbstractTableModel` only has a no-arg constructor so nothing special here.","body":"@Flatron  don&#39;t get it. <code>AbstractTableModel</code> only has a no-arg constructor so nothing special here."},{"owner":{"account_id":3595933,"reputation":1375,"user_id":3157033,"accept_rate":33,"display_name":"Flatron"},"score":0,"creation_date":1456236300,"post_id":35579547,"comment_id":58845765,"body_markdown":"okay sorry I meant that the constructor content should be `super(columns)`;","body":"okay sorry I meant that the constructor content should be <code>super(columns)</code>;"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1456236400,"post_id":35579547,"comment_id":58845853,"body_markdown":"@Flatron no, the constructor content should be whatever is needed to actually implement the custom table model, i.e. you&#39;d probably store the column definitions and access them in `getColumnName(int)`, `getColumnClass(int)` etc.","body":"@Flatron no, the constructor content should be whatever is needed to actually implement the custom table model, i.e. you&#39;d probably store the column definitions and access them in <code>getColumnName(int)</code>, <code>getColumnClass(int)</code> etc."},{"owner":{"account_id":3595933,"reputation":1375,"user_id":3157033,"accept_rate":33,"display_name":"Flatron"},"score":0,"creation_date":1456237063,"post_id":35579547,"comment_id":58846349,"body_markdown":"I am not sure how this is meant exactly, don&#39;t I have to pass them to the superclasses constructor? Else if I had some variables within my `CustomTableModel` I would just store them in there but the actual model would still not have them assigned?","body":"I am not sure how this is meant exactly, don&#39;t I have to pass them to the superclasses constructor? Else if I had some variables within my <code>CustomTableModel</code> I would just store them in there but the actual model would still not have them assigned?"},{"owner":{"account_id":3595933,"reputation":1375,"user_id":3157033,"accept_rate":33,"display_name":"Flatron"},"score":0,"creation_date":1456237155,"post_id":35579547,"comment_id":58846431,"body_markdown":"Or better said, if I get passed over into my `CustomTableModel` Class the `ColumnDefinitions` how do I &quot;implement&quot; them into the TableModel itself?","body":"Or better said, if I get passed over into my <code>CustomTableModel</code> Class the <code>ColumnDefinitions</code> how do I &quot;implement&quot; them into the TableModel itself?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1456238148,"post_id":35579547,"comment_id":58847213,"body_markdown":"@Flatron you implement that in your custom table model, `TableModel` is just an interface. Have a look at the methods in `TableModel` which mostly are those you need to implement/overwrite (e.g. there&#39;s already a basic default implementation of `getColumnName(int)` in `AbstractTableModel`).","body":"@Flatron you implement that in your custom table model, <code>TableModel</code> is just an interface. Have a look at the methods in <code>TableModel</code> which mostly are those you need to implement/overwrite (e.g. there&#39;s already a basic default implementation of <code>getColumnName(int)</code> in <code>AbstractTableModel</code>)."},{"owner":{"account_id":3595933,"reputation":1375,"user_id":3157033,"accept_rate":33,"display_name":"Flatron"},"score":0,"creation_date":1456238247,"post_id":35579547,"comment_id":58847280,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/104307/discussion-between-flatron-and-thomas).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/104307/discussion-between-flatron-and-thomas\">continue this discussion in chat</a>."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1456265246,"post_id":35579547,"comment_id":58864684,"body_markdown":"`TableModel` provides a `getColumnName` method which, when the `TableModel` is applied to the `JTable`, it uses this information to construct the `TableColumnModel`","body":"<code>TableModel</code> provides a <code>getColumnName</code> method which, when the <code>TableModel</code> is applied to the <code>JTable</code>, it uses this information to construct the <code>TableColumnModel</code>"}],"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":9,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456235939,"creation_date":1456235939,"answer_id":35579547,"question_id":35579379,"body_markdown":"&gt; But I don&#39;t understand how the column classes are passed to the constructor after ...&quot;Fertig&quot;}) { as both needed arguments (data + column names) have already been passed over.\r\n\r\nThey aren&#39;t passed to the constructor but initialized in the anonymous class.\r\n\r\nThe code you posted at the end also looks somewhat odd and probably wouldn&#39;t quite work as intended.\r\n\r\nI&#39;d probably not extend `DefaultTableModel` since it might require a lot of methods to be overwritten anyways but instead extend `AbstractTableModel` and implement the missing methods along with those that need to be overwritten (shouldn&#39;t be many).\r\n\r\nThen I&#39;d probably pass an array (you could use vargs here) or collection of `ColumnDefinition` (or some other name) objects that contain the name and the class, e.g. something like this:\r\n\r\n    TableModel tm = new CustomTableModel( new ColumnDefinition(&quot;Lfd. Nr.&quot;, Integer.class), \r\n                                          new ColumnDefinition(&quot;FB Nr.&quot;, String.class), ...)\r\n\r\nThe constructor would look like this:\r\n\r\n    public CustomTableModel(ColumnDefinition... columns) { ... }","title":"Initialize &quot;empty&quot; DefaultTableModel with column names and column classes","body":"<blockquote>\n  <p>But I don't understand how the column classes are passed to the constructor after ...\"Fertig\"}) { as both needed arguments (data + column names) have already been passed over.</p>\n</blockquote>\n\n<p>They aren't passed to the constructor but initialized in the anonymous class.</p>\n\n<p>The code you posted at the end also looks somewhat odd and probably wouldn't quite work as intended.</p>\n\n<p>I'd probably not extend <code>DefaultTableModel</code> since it might require a lot of methods to be overwritten anyways but instead extend <code>AbstractTableModel</code> and implement the missing methods along with those that need to be overwritten (shouldn't be many).</p>\n\n<p>Then I'd probably pass an array (you could use vargs here) or collection of <code>ColumnDefinition</code> (or some other name) objects that contain the name and the class, e.g. something like this:</p>\n\n<pre><code>TableModel tm = new CustomTableModel( new ColumnDefinition(\"Lfd. Nr.\", Integer.class), \n                                      new ColumnDefinition(\"FB Nr.\", String.class), ...)\n</code></pre>\n\n<p>The constructor would look like this:</p>\n\n<pre><code>public CustomTableModel(ColumnDefinition... columns) { ... }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691581236,"creation_date":1456265642,"answer_id":35589319,"question_id":35579379,"body_markdown":"If you take a look at [`TableModel`](https://docs.oracle.com/javase/8/docs/api/javax/swing/table/TableModel.html), it has two methods, `getColumnName` and `getColumnClass`, now, you&#39;ve overrriden `getColumnClass`, which is fine, but internally to `DefaultTableModel`, it uses the column names you supplied to the constructor and returns them when `getColumnName` get&#39;s called.\r\n\r\nThis array also defines the return value for `getColumnCount`.\r\n\r\nSo, when `JTable#setModel` is called, one of things it will do (by default) is call it&#39;s `createDefaultColumnsFromModel` method, this then uses the `TableModel` to build it&#39;s `TableColumnModel`, using the `TableModel#getColumnName` method to provide the `TableColumn`&#39;s `headerValue` property.\r\n\r\nMagic!","title":"Initialize &quot;empty&quot; DefaultTableModel with column names and column classes","body":"<p>If you take a look at <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/table/TableModel.html\" rel=\"nofollow noreferrer\"><code>TableModel</code></a>, it has two methods, <code>getColumnName</code> and <code>getColumnClass</code>, now, you've overrriden <code>getColumnClass</code>, which is fine, but internally to <code>DefaultTableModel</code>, it uses the column names you supplied to the constructor and returns them when <code>getColumnName</code> get's called.</p>\n<p>This array also defines the return value for <code>getColumnCount</code>.</p>\n<p>So, when <code>JTable#setModel</code> is called, one of things it will do (by default) is call it's <code>createDefaultColumnsFromModel</code> method, this then uses the <code>TableModel</code> to build it's <code>TableColumnModel</code>, using the <code>TableModel#getColumnName</code> method to provide the <code>TableColumn</code>'s <code>headerValue</code> property.</p>\n<p>Magic!</p>\n"}],"owner":{"account_id":3595933,"reputation":1375,"user_id":3157033,"accept_rate":33,"display_name":"Flatron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1250,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691581236,"creation_date":1456235472,"question_id":35579379,"body_markdown":"I created my own class called `CustomTableModel` which extends from DefaultTableModel. \r\n\r\n    public class CustomTableModel extends DefaultTableModel {/*[...]*/}\r\n\r\nMy plan is that when you call my constructor with `new CustomTableModel();` you get a new `CustomTableModel` pre initialized with column names and column classes.\r\n\r\nI got something like this running but the current implementation was something that once came out of the Eclipse AWT (Window Builder) where you can also use a GUI to setup your TableModel. The current implementation looks like this:\r\n\r\n    public static DefaultTableModel createEmptyModel() {\r\n            model = new DefaultTableModel(new Object[][]{},\r\n                    new String[]{&quot;Lfd. Nr.&quot;, &quot;FB Nr.&quot;, &quot;Auftr. / Meld. Nr.&quot;, &quot;Betra Nr.&quot;, &quot;Datum&quot;, &quot;Bahnhof&quot;, &quot;Str. Km.&quot;,\r\n                            &quot;Sprz.&quot;, &quot;Arb. Zeit&quot;, &quot;Mitarbeiter&quot;, &quot;Auftrag / Objekt(e)&quot;, &quot;Anmerkungen&quot;, &quot;Fertig&quot;}) {\r\n    \r\n                @SuppressWarnings(&quot;rawtypes&quot;)\r\n                Class[] columnTypes = new Class[]{Integer.class, String.class, String.class, String.class, String.class,\r\n                        String.class, String.class, String.class, String.class, String.class, String.class, String.class, Boolean.class};\r\n    \r\n                @SuppressWarnings({&quot;unchecked&quot;, &quot;rawtypes&quot;})\r\n                public Class getColumnClass(int columnIndex) {\r\n                    return columnTypes[columnIndex];\r\n                }\r\n            };\r\n            return model;\r\n        }\r\n\r\nAs it might work it is not really a `CustomTableModel` at all, it&#39;s simply a `DefaultTableModel` created from within a method and returned + completely obfuscated (to me at least :) ).\r\n\r\nWhile it works I am not sure how it exactly works, to my understanding it passes an empty array of objects (2D) as well as a String array to the constructor of the DefaultTableModel, which so far is understandable (Empty data + Column names) as required from the constructor of the DefaultTableModel. **But** I don&#39;t understand how the column classes are passed to the constructor after `...&quot;Fertig&quot;}) {` as both needed arguments (data + column names) have already been passed over.\r\n\r\nMy best guess was this approach:\r\n\r\n       public CustomTableModel() {\r\n            super(new Object[][]{{},{Integer.class, String.class, String.class, String.class, String.class,\r\n                    String.class, String.class, String.class, String.class, String.class, String.class, String.class, Boolean.class}}, new String[]{&quot;Lfd. Nr.&quot;, &quot;FB Nr.&quot;, &quot;Auftr. / Meld. Nr.&quot;, &quot;Betra Nr.&quot;, &quot;Datum&quot;, &quot;Bahnhof&quot;, &quot;Str. Km.&quot;,\r\n                    &quot;Sprz.&quot;, &quot;Arb. Zeit&quot;, &quot;Mitarbeiter&quot;, &quot;Auftrag / Objekt(e)&quot;, &quot;Anmerkungen&quot;, &quot;Fertig&quot;});\r\n        }\r\n\r\nUnfortunately this ends in a mess like this:\r\n[![Wrong outcome, Classes are not passed over right][1]][1]\r\n\r\nFrom this I assume that my pass of the classes is completely wrong. \r\n\r\nWhat I expect to get is this (after adding rows):\r\n[![Result with &quot;old&quot; implementation from Eclipse AWT][2]][2]\r\n\r\nIf someone could enlighten me on how to do this I would be really happy, I want to understand this.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/tt5W6.png\r\n  [2]: http://i.stack.imgur.com/uxBmc.png","title":"Initialize &quot;empty&quot; DefaultTableModel with column names and column classes","body":"<p>I created my own class called <code>CustomTableModel</code> which extends from DefaultTableModel. </p>\n\n<pre><code>public class CustomTableModel extends DefaultTableModel {/*[...]*/}\n</code></pre>\n\n<p>My plan is that when you call my constructor with <code>new CustomTableModel();</code> you get a new <code>CustomTableModel</code> pre initialized with column names and column classes.</p>\n\n<p>I got something like this running but the current implementation was something that once came out of the Eclipse AWT (Window Builder) where you can also use a GUI to setup your TableModel. The current implementation looks like this:</p>\n\n<pre><code>public static DefaultTableModel createEmptyModel() {\n        model = new DefaultTableModel(new Object[][]{},\n                new String[]{\"Lfd. Nr.\", \"FB Nr.\", \"Auftr. / Meld. Nr.\", \"Betra Nr.\", \"Datum\", \"Bahnhof\", \"Str. Km.\",\n                        \"Sprz.\", \"Arb. Zeit\", \"Mitarbeiter\", \"Auftrag / Objekt(e)\", \"Anmerkungen\", \"Fertig\"}) {\n\n            @SuppressWarnings(\"rawtypes\")\n            Class[] columnTypes = new Class[]{Integer.class, String.class, String.class, String.class, String.class,\n                    String.class, String.class, String.class, String.class, String.class, String.class, String.class, Boolean.class};\n\n            @SuppressWarnings({\"unchecked\", \"rawtypes\"})\n            public Class getColumnClass(int columnIndex) {\n                return columnTypes[columnIndex];\n            }\n        };\n        return model;\n    }\n</code></pre>\n\n<p>As it might work it is not really a <code>CustomTableModel</code> at all, it's simply a <code>DefaultTableModel</code> created from within a method and returned + completely obfuscated (to me at least :) ).</p>\n\n<p>While it works I am not sure how it exactly works, to my understanding it passes an empty array of objects (2D) as well as a String array to the constructor of the DefaultTableModel, which so far is understandable (Empty data + Column names) as required from the constructor of the DefaultTableModel. <strong>But</strong> I don't understand how the column classes are passed to the constructor after <code>...\"Fertig\"}) {</code> as both needed arguments (data + column names) have already been passed over.</p>\n\n<p>My best guess was this approach:</p>\n\n<pre><code>   public CustomTableModel() {\n        super(new Object[][]{{},{Integer.class, String.class, String.class, String.class, String.class,\n                String.class, String.class, String.class, String.class, String.class, String.class, String.class, Boolean.class}}, new String[]{\"Lfd. Nr.\", \"FB Nr.\", \"Auftr. / Meld. Nr.\", \"Betra Nr.\", \"Datum\", \"Bahnhof\", \"Str. Km.\",\n                \"Sprz.\", \"Arb. Zeit\", \"Mitarbeiter\", \"Auftrag / Objekt(e)\", \"Anmerkungen\", \"Fertig\"});\n    }\n</code></pre>\n\n<p>Unfortunately this ends in a mess like this:\n<a href=\"https://i.stack.imgur.com/tt5W6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tt5W6.png\" alt=\"Wrong outcome, Classes are not passed over right\"></a></p>\n\n<p>From this I assume that my pass of the classes is completely wrong. </p>\n\n<p>What I expect to get is this (after adding rows):\n<a href=\"https://i.stack.imgur.com/uxBmc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uxBmc.png\" alt=\"Result with &quot;old&quot; implementation from Eclipse AWT\"></a></p>\n\n<p>If someone could enlighten me on how to do this I would be really happy, I want to understand this.</p>\n"},{"tags":["java","android","kotlin","android-debug"],"comments":[{"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"score":0,"creation_date":1691584640,"post_id":76867190,"comment_id":135511068,"body_markdown":"Can you provide errors from the logcat ? Going to answer asa I see the logcat","body":"Can you provide errors from the logcat ? Going to answer asa I see the logcat"}],"answers":[{"comments":[{"owner":{"account_id":24748451,"reputation":9,"user_id":18634316,"display_name":"Kossy"},"score":0,"creation_date":1691581856,"post_id":76867347,"comment_id":135510454,"body_markdown":"If your guess is right, how do I solve the issue then?","body":"If your guess is right, how do I solve the issue then?"},{"owner":{"account_id":459638,"reputation":6041,"user_id":860212,"display_name":"karllindmark"},"score":1,"creation_date":1691582235,"post_id":76867347,"comment_id":135510531,"body_markdown":"Don&#39;t draw the route to the map until you&#39;ve (successfully) received the response? :-)","body":"Don&#39;t draw the route to the map until you&#39;ve (successfully) received the response? :-)"}],"tags":[],"owner":{"account_id":459638,"reputation":6041,"user_id":860212,"display_name":"karllindmark"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691580633,"creation_date":1691580633,"answer_id":76867347,"question_id":76867190,"body_markdown":"Without the stacktrace or additional code, we can only really do guesses as to what the root cause it.\r\n\r\nWith that said, my guess would be that `drawRouteOnMap()` is being called (via `onMapReady(...)`) before your call to `routeService.getRoutes(origin, destination, apiKey)` completes successfully.","title":"UninitializedPropertyAccessException:","body":"<p>Without the stacktrace or additional code, we can only really do guesses as to what the root cause it.</p>\n<p>With that said, my guess would be that <code>drawRouteOnMap()</code> is being called (via <code>onMapReady(...)</code>) before your call to <code>routeService.getRoutes(origin, destination, apiKey)</code> completes successfully.</p>\n"}],"owner":{"account_id":24748451,"reputation":9,"user_id":18634316,"display_name":"Kossy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691580633,"creation_date":1691579379,"question_id":76867190,"body_markdown":"I&#39;m working on Android development using Kotlin, and encountering an issue with a lateinit var named polyline. The error I&#39;m getting suggests that even though I assigned a value to polyline inside a function called from the onCreate, the app is still crashing with the message that polyline has not been initialized.\r\n\r\nPls how do I go about this?\r\nIs there something I&#39;m missing?\r\n\r\nSee the code below. I removed all unneccessary codes for this question\r\n\r\n\r\n\r\n\r\n    class CustomerMapActivity : AppCompatActivity(), OnMapReadyCallback {\r\n    \r\n        private lateinit var polyline: String\r\n    \r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            binding = ActivityCustomerMapBinding.inflate(layoutInflater)\r\n            setContentView(binding.root)\r\n    \r\n            val pickUpLocation = &quot;Hall 2 Car Park, Benin City, Nigeria&quot;\r\n            val dropOffLocation = &quot;Nadia Bakery, Benin City, Nigeria&quot;\r\n            val apiKey = R.string.google_api_key.toString()\r\n    \r\n            routesDetails(pickUpLocation, dropOffLocation, apiKey)\r\n    \r\n    \r\n        }\r\n    \r\n    \r\n        override fun onMapReady(mMap: GoogleMap) {\r\n            \r\n            drawRouteOnMap()\r\n\r\n        }\r\n    \r\n    \r\n        private fun routesDetails(origin: String, destination: String, apiKey: String){\r\n    \r\n            val routeService = ServiceBuilder.buildService(RouteService::class.java)\r\n    \r\n            val requestCall = routeService.getRoutes(origin, destination, apiKey)\r\n            requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\r\n                override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\r\n    \r\n                    if (response.isSuccessful) {\r\n    \r\n                        if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\r\n    \r\n    \r\n                            polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\r\n    \r\n                        }else{\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                override fun onFailure(call: Call&lt;RoutesResponse&gt;, t: Throwable) {\r\n    \r\n                }\r\n    \r\n            })\r\n        }\r\n    \r\n    \r\n    \r\n        private fun drawRouteOnMap() {\r\n            val decodedPolyline = PolyUtil.decode(polyline)\r\n            \r\n        }\r\n\r\n\r\n\r\n","title":"UninitializedPropertyAccessException:","body":"<p>I'm working on Android development using Kotlin, and encountering an issue with a lateinit var named polyline. The error I'm getting suggests that even though I assigned a value to polyline inside a function called from the onCreate, the app is still crashing with the message that polyline has not been initialized.</p>\n<p>Pls how do I go about this?\nIs there something I'm missing?</p>\n<p>See the code below. I removed all unneccessary codes for this question</p>\n<pre><code>class CustomerMapActivity : AppCompatActivity(), OnMapReadyCallback {\n\n    private lateinit var polyline: String\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        binding = ActivityCustomerMapBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        val pickUpLocation = &quot;Hall 2 Car Park, Benin City, Nigeria&quot;\n        val dropOffLocation = &quot;Nadia Bakery, Benin City, Nigeria&quot;\n        val apiKey = R.string.google_api_key.toString()\n\n        routesDetails(pickUpLocation, dropOffLocation, apiKey)\n\n\n    }\n\n\n    override fun onMapReady(mMap: GoogleMap) {\n        \n        drawRouteOnMap()\n\n    }\n\n\n    private fun routesDetails(origin: String, destination: String, apiKey: String){\n\n        val routeService = ServiceBuilder.buildService(RouteService::class.java)\n\n        val requestCall = routeService.getRoutes(origin, destination, apiKey)\n        requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\n            override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\n\n                if (response.isSuccessful) {\n\n                    if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\n\n\n                        polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\n\n                    }else{\n                    }\n                }\n            }\n\n            override fun onFailure(call: Call&lt;RoutesResponse&gt;, t: Throwable) {\n\n            }\n\n        })\n    }\n\n\n\n    private fun drawRouteOnMap() {\n        val decodedPolyline = PolyUtil.decode(polyline)\n        \n    }\n</code></pre>\n"},{"tags":["java","swt","eclipse-rcp","rcp"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691578421,"post_id":76866638,"comment_id":135509744,"body_markdown":"The BindingService should have been put in the context by `org.eclipse.ui.internal.BindingToModelProcessor` started from the `org.eclipse.ui.workbench` `plugin.xml`","body":"The BindingService should have been put in the context by <code>org.eclipse.ui.internal.BindingToModelProcessor</code> started from the <code>org.eclipse.ui.workbench</code> <code>plugin.xml</code>"},{"owner":{"account_id":101533,"reputation":349,"user_id":273096,"accept_rate":48,"display_name":"dasPing"},"score":0,"creation_date":1691580480,"post_id":76866638,"comment_id":135510166,"body_markdown":"In my case none of the public methods in BindingToModelProcessor are called before  PlatformUI.createAndRunWorkbench(display, advisor) is called, can I provoke BindingToModelProcessor to execute before thw workbench is created? Is there a way of making the BindingManager of the BindingService optional?","body":"In my case none of the public methods in BindingToModelProcessor are called before  PlatformUI.createAndRunWorkbench(display, advisor) is called, can I provoke BindingToModelProcessor to execute before thw workbench is created? Is there a way of making the BindingManager of the BindingService optional?"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691580760,"post_id":76866638,"comment_id":135510210,"body_markdown":"No, it has to be run. There is something wrong with your setup.","body":"No, it has to be run. There is something wrong with your setup."},{"owner":{"account_id":101533,"reputation":349,"user_id":273096,"accept_rate":48,"display_name":"dasPing"},"score":0,"creation_date":1691660653,"post_id":76866638,"comment_id":135522691,"body_markdown":"Interesting, I experimented with the launcher and switched from &quot;run a product&quot; to &quot;run an application&quot; and now BindingToModelProcessor is called early on and the application starts, very odd, any ideas why this helps?","body":"Interesting, I experimented with the launcher and switched from &quot;run a product&quot; to &quot;run an application&quot; and now BindingToModelProcessor is called early on and the application starts, very odd, any ideas why this helps?"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1691661028,"post_id":76866638,"comment_id":135522756,"body_markdown":"Your `org.eclipse.core.runtime.products` definition is probably wrong.","body":"Your <code>org.eclipse.core.runtime.products</code> definition is probably wrong."},{"owner":{"account_id":101533,"reputation":349,"user_id":273096,"accept_rate":48,"display_name":"dasPing"},"score":0,"creation_date":1691667609,"post_id":76866638,"comment_id":135523934,"body_markdown":"The only thing in there that could be funky is my bespoke modelResourceHandler, which is loading user profiles. I take it out and I can start up as a product. However, I need my ProfileResourceHandler and it isn&#39;t throwing exceptions. I wonder what eclipse doesn&#39;t like about it.","body":"The only thing in there that could be funky is my bespoke modelResourceHandler, which is loading user profiles. I take it out and I can start up as a product. However, I need my ProfileResourceHandler and it isn&#39;t throwing exceptions. I wonder what eclipse doesn&#39;t like about it."}],"owner":{"account_id":101533,"reputation":349,"user_id":273096,"accept_rate":48,"display_name":"dasPing"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691580608,"creation_date":1691575319,"question_id":76866638,"body_markdown":"After updating client target from 4.17 to 4.24 I am getting an exception in the Workbench on line 2247. This is happening after calling  PlatformUI.createAndRunWorkbench(display, advisor);\r\n\r\n```\r\n\t\tStartupThreading.runWithoutExceptions(new StartupRunnable() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void runWithException() {\r\n\t\t\t\tBindingManager.DEBUG = Policy.DEBUG_KEY_BINDINGS;\r\n\t\t\t\tbindingManager = e4Context.get(BindingManager.class);\r\n\t\t\t\tbindingService[0] = ContextInjectionFactory.make(BindingService.class, e4Context); // Throws an exception\r\n\t\t\t}\r\n\t\t});\r\n```\r\nThe error I get is &#39;org.eclipse.e4.core.di.InjectionException: Unable to process &quot;BindingService.manager&quot;: no actual value was found for the argument &quot;BindingManager&quot;&#39; and the application cannot start.\r\n\r\nThere was a similiar problem here: https://bugs.eclipse.org/bugs/show_bug.cgi?id=400265 and making the BindingManager optional was a solution, I wonder if I could make it optional in BindinService somehow.\r\n\r\nIs there any way to force the BindingManager to be loaded and/or set so the application starts?\r\n","title":"After updating RCP client target from 4.17 to 4.24 the BindingService manager can&#39;t be initialized","body":"<p>After updating client target from 4.17 to 4.24 I am getting an exception in the Workbench on line 2247. This is happening after calling  PlatformUI.createAndRunWorkbench(display, advisor);</p>\n<pre><code>        StartupThreading.runWithoutExceptions(new StartupRunnable() {\n\n            @Override\n            public void runWithException() {\n                BindingManager.DEBUG = Policy.DEBUG_KEY_BINDINGS;\n                bindingManager = e4Context.get(BindingManager.class);\n                bindingService[0] = ContextInjectionFactory.make(BindingService.class, e4Context); // Throws an exception\n            }\n        });\n</code></pre>\n<p>The error I get is 'org.eclipse.e4.core.di.InjectionException: Unable to process &quot;BindingService.manager&quot;: no actual value was found for the argument &quot;BindingManager&quot;' and the application cannot start.</p>\n<p>There was a similiar problem here: <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=400265\" rel=\"nofollow noreferrer\">https://bugs.eclipse.org/bugs/show_bug.cgi?id=400265</a> and making the BindingManager optional was a solution, I wonder if I could make it optional in BindinService somehow.</p>\n<p>Is there any way to force the BindingManager to be loaded and/or set so the application starts?</p>\n"},{"tags":["java","android","kotlin","build.gradle","kapt"],"comments":[{"owner":{"account_id":3223013,"reputation":185,"user_id":4484997,"display_name":"Adjwilley"},"score":0,"creation_date":1684701531,"post_id":76294240,"comment_id":134551621,"body_markdown":"I can&#39;t help yet as I&#39;m in the same boat. I&#39;m running Android Studio Flamingo with gradle 8.0 and my understanding is that I&#39;m supposed to use JDK 17.","body":"I can&#39;t help yet as I&#39;m in the same boat. I&#39;m running Android Studio Flamingo with gradle 8.0 and my understanding is that I&#39;m supposed to use JDK 17."},{"owner":{"account_id":3223013,"reputation":185,"user_id":4484997,"display_name":"Adjwilley"},"score":0,"creation_date":1685299580,"post_id":76294240,"comment_id":134639052,"body_markdown":"Are you on Windows? Running Android Studio &quot;as an administrator&quot; fixed the problem for me.","body":"Are you on Windows? Running Android Studio &quot;as an administrator&quot; fixed the problem for me."}],"owner":{"account_id":22554625,"reputation":21,"user_id":16743226,"display_name":"Katoari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691580109,"creation_date":1684571726,"question_id":76294240,"body_markdown":"I&#39;m trying to run and build my project and I keep having this error. \r\n\r\n## Build Output\r\n``` &gt; Task :app:kaptMyAppQaKotlin FAILED Execution failed for task &#39;:app:kaptMyAppQaKotlin&#39;. &gt; A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction &gt; java.lang.reflect.InvocationTargetException (no error message) ```\r\n\r\n## Using (./gradlew assemble --stacktrace --warning-mode all)\r\n&gt; Task :app:kaptMyAppDebugKotlin\r\n&gt; /Users/MyUser/Documents/Projects/Kotlin/MyApp-android/MyApp/app/build/tmp/kapt3/stubs/MyAppDebug/com/MyApp/charts/ChartActivity.java:193: error: incompatible types: NonExistentClass cannot be converted to Annotation\r\n&gt; private final void showChartError(@error.NonExistentClass\r\n&gt; ^\r\n\r\n&gt; Task :app:kaptMyAppDebugKotlin FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\n  Execution failed for task &#39;:app:kaptMyAppDebugKotlin&#39;.\r\n\r\n&gt; A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction\r\n&gt; java.lang.reflect.InvocationTargetException (no error message)\r\n\r\nHere&#39;s my ff files.\r\n# build.gradle (MyApp)\r\n\r\n```\r\nTop-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.7.10&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.2.2&#39;\r\n        classpath &#39;me.tatarka:gradle-retrolambda:3.3.1&#39;\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        maven { url &#39;https://oss.sonatype.org/content/repositories/snapshots&#39; }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n\r\n# build.gradle (:app)\r\n\r\n```\r\nimport java.util.regex.Matcher\r\nimport java.util.regex.Pattern\r\n\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\napply plugin: &#39;com.google.gms.google-services&#39;\r\napply plugin: &#39;kotlin-parcelize&#39;\r\napply plugin: &#39;kotlin-kapt&#39;\r\n\r\ntask aaaprintVar {\r\n    doLast {\r\n        println System.getenv(&#39;HOME&#39;)\r\n        println System.getenv(&#39;ANDROID_KEY_ALIAS&#39;)\r\n        println project.property(&quot;BUILD_NUMBER_TAG&quot;)\r\n    }\r\n}\r\n\r\n/* AutoVersion Helpers */\r\ndef autoVersion_props = new Properties()\r\ndef folder = new File(&quot;$project.rootDir/scripts&quot;)\r\nif (!folder.exists()) {\r\n    // Create all folders up-to and including B\r\n    folder.mkdirs()\r\n}\r\nnew File(folder, &quot;autoVersion.properties&quot;).withWriterAppend { w -&gt;\r\n    w &lt;&lt; &quot;&quot;\r\n}\r\n\r\ndef autoPropsFile = new File(folder, &quot;autoVersion.properties&quot;)\r\nautoPropsFile.withInputStream { autoVersion_props.load(it) }\r\n\r\ndef readVersionCode = { -&gt;\r\n    def versionCodeString = autoVersion_props.getProperty(&quot;gitCommitCount&quot;) ?: &quot;0&quot;\r\n    return Integer.parseInt(versionCodeString)\r\n}\r\n/* End AutoVersion Helpers */\r\n\r\nandroid {\r\n    def readVersionName = { -&gt;\r\n        def versionName = autoVersion_props.getProperty(&quot;gitVersionTagNumber&quot;) ?: &quot;0.0.0&quot;\r\n        return versionName\r\n    }\r\n\r\n    def getApplicationIdSuffix = { -&gt;\r\n        return readVersionName() + &#39;-&#39; + readVersionCode() + &#39;+&#39; + gitShortHash()\r\n    }\r\n\r\n    def getMyApplicationIdSuffix = { -&gt;\r\n        println(&quot;getMyApplicationIddSuffix&quot;)\r\n        return readVersionName() + &#39;-&#39; + readVersionCode() + &#39;+&#39; + gitShortHash()\r\n    }\r\n\r\n    def gitPrefix = &#39;asdf&#39;\r\n    // ...\r\n    ndkVersion &quot;21.4.7075529&quot; // or &quot;22.1.7171670&quot;\r\n    // ...\r\n    compileSdkVersion 31\r\n    buildToolsVersion &#39;31.0.0&#39;\r\n    defaultConfig {\r\n        applicationId &quot;com&quot;\r\n        minSdkVersion 26\r\n        targetSdkVersion 31\r\n        buildConfigField &quot;String&quot;, &quot;GIT_COMMIT_HASH&quot;, &quot;\\&quot;&quot; + gitCommitHash() + &quot;\\&quot;&quot;\r\n        println &quot;VersionCode: &quot; + readVersionCode()\r\n        versionCode readVersionCode()\r\n        javaCompileOptions {\r\n            annotationProcessorOptions {\r\n                arguments = [&quot;room.schemaLocation&quot;:\r\n                                     &quot;$projectDir/schemas&quot;.toString()]\r\n            }\r\n        }\r\n        testInstrumentationRunner &#39;androidx.test.runner.AndroidJUnitRunner&#39;\r\n    }\r\n    buildFeatures {\r\n        viewBinding = true\r\n        dataBinding = true\r\n    }\r\n    packagingOptions {\r\n        exclude(&quot;**/libshinobicharts-android.so&quot;)\r\n    }\r\n    flavorDimensions &quot;base&quot;\r\n    productFlavors {\r\n        myapp {\r\n            dimension &quot;base&quot;\r\n            applicationId &#39;com.me.app&#39;\r\n            versionName readVersionName()\r\n            setProperty(&quot;archivesBaseName&quot;, getMyApplicationIdSuffix())\r\n            buildConfigField(&#39;String&#39;, &#39;HOCKEYAPP_SDK_APP_ID&#39;, &quot;\\&quot;750acaf49a6a418abdc3d8e36e1d1b83\\&quot;&quot;)\r\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;750acaf49a6a418abdc3d8e36e1d1b83&quot;]\r\n        }\r\n        myappinstant {\r\n            dimension &quot;base&quot;\r\n            applicationId &#39;com.myapp.instant&#39;\r\n            versionName = readVersionName()\r\n            setProperty(&quot;archivesBaseName&quot;, getMyInstantApplicationIdSuffix())\r\n            buildConfigField(&#39;String&#39;, &#39;HOCKEYAPP_SDK_APP_ID&#39;, &quot;\\&quot;8ee7b2f987d9402c86c0c96dfff52306\\&quot;&quot;)\r\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;8ee7b2f987d9402c86c0c96dfff52306&quot;]\r\n        }\r\n    }\r\n\r\n    def getCurrentFlavor = {\r\n        Gradle gradle = getGradle()\r\n        String tskReqStr = gradle.getStartParameter().getTaskRequests().toString()\r\n\r\n        Pattern pattern\r\n\r\n        if (tskReqStr.contains(&quot;assemble&quot;))\r\n            pattern = Pattern.compile(&quot;assemble(\\\\w+)(Release|Debug)&quot;)\r\n        else\r\n            pattern = Pattern.compile(&quot;generate(\\\\w+)(Release|Debug)&quot;)\r\n\r\n        Matcher matcher = pattern.matcher(tskReqStr)\r\n\r\n        if (matcher.find())\r\n            return matcher.group(1).toLowerCase() + &#39;-&#39;\r\n        else {\r\n            println &quot;NO MATCH FOUND&quot;\r\n            return &quot;&quot;\r\n        }\r\n    }\r\n\r\n    def runAutoVersion = { -&gt;\r\n        try {\r\n            def stdout = new ByteArrayOutputStream()\r\n            exec {\r\n                if (System.getProperty(&#39;os.name&#39;).toLowerCase().contains(&#39;windows&#39;)) {\r\n                    commandLine &#39;cmd&#39;, &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\r\n                } else {\r\n                    commandLine &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\r\n                }\r\n                args = [getCurrentFlavor()]\r\n                standardOutput = stdout\r\n            }\r\n            return stdout.toString().trim()\r\n        }\r\n        catch (error) {\r\n            println &#39;Error: &#39; + error\r\n            return null\r\n        }\r\n    }\r\n\r\n\r\n    preBuild.doFirst {\r\n        println &quot;PreBuild&quot;\r\n        println &quot;Running auto-version.sh&quot;\r\n        println runAutoVersion()\r\n        project.task(&quot;printProps&quot;)\r\n    }\r\n\r\n    task autoVersion {\r\n        doLast {\r\n            println &quot;PreBuild&quot;\r\n            println &quot;Running auto-version.sh&quot;\r\n            println runAutoVersion()\r\n            println &quot;Finished running auto-version.sh&quot;\r\n            project.task(&quot;printProps&quot;)\r\n        }\r\n    }\r\n\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n\r\n\r\n    def code_sign_props = new Properties()\r\n    def code_sign_file = new File(&quot;$rootProject.projectDir/secrets/code_sign.properties&quot;)\r\n    def codeSignFile = code_sign_file.exists() ? code_sign_file : file(&quot;$rootProject.projectDir/secrets/default_code_sign.properties&quot;)\r\n    println(&quot;CodeSignFile: &quot; + codeSignFile)\r\n    codeSignFile.withInputStream { code_sign_props.load(it) }\r\n    def keystoreFile = new File(&quot;$rootProject.projectDir/secrets/upload.jks&quot;)\r\n    def releaseKeyStoreFile = keystoreFile.exists() ? keystoreFile : file(&quot;$rootProject.projectDir/../ProjectSetup/qa.keystore&quot;)\r\n    println(&quot;releaseKeyStoreFile: &quot; + releaseKeyStoreFile)\r\n    signingConfigs {\r\n        debug {\r\n            storeFile releaseKeyStoreFile\r\n            storePassword &#39;android&#39;\r\n            keyAlias &#39;androiddebugkey&#39;\r\n            keyPassword &#39;android&#39;\r\n        }\r\n        qa {\r\n            storeFile releaseKeyStoreFile\r\n            storePassword &#39;android&#39;\r\n            keyAlias &#39;androiddebugkey&#39;\r\n            keyPassword &#39;android&#39;\r\n        }\r\n        release {\r\n            storeFile releaseKeyStoreFile\r\n            storePassword code_sign_props.getProperty(&quot;ANDROID_KEY_STORE_PASSWORD&quot;) ?: &#39;android&#39;\r\n            keyAlias code_sign_props.getProperty(&quot;ANDROID_KEY_ALIAS&quot;) ?: &#39;androiddebugkey&#39;\r\n            keyPassword code_sign_props.getProperty(&quot;ANDROID_KEY_PASSWORD&quot;) ?: &#39;android&#39;\r\n        }\r\n    }\r\n\r\n    buildTypes {\r\n        debug {\r\n            minifyEnabled false\r\n            signingConfig signingConfigs.debug\r\n            debuggable true\r\n\r\n        }\r\n        qa {\r\n            minifyEnabled false\r\n            signingConfig signingConfigs.qa\r\n            debuggable true\r\n\r\n        }\r\n        release {\r\n            buildConfigField &quot;Boolean&quot;, &quot;RELEASE_TYPE&quot;, &quot;true&quot;\r\n            buildConfigField &quot;Boolean&quot;, &quot;ENABLE_DEVICE_ID_CHANGE&quot;, &quot;false&quot;\r\n\r\n            debuggable false\r\n            minifyEnabled false\r\n            //proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n\r\n            signingConfig signingConfigs.release\r\n        }\r\n\r\n    }\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    testOptions {\r\n        unitTests.returnDefaultValues = true\r\n    }\r\n\r\n}\r\n\r\ndef gitBranch() {\r\n    def branch = &quot;&quot;\r\n    def proc = &quot;git rev-parse --abbrev-ref HEAD&quot;.execute()\r\n    proc.in.eachLine { line -&gt; branch = line }\r\n    proc.err.eachLine { line -&gt; println line }\r\n    proc.waitFor()\r\n    branch\r\n}\r\n\r\ndef gitShortHash() {\r\n    def hash = &quot;&quot;\r\n    def proc = &quot;git rev-parse --short HEAD&quot;.execute()\r\n    proc.in.eachLine { line -&gt; hash = line }\r\n    proc.err.eachLine { line -&gt; println line }\r\n    proc.waitFor()\r\n    hash\r\n}\r\n\r\ndef gitCommitHash() {\r\n    def hash = &quot;&quot;\r\n    def proc = &quot;git rev-parse HEAD&quot;.execute()\r\n    proc.in.eachLine { line -&gt; hash = line }\r\n    proc.err.eachLine { line -&gt; println line }\r\n    proc.waitFor()\r\n    hash\r\n}\r\n\r\ndependencies {\r\n    def butterknife_version = &quot;10.2.3&quot;\r\n    def retrofit_version = &quot;2.3.0&quot;\r\n    def okhttp_version = &quot;3.9.0&quot;\r\n    def dagger_version = &quot;2.38.1&quot;\r\n    def hockeyapp_android_sdk_version = &quot;4.1.4&quot;\r\n    def socket_library_version = &quot;2.3&quot;\r\n\r\n    implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.0&#39;\r\n    implementation &#39;androidx.recyclerview:recyclerview:1.3.0-alpha02&#39;\r\n    implementation &#39;com.google.android.material:material:1.5.0&#39;\r\n    implementation &#39;androidx.browser:browser:1.0.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.2.0-alpha04&#39;\r\n    implementation &quot;com.jakewharton:butterknife:$butterknife_version&quot;\r\n    kapt &quot;com.jakewharton:butterknife-compiler:$butterknife_version&quot;\r\n    implementation &quot;net.danlew:android.joda:2.9.9&quot;\r\n    implementation &#39;androidx.room:room-runtime:2.4.0&#39;\r\n    kapt &#39;androidx.room:room-compiler:2.4.0&#39;\r\n    implementation &quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;\r\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.4.0&quot;\r\n    implementation &#39;androidx.lifecycle:lifecycle-common-java8:2.4.0&#39;\r\n    implementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:2.4.0&quot;\r\n    implementation &quot;com.squareup.retrofit2:retrofit:$retrofit_version&quot;\r\n    implementation &quot;com.squareup.retrofit2:converter-gson:$retrofit_version&quot;\r\n    implementation &quot;com.squareup.okhttp3:okhttp:$okhttp_version&quot;\r\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:$okhttp_version&quot;\r\n    implementation &quot;com.google.dagger:dagger:$dagger_version&quot;\r\n    kapt &quot;com.google.dagger:dagger-compiler:$dagger_version&quot;\r\n    implementation project(&#39;:shinobicontrols-android-charts-premium-java-1.9.3-1&#39;)\r\n    implementation &quot;net.hockeyapp.android:HockeySDK:$hockeyapp_android_sdk_version&quot;\r\n    implementation &#39;com.google.android.gms:play-services-auth:16.0.1&#39;\r\n    implementation &quot;com.google.android.gms:play-services-drive:16.0.0&quot;\r\n    implementation &quot;com.neovisionaries:nv-websocket-client:$socket_library_version&quot;\r\n    implementation &quot;com.google.android.gms:play-services-analytics:16.0.6&quot;\r\n    implementation &#39;com.google.firebase:firebase-core:16.0.6&#39;\r\n\r\n    /* Tests */\r\n    implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n    androidTestImplementation(&#39;androidx.test.espresso:espresso-core:3.5.1&#39;, {\r\n        exclude group: &#39;androidx&#39;, module: &#39;support-annotations&#39;\r\n    })\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    testImplementation &quot;com.nhaarman.mockitokotlin2:mockito-kotlin:2.0.0-RC1&quot;\r\n    testImplementation &#39;androidx.arch.core:core-testing:2.0.0&#39;\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-reflect:$kotlin_version&quot;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n```\r\n# gradle-wrapper.properties \r\n\r\n```distributionBase=GRADLE_USER_HOME distributionPath=wrapper/dists distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-bin.zip zipStoreBase=GRADLE_USER_HOME zipStorePath=wrapper/dists```\r\n\r\n\r\nI already tried using JDK 20 but error still persist.","title":"Build Error: A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction","body":"<p>I'm trying to run and build my project and I keep having this error.</p>\n<h2>Build Output</h2>\n<p><code>&gt; Task :app:kaptMyAppQaKotlin FAILED Execution failed for task ':app:kaptMyAppQaKotlin'. &gt; A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction &gt; java.lang.reflect.InvocationTargetException (no error message)</code></p>\n<h2>Using (./gradlew assemble --stacktrace --warning-mode all)</h2>\n<blockquote>\n<p>Task :app:kaptMyAppDebugKotlin\n/Users/MyUser/Documents/Projects/Kotlin/MyApp-android/MyApp/app/build/tmp/kapt3/stubs/MyAppDebug/com/MyApp/charts/ChartActivity.java:193: error: incompatible types: NonExistentClass cannot be converted to Annotation\nprivate final void showChartError(@error.NonExistentClass\n^</p>\n</blockquote>\n<blockquote>\n<p>Task :app:kaptMyAppDebugKotlin FAILED</p>\n</blockquote>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nExecution failed for task ':app:kaptMyAppDebugKotlin'.</li>\n</ul>\n<blockquote>\n<p>A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction\njava.lang.reflect.InvocationTargetException (no error message)</p>\n</blockquote>\n<p>Here's my ff files.</p>\n<h1>build.gradle (MyApp)</h1>\n<pre><code>Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.7.10'\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.2.2'\n        classpath 'me.tatarka:gradle-retrolambda:3.3.1'\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n        classpath 'com.google.gms:google-services:4.3.15'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<h1>build.gradle (:app)</h1>\n<pre><code>import java.util.regex.Matcher\nimport java.util.regex.Pattern\n\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'com.google.gms.google-services'\napply plugin: 'kotlin-parcelize'\napply plugin: 'kotlin-kapt'\n\ntask aaaprintVar {\n    doLast {\n        println System.getenv('HOME')\n        println System.getenv('ANDROID_KEY_ALIAS')\n        println project.property(&quot;BUILD_NUMBER_TAG&quot;)\n    }\n}\n\n/* AutoVersion Helpers */\ndef autoVersion_props = new Properties()\ndef folder = new File(&quot;$project.rootDir/scripts&quot;)\nif (!folder.exists()) {\n    // Create all folders up-to and including B\n    folder.mkdirs()\n}\nnew File(folder, &quot;autoVersion.properties&quot;).withWriterAppend { w -&gt;\n    w &lt;&lt; &quot;&quot;\n}\n\ndef autoPropsFile = new File(folder, &quot;autoVersion.properties&quot;)\nautoPropsFile.withInputStream { autoVersion_props.load(it) }\n\ndef readVersionCode = { -&gt;\n    def versionCodeString = autoVersion_props.getProperty(&quot;gitCommitCount&quot;) ?: &quot;0&quot;\n    return Integer.parseInt(versionCodeString)\n}\n/* End AutoVersion Helpers */\n\nandroid {\n    def readVersionName = { -&gt;\n        def versionName = autoVersion_props.getProperty(&quot;gitVersionTagNumber&quot;) ?: &quot;0.0.0&quot;\n        return versionName\n    }\n\n    def getApplicationIdSuffix = { -&gt;\n        return readVersionName() + '-' + readVersionCode() + '+' + gitShortHash()\n    }\n\n    def getMyApplicationIdSuffix = { -&gt;\n        println(&quot;getMyApplicationIddSuffix&quot;)\n        return readVersionName() + '-' + readVersionCode() + '+' + gitShortHash()\n    }\n\n    def gitPrefix = 'asdf'\n    // ...\n    ndkVersion &quot;21.4.7075529&quot; // or &quot;22.1.7171670&quot;\n    // ...\n    compileSdkVersion 31\n    buildToolsVersion '31.0.0'\n    defaultConfig {\n        applicationId &quot;com&quot;\n        minSdkVersion 26\n        targetSdkVersion 31\n        buildConfigField &quot;String&quot;, &quot;GIT_COMMIT_HASH&quot;, &quot;\\&quot;&quot; + gitCommitHash() + &quot;\\&quot;&quot;\n        println &quot;VersionCode: &quot; + readVersionCode()\n        versionCode readVersionCode()\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = [&quot;room.schemaLocation&quot;:\n                                     &quot;$projectDir/schemas&quot;.toString()]\n            }\n        }\n        testInstrumentationRunner 'androidx.test.runner.AndroidJUnitRunner'\n    }\n    buildFeatures {\n        viewBinding = true\n        dataBinding = true\n    }\n    packagingOptions {\n        exclude(&quot;**/libshinobicharts-android.so&quot;)\n    }\n    flavorDimensions &quot;base&quot;\n    productFlavors {\n        myapp {\n            dimension &quot;base&quot;\n            applicationId 'com.me.app'\n            versionName readVersionName()\n            setProperty(&quot;archivesBaseName&quot;, getMyApplicationIdSuffix())\n            buildConfigField('String', 'HOCKEYAPP_SDK_APP_ID', &quot;\\&quot;750acaf49a6a418abdc3d8e36e1d1b83\\&quot;&quot;)\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;750acaf49a6a418abdc3d8e36e1d1b83&quot;]\n        }\n        myappinstant {\n            dimension &quot;base&quot;\n            applicationId 'com.myapp.instant'\n            versionName = readVersionName()\n            setProperty(&quot;archivesBaseName&quot;, getMyInstantApplicationIdSuffix())\n            buildConfigField('String', 'HOCKEYAPP_SDK_APP_ID', &quot;\\&quot;8ee7b2f987d9402c86c0c96dfff52306\\&quot;&quot;)\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;8ee7b2f987d9402c86c0c96dfff52306&quot;]\n        }\n    }\n\n    def getCurrentFlavor = {\n        Gradle gradle = getGradle()\n        String tskReqStr = gradle.getStartParameter().getTaskRequests().toString()\n\n        Pattern pattern\n\n        if (tskReqStr.contains(&quot;assemble&quot;))\n            pattern = Pattern.compile(&quot;assemble(\\\\w+)(Release|Debug)&quot;)\n        else\n            pattern = Pattern.compile(&quot;generate(\\\\w+)(Release|Debug)&quot;)\n\n        Matcher matcher = pattern.matcher(tskReqStr)\n\n        if (matcher.find())\n            return matcher.group(1).toLowerCase() + '-'\n        else {\n            println &quot;NO MATCH FOUND&quot;\n            return &quot;&quot;\n        }\n    }\n\n    def runAutoVersion = { -&gt;\n        try {\n            def stdout = new ByteArrayOutputStream()\n            exec {\n                if (System.getProperty('os.name').toLowerCase().contains('windows')) {\n                    commandLine 'cmd', &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\n                } else {\n                    commandLine &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\n                }\n                args = [getCurrentFlavor()]\n                standardOutput = stdout\n            }\n            return stdout.toString().trim()\n        }\n        catch (error) {\n            println 'Error: ' + error\n            return null\n        }\n    }\n\n\n    preBuild.doFirst {\n        println &quot;PreBuild&quot;\n        println &quot;Running auto-version.sh&quot;\n        println runAutoVersion()\n        project.task(&quot;printProps&quot;)\n    }\n\n    task autoVersion {\n        doLast {\n            println &quot;PreBuild&quot;\n            println &quot;Running auto-version.sh&quot;\n            println runAutoVersion()\n            println &quot;Finished running auto-version.sh&quot;\n            project.task(&quot;printProps&quot;)\n        }\n    }\n\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n\n\n    def code_sign_props = new Properties()\n    def code_sign_file = new File(&quot;$rootProject.projectDir/secrets/code_sign.properties&quot;)\n    def codeSignFile = code_sign_file.exists() ? code_sign_file : file(&quot;$rootProject.projectDir/secrets/default_code_sign.properties&quot;)\n    println(&quot;CodeSignFile: &quot; + codeSignFile)\n    codeSignFile.withInputStream { code_sign_props.load(it) }\n    def keystoreFile = new File(&quot;$rootProject.projectDir/secrets/upload.jks&quot;)\n    def releaseKeyStoreFile = keystoreFile.exists() ? keystoreFile : file(&quot;$rootProject.projectDir/../ProjectSetup/qa.keystore&quot;)\n    println(&quot;releaseKeyStoreFile: &quot; + releaseKeyStoreFile)\n    signingConfigs {\n        debug {\n            storeFile releaseKeyStoreFile\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n        qa {\n            storeFile releaseKeyStoreFile\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n        release {\n            storeFile releaseKeyStoreFile\n            storePassword code_sign_props.getProperty(&quot;ANDROID_KEY_STORE_PASSWORD&quot;) ?: 'android'\n            keyAlias code_sign_props.getProperty(&quot;ANDROID_KEY_ALIAS&quot;) ?: 'androiddebugkey'\n            keyPassword code_sign_props.getProperty(&quot;ANDROID_KEY_PASSWORD&quot;) ?: 'android'\n        }\n    }\n\n    buildTypes {\n        debug {\n            minifyEnabled false\n            signingConfig signingConfigs.debug\n            debuggable true\n\n        }\n        qa {\n            minifyEnabled false\n            signingConfig signingConfigs.qa\n            debuggable true\n\n        }\n        release {\n            buildConfigField &quot;Boolean&quot;, &quot;RELEASE_TYPE&quot;, &quot;true&quot;\n            buildConfigField &quot;Boolean&quot;, &quot;ENABLE_DEVICE_ID_CHANGE&quot;, &quot;false&quot;\n\n            debuggable false\n            minifyEnabled false\n            //proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n\n            signingConfig signingConfigs.release\n        }\n\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    testOptions {\n        unitTests.returnDefaultValues = true\n    }\n\n}\n\ndef gitBranch() {\n    def branch = &quot;&quot;\n    def proc = &quot;git rev-parse --abbrev-ref HEAD&quot;.execute()\n    proc.in.eachLine { line -&gt; branch = line }\n    proc.err.eachLine { line -&gt; println line }\n    proc.waitFor()\n    branch\n}\n\ndef gitShortHash() {\n    def hash = &quot;&quot;\n    def proc = &quot;git rev-parse --short HEAD&quot;.execute()\n    proc.in.eachLine { line -&gt; hash = line }\n    proc.err.eachLine { line -&gt; println line }\n    proc.waitFor()\n    hash\n}\n\ndef gitCommitHash() {\n    def hash = &quot;&quot;\n    def proc = &quot;git rev-parse HEAD&quot;.execute()\n    proc.in.eachLine { line -&gt; hash = line }\n    proc.err.eachLine { line -&gt; println line }\n    proc.waitFor()\n    hash\n}\n\ndependencies {\n    def butterknife_version = &quot;10.2.3&quot;\n    def retrofit_version = &quot;2.3.0&quot;\n    def okhttp_version = &quot;3.9.0&quot;\n    def dagger_version = &quot;2.38.1&quot;\n    def hockeyapp_android_sdk_version = &quot;4.1.4&quot;\n    def socket_library_version = &quot;2.3&quot;\n\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation 'androidx.appcompat:appcompat:1.4.0'\n    implementation 'androidx.recyclerview:recyclerview:1.3.0-alpha02'\n    implementation 'com.google.android.material:material:1.5.0'\n    implementation 'androidx.browser:browser:1.0.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.2.0-alpha04'\n    implementation &quot;com.jakewharton:butterknife:$butterknife_version&quot;\n    kapt &quot;com.jakewharton:butterknife-compiler:$butterknife_version&quot;\n    implementation &quot;net.danlew:android.joda:2.9.9&quot;\n    implementation 'androidx.room:room-runtime:2.4.0'\n    kapt 'androidx.room:room-compiler:2.4.0'\n    implementation &quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.4.0&quot;\n    implementation 'androidx.lifecycle:lifecycle-common-java8:2.4.0'\n    implementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:2.4.0&quot;\n    implementation &quot;com.squareup.retrofit2:retrofit:$retrofit_version&quot;\n    implementation &quot;com.squareup.retrofit2:converter-gson:$retrofit_version&quot;\n    implementation &quot;com.squareup.okhttp3:okhttp:$okhttp_version&quot;\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:$okhttp_version&quot;\n    implementation &quot;com.google.dagger:dagger:$dagger_version&quot;\n    kapt &quot;com.google.dagger:dagger-compiler:$dagger_version&quot;\n    implementation project(':shinobicontrols-android-charts-premium-java-1.9.3-1')\n    implementation &quot;net.hockeyapp.android:HockeySDK:$hockeyapp_android_sdk_version&quot;\n    implementation 'com.google.android.gms:play-services-auth:16.0.1'\n    implementation &quot;com.google.android.gms:play-services-drive:16.0.0&quot;\n    implementation &quot;com.neovisionaries:nv-websocket-client:$socket_library_version&quot;\n    implementation &quot;com.google.android.gms:play-services-analytics:16.0.6&quot;\n    implementation 'com.google.firebase:firebase-core:16.0.6'\n\n    /* Tests */\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    androidTestImplementation('androidx.test.espresso:espresso-core:3.5.1', {\n        exclude group: 'androidx', module: 'support-annotations'\n    })\n    testImplementation 'junit:junit:4.13.2'\n    testImplementation &quot;com.nhaarman.mockitokotlin2:mockito-kotlin:2.0.0-RC1&quot;\n    testImplementation 'androidx.arch.core:core-testing:2.0.0'\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n    implementation &quot;org.jetbrains.kotlin:kotlin-reflect:$kotlin_version&quot;\n}\n\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n<h1>gradle-wrapper.properties</h1>\n<p><code>distributionBase=GRADLE_USER_HOME distributionPath=wrapper/dists distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-bin.zip zipStoreBase=GRADLE_USER_HOME zipStorePath=wrapper/dists</code></p>\n<p>I already tried using JDK 20 but error still persist.</p>\n"},{"tags":["java","spring","sonarqube","xss"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691808567,"post_id":76831689,"comment_id":135545481,"body_markdown":"There is a large quantity of information missing from your question e.g. your server version and whether it&#39;s configuration contains directives can be used against XSS ! Tomcat has security headers can be configured,   https://docs.bmc.com/docs/security/basic-tomcat-security-configuration-recommendations-924057229.html    Sonarqube also has protections too.    https://cwe.mitre.org/data/definitions/79.html   should be some help too...  https://semgrep.dev/docs/cheat-sheets/java-jsp-xss/      XSS is more about preventing X domain analytical scripts attaching or entering by destroying chars.","body":"There is a large quantity of information missing from your question e.g. your server version and whether it&#39;s configuration contains directives can be used against XSS ! Tomcat has security headers can be configured,   <a href=\"https://docs.bmc.com/docs/security/basic-tomcat-security-configuration-recommendations-924057229.html\" rel=\"nofollow noreferrer\">docs.bmc.com/docs/security/&hellip;</a>    Sonarqube also has protections too.    <a href=\"https://cwe.mitre.org/data/definitions/79.html\" rel=\"nofollow noreferrer\">cwe.mitre.org/data/definitions/79.html</a>   should be some help too...  <a href=\"https://semgrep.dev/docs/cheat-sheets/java-jsp-xss/\" rel=\"nofollow noreferrer\">semgrep.dev/docs/cheat-sheets/java-jsp-xss</a>      XSS is more about preventing X domain analytical scripts attaching or entering by destroying chars."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691809872,"post_id":76831689,"comment_id":135545530,"body_markdown":"Probably the best solution would be to urlencode your Jason and place it in a hidden field in the document, then urldecode it with a .js file from the same folder the jsp comes from (Another Point , is the page dynamically created or pre made?). https://stackoverflow.com/questions/54490611/how-to-embed-json-in-html","body":"Probably the best solution would be to urlencode your Jason and place it in a hidden field in the document, then urldecode it with a .js file from the same folder the jsp comes from (Another Point , is the page dynamically created or pre made?). <a href=\"https://stackoverflow.com/questions/54490611/how-to-embed-json-in-html\" title=\"how to embed json in html\">stackoverflow.com/questions/54490611/how-to-embed-json-in-ht&zwnj;&#8203;ml</a>"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691810332,"post_id":76831689,"comment_id":135545549,"body_markdown":"Sonarqube and .js \n  (requires Node.js) \n https://docs.sonarsource.com/sonarqube/latest/analyzing-source-code/languages/javascript-typescript-css/    Example only Tomcat and .js control.  https://stackoverflow.com/questions/23342948/tomcat-access-control-allow-origin-and-javascript","body":"Sonarqube and .js    (requires Node.js)   <a href=\"https://docs.sonarsource.com/sonarqube/latest/analyzing-source-code/languages/javascript-typescript-css/\" rel=\"nofollow noreferrer\">docs.sonarsource.com/sonarqube/latest/analyzing-source-code/&zwnj;&#8203;&hellip;</a>    Example only Tomcat and .js control.  <a href=\"https://stackoverflow.com/questions/23342948/tomcat-access-control-allow-origin-and-javascript\" title=\"tomcat access control allow origin and javascript\">stackoverflow.com/questions/23342948/&hellip;</a>"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691811463,"post_id":76831689,"comment_id":135545620,"body_markdown":"And one more point, the writer output Content-type must match the the output, therefore, if it is a jsp and effectively the client is sent html, it is more text/html , the trouble arises having to know if JSON is present.   Note Node.js and jQuery use JSON.   https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript#:~:text=The%20%24()%20is%20the%20shorthand,used%20in%20the%20jQuery%20Library.&amp;text=In%20addition%20to%20the%20above,object%20and%20jQuery()%20function.","body":"And one more point, the writer output Content-type must match the the output, therefore, if it is a jsp and effectively the client is sent html, it is more text/html , the trouble arises having to know if JSON is present.   Note Node.js and jQuery use JSON.   <a href=\"https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript#:~:text=The%20%24()%20is%20the%20shorthand,used%20in%20the%20jQuery%20Library.&amp;text=In%20addition%20to%20the%20above,object%20and%20jQuery()%20function\" title=\"what is the meaning of sign in javascript%23%3a%7e%3atext%3dThe%2520%2524()%2520is%2520the%2520shorthand%2cused%2520in%2520the%2520jQuery%2520Library.%26amp%3btext%3dIn%2520addition%2520to%2520the%2520above%2cobject%2520and%2520jQuery()%2520function\">stackoverflow.com/questions/1150381/&hellip;</a>."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691812665,"post_id":76831689,"comment_id":135545686,"body_markdown":"The main trouble about servers and XSS is the standard policy on scripting that only allows an associate client script to be in the same folder or deeper same folder as the page XML or html, higher or aside folders are automatically illegitimate security with the call to the script. It seems wherever &quot;printwriter&quot; is getting input may be from an input output stream resource outside accepted boundaries more than its string coding contents. Another place banned may be from url parameters of requests.    ( Extra inf only https://heynode.com/tutorial/readwrite-json-files-nodejs/  )","body":"The main trouble about servers and XSS is the standard policy on scripting that only allows an associate client script to be in the same folder or deeper same folder as the page XML or html, higher or aside folders are automatically illegitimate security with the call to the script. It seems wherever &quot;printwriter&quot; is getting input may be from an input output stream resource outside accepted boundaries more than its string coding contents. Another place banned may be from url parameters of requests.    ( Extra inf only <a href=\"https://heynode.com/tutorial/readwrite-json-files-nodejs/\" rel=\"nofollow noreferrer\">heynode.com/tutorial/readwrite-json-files-nodejs</a>  )"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691825549,"post_id":76831689,"comment_id":135546433,"body_markdown":"Of the printwriter, it&#39;s main problem is it is editable with append() so it poses risk with error outputs, request and response info in a context of XSS apart the fact wherever scripting could be sourced is unchecked e.g. request response or upload or vulnerable located file e.g. FTP folder   e.getResponseBodyAsString() could contain scripting characters.","body":"Of the printwriter, it&#39;s main problem is it is editable with append() so it poses risk with error outputs, request and response info in a context of XSS apart the fact wherever scripting could be sourced is unchecked e.g. request response or upload or vulnerable located file e.g. FTP folder   e.getResponseBodyAsString() could contain scripting characters."}],"answers":[{"comments":[{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1691100085,"post_id":76831814,"comment_id":135450081,"body_markdown":"do you have corresponding sample code in Java? trying to research","body":"do you have corresponding sample code in Java? trying to research"},{"owner":{"account_id":4895504,"reputation":702,"user_id":4253293,"accept_rate":50,"display_name":"Steve"},"score":0,"creation_date":1691101806,"post_id":76831814,"comment_id":135450280,"body_markdown":"Sample code for Apache StringEscapeUtils?  `String escaped = StringEscapeUtils.escapeHtml4(original);`","body":"Sample code for Apache StringEscapeUtils?  <code>String escaped = StringEscapeUtils.escapeHtml4(original);</code>"},{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1691218479,"post_id":76831814,"comment_id":135465066,"body_markdown":"this won&#39;t format the data in clean form however, given the json","body":"this won&#39;t format the data in clean form however, given the json"},{"owner":{"account_id":4895504,"reputation":702,"user_id":4253293,"accept_rate":50,"display_name":"Steve"},"score":0,"creation_date":1691678104,"post_id":76831814,"comment_id":135526429,"body_markdown":"I understand that you are limited in your ability to include your actual code in discussing this.  The core issue is probably in your implementation of getResponseBodyAsString.  There is probably something in there which is coming directly from the client.  Without knowing what is in that method, it&#39;s impossible to diagnose this fully ... but that is ALWAYS the way that an XSS happens.  Somehow there is a path in which raw data from the client is echoed back to the client.  That is the root bug you need to fix.  You can remove the request data from the response, or you can escape it.","body":"I understand that you are limited in your ability to include your actual code in discussing this.  The core issue is probably in your implementation of getResponseBodyAsString.  There is probably something in there which is coming directly from the client.  Without knowing what is in that method, it&#39;s impossible to diagnose this fully ... but that is ALWAYS the way that an XSS happens.  Somehow there is a path in which raw data from the client is echoed back to the client.  That is the root bug you need to fix.  You can remove the request data from the response, or you can escape it."}],"tags":[],"owner":{"account_id":4895504,"reputation":702,"user_id":4253293,"accept_rate":50,"display_name":"Steve"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691099756,"creation_date":1691099756,"answer_id":76831814,"question_id":76831689,"body_markdown":"An XSS vulnerability usually means that there is an unbroken connection of data from the request back to the response.  The easiest solution for this is usually just to use a library like StringEscapeUtils.escapeHtml4 on the data coming from the request.  That would make it so that a &lt;script&gt; tag (the real root of all XSS attacks) would be converted to &amp;lt;script%gt; which would render on the screen as &lt;script&gt; but would not execute in the browser as script.  Hopefully that makes sense.","title":"Java SonarQube: Error This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be vulnerable to XSS","body":"<p>An XSS vulnerability usually means that there is an unbroken connection of data from the request back to the response.  The easiest solution for this is usually just to use a library like StringEscapeUtils.escapeHtml4 on the data coming from the request.  That would make it so that a  tag (the real root of all XSS attacks) would be converted to &lt;script%gt; which would render on the screen as  but would not execute in the browser as script.  Hopefully that makes sense.</p>\n"},{"comments":[{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1691362927,"post_id":76847655,"comment_id":135477482,"body_markdown":"my &quot;text/plain&quot; solution was found in https://rules.sonarsource.com/java/RSPEC-5131/  , did you try and test this in Sonar qube? I will check myself, and if sonar qube gives an error, I will probably disable the SonarRule for that code line,thanks","body":"my &quot;text/plain&quot; solution was found in <a href=\"https://rules.sonarsource.com/java/RSPEC-5131/\" rel=\"nofollow noreferrer\">rules.sonarsource.com/java/RSPEC-5131</a>  , did you try and test this in Sonar qube? I will check myself, and if sonar qube gives an error, I will probably disable the SonarRule for that code line,thanks"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1691390400,"post_id":76847655,"comment_id":135479507,"body_markdown":"@mattsmith5 I did not test it directly, I was only addressing the &quot;My output is JSON&quot; from your question. If your output is JSON, then my answer should avoid your error.","body":"@mattsmith5 I did not test it directly, I was only addressing the &quot;My output is JSON&quot; from your question. If your output is JSON, then my answer should avoid your error."},{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1691391286,"post_id":76847655,"comment_id":135479614,"body_markdown":"thanks, yeah, my Goal is to resolve the Sonarqube error, however my proposed solution above using Sonar documentation isn&#39;t working.","body":"thanks, yeah, my Goal is to resolve the Sonarqube error, however my proposed solution above using Sonar documentation isn&#39;t working."},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1691391590,"post_id":76847655,"comment_id":135479656,"body_markdown":"@mattsmith5 Did my answer helped (in specifying JSON and using jackson)?","body":"@mattsmith5 Did my answer helped (in specifying JSON and using jackson)?"}],"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691353231,"creation_date":1691353231,"answer_id":76847655,"question_id":76831689,"body_markdown":"You have:\r\n\r\n``` java\r\nresponse.setContentType(MediaType.TEXT_PLAIN);\r\nwriter.print(e.getResponseBodyAsString());\r\n```\r\n\r\nThat looks dangerous, especially if the response is the string `&quot;message&quot;: &quot;&lt;script&gt;alert(&#39;Hacked!&#39;);&lt;/script&gt;&quot;`!\r\n\r\nEssentially, whenever you output data directly to a browser (in this case via `PrintWriter`), if that data contains malicious scripts from user input or any non-trusted sources, it can be executed on the client side, leading to Cross-Site Scripting (XSS) attacks.\r\n\r\nIf you know you want a JSON content, specify it explicitly:\r\n\r\n```java\r\nresponse.setContentType(MediaType.APPLICATION_JSON);\r\n```\r\n\r\n\r\nAnd always escape the data before sending it as output. You mentioned that [`HTMLEscape`](https://docs.spring.io/spring-framework/docs/1.2.x/javadoc-api/org/springframework/web/util/HtmlUtils.html#htmlEscape(java.lang.String)) causes bad formatting. That makes sense because you are working with JSON. Instead of HTML escaping, you should try and use JSON escaping, with, for instance, [`FasterXML/jackson`](https://github.com/FasterXML/jackson). See [Reading and Writing Using ObjectMapper](https://www.baeldung.com/jackson-object-mapper-tutorial#Reading) from [Eugen Baeldung](https://www.baeldung.com/about).\r\n\r\n```java\r\nString jsonEscaped = new ObjectMapper().writeValueAsString(e.getResponseBodyAsString());\r\nwriter.print(jsonEscaped);\r\n```\r\n\r\n\r\nWith you `pom.xml` including in the `&lt;dependencies&gt;` section:\r\n\r\n``` xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    &lt;version&gt;2.15.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\nYour code would then would be:\r\n\r\n```java\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n...\r\ntry {\r\n    unifiedResponse = testController.updateData(testRequest);\r\n} catch (RestClientResponseException e) {\r\n    try {\r\n        PrintWriter writer = response.getWriter();\r\n        response.setContentType(MediaType.APPLICATION_JSON);\r\n\r\n        // Avoid directly printing exception. Instead, you can log it.\r\n        // log.error(&quot;Error occurred&quot;, e);\r\n        \r\n        // Send a generic error message or a sanitized version of the actual error message.\r\n        String sanitizedOutput = new ObjectMapper().writeValueAsString(Collections.singletonMap(&quot;error&quot;, &quot;An error occurred.&quot;));\r\n        writer.print(sanitizedOutput);\r\n\r\n    } catch (IOException ex) {\r\n        throw new ServiceException(&quot;Cannot get update Password error response body&quot;, ex);\r\n    }\r\n}\r\n```","title":"Java SonarQube: Error This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be vulnerable to XSS","body":"<p>You have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>response.setContentType(MediaType.TEXT_PLAIN);\nwriter.print(e.getResponseBodyAsString());\n</code></pre>\n<p>That looks dangerous, especially if the response is the string <code>&quot;message&quot;: &quot;&lt;script&gt;alert('Hacked!');&lt;/script&gt;&quot;</code>!</p>\n<p>Essentially, whenever you output data directly to a browser (in this case via <code>PrintWriter</code>), if that data contains malicious scripts from user input or any non-trusted sources, it can be executed on the client side, leading to Cross-Site Scripting (XSS) attacks.</p>\n<p>If you know you want a JSON content, specify it explicitly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>response.setContentType(MediaType.APPLICATION_JSON);\n</code></pre>\n<p>And always escape the data before sending it as output. You mentioned that <a href=\"https://docs.spring.io/spring-framework/docs/1.2.x/javadoc-api/org/springframework/web/util/HtmlUtils.html#htmlEscape(java.lang.String)\" rel=\"nofollow noreferrer\"><code>HTMLEscape</code></a> causes bad formatting. That makes sense because you are working with JSON. Instead of HTML escaping, you should try and use JSON escaping, with, for instance, <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\"><code>FasterXML/jackson</code></a>. See <a href=\"https://www.baeldung.com/jackson-object-mapper-tutorial#Reading\" rel=\"nofollow noreferrer\">Reading and Writing Using ObjectMapper</a> from <a href=\"https://www.baeldung.com/about\" rel=\"nofollow noreferrer\">Eugen Baeldung</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonEscaped = new ObjectMapper().writeValueAsString(e.getResponseBodyAsString());\nwriter.print(jsonEscaped);\n</code></pre>\n<p>With you <code>pom.xml</code> including in the <code>&lt;dependencies&gt;</code> section:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.15.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Your code would then would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.ObjectMapper;\n...\ntry {\n    unifiedResponse = testController.updateData(testRequest);\n} catch (RestClientResponseException e) {\n    try {\n        PrintWriter writer = response.getWriter();\n        response.setContentType(MediaType.APPLICATION_JSON);\n\n        // Avoid directly printing exception. Instead, you can log it.\n        // log.error(&quot;Error occurred&quot;, e);\n        \n        // Send a generic error message or a sanitized version of the actual error message.\n        String sanitizedOutput = new ObjectMapper().writeValueAsString(Collections.singletonMap(&quot;error&quot;, &quot;An error occurred.&quot;));\n        writer.print(sanitizedOutput);\n\n    } catch (IOException ex) {\n        throw new ServiceException(&quot;Cannot get update Password error response body&quot;, ex);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691579812,"creation_date":1691536946,"answer_id":76863691,"question_id":76831689,"body_markdown":"Some time ago I wrote [an answer](https://stackoverflow.com/questions/69475757/how-to-print-complete-error-message-when-logging-an-exception-generated-by-restt/69527775#69527775) that could be of help: it is not related to the SonarQube error, but on how to adapt the error messages returned by `RestTemplate`.\r\n\r\nThe idea is configuring `RestTemplate` to use a custom [`ResponseErrorHandler`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/ResponseErrorHandler.html). Adapted from the answer:\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.charset.Charset;\r\nimport java.nio.charset.StandardCharsets;\r\n\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.client.ClientHttpResponse;\r\nimport org.springframework.lang.Nullable;\r\nimport org.springframework.util.ObjectUtils;\r\nimport org.springframework.web.client.DefaultResponseErrorHandler;\r\nimport org.springframework.web.client.HttpClientErrorException;\r\nimport org.springframework.web.client.HttpServerErrorException;\r\nimport org.springframework.web.client.UnknownHttpStatusCodeException;\r\n\r\npublic class CustomRestTemplateResponseErrorHandler extends DefaultResponseErrorHandler {\r\n  \r\n  // This overloaded method version is only available since Spring 5.0\r\n  // For previous versions of the library you can override\r\n  // handleError(ClientHttpResponse response) instead\r\n  @Override\r\n  protected void handleError(ClientHttpResponse response, HttpStatus statusCode) throws IOException {\r\n    String statusText = response.getStatusText();\r\n    HttpHeaders headers = response.getHeaders();\r\n    byte[] body = getResponseBody(response);\r\n    Charset charset = getCharset(response);\r\n    String message = getErrorMessage(statusCode.value(), statusText, body, charset);\r\n\r\n    switch (statusCode.series()) {\r\n      case CLIENT_ERROR:\r\n        throw HttpClientErrorException.create(message, statusCode, statusText, headers, body, charset);\r\n      case SERVER_ERROR:\r\n        throw HttpServerErrorException.create(message, statusCode, statusText, headers, body, charset);\r\n      default:\r\n        throw new UnknownHttpStatusCodeException(message, statusCode.value(), statusText, headers, body, charset);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return error message with details from the response body:\r\n   * &lt;pre&gt;\r\n   * 404 Not Found: [{&#39;id&#39;: 123, &#39;message&#39;: &#39;actual mesage&#39;]\r\n   * &lt;/pre&gt;\r\n   *\r\n   * In contrast to &lt;code&gt;DefaultResponseErrorHandler&lt;/code&gt;, the message will not be truncated.\r\n   */\r\n  private String getErrorMessage(\r\n      int rawStatusCode, String statusText, @Nullable byte[] responseBody, @Nullable Charset charset) {\r\n\r\n    // Build and return your custom json error message here\r\n  }\r\n}\r\n```\r\n\r\nThen, configure `RestTemplate` to use this custom `ResponseErrorHandler`:\r\n\r\n```java\r\nRestTemplate restTemplate = new RestTemplate();\r\nResponseErrorHandler errorHandler = new CustomRestTemplateResponseErrorHandler();\r\nrestTemplate.setErrorHandler(errorHandler);\r\n// use your RestTemplate normally\r\n```\r\n\r\nPlease, as also stated in the mentioned answer, consider read [this related SO question](https://stackoverflow.com/questions/38093388/spring-resttemplate-exception-handling) and [this](https://hellokoding.com/spring-resttemplate-error-hanlding/) or [this](https://www.baeldung.com/spring-rest-template-error-handling) related blog posts.\r\n\r\nUsing this approach the returned error should be properly formatted without the need of using `PrintWriter` directly, Spring will take care of everything to return this message to the client in a proper way without any SonarQube issue.\r\n\r\nSometimes resolving a SonarQube rule validation error could be cornerstone: in this specific use case, if you are sure that the information returned is safe, you can probably ignoring it. In any case, to avoid any potential problem, be sure that your client sanitizes the returned information when you use it using the means provided by the actual framework you are using.\r\n","title":"Java SonarQube: Error This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be vulnerable to XSS","body":"<p>Some time ago I wrote <a href=\"https://stackoverflow.com/questions/69475757/how-to-print-complete-error-message-when-logging-an-exception-generated-by-restt/69527775#69527775\">an answer</a> that could be of help: it is not related to the SonarQube error, but on how to adapt the error messages returned by <code>RestTemplate</code>.</p>\n<p>The idea is configuring <code>RestTemplate</code> to use a custom <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/ResponseErrorHandler.html\" rel=\"nofollow noreferrer\"><code>ResponseErrorHandler</code></a>. Adapted from the answer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\n\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.client.ClientHttpResponse;\nimport org.springframework.lang.Nullable;\nimport org.springframework.util.ObjectUtils;\nimport org.springframework.web.client.DefaultResponseErrorHandler;\nimport org.springframework.web.client.HttpClientErrorException;\nimport org.springframework.web.client.HttpServerErrorException;\nimport org.springframework.web.client.UnknownHttpStatusCodeException;\n\npublic class CustomRestTemplateResponseErrorHandler extends DefaultResponseErrorHandler {\n  \n  // This overloaded method version is only available since Spring 5.0\n  // For previous versions of the library you can override\n  // handleError(ClientHttpResponse response) instead\n  @Override\n  protected void handleError(ClientHttpResponse response, HttpStatus statusCode) throws IOException {\n    String statusText = response.getStatusText();\n    HttpHeaders headers = response.getHeaders();\n    byte[] body = getResponseBody(response);\n    Charset charset = getCharset(response);\n    String message = getErrorMessage(statusCode.value(), statusText, body, charset);\n\n    switch (statusCode.series()) {\n      case CLIENT_ERROR:\n        throw HttpClientErrorException.create(message, statusCode, statusText, headers, body, charset);\n      case SERVER_ERROR:\n        throw HttpServerErrorException.create(message, statusCode, statusText, headers, body, charset);\n      default:\n        throw new UnknownHttpStatusCodeException(message, statusCode.value(), statusText, headers, body, charset);\n    }\n  }\n\n  /**\n   * Return error message with details from the response body:\n   * &lt;pre&gt;\n   * 404 Not Found: [{'id': 123, 'message': 'actual mesage']\n   * &lt;/pre&gt;\n   *\n   * In contrast to &lt;code&gt;DefaultResponseErrorHandler&lt;/code&gt;, the message will not be truncated.\n   */\n  private String getErrorMessage(\n      int rawStatusCode, String statusText, @Nullable byte[] responseBody, @Nullable Charset charset) {\n\n    // Build and return your custom json error message here\n  }\n}\n</code></pre>\n<p>Then, configure <code>RestTemplate</code> to use this custom <code>ResponseErrorHandler</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>RestTemplate restTemplate = new RestTemplate();\nResponseErrorHandler errorHandler = new CustomRestTemplateResponseErrorHandler();\nrestTemplate.setErrorHandler(errorHandler);\n// use your RestTemplate normally\n</code></pre>\n<p>Please, as also stated in the mentioned answer, consider read <a href=\"https://stackoverflow.com/questions/38093388/spring-resttemplate-exception-handling\">this related SO question</a> and <a href=\"https://hellokoding.com/spring-resttemplate-error-hanlding/\" rel=\"nofollow noreferrer\">this</a> or <a href=\"https://www.baeldung.com/spring-rest-template-error-handling\" rel=\"nofollow noreferrer\">this</a> related blog posts.</p>\n<p>Using this approach the returned error should be properly formatted without the need of using <code>PrintWriter</code> directly, Spring will take care of everything to return this message to the client in a proper way without any SonarQube issue.</p>\n<p>Sometimes resolving a SonarQube rule validation error could be cornerstone: in this specific use case, if you are sure that the information returned is safe, you can probably ignoring it. In any case, to avoid any potential problem, be sure that your client sanitizes the returned information when you use it using the means provided by the actual framework you are using.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76847655,"answer_count":3,"score":1,"last_activity_date":1691579812,"creation_date":1691097854,"question_id":76831689,"body_markdown":"I am getting this error below. When using ResponseWriter. How can I resolve it? Goal is to resolve the Sonarqube error, however my proposed solution below using Sonar documentation isn&#39;t working.\r\n\r\n    try {\r\n       unifiedResponse = testController.updateData(testRequest);\r\n    } catch (RestClientResponseException e) {\r\n    \ttry {\r\n            PrintWriter writer = response.getWriter();\r\n            response.setContentType(MediaType.TEXT_PLAIN);\r\n            response.setStatus(e.getRawStatusCode());\r\n            writer.print(e.getResponseBodyAsString());\r\n    \t} catch (IOException ex) {\r\n    \t\tthrow new ServiceException(&quot;Cannot get update Password error response body&quot;, ex);\r\n    \t}\r\n    }\r\n\r\n**Error:**\r\n\r\n&gt; This use of java/io/PrintWriter.write(Ljava/lang/String;)V\r\n&gt; could be vulnerable to XSS\r\n\r\n[![enter image description here][1]][1]\r\n\r\nMy output is JSON, HTMLEscape and OWASP creates bad formatting, which I need.\r\n\r\n    { \r\n        &quot;message&quot;: &quot;Here is a test message&quot;\r\n    }\r\n\r\nOWASP Output:\r\n\r\n    {&amp;#34;message&amp;#34;:&amp;#34;Here is a test message (e.g. !&amp;#64;#$).&amp;#34;}\r\n\r\n**SonarQube Rules:**\r\n\r\nI tried SonarQube official solution and still giving error. https://rules.sonarsource.com/java/RSPEC-5131/ \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0pY99.png","title":"Java SonarQube: Error This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be vulnerable to XSS","body":"<p>I am getting this error below. When using ResponseWriter. How can I resolve it? Goal is to resolve the Sonarqube error, however my proposed solution below using Sonar documentation isn't working.</p>\n<pre><code>try {\n   unifiedResponse = testController.updateData(testRequest);\n} catch (RestClientResponseException e) {\n    try {\n        PrintWriter writer = response.getWriter();\n        response.setContentType(MediaType.TEXT_PLAIN);\n        response.setStatus(e.getRawStatusCode());\n        writer.print(e.getResponseBodyAsString());\n    } catch (IOException ex) {\n        throw new ServiceException(&quot;Cannot get update Password error response body&quot;, ex);\n    }\n}\n</code></pre>\n<p><strong>Error:</strong></p>\n<blockquote>\n<p>This use of java/io/PrintWriter.write(Ljava/lang/String;)V\ncould be vulnerable to XSS</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/0pY99.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0pY99.png\" alt=\"enter image description here\" /></a></p>\n<p>My output is JSON, HTMLEscape and OWASP creates bad formatting, which I need.</p>\n<pre><code>{ \n    &quot;message&quot;: &quot;Here is a test message&quot;\n}\n</code></pre>\n<p>OWASP Output:</p>\n<pre><code>{&amp;#34;message&amp;#34;:&amp;#34;Here is a test message (e.g. !&amp;#64;#$).&amp;#34;}\n</code></pre>\n<p><strong>SonarQube Rules:</strong></p>\n<p>I tried SonarQube official solution and still giving error. <a href=\"https://rules.sonarsource.com/java/RSPEC-5131/\" rel=\"nofollow noreferrer\">https://rules.sonarsource.com/java/RSPEC-5131/</a></p>\n"},{"tags":["java","spring-boot","quartz-scheduler","scheduler","jobs"],"owner":{"account_id":10383212,"reputation":333,"user_id":7657219,"display_name":"Varox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691579762,"creation_date":1691579762,"question_id":76867243,"body_markdown":"I have a scheduler that calls a service that process different entities taking as an argument the ids from the database.\r\n\r\nThis scheduler launches a job when the user presses a button in the front, this sends a list of ids to the scheduler (the list that is being used to ).\r\n\r\nMy problem is that when I try to launch more than one job at the same time (ex. two users press the button at the same time) using the scheduleASAP function, the jobs start working but apparently they start using the same piece of code, so they start taking the entities which were supposed to be processed only by one of the jobs and in the end, several entities end up being wrong or not being processed correctly.\r\n\r\nWhy could this be happening?","title":"How can I launch multiple instances of a job concurrently (Quartz schedulers)?","body":"<p>I have a scheduler that calls a service that process different entities taking as an argument the ids from the database.</p>\n<p>This scheduler launches a job when the user presses a button in the front, this sends a list of ids to the scheduler (the list that is being used to ).</p>\n<p>My problem is that when I try to launch more than one job at the same time (ex. two users press the button at the same time) using the scheduleASAP function, the jobs start working but apparently they start using the same piece of code, so they start taking the entities which were supposed to be processed only by one of the jobs and in the end, several entities end up being wrong or not being processed correctly.</p>\n<p>Why could this be happening?</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691168072,"post_id":76834912,"comment_id":135460285,"body_markdown":"Please show `kafka-consumer-groups --describe` output for your group id","body":"Please show <code>kafka-consumer-groups --describe</code> output for your group id"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691241071,"post_id":76834912,"comment_id":135467103,"body_markdown":"@OneCricketeer Thanks for the reply, my problem was related to the embedding. I changed the kafka dependency from version 3.4.0 to 1.0.0 and now I can see my client in the kafka interface.\nIt looks very interesting, but it works.\nUnfortunately I can&#39;t check the actual version of kafka on the server, and I don&#39;t have access to the server to check kafka-consumer-groups --describe via CLI. But now my customer gets 100 notifications, but if the vendor sent 100,000 notifications, he doesn&#39;t get them. Why is this happening?","body":"@OneCricketeer Thanks for the reply, my problem was related to the embedding. I changed the kafka dependency from version 3.4.0 to 1.0.0 and now I can see my client in the kafka interface. It looks very interesting, but it works. Unfortunately I can&#39;t check the actual version of kafka on the server, and I don&#39;t have access to the server to check kafka-consumer-groups --describe via CLI. But now my customer gets 100 notifications, but if the vendor sent 100,000 notifications, he doesn&#39;t get them. Why is this happening?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691253549,"post_id":76834912,"comment_id":135468403,"body_markdown":"I would not recommend going to a 5+ year old version of Kafka client. You dont need access to the terminal of the server to run `kafka-consumer-groups` with `--bootstrap-server 50-kafka-a:9092`. Just download Kafka CLI tools locally. Regarding why the code stops - you&#39;re calling `break` when the records list is empty.. One empty poll doesn&#39;t mean you&#39;ve consumed to the end of the topic","body":"I would not recommend going to a 5+ year old version of Kafka client. You dont need access to the terminal of the server to run <code>kafka-consumer-groups</code> with <code>--bootstrap-server 50-kafka-a:9092</code>. Just download Kafka CLI tools locally. Regarding why the code stops - you&#39;re calling <code>break</code> when the records list is empty.. One empty poll doesn&#39;t mean you&#39;ve consumed to the end of the topic"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691302021,"post_id":76834912,"comment_id":135471692,"body_markdown":"@OneCricketeer, thank you for your reply. Yes, you are right. I can&#39;t understand why using unlimited loop in the consumer but now it seems correct I have to use wakeupException in the try/catch of run(), right? And process closing the cosumer in the catch or finally. About versions : i am back to the version 1.0.0 because ConsumerRebalanceListner does not calling in version 3.4.0 and i can not understand why. I thought that it is because version kafka in the server older than in my project and conflict happened. What are you think about?","body":"@OneCricketeer, thank you for your reply. Yes, you are right. I can&#39;t understand why using unlimited loop in the consumer but now it seems correct I have to use wakeupException in the try/catch of run(), right? And process closing the cosumer in the catch or finally. About versions : i am back to the version 1.0.0 because ConsumerRebalanceListner does not calling in version 3.4.0 and i can not understand why. I thought that it is because version kafka in the server older than in my project and conflict happened. What are you think about?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691332738,"post_id":76834912,"comment_id":135474470,"body_markdown":"I haven&#39;t had any such version issues, but I would upgrade to 3.5.1, rather than downgrade two major versions. And you don&#39;t need a while loop and manually thread interactions if you used spring-kafka library","body":"I haven&#39;t had any such version issues, but I would upgrade to 3.5.1, rather than downgrade two major versions. And you don&#39;t need a while loop and manually thread interactions if you used spring-kafka library"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691409264,"post_id":76834912,"comment_id":135483066,"body_markdown":"What do you mean, @OneCricketeer ? Can you explane , please?","body":"What do you mean, @OneCricketeer ? Can you explane , please?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691412622,"post_id":76834912,"comment_id":135483792,"body_markdown":"You&#39;re already using Spring. So use spring-kafka `@KafkaListener` functions rather than define a consumer with a manual loop yourself. Similarly, KafkaTemplate for a producer","body":"You&#39;re already using Spring. So use spring-kafka <code>@KafkaListener</code> functions rather than define a consumer with a manual loop yourself. Similarly, KafkaTemplate for a producer"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691419027,"post_id":76834912,"comment_id":135485337,"body_markdown":"docs here https://docs.spring.io/spring-kafka/reference/html/#reference","body":"docs here <a href=\"https://docs.spring.io/spring-kafka/reference/html/#reference\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/reference/html/#reference</a>"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691443887,"post_id":76834912,"comment_id":135489948,"body_markdown":"@OneCricketeer, thanks for answer, but i am not using Sprinf Boot, it is java project. I upgrated kafka version to 3.4.0 and now it works, but my consumer always poll latest offser of partitions and never reads messages from partiotions. For example : i have topic with 3 partitions - p 1 (low water mark : 987 and high water mark : 993) = 6 msg, p 2 (low water mark : 920 and high water mark : 926) = 6 msg and p 3 (low water mark : 950 and high water mark : 958) = 8 msg and my consumer is getting records from p 1 with offset 994, p 2 with offset 927 and p 3 with offset 959 and they are empty...","body":"@OneCricketeer, thanks for answer, but i am not using Sprinf Boot, it is java project. I upgrated kafka version to 3.4.0 and now it works, but my consumer always poll latest offser of partitions and never reads messages from partiotions. For example : i have topic with 3 partitions - p 1 (low water mark : 987 and high water mark : 993) = 6 msg, p 2 (low water mark : 920 and high water mark : 926) = 6 msg and p 3 (low water mark : 950 and high water mark : 958) = 8 msg and my consumer is getting records from p 1 with offset 994, p 2 with offset 927 and p 3 with offset 959 and they are empty..."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691445684,"post_id":76834912,"comment_id":135490145,"body_markdown":"So now you are back to 3.4.0? But you said that didn&#39;t work before? You have `@Component` and `@Autowired`, so you are using SpringBoot, or something similar... In any case, check your consumer lag with `kafka-consumer-groups`  CLI script. If there is low/no lag, then your consumer will always read from the end of the topic, yes... You may want to set `enable.auto.commit=false`, btw. Also, check your consumer `isolation.level` setting since Kafka defaults to send transaction markers nowadays, which are &quot;empty records&quot; from a consumer perspective (`read_committed` is not the default)","body":"So now you are back to 3.4.0? But you said that didn&#39;t work before? You have <code>@Component</code> and <code>@Autowired</code>, so you are using SpringBoot, or something similar... In any case, check your consumer lag with <code>kafka-consumer-groups</code>  CLI script. If there is low/no lag, then your consumer will always read from the end of the topic, yes... You may want to set <code>enable.auto.commit=false</code>, btw. Also, check your consumer <code>isolation.level</code> setting since Kafka defaults to send transaction markers nowadays, which are &quot;empty records&quot; from a consumer perspective (<code>read_committed</code> is not the default)"},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691452454,"post_id":76834912,"comment_id":135490847,"body_markdown":"Thank you @OneCricketeer for your help. First of all i done one big mistake - i wrote broker.id=1 in properties for kafka. I think it is the main mistake of work my consumer.  But now i see unstabil working of my consumer- sometimes it works well and sometimes it gets the empty records. Can it happened because i use this consumer for 3 different topic ? May be it has to work only one topic and for others i have to write another class ? Just now my kafka sent twice records to DEV_TELEGRAM topic and get records by consumer and the same time sent records to DEV_VIBER topic and get nothing((","body":"Thank you @OneCricketeer for your help. First of all i done one big mistake - i wrote broker.id=1 in properties for kafka. I think it is the main mistake of work my consumer.  But now i see unstabil working of my consumer- sometimes it works well and sometimes it gets the empty records. Can it happened because i use this consumer for 3 different topic ? May be it has to work only one topic and for others i have to write another class ? Just now my kafka sent twice records to DEV_TELEGRAM topic and get records by consumer and the same time sent records to DEV_VIBER topic and get nothing(("},{"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"score":0,"creation_date":1691453572,"post_id":76834912,"comment_id":135490939,"body_markdown":"@OneCricketeer, now my app works next : every 30 min start work thread , that check db   - are there any news for sending or not? If there are - then to begin work producer and sending records to broker. When it was finish - he closes. After producer closing to begin work consumer - creat 3 threads and in this threads consumers run and have to get the records. When consumers done to get records he close too and for next time they start to run after 30 min. The logic is so.","body":"@OneCricketeer, now my app works next : every 30 min start work thread , that check db   - are there any news for sending or not? If there are - then to begin work producer and sending records to broker. When it was finish - he closes. After producer closing to begin work consumer - creat 3 threads and in this threads consumers run and have to get the records. When consumers done to get records he close too and for next time they start to run after 30 min. The logic is so."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691454351,"post_id":76834912,"comment_id":135491000,"body_markdown":"I suggest creating a new post for any new issues you are seeing. Also, I would recommend using Debezium rather than having your app poll from any database","body":"I suggest creating a new post for any new issues you are seeing. Also, I would recommend using Debezium rather than having your app poll from any database"}],"answers":[{"tags":[],"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691579661,"creation_date":1691579661,"answer_id":76867229,"question_id":76834912,"body_markdown":"I am very grateful to @OneCricketeer for his time and support.\r\nThe reason of problem was in my kafka properties file. Some property or a group of them were disrupting normal work of kafka consumers.\r\nSo now i am using these properties of kafka : \r\n\r\n```\r\n# The location of the Kafka server\r\nbootstrap.servers=50-kafka-a:9092\r\n\r\n##### PRODUCER SETTINGS ######\r\n\r\n#to show how many confirmations have to get producer - in our case it is all\r\nacks=all\r\n# classes for serializing ...\r\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\r\nvalue.serializer=org.apache.kafka.common.serialization.StringSerializer\r\n\r\n\r\n##### CONSUMER SETTINGS ######\r\n\r\n#max size of messages which will be return after calling one call poll()\r\nmax.poll.records=500\r\n#it is need when the start offset is absent or if current offset is not exist more\r\nauto.offset.reset=latest\r\n# ... and deserializing messages\r\nkey.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\nvalue.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n```","title":"Why consumer of Kafka does not receive the records from broker","body":"<p>I am very grateful to @OneCricketeer for his time and support.\nThe reason of problem was in my kafka properties file. Some property or a group of them were disrupting normal work of kafka consumers.\nSo now i am using these properties of kafka :</p>\n<pre><code># The location of the Kafka server\nbootstrap.servers=50-kafka-a:9092\n\n##### PRODUCER SETTINGS ######\n\n#to show how many confirmations have to get producer - in our case it is all\nacks=all\n# classes for serializing ...\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\nvalue.serializer=org.apache.kafka.common.serialization.StringSerializer\n\n\n##### CONSUMER SETTINGS ######\n\n#max size of messages which will be return after calling one call poll()\nmax.poll.records=500\n#it is need when the start offset is absent or if current offset is not exist more\nauto.offset.reset=latest\n# ... and deserializing messages\nkey.deserializer=org.apache.kafka.common.serialization.StringDeserializer\nvalue.deserializer=org.apache.kafka.common.serialization.StringDeserializer\n</code></pre>\n"}],"owner":{"account_id":26217254,"reputation":47,"user_id":19895232,"display_name":"Evgeniy Zhurenko"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691579661,"creation_date":1691143497,"question_id":76834912,"body_markdown":"My consumer is not getting any records from topic. \r\nTopic is the same for consumer and producer. I can see my topic on the UI of broker.  \r\n\r\nFor consumer I also set the group.id the same as topic name.\r\nI can see in broker UI the messages sent by the producer, but the consumer can not get any records.  \r\n\r\nAnd my ConsumerRebalanceListner does not seem to be working. I can&#39;t see that it was called.  \r\n\r\nThis is my producer:\r\n\r\n```\r\npublic class BotKafkaProducer implements Runnable {\r\n\r\n    private BotLogger log;\r\n    private Set&lt;NewsLetter&gt; newsLetters;\r\n    private String topicName;\r\n    private Bot bot;\r\n    private News news;\r\n\r\n    @Setter\r\n    private NewsDao newsDao;\r\n    @Setter\r\n    private AtomicInteger sentNews;\r\n\r\n    private KafkaProducer&lt;String, String&gt; kafkaProducer;\r\n\r\n    public BotKafkaProducer(BotLogger log, Set&lt;NewsLetter&gt; newsLetters, String topicName,\r\n                            String pathPropKafka, Bot bot, News news) {\r\n        this.log = log;\r\n        this.newsLetters = newsLetters;\r\n        this.topicName = topicName;\r\n        this.bot = bot;\r\n        this.news = news;\r\n        try {\r\n            Properties props = PropertiesHelper.getProperties(pathPropKafka);\r\n            log.info(&quot;Success creating Properties for kafka producer.&quot;);\r\n            this.kafkaProducer = new KafkaProducer&lt;String, String&gt;(props);\r\n        } catch (Exception e){\r\n            log.error(&quot;Error creating Properties for kafka producer.&quot;);\r\n            log.error(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        log.info(&quot;producer start, queue name : &quot; + topicName);\r\n        try {\r\n            log.info(&quot;Success creating KafkaProducer .&quot;);\r\n            for (NewsLetter newsLetter : newsLetters) {\r\n                String value = new Gson().toJson(newsLetter);\r\n                ProducerRecord&lt;String, String&gt; producerRecord =\r\n                        new ProducerRecord&lt;&gt;(topicName, value);\r\n\r\n                kafkaProducer.send(producerRecord, (recordMetadata, e) -&gt; {\r\n                    // executes every time a record is successfully sent or an exception is thrown\r\n                    if (e == null) {\r\n                        // the record was successfully sent\r\n                        log.info(&quot;Received new metadata. \\n&quot; +\r\n                                &quot;Topic:&quot; + recordMetadata.topic() + &quot;\\n&quot; +\r\n                                &quot;Partition: &quot; + recordMetadata.partition() + &quot;\\n&quot; +\r\n                                &quot;Offset: &quot; + recordMetadata.offset() + &quot;\\n&quot; +\r\n                                &quot;Timestamp: &quot; + recordMetadata.timestamp());\r\n                    } else {\r\n                        log.error(&quot;Error while producing&quot; + e.getMessage());\r\n                    }\r\n                });\r\n                if(sentNews.get()%2000 == 0) {\r\n                    this.kafkaProducer.flush();\r\n                }\r\n                sentNews.getAndIncrement();\r\n            }\r\n            this.kafkaProducer.flush();\r\n            log.info(sentNews.get() + &quot; news letters committed.&quot;);\r\n            //update news\r\n            log.info(&quot;updating news status...&quot;);\r\n            news.setBotStatus(bot.toString(), false);\r\n            log.info(bot.toString() + &quot; set bot status &quot; + news.isBotStatus(bot.toString()));\r\n            newsDao.updateStatus(bot.toString(), news);\r\n            log.info(&quot;News status updated for &quot; + bot);\r\n        }catch (Exception e){\r\n            if(kafkaProducer != null)\r\n                this.kafkaProducer.close();\r\n        } finally {\r\n            if(kafkaProducer != null)\r\n                this.kafkaProducer.close(Duration.ofMillis(500));\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nthis is my consumer:\r\n\r\n```\r\npublic final class BotKafkaConsumer implements Runnable, ExceptionListener {\r\n\r\n    private final BotLogger log;\r\n    private final String topicName;\r\n\r\n    private FacebookSender facebookSender;\r\n\r\n    private TelegramSender telegramSender;\r\n\r\n    private ViberSender viberSender;\r\n\r\n    private volatile LocalTime startSendTime;\r\n    private volatile LocalTime endSendTime;\r\n    private AtomicInteger send;\r\n    private AtomicInteger notSend;\r\n    private AtomicInteger producerSent;\r\n    private LocalDateTime startProcess;\r\n\r\n    private KafkaConsumer&lt;String, String&gt; kafkaConsumer;\r\n\r\n    private BotKafkaConsumer(Bot bot, BotLogger log, String topicName, String pathPropKafka) {\r\n        this.log = log;\r\n        this.topicName = topicName;\r\n        Properties props;\r\n        try {\r\n            props = PropertiesHelper.getProperties(pathPropKafka);\r\n            props.setProperty(ConsumerConfig.GROUP_ID_CONFIG, &quot;group-id-&quot; + topicName);\r\n            log.info(&quot;Success creating Properties for kafka consumer.&quot;);\r\n            this.kafkaConsumer = new KafkaConsumer&lt;String, String&gt;(props);\r\n            this.startSendTime = bot.getStartSendTime();\r\n            this.endSendTime = bot.getEndSendTime();\r\n        } catch (Exception e){\r\n            log.error(&quot;Error creating Properties for kafka consumer.&quot;);\r\n            log.error(e.getMessage());\r\n        }\r\n    }\r\n\r\n    public BotKafkaConsumer(Bot bot, BotLogger log, String topicName, String pathPropKafka, Object sender,\r\n                            AtomicInteger send, AtomicInteger notSend, AtomicInteger producerSent, LocalDateTime startProcess){\r\n        this(bot, log, topicName, pathPropKafka);\r\n        this.send = send;\r\n        this.notSend = notSend;\r\n        this.producerSent = producerSent;\r\n        this.startProcess = startProcess;\r\n\r\n        if(sender instanceof FacebookSender)\r\n            this.facebookSender = (FacebookSender)sender;\r\n        if(sender instanceof TelegramSender)\r\n            this.telegramSender = (TelegramSender)sender;\r\n        if(sender instanceof ViberSender)\r\n            this.viberSender = (ViberSender)sender;\r\n    }\r\n\r\n    public LocalTime getStartSendTime() {\r\n        return startSendTime;\r\n    }\r\n\r\n    public LocalTime getEndSendTime() {\r\n        return endSendTime;\r\n    }\r\n\r\n    private boolean isNotTimeToSend() {\r\n        return ((startSendTime != null &amp;&amp; startSendTime.isAfter(LocalTime.now())) ||\r\n                (endSendTime != null &amp;&amp; endSendTime.isBefore(LocalTime.now())));\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        final Thread mainThread = Thread.currentThread();\r\n        // Registering a shutdown hook so we can exit cleanly\r\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\r\n            System.out.println(&quot;Starting exit...&quot;);\r\n            // Note that shutdownhook runs in a separate thread, so the only thing we can safely do to a consumer is wake it up\r\n            this.kafkaConsumer.wakeup();\r\n            try {\r\n                mainThread.join();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }));\r\n        try{\r\n            subscribeConsumer();\r\n            if (facebookSender != null) {\r\n                send(this.kafkaConsumer, facebookSender, log);\r\n            } else if (telegramSender != null) {\r\n                send(this.kafkaConsumer, telegramSender, log);\r\n            } else if (viberSender != null) {\r\n                send(this.kafkaConsumer, viberSender, log);\r\n            }\r\n        } catch (Exception e){\r\n            log.error(&quot;BotKafkaConsumer error : &quot; + e.getMessage());\r\n        } finally {\r\n            log.warn(&quot;BotKafkaConsumer closed .&quot;);\r\n            if(this.kafkaConsumer != null) {\r\n                this.kafkaConsumer.close(Duration.ofMillis(500));\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onException(JMSException e) {\r\n        log.error(&quot;consumer : &quot; + this.toString() + &quot; error : &quot; + e.getMessage());\r\n    }\r\n\r\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, TelegramSender telegramSender, BotLogger log) throws JMSException {\r\n        ConsumerRecords&lt;String, String&gt; records;\r\n        Gson gson = new Gson();\r\n        TelegramDto telegramBody = new TelegramDto();\r\n        // Creating inline Keyboard with one button\r\n        InlineKeyboard inlineKeyboard = null;\r\n\r\n        synchronized(this) {\r\n            while (true) {\r\n                records = consumer.poll(Duration.ofMillis(500));\r\n                records.partitions().forEach(tp -&gt; {\r\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; TP : &quot; + tp.partition());\r\n                });\r\n                for (ConsumerRecord&lt;String, String&gt; record : records) {\r\n                    NewsLetter newsLetter = getNewsLetter(record, gson);\r\n                    String id;\r\n                    News news;\r\n                    try {\r\n                        id = newsLetter.getUserId();\r\n                        news = newsLetter.getNews();\r\n                        String text = replaceForTelegram(news.getText());\r\n                        String buttonText = news.getButtonText();\r\n                        if (StringUtils.isNotBlank(buttonText)) {\r\n                            String buttonUrl = news.getButtonUrl();\r\n                            if (StringUtils.isNotBlank(buttonUrl)) {\r\n                                inlineKeyboard = new InlineKeyboard().addRow()\r\n                                        .addButton(0, new InlineKeyboardButton(buttonText).setUrl(buttonUrl));\r\n                                telegramBody.setReplyMarkup(inlineKeyboard);\r\n                            }\r\n                        }\r\n                        if (news.getImageUrl() != null) {\r\n                            String imageUrl = &quot;(&quot; + news.getImageUrl() + &quot;)&quot;;\r\n                            text = &quot;[\\u200B]&quot; + imageUrl + text;\r\n                        }\r\n                        telegramBody.setChatId(id)\r\n                                .setText(text)\r\n                                .setMessageType(TelegramSendType.SEND_MESSAGE);\r\n\r\n                        boolean result = telegramSender.sendMessage(telegramBody);\r\n                        processResult(result);\r\n                        log.info(&quot;send.get() + notSend.get()&quot; + (send.get() + notSend.get()) +\r\n                                &quot;    producerSent.get()&quot; + producerSent.get());\r\n                        if((send.get() + notSend.get()) &gt;= producerSent.get()) {\r\n                            break;\r\n                        }\r\n                    }catch (Exception e){\r\n                        log.error(e.getMessage());\r\n                    }\r\n                }\r\n                if (isNotTimeToSend()) {\r\n                    log.info(&quot;is not time to send is : &quot; + isNotTimeToSend());\r\n                    producerSent.set(0);\r\n                    break;\r\n                }\r\n                if((send.get() + notSend.get()) &gt;= producerSent.get()) {\r\n                    LocalDateTime endProcess = LocalDateTime.now();\r\n                    log.info(&quot;TELEGRAM PRODUCER TOTAL NEWS are sent : &quot; + producerSent.get() +\r\n                            &quot; by Producer: &quot; + topicName);\r\n                    log.info(&quot;TELEGRAM CONSUMER TOTAL NEWS are sent : &quot; + send + &quot;, TOTAL NOT sent : &quot; + notSend +\r\n                            &quot; by Consumer: &quot; + topicName);\r\n                    log.info(&quot;START consumerNews process : &quot; + startProcess.toString());\r\n                    log.info(&quot;END consumeNews process : &quot; + endProcess.toString());\r\n                    log.info(&quot;TOTAL TIME FOR SENDING : &quot; + ChronoUnit.MINUTES.between(startProcess, endProcess) +\r\n                            &quot; min &quot; + ChronoUnit.SECONDS.between(startProcess, endProcess) + &quot; sec &quot; +\r\n                            ChronoUnit.MILLIS.between(startProcess, endProcess) + &quot; ms&quot;);\r\n                    producerSent.set(0);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, ViberSender viberSender, BotLogger log) throws JMSException {\r\n        // some code of process\r\n    }\r\n\r\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, FacebookSender facebookSender, BotLogger log) throws JMSException {\r\n    // some code of process\r\n    }\r\n\r\n\r\n    private void subscribeConsumer() {\r\n//        this.kafkaConsumer.subscribe(Collections.singletonList(topicName));\r\n        this.kafkaConsumer.subscribe(Collections.singletonList(topicName), new ConsumerRebalanceListener() {\r\n            @Override\r\n            public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; collection) {\r\n                log.info(&quot;Revoke partitions : &quot; + formatPartitions(collection));\r\n            }\r\n\r\n            @Override\r\n            public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; collection) {\r\n                collection.forEach(tp -&gt; {\r\n                    long offset = kafkaConsumer.position(tp);\r\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; Partition : &quot; + tp.partition() +\r\n                            &quot; Offset : &quot; + offset);\r\n                });\r\n                kafkaConsumer.resume(collection);\r\n            }\r\n\r\n            @Override\r\n            public void onPartitionsLost(Collection&lt;TopicPartition&gt; collection){\r\n                collection.forEach(tp -&gt; {\r\n                    long offset = kafkaConsumer.position(tp);\r\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; Partition : &quot; + tp.partition() +\r\n                            &quot; Offset : &quot; + offset);\r\n                });\r\n                kafkaConsumer.resume(collection);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void processResult(boolean result){\r\n        if (result) {\r\n            send.getAndIncrement();\r\n        } else {\r\n            notSend.getAndIncrement();\r\n        }\r\n    }\r\n\r\n    private NewsLetter getNewsLetter(ConsumerRecord&lt;String, String&gt; record, Gson gson) throws JMSException {\r\n        String text = record.value();\r\n        return gson.fromJson(text, NewsLetter.class);\r\n    }\r\n\r\n    private String replaceForTelegram(String text) {\r\n        return text.replace(&quot;_&quot;, &quot;\\\\_&quot;)\r\n                .replace(&quot;`&quot;, &quot;\\\\`&quot;)\r\n                .replace(&quot;*&quot;, &quot;\\\\*&quot;);\r\n    }\r\n\r\n    private static List&lt;String&gt; formatPartitions(Collection&lt;TopicPartition&gt; partitions) {\r\n        return partitions.stream().map(topicPartition -&gt;\r\n                String.format(&quot;topic: %s, partition: %s&quot;, topicPartition.topic(), topicPartition.partition()))\r\n                .collect(Collectors.toList());\r\n    }\r\n}\r\n```\r\n\r\nThis is the properties that I use for set up of broker, producer and consumer:\r\n```\r\n# The location of the Kafka server\r\nbootstrap.servers=50-kafka-a:9092\r\n#count of replicas of brokers\r\nreplication.factor=3\r\n#max size of message on broker side\r\n#max.message.bytes=10485880\r\n#replica.fetch.max.bytes=10485880\r\n#max size of message on consumer side\r\n#max.partition.fetch.bytes=10485880\r\nbroker.id=1\r\nzookeeper.connect=50-kafka-a:2181\r\n\r\n##### PRODUCER SETTINGS ######\r\n\r\n#to show how many confirmations have to get producer - in our case it is all\r\nacks=all\r\n#it means that two brokers which are async replicas include leader have to answer that they have data\r\n#min.insync.replicas=2\r\n#type of compression message on side of producer\r\ncompression.type=snappy\r\n#the count of retry for trying to send message\r\nretries=3\r\n#timeout of producer after that message will be failed\r\ndelivery.timeout.ms=120000\r\n#max size of message on the producer side\r\n#max.request.size=10485880\r\n# classes for serializing ...\r\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\r\nvalue.serializer=org.apache.kafka.common.serialization.StringSerializer\r\n\r\n\r\n##### CONSUMER SETTINGS ######\r\n\r\n#max size of messages which will be return after calling one call poll()\r\nmax.poll.records=1000\r\n# Make Kafka keep track of record reads by the consumer\r\nenable.auto.commit=true\r\n# The time in milliseconds to Kafka write the offset of the last message read\r\nauto.commit.interval.ms=500\r\n#it is need when the start offset is absent or if current offset is not exist more\r\nauto.offset.reset=earliest\r\n#auto.offset.reset=latest\r\n#max size of message on the consumer side\r\n#fetch.max.bytes=10485880\r\n# ... and deserializing messages\r\nkey.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\nvalue.deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n```\r\n\r\nand dependency is: \r\n```\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\r\n            &lt;version&gt;3.4.0&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n```","title":"Why consumer of Kafka does not receive the records from broker","body":"<p>My consumer is not getting any records from topic.\nTopic is the same for consumer and producer. I can see my topic on the UI of broker.</p>\n<p>For consumer I also set the group.id the same as topic name.\nI can see in broker UI the messages sent by the producer, but the consumer can not get any records.</p>\n<p>And my ConsumerRebalanceListner does not seem to be working. I can't see that it was called.</p>\n<p>This is my producer:</p>\n<pre><code>public class BotKafkaProducer implements Runnable {\n\n    private BotLogger log;\n    private Set&lt;NewsLetter&gt; newsLetters;\n    private String topicName;\n    private Bot bot;\n    private News news;\n\n    @Setter\n    private NewsDao newsDao;\n    @Setter\n    private AtomicInteger sentNews;\n\n    private KafkaProducer&lt;String, String&gt; kafkaProducer;\n\n    public BotKafkaProducer(BotLogger log, Set&lt;NewsLetter&gt; newsLetters, String topicName,\n                            String pathPropKafka, Bot bot, News news) {\n        this.log = log;\n        this.newsLetters = newsLetters;\n        this.topicName = topicName;\n        this.bot = bot;\n        this.news = news;\n        try {\n            Properties props = PropertiesHelper.getProperties(pathPropKafka);\n            log.info(&quot;Success creating Properties for kafka producer.&quot;);\n            this.kafkaProducer = new KafkaProducer&lt;String, String&gt;(props);\n        } catch (Exception e){\n            log.error(&quot;Error creating Properties for kafka producer.&quot;);\n            log.error(e.getMessage());\n        }\n    }\n\n    @Override\n    public void run() {\n        log.info(&quot;producer start, queue name : &quot; + topicName);\n        try {\n            log.info(&quot;Success creating KafkaProducer .&quot;);\n            for (NewsLetter newsLetter : newsLetters) {\n                String value = new Gson().toJson(newsLetter);\n                ProducerRecord&lt;String, String&gt; producerRecord =\n                        new ProducerRecord&lt;&gt;(topicName, value);\n\n                kafkaProducer.send(producerRecord, (recordMetadata, e) -&gt; {\n                    // executes every time a record is successfully sent or an exception is thrown\n                    if (e == null) {\n                        // the record was successfully sent\n                        log.info(&quot;Received new metadata. \\n&quot; +\n                                &quot;Topic:&quot; + recordMetadata.topic() + &quot;\\n&quot; +\n                                &quot;Partition: &quot; + recordMetadata.partition() + &quot;\\n&quot; +\n                                &quot;Offset: &quot; + recordMetadata.offset() + &quot;\\n&quot; +\n                                &quot;Timestamp: &quot; + recordMetadata.timestamp());\n                    } else {\n                        log.error(&quot;Error while producing&quot; + e.getMessage());\n                    }\n                });\n                if(sentNews.get()%2000 == 0) {\n                    this.kafkaProducer.flush();\n                }\n                sentNews.getAndIncrement();\n            }\n            this.kafkaProducer.flush();\n            log.info(sentNews.get() + &quot; news letters committed.&quot;);\n            //update news\n            log.info(&quot;updating news status...&quot;);\n            news.setBotStatus(bot.toString(), false);\n            log.info(bot.toString() + &quot; set bot status &quot; + news.isBotStatus(bot.toString()));\n            newsDao.updateStatus(bot.toString(), news);\n            log.info(&quot;News status updated for &quot; + bot);\n        }catch (Exception e){\n            if(kafkaProducer != null)\n                this.kafkaProducer.close();\n        } finally {\n            if(kafkaProducer != null)\n                this.kafkaProducer.close(Duration.ofMillis(500));\n        }\n    }\n\n}\n</code></pre>\n<p>this is my consumer:</p>\n<pre><code>public final class BotKafkaConsumer implements Runnable, ExceptionListener {\n\n    private final BotLogger log;\n    private final String topicName;\n\n    private FacebookSender facebookSender;\n\n    private TelegramSender telegramSender;\n\n    private ViberSender viberSender;\n\n    private volatile LocalTime startSendTime;\n    private volatile LocalTime endSendTime;\n    private AtomicInteger send;\n    private AtomicInteger notSend;\n    private AtomicInteger producerSent;\n    private LocalDateTime startProcess;\n\n    private KafkaConsumer&lt;String, String&gt; kafkaConsumer;\n\n    private BotKafkaConsumer(Bot bot, BotLogger log, String topicName, String pathPropKafka) {\n        this.log = log;\n        this.topicName = topicName;\n        Properties props;\n        try {\n            props = PropertiesHelper.getProperties(pathPropKafka);\n            props.setProperty(ConsumerConfig.GROUP_ID_CONFIG, &quot;group-id-&quot; + topicName);\n            log.info(&quot;Success creating Properties for kafka consumer.&quot;);\n            this.kafkaConsumer = new KafkaConsumer&lt;String, String&gt;(props);\n            this.startSendTime = bot.getStartSendTime();\n            this.endSendTime = bot.getEndSendTime();\n        } catch (Exception e){\n            log.error(&quot;Error creating Properties for kafka consumer.&quot;);\n            log.error(e.getMessage());\n        }\n    }\n\n    public BotKafkaConsumer(Bot bot, BotLogger log, String topicName, String pathPropKafka, Object sender,\n                            AtomicInteger send, AtomicInteger notSend, AtomicInteger producerSent, LocalDateTime startProcess){\n        this(bot, log, topicName, pathPropKafka);\n        this.send = send;\n        this.notSend = notSend;\n        this.producerSent = producerSent;\n        this.startProcess = startProcess;\n\n        if(sender instanceof FacebookSender)\n            this.facebookSender = (FacebookSender)sender;\n        if(sender instanceof TelegramSender)\n            this.telegramSender = (TelegramSender)sender;\n        if(sender instanceof ViberSender)\n            this.viberSender = (ViberSender)sender;\n    }\n\n    public LocalTime getStartSendTime() {\n        return startSendTime;\n    }\n\n    public LocalTime getEndSendTime() {\n        return endSendTime;\n    }\n\n    private boolean isNotTimeToSend() {\n        return ((startSendTime != null &amp;&amp; startSendTime.isAfter(LocalTime.now())) ||\n                (endSendTime != null &amp;&amp; endSendTime.isBefore(LocalTime.now())));\n    }\n\n    @Override\n    public void run() {\n        final Thread mainThread = Thread.currentThread();\n        // Registering a shutdown hook so we can exit cleanly\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\n            System.out.println(&quot;Starting exit...&quot;);\n            // Note that shutdownhook runs in a separate thread, so the only thing we can safely do to a consumer is wake it up\n            this.kafkaConsumer.wakeup();\n            try {\n                mainThread.join();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }));\n        try{\n            subscribeConsumer();\n            if (facebookSender != null) {\n                send(this.kafkaConsumer, facebookSender, log);\n            } else if (telegramSender != null) {\n                send(this.kafkaConsumer, telegramSender, log);\n            } else if (viberSender != null) {\n                send(this.kafkaConsumer, viberSender, log);\n            }\n        } catch (Exception e){\n            log.error(&quot;BotKafkaConsumer error : &quot; + e.getMessage());\n        } finally {\n            log.warn(&quot;BotKafkaConsumer closed .&quot;);\n            if(this.kafkaConsumer != null) {\n                this.kafkaConsumer.close(Duration.ofMillis(500));\n            }\n        }\n    }\n\n    @Override\n    public void onException(JMSException e) {\n        log.error(&quot;consumer : &quot; + this.toString() + &quot; error : &quot; + e.getMessage());\n    }\n\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, TelegramSender telegramSender, BotLogger log) throws JMSException {\n        ConsumerRecords&lt;String, String&gt; records;\n        Gson gson = new Gson();\n        TelegramDto telegramBody = new TelegramDto();\n        // Creating inline Keyboard with one button\n        InlineKeyboard inlineKeyboard = null;\n\n        synchronized(this) {\n            while (true) {\n                records = consumer.poll(Duration.ofMillis(500));\n                records.partitions().forEach(tp -&gt; {\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; TP : &quot; + tp.partition());\n                });\n                for (ConsumerRecord&lt;String, String&gt; record : records) {\n                    NewsLetter newsLetter = getNewsLetter(record, gson);\n                    String id;\n                    News news;\n                    try {\n                        id = newsLetter.getUserId();\n                        news = newsLetter.getNews();\n                        String text = replaceForTelegram(news.getText());\n                        String buttonText = news.getButtonText();\n                        if (StringUtils.isNotBlank(buttonText)) {\n                            String buttonUrl = news.getButtonUrl();\n                            if (StringUtils.isNotBlank(buttonUrl)) {\n                                inlineKeyboard = new InlineKeyboard().addRow()\n                                        .addButton(0, new InlineKeyboardButton(buttonText).setUrl(buttonUrl));\n                                telegramBody.setReplyMarkup(inlineKeyboard);\n                            }\n                        }\n                        if (news.getImageUrl() != null) {\n                            String imageUrl = &quot;(&quot; + news.getImageUrl() + &quot;)&quot;;\n                            text = &quot;[\\u200B]&quot; + imageUrl + text;\n                        }\n                        telegramBody.setChatId(id)\n                                .setText(text)\n                                .setMessageType(TelegramSendType.SEND_MESSAGE);\n\n                        boolean result = telegramSender.sendMessage(telegramBody);\n                        processResult(result);\n                        log.info(&quot;send.get() + notSend.get()&quot; + (send.get() + notSend.get()) +\n                                &quot;    producerSent.get()&quot; + producerSent.get());\n                        if((send.get() + notSend.get()) &gt;= producerSent.get()) {\n                            break;\n                        }\n                    }catch (Exception e){\n                        log.error(e.getMessage());\n                    }\n                }\n                if (isNotTimeToSend()) {\n                    log.info(&quot;is not time to send is : &quot; + isNotTimeToSend());\n                    producerSent.set(0);\n                    break;\n                }\n                if((send.get() + notSend.get()) &gt;= producerSent.get()) {\n                    LocalDateTime endProcess = LocalDateTime.now();\n                    log.info(&quot;TELEGRAM PRODUCER TOTAL NEWS are sent : &quot; + producerSent.get() +\n                            &quot; by Producer: &quot; + topicName);\n                    log.info(&quot;TELEGRAM CONSUMER TOTAL NEWS are sent : &quot; + send + &quot;, TOTAL NOT sent : &quot; + notSend +\n                            &quot; by Consumer: &quot; + topicName);\n                    log.info(&quot;START consumerNews process : &quot; + startProcess.toString());\n                    log.info(&quot;END consumeNews process : &quot; + endProcess.toString());\n                    log.info(&quot;TOTAL TIME FOR SENDING : &quot; + ChronoUnit.MINUTES.between(startProcess, endProcess) +\n                            &quot; min &quot; + ChronoUnit.SECONDS.between(startProcess, endProcess) + &quot; sec &quot; +\n                            ChronoUnit.MILLIS.between(startProcess, endProcess) + &quot; ms&quot;);\n                    producerSent.set(0);\n                    break;\n                }\n            }\n        }\n    }\n\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, ViberSender viberSender, BotLogger log) throws JMSException {\n        // some code of process\n    }\n\n    private void send(KafkaConsumer&lt;String, String&gt; consumer, FacebookSender facebookSender, BotLogger log) throws JMSException {\n    // some code of process\n    }\n\n\n    private void subscribeConsumer() {\n//        this.kafkaConsumer.subscribe(Collections.singletonList(topicName));\n        this.kafkaConsumer.subscribe(Collections.singletonList(topicName), new ConsumerRebalanceListener() {\n            @Override\n            public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; collection) {\n                log.info(&quot;Revoke partitions : &quot; + formatPartitions(collection));\n            }\n\n            @Override\n            public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; collection) {\n                collection.forEach(tp -&gt; {\n                    long offset = kafkaConsumer.position(tp);\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; Partition : &quot; + tp.partition() +\n                            &quot; Offset : &quot; + offset);\n                });\n                kafkaConsumer.resume(collection);\n            }\n\n            @Override\n            public void onPartitionsLost(Collection&lt;TopicPartition&gt; collection){\n                collection.forEach(tp -&gt; {\n                    long offset = kafkaConsumer.position(tp);\n                    log.info(&quot;Topic : &quot; + tp.topic() + &quot; Partition : &quot; + tp.partition() +\n                            &quot; Offset : &quot; + offset);\n                });\n                kafkaConsumer.resume(collection);\n            }\n        });\n    }\n\n    private void processResult(boolean result){\n        if (result) {\n            send.getAndIncrement();\n        } else {\n            notSend.getAndIncrement();\n        }\n    }\n\n    private NewsLetter getNewsLetter(ConsumerRecord&lt;String, String&gt; record, Gson gson) throws JMSException {\n        String text = record.value();\n        return gson.fromJson(text, NewsLetter.class);\n    }\n\n    private String replaceForTelegram(String text) {\n        return text.replace(&quot;_&quot;, &quot;\\\\_&quot;)\n                .replace(&quot;`&quot;, &quot;\\\\`&quot;)\n                .replace(&quot;*&quot;, &quot;\\\\*&quot;);\n    }\n\n    private static List&lt;String&gt; formatPartitions(Collection&lt;TopicPartition&gt; partitions) {\n        return partitions.stream().map(topicPartition -&gt;\n                String.format(&quot;topic: %s, partition: %s&quot;, topicPartition.topic(), topicPartition.partition()))\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>This is the properties that I use for set up of broker, producer and consumer:</p>\n<pre><code># The location of the Kafka server\nbootstrap.servers=50-kafka-a:9092\n#count of replicas of brokers\nreplication.factor=3\n#max size of message on broker side\n#max.message.bytes=10485880\n#replica.fetch.max.bytes=10485880\n#max size of message on consumer side\n#max.partition.fetch.bytes=10485880\nbroker.id=1\nzookeeper.connect=50-kafka-a:2181\n\n##### PRODUCER SETTINGS ######\n\n#to show how many confirmations have to get producer - in our case it is all\nacks=all\n#it means that two brokers which are async replicas include leader have to answer that they have data\n#min.insync.replicas=2\n#type of compression message on side of producer\ncompression.type=snappy\n#the count of retry for trying to send message\nretries=3\n#timeout of producer after that message will be failed\ndelivery.timeout.ms=120000\n#max size of message on the producer side\n#max.request.size=10485880\n# classes for serializing ...\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\nvalue.serializer=org.apache.kafka.common.serialization.StringSerializer\n\n\n##### CONSUMER SETTINGS ######\n\n#max size of messages which will be return after calling one call poll()\nmax.poll.records=1000\n# Make Kafka keep track of record reads by the consumer\nenable.auto.commit=true\n# The time in milliseconds to Kafka write the offset of the last message read\nauto.commit.interval.ms=500\n#it is need when the start offset is absent or if current offset is not exist more\nauto.offset.reset=earliest\n#auto.offset.reset=latest\n#max size of message on the consumer side\n#fetch.max.bytes=10485880\n# ... and deserializing messages\nkey.deserializer=org.apache.kafka.common.serialization.StringDeserializer\nvalue.deserializer=org.apache.kafka.common.serialization.StringDeserializer\n</code></pre>\n<p>and dependency is:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n            &lt;version&gt;3.4.0&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","filewriter"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691431727,"post_id":76854056,"comment_id":135487936,"body_markdown":"What exactaly you want to know?","body":"What exactaly you want to know?"},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691431982,"post_id":76854056,"comment_id":135487977,"body_markdown":"the code does not work since i still get the error file not found so i am assuming my code is wrong","body":"the code does not work since i still get the error file not found so i am assuming my code is wrong"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691432472,"post_id":76854056,"comment_id":135488075,"body_markdown":"I tested with Java 8 and it works. What Java version are you using?","body":"I tested with Java 8 and it works. What Java version are you using?"},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691433709,"post_id":76854056,"comment_id":135488294,"body_markdown":"I typed java -version on cmd and i got openjdk version &quot;17.0.8&quot; 2023-07-18\nOpenJDK Runtime Environment Temurin-17.0.8+7 (build 17.0.8+7)\nOpenJDK 64-Bit Server VM Temurin-17.0.8+7 (build 17.0.8+7, mixed mode, sharing).","body":"I typed java -version on cmd and i got openjdk version &quot;17.0.8&quot; 2023-07-18 OpenJDK Runtime Environment Temurin-17.0.8+7 (build 17.0.8+7) OpenJDK 64-Bit Server VM Temurin-17.0.8+7 (build 17.0.8+7, mixed mode, sharing)."},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691433735,"post_id":76854056,"comment_id":135488300,"body_markdown":"I used intellij maven","body":"I used intellij maven"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":2,"creation_date":1691435130,"post_id":76854056,"comment_id":135488537,"body_markdown":"You are missing a closing curly brace `}` after `myWriter.close();`","body":"You are missing a closing curly brace <code>}</code> after <code>myWriter.close();</code>"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691435707,"post_id":76854056,"comment_id":135488653,"body_markdown":"Do you checked the `filePath`?","body":"Do you checked the <code>filePath</code>?"},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691435780,"post_id":76854056,"comment_id":135488665,"body_markdown":"yep i printed filePath and seems right but when it is in new file(filePath) it still does not work","body":"yep i printed filePath and seems right but when it is in new file(filePath) it still does not work"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1691580868,"post_id":76854056,"comment_id":135510229,"body_markdown":"Btw there&#39;s no need to use StringBuilder unless you&#39;re in a loop. Just use `+` on Strings or better still see g00se&#39;s answer.","body":"Btw there&#39;s no need to use StringBuilder unless you&#39;re in a loop. Just use <code>+</code> on Strings or better still see g00se&#39;s answer."}],"answers":[{"comments":[{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691434809,"post_id":76854426,"comment_id":135488482,"body_markdown":"I had other code included, sorry for not making sure the syntax is right. Please see the error i added and guide me if you are familiar with this problem","body":"I had other code included, sorry for not making sure the syntax is right. Please see the error i added and guide me if you are familiar with this problem"},{"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"score":0,"creation_date":1691504282,"post_id":76854426,"comment_id":135498738,"body_markdown":"Ok so this worked on my Mac.  I went and tested the code out on a Windows 10 machine and the code did fail with a java.io.exception.  The code was determining the path as c:\\\\Users\\&lt;username&gt;\\\\Desktop .  Desktop folder did not exist in this directory on windows. Can you please check if the directory path where you are going to create unSorted.txt file actually exists?  I then created a Desktop folder at c:\\\\Users\\&lt;username&gt; and then your code worked without any issues.","body":"Ok so this worked on my Mac.  I went and tested the code out on a Windows 10 machine and the code did fail with a java.io.exception.  The code was determining the path as c:\\\\Users\\&lt;username&gt;\\\\Desktop .  Desktop folder did not exist in this directory on windows. Can you please check if the directory path where you are going to create unSorted.txt file actually exists?  I then created a Desktop folder at c:\\\\Users\\&lt;username&gt; and then your code worked without any issues."},{"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"score":0,"creation_date":1691504424,"post_id":76854426,"comment_id":135498790,"body_markdown":"You might want to walk a debugger through your code and confirm the path being set does match an existing folder location on your windows system.","body":"You might want to walk a debugger through your code and confirm the path being set does match an existing folder location on your windows system."},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691518562,"post_id":76854426,"comment_id":135501677,"body_markdown":"i added  System.out.println(&quot;Generated file path: &quot; + filePath);\n            File myFile = new File(filePath);\n            System.out.println(myFile.getPath()); and it does print the right directory but i still get this error: java.io.IOException: The system cannot find the path specified","body":"i added  System.out.println(&quot;Generated file path: &quot; + filePath);             File myFile = new File(filePath);             System.out.println(myFile.getPath()); and it does print the right directory but i still get this error: java.io.IOException: The system cannot find the path specified"},{"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"score":0,"creation_date":1691519855,"post_id":76854426,"comment_id":135501917,"body_markdown":"Yes I would expect that prints out the location you are expecting, but have you gone to the file system and confirmed all the directories in that path actually exist?","body":"Yes I would expect that prints out the location you are expecting, but have you gone to the file system and confirmed all the directories in that path actually exist?"},{"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"score":0,"creation_date":1691579264,"post_id":76854426,"comment_id":135509925,"body_markdown":"Thank you so much i figured the problem. The problem was that the desktop location was something like this C:\\Users\\cryptic\\OneDrive\\Desktop . All this time cause of oneDrive lol","body":"Thank you so much i figured the problem. The problem was that the desktop location was something like this C:\\Users\\cryptic\\OneDrive\\Desktop . All this time cause of oneDrive lol"}],"tags":[],"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691437505,"creation_date":1691433997,"answer_id":76854426,"question_id":76854056,"body_markdown":"You are missing one bracket in your code example, but this code does work. \r\n\r\n```java\r\ntry {\r\n\tString desktopPath = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Desktop&quot;;\r\n\tString filePath = desktopPath + File.separator + &quot;unSorted.txt&quot;;\r\n\r\n\tFile myFile = new File(filePath);\r\n\tif (myFile.createNewFile()) {\r\n\t\tFileWriter myWriter = new FileWriter(filePath);\r\n\t\tRandom rand = new Random();\r\n\t\tfor (int i = 0; i &lt; 500; i++) {\r\n\t\t\tint random = rand.nextInt(1000) + 1;\r\n\t\t\tmyWriter.write(random + System.lineSeparator());\r\n\t\t}\r\n\t\tmyWriter.close();\r\n\t} // missing bracket\r\n\r\n} catch (IOException e) {\r\n\tSystem.err.println(&quot;An error occurred. Please try again.&quot;);\r\n\te.printStackTrace();\r\n}\r\n```\r\n\r\nThe first time you run it you will create a new file at the filepath specified.  The second time you run the code it will detect the file is present and exit out of the if block.  If you are having issues executing please include the error and stacktrace.  If you are not happy with how the code functions, please ask more questions.","title":"How to get file path of desktop and implement on filewriter?","body":"<p>You are missing one bracket in your code example, but this code does work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    String desktopPath = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Desktop&quot;;\n    String filePath = desktopPath + File.separator + &quot;unSorted.txt&quot;;\n\n    File myFile = new File(filePath);\n    if (myFile.createNewFile()) {\n        FileWriter myWriter = new FileWriter(filePath);\n        Random rand = new Random();\n        for (int i = 0; i &lt; 500; i++) {\n            int random = rand.nextInt(1000) + 1;\n            myWriter.write(random + System.lineSeparator());\n        }\n        myWriter.close();\n    } // missing bracket\n\n} catch (IOException e) {\n    System.err.println(&quot;An error occurred. Please try again.&quot;);\n    e.printStackTrace();\n}\n</code></pre>\n<p>The first time you run it you will create a new file at the filepath specified.  The second time you run the code it will detect the file is present and exit out of the if block.  If you are having issues executing please include the error and stacktrace.  If you are not happy with how the code functions, please ask more questions.</p>\n"},{"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1691580829,"post_id":76855252,"comment_id":135510220,"body_markdown":"+1 for using java.nio classes which are better and give more informative error messages, such as the name of the attempted file, so the OP can see why it couldn&#39;t create that file.","body":"+1 for using java.nio classes which are better and give more informative error messages, such as the name of the attempted file, so the OP can see why it couldn&#39;t create that file."}],"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691443464,"creation_date":1691443464,"answer_id":76855252,"question_id":76854056,"body_markdown":"You can tighten that up somewhat and also make it simpler. This will produce a new file if it exists or create one from scratch if the numbers file is absent:\r\n\r\n```\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Files;\r\nimport java.util.Random;\r\nimport java.io.PrintWriter;\r\n\r\npublic class RandomWriter {\r\n    public static void main(String[] args) throws Exception {\r\n        Path p = Path.of(\r\n                System.getProperty(&quot;user.home&quot;),\r\n                &quot;Desktop&quot;,\r\n                &quot;unSorted.txt&quot;);\r\n        Random rand = new Random();\r\n        try (PrintWriter out = new PrintWriter(Files.newBufferedWriter(p))) {\r\n            for (int i = 0; i &lt; 500; i++) {\r\n                out.println(rand.nextInt(1000) + 1);\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"How to get file path of desktop and implement on filewriter?","body":"<p>You can tighten that up somewhat and also make it simpler. This will produce a new file if it exists or create one from scratch if the numbers file is absent:</p>\n<pre><code>import java.nio.file.Path;\nimport java.nio.file.Files;\nimport java.util.Random;\nimport java.io.PrintWriter;\n\npublic class RandomWriter {\n    public static void main(String[] args) throws Exception {\n        Path p = Path.of(\n                System.getProperty(&quot;user.home&quot;),\n                &quot;Desktop&quot;,\n                &quot;unSorted.txt&quot;);\n        Random rand = new Random();\n        try (PrintWriter out = new PrintWriter(Files.newBufferedWriter(p))) {\n            for (int i = 0; i &lt; 500; i++) {\n                out.println(rand.nextInt(1000) + 1);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691579406,"creation_date":1691579406,"answer_id":76867196,"question_id":76854056,"body_markdown":"Print the location of the file being generated and copy and paste that file path location on your file explorer and the rest is common sense.\r\n","title":"How to get file path of desktop and implement on filewriter?","body":"<p>Print the location of the file being generated and copy and paste that file path location on your file explorer and the rest is common sense.</p>\n"}],"owner":{"account_id":28898744,"reputation":19,"user_id":22134196,"display_name":"Jackdart"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1691579406,"creation_date":1691430501,"question_id":76854056,"body_markdown":"In short what I am trying to do is create a file which is called unSorted.txt and then put random number in it but I want the file to be saved in the desktop. I get an error that says file not found everytime i try to implement filepath(please see code for more reference) in the filewriter.\r\n\r\n```java\r\ntry {\r\n\tString desktopPath = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Desktop&quot;;\r\n\tString filePath = desktopPath + File.separator + &quot;unSorted.txt&quot;;\r\n\r\n\tFile myFile = new File(filePath);\r\n\tif (myFile.createNewFile()) {\r\n\t\tFileWriter myWriter = new FileWriter(filePath);\r\n\t\tRandom rand = new Random();\r\n\t\tfor (int i = 0; i &lt; 500; i++) {\r\n\t\t\tint random = rand.nextInt(1000) + 1;\r\n\t\t\tmyWriter.write(random + System.lineSeparator());\r\n\t\t}\r\n\t\tmyWriter.close();\r\n\t}\r\n\r\n} catch (IOException e) {\r\n\tSystem.err.println(&quot;An error occurred. Please try again.&quot;);\r\n\te.printStackTrace();\r\n}\r\n```\r\n\r\n\r\nAs you can see from the code, I have implemented File myFile = myFile since the error i get from filewriter is file not found so i decided to create the file first \r\n\r\nHere is the error that i am getting:\r\n````\r\n    An error occurred. Please try again.\r\njava.io.IOException: The system cannot find the path specified\r\n\tat java.base/java.io.WinNTFileSystem.createFileExclusively0(Native Method)\r\n\tat java.base/java.io.WinNTFileSystem.createFileExclusively(WinNTFileSystem.java:645)\r\n\tat java.base/java.io.File.createNewFile(File.java:1045)\r\n\tat AlgorithmUI.generateUnsortedClicked(AlgorithmUI.java:125)\r\n\tat AlgorithmUI$3.actionPerformed(AlgorithmUI.java:91)\r\n\tat java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\r\n\tat java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)\r\n\tat java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)\r\n\tat java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\r\n\tat java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\r\n\tat java.desktop/java.awt.Component.processMouseEvent(Component.java:6620)\r\n\tat java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3398)\r\n\tat java.desktop/java.awt.Component.processEvent(Component.java:6385)\r\n\tat java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n\tat java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4995)\r\n\tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n\tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\r\n\tat java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\r\n\tat java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\r\n\tat java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\r\n\tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\r\n\tat java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n\tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)\r\n\tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\r\n\tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n\r\n`````\r\n\r\nI have added the full code which may help us better understand the problem.\r\n\r\n`````\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.*;\r\nimport java.util.Random;\r\n\r\npublic class AlgorithmUI {\r\n    private JButton bSort;\r\n    private JPanel panel;\r\n    private JFrame frame;\r\n\r\n    public AlgorithmUI() {\r\n        frame = new JFrame(&quot;Algorithm&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setSize(500, 500);\r\n\r\n        bSort = new JButton(&quot;Sort&quot;);\r\n        JButton bSearch = new JButton(&quot;Search&quot;);\r\n\r\n        Dimension buttonSize = new Dimension(120, 50);\r\n        bSort.setPreferredSize(buttonSize);\r\n        bSearch.setPreferredSize(buttonSize);\r\n\r\n        GridBagConstraints gbc = new GridBagConstraints();\r\n        gbc.gridx = 0;\r\n        gbc.gridy = 0;\r\n        gbc.insets = new Insets(10, 10, 10, 10);\r\n        gbc.anchor = GridBagConstraints.CENTER;\r\n\r\n        panel = new JPanel(new GridBagLayout());\r\n        panel.add(bSort, gbc);\r\n        gbc.gridy = 1;\r\n        panel.add(bSearch, gbc);\r\n\r\n        frame.getContentPane().add(panel);\r\n\r\n        frame.setVisible(true);\r\n\r\n        // Event listeners\r\n        bSort.addActionListener(e -&gt; clickedSort());\r\n    }\r\n\r\n    private void removeContent() {\r\n        panel.removeAll();\r\n        panel.revalidate();\r\n        panel.repaint();\r\n    }\r\n\r\n    private void clickedSort() {\r\n        removeContent();\r\n\r\n        JButton openFile = new JButton(&quot;Open unSorted File&quot;);\r\n        JButton generateUnsorted = new JButton(&quot;Generate Unsorted Numbers&quot;);\r\n\r\n        GridBagConstraints newgbc = new GridBagConstraints();\r\n        newgbc.gridx = 0;\r\n        newgbc.gridy = 0;\r\n        newgbc.insets = new Insets(10, 10, 10, 10);\r\n        newgbc.anchor = GridBagConstraints.CENTER;\r\n\r\n        panel.setLayout(new GridBagLayout());\r\n        panel.add(openFile, newgbc);\r\n        newgbc.gridy = 1;\r\n        panel.add(generateUnsorted, newgbc);\r\n\r\n        panel.revalidate();\r\n        panel.repaint();\r\n\r\n        openFile.addActionListener(e -&gt; openFileClicked());\r\n        generateUnsorted.addActionListener(e -&gt; generateUnsortedClicked());\r\n    }\r\n\r\n    private void openFileClicked() {\r\n        JFileChooser fileChooser = new JFileChooser();\r\n        int choice = fileChooser.showOpenDialog(panel);\r\n        try {\r\n            if (choice == JFileChooser.APPROVE_OPTION) {\r\n                File selectedFile = fileChooser.getSelectedFile();\r\n\r\n                try (BufferedReader reader = new BufferedReader(new FileReader(selectedFile))) {\r\n                    String line;\r\n                    while ((line = reader.readLine()) != null) {\r\n                        System.out.println(line);\r\n                    }\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void generateUnsortedClicked() {\r\n        try {\r\n            StringBuilder sb = new StringBuilder();\r\n            sb.append(System.getProperty(&quot;user.home&quot;))\r\n                    .append(File.separator)\r\n                    .append(&quot;Desktop&quot;)\r\n                    .append(File.separator)\r\n                    .append(&quot;unSorted.txt&quot;);\r\n\r\n            String filePath = sb.toString();\r\n            System.out.println(&quot;Generated file path: &quot; + filePath);\r\n\r\n            File myFile = new File(filePath);\r\n            System.out.println(myFile.getPath());\r\n            if (myFile.createNewFile()) {\r\n                FileWriter myWriter = new FileWriter(filePath);\r\n                Random rand = new Random();\r\n                for (int i = 0; i &lt; 500; i++) {\r\n                    int random = rand.nextInt(1000) + 1;\r\n                    myWriter.write(random + System.lineSeparator());\r\n                }\r\n\r\n\r\n                JOptionPane.showMessageDialog(null, &quot;Generated 500 unsorted integers. Please check your desktop for the file.&quot;);\r\n            } else {\r\n                JOptionPane.showMessageDialog(null, &quot;File already exists. Please delete or rename the existing file before generating a new one.&quot;);\r\n            }\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;An error occurred. Please try again.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n        public static void main (String[]args){\r\n            SwingUtilities.invokeLater(AlgorithmUI::new);\r\n        }\r\n    }\r\n`````\r\n","title":"How to get file path of desktop and implement on filewriter?","body":"<p>In short what I am trying to do is create a file which is called unSorted.txt and then put random number in it but I want the file to be saved in the desktop. I get an error that says file not found everytime i try to implement filepath(please see code for more reference) in the filewriter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    String desktopPath = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Desktop&quot;;\n    String filePath = desktopPath + File.separator + &quot;unSorted.txt&quot;;\n\n    File myFile = new File(filePath);\n    if (myFile.createNewFile()) {\n        FileWriter myWriter = new FileWriter(filePath);\n        Random rand = new Random();\n        for (int i = 0; i &lt; 500; i++) {\n            int random = rand.nextInt(1000) + 1;\n            myWriter.write(random + System.lineSeparator());\n        }\n        myWriter.close();\n    }\n\n} catch (IOException e) {\n    System.err.println(&quot;An error occurred. Please try again.&quot;);\n    e.printStackTrace();\n}\n</code></pre>\n<p>As you can see from the code, I have implemented File myFile = myFile since the error i get from filewriter is file not found so i decided to create the file first</p>\n<p>Here is the error that i am getting:</p>\n<pre><code>    An error occurred. Please try again.\njava.io.IOException: The system cannot find the path specified\n    at java.base/java.io.WinNTFileSystem.createFileExclusively0(Native Method)\n    at java.base/java.io.WinNTFileSystem.createFileExclusively(WinNTFileSystem.java:645)\n    at java.base/java.io.File.createNewFile(File.java:1045)\n    at AlgorithmUI.generateUnsortedClicked(AlgorithmUI.java:125)\n    at AlgorithmUI$3.actionPerformed(AlgorithmUI.java:91)\n    at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\n    at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2314)\n    at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:407)\n    at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\n    at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\n    at java.desktop/java.awt.Component.processMouseEvent(Component.java:6620)\n    at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3398)\n    at java.desktop/java.awt.Component.processEvent(Component.java:6385)\n    at java.desktop/java.awt.Container.processEvent(Container.java:2266)\n    at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4995)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\n    at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\n    at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\n    at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\n    at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4827)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:98)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:87)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n\n</code></pre>\n<p>I have added the full code which may help us better understand the problem.</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.*;\nimport java.util.Random;\n\npublic class AlgorithmUI {\n    private JButton bSort;\n    private JPanel panel;\n    private JFrame frame;\n\n    public AlgorithmUI() {\n        frame = new JFrame(&quot;Algorithm&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(500, 500);\n\n        bSort = new JButton(&quot;Sort&quot;);\n        JButton bSearch = new JButton(&quot;Search&quot;);\n\n        Dimension buttonSize = new Dimension(120, 50);\n        bSort.setPreferredSize(buttonSize);\n        bSearch.setPreferredSize(buttonSize);\n\n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        gbc.insets = new Insets(10, 10, 10, 10);\n        gbc.anchor = GridBagConstraints.CENTER;\n\n        panel = new JPanel(new GridBagLayout());\n        panel.add(bSort, gbc);\n        gbc.gridy = 1;\n        panel.add(bSearch, gbc);\n\n        frame.getContentPane().add(panel);\n\n        frame.setVisible(true);\n\n        // Event listeners\n        bSort.addActionListener(e -&gt; clickedSort());\n    }\n\n    private void removeContent() {\n        panel.removeAll();\n        panel.revalidate();\n        panel.repaint();\n    }\n\n    private void clickedSort() {\n        removeContent();\n\n        JButton openFile = new JButton(&quot;Open unSorted File&quot;);\n        JButton generateUnsorted = new JButton(&quot;Generate Unsorted Numbers&quot;);\n\n        GridBagConstraints newgbc = new GridBagConstraints();\n        newgbc.gridx = 0;\n        newgbc.gridy = 0;\n        newgbc.insets = new Insets(10, 10, 10, 10);\n        newgbc.anchor = GridBagConstraints.CENTER;\n\n        panel.setLayout(new GridBagLayout());\n        panel.add(openFile, newgbc);\n        newgbc.gridy = 1;\n        panel.add(generateUnsorted, newgbc);\n\n        panel.revalidate();\n        panel.repaint();\n\n        openFile.addActionListener(e -&gt; openFileClicked());\n        generateUnsorted.addActionListener(e -&gt; generateUnsortedClicked());\n    }\n\n    private void openFileClicked() {\n        JFileChooser fileChooser = new JFileChooser();\n        int choice = fileChooser.showOpenDialog(panel);\n        try {\n            if (choice == JFileChooser.APPROVE_OPTION) {\n                File selectedFile = fileChooser.getSelectedFile();\n\n                try (BufferedReader reader = new BufferedReader(new FileReader(selectedFile))) {\n                    String line;\n                    while ((line = reader.readLine()) != null) {\n                        System.out.println(line);\n                    }\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void generateUnsortedClicked() {\n        try {\n            StringBuilder sb = new StringBuilder();\n            sb.append(System.getProperty(&quot;user.home&quot;))\n                    .append(File.separator)\n                    .append(&quot;Desktop&quot;)\n                    .append(File.separator)\n                    .append(&quot;unSorted.txt&quot;);\n\n            String filePath = sb.toString();\n            System.out.println(&quot;Generated file path: &quot; + filePath);\n\n            File myFile = new File(filePath);\n            System.out.println(myFile.getPath());\n            if (myFile.createNewFile()) {\n                FileWriter myWriter = new FileWriter(filePath);\n                Random rand = new Random();\n                for (int i = 0; i &lt; 500; i++) {\n                    int random = rand.nextInt(1000) + 1;\n                    myWriter.write(random + System.lineSeparator());\n                }\n\n\n                JOptionPane.showMessageDialog(null, &quot;Generated 500 unsorted integers. Please check your desktop for the file.&quot;);\n            } else {\n                JOptionPane.showMessageDialog(null, &quot;File already exists. Please delete or rename the existing file before generating a new one.&quot;);\n            }\n        } catch (IOException e) {\n            System.err.println(&quot;An error occurred. Please try again.&quot;);\n            e.printStackTrace();\n        }\n\n    }\n        public static void main (String[]args){\n            SwingUtilities.invokeLater(AlgorithmUI::new);\n        }\n    }\n</code></pre>\n"},{"tags":["java","jdbc","derby"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1691575123,"post_id":76866286,"comment_id":135509075,"body_markdown":"Are you sure your database is called `AnimeFigurineCollection [wimmy on WIMMY]`, and not for example `AnimeFigurineCollection`?","body":"Are you sure your database is called <code>AnimeFigurineCollection [wimmy on WIMMY]</code>, and not for example <code>AnimeFigurineCollection</code>?"},{"owner":{"account_id":29182650,"reputation":1,"user_id":22356459,"display_name":"nick lester"},"score":0,"creation_date":1691577059,"post_id":76866286,"comment_id":135509481,"body_markdown":"is there a difference if the [wimmy on WIMMY] is there or not, im sorry im new in database i still dont know my way around database","body":"is there a difference if the [wimmy on WIMMY] is there or not, im sorry im new in database i still dont know my way around database"}],"answers":[{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1691585535,"post_id":76867188,"comment_id":135511284,"body_markdown":"They aren&#39;t trying to connect to a database called `AnimeFigurineCollection`, but one called `AnimeFigurineCollection [wimmy on WIMMY]`, which is likely the cause of the problem.","body":"They aren&#39;t trying to connect to a database called <code>AnimeFigurineCollection</code>, but one called <code>AnimeFigurineCollection [wimmy on WIMMY]</code>, which is likely the cause of the problem."},{"owner":{"account_id":17799132,"reputation":1,"user_id":13203237,"display_name":"Magno Dev"},"score":0,"creation_date":1691660483,"post_id":76867188,"comment_id":135522661,"body_markdown":"it is generally recommended to avoid using spaces in the names of databases and other database objects. Although some database management systems allow the use of spaces, this practice can cause problems in many situations, such as creating SQL scripts, integrating with other tools, and portability between different systems.","body":"it is generally recommended to avoid using spaces in the names of databases and other database objects. Although some database management systems allow the use of spaces, this practice can cause problems in many situations, such as creating SQL scripts, integrating with other tools, and portability between different systems."}],"tags":[],"owner":{"account_id":17799132,"reputation":1,"user_id":13203237,"display_name":"Magno Dev"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1691579376,"creation_date":1691579376,"answer_id":76867188,"question_id":76866286,"body_markdown":"Check if you have created a database named `AnimeFigurineCollection`","title":"How to fix &quot;java.sql.SQLNonTransientConnectionException: The connection was refused because the database AnimeFigurineCollection was not found. &quot;","body":"<p>Check if you have created a database named <code>AnimeFigurineCollection</code></p>\n"}],"owner":{"account_id":29182650,"reputation":1,"user_id":22356459,"display_name":"nick lester"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691579376,"creation_date":1691572789,"question_id":76866286,"body_markdown":"How can I fix this? This is my code so far\r\n\r\n\r\n```\r\npackage case_study_3;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport javax.swing.JOptionPane;\r\n\r\npublic class CollectionRepository {\r\n    PreparedStatement ps;\r\n    ResultSet rs;\r\n    Connection conn;\r\n\r\n    public CollectionRepository() {\r\n    \r\n    try {\r\n        dbconn();\r\n    } catch (SQLException ex) {\r\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    } catch (ClassNotFoundException ex) {\r\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    }\r\n    try {\r\n        conn.createStatement();\r\n    } catch (SQLException ex) {\r\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    }\r\n    \r\n    }\r\n\r\n   public void dbconn() throws SQLException, ClassNotFoundException {\r\n    String url = &quot;jdbc:derby://localhost:1527/AnimeFigurineCollection [wimmy on WIMMY]&quot;;\r\n    String driver = &quot;org.apache.derby.jdbc.ClientDriver&quot;;\r\n    Class.forName(driver);\r\n    conn = DriverManager.getConnection(url,&quot;wimmy&quot;,&quot;1231&quot;);\r\n\r\n    }//end db conn\r\n    \r\n    public List&lt;Collection&gt; getAllProduct(){\r\n        List&lt;Collection&gt; col = new ArrayList&lt;&gt;();\r\n        \r\n        String queryStr = &quot;Select * From ALBUM&quot;;\r\n    try {\r\n        ps = conn.prepareStatement(queryStr);\r\n        rs = ps.executeQuery();\r\n        while(rs.next()){\r\n            Collection collect = new Collection(rs.getString(&quot;code&quot;),\r\n                    rs.getInt(&quot;registrationNumber&quot;),\r\n                    rs.getInt(&quot;barcode&quot;),\r\n                    rs.getString(&quot;maincharName&quot;),\r\n                    rs.getString(&quot;title&quot;),\r\n                    rs.getString(&quot;version&quot;),\r\n                    rs.getString(&quot;type&quot;));\r\n            col.add(collect);\r\n        }\r\n    } catch (SQLException ex) {\r\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    \r\n    \r\n    }    \r\n    return col;\r\n    \r\n}//end getall\r\n\r\n```\r\nAlso when I add my derbyclient.jar this appears:\r\n\r\n&gt; java.sql.SQLNonTransientConnectionException: The connection was refused because the database AnimeFigurineCollection [wimmy on WIMMY] was not found. &quot;&quot;ERROR 08004: The connection was refused because the database AnimeFigurineCollection [wimmy on WIMMY] was not found.&quot; \r\n\r\nIf I remove it, those two disappears also.","title":"How to fix &quot;java.sql.SQLNonTransientConnectionException: The connection was refused because the database AnimeFigurineCollection was not found. &quot;","body":"<p>How can I fix this? This is my code so far</p>\n<pre><code>package case_study_3;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.JOptionPane;\n\npublic class CollectionRepository {\n    PreparedStatement ps;\n    ResultSet rs;\n    Connection conn;\n\n    public CollectionRepository() {\n    \n    try {\n        dbconn();\n    } catch (SQLException ex) {\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    } catch (ClassNotFoundException ex) {\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    }\n    try {\n        conn.createStatement();\n    } catch (SQLException ex) {\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    }\n    \n    }\n\n   public void dbconn() throws SQLException, ClassNotFoundException {\n    String url = &quot;jdbc:derby://localhost:1527/AnimeFigurineCollection [wimmy on WIMMY]&quot;;\n    String driver = &quot;org.apache.derby.jdbc.ClientDriver&quot;;\n    Class.forName(driver);\n    conn = DriverManager.getConnection(url,&quot;wimmy&quot;,&quot;1231&quot;);\n\n    }//end db conn\n    \n    public List&lt;Collection&gt; getAllProduct(){\n        List&lt;Collection&gt; col = new ArrayList&lt;&gt;();\n        \n        String queryStr = &quot;Select * From ALBUM&quot;;\n    try {\n        ps = conn.prepareStatement(queryStr);\n        rs = ps.executeQuery();\n        while(rs.next()){\n            Collection collect = new Collection(rs.getString(&quot;code&quot;),\n                    rs.getInt(&quot;registrationNumber&quot;),\n                    rs.getInt(&quot;barcode&quot;),\n                    rs.getString(&quot;maincharName&quot;),\n                    rs.getString(&quot;title&quot;),\n                    rs.getString(&quot;version&quot;),\n                    rs.getString(&quot;type&quot;));\n            col.add(collect);\n        }\n    } catch (SQLException ex) {\n        java.util.logging.Logger.getLogger(CollectionRepository.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    \n    \n    }    \n    return col;\n    \n}//end getall\n\n</code></pre>\n<p>Also when I add my derbyclient.jar this appears:</p>\n<blockquote>\n<p>java.sql.SQLNonTransientConnectionException: The connection was refused because the database AnimeFigurineCollection [wimmy on WIMMY] was not found. &quot;&quot;ERROR 08004: The connection was refused because the database AnimeFigurineCollection [wimmy on WIMMY] was not found.&quot;</p>\n</blockquote>\n<p>If I remove it, those two disappears also.</p>\n"},{"tags":["java","xml","validation","xsd"],"answers":[{"comments":[{"owner":{"account_id":105815,"reputation":1198,"user_id":282152,"accept_rate":87,"display_name":"Melanie"},"score":0,"creation_date":1267201410,"post_id":2342859,"comment_id":2315013,"body_markdown":"Thanks a lot for this comprehensive answer! I&#39;ll implement that this afternoon and let you know how it worked. \n\nI do need to create the Schema object since I have no idea how the file that are going to be validated will be built. I don&#39;t want to rely on their declaration.","body":"Thanks a lot for this comprehensive answer! I&#39;ll implement that this afternoon and let you know how it worked.   I do need to create the Schema object since I have no idea how the file that are going to be validated will be built. I don&#39;t want to rely on their declaration."},{"owner":{"account_id":78666,"reputation":2354,"user_id":223717,"display_name":"Stefan De Boey"},"score":1,"creation_date":1267236387,"post_id":2342859,"comment_id":2318395,"body_markdown":"no prob, the sample code is taken from a unit test, so you&#39;ll probably need to change some bits to suit your needs","body":"no prob, the sample code is taken from a unit test, so you&#39;ll probably need to change some bits to suit your needs"},{"owner":{"account_id":105815,"reputation":1198,"user_id":282152,"accept_rate":87,"display_name":"Melanie"},"score":0,"creation_date":1267452502,"post_id":2342859,"comment_id":2330451,"body_markdown":"I&#39;m almost there. Now my the validator does include the included file and the content of the main file. But I have an exception when loading an import file, content not allowed in prolog... It&#39;s with a file that is imported. If I load that file directly (build the schema from it instead of the main), I don&#39;t get this error. Any idea what can cause this kind of exception in that condition?","body":"I&#39;m almost there. Now my the validator does include the included file and the content of the main file. But I have an exception when loading an import file, content not allowed in prolog... It&#39;s with a file that is imported. If I load that file directly (build the schema from it instead of the main), I don&#39;t get this error. Any idea what can cause this kind of exception in that condition?"},{"owner":{"account_id":105815,"reputation":1198,"user_id":282152,"accept_rate":87,"display_name":"Melanie"},"score":0,"creation_date":1267452960,"post_id":2342859,"comment_id":2330512,"body_markdown":"Everything works fine now... I just removed an empty line at the end of my file and that fixed the content not allowed in Prolog exception! Again, thanks a lot!","body":"Everything works fine now... I just removed an empty line at the end of my file and that fixed the content not allowed in Prolog exception! Again, thanks a lot!"},{"owner":{"account_id":2512927,"reputation":140,"user_id":2184955,"accept_rate":57,"display_name":"Atul Rai"},"score":0,"creation_date":1416903968,"post_id":2342859,"comment_id":42744465,"body_markdown":"The documentation says that adding a resourece resolver on the SchemaFactory does not affect the validator.\n\nThis solution is not perfect.\n\nhttps://docs.oracle.com/javase/7/docs/api/javax/xml/validation/SchemaFactory.html#setResourceResolver(org.w3c.dom.ls.LSResourceResolver)","body":"The documentation says that adding a resourece resolver on the SchemaFactory does not affect the validator.  This solution is not perfect.  <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/xml/validation/SchemaFactory.html#setResourceResolver(org.w3c.dom.ls.LSResourceResolver)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/javax/xml/validation/&hellip;</a>"},{"owner":{"account_id":98784,"reputation":10491,"user_id":267197,"accept_rate":68,"display_name":"dma_k"},"score":0,"creation_date":1459341945,"post_id":2342859,"comment_id":60241773,"body_markdown":"The code in `Input#getStringData()` is (1) not correct as it does not handle encoding properly (2) not needed as providing the `InputStream` via `getInputStream()` is enough.","body":"The code in <code>Input#getStringData()</code> is (1) not correct as it does not handle encoding properly (2) not needed as providing the <code>InputStream</code> via <code>getInputStream()</code> is enough."},{"owner":{"account_id":3568325,"reputation":1079,"user_id":2979310,"accept_rate":87,"display_name":"ulab"},"score":0,"creation_date":1469806391,"post_id":2342859,"comment_id":64705998,"body_markdown":"this [answer](http://stackoverflow.com/a/19853877/2979310) resolution is simpler.","body":"this <a href=\"http://stackoverflow.com/a/19853877/2979310\">answer</a> resolution is simpler."},{"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"score":2,"creation_date":1477488320,"post_id":2342859,"comment_id":67787431,"body_markdown":"@ulab just using an `URL` isn&#39;t always the solution. I am using an `URL` in my project, but I still need an `LSResourceResolver`. My best guess, is that your files use import paths relative to your working directory, while my files use import paths relative to the root of my classpath, which are not automatically resolved.","body":"@ulab just using an <code>URL</code> isn&#39;t always the solution. I am using an <code>URL</code> in my project, but I still need an <code>LSResourceResolver</code>. My best guess, is that your files use import paths relative to your working directory, while my files use import paths relative to the root of my classpath, which are not automatically resolved."},{"owner":{"account_id":2464526,"reputation":1549,"user_id":2147927,"accept_rate":100,"display_name":"Line"},"score":1,"creation_date":1501233645,"post_id":2342859,"comment_id":77699764,"body_markdown":"&quot;note: in this sample, the XSD&#39;s are expected to be in the root of the classpath&quot; - could you please describe how to ensure this?","body":"&quot;note: in this sample, the XSD&#39;s are expected to be in the root of the classpath&quot; - could you please describe how to ensure this?"},{"owner":{"account_id":9206187,"reputation":539,"user_id":6841364,"accept_rate":75,"display_name":"dweeb"},"score":0,"creation_date":1544075920,"post_id":2342859,"comment_id":94149456,"body_markdown":"I&#39;m definitely not understanding what is meant by `     // note: in this sample, the XSD&#39;s are expected to be in the root of the classpath` I&#39;m getting the console message stating it can&#39;t find &#39;second.xsd&#39; file which means it finds the first one. What am I missing in order to get it to point to the imported one? Thanks","body":"I&#39;m definitely not understanding what is meant by `     // note: in this sample, the XSD&#39;s are expected to be in the root of the classpath` I&#39;m getting the console message stating it can&#39;t find &#39;second.xsd&#39; file which means it finds the first one. What am I missing in order to get it to point to the imported one? Thanks"}],"tags":[],"owner":{"account_id":78666,"reputation":2354,"user_id":223717,"display_name":"Stefan De Boey"},"comment_count":10,"down_vote_count":1,"up_vote_count":66,"is_accepted":true,"score":65,"last_activity_date":1267200738,"creation_date":1267199821,"answer_id":2342859,"question_id":2342808,"body_markdown":"you need to use an [LSResourceResolver][1] for this to work. please take a look at the sample code below.\r\n\r\na validate method:\r\n\r\n    // note that if your XML already declares the XSD to which it has to conform, then there&#39;s no need to declare the schemaName here\r\n    void validate(String xml, String schemaName) throws Exception {\r\n\r\n\t\tDocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\r\n\t\tbuilderFactory.setNamespaceAware(true);\r\n\t\t\r\n\t\tDocumentBuilder parser = builderFactory\r\n\t\t\t\t.newDocumentBuilder();\r\n\t\t\r\n        // parse the XML into a document object\r\n\t\tDocument document = parser.parse(new StringInputStream(xml));\r\n\r\n\t\tSchemaFactory factory = SchemaFactory\r\n\t\t\t\t.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n\r\n        // associate the schema factory with the resource resolver, which is responsible for resolving the imported XSD&#39;s\r\n\t\tfactory.setResourceResolver(new ResourceResolver());\r\n\r\n                // note that if your XML already declares the XSD to which it has to conform, then there&#39;s no need to create a validator from a Schema object\r\n\t\tSource schemaFile = new StreamSource(getClass().getClassLoader()\r\n\t\t\t\t.getResourceAsStream(schemaName));\r\n\t\tSchema schema = factory.newSchema(schemaFile);\r\n\r\n\t\tValidator validator = schema.newValidator();\r\n\t\tvalidator.validate(new DOMSource(document));\r\n\t}\r\n\r\n\r\n\r\nthe resource resolver implementation:\r\n\r\n    public class ResourceResolver  implements LSResourceResolver {\r\n\r\n\tpublic LSInput resolveResource(String type, String namespaceURI,\r\n\t\t\tString publicId, String systemId, String baseURI) {\r\n                \r\n         // note: in this sample, the XSD&#39;s are expected to be in the root of the classpath\r\n\t\tInputStream resourceAsStream = this.getClass().getClassLoader()\r\n\t\t\t\t.getResourceAsStream(systemId);\r\n\t\treturn new Input(publicId, systemId, resourceAsStream);\r\n\t}\r\n\r\n     }\r\n\r\n\r\nThe Input implemetation returned by the resource resolver:\r\n\r\n\r\n    public class Input implements LSInput {\r\n\r\n\tprivate String publicId;\r\n\r\n\tprivate String systemId;\r\n\r\n\tpublic String getPublicId() {\r\n\t\treturn publicId;\r\n\t}\r\n\r\n\tpublic void setPublicId(String publicId) {\r\n\t\tthis.publicId = publicId;\r\n\t}\r\n\r\n\tpublic String getBaseURI() {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic InputStream getByteStream() {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic boolean getCertifiedText() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic Reader getCharacterStream() {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic String getEncoding() {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic String getStringData() {\r\n\t\tsynchronized (inputStream) {\r\n\t\t\ttry {\r\n\t\t\t\tbyte[] input = new byte[inputStream.available()];\r\n\t\t\t\tinputStream.read(input);\r\n\t\t\t\tString contents = new String(input);\r\n\t\t\t\treturn contents;\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\tSystem.out.println(&quot;Exception &quot; + e);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void setBaseURI(String baseURI) {\r\n\t}\r\n\r\n\tpublic void setByteStream(InputStream byteStream) {\r\n\t}\r\n\r\n\tpublic void setCertifiedText(boolean certifiedText) {\r\n\t}\r\n\r\n\tpublic void setCharacterStream(Reader characterStream) {\r\n\t}\r\n\r\n\tpublic void setEncoding(String encoding) {\r\n\t}\r\n\r\n\tpublic void setStringData(String stringData) {\r\n\t}\r\n\r\n\tpublic String getSystemId() {\r\n\t\treturn systemId;\r\n\t}\r\n\r\n\tpublic void setSystemId(String systemId) {\r\n\t\tthis.systemId = systemId;\r\n\t}\r\n\r\n\tpublic BufferedInputStream getInputStream() {\r\n\t\treturn inputStream;\r\n\t}\r\n\r\n\tpublic void setInputStream(BufferedInputStream inputStream) {\r\n\t\tthis.inputStream = inputStream;\r\n\t}\r\n\r\n\tprivate BufferedInputStream inputStream;\r\n\r\n\tpublic Input(String publicId, String sysId, InputStream input) {\r\n\t\tthis.publicId = publicId;\r\n\t\tthis.systemId = sysId;\r\n\t\tthis.inputStream = new BufferedInputStream(input);\r\n\t}\r\n    }\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/jre/api/plugin/dom/org/w3c/dom/ls/LSResourceResolver.html","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>you need to use an <a href=\"http://java.sun.com/javase/6/docs/jre/api/plugin/dom/org/w3c/dom/ls/LSResourceResolver.html\" rel=\"noreferrer\">LSResourceResolver</a> for this to work. please take a look at the sample code below.</p>\n\n<p>a validate method:</p>\n\n<pre><code>// note that if your XML already declares the XSD to which it has to conform, then there's no need to declare the schemaName here\nvoid validate(String xml, String schemaName) throws Exception {\n\n    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\n    builderFactory.setNamespaceAware(true);\n\n    DocumentBuilder parser = builderFactory\n            .newDocumentBuilder();\n\n    // parse the XML into a document object\n    Document document = parser.parse(new StringInputStream(xml));\n\n    SchemaFactory factory = SchemaFactory\n            .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n\n    // associate the schema factory with the resource resolver, which is responsible for resolving the imported XSD's\n    factory.setResourceResolver(new ResourceResolver());\n\n            // note that if your XML already declares the XSD to which it has to conform, then there's no need to create a validator from a Schema object\n    Source schemaFile = new StreamSource(getClass().getClassLoader()\n            .getResourceAsStream(schemaName));\n    Schema schema = factory.newSchema(schemaFile);\n\n    Validator validator = schema.newValidator();\n    validator.validate(new DOMSource(document));\n}\n</code></pre>\n\n<p>the resource resolver implementation:</p>\n\n<pre><code>public class ResourceResolver  implements LSResourceResolver {\n\npublic LSInput resolveResource(String type, String namespaceURI,\n        String publicId, String systemId, String baseURI) {\n\n     // note: in this sample, the XSD's are expected to be in the root of the classpath\n    InputStream resourceAsStream = this.getClass().getClassLoader()\n            .getResourceAsStream(systemId);\n    return new Input(publicId, systemId, resourceAsStream);\n}\n\n }\n</code></pre>\n\n<p>The Input implemetation returned by the resource resolver:</p>\n\n<pre><code>public class Input implements LSInput {\n\nprivate String publicId;\n\nprivate String systemId;\n\npublic String getPublicId() {\n    return publicId;\n}\n\npublic void setPublicId(String publicId) {\n    this.publicId = publicId;\n}\n\npublic String getBaseURI() {\n    return null;\n}\n\npublic InputStream getByteStream() {\n    return null;\n}\n\npublic boolean getCertifiedText() {\n    return false;\n}\n\npublic Reader getCharacterStream() {\n    return null;\n}\n\npublic String getEncoding() {\n    return null;\n}\n\npublic String getStringData() {\n    synchronized (inputStream) {\n        try {\n            byte[] input = new byte[inputStream.available()];\n            inputStream.read(input);\n            String contents = new String(input);\n            return contents;\n        } catch (IOException e) {\n            e.printStackTrace();\n            System.out.println(\"Exception \" + e);\n            return null;\n        }\n    }\n}\n\npublic void setBaseURI(String baseURI) {\n}\n\npublic void setByteStream(InputStream byteStream) {\n}\n\npublic void setCertifiedText(boolean certifiedText) {\n}\n\npublic void setCharacterStream(Reader characterStream) {\n}\n\npublic void setEncoding(String encoding) {\n}\n\npublic void setStringData(String stringData) {\n}\n\npublic String getSystemId() {\n    return systemId;\n}\n\npublic void setSystemId(String systemId) {\n    this.systemId = systemId;\n}\n\npublic BufferedInputStream getInputStream() {\n    return inputStream;\n}\n\npublic void setInputStream(BufferedInputStream inputStream) {\n    this.inputStream = inputStream;\n}\n\nprivate BufferedInputStream inputStream;\n\npublic Input(String publicId, String sysId, InputStream input) {\n    this.publicId = publicId;\n    this.systemId = sysId;\n    this.inputStream = new BufferedInputStream(input);\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4089780,"reputation":1489,"user_id":3358126,"accept_rate":44,"display_name":"Pavel Niedoba"},"score":4,"creation_date":1435238616,"post_id":3659353,"comment_id":50124273,"body_markdown":"This will not validate against schema importing another one","body":"This will not validate against schema importing another one"}],"tags":[],"owner":{"account_id":197433,"reputation":79,"user_id":441510,"display_name":"valerian"},"comment_count":1,"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1366295729,"creation_date":1283868291,"answer_id":3659353,"question_id":2342808,"body_markdown":"\tSchemaFactory schemaFactory = SchemaFactory\r\n\t\t\t\t\t\t\t\t\t.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n\tSource schemaFile = new StreamSource(getClass().getClassLoader()\r\n\t\t\t\t\t\t\t\t\t.getResourceAsStream(&quot;cars-fleet.xsd&quot;));\r\n\tSchema schema = schemaFactory.newSchema(schemaFile);\r\n\tValidator validator = schema.newValidator();\r\n\tStreamSource source = new StreamSource(xml);\r\n\tvalidator.validate(source);\r\n\t","title":"How to validate an XML file using Java with an XSD having an include?","body":"<pre><code>SchemaFactory schemaFactory = SchemaFactory\n                                .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\nSource schemaFile = new StreamSource(getClass().getClassLoader()\n                                .getResourceAsStream(\"cars-fleet.xsd\"));\nSchema schema = schemaFactory.newSchema(schemaFile);\nValidator validator = schema.newValidator();\nStreamSource source = new StreamSource(xml);\nvalidator.validate(source);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3831719,"reputation":1,"user_id":3177126,"display_name":"AMegmondoEmber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389847986,"creation_date":1389847986,"answer_id":21153587,"question_id":2342808,"body_markdown":"For us the resolveResource looked like this. After some prolog exception and weird \r\nElement type &quot;xs:schema&quot; must be followed by either attribute specifications, &quot;&gt;&quot; or &quot;/&gt;&quot;.\r\nElement type &quot;xs:element&quot; must be followed by either attribute specifications, &quot;&gt;&quot; or &quot;/&gt;&quot;.\r\n(because of the breakdown of multiple lines)\r\n\r\nThe path history was needed because of the structure of includes\r\n\r\n    main.xsd (this has include &quot;includes/subPart.xsd&quot;)\r\n    /includes/subPart.xsd (this has include &quot;./subSubPart.xsd&quot;)\r\n    /includes/subSubPart.xsd\r\n\r\n\r\nSo the code looks like:\r\n   \r\n\t\r\n    String pathHistory = &quot;&quot;;\r\n\r\n    @Override\r\n    public LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId, String baseURI) {\r\n    \tsystemId = systemId.replace(&quot;./&quot;, &quot;&quot;);// we dont need this since getResourceAsStream cannot understand it\r\n    \tInputStream resourceAsStream = Message.class.getClassLoader().getResourceAsStream(systemId);\r\n    \tif (resourceAsStream == null) {\r\n    \t\tresourceAsStream = Message.class.getClassLoader().getResourceAsStream(pathHistory + systemId);\r\n    \t} else {\r\n    \t\tpathHistory = getNormalizedPath(systemId);\r\n    \t}\r\n        Scanner s = new Scanner(resourceAsStream).useDelimiter(&quot;\\\\A&quot;);\r\n        String s1 = s.next()\r\n        \t\t.replaceAll(&quot;\\\\n&quot;,&quot; &quot;) //the parser cannot understand elements broken down multiple lines e.g. (&lt;xs:element \\n name=&quot;buxing&quot;&gt;) \r\n        \t\t.replace(&quot;\\\\t&quot;, &quot; &quot;) //these two about whitespaces is only for decoration\r\n        \t\t.replaceAll(&quot;\\\\s+&quot;, &quot; &quot;) \r\n        \t\t.replaceAll(&quot;[^\\\\x20-\\\\x7e]&quot;, &quot;&quot;); //some files has a special character as a first character indicating utf-8 file\r\n        InputStream is = new ByteArrayInputStream(s1.getBytes());\r\n        \r\n        return new LSInputImpl(publicId, systemId, is);\r\n    }\r\n    \r\n    private String getNormalizedPath(String baseURI) {\r\n\t\treturn baseURI.substring(0, baseURI.lastIndexOf(System.getProperty(&quot;file.separator&quot;))+ 1) ;\r\n\t}\r\n","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>For us the resolveResource looked like this. After some prolog exception and weird \nElement type \"xs:schema\" must be followed by either attribute specifications, \">\" or \"/>\".\nElement type \"xs:element\" must be followed by either attribute specifications, \">\" or \"/>\".\n(because of the breakdown of multiple lines)</p>\n\n<p>The path history was needed because of the structure of includes</p>\n\n<pre><code>main.xsd (this has include \"includes/subPart.xsd\")\n/includes/subPart.xsd (this has include \"./subSubPart.xsd\")\n/includes/subSubPart.xsd\n</code></pre>\n\n<p>So the code looks like:</p>\n\n<pre><code>String pathHistory = \"\";\n\n@Override\npublic LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId, String baseURI) {\n    systemId = systemId.replace(\"./\", \"\");// we dont need this since getResourceAsStream cannot understand it\n    InputStream resourceAsStream = Message.class.getClassLoader().getResourceAsStream(systemId);\n    if (resourceAsStream == null) {\n        resourceAsStream = Message.class.getClassLoader().getResourceAsStream(pathHistory + systemId);\n    } else {\n        pathHistory = getNormalizedPath(systemId);\n    }\n    Scanner s = new Scanner(resourceAsStream).useDelimiter(\"\\\\A\");\n    String s1 = s.next()\n            .replaceAll(\"\\\\n\",\" \") //the parser cannot understand elements broken down multiple lines e.g. (&lt;xs:element \\n name=\"buxing\"&gt;) \n            .replace(\"\\\\t\", \" \") //these two about whitespaces is only for decoration\n            .replaceAll(\"\\\\s+\", \" \") \n            .replaceAll(\"[^\\\\x20-\\\\x7e]\", \"\"); //some files has a special character as a first character indicating utf-8 file\n    InputStream is = new ByteArrayInputStream(s1.getBytes());\n\n    return new LSInputImpl(publicId, systemId, is);\n}\n\nprivate String getNormalizedPath(String baseURI) {\n    return baseURI.substring(0, baseURI.lastIndexOf(System.getProperty(\"file.separator\"))+ 1) ;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1279401,"reputation":1190,"user_id":1233877,"accept_rate":60,"display_name":"Ramakrishna"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1393236360,"creation_date":1393236360,"answer_id":21984486,"question_id":2342808,"body_markdown":"If you wont find an element in xml you will get xml:lang exception. \r\nElements are case sensitive","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>If you wont find an element in xml you will get xml:lang exception. \nElements are case sensitive</p>\n"},{"comments":[{"owner":{"account_id":361836,"reputation":2367,"user_id":704681,"accept_rate":89,"display_name":"A. Masson"},"score":1,"creation_date":1417106136,"post_id":22540905,"comment_id":42839968,"body_markdown":"Thanks for sharing :-) I confirm that this has worked for us since first xsd import other xsd using relative paths like ../../otherSchema.xsd","body":"Thanks for sharing :-) I confirm that this has worked for us since first xsd import other xsd using relative paths like ../../otherSchema.xsd"},{"owner":{"account_id":3240240,"reputation":617,"user_id":2733462,"display_name":"burcakulug"},"score":1,"creation_date":1455296810,"post_id":22540905,"comment_id":58442518,"body_markdown":"the `Input` in this answer http://stackoverflow.com/a/2342859/2733462 is pretty much it, only thing I would recommend is to modify `public String getStringData()` in a way that it can handle reading large schema files, so it will be more resilient.","body":"the <code>Input</code> in this answer <a href=\"http://stackoverflow.com/a/2342859/2733462\">stackoverflow.com/a/2342859/2733462</a> is pretty much it, only thing I would recommend is to modify <code>public String getStringData()</code> in a way that it can handle reading large schema files, so it will be more resilient."},{"owner":{"account_id":7219924,"reputation":910,"user_id":5955376,"accept_rate":100,"display_name":"nllsdfx"},"score":0,"creation_date":1530103458,"post_id":22540905,"comment_id":89116021,"body_markdown":"Premature end of file when it parses dependencies :(","body":"Premature end of file when it parses dependencies :("}],"tags":[],"owner":{"account_id":3240240,"reputation":617,"user_id":2733462,"display_name":"burcakulug"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1666879799,"creation_date":1395336965,"answer_id":22540905,"question_id":2342808,"body_markdown":"I had to make some modifications to [this post][1] by AMegmondoEmber\r\n\r\nMy main schema file had some includes from sibling folders, and the included files also had some includes from their local folders. I also had to track down the base resource path and relative path of the current resource. This code works for me now, but please keep in mind that it assumes all xsd files have a unique name. If you have some xsd files with same name, but different content at different paths, it will probably give you problems.\r\n\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.InputStream;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Scanner;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.w3c.dom.ls.LSInput;\r\n    import org.w3c.dom.ls.LSResourceResolver;\r\n    \r\n    /**\r\n     * The Class ResourceResolver.\r\n     */\r\n    public class ResourceResolver implements LSResourceResolver {\r\n    \t\r\n    \t/** The logger. */\r\n    \tprivate final Logger logger = LoggerFactory.getLogger(this.getClass());\r\n    \t\r\n    \t/** The schema base path. */\r\n    \tprivate final String schemaBasePath;\r\n    \t\r\n    \t/** The path map. */\r\n    \tprivate Map&lt;String, String&gt; pathMap = new HashMap&lt;String, String&gt;();\r\n    \r\n    \t/**\r\n    \t * Instantiates a new resource resolver.\r\n    \t *\r\n    \t * @param schemaBasePath the schema base path\r\n    \t */\r\n    \tpublic ResourceResolver(String schemaBasePath) {\r\n    \t\tthis.schemaBasePath = schemaBasePath;\r\n    \t\tlogger.warn(&quot;This LSResourceResolver implementation assumes that all XSD files have a unique name. &quot;\r\n    \t\t\t\t+ &quot;If you have some XSD files with same name but different content (at different paths) in your schema structure, &quot;\r\n    \t\t\t\t+ &quot;this resolver will fail to include the other XSD files except the first one found.&quot;);\r\n    \t}\r\n    \r\n    \t/* (non-Javadoc)\r\n    \t * @see org.w3c.dom.ls.LSResourceResolver#resolveResource(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)\r\n    \t */\r\n    \t@Override\r\n    \tpublic LSInput resolveResource(String type, String namespaceURI,\r\n    \t\t\tString publicId, String systemId, String baseURI) {\r\n    \t\t// The base resource that includes this current resource\r\n    \t\tString baseResourceName = null;\r\n    \t\tString baseResourcePath = null;\r\n    \t\t// Extract the current resource name\r\n    \t\tString currentResourceName = systemId.substring(systemId\r\n    \t\t\t\t.lastIndexOf(&quot;/&quot;) + 1);\r\n    \r\n    \t\t// If this resource hasn&#39;t been added yet\r\n    \t\tif (!pathMap.containsKey(currentResourceName)) {\r\n    \t\t\tif (baseURI != null) {\r\n    \t\t\t\tbaseResourceName = baseURI\r\n    \t\t\t\t\t\t.substring(baseURI.lastIndexOf(&quot;/&quot;) + 1);\r\n    \t\t\t}\r\n    \r\n    \t\t\t// we dont need &quot;./&quot; since getResourceAsStream cannot understand it\r\n    \t\t\tif (systemId.startsWith(&quot;./&quot;)) {\r\n    \t\t\t\tsystemId = systemId.substring(2, systemId.length());\r\n    \t\t\t}\r\n    \r\n    \t\t\t// If the baseResourcePath has already been discovered, get that\r\n    \t\t\t// from pathMap\r\n    \t\t\tif (pathMap.containsKey(baseResourceName)) {\r\n    \t\t\t\tbaseResourcePath = pathMap.get(baseResourceName);\r\n    \t\t\t} else {\r\n    \t\t\t\t// The baseResourcePath should be the schemaBasePath\r\n    \t\t\t\tbaseResourcePath = schemaBasePath;\r\n    \t\t\t}\r\n    \r\n    \t\t\t// Read the resource as input stream\r\n    \t\t\tString normalizedPath = getNormalizedPath(baseResourcePath, systemId);\r\n    \t\t\tInputStream resourceAsStream = this.getClass().getClassLoader()\r\n    \t\t\t\t\t.getResourceAsStream(normalizedPath);\r\n    \r\n    \t\t\t// if the current resource is not in the same path with base\r\n    \t\t\t// resource, add current resource&#39;s path to pathMap\r\n    \t\t\tif (systemId.contains(&quot;/&quot;)) {\r\n    \t\t\t\tpathMap.put(currentResourceName, normalizedPath.substring(0,normalizedPath.lastIndexOf(&quot;/&quot;)+1));\r\n    \t\t\t} else {\r\n    \t\t\t\t// The current resource should be at the same path as the base\r\n    \t\t\t\t// resource\r\n    \t\t\t\tpathMap.put(systemId, baseResourcePath);\r\n    \t\t\t}\r\n    \t\t\tScanner s = new Scanner(resourceAsStream).useDelimiter(&quot;\\\\A&quot;);\r\n    \t\t\tString s1 = s.next().replaceAll(&quot;\\\\n&quot;, &quot; &quot;) // the parser cannot understand elements broken down multiple lines e.g. (&lt;xs:element \\n name=&quot;buxing&quot;&gt;)\r\n    \t\t\t\t\t.replace(&quot;\\\\t&quot;, &quot; &quot;) // these two about whitespaces is only for decoration\r\n    \t\t\t\t\t.replaceAll(&quot;\\\\s+&quot;, &quot; &quot;).replaceAll(&quot;[^\\\\x20-\\\\x7e]&quot;, &quot;&quot;); // some files has a special character as a first character indicating utf-8 file\r\n    \t\t\tInputStream is = new ByteArrayInputStream(s1.getBytes());\r\n    \r\n    \t\t\treturn new LSInputImpl(publicId, systemId, is); // same as Input class\r\n    \t\t}\r\n    \r\n    \t\t// If this resource has already been added, do not add the same resource again. It throws\r\n    \t\t// &quot;org.xml.sax.SAXParseException: sch-props-correct.2: A schema cannot contain two global components with the same name; this schema contains two occurrences of ...&quot;\r\n    \t\t// return null instead.\r\n    \t\treturn null;\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * Gets the normalized path.\r\n    \t *\r\n    \t * @param basePath the base path\r\n    \t * @param relativePath the relative path\r\n    \t * @return the normalized path\r\n    \t */\r\n    \tprivate String getNormalizedPath(String basePath, String relativePath){\r\n    \t\tif(!relativePath.startsWith(&quot;../&quot;)){\r\n    \t\t\treturn basePath + relativePath;\r\n    \t\t}\r\n    \t\telse{\r\n    \t\t\twhile(relativePath.startsWith(&quot;../&quot;)){\r\n    \t\t\t\tbasePath = basePath.substring(0,basePath.substring(0, basePath.length()-1).lastIndexOf(&quot;/&quot;)+1);\r\n    \t\t\t\trelativePath = relativePath.substring(3);\r\n    \t\t\t}\r\n    \t\t\treturn basePath+relativePath;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/21153587/2733462","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>I had to make some modifications to <a href=\"https://stackoverflow.com/a/21153587/2733462\">this post</a> by AMegmondoEmber</p>\n<p>My main schema file had some includes from sibling folders, and the included files also had some includes from their local folders. I also had to track down the base resource path and relative path of the current resource. This code works for me now, but please keep in mind that it assumes all xsd files have a unique name. If you have some xsd files with same name, but different content at different paths, it will probably give you problems.</p>\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Scanner;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.w3c.dom.ls.LSInput;\nimport org.w3c.dom.ls.LSResourceResolver;\n\n/**\n * The Class ResourceResolver.\n */\npublic class ResourceResolver implements LSResourceResolver {\n    \n    /** The logger. */\n    private final Logger logger = LoggerFactory.getLogger(this.getClass());\n    \n    /** The schema base path. */\n    private final String schemaBasePath;\n    \n    /** The path map. */\n    private Map&lt;String, String&gt; pathMap = new HashMap&lt;String, String&gt;();\n\n    /**\n     * Instantiates a new resource resolver.\n     *\n     * @param schemaBasePath the schema base path\n     */\n    public ResourceResolver(String schemaBasePath) {\n        this.schemaBasePath = schemaBasePath;\n        logger.warn(&quot;This LSResourceResolver implementation assumes that all XSD files have a unique name. &quot;\n                + &quot;If you have some XSD files with same name but different content (at different paths) in your schema structure, &quot;\n                + &quot;this resolver will fail to include the other XSD files except the first one found.&quot;);\n    }\n\n    /* (non-Javadoc)\n     * @see org.w3c.dom.ls.LSResourceResolver#resolveResource(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)\n     */\n    @Override\n    public LSInput resolveResource(String type, String namespaceURI,\n            String publicId, String systemId, String baseURI) {\n        // The base resource that includes this current resource\n        String baseResourceName = null;\n        String baseResourcePath = null;\n        // Extract the current resource name\n        String currentResourceName = systemId.substring(systemId\n                .lastIndexOf(&quot;/&quot;) + 1);\n\n        // If this resource hasn't been added yet\n        if (!pathMap.containsKey(currentResourceName)) {\n            if (baseURI != null) {\n                baseResourceName = baseURI\n                        .substring(baseURI.lastIndexOf(&quot;/&quot;) + 1);\n            }\n\n            // we dont need &quot;./&quot; since getResourceAsStream cannot understand it\n            if (systemId.startsWith(&quot;./&quot;)) {\n                systemId = systemId.substring(2, systemId.length());\n            }\n\n            // If the baseResourcePath has already been discovered, get that\n            // from pathMap\n            if (pathMap.containsKey(baseResourceName)) {\n                baseResourcePath = pathMap.get(baseResourceName);\n            } else {\n                // The baseResourcePath should be the schemaBasePath\n                baseResourcePath = schemaBasePath;\n            }\n\n            // Read the resource as input stream\n            String normalizedPath = getNormalizedPath(baseResourcePath, systemId);\n            InputStream resourceAsStream = this.getClass().getClassLoader()\n                    .getResourceAsStream(normalizedPath);\n\n            // if the current resource is not in the same path with base\n            // resource, add current resource's path to pathMap\n            if (systemId.contains(&quot;/&quot;)) {\n                pathMap.put(currentResourceName, normalizedPath.substring(0,normalizedPath.lastIndexOf(&quot;/&quot;)+1));\n            } else {\n                // The current resource should be at the same path as the base\n                // resource\n                pathMap.put(systemId, baseResourcePath);\n            }\n            Scanner s = new Scanner(resourceAsStream).useDelimiter(&quot;\\\\A&quot;);\n            String s1 = s.next().replaceAll(&quot;\\\\n&quot;, &quot; &quot;) // the parser cannot understand elements broken down multiple lines e.g. (&lt;xs:element \\n name=&quot;buxing&quot;&gt;)\n                    .replace(&quot;\\\\t&quot;, &quot; &quot;) // these two about whitespaces is only for decoration\n                    .replaceAll(&quot;\\\\s+&quot;, &quot; &quot;).replaceAll(&quot;[^\\\\x20-\\\\x7e]&quot;, &quot;&quot;); // some files has a special character as a first character indicating utf-8 file\n            InputStream is = new ByteArrayInputStream(s1.getBytes());\n\n            return new LSInputImpl(publicId, systemId, is); // same as Input class\n        }\n\n        // If this resource has already been added, do not add the same resource again. It throws\n        // &quot;org.xml.sax.SAXParseException: sch-props-correct.2: A schema cannot contain two global components with the same name; this schema contains two occurrences of ...&quot;\n        // return null instead.\n        return null;\n    }\n    \n    /**\n     * Gets the normalized path.\n     *\n     * @param basePath the base path\n     * @param relativePath the relative path\n     * @return the normalized path\n     */\n    private String getNormalizedPath(String basePath, String relativePath){\n        if(!relativePath.startsWith(&quot;../&quot;)){\n            return basePath + relativePath;\n        }\n        else{\n            while(relativePath.startsWith(&quot;../&quot;)){\n                basePath = basePath.substring(0,basePath.substring(0, basePath.length()-1).lastIndexOf(&quot;/&quot;)+1);\n                relativePath = relativePath.substring(3);\n            }\n            return basePath+relativePath;\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2464526,"reputation":1549,"user_id":2147927,"accept_rate":100,"display_name":"Line"},"score":0,"creation_date":1501242345,"post_id":37992214,"comment_id":77706015,"body_markdown":"but where is foo.xml placed?","body":"but where is foo.xml placed?"}],"tags":[],"owner":{"account_id":465839,"reputation":6552,"user_id":870207,"accept_rate":0,"display_name":"teknopaul"},"comment_count":1,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1466686360,"creation_date":1466686360,"answer_id":37992214,"question_id":2342808,"body_markdown":"The accepted answer is very verbose, and builds a DOM in memory first, includes seems to work out of the box for me, including relative references.\r\n\r\n\t\tSchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n\t\tSchema schema = schemaFactory.newSchema(new File(&quot;../foo.xsd&quot;));\r\n\t\tValidator validator = schema.newValidator();\r\n\t\tvalidator.validate(new StreamSource(new File(&quot;./foo.xml&quot;)));","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>The accepted answer is very verbose, and builds a DOM in memory first, includes seems to work out of the box for me, including relative references.</p>\n\n<pre><code>    SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n    Schema schema = schemaFactory.newSchema(new File(\"../foo.xsd\"));\n    Validator validator = schema.newValidator();\n    validator.validate(new StreamSource(new File(\"./foo.xml\")));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3242704,"reputation":13438,"user_id":2735286,"accept_rate":89,"display_name":"gil.fernandes"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1505722963,"creation_date":1505721678,"answer_id":46274349,"question_id":2342808,"body_markdown":"The accepted answer is perfectly ok, but does not work with Java 8 without some modifications. It would also be nice to be able to specify a base path from which the imported schemas are read. \r\n\r\nI have used in my Java 8 the following code which allows to specify an embedded schema path other than the root path:\r\n\r\n    import com.sun.org.apache.xerces.internal.dom.DOMInputImpl;\r\n    import org.w3c.dom.ls.LSInput;\r\n    import org.w3c.dom.ls.LSResourceResolver;\r\n    \r\n    import java.io.InputStream;\r\n    import java.util.Objects;\r\n    \r\n    public class ResourceResolver implements LSResourceResolver {\r\n    \r\n        private String basePath;\r\n    \r\n        public ResourceResolver(String basePath) {\r\n            this.basePath = basePath;\r\n        }\r\n    \r\n        @Override\r\n        public LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId, String baseURI) {\r\n            // note: in this sample, the XSD&#39;s are expected to be in the root of the classpath\r\n            InputStream resourceAsStream = this.getClass().getClassLoader()\r\n                    .getResourceAsStream(buildPath(systemId));\r\n            Objects.requireNonNull(resourceAsStream, String.format(&quot;Could not find the specified xsd file: %s&quot;, systemId));\r\n            return new DOMInputImpl(publicId, systemId, baseURI, resourceAsStream, &quot;UTF-8&quot;);\r\n        }\r\n    \r\n        private String buildPath(String systemId) {\r\n            return basePath == null ? systemId : String.format(&quot;%s/%s&quot;, basePath, systemId);\r\n        }\r\n    }\r\n\r\nThis implementation also gives to the user a meaningful message in case the schema cannot be read.","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>The accepted answer is perfectly ok, but does not work with Java 8 without some modifications. It would also be nice to be able to specify a base path from which the imported schemas are read. </p>\n\n<p>I have used in my Java 8 the following code which allows to specify an embedded schema path other than the root path:</p>\n\n<pre><code>import com.sun.org.apache.xerces.internal.dom.DOMInputImpl;\nimport org.w3c.dom.ls.LSInput;\nimport org.w3c.dom.ls.LSResourceResolver;\n\nimport java.io.InputStream;\nimport java.util.Objects;\n\npublic class ResourceResolver implements LSResourceResolver {\n\n    private String basePath;\n\n    public ResourceResolver(String basePath) {\n        this.basePath = basePath;\n    }\n\n    @Override\n    public LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId, String baseURI) {\n        // note: in this sample, the XSD's are expected to be in the root of the classpath\n        InputStream resourceAsStream = this.getClass().getClassLoader()\n                .getResourceAsStream(buildPath(systemId));\n        Objects.requireNonNull(resourceAsStream, String.format(\"Could not find the specified xsd file: %s\", systemId));\n        return new DOMInputImpl(publicId, systemId, baseURI, resourceAsStream, \"UTF-8\");\n    }\n\n    private String buildPath(String systemId) {\n        return basePath == null ? systemId : String.format(\"%s/%s\", basePath, systemId);\n    }\n}\n</code></pre>\n\n<p>This implementation also gives to the user a meaningful message in case the schema cannot be read.</p>\n"},{"tags":[],"owner":{"account_id":11973547,"reputation":141,"user_id":8761390,"display_name":"Gordon Daugherty"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1550791314,"creation_date":1550791314,"answer_id":54817784,"question_id":2342808,"body_markdown":"As user &quot;ulab&quot; points out in a comment on another answer the solution described in [this answer][1] (to a separate stackoverflow question) will work for many. Here&#39;s the rough outline of that approach:\r\n\r\n```\r\nSchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\nURL xsdURL = this.getResource(&quot;/xsd/my-schema.xsd&quot;);\r\nSchema schema = schemaFactory.newSchema(xsdURL);\r\n```\r\n\r\nThe key to this approach is avoiding handing the schema factory a stream and instead giving it a URL. This way it gets information about the location of the XSD file.\r\n\r\nOne thing to keep in mind here is that the &quot;schemaLocation&quot; attribute on include and/or import elements will be treated as relative to the classpath location of the XSD file whose URL you&#39;ve handed to the validator when you use simple file paths in the form &quot;my-common.xsd&quot; or &quot;common/some-concept.xsd&quot;.\r\n\r\nNotes:\r\n - In the example above I&#39;ve placed the schema file into a jar file under an &quot;xsd&quot; folder.\r\n - The leading slash in the &quot;getResource&quot; argument tells Java to start at the root of the    classloader instead of at the &quot;this&quot; object&#39;s package name.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1732161/parsing-schema-in-java-with-imports-and-includes/19853877#19853877","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>As user \"ulab\" points out in a comment on another answer the solution described in <a href=\"https://stackoverflow.com/questions/1732161/parsing-schema-in-java-with-imports-and-includes/19853877#19853877\">this answer</a> (to a separate stackoverflow question) will work for many. Here's the rough outline of that approach:</p>\n\n<pre><code>SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\nURL xsdURL = this.getResource(\"/xsd/my-schema.xsd\");\nSchema schema = schemaFactory.newSchema(xsdURL);\n</code></pre>\n\n<p>The key to this approach is avoiding handing the schema factory a stream and instead giving it a URL. This way it gets information about the location of the XSD file.</p>\n\n<p>One thing to keep in mind here is that the \"schemaLocation\" attribute on include and/or import elements will be treated as relative to the classpath location of the XSD file whose URL you've handed to the validator when you use simple file paths in the form \"my-common.xsd\" or \"common/some-concept.xsd\".</p>\n\n<p>Notes:\n - In the example above I've placed the schema file into a jar file under an \"xsd\" folder.\n - The leading slash in the \"getResource\" argument tells Java to start at the root of the    classloader instead of at the \"this\" object's package name.</p>\n"},{"tags":[],"owner":{"account_id":24364426,"reputation":11,"user_id":18298351,"display_name":"M123"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645700653,"creation_date":1645700653,"answer_id":71250950,"question_id":2342808,"body_markdown":"This thread was very useful for parsing complex xml schemas in multiple files .\r\n\r\nI also had to add:\r\n\r\n            SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n            factory.setFeature(&quot;http://apache.org/xml/features/honour-all-schemaLocations&quot;, true);\r\n\r\nto handle multiple files with same targetnamespace.","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>This thread was very useful for parsing complex xml schemas in multiple files .</p>\n<p>I also had to add:</p>\n<pre><code>        SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n        factory.setFeature(&quot;http://apache.org/xml/features/honour-all-schemaLocations&quot;, true);\n</code></pre>\n<p>to handle multiple files with same targetnamespace.</p>\n"},{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674647293,"creation_date":1674647293,"answer_id":75233522,"question_id":2342808,"body_markdown":"All you need is to use `StreamSource` with 2-arg signature like this:\r\n\r\n    val schemaResource = Thread.currentThread().contextClassLoader.getResource(&quot;path/to/main.xsd&quot;) ?: throw RuntimeException(&quot;todo&quot;)\r\n    val schema = schemaFactory.newSchema(StreamSource(schemaResource.openStream(), schemaResource.toExternalForm()))\r\n    schema.newValidator().validate(source)","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>All you need is to use <code>StreamSource</code> with 2-arg signature like this:</p>\n<pre><code>val schemaResource = Thread.currentThread().contextClassLoader.getResource(&quot;path/to/main.xsd&quot;) ?: throw RuntimeException(&quot;todo&quot;)\nval schema = schemaFactory.newSchema(StreamSource(schemaResource.openStream(), schemaResource.toExternalForm()))\nschema.newValidator().validate(source)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1976038,"reputation":364,"user_id":1773805,"accept_rate":17,"display_name":"tjeerdnet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691578869,"creation_date":1691575049,"answer_id":76866595,"question_id":2342808,"body_markdown":"Me and a colleague were fighting this for quite some hours and nothing seemed to be working. We would be getting errors like\r\n\r\n    cvc-elt.1: Cannot find the declaration of element &#39;Login&#39;.\r\n\r\nThe most important thing in our case was to **use an *URL* as resource** instead of an *InputStream* when setting the schema with the *SchemaFactory*s method *newSchema(...)*. Our XSDs reside in the classpath so we use *ClassPathResource* to get the XSD files. See below XSDs + XML + Java example code. The XSDs were delivered to us as is.\r\n\r\nThe main XSD (*Login.xsd*):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xs:schema xmlns:ns0=&quot;xmnls&quot;\r\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               ns0:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               elementFormDefault=&quot;qualified&quot;\r\n               attributeFormDefault=&quot;unqualified&quot;&gt;\r\n       &lt;xs:include schemaLocation=&quot;CustomTypes.xsd&quot;/&gt;\r\n       &lt;xs:element name=&quot;Login&quot;&gt;      \r\n          &lt;xs:complexType&gt;\r\n             &lt;xs:sequence&gt;\r\n                &lt;xs:element name=&quot;Username&quot; type=&quot;Char20&quot;&gt;               \r\n                &lt;/xs:element&gt;            \r\n             &lt;/xs:sequence&gt;\r\n          &lt;/xs:complexType&gt;\r\n       &lt;/xs:element&gt;\r\n    &lt;/xs:schema&gt;\r\n\r\nThe XSD (*CustomTypes.xsd*) being included from the main XSD (*Login.xsd*):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xs:schema xmlns:ns0=&quot;xmnls&quot;\r\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\r\n               xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n               jaxb:extensionBindingPrefixes=&quot;xjc&quot;\r\n               jaxb:version=&quot;2.0&quot;\r\n               ns0:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               elementFormDefault=&quot;qualified&quot;\r\n               attributeFormDefault=&quot;unqualified&quot;&gt;   \r\n       &lt;xs:simpleType name=&quot;Char20&quot;&gt;      \r\n          &lt;xs:restriction base=&quot;xs:string&quot;&gt;\r\n             &lt;xs:pattern value=&quot;.{1,20}&quot;&gt;            \r\n             &lt;/xs:pattern&gt;\r\n          &lt;/xs:restriction&gt;\r\n       &lt;/xs:simpleType&gt;   \r\n    &lt;/xs:schema&gt;\r\n\r\nThe XML to validate:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Login&gt;\r\n     &lt;Username&gt;This username exceeds 20 character&lt;/Username&gt;\r\n    &lt;/Login&gt;\r\n\r\nThe Java-code to validate the XML-string against the XSD:\r\n\r\n    class XsdXmlJaxbValidationExample {\r\n         validateXml() {\r\n\r\n              String loginXml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;\r\n                  + &quot;&lt;Login&gt;&quot;\r\n                  + &quot;&lt;Username&gt;This username exceeds 20 character&lt;/Username&gt;&quot;\r\n                  + &quot;&lt;/Login&gt;&quot;;\r\n     \r\n              SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n              URL mainXsd = new ClassPathResource(&quot;Login.xsd&quot;).getURL();\r\n              Schema mainSchema = schemaFactory.newSchema(mainXsd);\r\n              Validator validator = mainSchema.newValidator();\r\n              validator.validate(new StreamSource(new StringReader(loginXml)));\r\n\r\n         }\r\n     }","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>Me and a colleague were fighting this for quite some hours and nothing seemed to be working. We would be getting errors like</p>\n<pre><code>cvc-elt.1: Cannot find the declaration of element 'Login'.\n</code></pre>\n<p>The most important thing in our case was to <strong>use an <em>URL</em> as resource</strong> instead of an <em>InputStream</em> when setting the schema with the <em>SchemaFactory</em>s method <em>newSchema(...)</em>. Our XSDs reside in the classpath so we use <em>ClassPathResource</em> to get the XSD files. See below XSDs + XML + Java example code. The XSDs were delivered to us as is.</p>\n<p>The main XSD (<em>Login.xsd</em>):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xs:schema xmlns:ns0=&quot;xmnls&quot;\n           xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           ns0:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           elementFormDefault=&quot;qualified&quot;\n           attributeFormDefault=&quot;unqualified&quot;&gt;\n   &lt;xs:include schemaLocation=&quot;CustomTypes.xsd&quot;/&gt;\n   &lt;xs:element name=&quot;Login&quot;&gt;      \n      &lt;xs:complexType&gt;\n         &lt;xs:sequence&gt;\n            &lt;xs:element name=&quot;Username&quot; type=&quot;Char20&quot;&gt;               \n            &lt;/xs:element&gt;            \n         &lt;/xs:sequence&gt;\n      &lt;/xs:complexType&gt;\n   &lt;/xs:element&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n<p>The XSD (<em>CustomTypes.xsd</em>) being included from the main XSD (<em>Login.xsd</em>):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xs:schema xmlns:ns0=&quot;xmnls&quot;\n           xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\n           xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n           jaxb:extensionBindingPrefixes=&quot;xjc&quot;\n           jaxb:version=&quot;2.0&quot;\n           ns0:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           elementFormDefault=&quot;qualified&quot;\n           attributeFormDefault=&quot;unqualified&quot;&gt;   \n   &lt;xs:simpleType name=&quot;Char20&quot;&gt;      \n      &lt;xs:restriction base=&quot;xs:string&quot;&gt;\n         &lt;xs:pattern value=&quot;.{1,20}&quot;&gt;            \n         &lt;/xs:pattern&gt;\n      &lt;/xs:restriction&gt;\n   &lt;/xs:simpleType&gt;   \n&lt;/xs:schema&gt;\n</code></pre>\n<p>The XML to validate:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Login&gt;\n &lt;Username&gt;This username exceeds 20 character&lt;/Username&gt;\n&lt;/Login&gt;\n</code></pre>\n<p>The Java-code to validate the XML-string against the XSD:</p>\n<pre><code>class XsdXmlJaxbValidationExample {\n     validateXml() {\n\n          String loginXml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;\n              + &quot;&lt;Login&gt;&quot;\n              + &quot;&lt;Username&gt;This username exceeds 20 character&lt;/Username&gt;&quot;\n              + &quot;&lt;/Login&gt;&quot;;\n \n          SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n          URL mainXsd = new ClassPathResource(&quot;Login.xsd&quot;).getURL();\n          Schema mainSchema = schemaFactory.newSchema(mainXsd);\n          Validator validator = mainSchema.newValidator();\n          validator.validate(new StreamSource(new StringReader(loginXml)));\n\n     }\n }\n</code></pre>\n"}],"owner":{"account_id":105815,"reputation":1198,"user_id":282152,"accept_rate":87,"display_name":"Melanie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73517,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":2342859,"answer_count":11,"score":34,"last_activity_date":1691578869,"creation_date":1267199390,"question_id":2342808,"body_markdown":"I&#39;m using Java 5 javax.xml.validation.Validator to validate XML file. I&#39;ve done it for one schema that uses only imports and everything works fine. Now I&#39;m trying to validate with another schema that uses import and one include. The problem I have is that element in the main schema are ignored, the validation says it cannot find their declaration. \r\n\r\nHere is how I build the Schema:\r\n\r\n    InputStream includeInputStream = getClass().getClassLoader().getResource(&quot;include.xsd&quot;).openStream();\r\n    InputStream importInputStream = getClass().getClassLoader().getResource(&quot;import.xsd&quot;).openStream();\r\n    InputStream mainInputStream = getClass().getClassLoader().getResource(&quot;main.xsd&quot;).openStream();\r\n    Source[] sourceSchema = new SAXSource[]{includeInputStream , importInputStream, \r\n    mainInputStream };\r\n    Schema schema = factory.newSchema(sourceSchema);\r\n\r\nNow here is the extract of the declaration in main.xsd\r\n\r\n    &lt;xsd:schema xmlns=&quot;http://schema.omg.org/spec/BPMN/2.0&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:import=&quot;http://www.foo.com/import&quot; targetNamespace=&quot;http://main/namespace&quot; elementFormDefault=&quot;qualified&quot; attributeFormDefault=&quot;unqualified&quot;&gt;\r\n    \t&lt;xsd:import namespace=&quot;http://www.foo.com/import&quot; schemaLocation=&quot;import.xsd&quot;/&gt;\r\n    \t&lt;xsd:include schemaLocation=&quot;include.xsd&quot;/&gt;\r\n    \t&lt;xsd:element name=&quot;element&quot; type=&quot;tElement&quot;/&gt;\r\n    \t&lt;...&gt;\r\n    &lt;/xsd:schema&gt;\r\n\r\nIf I copy the code of my included XSD in the main.xsd, it works fine. If I don&#39;t, validation doesn&#39;t find the declaration of &quot;Element&quot;.","title":"How to validate an XML file using Java with an XSD having an include?","body":"<p>I'm using Java 5 javax.xml.validation.Validator to validate XML file. I've done it for one schema that uses only imports and everything works fine. Now I'm trying to validate with another schema that uses import and one include. The problem I have is that element in the main schema are ignored, the validation says it cannot find their declaration. </p>\n\n<p>Here is how I build the Schema:</p>\n\n<pre><code>InputStream includeInputStream = getClass().getClassLoader().getResource(\"include.xsd\").openStream();\nInputStream importInputStream = getClass().getClassLoader().getResource(\"import.xsd\").openStream();\nInputStream mainInputStream = getClass().getClassLoader().getResource(\"main.xsd\").openStream();\nSource[] sourceSchema = new SAXSource[]{includeInputStream , importInputStream, \nmainInputStream };\nSchema schema = factory.newSchema(sourceSchema);\n</code></pre>\n\n<p>Now here is the extract of the declaration in main.xsd</p>\n\n<pre><code>&lt;xsd:schema xmlns=\"http://schema.omg.org/spec/BPMN/2.0\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:import=\"http://www.foo.com/import\" targetNamespace=\"http://main/namespace\" elementFormDefault=\"qualified\" attributeFormDefault=\"unqualified\"&gt;\n    &lt;xsd:import namespace=\"http://www.foo.com/import\" schemaLocation=\"import.xsd\"/&gt;\n    &lt;xsd:include schemaLocation=\"include.xsd\"/&gt;\n    &lt;xsd:element name=\"element\" type=\"tElement\"/&gt;\n    &lt;...&gt;\n&lt;/xsd:schema&gt;\n</code></pre>\n\n<p>If I copy the code of my included XSD in the main.xsd, it works fine. If I don't, validation doesn't find the declaration of \"Element\".</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691587927,"post_id":76867067,"comment_id":135511857,"body_markdown":"The client version isn&#39;t required to match the server. Try upgrading","body":"The client version isn&#39;t required to match the server. Try upgrading"},{"owner":{"account_id":8266541,"reputation":69,"user_id":6215889,"display_name":"Stefan Sebastian"},"score":1,"creation_date":1691742162,"post_id":76867067,"comment_id":135535554,"body_markdown":"I tried various versions of kafka client : 2.3, 2.8, 3.5 but the issue persists.","body":"I tried various versions of kafka client : 2.3, 2.8, 3.5 but the issue persists."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1691760167,"post_id":76867067,"comment_id":135539187,"body_markdown":"Is the error always mentioning &quot;node 0&quot;? Maybe there&#39;s a network problem related to that specific server. Or the thread running &quot;consumer-4&quot;... I&#39;d recommend setting debug/trace logging in your app and try to get more info. Or maybe server logs for &quot;node 0&quot;. Also, did you remove the groupId from the log message?","body":"Is the error always mentioning &quot;node 0&quot;? Maybe there&#39;s a network problem related to that specific server. Or the thread running &quot;consumer-4&quot;... I&#39;d recommend setting debug/trace logging in your app and try to get more info. Or maybe server logs for &quot;node 0&quot;. Also, did you remove the groupId from the log message?"},{"owner":{"account_id":8266541,"reputation":69,"user_id":6215889,"display_name":"Stefan Sebastian"},"score":1,"creation_date":1692005678,"post_id":76867067,"comment_id":135562465,"body_markdown":"Yes it is only node 0 because I have a single Kafka server (it&#39;s a test environment). I have set the finest log level for client app on org.apache.kafka.clients.*. I have found a workaround for the issue, rebooting the machine running the client app.","body":"Yes it is only node 0 because I have a single Kafka server (it&#39;s a test environment). I have set the finest log level for client app on org.apache.kafka.clients.*. I have found a workaround for the issue, rebooting the machine running the client app."}],"owner":{"account_id":8266541,"reputation":69,"user_id":6215889,"display_name":"Stefan Sebastian"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691578357,"creation_date":1691578357,"question_id":76867067,"body_markdown":"I have a Java application that consumes data from a Kafka topic (populated by a different application), using the kafka-clients lib. Usually it works fine but (without changing anything in configuration / deployment) it sometimes gets stuck with the following error: \r\n&gt; org.apache.kafka.clients.FetchSessionHandler handleError [Consumer clientId=consumer-4, groupId=] Error sending fetch request (sessionId=1914414120, epoch=INITIAL) to node 0: org.apache.kafka.common.errors.DisconnectException.\r\n\r\nThis error usually occurs after loading high volumes of data in the cluster (~500 messages per sec) but it persists for hours even if there is no activity.\r\n\r\nThe network between the client machine and VM running Kafka seems to be working fine (I can ping, access port with telnet). The Kafka VM has enough CPU, memory and space on disk and other apps running there work fine. Kafka broker log shows no warnings or errors.\r\nI have checked client and server versions to match, for Kafka 2_12 2.1.1\r\n\r\n\r\n","title":"Kafka 2.1.1 persistent client DisconnectException","body":"<p>I have a Java application that consumes data from a Kafka topic (populated by a different application), using the kafka-clients lib. Usually it works fine but (without changing anything in configuration / deployment) it sometimes gets stuck with the following error:</p>\n<blockquote>\n<p>org.apache.kafka.clients.FetchSessionHandler handleError [Consumer clientId=consumer-4, groupId=] Error sending fetch request (sessionId=1914414120, epoch=INITIAL) to node 0: org.apache.kafka.common.errors.DisconnectException.</p>\n</blockquote>\n<p>This error usually occurs after loading high volumes of data in the cluster (~500 messages per sec) but it persists for hours even if there is no activity.</p>\n<p>The network between the client machine and VM running Kafka seems to be working fine (I can ping, access port with telnet). The Kafka VM has enough CPU, memory and space on disk and other apps running there work fine. Kafka broker log shows no warnings or errors.\nI have checked client and server versions to match, for Kafka 2_12 2.1.1</p>\n"},{"tags":["java","maven","visual-studio-code","version","java-home"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1691567261,"post_id":76865363,"comment_id":135507468,"body_markdown":"[`java.configuration.runtimes`](https://code.visualstudio.com/docs/java/java-project#_configure-runtime-for-projects) maybe a little help.","body":"<a href=\"https://code.visualstudio.com/docs/java/java-project#_configure-runtime-for-projects\" rel=\"nofollow noreferrer\"><code>java.configuration.runtimes</code></a> maybe a little help."},{"owner":{"account_id":2680252,"reputation":57,"user_id":2315764,"display_name":"FER_Viborg"},"score":0,"creation_date":1691577345,"post_id":76865363,"comment_id":135509539,"body_markdown":"@JialeDu, thx for a reply but java.configuration.runtimes is for running java after the code has been compiled. I&#39;m searching for a way to use maven with specific java to build the code itself.","body":"@JialeDu, thx for a reply but java.configuration.runtimes is for running java after the code has been compiled. I&#39;m searching for a way to use maven with specific java to build the code itself."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":1,"creation_date":1691738426,"post_id":76865363,"comment_id":135534958,"body_markdown":"If you want, you can report it on [GitHub](https://github.com/redhat-developer/vscode-java/issues/new) to get a response from the developers.","body":"If you want, you can report it on <a href=\"https://github.com/redhat-developer/vscode-java/issues/new\" rel=\"nofollow noreferrer\">GitHub</a> to get a response from the developers."}],"owner":{"account_id":2680252,"reputation":57,"user_id":2315764,"display_name":"FER_Viborg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691578195,"creation_date":1691564732,"question_id":76865363,"body_markdown":"How do I set dynamic JAVA_HOME paths for maven?\r\n\r\nThere is a maven.terminal.customEnv variable I can set with this object:\r\n\r\n    {\r\n      &quot;environmentVariable&quot;: &quot;JAVA_HOME&quot;,\r\n      &quot;value&quot; : &quot;C:\\\\Java\\\\jdk-20.0.1&quot;\r\n    }\r\n\r\nbut that is static. Maven will always use defined value.\r\n\r\nI want to set multiple &quot;JAVA_HOME&quot; paths for maven so that the Visual Studio Code can run maven with the proper one based on the values in pom.xml.\r\n\r\n\r\nEDIT: For an example, in Eclipse I can choose Run As --&gt; Maven build ... and then choose Java that will be used to build the code in JRE section. It is still not an automatic process based on pom.xml but at least the build configuration is being saved in specific workspace. In another words, I can build 2 projects in parallel, one with e.g. Java 8 and one with Java 20. In VSCode I need to change JAVA_HOME for each different build because maven.terminal.customEnv is a global setting.\r\n\r\n`--show-version package` flag can show which Java is being used to build a code.","title":"Visual Studio Code - dynamic java for maven build","body":"<p>How do I set dynamic JAVA_HOME paths for maven?</p>\n<p>There is a maven.terminal.customEnv variable I can set with this object:</p>\n<pre><code>{\n  &quot;environmentVariable&quot;: &quot;JAVA_HOME&quot;,\n  &quot;value&quot; : &quot;C:\\\\Java\\\\jdk-20.0.1&quot;\n}\n</code></pre>\n<p>but that is static. Maven will always use defined value.</p>\n<p>I want to set multiple &quot;JAVA_HOME&quot; paths for maven so that the Visual Studio Code can run maven with the proper one based on the values in pom.xml.</p>\n<p>EDIT: For an example, in Eclipse I can choose Run As --&gt; Maven build ... and then choose Java that will be used to build the code in JRE section. It is still not an automatic process based on pom.xml but at least the build configuration is being saved in specific workspace. In another words, I can build 2 projects in parallel, one with e.g. Java 8 and one with Java 20. In VSCode I need to change JAVA_HOME for each different build because maven.terminal.customEnv is a global setting.</p>\n<p><code>--show-version package</code> flag can show which Java is being used to build a code.</p>\n"},{"tags":["java","mysql","spring","spring-boot","mybatis"],"answers":[{"comments":[{"owner":{"account_id":2573819,"reputation":15175,"user_id":2231972,"display_name":"Roman-Stop RU aggression in UA"},"score":1,"creation_date":1539971258,"post_id":52888426,"comment_id":92707388,"body_markdown":"How does this answer the question? OP specifically asks about datasource configuration in `mybatis-config.xml`","body":"How does this answer the question? OP specifically asks about datasource configuration in <code>mybatis-config.xml</code>"},{"owner":{"account_id":4724155,"reputation":444,"user_id":3821301,"accept_rate":100,"display_name":"Rajeev"},"score":0,"creation_date":1691557375,"post_id":52888426,"comment_id":135506028,"body_markdown":"Declaring datasource in mybatis configuration file. Using the declared datasource in the application is what the requirement. This answer doesnot speaks on that. @Roman-StopRUaggressioninUA answer is good.","body":"Declaring datasource in mybatis configuration file. Using the declared datasource in the application is what the requirement. This answer doesnot speaks on that. @Roman-StopRUaggressioninUA answer is good."}],"tags":[],"owner":{"account_id":4844922,"reputation":1188,"user_id":3908814,"display_name":"Bejond"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539937145,"creation_date":1539937145,"answer_id":52888426,"question_id":52888189,"body_markdown":"You should put database properties in spring-boot configuration file like application.properties. After that, you can get datasource:\r\n\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    DataSourceBuilder.create()\r\n        .url(env.getProperty(&quot;spring.datasource.url&quot;))\r\n        .driverClassName(env.getProperty(&quot;spring.datasource.driver-class-name&quot;))\r\n        .username(env.getProperty(&quot;spring.datasource.username&quot;))\r\n        .password(env.getProperty(&quot;spring.datasource.password&quot;))\r\n        .build());\r\n\r\nThen use the datasource to get SqlSession:\r\n\r\n\t\tTransactionFactory transactionFactory = new JdbcTransactionFactory();\r\n\t\tEnvironment environment = new Environment(&quot;id&quot;, transactionFactory, &quot;id&quot;);\r\n\t\tConfiguration configuration = new Configuration(environment);\r\n\t\tconfiguration.addMapper(YourMapper.class);\r\n\r\n\t\treturn new SqlSessionTemplate(sqlSessionFactoryBuilder.build(configuration));\r\n\r\nThen use SqlSession get mapper:\r\n\r\n    sqlSession.getMapper(YourMapper.class);\r\n\r\nMybatis just needs a SqlSession to getMapper and run mapping, exposing mapping with a Java interface. So mybatis doesn&#39;t need to pay attention on datasource.","title":"How can I set the datasource in mybatis-config.xml when using springboot?","body":"<p>You should put database properties in spring-boot configuration file like application.properties. After that, you can get datasource:</p>\n\n<pre><code>@Autowired\nprivate Environment env;\n\nDataSourceBuilder.create()\n    .url(env.getProperty(\"spring.datasource.url\"))\n    .driverClassName(env.getProperty(\"spring.datasource.driver-class-name\"))\n    .username(env.getProperty(\"spring.datasource.username\"))\n    .password(env.getProperty(\"spring.datasource.password\"))\n    .build());\n</code></pre>\n\n<p>Then use the datasource to get SqlSession:</p>\n\n<pre><code>    TransactionFactory transactionFactory = new JdbcTransactionFactory();\n    Environment environment = new Environment(\"id\", transactionFactory, \"id\");\n    Configuration configuration = new Configuration(environment);\n    configuration.addMapper(YourMapper.class);\n\n    return new SqlSessionTemplate(sqlSessionFactoryBuilder.build(configuration));\n</code></pre>\n\n<p>Then use SqlSession get mapper:</p>\n\n<pre><code>sqlSession.getMapper(YourMapper.class);\n</code></pre>\n\n<p>Mybatis just needs a SqlSession to getMapper and run mapping, exposing mapping with a Java interface. So mybatis doesn't need to pay attention on datasource.</p>\n"},{"tags":[],"owner":{"account_id":2573819,"reputation":15175,"user_id":2231972,"display_name":"Roman-Stop RU aggression in UA"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691578137,"creation_date":1539972144,"answer_id":52897764,"question_id":52888189,"body_markdown":"Mybatis machinery requires `DataSource` to create jdbc `Connection` that it can use to execute queries. In a regular setup that uses mybatis-spring this `DataSource` is configured as a bean in the spring context. Mappers are also beans in the spring context that use that datasource (indirectly via `SqlSession`).\r\n\r\nYou can configure the `DataSource` in `mybatis-config.xml` as described in the [documentation](http://www.mybatis.org/mybatis-3/configuration.html). The only problem is that in that case spring will not be aware of this `DataSource`, it will not be a bean in the spring context. And that&#39;s the problem that you face.\r\n \r\nSpring will not manage transactions for you in this case, you will not be able to inject mappers or `SqlSession` in your beans. Basically you will lose everything what mybatis-spring integration gives you so it makes very little (if any at all) sense to configure mybatis `DataSource` in mybatis config. \r\n\r\nIf you nevertheless do that you would need to [manually](http://www.mybatis.org/mybatis-3/getting-started.html#Building_SqlSessionFactory_from_XML) create `SqlSession` from the xml configuration and then manually commit/rollback transaction via `SqlSession.commit`/`SqlSession.rollback`.\r\n\r\n","title":"How can I set the datasource in mybatis-config.xml when using springboot?","body":"<p>Mybatis machinery requires <code>DataSource</code> to create jdbc <code>Connection</code> that it can use to execute queries. In a regular setup that uses mybatis-spring this <code>DataSource</code> is configured as a bean in the spring context. Mappers are also beans in the spring context that use that datasource (indirectly via <code>SqlSession</code>).</p>\n<p>You can configure the <code>DataSource</code> in <code>mybatis-config.xml</code> as described in the <a href=\"http://www.mybatis.org/mybatis-3/configuration.html\" rel=\"nofollow noreferrer\">documentation</a>. The only problem is that in that case spring will not be aware of this <code>DataSource</code>, it will not be a bean in the spring context. And that's the problem that you face.</p>\n<p>Spring will not manage transactions for you in this case, you will not be able to inject mappers or <code>SqlSession</code> in your beans. Basically you will lose everything what mybatis-spring integration gives you so it makes very little (if any at all) sense to configure mybatis <code>DataSource</code> in mybatis config.</p>\n<p>If you nevertheless do that you would need to <a href=\"http://www.mybatis.org/mybatis-3/getting-started.html#Building_SqlSessionFactory_from_XML\" rel=\"nofollow noreferrer\">manually</a> create <code>SqlSession</code> from the xml configuration and then manually commit/rollback transaction via <code>SqlSession.commit</code>/<code>SqlSession.rollback</code>.</p>\n"}],"owner":{"account_id":1478601,"reputation":3574,"user_id":1388421,"accept_rate":55,"display_name":"roast_soul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2458,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691578137,"creation_date":1539936230,"question_id":52888189,"body_markdown":"\r\nSpring Boot can create the datasource when I config the datasource in application.properties. As follows:\r\n\r\n    spring.datasource.url=jdbc:mysql://127.0.0.1:3306/demo?useUnicode=true&amp;characterEncoding=UTF-8\r\n    spring.datasource.username=root\r\n    spring.datasource.password=123\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n\r\nI also can set a mybatis-config file in `application.properties`. like:\r\n\r\n    mybatis.config-location=classpath:mybatis-config.xml\r\n\r\nAs we all know, the `mybatis-config.xml` can config the datasource,too.\r\nSo what if I don&#39;t set the datasource in `application.properties`,but only set the datasource in `mybatis-config.xml`?\r\n\r\nI tried, I removed the datasource configuration in `application.properties`, and set the datasource in mybatis-config.xml. But it didn&#39;t work.\r\n\r\n\r\nHow can I set the datasource in mybatis-config.xml when using springboot?\r\n\r\n\r\n\r\n","title":"How can I set the datasource in mybatis-config.xml when using springboot?","body":"<p>Spring Boot can create the datasource when I config the datasource in application.properties. As follows:</p>\n\n<pre><code>spring.datasource.url=jdbc:mysql://127.0.0.1:3306/demo?useUnicode=true&amp;characterEncoding=UTF-8\nspring.datasource.username=root\nspring.datasource.password=123\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n</code></pre>\n\n<p>I also can set a mybatis-config file in <code>application.properties</code>. like:</p>\n\n<pre><code>mybatis.config-location=classpath:mybatis-config.xml\n</code></pre>\n\n<p>As we all know, the <code>mybatis-config.xml</code> can config the datasource,too.\nSo what if I don't set the datasource in <code>application.properties</code>,but only set the datasource in <code>mybatis-config.xml</code>?</p>\n\n<p>I tried, I removed the datasource configuration in <code>application.properties</code>, and set the datasource in mybatis-config.xml. But it didn't work.</p>\n\n<p>How can I set the datasource in mybatis-config.xml when using springboot?</p>\n"},{"tags":["java","ssl-certificate"],"comments":[{"owner":{"account_id":1434396,"reputation":28043,"user_id":1356107,"accept_rate":79,"display_name":"Tschallacka"},"score":1,"creation_date":1489573003,"post_id":42806709,"comment_id":72726155,"body_markdown":"Try it with a higher java version. You might be using an outdated java version that doesn&#39;t support the encryption types used.","body":"Try it with a higher java version. You might be using an outdated java version that doesn&#39;t support the encryption types used."},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489573070,"post_id":42806709,"comment_id":72726203,"body_markdown":"I am using JAVA 8","body":"I am using JAVA 8"},{"owner":{"account_id":1434396,"reputation":28043,"user_id":1356107,"accept_rate":79,"display_name":"Tschallacka"},"score":0,"creation_date":1489573167,"post_id":42806709,"comment_id":72726267,"body_markdown":"You are doing the SOAP request on your own private server? On your test VM add the key to the trusted keys. For the public soap you don&#39;t need that since there are CA&#39;s that can vouch for the autenticty.","body":"You are doing the SOAP request on your own private server? On your test VM add the key to the trusted keys. For the public soap you don&#39;t need that since there are CA&#39;s that can vouch for the autenticty."},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489573413,"post_id":42806709,"comment_id":72726428,"body_markdown":"SOAP service is hosted on server that is using a self signed certificate. I am running my test from my local as well as any vm. I don&#39;t want to add the key to truststore in each vm. Is there any other way arround?","body":"SOAP service is hosted on server that is using a self signed certificate. I am running my test from my local as well as any vm. I don&#39;t want to add the key to truststore in each vm. Is there any other way arround?"},{"owner":{"account_id":2785683,"reputation":2653,"user_id":2397162,"accept_rate":61,"display_name":"niceman"},"score":0,"creation_date":1489573566,"post_id":42806709,"comment_id":72726553,"body_markdown":"@PrasantaBiswas self-signed certificates aren&#39;t accepted without manual addition to the trust store, browsers(chrome,firefox,etc) don&#39;t accept these as well","body":"@PrasantaBiswas self-signed certificates aren&#39;t accepted without manual addition to the trust store, browsers(chrome,firefox,etc) don&#39;t accept these as well"},{"owner":{"account_id":1434396,"reputation":28043,"user_id":1356107,"accept_rate":79,"display_name":"Tschallacka"},"score":0,"creation_date":1489573641,"post_id":42806709,"comment_id":72726608,"body_markdown":"Try the option number two from http://stackoverflow.com/questions/2893819/telling-java-to-accept-self-signed-ssl-certificate","body":"Try the option number two from <a href=\"http://stackoverflow.com/questions/2893819/telling-java-to-accept-self-signed-ssl-certificate\" title=\"telling java to accept self signed ssl certificate\">stackoverflow.com/questions/2893819/&hellip;</a>"},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489573733,"post_id":42806709,"comment_id":72726681,"body_markdown":"Tried this, didn&#39;t work for me.","body":"Tried this, didn&#39;t work for me."},{"owner":{"account_id":2785683,"reputation":2653,"user_id":2397162,"accept_rate":61,"display_name":"niceman"},"score":0,"creation_date":1489573758,"post_id":42806709,"comment_id":72726705,"body_markdown":"@PrasantaBiswas can you edit the question saying why didn&#39;t it work for you ?","body":"@PrasantaBiswas can you edit the question saying why didn&#39;t it work for you ?"}],"answers":[{"comments":[{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489594156,"post_id":42807149,"comment_id":72742375,"body_markdown":"I am using HttpURLConnection","body":"I am using HttpURLConnection"},{"owner":{"account_id":22566866,"reputation":799,"user_id":16753754,"display_name":"Anton Cavanaugh"},"score":0,"creation_date":1635871504,"post_id":42807149,"comment_id":123406216,"body_markdown":"Dereck, can you tell me what version of Apache HTTP client, there are so many versions many that wont work. Thanks.","body":"Dereck, can you tell me what version of Apache HTTP client, there are so many versions many that wont work. Thanks."}],"tags":[],"owner":{"account_id":414821,"reputation":509,"user_id":789255,"accept_rate":58,"display_name":"dereck"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1489573940,"creation_date":1489573940,"answer_id":42807149,"question_id":42806709,"body_markdown":"Try with Apache HTTP client, this works for me.\r\n\r\n    SSLContextBuilder builder = new SSLContextBuilder();\r\n    builder.loadTrustMaterial(null, new TrustStrategy() {\r\n         public boolean isTrusted(final X509Certificate[] chain, String authType) throws CertificateException {\r\n              return true;\r\n         }\r\n    });\r\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(builder.build());\r\n\r\n    CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();\r\n\r\n    // GET or POST request with the client\r\n    ...\r\n","title":"How to bypass ssl certificate checking in java","body":"<p>Try with Apache HTTP client, this works for me.</p>\n\n<pre><code>SSLContextBuilder builder = new SSLContextBuilder();\nbuilder.loadTrustMaterial(null, new TrustStrategy() {\n     public boolean isTrusted(final X509Certificate[] chain, String authType) throws CertificateException {\n          return true;\n     }\n});\nSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(builder.build());\n\nCloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();\n\n// GET or POST request with the client\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489575439,"post_id":42807185,"comment_id":72727907,"body_markdown":"If you look at my code , I have already done that. Didn&#39;t work. It is working fine when the url is https://google.com","body":"If you look at my code , I have already done that. Didn&#39;t work. It is working fine when the url is <a href=\"https://google.com\" rel=\"nofollow noreferrer\">google.com</a>"},{"owner":{"account_id":2987615,"reputation":1799,"user_id":2535987,"accept_rate":67,"display_name":"Monish Sen"},"score":0,"creation_date":1489579531,"post_id":42807185,"comment_id":72730726,"body_markdown":"@PrasantaBiswas even though you bypass certificate validation, the connection still has to perform a SSL handkshake and encrypt the contents if you mean to use https. It seems the certificate is invalid. Can you download the certificate using broswer and share the certificate details, especially the signature algorithm","body":"@PrasantaBiswas even though you bypass certificate validation, the connection still has to perform a SSL handkshake and encrypt the contents if you mean to use https. It seems the certificate is invalid. Can you download the certificate using broswer and share the certificate details, especially the signature algorithm"},{"owner":{"account_id":2987615,"reputation":1799,"user_id":2535987,"accept_rate":67,"display_name":"Monish Sen"},"score":0,"creation_date":1489579829,"post_id":42807185,"comment_id":72730955,"body_markdown":"@PrasantaBiswas as a quickfix you can try updating the JCE policy jars for java 8, if not already done so. Do reply if this works for you","body":"@PrasantaBiswas as a quickfix you can try updating the JCE policy jars for java 8, if not already done so. Do reply if this works for you"},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489593530,"post_id":42807185,"comment_id":72741916,"body_markdown":"I have downloaded the certificate which is expired but still chrome can access the url. It uses MD5 RSA algorithm. Now how do I use this certificate to bypass ssl handshake?","body":"I have downloaded the certificate which is expired but still chrome can access the url. It uses MD5 RSA algorithm. Now how do I use this certificate to bypass ssl handshake?"},{"owner":{"account_id":2987615,"reputation":1799,"user_id":2535987,"accept_rate":67,"display_name":"Monish Sen"},"score":0,"creation_date":1489646013,"post_id":42807185,"comment_id":72764181,"body_markdown":"@PrasantaBiswas see updated answer. FYI you cannot bypass ssl handshake, it is pre-requisite to establish the connection","body":"@PrasantaBiswas see updated answer. FYI you cannot bypass ssl handshake, it is pre-requisite to establish the connection"},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1489668828,"post_id":42807185,"comment_id":72778555,"body_markdown":"I know this. But I don&#39;t want to get into someone else&#39;s machine and change stuff. Instead I used X509ExtendedTrustManager that solved the problem. Anyway thanks for you help.","body":"I know this. But I don&#39;t want to get into someone else&#39;s machine and change stuff. Instead I used X509ExtendedTrustManager that solved the problem. Anyway thanks for you help."},{"owner":{"account_id":1323328,"reputation":873,"user_id":1268668,"accept_rate":56,"display_name":"Raghavendra Bankapur"},"score":0,"creation_date":1562064229,"post_id":42807185,"comment_id":100251546,"body_markdown":"Added this extra code and it worked\n\nHostnameVerifier allHostsValid = new HostnameVerifier() {\n            public boolean verify(String hostname, SSLSession session) {\n                return true;\n            }\n        };\n \n               HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);","body":"Added this extra code and it worked  HostnameVerifier allHostsValid = new HostnameVerifier() {             public boolean verify(String hostname, SSLSession session) {                 return true;             }         };                  HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid)&zwnj;&#8203;;"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1696843604,"post_id":42807185,"comment_id":136200147,"body_markdown":"`getAcceptedIssuers()` isn&#39;t allowed to return `null`.","body":"<code>getAcceptedIssuers()</code> isn&#39;t allowed to return <code>null</code>."}],"tags":[],"owner":{"account_id":2987615,"reputation":1799,"user_id":2535987,"accept_rate":67,"display_name":"Monish Sen"},"comment_count":8,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1489645921,"creation_date":1489574018,"answer_id":42807185,"question_id":42806709,"body_markdown":"**Edit :** Understand the vulnerability this would cause before using it. This is by no means recommended for production use. \r\n\r\nThe best way is to create a dummy trustmanager that trusts everything.\r\n\r\n     TrustManager[] dummyTrustManager = new TrustManager[] { new X509TrustManager() {\r\n          public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n            return null;\r\n          }\r\n    \r\n          public void checkClientTrusted(X509Certificate[] certs, String authType) {\r\n          }\r\n    \r\n          public void checkServerTrusted(X509Certificate[] certs, String authType) {\r\n          }\r\n        } };\r\n\r\nThen use the dummy trustmanager to initialize the SSL Context\r\n\r\n    SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n        sc.init(null, dummyTrustManager, new java.security.SecureRandom());\r\n\r\nFinally use the SSLContext to open connection\r\n\r\n    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    \r\n        URL url = new URL(&quot;https://myhost:8913/myservice/service?wsdl&quot;);\r\n\r\n\r\nThis question has already been answered here in more detail\r\n[https://stackoverflow.com/questions/19723415/java-overriding-function-to-disable-ssl-certificate-check][1]\r\n\r\n\r\n**Update:** \r\n\r\nAbove issue is due to certificate signature algorithm not being supported by Java. As per [this post][2], later releases of Java 8 have disabled md5 algorithm.\r\n\r\nTo enable md5 support, locate java.security file under &amp;lt;jre_home&amp;gt;/lib/security\r\nand locate the line (535)\r\n\r\n    jdk.certpath.disabledAlgorithms=MD2, MD5, RSA keySize &lt; 1024, \r\n\r\nand remove MD5\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/19723415/java-overriding-function-to-disable-ssl-certificate-check\r\n  [2]: https://blogs.oracle.com/java-platform-group/entry/strengthening_signatures","title":"How to bypass ssl certificate checking in java","body":"<p><strong>Edit :</strong> Understand the vulnerability this would cause before using it. This is by no means recommended for production use. </p>\n\n<p>The best way is to create a dummy trustmanager that trusts everything.</p>\n\n<pre><code> TrustManager[] dummyTrustManager = new TrustManager[] { new X509TrustManager() {\n      public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n        return null;\n      }\n\n      public void checkClientTrusted(X509Certificate[] certs, String authType) {\n      }\n\n      public void checkServerTrusted(X509Certificate[] certs, String authType) {\n      }\n    } };\n</code></pre>\n\n<p>Then use the dummy trustmanager to initialize the SSL Context</p>\n\n<pre><code>SSLContext sc = SSLContext.getInstance(\"SSL\");\n    sc.init(null, dummyTrustManager, new java.security.SecureRandom());\n</code></pre>\n\n<p>Finally use the SSLContext to open connection</p>\n\n<pre><code>HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n\n    URL url = new URL(\"https://myhost:8913/myservice/service?wsdl\");\n</code></pre>\n\n<p>This question has already been answered here in more detail\n<a href=\"https://stackoverflow.com/questions/19723415/java-overriding-function-to-disable-ssl-certificate-check\">Java: Overriding function to disable SSL certificate check</a></p>\n\n<p><strong>Update:</strong> </p>\n\n<p>Above issue is due to certificate signature algorithm not being supported by Java. As per <a href=\"https://blogs.oracle.com/java-platform-group/entry/strengthening_signatures\" rel=\"noreferrer\">this post</a>, later releases of Java 8 have disabled md5 algorithm.</p>\n\n<p>To enable md5 support, locate java.security file under &lt;jre_home&gt;/lib/security\nand locate the line (535)</p>\n\n<pre><code>jdk.certpath.disabledAlgorithms=MD2, MD5, RSA keySize &lt; 1024, \n</code></pre>\n\n<p>and remove MD5</p>\n"},{"comments":[{"owner":{"account_id":13697,"reputation":7703,"user_id":27658,"display_name":"Johannes Brodwall"},"score":2,"creation_date":1563569159,"post_id":47050878,"comment_id":100757229,"body_markdown":"This is a pretty unsafe approach as it undoes much of the purpose of https. A better approach is to use a TrustManager with a KeyStore containing the issuing CA certificate.","body":"This is a pretty unsafe approach as it undoes much of the purpose of https. A better approach is to use a TrustManager with a KeyStore containing the issuing CA certificate."},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":3,"creation_date":1565264589,"post_id":47050878,"comment_id":101303616,"body_markdown":"this is only for a test environment. not for production.","body":"this is only for a test environment. not for production."},{"owner":{"account_id":7728613,"reputation":794,"user_id":5852506,"display_name":"R13mus"},"score":0,"creation_date":1623782234,"post_id":47050878,"comment_id":120174849,"body_markdown":"thanks ! I was looking for an easy solution like this for a while. Would like to know how to do it in spring boot as well ....","body":"thanks ! I was looking for an easy solution like this for a while. Would like to know how to do it in spring boot as well ...."},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":0,"creation_date":1623837514,"post_id":47050878,"comment_id":120189707,"body_markdown":"@R13mus what is your use case with springboot?","body":"@R13mus what is your use case with springboot?"},{"owner":{"account_id":7728613,"reputation":794,"user_id":5852506,"display_name":"R13mus"},"score":0,"creation_date":1623840427,"post_id":47050878,"comment_id":120190969,"body_markdown":"I have the following open question - https://stackoverflow.com/questions/67917016/error-connecting-to-rabbitmq-instance-with-ssl-using-java-spring-boot. I have a .p12 key file with a password with which I can connect to a server in plain java but in spring boot does not work.","body":"I have the following open question - <a href=\"https://stackoverflow.com/questions/67917016/error-connecting-to-rabbitmq-instance-with-ssl-using-java-spring-boot\" title=\"error connecting to rabbitmq instance with ssl using java spring boot\">stackoverflow.com/questions/67917016/&hellip;</a>. I have a .p12 key file with a password with which I can connect to a server in plain java but in spring boot does not work."},{"owner":{"account_id":22566866,"reputation":799,"user_id":16753754,"display_name":"Anton Cavanaugh"},"score":0,"creation_date":1635871390,"post_id":47050878,"comment_id":123406166,"body_markdown":"Can you tell me what version of httpclient you used in the code.","body":"Can you tell me what version of httpclient you used in the code."},{"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"score":1,"creation_date":1636358326,"post_id":47050878,"comment_id":123525274,"body_markdown":"@AntonCavanaugh I didn&#39;t use HttpClient. I used Java&#39;s core APIs.","body":"@AntonCavanaugh I didn&#39;t use HttpClient. I used Java&#39;s core APIs."},{"owner":{"account_id":22566866,"reputation":799,"user_id":16753754,"display_name":"Anton Cavanaugh"},"score":0,"creation_date":1636920642,"post_id":47050878,"comment_id":123680717,"body_markdown":"Thank you. Yes we are thinking of moving away from HttpClient","body":"Thank you. Yes we are thinking of moving away from HttpClient"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1696843586,"post_id":47050878,"comment_id":136200145,"body_markdown":"`getAcceptedIssuers()` isn&#39;t allowed to return `null`.","body":"<code>getAcceptedIssuers()</code> isn&#39;t allowed to return <code>null</code>."}],"tags":[],"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"comment_count":9,"down_vote_count":1,"up_vote_count":28,"is_accepted":true,"score":27,"last_activity_date":1509525045,"creation_date":1509525045,"answer_id":47050878,"question_id":42806709,"body_markdown":"Using X509ExtendedTrustManager instead of X509TrustManager() solved the problem. Here&#39;s the example:\r\n\r\n    public void trustAllHosts()\r\n        {\r\n            try\r\n            {\r\n                TrustManager[] trustAllCerts = new TrustManager[]{\r\n                        new X509ExtendedTrustManager()\r\n                        {\r\n                            @Override\r\n                            public java.security.cert.X509Certificate[] getAcceptedIssuers()\r\n                            {\r\n                                return null;\r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType)\r\n                            {\r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType)\r\n                            {\r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException\r\n                            {\r\n    \r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException\r\n                            {\r\n    \r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException\r\n                            {\r\n    \r\n                            }\r\n    \r\n                            @Override\r\n                            public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException\r\n                            {\r\n    \r\n                            }\r\n    \r\n                        }\r\n                };\r\n    \r\n                SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n                sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n                HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    \r\n                // Create all-trusting host name verifier\r\n                HostnameVerifier allHostsValid = new  HostnameVerifier()\r\n                {\r\n                    @Override\r\n                    public boolean verify(String hostname, SSLSession session)\r\n                    {\r\n                        return true;\r\n                    }\r\n                };\r\n                // Install the all-trusting host verifier\r\n                HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                log.error(&quot;Error occurred&quot;,e);\r\n            }\r\n        }","title":"How to bypass ssl certificate checking in java","body":"<p>Using X509ExtendedTrustManager instead of X509TrustManager() solved the problem. Here's the example:</p>\n\n<pre><code>public void trustAllHosts()\n    {\n        try\n        {\n            TrustManager[] trustAllCerts = new TrustManager[]{\n                    new X509ExtendedTrustManager()\n                    {\n                        @Override\n                        public java.security.cert.X509Certificate[] getAcceptedIssuers()\n                        {\n                            return null;\n                        }\n\n                        @Override\n                        public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType)\n                        {\n                        }\n\n                        @Override\n                        public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType)\n                        {\n                        }\n\n                        @Override\n                        public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException\n                        {\n\n                        }\n\n                        @Override\n                        public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException\n                        {\n\n                        }\n\n                        @Override\n                        public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException\n                        {\n\n                        }\n\n                        @Override\n                        public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException\n                        {\n\n                        }\n\n                    }\n            };\n\n            SSLContext sc = SSLContext.getInstance(\"SSL\");\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\n            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n\n            // Create all-trusting host name verifier\n            HostnameVerifier allHostsValid = new  HostnameVerifier()\n            {\n                @Override\n                public boolean verify(String hostname, SSLSession session)\n                {\n                    return true;\n                }\n            };\n            // Install the all-trusting host verifier\n            HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\n        }\n        catch (Exception e)\n        {\n            log.error(\"Error occurred\",e);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13697,"reputation":7703,"user_id":27658,"display_name":"Johannes Brodwall"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563569757,"creation_date":1563569757,"answer_id":57119505,"question_id":42806709,"body_markdown":"Instead of using `HttpsURLConnection.setDefaultSSLSocketFactory` and your own implementation of `TrustManager` or `X509ExtendedTrustManager`, you can use `TrustManagerFactory` with a `KeyStore` with the certificate that issued the certificate you need to trust (for a self-signed certificate, this is the same as the host certificate) and call `HttpsURLConnection.setSSLSocketFactory` on the specific instance. This is both less code and avoids the security problems with trusting all HTTPS certicates.\r\n\r\nIn `main`:\r\n\r\n```java\r\n            if (url.getProtocol().toLowerCase().equals(&quot;https&quot;)) {\r\n                HttpsURLConnection https = (HttpsURLConnection) url.openConnection();\r\n                https.setSSLSocketFactory(createSSLSocketFactory());\r\n                http = https;\r\n            }\r\n``` \r\n\r\nThe method `createSSLSocketFactory` looks like this:\r\n\r\n```java\r\n    private static SSLSocketFactory createSSLSocketFactory() {\r\n         File crtFile = new File(&quot;server.crt&quot;);\r\n         Certificate certificate =          CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate(new FileInputStream(crtFile));\r\n\r\n         KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n         keyStore.load(null, null);\r\n         keyStore.setCertificateEntry(&quot;server&quot;, certificate);\r\n\r\n         TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n         trustManagerFactory.init(keyStore);\r\n\r\n         SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n         sslContext.init(null, trustManagerFactory.getTrustManagers(), null);\r\n\r\n         return sslContext.getSocketFactory();\r\n    }\r\n```","title":"How to bypass ssl certificate checking in java","body":"<p>Instead of using <code>HttpsURLConnection.setDefaultSSLSocketFactory</code> and your own implementation of <code>TrustManager</code> or <code>X509ExtendedTrustManager</code>, you can use <code>TrustManagerFactory</code> with a <code>KeyStore</code> with the certificate that issued the certificate you need to trust (for a self-signed certificate, this is the same as the host certificate) and call <code>HttpsURLConnection.setSSLSocketFactory</code> on the specific instance. This is both less code and avoids the security problems with trusting all HTTPS certicates.</p>\n\n<p>In <code>main</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>            if (url.getProtocol().toLowerCase().equals(\"https\")) {\n                HttpsURLConnection https = (HttpsURLConnection) url.openConnection();\n                https.setSSLSocketFactory(createSSLSocketFactory());\n                http = https;\n            }\n</code></pre>\n\n<p>The method <code>createSSLSocketFactory</code> looks like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    private static SSLSocketFactory createSSLSocketFactory() {\n         File crtFile = new File(\"server.crt\");\n         Certificate certificate =          CertificateFactory.getInstance(\"X.509\").generateCertificate(new FileInputStream(crtFile));\n\n         KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\n         keyStore.load(null, null);\n         keyStore.setCertificateEntry(\"server\", certificate);\n\n         TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n         trustManagerFactory.init(keyStore);\n\n         SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n         sslContext.init(null, trustManagerFactory.getTrustManagers(), null);\n\n         return sslContext.getSocketFactory();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10755660,"reputation":80,"user_id":7913696,"display_name":"Adriel Iclodean"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691577698,"creation_date":1691577698,"answer_id":76866969,"question_id":42806709,"body_markdown":"Another way if using httpClient from Apache:\r\n```\r\npublic static CloseableHttpClient getCloseableHttpClient()\r\n{\r\n\tCloseableHttpClient httpClient = null;\r\n\ttry {\r\n\t\thttpClient = HttpClients.custom().setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n\t\t        .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy()\r\n\t\t        {\r\n\t\t            public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException\r\n\t\t            {\r\n\t\t                return true;\r\n\t\t            }\r\n\t\t        }).build()).build();\r\n\r\n\t} catch (KeyManagementException e) {\r\n\t\tLOGGER.error(&quot;KeyManagementException in creating http client instance&quot;, e);\r\n\t} catch (NoSuchAlgorithmException e) {\r\n\t\tLOGGER.error(&quot;NoSuchAlgorithmException in creating http client instance&quot;, e);\r\n\t} catch (KeyStoreException e) {\r\n\t\tLOGGER.error(&quot;KeyStoreException in creating http client instance&quot;, e);\r\n\t}\r\n\treturn httpClient;\r\n}\r\n```\r\n\r\nAnd then:\r\nHttpPost post = new HttpPost(&quot;your uri&quot;);\r\n\r\nCloseableHttpResponse response = getCloseableHttpClient.execute(post);\r\n\r\nAnd of course all the try-catches blocks (or use try with resources)","title":"How to bypass ssl certificate checking in java","body":"<p>Another way if using httpClient from Apache:</p>\n<pre><code>public static CloseableHttpClient getCloseableHttpClient()\n{\n    CloseableHttpClient httpClient = null;\n    try {\n        httpClient = HttpClients.custom().setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy()\n                {\n                    public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException\n                    {\n                        return true;\n                    }\n                }).build()).build();\n\n    } catch (KeyManagementException e) {\n        LOGGER.error(&quot;KeyManagementException in creating http client instance&quot;, e);\n    } catch (NoSuchAlgorithmException e) {\n        LOGGER.error(&quot;NoSuchAlgorithmException in creating http client instance&quot;, e);\n    } catch (KeyStoreException e) {\n        LOGGER.error(&quot;KeyStoreException in creating http client instance&quot;, e);\n    }\n    return httpClient;\n}\n</code></pre>\n<p>And then:\nHttpPost post = new HttpPost(&quot;your uri&quot;);</p>\n<p>CloseableHttpResponse response = getCloseableHttpClient.execute(post);</p>\n<p>And of course all the try-catches blocks (or use try with resources)</p>\n"}],"owner":{"account_id":6919148,"reputation":769,"user_id":5312373,"accept_rate":39,"display_name":"Prasanta Biswas"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117143,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":47050878,"answer_count":5,"score":19,"last_activity_date":1691577698,"creation_date":1489572848,"question_id":42806709,"body_markdown":"I want access a SOAP webservice url having https hosted in a remote vm. I am getting an exception while accessing it using HttpURLConnection.\r\n\r\nHere&#39;s my code:\r\n\r\n    import javax.net.ssl.*;\r\n    import java.io.OutputStream;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    /**\r\n     * Created by prasantabiswas on 07/03/17.\r\n     */\r\n    public class Main\r\n    {\r\n        public static void main(String [] args)\r\n        {\r\n            try\r\n            {\r\n                URL url = new URL(&quot;https://myhost:8913/myservice/service?wsdl&quot;);\r\n                HttpURLConnection http = null;\r\n    \r\n                if (url.getProtocol().toLowerCase().equals(&quot;https&quot;)) {\r\n                    trustAllHosts();\r\n                    HttpsURLConnection https = (HttpsURLConnection) url.openConnection();\r\n                    https.setHostnameVerifier(DO_NOT_VERIFY);\r\n                    http = https;\r\n                } else {\r\n                    http = (HttpURLConnection) url.openConnection();\r\n                }\r\n                String SOAPAction=&quot;&quot;;\r\n    //            http.setRequestProperty(&quot;Content-Length&quot;, String.valueOf(b.length));\r\n                http.setRequestProperty(&quot;Content-Type&quot;, &quot;text/xml; charset=utf-8&quot;);\r\n                http.setRequestProperty(&quot;SOAPAction&quot;, SOAPAction);\r\n                http.setRequestMethod(&quot;GET&quot;);\r\n                http.setDoOutput(true);\r\n                http.setDoInput(true);\r\n                OutputStream out = http.getOutputStream();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        final static HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() {\r\n            public boolean verify(String hostname, SSLSession session) {\r\n                return true;\r\n            }\r\n        };\r\n    \r\n        private static void trustAllHosts() {\r\n            // Create a trust manager that does not validate certificate chains\r\n            TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\r\n                public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n                    return new java.security.cert.X509Certificate[] {};\r\n                }\r\n    \r\n                public void checkClientTrusted(X509Certificate[] chain,\r\n                                               String authType) throws CertificateException\r\n                {\r\n                }\r\n    \r\n                public void checkServerTrusted(X509Certificate[] chain,\r\n                                               String authType) throws CertificateException {\r\n                }\r\n            } };\r\n    \r\n            // Install the all-trusting trust manager\r\n            try {\r\n                SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n                sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n                HttpsURLConnection\r\n                        .setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nI&#39;m getting the following exception:\r\n\r\n    javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: Certificates does not conform to algorithm constraints\r\n    \tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\r\n    \tat sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1949)\r\n    \tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:302)\r\n    \tat sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)\r\n    \tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1509)\r\n    \tat sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)\r\n    \tat sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)\r\n    \tat sun.security.ssl.Handshaker.process_record(Handshaker.java:914)\r\n    \tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1062)\r\n    \tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1403)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1387)\r\n    \tat sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)\r\n    \tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1283)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1258)\r\n    \tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)\r\n    \tat Main.main(Main.java:35)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\r\n    Caused by: java.security.cert.CertificateException: Certificates does not conform to algorithm constraints\r\n    \tat sun.security.ssl.AbstractTrustManagerWrapper.checkAlgorithmConstraints(SSLContextImpl.java:1055)\r\n    \tat sun.security.ssl.AbstractTrustManagerWrapper.checkAdditionalTrust(SSLContextImpl.java:981)\r\n    \tat sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:923)\r\n    \tat sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1491)\r\n    \t... 18 more\r\n\r\nTried different solution from the google search, Non of them worked. I want to avoid using keytool because I will be running my tests on different vm.\r\n\r\nDoes anyone have any solution for this?","title":"How to bypass ssl certificate checking in java","body":"<p>I want access a SOAP webservice url having https hosted in a remote vm. I am getting an exception while accessing it using HttpURLConnection.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>import javax.net.ssl.*;\nimport java.io.OutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\n/**\n * Created by prasantabiswas on 07/03/17.\n */\npublic class Main\n{\n    public static void main(String [] args)\n    {\n        try\n        {\n            URL url = new URL(\"https://myhost:8913/myservice/service?wsdl\");\n            HttpURLConnection http = null;\n\n            if (url.getProtocol().toLowerCase().equals(\"https\")) {\n                trustAllHosts();\n                HttpsURLConnection https = (HttpsURLConnection) url.openConnection();\n                https.setHostnameVerifier(DO_NOT_VERIFY);\n                http = https;\n            } else {\n                http = (HttpURLConnection) url.openConnection();\n            }\n            String SOAPAction=\"\";\n//            http.setRequestProperty(\"Content-Length\", String.valueOf(b.length));\n            http.setRequestProperty(\"Content-Type\", \"text/xml; charset=utf-8\");\n            http.setRequestProperty(\"SOAPAction\", SOAPAction);\n            http.setRequestMethod(\"GET\");\n            http.setDoOutput(true);\n            http.setDoInput(true);\n            OutputStream out = http.getOutputStream();\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n    final static HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() {\n        public boolean verify(String hostname, SSLSession session) {\n            return true;\n        }\n    };\n\n    private static void trustAllHosts() {\n        // Create a trust manager that does not validate certificate chains\n        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\n            public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                return new java.security.cert.X509Certificate[] {};\n            }\n\n            public void checkClientTrusted(X509Certificate[] chain,\n                                           String authType) throws CertificateException\n            {\n            }\n\n            public void checkServerTrusted(X509Certificate[] chain,\n                                           String authType) throws CertificateException {\n            }\n        } };\n\n        // Install the all-trusting trust manager\n        try {\n            SSLContext sc = SSLContext.getInstance(\"SSL\");\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\n            HttpsURLConnection\n                    .setDefaultSSLSocketFactory(sc.getSocketFactory());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>I'm getting the following exception:</p>\n\n<pre><code>javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: Certificates does not conform to algorithm constraints\n    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1949)\n    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:302)\n    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:296)\n    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1509)\n    at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:216)\n    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:979)\n    at sun.security.ssl.Handshaker.process_record(Handshaker.java:914)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1062)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1375)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1403)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1387)\n    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)\n    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1283)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1258)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)\n    at Main.main(Main.java:35)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\nCaused by: java.security.cert.CertificateException: Certificates does not conform to algorithm constraints\n    at sun.security.ssl.AbstractTrustManagerWrapper.checkAlgorithmConstraints(SSLContextImpl.java:1055)\n    at sun.security.ssl.AbstractTrustManagerWrapper.checkAdditionalTrust(SSLContextImpl.java:981)\n    at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(SSLContextImpl.java:923)\n    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1491)\n    ... 18 more\n</code></pre>\n\n<p>Tried different solution from the google search, Non of them worked. I want to avoid using keytool because I will be running my tests on different vm.</p>\n\n<p>Does anyone have any solution for this?</p>\n"},{"tags":["java","jakarta-mail","http-proxy"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1459242500,"post_id":36278073,"comment_id":60186074,"body_markdown":"Your question doesn&#39;t make sense. HTTP proxies are for HTTP. JavaMail uses SMTP and POP3 and IMAP. Not HTTP.","body":"Your question doesn&#39;t make sense. HTTP proxies are for HTTP. JavaMail uses SMTP and POP3 and IMAP. Not HTTP."},{"owner":{"account_id":7612036,"reputation":605,"user_id":5772586,"accept_rate":80,"display_name":"Cain"},"score":0,"creation_date":1459243527,"post_id":36278073,"comment_id":60186764,"body_markdown":"That&#39;s my point. Do you mean that it is no way to use http proxy for javamail. So, does javamial can use socks proxy? then how to use?","body":"That&#39;s my point. Do you mean that it is no way to use http proxy for javamail. So, does javamial can use socks proxy? then how to use?"},{"owner":{"account_id":5237756,"reputation":2929,"user_id":4185813,"accept_rate":58,"display_name":"Ajay Kulkarni"},"score":0,"creation_date":1459244682,"post_id":36278073,"comment_id":60187568,"body_markdown":"why do you want that? SMTP should be good, right?","body":"why do you want that? SMTP should be good, right?"},{"owner":{"account_id":7612036,"reputation":605,"user_id":5772586,"accept_rate":80,"display_name":"Cain"},"score":0,"creation_date":1459299429,"post_id":36278073,"comment_id":60220122,"body_markdown":"I can not get you. SMTP is a protocol to send email. But my point is using POP3 or IMAP to receive mail.","body":"I can not get you. SMTP is a protocol to send email. But my point is using POP3 or IMAP to receive mail."}],"answers":[{"comments":[{"owner":{"account_id":7612036,"reputation":605,"user_id":5772586,"accept_rate":80,"display_name":"Cain"},"score":0,"creation_date":1459302310,"post_id":36292883,"comment_id":60220851,"body_markdown":"Thank you. I know what you mean. I need a program or tool to make the connections through a HTTP proxy sever. So how can I integrate my Java code with Corkscrew or connect as a single Java class? I mean that is there a jar I can use to make it simple.","body":"Thank you. I know what you mean. I need a program or tool to make the connections through a HTTP proxy sever. So how can I integrate my Java code with Corkscrew or connect as a single Java class? I mean that is there a jar I can use to make it simple."},{"owner":{"account_id":1032936,"reputation":29649,"user_id":1040885,"display_name":"Bill Shannon"},"score":0,"creation_date":1459362225,"post_id":36292883,"comment_id":60256821,"body_markdown":"No.  After setting up one of these other programs, you need to configure JavaMail to use them as a SOCKS proxy server.","body":"No.  After setting up one of these other programs, you need to configure JavaMail to use them as a SOCKS proxy server."},{"owner":{"account_id":7612036,"reputation":605,"user_id":5772586,"accept_rate":80,"display_name":"Cain"},"score":0,"creation_date":1459392511,"post_id":36292883,"comment_id":60269476,"body_markdown":"I drew a flow. JavaMail -&gt; SOCKS proxy -&gt; Corkscrew or connect -&gt; http proxy server. Is it right? So Corkscrew or connect is like a adapter that can convert socks proxy to http proxy?","body":"I drew a flow. JavaMail -&gt; SOCKS proxy -&gt; Corkscrew or connect -&gt; http proxy server. Is it right? So Corkscrew or connect is like a adapter that can convert socks proxy to http proxy?"},{"owner":{"account_id":1032936,"reputation":29649,"user_id":1040885,"display_name":"Bill Shannon"},"score":0,"creation_date":1459407149,"post_id":36292883,"comment_id":60274784,"body_markdown":"Yes, it **is** a SOCKS proxy, there&#39;s no separate SOCKS proxy in the flow.","body":"Yes, it <b>is</b> a SOCKS proxy, there&#39;s no separate SOCKS proxy in the flow."},{"owner":{"account_id":7612036,"reputation":605,"user_id":5772586,"accept_rate":80,"display_name":"Cain"},"score":0,"creation_date":1459410313,"post_id":36292883,"comment_id":60276765,"body_markdown":"Thanks for your help.","body":"Thanks for your help."},{"owner":{"account_id":1820603,"reputation":4638,"user_id":1654763,"accept_rate":76,"display_name":"Munchkin"},"score":0,"creation_date":1575972632,"post_id":36292883,"comment_id":104737461,"body_markdown":"I know it&#39;s an old topic, but my question may be relevant for others: Does JavaMail support NonProxyHosts settings? I could not find that in the doc.","body":"I know it&#39;s an old topic, but my question may be relevant for others: Does JavaMail support NonProxyHosts settings? I could not find that in the doc."},{"owner":{"account_id":1032936,"reputation":29649,"user_id":1040885,"display_name":"Bill Shannon"},"score":0,"creation_date":1575996551,"post_id":36292883,"comment_id":104751102,"body_markdown":"No.  Just use a different Session with different proxy configuration when connecting to a different server that doesn&#39;t require a proxy connection.","body":"No.  Just use a different Session with different proxy configuration when connecting to a different server that doesn&#39;t require a proxy connection."}],"tags":[],"owner":{"account_id":1032936,"reputation":29649,"user_id":1040885,"display_name":"Bill Shannon"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1459277886,"creation_date":1459277886,"answer_id":36292883,"question_id":36278073,"body_markdown":"See the JavaMail FAQ:\r\n\r\n  - [How do I configure JavaMail to work through my proxy server?][1]\r\n\r\n&gt; ...  Without such a SOCKS server, if you want to use JavaMail to access mail servers outside the firewall indirectly, you might be able to use a program such as [Corkscrew][2] or [connect][3] to tunnel TCP connections through an HTTP proxy server. JavaMail does not support direct access through an HTTP proxy web server. \r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javamail/faq/index.html#proxy\r\n  [2]: http://en.wikipedia.org/wiki/Corkscrew_%28program%29\r\n  [3]: https://bitbucket.org/gotoh/connect/wiki/Home","title":"How to let javamail support http proxy","body":"<p>See the JavaMail FAQ:</p>\n\n<ul>\n<li><a href=\"http://www.oracle.com/technetwork/java/javamail/faq/index.html#proxy\" rel=\"nofollow\">How do I configure JavaMail to work through my proxy server?</a></li>\n</ul>\n\n<blockquote>\n  <p>...  Without such a SOCKS server, if you want to use JavaMail to access mail servers outside the firewall indirectly, you might be able to use a program such as <a href=\"http://en.wikipedia.org/wiki/Corkscrew_%28program%29\" rel=\"nofollow\">Corkscrew</a> or <a href=\"https://bitbucket.org/gotoh/connect/wiki/Home\" rel=\"nofollow\">connect</a> to tunnel TCP connections through an HTTP proxy server. JavaMail does not support direct access through an HTTP proxy web server. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7012570,"reputation":179,"user_id":13193049,"display_name":"Tamilvanan T"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691577381,"creation_date":1533392833,"answer_id":51686538,"question_id":36278073,"body_markdown":"javamail api 1.6 supports web server proxy\r\n\r\nset these properties \r\n\r\n`mail.protocol.proxy.host`\r\n\r\n`mail.protocol.proxy.port`\r\n\r\nfor example to use smtp you can set as below\r\nfor **smtp** set as\r\n\r\n`mail.smtp.proxy.host`\r\n\r\n`mail.smtp.proxy.port`","title":"How to let javamail support http proxy","body":"<p>javamail api 1.6 supports web server proxy</p>\n<p>set these properties</p>\n<p><code>mail.protocol.proxy.host</code></p>\n<p><code>mail.protocol.proxy.port</code></p>\n<p>for example to use smtp you can set as below\nfor <strong>smtp</strong> set as</p>\n<p><code>mail.smtp.proxy.host</code></p>\n<p><code>mail.smtp.proxy.port</code></p>\n"},{"comments":[{"owner":{"account_id":353880,"reputation":10782,"user_id":691859,"accept_rate":95,"display_name":"2rs2ts"},"score":0,"creation_date":1601487068,"post_id":52855090,"comment_id":113426246,"body_markdown":"Is an IP required or does any hostname work? Many corporate proxies have a DNS name.","body":"Is an IP required or does any hostname work? Many corporate proxies have a DNS name."},{"owner":{"account_id":7012570,"reputation":179,"user_id":13193049,"display_name":"Tamilvanan T"},"score":0,"creation_date":1684760536,"post_id":52855090,"comment_id":134559456,"body_markdown":"Hostname should work. I haven&#39;t tried that yet. But based on my understanding it should work","body":"Hostname should work. I haven&#39;t tried that yet. But based on my understanding it should work"}],"tags":[],"owner":{"account_id":12696755,"reputation":67,"user_id":9224955,"display_name":"Katighar Umesh"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1539780011,"creation_date":1539780011,"answer_id":52855090,"question_id":36278073,"body_markdown":"As per the latest release of Javamail API 1.6.2 , JavaMail supports accessing mail servers through a web proxy server and also authenticating to the proxy server. Please see my code below.\r\n\r\n    import java.io.IOException;\r\n    import java.net.Authenticator;\r\n    import java.net.MalformedURLException;\r\n    import java.net.PasswordAuthentication;\r\n    import java.util.Properties;\r\n    import javax.activation.DataHandler;\r\n    import javax.mail.BodyPart;\r\n    import javax.mail.Flags;\r\n    import javax.mail.Flags.Flag;\r\n    import javax.mail.Folder;\r\n    import javax.mail.Message;\r\n    import javax.mail.MessagingException;\r\n    import javax.mail.Multipart;\r\n    import javax.mail.NoSuchProviderException;\r\n    import javax.mail.Session;\r\n    import javax.mail.Store;\r\n    import javax.mail.search.FlagTerm;\r\n    \r\n    public class ReadMailProxy {\r\n    \r\n    \tpublic static void receiveMail(String userName, String password) {\r\n    \t\ttry {\r\n    \t\t\tString proxyIP = &quot;124.124.124.14&quot;;\r\n    \t\t\tString proxyPort = &quot;4154&quot;;\r\n    \t\t\tString proxyUser = &quot;test&quot;;\r\n    \t\t\tString proxyPassword = &quot;test123&quot;;\r\n    \t\t\tProperties prop = new Properties();\r\n    \t\t\tprop.setProperty(&quot;mail.imaps.proxy.host&quot;, proxyIP);\r\n    \t\t\tprop.setProperty(&quot;mail.imaps.proxy.port&quot;, proxyPort);\r\n    \t\t\tprop.setProperty(&quot;mail.imaps.proxy.user&quot;, proxyUser);\r\n    \t\t\tprop.setProperty(&quot;mail.imaps.proxy.password&quot;, proxyPassword);\r\n    \r\n    \t\t\tSession eSession = Session.getInstance(prop);\r\n    \r\n    \t\t\tStore eStore = eSession.getStore(&quot;imaps&quot;);\r\n    \t\t\teStore.connect(&quot;imap.mail.yahoo.com&quot;, userName, password);\r\n    \r\n    \t\t\tFolder eFolder = eStore.getFolder(&quot;Inbox&quot;);\r\n    \t\t\teFolder.open(Folder.READ_WRITE);\r\n    \t\t\tMessage messages[] = eFolder.search(new FlagTerm(new Flags(Flags.Flag.SEEN), false));\r\n    \t\t\tSystem.out.println(messages.length);\r\n    \t\t\tfor (int i = messages.length - 3; i &lt; messages.length - 2; i++) {\r\n    \t\t\t\tMessage message = messages[i];\r\n    \t\t\t\tSystem.out.println(&quot;Email Number::&quot; + (i + 1));\r\n    \t\t\t\tSystem.out.println(&quot;Subject::&quot; + message.getSubject());\r\n    \t\t\t\tSystem.out.println(&quot;From::&quot; + message.getFrom()[0]);\r\n    \t\t\t\tSystem.out.println(&quot;Date::&quot; + message.getSentDate());\r\n    \r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tMultipart multipart = (Multipart) message.getContent();\r\n    \r\n    \t\t\t\t\tfor (int x = 0; x &lt; multipart.getCount(); x++) {\r\n    \t\t\t\t\t\tBodyPart bodyPart = multipart.getBodyPart(x);\r\n    \r\n    \t\t\t\t\t\tString disposition = bodyPart.getDisposition();\r\n    \r\n    \t\t\t\t\t\tif (disposition != null &amp;&amp; (disposition.equals(BodyPart.ATTACHMENT))) {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;Mail have some attachment : &quot;);\r\n    \r\n    \t\t\t\t\t\t\tDataHandler handler = bodyPart.getDataHandler();\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;file name : &quot; + handler.getName());\r\n    \t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\tSystem.out.println(bodyPart.getContent());\r\n    \t\t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t}\r\n    \t\t\t\t} catch (Exception e) {\r\n    \t\t\t\t\tSystem.out.println(&quot;Content: &quot; + message.getContent().toString());\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tmessage.setFlag(Flag.SEEN, true);\r\n    \t\t\t}\r\n    \t\t\teFolder.close(true);\r\n    \t\t\teStore.close();\r\n    \r\n    \t\t} catch (NoSuchProviderException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (MessagingException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (MalformedURLException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\treceiveMail(&quot;umesh@yahoo.com&quot;, &quot;test123&quot;);\r\n    \t}\r\n    \r\n    }\r\n","title":"How to let javamail support http proxy","body":"<p>As per the latest release of Javamail API 1.6.2 , JavaMail supports accessing mail servers through a web proxy server and also authenticating to the proxy server. Please see my code below.</p>\n\n<pre><code>import java.io.IOException;\nimport java.net.Authenticator;\nimport java.net.MalformedURLException;\nimport java.net.PasswordAuthentication;\nimport java.util.Properties;\nimport javax.activation.DataHandler;\nimport javax.mail.BodyPart;\nimport javax.mail.Flags;\nimport javax.mail.Flags.Flag;\nimport javax.mail.Folder;\nimport javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.Multipart;\nimport javax.mail.NoSuchProviderException;\nimport javax.mail.Session;\nimport javax.mail.Store;\nimport javax.mail.search.FlagTerm;\n\npublic class ReadMailProxy {\n\n    public static void receiveMail(String userName, String password) {\n        try {\n            String proxyIP = \"124.124.124.14\";\n            String proxyPort = \"4154\";\n            String proxyUser = \"test\";\n            String proxyPassword = \"test123\";\n            Properties prop = new Properties();\n            prop.setProperty(\"mail.imaps.proxy.host\", proxyIP);\n            prop.setProperty(\"mail.imaps.proxy.port\", proxyPort);\n            prop.setProperty(\"mail.imaps.proxy.user\", proxyUser);\n            prop.setProperty(\"mail.imaps.proxy.password\", proxyPassword);\n\n            Session eSession = Session.getInstance(prop);\n\n            Store eStore = eSession.getStore(\"imaps\");\n            eStore.connect(\"imap.mail.yahoo.com\", userName, password);\n\n            Folder eFolder = eStore.getFolder(\"Inbox\");\n            eFolder.open(Folder.READ_WRITE);\n            Message messages[] = eFolder.search(new FlagTerm(new Flags(Flags.Flag.SEEN), false));\n            System.out.println(messages.length);\n            for (int i = messages.length - 3; i &lt; messages.length - 2; i++) {\n                Message message = messages[i];\n                System.out.println(\"Email Number::\" + (i + 1));\n                System.out.println(\"Subject::\" + message.getSubject());\n                System.out.println(\"From::\" + message.getFrom()[0]);\n                System.out.println(\"Date::\" + message.getSentDate());\n\n                try {\n                    Multipart multipart = (Multipart) message.getContent();\n\n                    for (int x = 0; x &lt; multipart.getCount(); x++) {\n                        BodyPart bodyPart = multipart.getBodyPart(x);\n\n                        String disposition = bodyPart.getDisposition();\n\n                        if (disposition != null &amp;&amp; (disposition.equals(BodyPart.ATTACHMENT))) {\n                            System.out.println(\"Mail have some attachment : \");\n\n                            DataHandler handler = bodyPart.getDataHandler();\n                            System.out.println(\"file name : \" + handler.getName());\n                        } else {\n                            System.out.println(bodyPart.getContent());\n                        }\n\n                    }\n                } catch (Exception e) {\n                    System.out.println(\"Content: \" + message.getContent().toString());\n                }\n\n                message.setFlag(Flag.SEEN, true);\n            }\n            eFolder.close(true);\n            eStore.close();\n\n        } catch (NoSuchProviderException e) {\n            e.printStackTrace();\n        } catch (MessagingException e) {\n            e.printStackTrace();\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n    public static void main(String[] args) {\n        receiveMail(\"umesh@yahoo.com\", \"test123\");\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11678827,"reputation":21,"user_id":8551327,"display_name":"Tim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607635718,"creation_date":1607635718,"answer_id":65242583,"question_id":36278073,"body_markdown":"The implementation only support basic authentication for web proxy. You can find the source code in  com.sun.mail.util.SocketFetcher.\r\n\r\nSince javamail support NTLM authentication already, it is not hard to support NTLM authentication for web proxy. ","title":"How to let javamail support http proxy","body":"<p>The implementation only support basic authentication for web proxy. You can find the source code in  com.sun.mail.util.SocketFetcher.</p>\n<p>Since javamail support NTLM authentication already, it is not hard to support NTLM authentication for web proxy.</p>\n"}],"owner":{"account_id":7612036,"reputation":605,"user_id":5772586,"accept_rate":80,"display_name":"Cain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8491,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36292883,"answer_count":4,"score":2,"last_activity_date":1691577381,"creation_date":1459236645,"question_id":36278073,"body_markdown":"I found that javamail only support socks. Is there any solution I can use to support http proxy?\r\n\r\n    public class MailConnectionTest {\r\n     public static void main(String args[]) throws MessagingException {\r\n       Properties props = MailConnectionTest.getProperties();\r\n       Session session = Session.getDefaultInstance(props, null);\r\n       String protocol = &quot;pop3&quot;;\r\n       String host = &quot;pop.163.com&quot;;\r\n       String username = &quot;email username&quot;;\r\n       String password = &quot;1Qaz2wsx3edc&amp;&quot;;\r\n       Store store = session.getStore(protocol);\r\n       store.connect(host, username, password);\r\n       System.out.println(&quot;Success&quot;);\r\n    }\r\n    private static Properties getProperties() {\r\n     Properties props = System.getProperties();\r\n     props.put(&quot;mail.debug&quot;, &quot;false&quot;);\r\n     // Proxy\r\n     props.put(&quot;proxySet&quot;, &quot;true&quot;);\r\n     props.put(&quot;http.proxyHost&quot;, &quot;proxyAdderss&quot;);\r\n     props.put(&quot;http.proxyPort&quot;, &quot;8080&quot;);\r\n     return props;\r\n    }\r\n    }","title":"How to let javamail support http proxy","body":"<p>I found that javamail only support socks. Is there any solution I can use to support http proxy?</p>\n\n<pre><code>public class MailConnectionTest {\n public static void main(String args[]) throws MessagingException {\n   Properties props = MailConnectionTest.getProperties();\n   Session session = Session.getDefaultInstance(props, null);\n   String protocol = \"pop3\";\n   String host = \"pop.163.com\";\n   String username = \"email username\";\n   String password = \"1Qaz2wsx3edc&amp;\";\n   Store store = session.getStore(protocol);\n   store.connect(host, username, password);\n   System.out.println(\"Success\");\n}\nprivate static Properties getProperties() {\n Properties props = System.getProperties();\n props.put(\"mail.debug\", \"false\");\n // Proxy\n props.put(\"proxySet\", \"true\");\n props.put(\"http.proxyHost\", \"proxyAdderss\");\n props.put(\"http.proxyPort\", \"8080\");\n return props;\n}\n}\n</code></pre>\n"},{"tags":["java","tomcat","jersey-2.0"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1586419429,"post_id":61069514,"comment_id":108122143,"body_markdown":"Your jars need to be in WEB-INF/lib","body":"Your jars need to be in WEB-INF/lib"},{"owner":{"account_id":12298879,"reputation":33,"user_id":8973603,"display_name":"Mohamed Moustafa"},"score":0,"creation_date":1586430628,"post_id":61069514,"comment_id":108127739,"body_markdown":"@PaulSamsotha I already tried to run it with the jar files in WEB-INF/lib. It didn&#39;t work","body":"@PaulSamsotha I already tried to run it with the jar files in WEB-INF/lib. It didn&#39;t work"}],"answers":[{"tags":[],"owner":{"account_id":12298879,"reputation":33,"user_id":8973603,"display_name":"Mohamed Moustafa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691577198,"creation_date":1586430794,"answer_id":61119851,"question_id":61069514,"body_markdown":"There were a mistake in the dependencies, they were incorrect.\r\nThe working set of dependencies are as follow:\r\n[List of Dependencies][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oMWNM.png\r\n\r\nThe List of all jersey bundles with complete dependencies \r\n&lt;a href=&quot;https://repo1.maven.org/maven2/org/glassfish/jersey/bundles/jaxrs-ri/&quot;&gt;Link&lt;/a&gt;\r\n\r\nOr you can download jersey download the full dependencies bundle from this &lt;a href=&quot;https://repo1.maven.org/maven2/org/glassfish/jersey/bundles/jaxrs-ri/2.26/jaxrs-ri-2.26.zip&quot;&gt;Link&lt;/a&gt;","title":"Jersey 2.25 and Tomcat 9.0.33 always responding 404 Not found","body":"<p>There were a mistake in the dependencies, they were incorrect.\nThe working set of dependencies are as follow:\n<a href=\"https://i.stack.imgur.com/oMWNM.png\" rel=\"nofollow noreferrer\">List of Dependencies</a></p>\n<p>The List of all jersey bundles with complete dependencies\n<a href=\"https://repo1.maven.org/maven2/org/glassfish/jersey/bundles/jaxrs-ri/\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Or you can download jersey download the full dependencies bundle from this <a href=\"https://repo1.maven.org/maven2/org/glassfish/jersey/bundles/jaxrs-ri/2.26/jaxrs-ri-2.26.zip\" rel=\"nofollow noreferrer\">Link</a></p>\n"}],"owner":{"account_id":12298879,"reputation":33,"user_id":8973603,"display_name":"Mohamed Moustafa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61119851,"answer_count":1,"score":1,"last_activity_date":1691577198,"creation_date":1586209841,"question_id":61069514,"body_markdown":"I have been searching for so many days and I can&#39;t find any solution or where is the problem so please don&#39;t mark the question as repeated because it&#39;s really not. I read all the questions and the answers, I tried all the solutions and still not working.\r\n\r\nI am using Intellij, Jersey 2.25 and Tomcat 9.0.33. I am not allowed to use maven so I download all the jar dependencies manually and then reference them from the project structure window by adding them to the libraries and artifacts.\r\nThe server is deployed successfully and when I open http://localhost:8080/ofar_war_exploded/ it shows the content of the index.jsp file. However, when I try to access a resource for example a simple method that returns a string in my OptimizerResource class I get the following response \r\n\r\n*HTTP Status 404 – Not Found\r\nType Status Report\r\nDescription The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.\r\nApache Tomcat/9.0.33*\r\n\r\nThe lib folder contains all the dependencies needed. I tried to add also the lib folder inside WEB-INF I got the same behavior.\r\n[This is the list of all the jars I am using][2]\r\n\r\nThis is the content of the web.xml file.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;\r\n         version=&quot;4.0&quot;&gt;\r\n    &lt;display-name&gt;Optimizer Service&lt;/display-name&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;optimizer&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n            &lt;param-value&gt;rest.resources&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    &lt;/servlet&gt;\r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;optimizer&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\n&lt;/web-app&gt;\r\n```\r\nJust for a testing wise I added only one get method in the OptimizerResource class that returns hello. When I try to request this url http://localhost:8080/ofar_war_exploded/rest/optimizer/hello\r\nI receive 404 not found.\r\n```\r\n\r\n@Path(&quot;optimizer&quot;)\r\npublic class OptimizerResource {\r\n  @GET\r\n    @Path(&quot;hello&quot;)\r\n    @Produces(&quot;text/plain&quot;)\r\n    public String getHello() {\r\n        return &quot;Hello&quot;;\r\n    }\r\n}\r\n```\r\n\r\n  [2]: https://i.stack.imgur.com/pwoE3.png\r\n  [3]: https://i.stack.imgur.com/E1sjM.png","title":"Jersey 2.25 and Tomcat 9.0.33 always responding 404 Not found","body":"<p>I have been searching for so many days and I can't find any solution or where is the problem so please don't mark the question as repeated because it's really not. I read all the questions and the answers, I tried all the solutions and still not working.</p>\n\n<p>I am using Intellij, Jersey 2.25 and Tomcat 9.0.33. I am not allowed to use maven so I download all the jar dependencies manually and then reference them from the project structure window by adding them to the libraries and artifacts.\nThe server is deployed successfully and when I open <a href=\"http://localhost:8080/ofar_war_exploded/\" rel=\"nofollow noreferrer\">http://localhost:8080/ofar_war_exploded/</a> it shows the content of the index.jsp file. However, when I try to access a resource for example a simple method that returns a string in my OptimizerResource class I get the following response </p>\n\n<p><em>HTTP Status 404 – Not Found\nType Status Report\nDescription The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.\nApache Tomcat/9.0.33</em></p>\n\n<p>The lib folder contains all the dependencies needed. I tried to add also the lib folder inside WEB-INF I got the same behavior.\n<a href=\"https://i.stack.imgur.com/pwoE3.png\" rel=\"nofollow noreferrer\">This is the list of all the jars I am using</a></p>\n\n<p>This is the content of the web.xml file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd\"\n         version=\"4.0\"&gt;\n    &lt;display-name&gt;Optimizer Service&lt;/display-name&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;optimizer&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n            &lt;param-value&gt;rest.resources&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;optimizer&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Just for a testing wise I added only one get method in the OptimizerResource class that returns hello. When I try to request this url <a href=\"http://localhost:8080/ofar_war_exploded/rest/optimizer/hello\" rel=\"nofollow noreferrer\">http://localhost:8080/ofar_war_exploded/rest/optimizer/hello</a>\nI receive 404 not found.</p>\n\n<pre><code>\n@Path(\"optimizer\")\npublic class OptimizerResource {\n  @GET\n    @Path(\"hello\")\n    @Produces(\"text/plain\")\n    public String getHello() {\n        return \"Hello\";\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","lambda","static","maven-invoker-plugin"],"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691576998,"creation_date":1691576998,"question_id":76866880,"body_markdown":"I&#39;m trying to get the output of a Maven command in a static block - specifically - resolve the location of the local repository location to a static variable.\r\n\r\nThe application hangs **only** when the `OutputHandler` is a lambda (not a method reference) and **only** when it&#39;s in a static initialiser (not just a static method).\r\n\r\nTake the following minimised example:\r\n\r\n`pom.xml`:\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.me&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-invoker-test&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;maven-invoker&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n`InvokerTest.java`:\r\n```\r\npackage maveninvokertest;\r\n\r\nimport java.io.File;\r\nimport java.util.Collections;\r\nimport org.apache.maven.shared.invoker.*;\r\n\r\npublic class InvokerTest {\r\n    static {\r\n        // doTest();\r\n    }\r\n\r\n    public static void main(final String[] args) {\r\n        doTest();\r\n    }\r\n\r\n    /**\r\n     * Run {@link #runMaven(InvocationOutputHandler)} against a method reference and lambda, both outputting to\r\n     * {@link System#out}\r\n     */\r\n    private static void doTest() {\r\n        System.out.println(&quot;Method Reference:&quot;);\r\n        runMaven(System.out::println);\r\n\r\n        System.out.println(&quot;Lambda:&quot;);\r\n        runMaven(line -&gt; System.out.println(line));\r\n    }\r\n\r\n    /** Run the {@code validate} command against Maven, outputting to {@code outputHandler} */\r\n    private static void runMaven(final InvocationOutputHandler outputHandler) {\r\n\r\n        try {\r\n            final InvocationRequest request = new DefaultInvocationRequest();\r\n\r\n            request.setMavenExecutable(new File(&quot;/opt/homebrew/bin/mvn&quot;));\r\n            request.setGoals(Collections.singletonList(&quot;validate&quot;));\r\n\r\n            request.setOutputHandler(outputHandler);\r\n\r\n            System.out.println(new DefaultInvoker().execute(request).getExitCode());\r\n        } catch (final Throwable t) {\r\n            t.printStackTrace();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis application runs some dummy goal, printing the output to the console and completing normally:\r\n```\r\nMethod Reference:\r\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\r\n[INFO] Building maven-invoker-test 0.0.1-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.038 s\r\n[INFO] Finished at: 2023-08-09T11:23:57+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n0\r\nLambda:\r\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\r\n[INFO] Building maven-invoker-test 0.0.1-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.040 s\r\n[INFO] Finished at: 2023-08-09T11:23:58+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n0\r\n```\r\n\r\nNow lets move the ``doTest`` call from the `main` method into the `static` initialiser block:\r\n\r\n`InvokerTest.java`:\r\n```\r\npackage maveninvokertest;\r\n\r\nimport java.io.File;\r\nimport java.util.Collections;\r\nimport org.apache.maven.shared.invoker.*;\r\n\r\npublic class InvokerTest {\r\n    static {\r\n        doTest();\r\n    }\r\n\r\n    public static void main(final String[] args) {\r\n        // doTest();\r\n    }\r\n\r\n    /**\r\n     * Run {@link #runMaven(InvocationOutputHandler)} against a method reference and lambda, both outputting to\r\n     * {@link System#out}\r\n     */\r\n    private static void doTest() {\r\n        System.out.println(&quot;Method Reference:&quot;);\r\n        runMaven(System.out::println);\r\n\r\n        System.out.println(&quot;Lambda:&quot;);\r\n        runMaven(line -&gt; System.out.println(line));\r\n    }\r\n\r\n    /** Run the {@code validate} command against Maven, outputting to {@code outputHandler} */\r\n    private static void runMaven(final InvocationOutputHandler outputHandler) {\r\n\r\n        try {\r\n            final InvocationRequest request = new DefaultInvocationRequest();\r\n\r\n            request.setMavenExecutable(new File(&quot;/opt/homebrew/bin/mvn&quot;));\r\n            request.setGoals(Collections.singletonList(&quot;validate&quot;));\r\n\r\n            request.setOutputHandler(outputHandler);\r\n\r\n            System.out.println(new DefaultInvoker().execute(request).getExitCode());\r\n        } catch (final Throwable t) {\r\n            t.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis should produce the same output, and yet instead...\r\n\r\n```\r\nMethod Reference:\r\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\r\n[INFO] Building maventest 0.0.1-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.038 s\r\n[INFO] Finished at: 2023-08-09T11:25:37+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n0\r\nLambda:\r\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\r\n```\r\n\r\nIt gets this far and hangs.\r\n\r\nAny ideas?","title":"MavenInvoker hanging when using a lambda OutputHandler in a static initialiser","body":"<p>I'm trying to get the output of a Maven command in a static block - specifically - resolve the location of the local repository location to a static variable.</p>\n<p>The application hangs <strong>only</strong> when the <code>OutputHandler</code> is a lambda (not a method reference) and <strong>only</strong> when it's in a static initialiser (not just a static method).</p>\n<p>Take the following minimised example:</p>\n<p><code>pom.xml</code>:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.me&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-invoker-test&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-invoker&lt;/artifactId&gt;\n            &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p><code>InvokerTest.java</code>:</p>\n<pre><code>package maveninvokertest;\n\nimport java.io.File;\nimport java.util.Collections;\nimport org.apache.maven.shared.invoker.*;\n\npublic class InvokerTest {\n    static {\n        // doTest();\n    }\n\n    public static void main(final String[] args) {\n        doTest();\n    }\n\n    /**\n     * Run {@link #runMaven(InvocationOutputHandler)} against a method reference and lambda, both outputting to\n     * {@link System#out}\n     */\n    private static void doTest() {\n        System.out.println(&quot;Method Reference:&quot;);\n        runMaven(System.out::println);\n\n        System.out.println(&quot;Lambda:&quot;);\n        runMaven(line -&gt; System.out.println(line));\n    }\n\n    /** Run the {@code validate} command against Maven, outputting to {@code outputHandler} */\n    private static void runMaven(final InvocationOutputHandler outputHandler) {\n\n        try {\n            final InvocationRequest request = new DefaultInvocationRequest();\n\n            request.setMavenExecutable(new File(&quot;/opt/homebrew/bin/mvn&quot;));\n            request.setGoals(Collections.singletonList(&quot;validate&quot;));\n\n            request.setOutputHandler(outputHandler);\n\n            System.out.println(new DefaultInvoker().execute(request).getExitCode());\n        } catch (final Throwable t) {\n            t.printStackTrace();\n        }\n    }\n}\n\n</code></pre>\n<p>This application runs some dummy goal, printing the output to the console and completing normally:</p>\n<pre><code>Method Reference:\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\n[INFO] Building maven-invoker-test 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.038 s\n[INFO] Finished at: 2023-08-09T11:23:57+01:00\n[INFO] ------------------------------------------------------------------------\n0\nLambda:\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\n[INFO] Building maven-invoker-test 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.040 s\n[INFO] Finished at: 2023-08-09T11:23:58+01:00\n[INFO] ------------------------------------------------------------------------\n0\n</code></pre>\n<p>Now lets move the <code>doTest</code> call from the <code>main</code> method into the <code>static</code> initialiser block:</p>\n<p><code>InvokerTest.java</code>:</p>\n<pre><code>package maveninvokertest;\n\nimport java.io.File;\nimport java.util.Collections;\nimport org.apache.maven.shared.invoker.*;\n\npublic class InvokerTest {\n    static {\n        doTest();\n    }\n\n    public static void main(final String[] args) {\n        // doTest();\n    }\n\n    /**\n     * Run {@link #runMaven(InvocationOutputHandler)} against a method reference and lambda, both outputting to\n     * {@link System#out}\n     */\n    private static void doTest() {\n        System.out.println(&quot;Method Reference:&quot;);\n        runMaven(System.out::println);\n\n        System.out.println(&quot;Lambda:&quot;);\n        runMaven(line -&gt; System.out.println(line));\n    }\n\n    /** Run the {@code validate} command against Maven, outputting to {@code outputHandler} */\n    private static void runMaven(final InvocationOutputHandler outputHandler) {\n\n        try {\n            final InvocationRequest request = new DefaultInvocationRequest();\n\n            request.setMavenExecutable(new File(&quot;/opt/homebrew/bin/mvn&quot;));\n            request.setGoals(Collections.singletonList(&quot;validate&quot;));\n\n            request.setOutputHandler(outputHandler);\n\n            System.out.println(new DefaultInvoker().execute(request).getExitCode());\n        } catch (final Throwable t) {\n            t.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>This should produce the same output, and yet instead...</p>\n<pre><code>Method Reference:\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; com.me:maventest &gt;--------------------------\n[INFO] Building maventest 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.038 s\n[INFO] Finished at: 2023-08-09T11:25:37+01:00\n[INFO] ------------------------------------------------------------------------\n0\nLambda:\n[WARN] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.\n</code></pre>\n<p>It gets this far and hangs.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","apache-camel","apache-camel-3"],"answers":[{"tags":[],"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691576954,"creation_date":1691576954,"answer_id":76866874,"question_id":76851538,"body_markdown":"You are likely creating an uber/fat-jar, and then make sure to do this accordingly to: https://camel.apache.org/manual/camel-maven-plugin.html#_camelprepare_fatjar","title":"Apache Camel fails to create Route and produces bizarre Error message","body":"<p>You are likely creating an uber/fat-jar, and then make sure to do this accordingly to: <a href=\"https://camel.apache.org/manual/camel-maven-plugin.html#_camelprepare_fatjar\" rel=\"nofollow noreferrer\">https://camel.apache.org/manual/camel-maven-plugin.html#_camelprepare_fatjar</a></p>\n"}],"owner":{"account_id":29176702,"reputation":3,"user_id":22351810,"display_name":"Krubsacius"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76866874,"answer_count":1,"score":0,"last_activity_date":1691576954,"creation_date":1691410001,"question_id":76851538,"body_markdown":"I have developed a Java-Application using Apache Camel to archive a bunch of previously sorted files based upon the name of the subfolder they have been placed in. It works as expected running in Eclipse but fails to create the Route when I attempt to run the app outside of Eclipse, producing the following Error Message every time:\r\n\r\n```\r\n2023-08-07 13:20:03,527 [main] ERROR MyClass  - Exception occured: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: &gt;&gt;&gt; Aggregate[LotName -&gt; [SetHeader[CamelFileName, simple{${in.header.LotName}.zip}], Log[Finished Zipping: ${file:name}], DynamicTo[file:${in.header.CreatedPath}?fileName=${file:name.noext}-2023-08-07T13-20-03-328.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}]]] &lt;&lt;&lt; in route: Route(route1)[From[EndpointA... because of Error parsing [1000] as a java.time.Duration.\r\norg.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: &gt;&gt;&gt; Aggregate[LotName -&gt; [SetHeader[CamelFileName, simple{${in.header.LotName}.zip}], Log[Finished Zipping: ${file:name}], DynamicTo[file:${in.header.CreatedPath}?fileName=${file:name.noext}-2023-08-07T13-20-03-328.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}]]] &lt;&lt;&lt; in route: Route(route1)[From[EndpointA because of Error parsing [1000] as a java.time.Duration.\r\n        at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:241)\r\n        at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:75)\r\n        at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)\r\n        at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:874)\r\n        at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:764)\r\n        at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2862)\r\n        at org.apache.camel.support.service.BaseService.init(BaseService.java:83)\r\n        at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2568)\r\n        at org.apache.camel.support.service.BaseService.start(BaseService.java:111)\r\n        at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2587)\r\n        at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:253)\r\n        at org.apache.camel.main.Main.doStart(Main.java:116)\r\n        at org.apache.camel.support.service.BaseService.start(BaseService.java:119)\r\n        at org.apache.camel.main.MainSupport.run(MainSupport.java:69)\r\n        at MyClass.main(MyClass.java:80)\r\nCaused by: java.lang.IllegalArgumentException: Error parsing [1000] as a java.time.Duration.\r\n        at org.apache.camel.support.CamelContextHelper.parse(CamelContextHelper.java:556)\r\n        at org.apache.camel.support.CamelContextHelper.parseDuration(CamelContextHelper.java:500)\r\n        at org.apache.camel.reifier.AbstractReifier.parseDuration(AbstractReifier.java:78)\r\n        at org.apache.camel.reifier.AggregateReifier.createAggregator(AggregateReifier.java:203)\r\n        at org.apache.camel.reifier.AggregateReifier.createProcessor(AggregateReifier.java:54)\r\n        at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:838)\r\n        at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:579)\r\n        at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:237)\r\n        ... 14 more\r\nCaused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: java.lang.String to the required type: java.time.Duration with value 1000\r\n        at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:275)\r\n        at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:207)\r\n        at org.apache.camel.support.CamelContextHelper.parse(CamelContextHelper.java:553)\r\n        ... 21 more\r\n```\r\n\r\nI have no idea where the Duration-Object comes from, what its purpose is or why its value is 1000. \r\n\r\nMy Route: \r\n```\r\npublic void configure() throws Exception {\r\n\t\t/* Takes files from origin folder, checks for valid file names and deletes files in their source folders */\r\n\t\tfrom(FILECOMPONENT + sourceFolder + &quot;?recursive=true&amp;include=RAW(&quot;+ lotFileRegex +&quot;)&amp;delete=true&quot;)\r\n\t\t.log(LoggingLevel.INFO, &quot;Starting to process file: ${file:name}&quot;)\r\n\t\t// Extract our criteria to aggregate\r\n\t\t.process(new SubfolderExtractor())\r\n\t\t// Aggregate Files based on Header &quot;LotName&quot;\r\n\t\t.log(LoggingLevel.INFO, &quot;Currently aggregating: ${in.header.LotName}&quot;)\r\n\t\t.aggregate(header(&quot;LotName&quot;), new ZipAggregationStrategy())\r\n        .completionFromBatchConsumer().eagerCheckCompletion()\r\n        .completionOnNewCorrelationGroup() // finish our archive when the subfolder is empty\r\n        // Set Header FILE_NAME to LotName.zip\r\n        .setHeader(Exchange.FILE_NAME, simple(&quot;${in.header.LotName}.zip&quot;))\r\n        .log(LoggingLevel.INFO, &quot;Finished Zipping: ${file:name}&quot;)\r\n        /* Drop Zip-Archives in same location as their origin, add the current date to make it unique */\r\n        .toD(FILECOMPONENT + &quot;${in.header.CreatedPath}?fileName=${file:name.noext}-&quot;+LocalDateTime.now().toString().replace(&#39;:&#39;, &#39;-&#39;).replace(&#39;.&#39;, &#39;-&#39;)+&quot;.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}&quot;);\r\n```\r\nThe use of raw java code in the .toD() at the end replaced an expression in Camel&#39;s built-in &quot;Simple&quot; language, as i assumed it was causing the problem. However, it did not change the fact that this route works in Eclipse but not outside of it, in fact it produces the same Error message. \r\n\r\nI am using Java 8 and Camel 3.14.7. The routes are run using Camel&#39;s Main Class. ","title":"Apache Camel fails to create Route and produces bizarre Error message","body":"<p>I have developed a Java-Application using Apache Camel to archive a bunch of previously sorted files based upon the name of the subfolder they have been placed in. It works as expected running in Eclipse but fails to create the Route when I attempt to run the app outside of Eclipse, producing the following Error Message every time:</p>\n<pre><code>2023-08-07 13:20:03,527 [main] ERROR MyClass  - Exception occured: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: &gt;&gt;&gt; Aggregate[LotName -&gt; [SetHeader[CamelFileName, simple{${in.header.LotName}.zip}], Log[Finished Zipping: ${file:name}], DynamicTo[file:${in.header.CreatedPath}?fileName=${file:name.noext}-2023-08-07T13-20-03-328.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}]]] &lt;&lt;&lt; in route: Route(route1)[From[EndpointA... because of Error parsing [1000] as a java.time.Duration.\norg.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: &gt;&gt;&gt; Aggregate[LotName -&gt; [SetHeader[CamelFileName, simple{${in.header.LotName}.zip}], Log[Finished Zipping: ${file:name}], DynamicTo[file:${in.header.CreatedPath}?fileName=${file:name.noext}-2023-08-07T13-20-03-328.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}]]] &lt;&lt;&lt; in route: Route(route1)[From[EndpointA because of Error parsing [1000] as a java.time.Duration.\n        at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:241)\n        at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:75)\n        at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)\n        at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:874)\n        at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:764)\n        at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2862)\n        at org.apache.camel.support.service.BaseService.init(BaseService.java:83)\n        at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2568)\n        at org.apache.camel.support.service.BaseService.start(BaseService.java:111)\n        at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2587)\n        at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:253)\n        at org.apache.camel.main.Main.doStart(Main.java:116)\n        at org.apache.camel.support.service.BaseService.start(BaseService.java:119)\n        at org.apache.camel.main.MainSupport.run(MainSupport.java:69)\n        at MyClass.main(MyClass.java:80)\nCaused by: java.lang.IllegalArgumentException: Error parsing [1000] as a java.time.Duration.\n        at org.apache.camel.support.CamelContextHelper.parse(CamelContextHelper.java:556)\n        at org.apache.camel.support.CamelContextHelper.parseDuration(CamelContextHelper.java:500)\n        at org.apache.camel.reifier.AbstractReifier.parseDuration(AbstractReifier.java:78)\n        at org.apache.camel.reifier.AggregateReifier.createAggregator(AggregateReifier.java:203)\n        at org.apache.camel.reifier.AggregateReifier.createProcessor(AggregateReifier.java:54)\n        at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:838)\n        at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:579)\n        at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:237)\n        ... 14 more\nCaused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: java.lang.String to the required type: java.time.Duration with value 1000\n        at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:275)\n        at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:207)\n        at org.apache.camel.support.CamelContextHelper.parse(CamelContextHelper.java:553)\n        ... 21 more\n</code></pre>\n<p>I have no idea where the Duration-Object comes from, what its purpose is or why its value is 1000.</p>\n<p>My Route:</p>\n<pre><code>public void configure() throws Exception {\n        /* Takes files from origin folder, checks for valid file names and deletes files in their source folders */\n        from(FILECOMPONENT + sourceFolder + &quot;?recursive=true&amp;include=RAW(&quot;+ lotFileRegex +&quot;)&amp;delete=true&quot;)\n        .log(LoggingLevel.INFO, &quot;Starting to process file: ${file:name}&quot;)\n        // Extract our criteria to aggregate\n        .process(new SubfolderExtractor())\n        // Aggregate Files based on Header &quot;LotName&quot;\n        .log(LoggingLevel.INFO, &quot;Currently aggregating: ${in.header.LotName}&quot;)\n        .aggregate(header(&quot;LotName&quot;), new ZipAggregationStrategy())\n        .completionFromBatchConsumer().eagerCheckCompletion()\n        .completionOnNewCorrelationGroup() // finish our archive when the subfolder is empty\n        // Set Header FILE_NAME to LotName.zip\n        .setHeader(Exchange.FILE_NAME, simple(&quot;${in.header.LotName}.zip&quot;))\n        .log(LoggingLevel.INFO, &quot;Finished Zipping: ${file:name}&quot;)\n        /* Drop Zip-Archives in same location as their origin, add the current date to make it unique */\n        .toD(FILECOMPONENT + &quot;${in.header.CreatedPath}?fileName=${file:name.noext}-&quot;+LocalDateTime.now().toString().replace(':', '-').replace('.', '-')+&quot;.${file:ext}&amp;fileExist=Move&amp;moveExisting=${file:name.noext}-1.${file:ext}&quot;);\n</code></pre>\n<p>The use of raw java code in the .toD() at the end replaced an expression in Camel's built-in &quot;Simple&quot; language, as i assumed it was causing the problem. However, it did not change the fact that this route works in Eclipse but not outside of it, in fact it produces the same Error message.</p>\n<p>I am using Java 8 and Camel 3.14.7. The routes are run using Camel's Main Class.</p>\n"},{"tags":["java","xml","validation","xpath","xsd"],"comments":[{"owner":{"account_id":204410,"reputation":4876,"user_id":452614,"accept_rate":100,"display_name":"Ludovic Kuty"},"score":0,"creation_date":1391790073,"post_id":11521132,"comment_id":32690137,"body_markdown":"Why don&#39;t you just run an XPath expression against the XSD ? Why XSOM ?","body":"Why don&#39;t you just run an XPath expression against the XSD ? Why XSOM ?"}],"owner":{"account_id":1329532,"reputation":311,"user_id":1273707,"display_name":"Dmitry Sh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691576750,"creation_date":1342522833,"question_id":11521132,"body_markdown":"I have XML document builded by XSD. Each element in XSD with annotation.\r\nWhen i validate XML by XSD i can generate an XPath of error (using Stack), how can i read annotation from XSD with XPath of element?\r\n\r\ni am using XSOM for read XSD schema.","title":"Read annotation from XSD by element XPath","body":"<p>I have XML document builded by XSD. Each element in XSD with annotation.\nWhen i validate XML by XSD i can generate an XPath of error (using Stack), how can i read annotation from XSD with XPath of element?</p>\n\n<p>i am using XSOM for read XSD schema.</p>\n"},{"tags":["java","csv","apache-spark"],"comments":[{"owner":{"account_id":29190269,"reputation":1,"user_id":22362537,"display_name":"help pleh"},"score":0,"creation_date":1692020978,"post_id":76866662,"comment_id":135565508,"body_markdown":"Overall, Is it possible to read file  which mounted path in docker from outside of the docker , from java app","body":"Overall, Is it possible to read file  which mounted path in docker from outside of the docker , from java app"}],"owner":{"account_id":29190269,"reputation":1,"user_id":22362537,"display_name":"help pleh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691576707,"creation_date":1691575456,"question_id":76866662,"body_markdown":"When I tried to read csv files with Spring boot app on my local machine and apache/spark on docker container exception occurred.\r\n    \r\n```\r\n org.apache.spark.sql.AnalysisException: [PATH_NOT_FOUND] Path does not exist: file:/home/sparkdata/data.csv.\r\n```\r\nI connected to the spark master remotely(I am mentioning on docker) successfully. here is my java spring SparkConfig and and SparkSession code:\r\n   \r\n```\r\nSparkConf sparkConf = new SparkConf()\r\n                .setAppName(&quot;appName&quot;)\r\n                .setSparkHome(&quot;home&quot;)\r\n                .setMaster(&quot;spark://localhost:7077&quot;)\r\nDataset&lt;Row&gt; dataset=sparkSession\r\n                .read()\r\n                .format(&quot;csv&quot;)\r\n                .option(&quot;header&quot;, true)\r\n                .load(&quot;/home/sparkdata/data.csv&quot;);\r\n        dataset.printSchema();\r\n```\r\nand docker compose yml here which I mounted to the docker container my localstorage and some other configs: \r\n    version: &#39;3.4&#39;\r\n\r\n```\r\n`services:\r\n  spark:\r\n    container_name: master\r\n    image: docker.io/bitnami/spark:latest\r\n    environment:\r\n      - SPARK_MODE=master\r\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\r\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\r\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\r\n      - SPARK_SSL_ENABLED=no\r\n    ports:\r\n      - &#39;8080:8080&#39;\r\n      - &#39;7077:7077&#39;\r\n    networks:\r\n      - spark-network\r\n    volumes:\r\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\r\n\r\n  spark-worker-1:\r\n    container_name: worker_1\r\n    image: docker.io/bitnami/spark:latest\r\n    depends_on:\r\n      - spark\r\n    environment:\r\n      - SPARK_MODE=worker\r\n      - SPARK_MASTER_URL=spark://spark:7077\r\n      - SPARK_WORKER_MEMORY=2G\r\n      - SPARK_WORKER_CORES=2\r\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\r\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\r\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\r\n      - SPARK_SSL_ENABLED=no\r\n      - SPARK_WORKER_PORT=9091\r\n    ports:\r\n      - &quot;9091:8080&quot;\r\n      - &quot;7001:7000&quot;\r\n    networks:\r\n      - spark-network\r\n    volumes:\r\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\r\n  spark-worker-2:\r\n    container_name: worker_2\r\n    image: docker.io/bitnami/spark:latest\r\n    depends_on:\r\n      - spark\r\n    environment:\r\n      - SPARK_MODE=worker\r\n      - SPARK_MASTER_URL=spark://spark:7077\r\n      - SPARK_WORKER_MEMORY=2G\r\n      - SPARK_WORKER_CORES=2\r\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\r\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\r\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\r\n      - SPARK_SSL_ENABLED=no\r\n      - SPARK_WORKER_PORT=9092\r\n    ports:\r\n      - &quot;9092:8080&quot;\r\n      - &quot;7002:7000&quot;\r\n    networks:\r\n      - spark-network\r\n    volumes:\r\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\r\nnetworks:\r\n  spark-network:\r\n    driver: bridge`\r\n```\r\nWhen I run compose file, it works fine well, I can see mounted path to docker, and file can be seen in docker spark container. How can I read file with spring boot remotely connected apache spark master on the docker container. Please help me to solve this problem. \r\n      \r\n  ","title":"Spring Boot Application read csv file on docker container apache spark","body":"<p>When I tried to read csv files with Spring boot app on my local machine and apache/spark on docker container exception occurred.</p>\n<pre><code> org.apache.spark.sql.AnalysisException: [PATH_NOT_FOUND] Path does not exist: file:/home/sparkdata/data.csv.\n</code></pre>\n<p>I connected to the spark master remotely(I am mentioning on docker) successfully. here is my java spring SparkConfig and and SparkSession code:</p>\n<pre><code>SparkConf sparkConf = new SparkConf()\n                .setAppName(&quot;appName&quot;)\n                .setSparkHome(&quot;home&quot;)\n                .setMaster(&quot;spark://localhost:7077&quot;)\nDataset&lt;Row&gt; dataset=sparkSession\n                .read()\n                .format(&quot;csv&quot;)\n                .option(&quot;header&quot;, true)\n                .load(&quot;/home/sparkdata/data.csv&quot;);\n        dataset.printSchema();\n</code></pre>\n<p>and docker compose yml here which I mounted to the docker container my localstorage and some other configs:\nversion: '3.4'</p>\n<pre><code>`services:\n  spark:\n    container_name: master\n    image: docker.io/bitnami/spark:latest\n    environment:\n      - SPARK_MODE=master\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\n      - SPARK_SSL_ENABLED=no\n    ports:\n      - '8080:8080'\n      - '7077:7077'\n    networks:\n      - spark-network\n    volumes:\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\n\n  spark-worker-1:\n    container_name: worker_1\n    image: docker.io/bitnami/spark:latest\n    depends_on:\n      - spark\n    environment:\n      - SPARK_MODE=worker\n      - SPARK_MASTER_URL=spark://spark:7077\n      - SPARK_WORKER_MEMORY=2G\n      - SPARK_WORKER_CORES=2\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\n      - SPARK_SSL_ENABLED=no\n      - SPARK_WORKER_PORT=9091\n    ports:\n      - &quot;9091:8080&quot;\n      - &quot;7001:7000&quot;\n    networks:\n      - spark-network\n    volumes:\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\n  spark-worker-2:\n    container_name: worker_2\n    image: docker.io/bitnami/spark:latest\n    depends_on:\n      - spark\n    environment:\n      - SPARK_MODE=worker\n      - SPARK_MASTER_URL=spark://spark:7077\n      - SPARK_WORKER_MEMORY=2G\n      - SPARK_WORKER_CORES=2\n      - SPARK_RPC_AUTHENTICATION_ENABLED=no\n      - SPARK_RPC_ENCRYPTION_ENABLED=no\n      - SPARK_LOCAL_STORAGE_ENCRYPTION_ENABLED=no\n      - SPARK_SSL_ENABLED=no\n      - SPARK_WORKER_PORT=9092\n    ports:\n      - &quot;9092:8080&quot;\n      - &quot;7002:7000&quot;\n    networks:\n      - spark-network\n    volumes:\n      - &quot;/Users/sparkdata:/home/sparkdata:rw&quot;\nnetworks:\n  spark-network:\n    driver: bridge`\n</code></pre>\n<p>When I run compose file, it works fine well, I can see mounted path to docker, and file can be seen in docker spark container. How can I read file with spring boot remotely connected apache spark master on the docker container. Please help me to solve this problem.</p>\n"},{"tags":["java","android","kotlin","material-design","datetimepicker"],"comments":[{"owner":{"account_id":1158009,"reputation":732,"user_id":1138106,"accept_rate":40,"display_name":"Krutik"},"score":0,"creation_date":1469598387,"post_id":38604157,"comment_id":64596265,"body_markdown":"you can check this https://github.com/jjobes/SlideDateTimePicker","body":"you can check this <a href=\"https://github.com/jjobes/SlideDateTimePicker\" rel=\"nofollow noreferrer\">github.com/jjobes/SlideDateTimePicker</a>"}],"answers":[{"comments":[{"owner":{"account_id":7322227,"reputation":646,"user_id":5577853,"accept_rate":75,"display_name":"Anurag Shrivastava"},"score":0,"creation_date":1520342247,"post_id":38604615,"comment_id":85268149,"body_markdown":"but it is showing in pink color, where can I change the color, or set the theme please help.","body":"but it is showing in pink color, where can I change the color, or set the theme please help."},{"owner":{"account_id":4964174,"reputation":728,"user_id":3994127,"accept_rate":50,"display_name":"Raghav Satyadev"},"score":0,"creation_date":1524745691,"post_id":38604615,"comment_id":87101901,"body_markdown":"@AnuragShrivastava now you can change colors also, you have to change in DialogTheme. see this link : https://stackoverflow.com/a/50042997/3994127","body":"@AnuragShrivastava now you can change colors also, you have to change in DialogTheme. see this link : <a href=\"https://stackoverflow.com/a/50042997/3994127\">stackoverflow.com/a/50042997/3994127</a>"},{"owner":{"account_id":4156384,"reputation":2910,"user_id":3407571,"accept_rate":53,"display_name":"Alex Lord Mordor"},"score":0,"creation_date":1534384315,"post_id":38604615,"comment_id":90688999,"body_markdown":"just what I was looking for, but when I try to `setDate` with a Date, the minutes still being the current time minutes. any idea why?","body":"just what I was looking for, but when I try to <code>setDate</code> with a Date, the minutes still being the current time minutes. any idea why?"},{"owner":{"account_id":8299955,"reputation":2298,"user_id":6238866,"display_name":"Mayur Patel"},"score":0,"creation_date":1534398748,"post_id":38604615,"comment_id":90692121,"body_markdown":"@AlexLordMordor can you pls elaborate more in details?","body":"@AlexLordMordor can you pls elaborate more in details?"},{"owner":{"account_id":4156384,"reputation":2910,"user_id":3407571,"accept_rate":53,"display_name":"Alex Lord Mordor"},"score":1,"creation_date":1534438685,"post_id":38604615,"comment_id":90715584,"body_markdown":"I nottice that with your answer opens the dialog using default or first established date and time using current, your class have a function to set a date and time using a `Date` value, BUT! this works well except for the minutes, the minutes still being the current or default.\nI did a little hack adding a Date variable `hacked_date` that initalizes with the `setDate` function, and instead of doing `timePicker.setCurrentMinute(selectedMinute);` in the `showDialog()` I used `timePicker.setCurrentMinute(hacked_date.getMinutes());`... Seems to be a bug in the Calendar.MINUTE value","body":"I nottice that with your answer opens the dialog using default or first established date and time using current, your class have a function to set a date and time using a <code>Date</code> value, BUT! this works well except for the minutes, the minutes still being the current or default. I did a little hack adding a Date variable <code>hacked_date</code> that initalizes with the <code>setDate</code> function, and instead of doing <code>timePicker.setCurrentMinute(selectedMinute);</code> in the <code>showDialog()</code> I used <code>timePicker.setCurrentMinute(hacked_date.getMinutes());</code>... Seems to be a bug in the Calendar.MINUTE value"},{"owner":{"account_id":8299955,"reputation":2298,"user_id":6238866,"display_name":"Mayur Patel"},"score":0,"creation_date":1534478962,"post_id":38604615,"comment_id":90727537,"body_markdown":"Ohhh That&#39;s Great. Thank you @AlexLordMordor.","body":"Ohhh That&#39;s Great. Thank you @AlexLordMordor."}],"tags":[],"owner":{"account_id":8299955,"reputation":2298,"user_id":6238866,"display_name":"Mayur Patel"},"comment_count":6,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1557271012,"creation_date":1469598246,"answer_id":38604615,"question_id":38604157,"body_markdown":"Try this code : \r\n\r\nCustomDateTimePicker.java\r\n\r\n    import android.app.Activity;\r\n    import android.app.Dialog;\r\n    import android.content.DialogInterface;\r\n    import android.view.Gravity;\r\n    import android.view.View;\r\n    import android.view.Window;\r\n    import android.widget.Button;\r\n    import android.widget.DatePicker;\r\n    import android.widget.FrameLayout;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.TimePicker;\r\n    import android.widget.ViewSwitcher;\r\n    \r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    \r\n    /**\r\n     * Created by admin on 6/29/2016.\r\n     */\r\n    public class CustomDateTimePicker implements View.OnClickListener {\r\n        private DatePicker datePicker;\r\n        private TimePicker timePicker;\r\n        private ViewSwitcher viewSwitcher;\r\n    \r\n        private final int SET_DATE = 100, SET_TIME = 101, SET = 102, CANCEL = 103;\r\n    \r\n        private Button btn_setDate, btn_setTime, btn_set, btn_cancel;\r\n    \r\n        private Calendar calendar_date = null;\r\n    \r\n        private Activity activity;\r\n    \r\n        private ICustomDateTimeListener iCustomDateTimeListener = null;\r\n    \r\n        private Dialog dialog;\r\n    \r\n        private boolean is24HourView = true, isAutoDismiss = true;\r\n    \r\n        private int selectedHour, selectedMinute;\r\n    \r\n        public CustomDateTimePicker(Activity a,\r\n                                    ICustomDateTimeListener customDateTimeListener) {\r\n            activity = a;\r\n            iCustomDateTimeListener = customDateTimeListener;\r\n    \r\n            dialog = new Dialog(activity);\r\n            dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {\r\n                @Override\r\n                public void onDismiss(DialogInterface dialog) {\r\n                    resetData();\r\n                }\r\n            });\r\n    \r\n            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n            View dialogView = getDateTimePickerLayout();\r\n            dialog.setContentView(dialogView);\r\n        }\r\n    \r\n        public View getDateTimePickerLayout() {\r\n            LinearLayout.LayoutParams linear_match_wrap = new LinearLayout.LayoutParams(\r\n                    LinearLayout.LayoutParams.MATCH_PARENT,\r\n                    LinearLayout.LayoutParams.MATCH_PARENT);\r\n            LinearLayout.LayoutParams linear_wrap_wrap = new LinearLayout.LayoutParams(\r\n                    LinearLayout.LayoutParams.WRAP_CONTENT,\r\n                    LinearLayout.LayoutParams.WRAP_CONTENT);\r\n            FrameLayout.LayoutParams frame_match_wrap = new FrameLayout.LayoutParams(\r\n                    FrameLayout.LayoutParams.MATCH_PARENT,\r\n                    FrameLayout.LayoutParams.WRAP_CONTENT);\r\n    \r\n            LinearLayout.LayoutParams button_params = new LinearLayout.LayoutParams(\r\n                    0, LinearLayout.LayoutParams.WRAP_CONTENT, 1.0f);\r\n    \r\n            LinearLayout linear_main = new LinearLayout(activity);\r\n            linear_main.setLayoutParams(linear_match_wrap);\r\n            linear_main.setOrientation(LinearLayout.VERTICAL);\r\n            linear_main.setGravity(Gravity.CENTER);\r\n    \r\n            LinearLayout linear_child = new LinearLayout(activity);\r\n            linear_child.setLayoutParams(linear_wrap_wrap);\r\n            linear_child.setOrientation(LinearLayout.VERTICAL);\r\n    \r\n            LinearLayout linear_top = new LinearLayout(activity);\r\n            linear_top.setLayoutParams(linear_match_wrap);\r\n    \r\n            btn_setDate = new Button(activity);\r\n            btn_setDate.setLayoutParams(button_params);\r\n            btn_setDate.setText(&quot;Set Date&quot;);\r\n            btn_setDate.setId(SET_DATE);\r\n            btn_setDate.setOnClickListener(this);\r\n    \r\n            btn_setTime = new Button(activity);\r\n            btn_setTime.setLayoutParams(button_params);\r\n            btn_setTime.setText(&quot;Set Time&quot;);\r\n            btn_setTime.setId(SET_TIME);\r\n            btn_setTime.setOnClickListener(this);\r\n    \r\n            linear_top.addView(btn_setDate);\r\n            linear_top.addView(btn_setTime);\r\n    \r\n            viewSwitcher = new ViewSwitcher(activity);\r\n            viewSwitcher.setLayoutParams(frame_match_wrap);\r\n    \r\n            datePicker = new DatePicker(activity);\r\n            timePicker = new TimePicker(activity);\r\n            timePicker.setOnTimeChangedListener(new TimePicker.OnTimeChangedListener() {\r\n                @Override\r\n                public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {\r\n                    selectedHour = hourOfDay;\r\n                    selectedMinute = minute;\r\n                }\r\n            });\r\n    \r\n            viewSwitcher.addView(timePicker);\r\n            viewSwitcher.addView(datePicker);\r\n    \r\n            LinearLayout linear_bottom = new LinearLayout(activity);\r\n            linear_match_wrap.topMargin = 8;\r\n            linear_bottom.setLayoutParams(linear_match_wrap);\r\n    \r\n            btn_set = new Button(activity);\r\n            btn_set.setLayoutParams(button_params);\r\n            btn_set.setText(&quot;Set&quot;);\r\n            btn_set.setId(SET);\r\n            btn_set.setOnClickListener(this);\r\n    \r\n            btn_cancel = new Button(activity);\r\n            btn_cancel.setLayoutParams(button_params);\r\n            btn_cancel.setText(&quot;Cancel&quot;);\r\n            btn_cancel.setId(CANCEL);\r\n            btn_cancel.setOnClickListener(this);\r\n    \r\n            linear_bottom.addView(btn_set);\r\n            linear_bottom.addView(btn_cancel);\r\n    \r\n            linear_child.addView(linear_top);\r\n            linear_child.addView(viewSwitcher);\r\n            linear_child.addView(linear_bottom);\r\n    \r\n            linear_main.addView(linear_child);\r\n    \r\n            return linear_main;\r\n        }\r\n    \r\n        public void showDialog() {\r\n            if (!dialog.isShowing()) {\r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                selectedHour = calendar_date.get(Calendar.HOUR_OF_DAY);\r\n                selectedMinute = calendar_date.get(Calendar.MINUTE);\r\n    \r\n                timePicker.setIs24HourView(is24HourView);\r\n                timePicker.setCurrentHour(selectedHour);\r\n                timePicker.setCurrentMinute(selectedMinute);\r\n    \r\n                datePicker.updateDate(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DATE));\r\n    \r\n                dialog.show();\r\n    \r\n                btn_setDate.performClick();\r\n            }\r\n        }\r\n    \r\n        public void setAutoDismiss(boolean isAutoDismiss) {\r\n            this.isAutoDismiss = isAutoDismiss;\r\n        }\r\n    \r\n        public void dismissDialog() {\r\n            if (!dialog.isShowing())\r\n                dialog.dismiss();\r\n        }\r\n    \r\n        public void setDate(Calendar calendar) {\r\n            if (calendar != null)\r\n                calendar_date = calendar;\r\n        }\r\n    \r\n        public void setDate(Date date) {\r\n            if (date != null) {\r\n                calendar_date = Calendar.getInstance();\r\n                calendar_date.setTime(date);\r\n            }\r\n        }\r\n    \r\n        public void setDate(int year, int month, int day) {\r\n            if (month &lt; 12 &amp;&amp; month &gt;= 0 &amp;&amp; day &lt; 32 &amp;&amp; day &gt;= 0 &amp;&amp; year &gt; 100\r\n                    &amp;&amp; year &lt; 3000) {\r\n                calendar_date = Calendar.getInstance();\r\n                calendar_date.set(year, month, day);\r\n            }\r\n    \r\n        }\r\n    \r\n        public void setTimeIn24HourFormat(int hourIn24Format, int minute) {\r\n            if (hourIn24Format &lt; 24 &amp;&amp; hourIn24Format &gt;= 0 &amp;&amp; minute &gt;= 0\r\n                    &amp;&amp; minute &lt; 60) {\r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                calendar_date.set(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\r\n                        minute);\r\n    \r\n                is24HourView = true;\r\n            }\r\n        }\r\n    \r\n        public void setTimeIn12HourFormat(int hourIn12Format, int minute,\r\n                                          boolean isAM) {\r\n            if (hourIn12Format &lt; 13 &amp;&amp; hourIn12Format &gt; 0 &amp;&amp; minute &gt;= 0\r\n                    &amp;&amp; minute &lt; 60) {\r\n                if (hourIn12Format == 12)\r\n                    hourIn12Format = 0;\r\n    \r\n                int hourIn24Format = hourIn12Format;\r\n    \r\n                if (!isAM)\r\n                    hourIn24Format += 12;\r\n    \r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                calendar_date.set(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\r\n                        minute);\r\n    \r\n                is24HourView = false;\r\n            }\r\n        }\r\n    \r\n        public void set24HourFormat(boolean is24HourFormat) {\r\n            is24HourView = is24HourFormat;\r\n        }\r\n    \r\n        public interface ICustomDateTimeListener {\r\n            public void onSet(Dialog dialog, Calendar calendarSelected,\r\n                              Date dateSelected, int year, String monthFullName,\r\n                              String monthShortName, int monthNumber, int day,\r\n                              String weekDayFullName, String weekDayShortName, int hour24,\r\n                              int hour12, int min, int sec, String AM_PM);\r\n    \r\n            public void onCancel();\r\n        }\r\n    \r\n        @Override\r\n        public void onClick(View v) {\r\n            switch (v.getId()) {\r\n                case SET_DATE:\r\n                btn_setTime.setEnabled(true);\r\n                btn_setDate.setEnabled(false);\r\n\r\n                if (viewSwitcher.getCurrentView() != datePicker) {\r\n                    viewSwitcher.showPrevious();\r\n                }\r\n                break;\r\n\r\n            case SET_TIME:\r\n                btn_setTime.setEnabled(false);\r\n                btn_setDate.setEnabled(true);\r\n                if (viewSwitcher.getCurrentView() == datePicker) {\r\n                    viewSwitcher.showNext();\r\n                }\r\n                break;\r\n\r\n    \r\n                case SET:\r\n                    if (iCustomDateTimeListener != null) {\r\n                        int month = datePicker.getMonth();\r\n                        int year = datePicker.getYear();\r\n                        int day = datePicker.getDayOfMonth();\r\n    \r\n    \r\n                        calendar_date.set(year, month, day, selectedHour,\r\n                                selectedMinute);\r\n    \r\n                        iCustomDateTimeListener.onSet(dialog, calendar_date,\r\n                                calendar_date.getTime(), calendar_date\r\n                                        .get(Calendar.YEAR),\r\n                                getMonthFullName(calendar_date.get(Calendar.MONTH)),\r\n                                getMonthShortName(calendar_date.get(Calendar.MONTH)),\r\n                                calendar_date.get(Calendar.MONTH), calendar_date\r\n                                        .get(Calendar.DAY_OF_MONTH),\r\n                                getWeekDayFullName(calendar_date\r\n                                        .get(Calendar.DAY_OF_WEEK)),\r\n                                getWeekDayShortName(calendar_date\r\n                                        .get(Calendar.DAY_OF_WEEK)), calendar_date\r\n                                        .get(Calendar.HOUR_OF_DAY),\r\n                                getHourIn12Format(calendar_date\r\n                                        .get(Calendar.HOUR_OF_DAY)), calendar_date\r\n                                        .get(Calendar.MINUTE), calendar_date\r\n                                        .get(Calendar.SECOND), getAMPM(calendar_date));\r\n                    }\r\n                    if (dialog.isShowing() &amp;&amp; isAutoDismiss)\r\n                        dialog.dismiss();\r\n                    break;\r\n    \r\n                case CANCEL:\r\n                    if (iCustomDateTimeListener != null)\r\n                        iCustomDateTimeListener.onCancel();\r\n                    if (dialog.isShowing())\r\n                        dialog.dismiss();\r\n                    break;\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @param date\r\n         *            date in String\r\n         * @param fromFormat\r\n         *            format of your &lt;b&gt;date&lt;/b&gt; eg: if your date is 2011-07-07\r\n         *            09:09:09 then your format will be &lt;b&gt;yyyy-MM-dd hh:mm:ss&lt;/b&gt;\r\n         * @param toFormat\r\n         *            format to which you want to convert your &lt;b&gt;date&lt;/b&gt; eg: if\r\n         *            required format is 31 July 2011 then the toFormat should be\r\n         *            &lt;b&gt;d MMMM yyyy&lt;/b&gt;\r\n         * @return formatted date\r\n         */\r\n        public static String convertDate(String date, String fromFormat,\r\n                                         String toFormat) {\r\n            try {\r\n                SimpleDateFormat simpleDateFormat = new SimpleDateFormat(fromFormat);\r\n                Date d = simpleDateFormat.parse(date);\r\n                Calendar calendar = Calendar.getInstance();\r\n                calendar.setTime(d);\r\n    \r\n                simpleDateFormat = new SimpleDateFormat(toFormat);\r\n                simpleDateFormat.setCalendar(calendar);\r\n                date = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return date;\r\n        }\r\n    \r\n        private String getMonthFullName(int monthNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.MONTH, monthNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;MMMM&quot;);\r\n            simpleDateFormat.setCalendar(calendar);\r\n            String monthName = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            return monthName;\r\n        }\r\n    \r\n        private String getMonthShortName(int monthNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.MONTH, monthNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;MMM&quot;);\r\n            simpleDateFormat.setCalendar(calendar);\r\n            String monthName = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            return monthName;\r\n        }\r\n    \r\n        private String getWeekDayFullName(int weekDayNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEEE&quot;);\r\n            simpleDateFormat.setCalendar(calendar);\r\n            String weekName = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            return weekName;\r\n        }\r\n    \r\n        private String getWeekDayShortName(int weekDayNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EE&quot;);\r\n            simpleDateFormat.setCalendar(calendar);\r\n            String weekName = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            return weekName;\r\n        }\r\n    \r\n        private int getHourIn12Format(int hour24) {\r\n            int hourIn12Format = 0;\r\n    \r\n            if (hour24 == 0)\r\n                hourIn12Format = 12;\r\n            else if (hour24 &lt;= 12)\r\n                hourIn12Format = hour24;\r\n            else\r\n                hourIn12Format = hour24 - 12;\r\n    \r\n            return hourIn12Format;\r\n        }\r\n    \r\n        private String getAMPM(Calendar calendar) {\r\n            String ampm = (calendar.get(Calendar.AM_PM) == (Calendar.AM)) ? &quot;AM&quot;\r\n                    : &quot;PM&quot;;\r\n            return ampm;\r\n        }\r\n    \r\n        private void resetData() {\r\n            calendar_date = null;\r\n            is24HourView = true;\r\n        }\r\n    \r\n        public static String pad(int integerToPad) {\r\n            if (integerToPad &gt;= 10 || integerToPad &lt; 0)\r\n                return String.valueOf(integerToPad);\r\n            else\r\n                return &quot;0&quot; + String.valueOf(integerToPad);\r\n        }\r\n    }\r\n\r\n\r\nIn your Activity : \r\n\r\nMainActivity.java: \r\n\r\n\r\n        public class MainActivity extends Activity{\r\n        \r\n         CustomDateTimePicker custom;\r\n    Button btnEventDateTime;\r\n            @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n        btnEventDateTime = ((Button) findViewById(R.id.btnEventDateTime));\r\n        custom = new CustomDateTimePicker(this,\r\n                        new CustomDateTimePicker.ICustomDateTimeListener() {\r\n        \r\n                            @Override\r\n                            public void onSet(Dialog dialog, Calendar calendarSelected,\r\n                                              Date dateSelected, int year, String monthFullName,\r\n                                              String monthShortName, int monthNumber, int day,\r\n                                              String weekDayFullName, String weekDayShortName,\r\n                                              int hour24, int hour12, int min, int sec,\r\n                                              String AM_PM) {\r\n        //                        ((TextInputEditText) findViewById(R.id.edtEventDateTime))\r\n                                edtEventDateTime.setText(&quot;&quot;);\r\n                                edtEventDateTime.setText(year\r\n                                        + &quot;-&quot; + (monthNumber + 1) + &quot;-&quot; + calendarSelected.get(Calendar.DAY_OF_MONTH)\r\n                                        + &quot; &quot; + hour24 + &quot;:&quot; + min\r\n                                        + &quot;:&quot; + sec);\r\n                            }\r\n        \r\n                            @Override\r\n                            public void onCancel() {\r\n        \r\n                            }\r\n                        });\r\n                /**\r\n                 * Pass Directly current time format it will return AM and PM if you set\r\n                 * false\r\n                 */\r\n                custom.set24HourFormat(true);\r\n                /**\r\n                 * Pass Directly current data and time to show when it pop up\r\n                 */\r\n                custom.setDate(Calendar.getInstance());\r\n                btnEventDateTime.setOnClickListener(\r\n                        new View.OnClickListener() {\r\n        \r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                custom.showDialog();\r\n                            }\r\n                        });\r\n        }\r\n        }\r\n\r\n","title":"Android Date Time picker in one dialog","body":"<p>Try this code : </p>\n\n<p>CustomDateTimePicker.java</p>\n\n<pre><code>import android.app.Activity;\nimport android.app.Dialog;\nimport android.content.DialogInterface;\nimport android.view.Gravity;\nimport android.view.View;\nimport android.view.Window;\nimport android.widget.Button;\nimport android.widget.DatePicker;\nimport android.widget.FrameLayout;\nimport android.widget.LinearLayout;\nimport android.widget.TimePicker;\nimport android.widget.ViewSwitcher;\n\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\n\n/**\n * Created by admin on 6/29/2016.\n */\npublic class CustomDateTimePicker implements View.OnClickListener {\n    private DatePicker datePicker;\n    private TimePicker timePicker;\n    private ViewSwitcher viewSwitcher;\n\n    private final int SET_DATE = 100, SET_TIME = 101, SET = 102, CANCEL = 103;\n\n    private Button btn_setDate, btn_setTime, btn_set, btn_cancel;\n\n    private Calendar calendar_date = null;\n\n    private Activity activity;\n\n    private ICustomDateTimeListener iCustomDateTimeListener = null;\n\n    private Dialog dialog;\n\n    private boolean is24HourView = true, isAutoDismiss = true;\n\n    private int selectedHour, selectedMinute;\n\n    public CustomDateTimePicker(Activity a,\n                                ICustomDateTimeListener customDateTimeListener) {\n        activity = a;\n        iCustomDateTimeListener = customDateTimeListener;\n\n        dialog = new Dialog(activity);\n        dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {\n            @Override\n            public void onDismiss(DialogInterface dialog) {\n                resetData();\n            }\n        });\n\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\n        View dialogView = getDateTimePickerLayout();\n        dialog.setContentView(dialogView);\n    }\n\n    public View getDateTimePickerLayout() {\n        LinearLayout.LayoutParams linear_match_wrap = new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.MATCH_PARENT,\n                LinearLayout.LayoutParams.MATCH_PARENT);\n        LinearLayout.LayoutParams linear_wrap_wrap = new LinearLayout.LayoutParams(\n                LinearLayout.LayoutParams.WRAP_CONTENT,\n                LinearLayout.LayoutParams.WRAP_CONTENT);\n        FrameLayout.LayoutParams frame_match_wrap = new FrameLayout.LayoutParams(\n                FrameLayout.LayoutParams.MATCH_PARENT,\n                FrameLayout.LayoutParams.WRAP_CONTENT);\n\n        LinearLayout.LayoutParams button_params = new LinearLayout.LayoutParams(\n                0, LinearLayout.LayoutParams.WRAP_CONTENT, 1.0f);\n\n        LinearLayout linear_main = new LinearLayout(activity);\n        linear_main.setLayoutParams(linear_match_wrap);\n        linear_main.setOrientation(LinearLayout.VERTICAL);\n        linear_main.setGravity(Gravity.CENTER);\n\n        LinearLayout linear_child = new LinearLayout(activity);\n        linear_child.setLayoutParams(linear_wrap_wrap);\n        linear_child.setOrientation(LinearLayout.VERTICAL);\n\n        LinearLayout linear_top = new LinearLayout(activity);\n        linear_top.setLayoutParams(linear_match_wrap);\n\n        btn_setDate = new Button(activity);\n        btn_setDate.setLayoutParams(button_params);\n        btn_setDate.setText(\"Set Date\");\n        btn_setDate.setId(SET_DATE);\n        btn_setDate.setOnClickListener(this);\n\n        btn_setTime = new Button(activity);\n        btn_setTime.setLayoutParams(button_params);\n        btn_setTime.setText(\"Set Time\");\n        btn_setTime.setId(SET_TIME);\n        btn_setTime.setOnClickListener(this);\n\n        linear_top.addView(btn_setDate);\n        linear_top.addView(btn_setTime);\n\n        viewSwitcher = new ViewSwitcher(activity);\n        viewSwitcher.setLayoutParams(frame_match_wrap);\n\n        datePicker = new DatePicker(activity);\n        timePicker = new TimePicker(activity);\n        timePicker.setOnTimeChangedListener(new TimePicker.OnTimeChangedListener() {\n            @Override\n            public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {\n                selectedHour = hourOfDay;\n                selectedMinute = minute;\n            }\n        });\n\n        viewSwitcher.addView(timePicker);\n        viewSwitcher.addView(datePicker);\n\n        LinearLayout linear_bottom = new LinearLayout(activity);\n        linear_match_wrap.topMargin = 8;\n        linear_bottom.setLayoutParams(linear_match_wrap);\n\n        btn_set = new Button(activity);\n        btn_set.setLayoutParams(button_params);\n        btn_set.setText(\"Set\");\n        btn_set.setId(SET);\n        btn_set.setOnClickListener(this);\n\n        btn_cancel = new Button(activity);\n        btn_cancel.setLayoutParams(button_params);\n        btn_cancel.setText(\"Cancel\");\n        btn_cancel.setId(CANCEL);\n        btn_cancel.setOnClickListener(this);\n\n        linear_bottom.addView(btn_set);\n        linear_bottom.addView(btn_cancel);\n\n        linear_child.addView(linear_top);\n        linear_child.addView(viewSwitcher);\n        linear_child.addView(linear_bottom);\n\n        linear_main.addView(linear_child);\n\n        return linear_main;\n    }\n\n    public void showDialog() {\n        if (!dialog.isShowing()) {\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            selectedHour = calendar_date.get(Calendar.HOUR_OF_DAY);\n            selectedMinute = calendar_date.get(Calendar.MINUTE);\n\n            timePicker.setIs24HourView(is24HourView);\n            timePicker.setCurrentHour(selectedHour);\n            timePicker.setCurrentMinute(selectedMinute);\n\n            datePicker.updateDate(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DATE));\n\n            dialog.show();\n\n            btn_setDate.performClick();\n        }\n    }\n\n    public void setAutoDismiss(boolean isAutoDismiss) {\n        this.isAutoDismiss = isAutoDismiss;\n    }\n\n    public void dismissDialog() {\n        if (!dialog.isShowing())\n            dialog.dismiss();\n    }\n\n    public void setDate(Calendar calendar) {\n        if (calendar != null)\n            calendar_date = calendar;\n    }\n\n    public void setDate(Date date) {\n        if (date != null) {\n            calendar_date = Calendar.getInstance();\n            calendar_date.setTime(date);\n        }\n    }\n\n    public void setDate(int year, int month, int day) {\n        if (month &lt; 12 &amp;&amp; month &gt;= 0 &amp;&amp; day &lt; 32 &amp;&amp; day &gt;= 0 &amp;&amp; year &gt; 100\n                &amp;&amp; year &lt; 3000) {\n            calendar_date = Calendar.getInstance();\n            calendar_date.set(year, month, day);\n        }\n\n    }\n\n    public void setTimeIn24HourFormat(int hourIn24Format, int minute) {\n        if (hourIn24Format &lt; 24 &amp;&amp; hourIn24Format &gt;= 0 &amp;&amp; minute &gt;= 0\n                &amp;&amp; minute &lt; 60) {\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            calendar_date.set(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\n                    minute);\n\n            is24HourView = true;\n        }\n    }\n\n    public void setTimeIn12HourFormat(int hourIn12Format, int minute,\n                                      boolean isAM) {\n        if (hourIn12Format &lt; 13 &amp;&amp; hourIn12Format &gt; 0 &amp;&amp; minute &gt;= 0\n                &amp;&amp; minute &lt; 60) {\n            if (hourIn12Format == 12)\n                hourIn12Format = 0;\n\n            int hourIn24Format = hourIn12Format;\n\n            if (!isAM)\n                hourIn24Format += 12;\n\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            calendar_date.set(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\n                    minute);\n\n            is24HourView = false;\n        }\n    }\n\n    public void set24HourFormat(boolean is24HourFormat) {\n        is24HourView = is24HourFormat;\n    }\n\n    public interface ICustomDateTimeListener {\n        public void onSet(Dialog dialog, Calendar calendarSelected,\n                          Date dateSelected, int year, String monthFullName,\n                          String monthShortName, int monthNumber, int day,\n                          String weekDayFullName, String weekDayShortName, int hour24,\n                          int hour12, int min, int sec, String AM_PM);\n\n        public void onCancel();\n    }\n\n    @Override\n    public void onClick(View v) {\n        switch (v.getId()) {\n            case SET_DATE:\n            btn_setTime.setEnabled(true);\n            btn_setDate.setEnabled(false);\n\n            if (viewSwitcher.getCurrentView() != datePicker) {\n                viewSwitcher.showPrevious();\n            }\n            break;\n\n        case SET_TIME:\n            btn_setTime.setEnabled(false);\n            btn_setDate.setEnabled(true);\n            if (viewSwitcher.getCurrentView() == datePicker) {\n                viewSwitcher.showNext();\n            }\n            break;\n\n\n            case SET:\n                if (iCustomDateTimeListener != null) {\n                    int month = datePicker.getMonth();\n                    int year = datePicker.getYear();\n                    int day = datePicker.getDayOfMonth();\n\n\n                    calendar_date.set(year, month, day, selectedHour,\n                            selectedMinute);\n\n                    iCustomDateTimeListener.onSet(dialog, calendar_date,\n                            calendar_date.getTime(), calendar_date\n                                    .get(Calendar.YEAR),\n                            getMonthFullName(calendar_date.get(Calendar.MONTH)),\n                            getMonthShortName(calendar_date.get(Calendar.MONTH)),\n                            calendar_date.get(Calendar.MONTH), calendar_date\n                                    .get(Calendar.DAY_OF_MONTH),\n                            getWeekDayFullName(calendar_date\n                                    .get(Calendar.DAY_OF_WEEK)),\n                            getWeekDayShortName(calendar_date\n                                    .get(Calendar.DAY_OF_WEEK)), calendar_date\n                                    .get(Calendar.HOUR_OF_DAY),\n                            getHourIn12Format(calendar_date\n                                    .get(Calendar.HOUR_OF_DAY)), calendar_date\n                                    .get(Calendar.MINUTE), calendar_date\n                                    .get(Calendar.SECOND), getAMPM(calendar_date));\n                }\n                if (dialog.isShowing() &amp;&amp; isAutoDismiss)\n                    dialog.dismiss();\n                break;\n\n            case CANCEL:\n                if (iCustomDateTimeListener != null)\n                    iCustomDateTimeListener.onCancel();\n                if (dialog.isShowing())\n                    dialog.dismiss();\n                break;\n        }\n    }\n\n    /**\n     * @param date\n     *            date in String\n     * @param fromFormat\n     *            format of your &lt;b&gt;date&lt;/b&gt; eg: if your date is 2011-07-07\n     *            09:09:09 then your format will be &lt;b&gt;yyyy-MM-dd hh:mm:ss&lt;/b&gt;\n     * @param toFormat\n     *            format to which you want to convert your &lt;b&gt;date&lt;/b&gt; eg: if\n     *            required format is 31 July 2011 then the toFormat should be\n     *            &lt;b&gt;d MMMM yyyy&lt;/b&gt;\n     * @return formatted date\n     */\n    public static String convertDate(String date, String fromFormat,\n                                     String toFormat) {\n        try {\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(fromFormat);\n            Date d = simpleDateFormat.parse(date);\n            Calendar calendar = Calendar.getInstance();\n            calendar.setTime(d);\n\n            simpleDateFormat = new SimpleDateFormat(toFormat);\n            simpleDateFormat.setCalendar(calendar);\n            date = simpleDateFormat.format(calendar.getTime());\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return date;\n    }\n\n    private String getMonthFullName(int monthNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.MONTH, monthNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"MMMM\");\n        simpleDateFormat.setCalendar(calendar);\n        String monthName = simpleDateFormat.format(calendar.getTime());\n\n        return monthName;\n    }\n\n    private String getMonthShortName(int monthNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.MONTH, monthNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"MMM\");\n        simpleDateFormat.setCalendar(calendar);\n        String monthName = simpleDateFormat.format(calendar.getTime());\n\n        return monthName;\n    }\n\n    private String getWeekDayFullName(int weekDayNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EEEE\");\n        simpleDateFormat.setCalendar(calendar);\n        String weekName = simpleDateFormat.format(calendar.getTime());\n\n        return weekName;\n    }\n\n    private String getWeekDayShortName(int weekDayNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EE\");\n        simpleDateFormat.setCalendar(calendar);\n        String weekName = simpleDateFormat.format(calendar.getTime());\n\n        return weekName;\n    }\n\n    private int getHourIn12Format(int hour24) {\n        int hourIn12Format = 0;\n\n        if (hour24 == 0)\n            hourIn12Format = 12;\n        else if (hour24 &lt;= 12)\n            hourIn12Format = hour24;\n        else\n            hourIn12Format = hour24 - 12;\n\n        return hourIn12Format;\n    }\n\n    private String getAMPM(Calendar calendar) {\n        String ampm = (calendar.get(Calendar.AM_PM) == (Calendar.AM)) ? \"AM\"\n                : \"PM\";\n        return ampm;\n    }\n\n    private void resetData() {\n        calendar_date = null;\n        is24HourView = true;\n    }\n\n    public static String pad(int integerToPad) {\n        if (integerToPad &gt;= 10 || integerToPad &lt; 0)\n            return String.valueOf(integerToPad);\n        else\n            return \"0\" + String.valueOf(integerToPad);\n    }\n}\n</code></pre>\n\n<p>In your Activity : </p>\n\n<p>MainActivity.java: </p>\n\n<pre><code>    public class MainActivity extends Activity{\n\n     CustomDateTimePicker custom;\nButton btnEventDateTime;\n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n    btnEventDateTime = ((Button) findViewById(R.id.btnEventDateTime));\n    custom = new CustomDateTimePicker(this,\n                    new CustomDateTimePicker.ICustomDateTimeListener() {\n\n                        @Override\n                        public void onSet(Dialog dialog, Calendar calendarSelected,\n                                          Date dateSelected, int year, String monthFullName,\n                                          String monthShortName, int monthNumber, int day,\n                                          String weekDayFullName, String weekDayShortName,\n                                          int hour24, int hour12, int min, int sec,\n                                          String AM_PM) {\n    //                        ((TextInputEditText) findViewById(R.id.edtEventDateTime))\n                            edtEventDateTime.setText(\"\");\n                            edtEventDateTime.setText(year\n                                    + \"-\" + (monthNumber + 1) + \"-\" + calendarSelected.get(Calendar.DAY_OF_MONTH)\n                                    + \" \" + hour24 + \":\" + min\n                                    + \":\" + sec);\n                        }\n\n                        @Override\n                        public void onCancel() {\n\n                        }\n                    });\n            /**\n             * Pass Directly current time format it will return AM and PM if you set\n             * false\n             */\n            custom.set24HourFormat(true);\n            /**\n             * Pass Directly current data and time to show when it pop up\n             */\n            custom.setDate(Calendar.getInstance());\n            btnEventDateTime.setOnClickListener(\n                    new View.OnClickListener() {\n\n                        @Override\n                        public void onClick(View v) {\n                            custom.showDialog();\n                        }\n                    });\n    }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3304588,"reputation":3664,"user_id":2779803,"accept_rate":54,"display_name":"Misagh Emamverdi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1469598324,"creation_date":1469598324,"answer_id":38604634,"question_id":38604157,"body_markdown":"If you need to select the time right after the date selection you can simply show `TimePickerDialog` automatically after date is selected. This is the easiest way.\r\n\r\nWhile you have listener that is fired when date is selected with selected date, you can simply pass that selected date to `TimePickerDialog` and with a few customization in `mdtp_time_picker_dialog.xml` you can add a `TextView` to show the selected text.\r\n\r\nAnother option is merging `mdtp_time_picker_dialog.xml` and `mdtp_date_picker_dialog.xml` that are root layouts for date picker dialog and time picker dialog. You can set time picker part visibility as `GONE` and switch the visibility when you want to switch pickers.\r\n\r\nThe second solution is more difficult to implement because in addition to layouts, you have to merge all controls and listeners.\r\n\r\nIf you want the user to see both of the pickers, I think you actually need to design a new view yourself. That library layouts is not suitable for this.","title":"Android Date Time picker in one dialog","body":"<p>If you need to select the time right after the date selection you can simply show <code>TimePickerDialog</code> automatically after date is selected. This is the easiest way.</p>\n\n<p>While you have listener that is fired when date is selected with selected date, you can simply pass that selected date to <code>TimePickerDialog</code> and with a few customization in <code>mdtp_time_picker_dialog.xml</code> you can add a <code>TextView</code> to show the selected text.</p>\n\n<p>Another option is merging <code>mdtp_time_picker_dialog.xml</code> and <code>mdtp_date_picker_dialog.xml</code> that are root layouts for date picker dialog and time picker dialog. You can set time picker part visibility as <code>GONE</code> and switch the visibility when you want to switch pickers.</p>\n\n<p>The second solution is more difficult to implement because in addition to layouts, you have to merge all controls and listeners.</p>\n\n<p>If you want the user to see both of the pickers, I think you actually need to design a new view yourself. That library layouts is not suitable for this.</p>\n"},{"comments":[{"owner":{"account_id":4332914,"reputation":657,"user_id":3539609,"accept_rate":64,"display_name":"Sudip"},"score":1,"creation_date":1519668876,"post_id":38605328,"comment_id":84994580,"body_markdown":"Have you tested this code? This doesn&#39;t seem to be working for me. Upon selection of date, it is not calling the timepicker.","body":"Have you tested this code? This doesn&#39;t seem to be working for me. Upon selection of date, it is not calling the timepicker."}],"tags":[],"owner":{"display_name":"user4696837"},"comment_count":1,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1547696888,"creation_date":1469601084,"answer_id":38605328,"question_id":38604157,"body_markdown":"You can call `TimePicker` after `DatePicker` set Date. Like this..\r\n        \r\n        String date_time = &quot;&quot;;\r\n        int mYear;\r\n\t    int mMonth;\r\n\t    int mDay;\r\n\t\r\n\t    int mHour;\r\n\t    int mMinute;\r\n\r\n    \tet_show_date_time = (EditText) findViewById(R.id.et_show_date_time);\r\n        btn_set_date_time = (Button) findViewById(R.id.btn_set_date_time);\r\n\r\n        btn_set_date_time.setOnClickListener(new OnClickListener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onClick(View v) {\r\n\t\t\t\tdatePicker();\r\n\r\n\t\t\t}\r\n\t\t});\r\nDate Picker:\r\n\r\n        private void datePicker(){\r\n    \t\r\n    \t// Get Current Date\r\n        final Calendar c = Calendar.getInstance();\r\n        mYear = c.get(Calendar.YEAR);\r\n        mMonth = c.get(Calendar.MONTH);\r\n        mDay = c.get(Calendar.DAY_OF_MONTH);\r\n\r\n        DatePickerDialog datePickerDialog = new DatePickerDialog(this,\r\n                new DatePickerDialog.OnDateSetListener() {\r\n\r\n                    @Override\r\n                    public void onDateSet(DatePicker view, int year,int monthOfYear, int dayOfMonth) {\r\n\r\n                    \tdate_time = dayOfMonth + &quot;-&quot; + (monthOfYear + 1) + &quot;-&quot; + year;\r\n                       //*************Call Time Picker Here ********************\r\n                       tiemPicker();\r\n                    }\r\n                }, mYear, mMonth, mDay);\r\n           datePickerDialog.show();\r\n        }\r\nTime Picker\r\n\r\n     private void tiemPicker(){\r\n    \t// Get Current Time\r\n        final Calendar c = Calendar.getInstance();\r\n        mHour = c.get(Calendar.HOUR_OF_DAY);\r\n        mMinute = c.get(Calendar.MINUTE);\r\n\r\n        // Launch Time Picker Dialog\r\n        TimePickerDialog timePickerDialog = new TimePickerDialog(this,\r\n                new TimePickerDialog.OnTimeSetListener() {\r\n\r\n                    @Override\r\n                    public void onTimeSet(TimePicker view, int hourOfDay,int minute) {\r\n                    \t\r\n                    \tmHour = hourOfDay;\r\n                    \tmMinute = minute;\r\n\r\n                    \tet_show_date_time.setText(date_time+&quot; &quot;+hourOfDay + &quot;:&quot; + minute);\r\n                    }\r\n                }, mHour, mMinute, false);\r\n        timePickerDialog.show();\r\n    }\r\n\r\n--\r\n\r\n","title":"Android Date Time picker in one dialog","body":"<p>You can call <code>TimePicker</code> after <code>DatePicker</code> set Date. Like this..</p>\n\n<pre><code>    String date_time = \"\";\n    int mYear;\n    int mMonth;\n    int mDay;\n\n    int mHour;\n    int mMinute;\n\n    et_show_date_time = (EditText) findViewById(R.id.et_show_date_time);\n    btn_set_date_time = (Button) findViewById(R.id.btn_set_date_time);\n\n    btn_set_date_time.setOnClickListener(new OnClickListener() {\n\n        @Override\n        public void onClick(View v) {\n            datePicker();\n\n        }\n    });\n</code></pre>\n\n<p>Date Picker:</p>\n\n<pre><code>    private void datePicker(){\n\n    // Get Current Date\n    final Calendar c = Calendar.getInstance();\n    mYear = c.get(Calendar.YEAR);\n    mMonth = c.get(Calendar.MONTH);\n    mDay = c.get(Calendar.DAY_OF_MONTH);\n\n    DatePickerDialog datePickerDialog = new DatePickerDialog(this,\n            new DatePickerDialog.OnDateSetListener() {\n\n                @Override\n                public void onDateSet(DatePicker view, int year,int monthOfYear, int dayOfMonth) {\n\n                    date_time = dayOfMonth + \"-\" + (monthOfYear + 1) + \"-\" + year;\n                   //*************Call Time Picker Here ********************\n                   tiemPicker();\n                }\n            }, mYear, mMonth, mDay);\n       datePickerDialog.show();\n    }\n</code></pre>\n\n<p>Time Picker</p>\n\n<pre><code> private void tiemPicker(){\n    // Get Current Time\n    final Calendar c = Calendar.getInstance();\n    mHour = c.get(Calendar.HOUR_OF_DAY);\n    mMinute = c.get(Calendar.MINUTE);\n\n    // Launch Time Picker Dialog\n    TimePickerDialog timePickerDialog = new TimePickerDialog(this,\n            new TimePickerDialog.OnTimeSetListener() {\n\n                @Override\n                public void onTimeSet(TimePicker view, int hourOfDay,int minute) {\n\n                    mHour = hourOfDay;\n                    mMinute = minute;\n\n                    et_show_date_time.setText(date_time+\" \"+hourOfDay + \":\" + minute);\n                }\n            }, mHour, mMinute, false);\n    timePickerDialog.show();\n}\n</code></pre>\n\n<p>--</p>\n"},{"comments":[{"owner":{"account_id":7493136,"reputation":151,"user_id":5694162,"accept_rate":100,"display_name":"Ruslan Podurets"},"score":1,"creation_date":1518643862,"post_id":48796559,"comment_id":84595569,"body_markdown":"ResultCallback&lt;Date&gt; dateResultCallback its simple interface from my project `public interface ResultCallback&lt;Result&gt; {\n\n    void onResult(@Nullable Result result);\n\n}`","body":"ResultCallback&lt;Date&gt; dateResultCallback its simple interface from my project <code>public interface ResultCallback&lt;Result&gt; {      void onResult(@Nullable Result result);  }</code>"},{"owner":{"account_id":9291465,"reputation":495,"user_id":6899791,"display_name":"Umasankar"},"score":0,"creation_date":1566995169,"post_id":48796559,"comment_id":101828941,"body_markdown":"Hi Ruslan, \nHow to prevent previous days and times entry in this coding snippet","body":"Hi Ruslan,  How to prevent previous days and times entry in this coding snippet"},{"owner":{"account_id":7493136,"reputation":151,"user_id":5694162,"accept_rate":100,"display_name":"Ruslan Podurets"},"score":1,"creation_date":1567079445,"post_id":48796559,"comment_id":101861194,"body_markdown":"Umasankar, you can set datePickerDialog.getDatePicker().setMinDate(System.currentTimeMillis() - 1000); or something like this","body":"Umasankar, you can set datePickerDialog.getDatePicker().setMinDate(System.currentTi&zwnj;&#8203;meMillis() - 1000); or something like this"}],"tags":[],"owner":{"account_id":7493136,"reputation":151,"user_id":5694162,"accept_rate":100,"display_name":"Ruslan Podurets"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1518643802,"creation_date":1518643802,"answer_id":48796559,"question_id":38604157,"body_markdown":"Googled this problem and found usefull Enamul Haque&#39;s answer. Modified his code little bit and got this result. Its quick solution and will be improved, but works nice)\r\n\r\n    public class DateTimePicker {\r\n    \r\n        @NonNull\r\n        private final Calendar calendar = Calendar.getInstance();\r\n        @Nullable\r\n        private DatePickerDialog datePickerDialog;\r\n        @Nullable\r\n        private TimePickerDialog timePickerDialog;\r\n        @Nullable\r\n        private ResultCallback&lt;Date&gt; dateResultCallback;\r\n    \r\n        public void showDialog(@NonNull Context context, long time) {\r\n            calendar.setTimeInMillis(time);\r\n            closeDialogs();\r\n            showDatePicker(context);\r\n        }\r\n    \r\n        @Nullable\r\n        public ResultCallback&lt;Date&gt; getDateResultCallback() {\r\n            return dateResultCallback;\r\n        }\r\n    \r\n        public void setDateResultCallback(@Nullable ResultCallback&lt;Date&gt; dateResultCallback) {\r\n            this.dateResultCallback = dateResultCallback;\r\n        }\r\n    \r\n        public long getTime() {\r\n            return calendar.getTimeInMillis();\r\n        }\r\n    \r\n        private void closeDialogs() {\r\n            if (datePickerDialog != null) {\r\n                datePickerDialog.dismiss();\r\n                datePickerDialog = null;\r\n            }\r\n            if (timePickerDialog != null) {\r\n                timePickerDialog.dismiss();\r\n                timePickerDialog = null;\r\n            }\r\n        }\r\n    \r\n        private DatePickerDialog.OnDateSetListener dateSetListener = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n                calendar.set(Calendar.YEAR, year);\r\n                calendar.set(Calendar.MONTH, month);\r\n                calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);\r\n                timePicker(view.getContext());\r\n            }\r\n        };\r\n    \r\n        private TimePickerDialog.OnTimeSetListener timeSetListener = new TimePickerDialog.OnTimeSetListener() {\r\n    \r\n            @Override\r\n            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                calendar.set(Calendar.HOUR_OF_DAY, hourOfDay);\r\n                calendar.set(Calendar.MINUTE, minute);\r\n                if (dateResultCallback != null) {\r\n                    dateResultCallback.onResult(calendar.getTime());\r\n                }\r\n            }\r\n        };\r\n    \r\n        private void showDatePicker(@NonNull Context context) {\r\n            datePickerDialog = new DatePickerDialog(context,\r\n                    dateSetListener,\r\n                    calendar.get(Calendar.YEAR),\r\n                    calendar.get(Calendar.MONTH),\r\n                    calendar.get(Calendar.DAY_OF_MONTH));\r\n            datePickerDialog.show();\r\n        }\r\n    \r\n        private void timePicker(@NonNull Context context) {\r\n            timePickerDialog = new TimePickerDialog(context,\r\n                    timeSetListener,\r\n                    calendar.get(Calendar.HOUR_OF_DAY),\r\n                    calendar.get(Calendar.MINUTE),\r\n                    true);\r\n            timePickerDialog.show();\r\n        }\r\n    \r\n        public void release() {\r\n            closeDialogs();\r\n            dateResultCallback = null;\r\n        }\r\n    \r\n    }\r\n\r\nDialogs calls via method showDialog(...), possible to release object when it not need anymore (in onDestroy() in activity f.e). \r\nAnd again - thanks Enamul Haque for idea.","title":"Android Date Time picker in one dialog","body":"<p>Googled this problem and found usefull Enamul Haque's answer. Modified his code little bit and got this result. Its quick solution and will be improved, but works nice)</p>\n\n<pre><code>public class DateTimePicker {\n\n    @NonNull\n    private final Calendar calendar = Calendar.getInstance();\n    @Nullable\n    private DatePickerDialog datePickerDialog;\n    @Nullable\n    private TimePickerDialog timePickerDialog;\n    @Nullable\n    private ResultCallback&lt;Date&gt; dateResultCallback;\n\n    public void showDialog(@NonNull Context context, long time) {\n        calendar.setTimeInMillis(time);\n        closeDialogs();\n        showDatePicker(context);\n    }\n\n    @Nullable\n    public ResultCallback&lt;Date&gt; getDateResultCallback() {\n        return dateResultCallback;\n    }\n\n    public void setDateResultCallback(@Nullable ResultCallback&lt;Date&gt; dateResultCallback) {\n        this.dateResultCallback = dateResultCallback;\n    }\n\n    public long getTime() {\n        return calendar.getTimeInMillis();\n    }\n\n    private void closeDialogs() {\n        if (datePickerDialog != null) {\n            datePickerDialog.dismiss();\n            datePickerDialog = null;\n        }\n        if (timePickerDialog != null) {\n            timePickerDialog.dismiss();\n            timePickerDialog = null;\n        }\n    }\n\n    private DatePickerDialog.OnDateSetListener dateSetListener = new DatePickerDialog.OnDateSetListener() {\n        @Override\n        public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\n            calendar.set(Calendar.YEAR, year);\n            calendar.set(Calendar.MONTH, month);\n            calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);\n            timePicker(view.getContext());\n        }\n    };\n\n    private TimePickerDialog.OnTimeSetListener timeSetListener = new TimePickerDialog.OnTimeSetListener() {\n\n        @Override\n        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\n            calendar.set(Calendar.HOUR_OF_DAY, hourOfDay);\n            calendar.set(Calendar.MINUTE, minute);\n            if (dateResultCallback != null) {\n                dateResultCallback.onResult(calendar.getTime());\n            }\n        }\n    };\n\n    private void showDatePicker(@NonNull Context context) {\n        datePickerDialog = new DatePickerDialog(context,\n                dateSetListener,\n                calendar.get(Calendar.YEAR),\n                calendar.get(Calendar.MONTH),\n                calendar.get(Calendar.DAY_OF_MONTH));\n        datePickerDialog.show();\n    }\n\n    private void timePicker(@NonNull Context context) {\n        timePickerDialog = new TimePickerDialog(context,\n                timeSetListener,\n                calendar.get(Calendar.HOUR_OF_DAY),\n                calendar.get(Calendar.MINUTE),\n                true);\n        timePickerDialog.show();\n    }\n\n    public void release() {\n        closeDialogs();\n        dateResultCallback = null;\n    }\n\n}\n</code></pre>\n\n<p>Dialogs calls via method showDialog(...), possible to release object when it not need anymore (in onDestroy() in activity f.e). \nAnd again - thanks Enamul Haque for idea.</p>\n"},{"comments":[{"owner":{"account_id":4714271,"reputation":4619,"user_id":3813915,"accept_rate":56,"display_name":"Philip Herbert"},"score":0,"creation_date":1544565163,"post_id":49427560,"comment_id":94319629,"body_markdown":"Getting an error with your code:Unable to add window -- token null is not for an application","body":"Getting an error with your code:Unable to add window -- token null is not for an application"}],"tags":[],"owner":{"account_id":10726753,"reputation":1120,"user_id":7894033,"display_name":"Rajesh Naddy"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527333193,"creation_date":1521718256,"answer_id":49427560,"question_id":38604157,"body_markdown":"Use this simple code.. I&#39;m using this code in my Project..\r\n\r\n    final Calendar currentDate = Calendar.getInstance();\r\n    date = Calendar.getInstance();\r\n                DatePickerDialog datePickerDialog = new DatePickerDialog(getContext(), new DatePickerDialog.OnDateSetListener() {\r\n\r\n                    @Override\r\n                    public void onDateSet(DatePicker datePicker, int year, int monthOfYear, int dayOfMonth) {\r\n\r\n                        date.set(year, monthOfYear, dayOfMonth);\r\n                        new TimePickerDialog(getContext(), new TimePickerDialog.OnTimeSetListener() {\r\n                            @Override\r\n                            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n                                date.set(Calendar.HOUR_OF_DAY, hourOfDay);\r\n                                date.set(Calendar.MINUTE, minute);\r\n                                // Log.v(TAG, &quot;The choosen one &quot; + date.getTime());\r\n                                // Toast.makeText(getContext(),&quot;The choosen one &quot; + date.getTime(),Toast.LENGTH_SHORT).show();\r\n                                datetime.setText(new SimpleDateFormat(&quot;dd-MMM-yyyy h:mm a&quot;).format(date.getTime()));\r\n                            }\r\n                        },currentDate.get(Calendar.HOUR_OF_DAY), currentDate.get(Calendar.MINUTE), false).show();\r\n\r\n                    }\r\n                }, currentDate.get(Calendar.YEAR), currentDate.get(Calendar.MONTH), currentDate.get(Calendar.DATE));\r\n                datePickerDialog.getDatePicker().setMinDate(currentDate.getTimeInMillis());\r\n                datePickerDialog.show();","title":"Android Date Time picker in one dialog","body":"<p>Use this simple code.. I'm using this code in my Project..</p>\n\n<pre><code>final Calendar currentDate = Calendar.getInstance();\ndate = Calendar.getInstance();\n            DatePickerDialog datePickerDialog = new DatePickerDialog(getContext(), new DatePickerDialog.OnDateSetListener() {\n\n                @Override\n                public void onDateSet(DatePicker datePicker, int year, int monthOfYear, int dayOfMonth) {\n\n                    date.set(year, monthOfYear, dayOfMonth);\n                    new TimePickerDialog(getContext(), new TimePickerDialog.OnTimeSetListener() {\n                        @Override\n                        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\n                            date.set(Calendar.HOUR_OF_DAY, hourOfDay);\n                            date.set(Calendar.MINUTE, minute);\n                            // Log.v(TAG, \"The choosen one \" + date.getTime());\n                            // Toast.makeText(getContext(),\"The choosen one \" + date.getTime(),Toast.LENGTH_SHORT).show();\n                            datetime.setText(new SimpleDateFormat(\"dd-MMM-yyyy h:mm a\").format(date.getTime()));\n                        }\n                    },currentDate.get(Calendar.HOUR_OF_DAY), currentDate.get(Calendar.MINUTE), false).show();\n\n                }\n            }, currentDate.get(Calendar.YEAR), currentDate.get(Calendar.MONTH), currentDate.get(Calendar.DATE));\n            datePickerDialog.getDatePicker().setMinDate(currentDate.getTimeInMillis());\n            datePickerDialog.show();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4964174,"reputation":728,"user_id":3994127,"accept_rate":50,"display_name":"Raghav Satyadev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1557270841,"creation_date":1524745651,"answer_id":50042997,"question_id":38604157,"body_markdown":"This answer is basically an improvement in answer given by @Mayur Patel: https://stackoverflow.com/a/38604615/3994127\r\n\r\n**CustomDateTimePicker.java**\r\n\r\n\r\n    import android.app.Dialog;\r\n    import android.content.Context;\r\n    import android.content.DialogInterface;\r\n    import android.support.v7.widget.AppCompatButton;\r\n    import android.view.View;\r\n    import android.view.Window;\r\n    import android.widget.DatePicker;\r\n    import android.widget.TimePicker;\r\n    import android.widget.ViewSwitcher;\r\n    \r\n    import com.gotrack.gotrack.R;\r\n    \r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.Locale;\r\n    \r\n    public class CustomDateTimePicker implements View.OnClickListener {\r\n        private Calendar calendar_date = null;\r\n        private ViewSwitcher viewSwitcher;\r\n        private DatePicker datePicker;\r\n        private TimePicker timePicker;\r\n        private AppCompatButton btnDate, btnTime;\r\n    \r\n        private ICustomDateTimeListener iCustomDateTimeListener = null;\r\n    \r\n        private Dialog dialog;\r\n    \r\n        private boolean is24HourView = true, isAutoDismiss = true;\r\n    \r\n        private int selectedHour, selectedMinute;\r\n    \r\n        public CustomDateTimePicker(Context context,\r\n                                    ICustomDateTimeListener customDateTimeListener) {\r\n            iCustomDateTimeListener = customDateTimeListener;\r\n    \r\n            dialog = new Dialog(context);\r\n            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n            dialog.setContentView(R.layout.date_time_picker);\r\n            dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {\r\n                @Override\r\n                public void onDismiss(DialogInterface dialog) {\r\n                    resetData();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void setView() {\r\n            btnDate = dialog.findViewById(R.id.btn_date);\r\n            btnTime = dialog.findViewById(R.id.btn_time);\r\n            dialog.findViewById(R.id.btn_set).setOnClickListener(this);\r\n            dialog.findViewById(R.id.btn_cancel).setOnClickListener(this);\r\n            viewSwitcher = dialog.findViewById(R.id.view_switcher);\r\n            datePicker = dialog.findViewById(R.id.date_picker);\r\n            timePicker = dialog.findViewById(R.id.time_picker);\r\n    \r\n            btnDate.setOnClickListener(this);\r\n            btnTime.setOnClickListener(this);\r\n    \r\n            timePicker.setIs24HourView(is24HourView);\r\n            timePicker.setCurrentHour(selectedHour);\r\n            timePicker.setCurrentMinute(selectedMinute);\r\n    \r\n            datePicker.updateDate(calendar_date.get(Calendar.YEAR),\r\n                    calendar_date.get(Calendar.MONTH),\r\n                    calendar_date.get(Calendar.DATE));\r\n    \r\n            btnDate.performClick();\r\n        }\r\n    \r\n        public void showDialog() {\r\n            if (!dialog.isShowing()) {\r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                selectedHour = calendar_date.get(Calendar.HOUR_OF_DAY);\r\n                selectedMinute = calendar_date.get(Calendar.MINUTE);\r\n    \r\n                dialog.show();\r\n    \r\n                setView();\r\n            }\r\n        }\r\n    \r\n        public CustomDateTimePicker setAutoDismiss(boolean isAutoDismiss) {\r\n            this.isAutoDismiss = isAutoDismiss;\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker dismissDialog() {\r\n            if (!dialog.isShowing())\r\n                dialog.dismiss();\r\n    \r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setDate(Calendar calendar) {\r\n            if (calendar != null)\r\n                calendar_date = calendar;\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setDate(Date date) {\r\n            if (date != null) {\r\n                calendar_date = Calendar.getInstance();\r\n                calendar_date.setTime(date);\r\n            }\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setDate(int year, int month, int day) {\r\n            if (month &lt; 12 &amp;&amp; month &gt;= 0 &amp;&amp; day &lt; 32 &amp;&amp; day &gt;= 0 &amp;&amp; year &gt; 100\r\n                    &amp;&amp; year &lt; 3000) {\r\n                calendar_date = Calendar.getInstance();\r\n                calendar_date.set(year, month, day);\r\n            }\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setTimeIn24HourFormat(int hourIn24Format, int minute) {\r\n            if (hourIn24Format &lt; 24 &amp;&amp; hourIn24Format &gt;= 0 &amp;&amp; minute &gt;= 0\r\n                    &amp;&amp; minute &lt; 60) {\r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                calendar_date.set(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\r\n                        minute);\r\n    \r\n                is24HourView = true;\r\n            }\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker setTimeIn12HourFormat(int hourIn12Format, int minute,\r\n                                                          boolean isAM) {\r\n            if (hourIn12Format &lt; 13 &amp;&amp; hourIn12Format &gt; 0 &amp;&amp; minute &gt;= 0\r\n                    &amp;&amp; minute &lt; 60) {\r\n                if (hourIn12Format == 12)\r\n                    hourIn12Format = 0;\r\n    \r\n                int hourIn24Format = hourIn12Format;\r\n    \r\n                if (!isAM)\r\n                    hourIn24Format += 12;\r\n    \r\n                if (calendar_date == null)\r\n                    calendar_date = Calendar.getInstance();\r\n    \r\n                calendar_date.set(calendar_date.get(Calendar.YEAR),\r\n                        calendar_date.get(Calendar.MONTH),\r\n                        calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\r\n                        minute);\r\n    \r\n                is24HourView = false;\r\n            }\r\n            return this;\r\n        }\r\n    \r\n        public CustomDateTimePicker set24HourFormat(boolean is24HourFormat) {\r\n            is24HourView = is24HourFormat;\r\n            return this;\r\n        }\r\n    \r\n        public interface ICustomDateTimeListener {\r\n            void onSet(Dialog dialog, Calendar calendarSelected,\r\n                       Date dateSelected, int year, String monthFullName,\r\n                       String monthShortName, int monthNumber, int day,\r\n                       String weekDayFullName, String weekDayShortName, int hour24,\r\n                       int hour12, int min, int sec, String AM_PM);\r\n    \r\n            void onCancel();\r\n        }\r\n    \r\n        @Override\r\n        public void onClick(View v) {\r\n            switch (v.getId()) {\r\n                case R.id.btn_date:\r\n                    btnTime.setEnabled(true);\r\n                    btnDate.setEnabled(false);\r\n    \r\n                    if (viewSwitcher.getCurrentView() != datePicker) {\r\n                        viewSwitcher.showPrevious();\r\n                    }\r\n                    break;\r\n    \r\n                case R.id.btn_time:\r\n                    btnTime.setEnabled(false);\r\n                    btnDate.setEnabled(true);\r\n                    if (viewSwitcher.getCurrentView() == datePicker) {\r\n                        viewSwitcher.showNext();\r\n                    }\r\n                    break;\r\n    \r\n    \r\n                case R.id.btn_set:\r\n                    if (iCustomDateTimeListener != null) {\r\n                        int month = datePicker.getMonth();\r\n                        int year = datePicker.getYear();\r\n                        int day = datePicker.getDayOfMonth();\r\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                        selectedHour = timePicker.getHour();\r\n                        selectedMinute = timePicker.getMinute();\r\n                    } else {\r\n                        selectedHour = timePicker.getCurrentHour();\r\n                        selectedMinute = timePicker.getCurrentMinute();\r\n                    }\r\n    \r\n                        calendar_date.set(year, month, day, selectedHour,\r\n                                selectedMinute);\r\n    \r\n                        iCustomDateTimeListener.onSet(dialog, calendar_date,\r\n                                calendar_date.getTime(), calendar_date\r\n                                        .get(Calendar.YEAR),\r\n                                getMonthFullName(calendar_date.get(Calendar.MONTH)),\r\n                                getMonthShortName(calendar_date.get(Calendar.MONTH)),\r\n                                calendar_date.get(Calendar.MONTH), calendar_date\r\n                                        .get(Calendar.DAY_OF_MONTH),\r\n                                getWeekDayFullName(calendar_date\r\n                                        .get(Calendar.DAY_OF_WEEK)),\r\n                                getWeekDayShortName(calendar_date\r\n                                        .get(Calendar.DAY_OF_WEEK)), calendar_date\r\n                                        .get(Calendar.HOUR_OF_DAY),\r\n                                getHourIn12Format(calendar_date\r\n                                        .get(Calendar.HOUR_OF_DAY)), calendar_date\r\n                                        .get(Calendar.MINUTE), calendar_date\r\n                                        .get(Calendar.SECOND), getAMPM(calendar_date));\r\n                    }\r\n                    if (dialog.isShowing() &amp;&amp; isAutoDismiss)\r\n                        dialog.dismiss();\r\n                    break;\r\n    \r\n                case R.id.btn_cancel:\r\n                    if (iCustomDateTimeListener != null)\r\n                        iCustomDateTimeListener.onCancel();\r\n                    if (dialog.isShowing())\r\n                        dialog.dismiss();\r\n                    break;\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @param date       date in String\r\n         * @param fromFormat format of your &lt;b&gt;date&lt;/b&gt; eg: if your date is 2011-07-07\r\n         *                   09:09:09 then your format will be &lt;b&gt;yyyy-MM-dd hh:mm:ss&lt;/b&gt;\r\n         * @param toFormat   format to which you want to convert your &lt;b&gt;date&lt;/b&gt; eg: if\r\n         *                   required format is 31 July 2011 then the toFormat should be\r\n         *                   &lt;b&gt;d MMMM yyyy&lt;/b&gt;\r\n         * @return formatted date\r\n         */\r\n        public static String convertDate(String date, String fromFormat,\r\n                                         String toFormat) {\r\n            try {\r\n                SimpleDateFormat simpleDateFormat = new SimpleDateFormat(fromFormat, Locale.getDefault());\r\n                Date d = simpleDateFormat.parse(date);\r\n                Calendar calendar = Calendar.getInstance();\r\n                calendar.setTime(d);\r\n    \r\n                simpleDateFormat = new SimpleDateFormat(toFormat, Locale.getDefault());\r\n                simpleDateFormat.setCalendar(calendar);\r\n                date = simpleDateFormat.format(calendar.getTime());\r\n    \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return date;\r\n        }\r\n    \r\n        private String getMonthFullName(int monthNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.MONTH, monthNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;MMMM&quot;, Locale.getDefault());\r\n            simpleDateFormat.setCalendar(calendar);\r\n    \r\n            return simpleDateFormat.format(calendar.getTime());\r\n        }\r\n    \r\n        private String getMonthShortName(int monthNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.MONTH, monthNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;MMM&quot;, Locale.getDefault());\r\n            simpleDateFormat.setCalendar(calendar);\r\n    \r\n            return simpleDateFormat.format(calendar.getTime());\r\n        }\r\n    \r\n        private String getWeekDayFullName(int weekDayNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEEE&quot;, Locale.getDefault());\r\n            simpleDateFormat.setCalendar(calendar);\r\n    \r\n            return simpleDateFormat.format(calendar.getTime());\r\n        }\r\n    \r\n        private String getWeekDayShortName(int weekDayNumber) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\r\n    \r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EE&quot;, Locale.getDefault());\r\n            simpleDateFormat.setCalendar(calendar);\r\n    \r\n            return simpleDateFormat.format(calendar.getTime());\r\n        }\r\n    \r\n        private int getHourIn12Format(int hour24) {\r\n            int hourIn12Format = 0;\r\n    \r\n            if (hour24 == 0)\r\n                hourIn12Format = 12;\r\n            else if (hour24 &lt;= 12)\r\n                hourIn12Format = hour24;\r\n            else\r\n                hourIn12Format = hour24 - 12;\r\n    \r\n            return hourIn12Format;\r\n        }\r\n    \r\n        private String getAMPM(Calendar calendar) {\r\n            return (calendar.get(Calendar.AM_PM) == (Calendar.AM)) ? &quot;AM&quot;\r\n                    : &quot;PM&quot;;\r\n        }\r\n    \r\n        private CustomDateTimePicker resetData() {\r\n            calendar_date = null;\r\n            is24HourView = true;\r\n            return this;\r\n        }\r\n    \r\n        public static String pad(int integerToPad) {\r\n            if (integerToPad &gt;= 10 || integerToPad &lt; 0)\r\n                return String.valueOf(integerToPad);\r\n            else\r\n                return &quot;0&quot; + String.valueOf(integerToPad);\r\n        }\r\n    }\r\n\r\n**date_time_picker.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n        &lt;android.support.constraint.ConstraintLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:padding=&quot;15dp&quot;&gt;\r\n    \r\n            &lt;android.support.v7.widget.AppCompatButton\r\n                android:id=&quot;@+id/btn_date&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginEnd=&quot;5dp&quot;\r\n                android:text=&quot;@string/set_date&quot;\r\n                app:backgroundTint=&quot;@color/colorPrimary&quot;\r\n                app:layout_constraintEnd_toStartOf=&quot;@+id/btn_time&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n            &lt;android.support.v7.widget.AppCompatButton\r\n                android:id=&quot;@+id/btn_time&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;5dp&quot;\r\n                android:text=&quot;@string/set_time&quot;\r\n                app:backgroundTint=&quot;@color/colorPrimary&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toEndOf=&quot;@+id/btn_date&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n            &lt;android.support.v7.widget.AppCompatButton\r\n                android:id=&quot;@+id/btn_set&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginEnd=&quot;5dp&quot;\r\n                android:text=&quot;@string/set&quot;\r\n                app:backgroundTint=&quot;@color/colorPrimary&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toStartOf=&quot;@+id/btn_cancel&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n    \r\n            &lt;android.support.v7.widget.AppCompatButton\r\n                android:id=&quot;@+id/btn_cancel&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;5dp&quot;\r\n                android:text=&quot;@string/cancel&quot;\r\n                app:backgroundTint=&quot;@color/colorPrimary&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toEndOf=&quot;@+id/btn_set&quot; /&gt;\r\n    \r\n            &lt;ViewSwitcher\r\n                android:id=&quot;@+id/view_switcher&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                app:layout_constraintBottom_toTopOf=&quot;@+id/btn_set&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toBottomOf=&quot;@+id/btn_date&quot;&gt;\r\n    \r\n                &lt;DatePicker\r\n                    android:id=&quot;@+id/date_picker&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:theme=&quot;@style/DialogTheme&quot; /&gt;\r\n    \r\n                &lt;TimePicker\r\n                    android:id=&quot;@+id/time_picker&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:theme=&quot;@style/DialogTheme&quot; /&gt;\r\n            &lt;/ViewSwitcher&gt;\r\n        &lt;/android.support.constraint.ConstraintLayout&gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\n\r\n**DialogTheme style**\r\n \r\n\r\n    &lt;style name=&quot;DialogTheme&quot;&gt;\r\n            &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n            &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n            &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n**Calling code**\r\n\r\n    new CustomDateTimePicker(context,\r\n            new CustomDateTimePicker.ICustomDateTimeListener() {\r\n                @Override\r\n                public void onSet(Dialog dialog, Calendar calendarSelected,\r\n                                  Date dateSelected, int year,\r\n                                  String monthFullName,\r\n                                  String monthShortName,\r\n                                  int monthNumber, int date,\r\n                                  String weekDayFullName,\r\n                                  String weekDayShortName, int hour24,\r\n                                  int hour12,\r\n                                  int min, int sec, String AM_PM) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onCancel() {\r\n    \r\n                }\r\n            }).set24HourFormat(true).setDate(Calendar.getInstance())\r\n            .showDialog();","title":"Android Date Time picker in one dialog","body":"<p>This answer is basically an improvement in answer given by @Mayur Patel: <a href=\"https://stackoverflow.com/a/38604615/3994127\">https://stackoverflow.com/a/38604615/3994127</a></p>\n\n<p><strong>CustomDateTimePicker.java</strong></p>\n\n<pre><code>import android.app.Dialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\nimport android.support.v7.widget.AppCompatButton;\nimport android.view.View;\nimport android.view.Window;\nimport android.widget.DatePicker;\nimport android.widget.TimePicker;\nimport android.widget.ViewSwitcher;\n\nimport com.gotrack.gotrack.R;\n\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.Locale;\n\npublic class CustomDateTimePicker implements View.OnClickListener {\n    private Calendar calendar_date = null;\n    private ViewSwitcher viewSwitcher;\n    private DatePicker datePicker;\n    private TimePicker timePicker;\n    private AppCompatButton btnDate, btnTime;\n\n    private ICustomDateTimeListener iCustomDateTimeListener = null;\n\n    private Dialog dialog;\n\n    private boolean is24HourView = true, isAutoDismiss = true;\n\n    private int selectedHour, selectedMinute;\n\n    public CustomDateTimePicker(Context context,\n                                ICustomDateTimeListener customDateTimeListener) {\n        iCustomDateTimeListener = customDateTimeListener;\n\n        dialog = new Dialog(context);\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\n        dialog.setContentView(R.layout.date_time_picker);\n        dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {\n            @Override\n            public void onDismiss(DialogInterface dialog) {\n                resetData();\n            }\n        });\n    }\n\n    private void setView() {\n        btnDate = dialog.findViewById(R.id.btn_date);\n        btnTime = dialog.findViewById(R.id.btn_time);\n        dialog.findViewById(R.id.btn_set).setOnClickListener(this);\n        dialog.findViewById(R.id.btn_cancel).setOnClickListener(this);\n        viewSwitcher = dialog.findViewById(R.id.view_switcher);\n        datePicker = dialog.findViewById(R.id.date_picker);\n        timePicker = dialog.findViewById(R.id.time_picker);\n\n        btnDate.setOnClickListener(this);\n        btnTime.setOnClickListener(this);\n\n        timePicker.setIs24HourView(is24HourView);\n        timePicker.setCurrentHour(selectedHour);\n        timePicker.setCurrentMinute(selectedMinute);\n\n        datePicker.updateDate(calendar_date.get(Calendar.YEAR),\n                calendar_date.get(Calendar.MONTH),\n                calendar_date.get(Calendar.DATE));\n\n        btnDate.performClick();\n    }\n\n    public void showDialog() {\n        if (!dialog.isShowing()) {\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            selectedHour = calendar_date.get(Calendar.HOUR_OF_DAY);\n            selectedMinute = calendar_date.get(Calendar.MINUTE);\n\n            dialog.show();\n\n            setView();\n        }\n    }\n\n    public CustomDateTimePicker setAutoDismiss(boolean isAutoDismiss) {\n        this.isAutoDismiss = isAutoDismiss;\n        return this;\n    }\n\n    public CustomDateTimePicker dismissDialog() {\n        if (!dialog.isShowing())\n            dialog.dismiss();\n\n        return this;\n    }\n\n    public CustomDateTimePicker setDate(Calendar calendar) {\n        if (calendar != null)\n            calendar_date = calendar;\n        return this;\n    }\n\n    public CustomDateTimePicker setDate(Date date) {\n        if (date != null) {\n            calendar_date = Calendar.getInstance();\n            calendar_date.setTime(date);\n        }\n        return this;\n    }\n\n    public CustomDateTimePicker setDate(int year, int month, int day) {\n        if (month &lt; 12 &amp;&amp; month &gt;= 0 &amp;&amp; day &lt; 32 &amp;&amp; day &gt;= 0 &amp;&amp; year &gt; 100\n                &amp;&amp; year &lt; 3000) {\n            calendar_date = Calendar.getInstance();\n            calendar_date.set(year, month, day);\n        }\n        return this;\n    }\n\n    public CustomDateTimePicker setTimeIn24HourFormat(int hourIn24Format, int minute) {\n        if (hourIn24Format &lt; 24 &amp;&amp; hourIn24Format &gt;= 0 &amp;&amp; minute &gt;= 0\n                &amp;&amp; minute &lt; 60) {\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            calendar_date.set(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\n                    minute);\n\n            is24HourView = true;\n        }\n        return this;\n    }\n\n    public CustomDateTimePicker setTimeIn12HourFormat(int hourIn12Format, int minute,\n                                                      boolean isAM) {\n        if (hourIn12Format &lt; 13 &amp;&amp; hourIn12Format &gt; 0 &amp;&amp; minute &gt;= 0\n                &amp;&amp; minute &lt; 60) {\n            if (hourIn12Format == 12)\n                hourIn12Format = 0;\n\n            int hourIn24Format = hourIn12Format;\n\n            if (!isAM)\n                hourIn24Format += 12;\n\n            if (calendar_date == null)\n                calendar_date = Calendar.getInstance();\n\n            calendar_date.set(calendar_date.get(Calendar.YEAR),\n                    calendar_date.get(Calendar.MONTH),\n                    calendar_date.get(Calendar.DAY_OF_MONTH), hourIn24Format,\n                    minute);\n\n            is24HourView = false;\n        }\n        return this;\n    }\n\n    public CustomDateTimePicker set24HourFormat(boolean is24HourFormat) {\n        is24HourView = is24HourFormat;\n        return this;\n    }\n\n    public interface ICustomDateTimeListener {\n        void onSet(Dialog dialog, Calendar calendarSelected,\n                   Date dateSelected, int year, String monthFullName,\n                   String monthShortName, int monthNumber, int day,\n                   String weekDayFullName, String weekDayShortName, int hour24,\n                   int hour12, int min, int sec, String AM_PM);\n\n        void onCancel();\n    }\n\n    @Override\n    public void onClick(View v) {\n        switch (v.getId()) {\n            case R.id.btn_date:\n                btnTime.setEnabled(true);\n                btnDate.setEnabled(false);\n\n                if (viewSwitcher.getCurrentView() != datePicker) {\n                    viewSwitcher.showPrevious();\n                }\n                break;\n\n            case R.id.btn_time:\n                btnTime.setEnabled(false);\n                btnDate.setEnabled(true);\n                if (viewSwitcher.getCurrentView() == datePicker) {\n                    viewSwitcher.showNext();\n                }\n                break;\n\n\n            case R.id.btn_set:\n                if (iCustomDateTimeListener != null) {\n                    int month = datePicker.getMonth();\n                    int year = datePicker.getYear();\n                    int day = datePicker.getDayOfMonth();\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                    selectedHour = timePicker.getHour();\n                    selectedMinute = timePicker.getMinute();\n                } else {\n                    selectedHour = timePicker.getCurrentHour();\n                    selectedMinute = timePicker.getCurrentMinute();\n                }\n\n                    calendar_date.set(year, month, day, selectedHour,\n                            selectedMinute);\n\n                    iCustomDateTimeListener.onSet(dialog, calendar_date,\n                            calendar_date.getTime(), calendar_date\n                                    .get(Calendar.YEAR),\n                            getMonthFullName(calendar_date.get(Calendar.MONTH)),\n                            getMonthShortName(calendar_date.get(Calendar.MONTH)),\n                            calendar_date.get(Calendar.MONTH), calendar_date\n                                    .get(Calendar.DAY_OF_MONTH),\n                            getWeekDayFullName(calendar_date\n                                    .get(Calendar.DAY_OF_WEEK)),\n                            getWeekDayShortName(calendar_date\n                                    .get(Calendar.DAY_OF_WEEK)), calendar_date\n                                    .get(Calendar.HOUR_OF_DAY),\n                            getHourIn12Format(calendar_date\n                                    .get(Calendar.HOUR_OF_DAY)), calendar_date\n                                    .get(Calendar.MINUTE), calendar_date\n                                    .get(Calendar.SECOND), getAMPM(calendar_date));\n                }\n                if (dialog.isShowing() &amp;&amp; isAutoDismiss)\n                    dialog.dismiss();\n                break;\n\n            case R.id.btn_cancel:\n                if (iCustomDateTimeListener != null)\n                    iCustomDateTimeListener.onCancel();\n                if (dialog.isShowing())\n                    dialog.dismiss();\n                break;\n        }\n    }\n\n    /**\n     * @param date       date in String\n     * @param fromFormat format of your &lt;b&gt;date&lt;/b&gt; eg: if your date is 2011-07-07\n     *                   09:09:09 then your format will be &lt;b&gt;yyyy-MM-dd hh:mm:ss&lt;/b&gt;\n     * @param toFormat   format to which you want to convert your &lt;b&gt;date&lt;/b&gt; eg: if\n     *                   required format is 31 July 2011 then the toFormat should be\n     *                   &lt;b&gt;d MMMM yyyy&lt;/b&gt;\n     * @return formatted date\n     */\n    public static String convertDate(String date, String fromFormat,\n                                     String toFormat) {\n        try {\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(fromFormat, Locale.getDefault());\n            Date d = simpleDateFormat.parse(date);\n            Calendar calendar = Calendar.getInstance();\n            calendar.setTime(d);\n\n            simpleDateFormat = new SimpleDateFormat(toFormat, Locale.getDefault());\n            simpleDateFormat.setCalendar(calendar);\n            date = simpleDateFormat.format(calendar.getTime());\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return date;\n    }\n\n    private String getMonthFullName(int monthNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.MONTH, monthNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"MMMM\", Locale.getDefault());\n        simpleDateFormat.setCalendar(calendar);\n\n        return simpleDateFormat.format(calendar.getTime());\n    }\n\n    private String getMonthShortName(int monthNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.MONTH, monthNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"MMM\", Locale.getDefault());\n        simpleDateFormat.setCalendar(calendar);\n\n        return simpleDateFormat.format(calendar.getTime());\n    }\n\n    private String getWeekDayFullName(int weekDayNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EEEE\", Locale.getDefault());\n        simpleDateFormat.setCalendar(calendar);\n\n        return simpleDateFormat.format(calendar.getTime());\n    }\n\n    private String getWeekDayShortName(int weekDayNumber) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EE\", Locale.getDefault());\n        simpleDateFormat.setCalendar(calendar);\n\n        return simpleDateFormat.format(calendar.getTime());\n    }\n\n    private int getHourIn12Format(int hour24) {\n        int hourIn12Format = 0;\n\n        if (hour24 == 0)\n            hourIn12Format = 12;\n        else if (hour24 &lt;= 12)\n            hourIn12Format = hour24;\n        else\n            hourIn12Format = hour24 - 12;\n\n        return hourIn12Format;\n    }\n\n    private String getAMPM(Calendar calendar) {\n        return (calendar.get(Calendar.AM_PM) == (Calendar.AM)) ? \"AM\"\n                : \"PM\";\n    }\n\n    private CustomDateTimePicker resetData() {\n        calendar_date = null;\n        is24HourView = true;\n        return this;\n    }\n\n    public static String pad(int integerToPad) {\n        if (integerToPad &gt;= 10 || integerToPad &lt; 0)\n            return String.valueOf(integerToPad);\n        else\n            return \"0\" + String.valueOf(integerToPad);\n    }\n}\n</code></pre>\n\n<p><strong>date_time_picker.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"15dp\"&gt;\n\n        &lt;android.support.v7.widget.AppCompatButton\n            android:id=\"@+id/btn_date\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"5dp\"\n            android:text=\"@string/set_date\"\n            app:backgroundTint=\"@color/colorPrimary\"\n            app:layout_constraintEnd_toStartOf=\"@+id/btn_time\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n        &lt;android.support.v7.widget.AppCompatButton\n            android:id=\"@+id/btn_time\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"5dp\"\n            android:text=\"@string/set_time\"\n            app:backgroundTint=\"@color/colorPrimary\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toEndOf=\"@+id/btn_date\"\n            app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n        &lt;android.support.v7.widget.AppCompatButton\n            android:id=\"@+id/btn_set\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"5dp\"\n            android:text=\"@string/set\"\n            app:backgroundTint=\"@color/colorPrimary\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toStartOf=\"@+id/btn_cancel\"\n            app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n        &lt;android.support.v7.widget.AppCompatButton\n            android:id=\"@+id/btn_cancel\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"5dp\"\n            android:text=\"@string/cancel\"\n            app:backgroundTint=\"@color/colorPrimary\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toEndOf=\"@+id/btn_set\" /&gt;\n\n        &lt;ViewSwitcher\n            android:id=\"@+id/view_switcher\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            app:layout_constraintBottom_toTopOf=\"@+id/btn_set\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toBottomOf=\"@+id/btn_date\"&gt;\n\n            &lt;DatePicker\n                android:id=\"@+id/date_picker\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center\"\n                android:theme=\"@style/DialogTheme\" /&gt;\n\n            &lt;TimePicker\n                android:id=\"@+id/time_picker\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center\"\n                android:theme=\"@style/DialogTheme\" /&gt;\n        &lt;/ViewSwitcher&gt;\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p><strong>DialogTheme style</strong></p>\n\n<pre><code>&lt;style name=\"DialogTheme\"&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p><strong>Calling code</strong></p>\n\n<pre><code>new CustomDateTimePicker(context,\n        new CustomDateTimePicker.ICustomDateTimeListener() {\n            @Override\n            public void onSet(Dialog dialog, Calendar calendarSelected,\n                              Date dateSelected, int year,\n                              String monthFullName,\n                              String monthShortName,\n                              int monthNumber, int date,\n                              String weekDayFullName,\n                              String weekDayShortName, int hour24,\n                              int hour12,\n                              int min, int sec, String AM_PM) {\n\n            }\n\n            @Override\n            public void onCancel() {\n\n            }\n        }).set24HourFormat(true).setDate(Calendar.getInstance())\n        .showDialog();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15855435,"reputation":21,"user_id":11439949,"display_name":"Chittu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556800678,"creation_date":1556796087,"answer_id":55951352,"question_id":38604157,"body_markdown":"You Can Get `Date` And `Time` One By One Using `Pickers` In Android.\r\n\r\n    Calendar getDate = Calendar.getInstance();\r\n    \r\n             cDay = getDate.get(Calendar.DAY_OF_MONTH);\r\n             cMonth = getDate.get(Calendar.MONTH);\r\n             cYear = getDate.get(Calendar.YEAR);\r\n    \r\n             timePickerDialog = new TimePickerDialog(DesignActivity.this, new TimePickerDialog.OnTimeSetListener() {\r\n                @Override\r\n                public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\r\n    \r\n                    final String AM_PM ;\r\n    \r\n                    if (hourOfDay &gt; 12) {\r\n                        hourOfDay -= 12;\r\n                        AM_PM = &quot;pm&quot;;\r\n                    } else if (hourOfDay == 0) {\r\n                        hourOfDay += 12;\r\n                        AM_PM = &quot;am&quot;;\r\n                    } else if (hourOfDay == 12)\r\n                        AM_PM = &quot;pm&quot;;\r\n                    else\r\n                        AM_PM = &quot;am&quot;;\r\n    \r\n                    hour1 = hourOfDay;\r\n                    minutes1 = minute;\r\n    \r\n                    DatePickerDialog datePicker = new DatePickerDialog(DesignActivity.this, new DatePickerDialog.OnDateSetListener() {\r\n                        @Override\r\n                        public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n    \r\n                            cYear = year;\r\n                            cMonth = month;\r\n                            cDay = dayOfMonth;\r\n    \r\n                            editText.setText(hour1 + &quot;:&quot; +minutes1 + AM_PM  + &quot;     &quot; + cDay + &quot;/&quot; + cMonth + &quot;/&quot; + cYear);\r\n    \r\n                        }\r\n                    },cYear,cMonth,cDay);\r\n    \r\n                    datePicker.show();\r\n    \r\n                }\r\n            },hour1,minutes1,false);\r\n    \r\n            timePickerDialog.show();\r\n    \r\n        }\r\n    });\r\n\r\nIf You Will Need More Explanation About \r\n&lt;a href=&quot;https://theandroidcodings.blogspot.com/2019/04/time-and-date-pickers-in-android.html&quot;&gt;Click This&lt;/a&gt;.\r\n\r\n","title":"Android Date Time picker in one dialog","body":"<p>You Can Get <code>Date</code> And <code>Time</code> One By One Using <code>Pickers</code> In Android.</p>\n\n<pre><code>Calendar getDate = Calendar.getInstance();\n\n         cDay = getDate.get(Calendar.DAY_OF_MONTH);\n         cMonth = getDate.get(Calendar.MONTH);\n         cYear = getDate.get(Calendar.YEAR);\n\n         timePickerDialog = new TimePickerDialog(DesignActivity.this, new TimePickerDialog.OnTimeSetListener() {\n            @Override\n            public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\n\n                final String AM_PM ;\n\n                if (hourOfDay &gt; 12) {\n                    hourOfDay -= 12;\n                    AM_PM = \"pm\";\n                } else if (hourOfDay == 0) {\n                    hourOfDay += 12;\n                    AM_PM = \"am\";\n                } else if (hourOfDay == 12)\n                    AM_PM = \"pm\";\n                else\n                    AM_PM = \"am\";\n\n                hour1 = hourOfDay;\n                minutes1 = minute;\n\n                DatePickerDialog datePicker = new DatePickerDialog(DesignActivity.this, new DatePickerDialog.OnDateSetListener() {\n                    @Override\n                    public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\n\n                        cYear = year;\n                        cMonth = month;\n                        cDay = dayOfMonth;\n\n                        editText.setText(hour1 + \":\" +minutes1 + AM_PM  + \"     \" + cDay + \"/\" + cMonth + \"/\" + cYear);\n\n                    }\n                },cYear,cMonth,cDay);\n\n                datePicker.show();\n\n            }\n        },hour1,minutes1,false);\n\n        timePickerDialog.show();\n\n    }\n});\n</code></pre>\n\n<p>If You Will Need More Explanation About \n<a href=\"https://theandroidcodings.blogspot.com/2019/04/time-and-date-pickers-in-android.html\" rel=\"nofollow noreferrer\">Click This</a>.</p>\n"},{"comments":[{"owner":{"account_id":18724988,"reputation":519,"user_id":13651898,"display_name":"Supun Ayeshmantha"},"score":0,"creation_date":1681780127,"post_id":57449808,"comment_id":134108847,"body_markdown":"This works like a charm , but you need to add +1 to month to get the correct value","body":"This works like a charm , but you need to add +1 to month to get the correct value"}],"tags":[],"owner":{"account_id":7837986,"reputation":42767,"user_id":5925259,"accept_rate":100,"display_name":"Yogesh Umesh Vaity"},"comment_count":1,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1589372499,"creation_date":1565525081,"answer_id":57449808,"question_id":38604157,"body_markdown":"## Kotlin ##\r\n\r\nHere&#39;s the tested Kotlin code for combining the `DatePickerDialog` and `TimePickerDialog` together. It becomes simpler because of the support of the closures in Kotlin. The following function should be placed in your `Fragment` or `Activity`. The `requireContext()` method is a member of `Fragment`. If you are using `Activity`, use `applicationContext` instead.\r\n\r\n    private fun pickDateTime() {\r\n        val currentDateTime = Calendar.getInstance()\r\n        val startYear = currentDateTime.get(Calendar.YEAR)\r\n        val startMonth = currentDateTime.get(Calendar.MONTH)\r\n        val startDay = currentDateTime.get(Calendar.DAY_OF_MONTH)\r\n        val startHour = currentDateTime.get(Calendar.HOUR_OF_DAY)\r\n        val startMinute = currentDateTime.get(Calendar.MINUTE)\r\n    \r\n        DatePickerDialog(requireContext(), DatePickerDialog.OnDateSetListener { _, year, month, day -&gt;\r\n            TimePickerDialog(requireContext(), TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\r\n                val pickedDateTime = Calendar.getInstance()\r\n                pickedDateTime.set(year, month, day, hour, minute)\r\n                doSomethingWith(pickedDateTime)\r\n            }, startHour, startMinute, false).show()\r\n        }, startYear, startMonth, startDay).show()\r\n    }\r\n\r\nCall the above function in `onClickListener` of your button as following:\r\n\r\n    button.setOnClickListener { pickDateTime() }\r\n\r\nThat&#39;s it!\r\n\r\nIf you want to show clock in 12 hour or 24 hour format depending on user&#39;s settings, replace `false` with `DateFormat.is24HourFormat(requireContext())`","title":"Android Date Time picker in one dialog","body":"<h2>Kotlin</h2>\n\n<p>Here's the tested Kotlin code for combining the <code>DatePickerDialog</code> and <code>TimePickerDialog</code> together. It becomes simpler because of the support of the closures in Kotlin. The following function should be placed in your <code>Fragment</code> or <code>Activity</code>. The <code>requireContext()</code> method is a member of <code>Fragment</code>. If you are using <code>Activity</code>, use <code>applicationContext</code> instead.</p>\n\n<pre><code>private fun pickDateTime() {\n    val currentDateTime = Calendar.getInstance()\n    val startYear = currentDateTime.get(Calendar.YEAR)\n    val startMonth = currentDateTime.get(Calendar.MONTH)\n    val startDay = currentDateTime.get(Calendar.DAY_OF_MONTH)\n    val startHour = currentDateTime.get(Calendar.HOUR_OF_DAY)\n    val startMinute = currentDateTime.get(Calendar.MINUTE)\n\n    DatePickerDialog(requireContext(), DatePickerDialog.OnDateSetListener { _, year, month, day -&gt;\n        TimePickerDialog(requireContext(), TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\n            val pickedDateTime = Calendar.getInstance()\n            pickedDateTime.set(year, month, day, hour, minute)\n            doSomethingWith(pickedDateTime)\n        }, startHour, startMinute, false).show()\n    }, startYear, startMonth, startDay).show()\n}\n</code></pre>\n\n<p>Call the above function in <code>onClickListener</code> of your button as following:</p>\n\n<pre><code>button.setOnClickListener { pickDateTime() }\n</code></pre>\n\n<p>That's it!</p>\n\n<p>If you want to show clock in 12 hour or 24 hour format depending on user's settings, replace <code>false</code> with <code>DateFormat.is24HourFormat(requireContext())</code></p>\n"},{"tags":[],"owner":{"account_id":7278409,"reputation":113,"user_id":5563931,"display_name":"swdmnd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574804884,"creation_date":1574804555,"answer_id":59059771,"question_id":38604157,"body_markdown":"Based on @[Yogesh Umesh Vaity&#39;s answer][1], I made an object for showing a DateTimePicker in Kotlin.\r\n\r\n    class DateTimePicker(val context: Context, var pickTime:Boolean = false, var calendar: Calendar = Calendar.getInstance(),\r\n                         var callback: (it : DateTimePicker) -&gt; Unit) {\r\n\r\n        companion object{\r\n            @JvmStatic\r\n            fun getFormat(format : String) : String{\r\n                when(format){\r\n                    &quot;d&quot; -&gt; return &quot;dd/MM/yyyy&quot;\r\n                    &quot;t&quot; -&gt; return &quot;HH:mm&quot;\r\n                    &quot;dt&quot; -&gt; return &quot;dd/MM/yyyy HH:mm&quot;\r\n                }\r\n                return &quot;dd/MM/yyyy&quot;\r\n            }\r\n        }\r\n\r\n        fun show(){\r\n            val startYear = calendar.get(Calendar.YEAR)\r\n            val startMonth = calendar.get(Calendar.MONTH)\r\n            val startDay = calendar.get(Calendar.DAY_OF_MONTH)\r\n            val startHour = calendar.get(Calendar.HOUR_OF_DAY)\r\n            val startMinute = calendar.get(Calendar.MINUTE)\r\n\r\n            DatePickerDialog(context, DatePickerDialog.OnDateSetListener { _, year, month, day -&gt;\r\n                if(pickTime) {\r\n                    TimePickerDialog(context, TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\r\n                        calendar.set(year, month, day, hour, minute)\r\n                        callback(this)\r\n                    }, startHour, startMinute, true).show()\r\n                } else {\r\n                    calendar.set(year,month,day)\r\n                    callback(this)\r\n                }\r\n            }, startYear, startMonth, startDay).show()\r\n        }\r\n\r\n        fun showTime(){\r\n            val startYear = calendar.get(Calendar.YEAR)\r\n            val startMonth = calendar.get(Calendar.MONTH)\r\n            val startDay = calendar.get(Calendar.DAY_OF_MONTH)\r\n            val startHour = calendar.get(Calendar.HOUR_OF_DAY)\r\n            val startMinute = calendar.get(Calendar.MINUTE)\r\n\r\n            TimePickerDialog(context, TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\r\n                calendar.set(startYear, startMonth, startDay, hour, minute)\r\n                callback(this)\r\n            }, startHour, startMinute, true).show()\r\n        }\r\n    }\r\n\r\nYou could use the object from your Activity like this:\r\n\r\n    // Open Date Picker only and set an EditText\r\n    DateTimePicker(this){\r\n        val sdf = SimpleDateFormat(DateTimePicker.getFormat(&quot;d&quot;), Locale.getDefault())\r\n        editText.setText(sdf.format(it.calendar.time))\r\n    }.show()\r\n    \r\n    // Open Date Picker then Time picker and set an EditText\r\n    DateTimePicker(this, true){\r\n        val sdf = SimpleDateFormat(DateTimePicker.getFormat(&quot;dt&quot;), Locale.getDefault())\r\n        editText.setText(sdf.format(it.calendar.time))\r\n    }.show()\r\n    \r\n    // Open Time Picker only and set an EditText\r\n    DateTimePicker(this){\r\n        val sdf = SimpleDateFormat(DateTimePicker.getFormat(&quot;t&quot;), Locale.getDefault())\r\n        editText.setText(sdf.format(it.calendar.time))\r\n    }.showTime()\r\n    \r\n    // Use your own calendar object if you prefer to use your pre-configured calendar\r\n    val myCalendar = Calendar.getInstance()\r\n    myCalendar.set(Calendar.YEAR, 1995)\r\n    DateTimePicker(this, false, myCalendar){\r\n        val sdf = SimpleDateFormat(DateTimePicker.getFormat(&quot;d&quot;), Locale.getDefault())\r\n        editText.setText(sdf.format(it.calendar.time))\r\n    }.show()\r\n\r\n  [1]: https://stackoverflow.com/a/57449808/5563931","title":"Android Date Time picker in one dialog","body":"<p>Based on @<a href=\"https://stackoverflow.com/a/57449808/5563931\">Yogesh Umesh Vaity's answer</a>, I made an object for showing a DateTimePicker in Kotlin.</p>\n\n<pre><code>class DateTimePicker(val context: Context, var pickTime:Boolean = false, var calendar: Calendar = Calendar.getInstance(),\n                     var callback: (it : DateTimePicker) -&gt; Unit) {\n\n    companion object{\n        @JvmStatic\n        fun getFormat(format : String) : String{\n            when(format){\n                \"d\" -&gt; return \"dd/MM/yyyy\"\n                \"t\" -&gt; return \"HH:mm\"\n                \"dt\" -&gt; return \"dd/MM/yyyy HH:mm\"\n            }\n            return \"dd/MM/yyyy\"\n        }\n    }\n\n    fun show(){\n        val startYear = calendar.get(Calendar.YEAR)\n        val startMonth = calendar.get(Calendar.MONTH)\n        val startDay = calendar.get(Calendar.DAY_OF_MONTH)\n        val startHour = calendar.get(Calendar.HOUR_OF_DAY)\n        val startMinute = calendar.get(Calendar.MINUTE)\n\n        DatePickerDialog(context, DatePickerDialog.OnDateSetListener { _, year, month, day -&gt;\n            if(pickTime) {\n                TimePickerDialog(context, TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\n                    calendar.set(year, month, day, hour, minute)\n                    callback(this)\n                }, startHour, startMinute, true).show()\n            } else {\n                calendar.set(year,month,day)\n                callback(this)\n            }\n        }, startYear, startMonth, startDay).show()\n    }\n\n    fun showTime(){\n        val startYear = calendar.get(Calendar.YEAR)\n        val startMonth = calendar.get(Calendar.MONTH)\n        val startDay = calendar.get(Calendar.DAY_OF_MONTH)\n        val startHour = calendar.get(Calendar.HOUR_OF_DAY)\n        val startMinute = calendar.get(Calendar.MINUTE)\n\n        TimePickerDialog(context, TimePickerDialog.OnTimeSetListener { _, hour, minute -&gt;\n            calendar.set(startYear, startMonth, startDay, hour, minute)\n            callback(this)\n        }, startHour, startMinute, true).show()\n    }\n}\n</code></pre>\n\n<p>You could use the object from your Activity like this:</p>\n\n<pre><code>// Open Date Picker only and set an EditText\nDateTimePicker(this){\n    val sdf = SimpleDateFormat(DateTimePicker.getFormat(\"d\"), Locale.getDefault())\n    editText.setText(sdf.format(it.calendar.time))\n}.show()\n\n// Open Date Picker then Time picker and set an EditText\nDateTimePicker(this, true){\n    val sdf = SimpleDateFormat(DateTimePicker.getFormat(\"dt\"), Locale.getDefault())\n    editText.setText(sdf.format(it.calendar.time))\n}.show()\n\n// Open Time Picker only and set an EditText\nDateTimePicker(this){\n    val sdf = SimpleDateFormat(DateTimePicker.getFormat(\"t\"), Locale.getDefault())\n    editText.setText(sdf.format(it.calendar.time))\n}.showTime()\n\n// Use your own calendar object if you prefer to use your pre-configured calendar\nval myCalendar = Calendar.getInstance()\nmyCalendar.set(Calendar.YEAR, 1995)\nDateTimePicker(this, false, myCalendar){\n    val sdf = SimpleDateFormat(DateTimePicker.getFormat(\"d\"), Locale.getDefault())\n    editText.setText(sdf.format(it.calendar.time))\n}.show()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16060483,"reputation":250,"user_id":11591491,"display_name":"Sadique Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691576549,"creation_date":1691576549,"answer_id":76866815,"question_id":38604157,"body_markdown":"Here is java version of @yogesh answer\r\n\r\n    \r\n    private void createDateTimePickerDialog() {\r\n        Calendar currentDateTime = Calendar.getInstance();\r\n        int startYear = currentDateTime.get(Calendar.YEAR);\r\n        int startMonth = currentDateTime.get(Calendar.MONTH) + 1;\r\n        int startDay = currentDateTime.get(Calendar.DAY_OF_MONTH);\r\n        int startHour = currentDateTime.get(Calendar.HOUR_OF_DAY);\r\n        int startMinute = currentDateTime.get(Calendar.MINUTE);\r\n\r\n        new DatePickerDialog(this, (datePicker, year, month, day) -&gt; new TimePickerDialog(ProjectDatesActivity.this, (timePicker, hour, minute) -&gt; {\r\n            Calendar pickedDateTime = Calendar.getInstance();\r\n            pickedDateTime.set(year, month, day, hour, minute);\r\n            String date = day + &quot;-&quot; + (month + 1) + &quot;-&quot; + year;//since month starts from 0 we need to +1\r\n            SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault());\r\n            try {\r\n                Date date_form = sdf.parse(date);\r\n                finish_date = sdf.format(Objects.requireNonNull(date_form));\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n            }\r\n            String time = hour + &quot;:&quot; + minute;\r\n            DateTimeTv.setText(date + &quot; &quot; + time);\r\n        }, startHour, startMinute, false).show(), startYear, startMonth, startDay).show();\r\n    }","title":"Android Date Time picker in one dialog","body":"<p>Here is java version of @yogesh answer</p>\n<pre><code>private void createDateTimePickerDialog() {\n    Calendar currentDateTime = Calendar.getInstance();\n    int startYear = currentDateTime.get(Calendar.YEAR);\n    int startMonth = currentDateTime.get(Calendar.MONTH) + 1;\n    int startDay = currentDateTime.get(Calendar.DAY_OF_MONTH);\n    int startHour = currentDateTime.get(Calendar.HOUR_OF_DAY);\n    int startMinute = currentDateTime.get(Calendar.MINUTE);\n\n    new DatePickerDialog(this, (datePicker, year, month, day) -&gt; new TimePickerDialog(ProjectDatesActivity.this, (timePicker, hour, minute) -&gt; {\n        Calendar pickedDateTime = Calendar.getInstance();\n        pickedDateTime.set(year, month, day, hour, minute);\n        String date = day + &quot;-&quot; + (month + 1) + &quot;-&quot; + year;//since month starts from 0 we need to +1\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault());\n        try {\n            Date date_form = sdf.parse(date);\n            finish_date = sdf.format(Objects.requireNonNull(date_form));\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        String time = hour + &quot;:&quot; + minute;\n        DateTimeTv.setText(date + &quot; &quot; + time);\n    }, startHour, startMinute, false).show(), startYear, startMonth, startDay).show();\n}\n</code></pre>\n"}],"owner":{"account_id":7989118,"reputation":692,"user_id":6027516,"accept_rate":28,"display_name":"anuradha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52818,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"answer_count":10,"score":31,"last_activity_date":1691576549,"creation_date":1469596122,"question_id":38604157,"body_markdown":"I am using material `Date` `Time` picker for my Android app. But I want to combine the `Date` and `Time` picker in one dialog.\r\n\r\nI am following [this one][1]. But I need to select the time right after the date selection.\r\n\r\nPlease suggest possible way to do this one.\r\n\r\n\r\n  [1]: https://github.com/wdullaer/MaterialDateTimePicker#implement-an-ontimesetlistenerondatesetlistener","title":"Android Date Time picker in one dialog","body":"<p>I am using material <code>Date</code> <code>Time</code> picker for my Android app. But I want to combine the <code>Date</code> and <code>Time</code> picker in one dialog.</p>\n\n<p>I am following <a href=\"https://github.com/wdullaer/MaterialDateTimePicker#implement-an-ontimesetlistenerondatesetlistener\" rel=\"noreferrer\">this one</a>. But I need to select the time right after the date selection.</p>\n\n<p>Please suggest possible way to do this one.</p>\n"},{"tags":["java","android","xml","android-layout","android-chips"],"answers":[{"tags":[],"owner":{"account_id":12953709,"reputation":6501,"user_id":9365212,"display_name":"AgentP"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1589694998,"creation_date":1589694998,"answer_id":61847604,"question_id":61847481,"body_markdown":"  In your main activity you are doing like this.\r\n\r\n    @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n            Chip chip = new Chip(this);\r\n            chip.setText(&quot;ABC&quot;);\r\n            chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n            chip.setCloseIconVisible(true);\r\n            chip.setTextColor(getResources().getColor(R.color.white));\r\n            chip.setTextAppearance(R.style.ChipTextAppearance);\r\n    \r\n            Chip chip2 = new Chip(this);\r\n            chip.setText(&quot;XYZ&quot;);\r\n            chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n            chip.setCloseIconVisible(true);\r\n            chip.setTextColor(getResources().getColor(R.color.white));\r\n            chip.setTextAppearance(R.style.ChipTextAppearance);\r\n    \r\n    \r\n            ChipGroup chipGroup = findViewById(R.id.chip_group_main);\r\n    \r\n            chipGroup.addView(chip);\r\n            chipGroup.addView(chip2);\r\n\r\nNotice you are creating a new instance of chip i.e chip2 but you are making changes to chip not chip2 instance in the next lines so the chip2 is not affected with any changes you made before. So in order to fix this change your code like this\r\n\r\n    @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.activity_main);\r\n        \r\n        \r\n                Chip chip = new Chip(this);\r\n                chip.setText(&quot;ABC&quot;);\r\n                chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n                chip.setCloseIconVisible(true);\r\n                chip.setTextColor(getResources().getColor(R.color.white));\r\n                chip.setTextAppearance(R.style.ChipTextAppearance);\r\n        \r\n                Chip chip2 = new Chip(this);\r\n                chip2.setText(&quot;XYZ&quot;);  //chip2\r\n                chip2.setChipBackgroundColorResource(R.color.colorAccent);\r\n                chip2.setCloseIconVisible(true);\r\n                chip2.setTextColor(getResources().getColor(R.color.white));\r\n                chip2.setTextAppearance(R.style.ChipTextAppearance);\r\n        \r\n        \r\n                ChipGroup chipGroup = findViewById(R.id.chip_group_main);\r\n        \r\n                chipGroup.addView(chip);\r\n                chipGroup.addView(chip2);\r\n\r\n","title":"Dynamically add chips to chipgroup","body":"<p>In your main activity you are doing like this.</p>\n\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        Chip chip = new Chip(this);\n        chip.setText(\"ABC\");\n        chip.setChipBackgroundColorResource(R.color.colorAccent);\n        chip.setCloseIconVisible(true);\n        chip.setTextColor(getResources().getColor(R.color.white));\n        chip.setTextAppearance(R.style.ChipTextAppearance);\n\n        Chip chip2 = new Chip(this);\n        chip.setText(\"XYZ\");\n        chip.setChipBackgroundColorResource(R.color.colorAccent);\n        chip.setCloseIconVisible(true);\n        chip.setTextColor(getResources().getColor(R.color.white));\n        chip.setTextAppearance(R.style.ChipTextAppearance);\n\n\n        ChipGroup chipGroup = findViewById(R.id.chip_group_main);\n\n        chipGroup.addView(chip);\n        chipGroup.addView(chip2);\n</code></pre>\n\n<p>Notice you are creating a new instance of chip i.e chip2 but you are making changes to chip not chip2 instance in the next lines so the chip2 is not affected with any changes you made before. So in order to fix this change your code like this</p>\n\n<pre><code>@Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n\n\n            Chip chip = new Chip(this);\n            chip.setText(\"ABC\");\n            chip.setChipBackgroundColorResource(R.color.colorAccent);\n            chip.setCloseIconVisible(true);\n            chip.setTextColor(getResources().getColor(R.color.white));\n            chip.setTextAppearance(R.style.ChipTextAppearance);\n\n            Chip chip2 = new Chip(this);\n            chip2.setText(\"XYZ\");  //chip2\n            chip2.setChipBackgroundColorResource(R.color.colorAccent);\n            chip2.setCloseIconVisible(true);\n            chip2.setTextColor(getResources().getColor(R.color.white));\n            chip2.setTextAppearance(R.style.ChipTextAppearance);\n\n\n            ChipGroup chipGroup = findViewById(R.id.chip_group_main);\n\n            chipGroup.addView(chip);\n            chipGroup.addView(chip2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2745438,"reputation":1116,"user_id":2365964,"accept_rate":71,"display_name":"FxRi4"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1607864765,"creation_date":1607864765,"answer_id":65275934,"question_id":61847481,"body_markdown":"yeah, can add chips to group with ` chipGroup.addView(chip);` \r\nplease note that you should add id to each chip in order to some functionality of group work perfectly (e.g `singleSelection=&quot;true&quot;` )\r\n\r\n     chip.setId(ViewCompat.generateViewId());","title":"Dynamically add chips to chipgroup","body":"<p>yeah, can add chips to group with <code> chipGroup.addView(chip);</code>\nplease note that you should add id to each chip in order to some functionality of group work perfectly (e.g <code>singleSelection=&quot;true&quot;</code> )</p>\n<pre><code> chip.setId(ViewCompat.generateViewId());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1802659,"reputation":4947,"user_id":1640578,"display_name":"Yogendra"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1648368464,"creation_date":1648368464,"answer_id":71634651,"question_id":61847481,"body_markdown":"In Kotlin :\r\n\r\n\r\n    // add chip group dynamically\r\n            item.itemData.projectTags.forEach { tagName -&gt;\r\n                binding.tagChipGroup.addView(createTagChip(context, tagName))\r\n            }\r\n\r\n\r\n// created seaprate method to create chips with attributes.\r\n \r\n    private fun createTagChip(context: Context, chipName: String): Chip {\r\n        return Chip(context).apply {\r\n            text = chipName\r\n            setChipBackgroundColorResource(R.color.purple_500)\r\n            isCloseIconVisible = true\r\n            setTextColor(ContextCompat.getColor(context, R.color.white))\r\n            setTextAppearance(R.style.ChipTextAppearance)\r\n        }\r\n\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5IIhK.jpg","title":"Dynamically add chips to chipgroup","body":"<p>In Kotlin :</p>\n<pre><code>// add chip group dynamically\n        item.itemData.projectTags.forEach { tagName -&gt;\n            binding.tagChipGroup.addView(createTagChip(context, tagName))\n        }\n</code></pre>\n<p>// created seaprate method to create chips with attributes.</p>\n<pre><code>private fun createTagChip(context: Context, chipName: String): Chip {\n    return Chip(context).apply {\n        text = chipName\n        setChipBackgroundColorResource(R.color.purple_500)\n        isCloseIconVisible = true\n        setTextColor(ContextCompat.getColor(context, R.color.white))\n        setTextAppearance(R.style.ChipTextAppearance)\n    }\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/5IIhK.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5IIhK.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":4964163,"reputation":1490,"user_id":3994118,"display_name":"Syed Umair"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22791,"favorite_count":0,"down_vote_count":1,"up_vote_count":21,"accepted_answer_id":61847604,"answer_count":3,"score":20,"last_activity_date":1691576244,"creation_date":1589694129,"question_id":61847481,"body_markdown":"I&#39;m trying to add several chips to the chip group dynamically. The first one appears fine but others do not appear properly. But when I do it using XML it works fine.\r\n\r\n[![The last chip added is small, grey, and has no text. It should be orange and contain text like the first three.][1]][1]\r\n\r\n\r\nactivity_main.xml\r\n\r\n```xml\r\n&lt;HorizontalScrollView\r\n            android:layout_width=&quot;350dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:scrollbars=&quot;none&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@+id/chips_select&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.0&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/textView&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.51&quot;&gt;\r\n\t&lt;com.google.android.material.chip.ChipGroup\r\n                android:id=&quot;@+id/chip_group_main&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginStart=&quot;8dp&quot;\r\n                android:layout_marginTop=&quot;2dp&quot;\r\n                app:chipSpacingHorizontal=&quot;4dp&quot;&gt;\r\n\t\t&lt;com.google.android.material.chip.Chip\r\n                    style=&quot;@style/ChipTextAppearance&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Hello&quot;\r\n                    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\r\n                    app:closeIconEnabled=&quot;true&quot; /&gt;\r\n\t\t&lt;com.google.android.material.chip.Chip\r\n                    style=&quot;@style/ChipTextAppearance&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;World&quot;\r\n                    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\r\n                    app:closeIconEnabled=&quot;true&quot; /&gt;\r\n\t&lt;/com.google.android.material.chip.ChipGroup&gt;\r\n&lt;/HorizontalScrollView&gt;\r\n```\r\n\r\nIn MainActivity.java\r\n\r\n```java\r\n@Override\r\nprotected void onCreate(Bundle savedInstanceState) {\r\n  super.onCreate(savedInstanceState);\r\n  setContentView(R.layout.activity_main);\r\n\r\n  Chip chip = new Chip(this);\r\n  chip.setText(&quot;ABC&quot;);\r\n  chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n  chip.setCloseIconVisible(true);\r\n  chip.setTextColor(getResources().getColor(R.color.white));\r\n  chip.setTextAppearance(R.style.ChipTextAppearance);\r\n\r\n  Chip chip2 = new Chip(this);\r\n  chip.setText(&quot;XYZ&quot;);\r\n  chip.setChipBackgroundColorResource(R.color.colorAccent);\r\n  chip.setCloseIconVisible(true);\r\n  chip.setTextColor(getResources().getColor(R.color.white));\r\n  chip.setTextAppearance(R.style.ChipTextAppearance);\r\n\r\n  ChipGroup chipGroup = findViewById(R.id.chip_group_main);\r\n\r\n  chipGroup.addView(chip);\r\n  chipGroup.addView(chip2);\r\n}\r\n```\r\n\r\nstyle.xml\r\n```\r\n&lt;resources&gt;\r\n\t&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\r\n\t\t&lt;!-- Customize your theme here. --&gt;\r\n\t\t&lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n\t\t&lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n\t\t&lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n\t&lt;/style&gt;\r\n\t&lt;style name=&quot;ChipTextAppearance&quot; parent=&quot;TextAppearance.MaterialComponents.Chip&quot;&gt;\r\n\t\t&lt;item name=&quot;android:textColor&quot;&gt;@android:color/white&lt;/item&gt;\r\n\t\t&lt;item name=&quot;android:textSize&quot;&gt;12sp&lt;/item&gt;\r\n\t&lt;/style&gt;\r\n&lt;/resources&gt;\r\n```\r\n\r\nstandalone_chip.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;chip\r\n\txmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n\txmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\r\n    app:closeIconEnabled=&quot;true&quot;\r\n    style=&quot;@style/ChipTextAppearance&quot;\r\n    app:closeIconTint=&quot;@android:color/white&quot; /&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W0NHe.jpg","title":"Dynamically add chips to chipgroup","body":"<p>I'm trying to add several chips to the chip group dynamically. The first one appears fine but others do not appear properly. But when I do it using XML it works fine.</p>\n<p><a href=\"https://i.stack.imgur.com/W0NHe.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/W0NHe.jpg\" alt=\"The last chip added is small, grey, and has no text. It should be orange and contain text like the first three.\" /></a></p>\n<p>activity_main.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;HorizontalScrollView\n            android:layout_width=&quot;350dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:scrollbars=&quot;none&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n            app:layout_constraintEnd_toStartOf=&quot;@+id/chips_select&quot;\n            app:layout_constraintHorizontal_bias=&quot;0.0&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toBottomOf=&quot;@+id/textView&quot;\n            app:layout_constraintVertical_bias=&quot;0.51&quot;&gt;\n    &lt;com.google.android.material.chip.ChipGroup\n                android:id=&quot;@+id/chip_group_main&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginStart=&quot;8dp&quot;\n                android:layout_marginTop=&quot;2dp&quot;\n                app:chipSpacingHorizontal=&quot;4dp&quot;&gt;\n        &lt;com.google.android.material.chip.Chip\n                    style=&quot;@style/ChipTextAppearance&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;Hello&quot;\n                    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\n                    app:closeIconEnabled=&quot;true&quot; /&gt;\n        &lt;com.google.android.material.chip.Chip\n                    style=&quot;@style/ChipTextAppearance&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;World&quot;\n                    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\n                    app:closeIconEnabled=&quot;true&quot; /&gt;\n    &lt;/com.google.android.material.chip.ChipGroup&gt;\n&lt;/HorizontalScrollView&gt;\n</code></pre>\n<p>In MainActivity.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n  super.onCreate(savedInstanceState);\n  setContentView(R.layout.activity_main);\n\n  Chip chip = new Chip(this);\n  chip.setText(&quot;ABC&quot;);\n  chip.setChipBackgroundColorResource(R.color.colorAccent);\n  chip.setCloseIconVisible(true);\n  chip.setTextColor(getResources().getColor(R.color.white));\n  chip.setTextAppearance(R.style.ChipTextAppearance);\n\n  Chip chip2 = new Chip(this);\n  chip.setText(&quot;XYZ&quot;);\n  chip.setChipBackgroundColorResource(R.color.colorAccent);\n  chip.setCloseIconVisible(true);\n  chip.setTextColor(getResources().getColor(R.color.white));\n  chip.setTextAppearance(R.style.ChipTextAppearance);\n\n  ChipGroup chipGroup = findViewById(R.id.chip_group_main);\n\n  chipGroup.addView(chip);\n  chipGroup.addView(chip2);\n}\n</code></pre>\n<p>style.xml</p>\n<pre><code>&lt;resources&gt;\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\n        &lt;!-- Customize your theme here. --&gt;\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;ChipTextAppearance&quot; parent=&quot;TextAppearance.MaterialComponents.Chip&quot;&gt;\n        &lt;item name=&quot;android:textColor&quot;&gt;@android:color/white&lt;/item&gt;\n        &lt;item name=&quot;android:textSize&quot;&gt;12sp&lt;/item&gt;\n    &lt;/style&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>standalone_chip.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;chip\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    app:chipBackgroundColor=&quot;@color/colorAccent&quot;\n    app:closeIconEnabled=&quot;true&quot;\n    style=&quot;@style/ChipTextAppearance&quot;\n    app:closeIconTint=&quot;@android:color/white&quot; /&gt;\n</code></pre>\n"},{"tags":["java","microsoft-graph-api","microsoft-graph-contacts"],"owner":{"account_id":22813706,"reputation":23,"user_id":16964620,"display_name":"Fr&#233;d&#233;ric Van Overmeire"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691575692,"creation_date":1691574774,"question_id":76866561,"body_markdown":"I&#39;m trying to update a new contact with a schema extension by calling the Microsoft Graph API using the MS Graph sdk in Java.\r\nSo far, every call for this specific action returns an `UnableToDeserializePostBody` error.\r\n\r\n\r\nMy code to checks for a shema extension:\r\n\r\n```\r\nSchemaExtensionCollectionPage response = graphClient.schemaExtensions().buildRequest().get();\r\nList&lt;SchemaExtension&gt; extensions = fetchAll(response);\r\ncontactExtension = extensions.stream()\r\n    .filter(e-&gt; (contactExtensionId).equals(e.id)) //contactExtensionId fetched from internal DB\r\n    .findAny().orElse(null);\r\n\r\nif(contactExtension == null)\r\n{\r\n\tcontactExtension = new SchemaExtension();\r\n\tcontactExtension.id = contactExtensionId;\r\n\tcontactExtension.description = &quot;Contact extension&quot;;\r\n\tLinkedList&lt;String&gt; targetTypesList = new LinkedList&lt;&gt;();\r\n\ttargetTypesList.add(&quot;contact&quot;);\r\n\tcontactExtension.targetTypes = targetTypesList;\r\n\t\r\n\tLinkedList&lt;ExtensionSchemaProperty&gt; propertiesList = new LinkedList&lt;&gt;();\r\n\tExtensionSchemaProperty tenantProperty = new ExtensionSchemaProperty();\r\n\ttenantProperty.name = EXTENSION_PROPERTY_TENANT;\r\n\ttenantProperty.type = &quot;String&quot;;\r\n\tpropertiesList.add(tenantProperty);\r\n\tExtensionSchemaProperty idProperty = new ExtensionSchemaProperty();\r\n\tidProperty.name = EXTENSION_PROPERTY_ID;\r\n\tidProperty.type = &quot;String&quot;;\r\n\tpropertiesList.add(idProperty);\r\n\tcontactExtension.properties = propertiesList;\r\n\t\r\n\tcontactExtension = graphClient.schemaExtensions()\r\n\t\t\t.buildRequest()\r\n\t\t\t.post(contactExtension);\r\n\t\t\t\r\n\tlogger.info(&quot;Contact Extension created : &quot; + contactExtension.id);\r\n}\r\n```\r\n\r\nHere&#39;s the extension for the contact:\r\n\r\n```\r\npublic static class ContactExtension extends Extension\r\n{\r\n\t@SerializedName(value = &quot;tenant&quot;, alternate = {&quot;Tenant&quot;})\r\n\t@Expose\r\n\t@Nullable\r\n\tpublic String tenant;\r\n\t\r\n\t@SerializedName(value = &quot;entityId&quot;, alternate = {&quot;EntityId&quot;})\r\n\t@Expose\r\n\t@Nullable\r\n\tpublic String entityId;\r\n}\r\n```\r\n\r\nAnd here is how I try to update the contact following the [official documentation](https://learn.microsoft.com/en-us/graph/extensibility-schema-groups?tabs=java) as much as I can :\r\n\r\n```\r\nExtension ext = graphClient.users(targetUser.id)\r\n\t.contacts(contact.id)\r\n\t.extensions(this.contactExtension.id)\r\n\t.buildRequest()\r\n\t.post(contactExt);\r\n```\r\n\r\nThe stack trace i get:\r\n\r\n```\r\nJul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\r\n\tSEVERE: CoreHttpProvider[sendRequestInternal] - 408Graph service exception\r\n\tJul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\r\n\tSEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\r\n\tError message: were unable to deserialize\r\n\r\n\tPOST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\r\n\tSdkVersion : graph-java/v5.49.0\r\n\t\t[...]\r\n\r\n\t\t400 : Bad Request\r\n[...]\r\n\r\n\t\t[Some information was truncated for brevity, enable debug logging for more details]\r\n\tJul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\r\n\tSEVERE: CoreHttpProvider[sendRequestInternal] - 408Graph service exception\r\n\tJul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\r\n\tSEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\r\n\tError message: were unable to deserialize\r\n\r\n\tPOST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\r\n\tSdkVersion : graph-java/v5.49.0\r\n\t\t[...]\r\n\r\n\t\t400 : Bad Request\r\n[...]\r\n\r\n\t\t[Some information was truncated for brevity, enable debug logging for more details]\r\n\t\t13:53:03,442  ERROR [cerebro.manager.MsGraphHelper] Mails TES error\r\n\tcom.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\r\n\tError message: were unable to deserialize\r\n\r\n\tPOST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\r\n\tSdkVersion : graph-java/v5.49.0\r\n\t\t[...]\r\n\r\n\t\t400 : Bad Request\r\n[...]\r\n\r\n\t\t[Some information was truncated for brevity, enable debug logging for more details]\r\n\tat com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:419)\r\n\tat com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:378)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.handleErrorResponse(CoreHttpProvider.java:512)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.processResponse(CoreHttpProvider.java:442)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.sendRequestInternal(CoreHttpProvider.java:408)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:225)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:202)\r\n\tat com.microsoft.graph.http.BaseRequest.send(BaseRequest.java:335)\r\n```\r\n\r\nIs there anyone who might have a clue about what steps I should take or the source of the issue?\r\nThe official documentation regarding Java in this matter is quite limited.","title":"Miscrosoft Graph API &#39;UnableToDeserializePostBody&#39; error after sending a post request to update a contact","body":"<p>I'm trying to update a new contact with a schema extension by calling the Microsoft Graph API using the MS Graph sdk in Java.\nSo far, every call for this specific action returns an <code>UnableToDeserializePostBody</code> error.</p>\n<p>My code to checks for a shema extension:</p>\n<pre><code>SchemaExtensionCollectionPage response = graphClient.schemaExtensions().buildRequest().get();\nList&lt;SchemaExtension&gt; extensions = fetchAll(response);\ncontactExtension = extensions.stream()\n    .filter(e-&gt; (contactExtensionId).equals(e.id)) //contactExtensionId fetched from internal DB\n    .findAny().orElse(null);\n\nif(contactExtension == null)\n{\n    contactExtension = new SchemaExtension();\n    contactExtension.id = contactExtensionId;\n    contactExtension.description = &quot;Contact extension&quot;;\n    LinkedList&lt;String&gt; targetTypesList = new LinkedList&lt;&gt;();\n    targetTypesList.add(&quot;contact&quot;);\n    contactExtension.targetTypes = targetTypesList;\n    \n    LinkedList&lt;ExtensionSchemaProperty&gt; propertiesList = new LinkedList&lt;&gt;();\n    ExtensionSchemaProperty tenantProperty = new ExtensionSchemaProperty();\n    tenantProperty.name = EXTENSION_PROPERTY_TENANT;\n    tenantProperty.type = &quot;String&quot;;\n    propertiesList.add(tenantProperty);\n    ExtensionSchemaProperty idProperty = new ExtensionSchemaProperty();\n    idProperty.name = EXTENSION_PROPERTY_ID;\n    idProperty.type = &quot;String&quot;;\n    propertiesList.add(idProperty);\n    contactExtension.properties = propertiesList;\n    \n    contactExtension = graphClient.schemaExtensions()\n            .buildRequest()\n            .post(contactExtension);\n            \n    logger.info(&quot;Contact Extension created : &quot; + contactExtension.id);\n}\n</code></pre>\n<p>Here's the extension for the contact:</p>\n<pre><code>public static class ContactExtension extends Extension\n{\n    @SerializedName(value = &quot;tenant&quot;, alternate = {&quot;Tenant&quot;})\n    @Expose\n    @Nullable\n    public String tenant;\n    \n    @SerializedName(value = &quot;entityId&quot;, alternate = {&quot;EntityId&quot;})\n    @Expose\n    @Nullable\n    public String entityId;\n}\n</code></pre>\n<p>And here is how I try to update the contact following the <a href=\"https://learn.microsoft.com/en-us/graph/extensibility-schema-groups?tabs=java\" rel=\"nofollow noreferrer\">official documentation</a> as much as I can :</p>\n<pre><code>Extension ext = graphClient.users(targetUser.id)\n    .contacts(contact.id)\n    .extensions(this.contactExtension.id)\n    .buildRequest()\n    .post(contactExt);\n</code></pre>\n<p>The stack trace i get:</p>\n<pre><code>Jul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\n    SEVERE: CoreHttpProvider[sendRequestInternal] - 408Graph service exception\n    Jul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\n    SEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\n    Error message: were unable to deserialize\n\n    POST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\n    SdkVersion : graph-java/v5.49.0\n        [...]\n\n        400 : Bad Request\n[...]\n\n        [Some information was truncated for brevity, enable debug logging for more details]\n    Jul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\n    SEVERE: CoreHttpProvider[sendRequestInternal] - 408Graph service exception\n    Jul 12, 2023 1:53:03 PM com.microsoft.graph.logger.DefaultLogger logError\n    SEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\n    Error message: were unable to deserialize\n\n    POST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\n    SdkVersion : graph-java/v5.49.0\n        [...]\n\n        400 : Bad Request\n[...]\n\n        [Some information was truncated for brevity, enable debug logging for more details]\n        13:53:03,442  ERROR [cerebro.manager.MsGraphHelper] Mails TES error\n    com.microsoft.graph.http.GraphServiceException: Error code: UnableToDeserializePostBody\n    Error message: were unable to deserialize\n\n    POST https://graph.microsoft.com/v1.0/users/{user}/contacts/{contacts}/extensions/extdtlnlmgg_contactMetaData\n    SdkVersion : graph-java/v5.49.0\n        [...]\n\n        400 : Bad Request\n[...]\n\n        [Some information was truncated for brevity, enable debug logging for more details]\n    at com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:419)\n    at com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:378)\n    at com.microsoft.graph.http.CoreHttpProvider.handleErrorResponse(CoreHttpProvider.java:512)\n    at com.microsoft.graph.http.CoreHttpProvider.processResponse(CoreHttpProvider.java:442)\n    at com.microsoft.graph.http.CoreHttpProvider.sendRequestInternal(CoreHttpProvider.java:408)\n    at com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:225)\n    at com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:202)\n    at com.microsoft.graph.http.BaseRequest.send(BaseRequest.java:335)\n</code></pre>\n<p>Is there anyone who might have a clue about what steps I should take or the source of the issue?\nThe official documentation regarding Java in this matter is quite limited.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1691146647,"post_id":76835273,"comment_id":135455640,"body_markdown":"The last will result in a `List&lt;Object&gt;` being returned by `createList`, not a `List&lt;Integer&gt;`, because `? super String` accepts a `List&lt;String&gt;` or a `List&lt;Object&gt;`, so the compiler will infer `T` of `createList` as `Object`, not `Integer`.","body":"The last will result in a <code>List&lt;Object&gt;</code> being returned by <code>createList</code>, not a <code>List&lt;Integer&gt;</code>, because <code>? super String</code> accepts a <code>List&lt;String&gt;</code> or a <code>List&lt;Object&gt;</code>, so the compiler will infer <code>T</code> of <code>createList</code> as <code>Object</code>, not <code>Integer</code>."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691148407,"post_id":76835273,"comment_id":135455953,"body_markdown":"I think you’ll find that if `consumeList` were changed to actually consume the list, _that_ would fail to compile, preventing any runtime error.","body":"I think you’ll find that if <code>consumeList</code> were changed to actually consume the list, <i>that</i> would fail to compile, preventing any runtime error."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691148589,"post_id":76835273,"comment_id":135455986,"body_markdown":"To consume the list and treat the elements as strings, it would need to take a parameter of type `List&lt;? extends String&gt;`. See https://stackoverflow.com/a/2723538/29470","body":"To consume the list and treat the elements as strings, it would need to take a parameter of type <code>List&lt;? extends String&gt;</code>. See <a href=\"https://stackoverflow.com/a/2723538/29470\">stackoverflow.com/a/2723538/29470</a>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1691151237,"post_id":76835273,"comment_id":135456498,"body_markdown":"@TimMoore what&#39;s stopping you consuming the list elements as `Object`s?","body":"@TimMoore what&#39;s stopping you consuming the list elements as <code>Object</code>s?"},{"owner":{"account_id":29159153,"reputation":21,"user_id":22338268,"display_name":"Bernd Watermann"},"score":0,"creation_date":1691151338,"post_id":76835273,"comment_id":135456517,"body_markdown":"This was a minimalistic example. I stumbled across the issue when irregularly doing something like `assertThat().contentType(is(JSON))` in the context of RestAssured-based tests. Thus changing the implementation is not an option. Sure, I _can_ change the calling code so it works as intended (`assertThat().contentType(JSON)`), but only _after_ having studied subtle runtime errors. If the language really permits inferring `T` in `createList` from anything else than the call argument `T value`, that would be scary, to say the least. And the given example exactly shows why.","body":"This was a minimalistic example. I stumbled across the issue when irregularly doing something like <code>assertThat().contentType(is(JSON))</code> in the context of RestAssured-based tests. Thus changing the implementation is not an option. Sure, I <i>can</i> change the calling code so it works as intended (<code>assertThat().contentType(JSON)</code>), but only <i>after</i> having studied subtle runtime errors. If the language really permits inferring <code>T</code> in <code>createList</code> from anything else than the call argument <code>T value</code>, that would be scary, to say the least. And the given example exactly shows why."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691151525,"post_id":76835273,"comment_id":135456550,"body_markdown":"@AndyTurner nothing, but there’s no reason to declare the parameter that way instead of `List&lt;?&gt;` then. In any case, there’s still no runtime error.","body":"@AndyTurner nothing, but there’s no reason to declare the parameter that way instead of <code>List&lt;?&gt;</code> then. In any case, there’s still no runtime error."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1691153315,"post_id":76835273,"comment_id":135456924,"body_markdown":"@BerndWatermann I&#39;m afraid I&#39;m not very familiar with RestAssured, so I don&#39;t understand what the problem is with the code in your latest comment. I&#39;m guessing that the error wasn&#39;t a `ClastCastException` but something else (maybe equality comparison of two different types?). The Java compiler is still inferring `T` from the argument, it&#39;s just choosing a less specific type than what you intended. The argument is both an `Integer` and an `Object`. The compiler will always try to infer a type that works before failing.","body":"@BerndWatermann I&#39;m afraid I&#39;m not very familiar with RestAssured, so I don&#39;t understand what the problem is with the code in your latest comment. I&#39;m guessing that the error wasn&#39;t a <code>ClastCastException</code> but something else (maybe equality comparison of two different types?). The Java compiler is still inferring <code>T</code> from the argument, it&#39;s just choosing a less specific type than what you intended. The argument is both an <code>Integer</code> and an <code>Object</code>. The compiler will always try to infer a type that works before failing."}],"answers":[{"tags":[],"owner":{"account_id":29159153,"reputation":21,"user_id":22338268,"display_name":"Bernd Watermann"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691575592,"creation_date":1691575592,"answer_id":76866685,"question_id":76835273,"body_markdown":"Answer\r\n------\r\nThe Java compiler infers the actual type for `createList`&#39;s type parameter `T` not only by inspecting the actual call argument for `T value` but also considers the context in which the return value `List&lt;T&gt;` is used (that is, within the same `;`-terminated statement). This permits inferring `Object` instead of `Integer` in the given example&#39;s last line and makes the code compile (Credits go to Tim Moore for his comment.) The effect is not specific to the `createList` example and can be shown by directly using e.g. `Collections.singletonList()` as well.\r\n\r\nConclusions\r\n-----------\r\nThe given minimalistic example as well as similar but more realistic cases reveal a weakness in the type inference rules. Although something different happens _technically_, it _virtually_ appears as if a `SomeGenericClass&lt;Integer&gt;` can sometimes implicitly be converted into a `SomeGenericClass&lt;Object&gt;` which should not and does not happen when the same code is written in a slightly different way. Those differences would retain the exact code semantics in &quot;usual&quot; code and can be established e.g. by common refactorings such as &quot;Introduce variable&quot; or &quot;Inline variable&quot;. OTOH, the same rules for type inference have benefits, too. Common expressions like `java.util.stream.Collectors.toList()` wouldn&#39;t work the way they do at present if inferring type arguments from the surrounding context were not permitted.\r\n\r\nAnd my personal two cents: Maybe I&#39;ve done too much C++ in my life, but to me it still seems that the benefits of Java&#39;s type inference rules come at a rather high price. Some sorts of type safety that Java generics try to provide in order to reveal issues at compile time seem to just vanish when you rewrite code that (virtually) has the same semantics as before.\r\n","title":"Why does a function call compile when an invalid generic-typed parameter is inlined?","body":"<h2>Answer</h2>\n<p>The Java compiler infers the actual type for <code>createList</code>'s type parameter <code>T</code> not only by inspecting the actual call argument for <code>T value</code> but also considers the context in which the return value <code>List&lt;T&gt;</code> is used (that is, within the same <code>;</code>-terminated statement). This permits inferring <code>Object</code> instead of <code>Integer</code> in the given example's last line and makes the code compile (Credits go to Tim Moore for his comment.) The effect is not specific to the <code>createList</code> example and can be shown by directly using e.g. <code>Collections.singletonList()</code> as well.</p>\n<h2>Conclusions</h2>\n<p>The given minimalistic example as well as similar but more realistic cases reveal a weakness in the type inference rules. Although something different happens <em>technically</em>, it <em>virtually</em> appears as if a <code>SomeGenericClass&lt;Integer&gt;</code> can sometimes implicitly be converted into a <code>SomeGenericClass&lt;Object&gt;</code> which should not and does not happen when the same code is written in a slightly different way. Those differences would retain the exact code semantics in &quot;usual&quot; code and can be established e.g. by common refactorings such as &quot;Introduce variable&quot; or &quot;Inline variable&quot;. OTOH, the same rules for type inference have benefits, too. Common expressions like <code>java.util.stream.Collectors.toList()</code> wouldn't work the way they do at present if inferring type arguments from the surrounding context were not permitted.</p>\n<p>And my personal two cents: Maybe I've done too much C++ in my life, but to me it still seems that the benefits of Java's type inference rules come at a rather high price. Some sorts of type safety that Java generics try to provide in order to reveal issues at compile time seem to just vanish when you rewrite code that (virtually) has the same semantics as before.</p>\n"}],"owner":{"account_id":29159153,"reputation":21,"user_id":22338268,"display_name":"Bernd Watermann"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691575592,"creation_date":1691146550,"question_id":76835273,"body_markdown":"When one function creates a generic result such as `List&lt;Integer&gt;`, code with a call to another function which accepts a similar but non-matching generic type such as `List&lt;? super String&gt;` will unexpectedly compile successfully when the result from the first function is passed inline.\r\n\r\nConsider the following code:\r\n\r\n\r\n```\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\nclass ListTest\r\n{\r\n    static void consumeList(List&lt;? super String&gt; lst) {};\r\n\r\n    static &lt;T&gt; List&lt;T&gt; createList(T value) {\r\n        return Collections.singletonList(value);\r\n    }\r\n\r\n    void doIt() {\r\n        List&lt;Integer&gt; ilst = createList(1);\r\n        consumeList(ilst); // Does not compile. As expected. (&quot;incompatible types: List&lt;Integer&gt; cannot be converted to List&lt;? super String&gt;&quot;)\r\n\r\n        var ilst2 = createList(1);\r\n        consumeList(ilst2); // Does not compile. As expected. (&quot;incompatible types: List&lt;Integer&gt; cannot be converted to List&lt;? super String&gt;&quot;)\r\n\r\n        consumeList(createList(1)); // Compiles. Why???\r\n    }\r\n}\r\n```\r\n\r\nThe question is: Why does the last line compile? The compile error that is yielded by the other calls to &quot;consumeList()&quot; appears absolutely precise and successfully prevents me from a runtime disaster. Why does the compiler fail to provide the same level of protection with the last call?\r\n\r\nCompiler was javac 17.0.7.","title":"Why does a function call compile when an invalid generic-typed parameter is inlined?","body":"<p>When one function creates a generic result such as <code>List&lt;Integer&gt;</code>, code with a call to another function which accepts a similar but non-matching generic type such as <code>List&lt;? super String&gt;</code> will unexpectedly compile successfully when the result from the first function is passed inline.</p>\n<p>Consider the following code:</p>\n<pre><code>import java.util.Collections;\nimport java.util.List;\n\nclass ListTest\n{\n    static void consumeList(List&lt;? super String&gt; lst) {};\n\n    static &lt;T&gt; List&lt;T&gt; createList(T value) {\n        return Collections.singletonList(value);\n    }\n\n    void doIt() {\n        List&lt;Integer&gt; ilst = createList(1);\n        consumeList(ilst); // Does not compile. As expected. (&quot;incompatible types: List&lt;Integer&gt; cannot be converted to List&lt;? super String&gt;&quot;)\n\n        var ilst2 = createList(1);\n        consumeList(ilst2); // Does not compile. As expected. (&quot;incompatible types: List&lt;Integer&gt; cannot be converted to List&lt;? super String&gt;&quot;)\n\n        consumeList(createList(1)); // Compiles. Why???\n    }\n}\n</code></pre>\n<p>The question is: Why does the last line compile? The compile error that is yielded by the other calls to &quot;consumeList()&quot; appears absolutely precise and successfully prevents me from a runtime disaster. Why does the compiler fail to provide the same level of protection with the last call?</p>\n<p>Compiler was javac 17.0.7.</p>\n"},{"tags":["java","eclipse","osgi","p2"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1691593262,"post_id":76866680,"comment_id":135513155,"body_markdown":"Have you tried it on the current release? Yours is 3 years old.","body":"Have you tried it on the current release? Yours is 3 years old."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1691593266,"post_id":76866680,"comment_id":135513156,"body_markdown":"As workaround for the problem that there are different plugins/bundles with the same symbolic name and same version, you can specify in your target platform from which p2 repository the plugin/bundle should be downloaded. Please show the content of your target platform definition file.","body":"As workaround for the problem that there are different plugins/bundles with the same symbolic name and same version, you can specify in your target platform from which p2 repository the plugin/bundle should be downloaded. Please show the content of your target platform definition file."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692019272,"post_id":76866680,"comment_id":135565087,"body_markdown":"@howlger unfortunately because of the proprietary license I can not share the complete target platform definition. Can you please tell me which part of which file you want to know the content of? Then I can hopefully give that information here.","body":"@howlger unfortunately because of the proprietary license I can not share the complete target platform definition. Can you please tell me which part of which file you want to know the content of? Then I can hopefully give that information here."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692020694,"post_id":76866680,"comment_id":135565442,"body_markdown":"You have to find out which p2 repositories provide this plugin. Be aware that there also [composite repositories](https://wiki.eclipse.org/Equinox/p2/Composite_Repositories_%28new%29). The [_Repository Explorer_ view](https://wiki.eclipse.org/Oomph_Repository_Explorer) which is included in the [Oomph Targlets](https://wiki.eclipse.org/Oomph_Targlets) might be helpful for that.","body":"You have to find out which p2 repositories provide this plugin. Be aware that there also <a href=\"https://wiki.eclipse.org/Equinox/p2/Composite_Repositories_%28new%29\" rel=\"nofollow noreferrer\">composite repositories</a>. The <a href=\"https://wiki.eclipse.org/Oomph_Repository_Explorer\" rel=\"nofollow noreferrer\"><i>Repository Explorer</i> view</a> which is included in the <a href=\"https://wiki.eclipse.org/Oomph_Targlets\" rel=\"nofollow noreferrer\">Oomph Targlets</a> might be helpful for that."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692086482,"post_id":76866680,"comment_id":135573783,"body_markdown":"@howlger I have found no duplicates using the Repository Explorer. I use only one repository and it is not composite afaik. For e.g. org.quartz I can find only one unit and it looks like the correct version (declaring dependency on org.apache.logging.log4j and not org.apache.log4j. Full unit of org.quartz; https://pastebin.com/mPzzjgb5\nI wonder if it is just a bug in my old eclipse version or maybe it really is just an issue with local caching","body":"@howlger I have found no duplicates using the Repository Explorer. I use only one repository and it is not composite afaik. For e.g. org.quartz I can find only one unit and it looks like the correct version (declaring dependency on org.apache.logging.log4j and not org.apache.log4j. Full unit of org.quartz; <a href=\"https://pastebin.com/mPzzjgb5\" rel=\"nofollow noreferrer\">pastebin.com/mPzzjgb5</a> I wonder if it is just a bug in my old eclipse version or maybe it really is just an issue with local caching"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692088729,"post_id":76866680,"comment_id":135574150,"body_markdown":"To avoid caching in Maven/Tycho build do the following. Also delete `/.m2/repository/.cache/tycho`. And if this does not help, use a fresh local Maven repository via `-Dmaven.repo.local=...`.","body":"To avoid caching in Maven/Tycho build do the following. Also delete <code>&#47;.m2&#47;repository&#47;.cache&#47;tycho</code>. And if this does not help, use a fresh local Maven repository via <code>-Dmaven.repo.local=...</code>."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692094056,"post_id":76866680,"comment_id":135575059,"body_markdown":"weirdly I never had the problem with maven/tycho. Only when developing in eclipse and adding the target platform there. If I add a target platform and the issue happens, I can see that the wrong jar file lands in .metadata\\.plugins\\org.eclipse.pde.core\\.bundle_pool\\plugins:\nI will try deleting the tycho cache next time. Are there any other folders I should pay attention to or are they all basically in ~/.m2 and ~/.p2 &#223;","body":"weirdly I never had the problem with maven/tycho. Only when developing in eclipse and adding the target platform there. If I add a target platform and the issue happens, I can see that the wrong jar file lands in .metadata\\.plugins\\org.eclipse.pde.core\\.bundle_pool\\plugins&zwnj;&#8203;: I will try deleting the tycho cache next time. Are there any other folders I should pay attention to or are they all basically in ~/.m2 and ~/.p2 &#223;"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692099330,"post_id":76866680,"comment_id":135575994,"body_markdown":"As Maven plugin Tycho uses only `~/.m2`, not `~/.p2`. Where you have this problem, when building with Maven/Tycho or in your Eclipse IDE or in both?","body":"As Maven plugin Tycho uses only <code>~&#47;.m2</code>, not <code>~&#47;.p2</code>. Where you have this problem, when building with Maven/Tycho or in your Eclipse IDE or in both?"},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692695200,"post_id":76866680,"comment_id":135655600,"body_markdown":"I only have the problem in eclipse.","body":"I only have the problem in eclipse."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692702148,"post_id":76866680,"comment_id":135657076,"body_markdown":"I see. Does this problem persist when using a fresh workspace? Can the faulty plugin also be found somewhere in your Eclipse installation directory (or, if you used the Eclipse Installer, in your user home directory `.p2\\pool\\plugins`)?","body":"I see. Does this problem persist when using a fresh workspace? Can the faulty plugin also be found somewhere in your Eclipse installation directory (or, if you used the Eclipse Installer, in your user home directory <code>.p2\\pool\\plugins</code>)?"},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692769957,"post_id":76866680,"comment_id":135667758,"body_markdown":"A fresh workspace using the same target platform yields the same issue.  I couldn&#39;t find anything in my eclipse installation directory.\nIt is worth noting that the target platform is not some form of eclipse IDE, but an eclipse rcp/rap target platform. I don&#39;t know if that matters though","body":"A fresh workspace using the same target platform yields the same issue.  I couldn&#39;t find anything in my eclipse installation directory. It is worth noting that the target platform is not some form of eclipse IDE, but an eclipse rcp/rap target platform. I don&#39;t know if that matters though"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692772279,"post_id":76866680,"comment_id":135668115,"body_markdown":"Please check whether the plugin is part of your Eclipse IDE or not: _Help &gt; About Eclipse IDE: Installation Details_, tab _Plug-ins_ and filter for `quartz`.","body":"Please check whether the plugin is part of your Eclipse IDE or not: <i>Help &gt; About Eclipse IDE: Installation Details</i>, tab <i>Plug-ins</i> and filter for <code>quartz</code>."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692772428,"post_id":76866680,"comment_id":135668147,"body_markdown":"It is not part of my Eclipse IDE","body":"It is not part of my Eclipse IDE"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692773397,"post_id":76866680,"comment_id":135668319,"body_markdown":"Okay, but it has to come from somewhere. And from what you say, it doesn&#39;t occur with Maven/Tycho, which also uses the same target platform, right? It also happens with a fresh workspace and is not part of your Eclipse installation. I have no idea where else it could come from.","body":"Okay, but it has to come from somewhere. And from what you say, it doesn&#39;t occur with Maven/Tycho, which also uses the same target platform, right? It also happens with a fresh workspace and is not part of your Eclipse installation. I have no idea where else it could come from."},{"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"score":0,"creation_date":1692890265,"post_id":76866680,"comment_id":135688289,"body_markdown":"I have no clue where the issue comes from sadly. Thank you anyway for your help","body":"I have no clue where the issue comes from sadly. Thank you anyway for your help"}],"owner":{"account_id":7743232,"reputation":181,"user_id":5862111,"accept_rate":100,"display_name":"Skrelp"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691575577,"creation_date":1691575577,"question_id":76866680,"body_markdown":"I am on Windows using eclipse rcp 2020-06 and I have different versions of Target Platforms that I get from a Software Vendor. Sometimes I get an error in eclipse because it seems that the Vendor sometimes has jars with the same name but different contents.\r\n\r\nE.g. they have org.quartz_2.1.7.jar but one is 200 KiB and one is 400 KiB.\r\nThe target platform I loaded has the 400 KiB one but for some reason the 200 KiB is the one that lands in my .bundle_pool when I add the target platform to eclipse.\r\nThis leads to an error when starting because one of the plugins has RequireBundle: org.apache.log4j and the other has org.apache.logging.log4j\r\n\r\nThis is just an example though. I know that if the Vendor would rename the files if they changed it would probably work but they don&#39;t seem to do this.\r\n\r\n\r\nCould the behavior maybe have something to do with me usually using the Copy Settings (Preferences + Workbench Layout) from File &gt; Switch Workspace &gt; Other... when I create a new Workspace?\r\n\r\nIs there any way I can force eclipse to take the plugin that is actually in the target platform I select? I tried deleting ~/.m2/repository/p2 and ~/.p2 but the problem persists. \r\n","title":"Eclipse Target Platform loading different Jar","body":"<p>I am on Windows using eclipse rcp 2020-06 and I have different versions of Target Platforms that I get from a Software Vendor. Sometimes I get an error in eclipse because it seems that the Vendor sometimes has jars with the same name but different contents.</p>\n<p>E.g. they have org.quartz_2.1.7.jar but one is 200 KiB and one is 400 KiB.\nThe target platform I loaded has the 400 KiB one but for some reason the 200 KiB is the one that lands in my .bundle_pool when I add the target platform to eclipse.\nThis leads to an error when starting because one of the plugins has RequireBundle: org.apache.log4j and the other has org.apache.logging.log4j</p>\n<p>This is just an example though. I know that if the Vendor would rename the files if they changed it would probably work but they don't seem to do this.</p>\n<p>Could the behavior maybe have something to do with me usually using the Copy Settings (Preferences + Workbench Layout) from File &gt; Switch Workspace &gt; Other... when I create a new Workspace?</p>\n<p>Is there any way I can force eclipse to take the plugin that is actually in the target platform I select? I tried deleting ~/.m2/repository/p2 and ~/.p2 but the problem persists.</p>\n"},{"tags":["java","kotlin","primitive-types"],"comments":[{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1524058022,"post_id":49900920,"comment_id":86817287,"body_markdown":"What&#39;s the point of validating that a non-nullable property is not null? OTOH if your `Comment` is going to be instantiated with data where `postId` _may_ be null, then you have no choice but using a nullable type to represent this.","body":"What&#39;s the point of validating that a non-nullable property is not null? OTOH if your <code>Comment</code> is going to be instantiated with data where <code>postId</code> <i>may</i> be null, then you have no choice but using a nullable type to represent this."},{"owner":{"account_id":3942923,"reputation":8945,"user_id":3256597,"accept_rate":16,"display_name":"Teimuraz"},"score":0,"creation_date":1524058165,"post_id":49900920,"comment_id":86817390,"body_markdown":"When you send json request without postId, the class is constructed successfully and 0 is used as a value of postId automatically. But the construction of this class should fail, because postId is not provided actually.","body":"When you send json request without postId, the class is constructed successfully and 0 is used as a value of postId automatically. But the construction of this class should fail, because postId is not provided actually."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1524058261,"post_id":49900920,"comment_id":86817461,"body_markdown":"Yes, so in reality `postId` is a property that _may_ be null. You have to represent this in the static type. Maybe you can have a raw data class that represents the JSON input and another one that represents it after it has passed validation.","body":"Yes, so in reality <code>postId</code> is a property that <i>may</i> be null. You have to represent this in the static type. Maybe you can have a raw data class that represents the JSON input and another one that represents it after it has passed validation."},{"owner":{"account_id":1187233,"reputation":2871,"user_id":1160959,"display_name":"asm0dey"},"score":1,"creation_date":1524061488,"post_id":49900920,"comment_id":86819842,"body_markdown":"what about using `java.lang.Long`?","body":"what about using <code>java.lang.Long</code>?"},{"owner":{"account_id":2030,"reputation":50607,"user_id":2788,"accept_rate":69,"display_name":"Strelok"},"score":0,"creation_date":1524063656,"post_id":49900920,"comment_id":86821542,"body_markdown":"@Teimuraz I’d say this maybe a bug with the Kotlin Jackson module. The module should be able to fail constructing this object (but your validation will never even be triggered mind you, because you’re using a non nullable type).","body":"@Teimuraz I’d say this maybe a bug with the Kotlin Jackson module. The module should be able to fail constructing this object (but your validation will never even be triggered mind you, because you’re using a non nullable type)."},{"owner":{"account_id":3942923,"reputation":8945,"user_id":3256597,"accept_rate":16,"display_name":"Teimuraz"},"score":0,"creation_date":1524067324,"post_id":49900920,"comment_id":86824143,"body_markdown":"@asm0dey I thought about it, but feels hacky, don&#39;t want to mix it in my kotlin code","body":"@asm0dey I thought about it, but feels hacky, don&#39;t want to mix it in my kotlin code"},{"owner":{"account_id":1187233,"reputation":2871,"user_id":1160959,"display_name":"asm0dey"},"score":0,"creation_date":1524068053,"post_id":49900920,"comment_id":86824617,"body_markdown":"@Teimuraz well you can&#39;t pretend that nullable type is not nullable and vise versa. But inability to create primitive long looks as unexpected behaviour for me. Meanwhile sometimes you need java.lang things, ie for syncronization","body":"@Teimuraz well you can&#39;t pretend that nullable type is not nullable and vise versa. But inability to create primitive long looks as unexpected behaviour for me. Meanwhile sometimes you need java.lang things, ie for syncronization"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1524141931,"post_id":49900920,"comment_id":86858441,"body_markdown":"Synchronizing on a `java.lang.Long` would be very bad practice, though, even if in a `final` field. It&#39;s a dark corner of early Java design that you can synchronize on any object.","body":"Synchronizing on a <code>java.lang.Long</code> would be very bad practice, though, even if in a <code>final</code> field. It&#39;s a dark corner of early Java design that you can synchronize on any object."}],"answers":[{"tags":[],"owner":{"account_id":18692173,"reputation":1,"user_id":13626270,"display_name":"Gabriel Oliveira"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672929314,"creation_date":1672929314,"answer_id":75020064,"question_id":49900920,"body_markdown":"There is a way to avoid that. You need to configure the parser, in this case Jackson, to not have default values to primitives types. As in this post here https://stackoverflow.com/questions/73123790/jackson-deserialization-of-missing-json-number-value-to-0-0-in-spring\r\n\r\n    @Configuration\r\n    class JacksonConfig {\r\n        @Bean\r\n        fun objectMapper(): ObjectMapper {\r\n            return jacksonObjectMapper()\r\n                .configure(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES, true)\r\n        }\r\n    }  \r\n\r\nor\r\n\r\n     spring:\r\n      jackson:\r\n        deserialization:\r\n          FAIL_ON_NULL_FOR_PRIMITIVES: true\r\n\r\n","title":"Kotlin: Can I force Not Nullable Long to be represented as non primitive type in JVM?","body":"<p>There is a way to avoid that. You need to configure the parser, in this case Jackson, to not have default values to primitives types. As in this post here <a href=\"https://stackoverflow.com/questions/73123790/jackson-deserialization-of-missing-json-number-value-to-0-0-in-spring\">Jackson deserialization of missing JSON number value to 0.0 in Spring</a></p>\n<pre><code>@Configuration\nclass JacksonConfig {\n    @Bean\n    fun objectMapper(): ObjectMapper {\n        return jacksonObjectMapper()\n            .configure(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES, true)\n    }\n}  \n</code></pre>\n<p>or</p>\n<pre><code> spring:\n  jackson:\n    deserialization:\n      FAIL_ON_NULL_FOR_PRIMITIVES: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26117858,"reputation":33,"user_id":19810670,"display_name":"Antony"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691575324,"creation_date":1691575324,"answer_id":76866639,"question_id":49900920,"body_markdown":"Have the same issue, and IDEA offer that solution, to create Long as type object\r\nUse declaration like:\r\n\r\n`var postId by Delegates.notNull&lt;Long&gt;()`","title":"Kotlin: Can I force Not Nullable Long to be represented as non primitive type in JVM?","body":"<p>Have the same issue, and IDEA offer that solution, to create Long as type object\nUse declaration like:</p>\n<p><code>var postId by Delegates.notNull&lt;Long&gt;()</code></p>\n"}],"owner":{"account_id":3942923,"reputation":8945,"user_id":3256597,"accept_rate":16,"display_name":"Teimuraz"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1179,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691575324,"creation_date":1524057890,"question_id":49900920,"body_markdown":"From kotlin docs:\r\n\r\n\r\n&gt; Long ... Represents a 64-bit signed integer. On the JVM, non-nullable values of\r\n&gt; this type are represented as values of the primitive type long.\r\n\r\nBut it causes issue in my spring boot application when send json request without `postId` in the body and when I need to apply jsr 303 validation to my kotlin class, like this:\r\n\r\n    data class Comment(\r\n       @field:NotNull\r\n       val postId: Long,\r\n       ...\r\n    )\r\n\r\nSo issue is that Comment class is constructed with postId = 0 automatically and validation is not failing.\r\n\r\nIs there a way to force kotlin&#39;s Long type to be represented as non primitive type in JVM? (may be with help of annotations or compiler arguments, etc)?\r\n\r\nP.S.: I can force it by making postId of type Long?, but I don&#39;t like it (First of all, it should not be nullable, second, then I need to use `comment.postId!!`, which is ugly and it brakes advantage of kotlin&#39;s null safety).","title":"Kotlin: Can I force Not Nullable Long to be represented as non primitive type in JVM?","body":"<p>From kotlin docs:</p>\n\n<blockquote>\n  <p>Long ... Represents a 64-bit signed integer. On the JVM, non-nullable values of\n  this type are represented as values of the primitive type long.</p>\n</blockquote>\n\n<p>But it causes issue in my spring boot application when send json request without <code>postId</code> in the body and when I need to apply jsr 303 validation to my kotlin class, like this:</p>\n\n<pre><code>data class Comment(\n   @field:NotNull\n   val postId: Long,\n   ...\n)\n</code></pre>\n\n<p>So issue is that Comment class is constructed with postId = 0 automatically and validation is not failing.</p>\n\n<p>Is there a way to force kotlin's Long type to be represented as non primitive type in JVM? (may be with help of annotations or compiler arguments, etc)?</p>\n\n<p>P.S.: I can force it by making postId of type Long?, but I don't like it (First of all, it should not be nullable, second, then I need to use <code>comment.postId!!</code>, which is ugly and it brakes advantage of kotlin's null safety).</p>\n"},{"tags":["java","spring","cookies","resttemplate"],"answers":[{"comments":[{"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"score":0,"creation_date":1691000610,"post_id":76819010,"comment_id":135432739,"body_markdown":"whats the code in Java?","body":"whats the code in Java?"},{"owner":{"account_id":24546611,"reputation":174,"user_id":18456370,"display_name":"Yanni2"},"score":0,"creation_date":1691036124,"post_id":76819010,"comment_id":135436992,"body_markdown":"for what? to set the cookie on a response or the code for your code example?","body":"for what? to set the cookie on a response or the code for your code example?"}],"tags":[],"owner":{"account_id":24546611,"reputation":174,"user_id":18456370,"display_name":"Yanni2"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690972569,"creation_date":1690972569,"answer_id":76819010,"question_id":76775831,"body_markdown":"I think you&#39;re talking about [this](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#restrict_access_to_cookies). These values are thought to protect the cookie when it gets stored in the browser. For example, does the `httpOnly` property define that the cookie cannot be accessed by JavaScript in the frontend?.\r\n\r\nYou can set these values easily in an HTTP response with the `Set-Cookie` header.\r\n\r\n**For Example:**\r\n\r\n```\r\nSet-Cookie: id=a3fWa; Expires=Thu, 21 Oct 2021 07:28:00 GMT; Secure; HttpOnly\r\n```\r\n\r\nBut you are sending a request. In that case can&#39;t you set one of these headers. It also won&#39;t make any sense. Why?\r\n&lt;br/&gt;\r\nAll these properties are thought to protect the cookie **while it&#39;s stored in the browser**. For example, does the `httpOnly` property protect the cookie from `XSS` attacks. The `secure` property should protect the cookie from getting sent through unsecure channels. Your browser will automatically send all available cookies during any request → it will also send them in an HTTP request (It won&#39;t send it over the http channel if you have set the `secure` property). \r\n\r\n","title":"Java Set Security cookie using RestTemplate with Domain and as Secure","body":"<p>I think you're talking about <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#restrict_access_to_cookies\" rel=\"nofollow noreferrer\">this</a>. These values are thought to protect the cookie when it gets stored in the browser. For example, does the <code>httpOnly</code> property define that the cookie cannot be accessed by JavaScript in the frontend?.</p>\n<p>You can set these values easily in an HTTP response with the <code>Set-Cookie</code> header.</p>\n<p><strong>For Example:</strong></p>\n<pre><code>Set-Cookie: id=a3fWa; Expires=Thu, 21 Oct 2021 07:28:00 GMT; Secure; HttpOnly\n</code></pre>\n<p>But you are sending a request. In that case can't you set one of these headers. It also won't make any sense. Why?\n<br/>\nAll these properties are thought to protect the cookie <strong>while it's stored in the browser</strong>. For example, does the <code>httpOnly</code> property protect the cookie from <code>XSS</code> attacks. The <code>secure</code> property should protect the cookie from getting sent through unsecure channels. Your browser will automatically send all available cookies during any request → it will also send them in an HTTP request (It won't send it over the http channel if you have set the <code>secure</code> property).</p>\n"},{"tags":[],"owner":{"account_id":29141905,"reputation":1,"user_id":22324681,"display_name":"ziming zeng"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691028471,"creation_date":1691028471,"answer_id":76824519,"question_id":76775831,"body_markdown":"You can set whether the cookie should be httponly on response, as in the following code\r\n\r\n    Cookie cookie = new Cookie(&quot;SESSION&quot;, &quot;&quot;);\r\n    cookie.setHttpOnly(true);\r\n    response.addCookie(cookie);","title":"Java Set Security cookie using RestTemplate with Domain and as Secure","body":"<p>You can set whether the cookie should be httponly on response, as in the following code</p>\n<pre><code>Cookie cookie = new Cookie(&quot;SESSION&quot;, &quot;&quot;);\ncookie.setHttpOnly(true);\nresponse.addCookie(cookie);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27872675,"reputation":40,"user_id":21282816,"display_name":"bblumenwiese"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691575253,"creation_date":1691575253,"answer_id":76866626,"question_id":76775831,"body_markdown":"## Assumptions\r\n\r\nI assume that you are looking for a way to use cookie-based authentication to authenticate against a REST server, basically instead of accessing a web page.\r\n\r\nI furthermore assume that you want to avoid exposing your cookie to sites that the cookies should not be sent to.\r\n\r\nIt would be pretty unusual to use cookies for server-to-server communication, but not impossible (I&#39;ve hacked together a similar thing before). What you want to do sounds like exactly that, though: Setting/getting cookies from one server that then get stored and used on another server (the RESTful JSON server you want to call). I am not quite clear on whether you own the server that sets the cookie or not, and where those cookies would get used but I will try to give a good answer based on what you told us so far.\r\n\r\n## Cookie-based auth flow\r\n\r\nSince you are talking about cookie attributes like `Secure`, `HttpOnly`, `SameSite`, etc., you seem to want to use the `Set-Cookie` header somewhere. This header is usually sent from the server to the client (usually browser but in your case the Spring application) when the client makes an initial HTTPS request to the server (simplifying a bit here).\r\n\r\nThe `Cookie` header carries only the key-value pairs (e.g. `Cookie: JSESSIONID=...; YOURCOOKIE=...`) and is used by the client to send the stored values of the cookies back to the server for their subsequent requests. Which of the cookies is determined by the browser based on what has been set in the `SET-COOKIE` header they received from the server. \r\n\r\nExample flow:\r\n1. The Client sends an HTTPS request to the server, e.g. `GET https://subdomain.yourdomain.com/do/`\r\n2. The Server sends a reponse with the HTML of the page in the body (or in your case a JSON) and a bunch of headers, in our example `Set-Cookie: JSESSIONID=&lt;cookie-value&gt;; Domain=yourdomain.com; SameSite: Lax; Secure; HttpOnly` (or alternatively headers like Content-Security-Policy for more fine-grained control than SameSite).\r\n3. The Client (typically browser but might as well be your Spring application) receives all the information in the `Set-Cookie` header and stores them (temporarily / in the request context), along with all the cookie attributes.\r\n4. Upon making another request to the server, the client only sends the cookies as key-value pairs in the `Cookies` header. Browsers have rules that determine whether or not a cookie gets sent with a request (see https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent). If you want to send only the correct cookies in your Spring application, these additional attributes likely would have no effect, and you would need to simulate all the browser rules yourself, or just write custom logic for which cookies you want to actually send.\r\n\r\n## How you could try to make it work\r\n\r\nCookies usually get generated in a browser. A browser (client) makes a request to an HTTP(S) server and gets a response with the Set-Cookie attributes returned in the headers of the response. You could do the same with your application and just filter out the cookies you need.\r\n\r\nThe browser usually stores these cookies and you can see them in your DevTools in your browser for that page. (See for example this page for how to do this in Chrome: https://developer.chrome.com/docs/devtools/application/cookies/). Your Spring application would need to store these cookies somewhere in the Spring context. For more details if you want to reuse cookies from a request to your server, maybe this could help: https://stackoverflow.com/questions/22853321/resttemplate-client-with-cookies)\r\n\r\nTo specify a cookie that specifies for which domains, paths, etc. it is valid, you can use a combination of the following as part of the `Set-Cookie` fields in the HttpHeader, like `Domain`, `Path`, `SameSite` (for details for each attribute see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie). You can read up on how the browser validation rules work here: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent\r\n\r\n\r\n## RestTemplate example code\r\nIn order to use these cookies in your restTemplate request, you can use the following code (based on your code example):\r\n\r\n```java\r\nHttpHeaders requestHeaders = new HttpHeaders();\r\n\r\nResponseCookie cookie = new ResponseCookie(&quot;JSESSIONID&quot;, session.getValue() + &quot;; HttpOnly; Secure; SameSite=Strict/Lax; Domain: yourdomain.com&quot;);\r\nrequestHeaders.add(cookie);\r\n\r\nHttpEntity requestEntity = new HttpEntity(null, requestHeaders);\r\nResponseEntity rssResponse = restTemplate.exchange(\r\n    &quot;https://jira.example.com/sr/jira.issueviews:searchrequest-xml/18107/SearchRequest-18107.xml?tempMax=1000&quot;,\r\n    HttpMethod.GET,\r\n    requestEntity,\r\n    Rss.class);\r\nRss rss = rssResponse.getBody();\r\n```\r\n\r\nDepending on which Spring version you are using, this code may or may not work for you. I might update my response given more details\r\n\r\nFurther reading:\r\n* https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpEntity.html\r\n\r\n* How to build `Set-Cookie` header: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseCookie.ResponseCookieBuilder.html \r\n\r\n* How to build `Cookie` header: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpCookie.html\r\n\r\n## Closing remarks\r\n\r\nThis is my first answer on StackOverflow and I know it&#39;s gotten a bit long. Let me know what was helpful and maybe with a bit more context, I can maybe tweak/streamline it a bit more to your needs. I recently learned a lot about cookies when I had to do a similar thing as you, so I hope it helps.","title":"Java Set Security cookie using RestTemplate with Domain and as Secure","body":"<h2>Assumptions</h2>\n<p>I assume that you are looking for a way to use cookie-based authentication to authenticate against a REST server, basically instead of accessing a web page.</p>\n<p>I furthermore assume that you want to avoid exposing your cookie to sites that the cookies should not be sent to.</p>\n<p>It would be pretty unusual to use cookies for server-to-server communication, but not impossible (I've hacked together a similar thing before). What you want to do sounds like exactly that, though: Setting/getting cookies from one server that then get stored and used on another server (the RESTful JSON server you want to call). I am not quite clear on whether you own the server that sets the cookie or not, and where those cookies would get used but I will try to give a good answer based on what you told us so far.</p>\n<h2>Cookie-based auth flow</h2>\n<p>Since you are talking about cookie attributes like <code>Secure</code>, <code>HttpOnly</code>, <code>SameSite</code>, etc., you seem to want to use the <code>Set-Cookie</code> header somewhere. This header is usually sent from the server to the client (usually browser but in your case the Spring application) when the client makes an initial HTTPS request to the server (simplifying a bit here).</p>\n<p>The <code>Cookie</code> header carries only the key-value pairs (e.g. <code>Cookie: JSESSIONID=...; YOURCOOKIE=...</code>) and is used by the client to send the stored values of the cookies back to the server for their subsequent requests. Which of the cookies is determined by the browser based on what has been set in the <code>SET-COOKIE</code> header they received from the server.</p>\n<p>Example flow:</p>\n<ol>\n<li>The Client sends an HTTPS request to the server, e.g. <code>GET https://subdomain.yourdomain.com/do/</code></li>\n<li>The Server sends a reponse with the HTML of the page in the body (or in your case a JSON) and a bunch of headers, in our example <code>Set-Cookie: JSESSIONID=&lt;cookie-value&gt;; Domain=yourdomain.com; SameSite: Lax; Secure; HttpOnly</code> (or alternatively headers like Content-Security-Policy for more fine-grained control than SameSite).</li>\n<li>The Client (typically browser but might as well be your Spring application) receives all the information in the <code>Set-Cookie</code> header and stores them (temporarily / in the request context), along with all the cookie attributes.</li>\n<li>Upon making another request to the server, the client only sends the cookies as key-value pairs in the <code>Cookies</code> header. Browsers have rules that determine whether or not a cookie gets sent with a request (see <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent</a>). If you want to send only the correct cookies in your Spring application, these additional attributes likely would have no effect, and you would need to simulate all the browser rules yourself, or just write custom logic for which cookies you want to actually send.</li>\n</ol>\n<h2>How you could try to make it work</h2>\n<p>Cookies usually get generated in a browser. A browser (client) makes a request to an HTTP(S) server and gets a response with the Set-Cookie attributes returned in the headers of the response. You could do the same with your application and just filter out the cookies you need.</p>\n<p>The browser usually stores these cookies and you can see them in your DevTools in your browser for that page. (See for example this page for how to do this in Chrome: <a href=\"https://developer.chrome.com/docs/devtools/application/cookies/\" rel=\"nofollow noreferrer\">https://developer.chrome.com/docs/devtools/application/cookies/</a>). Your Spring application would need to store these cookies somewhere in the Spring context. For more details if you want to reuse cookies from a request to your server, maybe this could help: <a href=\"https://stackoverflow.com/questions/22853321/resttemplate-client-with-cookies\">RestTemplate client with cookies</a>)</p>\n<p>To specify a cookie that specifies for which domains, paths, etc. it is valid, you can use a combination of the following as part of the <code>Set-Cookie</code> fields in the HttpHeader, like <code>Domain</code>, <code>Path</code>, <code>SameSite</code> (for details for each attribute see <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie</a>). You can read up on how the browser validation rules work here: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent</a></p>\n<h2>RestTemplate example code</h2>\n<p>In order to use these cookies in your restTemplate request, you can use the following code (based on your code example):</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpHeaders requestHeaders = new HttpHeaders();\n\nResponseCookie cookie = new ResponseCookie(&quot;JSESSIONID&quot;, session.getValue() + &quot;; HttpOnly; Secure; SameSite=Strict/Lax; Domain: yourdomain.com&quot;);\nrequestHeaders.add(cookie);\n\nHttpEntity requestEntity = new HttpEntity(null, requestHeaders);\nResponseEntity rssResponse = restTemplate.exchange(\n    &quot;https://jira.example.com/sr/jira.issueviews:searchrequest-xml/18107/SearchRequest-18107.xml?tempMax=1000&quot;,\n    HttpMethod.GET,\n    requestEntity,\n    Rss.class);\nRss rss = rssResponse.getBody();\n</code></pre>\n<p>Depending on which Spring version you are using, this code may or may not work for you. I might update my response given more details</p>\n<p>Further reading:</p>\n<ul>\n<li><p><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpEntity.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpEntity.html</a></p>\n</li>\n<li><p>How to build <code>Set-Cookie</code> header: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseCookie.ResponseCookieBuilder.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseCookie.ResponseCookieBuilder.html</a></p>\n</li>\n<li><p>How to build <code>Cookie</code> header: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpCookie.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpCookie.html</a></p>\n</li>\n</ul>\n<h2>Closing remarks</h2>\n<p>This is my first answer on StackOverflow and I know it's gotten a bit long. Let me know what was helpful and maybe with a bit more context, I can maybe tweak/streamline it a bit more to your needs. I recently learned a lot about cookies when I had to do a similar thing as you, so I hope it helps.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76866626,"answer_count":3,"score":0,"last_activity_date":1691575253,"creation_date":1690417707,"question_id":76775831,"body_markdown":"In addition to question below, how can I set the Cookie Domain and mark as &quot;Secure&quot;?  Trying to set additional properties on Cookie.\r\n\r\nhttps://stackoverflow.com/questions/5796078/setting-security-cookie-using-resttemplate\r\n\r\n\r\n&gt; I am trying to call a Restful JSON service using RestTemplate and\r\n&gt; Jackson json convertor. Now in order to call the service I need to\r\n&gt; pass in a Security cookie. I can achieve this by using URLConnection\r\n&gt; (See the code below)\r\n&gt; \r\n&gt; URL url= new URL(&quot;https://XXXXXXXX&quot;);\r\n&gt; \r\n&gt; URLConnection yc = url.openConnection();\r\n&gt; yc.setRequestProperty(&quot;SecurityCookie&quot;, ssocookie.getValue());&lt;/code&gt;\r\n&gt; Whats the parallel for this in RestTemplate? Here is a code snippet\r\n&gt; which I have been using to call a Restful Service using RestTemplate:\r\n&gt; \r\n&gt; RestTemplate rest = new RestTemplate();   InputBean input = new\r\n&gt; InputBean();   input.setResource(&quot;SampleResource&quot;);  \r\n&gt; HttpEntity&lt;InputBean &gt; entity = new HttpEntity&lt;InputBean&gt;(input);  \r\n&gt; ResponseEntity&lt;OutputBean&gt; response1 = rest.postForEntity(\r\n&gt;     &quot;https://XXXXXXXXX&quot;, \r\n&gt;     entity, OutputBean.class);&lt;/code&gt; I can not figure out how to pass the security cookie while using RestTemplate to call the service. Any\r\n&gt; help on this would be great.\r\n\r\n\r\n**Answer Example:**\r\n\r\nhttps://stackoverflow.com/a/10080397/15435022\r\n\r\n    HttpHeaders requestHeaders = new HttpHeaders();\r\n    requestHeaders.add(&quot;Cookie&quot;, &quot;JSESSIONID=&quot; + session.getValue());\r\n    HttpEntity requestEntity = new HttpEntity(null, requestHeaders);\r\n    ResponseEntity rssResponse = restTemplate.exchange(\r\n        &quot;https://jira.example.com/sr/jira.issueviews:searchrequest-xml/18107/SearchRequest-18107.xml?tempMax=1000&quot;,\r\n        HttpMethod.GET,\r\n        requestEntity,\r\n        Rss.class);\r\n    Rss rss = rssResponse.getBody();","title":"Java Set Security cookie using RestTemplate with Domain and as Secure","body":"<p>In addition to question below, how can I set the Cookie Domain and mark as &quot;Secure&quot;?  Trying to set additional properties on Cookie.</p>\n<p><a href=\"https://stackoverflow.com/questions/5796078/setting-security-cookie-using-resttemplate\">Setting Security cookie using RestTemplate</a></p>\n<blockquote>\n<p>I am trying to call a Restful JSON service using RestTemplate and\nJackson json convertor. Now in order to call the service I need to\npass in a Security cookie. I can achieve this by using URLConnection\n(See the code below)</p>\n<p>URL url= new URL(&quot;https://XXXXXXXX&quot;);</p>\n<p>URLConnection yc = url.openConnection();\nyc.setRequestProperty(&quot;SecurityCookie&quot;, ssocookie.getValue());\nWhats the parallel for this in RestTemplate? Here is a code snippet\nwhich I have been using to call a Restful Service using RestTemplate:</p>\n<p>RestTemplate rest = new RestTemplate();   InputBean input = new\nInputBean();   input.setResource(&quot;SampleResource&quot;);<br />\nHttpEntity entity = new HttpEntity(input);<br />\nResponseEntity response1 = rest.postForEntity(\n&quot;https://XXXXXXXXX&quot;,\nentity, OutputBean.class); I can not figure out how to pass the security cookie while using RestTemplate to call the service. Any\nhelp on this would be great.</p>\n</blockquote>\n<p><strong>Answer Example:</strong></p>\n<p><a href=\"https://stackoverflow.com/a/10080397/15435022\">https://stackoverflow.com/a/10080397/15435022</a></p>\n<pre><code>HttpHeaders requestHeaders = new HttpHeaders();\nrequestHeaders.add(&quot;Cookie&quot;, &quot;JSESSIONID=&quot; + session.getValue());\nHttpEntity requestEntity = new HttpEntity(null, requestHeaders);\nResponseEntity rssResponse = restTemplate.exchange(\n    &quot;https://jira.example.com/sr/jira.issueviews:searchrequest-xml/18107/SearchRequest-18107.xml?tempMax=1000&quot;,\n    HttpMethod.GET,\n    requestEntity,\n    Rss.class);\nRss rss = rssResponse.getBody();\n</code></pre>\n"},{"tags":["java","tclientsocket"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691581220,"post_id":76866188,"comment_id":135510324,"body_markdown":"When you want to unblock a thread that is blocked in a socket read, shutdown that socket for input. The read will then get an end of stream and proceed to close the socket and exit as normally.","body":"When you want to unblock a thread that is blocked in a socket read, shutdown that socket for input. The read will then get an end of stream and proceed to close the socket and exit as normally."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691581182,"post_id":76866620,"comment_id":135510314,"body_markdown":"What lock? Can&#39;t find it in the source code.","body":"What lock? Can&#39;t find it in the source code."},{"owner":{"account_id":29190653,"reputation":1,"user_id":22362847,"display_name":"jacobk1337"},"score":1,"creation_date":1691581521,"post_id":76866620,"comment_id":135510389,"body_markdown":"Inside `BufferedReader` class, both methods `readLine()` and `close()` are synchronized on a lock.","body":"Inside <code>BufferedReader</code> class, both methods <code>readLine()</code> and <code>close()</code> are synchronized on a lock."},{"owner":{"account_id":29190653,"reputation":1,"user_id":22362847,"display_name":"jacobk1337"},"score":0,"creation_date":1691582786,"post_id":76866620,"comment_id":135510677,"body_markdown":"@user207421 so as you described in the comment above, first closing `clientSocket` and then `serverReader` will also do the work.","body":"@user207421 so as you described in the comment above, first closing <code>clientSocket</code> and then <code>serverReader</code> will also do the work."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691629881,"post_id":76866620,"comment_id":135518700,"body_markdown":"That&#39;s not what I said at all. Read it again.","body":"That&#39;s not what I said at all. Read it again."}],"tags":[],"owner":{"account_id":29190653,"reputation":1,"user_id":22362847,"display_name":"jacobk1337"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691575213,"creation_date":1691575213,"answer_id":76866620,"question_id":76866188,"body_markdown":"The problem is that you are closing `serverReader` here:\r\n\r\n    if (message.equals(&quot;exit&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;REACHED EXIT&quot;);\r\n\t\t\t\t\tserverReader.close();\r\n\t\t\t\t\tclientSocket.close();\r\n\t\t\t\t\tin.close();\r\n\t\t\t\t\tout.close();\r\n\t\t\t\t\tSystem.out.println(&quot;EXITED&quot;);\r\n\r\n\t\t\t\t\tSystem.exit(0);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\nThe application doesn&#39;t exit, because there is a lock set on `serverReader` object in `receiveThread` by the method `readLine()`. When you call `serverReader.close()` it waits until lock gets released, and it gets released when the message is received in that case. If you remove that line it will work: \r\n\r\n    if (message.equals(&quot;exit&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;REACHED EXIT&quot;);\r\n\t\t\t\t\tclientSocket.close();\r\n\t\t\t\t\tin.close();\r\n\t\t\t\t\tout.close();\r\n\t\t\t\t\tSystem.out.println(&quot;EXITED&quot;);\r\n\r\n\t\t\t\t\tSystem.exit(0);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}","title":"Java - ClientSocket not closing program","body":"<p>The problem is that you are closing <code>serverReader</code> here:</p>\n<pre><code>if (message.equals(&quot;exit&quot;)) {\n                System.out.println(&quot;REACHED EXIT&quot;);\n                serverReader.close();\n                clientSocket.close();\n                in.close();\n                out.close();\n                System.out.println(&quot;EXITED&quot;);\n\n                System.exit(0);\n                break;\n\n            }\n</code></pre>\n<p>The application doesn't exit, because there is a lock set on <code>serverReader</code> object in <code>receiveThread</code> by the method <code>readLine()</code>. When you call <code>serverReader.close()</code> it waits until lock gets released, and it gets released when the message is received in that case. If you remove that line it will work:</p>\n<pre><code>if (message.equals(&quot;exit&quot;)) {\n                System.out.println(&quot;REACHED EXIT&quot;);\n                clientSocket.close();\n                in.close();\n                out.close();\n                System.out.println(&quot;EXITED&quot;);\n\n                System.exit(0);\n                break;\n\n            }\n</code></pre>\n"}],"owner":{"account_id":23451050,"reputation":305,"user_id":17507202,"display_name":"mitas1c"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691575213,"creation_date":1691571994,"question_id":76866188,"body_markdown":"I am creating simple chat app in Java using ClientSocket and ServerSocket.\r\nHowever I have come to a problem.\r\n\r\nThe Client has two threads, one for reading received messages and the other for sending messages. When the client writes &#39;exit&#39; the application should close together with the connection. However the application doesn&#39;t close but only after the client has received some messages from other clients which should not happen.\r\n\r\nCan anybody help me fix this ?\r\n\r\n\r\nClient.java\r\n\r\n        import java.io.*;\r\n    import java.net.Socket;\r\n    import java.net.ConnectException;\r\n    import java.util.Scanner;\r\n    \r\n    public class Client {\r\n    \r\n        private Socket clientSocket;\r\n        private BufferedReader serverReader;\r\n        private boolean stopReceiving;\r\n        private boolean stopSending;\r\n    \r\n        public static void main(String[] args) {\r\n            Client client = new Client();\r\n        }\r\n    \r\n        public Client() {\r\n            try {\r\n                this.clientSocket = new Socket(&quot;localhost&quot;, 8080);\r\n                System.out.println(&quot;Spuštěn&#237; klienta proběhlo &#250;spěšně.&quot;);\r\n    \r\n                this.serverReader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n                this.stopReceiving = false;\r\n                this.stopSending = false;\r\n    \r\n    \r\n                Thread receiveThread = new Thread(new Runnable() {\r\n                    public void run() {\r\n                        try {\r\n                            while (!stopReceiving) {\r\n                                String message = serverReader.readLine();\r\n                                if (message == null) {\r\n                                    // Vypnut&#237; připojen&#237; k serveru\r\n                                    stopReceiving = true;\r\n                                    closeClient();\r\n                                    System.exit(0); // Vypnut&#237; aplikace\r\n                                }\r\n                                if (message.equals(&quot;Připojen&#237; odm&#237;tnuto - dosaženo maxim&#225;ln&#237;ho počtu klientů. Zkuste se připojit později.&quot;)) {\r\n                                    closeClient();\r\n                                    System.exit(0); // Vypnut&#237; aplikace\r\n                                }\r\n                                System.out.println(&quot;Zpr&#225;va od serveru: &quot; + message);\r\n                            }\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                });\r\n                receiveThread.start();\r\n    \r\n                BufferedWriter out = new BufferedWriter(new OutputStreamWriter(this.clientSocket.getOutputStream())); // vytvořen&#237; BufferedWriter\r\n                Scanner in = new Scanner(System.in);\r\n                while (!stopSending) {\r\n                    String message = in.nextLine();\r\n                    if (message.equals(&quot;exit&quot;)) {\r\n                        System.out.println(&quot;REACHED EXIT&quot;);\r\n                            serverReader.close();\r\n                            clientSocket.close();\r\n                            in.close();\r\n                            out.close();\r\n                            System.out.println(&quot;EXITED&quot;);\r\n    \r\n                            System.exit(0);\r\n                            break;\r\n    \r\n                    }else{\r\n                        out.write(message + &quot;\\r\\n&quot;);\r\n                        out.flush();\r\n                        System.out.println(&quot;Zpr&#225;va \\&quot;&quot; + message + &quot;\\&quot; byla odesl&#225;na.&quot;);\r\n                    }\r\n                }\r\n    \r\n            } catch (ConnectException e) {\r\n                System.out.println(&quot;Nepodařilo se připojit k serveru. Klient se ukončuje.&quot;);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                closeClient();\r\n            }\r\n        }\r\n    \r\n        private void closeClient() {\r\n            try {\r\n                if (serverReader != null)\r\n                    serverReader.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            try {\r\n                if (clientSocket != null)\r\n                    clientSocket.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nServer.java\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.OutputStreamWriter;\r\n    import java.io.PrintWriter;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    import java.util.ArrayList;\r\n    import java.util.Iterator;\r\n   \r\n    public class Server {\r\n    \r\n        private ServerSocket serverSocket;\r\n        private ArrayList&lt;ClientHandler&gt; clients;\r\n        private static final int MAX_CLIENTS = 2; // Maxim&#225;ln&#237; počet klientů\r\n    \r\n        public static void main(String[] args) {\r\n            Server server = new Server();\r\n        }\r\n    \r\n        public Server() {\r\n            try {\r\n                this.serverSocket = new ServerSocket(8080);\r\n                System.out.println(&quot;Spuštěn&#237; serveru proběhlo &#250;spěšně.\\nČek&#225;m na připojen&#237; klienta...\\n&quot;);\r\n                this.clients = new ArrayList&lt;&gt;();\r\n    \r\n                clients();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private void clients() {\r\n            Thread acceptThread = new Thread(new Runnable() {\r\n                public void run() {\r\n                    while (true) {\r\n                        try {\r\n                            Socket clientSocket = serverSocket.accept();\r\n                            PrintWriter writer = new PrintWriter(new OutputStreamWriter(clientSocket.getOutputStream()), true);\r\n                            if (clients.size() &lt; MAX_CLIENTS) { // Check if the maximum number of clients is reached\r\n                                ClientHandler clientHandler = new ClientHandler(clientSocket, writer);\r\n                                synchronized (clients) {\r\n                                    clients.add(clientHandler);\r\n                                }\r\n                                System.out.println(&quot;Klient &quot; + clientHandler.getAddress() + &quot; se připojil.&quot;);\r\n                            } else {\r\n                                writer.println(&quot;\\&quot;Připojen&#237; odm&#237;tnuto - dosaženo maxim&#225;ln&#237;ho počtu klientů. Zkuste se připojit později.&quot;);\r\n                                writer.flush();\r\n                                clientSocket.close();\r\n                                System.out.println(&quot;Připojen&#237; odm&#237;tnuto - dosaženo maxim&#225;ln&#237;ho počtu klientů.&quot;);\r\n                            }\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            acceptThread.start();\r\n    \r\n            while (true) {\r\n                synchronized (clients) {\r\n                    Iterator&lt;ClientHandler&gt; iterator = clients.iterator();\r\n                    while (iterator.hasNext()) {\r\n                        ClientHandler clientHandler = iterator.next();\r\n                        try {\r\n                            BufferedReader reader = new BufferedReader(new InputStreamReader(clientHandler.getSocket().getInputStream()));\r\n                            if (reader.ready()) {\r\n                                String message = reader.readLine();\r\n                                System.out.println(&quot;Přijata zpr&#225;va od klienta &quot; + clientHandler.getAddress() + &quot; : &quot; + message);\r\n                                broadcastMessage(message);\r\n                            }\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                            iterator.remove(); // Bezpečně odstran&#237; klienta z iter&#225;toru\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        private void broadcastMessage(String message) {\r\n            synchronized (clients) {\r\n                for (ClientHandler clientHandler : clients) {\r\n                    clientHandler.getWriter().println(message);\r\n                    clientHandler.getWriter().flush();\r\n                }\r\n            }\r\n        }\r\n    \r\n        private static class ClientHandler {\r\n            private final Socket socket;\r\n            private final PrintWriter writer;\r\n    \r\n            public ClientHandler(Socket socket, PrintWriter writer) {\r\n                this.socket = socket;\r\n                this.writer = writer;\r\n            }\r\n    \r\n            public Socket getSocket() {\r\n                return this.socket;\r\n            }\r\n    \r\n            public PrintWriter getWriter() {\r\n                return this.writer;\r\n            }\r\n    \r\n            public String getAddress() {\r\n                return this.socket.getInetAddress().toString();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Java - ClientSocket not closing program","body":"<p>I am creating simple chat app in Java using ClientSocket and ServerSocket.\nHowever I have come to a problem.</p>\n<p>The Client has two threads, one for reading received messages and the other for sending messages. When the client writes 'exit' the application should close together with the connection. However the application doesn't close but only after the client has received some messages from other clients which should not happen.</p>\n<p>Can anybody help me fix this ?</p>\n<p>Client.java</p>\n<pre><code>    import java.io.*;\nimport java.net.Socket;\nimport java.net.ConnectException;\nimport java.util.Scanner;\n\npublic class Client {\n\n    private Socket clientSocket;\n    private BufferedReader serverReader;\n    private boolean stopReceiving;\n    private boolean stopSending;\n\n    public static void main(String[] args) {\n        Client client = new Client();\n    }\n\n    public Client() {\n        try {\n            this.clientSocket = new Socket(&quot;localhost&quot;, 8080);\n            System.out.println(&quot;Spuštění klienta proběhlo úspěšně.&quot;);\n\n            this.serverReader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n            this.stopReceiving = false;\n            this.stopSending = false;\n\n\n            Thread receiveThread = new Thread(new Runnable() {\n                public void run() {\n                    try {\n                        while (!stopReceiving) {\n                            String message = serverReader.readLine();\n                            if (message == null) {\n                                // Vypnutí připojení k serveru\n                                stopReceiving = true;\n                                closeClient();\n                                System.exit(0); // Vypnutí aplikace\n                            }\n                            if (message.equals(&quot;Připojení odmítnuto - dosaženo maximálního počtu klientů. Zkuste se připojit později.&quot;)) {\n                                closeClient();\n                                System.exit(0); // Vypnutí aplikace\n                            }\n                            System.out.println(&quot;Zpráva od serveru: &quot; + message);\n                        }\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n            });\n            receiveThread.start();\n\n            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(this.clientSocket.getOutputStream())); // vytvoření BufferedWriter\n            Scanner in = new Scanner(System.in);\n            while (!stopSending) {\n                String message = in.nextLine();\n                if (message.equals(&quot;exit&quot;)) {\n                    System.out.println(&quot;REACHED EXIT&quot;);\n                        serverReader.close();\n                        clientSocket.close();\n                        in.close();\n                        out.close();\n                        System.out.println(&quot;EXITED&quot;);\n\n                        System.exit(0);\n                        break;\n\n                }else{\n                    out.write(message + &quot;\\r\\n&quot;);\n                    out.flush();\n                    System.out.println(&quot;Zpráva \\&quot;&quot; + message + &quot;\\&quot; byla odeslána.&quot;);\n                }\n            }\n\n        } catch (ConnectException e) {\n            System.out.println(&quot;Nepodařilo se připojit k serveru. Klient se ukončuje.&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            closeClient();\n        }\n    }\n\n    private void closeClient() {\n        try {\n            if (serverReader != null)\n                serverReader.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        try {\n            if (clientSocket != null)\n                clientSocket.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Server.java</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.io.PrintWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.Iterator;\n\npublic class Server {\n\n    private ServerSocket serverSocket;\n    private ArrayList&lt;ClientHandler&gt; clients;\n    private static final int MAX_CLIENTS = 2; // Maximální počet klientů\n\n    public static void main(String[] args) {\n        Server server = new Server();\n    }\n\n    public Server() {\n        try {\n            this.serverSocket = new ServerSocket(8080);\n            System.out.println(&quot;Spuštění serveru proběhlo úspěšně.\\nČekám na připojení klienta...\\n&quot;);\n            this.clients = new ArrayList&lt;&gt;();\n\n            clients();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void clients() {\n        Thread acceptThread = new Thread(new Runnable() {\n            public void run() {\n                while (true) {\n                    try {\n                        Socket clientSocket = serverSocket.accept();\n                        PrintWriter writer = new PrintWriter(new OutputStreamWriter(clientSocket.getOutputStream()), true);\n                        if (clients.size() &lt; MAX_CLIENTS) { // Check if the maximum number of clients is reached\n                            ClientHandler clientHandler = new ClientHandler(clientSocket, writer);\n                            synchronized (clients) {\n                                clients.add(clientHandler);\n                            }\n                            System.out.println(&quot;Klient &quot; + clientHandler.getAddress() + &quot; se připojil.&quot;);\n                        } else {\n                            writer.println(&quot;\\&quot;Připojení odmítnuto - dosaženo maximálního počtu klientů. Zkuste se připojit později.&quot;);\n                            writer.flush();\n                            clientSocket.close();\n                            System.out.println(&quot;Připojení odmítnuto - dosaženo maximálního počtu klientů.&quot;);\n                        }\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n        });\n        acceptThread.start();\n\n        while (true) {\n            synchronized (clients) {\n                Iterator&lt;ClientHandler&gt; iterator = clients.iterator();\n                while (iterator.hasNext()) {\n                    ClientHandler clientHandler = iterator.next();\n                    try {\n                        BufferedReader reader = new BufferedReader(new InputStreamReader(clientHandler.getSocket().getInputStream()));\n                        if (reader.ready()) {\n                            String message = reader.readLine();\n                            System.out.println(&quot;Přijata zpráva od klienta &quot; + clientHandler.getAddress() + &quot; : &quot; + message);\n                            broadcastMessage(message);\n                        }\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                        iterator.remove(); // Bezpečně odstraní klienta z iterátoru\n                    }\n                }\n            }\n        }\n    }\n\n    private void broadcastMessage(String message) {\n        synchronized (clients) {\n            for (ClientHandler clientHandler : clients) {\n                clientHandler.getWriter().println(message);\n                clientHandler.getWriter().flush();\n            }\n        }\n    }\n\n    private static class ClientHandler {\n        private final Socket socket;\n        private final PrintWriter writer;\n\n        public ClientHandler(Socket socket, PrintWriter writer) {\n            this.socket = socket;\n            this.writer = writer;\n        }\n\n        public Socket getSocket() {\n            return this.socket;\n        }\n\n        public PrintWriter getWriter() {\n            return this.writer;\n        }\n\n        public String getAddress() {\n            return this.socket.getInetAddress().toString();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","google-bigquery","spring-cloud-gcp-bigquery"],"answers":[{"tags":[],"owner":{"account_id":29175961,"reputation":1,"user_id":22351212,"display_name":"Thomas Dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691575177,"creation_date":1691575177,"answer_id":76866614,"question_id":76850833,"body_markdown":"Solution to the Issue with Google BigQuery and Spring Boot Integration\r\n\r\nFor anyone encountering challenges when integrating Google&#39;s BigQuery with a Spring Boot application, here&#39;s the solution that worked for me:\r\n\r\nSpring Cloud GCP Auto Configuration: I realized that manual BigQuery configuration might not always be necessary. The Spring Cloud GCP library provides an auto-configuration for BigQuery, which can simplify the setup process. Detailed information about this feature can be found here https://cloud.spring.io/spring-cloud-static/spring-cloud-gcp/1.2.0.RELEASE/reference/html/#google-cloud-bigquery.\r\n\r\nProject ID vs. Project Name: A notable point of confusion was distinguishing between the Google Cloud Project ID and Project Name. These terms might seem interchangeable, but they serve different purposes. When you attempt to query a non-existent project, the returned error might be misleading. In my experience, the error hinted at a regional problem, which was not the actual issue.\r\n\r\nProper Permissions: After setting up with the correct project ID, it&#39;s essential to ensure your service account has the appropriate permissions. Inadequate permissions will prevent requests to BigQuery, and the error messages might not directly indicate this. It&#39;s recommended to verify permissions in the Google Cloud Console.\r\n\r\nIn summary:\r\n\r\nUtilize Spring Cloud GCP&#39;s auto-configuration when integrating BigQuery with Spring Boot.\r\nEnsure you are using the correct Project ID and avoid confusing it with the Project Name.\r\nConfirm that your service account possesses the needed permissions for BigQuery operations.\r\nI hope this summary assists other developers who encounter similar challenges.","title":"Trouble connecting to BigQuery using Google Cloud Client Library in a Spring Boot Application","body":"<p>Solution to the Issue with Google BigQuery and Spring Boot Integration</p>\n<p>For anyone encountering challenges when integrating Google's BigQuery with a Spring Boot application, here's the solution that worked for me:</p>\n<p>Spring Cloud GCP Auto Configuration: I realized that manual BigQuery configuration might not always be necessary. The Spring Cloud GCP library provides an auto-configuration for BigQuery, which can simplify the setup process. Detailed information about this feature can be found here <a href=\"https://cloud.spring.io/spring-cloud-static/spring-cloud-gcp/1.2.0.RELEASE/reference/html/#google-cloud-bigquery\" rel=\"nofollow noreferrer\">https://cloud.spring.io/spring-cloud-static/spring-cloud-gcp/1.2.0.RELEASE/reference/html/#google-cloud-bigquery</a>.</p>\n<p>Project ID vs. Project Name: A notable point of confusion was distinguishing between the Google Cloud Project ID and Project Name. These terms might seem interchangeable, but they serve different purposes. When you attempt to query a non-existent project, the returned error might be misleading. In my experience, the error hinted at a regional problem, which was not the actual issue.</p>\n<p>Proper Permissions: After setting up with the correct project ID, it's essential to ensure your service account has the appropriate permissions. Inadequate permissions will prevent requests to BigQuery, and the error messages might not directly indicate this. It's recommended to verify permissions in the Google Cloud Console.</p>\n<p>In summary:</p>\n<p>Utilize Spring Cloud GCP's auto-configuration when integrating BigQuery with Spring Boot.\nEnsure you are using the correct Project ID and avoid confusing it with the Project Name.\nConfirm that your service account possesses the needed permissions for BigQuery operations.\nI hope this summary assists other developers who encounter similar challenges.</p>\n"}],"owner":{"account_id":29175961,"reputation":1,"user_id":22351212,"display_name":"Thomas Dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":306,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76866614,"answer_count":1,"score":0,"last_activity_date":1691575177,"creation_date":1691404184,"question_id":76850833,"body_markdown":"I&#39;m working on a Spring Boot application and I&#39;m trying to connect to Google BigQuery using the Google Cloud Client Library. I have a service account JSON credentials file located at src/main/resources/my-todo/vm-dev-393108-80d765f9af09.json in my project.\r\n\r\nI&#39;ve defined the path to my credentials in application.properties like so:\r\n\r\nmyapp.google.credentials.path=classpath:vm-dev-393108-80d765f9af09.json\r\n\r\nAnd I use this path to load the credentials in my Spring configuration:\r\n\r\n\r\n```\r\n@Configuration\r\npublic class BigQueryConfig {\r\n@Value(&quot;${myapp.google.credentials.path}&quot;)\r\nprivate String googleCredentialsPath;\r\n\r\n    @Bean\r\n    public GoogleCredentials googleCredentials() {\r\n        try (FileInputStream serviceAccountStream = new FileInputStream(googleCredentialsPath)) {\r\n            return GoogleCredentials.fromStream(serviceAccountStream);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Failed to load BigQuery credentials&quot;, e);\r\n        }\r\n    }\r\n    \r\n    @Bean\r\n    public BigQuery bigQuery(GoogleCredentials credentials) {\r\n        return BigQueryOptions.newBuilder().setCredentials(credentials).build().getService();\r\n    }}\r\n```\r\n\r\n\r\nHowever, when I run my application, I&#39;m encountering the following error:  \r\n  \r\njava.io.FileNotFoundException: class path resource \\[vm-dev-393108-80d765f9af09.json\\] cannot be opened because it does not exist\r\n\r\nI&#39;ve checked the file path multiple times and it appears to be correct. I&#39;m not sure why Spring is unable to locate my JSON file.\r\n\r\nAny help would be greatly appreciated. Thank you!\r\n\r\nI am a new Spring Boot developer and this is my first time trying to establish a connection to Google&#39;s BigQuery from a Spring Boot application. I am developing my application in Gitpod, an online development environment.\r\n\r\nSo far, I have tried different ways to define the path to my JSON credentials file:\r\n\r\nI initially used the full path, like my-todo/src/main/resources/vm-dev-393108-80d765f9af09.json, but it didn&#39;t work.\r\n\r\nI then tried copying the relative path from the context menu in my IDE and used that path in my application.properties file, but the application still could not locate the JSON file.\r\n\r\nMy expectation is that when I run my Spring Boot application, it should be able to use the provided path to locate the JSON file, load the credentials, and connect to BigQuery successfully.\r\n\r\nHowever, regardless of how I define the path to my JSON file, I keep encountering a FileNotFoundException stating that the JSON file does not exist, even though the file does indeed exist in my project.\r\n\r\nI&#39;m not sure if there&#39;s something specific about Spring, Gitpod, or my relative inexperience that is causing this issue. I suspect there might be some limitations or specificities in Gitpod&#39;s workspace that prevent it from accessing a JSON file located within the workspace itself. I am eager to understand the mistake I&#39;m making and learn how to correct it.\r\n\r\nRemember, the more context and details you provide, the easier it will be for others to help you!","title":"Trouble connecting to BigQuery using Google Cloud Client Library in a Spring Boot Application","body":"<p>I'm working on a Spring Boot application and I'm trying to connect to Google BigQuery using the Google Cloud Client Library. I have a service account JSON credentials file located at src/main/resources/my-todo/vm-dev-393108-80d765f9af09.json in my project.</p>\n<p>I've defined the path to my credentials in application.properties like so:</p>\n<p>myapp.google.credentials.path=classpath:vm-dev-393108-80d765f9af09.json</p>\n<p>And I use this path to load the credentials in my Spring configuration:</p>\n<pre><code>@Configuration\npublic class BigQueryConfig {\n@Value(&quot;${myapp.google.credentials.path}&quot;)\nprivate String googleCredentialsPath;\n\n    @Bean\n    public GoogleCredentials googleCredentials() {\n        try (FileInputStream serviceAccountStream = new FileInputStream(googleCredentialsPath)) {\n            return GoogleCredentials.fromStream(serviceAccountStream);\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Failed to load BigQuery credentials&quot;, e);\n        }\n    }\n    \n    @Bean\n    public BigQuery bigQuery(GoogleCredentials credentials) {\n        return BigQueryOptions.newBuilder().setCredentials(credentials).build().getService();\n    }}\n</code></pre>\n<p>However, when I run my application, I'm encountering the following error:</p>\n<p>java.io.FileNotFoundException: class path resource [vm-dev-393108-80d765f9af09.json] cannot be opened because it does not exist</p>\n<p>I've checked the file path multiple times and it appears to be correct. I'm not sure why Spring is unable to locate my JSON file.</p>\n<p>Any help would be greatly appreciated. Thank you!</p>\n<p>I am a new Spring Boot developer and this is my first time trying to establish a connection to Google's BigQuery from a Spring Boot application. I am developing my application in Gitpod, an online development environment.</p>\n<p>So far, I have tried different ways to define the path to my JSON credentials file:</p>\n<p>I initially used the full path, like my-todo/src/main/resources/vm-dev-393108-80d765f9af09.json, but it didn't work.</p>\n<p>I then tried copying the relative path from the context menu in my IDE and used that path in my application.properties file, but the application still could not locate the JSON file.</p>\n<p>My expectation is that when I run my Spring Boot application, it should be able to use the provided path to locate the JSON file, load the credentials, and connect to BigQuery successfully.</p>\n<p>However, regardless of how I define the path to my JSON file, I keep encountering a FileNotFoundException stating that the JSON file does not exist, even though the file does indeed exist in my project.</p>\n<p>I'm not sure if there's something specific about Spring, Gitpod, or my relative inexperience that is causing this issue. I suspect there might be some limitations or specificities in Gitpod's workspace that prevent it from accessing a JSON file located within the workspace itself. I am eager to understand the mistake I'm making and learn how to correct it.</p>\n<p>Remember, the more context and details you provide, the easier it will be for others to help you!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9875,"page":259,"page_size":100}
