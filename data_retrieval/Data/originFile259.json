{"items":[{"tags":["java","spring-boot","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1691506953,"post_id":76860124,"comment_id":135499408,"body_markdown":"Typo in your magic-strings: `IdCliente` vs `idCliente`.  Use constants or suffer the consequences likes this...","body":"Typo in your magic-strings: <code>IdCliente</code> vs <code>idCliente</code>.  Use constants or suffer the consequences likes this..."},{"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"score":0,"creation_date":1691564038,"post_id":76860124,"comment_id":135506912,"body_markdown":"@cfrick how would you made a constant in that code?","body":"@cfrick how would you made a constant in that code?"},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1691571254,"post_id":76860124,"comment_id":135508281,"body_markdown":"`public static final String SESSION_KEY_ID_CLIENTE = &quot;idCliente&quot;`","body":"<code>public static final String SESSION_KEY_ID_CLIENTE = &quot;idCliente&quot;</code>"}],"answers":[{"tags":[],"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691561394,"creation_date":1691561394,"answer_id":76865006,"question_id":76860124,"body_markdown":"As pointed out in a comment, the problem here has nothing to do with `VaadinSession`.\r\n\r\nInstead, the problem is that one part of the code uses `&quot;IdCliente&quot;` as the session attribute name and another part of the code uses `&quot;idCliente&quot;`. It&#39;s recommended to use a constant for magic string values like this to avoid these types of mistakes.","title":"Session Attribute issue Vaadin 24","body":"<p>As pointed out in a comment, the problem here has nothing to do with <code>VaadinSession</code>.</p>\n<p>Instead, the problem is that one part of the code uses <code>&quot;IdCliente&quot;</code> as the session attribute name and another part of the code uses <code>&quot;idCliente&quot;</code>. It's recommended to use a constant for magic string values like this to avoid these types of mistakes.</p>\n"}],"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691572411,"accepted_answer_id":76865006,"answer_count":1,"score":0,"last_activity_date":1691561394,"creation_date":1691501967,"question_id":76860124,"body_markdown":"I have trouble understading how VaadinSessions and UI works.  \r\n\r\n\r\nI have my class that takes the id and other information of SampleClient and use it as a URL:\r\n```\r\n@Route(value = &quot;URL-of-page/:sampleClientID?&quot;, layout = MainLayout.class)\r\n@RolesAllowed(&quot;USER&quot;)\r\npublic class DocumentazioneEntita extends Div implements BeforeEnterObserver {\r\n    \r\n    @Override\r\n    public void beforeEnter(BeforeEnterEvent event) {\r\n        this.client = (SampleClient) VaadinSession.getCurrent().getAttribute(&quot;client&quot;);\r\n        System.out.println(&quot;client inside override &quot; + client);\r\n        if (this.client == null) {\r\n            Notification.show(&quot;No client selected&quot;, 3000, Notification.Position.BOTTOM_START);\r\n            navigateToMain(event);\r\n            return;\r\n        }\r\n        this.idClienteString = (String) VaadinSession.getCurrent().getAttribute(&quot;idCliente&quot;);\r\n        System.out.println(&quot;ID CLIENT STRING: &quot; + idClienteString);\r\n        Optional&lt;Long&gt; sampleClientId = event.getRouteParameters().get(SAMPLECLIENT_ID).map(Long::parseLong);\r\n        if (sampleClientId.isPresent()) {\r\n            Optional&lt;SampleClient&gt; sampleClientFromBackend = sampleClientService.get(sampleClientId.get());\r\n            if (sampleClientFromBackend.isPresent()) {\r\n                populateForm(sampleClientFromBackend.get());\r\n            } else {\r\n                Notification.show(\r\n                        String.format(&quot;Client not found, ID = %d&quot;, sampleClientId.get()),\r\n                        3000, Notification.Position.BOTTOM_START);\r\n                navigateToMain(event);\r\n                return;\r\n            }\r\n            refreshGridData();\r\n        } \r\n    }\r\n    private Long idCliente = (Long) VaadinSession.getCurrent().getAttribute(&quot;IdCliente&quot;);\r\n  \r\n    \r\n    private SampleCoursesService sampleCoursesService;\r\n    private SampleContactsService sampleContactsService;\r\n    private SampleClientService sampleClientService;\r\n    private SampleContacts contact;\r\n    private SampleClient client;\r\n    \r\n    private String SAMPLECLIENT_ID = &quot;sampleClientID&quot;;\r\n\r\n\r\n    private Checkbox showArchivedCheckbox; // Define showArchivedCheckbox as a field\r\n    private Grid&lt;SampleContacts&gt; dispositiviTable = new Grid&lt;&gt;(SampleContacts.class);; // Define dispositiviTable as a field\r\n    private List&lt;SampleContacts&gt; contactsList; // Define contactsList as a field\r\n\r\n    private Binder&lt;SampleClient&gt; binder = new Binder&lt;&gt;(SampleClient.class);\r\n\r\n    private GenerateReport generateReport;\r\n    public String idClienteString;\r\n    \r\n\r\n        public DocumentazioneEntita(SampleCoursesService sampleCoursesService, \r\n                                    SampleContactsService sampleContactsService, \r\n                                    SampleClientService sampleClientService, GenerateReport generateReport) {\r\n            this.sampleCoursesService = sampleCoursesService;\r\n            this.sampleContactsService = sampleContactsService;\r\n            this.sampleClientService = sampleClientService;\r\n            this.generateReport = generateReport;\r\n            \r\n            setId(&quot;documentazione-entita-view&quot;);\r\n            setSizeFull();\r\n            System.out.println(&quot;ID CLIENTE: &quot; + idCliente); \r\n            System.out.println(&quot;ID CLIENTE STRING: sotto autowired &quot; + idClienteString);\r\n\r\n```\r\nTo better understand the situation i started debugging printing in the console the data i have.\r\nTthis is the output of my terminal:\r\n\r\n``` \r\nID CLIENTE: 1\r\nID CLIENTE STRING: sotto autowired null\r\n\r\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA SampleClient [capCliente=null, cfCliente=XYZ789, descrizioneCliente=null, emailCliente=bellali@it.it, idCliente=37, indirizzoCliente=789 Main St, insolvente=false, localitaCliente=New York, nomeCliente=John Smith, noteCliente=null, provinciaCliente=null, pivaCliente=1.23456789E8, sdiCliente=SDI123, telefonoCliente=1234567890]       \r\nID CLIENTE STRING: 37\r\n```\r\n\r\n\r\nSo inside the ```  @Override ```i have my data outside of it i do not. why is the reason for that?  \r\nI wanted to be able to use the data of my SampleClient in my page freely but i can&#39;t figure it out why it just stays inside the before enter class.\r\n\r\nIs worth noticing that in the previous page i got all the necessary information through Vaadin UI:\r\n\r\n``` \r\n   private void navigateToEntityDocumentation(SampleClient client) {\r\n        System.out.println(&quot;go to: &quot; + client);\r\n        if (client != null) {\r\n            Long idCliente = client.getIdCliente();\r\n            \r\n            if (idCliente != null) {\r\n                \r\n                String idClienteString = idCliente.toString();\r\n                UI.getCurrent().navigate(&quot;documentazione-entita/&quot; + idClienteString);\r\n                UI.getCurrent().getSession().setAttribute(&quot;idCliente&quot;, idClienteString);\r\n                UI.getCurrent().getSession().setAttribute(&quot;client&quot;, client); \r\n            } else {\r\n                // Log that idCliente is null\r\n                System.out.println(&quot;Cliente not found &quot; + client);\r\n                UI.getCurrent().navigate(&quot;#&quot;);\r\n            }\r\n        } else {\r\n            // Log that client is null\r\n            System.out.println(&quot;Client does not exists&quot;);\r\n            UI.getCurrent().navigate(&quot;#&quot;);\r\n        }\r\n    }\r\n```\r\n\r\n\r\nThis is what my ```System.out.println(&quot;go to: &quot; + client);``` outputs in the terminal, as a proof that i have a data flow from page to page.\r\n\r\n``` \r\ngo to: SampleClient [capCliente=null, cfCliente=XYZ789, descrizioneCliente=null, emailCliente=bellali@it.it, idCliente=37, indirizzoCliente=789 Main St, insolvente=false, localitaCliente=New York, nomeCliente=John Smith, noteCliente=null, provinciaCliente=null, pivaCliente=1.23456789E8, sdiCliente=SDI123, telefonoCliente=1234567890]\r\n ```","title":"Session Attribute issue Vaadin 24","body":"<p>I have trouble understading how VaadinSessions and UI works.</p>\n<p>I have my class that takes the id and other information of SampleClient and use it as a URL:</p>\n<pre><code>@Route(value = &quot;URL-of-page/:sampleClientID?&quot;, layout = MainLayout.class)\n@RolesAllowed(&quot;USER&quot;)\npublic class DocumentazioneEntita extends Div implements BeforeEnterObserver {\n    \n    @Override\n    public void beforeEnter(BeforeEnterEvent event) {\n        this.client = (SampleClient) VaadinSession.getCurrent().getAttribute(&quot;client&quot;);\n        System.out.println(&quot;client inside override &quot; + client);\n        if (this.client == null) {\n            Notification.show(&quot;No client selected&quot;, 3000, Notification.Position.BOTTOM_START);\n            navigateToMain(event);\n            return;\n        }\n        this.idClienteString = (String) VaadinSession.getCurrent().getAttribute(&quot;idCliente&quot;);\n        System.out.println(&quot;ID CLIENT STRING: &quot; + idClienteString);\n        Optional&lt;Long&gt; sampleClientId = event.getRouteParameters().get(SAMPLECLIENT_ID).map(Long::parseLong);\n        if (sampleClientId.isPresent()) {\n            Optional&lt;SampleClient&gt; sampleClientFromBackend = sampleClientService.get(sampleClientId.get());\n            if (sampleClientFromBackend.isPresent()) {\n                populateForm(sampleClientFromBackend.get());\n            } else {\n                Notification.show(\n                        String.format(&quot;Client not found, ID = %d&quot;, sampleClientId.get()),\n                        3000, Notification.Position.BOTTOM_START);\n                navigateToMain(event);\n                return;\n            }\n            refreshGridData();\n        } \n    }\n    private Long idCliente = (Long) VaadinSession.getCurrent().getAttribute(&quot;IdCliente&quot;);\n  \n    \n    private SampleCoursesService sampleCoursesService;\n    private SampleContactsService sampleContactsService;\n    private SampleClientService sampleClientService;\n    private SampleContacts contact;\n    private SampleClient client;\n    \n    private String SAMPLECLIENT_ID = &quot;sampleClientID&quot;;\n\n\n    private Checkbox showArchivedCheckbox; // Define showArchivedCheckbox as a field\n    private Grid&lt;SampleContacts&gt; dispositiviTable = new Grid&lt;&gt;(SampleContacts.class);; // Define dispositiviTable as a field\n    private List&lt;SampleContacts&gt; contactsList; // Define contactsList as a field\n\n    private Binder&lt;SampleClient&gt; binder = new Binder&lt;&gt;(SampleClient.class);\n\n    private GenerateReport generateReport;\n    public String idClienteString;\n    \n\n        public DocumentazioneEntita(SampleCoursesService sampleCoursesService, \n                                    SampleContactsService sampleContactsService, \n                                    SampleClientService sampleClientService, GenerateReport generateReport) {\n            this.sampleCoursesService = sampleCoursesService;\n            this.sampleContactsService = sampleContactsService;\n            this.sampleClientService = sampleClientService;\n            this.generateReport = generateReport;\n            \n            setId(&quot;documentazione-entita-view&quot;);\n            setSizeFull();\n            System.out.println(&quot;ID CLIENTE: &quot; + idCliente); \n            System.out.println(&quot;ID CLIENTE STRING: sotto autowired &quot; + idClienteString);\n\n</code></pre>\n<p>To better understand the situation i started debugging printing in the console the data i have.\nTthis is the output of my terminal:</p>\n<pre><code>ID CLIENTE: 1\nID CLIENTE STRING: sotto autowired null\n\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA SampleClient [capCliente=null, cfCliente=XYZ789, descrizioneCliente=null, emailCliente=bellali@it.it, idCliente=37, indirizzoCliente=789 Main St, insolvente=false, localitaCliente=New York, nomeCliente=John Smith, noteCliente=null, provinciaCliente=null, pivaCliente=1.23456789E8, sdiCliente=SDI123, telefonoCliente=1234567890]       \nID CLIENTE STRING: 37\n</code></pre>\n<p>So inside the <code> @Override</code>i have my data outside of it i do not. why is the reason for that?<br />\nI wanted to be able to use the data of my SampleClient in my page freely but i can't figure it out why it just stays inside the before enter class.</p>\n<p>Is worth noticing that in the previous page i got all the necessary information through Vaadin UI:</p>\n<pre><code>   private void navigateToEntityDocumentation(SampleClient client) {\n        System.out.println(&quot;go to: &quot; + client);\n        if (client != null) {\n            Long idCliente = client.getIdCliente();\n            \n            if (idCliente != null) {\n                \n                String idClienteString = idCliente.toString();\n                UI.getCurrent().navigate(&quot;documentazione-entita/&quot; + idClienteString);\n                UI.getCurrent().getSession().setAttribute(&quot;idCliente&quot;, idClienteString);\n                UI.getCurrent().getSession().setAttribute(&quot;client&quot;, client); \n            } else {\n                // Log that idCliente is null\n                System.out.println(&quot;Cliente not found &quot; + client);\n                UI.getCurrent().navigate(&quot;#&quot;);\n            }\n        } else {\n            // Log that client is null\n            System.out.println(&quot;Client does not exists&quot;);\n            UI.getCurrent().navigate(&quot;#&quot;);\n        }\n    }\n</code></pre>\n<p>This is what my <code>System.out.println(&quot;go to: &quot; + client);</code> outputs in the terminal, as a proof that i have a data flow from page to page.</p>\n<pre><code>go to: SampleClient [capCliente=null, cfCliente=XYZ789, descrizioneCliente=null, emailCliente=bellali@it.it, idCliente=37, indirizzoCliente=789 Main St, insolvente=false, localitaCliente=New York, nomeCliente=John Smith, noteCliente=null, provinciaCliente=null, pivaCliente=1.23456789E8, sdiCliente=SDI123, telefonoCliente=1234567890]\n</code></pre>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691560661,"creation_date":1691560661,"answer_id":76864936,"question_id":76864166,"body_markdown":"First of all the **shift** transformation is not needed. You can use an ***isNull*** function within a modify transformation such as\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;lastName&quot;: [&quot;=isNull(@(1,&amp;))&quot;, &quot;[empty]&quot;]\r\n    }\r\n  }\r\n]\r\n```\r\nwhere \r\n\r\n - `@(1,&amp;)` represents the value of the current attribute, eg.\r\n   `&quot;lastName&quot;`(the *ampersand* stnds for the `lastName` literal)\r\n - if the function is able to run, then the value `null` returns directly,\r\n   otherwise the second argument `&quot;[empty]&quot;` returns","title":"Default JSON property if not exists using Jolt","body":"<p>First of all the <strong>shift</strong> transformation is not needed. You can use an <em><strong>isNull</strong></em> function within a modify transformation such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;lastName&quot;: [&quot;=isNull(@(1,&amp;))&quot;, &quot;[empty]&quot;]\n    }\n  }\n]\n</code></pre>\n<p>where</p>\n<ul>\n<li><code>@(1,&amp;)</code> represents the value of the current attribute, eg.\n<code>&quot;lastName&quot;</code>(the <em>ampersand</em> stnds for the <code>lastName</code> literal)</li>\n<li>if the function is able to run, then the value <code>null</code> returns directly,\notherwise the second argument <code>&quot;[empty]&quot;</code> returns</li>\n</ul>\n"}],"owner":{"account_id":20206926,"reputation":25,"user_id":14821070,"display_name":"vlcheong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76864936,"answer_count":1,"score":1,"last_activity_date":1691560758,"creation_date":1691547400,"question_id":76864166,"body_markdown":"I want to set a default value only if the JSON property not exists. \r\n\r\nFor example, below is my **Jolt spec** :\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;lastName&quot;: &quot;[empty]&quot;\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;firstName&quot;: &quot;firstName&quot;,\r\n      &quot;lastName&quot;: &quot;lastName&quot;\r\n    }\r\n  }\r\n]\r\n```\r\nWhen **input** is :\r\n```json\r\n{\r\n  &quot;firstName&quot;: &quot;John&quot;\r\n}\r\n```\r\nthe **output** is as expected :\r\n\r\n```json\r\n{\r\n  &quot;firstName&quot; : &quot;John&quot;,\r\n  &quot;lastName&quot; : &quot;[empty]&quot;\r\n}\r\n```\r\nOn the other hand when **input** is :\r\n\r\n```json\r\n{\r\n  &quot;firstName&quot;: &quot;John&quot;,\r\n  &quot;lastName&quot;: null\r\n}\r\n```\r\nI&#39;m expecting the output is same as the **input** :\r\n\r\n```json\r\n{\r\n  &quot;firstName&quot;: &quot;John&quot;,\r\n  &quot;lastName&quot;: null\r\n}\r\n```\r\nis there anyway to default only when property not exists regardless of it value. Thanks\r\n","title":"Default JSON property if not exists using Jolt","body":"<p>I want to set a default value only if the JSON property not exists.</p>\n<p>For example, below is my <strong>Jolt spec</strong> :</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;lastName&quot;: &quot;[empty]&quot;\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;firstName&quot;: &quot;firstName&quot;,\n      &quot;lastName&quot;: &quot;lastName&quot;\n    }\n  }\n]\n</code></pre>\n<p>When <strong>input</strong> is :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;firstName&quot;: &quot;John&quot;\n}\n</code></pre>\n<p>the <strong>output</strong> is as expected :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;firstName&quot; : &quot;John&quot;,\n  &quot;lastName&quot; : &quot;[empty]&quot;\n}\n</code></pre>\n<p>On the other hand when <strong>input</strong> is :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;firstName&quot;: &quot;John&quot;,\n  &quot;lastName&quot;: null\n}\n</code></pre>\n<p>I'm expecting the output is same as the <strong>input</strong> :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;firstName&quot;: &quot;John&quot;,\n  &quot;lastName&quot;: null\n}\n</code></pre>\n<p>is there anyway to default only when property not exists regardless of it value. Thanks</p>\n"},{"tags":["java","spring-data-jpa","jpa","query-hints"],"answers":[{"tags":[],"owner":{"account_id":5744189,"reputation":766,"user_id":4535853,"accept_rate":60,"display_name":"Max"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621659591,"creation_date":1621659591,"answer_id":67646265,"question_id":67646264,"body_markdown":"No, it&#39;s not possible.\r\nYou can check your log and see the next warning when calling the method\r\n\r\n    o.h.q.internal.AbstractProducedQuery     : The javax.persistence.fetchgraph hint was set, but the value was not an EntityGraph!\r\n\r\nAnd in the AbstractProducedQuery class, the next code section shows, that only instances of `RootGraph` could be treated as EntityGraph. But our `@QueryHint` allow to pass only String as value.\r\n\r\n    else if ( HINT_FETCHGRAPH.equals( hintName ) || HINT_LOADGRAPH.equals( hintName ) ) {\r\n    \t\t\t\tif ( value instanceof RootGraph ) {\r\n    \t\t\t\t\tapplyGraph( (RootGraph) value, GraphSemantic.fromJpaHintName( hintName ) );\r\n    \t\t\t\t\tapplyEntityGraphQueryHint( new EntityGraphQueryHint( hintName, (RootGraphImpl) value ) );\r\n    \t\t\t\t}\r\n    \t\t\t\telse {\r\n    \t\t\t\t\tMSG_LOGGER.warnf( &quot;The %s hint was set, but the value was not an EntityGraph!&quot;, hintName );\r\n    \t\t\t\t}\r\n    \t\t\t\tapplied = true;\r\n    \t\t\t}\r\n","title":"Is it possible to specify fetchgraph/loadgraph in SpringDataJpa @QueryHint annotation","body":"<p>No, it's not possible.\nYou can check your log and see the next warning when calling the method</p>\n<pre><code>o.h.q.internal.AbstractProducedQuery     : The javax.persistence.fetchgraph hint was set, but the value was not an EntityGraph!\n</code></pre>\n<p>And in the AbstractProducedQuery class, the next code section shows, that only instances of <code>RootGraph</code> could be treated as EntityGraph. But our <code>@QueryHint</code> allow to pass only String as value.</p>\n<pre><code>else if ( HINT_FETCHGRAPH.equals( hintName ) || HINT_LOADGRAPH.equals( hintName ) ) {\n                if ( value instanceof RootGraph ) {\n                    applyGraph( (RootGraph) value, GraphSemantic.fromJpaHintName( hintName ) );\n                    applyEntityGraphQueryHint( new EntityGraphQueryHint( hintName, (RootGraphImpl) value ) );\n                }\n                else {\n                    MSG_LOGGER.warnf( &quot;The %s hint was set, but the value was not an EntityGraph!&quot;, hintName );\n                }\n                applied = true;\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691560691,"creation_date":1691560691,"answer_id":76864938,"question_id":67646264,"body_markdown":"You don&#39;t do it through `@QueryHint` you use the `@EntityGraph` annotation.\r\n\r\nFrom https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.entity-graph\r\n\r\n```\r\npublic interface GroupRepository extends CrudRepository&lt;GroupInfo, String&gt; {\r\n\r\n  @EntityGraph(value = &quot;GroupInfo.detail&quot;, type = EntityGraphType.LOAD)\r\n  GroupInfo getByGroupName(String name);\r\n\r\n}\r\n\r\n```","title":"Is it possible to specify fetchgraph/loadgraph in SpringDataJpa @QueryHint annotation","body":"<p>You don't do it through <code>@QueryHint</code> you use the <code>@EntityGraph</code> annotation.</p>\n<p>From <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.entity-graph\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.entity-graph</a></p>\n<pre><code>public interface GroupRepository extends CrudRepository&lt;GroupInfo, String&gt; {\n\n  @EntityGraph(value = &quot;GroupInfo.detail&quot;, type = EntityGraphType.LOAD)\n  GroupInfo getByGroupName(String name);\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":5744189,"reputation":766,"user_id":4535853,"accept_rate":60,"display_name":"Max"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":463,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691560691,"creation_date":1621659591,"question_id":67646264,"body_markdown":"Is it possible somehow to specify the `javax.persistence.fetchgraph` or `javax.persistence.loadgraph` using @QueryHint in Spring Data Jpa?\r\n\r\nI have an entity graph\r\n\r\n    @Entity\r\n    @NamedEntityGraph(\r\n            name = &quot;shop_with_all_associations&quot;,\r\n            includeAllAttributes = true\r\n    )\r\n    public class Shop {    \r\n        @JoinColumn(name = &quot;shop_id&quot;)\r\n        @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n        private List&lt;Member&gt; members = new ArrayList&lt;&gt;();\r\n    }\r\n\r\nAnd the corresponding method in the repository\r\n\r\n    @Repository\r\n    public interface ShopRepository extends JpaRepository&lt;Shop, Integer&gt; {\r\n        @QueryHints({@QueryHint(name = &quot;javax.persistence.fetchgraph&quot;, value = &quot;shop_with_all_associations&quot;)})\r\n        List&lt;Shop&gt; getAllWithQueryHintBy();\r\n    }\r\n","title":"Is it possible to specify fetchgraph/loadgraph in SpringDataJpa @QueryHint annotation","body":"<p>Is it possible somehow to specify the <code>javax.persistence.fetchgraph</code> or <code>javax.persistence.loadgraph</code> using @QueryHint in Spring Data Jpa?</p>\n<p>I have an entity graph</p>\n<pre><code>@Entity\n@NamedEntityGraph(\n        name = &quot;shop_with_all_associations&quot;,\n        includeAllAttributes = true\n)\npublic class Shop {    \n    @JoinColumn(name = &quot;shop_id&quot;)\n    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private List&lt;Member&gt; members = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>And the corresponding method in the repository</p>\n<pre><code>@Repository\npublic interface ShopRepository extends JpaRepository&lt;Shop, Integer&gt; {\n    @QueryHints({@QueryHint(name = &quot;javax.persistence.fetchgraph&quot;, value = &quot;shop_with_all_associations&quot;)})\n    List&lt;Shop&gt; getAllWithQueryHintBy();\n}\n</code></pre>\n"},{"tags":["java","xslt","saxon","docbook-xsl"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691373411,"post_id":76848364,"comment_id":135478126,"body_markdown":"Can you update your question to include a complete, minimal, example, including a pom.xml, which reproduces the problem?","body":"Can you update your question to include a complete, minimal, example, including a pom.xml, which reproduces the problem?"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1691400230,"post_id":76848364,"comment_id":135481233,"body_markdown":"Rather than using classpath URIs and listing them all in a catalog, have you considered using jar: URIs, e.g. `new StreamSource(is, &quot;jar:file:///docbook-xsl!/xsl/foo.xsl&quot;)`","body":"Rather than using classpath URIs and listing them all in a catalog, have you considered using jar: URIs, e.g. <code>new StreamSource(is, &quot;jar:file:&#47;&#47;&#47;docbook-xsl!&#47;xsl&#47;foo.xsl&quot;)</code>"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1691400376,"post_id":76848364,"comment_id":135481264,"body_markdown":"Also, it might be that a user-written `URIResolver` (or Saxon `ResourceResolver`) is able to handle the calls on document(&quot;&quot;) and delegate everything else.","body":"Also, it might be that a user-written <code>URIResolver</code> (or Saxon <code>ResourceResolver</code>) is able to handle the calls on document(&quot;&quot;) and delegate everything else."},{"owner":{"account_id":9911,"reputation":1528,"user_id":18493,"accept_rate":60,"display_name":"Paul A. Hoadley"},"score":1,"creation_date":1691449428,"post_id":76848364,"comment_id":135490572,"body_markdown":"I can post a minimal example, and I will try a `jar:` URI—thanks.","body":"I can post a minimal example, and I will try a <code>jar:</code> URI—thanks."},{"owner":{"account_id":32959,"reputation":9763,"user_id":91822,"display_name":"Jukka Matilainen"},"score":0,"creation_date":1691515027,"post_id":76848364,"comment_id":135501070,"body_markdown":"Based on the pom.xml, your minimal example seems to be targeting Java 8 based. Is running on Java 8 a requirement for you?","body":"Based on the pom.xml, your minimal example seems to be targeting Java 8 based. Is running on Java 8 a requirement for you?"}],"answers":[{"tags":[],"owner":{"account_id":32959,"reputation":9763,"user_id":91822,"display_name":"Jukka Matilainen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691560008,"creation_date":1691482681,"answer_id":76857673,"question_id":76848364,"body_markdown":"I think there are multiple ways to do this.  One way to do this would be to add support for accessing resources in the classpath by URLs.  This way you could point to the stylesheets in your classpath with a URL, without having to have a catalog in place.\r\n\r\nYou could do it for example by registering the class below as a `URLStreamHandlerProvider` implementation. The implementation is adapted from [this answer][1], but changed to support the optional leading slash in the URL path and also changed to use the `cp:` scheme name instead of the more conventional `classpath:`. \r\n\r\n* The leading slash is useful in the URLs so that they get treated as hierarchical URLs, so that relative references can be resolved.\r\n* The change of the scheme (protocol) name to `cp:` is because Saxon-HE (at least version 12.3) appears to have a workaround specific for `classpath:` URLs in place, which causes a problem with the leading slash from the path getting dropped off when it resolves relative `classpath:` URLs.\r\n\r\nIn Java 9 and above you can register the provider by putting the fully qualified name of the class in the configuration file `META-INF/services/java.net.spi.URLStreamHandlerProvider`.\r\n\r\nWith this in place, you should be able to point to your stylesheets with an URL like `cp:/xsl/docbook-xsl-1.79.2/html/docbook.xsl` and have it work without a catalog, including relative imports, as long as your XSLT processor uses (or at least falls back to) this method of dereferencing URLs.  Based on a quick test, this approach seems to work with at least the Xalan-Java and Saxon-HE XSLT processors. (I think the default XSLT processor included with Java might have some issues when using the docbook-xsl stylesheets.)\r\n\r\n```\r\npackage com.stackoverflow.q76848364;\r\n\r\nimport java.io.IOException;\r\nimport java.net.URL;\r\nimport java.net.URLConnection;\r\nimport java.net.URLStreamHandler;\r\nimport java.net.spi.URLStreamHandlerProvider;\r\n\r\n/**\r\n * URL stream handler for &quot;cp:/&quot; URLs for accessing resources in the classpath.\r\n * Supports a leading slash in the the path so that the scheme is treated as a\r\n * hierarchical scheme for resolving relative URL references.\r\n * \r\n * &lt;p&gt;\r\n * Register this provider by putting the fully qualified name of this class in\r\n * the configuration file\r\n * META-INF/services/java.net.spi.URLStreamHandlerProvider.\r\n */\r\npublic class ClasspathURLStreamHandlerProvider extends URLStreamHandlerProvider {\r\n\r\n\tprivate static final String PROTOCOL = &quot;cp&quot;;\r\n\r\n\t@Override\r\n\tpublic URLStreamHandler createURLStreamHandler(String protocol) {\r\n\t\tif (PROTOCOL.equals(protocol)) {\r\n\t\t\treturn new URLStreamHandler() {\r\n\t\t\t\t@Override\r\n\t\t\t\tprotected URLConnection openConnection(URL url) throws IOException {\r\n\t\t\t\t\tString urlPath = url.getPath();\r\n\t\t\t\t\tString resourcePath = urlPath.startsWith(&quot;/&quot;) ? urlPath.substring(1) : urlPath;\r\n\t\t\t\t\treturn ClassLoader.getSystemClassLoader().getResource(resourcePath).openConnection();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n}\r\n```\r\n\r\n#### Edited to add: Caution about resolving relative URI references in Java\r\n\r\nWhen working with relative URI references in Java, please note that [there is a bug in the `java.net.URI.resolve()` method][2] that affects resolving relative URI references when the relative URI is empty (bug [JDK-8218962][3] in the Java bug database).  The docbook-xsl stylesheets rely on this working correctly, so there will be problems if one tries to use anything that relies on the `java.net.URI` class for this functionality.  Since both Xalan-Java and Saxon-HE seem to work OK, they must be using something else.\r\n\r\n#### Edited to add (2): Demonstration\r\n\r\nI created a [pull request][4] demonstrating this solution against the provided minimal example.  (The original example was set to target Java 8.  Since the method of registering `URLStreamHandler` implementations is different between Java 8 and Java 9+, I changed the compile target to Java 9 instead to demonstrate the newer approach.)\r\n\r\n  [1]: https://stackoverflow.com/a/56088592/91822\r\n  [2]: https://stackoverflow.com/q/22203111/91822\r\n  [3]: https://bugs.java.com/bugdatabase/view_bug?bug_id=8218962\r\n  [4]: https://github.com/paulhoadley/DocBookInJar/pull/1/files","title":"How can I embed DocBook XSLT transformation in a Java web app?","body":"<p>I think there are multiple ways to do this.  One way to do this would be to add support for accessing resources in the classpath by URLs.  This way you could point to the stylesheets in your classpath with a URL, without having to have a catalog in place.</p>\n<p>You could do it for example by registering the class below as a <code>URLStreamHandlerProvider</code> implementation. The implementation is adapted from <a href=\"https://stackoverflow.com/a/56088592/91822\">this answer</a>, but changed to support the optional leading slash in the URL path and also changed to use the <code>cp:</code> scheme name instead of the more conventional <code>classpath:</code>.</p>\n<ul>\n<li>The leading slash is useful in the URLs so that they get treated as hierarchical URLs, so that relative references can be resolved.</li>\n<li>The change of the scheme (protocol) name to <code>cp:</code> is because Saxon-HE (at least version 12.3) appears to have a workaround specific for <code>classpath:</code> URLs in place, which causes a problem with the leading slash from the path getting dropped off when it resolves relative <code>classpath:</code> URLs.</li>\n</ul>\n<p>In Java 9 and above you can register the provider by putting the fully qualified name of the class in the configuration file <code>META-INF/services/java.net.spi.URLStreamHandlerProvider</code>.</p>\n<p>With this in place, you should be able to point to your stylesheets with an URL like <code>cp:/xsl/docbook-xsl-1.79.2/html/docbook.xsl</code> and have it work without a catalog, including relative imports, as long as your XSLT processor uses (or at least falls back to) this method of dereferencing URLs.  Based on a quick test, this approach seems to work with at least the Xalan-Java and Saxon-HE XSLT processors. (I think the default XSLT processor included with Java might have some issues when using the docbook-xsl stylesheets.)</p>\n<pre><code>package com.stackoverflow.q76848364;\n\nimport java.io.IOException;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.net.URLStreamHandler;\nimport java.net.spi.URLStreamHandlerProvider;\n\n/**\n * URL stream handler for &quot;cp:/&quot; URLs for accessing resources in the classpath.\n * Supports a leading slash in the the path so that the scheme is treated as a\n * hierarchical scheme for resolving relative URL references.\n * \n * &lt;p&gt;\n * Register this provider by putting the fully qualified name of this class in\n * the configuration file\n * META-INF/services/java.net.spi.URLStreamHandlerProvider.\n */\npublic class ClasspathURLStreamHandlerProvider extends URLStreamHandlerProvider {\n\n    private static final String PROTOCOL = &quot;cp&quot;;\n\n    @Override\n    public URLStreamHandler createURLStreamHandler(String protocol) {\n        if (PROTOCOL.equals(protocol)) {\n            return new URLStreamHandler() {\n                @Override\n                protected URLConnection openConnection(URL url) throws IOException {\n                    String urlPath = url.getPath();\n                    String resourcePath = urlPath.startsWith(&quot;/&quot;) ? urlPath.substring(1) : urlPath;\n                    return ClassLoader.getSystemClassLoader().getResource(resourcePath).openConnection();\n                }\n            };\n        }\n        return null;\n    }\n\n}\n</code></pre>\n<h4>Edited to add: Caution about resolving relative URI references in Java</h4>\n<p>When working with relative URI references in Java, please note that <a href=\"https://stackoverflow.com/q/22203111/91822\">there is a bug in the <code>java.net.URI.resolve()</code> method</a> that affects resolving relative URI references when the relative URI is empty (bug <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=8218962\" rel=\"nofollow noreferrer\">JDK-8218962</a> in the Java bug database).  The docbook-xsl stylesheets rely on this working correctly, so there will be problems if one tries to use anything that relies on the <code>java.net.URI</code> class for this functionality.  Since both Xalan-Java and Saxon-HE seem to work OK, they must be using something else.</p>\n<h4>Edited to add (2): Demonstration</h4>\n<p>I created a <a href=\"https://github.com/paulhoadley/DocBookInJar/pull/1/files\" rel=\"nofollow noreferrer\">pull request</a> demonstrating this solution against the provided minimal example.  (The original example was set to target Java 8.  Since the method of registering <code>URLStreamHandler</code> implementations is different between Java 8 and Java 9+, I changed the compile target to Java 9 instead to demonstrate the newer approach.)</p>\n"}],"owner":{"account_id":9911,"reputation":1528,"user_id":18493,"accept_rate":60,"display_name":"Paul A. Hoadley"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76857673,"answer_count":1,"score":2,"last_activity_date":1691560008,"creation_date":1691372045,"question_id":76848364,"body_markdown":"I&#39;m at the proof-of-concept phase of building some DocBook → PDF transformation into a web application. The basic requirements are:\r\n\r\n* It has to run &quot;out of the JAR&quot;—setting up the stylesheet _as files_ on the appserver&#39;s filesystem is not what I&#39;m after.\r\n* It&#39;s _not_ based on Spring, so I&#39;m after a more generic Java solution.\r\n* We&#39;re currently using the [DocBook 1.79.2][1] stylesheets, though could probably use the [xslt20 stylesheets][2] if more appropriate.\r\n* We&#39;re currently using Saxon-HE 12.3 in the proof-of-concept, but could definitely upgrade that to a commercial version.\r\n\r\nThe TLDR is: How do I encapsulate the DocBook XSLT stylesheets _in a JAR_ (that _doesn&#39;t_ require exploding the JAR into files on the filesystem)?\r\n\r\nAs [recently discussed][3] on the docbook-apps mailing list, I can get quite a bit of the way by starting with the stylesheets in `src/main/resources/xsl` (with some customisations at that level, and then the DocBook stylesheets in `src/main/resources/xsl/docbook-xsl-1.79.2`), a catalog that starts like this:\r\n\r\n``` lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;catalog xmlns=&quot;urn:oasis:names:tc:entity:xmlns:xml:catalog&quot;&gt;\r\n   &lt;uri name=&quot;file:/xsl/juno-driver.xsl&quot;\r\n         uri=&quot;classpath:/xsl/juno-driver.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/header-footer.xsl&quot;\r\n         uri=&quot;classpath:/xsl/header-footer.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/table.xsl&quot;\r\n         uri=&quot;classpath:/xsl/table.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/titlepage.xsl&quot;\r\n         uri=&quot;classpath:/xsl/titlepage.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/fo/docbook.xsl&quot;\r\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/fo/docbook.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/VERSION.xsl&quot;\r\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/VERSION.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/fo/param.xsl&quot;\r\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/fo/param.xsl&quot; /&gt;\r\n```\r\n\r\n(and goes on to map every `.xsl`, `.xml`, `.ent`, and `.dtd` file to its `classpath:` URI equivalent), and some code like this:\r\n\r\n``` lang-java\r\nDOMResult result = new DOMResult();\r\nTransformerFactory factory = TransformerFactory.newInstance();\r\nInputStream is = XmlTest.class.getResourceAsStream(&quot;/xsl/juno-driver.xsl&quot;);\r\nSource source = new StreamSource(is, &quot;file:/xsl/juno-driver.xsl&quot;);\r\nTransformer transformer = factory.newTransformer(source);\r\ntransformer.transform(new DOMSource(document), result);\r\nreturn (Document) result.getNode();\r\n```\r\n\r\nThis _almost_ gets us there, but fails:\r\n\r\n``` lang-none\r\nError at char 9 in expression in xsl:param/@select on line 18 column 57 of l10n.xsl:\r\n  FODC0002  I/O error reported by XML parser processing\r\n  file:///xsl/docbook-xsl-1.79.2/common/l10n.xsl. Caused by java.io.FileNotFoundException:\r\n  /xsl/docbook-xsl-1.79.2/common/l10n.xsl (No such file or directory)\r\nat parameter local.l10n.xml on line 18 column 57 of l10n.xsl:\r\n     invoked by global parameter local.l10n.xml at file:///xsl/docbook-xsl-1.79.2/common/l10n.xsl#18\r\n```\r\n\r\nWhere that line involves a call to `document(&#39;&#39;)`:\r\n\r\n``` lang-xml\r\n&lt;xsl:param name=&quot;local.l10n.xml&quot; select=&quot;document(&#39;&#39;)&quot;/&gt;\r\n```\r\n\r\nLooks like it&#39;s insisting on loading itself from a file, and then (obviously) can&#39;t find it at that URI. How do we tell whoever is resolving calls to the `document()` function to use the classpath?\r\n\r\nI have pushed a [minimal example][4] of the problem to GitHub: you can clone the repo and run `mvn clean test` to reproduce.\r\n\r\nI&#39;d also settle for advice on _any other approach_ to getting this done that meets the list of constraints at the top of the post!\r\n\r\n\r\n  [1]: https://github.com/docbook/xslt10-stylesheets\r\n  [2]: https://github.com/docbook/xslt20-stylesheets\r\n  [3]: https://lists.oasis-open.org/archives/docbook-apps/202307/msg00007.html\r\n  [4]: https://github.com/paulhoadley/DocBookInJar","title":"How can I embed DocBook XSLT transformation in a Java web app?","body":"<p>I'm at the proof-of-concept phase of building some DocBook → PDF transformation into a web application. The basic requirements are:</p>\n<ul>\n<li>It has to run &quot;out of the JAR&quot;—setting up the stylesheet <em>as files</em> on the appserver's filesystem is not what I'm after.</li>\n<li>It's <em>not</em> based on Spring, so I'm after a more generic Java solution.</li>\n<li>We're currently using the <a href=\"https://github.com/docbook/xslt10-stylesheets\" rel=\"nofollow noreferrer\">DocBook 1.79.2</a> stylesheets, though could probably use the <a href=\"https://github.com/docbook/xslt20-stylesheets\" rel=\"nofollow noreferrer\">xslt20 stylesheets</a> if more appropriate.</li>\n<li>We're currently using Saxon-HE 12.3 in the proof-of-concept, but could definitely upgrade that to a commercial version.</li>\n</ul>\n<p>The TLDR is: How do I encapsulate the DocBook XSLT stylesheets <em>in a JAR</em> (that <em>doesn't</em> require exploding the JAR into files on the filesystem)?</p>\n<p>As <a href=\"https://lists.oasis-open.org/archives/docbook-apps/202307/msg00007.html\" rel=\"nofollow noreferrer\">recently discussed</a> on the docbook-apps mailing list, I can get quite a bit of the way by starting with the stylesheets in <code>src/main/resources/xsl</code> (with some customisations at that level, and then the DocBook stylesheets in <code>src/main/resources/xsl/docbook-xsl-1.79.2</code>), a catalog that starts like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;catalog xmlns=&quot;urn:oasis:names:tc:entity:xmlns:xml:catalog&quot;&gt;\n   &lt;uri name=&quot;file:/xsl/juno-driver.xsl&quot;\n         uri=&quot;classpath:/xsl/juno-driver.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/header-footer.xsl&quot;\n         uri=&quot;classpath:/xsl/header-footer.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/table.xsl&quot;\n         uri=&quot;classpath:/xsl/table.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/titlepage.xsl&quot;\n         uri=&quot;classpath:/xsl/titlepage.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/fo/docbook.xsl&quot;\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/fo/docbook.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/VERSION.xsl&quot;\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/VERSION.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/fo/param.xsl&quot;\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/fo/param.xsl&quot; /&gt;\n</code></pre>\n<p>(and goes on to map every <code>.xsl</code>, <code>.xml</code>, <code>.ent</code>, and <code>.dtd</code> file to its <code>classpath:</code> URI equivalent), and some code like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DOMResult result = new DOMResult();\nTransformerFactory factory = TransformerFactory.newInstance();\nInputStream is = XmlTest.class.getResourceAsStream(&quot;/xsl/juno-driver.xsl&quot;);\nSource source = new StreamSource(is, &quot;file:/xsl/juno-driver.xsl&quot;);\nTransformer transformer = factory.newTransformer(source);\ntransformer.transform(new DOMSource(document), result);\nreturn (Document) result.getNode();\n</code></pre>\n<p>This <em>almost</em> gets us there, but fails:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error at char 9 in expression in xsl:param/@select on line 18 column 57 of l10n.xsl:\n  FODC0002  I/O error reported by XML parser processing\n  file:///xsl/docbook-xsl-1.79.2/common/l10n.xsl. Caused by java.io.FileNotFoundException:\n  /xsl/docbook-xsl-1.79.2/common/l10n.xsl (No such file or directory)\nat parameter local.l10n.xml on line 18 column 57 of l10n.xsl:\n     invoked by global parameter local.l10n.xml at file:///xsl/docbook-xsl-1.79.2/common/l10n.xsl#18\n</code></pre>\n<p>Where that line involves a call to <code>document('')</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xsl:param name=&quot;local.l10n.xml&quot; select=&quot;document('')&quot;/&gt;\n</code></pre>\n<p>Looks like it's insisting on loading itself from a file, and then (obviously) can't find it at that URI. How do we tell whoever is resolving calls to the <code>document()</code> function to use the classpath?</p>\n<p>I have pushed a <a href=\"https://github.com/paulhoadley/DocBookInJar\" rel=\"nofollow noreferrer\">minimal example</a> of the problem to GitHub: you can clone the repo and run <code>mvn clean test</code> to reproduce.</p>\n<p>I'd also settle for advice on <em>any other approach</em> to getting this done that meets the list of constraints at the top of the post!</p>\n"},{"tags":["java","android","arrays","json"],"answers":[{"tags":[],"owner":{"account_id":174100,"reputation":4579,"user_id":403255,"accept_rate":33,"display_name":"Vinothkumar Arputharaj"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1620094127,"creation_date":1334674864,"answer_id":10193732,"question_id":8820551,"body_markdown":"Try this code\r\n\r\n    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();     \r\n    JSONArray jsonArray = (JSONArray)jsonObject; \r\n    \r\n    if (jsonArray != null) { \r\n       int len = jsonArray.length();\r\n       for (int i=0;i&lt;len;i++){ \r\n        list.add(jsonArray.get(i).toString());\r\n       } \r\n    }\r\n    //Remove the element from arraylist\r\n    list.remove(position);\r\n    //Recreate JSON Array\r\n    JSONArray jsArray = new JSONArray(list);\r\n\r\n\r\n\r\n**Edit:** \r\nUsing `ArrayList` will add `&quot;\\&quot;` to the key and values. So, use `JSONArray` itself\r\n\r\n\r\n\r\n    JSONArray list = new JSONArray();     \r\n    JSONArray jsonArray = new JSONArray(jsonstring); \r\n    int len = jsonArray.length();\r\n    if (jsonArray != null) { \r\n       for (int i=0;i&lt;len;i++)\r\n       { \r\n    \t   //Excluding the item at position\r\n    \t\tif (i != position) \r\n    \t\t{\r\n    \t\t\tlist.put(jsonArray.get(i));\r\n    \t\t}\r\n       } \r\n    }","title":"How do I remove a specific element from a JSONArray?","body":"<p>Try this code</p>\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();     \nJSONArray jsonArray = (JSONArray)jsonObject; \n\nif (jsonArray != null) { \n   int len = jsonArray.length();\n   for (int i=0;i&lt;len;i++){ \n    list.add(jsonArray.get(i).toString());\n   } \n}\n//Remove the element from arraylist\nlist.remove(position);\n//Recreate JSON Array\nJSONArray jsArray = new JSONArray(list);\n</code></pre>\n<p><strong>Edit:</strong>\nUsing <code>ArrayList</code> will add <code>&quot;\\&quot;</code> to the key and values. So, use <code>JSONArray</code> itself</p>\n<pre><code>JSONArray list = new JSONArray();     \nJSONArray jsonArray = new JSONArray(jsonstring); \nint len = jsonArray.length();\nif (jsonArray != null) { \n   for (int i=0;i&lt;len;i++)\n   { \n       //Excluding the item at position\n        if (i != position) \n        {\n            list.put(jsonArray.get(i));\n        }\n   } \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2155290,"reputation":29,"user_id":1910684,"display_name":"HappyBoyz"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1355765066,"creation_date":1355765066,"answer_id":13918944,"question_id":8820551,"body_markdown":"i guess you are using Me version, i suggest to add this block of function manually, in your code (JSONArray.java) :\r\n\r\n    public Object remove(int index) {\r\n        Object o = this.opt(index);\r\n        this.myArrayList.removeElementAt(index);\r\n        return o;\r\n    }\r\n\r\nIn java version they use ArrayList, in ME Version they use Vector.","title":"How do I remove a specific element from a JSONArray?","body":"<p>i guess you are using Me version, i suggest to add this block of function manually, in your code (JSONArray.java) :</p>\n\n<pre><code>public Object remove(int index) {\n    Object o = this.opt(index);\n    this.myArrayList.removeElementAt(index);\n    return o;\n}\n</code></pre>\n\n<p>In java version they use ArrayList, in ME Version they use Vector.</p>\n"},{"tags":[],"owner":{"account_id":2743155,"reputation":722,"user_id":2364162,"display_name":"Fabio Guerra"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1504572885,"creation_date":1385579348,"answer_id":20251038,"question_id":8820551,"body_markdown":"    public static JSONArray RemoveJSONArray( JSONArray jarray,int pos) {\r\n\t\r\n\tJSONArray Njarray=new JSONArray();\r\n\ttry{\r\n\tfor(int i=0;i&lt;jarray.length();i++){\t\t\r\n\t\tif(i!=pos)\r\n\t\t\tNjarray.put(jarray.get(i));\t\t\r\n\t}\r\n\t}catch (Exception e){e.printStackTrace();}\r\n\treturn Njarray;\r\n\t\t\r\n    }","title":"How do I remove a specific element from a JSONArray?","body":"<pre><code>public static JSONArray RemoveJSONArray( JSONArray jarray,int pos) {\n\nJSONArray Njarray=new JSONArray();\ntry{\nfor(int i=0;i&lt;jarray.length();i++){     \n    if(i!=pos)\n        Njarray.put(jarray.get(i));     \n}\n}catch (Exception e){e.printStackTrace();}\nreturn Njarray;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":245976,"reputation":16453,"user_id":519814,"accept_rate":94,"display_name":"C--"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1426099555,"creation_date":1390880173,"answer_id":21396348,"question_id":8820551,"body_markdown":"In case if someone returns with the same question for Android platform, you cannot use the inbuilt `remove()` method if you are targeting for Android API-18 or less. The `remove()` method is added on API level 19. Thus, the best possible thing to do is to extend the `JSONArray` to create a compatible override for the `remove()` method.\r\n\r\n    public class MJSONArray extends JSONArray {\r\n\r\n    \t@Override\r\n    \tpublic Object remove(int index) {\r\n    \r\n     \t\tJSONArray output = new JSONArray();     \r\n    \t\tint len = this.length(); \r\n\t    \tfor (int i = 0; i &lt; len; i++)\t{\r\n\t\t    \tif (i != index)\t{\r\n\t\t    \t\ttry {\r\n\t\t    \t\t\toutput.put(this.get(i));\r\n\t\t\t    \t} catch (JSONException e) {\r\n\t\t\t    \t\tthrow new RuntimeException(e);\r\n\t\t\t    \t}\r\n\t\t    \t}\r\n\t    \t} \r\n\t\t    return output;\r\n\t\t    //return this; If you need the input array in case of a failed attempt to remove an item.\r\n\t     }\r\n    }\r\n\r\n**EDIT**\r\nAs Daniel pointed out, handling an error silently is bad style. Code improved.","title":"How do I remove a specific element from a JSONArray?","body":"<p>In case if someone returns with the same question for Android platform, you cannot use the inbuilt <code>remove()</code> method if you are targeting for Android API-18 or less. The <code>remove()</code> method is added on API level 19. Thus, the best possible thing to do is to extend the <code>JSONArray</code> to create a compatible override for the <code>remove()</code> method.</p>\n\n<pre><code>public class MJSONArray extends JSONArray {\n\n    @Override\n    public Object remove(int index) {\n\n        JSONArray output = new JSONArray();     \n        int len = this.length(); \n        for (int i = 0; i &lt; len; i++)   {\n            if (i != index) {\n                try {\n                    output.put(this.get(i));\n                } catch (JSONException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        } \n        return output;\n        //return this; If you need the input array in case of a failed attempt to remove an item.\n     }\n}\n</code></pre>\n\n<p><strong>EDIT</strong>\nAs Daniel pointed out, handling an error silently is bad style. Code improved.</p>\n"},{"tags":[],"owner":{"account_id":5537279,"reputation":3453,"user_id":4395114,"accept_rate":58,"display_name":"Mansukh Ahir"},"down_vote_count":3,"up_vote_count":6,"is_accepted":false,"score":3,"last_activity_date":1435214096,"creation_date":1435214096,"answer_id":31042894,"question_id":8820551,"body_markdown":"   \r\n\r\n     JSONArray jArray = new JSONArray();\r\n        \r\n        jArray.remove(position); // For remove JSONArrayElement\r\n\r\n**Note :-** If `remove()` isn&#39;t there in `JSONArray` then...\r\n\r\nAPI 19 from Android (4.4) actually allows this method.\r\n\r\nCall requires API level 19 (current min is 16): org.json.JSONArray#remove\r\n\r\n**Right Click** on Project Go to Properties\r\n\r\nSelect Android from left site option\r\n\r\nAnd select Project Build Target greater then API 19 \r\n\r\nHope it helps you.","title":"How do I remove a specific element from a JSONArray?","body":"<pre><code> JSONArray jArray = new JSONArray();\n\n    jArray.remove(position); // For remove JSONArrayElement\n</code></pre>\n\n<p><strong>Note :-</strong> If <code>remove()</code> isn't there in <code>JSONArray</code> then...</p>\n\n<p>API 19 from Android (4.4) actually allows this method.</p>\n\n<p>Call requires API level 19 (current min is 16): org.json.JSONArray#remove</p>\n\n<p><strong>Right Click</strong> on Project Go to Properties</p>\n\n<p>Select Android from left site option</p>\n\n<p>And select Project Build Target greater then API 19 </p>\n\n<p>Hope it helps you.</p>\n"},{"tags":[],"owner":{"account_id":7278667,"reputation":11,"user_id":5549179,"display_name":"ArcticLampyrid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1447213531,"creation_date":1447213531,"answer_id":33643933,"question_id":8820551,"body_markdown":"You can use reflection  \r\n\r\nA Chinese website provides a relevant solution: http://blog.csdn.net/peihang1354092549/article/details/41957369  \r\nIf you don&#39;t understand Chinese, please try to read it with the translation software.  \r\n\r\nHe provides this code for the old version:  \r\n\r\n\tpublic void JSONArray_remove(int index, JSONArray JSONArrayObject) throws Exception{\r\n\t\tif(index &lt; 0)\r\n\t\t\treturn;\r\n\t\tField valuesField=JSONArray.class.getDeclaredField(&quot;values&quot;);\r\n\t\tvaluesField.setAccessible(true);\r\n\t\tList&lt;Object&gt; values=(List&lt;Object&gt;)valuesField.get(JSONArrayObject);\r\n\t\tif(index &gt;= values.size())\r\n\t\t\treturn;\r\n\t\tvalues.remove(index);\r\n\t}\r\n","title":"How do I remove a specific element from a JSONArray?","body":"<p>You can use reflection  </p>\n\n<p>A Chinese website provides a relevant solution: <a href=\"http://blog.csdn.net/peihang1354092549/article/details/41957369\" rel=\"nofollow\">http://blog.csdn.net/peihang1354092549/article/details/41957369</a><br>\nIf you don't understand Chinese, please try to read it with the translation software.  </p>\n\n<p>He provides this code for the old version:  </p>\n\n<pre><code>public void JSONArray_remove(int index, JSONArray JSONArrayObject) throws Exception{\n    if(index &lt; 0)\n        return;\n    Field valuesField=JSONArray.class.getDeclaredField(\"values\");\n    valuesField.setAccessible(true);\n    List&lt;Object&gt; values=(List&lt;Object&gt;)valuesField.get(JSONArrayObject);\n    if(index &gt;= values.size())\n        return;\n    values.remove(index);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8786421,"reputation":11,"user_id":6568154,"display_name":"Rajat Chhajed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1482948929,"creation_date":1482948929,"answer_id":41367547,"question_id":8820551,"body_markdown":"In my case I wanted to remove jsonobject with status as non zero value, so what I did is made a function &quot;removeJsonObject&quot; which takes old json and gives required json and called that function inside the constuctor.\r\n\r\n\r\n\r\n\r\n\r\n    public CommonAdapter(Context context, JSONObject json, String type) {\r\n            this.context=context;\r\n            this.json= removeJsonObject(json);\r\n            this.type=type;\r\n            Log.d(&quot;CA:&quot;, &quot;type:&quot;+type);\r\n    \r\n        }\r\n\r\n    public JSONObject removeJsonObject(JSONObject jo){\r\n            JSONArray ja= null;\r\n            JSONArray jsonArray= new JSONArray();\r\n            JSONObject jsonObject1=new JSONObject();\r\n    \r\n            try {\r\n                ja = jo.getJSONArray(&quot;data&quot;);\r\n    \r\n            } catch (JSONException e) {\r\n                e.printStackTrace();\r\n            }\r\n            for(int i=0; i&lt;ja.length(); i++){\r\n                try {\r\n    \r\n                    if(Integer.parseInt(ja.getJSONObject(i).getString(&quot;status&quot;))==0)\r\n                    {\r\n                        jsonArray.put(ja.getJSONObject(i));\r\n                        Log.d(&quot;jsonarray:&quot;, jsonArray.toString());\r\n                    }\r\n    \r\n    \r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            try {\r\n                jsonObject1.put(&quot;data&quot;,jsonArray);\r\n                Log.d(&quot;jsonobject1:&quot;, jsonObject1.toString());\r\n    \r\n                return jsonObject1;\r\n            } catch (JSONException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return json;\r\n        }\r\n\r\n","title":"How do I remove a specific element from a JSONArray?","body":"<p>In my case I wanted to remove jsonobject with status as non zero value, so what I did is made a function \"removeJsonObject\" which takes old json and gives required json and called that function inside the constuctor.</p>\n\n<pre><code>public CommonAdapter(Context context, JSONObject json, String type) {\n        this.context=context;\n        this.json= removeJsonObject(json);\n        this.type=type;\n        Log.d(\"CA:\", \"type:\"+type);\n\n    }\n\npublic JSONObject removeJsonObject(JSONObject jo){\n        JSONArray ja= null;\n        JSONArray jsonArray= new JSONArray();\n        JSONObject jsonObject1=new JSONObject();\n\n        try {\n            ja = jo.getJSONArray(\"data\");\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n        for(int i=0; i&lt;ja.length(); i++){\n            try {\n\n                if(Integer.parseInt(ja.getJSONObject(i).getString(\"status\"))==0)\n                {\n                    jsonArray.put(ja.getJSONObject(i));\n                    Log.d(\"jsonarray:\", jsonArray.toString());\n                }\n\n\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n        }\n        try {\n            jsonObject1.put(\"data\",jsonArray);\n            Log.d(\"jsonobject1:\", jsonObject1.toString());\n\n            return jsonObject1;\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n        return json;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13821428,"reputation":289,"user_id":9976764,"display_name":"Rakesh Jha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578409059,"creation_date":1578404207,"answer_id":59629518,"question_id":8820551,"body_markdown":"To Remove some element from Listview in android then it will remove your specific element and Bind it to listview.\r\n\r\n```\r\nBookinhHistory_adapter.this.productPojoList.remove(position);\r\n\r\nBookinhHistory_adapter.this.notifyDataSetChanged();\r\n```","title":"How do I remove a specific element from a JSONArray?","body":"<p>To Remove some element from Listview in android then it will remove your specific element and Bind it to listview.</p>\n\n<pre><code>BookinhHistory_adapter.this.productPojoList.remove(position);\n\nBookinhHistory_adapter.this.notifyDataSetChanged();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1848079,"reputation":1,"user_id":1675303,"display_name":"Sakthidasan J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590666939,"creation_date":1590661417,"answer_id":62062414,"question_id":8820551,"body_markdown":"    We can use iterator to filter out the array entries instead of creating a new  Array. \r\n\r\n    &#39;public static void removeNullsFrom(JSONArray array) throws JSONException {\r\n            \t\tif (array != null) {\r\n            \t\t\tIterator&lt;Object&gt; iterator = array.iterator();\r\n            \t\t\twhile (iterator.hasNext()) {\r\n            \t\t\t\tObject o = iterator.next();\r\n            \t\t\t\tif (o == null || o == JSONObject.NULL) {\r\n            \t\t\t\t\titerator.remove();\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n            \t\t}\r\n            \t}&#39;\r\n     \r\n    \r\n           \r\n         \r\n\r\n","title":"How do I remove a specific element from a JSONArray?","body":"<pre><code>We can use iterator to filter out the array entries instead of creating a new  Array. \n\n'public static void removeNullsFrom(JSONArray array) throws JSONException {\n                if (array != null) {\n                    Iterator&lt;Object&gt; iterator = array.iterator();\n                    while (iterator.hasNext()) {\n                        Object o = iterator.next();\n                        if (o == null || o == JSONObject.NULL) {\n                            iterator.remove();\n                        }\n                    }\n                }\n            }'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17938356,"reputation":1,"user_id":13034239,"display_name":"daniiel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619071417,"creation_date":1619071417,"answer_id":67207592,"question_id":8820551,"body_markdown":"    static JSONArray removeFromJsonArray(JSONArray jsonArray, int removeIndex){\r\n        JSONArray _return = new JSONArray();\r\n        for (int i = 0; i &lt;jsonArray.length(); i++) {\r\n            if (i != removeIndex){\r\n                try {\r\n                    _return.put(jsonArray.getJSONObject(i));\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n        return _return;\r\n    }","title":"How do I remove a specific element from a JSONArray?","body":"<pre><code>static JSONArray removeFromJsonArray(JSONArray jsonArray, int removeIndex){\n    JSONArray _return = new JSONArray();\n    for (int i = 0; i &lt;jsonArray.length(); i++) {\n        if (i != removeIndex){\n            try {\n                _return.put(jsonArray.getJSONObject(i));\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n    return _return;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10455264,"reputation":1,"user_id":7707609,"display_name":"Mahesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691559916,"creation_date":1691559916,"answer_id":76864886,"question_id":8820551,"body_markdown":"To remove multiple positions\r\n```\r\n    public static void main(String[] args) throws JSONException {\r\n        JSONArray array = new JSONArray();\r\n        array.put(0, &quot;0&quot;);\r\n        array.put(1, &quot;1&quot;);\r\n        array.put(2, &quot;2&quot;);\r\n        array.put(3, &quot;3&quot;);\r\n        List&lt;Integer&gt; toRemove = new ArrayList&lt;&gt;();\r\n        toRemove.add(1);\r\n        toRemove.add(0);\r\n        toRemove = toRemove.stream().sorted().collect(Collectors.toList());\r\n        int removedCount = 0; // Once we remove the element from array, we should reduce the position also with the removed item size\r\n        for (int position : toRemove) {\r\n            int newPosition = position - removedCount;\r\n            array.remove(newPosition);\r\n            removedCount = removedCount + 1;\r\n            \r\n        }\r\n        System.out.println(array.toString());// [&quot;2&quot;,&quot;3&quot;]\r\n    }","title":"How do I remove a specific element from a JSONArray?","body":"<p>To remove multiple positions</p>\n<pre><code>    public static void main(String[] args) throws JSONException {\n        JSONArray array = new JSONArray();\n        array.put(0, &quot;0&quot;);\n        array.put(1, &quot;1&quot;);\n        array.put(2, &quot;2&quot;);\n        array.put(3, &quot;3&quot;);\n        List&lt;Integer&gt; toRemove = new ArrayList&lt;&gt;();\n        toRemove.add(1);\n        toRemove.add(0);\n        toRemove = toRemove.stream().sorted().collect(Collectors.toList());\n        int removedCount = 0; // Once we remove the element from array, we should reduce the position also with the removed item size\n        for (int position : toRemove) {\n            int newPosition = position - removedCount;\n            array.remove(newPosition);\n            removedCount = removedCount + 1;\n            \n        }\n        System.out.println(array.toString());// [&quot;2&quot;,&quot;3&quot;]\n    }\n</code></pre>\n"}],"owner":{"account_id":553127,"reputation":12116,"user_id":918472,"accept_rate":71,"display_name":"Rupesh Yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184463,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":10193732,"answer_count":11,"score":43,"last_activity_date":1691559916,"creation_date":1326290480,"question_id":8820551,"body_markdown":"I am building one app in which I request a PHP file from server. This PHP file returns a JSONArray having JSONObjects as its elements e.g.,        \r\n\r\n    [ \r\n      {\r\n        &quot;uniqid&quot;:&quot;h5Wtd&quot;, \r\n        &quot;name&quot;:&quot;Test_1&quot;, \r\n        &quot;address&quot;:&quot;tst&quot;, \r\n        &quot;email&quot;:&quot;ru_tst@tst.cc&quot;, \r\n        &quot;mobile&quot;:&quot;12345&quot;,\r\n        &quot;city&quot;:&quot;ind&quot;\r\n      },\r\n      {...},\r\n      {...},\r\n      ...\r\n    ]\r\n    \r\nmy code:\r\n\r\n    /* jArrayFavFans is the JSONArray i build from string i get from response.\r\n       its giving me correct JSONArray */\r\n    JSONArray jArrayFavFans=new JSONArray(serverRespons);\r\n    for (int j = 0; j &lt; jArrayFavFans.length(); j++) {\r\n      try {\r\n        if (jArrayFavFans.getJSONObject(j).getString(&quot;uniqid&quot;).equals(id_fav_remov)) {\r\n          //jArrayFavFans.getJSONObject(j).remove(j); //$ I try this to remove element at the current index... But remove doesn&#39;t work here ???? $\r\n          //int index=jArrayFavFans.getInt(j);\r\n          Toast.makeText(getParent(), &quot;Object to remove...!&quot; + id_fav_remov, Toast.LENGTH_SHORT).show();\r\n        }\r\n      } catch (JSONException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n      }\r\n    }\r\n\r\nHow do I remove a specific element from this JSONArray?","title":"How do I remove a specific element from a JSONArray?","body":"<p>I am building one app in which I request a PHP file from server. This PHP file returns a JSONArray having JSONObjects as its elements e.g.,        </p>\n\n<pre><code>[ \n  {\n    \"uniqid\":\"h5Wtd\", \n    \"name\":\"Test_1\", \n    \"address\":\"tst\", \n    \"email\":\"ru_tst@tst.cc\", \n    \"mobile\":\"12345\",\n    \"city\":\"ind\"\n  },\n  {...},\n  {...},\n  ...\n]\n</code></pre>\n\n<p>my code:</p>\n\n<pre><code>/* jArrayFavFans is the JSONArray i build from string i get from response.\n   its giving me correct JSONArray */\nJSONArray jArrayFavFans=new JSONArray(serverRespons);\nfor (int j = 0; j &lt; jArrayFavFans.length(); j++) {\n  try {\n    if (jArrayFavFans.getJSONObject(j).getString(\"uniqid\").equals(id_fav_remov)) {\n      //jArrayFavFans.getJSONObject(j).remove(j); //$ I try this to remove element at the current index... But remove doesn't work here ???? $\n      //int index=jArrayFavFans.getInt(j);\n      Toast.makeText(getParent(), \"Object to remove...!\" + id_fav_remov, Toast.LENGTH_SHORT).show();\n    }\n  } catch (JSONException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n  }\n}\n</code></pre>\n\n<p>How do I remove a specific element from this JSONArray?</p>\n"},{"tags":["java","quarkus"],"answers":[{"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691559455,"creation_date":1691559455,"answer_id":76864860,"question_id":76864780,"body_markdown":"You probably want to cal the key `payment-api` (instead of `payment-api.auth-token-api`). That will make things easier in general.\r\n\r\nAny the REST Client [configuration][1] can be provided by any of the ways that Quarkus [supports][2].\r\n\r\nSo for example you could use Java system properties and add `-Dquarkus.rest-client.payment-api.url=someurl`\r\n`\r\n\r\n\r\n  [1]: https://quarkus.io/guides/rest-client-reactive#create-the-configuration\r\n  [2]: https://quarkus.io/guides/config-reference#configuration-sources","title":"In quarkus how to set @RegisterRestClient(configKey = &quot;payment-api.auth-token-api&quot;) these configKey at run time","body":"<p>You probably want to cal the key <code>payment-api</code> (instead of <code>payment-api.auth-token-api</code>). That will make things easier in general.</p>\n<p>Any the REST Client <a href=\"https://quarkus.io/guides/rest-client-reactive#create-the-configuration\" rel=\"nofollow noreferrer\">configuration</a> can be provided by any of the ways that Quarkus <a href=\"https://quarkus.io/guides/config-reference#configuration-sources\" rel=\"nofollow noreferrer\">supports</a>.</p>\n<p>So for example you could use Java system properties and add <code>-Dquarkus.rest-client.payment-api.url=someurl</code>\n`</p>\n"}],"owner":{"account_id":29189198,"reputation":1,"user_id":22361640,"display_name":"swaroop c"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691559455,"creation_date":1691558295,"question_id":76864780,"body_markdown":"In quarkus how to set @RegisterRestClient(configKey = &quot;payment-api.auth-token-api&quot;) these configKey at run time.\r\ni want to remove &quot;payment-api.auth-token-api&quot; from application.yaml.I have a other service in that from variable i want to put the configkey value dynamically.\r\n\r\ni am trying for a way to achieve this","title":"In quarkus how to set @RegisterRestClient(configKey = &quot;payment-api.auth-token-api&quot;) these configKey at run time","body":"<p>In quarkus how to set @RegisterRestClient(configKey = &quot;payment-api.auth-token-api&quot;) these configKey at run time.\ni want to remove &quot;payment-api.auth-token-api&quot; from application.yaml.I have a other service in that from variable i want to put the configkey value dynamically.</p>\n<p>i am trying for a way to achieve this</p>\n"},{"tags":["java","mysql","spring","maven","spring-boot"],"comments":[{"owner":{"account_id":1382751,"reputation":4828,"user_id":1315419,"accept_rate":44,"display_name":"Vasan"},"score":0,"creation_date":1509231277,"post_id":46995281,"comment_id":80937008,"body_markdown":"What problem are you facing exactly? Any error messages?","body":"What problem are you facing exactly? Any error messages?"}],"answers":[{"tags":[],"owner":{"account_id":5654135,"reputation":3774,"user_id":4473822,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1691559146,"creation_date":1509260686,"answer_id":46997674,"question_id":46995281,"body_markdown":"If you want to use spring boot data you need:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf you want to add MySql support the only dependency you need is the MySql driver:\r\n\r\n**EDIT: since 2022 there is a new driver**\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nold driver:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\nBoth dependencies versions should be managed by [spring boot](https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-dependencies/pom.xml).\r\n\r\n","title":"Maven Dependencies SpringBoot and MySQL","body":"<p>If you want to use spring boot data you need:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>If you want to add MySql support the only dependency you need is the MySql driver:</p>\n<p><strong>EDIT: since 2022 there is a new driver</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>old driver:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Both dependencies versions should be managed by <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-dependencies/pom.xml\" rel=\"nofollow noreferrer\">spring boot</a>.</p>\n"}],"owner":{"account_id":12115031,"reputation":53,"user_id":8849800,"display_name":"Pafker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20218,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691559146,"creation_date":1509231187,"question_id":46995281,"body_markdown":"we have web app with Spring Rest Controllers. We run on Spring Boot 1.5.8. We need to add MySQL database connector and all required dependencies. Here is our current pom.xml. We have tried many options without success. We have tried adding dependencies basen on mvndependencies.com. As well as getting done project and copying dependencies from it.\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.5.8.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;nimbus-jose-jwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.scribejava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;scribejava-apis&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\r\nThanks in advance","title":"Maven Dependencies SpringBoot and MySQL","body":"<p>we have web app with Spring Rest Controllers. We run on Spring Boot 1.5.8. We need to add MySQL database connector and all required dependencies. Here is our current pom.xml. We have tried many options without success. We have tried adding dependencies basen on mvndependencies.com. As well as getting done project and copying dependencies from it.</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.5.8.RELEASE&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\n        &lt;artifactId&gt;nimbus-jose-jwt&lt;/artifactId&gt;\n        &lt;version&gt;5.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.scribejava&lt;/groupId&gt;\n        &lt;artifactId&gt;scribejava-apis&lt;/artifactId&gt;\n        &lt;version&gt;4.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","google-cloud-platform","google-bigquery"],"comments":[{"owner":{"account_id":10905924,"reputation":76292,"user_id":8016720,"display_name":"John Hanley"},"score":0,"creation_date":1582240959,"post_id":60328828,"comment_id":106719798,"body_markdown":"1) What roles do you have for BigQuery? Your probably want `roles/bigquery.user` 2) Try executing the query in the console. 3) Are you the project owner or editor? 4) If you do not have any BiqQuery permission, then you will need to ask for them or assign them yourself to your identity.","body":"1) What roles do you have for BigQuery? Your probably want <code>roles&#47;bigquery.user</code> 2) Try executing the query in the console. 3) Are you the project owner or editor? 4) If you do not have any BiqQuery permission, then you will need to ask for them or assign them yourself to your identity."},{"owner":{"account_id":17810309,"reputation":11,"user_id":12935081,"display_name":"Rajiv Agarwal"},"score":0,"creation_date":1582336839,"post_id":60328828,"comment_id":106754118,"body_markdown":"I have appropriate role to view BigQuery data and above code also working fine. Its just that what I want is that is there any other way in java to fetch BigQuery select data instead of creating the Job how it is happening in the above code example ?","body":"I have appropriate role to view BigQuery data and above code also working fine. Its just that what I want is that is there any other way in java to fetch BigQuery select data instead of creating the Job how it is happening in the above code example ?"},{"owner":{"account_id":10905924,"reputation":76292,"user_id":8016720,"display_name":"John Hanley"},"score":0,"creation_date":1582337524,"post_id":60328828,"comment_id":106754235,"body_markdown":"I don&#39;t write code for BigQuery in Java, but I do in C#. I just create a BigQuery Client and then call ExecuteQuery(). Most likely a similar API exists for Java.","body":"I don&#39;t write code for BigQuery in Java, but I do in C#. I just create a BigQuery Client and then call ExecuteQuery(). Most likely a similar API exists for Java."}],"answers":[{"tags":[],"owner":{"account_id":12013673,"reputation":406,"user_id":10640405,"display_name":"Joaquim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582542342,"creation_date":1582542342,"answer_id":60374574,"question_id":60328828,"body_markdown":"BigQuery supports two types of queries:\r\n\r\n - Interactive queries\r\n - Batch queries \r\n\r\n**Interactive** queries are the ones set by default. These queries are executed as soon as possible. On the other hand, **batch** queries will start the query execution as soon as idle resources are available.\r\n\r\nRegarding your question &quot;*Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?*&quot; you have to take into consideration that **both of those queries will necessarily create a query job** and to do you will require the BigQuery Job User role. You will find more information on Java Client library for BigQuery in [this][1] reference and more information on BigQuery roles and permissions in the [documentation][2].\r\n\r\n\r\n\r\n\r\n[1]: https://googleapis.dev/java/google-cloud-clients/latest/index.html?com/google/cloud/bigquery/package-summary.html\r\n[2]: https://cloud.google.com/bigquery/docs/access-control","title":"Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?","body":"<p>BigQuery supports two types of queries:</p>\n\n<ul>\n<li>Interactive queries</li>\n<li>Batch queries </li>\n</ul>\n\n<p><strong>Interactive</strong> queries are the ones set by default. These queries are executed as soon as possible. On the other hand, <strong>batch</strong> queries will start the query execution as soon as idle resources are available.</p>\n\n<p>Regarding your question \"<em>Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?</em>\" you have to take into consideration that <strong>both of those queries will necessarily create a query job</strong> and to do you will require the BigQuery Job User role. You will find more information on Java Client library for BigQuery in <a href=\"https://googleapis.dev/java/google-cloud-clients/latest/index.html?com/google/cloud/bigquery/package-summary.html\" rel=\"nofollow noreferrer\">this</a> reference and more information on BigQuery roles and permissions in the <a href=\"https://cloud.google.com/bigquery/docs/access-control\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":7332044,"reputation":1,"user_id":5584601,"display_name":"Tejas Rawat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691559081,"creation_date":1691342739,"answer_id":76847018,"question_id":60328828,"body_markdown":"We can extract result data from GBQ without Job. It seems job could be useful when we also have some retry logic in place. \r\n```java\r\npublic static void queryLargeResults(String destinationDataset,\r\n                                     String destinationTable,\r\n                                     String query) {\r\n    try {\r\n        // Initialize client that will be used to send requests. This client only needs to be created\r\n        // once, and can be reused for multiple requests.\r\n        BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\r\n        QueryJobConfiguration queryConfig =\r\n        // To use legacy SQL syntax, set useLegacySql to true.\r\n               QueryJobConfiguration.newBuilder(query)\r\n                                    .setUseLegacySql(true)\r\n                                    // Save the results of the query to a permanent table.\r\n                                    .setDestinationTable(TableId.of(destinationDataset, destinationTable))\r\n                                    // Allow results larger than the maximum response size.\r\n                                    // If true, a destination table must be set.\r\n                                    .setAllowLargeResults(true)\r\n                                    .build();\r\n\r\n        TableResult results = bigquery.query(queryConfig);\r\n        results.iterateAll()\r\n               .forEach(row -&gt; row.forEach(val -&gt; System.out.printf(&quot;%s,&quot;, val.toString())));\r\n        System.out.println(&quot;Query large results performed successfully.&quot;);\r\n    } catch (BigQueryException | InterruptedException e) {\r\n        System.out.println(&quot;Query not performed \\n&quot; + e.toString());\r\n    }\r\n}\r\n```\r\nThis is google code snippet: https://github.com/googleapis/java-bigquery/blob/main/samples/snippets/src/main/java/com/example/bigquery/QueryLargeResults.java ","title":"Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?","body":"<p>We can extract result data from GBQ without Job. It seems job could be useful when we also have some retry logic in place.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void queryLargeResults(String destinationDataset,\n                                     String destinationTable,\n                                     String query) {\n    try {\n        // Initialize client that will be used to send requests. This client only needs to be created\n        // once, and can be reused for multiple requests.\n        BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n        QueryJobConfiguration queryConfig =\n        // To use legacy SQL syntax, set useLegacySql to true.\n               QueryJobConfiguration.newBuilder(query)\n                                    .setUseLegacySql(true)\n                                    // Save the results of the query to a permanent table.\n                                    .setDestinationTable(TableId.of(destinationDataset, destinationTable))\n                                    // Allow results larger than the maximum response size.\n                                    // If true, a destination table must be set.\n                                    .setAllowLargeResults(true)\n                                    .build();\n\n        TableResult results = bigquery.query(queryConfig);\n        results.iterateAll()\n               .forEach(row -&gt; row.forEach(val -&gt; System.out.printf(&quot;%s,&quot;, val.toString())));\n        System.out.println(&quot;Query large results performed successfully.&quot;);\n    } catch (BigQueryException | InterruptedException e) {\n        System.out.println(&quot;Query not performed \\n&quot; + e.toString());\n    }\n}\n</code></pre>\n<p>This is google code snippet: <a href=\"https://github.com/googleapis/java-bigquery/blob/main/samples/snippets/src/main/java/com/example/bigquery/QueryLargeResults.java\" rel=\"nofollow noreferrer\">https://github.com/googleapis/java-bigquery/blob/main/samples/snippets/src/main/java/com/example/bigquery/QueryLargeResults.java</a></p>\n"}],"owner":{"account_id":17810309,"reputation":11,"user_id":12935081,"display_name":"Rajiv Agarwal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":916,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1691559081,"creation_date":1582234331,"question_id":60328828,"body_markdown":"Is there an alternate Java code to execute BigQuery select query to fetch some data instead of through a job. Below is my code where I am creating jobid and then executing the query. Looking for some other options. \r\n\r\n    try {\r\n                GoogleCredentials credentials;\r\n                String keyPath = &quot;Path_to_json.json&quot;;\r\n                File credentialsPath = new File(keyPath);\r\n                FileInputStream serviceAccountStream = new FileInputStream(credentialsPath);\r\n                    credentials = ServiceAccountCredentials.fromStream(serviceAccountStream);\r\n    \r\n    \r\n                // Instantiate a client.\r\n                BigQuery bigquery =\r\n                      BigQueryOptions.newBuilder().setCredentials(credentials).build().getService();\r\n    \r\n                QueryJobConfiguration queryConfig =\r\n                        QueryJobConfiguration.newBuilder(\r\n                                &quot;select * from `bigquery-public-data`.new_york_subway.stations)\r\n                                .setUseLegacySql(false)\r\n                                .build();\r\n    \r\n                // Create a job ID so that we can safely retry.\r\n                JobId jobId = JobId.of(UUID.randomUUID().toString());\r\n                Job queryJob=\r\n                           bigquery.create(\r\n                                 JobInfo.newBuilder(queryConfig).setJobId(jobId).build());\r\n    \r\n                // Wait for the query to complete.\r\n                queryJob = queryJob.waitFor();\r\n    \r\n                // Check for errors\r\n                if (queryJob == null) {\r\n                    throw new RuntimeException(&quot;Job no longer exists&quot;);\r\n                } else if (queryJob.getStatus().getError() != null) {\r\n                    // You can also look at queryJob.getStatus().getExecutionErrors() for all\r\n                    // errors, not just the latest one.\r\n                    throw new RuntimeException(queryJob.getStatus().getError().toString());\r\n                }\r\n    \r\n                // Get the results.\r\n                TableResult result = queryJob.getQueryResults();\r\n    \r\n                // Print all pages of the results.\r\n                for (FieldValueList row : result.iterateAll()) {\r\n                    String stationId = row.get(&quot;station_id&quot;).getStringValue();\r\n                    String stationName  = row.get(&quot;station_name&quot;).getStringValue();\r\n                    System.out.println(&quot;StationId : &quot;+stationId+&quot;      Station Name : \r\n                        &quot;+stationName);\r\n                }\r\n            }catch(Exception e){\r\n                e.printStackTrace();\r\n            }","title":"Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?","body":"<p>Is there an alternate Java code to execute BigQuery select query to fetch some data instead of through a job. Below is my code where I am creating jobid and then executing the query. Looking for some other options. </p>\n\n<pre><code>try {\n            GoogleCredentials credentials;\n            String keyPath = \"Path_to_json.json\";\n            File credentialsPath = new File(keyPath);\n            FileInputStream serviceAccountStream = new FileInputStream(credentialsPath);\n                credentials = ServiceAccountCredentials.fromStream(serviceAccountStream);\n\n\n            // Instantiate a client.\n            BigQuery bigquery =\n                  BigQueryOptions.newBuilder().setCredentials(credentials).build().getService();\n\n            QueryJobConfiguration queryConfig =\n                    QueryJobConfiguration.newBuilder(\n                            \"select * from `bigquery-public-data`.new_york_subway.stations)\n                            .setUseLegacySql(false)\n                            .build();\n\n            // Create a job ID so that we can safely retry.\n            JobId jobId = JobId.of(UUID.randomUUID().toString());\n            Job queryJob=\n                       bigquery.create(\n                             JobInfo.newBuilder(queryConfig).setJobId(jobId).build());\n\n            // Wait for the query to complete.\n            queryJob = queryJob.waitFor();\n\n            // Check for errors\n            if (queryJob == null) {\n                throw new RuntimeException(\"Job no longer exists\");\n            } else if (queryJob.getStatus().getError() != null) {\n                // You can also look at queryJob.getStatus().getExecutionErrors() for all\n                // errors, not just the latest one.\n                throw new RuntimeException(queryJob.getStatus().getError().toString());\n            }\n\n            // Get the results.\n            TableResult result = queryJob.getQueryResults();\n\n            // Print all pages of the results.\n            for (FieldValueList row : result.iterateAll()) {\n                String stationId = row.get(\"station_id\").getStringValue();\n                String stationName  = row.get(\"station_name\").getStringValue();\n                System.out.println(\"StationId : \"+stationId+\"      Station Name : \n                    \"+stationName);\n            }\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n</code></pre>\n"},{"tags":["java","spring-security","roles","user-permissions"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1691501798,"post_id":76860093,"comment_id":135498141,"body_markdown":"That&#39;s a lot of code. Can you reduce it to a [mcve]?","body":"That&#39;s a lot of code. Can you reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":13991558,"reputation":45,"user_id":10105443,"display_name":"Sayantan Chatterjee"},"score":0,"creation_date":1691503654,"post_id":76860093,"comment_id":135498594,"body_markdown":"Hi @Jorn, reduced lines of code.","body":"Hi @Jorn, reduced lines of code."}],"answers":[{"tags":[],"owner":{"account_id":13991558,"reputation":45,"user_id":10105443,"display_name":"Sayantan Chatterjee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691558663,"creation_date":1691558663,"answer_id":76864812,"question_id":76860093,"body_markdown":"OK I resolved by myself.\r\n\r\nFirstly, I add login method inside AuthController\r\n\r\n    @GetMapping(value = &quot;/login&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\r\n    \t\t\theaders = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    \tpublic void login(HttpServletRequest req,@RequestHeader(HttpHeaders.AUTHORIZATION) String authorization) {\r\n    \t\t\r\n    \t\tif (authorization != null &amp;&amp; authorization.toLowerCase().startsWith(&quot;basic&quot;)) {\r\n    \t\t    // Authorization: Basic base64credentials\r\n    \t\t    String base64Credentials = authorization.substring(&quot;Basic&quot;.length()).trim();\r\n    \t\t    byte[] credDecoded = Base64.getDecoder().decode(base64Credentials); \r\n    \t\t    String credentials = new String(credDecoded, StandardCharsets.UTF_8);\r\n    \t\t    // credentials = username:password\r\n    \t\t    final String[] values = credentials.split(&quot;:&quot;, 2);\r\n    \t\t    String username = values[0];\r\n    \t\t    String password = values[1];\r\n    \t\t    authenticateusercredentials(username, password, req);\r\n    \t\t}else {\r\n    \t\t\tString username = req.getParameter(&quot;username&quot;);\r\n    \t\t    String password = req.getParameter(&quot;password&quot;);\r\n    \t\t    authenticateusercredentials(username, password, req);\r\n    \t\t}\r\n    \t}\r\n    \t \r\n    \tpublic void authenticateusercredentials(String username,String password,HttpServletRequest req) {\r\n            UsernamePasswordAuthenticationToken authReq = new UsernamePasswordAuthenticationToken(username, password);\r\n            Authentication auth = authmanager.authenticate(authReq);\r\n            SecurityContext sc = SecurityContextHolder.getContext();\r\n            sc.setAuthentication(auth);\r\n            HttpSession session = req.getSession(true);\r\n            session.setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY, sc);\r\n    \t}\r\n    \r\nSecondly I changed /login to auth/login in Security Configuration class\r\n\r\n    ...\r\n    \r\n    .formLogin(login -&gt; {\r\n    \t\t\t\t\t   \t\t\tlogin.loginProcessingUrl(&quot;/auth/login&quot;)\r\n    \t\t\t\t\t   \t\t\t\t .failureForwardUrl(&quot;/loginfailure&quot;);\r\n    \t\t\t\t   })\r\n    ...\r\n    \r\nThanks and Regards","title":"problems using Roles and Permissions using Spring security","body":"<p>OK I resolved by myself.</p>\n<p>Firstly, I add login method inside AuthController</p>\n<pre><code>@GetMapping(value = &quot;/login&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\n            headers = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\n    public void login(HttpServletRequest req,@RequestHeader(HttpHeaders.AUTHORIZATION) String authorization) {\n        \n        if (authorization != null &amp;&amp; authorization.toLowerCase().startsWith(&quot;basic&quot;)) {\n            // Authorization: Basic base64credentials\n            String base64Credentials = authorization.substring(&quot;Basic&quot;.length()).trim();\n            byte[] credDecoded = Base64.getDecoder().decode(base64Credentials); \n            String credentials = new String(credDecoded, StandardCharsets.UTF_8);\n            // credentials = username:password\n            final String[] values = credentials.split(&quot;:&quot;, 2);\n            String username = values[0];\n            String password = values[1];\n            authenticateusercredentials(username, password, req);\n        }else {\n            String username = req.getParameter(&quot;username&quot;);\n            String password = req.getParameter(&quot;password&quot;);\n            authenticateusercredentials(username, password, req);\n        }\n    }\n     \n    public void authenticateusercredentials(String username,String password,HttpServletRequest req) {\n        UsernamePasswordAuthenticationToken authReq = new UsernamePasswordAuthenticationToken(username, password);\n        Authentication auth = authmanager.authenticate(authReq);\n        SecurityContext sc = SecurityContextHolder.getContext();\n        sc.setAuthentication(auth);\n        HttpSession session = req.getSession(true);\n        session.setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY, sc);\n    }\n</code></pre>\n<p>Secondly I changed /login to auth/login in Security Configuration class</p>\n<pre><code>...\n\n.formLogin(login -&gt; {\n                                login.loginProcessingUrl(&quot;/auth/login&quot;)\n                                     .failureForwardUrl(&quot;/loginfailure&quot;);\n                   })\n...\n</code></pre>\n<p>Thanks and Regards</p>\n"}],"owner":{"account_id":13991558,"reputation":45,"user_id":10105443,"display_name":"Sayantan Chatterjee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691558951,"creation_date":1691501760,"question_id":76860093,"body_markdown":"I&#39;m using Spring Security 3.\r\nMy objective is to grant specific operations(controller methods) based on roles and permissions with a particular user. \r\n\r\nROLE_ADMIN -&gt; create,read,update and delete\r\nROLE_USER -&gt; read and update. \r\n\r\nWhen I register a user, it is saved as a user object to a database with encrypted password with no issue. But when I hit the controller api using `UserController`  with basic authentication using Postman, it is showing status 200 OK but not the expected json output. Then after facing that when I hit the same url with Google Chrome, it is showing Whitelabel error page with status 404 NOT FOUND.\r\n\r\nHere is my SecurityConfig.java\r\n\r\n    \r\n    @Configuration\r\n    //@Import({GsonConfig.class}) \r\n    @EnableMethodSecurity \r\n    @EnableWebSecurity(debug = true)\r\n    public class SecurityConfig {\r\n    \t\r\n    \t@Autowired\r\n    \tProductUserRepository productuserrepo;\r\n    \r\n    \t@Bean\r\n    \tpublic PasswordEncoder encoder() { \r\n    \t\treturn new BCryptPasswordEncoder();\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic UserDetailsService userDetailsService() {\r\n    \t    return username -&gt; productuserrepo.findByUsername(username)\r\n    \t        .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n    \t}\r\n    \t  \r\n    \t@Bean\r\n    \tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    \t  return http.csrf(csrf -&gt; csrf.disable()) \r\n    \t\t\t\t .cors(cors -&gt; cors.disable())\r\n    \t\t\t     .authorizeHttpRequests(a -&gt; {\r\n    \t\t\t\t\t\t\t\t\t       a.requestMatchers(&quot;/auth/**&quot;).permitAll();\r\n    \t\t\t\t\t\t\t\t\t\t   a.anyRequest().authenticated();   \r\n    \t\t\t\t   })\r\n    \t\t\t\t   .formLogin(login -&gt; {\r\n    \t\t\t\t\t   \t\t\tlogin.loginProcessingUrl(&quot;/login&quot;)\r\n    \t\t\t\t\t   \t\t\t\t .failureForwardUrl(&quot;/loginfailure&quot;);\r\n    \t\t\t\t   })\r\n    \t\t\t\t   .logout(logout -&gt;{\r\n    \t\t\t\t\t\t\tlogout.logoutUrl(&quot;/logout&quot;)\r\n    \t\t\t\t\t\t\t\t  .deleteCookies(&quot;JSESSIONID&quot;)\r\n    \t\t\t\t\t\t\t\t  .invalidateHttpSession(false)\r\n    \t\t\t\t\t\t\t\t  .logoutSuccessUrl(&quot;/successlogout&quot;)\r\n    \t\t\t\t\t\t\t\t  .logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext());\r\n    \t\t\t\t\t}) \r\n    \t\t\t\t   .authenticationManager(authManager()) \r\n    \t\t\t\t   .build();\r\n    \t} \r\n    \t\r\n        @Bean\r\n        public AuthenticationManager authManager(){\r\n            DaoAuthenticationProvider daoProvider = new DaoAuthenticationProvider();\r\n            daoProvider.setUserDetailsService(userDetailsService());\r\n            daoProvider.setPasswordEncoder(encoder());\r\n            return new ProviderManager(daoProvider);\r\n        }\r\n    \r\n    }\r\n\r\nHere is my Role.java [getting list of permissions using `List&lt;SimpleGrantedAuthority&gt;`]\r\n\r\n    @RequiredArgsConstructor\r\n    public enum Role {\r\n    \r\n    \tUSER(Set.of(USER_READ,USER_UPDATE)),\r\n    \t  \r\n    \tADMIN(Set.of(ADMIN_READ,ADMIN_UPDATE,ADMIN_DELETE,ADMIN_CREATE,\r\n    \t               USER_READ,USER_UPDATE));\r\n    \t \r\n    \t@Getter\r\n    \tprivate final Set&lt;Permission&gt; permissions;\r\n    \t\r\n    \tpublic  List&lt;SimpleGrantedAuthority&gt; getAuthorities() {\r\n    \t\t    List&lt;SimpleGrantedAuthority&gt; authorities = getPermissions().stream()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            .map(permission -&gt; new SimpleGrantedAuthority(permission.getPermission()))\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            .collect(Collectors.toList());\r\n    \t\t    authorities.add(new SimpleGrantedAuthority(&quot;ROLE_&quot; + this.name()));\r\n    \t\t    return authorities;\r\n    \t}\r\n    }\r\n\r\nHere is my Permission.java\r\n\r\n    public enum Permission {\r\n    \r\n        ADMIN_READ(&quot;admin:read&quot;),\r\n        ADMIN_UPDATE(&quot;admin:update&quot;),\r\n        ADMIN_CREATE(&quot;admin:create&quot;),\r\n        ADMIN_DELETE(&quot;admin:delete&quot;),\r\n        USER_READ(&quot;user:read&quot;),\r\n        USER_UPDATE(&quot;user:update&quot;);\r\n    \r\n        @Getter\r\n        private final String permission;\r\n    }\r\nFinally here is my user controller to read resource\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/user&quot;)\r\n    @PreAuthorize(&quot;hasAnyRole(&#39;USER&#39;,&#39;ADMIN&#39;)&quot;)\r\n    public class UserController {\r\n    \t\r\n    \t@PreAuthorize(&quot;hasAnyAuthority(&#39;admin:read&#39;,&#39;user:read&#39;)&quot;)\r\n    \t@GetMapping(value = &quot;/findproduct&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\r\n    \t\t\theaders = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    \tpublic Product findproductbyid(@RequestParam(&quot;productid&quot;)int productid) {\r\n    \t\tSystem.out.println(&quot;inside findproduct method&quot;);\r\n    \t\treturn prodrepo.findById(productid).get(); \r\n    \t}\r\n    }\r\n\r\nAnd my AuthController to register :\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/auth&quot;)\r\n    public class AuthController {\r\n\t\r\n\t@Autowired\r\n\tProductUserRepository produserrepo;\r\n\t\r\n\t@Autowired\r\n\tPasswordEncoder pwd_encoder; \r\n\t\r\n\t@Autowired\r\n\tGson gson;\r\n\r\n\t\r\n\t@PostMapping(value = &quot;/register&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\r\n\t\t\theaders = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\r\n\tpublic String register(@RequestBody ProductUserModel user) {\r\n\t\t\r\n\t\tif (produserrepo.existsByUsername(user.getUsername())) {  \r\n\t\t\treturn user.getUsername() + &quot; already taken&quot;;\r\n\t\t}else { \r\n\t\t\tSystem.out.println(user.toString());\r\n\t\t\t\tuser.setPassword(pwd_encoder.encode(user.getPassword()));  \r\n\t\t\t\tproduserrepo.save(gson.fromJson(gson.toJson(user), ProductUser.class));\r\n\t\t\t\treturn user.getUsername() + &quot; succesfully registered&quot;;\r\n\t\t}\r\n\t}\r\n\r\nMy only issue is : \r\nwhen I hit `http://localhost:8081/user/findproduct?productid=1` for `UserController` using Google Chrome, then login page redirected. Then if I hit username/password credentials which I successfully registered and saved to database, it is showing Whitelabel error page with status 404 NOT FOUND.\r\n\r\nCan anyone has any idea to fix the issue? ","title":"problems using Roles and Permissions using Spring security","body":"<p>I'm using Spring Security 3.\nMy objective is to grant specific operations(controller methods) based on roles and permissions with a particular user.</p>\n<p>ROLE_ADMIN -&gt; create,read,update and delete\nROLE_USER -&gt; read and update.</p>\n<p>When I register a user, it is saved as a user object to a database with encrypted password with no issue. But when I hit the controller api using <code>UserController</code>  with basic authentication using Postman, it is showing status 200 OK but not the expected json output. Then after facing that when I hit the same url with Google Chrome, it is showing Whitelabel error page with status 404 NOT FOUND.</p>\n<p>Here is my SecurityConfig.java</p>\n<pre><code>@Configuration\n//@Import({GsonConfig.class}) \n@EnableMethodSecurity \n@EnableWebSecurity(debug = true)\npublic class SecurityConfig {\n    \n    @Autowired\n    ProductUserRepository productuserrepo;\n\n    @Bean\n    public PasswordEncoder encoder() { \n        return new BCryptPasswordEncoder();\n    }\n    \n    @Bean\n    public UserDetailsService userDetailsService() {\n        return username -&gt; productuserrepo.findByUsername(username)\n            .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n    }\n      \n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n      return http.csrf(csrf -&gt; csrf.disable()) \n                 .cors(cors -&gt; cors.disable())\n                 .authorizeHttpRequests(a -&gt; {\n                                           a.requestMatchers(&quot;/auth/**&quot;).permitAll();\n                                           a.anyRequest().authenticated();   \n                   })\n                   .formLogin(login -&gt; {\n                                login.loginProcessingUrl(&quot;/login&quot;)\n                                     .failureForwardUrl(&quot;/loginfailure&quot;);\n                   })\n                   .logout(logout -&gt;{\n                            logout.logoutUrl(&quot;/logout&quot;)\n                                  .deleteCookies(&quot;JSESSIONID&quot;)\n                                  .invalidateHttpSession(false)\n                                  .logoutSuccessUrl(&quot;/successlogout&quot;)\n                                  .logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext());\n                    }) \n                   .authenticationManager(authManager()) \n                   .build();\n    } \n    \n    @Bean\n    public AuthenticationManager authManager(){\n        DaoAuthenticationProvider daoProvider = new DaoAuthenticationProvider();\n        daoProvider.setUserDetailsService(userDetailsService());\n        daoProvider.setPasswordEncoder(encoder());\n        return new ProviderManager(daoProvider);\n    }\n\n}\n</code></pre>\n<p>Here is my Role.java [getting list of permissions using <code>List&lt;SimpleGrantedAuthority&gt;</code>]</p>\n<pre><code>@RequiredArgsConstructor\npublic enum Role {\n\n    USER(Set.of(USER_READ,USER_UPDATE)),\n      \n    ADMIN(Set.of(ADMIN_READ,ADMIN_UPDATE,ADMIN_DELETE,ADMIN_CREATE,\n                   USER_READ,USER_UPDATE));\n     \n    @Getter\n    private final Set&lt;Permission&gt; permissions;\n    \n    public  List&lt;SimpleGrantedAuthority&gt; getAuthorities() {\n            List&lt;SimpleGrantedAuthority&gt; authorities = getPermissions().stream()\n                                                                        .map(permission -&gt; new SimpleGrantedAuthority(permission.getPermission()))\n                                                                        .collect(Collectors.toList());\n            authorities.add(new SimpleGrantedAuthority(&quot;ROLE_&quot; + this.name()));\n            return authorities;\n    }\n}\n</code></pre>\n<p>Here is my Permission.java</p>\n<pre><code>public enum Permission {\n\n    ADMIN_READ(&quot;admin:read&quot;),\n    ADMIN_UPDATE(&quot;admin:update&quot;),\n    ADMIN_CREATE(&quot;admin:create&quot;),\n    ADMIN_DELETE(&quot;admin:delete&quot;),\n    USER_READ(&quot;user:read&quot;),\n    USER_UPDATE(&quot;user:update&quot;);\n\n    @Getter\n    private final String permission;\n}\n</code></pre>\n<p>Finally here is my user controller to read resource</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/user&quot;)\n@PreAuthorize(&quot;hasAnyRole('USER','ADMIN')&quot;)\npublic class UserController {\n    \n    @PreAuthorize(&quot;hasAnyAuthority('admin:read','user:read')&quot;)\n    @GetMapping(value = &quot;/findproduct&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\n            headers = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\n    public Product findproductbyid(@RequestParam(&quot;productid&quot;)int productid) {\n        System.out.println(&quot;inside findproduct method&quot;);\n        return prodrepo.findById(productid).get(); \n    }\n}\n</code></pre>\n<p>And my AuthController to register :</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/auth&quot;)\npublic class AuthController {\n\n@Autowired\nProductUserRepository produserrepo;\n\n@Autowired\nPasswordEncoder pwd_encoder; \n\n@Autowired\nGson gson;\n\n\n@PostMapping(value = &quot;/register&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\n        headers = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\npublic String register(@RequestBody ProductUserModel user) {\n    \n    if (produserrepo.existsByUsername(user.getUsername())) {  \n        return user.getUsername() + &quot; already taken&quot;;\n    }else { \n        System.out.println(user.toString());\n            user.setPassword(pwd_encoder.encode(user.getPassword()));  \n            produserrepo.save(gson.fromJson(gson.toJson(user), ProductUser.class));\n            return user.getUsername() + &quot; succesfully registered&quot;;\n    }\n}\n</code></pre>\n<p>My only issue is :\nwhen I hit <code>http://localhost:8081/user/findproduct?productid=1</code> for <code>UserController</code> using Google Chrome, then login page redirected. Then if I hit username/password credentials which I successfully registered and saved to database, it is showing Whitelabel error page with status 404 NOT FOUND.</p>\n<p>Can anyone has any idea to fix the issue?</p>\n"},{"tags":["java","android","usb"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691486263,"post_id":76858120,"comment_id":135494794,"body_markdown":"According to [this](https://stackoverflow.com/a/55013425/8681), that API is not officially supported","body":"According to <a href=\"https://stackoverflow.com/a/55013425/8681\">this</a>, that API is not officially supported"},{"owner":{"account_id":11952809,"reputation":359,"user_id":8746005,"display_name":"M. Feyz"},"score":0,"creation_date":1691496074,"post_id":76858120,"comment_id":135496821,"body_markdown":"@Jorn But I test it in API 33","body":"@Jorn But I test it in API 33"}],"owner":{"account_id":11952809,"reputation":359,"user_id":8746005,"display_name":"M. Feyz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691558398,"creation_date":1691486134,"question_id":76858120,"body_markdown":"I use this code to detect when a device is connected via USB or is disconnected:\r\n\r\n        IntentFilter filter = new IntentFilter();\r\n        filter.addAction(&quot;android.hardware.usb.action.USB_STATE&quot;);\r\n        context.registerReceiver(new BroadcastReceiver() {\r\n            @Override\r\n            public void onReceive(Context context, Intent intent) {\r\n                String action = intent.getAction();\r\n                if(action.equalsIgnoreCase(&quot;android.hardware.usb.action.USB_STATE&quot;)) {\r\n                    //Check if change in USB state\r\n                    if (intent.getExtras().getBoolean(&quot;connected&quot;)) {\r\n                        Toast.makeText(context, &quot;connect USB&quot;, Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        Toast.makeText(context, &quot;Disconnect!&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n        }, filter);\r\nbut when I connect to digital piano keyboard and then disconnect, both of them shows me &quot;Disconnect!&quot;\r\nWhat is wrong?","title":"USB statuse change is detected but I can&#39;t detect if it is connected or disconnected","body":"<p>I use this code to detect when a device is connected via USB or is disconnected:</p>\n<pre><code>    IntentFilter filter = new IntentFilter();\n    filter.addAction(&quot;android.hardware.usb.action.USB_STATE&quot;);\n    context.registerReceiver(new BroadcastReceiver() {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            String action = intent.getAction();\n            if(action.equalsIgnoreCase(&quot;android.hardware.usb.action.USB_STATE&quot;)) {\n                //Check if change in USB state\n                if (intent.getExtras().getBoolean(&quot;connected&quot;)) {\n                    Toast.makeText(context, &quot;connect USB&quot;, Toast.LENGTH_SHORT).show();\n                } else {\n                    Toast.makeText(context, &quot;Disconnect!&quot;, Toast.LENGTH_SHORT).show();\n                }\n            }\n        }\n    }, filter);\n</code></pre>\n<p>but when I connect to digital piano keyboard and then disconnect, both of them shows me &quot;Disconnect!&quot;\nWhat is wrong?</p>\n"},{"tags":["java","spring","jpa","spring-boot","spring-data"],"answers":[{"tags":[],"owner":{"account_id":212417,"reputation":43614,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"down_vote_count":3,"up_vote_count":97,"is_accepted":true,"score":94,"last_activity_date":1538054899,"creation_date":1433056008,"answer_id":30554785,"question_id":30549489,"body_markdown":"This property will register an `OpenEntityManagerInViewInterceptor`, which registers an `EntityManager` to the current thread, so you will have the same `EntityManager` until the web request is finished. It has nothing to do with a Hibernate `SessionFactory` etc.","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<p>This property will register an <code>OpenEntityManagerInViewInterceptor</code>, which registers an <code>EntityManager</code> to the current thread, so you will have the same <code>EntityManager</code> until the web request is finished. It has nothing to do with a Hibernate <code>SessionFactory</code> etc.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":4,"up_vote_count":572,"is_accepted":false,"score":568,"last_activity_date":1626233988,"creation_date":1515748471,"answer_id":48222934,"question_id":30549489,"body_markdown":"The OSIV Anti-Pattern\r\n---------------------\r\n\r\nInstead of letting the business layer decide how it’s best to fetch all the associations that are needed by the View layer, OSIV (Open Session in View) forces the Persistence Context to stay open so that the View layer can trigger the Proxy initialization, as illustrated by the following diagram.\r\n\r\n[![OSIV Anti-Pattern][1]](https://vladmihalcea.com/the-open-session-in-view-anti-pattern/)\r\n\r\n* The `OpenSessionInViewFilter` calls the `openSession` method of the underlying `SessionFactory` and obtains a new `Session`.\r\n* The `Session` is bound to the [`TransactionSynchronizationManager`](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationManager.html).\r\n* The `OpenSessionInViewFilter` calls the `doFilter` of the `javax.servlet.FilterChain` object reference and the request is further processed\r\n* The [`DispatcherServlet`](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/DispatcherServlet.html) is called, and it routes the HTTP request to the underlying `PostController`.\r\n* The `PostController` calls the `PostService` to get a list of `Post` entities.\r\n* The `PostService` opens a new transaction, and the `HibernateTransactionManager` reuses the same `Session` that was opened by the `OpenSessionInViewFilter`.\r\n* The `PostDAO` fetches the list of `Post` entities without initializing any lazy association.\r\n* The `PostService` commits the underlying transaction, but the `Session` is not closed because it was opened externally.\r\n* The `DispatcherServlet` starts rendering the UI, which, in turn, navigates the lazy associations and triggers their initialization.\r\n* The `OpenSessionInViewFilter` can close the `Session`, and the underlying database connection is released as well.\r\n\r\nAt first glance, this might not look like a terrible thing to do, but, once you view it from a database perspective, a series of flaws start to become more obvious.\r\n\r\nThe service layer opens and closes a database transaction, but afterward, there is no explicit transaction going on. For this reason, every additional statement issued from the UI rendering phase is executed in auto-commit mode. Auto-commit puts pressure on the database server because each transaction issues a commit at end, which can trigger a transaction log flush to disk. One optimization would be to mark the `Connection` as read-only which would allow the database server to avoid writing to the transaction log.\r\n\r\nThere is no separation of concerns anymore because statements are generated both by the service layer and by the UI rendering process. Writing integration tests that assert the number of statements being generated requires going through all layers (web, service, DAO) while having the application deployed on a web container. Even when using an in-memory database (e.g. HSQLDB) and a lightweight webserver (e.g. Jetty), these integration tests are going to be slower to execute than if layers were separated and the back-end integration tests used the database, while the front-end integration tests were mocking the service layer altogether.\r\n\r\nThe UI layer is limited to navigating associations which can, in turn, trigger N+1 query problems. Although Hibernate offers [`@BatchSize`](https://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/annotations/BatchSize.html) for fetching associations in batches, and [`FetchMode.SUBSELECT`](https://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/annotations/FetchMode.html#SUBSELECT) to cope with this scenario, the annotations are affecting the default fetch plan, so they get applied to every business use case. For this reason, a data access layer query is much more suitable because it can be tailored to the current use case data fetch requirements.\r\n\r\nLast but not least, the database connection is held throughout the UI rendering phase which increases connection lease time and limits the overall transaction throughput due to congestion on the database connection pool. The more the connection is held, the more other concurrent requests are going to wait to get a connection from the pool.\r\n\r\nSpring Boot and OSIV\r\n--------------------\r\n\r\nUnfortunately, [OSIV (Open Session in View) is enabled by default in Spring Boot](https://github.com/spring-projects/spring-boot/issues/7107), and OSIV is really a bad idea from a performance and scalability perspective.\r\n\r\nSo, make sure that in the `application.properties` configuration file, you have the following entry:\r\n\r\n    spring.jpa.open-in-view=false\r\n\r\nThis will disable OSIV so that you can handle the `LazyInitializationException` the right way.\r\n\r\nStarting with version 2.0, Spring Boot issues [a warning when OSIV][3] is enabled by default, so you can discover this problem long before it affects a production system.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zy7eB.png\r\n  [3]: https://github.com/spring-projects/spring-boot/issues/7107","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<h2 id=\"the-osiv-anti-pattern\">The OSIV Anti-Pattern</h2>\n<p>Instead of letting the business layer decide how it’s best to fetch all the associations that are needed by the View layer, OSIV (Open Session in View) forces the Persistence Context to stay open so that the View layer can trigger the Proxy initialization, as illustrated by the following diagram.</p>\n<p><a href=\"https://vladmihalcea.com/the-open-session-in-view-anti-pattern/\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Zy7eB.png\" alt=\"OSIV Anti-Pattern\" /></a></p>\n<ul>\n<li>The <code>OpenSessionInViewFilter</code> calls the <code>openSession</code> method of the underlying <code>SessionFactory</code> and obtains a new <code>Session</code>.</li>\n<li>The <code>Session</code> is bound to the <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationManager.html\" rel=\"noreferrer\"><code>TransactionSynchronizationManager</code></a>.</li>\n<li>The <code>OpenSessionInViewFilter</code> calls the <code>doFilter</code> of the <code>javax.servlet.FilterChain</code> object reference and the request is further processed</li>\n<li>The <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/DispatcherServlet.html\" rel=\"noreferrer\"><code>DispatcherServlet</code></a> is called, and it routes the HTTP request to the underlying <code>PostController</code>.</li>\n<li>The <code>PostController</code> calls the <code>PostService</code> to get a list of <code>Post</code> entities.</li>\n<li>The <code>PostService</code> opens a new transaction, and the <code>HibernateTransactionManager</code> reuses the same <code>Session</code> that was opened by the <code>OpenSessionInViewFilter</code>.</li>\n<li>The <code>PostDAO</code> fetches the list of <code>Post</code> entities without initializing any lazy association.</li>\n<li>The <code>PostService</code> commits the underlying transaction, but the <code>Session</code> is not closed because it was opened externally.</li>\n<li>The <code>DispatcherServlet</code> starts rendering the UI, which, in turn, navigates the lazy associations and triggers their initialization.</li>\n<li>The <code>OpenSessionInViewFilter</code> can close the <code>Session</code>, and the underlying database connection is released as well.</li>\n</ul>\n<p>At first glance, this might not look like a terrible thing to do, but, once you view it from a database perspective, a series of flaws start to become more obvious.</p>\n<p>The service layer opens and closes a database transaction, but afterward, there is no explicit transaction going on. For this reason, every additional statement issued from the UI rendering phase is executed in auto-commit mode. Auto-commit puts pressure on the database server because each transaction issues a commit at end, which can trigger a transaction log flush to disk. One optimization would be to mark the <code>Connection</code> as read-only which would allow the database server to avoid writing to the transaction log.</p>\n<p>There is no separation of concerns anymore because statements are generated both by the service layer and by the UI rendering process. Writing integration tests that assert the number of statements being generated requires going through all layers (web, service, DAO) while having the application deployed on a web container. Even when using an in-memory database (e.g. HSQLDB) and a lightweight webserver (e.g. Jetty), these integration tests are going to be slower to execute than if layers were separated and the back-end integration tests used the database, while the front-end integration tests were mocking the service layer altogether.</p>\n<p>The UI layer is limited to navigating associations which can, in turn, trigger N+1 query problems. Although Hibernate offers <a href=\"https://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/annotations/BatchSize.html\" rel=\"noreferrer\"><code>@BatchSize</code></a> for fetching associations in batches, and <a href=\"https://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/annotations/FetchMode.html#SUBSELECT\" rel=\"noreferrer\"><code>FetchMode.SUBSELECT</code></a> to cope with this scenario, the annotations are affecting the default fetch plan, so they get applied to every business use case. For this reason, a data access layer query is much more suitable because it can be tailored to the current use case data fetch requirements.</p>\n<p>Last but not least, the database connection is held throughout the UI rendering phase which increases connection lease time and limits the overall transaction throughput due to congestion on the database connection pool. The more the connection is held, the more other concurrent requests are going to wait to get a connection from the pool.</p>\n<h2 id=\"spring-boot-and-osiv\">Spring Boot and OSIV</h2>\n<p>Unfortunately, <a href=\"https://github.com/spring-projects/spring-boot/issues/7107\" rel=\"noreferrer\">OSIV (Open Session in View) is enabled by default in Spring Boot</a>, and OSIV is really a bad idea from a performance and scalability perspective.</p>\n<p>So, make sure that in the <code>application.properties</code> configuration file, you have the following entry:</p>\n<pre><code>spring.jpa.open-in-view=false\n</code></pre>\n<p>This will disable OSIV so that you can handle the <code>LazyInitializationException</code> the right way.</p>\n<p>Starting with version 2.0, Spring Boot issues <a href=\"https://github.com/spring-projects/spring-boot/issues/7107\" rel=\"noreferrer\">a warning when OSIV</a> is enabled by default, so you can discover this problem long before it affects a production system.</p>\n"},{"tags":[],"owner":{"account_id":5532352,"reputation":1512,"user_id":4391948,"accept_rate":78,"display_name":"Rogelio Blanco"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1642719158,"creation_date":1642719158,"answer_id":70794381,"question_id":30549489,"body_markdown":"Probably is late, but I was trying to dig more about the implications of turning it OFF vs. ON, and I found this article useful [spring-open-session-in-view][1]\r\n\r\nHope this can help somebody...\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-open-session-in-view","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<p>Probably is late, but I was trying to dig more about the implications of turning it OFF vs. ON, and I found this article useful <a href=\"https://www.baeldung.com/spring-open-session-in-view\" rel=\"noreferrer\">spring-open-session-in-view</a></p>\n<p>Hope this can help somebody...</p>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691558062,"creation_date":1691558062,"answer_id":76864764,"question_id":30549489,"body_markdown":"The one reason for open-in-view (for OSIV) is for developer productivity as it eliminates the need to explicitly load all their lazily loaded properties.\r\n\r\nhttps://stackoverflow.com/a/76864391/242042 shows a way of doing that explicit load.  With `open-in-view` off to prevent the LazyInitializationException.\r\n\r\nHowever, it makes *every* controller mapping that does a JPA operation start a transaction and thus may cause exhaustion on the database connections.\r\n\r\nAnother way (also considered an anti-pattern) is to tell Hibernate to allow lazy loading without a transaction by adding.\r\n\r\n```\r\nspring:\r\n  jpa:\r\n    properties:\r\n      hibernate.enable_lazy_load_no_trans: true\r\n```\r\n\r\nIn terms of developer productivity it is the same, but in terms of performance this may be slightly better as it will only start the transaction if the object needs to lazily load after the fact.\r\n\r\nObviously the correct approach would be to do `join fetch` or `@EntityGraph` but that adds to the complexity for the developer.  But that can be a performance improvement afterwards.\r\n\r\nIn my opinion use the `hibernate.enable_lazy_load_no_trans` and turn off `open-in-view` but find places where the `enable_lazy_load_no_trans` capability is triggered ([ideally via a log](https://stackoverflow.com/questions/76864762/how-do-i-log-when-hibernate-lazily-loads-data-outside-a-transaction-when-enable)) and correct it.","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<p>The one reason for open-in-view (for OSIV) is for developer productivity as it eliminates the need to explicitly load all their lazily loaded properties.</p>\n<p><a href=\"https://stackoverflow.com/a/76864391/242042\">https://stackoverflow.com/a/76864391/242042</a> shows a way of doing that explicit load.  With <code>open-in-view</code> off to prevent the LazyInitializationException.</p>\n<p>However, it makes <em>every</em> controller mapping that does a JPA operation start a transaction and thus may cause exhaustion on the database connections.</p>\n<p>Another way (also considered an anti-pattern) is to tell Hibernate to allow lazy loading without a transaction by adding.</p>\n<pre><code>spring:\n  jpa:\n    properties:\n      hibernate.enable_lazy_load_no_trans: true\n</code></pre>\n<p>In terms of developer productivity it is the same, but in terms of performance this may be slightly better as it will only start the transaction if the object needs to lazily load after the fact.</p>\n<p>Obviously the correct approach would be to do <code>join fetch</code> or <code>@EntityGraph</code> but that adds to the complexity for the developer.  But that can be a performance improvement afterwards.</p>\n<p>In my opinion use the <code>hibernate.enable_lazy_load_no_trans</code> and turn off <code>open-in-view</code> but find places where the <code>enable_lazy_load_no_trans</code> capability is triggered (<a href=\"https://stackoverflow.com/questions/76864762/how-do-i-log-when-hibernate-lazily-loads-data-outside-a-transaction-when-enable\">ideally via a log</a>) and correct it.</p>\n"}],"owner":{"account_id":1920479,"reputation":7969,"user_id":1732123,"accept_rate":89,"display_name":"Carlos Alberto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266066,"favorite_count":0,"down_vote_count":0,"up_vote_count":284,"accepted_answer_id":30554785,"answer_count":4,"score":284,"last_activity_date":1691558062,"creation_date":1433008688,"question_id":30549489,"body_markdown":"I saw `spring.jpa.open-in-view=true` property in Spring Boot documentation for JPA configuration.\r\n\r\n - Is the `true` default value for this property if it&#39;s not provided at all?;\r\n - What does this really do? I did not find any good explaining for it;\r\n - Does it make you use `SessionFactory` instead of `EntityManagerFactory`? If yes, how can I tell it to allow me to use `EntityManagerFactory` instead?\r\n\r\nThanks!","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<p>I saw <code>spring.jpa.open-in-view=true</code> property in Spring Boot documentation for JPA configuration.</p>\n\n<ul>\n<li>Is the <code>true</code> default value for this property if it's not provided at all?;</li>\n<li>What does this really do? I did not find any good explaining for it;</li>\n<li>Does it make you use <code>SessionFactory</code> instead of <code>EntityManagerFactory</code>? If yes, how can I tell it to allow me to use <code>EntityManagerFactory</code> instead?</li>\n</ul>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot","rest","service","controller"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1691492310,"post_id":76858587,"comment_id":135495977,"body_markdown":"Research projections.","body":"Research projections."}],"answers":[{"tags":[],"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1691557793,"creation_date":1691491642,"answer_id":76858802,"question_id":76858587,"body_markdown":"@Mahadi Hasan I&#39;ve checked your code.\r\n\r\nFirst of all, you should write some REST methods solving your problem for the web application:\r\n\r\n```\r\n@GetMapping(&quot;/countries&quot;)\r\npublic List&lt;CountryView&gt; getAllCountries()\r\n{\r\n    ...\r\n}\r\n\r\n@GetMapping(&quot;/countries/{id}/states&quot;)\r\npublic List&lt;StateView&gt; getStatesByCountry(@PathVariable(&quot;id&quot;) String countryId)\r\n{\r\n    ...\r\n}\r\n\r\n@GetMapping(&quot;/states/{id}/cities&quot;)\r\npublic List&lt;CityView&gt; getCitiesByCountry(@PathVariable(&quot;id&quot;) Long stateId)\r\n{\r\n    ...\r\n}\r\n```\r\nSo, now we know what we want from the database. We could use projections to exactly fetch this data. Projections are a means to directly wrap the results from queries into specialized DTOs.\r\n\r\nFinally I found a proper solution:\r\n\r\n# Repository methods:\r\n\r\n```\r\nList&lt;CountryView&gt; findAllBy(); // The &#39;By&#39; is necessary to differentiate from findAll()\r\n\r\nList&lt;StateView&gt; findByCountry_countryId(String id); // The _ is necessary to prevent from searching a property countryCountryId. We want country.countrId instead.\r\n\r\nList&lt;CityView&gt; findByState_stateId(Long id); // Same as above here\r\n```\r\n\r\nFirst I tried with unidirectional relationships. This led to a somewhat inefficient approach because I had to write a query with a JOIN. I found out that this works better with bidirectional relationships as you have foreseen in your entities already.\r\n\r\n# Projections\r\n```\r\npublic interface CountryView {\r\n    String getCountryId();\r\n    String getCountry();\r\n}\r\n\r\npublic interface StateView {\r\n    Long getStateId();\r\n    String getState();\r\n}\r\n\r\npublic interface CityView {\r\n    Long getCiyId();\r\n    String getCity();\r\n}\r\n```\r\n\r\nNow you can fill in the repository calls into the controller code. I omit the service layer here. You&#39;ll manage this for your own.\r\n\r\nIf you enable SQL logging you&#39;ll see that you get simple efficient queries.\r\n\r\nNext you should consider to use the same name and type for your ids and names. If your entities would each have a Long id and String name, you could go with a single projection.","title":"Calling country API returns whole database in spring boot instead of only countries","body":"<p>@Mahadi Hasan I've checked your code.</p>\n<p>First of all, you should write some REST methods solving your problem for the web application:</p>\n<pre><code>@GetMapping(&quot;/countries&quot;)\npublic List&lt;CountryView&gt; getAllCountries()\n{\n    ...\n}\n\n@GetMapping(&quot;/countries/{id}/states&quot;)\npublic List&lt;StateView&gt; getStatesByCountry(@PathVariable(&quot;id&quot;) String countryId)\n{\n    ...\n}\n\n@GetMapping(&quot;/states/{id}/cities&quot;)\npublic List&lt;CityView&gt; getCitiesByCountry(@PathVariable(&quot;id&quot;) Long stateId)\n{\n    ...\n}\n</code></pre>\n<p>So, now we know what we want from the database. We could use projections to exactly fetch this data. Projections are a means to directly wrap the results from queries into specialized DTOs.</p>\n<p>Finally I found a proper solution:</p>\n<h1>Repository methods:</h1>\n<pre><code>List&lt;CountryView&gt; findAllBy(); // The 'By' is necessary to differentiate from findAll()\n\nList&lt;StateView&gt; findByCountry_countryId(String id); // The _ is necessary to prevent from searching a property countryCountryId. We want country.countrId instead.\n\nList&lt;CityView&gt; findByState_stateId(Long id); // Same as above here\n</code></pre>\n<p>First I tried with unidirectional relationships. This led to a somewhat inefficient approach because I had to write a query with a JOIN. I found out that this works better with bidirectional relationships as you have foreseen in your entities already.</p>\n<h1>Projections</h1>\n<pre><code>public interface CountryView {\n    String getCountryId();\n    String getCountry();\n}\n\npublic interface StateView {\n    Long getStateId();\n    String getState();\n}\n\npublic interface CityView {\n    Long getCiyId();\n    String getCity();\n}\n</code></pre>\n<p>Now you can fill in the repository calls into the controller code. I omit the service layer here. You'll manage this for your own.</p>\n<p>If you enable SQL logging you'll see that you get simple efficient queries.</p>\n<p>Next you should consider to use the same name and type for your ids and names. If your entities would each have a Long id and String name, you could go with a single projection.</p>\n"}],"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76858802,"answer_count":1,"score":0,"last_activity_date":1691557793,"creation_date":1691489766,"question_id":76858587,"body_markdown":"I want to return only countries from country table by calling an API in spring boot. But it returns all the countries along with all the states and cities related with every country and city in the world. Here&#39;s my code. \r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\npublic class Country {\r\n    @Id\r\n    @Column (name = &quot;countryid&quot;)\r\n    private String countryId;\r\n    @Column (name = &quot;country&quot;)\r\n    private String country;\r\n\r\n    @OneToMany(mappedBy = &quot;country&quot;, cascade = CascadeType.ALL, orphanRemoval = true )\r\n    @JsonManagedReference\r\n    private List&lt;State&gt;states = new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\n```\r\npublic interface CountryRepository extends JpaRepository&lt;Country, String&gt; {\r\n}\r\n```\r\n\r\n```\r\n@Service\r\npublic class CountryService {\r\n    @Autowired\r\n    CountryRepository countryRepository;\r\n\r\n    public List&lt;Country&gt; getallCountries(){\r\n\r\n        return countryRepository.findAll();\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/country&quot;)\r\n@CrossOrigin(origins = &quot;http://localhost:8080&quot;, allowCredentials = &quot;true&quot;)\r\n\r\npublic class CountryController {\r\n    @Autowired\r\n    CountryService countryService;\r\n\r\n    @GetMapping\r\n    List&lt;Country&gt; getAllCountries(){\r\n\r\n        return  countryService.getallCountries();\r\n    }\r\n}\r\n```\r\nWhen I called **http://localhost:8080/country**, it returned the **whole database**. \r\n\r\nThis is my country table and I want to return only country column by calling the api above. How to do that? \r\n\r\n| countryid | country |\r\n| -------- | -------- |\r\n| BRA   | Brazil  |\r\n| CHN   | China   |\r\n| IND   | India   |\r\n| USA   | USA     |\r\n","title":"Calling country API returns whole database in spring boot instead of only countries","body":"<p>I want to return only countries from country table by calling an API in spring boot. But it returns all the countries along with all the states and cities related with every country and city in the world. Here's my code.</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class Country {\n    @Id\n    @Column (name = &quot;countryid&quot;)\n    private String countryId;\n    @Column (name = &quot;country&quot;)\n    private String country;\n\n    @OneToMany(mappedBy = &quot;country&quot;, cascade = CascadeType.ALL, orphanRemoval = true )\n    @JsonManagedReference\n    private List&lt;State&gt;states = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<pre><code>public interface CountryRepository extends JpaRepository&lt;Country, String&gt; {\n}\n</code></pre>\n<pre><code>@Service\npublic class CountryService {\n    @Autowired\n    CountryRepository countryRepository;\n\n    public List&lt;Country&gt; getallCountries(){\n\n        return countryRepository.findAll();\n    }\n}\n</code></pre>\n<pre><code>@RestController\n@RequestMapping(&quot;/country&quot;)\n@CrossOrigin(origins = &quot;http://localhost:8080&quot;, allowCredentials = &quot;true&quot;)\n\npublic class CountryController {\n    @Autowired\n    CountryService countryService;\n\n    @GetMapping\n    List&lt;Country&gt; getAllCountries(){\n\n        return  countryService.getallCountries();\n    }\n}\n</code></pre>\n<p>When I called <strong>http://localhost:8080/country</strong>, it returned the <strong>whole database</strong>.</p>\n<p>This is my country table and I want to return only country column by calling the api above. How to do that?</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>countryid</th>\n<th>country</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>BRA</td>\n<td>Brazil</td>\n</tr>\n<tr>\n<td>CHN</td>\n<td>China</td>\n</tr>\n<tr>\n<td>IND</td>\n<td>India</td>\n</tr>\n<tr>\n<td>USA</td>\n<td>USA</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","tree"],"comments":[{"owner":{"account_id":55508,"reputation":12373,"user_id":166247,"display_name":"Ashalynd"},"score":2,"creation_date":1381604591,"post_id":19338009,"comment_id":28647885,"body_markdown":"just traverse all the children from left to right, the rest is the same","body":"just traverse all the children from left to right, the rest is the same"},{"owner":{"account_id":2134591,"reputation":24672,"user_id":1894684,"accept_rate":80,"display_name":"An SO User"},"score":0,"creation_date":1381604764,"post_id":19338009,"comment_id":28647935,"body_markdown":"@Ashalynd Please have a look at my answer","body":"@Ashalynd Please have a look at my answer"},{"owner":{"account_id":55508,"reputation":12373,"user_id":166247,"display_name":"Ashalynd"},"score":1,"creation_date":1381604859,"post_id":19338009,"comment_id":28647967,"body_markdown":"yes, that was what I meant","body":"yes, that was what I meant"}],"answers":[{"tags":[],"owner":{"account_id":2134591,"reputation":24672,"user_id":1894684,"accept_rate":80,"display_name":"An SO User"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1381605060,"creation_date":1381604749,"answer_id":19338057,"question_id":19338009,"body_markdown":"In a non-binary tree, there will be a `Vector` or some other structure that has references to all the children. Make a recursive method as so:  \r\n\r\n    public void traverse(Node child){ // post order traversal\r\n    \tfor(Node each : child.getChildren()){\r\n    \t\ttraverse(each);\r\n    \t}\r\n    \tthis.printData();\r\n    }\r\n\r\nSomething along those lines.\r\n","title":"traversing a non binary tree in java","body":"<p>In a non-binary tree, there will be a <code>Vector</code> or some other structure that has references to all the children. Make a recursive method as so:  </p>\n\n<pre><code>public void traverse(Node child){ // post order traversal\n    for(Node each : child.getChildren()){\n        traverse(each);\n    }\n    this.printData();\n}\n</code></pre>\n\n<p>Something along those lines.</p>\n"},{"tags":[],"owner":{"account_id":75104,"reputation":12828,"user_id":1025963,"accept_rate":94,"display_name":"Joseph"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1381604762,"creation_date":1381604762,"answer_id":19338059,"question_id":19338009,"body_markdown":"You&#39;ll need to use recursion since you can&#39;t determine how many children are at each node (breadth) or how far the tree goes (depth). Depending on how you want to traverse, you can use  [Breadth-first-search](http://en.wikipedia.org/wiki/Breadth-first_search) or [Depth-first-search](http://en.wikipedia.org/wiki/Depth-first_search). \r\n\r\nThere is a ton of information on this topic, so give it an attempt to implement one of these recursive methods and please come back if you have trouble along the way!","title":"traversing a non binary tree in java","body":"<p>You'll need to use recursion since you can't determine how many children are at each node (breadth) or how far the tree goes (depth). Depending on how you want to traverse, you can use  <a href=\"http://en.wikipedia.org/wiki/Breadth-first_search\">Breadth-first-search</a> or <a href=\"http://en.wikipedia.org/wiki/Depth-first_search\">Depth-first-search</a>. </p>\n\n<p>There is a ton of information on this topic, so give it an attempt to implement one of these recursive methods and please come back if you have trouble along the way!</p>\n"},{"tags":[],"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1492953377,"creation_date":1381604813,"answer_id":19338066,"question_id":19338009,"body_markdown":"Well, when traversing a binary tree, in preorder, you visit the parent node, then recursively traverse the left subtree then recursively traverse the right subtree. With a tree with more than two children, you recursively traverse the subtrees headed by each children. You would do the recursive calls in a for loop.","title":"traversing a non binary tree in java","body":"<p>Well, when traversing a binary tree, in preorder, you visit the parent node, then recursively traverse the left subtree then recursively traverse the right subtree. With a tree with more than two children, you recursively traverse the subtrees headed by each children. You would do the recursive calls in a for loop.</p>\n"},{"tags":[],"owner":{"account_id":162919,"reputation":53263,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1381608825,"creation_date":1381608825,"answer_id":19338755,"question_id":19338009,"body_markdown":"The algorithm for pre-post order is the same as a binary tree.  \r\nThere is no such thing as in-order traversal for a general tree i.e. does not make sense (unless *you* define some order)","title":"traversing a non binary tree in java","body":"<p>The algorithm for pre-post order is the same as a binary tree.<br>\nThere is no such thing as in-order traversal for a general tree i.e. does not make sense (unless <em>you</em> define some order)</p>\n"}],"owner":{"account_id":2632272,"reputation":237,"user_id":2277918,"accept_rate":0,"display_name":"user2277918"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28970,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"answer_count":4,"score":16,"last_activity_date":1691557498,"creation_date":1381604445,"question_id":19338009,"body_markdown":"I have a tree which is a non-binary tree and each node has more than 2 children.\r\n\r\nI am looking for an algorithm to traverse the tree and print nodes, I am really new to learning data structure.\r\n\r\nI know how to traverse a binary tree but I get lost when it comes to traversing a non-binary tree.\r\n\r\nCould anyone give me a hint on how may I change the binary-tree traversal algorithm into a non-binary-tree traversal?\r\n\r\nAssuming that we have the Binary tree traversal code using the DFS algorithm pre-order (Root-Left-Right).\r\n\r\n    public static class Node {\r\n            private Integer val;\r\n            private Node left;\r\n            private Node right;\r\n    // setters and getters\r\n    }\r\n    \r\n    public static void dfsPreOrderTraverseByRecursion(Node root) {\r\n        if(root!=null) {\r\n            System.out.println(root.getVal());\r\n            dfsPreOrderTraverseByRecursion(root.getLeft());\r\n            dfsPreOrderTraverseByRecursion(root.getRight());\r\n        }\r\n    }\r\n\r\n\r\nAnd this binary-tree \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe above code should print it like this : \r\n\r\n    0\r\n    1\r\n    11\r\n    12\r\n    121\r\n    1211\r\n    122\r\n    2\r\n    21\r\n\r\nIn the case of the non-binary tree.\r\nI need to modify the above code to traverse this tree in a similar way (Root-Left....Right)\r\n[![enter image description here][2]][2]\r\n\r\nWith the new class Node as follows \r\n\r\n    public static class Node {\r\n            private Integer val;\r\n            private List&lt;Node&gt; children;\r\n    // setters and getters\r\n    }\r\n\r\n\r\nAnd print the tree like this: \r\n\r\n    0\r\n    1\r\n    6\r\n    7\r\n    11\r\n    12\r\n    13\r\n    2\r\n    8\r\n    3\r\n    9\r\n    10\r\n    14\r\n    4\r\n\r\n  [1]: https://i.stack.imgur.com/QGzgx.png\r\n  [2]: https://i.stack.imgur.com/q2WpU.png","title":"traversing a non binary tree in java","body":"<p>I have a tree which is a non-binary tree and each node has more than 2 children.</p>\n<p>I am looking for an algorithm to traverse the tree and print nodes, I am really new to learning data structure.</p>\n<p>I know how to traverse a binary tree but I get lost when it comes to traversing a non-binary tree.</p>\n<p>Could anyone give me a hint on how may I change the binary-tree traversal algorithm into a non-binary-tree traversal?</p>\n<p>Assuming that we have the Binary tree traversal code using the DFS algorithm pre-order (Root-Left-Right).</p>\n<pre><code>public static class Node {\n        private Integer val;\n        private Node left;\n        private Node right;\n// setters and getters\n}\n\npublic static void dfsPreOrderTraverseByRecursion(Node root) {\n    if(root!=null) {\n        System.out.println(root.getVal());\n        dfsPreOrderTraverseByRecursion(root.getLeft());\n        dfsPreOrderTraverseByRecursion(root.getRight());\n    }\n}\n</code></pre>\n<p>And this binary-tree</p>\n<p><a href=\"https://i.stack.imgur.com/QGzgx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QGzgx.png\" alt=\"enter image description here\" /></a></p>\n<p>The above code should print it like this :</p>\n<pre><code>0\n1\n11\n12\n121\n1211\n122\n2\n21\n</code></pre>\n<p>In the case of the non-binary tree.\nI need to modify the above code to traverse this tree in a similar way (Root-Left....Right)\n<a href=\"https://i.stack.imgur.com/q2WpU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q2WpU.png\" alt=\"enter image description here\" /></a></p>\n<p>With the new class Node as follows</p>\n<pre><code>public static class Node {\n        private Integer val;\n        private List&lt;Node&gt; children;\n// setters and getters\n}\n</code></pre>\n<p>And print the tree like this:</p>\n<pre><code>0\n1\n6\n7\n11\n12\n13\n2\n8\n3\n9\n10\n14\n4\n</code></pre>\n"},{"tags":["java","spring","drools"],"owner":{"account_id":24281031,"reputation":27,"user_id":18227544,"display_name":"ignaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691556145,"creation_date":1691556145,"question_id":76864635,"body_markdown":"I am using drools version 5.3.0, while processing the transactions the Tomcat container stopped working. Below is the loading error message.\r\nPlease help what could be the reason for the error? \r\n\r\n&lt;code&gt;\r\norg.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading Illegal access: this web application instance has been stopped already. \r\nCould not load [org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl]. \r\nThe following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n \r\njava.lang.IllegalStateException: Illegal Access: this web application instance has beem stopped already. \r\nCould not load [org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl]. \r\nThe following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n \r\nat org.apache.catalina.loader.webappClassLoaderBase.checkStateForResourceLoading (WebappClassLoaderBase.java:1435) \r\nat org.apache.catalina.loader.WebappClassLoaderBase.checkStateForClassLoading(WebappClassLoaderBase.java:1423)\r\nat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1262) \r\nat org.apache.catalina.loader.webappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1223)\r\nat java.lang.Class.forName0(Native Method)\r\nat java.lang.Class.forName(Class.java:264)\r\nat org.drools.util.ServiceRegistryImpl$ReflectionInstantiator.newInstance(ServiceRegistryImpl.java:207)\r\nat org.drools.util.ServiceRegistryImpl$ReflectionInstantiator.call(ServiceRegistryImpl.java:202) \r\nat org.drools.util.ServiceRegistryImpl.get(ServiceRegistryImpl.java:159).\r\nat org.drools.runtime.process. ProcessRuntimeFactory.loadProvider(ProcessRuntimeFactory.java:28)\r\nat org.drools.runtime.process.ProcessRuntimeFactory.getProcessRuntimeFactoryService(ProcessRuntimeFactory.java:21)\r\nat org.drools.runtime.process.ProcessRuntimeFactory.newProcessRuntime(ProcessRuntimeFactory.java:12)\r\nat org.drools.common.AbstractworkingMemory.createProcessRuntime(AbstractWorkingMemory.java:340)\r\nat org.drools.common.AbstractworkingMemory.setKnowledgeRuntime(AbstractWorkingMemory.java:1243) \r\nat org.drools.impl.StatefulKnowledgeSessionImpl.&lt;init&gt;(StatefulKnowledgeSessionImpl.java:117)\r\nat org.drools.impl.StatefulKnowledgeSessionImpl.&lt;init&gt;(StatefulKnowledgeSessionImpl.java:109)\r\nat org.drools.reteoo.ReteooRuleBase.newStatefulSession(ReteooRuleBase.java:403)\r\nat org.drools.reteoo.ReteooRuleBase.newStatefulSession(ReteooRuleBase.java:383)\r\nat org.drools.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:176) \r\nat org.drools.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:163)\r\n&lt;/code&gt;","title":"jbpm process terminating web instances","body":"<p>I am using drools version 5.3.0, while processing the transactions the Tomcat container stopped working. Below is the loading error message.\nPlease help what could be the reason for the error?</p>\n<code>\norg.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading Illegal access: this web application instance has been stopped already. \nCould not load [org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl]. \nThe following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n \njava.lang.IllegalStateException: Illegal Access: this web application instance has beem stopped already. \nCould not load [org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl]. \nThe following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n \nat org.apache.catalina.loader.webappClassLoaderBase.checkStateForResourceLoading (WebappClassLoaderBase.java:1435) \nat org.apache.catalina.loader.WebappClassLoaderBase.checkStateForClassLoading(WebappClassLoaderBase.java:1423)\nat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1262) \nat org.apache.catalina.loader.webappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1223)\nat java.lang.Class.forName0(Native Method)\nat java.lang.Class.forName(Class.java:264)\nat org.drools.util.ServiceRegistryImpl$ReflectionInstantiator.newInstance(ServiceRegistryImpl.java:207)\nat org.drools.util.ServiceRegistryImpl$ReflectionInstantiator.call(ServiceRegistryImpl.java:202) \nat org.drools.util.ServiceRegistryImpl.get(ServiceRegistryImpl.java:159).\nat org.drools.runtime.process. ProcessRuntimeFactory.loadProvider(ProcessRuntimeFactory.java:28)\nat org.drools.runtime.process.ProcessRuntimeFactory.getProcessRuntimeFactoryService(ProcessRuntimeFactory.java:21)\nat org.drools.runtime.process.ProcessRuntimeFactory.newProcessRuntime(ProcessRuntimeFactory.java:12)\nat org.drools.common.AbstractworkingMemory.createProcessRuntime(AbstractWorkingMemory.java:340)\nat org.drools.common.AbstractworkingMemory.setKnowledgeRuntime(AbstractWorkingMemory.java:1243) \nat org.drools.impl.StatefulKnowledgeSessionImpl.(StatefulKnowledgeSessionImpl.java:117)\nat org.drools.impl.StatefulKnowledgeSessionImpl.(StatefulKnowledgeSessionImpl.java:109)\nat org.drools.reteoo.ReteooRuleBase.newStatefulSession(ReteooRuleBase.java:403)\nat org.drools.reteoo.ReteooRuleBase.newStatefulSession(ReteooRuleBase.java:383)\nat org.drools.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:176) \nat org.drools.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:163)\n</code>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":11163581,"reputation":1048,"user_id":8192914,"display_name":"ganjaam"},"score":0,"creation_date":1691579207,"post_id":76864608,"comment_id":135509912,"body_markdown":"the drive link you provided is currently inaccessible.","body":"the drive link you provided is currently inaccessible."}],"owner":{"account_id":29160039,"reputation":1,"user_id":22339005,"display_name":"Irshad Madappat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691555693,"creation_date":1691555693,"question_id":76864608,"body_markdown":"I&#39;m trying to figure out a way to layout a series of views around a circle. I need to achieve Recycler view scrolling 360 degree I am attaching my current result. but in this code the arc not scrolling as 360 degree and it giving margin between each items. Kindly help me to fix the issue. Your help will be appreciated.\r\n\r\n\r\n\r\n\r\n```\r\n  @Override\r\n    public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) {\r\n        super.onLayoutChildren(recycler, state);\r\n        fill(recycler, state); // fill with child views based on the current state &amp; position\r\n    }\r\n    \r\n    private void fill(RecyclerView.Recycler recycler, RecyclerView.State state) {\r\n        if (recycler == null || state == null) return;\r\n        detachAndScrapAttachedViews(recycler); \r\n        for(int i = 0; i &lt; getItemCount(); i++)\r\n        {\r\n            View view = recycler.getViewForPosition(i); \r\n            addView(view);\r\n            int viewWidth = (int) pxFromDp(context, 60f);\r\n            int viewHeight = (int) pxFromDp(context, 60f);\r\n            float left = (i * viewWidth) - horizontalOffset;\r\n            float right = left + viewWidth;\r\n            Pair&lt;Integer, Double&gt; top = computeYComponent((left + right) / 2, viewHeight);\r\n            float bottom = top.first + viewHeight;\r\n            double alpha = top.second; \r\n            view.setRotation(((float)(alpha * (180 / Math.PI))) - 85f);\r\n            measureChildWithMargins(view, viewWidth, viewHeight);\r\n            layoutDecoratedWithMargins(view, (int) left, top.first, (int) right, (int) bottom);\r\n        }\r\n        List&lt;RecyclerView.ViewHolder&gt; scrapList = recycler.getScrapList();\r\n        for (RecyclerView.ViewHolder viewHolder : scrapList) {\r\n            recycler.recycleView(viewHolder.itemView);\r\n        }\r\n    }\r\n\r\n    // determines how much you need to push an item downwards\r\n    private Pair&lt;Integer, Double&gt; computeYComponent(float viewCenterX, float h /* height */) {\r\n        int screenWidth = context.getResources().getDisplayMetrics().widthPixels;\r\n        double s = ((double) screenWidth) / 6;\r\n        double radius = (h * h + s * s) / (h * 2); \r\n        double xScreenFraction = (double) viewCenterX / (double) screenWidth;\r\n        double beta = Math.acos(s / radius); \r\n        double curvatureFactor = 1.75; \r\n        double alpha = beta + (curvatureFactor * xScreenFraction * (Math.PI - (0.0 * beta)));\r\n        double yComponent = radius - (radius * Math.sin(alpha)); // vertical component of the position of the circle\r\n        return new Pair&lt;&gt;((int) yComponent, alpha);\r\n    }\r\n    private float pxFromDp(Context context, float dp) {\r\n        return (dp * context.getResources().getDisplayMetrics().density);\r\n    }\r\n```\r\n\r\n\r\nhttps://i.stack.imgur.com/ZDWS3.png\r\n\r\n\r\nExpected Result - https://drive.google.com/file/d/1TGBb4m98J3_IUZBOTfrE2l8QIasLx8u-/view?usp=drive_link","title":"Arc Recyclerview with 360 degree scrolling","body":"<p>I'm trying to figure out a way to layout a series of views around a circle. I need to achieve Recycler view scrolling 360 degree I am attaching my current result. but in this code the arc not scrolling as 360 degree and it giving margin between each items. Kindly help me to fix the issue. Your help will be appreciated.</p>\n<pre><code>  @Override\n    public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) {\n        super.onLayoutChildren(recycler, state);\n        fill(recycler, state); // fill with child views based on the current state &amp; position\n    }\n    \n    private void fill(RecyclerView.Recycler recycler, RecyclerView.State state) {\n        if (recycler == null || state == null) return;\n        detachAndScrapAttachedViews(recycler); \n        for(int i = 0; i &lt; getItemCount(); i++)\n        {\n            View view = recycler.getViewForPosition(i); \n            addView(view);\n            int viewWidth = (int) pxFromDp(context, 60f);\n            int viewHeight = (int) pxFromDp(context, 60f);\n            float left = (i * viewWidth) - horizontalOffset;\n            float right = left + viewWidth;\n            Pair&lt;Integer, Double&gt; top = computeYComponent((left + right) / 2, viewHeight);\n            float bottom = top.first + viewHeight;\n            double alpha = top.second; \n            view.setRotation(((float)(alpha * (180 / Math.PI))) - 85f);\n            measureChildWithMargins(view, viewWidth, viewHeight);\n            layoutDecoratedWithMargins(view, (int) left, top.first, (int) right, (int) bottom);\n        }\n        List&lt;RecyclerView.ViewHolder&gt; scrapList = recycler.getScrapList();\n        for (RecyclerView.ViewHolder viewHolder : scrapList) {\n            recycler.recycleView(viewHolder.itemView);\n        }\n    }\n\n    // determines how much you need to push an item downwards\n    private Pair&lt;Integer, Double&gt; computeYComponent(float viewCenterX, float h /* height */) {\n        int screenWidth = context.getResources().getDisplayMetrics().widthPixels;\n        double s = ((double) screenWidth) / 6;\n        double radius = (h * h + s * s) / (h * 2); \n        double xScreenFraction = (double) viewCenterX / (double) screenWidth;\n        double beta = Math.acos(s / radius); \n        double curvatureFactor = 1.75; \n        double alpha = beta + (curvatureFactor * xScreenFraction * (Math.PI - (0.0 * beta)));\n        double yComponent = radius - (radius * Math.sin(alpha)); // vertical component of the position of the circle\n        return new Pair&lt;&gt;((int) yComponent, alpha);\n    }\n    private float pxFromDp(Context context, float dp) {\n        return (dp * context.getResources().getDisplayMetrics().density);\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ZDWS3.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/ZDWS3.png</a></p>\n<p>Expected Result - <a href=\"https://drive.google.com/file/d/1TGBb4m98J3_IUZBOTfrE2l8QIasLx8u-/view?usp=drive_link\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1TGBb4m98J3_IUZBOTfrE2l8QIasLx8u-/view?usp=drive_link</a></p>\n"},{"tags":["java","yaml","spring-boot-configuration"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":0,"creation_date":1492640514,"post_id":43506319,"comment_id":74068766,"body_markdown":"may be this will help \nhttp://stackoverflow.com/questions/32593014/mapping-list-in-yaml-to-list-of-objects-in-spring-boot","body":"may be this will help  <a href=\"http://stackoverflow.com/questions/32593014/mapping-list-in-yaml-to-list-of-objects-in-spring-boot\" title=\"mapping list in yaml to list of objects in spring boot\">stackoverflow.com/questions/32593014/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1572114341,"creation_date":1492675780,"answer_id":43513778,"question_id":43506319,"body_markdown":"change your yml to   \r\n\r\n    promotionPolicies : \r\n      policies: \r\n        P001NN:\r\n                expiryPeriodInDays: 16\r\n                reusable: true\r\n                resetExpiry: false\r\n        P001YN:\r\n                expiryPeriodInDays: 1\r\n                reusable: true\r\n                resetExpiry: false\r\n        P001NY:\r\n                expiryPeriodInDays: 1\r\n                reusable: false\r\n                resetExpiry: true","title":"Map yaml to object hashmap in SpringBoot","body":"<p>change your yml to   </p>\n\n<pre><code>promotionPolicies : \n  policies: \n    P001NN:\n            expiryPeriodInDays: 16\n            reusable: true\n            resetExpiry: false\n    P001YN:\n            expiryPeriodInDays: 1\n            reusable: true\n            resetExpiry: false\n    P001NY:\n            expiryPeriodInDays: 1\n            reusable: false\n            resetExpiry: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10723862,"reputation":117,"user_id":7892071,"display_name":"Manjunath"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1538365060,"creation_date":1538365060,"answer_id":52584276,"question_id":43506319,"body_markdown":"The problem was with the spaces, the below yml works fine. The spaces after the text and : was required \r\n\r\n    promotionPolicies : \r\n        policies : \r\n            P001NN :\r\n                PromotionPolicy :\r\n                    expiryPeriodInDays: 16\r\n                    reusable: true\r\n                    resetExpiry: false\r\n            P001YN :\r\n                PromotionPolicy :\r\n                    expiryPeriodInDays:1\r\n                    reusable:true\r\n                    resetExpiry:false\r\n            P001NY :\r\n                PromotionPolicy :\r\n                    expiryPeriodInDays:1\r\n                    reusable:false\r\n                    resetExpiry:true","title":"Map yaml to object hashmap in SpringBoot","body":"<p>The problem was with the spaces, the below yml works fine. The spaces after the text and : was required </p>\n\n<pre><code>promotionPolicies : \n    policies : \n        P001NN :\n            PromotionPolicy :\n                expiryPeriodInDays: 16\n                reusable: true\n                resetExpiry: false\n        P001YN :\n            PromotionPolicy :\n                expiryPeriodInDays:1\n                reusable:true\n                resetExpiry:false\n        P001NY :\n            PromotionPolicy :\n                expiryPeriodInDays:1\n                reusable:false\n                resetExpiry:true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2554339,"reputation":537,"user_id":2765978,"accept_rate":67,"display_name":"csf"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1565557315,"creation_date":1565557315,"answer_id":57453589,"question_id":43506319,"body_markdown":" - This worked for me \r\n \r\nYML: \r\n\r\n    property-name: &#39;{\r\n      key1: &quot;value1&quot;,\r\n      key2: &quot;value2&quot;\r\n    }&#39;\r\n\r\nSpring Boot:\r\n\r\n      @Value(&quot;#{${property-name}}&quot;)\r\n      private Map&lt;String,String&gt; myMap;\r\n\r\nfound the answer thanks to : https://relentlesscoding.com/2018/09/09/spring-basics-dynamically-inject-values-with-springs-value/","title":"Map yaml to object hashmap in SpringBoot","body":"<ul>\n<li>This worked for me </li>\n</ul>\n\n<p>YML: </p>\n\n<pre><code>property-name: '{\n  key1: \"value1\",\n  key2: \"value2\"\n}'\n</code></pre>\n\n<p>Spring Boot:</p>\n\n<pre><code>  @Value(\"#{${property-name}}\")\n  private Map&lt;String,String&gt; myMap;\n</code></pre>\n\n<p>found the answer thanks to : <a href=\"https://relentlesscoding.com/2018/09/09/spring-basics-dynamically-inject-values-with-springs-value/\" rel=\"noreferrer\">https://relentlesscoding.com/2018/09/09/spring-basics-dynamically-inject-values-with-springs-value/</a></p>\n"},{"tags":[],"owner":{"account_id":4593918,"reputation":1,"user_id":3726542,"display_name":"Pritesh Pawar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601013700,"creation_date":1601013700,"answer_id":64058658,"question_id":43506319,"body_markdown":"\t\t\tpromotionPolicies : \r\n\t\t\t  policies: \r\n\t\t\t\tP001NN:\r\n\t\t\t\t\t\texpiryPeriodInDays: 16\r\n\t\t\t\t\t\treusable: true\r\n\t\t\t\t\t\tresetExpiry: false\r\n\t\t\t\tP001YN:\r\n\t\t\t\t\t\texpiryPeriodInDays: 1\r\n\t\t\t\t\t\treusable: true\r\n\t\t\t\t\t\tresetExpiry: false\r\n\t\t\t\tP001NY:\r\n\t\t\t\t\t\texpiryPeriodInDays: 1\r\n\t\t\t\t\t\treusable: false\r\n\t\t\t\t\t\tresetExpiry: true\r\n\r\nJava code :\r\n\r\n\t\t\t//Used lambok and spring annotation\r\n\t\t\t@Data\r\n\t\t\t@Configuration\r\n\t\t\t@ConfigurationProperties(prefix = &quot;promotionPolicies&quot;)\r\n\t\t\t@NoArgsConstructor\r\n\t\t\t@AllArgsConstructor\r\n\t\t\tpublic class PromotionPolicies {\r\n\t\t\t\tprivate Map&lt;String, Map&lt;String, String&gt;&gt; policies = new HashMap&lt;&gt;();\r\n\t\t\t}\r\n\r\n\t\t\t\t","title":"Map yaml to object hashmap in SpringBoot","body":"<pre><code>        promotionPolicies : \n          policies: \n            P001NN:\n                    expiryPeriodInDays: 16\n                    reusable: true\n                    resetExpiry: false\n            P001YN:\n                    expiryPeriodInDays: 1\n                    reusable: true\n                    resetExpiry: false\n            P001NY:\n                    expiryPeriodInDays: 1\n                    reusable: false\n                    resetExpiry: true\n</code></pre>\n<p>Java code :</p>\n<pre><code>        //Used lambok and spring annotation\n        @Data\n        @Configuration\n        @ConfigurationProperties(prefix = &quot;promotionPolicies&quot;)\n        @NoArgsConstructor\n        @AllArgsConstructor\n        public class PromotionPolicies {\n            private Map&lt;String, Map&lt;String, String&gt;&gt; policies = new HashMap&lt;&gt;();\n        }\n\n            \n</code></pre>\n"},{"tags":[],"owner":{"account_id":21843877,"reputation":3,"user_id":16441725,"display_name":"Samson Emelyanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691555593,"creation_date":1691243966,"answer_id":76841987,"question_id":43506319,"body_markdown":"I recently solved a similar problem. In my case a default, i.e. no argument, constructor was required for `PromotionPolicy` class.","title":"Map yaml to object hashmap in SpringBoot","body":"<p>I recently solved a similar problem. In my case a default, i.e. no argument, constructor was required for <code>PromotionPolicy</code> class.</p>\n"}],"owner":{"account_id":10723862,"reputation":117,"user_id":7892071,"display_name":"Manjunath"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45481,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"answer_count":5,"score":10,"last_activity_date":1691555593,"creation_date":1492637043,"question_id":43506319,"body_markdown":"I am trying to Map the yml file to a HashMap with String Key and PromotionPolicy value in my Spring boot application and using the default spring boot implementation to parse the values, but the PromotionPolicy object only contains the default values [0, false, false] for all instances when I try to read values from the Map. \r\n\r\nMy yml is :\r\n \r\n    promotionPolicies : \r\n        policies: \r\n            P001NN:\r\n                PromotionPolicy:\r\n                    expiryPeriodInDays: 16\r\n                    reusable: true\r\n                    resetExpiry: false\r\n            P001YN:\r\n                PromotionPolicy:\r\n                    expiryPeriodInDays:1\r\n                    reusable:true\r\n                    resetExpiry:false\r\n            P001NY:\r\n                PromotionPolicy:\r\n                    expiryPeriodInDays:1\r\n                    reusable:false\r\n                    resetExpiry:true\r\n\r\nThe Model I have is : \r\n\r\n    public class PromotionPolicy {\r\n\r\n\tprivate int expiryPeriodInDays;\r\n\tprivate boolean reusable;\r\n\tprivate boolean resetExpiry;\r\n\t\r\n\tpublic int getExpiryPeriodInDays() {\r\n\t\treturn expiryPeriodInDays;\r\n\t}\r\n\tpublic void setExpiryPeriodInDays(int expiryPeriodInDays) {\r\n\t\tthis.expiryPeriodInDays = expiryPeriodInDays;\r\n\t}\r\n\tpublic boolean isReusable() {\r\n\t\treturn reusable;\r\n\t}\r\n\tpublic void setReusable(boolean reusable) {\r\n\t\tthis.reusable = reusable;\r\n\t}\r\n\tpublic boolean isResetExpiry() {\r\n\t\treturn resetExpiry;\r\n\t}\r\n\tpublic void setResetExpiry(boolean resetExpiry) {\r\n\t\tthis.resetExpiry = resetExpiry;\r\n\t}\r\n\t\r\n    }\r\n\r\nThe component java class is as below:\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;promotionPolicies&quot;)\r\n    @EnableConfigurationProperties\r\n    @Component\r\n    public class PromotionPolicyConfig {\r\n\r\n\tprivate Map&lt;String, PromotionPolicy&gt; policies = new HashMap&lt;String, PromotionPolicy&gt;();\r\n\r\n\tpublic void setPolicies(Map&lt;String, PromotionPolicy&gt; policies) {\r\n\t\tthis.policies = policies;\r\n\t}\r\n\r\n\tpublic Map&lt;String, PromotionPolicy&gt; getPolicies() {\r\n\t\treturn policies;\r\n\t}\r\n\r\n    }\r\n\r\n\r\nTrying to display values here : \r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/test&quot;)\r\n    public class LoyaltyServiceController {\r\n\r\n\t@Autowired\r\n\tPromotionPolicyConfig promotionPolicyConfig;\r\n\r\n    @RequestMapping(value = &quot;/try&quot;)\r\n    public String tryThis() {\r\n    \tfor (Entry&lt;String, PromotionPolicy&gt; entry : promotionPolicyConfig.getPolicies().entrySet()) {\r\n    \t\tSystem.out.print(entry.getKey() + &quot; : &quot;);\r\n    \t\tSystem.out.print(entry.getValue() + &quot; : &quot;);\r\n    \t\tSystem.out.print(entry.getValue().getExpiryPeriodInDays()  + &quot; : &quot;);\r\n    \t\tSystem.out.print(entry.getValue().isResetExpiry()  + &quot; : &quot;);\r\n    \t\tSystem.out.println(entry.getValue().isReusable()  + &quot; : &quot;);\r\n    \t}\r\n    }\r\n\r\nMy Output is as below:\r\n\r\n    P001NN : com.expedia.www.host.loyalty.model.PromotionPolicy@63a1c99b : 0 : false : false : \r\n    P001YN : com.expedia.www.host.loyalty.model.PromotionPolicy@7892b6b6 : 0 : false : false : \r\n    P001NY : com.expedia.www.host.loyalty.model.PromotionPolicy@459928ab : 0 : false : false : \r\n\r\nwhile I expected the result to contain the values in my yml. \r\nI also tried removing the line &quot;PromotionPolicy:&quot; in my yml, but no luck. \r\n\r\nRequest help understand how can I Map the yml into the Map of custom objects. ","title":"Map yaml to object hashmap in SpringBoot","body":"<p>I am trying to Map the yml file to a HashMap with String Key and PromotionPolicy value in my Spring boot application and using the default spring boot implementation to parse the values, but the PromotionPolicy object only contains the default values [0, false, false] for all instances when I try to read values from the Map. </p>\n\n<p>My yml is :</p>\n\n<pre><code>promotionPolicies : \n    policies: \n        P001NN:\n            PromotionPolicy:\n                expiryPeriodInDays: 16\n                reusable: true\n                resetExpiry: false\n        P001YN:\n            PromotionPolicy:\n                expiryPeriodInDays:1\n                reusable:true\n                resetExpiry:false\n        P001NY:\n            PromotionPolicy:\n                expiryPeriodInDays:1\n                reusable:false\n                resetExpiry:true\n</code></pre>\n\n<p>The Model I have is : </p>\n\n<pre><code>public class PromotionPolicy {\n\nprivate int expiryPeriodInDays;\nprivate boolean reusable;\nprivate boolean resetExpiry;\n\npublic int getExpiryPeriodInDays() {\n    return expiryPeriodInDays;\n}\npublic void setExpiryPeriodInDays(int expiryPeriodInDays) {\n    this.expiryPeriodInDays = expiryPeriodInDays;\n}\npublic boolean isReusable() {\n    return reusable;\n}\npublic void setReusable(boolean reusable) {\n    this.reusable = reusable;\n}\npublic boolean isResetExpiry() {\n    return resetExpiry;\n}\npublic void setResetExpiry(boolean resetExpiry) {\n    this.resetExpiry = resetExpiry;\n}\n\n}\n</code></pre>\n\n<p>The component java class is as below:</p>\n\n<pre><code>@Configuration\n@ConfigurationProperties(prefix = \"promotionPolicies\")\n@EnableConfigurationProperties\n@Component\npublic class PromotionPolicyConfig {\n\nprivate Map&lt;String, PromotionPolicy&gt; policies = new HashMap&lt;String, PromotionPolicy&gt;();\n\npublic void setPolicies(Map&lt;String, PromotionPolicy&gt; policies) {\n    this.policies = policies;\n}\n\npublic Map&lt;String, PromotionPolicy&gt; getPolicies() {\n    return policies;\n}\n\n}\n</code></pre>\n\n<p>Trying to display values here : </p>\n\n<pre><code>@RestController\n@RequestMapping(\"/test\")\npublic class LoyaltyServiceController {\n\n@Autowired\nPromotionPolicyConfig promotionPolicyConfig;\n\n@RequestMapping(value = \"/try\")\npublic String tryThis() {\n    for (Entry&lt;String, PromotionPolicy&gt; entry : promotionPolicyConfig.getPolicies().entrySet()) {\n        System.out.print(entry.getKey() + \" : \");\n        System.out.print(entry.getValue() + \" : \");\n        System.out.print(entry.getValue().getExpiryPeriodInDays()  + \" : \");\n        System.out.print(entry.getValue().isResetExpiry()  + \" : \");\n        System.out.println(entry.getValue().isReusable()  + \" : \");\n    }\n}\n</code></pre>\n\n<p>My Output is as below:</p>\n\n<pre><code>P001NN : com.expedia.www.host.loyalty.model.PromotionPolicy@63a1c99b : 0 : false : false : \nP001YN : com.expedia.www.host.loyalty.model.PromotionPolicy@7892b6b6 : 0 : false : false : \nP001NY : com.expedia.www.host.loyalty.model.PromotionPolicy@459928ab : 0 : false : false : \n</code></pre>\n\n<p>while I expected the result to contain the values in my yml. \nI also tried removing the line \"PromotionPolicy:\" in my yml, but no luck. </p>\n\n<p>Request help understand how can I Map the yml into the Map of custom objects. </p>\n"},{"tags":["java","android","sketchware"],"comments":[{"owner":{"account_id":2225264,"reputation":3565,"user_id":1972388,"accept_rate":77,"display_name":"DevWithZachary"},"score":2,"creation_date":1631615742,"post_id":69176029,"comment_id":122264795,"body_markdown":"The only way your going to be able to do that is to ping a server. Until you actually try to send/receive data your not going to know the speed/stability of a connection","body":"The only way your going to be able to do that is to ping a server. Until you actually try to send/receive data your not going to know the speed/stability of a connection"},{"owner":{"account_id":15831946,"reputation":114,"user_id":11423000,"display_name":"Yo Daniel"},"score":0,"creation_date":1631615990,"post_id":69176029,"comment_id":122264894,"body_markdown":"Thanks I lookup pinging I think it will be able to slove my problem.","body":"Thanks I lookup pinging I think it will be able to slove my problem."},{"owner":{"account_id":11907697,"reputation":732,"user_id":8713823,"display_name":"Islam Alshnawey"},"score":1,"creation_date":1631616483,"post_id":69176029,"comment_id":122265083,"body_markdown":"kindly Find This Solution,  its about pinging, https://medium.com/dsc-alexandria/implementing-internet-connectivity-checker-in-android-apps-bf28230c4e86","body":"kindly Find This Solution,  its about pinging, <a href=\"https://medium.com/dsc-alexandria/implementing-internet-connectivity-checker-in-android-apps-bf28230c4e86\" rel=\"nofollow noreferrer\">medium.com/dsc-alexandria/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":18635268,"reputation":99,"user_id":13582324,"display_name":"Alireza Abbasian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691555121,"creation_date":1631618875,"answer_id":69176909,"question_id":69176029,"body_markdown":"check internet coonnection with this function:\r\n\r\n    Boolean hasInternet(Context context) {\r\n        ConnectivityManager connectivityManager =\r\n                (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n\r\n            Network activeNetwork = connectivityManager.getActiveNetwork();\r\n            NetworkCapabilities capabilities = connectivityManager.getNetworkCapabilities(activeNetwork);\r\n\r\n            if (capabilities != null) {\r\n                if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)) return true;\r\n                else if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR)) return true;\r\n                else if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET)) return true;\r\n                else return false;\r\n            }\r\n\r\n        } else {\r\n            try {\r\n                NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n                return networkInfo != null &amp;&amp; networkInfo.isConnected();\r\n            } catch (NullPointerException e) {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    }","title":"Android how do I check internet connection","body":"<p>check internet coonnection with this function:</p>\n<pre><code>Boolean hasInternet(Context context) {\n    ConnectivityManager connectivityManager =\n            (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n\n        Network activeNetwork = connectivityManager.getActiveNetwork();\n        NetworkCapabilities capabilities = connectivityManager.getNetworkCapabilities(activeNetwork);\n\n        if (capabilities != null) {\n            if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)) return true;\n            else if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR)) return true;\n            else if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET)) return true;\n            else return false;\n        }\n\n    } else {\n        try {\n            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n            return networkInfo != null &amp;&amp; networkInfo.isConnected();\n        } catch (NullPointerException e) {\n            return false;\n        }\n    }\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":15831946,"reputation":114,"user_id":11423000,"display_name":"Yo Daniel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2890,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691555121,"creation_date":1631614937,"question_id":69176029,"body_markdown":"I want to be able to get a user internet connection. I have tried\r\n\r\n    boolean connected = false;\r\n        try {\r\n            ConnectivityManager cm = (ConnectivityManager)getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo nInfo = cm.getActiveNetworkInfo();\r\n            connected = nInfo != null &amp;&amp; nInfo.isAvailable() &amp;&amp; nInfo.isConnected();\r\n            return connected;\r\n        } catch (Exception e) {\r\n            Log.e(&quot;Connectivity Exception&quot;, e.getMessage());\r\n        }\r\n        return connected;\r\n   \r\nBut this only gets mobile data and wifi connection status, if the user has an expired data plan or doesn&#39;t even have any data plan I will not be able to know.\r\nI want to know the internet status before making a server call instead of making a server and running in a runout time error.\r\n\r\nPlease help I have checked stack overflow, but I keep getting the same answer.","title":"Android how do I check internet connection","body":"<p>I want to be able to get a user internet connection. I have tried</p>\n<pre><code>boolean connected = false;\n    try {\n        ConnectivityManager cm = (ConnectivityManager)getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo nInfo = cm.getActiveNetworkInfo();\n        connected = nInfo != null &amp;&amp; nInfo.isAvailable() &amp;&amp; nInfo.isConnected();\n        return connected;\n    } catch (Exception e) {\n        Log.e(&quot;Connectivity Exception&quot;, e.getMessage());\n    }\n    return connected;\n</code></pre>\n<p>But this only gets mobile data and wifi connection status, if the user has an expired data plan or doesn't even have any data plan I will not be able to know.\nI want to know the internet status before making a server call instead of making a server and running in a runout time error.</p>\n<p>Please help I have checked stack overflow, but I keep getting the same answer.</p>\n"},{"tags":["java","selenium","google-chrome","jenkins","selenium-chromedriver"],"comments":[{"owner":{"account_id":8755351,"reputation":2582,"user_id":6547113,"display_name":"anasmi"},"score":1,"creation_date":1572447672,"post_id":58628081,"comment_id":103563881,"body_markdown":"Does this answer your question? [Selenium UnreachableBrowserException - &quot;Could not start a new session&quot; in SoapUI Groovy TestStep](https://stackoverflow.com/questions/30397043/selenium-unreachablebrowserexception-could-not-start-a-new-session-in-soapui)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/30397043/selenium-unreachablebrowserexception-could-not-start-a-new-session-in-soapui\">Selenium UnreachableBrowserException - &quot;Could not start a new session&quot; in SoapUI Groovy TestStep</a>"},{"owner":{"account_id":10829360,"reputation":780,"user_id":7964299,"accept_rate":80,"display_name":"Naveen"},"score":0,"creation_date":1572450150,"post_id":58628081,"comment_id":103565293,"body_markdown":"Check the browser version and the driver version you are using. Both should be compatible with the Selenium version.","body":"Check the browser version and the driver version you are using. Both should be compatible with the Selenium version."}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1572467643,"creation_date":1572467643,"answer_id":58633257,"question_id":58628081,"body_markdown":"This error message...\r\n\r\n\torg.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. \r\n\tPossible causes are invalid address of the remote server or browser start-up failure.\r\n\r\n...implies that the **ChromeDriver** was unable to initiate/spawn a new **WebBrowser** i.e. **Chrome Browser** session.\r\n\r\nYour main issue possibly is the **incompatibility** between the version of the binaries you are using as follows:\r\n\r\n- You are using _chromedriver=2.41_ \r\n- Release Notes of [_chromedriver=2.41_](https://chromedriver.storage.googleapis.com/2.41/notes.txt) clearly mentions the following :\r\n\r\n&gt;Supports **Chrome v67-69**\r\n\r\n- You are using _chrome= 68.0_\r\n- Your _Selenium Client_ version is **unknown** to us.\r\n- Your _JDK version_ is **unknown** to us.\r\n\r\nSo there might be a mismatch between the _JDK version_ , _Selenium Client version_ , _ChromeDriver v2.41_ and the _Chrome Browser v68.0_\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nEnsure that:\r\n\r\n- _JDK_ is upgraded to  current levels [JDK 8u222](https://www.oracle.com/technetwork/java/javase/downloads/index.html).\r\n- _Selenium_ is upgraded to  current levels [Version 3.141.59](https://docs.seleniumhq.org/download/).\r\n- _ChromeDriver_ is updated to  current [ChromeDriver v78.0](https://chromedriver.storage.googleapis.com/index.html?path=78.0.3904.70/) level.\r\n- _Chrome_ is updated to  current _Chrome Version 78.0_ level. (as per [ChromeDriver v78.0 release notes](https://chromedriver.storage.googleapis.com/78.0.3904.70/notes.txt))\r\n- _Clean_ your _Project Workspace_ through your _IDE_ and _Rebuild_ your project with required dependencies only.\r\n- If your base _Web Client_ version is too old, then uninstall it and install a recent GA and released version of _Web Client_.\r\n- Take a _System Reboot_.\r\n- Execute your `@Test` as **non-root** user.","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>This error message...</p>\n\n<pre><code>org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. \nPossible causes are invalid address of the remote server or browser start-up failure.\n</code></pre>\n\n<p>...implies that the <strong>ChromeDriver</strong> was unable to initiate/spawn a new <strong>WebBrowser</strong> i.e. <strong>Chrome Browser</strong> session.</p>\n\n<p>Your main issue possibly is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n\n<ul>\n<li>You are using <em>chromedriver=2.41</em> </li>\n<li>Release Notes of <a href=\"https://chromedriver.storage.googleapis.com/2.41/notes.txt\" rel=\"nofollow noreferrer\"><em>chromedriver=2.41</em></a> clearly mentions the following :</li>\n</ul>\n\n<blockquote>\n  <p>Supports <strong>Chrome v67-69</strong></p>\n</blockquote>\n\n<ul>\n<li>You are using <em>chrome= 68.0</em></li>\n<li>Your <em>Selenium Client</em> version is <strong>unknown</strong> to us.</li>\n<li>Your <em>JDK version</em> is <strong>unknown</strong> to us.</li>\n</ul>\n\n<p>So there might be a mismatch between the <em>JDK version</em> , <em>Selenium Client version</em> , <em>ChromeDriver v2.41</em> and the <em>Chrome Browser v68.0</em></p>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>Ensure that:</p>\n\n<ul>\n<li><em>JDK</em> is upgraded to  current levels <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">JDK 8u222</a>.</li>\n<li><em>Selenium</em> is upgraded to  current levels <a href=\"https://docs.seleniumhq.org/download/\" rel=\"nofollow noreferrer\">Version 3.141.59</a>.</li>\n<li><em>ChromeDriver</em> is updated to  current <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=78.0.3904.70/\" rel=\"nofollow noreferrer\">ChromeDriver v78.0</a> level.</li>\n<li><em>Chrome</em> is updated to  current <em>Chrome Version 78.0</em> level. (as per <a href=\"https://chromedriver.storage.googleapis.com/78.0.3904.70/notes.txt\" rel=\"nofollow noreferrer\">ChromeDriver v78.0 release notes</a>)</li>\n<li><em>Clean</em> your <em>Project Workspace</em> through your <em>IDE</em> and <em>Rebuild</em> your project with required dependencies only.</li>\n<li>If your base <em>Web Client</em> version is too old, then uninstall it and install a recent GA and released version of <em>Web Client</em>.</li>\n<li>Take a <em>System Reboot</em>.</li>\n<li>Execute your <code>@Test</code> as <strong>non-root</strong> user.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":16353733,"reputation":21,"user_id":11811482,"display_name":"Saurabh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647763287,"creation_date":1647763287,"answer_id":71545058,"question_id":58628081,"body_markdown":"The reason why this happens.\r\n\r\n - When the test does not get executed within 3 minutes(Default timing) then it will throw the exception of browser startup failure.\r\n\r\nSolution:-\r\nChange the way to create RemoteWebDriver.\r\n\r\n      ClientConfig config = ClientConfig.defaultConfig().connectionTimeout(Duration.ofMinutes(20))\r\n    .readTimeout(Duration.ofMinutes(20)); // I change this 3 minute(Default) to 20 minutes.\r\n\r\n    WebDriver remoteWebDriver = RemoteWebDriver.builder().oneOf(caps).address(gridUrl).config(config).build(); // now you can use this remoteWebDriver.\r\n\r\n","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>The reason why this happens.</p>\n<ul>\n<li>When the test does not get executed within 3 minutes(Default timing) then it will throw the exception of browser startup failure.</li>\n</ul>\n<p>Solution:-\nChange the way to create RemoteWebDriver.</p>\n<pre><code>  ClientConfig config = ClientConfig.defaultConfig().connectionTimeout(Duration.ofMinutes(20))\n.readTimeout(Duration.ofMinutes(20)); // I change this 3 minute(Default) to 20 minutes.\n\nWebDriver remoteWebDriver = RemoteWebDriver.builder().oneOf(caps).address(gridUrl).config(config).build(); // now you can use this remoteWebDriver.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17295469,"reputation":137,"user_id":12526239,"display_name":"Yasin Bekar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658983241,"creation_date":1658983241,"answer_id":73147358,"question_id":58628081,"body_markdown":"I have checked that the:\r\n   - path is incorrect, \r\n   - the path had .exe extension for mac driver\r\n   - typo on the path, I had a comma instead of dot webdriver.chrome,driver\r\n\r\nLastly, it could be the compatibility issue but all worked fine after checking above items","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>I have checked that the:</p>\n<ul>\n<li>path is incorrect,</li>\n<li>the path had .exe extension for mac driver</li>\n<li>typo on the path, I had a comma instead of dot webdriver.chrome,driver</li>\n</ul>\n<p>Lastly, it could be the compatibility issue but all worked fine after checking above items</p>\n"},{"tags":[],"owner":{"account_id":25978739,"reputation":11,"user_id":19692824,"display_name":"Ahmed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659626912,"creation_date":1659626834,"answer_id":73238532,"question_id":58628081,"body_markdown":"For mac, there are 2 option for chrome driver \r\n[chromedriver mac 1 or 2][1]\r\n1. \tchromedriver_mac64.zip OR 2. chromedriver_mac64_m1.zip\r\n\r\nNow, Go to file &gt; Right click and &quot;Open with terminal&quot; &gt; Provide required access.\r\n[open in terminal][2]\r\nNow, run command &quot;mvn clean install&quot; again, It works.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wlhKc.png\r\n  [2]: https://i.stack.imgur.com/NwLXT.png","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>For mac, there are 2 option for chrome driver\n<a href=\"https://i.stack.imgur.com/wlhKc.png\" rel=\"nofollow noreferrer\">chromedriver mac 1 or 2</a></p>\n<ol>\n<li>chromedriver_mac64.zip OR 2. chromedriver_mac64_m1.zip</li>\n</ol>\n<p>Now, Go to file &gt; Right click and &quot;Open with terminal&quot; &gt; Provide required access.\n<a href=\"https://i.stack.imgur.com/NwLXT.png\" rel=\"nofollow noreferrer\">open in terminal</a>\nNow, run command &quot;mvn clean install&quot; again, It works.</p>\n"},{"tags":[],"owner":{"account_id":1841986,"reputation":580,"user_id":1671221,"display_name":"Manikandan Periyasamy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684463201,"creation_date":1684463201,"answer_id":76285628,"question_id":58628081,"body_markdown":"Actually, the error is bit inappropriate. I too had the same issue but while using GRID and the problems were two.\r\n\r\n1. Selenium GRID / server version and the selenium lib used in code are different versions (4.9.0 and 4.8.3)\r\n[Selenium server version img][1]\r\n[Selenium lib in code img][2]\r\n\r\n2. Capability values were incorrect - Incorrect platform was chosen\r\nWIN10 instead of WIN11\r\n        `DesiredCapabilities cap = new DesiredCapabilities();\r\ncap.setPlatform(Platform.WIN10);\r\n\t\tcap.setBrowserName(&quot;chrome&quot;);\r\n\t\tWebDriver driver = new RemoteWebDriver(new URL(&quot;http://localhost:4444/wd/hub&quot;), cap);`\r\n\r\n  [1]: https://i.stack.imgur.com/iaD5r.png\r\n  [2]: https://i.stack.imgur.com/hM3y6.png","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>Actually, the error is bit inappropriate. I too had the same issue but while using GRID and the problems were two.</p>\n<ol>\n<li><p>Selenium GRID / server version and the selenium lib used in code are different versions (4.9.0 and 4.8.3)\n<a href=\"https://i.stack.imgur.com/iaD5r.png\" rel=\"nofollow noreferrer\">Selenium server version img</a>\n<a href=\"https://i.stack.imgur.com/hM3y6.png\" rel=\"nofollow noreferrer\">Selenium lib in code img</a></p>\n</li>\n<li><p>Capability values were incorrect - Incorrect platform was chosen\nWIN10 instead of WIN11\n<code>DesiredCapabilities cap = new DesiredCapabilities(); cap.setPlatform(Platform.WIN10); cap.setBrowserName(&quot;chrome&quot;); WebDriver driver = new RemoteWebDriver(new URL(&quot;http://localhost:4444/wd/hub&quot;), cap);</code></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4062093,"reputation":1003,"user_id":3338349,"display_name":"MichaelM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689688587,"creation_date":1689688587,"answer_id":76713551,"question_id":58628081,"body_markdown":"I experienced a similar issue to this when I was using the image `selenium/standalone-chrome:114.0` and explicitly setting the browser version in the Java code\r\n\r\n```java\r\nChromeOptions chromeOptions = new ChromeOptions();\r\n\r\nchromeOptions.setBrowserVersion(browserVersion);\r\n```\r\n\r\nThis was causing the issue whenever the `browserVersion` was malformed, which includes when the version was `114` without the trailing `.0`. The solution was to simply set the browser version to exactly `114.0`.","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>I experienced a similar issue to this when I was using the image <code>selenium/standalone-chrome:114.0</code> and explicitly setting the browser version in the Java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>ChromeOptions chromeOptions = new ChromeOptions();\n\nchromeOptions.setBrowserVersion(browserVersion);\n</code></pre>\n<p>This was causing the issue whenever the <code>browserVersion</code> was malformed, which includes when the version was <code>114</code> without the trailing <code>.0</code>. The solution was to simply set the browser version to exactly <code>114.0</code>.</p>\n"},{"tags":[],"owner":{"account_id":3162993,"reputation":1,"user_id":2673576,"display_name":"user2673576"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691554644,"creation_date":1691554644,"answer_id":76864544,"question_id":58628081,"body_markdown":"When ever you see error as following .... then that is mostly because of your dependencies mismatch. To avoid this please try to use latest versions of your dependencies\r\n\r\nError:\r\n\r\n    org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\r\n\r\n**Possible dependencies:**\r\n\r\n - java-client \r\n - selenium-java [Note: selenium-java will have\r\n   selenium-support so if your pom having both then you can remove\r\n   selenium-support dependency from pom \r\n - selenium-support\r\n\r\n","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>When ever you see error as following .... then that is mostly because of your dependencies mismatch. To avoid this please try to use latest versions of your dependencies</p>\n<p>Error:</p>\n<pre><code>org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\n</code></pre>\n<p><strong>Possible dependencies:</strong></p>\n<ul>\n<li>java-client</li>\n<li>selenium-java [Note: selenium-java will have\nselenium-support so if your pom having both then you can remove\nselenium-support dependency from pom</li>\n<li>selenium-support</li>\n</ul>\n"}],"owner":{"account_id":14021834,"reputation":111,"user_id":10127878,"display_name":"Moumita Das"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86247,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":58633257,"answer_count":7,"score":3,"last_activity_date":1691554644,"creation_date":1572447122,"question_id":58628081,"body_markdown":"I am new to selenium. Able to configure selenium set up on Ubuntu.Configuration details given below:\r\n\r\n- Google Chrome 68.0.3440.84 \r\n- ChromeDriver 2.41.578700 (2f1ed5f9343c13f73144538f15c00b370eda6706)\r\n- Jenkins ver. 2.193\r\n- ubuntu-18.04\r\n- Selenium 3.13.0\r\n- OpenJDK 1.8\r\n- Doc referred for selenium set up : https://tecadmin.net/setup-selenium-chromedriver-on-ubuntu/\r\n\r\nBut every run I am getting below error on jenkins :\r\n\r\n    Opening chrome driver\r\n    Oct 30, 2019 1:26:49 PM org.openqa.selenium.remote.DesiredCapabilities chrome\r\n    INFO: Using `new ChromeOptions()` is preferred to `DesiredCapabilities.chrome()`\r\n    [ERROR] Tests run: 3, Failures: 1, Errors: 0, Skipped: 2, Time elapsed: 0.998 s &lt;&lt;&lt; FAILURE! - in TestSuite\r\n    [ERROR] setUp(com.test.WebAppTitleTestOnChrome)  Time elapsed: 0.895 s  &lt;&lt;&lt; FAILURE!\r\n    org.openqa.selenium.remote.UnreachableBrowserException: \r\n    Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\r\n\r\nPlease suggest me.\r\n","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>I am new to selenium. Able to configure selenium set up on Ubuntu.Configuration details given below:</p>\n\n<ul>\n<li>Google Chrome 68.0.3440.84 </li>\n<li>ChromeDriver 2.41.578700 (2f1ed5f9343c13f73144538f15c00b370eda6706)</li>\n<li>Jenkins ver. 2.193</li>\n<li>ubuntu-18.04</li>\n<li>Selenium 3.13.0</li>\n<li>OpenJDK 1.8</li>\n<li>Doc referred for selenium set up : <a href=\"https://tecadmin.net/setup-selenium-chromedriver-on-ubuntu/\" rel=\"nofollow noreferrer\">https://tecadmin.net/setup-selenium-chromedriver-on-ubuntu/</a></li>\n</ul>\n\n<p>But every run I am getting below error on jenkins :</p>\n\n<pre><code>Opening chrome driver\nOct 30, 2019 1:26:49 PM org.openqa.selenium.remote.DesiredCapabilities chrome\nINFO: Using `new ChromeOptions()` is preferred to `DesiredCapabilities.chrome()`\n[ERROR] Tests run: 3, Failures: 1, Errors: 0, Skipped: 2, Time elapsed: 0.998 s &lt;&lt;&lt; FAILURE! - in TestSuite\n[ERROR] setUp(com.test.WebAppTitleTestOnChrome)  Time elapsed: 0.895 s  &lt;&lt;&lt; FAILURE!\norg.openqa.selenium.remote.UnreachableBrowserException: \nCould not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\n</code></pre>\n\n<p>Please suggest me.</p>\n"},{"tags":["java","android","codenameone","inputstream"],"answers":[{"tags":[],"owner":{"account_id":9485987,"reputation":11,"user_id":7052359,"display_name":"Dev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691554578,"creation_date":1691114524,"answer_id":76832527,"question_id":76832243,"body_markdown":"1. Create a file using your string filename with path, for example:\r\n```java\r\nFile file = new File(&quot;res/raw/filename.png&quot;);\r\n```\r\n2. Try to use `FileInputStream` like so:\r\n```java\r\nFileInputStream is = new FileInputStream(file);\r\n```\r\nNote that `NullPointerException` may happen because of there is no declaration at all.\r\n","title":"Codename One: Resources Not Being Found in Android Build","body":"<ol>\n<li>Create a file using your string filename with path, for example:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>File file = new File(&quot;res/raw/filename.png&quot;);\n</code></pre>\n<ol start=\"2\">\n<li>Try to use <code>FileInputStream</code> like so:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>FileInputStream is = new FileInputStream(file);\n</code></pre>\n<p>Note that <code>NullPointerException</code> may happen because of there is no declaration at all.</p>\n"},{"tags":[],"owner":{"account_id":394396,"reputation":52134,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691206641,"creation_date":1691206641,"answer_id":76840055,"question_id":76832243,"body_markdown":"Check that the files in the folder match the case you use as even the file names are case sensitive. I suggest showing the specific file name that wasn&#39;t found as an error so you&#39;ll know which file is missing.\r\n\r\nOther than that you should use the newer syntax of try-with-resources as part of Java 8:\r\n\r\n    try(InputStream is = CN.getResourceAsStream(file)) {\r\n        img = Image.createImage(is);\r\n    } catch (IOException e) {\r\n        Log.e(e);\r\n        Dialog.show(&quot;Error&quot;, &quot;Loading file failed: &quot; + file, &quot;OK&quot;, null);\r\n    }\r\n    return img;\r\n\r\nThis removes the need to close. Also, always use `Log.e()` instead of `printStackTrace`. ","title":"Codename One: Resources Not Being Found in Android Build","body":"<p>Check that the files in the folder match the case you use as even the file names are case sensitive. I suggest showing the specific file name that wasn't found as an error so you'll know which file is missing.</p>\n<p>Other than that you should use the newer syntax of try-with-resources as part of Java 8:</p>\n<pre><code>try(InputStream is = CN.getResourceAsStream(file)) {\n    img = Image.createImage(is);\n} catch (IOException e) {\n    Log.e(e);\n    Dialog.show(&quot;Error&quot;, &quot;Loading file failed: &quot; + file, &quot;OK&quot;, null);\n}\nreturn img;\n</code></pre>\n<p>This removes the need to close. Also, always use <code>Log.e()</code> instead of <code>printStackTrace</code>.</p>\n"}],"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76840055,"answer_count":2,"score":1,"last_activity_date":1691554578,"creation_date":1691107347,"question_id":76832243,"body_markdown":"I am using Codename One to build a little game. My game works in the simulator, however, whenever I run an Android build of the game, I&#39;m met with \r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;void java.io.BufferedReader.close()&#39; on a null object reference\r\n\r\nI used an if statement to simply close an input stream if it is not null but then nothing loads in, which seems to me I am not configuring my resources correctly. \r\n\r\nThis is how I am loading in my image resources:\r\n\r\n    public static final String DUCKY_ATLAS = &quot;/duckySprite.png&quot;;\r\n    public static final String LEVEL_ATLAS = &quot;/mapSprite.png&quot;;\r\n\r\n    public static final String START_LEVEL = &quot;/levelOne.png&quot;;\r\n    public static final String OBSTACLE_SEQUENCES = &quot;/levelSequences.png&quot;;\r\n\r\n    //method to pull Image from file \r\n    public static Image getSpriteAtlas(String file) {\r\n        Image img = null;\r\n        try {\r\n            InputStream is = CN.getResourceAsStream(file);\r\n            img = Image.createImage(is);\r\n            is.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return img;\r\n    }\r\nThe location of my resources folder looks like : /common/src/main/resources\r\n\r\nThere is also no nesting within it. \r\n\r\nAny help would be greatly appreciated.","title":"Codename One: Resources Not Being Found in Android Build","body":"<p>I am using Codename One to build a little game. My game works in the simulator, however, whenever I run an Android build of the game, I'm met with</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'void java.io.BufferedReader.close()' on a null object reference\n</code></pre>\n<p>I used an if statement to simply close an input stream if it is not null but then nothing loads in, which seems to me I am not configuring my resources correctly.</p>\n<p>This is how I am loading in my image resources:</p>\n<pre><code>public static final String DUCKY_ATLAS = &quot;/duckySprite.png&quot;;\npublic static final String LEVEL_ATLAS = &quot;/mapSprite.png&quot;;\n\npublic static final String START_LEVEL = &quot;/levelOne.png&quot;;\npublic static final String OBSTACLE_SEQUENCES = &quot;/levelSequences.png&quot;;\n\n//method to pull Image from file \npublic static Image getSpriteAtlas(String file) {\n    Image img = null;\n    try {\n        InputStream is = CN.getResourceAsStream(file);\n        img = Image.createImage(is);\n        is.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return img;\n}\n</code></pre>\n<p>The location of my resources folder looks like : /common/src/main/resources</p>\n<p>There is also no nesting within it.</p>\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1691546608,"post_id":76864065,"comment_id":135505150,"body_markdown":"`entityManager.clear();` - the body of test method reveals you somehow was able to acquire live instance of EM, that definitely means there is another transaction (EM) which somehow participate in test scenario","body":"<code>entityManager.clear();</code> - the body of test method reveals you somehow was able to acquire live instance of EM, that definitely means there is another transaction (EM) which somehow participate in test scenario"},{"owner":{"account_id":6580474,"reputation":136,"user_id":5084928,"accept_rate":80,"display_name":"anubhav deshwal"},"score":0,"creation_date":1691551350,"post_id":76864065,"comment_id":135505531,"body_markdown":"Actually I @Autowired EntityManager in ServiceD.","body":"Actually I @Autowired EntityManager in ServiceD."},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1691577798,"post_id":76864065,"comment_id":135509636,"body_markdown":"In each Service class you can start by printing the value of  `payment` after executing `.findByAccountAndIdAndDeletedIsFalse` . In ServiceA after `payment.setAmount()` you can also print the value of `payment` again to see new values first. Do you have to precisely use all those services to update record or you are open to alternative way to perform updates?","body":"In each Service class you can start by printing the value of  <code>payment</code> after executing <code>.findByAccountAndIdAndDeletedIsFalse</code> . In ServiceA after <code>payment.setAmount()</code> you can also print the value of <code>payment</code> again to see new values first. Do you have to precisely use all those services to update record or you are open to alternative way to perform updates?"}],"owner":{"account_id":6580474,"reputation":136,"user_id":5084928,"accept_rate":80,"display_name":"anubhav deshwal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691554411,"creation_date":1691545323,"question_id":76864065,"body_markdown":"In order to understand how persistence context works, i tried the following scenario. But somehow hibernate was maintaining older entity state even after update was successful in its persistence context\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table(name=&quot;payments&quot;)\r\npublic class Payment {\r\n  \r\n  private Long id;\r\n\r\n  @Column(name=&quot;account_id&quot;)\r\n  private Long accountId;\r\n\r\n  private BigDecimal amount;\r\n\r\n  private Boolean deleted;\r\n\r\n}\r\n\r\n```\r\n\r\n**ServiceA**\r\n\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceA{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\r\n  public void testServiceA(Long accountId, Long paymentId){\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n    payment.setAmount(BigDecimal.ONE);\r\n\r\n    paymentRepository.save(payment);\r\n  }\r\n\r\n}\r\n```\r\n\r\n**ServiceB**\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceB{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Autowired\r\n  private ServiceA serviceA;\r\n\r\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\r\n  public void testServiceB(Long accountId, Long paymentId){\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n    serviceA.testServiceA(accountId, paymentId);\r\n  }\r\n\r\n}\r\n```\r\n\r\n**ServiceC**\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceC{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\r\n  public void testServiceC(Long accountId, Long paymentId){\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n    log.info(&quot;testing service C: payment value is {}&quot;, payment.getAmount());\r\n  }\r\n\r\n}\r\n```\r\n\r\n**ServiceD**\r\n\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceD{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Autowired\r\n  private ServiceB serviceB;\r\n\r\n  @Autowired\r\n  private ServiceC serviceC;\r\n\r\n  public void testServiceD() throws PaymentNotFoundException {\r\n    Long paymentId = 1L;\r\n    Long accountId = 1L;\r\n\r\n    serviceB.testServiceB(accountId, paymentId);\r\n    serviceC.testServiceC(accountId, paymentId);\r\n\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n\r\n    log.info(&quot;testing service D: payment value is {}&quot;, payment.getAmount());\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\n**Controller**\r\n\r\n```java\r\n\r\n@GetMapping(&quot;/test&quot;)\r\n  public void test(){\r\n    serviceD.testServiceD();\r\n  }\r\n```\r\n\r\n**Given a payment already exist with id 1 and account 1, with amount 50.**\r\n\r\n**Expectation**\r\nAs testServiceD method is not running under any transaction and testServiceC is running in a new transaction always, i was expecting the logs will print the updated amount of the payment.\r\n\r\nBut when I ran the above code following logs got printed\r\n```\r\ntesting service C: payment value is 50\r\ntesting service D: payment value is 50\r\n```\r\nBasically, we are seeing the amount getting printed before update\r\n\r\n**How i resolved it**\r\n\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceD{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Autowired\r\n  private ServiceB serviceB;\r\n\r\n  @Autowired\r\n  private ServiceC serviceC;\r\n\r\n  @Autowired\r\n  private EntityManager entityManager;\r\n\r\n  public void testServiceD() throws PaymentNotFoundException {\r\n    Long paymentId = 1L;\r\n    Long accountId = 1L;\r\n\r\n    serviceB.testServiceB(accountId, paymentId);\r\n    // clear cache\r\n    entityManager.clear();\r\n    serviceC.testServiceC(accountId, paymentId);\r\n\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n\r\n    log.info(&quot;testing service D: payment value is {}&quot;, payment.getAmount());\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\nNow when i run the code , following logs are printed\r\n(Again given payment amount is 50)\r\n\r\n```\r\ntesting service C: payment value is 1\r\ntesting service D: payment value is 1\r\n```\r\n","title":"Hibernate persistent context is maintaing old entity state","body":"<p>In order to understand how persistence context works, i tried the following scenario. But somehow hibernate was maintaining older entity state even after update was successful in its persistence context</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@Entity\n@Table(name=&quot;payments&quot;)\npublic class Payment {\n  \n  private Long id;\n\n  @Column(name=&quot;account_id&quot;)\n  private Long accountId;\n\n  private BigDecimal amount;\n\n  private Boolean deleted;\n\n}\n\n</code></pre>\n<p><strong>ServiceA</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceA{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\n  public void testServiceA(Long accountId, Long paymentId){\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n    payment.setAmount(BigDecimal.ONE);\n\n    paymentRepository.save(payment);\n  }\n\n}\n</code></pre>\n<p><strong>ServiceB</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceB{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Autowired\n  private ServiceA serviceA;\n\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\n  public void testServiceB(Long accountId, Long paymentId){\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n    serviceA.testServiceA(accountId, paymentId);\n  }\n\n}\n</code></pre>\n<p><strong>ServiceC</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceC{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\n  public void testServiceC(Long accountId, Long paymentId){\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n    log.info(&quot;testing service C: payment value is {}&quot;, payment.getAmount());\n  }\n\n}\n</code></pre>\n<p><strong>ServiceD</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceD{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Autowired\n  private ServiceB serviceB;\n\n  @Autowired\n  private ServiceC serviceC;\n\n  public void testServiceD() throws PaymentNotFoundException {\n    Long paymentId = 1L;\n    Long accountId = 1L;\n\n    serviceB.testServiceB(accountId, paymentId);\n    serviceC.testServiceC(accountId, paymentId);\n\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n\n    log.info(&quot;testing service D: payment value is {}&quot;, payment.getAmount());\n  }\n\n}\n\n</code></pre>\n<p><strong>Controller</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@GetMapping(&quot;/test&quot;)\n  public void test(){\n    serviceD.testServiceD();\n  }\n</code></pre>\n<p><strong>Given a payment already exist with id 1 and account 1, with amount 50.</strong></p>\n<p><strong>Expectation</strong>\nAs testServiceD method is not running under any transaction and testServiceC is running in a new transaction always, i was expecting the logs will print the updated amount of the payment.</p>\n<p>But when I ran the above code following logs got printed</p>\n<pre><code>testing service C: payment value is 50\ntesting service D: payment value is 50\n</code></pre>\n<p>Basically, we are seeing the amount getting printed before update</p>\n<p><strong>How i resolved it</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceD{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Autowired\n  private ServiceB serviceB;\n\n  @Autowired\n  private ServiceC serviceC;\n\n  @Autowired\n  private EntityManager entityManager;\n\n  public void testServiceD() throws PaymentNotFoundException {\n    Long paymentId = 1L;\n    Long accountId = 1L;\n\n    serviceB.testServiceB(accountId, paymentId);\n    // clear cache\n    entityManager.clear();\n    serviceC.testServiceC(accountId, paymentId);\n\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n\n    log.info(&quot;testing service D: payment value is {}&quot;, payment.getAmount());\n  }\n\n}\n\n</code></pre>\n<p>Now when i run the code , following logs are printed\n(Again given payment amount is 50)</p>\n<pre><code>testing service C: payment value is 1\ntesting service D: payment value is 1\n</code></pre>\n"},{"tags":["java","performance","garbage-collection"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1691553681,"post_id":76864460,"comment_id":135505700,"body_markdown":"Does it have to be preallocated? `CharBuffer.wrap()` comes to mind.","body":"Does it have to be preallocated? <code>CharBuffer.wrap()</code> comes to mind."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691554900,"post_id":76864460,"comment_id":135505795,"body_markdown":"toByteArray() then native API store as a chunk. You could also store only the lower byte values if all the upper values are the same.  NB using many short methods per iteration or breakdown of process to small process segments is how RAM used gets marked quickly for GC dump in Java.","body":"toByteArray() then native API store as a chunk. You could also store only the lower byte values if all the upper values are the same.  NB using many short methods per iteration or breakdown of process to small process segments is how RAM used gets marked quickly for GC dump in Java."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691556123,"post_id":76864460,"comment_id":135505899,"body_markdown":"@SamuelMarchant `toByteArray()` creates a `byte[]` object which then has to be garbage-collected, which is specifically mentioned in the question as unwanted, and does not preserve the original UTF-16 format of the string, which is also mentioned in the question as an objective. I don&#39;t understand your final sentence.","body":"@SamuelMarchant <code>toByteArray()</code> creates a <code>byte[]</code> object which then has to be garbage-collected, which is specifically mentioned in the question as unwanted, and does not preserve the original UTF-16 format of the string, which is also mentioned in the question as an objective. I don&#39;t understand your final sentence."},{"owner":{"account_id":11562141,"reputation":53,"user_id":8471533,"display_name":"pippo"},"score":0,"creation_date":1691565583,"post_id":76864460,"comment_id":135507174,"body_markdown":"@user207421\nThx your quick reply. CharBuffer.wrap() is an interesting approach, but there are two issues with it in this context:\nThis method itself creates a new CharBuffer object, which will introduce GC overhead.\nOnce I have the CharBuffer, it&#39;s challenging to bulk-copy data into the ByteBuffer. My ByteBuffer is a DirectByteBuffer allocated from JNI, so it can&#39;t be reallocated and must be used directly.","body":"@user207421 Thx your quick reply. CharBuffer.wrap() is an interesting approach, but there are two issues with it in this context: This method itself creates a new CharBuffer object, which will introduce GC overhead. Once I have the CharBuffer, it&#39;s challenging to bulk-copy data into the ByteBuffer. My ByteBuffer is a DirectByteBuffer allocated from JNI, so it can&#39;t be reallocated and must be used directly."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691568994,"post_id":76864460,"comment_id":135507842,"body_markdown":"Well in that case `ByteBuffer.asCharBuffer().put(String)`, but note that it doesn&#39;t update `position` in the underlying `ByteBuffer`. This does create a new object however.","body":"Well in that case <code>ByteBuffer.asCharBuffer().put(String)</code>, but note that it doesn&#39;t update <code>position</code> in the underlying <code>ByteBuffer</code>. This does create a new object however."},{"owner":{"account_id":11562141,"reputation":53,"user_id":8471533,"display_name":"pippo"},"score":0,"creation_date":1691571441,"post_id":76864460,"comment_id":135508319,"body_markdown":"@user207421, I&#39;ve checked the implementation of ByteBuffer.asCharBuffer().put(String) in JDK8, it calls &quot;put(char)&quot; for each character of String (gotten by charAt(int)) too.  lol, maybe put char one by one is the only way.","body":"@user207421, I&#39;ve checked the implementation of ByteBuffer.asCharBuffer().put(String) in JDK8, it calls &quot;put(char)&quot; for each character of String (gotten by charAt(int)) too.  lol, maybe put char one by one is the only way."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691574948,"post_id":76864460,"comment_id":135509022,"body_markdown":"Well I certainly can&#39;t think of a better way: I&#39;m really only trying to think of one-liners to save you having to write a loop and to increase the chance of HotSpot optimizations.","body":"Well I certainly can&#39;t think of a better way: I&#39;m really only trying to think of one-liners to save you having to write a loop and to increase the chance of HotSpot optimizations."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691605907,"post_id":76864460,"comment_id":135515683,"body_markdown":"In recent Java versions, `java.lang.String` stores characters in a `byte[]` using either ISO-8859-1 or UTF-8, so there is no _&quot;original UTF-16 format of the string&quot;_.","body":"In recent Java versions, <code>java.lang.String</code> stores characters in a <code>byte[]</code> using either ISO-8859-1 or UTF-8, so there is no <i>&quot;original UTF-16 format of the string&quot;</i>."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691722760,"post_id":76864460,"comment_id":135533169,"body_markdown":"I see Java does not have SIMD support until jdk 18.      https://vksegfault.github.io/posts/java-simd/","body":"I see Java does not have SIMD support until jdk 18.      <a href=\"https://vksegfault.github.io/posts/java-simd/\" rel=\"nofollow noreferrer\">vksegfault.github.io/posts/java-simd</a>"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691723350,"post_id":76864460,"comment_id":135533201,"body_markdown":"Read the API docs &quot;Direct vs. non Direct buffers&quot;.         https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html.    Direct buffers operations use the underlying OS memory space.","body":"Read the API docs &quot;Direct vs. non Direct buffers&quot;.         <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html</a>.    Direct buffers operations use the underlying OS memory space."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692630579,"post_id":76864460,"comment_id":135646342,"body_markdown":"@MarkRotteveel it stores as either ISO-8859-1 or UTF-16 (native byte order), not UTF-8. But in principle, you are right, developers can not assume that the string has an “original UTF-16 format” and it’s not even clear why maintaining that format would be an actual goal when the receiving side is native code.","body":"@MarkRotteveel it stores as either ISO-8859-1 or UTF-16 (native byte order), not UTF-8. But in principle, you are right, developers can not assume that the string has an “original UTF-16 format” and it’s not even clear why maintaining that format would be an actual goal when the receiving side is native code."}],"owner":{"account_id":11562141,"reputation":53,"user_id":8471533,"display_name":"pippo"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691553191,"creation_date":1691553191,"question_id":76864460,"body_markdown":"I have a pre-allocated ByteBuffer and need to copy a String into it, preserving the original UTF-16 format of the string. One of the key requirements is to avoid any garbage collection overhead during this process.\r\n\r\nHere&#39;s my current implementation:\r\n\r\n    private static void strcpy(ByteBuffer dest, String src)\r\n     {\r\n         int len = src.length();\r\n\r\n         for (int i = 0; i &lt; len; ++i)\r\n         {\r\n        \t dest.putChar(src.charAt(i));\r\n         }\r\n     }\r\n\r\nI&#39;m curious if, under the influence of the JIT, this could be optimized into more efficient assembly code, possibly leveraging SIMD instructions. Is there any insight or optimization guidance on this aspect?\r\n\r\nIs there a more efficient way to achieve this?\r\n\r\n","title":"Efficiently copying a String into a pre-allocated ByteBuffer as UTF-16 without any GC overhead in Java","body":"<p>I have a pre-allocated ByteBuffer and need to copy a String into it, preserving the original UTF-16 format of the string. One of the key requirements is to avoid any garbage collection overhead during this process.</p>\n<p>Here's my current implementation:</p>\n<pre><code>private static void strcpy(ByteBuffer dest, String src)\n {\n     int len = src.length();\n\n     for (int i = 0; i &lt; len; ++i)\n     {\n         dest.putChar(src.charAt(i));\n     }\n }\n</code></pre>\n<p>I'm curious if, under the influence of the JIT, this could be optimized into more efficient assembly code, possibly leveraging SIMD instructions. Is there any insight or optimization guidance on this aspect?</p>\n<p>Is there a more efficient way to achieve this?</p>\n"},{"tags":["java","hibernate","lazy-loading"],"answers":[{"tags":[],"owner":{"account_id":38612,"reputation":22579,"user_id":110933,"accept_rate":96,"display_name":"davek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1384257997,"creation_date":1384257997,"answer_id":19928720,"question_id":19928568,"body_markdown":"It&#39;s probably not anywhere approaching a best practice, but I usually call a `SIZE` on the collection to load the children in the same transaction, like you have suggested. It&#39;s clean, immune to any changes in the structure of the child elements, and yields SQL with low overhead.","title":"Hibernate: best practice to pull all lazy collections","body":"<p>It's probably not anywhere approaching a best practice, but I usually call a <code>SIZE</code> on the collection to load the children in the same transaction, like you have suggested. It's clean, immune to any changes in the structure of the child elements, and yields SQL with low overhead.</p>\n"},{"tags":[],"owner":{"account_id":905416,"reputation":25876,"user_id":940428,"accept_rate":100,"display_name":"Prabhakaran Ramaswamy"},"down_vote_count":0,"up_vote_count":131,"is_accepted":true,"score":131,"last_activity_date":1484902017,"creation_date":1384258033,"answer_id":19928738,"question_id":19928568,"body_markdown":"Use `Hibernate.initialize()` within `@Transactional` to initialize lazy objects. \r\n\r\n     start Transaction \r\n          Hibernate.initialize(entity.getAddresses());\r\n          Hibernate.initialize(entity.getPersons());\r\n     end Transaction \r\n\r\nNow out side of the Transaction you are able to get lazy objects. \r\n\r\n    entity.getAddresses().size();\r\n    entity.getPersons().size();","title":"Hibernate: best practice to pull all lazy collections","body":"<p>Use <code>Hibernate.initialize()</code> within <code>@Transactional</code> to initialize lazy objects. </p>\n\n<pre><code> start Transaction \n      Hibernate.initialize(entity.getAddresses());\n      Hibernate.initialize(entity.getPersons());\n end Transaction \n</code></pre>\n\n<p>Now out side of the Transaction you are able to get lazy objects. </p>\n\n<pre><code>entity.getAddresses().size();\nentity.getPersons().size();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":114756,"reputation":57127,"user_id":301607,"accept_rate":100,"display_name":"StanislavL"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1384258082,"creation_date":1384258082,"answer_id":19928759,"question_id":19928568,"body_markdown":"Place the Utils.objectToJson(entity); call before session closing.\r\n\r\nOr you can try to set fetch mode and play with code like this\r\n\r\n    Session s = ...\r\n    DetachedCriteria dc = DetachedCriteria.forClass(MyEntity.class).add(Expression.idEq(id));\r\n    dc.setFetchMode(&quot;innerTable&quot;, FetchMode.EAGER);\r\n    Criteria c = dc.getExecutableCriteria(s);\r\n    MyEntity a = (MyEntity)c.uniqueResult();","title":"Hibernate: best practice to pull all lazy collections","body":"<p>Place the Utils.objectToJson(entity); call before session closing.</p>\n\n<p>Or you can try to set fetch mode and play with code like this</p>\n\n<pre><code>Session s = ...\nDetachedCriteria dc = DetachedCriteria.forClass(MyEntity.class).add(Expression.idEq(id));\ndc.setFetchMode(\"innerTable\", FetchMode.EAGER);\nCriteria c = dc.getExecutableCriteria(s);\nMyEntity a = (MyEntity)c.uniqueResult();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1838260,"reputation":660,"user_id":1668201,"display_name":"Florian Sager"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1405962036,"creation_date":1405962036,"answer_id":24870618,"question_id":19928568,"body_markdown":"You can traverse over the Getters of the Hibernate object in the same transaction to assure all lazy child objects are fetched eagerly with the following *generic* helper class:\r\n\r\n&gt; HibernateUtil.initializeObject(myObject, &quot;my.app.model&quot;);\r\n\r\n    package my.app.util;\r\n\r\n    import java.lang.reflect.InvocationTargetException;\r\n    import java.lang.reflect.Method;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n\r\n    import org.aspectj.org.eclipse.jdt.core.dom.Modifier;\r\n    import org.hibernate.Hibernate;\r\n    \r\n    public class HibernateUtil {\r\n\r\n\tpublic static byte[] hibernateCollectionPackage = &quot;org.hibernate.collection&quot;.getBytes();\r\n\r\n\tpublic static void initializeObject( Object o, String insidePackageName ) {\r\n\t\tSet&lt;Object&gt; seenObjects = new HashSet&lt;Object&gt;();\r\n\t\tinitializeObject( o, seenObjects, insidePackageName.getBytes() );\r\n\t\tseenObjects = null;\r\n\t}\r\n\r\n\tprivate static void initializeObject( Object o, Set&lt;Object&gt; seenObjects, byte[] insidePackageName ) {\r\n\r\n\t\tseenObjects.add( o );\r\n\r\n\t\tMethod[] methods = o.getClass().getMethods();\r\n\t\tfor ( Method method : methods ) {\r\n\r\n\t\t\tString methodName = method.getName();\r\n\r\n\t\t\t// check Getters exclusively\r\n\t\t\tif ( methodName.length() &lt; 3 || !&quot;get&quot;.equals( methodName.substring( 0, 3 ) ) )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t// Getters without parameters\r\n\t\t\tif ( method.getParameterTypes().length &gt; 0 )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tint modifiers = method.getModifiers();\r\n\r\n\t\t\t// Getters that are public\r\n\t\t\tif ( !Modifier.isPublic( modifiers ) )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t// but not static\r\n\t\t\tif ( Modifier.isStatic( modifiers ) )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\t// Check result of the Getter\r\n\t\t\t\tObject r = method.invoke( o );\r\n\r\n\t\t\t\tif ( r == null )\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t// prevent cycles\r\n\t\t\t\tif ( seenObjects.contains( r ) )\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t// ignore simple types, arrays und anonymous classes\r\n\t\t\t\tif ( !isIgnoredType( r.getClass() ) &amp;&amp; !r.getClass().isPrimitive() &amp;&amp; !r.getClass().isArray() &amp;&amp; !r.getClass().isAnonymousClass() ) {\r\n\r\n\t\t\t\t\t// ignore classes out of the given package and out of the hibernate collection\r\n\t\t\t\t\t// package\r\n\t\t\t\t\tif ( !isClassInPackage( r.getClass(), insidePackageName ) &amp;&amp; !isClassInPackage( r.getClass(), hibernateCollectionPackage ) ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// initialize child object\r\n\t\t\t\t\tHibernate.initialize( r );\r\n\r\n\t\t\t\t\t// traverse over the child object\r\n\t\t\t\t\tinitializeObject( r, seenObjects, insidePackageName );\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch ( InvocationTargetException e ) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn;\r\n\t\t\t} catch ( IllegalArgumentException e ) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn;\r\n\t\t\t} catch ( IllegalAccessException e ) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate static final Set&lt;Class&lt;?&gt;&gt; IGNORED_TYPES = getIgnoredTypes();\r\n\r\n\tprivate static boolean isIgnoredType( Class&lt;?&gt; clazz ) {\r\n\t\treturn IGNORED_TYPES.contains( clazz );\r\n\t}\r\n\r\n\tprivate static Set&lt;Class&lt;?&gt;&gt; getIgnoredTypes() {\r\n\t\tSet&lt;Class&lt;?&gt;&gt; ret = new HashSet&lt;Class&lt;?&gt;&gt;();\r\n\t\tret.add( Boolean.class );\r\n\t\tret.add( Character.class );\r\n\t\tret.add( Byte.class );\r\n\t\tret.add( Short.class );\r\n\t\tret.add( Integer.class );\r\n\t\tret.add( Long.class );\r\n\t\tret.add( Float.class );\r\n\t\tret.add( Double.class );\r\n\t\tret.add( Void.class );\r\n\t\tret.add( String.class );\r\n\t\tret.add( Class.class );\r\n\t\tret.add( Package.class );\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tprivate static Boolean isClassInPackage( Class&lt;?&gt; clazz, byte[] insidePackageName ) {\r\n\r\n\t\tPackage p = clazz.getPackage();\r\n\t\tif ( p == null )\r\n\t\t\treturn null;\r\n\r\n\t\tbyte[] packageName = p.getName().getBytes();\r\n\r\n\t\tint lenP = packageName.length;\r\n\t\tint lenI = insidePackageName.length;\r\n\r\n\t\tif ( lenP &lt; lenI )\r\n\t\t\treturn false;\r\n\r\n\t\tfor ( int i = 0; i &lt; lenI; i++ ) {\r\n\t\t\tif ( packageName[i] != insidePackageName[i] )\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n    }\r\n\r\n","title":"Hibernate: best practice to pull all lazy collections","body":"<p>You can traverse over the Getters of the Hibernate object in the same transaction to assure all lazy child objects are fetched eagerly with the following <em>generic</em> helper class:</p>\n\n<blockquote>\n  <p>HibernateUtil.initializeObject(myObject, \"my.app.model\");</p>\n</blockquote>\n\n<pre><code>package my.app.util;\n\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport org.aspectj.org.eclipse.jdt.core.dom.Modifier;\nimport org.hibernate.Hibernate;\n\npublic class HibernateUtil {\n\npublic static byte[] hibernateCollectionPackage = \"org.hibernate.collection\".getBytes();\n\npublic static void initializeObject( Object o, String insidePackageName ) {\n    Set&lt;Object&gt; seenObjects = new HashSet&lt;Object&gt;();\n    initializeObject( o, seenObjects, insidePackageName.getBytes() );\n    seenObjects = null;\n}\n\nprivate static void initializeObject( Object o, Set&lt;Object&gt; seenObjects, byte[] insidePackageName ) {\n\n    seenObjects.add( o );\n\n    Method[] methods = o.getClass().getMethods();\n    for ( Method method : methods ) {\n\n        String methodName = method.getName();\n\n        // check Getters exclusively\n        if ( methodName.length() &lt; 3 || !\"get\".equals( methodName.substring( 0, 3 ) ) )\n            continue;\n\n        // Getters without parameters\n        if ( method.getParameterTypes().length &gt; 0 )\n            continue;\n\n        int modifiers = method.getModifiers();\n\n        // Getters that are public\n        if ( !Modifier.isPublic( modifiers ) )\n            continue;\n\n        // but not static\n        if ( Modifier.isStatic( modifiers ) )\n            continue;\n\n        try {\n\n            // Check result of the Getter\n            Object r = method.invoke( o );\n\n            if ( r == null )\n                continue;\n\n            // prevent cycles\n            if ( seenObjects.contains( r ) )\n                continue;\n\n            // ignore simple types, arrays und anonymous classes\n            if ( !isIgnoredType( r.getClass() ) &amp;&amp; !r.getClass().isPrimitive() &amp;&amp; !r.getClass().isArray() &amp;&amp; !r.getClass().isAnonymousClass() ) {\n\n                // ignore classes out of the given package and out of the hibernate collection\n                // package\n                if ( !isClassInPackage( r.getClass(), insidePackageName ) &amp;&amp; !isClassInPackage( r.getClass(), hibernateCollectionPackage ) ) {\n                    continue;\n                }\n\n                // initialize child object\n                Hibernate.initialize( r );\n\n                // traverse over the child object\n                initializeObject( r, seenObjects, insidePackageName );\n            }\n\n        } catch ( InvocationTargetException e ) {\n            e.printStackTrace();\n            return;\n        } catch ( IllegalArgumentException e ) {\n            e.printStackTrace();\n            return;\n        } catch ( IllegalAccessException e ) {\n            e.printStackTrace();\n            return;\n        }\n    }\n\n}\n\nprivate static final Set&lt;Class&lt;?&gt;&gt; IGNORED_TYPES = getIgnoredTypes();\n\nprivate static boolean isIgnoredType( Class&lt;?&gt; clazz ) {\n    return IGNORED_TYPES.contains( clazz );\n}\n\nprivate static Set&lt;Class&lt;?&gt;&gt; getIgnoredTypes() {\n    Set&lt;Class&lt;?&gt;&gt; ret = new HashSet&lt;Class&lt;?&gt;&gt;();\n    ret.add( Boolean.class );\n    ret.add( Character.class );\n    ret.add( Byte.class );\n    ret.add( Short.class );\n    ret.add( Integer.class );\n    ret.add( Long.class );\n    ret.add( Float.class );\n    ret.add( Double.class );\n    ret.add( Void.class );\n    ret.add( String.class );\n    ret.add( Class.class );\n    ret.add( Package.class );\n    return ret;\n}\n\nprivate static Boolean isClassInPackage( Class&lt;?&gt; clazz, byte[] insidePackageName ) {\n\n    Package p = clazz.getPackage();\n    if ( p == null )\n        return null;\n\n    byte[] packageName = p.getName().getBytes();\n\n    int lenP = packageName.length;\n    int lenI = insidePackageName.length;\n\n    if ( lenP &lt; lenI )\n        return false;\n\n    for ( int i = 0; i &lt; lenI; i++ ) {\n        if ( packageName[i] != insidePackageName[i] )\n            return false;\n    }\n\n    return true;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":107861,"reputation":3366,"user_id":286588,"accept_rate":50,"display_name":"Farm"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1426562884,"creation_date":1426562884,"answer_id":29090811,"question_id":19928568,"body_markdown":"With Hibernate 4.1.6 a new feature is introduced to handle those lazy association problems. When you enable hibernate.enable_lazy_load_no_trans property in hibernate.properties or in hibernate.cfg.xml, you will have no LazyInitializationException any more. \r\n\r\nFor More refer : https://stackoverflow.com/a/11913404/286588","title":"Hibernate: best practice to pull all lazy collections","body":"<p>With Hibernate 4.1.6 a new feature is introduced to handle those lazy association problems. When you enable hibernate.enable_lazy_load_no_trans property in hibernate.properties or in hibernate.cfg.xml, you will have no LazyInitializationException any more. </p>\n\n<p>For More refer : <a href=\"https://stackoverflow.com/a/11913404/286588\">https://stackoverflow.com/a/11913404/286588</a></p>\n"},{"tags":[],"owner":{"account_id":237698,"reputation":2960,"user_id":506078,"accept_rate":87,"display_name":"Damian"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1481020796,"creation_date":1465522557,"answer_id":37738665,"question_id":19928568,"body_markdown":"Not the best solution, but here is what I got:\r\n\r\n1) Annotate getter you want to initialize with this annotation: \r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface Lazy {\r\n    \r\n    }\r\n\r\n\r\n2) Use this method (can be put in a generic class, or you can change T with Object class) on a object after you read it from database:\r\n\r\n\r\n\r\n    \tpublic &lt;T&gt; void forceLoadLazyCollections(T entity) {\r\n\r\n\t\tSession session = getSession().openSession();\r\n\t\tTransaction tx = null;\r\n\t\ttry {\r\n\r\n\t\t\ttx = session.beginTransaction();\r\n\t\t\tsession.refresh(entity);\r\n\t\t\tif (entity == null) {\r\n\t\t\t\tthrow new RuntimeException(&quot;Entity is null!&quot;);\r\n\t\t\t}\r\n\t\t\tfor (Method m : entityClass.getMethods()) {\r\n\r\n\t\t\t\tLazy annotation = m.getAnnotation(Lazy.class);\r\n\t\t\t\tif (annotation != null) {\r\n\t\t\t\t\tm.setAccessible(true);\r\n\t\t\t\t\tlogger.debug(&quot; method.invoke(obj, arg1, arg2,...); {} field&quot;, m.getName());\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tHibernate.initialize(m.invoke(entity));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (Exception e) {\r\n\t\t\t\t\t\tlogger.warn(&quot;initialization exception&quot;, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tsession.close();\r\n\t\t}\r\n\t}","title":"Hibernate: best practice to pull all lazy collections","body":"<p>Not the best solution, but here is what I got:</p>\n\n<p>1) Annotate getter you want to initialize with this annotation: </p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\npublic @interface Lazy {\n\n}\n</code></pre>\n\n<p>2) Use this method (can be put in a generic class, or you can change T with Object class) on a object after you read it from database:</p>\n\n<pre><code>    public &lt;T&gt; void forceLoadLazyCollections(T entity) {\n\n    Session session = getSession().openSession();\n    Transaction tx = null;\n    try {\n\n        tx = session.beginTransaction();\n        session.refresh(entity);\n        if (entity == null) {\n            throw new RuntimeException(\"Entity is null!\");\n        }\n        for (Method m : entityClass.getMethods()) {\n\n            Lazy annotation = m.getAnnotation(Lazy.class);\n            if (annotation != null) {\n                m.setAccessible(true);\n                logger.debug(\" method.invoke(obj, arg1, arg2,...); {} field\", m.getName());\n                try {\n                    Hibernate.initialize(m.invoke(entity));\n                }\n                catch (Exception e) {\n                    logger.warn(\"initialization exception\", e);\n                }\n            }\n        }\n\n    }\n    finally {\n        session.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9283548,"reputation":178,"user_id":6894125,"accept_rate":56,"display_name":"Mohamed Nagy"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1510563197,"creation_date":1510563197,"answer_id":47260236,"question_id":19928568,"body_markdown":"Try use `Gson` library to convert objects to Json\r\n\r\nExample with servlets : \r\n\r\n      List&lt;Party&gt; parties = bean.getPartiesByIncidentId(incidentId);\r\n            String json = &quot;&quot;;\r\n            try {\r\n                json = new Gson().toJson(parties);\r\n            } catch (Exception ex) {\r\n                ex.printStackTrace();\r\n            }\r\n            response.setContentType(&quot;application/json&quot;);\r\n            response.setCharacterEncoding(&quot;UTF-8&quot;);\r\n            response.getWriter().write(json);","title":"Hibernate: best practice to pull all lazy collections","body":"<p>Try use <code>Gson</code> library to convert objects to Json</p>\n\n<p>Example with servlets : </p>\n\n<pre><code>  List&lt;Party&gt; parties = bean.getPartiesByIncidentId(incidentId);\n        String json = \"\";\n        try {\n            json = new Gson().toJson(parties);\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n        response.setContentType(\"application/json\");\n        response.setCharacterEncoding(\"UTF-8\");\n        response.getWriter().write(json);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1544291180,"creation_date":1544291180,"answer_id":53685264,"question_id":19928568,"body_markdown":"When having to fetch multiple collections, you need to:\r\n\r\n1. JOIN FETCH one collection\r\n2. Use the [`Hibernate.initialize`](https://vladmihalcea.com/initialize-lazy-proxies-collections-jpa-hibernate/) for the remaining collections.\r\n\r\nSo, in your case, you need a first JPQL query like this one:\r\n\r\n    MyEntity entity = session.createQuery(&quot;select e from MyEntity e join fetch e.addreses where e.id \r\n    = :id&quot;, MyEntity.class)\r\n    .setParameter(&quot;id&quot;, entityId)\r\n    .getSingleResult();\r\n    \r\n    Hibernate.initialize(entity.persons);\r\n\r\nThis way, you can achieve your goal with 2 SQL queries and avoid a Cartesian Product.","title":"Hibernate: best practice to pull all lazy collections","body":"<p>When having to fetch multiple collections, you need to:</p>\n\n<ol>\n<li>JOIN FETCH one collection</li>\n<li>Use the <a href=\"https://vladmihalcea.com/initialize-lazy-proxies-collections-jpa-hibernate/\" rel=\"noreferrer\"><code>Hibernate.initialize</code></a> for the remaining collections.</li>\n</ol>\n\n<p>So, in your case, you need a first JPQL query like this one:</p>\n\n<pre><code>MyEntity entity = session.createQuery(\"select e from MyEntity e join fetch e.addreses where e.id \n= :id\", MyEntity.class)\n.setParameter(\"id\", entityId)\n.getSingleResult();\n\nHibernate.initialize(entity.persons);\n</code></pre>\n\n<p>This way, you can achieve your goal with 2 SQL queries and avoid a Cartesian Product.</p>\n"},{"tags":[],"owner":{"account_id":2130804,"reputation":1,"user_id":1891684,"display_name":"userSait"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545123596,"creation_date":1545123596,"answer_id":53829465,"question_id":19928568,"body_markdown":"if you using jpa repository, \r\nset properties.put(&quot;hibernate.enable_lazy_load_no_trans&quot;,true); to jpaPropertymap","title":"Hibernate: best practice to pull all lazy collections","body":"<p>if you using jpa repository, \nset properties.put(\"hibernate.enable_lazy_load_no_trans\",true); to jpaPropertymap</p>\n"},{"tags":[],"owner":{"account_id":3742507,"reputation":43,"user_id":3111994,"display_name":"gutors"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627833084,"creation_date":1571252621,"answer_id":58420095,"question_id":19928568,"body_markdown":"You can use the ```@NamedEntityGraph``` annotation to your entity to create a loadable query that set which collections you want to load on your query.\r\n\r\nThe main advantage of this approach is that hibernate makes one single query to retrieve the entity and its collections only when you choose to use this graph, like this:\r\n\r\n**Entity configuration**\r\n```\r\n@Entity\r\n@NamedEntityGraph(name = &quot;graph.myEntity.addressesAndPersons&quot;, \r\nattributeNodes = {\r\n    @NamedAttributeNode(value = &quot;addresses&quot;),\r\n    @NamedAttributeNode(value = &quot;persons&quot;)\r\n})\r\n``` \r\n\r\n**Usage**\r\n```\r\npublic MyEntity findNamedGraph(Object id, String namedGraph) {\r\n        EntityGraph&lt;MyEntity&gt; graph = em.getEntityGraph(namedGraph);\r\n\r\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n        properties.put(&quot;javax.persistence.loadgraph&quot;, graph);\r\n\r\n        return em.find(MyEntity.class, id, properties);\r\n}\r\n```","title":"Hibernate: best practice to pull all lazy collections","body":"<p>You can use the <code>@NamedEntityGraph</code> annotation to your entity to create a loadable query that set which collections you want to load on your query.</p>\n<p>The main advantage of this approach is that hibernate makes one single query to retrieve the entity and its collections only when you choose to use this graph, like this:</p>\n<p><strong>Entity configuration</strong></p>\n<pre><code>@Entity\n@NamedEntityGraph(name = &quot;graph.myEntity.addressesAndPersons&quot;, \nattributeNodes = {\n    @NamedAttributeNode(value = &quot;addresses&quot;),\n    @NamedAttributeNode(value = &quot;persons&quot;)\n})\n</code></pre>\n<p><strong>Usage</strong></p>\n<pre><code>public MyEntity findNamedGraph(Object id, String namedGraph) {\n        EntityGraph&lt;MyEntity&gt; graph = em.getEntityGraph(namedGraph);\n\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n        properties.put(&quot;javax.persistence.loadgraph&quot;, graph);\n\n        return em.find(MyEntity.class, id, properties);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17180858,"reputation":9,"user_id":12436303,"display_name":"Mohsen Msr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589440999,"creation_date":1589440999,"answer_id":61791586,"question_id":19928568,"body_markdown":"There are some kind of misunderstanding about lazy collections in JPA-Hibernate. First of all let&#39;s clear that \r\n*why trying to read a lazy collection throws exceptions and not just simply returns NULL for converting or further use cases?*.\r\n\r\nThat&#39;s because Null fields in Databases especially in joined columns have meaning and not simply not-presented state, like programming languages. \r\nwhen you&#39;re trying to interpret a lazy collection to Null value it means (on Datastore-side) there is no relations between these entities and it&#39;s not true. so throwing exception is some kind of best-practice and you have to deal with that not the Hibernate.\r\n\r\nSo as mentioned above I recommend to :\r\n\r\n1. Detach the desired object before modifying it or using stateless session for querying\r\n2. Manipulate lazy fields to desired values (zero,null,etc.)\r\n\r\nalso as described in other answers there are plenty of approaches(eager fetch, joining etc.) or libraries and methods for doing that, but you have to setting up your view of what&#39;s happening before dealing with the problem and solving it.","title":"Hibernate: best practice to pull all lazy collections","body":"<p>There are some kind of misunderstanding about lazy collections in JPA-Hibernate. First of all let's clear that \n<em>why trying to read a lazy collection throws exceptions and not just simply returns NULL for converting or further use cases?</em>.</p>\n\n<p>That's because Null fields in Databases especially in joined columns have meaning and not simply not-presented state, like programming languages. \nwhen you're trying to interpret a lazy collection to Null value it means (on Datastore-side) there is no relations between these entities and it's not true. so throwing exception is some kind of best-practice and you have to deal with that not the Hibernate.</p>\n\n<p>So as mentioned above I recommend to :</p>\n\n<ol>\n<li>Detach the desired object before modifying it or using stateless session for querying</li>\n<li>Manipulate lazy fields to desired values (zero,null,etc.)</li>\n</ol>\n\n<p>also as described in other answers there are plenty of approaches(eager fetch, joining etc.) or libraries and methods for doing that, but you have to setting up your view of what's happening before dealing with the problem and solving it.</p>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691552456,"creation_date":1691551959,"answer_id":76864391,"question_id":19928568,"body_markdown":"One way of doing it with more or less standard JPA is to add \r\n\r\n```java\r\n@NamedEntityGraph(includeAllAttributes = true)\r\n```\r\n\r\nTo your entity which will provide a named entity graph that is named the same as your entity (since name is not provided).\r\n\r\nThen assuming you have gotten `entity` from existing methods then the following code can be applied to it\r\n\r\n```java\r\n// this is needed to ensure the existing \r\n// object that you have retrieved is disconnected\r\n// from the entity manager, otherwise the find\r\n// method will return the same object.\r\nentityManager.detach(entity); \r\n\r\n// Locate the entity graph based on the class name of the entity.\r\nEntityGraph&lt;?&gt; entityGraph =\r\n  entityManager.getEntityGraph(\r\n    entityManager\r\n      .getMetamodel()\r\n      .entity(entity.getClass()).getName());\r\n\r\nvar fullyLoadedEntity = entityManager\r\n  .find(\r\n    entity.getClass(), \r\n    entity.getId(), \r\n    Map.of(\r\n      // SpecHints is hibernate specific the value is\r\n      // &quot;jakarta.persistence.loadgraph&quot;\r\n      SpecHints.HINT_SPEC_LOAD_GRAPH, entityGraph,\r\n      // This is needed if you&#39;re using L2 cache otherwise it will\r\n      // use the cached copy and it may not be complete.\r\n      // &quot;jakarta.persistence.cache.retrieveMode&quot;\r\n      SpecHints.HINT_SPEC_CACHE_RETRIEVE_MODE, CacheRetrieveMode.BYPASS\r\n));\r\n```","title":"Hibernate: best practice to pull all lazy collections","body":"<p>One way of doing it with more or less standard JPA is to add</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NamedEntityGraph(includeAllAttributes = true)\n</code></pre>\n<p>To your entity which will provide a named entity graph that is named the same as your entity (since name is not provided).</p>\n<p>Then assuming you have gotten <code>entity</code> from existing methods then the following code can be applied to it</p>\n<pre class=\"lang-java prettyprint-override\"><code>// this is needed to ensure the existing \n// object that you have retrieved is disconnected\n// from the entity manager, otherwise the find\n// method will return the same object.\nentityManager.detach(entity); \n\n// Locate the entity graph based on the class name of the entity.\nEntityGraph&lt;?&gt; entityGraph =\n  entityManager.getEntityGraph(\n    entityManager\n      .getMetamodel()\n      .entity(entity.getClass()).getName());\n\nvar fullyLoadedEntity = entityManager\n  .find(\n    entity.getClass(), \n    entity.getId(), \n    Map.of(\n      // SpecHints is hibernate specific the value is\n      // &quot;jakarta.persistence.loadgraph&quot;\n      SpecHints.HINT_SPEC_LOAD_GRAPH, entityGraph,\n      // This is needed if you're using L2 cache otherwise it will\n      // use the cached copy and it may not be complete.\n      // &quot;jakarta.persistence.cache.retrieveMode&quot;\n      SpecHints.HINT_SPEC_CACHE_RETRIEVE_MODE, CacheRetrieveMode.BYPASS\n));\n</code></pre>\n"}],"owner":{"account_id":2568689,"reputation":45222,"user_id":2761509,"accept_rate":67,"display_name":"VB_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173776,"favorite_count":0,"down_vote_count":0,"up_vote_count":118,"accepted_answer_id":19928738,"answer_count":12,"score":118,"last_activity_date":1691552456,"creation_date":1384257558,"question_id":19928568,"body_markdown":"***What I have:***\r\n\r\n    @Entity\r\n    public class MyEntity {\r\n      @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\r\n      @JoinColumn(name = &quot;myentiy_id&quot;)\r\n      private List&lt;Address&gt; addreses;\r\n    \r\n      @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\r\n      @JoinColumn(name = &quot;myentiy_id&quot;)\r\n      private List&lt;Person&gt; persons;\r\n    \r\n      //....\r\n    }\r\n    \r\n    public void handle() {\r\n    \r\n       Session session = createNewSession();\r\n       MyEntity entity = (MyEntity) session.get(MyEntity.class, entityId);\r\n       proceed(session); // FLUSH, COMMIT, CLOSE session!\r\n    \r\n       Utils.objectToJson(entity); //TROUBLES, because it can&#39;t convert to json lazy collections\r\n    }\r\n\r\n***What a problem:***\r\n\r\nThe problem is that I can&#39;t pull lazy collection after session has been closed. But I also can&#39;t not close a session in *proceed* method. \r\n\r\n***What a solution (coarse solution):***\r\n\r\na) Before session is closed, force hibernate to pull lazy collections\r\n\r\n    entity.getAddresses().size();\r\n    entity.getPersons().size();\r\n\r\n....\r\n\r\nb) Maybe more ellegant way is to use `@Fetch(FetchMode.SUBSELECT)` annotation\r\n\r\n***Question:***\r\n\r\nWhat is a best practice/common way/more ellegant way to do it? Means convert my object to JSON.","title":"Hibernate: best practice to pull all lazy collections","body":"<p><em><strong>What I have:</em></strong></p>\n\n<pre><code>@Entity\npublic class MyEntity {\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\n  @JoinColumn(name = \"myentiy_id\")\n  private List&lt;Address&gt; addreses;\n\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\n  @JoinColumn(name = \"myentiy_id\")\n  private List&lt;Person&gt; persons;\n\n  //....\n}\n\npublic void handle() {\n\n   Session session = createNewSession();\n   MyEntity entity = (MyEntity) session.get(MyEntity.class, entityId);\n   proceed(session); // FLUSH, COMMIT, CLOSE session!\n\n   Utils.objectToJson(entity); //TROUBLES, because it can't convert to json lazy collections\n}\n</code></pre>\n\n<p><em><strong>What a problem:</em></strong></p>\n\n<p>The problem is that I can't pull lazy collection after session has been closed. But I also can't not close a session in <em>proceed</em> method. </p>\n\n<p><em><strong>What a solution (coarse solution):</em></strong></p>\n\n<p>a) Before session is closed, force hibernate to pull lazy collections</p>\n\n<pre><code>entity.getAddresses().size();\nentity.getPersons().size();\n</code></pre>\n\n<p>....</p>\n\n<p>b) Maybe more ellegant way is to use <code>@Fetch(FetchMode.SUBSELECT)</code> annotation</p>\n\n<p><em><strong>Question:</em></strong></p>\n\n<p>What is a best practice/common way/more ellegant way to do it? Means convert my object to JSON.</p>\n"},{"tags":["java","android","firebase","object"],"answers":[{"tags":[],"owner":{"account_id":6220785,"reputation":9,"user_id":4840477,"display_name":"dee"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691551682,"creation_date":1691551682,"answer_id":76864377,"question_id":76863772,"body_markdown":"I figured it out.\r\n\r\nIt turns out I wrote wrong syntax for `readParcelable()` it should be `readParcelable(Anak.class.getClassLoader());` instead of `readParcelable(Anak.getClass().getClassLoader());`\r\n\r\nso in essence it is (Your Class)**.class**.getClassLoader();\r\n\r\nI hope this helps other who is getting this error thrown","title":"Null pointer exception when retrieving Parcelable Object &#39;java.lang.Class java.lang.Object.getClass()&#39; even though said object exists inside Database","body":"<p>I figured it out.</p>\n<p>It turns out I wrote wrong syntax for <code>readParcelable()</code> it should be <code>readParcelable(Anak.class.getClassLoader());</code> instead of <code>readParcelable(Anak.getClass().getClassLoader());</code></p>\n<p>so in essence it is (Your Class)<strong>.class</strong>.getClassLoader();</p>\n<p>I hope this helps other who is getting this error thrown</p>\n"}],"owner":{"account_id":6220785,"reputation":9,"user_id":4840477,"display_name":"dee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691551682,"creation_date":1691538783,"question_id":76863772,"body_markdown":"Hi my app suddenly returns null pointer when I tried retrieving data from database. I was inputting a data with a model and then retrieving it with same model but it throws null pointer exception saying a object is null even though it exists.\r\n\r\nThe problem is happening inside the model object instead of the activity file.\r\n\r\nHere is the Diary Model where the problem occurs :\r\n\r\n\r\n```\r\npublic class Diary implements Parcelable {\r\n    @SerializedName(&quot;ID&quot;)\r\n    @Expose\r\n    private String ID;\r\n\r\n    @SerializedName(&quot;ID Anak&quot;)\r\n    @Expose\r\n    private String IDAnak;\r\n\r\n    @SerializedName(&quot;Nama Anak&quot;)\r\n    @Expose\r\n    private String NamaAnak;\r\n    //Other Declarations\r\n    .\r\n    .\r\n    .\r\n\r\n    @SerializedName(&quot;Anak&quot;)\r\n    @Expose\r\n    private Anak Anak;\r\n    //Other declarations\r\n    .\r\n    .\r\n    .\r\n\r\n    protected Diary(Parcel parcel){\r\n        this.ID = parcel.readString();\r\n        this.TanggalDiary = parcel.readString();\r\n        this.IDAnak = parcel.readString();\r\n        this.IDKamar = parcel.readString();\r\n        this.NIA = parcel.readString();\r\n        this.NamaAnak = parcel.readString();\r\n        **this.Anak = parcel.readParcelable(Anak.getClass().getClassLoader()); //Here is where the problem is**\r\n        this.NamaKamar = parcel.readString();\r\n        this.IDAyah = parcel.readString();\r\n        this.NamaAyah = parcel.readString();\r\n        this.IDIbu = parcel.readString();\r\n        this.NamaIbu = parcel.readString();\r\n        this.Sarapan = parcel.readString();\r\n        this.Susu = parcel.readString();\r\n        this.SnackPagi = parcel.readString();\r\n        this.MakanSiang = parcel.readString();\r\n        this.TidurSiang = parcel.readString();\r\n        this.SnackSore = parcel.readString();\r\n        this.MakanSore = parcel.readString();\r\n        this.BAB = parcel.readString();\r\n        this.MinumObat = parcel.readString();\r\n        this.Catatan = parcel.readString();\r\n        this.Photo = parcel.readString();\r\n        this.PhotoURL = parcel.readString();\r\n    }\r\n\r\n    @Override\r\n    public void writeToParcel(Parcel parcel, int i){\r\n        parcel.writeString(getID());\r\n        parcel.writeString(getTanggalDiary());\r\n        parcel.writeString(getIDAnak());\r\n        parcel.writeString(getIDKamar());\r\n        parcel.writeString(getNIA());\r\n        parcel.writeString(getNamaAnak());\r\n        parcel.writeParcelable(getAnak(), i);\r\n        parcel.writeString(getNamaKamar());\r\n        parcel.writeString(getIDAyah());\r\n        parcel.writeString(getNamaAyah());\r\n        parcel.writeString(getIDIbu());\r\n        parcel.writeString(getNamaIbu());\r\n        parcel.writeString(getSarapan());\r\n        parcel.writeString(getSusu());\r\n        parcel.writeString(getSnackPagi());\r\n        parcel.writeString(getMakanSiang());\r\n        parcel.writeString(getTidurSiang());\r\n        parcel.writeString(getSnackSore());\r\n        parcel.writeString(getMakanSore());\r\n        parcel.writeString(getBAB());\r\n        parcel.writeString(getMinumObat());\r\n        parcel.writeString(getCatatan());\r\n        parcel.writeString(getPhoto());\r\n        parcel.writeString(getPhotoURL());\r\n    }\r\n\r\n    public Diary() {\r\n    }\r\n\r\n    public Diary(String ID,String TanggalDiary, String IDAnak, String IDKamar,String NIA, String NamaAnak, Anak Anak, String NamaKamar,String NamaKamarSearch,\r\n                 String IDAyah, String NamaAyah, String NamaAyahSearch, String IDIbu, String NamaIbu, String NamaIbuSearch,\r\n                 String Sarapan, String Susu, String SnackPagi, String MakanSiang, String TidurSiang, String SnackSore,\r\n                 String MakanSore,String BAB, String MinumObat, String Catatan, String Photo, String PhotoURL, String CreatedBy, String CreatedIP, String CreatedPosition,\r\n                 String CreatedDate, String ModifiedBy, String ModifiedIP, String ModifiedPosition, String ModifiedDate,\r\n                   boolean IsActive) {\r\n        this.ID = ID;\r\n        this.TanggalDiary = TanggalDiary;\r\n        this.IDAnak = IDAnak;\r\n        this.IDKamar = IDKamar;\r\n        this.NIA = NIA;\r\n        this.NamaAnak = NamaAnak;\r\n        this.Anak = Anak;\r\n        this.NamaKamar = NamaKamar;\r\n        this.NamaKamarSearch = NamaKamarSearch;\r\n        this.IDAyah = IDAyah;\r\n        this.NamaAyah = NamaAyah;\r\n        this.NamaAyahSearch = NamaAyahSearch;\r\n        this.IDIbu = IDIbu;\r\n        this.NamaIbu = NamaIbu;\r\n        this.NamaIbuSearch = NamaIbuSearch;\r\n        this.Sarapan = Sarapan;\r\n        this.Susu = Susu;\r\n        this.SnackPagi = SnackPagi;\r\n        this.MakanSiang = MakanSiang;\r\n        this.TidurSiang = TidurSiang;\r\n        this.SnackSore = SnackSore;\r\n        this.MakanSore = MakanSore;\r\n        this.BAB = BAB;\r\n        this.MinumObat = MinumObat;\r\n        this.Catatan = Catatan;\r\n        this.Photo = Photo;\r\n        this.PhotoURL = PhotoURL;\r\n\r\n        this.CreatedBy = CreatedBy;\r\n        this.CreatedIP = CreatedIP;\r\n        this.CreatedPosition = CreatedPosition;\r\n        this.CreatedDate = CreatedDate;\r\n\r\n        this.ModifiedBy = ModifiedBy;\r\n        this.ModifiedIP = ModifiedIP;\r\n        this.ModifiedPosition = ModifiedPosition;\r\n        this.ModifiedDate = ModifiedDate;\r\n\r\n        this.IsActive = IsActive;\r\n    }\r\n\r\n    public String getID() {\r\n        return ID;\r\n    }\r\n\r\n    public void setID(String ID) {\r\n        this.ID = ID;\r\n    }\r\n    \r\n    public String getTanggalDiary() {return TanggalDiary; }\r\n    \r\n    public void setTanggalDiary(String tanggalDiary) { this.TanggalDiary = tanggalDiary; }\r\n\r\n    public String getIDAnak() { return IDAnak; }\r\n\r\n    public void setIDAnak(String idAnak) { this.IDAnak = idAnak; }\r\n\r\n    public String getIDKamar() {return IDKamar; }\r\n\r\n    public void setIDKamar(String idKamar) { this.IDKamar = idKamar; }\r\n\r\n    public String getNIA() {return NIA;}\r\n\r\n    public void setNIA(String nia) { this.NIA = nia; }\r\n\r\n    public String getNamaAnak() {\r\n        return NamaAnak;\r\n    }\r\n\r\n    public void setNamaAnak(String NamaAnak) {\r\n        this.NamaAnak = NamaAnak;\r\n    }\r\n\r\n    public Anak getAnak() {return Anak;}\r\n\r\n    public void  setAnak(Anak Anak) {this.Anak = Anak;}\r\n\r\n    public String getNamaAnakSearch() { return  NamaAnakSearch; }\r\n\r\n    public void setNamaAnakSearch(String NamaAnakSearch) { this.NamaAnakSearch = NamaAnakSearch; }\r\n\r\n    public String getIDAyah() {return IDAyah;}\r\n\r\n    public void setIDAyah(String IDAyah) {this.IDAyah = IDAyah; }\r\n\r\n    public String getNamaAyah() {return NamaAyah;}\r\n\r\n    public void setNamaAyah(String NamaAyah) {this.NamaAyah = NamaAyah;}\r\n\r\n    public String getNamaAyahSearch() {return NamaAyahSearch;}\r\n\r\n    public void setNamaAyahSearch(String NamaAyahSearch) {this.NamaAyahSearch = NamaAyahSearch;}\r\n\r\n    public String getIDIbu() {return IDIbu; }\r\n\r\n    public void setIDIbu(String IDIbu) {this.IDIbu = IDIbu;}\r\n\r\n    public String getNamaIbu() {return NamaIbu = NamaIbu;}\r\n\r\n    public void setNamaIbu(String NamaIbu) {this.NamaIbu = NamaIbu;}\r\n\r\n    public String getNamaIbuSearch() {return NamaIbuSearch ;}\r\n\r\n    public void setNamaIbuSearch(String NamaIbuSearch) {this.NamaIbuSearch = NamaIbuSearch;}\r\n\r\n    public String getNamaKamar() {\r\n        return NamaKamar;\r\n    }\r\n\r\n    public void setNamaKamar(String NamaKamar) {\r\n        this.NamaKamar = NamaKamar;\r\n    }\r\n\r\n    public String getNamaKamarSearch() { return NamaKamarSearch; }\r\n\r\n    public void setNamaKamarSearch(String NamaKamarSearch) { this.NamaKamarSearch = NamaKamarSearch; }\r\n\r\n    public String getSarapan() {return Sarapan;}\r\n\r\n    public void setSarapan(String Sarapan) { this.Sarapan = Sarapan; }\r\n\r\n    public String getSusu() {return Susu;}\r\n\r\n    public void setSusu(String Susu) {this.Susu = Susu;}\r\n\r\n    public String getSnackPagi() { return SnackPagi; }\r\n\r\n    public void setSnackPagi(String SnackPagi) { this.SnackPagi = SnackPagi; }\r\n\r\n    public String getMakanSiang() { return MakanSiang; }\r\n\r\n    public void setMakanSiang(String MakanSiang) { this.MakanSiang = MakanSiang; }\r\n\r\n    public String getTidurSiang() { return TidurSiang; }\r\n\r\n    public void setTidurSiang(String TidurSiang) {this.TidurSiang = TidurSiang;}\r\n\r\n    public String getSnackSore() { return SnackSore; }\r\n\r\n    public void setSnackSore(String snackSore) { this.SnackSore = snackSore; }\r\n\r\n    public String getMakanSore() { return MakanSore; }\r\n\r\n    public void setMakanSore(String MakanSore) { this.MakanSore = MakanSore; }\r\n\r\n    public String getBAB() { return BAB; }\r\n\r\n    public void setBAB(String bab) {this.BAB = bab; }\r\n\r\n    public String getMinumObat() {return MinumObat;}\r\n\r\n    public void setMinumObat(String MinumObat) {this.MinumObat = MinumObat; }\r\n\r\n    public String getCatatan() { return Catatan; }\r\n\r\n    public void setCatatan(String catatan) { this.Catatan = catatan;}\r\n\r\n    public String getPhoto() {\r\n        return Photo;\r\n    }\r\n\r\n    public void setPhoto(String Photo) {\r\n        this.Photo = Photo;\r\n    }\r\n\r\n    public String getPhotoURL() {\r\n        return PhotoURL;\r\n    }\r\n\r\n    public void setPhotoURL(String PhotoURL) {\r\n        this.PhotoURL = PhotoURL;\r\n    }\r\n\r\n    public String getCreatedBy() {\r\n        return CreatedBy;\r\n    }\r\n\r\n    public void setCreatedBy(String CreatedBy) {\r\n        this.CreatedBy = CreatedBy;\r\n    }\r\n\r\n    public String getCreatedIP() {\r\n        return CreatedIP;\r\n    }\r\n\r\n    public void setCreatedIP(String CreatedIP) {\r\n        this.CreatedIP = CreatedIP;\r\n    }\r\n\r\n    public String getCreatedPosition() {\r\n        return CreatedPosition;\r\n    }\r\n\r\n    public void setCreatedPosition(String CreatedPosition) {\r\n        this.CreatedPosition = CreatedPosition;\r\n    }\r\n\r\n    public String getCreatedDate() {\r\n        return CreatedDate;\r\n    }\r\n\r\n    public void setCreatedDate(String CreatedDate) {\r\n        this.CreatedDate = CreatedDate;\r\n    }\r\n\r\n    public String getModifiedBy() {\r\n        return ModifiedBy;\r\n    }\r\n\r\n    public void setModifiedBy(String ModifiedBy) {\r\n        this.ModifiedBy = ModifiedBy;\r\n    }\r\n\r\n    public String getModifiedIP() {\r\n        return ModifiedIP;\r\n    }\r\n\r\n    public void setModifiedIP(String ModifiedIP) {\r\n        this.ModifiedIP = ModifiedIP;\r\n    }\r\n\r\n    public String getModifiedPosition() {\r\n        return ModifiedPosition;\r\n    }\r\n\r\n    public void setModifiedPosition(String ModifiedPosition) {\r\n        this.ModifiedPosition = ModifiedPosition;\r\n    }\r\n\r\n    public String getModifiedDate() {\r\n        return ModifiedDate;\r\n    }\r\n\r\n    public void setModifiedDate(String ModifiedDate) {\r\n        this.ModifiedDate = ModifiedDate;\r\n    }\r\n\r\n    public Boolean getIsActive() {\r\n        return IsActive;\r\n    }\r\n\r\n    public void setIsActive(Boolean IsActive) {\r\n        this.IsActive = IsActive;\r\n    }\r\n\r\n    @Override\r\n    public int describeContents(){ return  0;}\r\n\r\n    public static final Parcelable.Creator&lt;Diary&gt; CREATOR = new Parcelable.Creator&lt;Diary&gt;() {\r\n        @Override\r\n        public Diary createFromParcel(Parcel parcel) { return new Diary(parcel); }\r\n\r\n        @Override\r\n        public Diary[] newArray(int i) { return new Diary[i ]; }\r\n    };\r\n\r\n    @Override\r\n    public String toString() {\r\n        return this.NamaAnak;            // What to display in the Spinner list.\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nAnd here is the Logcat :\r\n\r\n\r\n```\r\nThrowable caught in onActivityCreated: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.Class java.lang.Object.getClass()&#39; on a null object reference: m.ki.onActivityCreated(:com.google.android.gms.dynamite_measurementdynamite@233013037@23.30.13 (150400-0):44)\r\n2023-08-09 06:44:15.606  5193-5193  AndroidRuntime          com.example.sekolahadmin             E  FATAL EXCEPTION: main\r\n    Process: com.example.sekolahadmin, PID: 5193\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sekolahadmin/com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.Class java.lang.Object.getClass()&#39; on a null object reference\r\n    \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3598)\r\n    \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3770)\r\n    \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n    \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n    \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n    \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2202)\r\n    \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n    \tat android.os.Looper.loop(Looper.java:236)\r\n    \tat android.app.ActivityThread.main(ActivityThread.java:8096)\r\n    \tat java.lang.reflect.Method.invoke(Native Method)\r\n    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)\r\n    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)\r\n    Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.Class java.lang.Object.getClass()&#39; on a null object reference\r\n    \tat com.example.sekolahadmin.Model.Diary.&lt;init&gt;(Diary.java:161)\r\n    \tat com.example.sekolahadmin.Model.Diary$1.createFromParcel(Diary.java:468)\r\n    \tat com.example.sekolahadmin.Model.Diary$1.createFromParcel(Diary.java:466)\r\n    \tat android.os.Parcel.readParcelable(Parcel.java:3284)\r\n    \tat android.os.Parcel.readValue(Parcel.java:3177)\r\n    \tat android.os.Parcel.readArrayMapInternal(Parcel.java:3575)\r\n    \tat android.os.BaseBundle.initializeFromParcelLocked(BaseBundle.java:292)\r\n    \tat android.os.BaseBundle.unparcel(BaseBundle.java:236)\r\n    \tat android.os.Bundle.getParcelable(Bundle.java:1001)\r\n    \tat android.content.Intent.getParcelableExtra(Intent.java:8288)\r\n    \tat com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity.initIntent(DetailDiaryActivity.java:89)\r\n    \tat com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity.onCreate(DetailDiaryActivity.java:51)\r\n    \tat android.app.Activity.performCreate(Activity.java:8142)\r\n    \tat android.app.Activity.performCreate(Activity.java:8114)\r\n    \tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1308)\r\n    \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3571)\r\n    \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3770)&#160;\r\n    \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)&#160;\r\n    \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n    \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n    \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2202)&#160;\r\n    \tat android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n    \tat android.os.Looper.loop(Looper.java:236)&#160;\r\n    \tat android.app.ActivityThread.main(ActivityThread.java:8096)&#160;\r\n    \tat java.lang.reflect.Method.invoke(Native Method)&#160;\r\n    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)&#160;\r\n    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)&#160;\r\n\r\n```\r\n\r\nThis is my database looks like : [![This is how my database looks like](https://i.stack.imgur.com/1yrXo.png)](https://i.stack.imgur.com/1yrXo.png) My Database is Firebase\r\n\r\nShould I include my Anak.java Model too?\r\n\r\nI don&#39;t know what&#39;s the problem here, the object in question is there but Android thinks it is null\r\n\r\nPlease help enlightening me\r\n\r\nAt first I thought the problem is in Anak.java Model so I fixed it the object but it sill throws the same error, best I can do is to remove the Anak object from Diary and substitute it with different way but If possible I want to do it right with getParcelable","title":"Null pointer exception when retrieving Parcelable Object &#39;java.lang.Class java.lang.Object.getClass()&#39; even though said object exists inside Database","body":"<p>Hi my app suddenly returns null pointer when I tried retrieving data from database. I was inputting a data with a model and then retrieving it with same model but it throws null pointer exception saying a object is null even though it exists.</p>\n<p>The problem is happening inside the model object instead of the activity file.</p>\n<p>Here is the Diary Model where the problem occurs :</p>\n<pre><code>public class Diary implements Parcelable {\n    @SerializedName(&quot;ID&quot;)\n    @Expose\n    private String ID;\n\n    @SerializedName(&quot;ID Anak&quot;)\n    @Expose\n    private String IDAnak;\n\n    @SerializedName(&quot;Nama Anak&quot;)\n    @Expose\n    private String NamaAnak;\n    //Other Declarations\n    .\n    .\n    .\n\n    @SerializedName(&quot;Anak&quot;)\n    @Expose\n    private Anak Anak;\n    //Other declarations\n    .\n    .\n    .\n\n    protected Diary(Parcel parcel){\n        this.ID = parcel.readString();\n        this.TanggalDiary = parcel.readString();\n        this.IDAnak = parcel.readString();\n        this.IDKamar = parcel.readString();\n        this.NIA = parcel.readString();\n        this.NamaAnak = parcel.readString();\n        **this.Anak = parcel.readParcelable(Anak.getClass().getClassLoader()); //Here is where the problem is**\n        this.NamaKamar = parcel.readString();\n        this.IDAyah = parcel.readString();\n        this.NamaAyah = parcel.readString();\n        this.IDIbu = parcel.readString();\n        this.NamaIbu = parcel.readString();\n        this.Sarapan = parcel.readString();\n        this.Susu = parcel.readString();\n        this.SnackPagi = parcel.readString();\n        this.MakanSiang = parcel.readString();\n        this.TidurSiang = parcel.readString();\n        this.SnackSore = parcel.readString();\n        this.MakanSore = parcel.readString();\n        this.BAB = parcel.readString();\n        this.MinumObat = parcel.readString();\n        this.Catatan = parcel.readString();\n        this.Photo = parcel.readString();\n        this.PhotoURL = parcel.readString();\n    }\n\n    @Override\n    public void writeToParcel(Parcel parcel, int i){\n        parcel.writeString(getID());\n        parcel.writeString(getTanggalDiary());\n        parcel.writeString(getIDAnak());\n        parcel.writeString(getIDKamar());\n        parcel.writeString(getNIA());\n        parcel.writeString(getNamaAnak());\n        parcel.writeParcelable(getAnak(), i);\n        parcel.writeString(getNamaKamar());\n        parcel.writeString(getIDAyah());\n        parcel.writeString(getNamaAyah());\n        parcel.writeString(getIDIbu());\n        parcel.writeString(getNamaIbu());\n        parcel.writeString(getSarapan());\n        parcel.writeString(getSusu());\n        parcel.writeString(getSnackPagi());\n        parcel.writeString(getMakanSiang());\n        parcel.writeString(getTidurSiang());\n        parcel.writeString(getSnackSore());\n        parcel.writeString(getMakanSore());\n        parcel.writeString(getBAB());\n        parcel.writeString(getMinumObat());\n        parcel.writeString(getCatatan());\n        parcel.writeString(getPhoto());\n        parcel.writeString(getPhotoURL());\n    }\n\n    public Diary() {\n    }\n\n    public Diary(String ID,String TanggalDiary, String IDAnak, String IDKamar,String NIA, String NamaAnak, Anak Anak, String NamaKamar,String NamaKamarSearch,\n                 String IDAyah, String NamaAyah, String NamaAyahSearch, String IDIbu, String NamaIbu, String NamaIbuSearch,\n                 String Sarapan, String Susu, String SnackPagi, String MakanSiang, String TidurSiang, String SnackSore,\n                 String MakanSore,String BAB, String MinumObat, String Catatan, String Photo, String PhotoURL, String CreatedBy, String CreatedIP, String CreatedPosition,\n                 String CreatedDate, String ModifiedBy, String ModifiedIP, String ModifiedPosition, String ModifiedDate,\n                   boolean IsActive) {\n        this.ID = ID;\n        this.TanggalDiary = TanggalDiary;\n        this.IDAnak = IDAnak;\n        this.IDKamar = IDKamar;\n        this.NIA = NIA;\n        this.NamaAnak = NamaAnak;\n        this.Anak = Anak;\n        this.NamaKamar = NamaKamar;\n        this.NamaKamarSearch = NamaKamarSearch;\n        this.IDAyah = IDAyah;\n        this.NamaAyah = NamaAyah;\n        this.NamaAyahSearch = NamaAyahSearch;\n        this.IDIbu = IDIbu;\n        this.NamaIbu = NamaIbu;\n        this.NamaIbuSearch = NamaIbuSearch;\n        this.Sarapan = Sarapan;\n        this.Susu = Susu;\n        this.SnackPagi = SnackPagi;\n        this.MakanSiang = MakanSiang;\n        this.TidurSiang = TidurSiang;\n        this.SnackSore = SnackSore;\n        this.MakanSore = MakanSore;\n        this.BAB = BAB;\n        this.MinumObat = MinumObat;\n        this.Catatan = Catatan;\n        this.Photo = Photo;\n        this.PhotoURL = PhotoURL;\n\n        this.CreatedBy = CreatedBy;\n        this.CreatedIP = CreatedIP;\n        this.CreatedPosition = CreatedPosition;\n        this.CreatedDate = CreatedDate;\n\n        this.ModifiedBy = ModifiedBy;\n        this.ModifiedIP = ModifiedIP;\n        this.ModifiedPosition = ModifiedPosition;\n        this.ModifiedDate = ModifiedDate;\n\n        this.IsActive = IsActive;\n    }\n\n    public String getID() {\n        return ID;\n    }\n\n    public void setID(String ID) {\n        this.ID = ID;\n    }\n    \n    public String getTanggalDiary() {return TanggalDiary; }\n    \n    public void setTanggalDiary(String tanggalDiary) { this.TanggalDiary = tanggalDiary; }\n\n    public String getIDAnak() { return IDAnak; }\n\n    public void setIDAnak(String idAnak) { this.IDAnak = idAnak; }\n\n    public String getIDKamar() {return IDKamar; }\n\n    public void setIDKamar(String idKamar) { this.IDKamar = idKamar; }\n\n    public String getNIA() {return NIA;}\n\n    public void setNIA(String nia) { this.NIA = nia; }\n\n    public String getNamaAnak() {\n        return NamaAnak;\n    }\n\n    public void setNamaAnak(String NamaAnak) {\n        this.NamaAnak = NamaAnak;\n    }\n\n    public Anak getAnak() {return Anak;}\n\n    public void  setAnak(Anak Anak) {this.Anak = Anak;}\n\n    public String getNamaAnakSearch() { return  NamaAnakSearch; }\n\n    public void setNamaAnakSearch(String NamaAnakSearch) { this.NamaAnakSearch = NamaAnakSearch; }\n\n    public String getIDAyah() {return IDAyah;}\n\n    public void setIDAyah(String IDAyah) {this.IDAyah = IDAyah; }\n\n    public String getNamaAyah() {return NamaAyah;}\n\n    public void setNamaAyah(String NamaAyah) {this.NamaAyah = NamaAyah;}\n\n    public String getNamaAyahSearch() {return NamaAyahSearch;}\n\n    public void setNamaAyahSearch(String NamaAyahSearch) {this.NamaAyahSearch = NamaAyahSearch;}\n\n    public String getIDIbu() {return IDIbu; }\n\n    public void setIDIbu(String IDIbu) {this.IDIbu = IDIbu;}\n\n    public String getNamaIbu() {return NamaIbu = NamaIbu;}\n\n    public void setNamaIbu(String NamaIbu) {this.NamaIbu = NamaIbu;}\n\n    public String getNamaIbuSearch() {return NamaIbuSearch ;}\n\n    public void setNamaIbuSearch(String NamaIbuSearch) {this.NamaIbuSearch = NamaIbuSearch;}\n\n    public String getNamaKamar() {\n        return NamaKamar;\n    }\n\n    public void setNamaKamar(String NamaKamar) {\n        this.NamaKamar = NamaKamar;\n    }\n\n    public String getNamaKamarSearch() { return NamaKamarSearch; }\n\n    public void setNamaKamarSearch(String NamaKamarSearch) { this.NamaKamarSearch = NamaKamarSearch; }\n\n    public String getSarapan() {return Sarapan;}\n\n    public void setSarapan(String Sarapan) { this.Sarapan = Sarapan; }\n\n    public String getSusu() {return Susu;}\n\n    public void setSusu(String Susu) {this.Susu = Susu;}\n\n    public String getSnackPagi() { return SnackPagi; }\n\n    public void setSnackPagi(String SnackPagi) { this.SnackPagi = SnackPagi; }\n\n    public String getMakanSiang() { return MakanSiang; }\n\n    public void setMakanSiang(String MakanSiang) { this.MakanSiang = MakanSiang; }\n\n    public String getTidurSiang() { return TidurSiang; }\n\n    public void setTidurSiang(String TidurSiang) {this.TidurSiang = TidurSiang;}\n\n    public String getSnackSore() { return SnackSore; }\n\n    public void setSnackSore(String snackSore) { this.SnackSore = snackSore; }\n\n    public String getMakanSore() { return MakanSore; }\n\n    public void setMakanSore(String MakanSore) { this.MakanSore = MakanSore; }\n\n    public String getBAB() { return BAB; }\n\n    public void setBAB(String bab) {this.BAB = bab; }\n\n    public String getMinumObat() {return MinumObat;}\n\n    public void setMinumObat(String MinumObat) {this.MinumObat = MinumObat; }\n\n    public String getCatatan() { return Catatan; }\n\n    public void setCatatan(String catatan) { this.Catatan = catatan;}\n\n    public String getPhoto() {\n        return Photo;\n    }\n\n    public void setPhoto(String Photo) {\n        this.Photo = Photo;\n    }\n\n    public String getPhotoURL() {\n        return PhotoURL;\n    }\n\n    public void setPhotoURL(String PhotoURL) {\n        this.PhotoURL = PhotoURL;\n    }\n\n    public String getCreatedBy() {\n        return CreatedBy;\n    }\n\n    public void setCreatedBy(String CreatedBy) {\n        this.CreatedBy = CreatedBy;\n    }\n\n    public String getCreatedIP() {\n        return CreatedIP;\n    }\n\n    public void setCreatedIP(String CreatedIP) {\n        this.CreatedIP = CreatedIP;\n    }\n\n    public String getCreatedPosition() {\n        return CreatedPosition;\n    }\n\n    public void setCreatedPosition(String CreatedPosition) {\n        this.CreatedPosition = CreatedPosition;\n    }\n\n    public String getCreatedDate() {\n        return CreatedDate;\n    }\n\n    public void setCreatedDate(String CreatedDate) {\n        this.CreatedDate = CreatedDate;\n    }\n\n    public String getModifiedBy() {\n        return ModifiedBy;\n    }\n\n    public void setModifiedBy(String ModifiedBy) {\n        this.ModifiedBy = ModifiedBy;\n    }\n\n    public String getModifiedIP() {\n        return ModifiedIP;\n    }\n\n    public void setModifiedIP(String ModifiedIP) {\n        this.ModifiedIP = ModifiedIP;\n    }\n\n    public String getModifiedPosition() {\n        return ModifiedPosition;\n    }\n\n    public void setModifiedPosition(String ModifiedPosition) {\n        this.ModifiedPosition = ModifiedPosition;\n    }\n\n    public String getModifiedDate() {\n        return ModifiedDate;\n    }\n\n    public void setModifiedDate(String ModifiedDate) {\n        this.ModifiedDate = ModifiedDate;\n    }\n\n    public Boolean getIsActive() {\n        return IsActive;\n    }\n\n    public void setIsActive(Boolean IsActive) {\n        this.IsActive = IsActive;\n    }\n\n    @Override\n    public int describeContents(){ return  0;}\n\n    public static final Parcelable.Creator&lt;Diary&gt; CREATOR = new Parcelable.Creator&lt;Diary&gt;() {\n        @Override\n        public Diary createFromParcel(Parcel parcel) { return new Diary(parcel); }\n\n        @Override\n        public Diary[] newArray(int i) { return new Diary[i ]; }\n    };\n\n    @Override\n    public String toString() {\n        return this.NamaAnak;            // What to display in the Spinner list.\n    }\n}\n\n</code></pre>\n<p>And here is the Logcat :</p>\n<pre><code>Throwable caught in onActivityCreated: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Class java.lang.Object.getClass()' on a null object reference: m.ki.onActivityCreated(:com.google.android.gms.dynamite_measurementdynamite@233013037@23.30.13 (150400-0):44)\n2023-08-09 06:44:15.606  5193-5193  AndroidRuntime          com.example.sekolahadmin             E  FATAL EXCEPTION: main\n    Process: com.example.sekolahadmin, PID: 5193\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sekolahadmin/com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Class java.lang.Object.getClass()' on a null object reference\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3598)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3770)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2202)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:236)\n        at android.app.ActivityThread.main(ActivityThread.java:8096)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)\n    Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Class java.lang.Object.getClass()' on a null object reference\n        at com.example.sekolahadmin.Model.Diary.&lt;init&gt;(Diary.java:161)\n        at com.example.sekolahadmin.Model.Diary$1.createFromParcel(Diary.java:468)\n        at com.example.sekolahadmin.Model.Diary$1.createFromParcel(Diary.java:466)\n        at android.os.Parcel.readParcelable(Parcel.java:3284)\n        at android.os.Parcel.readValue(Parcel.java:3177)\n        at android.os.Parcel.readArrayMapInternal(Parcel.java:3575)\n        at android.os.BaseBundle.initializeFromParcelLocked(BaseBundle.java:292)\n        at android.os.BaseBundle.unparcel(BaseBundle.java:236)\n        at android.os.Bundle.getParcelable(Bundle.java:1001)\n        at android.content.Intent.getParcelableExtra(Intent.java:8288)\n        at com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity.initIntent(DetailDiaryActivity.java:89)\n        at com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity.onCreate(DetailDiaryActivity.java:51)\n        at android.app.Activity.performCreate(Activity.java:8142)\n        at android.app.Activity.performCreate(Activity.java:8114)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1308)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3571)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3770) \n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85) \n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2202) \n        at android.os.Handler.dispatchMessage(Handler.java:106) \n        at android.os.Looper.loop(Looper.java:236) \n        at android.app.ActivityThread.main(ActivityThread.java:8096) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011) \n\n</code></pre>\n<p>This is my database looks like : <a href=\"https://i.stack.imgur.com/1yrXo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1yrXo.png\" alt=\"This is how my database looks like\" /></a> My Database is Firebase</p>\n<p>Should I include my Anak.java Model too?</p>\n<p>I don't know what's the problem here, the object in question is there but Android thinks it is null</p>\n<p>Please help enlightening me</p>\n<p>At first I thought the problem is in Anak.java Model so I fixed it the object but it sill throws the same error, best I can do is to remove the Anak object from Diary and substitute it with different way but If possible I want to do it right with getParcelable</p>\n"},{"tags":["java","aws-lambda","aws-api-gateway"],"comments":[{"owner":{"account_id":126310,"reputation":4256,"user_id":322722,"accept_rate":88,"display_name":"cmonkey"},"score":0,"creation_date":1691519362,"post_id":76861939,"comment_id":135501812,"body_markdown":"More info about your request would be helpful. You say you &#39;pass in a query string&#39;. \nIs that as part of the URL? A message body? What mime-type are you sending? What client are you using to send the request? \nSimilar questions may help clarify: https://stackoverflow.com/questions/32057053/how-to-pass-a-params-from-post-to-aws-lambda-from-amazon-api-gateway","body":"More info about your request would be helpful. You say you &#39;pass in a query string&#39;.  Is that as part of the URL? A message body? What mime-type are you sending? What client are you using to send the request?  Similar questions may help clarify: <a href=\"https://stackoverflow.com/questions/32057053/how-to-pass-a-params-from-post-to-aws-lambda-from-amazon-api-gateway\" title=\"how to pass a params from post to aws lambda from amazon api gateway\">stackoverflow.com/questions/32057053/&hellip;</a>"},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1691520462,"post_id":76861939,"comment_id":135502052,"body_markdown":"Have you checked the logs? It should show the stacktrace.","body":"Have you checked the logs? It should show the stacktrace."},{"owner":{"account_id":29038731,"reputation":1,"user_id":22243993,"display_name":"boundliss"},"score":0,"creation_date":1691520699,"post_id":76861939,"comment_id":135502088,"body_markdown":"@cmonkey - I edited the post to add a picture to detail exactly what I did. I hope that clarifies what I did","body":"@cmonkey - I edited the post to add a picture to detail exactly what I did. I hope that clarifies what I did"},{"owner":{"account_id":29038731,"reputation":1,"user_id":22243993,"display_name":"boundliss"},"score":0,"creation_date":1691520785,"post_id":76861939,"comment_id":135502102,"body_markdown":"@AbhijitSarkar Yes, I&#39;m getting an error: &quot;Execution failed due to configuration error: Malformed Lambda proxy response&quot;","body":"@AbhijitSarkar Yes, I&#39;m getting an error: &quot;Execution failed due to configuration error: Malformed Lambda proxy response&quot;"}],"answers":[{"tags":[],"owner":{"account_id":29038731,"reputation":1,"user_id":22243993,"display_name":"boundliss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691551667,"creation_date":1691551667,"answer_id":76864374,"question_id":76861939,"body_markdown":"I found the mistake. I had &quot;Use Lambda Proxy integration&quot; on when creating the method. After turning it off, it worked when I put the JSON in the request body of the POST request like so: [enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fzlDe.png","title":"AWS POST API, connected to Lambda Java function, not taking in parameters","body":"<p>I found the mistake. I had &quot;Use Lambda Proxy integration&quot; on when creating the method. After turning it off, it worked when I put the JSON in the request body of the POST request like so: <a href=\"https://i.stack.imgur.com/fzlDe.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":29038731,"reputation":1,"user_id":22243993,"display_name":"boundliss"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691551667,"creation_date":1691515842,"question_id":76861939,"body_markdown":"When trying to test my AWS REST API POST method that&#39;s connected to my Java Lambda function, I get an error `{&quot;message&quot;: &quot;Internal server error&quot;}` when I pass in: `userID=5&amp;name=test` as a query string like so: [enter image description here][1]\r\n\r\nI want to do the same as thing as going into Lambda Test console and typing in:\r\n```\r\n{\r\n  &quot;userID&quot;: 5\r\n  &quot;name&quot;: &quot;test&quot;\r\n}\r\n```\r\nin the &quot;Event JSON&quot; part (which works fine in Lambda), but when I try to replicate it through the API, it doesn&#39;t work.\r\n\r\nThis is my Java code:\r\n```\r\nimport com.amazonaws.services.lambda.runtime.Context;\r\nimport com.amazonaws.services.lambda.runtime.LambdaLogger;\r\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\r\n\r\npublic class Launcher implements RequestHandler&lt;Launcher.CompanyRecord, String&gt;{\r\n\r\n    public String handleRequest(CompanyRecord event, Context context) {\r\n        return String.valueOf(event.userID) + event.name;\r\n    }\r\n\r\n    record CompanyRecord(int userID, String name) {\r\n    }\r\n}\r\n```\r\n\r\n\r\nI&#39;ve also tried passing in\r\n\r\n```\r\n{\r\n  &quot;userID&quot;: 10,\r\n  &quot;name&quot;: &quot;test&quot;\r\n}\r\n```\r\nin the Headers and Request Body (independently), but I still get the same `{&quot;message&quot;: &quot;Internal server error&quot;}`\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bAYUC.png","title":"AWS POST API, connected to Lambda Java function, not taking in parameters","body":"<p>When trying to test my AWS REST API POST method that's connected to my Java Lambda function, I get an error <code>{&quot;message&quot;: &quot;Internal server error&quot;}</code> when I pass in: <code>userID=5&amp;name=test</code> as a query string like so: <a href=\"https://i.stack.imgur.com/bAYUC.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I want to do the same as thing as going into Lambda Test console and typing in:</p>\n<pre><code>{\n  &quot;userID&quot;: 5\n  &quot;name&quot;: &quot;test&quot;\n}\n</code></pre>\n<p>in the &quot;Event JSON&quot; part (which works fine in Lambda), but when I try to replicate it through the API, it doesn't work.</p>\n<p>This is my Java code:</p>\n<pre><code>import com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.LambdaLogger;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\n\npublic class Launcher implements RequestHandler&lt;Launcher.CompanyRecord, String&gt;{\n\n    public String handleRequest(CompanyRecord event, Context context) {\n        return String.valueOf(event.userID) + event.name;\n    }\n\n    record CompanyRecord(int userID, String name) {\n    }\n}\n</code></pre>\n<p>I've also tried passing in</p>\n<pre><code>{\n  &quot;userID&quot;: 10,\n  &quot;name&quot;: &quot;test&quot;\n}\n</code></pre>\n<p>in the Headers and Request Body (independently), but I still get the same <code>{&quot;message&quot;: &quot;Internal server error&quot;}</code></p>\n"},{"tags":["java","performance","cassandra"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1691549678,"post_id":76864260,"comment_id":135505383,"body_markdown":"Please start by answering me this: What is a Java 4+ driver?","body":"Please start by answering me this: What is a Java 4+ driver?"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1691549895,"post_id":76864260,"comment_id":135505397,"body_markdown":"Please read How to Ask: https://stackoverflow.com/help/how-to-ask. This questions doesn&#39;t make sense.","body":"Please read How to Ask: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>. This questions doesn&#39;t make sense."}],"answers":[{"tags":[],"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691551249,"creation_date":1691551249,"answer_id":76864350,"question_id":76864260,"body_markdown":"Yes, version 4.x of the Java drivers are compatible with Cassandra 3.0 and 3.11 clusters.\r\n\r\nFor details, see the [Java driver compatibility matrix][1].\r\n\r\nWithout knowing details of the issue you are facing, my best guess is that your cluster is overloaded leading to the timeout exceptions. Cheers!\r\n\r\n\r\n  [1]: https://docs.datastax.com/en/driver-matrix/docs/java-drivers.html","title":"Is Java driver 4.x compatible with Cassandra 3.x clusters?","body":"<p>Yes, version 4.x of the Java drivers are compatible with Cassandra 3.0 and 3.11 clusters.</p>\n<p>For details, see the <a href=\"https://docs.datastax.com/en/driver-matrix/docs/java-drivers.html\" rel=\"nofollow noreferrer\">Java driver compatibility matrix</a>.</p>\n<p>Without knowing details of the issue you are facing, my best guess is that your cluster is overloaded leading to the timeout exceptions. Cheers!</p>\n"}],"owner":{"account_id":29188596,"reputation":7,"user_id":22361154,"display_name":"Madhvi Monga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1691551249,"creation_date":1691549328,"question_id":76864260,"body_markdown":"We are using Java 4+ driver with Cassandra 3x cluster and seeing performance issues. \r\n\r\nExpecting good performance intermittently. Seeing a lot of driver timeout exceptions and read timeout exceptions. Any pointers would help.\r\n","title":"Is Java driver 4.x compatible with Cassandra 3.x clusters?","body":"<p>We are using Java 4+ driver with Cassandra 3x cluster and seeing performance issues.</p>\n<p>Expecting good performance intermittently. Seeing a lot of driver timeout exceptions and read timeout exceptions. Any pointers would help.</p>\n"},{"tags":["java","spring","spring-boot","aspectj","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1691561706,"post_id":76864343,"comment_id":135506539,"body_markdown":"Welcome to SO. You should make your problem reproducible, otherwise probably nobody can help you. Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). A GitHub project would be appreciated. Thank you.","body":"Welcome to SO. You should make your problem reproducible, otherwise probably nobody can help you. Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. A GitHub project would be appreciated. Thank you."}],"owner":{"account_id":28938180,"reputation":1,"user_id":22165267,"display_name":"mridhoilyas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691551022,"creation_date":1691551022,"question_id":76864343,"body_markdown":"I&#39;m new in using spring boot\r\n\r\nI&#39;m currently working on a project that requires me to log the execution of a method (elapsed time and result) using aop.\r\n\r\nI can use spring-aop just fine, the problems comes when the aop cannot capture the internal method call (`private` method) and the method call from `new` object.\r\n\r\nAfter browsing through many references, it looks like I should use compile-time weaving (since I have the source code with me)\r\n\r\nmy pom.xml looks like this\r\n\r\n```\r\n&lt;dependencies&gt;\r\n  ...\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n&lt;build&gt;\r\n  &lt;plugins&gt;\r\n    ...\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;1.14.0&lt;/version&gt;\r\n      &lt;configuration&gt;\r\n        &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\r\n        &lt;source&gt;11&lt;/source&gt;\r\n        &lt;target&gt;11&lt;/target&gt;\r\n        &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n        &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n      &lt;/configuration&gt;\r\n      &lt;executions&gt;\r\n        &lt;execution&gt;\r\n          &lt;goals&gt;\r\n            &lt;goal&gt;compile&lt;/goal&gt;\r\n          &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n  &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n```\r\n\r\nWhen I run `mvn clean package`, it shows the advice for the `private` method and the method from `new` object was being weaved, and the project was compiled successfully.\r\n\r\nBut when I start the .jar file and execute the API using Postman, it shows exception error that not occured before I was adding this compile-time weaving such as:\r\n\r\n`feign.codec.DecodeException: Type definition error: [simple type, class someClass]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException`\r\n\r\n`nested exception is java.lang.IllegalArgumentException: Either use @Param on all parameters except Pageable and Sort typed once, or none at all!`\r\n\r\nHow do I achieve this compile-time weaving without causing unnecessary exception when I run the program? because it was just fine when I remove the build plugin for compile-time weaving\r\n\r\nAny response would be appreciated\r\n\r\n**P.S:**\r\n\r\nI have tried using spring-aop with self-injection using `@Autowired` but it causing NPE when the internal method trying to execute `.saveAll()` from `@Autowired` repository and I don&#39;t know how to fix that so I choose this compile-time weaving","title":"Compile-time weaving causing unnecessary error/exception","body":"<p>I'm new in using spring boot</p>\n<p>I'm currently working on a project that requires me to log the execution of a method (elapsed time and result) using aop.</p>\n<p>I can use spring-aop just fine, the problems comes when the aop cannot capture the internal method call (<code>private</code> method) and the method call from <code>new</code> object.</p>\n<p>After browsing through many references, it looks like I should use compile-time weaving (since I have the source code with me)</p>\n<p>my pom.xml looks like this</p>\n<pre><code>&lt;dependencies&gt;\n  ...\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n  &lt;plugins&gt;\n    ...\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n      &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;1.14.0&lt;/version&gt;\n      &lt;configuration&gt;\n        &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\n        &lt;source&gt;11&lt;/source&gt;\n        &lt;target&gt;11&lt;/target&gt;\n        &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n        &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n      &lt;/configuration&gt;\n      &lt;executions&gt;\n        &lt;execution&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;compile&lt;/goal&gt;\n          &lt;/goals&gt;\n        &lt;/execution&gt;\n      &lt;/executions&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>When I run <code>mvn clean package</code>, it shows the advice for the <code>private</code> method and the method from <code>new</code> object was being weaved, and the project was compiled successfully.</p>\n<p>But when I start the .jar file and execute the API using Postman, it shows exception error that not occured before I was adding this compile-time weaving such as:</p>\n<p><code>feign.codec.DecodeException: Type definition error: [simple type, class someClass]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException</code></p>\n<p><code>nested exception is java.lang.IllegalArgumentException: Either use @Param on all parameters except Pageable and Sort typed once, or none at all!</code></p>\n<p>How do I achieve this compile-time weaving without causing unnecessary exception when I run the program? because it was just fine when I remove the build plugin for compile-time weaving</p>\n<p>Any response would be appreciated</p>\n<p><strong>P.S:</strong></p>\n<p>I have tried using spring-aop with self-injection using <code>@Autowired</code> but it causing NPE when the internal method trying to execute <code>.saveAll()</code> from <code>@Autowired</code> repository and I don't know how to fix that so I choose this compile-time weaving</p>\n"},{"tags":["java","android","flutter"],"comments":[{"owner":{"account_id":1650697,"reputation":753,"user_id":1521370,"display_name":"bongo"},"score":0,"creation_date":1675366733,"post_id":75328050,"comment_id":132919386,"body_markdown":"So it looks that you have java 8 installed (class version 52) but this flutter version requires java 11 ( version 55) so easiest solution would be to update java on your machine.","body":"So it looks that you have java 8 installed (class version 52) but this flutter version requires java 11 ( version 55) so easiest solution would be to update java on your machine."},{"owner":{"account_id":24191437,"reputation":379,"user_id":18540229,"display_name":"Daniil"},"score":0,"creation_date":1675662242,"post_id":75328050,"comment_id":132969725,"body_markdown":"I faced the same problem, please help me find a solution","body":"I faced the same problem, please help me find a solution"},{"owner":{"account_id":21705418,"reputation":169,"user_id":16017956,"display_name":"Ajay Jha"},"score":0,"creation_date":1675665514,"post_id":75328050,"comment_id":132970236,"body_markdown":"Maybe there are two java versions installed on your system.","body":"Maybe there are two java versions installed on your system."},{"owner":{"account_id":21705418,"reputation":169,"user_id":16017956,"display_name":"Ajay Jha"},"score":0,"creation_date":1675665549,"post_id":75328050,"comment_id":132970244,"body_markdown":"export JAVA_HOME=$(/usr/libexec/java_home -v&quot;YOUR_VERSION&quot;)\nuse this command it will be resolved","body":"export JAVA_HOME=$(/usr/libexec/java_home -v&quot;YOUR_VERSION&quot;) use this command it will be resolved"}],"answers":[{"tags":[],"owner":{"account_id":5306286,"reputation":141,"user_id":4234055,"display_name":"pddthinh"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1675533412,"creation_date":1675532080,"answer_id":75347026,"question_id":75328050,"body_markdown":"**UPDATE**\r\n\r\nIt turns out there are 2 JDK installed in my environment, you can check by using\r\n```\r\n/usr/libexec/java_home -V\r\n```\r\nso after removing the older JDK version, the issue is fixed.\r\n\r\n-------------------\r\n\r\n\r\nHaving the same error, although here is my `java --version` output\r\n\r\n```\r\njava 19.0.1 2022-10-18\r\nJava(TM) SE Runtime Environment (build 19.0.1+10-21)\r\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)\r\n```\r\nthis happens after I upgrade to flutter 3.7.1","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p><strong>UPDATE</strong></p>\n<p>It turns out there are 2 JDK installed in my environment, you can check by using</p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p>so after removing the older JDK version, the issue is fixed.</p>\n<hr />\n<p>Having the same error, although here is my <code>java --version</code> output</p>\n<pre><code>java 19.0.1 2022-10-18\nJava(TM) SE Runtime Environment (build 19.0.1+10-21)\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)\n</code></pre>\n<p>this happens after I upgrade to flutter 3.7.1</p>\n"},{"tags":[],"owner":{"account_id":4031417,"reputation":105,"user_id":3317358,"display_name":"marc_"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1675641746,"creation_date":1675641118,"answer_id":75356327,"question_id":75328050,"body_markdown":"I&#39;ve had the same error, I haven&#39;t specify JAVA_HOME env, and flutter used my 1.8 java. \r\n\r\nFor macOS: \r\nCheck your JAVA_HOME env\r\nin terminal with \r\n```\r\nprintenv\r\n```\r\nif env not existed, list installed java version \r\n```\r\n/usr/libexec/java_home -V\r\n```\r\nchoose one and execute\r\n\r\n```\r\nexport JAVA_HOME=$(/usr/libexec/java_home -v&quot;YOUR_VERSION&quot;)\r\n```\r\n ","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>I've had the same error, I haven't specify JAVA_HOME env, and flutter used my 1.8 java.</p>\n<p>For macOS:\nCheck your JAVA_HOME env\nin terminal with</p>\n<pre><code>printenv\n</code></pre>\n<p>if env not existed, list installed java version</p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p>choose one and execute</p>\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home -v&quot;YOUR_VERSION&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19927399,"reputation":11,"user_id":14601783,"display_name":"Joseph Yang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675663708,"creation_date":1675663645,"answer_id":75357852,"question_id":75328050,"body_markdown":"You can run the following command to see if you have multiple java versions: \r\n\r\n    /usr/libexec/java_home -V\r\n\r\nIn my case, I had 2 versions on my mac: java 8 and java 19. I followed the official [java website][1] to remove my older version:\r\n\r\n    sudo rm -fr /Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin\r\n\r\n\r\n  [1]: https://www.java.com/en/uninstall/uninstall_instructions.html#:~:text=Windows%20ME-,Click%20Start%2C%20point%20to%20Settings%2C%20and%20then%20click%20the%20Control,with%20the%20Uninstall%2C%20click%20Yes.","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>You can run the following command to see if you have multiple java versions:</p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p>In my case, I had 2 versions on my mac: java 8 and java 19. I followed the official <a href=\"https://www.java.com/en/uninstall/uninstall_instructions.html#:%7E:text=Windows%20ME-,Click%20Start%2C%20point%20to%20Settings%2C%20and%20then%20click%20the%20Control,with%20the%20Uninstall%2C%20click%20Yes.\" rel=\"nofollow noreferrer\">java website</a> to remove my older version:</p>\n<pre><code>sudo rm -fr /Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23307814,"reputation":141,"user_id":17387530,"display_name":"AyeshaA"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1675821596,"creation_date":1675796362,"answer_id":75377828,"question_id":75328050,"body_markdown":"I&#39;m on MacOS Ventura. I installed Android Studio today. This is how I solved the problem:\r\n\r\n 1. Downloaded [JDK19][1] \r\n 2. Followed the steps mentioned at this [link][2]\r\n 3. Since I&#39;m running Android Studio Electric Eel, opened Terminal and ran this command `cd /Applications/Android\\ Studio.app/Contents/jbr`\r\n 4. Then ran this command after `ln -s ../jbr jdk`\r\n 5. And finally, `ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk`\r\n 6. Went to Finder -&gt; Applications -&gt; Android Studio. Right-click Android Studio and select &#39;Show Package Contents&#39;\r\n 7. Created new folder &#39;jre&#39; in folder &#39;Contents&#39;\r\n 8. Copied contents from the &#39;jbr&#39; folder to the &#39;jre&#39; folder\r\n 9. Ran `flutter doctor` again\r\n10. Ran `flutter doctor --android-licenses`.\r\n \r\nI was able to agree to the licenses successfully after.\r\n\r\nAll the steps are also mentioned [here][3] and [here][4]\r\n\r\n \r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/downloads/#jdk19-mac\r\n  [2]: https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\r\n  [3]: https://stackoverflow.com/questions/51281702/unable-to-find-bundled-java-version-on-flutter/68575967#68575967\r\n  [4]: https://levelup.gitconnected.com/how-to-install-flutter-on-macos-6e65dc592449","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>I'm on MacOS Ventura. I installed Android Studio today. This is how I solved the problem:</p>\n<ol>\n<li>Downloaded <a href=\"https://www.oracle.com/java/technologies/downloads/#jdk19-mac\" rel=\"noreferrer\">JDK19</a></li>\n<li>Followed the steps mentioned at this <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"noreferrer\">link</a></li>\n<li>Since I'm running Android Studio Electric Eel, opened Terminal and ran this command <code>cd /Applications/Android\\ Studio.app/Contents/jbr</code></li>\n<li>Then ran this command after <code>ln -s ../jbr jdk</code></li>\n<li>And finally, <code>ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk</code></li>\n<li>Went to Finder -&gt; Applications -&gt; Android Studio. Right-click Android Studio and select 'Show Package Contents'</li>\n<li>Created new folder 'jre' in folder 'Contents'</li>\n<li>Copied contents from the 'jbr' folder to the 'jre' folder</li>\n<li>Ran <code>flutter doctor</code> again</li>\n<li>Ran <code>flutter doctor --android-licenses</code>.</li>\n</ol>\n<p>I was able to agree to the licenses successfully after.</p>\n<p>All the steps are also mentioned <a href=\"https://stackoverflow.com/questions/51281702/unable-to-find-bundled-java-version-on-flutter/68575967#68575967\">here</a> and <a href=\"https://levelup.gitconnected.com/how-to-install-flutter-on-macos-6e65dc592449\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":21595689,"reputation":52,"user_id":15924696,"display_name":"Thura Khant Thein"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1676007457,"creation_date":1676007313,"answer_id":75407320,"question_id":75328050,"body_markdown":"Try This (For Windows)\r\n 1. Uncheck Android SDK command-line Tools (latest)\r\n 2. Check Android SDK command-line Tools 8.0 \r\n 3. Click Apply\r\n 4. In Windows go to \r\n    “C:\\Users\\USERNAME\\AppData\\Local\\Android\\Sdk\\cmdline-tools”  \r\n    and rename the 8.0 folder to “latest”\r\n 5. Run Flutter doctor again.\r\n\r\n","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>Try This (For Windows)</p>\n<ol>\n<li>Uncheck Android SDK command-line Tools (latest)</li>\n<li>Check Android SDK command-line Tools 8.0</li>\n<li>Click Apply</li>\n<li>In Windows go to\n“C:\\Users\\USERNAME\\AppData\\Local\\Android\\Sdk\\cmdline-tools”<br />\nand rename the 8.0 folder to “latest”</li>\n<li>Run Flutter doctor again.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2527433,"reputation":6510,"user_id":2196513,"accept_rate":29,"display_name":"Abhay"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1677129449,"creation_date":1677129449,"answer_id":75540818,"question_id":75328050,"body_markdown":"There is a simple way to resolve this issue.\r\n - Check java version you installed on your machine. If it is version 8, Installed Android SDK Command-line Tools 8.0 &amp; uninstalled latest version.\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bZXeD.png","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>There is a simple way to resolve this issue.</p>\n<ul>\n<li>Check java version you installed on your machine. If it is version 8, Installed Android SDK Command-line Tools 8.0 &amp; uninstalled latest version.\n<a href=\"https://i.stack.imgur.com/bZXeD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bZXeD.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":27914276,"reputation":11,"user_id":21315757,"display_name":"ABI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677726202,"creation_date":1677726118,"answer_id":75610959,"question_id":75328050,"body_markdown":"The problem seems to be when the android studio installed is **Android Studio Electric Eel**\r\n\r\nAll you have to do is:\r\n\r\n 1. Follow this link and ddownload - install this jdk https://www.oracle.com/java/technologies/downloads/#jdk19-mac\r\n 2. After installing, goto **Finder -&gt; Applications -&gt; Android Studio. Right-click on Android Studio and select &#39;Show Package Contents&#39;**\r\n3. Open the **Contents** folder and create new folder and name it **jre**\r\n4. There&#39;s a folder named **jbr** open it and copy the folder inside it and paste it into your newly created folder on step 3 (jre).\r\n5. You can now be able to accept the licences by running- **flutter doctor --android-licences**\r\n \r\n\r\n","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>The problem seems to be when the android studio installed is <strong>Android Studio Electric Eel</strong></p>\n<p>All you have to do is:</p>\n<ol>\n<li>Follow this link and ddownload - install this jdk <a href=\"https://www.oracle.com/java/technologies/downloads/#jdk19-mac\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/downloads/#jdk19-mac</a></li>\n<li>After installing, goto <strong>Finder -&gt; Applications -&gt; Android Studio. Right-click on Android Studio and select 'Show Package Contents'</strong></li>\n<li>Open the <strong>Contents</strong> folder and create new folder and name it <strong>jre</strong></li>\n<li>There's a folder named <strong>jbr</strong> open it and copy the folder inside it and paste it into your newly created folder on step 3 (jre).</li>\n<li>You can now be able to accept the licences by running- <strong>flutter doctor --android-licences</strong></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":21733263,"reputation":319,"user_id":16041661,"display_name":"user128440"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687447881,"creation_date":1687447881,"answer_id":76533506,"question_id":75328050,"body_markdown":"In my case on Windows the reason was that Flutter searched Android SDK Command-line tools under sdk folder instead of Sdk.","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>In my case on Windows the reason was that Flutter searched Android SDK Command-line tools under sdk folder instead of Sdk.</p>\n"},{"tags":[],"owner":{"account_id":29188636,"reputation":1,"user_id":22361190,"display_name":"XanderOps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691549792,"creation_date":1691549792,"answer_id":76864289,"question_id":75328050,"body_markdown":"I found a simple solution to the problem - by updating the JDK directly and then reinstalling Android Studio. I faced a similar issue initially, i use windows 10 pro and here&#39;s how I resolved it:\r\n\r\n - Check for updates for Flutter. In my case, I was using version 3.10.6.\r\n - Verify and update the JDK installed on your system. I upgraded from Java 8 to Java 20.0.2.\r\n - Update Android Studio to the latest version. I was previously using Electric Eel and updated to Giraffe.\r\n - Re-download the SDKs. I had initially downloaded them while on the Electric Eel version, and upon updating, I found that the SDKs didn&#39;t need to be updated separately. This saved me some time. During the uninstallation of Electric Eel, I didn&#39;t delete the SDK cache.\r\n - Run `flutter doctor -v` again and accept android licenses by `flutter doctor --android-licenses`.\r\n\r\nIt&#39;s important to note that Flutter only functions with the most up-to-date version of JAVA, which is closely tied to the version of Android Studio you&#39;re using.","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>I found a simple solution to the problem - by updating the JDK directly and then reinstalling Android Studio. I faced a similar issue initially, i use windows 10 pro and here's how I resolved it:</p>\n<ul>\n<li>Check for updates for Flutter. In my case, I was using version 3.10.6.</li>\n<li>Verify and update the JDK installed on your system. I upgraded from Java 8 to Java 20.0.2.</li>\n<li>Update Android Studio to the latest version. I was previously using Electric Eel and updated to Giraffe.</li>\n<li>Re-download the SDKs. I had initially downloaded them while on the Electric Eel version, and upon updating, I found that the SDKs didn't need to be updated separately. This saved me some time. During the uninstallation of Electric Eel, I didn't delete the SDK cache.</li>\n<li>Run <code>flutter doctor -v</code> again and accept android licenses by <code>flutter doctor --android-licenses</code>.</li>\n</ul>\n<p>It's important to note that Flutter only functions with the most up-to-date version of JAVA, which is closely tied to the version of Android Studio you're using.</p>\n"}],"owner":{"account_id":21705418,"reputation":169,"user_id":16017956,"display_name":"Ajay Jha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14553,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":9,"score":17,"last_activity_date":1691549792,"creation_date":1675365835,"question_id":75328050,"body_markdown":"I am trying to accept flutter doctor --android-licenses but I am getting this error:\r\n\r\n```\r\nError: A JNI error has occurred, please check your installation and try again\r\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/android/prefs/AndroidLocationsProvider has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n```","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>I am trying to accept flutter doctor --android-licenses but I am getting this error:</p>\n<pre><code>Error: A JNI error has occurred, please check your installation and try again\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/android/prefs/AndroidLocationsProvider has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\n</code></pre>\n"},{"tags":["java","android","android-studio","debugging"],"answers":[{"tags":[],"owner":{"account_id":14048539,"reputation":2521,"user_id":10148053,"display_name":"Daniel B."},"down_vote_count":1,"up_vote_count":42,"is_accepted":true,"score":41,"last_activity_date":1546022367,"creation_date":1546022367,"answer_id":53962958,"question_id":53962831,"body_markdown":"You need to restart the ADB. \r\n\r\nkill adb.exe process.\r\n\r\nhttps://stackoverflow.com/questions/29826101/how-to-restart-adb-manually-from-android-studio","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>You need to restart the ADB. </p>\n\n<p>kill adb.exe process.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/29826101/how-to-restart-adb-manually-from-android-studio\">how to restart ADB manually from Android Studio</a></p>\n"},{"tags":[],"owner":{"account_id":1895347,"reputation":502,"user_id":1712446,"display_name":"Azhagthott"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1560245076,"creation_date":1557972406,"answer_id":56159830,"question_id":53962831,"body_markdown":"\r\n\r\nCheck if you have selected the right Build Variant, usually &quot;**release**&quot; comes with `debuggable false`\r\n\r\nExample:\r\n\r\n     buildTypes {\r\n            release {\r\n                debuggable false\r\n                ....\r\n            }\r\n        }\r\n\r\nis not recommendable change **release** to `debuggable true`, just change the right variant\r\n\r\n       debug {\r\n            debuggable true\r\n            ....\r\n        }","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>Check if you have selected the right Build Variant, usually \"<strong>release</strong>\" comes with <code>debuggable false</code></p>\n\n<p>Example:</p>\n\n<pre><code> buildTypes {\n        release {\n            debuggable false\n            ....\n        }\n    }\n</code></pre>\n\n<p>is not recommendable change <strong>release</strong> to <code>debuggable true</code>, just change the right variant</p>\n\n<pre><code>   debug {\n        debuggable true\n        ....\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11626501,"reputation":371,"user_id":8516131,"display_name":"nuwancy"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1560239911,"creation_date":1560239911,"answer_id":56539022,"question_id":53962831,"body_markdown":"In My case, \r\nFor some reason I disabled Instant run and it has changed the Launch value from &quot;Default Activity&quot; to &quot;Nothing&quot; in &quot;Run/Debug configurations&quot;. So always it says &quot;Could not connect to remote process. Aborting debug session&quot; and I was not able to debug. I enabled Instant  and changed the Launch value from &quot;Nothing&quot; to &quot;Default Activity&quot;   in &quot;Run/Debug configurations&quot; and it worked. Hope this will help some one.\r\n\r\n(to get Run/Debug configurations, click &quot;app&quot; drop down and click Edit Configurations)","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>In My case, \nFor some reason I disabled Instant run and it has changed the Launch value from \"Default Activity\" to \"Nothing\" in \"Run/Debug configurations\". So always it says \"Could not connect to remote process. Aborting debug session\" and I was not able to debug. I enabled Instant  and changed the Launch value from \"Nothing\" to \"Default Activity\"   in \"Run/Debug configurations\" and it worked. Hope this will help some one.</p>\n\n<p>(to get Run/Debug configurations, click \"app\" drop down and click Edit Configurations)</p>\n"},{"tags":[],"owner":{"account_id":3083445,"reputation":16847,"user_id":2611161,"accept_rate":57,"display_name":"Kevin ABRIOUX"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1578908462,"creation_date":1578908462,"answer_id":59713936,"question_id":53962831,"body_markdown":"In command line : \r\n\r\n    adb kill-server &amp;&amp; adb start-server\r\n\r\nThis command will restart ADB","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>In command line : </p>\n\n<pre><code>adb kill-server &amp;&amp; adb start-server\n</code></pre>\n\n<p>This command will restart ADB</p>\n"},{"tags":[],"owner":{"account_id":12561968,"reputation":5864,"user_id":9139384,"display_name":"Yennefer"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1581944679,"creation_date":1581944679,"answer_id":60263103,"question_id":53962831,"body_markdown":"By default Android Studio builds the `debug` version of the application. However, during the publishing phase you may have switched to the `release` one as the tutorial suggests.\r\n\r\nADB won&#39;t be able to attach to the application unless you revert to the `debug` configuration **or** you allow to the debug the `release` one.\r\n\r\nIf nothing of this works, you may resort in restarting ADB as explianed in [How to restart ADB manually from Android Studio][1]\r\n\r\n**Revert to debug configuration**\r\n\r\n 1. Choose _Build-&gt;Select Build Variant_\r\n 2. Pick up ``debug`` in the second column\r\n 3. Deploy the application again\r\n\r\n**Allow the release version to be debugged**\r\n\r\n 1. Select your application node in the tree\r\n 2. Right click and choose _Open Module Settings_ (or hit F4)\r\n 3. Select _Build Variants_ on the left\r\n 4. Choose ``release`` on the right\r\n 5. Set ``debuggable`` to ``true``\r\n 6. Apply and deploy the application\r\n\r\nKeep in mind that your life won&#39;t be easy as your application may be optimized and therefore not debugger friendly (e.g. you might not be able to step in certain methods, or view some local variables).\r\n\r\n[1]: https://stackoverflow.com/a/29826345","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>By default Android Studio builds the <code>debug</code> version of the application. However, during the publishing phase you may have switched to the <code>release</code> one as the tutorial suggests.</p>\n\n<p>ADB won't be able to attach to the application unless you revert to the <code>debug</code> configuration <strong>or</strong> you allow to the debug the <code>release</code> one.</p>\n\n<p>If nothing of this works, you may resort in restarting ADB as explianed in <a href=\"https://stackoverflow.com/a/29826345\">How to restart ADB manually from Android Studio</a></p>\n\n<p><strong>Revert to debug configuration</strong></p>\n\n<ol>\n<li>Choose <em>Build->Select Build Variant</em></li>\n<li>Pick up <code>debug</code> in the second column</li>\n<li>Deploy the application again</li>\n</ol>\n\n<p><strong>Allow the release version to be debugged</strong></p>\n\n<ol>\n<li>Select your application node in the tree</li>\n<li>Right click and choose <em>Open Module Settings</em> (or hit F4)</li>\n<li>Select <em>Build Variants</em> on the left</li>\n<li>Choose <code>release</code> on the right</li>\n<li>Set <code>debuggable</code> to <code>true</code></li>\n<li>Apply and deploy the application</li>\n</ol>\n\n<p>Keep in mind that your life won't be easy as your application may be optimized and therefore not debugger friendly (e.g. you might not be able to step in certain methods, or view some local variables).</p>\n"},{"tags":[],"owner":{"account_id":75473,"reputation":1020,"user_id":216479,"accept_rate":50,"display_name":"Sergey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591512377,"creation_date":1591512377,"answer_id":62241844,"question_id":53962831,"body_markdown":"I got this error message when the phone was connected both via wi-fi (using &quot;adb tcpip 5555&quot; and &quot;adb connect 192.168.0.100:5555&quot; commands) and via a usb cable. Disconnecting the USB cable resolved the issue.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I got this error message when the phone was connected both via wi-fi (using \"adb tcpip 5555\" and \"adb connect 192.168.0.100:5555\" commands) and via a usb cable. Disconnecting the USB cable resolved the issue.</p>\n"},{"tags":[],"owner":{"account_id":3128972,"reputation":3647,"user_id":2647306,"accept_rate":75,"display_name":"dacoinminster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595976439,"creation_date":1595976439,"answer_id":63143873,"question_id":53962831,"body_markdown":"The other solutions posted here did not help me. I eventually discovered that creating a new simulator instance (tools-&gt;AVD Manager-&gt;Create virtual device) solved my problem. I was unable to get the previous simulator working again.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>The other solutions posted here did not help me. I eventually discovered that creating a new simulator instance (tools-&gt;AVD Manager-&gt;Create virtual device) solved my problem. I was unable to get the previous simulator working again.</p>\n"},{"tags":[],"owner":{"account_id":8278935,"reputation":1367,"user_id":6224209,"display_name":"Vanya Rachel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1619524068,"creation_date":1619524068,"answer_id":67282464,"question_id":53962831,"body_markdown":"I try invalidate cache / restart and it&#39;s work","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I try invalidate cache / restart and it's work</p>\n"},{"tags":[],"owner":{"account_id":18505779,"reputation":707,"user_id":13482100,"display_name":"Kuzneц"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1627919994,"creation_date":1627919994,"answer_id":68624662,"question_id":53962831,"body_markdown":"Sometimes this happens when two Android-capable IDEs are opened, e.g. Android Studio and IDEA. Shutdown one of the two (or disable Android plugin in IDEA) helps.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>Sometimes this happens when two Android-capable IDEs are opened, e.g. Android Studio and IDEA. Shutdown one of the two (or disable Android plugin in IDEA) helps.</p>\n"},{"tags":[],"owner":{"account_id":22670374,"reputation":86,"user_id":16842210,"display_name":"Claudio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636032265,"creation_date":1636026465,"answer_id":69838765,"question_id":53962831,"body_markdown":"Restarted the ABD server. First the device had to be connected. Look for the &quot;Assistant&quot; tab in android studio (on the right side it usually is), and press next until you see the option to reset the ABD server.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>Restarted the ABD server. First the device had to be connected. Look for the &quot;Assistant&quot; tab in android studio (on the right side it usually is), and press next until you see the option to reset the ABD server.</p>\n"},{"tags":[],"owner":{"account_id":9869950,"reputation":41,"user_id":7309977,"display_name":"Mohsen_AB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637904850,"creation_date":1637904850,"answer_id":70119963,"question_id":53962831,"body_markdown":"I did\r\n\r\n---&gt;adb kill-server &amp;&amp; adb start-server\r\n\r\n---&gt;invalidate cache / restart\r\n\r\nbut not work yet\r\n\r\n    Waiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\r\n    \r\n    Waiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\r\n        \r\n    Waiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\r\n        \r\n    Could not connect to remote process. Aborting debug session.\r\n\r\nimage1:--&gt; [1]: https://i.stack.imgur.com/HZF5D.png\r\n\r\nimage2:--&gt; [2]: https://i.stack.imgur.com/hrE4a.png","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I did</p>\n<p>---&gt;adb kill-server &amp;&amp; adb start-server</p>\n<p>---&gt;invalidate cache / restart</p>\n<p>but not work yet</p>\n<pre><code>Waiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\n\nWaiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\n    \nWaiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\n    \nCould not connect to remote process. Aborting debug session.\n</code></pre>\n<p>image1:--&gt; [1]: <a href=\"https://i.stack.imgur.com/HZF5D.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/HZF5D.png</a></p>\n<p>image2:--&gt; [2]: <a href=\"https://i.stack.imgur.com/hrE4a.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/hrE4a.png</a></p>\n"},{"tags":[],"owner":{"account_id":2690160,"reputation":179,"user_id":8950725,"display_name":"Bhola Bhala"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1645645205,"creation_date":1645645205,"answer_id":71243097,"question_id":53962831,"body_markdown":"Verify on AndroidManifest that your LAUNCHER activity has:\r\n\r\n    android:exported=&quot;true&quot;","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>Verify on AndroidManifest that your LAUNCHER activity has:</p>\n<pre><code>android:exported=&quot;true&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9405764,"reputation":31,"user_id":8039388,"display_name":"D Smith"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1645924705,"creation_date":1645924705,"answer_id":71281440,"question_id":53962831,"body_markdown":"+1 to Kuzneц&#39;s answer.\r\n\r\nWhen Intellij and Android Studio are both open, apparently the Android plugin in Intellij needs to be disabled.  This wasn&#39;t always the case but it resolve the issue for me.\r\n\r\n - Mac OSX 12.2.1 \r\n - IntelliJ 2021.3.1 \r\n - Android Studio 2021.1.1 Patch 2\r\n\r\n","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>+1 to Kuzneц's answer.</p>\n<p>When Intellij and Android Studio are both open, apparently the Android plugin in Intellij needs to be disabled.  This wasn't always the case but it resolve the issue for me.</p>\n<ul>\n<li>Mac OSX 12.2.1</li>\n<li>IntelliJ 2021.3.1</li>\n<li>Android Studio 2021.1.1 Patch 2</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":25141312,"reputation":1,"user_id":18987622,"display_name":"Сергей Озерный"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651224294,"creation_date":1651224294,"answer_id":72055729,"question_id":53962831,"body_markdown":"I followed all the recommendations above, but the problem was solved only after I used the Generate Signed Bundle and selected the desired flavor","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I followed all the recommendations above, but the problem was solved only after I used the Generate Signed Bundle and selected the desired flavor</p>\n"},{"tags":[],"owner":{"account_id":7086877,"reputation":317,"user_id":5423444,"display_name":"Nigel N."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658828718,"creation_date":1658828718,"answer_id":73121165,"question_id":53962831,"body_markdown":"For me the problem was a wrong launch flag set in the Run/Debug Configurations. I found out about this by taking the adb command that is executed to launch the app, which can be found in the &quot;Run&quot; tab. The command looks like this:\r\n\r\n    adb shell am start -n &quot;com.your.package....&quot; -a android.intent.action.MAIN -c android.intent.category.LAUNCHER\r\n\r\nBy executing the command manually in the terminal, i got an error message which pointed me to the problem.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>For me the problem was a wrong launch flag set in the Run/Debug Configurations. I found out about this by taking the adb command that is executed to launch the app, which can be found in the &quot;Run&quot; tab. The command looks like this:</p>\n<pre><code>adb shell am start -n &quot;com.your.package....&quot; -a android.intent.action.MAIN -c android.intent.category.LAUNCHER\n</code></pre>\n<p>By executing the command manually in the terminal, i got an error message which pointed me to the problem.</p>\n"},{"tags":[],"owner":{"account_id":8235698,"reputation":145,"user_id":6194988,"accept_rate":0,"display_name":"Mohamed Mohamed Taha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662977788,"creation_date":1662977788,"answer_id":73687720,"question_id":53962831,"body_markdown":"All solution didn&#39;t fix my issue, If you face it same me try that solution \r\n[enter link description here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/67711539/how-to-fix-error-could-not-connect-to-remote-process-aborting-debug-session","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>All solution didn't fix my issue, If you face it same me try that solution\n<a href=\"https://stackoverflow.com/questions/67711539/how-to-fix-error-could-not-connect-to-remote-process-aborting-debug-session\">enter link description here</a></p>\n"},{"tags":[],"owner":{"account_id":1771599,"reputation":13393,"user_id":1616263,"display_name":"crifan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691548175,"creation_date":1691548175,"answer_id":76864208,"question_id":53962831,"body_markdown":"* My case\r\n  * use `Android Studio` create a simple android app but **no activity**\r\n    * current settings: `Android Studio`-&gt;`Run`-&gt;`Edit Configuration`-&gt;`General`-&gt;`Launch Options`-&gt;`Launch`: **Nothing**\r\n      * for later used as Xposed plugin, which is no need UI=activity\r\n* Error\r\n  * first `Timed out waiting for process to appear on`\r\n  * final error: `Processes are not found Aborting session`\r\n* Reason\r\n  * for Android app, `activity` ~= `process`\r\n    * no activity mean can not debug\r\n* Solution\r\n  * for me\r\n    * done nothing\r\n      * for no activity android app: can NOT debug\r\n        * activity == UI page ~= proecess, so no activity means no process, cause can not debug\r\n  * for others (normal android with activity)\r\n    * change `Launch` to **Default Activity**\r\n      * ![](https://i.stack.imgur.com/u4Rz0.png)\r\n\r\n\r\n","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<ul>\n<li>My case\n<ul>\n<li>use <code>Android Studio</code> create a simple android app but <strong>no activity</strong>\n<ul>\n<li>current settings: <code>Android Studio</code>-&gt;<code>Run</code>-&gt;<code>Edit Configuration</code>-&gt;<code>General</code>-&gt;<code>Launch Options</code>-&gt;<code>Launch</code>: <strong>Nothing</strong>\n<ul>\n<li>for later used as Xposed plugin, which is no need UI=activity</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Error\n<ul>\n<li>first <code>Timed out waiting for process to appear on</code></li>\n<li>final error: <code>Processes are not found Aborting session</code></li>\n</ul>\n</li>\n<li>Reason\n<ul>\n<li>for Android app, <code>activity</code> ~= <code>process</code>\n<ul>\n<li>no activity mean can not debug</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Solution\n<ul>\n<li>for me\n<ul>\n<li>done nothing\n<ul>\n<li>for no activity android app: can NOT debug\n<ul>\n<li>activity == UI page ~= proecess, so no activity means no process, cause can not debug</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>for others (normal android with activity)\n<ul>\n<li>change <code>Launch</code> to <strong>Default Activity</strong>\n<ul>\n<li><img src=\"https://i.stack.imgur.com/u4Rz0.png\" alt=\"\" /></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"}],"owner":{"account_id":10143038,"reputation":495,"user_id":7492134,"display_name":"SAPHI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41147,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":53962958,"answer_count":17,"score":48,"last_activity_date":1691548175,"creation_date":1546021651,"question_id":53962831,"body_markdown":"I am making a android studio project and I try to debug my application.\r\n\r\nRunning the application works fine, but when I try to debug it I get this error: \r\n\r\n``Could not connect to remote process. Aborting debug session.``\r\n\r\nWhat can I do to fix the issue?\r\n","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I am making a android studio project and I try to debug my application.</p>\n\n<p>Running the application works fine, but when I try to debug it I get this error: </p>\n\n<p><code>Could not connect to remote process. Aborting debug session.</code></p>\n\n<p>What can I do to fix the issue?</p>\n"},{"tags":["java","eclipse","function","navigation"],"comments":[{"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"score":14,"creation_date":1379518196,"post_id":18876191,"comment_id":27857659,"body_markdown":"Window -&gt; Show View -&gt; Navigator","body":"Window -&gt; Show View -&gt; Navigator"}],"answers":[{"tags":[],"owner":{"account_id":6620032,"reputation":141,"user_id":5112072,"display_name":"Micha"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1436808582,"creation_date":1436807830,"answer_id":31389552,"question_id":18876191,"body_markdown":"You go to Window -&gt; Show View -&gt; package explorer\r\nif it&#39;s not listed, click on &quot;Other&quot; and type it in.\r\n","title":"How to open the navigation pane in eclipse?","body":"<p>You go to Window -> Show View -> package explorer\nif it's not listed, click on \"Other\" and type it in.</p>\n"},{"tags":[],"owner":{"account_id":4288286,"reputation":479,"user_id":3505302,"accept_rate":25,"display_name":"mystertyboy"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1463569711,"creation_date":1463569711,"answer_id":37297812,"question_id":18876191,"body_markdown":"GO to **Window** option of elicpse ,\r\nclick on  **ShowView** Go to **other &gt;&gt; General &gt;&gt; Navigation** and press **OK**.","title":"How to open the navigation pane in eclipse?","body":"<p>GO to <strong>Window</strong> option of elicpse ,\nclick on  <strong>ShowView</strong> Go to <strong>other >> General >> Navigation</strong> and press <strong>OK</strong>.</p>\n"},{"tags":[],"owner":{"account_id":7841989,"reputation":273512,"user_id":5928186,"accept_rate":85,"display_name":"Shubham Khatri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486846091,"creation_date":1486846091,"answer_id":42181057,"question_id":18876191,"body_markdown":"In order to open the Nvaigator in eclipse you need to follow the following\r\n\r\n1. Click on `Windows` option in the Toolbar\r\n2. Click on `Show View` option \r\n3. Select the Navigator option.\r\n\r\nThis will open up the navigator in your eclipse\r\n","title":"How to open the navigation pane in eclipse?","body":"<p>In order to open the Nvaigator in eclipse you need to follow the following</p>\n\n<ol>\n<li>Click on <code>Windows</code> option in the Toolbar</li>\n<li>Click on <code>Show View</code> option </li>\n<li>Select the Navigator option.</li>\n</ol>\n\n<p>This will open up the navigator in your eclipse</p>\n"}],"owner":{"account_id":3320895,"reputation":217,"user_id":2792108,"accept_rate":0,"display_name":"please help"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44822,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":3,"score":19,"last_activity_date":1691548006,"creation_date":1379517554,"question_id":18876191,"body_markdown":"I clicked something and now the navigation pane is gone. How do I get it back so I can see everything? I would post a picture but its not letting me\r\n\r\n\r\n\r\n","title":"How to open the navigation pane in eclipse?","body":"<p>I clicked something and now the navigation pane is gone. How do I get it back so I can see everything? I would post a picture but its not letting me</p>\n"},{"tags":["java","android","public-key-exchange"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691548472,"post_id":76864190,"comment_id":135505289,"body_markdown":"Does this https://stackoverflow.com/questions/63171510/java-security-cert-certificateparsingexception-java-io-ioexception-unknown-nam help?","body":"Does this <a href=\"https://stackoverflow.com/questions/63171510/java-security-cert-certificateparsingexception-java-io-ioexception-unknown-nam\" title=\"java security cert certificateparsingexception java io ioexception unknown nam\">stackoverflow.com/questions/63171510/&hellip;</a> help?"}],"owner":{"account_id":18533727,"reputation":1,"user_id":13503884,"display_name":"王煜仁"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691547837,"creation_date":1691547837,"question_id":76864190,"body_markdown":"I want get public key from `.cer` file, but failure.\r\nI find this error from Android newest system version, i can get public key in my lower Android system version.\r\n\r\n```\r\nString path = &quot;/Users/mycompute/Projects/Test/src/workspace/mykeychain.cer&quot;;\r\nCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\nFileInputStream in = new FileInputStream(path);\r\nCertificate c = cf.generateCertificate(in);\r\nPublicKey pubkey = c.getPublicKey();\r\n\r\nin.close();\r\n```\r\n\r\nthis code `Certificate c = cf.generateCertificate(in);` make error\r\n\r\nerror message:\r\n\r\n```\r\njava.io.IOException: Unknown named curve: 1.2.156.10197.1.301\r\n```\r\n\r\n\r\nwhat should i do?\r\n\r\n\r\ni want get the file Hex public key.","title":"Android newest system version could not read .cer file public key","body":"<p>I want get public key from <code>.cer</code> file, but failure.\nI find this error from Android newest system version, i can get public key in my lower Android system version.</p>\n<pre><code>String path = &quot;/Users/mycompute/Projects/Test/src/workspace/mykeychain.cer&quot;;\nCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\nFileInputStream in = new FileInputStream(path);\nCertificate c = cf.generateCertificate(in);\nPublicKey pubkey = c.getPublicKey();\n\nin.close();\n</code></pre>\n<p>this code <code>Certificate c = cf.generateCertificate(in);</code> make error</p>\n<p>error message:</p>\n<pre><code>java.io.IOException: Unknown named curve: 1.2.156.10197.1.301\n</code></pre>\n<p>what should i do?</p>\n<p>i want get the file Hex public key.</p>\n"},{"tags":["java","excel","spring","csv","tomcat"],"comments":[{"owner":{"account_id":26738302,"reputation":74,"user_id":20339497,"display_name":"HuaJFrame"},"score":0,"creation_date":1691547927,"post_id":76864176,"comment_id":135505258,"body_markdown":"`CSV_HEADERS` is `String[]`, which records the header row","body":"<code>CSV_HEADERS</code> is <code>String[]</code>, which records the header row"}],"owner":{"account_id":26738302,"reputation":74,"user_id":20339497,"display_name":"HuaJFrame"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691548168,"answer_count":0,"score":0,"last_activity_date":1691547535,"creation_date":1691547535,"question_id":76864176,"body_markdown":"I want to splicing the data in the list with StringBuilder and return the csv file to the front end, but the data contains Chinese characters. When I open it with Microsoft Notepad, there will be no garbled characters, but when I open it with Excel, garbled characters will appear.\r\n\r\n```java\r\npublic void generateCSV(List&lt;A&gt; data, HttpServletResponse response){\r\n    StringBulider sb = new StringBuilder();\r\n    // append BOM\r\n    sb.append(&#39;\\uFEFF&#39;);\r\n    // append title\r\n    sb.append(String.join(&quot;,&quot;, CSV_HEADERS));\r\n    // TODO append list data\r\n    response.setContentType(&quot;text/csv&quot;);\r\n    String encodedName = URLEncoder.encode(&quot;data.csv&quot;, StandardCharsets.UTF_8);\r\n    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + encodedName);\r\n    OutputStream outputStream = response.getOutputStream();\r\n    outputStream.write(sb.toString().getBytes(StandardCharsets.UTF_8));\r\n    outputStream.flush();\r\n}\r\n```\r\n\r\nIt seems that adding the BOM header has no effect. The post I found on Google is to return to the front-end csv file through the file stream, but I want to try my approach. Can&#39;t I do it this way? Or something missing in my code?\r\n\r\nI&#39;d appreciate any advice.","title":"The csv spliced by StringBuilder failed to be opened with excel","body":"<p>I want to splicing the data in the list with StringBuilder and return the csv file to the front end, but the data contains Chinese characters. When I open it with Microsoft Notepad, there will be no garbled characters, but when I open it with Excel, garbled characters will appear.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void generateCSV(List&lt;A&gt; data, HttpServletResponse response){\n    StringBulider sb = new StringBuilder();\n    // append BOM\n    sb.append('\\uFEFF');\n    // append title\n    sb.append(String.join(&quot;,&quot;, CSV_HEADERS));\n    // TODO append list data\n    response.setContentType(&quot;text/csv&quot;);\n    String encodedName = URLEncoder.encode(&quot;data.csv&quot;, StandardCharsets.UTF_8);\n    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + encodedName);\n    OutputStream outputStream = response.getOutputStream();\n    outputStream.write(sb.toString().getBytes(StandardCharsets.UTF_8));\n    outputStream.flush();\n}\n</code></pre>\n<p>It seems that adding the BOM header has no effect. The post I found on Google is to return to the front-end csv file through the file stream, but I want to try my approach. Can't I do it this way? Or something missing in my code?</p>\n<p>I'd appreciate any advice.</p>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa","orm"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":2,"creation_date":1691547300,"post_id":76864146,"comment_id":135505205,"body_markdown":"A JSONObject can be deserialized as an Object, but a JSONArray can not be deserialized as an Object.  This as such has got nothing to do with JPA or Postgres.","body":"A JSONObject can be deserialized as an Object, but a JSONArray can not be deserialized as an Object.  This as such has got nothing to do with JPA or Postgres."},{"owner":{"account_id":15964198,"reputation":11,"user_id":11520364,"display_name":"Thiery"},"score":0,"creation_date":1691551758,"post_id":76864146,"comment_id":135505565,"body_markdown":"Thank you for your answer.\nIf you can&#39;t deserialize JSONArray to Object\nIs this the problem because there is an object in the value here?\n\n@JdbcTypeCode(SqlTypes.JSON)\n@Column(columnDefinition = &quot;jsonb&quot;)\nMap&lt;String, Object&gt; testCol;","body":"Thank you for your answer. If you can&#39;t deserialize JSONArray to Object Is this the problem because there is an object in the value here?  @JdbcTypeCode(SqlTypes.JSON) @Column(columnDefinition = &quot;jsonb&quot;) Map&lt;String, Object&gt; testCol;"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691554818,"post_id":76864146,"comment_id":135505789,"body_markdown":"Sorry based upon your question, I can not figure what your original JSON is, and how you are calling this code.  I am guessing that there is a one-to-many relation ship between POST and SUBPOST.  I have no idea what the use of testCol is.  Linkage should be through SUBPOST:id no?","body":"Sorry based upon your question, I can not figure what your original JSON is, and how you are calling this code.  I am guessing that there is a one-to-many relation ship between POST and SUBPOST.  I have no idea what the use of testCol is.  Linkage should be through SUBPOST:id no?"}],"owner":{"account_id":15964198,"reputation":11,"user_id":11520364,"display_name":"Thiery"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691546858,"creation_date":1691546858,"question_id":76864146,"body_markdown":"How do I solve the de-serialization problem in jpa?\r\n\r\nI am using Spring Boot, java and JPA and connecting with Postgres.\r\nBut the problem is that there are Member, DashBoard, Post, and SubPost entities\r\nWhen deleting the Post entity, the top entity of the SubGraph, there are cases where even the bottom entity is deleted and sometimes it is not deleted.\r\n\r\n\r\n\r\nThe Post entity code is as follows.\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor(access = AccessLevel.PROTECTED)\r\n@Builder\r\n@ToString\r\npublic class Post {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long graphId;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;dashboard_id&quot;)\r\n    private DashBoard dashboard;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;member_id&quot;)\r\n    private Member member;\r\n\r\n    @OneToMany(mappedBy = &quot;graph&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;SubPost&gt; subPost;\r\n\r\n}\r\n```\r\n\r\n\r\nThe SubPost entity code is as follows.\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\n@ToString\r\npublic class SubPost {\r\n\r\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long subgraphId;\r\n\r\n    @JdbcTypeCode(SqlTypes.JSON)\r\n    @Column(columnDefinition = &quot;jsonb&quot;)\r\n    Map&lt;String, Object&gt; testCol;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;member_id&quot;)\r\n    private Member member;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;dashboard_id&quot;)\r\n    private DashBoard dashboard;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;post_id&quot;)\r\n    private Post post;\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nThe value in the test_col column is\r\n{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;} If this is the JSON format, even if you delete Post, SubPost, a sub-entity, **can be deleted well**.\r\nBut\r\n[{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;}] If [] is outside in this way, deleting the Post will **not delete the subentity SubGraph**.\r\n\r\n\r\nThen the following error occurs.\r\n\r\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.util.LinkedHashMap&lt;java.lang.String,java.lang.Object&gt;` from Array value (token `JsonToken.START_ARRAY`)\r\nat [Source: (String)&quot;[{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;}]&quot;; line: 1, column: 1]\r\n\r\n\r\nI think it&#39;s a good way to solve the problem by annotation or type change, is there such a way?\r\nWhat is the cause and solution of this error?\r\n\r\n\r\n\r\n\r\nThe code in the SubGraph\r\n```\r\n@JdbcTypeCode(SqlTypes.JSON)\r\n@Column(columnDefinition = &quot;jsonb&quot;)\r\nMap&lt;String, Object&gt; testCol;\r\n```\r\n\r\nI changed it like this.\r\n```\r\n@JdbcTypeCode(SqlTypes.JSON)\r\n@Column(columnDefinition = &quot;jsonb&quot;)\r\nLinkedHashMap&lt;String, Object&gt; testCol;\r\n```\r\n\r\nBut the results are the same","title":"How do I solve the de-serialization problem in Java And JPA?","body":"<p>How do I solve the de-serialization problem in jpa?</p>\n<p>I am using Spring Boot, java and JPA and connecting with Postgres.\nBut the problem is that there are Member, DashBoard, Post, and SubPost entities\nWhen deleting the Post entity, the top entity of the SubGraph, there are cases where even the bottom entity is deleted and sometimes it is not deleted.</p>\n<p>The Post entity code is as follows.</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor(access = AccessLevel.PROTECTED)\n@Builder\n@ToString\npublic class Post {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long graphId;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;dashboard_id&quot;)\n    private DashBoard dashboard;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;member_id&quot;)\n    private Member member;\n\n    @OneToMany(mappedBy = &quot;graph&quot;, cascade = CascadeType.ALL)\n    private List&lt;SubPost&gt; subPost;\n\n}\n</code></pre>\n<p>The SubPost entity code is as follows.</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@ToString\npublic class SubPost {\n\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long subgraphId;\n\n    @JdbcTypeCode(SqlTypes.JSON)\n    @Column(columnDefinition = &quot;jsonb&quot;)\n    Map&lt;String, Object&gt; testCol;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;member_id&quot;)\n    private Member member;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;dashboard_id&quot;)\n    private DashBoard dashboard;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;post_id&quot;)\n    private Post post;\n}\n\n</code></pre>\n<p>The value in the test_col column is\n{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;} If this is the JSON format, even if you delete Post, SubPost, a sub-entity, <strong>can be deleted well</strong>.\nBut\n[{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;}] If [] is outside in this way, deleting the Post will <strong>not delete the subentity SubGraph</strong>.</p>\n<p>Then the following error occurs.</p>\n<p>com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type <code>java.util.LinkedHashMap&lt;java.lang.String,java.lang.Object&gt;</code> from Array value (token <code>JsonToken.START_ARRAY</code>)\nat [Source: (String)&quot;[{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;}]&quot;; line: 1, column: 1]</p>\n<p>I think it's a good way to solve the problem by annotation or type change, is there such a way?\nWhat is the cause and solution of this error?</p>\n<p>The code in the SubGraph</p>\n<pre><code>@JdbcTypeCode(SqlTypes.JSON)\n@Column(columnDefinition = &quot;jsonb&quot;)\nMap&lt;String, Object&gt; testCol;\n</code></pre>\n<p>I changed it like this.</p>\n<pre><code>@JdbcTypeCode(SqlTypes.JSON)\n@Column(columnDefinition = &quot;jsonb&quot;)\nLinkedHashMap&lt;String, Object&gt; testCol;\n</code></pre>\n<p>But the results are the same</p>\n"},{"tags":["java","string","anagram"],"comments":[{"owner":{"account_id":1015767,"reputation":2808,"user_id":1027359,"accept_rate":71,"display_name":"dotvav"},"score":2,"creation_date":1443097339,"post_id":32761096,"comment_id":53361452,"body_markdown":"`entry.getValue() != map2.get(entry.getKey())` will test Integer object identity. Try with `!entry.getValue().equals(map2.get(entry.getKey()))`. Not sure if this will answer your question because I can&#39;t try your test cases.","body":"<code>entry.getValue() != map2.get(entry.getKey())</code> will test Integer object identity. Try with <code>!entry.getValue().equals(map2.get(entry.getKey()))</code>. Not sure if this will answer your question because I can&#39;t try your test cases."},{"owner":{"account_id":1075746,"reputation":2029,"user_id":1073945,"accept_rate":100,"display_name":"Diyarbakir"},"score":0,"creation_date":1443097339,"post_id":32761096,"comment_id":53361454,"body_markdown":"What exactly is failing? Do you get an error message?","body":"What exactly is failing? Do you get an error message?"},{"owner":{"account_id":3421361,"reputation":165,"user_id":2868864,"accept_rate":0,"display_name":"user2868864"},"score":0,"creation_date":1443098403,"post_id":32761096,"comment_id":53362156,"body_markdown":"Yes. That works fine. Thank you","body":"Yes. That works fine. Thank you"}],"answers":[{"tags":[],"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1443098416,"creation_date":1443097770,"answer_id":32761361,"question_id":32761096,"body_markdown":"You are a victim of the [`Integer` caching][1] for values between -128 and +127.\r\n\r\nAs you are counting the numbers of characters in both words, putting the value as a _boxed_ `Integer` object into the map, you need to compare them as _objects_, not as _values_.\r\n\r\nThe problem is this line:\r\n\r\n    else if (entry.getValue() != map2.get(entry.getKey()))\r\n\r\nHere you compare two `Integer` objects with `!=` instead of using\r\n\r\n    else if (!entry.getValue().equals(map2.get(entry.getKey())))\r\n\r\nThe reason why this works for short words is that the occurrence number of each character does not exceed the magical value of 127.\r\n\r\nThese values are cached in the `Integer` class, so that boxed integers less than (and equal to) that value are the _same_ whereas boxed integers greater than that value are different objects with _equal_ value.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#valueOf-int-","title":"Valid anagrams code - fails for one case out of 32 cases. passes for 31 cases","body":"<p>You are a victim of the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#valueOf-int-\" rel=\"nofollow\"><code>Integer</code> caching</a> for values between -128 and +127.</p>\n\n<p>As you are counting the numbers of characters in both words, putting the value as a <em>boxed</em> <code>Integer</code> object into the map, you need to compare them as <em>objects</em>, not as <em>values</em>.</p>\n\n<p>The problem is this line:</p>\n\n<pre><code>else if (entry.getValue() != map2.get(entry.getKey()))\n</code></pre>\n\n<p>Here you compare two <code>Integer</code> objects with <code>!=</code> instead of using</p>\n\n<pre><code>else if (!entry.getValue().equals(map2.get(entry.getKey())))\n</code></pre>\n\n<p>The reason why this works for short words is that the occurrence number of each character does not exceed the magical value of 127.</p>\n\n<p>These values are cached in the <code>Integer</code> class, so that boxed integers less than (and equal to) that value are the <em>same</em> whereas boxed integers greater than that value are different objects with <em>equal</em> value.</p>\n"}],"owner":{"account_id":3421361,"reputation":165,"user_id":2868864,"accept_rate":0,"display_name":"user2868864"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691545912,"creation_date":1443096997,"question_id":32761096,"body_markdown":"I tried writing a small code for anagrams and I wrote the below onw. \r\n\r\n \r\n    String s = &quot;anagram&quot;;\r\n    String t = &quot;nagara&quot;;\r\n\t\t\r\n    Map&lt;Character,Integer&gt; map1 = new HashMap&lt;Character,Integer&gt;();\r\n    Map&lt;Character,Integer&gt; map2 = new HashMap&lt;Character,Integer&gt;();\r\n\t\t\r\n    if (s.length() != t.length()) {\r\n        System.out.println(&quot;Not an anagram&quot;);\r\n    } else {\r\n        for (int i= 0;i&lt;s.length();i++) {\r\n            char c = s.charAt(i);\r\n            char d = t.charAt(i);\r\n            if (map1.containsKey(c)) {\r\n                map1.put(c, map1.get(c)+1);\r\n            } else {\r\n                map1.put(c,1);\r\n            }\r\n\t\t\t\t\r\n            if (map2.containsKey(d)) {\r\n                map2.put(d, map2.get(d)+1);\r\n            } else {\r\n                map2.put(d,1);\r\n            }\r\n        }\r\n\t\t\t\r\n        for (Map.Entry&lt;Character, Integer&gt; entry : map1.entrySet()) {\r\n            if (!map2.containsKey(entry.getKey())) {\r\n                System.out.println(&quot;Not an anagram&quot;);\r\n            } else if (entry.getValue() != map2.get(entry.getKey())) {\r\n                System.out.println(&quot;Not an anagram&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nThis works for almost all casesto check, it fails for one of the longest anagrams with 50000 characters . \r\nWould anyone be able to point me on what looks wrong here?\r\n\r\n","title":"Valid anagrams code - fails for one case out of 32 cases. passes for 31 cases","body":"<p>I tried writing a small code for anagrams and I wrote the below onw.</p>\n<pre><code>String s = &quot;anagram&quot;;\nString t = &quot;nagara&quot;;\n    \nMap&lt;Character,Integer&gt; map1 = new HashMap&lt;Character,Integer&gt;();\nMap&lt;Character,Integer&gt; map2 = new HashMap&lt;Character,Integer&gt;();\n    \nif (s.length() != t.length()) {\n    System.out.println(&quot;Not an anagram&quot;);\n} else {\n    for (int i= 0;i&lt;s.length();i++) {\n        char c = s.charAt(i);\n        char d = t.charAt(i);\n        if (map1.containsKey(c)) {\n            map1.put(c, map1.get(c)+1);\n        } else {\n            map1.put(c,1);\n        }\n            \n        if (map2.containsKey(d)) {\n            map2.put(d, map2.get(d)+1);\n        } else {\n            map2.put(d,1);\n        }\n    }\n        \n    for (Map.Entry&lt;Character, Integer&gt; entry : map1.entrySet()) {\n        if (!map2.containsKey(entry.getKey())) {\n            System.out.println(&quot;Not an anagram&quot;);\n        } else if (entry.getValue() != map2.get(entry.getKey())) {\n            System.out.println(&quot;Not an anagram&quot;);\n        }\n    }\n}\n</code></pre>\n<p>This works for almost all casesto check, it fails for one of the longest anagrams with 50000 characters .\nWould anyone be able to point me on what looks wrong here?</p>\n"},{"tags":["java","spring","rest"],"answers":[{"tags":[],"owner":{"account_id":355080,"reputation":4551,"user_id":693815,"accept_rate":55,"display_name":"Elwood"},"down_vote_count":18,"up_vote_count":49,"is_accepted":true,"score":31,"last_activity_date":1322579272,"creation_date":1322579272,"answer_id":8313055,"question_id":8297215,"body_markdown":"OK, so I&#39;m being an idiot and I&#39;m confusing query parameters with url parameters. I was kinda hoping there would be a nicer way to populate my query parameters rather than an ugly concatenated String but there we are. It&#39;s simply a case of build the URL with the correct parameters. If you pass it as a String Spring will also take care of the encoding for you.","title":"Spring RestTemplate GET with parameters","body":"<p>OK, so I'm being an idiot and I'm confusing query parameters with url parameters. I was kinda hoping there would be a nicer way to populate my query parameters rather than an ugly concatenated String but there we are. It's simply a case of build the URL with the correct parameters. If you pass it as a String Spring will also take care of the encoding for you.</p>\n"},{"tags":[],"owner":{"account_id":2667713,"reputation":2964,"user_id":2305727,"display_name":"pavel"},"down_vote_count":1,"up_vote_count":264,"is_accepted":false,"score":263,"last_activity_date":1476319251,"creation_date":1369160320,"answer_id":16676827,"question_id":8297215,"body_markdown":"The uriVariables are also expanded in the query string. For example, the following call will expand values for both, account and name:\r\n\r\n    restTemplate.exchange(&quot;http://my-rest-url.org/rest/account/{account}?name={name}&quot;,\r\n        HttpMethod.GET,\r\n        httpEntity,\r\n        clazz,\r\n        &quot;my-account&quot;,\r\n        &quot;my-name&quot;\r\n    );\r\n\r\nso the actual request url will be\r\n\r\n    http://my-rest-url.org/rest/account/my-account?name=my-name\r\n\r\nLook at HierarchicalUriComponents.expandInternal(UriTemplateVariables) for more details.\r\nVersion of Spring is 3.1.3.\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>The uriVariables are also expanded in the query string. For example, the following call will expand values for both, account and name:</p>\n\n<pre><code>restTemplate.exchange(\"http://my-rest-url.org/rest/account/{account}?name={name}\",\n    HttpMethod.GET,\n    httpEntity,\n    clazz,\n    \"my-account\",\n    \"my-name\"\n);\n</code></pre>\n\n<p>so the actual request url will be</p>\n\n<pre><code>http://my-rest-url.org/rest/account/my-account?name=my-name\n</code></pre>\n\n<p>Look at HierarchicalUriComponents.expandInternal(UriTemplateVariables) for more details.\nVersion of Spring is 3.1.3.</p>\n"},{"tags":[],"owner":{"account_id":1438806,"reputation":1315,"user_id":1486966,"accept_rate":67,"display_name":"datu-puti"},"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1464174128,"creation_date":1374960817,"answer_id":17902659,"question_id":8297215,"body_markdown":"I was attempting something similar, and [the RoboSpice example helped me work it out][1]:\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\r\n    HttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;(input, createHeader());\r\n    \r\n    String url = &quot;http://awesomesite.org&quot;;\r\n    Uri.Builder uriBuilder = Uri.parse(url).buildUpon();\r\n    uriBuilder.appendQueryParameter(key, value);\r\n    uriBuilder.appendQueryParameter(key, value);\r\n    ...\r\n\r\n    String url = uriBuilder.build().toString();\r\n\r\n    HttpEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, request , String.class);\r\n\r\n\r\n  [1]: https://github.com/octo-online/RoboSpice-samples/blob/release/robospice-sample-spring-android/src/com/octo/android/robospice/sample/springandroid/TweetsRequest.java","title":"Spring RestTemplate GET with parameters","body":"<p>I was attempting something similar, and <a href=\"https://github.com/octo-online/RoboSpice-samples/blob/release/robospice-sample-spring-android/src/com/octo/android/robospice/sample/springandroid/TweetsRequest.java\" rel=\"noreferrer\">the RoboSpice example helped me work it out</a>:</p>\n\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.set(\"Accept\", \"application/json\");\n\nHttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;(input, createHeader());\n\nString url = \"http://awesomesite.org\";\nUri.Builder uriBuilder = Uri.parse(url).buildUpon();\nuriBuilder.appendQueryParameter(key, value);\nuriBuilder.appendQueryParameter(key, value);\n...\n\nString url = uriBuilder.build().toString();\n\nHttpEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, request , String.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1073346,"reputation":13825,"user_id":1072088,"accept_rate":88,"display_name":"Christophe L"},"down_vote_count":2,"up_vote_count":683,"is_accepted":false,"score":681,"last_activity_date":1637726144,"creation_date":1408649353,"answer_id":25434451,"question_id":8297215,"body_markdown":"To easily manipulate URLs / path / params / etc., you can use Spring&#39;s [UriComponentsBuilder](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/util/UriComponentsBuilder.html) class to create a URL template with placehoders for the parameters, then provide the value for those parameters in the `RestOperations.exchange(...)` call. It&#39;s cleaner than manually concatenating strings and it takes care of the URL encoding for you:\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE);\r\n    HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n    \r\n    String urlTemplate = UriComponentsBuilder.fromHttpUrl(url)\r\n            .queryParam(&quot;msisdn&quot;, &quot;{msisdn}&quot;)\r\n            .queryParam(&quot;email&quot;, &quot;{email}&quot;)\r\n            .queryParam(&quot;clientVersion&quot;, &quot;{clientVersion}&quot;)\r\n            .queryParam(&quot;clientType&quot;, &quot;{clientType}&quot;)\r\n            .queryParam(&quot;issuerName&quot;, &quot;{issuerName}&quot;)\r\n            .queryParam(&quot;applicationName&quot;, &quot;{applicationName}&quot;)\r\n            .encode()\r\n            .toUriString();\r\n    \r\n    Map&lt;String, ?&gt; params = new HashMap&lt;&gt;();\r\n    params.put(&quot;msisdn&quot;, msisdn);\r\n    params.put(&quot;email&quot;, email);\r\n    params.put(&quot;clientVersion&quot;, clientVersion);\r\n    params.put(&quot;clientType&quot;, clientType);\r\n    params.put(&quot;issuerName&quot;, issuerName);\r\n    params.put(&quot;applicationName&quot;, applicationName);\r\n    \r\n    HttpEntity&lt;String&gt; response = restOperations.exchange(\r\n    \t\turlTemplate,\r\n            HttpMethod.GET,\r\n            entity,\r\n            String.class,\r\n            params\r\n    );\r\n\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>To easily manipulate URLs / path / params / etc., you can use Spring's <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/util/UriComponentsBuilder.html\" rel=\"noreferrer\">UriComponentsBuilder</a> class to create a URL template with placehoders for the parameters, then provide the value for those parameters in the <code>RestOperations.exchange(...)</code> call. It's cleaner than manually concatenating strings and it takes care of the URL encoding for you:</p>\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.set(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE);\nHttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\n\nString urlTemplate = UriComponentsBuilder.fromHttpUrl(url)\n        .queryParam(&quot;msisdn&quot;, &quot;{msisdn}&quot;)\n        .queryParam(&quot;email&quot;, &quot;{email}&quot;)\n        .queryParam(&quot;clientVersion&quot;, &quot;{clientVersion}&quot;)\n        .queryParam(&quot;clientType&quot;, &quot;{clientType}&quot;)\n        .queryParam(&quot;issuerName&quot;, &quot;{issuerName}&quot;)\n        .queryParam(&quot;applicationName&quot;, &quot;{applicationName}&quot;)\n        .encode()\n        .toUriString();\n\nMap&lt;String, ?&gt; params = new HashMap&lt;&gt;();\nparams.put(&quot;msisdn&quot;, msisdn);\nparams.put(&quot;email&quot;, email);\nparams.put(&quot;clientVersion&quot;, clientVersion);\nparams.put(&quot;clientType&quot;, clientType);\nparams.put(&quot;issuerName&quot;, issuerName);\nparams.put(&quot;applicationName&quot;, applicationName);\n\nHttpEntity&lt;String&gt; response = restOperations.exchange(\n        urlTemplate,\n        HttpMethod.GET,\n        entity,\n        String.class,\n        params\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8432993,"reputation":579,"user_id":6328033,"display_name":"Java_Fire_Within"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1474769038,"creation_date":1474769038,"answer_id":39682715,"question_id":8297215,"body_markdown":"I take different approach, you may agree or not but I want to control from .properties file instead of compiled Java code\r\n\r\n#Inside application.properties file \r\nendpoint.url = https://yourHost/resource?requestParam1={0}&amp;requestParam2={1}\r\n\r\nJava code goes here, you can write if or switch condition to find out if endpoint URL in .properties file has @PathVariable (contains {}) or @RequestParam (yourURL?key=value) etc... then invoke method accordingly... that way its dynamic and not need to code change in future one stop shop...   \r\n\r\nI&#39;m trying to give more of idea than actual code here ...try to write generic method each for @RequestParam, and @PathVariable etc... then call accordingly when needed \r\n\r\n      @Value(&quot;${endpoint.url}&quot;)\r\n      private String endpointURL;\r\n      // you can use variable args feature in Java\r\n      public String requestParamMethodNameHere(String value1, String value2) {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        restTemplate\r\n               .getMessageConverters()\r\n               .add(new MappingJackson2HttpMessageConverter());\r\n    \r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.set(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE);\r\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n           \r\n        try {\r\n    \t  String formatted_URL = MessageFormat.format(endpointURL, value1, value2);\r\n          ResponseEntity&lt;String&gt; response = restTemplate.exchange(\r\n                        formatted_URL ,\r\n                        HttpMethod.GET,\r\n                        entity,\r\n                        String.class);\r\n         return response.getBody();\r\n        } catch (Exception e) { e.printStackTrace(); }\r\n\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>I take different approach, you may agree or not but I want to control from .properties file instead of compiled Java code</p>\n\n<h1>Inside application.properties file</h1>\n\n<p>endpoint.url = <a href=\"https://yourHost/resource?requestParam1=\" rel=\"noreferrer\">https://yourHost/resource?requestParam1=</a>{0}&amp;requestParam2={1}</p>\n\n<p>Java code goes here, you can write if or switch condition to find out if endpoint URL in .properties file has @PathVariable (contains {}) or @RequestParam (yourURL?key=value) etc... then invoke method accordingly... that way its dynamic and not need to code change in future one stop shop...   </p>\n\n<p>I'm trying to give more of idea than actual code here ...try to write generic method each for @RequestParam, and @PathVariable etc... then call accordingly when needed </p>\n\n<pre><code>  @Value(\"${endpoint.url}\")\n  private String endpointURL;\n  // you can use variable args feature in Java\n  public String requestParamMethodNameHere(String value1, String value2) {\n    RestTemplate restTemplate = new RestTemplate();\n    restTemplate\n           .getMessageConverters()\n           .add(new MappingJackson2HttpMessageConverter());\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.set(\"Accept\", MediaType.APPLICATION_JSON_VALUE);\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(headers);\n\n    try {\n      String formatted_URL = MessageFormat.format(endpointURL, value1, value2);\n      ResponseEntity&lt;String&gt; response = restTemplate.exchange(\n                    formatted_URL ,\n                    HttpMethod.GET,\n                    entity,\n                    String.class);\n     return response.getBody();\n    } catch (Exception e) { e.printStackTrace(); }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2826656,"reputation":13236,"user_id":2429176,"accept_rate":80,"display_name":"dustin.schultz"},"down_vote_count":1,"up_vote_count":70,"is_accepted":false,"score":69,"last_activity_date":1591024700,"creation_date":1525024135,"answer_id":50089582,"question_id":8297215,"body_markdown":"Since at least Spring 3, instead of using `UriComponentsBuilder` to build the URL (which is a bit verbose), **many** of the `RestTemplate` methods accept placeholders in the path for parameters (not just `exchange`).\r\n\r\nFrom the documentation:\r\n\r\n&gt; Many of the `RestTemplate` methods accepts a URI template and URI\r\n&gt; template variables, either as a `String` vararg, or as\r\n&gt; `Map&lt;String,String&gt;`.\r\n&gt; \r\n&gt; For example with a `String` vararg:\r\n&gt;\r\n    restTemplate.getForObject(\r\n       &quot;http://example.com/hotels/{hotel}/rooms/{room}&quot;, String.class, &quot;42&quot;, &quot;21&quot;);\r\n\r\n\r\n&gt; Or with a `Map&lt;String, String&gt;`:\r\n&gt; \r\n&gt;     Map&lt;String, String&gt; vars = new HashMap&lt;&gt;();\r\n&gt;     vars.put(&quot;hotel&quot;, &quot;42&quot;);\r\n&gt;     vars.put(&quot;room&quot;, &quot;21&quot;);\r\n&gt;      \r\n&gt;     restTemplate.getForObject(&quot;http://example.com/hotels/{hotel}/rooms/{room}&quot;, \r\n        String.class, vars);\r\n\r\nReference: https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-resttemplate-uri\r\n\r\nIf you look at the [JavaDoc][1] for `RestTemplate` and search for &quot;URI Template&quot;, you can see which methods you can use placeholders with.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html","title":"Spring RestTemplate GET with parameters","body":"<p>Since at least Spring 3, instead of using <code>UriComponentsBuilder</code> to build the URL (which is a bit verbose), <strong>many</strong> of the <code>RestTemplate</code> methods accept placeholders in the path for parameters (not just <code>exchange</code>).</p>\n\n<p>From the documentation:</p>\n\n<blockquote>\n  <p>Many of the <code>RestTemplate</code> methods accepts a URI template and URI\n  template variables, either as a <code>String</code> vararg, or as\n  <code>Map&lt;String,String&gt;</code>.</p>\n  \n  <p>For example with a <code>String</code> vararg:</p>\n\n<pre><code>restTemplate.getForObject(\n   \"http://example.com/hotels/{hotel}/rooms/{room}\", String.class, \"42\", \"21\");\n</code></pre>\n  \n  <p>Or with a <code>Map&lt;String, String&gt;</code>:</p>\n\n<pre><code>Map&lt;String, String&gt; vars = new HashMap&lt;&gt;();\nvars.put(\"hotel\", \"42\");\nvars.put(\"room\", \"21\");\n\nrestTemplate.getForObject(\"http://example.com/hotels/{hotel}/rooms/{room}\", \n    String.class, vars);\n</code></pre>\n</blockquote>\n\n<p>Reference: <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-resttemplate-uri\" rel=\"noreferrer\">https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-resttemplate-uri</a></p>\n\n<p>If you look at the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"noreferrer\">JavaDoc</a> for <code>RestTemplate</code> and search for \"URI Template\", you can see which methods you can use placeholders with.</p>\n"},{"tags":[],"owner":{"account_id":5096768,"reputation":1551,"user_id":4087817,"display_name":"ngg"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1526534772,"creation_date":1526534772,"answer_id":50383882,"question_id":8297215,"body_markdown":"    public static void main(String[] args) {\r\n    \t\t HttpHeaders httpHeaders = new HttpHeaders();\r\n    \t\t httpHeaders.set(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE);\r\n    \t\t final String url = &quot;https://host:port/contract/{code}&quot;;\r\n    \t\t Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\r\n    \t     params.put(&quot;code&quot;, &quot;123456&quot;);\r\n    \t     HttpEntity&lt;?&gt; httpEntity  = new HttpEntity&lt;&gt;(httpHeaders); \r\n    \t\t RestTemplate restTemplate  = new RestTemplate();\r\n    \t\t restTemplate.exchange(url, HttpMethod.GET, httpEntity,String.class, params);\r\n    \t}","title":"Spring RestTemplate GET with parameters","body":"<pre><code>public static void main(String[] args) {\n         HttpHeaders httpHeaders = new HttpHeaders();\n         httpHeaders.set(\"Accept\", MediaType.APPLICATION_JSON_VALUE);\n         final String url = \"https://host:port/contract/{code}\";\n         Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\n         params.put(\"code\", \"123456\");\n         HttpEntity&lt;?&gt; httpEntity  = new HttpEntity&lt;&gt;(httpHeaders); \n         RestTemplate restTemplate  = new RestTemplate();\n         restTemplate.exchange(url, HttpMethod.GET, httpEntity,String.class, params);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3613893,"reputation":420,"user_id":3014279,"display_name":"Dalton"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1536610510,"creation_date":1530714473,"answer_id":51175995,"question_id":8297215,"body_markdown":"If you pass non-parametrized params for RestTemplate, you&#39;ll have one Metrics for everyone single different URL that you pass, considering the parameters. You would like to use parametrized urls:\r\n    \r\n    http://my-url/action?param1={param1}&amp;param2={param2}\r\n\r\ninstead of\r\n\r\n    http://my-url/action?param1=XXXX&amp;param2=YYYY\r\n\r\nThe second case is what you get by using UriComponentsBuilder class.\r\n\r\nOne way to implement the first behavior is the following:\r\n\r\n    Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\r\n    params.put(&quot;param1&quot;, &quot;XXXX&quot;);\r\n    params.put(&quot;param2&quot;, &quot;YYYY&quot;);\r\n    \r\n    String url = &quot;http://my-url/action?%s&quot;;\r\n    \r\n    String parametrizedArgs = params.keySet().stream().map(k -&gt;\r\n        String.format(&quot;%s={%s}&quot;, k, k)\r\n    ).collect(Collectors.joining(&quot;&amp;&quot;));\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE);\r\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n\r\n    restTemplate.exchange(String.format(url, parametrizedArgs), HttpMethod.GET, entity, String.class, params);","title":"Spring RestTemplate GET with parameters","body":"<p>If you pass non-parametrized params for RestTemplate, you'll have one Metrics for everyone single different URL that you pass, considering the parameters. You would like to use parametrized urls:</p>\n\n<pre><code>http://my-url/action?param1={param1}&amp;param2={param2}\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>http://my-url/action?param1=XXXX&amp;param2=YYYY\n</code></pre>\n\n<p>The second case is what you get by using UriComponentsBuilder class.</p>\n\n<p>One way to implement the first behavior is the following:</p>\n\n<pre><code>Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\nparams.put(\"param1\", \"XXXX\");\nparams.put(\"param2\", \"YYYY\");\n\nString url = \"http://my-url/action?%s\";\n\nString parametrizedArgs = params.keySet().stream().map(k -&gt;\n    String.format(\"%s={%s}\", k, k)\n).collect(Collectors.joining(\"&amp;\"));\n\nHttpHeaders headers = new HttpHeaders();\nheaders.set(\"Accept\", MediaType.APPLICATION_JSON_VALUE);\nHttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(headers);\n\nrestTemplate.exchange(String.format(url, parametrizedArgs), HttpMethod.GET, entity, String.class, params);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1543513660,"creation_date":1543513660,"answer_id":53544842,"question_id":8297215,"body_markdown":"In Spring Web 4.3.6 I also see\r\n\r\n    public &lt;T&gt; T getForObject(String url, Class&lt;T&gt; responseType, Object... uriVariables)\r\n\r\n\r\nThat means you don&#39;t have to create an ugly map\r\n\r\nSo if you have this url\r\n\r\n    http://my-url/action?param1={param1}&amp;param2={param2}\r\n\r\n\r\nYou can either do\r\n\r\n    restTemplate.getForObject(url, Response.class, param1, param2)\r\n\r\nor\r\n\r\n    restTemplate.getForObject(url, Response.class, param [])\r\n\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>In Spring Web 4.3.6 I also see</p>\n\n<pre><code>public &lt;T&gt; T getForObject(String url, Class&lt;T&gt; responseType, Object... uriVariables)\n</code></pre>\n\n<p>That means you don't have to create an ugly map</p>\n\n<p>So if you have this url</p>\n\n<pre><code>http://my-url/action?param1={param1}&amp;param2={param2}\n</code></pre>\n\n<p>You can either do</p>\n\n<pre><code>restTemplate.getForObject(url, Response.class, param1, param2)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>restTemplate.getForObject(url, Response.class, param [])\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7595686,"reputation":441,"user_id":5761920,"display_name":"Kripesh Bista"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1548872249,"creation_date":1548872249,"answer_id":54447041,"question_id":8297215,"body_markdown":" \r\n\r\n        String uri = http://my-rest-url.org/rest/account/{account};\r\n        \r\n        Map&lt;String, String&gt; uriParam = new HashMap&lt;&gt;();\r\n        uriParam.put(&quot;account&quot;, &quot;my_account&quot;);\r\n        \r\n        UriComponents builder = UriComponentsBuilder.fromHttpUrl(uri)\r\n        \t\t\t.queryParam(&quot;pageSize&quot;,&quot;2&quot;)\r\n        \t\t\t\t\t.queryParam(&quot;page&quot;,&quot;0&quot;)\r\n        \t\t\t\t\t.queryParam(&quot;name&quot;,&quot;my_name&quot;).build();\r\n        \r\n        HttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;&gt;(null, getHeaders());\r\n        \r\n        ResponseEntity&lt;String&gt; strResponse = restTemplate.exchange(builder.toUriString(),HttpMethod.GET, requestEntity,\r\n        \t\t\t\t\tString.class,uriParam);\r\n        \r\n        //final URL: http://my-rest-url.org/rest/account/my_account?pageSize=2&amp;page=0&amp;name=my_name\r\n\r\n**RestTemplate: Build dynamic URI using UriComponents (URI variable and Request parameters)**\r\n\r\n","title":"Spring RestTemplate GET with parameters","body":"<pre><code>    String uri = http://my-rest-url.org/rest/account/{account};\n\n    Map&lt;String, String&gt; uriParam = new HashMap&lt;&gt;();\n    uriParam.put(\"account\", \"my_account\");\n\n    UriComponents builder = UriComponentsBuilder.fromHttpUrl(uri)\n                .queryParam(\"pageSize\",\"2\")\n                        .queryParam(\"page\",\"0\")\n                        .queryParam(\"name\",\"my_name\").build();\n\n    HttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;&gt;(null, getHeaders());\n\n    ResponseEntity&lt;String&gt; strResponse = restTemplate.exchange(builder.toUriString(),HttpMethod.GET, requestEntity,\n                        String.class,uriParam);\n\n    //final URL: http://my-rest-url.org/rest/account/my_account?pageSize=2&amp;page=0&amp;name=my_name\n</code></pre>\n\n<p><strong>RestTemplate: Build dynamic URI using UriComponents (URI variable and Request parameters)</strong></p>\n"},{"tags":[],"owner":{"account_id":447134,"reputation":1792,"user_id":840584,"display_name":"Ilya Lysenko"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1585493750,"creation_date":1565273681,"answer_id":57414678,"question_id":8297215,"body_markdown":"Converting of a hash map to a string of query parameters:\r\n\r\n```java\r\nMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\nparams.put(&quot;msisdn&quot;, msisdn);\r\nparams.put(&quot;email&quot;, email);\r\nparams.put(&quot;clientVersion&quot;, clientVersion);\r\nparams.put(&quot;clientType&quot;, clientType);\r\nparams.put(&quot;issuerName&quot;, issuerName);\r\nparams.put(&quot;applicationName&quot;, applicationName);\r\n\r\nUriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url);\r\nfor (Map.Entry&lt;String, String&gt; entry : params.entrySet()) {\r\n    builder.queryParam(entry.getKey(), entry.getValue());\r\n}\r\n\r\nHttpHeaders headers = new HttpHeaders();\r\nheaders.set(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\r\nHttpEntity&lt;String&gt; response = restTemplate.exchange(builder.toUriString(), HttpMethod.GET, new HttpEntity(headers), String.class);\r\n```","title":"Spring RestTemplate GET with parameters","body":"<p>Converting of a hash map to a string of query parameters:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\nparams.put(\"msisdn\", msisdn);\nparams.put(\"email\", email);\nparams.put(\"clientVersion\", clientVersion);\nparams.put(\"clientType\", clientType);\nparams.put(\"issuerName\", issuerName);\nparams.put(\"applicationName\", applicationName);\n\nUriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url);\nfor (Map.Entry&lt;String, String&gt; entry : params.entrySet()) {\n    builder.queryParam(entry.getKey(), entry.getValue());\n}\n\nHttpHeaders headers = new HttpHeaders();\nheaders.set(\"Accept\", \"application/json\");\n\nHttpEntity&lt;String&gt; response = restTemplate.exchange(builder.toUriString(), HttpMethod.GET, new HttpEntity(headers), String.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2890454,"reputation":412,"user_id":2479372,"accept_rate":55,"display_name":"unknown"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574324066,"creation_date":1574324066,"answer_id":58970170,"question_id":8297215,"body_markdown":"If your url is `http://localhost:8080/context path?msisdn={msisdn}&amp;email={email}`\r\n\r\nthen \r\n\r\n    Map&lt;String,Object&gt; queryParams=new HashMap&lt;&gt;();\r\n    queryParams.put(&quot;msisdn&quot;,your value)\r\n    queryParams.put(&quot;email&quot;,your value)\r\n\r\nworks for resttemplate exchange method as described by you","title":"Spring RestTemplate GET with parameters","body":"<p>If your url is <code>http://localhost:8080/context path?msisdn={msisdn}&amp;email={email}</code></p>\n\n<p>then </p>\n\n<pre><code>Map&lt;String,Object&gt; queryParams=new HashMap&lt;&gt;();\nqueryParams.put(\"msisdn\",your value)\nqueryParams.put(\"email\",your value)\n</code></pre>\n\n<p>works for resttemplate exchange method as described by you</p>\n"},{"tags":[],"owner":{"account_id":18537481,"reputation":1557,"user_id":13506812,"display_name":"abhinav kumar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614356231,"creation_date":1614351868,"answer_id":66388140,"question_id":8297215,"body_markdown":"I am providing a code snippet of RestTemplate GET method with path param example\r\n\r\n    public ResponseEntity&lt;String&gt; getName(int id) {\r\n\t\tfinal String url = &quot;http://localhost:8080/springrestexample/employee/name?id={id}&quot;;\r\n\t\tMap&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\r\n\t\tparams.put(&quot;id&quot;, id);\r\n\t\tHttpHeaders headers = new HttpHeaders();\r\n\t\theaders.setContentType(MediaType.APPLICATION_JSON);\r\n\t\tHttpEntity request = new HttpEntity(headers);\r\n\t\tResponseEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, String.class, params);\r\n\t\treturn response;\r\n\t}","title":"Spring RestTemplate GET with parameters","body":"<p>I am providing a code snippet of RestTemplate GET method with path param example</p>\n<pre><code>public ResponseEntity&lt;String&gt; getName(int id) {\n    final String url = &quot;http://localhost:8080/springrestexample/employee/name?id={id}&quot;;\n    Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\n    params.put(&quot;id&quot;, id);\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n    HttpEntity request = new HttpEntity(headers);\n    ResponseEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, String.class, params);\n    return response;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16202146,"reputation":1348,"user_id":11698284,"display_name":"Madhusanka Edirimanna"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646806964,"creation_date":1646806964,"answer_id":71405120,"question_id":8297215,"body_markdown":"You can use follow code for String.\r\n\r\n    URL_EXAMPLE=&quot;http://{domain}/Index.php?Username={user}&amp;password={password}&quot;;\r\n\r\n    String domain = &quot;example.com&quot;;\r\n    String user = &quot;user&quot;;\r\n    String password = &quot;password&quot;;\r\n\r\n    String data=this.restTemplate.getForObject(URL_EXAMPLE,String.class,domain,user,password);\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>You can use follow code for String.</p>\n<pre><code>URL_EXAMPLE=&quot;http://{domain}/Index.php?Username={user}&amp;password={password}&quot;;\n\nString domain = &quot;example.com&quot;;\nString user = &quot;user&quot;;\nString password = &quot;password&quot;;\n\nString data=this.restTemplate.getForObject(URL_EXAMPLE,String.class,domain,user,password);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11433301,"reputation":380,"user_id":8381420,"display_name":"saba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658059287,"creation_date":1658059287,"answer_id":73011580,"question_id":8297215,"body_markdown":"hi i build url with query params using this code: \r\n\r\n    UriComponentsBuilder.fromHttpUrl(url)\r\n                    .queryParam(&quot;bikerPhoneNumber&quot;, &quot;phoneNumberString&quot;)\r\n                    .toUriString();","title":"Spring RestTemplate GET with parameters","body":"<p>hi i build url with query params using this code:</p>\n<pre><code>UriComponentsBuilder.fromHttpUrl(url)\n                .queryParam(&quot;bikerPhoneNumber&quot;, &quot;phoneNumberString&quot;)\n                .toUriString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263115,"reputation":16950,"user_id":548473,"display_name":"Grigory Kislin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1670253410,"creation_date":1670253410,"answer_id":74690381,"question_id":8297215,"body_markdown":"\r\nOne more solution as method:\r\n\r\n    private String execute(String url, Map&lt;String, String&gt; params) {\r\n        UriComponentsBuilder uriBuilder = UriComponentsBuilder.fromUriString(url)\r\n        // predefined params\r\n                .queryParam(&quot;user&quot;, &quot;userValue&quot;)\r\n                .queryParam(&quot;password&quot;, &quot;passwordValue&quot;);\r\n        params.forEach(uriBuilder::queryParam);\r\n        HttpHeaders headers = new HttpHeaders() {{\r\n            setContentType(MediaType.APPLICATION_FORM_URLENCODED);\r\n            setAccept(List.of(MediaType.APPLICATION_JSON));\r\n        }};\r\n        ResponseEntity&lt;String&gt; request = restTemplate.exchange(uriBuilder.toUriString(), \r\n                    HttpMethod.GET, new HttpEntity&lt;&gt;(headers), String.class);\r\n        return request.getBody();\r\n\r\n    }\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>One more solution as method:</p>\n<pre><code>private String execute(String url, Map&lt;String, String&gt; params) {\n    UriComponentsBuilder uriBuilder = UriComponentsBuilder.fromUriString(url)\n    // predefined params\n            .queryParam(&quot;user&quot;, &quot;userValue&quot;)\n            .queryParam(&quot;password&quot;, &quot;passwordValue&quot;);\n    params.forEach(uriBuilder::queryParam);\n    HttpHeaders headers = new HttpHeaders() {{\n        setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n        setAccept(List.of(MediaType.APPLICATION_JSON));\n    }};\n    ResponseEntity&lt;String&gt; request = restTemplate.exchange(uriBuilder.toUriString(), \n                HttpMethod.GET, new HttpEntity&lt;&gt;(headers), String.class);\n    return request.getBody();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7718945,"reputation":709,"user_id":5845739,"display_name":"Pratik Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677606371,"creation_date":1677606371,"answer_id":75595590,"question_id":8297215,"body_markdown":"See I observe two things, the query parameter (@RequestParam) or the dynamic URLs (@PathVariable) can be passed in two ways i.e.\r\n1. Passing the data as Array.\r\n2. Using the map.\r\n\r\nIn both the pattern, one thing is common.\r\nthe data needs to passed dynamically and we can mark those places using curly braces.{}\r\nex. \r\n\r\n\r\nhttps://api.themoviedb.org/3/movie/now_playing?api_key={api_key}\r\n\r\n\r\n**Spring Documentation**\r\nNow we need to pass the data,\r\n\r\n**Style 1**\r\n```\r\nMap&lt;String,String&gt; data=new LinkedHashMap&lt;String,String&gt;();\r\ndata.put(&quot;api_key&quot;, api_key);\r\ntemplate.getForObject(url, TMDB.class,data);\r\n```\r\n\r\n\r\n**Style 2**\r\n```\r\nObject[] arr= {api_key};\r\ntemplate.getForObject(url, TMDB.class,arr);\r\n```","title":"Spring RestTemplate GET with parameters","body":"<p>See I observe two things, the query parameter (@RequestParam) or the dynamic URLs (@PathVariable) can be passed in two ways i.e.</p>\n<ol>\n<li>Passing the data as Array.</li>\n<li>Using the map.</li>\n</ol>\n<p>In both the pattern, one thing is common.\nthe data needs to passed dynamically and we can mark those places using curly braces.{}\nex.</p>\n<p><a href=\"https://api.themoviedb.org/3/movie/now_playing?api_key=%7Bapi_key%7D\" rel=\"nofollow noreferrer\">https://api.themoviedb.org/3/movie/now_playing?api_key={api_key}</a></p>\n<p><strong>Spring Documentation</strong>\nNow we need to pass the data,</p>\n<p><strong>Style 1</strong></p>\n<pre><code>Map&lt;String,String&gt; data=new LinkedHashMap&lt;String,String&gt;();\ndata.put(&quot;api_key&quot;, api_key);\ntemplate.getForObject(url, TMDB.class,data);\n</code></pre>\n<p><strong>Style 2</strong></p>\n<pre><code>Object[] arr= {api_key};\ntemplate.getForObject(url, TMDB.class,arr);\n</code></pre>\n"}],"owner":{"account_id":355080,"reputation":4551,"user_id":693815,"accept_rate":55,"display_name":"Elwood"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":761258,"favorite_count":0,"down_vote_count":1,"up_vote_count":393,"accepted_answer_id":8313055,"answer_count":17,"score":392,"last_activity_date":1691544072,"creation_date":1322490099,"question_id":8297215,"body_markdown":"I have to make a `REST` call that includes custom headers and query parameters. I set my `HttpEntity` with just the headers (no body), and I use the `RestTemplate.exchange()` method as follows:\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\r\n    Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\r\n    params.put(&quot;msisdn&quot;, msisdn);\r\n    params.put(&quot;email&quot;, email);\r\n    params.put(&quot;clientVersion&quot;, clientVersion);\r\n    params.put(&quot;clientType&quot;, clientType);\r\n    params.put(&quot;issuerName&quot;, issuerName);\r\n    params.put(&quot;applicationName&quot;, applicationName);\r\n\r\n    HttpEntity entity = new HttpEntity(headers);\r\n\r\n    HttpEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, entity, String.class, params);\r\n\r\nThis fails at the client end with the `dispatcher servlet` being unable to resolve the request to a handler. Having debugged it, it looks like the request parameters are not being sent.\r\n\r\nWhen I do a an exchange with a `POST` using a request body and no query parameters it works just fine.\r\n\r\nDoes anyone have any ideas?","title":"Spring RestTemplate GET with parameters","body":"<p>I have to make a <code>REST</code> call that includes custom headers and query parameters. I set my <code>HttpEntity</code> with just the headers (no body), and I use the <code>RestTemplate.exchange()</code> method as follows:</p>\n\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.set(\"Accept\", \"application/json\");\n\nMap&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\nparams.put(\"msisdn\", msisdn);\nparams.put(\"email\", email);\nparams.put(\"clientVersion\", clientVersion);\nparams.put(\"clientType\", clientType);\nparams.put(\"issuerName\", issuerName);\nparams.put(\"applicationName\", applicationName);\n\nHttpEntity entity = new HttpEntity(headers);\n\nHttpEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, entity, String.class, params);\n</code></pre>\n\n<p>This fails at the client end with the <code>dispatcher servlet</code> being unable to resolve the request to a handler. Having debugged it, it looks like the request parameters are not being sent.</p>\n\n<p>When I do a an exchange with a <code>POST</code> using a request body and no query parameters it works just fine.</p>\n\n<p>Does anyone have any ideas?</p>\n"},{"tags":["java","spring-boot","spring-webflux","spring-webclient"],"comments":[{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1691526210,"post_id":76861795,"comment_id":135503001,"body_markdown":"It&#39;s very hard to read the provided examples. Can you please fix it so others will be able to help you.","body":"It&#39;s very hard to read the provided examples. Can you please fix it so others will be able to help you."},{"owner":{"account_id":22069594,"reputation":11,"user_id":16330827,"display_name":"suresh"},"score":0,"creation_date":1691540982,"post_id":76861795,"comment_id":135504719,"body_markdown":"@IgorArtamonov There is a list of elements in JSON format, passing as request body in API call  using Spring Web Flux we want to Iterate the these list of elements.","body":"@IgorArtamonov There is a list of elements in JSON format, passing as request body in API call  using Spring Web Flux we want to Iterate the these list of elements."},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1691542540,"post_id":76861795,"comment_id":135504833,"body_markdown":"I mean the code you pasted is unreadable because of broken formatting. I suggest to edit the question and fix the formatting, so people could actually look at it","body":"I mean the code you pasted is unreadable because of broken formatting. I suggest to edit the question and fix the formatting, so people could actually look at it"},{"owner":{"account_id":22069594,"reputation":11,"user_id":16330827,"display_name":"suresh"},"score":0,"creation_date":1691544042,"post_id":76861795,"comment_id":135504940,"body_markdown":"@IgorArtamonov oh it was broken formatting, now updated it","body":"@IgorArtamonov oh it was broken formatting, now updated it"}],"owner":{"account_id":22069594,"reputation":11,"user_id":16330827,"display_name":"suresh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691543974,"creation_date":1691514470,"question_id":76861795,"body_markdown":"    We have the following list of elements in JSON form, how can we iterate the below list using spring webflux. While iteration we have to return the response as well. \r\n    \r\n       &quot;units&quot;: [\r\n                    {\r\n                        &quot;unitTitle&quot;: &quot;unit1&quot;,\r\n                        &quot;unitNumber&quot;: 1,\r\n                        &quot;chapters&quot;: [\r\n                            {\r\n                                &quot;chapterTitle&quot;: &quot;ch1&quot;,\r\n                                &quot;chapterNumber&quot;: 1,\r\n                                &quot;modules&quot;: [\r\n                                    {\r\n                                        &quot;moduleName&quot;: &quot;module&quot;,\r\n                                        &quot;moduleNumber&quot;: 1,\r\n                                        &quot;sections&quot;: [\r\n                                            {\r\n                                                &quot;sectionName&quot;: &quot;section1&quot;,\r\n                                                &quot;sectionNumber&quot;: 1\r\n                                            }\r\n                                        ]\r\n                                    }\r\n                                ]\r\n                            },\r\n                            {\r\n                                &quot;chapterTitle&quot;: &quot;Ch2&quot;,\r\n                                &quot;chapterNumber&quot;: 2,\r\n                                &quot;modules&quot;: [\r\n                                    {\r\n                                        &quot;moduleName&quot;: &quot;module2&quot;,\r\n                                        &quot;moduleNumber&quot;: 1,\r\n                                        &quot;sections&quot;: [\r\n                                            {\r\n                                                &quot;sectionName&quot;: &quot;section2&quot;,\r\n                                                &quot;sectionNumber&quot;: 1\r\n                                            }\r\n                                        ]\r\n                                    }\r\n                                ]\r\n    \r\n    I have tried with concatMap :\r\n    \r\n    \tFlux.fromStream(generateTocRequest.getVolumes().stream()).concatMap(volume -&gt; {\r\n    \t\t\t\tString title = !StringUtils.isBlank(volume.getVolumeTitle()) ? volume.getVolumeTitle() : &quot;&quot;;\r\n    \t\t\t\treturn createTOCContainer(new Container(projectUrn, TocConstants.VOLUME.toLowerCase(), parentEntityUrn, TocConstants.BODYMATTER, 0), title, token, isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t.flatMap(containerVolume -&gt; {\r\n    \t\t\t\t\tif ( !CollectionUtils.isEmpty(volume.getUnits()) &amp;&amp; containerVolume != null ) {\r\n    \t\t\t\t\t\tvolumeList.add(containerVolume.getEntityUrn());\r\n    \r\n    \t\t\t\t\t\tFlux.fromStream(volume.getUnits().stream()).concatMap(unit -&gt; {\r\n    \t\t\t\t\t\t\tString unitTitle = !StringUtils.isBlank(unit.getUnitTitle()) ? unit.getUnitTitle() : &quot;&quot;;\r\n    \t\t\t\t\t\t\treturn createTOCContainer(new Container(projectUrn, TocConstants.PART.toLowerCase(), parentEntityUrn, TocConstants.BODYMATTER, 0), unitTitle, token, isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t\t\t\t.flatMap(containerUnit -&gt; {\r\n    \t\t\t\t\t\t\t\tif ( !CollectionUtils.isEmpty(unit.getChapters()) &amp;&amp; containerUnit != null ) {\r\n    \r\n    \t\t\t\t\t\t\t\t\tFlux.fromStream(unit.getChapters().stream()).concatMap(chapter -&gt; {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\tString chapterName = !StringUtils.isBlank(chapter.getChapterTitle()) ? chapter.getChapterTitle() : &quot;&quot;;\r\n    \t\t\t\t\t\t\t\t\treturn createTOCContainer(new Container(projectUrn, TocConstants.CHAPTER.toLowerCase(), containerUnit.getEntityUrn(), TocConstants.BODYMATTER, 0), chapterName, token, isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.flatMap(containerChapter -&gt; {\r\n    \t\t\t\t\t\t\t\t\t\t\tif ( !CollectionUtils.isEmpty(chapter.getModules()) &amp;&amp; containerChapter != null ) {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\t\t\tFlux.fromStream(chapter.getModules().stream()).concatMap(module -&gt; {\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\tString moduleName = !StringUtils.isBlank(module.getModuleName()) ? module.getModuleName() : &quot;&quot;;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\treturn createTOCContainer(new Container(projectUrn, TocConstants.MODULE.toLowerCase(), containerChapter.getEntityUrn(), TocConstants.BODYMATTER, 0), moduleName, token, isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t .flatMap(containerModule -&gt; {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( !CollectionUtils.isEmpty(module.getSections()) &amp;&amp; containerModule != null ) {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tFlux.fromStream(module.getSections().stream()).concatMap(section -&gt; {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tString sectionName = !StringUtils.isBlank(section.getSectionName()) ? section.getSectionName() : &quot;&quot;;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcreateTOCContainer(new Container(projectUrn, TocConstants.SECTION.toLowerCase(), containerChapter.getEntityUrn(), TocConstants.BODYMATTER, 0), sectionName, token, isAutoNumberingEnabled);\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn Mono.empty();\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcreateTOCContainer(new Container(projectUrn, TocConstants.SECTION, containerModule.getEntityUrn(), TocConstants.BODYMATTER, 0), &quot;&quot;, token, isAutoNumberingEnabled);\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\treturn Mono.just(containerModule);\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\t\t\t\treturn Mono.just(containerChapter);\r\n    \t\t\t\t\t\t\t\t\t\t});\r\n    \r\n    \t\t\t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t\t\t\treturn Mono.just(containerUnit);\r\n    \t\t\t\t\t\t\t});\r\n    \r\n    \r\n    \t\t\t\t\t\t});\r\n    \r\n    \t\t\t\t\t}\r\n    \t\t\t\t\treturn Mono.just(containerVolume);\r\n    \t\t\t\t});\r\n    \t\t\t});\r\n    \r\n    //createTocContainer method call which is being called in previous function\r\n //createTocContainer method call which is being called in previous function\r\n //createTocContainer method call which is being called in previous function\r\n //createTocContainer method call which is being called in previous function\r\n //createTocContainer method call which is being called in previous function\r\n    \r\n    public Mono&lt;ContainerMetadata&gt; createTOCContainer(final Container containerRequest, final String title, final String token, boolean isAutoNumberingEnabled) {\r\n    \t\tString metaData = null;\r\n    \t\tLOGGER.info(&quot;Inside StructureServiceImpl.createTOCContainer&quot;);\r\n    \t\tfinal ContainerMetadata[] containerMetaData = new ContainerMetadata[1];\r\n    \t\tString uri = tocStructureApiBaseUrl + tocStructureContextPath + TocConstants.SEPERATOR + containerRequest.getProjectUrn()\r\n    \t\t\t\t+ TocConstants.SEPERATOR + TocConstants.CONTAINER + TocConstants.SEPERATOR\r\n    \t\t\t\t+ containerRequest.getParentEntityUrn() + TocConstants.SEPERATOR\r\n    \t\t\t\t+ TocConstants.SECTION + TocConstants.SEPERATOR + TocConstants.BODYMATTER\r\n    \t\t\t\t+ TocConstants.SEPERATOR + TocConstants.CHILD_CONTAINER;\r\n    \r\n    \t\tHttpHeaders headers = Header.buildAuthorizationHeader(token);\r\n    \t\ttry {\r\n    \t\t\treturn createContainerMetaData(containerRequest, token, uri)\r\n    \t\t\t\t\t.flatMap(result-&gt;{\r\n    \t\t\t\t\t\tcontainerMetaData[0] = gson.fromJson(result, ContainerMetadata.class);\r\n    \t\t\t\t\t\tLOGGER.info(&quot;container meta data obtained via tocStructureApi call : [{}]&quot;, containerMetaData[0]);\r\n    \r\n    \t\t\t\t\t\tif(StringUtils.isNotBlank(title))\r\n    \t\t\t\t\t\t\trenameTocContainer(title,  containerRequest.getProjectUrn(),  containerMetaData[0].getEntityUrn(), token);\r\n    \t\t\t\t\t\tLOGGER.info(&quot;Title has been updated&quot;);\r\n    \t\t\t\t\t\tif(isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t\tLOGGER.info(&quot;StructureAPIService.addContainerMetaData()&quot;);\r\n    \t\t\t\t\t\taddContainerMetaData(metaData.toString(), containerRequest, token, Boolean.TRUE).subscribe();\r\n    \r\n    \r\n    \t\t\t\t\t\treturn Mono.just(containerMetaData[0]);\r\n    \t\t\t\t\t});\r\n    \r\n    \t\t} catch (HttpClientErrorException e) {\r\n    \t\t\tLOGGER.error(&quot;Container element creation failed for the Container and Title [{} {}]&quot;, containerRequest.getParentEntityUrn(), title);\r\n    \t\t\treturn Mono.just(containerMetaData[0]);\r\n    \t\t}\r\n    \t}\r\n    But that is not iterating the elements, any suggestion for the same to achieve the result in iterative form.","title":"How to iterate list of elements in spring web flux","body":"<pre><code>We have the following list of elements in JSON form, how can we iterate the below list using spring webflux. While iteration we have to return the response as well. \n\n   &quot;units&quot;: [\n                {\n                    &quot;unitTitle&quot;: &quot;unit1&quot;,\n                    &quot;unitNumber&quot;: 1,\n                    &quot;chapters&quot;: [\n                        {\n                            &quot;chapterTitle&quot;: &quot;ch1&quot;,\n                            &quot;chapterNumber&quot;: 1,\n                            &quot;modules&quot;: [\n                                {\n                                    &quot;moduleName&quot;: &quot;module&quot;,\n                                    &quot;moduleNumber&quot;: 1,\n                                    &quot;sections&quot;: [\n                                        {\n                                            &quot;sectionName&quot;: &quot;section1&quot;,\n                                            &quot;sectionNumber&quot;: 1\n                                        }\n                                    ]\n                                }\n                            ]\n                        },\n                        {\n                            &quot;chapterTitle&quot;: &quot;Ch2&quot;,\n                            &quot;chapterNumber&quot;: 2,\n                            &quot;modules&quot;: [\n                                {\n                                    &quot;moduleName&quot;: &quot;module2&quot;,\n                                    &quot;moduleNumber&quot;: 1,\n                                    &quot;sections&quot;: [\n                                        {\n                                            &quot;sectionName&quot;: &quot;section2&quot;,\n                                            &quot;sectionNumber&quot;: 1\n                                        }\n                                    ]\n                                }\n                            ]\n\nI have tried with concatMap :\n\n    Flux.fromStream(generateTocRequest.getVolumes().stream()).concatMap(volume -&gt; {\n                String title = !StringUtils.isBlank(volume.getVolumeTitle()) ? volume.getVolumeTitle() : &quot;&quot;;\n                return createTOCContainer(new Container(projectUrn, TocConstants.VOLUME.toLowerCase(), parentEntityUrn, TocConstants.BODYMATTER, 0), title, token, isAutoNumberingEnabled)\n                        .flatMap(containerVolume -&gt; {\n                    if ( !CollectionUtils.isEmpty(volume.getUnits()) &amp;&amp; containerVolume != null ) {\n                        volumeList.add(containerVolume.getEntityUrn());\n\n                        Flux.fromStream(volume.getUnits().stream()).concatMap(unit -&gt; {\n                            String unitTitle = !StringUtils.isBlank(unit.getUnitTitle()) ? unit.getUnitTitle() : &quot;&quot;;\n                            return createTOCContainer(new Container(projectUrn, TocConstants.PART.toLowerCase(), parentEntityUrn, TocConstants.BODYMATTER, 0), unitTitle, token, isAutoNumberingEnabled)\n                                    .flatMap(containerUnit -&gt; {\n                                if ( !CollectionUtils.isEmpty(unit.getChapters()) &amp;&amp; containerUnit != null ) {\n\n                                    Flux.fromStream(unit.getChapters().stream()).concatMap(chapter -&gt; {\n\n                                        String chapterName = !StringUtils.isBlank(chapter.getChapterTitle()) ? chapter.getChapterTitle() : &quot;&quot;;\n                                    return createTOCContainer(new Container(projectUrn, TocConstants.CHAPTER.toLowerCase(), containerUnit.getEntityUrn(), TocConstants.BODYMATTER, 0), chapterName, token, isAutoNumberingEnabled)\n                                                .flatMap(containerChapter -&gt; {\n                                            if ( !CollectionUtils.isEmpty(chapter.getModules()) &amp;&amp; containerChapter != null ) {\n\n                                                Flux.fromStream(chapter.getModules().stream()).concatMap(module -&gt; {\n                                                    String moduleName = !StringUtils.isBlank(module.getModuleName()) ? module.getModuleName() : &quot;&quot;;\n                                                    return createTOCContainer(new Container(projectUrn, TocConstants.MODULE.toLowerCase(), containerChapter.getEntityUrn(), TocConstants.BODYMATTER, 0), moduleName, token, isAutoNumberingEnabled)\n                                                     .flatMap(containerModule -&gt; {\n\n                                                        if ( !CollectionUtils.isEmpty(module.getSections()) &amp;&amp; containerModule != null ) {\n\n                                                            Flux.fromStream(module.getSections().stream()).concatMap(section -&gt; {\n\n                                                                String sectionName = !StringUtils.isBlank(section.getSectionName()) ? section.getSectionName() : &quot;&quot;;\n                                                                createTOCContainer(new Container(projectUrn, TocConstants.SECTION.toLowerCase(), containerChapter.getEntityUrn(), TocConstants.BODYMATTER, 0), sectionName, token, isAutoNumberingEnabled);\n                                                                return Mono.empty();\n                                                            });\n                                                        } else {\n                                                            createTOCContainer(new Container(projectUrn, TocConstants.SECTION, containerModule.getEntityUrn(), TocConstants.BODYMATTER, 0), &quot;&quot;, token, isAutoNumberingEnabled);\n                                                        }\n                                                        return Mono.just(containerModule);\n                                                    });\n                                                });\n                                            }\n                                            return Mono.just(containerChapter);\n                                        });\n\n                                    });\n                                }\n\n                                return Mono.just(containerUnit);\n                            });\n\n\n                        });\n\n                    }\n                    return Mono.just(containerVolume);\n                });\n            });\n\n//createTocContainer method call which is being called in previous function\n</code></pre>\n<p>//createTocContainer method call which is being called in previous function\n//createTocContainer method call which is being called in previous function\n//createTocContainer method call which is being called in previous function\n//createTocContainer method call which is being called in previous function</p>\n<pre><code>public Mono&lt;ContainerMetadata&gt; createTOCContainer(final Container containerRequest, final String title, final String token, boolean isAutoNumberingEnabled) {\n        String metaData = null;\n        LOGGER.info(&quot;Inside StructureServiceImpl.createTOCContainer&quot;);\n        final ContainerMetadata[] containerMetaData = new ContainerMetadata[1];\n        String uri = tocStructureApiBaseUrl + tocStructureContextPath + TocConstants.SEPERATOR + containerRequest.getProjectUrn()\n                + TocConstants.SEPERATOR + TocConstants.CONTAINER + TocConstants.SEPERATOR\n                + containerRequest.getParentEntityUrn() + TocConstants.SEPERATOR\n                + TocConstants.SECTION + TocConstants.SEPERATOR + TocConstants.BODYMATTER\n                + TocConstants.SEPERATOR + TocConstants.CHILD_CONTAINER;\n\n        HttpHeaders headers = Header.buildAuthorizationHeader(token);\n        try {\n            return createContainerMetaData(containerRequest, token, uri)\n                    .flatMap(result-&gt;{\n                        containerMetaData[0] = gson.fromJson(result, ContainerMetadata.class);\n                        LOGGER.info(&quot;container meta data obtained via tocStructureApi call : [{}]&quot;, containerMetaData[0]);\n\n                        if(StringUtils.isNotBlank(title))\n                            renameTocContainer(title,  containerRequest.getProjectUrn(),  containerMetaData[0].getEntityUrn(), token);\n                        LOGGER.info(&quot;Title has been updated&quot;);\n                        if(isAutoNumberingEnabled)\n                            LOGGER.info(&quot;StructureAPIService.addContainerMetaData()&quot;);\n                        addContainerMetaData(metaData.toString(), containerRequest, token, Boolean.TRUE).subscribe();\n\n\n                        return Mono.just(containerMetaData[0]);\n                    });\n\n        } catch (HttpClientErrorException e) {\n            LOGGER.error(&quot;Container element creation failed for the Container and Title [{} {}]&quot;, containerRequest.getParentEntityUrn(), title);\n            return Mono.just(containerMetaData[0]);\n        }\n    }\nBut that is not iterating the elements, any suggestion for the same to achieve the result in iterative form.\n</code></pre>\n"},{"tags":["javascript","java","android","webview","android-webview"],"answers":[{"tags":[],"owner":{"account_id":20327316,"reputation":998,"user_id":14910363,"display_name":"FearNot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690342834,"creation_date":1690342834,"answer_id":76767894,"question_id":76407219,"body_markdown":"Are you sure that you enabled multiple windows in the webview&#39;s settings ?:\r\n\r\n```settings.setSupportMultipleWindows(true)```","title":"How Android WebView gets the URL of the new window from the Message object?","body":"<p>Are you sure that you enabled multiple windows in the webview's settings ?:</p>\n<p><code>settings.setSupportMultipleWindows(true)</code></p>\n"},{"tags":[],"owner":{"account_id":29188057,"reputation":16,"user_id":22360721,"display_name":"Levi Lin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691542741,"creation_date":1691541232,"answer_id":76863876,"question_id":76407219,"body_markdown":"webChromeClient doesn&#39;t expose the URL of the tapped link when creating a new window.\r\n\r\nIf you need to handle the tapped URL, the only way to handle window.open() case is through webViewClient&#39;s `shouldOverrideUrlLoading`, which is something like below:\r\n\r\n```\r\nwebChromeClient = object : WebChromeClient() {\r\n    override fun onCloseWindow(window: WebView?) {\r\n        super.onCloseWindow(window)\r\n    }\r\n\r\n    override fun onCreateWindow(\r\n        view: WebView?,\r\n        isDialog: Boolean,\r\n        isUserGesture: Boolean,\r\n        resultMsg: Message?\r\n    ): Boolean {\r\n\r\n        if (view?.context == null) {\r\n            return false\r\n        }\r\n        if (resultMsg == null) {\r\n            return false\r\n        }\r\n\r\n        // Use CustomTabs to open the link when the hitTestResult is not null\r\n        if (view.hitTestResult.extra != null) {\r\n            val colorParam = CustomTabColorSchemeParams.Builder().setToolbarColor(getColor(context, R.color.blue)).build()\r\n            val intent = CustomTabsIntent.Builder()\r\n                .setDefaultColorSchemeParams(colorParam)\r\n                .setShowTitle(true)\r\n                .build()\r\n            intent.launchUrl(view.context, Uri.parse(view.hitTestResult.extra))\r\n            return false\r\n        }\r\n\r\n        // Use a new webViewClient to handle window.open() case\r\n        val newWebView = WebView(view.context)\r\n        newWebView.webViewClient = object : WebViewClient() {\r\n            override fun shouldOverrideUrlLoading(\r\n                view: WebView?,\r\n                request: WebResourceRequest?\r\n            ): Boolean {\r\n                if (request?.url == null) {\r\n                    return true\r\n                }\r\n                val url = request.url.toString()\r\n                if (url.contains(&quot;example.com&quot;)) {\r\n                    // Here you can handle “example.com” and do whatever you want\r\n                    return true\r\n                }\r\n                return true\r\n            }\r\n        }\r\n        val transport = resultMsg.obj as WebView.WebViewTransport\r\n        transport.webView = newWebView\r\n        resultMsg.sendToTarget()\r\n\r\n        return true\r\n    }\r\n}\r\n```\r\n\r\nBy the way, don&#39;t forget to add JS settings to WebView.\r\n```\r\nwebView.apply {\r\n    settings.javaScriptEnabled = true\r\n    settings.javaScriptCanOpenWindowsAutomatically = true\r\n    settings.setSupportMultipleWindows(true)\r\n}\r\n```\r\n\r\nHope this will help.","title":"How Android WebView gets the URL of the new window from the Message object?","body":"<p>webChromeClient doesn't expose the URL of the tapped link when creating a new window.</p>\n<p>If you need to handle the tapped URL, the only way to handle window.open() case is through webViewClient's <code>shouldOverrideUrlLoading</code>, which is something like below:</p>\n<pre><code>webChromeClient = object : WebChromeClient() {\n    override fun onCloseWindow(window: WebView?) {\n        super.onCloseWindow(window)\n    }\n\n    override fun onCreateWindow(\n        view: WebView?,\n        isDialog: Boolean,\n        isUserGesture: Boolean,\n        resultMsg: Message?\n    ): Boolean {\n\n        if (view?.context == null) {\n            return false\n        }\n        if (resultMsg == null) {\n            return false\n        }\n\n        // Use CustomTabs to open the link when the hitTestResult is not null\n        if (view.hitTestResult.extra != null) {\n            val colorParam = CustomTabColorSchemeParams.Builder().setToolbarColor(getColor(context, R.color.blue)).build()\n            val intent = CustomTabsIntent.Builder()\n                .setDefaultColorSchemeParams(colorParam)\n                .setShowTitle(true)\n                .build()\n            intent.launchUrl(view.context, Uri.parse(view.hitTestResult.extra))\n            return false\n        }\n\n        // Use a new webViewClient to handle window.open() case\n        val newWebView = WebView(view.context)\n        newWebView.webViewClient = object : WebViewClient() {\n            override fun shouldOverrideUrlLoading(\n                view: WebView?,\n                request: WebResourceRequest?\n            ): Boolean {\n                if (request?.url == null) {\n                    return true\n                }\n                val url = request.url.toString()\n                if (url.contains(&quot;example.com&quot;)) {\n                    // Here you can handle “example.com” and do whatever you want\n                    return true\n                }\n                return true\n            }\n        }\n        val transport = resultMsg.obj as WebView.WebViewTransport\n        transport.webView = newWebView\n        resultMsg.sendToTarget()\n\n        return true\n    }\n}\n</code></pre>\n<p>By the way, don't forget to add JS settings to WebView.</p>\n<pre><code>webView.apply {\n    settings.javaScriptEnabled = true\n    settings.javaScriptCanOpenWindowsAutomatically = true\n    settings.setSupportMultipleWindows(true)\n}\n</code></pre>\n<p>Hope this will help.</p>\n"}],"owner":{"account_id":18884916,"reputation":144,"user_id":13776577,"display_name":"拉拉姬"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76863876,"answer_count":2,"score":1,"last_activity_date":1691542741,"creation_date":1685973751,"question_id":76407219,"body_markdown":"```java\r\npublic boolean onCreateWindow(WebView view, boolean dialog, boolean userGesture, Message resultMsg)\r\n```\r\nI found a way to do it at StackOverflow, but it doesn&#39;t get the &quot;window.open(&#39;example.com&#39;)&quot; url.\r\n\r\n```java\r\nMessage href = view.getHandler().obtainMessage();\r\nview.requestFocusNodeHref(href);\r\nString url = href.getData().getString(&quot;url&quot;);\r\n\r\n// Only get &quot;&lt;a href=&#39;example.com&#39; target=&#39;_blank&#39;&gt;&quot; url.\r\n```","title":"How Android WebView gets the URL of the new window from the Message object?","body":"<pre class=\"lang-java prettyprint-override\"><code>public boolean onCreateWindow(WebView view, boolean dialog, boolean userGesture, Message resultMsg)\n</code></pre>\n<p>I found a way to do it at StackOverflow, but it doesn't get the &quot;window.open('example.com')&quot; url.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Message href = view.getHandler().obtainMessage();\nview.requestFocusNodeHref(href);\nString url = href.getData().getString(&quot;url&quot;);\n\n// Only get &quot;&lt;a href='example.com' target='_blank'&gt;&quot; url.\n</code></pre>\n"},{"tags":["java","exponential","pow"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":4,"creation_date":1691541833,"post_id":76863899,"comment_id":135504784,"body_markdown":"I have not run your code, but I have to wonder if you&#39;re experiencing long overflow. Have you used a debugger to see what the variables are doing as the code runs?","body":"I have not run your code, but I have to wonder if you&#39;re experiencing long overflow. Have you used a debugger to see what the variables are doing as the code runs?"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":4,"creation_date":1691541873,"post_id":76863899,"comment_id":135504788,"body_markdown":"[And what have you already done in terms of debugging, yourself?](/help/how-to-ask)","body":"<a href=\"/help/how-to-ask\">And what have you already done in terms of debugging, yourself?</a>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":5,"creation_date":1691543263,"post_id":76863899,"comment_id":135504880,"body_markdown":"Could you, please, tell us what the code is *supposed* to do? Even if  it should be obvious, describing what is expected is part of writing a good question.","body":"Could you, please, tell us what the code is <i>supposed</i> to do? Even if  it should be obvious, describing what is expected is part of writing a good question."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1691543359,"post_id":76863899,"comment_id":135504890,"body_markdown":"If the problem comes from a web page, such as a programming practice / challenge site, please provide a link to that page.","body":"If the problem comes from a web page, such as a programming practice / challenge site, please provide a link to that page."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1691547178,"post_id":76863899,"comment_id":135505198,"body_markdown":"Does anything on [this page](https://stackoverflow.com/questions/72830171/how-to-get-the-correct-output-in-modulo-109-7-format) help?","body":"Does anything on <a href=\"https://stackoverflow.com/questions/72830171/how-to-get-the-correct-output-in-modulo-109-7-format\">this page</a> help?"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691700128,"post_id":76863899,"comment_id":135530852,"body_markdown":"Hello, welcome to Stack Overflow! Maybe you should [read this](https://stackoverflow.com/help/how-to-ask), and then edit your question.","body":"Hello, welcome to Stack Overflow! Maybe you should <a href=\"https://stackoverflow.com/help/how-to-ask\">read this</a>, and then edit your question."}],"answers":[{"tags":[],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1691541857,"creation_date":1691541857,"answer_id":76863907,"question_id":76863899,"body_markdown":"Likely a precision error, try to use `long` rather than `int` and if that still does not give you the right answer use `BigInteger` which is an arbitrary precision number.","title":"Java Pow Of 2 Gives me a Wrong answer","body":"<p>Likely a precision error, try to use <code>long</code> rather than <code>int</code> and if that still does not give you the right answer use <code>BigInteger</code> which is an arbitrary precision number.</p>\n"}],"owner":{"account_id":28667413,"reputation":1,"user_id":21951133,"display_name":"Hemanthkumar Pujari"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691542684,"creation_date":1691541670,"question_id":76863899,"body_markdown":"```\r\nclass Solution {\r\n    int mod = (int) (1e9) + 7;\r\n\r\n    int modPow(long base, long exponent) {\r\n        if (exponent == 0) return 1;\r\n\r\n        long result = 1;\r\n        while (exponent &gt; 0) {\r\n            if (exponent % 2 == 1) {\r\n                result = (result * base) % mod;\r\n            }\r\n            base = (base * base) % mod;\r\n            exponent /= 2;\r\n        }\r\n        return (int) result;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Solution solution = new Solution();\r\n        int result = solution.modPow(2, (long) 1e9);\r\n        System.out.println(result); // Output: 336781474\r\n    }\r\n}\r\n```\r\nCould you please find the error:\\\r\nI got the wrong answer as: 140625001\\\r\nbut the correct output is: 336781474","title":"Java Pow Of 2 Gives me a Wrong answer","body":"<pre><code>class Solution {\n    int mod = (int) (1e9) + 7;\n\n    int modPow(long base, long exponent) {\n        if (exponent == 0) return 1;\n\n        long result = 1;\n        while (exponent &gt; 0) {\n            if (exponent % 2 == 1) {\n                result = (result * base) % mod;\n            }\n            base = (base * base) % mod;\n            exponent /= 2;\n        }\n        return (int) result;\n    }\n\n    public static void main(String[] args) {\n        Solution solution = new Solution();\n        int result = solution.modPow(2, (long) 1e9);\n        System.out.println(result); // Output: 336781474\n    }\n}\n</code></pre>\n<p>Could you please find the error:<br />\nI got the wrong answer as: 140625001<br />\nbut the correct output is: 336781474</p>\n"},{"tags":["java","javafx","javafxports","javafx-webengine"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691329430,"post_id":76846147,"comment_id":135474078,"body_markdown":"How are those icons addressed in your *code*, e.g. *mdi2o-office-building*?","body":"How are those icons addressed in your <i>code</i>, e.g. <i>mdi2o-office-building</i>?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691329856,"post_id":76846147,"comment_id":135474144,"body_markdown":"[Also](https://kordamp.org/ikonli/) *Here’s for example the minimum settings required for a JavaFX application\nmodule-info.java ...requires org.kordamp.ikonli.fontawesome;*","body":"<a href=\"https://kordamp.org/ikonli/\" rel=\"nofollow noreferrer\">Also</a> <i>Here’s for example the minimum settings required for a JavaFX application module-info.java ...requires org.kordamp.ikonli.fontawesome;</i>"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691330313,"post_id":76846147,"comment_id":135474196,"body_markdown":"@g00se,thanks for responding. heres a sample of the icon presentation in my code","body":"@g00se,thanks for responding. heres a sample of the icon presentation in my code"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691330339,"post_id":76846147,"comment_id":135474200,"body_markdown":"@g00se  `        FontIcon projectIcon =  new FontIcon(MaterialDesignO.OFFICE_BUILDING);\n        projectIcon.setIconSize(12);\n        projectLabel.setGraphic(projectIcon);`","body":"@g00se  `        FontIcon projectIcon =  new FontIcon(MaterialDesignO.OFFICE_BUILDING);         projectIcon.setIconSize(12);         projectLabel.setGraphic(projectIcon);`"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691330398,"post_id":76846147,"comment_id":135474207,"body_markdown":"`       ** FontIcon projectIcon =  new FontIcon(MaterialDesignO.OFFICE_BUILDING);**\n        projectIcon.setIconSize(12);\n        projectLabel.setGraphic(projectIcon);`","body":"`       ** FontIcon projectIcon =  new FontIcon(MaterialDesignO.OFFICE_BUILDING);**         projectIcon.setIconSize(12);         projectLabel.setGraphic(projectIcon);`"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691330496,"post_id":76846147,"comment_id":135474216,"body_markdown":"so brief, I use the materialdesign2 enums eg MaterialDesign2A.ACOUNT_CIRCLE","body":"so brief, I use the materialdesign2 enums eg MaterialDesign2A.ACOUNT_CIRCLE"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691330838,"post_id":76846147,"comment_id":135474258,"body_markdown":"You&#39;ve built an executable *fat* jar? If not, it won&#39;t find that kordamp dependency","body":"You&#39;ve built an executable <i>fat</i> jar? If not, it won&#39;t find that kordamp dependency"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691331756,"post_id":76846147,"comment_id":135474363,"body_markdown":"@g00se. Its built using  intellij artifacts. Am not sure if thats a fat jar. sorry am originally from a python background. Please tell me, how i make it fat :)","body":"@g00se. Its built using  intellij artifacts. Am not sure if thats a fat jar. sorry am originally from a python background. Please tell me, how i make it fat :)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691333031,"post_id":76846147,"comment_id":135474504,"body_markdown":"I can&#39;t say as I don&#39;t use IntelliJ. Are you using Maven under the covers?","body":"I can&#39;t say as I don&#39;t use IntelliJ. Are you using Maven under the covers?"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691333571,"post_id":76846147,"comment_id":135474556,"body_markdown":"@g00se Yes i am.","body":"@g00se Yes i am."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691340341,"post_id":76846147,"comment_id":135475320,"body_markdown":"Have maven [copy the dependencies](https://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html) (jar files) to your output directory (not shading them all together).  You will have multiple jar files.  When you run the app, use the `-p` option to place the directory with the jar files on the module path.  Ensure that you define proper module-info for your app as documented for JavaFX and your required dependencies.  Alternately, use jlink via the JavaFX maven plugin if your app has no automatic modules or perhaps jpackage otherwise.","body":"Have maven <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html\" rel=\"nofollow noreferrer\">copy the dependencies</a> (jar files) to your output directory (not shading them all together).  You will have multiple jar files.  When you run the app, use the <code>-p</code> option to place the directory with the jar files on the module path.  Ensure that you define proper module-info for your app as documented for JavaFX and your required dependencies.  Alternately, use jlink via the JavaFX maven plugin if your app has no automatic modules or perhaps jpackage otherwise."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691340665,"post_id":76846147,"comment_id":135475352,"body_markdown":"What I described is for desktop apps. You mention [javafxports](https://gluonhq.com/products/mobile/javafxports) for embedded apps.  I know nothing about that.  You should contact Gluon directly for assistance with that.","body":"What I described is for desktop apps. You mention <a href=\"https://gluonhq.com/products/mobile/javafxports\" rel=\"nofollow noreferrer\">javafxports</a> for embedded apps.  I know nothing about that.  You should contact Gluon directly for assistance with that."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691341223,"post_id":76846147,"comment_id":135475421,"body_markdown":"When it comes to distribution, you will want either a fat jar or (sounder) a `jpackage`d solution. So @jewelsea is probably right to recommend `jlink` over a fat jar approach as it&#39;s a step on the road to `jpackage`. JavaFX is relatively problematic to jar as the runtime is non-standard","body":"When it comes to distribution, you will want either a fat jar or (sounder) a <code>jpackage</code>d solution. So @jewelsea is probably right to recommend <code>jlink</code> over a fat jar approach as it&#39;s a step on the road to <code>jpackage</code>. JavaFX is relatively problematic to jar as the runtime is non-standard"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691356627,"post_id":76846147,"comment_id":135477068,"body_markdown":"I removed the JavaFX 11 tag as you state you are using JavaFX 18.","body":"I removed the JavaFX 11 tag as you state you are using JavaFX 18."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691407564,"post_id":76846147,"comment_id":135482720,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691435850,"post_id":76846147,"comment_id":135488681,"body_markdown":"@jewelsea I am using jlink. Its automatically configured into the project when created using intellij javafx plugin. EVERY item in the resource dir, [images,fonts etc] load properly so it must be an improperly configured dependency issue.  i have all three codependencies ikonli.javafx,ikonli.core and the icon package ikonli.materialdesign2.    All works well when run from intellij but the jar shows no ikonli icons except the images from the resource directory.  the icons are included in the project as such         DemoLabel.setGraphic(new FontIcon(MaterialDesignA.Account_Circle));","body":"@jewelsea I am using jlink. Its automatically configured into the project when created using intellij javafx plugin. EVERY item in the resource dir, [images,fonts etc] load properly so it must be an improperly configured dependency issue.  i have all three codependencies ikonli.javafx,ikonli.core and the icon package ikonli.materialdesign2.    All works well when run from intellij but the jar shows no ikonli icons except the images from the resource directory.  the icons are included in the project as such         DemoLabel.setGraphic(new FontIcon(MaterialDesignA.Account_Circle));"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691436125,"post_id":76846147,"comment_id":135488731,"body_markdown":"@jewelsea   i read a few solutions regarding service files, so i opened the bundled jar with winrar and noticed that in the Manifest-Mf dir,  Ikonli.IkonProvider and Ikonli.IkonHandler where included.I am told three service files are needed. dono what am missing.been on this for three days.the project all complete except for the icons which completely destroys the look and feel. I need help. willing to upload the entire project to gdrive if necessary.its nothing secure.Just a school management system to generate reports.","body":"@jewelsea   i read a few solutions regarding service files, so i opened the bundled jar with winrar and noticed that in the Manifest-Mf dir,  Ikonli.IkonProvider and Ikonli.IkonHandler where included.I am told three service files are needed. dono what am missing.been on this for three days.the project all complete except for the icons which completely destroys the look and feel. I need help. willing to upload the entire project to gdrive if necessary.its nothing secure.Just a school management system to generate reports."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691436136,"post_id":76846147,"comment_id":135488735,"body_markdown":"Your question talks about an &quot;executable jar&quot; in the title and in the body it talks about a &quot;shadow jar&quot;.  `jlink` does not create an executable jar, it creates a runtime image.  It doesn&#39;t matter if the maven jlink plugin is in your project, if you are not using it by calling [`mvn javafx:jlink`](https://github.com/openjfx/javafx-maven-plugin#javafxjlink-options).  I don&#39;t know if it is something you want to use or not as it is different than your state goal of an executable jar.","body":"Your question talks about an &quot;executable jar&quot; in the title and in the body it talks about a &quot;shadow jar&quot;.  <code>jlink</code> does not create an executable jar, it creates a runtime image.  It doesn&#39;t matter if the maven jlink plugin is in your project, if you are not using it by calling <a href=\"https://github.com/openjfx/javafx-maven-plugin#javafxjlink-options\" rel=\"nofollow noreferrer\"><code>mvn javafx:jlink</code></a>.  I don&#39;t know if it is something you want to use or not as it is different than your state goal of an executable jar."},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691436415,"post_id":76846147,"comment_id":135488794,"body_markdown":"@jewelsea true.very true. i suppose i did comfound the two. a runtime image it is then. am not quite use to java terminology.i just know enough to build basic utilities.but yes i do run the jar from command line. How does this help. please","body":"@jewelsea true.very true. i suppose i did comfound the two. a runtime image it is then. am not quite use to java terminology.i just know enough to build basic utilities.but yes i do run the jar from command line. How does this help. please"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691436501,"post_id":76846147,"comment_id":135488814,"body_markdown":"@jewelsea here the jlink script in the build.gradle file              jlink {\n    imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platform.classifier}.zip&quot;) as RegularFile\n    options = [&#39;--strip-debug&#39;, &#39;--compress&#39;, &#39;2&#39;, &#39;--no-header-files&#39;, &#39;--no-man-pages&#39;]\n    launcher {\n        name = &#39;app&#39;\n    }\n}\n\njlinkZip {\n    group = &#39;distribution&#39;\n}","body":"@jewelsea here the jlink script in the build.gradle file              jlink {     imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platfor&zwnj;&#8203;m.classifier}.zip&quot;) as RegularFile     options = [&#39;--strip-debug&#39;, &#39;--compress&#39;, &#39;2&#39;, &#39;--no-header-files&#39;, &#39;--no-man-pages&#39;]     launcher {         name = &#39;app&#39;     } }  jlinkZip {     group = &#39;distribution&#39; }"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691436668,"post_id":76846147,"comment_id":135488854,"body_markdown":"Well, it is a different question with a different solution.  An executable jar requires different tools and packaging to build and to use it you need a pre-installed java runtime.  With bundling of the correct components, the jar can be made to be cross-platform across different systems.  A jlink image can be distributed as a zip file that is extracted and a shell script that runs the app (or packaged in an installer via jpackage), it does not require a java runtime installed on the system and is not cross-platform, it will only run on the given target platform.","body":"Well, it is a different question with a different solution.  An executable jar requires different tools and packaging to build and to use it you need a pre-installed java runtime.  With bundling of the correct components, the jar can be made to be cross-platform across different systems.  A jlink image can be distributed as a zip file that is extracted and a shell script that runs the app (or packaged in an installer via jpackage), it does not require a java runtime installed on the system and is not cross-platform, it will only run on the given target platform."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691436708,"post_id":76846147,"comment_id":135488859,"body_markdown":"I don&#39;t use gradle much, I use maven, I cannot help you with questions related to a gradle build.","body":"I don&#39;t use gradle much, I use maven, I cannot help you with questions related to a gradle build."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691438001,"post_id":76846147,"comment_id":135489033,"body_markdown":"By default, jlink does not link service implementations.  I don&#39;t know if that is your issue or not.  You could try with the [`--bind-services`](https://docs.oracle.com/en/java/javase/17/docs/specs/man/jlink.html) option and see if it makes a difference.  Binding all services will result in a large linked image, but that may not matter.  If it does fix your issue, you can either just keep the large image or bind the individual service implementations required via the `--add-modules` switch.  Also, if you use jlink, make sure you don&#39;t use `shadowJar { mergeServiceFiles() }`.","body":"By default, jlink does not link service implementations.  I don&#39;t know if that is your issue or not.  You could try with the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jlink.html\" rel=\"nofollow noreferrer\"><code>--bind-services</code></a> option and see if it makes a difference.  Binding all services will result in a large linked image, but that may not matter.  If it does fix your issue, you can either just keep the large image or bind the individual service implementations required via the <code>--add-modules</code> switch.  Also, if you use jlink, make sure you don&#39;t use <code>shadowJar { mergeServiceFiles() }</code>."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691439516,"post_id":76846147,"comment_id":135489283,"body_markdown":"Your suggestion of uploading is probably a good idea","body":"Your suggestion of uploading is probably a good idea"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691444714,"post_id":76846147,"comment_id":135490044,"body_markdown":"@MarvinNewton Please don&#39;t screenshot text, instead place it in the question as text formatted as code - it is much easier to work with that way.","body":"@MarvinNewton Please don&#39;t screenshot text, instead place it in the question as text formatted as code - it is much easier to work with that way."}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691442074,"creation_date":1691441762,"answer_id":76855122,"question_id":76846147,"body_markdown":"**Example app**\r\n\r\n * Uses jlink to link the app into an image that is zipped for deployment, rather than packaging the app as an executable jar (because this is what the asker stated they wanted to do in comments).  \r\n * Uses maven for build and packaging, as that is what I am familiar with.  \r\n * Will create an app usable only on the same platform type and architecture as the machine used to build the app.\r\n\r\nBuild requires Maven installation and JDK 20 installation.  Deployment is standalone and has no dependencies other than the OS it runs on.\r\n\r\n`src/main/java/module-info.java`\r\n\r\n    module com.example.materialicons {\r\n        requires javafx.controls;\r\n        requires org.kordamp.ikonli.javafx;\r\n        requires org.kordamp.ikonli.materialdesign2;\r\n    \r\n        exports com.example.materialicons;\r\n    }\r\n\r\n`pom.xml`\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;materialicons&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;materialicons&lt;/name&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;20.0.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ikonli-javafx&lt;/artifactId&gt;\r\n                &lt;version&gt;12.3.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ikonli-materialdesign2-pack&lt;/artifactId&gt;\r\n                &lt;version&gt;12.3.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.11.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;20&lt;/source&gt;\r\n                        &lt;target&gt;20&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;0.0.8&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;default-cli&lt;/id&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;mainClass&gt;com.example.materialicons/com.example.materialicons.IconApplication&lt;/mainClass&gt;\r\n                                &lt;launcher&gt;iconapp&lt;/launcher&gt;\r\n                                &lt;jlinkZipName&gt;iconapp&lt;/jlinkZipName&gt;\r\n                                &lt;jlinkImageName&gt;iconapp&lt;/jlinkImageName&gt;\r\n                                &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n                                &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n                                &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n`src/main/java/com/example/materialicons/IconApplication.java`\r\n\r\nMaterial Design has icon packs, named A -&gt; Z.  We just use the A icon pack here, usage of icons from other packs is similar.\r\n\r\n    package com.example.materialicons;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ScrollPane;\r\n    import javafx.scene.layout.FlowPane;\r\n    import javafx.stage.Stage;\r\n    import org.kordamp.ikonli.javafx.FontIcon;\r\n    import org.kordamp.ikonli.materialdesign2.MaterialDesignA;\r\n    \r\n    public class IconApplication extends Application {\r\n        @Override\r\n        public void start(Stage stage) {\r\n            FlowPane layout = new FlowPane();\r\n            layout.setPadding(new Insets(10));\r\n            layout.setPrefWrapLength(500);\r\n            for (MaterialDesignA iconEnumVal : MaterialDesignA.values()) {\r\n                FontIcon icon = new FontIcon(\r\n                        iconEnumVal.getDescription()\r\n                );\r\n                icon.setIconSize(40);\r\n                layout.getChildren().add(\r\n                        icon\r\n                );\r\n            }\r\n    \r\n            Scene scene = new Scene(new ScrollPane(layout), 530, 400);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\n**Build**\r\n\r\nBuild command (execute from the project root directory):\r\n\r\n    mvn clean javafx:jlink\r\n\r\nBuild output:\r\n\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] ---------------------&lt; com.example:materialicons &gt;----------------------\r\n    [INFO] Building materialicons 1.0-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ materialicons ---\r\n    [INFO] Deleting /Users/username/dev/materialicons/target\r\n    [INFO] \r\n    [INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.8:jlink (default-cli) &gt; process-classes @ materialicons &gt;&gt;&gt;\r\n    [INFO] \r\n    [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ materialicons ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] skip non existing resourceDirectory /Users/username/dev/materialicons/src/main/resources\r\n    [INFO] \r\n    [INFO] --- maven-compiler-plugin:3.11.0:compile (default-compile) @ materialicons ---\r\n    [INFO] Changes detected - recompiling the module! :source\r\n    [INFO] Compiling 2 source files with javac [debug target 20 module-path] to target/classes\r\n    [INFO] \r\n    [INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.8:jlink (default-cli) &lt; process-classes @ materialicons &lt;&lt;&lt;\r\n    [INFO] \r\n    [INFO] \r\n    [INFO] --- javafx-maven-plugin:0.0.8:jlink (default-cli) @ materialicons ---\r\n    [INFO] Building zip: /Users/username/dev/materialicons/target/iconapp.zip\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n\r\n----\r\n\r\n**Example usage**\r\n\r\nExecute from your project root directory.  Adjust the command syntax for your OS type.\r\n\r\n    mkdir tmp\r\n    cd tmp\r\n    unzip ../target/iconapp.zip \r\n    bin/iconapp\r\n\r\n----\r\n\r\n**Example output**\r\n\r\n[![icons][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EkRxl.png","title":"jar image from jlink does not show org.kordamp.materialdesign2 icons but they load when program is run in intellij","body":"<p><strong>Example app</strong></p>\n<ul>\n<li>Uses jlink to link the app into an image that is zipped for deployment, rather than packaging the app as an executable jar (because this is what the asker stated they wanted to do in comments).</li>\n<li>Uses maven for build and packaging, as that is what I am familiar with.</li>\n<li>Will create an app usable only on the same platform type and architecture as the machine used to build the app.</li>\n</ul>\n<p>Build requires Maven installation and JDK 20 installation.  Deployment is standalone and has no dependencies other than the OS it runs on.</p>\n<p><code>src/main/java/module-info.java</code></p>\n<pre><code>module com.example.materialicons {\n    requires javafx.controls;\n    requires org.kordamp.ikonli.javafx;\n    requires org.kordamp.ikonli.materialdesign2;\n\n    exports com.example.materialicons;\n}\n</code></pre>\n<p><code>pom.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;materialicons&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;materialicons&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;20.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\n            &lt;artifactId&gt;ikonli-javafx&lt;/artifactId&gt;\n            &lt;version&gt;12.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\n            &lt;artifactId&gt;ikonli-materialdesign2-pack&lt;/artifactId&gt;\n            &lt;version&gt;12.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;20&lt;/source&gt;\n                    &lt;target&gt;20&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;com.example.materialicons/com.example.materialicons.IconApplication&lt;/mainClass&gt;\n                            &lt;launcher&gt;iconapp&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;iconapp&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;iconapp&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><code>src/main/java/com/example/materialicons/IconApplication.java</code></p>\n<p>Material Design has icon packs, named A -&gt; Z.  We just use the A icon pack here, usage of icons from other packs is similar.</p>\n<pre><code>package com.example.materialicons;\n\nimport javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.layout.FlowPane;\nimport javafx.stage.Stage;\nimport org.kordamp.ikonli.javafx.FontIcon;\nimport org.kordamp.ikonli.materialdesign2.MaterialDesignA;\n\npublic class IconApplication extends Application {\n    @Override\n    public void start(Stage stage) {\n        FlowPane layout = new FlowPane();\n        layout.setPadding(new Insets(10));\n        layout.setPrefWrapLength(500);\n        for (MaterialDesignA iconEnumVal : MaterialDesignA.values()) {\n            FontIcon icon = new FontIcon(\n                    iconEnumVal.getDescription()\n            );\n            icon.setIconSize(40);\n            layout.getChildren().add(\n                    icon\n            );\n        }\n\n        Scene scene = new Scene(new ScrollPane(layout), 530, 400);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p><strong>Build</strong></p>\n<p>Build command (execute from the project root directory):</p>\n<pre><code>mvn clean javafx:jlink\n</code></pre>\n<p>Build output:</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] ---------------------&lt; com.example:materialicons &gt;----------------------\n[INFO] Building materialicons 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ materialicons ---\n[INFO] Deleting /Users/username/dev/materialicons/target\n[INFO] \n[INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.8:jlink (default-cli) &gt; process-classes @ materialicons &gt;&gt;&gt;\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ materialicons ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory /Users/username/dev/materialicons/src/main/resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.11.0:compile (default-compile) @ materialicons ---\n[INFO] Changes detected - recompiling the module! :source\n[INFO] Compiling 2 source files with javac [debug target 20 module-path] to target/classes\n[INFO] \n[INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.8:jlink (default-cli) &lt; process-classes @ materialicons &lt;&lt;&lt;\n[INFO] \n[INFO] \n[INFO] --- javafx-maven-plugin:0.0.8:jlink (default-cli) @ materialicons ---\n[INFO] Building zip: /Users/username/dev/materialicons/target/iconapp.zip\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n</code></pre>\n<hr />\n<p><strong>Example usage</strong></p>\n<p>Execute from your project root directory.  Adjust the command syntax for your OS type.</p>\n<pre><code>mkdir tmp\ncd tmp\nunzip ../target/iconapp.zip \nbin/iconapp\n</code></pre>\n<hr />\n<p><strong>Example output</strong></p>\n<p><a href=\"https://i.stack.imgur.com/EkRxl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EkRxl.png\" alt=\"icons\" /></a></p>\n"},{"tags":[],"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691446693,"creation_date":1691446693,"answer_id":76855458,"question_id":76846147,"body_markdown":"**module-info.java**  \r\n\r\n```\r\nmodule manager.school_manager {\r\n    //javafx and related deps\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires org.controlsfx.controls;\r\n    requires com.dlsc.formsfx;\r\n    requires org.jfxtras.styles.jmetro;\r\n\r\n    requires org.kordamp.ikonli.javafx;\r\n    requires org.kordamp.ikonli.materialdesign2;\r\n    requires org.kordamp.ikonli.core;\r\n\r\n    requires javafx.base;\r\n    requires java.desktop;\r\n    requires javafx.graphics;\r\n    requires javafx.web;\r\n    requires javafx.media;\r\n\r\n    // json io\r\n    requires com.google.code.gson;\r\n\r\n\r\n\r\n\r\n    //itext 7 ===&gt; pdf deps\r\n    requires itextpdf.layout;\r\n    requires itextpdf.kernel;\r\n    requires itextpdf.io;\r\n    requires itextpdf.commons;\r\n    requires itextpdf.pdfa;\r\n    requires itextpdf.barcodes;\r\n\r\n    // postgres deps\r\n    requires java.sql;\r\n    requires org.postgresql;\r\n\r\n    //excel deps\r\n    requires org.apache.poi.ooxml;\r\n\r\n    //logging deps and transitive deps\r\n    requires org.slf4j;\r\n    requires commons.math3;\r\n\r\n\r\n    opens manager.school_manager to javafx.fxml;\r\n    opens manager.school_manager.controllers to javafx.fxml;\r\n\r\n    exports manager.school_manager;\r\n}`\r\n\r\n\r\n\r\n```\r\n\r\n**build.gradle** \r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;application&#39;\r\n    id &#39;org.openjfx.javafxplugin&#39; version &#39;0.0.10&#39;\r\n    id &#39;org.beryx.jlink&#39; version &#39;2.24.1&#39;\r\n    id &#39;org.gradlex.extra-java-module-info&#39; version &#39;1.3&#39;\r\n    id &#39;java-library&#39;\r\n//    id &#39;com.github.johnrengelman.shadow&#39; version &#39;6.1.0&#39;\r\n}\r\n\r\n\r\n//shadowJar {\r\n//    mergeServiceFiles()\r\n//}\r\n//\r\n\r\n\r\ngroup &#39;manager&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\next.moduleName= &#39;manager.school_manager&#39;\r\n\r\n\r\nextraJavaModuleInfo{\r\n    failOnMissingModuleInfo.set(false)\r\n\r\n    module(&quot;org.tinylog:tinylog-api&quot;,&quot;org.tinylog.api&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;org.tinylog:tinylog-impl&quot;,&quot;org.tinylog.impl&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n\r\n    module(&quot;com.google.code.gson:gson&quot;,&quot;com.google.code.gson&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;io.github.typhon0:AnimateFX&quot;,&quot;io.github.typhon0&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;com.github.Dansoftowner:PDFViewerFX&quot;,&quot;com.github.Dansoftowner&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;org.apache.commons:commons-math3&quot;,&quot;commons.math3&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;com.zaxxer:SparseBitSet&quot;,&quot;SparseBitSet&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n\r\n\r\n\r\n    automaticModule(&quot;fxribbon.jar&quot;,&quot;com.pixelduke.fxribbon&quot;)\r\n    automaticModule(&quot;postgresql.jar&quot;,&quot;org.postgresql&quot;)\r\n\r\n    automaticModule(&quot;log4j.jar&quot;,&quot;org.log4j&quot;)\r\n    automaticModule(&quot;log4j-api.jar&quot;,&quot;org.log4j-api&quot;)\r\n    automaticModule(&quot;slf4j-api.jar&quot;,&quot;org.slf4j&quot;)\r\n\r\n    automaticModule(&quot;layout.jar&quot;,&quot;itextpdf.layout&quot;)\r\n    automaticModule(&quot;kernel.jar&quot;,&quot;itextpdf.kernel&quot;)\r\n    automaticModule(&quot;pdfa.jar&quot;,&quot;itextpdf.pdfa&quot;)\r\n    automaticModule(&quot;io.jar&quot;,&quot;itextpdf.io&quot;)\r\n    automaticModule(&quot;commons.jar&quot;,&quot;itextpdf.commons&quot;)\r\n    automaticModule(&quot;barcodes.jar&quot;,&quot;itextpdf.barcodes&quot;)\r\n    automaticModule(&quot;sign.jar&quot;,&quot;itextpdf.sign&quot;)\r\n    automaticModule(&quot;svg.jar&quot;,&quot;itextpdf.svg&quot;)\r\n\r\n\r\n    automaticModule(&quot;javafxweb.jar&quot;,&quot;javafx.web&quot;)\r\n    automaticModule(&quot;javafxmedia.jar&quot;,&quot;javafx.media&quot;)\r\n\r\n\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    maven{\r\n        url &quot;https://plugins.gradle.org/m2/&quot;\r\n    }\r\n    maven {\r\n        url &quot;https://jitpack.io&quot;\r\n    }\r\n\r\n}\r\n\r\next {\r\n    junitVersion = &#39;5.9.2&#39;\r\n}\r\n\r\n\r\ntasks.withType(JavaCompile) {\r\n    options.encoding = &#39;UTF-8&#39;\r\n}\r\n\r\napplication {\r\n    mainModule = &#39;manager.school_manager&#39;\r\n    mainClass = &#39;manager.school_manager.Main&#39;\r\n}\r\n\r\njavafx {\r\n    version = &#39;11.0.2&#39;\r\n    modules = [&#39;javafx.controls&#39;, &#39;javafx.fxml&#39;]\r\n}\r\n\r\n\r\ndependencies {\r\n//    converts non modular jars to jpms compatible\r\n    implementation(&#39;org.gradlex:extra-java-module-info:1.3&#39;)\r\n//\r\n//    implementation(&#39;com.google.firebase:firebase-admin:9.1.1&#39;)\r\n\r\n    implementation(&#39;org.controlsfx:controlsfx:11.1.2&#39;)\r\n    implementation(&#39;com.dlsc.formsfx:formsfx-core:11.6.0&#39;) {\r\n        exclude(group: &#39;org.openjfx&#39;)\r\n    }\r\n    implementation(&#39;net.synedra:validatorfx:0.4.0&#39;) {\r\n        exclude(group: &#39;org.openjfx&#39;)\r\n    }\r\n\r\n\r\n    implementation(&#39;org.jfxtras:jmetro:11.6.16&#39;)\r\n    implementation(fileTree(dir:&#39;/libs&#39;,includes:[&#39;*.jar&#39;]))\r\n//    implementation(&#39;org.openpnp:opencv:3.4.2-0&#39;)\r\n//    implementation(&#39;eu.hansolo.fx:charts:17.1.27&#39;)\r\n\r\n    implementation(&#39;org.tinylog:tinylog-api:2.6.1&#39;)\r\n    implementation(&#39;org.tinylog:tinylog-impl:2.6.1&#39;)\r\n    implementation(&#39;com.google.code.gson:gson:2.3.1&#39;)\r\n    implementation(&#39;io.github.typhon0:AnimateFX:1.2.4&#39;)\r\n\r\n    implementation(&#39;org.kordamp.ikonli:ikonli-materialdesign2-pack:12.3.1&#39;)\r\n    implementation &#39;org.kordamp.ikonli:ikonli-core:12.3.1&#39;\r\n    implementation(&#39;org.kordamp.ikonli:ikonli-javafx:12.3.1&#39;)\r\n\r\n\r\n    implementation(&#39;org.apache.poi:poi-ooxml:5.2.3&#39;){\r\n        exclude(group: &quot;javax.xml&quot;)\r\n    }\r\n    implementation(&#39;com.zaxxer:SparseBitSet:1.2&#39;)\r\n\r\n    implementation &#39;org.kordamp.jipsy:jipsy-annotations:1.2.0&#39;\r\n//    implementation &#39;org.apache.xmlgraphics:batik-transcoder:1.13&#39;\r\n\r\n\r\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\r\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\njlink {\r\n    imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platform.classifier}.zip&quot;) as RegularFile\r\n    options = [&#39;--strip-debug&#39;, &#39;--compress&#39;, &#39;2&#39;, &#39;--no-header-files&#39;, &#39;--no-man-pages&#39;]\r\n    launcher {\r\n        name = &#39;app&#39;\r\n    }\r\n}\r\n\r\njlinkZip {\r\n    group = &#39;distribution&#39;\r\n}\r\n\r\n\r\n````\r\n\r\n\r\n**Main.java**  *** a simple entry that show the icon implementation throughout the code in a simple Label ***\r\n\r\n```\r\n\r\nimport org.kordamp.ikonli.javafx.FontIcon;\r\nimport org.kordamp.ikonli.materialdesign2.*;\r\n... other imports  \r\n\r\n\r\n\r\n\r\n\r\n\r\npublic class Main extends Application {\r\n\r\n    @Override\r\n    public void start(Stage stage) throws IOException, ClassNotFoundException, SQLException {\r\n        System.out.println(&quot;LAUCHING SMPRO....&quot;);\r\n\r\n//      loading main.fxml\r\n        FXMLLoader loader = new FXMLLoader();\r\n        URL fxmlLocation = ResourceAnchor.getAppResource(&quot;views/main.fxml&quot;);\r\n        loader.setLocation(fxmlLocation);\r\n        loader.setResources(ResourceBundle.getBundle(StaticNames.RESOURCE_BUNDLE_BASENAME.getName()));\r\n        Parent root = loader.&lt;VBox&gt;load();\r\n        root.getStyleClass().add(JMetroStyleClass.BACKGROUND);\r\n\r\n//        get controller instance\r\n        EntryController entryController  = loader.getController();\r\n        entryController.EntryStage.set(stage);\r\n\r\n\r\n        Scene scene = new Scene(new Button(&quot;Click me&quot;,new FontIcon(MaterialDesignA.ACCOUNT_CIRCLE)));\r\n\r\n\r\n\r\n        stage.setTitle(&quot;Sample title&quot;);\r\n        stage.setScene(scene);\r\n        stage.setResizable(false);\r\n        stage.getIcons().add(new Image(ResourceAnchor.getResourceStream(&quot;images/logo.png&quot;)));\r\n\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n```\r\n","title":"jar image from jlink does not show org.kordamp.materialdesign2 icons but they load when program is run in intellij","body":"<p><strong>module-info.java</strong></p>\n<pre><code>module manager.school_manager {\n    //javafx and related deps\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires org.controlsfx.controls;\n    requires com.dlsc.formsfx;\n    requires org.jfxtras.styles.jmetro;\n\n    requires org.kordamp.ikonli.javafx;\n    requires org.kordamp.ikonli.materialdesign2;\n    requires org.kordamp.ikonli.core;\n\n    requires javafx.base;\n    requires java.desktop;\n    requires javafx.graphics;\n    requires javafx.web;\n    requires javafx.media;\n\n    // json io\n    requires com.google.code.gson;\n\n\n\n\n    //itext 7 ===&gt; pdf deps\n    requires itextpdf.layout;\n    requires itextpdf.kernel;\n    requires itextpdf.io;\n    requires itextpdf.commons;\n    requires itextpdf.pdfa;\n    requires itextpdf.barcodes;\n\n    // postgres deps\n    requires java.sql;\n    requires org.postgresql;\n\n    //excel deps\n    requires org.apache.poi.ooxml;\n\n    //logging deps and transitive deps\n    requires org.slf4j;\n    requires commons.math3;\n\n\n    opens manager.school_manager to javafx.fxml;\n    opens manager.school_manager.controllers to javafx.fxml;\n\n    exports manager.school_manager;\n}`\n\n\n\n</code></pre>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.10'\n    id 'org.beryx.jlink' version '2.24.1'\n    id 'org.gradlex.extra-java-module-info' version '1.3'\n    id 'java-library'\n//    id 'com.github.johnrengelman.shadow' version '6.1.0'\n}\n\n\n//shadowJar {\n//    mergeServiceFiles()\n//}\n//\n\n\ngroup 'manager'\nversion '1.0-SNAPSHOT'\n\next.moduleName= 'manager.school_manager'\n\n\nextraJavaModuleInfo{\n    failOnMissingModuleInfo.set(false)\n\n    module(&quot;org.tinylog:tinylog-api&quot;,&quot;org.tinylog.api&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;org.tinylog:tinylog-impl&quot;,&quot;org.tinylog.impl&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n\n    module(&quot;com.google.code.gson:gson&quot;,&quot;com.google.code.gson&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;io.github.typhon0:AnimateFX&quot;,&quot;io.github.typhon0&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;com.github.Dansoftowner:PDFViewerFX&quot;,&quot;com.github.Dansoftowner&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;org.apache.commons:commons-math3&quot;,&quot;commons.math3&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;com.zaxxer:SparseBitSet&quot;,&quot;SparseBitSet&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n\n\n\n    automaticModule(&quot;fxribbon.jar&quot;,&quot;com.pixelduke.fxribbon&quot;)\n    automaticModule(&quot;postgresql.jar&quot;,&quot;org.postgresql&quot;)\n\n    automaticModule(&quot;log4j.jar&quot;,&quot;org.log4j&quot;)\n    automaticModule(&quot;log4j-api.jar&quot;,&quot;org.log4j-api&quot;)\n    automaticModule(&quot;slf4j-api.jar&quot;,&quot;org.slf4j&quot;)\n\n    automaticModule(&quot;layout.jar&quot;,&quot;itextpdf.layout&quot;)\n    automaticModule(&quot;kernel.jar&quot;,&quot;itextpdf.kernel&quot;)\n    automaticModule(&quot;pdfa.jar&quot;,&quot;itextpdf.pdfa&quot;)\n    automaticModule(&quot;io.jar&quot;,&quot;itextpdf.io&quot;)\n    automaticModule(&quot;commons.jar&quot;,&quot;itextpdf.commons&quot;)\n    automaticModule(&quot;barcodes.jar&quot;,&quot;itextpdf.barcodes&quot;)\n    automaticModule(&quot;sign.jar&quot;,&quot;itextpdf.sign&quot;)\n    automaticModule(&quot;svg.jar&quot;,&quot;itextpdf.svg&quot;)\n\n\n    automaticModule(&quot;javafxweb.jar&quot;,&quot;javafx.web&quot;)\n    automaticModule(&quot;javafxmedia.jar&quot;,&quot;javafx.media&quot;)\n\n\n}\n\nrepositories {\n    mavenCentral()\n    maven{\n        url &quot;https://plugins.gradle.org/m2/&quot;\n    }\n    maven {\n        url &quot;https://jitpack.io&quot;\n    }\n\n}\n\next {\n    junitVersion = '5.9.2'\n}\n\n\ntasks.withType(JavaCompile) {\n    options.encoding = 'UTF-8'\n}\n\napplication {\n    mainModule = 'manager.school_manager'\n    mainClass = 'manager.school_manager.Main'\n}\n\njavafx {\n    version = '11.0.2'\n    modules = ['javafx.controls', 'javafx.fxml']\n}\n\n\ndependencies {\n//    converts non modular jars to jpms compatible\n    implementation('org.gradlex:extra-java-module-info:1.3')\n//\n//    implementation('com.google.firebase:firebase-admin:9.1.1')\n\n    implementation('org.controlsfx:controlsfx:11.1.2')\n    implementation('com.dlsc.formsfx:formsfx-core:11.6.0') {\n        exclude(group: 'org.openjfx')\n    }\n    implementation('net.synedra:validatorfx:0.4.0') {\n        exclude(group: 'org.openjfx')\n    }\n\n\n    implementation('org.jfxtras:jmetro:11.6.16')\n    implementation(fileTree(dir:'/libs',includes:['*.jar']))\n//    implementation('org.openpnp:opencv:3.4.2-0')\n//    implementation('eu.hansolo.fx:charts:17.1.27')\n\n    implementation('org.tinylog:tinylog-api:2.6.1')\n    implementation('org.tinylog:tinylog-impl:2.6.1')\n    implementation('com.google.code.gson:gson:2.3.1')\n    implementation('io.github.typhon0:AnimateFX:1.2.4')\n\n    implementation('org.kordamp.ikonli:ikonli-materialdesign2-pack:12.3.1')\n    implementation 'org.kordamp.ikonli:ikonli-core:12.3.1'\n    implementation('org.kordamp.ikonli:ikonli-javafx:12.3.1')\n\n\n    implementation('org.apache.poi:poi-ooxml:5.2.3'){\n        exclude(group: &quot;javax.xml&quot;)\n    }\n    implementation('com.zaxxer:SparseBitSet:1.2')\n\n    implementation 'org.kordamp.jipsy:jipsy-annotations:1.2.0'\n//    implementation 'org.apache.xmlgraphics:batik-transcoder:1.13'\n\n\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\n}\n\ntest {\n    useJUnitPlatform()\n}\n\njlink {\n    imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platform.classifier}.zip&quot;) as RegularFile\n    options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']\n    launcher {\n        name = 'app'\n    }\n}\n\njlinkZip {\n    group = 'distribution'\n}\n\n\n</code></pre>\n<p><strong>Main.java</strong>  *** a simple entry that show the icon implementation throughout the code in a simple Label ***</p>\n<pre><code>\nimport org.kordamp.ikonli.javafx.FontIcon;\nimport org.kordamp.ikonli.materialdesign2.*;\n... other imports  \n\n\n\n\n\n\npublic class Main extends Application {\n\n    @Override\n    public void start(Stage stage) throws IOException, ClassNotFoundException, SQLException {\n        System.out.println(&quot;LAUCHING SMPRO....&quot;);\n\n//      loading main.fxml\n        FXMLLoader loader = new FXMLLoader();\n        URL fxmlLocation = ResourceAnchor.getAppResource(&quot;views/main.fxml&quot;);\n        loader.setLocation(fxmlLocation);\n        loader.setResources(ResourceBundle.getBundle(StaticNames.RESOURCE_BUNDLE_BASENAME.getName()));\n        Parent root = loader.&lt;VBox&gt;load();\n        root.getStyleClass().add(JMetroStyleClass.BACKGROUND);\n\n//        get controller instance\n        EntryController entryController  = loader.getController();\n        entryController.EntryStage.set(stage);\n\n\n        Scene scene = new Scene(new Button(&quot;Click me&quot;,new FontIcon(MaterialDesignA.ACCOUNT_CIRCLE)));\n\n\n\n        stage.setTitle(&quot;Sample title&quot;);\n        stage.setScene(scene);\n        stage.setResizable(false);\n        stage.getIcons().add(new Image(ResourceAnchor.getResourceStream(&quot;images/logo.png&quot;)));\n\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"comment_count":25,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691542169,"creation_date":1691329079,"question_id":76846147,"body_markdown":"# javafx applications not showing org.kordamp.materialdesign2 icons\r\n\r\nI recently completed a school management program with JavaFX 18 which runs properly using the normal IntelliJ run configurations but fails to load ALL icons from org.kordamp.materialdesign2. I have scanned the entire web and come across a few answers regarding service files. I have all three required packages in my module-info file **org.kormap.ikoli.core,org.kordamp.javafx and org.kordamp.materialdesign2**\r\n\r\nWhen the jar is run, it shows messages like this:\r\n\r\n```none\r\nException in thread &quot;JavaFX Application Thread&quot; java.lang.UnsupportedOperationException: Cannot resolve &#39;mdi2o-office-building&#39;\r\n\tat org.kordamp.ikonli.AbstractIkonResolver.resolve(AbstractIkonResolver.java:61)\r\n\tat org.kordamp.ikonli.javafx.IkonResolver.resolve(IkonResolver.java:73)\r\n\tat org.kordamp.ikonli.javafx.FontIcon.lambda$new$2(FontIcon.java:76)\r\n\tat com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:360)\r\n\tat com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:80)\r\n\tat javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:106)\r\n\tat javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:113)\r\n\tat javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:147)\r\n\tat javafx.css.StyleableObjectProperty.set(StyleableObjectProperty.java:82)\r\n\tat org.kordamp.ikonli.javafx.FontIcon.setIconCode(FontIcon.java:231)\r\n\tat org.kordamp.ikonli.javafx.FontIcon.&lt;init&gt;(FontIcon.java:97)\r\n\tat manager.school_manager.EntryController.initialize(EntryController.java:115)\r\n\tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2573)\r\n\tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2466)\r\n\tat javafx.fxml.FXMLLoader.load(FXMLLoader.java:2435)\r\n\tat manager.school_manager.Entry.start(Entry.java:56)\r\n\tat com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:455)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)\r\n\tat com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n\tat com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589)\r\n```\r\n\r\n[**error messages on running jar**](https://i.stack.imgur.com/3tGzU.png) | \r\n[**Program without icons on running jar**](https://i.stack.imgur.com/FHWIU.png) | \r\n[**Program showing icons when run in intellij**](https://i.stack.imgur.com/7G5AF.png)\r\n\r\n[module-info.java with all three co-dependencies](https://i.stack.imgur.com/HT7v7.png)\r\n\r\n\r\n\r\n# **Tried using the shadow jar plugin as stated in it&#39;s documentation**\r\n[**build.gradle file showing use of shadow jar plugin**](https://i.stack.imgur.com/TxAaq.png)\r\n\r\nAlso opened the jar file with winrar and checked the Manifest/Manifest.MF/services and here is what I found:\r\n\r\n[it shows two files related to ikonli. Am not quite versed to services in general so I can&#39;t tell if these would suffice.*** I would gladly accept any help that would help me resolve this problem***](https://i.stack.imgur.com/f2Wi9.png)\r\n","title":"jar image from jlink does not show org.kordamp.materialdesign2 icons but they load when program is run in intellij","body":"<h1>javafx applications not showing org.kordamp.materialdesign2 icons</h1>\n<p>I recently completed a school management program with JavaFX 18 which runs properly using the normal IntelliJ run configurations but fails to load ALL icons from org.kordamp.materialdesign2. I have scanned the entire web and come across a few answers regarding service files. I have all three required packages in my module-info file <strong>org.kormap.ikoli.core,org.kordamp.javafx and org.kordamp.materialdesign2</strong></p>\n<p>When the jar is run, it shows messages like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;JavaFX Application Thread&quot; java.lang.UnsupportedOperationException: Cannot resolve 'mdi2o-office-building'\n    at org.kordamp.ikonli.AbstractIkonResolver.resolve(AbstractIkonResolver.java:61)\n    at org.kordamp.ikonli.javafx.IkonResolver.resolve(IkonResolver.java:73)\n    at org.kordamp.ikonli.javafx.FontIcon.lambda$new$2(FontIcon.java:76)\n    at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:360)\n    at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:80)\n    at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:106)\n    at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:113)\n    at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:147)\n    at javafx.css.StyleableObjectProperty.set(StyleableObjectProperty.java:82)\n    at org.kordamp.ikonli.javafx.FontIcon.setIconCode(FontIcon.java:231)\n    at org.kordamp.ikonli.javafx.FontIcon.&lt;init&gt;(FontIcon.java:97)\n    at manager.school_manager.EntryController.initialize(EntryController.java:115)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2573)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2466)\n    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2435)\n    at manager.school_manager.Entry.start(Entry.java:56)\n    at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\n    at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:455)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/3tGzU.png\" rel=\"nofollow noreferrer\"><strong>error messages on running jar</strong></a> |\n<a href=\"https://i.stack.imgur.com/FHWIU.png\" rel=\"nofollow noreferrer\"><strong>Program without icons on running jar</strong></a> |\n<a href=\"https://i.stack.imgur.com/7G5AF.png\" rel=\"nofollow noreferrer\"><strong>Program showing icons when run in intellij</strong></a></p>\n<p><a href=\"https://i.stack.imgur.com/HT7v7.png\" rel=\"nofollow noreferrer\">module-info.java with all three co-dependencies</a></p>\n<h1><strong>Tried using the shadow jar plugin as stated in it's documentation</strong></h1>\n<p><a href=\"https://i.stack.imgur.com/TxAaq.png\" rel=\"nofollow noreferrer\"><strong>build.gradle file showing use of shadow jar plugin</strong></a></p>\n<p>Also opened the jar file with winrar and checked the Manifest/Manifest.MF/services and here is what I found:</p>\n<p><a href=\"https://i.stack.imgur.com/f2Wi9.png\" rel=\"nofollow noreferrer\">it shows two files related to ikonli. Am not quite versed to services in general so I can't tell if these would suffice.*** I would gladly accept any help that would help me resolve this problem***</a></p>\n"},{"tags":["java","java-11"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1691385968,"post_id":76848949,"comment_id":135479003,"body_markdown":"That first command looks odd -- on OS X `java` preserves the case of command line arguments when reporting errors.","body":"That first command looks odd -- on OS X <code>java</code> preserves the case of command line arguments when reporting errors."},{"owner":{"account_id":16025918,"reputation":4676,"user_id":11566161,"display_name":"Shri Hari L"},"score":0,"creation_date":1691385978,"post_id":76848949,"comment_id":135479004,"body_markdown":"You should give a Java / Class file along with the memory option.","body":"You should give a Java / Class file along with the memory option."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691388617,"post_id":76848949,"comment_id":135479288,"body_markdown":"@ShriHariL That&#39;s not the issue here.","body":"@ShriHariL That&#39;s not the issue here."},{"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"score":0,"creation_date":1691388967,"post_id":76848949,"comment_id":135479325,"body_markdown":"After testing in many ways, the above error occurs when running in cmd or powershell. Strangely, however, there is no problem with git bash. Is there anything else that needs to be changed?","body":"After testing in many ways, the above error occurs when running in cmd or powershell. Strangely, however, there is no problem with git bash. Is there anything else that needs to be changed?"},{"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"score":0,"creation_date":1691389276,"post_id":76848949,"comment_id":135479374,"body_markdown":"@tgdavies That was a question for me, too. I definitely put in -Xmx64m that starts with a capital letter, but it actually changed to a lowercase letter. -Dorg.gradle.appname=gradlew is also lowercase, not just -Xmx. Is there a case setting for cmd or powershell?","body":"@tgdavies That was a question for me, too. I definitely put in -Xmx64m that starts with a capital letter, but it actually changed to a lowercase letter. -Dorg.gradle.appname=gradlew is also lowercase, not just -Xmx. Is there a case setting for cmd or powershell?"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1691390569,"post_id":76848949,"comment_id":135479527,"body_markdown":"So it&#39;s your shell that&#39;s doing the conversion to lowercase?","body":"So it&#39;s your shell that&#39;s doing the conversion to lowercase?"},{"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"score":0,"creation_date":1691391185,"post_id":76848949,"comment_id":135479600,"body_markdown":"@MauricePerry Yes. If I run java.exe of jdk-11 on my cmd or powershell, it will be lowercase. Running &#39;java.exe -Xmx64m&#39; in gitbash under the same conditions as cmd (go to bin folder with jdk11 Java) will work. And if you run &#39;java.exe -xmx64m&#39; under the same conditions on git bash, the error &#39;Uncognized option: -xmx64m&#39; attached above will be the same. So I think forced conversion from cmd or powershell to lowercase is causing problems.","body":"@MauricePerry Yes. If I run java.exe of jdk-11 on my cmd or powershell, it will be lowercase. Running &#39;java.exe -Xmx64m&#39; in gitbash under the same conditions as cmd (go to bin folder with jdk11 Java) will work. And if you run &#39;java.exe -xmx64m&#39; under the same conditions on git bash, the error &#39;Uncognized option: -xmx64m&#39; attached above will be the same. So I think forced conversion from cmd or powershell to lowercase is causing problems."}],"answers":[{"tags":[],"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691540488,"creation_date":1691540488,"answer_id":76863843,"question_id":76848949,"body_markdown":"I spend 3 weeks and find a ridiculous solution and leave my own answers.\r\n\r\nThis problem was caused by another program. At one point, I had a vaccine program that I didn&#39;t install, and it was included as a launch app. As soon as I turned on the computer, I ran the command in cmd, and I was able to see that it was working properly. So I decided that there was a conflict in the startup program, so I tested it one by one and found the problem.(In my case, it was a program called Trojancut.)\r\n\r\nIf you&#39;re having a similar problem with me, or if you&#39;re having problems with Java itself, disable all of the startup programs and test them as soon as you turn on your computer, like me.","title":"java 11 Unrecognized option: -xmx64m (Lowercase cmd and power shell options)","body":"<p>I spend 3 weeks and find a ridiculous solution and leave my own answers.</p>\n<p>This problem was caused by another program. At one point, I had a vaccine program that I didn't install, and it was included as a launch app. As soon as I turned on the computer, I ran the command in cmd, and I was able to see that it was working properly. So I decided that there was a conflict in the startup program, so I tested it one by one and found the problem.(In my case, it was a program called Trojancut.)</p>\n<p>If you're having a similar problem with me, or if you're having problems with Java itself, disable all of the startup programs and test them as soon as you turn on your computer, like me.</p>\n"}],"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691540488,"creation_date":1691385342,"question_id":76848949,"body_markdown":"I looked up a combination of search terms and found that for a few people, java&#39;s option was converted to lowercase, just like me, in cmd or powershell, and sometimes it didn&#39;t work. The link below is the same case as mine, but I don&#39;t work on the powershell, unlike this case. Is there any way to solve this?\r\n\r\nhttps://www.inflearn.com/questions/920520/%EC%9C%88%EB%8F%84%EC%9A%B0-%EC%82%AC%EC%9A%A9%EC%9E%90%EB%B6%84%EB%93%A4-cmd%EC%97%90%EC%84%9C-%ED%86%B0%EC%BA%A3-%EC%98%A4%EB%A5%98-%ED%98%B9%EC%9D%80-%EB%B9%8C%EB%93%9C-%EC%98%A4%EB%A5%98-%EB%82%A0%EB%95%8C\r\n\r\n\r\nI found out that there was a problem with java while using Android Studio.\r\n\r\nIf you go directly to the bin folder under jdk-11 in cmd and run java.exe to use jdk 11, the following message occurs. If you run the run button on the Android studio, Gradle will run normally, but it will not run on the terminal.\r\n\r\nAfter testing in many ways, the above error occurs when running in cmd or powershell. Strangely, however, there is no problem with git bash.\r\n\r\n```\r\nC:\\Program Files\\Java\\jdk-11\\bin&gt;java.exe -Xmx64m\r\nUnrecognized option: -xmx64m\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n```\r\n```\r\njava version &quot;11.0.19&quot; 2023-04-18 LTS\r\nJava(TM) SE Runtime Environment 18.9 (build 11.0.19+9-LTS-224)\r\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.19+9-LTS-224, mixed mode)\r\n```\r\n\r\n[enter image description here](https://i.stack.imgur.com/hcThY.png)\r\n\r\n\r\nBut I ran it directly on cmd so I could see that for jdk17 in Android studio or for jdk 1.7 from a third party, the -Xmx64 option is fine.\r\n[enter image description here](https://i.stack.imgur.com/fW1n0.png)\r\n[enter image description here](https://i.stack.imgur.com/QlkBi.png)\r\n```\r\nopenjdk version &quot;17.0.6&quot; 2023-01-17\r\nOpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\nOpenJDK 64-Bit Server VM (build 17.0.6+0-b2043.56-10027231, mixed mode)\r\n```\r\n```\r\njava version &quot;1.7.0_80&quot;\r\nJava(TM) SE Runtime Environment (build 1.7.0_80-b15)\r\nJava HotSpot(TM) Client VM (build 24.80-b11, mixed mode)\r\n```\r\n\r\nIs the -Xmx64m option not available on jdk 11 by any chance?\r\n\r\nI deleted all java and installed only 11.","title":"java 11 Unrecognized option: -xmx64m (Lowercase cmd and power shell options)","body":"<p>I looked up a combination of search terms and found that for a few people, java's option was converted to lowercase, just like me, in cmd or powershell, and sometimes it didn't work. The link below is the same case as mine, but I don't work on the powershell, unlike this case. Is there any way to solve this?</p>\n<p><a href=\"https://www.inflearn.com/questions/920520/%EC%9C%88%EB%8F%84%EC%9A%B0-%EC%82%AC%EC%9A%A9%EC%9E%90%EB%B6%84%EB%93%A4-cmd%EC%97%90%EC%84%9C-%ED%86%B0%EC%BA%A3-%EC%98%A4%EB%A5%98-%ED%98%B9%EC%9D%80-%EB%B9%8C%EB%93%9C-%EC%98%A4%EB%A5%98-%EB%82%A0%EB%95%8C\" rel=\"nofollow noreferrer\">https://www.inflearn.com/questions/920520/%EC%9C%88%EB%8F%84%EC%9A%B0-%EC%82%AC%EC%9A%A9%EC%9E%90%EB%B6%84%EB%93%A4-cmd%EC%97%90%EC%84%9C-%ED%86%B0%EC%BA%A3-%EC%98%A4%EB%A5%98-%ED%98%B9%EC%9D%80-%EB%B9%8C%EB%93%9C-%EC%98%A4%EB%A5%98-%EB%82%A0%EB%95%8C</a></p>\n<p>I found out that there was a problem with java while using Android Studio.</p>\n<p>If you go directly to the bin folder under jdk-11 in cmd and run java.exe to use jdk 11, the following message occurs. If you run the run button on the Android studio, Gradle will run normally, but it will not run on the terminal.</p>\n<p>After testing in many ways, the above error occurs when running in cmd or powershell. Strangely, however, there is no problem with git bash.</p>\n<pre><code>C:\\Program Files\\Java\\jdk-11\\bin&gt;java.exe -Xmx64m\nUnrecognized option: -xmx64m\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n<pre><code>java version &quot;11.0.19&quot; 2023-04-18 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.19+9-LTS-224)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.19+9-LTS-224, mixed mode)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/hcThY.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>But I ran it directly on cmd so I could see that for jdk17 in Android studio or for jdk 1.7 from a third party, the -Xmx64 option is fine.\n<a href=\"https://i.stack.imgur.com/fW1n0.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/QlkBi.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>openjdk version &quot;17.0.6&quot; 2023-01-17\nOpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\nOpenJDK 64-Bit Server VM (build 17.0.6+0-b2043.56-10027231, mixed mode)\n</code></pre>\n<pre><code>java version &quot;1.7.0_80&quot;\nJava(TM) SE Runtime Environment (build 1.7.0_80-b15)\nJava HotSpot(TM) Client VM (build 24.80-b11, mixed mode)\n</code></pre>\n<p>Is the -Xmx64m option not available on jdk 11 by any chance?</p>\n<p>I deleted all java and installed only 11.</p>\n"},{"tags":["java","android","java-native-interface"],"comments":[{"owner":{"account_id":3935570,"reputation":1424,"user_id":3252091,"display_name":"Nicklas Jensen"},"score":0,"creation_date":1426292278,"post_id":29043872,"comment_id":46327734,"body_markdown":"Could you please provide an example of what kind of data structure you would like to return, that will make it easier to answer your question.","body":"Could you please provide an example of what kind of data structure you would like to return, that will make it easier to answer your question."},{"owner":{"account_id":5295543,"reputation":1976,"user_id":4226806,"accept_rate":35,"display_name":"rubmz"},"score":0,"creation_date":1426295158,"post_id":29043872,"comment_id":46328347,"body_markdown":"I would like to return 2 floats","body":"I would like to return 2 floats"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691539725,"post_id":29043872,"comment_id":135504598,"body_markdown":"So `return new float[]{float1, float2};`.","body":"So <code>return new float[]{float1, float2};</code>."}],"answers":[{"tags":[],"owner":{"account_id":5866004,"reputation":16374,"user_id":4619958,"accept_rate":83,"display_name":"ch271828n"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1426292923,"creation_date":1426291615,"answer_id":29043906,"question_id":29043872,"body_markdown":"You can use a *wrapper*. Then return the wrapper. First create a class with some inner variables which are the multiple ones you want to return. Then use this class as the return type.","title":"android jni return multiple variables","body":"<p>You can use a <em>wrapper</em>. Then return the wrapper. First create a class with some inner variables which are the multiple ones you want to return. Then use this class as the return type.</p>\n"},{"tags":[],"owner":{"account_id":3935570,"reputation":1424,"user_id":3252091,"display_name":"Nicklas Jensen"},"down_vote_count":0,"up_vote_count":43,"is_accepted":true,"score":43,"last_activity_date":1466451684,"creation_date":1426295143,"answer_id":29044319,"question_id":29043872,"body_markdown":"I can come up with three different ways to do it.\r\n\r\n**Callback**\r\n\r\nCall a Java method from your JNI code that takes multiple parameters, set a variable somewhere in your Java code, that you can retrieve when returning from the method.\r\n\r\n    JNIEXPORT void JNICALL Java_my_package_name_JNIReturnExample_returnWithJavaCallback(JNIEnv *env, jobject javaThis, jfloat param1, jfloat param2)\r\n    {\r\n    \t// Get the class of the current calling object\r\n    \tjclass clazz = (*env)-&gt;GetObjectClass(env, javaThis);\r\n    \r\n    \t// Get the method id of the instance method: void javaCallback(float, float) in my.package.name.JNIReturnExample\r\n    \tjmethodID callback = (*env)-&gt;GetMethodID(env, clazz, &quot;javaCallback&quot;, &quot;(FF)V&quot;);\r\n    \r\n    \t// Calls my.package.name.JNIReturnExample#javaCallback(float, float);\r\n    \t(*env)-&gt;CallVoidMethod(env, javaThis, callback, param1, param2);\r\n    }\r\n\r\n----------\r\n\r\n**Return a new Java object**\r\n\r\nInstantiate a Java Object (my.package.name.JNIReturnExample) in JNI, and return it to Java.\r\n\r\n    JNIEXPORT jobject JNICALL Java_my_package_name_JNIReturnExample_returnObjectValue(JNIEnv *env, jobject javaThis, jfloat param1, jfloat param2)\r\n    {\r\n    \t// Get the class we wish to return an instance of\r\n    \tjclass clazz = (*env)-&gt;FindClass(env, &quot;my/package/name/JNIReturnObject&quot;);\r\n    \r\n    \t// Get the method id of an empty constructor in clazz\r\n    \tjmethodID constructor = (*env)-&gt;GetMethodID(env, clazz, &quot;&lt;init&gt;&quot;, &quot;()V&quot;);\r\n    \r\n    \t// Create an instance of clazz\r\n    \tjobject obj = (*env)-&gt;NewObject(env, clazz, constructor);\r\n    \r\n    \t// Get Field references\r\n    \tjfieldID param1Field = (*env)-&gt;GetFieldID(env, clazz, &quot;param1&quot;, &quot;F&quot;);\r\n    \tjfieldID param2Field = (*env)-&gt;GetFieldID(env, clazz, &quot;param2&quot;, &quot;F&quot;);\r\n    \r\n    \t// Set fields for object\r\n    \t(*env)-&gt;SetFloatField(env, obj, param1Field, param1);\r\n    \t(*env)-&gt;SetFloatField(env, obj, param2Field, param2);\r\n    \r\n    \t// return object\r\n    \treturn obj;\r\n    }\r\n\r\n----------\r\n\r\n**Pass a Java object as a parameter, and set its fields**\r\n\r\nCreate a new instance of a Java Object in your Java code, and pass that object as a parameter to your JNI function.\r\n\r\n    JNIEXPORT void JNICALL Java_my_package_name_JNIReturnExample_setObjectFields(JNIEnv *env, jobject javaThis, jobject obj, jfloat param1, jfloat param2)\r\n    {\r\n    \t// Get the class of the input object\r\n    \tjclass clazz = (*env)-&gt;GetObjectClass(env, obj);\r\n    \r\n    \t// Get Field references\r\n    \tjfieldID param1Field = (*env)-&gt;GetFieldID(env, clazz, &quot;param1&quot;, &quot;F&quot;);\r\n    \tjfieldID param2Field = (*env)-&gt;GetFieldID(env, clazz, &quot;param2&quot;, &quot;F&quot;);\r\n    \r\n    \t// Set fields for object\r\n    \t(*env)-&gt;SetFloatField(env, obj, param1Field, param1);\r\n    \t(*env)-&gt;SetFloatField(env, obj, param2Field, param2);\r\n    }\r\n\r\n----------\r\n\r\nPlease note that whichever method you decide to use, you should cache the various JNI types `jclass, jmethodID, jfieldID`, because JNI lookup operations are slow, and only really need to be performed once.\r\n\r\n----------\r\n**Caching**\r\n\r\nTo cache the JNI references in the Callback method, and call them using the method:\r\n\r\n    static jclass myCallbackClass;\r\n    static jmethodID myCallbackMethod;\r\n    \r\n    /**\r\n     * Call this method in JNI_OnLoad\r\n     */ \r\n    void CacheCallback()\r\n    {\r\n    \t// Get a reference to the Callback class\r\n    \tjclass clazz = (*env)-&gt;FindClass(env, &quot;my/package/name/JNIReturnExample&quot;);\r\n    \r\n    \t// Store a global reference, since the local one will be freed when returning from the function.\r\n    \tmyCallbackClass = (*env)-&gt;NewGlobalRef(env, clazz);\r\n    \r\n    \t// Get a reference to the static callback method\r\n    \tjmethodID callback = (*env)-&gt;GetStaticMethodID(env, myCallbackClass, &quot;jniCallback&quot;, &quot;(II)V&quot;);\r\n    \r\n    \t// jmethodID doesn&#39;t need a NewGlobalRef call\r\n    \tmyCallbackMethod = callback;\r\n    }\r\n    \r\n    /**\r\n     * Call this method in JNI_OnUnload\r\n     */\r\n    void ReleaseCallback()\r\n    {\r\n    \t(*env)-&gt;DeleteGlobalRef(env, myCallbackClass);\r\n        myCallbackClass = NULL;\r\n\r\n        // jmethodIDs are safe to keep without an explicit global reference, for this reason, we don&#39;t need to delete the reference either.\r\n        myCallbackMethod = NULL;\r\n    }","title":"android jni return multiple variables","body":"<p>I can come up with three different ways to do it.</p>\n\n<p><strong>Callback</strong></p>\n\n<p>Call a Java method from your JNI code that takes multiple parameters, set a variable somewhere in your Java code, that you can retrieve when returning from the method.</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_my_package_name_JNIReturnExample_returnWithJavaCallback(JNIEnv *env, jobject javaThis, jfloat param1, jfloat param2)\n{\n    // Get the class of the current calling object\n    jclass clazz = (*env)-&gt;GetObjectClass(env, javaThis);\n\n    // Get the method id of the instance method: void javaCallback(float, float) in my.package.name.JNIReturnExample\n    jmethodID callback = (*env)-&gt;GetMethodID(env, clazz, \"javaCallback\", \"(FF)V\");\n\n    // Calls my.package.name.JNIReturnExample#javaCallback(float, float);\n    (*env)-&gt;CallVoidMethod(env, javaThis, callback, param1, param2);\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Return a new Java object</strong></p>\n\n<p>Instantiate a Java Object (my.package.name.JNIReturnExample) in JNI, and return it to Java.</p>\n\n<pre><code>JNIEXPORT jobject JNICALL Java_my_package_name_JNIReturnExample_returnObjectValue(JNIEnv *env, jobject javaThis, jfloat param1, jfloat param2)\n{\n    // Get the class we wish to return an instance of\n    jclass clazz = (*env)-&gt;FindClass(env, \"my/package/name/JNIReturnObject\");\n\n    // Get the method id of an empty constructor in clazz\n    jmethodID constructor = (*env)-&gt;GetMethodID(env, clazz, \"&lt;init&gt;\", \"()V\");\n\n    // Create an instance of clazz\n    jobject obj = (*env)-&gt;NewObject(env, clazz, constructor);\n\n    // Get Field references\n    jfieldID param1Field = (*env)-&gt;GetFieldID(env, clazz, \"param1\", \"F\");\n    jfieldID param2Field = (*env)-&gt;GetFieldID(env, clazz, \"param2\", \"F\");\n\n    // Set fields for object\n    (*env)-&gt;SetFloatField(env, obj, param1Field, param1);\n    (*env)-&gt;SetFloatField(env, obj, param2Field, param2);\n\n    // return object\n    return obj;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Pass a Java object as a parameter, and set its fields</strong></p>\n\n<p>Create a new instance of a Java Object in your Java code, and pass that object as a parameter to your JNI function.</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_my_package_name_JNIReturnExample_setObjectFields(JNIEnv *env, jobject javaThis, jobject obj, jfloat param1, jfloat param2)\n{\n    // Get the class of the input object\n    jclass clazz = (*env)-&gt;GetObjectClass(env, obj);\n\n    // Get Field references\n    jfieldID param1Field = (*env)-&gt;GetFieldID(env, clazz, \"param1\", \"F\");\n    jfieldID param2Field = (*env)-&gt;GetFieldID(env, clazz, \"param2\", \"F\");\n\n    // Set fields for object\n    (*env)-&gt;SetFloatField(env, obj, param1Field, param1);\n    (*env)-&gt;SetFloatField(env, obj, param2Field, param2);\n}\n</code></pre>\n\n<hr>\n\n<p>Please note that whichever method you decide to use, you should cache the various JNI types <code>jclass, jmethodID, jfieldID</code>, because JNI lookup operations are slow, and only really need to be performed once.</p>\n\n<hr>\n\n<p><strong>Caching</strong></p>\n\n<p>To cache the JNI references in the Callback method, and call them using the method:</p>\n\n<pre><code>static jclass myCallbackClass;\nstatic jmethodID myCallbackMethod;\n\n/**\n * Call this method in JNI_OnLoad\n */ \nvoid CacheCallback()\n{\n    // Get a reference to the Callback class\n    jclass clazz = (*env)-&gt;FindClass(env, \"my/package/name/JNIReturnExample\");\n\n    // Store a global reference, since the local one will be freed when returning from the function.\n    myCallbackClass = (*env)-&gt;NewGlobalRef(env, clazz);\n\n    // Get a reference to the static callback method\n    jmethodID callback = (*env)-&gt;GetStaticMethodID(env, myCallbackClass, \"jniCallback\", \"(II)V\");\n\n    // jmethodID doesn't need a NewGlobalRef call\n    myCallbackMethod = callback;\n}\n\n/**\n * Call this method in JNI_OnUnload\n */\nvoid ReleaseCallback()\n{\n    (*env)-&gt;DeleteGlobalRef(env, myCallbackClass);\n    myCallbackClass = NULL;\n\n    // jmethodIDs are safe to keep without an explicit global reference, for this reason, we don't need to delete the reference either.\n    myCallbackMethod = NULL;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2097966,"reputation":414,"user_id":1866326,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522368385,"creation_date":1522368385,"answer_id":49566764,"question_id":29043872,"body_markdown":"There is one more way - jobjectArray\r\n\r\nPersonally, I needed to return to Java a pair of string and int.\r\n\r\nString can easily be put into such array using env-&gt;NewStringUTF method\r\nbut for int a wrapper must be constructed.\r\n\r\nnative part:\r\n\r\n    extern &quot;C&quot;\r\n    JNIEXPORT jobjectArray JNICALL\r\n    Java_com_example_myapp_CallingClass_writeCfgFile(\r\n        JNIEnv *env,\r\n        jobject obj,\r\n        jobjectArray stringArray,\r\n        jstring filepath){\r\n    ...     \r\n        std::pair&lt;int,string&gt; ret = generate_config(filePath, reqMsgTypes);\r\n\r\n        jobjectArray retobjarr = (jobjectArray)env-&gt;NewObjectArray(2, env-&gt;FindClass(&quot;java/lang/Object&quot;), NULL);\r\n        env-&gt;SetObjectArrayElement(retobjarr, 0, NewInteger(env, ret.first));\r\n        env-&gt;SetObjectArrayElement(retobjarr, 1, env-&gt;NewStringUTF(ret.second.c_str()));\r\n\r\n        return retobjarr;\r\n    }\r\n\r\n    jobject NewInteger(JNIEnv* env, int value){\r\n        jclass integerClass = env-&gt;FindClass(&quot;java/lang/Integer&quot;);\r\n        jmethodID integerConstructor = env-&gt;GetMethodID(integerClass, &quot;&lt;init&gt;&quot;, &quot;(I)V&quot;);\r\n        return env-&gt;NewObject(integerClass, integerConstructor, static_cast&lt;jint&gt;(value));\r\n    }\r\n\r\nand on Java side:\r\n\r\n    Object[] resp = writeCfgFile( msgTypes,  filePath&quot;);\r\n\tInteger i = (Integer)resp[0];\r\n\tString str = (String)resp[1];","title":"android jni return multiple variables","body":"<p>There is one more way - jobjectArray</p>\n\n<p>Personally, I needed to return to Java a pair of string and int.</p>\n\n<p>String can easily be put into such array using env->NewStringUTF method\nbut for int a wrapper must be constructed.</p>\n\n<p>native part:</p>\n\n<pre><code>extern \"C\"\nJNIEXPORT jobjectArray JNICALL\nJava_com_example_myapp_CallingClass_writeCfgFile(\n    JNIEnv *env,\n    jobject obj,\n    jobjectArray stringArray,\n    jstring filepath){\n...     \n    std::pair&lt;int,string&gt; ret = generate_config(filePath, reqMsgTypes);\n\n    jobjectArray retobjarr = (jobjectArray)env-&gt;NewObjectArray(2, env-&gt;FindClass(\"java/lang/Object\"), NULL);\n    env-&gt;SetObjectArrayElement(retobjarr, 0, NewInteger(env, ret.first));\n    env-&gt;SetObjectArrayElement(retobjarr, 1, env-&gt;NewStringUTF(ret.second.c_str()));\n\n    return retobjarr;\n}\n\njobject NewInteger(JNIEnv* env, int value){\n    jclass integerClass = env-&gt;FindClass(\"java/lang/Integer\");\n    jmethodID integerConstructor = env-&gt;GetMethodID(integerClass, \"&lt;init&gt;\", \"(I)V\");\n    return env-&gt;NewObject(integerClass, integerConstructor, static_cast&lt;jint&gt;(value));\n}\n</code></pre>\n\n<p>and on Java side:</p>\n\n<pre><code>Object[] resp = writeCfgFile( msgTypes,  filePath\");\nInteger i = (Integer)resp[0];\nString str = (String)resp[1];\n</code></pre>\n"}],"owner":{"account_id":5295543,"reputation":1976,"user_id":4226806,"accept_rate":35,"display_name":"rubmz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12336,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":29044319,"answer_count":3,"score":13,"last_activity_date":1691539555,"creation_date":1426291342,"question_id":29043872,"body_markdown":"How to return multiple variables from a `jni` function, avoiding the overhead of an array mangling?","title":"android jni return multiple variables","body":"<p>How to return multiple variables from a <code>jni</code> function, avoiding the overhead of an array mangling?</p>\n"},{"tags":["java","javafx","tableview"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":2,"creation_date":1691533910,"post_id":76863532,"comment_id":135504069,"body_markdown":"See also [_Why should I avoid using PropertyValueFactory in JavaFX?_](https://stackoverflow.com/q/72437983/230513), as well as my [encounter](https://stackoverflow.com/q/68969222/230513).","body":"See also <a href=\"https://stackoverflow.com/q/72437983/230513\"><i>Why should I avoid using PropertyValueFactory in JavaFX?</i></a>, as well as my <a href=\"https://stackoverflow.com/q/68969222/230513\">encounter</a>."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691592618,"post_id":76863532,"comment_id":135512996,"body_markdown":"Your solution is essentially what Joshua Bloch recommends in *Effective Java* in (referring to the second edition) Items 24 (&quot;Eliminate Unchecked Warnings&quot;) and 25 (&quot;Prefer Lists to Arrays&quot;).","body":"Your solution is essentially what Joshua Bloch recommends in <i>Effective Java</i> in (referring to the second edition) Items 24 (&quot;Eliminate Unchecked Warnings&quot;) and 25 (&quot;Prefer Lists to Arrays&quot;)."}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1691538866,"creation_date":1691535255,"answer_id":76863620,"question_id":76863532,"body_markdown":"#### Using alternate API without varargs\r\n\r\nOne way to handle the unchecked generics warnings (which won&#39;t work in all cases) is to rewrite your code to use a different API which is less susceptible to such issues. \r\n\r\nFor example, instead of calling `setAll`, you can call `clear` on the list and then call the `add` method individually for each item. The varargs typed `setAll` is mostly a convenience method for doing this.  \r\n\r\nThere is a slight difference in meaning between the two options. Because the list is observable, changes are fired after each atomic operation. `setAll` makes all of the changes for the call atomic, resulting in fewer changes fired, but I don&#39;t think that will be an issue in this case. \r\n\r\nIt is more wordy to call add for each column individually if you have many columns, but will avoid any potential for type errors and warnings. (I&#39;m not advocating that approach, just letting you know the possibility). \r\n\r\nYou can replace the call:\r\n\r\n    tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);  // &lt;---- Warning: Unchecked generics array creation for varargs parameter.\r\n\r\nWith alternate API calls which do not use a varargs parameter:\r\n\r\n    tableViewPersons.getColumns().clear();\r\n    tableViewPersons.getColumns().add(firstNameCol);\r\n    tableViewPersons.getColumns().add(lastNameCol);\r\n\r\n#### Your solution is OK (and also uses alternate API without varargs)\r\n\r\nYour solution to this issue where you create a List of a given type up front and provide that to the TableView is really the same approach as described in the above section, you are using a different API instead of the varargs API.  \r\n\r\n&gt;     List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\r\n&gt;     tableViewPersons.getColumns ( ).setAll ( columns );\r\n\r\n`ObservableList` has overloaded `setAll` methods:\r\n\r\n * [`boolean setAll​(E... elements)`][1]\t\r\n    &gt; Clears the ObservableList and adds all the elements passed as var-args.\r\n * [`boolean setAll​(Collection&lt;? extends E&gt; col)`][2]\t\r\n    &gt;Clears the ObservableList and adds all elements from the collection.\r\n\r\nYou are replacing the varargs API call with the single argument variant.  It is a perfectly valid solution.  It won&#39;t work in the general case with different APIs that don&#39;t provide an overloaded interface like this, but it will work in this instance.\r\n\r\nIn your case, where all columns are mapping `String` properties, I would not use the wildcard type `?`, instead I would use:\r\n\r\n    List &lt; TableColumn &lt; Person, String &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );\r\n\r\nand only use the wild card type if each column mapped to a different type.\r\n\r\n#### Using `SafeVarargs`\r\n\r\nAnother way to handle this is to create a helper method, annotated [`SafeVarargs`][3] to assert you are using the variable arguments safely.\r\n\r\n    //...\r\n    addColumns(tableViewPersons, firstNameCol, lastNameCol);\r\n    //...\r\n\r\n    @SafeVarargs\r\n    private static void addColumns(\r\n        TableView&lt;Person&gt; tableViewPersons, \r\n        TableColumn&lt;Person, String&gt;... columns) \r\n    {\r\n        tableViewPersons.getColumns().setAll(columns);\r\n    }\r\n    \r\n#### Unsolicited opinion on suppressing warnings\r\n\r\nI know you don&#39;t want to suppress the warnings as mentioned in the question (which is why I have provided other options).  But I think, in this case, suppression is OK.\r\n\r\nMy opinion is that the unchecked stuff is just an annoyance in many cases. Generics were added to Java in what I think even the designers would say was a compromise design, because the language was not built for generics originally.  The stuff that shows up around some of the unchecked generics warnings in cases like this is a part of the compromise design.\r\n\r\nHaving the main type on the TableView definition, backing list, etc, is good (and important). But when you start having to do stuff like use wildcard types or method level type specifiers when using classes and methods that are already typed, or trying to hunt around to remove a warning on a method usage that you already *know* is safe, it becomes more distracting than beneficial. In such cases, I advise [suppressing the warnings][4] on a selective basis.\r\n\r\nPotentially you can use your IDE to assist in suppressing unnecessary warnings, for example [suppressing in Idea][5]. Before doing so, check that it isn&#39;t really a significant potential for error, but if it is not (like a lot of the unchecked generics warnings IMO), then I think it is OK to suppress them.\r\n\r\nFor example to suppress the warning in the Idea IDE for a specific line, the following comment can be used (this is what I usually do):\r\n\r\n    //noinspection unchecked\r\n    tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);\r\n\r\nUnfortunately, in a general case Java only allows suppressing the warnings on a class, field or method level.\r\n\r\nSo a portable way to do this at the method level is using the [`SupressWarnings`][6] annotation where limited, relevant code is placed in a small method:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private TableView&lt;Person&gt; createPersonTableView(ObservableList&lt;Person&gt; people) {\r\n        TableView&lt;Person&gt; tableViewPersons = new TableView&lt;&gt;(people);\r\n\r\n        TableColumn&lt;Person, String&gt; firstNameCol = new TableColumn&lt;&gt;(&quot;First Name&quot;);\r\n        firstNameCol.setCellValueFactory(data -&gt; data.getValue().firstNameProperty());\r\n\r\n        TableColumn&lt;Person, String&gt; lastNameCol = new TableColumn&lt;&gt;(&quot;Last Name&quot;);\r\n        firstNameCol.setCellValueFactory(data -&gt; data.getValue().lastNameProperty());\r\n        \r\n        tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);\r\n        \r\n        return tableViewPersons;\r\n    }\r\n\r\n#### Using lambda&#39;s instead of PropertyValueFactory\r\n\r\nIncidentally, but not related to the generics issue, the example snippet above also illustrates the &quot;correct&quot; use of lambdas to set the cell value factories rather than relying on `PropertyValueFactory`, as discussed in:\r\n\r\n * https://stackoverflow.com/q/72437983/230513\r\n\r\nIn my opinion, using lambdas instead of `PropertyValueFactory` is more important than the issues around suppression of the varargs type checks on the TableView method calls, because it is far easier to create runtime errors when using a `PropertyValueFactory` and more difficult to debug them if they do arise.\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/17/javafx.base/javafx/collections/ObservableList.html#setAll(E...)\r\n  [2]: https://openjfx.io/javadoc/17/javafx.base/javafx/collections/ObservableList.html#setAll(java.util.Collection)\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/SafeVarargs.html\r\n  [4]: https://stackoverflow.com/questions/1129795/what-is-suppresswarnings-unchecked-in-java\r\n  [5]: https://www.jetbrains.com/help/idea/disabling-and-enabling-inspections.html#suppress-inspections\r\n  [6]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/SuppressWarnings.html","title":"How to resolve &quot;Unchecked generics&quot; warning when setting columns on a TableView in JavaFX","body":"<h4>Using alternate API without varargs</h4>\n<p>One way to handle the unchecked generics warnings (which won't work in all cases) is to rewrite your code to use a different API which is less susceptible to such issues.</p>\n<p>For example, instead of calling <code>setAll</code>, you can call <code>clear</code> on the list and then call the <code>add</code> method individually for each item. The varargs typed <code>setAll</code> is mostly a convenience method for doing this.</p>\n<p>There is a slight difference in meaning between the two options. Because the list is observable, changes are fired after each atomic operation. <code>setAll</code> makes all of the changes for the call atomic, resulting in fewer changes fired, but I don't think that will be an issue in this case.</p>\n<p>It is more wordy to call add for each column individually if you have many columns, but will avoid any potential for type errors and warnings. (I'm not advocating that approach, just letting you know the possibility).</p>\n<p>You can replace the call:</p>\n<pre><code>tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);  // &lt;---- Warning: Unchecked generics array creation for varargs parameter.\n</code></pre>\n<p>With alternate API calls which do not use a varargs parameter:</p>\n<pre><code>tableViewPersons.getColumns().clear();\ntableViewPersons.getColumns().add(firstNameCol);\ntableViewPersons.getColumns().add(lastNameCol);\n</code></pre>\n<h4>Your solution is OK (and also uses alternate API without varargs)</h4>\n<p>Your solution to this issue where you create a List of a given type up front and provide that to the TableView is really the same approach as described in the above section, you are using a different API instead of the varargs API.</p>\n<blockquote>\n<pre><code>List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\ntableViewPersons.getColumns ( ).setAll ( columns );\n</code></pre>\n</blockquote>\n<p><code>ObservableList</code> has overloaded <code>setAll</code> methods:</p>\n<ul>\n<li><a href=\"https://openjfx.io/javadoc/17/javafx.base/javafx/collections/ObservableList.html#setAll(E...)\" rel=\"nofollow noreferrer\"><code>boolean setAll​(E... elements)</code></a>\n<blockquote>\n<p>Clears the ObservableList and adds all the elements passed as var-args.</p>\n</blockquote>\n</li>\n<li><a href=\"https://openjfx.io/javadoc/17/javafx.base/javafx/collections/ObservableList.html#setAll(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>boolean setAll​(Collection&lt;? extends E&gt; col)</code></a>\n<blockquote>\n<p>Clears the ObservableList and adds all elements from the collection.</p>\n</blockquote>\n</li>\n</ul>\n<p>You are replacing the varargs API call with the single argument variant.  It is a perfectly valid solution.  It won't work in the general case with different APIs that don't provide an overloaded interface like this, but it will work in this instance.</p>\n<p>In your case, where all columns are mapping <code>String</code> properties, I would not use the wildcard type <code>?</code>, instead I would use:</p>\n<pre><code>List &lt; TableColumn &lt; Person, String &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );\n</code></pre>\n<p>and only use the wild card type if each column mapped to a different type.</p>\n<h4>Using <code>SafeVarargs</code></h4>\n<p>Another way to handle this is to create a helper method, annotated <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/SafeVarargs.html\" rel=\"nofollow noreferrer\"><code>SafeVarargs</code></a> to assert you are using the variable arguments safely.</p>\n<pre><code>//...\naddColumns(tableViewPersons, firstNameCol, lastNameCol);\n//...\n\n@SafeVarargs\nprivate static void addColumns(\n    TableView&lt;Person&gt; tableViewPersons, \n    TableColumn&lt;Person, String&gt;... columns) \n{\n    tableViewPersons.getColumns().setAll(columns);\n}\n</code></pre>\n<h4>Unsolicited opinion on suppressing warnings</h4>\n<p>I know you don't want to suppress the warnings as mentioned in the question (which is why I have provided other options).  But I think, in this case, suppression is OK.</p>\n<p>My opinion is that the unchecked stuff is just an annoyance in many cases. Generics were added to Java in what I think even the designers would say was a compromise design, because the language was not built for generics originally.  The stuff that shows up around some of the unchecked generics warnings in cases like this is a part of the compromise design.</p>\n<p>Having the main type on the TableView definition, backing list, etc, is good (and important). But when you start having to do stuff like use wildcard types or method level type specifiers when using classes and methods that are already typed, or trying to hunt around to remove a warning on a method usage that you already <em>know</em> is safe, it becomes more distracting than beneficial. In such cases, I advise <a href=\"https://stackoverflow.com/questions/1129795/what-is-suppresswarnings-unchecked-in-java\">suppressing the warnings</a> on a selective basis.</p>\n<p>Potentially you can use your IDE to assist in suppressing unnecessary warnings, for example <a href=\"https://www.jetbrains.com/help/idea/disabling-and-enabling-inspections.html#suppress-inspections\" rel=\"nofollow noreferrer\">suppressing in Idea</a>. Before doing so, check that it isn't really a significant potential for error, but if it is not (like a lot of the unchecked generics warnings IMO), then I think it is OK to suppress them.</p>\n<p>For example to suppress the warning in the Idea IDE for a specific line, the following comment can be used (this is what I usually do):</p>\n<pre><code>//noinspection unchecked\ntableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);\n</code></pre>\n<p>Unfortunately, in a general case Java only allows suppressing the warnings on a class, field or method level.</p>\n<p>So a portable way to do this at the method level is using the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/SuppressWarnings.html\" rel=\"nofollow noreferrer\"><code>SupressWarnings</code></a> annotation where limited, relevant code is placed in a small method:</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\nprivate TableView&lt;Person&gt; createPersonTableView(ObservableList&lt;Person&gt; people) {\n    TableView&lt;Person&gt; tableViewPersons = new TableView&lt;&gt;(people);\n\n    TableColumn&lt;Person, String&gt; firstNameCol = new TableColumn&lt;&gt;(&quot;First Name&quot;);\n    firstNameCol.setCellValueFactory(data -&gt; data.getValue().firstNameProperty());\n\n    TableColumn&lt;Person, String&gt; lastNameCol = new TableColumn&lt;&gt;(&quot;Last Name&quot;);\n    firstNameCol.setCellValueFactory(data -&gt; data.getValue().lastNameProperty());\n    \n    tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);\n    \n    return tableViewPersons;\n}\n</code></pre>\n<h4>Using lambda's instead of PropertyValueFactory</h4>\n<p>Incidentally, but not related to the generics issue, the example snippet above also illustrates the &quot;correct&quot; use of lambdas to set the cell value factories rather than relying on <code>PropertyValueFactory</code>, as discussed in:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/72437983/230513\">Why should I avoid using PropertyValueFactory in JavaFX?</a></li>\n</ul>\n<p>In my opinion, using lambdas instead of <code>PropertyValueFactory</code> is more important than the issues around suppression of the varargs type checks on the TableView method calls, because it is far easier to create runtime errors when using a <code>PropertyValueFactory</code> and more difficult to debug them if they do arise.</p>\n"}],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76863620,"answer_count":1,"score":4,"last_activity_date":1691538866,"creation_date":1691533560,"question_id":76863532,"body_markdown":"I encountered a compiler warning in this common situation of adding columns to a table view control in a [JavaFX][1] app.\r\n\r\nTo demonstrate, here is my modified version of the code example seen in the Javadoc for the JavaFX/[OpenJFX][2] class [`TableView`][3]. Note the [`getColumns`][4] line.\r\n\r\n```java\r\npublic class HelloApplication extends Application\r\n{\r\n    @Override\r\n    public void start ( Stage stage )\r\n    {\r\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\r\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\r\n        tableViewPersons.setItems ( persons );\r\n\r\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\r\n        firstNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).firstNameProperty ( ).getName ( ) ) );\r\n\r\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\r\n        lastNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).lastNameProperty ( ).getName ( ) ) );\r\n\r\n        tableViewPersons.getColumns ( ).setAll ( firstNameCol , lastNameCol );  // &lt;---- Warning: Unchecked generics array creation for varargs parameter.\r\n\r\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\r\n        stage.setTitle ( &quot;JavaFX Example&quot; );\r\n        stage.setScene ( scene );\r\n        stage.show ( );\r\n    }\r\n…\r\n```\r\n\r\nThe line:\r\n\r\n    tableViewPersons.getColumns ( ).setAll ( firstNameCol , lastNameCol );\r\n\r\n… generates a warning for:\r\n\r\n&gt; Warning: Unchecked generics array creation for varargs parameter\r\n\r\nI understand from [this Answer][5] on [*Java unchecked: unchecked generic array creation for varargs parameter*](https://stackoverflow.com/q/21132692/642706), and from [this post][6], that the issue involves ambiguity about the type of the arguments being passed. \r\n\r\nIf my goal is to resolve this compiler warning, then one solution is to make explicit the parameterized type of the collection of `TableColumn` objects be passed to `ObservableList#setAll`. So we can explicitly declare a `List` of the `TableColumn` objects.\r\n\r\n```java\r\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\r\n        tableViewPersons.getColumns ( ).setAll ( columns );\r\n```\r\n\r\nSee that new code in the full context:\r\n\r\n```java\r\npublic class HelloApplication extends Application\r\n{\r\n    @Override\r\n    public void start ( Stage stage )\r\n    {\r\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\r\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\r\n        tableViewPersons.setItems ( persons );\r\n\r\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\r\n        firstNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).firstNameProperty ( ).getName ( ) ) );\r\n\r\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\r\n        lastNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).lastNameProperty ( ).getName ( ) ) );\r\n\r\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\r\n        tableViewPersons.getColumns ( ).setAll ( columns );\r\n\r\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\r\n        stage.setTitle ( &quot;JavaFX Example&quot; );\r\n        stage.setScene ( scene );\r\n        stage.show ( );\r\n    }\r\n…\r\n```\r\n\r\nMy question:\r\n\r\n - Is this a valid, complete solution to resolving the the &quot;Unchecked generics&quot; warning?\r\n - Is there any other simpler way to resolve the &quot;Unchecked generics&quot; warning? (I would rather not suppress the warning.)\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/JavaFX\r\n  [2]: https://openjfx.io/\r\n  [3]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\r\n  [4]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html#getColumns()\r\n  [5]: https://stackoverflow.com/a/21150650/642706\r\n  [6]: http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#FAQ300","title":"How to resolve &quot;Unchecked generics&quot; warning when setting columns on a TableView in JavaFX","body":"<p>I encountered a compiler warning in this common situation of adding columns to a table view control in a <a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a> app.</p>\n<p>To demonstrate, here is my modified version of the code example seen in the Javadoc for the JavaFX/<a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a> class <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\"><code>TableView</code></a>. Note the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html#getColumns()\" rel=\"nofollow noreferrer\"><code>getColumns</code></a> line.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class HelloApplication extends Application\n{\n    @Override\n    public void start ( Stage stage )\n    {\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\n        tableViewPersons.setItems ( persons );\n\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\n        firstNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).firstNameProperty ( ).getName ( ) ) );\n\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\n        lastNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).lastNameProperty ( ).getName ( ) ) );\n\n        tableViewPersons.getColumns ( ).setAll ( firstNameCol , lastNameCol );  // &lt;---- Warning: Unchecked generics array creation for varargs parameter.\n\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\n        stage.setTitle ( &quot;JavaFX Example&quot; );\n        stage.setScene ( scene );\n        stage.show ( );\n    }\n…\n</code></pre>\n<p>The line:</p>\n<pre><code>tableViewPersons.getColumns ( ).setAll ( firstNameCol , lastNameCol );\n</code></pre>\n<p>… generates a warning for:</p>\n<blockquote>\n<p>Warning: Unchecked generics array creation for varargs parameter</p>\n</blockquote>\n<p>I understand from <a href=\"https://stackoverflow.com/a/21150650/642706\">this Answer</a> on <a href=\"https://stackoverflow.com/q/21132692/642706\"><em>Java unchecked: unchecked generic array creation for varargs parameter</em></a>, and from <a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#FAQ300\" rel=\"nofollow noreferrer\">this post</a>, that the issue involves ambiguity about the type of the arguments being passed.</p>\n<p>If my goal is to resolve this compiler warning, then one solution is to make explicit the parameterized type of the collection of <code>TableColumn</code> objects be passed to <code>ObservableList#setAll</code>. So we can explicitly declare a <code>List</code> of the <code>TableColumn</code> objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\n        tableViewPersons.getColumns ( ).setAll ( columns );\n</code></pre>\n<p>See that new code in the full context:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class HelloApplication extends Application\n{\n    @Override\n    public void start ( Stage stage )\n    {\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\n        tableViewPersons.setItems ( persons );\n\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\n        firstNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).firstNameProperty ( ).getName ( ) ) );\n\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\n        lastNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).lastNameProperty ( ).getName ( ) ) );\n\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\n        tableViewPersons.getColumns ( ).setAll ( columns );\n\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\n        stage.setTitle ( &quot;JavaFX Example&quot; );\n        stage.setScene ( scene );\n        stage.show ( );\n    }\n…\n</code></pre>\n<p>My question:</p>\n<ul>\n<li>Is this a valid, complete solution to resolving the the &quot;Unchecked generics&quot; warning?</li>\n<li>Is there any other simpler way to resolve the &quot;Unchecked generics&quot; warning? (I would rather not suppress the warning.)</li>\n</ul>\n"},{"tags":["java","spring","maven","jakarta-migration"],"comments":[{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1691543333,"post_id":76863747,"comment_id":135504886,"body_markdown":"This will sound kinda dumb but have you simply tried to exclude those dependencies since you are using maven and add those specific dependencies ( jakarta.servlet.Filter )?\nhttps://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#dependency-exclusions\nAs for lowering Tomcat, you are correct, Spring 6 requires Tomcat 10, 9 will not work.\nLet me know if this helps Aaron.","body":"This will sound kinda dumb but have you simply tried to exclude those dependencies since you are using maven and add those specific dependencies ( jakarta.servlet.Filter )? <a href=\"https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#dependency-exclusions\" rel=\"nofollow noreferrer\">maven.apache.org/guides/introduction/&hellip;</a> As for lowering Tomcat, you are correct, Spring 6 requires Tomcat 10, 9 will not work. Let me know if this helps Aaron."}],"owner":{"account_id":364348,"reputation":4420,"user_id":708678,"accept_rate":81,"display_name":"Aaron"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691538099,"creation_date":1691538099,"question_id":76863747,"body_markdown":"I have a spring project that I updated to version 3.  I added Jakarta to replace Javax.\r\nWhen I run the application I get a `Failed to load class [javax.servlet.Filter]` error. Some of the post on Stack recommend lowering the version of Tomcat, but I have to keep it at 10.1.11.\r\n\r\nWhen I run `mvn dependency:tree -Dverbose` I see that javax is being used by `kogito-spring-boot-starter` which is at version 1.41 which is the latest release and javax is also being used by s`pring-cloud-starter-security` which is at the latest release 2.2.5.\r\n\r\nI am using Maven. \r\nHow would I fix this?","title":"Failed to load class [javax.servlet.Filter] Cannot lower version of Tomcat","body":"<p>I have a spring project that I updated to version 3.  I added Jakarta to replace Javax.\nWhen I run the application I get a <code>Failed to load class [javax.servlet.Filter]</code> error. Some of the post on Stack recommend lowering the version of Tomcat, but I have to keep it at 10.1.11.</p>\n<p>When I run <code>mvn dependency:tree -Dverbose</code> I see that javax is being used by <code>kogito-spring-boot-starter</code> which is at version 1.41 which is the latest release and javax is also being used by s<code>pring-cloud-starter-security</code> which is at the latest release 2.2.5.</p>\n<p>I am using Maven.\nHow would I fix this?</p>\n"},{"tags":["java","admob","codenameone"],"comments":[{"owner":{"account_id":394396,"reputation":52134,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":0,"creation_date":1691548852,"post_id":76863744,"comment_id":135505315,"body_markdown":"The simplest way to do this is to launch Codename One Settings from the maven target. Go to advanced -&gt; Extensions and click &quot;download&quot;. This automatically recognizes the type of extension and adds it to the pom correctly.","body":"The simplest way to do this is to launch Codename One Settings from the maven target. Go to advanced -&gt; Extensions and click &quot;download&quot;. This automatically recognizes the type of extension and adds it to the pom correctly."},{"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"score":0,"creation_date":1691564631,"post_id":76863744,"comment_id":135507015,"body_markdown":"When I do, my game no longer can be built to server for android (get an error), I get errors when I build it locally in Android Studio when testing it out such as: Dynamic lookup for intent failed for action: com.google.android.gms.ads.service.START and the app does not build in XCode for iOS.","body":"When I do, my game no longer can be built to server for android (get an error), I get errors when I build it locally in Android Studio when testing it out such as: Dynamic lookup for intent failed for action: com.google.android.gms.ads.service.START and the app does not build in XCode for iOS."},{"owner":{"account_id":394396,"reputation":52134,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":0,"creation_date":1691635335,"post_id":76863744,"comment_id":135519150,"body_markdown":"I can&#39;t help without actual error logs that you&#39;re getting. If they are too long you can create a git gist and provide a link. If they&#39;re private you can submit that to the chat in our website and link to this answer.","body":"I can&#39;t help without actual error logs that you&#39;re getting. If they are too long you can create a git gist and provide a link. If they&#39;re private you can submit that to the chat in our website and link to this answer."},{"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"score":0,"creation_date":1691863561,"post_id":76863744,"comment_id":135550090,"body_markdown":"So I did get things to work perfectly for Android. I did get my program to run on iOS with admob injected on xcode, however, when I run my program on my phone with ads, when an ad is supposed to show, my program freezes and gives me this infinitely\n2023-08-12 14:01:35.402624-0400 MyApp[48419:2669211] inside native getIsLoadedMainThread\n2023-08-12 14:01:35.402695-0400 MyApp[48419:2669211] ad not loaded yet \nIs this something that will resolve if my app were to be published?","body":"So I did get things to work perfectly for Android. I did get my program to run on iOS with admob injected on xcode, however, when I run my program on my phone with ads, when an ad is supposed to show, my program freezes and gives me this infinitely 2023-08-12 14:01:35.402624-0400 MyApp[48419:2669211] inside native getIsLoadedMainThread 2023-08-12 14:01:35.402695-0400 MyApp[48419:2669211] ad not loaded yet  Is this something that will resolve if my app were to be published?"},{"owner":{"account_id":394396,"reputation":52134,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":0,"creation_date":1691893860,"post_id":76863744,"comment_id":135552091,"body_markdown":"I doubt it. You should at least see a placeholder ad. This is a printout from the library, what other printouts do you see from here: https://github.com/codenameone/admobfullscreen-codenameone/blob/88bffee043f3705cf12c768cd594411dfa32af2c/ios/src/main/objectivec/com_codename1_admob_AdMobNativeImpl.m#L33","body":"I doubt it. You should at least see a placeholder ad. This is a printout from the library, what other printouts do you see from here: <a href=\"https://github.com/codenameone/admobfullscreen-codenameone/blob/88bffee043f3705cf12c768cd594411dfa32af2c/ios/src/main/objectivec/com_codename1_admob_AdMobNativeImpl.m#L33\" rel=\"nofollow noreferrer\">github.com/codenameone/admobfullscreen-codenameone/blob/&hellip;</a>"},{"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"score":0,"creation_date":1691948616,"post_id":76863744,"comment_id":135556679,"body_markdown":"I also get these printouts when the ad first &quot;loads&quot;:::      \n2023-08-13 13:35:31.364916-0400 MyApp[56220:2986498] inside native startLoadingAd\n2023-08-13 13:35:31.365093-0400 MyApp[56220:2986498] inside native isLoaded - run on main thread\n2023-08-13 13:35:31.365150-0400 MyApp[56220:2986135] start loading Ad :::    \nLike I said, I then get the other printouts infinitely. I also observed in AdMob that my ad unit is getting impressions so I think it is &quot;working&quot; in a way but it just seems to crash my program.","body":"I also get these printouts when the ad first &quot;loads&quot;:::       2023-08-13 13:35:31.364916-0400 MyApp[56220:2986498] inside native startLoadingAd 2023-08-13 13:35:31.365093-0400 MyApp[56220:2986498] inside native isLoaded - run on main thread 2023-08-13 13:35:31.365150-0400 MyApp[56220:2986135] start loading Ad :::     Like I said, I then get the other printouts infinitely. I also observed in AdMob that my ad unit is getting impressions so I think it is &quot;working&quot; in a way but it just seems to crash my program."},{"owner":{"account_id":394396,"reputation":52134,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":1,"creation_date":1691981177,"post_id":76863744,"comment_id":135559349,"body_markdown":"So no `interstitialDidReceiveAd` or anything similar? That means an ad wasn&#39;t received from admob. I&#39;m not sure why. If the app crashes can you add the stack from xcode and error to the question? Do you have access to that?","body":"So no <code>interstitialDidReceiveAd</code> or anything similar? That means an ad wasn&#39;t received from admob. I&#39;m not sure why. If the app crashes can you add the stack from xcode and error to the question? Do you have access to that?"},{"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"score":0,"creation_date":1692054813,"post_id":76863744,"comment_id":135571087,"body_markdown":"Thank you so much. This comment made me realize my Ad Unit ID and App ID were flip flopped.","body":"Thank you so much. This comment made me realize my Ad Unit ID and App ID were flip flopped."}],"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691538042,"creation_date":1691538042,"question_id":76863744,"body_markdown":"I&#39;m having issues getting the Admob extension to work. \r\nI initially just inserted the commands found on the extension&#39;s Github page (https://github.com/codenameone/admobfullscreen-codenameone) to the pml.xml file which did not work. So I then downloaded the Admob library in the extensions page in the CN1 settings program. When I do that, I get an error with common/pom.xml file - sometimes it says that the artifact can&#39;t be found. So, I then deleted the commands that were inserted in the common/pom.xml file from downloading it via the settings page. I then reinserted the commands said to insert from the Github page and then the admob extension works in the simulator. \r\n\r\nI then built it my program locally in Android Studio to which it does not work because it cannot find the GoogleAPIs. I then just uploaded it to the cloud server and ran my game on an emulator (Genymotion) as I thought maybe it was just an error with Android Studio. My game ran in the emulator but whenever an ad was supposed to pop up, my game would simply freeze. \r\n\r\nI think I am doing something wrong when I insert the library into my program and any guidance on how to properly insert Admob into my project would be greatly appreciated. \r\n","title":"How to inject Admob Extension to a Codename One Project?","body":"<p>I'm having issues getting the Admob extension to work.\nI initially just inserted the commands found on the extension's Github page (<a href=\"https://github.com/codenameone/admobfullscreen-codenameone\" rel=\"nofollow noreferrer\">https://github.com/codenameone/admobfullscreen-codenameone</a>) to the pml.xml file which did not work. So I then downloaded the Admob library in the extensions page in the CN1 settings program. When I do that, I get an error with common/pom.xml file - sometimes it says that the artifact can't be found. So, I then deleted the commands that were inserted in the common/pom.xml file from downloading it via the settings page. I then reinserted the commands said to insert from the Github page and then the admob extension works in the simulator.</p>\n<p>I then built it my program locally in Android Studio to which it does not work because it cannot find the GoogleAPIs. I then just uploaded it to the cloud server and ran my game on an emulator (Genymotion) as I thought maybe it was just an error with Android Studio. My game ran in the emulator but whenever an ad was supposed to pop up, my game would simply freeze.</p>\n<p>I think I am doing something wrong when I insert the library into my program and any guidance on how to properly insert Admob into my project would be greatly appreciated.</p>\n"},{"tags":["java","android","http","versioning"],"comments":[{"owner":{"account_id":481416,"reputation":355314,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"score":0,"creation_date":1448988624,"post_id":7298106,"comment_id":55806693,"body_markdown":"How users can do that from Settings: http://android.stackexchange.com/questions/2016/how-can-you-tell-which-version-of-an-app-is-on-your-android-phone","body":"How users can do that from Settings: <a href=\"http://android.stackexchange.com/questions/2016/how-can-you-tell-which-version-of-an-app-is-on-your-android-phone\" title=\"how can you tell which version of an app is on your android phone\">android.stackexchange.com/questions/2016/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":87652,"reputation":52646,"user_id":242930,"display_name":"Nikolay Elenkov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1315125514,"creation_date":1315125514,"answer_id":7298124,"question_id":7298106,"body_markdown":"There is no API for this, and you can&#39;t auto install it, you can just redirect them to it&#39;s Market page so they can upgrade. You can have your latest version in a file on a Web server, and have the app check it. Here&#39;s one implementation of this:\r\n\r\nhttp://code.google.com/p/openintents/source/browse/#svn%2Ftrunk%2FUpdateCheckerApp\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>There is no API for this, and you can't auto install it, you can just redirect them to it's Market page so they can upgrade. You can have your latest version in a file on a Web server, and have the app check it. Here's one implementation of this:</p>\n\n<p><a href=\"http://code.google.com/p/openintents/source/browse/#svn%2Ftrunk%2FUpdateCheckerApp\" rel=\"nofollow\">http://code.google.com/p/openintents/source/browse/#svn%2Ftrunk%2FUpdateCheckerApp</a></p>\n"},{"tags":[],"owner":{"account_id":477738,"reputation":2078,"user_id":889412,"accept_rate":38,"display_name":"Jasoneer"},"down_vote_count":4,"up_vote_count":30,"is_accepted":false,"score":26,"last_activity_date":1531289026,"creation_date":1315129255,"answer_id":7298355,"question_id":7298106,"body_markdown":"If it is an application on the Market, then on app start-up, fire an Intent to open up the Market app hopefully which will cause it to check for updates.\r\n\r\nOtherwise implementing and update checker is fairly easy. Here is my code (roughly) for it:\r\n\r\n    String response = SendNetworkUpdateAppRequest(); // Your code to do the network request\r\n                                                     // should send the current version\r\n                                                     // to server\r\n    if(response.equals(&quot;YES&quot;)) // Start Intent to download the app user has to manually install it by clicking on the notification\r\n        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;URL TO LATEST APK&quot;)));\r\n\r\nOf course you should rewrite this to do the request on a background thread but you get the idea.\r\n\r\n&gt; If you like something a little but more complex but allows your app to\r\n&gt; automatically apply the update see [here][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4967669/android-install-apk-programmatically","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>If it is an application on the Market, then on app start-up, fire an Intent to open up the Market app hopefully which will cause it to check for updates.</p>\n\n<p>Otherwise implementing and update checker is fairly easy. Here is my code (roughly) for it:</p>\n\n<pre><code>String response = SendNetworkUpdateAppRequest(); // Your code to do the network request\n                                                 // should send the current version\n                                                 // to server\nif(response.equals(\"YES\")) // Start Intent to download the app user has to manually install it by clicking on the notification\n    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(\"URL TO LATEST APK\")));\n</code></pre>\n\n<p>Of course you should rewrite this to do the request on a background thread but you get the idea.</p>\n\n<blockquote>\n  <p>If you like something a little but more complex but allows your app to\n  automatically apply the update see <a href=\"https://stackoverflow.com/questions/4967669/android-install-apk-programmatically\">here</a>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3778003,"reputation":6793,"user_id":3138238,"accept_rate":74,"display_name":"madx"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1621341514,"creation_date":1390152991,"answer_id":21220203,"question_id":7298106,"body_markdown":"You can use this Android Library: https://github.com/danielemaddaluno/Android-Update-Checker. It aims to provide a reusable instrument to check asynchronously if exists any newer released update of your app on the Store.\r\nIt is based on the use of Jsoup (http://jsoup.org/) to test if a new update really exists parsing the app page on the Google Play Store:\r\n\r\n    private boolean web_update(){\r\n\t\ttry {\t\t\r\n            String curVersion = applicationContext.getPackageManager().getPackageInfo(BuildConfig.APPLICATION_ID, 0).versionName;\t\r\n\t\t\tString newVersion = curVersion;\r\n\t\t\tnewVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + BuildConfig.APPLICATION_ID + &quot;&amp;hl=en&quot;)\r\n\t\t\t\t\t.timeout(30000)\r\n\t\t\t\t\t.userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n\t\t\t\t\t.referrer(&quot;http://www.google.com&quot;)\r\n\t\t\t\t\t.get()\r\n\t\t\t\t\t.select(&quot;div[itemprop=softwareVersion]&quot;)\r\n\t\t\t\t\t.first()\r\n\t\t\t\t\t.ownText();\r\n\t\t\treturn (value(curVersion) &lt; value(newVersion)) ? true : false;\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\r\nAnd as &quot;value&quot; function the following (works if values are beetween 0-99):\r\n\r\n    private long value(String string) {\r\n\t\tstring = string.trim();\r\n\t\tif( string.contains( &quot;.&quot; )){ \r\n\t\t\tfinal int index = string.lastIndexOf( &quot;.&quot; );\r\n\t\t\treturn value( string.substring( 0, index ))* 100 + value( string.substring( index + 1 )); \r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Long.valueOf( string ); \r\n\t\t}\r\n\t}\r\n\r\nIf you want only to verify a mismatch beetween versions, you can change:\r\n\r\n`value(curVersion) &lt; value(newVersion)` with `value(curVersion) != value(newVersion)`","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>You can use this Android Library: <a href=\"https://github.com/danielemaddaluno/Android-Update-Checker\" rel=\"nofollow noreferrer\">https://github.com/danielemaddaluno/Android-Update-Checker</a>. It aims to provide a reusable instrument to check asynchronously if exists any newer released update of your app on the Store.\nIt is based on the use of Jsoup (<a href=\"http://jsoup.org/\" rel=\"nofollow noreferrer\">http://jsoup.org/</a>) to test if a new update really exists parsing the app page on the Google Play Store:</p>\n<pre><code>private boolean web_update(){\n    try {       \n        String curVersion = applicationContext.getPackageManager().getPackageInfo(BuildConfig.APPLICATION_ID, 0).versionName;   \n        String newVersion = curVersion;\n        newVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + BuildConfig.APPLICATION_ID + &quot;&amp;hl=en&quot;)\n                .timeout(30000)\n                .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\n                .referrer(&quot;http://www.google.com&quot;)\n                .get()\n                .select(&quot;div[itemprop=softwareVersion]&quot;)\n                .first()\n                .ownText();\n        return (value(curVersion) &lt; value(newVersion)) ? true : false;\n    } catch (Exception e) {\n        e.printStackTrace();\n        return false;\n    }\n}\n</code></pre>\n<p>And as &quot;value&quot; function the following (works if values are beetween 0-99):</p>\n<pre><code>private long value(String string) {\n    string = string.trim();\n    if( string.contains( &quot;.&quot; )){ \n        final int index = string.lastIndexOf( &quot;.&quot; );\n        return value( string.substring( 0, index ))* 100 + value( string.substring( index + 1 )); \n    }\n    else {\n        return Long.valueOf( string ); \n    }\n}\n</code></pre>\n<p>If you want only to verify a mismatch beetween versions, you can change:</p>\n<p><code>value(curVersion) &lt; value(newVersion)</code> with <code>value(curVersion) != value(newVersion)</code></p>\n"},{"tags":[],"owner":{"display_name":"user586399"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1691537171,"creation_date":1447070720,"answer_id":33608728,"question_id":7298106,"body_markdown":"Navigate to your play page:\r\n\r\n&lt;!-- language: none --&gt;\r\n    https://play.google.com/store/apps/details?id=com.yourpackage\r\n\r\nUsing a standard HTTP GET.\r\nNow the following jQuery finds important info for you:\r\n\r\nCurrent Version\r\n--\r\n\r\n    $(&quot;[itemprop=&#39;softwareVersion&#39;]&quot;).text()\r\n\r\nWhat&#39;s new\r\n--\r\n\r\n    $(&quot;.recent-change&quot;).each(function() { all += $(this).text() + &quot;\\n&quot;; })\r\n\r\nNow that you can extract these information manually, simply make a method in your app that executes this for you.\r\n\r\n\r\n    public static String[] getAppVersionInfo(String playUrl) {\r\n        HtmlCleaner cleaner = new HtmlCleaner();\r\n        CleanerProperties props = cleaner.getProperties();\r\n        props.setAllowHtmlInsideAttributes(true);\r\n        props.setAllowMultiWordAttributes(true);\r\n        props.setRecognizeUnicodeChars(true);\r\n        props.setOmitComments(true);\r\n        try {\r\n            URL url = new URL(playUrl);\r\n            URLConnection conn = url.openConnection();\r\n            TagNode node = cleaner.clean(new InputStreamReader(conn.getInputStream()));\r\n            Object[] new_nodes = node.evaluateXPath(&quot;//*[@class=&#39;recent-change&#39;]&quot;);\r\n            Object[] version_nodes = node.evaluateXPath(&quot;//*[@itemprop=&#39;softwareVersion&#39;]&quot;);\r\n\r\n            String version = &quot;&quot;, whatsNew = &quot;&quot;;\r\n            for (Object new_node : new_nodes) {\r\n                TagNode info_node = (TagNode) new_node;\r\n                whatsNew += info_node.getAllChildren().get(0).toString().trim()\r\n                        + &quot;\\n&quot;;\r\n            }\r\n            if (version_nodes.length &gt; 0) {\r\n                TagNode ver = (TagNode) version_nodes[0];\r\n                version = ver.getAllChildren().get(0).toString().trim();\r\n            }\r\n            return new String[]{version, whatsNew};\r\n        } catch (IOException | XPatherException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\nUses &lt;a href=&quot;http://sourceforge.net/projects/htmlcleaner&quot;&gt;HtmlCleaner&lt;/a&gt;","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>Navigate to your play page:</p>\n<pre class=\"lang-none prettyprint-override\"><code>https://play.google.com/store/apps/details?id=com.yourpackage\n</code></pre>\n<p>Using a standard HTTP GET.\nNow the following jQuery finds important info for you:</p>\n<h2>Current Version</h2>\n<pre><code>$(&quot;[itemprop='softwareVersion']&quot;).text()\n</code></pre>\n<h2>What's new</h2>\n<pre><code>$(&quot;.recent-change&quot;).each(function() { all += $(this).text() + &quot;\\n&quot;; })\n</code></pre>\n<p>Now that you can extract these information manually, simply make a method in your app that executes this for you.</p>\n<pre><code>public static String[] getAppVersionInfo(String playUrl) {\n    HtmlCleaner cleaner = new HtmlCleaner();\n    CleanerProperties props = cleaner.getProperties();\n    props.setAllowHtmlInsideAttributes(true);\n    props.setAllowMultiWordAttributes(true);\n    props.setRecognizeUnicodeChars(true);\n    props.setOmitComments(true);\n    try {\n        URL url = new URL(playUrl);\n        URLConnection conn = url.openConnection();\n        TagNode node = cleaner.clean(new InputStreamReader(conn.getInputStream()));\n        Object[] new_nodes = node.evaluateXPath(&quot;//*[@class='recent-change']&quot;);\n        Object[] version_nodes = node.evaluateXPath(&quot;//*[@itemprop='softwareVersion']&quot;);\n\n        String version = &quot;&quot;, whatsNew = &quot;&quot;;\n        for (Object new_node : new_nodes) {\n            TagNode info_node = (TagNode) new_node;\n            whatsNew += info_node.getAllChildren().get(0).toString().trim()\n                    + &quot;\\n&quot;;\n        }\n        if (version_nodes.length &gt; 0) {\n            TagNode ver = (TagNode) version_nodes[0];\n            version = ver.getAllChildren().get(0).toString().trim();\n        }\n        return new String[]{version, whatsNew};\n    } catch (IOException | XPatherException e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n</code></pre>\n<p>Uses <a href=\"http://sourceforge.net/projects/htmlcleaner\" rel=\"nofollow noreferrer\">HtmlCleaner</a></p>\n"},{"tags":[],"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455391131,"creation_date":1455390666,"answer_id":35384172,"question_id":7298106,"body_markdown":"You should first check the app version on the market and compare it with the version of the app on the device. If they are different, it may be an update available. In this post I wrote down the code for getting the current version of market and current version on the device and compare them together. I also showed how to show the update dialog and redirect the user to the update page. Please visit this link: [https://stackoverflow.com/a/33925032/5475941][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/33925032/5475941","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>You should first check the app version on the market and compare it with the version of the app on the device. If they are different, it may be an update available. In this post I wrote down the code for getting the current version of market and current version on the device and compare them together. I also showed how to show the update dialog and redirect the user to the update page. Please visit this link: <a href=\"https://stackoverflow.com/a/33925032/5475941\">https://stackoverflow.com/a/33925032/5475941</a></p>\n"},{"tags":[],"owner":{"account_id":8966319,"reputation":119,"user_id":6686794,"accept_rate":0,"display_name":"Andi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1493881429,"creation_date":1493881429,"answer_id":43776054,"question_id":7298106,"body_markdown":"add     `compile &#39;org.jsoup:jsoup:1.10.2&#39;`  to dependencies in **APP LEVEL** build.gradle\r\n\r\n&amp;\r\n\r\nJust add below code and you are good to go.\r\n\r\n\r\n\r\n    private class GetVersionCode extends AsyncTask&lt;Void, String, String&gt; {\r\n        @Override\r\n        protected String doInBackground(Void... voids) {\r\n\r\n            try {\r\n                newVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + SplashActivity.this.getPackageName() + &quot;&amp;hl=it&quot;)\r\n                        .timeout(30000)\r\n                        .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                        .referrer(&quot;http://www.google.com&quot;)\r\n                        .get()\r\n                        .select(&quot;div[itemprop=softwareVersion]&quot;)\r\n                        .first()\r\n                        .ownText();\r\n                return newVersion;\r\n            } catch (Exception e) {\r\n                return newVersion;\r\n            }\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(String onlineVersion) {\r\n            super.onPostExecute(onlineVersion);\r\n\r\n            if (!currentVersion.equalsIgnoreCase(onlineVersion)) {\r\n                //show dialog\r\n                new AlertDialog.Builder(context)\r\n                        .setTitle(&quot;Updated app available!&quot;)\r\n                        .setMessage(&quot;Want to update app?&quot;)\r\n                        .setPositiveButton(&quot;Update&quot;, new DialogInterface.OnClickListener() {\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                // continue with delete\r\n                                final String appPackageName = getPackageName(); // getPackageName() from Context or Activity object\r\n                                try {\r\n                                    Toast.makeText(getApplicationContext(), &quot;App is in BETA version cannot update&quot;, Toast.LENGTH_SHORT).show();\r\n                                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;market://details?id=&quot; + appPackageName)));\r\n                                } catch (ActivityNotFoundException anfe) {\r\n                                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;https://play.google.com/store/apps/details?id=&quot; + appPackageName)));\r\n                                }\r\n                            }\r\n                        })\r\n                        .setNegativeButton(&quot;Later&quot;, new DialogInterface.OnClickListener() {\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                // do nothing\r\n                                dialog.dismiss();\r\n                                new MyAsyncTask().execute();\r\n                            }\r\n                        })\r\n                        .setIcon(android.R.drawable.ic_dialog_alert)\r\n                        .show();\r\n\r\n            }\r\n        }\r\n    }\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>add     <code>compile 'org.jsoup:jsoup:1.10.2'</code>  to dependencies in <strong>APP LEVEL</strong> build.gradle</p>\n\n<p>&amp;</p>\n\n<p>Just add below code and you are good to go.</p>\n\n<pre><code>private class GetVersionCode extends AsyncTask&lt;Void, String, String&gt; {\n    @Override\n    protected String doInBackground(Void... voids) {\n\n        try {\n            newVersion = Jsoup.connect(\"https://play.google.com/store/apps/details?id=\" + SplashActivity.this.getPackageName() + \"&amp;hl=it\")\n                    .timeout(30000)\n                    .userAgent(\"Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6\")\n                    .referrer(\"http://www.google.com\")\n                    .get()\n                    .select(\"div[itemprop=softwareVersion]\")\n                    .first()\n                    .ownText();\n            return newVersion;\n        } catch (Exception e) {\n            return newVersion;\n        }\n    }\n\n    @Override\n    protected void onPostExecute(String onlineVersion) {\n        super.onPostExecute(onlineVersion);\n\n        if (!currentVersion.equalsIgnoreCase(onlineVersion)) {\n            //show dialog\n            new AlertDialog.Builder(context)\n                    .setTitle(\"Updated app available!\")\n                    .setMessage(\"Want to update app?\")\n                    .setPositiveButton(\"Update\", new DialogInterface.OnClickListener() {\n                        public void onClick(DialogInterface dialog, int which) {\n                            // continue with delete\n                            final String appPackageName = getPackageName(); // getPackageName() from Context or Activity object\n                            try {\n                                Toast.makeText(getApplicationContext(), \"App is in BETA version cannot update\", Toast.LENGTH_SHORT).show();\n                                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(\"market://details?id=\" + appPackageName)));\n                            } catch (ActivityNotFoundException anfe) {\n                                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(\"https://play.google.com/store/apps/details?id=\" + appPackageName)));\n                            }\n                        }\n                    })\n                    .setNegativeButton(\"Later\", new DialogInterface.OnClickListener() {\n                        public void onClick(DialogInterface dialog, int which) {\n                            // do nothing\n                            dialog.dismiss();\n                            new MyAsyncTask().execute();\n                        }\n                    })\n                    .setIcon(android.R.drawable.ic_dialog_alert)\n                    .show();\n\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10726753,"reputation":1120,"user_id":7894033,"display_name":"Rajesh Naddy"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1525873726,"creation_date":1525864183,"answer_id":50251940,"question_id":7298106,"body_markdown":"Google updated play store two months before.\r\nThis is the solution working right now for me..\r\n\r\n\r\n    class GetVersionCode extends AsyncTask&lt;Void, String, String&gt; {\r\n\r\n        @Override\r\n\r\n        protected String doInBackground(Void... voids) {\r\n\r\n            String newVersion = null;\r\n\r\n            try {\r\n                Document document = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + MainActivity.this.getPackageName()  + &quot;&amp;hl=en&quot;)\r\n                        .timeout(30000)\r\n                        .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                        .referrer(&quot;http://www.google.com&quot;)\r\n                        .get();\r\n                if (document != null) {\r\n                    Elements element = document.getElementsContainingOwnText(&quot;Current Version&quot;);\r\n                    for (Element ele : element) {\r\n                        if (ele.siblingElements() != null) {\r\n                            Elements sibElemets = ele.siblingElements();\r\n                            for (Element sibElemet : sibElemets) {\r\n                                newVersion = sibElemet.text();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return newVersion;\r\n\r\n        }\r\n\r\n\r\n        @Override\r\n\r\n        protected void onPostExecute(String onlineVersion) {\r\n\r\n            super.onPostExecute(onlineVersion);\r\n\r\n            if (onlineVersion != null &amp;&amp; !onlineVersion.isEmpty()) {\r\n\r\n                if (Float.valueOf(currentVersion) &lt; Float.valueOf(onlineVersion)) {\r\n                    //show anything\r\n                }\r\n\r\n            }\r\n\r\n            Log.d(&quot;update&quot;, &quot;Current version &quot; + currentVersion + &quot;playstore version &quot; + onlineVersion);\r\n\r\n        }\r\n    }\r\n\r\nand don&#39;t forget to add JSoup library\r\n\r\n    dependencies {\r\n    compile &#39;org.jsoup:jsoup:1.8.3&#39;}\r\n\r\nand on Oncreate()\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n      \r\n        String currentVersion;\r\n        try {\r\n            currentVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;\r\n        } catch (PackageManager.NameNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        new GetVersionCode().execute();\r\n        \r\n    }\r\n\r\nthat&#39;s it..\r\nThanks to [this link][1]\r\n\r\n\r\n  [1]: https://mobikul.com/get-current-version-application-playstore/","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>Google updated play store two months before.\nThis is the solution working right now for me..</p>\n\n<pre><code>class GetVersionCode extends AsyncTask&lt;Void, String, String&gt; {\n\n    @Override\n\n    protected String doInBackground(Void... voids) {\n\n        String newVersion = null;\n\n        try {\n            Document document = Jsoup.connect(\"https://play.google.com/store/apps/details?id=\" + MainActivity.this.getPackageName()  + \"&amp;hl=en\")\n                    .timeout(30000)\n                    .userAgent(\"Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6\")\n                    .referrer(\"http://www.google.com\")\n                    .get();\n            if (document != null) {\n                Elements element = document.getElementsContainingOwnText(\"Current Version\");\n                for (Element ele : element) {\n                    if (ele.siblingElements() != null) {\n                        Elements sibElemets = ele.siblingElements();\n                        for (Element sibElemet : sibElemets) {\n                            newVersion = sibElemet.text();\n                        }\n                    }\n                }\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return newVersion;\n\n    }\n\n\n    @Override\n\n    protected void onPostExecute(String onlineVersion) {\n\n        super.onPostExecute(onlineVersion);\n\n        if (onlineVersion != null &amp;&amp; !onlineVersion.isEmpty()) {\n\n            if (Float.valueOf(currentVersion) &lt; Float.valueOf(onlineVersion)) {\n                //show anything\n            }\n\n        }\n\n        Log.d(\"update\", \"Current version \" + currentVersion + \"playstore version \" + onlineVersion);\n\n    }\n}\n</code></pre>\n\n<p>and don't forget to add JSoup library</p>\n\n<pre><code>dependencies {\ncompile 'org.jsoup:jsoup:1.8.3'}\n</code></pre>\n\n<p>and on Oncreate()</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n\n    String currentVersion;\n    try {\n        currentVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;\n    } catch (PackageManager.NameNotFoundException e) {\n        e.printStackTrace();\n    }\n\n    new GetVersionCode().execute();\n\n}\n</code></pre>\n\n<p>that's it..\nThanks to <a href=\"https://mobikul.com/get-current-version-application-playstore/\" rel=\"noreferrer\">this link</a></p>\n"},{"tags":[],"owner":{"account_id":5183364,"reputation":733,"user_id":4148361,"accept_rate":35,"display_name":"Chathz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574835122,"creation_date":1574835122,"answer_id":59064080,"question_id":7298106,"body_markdown":"I did using [in-app updates][1]. This will only with devices running Android 5.0 (API level 21) or higher, \r\n\r\n\r\n  [1]: https://developer.android.com/guide/app-bundle/in-app-updates","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>I did using <a href=\"https://developer.android.com/guide/app-bundle/in-app-updates\" rel=\"nofollow noreferrer\">in-app updates</a>. This will only with devices running Android 5.0 (API level 21) or higher, </p>\n"},{"tags":[],"owner":{"account_id":2191637,"reputation":1557,"user_id":1938507,"display_name":"Junaed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576334792,"creation_date":1576334792,"answer_id":59336147,"question_id":7298106,"body_markdown":"I know the OP was very old, at that time [in-app-update][1] was not available.\r\nBut from API 21, you can use in-app-update checking.\r\nYou may need to keep your eyes on some points which are nicely written up [here][2]:\r\n\r\n\r\n\r\n  [1]: https://developer.android.com/guide/app-bundle/in-app-updates\r\n  [2]: https://proandroiddev.com/android-in-app-updates-common-pitfalls-and-some-good-patterns-9024988bbbe8","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>I know the OP was very old, at that time <a href=\"https://developer.android.com/guide/app-bundle/in-app-updates\" rel=\"nofollow noreferrer\">in-app-update</a> was not available.\nBut from API 21, you can use in-app-update checking.\nYou may need to keep your eyes on some points which are nicely written up <a href=\"https://proandroiddev.com/android-in-app-updates-common-pitfalls-and-some-good-patterns-9024988bbbe8\" rel=\"nofollow noreferrer\">here</a>:</p>\n"},{"tags":[],"owner":{"account_id":12262673,"reputation":21,"user_id":8949927,"display_name":"zafar Khan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585318416,"creation_date":1585305117,"answer_id":60884214,"question_id":7298106,"body_markdown":"Here&#39;s how to find the current and latest available versions:\r\n```        \r\n       try {\r\n            String curVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;\r\n            String newVersion = curVersion;\r\n            newVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + getPackageName() + &quot;&amp;hl=en&quot;)\r\n                    .timeout(30000)\r\n                    .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                    .referrer(&quot;http://www.google.com&quot;)\r\n                    .get()\r\n                    .select(&quot;div.hAyfc:nth-child(4) .IQ1z0d .htlgb&quot;)\r\n                    .first()\r\n                    .ownText();\r\n            Log.d(&quot;Curr Version&quot; , curVersion);\r\n            Log.d(&quot;New Version&quot; , newVersion);\r\n            \r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n```","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>Here's how to find the current and latest available versions:</p>\n\n<pre><code>       try {\n            String curVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;\n            String newVersion = curVersion;\n            newVersion = Jsoup.connect(\"https://play.google.com/store/apps/details?id=\" + getPackageName() + \"&amp;hl=en\")\n                    .timeout(30000)\n                    .userAgent(\"Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6\")\n                    .referrer(\"http://www.google.com\")\n                    .get()\n                    .select(\"div.hAyfc:nth-child(4) .IQ1z0d .htlgb\")\n                    .first()\n                    .ownText();\n            Log.d(\"Curr Version\" , curVersion);\n            Log.d(\"New Version\" , newVersion);\n\n        } catch (Exception e) {\n            e.printStackTrace();\n            return false;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19702319,"reputation":49,"user_id":14424782,"display_name":"Raiyan Shahid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691537135,"creation_date":1604469601,"answer_id":64674911,"question_id":7298106,"body_markdown":"**We can check Update by Add these Code:**\r\n\r\n*First we need to add dependencies :* \r\n\r\n&gt;  implementation &#39;org.jsoup:jsoup:1.10.2&#39;\r\n\r\n\r\nSecond we need to create Java File:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import android.app.Activity;\r\n    import android.app.AlertDialog;\r\n    import android.app.ProgressDialog;\r\n    import android.content.DialogInterface;\r\n    import android.content.Intent;\r\n    import android.content.pm.PackageInfo;\r\n    import android.content.pm.PackageManager;\r\n    import android.net.Uri;\r\n    import android.os.AsyncTask;\r\n    import android.widget.Toast;\r\n\r\n    import org.jsoup.Jsoup;\r\n\r\n    public class CurrentVersion{\r\n        private Activity activity;\r\n        public CurrentVersion(Activity activity) {\r\n            this.activity = activity;\r\n        }\r\n        //current version of app installed in the device\r\n    private String getCurrentVersion(){\r\n            PackageManager pm = activity.getPackageManager();\r\n            PackageInfo pInfo = null;\r\n            try {\r\n            pInfo = pm.getPackageInfo(activity.getPackageName(),0);\r\n            } catch (PackageManager.NameNotFoundException e1) {\r\n            e1.printStackTrace();\r\n            }\r\n            return pInfo.versionName;\r\n            }\r\n    private class GetLatestVersion extends AsyncTask&lt;String, String, String&gt; {\r\n        private String latestVersion;\r\n        private ProgressDialog progressDialog;\r\n        private boolean manualCheck;\r\n        GetLatestVersion(boolean manualCheck) {\r\n            this.manualCheck = manualCheck;\r\n        }\r\n        @Override\r\n        protected void onPostExecute(String s) {\r\n            super.onPostExecute(s);\r\n            if (manualCheck)\r\n            {\r\n                if (progressDialog!=null)\r\n                {\r\n                    if (progressDialog.isShowing())\r\n                    {\r\n                        progressDialog.dismiss();\r\n                    }\r\n                }\r\n            }\r\n            String currentVersion = getCurrentVersion();\r\n            //If the versions are not the same\r\n            if(!currentVersion.equals(latestVersion)&amp;&amp;latestVersion!=null){\r\n                final AlertDialog.Builder builder = new AlertDialog.Builder(activity);\r\n                builder.setTitle(&quot;An Update is Available&quot;);\r\n                builder.setMessage(&quot;Its better to update now&quot;);\r\n                builder.setPositiveButton(&quot;Update&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        //Click button action\r\n                        activity.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;market://details?id=&quot;+activity.getPackageName())));\r\n                        dialog.dismiss();\r\n                    }\r\n                });\r\n                builder.setCancelable(false);\r\n                builder.show();\r\n            }\r\n            else {\r\n                if (manualCheck) {\r\n                    Toast.makeText(activity, &quot;No Update Available&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        }\r\n  \r\n        @Override\r\n        protected String doInBackground(String... params) {\r\n            try {\r\n                //It retrieves the latest version by scraping the content of current version from play store at runtime\r\n                latestVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + activity.getPackageName() + &quot;&amp;hl=it&quot;)\r\n                        .timeout(30000)\r\n                        .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                        .referrer(&quot;http://www.google.com&quot;)\r\n                        .get()\r\n                        .select(&quot;.hAyfc .htlgb&quot;)\r\n                        .get(7)\r\n                        .ownText();\r\n                return latestVersion;\r\n            } catch (Exception e) {\r\n                return latestVersion;\r\n            }\r\n        }\r\n    }\r\n        public void checkForUpdate(boolean manualCheck)\r\n        {\r\n            new GetLatestVersion(manualCheck).execute();\r\n        }\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n    \r\n*Third We need to add this class in your main class where you want to show the update:*\r\n\r\n    AppUpdateChecker appUpdateChecker=new AppUpdateChecker(this); \r\n    appUpdateChecker.checkForUpdate(false);\r\n\r\n\r\n\r\n\r\n*I hope it will help you*\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p><strong>We can check Update by Add these Code:</strong></p>\n<p><em>First we need to add dependencies :</em></p>\n<blockquote>\n<p>implementation 'org.jsoup:jsoup:1.10.2'</p>\n</blockquote>\n<p>Second we need to create Java File:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import android.app.Activity;\nimport android.app.AlertDialog;\nimport android.app.ProgressDialog;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.content.pm.PackageInfo;\nimport android.content.pm.PackageManager;\nimport android.net.Uri;\nimport android.os.AsyncTask;\nimport android.widget.Toast;\n\nimport org.jsoup.Jsoup;\n\npublic class CurrentVersion{\n    private Activity activity;\n    public CurrentVersion(Activity activity) {\n        this.activity = activity;\n    }\n    //current version of app installed in the device\nprivate String getCurrentVersion(){\n        PackageManager pm = activity.getPackageManager();\n        PackageInfo pInfo = null;\n        try {\n        pInfo = pm.getPackageInfo(activity.getPackageName(),0);\n        } catch (PackageManager.NameNotFoundException e1) {\n        e1.printStackTrace();\n        }\n        return pInfo.versionName;\n        }\nprivate class GetLatestVersion extends AsyncTask&lt;String, String, String&gt; {\n    private String latestVersion;\n    private ProgressDialog progressDialog;\n    private boolean manualCheck;\n    GetLatestVersion(boolean manualCheck) {\n        this.manualCheck = manualCheck;\n    }\n    @Override\n    protected void onPostExecute(String s) {\n        super.onPostExecute(s);\n        if (manualCheck)\n        {\n            if (progressDialog!=null)\n            {\n                if (progressDialog.isShowing())\n                {\n                    progressDialog.dismiss();\n                }\n            }\n        }\n        String currentVersion = getCurrentVersion();\n        //If the versions are not the same\n        if(!currentVersion.equals(latestVersion)&amp;&amp;latestVersion!=null){\n            final AlertDialog.Builder builder = new AlertDialog.Builder(activity);\n            builder.setTitle(&quot;An Update is Available&quot;);\n            builder.setMessage(&quot;Its better to update now&quot;);\n            builder.setPositiveButton(&quot;Update&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialog, int which) {\n                    //Click button action\n                    activity.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;market://details?id=&quot;+activity.getPackageName())));\n                    dialog.dismiss();\n                }\n            });\n            builder.setCancelable(false);\n            builder.show();\n        }\n        else {\n            if (manualCheck) {\n                Toast.makeText(activity, &quot;No Update Available&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    @Override\n    protected String doInBackground(String... params) {\n        try {\n            //It retrieves the latest version by scraping the content of current version from play store at runtime\n            latestVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + activity.getPackageName() + &quot;&amp;hl=it&quot;)\n                    .timeout(30000)\n                    .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\n                    .referrer(&quot;http://www.google.com&quot;)\n                    .get()\n                    .select(&quot;.hAyfc .htlgb&quot;)\n                    .get(7)\n                    .ownText();\n            return latestVersion;\n        } catch (Exception e) {\n            return latestVersion;\n        }\n    }\n}\n    public void checkForUpdate(boolean manualCheck)\n    {\n        new GetLatestVersion(manualCheck).execute();\n    }\n}\n</code></pre>\n\n<p><em>Third We need to add this class in your main class where you want to show the update:</em></p>\n<pre><code>AppUpdateChecker appUpdateChecker=new AppUpdateChecker(this); \nappUpdateChecker.checkForUpdate(false);\n</code></pre>\n<p><em>I hope it will help you</em></p>\n"},{"tags":[],"owner":{"account_id":13454565,"reputation":3196,"user_id":9708440,"display_name":"Lakpriya Senevirathna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621520407,"creation_date":1621519107,"answer_id":67621857,"question_id":7298106,"body_markdown":"Using jsoup HTML parser library @ https://jsoup.org/\r\n\r\n    implementation &#39;org.jsoup:jsoup:1.13.1&#39;\r\n\r\nYou can simply create a method for that;\r\n\r\n    private void IsUpdateAvailable() {\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                String newversion = &quot;no&quot;;\r\n                String newversiondot = &quot;no&quot;;\r\n                try {\r\n                    newversiondot = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + BuildConfig.APPLICATION_ID + &quot;&amp;hl=en&quot;)\r\n                            .timeout(30000)\r\n                            .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                            .referrer(&quot;http://www.google.com&quot;)\r\n                            .get().select(&quot;div.hAyfc:nth-child(4) &gt; span:nth-child(2) &gt; div:nth-child(1) &gt; span:nth-child(1)&quot;)\r\n                            .first()\r\n                            .ownText();\r\n\r\n                    newversion = newversiondot.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\r\n\r\n                } catch (IOException e) {\r\n                    Log.d(&quot;TAG NEW&quot;, &quot;run: &quot; + e);\r\n                }\r\n\r\n                final String finalNewversion = newversion;\r\n                final String finalNewversiondot = newversiondot;\r\n                runOnUiThread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try {\r\n                            if (Integer.parseInt(finalNewversion) &gt; Integer.parseInt(getApplicationContext().getPackageManager().getPackageInfo(BuildConfig.APPLICATION_ID, 0).versionName.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;))) {\r\n                                showDialog(UsersActivity.this, &quot;Version: &quot;+finalNewversiondot);\r\n                            }\r\n                        } catch (PackageManager.NameNotFoundException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }).start();\r\n    }\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>Using jsoup HTML parser library @ <a href=\"https://jsoup.org/\" rel=\"nofollow noreferrer\">https://jsoup.org/</a></p>\n<pre><code>implementation 'org.jsoup:jsoup:1.13.1'\n</code></pre>\n<p>You can simply create a method for that;</p>\n<pre><code>private void IsUpdateAvailable() {\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n            String newversion = &quot;no&quot;;\n            String newversiondot = &quot;no&quot;;\n            try {\n                newversiondot = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + BuildConfig.APPLICATION_ID + &quot;&amp;hl=en&quot;)\n                        .timeout(30000)\n                        .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\n                        .referrer(&quot;http://www.google.com&quot;)\n                        .get().select(&quot;div.hAyfc:nth-child(4) &gt; span:nth-child(2) &gt; div:nth-child(1) &gt; span:nth-child(1)&quot;)\n                        .first()\n                        .ownText();\n\n                newversion = newversiondot.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\n\n            } catch (IOException e) {\n                Log.d(&quot;TAG NEW&quot;, &quot;run: &quot; + e);\n            }\n\n            final String finalNewversion = newversion;\n            final String finalNewversiondot = newversiondot;\n            runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    try {\n                        if (Integer.parseInt(finalNewversion) &gt; Integer.parseInt(getApplicationContext().getPackageManager().getPackageInfo(BuildConfig.APPLICATION_ID, 0).versionName.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;))) {\n                            showDialog(UsersActivity.this, &quot;Version: &quot;+finalNewversiondot);\n                        }\n                    } catch (PackageManager.NameNotFoundException e) {\n                        e.printStackTrace();\n                    }\n                }\n            });\n        }\n    }).start();\n}\n</code></pre>\n"}],"owner":{"account_id":875806,"reputation":12532,"user_id":925480,"accept_rate":87,"display_name":"xDragonZ"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111611,"favorite_count":0,"down_vote_count":0,"up_vote_count":61,"accepted_answer_id":50251940,"answer_count":12,"score":61,"last_activity_date":1691537171,"creation_date":1315125047,"question_id":7298106,"body_markdown":"I want to add a &quot;Check for update&quot; button in apps so that when someone clicks it, it will display a toast message / progress dialog for checking the app&#39;s version. \r\n\r\nIf new version is found the apps will auto download it to the phone and let user to  manually install the updated apps.\r\n\r\nOr any others method will do as long as it can check for latest version and notify the user to update.\r\n\r\n--------\r\n\r\n**Update:** Now you can do this inside your app using https://developer.android.com/guide/playcore/in-app-updates\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>I want to add a \"Check for update\" button in apps so that when someone clicks it, it will display a toast message / progress dialog for checking the app's version. </p>\n\n<p>If new version is found the apps will auto download it to the phone and let user to  manually install the updated apps.</p>\n\n<p>Or any others method will do as long as it can check for latest version and notify the user to update.</p>\n\n<hr>\n\n<p><strong>Update:</strong> Now you can do this inside your app using <a href=\"https://developer.android.com/guide/playcore/in-app-updates\" rel=\"noreferrer\">https://developer.android.com/guide/playcore/in-app-updates</a></p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":1188523,"reputation":14452,"user_id":1161948,"accept_rate":92,"display_name":"ThisClark"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1441228098,"creation_date":1441138011,"answer_id":32340038,"question_id":32334699,"body_markdown":"I have no experience with .ach files, so I&#39;m going off of this resource: [AAP201 - ACH File Formatting][1]\r\n\r\nA record is apparently 94 characters with standard indexes marking sections of data. There are a variety of sections however where the indexes mean different things. This means you probably have to create conditions to not only identify sections or blocks but also handle them differently depending on the content inside. I&#39;ll show two sections I came across, [page 11][1] and [page 19][2], and one snippet of code.\r\n\r\n#File Header Records\r\n\r\n[![enter image description here][3]][3]\r\n\r\nIf your task is simply to break each line into its parts, then it appears you can substring the necessary parts from your line string:\r\n\r\n\tString line = scanner.nextLine();\r\n\tString recordType = \t\t\t\tline.substring(0,1);\r\n\tString priorityCode = \t\t\t\tline.substring(1,2);\r\n\tString immediateDestination = \t\tline.substring(3,12);\r\n\tString immediateOrigin = \t\t\tline.substring(13,22);\r\n\tString fileCreationDate = \t\t\tline.substring(23,28);\r\n\tString fileCreationTime = \t\t\tline.substring(29,32);\r\n\tString fileIdModifier = \t\t\tline.substring(33,34);\r\n\tString recordSize = \t\t\t\tline.substring(34,36);\r\n\tString blockingFactor = \t\t\tline.substring(37,38);\r\n\tString formatCode = \t\t\t\tline.substring(39,40);\r\n\tString immediateDestinationNumber =\tline.substring(40,62);\r\n\tString immediateOriginName = \t\tline.substring(63,85);\r\n\tString referenceCodeO = \t\t\tline.substring(86,93);\r\n\r\nI&#39;ll leave data type parsing up to you - you know, in case you need integers rather than strings or something.\r\n\r\nThere are some important &quot;block&quot; rules on [page 4][4] of the above reference. You&#39;ll have to account for these too probably:\r\n\r\nAn ACH file must be &quot;BLOCKED&quot;&lt;br&gt;\r\n- Contain enough ACH records to form a complete &quot;block&quot; (10 records = 1 block = 940 character)&lt;br&gt;\r\n- All records within each ACH file are counted&lt;br&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* file header, batch header, entry detail, addenda, batch control and file control&lt;br&gt;\r\n – If total number of records do not equal a complete block, &quot;9 filler records&quot; must be added to complete the block&lt;br&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* 94 characters of 9&#39;s = One &quot;9 filler record&quot;&lt;br&gt;\r\n\r\n    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999\r\n\r\n#Company Batch Header\r\n\r\n[![enter image description here][5]][5]\r\n\r\nYour problem is growing in size and complexity as you need to set conditions to handle a variety of headers. It&#39;s really beyond the scope of my ability where I sit. It seems you&#39;ve got to get familiar with their documentation and the ACH blocks you&#39;ll be working with.\r\n\r\n\r\n  [1]: https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=11\r\n  [2]: https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=19\r\n  [3]: http://i.stack.imgur.com/wkKLy.png\r\n  [4]: https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=4\r\n  [5]: http://i.stack.imgur.com/AqPSk.png","title":"Assistance with work - Upload file (gui), process file, parse file - Over my head","body":"<p>I have no experience with .ach files, so I'm going off of this resource: <a href=\"https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=11\" rel=\"nofollow noreferrer\">AAP201 - ACH File Formatting</a></p>\n\n<p>A record is apparently 94 characters with standard indexes marking sections of data. There are a variety of sections however where the indexes mean different things. This means you probably have to create conditions to not only identify sections or blocks but also handle them differently depending on the content inside. I'll show two sections I came across, <a href=\"https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=11\" rel=\"nofollow noreferrer\">page 11</a> and <a href=\"https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=19\" rel=\"nofollow noreferrer\">page 19</a>, and one snippet of code.</p>\n\n<h1>File Header Records</h1>\n\n<p><a href=\"https://i.stack.imgur.com/wkKLy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wkKLy.png\" alt=\"enter image description here\"></a></p>\n\n<p>If your task is simply to break each line into its parts, then it appears you can substring the necessary parts from your line string:</p>\n\n<pre><code>String line = scanner.nextLine();\nString recordType =                 line.substring(0,1);\nString priorityCode =               line.substring(1,2);\nString immediateDestination =       line.substring(3,12);\nString immediateOrigin =            line.substring(13,22);\nString fileCreationDate =           line.substring(23,28);\nString fileCreationTime =           line.substring(29,32);\nString fileIdModifier =             line.substring(33,34);\nString recordSize =                 line.substring(34,36);\nString blockingFactor =             line.substring(37,38);\nString formatCode =                 line.substring(39,40);\nString immediateDestinationNumber = line.substring(40,62);\nString immediateOriginName =        line.substring(63,85);\nString referenceCodeO =             line.substring(86,93);\n</code></pre>\n\n<p>I'll leave data type parsing up to you - you know, in case you need integers rather than strings or something.</p>\n\n<p>There are some important \"block\" rules on <a href=\"https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=4\" rel=\"nofollow noreferrer\">page 4</a> of the above reference. You'll have to account for these too probably:</p>\n\n<p>An ACH file must be \"BLOCKED\"<br>\n- Contain enough ACH records to form a complete \"block\" (10 records = 1 block = 940 character)<br>\n- All records within each ACH file are counted<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* file header, batch header, entry detail, addenda, batch control and file control<br>\n – If total number of records do not equal a complete block, \"9 filler records\" must be added to complete the block<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 94 characters of 9's = One \"9 filler record\"<br></p>\n\n<pre><code>9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999\n</code></pre>\n\n<h1>Company Batch Header</h1>\n\n<p><a href=\"https://i.stack.imgur.com/AqPSk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AqPSk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Your problem is growing in size and complexity as you need to set conditions to handle a variety of headers. It's really beyond the scope of my ability where I sit. It seems you've got to get familiar with their documentation and the ACH blocks you'll be working with.</p>\n"}],"owner":{"account_id":6882751,"reputation":698,"user_id":5288966,"accept_rate":84,"display_name":"jesric1029"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":32340038,"answer_count":1,"score":2,"last_activity_date":1691536158,"creation_date":1441118997,"question_id":32334699,"body_markdown":"This is my first post and while I wish it could be something helpful instead I am required to ask for help. I have been given a projcet for work which is a bit out of my depth. The project requires me to create:\r\n\r\nNote that any data used in the question or answers has been sanitized and replaced with dummy sample data.\r\n\r\n1. A GUI where a user can browse for an input a file. (This part is done).\r\n2. A process to take the file (will be .ach or NACHA) and then select lines from that file and write them to a new file based on some conditions. (Some lines will be written once, some more than once). \r\n\r\nI have no real idea how to proceed. I know that I need to read line by line and somehow check for conditions to be met, then loop and check again. I will first share my code so far, then an example of the type of file I need to process. \r\n\r\n\r\n    \r\n    package nacha_batch_project;\r\n    \r\n    import java.awt.BorderLayout;\r\n    import java.awt.Container;\r\n    import java.awt.Font;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.util.Scanner;\r\n    \r\n    import javax.swing.JFileChooser;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    \r\n    \r\n    \r\n    public class NACHAFileReader {\r\n    \r\n    \r\n      public static void main(String args[]) throws Exception{\r\n        JFrame frame = new JFrame(&quot;JFileChooser Popup&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        Container contentPane = frame.getContentPane();\r\n    \r\n        final JLabel directoryLabel = new JLabel(&quot; &quot;);\r\n        directoryLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD | Font.ITALIC, 36));\r\n        contentPane.add(directoryLabel, BorderLayout.NORTH);\r\n    \r\n        final JLabel filenameLabel = new JLabel(&quot; &quot;);\r\n        filenameLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD | Font.ITALIC, 36));\r\n        contentPane.add(filenameLabel, BorderLayout.SOUTH);\r\n    \r\n        JFileChooser fileChooser = new JFileChooser(&quot;.&quot;);\r\n        fileChooser.setControlButtonsAreShown(false);\r\n        contentPane.add(fileChooser, BorderLayout.CENTER);\r\n    \r\n        ActionListener actionListener = new ActionListener() {\r\n          public void actionPerformed(ActionEvent actionEvent) {\r\n            JFileChooser theFileChooser = (JFileChooser) actionEvent\r\n                .getSource();\r\n            String command = actionEvent.getActionCommand();\r\n            if (command.equals(JFileChooser.APPROVE_SELECTION)) {\r\n              File selectedFile = theFileChooser.getSelectedFile(); \r\n              //Scanner with loop to read lines\r\n              \r\n              try{\r\n            \t  \r\n            \t  Scanner scanner = new Scanner(selectedFile);\r\n            \t  \r\n            \t  int count=0;\r\n            \t  \r\n            \t  while (scanner.hasNextLine()){\r\n            \t\t  \r\n            \t\t  String line = scanner.nextLine();\r\n            \t\t  count++;\r\n            \t\t  System.out.println(line);\r\n            \t\t  \r\n            \t\t  \r\n            \t\t  \r\n            \t  }\r\n            \tSystem.out.println(&quot;Total Line Count: &quot;+count);\r\n            \t  scanner.close();\r\n              }\r\n              catch (FileNotFoundException e){\r\n            \t  \r\n            \t  \r\n            \t  e.printStackTrace();\r\n            \t  \r\n              }\r\n              \r\n            } else if (command.equals(JFileChooser.CANCEL_SELECTION)) {\r\n              directoryLabel.setText(&quot; &quot;);\r\n              filenameLabel.setText(&quot; &quot;);\r\n            }\r\n          }\r\n        };\r\n        fileChooser.addActionListener(actionListener);\r\n    \r\n        frame.pack();\r\n        frame.setVisible(true);  \t\t\r\n        \r\n      \t\t\r\n      \t}\r\n      \r\n    }\r\n\r\n\r\nAn example of a file that I would input would look much like this. \r\n\r\n\r\n    101 0910000438386C094101WELLS Random BANK, NA   EMMAM                  WFD     \r\n    5225Bank Bank AM               5222222222222222 PIT   150810150810   \r\n    62709100038858322223883      0000222222222WW1         Guy1  Name1\r\n    62792932838828392939293      3822222222222223         Guy2  Name2   \r\n    822500000100091000010000000001050000000000005133133497                         \r\n    9000001000001000000010009100001000000000105000000000000                                      99999999999999999999999999999999999999999999999999999999999999999999999999999999\r\n    (More of these lines of 9999)\r\n\r\n\r\n\r\nSo I would need to pull that 500 number and attach the first 627 number as one batch, then for the next batch pull the 500 number again and the second 627 number an so on. \r\n\r\n\r\n\r\nAnyone have any advice on how I could achieve this or at least the direction to take? ","title":"Assistance with work - Upload file (gui), process file, parse file - Over my head","body":"<p>This is my first post and while I wish it could be something helpful instead I am required to ask for help. I have been given a projcet for work which is a bit out of my depth. The project requires me to create:</p>\n<p>Note that any data used in the question or answers has been sanitized and replaced with dummy sample data.</p>\n<ol>\n<li>A GUI where a user can browse for an input a file. (This part is done).</li>\n<li>A process to take the file (will be .ach or NACHA) and then select lines from that file and write them to a new file based on some conditions. (Some lines will be written once, some more than once).</li>\n</ol>\n<p>I have no real idea how to proceed. I know that I need to read line by line and somehow check for conditions to be met, then loop and check again. I will first share my code so far, then an example of the type of file I need to process.</p>\n<pre><code>package nacha_batch_project;\n\nimport java.awt.BorderLayout;\nimport java.awt.Container;\nimport java.awt.Font;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Scanner;\n\nimport javax.swing.JFileChooser;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\n\n\n\npublic class NACHAFileReader {\n\n\n  public static void main(String args[]) throws Exception{\n    JFrame frame = new JFrame(&quot;JFileChooser Popup&quot;);\n    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    Container contentPane = frame.getContentPane();\n\n    final JLabel directoryLabel = new JLabel(&quot; &quot;);\n    directoryLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD | Font.ITALIC, 36));\n    contentPane.add(directoryLabel, BorderLayout.NORTH);\n\n    final JLabel filenameLabel = new JLabel(&quot; &quot;);\n    filenameLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD | Font.ITALIC, 36));\n    contentPane.add(filenameLabel, BorderLayout.SOUTH);\n\n    JFileChooser fileChooser = new JFileChooser(&quot;.&quot;);\n    fileChooser.setControlButtonsAreShown(false);\n    contentPane.add(fileChooser, BorderLayout.CENTER);\n\n    ActionListener actionListener = new ActionListener() {\n      public void actionPerformed(ActionEvent actionEvent) {\n        JFileChooser theFileChooser = (JFileChooser) actionEvent\n            .getSource();\n        String command = actionEvent.getActionCommand();\n        if (command.equals(JFileChooser.APPROVE_SELECTION)) {\n          File selectedFile = theFileChooser.getSelectedFile(); \n          //Scanner with loop to read lines\n          \n          try{\n              \n              Scanner scanner = new Scanner(selectedFile);\n              \n              int count=0;\n              \n              while (scanner.hasNextLine()){\n                  \n                  String line = scanner.nextLine();\n                  count++;\n                  System.out.println(line);\n                  \n                  \n                  \n              }\n            System.out.println(&quot;Total Line Count: &quot;+count);\n              scanner.close();\n          }\n          catch (FileNotFoundException e){\n              \n              \n              e.printStackTrace();\n              \n          }\n          \n        } else if (command.equals(JFileChooser.CANCEL_SELECTION)) {\n          directoryLabel.setText(&quot; &quot;);\n          filenameLabel.setText(&quot; &quot;);\n        }\n      }\n    };\n    fileChooser.addActionListener(actionListener);\n\n    frame.pack();\n    frame.setVisible(true);         \n    \n        \n    }\n  \n}\n</code></pre>\n<p>An example of a file that I would input would look much like this.</p>\n<pre><code>101 0910000438386C094101WELLS Random BANK, NA   EMMAM                  WFD     \n5225Bank Bank AM               5222222222222222 PIT   150810150810   \n62709100038858322223883      0000222222222WW1         Guy1  Name1\n62792932838828392939293      3822222222222223         Guy2  Name2   \n822500000100091000010000000001050000000000005133133497                         \n9000001000001000000010009100001000000000105000000000000                                      99999999999999999999999999999999999999999999999999999999999999999999999999999999\n(More of these lines of 9999)\n</code></pre>\n<p>So I would need to pull that 500 number and attach the first 627 number as one batch, then for the next batch pull the 500 number again and the second 627 number an so on.</p>\n<p>Anyone have any advice on how I could achieve this or at least the direction to take?</p>\n"},{"tags":["java","sql","db2","querydsl"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691391947,"post_id":76849215,"comment_id":135479707,"body_markdown":"*but rounding is important for me* Please explain","body":"<i>but rounding is important for me</i> Please explain"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691392103,"post_id":76849215,"comment_id":135479734,"body_markdown":"explained this in detail","body":"explained this in detail"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691393300,"post_id":76849215,"comment_id":135479906,"body_markdown":"&quot;Incorrect&quot; in what way?","body":"&quot;Incorrect&quot; in what way?"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691393669,"post_id":76849215,"comment_id":135479964,"body_markdown":"explained this in detail","body":"explained this in detail"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691394061,"post_id":76849215,"comment_id":135480022,"body_markdown":"Exactly, February and March are the same quarter. The four quarters are: January to March, April to June, July to September, and October to December","body":"Exactly, February and March are the same quarter. The four quarters are: January to March, April to June, July to September, and October to December"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691394158,"post_id":76849215,"comment_id":135480043,"body_markdown":"Sorry that comment was not quite what I meant. It&#39;s an ordering strategy and I don&#39;t see how rounding is relevant","body":"Sorry that comment was not quite what I meant. It&#39;s an ordering strategy and I don&#39;t see how rounding is relevant"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691394974,"post_id":76849215,"comment_id":135480194,"body_markdown":"Rounding is necessary because without it, the 4th and 5th months fall into the first quarter, and only the 12th month falls into the fourth quarter","body":"Rounding is necessary because without it, the 4th and 5th months fall into the first quarter, and only the 12th month falls into the fourth quarter"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691395538,"post_id":76849215,"comment_id":135480286,"body_markdown":"*4th and 5th months fall into the first quarter* Correct. Quartile index 1. *12th month* quartile index 3","body":"<i>4th and 5th months fall into the first quarter</i> Correct. Quartile index 1. <i>12th month</i> quartile index 3"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691396282,"post_id":76849215,"comment_id":135480445,"body_markdown":"Then 3th and 4th months have index 1 but 3th month should be 1 quarter and 4th should be 2nd quarter.","body":"Then 3th and 4th months have index 1 but 3th month should be 1 quarter and 4th should be 2nd quarter."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691396731,"post_id":76849215,"comment_id":135480536,"body_markdown":"No, 3rd month March is in quartile 0","body":"No, 3rd month March is in quartile 0"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691397137,"post_id":76849215,"comment_id":135480625,"body_markdown":"I agree with you, your logic has sense but I have this data) Updated my question.","body":"I agree with you, your logic has sense but I have this data) Updated my question."}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691402684,"creation_date":1691402684,"answer_id":76850646,"question_id":76849215,"body_markdown":"I see the problem now I did a demo in pure Java using *your* dates. It&#39;s because `java.time.Month` is *not* zero-indexed. Run the following and note the correction (subtraction, not rounding) makes the results as they should be:\r\n\r\n```\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.Map;\r\nimport java.util.Comparator;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport static java.util.stream.Collectors.*;\r\n\r\npublic class BirthdayQuartiles {\r\n    record Birthday(String name, String date) {\r\n        static DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;MM/dd/uuuu&quot;);\r\n        final static String bformat = &quot;%s : %s (%s)&quot;;\r\n        LocalDate getAsLocalDate() {\r\n            return LocalDate.parse(date, dtf);\r\n        }\r\n        @Override\r\n        public String toString() {\r\n            return bformat.formatted(name, date, getAsLocalDate().getMonth());\r\n        }\r\n    }\r\n    public static void main(String[] args) throws Exception {\r\n        Birthday[] birthdays = {\r\n            new Birthday(&quot;Charles&quot;, &quot;01/11/2023&quot;),\r\n            new Birthday(&quot;Diana&quot;, &quot;03/30/2023&quot;),\r\n            new Birthday(&quot;Margaret&quot;, &quot;04/29/2023&quot;),\r\n            new Birthday(&quot;Edward&quot;, &quot;03/31/2023&quot;),\r\n            new Birthday(&quot;Beatrice&quot;, &quot;03/30/2023&quot;),\r\n            new Birthday(&quot;William&quot;, &quot;08/18/2023&quot;)\r\n        };\r\n        Map&lt;Integer, List&lt;Birthday&gt;&gt; quartiles = Arrays.stream(birthdays)\r\n            .sorted(Comparator.comparing(Birthday::getAsLocalDate))\r\n            // Adjust key as java.time.Month is NOT zero-indexed\r\n            .collect(groupingBy(b -&gt;(b.getAsLocalDate().getMonth().getValue()-1)/3, toList()));\r\n\r\n        final String quartileFormat = &quot;Birthday(s) in quartile %d: %s%n&quot;;\r\n        quartiles.entrySet().stream()\r\n            .forEach(e -&gt;System.out.println(quartileFormat.formatted(e.getKey(), e.getValue())));  \r\n    }\r\n}\r\n```","title":"QueryDSL: Syntax error parsing during rounding","body":"<p>I see the problem now I did a demo in pure Java using <em>your</em> dates. It's because <code>java.time.Month</code> is <em>not</em> zero-indexed. Run the following and note the correction (subtraction, not rounding) makes the results as they should be:</p>\n<pre><code>import java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Map;\nimport java.util.Comparator;\nimport java.util.Arrays;\nimport java.util.List;\nimport static java.util.stream.Collectors.*;\n\npublic class BirthdayQuartiles {\n    record Birthday(String name, String date) {\n        static DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;MM/dd/uuuu&quot;);\n        final static String bformat = &quot;%s : %s (%s)&quot;;\n        LocalDate getAsLocalDate() {\n            return LocalDate.parse(date, dtf);\n        }\n        @Override\n        public String toString() {\n            return bformat.formatted(name, date, getAsLocalDate().getMonth());\n        }\n    }\n    public static void main(String[] args) throws Exception {\n        Birthday[] birthdays = {\n            new Birthday(&quot;Charles&quot;, &quot;01/11/2023&quot;),\n            new Birthday(&quot;Diana&quot;, &quot;03/30/2023&quot;),\n            new Birthday(&quot;Margaret&quot;, &quot;04/29/2023&quot;),\n            new Birthday(&quot;Edward&quot;, &quot;03/31/2023&quot;),\n            new Birthday(&quot;Beatrice&quot;, &quot;03/30/2023&quot;),\n            new Birthday(&quot;William&quot;, &quot;08/18/2023&quot;)\n        };\n        Map&lt;Integer, List&lt;Birthday&gt;&gt; quartiles = Arrays.stream(birthdays)\n            .sorted(Comparator.comparing(Birthday::getAsLocalDate))\n            // Adjust key as java.time.Month is NOT zero-indexed\n            .collect(groupingBy(b -&gt;(b.getAsLocalDate().getMonth().getValue()-1)/3, toList()));\n\n        final String quartileFormat = &quot;Birthday(s) in quartile %d: %s%n&quot;;\n        quartiles.entrySet().stream()\n            .forEach(e -&gt;System.out.println(quartileFormat.formatted(e.getKey(), e.getValue())));  \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691535883,"creation_date":1691535883,"answer_id":76863650,"question_id":76849215,"body_markdown":"Changed sql-template. As it turned out, you need to take out a variable in the template itself :)\r\n\r\n      List&lt;Person&gt; sortedPersons = query.selectFrom(person)\r\n                                       .orderBy(Expressions.dateTemplate(Integer.class, &quot;SQL(&#39;QUARTER(?)&#39;, {0})&quot;, person.birthday.value).asc())\r\n                                        .fetch();","title":"QueryDSL: Syntax error parsing during rounding","body":"<p>Changed sql-template. As it turned out, you need to take out a variable in the template itself :)</p>\n<pre><code>  List&lt;Person&gt; sortedPersons = query.selectFrom(person)\n                                   .orderBy(Expressions.dateTemplate(Integer.class, &quot;SQL('QUARTER(?)', {0})&quot;, person.birthday.value).asc())\n                                    .fetch();\n</code></pre>\n"}],"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76863650,"answer_count":2,"score":1,"last_activity_date":1691535883,"creation_date":1691389165,"question_id":76849215,"body_markdown":"    @Embeddable\r\n    public class Birthday {\r\n    \r\n        private LocalDate value;\r\n    \r\n        // Constructors, getters and setters\r\n    }\r\n\r\nEntity:\r\n\r\n    @Entity\r\n    public class Person {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        private Birthday birthday;\r\n    \r\n         // Constructors, getters and setters\r\n    }\r\nQuery with deviding by 3: \r\n\r\n    List&lt;Person&gt; sortedPersons = query.selectFrom(person)\r\n                                   .orderBy(person.birthday.value.month().divide(3).ceil().asc())\r\n                                    .fetch();\r\n\r\nQuery using template:\r\n\r\n  \r\n\r\n     List&lt;Person&gt; sortedPersons = query.selectFrom(person)\r\n                                       .orderBy(Expressions.dateTemplate(Integer.class, &quot;QUARTER({0})&quot;, person.birthday.value).asc())\r\n                                        .fetch();\r\n\r\nError:\r\n\r\n    Caused by: org.eclipse.persistence.exceptions.JPQLException:\r\n    Exception Description: Syntax error parsing [select \r\n    from Person person\r\n    order by ceil(extract(month from person.birthday.value) / 3) asc].\r\n    [3165, 3254] The order by item is not a valid expression.\r\n        at org.eclipse.persistence.internal.jpa.jpql.HermesParser.buildException(HermesParser.java:157) ~[com.ibm.websphere.appserver.thirdparty.eclipselink.2.7_1.0.76.jar:?]\r\n        at [internal classes]\r\n        at com.querydsl.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:101) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\r\n        at com.querydsl.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:94) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\r\n        at com.querydsl.jpa.impl.AbstractJPAQuery.fetch(AbstractJPAQuery.java:201) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\r\n\r\nBirthday field is stored in the database as DATE\r\n\r\nThe problem is that if I remove method `.ceil()` then everything works great, but rounding is important for me without round up my query return incorrect data (I need to sort by quarter). I tried to use templates for this one but I did not help.\r\n\r\nIf I do not use `.ceil` I have this data with such ordering.\r\n\r\n 1. 01/11/2023\r\n 2. 03/30/2023\r\n 3. 04/29/2023\r\n 4. 03/31/2023\r\n 5. 03/30/2023\r\n 6. 08/18/2023","title":"QueryDSL: Syntax error parsing during rounding","body":"<pre><code>@Embeddable\npublic class Birthday {\n\n    private LocalDate value;\n\n    // Constructors, getters and setters\n}\n</code></pre>\n<p>Entity:</p>\n<pre><code>@Entity\npublic class Person {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private Birthday birthday;\n\n     // Constructors, getters and setters\n}\n</code></pre>\n<p>Query with deviding by 3:</p>\n<pre><code>List&lt;Person&gt; sortedPersons = query.selectFrom(person)\n                               .orderBy(person.birthday.value.month().divide(3).ceil().asc())\n                                .fetch();\n</code></pre>\n<p>Query using template:</p>\n<pre><code> List&lt;Person&gt; sortedPersons = query.selectFrom(person)\n                                   .orderBy(Expressions.dateTemplate(Integer.class, &quot;QUARTER({0})&quot;, person.birthday.value).asc())\n                                    .fetch();\n</code></pre>\n<p>Error:</p>\n<pre><code>Caused by: org.eclipse.persistence.exceptions.JPQLException:\nException Description: Syntax error parsing [select \nfrom Person person\norder by ceil(extract(month from person.birthday.value) / 3) asc].\n[3165, 3254] The order by item is not a valid expression.\n    at org.eclipse.persistence.internal.jpa.jpql.HermesParser.buildException(HermesParser.java:157) ~[com.ibm.websphere.appserver.thirdparty.eclipselink.2.7_1.0.76.jar:?]\n    at [internal classes]\n    at com.querydsl.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:101) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\n    at com.querydsl.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:94) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\n    at com.querydsl.jpa.impl.AbstractJPAQuery.fetch(AbstractJPAQuery.java:201) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\n</code></pre>\n<p>Birthday field is stored in the database as DATE</p>\n<p>The problem is that if I remove method <code>.ceil()</code> then everything works great, but rounding is important for me without round up my query return incorrect data (I need to sort by quarter). I tried to use templates for this one but I did not help.</p>\n<p>If I do not use <code>.ceil</code> I have this data with such ordering.</p>\n<ol>\n<li>01/11/2023</li>\n<li>03/30/2023</li>\n<li>04/29/2023</li>\n<li>03/31/2023</li>\n<li>03/30/2023</li>\n<li>08/18/2023</li>\n</ol>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":324114,"reputation":12953,"user_id":644518,"accept_rate":61,"display_name":"ajm"},"score":0,"creation_date":1479917012,"post_id":40768530,"comment_id":68762131,"body_markdown":"@J.West I generally use roles only. But, since, these are entirely different sets of users, we don&#39;t want to keep them together. Admins at max will have 5 columns and customers min will have 20-30 columns. So, you see the difference there.","body":"@J.West I generally use roles only. But, since, these are entirely different sets of users, we don&#39;t want to keep them together. Admins at max will have 5 columns and customers min will have 20-30 columns. So, you see the difference there."},{"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"score":0,"creation_date":1479917269,"post_id":40768530,"comment_id":68762309,"body_markdown":"I do not know what database you will use, but AFAIK with major providers (Oracle, PostgreSQL, MariaDB) there is no harm having many NULL columns in a record.","body":"I do not know what database you will use, but AFAIK with major providers (Oracle, PostgreSQL, MariaDB) there is no harm having many NULL columns in a record."},{"owner":{"account_id":8850640,"reputation":686,"user_id":6610036,"accept_rate":93,"display_name":"Trevor Bye"},"score":1,"creation_date":1479918655,"post_id":40768530,"comment_id":68763260,"body_markdown":"@ashishjmeshram The answer below is what I would suggest doing. Like he is saying, it doesn&#39;t make a difference if you persist an admin user into the same table and leave all the extra columns as `null`. Another issue with multiple login pages is that there will be no way to prevent someone from visiting either URI, and while a user couldn&#39;t login if they weren&#39;t an admin, it would still be confusing if someone landed on that page expecting to be able to login.","body":"@ashishjmeshram The answer below is what I would suggest doing. Like he is saying, it doesn&#39;t make a difference if you persist an admin user into the same table and leave all the extra columns as <code>null</code>. Another issue with multiple login pages is that there will be no way to prevent someone from visiting either URI, and while a user couldn&#39;t login if they weren&#39;t an admin, it would still be confusing if someone landed on that page expecting to be able to login."}],"answers":[{"tags":[],"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1479917524,"creation_date":1479917130,"answer_id":40769140,"question_id":40768530,"body_markdown":"It is really a bad idea to have different login pages for Spring security, because it is not the way it is designed for. You are going to fall into trouble to define the authentication entry point to use and will need a lot of boiling plate. According to your other requirements, I would propose you the following way:\r\n\r\n* use one single login page with one single `AuthenticationManager` (the default `ProviderManager` will be fine)\r\n* configure it with two different `AuthenticationProvider`s, both being `DaoAuthenticationProvider`, each pointing on one of you 2 user tables\r\n* configure those provider to automatically set different roles, ROLE_ADMIN for the former that will process admins, ROLE_USER for the latter\r\n\r\nThat way you fully rely on SpringSecurity infrastructure with as little modifications as possible to meet your requirements.\r\n\r\nBut you should also wonder whether you really need different databases. At least for the major providers (Oracle, PostgreSQL, MariaDB, ...) there is no harm in having many null columns in a record. IMHO you should do a serious analysis to compare both ways, either one single table (much simpler to setup for Spring Security) or two tables.","title":"How to use spring security to authenticate two different types of users?","body":"<p>It is really a bad idea to have different login pages for Spring security, because it is not the way it is designed for. You are going to fall into trouble to define the authentication entry point to use and will need a lot of boiling plate. According to your other requirements, I would propose you the following way:</p>\n\n<ul>\n<li>use one single login page with one single <code>AuthenticationManager</code> (the default <code>ProviderManager</code> will be fine)</li>\n<li>configure it with two different <code>AuthenticationProvider</code>s, both being <code>DaoAuthenticationProvider</code>, each pointing on one of you 2 user tables</li>\n<li>configure those provider to automatically set different roles, ROLE_ADMIN for the former that will process admins, ROLE_USER for the latter</li>\n</ul>\n\n<p>That way you fully rely on SpringSecurity infrastructure with as little modifications as possible to meet your requirements.</p>\n\n<p>But you should also wonder whether you really need different databases. At least for the major providers (Oracle, PostgreSQL, MariaDB, ...) there is no harm in having many null columns in a record. IMHO you should do a serious analysis to compare both ways, either one single table (much simpler to setup for Spring Security) or two tables.</p>\n"},{"tags":[],"owner":{"account_id":12549986,"reputation":1121,"user_id":9487470,"display_name":"Adesuyi Ayodeji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691535424,"creation_date":1691535424,"answer_id":76863628,"question_id":40768530,"body_markdown":"I just came across this question due to a problem I am also facing. Here is how I solved it. A little unconventional but very efficient. So what I did was To create 2 constructors in the UserDetails class that extends the UserDetails. \r\n\r\nOne that takes the Admin user type:\r\n\r\n    public UserDataUserDetails(Admin admin) {\r\n        this.username = admin.getUsername();\r\n        this.pwd = admin.getPassword();\r\n        this.authorities = Arrays.stream(admin.getRole().toString().split(&quot;,&quot;))\r\n                .map(SimpleGrantedAuthority::new)\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\nSecond that takes the Customer user type:\r\n\r\n    public UserDataUserDetails(User user) {\r\n        this.username = user.getUsername();\r\n        this.pwd = user.getPassword();\r\n        this.authorities = Arrays.stream(user.getRole().toString().split(&quot;,&quot;))\r\n                .map(SimpleGrantedAuthority::new)\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\nThen I created 2 identical components that serves individual scenarios as stated in the snippet below. Explanation of the snippets: They are from 2 separate classes that extends UserDetailsService each.\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Optional&lt;User&gt; user = userRepository.findByUsernameEquals(username);\r\n        return user.map(UserDataUserDetails::new)\r\n                .orElseThrow(() -&gt; new GeneralErrorResponse(HttpStatus.NOT_FOUND, false, &quot;Invalid User&quot;, new String[]{&quot;User with provided user name, \\&#39;&quot; + username + &quot;\\&#39; not found in our database!&quot;}));\r\n    }\r\n\r\n    @Autowired\r\n    private AdminRepository adminRepository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Optional&lt;Admin&gt; admin = adminRepository.findAdminWithUsername(username);\r\n        return admin.map(UserDataUserDetails::new)\r\n                .orElseThrow(() -&gt; new GeneralErrorResponse(HttpStatus.NOT_FOUND, false, &quot;Invalid User&quot;, new String[]{&quot;User with provided user name, \\&#39;&quot; + username + &quot;\\&#39; not found in our database!&quot;}));\r\n    }\r\n\r\n\r\nSo finally! What you want to do in your JwtAuthenticationFilter is:\r\n\r\n    @Autowired\r\n    private UserModelDetailsService userDetailsService;\r\n    @Autowired\r\n    private AdminModelDetailsService adminModelDetailsService;\r\n\r\n    UserDetails user = null;\r\n            if (type.equals(Role.SUPER.toString()) || type.equals(Role.ADMIN.toString())){\r\n                user = this.adminModelDetailsService.loadUserByUsername(username);\r\n            } else {\r\n                user = this.userDetailsService.loadUserByUsername(username);\r\n            }\r\n\r\n\r\n\r\nI hope this helps","title":"How to use spring security to authenticate two different types of users?","body":"<p>I just came across this question due to a problem I am also facing. Here is how I solved it. A little unconventional but very efficient. So what I did was To create 2 constructors in the UserDetails class that extends the UserDetails.</p>\n<p>One that takes the Admin user type:</p>\n<pre><code>public UserDataUserDetails(Admin admin) {\n    this.username = admin.getUsername();\n    this.pwd = admin.getPassword();\n    this.authorities = Arrays.stream(admin.getRole().toString().split(&quot;,&quot;))\n            .map(SimpleGrantedAuthority::new)\n            .collect(Collectors.toList());\n}\n</code></pre>\n<p>Second that takes the Customer user type:</p>\n<pre><code>public UserDataUserDetails(User user) {\n    this.username = user.getUsername();\n    this.pwd = user.getPassword();\n    this.authorities = Arrays.stream(user.getRole().toString().split(&quot;,&quot;))\n            .map(SimpleGrantedAuthority::new)\n            .collect(Collectors.toList());\n}\n</code></pre>\n<p>Then I created 2 identical components that serves individual scenarios as stated in the snippet below. Explanation of the snippets: They are from 2 separate classes that extends UserDetailsService each.</p>\n<pre><code>@Autowired\nprivate UserRepository userRepository;\n\n@Override\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n    Optional&lt;User&gt; user = userRepository.findByUsernameEquals(username);\n    return user.map(UserDataUserDetails::new)\n            .orElseThrow(() -&gt; new GeneralErrorResponse(HttpStatus.NOT_FOUND, false, &quot;Invalid User&quot;, new String[]{&quot;User with provided user name, \\'&quot; + username + &quot;\\' not found in our database!&quot;}));\n}\n\n@Autowired\nprivate AdminRepository adminRepository;\n\n@Override\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n    Optional&lt;Admin&gt; admin = adminRepository.findAdminWithUsername(username);\n    return admin.map(UserDataUserDetails::new)\n            .orElseThrow(() -&gt; new GeneralErrorResponse(HttpStatus.NOT_FOUND, false, &quot;Invalid User&quot;, new String[]{&quot;User with provided user name, \\'&quot; + username + &quot;\\' not found in our database!&quot;}));\n}\n</code></pre>\n<p>So finally! What you want to do in your JwtAuthenticationFilter is:</p>\n<pre><code>@Autowired\nprivate UserModelDetailsService userDetailsService;\n@Autowired\nprivate AdminModelDetailsService adminModelDetailsService;\n\nUserDetails user = null;\n        if (type.equals(Role.SUPER.toString()) || type.equals(Role.ADMIN.toString())){\n            user = this.adminModelDetailsService.loadUserByUsername(username);\n        } else {\n            user = this.userDetailsService.loadUserByUsername(username);\n        }\n</code></pre>\n<p>I hope this helps</p>\n"}],"owner":{"account_id":324114,"reputation":12953,"user_id":644518,"accept_rate":61,"display_name":"ajm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6734,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1691535424,"creation_date":1479915474,"question_id":40768530,"body_markdown":"In my spring boot application, I will have two different types of users i.e. \r\n\r\n 1. Admin users \r\n 2. customers\r\n\r\nThese users will be stored in two different tables. \r\nThese two tables will have only email id in common. Everything else will be different. \r\n\r\nAlso, the no. of customers will be huge like 1 to 5 Millions customers. While on the other hand, admin users will be very few like less than 10. Hence the two different tables. \r\n\r\nI want to have two different login pages. One at /customer/login for all the customer and another at /admin/login for all the admins. Login details should be authenticated using their respective tables. On login customers should go to /customer/home and admins should go to /admin/home. \r\n\r\nOn logout customer should be redirected to /customer/login and admin to /admin/login\r\n\r\nI am using java config for Spring security. How can this be done in spring security?\r\n\r\nBelow is my configuration for single user which works properly.\r\n\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserDetailsService userDetailsService;\r\n    \r\n        @Autowired\r\n        private AccessDecisionManager accessDecisionManager;\r\n    \r\n        @Autowired\r\n        private ApplicationProperties applicationProperties;\r\n    \r\n        @Bean\r\n        public Integer applicationSessionTimeout(){\r\n            return applicationProperties.getSecurity().getSessionTimeout();\r\n        }\r\n    \r\n        @Bean\r\n        @Autowired\r\n        public AccessDecisionManager accessDecisionManager(AccessDecisionVoterImpl accessDecisionVoter) {\r\n            List&lt;AccessDecisionVoter&lt;?&gt;&gt; accessDecisionVoters = new ArrayList&lt;AccessDecisionVoter&lt;?&gt;&gt;();\r\n            accessDecisionVoters.add(new WebExpressionVoter());\r\n    \t\taccessDecisionVoters.add(new AuthenticatedVoter());\r\n    \t\taccessDecisionVoters.add(accessDecisionVoter);\r\n            UnanimousBased accessDecisionManager = new UnanimousBased(accessDecisionVoters);\r\n    \t\treturn accessDecisionManager;\r\n        }\r\n    \r\n    \t@Override\r\n    \t@Autowired\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t\tauth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic PasswordEncoder passwordEncoder(){\r\n    \t\tPasswordEncoder passwordEncoder = new PasswordEncoder();\r\n    \t\tpasswordEncoder.setStringDigester(stringDigester());\r\n    \t\treturn passwordEncoder;\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic PooledStringDigester stringDigester() {\r\n    \t\tPooledStringDigester psd = new PooledStringDigester();\r\n    \r\n    \t\tpsd.setPoolSize(2);\r\n    \t\tpsd.setAlgorithm(&quot;SHA-256&quot;);\r\n    \t\tpsd.setIterations(1000);\r\n    \t\tpsd.setSaltSizeBytes(16);\r\n    \t\tpsd.setSaltGenerator(randomSaltGenerator());\r\n    \r\n    \t\treturn psd;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic RandomSaltGenerator randomSaltGenerator() {\r\n    \t\tRandomSaltGenerator randomSaltGenerator = new RandomSaltGenerator();\r\n    \t\treturn randomSaltGenerator;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void configure(WebSecurity web) throws Exception {\r\n    \t\tweb.ignoring()\r\n    \t\t\t\t.antMatchers(&quot;/static/**&quot;)\r\n    \t\t\t\t.antMatchers(&quot;/i18n/**&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp\r\n    \t\t\t.exceptionHandling().\r\n    \t\t\t\taccessDeniedPage(&quot;/accessDenied&quot;)\r\n    \t\t\t\t.and()\r\n    \t\t\t.authorizeRequests()\r\n    \t\t\t\t.accessDecisionManager(accessDecisionManager)\r\n    \t\t\t\t.antMatchers(&quot;/login**&quot;).permitAll()\r\n    \t\t\t\t.antMatchers(&quot;/error**&quot;).permitAll()\r\n    \t\t\t\t.antMatchers(&quot;/checkLogin**&quot;).permitAll()\r\n    \t\t\t\t.anyRequest().fullyAuthenticated()\r\n    \t\t\t\t.and()\r\n    \t\t\t.formLogin()\r\n    \t\t\t\t.loginPage(&quot;/login&quot;)\r\n    \t\t\t\t.loginProcessingUrl(&quot;/checkLogin&quot;)\r\n    \t\t\t\t.defaultSuccessUrl(&quot;/home?menu=homeMenuOption&quot;)\r\n                    .failureUrl(&quot;/login?login_error=1&quot;)\r\n    \t\t\t\t.usernameParameter(&quot;username&quot;)\r\n    \t\t\t\t.passwordParameter(&quot;password&quot;)\r\n    \t\t\t\t.permitAll()\r\n    \t\t        .and()\r\n    \t\t\t.logout()\r\n    \t\t\t\t.logoutUrl(&quot;/logout&quot;)\r\n    \t\t\t\t.logoutSuccessHandler(new LogoutSuccessHandlerImpl())\r\n    \t\t\t\t.deleteCookies(&quot;JSESSIONID&quot;)\r\n    \t\t\t\t.invalidateHttpSession(true)\r\n    \t\t\t\t.permitAll()\r\n    \t\t        .and()\r\n                .headers()\r\n    \t\t\t\t.frameOptions()\r\n    \t\t\t\t.disable()\r\n    \t\t    .and()\r\n                    .sessionManagement()\r\n                    .maximumSessions(1);\r\n    \t}\r\n    \r\n    }\r\n\r\nBelow is my UserDetailsService which checks in db for proper authentication.\r\n\r\n        \r\n    @Service(&quot;userDetailsService&quot;)\r\n    public class UserDetailsService implements org.springframework.security.core.userdetails.UserDetailsService {\r\n    \r\n    \tprivate static final Logger log = LoggerFactory.getLogger(UserDetailsService.class);\r\n    \r\n    \t@Autowired\r\n    \tprivate UserService userService;\r\n    \r\n        @Autowired\r\n        private ModuleService moduleService;\r\n    \r\n    \t@Override\r\n    \tpublic UserDetails loadUserByUsername(final String userName) throws UsernameNotFoundException, DataAccessException {\r\n    \t\tlog.debug(&quot;Authenticating : {}&quot;, userName);\r\n    \r\n    \t\tSecurityUser securityUser = null;\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\tUser user = userService.findUserByEmail(userName);\r\n    \r\n    \t\t\tif (user != null) {\r\n    \t\t\t\tlog.debug(&quot;User with the username {} FOUND &quot;, userName);\r\n    \t\t\t\tsecurityUser = new SecurityUser(user.getEmail(), user.getPassword(), true, true, true, true, getGrantedAuthorities(user.getRole().getId()));\r\n    \t\t\t\tsecurityUser.setUser(user);\r\n    \t\t\t} else {\r\n    \t\t\t\tlog.debug(&quot;User with the username {}  NOT FOUND&quot;, userName);\r\n    \t\t\t\tthrow new UsernameNotFoundException(&quot;Username not found.&quot;);\r\n    \t\t\t}\r\n            } catch (Exception e) {\r\n    \t\t\tlog.error(e.getMessage(), e);\r\n    \t\t}\r\n    \r\n    \t\treturn securityUser;\r\n    \t}\r\n    \r\n    \tprivate List&lt;GrantedAuthority&gt; getGrantedAuthorities(Long roleId) {\r\n            log.debug(&quot;Populating user authorities&quot;);\r\n    \r\n    \t\tList&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;GrantedAuthority&gt;();\r\n    \t\tList&lt;Module&gt; allModules = moduleService.findAllModules();\r\n    \t\tMap&lt;Long, Module&gt; moduleMap = new HashMap&lt;Long, Module&gt;();\r\n    \r\n    \t\tfor(Module module : allModules){\r\n    \t\t\tmoduleMap.put(module.getModuleId(), module);\r\n    \t\t}\r\n    \r\n    \t\tList&lt;ModuleOperation&gt; moduleOperationList = moduleService.findModuleOperationsByRoleId(roleId);\r\n    \r\n    \t\tfor (ModuleOperation moduleOperation : moduleOperationList) {\r\n    \t\t\tmoduleOperation.setModuleName(moduleMap.get(moduleOperation.getModuleId()).getModuleName());\r\n    \t\t\tauthorities.add(moduleOperation);\r\n    \t\t}\r\n    \r\n    \t\treturn authorities;\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"How to use spring security to authenticate two different types of users?","body":"<p>In my spring boot application, I will have two different types of users i.e. </p>\n\n<ol>\n<li>Admin users </li>\n<li>customers</li>\n</ol>\n\n<p>These users will be stored in two different tables. \nThese two tables will have only email id in common. Everything else will be different. </p>\n\n<p>Also, the no. of customers will be huge like 1 to 5 Millions customers. While on the other hand, admin users will be very few like less than 10. Hence the two different tables. </p>\n\n<p>I want to have two different login pages. One at /customer/login for all the customer and another at /admin/login for all the admins. Login details should be authenticated using their respective tables. On login customers should go to /customer/home and admins should go to /admin/home. </p>\n\n<p>On logout customer should be redirected to /customer/login and admin to /admin/login</p>\n\n<p>I am using java config for Spring security. How can this be done in spring security?</p>\n\n<p>Below is my configuration for single user which works properly.</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Autowired\n    private AccessDecisionManager accessDecisionManager;\n\n    @Autowired\n    private ApplicationProperties applicationProperties;\n\n    @Bean\n    public Integer applicationSessionTimeout(){\n        return applicationProperties.getSecurity().getSessionTimeout();\n    }\n\n    @Bean\n    @Autowired\n    public AccessDecisionManager accessDecisionManager(AccessDecisionVoterImpl accessDecisionVoter) {\n        List&lt;AccessDecisionVoter&lt;?&gt;&gt; accessDecisionVoters = new ArrayList&lt;AccessDecisionVoter&lt;?&gt;&gt;();\n        accessDecisionVoters.add(new WebExpressionVoter());\n        accessDecisionVoters.add(new AuthenticatedVoter());\n        accessDecisionVoters.add(accessDecisionVoter);\n        UnanimousBased accessDecisionManager = new UnanimousBased(accessDecisionVoters);\n        return accessDecisionManager;\n    }\n\n    @Override\n    @Autowired\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        PasswordEncoder passwordEncoder = new PasswordEncoder();\n        passwordEncoder.setStringDigester(stringDigester());\n        return passwordEncoder;\n    }\n\n    @Bean\n    public PooledStringDigester stringDigester() {\n        PooledStringDigester psd = new PooledStringDigester();\n\n        psd.setPoolSize(2);\n        psd.setAlgorithm(\"SHA-256\");\n        psd.setIterations(1000);\n        psd.setSaltSizeBytes(16);\n        psd.setSaltGenerator(randomSaltGenerator());\n\n        return psd;\n    }\n\n    @Bean\n    public RandomSaltGenerator randomSaltGenerator() {\n        RandomSaltGenerator randomSaltGenerator = new RandomSaltGenerator();\n        return randomSaltGenerator;\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring()\n                .antMatchers(\"/static/**\")\n                .antMatchers(\"/i18n/**\");\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .exceptionHandling().\n                accessDeniedPage(\"/accessDenied\")\n                .and()\n            .authorizeRequests()\n                .accessDecisionManager(accessDecisionManager)\n                .antMatchers(\"/login**\").permitAll()\n                .antMatchers(\"/error**\").permitAll()\n                .antMatchers(\"/checkLogin**\").permitAll()\n                .anyRequest().fullyAuthenticated()\n                .and()\n            .formLogin()\n                .loginPage(\"/login\")\n                .loginProcessingUrl(\"/checkLogin\")\n                .defaultSuccessUrl(\"/home?menu=homeMenuOption\")\n                .failureUrl(\"/login?login_error=1\")\n                .usernameParameter(\"username\")\n                .passwordParameter(\"password\")\n                .permitAll()\n                .and()\n            .logout()\n                .logoutUrl(\"/logout\")\n                .logoutSuccessHandler(new LogoutSuccessHandlerImpl())\n                .deleteCookies(\"JSESSIONID\")\n                .invalidateHttpSession(true)\n                .permitAll()\n                .and()\n            .headers()\n                .frameOptions()\n                .disable()\n            .and()\n                .sessionManagement()\n                .maximumSessions(1);\n    }\n\n}\n</code></pre>\n\n<p>Below is my UserDetailsService which checks in db for proper authentication.</p>\n\n<pre><code>@Service(\"userDetailsService\")\npublic class UserDetailsService implements org.springframework.security.core.userdetails.UserDetailsService {\n\n    private static final Logger log = LoggerFactory.getLogger(UserDetailsService.class);\n\n    @Autowired\n    private UserService userService;\n\n    @Autowired\n    private ModuleService moduleService;\n\n    @Override\n    public UserDetails loadUserByUsername(final String userName) throws UsernameNotFoundException, DataAccessException {\n        log.debug(\"Authenticating : {}\", userName);\n\n        SecurityUser securityUser = null;\n\n        try {\n\n            User user = userService.findUserByEmail(userName);\n\n            if (user != null) {\n                log.debug(\"User with the username {} FOUND \", userName);\n                securityUser = new SecurityUser(user.getEmail(), user.getPassword(), true, true, true, true, getGrantedAuthorities(user.getRole().getId()));\n                securityUser.setUser(user);\n            } else {\n                log.debug(\"User with the username {}  NOT FOUND\", userName);\n                throw new UsernameNotFoundException(\"Username not found.\");\n            }\n        } catch (Exception e) {\n            log.error(e.getMessage(), e);\n        }\n\n        return securityUser;\n    }\n\n    private List&lt;GrantedAuthority&gt; getGrantedAuthorities(Long roleId) {\n        log.debug(\"Populating user authorities\");\n\n        List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;GrantedAuthority&gt;();\n        List&lt;Module&gt; allModules = moduleService.findAllModules();\n        Map&lt;Long, Module&gt; moduleMap = new HashMap&lt;Long, Module&gt;();\n\n        for(Module module : allModules){\n            moduleMap.put(module.getModuleId(), module);\n        }\n\n        List&lt;ModuleOperation&gt; moduleOperationList = moduleService.findModuleOperationsByRoleId(roleId);\n\n        for (ModuleOperation moduleOperation : moduleOperationList) {\n            moduleOperation.setModuleName(moduleMap.get(moduleOperation.getModuleId()).getModuleName());\n            authorities.add(moduleOperation);\n        }\n\n        return authorities;\n    }\n}\n</code></pre>\n"},{"tags":["java","lambda"],"answers":[{"tags":[],"owner":{"account_id":127032,"reputation":42749,"user_id":323924,"accept_rate":77,"display_name":"Cheng Chen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1471241279,"creation_date":1471240700,"answer_id":38949991,"question_id":38949719,"body_markdown":"You need to write another class to store the total values like this:\r\n\r\n    public class Total {\r\n        private int totalA = 0;\r\n        private int totalB = 0;\r\n    \r\n        public void addA(int a) {\r\n            totalA += a;\r\n        }\r\n    \r\n        public void addB(int b) {\r\n            totalB += b;\r\n        }\r\n    \r\n        public int getTotalA() {\r\n            return totalA;\r\n        }\r\n    \r\n        public int getTotalB() {\r\n            return totalB;\r\n        }\r\n    }\r\n\r\nAnd then collect the values using\r\n\r\n    Total total = objects.stream()\r\n            .map(o -&gt; (A) o)\r\n            .collect(Total::new,\r\n                    (t, a) -&gt; {\r\n                        t.addA(a.getA());\r\n                        t.addB(a.getB());\r\n                    },\r\n                    (t1, t2) -&gt; { });\r\n    //check total.getTotalA() and total.getTotalB()\r\n\r\nYou can also use `AbstractMap.SimpleEntry&lt;Integer, Integer&gt;` to replace `Total` to avoid writing a new class, but it&#39;s still kind of weird because A/B are not in a key-value relationship.\r\n","title":"Java Lambda Multiple operations on a single stream","body":"<p>You need to write another class to store the total values like this:</p>\n\n<pre><code>public class Total {\n    private int totalA = 0;\n    private int totalB = 0;\n\n    public void addA(int a) {\n        totalA += a;\n    }\n\n    public void addB(int b) {\n        totalB += b;\n    }\n\n    public int getTotalA() {\n        return totalA;\n    }\n\n    public int getTotalB() {\n        return totalB;\n    }\n}\n</code></pre>\n\n<p>And then collect the values using</p>\n\n<pre><code>Total total = objects.stream()\n        .map(o -&gt; (A) o)\n        .collect(Total::new,\n                (t, a) -&gt; {\n                    t.addA(a.getA());\n                    t.addB(a.getB());\n                },\n                (t1, t2) -&gt; { });\n//check total.getTotalA() and total.getTotalB()\n</code></pre>\n\n<p>You can also use <code>AbstractMap.SimpleEntry&lt;Integer, Integer&gt;</code> to replace <code>Total</code> to avoid writing a new class, but it's still kind of weird because A/B are not in a key-value relationship.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1471242280,"creation_date":1471242280,"answer_id":38950225,"question_id":38949719,"body_markdown":"The most optimal probably still would be a for loop. Though the stream alternative has parallelism as option, and is likely to become as efficient soon.\r\nCombining two loops to one is not necessarily faster.\r\n\r\nOne improvement would be to use `int` instead of `Integer`.\r\n\r\n\tList&lt;String&gt; list = Arrays.asList(&quot;tom&quot;,&quot;terry&quot;,&quot;john&quot;,&quot;kevin&quot;,&quot;steve&quot;);\r\n\tint n = list.stream().collect(Collectors.summingInt(String::length));\r\n\tint h = list.stream().collect(Collectors.summingInt(String::hashCode));\r\n\r\n**I favour this solution.**\r\n\r\nIf one would make one loop, there are two alternatives:\r\n\r\n- putting both ints in their own class. You might abuse java.awt.Point class with int x and int y.\r\n- putting both ints in a long. When no overflow, then one can even sum in the loop on the long.\r\n\r\nThe latter:\r\n\r\n\tList&lt;String&gt; list = Arrays.asList(&quot;tom&quot;,&quot;terry&quot;,&quot;john&quot;,&quot;kevin&quot;,&quot;steve&quot;);\r\n\tlong nh = list.stream()\r\n        .collect(Collectors.summingLong((s) -&gt; (s.hashCode() &lt;&lt; 32) | s.length()));\r\n        int n = (int) nh;\r\n        int h = (int) (nh &gt;&gt; 32L);\r\n","title":"Java Lambda Multiple operations on a single stream","body":"<p>The most optimal probably still would be a for loop. Though the stream alternative has parallelism as option, and is likely to become as efficient soon.\nCombining two loops to one is not necessarily faster.</p>\n\n<p>One improvement would be to use <code>int</code> instead of <code>Integer</code>.</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"tom\",\"terry\",\"john\",\"kevin\",\"steve\");\nint n = list.stream().collect(Collectors.summingInt(String::length));\nint h = list.stream().collect(Collectors.summingInt(String::hashCode));\n</code></pre>\n\n<p><strong>I favour this solution.</strong></p>\n\n<p>If one would make one loop, there are two alternatives:</p>\n\n<ul>\n<li>putting both ints in their own class. You might abuse java.awt.Point class with int x and int y.</li>\n<li>putting both ints in a long. When no overflow, then one can even sum in the loop on the long.</li>\n</ul>\n\n<p>The latter:</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"tom\",\"terry\",\"john\",\"kevin\",\"steve\");\nlong nh = list.stream()\n    .collect(Collectors.summingLong((s) -&gt; (s.hashCode() &lt;&lt; 32) | s.length()));\n    int n = (int) nh;\n    int h = (int) (nh &gt;&gt; 32L);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691532440,"creation_date":1691530070,"answer_id":76863308,"question_id":38949719,"body_markdown":"If you&#39;re running Java &gt;= 12, this isn&#39;t hard at all to do in a way that&#39;s even compatible with parallel streams (unlike the other answers so far), using [Collectors.teeing()](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)) and [Collectors.summingInt()](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#summingInt(java.util.function.ToIntFunction)):\r\n\r\n```\r\nint[] totals = myObject.stream()\r\n   .collect(Collectors.teeing(\r\n      Collectors.summingInt(MyObject::getA),\r\n      Collectors.summingInt(MyObject::getB),\r\n      (a, b) -&gt; new int[] {a, b});\r\n\r\nint sumA = totals[0];\r\nint sumB = totals[1];","title":"Java Lambda Multiple operations on a single stream","body":"<p>If you're running Java &gt;= 12, this isn't hard at all to do in a way that's even compatible with parallel streams (unlike the other answers so far), using <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">Collectors.teeing()</a> and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#summingInt(java.util.function.ToIntFunction)\" rel=\"nofollow noreferrer\">Collectors.summingInt()</a>:</p>\n<pre><code>int[] totals = myObject.stream()\n   .collect(Collectors.teeing(\n      Collectors.summingInt(MyObject::getA),\n      Collectors.summingInt(MyObject::getB),\n      (a, b) -&gt; new int[] {a, b});\n\nint sumA = totals[0];\nint sumB = totals[1];\n</code></pre>\n"}],"owner":{"account_id":8219839,"reputation":393,"user_id":6184793,"accept_rate":100,"display_name":"Pranay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2360,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":38949991,"answer_count":3,"score":6,"last_activity_date":1691534354,"creation_date":1471238749,"question_id":38949719,"body_markdown":"**Scenario:** I have a object with 2 functions --&gt;\r\n\r\n    &lt;Integer&gt; getA(); &lt;Integer&gt; getB();\r\nI have a list of objects, say `List&lt;MyObject&gt; myObject`.\r\n\r\n**Objective** Iterate over the List and get separate sums of A and B&#39;s in the List of object.\r\n\r\n**My Solution** \r\n\r\n`myObject.stream().map(a -&gt; a.getA()).collect(Collectors.summingDouble());`\r\n\r\n    myObject.stream().map(a -&gt; a.getB()).collect(Collectors.summingDouble());\r\n\r\n**The Question:** How can I do both of these at the same time? This way I will not have to iterate twice over the original list. \r\n\r\n\r\n@Edit: I was doing this because some of the filters that I used were of O(n^3). Kind of really bad to do those twice.\r\n\r\nBenchmark : It really matters if it is T or 2T when the program runs for half hour on an i5. This was on much lesser data and if I run on a cluster, my data would be larger too. \r\n\r\nIt does matter if you can do these in one line!.","title":"Java Lambda Multiple operations on a single stream","body":"<p><strong>Scenario:</strong> I have a object with 2 functions --&gt;</p>\n<pre><code>&lt;Integer&gt; getA(); &lt;Integer&gt; getB();\n</code></pre>\n<p>I have a list of objects, say <code>List&lt;MyObject&gt; myObject</code>.</p>\n<p><strong>Objective</strong> Iterate over the List and get separate sums of A and B's in the List of object.</p>\n<p><strong>My Solution</strong></p>\n<p><code>myObject.stream().map(a -&gt; a.getA()).collect(Collectors.summingDouble());</code></p>\n<pre><code>myObject.stream().map(a -&gt; a.getB()).collect(Collectors.summingDouble());\n</code></pre>\n<p><strong>The Question:</strong> How can I do both of these at the same time? This way I will not have to iterate twice over the original list.</p>\n<p>@Edit: I was doing this because some of the filters that I used were of O(n^3). Kind of really bad to do those twice.</p>\n<p>Benchmark : It really matters if it is T or 2T when the program runs for half hour on an i5. This was on much lesser data and if I run on a cluster, my data would be larger too.</p>\n<p>It does matter if you can do these in one line!.</p>\n"},{"tags":["java","sorting","version"],"comments":[{"owner":{"account_id":6583624,"reputation":2692,"user_id":5087125,"display_name":"pvg"},"score":0,"creation_date":1481976596,"post_id":41198379,"comment_id":69596210,"body_markdown":"You want someone to fix something in your code but you don&#39;t even know what the failure is? How do you think anyone can accomplish this? Take a look at http://stackoverflow.com/help/how-to-ask and try to clarify your question","body":"You want someone to fix something in your code but you don&#39;t even know what the failure is? How do you think anyone can accomplish this? Take a look at <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and try to clarify your question"}],"answers":[{"tags":[],"owner":{"account_id":9208386,"reputation":9299,"user_id":6842716,"display_name":"JohnG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481990198,"creation_date":1481990198,"answer_id":41200394,"question_id":41198379,"body_markdown":"From your comments in your code above the `specialCompare` method…\r\n\r\n&gt; Meant for when version numbers such as 2 and 2.0 arise. This method\r\n&gt; will make sure to put the smaller version number (in length) first\r\n\r\nSo I am guessing from this that you want the version to be sorted by the length of the version number. Example: from your supplied versions string array you want to sort as below…\r\n\r\n    0\r\n    2\r\n    0.0\r\n    0.1\r\n    1.2\r\n    1.113\r\n    2.0\r\n    0.0.0\r\n    1.1.1\r\n    1.2.1\r\n    2.0.0\r\n    0.0.0.1\r\n\r\nIf this is the case, then you seem to be making this more complicated than it has to be. When you get two versions where the version lengths differ, then the one with the shorter version length should go first. So a simple check on the length of the version split arrays should solve this. If they are the same length, then you need to check each version. There is no need for a `specialCompare` method when the version lengths are the same. Simply check each version and if they are the same, then go to the next version number and so on. As soon as one version is different then you will know what to return. If you go through the whole array then you know all the version numbers are the same.\r\n\r\nBelow is a change to the `compareVersion` method using the logic above. There is no need for a  `specialCompare` method. I am guessing this is what you are looking for.\r\n\r\n\r\n    public static int compareVersion(String version1, String version2)\r\n    {\r\n      String[] arr1 = version1.split(&quot;\\\\.&quot;);\r\n      String[] arr2 = version2.split(&quot;\\\\.&quot;);\r\n      \r\n      if (arr1.length &lt; arr2.length)\r\n         return -1;\r\n      if (arr1.length &gt; arr2.length)\r\n         return 1;\r\n      \r\n      // same number of version &quot;.&quot; dots\r\n      for (int i = 0; i &lt; arr1.length; i++)\r\n      {\r\n         if(Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i]))\r\n           return -1;\r\n         if(Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i]))\r\n           return 1;\r\n       }\r\n       // went through all version numbers and they are all the same\r\n       return 0;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"Sorting Version Numbers","body":"<p>From your comments in your code above the <code>specialCompare</code> method…</p>\n\n<blockquote>\n  <p>Meant for when version numbers such as 2 and 2.0 arise. This method\n  will make sure to put the smaller version number (in length) first</p>\n</blockquote>\n\n<p>So I am guessing from this that you want the version to be sorted by the length of the version number. Example: from your supplied versions string array you want to sort as below…</p>\n\n<pre><code>0\n2\n0.0\n0.1\n1.2\n1.113\n2.0\n0.0.0\n1.1.1\n1.2.1\n2.0.0\n0.0.0.1\n</code></pre>\n\n<p>If this is the case, then you seem to be making this more complicated than it has to be. When you get two versions where the version lengths differ, then the one with the shorter version length should go first. So a simple check on the length of the version split arrays should solve this. If they are the same length, then you need to check each version. There is no need for a <code>specialCompare</code> method when the version lengths are the same. Simply check each version and if they are the same, then go to the next version number and so on. As soon as one version is different then you will know what to return. If you go through the whole array then you know all the version numbers are the same.</p>\n\n<p>Below is a change to the <code>compareVersion</code> method using the logic above. There is no need for a  <code>specialCompare</code> method. I am guessing this is what you are looking for.</p>\n\n<pre><code>public static int compareVersion(String version1, String version2)\n{\n  String[] arr1 = version1.split(\"\\\\.\");\n  String[] arr2 = version2.split(\"\\\\.\");\n\n  if (arr1.length &lt; arr2.length)\n     return -1;\n  if (arr1.length &gt; arr2.length)\n     return 1;\n\n  // same number of version \".\" dots\n  for (int i = 0; i &lt; arr1.length; i++)\n  {\n     if(Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i]))\n       return -1;\n     if(Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i]))\n       return 1;\n   }\n   // went through all version numbers and they are all the same\n   return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10343555,"reputation":41,"user_id":7629176,"display_name":"love adu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488190869,"creation_date":1488190869,"answer_id":42483184,"question_id":41198379,"body_markdown":"package com.e;\r\n\r\nimport java.util.*;\r\n\r\n/**\r\n * Created by dpc on 17-2-27.\r\n * \r\n */\r\npublic class VersionComparator implements Comparator&lt;String&gt; {\r\n\r\n\t@Override\r\n\tpublic int compare(String o1, String o2) {\r\n\r\n\t\tif (o1 == null &amp;&amp; o2 == null) {\r\n\t\t\treturn 0;\r\n\t\t} else if (o1 == null &amp;&amp; o2 != null) {\r\n\t\t\treturn -1;\r\n\t\t} else if (o1 != null &amp;&amp; o2 == null) {\r\n\t\t\treturn 1;\r\n\t\t} else {\r\n\t\t\tif (o1.length() == 0 &amp;&amp; o2.length() == 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t} else if (o1.length() == 0 &amp;&amp; o2.length() &gt; 0) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else if (o1.length() &gt; 0 &amp;&amp; o2.length() == 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\treturn compareVersion(o1, o2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n\tpublic static int compareVersion(String version1, String version2) {\r\n\t\tString[] arr1 = version1.split(&quot;\\\\.&quot;);\r\n\t\tString[] arr2 = version2.split(&quot;\\\\.&quot;);\r\n\r\n\t\ttry {\r\n\r\n\t\t\tint i = 0;\r\n\t\t\twhile (i &lt; arr1.length || i &lt; arr2.length) {\r\n\t\t\t\tif (i &lt; arr1.length &amp;&amp; i &lt; arr2.length) {\r\n\t\t\t\t\tif (Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i])) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t} else if (Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i])) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t} else if (Integer.parseInt(arr1[i]) == Integer.parseInt(arr2[i])) {\r\n\t\t\t\t\t\tint result = specialCompare(version1, version2);\r\n\t\t\t\t\t\tif (result != 0) {\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (i &lt; arr1.length) {\r\n\t\t\t\t\tif (Integer.parseInt(arr1[i]) != 0) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (i &lt; arr2.length) {\r\n\t\t\t\t\tif (Integer.parseInt(arr2[i]) != 0) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tpublic static int specialCompare(String str1, String str2) {\r\n\t\tString[] arr1 = str1.split(&quot;\\\\.&quot;);\r\n\t\tString[] arr2 = str2.split(&quot;\\\\.&quot;);\r\n\t\tfor (int i = 1; i &lt; arr1.length; i++) {\r\n\t\t\tif (Integer.parseInt(arr1[i]) != 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (int j = 1; j &lt; arr2.length; j++) {\r\n\t\t\tif (Integer.parseInt(arr2[j]) != 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (arr1.length &lt; arr2.length) {\r\n\t\t\treturn -1;\r\n\t\t} else {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// test\r\n\tpublic static List&lt;String&gt; getLowerList(String str, Comparator&lt;String&gt; comparator, List&lt;String&gt; list) {\r\n\t\tif (str == null) {\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\tList&lt;String&gt; newlist = new ArrayList&lt;String&gt;();\r\n\t\tnewlist.add(str);\r\n\t\tnewlist.addAll(list);\r\n\t\t// sort\r\n\t\tCollections.sort(newlist, comparator);\r\n\t\t// search\r\n\t\tint endIndex = Collections.binarySearch(newlist, str);\r\n\t\tif (endIndex &gt;= 0) {\r\n\t\t\t// sublist 0 1\r\n\t\t\treturn newlist.subList(0, endIndex + 1);\r\n\t\t} else {\r\n\t\t\treturn new ArrayList&lt;String&gt;();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tList&lt;String&gt; test1 = Arrays.asList(new String[]{\r\n\t\t\t\t&quot;2.1.1&quot;, &quot;1.21.22&quot;, &quot;1.21.25&quot;, &quot;1.113&quot;, &quot;0.0.0.1&quot;,\r\n\t\t\t\t&quot;2.0.0&quot;, &quot;1.2&quot;, &quot;2.0&quot;, &quot;0.1&quot;, &quot;1.2.1&quot;, &quot;1.1.1&quot;,\r\n\t\t\t\t&quot;11&quot;, &quot;100&quot;, &quot;&quot; + Integer.MAX_VALUE + &quot;.1&quot;, &quot;&quot;,\r\n\t\t\t\t&quot;2.0&quot;, &quot;10.1&quot;});\r\n\r\n\t\tList&lt;String&gt; test2 = Arrays.asList(new String[]{&quot;&quot;, null, &quot;0&quot;, &quot;10.20.100&quot;, &quot;3.1.1&quot;, &quot;9.8&quot;, &quot;10.3.92&quot;});\r\n\r\n\t\tList&lt;String&gt; newlist = new ArrayList&lt;String&gt;();\r\n\t\tnewlist.addAll(test1);\r\n\t\tnewlist.addAll(test2);\r\n\r\n\t\tCollections.sort(newlist, new VersionComparator());\r\n\r\n\t\tVersionComparator compareVersion = new VersionComparator();\r\n\t\tSystem.out.println(newlist);\r\n\r\n\t\tSystem.out.println(getLowerList(&quot;2&quot;, compareVersion, newlist));\r\n\t\tSystem.out.println(getLowerList(&quot;3&quot;, compareVersion, newlist));\r\n\t\tSystem.out.println(getLowerList(&quot;4&quot;, compareVersion, newlist));\r\n\t\tSystem.out.println(getLowerList(&quot;5&quot;, compareVersion, newlist));\r\n\r\n\t}\r\n}\r\n","title":"Sorting Version Numbers","body":"<p>package com.e;</p>\n\n<p>import java.util.*;</p>\n\n<p>/**\n * Created by dpc on 17-2-27.\n * \n */\npublic class VersionComparator implements Comparator {</p>\n\n<pre><code>@Override\npublic int compare(String o1, String o2) {\n\n    if (o1 == null &amp;&amp; o2 == null) {\n        return 0;\n    } else if (o1 == null &amp;&amp; o2 != null) {\n        return -1;\n    } else if (o1 != null &amp;&amp; o2 == null) {\n        return 1;\n    } else {\n        if (o1.length() == 0 &amp;&amp; o2.length() == 0) {\n            return 0;\n        } else if (o1.length() == 0 &amp;&amp; o2.length() &gt; 0) {\n            return -1;\n        } else if (o1.length() &gt; 0 &amp;&amp; o2.length() == 0) {\n            return 1;\n        } else {\n            return compareVersion(o1, o2);\n        }\n    }\n\n\n}\n\n\npublic static int compareVersion(String version1, String version2) {\n    String[] arr1 = version1.split(\"\\\\.\");\n    String[] arr2 = version2.split(\"\\\\.\");\n\n    try {\n\n        int i = 0;\n        while (i &lt; arr1.length || i &lt; arr2.length) {\n            if (i &lt; arr1.length &amp;&amp; i &lt; arr2.length) {\n                if (Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i])) {\n                    return -1;\n                } else if (Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i])) {\n                    return 1;\n                } else if (Integer.parseInt(arr1[i]) == Integer.parseInt(arr2[i])) {\n                    int result = specialCompare(version1, version2);\n                    if (result != 0) {\n                        return result;\n                    }\n                }\n            } else if (i &lt; arr1.length) {\n                if (Integer.parseInt(arr1[i]) != 0) {\n                    return 1;\n                }\n            } else if (i &lt; arr2.length) {\n                if (Integer.parseInt(arr2[i]) != 0) {\n                    return -1;\n                }\n            }\n\n            i++;\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return 0;\n}\n\npublic static int specialCompare(String str1, String str2) {\n    String[] arr1 = str1.split(\"\\\\.\");\n    String[] arr2 = str2.split(\"\\\\.\");\n    for (int i = 1; i &lt; arr1.length; i++) {\n        if (Integer.parseInt(arr1[i]) != 0) {\n            return 0;\n        }\n    }\n    for (int j = 1; j &lt; arr2.length; j++) {\n        if (Integer.parseInt(arr2[j]) != 0) {\n            return 0;\n        }\n    }\n    if (arr1.length &lt; arr2.length) {\n        return -1;\n    } else {\n        return 1;\n    }\n}\n\n\n// test\npublic static List&lt;String&gt; getLowerList(String str, Comparator&lt;String&gt; comparator, List&lt;String&gt; list) {\n    if (str == null) {\n        return list;\n    }\n    List&lt;String&gt; newlist = new ArrayList&lt;String&gt;();\n    newlist.add(str);\n    newlist.addAll(list);\n    // sort\n    Collections.sort(newlist, comparator);\n    // search\n    int endIndex = Collections.binarySearch(newlist, str);\n    if (endIndex &gt;= 0) {\n        // sublist 0 1\n        return newlist.subList(0, endIndex + 1);\n    } else {\n        return new ArrayList&lt;String&gt;();\n    }\n}\n\npublic static void main(String[] args) {\n    List&lt;String&gt; test1 = Arrays.asList(new String[]{\n            \"2.1.1\", \"1.21.22\", \"1.21.25\", \"1.113\", \"0.0.0.1\",\n            \"2.0.0\", \"1.2\", \"2.0\", \"0.1\", \"1.2.1\", \"1.1.1\",\n            \"11\", \"100\", \"\" + Integer.MAX_VALUE + \".1\", \"\",\n            \"2.0\", \"10.1\"});\n\n    List&lt;String&gt; test2 = Arrays.asList(new String[]{\"\", null, \"0\", \"10.20.100\", \"3.1.1\", \"9.8\", \"10.3.92\"});\n\n    List&lt;String&gt; newlist = new ArrayList&lt;String&gt;();\n    newlist.addAll(test1);\n    newlist.addAll(test2);\n\n    Collections.sort(newlist, new VersionComparator());\n\n    VersionComparator compareVersion = new VersionComparator();\n    System.out.println(newlist);\n\n    System.out.println(getLowerList(\"2\", compareVersion, newlist));\n    System.out.println(getLowerList(\"3\", compareVersion, newlist));\n    System.out.println(getLowerList(\"4\", compareVersion, newlist));\n    System.out.println(getLowerList(\"5\", compareVersion, newlist));\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1591999088,"creation_date":1519384737,"answer_id":48946673,"question_id":41198379,"body_markdown":"I have recently had a need to do this in a more generic way for arbitrary file names, similar to how Windows Explorer sorts files:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[I wrote a blog post about this][2]. [The idea was inspired by this answer here][3]. The comparator used for ordering files this way looks like this:\r\n\r\n    public final class FilenameComparator implements Comparator&lt;String&gt; {\r\n        private static final Pattern NUMBERS = \r\n            Pattern.compile(&quot;(?&lt;=\\\\D)(?=\\\\d)|(?&lt;=\\\\d)(?=\\\\D)&quot;);\r\n\r\n        @Override \r\n        public final int compare(String o1, String o2) {\r\n            // Optional &quot;NULLS LAST&quot; semantics:\r\n            if (o1 == null || o2 == null)\r\n                return o1 == null ? o2 == null ? 0 : -1 : 1;\r\n            // Splitting both input strings by the above patterns\r\n            String[] split1 = NUMBERS.split(o1);\r\n            String[] split2 = NUMBERS.split(o2);\r\n            for (int i = 0; i &lt; Math.min(split1.length, split2.length); i++) {\r\n                char c1 = split1[i].charAt(0);\r\n                char c2 = split2[i].charAt(0);\r\n                int cmp = 0;\r\n                // If both segments start with a digit, sort them numerically using \r\n                // BigInteger to stay safe\r\n                if (c1 &gt;= &#39;0&#39; &amp;&amp; c1 &lt;= &#39;9&#39; &amp;&amp; c2 &gt;= &#39;0&#39; &amp;&amp; c2 &lt;= &#39;9&#39;)\r\n                    cmp = new BigInteger(split1[i]).compareTo(new BigInteger(split2[i]));\r\n                // If we haven&#39;t sorted numerically before, or if numeric sorting yielded \r\n                // equality (e.g 007 and 7) then sort lexicographically\r\n                if (cmp == 0)\r\n                    cmp = split1[i].compareTo(split2[i]);\r\n                // Abort once some prefix has unequal ordering\r\n                if (cmp != 0)\r\n                    return cmp;\r\n            }\r\n            // If we reach this, then both strings have equally ordered prefixes, but \r\n            // maybe one string is longer than the other (i.e. has more segments)\r\n            return split1.length - split2.length;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Tpu7R.png\r\n  [2]: https://blog.jooq.org/2018/02/23/how-to-order-file-names-semantically-in-java/\r\n  [3]: https://codereview.stackexchange.com/a/37217/5314","title":"Sorting Version Numbers","body":"<p>I have recently had a need to do this in a more generic way for arbitrary file names, similar to how Windows Explorer sorts files:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Tpu7R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tpu7R.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://blog.jooq.org/2018/02/23/how-to-order-file-names-semantically-in-java/\" rel=\"nofollow noreferrer\">I wrote a blog post about this</a>. <a href=\"https://codereview.stackexchange.com/a/37217/5314\">The idea was inspired by this answer here</a>. The comparator used for ordering files this way looks like this:</p>\n\n<pre><code>public final class FilenameComparator implements Comparator&lt;String&gt; {\n    private static final Pattern NUMBERS = \n        Pattern.compile(\"(?&lt;=\\\\D)(?=\\\\d)|(?&lt;=\\\\d)(?=\\\\D)\");\n\n    @Override \n    public final int compare(String o1, String o2) {\n        // Optional \"NULLS LAST\" semantics:\n        if (o1 == null || o2 == null)\n            return o1 == null ? o2 == null ? 0 : -1 : 1;\n        // Splitting both input strings by the above patterns\n        String[] split1 = NUMBERS.split(o1);\n        String[] split2 = NUMBERS.split(o2);\n        for (int i = 0; i &lt; Math.min(split1.length, split2.length); i++) {\n            char c1 = split1[i].charAt(0);\n            char c2 = split2[i].charAt(0);\n            int cmp = 0;\n            // If both segments start with a digit, sort them numerically using \n            // BigInteger to stay safe\n            if (c1 &gt;= '0' &amp;&amp; c1 &lt;= '9' &amp;&amp; c2 &gt;= '0' &amp;&amp; c2 &lt;= '9')\n                cmp = new BigInteger(split1[i]).compareTo(new BigInteger(split2[i]));\n            // If we haven't sorted numerically before, or if numeric sorting yielded \n            // equality (e.g 007 and 7) then sort lexicographically\n            if (cmp == 0)\n                cmp = split1[i].compareTo(split2[i]);\n            // Abort once some prefix has unequal ordering\n            if (cmp != 0)\n                return cmp;\n        }\n        // If we reach this, then both strings have equally ordered prefixes, but \n        // maybe one string is longer than the other (i.e. has more segments)\n        return split1.length - split2.length;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":80013,"reputation":2646,"user_id":226513,"accept_rate":67,"display_name":"Adam"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1579197130,"creation_date":1579197130,"answer_id":59775278,"question_id":41198379,"body_markdown":"I read [Lukas Eder&#39;s blog post][1] in the [comment above][2] and created a `java.util.Comparator` which orders by version (or chapter) number, based on a [JDK proposal][3].\r\n\r\n[`VersionNumberComparator`][4] is defined in a GitHub gist. The follow code shows how it works.\r\n\r\n\timport java.util.ArrayList;\r\n\timport java.util.List;\r\n\r\n\tpublic class JavaTest {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tfinal List&lt;String&gt; chapters = new ArrayList&lt;&gt;();\r\n\r\n\t\t\tchapters.add(&quot;1.1&quot;);\r\n\t\t\tchapters.add(&quot;1.2&quot;);\r\n\t\t\tchapters.add(&quot;1&quot;);\r\n\t\t\tchapters.add(&quot;1.3&quot;);\r\n\t\t\tchapters.add(&quot;1.1.1&quot;);\r\n\t\t\tchapters.add(&quot;5.6&quot;);\r\n\t\t\tchapters.add(&quot;1.1.10&quot;);\r\n\t\t\tchapters.add(&quot;4&quot;);\r\n\t\t\tchapters.add(&quot;1.1.9&quot;);\r\n\t\t\tchapters.add(&quot;1.2.1.10&quot;);\r\n\t\t\tchapters.add(&quot;2.1.1.4.5&quot;);\r\n\t\t\tchapters.add(&quot;1.2.1.9&quot;);\r\n\t\t\tchapters.add(&quot;1.2.1&quot;);\r\n\t\t\tchapters.add(&quot;2.2.2&quot;);\r\n\t\t\tchapters.add(&quot;1.2.1.11&quot;);\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;UNSORTED: &quot; + chapters.toString());\r\n\r\n\t\t\tchapters.sort(VersionNumberComparator.getInstance());\r\n\t\t\tSystem.out.println(&quot;SORTED:   &quot; + chapters.toString());\r\n\t\t}\r\n\t}\r\n\r\nProduces the following output:\r\n\r\n    UNSORTED: [1.1, 1.2, 1, 1.3, 1.1.1, 5.6, 1.1.10, 4, 1.1.9, 1.2.1.10, 2.1.1.4.5, 1.2.1.9, 1.2.1, 2.2.2, 1.2.1.11]\r\n    SORTED:   [1, 1.1, 1.1.1, 1.1.9, 1.1.10, 1.2, 1.2.1, 1.2.1.9, 1.2.1.10, 1.2.1.11, 1.3, 2.1.1.4.5, 2.2.2, 4, 5.6]\r\n\r\n  [1]: https://blog.jooq.org/2018/02/23/how-to-order-file-names-semantically-in-java/\r\n  [2]: https://stackoverflow.com/a/48946673/226513\r\n  [3]: http://mail.openjdk.java.net/pipermail/core-libs-dev/2017-July/048615.html\r\n  [4]: https://gist.github.com/adamcbuckley/8ccae8b1ede0a65edb1756ea39bb6f2a","title":"Sorting Version Numbers","body":"<p>I read <a href=\"https://blog.jooq.org/2018/02/23/how-to-order-file-names-semantically-in-java/\" rel=\"noreferrer\">Lukas Eder's blog post</a> in the <a href=\"https://stackoverflow.com/a/48946673/226513\">comment above</a> and created a <code>java.util.Comparator</code> which orders by version (or chapter) number, based on a <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2017-July/048615.html\" rel=\"noreferrer\">JDK proposal</a>.</p>\n\n<p><a href=\"https://gist.github.com/adamcbuckley/8ccae8b1ede0a65edb1756ea39bb6f2a\" rel=\"noreferrer\"><code>VersionNumberComparator</code></a> is defined in a GitHub gist. The follow code shows how it works.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class JavaTest {\n\n    public static void main(String[] args) {\n        final List&lt;String&gt; chapters = new ArrayList&lt;&gt;();\n\n        chapters.add(\"1.1\");\n        chapters.add(\"1.2\");\n        chapters.add(\"1\");\n        chapters.add(\"1.3\");\n        chapters.add(\"1.1.1\");\n        chapters.add(\"5.6\");\n        chapters.add(\"1.1.10\");\n        chapters.add(\"4\");\n        chapters.add(\"1.1.9\");\n        chapters.add(\"1.2.1.10\");\n        chapters.add(\"2.1.1.4.5\");\n        chapters.add(\"1.2.1.9\");\n        chapters.add(\"1.2.1\");\n        chapters.add(\"2.2.2\");\n        chapters.add(\"1.2.1.11\");\n\n        System.out.println(\"UNSORTED: \" + chapters.toString());\n\n        chapters.sort(VersionNumberComparator.getInstance());\n        System.out.println(\"SORTED:   \" + chapters.toString());\n    }\n}\n</code></pre>\n\n<p>Produces the following output:</p>\n\n<pre><code>UNSORTED: [1.1, 1.2, 1, 1.3, 1.1.1, 5.6, 1.1.10, 4, 1.1.9, 1.2.1.10, 2.1.1.4.5, 1.2.1.9, 1.2.1, 2.2.2, 1.2.1.11]\nSORTED:   [1, 1.1, 1.1.1, 1.1.9, 1.1.10, 1.2, 1.2.1, 1.2.1.9, 1.2.1.10, 1.2.1.11, 1.3, 2.1.1.4.5, 2.2.2, 4, 5.6]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16907692,"reputation":11,"user_id":12227638,"display_name":"Aggelowe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1631993332,"creation_date":1631993332,"answer_id":69237830,"question_id":41198379,"body_markdown":"If you want to sort some versions (e.g. `0.4.3, 5.3.5, 1.2.4`) you could use my approach which includes using a [java.util.Comparator][1]. To use this you have to use a sorting method (e.g. `Arrays.sort(new String[] {&quot;0.4.3&quot;, &quot;5.3.5&quot;, &quot;1.2.4&quot;}, new VersionComparator())`). The `VersionComparator` class is written below: \r\n\r\n    import java.util.Arrays;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    \r\n    public final class VersionComparator implements Comparator&lt;String&gt; {\r\n    \r\n    \t@Override\r\n    \tpublic int compare(String version1, String version2) {\r\n    \t\tif (checkVersionFormat(version1) == false || checkVersionFormat(version2) == false) {\r\n    \t\t\tSystem.out.println(&quot;One of the given versions uses a false format&quot;);\r\n    \t\t}\r\n    \t\tList&lt;String&gt; firstVersionElements = Arrays.asList(version1.split(&quot;\\\\.&quot;));\r\n    \t\tList&lt;String&gt; secondVersionElements = Arrays.asList(version2.split(&quot;\\\\.&quot;));\r\n    \t\tint maxVersionElements = getMaxNumber(firstVersionElements.size(), secondVersionElements.size(), 0);\r\n    \t\tfor (int counter = 0; counter &lt; maxVersionElements; counter++) {\r\n    \t\t\tif (firstVersionElements.size() == counter &amp;&amp; secondVersionElements.size() == counter) {\r\n    \t\t\t\treturn 0;\r\n    \t\t\t}\r\n    \t\t\tif (firstVersionElements.size() == counter) {\r\n    \t\t\t\treturn 1;\r\n    \t\t\t}\r\n    \t\t\tif (secondVersionElements.size() == counter) {\r\n    \t\t\t\treturn -1;\r\n    \t\t\t}\r\n    \t\t\tint firstIntElement = Integer.valueOf(firstVersionElements.get(counter));\r\n    \t\t\tint secondIntElement = Integer.valueOf(secondVersionElements.get(counter));\r\n    \t\t\tif (firstIntElement &lt; secondIntElement) {\r\n    \t\t\t\treturn 1;\r\n    \t\t\t}\r\n    \t\t\tif (firstIntElement &gt; secondIntElement) {\r\n    \t\t\t\treturn -1;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn 0;\r\n    \t}\r\n    \r\n    \tprivate boolean checkVersionFormat(String version) {\r\n    \t\tString versionCopy = new String(version);\r\n    \t\tString[] validChars = { &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;.&quot; };\r\n    \t\tfor (String character : validChars) {\r\n    \t\t\tversionCopy = versionCopy.replace(character, &quot;&quot;);\r\n    \t\t}\r\n    \t\treturn versionCopy.equals(&quot;&quot;);\r\n    \t}\r\n    \t\r\n    \tpublic static int getMaxNumber(Integer... ints) {\r\n    \t\tint maximumInt = ints[0];\r\n    \t\tfor (int processInt : ints) {\r\n    \t\t\tif (processInt &gt; maximumInt) {\r\n    \t\t\t\tmaximumInt = processInt;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn maximumInt;\r\n    \t}\r\n    \r\n    }\r\n\r\n[1]: https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html","title":"Sorting Version Numbers","body":"<p>If you want to sort some versions (e.g. <code>0.4.3, 5.3.5, 1.2.4</code>) you could use my approach which includes using a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\">java.util.Comparator</a>. To use this you have to use a sorting method (e.g. <code>Arrays.sort(new String[] {&quot;0.4.3&quot;, &quot;5.3.5&quot;, &quot;1.2.4&quot;}, new VersionComparator())</code>). The <code>VersionComparator</code> class is written below:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.List;\n\npublic final class VersionComparator implements Comparator&lt;String&gt; {\n\n    @Override\n    public int compare(String version1, String version2) {\n        if (checkVersionFormat(version1) == false || checkVersionFormat(version2) == false) {\n            System.out.println(&quot;One of the given versions uses a false format&quot;);\n        }\n        List&lt;String&gt; firstVersionElements = Arrays.asList(version1.split(&quot;\\\\.&quot;));\n        List&lt;String&gt; secondVersionElements = Arrays.asList(version2.split(&quot;\\\\.&quot;));\n        int maxVersionElements = getMaxNumber(firstVersionElements.size(), secondVersionElements.size(), 0);\n        for (int counter = 0; counter &lt; maxVersionElements; counter++) {\n            if (firstVersionElements.size() == counter &amp;&amp; secondVersionElements.size() == counter) {\n                return 0;\n            }\n            if (firstVersionElements.size() == counter) {\n                return 1;\n            }\n            if (secondVersionElements.size() == counter) {\n                return -1;\n            }\n            int firstIntElement = Integer.valueOf(firstVersionElements.get(counter));\n            int secondIntElement = Integer.valueOf(secondVersionElements.get(counter));\n            if (firstIntElement &lt; secondIntElement) {\n                return 1;\n            }\n            if (firstIntElement &gt; secondIntElement) {\n                return -1;\n            }\n        }\n        return 0;\n    }\n\n    private boolean checkVersionFormat(String version) {\n        String versionCopy = new String(version);\n        String[] validChars = { &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;.&quot; };\n        for (String character : validChars) {\n            versionCopy = versionCopy.replace(character, &quot;&quot;);\n        }\n        return versionCopy.equals(&quot;&quot;);\n    }\n    \n    public static int getMaxNumber(Integer... ints) {\n        int maximumInt = ints[0];\n        for (int processInt : ints) {\n            if (processInt &gt; maximumInt) {\n                maximumInt = processInt;\n            }\n        }\n        return maximumInt;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12565192,"reputation":31,"user_id":9862509,"display_name":"Dmitrii Osipov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687445270,"creation_date":1687445270,"answer_id":76533132,"question_id":41198379,"body_markdown":"My simple solution with **null** and **blank** check\r\n\r\n```java\r\nimport java.util.Arrays;\r\nimport java.util.Comparator;\r\nimport java.util.List;\r\n\r\npublic class AppVersionComparator implements Comparator&lt;String&gt; {\r\n\r\n    private final String delimiterRegex;\r\n\r\n    public AppVersionComparator() {\r\n        delimiterRegex = &quot;\\\\.&quot;;\r\n    }\r\n\r\n    public AppVersionComparator(String delimiterRegex) {\r\n        this.delimiterRegex = delimiterRegex;\r\n    }\r\n\r\n    @Override\r\n    public int compare(String s, String t1) {\r\n        if (!isNullOrBlank(s) &amp;&amp; isNullOrBlank(t1)) return 1;\r\n        if (isNullOrBlank(s) &amp;&amp; !isNullOrBlank(t1)) return -1;\r\n        if (isNullOrBlank(s) &amp;&amp; isNullOrBlank(t1)) return 0;\r\n\r\n        final var sourceSplit = Arrays.stream(s.split(delimiterRegex)).map(Long::valueOf).toList();\r\n        final var targetSplit = Arrays.stream(t1.split(delimiterRegex)).map(Long::valueOf).toList();\r\n\r\n        var i = 0;\r\n        while (i &lt;= sourceSplit.size() || i &lt;= targetSplit.size()) {\r\n            var sourceValue = getOrZero(sourceSplit, i);\r\n            var targetValue = getOrZero(targetSplit, i);\r\n            \r\n            if (sourceValue &gt; targetValue) {\r\n                return 1;\r\n            }\r\n            if (sourceValue &lt; targetValue) {\r\n                return -1;\r\n            }\r\n            i++;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    private Long getOrZero(List&lt;Long&gt; list, Integer i) {\r\n        if (i &gt;= 0 &amp;&amp; i &lt; list.size()) {\r\n            return list.get(i);\r\n        }\r\n        return 0L;\r\n    }\r\n\r\n    private boolean isNullOrBlank(String s) {\r\n        return s == null || s.isBlank();\r\n    }\r\n}\r\n\r\n```","title":"Sorting Version Numbers","body":"<p>My simple solution with <strong>null</strong> and <strong>blank</strong> check</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.List;\n\npublic class AppVersionComparator implements Comparator&lt;String&gt; {\n\n    private final String delimiterRegex;\n\n    public AppVersionComparator() {\n        delimiterRegex = &quot;\\\\.&quot;;\n    }\n\n    public AppVersionComparator(String delimiterRegex) {\n        this.delimiterRegex = delimiterRegex;\n    }\n\n    @Override\n    public int compare(String s, String t1) {\n        if (!isNullOrBlank(s) &amp;&amp; isNullOrBlank(t1)) return 1;\n        if (isNullOrBlank(s) &amp;&amp; !isNullOrBlank(t1)) return -1;\n        if (isNullOrBlank(s) &amp;&amp; isNullOrBlank(t1)) return 0;\n\n        final var sourceSplit = Arrays.stream(s.split(delimiterRegex)).map(Long::valueOf).toList();\n        final var targetSplit = Arrays.stream(t1.split(delimiterRegex)).map(Long::valueOf).toList();\n\n        var i = 0;\n        while (i &lt;= sourceSplit.size() || i &lt;= targetSplit.size()) {\n            var sourceValue = getOrZero(sourceSplit, i);\n            var targetValue = getOrZero(targetSplit, i);\n            \n            if (sourceValue &gt; targetValue) {\n                return 1;\n            }\n            if (sourceValue &lt; targetValue) {\n                return -1;\n            }\n            i++;\n        }\n        return 0;\n    }\n\n    private Long getOrZero(List&lt;Long&gt; list, Integer i) {\n        if (i &gt;= 0 &amp;&amp; i &lt; list.size()) {\n            return list.get(i);\n        }\n        return 0L;\n    }\n\n    private boolean isNullOrBlank(String s) {\n        return s == null || s.isBlank();\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29153376,"reputation":1,"user_id":22333729,"display_name":"sh0dan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691534111,"creation_date":1691074148,"answer_id":76829224,"question_id":41198379,"body_markdown":"I solved the problem this way (in Kotlin, should work in any language though):\r\n```\r\nlistOf(\r\n  &quot;0&quot;,\r\n  &quot;2&quot;,\r\n  &quot;0.0&quot;,\r\n  &quot;0.1&quot;,\r\n  &quot;1.2&quot;,\r\n  &quot;1.113&quot;,\r\n  &quot;2.0&quot;,\r\n  &quot;0.0.0&quot;,\r\n  &quot;1.1.1&quot;,\r\n  &quot;1.2.1&quot;,\r\n  &quot;2.0.0&quot;,\r\n  &quot;12.1.0&quot;,\r\n  &quot;11.0.1&quot;,\r\n  &quot;0.0.0.1&quot;\r\n)\r\n.sortedBy {\r\n    it.split(&quot;.&quot;).map { it.padStart(10, &#39;0&#39;) }.joinToString(&quot;.&quot;)\r\n}\r\n```\r\nResult is:\r\n\r\n```\r\n0\r\n0.0\r\n0.0.0\r\n0.0.0.1\r\n0.1\r\n1.1.1\r\n1.2\r\n1.2.1\r\n1.113\r\n2\r\n2.0\r\n2.0.0\r\n11.0.1\r\n12.1.0\r\n```\r\nI have to admit it&#39;s a bit dirty but for me it does the trick and it is very short. Limitation: the version parts should not have more than 10 digits, but you can increase the padding for your needs.","title":"Sorting Version Numbers","body":"<p>I solved the problem this way (in Kotlin, should work in any language though):</p>\n<pre><code>listOf(\n  &quot;0&quot;,\n  &quot;2&quot;,\n  &quot;0.0&quot;,\n  &quot;0.1&quot;,\n  &quot;1.2&quot;,\n  &quot;1.113&quot;,\n  &quot;2.0&quot;,\n  &quot;0.0.0&quot;,\n  &quot;1.1.1&quot;,\n  &quot;1.2.1&quot;,\n  &quot;2.0.0&quot;,\n  &quot;12.1.0&quot;,\n  &quot;11.0.1&quot;,\n  &quot;0.0.0.1&quot;\n)\n.sortedBy {\n    it.split(&quot;.&quot;).map { it.padStart(10, '0') }.joinToString(&quot;.&quot;)\n}\n</code></pre>\n<p>Result is:</p>\n<pre><code>0\n0.0\n0.0.0\n0.0.0.1\n0.1\n1.1.1\n1.2\n1.2.1\n1.113\n2\n2.0\n2.0.0\n11.0.1\n12.1.0\n</code></pre>\n<p>I have to admit it's a bit dirty but for me it does the trick and it is very short. Limitation: the version parts should not have more than 10 digits, but you can increase the padding for your needs.</p>\n"}],"owner":{"account_id":7198939,"reputation":77,"user_id":5496712,"accept_rate":0,"display_name":"Abhinav Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11421,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":7,"score":4,"last_activity_date":1691534111,"creation_date":1481976164,"question_id":41198379,"body_markdown":"My code below is supposed to sort version numbers into proper order. For the most part it works, but it fails a hidden test case that I don&#39;t have access to. Given that is there any edge case you can see that I might be missing.\r\n\r\n    import java.util.*;\r\n\r\n    public class Answer {   \r\n    public static void main(String[] args)\r\n    {\r\n        //Testing \r\n        String[] versions = {&quot;0.0.0&quot;,&quot;0&quot;,&quot;0.0&quot;,&quot;1.113&quot;,&quot;0.0.0.1&quot;,&quot;2.0.0&quot;,&quot;1.2&quot;,&quot;2&quot;,&quot;0.1&quot;,&quot;1.2.1&quot;,&quot;1.1.1&quot;,&quot;2.0&quot;};\r\n        String[] results = answer(versions);\r\n        for(int i =0; i&lt;results.length;i++)\r\n        {\r\n            System.out.println(results[i]);\r\n        }   \r\n    }\r\n    public static String[] answer(String[] l) { \r\n\r\n        String temp = new String();\r\n        //Insertion sort on the given array to assign correct version numbers\r\n        for (int i = 1; i &lt; l.length; i++) {\r\n            for(int j = i ; j &gt; 0 ; j--){\r\n                if(compareVersion(l[j],l[j-1])&lt;0){\r\n                    temp = l[j];\r\n                    l[j] = l[j-1];\r\n                    l[j-1] = temp;\r\n                }\r\n            }\r\n        }\r\n        return l;\r\n    } \r\n    //Will compare version numbers breaking it apart into a String array\r\n    public static int compareVersion(String version1, String version2) {\r\n    String[] arr1 = version1.split(&quot;\\\\.&quot;);\r\n    String[] arr2 = version2.split(&quot;\\\\.&quot;);\r\n \r\n    int i=0;\r\n    while(i&lt;arr1.length || i&lt;arr2.length){\r\n        if(i&lt;arr1.length &amp;&amp; i&lt;arr2.length){\r\n            if(Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i])){\r\n                return -1;\r\n            }else if(Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i])){\r\n                return 1;\r\n            }\r\n            else if(Integer.parseInt(arr1[i]) == Integer.parseInt(arr2[i]))\r\n            {\r\n                int result = specialCompare(version1,version2);\r\n                if(result != 0)\r\n                {\r\n                    return result;\r\n                }\r\n            }\r\n        } else if(i&lt;arr1.length){\r\n            if(Integer.parseInt(arr1[i]) != 0){\r\n                return 1;\r\n            }\r\n        } else if(i&lt;arr2.length){\r\n           if(Integer.parseInt(arr2[i]) != 0){\r\n                return -1;\r\n            }\r\n        }\r\n \r\n        i++;\r\n    }\r\n \r\n    return 0;\r\n    }\r\n      // Meant for when version numbers such as 2 and 2.0 arise. This method will make sure to\r\n      // put the smaller version number ( in length) first\r\n      public static int specialCompare(String str1, String str2)\r\n     {\r\n          String[] arr1 = str1.split(&quot;\\\\.&quot;);\r\n         String[] arr2 = str2.split(&quot;\\\\.&quot;);\r\n         for(int i =1; i&lt;arr1.length;i++)\r\n         {\r\n            if(Integer.parseInt(arr1[i]) != 0)\r\n            {\r\n                return 0;\r\n            }\r\n        }\r\n        for(int j =1; j&lt;arr2.length;j++)\r\n        {\r\n            if(Integer.parseInt(arr2[j]) != 0)\r\n            {\r\n                return 0;\r\n            }\r\n        }\r\n        if(arr1.length &lt; arr2.length)\r\n        {\r\n            return -1;\r\n        }\r\n        else\r\n        {\r\n            return 1;\r\n        }\r\n\r\n    }\r\n    }","title":"Sorting Version Numbers","body":"<p>My code below is supposed to sort version numbers into proper order. For the most part it works, but it fails a hidden test case that I don't have access to. Given that is there any edge case you can see that I might be missing.</p>\n\n<pre><code>import java.util.*;\n\npublic class Answer {   \npublic static void main(String[] args)\n{\n    //Testing \n    String[] versions = {\"0.0.0\",\"0\",\"0.0\",\"1.113\",\"0.0.0.1\",\"2.0.0\",\"1.2\",\"2\",\"0.1\",\"1.2.1\",\"1.1.1\",\"2.0\"};\n    String[] results = answer(versions);\n    for(int i =0; i&lt;results.length;i++)\n    {\n        System.out.println(results[i]);\n    }   \n}\npublic static String[] answer(String[] l) { \n\n    String temp = new String();\n    //Insertion sort on the given array to assign correct version numbers\n    for (int i = 1; i &lt; l.length; i++) {\n        for(int j = i ; j &gt; 0 ; j--){\n            if(compareVersion(l[j],l[j-1])&lt;0){\n                temp = l[j];\n                l[j] = l[j-1];\n                l[j-1] = temp;\n            }\n        }\n    }\n    return l;\n} \n//Will compare version numbers breaking it apart into a String array\npublic static int compareVersion(String version1, String version2) {\nString[] arr1 = version1.split(\"\\\\.\");\nString[] arr2 = version2.split(\"\\\\.\");\n\nint i=0;\nwhile(i&lt;arr1.length || i&lt;arr2.length){\n    if(i&lt;arr1.length &amp;&amp; i&lt;arr2.length){\n        if(Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i])){\n            return -1;\n        }else if(Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i])){\n            return 1;\n        }\n        else if(Integer.parseInt(arr1[i]) == Integer.parseInt(arr2[i]))\n        {\n            int result = specialCompare(version1,version2);\n            if(result != 0)\n            {\n                return result;\n            }\n        }\n    } else if(i&lt;arr1.length){\n        if(Integer.parseInt(arr1[i]) != 0){\n            return 1;\n        }\n    } else if(i&lt;arr2.length){\n       if(Integer.parseInt(arr2[i]) != 0){\n            return -1;\n        }\n    }\n\n    i++;\n}\n\nreturn 0;\n}\n  // Meant for when version numbers such as 2 and 2.0 arise. This method will make sure to\n  // put the smaller version number ( in length) first\n  public static int specialCompare(String str1, String str2)\n {\n      String[] arr1 = str1.split(\"\\\\.\");\n     String[] arr2 = str2.split(\"\\\\.\");\n     for(int i =1; i&lt;arr1.length;i++)\n     {\n        if(Integer.parseInt(arr1[i]) != 0)\n        {\n            return 0;\n        }\n    }\n    for(int j =1; j&lt;arr2.length;j++)\n    {\n        if(Integer.parseInt(arr2[j]) != 0)\n        {\n            return 0;\n        }\n    }\n    if(arr1.length &lt; arr2.length)\n    {\n        return -1;\n    }\n    else\n    {\n        return 1;\n    }\n\n}\n}\n</code></pre>\n"},{"tags":["java","intellij-idea","ide"],"comments":[{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1421936768,"post_id":28081117,"comment_id":44558736,"body_markdown":"Are your dependencies correct? Are you using any sort of code-generation?","body":"Are your dependencies correct? Are you using any sort of code-generation?"}],"answers":[{"tags":[],"owner":{"account_id":1424961,"reputation":30720,"user_id":1348743,"display_name":"Javaru"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1421949778,"creation_date":1421949778,"answer_id":28095684,"question_id":28081117,"body_markdown":"This is typically occurs when the indexes IDEA uses have become corrupt. Thus IDEA cannot properly resolve things. Go to `File &gt; Invalidate Caches`. Invalidate the caches and restart IDEA. Let it re-index the project (progress will show right of the center of the bottom status bar). Once the indexing is completed, the invalid error marks should go away.","title":"IntelliJ IDEA 14 build project okay but shows a lot of errors in editor","body":"<p>This is typically occurs when the indexes IDEA uses have become corrupt. Thus IDEA cannot properly resolve things. Go to <code>File &gt; Invalidate Caches</code>. Invalidate the caches and restart IDEA. Let it re-index the project (progress will show right of the center of the bottom status bar). Once the indexing is completed, the invalid error marks should go away.</p>\n"},{"tags":[],"owner":{"account_id":29160600,"reputation":1,"user_id":22339440,"display_name":"ASEStefan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691533811,"creation_date":1691157900,"answer_id":76836683,"question_id":28081117,"body_markdown":"I suggest deleting the .idea folder then open the project again.\r\n\r\nThis worked for me.","title":"IntelliJ IDEA 14 build project okay but shows a lot of errors in editor","body":"<p>I suggest deleting the .idea folder then open the project again.</p>\n<p>This worked for me.</p>\n"}],"owner":{"account_id":166827,"reputation":14145,"user_id":391227,"accept_rate":62,"display_name":"Gelin Luo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691533811,"creation_date":1421899437,"question_id":28081117,"body_markdown":"I am encountered a strange error of IntelliJ IDEA today. The project rebuild is all good and I can run the unit test cases, however when I open the source files it displays a lot of errors all due to &quot;Cannot resolve symbols&quot;. It looks like the editor doesn&#39;t recognize the class files it built:\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/bgSeS.png","title":"IntelliJ IDEA 14 build project okay but shows a lot of errors in editor","body":"<p>I am encountered a strange error of IntelliJ IDEA today. The project rebuild is all good and I can run the unit test cases, however when I open the source files it displays a lot of errors all due to \"Cannot resolve symbols\". It looks like the editor doesn't recognize the class files it built:</p>\n\n<p><img src=\"https://i.stack.imgur.com/bgSeS.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","jbutton","layout-manager","japplet","gridbaglayout"],"answers":[{"tags":[],"owner":{"account_id":38175,"reputation":2368,"user_id":109412,"display_name":"Jason Braucht"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1382628905,"creation_date":1382628093,"answer_id":19570009,"question_id":19569884,"body_markdown":"I&#39;d suggest reading through the [How to Use GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html) tutorial if you haven&#39;t already.  GridBagLayout is powerful but it is also one of the more complex LayoutManagers available.\r\n\r\nI believe you need to set the `GridBagConstraints.fill` property to get the behavior you desire.\r\n\r\nIn your case this should be something like \r\n\r\n`c4.fill = GridBagConstraints.HORIZONTAL;`\r\n\r\n*Edit* (A bit of explanation for the observed behavior)  When you use the same text on both buttons, their calculated size ends up being the same, so they are rendered as you want.  When you use different size text, the buttons will render in a size that fits the text by default.  The default value for `GridBagConstraints.fill` is `GridBagConstraints.NONE` which indicates to the LayoutManger to not resize the component.  Changing the fill to `GridBagConstraints.HORIZONTAL` tells the LayoutManger to resize the component horizontally to fill the display area. \r\n \r\n\r\n","title":"Resize buttons using Grid Bag Layout","body":"<p>I'd suggest reading through the <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\" rel=\"nofollow\">How to Use GridBagLayout</a> tutorial if you haven't already.  GridBagLayout is powerful but it is also one of the more complex LayoutManagers available.</p>\n\n<p>I believe you need to set the <code>GridBagConstraints.fill</code> property to get the behavior you desire.</p>\n\n<p>In your case this should be something like </p>\n\n<p><code>c4.fill = GridBagConstraints.HORIZONTAL;</code></p>\n\n<p><em>Edit</em> (A bit of explanation for the observed behavior)  When you use the same text on both buttons, their calculated size ends up being the same, so they are rendered as you want.  When you use different size text, the buttons will render in a size that fits the text by default.  The default value for <code>GridBagConstraints.fill</code> is <code>GridBagConstraints.NONE</code> which indicates to the LayoutManger to not resize the component.  Changing the fill to <code>GridBagConstraints.HORIZONTAL</code> tells the LayoutManger to resize the component horizontally to fill the display area. </p>\n"},{"tags":[],"owner":{"account_id":29159383,"reputation":1,"user_id":22338468,"display_name":"Flo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691533550,"creation_date":1691149546,"answer_id":76835591,"question_id":19569884,"body_markdown":"`GridBagLayout` uses `setPreferredSize`. Try using\r\n\r\n    Dimension buttonDimension = new Dimension(100, 30);\r\n    btnWestern.setPreferredSize(buttonDimension);\r\n    btnPop.setPreferredSize(buttonDimension);","title":"Resize buttons using Grid Bag Layout","body":"<p><code>GridBagLayout</code> uses <code>setPreferredSize</code>. Try using</p>\n<pre><code>Dimension buttonDimension = new Dimension(100, 30);\nbtnWestern.setPreferredSize(buttonDimension);\nbtnPop.setPreferredSize(buttonDimension);\n</code></pre>\n"}],"owner":{"display_name":"user2509901"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2468,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":19570009,"answer_count":2,"score":1,"last_activity_date":1691533550,"creation_date":1382627742,"question_id":19569884,"body_markdown":"I want to resize my buttons to be the same size and place then in a Panel on a JApplet. I have tried using\r\n\r\n    public void init() {\r\n        // TODO start asynchronous download of heavy resources\r\n        \r\n        JButton btnWestern=new JButton(&quot;Western&quot;);\r\n        JButton btnPop=new JButton(&quot;Pop&quot;);\r\n        \r\n        GridBagConstraints c4=new GridBagConstraints();\r\n        \r\n        JPanel jPanel1 = new JPanel();\r\n        getContentPane().setLayout(new java.awt.GridBagLayout());\r\n        jPanel1.setLayout(new java.awt.GridBagLayout());\r\n\r\n        c4.gridx = 0;\r\n        c4.gridy = 0;\r\n        c4.insets = new Insets(36, 10, 0, 249);\r\n        jPanel1.add(btnWestern, c4);\r\n\r\n        c4.gridx = 0;\r\n        c4.gridy = 1;\r\n        c4.insets = new Insets(33, 10, 0, 249);\r\n        jPanel1.add(btnPop, c4);\r\n\r\n        add(jPanel1, new java.awt.GridBagConstraints());\r\n\r\n        }\r\n\r\nWhen I run, this is what I get\r\n\r\n![enter image description here][1]\r\n\r\nBut I noticed that if I change the button text to be the same or have the same length, like\r\n \r\n    JButton btnWestern=new JButton(&quot;Button1&quot;);\r\n    JButton btnPop=new JButton(&quot;Button2&quot;);\r\n\r\nI get the desired output\r\n\r\n![enter image description here][2]\r\n\r\nWhat can I do to make sure that even the text of the buttons are not the same length, the buttons are the same size?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/rGUbe.png\r\n  [2]: http://i.stack.imgur.com/p8hxf.png","title":"Resize buttons using Grid Bag Layout","body":"<p>I want to resize my buttons to be the same size and place then in a Panel on a JApplet. I have tried using</p>\n\n<pre><code>public void init() {\n    // TODO start asynchronous download of heavy resources\n\n    JButton btnWestern=new JButton(\"Western\");\n    JButton btnPop=new JButton(\"Pop\");\n\n    GridBagConstraints c4=new GridBagConstraints();\n\n    JPanel jPanel1 = new JPanel();\n    getContentPane().setLayout(new java.awt.GridBagLayout());\n    jPanel1.setLayout(new java.awt.GridBagLayout());\n\n    c4.gridx = 0;\n    c4.gridy = 0;\n    c4.insets = new Insets(36, 10, 0, 249);\n    jPanel1.add(btnWestern, c4);\n\n    c4.gridx = 0;\n    c4.gridy = 1;\n    c4.insets = new Insets(33, 10, 0, 249);\n    jPanel1.add(btnPop, c4);\n\n    add(jPanel1, new java.awt.GridBagConstraints());\n\n    }\n</code></pre>\n\n<p>When I run, this is what I get</p>\n\n<p><img src=\"https://i.stack.imgur.com/rGUbe.png\" alt=\"enter image description here\"></p>\n\n<p>But I noticed that if I change the button text to be the same or have the same length, like</p>\n\n<pre><code>JButton btnWestern=new JButton(\"Button1\");\nJButton btnPop=new JButton(\"Button2\");\n</code></pre>\n\n<p>I get the desired output</p>\n\n<p><img src=\"https://i.stack.imgur.com/p8hxf.png\" alt=\"enter image description here\"></p>\n\n<p>What can I do to make sure that even the text of the buttons are not the same length, the buttons are the same size?</p>\n"},{"tags":["java","android","foreground-service"],"comments":[{"owner":{"account_id":9840360,"reputation":283,"user_id":7289525,"display_name":"MaKi"},"score":1,"creation_date":1698638496,"post_id":76815437,"comment_id":136426332,"body_markdown":"did you find anything? I am facing the exact issue.","body":"did you find anything? I am facing the exact issue."}],"owner":{"account_id":29139832,"reputation":1,"user_id":22323106,"display_name":"diegobfcy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691532816,"creation_date":1690927085,"question_id":76815437,"body_markdown":"I have two voice recognition services. One is a wake-word service and the other is a speechRecognizer service. When the wake-word is recognized, the wake-word service has to be stopped and the speechRecognizer service has to be started. This works once, but when the wake-word service has to restart after the speechRecognizer service finishes, the following error appears in the logcat:\r\n```\r\nAppOps                  system_server                        E  Operation not started: uid=10382 pkg=com.example.andreabeta(null) op=RECORD_AUDIO\r\n```\r\nThese are my permissions:\r\n\r\n```\r\n &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.START_FOREGROUND_SERVICES_FROM_BACKGROUND&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n```\r\n\r\n\r\nI&#39;ve tried to turn off the battery saving for the application on the phone, but it still doesn&#39;t work.","title":"Start a foreground service from the background Android API 31","body":"<p>I have two voice recognition services. One is a wake-word service and the other is a speechRecognizer service. When the wake-word is recognized, the wake-word service has to be stopped and the speechRecognizer service has to be started. This works once, but when the wake-word service has to restart after the speechRecognizer service finishes, the following error appears in the logcat:</p>\n<pre><code>AppOps                  system_server                        E  Operation not started: uid=10382 pkg=com.example.andreabeta(null) op=RECORD_AUDIO\n</code></pre>\n<p>These are my permissions:</p>\n<pre><code> &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.START_FOREGROUND_SERVICES_FROM_BACKGROUND&quot;\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n</code></pre>\n<p>I've tried to turn off the battery saving for the application on the phone, but it still doesn't work.</p>\n"},{"tags":["java","docker","docker-compose","vaadin","docker-container"],"answers":[{"tags":[],"owner":{"account_id":24998678,"reputation":1,"user_id":18859273,"display_name":"MadMojo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691511900,"creation_date":1691511747,"answer_id":76861472,"question_id":76861189,"body_markdown":"Defining a network should be the correct step, without, none of them knows of each other. We have yet one compose file per every Image. Here how it looks at us:\r\n\r\nBelow mariadb ports you may add\r\n\r\n    networks:\r\n      - my-sql-network\r\n\r\nAnd at the end should be\r\n\r\n    networks:\r\n      my-sql-network:\r\n        name: my-sql-network\r\n        driver: bridge\r\n    \r\nNearly the same in the Apps yaml:\r\n\r\n    networks:\r\n      - my-sql-network\r\n\r\nand at the end\r\n\r\n    networks:\r\n      my-sql-network:\r\n        external: true\r\n\r\nI hope it&#39;s of any help for you!","title":"Docker Containers created with Docker Compose can&#39;t communicate with each other","body":"<p>Defining a network should be the correct step, without, none of them knows of each other. We have yet one compose file per every Image. Here how it looks at us:</p>\n<p>Below mariadb ports you may add</p>\n<pre><code>networks:\n  - my-sql-network\n</code></pre>\n<p>And at the end should be</p>\n<pre><code>networks:\n  my-sql-network:\n    name: my-sql-network\n    driver: bridge\n</code></pre>\n<p>Nearly the same in the Apps yaml:</p>\n<pre><code>networks:\n  - my-sql-network\n</code></pre>\n<p>and at the end</p>\n<pre><code>networks:\n  my-sql-network:\n    external: true\n</code></pre>\n<p>I hope it's of any help for you!</p>\n"},{"tags":[],"owner":{"account_id":6622474,"reputation":3431,"user_id":5113666,"accept_rate":11,"display_name":"Ali Kahoot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691532617,"creation_date":1691532617,"answer_id":76863487,"question_id":76861189,"body_markdown":"The issue is not network related, as a default network is created automatically by docker-compose, if the apps are in same docker-compose file and don&#39;t have any other network specified explicitly.\r\n\r\nThe issue is your app tries to communicate to mariadb, as soon as its up but mariadb isn&#39;t currently fully up to accept connections. The `depends_on` only checks if the container has started, it doesn&#39;t wait for inside app to be up as it doesn&#39;t know which app will take how much time. You can even test it by running `docker-compose up -d`\r\n\r\nand see your app will fail and then again run `docker compose up -d`, now only your app will re-run but mariadb will already be up.\r\n\r\nSo you can Add Healtcheck on mariadb container to wait until it becomes fully healthy and then mark it as UP","title":"Docker Containers created with Docker Compose can&#39;t communicate with each other","body":"<p>The issue is not network related, as a default network is created automatically by docker-compose, if the apps are in same docker-compose file and don't have any other network specified explicitly.</p>\n<p>The issue is your app tries to communicate to mariadb, as soon as its up but mariadb isn't currently fully up to accept connections. The <code>depends_on</code> only checks if the container has started, it doesn't wait for inside app to be up as it doesn't know which app will take how much time. You can even test it by running <code>docker-compose up -d</code></p>\n<p>and see your app will fail and then again run <code>docker compose up -d</code>, now only your app will re-run but mariadb will already be up.</p>\n<p>So you can Add Healtcheck on mariadb container to wait until it becomes fully healthy and then mark it as UP</p>\n"}],"owner":{"account_id":29185790,"reputation":11,"user_id":22359000,"display_name":"G&#246;rmenProgr&#228;mmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691532617,"creation_date":1691509569,"question_id":76861189,"body_markdown":"I tried to set up two Docker containers with docker compose (Vaadin app and MariaDB database). \r\n\r\n\r\ndocker-compose.yml:\r\n```\r\nversion: &quot;3.8&quot;\r\n\r\nservices:\r\n vaadin-app:\r\n  build:\r\n   context: .\r\n  container_name: vaadin-app\r\n  ports:\r\n   - 8080:8080\r\n  depends_on:\r\n   - mariadb\r\n   \r\n mariadb:\r\n  image: &quot;mariadb:10.5.8&quot;\r\n  container_name: mariadb\r\n  environment:\r\n   MYSQL_ROOT_PASSWORD: test\r\n   MYSQL_DATABASE: Test\r\n   MYSQL_USER: test2\r\n   MYSQL_PASSWORD: test2\r\n  volumes:\r\n   - data:/var/lib/mysql\r\n  ports:\r\n   - 3306:3306\r\n\r\nvolumes:\r\n data:\r\n```\r\n\r\nDockerfile:\r\n```\r\nFROM openjdk:17-jdk-slim\r\nCOPY target/contacts-md-1.0-SNAPSHOT.jar app.jar\r\nEXPOSE 8080\r\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]\r\n```\r\n\r\napplication.properties:\r\n```\r\nserver.port=${PORT:8080}\r\nlogging.level.org.atmosphere = warn\r\nspring.mustache.check-template-location = false\r\n\r\n# Launch the default browser when starting the application in development mode\r\nvaadin.launch-browser=true\r\n# To improve the performance during development.\r\n# For more information https://vaadin.com/docs/flow/spring/tutorial-spring-configuration.html#special-configuration-parameters\r\nvaadin.whitelisted-packages=com.vaadin,org.vaadin,dev.hilla,com.example.contacts\r\nspring.jpa.defer-datasource-initialization=true\r\n\r\n# Database stuff\r\nspring.datasource.url=jdbc:mysql://mariadb:3306/Test\r\nspring.datasource.username=test2\r\nspring.datasource.password=test2\r\nspring.sql.init.mode=always\r\n\r\n# Hibernate stuff\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n\r\nWhen I try to set it up with docker-compose, the vaadin-app container exits after a few seconds and I get the following error log:\r\n\r\n```\r\nvaadin-app  | Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\nvaadin-app  |\r\nvaadin-app  |\r\nvaadin-app  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\nvaadin-app  |   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\nvaadin-app  |   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\r\nvaadin-app  |   at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\nvaadin-app  |   at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\nvaadin-app  |   at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\r\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.NativeSession.connect(NativeSession.java:119) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   ... 62 common frames omitted\r\nvaadin-app  | Caused by: java.net.ConnectException: Connection refused\r\nvaadin-app  |   at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\r\nvaadin-app  |   at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\r\nvaadin-app  |   at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542) ~[na:na]\r\nvaadin-app  |   at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]\r\nvaadin-app  |   at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\r\nvaadin-app  |   at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\r\nvaadin-app  |   at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:156) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   ... 65 common frames omitted\r\n```\r\n\r\n\r\n\r\nI have already tried to declare a custom network for both containers, which hasn&#39;t solved the problem.","title":"Docker Containers created with Docker Compose can&#39;t communicate with each other","body":"<p>I tried to set up two Docker containers with docker compose (Vaadin app and MariaDB database).</p>\n<p>docker-compose.yml:</p>\n<pre><code>version: &quot;3.8&quot;\n\nservices:\n vaadin-app:\n  build:\n   context: .\n  container_name: vaadin-app\n  ports:\n   - 8080:8080\n  depends_on:\n   - mariadb\n   \n mariadb:\n  image: &quot;mariadb:10.5.8&quot;\n  container_name: mariadb\n  environment:\n   MYSQL_ROOT_PASSWORD: test\n   MYSQL_DATABASE: Test\n   MYSQL_USER: test2\n   MYSQL_PASSWORD: test2\n  volumes:\n   - data:/var/lib/mysql\n  ports:\n   - 3306:3306\n\nvolumes:\n data:\n</code></pre>\n<p>Dockerfile:</p>\n<pre><code>FROM openjdk:17-jdk-slim\nCOPY target/contacts-md-1.0-SNAPSHOT.jar app.jar\nEXPOSE 8080\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]\n</code></pre>\n<p>application.properties:</p>\n<pre><code>server.port=${PORT:8080}\nlogging.level.org.atmosphere = warn\nspring.mustache.check-template-location = false\n\n# Launch the default browser when starting the application in development mode\nvaadin.launch-browser=true\n# To improve the performance during development.\n# For more information https://vaadin.com/docs/flow/spring/tutorial-spring-configuration.html#special-configuration-parameters\nvaadin.whitelisted-packages=com.vaadin,org.vaadin,dev.hilla,com.example.contacts\nspring.jpa.defer-datasource-initialization=true\n\n# Database stuff\nspring.datasource.url=jdbc:mysql://mariadb:3306/Test\nspring.datasource.username=test2\nspring.datasource.password=test2\nspring.sql.init.mode=always\n\n# Hibernate stuff\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>When I try to set it up with docker-compose, the vaadin-app container exits after a few seconds and I get the following error log:</p>\n<pre><code>vaadin-app  | Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\nvaadin-app  |\nvaadin-app  |\nvaadin-app  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\nvaadin-app  |   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\nvaadin-app  |   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\nvaadin-app  |   at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\nvaadin-app  |   at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\nvaadin-app  |   at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.NativeSession.connect(NativeSession.java:119) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   ... 62 common frames omitted\nvaadin-app  | Caused by: java.net.ConnectException: Connection refused\nvaadin-app  |   at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\nvaadin-app  |   at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\nvaadin-app  |   at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542) ~[na:na]\nvaadin-app  |   at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]\nvaadin-app  |   at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\nvaadin-app  |   at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\nvaadin-app  |   at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:156) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   ... 65 common frames omitted\n</code></pre>\n<p>I have already tried to declare a custom network for both containers, which hasn't solved the problem.</p>\n"},{"tags":["java","concurrency"],"answers":[{"tags":[],"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1357812595,"creation_date":1357811822,"answer_id":14255075,"question_id":14255019,"body_markdown":"[java.util.concurrent.Semaphore][1] seems to fit the bill.\r\n\r\n\r\n   * acquire() or acquire(n)\r\n   * &lt;strike&gt;also acquire()  (not sure I understand what the difference is here)&lt;/strike&gt; (*)\r\n   * release() or release(n)\r\n\r\n\r\n(*) Okay, there is no built-in method to wait until the semaphore becomes *unavailable*. I suppose you&#39;d write your own wrapper for `acquire` that does a `tryAcquire` first and if that fails triggers your &quot;busy event&quot; (and continues using the normal `acquire`). Everyone would need to call your wrapper. Maybe subclass Semaphore?\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html","title":"Latch that can be incremented","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html\" rel=\"noreferrer\">java.util.concurrent.Semaphore</a> seems to fit the bill.</p>\n\n<ul>\n<li>acquire() or acquire(n)</li>\n<li><strike>also acquire()  (not sure I understand what the difference is here)</strike> (*)</li>\n<li>release() or release(n)</li>\n</ul>\n\n<p>(*) Okay, there is no built-in method to wait until the semaphore becomes <em>unavailable</em>. I suppose you'd write your own wrapper for <code>acquire</code> that does a <code>tryAcquire</code> first and if that fails triggers your \"busy event\" (and continues using the normal <code>acquire</code>). Everyone would need to call your wrapper. Maybe subclass Semaphore?</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":2,"up_vote_count":9,"is_accepted":true,"score":7,"last_activity_date":1357829825,"creation_date":1357829825,"answer_id":14260716,"question_id":14255019,"body_markdown":"Instead of starting back from AQS, you could use a simple implementation like below. It is somewhat naive (it is synchronized vs. AQS lock-free algorithms) but unless you expect to use it in a contented scenario it could be good enough.\r\n\r\n    public class CountUpAndDownLatch {\r\n        private CountDownLatch latch;\r\n        private final Object lock = new Object();\r\n        \r\n        public CountUpAndDownLatch(int count) {\r\n            this.latch = new CountDownLatch(count);\r\n        }\r\n        \r\n        public void countDownOrWaitIfZero() throws InterruptedException {\r\n            synchronized(lock) {\r\n                while(latch.getCount() == 0) {\r\n                    lock.wait();\r\n                }\r\n                latch.countDown();\r\n                lock.notifyAll();\r\n            }\r\n        }\r\n        \r\n        public void waitUntilZero() throws InterruptedException {\r\n            synchronized(lock) {\r\n                while(latch.getCount() != 0) {\r\n                    lock.wait();\r\n                }\r\n            }\r\n        }\r\n\r\n        public void countUp() { //should probably check for Integer.MAX_VALUE\r\n            synchronized(lock) {\r\n                latch = new CountDownLatch((int) latch.getCount() + 1);\r\n                lock.notifyAll();\r\n            }\r\n        }\r\n\r\n        public int getCount() {\r\n            synchronized(lock) {\r\n                return (int) latch.getCount();\r\n            }\r\n        }\r\n    }\r\n\r\nNote: I have not tested it in depth but it seems to behave as expected:\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        final CountUpAndDownLatch latch = new CountUpAndDownLatch(1);\r\n        Runnable up = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;IN UP &quot; + latch.getCount());\r\n                    latch.countUp();\r\n                    System.out.println(&quot;UP &quot; + latch.getCount());\r\n                } catch (InterruptedException ex) {\r\n                }\r\n            }\r\n        };\r\n\r\n        Runnable downOrWait = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;IN DOWN &quot; + latch.getCount());\r\n                    latch.countDownOrWaitIfZero();\r\n                    System.out.println(&quot;DOWN &quot; + latch.getCount());\r\n                } catch (InterruptedException ex) {\r\n                }\r\n            }\r\n        };\r\n\r\n        Runnable waitFor0 = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;WAIT FOR ZERO &quot; + latch.getCount());\r\n                    latch.waitUntilZero();\r\n                    System.out.println(&quot;ZERO &quot; + latch.getCount());\r\n                } catch (InterruptedException ex) {\r\n                }\r\n            }\r\n        };\r\n        new Thread(waitFor0).start();\r\n        up.run();\r\n        downOrWait.run();\r\n        Thread.sleep(100);\r\n        downOrWait.run();\r\n        new Thread(up).start();\r\n        downOrWait.run();\r\n    }\r\n\r\nOutput:\r\n\r\n    IN UP 1\r\n    UP 2\r\n    WAIT FOR ZERO 1\r\n    IN DOWN 2\r\n    DOWN 1\r\n    IN DOWN 1\r\n    ZERO 0\r\n    DOWN 0\r\n    IN DOWN 0\r\n    IN UP 0\r\n    DOWN 0\r\n    UP 0","title":"Latch that can be incremented","body":"<p>Instead of starting back from AQS, you could use a simple implementation like below. It is somewhat naive (it is synchronized vs. AQS lock-free algorithms) but unless you expect to use it in a contented scenario it could be good enough.</p>\n\n<pre><code>public class CountUpAndDownLatch {\n    private CountDownLatch latch;\n    private final Object lock = new Object();\n\n    public CountUpAndDownLatch(int count) {\n        this.latch = new CountDownLatch(count);\n    }\n\n    public void countDownOrWaitIfZero() throws InterruptedException {\n        synchronized(lock) {\n            while(latch.getCount() == 0) {\n                lock.wait();\n            }\n            latch.countDown();\n            lock.notifyAll();\n        }\n    }\n\n    public void waitUntilZero() throws InterruptedException {\n        synchronized(lock) {\n            while(latch.getCount() != 0) {\n                lock.wait();\n            }\n        }\n    }\n\n    public void countUp() { //should probably check for Integer.MAX_VALUE\n        synchronized(lock) {\n            latch = new CountDownLatch((int) latch.getCount() + 1);\n            lock.notifyAll();\n        }\n    }\n\n    public int getCount() {\n        synchronized(lock) {\n            return (int) latch.getCount();\n        }\n    }\n}\n</code></pre>\n\n<p>Note: I have not tested it in depth but it seems to behave as expected:</p>\n\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    final CountUpAndDownLatch latch = new CountUpAndDownLatch(1);\n    Runnable up = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                System.out.println(\"IN UP \" + latch.getCount());\n                latch.countUp();\n                System.out.println(\"UP \" + latch.getCount());\n            } catch (InterruptedException ex) {\n            }\n        }\n    };\n\n    Runnable downOrWait = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                System.out.println(\"IN DOWN \" + latch.getCount());\n                latch.countDownOrWaitIfZero();\n                System.out.println(\"DOWN \" + latch.getCount());\n            } catch (InterruptedException ex) {\n            }\n        }\n    };\n\n    Runnable waitFor0 = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                System.out.println(\"WAIT FOR ZERO \" + latch.getCount());\n                latch.waitUntilZero();\n                System.out.println(\"ZERO \" + latch.getCount());\n            } catch (InterruptedException ex) {\n            }\n        }\n    };\n    new Thread(waitFor0).start();\n    up.run();\n    downOrWait.run();\n    Thread.sleep(100);\n    downOrWait.run();\n    new Thread(up).start();\n    downOrWait.run();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>IN UP 1\nUP 2\nWAIT FOR ZERO 1\nIN DOWN 2\nDOWN 1\nIN DOWN 1\nZERO 0\nDOWN 0\nIN DOWN 0\nIN UP 0\nDOWN 0\nUP 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1836471,"reputation":416,"user_id":1666753,"display_name":"Guido Medina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691532584,"creation_date":1378138025,"answer_id":18577140,"question_id":14255019,"body_markdown":"I needed one and built it using the same strategy as CountDownLatch which uses AQS (non-blocking), this class is also very similar (If not exact) to one created for Apache Camel, I think it is also lighter than JDK Phaser, this will act just like CountDownLact from JDK, it won&#39;t let you count down below zero and will allow you count down and up:\r\n\r\n    \r\n\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.concurrent.locks.AbstractQueuedSynchronizer;\r\n        \r\n    public class CountingLatch\r\n    {\r\n      /**\r\n       * Synchronization control for CountingLatch.\r\n       * Uses AQS state to represent count.\r\n       */\r\n      private static final class Sync extends AbstractQueuedSynchronizer\r\n      {\r\n        private Sync()\r\n        {\r\n        }\r\n    \r\n        private Sync(final int initialState)\r\n        {\r\n          setState(initialState);\r\n        }\r\n    \r\n        int getCount()\r\n        {\r\n          return getState();\r\n        }\r\n    \r\n        protected int tryAcquireShared(final int acquires)\r\n        {\r\n          return getState()==0 ? 1 : -1;\r\n        }\r\n    \r\n        protected boolean tryReleaseShared(final int delta)\r\n        {\r\n          // Decrement count; signal when transition to zero\r\n          for(; ; ){\r\n            final int c=getState();\r\n            final int nextc=c+delta;\r\n            if(nextc&lt;0){\r\n              return false;\r\n            }\r\n            if(compareAndSetState(c,nextc)){\r\n              return nextc==0;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    \r\n      private final Sync sync;\r\n    \r\n      public CountingLatch()\r\n      {\r\n        sync=new Sync();\r\n      }\r\n    \r\n      public CountingLatch(final int initialCount)\r\n      {\r\n        sync=new Sync(initialCount);\r\n      }\r\n    \r\n      public void increment()\r\n      {\r\n        sync.releaseShared(1);\r\n      }\r\n    \r\n      public int getCount()\r\n      {\r\n        return sync.getCount();\r\n      }\r\n    \r\n      public void decrement()\r\n      {\r\n        sync.releaseShared(-1);\r\n      }\r\n    \r\n      public void await() throws InterruptedException\r\n      {\r\n        sync.acquireSharedInterruptibly(1);\r\n      }\r\n    \r\n      public boolean await(final long timeout) throws InterruptedException\r\n      {\r\n        return sync.tryAcquireSharedNanos(1,TimeUnit.MILLISECONDS.toNanos(timeout));\r\n      }\r\n    }\r\n\r\n","title":"Latch that can be incremented","body":"<p>I needed one and built it using the same strategy as CountDownLatch which uses AQS (non-blocking), this class is also very similar (If not exact) to one created for Apache Camel, I think it is also lighter than JDK Phaser, this will act just like CountDownLact from JDK, it won't let you count down below zero and will allow you count down and up:</p>\n<pre><code>import java.util.concurrent.TimeUnit;\nimport java.util.concurrent.locks.AbstractQueuedSynchronizer;\n    \npublic class CountingLatch\n{\n  /**\n   * Synchronization control for CountingLatch.\n   * Uses AQS state to represent count.\n   */\n  private static final class Sync extends AbstractQueuedSynchronizer\n  {\n    private Sync()\n    {\n    }\n\n    private Sync(final int initialState)\n    {\n      setState(initialState);\n    }\n\n    int getCount()\n    {\n      return getState();\n    }\n\n    protected int tryAcquireShared(final int acquires)\n    {\n      return getState()==0 ? 1 : -1;\n    }\n\n    protected boolean tryReleaseShared(final int delta)\n    {\n      // Decrement count; signal when transition to zero\n      for(; ; ){\n        final int c=getState();\n        final int nextc=c+delta;\n        if(nextc&lt;0){\n          return false;\n        }\n        if(compareAndSetState(c,nextc)){\n          return nextc==0;\n        }\n      }\n    }\n  }\n\n  private final Sync sync;\n\n  public CountingLatch()\n  {\n    sync=new Sync();\n  }\n\n  public CountingLatch(final int initialCount)\n  {\n    sync=new Sync(initialCount);\n  }\n\n  public void increment()\n  {\n    sync.releaseShared(1);\n  }\n\n  public int getCount()\n  {\n    return sync.getCount();\n  }\n\n  public void decrement()\n  {\n    sync.releaseShared(-1);\n  }\n\n  public void await() throws InterruptedException\n  {\n    sync.acquireSharedInterruptibly(1);\n  }\n\n  public boolean await(final long timeout) throws InterruptedException\n  {\n    return sync.tryAcquireSharedNanos(1,TimeUnit.MILLISECONDS.toNanos(timeout));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263613,"reputation":1749,"user_id":549296,"accept_rate":80,"display_name":"Michael-7"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1433490701,"creation_date":1433490701,"answer_id":30661185,"question_id":14255019,"body_markdown":"For those needing an AQS based solution, here&#39;s one that worked for me:\r\n\r\n    public class CountLatch {\r\n    \r\n        private class Sync extends AbstractQueuedSynchronizer {\r\n            private static final long serialVersionUID = 1L;\r\n    \r\n            public Sync() {\r\n            }\r\n    \r\n            @Override\r\n            protected int tryAcquireShared(int arg) {\r\n                return count.get() == releaseValue ? 1 : -1;\r\n            }\r\n    \r\n            @Override\r\n            protected boolean tryReleaseShared(int arg) {\r\n                return true;\r\n            }\r\n        }\r\n    \r\n        private final Sync sync;\r\n        private final AtomicLong count;\r\n        private volatile long releaseValue;\r\n    \r\n        public CountLatch(final long initial, final long releaseValue) {\r\n            this.releaseValue = releaseValue;\r\n            this.count = new AtomicLong(initial);\r\n            this.sync = new Sync();\r\n        }\r\n    \r\n        public void await() throws InterruptedException {\r\n            sync.acquireSharedInterruptibly(1);\r\n        }\r\n    \r\n        public long countUp() {\r\n            final long current = count.incrementAndGet();\r\n            if (current == releaseValue) {\r\n                sync.releaseShared(0);\r\n            }\r\n            return current;\r\n        }\r\n    \r\n        public long countDown() {\r\n            final long current = count.decrementAndGet();\r\n            if (current == releaseValue) {\r\n                sync.releaseShared(0);\r\n            }\r\n            return current;\r\n        }\r\n    \r\n        public long getCount() {\r\n            return count.get();\r\n        }\r\n    }\r\n\r\nYou initialize the synchronizer with an initial and target value. Once the target value has been reached (by counting up and / or down), the waiting threads will be released.","title":"Latch that can be incremented","body":"<p>For those needing an AQS based solution, here's one that worked for me:</p>\n\n<pre><code>public class CountLatch {\n\n    private class Sync extends AbstractQueuedSynchronizer {\n        private static final long serialVersionUID = 1L;\n\n        public Sync() {\n        }\n\n        @Override\n        protected int tryAcquireShared(int arg) {\n            return count.get() == releaseValue ? 1 : -1;\n        }\n\n        @Override\n        protected boolean tryReleaseShared(int arg) {\n            return true;\n        }\n    }\n\n    private final Sync sync;\n    private final AtomicLong count;\n    private volatile long releaseValue;\n\n    public CountLatch(final long initial, final long releaseValue) {\n        this.releaseValue = releaseValue;\n        this.count = new AtomicLong(initial);\n        this.sync = new Sync();\n    }\n\n    public void await() throws InterruptedException {\n        sync.acquireSharedInterruptibly(1);\n    }\n\n    public long countUp() {\n        final long current = count.incrementAndGet();\n        if (current == releaseValue) {\n            sync.releaseShared(0);\n        }\n        return current;\n    }\n\n    public long countDown() {\n        final long current = count.decrementAndGet();\n        if (current == releaseValue) {\n            sync.releaseShared(0);\n        }\n        return current;\n    }\n\n    public long getCount() {\n        return count.get();\n    }\n}\n</code></pre>\n\n<p>You initialize the synchronizer with an initial and target value. Once the target value has been reached (by counting up and / or down), the waiting threads will be released.</p>\n"},{"tags":[],"owner":{"account_id":263613,"reputation":1749,"user_id":549296,"accept_rate":80,"display_name":"Michael-7"},"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1671862762,"creation_date":1441642820,"answer_id":32442754,"question_id":14255019,"body_markdown":"You could also use a [Phaser (java.util.concurrent.Phaser)][1]\r\n\r\n    final Phaser phaser = new Phaser(1); // register self\r\n    while (/* some condition */) {\r\n        phaser.register(); // Equivalent to countUp\r\n        // do some work asynchronously, invoking\r\n        // phaser.arriveAndDeregister() (equiv to countDown) in a finally block\r\n    }\r\n    phaser.arriveAndAwaitAdvance(); // await any async tasks to complete\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Phaser.html","title":"Latch that can be incremented","body":"<p>You could also use a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Phaser.html\" rel=\"nofollow noreferrer\">Phaser (java.util.concurrent.Phaser)</a></p>\n<pre><code>final Phaser phaser = new Phaser(1); // register self\nwhile (/* some condition */) {\n    phaser.register(); // Equivalent to countUp\n    // do some work asynchronously, invoking\n    // phaser.arriveAndDeregister() (equiv to countDown) in a finally block\n}\nphaser.arriveAndAwaitAdvance(); // await any async tasks to complete\n</code></pre>\n"},{"tags":[],"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456869941,"creation_date":1456869941,"answer_id":35734537,"question_id":14255019,"body_markdown":"This is a variation on `CounterLatch`, available from the Apache site.  \r\n\r\nTheir version, for reasons best known to themselves, blocks the caller thread **while** the variable (`AtomicInteger`) is at a given value.  \r\n\r\nBut it is the height of easiness to tweak this code so that you can choose either just what the Apache version does, or... to say &quot;wait here **until** the counter reaches a certain value&quot;.  Arguably the latter is going to have more applicability.  In my particular case I rustled this up because I wanted to check that all &quot;chunks&quot; had been published in `SwingWorker.process()`... but I have since found other uses for it.\r\n\r\nHere it is written in Jython, officially the best language in the world (TM). I am going to rustle up a Java version in due course.\r\n\r\n    class CounterLatch():\r\n        def __init__( self, initial = 0, wait_value = 0, lift_on_reached = True ):\r\n            self.count = java.util.concurrent.atomic.AtomicLong( initial )\r\n            self.signal = java.util.concurrent.atomic.AtomicLong( wait_value )\r\n    \r\n            class Sync( java.util.concurrent.locks.AbstractQueuedSynchronizer ):\r\n                def tryAcquireShared( sync_self, arg ):\r\n                    if lift_on_reached:\r\n                        return -1 if (( not self.released.get() ) and self.count.get() != self.signal.get() ) else 1\r\n                    else:\r\n                        return -1 if (( not self.released.get() ) and self.count.get() == self.signal.get() ) else 1\r\n                def tryReleaseShared( self, args ):\r\n                    return True\r\n    \r\n            self.sync = Sync()\r\n            self.released = java.util.concurrent.atomic.AtomicBoolean() # initialised at False\r\n    \r\n        def await( self, *args ):\r\n            if args:\r\n                assert len( args ) == 2\r\n                assert type( args[ 0 ] ) is int\r\n                timeout = args[ 0 ]\r\n                assert type( args[ 1 ] ) is java.util.concurrent.TimeUnit\r\n                unit = args[ 1 ]\r\n                return self.sync.tryAcquireSharedNanos(1, unit.toNanos(timeout))\r\n            else:\r\n                self.sync.acquireSharedInterruptibly( 1 )\r\n    \r\n        def count_relative( self, n ):\r\n            previous = self.count.addAndGet( n )\r\n            if previous == self.signal.get():\r\n                self.sync.releaseShared( 0 )\r\n            return previous\r\n\r\nNB the Apache version uses the keyword `volatile` for `signal` and `released`.  In Jython I don&#39;t think this exists as such, but using `AtomicInteger` and `AtomicBoolean` should ensure that no values are &quot;out of date&quot; in any thread.\r\n\r\nExample usage:\r\n\r\nIn the SwingWorker constructor:\r\n\r\n    self.publication_counter_latch = CounterLatch() \r\n\r\nIn SW.publish:\r\n\r\n    # increase counter value BEFORE publishing chunks\r\n    self.publication_counter_latch.count_relative( len( chunks ) )\r\n    self.super__publish( chunks )\r\n\r\nIn SW.process:\r\n\r\n    # ... do sthg [HERE] with the chunks!\r\n    # AFTER having done what you want to do with your chunks:\r\n    self.publication_counter_latch.count_relative( - len( chunks ) )\r\n\r\nIn the thread waiting for chunk processing to stop:\r\n\r\n    worker.publication_counter_latch.await()\r\n\r\n","title":"Latch that can be incremented","body":"<p>This is a variation on <code>CounterLatch</code>, available from the Apache site.  </p>\n\n<p>Their version, for reasons best known to themselves, blocks the caller thread <strong>while</strong> the variable (<code>AtomicInteger</code>) is at a given value.  </p>\n\n<p>But it is the height of easiness to tweak this code so that you can choose either just what the Apache version does, or... to say \"wait here <strong>until</strong> the counter reaches a certain value\".  Arguably the latter is going to have more applicability.  In my particular case I rustled this up because I wanted to check that all \"chunks\" had been published in <code>SwingWorker.process()</code>... but I have since found other uses for it.</p>\n\n<p>Here it is written in Jython, officially the best language in the world (TM). I am going to rustle up a Java version in due course.</p>\n\n<pre><code>class CounterLatch():\n    def __init__( self, initial = 0, wait_value = 0, lift_on_reached = True ):\n        self.count = java.util.concurrent.atomic.AtomicLong( initial )\n        self.signal = java.util.concurrent.atomic.AtomicLong( wait_value )\n\n        class Sync( java.util.concurrent.locks.AbstractQueuedSynchronizer ):\n            def tryAcquireShared( sync_self, arg ):\n                if lift_on_reached:\n                    return -1 if (( not self.released.get() ) and self.count.get() != self.signal.get() ) else 1\n                else:\n                    return -1 if (( not self.released.get() ) and self.count.get() == self.signal.get() ) else 1\n            def tryReleaseShared( self, args ):\n                return True\n\n        self.sync = Sync()\n        self.released = java.util.concurrent.atomic.AtomicBoolean() # initialised at False\n\n    def await( self, *args ):\n        if args:\n            assert len( args ) == 2\n            assert type( args[ 0 ] ) is int\n            timeout = args[ 0 ]\n            assert type( args[ 1 ] ) is java.util.concurrent.TimeUnit\n            unit = args[ 1 ]\n            return self.sync.tryAcquireSharedNanos(1, unit.toNanos(timeout))\n        else:\n            self.sync.acquireSharedInterruptibly( 1 )\n\n    def count_relative( self, n ):\n        previous = self.count.addAndGet( n )\n        if previous == self.signal.get():\n            self.sync.releaseShared( 0 )\n        return previous\n</code></pre>\n\n<p>NB the Apache version uses the keyword <code>volatile</code> for <code>signal</code> and <code>released</code>.  In Jython I don't think this exists as such, but using <code>AtomicInteger</code> and <code>AtomicBoolean</code> should ensure that no values are \"out of date\" in any thread.</p>\n\n<p>Example usage:</p>\n\n<p>In the SwingWorker constructor:</p>\n\n<pre><code>self.publication_counter_latch = CounterLatch() \n</code></pre>\n\n<p>In SW.publish:</p>\n\n<pre><code># increase counter value BEFORE publishing chunks\nself.publication_counter_latch.count_relative( len( chunks ) )\nself.super__publish( chunks )\n</code></pre>\n\n<p>In SW.process:</p>\n\n<pre><code># ... do sthg [HERE] with the chunks!\n# AFTER having done what you want to do with your chunks:\nself.publication_counter_latch.count_relative( - len( chunks ) )\n</code></pre>\n\n<p>In the thread waiting for chunk processing to stop:</p>\n\n<pre><code>worker.publication_counter_latch.await()\n</code></pre>\n"}],"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20220,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":14260716,"answer_count":6,"score":37,"last_activity_date":1691532584,"creation_date":1357811680,"question_id":14255019,"body_markdown":"Does anyone know if there is any latch implementation that does the following:\r\n\r\n* has a method to decrement the latch value, or wait if the value is zero\r\n* has a method for waiting for the latch value to be zero\r\n* has a method for adding a number to the latch&#39;s value\r\n","title":"Latch that can be incremented","body":"<p>Does anyone know if there is any latch implementation that does the following:</p>\n\n<ul>\n<li>has a method to decrement the latch value, or wait if the value is zero</li>\n<li>has a method for waiting for the latch value to be zero</li>\n<li>has a method for adding a number to the latch's value</li>\n</ul>\n"},{"tags":["java","swing","user-interface","highdpi"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1691530729,"post_id":76862844,"comment_id":135503682,"body_markdown":"I&#39;m curious as to the reason for creating a &quot;off screen buffer&quot; image within `paintComponent`, which is already double buffered, but lets, for the moment, just assume that this is a demonstration of the problem and not the actual implementation.  You could make use of the `Graphics` current transformation, `Graphics2D#getTransform` and it&#39;s `getScaleX/getScaleY` methods - you could then generate an image and apply this scaling to it (based on what I&#39;ve read)","body":"I&#39;m curious as to the reason for creating a &quot;off screen buffer&quot; image within <code>paintComponent</code>, which is already double buffered, but lets, for the moment, just assume that this is a demonstration of the problem and not the actual implementation.  You could make use of the <code>Graphics</code> current transformation, <code>Graphics2D#getTransform</code> and it&#39;s <code>getScaleX&#47;getScaleY</code> methods - you could then generate an image and apply this scaling to it (based on what I&#39;ve read)"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1691530839,"post_id":76862844,"comment_id":135503692,"body_markdown":"https://stackoverflow.com/questions/43057457/jdk-9-high-dpi-disable-for-specific-panel might help a bit","body":"<a href=\"https://stackoverflow.com/questions/43057457/jdk-9-high-dpi-disable-for-specific-panel\" title=\"jdk 9 high dpi disable for specific panel\">stackoverflow.com/questions/43057457/&hellip;</a> might help a bit"}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691531163,"creation_date":1691531163,"answer_id":76863397,"question_id":76862844,"body_markdown":"There is something like scalingAwareBuffer.  It’s the [RenderableImage](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/renderable/RenderableImage.html) interface.\r\n\r\nI’m not certain this will help, but in theory it should.  RenderableImage looks like it has a lot of methods, but most of them are very simple.  The important ones are the three create… methods.\r\n\r\nEven this won’t produce an identical copy from the image (due to the use of the GPU when drawing directly to the screen?), but the image should at least scale properly.\r\n\r\n    import java.util.Vector;\r\n    import java.util.Map;\r\n\r\n    import java.awt.Container;\r\n    import java.awt.Color;\r\n    import java.awt.Font;\r\n    import java.awt.Image;\r\n    import java.awt.Shape;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.BasicStroke;\r\n    import java.awt.RenderingHints;\r\n    import java.awt.EventQueue;\r\n\r\n    import java.awt.geom.Line2D;\r\n    import java.awt.geom.Point2D;\r\n    import java.awt.geom.Rectangle2D;\r\n    import java.awt.geom.AffineTransform;\r\n\r\n    import java.awt.image.BufferedImage;\r\n    import java.awt.image.RenderedImage;\r\n    import java.awt.image.renderable.RenderableImage;\r\n    import java.awt.image.renderable.RenderContext;\r\n\r\n    import javax.swing.JComponent;\r\n    import javax.swing.JFrame;\r\n\r\n    public class ScaledImageRenderExample1 {\r\n        public static void main(String[] args) {\r\n            EventQueue.invokeLater(() -&gt; {\r\n                JFrame jf = new JFrame(&quot;Demo&quot;);\r\n                Container cp = jf.getContentPane();\r\n                MyCanvas tl = new MyCanvas();\r\n                cp.add(tl);\r\n                jf.setSize(500, 250);\r\n                jf.setLocationByPlatform( true );\r\n                jf.setVisible(true);\r\n                jf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n            });\r\n        }\r\n\r\n        static class MyCanvas extends JComponent {\r\n            private static final long serialVersionUID = 1;\r\n\r\n            @Override\r\n            public void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                if( g instanceof Graphics2D g2 ) {\r\n                    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n                        RenderingHints.VALUE_ANTIALIAS_ON);\r\n\r\n                    g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n                    g2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\r\n                    g2.setStroke( new BasicStroke( 2.3f ) );\r\n                    g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n\r\n                    g2.drawRenderableImage(new CakeImage(),\r\n                        AffineTransform.getTranslateInstance(0, 130));\r\n                }\r\n            }\r\n        }\r\n\r\n        static class CakeImage implements RenderableImage {\r\n            private static final int DEFAULT_WIDTH = 500;\r\n            private static final int DEFAULT_HEIGHT = 150;\r\n\r\n            private static final RenderingHints DEFAULT_HINTS =\r\n                new RenderingHints(Map.of(\r\n                    RenderingHints.KEY_ANTIALIASING,\r\n                    RenderingHints.VALUE_ANTIALIAS_ON,\r\n\r\n                    RenderingHints.KEY_TEXT_ANTIALIASING,\r\n                    RenderingHints.VALUE_TEXT_ANTIALIAS_ON,\r\n\r\n                    RenderingHints.KEY_FRACTIONALMETRICS,\r\n                    RenderingHints.VALUE_FRACTIONALMETRICS_ON,\r\n\r\n                    RenderingHints.KEY_RESOLUTION_VARIANT,\r\n                    RenderingHints.VALUE_RESOLUTION_VARIANT_SIZE_FIT,\r\n\r\n                    RenderingHints.KEY_RENDERING,\r\n                    RenderingHints.VALUE_RENDER_QUALITY,\r\n\r\n                    RenderingHints.KEY_INTERPOLATION,\r\n                    RenderingHints.VALUE_INTERPOLATION_BICUBIC,\r\n\r\n                    RenderingHints.KEY_STROKE_CONTROL,\r\n                    RenderingHints.VALUE_STROKE_PURE,\r\n\r\n                    RenderingHints.KEY_COLOR_RENDERING,\r\n                    RenderingHints.VALUE_COLOR_RENDER_QUALITY\r\n            ));\r\n\r\n\r\n            private final float x;\r\n            private final float y;\r\n\r\n            CakeImage() {\r\n                this(0, 0);\r\n            }\r\n\r\n            CakeImage(float x,\r\n                      float y) {\r\n\r\n                this.x = x;\r\n                this.y = y;\r\n            }\r\n\r\n            @Override\r\n            public float getMinX() {\r\n                return x;\r\n            }\r\n\r\n            @Override\r\n            public float getMinY() {\r\n                return y;\r\n            }\r\n\r\n            @Override\r\n            public float getWidth() {\r\n                return DEFAULT_WIDTH;\r\n            }\r\n\r\n            @Override\r\n            public float getHeight() {\r\n                return DEFAULT_HEIGHT;\r\n            }\r\n\r\n            @Override\r\n            public boolean isDynamic() {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public Object getProperty(String name) {\r\n                return Image.UndefinedProperty;\r\n            }\r\n\r\n            @Override\r\n            public String[] getPropertyNames() {\r\n                return new String[0];\r\n            }\r\n\r\n            @Override\r\n            public Vector&lt;RenderableImage&gt; getSources() {\r\n                return null;\r\n            }\r\n\r\n            private void drawIn(Graphics2D g2) {\r\n                g2.setColor( Color.BLACK );\r\n                g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n                g2.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\r\n                g2.setStroke( new BasicStroke( 2.3f ) );\r\n                g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n            }\r\n\r\n            @Override\r\n            public RenderedImage createDefaultRendering() {\r\n                BufferedImage image = new BufferedImage(\r\n                    DEFAULT_WIDTH, DEFAULT_HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\r\n                Graphics2D g2 = (Graphics2D) image.getGraphics();\r\n                RenderingHints hints = g2.getRenderingHints();\r\n                hints.putAll(DEFAULT_HINTS);\r\n                g2.setRenderingHints(hints);\r\n                drawIn(g2);\r\n                g2.dispose();\r\n\r\n                return image;\r\n            }\r\n\r\n            @Override\r\n            public RenderedImage createScaledRendering(int width,\r\n                                                       int height,\r\n                                                       RenderingHints hints) {\r\n\r\n                BufferedImage image = new BufferedImage(width, height,\r\n                    BufferedImage.TYPE_INT_ARGB);\r\n\r\n                Graphics2D g2 = (Graphics2D) image.getGraphics();\r\n                g2.setRenderingHints(hints);\r\n                g2.scale((double) width / DEFAULT_WIDTH,\r\n                         (double) height / DEFAULT_HEIGHT);\r\n                drawIn(g2);\r\n                g2.dispose();\r\n\r\n                return image;\r\n            }\r\n\r\n            @Override\r\n            public RenderedImage createRendering(RenderContext context) {\r\n                Point2D size = new Point2D.Float(getWidth(), getHeight());\r\n\r\n                Shape shape = context.getAreaOfInterest();\r\n                if (shape != null) {\r\n                    Rectangle2D bounds = shape.getBounds2D();\r\n                    size = new Point2D.Double(\r\n                        bounds.getWidth(), bounds.getHeight());\r\n                }\r\n\r\n                context.getTransform().transform(size, size);\r\n\r\n                BufferedImage image = new BufferedImage(\r\n                    (int) Math.ceil(size.getX()),\r\n                    (int) Math.ceil(size.getY()),\r\n                    BufferedImage.TYPE_INT_ARGB);\r\n\r\n                Graphics2D g2 = (Graphics2D) image.getGraphics();\r\n                RenderingHints hints = context.getRenderingHints();\r\n                if (hints != null) {\r\n                    g2.setRenderingHints(hints);\r\n                } else {\r\n                    hints = g2.getRenderingHints();\r\n                    hints.putAll(DEFAULT_HINTS);\r\n                    g2.setRenderingHints(hints);\r\n                }\r\n                g2.setTransform(context.getTransform());\r\n                drawIn(g2);\r\n                g2.dispose();\r\n\r\n                return image;\r\n            }\r\n        }\r\n    }\r\n","title":"How can I avoid garbled text and vector graphics in Java Swing with UI scaling and off-screen buffering?","body":"<p>There is something like scalingAwareBuffer.  It’s the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/renderable/RenderableImage.html\" rel=\"nofollow noreferrer\">RenderableImage</a> interface.</p>\n<p>I’m not certain this will help, but in theory it should.  RenderableImage looks like it has a lot of methods, but most of them are very simple.  The important ones are the three create… methods.</p>\n<p>Even this won’t produce an identical copy from the image (due to the use of the GPU when drawing directly to the screen?), but the image should at least scale properly.</p>\n<pre><code>import java.util.Vector;\nimport java.util.Map;\n\nimport java.awt.Container;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.Image;\nimport java.awt.Shape;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.BasicStroke;\nimport java.awt.RenderingHints;\nimport java.awt.EventQueue;\n\nimport java.awt.geom.Line2D;\nimport java.awt.geom.Point2D;\nimport java.awt.geom.Rectangle2D;\nimport java.awt.geom.AffineTransform;\n\nimport java.awt.image.BufferedImage;\nimport java.awt.image.RenderedImage;\nimport java.awt.image.renderable.RenderableImage;\nimport java.awt.image.renderable.RenderContext;\n\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\n\npublic class ScaledImageRenderExample1 {\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; {\n            JFrame jf = new JFrame(&quot;Demo&quot;);\n            Container cp = jf.getContentPane();\n            MyCanvas tl = new MyCanvas();\n            cp.add(tl);\n            jf.setSize(500, 250);\n            jf.setLocationByPlatform( true );\n            jf.setVisible(true);\n            jf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n        });\n    }\n\n    static class MyCanvas extends JComponent {\n        private static final long serialVersionUID = 1;\n\n        @Override\n        public void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            if( g instanceof Graphics2D g2 ) {\n                g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                    RenderingHints.VALUE_ANTIALIAS_ON);\n\n                g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n                g2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\n                g2.setStroke( new BasicStroke( 2.3f ) );\n                g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n\n                g2.drawRenderableImage(new CakeImage(),\n                    AffineTransform.getTranslateInstance(0, 130));\n            }\n        }\n    }\n\n    static class CakeImage implements RenderableImage {\n        private static final int DEFAULT_WIDTH = 500;\n        private static final int DEFAULT_HEIGHT = 150;\n\n        private static final RenderingHints DEFAULT_HINTS =\n            new RenderingHints(Map.of(\n                RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON,\n\n                RenderingHints.KEY_TEXT_ANTIALIASING,\n                RenderingHints.VALUE_TEXT_ANTIALIAS_ON,\n\n                RenderingHints.KEY_FRACTIONALMETRICS,\n                RenderingHints.VALUE_FRACTIONALMETRICS_ON,\n\n                RenderingHints.KEY_RESOLUTION_VARIANT,\n                RenderingHints.VALUE_RESOLUTION_VARIANT_SIZE_FIT,\n\n                RenderingHints.KEY_RENDERING,\n                RenderingHints.VALUE_RENDER_QUALITY,\n\n                RenderingHints.KEY_INTERPOLATION,\n                RenderingHints.VALUE_INTERPOLATION_BICUBIC,\n\n                RenderingHints.KEY_STROKE_CONTROL,\n                RenderingHints.VALUE_STROKE_PURE,\n\n                RenderingHints.KEY_COLOR_RENDERING,\n                RenderingHints.VALUE_COLOR_RENDER_QUALITY\n        ));\n\n\n        private final float x;\n        private final float y;\n\n        CakeImage() {\n            this(0, 0);\n        }\n\n        CakeImage(float x,\n                  float y) {\n\n            this.x = x;\n            this.y = y;\n        }\n\n        @Override\n        public float getMinX() {\n            return x;\n        }\n\n        @Override\n        public float getMinY() {\n            return y;\n        }\n\n        @Override\n        public float getWidth() {\n            return DEFAULT_WIDTH;\n        }\n\n        @Override\n        public float getHeight() {\n            return DEFAULT_HEIGHT;\n        }\n\n        @Override\n        public boolean isDynamic() {\n            return false;\n        }\n\n        @Override\n        public Object getProperty(String name) {\n            return Image.UndefinedProperty;\n        }\n\n        @Override\n        public String[] getPropertyNames() {\n            return new String[0];\n        }\n\n        @Override\n        public Vector&lt;RenderableImage&gt; getSources() {\n            return null;\n        }\n\n        private void drawIn(Graphics2D g2) {\n            g2.setColor( Color.BLACK );\n            g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n            g2.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\n            g2.setStroke( new BasicStroke( 2.3f ) );\n            g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n        }\n\n        @Override\n        public RenderedImage createDefaultRendering() {\n            BufferedImage image = new BufferedImage(\n                DEFAULT_WIDTH, DEFAULT_HEIGHT, BufferedImage.TYPE_INT_ARGB);\n\n            Graphics2D g2 = (Graphics2D) image.getGraphics();\n            RenderingHints hints = g2.getRenderingHints();\n            hints.putAll(DEFAULT_HINTS);\n            g2.setRenderingHints(hints);\n            drawIn(g2);\n            g2.dispose();\n\n            return image;\n        }\n\n        @Override\n        public RenderedImage createScaledRendering(int width,\n                                                   int height,\n                                                   RenderingHints hints) {\n\n            BufferedImage image = new BufferedImage(width, height,\n                BufferedImage.TYPE_INT_ARGB);\n\n            Graphics2D g2 = (Graphics2D) image.getGraphics();\n            g2.setRenderingHints(hints);\n            g2.scale((double) width / DEFAULT_WIDTH,\n                     (double) height / DEFAULT_HEIGHT);\n            drawIn(g2);\n            g2.dispose();\n\n            return image;\n        }\n\n        @Override\n        public RenderedImage createRendering(RenderContext context) {\n            Point2D size = new Point2D.Float(getWidth(), getHeight());\n\n            Shape shape = context.getAreaOfInterest();\n            if (shape != null) {\n                Rectangle2D bounds = shape.getBounds2D();\n                size = new Point2D.Double(\n                    bounds.getWidth(), bounds.getHeight());\n            }\n\n            context.getTransform().transform(size, size);\n\n            BufferedImage image = new BufferedImage(\n                (int) Math.ceil(size.getX()),\n                (int) Math.ceil(size.getY()),\n                BufferedImage.TYPE_INT_ARGB);\n\n            Graphics2D g2 = (Graphics2D) image.getGraphics();\n            RenderingHints hints = context.getRenderingHints();\n            if (hints != null) {\n                g2.setRenderingHints(hints);\n            } else {\n                hints = g2.getRenderingHints();\n                hints.putAll(DEFAULT_HINTS);\n                g2.setRenderingHints(hints);\n            }\n            g2.setTransform(context.getTransform());\n            drawIn(g2);\n            g2.dispose();\n\n            return image;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4449358,"reputation":163,"user_id":9312586,"display_name":"COTO"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691531163,"creation_date":1691524553,"question_id":76862844,"body_markdown":"I&#39;m developing a Java application where several `JPanel`s (*not* `JFrame`s) have complex animations that necessitate drawing to an off-screen buffer before blitting to the display surface. A problem I&#39;m having is that Swing is performing UI scaling for high-DPI screens, and the off-screen buffer (a raster) isn&#39;t &quot;aware&quot; of the scaling. Consequently, when text or graphics are rendered to the buffer, and the buffer is blitted to the `JPanel`, Swing scales the graphic as a raster and the result looks like garbage.\r\n\r\nA simple example is:\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.geom.Line2D;\r\n\r\nimport javax.swing.JComponent;\r\nimport javax.swing.JFrame;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tJFrame jf = new JFrame(&quot;Demo&quot;);\r\n\t\tContainer cp = jf.getContentPane();\r\n\t\tMyCanvas tl = new MyCanvas();\r\n\t\tcp.add(tl);\r\n\t\tjf.setSize(500, 250);\r\n\t\tjf.setVisible(true);\r\n\t\tjf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n\t}\r\n}\r\n\r\nclass MyCanvas extends JComponent {\r\n\r\n\t@Override\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tif( g instanceof Graphics2D g2 ) {\r\n\t\t\tg2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n\t\t\t\tRenderingHints.VALUE_ANTIALIAS_ON);\r\n\r\n\t\t\tg2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n\t\t\tg2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\r\n\t\t\tg2.setStroke( new BasicStroke( 2.3f ) );\r\n\t\t\tg2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n\r\n\t\t\tImage I = createImage( 500, 150 );\r\n\t\t\tGraphics2D g2_ = (Graphics2D)I.getGraphics();\r\n\t\t\tg2_.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n\t\t\t\tRenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\t\tg2_.setColor( Color.BLACK );\r\n\t\t\tg2_.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n\t\t\tg2_.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\r\n\t\t\tg2_.setStroke( new BasicStroke( 2.3f ) );\r\n\t\t\tg2_.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n\t\t\tg2_.dispose();\r\n\t\t\tg2.drawImage( I, 0, 130, null );\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nFrom this, compiling with JDK 20 on my Windows 11 machine, I get:\r\n\r\n[![example of poor UI scaling in Java Swing][1]][1]\r\n\r\nOn the top is text and graphics rendered directly to the `JPanel`. On the bottom is the same content rendered via an intermediary image.\r\n\r\nIdeally, I&#39;m looking for a method, e.g., `Image createScalingAwareBuffer( JPanel jp, int width, int height )` that returns an image `I`, in the same vein as `JPanel.createImage( ... )` but where the returned `Image` is *vector* scaling aware, such that `jp.drawImage( I )` or equivalent displays the lower graphic content identically to the upper content.\r\n\r\nI suspect that rendering to the back buffer in a double-buffered Swing component has this kind of &quot;awareness&quot;, but this isn&#39;t an option in my case since I need to precisely control when buffer flips occur on a panel-by-panel basis, which (insofar as I know) is impossible in Swing.\r\n\r\nIs there any solution for this without a radical rewrite (i.e., migrating away from Swing, etc.)?\r\n\r\nI should also note that I **don&#39;t** want to disable the UI scaling (e.g., using `-Dsun.java2d.uiScale=1` in VM options), hence &quot;just disable UI scaling&quot; isn&#39;t really a solution.\r\n\r\n  [1]: https://i.stack.imgur.com/HG05E.png","title":"How can I avoid garbled text and vector graphics in Java Swing with UI scaling and off-screen buffering?","body":"<p>I'm developing a Java application where several <code>JPanel</code>s (<em>not</em> <code>JFrame</code>s) have complex animations that necessitate drawing to an off-screen buffer before blitting to the display surface. A problem I'm having is that Swing is performing UI scaling for high-DPI screens, and the off-screen buffer (a raster) isn't &quot;aware&quot; of the scaling. Consequently, when text or graphics are rendered to the buffer, and the buffer is blitted to the <code>JPanel</code>, Swing scales the graphic as a raster and the result looks like garbage.</p>\n<p>A simple example is:</p>\n<pre><code>import java.awt.*;\nimport java.awt.geom.Line2D;\n\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\n\npublic class Main {\n    public static void main(String[] args) {\n        JFrame jf = new JFrame(&quot;Demo&quot;);\n        Container cp = jf.getContentPane();\n        MyCanvas tl = new MyCanvas();\n        cp.add(tl);\n        jf.setSize(500, 250);\n        jf.setVisible(true);\n        jf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n    }\n}\n\nclass MyCanvas extends JComponent {\n\n    @Override\n    public void paintComponent(Graphics g) {\n        if( g instanceof Graphics2D g2 ) {\n            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n\n            g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n            g2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\n            g2.setStroke( new BasicStroke( 2.3f ) );\n            g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n\n            Image I = createImage( 500, 150 );\n            Graphics2D g2_ = (Graphics2D)I.getGraphics();\n            g2_.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n            g2_.setColor( Color.BLACK );\n            g2_.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n            g2_.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\n            g2_.setStroke( new BasicStroke( 2.3f ) );\n            g2_.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n            g2_.dispose();\n            g2.drawImage( I, 0, 130, null );\n        }\n    }\n}\n</code></pre>\n<p>From this, compiling with JDK 20 on my Windows 11 machine, I get:</p>\n<p><a href=\"https://i.stack.imgur.com/HG05E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HG05E.png\" alt=\"example of poor UI scaling in Java Swing\" /></a></p>\n<p>On the top is text and graphics rendered directly to the <code>JPanel</code>. On the bottom is the same content rendered via an intermediary image.</p>\n<p>Ideally, I'm looking for a method, e.g., <code>Image createScalingAwareBuffer( JPanel jp, int width, int height )</code> that returns an image <code>I</code>, in the same vein as <code>JPanel.createImage( ... )</code> but where the returned <code>Image</code> is <em>vector</em> scaling aware, such that <code>jp.drawImage( I )</code> or equivalent displays the lower graphic content identically to the upper content.</p>\n<p>I suspect that rendering to the back buffer in a double-buffered Swing component has this kind of &quot;awareness&quot;, but this isn't an option in my case since I need to precisely control when buffer flips occur on a panel-by-panel basis, which (insofar as I know) is impossible in Swing.</p>\n<p>Is there any solution for this without a radical rewrite (i.e., migrating away from Swing, etc.)?</p>\n<p>I should also note that I <strong>don't</strong> want to disable the UI scaling (e.g., using <code>-Dsun.java2d.uiScale=1</code> in VM options), hence &quot;just disable UI scaling&quot; isn't really a solution.</p>\n"},{"tags":["javascript","java","android","reverse-engineering","frida"],"answers":[{"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1691530402,"creation_date":1634888899,"answer_id":69673164,"question_id":69668741,"body_markdown":"Looks like the common problem in Frida that the way to access fields is different in Frida. \r\n\r\nFrida uses JavaScript code so it can&#39;t handle non-JavaScript objects directly.\r\nTherefore it wraps &quot;native&quot; objects (Android Java objects in this case) in JavaScript objects.\r\n\r\nIf you now call in Frida `this.carrier` you are getting the Frida JavaScript wrapper, not the Java Carrier instance you are aiming.\r\n\r\nOf course the Frida JavaScript wrapper does not has the methods you try to call, therefore `this.carrier.setId(123);` will always fail.\r\n\r\n\r\n# Accessing a Java field with Frida\r\n\r\nTo access a field you always have to call `.value` on it to get the actual value:\r\n\r\nSo if you want `this.carrier` you have to use `this.carrier.value`.\r\n\r\nIn case there is a name collision with a method of the same name Frida by default assigns the name to the method. If you want to access the field instead add an underscore an the beginning of the field name.\r\nIf there would exist a method named `carrier` you could access the field this way: `this._carrier.value`\r\n\r\n## Reference to Frida help pages\r\n\r\nThis is also described on the Frida pages, e.g. [here][1]: \r\n&gt; Note we use `this.m.value = 0` instead of `this.m = 0` to set the field’s value. If there is also a method in this class called m, we need to use `this._m.value = 0` to set the value of field m. In general, when looking at the properties of objects it will be necessary to use `.value` to access the values those fields refer to.\r\n\r\n# Complete simplified code\r\n\r\nBut in your case you can simplify everything by just using a local variable:\r\n\r\n    Java.perform(function () {\r\n        var SignUpActivity = Java.use(&#39;com.app.features.authentication.SignUpActivity&#39;);\r\n        SignUpActivity.validatePhoneNumber.implementation = function() {\r\n            \r\n            const Carrier = Java.use(&quot;com.app.Carrier&quot;);\r\n            const c = Carrier.$new();\r\n            c.setId(123);\r\n            this._carrier.value = c;\r\n        };\r\n    });\r\n\r\n\r\n  [1]: https://frida.re/docs/examples/android/#example-tool-built-for-an-android-ctf","title":"Setting a member in current class using Frida","body":"<p>Looks like the common problem in Frida that the way to access fields is different in Frida.</p>\n<p>Frida uses JavaScript code so it can't handle non-JavaScript objects directly.\nTherefore it wraps &quot;native&quot; objects (Android Java objects in this case) in JavaScript objects.</p>\n<p>If you now call in Frida <code>this.carrier</code> you are getting the Frida JavaScript wrapper, not the Java Carrier instance you are aiming.</p>\n<p>Of course the Frida JavaScript wrapper does not has the methods you try to call, therefore <code>this.carrier.setId(123);</code> will always fail.</p>\n<h1>Accessing a Java field with Frida</h1>\n<p>To access a field you always have to call <code>.value</code> on it to get the actual value:</p>\n<p>So if you want <code>this.carrier</code> you have to use <code>this.carrier.value</code>.</p>\n<p>In case there is a name collision with a method of the same name Frida by default assigns the name to the method. If you want to access the field instead add an underscore an the beginning of the field name.\nIf there would exist a method named <code>carrier</code> you could access the field this way: <code>this._carrier.value</code></p>\n<h2>Reference to Frida help pages</h2>\n<p>This is also described on the Frida pages, e.g. <a href=\"https://frida.re/docs/examples/android/#example-tool-built-for-an-android-ctf\" rel=\"nofollow noreferrer\">here</a>:</p>\n<blockquote>\n<p>Note we use <code>this.m.value = 0</code> instead of <code>this.m = 0</code> to set the field’s value. If there is also a method in this class called m, we need to use <code>this._m.value = 0</code> to set the value of field m. In general, when looking at the properties of objects it will be necessary to use <code>.value</code> to access the values those fields refer to.</p>\n</blockquote>\n<h1>Complete simplified code</h1>\n<p>But in your case you can simplify everything by just using a local variable:</p>\n<pre><code>Java.perform(function () {\n    var SignUpActivity = Java.use('com.app.features.authentication.SignUpActivity');\n    SignUpActivity.validatePhoneNumber.implementation = function() {\n        \n        const Carrier = Java.use(&quot;com.app.Carrier&quot;);\n        const c = Carrier.$new();\n        c.setId(123);\n        this._carrier.value = c;\n    };\n});\n</code></pre>\n"}],"owner":{"account_id":451985,"reputation":133,"user_id":848165,"accept_rate":17,"display_name":"toothpick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2697,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69673164,"answer_count":1,"score":1,"last_activity_date":1691530402,"creation_date":1634850043,"question_id":69668741,"body_markdown":"I am hooking a certain function in Frida which uses the code:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    this.carrier.getId()\r\n\r\nHowever, at this point in time *this.carrier* has not been set yet, which causes the app to crash.   \r\nSo I am thinking of manually setting this member in the current function in the class. So that carrier will exist by the time the code takes place.   \r\nThe problem is that I encounter a problem by doing that.   \r\n\r\nSo far this is what I got:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    Java.perform(function () {\r\n        var SignUpActivity = Java.use(&#39;com.app.features.authentication.SignUpActivity&#39;);\r\n        SignUpActivity.validatePhoneNumber.implementation = function() {\r\n            \r\n            var Carrier = Java.use(&quot;com.app.Carrier&quot;);\r\n            this.carrier = Carrier.$new();\r\n            console.log(this.carrier) // This prints &quot;[object Object]&quot;\r\n            console.log(this.carrier.setId) // This prints &quot;undefined&quot;\r\n            this.carrier.setId(123); // crashes\r\n\r\n        };\r\n    });\r\n\r\nCode of carrier:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.app;\r\n\r\n    import android.os.Parcel;\r\n    import android.os.Parcelable;\r\n\r\n    public class Carrier implements Parcelable {\r\n\r\n        private int id;\r\n        private String name;\r\n        private String officeTerminalAddress;\r\n\r\n        public Carrier() {\r\n        }\r\n\r\n        protected Carrier(Parcel parcel) {\r\n            this.id = parcel.readInt();\r\n            this.name = parcel.readString();\r\n            this.officeTerminalAddress = parcel.readString();\r\n        }\r\n\r\n        public int getId() {\r\n            return this.id;\r\n        }\r\n\r\n        public void setId(int i) {\r\n            this.id = i;\r\n        }\r\n\r\n    }","title":"Setting a member in current class using Frida","body":"<p>I am hooking a certain function in Frida which uses the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.carrier.getId()\n</code></pre>\n<p>However, at this point in time <em>this.carrier</em> has not been set yet, which causes the app to crash.<br />\nSo I am thinking of manually setting this member in the current function in the class. So that carrier will exist by the time the code takes place.<br />\nThe problem is that I encounter a problem by doing that.</p>\n<p>So far this is what I got:</p>\n<pre class=\"lang-js prettyprint-override\"><code>Java.perform(function () {\n    var SignUpActivity = Java.use('com.app.features.authentication.SignUpActivity');\n    SignUpActivity.validatePhoneNumber.implementation = function() {\n        \n        var Carrier = Java.use(&quot;com.app.Carrier&quot;);\n        this.carrier = Carrier.$new();\n        console.log(this.carrier) // This prints &quot;[object Object]&quot;\n        console.log(this.carrier.setId) // This prints &quot;undefined&quot;\n        this.carrier.setId(123); // crashes\n\n    };\n});\n</code></pre>\n<p>Code of carrier:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.app;\n\nimport android.os.Parcel;\nimport android.os.Parcelable;\n\npublic class Carrier implements Parcelable {\n\n    private int id;\n    private String name;\n    private String officeTerminalAddress;\n\n    public Carrier() {\n    }\n\n    protected Carrier(Parcel parcel) {\n        this.id = parcel.readInt();\n        this.name = parcel.readString();\n        this.officeTerminalAddress = parcel.readString();\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int i) {\n        this.id = i;\n    }\n\n}\n</code></pre>\n"},{"tags":["javascript","java","android","security","frida"],"answers":[{"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691530031,"creation_date":1582993727,"answer_id":60467285,"question_id":60465832,"body_markdown":"In case there is a conflict between a method and a field of the same name Frida has built in workaround: Prepend the field name with an underscore: `_a`.\r\n\r\n&gt; If there is a name collision, method &amp; member has the same name, an underscore will be added to member.\r\n\r\nBut I am not sure if this information is still valid. The current Frida Java bridge code does not like it would rename fields with colliding field names: https://github.com/frida/frida-java-bridge/blob/master/lib/class-factory.js#L301\r\n\r\nI also don&#39;t see a way to access the fields in Frida in a way that don&#39;t base on it&#39;s name. \r\n\r\nThe only chance I see is accessing the field via Java reflection:\r\n\r\n    const eaxe = Java.use(&quot;e.a.x.e&quot;);\r\n    for (f of eaxe.class.getDeclaredFields()) {\r\n        if (f.getType().getName() == &quot;e.a.x.e&quot;) {\r\n            f.setAccessible(true);\r\n            var fieldValue = f.get(this);\r\n            console.log(&quot;Field of type e.a.x.e has value: &quot; + fieldValue);\r\n        }\r\n    }\r\n\r\nNote: The code above has not been tested in Frida, therefore it may need some more refinement before it actually works.","title":"Frida - access to a class attribute that has the desired type","body":"<p>In case there is a conflict between a method and a field of the same name Frida has built in workaround: Prepend the field name with an underscore: <code>_a</code>.</p>\n<blockquote>\n<p>If there is a name collision, method &amp; member has the same name, an underscore will be added to member.</p>\n</blockquote>\n<p>But I am not sure if this information is still valid. The current Frida Java bridge code does not like it would rename fields with colliding field names: <a href=\"https://github.com/frida/frida-java-bridge/blob/master/lib/class-factory.js#L301\" rel=\"nofollow noreferrer\">https://github.com/frida/frida-java-bridge/blob/master/lib/class-factory.js#L301</a></p>\n<p>I also don't see a way to access the fields in Frida in a way that don't base on it's name.</p>\n<p>The only chance I see is accessing the field via Java reflection:</p>\n<pre><code>const eaxe = Java.use(&quot;e.a.x.e&quot;);\nfor (f of eaxe.class.getDeclaredFields()) {\n    if (f.getType().getName() == &quot;e.a.x.e&quot;) {\n        f.setAccessible(true);\n        var fieldValue = f.get(this);\n        console.log(&quot;Field of type e.a.x.e has value: &quot; + fieldValue);\n    }\n}\n</code></pre>\n<p>Note: The code above has not been tested in Frida, therefore it may need some more refinement before it actually works.</p>\n"},{"tags":[],"owner":{"account_id":17873765,"reputation":101,"user_id":12984381,"display_name":"alm"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1583149456,"creation_date":1583149456,"answer_id":60488176,"question_id":60465832,"body_markdown":"Thanks to Robert, a solution was found.The code made minor corrections\r\n\r\n    var lo_fld_eaxe;\r\n    var lv_found = false;\r\n    var lt_fields = this.getClass().getDeclaredFields();\r\n    for (var i = 0; i &lt; lt_fields.length &amp;&amp; lv_found == false; i++) {\r\n        if(lt_fields[i].getName().toString() == &#39;a&#39; &amp;&amp;  lt_fields[i].getType().getName().toString() == &#39;e.a.x.e&#39; ){\r\n           lo_fld_eaxe = lt_fields[i];\r\n           lv_found = true; \r\n      }\r\n    }\r\n    if(lv_found == true) {\r\n       lo_fld_eaxe.setAccessible(true);\r\n       try{ \r\n              var       lv_e_a_x_e = lo_fld_eaxe.get(this);   \r\n       }\r\n       catch(err){\r\n              console.log(&quot;Error:&quot;+err);\r\n       }\r\n     }\r\n\r\n","title":"Frida - access to a class attribute that has the desired type","body":"<p>Thanks to Robert, a solution was found.The code made minor corrections</p>\n\n<pre><code>var lo_fld_eaxe;\nvar lv_found = false;\nvar lt_fields = this.getClass().getDeclaredFields();\nfor (var i = 0; i &lt; lt_fields.length &amp;&amp; lv_found == false; i++) {\n    if(lt_fields[i].getName().toString() == 'a' &amp;&amp;  lt_fields[i].getType().getName().toString() == 'e.a.x.e' ){\n       lo_fld_eaxe = lt_fields[i];\n       lv_found = true; \n  }\n}\nif(lv_found == true) {\n   lo_fld_eaxe.setAccessible(true);\n   try{ \n          var       lv_e_a_x_e = lo_fld_eaxe.get(this);   \n   }\n   catch(err){\n          console.log(\"Error:\"+err);\n   }\n }\n</code></pre>\n"}],"owner":{"account_id":17873765,"reputation":101,"user_id":12984381,"display_name":"alm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4527,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":60488176,"answer_count":2,"score":2,"last_activity_date":1691530031,"creation_date":1582984189,"question_id":60465832,"body_markdown":"I have an android program that has been obfuscated. And in this program classes have attributes with the same name.\r\nDecompiled code like this\r\n\r\n    public class d implements c\r\n    {\r\n        public int a;\r\n        public Cache$Entry a;\r\n        public Cache a;\r\n        public volatile a a;\r\n        public e a;\r\n        public ByteArrayOutputStream a;\r\n        public volatile AtomicBoolean a;\r\n\r\nor smali code like this\r\n\r\n    # interfaces\r\n    .implements Le/a/x/c;\r\n    # instance fields\r\n    .field public a:I\r\n    .field public a:Lanetwork/channel/cache/Cache$Entry;\r\n    .field public a:Lanetwork/channel/cache/Cache;\r\n    .field public volatile a:Ld/a/w/a;\r\n    .field public a:Le/a/x/e;\r\n    .field public a:Ljava/io/ByteArrayOutputStream;\r\n    .field public volatile a:Ljava/util/concurrent/atomic/AtomicBoolean;  \r\n\r\nI create a hook to one method asd() and i need to access to attribute &quot;a&quot; of this class. But I need attribute &quot;a&quot; with type &quot;e.a.x.e&quot;\r\n\r\n    Java.perform(function () {\r\n       var var_ddd = Java.use(&quot;e.a.x.d&quot;);\r\n        var_ddd.asd.implementation = function() {\r\n           this.asd();\r\n           console.log(&quot;e.a.x.d.asd()&quot;,Java.cast(this.a.value,Java.use(&quot;e.a.x.e&quot;)));\r\n        };\r\n    });\r\n\r\nWhen I try to write this.a.value - I get a wrong attribute.\r\nWhen I write Java.cast(this.a.value,Java.use(&quot;e.a.x.e&quot;))\r\nI get message\r\n\r\n    TypeError: cannot read property &#39;hasOwnProperty&#39; of undefined\r\n\r\n\r\nPlease tell me how to get the right attribute with the right type","title":"Frida - access to a class attribute that has the desired type","body":"<p>I have an android program that has been obfuscated. And in this program classes have attributes with the same name.\nDecompiled code like this</p>\n\n<pre><code>public class d implements c\n{\n    public int a;\n    public Cache$Entry a;\n    public Cache a;\n    public volatile a a;\n    public e a;\n    public ByteArrayOutputStream a;\n    public volatile AtomicBoolean a;\n</code></pre>\n\n<p>or smali code like this</p>\n\n<pre><code># interfaces\n.implements Le/a/x/c;\n# instance fields\n.field public a:I\n.field public a:Lanetwork/channel/cache/Cache$Entry;\n.field public a:Lanetwork/channel/cache/Cache;\n.field public volatile a:Ld/a/w/a;\n.field public a:Le/a/x/e;\n.field public a:Ljava/io/ByteArrayOutputStream;\n.field public volatile a:Ljava/util/concurrent/atomic/AtomicBoolean;  \n</code></pre>\n\n<p>I create a hook to one method asd() and i need to access to attribute \"a\" of this class. But I need attribute \"a\" with type \"e.a.x.e\"</p>\n\n<pre><code>Java.perform(function () {\n   var var_ddd = Java.use(\"e.a.x.d\");\n    var_ddd.asd.implementation = function() {\n       this.asd();\n       console.log(\"e.a.x.d.asd()\",Java.cast(this.a.value,Java.use(\"e.a.x.e\")));\n    };\n});\n</code></pre>\n\n<p>When I try to write this.a.value - I get a wrong attribute.\nWhen I write Java.cast(this.a.value,Java.use(\"e.a.x.e\"))\nI get message</p>\n\n<pre><code>TypeError: cannot read property 'hasOwnProperty' of undefined\n</code></pre>\n\n<p>Please tell me how to get the right attribute with the right type</p>\n"},{"tags":["java","google-cloud-dataflow","avro","apache-beam-io","beam"],"comments":[{"owner":{"account_id":23523457,"reputation":1405,"user_id":17570298,"display_name":"Shipra Sarkar"},"score":0,"creation_date":1670942586,"post_id":74782750,"comment_id":131986510,"body_markdown":"Hi @oikonomiyaki, Can you try using the read class as mentioned in this [documentation](https://beam.apache.org/releases/javadoc/2.0.0/index.html?org/apache/beam/sdk/io/AvroIO.html) ? Let me know if that helps.","body":"Hi @oikonomiyaki, Can you try using the read class as mentioned in this <a href=\"https://beam.apache.org/releases/javadoc/2.0.0/index.html?org/apache/beam/sdk/io/AvroIO.html\" rel=\"nofollow noreferrer\">documentation</a> ? Let me know if that helps."},{"owner":{"account_id":4306523,"reputation":7801,"user_id":3518757,"accept_rate":73,"display_name":"oikonomiyaki"},"score":0,"creation_date":1671010591,"post_id":74782750,"comment_id":132002711,"body_markdown":"@ShipraSarkar It requires a coder though, which in the example in the documentation is not specified.","body":"@ShipraSarkar It requires a coder though, which in the example in the documentation is not specified."},{"owner":{"account_id":23523457,"reputation":1405,"user_id":17570298,"display_name":"Shipra Sarkar"},"score":0,"creation_date":1671188716,"post_id":74782750,"comment_id":132050188,"body_markdown":"Hi @oikonomiyaki, Can you try using [parseGenericRecords](https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/AvroIO.html#parseGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-) ? Let me know if that helps.","body":"Hi @oikonomiyaki, Can you try using <a href=\"https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/AvroIO.html#parseGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-\" rel=\"nofollow noreferrer\">parseGenericRecords</a> ? Let me know if that helps."}],"answers":[{"tags":[],"owner":{"account_id":24493709,"reputation":161,"user_id":18410362,"display_name":"pranavbhandari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670954057,"creation_date":1670954057,"answer_id":74789049,"question_id":74782750,"body_markdown":"To read a PCollection of filepatterns whose schema is unknown at pipeline construction time or differs between files, you can use [`parseAllGenericRecords(org.apache.beam.sdk.transforms.SerializableFunction&lt;org.apache.avro.generic.GenericRecord, T&gt;)`](https://beam.apache.org/releases/javadoc/2.3.0/org/apache/beam/sdk/io/AvroIO.html#parseAllGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-)\r\n\r\nIn your case, your serializable function can just return the GenericRecord\r\n\r\nFor example:\r\n\r\n```\r\n\r\n Pipeline p = ...;\r\n\r\n PCollection&lt;GenericRecord&gt; records =\r\n     p.apply(AvroIO.parseAllGenericRecords(new SerializableFunction&lt;GenericRecord, GenericRecord&gt;() {\r\n       public GenericRecord apply(GenericRecord record) {\r\n         // If needed, access the schema of the record using record.getSchema()\r\n         return record;\r\n       }\r\n     }));\r\n```","title":"Reading Avro files in GCS as PCollection&lt;GenericRecord&gt;","body":"<p>To read a PCollection of filepatterns whose schema is unknown at pipeline construction time or differs between files, you can use <a href=\"https://beam.apache.org/releases/javadoc/2.3.0/org/apache/beam/sdk/io/AvroIO.html#parseAllGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-\" rel=\"nofollow noreferrer\"><code>parseAllGenericRecords(org.apache.beam.sdk.transforms.SerializableFunction&lt;org.apache.avro.generic.GenericRecord, T&gt;)</code></a></p>\n<p>In your case, your serializable function can just return the GenericRecord</p>\n<p>For example:</p>\n<pre><code>\n Pipeline p = ...;\n\n PCollection&lt;GenericRecord&gt; records =\n     p.apply(AvroIO.parseAllGenericRecords(new SerializableFunction&lt;GenericRecord, GenericRecord&gt;() {\n       public GenericRecord apply(GenericRecord record) {\n         // If needed, access the schema of the record using record.getSchema()\n         return record;\n       }\n     }));\n</code></pre>\n"}],"owner":{"account_id":4306523,"reputation":7801,"user_id":3518757,"accept_rate":73,"display_name":"oikonomiyaki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":527,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691529888,"creation_date":1670924493,"question_id":74782750,"body_markdown":"Our Dataflow job, written in Python, listens from a Pubsub subscription. The messages are strings of GCS file path of Avro files (`gs://bucket/file-timestamp.avro`). The avro files are not of uniform schema, but Beam Python&#39;s `avroio.ReadAllFromAvro` is good enough to parse generically the records of the avro file in GCS as dictionaries.\r\n\r\n```\r\n# Python code\r\npipeline\r\n\t| &quot;Read from Pub/Sub&quot; &gt;&gt; beam.io.ReadFromPubSub(subscription=input_subscription)\r\n\t| &quot;Read Avro Files&quot; &gt;&gt; avroio.ReadAllFromAvro(with_filename=True)\r\n```\r\n\r\nThe expected form of the resulting PTransform is a tuple: `(same_gcs_filepath, record_as_dict)` \r\n\r\nBecause of some limitations in Python, we need to convert our code to Java. We can read from Pubsub alright, however, we don&#39;t know yet how to use `AvroIO` in order to get a resulting `PCollection&lt;GenericRecord&gt;` without specifying a schema. \r\n\r\n```\r\n// Java code\r\npipeline\r\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\r\n  .apply(&quot;Read Avro Files&quot;, AvroIO.__________________)\r\n```\r\n\r\nIt would be better if the original `gcs_filepath` is passed along with it just like what we do in Python. Do I need to use `FileIO` in tandem with `AvroIO`? How do I achieve this?\r\n\r\n**Update:**\r\n\r\n```\r\npipeline\r\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\r\n  .apply(&quot;Read Avro Files&quot;, FileIO.matchAll())\r\n  .apply(FileIO.readMatches())\r\n  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record))\r\n```\r\n\r\nThe code above lead me to some progress, but then it is complaining that I should be providing a coder\r\n\r\n```\r\njava.lang.IllegalArgumentException: Unable to infer coder for output of parseFn. Specify it explicitly using withCoder()\r\n```\r\n\r\nwhich in the last line should look like this:\r\n\r\n```\r\n  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record).withCoder(someCoder))\r\n```\r\n\r\nBut then, `someCoder` requires a specific schema, which I can&#39;t really provide as the incoming avro file can be of different schema.","title":"Reading Avro files in GCS as PCollection&lt;GenericRecord&gt;","body":"<p>Our Dataflow job, written in Python, listens from a Pubsub subscription. The messages are strings of GCS file path of Avro files (<code>gs://bucket/file-timestamp.avro</code>). The avro files are not of uniform schema, but Beam Python's <code>avroio.ReadAllFromAvro</code> is good enough to parse generically the records of the avro file in GCS as dictionaries.</p>\n<pre><code># Python code\npipeline\n    | &quot;Read from Pub/Sub&quot; &gt;&gt; beam.io.ReadFromPubSub(subscription=input_subscription)\n    | &quot;Read Avro Files&quot; &gt;&gt; avroio.ReadAllFromAvro(with_filename=True)\n</code></pre>\n<p>The expected form of the resulting PTransform is a tuple: <code>(same_gcs_filepath, record_as_dict)</code></p>\n<p>Because of some limitations in Python, we need to convert our code to Java. We can read from Pubsub alright, however, we don't know yet how to use <code>AvroIO</code> in order to get a resulting <code>PCollection&lt;GenericRecord&gt;</code> without specifying a schema.</p>\n<pre><code>// Java code\npipeline\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\n  .apply(&quot;Read Avro Files&quot;, AvroIO.__________________)\n</code></pre>\n<p>It would be better if the original <code>gcs_filepath</code> is passed along with it just like what we do in Python. Do I need to use <code>FileIO</code> in tandem with <code>AvroIO</code>? How do I achieve this?</p>\n<p><strong>Update:</strong></p>\n<pre><code>pipeline\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\n  .apply(&quot;Read Avro Files&quot;, FileIO.matchAll())\n  .apply(FileIO.readMatches())\n  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record))\n</code></pre>\n<p>The code above lead me to some progress, but then it is complaining that I should be providing a coder</p>\n<pre><code>java.lang.IllegalArgumentException: Unable to infer coder for output of parseFn. Specify it explicitly using withCoder()\n</code></pre>\n<p>which in the last line should look like this:</p>\n<pre><code>  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record).withCoder(someCoder))\n</code></pre>\n<p>But then, <code>someCoder</code> requires a specific schema, which I can't really provide as the incoming avro file can be of different schema.</p>\n"},{"tags":["java","sap-commerce-cloud"],"comments":[{"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"score":0,"creation_date":1691067298,"post_id":76827127,"comment_id":135443361,"body_markdown":"what is your DB? You can use APM tools to find whole details.","body":"what is your DB? You can use APM tools to find whole details."},{"owner":{"account_id":11171469,"reputation":47,"user_id":8198318,"display_name":"iamrooovic"},"score":0,"creation_date":1691107097,"post_id":76827127,"comment_id":135450791,"body_markdown":"For our local, we use HSQLDB while SQL Server in our environments. Even in our local, we encounter this issue. We have Dynatrace but I don&#39;t think it is properly set up yet because I can&#39;t see our application there.","body":"For our local, we use HSQLDB while SQL Server in our environments. Even in our local, we encounter this issue. We have Dynatrace but I don&#39;t think it is properly set up yet because I can&#39;t see our application there."},{"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"score":0,"creation_date":1691345948,"post_id":76827127,"comment_id":135476055,"body_markdown":"The HSQLDB is very slow. I prefer MYSQL/MariaDB for local development.","body":"The HSQLDB is very slow. I prefer MYSQL/MariaDB for local development."}],"answers":[{"tags":[],"owner":{"account_id":4574171,"reputation":79,"user_id":3713070,"accept_rate":67,"display_name":"fredyjimenezrendon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691529553,"creation_date":1691529553,"answer_id":76863265,"question_id":76827127,"body_markdown":"If your project has a large number of products/categories/price rows, try to use a different cache region for those types.\r\n\r\nThis configuration has worked for me in the past:\r\n\r\n    regioncache.productregion.size=100000\r\n    regioncache.productregion.evictionpolicy=LRU\r\n    regioncache.productregion.exclusiveComputation=false\r\n    regioncache.productregion.statsEnabled=true\r\n    regioncache.categoryregion.size=100000\r\n    regioncache.categoryregion.evictionpolicy=LRU\r\n    regioncache.categoryregion.exclusiveComputation=false\r\n    regioncache.categoryregion.statsEnabled=true\r\n    regioncache.pricerowregion.size=100000\r\n    regioncache.pricerowregion.evictionpolicy=LRU\r\n    regioncache.pricerowregion.exclusiveComputation=false\r\n    regioncache.pricerowregion.statsEnabled=true","title":"Hybris DefaultB2BCheckoutFacade.placeOrder taking too long to finish","body":"<p>If your project has a large number of products/categories/price rows, try to use a different cache region for those types.</p>\n<p>This configuration has worked for me in the past:</p>\n<pre><code>regioncache.productregion.size=100000\nregioncache.productregion.evictionpolicy=LRU\nregioncache.productregion.exclusiveComputation=false\nregioncache.productregion.statsEnabled=true\nregioncache.categoryregion.size=100000\nregioncache.categoryregion.evictionpolicy=LRU\nregioncache.categoryregion.exclusiveComputation=false\nregioncache.categoryregion.statsEnabled=true\nregioncache.pricerowregion.size=100000\nregioncache.pricerowregion.evictionpolicy=LRU\nregioncache.pricerowregion.exclusiveComputation=false\nregioncache.pricerowregion.statsEnabled=true\n</code></pre>\n"}],"owner":{"account_id":11171469,"reputation":47,"user_id":8198318,"display_name":"iamrooovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691529553,"creation_date":1691057894,"question_id":76827127,"body_markdown":"I&#39;d like to ask about possible causes/solutions for our current issue. We have a simple checkout page. Inside, we have 5 products only. After clicking the place order button, we call our controller. Inside this controller, we only do simple validations like user, terms, and authorized payment. We also load the cart here. By the end, we call the placeOrder of DefaultB2BCheckoutFacade. We didn&#39;t create our custom class so this is out of the box from the b2b-accelerator. With 5 products, we are seeing 18 seconds to fully process the request. Can you please help us understand the issue?\r\n\r\n**EDIT:** I overrode the placeOrder method of DefaultB2BCheckoutFacade with the exact logic. Below are the times it took to finish each call.\r\n\r\nValidation took: 5.6497767 seconds -&gt; `if (isValidCheckoutCart(placeOrderData))`\r\n\r\nPlace order took: 6.5388391 seconds -&gt; `return (T) super.placeOrder();`\r\n\r\nTotal time took: 12.1888468 seconds -&gt; placeOrder method","title":"Hybris DefaultB2BCheckoutFacade.placeOrder taking too long to finish","body":"<p>I'd like to ask about possible causes/solutions for our current issue. We have a simple checkout page. Inside, we have 5 products only. After clicking the place order button, we call our controller. Inside this controller, we only do simple validations like user, terms, and authorized payment. We also load the cart here. By the end, we call the placeOrder of DefaultB2BCheckoutFacade. We didn't create our custom class so this is out of the box from the b2b-accelerator. With 5 products, we are seeing 18 seconds to fully process the request. Can you please help us understand the issue?</p>\n<p><strong>EDIT:</strong> I overrode the placeOrder method of DefaultB2BCheckoutFacade with the exact logic. Below are the times it took to finish each call.</p>\n<p>Validation took: 5.6497767 seconds -&gt; <code>if (isValidCheckoutCart(placeOrderData))</code></p>\n<p>Place order took: 6.5388391 seconds -&gt; <code>return (T) super.placeOrder();</code></p>\n<p>Total time took: 12.1888468 seconds -&gt; placeOrder method</p>\n"},{"tags":["java","apache-kafka","project-reactor","confluent-schema-registry","reactor-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691529195,"creation_date":1691528742,"answer_id":76863185,"question_id":76861776,"body_markdown":"Reactor isn&#39;t the issue. \r\n\r\n`schema.registry.url` is only a property of the Confluent Deserializer class. You are not implementing `configure` function in the Deserializer, therefore you are ignoring that property. Similarly, directly calling `parseFrom` isn&#39;t using any HTTP client to interact with a Registry.\r\n\r\nImport the library, rather than write your own\r\n\r\nhttps://mvnrepository.com/artifact/io.confluent/kafka-protobuf-serializer/7.4.0\r\n\r\nAlso, this is how to auto configure Spring Boot with that property\r\n\r\n```yaml\r\nspring:\r\n  kafka:\r\n    consumer:\r\n      value-deserializer: io.confluent.kafka.serializers.protobuf.KafkaProtobufDeserializer\r\n      properties:\r\n        &quot;[schema.registry.url]&quot;: http://...\r\n```\r\n\r\nref https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka.additional-properties","title":"Unable to use schemaRegistry in reactor kafka","body":"<p>Reactor isn't the issue.</p>\n<p><code>schema.registry.url</code> is only a property of the Confluent Deserializer class. You are not implementing <code>configure</code> function in the Deserializer, therefore you are ignoring that property. Similarly, directly calling <code>parseFrom</code> isn't using any HTTP client to interact with a Registry.</p>\n<p>Import the library, rather than write your own</p>\n<p><a href=\"https://mvnrepository.com/artifact/io.confluent/kafka-protobuf-serializer/7.4.0\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/io.confluent/kafka-protobuf-serializer/7.4.0</a></p>\n<p>Also, this is how to auto configure Spring Boot with that property</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  kafka:\n    consumer:\n      value-deserializer: io.confluent.kafka.serializers.protobuf.KafkaProtobufDeserializer\n      properties:\n        &quot;[schema.registry.url]&quot;: http://...\n</code></pre>\n<p>ref <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka.additional-properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka.additional-properties</a></p>\n"}],"owner":{"account_id":1744707,"reputation":157,"user_id":1595186,"accept_rate":38,"display_name":"Gajukorse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76863185,"answer_count":1,"score":0,"last_activity_date":1691529195,"creation_date":1691514377,"question_id":76861776,"body_markdown":"I am tying to setup kafka consumer using reactor kafka . Producer is integrated with kafka schema registry \r\n\r\n\r\n```\r\n\r\n\r\n    @Value(&quot;${spring.kafka.schemaRegistryUrls}&quot;)\r\n    private String schemaRegistryEnvVarValue;\r\n\r\n\r\n @Bean\r\n    public ReceiverOptions&lt;String, MyProto&gt; kafkaReceiverOptionsFloor(\r\n            KafkaProperties kafkaProperties) {\r\n\r\n        final Map&lt;String, Object&gt; kafkaConsumerProperties =\r\n                kafkaProperties.buildConsumerProperties();\r\n        for (Map.Entry&lt;String, KafkaProperties.Consumer&gt; entry :\r\n                kafkaConsumerPropertiesConfig.getConsumer().entrySet()) {\r\n            if (kafkaTopics.contains(entry.getKey())) {\r\n                kafkaConsumerProperties.putAll(entry.getValue().buildProperties());\r\n            }\r\n        }\r\n        kafkaConsumerProperties.put(&quot;schema.registry.url&quot;, schemaRegistryEnvVarValue);\r\n        final ReceiverOptions&lt;String, MyProto&gt; basicReceiverOptions =\r\n                ReceiverOptions.&lt;String, MyProto&gt;create(\r\n                                kafkaConsumerProperties)\r\n                        .withValueDeserializer(new MyProtoDeserializer())\r\n                        // disabling auto commit, since we are managing committing once\r\n                        // record is\r\n                        // processed\r\n                        .commitInterval(Duration.ZERO)\r\n                        .commitBatchSize(0);\r\n\r\n        kafkaConsumerProperties.forEach((k, v) -&gt; log.debug(&quot;k2 {} v2 {}&quot;, k, v));\r\n\r\n        return basicReceiverOptions\r\n                .subscription(kafkaTopicsFloor)\r\n                .addAssignListener(partitions -&gt; log.debug(&quot;onPartitionsAssigned {}&quot;, partitions))\r\n                .addRevokeListener(partitions -&gt; log.debug(&quot;onPartitionsRevoked {}&quot;, partitions));\r\n    }\r\n\r\n\r\n  @Bean\r\n    public ReactiveKafkaConsumerTemplate&lt;String, MyProto&gt;\r\n            reactiveKafkaConsumerTemplate(\r\n                    ReceiverOptions&lt;String, MyProto&gt;\r\n                            kafkaReceiverOptions) {\r\n        return new ReactiveKafkaConsumerTemplate&lt;&gt;(kafkaReceiverOptions);\r\n    }\r\n\r\n```\r\n\r\n\r\nI am getting exception as *Protocol message contained an invalid tag (zero).*\r\n Its able to parse in my Unit tests (without schema registry)\r\n\r\nLooks like schemaregistry is not being used . what am i doing wrong here .\r\n\r\nDeserializer looks like below\r\n\r\n```\r\n@Slf4j\r\npublic class MyProtoDeserializer implements Deserializer&lt;MyProto&gt; {\r\n    public MyProtoDeserializer() {}\r\n\r\n    /**\r\n     * Deserializes the data to my_proto from byte array.\r\n     *\r\n     * @param topic\r\n     * @param data\r\n     * @return\r\n     */\r\n    @Override\r\n    public MyProto deserialize(final String topic, final byte[] data) {\r\n        if (data == null) {\r\n            return null;\r\n        }\r\n        // TODO: Use schemaregistry and kpow\r\n      \r\n        try {\r\n            return MyProto.getDefaultInstance()\r\n                    .getParserForType()\r\n                    .parseFrom(data);\r\n        } catch (Exception ex) {\r\n            log.debug(&quot;Exception in MyProto parse {}&quot;, ex.getMessage());\r\n            return MyProto.getDefaultInstance();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"Unable to use schemaRegistry in reactor kafka","body":"<p>I am tying to setup kafka consumer using reactor kafka . Producer is integrated with kafka schema registry</p>\n<pre><code>\n\n    @Value(&quot;${spring.kafka.schemaRegistryUrls}&quot;)\n    private String schemaRegistryEnvVarValue;\n\n\n @Bean\n    public ReceiverOptions&lt;String, MyProto&gt; kafkaReceiverOptionsFloor(\n            KafkaProperties kafkaProperties) {\n\n        final Map&lt;String, Object&gt; kafkaConsumerProperties =\n                kafkaProperties.buildConsumerProperties();\n        for (Map.Entry&lt;String, KafkaProperties.Consumer&gt; entry :\n                kafkaConsumerPropertiesConfig.getConsumer().entrySet()) {\n            if (kafkaTopics.contains(entry.getKey())) {\n                kafkaConsumerProperties.putAll(entry.getValue().buildProperties());\n            }\n        }\n        kafkaConsumerProperties.put(&quot;schema.registry.url&quot;, schemaRegistryEnvVarValue);\n        final ReceiverOptions&lt;String, MyProto&gt; basicReceiverOptions =\n                ReceiverOptions.&lt;String, MyProto&gt;create(\n                                kafkaConsumerProperties)\n                        .withValueDeserializer(new MyProtoDeserializer())\n                        // disabling auto commit, since we are managing committing once\n                        // record is\n                        // processed\n                        .commitInterval(Duration.ZERO)\n                        .commitBatchSize(0);\n\n        kafkaConsumerProperties.forEach((k, v) -&gt; log.debug(&quot;k2 {} v2 {}&quot;, k, v));\n\n        return basicReceiverOptions\n                .subscription(kafkaTopicsFloor)\n                .addAssignListener(partitions -&gt; log.debug(&quot;onPartitionsAssigned {}&quot;, partitions))\n                .addRevokeListener(partitions -&gt; log.debug(&quot;onPartitionsRevoked {}&quot;, partitions));\n    }\n\n\n  @Bean\n    public ReactiveKafkaConsumerTemplate&lt;String, MyProto&gt;\n            reactiveKafkaConsumerTemplate(\n                    ReceiverOptions&lt;String, MyProto&gt;\n                            kafkaReceiverOptions) {\n        return new ReactiveKafkaConsumerTemplate&lt;&gt;(kafkaReceiverOptions);\n    }\n\n</code></pre>\n<p>I am getting exception as <em>Protocol message contained an invalid tag (zero).</em>\nIts able to parse in my Unit tests (without schema registry)</p>\n<p>Looks like schemaregistry is not being used . what am i doing wrong here .</p>\n<p>Deserializer looks like below</p>\n<pre><code>@Slf4j\npublic class MyProtoDeserializer implements Deserializer&lt;MyProto&gt; {\n    public MyProtoDeserializer() {}\n\n    /**\n     * Deserializes the data to my_proto from byte array.\n     *\n     * @param topic\n     * @param data\n     * @return\n     */\n    @Override\n    public MyProto deserialize(final String topic, final byte[] data) {\n        if (data == null) {\n            return null;\n        }\n        // TODO: Use schemaregistry and kpow\n      \n        try {\n            return MyProto.getDefaultInstance()\n                    .getParserForType()\n                    .parseFrom(data);\n        } catch (Exception ex) {\n            log.debug(&quot;Exception in MyProto parse {}&quot;, ex.getMessage());\n            return MyProto.getDefaultInstance();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-camel","quarkus"],"owner":{"account_id":16016597,"reputation":743,"user_id":11559150,"display_name":"Cesar Justo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691528801,"creation_date":1691528801,"question_id":76863196,"body_markdown":"Good afternoon, I am currently working with Apache Camel and Quarkus for the first time and I am calling an API that returns different types of http code, when it returns an http code other than 200, I get an exception of the following type:\r\n\r\n    org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking https://10.162.128.94:30000/customerInformation/v1.4.0/users/CI-2056133/customers with statusCode: 404\r\n\r\nThe idea here is to be able to catch this exception and the corresponding http code to return a response of the following type with http code 404:\r\n\r\n    {\r\n        &quot;code&quot;: &quot;NOT_FOUND&quot;,\r\n        &quot;message&quot;: &quot;A specified resource is not found&quot;\r\n    }\r\n\r\nMy code is the following but I don&#39;t know how to configure it to capture the error, I know that the main exception is **HttpOperationFailedException**:\r\n\r\n    package org.tmve.customer.ms.route;\r\n    \r\n    import org.apache.camel.Exchange;\r\n    import org.apache.camel.builder.RouteBuilder;\r\n    import org.apache.camel.http.base.HttpOperationFailedException;\r\n    import org.apache.camel.model.rest.RestBindingMode;\r\n    import org.eclipse.microprofile.config.inject.ConfigProperty;\r\n    import org.tmve.customer.ms.beans.response.UserProfile;\r\n    import org.tmve.customer.ms.processor.FindCustomerByDocIdProcessorReq;\r\n    import org.tmve.customer.ms.processor.FindCustomerByDocIdProcessorRes;\r\n    import org.tmve.customer.ms.processor.UserProfileProcessorHttpCode404;\r\n    import org.tmve.customer.ms.processor.UserProfileReq;\r\n    \r\n    import javax.enterprise.context.ApplicationScoped;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.TimeZone;\r\n    \r\n    import static org.apache.camel.model.rest.RestParamType.body;\r\n    \r\n    @ApplicationScoped\r\n    public class ResRoute extends RouteBuilder {\r\n    \r\n        @ConfigProperty(name=&quot;client.findCustomerByDocId&quot;)\r\n        String findCustomerByDocId;\r\n        @ConfigProperty(name = &quot;path.openapi&quot;)\r\n        String openApiPath;\r\n        @ConfigProperty(name = &quot;descripcion.servicio&quot;)\r\n        String serviceDescription;\r\n    \r\n        private ConfigureSsl configureSsl;\r\n    \r\n        public ResRoute() {\r\n            configureSsl = new ConfigureSsl();\r\n        }\r\n    \r\n        @Override\r\n        public void configure() throws Exception {\r\n    \r\n            restConfiguration()\r\n                    .bindingMode(RestBindingMode.json)\r\n                    .dataFormatProperty(&quot;json.in.disableFeatures&quot;, &quot;FAIL_ON_UNKNOWN_PROPERTIES&quot;)\r\n                    .apiContextPath(openApiPath)\r\n                    .apiProperty(&quot;api.title&quot;, &quot;FindCustomerByDocId&quot;)\r\n                    .apiProperty(&quot;api.description&quot;, serviceDescription)\r\n                    .apiProperty(&quot;api.version&quot;, &quot;1.0.0&quot;)\r\n                    .apiProperty(&quot;cors&quot;, &quot;true&quot;);\r\n    \r\n            rest(&quot;userProfile/v3.7/users/&quot;)\r\n                    .get(&quot;/{user_id}&quot;).to(&quot;direct:/{user_id}&quot;)\r\n                    .outType(UserProfile.class)\r\n                    .param().name(&quot;UserProfile&quot;).type(body).description(&quot;parametro de salida&quot;).required(true)\r\n                    .endParam()\r\n                    .to(&quot;direct:pipeline&quot;);\r\n    \r\n            from(&quot;direct:pipeline&quot;)\r\n                    .doTry()\r\n                    .process(new UserProfileReq())\r\n                    .process(new FindCustomerByDocIdProcessorReq())\r\n                    .setHeader(&quot;x-correlator&quot;,constant(&quot;4242374781&quot;))\r\n                    .to(configureSsl.setupSSLContext(getCamelContext(), findCustomerByDocId))\r\n                    .choice()\r\n                    .when(header(Exchange.HTTP_RESPONSE_CODE).isEqualTo(404))\r\n                        .process(new UserProfileProcessorHttpCode404())\r\n                    .otherwise()\r\n                    .process(new FindCustomerByDocIdProcessorRes())\r\n                    .endChoice()\r\n                    .endDoTry()\r\n                    .doCatch(HttpOperationFailedException.class)\r\n                    .process(new UserProfileProcessorHttpCode404());\r\n    \r\n        }\r\n\r\nWith the previous code I tried to do it, but it does not throw me anything, it returns a code 204 and it should return a response like the one I referred to above, I attach my code of the UserProfileProcessorHttpCode404 class:\r\n\r\n    package org.tmve.customer.ms.processor;\r\n    \r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.apache.camel.Exchange;\r\n    import org.apache.camel.Processor;\r\n    import org.eclipse.microprofile.config.ConfigProvider;\r\n    import org.tmve.customer.ms.beans.response.UserProfileResponseFault;\r\n    import org.tmve.customer.ms.mapping.IUserProfileOpenApiResponseFaultMapping;\r\n    import org.tmve.customer.ms.mapping.impl.UserProfileOpenApiResponseImpl;\r\n    \r\n    import javax.enterprise.context.ApplicationScoped;\r\n    \r\n    \r\n    @ApplicationScoped\r\n    public class UserProfileProcessorHttpCode404 implements Processor {\r\n    \r\n        private String errorCode404 = ConfigProvider.getConfig().getValue(&quot;error.404.code&quot;, String.class);\r\n        private String errorMessage404 = ConfigProvider.getConfig().getValue(&quot;error.404.message&quot;, String.class);\r\n        private IUserProfileOpenApiResponseFaultMapping responseFault;\r\n        private ObjectMapper objectMapper;\r\n    \r\n        public UserProfileProcessorHttpCode404() {\r\n            responseFault = new UserProfileOpenApiResponseImpl();\r\n            objectMapper = new ObjectMapper();\r\n        }\r\n    \r\n        @Override\r\n        public void process(Exchange exchange) throws Exception {\r\n    \r\n            UserProfileResponseFault openApiResponse = responseFault.toFault(errorCode404, errorMessage404);\r\n            String jsonResponse = objectMapper.writeValueAsString(openApiResponse);\r\n            exchange.setProperty(&quot;bodyRs&quot;, objectMapper.writeValueAsString(jsonResponse));\r\n            exchange.getMessage().setHeader(Exchange.CONTENT_TYPE, &quot;application/json&quot;);\r\n            exchange.getMessage().setHeader(Exchange.HTTP_RESPONSE_CODE, 404);\r\n            exchange.getMessage().setBody(jsonResponse);\r\n    \r\n    \r\n        }\r\n    }\r\n\r\nWhat should I do in these cases? Should the response code filtering be done within the doTry or doCatch?\r\n\r\n","title":"How to catch org.apache.camel.http.base.HttpOperationFailedException with status code and return personality response in Apache Camel","body":"<p>Good afternoon, I am currently working with Apache Camel and Quarkus for the first time and I am calling an API that returns different types of http code, when it returns an http code other than 200, I get an exception of the following type:</p>\n<pre><code>org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking https://10.162.128.94:30000/customerInformation/v1.4.0/users/CI-2056133/customers with statusCode: 404\n</code></pre>\n<p>The idea here is to be able to catch this exception and the corresponding http code to return a response of the following type with http code 404:</p>\n<pre><code>{\n    &quot;code&quot;: &quot;NOT_FOUND&quot;,\n    &quot;message&quot;: &quot;A specified resource is not found&quot;\n}\n</code></pre>\n<p>My code is the following but I don't know how to configure it to capture the error, I know that the main exception is <strong>HttpOperationFailedException</strong>:</p>\n<pre><code>package org.tmve.customer.ms.route;\n\nimport org.apache.camel.Exchange;\nimport org.apache.camel.builder.RouteBuilder;\nimport org.apache.camel.http.base.HttpOperationFailedException;\nimport org.apache.camel.model.rest.RestBindingMode;\nimport org.eclipse.microprofile.config.inject.ConfigProperty;\nimport org.tmve.customer.ms.beans.response.UserProfile;\nimport org.tmve.customer.ms.processor.FindCustomerByDocIdProcessorReq;\nimport org.tmve.customer.ms.processor.FindCustomerByDocIdProcessorRes;\nimport org.tmve.customer.ms.processor.UserProfileProcessorHttpCode404;\nimport org.tmve.customer.ms.processor.UserProfileReq;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport java.text.SimpleDateFormat;\nimport java.util.TimeZone;\n\nimport static org.apache.camel.model.rest.RestParamType.body;\n\n@ApplicationScoped\npublic class ResRoute extends RouteBuilder {\n\n    @ConfigProperty(name=&quot;client.findCustomerByDocId&quot;)\n    String findCustomerByDocId;\n    @ConfigProperty(name = &quot;path.openapi&quot;)\n    String openApiPath;\n    @ConfigProperty(name = &quot;descripcion.servicio&quot;)\n    String serviceDescription;\n\n    private ConfigureSsl configureSsl;\n\n    public ResRoute() {\n        configureSsl = new ConfigureSsl();\n    }\n\n    @Override\n    public void configure() throws Exception {\n\n        restConfiguration()\n                .bindingMode(RestBindingMode.json)\n                .dataFormatProperty(&quot;json.in.disableFeatures&quot;, &quot;FAIL_ON_UNKNOWN_PROPERTIES&quot;)\n                .apiContextPath(openApiPath)\n                .apiProperty(&quot;api.title&quot;, &quot;FindCustomerByDocId&quot;)\n                .apiProperty(&quot;api.description&quot;, serviceDescription)\n                .apiProperty(&quot;api.version&quot;, &quot;1.0.0&quot;)\n                .apiProperty(&quot;cors&quot;, &quot;true&quot;);\n\n        rest(&quot;userProfile/v3.7/users/&quot;)\n                .get(&quot;/{user_id}&quot;).to(&quot;direct:/{user_id}&quot;)\n                .outType(UserProfile.class)\n                .param().name(&quot;UserProfile&quot;).type(body).description(&quot;parametro de salida&quot;).required(true)\n                .endParam()\n                .to(&quot;direct:pipeline&quot;);\n\n        from(&quot;direct:pipeline&quot;)\n                .doTry()\n                .process(new UserProfileReq())\n                .process(new FindCustomerByDocIdProcessorReq())\n                .setHeader(&quot;x-correlator&quot;,constant(&quot;4242374781&quot;))\n                .to(configureSsl.setupSSLContext(getCamelContext(), findCustomerByDocId))\n                .choice()\n                .when(header(Exchange.HTTP_RESPONSE_CODE).isEqualTo(404))\n                    .process(new UserProfileProcessorHttpCode404())\n                .otherwise()\n                .process(new FindCustomerByDocIdProcessorRes())\n                .endChoice()\n                .endDoTry()\n                .doCatch(HttpOperationFailedException.class)\n                .process(new UserProfileProcessorHttpCode404());\n\n    }\n</code></pre>\n<p>With the previous code I tried to do it, but it does not throw me anything, it returns a code 204 and it should return a response like the one I referred to above, I attach my code of the UserProfileProcessorHttpCode404 class:</p>\n<pre><code>package org.tmve.customer.ms.processor;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.apache.camel.Exchange;\nimport org.apache.camel.Processor;\nimport org.eclipse.microprofile.config.ConfigProvider;\nimport org.tmve.customer.ms.beans.response.UserProfileResponseFault;\nimport org.tmve.customer.ms.mapping.IUserProfileOpenApiResponseFaultMapping;\nimport org.tmve.customer.ms.mapping.impl.UserProfileOpenApiResponseImpl;\n\nimport javax.enterprise.context.ApplicationScoped;\n\n\n@ApplicationScoped\npublic class UserProfileProcessorHttpCode404 implements Processor {\n\n    private String errorCode404 = ConfigProvider.getConfig().getValue(&quot;error.404.code&quot;, String.class);\n    private String errorMessage404 = ConfigProvider.getConfig().getValue(&quot;error.404.message&quot;, String.class);\n    private IUserProfileOpenApiResponseFaultMapping responseFault;\n    private ObjectMapper objectMapper;\n\n    public UserProfileProcessorHttpCode404() {\n        responseFault = new UserProfileOpenApiResponseImpl();\n        objectMapper = new ObjectMapper();\n    }\n\n    @Override\n    public void process(Exchange exchange) throws Exception {\n\n        UserProfileResponseFault openApiResponse = responseFault.toFault(errorCode404, errorMessage404);\n        String jsonResponse = objectMapper.writeValueAsString(openApiResponse);\n        exchange.setProperty(&quot;bodyRs&quot;, objectMapper.writeValueAsString(jsonResponse));\n        exchange.getMessage().setHeader(Exchange.CONTENT_TYPE, &quot;application/json&quot;);\n        exchange.getMessage().setHeader(Exchange.HTTP_RESPONSE_CODE, 404);\n        exchange.getMessage().setBody(jsonResponse);\n\n\n    }\n}\n</code></pre>\n<p>What should I do in these cases? Should the response code filtering be done within the doTry or doCatch?</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":10045,"reputation":5505,"user_id":18796,"display_name":"Ian McLaird"},"score":0,"creation_date":1478728591,"post_id":40516058,"comment_id":68275049,"body_markdown":"Does it work if you define an empty no-args constructor yourself?","body":"Does it work if you define an empty no-args constructor yourself?"},{"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"score":0,"creation_date":1478774697,"post_id":40516058,"comment_id":68291536,"body_markdown":"Unfortunately then I get the instant error: Compiler already exists","body":"Unfortunately then I get the instant error: Compiler already exists"},{"owner":{"account_id":7297,"reputation":32768,"user_id":12634,"accept_rate":75,"display_name":"Roel Spilker"},"score":1,"creation_date":1479121061,"post_id":40516058,"comment_id":68409401,"body_markdown":"Did you try adding both the RequiredArgsConstructor and the NoArgsConstructor?","body":"Did you try adding both the RequiredArgsConstructor and the NoArgsConstructor?"},{"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"score":0,"creation_date":1479808749,"post_id":40516058,"comment_id":68703335,"body_markdown":"Thanks @RoelSpilker, using both annotations worked ... but \\@Data doesn&#39;t give me fields of parent classes in the builder, so the approach is preety much useless for my case. I will stop worrying about it and continue with custom builders.","body":"Thanks @RoelSpilker, using both annotations worked ... but \\@Data doesn&#39;t give me fields of parent classes in the builder, so the approach is preety much useless for my case. I will stop worrying about it and continue with custom builders."}],"answers":[{"tags":[],"owner":{"account_id":7155709,"reputation":466,"user_id":5468270,"accept_rate":78,"display_name":"Xendar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1478726862,"creation_date":1478726862,"answer_id":40516304,"question_id":40516058,"body_markdown":"In the Lombok documentation it is written:\r\nPerson.builder().name(&quot;Adam Savage&quot;).city(&quot;San Francisco&quot;).job(&quot;Mythbusters&quot;).job(&quot;Unchained Reaction&quot;).build();\r\n\r\nDo you use this syntax for your purpose? According to your description it&#39;s not the case, and could explain the error you get?","title":"Lombok @Data and @Builder on same entity","body":"<p>In the Lombok documentation it is written:\nPerson.builder().name(\"Adam Savage\").city(\"San Francisco\").job(\"Mythbusters\").job(\"Unchained Reaction\").build();</p>\n\n<p>Do you use this syntax for your purpose? According to your description it's not the case, and could explain the error you get?</p>\n"},{"tags":[],"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1479810034,"creation_date":1479810034,"answer_id":40739250,"question_id":40516058,"body_markdown":"I will answer my own question by summerizing the comments.\r\n\r\nFirst of all, thanks to @RoelSpilker, you can use Builder and Data together on one Pojo if you explicitly provide AllArgs- and NoArgs- constructors:\r\n\r\n     @RequiredArgsConstructor\r\n     @NoArgsConstructor\r\n     @Data\r\n     @Builder\r\n     public class Person {...}\r\n\r\nBut: the builder created for this class will not know any inherited fields. For my use case (having some AbstractEntities) this renders the solution useless and I will stick with manual helpers/builders for now.","title":"Lombok @Data and @Builder on same entity","body":"<p>I will answer my own question by summerizing the comments.</p>\n\n<p>First of all, thanks to @RoelSpilker, you can use Builder and Data together on one Pojo if you explicitly provide AllArgs- and NoArgs- constructors:</p>\n\n<pre><code> @RequiredArgsConstructor\n @NoArgsConstructor\n @Data\n @Builder\n public class Person {...}\n</code></pre>\n\n<p>But: the builder created for this class will not know any inherited fields. For my use case (having some AbstractEntities) this renders the solution useless and I will stick with manual helpers/builders for now.</p>\n"},{"tags":[],"owner":{"account_id":12669526,"reputation":641,"user_id":9207530,"display_name":"장재훈"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1516300146,"creation_date":1515738309,"answer_id":48220690,"question_id":40516058,"body_markdown":"try this code with lombok version 1.16.18 over :\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder\r\n    @Entity\r\n    public class User {\r\n        private String id;\r\n        private String firstName;\r\n        private String lastName;\r\n    }","title":"Lombok @Data and @Builder on same entity","body":"<p>try this code with lombok version 1.16.18 over :</p>\n\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@Entity\npublic class User {\n    private String id;\n    private String firstName;\n    private String lastName;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15459711,"reputation":1631,"user_id":11152683,"display_name":"Lubo"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1571750325,"creation_date":1571750325,"answer_id":58505239,"question_id":40516058,"body_markdown":"Beware of that [data objects aren&#39;t entities][1]! Simply put, there is problem with hashcode/equals (when it considers id fields) and also toString method with lazy loaded parts of entity. For reference you can check [Vlad Mihalceas article][2].\r\n\r\nYou should:\r\n\r\n - exclude id fields from hashcode/equals\r\n - exclude association fields which are not managed in given entity from hashcode/equals\r\n - exclude all lazy loaded fields from toString method\r\n - exclude fields possibly causing circular references from toString method\r\n\r\nFor sure read at least something on topic of how does JPA do &quot;[dirty checking][3]&quot; before beeing confident that your handwritten or generated equals/hashcode method is ok.\r\n\r\n\r\n  [1]: https://mdeinum.github.io/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\r\n  [2]: https://vladmihalcea.com/hibernate-facts-equals-and-hashcode/\r\n  [3]: https://vladmihalcea.com/the-anatomy-of-hibernate-dirty-checking/","title":"Lombok @Data and @Builder on same entity","body":"<p>Beware of that <a href=\"https://mdeinum.github.io/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"noreferrer\">data objects aren't entities</a>! Simply put, there is problem with hashcode/equals (when it considers id fields) and also toString method with lazy loaded parts of entity. For reference you can check <a href=\"https://vladmihalcea.com/hibernate-facts-equals-and-hashcode/\" rel=\"noreferrer\">Vlad Mihalceas article</a>.</p>\n\n<p>You should:</p>\n\n<ul>\n<li>exclude id fields from hashcode/equals</li>\n<li>exclude association fields which are not managed in given entity from hashcode/equals</li>\n<li>exclude all lazy loaded fields from toString method</li>\n<li>exclude fields possibly causing circular references from toString method</li>\n</ul>\n\n<p>For sure read at least something on topic of how does JPA do \"<a href=\"https://vladmihalcea.com/the-anatomy-of-hibernate-dirty-checking/\" rel=\"noreferrer\">dirty checking</a>\" before beeing confident that your handwritten or generated equals/hashcode method is ok.</p>\n"}],"owner":{"account_id":109649,"reputation":11808,"user_id":290425,"accept_rate":68,"display_name":"Jan Galinski"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36071,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":40739250,"answer_count":4,"score":18,"last_activity_date":1691528633,"creation_date":1478725729,"question_id":40516058,"body_markdown":"I am using the following:\r\n\r\n    @Entity\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor(force = true)\r\n    public class User {\r\n        private String id;\r\n        private String firstName;\r\n        private String lastName;\r\n    }\r\n\r\nwhat I want to achieve: for JPA usage, I need a POJO with noArgConstructor, getters/setters and equals/hashCode/toString. \r\n\r\nFor instance creation (for example in tests) I want to use User.builder().build();\r\n\r\nProblem: it does not compile, there seems to be an issue with the NoArgConstructor vs. RequiredFieldsConstructor:\r\n\r\n    Error:(15, 1) java: constructor User in class x.y.z.User cannot be applied to given types;\r\n    required: no arguments\r\n    found:    java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String\r\n    reason: actual and formal argument lists differ in length\r\n\r\n**Update: The error occurs when I try to create a new entity via `new` ... the builder() works.**\r\n\r\nWhat do I miss? Isn&#39;t it possible to use @Data, @Entity and @Builder at the same time?","title":"Lombok @Data and @Builder on same entity","body":"<p>I am using the following:</p>\n\n<pre><code>@Entity\n@Data\n@Builder\n@NoArgsConstructor(force = true)\npublic class User {\n    private String id;\n    private String firstName;\n    private String lastName;\n}\n</code></pre>\n\n<p>what I want to achieve: for JPA usage, I need a POJO with noArgConstructor, getters/setters and equals/hashCode/toString. </p>\n\n<p>For instance creation (for example in tests) I want to use User.builder().build();</p>\n\n<p>Problem: it does not compile, there seems to be an issue with the NoArgConstructor vs. RequiredFieldsConstructor:</p>\n\n<pre><code>Error:(15, 1) java: constructor User in class x.y.z.User cannot be applied to given types;\nrequired: no arguments\nfound:    java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String\nreason: actual and formal argument lists differ in length\n</code></pre>\n\n<p><strong>Update: The error occurs when I try to create a new entity via <code>new</code> ... the builder() works.</strong></p>\n\n<p>What do I miss? Isn't it possible to use @Data, @Entity and @Builder at the same time?</p>\n"},{"tags":["java","maven","visual-studio-code"],"answers":[{"tags":[],"owner":{"account_id":17942799,"reputation":7768,"user_id":13037676,"display_name":"Steven-MSFT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649728911,"creation_date":1649728911,"answer_id":71836180,"question_id":71825911,"body_markdown":"Could you try to set the `&quot;java.jdt.ls.java.home&quot;` manually? Set it to the JDK you installed on your computer.\r\n\r\nSome people others had run across [this kind of problem][1]. It looks like an issue with the language server&#39;s embedded JRE.\r\n\r\n\r\n  [1]: https://github.com/redhat-developer/vscode-java/issues/2277","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>Could you try to set the <code>&quot;java.jdt.ls.java.home&quot;</code> manually? Set it to the JDK you installed on your computer.</p>\n<p>Some people others had run across <a href=\"https://github.com/redhat-developer/vscode-java/issues/2277\" rel=\"nofollow noreferrer\">this kind of problem</a>. It looks like an issue with the language server's embedded JRE.</p>\n"},{"tags":[],"owner":{"account_id":23158008,"reputation":51,"user_id":17259012,"display_name":"Knight990"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1650796115,"creation_date":1650796115,"answer_id":71987519,"question_id":71825911,"body_markdown":"i had the same problem and i solve it,try this:\r\n1. set settings.json in vscode, \r\n&quot;java.eclipse.downloadSources&quot;: true,&quot;java.maven.downloadSources&quot;: true\r\n2. add follow settings in settings.xml of maven:\r\n```\r\n&lt;settings&gt;\r\n    &lt;!-- ... other settings omitted ... --&gt;\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;downloadSources&lt;/id&gt;\r\n            &lt;properties&gt;\r\n                &lt;downloadSources&gt;true&lt;/downloadSources&gt;\r\n                &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n\r\n    &lt;activeProfiles&gt;\r\n            &lt;activeProfile&gt;downloadSources&lt;/activeProfile&gt;\r\n    &lt;/activeProfiles&gt;\r\n&lt;/settings&gt;\r\n```\r\n\r\n3.reopen vscode and it will download javadoc","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>i had the same problem and i solve it,try this:</p>\n<ol>\n<li>set settings.json in vscode,\n&quot;java.eclipse.downloadSources&quot;: true,&quot;java.maven.downloadSources&quot;: true</li>\n<li>add follow settings in settings.xml of maven:</li>\n</ol>\n<pre><code>&lt;settings&gt;\n    &lt;!-- ... other settings omitted ... --&gt;\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;downloadSources&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;downloadSources&gt;true&lt;/downloadSources&gt;\n                &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n\n    &lt;activeProfiles&gt;\n            &lt;activeProfile&gt;downloadSources&lt;/activeProfile&gt;\n    &lt;/activeProfiles&gt;\n&lt;/settings&gt;\n</code></pre>\n<p>3.reopen vscode and it will download javadoc</p>\n"},{"tags":[],"owner":{"account_id":16856545,"reputation":400,"user_id":12188327,"display_name":"darkvalance"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665750470,"creation_date":1665750470,"answer_id":74069224,"question_id":71825911,"body_markdown":"I had this issue previously, and I couldn&#39;t change the language server&#39;s embedded JRE due the version being &lt;17. The fix was adding the following line into `settings.json`.\r\n```\r\n&quot;maven.terminal.useJavaHome&quot;: true\r\n```","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>I had this issue previously, and I couldn't change the language server's embedded JRE due the version being &lt;17. The fix was adding the following line into <code>settings.json</code>.</p>\n<pre><code>&quot;maven.terminal.useJavaHome&quot;: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5074998,"reputation":406,"user_id":4072641,"display_name":"Pedro Siqueira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691528264,"creation_date":1691528264,"answer_id":76863153,"question_id":71825911,"body_markdown":"What worked for me: I made the following addition on `settings.json` file:\r\n\r\n```json\r\n&quot;java.configuration.runtimes&quot;: [\r\n    {\r\n        &quot;name&quot;: &quot;JavaSE-17&quot;,\r\n        &quot;path&quot;: &quot;/usr/lib/jvm/java-17-openjdk-amd64/&quot;\r\n    }\r\n]\r\n```\r\n\r\nI obtained the location of both the `settings.json` file and the Java `path` from [Henry](https://stackoverflow.com/a/74369626/4072641)&#39;s answer. The solution itself was derived from this [GitHub comment](https://github.com/redhat-developer/vscode-java/issues/2277#issuecomment-1365450613).","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>What worked for me: I made the following addition on <code>settings.json</code> file:</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;java.configuration.runtimes&quot;: [\n    {\n        &quot;name&quot;: &quot;JavaSE-17&quot;,\n        &quot;path&quot;: &quot;/usr/lib/jvm/java-17-openjdk-amd64/&quot;\n    }\n]\n</code></pre>\n<p>I obtained the location of both the <code>settings.json</code> file and the Java <code>path</code> from <a href=\"https://stackoverflow.com/a/74369626/4072641\">Henry</a>'s answer. The solution itself was derived from this <a href=\"https://github.com/redhat-developer/vscode-java/issues/2277#issuecomment-1365450613\" rel=\"nofollow noreferrer\">GitHub comment</a>.</p>\n"}],"owner":{"account_id":13646274,"reputation":103,"user_id":9845200,"display_name":"tanjamado"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3534,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1691528264,"creation_date":1649671282,"question_id":71825911,"body_markdown":"when i&#39;m navigating to a maven dependency class, i get a .class file with this comment on top and no doc is shown :\r\n\r\n*// Failed to get sources. Instead, stub sources have been generated by the disassembler.  \r\n// Implementation of methods is unavailable.* \r\n\r\nI don&#39;t have the issue with Java classes, only maven dependencies.\r\n\r\nI have enabled download sources in the maven settings.xml and in the java extension pack settings.\r\n\r\nAnyone has any idea how to solve this please ?","title":"Maven dependency : Failed to get sources. Instead, stub sources have been generated by the disassembler","body":"<p>when i'm navigating to a maven dependency class, i get a .class file with this comment on top and no doc is shown :</p>\n<p><em>// Failed to get sources. Instead, stub sources have been generated by the disassembler.<br />\n// Implementation of methods is unavailable.</em></p>\n<p>I don't have the issue with Java classes, only maven dependencies.</p>\n<p>I have enabled download sources in the maven settings.xml and in the java extension pack settings.</p>\n<p>Anyone has any idea how to solve this please ?</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1691530241,"post_id":76863146,"comment_id":135503608,"body_markdown":"1. Clean and build, could be old cached data; 2. Don&#39;t reference `src` in your code, this won&#39;t exist once the app is built and exported, use `new ImageIcon(getClass().getResource(&quot;/images/wallpaperPrincipal.jpg&quot;))` instead. Infact you should probably be using `new ImageIcon(ImageIO.read(getClass().getResource(&quot;/images/wallpaperPrincipal.jpg&quot;))` at least this way, of the image can&#39;t be read, it will throw an exception","body":"1. Clean and build, could be old cached data; 2. Don&#39;t reference <code>src</code> in your code, this won&#39;t exist once the app is built and exported, use <code>new ImageIcon(getClass().getResource(&quot;&#47;images&#47;wallpaperPrincipal&zwnj;&#8203;.jpg&quot;))</code> instead. Infact you should probably be using <code>new ImageIcon(ImageIO.read(getClass().getResource(&quot;&#47;images&#47;wallp&zwnj;&#8203;aperPrincipal.jpg&quot;))</code> at least this way, of the image can&#39;t be read, it will throw an exception"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691532377,"post_id":76863146,"comment_id":135503898,"body_markdown":"*And* you need to put the images [in the right place](https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans)","body":"<i>And</i> you need to put the images <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">in the right place</a>"}],"owner":{"account_id":29066660,"reputation":1,"user_id":22266095,"display_name":"Marchione"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691528179,"creation_date":1691528179,"question_id":76863146,"body_markdown":"When using the method to change the background of the interface it gives an error, even though I invoked the necessary libraries and the methods are correctly written,\r\n\r\n```\r\nImageIcon wallpaper = new ImageIcon(&quot;src/images/wallpaperPrincipal.jpg&quot;);\r\n        Icon icono = new ImageIcon(wallpaper.getImage().getScaledInstance(jLabel_Wallpaper.getWidth(),\r\n                jLabel_Wallpaper.getHeight(), Image.SCALE_DEFAULT));\r\n        jLabel_Wallpaper.setIcon(icono);\r\n        this.repaint();\r\n```\r\n\r\nmarks the error:\r\n\r\n```\r\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: Uncompilable code - cannot find symbol\r\n  symbol:   method setIcon(javax.swing.Icon)\r\n  location: variable jLabel_Wallpaper of type java.awt.Label\r\n\tat ventanas.informacionUsuario.&lt;init&gt;(informacionUsuario.java:181)\r\n\tat ventanas.informacionUsuario$1.run(informacionUsuario.java:183)\r\n\tat java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:313)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:770)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:715)\r\n\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:740)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n```\r\n\r\nUntil now what I did was to delete the class and redo it (copying and pasting the previous code) and sometimes I would get the error again and at other times the program would work fine. I got annoyed with it and I want to find a solution that does not involve redoing the class.\r\n\r\nIt just shows me the error line, in some classes it works fine and in others it shows the error, and the problem has happened to me a couple of times.","title":"The setIcon method does not work because of NetBeans?","body":"<p>When using the method to change the background of the interface it gives an error, even though I invoked the necessary libraries and the methods are correctly written,</p>\n<pre><code>ImageIcon wallpaper = new ImageIcon(&quot;src/images/wallpaperPrincipal.jpg&quot;);\n        Icon icono = new ImageIcon(wallpaper.getImage().getScaledInstance(jLabel_Wallpaper.getWidth(),\n                jLabel_Wallpaper.getHeight(), Image.SCALE_DEFAULT));\n        jLabel_Wallpaper.setIcon(icono);\n        this.repaint();\n</code></pre>\n<p>marks the error:</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: Uncompilable code - cannot find symbol\n  symbol:   method setIcon(javax.swing.Icon)\n  location: variable jLabel_Wallpaper of type java.awt.Label\n    at ventanas.informacionUsuario.&lt;init&gt;(informacionUsuario.java:181)\n    at ventanas.informacionUsuario$1.run(informacionUsuario.java:183)\n    at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:313)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:770)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:715)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:740)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n<p>Until now what I did was to delete the class and redo it (copying and pasting the previous code) and sometimes I would get the error again and at other times the program would work fine. I got annoyed with it and I want to find a solution that does not involve redoing the class.</p>\n<p>It just shows me the error line, in some classes it works fine and in others it shows the error, and the problem has happened to me a couple of times.</p>\n"},{"tags":["java","c++","openssl","java-native-interface","rsa"],"comments":[{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":2,"creation_date":1691063203,"post_id":76827611,"comment_id":135442502,"body_markdown":"Please read [Why should I not upload images of code/data/errors when asking a question?](https://meta.stackoverflow.com/q/285551/238704)","body":"Please read <a href=\"https://meta.stackoverflow.com/q/285551/238704\">Why should I not upload images of code/data/errors when asking a question?</a>"},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1691063463,"post_id":76827611,"comment_id":135442549,"body_markdown":"I have no idea where that output is coming from, it doesn&#39;t appear in any of the code you&#39;ve shown. The `decBa` output just looks like a section of memory, maybe the processor stack. It definitely isn&#39;t the output from an incorrect RSA decryption.","body":"I have no idea where that output is coming from, it doesn&#39;t appear in any of the code you&#39;ve shown. The <code>decBa</code> output just looks like a section of memory, maybe the processor stack. It definitely isn&#39;t the output from an incorrect RSA decryption."},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691064592,"post_id":76827611,"comment_id":135442752,"body_markdown":"@PresidentJamesK.Polk-Strike that output goes directly from Log.d","body":"@PresidentJamesK.Polk-Strike that output goes directly from Log.d"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":1,"creation_date":1691073810,"post_id":76827611,"comment_id":135444959,"body_markdown":"Any particular reason you&#39;re not just using the Java cryptography APIs?","body":"Any particular reason you&#39;re not just using the Java cryptography APIs?"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1691074186,"post_id":76827611,"comment_id":135445059,"body_markdown":"Your decryption call doesn&#39;t use encText_len but hardcodes 256 instead.","body":"Your decryption call doesn&#39;t use encText_len but hardcodes 256 instead."},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691435475,"post_id":76827611,"comment_id":135488601,"body_markdown":"@Botje encryption output length is 256, if I use encText_len when I try to decrypt it says that length is too large, that&#39;s why it&#39;s hardcoded like that.","body":"@Botje encryption output length is 256, if I use encText_len when I try to decrypt it says that length is too large, that&#39;s why it&#39;s hardcoded like that."},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691435573,"post_id":76827611,"comment_id":135488629,"body_markdown":"@Botje and yes, my task is to learn how openssl rsa works in c++, can&#39;t use Java instead.","body":"@Botje and yes, my task is to learn how openssl rsa works in c++, can&#39;t use Java instead."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1691437673,"post_id":76827611,"comment_id":135488994,"body_markdown":"The size of the array is directly derived from the output of `RSA_private_encrypt`, which is literally documented as &quot;this is how many bytes of ciphertext were produced&quot; and yet you replace that with a hardcoded number and expect it to work?","body":"The size of the array is directly derived from the output of <code>RSA_private_encrypt</code>, which is literally documented as &quot;this is how many bytes of ciphertext were produced&quot; and yet you replace that with a hardcoded number and expect it to work?"},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691489077,"post_id":76827611,"comment_id":135495364,"body_markdown":"@Botje `RSA_public_encrypt` always produces 256 bytes of ciphertext in my case and I had to hardode this number as I said above.","body":"@Botje <code>RSA_public_encrypt</code> always produces 256 bytes of ciphertext in my case and I had to hardode this number as I said above."},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691489500,"post_id":76827611,"comment_id":135495455,"body_markdown":"@Botje and when `RSA_private_decrypt` is called it returns correct value of plaintext length but wrong characters. That&#39;s why I don&#39;t understand what is happening, how it knows the length, but decrypted message characters are a complete mess.","body":"@Botje and when <code>RSA_private_decrypt</code> is called it returns correct value of plaintext length but wrong characters. That&#39;s why I don&#39;t understand what is happening, how it knows the length, but decrypted message characters are a complete mess."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1691489827,"post_id":76827611,"comment_id":135495507,"body_markdown":"If the length of the java array is somehow wrong then it stands to reason that the contents might also be wrong! Are the contents of the native byte array identical to what your java log reports?","body":"If the length of the java array is somehow wrong then it stands to reason that the contents might also be wrong! Are the contents of the native byte array identical to what your java log reports?"},{"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"score":0,"creation_date":1691490762,"post_id":76827611,"comment_id":135495689,"body_markdown":"@Botje yes, they&#39;re identical.","body":"@Botje yes, they&#39;re identical."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691538315,"post_id":76827611,"comment_id":135504485,"body_markdown":"Why would you use JNI for any of this when Java already supports it all?","body":"Why would you use JNI for any of this when Java already supports it all?"}],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691528097,"creation_date":1691528097,"answer_id":76863139,"question_id":76827611,"body_markdown":"The problem is in this call:\r\n\r\n```\r\n    int iResult = RSA_public_encrypt(plainText_len, (unsigned char*)plain_text, chEncryptedData, createRSApub(sKey), RSA_PKCS1_OAEP_PADDING);\r\n```\r\nThe variable `plain_text` is your `jbyteArray` input variable. You should pass `plainText` instead, which is a `const char *`.\r\nIn this case the cast masked the problem, and honestly I&#39;m surprised it did not crash your JVM.","title":"JNI OpenSSL RSA Decryption not working properly","body":"<p>The problem is in this call:</p>\n<pre><code>    int iResult = RSA_public_encrypt(plainText_len, (unsigned char*)plain_text, chEncryptedData, createRSApub(sKey), RSA_PKCS1_OAEP_PADDING);\n</code></pre>\n<p>The variable <code>plain_text</code> is your <code>jbyteArray</code> input variable. You should pass <code>plainText</code> instead, which is a <code>const char *</code>.\nIn this case the cast masked the problem, and honestly I'm surprised it did not crash your JVM.</p>\n"}],"owner":{"account_id":29151619,"reputation":13,"user_id":22332340,"display_name":"Amir"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691572341,"accepted_answer_id":76863139,"answer_count":1,"score":0,"last_activity_date":1691528097,"creation_date":1691061771,"question_id":76827611,"body_markdown":"Encryption seems to work fine, but when I start decryption I get wrong output. Keys are given in PEM and length is 2048.\r\n\r\nHere are the methods that are called from Java\r\n\r\n```\r\nString public_key = &quot;-----BEGIN PUBLIC KEY-----\\n&quot; +\r\n            &quot;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAm1AThUE8dUz6x5DeDK3J\\n&quot; +\r\n            &quot;SKcBbqFVtplHCdf+036+2tZ1RmHcwsKZ6AF4dtCQ/8n+2lMQgdfWSe+gKEp2lIh0\\n&quot; +\r\n            &quot;YQUxgQneLXGzvsEjbFVLgxSdLnEfuZrJsNC3J9LHlnvwYYvBQGaSVCx7WhvxFyDC\\n&quot; +\r\n            &quot;BJ7SlpjSzVY9yduxRAHKYnsFRwKgEW15N3VYbspd/LTexNHXTbuzQ968wZbWd5rX\\n&quot; +\r\n            &quot;qHejM9pFEQsxqBq7uIk3eFvDMZzyi47NaM9eRHX6LyDF4CtL6SL9UKRTnMCrNpDh\\n&quot; +\r\n            &quot;WfxaC6xbMf4tf242Bk0TGe8mK6gH5baUs4C14Tq87yUkC9IVMegNlki89nsT5uRX\\n&quot; +\r\n            &quot;swIDAQAB\\n&quot; +\r\n            &quot;-----END PUBLIC KEY-----&quot;;\r\n    String private_key = &quot;-----BEGIN RSA PRIVATE KEY-----\\n&quot; +\r\n            &quot;MIIEpQIBAAKCAQEAm1AThUE8dUz6x5DeDK3JSKcBbqFVtplHCdf+036+2tZ1RmHc\\n&quot; +\r\n            &quot;wsKZ6AF4dtCQ/8n+2lMQgdfWSe+gKEp2lIh0YQUxgQneLXGzvsEjbFVLgxSdLnEf\\n&quot; +\r\n            &quot;uZrJsNC3J9LHlnvwYYvBQGaSVCx7WhvxFyDCBJ7SlpjSzVY9yduxRAHKYnsFRwKg\\n&quot; +\r\n            &quot;EW15N3VYbspd/LTexNHXTbuzQ968wZbWd5rXqHejM9pFEQsxqBq7uIk3eFvDMZzy\\n&quot; +\r\n            &quot;i47NaM9eRHX6LyDF4CtL6SL9UKRTnMCrNpDhWfxaC6xbMf4tf242Bk0TGe8mK6gH\\n&quot; +\r\n            &quot;5baUs4C14Tq87yUkC9IVMegNlki89nsT5uRXswIDAQABAoIBAQCYztBl6ylwv6x9\\n&quot; +\r\n            &quot;bSsLjnDb6nSeRF3wqh4asUknDSz6YsY/2Uk61fxXKBs9yzbec/8rD07OcW2EkR8i\\n&quot; +\r\n            &quot;hSDmQts+Gb37F5phW91dcOlJTSJedYmwh9yO4JxQOwn5RIjaplZ7ouUgV8rgxmMW\\n&quot; +\r\n            &quot;5Sbvemtp4FmRkgrVvGROlrhyENDu0lJzPtVks8XA1Re+CrOinhTCkISChqq/sHVC\\n&quot; +\r\n            &quot;sJfsI6OFHzk0Oexnh0sIG5MfaMNFp4Mh38UhrXFBJ6cIBuveEGzzED+AB6O30j3k\\n&quot; +\r\n            &quot;XT2pQbjCJcpekfpzfcW1VRfebLIgB+2mVjSleMKgA7ImyXOg4DCJiLWLulgOKmiE\\n&quot; +\r\n            &quot;x7qH684BAoGBAM1onwWBR3ERui4p22dNEoZ2tOygzEJKzhjsC1tRDAyO8Gr4QWNk\\n&quot; +\r\n            &quot;fNt/+8+gjJkMkkoKtjaqPrOdclhdPVCyQWvJt5ZAyAv0J7HDbZU8uShAOJI4eCpi\\n&quot; +\r\n            &quot;G2Xf20S0v84V12MEriWKZTmXUyWWKR87XkLTcVLCyfMTqPR1gMtHfpJpAoGBAMGQ\\n&quot; +\r\n            &quot;0lrFeNM2xqD7fZE/465wxp+kYPf/sMNkk6IqxJljtnzjWbySDU9csSwlN03Q36vu\\n&quot; +\r\n            &quot;/TGFIUWx2uTvjRHGEPvOC9agEZ8p9kHWrQb1ZgICpd/yWEy9nze66OayN3JyxkVR\\n&quot; +\r\n            &quot;pg2R5RRfnWuI9U6CyPhuZlptqDBUHXhG2kVB3Z27AoGBALYT0CpED3zl1uBG0CqA\\n&quot; +\r\n            &quot;gjRZE0VRv93fi1NCIUr/y6tyJSDdELE3CQpVJ3RDf33HTAF//0bzoAL9RLeZZtma\\n&quot; +\r\n            &quot;OS1/sFHq+KjH80u6zO9l1UcdrkfG8JW5Q0oJpccAZakbaUJniqrSQ6pKPjTqJ2d8\\n&quot; +\r\n            &quot;67BW13QiIHts6O5RHiqTJFpJAoGBAJEfMgbqDJdWdv8U7mSq4NnVJaVlCWqF4hHs\\n&quot; +\r\n            &quot;Yx9vLyzNbHEfxxSw75ezqAWv9VG7KybtrBindnWZTcLcswhDVlJjfc6w/eU2AbIE\\n&quot; +\r\n            &quot;8H7KF2ukbpaDTJ5kgG25DYqAzT9aO7qW54c+/eATe6O28CuntGNF6ikcE8AAIIQf\\n&quot; +\r\n            &quot;ot/P7QanAoGADQ5hDdPaq+wSFhYoeh//QfXrkbIcNl18ienY5Sn4jDrNgkkxghdc\\n&quot; +\r\n            &quot;WV3biTqIGMf15CI+//dSShbzI7nyoYQ8bl6HsFbEnGyS95PySdF6gUhsPKG83Ih2\\n&quot; +\r\n            &quot;SftvM2TzsO9D8XemkOHNwayPMN6YQA3SDZTZNNv3LYD7NkqhRQI0YUo=\\n&quot; +\r\n            &quot;-----END RSA PRIVATE KEY-----&quot;;\r\n\r\n    public native byte[] publicencryptRsa(String key, byte[] plainText);\r\n    public native byte[] privatedecryptRsa(String key, byte[] encText);\r\nbyte[] plainText = &quot;utnznxckymtyhedtumwtswlxgqkibutnznxckymtyhedtumwtswlxgqkibutnznxckymtyhedtumwtswlxgqkib1&quot;.getBytes(StandardCharsets.UTF_8);\r\n        StringBuilder sb2 = new StringBuilder();\r\n        for (byte b : plainText) {\r\n            sb2.append(String.format(&quot;%02X&quot;, b));\r\n        }\r\n        Log.d(TAG, &quot;onCreate: plainText = &quot; + sb2.toString());\r\n            //byte [] keyData = &quot;eQg2MDbk3uUtRhMw&quot;.getBytes();\r\n//        byte [] encryptedText = encryptAes256(keyData, plainText);\r\n//        byte [] decryptedText = decryptAes256(keyData, encryptedText);\r\n          byte [] encText = publicencryptRsa(public_key, plainText);\r\n            sb2 = new StringBuilder();\r\n            for (byte b : encText) {\r\n                sb2.append(String.format(&quot;%02X&quot;, b));\r\n            }\r\n            Log.d(TAG, &quot;onCreate: encText = &quot; + sb2.toString());\r\n          byte[] decBa = privatedecryptRsa(private_key, encText);\r\n        sb2 = new StringBuilder();\r\n        for (byte b : decBa) {\r\n            sb2.append(String.format(&quot;%02X&quot;, b));\r\n        }\r\n        Log.d(TAG, &quot;onCreate: decBa = &quot; + sb2.toString());\r\n```\r\n\r\nMethods from .cpp file\r\n\r\nStructures\r\n```\r\nRSA * createRSApub(std::string sKey) {\r\n   \r\n     RSA *rsa = nullptr;\r\n     BIO *keybio; //  BIO_new( BIO_s_mem() );\r\n     keybio = BIO_new_mem_buf(sKey.c_str(), sKey.length());\r\n\r\n    if (keybio == nullptr) {\r\n        printf( &quot;Failed to create key BIO&quot;);\r\n        return nullptr;\r\n    }\r\n    else  rsa = PEM_read_bio_RSA_PUBKEY(keybio, nullptr,nullptr, nullptr);\r\n\r\n    BIO_free(keybio);\r\n\r\n    return rsa;\r\n}\r\nRSA * createRSApriv(std::string sKey) {\r\n    RSA *rsa = nullptr;\r\n    BIO *keybio;\r\n    keybio = BIO_new_mem_buf(sKey.c_str(), sKey.length());\r\n\r\n    if (keybio == nullptr) {\r\n        printf( &quot;Failed to create key BIO&quot;);\r\n        return nullptr;\r\n    }\r\n    else rsa = PEM_read_bio_RSAPrivateKey(keybio, nullptr,nullptr, nullptr);\r\n  \r\n    return rsa;\r\n}\r\n```\r\nEncryption\r\n```\r\nJava_com_example_myapplication_MainActivity_publicencryptRsa(JNIEnv *env, jobject thiz, jstring key,\r\n                                                       jbyteArray plain_text) {\r\n      jboolean isCopy;\r\n\r\n    unsigned char *key_data = (unsigned char *) (env)-&gt;GetStringUTFChars(key, &amp;isCopy);\r\n    std::string sKey((char*) key_data);\r\n    int key_data_len = strlen((char*)key_data);\r\n\r\n\r\n    int plainText_len = env-&gt;GetArrayLength(plain_text);\r\n    jbyte* temp = env-&gt;GetByteArrayElements(plain_text,&amp;isCopy);\r\n    unsigned char* plainText;\r\n    plainText = (unsigned char *) temp;\r\n\r\n\r\n    if(nullptr == plainText)\r\n        return nullptr;\r\n\r\n    LOGI(&quot;The data to encrypt is : %s&quot;, plainText);\r\n\r\n    unsigned char chEncryptedData[4098] = {};\r\n    int iResult = RSA_public_encrypt(plainText_len, (unsigned char*)plain_text, chEncryptedData, createRSApub(sKey), RSA_PKCS1_OAEP_PADDING);\r\n\r\n//    env-&gt;ReleaseStringUTFChars(env, inData, cData);\r\n\r\n// If encryption fails, returns nullptr string, else returns encrypted string\r\n    if(-1 == iResult) {\r\n        char *chErrMsg = (char*)malloc(256);\r\n        ERR_load_crypto_strings();\r\n        ERR_error_string(ERR_get_error(), chErrMsg);\r\n        LOGE(&quot;The data Encryption failed due to the reason : %s&quot;, chErrMsg);\r\n        free(chErrMsg);\r\n        return nullptr;\r\n    }\r\n//    for(int i = 0; i &lt; 255; ++i)\r\n//        LOGD(&quot;The Encrypted data is[%d] : %c&quot;, i, chEncryptedData[i]);\r\n\r\n    jbyteArray EncryptedByteArray = env-&gt;NewByteArray(iResult);\r\n    env-&gt;SetByteArrayRegion(EncryptedByteArray, 0, iResult, (jbyte *) chEncryptedData);\r\n\r\n    return EncryptedByteArray;\r\n}\r\n```\r\nDecryption\r\n\r\n```\r\nJava_com_example_myapplication_MainActivity_privatedecryptRsa(JNIEnv *env, jobject thiz,\r\n                                                       jstring private_key,\r\n                                                       jbyteArray enc_text) {\r\n    jboolean isCopy;\r\n    unsigned char *key_data = (unsigned char *) (env)-&gt;GetStringUTFChars(private_key, &amp;isCopy);\r\n    std::string sKey((char*) key_data);\r\n    int key_data_len = strlen((char*)key_data);\r\n\r\n    int encText_len = env-&gt;GetArrayLength(enc_text);\r\n    jbyte* a = env-&gt;GetByteArrayElements(enc_text,&amp;isCopy);\r\n    const unsigned char* encText;\r\n    encText = (unsigned char *) a;\r\n\r\n    unsigned char chDecryptedData[4098] = {};\r\n\r\n    int result = RSA_private_decrypt(256,encText, chDecryptedData, createRSApriv(sKey), RSA_PKCS1_OAEP_PADDING);\r\n\r\n    if(-1 == result) {\r\n        char *chErrMsg = (char*)malloc(256);\r\n        ERR_load_crypto_strings();\r\n        ERR_error_string(ERR_get_error(), chErrMsg);\r\n        LOGE(&quot;The data Decryption failed due to the reason : %s&quot;, chErrMsg);\r\n        free(chErrMsg);\r\n        return nullptr;\r\n    }\r\n\r\n//    for(int i = 0; i &lt; 100; ++i)\r\n//        LOGD(&quot;The Decrypted data is[%d] : %c&quot;, i, chDecryptedData[i]);\r\n\r\n    jbyteArray DecryptedByteArray = env-&gt;NewByteArray(result);\r\n    env-&gt;SetByteArrayRegion(DecryptedByteArray, 0, result, (jbyte *) chDecryptedData);\r\n\r\n    return DecryptedByteArray;\r\n}\r\n```\r\nHere&#39;s out\r\n[enter image description here](https://i.stack.imgur.com/mZWTE.png)\r\n\r\n\r\nI don&#39;t know where the problem actually is, both keys are valid and `RSA_private_decrypt ` returns correct length of plain_text, but wrong characters.","title":"JNI OpenSSL RSA Decryption not working properly","body":"<p>Encryption seems to work fine, but when I start decryption I get wrong output. Keys are given in PEM and length is 2048.</p>\n<p>Here are the methods that are called from Java</p>\n<pre><code>String public_key = &quot;-----BEGIN PUBLIC KEY-----\\n&quot; +\n            &quot;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAm1AThUE8dUz6x5DeDK3J\\n&quot; +\n            &quot;SKcBbqFVtplHCdf+036+2tZ1RmHcwsKZ6AF4dtCQ/8n+2lMQgdfWSe+gKEp2lIh0\\n&quot; +\n            &quot;YQUxgQneLXGzvsEjbFVLgxSdLnEfuZrJsNC3J9LHlnvwYYvBQGaSVCx7WhvxFyDC\\n&quot; +\n            &quot;BJ7SlpjSzVY9yduxRAHKYnsFRwKgEW15N3VYbspd/LTexNHXTbuzQ968wZbWd5rX\\n&quot; +\n            &quot;qHejM9pFEQsxqBq7uIk3eFvDMZzyi47NaM9eRHX6LyDF4CtL6SL9UKRTnMCrNpDh\\n&quot; +\n            &quot;WfxaC6xbMf4tf242Bk0TGe8mK6gH5baUs4C14Tq87yUkC9IVMegNlki89nsT5uRX\\n&quot; +\n            &quot;swIDAQAB\\n&quot; +\n            &quot;-----END PUBLIC KEY-----&quot;;\n    String private_key = &quot;-----BEGIN RSA PRIVATE KEY-----\\n&quot; +\n            &quot;MIIEpQIBAAKCAQEAm1AThUE8dUz6x5DeDK3JSKcBbqFVtplHCdf+036+2tZ1RmHc\\n&quot; +\n            &quot;wsKZ6AF4dtCQ/8n+2lMQgdfWSe+gKEp2lIh0YQUxgQneLXGzvsEjbFVLgxSdLnEf\\n&quot; +\n            &quot;uZrJsNC3J9LHlnvwYYvBQGaSVCx7WhvxFyDCBJ7SlpjSzVY9yduxRAHKYnsFRwKg\\n&quot; +\n            &quot;EW15N3VYbspd/LTexNHXTbuzQ968wZbWd5rXqHejM9pFEQsxqBq7uIk3eFvDMZzy\\n&quot; +\n            &quot;i47NaM9eRHX6LyDF4CtL6SL9UKRTnMCrNpDhWfxaC6xbMf4tf242Bk0TGe8mK6gH\\n&quot; +\n            &quot;5baUs4C14Tq87yUkC9IVMegNlki89nsT5uRXswIDAQABAoIBAQCYztBl6ylwv6x9\\n&quot; +\n            &quot;bSsLjnDb6nSeRF3wqh4asUknDSz6YsY/2Uk61fxXKBs9yzbec/8rD07OcW2EkR8i\\n&quot; +\n            &quot;hSDmQts+Gb37F5phW91dcOlJTSJedYmwh9yO4JxQOwn5RIjaplZ7ouUgV8rgxmMW\\n&quot; +\n            &quot;5Sbvemtp4FmRkgrVvGROlrhyENDu0lJzPtVks8XA1Re+CrOinhTCkISChqq/sHVC\\n&quot; +\n            &quot;sJfsI6OFHzk0Oexnh0sIG5MfaMNFp4Mh38UhrXFBJ6cIBuveEGzzED+AB6O30j3k\\n&quot; +\n            &quot;XT2pQbjCJcpekfpzfcW1VRfebLIgB+2mVjSleMKgA7ImyXOg4DCJiLWLulgOKmiE\\n&quot; +\n            &quot;x7qH684BAoGBAM1onwWBR3ERui4p22dNEoZ2tOygzEJKzhjsC1tRDAyO8Gr4QWNk\\n&quot; +\n            &quot;fNt/+8+gjJkMkkoKtjaqPrOdclhdPVCyQWvJt5ZAyAv0J7HDbZU8uShAOJI4eCpi\\n&quot; +\n            &quot;G2Xf20S0v84V12MEriWKZTmXUyWWKR87XkLTcVLCyfMTqPR1gMtHfpJpAoGBAMGQ\\n&quot; +\n            &quot;0lrFeNM2xqD7fZE/465wxp+kYPf/sMNkk6IqxJljtnzjWbySDU9csSwlN03Q36vu\\n&quot; +\n            &quot;/TGFIUWx2uTvjRHGEPvOC9agEZ8p9kHWrQb1ZgICpd/yWEy9nze66OayN3JyxkVR\\n&quot; +\n            &quot;pg2R5RRfnWuI9U6CyPhuZlptqDBUHXhG2kVB3Z27AoGBALYT0CpED3zl1uBG0CqA\\n&quot; +\n            &quot;gjRZE0VRv93fi1NCIUr/y6tyJSDdELE3CQpVJ3RDf33HTAF//0bzoAL9RLeZZtma\\n&quot; +\n            &quot;OS1/sFHq+KjH80u6zO9l1UcdrkfG8JW5Q0oJpccAZakbaUJniqrSQ6pKPjTqJ2d8\\n&quot; +\n            &quot;67BW13QiIHts6O5RHiqTJFpJAoGBAJEfMgbqDJdWdv8U7mSq4NnVJaVlCWqF4hHs\\n&quot; +\n            &quot;Yx9vLyzNbHEfxxSw75ezqAWv9VG7KybtrBindnWZTcLcswhDVlJjfc6w/eU2AbIE\\n&quot; +\n            &quot;8H7KF2ukbpaDTJ5kgG25DYqAzT9aO7qW54c+/eATe6O28CuntGNF6ikcE8AAIIQf\\n&quot; +\n            &quot;ot/P7QanAoGADQ5hDdPaq+wSFhYoeh//QfXrkbIcNl18ienY5Sn4jDrNgkkxghdc\\n&quot; +\n            &quot;WV3biTqIGMf15CI+//dSShbzI7nyoYQ8bl6HsFbEnGyS95PySdF6gUhsPKG83Ih2\\n&quot; +\n            &quot;SftvM2TzsO9D8XemkOHNwayPMN6YQA3SDZTZNNv3LYD7NkqhRQI0YUo=\\n&quot; +\n            &quot;-----END RSA PRIVATE KEY-----&quot;;\n\n    public native byte[] publicencryptRsa(String key, byte[] plainText);\n    public native byte[] privatedecryptRsa(String key, byte[] encText);\nbyte[] plainText = &quot;utnznxckymtyhedtumwtswlxgqkibutnznxckymtyhedtumwtswlxgqkibutnznxckymtyhedtumwtswlxgqkib1&quot;.getBytes(StandardCharsets.UTF_8);\n        StringBuilder sb2 = new StringBuilder();\n        for (byte b : plainText) {\n            sb2.append(String.format(&quot;%02X&quot;, b));\n        }\n        Log.d(TAG, &quot;onCreate: plainText = &quot; + sb2.toString());\n            //byte [] keyData = &quot;eQg2MDbk3uUtRhMw&quot;.getBytes();\n//        byte [] encryptedText = encryptAes256(keyData, plainText);\n//        byte [] decryptedText = decryptAes256(keyData, encryptedText);\n          byte [] encText = publicencryptRsa(public_key, plainText);\n            sb2 = new StringBuilder();\n            for (byte b : encText) {\n                sb2.append(String.format(&quot;%02X&quot;, b));\n            }\n            Log.d(TAG, &quot;onCreate: encText = &quot; + sb2.toString());\n          byte[] decBa = privatedecryptRsa(private_key, encText);\n        sb2 = new StringBuilder();\n        for (byte b : decBa) {\n            sb2.append(String.format(&quot;%02X&quot;, b));\n        }\n        Log.d(TAG, &quot;onCreate: decBa = &quot; + sb2.toString());\n</code></pre>\n<p>Methods from .cpp file</p>\n<p>Structures</p>\n<pre><code>RSA * createRSApub(std::string sKey) {\n   \n     RSA *rsa = nullptr;\n     BIO *keybio; //  BIO_new( BIO_s_mem() );\n     keybio = BIO_new_mem_buf(sKey.c_str(), sKey.length());\n\n    if (keybio == nullptr) {\n        printf( &quot;Failed to create key BIO&quot;);\n        return nullptr;\n    }\n    else  rsa = PEM_read_bio_RSA_PUBKEY(keybio, nullptr,nullptr, nullptr);\n\n    BIO_free(keybio);\n\n    return rsa;\n}\nRSA * createRSApriv(std::string sKey) {\n    RSA *rsa = nullptr;\n    BIO *keybio;\n    keybio = BIO_new_mem_buf(sKey.c_str(), sKey.length());\n\n    if (keybio == nullptr) {\n        printf( &quot;Failed to create key BIO&quot;);\n        return nullptr;\n    }\n    else rsa = PEM_read_bio_RSAPrivateKey(keybio, nullptr,nullptr, nullptr);\n  \n    return rsa;\n}\n</code></pre>\n<p>Encryption</p>\n<pre><code>Java_com_example_myapplication_MainActivity_publicencryptRsa(JNIEnv *env, jobject thiz, jstring key,\n                                                       jbyteArray plain_text) {\n      jboolean isCopy;\n\n    unsigned char *key_data = (unsigned char *) (env)-&gt;GetStringUTFChars(key, &amp;isCopy);\n    std::string sKey((char*) key_data);\n    int key_data_len = strlen((char*)key_data);\n\n\n    int plainText_len = env-&gt;GetArrayLength(plain_text);\n    jbyte* temp = env-&gt;GetByteArrayElements(plain_text,&amp;isCopy);\n    unsigned char* plainText;\n    plainText = (unsigned char *) temp;\n\n\n    if(nullptr == plainText)\n        return nullptr;\n\n    LOGI(&quot;The data to encrypt is : %s&quot;, plainText);\n\n    unsigned char chEncryptedData[4098] = {};\n    int iResult = RSA_public_encrypt(plainText_len, (unsigned char*)plain_text, chEncryptedData, createRSApub(sKey), RSA_PKCS1_OAEP_PADDING);\n\n//    env-&gt;ReleaseStringUTFChars(env, inData, cData);\n\n// If encryption fails, returns nullptr string, else returns encrypted string\n    if(-1 == iResult) {\n        char *chErrMsg = (char*)malloc(256);\n        ERR_load_crypto_strings();\n        ERR_error_string(ERR_get_error(), chErrMsg);\n        LOGE(&quot;The data Encryption failed due to the reason : %s&quot;, chErrMsg);\n        free(chErrMsg);\n        return nullptr;\n    }\n//    for(int i = 0; i &lt; 255; ++i)\n//        LOGD(&quot;The Encrypted data is[%d] : %c&quot;, i, chEncryptedData[i]);\n\n    jbyteArray EncryptedByteArray = env-&gt;NewByteArray(iResult);\n    env-&gt;SetByteArrayRegion(EncryptedByteArray, 0, iResult, (jbyte *) chEncryptedData);\n\n    return EncryptedByteArray;\n}\n</code></pre>\n<p>Decryption</p>\n<pre><code>Java_com_example_myapplication_MainActivity_privatedecryptRsa(JNIEnv *env, jobject thiz,\n                                                       jstring private_key,\n                                                       jbyteArray enc_text) {\n    jboolean isCopy;\n    unsigned char *key_data = (unsigned char *) (env)-&gt;GetStringUTFChars(private_key, &amp;isCopy);\n    std::string sKey((char*) key_data);\n    int key_data_len = strlen((char*)key_data);\n\n    int encText_len = env-&gt;GetArrayLength(enc_text);\n    jbyte* a = env-&gt;GetByteArrayElements(enc_text,&amp;isCopy);\n    const unsigned char* encText;\n    encText = (unsigned char *) a;\n\n    unsigned char chDecryptedData[4098] = {};\n\n    int result = RSA_private_decrypt(256,encText, chDecryptedData, createRSApriv(sKey), RSA_PKCS1_OAEP_PADDING);\n\n    if(-1 == result) {\n        char *chErrMsg = (char*)malloc(256);\n        ERR_load_crypto_strings();\n        ERR_error_string(ERR_get_error(), chErrMsg);\n        LOGE(&quot;The data Decryption failed due to the reason : %s&quot;, chErrMsg);\n        free(chErrMsg);\n        return nullptr;\n    }\n\n//    for(int i = 0; i &lt; 100; ++i)\n//        LOGD(&quot;The Decrypted data is[%d] : %c&quot;, i, chDecryptedData[i]);\n\n    jbyteArray DecryptedByteArray = env-&gt;NewByteArray(result);\n    env-&gt;SetByteArrayRegion(DecryptedByteArray, 0, result, (jbyte *) chDecryptedData);\n\n    return DecryptedByteArray;\n}\n</code></pre>\n<p>Here's out\n<a href=\"https://i.stack.imgur.com/mZWTE.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I don't know where the problem actually is, both keys are valid and <code>RSA_private_decrypt </code> returns correct length of plain_text, but wrong characters.</p>\n"},{"tags":["java","zip","archive","apache-commons-compress","http-range"],"comments":[{"owner":{"account_id":1136690,"reputation":104411,"user_id":1180620,"accept_rate":83,"display_name":"Mark Adler"},"score":0,"creation_date":1691524216,"post_id":76861307,"comment_id":135502689,"body_markdown":"Note that tar files don&#39;t _have_ a central directory. You&#39;d have to poke around through the whole thing to construct a directory. If the tar file is compressed, you&#39;d simply have to download the whole thing.","body":"Note that tar files don&#39;t <i>have</i> a central directory. You&#39;d have to poke around through the whole thing to construct a directory. If the tar file is compressed, you&#39;d simply have to download the whole thing."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691525950,"post_id":76861307,"comment_id":135502965,"body_markdown":"Why not have a servlet list it for you?","body":"Why not have a servlet list it for you?"},{"owner":{"account_id":4590532,"reputation":143,"user_id":3723971,"accept_rate":50,"display_name":"Alper M."},"score":0,"creation_date":1692902582,"post_id":76861307,"comment_id":135691110,"body_markdown":"thanks for your comments. @MarkAdler I didn&#39;t know about this limitation of the tar file. I guess there is no generic solution with java or python. We will download the file to the server and list the content.","body":"thanks for your comments. @MarkAdler I didn&#39;t know about this limitation of the tar file. I guess there is no generic solution with java or python. We will download the file to the server and list the content."}],"answers":[{"tags":[],"owner":{"account_id":1136690,"reputation":104411,"user_id":1180620,"accept_rate":83,"display_name":"Mark Adler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691528040,"creation_date":1691527653,"answer_id":76863112,"question_id":76861307,"body_markdown":"If you can&#39;t run something on the server side, then you can do a range request on just the end of the zip file, and reconstruct a zip file locally with no contents on which you can use `unzip` to list the contents. You would write zeros for the content.\r\n\r\nI just tried zeroing out everything before the central directory on a large zip file, and unzip listed the contents just fine.\r\n\r\nTo do this you could either a) search for the end of central directory, and then possibly the zip64 end record locator and zip64 end record, in order determine the offset of the central directory, reading from there, or b) read larger and larger portions of the end of the zip file, say doubling each time, until `unzip -l` works. If you have not captured the entire central directory, then `unzip -l` will report &quot;start of central directory not found&quot;.\r\n\r\nTo use range requests, you will need to know the size of the zip file. Then for b), you can read, say, the last 1K, the 1K before that, the 2K before that, the 4K before that, and so on, until `unzip -l` works. Each time you would update a file with zeros up to what you have accumulated from the end of the zip file so far, followed by what you have accumulated. To do this efficiently, you would start with file of all zeros with the length of the zip file on the server. Then as you accumulate more data from the end, write over the end of that file, repeating `unzip -l` each time.\r\n\r\nIf you want to try a), then you&#39;ll need to read and understand the [zip file format appnote][1].\r\n\r\n\r\n  [1]: https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT","title":"How to get list of files in an archive file without download","body":"<p>If you can't run something on the server side, then you can do a range request on just the end of the zip file, and reconstruct a zip file locally with no contents on which you can use <code>unzip</code> to list the contents. You would write zeros for the content.</p>\n<p>I just tried zeroing out everything before the central directory on a large zip file, and unzip listed the contents just fine.</p>\n<p>To do this you could either a) search for the end of central directory, and then possibly the zip64 end record locator and zip64 end record, in order determine the offset of the central directory, reading from there, or b) read larger and larger portions of the end of the zip file, say doubling each time, until <code>unzip -l</code> works. If you have not captured the entire central directory, then <code>unzip -l</code> will report &quot;start of central directory not found&quot;.</p>\n<p>To use range requests, you will need to know the size of the zip file. Then for b), you can read, say, the last 1K, the 1K before that, the 2K before that, the 4K before that, and so on, until <code>unzip -l</code> works. Each time you would update a file with zeros up to what you have accumulated from the end of the zip file so far, followed by what you have accumulated. To do this efficiently, you would start with file of all zeros with the length of the zip file on the server. Then as you accumulate more data from the end, write over the end of that file, repeating <code>unzip -l</code> each time.</p>\n<p>If you want to try a), then you'll need to read and understand the <a href=\"https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT\" rel=\"nofollow noreferrer\">zip file format appnote</a>.</p>\n"}],"owner":{"account_id":4590532,"reputation":143,"user_id":3723971,"accept_rate":50,"display_name":"Alper M."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691528040,"creation_date":1691510399,"question_id":76861307,"body_markdown":"I try to get list of file names in large archive files (zip, 7z, tar, rar etc.) located in remote server. I avoid to download files due to network cost.\r\n\r\nAn alternative is to use an HTTP range request ([1][1], [2][2], [3][3]); however, each archive file type has a unique allocation for the entire central directory. Apache commons-compress library supports most of them, I tend to use it to overcome this issue. How can I use it for remote archive files without download?\r\n\r\nAs with the python libraries ([1][4], [2][5]), do you have any advice for Java?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54657387/download-only-a-range-of-bytes-or-a-specific-file-from-a-tar-archive-in-s3?utm_source=pocket_reader\r\n  [2]: https://stackoverflow.com/a/17434121/3723971\r\n  [3]: https://stackoverflow.com/a/22112707/3723971\r\n  [4]: https://github.com/gtsystem/python-remotezip?utm_source=pocket_reader#list-members-in-archive\r\n  [5]: https://github.com/kgonia/onlinezip?utm_source=pocket_reader#usage","title":"How to get list of files in an archive file without download","body":"<p>I try to get list of file names in large archive files (zip, 7z, tar, rar etc.) located in remote server. I avoid to download files due to network cost.</p>\n<p>An alternative is to use an HTTP range request (<a href=\"https://stackoverflow.com/questions/54657387/download-only-a-range-of-bytes-or-a-specific-file-from-a-tar-archive-in-s3?utm_source=pocket_reader\">1</a>, <a href=\"https://stackoverflow.com/a/17434121/3723971\">2</a>, <a href=\"https://stackoverflow.com/a/22112707/3723971\">3</a>); however, each archive file type has a unique allocation for the entire central directory. Apache commons-compress library supports most of them, I tend to use it to overcome this issue. How can I use it for remote archive files without download?</p>\n<p>As with the python libraries (<a href=\"https://github.com/gtsystem/python-remotezip?utm_source=pocket_reader#list-members-in-archive\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://github.com/kgonia/onlinezip?utm_source=pocket_reader#usage\" rel=\"nofollow noreferrer\">2</a>), do you have any advice for Java?</p>\n"},{"tags":["java","netty","nio","radius","tinyradius"],"comments":[{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1691694210,"post_id":76863123,"comment_id":135529824,"body_markdown":"OK I just saw this [one](https://github.com/globalreachtech/tinyradius-netty/issues/62). Seems like this is a planned item..","body":"OK I just saw this <a href=\"https://github.com/globalreachtech/tinyradius-netty/issues/62\" rel=\"nofollow noreferrer\">one</a>. Seems like this is a planned item.."}],"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691527876,"creation_date":1691527876,"question_id":76863123,"body_markdown":"This is regarding the use of [tinyradius-netty][1] &amp; the mechanism to properly close the channel &amp; shutdown (as part of app shutdown). \r\n\r\n[Here][2] is the sample code on the [tinyradius-netty][1] public git repo.\r\n\r\nIf I try to test it as-is I see that the program does NOT finish &amp; return after executing the main method. When I look up for active socket use (with `netstat -anpe`) I see that its still connected.\r\n\r\n    root@Ubuntu1:~/TINYRADIUS-NETTY# ps -aef | grep java\r\n    root     13701 34395  0 Aug07 pts/17   00:02:19 java -jar target/tinyradius-netty-poc-1.0-jar-with-dependencies.jar 10.20.30.40 somesecret someusername somepwd\r\n    ...\r\n    ...\r\n      \r\n    root@Ubuntu1:~/TINYRADIUS-NETTY# netstat -anpe | grep java\r\n    ...\r\n    ...\r\n    unix  2      [ ]         STREAM     CONNECTED     7314176  13701/java          \r\n    ...\r\n    ...\r\n\r\n\r\nNow I know the above sample program is a little incomplete in the sense that it doesn&#39;t properly shutdown the `NioEventLoopGroup` or (I suspect) properly close the `NioDatagramChannel` (based on [this][3] SO answer). \r\n\r\nBut even if I do the above two I still see that the program does NOT finish &amp; return. Specifically even after I invoke [NioDatagramChannel#close()][4] &amp; then invoke [ChannelFuture#syncUninterruptibly()][5] or [ChannelFuture#awaitUninterruptibly()][6] &amp; they both return, I still see the same behavior (program doesn&#39;t return &amp; UNIX domain socket actively connected). \r\n\r\nI also tried invoking [ChannelFuture#cancel(true)][7] but it always returns `false` ([ChannelFuture#isCancellable()][8] returns true).\r\n\r\nBased on [this][9] SO answer I also verified that I am not using the affected version &amp; instead using the version `4.1.87.Final`.\r\n\r\nCan someone help throw some pointers on what I am missing here? \r\n\r\nBelow is my POM &amp; code.\r\n\r\nCode:\r\n\r\n    import io.netty.bootstrap.Bootstrap;\r\n    import io.netty.channel.ChannelFuture;\r\n    import io.netty.channel.ChannelInitializer;\r\n    import io.netty.channel.ChannelHandlerContext;\r\n    import io.netty.channel.ChannelPromise;\r\n    import io.netty.channel.ChannelDuplexHandler;\r\n    import io.netty.channel.ChannelOutboundHandler;\r\n    import io.netty.channel.ChannelOutboundHandlerAdapter;\r\n    import io.netty.channel.nio.NioEventLoopGroup;\r\n    import io.netty.channel.socket.DatagramChannel;\r\n    import io.netty.channel.socket.nio.NioDatagramChannel;\r\n    import io.netty.util.HashedWheelTimer;\r\n    import io.netty.util.Timer;\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n    import org.tinyradius.core.RadiusPacketException;\r\n    import org.tinyradius.core.dictionary.DefaultDictionary;\r\n    import org.tinyradius.core.dictionary.Dictionary;\r\n    import org.tinyradius.core.packet.request.AccessRequest;\r\n    import org.tinyradius.core.packet.request.AccessRequestPap;\r\n    import org.tinyradius.core.packet.request.AccountingRequest;\r\n    import org.tinyradius.core.packet.request.RadiusRequest;\r\n    import org.tinyradius.core.packet.response.RadiusResponse;\r\n    import org.tinyradius.io.RadiusEndpoint;\r\n    import org.tinyradius.io.client.RadiusClient;\r\n    import org.tinyradius.io.client.handler.BlacklistHandler;\r\n    import org.tinyradius.io.client.handler.ClientDatagramCodec;\r\n    import org.tinyradius.io.client.handler.PromiseAdapter;\r\n    import org.tinyradius.io.client.timeout.FixedTimeoutHandler;\r\n    \r\n    import java.net.InetSocketAddress;\r\n    import java.util.*;\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    import static org.tinyradius.core.packet.PacketType.ACCESS_REQUEST;\r\n    import static org.tinyradius.core.packet.PacketType.ACCOUNTING_REQUEST;\r\n    \r\n    /**\r\n     * @author lmk\r\n     *\r\n     */\r\n    public final class TestRadiusClient {\r\n    \r\n    \tprivate static final Logger logger = LogManager.getLogger();\r\n    \r\n    \r\n    \t/**\r\n    \t * Radius command line client.\r\n    \t *  \r\n    \t * @param args [host, sharedSecret, username, password] \r\n    \t */\r\n    \tpublic static void main(String... args) {\r\n    \t\t\r\n    \t\tif (args.length != 4) {\r\n    \t\t\tSystem.out.println(&quot;Usage: TestClient [hostName] [sharedSecret] [userName] [password]&quot;);\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t\r\n    \t\tfinal NioEventLoopGroup eventLoopGroup = new NioEventLoopGroup(4);\r\n    \t\tRadiusClient rc = null;\r\n    \t\t// Below is just a temporary hack to get a reference to the channel to see if i can close it to verify..\r\n    \t\tfinal Map.Entry&lt;String, DatagramChannel&gt; channelHolder = new AbstractMap.SimpleEntry&lt;&gt;(NioDatagramChannel.class.getName(), null);\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tfinal String host = args[0];\r\n    \t\t\tfinal String shared = args[1];\r\n    \t\t\tfinal String user = args[2];\r\n    \t\t\tfinal String pass = args[3];\r\n    \r\n    \t\t\tfinal Dictionary dictionary = DefaultDictionary.INSTANCE;\r\n    \t\t\tfinal Timer timer = new HashedWheelTimer();\r\n    \r\n    \t\t\tfinal Bootstrap bootstrap = new Bootstrap().group(eventLoopGroup).channel(NioDatagramChannel.class);\r\n    \t\t\t class MyOutboundHandler extends ChannelOutboundHandlerAdapter {\r\n    \t\t\t      @Override\r\n    \t\t\t     public void close(ChannelHandlerContext ctx, ChannelPromise promise) {\r\n    \t\t\t         System.out.println(&quot;Closing from MyOutboundHandler..&quot;);\r\n    \t\t\t         ctx.close(promise);\r\n    \t\t\t     }\r\n    \t\t\t }\r\n    \t\t\t\r\n    \t\t\trc = new RadiusClient(\r\n    \t\t\t\t\tbootstrap, new InetSocketAddress(0), new FixedTimeoutHandler(timer), new ChannelInitializer&lt;DatagramChannel&gt;() {\r\n    \t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\tprotected void initChannel(DatagramChannel ch) {\r\n    \t\t\t\t\t\t\tchannelHolder.setValue(ch);\r\n    \t\t\t\t\t\t\tch.pipeline().addLast(\r\n    \t\t\t\t\t\t\t\t\tnew ClientDatagramCodec(dictionary),\r\n    \t\t\t\t\t\t\t\t\tnew PromiseAdapter(),\r\n    \t\t\t\t\t\t\t\t\tnew BlacklistHandler(60_000, 3));\r\n    \t\t\t\t\t\t\tch.pipeline().addLast(new MyOutboundHandler());\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\tpublic void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;Exception caught! Cause is : &quot; + cause);\r\n    \t\t\t\t\t\t\tctx.channel().close();\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\tpublic void channelUnregistered(ChannelHandlerContext ctx) {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;IS CHANNEL OPEN? Y/N&quot; + ctx.channel().isOpen());\r\n    \t\t\t\t\t\t\tctx.channel().close();\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t});\r\n    \r\n    \t\t\tfinal RadiusEndpoint authEndpoint = new RadiusEndpoint(new InetSocketAddress(host, 1812), shared);\r\n    \t\t\tfinal RadiusEndpoint acctEndpoint = new RadiusEndpoint(new InetSocketAddress(host, 1813), shared);\r\n    \r\n    \t\t\t// 1. Send Access-Request\r\n    \t\t\tfinal AccessRequestPap ar = (AccessRequestPap)\r\n    \t\t\t\t\t((AccessRequest) RadiusRequest.create(dictionary, ACCESS_REQUEST, (byte) 1, null, Collections.emptyList()))\r\n    \t\t\t\t\t.withPapPassword(pass)\r\n    \t\t\t\t\t.addAttribute(&quot;User-Name&quot;, user)\r\n    \t\t\t\t\t.addAttribute(&quot;NAS-Identifier&quot;, &quot;this.is.my.nas-identifier&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;NAS-IP-Address&quot;, &quot;10.20.30.40&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;Service-Type&quot;, &quot;Login-User&quot;);\r\n    \r\n    \t\t\tSystem.out.println(&quot;Packet before it is sent\\n&quot; + ar + &quot;\\n&quot;);\r\n    \t\t\tRadiusResponse response = rc.communicate(ar, authEndpoint).syncUninterruptibly().getNow();\r\n    \t\t\tSystem.out.println(&quot;Packet after it was sent\\n&quot; + ar + &quot;\\n&quot;);\r\n    \t\t\tSystem.out.println(&quot;Response\\n&quot; + response + &quot;\\n&quot;);\r\n    \r\n    \t\t\t// 2. Send Accounting-Request\r\n    \t\t\tfinal AccountingRequest acc = (AccountingRequest) RadiusRequest.create(dictionary, ACCOUNTING_REQUEST, (byte) 2, null, new ArrayList&lt;&gt;())\r\n    \t\t\t\t\t.addAttribute(&quot;User-Name&quot;, &quot;username&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;Acct-Status-Type&quot;, &quot;1&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;Acct-Session-Id&quot;, &quot;1234567890&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;NAS-Identifier&quot;, &quot;this.is.my.nas-identifier&quot;)\r\n    \t\t\t\t\t.addAttribute(&quot;NAS-Port&quot;, &quot;0&quot;);\r\n    \r\n    \t\t\tSystem.out.println(acc + &quot;\\n&quot;);\r\n    \t\t\tresponse = rc.communicate(acc, acctEndpoint).syncUninterruptibly().getNow();\r\n    \t\t\tSystem.out.println(&quot;Response: &quot; + response);\r\n    \t\t\t\r\n    \t\t} catch(Exception e) {\r\n    \t\t\tSystem.out.println(String.format(&quot;Failed executing RadiusClient. Cause : %s&quot;, e));\r\n    \t\t} finally {\r\n    \t\t\ttry {\r\n    \t\t\t\trc.close();\r\n    \t\t\t\tchannelHolder.getValue().disconnect();\r\n    \t\t\t\tSystem.out.println(&quot;Disconnected!&quot;);\r\n    \t\t\t\tChannelFuture cf = channelHolder.getValue().close();\r\n    \t\t\t\tcf.syncUninterruptibly();\r\n    \t\t\t\t//cf.awaitUninterruptibly();\r\n    \t\t\t\tSystem.out.println(&quot;Is cancelable y/n &quot; + cf.isCancellable());\r\n    \t\t\t\tSystem.out.println(&quot;Is cancelled t/f &quot; + cf.cancel(true));\r\n    \t\t\t\teventLoopGroup.shutdownGracefully().sync();\r\n    \t\t\t\tSystem.out.println(&quot;Is eventLoopGroup terminated? t/f : &quot; + eventLoopGroup.awaitTermination(1, TimeUnit.SECONDS));\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\tSystem.out.println(&quot;Graceful shutdown failed!&quot; + e);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nPOM:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;dcm.poc&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;tinyradius-netty-poc&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${revision}&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \t&lt;name&gt;dcm-poc-tinyradius-netty-poc&lt;/name&gt;\r\n    \t&lt;description&gt;TinyRadius-Netty POC&lt;/description&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;maven.compiler.version&gt;3.11.0&lt;/maven.compiler.version&gt;\r\n    \t\t&lt;maven.assembly.version&gt;3.6.0&lt;/maven.assembly.version&gt;\r\n    \t\t&lt;tinyradius.netty.version&gt;1.5.12&lt;/tinyradius.netty.version&gt;\r\n    \t\t&lt;netty.codec.version&gt;4.1.87.Final&lt;/netty.codec.version&gt;\r\n    \t\t&lt;jakarta.xml.bind-api.version&gt;4.0.0&lt;/jakarta.xml.bind-api.version&gt;\r\n    \t\t&lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.globalreachtech&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tinyradius-netty&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${tinyradius.netty.version}&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;netty-all&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${netty.codec.version}&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${jakarta.xml.bind-api.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${maven.compiler.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;release&gt;${java.version}&lt;/release&gt;\r\n    \t\t\t\t\t&lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${maven.assembly.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;archive&gt;\r\n    \t\t\t\t\t\t\t\t&lt;manifest&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;mainClass&gt;\r\n    \t\t\t\t\t\t\t\t\t\tcom.dcm.tinyradiusnetty.poc.client.TestRadiusClient\r\n    \t\t\t\t\t\t\t\t\t&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/manifest&gt;\r\n    \t\t\t\t\t\t\t\t&lt;manifestEntries&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/manifestEntries&gt;\r\n    \t\t\t\t\t\t\t&lt;/archive&gt;\r\n    \t\t\t\t\t\t\t&lt;descriptorRefs&gt;\r\n    \t\t\t\t\t\t\t\t&lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n    \t\t\t\t\t\t\t&lt;/descriptorRefs&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://github.com/globalreachtech/tinyradius-netty\r\n  [2]: https://github.com/globalreachtech/tinyradius-netty/blob/master/src/test/java/org/tinyradius/io/TestClient.java\r\n  [3]: https://stackoverflow.com/a/56631722/5200064\r\n  [4]: https://netty.io/4.0/api/io/netty/channel/AbstractChannel.html#close--\r\n  [5]: https://netty.io/4.0/api/io/netty/channel/ChannelFuture.html#syncUninterruptibly--\r\n  [6]: https://netty.io/4.0/api/io/netty/channel/ChannelFuture.html#awaitUninterruptibly--\r\n  [7]: https://netty.io/4.0/api/io/netty/util/concurrent/Future.html#cancel-boolean-\r\n  [8]: https://netty.io/4.0/api/io/netty/util/concurrent/Future.html#isCancellable--\r\n  [9]: https://stackoverflow.com/a/48635253/5200064","title":"TinyRadius Netty RadiusClient test program does not shutdown &amp; return despite closing the NioDatagramChannel &amp; shutting down NioEventLoopGroup","body":"<p>This is regarding the use of <a href=\"https://github.com/globalreachtech/tinyradius-netty\" rel=\"nofollow noreferrer\">tinyradius-netty</a> &amp; the mechanism to properly close the channel &amp; shutdown (as part of app shutdown).</p>\n<p><a href=\"https://github.com/globalreachtech/tinyradius-netty/blob/master/src/test/java/org/tinyradius/io/TestClient.java\" rel=\"nofollow noreferrer\">Here</a> is the sample code on the <a href=\"https://github.com/globalreachtech/tinyradius-netty\" rel=\"nofollow noreferrer\">tinyradius-netty</a> public git repo.</p>\n<p>If I try to test it as-is I see that the program does NOT finish &amp; return after executing the main method. When I look up for active socket use (with <code>netstat -anpe</code>) I see that its still connected.</p>\n<pre><code>root@Ubuntu1:~/TINYRADIUS-NETTY# ps -aef | grep java\nroot     13701 34395  0 Aug07 pts/17   00:02:19 java -jar target/tinyradius-netty-poc-1.0-jar-with-dependencies.jar 10.20.30.40 somesecret someusername somepwd\n...\n...\n  \nroot@Ubuntu1:~/TINYRADIUS-NETTY# netstat -anpe | grep java\n...\n...\nunix  2      [ ]         STREAM     CONNECTED     7314176  13701/java          \n...\n...\n</code></pre>\n<p>Now I know the above sample program is a little incomplete in the sense that it doesn't properly shutdown the <code>NioEventLoopGroup</code> or (I suspect) properly close the <code>NioDatagramChannel</code> (based on <a href=\"https://stackoverflow.com/a/56631722/5200064\">this</a> SO answer).</p>\n<p>But even if I do the above two I still see that the program does NOT finish &amp; return. Specifically even after I invoke <a href=\"https://netty.io/4.0/api/io/netty/channel/AbstractChannel.html#close--\" rel=\"nofollow noreferrer\">NioDatagramChannel#close()</a> &amp; then invoke <a href=\"https://netty.io/4.0/api/io/netty/channel/ChannelFuture.html#syncUninterruptibly--\" rel=\"nofollow noreferrer\">ChannelFuture#syncUninterruptibly()</a> or <a href=\"https://netty.io/4.0/api/io/netty/channel/ChannelFuture.html#awaitUninterruptibly--\" rel=\"nofollow noreferrer\">ChannelFuture#awaitUninterruptibly()</a> &amp; they both return, I still see the same behavior (program doesn't return &amp; UNIX domain socket actively connected).</p>\n<p>I also tried invoking <a href=\"https://netty.io/4.0/api/io/netty/util/concurrent/Future.html#cancel-boolean-\" rel=\"nofollow noreferrer\">ChannelFuture#cancel(true)</a> but it always returns <code>false</code> (<a href=\"https://netty.io/4.0/api/io/netty/util/concurrent/Future.html#isCancellable--\" rel=\"nofollow noreferrer\">ChannelFuture#isCancellable()</a> returns true).</p>\n<p>Based on <a href=\"https://stackoverflow.com/a/48635253/5200064\">this</a> SO answer I also verified that I am not using the affected version &amp; instead using the version <code>4.1.87.Final</code>.</p>\n<p>Can someone help throw some pointers on what I am missing here?</p>\n<p>Below is my POM &amp; code.</p>\n<p>Code:</p>\n<pre><code>import io.netty.bootstrap.Bootstrap;\nimport io.netty.channel.ChannelFuture;\nimport io.netty.channel.ChannelInitializer;\nimport io.netty.channel.ChannelHandlerContext;\nimport io.netty.channel.ChannelPromise;\nimport io.netty.channel.ChannelDuplexHandler;\nimport io.netty.channel.ChannelOutboundHandler;\nimport io.netty.channel.ChannelOutboundHandlerAdapter;\nimport io.netty.channel.nio.NioEventLoopGroup;\nimport io.netty.channel.socket.DatagramChannel;\nimport io.netty.channel.socket.nio.NioDatagramChannel;\nimport io.netty.util.HashedWheelTimer;\nimport io.netty.util.Timer;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport org.tinyradius.core.RadiusPacketException;\nimport org.tinyradius.core.dictionary.DefaultDictionary;\nimport org.tinyradius.core.dictionary.Dictionary;\nimport org.tinyradius.core.packet.request.AccessRequest;\nimport org.tinyradius.core.packet.request.AccessRequestPap;\nimport org.tinyradius.core.packet.request.AccountingRequest;\nimport org.tinyradius.core.packet.request.RadiusRequest;\nimport org.tinyradius.core.packet.response.RadiusResponse;\nimport org.tinyradius.io.RadiusEndpoint;\nimport org.tinyradius.io.client.RadiusClient;\nimport org.tinyradius.io.client.handler.BlacklistHandler;\nimport org.tinyradius.io.client.handler.ClientDatagramCodec;\nimport org.tinyradius.io.client.handler.PromiseAdapter;\nimport org.tinyradius.io.client.timeout.FixedTimeoutHandler;\n\nimport java.net.InetSocketAddress;\nimport java.util.*;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.concurrent.TimeUnit;\n\nimport static org.tinyradius.core.packet.PacketType.ACCESS_REQUEST;\nimport static org.tinyradius.core.packet.PacketType.ACCOUNTING_REQUEST;\n\n/**\n * @author lmk\n *\n */\npublic final class TestRadiusClient {\n\n    private static final Logger logger = LogManager.getLogger();\n\n\n    /**\n     * Radius command line client.\n     *  \n     * @param args [host, sharedSecret, username, password] \n     */\n    public static void main(String... args) {\n        \n        if (args.length != 4) {\n            System.out.println(&quot;Usage: TestClient [hostName] [sharedSecret] [userName] [password]&quot;);\n            return;\n        }\n        \n        final NioEventLoopGroup eventLoopGroup = new NioEventLoopGroup(4);\n        RadiusClient rc = null;\n        // Below is just a temporary hack to get a reference to the channel to see if i can close it to verify..\n        final Map.Entry&lt;String, DatagramChannel&gt; channelHolder = new AbstractMap.SimpleEntry&lt;&gt;(NioDatagramChannel.class.getName(), null);\n        \n        try {\n            final String host = args[0];\n            final String shared = args[1];\n            final String user = args[2];\n            final String pass = args[3];\n\n            final Dictionary dictionary = DefaultDictionary.INSTANCE;\n            final Timer timer = new HashedWheelTimer();\n\n            final Bootstrap bootstrap = new Bootstrap().group(eventLoopGroup).channel(NioDatagramChannel.class);\n             class MyOutboundHandler extends ChannelOutboundHandlerAdapter {\n                  @Override\n                 public void close(ChannelHandlerContext ctx, ChannelPromise promise) {\n                     System.out.println(&quot;Closing from MyOutboundHandler..&quot;);\n                     ctx.close(promise);\n                 }\n             }\n            \n            rc = new RadiusClient(\n                    bootstrap, new InetSocketAddress(0), new FixedTimeoutHandler(timer), new ChannelInitializer&lt;DatagramChannel&gt;() {\n                        @Override\n                        protected void initChannel(DatagramChannel ch) {\n                            channelHolder.setValue(ch);\n                            ch.pipeline().addLast(\n                                    new ClientDatagramCodec(dictionary),\n                                    new PromiseAdapter(),\n                                    new BlacklistHandler(60_000, 3));\n                            ch.pipeline().addLast(new MyOutboundHandler());\n                        }\n                        \n                        @Override\n                        public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\n                            System.out.println(&quot;Exception caught! Cause is : &quot; + cause);\n                            ctx.channel().close();\n                        }\n                        \n                        @Override\n                        public void channelUnregistered(ChannelHandlerContext ctx) {\n                            System.out.println(&quot;IS CHANNEL OPEN? Y/N&quot; + ctx.channel().isOpen());\n                            ctx.channel().close();\n                        }\n                        \n                    });\n\n            final RadiusEndpoint authEndpoint = new RadiusEndpoint(new InetSocketAddress(host, 1812), shared);\n            final RadiusEndpoint acctEndpoint = new RadiusEndpoint(new InetSocketAddress(host, 1813), shared);\n\n            // 1. Send Access-Request\n            final AccessRequestPap ar = (AccessRequestPap)\n                    ((AccessRequest) RadiusRequest.create(dictionary, ACCESS_REQUEST, (byte) 1, null, Collections.emptyList()))\n                    .withPapPassword(pass)\n                    .addAttribute(&quot;User-Name&quot;, user)\n                    .addAttribute(&quot;NAS-Identifier&quot;, &quot;this.is.my.nas-identifier&quot;)\n                    .addAttribute(&quot;NAS-IP-Address&quot;, &quot;10.20.30.40&quot;)\n                    .addAttribute(&quot;Service-Type&quot;, &quot;Login-User&quot;);\n\n            System.out.println(&quot;Packet before it is sent\\n&quot; + ar + &quot;\\n&quot;);\n            RadiusResponse response = rc.communicate(ar, authEndpoint).syncUninterruptibly().getNow();\n            System.out.println(&quot;Packet after it was sent\\n&quot; + ar + &quot;\\n&quot;);\n            System.out.println(&quot;Response\\n&quot; + response + &quot;\\n&quot;);\n\n            // 2. Send Accounting-Request\n            final AccountingRequest acc = (AccountingRequest) RadiusRequest.create(dictionary, ACCOUNTING_REQUEST, (byte) 2, null, new ArrayList&lt;&gt;())\n                    .addAttribute(&quot;User-Name&quot;, &quot;username&quot;)\n                    .addAttribute(&quot;Acct-Status-Type&quot;, &quot;1&quot;)\n                    .addAttribute(&quot;Acct-Session-Id&quot;, &quot;1234567890&quot;)\n                    .addAttribute(&quot;NAS-Identifier&quot;, &quot;this.is.my.nas-identifier&quot;)\n                    .addAttribute(&quot;NAS-Port&quot;, &quot;0&quot;);\n\n            System.out.println(acc + &quot;\\n&quot;);\n            response = rc.communicate(acc, acctEndpoint).syncUninterruptibly().getNow();\n            System.out.println(&quot;Response: &quot; + response);\n            \n        } catch(Exception e) {\n            System.out.println(String.format(&quot;Failed executing RadiusClient. Cause : %s&quot;, e));\n        } finally {\n            try {\n                rc.close();\n                channelHolder.getValue().disconnect();\n                System.out.println(&quot;Disconnected!&quot;);\n                ChannelFuture cf = channelHolder.getValue().close();\n                cf.syncUninterruptibly();\n                //cf.awaitUninterruptibly();\n                System.out.println(&quot;Is cancelable y/n &quot; + cf.isCancellable());\n                System.out.println(&quot;Is cancelled t/f &quot; + cf.cancel(true));\n                eventLoopGroup.shutdownGracefully().sync();\n                System.out.println(&quot;Is eventLoopGroup terminated? t/f : &quot; + eventLoopGroup.awaitTermination(1, TimeUnit.SECONDS));\n            } catch (Exception e) {\n                System.out.println(&quot;Graceful shutdown failed!&quot; + e);\n            }\n        }\n    }\n}\n</code></pre>\n<p>POM:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;dcm.poc&lt;/groupId&gt;\n    &lt;artifactId&gt;tinyradius-netty-poc&lt;/artifactId&gt;\n    &lt;version&gt;${revision}&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;dcm-poc-tinyradius-netty-poc&lt;/name&gt;\n    &lt;description&gt;TinyRadius-Netty POC&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.version&gt;3.11.0&lt;/maven.compiler.version&gt;\n        &lt;maven.assembly.version&gt;3.6.0&lt;/maven.assembly.version&gt;\n        &lt;tinyradius.netty.version&gt;1.5.12&lt;/tinyradius.netty.version&gt;\n        &lt;netty.codec.version&gt;4.1.87.Final&lt;/netty.codec.version&gt;\n        &lt;jakarta.xml.bind-api.version&gt;4.0.0&lt;/jakarta.xml.bind-api.version&gt;\n        &lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.globalreachtech&lt;/groupId&gt;\n            &lt;artifactId&gt;tinyradius-netty&lt;/artifactId&gt;\n            &lt;version&gt;${tinyradius.netty.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n                    &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.netty&lt;/groupId&gt;\n            &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\n            &lt;version&gt;${netty.codec.version}&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n                    &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;${jakarta.xml.bind-api.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.compiler.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;${java.version}&lt;/release&gt;\n                    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.assembly.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;archive&gt;\n                                &lt;manifest&gt;\n                                    &lt;mainClass&gt;\n                                        com.dcm.tinyradiusnetty.poc.client.TestRadiusClient\n                                    &lt;/mainClass&gt;\n                                &lt;/manifest&gt;\n                                &lt;manifestEntries&gt;\n                                    &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\n                                &lt;/manifestEntries&gt;\n                            &lt;/archive&gt;\n                            &lt;descriptorRefs&gt;\n                                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                            &lt;/descriptorRefs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","networking","protocols","netty","channel"],"answers":[{"tags":[],"owner":{"account_id":40784,"reputation":7745,"user_id":118268,"accept_rate":84,"display_name":"KevinS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1326735927,"creation_date":1326735927,"answer_id":8884072,"question_id":8883413,"body_markdown":"You didn&#39;t mention what the error was that you are seeing.\r\n\r\nIn any case, I would not recommend using a separate channel handler for doing a version check. Mainly because the version check should only need to happen once, when the connection is first established. Also because I think the channel handlers are best left dealing with transport layer concerns e.g. converting bytes into pojos. ","title":"Netty - How to test for client/server version numbers","body":"<p>You didn't mention what the error was that you are seeing.</p>\n\n<p>In any case, I would not recommend using a separate channel handler for doing a version check. Mainly because the version check should only need to happen once, when the connection is first established. Also because I think the channel handlers are best left dealing with transport layer concerns e.g. converting bytes into pojos. </p>\n"},{"tags":[],"owner":{"account_id":299346,"reputation":4031,"user_id":605890,"accept_rate":39,"display_name":"Dennis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1327114115,"creation_date":1327114115,"answer_id":8950257,"question_id":8883413,"body_markdown":"I created a simple example: https://github.com/boldt/netty-examples/\r\n\r\nIt returns the version number when a new connection is established. It is done in a separate handler which will be removed from the pipeline after the version is written on the channel. Afterwards it is the ECHO example from the netty tutorial.\r\n\r\nA `telnet localhost 1234` to the server shows the version immediately.\r\n\r\nLike this you could add an authentication-handler to the pipeline behind the version-handler.","title":"Netty - How to test for client/server version numbers","body":"<p>I created a simple example: <a href=\"https://github.com/boldt/netty-examples/\" rel=\"nofollow\">https://github.com/boldt/netty-examples/</a></p>\n\n<p>It returns the version number when a new connection is established. It is done in a separate handler which will be removed from the pipeline after the version is written on the channel. Afterwards it is the ECHO example from the netty tutorial.</p>\n\n<p>A <code>telnet localhost 1234</code> to the server shows the version immediately.</p>\n\n<p>Like this you could add an authentication-handler to the pipeline behind the version-handler.</p>\n"},{"tags":[],"owner":{"account_id":1075943,"reputation":23262,"user_id":1074097,"display_name":"Norman Maurer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1327164285,"creation_date":1327164285,"answer_id":8954722,"question_id":8883413,"body_markdown":"I think what you want todo can be archived easily by adding some custom handlers. So for the version check you could add a handler that override channelConnected(....) and do rhe check there. For auth just add another handler after the version check which override the messageRecieved(....) method. After the auth is complete you can remove the handler frm the pipeline and add it back once you need it again.\r\n\r\nThe BusinessLogic Handler should sit in the pipeline as the last one. Just be aware that any of your handlers does some blocking operation you should think about adding a ExecutionHandler in front of it to mKe sure hat the ioworker thread will nit get blocked and so make the netty server unresponsible.","title":"Netty - How to test for client/server version numbers","body":"<p>I think what you want todo can be archived easily by adding some custom handlers. So for the version check you could add a handler that override channelConnected(....) and do rhe check there. For auth just add another handler after the version check which override the messageRecieved(....) method. After the auth is complete you can remove the handler frm the pipeline and add it back once you need it again.</p>\n\n<p>The BusinessLogic Handler should sit in the pipeline as the last one. Just be aware that any of your handlers does some blocking operation you should think about adding a ExecutionHandler in front of it to mKe sure hat the ioworker thread will nit get blocked and so make the netty server unresponsible.</p>\n"},{"tags":[],"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691527813,"creation_date":1327170726,"answer_id":8955543,"question_id":8883413,"body_markdown":"I found the solution!!!\r\n\r\nThere were a number of issues. \r\n\r\n**On VersionClientHandler, the new code is:**\r\n\r\n    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e)\r\n    {\r\n    \tString version = &quot;v123.45a&quot;;\r\n    \r\n        ChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_STRING_LENGTH);\r\n        versionBuffer.writeBytes(version.getBytes());\r\n    \te.getChannel().write(version);\r\n    }\r\n\r\nNotice the last line, `e.getChannel().write(version);` instead of `Channels.write(ctx, e.getFuture(), versionBuffer);` I&#39;m not sure of the why. *In fact, I&#39;m about to start looking into why I have the ChannelBuffers code there because it doesn&#39;t seem to do anything...*\r\n\r\n**On VersionServerHandler.java I now have:**\r\n\r\n    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \r\n    {\r\n    \tString versionCheck = (String)e.getMessage();\r\n    \tSystem.out.println(&quot;VersionServerHandler - &quot; + versionCheck);\r\n    \tctx.getPipeline().remove(VersionServerHandler.class);\r\n    }\r\n\r\nNotice I don&#39;t read through the buffer anymore, I just do `e.getMessage()` and cast to the correct type of object. Above this I added `ctx.getPipeline().remove(VersionServerHandler.class);` which is there to remove that handler from any further processing. It&#39;s no longer required after the initial connection. Thanks to Dennis for that tip.\r\n\r\n**Conclusion**\r\n\r\nThe rest is much as I expected. the key is that I wasn&#39;t correctly understanding how to read the buffers and pass the info around. And the error messages and examples weren&#39;t quite clear. As soon as you add the POJO channels from Netty to your pipeline, you need to start dealing only in objects, for all handlers. I missed that one. The concepts were right, it&#39;s just how I tried to read the data from the channels that was wrong. \r\n\r\nThe other big tip, was to remove the handlers from the pipeline if you don&#39;t need them after the initial connection. I assume the same will be true for an authentication handler. It would be great to have confirmation here, but I&#39;ll have to figure that one out later.\r\n\r\n","title":"Netty - How to test for client/server version numbers","body":"<p>I found the solution!!!</p>\n<p>There were a number of issues.</p>\n<p><strong>On VersionClientHandler, the new code is:</strong></p>\n<pre><code>public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e)\n{\n    String version = &quot;v123.45a&quot;;\n\n    ChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_STRING_LENGTH);\n    versionBuffer.writeBytes(version.getBytes());\n    e.getChannel().write(version);\n}\n</code></pre>\n<p>Notice the last line, <code>e.getChannel().write(version);</code> instead of <code>Channels.write(ctx, e.getFuture(), versionBuffer);</code> I'm not sure of the why. <em>In fact, I'm about to start looking into why I have the ChannelBuffers code there because it doesn't seem to do anything...</em></p>\n<p><strong>On VersionServerHandler.java I now have:</strong></p>\n<pre><code>public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \n{\n    String versionCheck = (String)e.getMessage();\n    System.out.println(&quot;VersionServerHandler - &quot; + versionCheck);\n    ctx.getPipeline().remove(VersionServerHandler.class);\n}\n</code></pre>\n<p>Notice I don't read through the buffer anymore, I just do <code>e.getMessage()</code> and cast to the correct type of object. Above this I added <code>ctx.getPipeline().remove(VersionServerHandler.class);</code> which is there to remove that handler from any further processing. It's no longer required after the initial connection. Thanks to Dennis for that tip.</p>\n<p><strong>Conclusion</strong></p>\n<p>The rest is much as I expected. the key is that I wasn't correctly understanding how to read the buffers and pass the info around. And the error messages and examples weren't quite clear. As soon as you add the POJO channels from Netty to your pipeline, you need to start dealing only in objects, for all handlers. I missed that one. The concepts were right, it's just how I tried to read the data from the channels that was wrong.</p>\n<p>The other big tip, was to remove the handlers from the pipeline if you don't need them after the initial connection. I assume the same will be true for an authentication handler. It would be great to have confirmation here, but I'll have to figure that one out later.</p>\n"}],"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4364,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":8955543,"answer_count":4,"score":1,"last_activity_date":1691527813,"creation_date":1326732924,"question_id":8883413,"body_markdown":"As part of my protocol, I&#39;d like the client to send its version number when a new connection is established. I&#39;d like this to be done in a separate handler in the pipeline, so please bear with me as this may be a fairly basic question but I&#39;m not sure how to do it. The other thing is that I&#39;d like to then be able to send POJO&#39;s back and forth through the connection (pipeline). Also I&#39;d love to add an Authentication handler. Anyways, right now I&#39;m getting some kind of error and I&#39;m pretty sure it&#39;s because the version check is not being properly digested from the pipeline.\r\n\r\nBasically the code I have below is setup to send &quot;Hello World&quot; which the server prints out after the version has been checked when the connection has been established. At least in theory, in reality this isn&#39;t quite working ;)\r\n\r\nCurrently I have:\r\n\r\nClient.java\r\n\r\n    public static void main(String[] args)\r\n    {\r\n    \t...\r\n    \t\r\n        // Set up the pipeline factory.\r\n        bootstrap.setPipelineFactory(new ChannelPipelineFactory() \r\n        {\r\n            @Override\r\n    \t\tpublic ChannelPipeline getPipeline() throws Exception \r\n            {\r\n                return Channels.pipeline(\r\n                        new ObjectEncoder(),\r\n                        new ObjectDecoder(),\r\n                        new VersionClientHandler(),\r\n                        new BusinessLogicClientHandler());\r\n            }\r\n        });\t\t\r\n    \r\n    \t...\r\n    \r\n    \t// The idea is that it will all be request and response. Much like http but with pojo&#39;s. \r\n    \tChannelFuture lastWriteFuture = channel.write(&quot;Hello world&quot;.getBytes());\r\n    \t\r\n    \tif (lastWriteFuture != null) \r\n        {\r\n           \tSystem.out.println(&quot;waiting for message to be sent&quot;);\r\n               lastWriteFuture.awaitUninterruptibly();\r\n    \t}\r\n    \r\n    \t...\r\n    }\r\n\r\nVersionClientHandler.java\r\n\r\n    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e)\r\n    {\r\n    \tChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_STRING_LENGTH);\r\n    \tversionBuffer.writeBytes(&quot;v123.45a&quot;.getBytes());\r\n    \t// If I understand correctly, the next line says use the rest of the stream to do what you need to the next Handler in the pipeline?\r\n    \tChannels.write(ctx, e.getFuture(), versionBuffer);  \r\n    }\r\n\r\nBusinessLogicClientHandler.java\r\n\r\n    Not really doing anything at this point. Should it?\r\n\r\n\r\nServer.java\r\n\r\n    public static void main(String[] args)\r\n    {\r\n    \t...\r\n    \t\r\n    \tpublic ChannelPipeline getPipeline() throws Exception \r\n        {\r\n        \treturn Channels.pipeline(\r\n            \t\tnew ObjectEncoder(),\r\n                    new ObjectDecoder(),\r\n                    new VersionServerHandler(),\r\n                    new BusinessLogicServerHandler());\r\n    \t}\r\n    \r\n    \t...\r\n    }\r\n\r\nVersionServerHandler.java\r\n\r\n    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \r\n    {\r\n    \tChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_NUMBER_MAX_SIZE);\r\n    \tSystem.out.println(&quot;isReadable - messageReceived: &quot; + versionBuffer.readable()); // returns false???\r\n    \t// Basically I want to read it and confirm the client and server versions match.\r\n    \t// And if the match fails either send a message or throw an exception\r\n    \t// How do I also pass on the stream to the next Handler? \r\n    }\r\n\r\n\r\nBusinessLogicServerHandler.java\r\n\r\n    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \r\n    {\r\n    \te.getMessage();\r\n        byte[] message = (byte[])e.getMessage(); // &quot;Hello World&quot; in byte[] from Client.java\r\n    }\r\n\r\n\r\nSo basically what I want is that the version number is passed and validated when the channel is connected as part of the communication protocol. All done automatically behind the scenes. Similarly I&#39;d love to pass the authentication mechanism this way. \r\n\r\nI did see some code which looked somewhat like what I wanted to do with the Secure Chat example, but I couldn&#39;t really figure it out. Any help on how to setup this code would be really appreciated. I know I could do it all in one massive handler, but that&#39;s the point of the pipeline, to break it up into units that make logical sense. ","title":"Netty - How to test for client/server version numbers","body":"<p>As part of my protocol, I'd like the client to send its version number when a new connection is established. I'd like this to be done in a separate handler in the pipeline, so please bear with me as this may be a fairly basic question but I'm not sure how to do it. The other thing is that I'd like to then be able to send POJO's back and forth through the connection (pipeline). Also I'd love to add an Authentication handler. Anyways, right now I'm getting some kind of error and I'm pretty sure it's because the version check is not being properly digested from the pipeline.</p>\n\n<p>Basically the code I have below is setup to send \"Hello World\" which the server prints out after the version has been checked when the connection has been established. At least in theory, in reality this isn't quite working ;)</p>\n\n<p>Currently I have:</p>\n\n<p>Client.java</p>\n\n<pre><code>public static void main(String[] args)\n{\n    ...\n\n    // Set up the pipeline factory.\n    bootstrap.setPipelineFactory(new ChannelPipelineFactory() \n    {\n        @Override\n        public ChannelPipeline getPipeline() throws Exception \n        {\n            return Channels.pipeline(\n                    new ObjectEncoder(),\n                    new ObjectDecoder(),\n                    new VersionClientHandler(),\n                    new BusinessLogicClientHandler());\n        }\n    });     \n\n    ...\n\n    // The idea is that it will all be request and response. Much like http but with pojo's. \n    ChannelFuture lastWriteFuture = channel.write(\"Hello world\".getBytes());\n\n    if (lastWriteFuture != null) \n    {\n        System.out.println(\"waiting for message to be sent\");\n           lastWriteFuture.awaitUninterruptibly();\n    }\n\n    ...\n}\n</code></pre>\n\n<p>VersionClientHandler.java</p>\n\n<pre><code>public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e)\n{\n    ChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_STRING_LENGTH);\n    versionBuffer.writeBytes(\"v123.45a\".getBytes());\n    // If I understand correctly, the next line says use the rest of the stream to do what you need to the next Handler in the pipeline?\n    Channels.write(ctx, e.getFuture(), versionBuffer);  \n}\n</code></pre>\n\n<p>BusinessLogicClientHandler.java</p>\n\n<pre><code>Not really doing anything at this point. Should it?\n</code></pre>\n\n<p>Server.java</p>\n\n<pre><code>public static void main(String[] args)\n{\n    ...\n\n    public ChannelPipeline getPipeline() throws Exception \n    {\n        return Channels.pipeline(\n                new ObjectEncoder(),\n                new ObjectDecoder(),\n                new VersionServerHandler(),\n                new BusinessLogicServerHandler());\n    }\n\n    ...\n}\n</code></pre>\n\n<p>VersionServerHandler.java</p>\n\n<pre><code>public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \n{\n    ChannelBuffer versionBuffer = ChannelBuffers.buffer(VERSION_NUMBER_MAX_SIZE);\n    System.out.println(\"isReadable - messageReceived: \" + versionBuffer.readable()); // returns false???\n    // Basically I want to read it and confirm the client and server versions match.\n    // And if the match fails either send a message or throw an exception\n    // How do I also pass on the stream to the next Handler? \n}\n</code></pre>\n\n<p>BusinessLogicServerHandler.java</p>\n\n<pre><code>public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) \n{\n    e.getMessage();\n    byte[] message = (byte[])e.getMessage(); // \"Hello World\" in byte[] from Client.java\n}\n</code></pre>\n\n<p>So basically what I want is that the version number is passed and validated when the channel is connected as part of the communication protocol. All done automatically behind the scenes. Similarly I'd love to pass the authentication mechanism this way. </p>\n\n<p>I did see some code which looked somewhat like what I wanted to do with the Secure Chat example, but I couldn't really figure it out. Any help on how to setup this code would be really appreciated. I know I could do it all in one massive handler, but that's the point of the pipeline, to break it up into units that make logical sense. </p>\n"},{"tags":["java","spring-boot","unit-testing","junit","assertj"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691502056,"post_id":76860117,"comment_id":135498212,"body_markdown":"Think about it: Does the test you&#39;re proposing really add value? Or is it just to satisfy code coverage? A 100% coverage number is rarely a good target by itself.","body":"Think about it: Does the test you&#39;re proposing really add value? Or is it just to satisfy code coverage? A 100% coverage number is rarely a good target by itself."},{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":0,"creation_date":1691502228,"post_id":76860117,"comment_id":135498254,"body_markdown":"Why are you mocking the *System Under Test* itself?","body":"Why are you mocking the <i>System Under Test</i> itself?"},{"owner":{"account_id":4700927,"reputation":1844,"user_id":3804495,"accept_rate":46,"display_name":"heisenberg"},"score":0,"creation_date":1691502336,"post_id":76860117,"comment_id":135498281,"body_markdown":"Only reason is  because I&#39;m trying to hit the code coverage set in Gradle build `javaCodeCoverage` task","body":"Only reason is  because I&#39;m trying to hit the code coverage set in Gradle build <code>javaCodeCoverage</code> task"},{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":1,"creation_date":1691502358,"post_id":76860117,"comment_id":135498291,"body_markdown":"The core problem is that having DataUtil get as a static method makes it hard to mock. And yes you&#39;re mocking the wrong things. You&#39;re using spring boot, can&#39;t you use some kind of repository to fetch data?","body":"The core problem is that having DataUtil get as a static method makes it hard to mock. And yes you&#39;re mocking the wrong things. You&#39;re using spring boot, can&#39;t you use some kind of repository to fetch data?"}],"answers":[{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691502932,"creation_date":1691502932,"answer_id":76860239,"question_id":76860117,"body_markdown":"Like people stated in the comments, you&#39;re mocking the wrong things. You can mock static things (like &quot;DataUtil#get&quot;), but since this doesn&#39;t go to the core of the question, let&#39;s say we have\r\n\r\n```\r\npublic class SomeService {\r\n   Supplier&lt;Data&gt; dataSupplier; // set in constructor, can be () -&gt; DataUtils.get(SOME_TABLE)\r\n\r\n   ...\r\n        try (Data data = dataSupplier.get()){\r\n...\r\n```\r\n\r\nTo get your coverage, you can then\r\n\r\n```\r\n// exception cases\r\n// exception one\r\nwhen(dataSupplier.get()).thenThrow(new ExceptionOne());\r\n// exception two\r\nwhen(dataSupplier.get()).thenThrow(new ExceptionTwo());\r\n// empty retrieval cases\r\nData data = mock(Data.class);\r\nwhen(dataSupplier.get()).thenReturn(data);\r\n// covers != null case\r\nwhen(data.retrieveAll()).thenReturn(null);\r\n// covers != null case\r\nwhen(data.retrieveAll()).thenReturn(List.of());\r\n\r\n// verify SomeCustomException is thrown\r\n```\r\nAll four of these need to be in separate test cases (with the same verification).","title":"Java Unit Testing - Make return value of a method called by enclosing method to Empty","body":"<p>Like people stated in the comments, you're mocking the wrong things. You can mock static things (like &quot;DataUtil#get&quot;), but since this doesn't go to the core of the question, let's say we have</p>\n<pre><code>public class SomeService {\n   Supplier&lt;Data&gt; dataSupplier; // set in constructor, can be () -&gt; DataUtils.get(SOME_TABLE)\n\n   ...\n        try (Data data = dataSupplier.get()){\n...\n</code></pre>\n<p>To get your coverage, you can then</p>\n<pre><code>// exception cases\n// exception one\nwhen(dataSupplier.get()).thenThrow(new ExceptionOne());\n// exception two\nwhen(dataSupplier.get()).thenThrow(new ExceptionTwo());\n// empty retrieval cases\nData data = mock(Data.class);\nwhen(dataSupplier.get()).thenReturn(data);\n// covers != null case\nwhen(data.retrieveAll()).thenReturn(null);\n// covers != null case\nwhen(data.retrieveAll()).thenReturn(List.of());\n\n// verify SomeCustomException is thrown\n</code></pre>\n<p>All four of these need to be in separate test cases (with the same verification).</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691505594,"creation_date":1691505594,"answer_id":76860623,"question_id":76860117,"body_markdown":"This question is complex, but every point where it gets complex it breaks apart into a few options, __all of which__ return back to: This is a bad idea.\r\n\r\n## The nature of `data.retrieveAll()`\r\n\r\nThere are only two options here:\r\n\r\n1. `data.retrieveAll()` is specced to be capable of returning `null`.\r\n2. `data.retrieveAll()` is specced such that it cannot possibly return that.\r\n\r\nIf it&#39;s case #1, then just.. write your test that way. There is a way to make a `data` here (mock out `Data.get(Constants.SOME_TABLE_NAME)` to do this). However, case #1 sounds like a grave mistake:\r\n\r\n###  Sub-consideration: The nature of querying all rows from a table\r\n\r\nThis breaks down into 3 options that _might_ be considered as &#39;.. and then it should return `null`&#39;. And `null` is wrong for all of them:\r\n\r\n1. The table exists and has no records. You shouldn&#39;t return `null` - you should return an empty result set (the first call to `.next()` already returns `false`).\r\n2. The table does not exist and that&#39;s weird. You shouldn&#39;t return `null` - you should throw `SQLException`. It should throw something, and I think it&#39;s wrong to throw anything but SQLException, but it depends on the situation. But, throw something.\r\n3. The table does not exist, and that&#39;s not weird at all - that&#39;s normal design of the db. In which case, there is some semantic notion that &#39;table does not exist&#39; represents, and usually it is to be treated as identically to &#39;the table _does_ exist, but has no rows in it&#39;. Therefore, do not return `null` - return an empty result set just like case #1, because to the caller there should be no difference between &#39;table exists and is empty&#39; and &#39;table does not exist&#39;.\r\n\r\nI don&#39;t know what your app does or how it is supposed to work, but it&#39;s going to boil down to one of those 3, and __none of them__ end in &#39;... and `null` could possibly be returned&#39;.\r\n\r\n## Back to the nature of `retrieveAll()`\r\n\r\nWe have now proven it can only be case 2: It cannot possibly return null. It could throw something, or it could return an empty result set maybe.\r\n\r\n## Logical conclusion\r\n\r\nYou don&#39;t test for the impossible except the code that itself is specced that way: You can write a unit test for `Data.retrieveAll` if you must, to confirm it does not return `null` (which is itself impossible to get covered as, well, it can&#39;t), but you certainly can write tests that an exception is indeed thrown if you attempt to query a non-existent table, and that an empty resultset is indeed returned if you query an empty table.\r\n\r\nOnce you&#39;ve got those tests, you don&#39;t retread that ground in another test. Think about it: If the test for &#39;code that does X using A&#39; (X here is your `getAll()` method, `A` here is `Data.retrieveAll`) also implies you must be testing aspects of A, then where does it end? Program code tends to result, and this is no exaggeration, in the &#39;top level call&#39; (say, somebody that loads `youtube.com`, the front page of youtube) resulting in literally __thousands__ of sub-systems being invoked: The user&#39;s playlists and preferences need to be loaded, their google authentication identity needs to be loaded and confirmed, and so on.\r\n\r\nWould you want to write a unit test for that that is 50,000 lines long, and is mostly a copy/paste of thousands of other unit tests, which are themselves 20,000 lines long because they, too, test the entire stack below them?\r\n\r\nOf course not, that&#39;s emphatically does not scale. If `Data.retrieveAll` is specced to not return null you don&#39;t write code for it (your `else` line must go away entirely, as it triggers on an impossible scenario), and you don&#39;t test for it except in the unit tests for the `retrieveAll` method itself, if at all.\r\n\r\nAnd once you cease writing code to cover the impossible, you no longer get a hole in coverage.\r\n\r\nThe same principle applies to the catch block. This, too, breaks down into a few steps but none of them result in a scenario where you need to accept a hole in code coverage:\r\n\r\n1. The method can throw that exception. Then mock it out or just make an instance that will reliably throw it. For example, if you have a db query processor and you want to test SQLExceptions that fall out, just run the query `&quot;THIS IS NOT A VALID SQL QUERY;&quot;`, or `&quot;SELECT 1/0;&quot;` maybe.\r\n2. The method cannot possibly throw it. Then don&#39;t write a catch for it, and thus don&#39;t test that catch code, as it can&#39;t run. If relevant (and usually it is not), write code that ensures this exception isn&#39;t thrown, on the unit test for that method, not in your unit tests for the `getAll` methods). It shouldn&#39;be listed in its `throws` clause.\r\n3. Annoyingly you are implementing a method because a supertype (interface or superclass) has it, and it throws a checked exception that your implementation would never throw. However, you can simply omit that exception from the throws list of your implementation. However, if the caller (your `getAll` method) treats the object as its supertype, javac will still __demand__ that you catch it (or throw it on), which may result in a catch block that cannot occur. This entire scenario is suspect - that API needs review. Possibly that exception needs to be unchecked (exceptions that end up as being literally impossible under any scenario more than once in a blue moon should be unchecked, or the API needs to be updated to separate those cases out). If you can&#39;t work around the API, we hit workaround territory: You either mock it out, or you use something like lombok&#39;s `@SneakyThrows`, or you fork the library, or you accept that you have a catch block that jacoco will mark off as uncovered. Stick a note on to tell jacoco you don&#39;t care and move on - we&#39;ve left &#39;how do I write nice clean code&#39; territory once we decided we&#39;re using an ugly library that needs workarounds to function properly.\r\n4. The method cannot possibly throw it _today_ but you expect it soon will in some near-future update, and you want the code you are writing that uses that method to already be written to handle that likely-relevant-in-the-near-future case, in which case you really do have to mock it out and test it. Jacoco&#39;s warning is &#39;correct&#39;, in that your test cases are incomplete as long as you don&#39;t test that catch block path.\r\n\r\n## If you must, use `assert`\r\n\r\nIt might feel bad to just leave a case such as &#39;what if `Data.retrieveAll` returns `null`&#39; as completely uncovered. Not just &#39;there is no test for that scenario&#39; but even &#39;the code doesn&#39;t even attempt to deal with that scenario&#39;. However, you do it every day. Do you ever write this:\r\n\r\n```\r\nString v = z.toLowerCase();\r\nassertTrue(v instanceof String);\r\n```\r\n\r\nYou don&#39;t. Or, if you think you do, you&#39;ve forgotten to test _thousands_ of such impossibilities. That&#39;s why we don&#39;t test for these things: The list of &#39;exotic things that are impossible&#39; is limitless, hence, it is obviously impossible to test for it all.\r\n\r\nHowever, perhaps you consider that the impossibility of &quot;`data.retrieveAll()` returns null&quot; is still impossible, but &#39;less impossible&#39; than e.g. your JVM somehow ending up with the object returned by `toLowerCase()` being a non-String. If you must address it, I suggest you add an assert. Not a junit assert, an actual assert:\r\n\r\n```\r\nassert resultSet != null: &quot;Data.retrieveAll() broke spec and returned null&quot;;\r\n```\r\n\r\n## Back to your code snippet\r\n\r\nYour code snippet has a pretty significant bug in it, which your unit test isn&#39;t going to catch and which jacoco isn&#39;t going to fix for you either. It&#39;s fortunate: It&#39;s a nice example of why trying to cover every case just means you end up blowing your own legs off with this stuff. You&#39;ve overcomplicated things and in so doing introduced a bug in code that you&#39;re likely never going to actually trigger. (Is a bug still a bug if it is impossible to trigger? You&#39;re going to have to ask a philosopher, and while you&#39;re at it, ask em if a tree that falls in a forest when no body is around to hear it still makes a sound).\r\n\r\nThe problem you have here is that if an empty (not `null`, but empty) is returned, your code throws a custom exception __with the wrong message__. The problem with &#39;wrong / misleading text&#39; is that you can&#39;t unit test for those. Comments and method names have the same issue. How do you write a unit test that catches that:\r\n\r\n```\r\nint add(int a, int b) {\r\n  return a + b;\r\n}\r\n```\r\n\r\nIs misnamed because it should be called `plus` instead, `add` implies that this code actually changes `a` (which is not possible in java, but, still - wrong name)? You don&#39;t. You have to accept that messages and naming is beyond the scope of unit tests and thus beyond the scope of what jacoco can do for you.\r\n\r\nHere&#39;s the right way to write your snippet:\r\n\r\n```\r\nList&lt;Something&gt; listOfSomething = new ArrayList&lt;&gt;();\r\n    try (Data data = DataUtil.get(Constants.SOME_TABLE_NAME)) {\r\n      for (ResultSetRow : data.retrieveAll()) {\r\n        Something something = new Something();\r\n        something.setX(row.get(&quot;someColumnX&quot;));\r\n        listOfSomething.add(something);\r\n      }\r\n    } catch (ExceptionOne | ExceptionTwo e) {\r\n      throw new SomeCustomException(e);\r\n    }\r\n    return listOfSomething;\r\n}\r\n```\r\n\r\nNote:\r\n\r\n* It is _far_ shorter.\r\n* Its local variables are better scoped (there is no performance gain in declaring a local once and re-using it in that loop. Don&#39;t believe me? Run `javap` on both versions and be enlightened how it makes zero difference in the produced bytecode, thus trivially proving it cannot possibly make a difference)\r\n* It just casually assumes `Data.retrieveAll()` couldn&#39;t possibly return `null`. This is good - you don&#39;t nullcheck `&quot;foo&quot;.toLowerCase()` either - you trust that methods you call do what their spec says they do. Even if you don&#39;t, the effect of this is precisely what you want: A `NullPointerException` would occur if retrieveAll fails its spec and does return null. That&#39;s a good thing: The NPE&#39;s name is correct (the problem is indeed a null pointer being present in a place where the coder presumed it couldn&#39;t happen), its stack trace is correct (it points at precisely where this misunderstanding has occurred, and the faulty code is high in the trace), and its message is correct (on modern VMs, the message is &quot;retrieveAll()&quot; or some such).\r\n* It inlines a simple single-use variable. (`resultSet` is gone as a variable).\r\n* It cleaned up the creation of a wrapper-exception. You don&#39;t need to re-tread the message.\r\n* If you feel the null cause does need _some_ attention, there&#39;s `assert`. However, here you don&#39;t need to do that - the `null` situation is handled properly, no need for an explicit `assert` (it results in an NPE. Which is what you want).\r\n* In contrast, it does not throw if the resultset is empty. However, why should it? &quot;There are no rows&quot; is a valid state surely. If it is not a valid state, then, sure, check it and throw something, and mock `Data.retrieveAll` so that you can create that state. You&#39;re now testing something that is a valid respons from `Data.retrieveAll` (i.e. retrieveAll is specced such that it says it is indeed possible for it to return a resultset that has zero rows in it), but is not a valid response/scenario from the viewpoint of `getAll()`.\r\n* However, that sounds bizarre to me. Nothing in `getAll` indicates to me that it converts &#39;no results&#39; into an exception. That means your method is likely badly named at least. I bet the right answer is to just accept that &#39;no results&#39; is just as valid as &#39;some results&#39;. But if not, either `getAll` needs a rename or you need to ensure the context (the name of the class this is in, or the explanation in e.g. `package-info.java` that explains how to mentally model what this API does) needs to make it really obvious that &#39;no results&#39; is unintended as a scenario and results in exceptions if it comes up.\r\n","title":"Java Unit Testing - Make return value of a method called by enclosing method to Empty","body":"<p>This question is complex, but every point where it gets complex it breaks apart into a few options, <strong>all of which</strong> return back to: This is a bad idea.</p>\n<h2>The nature of <code>data.retrieveAll()</code></h2>\n<p>There are only two options here:</p>\n<ol>\n<li><code>data.retrieveAll()</code> is specced to be capable of returning <code>null</code>.</li>\n<li><code>data.retrieveAll()</code> is specced such that it cannot possibly return that.</li>\n</ol>\n<p>If it's case #1, then just.. write your test that way. There is a way to make a <code>data</code> here (mock out <code>Data.get(Constants.SOME_TABLE_NAME)</code> to do this). However, case #1 sounds like a grave mistake:</p>\n<h3>Sub-consideration: The nature of querying all rows from a table</h3>\n<p>This breaks down into 3 options that <em>might</em> be considered as '.. and then it should return <code>null</code>'. And <code>null</code> is wrong for all of them:</p>\n<ol>\n<li>The table exists and has no records. You shouldn't return <code>null</code> - you should return an empty result set (the first call to <code>.next()</code> already returns <code>false</code>).</li>\n<li>The table does not exist and that's weird. You shouldn't return <code>null</code> - you should throw <code>SQLException</code>. It should throw something, and I think it's wrong to throw anything but SQLException, but it depends on the situation. But, throw something.</li>\n<li>The table does not exist, and that's not weird at all - that's normal design of the db. In which case, there is some semantic notion that 'table does not exist' represents, and usually it is to be treated as identically to 'the table <em>does</em> exist, but has no rows in it'. Therefore, do not return <code>null</code> - return an empty result set just like case #1, because to the caller there should be no difference between 'table exists and is empty' and 'table does not exist'.</li>\n</ol>\n<p>I don't know what your app does or how it is supposed to work, but it's going to boil down to one of those 3, and <strong>none of them</strong> end in '... and <code>null</code> could possibly be returned'.</p>\n<h2>Back to the nature of <code>retrieveAll()</code></h2>\n<p>We have now proven it can only be case 2: It cannot possibly return null. It could throw something, or it could return an empty result set maybe.</p>\n<h2>Logical conclusion</h2>\n<p>You don't test for the impossible except the code that itself is specced that way: You can write a unit test for <code>Data.retrieveAll</code> if you must, to confirm it does not return <code>null</code> (which is itself impossible to get covered as, well, it can't), but you certainly can write tests that an exception is indeed thrown if you attempt to query a non-existent table, and that an empty resultset is indeed returned if you query an empty table.</p>\n<p>Once you've got those tests, you don't retread that ground in another test. Think about it: If the test for 'code that does X using A' (X here is your <code>getAll()</code> method, <code>A</code> here is <code>Data.retrieveAll</code>) also implies you must be testing aspects of A, then where does it end? Program code tends to result, and this is no exaggeration, in the 'top level call' (say, somebody that loads <code>youtube.com</code>, the front page of youtube) resulting in literally <strong>thousands</strong> of sub-systems being invoked: The user's playlists and preferences need to be loaded, their google authentication identity needs to be loaded and confirmed, and so on.</p>\n<p>Would you want to write a unit test for that that is 50,000 lines long, and is mostly a copy/paste of thousands of other unit tests, which are themselves 20,000 lines long because they, too, test the entire stack below them?</p>\n<p>Of course not, that's emphatically does not scale. If <code>Data.retrieveAll</code> is specced to not return null you don't write code for it (your <code>else</code> line must go away entirely, as it triggers on an impossible scenario), and you don't test for it except in the unit tests for the <code>retrieveAll</code> method itself, if at all.</p>\n<p>And once you cease writing code to cover the impossible, you no longer get a hole in coverage.</p>\n<p>The same principle applies to the catch block. This, too, breaks down into a few steps but none of them result in a scenario where you need to accept a hole in code coverage:</p>\n<ol>\n<li>The method can throw that exception. Then mock it out or just make an instance that will reliably throw it. For example, if you have a db query processor and you want to test SQLExceptions that fall out, just run the query <code>&quot;THIS IS NOT A VALID SQL QUERY;&quot;</code>, or <code>&quot;SELECT 1/0;&quot;</code> maybe.</li>\n<li>The method cannot possibly throw it. Then don't write a catch for it, and thus don't test that catch code, as it can't run. If relevant (and usually it is not), write code that ensures this exception isn't thrown, on the unit test for that method, not in your unit tests for the <code>getAll</code> methods). It shouldn'be listed in its <code>throws</code> clause.</li>\n<li>Annoyingly you are implementing a method because a supertype (interface or superclass) has it, and it throws a checked exception that your implementation would never throw. However, you can simply omit that exception from the throws list of your implementation. However, if the caller (your <code>getAll</code> method) treats the object as its supertype, javac will still <strong>demand</strong> that you catch it (or throw it on), which may result in a catch block that cannot occur. This entire scenario is suspect - that API needs review. Possibly that exception needs to be unchecked (exceptions that end up as being literally impossible under any scenario more than once in a blue moon should be unchecked, or the API needs to be updated to separate those cases out). If you can't work around the API, we hit workaround territory: You either mock it out, or you use something like lombok's <code>@SneakyThrows</code>, or you fork the library, or you accept that you have a catch block that jacoco will mark off as uncovered. Stick a note on to tell jacoco you don't care and move on - we've left 'how do I write nice clean code' territory once we decided we're using an ugly library that needs workarounds to function properly.</li>\n<li>The method cannot possibly throw it <em>today</em> but you expect it soon will in some near-future update, and you want the code you are writing that uses that method to already be written to handle that likely-relevant-in-the-near-future case, in which case you really do have to mock it out and test it. Jacoco's warning is 'correct', in that your test cases are incomplete as long as you don't test that catch block path.</li>\n</ol>\n<h2>If you must, use <code>assert</code></h2>\n<p>It might feel bad to just leave a case such as 'what if <code>Data.retrieveAll</code> returns <code>null</code>' as completely uncovered. Not just 'there is no test for that scenario' but even 'the code doesn't even attempt to deal with that scenario'. However, you do it every day. Do you ever write this:</p>\n<pre><code>String v = z.toLowerCase();\nassertTrue(v instanceof String);\n</code></pre>\n<p>You don't. Or, if you think you do, you've forgotten to test <em>thousands</em> of such impossibilities. That's why we don't test for these things: The list of 'exotic things that are impossible' is limitless, hence, it is obviously impossible to test for it all.</p>\n<p>However, perhaps you consider that the impossibility of &quot;<code>data.retrieveAll()</code> returns null&quot; is still impossible, but 'less impossible' than e.g. your JVM somehow ending up with the object returned by <code>toLowerCase()</code> being a non-String. If you must address it, I suggest you add an assert. Not a junit assert, an actual assert:</p>\n<pre><code>assert resultSet != null: &quot;Data.retrieveAll() broke spec and returned null&quot;;\n</code></pre>\n<h2>Back to your code snippet</h2>\n<p>Your code snippet has a pretty significant bug in it, which your unit test isn't going to catch and which jacoco isn't going to fix for you either. It's fortunate: It's a nice example of why trying to cover every case just means you end up blowing your own legs off with this stuff. You've overcomplicated things and in so doing introduced a bug in code that you're likely never going to actually trigger. (Is a bug still a bug if it is impossible to trigger? You're going to have to ask a philosopher, and while you're at it, ask em if a tree that falls in a forest when no body is around to hear it still makes a sound).</p>\n<p>The problem you have here is that if an empty (not <code>null</code>, but empty) is returned, your code throws a custom exception <strong>with the wrong message</strong>. The problem with 'wrong / misleading text' is that you can't unit test for those. Comments and method names have the same issue. How do you write a unit test that catches that:</p>\n<pre><code>int add(int a, int b) {\n  return a + b;\n}\n</code></pre>\n<p>Is misnamed because it should be called <code>plus</code> instead, <code>add</code> implies that this code actually changes <code>a</code> (which is not possible in java, but, still - wrong name)? You don't. You have to accept that messages and naming is beyond the scope of unit tests and thus beyond the scope of what jacoco can do for you.</p>\n<p>Here's the right way to write your snippet:</p>\n<pre><code>List&lt;Something&gt; listOfSomething = new ArrayList&lt;&gt;();\n    try (Data data = DataUtil.get(Constants.SOME_TABLE_NAME)) {\n      for (ResultSetRow : data.retrieveAll()) {\n        Something something = new Something();\n        something.setX(row.get(&quot;someColumnX&quot;));\n        listOfSomething.add(something);\n      }\n    } catch (ExceptionOne | ExceptionTwo e) {\n      throw new SomeCustomException(e);\n    }\n    return listOfSomething;\n}\n</code></pre>\n<p>Note:</p>\n<ul>\n<li>It is <em>far</em> shorter.</li>\n<li>Its local variables are better scoped (there is no performance gain in declaring a local once and re-using it in that loop. Don't believe me? Run <code>javap</code> on both versions and be enlightened how it makes zero difference in the produced bytecode, thus trivially proving it cannot possibly make a difference)</li>\n<li>It just casually assumes <code>Data.retrieveAll()</code> couldn't possibly return <code>null</code>. This is good - you don't nullcheck <code>&quot;foo&quot;.toLowerCase()</code> either - you trust that methods you call do what their spec says they do. Even if you don't, the effect of this is precisely what you want: A <code>NullPointerException</code> would occur if retrieveAll fails its spec and does return null. That's a good thing: The NPE's name is correct (the problem is indeed a null pointer being present in a place where the coder presumed it couldn't happen), its stack trace is correct (it points at precisely where this misunderstanding has occurred, and the faulty code is high in the trace), and its message is correct (on modern VMs, the message is &quot;retrieveAll()&quot; or some such).</li>\n<li>It inlines a simple single-use variable. (<code>resultSet</code> is gone as a variable).</li>\n<li>It cleaned up the creation of a wrapper-exception. You don't need to re-tread the message.</li>\n<li>If you feel the null cause does need <em>some</em> attention, there's <code>assert</code>. However, here you don't need to do that - the <code>null</code> situation is handled properly, no need for an explicit <code>assert</code> (it results in an NPE. Which is what you want).</li>\n<li>In contrast, it does not throw if the resultset is empty. However, why should it? &quot;There are no rows&quot; is a valid state surely. If it is not a valid state, then, sure, check it and throw something, and mock <code>Data.retrieveAll</code> so that you can create that state. You're now testing something that is a valid respons from <code>Data.retrieveAll</code> (i.e. retrieveAll is specced such that it says it is indeed possible for it to return a resultset that has zero rows in it), but is not a valid response/scenario from the viewpoint of <code>getAll()</code>.</li>\n<li>However, that sounds bizarre to me. Nothing in <code>getAll</code> indicates to me that it converts 'no results' into an exception. That means your method is likely badly named at least. I bet the right answer is to just accept that 'no results' is just as valid as 'some results'. But if not, either <code>getAll</code> needs a rename or you need to ensure the context (the name of the class this is in, or the explanation in e.g. <code>package-info.java</code> that explains how to mentally model what this API does) needs to make it really obvious that 'no results' is unintended as a scenario and results in exceptions if it comes up.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1407336,"reputation":6523,"user_id":1348834,"display_name":"Joel Costigliola"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691527648,"creation_date":1691527648,"answer_id":76863111,"question_id":76860117,"body_markdown":"Just commenting on the assertion, it is preferable to use \r\n\r\n```java\r\nassertThat(someServiceMock.getAll()).isEmpty();\r\n```\r\nNot only it reads better but the error message will be explicit too (it would complain you getAll list is not empty) instead the non explicit `expected true but got false`","title":"Java Unit Testing - Make return value of a method called by enclosing method to Empty","body":"<p>Just commenting on the assertion, it is preferable to use</p>\n<pre class=\"lang-java prettyprint-override\"><code>assertThat(someServiceMock.getAll()).isEmpty();\n</code></pre>\n<p>Not only it reads better but the error message will be explicit too (it would complain you getAll list is not empty) instead the non explicit <code>expected true but got false</code></p>\n"}],"owner":{"account_id":4700927,"reputation":1844,"user_id":3804495,"accept_rate":46,"display_name":"heisenberg"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691527648,"creation_date":1691501945,"question_id":76860117,"body_markdown":"I have this method and implementation is done. However, when I look at `Jacoco` report, it says that the `else {}` and `catch()` part is not being covered by Unit Test Code Coverage.\r\n\r\n    public class SomeService {\r\n    \t\r\n    \tpublic List&lt;Something&gt; getAll() throws SomeCustomException {\r\n    \t\tList&lt;Something&gt; listOfSomething = new ArrayList&lt;&gt;();\r\n    \t\ttry (Data data = DataUtil.get(Constants.SOME_TABLE_NAME)){\r\n    \t\t\tResultSet resultSet = data.retrieveAll();\r\n    \t\t\tif(resultSet != null &amp;&amp; !resultSet.isEmpty()){\r\n    \t\t\t\tSomething something;\r\n    \t\t\t\tfor (ResultSetRow row : resultSet){\r\n    \t\t\t\t\tsomething = new Something();\r\n    \t\t\t\t\tsomething.setX(row.get(&quot;someColumnX&quot;));\r\n    \t\t\t\t\t//...\r\n    \t\t\t\t\tlistOfSomething.add(something);\r\n    \t\t\t\t}\r\n    \t\t\t}else{\r\n    \t\t\t\tthrow new SomeCustomException(&quot;ResultSet is null&quot;);\r\n    \t\t\t}\r\n    \t\t}catch (ExceptionOne | ExceptionTwo e){\r\n    \t\t\tthrow new SomeCustomException(e.getMessage(), e);\r\n    \t\t}\r\n    \t\treturn listOfSomething;\r\n    \t}\r\n    \t\r\n    }\r\n    \r\nSo I tried to create a Unit Test method to attempt to cover the `else(){}` part. However, I think what I&#39;m doing is not correct or has no effect to the `someServiceMock`\r\n\r\nBasically, I want the `resultSet` to be empty so that it goes to the `else {}` part and cover the test on `else {}` branch. Problem is, I&#39;m not sure how to set it because it&#39;s inside the `getAll()` method\r\n\r\n    @Test\r\n    void getAllReturnsEmpty() {\r\n    \tSomeService someServiceMock = mock(SomeService.class);\r\n    \tResultSet resultSetMock = mock(ResultSet.class);\r\n    \twhen(!resultSetMock.isEmpty).thenReturn(false);\r\n    \t\r\n    \tassertThat(someServiceMock.getAll().isEmpty()).isTrue();\r\n    }\r\n\r\nIs there a way to achieve what I want? I want to hava 99% Java code coverage\r\n\r\nThank you","title":"Java Unit Testing - Make return value of a method called by enclosing method to Empty","body":"<p>I have this method and implementation is done. However, when I look at <code>Jacoco</code> report, it says that the <code>else {}</code> and <code>catch()</code> part is not being covered by Unit Test Code Coverage.</p>\n<pre><code>public class SomeService {\n    \n    public List&lt;Something&gt; getAll() throws SomeCustomException {\n        List&lt;Something&gt; listOfSomething = new ArrayList&lt;&gt;();\n        try (Data data = DataUtil.get(Constants.SOME_TABLE_NAME)){\n            ResultSet resultSet = data.retrieveAll();\n            if(resultSet != null &amp;&amp; !resultSet.isEmpty()){\n                Something something;\n                for (ResultSetRow row : resultSet){\n                    something = new Something();\n                    something.setX(row.get(&quot;someColumnX&quot;));\n                    //...\n                    listOfSomething.add(something);\n                }\n            }else{\n                throw new SomeCustomException(&quot;ResultSet is null&quot;);\n            }\n        }catch (ExceptionOne | ExceptionTwo e){\n            throw new SomeCustomException(e.getMessage(), e);\n        }\n        return listOfSomething;\n    }\n    \n}\n</code></pre>\n<p>So I tried to create a Unit Test method to attempt to cover the <code>else(){}</code> part. However, I think what I'm doing is not correct or has no effect to the <code>someServiceMock</code></p>\n<p>Basically, I want the <code>resultSet</code> to be empty so that it goes to the <code>else {}</code> part and cover the test on <code>else {}</code> branch. Problem is, I'm not sure how to set it because it's inside the <code>getAll()</code> method</p>\n<pre><code>@Test\nvoid getAllReturnsEmpty() {\n    SomeService someServiceMock = mock(SomeService.class);\n    ResultSet resultSetMock = mock(ResultSet.class);\n    when(!resultSetMock.isEmpty).thenReturn(false);\n    \n    assertThat(someServiceMock.getAll().isEmpty()).isTrue();\n}\n</code></pre>\n<p>Is there a way to achieve what I want? I want to hava 99% Java code coverage</p>\n<p>Thank you</p>\n"},{"tags":["java","apache-flink","flink-streaming"],"answers":[{"tags":[],"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691527147,"creation_date":1691526600,"answer_id":76863015,"question_id":76861977,"body_markdown":"Yes, you need checkpointing. Without it, the state will be lost in the event of a failure.\r\n\r\nHowever, the `rocksDBStateDir` and `checkpointsDir` should be in different file systems. The `rocksDBStateDir` should be in the fastest available local file system. This is where the working state is kept, and it doesn&#39;t matter if this disk is lost when failures occur, since the state will be restored from the latest checkpoint. On the other hand, `checkpointsDir` should be in a distributed file system, to ensure that failure recovery is always possible.","title":"Does statebackend need checkpoint?","body":"<p>Yes, you need checkpointing. Without it, the state will be lost in the event of a failure.</p>\n<p>However, the <code>rocksDBStateDir</code> and <code>checkpointsDir</code> should be in different file systems. The <code>rocksDBStateDir</code> should be in the fastest available local file system. This is where the working state is kept, and it doesn't matter if this disk is lost when failures occur, since the state will be restored from the latest checkpoint. On the other hand, <code>checkpointsDir</code> should be in a distributed file system, to ensure that failure recovery is always possible.</p>\n"}],"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76863015,"answer_count":1,"score":0,"last_activity_date":1691527147,"creation_date":1691516186,"question_id":76861977,"body_markdown":"Below is the code from [here](https://blog.rockthejvm.com/flink-sql-introduction/) that maintains the checkpoint:\r\n\r\n    class EnrichmentStream {\r\n        private val checkpointsDir  = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/checkpoints/&quot;\r\n        private val rocksDBStateDir = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/state/rocksdb/&quot;\r\n    \r\n        companion object {\r\n            @JvmStatic\r\n            fun main(args: Array&lt;String&gt;) {\r\n                EnrichmentStream().runStream()\r\n            }\r\n        }\r\n    \r\n        fun runStream() {\r\n            val environment = StreamExecutionEnvironment\r\n                .createLocalEnvironmentWithWebUI(Configuration())\r\n    \r\n            environment.parallelism = 3\r\n    \r\n            // Checkpoint Configurations\r\n            environment.enableCheckpointing(5000)\r\n            environment.checkpointConfig.minPauseBetweenCheckpoints = 100\r\n            environment.checkpointConfig.setCheckpointStorage(checkpointsDir)\r\n    \r\n            val stateBackend = EmbeddedRocksDBStateBackend()\r\n            stateBackend.setDbStoragePath(rocksDBStateDir)\r\n            environment.stateBackend = stateBackend\r\n    \r\n            environment.checkpointConfig.externalizedCheckpointCleanup =\r\n                CheckpointConfig.ExternalizedCheckpointCleanup.RETAIN_ON_CANCELLATION\r\n    \r\n            // Configure Restart Strategy\r\n            environment.restartStrategy = RestartStrategies.fixedDelayRestart(5, Time.seconds(5))\r\n    \r\n            val tableEnvironment = StreamTableEnvironment.create(environment)\r\n    \r\n            // Run some SQL queries to check the existing Catalogs, Databases and Tables\r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW CATALOGS&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW DATABASES&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW TABLES&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(Queries.CREATE_SENSORS_TABLE)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(Queries.CREATE_READINGS_TABLE)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW TABLES&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(Queries.JOIN_SENSOR_READINGS_WITH_INFO_QUERY)\r\n                .print()\r\n        }\r\n    }\r\n\r\n-----\r\n\r\n\r\nDoes flink application with statebackend need checkpoint?\r\n","title":"Does statebackend need checkpoint?","body":"<p>Below is the code from <a href=\"https://blog.rockthejvm.com/flink-sql-introduction/\" rel=\"nofollow noreferrer\">here</a> that maintains the checkpoint:</p>\n<pre><code>class EnrichmentStream {\n    private val checkpointsDir  = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/checkpoints/&quot;\n    private val rocksDBStateDir = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/state/rocksdb/&quot;\n\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            EnrichmentStream().runStream()\n        }\n    }\n\n    fun runStream() {\n        val environment = StreamExecutionEnvironment\n            .createLocalEnvironmentWithWebUI(Configuration())\n\n        environment.parallelism = 3\n\n        // Checkpoint Configurations\n        environment.enableCheckpointing(5000)\n        environment.checkpointConfig.minPauseBetweenCheckpoints = 100\n        environment.checkpointConfig.setCheckpointStorage(checkpointsDir)\n\n        val stateBackend = EmbeddedRocksDBStateBackend()\n        stateBackend.setDbStoragePath(rocksDBStateDir)\n        environment.stateBackend = stateBackend\n\n        environment.checkpointConfig.externalizedCheckpointCleanup =\n            CheckpointConfig.ExternalizedCheckpointCleanup.RETAIN_ON_CANCELLATION\n\n        // Configure Restart Strategy\n        environment.restartStrategy = RestartStrategies.fixedDelayRestart(5, Time.seconds(5))\n\n        val tableEnvironment = StreamTableEnvironment.create(environment)\n\n        // Run some SQL queries to check the existing Catalogs, Databases and Tables\n        tableEnvironment\n            .executeSql(&quot;SHOW CATALOGS&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(&quot;SHOW DATABASES&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(&quot;SHOW TABLES&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(Queries.CREATE_SENSORS_TABLE)\n            .print()\n\n        tableEnvironment\n            .executeSql(Queries.CREATE_READINGS_TABLE)\n            .print()\n\n        tableEnvironment\n            .executeSql(&quot;SHOW TABLES&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(Queries.JOIN_SENSOR_READINGS_WITH_INFO_QUERY)\n            .print()\n    }\n}\n</code></pre>\n<hr />\n<p>Does flink application with statebackend need checkpoint?</p>\n"},{"tags":["java","spring-boot","spring-security","oauth-2.0","openid-connect"],"answers":[{"tags":[],"owner":{"account_id":18193980,"reputation":1,"user_id":17790549,"display_name":"Waylon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691526359,"creation_date":1691526272,"answer_id":76862975,"question_id":75911289,"body_markdown":"```\r\n@Configuration(proxyBeanMethods = false)\r\npublic class MyAuthorizationServerConfig {\r\n    @Bean\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public SecurityFilterChain authorizationServerSecurityFilterChain(\r\n            HttpSecurity http, RegisteredClientRepository registeredClientRepository,\r\n            AuthorizationServerSettings authorizationServerSettings) throws Exception {\r\n\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n\r\n        http\r\n                .exceptionHandling((exceptions) -&gt; exceptions\r\n                        .defaultAuthenticationEntryPointFor(\r\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\r\n                                new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\r\n                        )\r\n                )\r\n                .oauth2ResourceServer(oauth2ResourceServer -&gt;\r\n                        oauth2ResourceServer.jwt(Customizer.withDefaults()));\r\n\r\n\r\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n                .oidc(Customizer.withDefaults());\r\n\r\n        return http.build();\r\n    }\r\n}\r\n```","title":"OpenID Connect authentication requests restricted","body":"<pre><code>@Configuration(proxyBeanMethods = false)\npublic class MyAuthorizationServerConfig {\n    @Bean\n    @Order(Ordered.HIGHEST_PRECEDENCE)\n    public SecurityFilterChain authorizationServerSecurityFilterChain(\n            HttpSecurity http, RegisteredClientRepository registeredClientRepository,\n            AuthorizationServerSettings authorizationServerSettings) throws Exception {\n\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n\n        http\n                .exceptionHandling((exceptions) -&gt; exceptions\n                        .defaultAuthenticationEntryPointFor(\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\n                                new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\n                        )\n                )\n                .oauth2ResourceServer(oauth2ResourceServer -&gt;\n                        oauth2ResourceServer.jwt(Customizer.withDefaults()));\n\n\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n                .oidc(Customizer.withDefaults());\n\n        return http.build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11107771,"reputation":1,"user_id":8154489,"display_name":"Tony Cruelkid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":548,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691526359,"creation_date":1680429362,"question_id":75911289,"body_markdown":"I&#39;m facing the problem with configuring OAuth2 login for my application https://github.com/Cruelkid/guitar-cloud/tree/develop\r\n\r\n```\r\n2023-04-02T11:52:28.856+03:00 DEBUG 3866 --- [nio-9000-exec-2] org.apache.tomcat.util.http.Parameters   : Start processing with input [response_type=code&amp;client_id=guitar-cloud-client&amp;scope=openid&amp;state=P3j3mwpUvm1UR_tVYjWelCDGauVZxf4ZOOcUyFVSc00%3D&amp;redirect_uri=http://127.0.0.1:8080/login/oauth2/code/guitar-cloud-client-oidc&amp;nonce=D-qBrlre2P-il99B1HW8ejFWfMR1fQHB2QG7WRHydNc]\r\n2023-04-02T11:52:28.857+03:00 DEBUG 3866 --- [nio-9000-exec-2] .s.a.DefaultAuthenticationEventPublisher : No event was found for the exception org.springframework.security.oauth2.server.authorization.authentication.OAuth2AuthorizationCodeRequestAuthenticationException\r\n2023-04-02T11:52:28.857+03:00 DEBUG 3866 --- [nio-9000-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to `http://127.0.0.1:8080/login/oauth2/code/guitar-cloud-client-oidc?error=invalid_scope&amp;error_description=OpenID%20Connect%201.0%20authentication%20requests%20are%20restricted.&amp;error_uri=https%3A%2F%2Fdatatracker.ietf.org%2Fdoc%2Fhtml%2Frfc6749%23section-4.1.2.1&amp;state=P3j3mwpUvm1UR_tVYjWelCDGauVZxf4ZOOcUyFVSc00%3D`\r\n```\r\n\r\n\r\nBefore ending up with such code I was facing similar issue but with an auth server, but i&#39;ve figured out that this was related to disabled by default OIDC 1.0, but that error was fixed with adding this piece of code:\r\n\r\n```\r\nhttp.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n                .oidc(Customizer.withDefaults());\r\n```\r\n\r\nUnfortunatelly, for the api client i haven&#39;t found a way to do something similar","title":"OpenID Connect authentication requests restricted","body":"<p>I'm facing the problem with configuring OAuth2 login for my application <a href=\"https://github.com/Cruelkid/guitar-cloud/tree/develop\" rel=\"nofollow noreferrer\">https://github.com/Cruelkid/guitar-cloud/tree/develop</a></p>\n<pre><code>2023-04-02T11:52:28.856+03:00 DEBUG 3866 --- [nio-9000-exec-2] org.apache.tomcat.util.http.Parameters   : Start processing with input [response_type=code&amp;client_id=guitar-cloud-client&amp;scope=openid&amp;state=P3j3mwpUvm1UR_tVYjWelCDGauVZxf4ZOOcUyFVSc00%3D&amp;redirect_uri=http://127.0.0.1:8080/login/oauth2/code/guitar-cloud-client-oidc&amp;nonce=D-qBrlre2P-il99B1HW8ejFWfMR1fQHB2QG7WRHydNc]\n2023-04-02T11:52:28.857+03:00 DEBUG 3866 --- [nio-9000-exec-2] .s.a.DefaultAuthenticationEventPublisher : No event was found for the exception org.springframework.security.oauth2.server.authorization.authentication.OAuth2AuthorizationCodeRequestAuthenticationException\n2023-04-02T11:52:28.857+03:00 DEBUG 3866 --- [nio-9000-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to `http://127.0.0.1:8080/login/oauth2/code/guitar-cloud-client-oidc?error=invalid_scope&amp;error_description=OpenID%20Connect%201.0%20authentication%20requests%20are%20restricted.&amp;error_uri=https%3A%2F%2Fdatatracker.ietf.org%2Fdoc%2Fhtml%2Frfc6749%23section-4.1.2.1&amp;state=P3j3mwpUvm1UR_tVYjWelCDGauVZxf4ZOOcUyFVSc00%3D`\n</code></pre>\n<p>Before ending up with such code I was facing similar issue but with an auth server, but i've figured out that this was related to disabled by default OIDC 1.0, but that error was fixed with adding this piece of code:</p>\n<pre><code>http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n                .oidc(Customizer.withDefaults());\n</code></pre>\n<p>Unfortunatelly, for the api client i haven't found a way to do something similar</p>\n"},{"tags":["java","spring-boot","open-telemetry"],"comments":[{"owner":{"account_id":111923,"reputation":649,"user_id":295416,"display_name":"trask"},"score":0,"creation_date":1691595544,"post_id":76862924,"comment_id":135513693,"body_markdown":"try `mvn dependency:tree` to confirm the expected dependency versions. also you could try Intellij &gt; Maven &gt; Reload project.","body":"try <code>mvn dependency:tree</code> to confirm the expected dependency versions. also you could try Intellij &gt; Maven &gt; Reload project."}],"owner":{"account_id":1889217,"reputation":2687,"user_id":1707750,"accept_rate":100,"display_name":"Romaan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691525580,"creation_date":1691525580,"question_id":76862924,"body_markdown":"Below is my `pom.xml` \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.mypackage&lt;/groupId&gt;\r\n  &lt;artifactId&gt;myid&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0.0&lt;/version&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;camunda.version&gt;7.8.0&lt;/camunda.version&gt;\r\n    &lt;!-- Build properties --&gt;\r\n    &lt;maven.version&gt;3.0.0&lt;/maven.version&gt;\r\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n          &lt;artifactId&gt;opentelemetry-bom&lt;/artifactId&gt;\r\n          &lt;version&gt;1.28.0&lt;/version&gt;\r\n          &lt;type&gt;pom&lt;/type&gt;\r\n          &lt;scope&gt;import&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n  &lt;/dependencyManagement&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-webapp&lt;/artifactId&gt;\r\n      &lt;version&gt;7.14.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-rest&lt;/artifactId&gt;\r\n      &lt;version&gt;7.14.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-spin-core&lt;/artifactId&gt;\r\n      &lt;version&gt;1.6.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-spin-dataformat-json-jackson&lt;/artifactId&gt;\r\n      &lt;version&gt;1.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-spin-dataformat-all&lt;/artifactId&gt;\r\n      &lt;version&gt;1.6.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.camunda.commons/camunda-commons-logging --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.commons&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-commons-logging&lt;/artifactId&gt;\r\n      &lt;version&gt;1.9.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.everit.json&lt;/groupId&gt;\r\n      &lt;artifactId&gt;org.everit.json.schema&lt;/artifactId&gt;\r\n      &lt;version&gt;1.3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n      &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- database --&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/postgresql/postgresql --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- testing --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.bpm.extension&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-bpm-assert&lt;/artifactId&gt;\r\n      &lt;version&gt;1.2&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.camunda.bpm.extension.springboot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.0&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;opentelemetry-api&lt;/artifactId&gt;\r\n      &lt;version&gt;1.28.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;opentelemetry-sdk&lt;/artifactId&gt;\r\n      &lt;version&gt;1.28.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;opentelemetry-exporter-otlp&lt;/artifactId&gt;\r\n      &lt;version&gt;1.28.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n      &lt;artifactId&gt;opentelemetry-exporter-otlp-common&lt;/artifactId&gt;\r\n      &lt;version&gt;1.28.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;layout&gt;ZIP&lt;/layout&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;repackage&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;17&lt;/source&gt;\r\n          &lt;target&gt;17&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd I have `OtlpExporterConfig.java` like below:\r\n\r\n```\r\npackage com.mypackage.configurations;\r\n\r\nimport io.opentelemetry.exporter.otlp.trace.OtlpGrpcSpanExporter;\r\nimport io.opentelemetry.sdk.trace.export.SpanExporter;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class OtlpExporterConfig {\r\n\r\n    @Value(&quot;${opentelemetry.trace.exporter.otlp.endpoint}&quot;)\r\n    private String otlpEndpoint;\r\n\r\n    @Bean\r\n    public SpanExporter otlpSpanExporter() {\r\n        return OtlpGrpcSpanExporter.builder()\r\n                .setEndpoint(otlpEndpoint)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nBut OtlpGrpcSpanExporter is not found. In my intellij IDE, I can also spot exporter is not available under io.opentelemetry. Can someone please spot the problem , as to, why import is not working","title":"Opentelemetry OtlpGrpcSpanExporter class found","body":"<p>Below is my <code>pom.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.mypackage&lt;/groupId&gt;\n  &lt;artifactId&gt;myid&lt;/artifactId&gt;\n  &lt;version&gt;1.0.0&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;properties&gt;\n    &lt;camunda.version&gt;7.8.0&lt;/camunda.version&gt;\n    &lt;!-- Build properties --&gt;\n    &lt;maven.version&gt;3.0.0&lt;/maven.version&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n        &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n      &lt;/dependency&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n          &lt;artifactId&gt;opentelemetry-bom&lt;/artifactId&gt;\n          &lt;version&gt;1.28.0&lt;/version&gt;\n          &lt;type&gt;pom&lt;/type&gt;\n          &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-webapp&lt;/artifactId&gt;\n      &lt;version&gt;7.14.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.bpm.springboot&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-rest&lt;/artifactId&gt;\n      &lt;version&gt;7.14.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-spin-core&lt;/artifactId&gt;\n      &lt;version&gt;1.6.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-spin-dataformat-json-jackson&lt;/artifactId&gt;\n      &lt;version&gt;1.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.spin&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-spin-dataformat-all&lt;/artifactId&gt;\n      &lt;version&gt;1.6.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.camunda.commons/camunda-commons-logging --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.commons&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-commons-logging&lt;/artifactId&gt;\n      &lt;version&gt;1.9.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.everit.json&lt;/groupId&gt;\n      &lt;artifactId&gt;org.everit.json.schema&lt;/artifactId&gt;\n      &lt;version&gt;1.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- database --&gt;\n    &lt;!-- https://mvnrepository.com/artifact/postgresql/postgresql --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n      &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- testing --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.bpm.extension&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-bpm-assert&lt;/artifactId&gt;\n      &lt;version&gt;1.2&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.camunda.bpm.extension.springboot&lt;/groupId&gt;\n      &lt;artifactId&gt;camunda-bpm-spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;version&gt;2.2.0&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n      &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n      &lt;artifactId&gt;opentelemetry-api&lt;/artifactId&gt;\n      &lt;version&gt;1.28.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n      &lt;artifactId&gt;opentelemetry-sdk&lt;/artifactId&gt;\n      &lt;version&gt;1.28.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n      &lt;artifactId&gt;opentelemetry-exporter-otlp&lt;/artifactId&gt;\n      &lt;version&gt;1.28.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n      &lt;artifactId&gt;opentelemetry-exporter-otlp-common&lt;/artifactId&gt;\n      &lt;version&gt;1.28.0&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;layout&gt;ZIP&lt;/layout&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;repackage&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;17&lt;/source&gt;\n          &lt;target&gt;17&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>And I have <code>OtlpExporterConfig.java</code> like below:</p>\n<pre><code>package com.mypackage.configurations;\n\nimport io.opentelemetry.exporter.otlp.trace.OtlpGrpcSpanExporter;\nimport io.opentelemetry.sdk.trace.export.SpanExporter;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class OtlpExporterConfig {\n\n    @Value(&quot;${opentelemetry.trace.exporter.otlp.endpoint}&quot;)\n    private String otlpEndpoint;\n\n    @Bean\n    public SpanExporter otlpSpanExporter() {\n        return OtlpGrpcSpanExporter.builder()\n                .setEndpoint(otlpEndpoint)\n                .build();\n    }\n}\n</code></pre>\n<p>But OtlpGrpcSpanExporter is not found. In my intellij IDE, I can also spot exporter is not available under io.opentelemetry. Can someone please spot the problem , as to, why import is not working</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","aws-java-sdk-2.x","aws-java-sdk-dynamodb"],"comments":[{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1691525562,"post_id":76862656,"comment_id":135502906,"body_markdown":"You cannot use JSON in the manner you are trying to do. If you want to use SQL like syntax, you can use PartiQL. Here is a complete example:\n\nhttps://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javav2/example_code/dynamodb/src/main/java/com/example/dynamodb/ScenarioPartiQ.java","body":"You cannot use JSON in the manner you are trying to do. If you want to use SQL like syntax, you can use PartiQL. Here is a complete example:  <a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javav2/example_code/dynamodb/src/main/java/com/example/dynamodb/ScenarioPartiQ.java\" rel=\"nofollow noreferrer\">github.com/awsdocs/aws-doc-sdk-examples/blob/main/javav2/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":10749774,"reputation":14475,"user_id":7909676,"display_name":"Leeroy Hannigan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691523979,"creation_date":1691523979,"answer_id":76862783,"question_id":76862656,"body_markdown":"What you are trying to achieve is not possible for a `Query` using `KeyConditionExpression`. \r\n\r\nA `KeyConditionExpression` requires an equals `=` comparative on a single partition key only, multiple keys using `IN` or `OR` or `AND` are now allowed.\r\n\r\n&gt; Use the KeyConditionExpression parameter to provide a specific value for the partition key. The Query operation will return all of the items from the table or index with that partition key value. You can optionally narrow the scope of the Query operation by specifying a sort key value and a comparison operator in KeyConditionExpression. \r\n\r\n[ref](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html)\r\n\r\n\r\n---\r\n\r\nThe only API that allows syntax similar to what you are creating is PartiQL `ExecuteStatement` where you can pass in up to 50 partition keys as part of an `IN` clause:\r\n\r\n```\r\nSELECT * FROM mytable WHERE PK IN [1,2...50]\r\n```\r\n\r\nhttps://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ExecuteStatement.html","title":"DynamoDB Java SDK - QueryRequest with IN clause","body":"<p>What you are trying to achieve is not possible for a <code>Query</code> using <code>KeyConditionExpression</code>.</p>\n<p>A <code>KeyConditionExpression</code> requires an equals <code>=</code> comparative on a single partition key only, multiple keys using <code>IN</code> or <code>OR</code> or <code>AND</code> are now allowed.</p>\n<blockquote>\n<p>Use the KeyConditionExpression parameter to provide a specific value for the partition key. The Query operation will return all of the items from the table or index with that partition key value. You can optionally narrow the scope of the Query operation by specifying a sort key value and a comparison operator in KeyConditionExpression.</p>\n</blockquote>\n<p><a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html\" rel=\"nofollow noreferrer\">ref</a></p>\n<hr />\n<p>The only API that allows syntax similar to what you are creating is PartiQL <code>ExecuteStatement</code> where you can pass in up to 50 partition keys as part of an <code>IN</code> clause:</p>\n<pre><code>SELECT * FROM mytable WHERE PK IN [1,2...50]\n</code></pre>\n<p><a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ExecuteStatement.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ExecuteStatement.html</a></p>\n"}],"owner":{"account_id":28949040,"reputation":53,"user_id":22174061,"display_name":"ash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691525498,"creation_date":1691522722,"question_id":76862656,"body_markdown":"The Javadoc of `software.amazon.awssdk.services.dynamodb.model.QueryRequest.expressionAttributeValues()` says a following query can be done: \r\n\r\n`ProductStatus IN (:avail, :back, :disc)` \r\n\r\nwhere the values are passed in in &quot;ExpressionAttributeValues&quot; as follows:\r\n\r\n`{ &quot;:avail&quot;:{&quot;S&quot;:&quot;Available&quot;}, &quot;:back&quot;:{&quot;S&quot;:&quot;Backordered&quot;}, &quot;:disc&quot;:{&quot;S&quot;:&quot;Discontinued&quot;} } `\r\n\r\n\r\nI&#39;m now trying to figure how \r\n\r\n`QueryRequest.expressionAttributeValues` is the following `Map`: \r\n\r\n`Map&lt;String, AttributeValue&gt; expressionAttributeValues)`\r\n\r\nthere doesn&#39;t seem to be any other way to pass expression values to the expression defined in `QueryRequest.keyConditionExpression()`\r\n\r\nI specifically looked for a way to pass in a JSON expression -- can&#39;t find any. \r\nskipped the legacy methods-- `QueryRequest.keyConditions()` and some others. \r\n\r\ni tried \r\n\r\n      QueryRequest queryRequest = QueryRequest\r\n                .builder().tableName(&quot;tablename&quot;)\r\n                .indexName(&quot;user-index&quot;)\r\n                .keyConditionExpression(&quot;index-ID IN (:key0, :key1, :key2)&quot;\r\n                .expressionAttributeValues(keys)\r\n                .build();\r\n\r\n\r\nwhere `Map&lt;String, Map&lt;String, AttributeValue&gt;&gt; keys` looks like the following when i print this `Map` with its `toString()`:\r\n \r\n    {:key2=AttributeValue(S=5555550), :key1=AttributeValue(S=5555551), :key0=AttributeValue(S=5555552)}\r\n\r\nthe following exception is thrown to this:\r\n\r\n```\r\nsoftware.amazon.awssdk.services.dynamodb.model.DynamoDbException: ExpressionAttributeValues contains invalid key: Syntax error; key: &quot;&quot;:key1&quot;&quot; (Service: DynamoDb, Status Code: 400, Request ID: R986SKT4JTK02C57HD0P8591TVQV4KQNSO5AEMVJF66Q9ASUAAJG)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:125)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleResponse(CombinedResponseHandler.java:82)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:60)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:41)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:30)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:73)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:50)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:81)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:48)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:31)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26)\r\n\tat software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:193)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:103)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:171)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:82)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76)\r\n\tat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45)\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56)\r\n\tat software.amazon.awssdk.services.dynamodb.DefaultDynamoDbClient.query(DefaultDynamoDbClient.java:4372)\r\n```\r\n\r\ni also tried surrounding the key-s with quotes along with some other variations:\r\n\r\n    {&quot;:key2&quot;=AttributeValue(S=5555550), &quot;:key1&quot;=AttributeValue(S=5555551), &quot;:key0&quot;=AttributeValue(S=5555552)}\r\n\r\n\r\n\r\nWill greatly appreciate the help. \r\nWore me out. \r\n\r\n//==================\r\n\r\nUPDATE: i&#39;m aware of the direct Restful call via a script to AWS server, but we&#39;re looking for the Java solution.   ","title":"DynamoDB Java SDK - QueryRequest with IN clause","body":"<p>The Javadoc of <code>software.amazon.awssdk.services.dynamodb.model.QueryRequest.expressionAttributeValues()</code> says a following query can be done:</p>\n<p><code>ProductStatus IN (:avail, :back, :disc)</code></p>\n<p>where the values are passed in in &quot;ExpressionAttributeValues&quot; as follows:</p>\n<p><code>{ &quot;:avail&quot;:{&quot;S&quot;:&quot;Available&quot;}, &quot;:back&quot;:{&quot;S&quot;:&quot;Backordered&quot;}, &quot;:disc&quot;:{&quot;S&quot;:&quot;Discontinued&quot;} } </code></p>\n<p>I'm now trying to figure how</p>\n<p><code>QueryRequest.expressionAttributeValues</code> is the following <code>Map</code>:</p>\n<p><code>Map&lt;String, AttributeValue&gt; expressionAttributeValues)</code></p>\n<p>there doesn't seem to be any other way to pass expression values to the expression defined in <code>QueryRequest.keyConditionExpression()</code></p>\n<p>I specifically looked for a way to pass in a JSON expression -- can't find any.\nskipped the legacy methods-- <code>QueryRequest.keyConditions()</code> and some others.</p>\n<p>i tried</p>\n<pre><code>  QueryRequest queryRequest = QueryRequest\n            .builder().tableName(&quot;tablename&quot;)\n            .indexName(&quot;user-index&quot;)\n            .keyConditionExpression(&quot;index-ID IN (:key0, :key1, :key2)&quot;\n            .expressionAttributeValues(keys)\n            .build();\n</code></pre>\n<p>where <code>Map&lt;String, Map&lt;String, AttributeValue&gt;&gt; keys</code> looks like the following when i print this <code>Map</code> with its <code>toString()</code>:</p>\n<pre><code>{:key2=AttributeValue(S=5555550), :key1=AttributeValue(S=5555551), :key0=AttributeValue(S=5555552)}\n</code></pre>\n<p>the following exception is thrown to this:</p>\n<pre><code>software.amazon.awssdk.services.dynamodb.model.DynamoDbException: ExpressionAttributeValues contains invalid key: Syntax error; key: &quot;&quot;:key1&quot;&quot; (Service: DynamoDb, Status Code: 400, Request ID: R986SKT4JTK02C57HD0P8591TVQV4KQNSO5AEMVJF66Q9ASUAAJG)\n    at software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:125)\n    at software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleResponse(CombinedResponseHandler.java:82)\n    at software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:60)\n    at software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:41)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:40)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:30)\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:73)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:50)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:36)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:81)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:36)\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56)\n    at software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:48)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:31)\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37)\n    at software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26)\n    at software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:193)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:103)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:171)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:82)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:179)\n    at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:76)\n    at software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45)\n    at software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:56)\n    at software.amazon.awssdk.services.dynamodb.DefaultDynamoDbClient.query(DefaultDynamoDbClient.java:4372)\n</code></pre>\n<p>i also tried surrounding the key-s with quotes along with some other variations:</p>\n<pre><code>{&quot;:key2&quot;=AttributeValue(S=5555550), &quot;:key1&quot;=AttributeValue(S=5555551), &quot;:key0&quot;=AttributeValue(S=5555552)}\n</code></pre>\n<p>Will greatly appreciate the help.\nWore me out.</p>\n<p>//==================</p>\n<p>UPDATE: i'm aware of the direct Restful call via a script to AWS server, but we're looking for the Java solution.</p>\n"},{"tags":["java","multithreading","java-8","forkjoinpool"],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691520709,"creation_date":1691518630,"answer_id":76862219,"question_id":76862157,"body_markdown":"Threads do not have their own memory to use to store objects. But when a method executes, that method execution has its own stackframe allocated to it. The stackframe can store primitives and references to heap-allocated objects. \r\n\r\nIn your code the variable `a` is created within a block executed by a closure, `a` is a reference, it is on the stack frame and only the thread executing that closure can see it. Each time the closure executes it gets its own stackframe and its own `a` variable. \r\n\r\nEach object of type `A` is created on the heap which is shared across threads.  But only the current thread sees the local variables in a method executed by that thread. \r\n\r\n(A closure can access fields declared in its environment. That means if you nested yet another closure inside the closure declaring a local `a`, then the nested closure could access that `a`, even if it would otherwise have gone out of scope. So you can create a situation with nested closures where more than one thread can see a local variable. But the posted code doesn&#39;t do that.)","title":"Memory sharing between Threads","body":"<p>Threads do not have their own memory to use to store objects. But when a method executes, that method execution has its own stackframe allocated to it. The stackframe can store primitives and references to heap-allocated objects.</p>\n<p>In your code the variable <code>a</code> is created within a block executed by a closure, <code>a</code> is a reference, it is on the stack frame and only the thread executing that closure can see it. Each time the closure executes it gets its own stackframe and its own <code>a</code> variable.</p>\n<p>Each object of type <code>A</code> is created on the heap which is shared across threads.  But only the current thread sees the local variables in a method executed by that thread.</p>\n<p>(A closure can access fields declared in its environment. That means if you nested yet another closure inside the closure declaring a local <code>a</code>, then the nested closure could access that <code>a</code>, even if it would otherwise have gone out of scope. So you can create a situation with nested closures where more than one thread can see a local variable. But the posted code doesn't do that.)</p>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691524644,"creation_date":1691524644,"answer_id":76862853,"question_id":76862157,"body_markdown":"&gt; As per my knowledge every thread has some local memory.\r\n\r\nThere is no &quot;memory&quot; in the Java language. &quot;Memory&quot; is something that you only need to talk about if you are describing the internals of a JVM or, maybe, if you are writing native code in some other language such as C++ with which your Java code will communicate via the [Java Native Interface](https://en.wikipedia.org/wiki/Java_Native_Interface).\r\n\r\nThe Java language has _local variables,_ `static` variables, _instances_ (a.k.a., &quot;objects&quot;,) and _fields_ within instances:\r\n\r\n- `static` variables are automatically available to any thread that executes code that has permission to access the variable.\r\n\r\n- Local variables cannot be shared between threads, \\*except\\* when an effectively `final` local variable is _captured_ by a lambda expression, and the result of the lambda is shared between threads.\r\n\r\n- A field is shared if and only if the instance to which it belongs is shared. \r\n\r\n- Instances can be explicitly passed from one thread to another. The `Runnable` object that is used to start a new thread is automatically shared between the new thread and the thread that created it. Other instances can be made available for sharing via the fields of instances that already are shared. For example The shared `Runnable` object could have a field that refers to a `BlockingQueue`. The field would be shared because the Runnable is shared. The queue to which the field refers thus would be shared, and any object that is passed through the queue also becomes a shared object.","title":"Memory sharing between Threads","body":"<blockquote>\n<p>As per my knowledge every thread has some local memory.</p>\n</blockquote>\n<p>There is no &quot;memory&quot; in the Java language. &quot;Memory&quot; is something that you only need to talk about if you are describing the internals of a JVM or, maybe, if you are writing native code in some other language such as C++ with which your Java code will communicate via the <a href=\"https://en.wikipedia.org/wiki/Java_Native_Interface\" rel=\"nofollow noreferrer\">Java Native Interface</a>.</p>\n<p>The Java language has <em>local variables,</em> <code>static</code> variables, <em>instances</em> (a.k.a., &quot;objects&quot;,) and <em>fields</em> within instances:</p>\n<ul>\n<li><p><code>static</code> variables are automatically available to any thread that executes code that has permission to access the variable.</p>\n</li>\n<li><p>Local variables cannot be shared between threads, *except* when an effectively <code>final</code> local variable is <em>captured</em> by a lambda expression, and the result of the lambda is shared between threads.</p>\n</li>\n<li><p>A field is shared if and only if the instance to which it belongs is shared.</p>\n</li>\n<li><p>Instances can be explicitly passed from one thread to another. The <code>Runnable</code> object that is used to start a new thread is automatically shared between the new thread and the thread that created it. Other instances can be made available for sharing via the fields of instances that already are shared. For example The shared <code>Runnable</code> object could have a field that refers to a <code>BlockingQueue</code>. The field would be shared because the Runnable is shared. The queue to which the field refers thus would be shared, and any object that is passed through the queue also becomes a shared object.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":19396763,"reputation":33,"user_id":14184287,"display_name":"Shivansh Bajpai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691524644,"creation_date":1691517962,"question_id":76862157,"body_markdown":"I have a scenario where I am confused little bit. As per my knowledge every thread has some local memory.\r\n```\r\n// 100 elements in SomeArray\r\nArrayList SomeArray = new ArrayList();\r\n ForkJoinPool forkJoinPool = new ForkJoinPool(8);\r\n        forkJoinPool.submit( () -&gt;{\r\n            SomeArray.parallelStream().map(e-&gt;{\r\n              A a= new A();\r\n              // perform some action\r\n            });\r\n        });\r\nclass A{\r\n\r\n}\r\n```\r\n\r\nSo for above code each thread will create a diff object of class A and they will work on that only. I don&#39;t think it should cause any data inconsistency. I have 2 cases here but I am not sure which one is right&lt;br&gt;\r\nCase 1- If both threads are sharing the same memory&lt;br&gt;\r\nThen suppose One Thread creates a object of class A with reference &quot;a&quot; and starts performing some action and then another thread creates a new object with same reference name but now &quot;a&quot; starts pointing to other memory in heap. As &quot;a&quot; is present in shared memory so now &quot;a&quot; will point to diff memory. So Actions that are being performed by thread 1 will start reflecting in other Object.&lt;br&gt;\r\nCase 2- If both threads are storing variable &quot;a&quot; in local memory&lt;br&gt;\r\nThen both threads will create diff objects and as &quot;a&quot; reference is present in local memory So there will be no overlap between them.&lt;br&gt;\r\nSo in short will thread 1 &quot;a&quot; variable and thread 2 &quot;a&quot; variable will have same memory reference???\r\n","title":"Memory sharing between Threads","body":"<p>I have a scenario where I am confused little bit. As per my knowledge every thread has some local memory.</p>\n<pre><code>// 100 elements in SomeArray\nArrayList SomeArray = new ArrayList();\n ForkJoinPool forkJoinPool = new ForkJoinPool(8);\n        forkJoinPool.submit( () -&gt;{\n            SomeArray.parallelStream().map(e-&gt;{\n              A a= new A();\n              // perform some action\n            });\n        });\nclass A{\n\n}\n</code></pre>\n<p>So for above code each thread will create a diff object of class A and they will work on that only. I don't think it should cause any data inconsistency. I have 2 cases here but I am not sure which one is right<br>\nCase 1- If both threads are sharing the same memory<br>\nThen suppose One Thread creates a object of class A with reference &quot;a&quot; and starts performing some action and then another thread creates a new object with same reference name but now &quot;a&quot; starts pointing to other memory in heap. As &quot;a&quot; is present in shared memory so now &quot;a&quot; will point to diff memory. So Actions that are being performed by thread 1 will start reflecting in other Object.<br>\nCase 2- If both threads are storing variable &quot;a&quot; in local memory<br>\nThen both threads will create diff objects and as &quot;a&quot; reference is present in local memory So there will be no overlap between them.<br>\nSo in short will thread 1 &quot;a&quot; variable and thread 2 &quot;a&quot; variable will have same memory reference???</p>\n"},{"tags":["java","android","android-studio","keytool"],"comments":[{"owner":{"account_id":2467399,"reputation":2927,"user_id":2290950,"accept_rate":100,"display_name":"Viktor Yakunin"},"score":1,"creation_date":1691524413,"post_id":76862795,"comment_id":135502722,"body_markdown":"Do you have JAVA_HOME set up? https://stackoverflow.com/questions/22842743/how-to-set-java-home-environment-variable-on-mac-os-x-10-9 might help","body":"Do you have JAVA_HOME set up? <a href=\"https://stackoverflow.com/questions/22842743/how-to-set-java-home-environment-variable-on-mac-os-x-10-9\" title=\"how to set java home environment variable on mac os x 10 9\">stackoverflow.com/questions/22842743/&hellip;</a> might help"},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1691524413,"post_id":76862795,"comment_id":135502723,"body_markdown":"What exact command causes this error? Is `java` and `javac` on your `PATH`?","body":"What exact command causes this error? Is <code>java</code> and <code>javac</code> on your <code>PATH</code>?"},{"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"score":0,"creation_date":1691524525,"post_id":76862795,"comment_id":135502740,"body_markdown":"@Code-Apprentice keytool and jarsigner, probably everything in the bin folder that has something to do with Java","body":"@Code-Apprentice keytool and jarsigner, probably everything in the bin folder that has something to do with Java"},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1691524546,"post_id":76862795,"comment_id":135502748,"body_markdown":"So you just type `keytool` and then get this error? Just one example is enough for now.","body":"So you just type <code>keytool</code> and then get this error? Just one example is enough for now."},{"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"score":0,"creation_date":1691524718,"post_id":76862795,"comment_id":135502772,"body_markdown":"@ViktorYakunin probably not as I am just starting to build my setup, however in Windows I do not need to specify the JAVA_HOME and still works. Any idea why is that possible?","body":"@ViktorYakunin probably not as I am just starting to build my setup, however in Windows I do not need to specify the JAVA_HOME and still works. Any idea why is that possible?"},{"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"score":0,"creation_date":1691524771,"post_id":76862795,"comment_id":135502781,"body_markdown":"@Code-Apprentice correct, it should show what action is available with keytool command but I am getting the above error instead of those action list.","body":"@Code-Apprentice correct, it should show what action is available with keytool command but I am getting the above error instead of those action list."}],"owner":{"account_id":16877632,"reputation":2683,"user_id":12204620,"display_name":"Bitwise DEVS"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":489,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691524459,"creation_date":1691524103,"question_id":76862795,"body_markdown":"I am trying to run keytool command on my newly setup mac with M1 chip, however navigating in \r\n`/Applications/Android Studio Preview.app/Contents/jbr/Contents/Home/bin` then open the folder with terminal to run a keytool command does not work and giving me an error\r\n\r\n`The operation couldn’t be completed. Unable to locate a Java Runtime.\r\nPlease visit http://www.java.com for information on installing Java.\r\n`\r\n\r\nThis does not happen in Windows, I am expecting that I no longer need to install JRE since Android Studio itself already have it.\r\n\r\nBut opening the actual keytool executable seems working","title":"Android Studio Hedgehog 2023.1.1 Canary 15 JBR not working","body":"<p>I am trying to run keytool command on my newly setup mac with M1 chip, however navigating in\n<code>/Applications/Android Studio Preview.app/Contents/jbr/Contents/Home/bin</code> then open the folder with terminal to run a keytool command does not work and giving me an error</p>\n<p><code>The operation couldn’t be completed. Unable to locate a Java Runtime. Please visit http://www.java.com for information on installing Java. </code></p>\n<p>This does not happen in Windows, I am expecting that I no longer need to install JRE since Android Studio itself already have it.</p>\n<p>But opening the actual keytool executable seems working</p>\n"},{"tags":["java","android","ftp","apache-commons-net"],"comments":[{"owner":{"account_id":28074351,"reputation":21,"user_id":21446459,"display_name":"lezn"},"score":0,"creation_date":1691597782,"post_id":76861879,"comment_id":135514220,"body_markdown":"@MartinPrikryl this works thanks","body":"@MartinPrikryl this works thanks"}],"owner":{"account_id":28074351,"reputation":21,"user_id":21446459,"display_name":"lezn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1691606996,"answer_count":0,"score":1,"last_activity_date":1691524396,"creation_date":1691515348,"question_id":76861879,"body_markdown":"I have problem with download file from ftp server using library commons-net-3.6-ftp.\r\nEvery time when I download always missing about 2kb with original size.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/1ih6F.png)](https://i.stack.imgur.com/1ih6F.png)\r\n\r\n```\r\n    fun download(url: MapFragment){\r\n        try {\r\n            ftpClient?.changeWorkingDirectory(&quot;mapa/&quot;+url.shortName)\r\n\r\n            listener!!.mapDownloadStarted()\r\n            val pathh = this.context!!.getExternalFilesDir(null)\r\n            val test = ftpClient?.listFiles()\r\n\r\n            test?.forEach {\r\n                val fileObj = File(pathh, &quot;ptv/maps/&quot; + it.name)\r\n\r\n                val desFileStream = BufferedOutputStream(FileOutputStream(fileObj))\r\n                val input: InputStream = ftpClient!!.retrieveFileStream(it.name)\r\n\r\n                try {\r\n                    org.apache.commons.net.io.Util.copyStream(input,desFileStream)\r\n                    desFileStream.flush()\r\n                    desFileStream.close()\r\n                    ftpClient!!.disconnect()\r\n                } catch (e: IOException) {\r\n                    e.printStackTrace()\r\n                }\r\n            }\r\n        }catch (e: Exception) {\r\n            logE(e.toString())\r\n        }\r\n    }\r\n```\r\nconfiguration\r\n```\r\nval pass = context.getString(R.string.passFtp)\r\n                val loginFtp = context.getString(R.string.userFtp)\r\n                val serverFtp = context.getString(R.string.serverFtp)\r\n                val mFtpClient = FTPSClient()\r\n                val sc = SSLContext.getInstance(&quot;SSL&quot;)\r\n                val sr = java.security.SecureRandom()\r\n                sc.init(null, getTrustManager(), sr)\r\n                mFtpClient.connect(serverFtp, 62023)\r\n                mFtpClient.setDataTimeout(25000)\r\n                mFtpClient.bufferSize = 1024 * 1024\r\n                mFtpClient.setFileType(FTP.BINARY_FILE_TYPE)\r\n                mFtpClient.execPBSZ(0)\r\n                mFtpClient.execPROT(&quot;P&quot;)\r\n                mFtpClient.enterLocalPassiveMode()\r\n\r\nif (mFtpClient.login(loginFtp, pass)) {\r\n                    ftpClient = mFtpClient\r\n                } else {\r\n                    ftpClient = null\r\n                }\r\n```\r\n\r\n\r\nI used retriveFile instead retrieveFileStream but everytime missing around 2kb","title":"Android downloaded zip file every time damaged","body":"<p>I have problem with download file from ftp server using library commons-net-3.6-ftp.\nEvery time when I download always missing about 2kb with original size.</p>\n<p><a href=\"https://i.stack.imgur.com/1ih6F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ih6F.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>    fun download(url: MapFragment){\n        try {\n            ftpClient?.changeWorkingDirectory(&quot;mapa/&quot;+url.shortName)\n\n            listener!!.mapDownloadStarted()\n            val pathh = this.context!!.getExternalFilesDir(null)\n            val test = ftpClient?.listFiles()\n\n            test?.forEach {\n                val fileObj = File(pathh, &quot;ptv/maps/&quot; + it.name)\n\n                val desFileStream = BufferedOutputStream(FileOutputStream(fileObj))\n                val input: InputStream = ftpClient!!.retrieveFileStream(it.name)\n\n                try {\n                    org.apache.commons.net.io.Util.copyStream(input,desFileStream)\n                    desFileStream.flush()\n                    desFileStream.close()\n                    ftpClient!!.disconnect()\n                } catch (e: IOException) {\n                    e.printStackTrace()\n                }\n            }\n        }catch (e: Exception) {\n            logE(e.toString())\n        }\n    }\n</code></pre>\n<p>configuration</p>\n<pre><code>val pass = context.getString(R.string.passFtp)\n                val loginFtp = context.getString(R.string.userFtp)\n                val serverFtp = context.getString(R.string.serverFtp)\n                val mFtpClient = FTPSClient()\n                val sc = SSLContext.getInstance(&quot;SSL&quot;)\n                val sr = java.security.SecureRandom()\n                sc.init(null, getTrustManager(), sr)\n                mFtpClient.connect(serverFtp, 62023)\n                mFtpClient.setDataTimeout(25000)\n                mFtpClient.bufferSize = 1024 * 1024\n                mFtpClient.setFileType(FTP.BINARY_FILE_TYPE)\n                mFtpClient.execPBSZ(0)\n                mFtpClient.execPROT(&quot;P&quot;)\n                mFtpClient.enterLocalPassiveMode()\n\nif (mFtpClient.login(loginFtp, pass)) {\n                    ftpClient = mFtpClient\n                } else {\n                    ftpClient = null\n                }\n</code></pre>\n<p>I used retriveFile instead retrieveFileStream but everytime missing around 2kb</p>\n"},{"tags":["java","swing","user-interface","game-development"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1691324440,"post_id":76845682,"comment_id":135473537,"body_markdown":"Look at where you set the JFrame visible. Then look at where you add components to it. It&#39;s not a good idea to render the GUI *before* setting it up . Having said that, you should avoid use of null layout and use of `setBounds(...)` for component placement as this makes for very inflexible GUI&#39;s that while they might look good on one platform look terrible on most other platforms or screen resolutions and that are very difficult to update and maintain.","body":"Look at where you set the JFrame visible. Then look at where you add components to it. It&#39;s not a good idea to render the GUI <i>before</i> setting it up . Having said that, you should avoid use of null layout and use of <code>setBounds(...)</code> for component placement as this makes for very inflexible GUI&#39;s that while they might look good on one platform look terrible on most other platforms or screen resolutions and that are very difficult to update and maintain."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691527996,"post_id":76845682,"comment_id":135503266,"body_markdown":"also, many Swing Components have a warning: &quot;**Warning:** Swing is not thread safe. For more information see [Swing&#39;s Threading Policy](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/package-summary.html#threading).&quot;, that means: new main()` -&gt; `SwingUtilities.invokeLater(main::new)`","body":"also, many Swing Components have a warning: &quot;<b>Warning:</b> Swing is not thread safe. For more information see <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/package-summary.html#threading\" rel=\"nofollow noreferrer\">Swing&#39;s Threading Policy</a>.&quot;, that means: new main()` -&gt; <code>SwingUtilities.invokeLater(main::new)</code>"}],"owner":{"account_id":29170604,"reputation":1,"user_id":22347061,"display_name":"Nathan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691321636,"answer_count":0,"score":0,"last_activity_date":1691524097,"creation_date":1691321403,"question_id":76845682,"body_markdown":"I am creating a pause screen for a 2048 game.I am just trying to add my Panels to a JFrame with different components on each panel, but none of the panels show on my laptop. However, on my friends laptop it runs just fine, they are no error messages when it runs.\r\n\r\nThis is what I have tried so far:\r\n\r\n```\r\n\r\n//@Author: Nathan\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.io.*;\r\n\r\n    public class main{\r\n\r\n        public main(){\r\n\r\n            //Creating Frame\r\n            JFrame mainFrame = new JFrame();\r\n            mainFrame.setResizable(false);\r\n            mainFrame.setTitle(&quot;Pause&quot;);\r\n            mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            mainFrame.setLayout(null);\r\n            mainFrame.setSize(600, 600);\r\n            mainFrame.setLocationRelativeTo(null);\r\n            mainFrame.setVisible(true);\r\n        \r\n\r\n            //Creating colour variables\r\n            Color c = new Color(223, 146, 97);\r\n\r\n            //Adding Panels\r\n            JPanel northPanel = new JPanel();\r\n            northPanel.setBackground(c);\r\n            northPanel.setBounds(0, 0,600, 50 );\r\n\r\n            JPanel upperPanel = new JPanel();\r\n            upperPanel.setBackground(c);\r\n            upperPanel.setBounds(0, 50, 200, 550);\r\n\r\n            JPanel centerPanel = new JPanel();\r\n            centerPanel.setBackground(c);\r\n            centerPanel.setBounds(0 , 50 , 300 ,550);\r\n\r\n          //Creating Icons for buttons\r\n            ImageIcon infoIcon = new ImageIcon(&quot;./Icons/info.png&quot;);\r\n            ImageIcon themeIcon = new ImageIcon(&quot;./Icons/paint.png&quot;);\r\n            ImageIcon volumeOn = new ImageIcon(&quot;./Icons/volume.png&quot;);\r\n            ImageIcon volumeOff =new ImageIcon(&quot;./Icons/volumeOff.png&quot;); \r\n        \r\n            //Creating Componenets\r\n\r\n            Font Titlefont = new Font(&quot;SansSerrif&quot;, Font.PLAIN, 20);\r\n        \r\n             JLabel pauseTitle = new JLabel(&quot;2048&quot;);\r\n             pauseTitle.setFont(Titlefont);\r\n\r\n             JButton themeButton = new JButton(themeIcon);\r\n             themeButton.setBackground(c);\r\n             themeButton.setForeground(Color.WHITE);\r\n         \r\n             JButton volumeButton = new JButton(volumeOn);\r\n             volumeButton.setBackground(c);\r\n \r\n             JButton infoButton = new JButton(infoIcon);\r\n             infoButton.setBackground(c);\r\n \r\n             JButton playButton = new JButton(&quot;PLAY&quot;);\r\n             JButton resetButton = new JButton(&quot;RESET&quot;);\r\n             JButton homeButton = new JButton(&quot;HOME&quot;);\r\n\r\n            //Adding panels to mainframe\r\n            mainFrame.add(northPanel);\r\n            mainFrame.add(upperPanel);\r\n            mainFrame.add(centerPanel); \r\n\r\n            //Adding Components to panels\r\n            northPanel.add(pauseTitle); \r\n\r\n            upperPanel.add(themeButton);\r\n            upperPanel.add(volumeButton);\r\n            upperPanel.add(infoButton);\r\n\r\n            centerPanel.add(playButton);\r\n            centerPanel.add(resetButton);\r\n            centerPanel.add(homeButton);\r\n \r\n        }\r\n\r\n        public static void main(String [] args){\r\n           new main();\r\n        }\r\n    }\r\n```\r\n\r\n","title":"JPanels not showing even though frame is visible","body":"<p>I am creating a pause screen for a 2048 game.I am just trying to add my Panels to a JFrame with different components on each panel, but none of the panels show on my laptop. However, on my friends laptop it runs just fine, they are no error messages when it runs.</p>\n<p>This is what I have tried so far:</p>\n<pre><code>\n//@Author: Nathan\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.io.*;\n\n    public class main{\n\n        public main(){\n\n            //Creating Frame\n            JFrame mainFrame = new JFrame();\n            mainFrame.setResizable(false);\n            mainFrame.setTitle(&quot;Pause&quot;);\n            mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            mainFrame.setLayout(null);\n            mainFrame.setSize(600, 600);\n            mainFrame.setLocationRelativeTo(null);\n            mainFrame.setVisible(true);\n        \n\n            //Creating colour variables\n            Color c = new Color(223, 146, 97);\n\n            //Adding Panels\n            JPanel northPanel = new JPanel();\n            northPanel.setBackground(c);\n            northPanel.setBounds(0, 0,600, 50 );\n\n            JPanel upperPanel = new JPanel();\n            upperPanel.setBackground(c);\n            upperPanel.setBounds(0, 50, 200, 550);\n\n            JPanel centerPanel = new JPanel();\n            centerPanel.setBackground(c);\n            centerPanel.setBounds(0 , 50 , 300 ,550);\n\n          //Creating Icons for buttons\n            ImageIcon infoIcon = new ImageIcon(&quot;./Icons/info.png&quot;);\n            ImageIcon themeIcon = new ImageIcon(&quot;./Icons/paint.png&quot;);\n            ImageIcon volumeOn = new ImageIcon(&quot;./Icons/volume.png&quot;);\n            ImageIcon volumeOff =new ImageIcon(&quot;./Icons/volumeOff.png&quot;); \n        \n            //Creating Componenets\n\n            Font Titlefont = new Font(&quot;SansSerrif&quot;, Font.PLAIN, 20);\n        \n             JLabel pauseTitle = new JLabel(&quot;2048&quot;);\n             pauseTitle.setFont(Titlefont);\n\n             JButton themeButton = new JButton(themeIcon);\n             themeButton.setBackground(c);\n             themeButton.setForeground(Color.WHITE);\n         \n             JButton volumeButton = new JButton(volumeOn);\n             volumeButton.setBackground(c);\n \n             JButton infoButton = new JButton(infoIcon);\n             infoButton.setBackground(c);\n \n             JButton playButton = new JButton(&quot;PLAY&quot;);\n             JButton resetButton = new JButton(&quot;RESET&quot;);\n             JButton homeButton = new JButton(&quot;HOME&quot;);\n\n            //Adding panels to mainframe\n            mainFrame.add(northPanel);\n            mainFrame.add(upperPanel);\n            mainFrame.add(centerPanel); \n\n            //Adding Components to panels\n            northPanel.add(pauseTitle); \n\n            upperPanel.add(themeButton);\n            upperPanel.add(volumeButton);\n            upperPanel.add(infoButton);\n\n            centerPanel.add(playButton);\n            centerPanel.add(resetButton);\n            centerPanel.add(homeButton);\n \n        }\n\n        public static void main(String [] args){\n           new main();\n        }\n    }\n</code></pre>\n"},{"tags":["java","sql","database","android-studio","delete-row"],"comments":[{"owner":{"account_id":534856,"reputation":5625,"user_id":904624,"accept_rate":81,"display_name":"Christine"},"score":0,"creation_date":1545745363,"post_id":53922844,"comment_id":94687522,"body_markdown":"What did you do to find the problem? Did you inspect the logcat? Did you try debugging? Did you try inserting log statements?","body":"What did you do to find the problem? Did you inspect the logcat? Did you try debugging? Did you try inserting log statements?"},{"owner":{"account_id":14662192,"reputation":1711,"user_id":10589041,"display_name":"Ishaan Javali"},"score":0,"creation_date":1545746404,"post_id":53922844,"comment_id":94687758,"body_markdown":"Shouldn&#39;t `adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.select_dialog_multichoice, myToDo);` and              `lv.setAdapter(adapter);` come outside of your `while` loop in `onCreate()`, once the `myToDo` ArrayList has all the values?","body":"Shouldn&#39;t <code>adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.select_dialog_multichoice, myToDo);</code> and              <code>lv.setAdapter(adapter);</code> come outside of your <code>while</code> loop in <code>onCreate()</code>, once the <code>myToDo</code> ArrayList has all the values?"},{"owner":{"account_id":10516438,"reputation":399,"user_id":7750399,"accept_rate":25,"display_name":"diem_L"},"score":0,"creation_date":1545747024,"post_id":53922844,"comment_id":94687882,"body_markdown":"@Ishaan unfortunately it still delets all todo&#39;s when i go back in","body":"@Ishaan unfortunately it still delets all todo&#39;s when i go back in"},{"owner":{"account_id":2195430,"reputation":10993,"user_id":1941241,"display_name":"rickdenhaan"},"score":1,"creation_date":1545747486,"post_id":53922844,"comment_id":94687975,"body_markdown":"Your `deleteSelectedRow` method doesn&#39;t do anything with `posCheck` and simply deletes everything from the table...","body":"Your <code>deleteSelectedRow</code> method doesn&#39;t do anything with <code>posCheck</code> and simply deletes everything from the table..."},{"owner":{"account_id":10516438,"reputation":399,"user_id":7750399,"accept_rate":25,"display_name":"diem_L"},"score":0,"creation_date":1545747829,"post_id":53922844,"comment_id":94688054,"body_markdown":"@rickdenhaan thanks for that information, so how do i have to change it, that it only delets the selected row?","body":"@rickdenhaan thanks for that information, so how do i have to change it, that it only delets the selected row?"},{"owner":{"account_id":2195430,"reputation":10993,"user_id":1941241,"display_name":"rickdenhaan"},"score":1,"creation_date":1545754588,"post_id":53922844,"comment_id":94689463,"body_markdown":"You need to add a condition to your query. Something like `DELETE FROM &quot; + TABLE_NAME + &quot; WHERE column = &quot; + posCheck.keyAt(0)` (depending on what your database column is named). I&#39;m not really a Java guy so I&#39;m not sure if that&#39;s how you get the selected item from `posCheck`, but since it&#39;s an array I assume you&#39;ll need to loop through it and execute a DELETE query for each selected value (I also just found [this caveat](https://ktatsiu.wordpress.com/2012/08/19/learning-android-how-to-use-getcheckeditempositions-of-listview/) from 2012, I don&#39;t know if that&#39;s still a thing).","body":"You need to add a condition to your query. Something like <code>DELETE FROM &quot; + TABLE_NAME + &quot; WHERE column = &quot; + posCheck.keyAt(0)</code> (depending on what your database column is named). I&#39;m not really a Java guy so I&#39;m not sure if that&#39;s how you get the selected item from <code>posCheck</code>, but since it&#39;s an array I assume you&#39;ll need to loop through it and execute a DELETE query for each selected value (I also just found <a href=\"https://ktatsiu.wordpress.com/2012/08/19/learning-android-how-to-use-getcheckeditempositions-of-listview/\" rel=\"nofollow noreferrer\">this caveat</a> from 2012, I don&#39;t know if that&#39;s still a thing)."}],"owner":{"account_id":10516438,"reputation":399,"user_id":7750399,"accept_rate":25,"display_name":"diem_L"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691523785,"creation_date":1545744741,"question_id":53922844,"body_markdown":"For my university, I have to create a ToDo-App. One specification is that you can delete the ToDo&#39;s which are done.\r\n\r\nSo I can go into the app and add for example 4 ToDo&#39;s. Then I delete two of them and close the app. After I go back to my app, all the ToDo&#39;s are deleted. \r\n\r\nIf I don&#39;t delete any ToDo&#39;s before closing the app, when I open it again, all the ToDo&#39;s are shown.\r\n\r\nHere is my code:\r\n\r\n\r\n    public class ToDoList extends AppCompatActivity {\r\n\r\n        ListView lv;\r\n        TextView tv;\r\n        Button addToDo, delToDo, delDoneToDo;\r\n        ArrayList&lt;String&gt; myToDo;\r\n        ArrayAdapter&lt;String&gt; adapter;\r\n        DataBaseToDo db2;\r\n\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_to_do_list);\r\n\r\n            db2 = new DataBaseToDo(this);\r\n    \r\n            lv = (ListView) findViewById(R.id.ToDoList);\r\n            tv = (TextView) findViewById(R.id.greeting);\r\n\r\n            myToDo = new ArrayList&lt;String&gt;();\r\n            Cursor data = db2.getListContents();\r\n\r\n            if(data.getCount() == 0){\r\n                Toast.makeText(getApplicationContext(), &quot;No ToDo&#39;s available&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                while (data.moveToNext()){\r\n                    myToDo.add(data.getString(1));\r\n                    adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.select_dialog_multichoice, myToDo);\r\n                    lv.setAdapter(adapter);\r\n                }\r\n            }\r\n        }\r\n    // With click on the Button i want to delete the selected Items:\r\n        public void deleteData(){\r\n            delDoneToDo.setOnClickListener(\r\n                    new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            SparseBooleanArray posCheck = lv.getCheckedItemPositions();\r\n                            int count = lv.getCount();\r\n                            for(int i=count-1; i&gt;=0; i--){\r\n                                if(posCheck.get(i)){\r\n                                    adapter.remove(myToDo.get(i));\r\n                                } else {\r\n                                    Toast.makeText(getApplicationContext(), &quot;No ToDo was selected&quot;, Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }\r\n                            adapter.notifyDataSetChanged();\r\n                            myDBH.deleteToDo(posCheck);\r\n                            Toast.makeText(ToDoList.this, &quot;To Do Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n            );\r\n        }\r\n    }\r\n\r\nThis is my DataBase code:\r\n\r\n    package com.vorlesung.iubh.mytodo;\r\n\r\n    import android.content.ContentValues;\r\n    import android.content.Context;\r\n    import android.database.Cursor;\r\n    import android.database.sqlite.SQLiteDatabase;\r\n    import android.database.sqlite.SQLiteOpenHelper;\r\n    import android.util.SparseBooleanArray;\r\n\r\n    public class DatabaseHelper extends SQLiteOpenHelper {\r\n\r\n        public static final String DATABASE_NAME = &quot;ToDo.db&quot;;\r\n        public static final String TABLE_NAME = &quot;todo_table&quot;;\r\n        public static final String Col1 = &quot;ID&quot;;\r\n        public static final String Col2 = &quot;ToDo_Title&quot;;\r\n        public static final String Col3 = &quot;Due_Date&quot;;\r\n        public static final String Col4 = &quot;Description&quot;;\r\n\r\n        public DatabaseHelper (Context context) {\r\n            super(context, DATABASE_NAME, null, 1);\r\n        }\r\n\r\n        @Override\r\n        public void onCreate(SQLiteDatabase db){\r\n            db.execSQL(&quot;CREATE TABLE &quot; + TABLE_NAME + &quot;(ID INTEGER PRIMARY KEY AUTOINCREMENT, ToDo_Title TEXT, Due_Date INTEGER, Description TEXT)&quot;);\r\n        }\r\n\r\n        @Override\r\n        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n            db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\r\n            onCreate(db);\r\n        }\r\n\r\n        public boolean insertData (String ToDo_Title, String Due_Date, String Description) {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues contentValues = new ContentValues();\r\n            contentValues.put(Col2, ToDo_Title);\r\n            contentValues.put(Col3, Due_Date);\r\n            contentValues.put(Col4, Description);\r\n\r\n            long result = db.insert(TABLE_NAME, null, contentValues);\r\n            if(result == -1){\r\n                db.close();\r\n                return false;\r\n            }\r\n\r\n            else {\r\n                db.close();\r\n                return true;\r\n            }\r\n        }\r\n\r\n        public Cursor getListContents(){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            Cursor data = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_NAME, null);\r\n            return data;\r\n        }\r\n\r\n        public void deleteAll() {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            db.execSQL(&quot;delete from &quot;+ TABLE_NAME);\r\n            db.close();\r\n        }\r\n\r\n        // I changes this part, but now there is a new problem .. see EDIT:\r\n        public void deleteToDo(SparseBooleanArray posCheck) {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            db.execSQL(&quot;DELETE FROM &quot; + TABLE_NAME + &quot; WHERE ID =  &quot; + posCheck.keyAt(0));\r\n            db.close();\r\n        }\r\n    }\r\n\r\nEdit\r\n---\r\n\r\nI changed my code a little bit, but now the problem is, that it doesn&#39;t delete any selected row from my DataBase.\r\n","title":"Android Studio - Why is everything deleted?","body":"<p>For my university, I have to create a ToDo-App. One specification is that you can delete the ToDo's which are done.</p>\n<p>So I can go into the app and add for example 4 ToDo's. Then I delete two of them and close the app. After I go back to my app, all the ToDo's are deleted.</p>\n<p>If I don't delete any ToDo's before closing the app, when I open it again, all the ToDo's are shown.</p>\n<p>Here is my code:</p>\n<pre><code>public class ToDoList extends AppCompatActivity {\n\n    ListView lv;\n    TextView tv;\n    Button addToDo, delToDo, delDoneToDo;\n    ArrayList&lt;String&gt; myToDo;\n    ArrayAdapter&lt;String&gt; adapter;\n    DataBaseToDo db2;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_to_do_list);\n\n        db2 = new DataBaseToDo(this);\n\n        lv = (ListView) findViewById(R.id.ToDoList);\n        tv = (TextView) findViewById(R.id.greeting);\n\n        myToDo = new ArrayList&lt;String&gt;();\n        Cursor data = db2.getListContents();\n\n        if(data.getCount() == 0){\n            Toast.makeText(getApplicationContext(), &quot;No ToDo's available&quot;, Toast.LENGTH_SHORT).show();\n        } else {\n            while (data.moveToNext()){\n                myToDo.add(data.getString(1));\n                adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.select_dialog_multichoice, myToDo);\n                lv.setAdapter(adapter);\n            }\n        }\n    }\n// With click on the Button i want to delete the selected Items:\n    public void deleteData(){\n        delDoneToDo.setOnClickListener(\n                new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {\n                        SparseBooleanArray posCheck = lv.getCheckedItemPositions();\n                        int count = lv.getCount();\n                        for(int i=count-1; i&gt;=0; i--){\n                            if(posCheck.get(i)){\n                                adapter.remove(myToDo.get(i));\n                            } else {\n                                Toast.makeText(getApplicationContext(), &quot;No ToDo was selected&quot;, Toast.LENGTH_SHORT).show();\n                            }\n                        }\n                        adapter.notifyDataSetChanged();\n                        myDBH.deleteToDo(posCheck);\n                        Toast.makeText(ToDoList.this, &quot;To Do Deleted&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }\n        );\n    }\n}\n</code></pre>\n<p>This is my DataBase code:</p>\n<pre><code>package com.vorlesung.iubh.mytodo;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.util.SparseBooleanArray;\n\npublic class DatabaseHelper extends SQLiteOpenHelper {\n\n    public static final String DATABASE_NAME = &quot;ToDo.db&quot;;\n    public static final String TABLE_NAME = &quot;todo_table&quot;;\n    public static final String Col1 = &quot;ID&quot;;\n    public static final String Col2 = &quot;ToDo_Title&quot;;\n    public static final String Col3 = &quot;Due_Date&quot;;\n    public static final String Col4 = &quot;Description&quot;;\n\n    public DatabaseHelper (Context context) {\n        super(context, DATABASE_NAME, null, 1);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db){\n        db.execSQL(&quot;CREATE TABLE &quot; + TABLE_NAME + &quot;(ID INTEGER PRIMARY KEY AUTOINCREMENT, ToDo_Title TEXT, Due_Date INTEGER, Description TEXT)&quot;);\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\n        onCreate(db);\n    }\n\n    public boolean insertData (String ToDo_Title, String Due_Date, String Description) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues contentValues = new ContentValues();\n        contentValues.put(Col2, ToDo_Title);\n        contentValues.put(Col3, Due_Date);\n        contentValues.put(Col4, Description);\n\n        long result = db.insert(TABLE_NAME, null, contentValues);\n        if(result == -1){\n            db.close();\n            return false;\n        }\n\n        else {\n            db.close();\n            return true;\n        }\n    }\n\n    public Cursor getListContents(){\n        SQLiteDatabase db = this.getWritableDatabase();\n        Cursor data = db.rawQuery(&quot;SELECT * FROM &quot; + TABLE_NAME, null);\n        return data;\n    }\n\n    public void deleteAll() {\n        SQLiteDatabase db = this.getWritableDatabase();\n        db.execSQL(&quot;delete from &quot;+ TABLE_NAME);\n        db.close();\n    }\n\n    // I changes this part, but now there is a new problem .. see EDIT:\n    public void deleteToDo(SparseBooleanArray posCheck) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        db.execSQL(&quot;DELETE FROM &quot; + TABLE_NAME + &quot; WHERE ID =  &quot; + posCheck.keyAt(0));\n        db.close();\n    }\n}\n</code></pre>\n<h2>Edit</h2>\n<p>I changed my code a little bit, but now the problem is, that it doesn't delete any selected row from my DataBase.</p>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"owner":{"account_id":18592411,"reputation":103,"user_id":13549310,"display_name":"Henrique Vital"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691522531,"creation_date":1691522531,"question_id":76862642,"body_markdown":"In the following code, I receive an chunck of 1000 Person entities and I want to dynamically generate files based on the count of the entity received and append data to these files, How can I do this?\r\n\r\n    private static final Date now = new Date();\r\n    \r\n    private String[] headerFields {&quot;name&quot;,&quot;country&quot;}\r\n\r\n    @Bean\r\n    @StepScope\r\n    public FlatFileItemWriter&lt;Person&gt; test(){\r\n        return new FlatFileItemWriterBuilder&lt;Person&gt;\r\n        .name(&quot;generatePersonWriter&quot;)\r\n        .headerCallBack(fileWriter -&gt; fileleWriter.writer(&quot;name,country&quot;))\r\n        .rsourve(new FileSystemResource(&quot;output/person_{{country}}_10.csv&quot;))\r\n        .append(true)\r\n        .delimited()\r\n        .names(headerFields)\r\n        .build;\r\n    }\r\n\r\n\r\nExample of expected file output name:\r\n\r\n&quot;output/person_France_10.csv&quot;","title":"How to create dynamically files names by using the entity fields?","body":"<p>In the following code, I receive an chunck of 1000 Person entities and I want to dynamically generate files based on the count of the entity received and append data to these files, How can I do this?</p>\n<pre><code>private static final Date now = new Date();\n\nprivate String[] headerFields {&quot;name&quot;,&quot;country&quot;}\n\n@Bean\n@StepScope\npublic FlatFileItemWriter&lt;Person&gt; test(){\n    return new FlatFileItemWriterBuilder&lt;Person&gt;\n    .name(&quot;generatePersonWriter&quot;)\n    .headerCallBack(fileWriter -&gt; fileleWriter.writer(&quot;name,country&quot;))\n    .rsourve(new FileSystemResource(&quot;output/person_{{country}}_10.csv&quot;))\n    .append(true)\n    .delimited()\n    .names(headerFields)\n    .build;\n}\n</code></pre>\n<p>Example of expected file output name:</p>\n<p>&quot;output/person_France_10.csv&quot;</p>\n"},{"tags":["java","algorithm","data-structures","hashmap"],"comments":[{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":3,"creation_date":1691506241,"post_id":76860677,"comment_id":135499232,"body_markdown":"&quot;I have solved ... one is not giving correct result. [...] Solution 2: Incorrect&quot;: just about terminology: a &quot;solution&quot;, solves. If it doesn&#39;t produce correct results, it is not a solution.","body":"&quot;I have solved ... one is not giving correct result. [...] Solution 2: Incorrect&quot;: just about terminology: a &quot;solution&quot;, solves. If it doesn&#39;t produce correct results, it is not a solution."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1691506635,"post_id":76860677,"comment_id":135499326,"body_markdown":"Well, &quot;similar&quot; is pretty broad term. I would recommend starting by reading the documentation of the getOrDefault method: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#getOrDefault(java.lang.Object,V) - The documentation says nothing about that this method will modify the map and add the key with the default value if it isn&#39;t in the map yet.","body":"Well, &quot;similar&quot; is pretty broad term. I would recommend starting by reading the documentation of the getOrDefault method: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#getOrDefault(java.lang.Object,V)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a> - The documentation says nothing about that this method will modify the map and add the key with the default value if it isn&#39;t in the map yet."}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691506445,"creation_date":1691506445,"answer_id":76860743,"question_id":76860677,"body_markdown":"In Solution 1, when you create a new entry in the HashMap using `hm.put(cannonical,new LinkedList&lt;String&gt;()) `, you ensure that if the `cannonical` key doesn&#39;t exist in the HashMap, a new LinkedList is created and associated with that key. \r\n\r\nThis way, when you later call `hm.get(cannonical).add(st)`, you are sure that there is a List&lt;String&gt; associated with the `cannonical` key, and you **can safely add the current string `st` to that list**.\r\n\r\nIn Solution 2, the incorrect part is here:\r\n\r\n```java\r\nhm.getOrDefault(cannonical, new LinkedList&lt;String&gt;()).add(st);\r\n```\r\n\r\nThe `getOrDefault` method will return either the existing list associated with the `cannonical` key or the newly created list, but this newly created list is never actually put into the HashMap. So, even though you correctly retrieve the list, **you&#39;re modifying a list that&#39;s not associated with any key in the HashMap**. \r\n\r\nThe correct version would be:\r\n\r\n```java\r\nhm.putIfAbsent(cannonical, new LinkedList&lt;String&gt;());\r\nhm.get(cannonical).add(st);\r\n```\r\n\r\nHere, `putIfAbsent` ensures that a list is associated with the `cannonical` key, and then **you can safely add the current string to that list**.","title":"I have solved the GROUP ANAGRAM question in leetcode in two ways.Why one of them is not giving correct result whereas the other one is returing null?","body":"<p>In Solution 1, when you create a new entry in the HashMap using <code>hm.put(cannonical,new LinkedList&lt;String&gt;()) </code>, you ensure that if the <code>cannonical</code> key doesn't exist in the HashMap, a new LinkedList is created and associated with that key.</p>\n<p>This way, when you later call <code>hm.get(cannonical).add(st)</code>, you are sure that there is a List associated with the <code>cannonical</code> key, and you <strong>can safely add the current string <code>st</code> to that list</strong>.</p>\n<p>In Solution 2, the incorrect part is here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>hm.getOrDefault(cannonical, new LinkedList&lt;String&gt;()).add(st);\n</code></pre>\n<p>The <code>getOrDefault</code> method will return either the existing list associated with the <code>cannonical</code> key or the newly created list, but this newly created list is never actually put into the HashMap. So, even though you correctly retrieve the list, <strong>you're modifying a list that's not associated with any key in the HashMap</strong>.</p>\n<p>The correct version would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>hm.putIfAbsent(cannonical, new LinkedList&lt;String&gt;());\nhm.get(cannonical).add(st);\n</code></pre>\n<p>Here, <code>putIfAbsent</code> ensures that a list is associated with the <code>cannonical</code> key, and then <strong>you can safely add the current string to that list</strong>.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691522504,"creation_date":1691521002,"answer_id":76862470,"question_id":76860677,"body_markdown":"This is the problem.\r\n```\r\n hm.getOrDefault(cannonical,new LinkedList&lt;String&gt;()).add(st);\r\n```\r\nThere is no key so you are trying to add a value to a list that isn&#39;t mapped.\r\n\r\nReplace it with\r\n```\r\nhm.computeIfAbsent(cannonical, v-&gt; new LinkedList&lt;&gt;()).add(st);\r\n```\r\nThe above says, if `cannonical` is not present, create a value for it, and return that value, in this case a list.  Then you can add the string to the list.\r\n`\r\n","title":"I have solved the GROUP ANAGRAM question in leetcode in two ways.Why one of them is not giving correct result whereas the other one is returing null?","body":"<p>This is the problem.</p>\n<pre><code> hm.getOrDefault(cannonical,new LinkedList&lt;String&gt;()).add(st);\n</code></pre>\n<p>There is no key so you are trying to add a value to a list that isn't mapped.</p>\n<p>Replace it with</p>\n<pre><code>hm.computeIfAbsent(cannonical, v-&gt; new LinkedList&lt;&gt;()).add(st);\n</code></pre>\n<p>The above says, if <code>cannonical</code> is not present, create a value for it, and return that value, in this case a list.  Then you can add the string to the list.\n`</p>\n"}],"owner":{"account_id":24123066,"reputation":21,"user_id":18091881,"display_name":"Paurab Bhattacharjee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1691698650,"answer_count":2,"score":-2,"last_activity_date":1691522504,"creation_date":1691505921,"question_id":76860677,"body_markdown":"Given an array of strings strs, group the anagrams together. You can return the answer in any order.\r\n\r\nSolution 1:the correct one:\r\n\r\n    public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) {\r\n            HashMap&lt;String,List&lt;String&gt;&gt; hm=new HashMap&lt;&gt;();   \r\n            \r\n            for(String st:strs){\r\n                char[] arr=st.toCharArray();\r\n                Arrays.sort(arr);\r\n                String cannonical=new String(arr);\r\n                if(!hm.containsKey(cannonical)){\r\n                    hm.put(cannonical,new LinkedList&lt;String&gt;());\r\n                }\r\n                \r\n                hm.get(cannonical).add(st);\r\n            }\r\n           \r\n            return new LinkedList&lt;&gt;(hm.values());\r\n        }\r\n\r\nSolution 2:Incorrect :\r\n\r\n    public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) {\r\n            HashMap&lt;String,List&lt;String&gt;&gt; hm=new HashMap&lt;&gt;();   \r\n            \r\n            for(String st:strs){\r\n                char[] arr=st.toCharArray();\r\n                Arrays.sort(arr);\r\n                String cannonical=new String(arr);\r\n                \r\n                 hm.getOrDefault(cannonical,new LinkedList&lt;String&gt;()).add(st);\r\n                \r\n            }\r\n            return new LinkedList&lt;&gt;(hm.values());\r\n        }\r\n\r\nwhy soln 2 is not working when both the codes are very similar\r\n","title":"I have solved the GROUP ANAGRAM question in leetcode in two ways.Why one of them is not giving correct result whereas the other one is returing null?","body":"<p>Given an array of strings strs, group the anagrams together. You can return the answer in any order.</p>\n<p>Solution 1:the correct one:</p>\n<pre><code>public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) {\n        HashMap&lt;String,List&lt;String&gt;&gt; hm=new HashMap&lt;&gt;();   \n        \n        for(String st:strs){\n            char[] arr=st.toCharArray();\n            Arrays.sort(arr);\n            String cannonical=new String(arr);\n            if(!hm.containsKey(cannonical)){\n                hm.put(cannonical,new LinkedList&lt;String&gt;());\n            }\n            \n            hm.get(cannonical).add(st);\n        }\n       \n        return new LinkedList&lt;&gt;(hm.values());\n    }\n</code></pre>\n<p>Solution 2:Incorrect :</p>\n<pre><code>public List&lt;List&lt;String&gt;&gt; groupAnagrams(String[] strs) {\n        HashMap&lt;String,List&lt;String&gt;&gt; hm=new HashMap&lt;&gt;();   \n        \n        for(String st:strs){\n            char[] arr=st.toCharArray();\n            Arrays.sort(arr);\n            String cannonical=new String(arr);\n            \n             hm.getOrDefault(cannonical,new LinkedList&lt;String&gt;()).add(st);\n            \n        }\n        return new LinkedList&lt;&gt;(hm.values());\n    }\n</code></pre>\n<p>why soln 2 is not working when both the codes are very similar</p>\n"},{"tags":["java","spring-boot","websocket","sockjs"],"owner":{"account_id":21481623,"reputation":1446,"user_id":15828895,"display_name":"plutownium"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691522360,"creation_date":1680632021,"question_id":75932577,"body_markdown":"First I want to tell you about a bunch of tutorials that don&#39;t work:\r\n\r\n[Using WebSocket to build an interactive web application][1]\r\n\r\n[Getting Started with Spring WebSockets in Java][2]\r\n\r\n[Spring Boot WebSocket STOMP SockJS Example][3]\r\n\r\n[Intro to WebSockets with Spring][4]\r\n\r\nThese tutorials say things like:\r\n\r\n`   var socket = new SockJS(&#39;/chat&#39;);`\r\n\r\n`var socket = new SockJS(&#39;/ws&#39;);`\r\n\r\n`var socket = new SockJS(&#39;/gs-guide-websocket&#39;);`\r\n\r\n`let sock = new SockJS(&quot;http://localhost:8080/stomp&quot;);`\r\n\r\nMy impression is that, if there is no &quot;localhost&quot;, then it&#39;s trying to connect on the same domain. Meaning the frontend in `/chat`, `/ws` etc are on `localhost:8080` and so is the backend server. But that doesn&#39;t work for me because my frontend is `localhost:5173` and my backend is `localhost:8080` so I have to tell it where to go. I confirm my suspicion because I get `GET http://localhost:5173/stomp/info?t=1680631128497 404` when I put `var socket = new SockJS(&#39;/stomp&#39;);`. So at least I know a bit of my code is right.\r\n\r\nI don&#39;t know what my expected result is, because (1) I am new to websockets (2) I am new to Spring Boot and (3) I am new to SockJS. But I want one of my log statements to be triggered so I know the code was reached, or for a message sent from the backend to be logged on the client, or vice versa.\r\n\r\nMy actual result is that I get: `GET http://localhost:8080/stomp/info?t=1680630627152 404`\r\n\r\nThis failure message makes me think I need a `/stomp/info` endpoint. Yet none of the tutorials mention a `/info` endpoint. So I don&#39;t need one, or else they&#39;d all say that.\r\n\r\nHere is my frontend code: \r\n```\r\n  import Stomp from &quot;stompjs&quot;;\r\n\r\n            function connect() {\r\n                var socket = new SockJS(&#39;http://localhost:8080/stomp&#39;);\r\n                // the code fails around here\r\n                stompClient = Stomp.over(socket);  \r\n                stompClient.connect({}, function(frame) {\r\n                    setConnected(true);\r\n                    console.log(&#39;Connected: &#39; + frame);\r\n                    stompClient.subscribe(&#39;/topic/messages&#39;, function(messageOutput) {\r\n                        showMessageOutput(JSON.parse(messageOutput.body));\r\n                    });\r\n                });\r\n            }\r\n\r\n// later...\r\n&lt;svelte:head&gt;\r\n    &lt;title&gt;Chat WebSocket&lt;/title&gt;\r\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js&quot;&gt;&lt;/script&gt;\r\n        &lt;!-- &lt;script src=&quot;resources/js/stomp.js&quot;&gt;&lt;/script&gt; --&gt;\r\n&lt;/svelte:head&gt;\r\n```\r\nThen in Spring Boot:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n  @Override\r\n  public void configureMessageBroker(MessageBrokerRegistry config) {\r\n    config.enableSimpleBroker(&quot;/topic&quot;);\r\n    config.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n  }\r\n\r\n  @Override\r\n  public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n   \r\n      registry.addEndpoint(&quot;/stomp&quot;)\r\n        .setAllowedOrigins(&quot;http://localhost:5173&quot;).withSockJS();\r\n  }\r\n\r\n}\r\n```\r\nThe chat controller:\r\n```\r\n@Controller\r\npublic class ChatController {\r\n\r\n    @MessageMapping(&quot;/cat&quot;)\r\n    @SendTo(&quot;/topic/public&quot;)\r\n    public ChatMessage hatResponse(@Payload final ChatMessage chat) {\r\n        System.out.println(&quot;hat&quot;);\r\n        return chat;\r\n    }\r\n}\r\n```\r\nHere&#39;s another bunch of ways to use SockJS that don&#39;t work:\r\n\r\n\r\n`/app/chat`: `var socket = new SockJS(&#39;http://localhost:8080/app/cat&#39;);` gives `GET http://localhost:8080/app/cat/info?t=1680631745245 404`\r\n\r\n`/app/stomp`: `var socket = new SockJS(&#39;http://localhost:8080/app/stomp&#39;);` gives `GET http://localhost:5173/stomp/info?t=1680631712894 404`\r\n\r\n`/stomp`: `var socket = new SockJS(&#39;http://localhost:8080/stomp&#39;);` gives `GET http://localhost:5173/stomp/info?t=1680631676987 404`\r\n\r\n`/cat`: `var socket = new SockJS(&#39;http://localhost:8080/cat&#39;);` gives `GET http://localhost:8080/cat/info?t=1680631770418 404`\r\n\r\nnone of the tutorials mention a /info endpoint. If the /info endpoint is a requirement, why don&#39;t the tutorials mention it? Four in a row establishes a strong pattern. So it obviously isn&#39;t this.\r\n\r\nI don&#39;t know what to do. Java, Spring Boot, and Websockets are all new to me, so this is a lot to chew all at once.\r\n\r\nEdit: more research\r\n\r\n[Spring boot Websocket without SockJS][5] says:\r\n\r\n&quot;If someone wants to use SockJS client to connect, they can connect using...\r\n```\r\nvar socket = new SockJS(&#39;http://localhost:8080/test&#39;);\r\nstompClient = Stomp.over(socket);\r\n```\r\n&quot;\r\n\r\nThis means the problem must be elsewhere in my code, since the poster was doing it the way I do. But where to look for the problem?\r\n\r\nedit apr 16 2023: Here are some research links I found\r\n\r\nhttps://stackoverflow.com/questions/66556191/webpack-dev-server-sockjs-node-returns-404-error\r\n\r\nhttps://stackoverflow.com/questions/45138738/sockjs-info-404-error\r\n\r\nhttps://stackoverflow.com/questions/53012885/sockjs-node-info-404-not-found\r\n\r\nI think these links don&#39;t help me with the spring boot side of the equation.\r\n\r\n2nd edit apr 16 2023: here&#39;s a link that does help!\r\n\r\nhttps://stackoverflow.com/questions/21883033/spring-websocket-and-404-status-on-connection\r\n\r\n  [1]: https://spring.io/guides/gs/messaging-stomp-websocket/\r\n  [2]: https://www.section.io/engineering-education/getting-started-with-spring-websockets/\r\n  [3]: https://www.javaguides.net/2019/06/spring-boot-websocket-stomp-sockjs-example.html\r\n  [4]: https://www.baeldung.com/websockets-spring\r\n  [5]: https://stackoverflow.com/questions/67920378/spring-boot-websocket-without-sockjs","title":"How do I connect my SockJS client to my Spring Boot websocket endpoint?","body":"<p>First I want to tell you about a bunch of tutorials that don't work:</p>\n<p><a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\" rel=\"nofollow noreferrer\">Using WebSocket to build an interactive web application</a></p>\n<p><a href=\"https://www.section.io/engineering-education/getting-started-with-spring-websockets/\" rel=\"nofollow noreferrer\">Getting Started with Spring WebSockets in Java</a></p>\n<p><a href=\"https://www.javaguides.net/2019/06/spring-boot-websocket-stomp-sockjs-example.html\" rel=\"nofollow noreferrer\">Spring Boot WebSocket STOMP SockJS Example</a></p>\n<p><a href=\"https://www.baeldung.com/websockets-spring\" rel=\"nofollow noreferrer\">Intro to WebSockets with Spring</a></p>\n<p>These tutorials say things like:</p>\n<p><code>   var socket = new SockJS('/chat');</code></p>\n<p><code>var socket = new SockJS('/ws');</code></p>\n<p><code>var socket = new SockJS('/gs-guide-websocket');</code></p>\n<p><code>let sock = new SockJS(&quot;http://localhost:8080/stomp&quot;);</code></p>\n<p>My impression is that, if there is no &quot;localhost&quot;, then it's trying to connect on the same domain. Meaning the frontend in <code>/chat</code>, <code>/ws</code> etc are on <code>localhost:8080</code> and so is the backend server. But that doesn't work for me because my frontend is <code>localhost:5173</code> and my backend is <code>localhost:8080</code> so I have to tell it where to go. I confirm my suspicion because I get <code>GET http://localhost:5173/stomp/info?t=1680631128497 404</code> when I put <code>var socket = new SockJS('/stomp');</code>. So at least I know a bit of my code is right.</p>\n<p>I don't know what my expected result is, because (1) I am new to websockets (2) I am new to Spring Boot and (3) I am new to SockJS. But I want one of my log statements to be triggered so I know the code was reached, or for a message sent from the backend to be logged on the client, or vice versa.</p>\n<p>My actual result is that I get: <code>GET http://localhost:8080/stomp/info?t=1680630627152 404</code></p>\n<p>This failure message makes me think I need a <code>/stomp/info</code> endpoint. Yet none of the tutorials mention a <code>/info</code> endpoint. So I don't need one, or else they'd all say that.</p>\n<p>Here is my frontend code:</p>\n<pre><code>  import Stomp from &quot;stompjs&quot;;\n\n            function connect() {\n                var socket = new SockJS('http://localhost:8080/stomp');\n                // the code fails around here\n                stompClient = Stomp.over(socket);  \n                stompClient.connect({}, function(frame) {\n                    setConnected(true);\n                    console.log('Connected: ' + frame);\n                    stompClient.subscribe('/topic/messages', function(messageOutput) {\n                        showMessageOutput(JSON.parse(messageOutput.body));\n                    });\n                });\n            }\n\n// later...\n&lt;svelte:head&gt;\n    &lt;title&gt;Chat WebSocket&lt;/title&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js&quot;&gt;&lt;/script&gt;\n        &lt;!-- &lt;script src=&quot;resources/js/stomp.js&quot;&gt;&lt;/script&gt; --&gt;\n&lt;/svelte:head&gt;\n</code></pre>\n<p>Then in Spring Boot:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n  @Override\n  public void configureMessageBroker(MessageBrokerRegistry config) {\n    config.enableSimpleBroker(&quot;/topic&quot;);\n    config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n  }\n\n  @Override\n  public void registerStompEndpoints(StompEndpointRegistry registry) {\n   \n      registry.addEndpoint(&quot;/stomp&quot;)\n        .setAllowedOrigins(&quot;http://localhost:5173&quot;).withSockJS();\n  }\n\n}\n</code></pre>\n<p>The chat controller:</p>\n<pre><code>@Controller\npublic class ChatController {\n\n    @MessageMapping(&quot;/cat&quot;)\n    @SendTo(&quot;/topic/public&quot;)\n    public ChatMessage hatResponse(@Payload final ChatMessage chat) {\n        System.out.println(&quot;hat&quot;);\n        return chat;\n    }\n}\n</code></pre>\n<p>Here's another bunch of ways to use SockJS that don't work:</p>\n<p><code>/app/chat</code>: <code>var socket = new SockJS('http://localhost:8080/app/cat');</code> gives <code>GET http://localhost:8080/app/cat/info?t=1680631745245 404</code></p>\n<p><code>/app/stomp</code>: <code>var socket = new SockJS('http://localhost:8080/app/stomp');</code> gives <code>GET http://localhost:5173/stomp/info?t=1680631712894 404</code></p>\n<p><code>/stomp</code>: <code>var socket = new SockJS('http://localhost:8080/stomp');</code> gives <code>GET http://localhost:5173/stomp/info?t=1680631676987 404</code></p>\n<p><code>/cat</code>: <code>var socket = new SockJS('http://localhost:8080/cat');</code> gives <code>GET http://localhost:8080/cat/info?t=1680631770418 404</code></p>\n<p>none of the tutorials mention a /info endpoint. If the /info endpoint is a requirement, why don't the tutorials mention it? Four in a row establishes a strong pattern. So it obviously isn't this.</p>\n<p>I don't know what to do. Java, Spring Boot, and Websockets are all new to me, so this is a lot to chew all at once.</p>\n<p>Edit: more research</p>\n<p><a href=\"https://stackoverflow.com/questions/67920378/spring-boot-websocket-without-sockjs\">Spring boot Websocket without SockJS</a> says:</p>\n<p>&quot;If someone wants to use SockJS client to connect, they can connect using...</p>\n<pre><code>var socket = new SockJS('http://localhost:8080/test');\nstompClient = Stomp.over(socket);\n</code></pre>\n<p>&quot;</p>\n<p>This means the problem must be elsewhere in my code, since the poster was doing it the way I do. But where to look for the problem?</p>\n<p>edit apr 16 2023: Here are some research links I found</p>\n<p><a href=\"https://stackoverflow.com/questions/66556191/webpack-dev-server-sockjs-node-returns-404-error\">Webpack dev server sockjs-node returns 404 error</a></p>\n<p><a href=\"https://stackoverflow.com/questions/45138738/sockjs-info-404-error\">sockjs info 404 error</a></p>\n<p><a href=\"https://stackoverflow.com/questions/53012885/sockjs-node-info-404-not-found\">sockjs-node/info? 404 (Not Found)</a></p>\n<p>I think these links don't help me with the spring boot side of the equation.</p>\n<p>2nd edit apr 16 2023: here's a link that does help!</p>\n<p><a href=\"https://stackoverflow.com/questions/21883033/spring-websocket-and-404-status-on-connection\">Spring Websocket and 404 status on connection</a></p>\n"},{"tags":["java","oauth-2.0","java-ee-8","forgerock","pac4j"],"answers":[{"tags":[],"owner":{"account_id":4817451,"reputation":403,"user_id":3889142,"display_name":"Jonas Heinisch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691522189,"creation_date":1691522189,"answer_id":76862612,"question_id":76855012,"body_markdown":"In OAuth2 words, your application is the Client and you are trying to obtain a Resource (some data) on behalf of the user from the Resource Server (API). The Access Token is proofing that the user allowed this access.\r\n\r\nWhat you typically do is pass the access token as a Bearer token to the API (cf. https://www.oauth.com/oauth2-servers/accessing-data/making-api-requests/).\r\n\r\nWhat the Resource Server then needs to do is verify the token (cf. https://www.oauth.com/oauth2-servers/the-resource-server/). It depends on the configuration of ForgeRock AM, how the access token is configured to look like. Most likely it is probably a referencial token (i.e. no signed JWT containing the content of the token). That means the token needs to be send to the ForgeRock AM Token Introspection API (cf. https://backstage.forgerock.com/docs/am/7/oauth2-guide/varlist-oauth2-introspect-endpoint.html):\r\n\r\n    $ curl \\\r\n    --request POST \\\r\n    --header &quot;Authorization: Basic ZGVtbzpDaDRuZzMxdA==&quot; \\\r\n    --data &quot;token=f9063e26-3a29-41ec-86de-1d0d68aa85e9&quot; \\\r\n    &quot;https://openam.example.com:8443/openam/oauth2/introspect&quot;\r\n    {\r\n        &quot;active&quot;: true,\r\n        &quot;scope&quot;: &quot;write&quot;,\r\n        &quot;client_id&quot;: &quot;myClient&quot;,\r\n        &quot;user_id&quot;: &quot;demo&quot;,\r\n        &quot;username&quot;: &quot;demo&quot;,\r\n        &quot;token_type&quot;: &quot;Bearer&quot;,\r\n        &quot;exp&quot;: 1419356238,\r\n        &quot;sub&quot;: &quot;demo&quot;,\r\n        &quot;iss&quot;: &quot;https://openam.example.com:8443/openam/oauth2&quot;\r\n        &quot;cnf&quot;: {\r\n            &quot;jwk&quot;: {\r\n                &quot;alg&quot;: &quot;RS512&quot;,\r\n                &quot;e&quot;: &quot;AQAB&quot;,\r\n                &quot;n&quot;: &quot;k7qLlj...G2oucQ&quot;,\r\n                &quot;kty&quot;: &quot;RSA&quot;,\r\n                &quot;use&quot;: &quot;sig&quot;,\r\n                &quot;kid&quot;: &quot;myJWK&quot;\r\n            },\r\n        &quot;auth_level&quot;: 0\r\n        }\r\n    }\r\n\r\nThe resulting body is giving the content of the token. Based on the content the Resource Server can decide if the client is authorized to access the information.","title":"Pac4J: Custom ForgeRock OAuth2 with UI and API","body":"<p>In OAuth2 words, your application is the Client and you are trying to obtain a Resource (some data) on behalf of the user from the Resource Server (API). The Access Token is proofing that the user allowed this access.</p>\n<p>What you typically do is pass the access token as a Bearer token to the API (cf. <a href=\"https://www.oauth.com/oauth2-servers/accessing-data/making-api-requests/\" rel=\"nofollow noreferrer\">https://www.oauth.com/oauth2-servers/accessing-data/making-api-requests/</a>).</p>\n<p>What the Resource Server then needs to do is verify the token (cf. <a href=\"https://www.oauth.com/oauth2-servers/the-resource-server/\" rel=\"nofollow noreferrer\">https://www.oauth.com/oauth2-servers/the-resource-server/</a>). It depends on the configuration of ForgeRock AM, how the access token is configured to look like. Most likely it is probably a referencial token (i.e. no signed JWT containing the content of the token). That means the token needs to be send to the ForgeRock AM Token Introspection API (cf. <a href=\"https://backstage.forgerock.com/docs/am/7/oauth2-guide/varlist-oauth2-introspect-endpoint.html\" rel=\"nofollow noreferrer\">https://backstage.forgerock.com/docs/am/7/oauth2-guide/varlist-oauth2-introspect-endpoint.html</a>):</p>\n<pre><code>$ curl \\\n--request POST \\\n--header &quot;Authorization: Basic ZGVtbzpDaDRuZzMxdA==&quot; \\\n--data &quot;token=f9063e26-3a29-41ec-86de-1d0d68aa85e9&quot; \\\n&quot;https://openam.example.com:8443/openam/oauth2/introspect&quot;\n{\n    &quot;active&quot;: true,\n    &quot;scope&quot;: &quot;write&quot;,\n    &quot;client_id&quot;: &quot;myClient&quot;,\n    &quot;user_id&quot;: &quot;demo&quot;,\n    &quot;username&quot;: &quot;demo&quot;,\n    &quot;token_type&quot;: &quot;Bearer&quot;,\n    &quot;exp&quot;: 1419356238,\n    &quot;sub&quot;: &quot;demo&quot;,\n    &quot;iss&quot;: &quot;https://openam.example.com:8443/openam/oauth2&quot;\n    &quot;cnf&quot;: {\n        &quot;jwk&quot;: {\n            &quot;alg&quot;: &quot;RS512&quot;,\n            &quot;e&quot;: &quot;AQAB&quot;,\n            &quot;n&quot;: &quot;k7qLlj...G2oucQ&quot;,\n            &quot;kty&quot;: &quot;RSA&quot;,\n            &quot;use&quot;: &quot;sig&quot;,\n            &quot;kid&quot;: &quot;myJWK&quot;\n        },\n    &quot;auth_level&quot;: 0\n    }\n}\n</code></pre>\n<p>The resulting body is giving the content of the token. Based on the content the Resource Server can decide if the client is authorized to access the information.</p>\n"}],"owner":{"account_id":235505,"reputation":10708,"user_id":502366,"display_name":"Melloware"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76862612,"answer_count":1,"score":0,"last_activity_date":1691522189,"creation_date":1691440410,"question_id":76855012,"body_markdown":"We use a custom product in house called https://www.forgerock.com/ ForgeRock and it supports Oauth2.  Following the Pac4J code base I was able to create a custom ForgeRock Client.\r\n\r\n```java\r\npublic class ForgeRockClient extends OAuth20Client {\r\n\r\n   public static final String DEFAULT_SCOPE = &quot;read write&quot;;\r\n\r\n   private final String baseUrl;\r\n\r\n   public ForgeRockClient(final String url, final String key, final String secret) {\r\n      setScope(DEFAULT_SCOPE);\r\n      setKey(key);\r\n      setSecret(secret);\r\n      this.baseUrl = url;\r\n   }\r\n\r\n   @Override\r\n   protected void internalInit(final boolean forceReinit) {\r\n      String tokenEndpoint = this.baseUrl + &quot;/oauth2/access_token&quot;;\r\n      String authorizeEndpoint = this.baseUrl + &quot;/oauth2/authorize&quot;;\r\n      String revokeEndpoint = this.baseUrl + &quot;/oauth2/revoke&quot;;\r\n      String userEndpoint = this.baseUrl + &quot;/oauth2/userinfo&quot;;\r\n      ForgeRockApi api = new ForgeRockApi(tokenEndpoint, authorizeEndpoint, revokeEndpoint);\r\n      configuration.setApi(api);\r\n      configuration.setProfileDefinition(new ForgeRockProfileDefinition(userEndpoint));\r\n      configuration.setWithState(true);\r\n      configuration.setTokenAsHeader(true);\r\n      defaultLogoutActionBuilder((ctx, session, profile, targetUrl) -&gt; Optional\r\n               .of(HttpActionHelper.buildRedirectUrlAction(ctx, this.baseUrl + &quot;/logout&quot;)));\r\n\r\n      super.internalInit(forceReinit);\r\n   }\r\n\r\n   public String getScope() {\r\n      return getConfiguration().getScope();\r\n   }\r\n\r\n   public void setScope(final String scope) {\r\n      getConfiguration().setScope(scope);\r\n   }\r\n}\r\n```\r\n\r\nThis is working properly and my UI now redirects to Forgerock, I login and it redirects back and I get my proper UserProfile.   Now my next part is the first thing our app does is then makes an API call to a REST Service and in our old SSO we forwarded the cookies and the REST Service would authenticate with ForeRock using that cookie.\r\n\r\nMy question is how using the `AccessToken` I have from my UI login can I submit to a REST API that I also control and want to verify the AccessToken is valid and get the information out of it.   I don&#39;t know if Pac4J has what I need to do this because most of the code I have seen is about OAuth2 indirect client for UI access.\r\n\r\nAny thoughts or help would be appreciated? I have seen others mention using `Authorization: Bearer &lt;Token&gt;` to send to the REST Service?\r\n\r\nSO far I have just been researching the issue and I can&#39;t seem to find a common consensus or answer and was hoping someone from Pac4J or other OAuth2 experts could shed some light on the problem?","title":"Pac4J: Custom ForgeRock OAuth2 with UI and API","body":"<p>We use a custom product in house called <a href=\"https://www.forgerock.com/\" rel=\"nofollow noreferrer\">https://www.forgerock.com/</a> ForgeRock and it supports Oauth2.  Following the Pac4J code base I was able to create a custom ForgeRock Client.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ForgeRockClient extends OAuth20Client {\n\n   public static final String DEFAULT_SCOPE = &quot;read write&quot;;\n\n   private final String baseUrl;\n\n   public ForgeRockClient(final String url, final String key, final String secret) {\n      setScope(DEFAULT_SCOPE);\n      setKey(key);\n      setSecret(secret);\n      this.baseUrl = url;\n   }\n\n   @Override\n   protected void internalInit(final boolean forceReinit) {\n      String tokenEndpoint = this.baseUrl + &quot;/oauth2/access_token&quot;;\n      String authorizeEndpoint = this.baseUrl + &quot;/oauth2/authorize&quot;;\n      String revokeEndpoint = this.baseUrl + &quot;/oauth2/revoke&quot;;\n      String userEndpoint = this.baseUrl + &quot;/oauth2/userinfo&quot;;\n      ForgeRockApi api = new ForgeRockApi(tokenEndpoint, authorizeEndpoint, revokeEndpoint);\n      configuration.setApi(api);\n      configuration.setProfileDefinition(new ForgeRockProfileDefinition(userEndpoint));\n      configuration.setWithState(true);\n      configuration.setTokenAsHeader(true);\n      defaultLogoutActionBuilder((ctx, session, profile, targetUrl) -&gt; Optional\n               .of(HttpActionHelper.buildRedirectUrlAction(ctx, this.baseUrl + &quot;/logout&quot;)));\n\n      super.internalInit(forceReinit);\n   }\n\n   public String getScope() {\n      return getConfiguration().getScope();\n   }\n\n   public void setScope(final String scope) {\n      getConfiguration().setScope(scope);\n   }\n}\n</code></pre>\n<p>This is working properly and my UI now redirects to Forgerock, I login and it redirects back and I get my proper UserProfile.   Now my next part is the first thing our app does is then makes an API call to a REST Service and in our old SSO we forwarded the cookies and the REST Service would authenticate with ForeRock using that cookie.</p>\n<p>My question is how using the <code>AccessToken</code> I have from my UI login can I submit to a REST API that I also control and want to verify the AccessToken is valid and get the information out of it.   I don't know if Pac4J has what I need to do this because most of the code I have seen is about OAuth2 indirect client for UI access.</p>\n<p>Any thoughts or help would be appreciated? I have seen others mention using <code>Authorization: Bearer &lt;Token&gt;</code> to send to the REST Service?</p>\n<p>SO far I have just been researching the issue and I can't seem to find a common consensus or answer and was hoping someone from Pac4J or other OAuth2 experts could shed some light on the problem?</p>\n"},{"tags":["java","spring","testing","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1694951123,"post_id":76862516,"comment_id":135956289,"body_markdown":"Why are you doing `userRepository.save(new User(user.getName()))` instead of `userRepository.save(user)`? Is there a reason for it?","body":"Why are you doing <code>userRepository.save(new User(user.getName()))</code> instead of <code>userRepository.save(user)</code>? Is there a reason for it?"}],"answers":[{"tags":[],"owner":{"account_id":18669557,"reputation":640,"user_id":13608717,"display_name":"Daniel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691522104,"creation_date":1691522104,"answer_id":76862604,"question_id":76862516,"body_markdown":"In line    `User _user = userRepository.save(new User(user.getName()));` new instance of User is created.\r\n\r\nMostly likely there is no custom equals implementation in User class - and as by default it would return false for 2 different instances, even if they contain same data.\r\n\r\n3 ways to solve:\r\n 1. pass user as-is into repository.save, without creating new instance\r\n 2. define equals on User class to be equals on name field\r\n 3. Update assertion to capture (using ArgumentCaptor) and then verify captured object\r\n\r\n","title":"Strange Mockito verify fail","body":"<p>In line    <code>User _user = userRepository.save(new User(user.getName()));</code> new instance of User is created.</p>\n<p>Mostly likely there is no custom equals implementation in User class - and as by default it would return false for 2 different instances, even if they contain same data.</p>\n<p>3 ways to solve:</p>\n<ol>\n<li>pass user as-is into repository.save, without creating new instance</li>\n<li>define equals on User class to be equals on name field</li>\n<li>Update assertion to capture (using ArgumentCaptor) and then verify captured object</li>\n</ol>\n"}],"owner":{"account_id":22155755,"reputation":13,"user_id":16403532,"display_name":"Jonathan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76862604,"answer_count":1,"score":0,"last_activity_date":1691522104,"creation_date":1691521391,"question_id":76862516,"body_markdown":"I am testing my java app with Mockito, all good until this strange fail test.\r\n[![enter image description here](https://i.stack.imgur.com/ft3C6.png)](https://i.stack.imgur.com/ft3C6.png)\r\nAs you can see there is an extra blank space at the end of the line.\r\n\r\nThis is my createUser method.\r\n```\r\n    @PostMapping(&quot;/users&quot;)\r\n    public ResponseEntity&lt;User&gt; createUser(@RequestBody User user) {\r\n        try {\r\n            User _user = userRepository.save(new User(user.getName()));\r\n            return new ResponseEntity&lt;&gt;(_user, HttpStatus.CREATED);\r\n        }\r\n        catch (Exception e) {\r\n            return new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\r\n        }\r\n    }\r\n\r\n```\r\n\r\nAnd my UserRepository :\r\n\r\n```\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n    List&lt;User&gt; findAll();\r\n    List&lt;User&gt; findByName(String name);\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI tried to search for this but nothing related found, if someone can help me with a related post.","title":"Strange Mockito verify fail","body":"<p>I am testing my java app with Mockito, all good until this strange fail test.\n<a href=\"https://i.stack.imgur.com/ft3C6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ft3C6.png\" alt=\"enter image description here\" /></a>\nAs you can see there is an extra blank space at the end of the line.</p>\n<p>This is my createUser method.</p>\n<pre><code>    @PostMapping(&quot;/users&quot;)\n    public ResponseEntity&lt;User&gt; createUser(@RequestBody User user) {\n        try {\n            User _user = userRepository.save(new User(user.getName()));\n            return new ResponseEntity&lt;&gt;(_user, HttpStatus.CREATED);\n        }\n        catch (Exception e) {\n            return new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n    }\n\n</code></pre>\n<p>And my UserRepository :</p>\n<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n    List&lt;User&gt; findAll();\n    List&lt;User&gt; findByName(String name);\n}\n</code></pre>\n<p>I tried to search for this but nothing related found, if someone can help me with a related post.</p>\n"},{"tags":["java","sqlite","hibernate"],"answers":[{"tags":[],"owner":{"account_id":469126,"reputation":1741,"user_id":875526,"display_name":"Seb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1616605882,"creation_date":1616605882,"answer_id":66785975,"question_id":66779817,"body_markdown":"Not sure why this is only barely documented, but it turned out there is an property in the sqlite-jbdc driver, that controls this behaviour:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iAYkv.png\r\n\r\nTherefore the solution for my problem was setting **data_class** property to **TEXT** in hibernate-properties:\r\n\r\n    properties.setProperty(&quot;hibernate.connection.date_class&quot;, &quot;TEXT&quot;);\r\n\r\n","title":"Persist LocalDateTime as ISO-String in sqlite-db using hibernate","body":"<p>Not sure why this is only barely documented, but it turned out there is an property in the sqlite-jbdc driver, that controls this behaviour:\n<a href=\"https://i.stack.imgur.com/iAYkv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iAYkv.png\" alt=\"enter image description here\" /></a></p>\n<p>Therefore the solution for my problem was setting <strong>data_class</strong> property to <strong>TEXT</strong> in hibernate-properties:</p>\n<pre><code>properties.setProperty(&quot;hibernate.connection.date_class&quot;, &quot;TEXT&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7577792,"reputation":1,"user_id":5749547,"display_name":"Vince"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691521813,"creation_date":1691521813,"answer_id":76862563,"question_id":66779817,"body_markdown":"As of 2023, using Hibernate 5 with SpringBoot 2.7.9 and the SQLite JDBC driver 3.42.0.0, I couldn&#39;t set this through Hibernate. Instead, I used the pragma directives in the connection string: `jdbc:sqlite:file:mydb.db?date_class=TEXT`. \r\n\r\nEither Hikari doesn&#39;t use them, or Hibernate doesn&#39;t pass them. The pragma parameter works fine. The value is case insensitive as SQLite converts it to uppercase. [Reference][1]\r\n\r\n\r\n  [1]: https://github.com/xerial/sqlite-jdbc/blob/14e5eb81f21aa1554b3e68c543ee528213b8140c/src/main/java/org/sqlite/SQLiteConnectionConfig.java#L25","title":"Persist LocalDateTime as ISO-String in sqlite-db using hibernate","body":"<p>As of 2023, using Hibernate 5 with SpringBoot 2.7.9 and the SQLite JDBC driver 3.42.0.0, I couldn't set this through Hibernate. Instead, I used the pragma directives in the connection string: <code>jdbc:sqlite:file:mydb.db?date_class=TEXT</code>.</p>\n<p>Either Hikari doesn't use them, or Hibernate doesn't pass them. The pragma parameter works fine. The value is case insensitive as SQLite converts it to uppercase. <a href=\"https://github.com/xerial/sqlite-jdbc/blob/14e5eb81f21aa1554b3e68c543ee528213b8140c/src/main/java/org/sqlite/SQLiteConnectionConfig.java#L25\" rel=\"nofollow noreferrer\">Reference</a></p>\n"}],"owner":{"account_id":469126,"reputation":1741,"user_id":875526,"display_name":"Seb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":612,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66785975,"answer_count":2,"score":0,"last_activity_date":1691521813,"creation_date":1616584307,"question_id":66779817,"body_markdown":"I have a Sqlite-DB with the following table:\r\n\r\n    CREATE TABLE foo (id bigint not null, from datetime, to datetime, (...) primary key (id));\r\n\r\nCorresponding hibernate-entity is:\r\n\r\n    @Entity\r\n    @Table(name = &quot;foo&quot;)\r\n    public class Foo implements Serializable {\r\n    \r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        private Long id;\r\n        @Column(name = &quot;from&quot;)\r\n        private LocalDateTime from;\r\n        @Column(name = &quot;to&quot;)\r\n        private LocalDateTime to;\r\n        ...\r\n    \r\n    }\r\n\r\nWhen persisting such an entity, hibernate always inserts the LocalDateTime-fields as int (unix timestamp).\r\n\r\nIs there any way to have hibernate inserting these timestamps as ISO-Strings? According to [sqlite-documentation][1], sqlite is capable of storing dates in one the following formats, so it is at least technically possible to do so:\r\n\r\n&gt; SQLite does not have a storage class set aside for storing dates\r\n&gt; and/or times. Instead, the built-in Date And Time Functions of SQLite\r\n&gt; are capable of storing dates and times as TEXT, REAL, or INTEGER\r\n&gt; values:\r\n&gt; \r\n&gt; TEXT as ISO8601 strings (&quot;YYYY-MM-DD HH:MM:SS.SSS&quot;).\r\n&gt; \r\n&gt; \r\n&gt; REAL as Julian day numbers, the number of days since noon in Greenwich\r\n&gt; on November 24, 4714 B.C. according to the proleptic Gregorian\r\n&gt; calendar.\r\n&gt; \r\n&gt; \r\n&gt; INTEGER as Unix Time, the number of seconds since 1970-01-01 00:00:00\r\n&gt; UTC.\r\n\r\nI already did try to override SqliteDialect, but it did not change anything:\r\n\r\n    public class MySqliteDialect extends SQLiteDialect {\r\n    \r\n        public MySqliteDialect() {\r\n            super();\r\n            registerColumnType( Types.TIMESTAMP, &quot;text&quot; );\r\n        }\r\n    }\r\n\r\n**tl;dr: How can I store LocalDateTime fields from entity in datetime-column in sqlite-db as ISO-string?**\r\n\r\n\r\n  [1]: https://www.sqlite.org/datatype3.html","title":"Persist LocalDateTime as ISO-String in sqlite-db using hibernate","body":"<p>I have a Sqlite-DB with the following table:</p>\n<pre><code>CREATE TABLE foo (id bigint not null, from datetime, to datetime, (...) primary key (id));\n</code></pre>\n<p>Corresponding hibernate-entity is:</p>\n<pre><code>@Entity\n@Table(name = &quot;foo&quot;)\npublic class Foo implements Serializable {\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    private Long id;\n    @Column(name = &quot;from&quot;)\n    private LocalDateTime from;\n    @Column(name = &quot;to&quot;)\n    private LocalDateTime to;\n    ...\n\n}\n</code></pre>\n<p>When persisting such an entity, hibernate always inserts the LocalDateTime-fields as int (unix timestamp).</p>\n<p>Is there any way to have hibernate inserting these timestamps as ISO-Strings? According to <a href=\"https://www.sqlite.org/datatype3.html\" rel=\"nofollow noreferrer\">sqlite-documentation</a>, sqlite is capable of storing dates in one the following formats, so it is at least technically possible to do so:</p>\n<blockquote>\n<p>SQLite does not have a storage class set aside for storing dates\nand/or times. Instead, the built-in Date And Time Functions of SQLite\nare capable of storing dates and times as TEXT, REAL, or INTEGER\nvalues:</p>\n<p>TEXT as ISO8601 strings (&quot;YYYY-MM-DD HH:MM:SS.SSS&quot;).</p>\n<p>REAL as Julian day numbers, the number of days since noon in Greenwich\non November 24, 4714 B.C. according to the proleptic Gregorian\ncalendar.</p>\n<p>INTEGER as Unix Time, the number of seconds since 1970-01-01 00:00:00\nUTC.</p>\n</blockquote>\n<p>I already did try to override SqliteDialect, but it did not change anything:</p>\n<pre><code>public class MySqliteDialect extends SQLiteDialect {\n\n    public MySqliteDialect() {\n        super();\n        registerColumnType( Types.TIMESTAMP, &quot;text&quot; );\n    }\n}\n</code></pre>\n<p><strong>tl;dr: How can I store LocalDateTime fields from entity in datetime-column in sqlite-db as ISO-string?</strong></p>\n"},{"tags":["java","spring-boot","dependency-injection","autowired"],"answers":[{"tags":[],"owner":{"account_id":1968635,"reputation":21509,"user_id":1768226,"accept_rate":80,"display_name":"shazin"},"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1566815710,"creation_date":1566815710,"answer_id":57656242,"question_id":57656119,"body_markdown":"You can use `@Autowired(required=false)` and null check in `stopScheduler` method.\r\n\r\n     @Autowired(required=false)\r\n     private TestSchedulderNew testSchedulderNew;\r\n    \r\n     @GetMapping(value = &quot;/stopScheduler&quot;)\r\n     public String stopSchedule() {\r\n         if (testSchedulderNew != null) {\r\n             postProcessor.postProcessBeforeDestruction(testSchedulderNew, \r\n              SCHEDULED_TASKS);\r\n             return &quot;OK&quot;;\r\n         }\r\n         return &quot;NOT_OK&quot;;\r\n     }","title":"How to Autowire conditionally in spring boot?","body":"<p>You can use <code>@Autowired(required=false)</code> and null check in <code>stopScheduler</code> method.</p>\n\n<pre><code> @Autowired(required=false)\n private TestSchedulderNew testSchedulderNew;\n\n @GetMapping(value = \"/stopScheduler\")\n public String stopSchedule() {\n     if (testSchedulderNew != null) {\n         postProcessor.postProcessBeforeDestruction(testSchedulderNew, \n          SCHEDULED_TASKS);\n         return \"OK\";\n     }\n     return \"NOT_OK\";\n }\n</code></pre>\n"}],"owner":{"account_id":1919649,"reputation":335,"user_id":1731485,"display_name":"Rajesh Khore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21665,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":57656242,"answer_count":1,"score":22,"last_activity_date":1691521343,"creation_date":1566815218,"question_id":57656119,"body_markdown":"I have created one scheduler class\r\n\r\n    public class TestSchedulderNew {\r\n\r\n    @Scheduled(fixedDelay = 3000)\r\n    public void fixedRateJob1() {\r\n    System.out.println(&quot;Job 1 running&quot;);\r\n    }\r\n\r\n    @Scheduled(fixedDelay = 3000)\r\n    public void fixedRateJob2() {\r\n    System.out.println(&quot;Job 2 running&quot;);\r\n    }\r\n    }\r\n\r\nIn the configuration, I have put @ConditionalOnProperty annotation to enable this on conditional purpose.\r\n\r\n     @Bean\r\n    @ConditionalOnProperty(value = &quot;jobs.enabled&quot;)\r\n    public TestSchedulderNew testSchedulderNew() {\r\n    return new TestSchedulderNew();\r\n    }\r\n\r\nNow in the controller, I have created &quot;stopScheduler&quot; method to stop this scheduler, in this controller I have autowired \r\nTestSchedulderNew class\r\n\r\n     @RestController\r\n     @RequestMapping(&quot;/api&quot;)\r\n     public class TestCont {\r\n\r\n    private static final String SCHEDULED_TASKS = &quot;testSchedulderNew&quot;;\r\n\r\n     @Autowired\r\n     private ScheduledAnnotationBeanPostProcessor postProcessor;\t/]\r\n\r\n     @Autowired\r\n     private TestSchedulderNew testSchedulderNew;\r\n\r\n\r\n     @GetMapping(value = &quot;/stopScheduler&quot;)\r\n     public String stopSchedule(){\r\n      postProcessor.postProcessBeforeDestruction(testSchedulderNew, \r\n       SCHEDULED_TASKS);\r\n      return &quot;OK&quot;;\r\n      }\r\n     }     \r\n\r\nNow the problem is if the conditional property is false then I get the below exception\r\n\r\n       Field testSchedulderNew in com.sbill.app.web.rest.TestCont required a bean of type &#39;com.sbill.app.schedulerJob.TestSchedulderNew\r\n\r\n\r\nIn case of true everything works fine,\r\n\r\nDo we have any option to solve this?","title":"How to Autowire conditionally in spring boot?","body":"<p>I have created one scheduler class</p>\n<pre><code>public class TestSchedulderNew {\n\n@Scheduled(fixedDelay = 3000)\npublic void fixedRateJob1() {\nSystem.out.println(&quot;Job 1 running&quot;);\n}\n\n@Scheduled(fixedDelay = 3000)\npublic void fixedRateJob2() {\nSystem.out.println(&quot;Job 2 running&quot;);\n}\n}\n</code></pre>\n<p>In the configuration, I have put @ConditionalOnProperty annotation to enable this on conditional purpose.</p>\n<pre><code> @Bean\n@ConditionalOnProperty(value = &quot;jobs.enabled&quot;)\npublic TestSchedulderNew testSchedulderNew() {\nreturn new TestSchedulderNew();\n}\n</code></pre>\n<p>Now in the controller, I have created &quot;stopScheduler&quot; method to stop this scheduler, in this controller I have autowired\nTestSchedulderNew class</p>\n<pre><code> @RestController\n @RequestMapping(&quot;/api&quot;)\n public class TestCont {\n\nprivate static final String SCHEDULED_TASKS = &quot;testSchedulderNew&quot;;\n\n @Autowired\n private ScheduledAnnotationBeanPostProcessor postProcessor;    /]\n\n @Autowired\n private TestSchedulderNew testSchedulderNew;\n\n\n @GetMapping(value = &quot;/stopScheduler&quot;)\n public String stopSchedule(){\n  postProcessor.postProcessBeforeDestruction(testSchedulderNew, \n   SCHEDULED_TASKS);\n  return &quot;OK&quot;;\n  }\n }     \n</code></pre>\n<p>Now the problem is if the conditional property is false then I get the below exception</p>\n<pre><code>   Field testSchedulderNew in com.sbill.app.web.rest.TestCont required a bean of type 'com.sbill.app.schedulerJob.TestSchedulderNew\n</code></pre>\n<p>In case of true everything works fine,</p>\n<p>Do we have any option to solve this?</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot","internationalization"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1532601224,"post_id":51535717,"comment_id":90041003,"body_markdown":"Which version are you using?","body":"Which version are you using?"},{"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"score":0,"creation_date":1532601347,"post_id":51535717,"comment_id":90041083,"body_markdown":"forgot to mention, it is `2.0.3.RELEASE`","body":"forgot to mention, it is <code>2.0.3.RELEASE</code>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1532601984,"post_id":51535717,"comment_id":90041441,"body_markdown":"Also what doesn&#39;t work exactly?","body":"Also what doesn&#39;t work exactly?"},{"owner":{"account_id":8628975,"reputation":1046,"user_id":6461268,"display_name":"Dinesh"},"score":0,"creation_date":1532603514,"post_id":51535717,"comment_id":90042339,"body_markdown":"Can you please give the exception or error you are getting","body":"Can you please give the exception or error you are getting"},{"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"score":0,"creation_date":1532656418,"post_id":51535717,"comment_id":90066909,"body_markdown":"updated the error message that I encountered.","body":"updated the error message that I encountered."},{"owner":{"account_id":2345906,"reputation":2356,"user_id":2056178,"display_name":"Eugene"},"score":0,"creation_date":1555212908,"post_id":51535717,"comment_id":98029549,"body_markdown":"For me, adding locale to basename solved the problem. E.g. `spring.messages.basename=my-messages_en`. By the way, `classpath:` prefix is useless.","body":"For me, adding locale to basename solved the problem. E.g. <code>spring.messages.basename=my-messages_en</code>. By the way, <code>classpath:</code> prefix is useless."}],"answers":[{"tags":[],"owner":{"account_id":17975599,"reputation":85,"user_id":14634474,"display_name":"Даниил Дмитроченков"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605294282,"creation_date":1605294282,"answer_id":64826629,"question_id":51535717,"body_markdown":"try use `#` instead `$` - `&lt;spring:message code=&quot;#{param.error}&quot; /&gt;`","title":"Spring boot MessageSource not working in application.properties","body":"<p>try use <code>#</code> instead <code>$</code> - <code>&lt;spring:message code=&quot;#{param.error}&quot; /&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":11382552,"reputation":126,"user_id":8345076,"display_name":"Ehtesham Siddiquie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637517843,"creation_date":1637517843,"answer_id":70057268,"question_id":51535717,"body_markdown":"make sure you have default messages.properties in addition to the locale specific messages.properties","title":"Spring boot MessageSource not working in application.properties","body":"<p>make sure you have default messages.properties in addition to the locale specific messages.properties</p>\n"},{"tags":[],"owner":{"account_id":10424858,"reputation":179,"user_id":7686473,"accept_rate":100,"display_name":"Alterant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691520854,"creation_date":1691520854,"answer_id":76862458,"question_id":51535717,"body_markdown":"spring.messages.basename should be without leading slash:\r\n\r\n    spring.messages.basename=locale/normal/message,locale/validation/message","title":"Spring boot MessageSource not working in application.properties","body":"<p>spring.messages.basename should be without leading slash:</p>\n<pre><code>spring.messages.basename=locale/normal/message,locale/validation/message\n</code></pre>\n"}],"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3571,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1691520854,"creation_date":1532598003,"question_id":51535717,"body_markdown":"I am converting spring MVC to spring boot (2.0.3.RELEASE) project.\r\n\r\nI am using this in spring boot, it works:\r\n\r\n    @Bean\r\n    public MessageSource messageSource() {\r\n    \tReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\r\n    \tmessageSource.setBasenames(&quot;classpath:/locale/normal/message&quot;, &quot;classpath:/locale/validation/message&quot;);\r\n    \tmessageSource.setDefaultEncoding(&quot;UTF-8&quot;);\r\n    \treturn messageSource;\r\n    }\r\n\r\nI try to use spring boot auto-configuration (via `application.properties`) as below (remove the manual bean configuration above):\r\n\r\n    spring.messages.basename=classpath:/locale/normal/message,classpath:/locale/validation/message\r\n\r\nI tried below, it doesn&#39;t work too:\r\n\r\n    spring.messages.basename=/locale/normal/message,/locale/validation/message\r\n\r\n\r\nI read their [documentation][1] below:\r\n\r\n    # INTERNATIONALIZATION (MessageSourceProperties)\r\n    spring.messages.always-use-message-format=false # Whether to always apply the MessageFormat rules, parsing even messages without arguments.\r\n    spring.messages.basename=messages # Comma-separated list of basenames (essentially a fully-qualified classpath location), each following the ResourceBundle convention with relaxed support for slash based locations.\r\n    spring.messages.cache-duration= # Loaded resource bundle files cache duration. When not set, bundles are cached forever. If a duration suffix is not specified, seconds will be used.\r\n    spring.messages.encoding=UTF-8 # Message bundles encoding.\r\n    spring.messages.fallback-to-system-locale=true # Whether to fall back to the system Locale if no files for a specific Locale have been found.\r\n    spring.messages.use-code-as-default-message=false # Whether to use the message code as the default message instead of throwing a &quot;NoSuchMessageException&quot;. Recommended during development only.\r\n\r\nI put the message properties file in the classpath:\r\n\r\n    src\\main\\resources\\locale\\normal\r\n    src\\main\\resources\\locale\\validation\r\n\r\nI try a lot of combination, but it doesn&#39;t work, why?\r\n\r\nThe error I encounter :\r\n\r\n    javax.servlet.jsp.JspTagException: No message found under code &#39;login.timeout&#39; for locale &#39;en&#39;.\r\n\r\n(I am pretty sure the message code is in my properties file for all locale.)\r\n\r\nI am using Spring tag to load the localized message:\r\n\r\n    &lt;spring:message code=&quot;${param.error}&quot; /&gt;\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html","title":"Spring boot MessageSource not working in application.properties","body":"<p>I am converting spring MVC to spring boot (2.0.3.RELEASE) project.</p>\n\n<p>I am using this in spring boot, it works:</p>\n\n<pre><code>@Bean\npublic MessageSource messageSource() {\n    ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\n    messageSource.setBasenames(\"classpath:/locale/normal/message\", \"classpath:/locale/validation/message\");\n    messageSource.setDefaultEncoding(\"UTF-8\");\n    return messageSource;\n}\n</code></pre>\n\n<p>I try to use spring boot auto-configuration (via <code>application.properties</code>) as below (remove the manual bean configuration above):</p>\n\n<pre><code>spring.messages.basename=classpath:/locale/normal/message,classpath:/locale/validation/message\n</code></pre>\n\n<p>I tried below, it doesn't work too:</p>\n\n<pre><code>spring.messages.basename=/locale/normal/message,/locale/validation/message\n</code></pre>\n\n<p>I read their <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">documentation</a> below:</p>\n\n<pre><code># INTERNATIONALIZATION (MessageSourceProperties)\nspring.messages.always-use-message-format=false # Whether to always apply the MessageFormat rules, parsing even messages without arguments.\nspring.messages.basename=messages # Comma-separated list of basenames (essentially a fully-qualified classpath location), each following the ResourceBundle convention with relaxed support for slash based locations.\nspring.messages.cache-duration= # Loaded resource bundle files cache duration. When not set, bundles are cached forever. If a duration suffix is not specified, seconds will be used.\nspring.messages.encoding=UTF-8 # Message bundles encoding.\nspring.messages.fallback-to-system-locale=true # Whether to fall back to the system Locale if no files for a specific Locale have been found.\nspring.messages.use-code-as-default-message=false # Whether to use the message code as the default message instead of throwing a \"NoSuchMessageException\". Recommended during development only.\n</code></pre>\n\n<p>I put the message properties file in the classpath:</p>\n\n<pre><code>src\\main\\resources\\locale\\normal\nsrc\\main\\resources\\locale\\validation\n</code></pre>\n\n<p>I try a lot of combination, but it doesn't work, why?</p>\n\n<p>The error I encounter :</p>\n\n<pre><code>javax.servlet.jsp.JspTagException: No message found under code 'login.timeout' for locale 'en'.\n</code></pre>\n\n<p>(I am pretty sure the message code is in my properties file for all locale.)</p>\n\n<p>I am using Spring tag to load the localized message:</p>\n\n<pre><code>&lt;spring:message code=\"${param.error}\" /&gt;\n</code></pre>\n"},{"tags":["java","user-interface","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691507281,"post_id":76860798,"comment_id":135499478,"body_markdown":"Probably off-topic, but Lombic `@Getter` etc do not work correctly with JavaFX properties (they will not create the correct methods). Implement the JavaFX Property pattern directly in code (your IDE may have ways to generate the code automatically for you).","body":"Probably off-topic, but Lombic <code>@Getter</code> etc do not work correctly with JavaFX properties (they will not create the correct methods). Implement the JavaFX Property pattern directly in code (your IDE may have ways to generate the code automatically for you)."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691507498,"post_id":76860798,"comment_id":135499533,"body_markdown":"What is `AbstractAnimationTimer`? This is not a JavaFX library class.","body":"What is <code>AbstractAnimationTimer</code>? This is not a JavaFX library class."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1691508125,"post_id":76860798,"comment_id":135499709,"body_markdown":"Why the calls to `Platform.runLater(...)` and the `AtomicInteger`s, etc? I don&#39;t see any multithreading here.  Everything in the code you posted is already being called on the FX Application Thread.","body":"Why the calls to <code>Platform.runLater(...)</code> and the <code>AtomicInteger</code>s, etc? I don&#39;t see any multithreading here.  Everything in the code you posted is already being called on the FX Application Thread."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691508260,"post_id":76860798,"comment_id":135499745,"body_markdown":"What do you mean by your comment `// This is executing constantly`?","body":"What do you mean by your comment <code>&#47;&#47; This is executing constantly</code>?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691508332,"post_id":76860798,"comment_id":135499765,"body_markdown":"I just don&#39;t think there is anywhere near enough information in the question to help diagnose the issue. The obvious guess would be that the delay is coming from the `if (shouldRun(now))` clause, which seems to explicitly delay movement. But there&#39;s no way to tell because you haven&#39;t posted that method. You need to create and post a [mre] that demonstrates the issue.","body":"I just don&#39;t think there is anywhere near enough information in the question to help diagnose the issue. The obvious guess would be that the delay is coming from the <code>if (shouldRun(now))</code> clause, which seems to explicitly delay movement. But there&#39;s no way to tell because you haven&#39;t posted that method. You need to create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the issue."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691511969,"post_id":76860798,"comment_id":135500534,"body_markdown":"That said... I don&#39;t quite understand your strategy for movement here. When a key is pressed, I&#39;m guessing `deltaX` or `deltaY` are set by the key event handler. But on the next frame rendering you set those back to zero (in the animation timer). So there will be a very small movement for *each* key press. What you want is smooth movement *while the key is down*. So I think what you are seeing is multiple small movements from the system keyboard repeat. The lag is the delay from keyboard repeat which is deliberately built in at the system level.","body":"That said... I don&#39;t quite understand your strategy for movement here. When a key is pressed, I&#39;m guessing <code>deltaX</code> or <code>deltaY</code> are set by the key event handler. But on the next frame rendering you set those back to zero (in the animation timer). So there will be a very small movement for <i>each</i> key press. What you want is smooth movement <i>while the key is down</i>. So I think what you are seeing is multiple small movements from the system keyboard repeat. The lag is the delay from keyboard repeat which is deliberately built in at the system level."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691512074,"post_id":76860798,"comment_id":135500554,"body_markdown":"Basically, get rid of everything that is not related to movement, including the sprite animation. (Probably by writing an application entirely from scratch.) Just move a shape around a pane using the basic strategy you have here. I think you will see the same result. Then post that as a [mre].","body":"Basically, get rid of everything that is not related to movement, including the sprite animation. (Probably by writing an application entirely from scratch.) Just move a shape around a pane using the basic strategy you have here. I think you will see the same result. Then post that as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"score":0,"creation_date":1691513268,"post_id":76860798,"comment_id":135500755,"body_markdown":"@James_D I have updated the question including the AbstractAnimationTimer code. shouldRun() is a typical limiting method so the Animation doesn&#39;t execute 30k times per second. Removing the method call entirely doesn&#39;t correct the issue but it shouldn&#39;t anyway. The method is updating the sprite which is working as expected and I think is not relevant for the issue.","body":"@James_D I have updated the question including the AbstractAnimationTimer code. shouldRun() is a typical limiting method so the Animation doesn&#39;t execute 30k times per second. Removing the method call entirely doesn&#39;t correct the issue but it shouldn&#39;t anyway. The method is updating the sprite which is working as expected and I think is not relevant for the issue."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691514019,"post_id":76860798,"comment_id":135500887,"body_markdown":"Please create a [mre] as requested.","body":"Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as requested."},{"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"score":0,"creation_date":1691515078,"post_id":76860798,"comment_id":135501087,"body_markdown":"@James_D Added reproducible example. On this example I can also see that the Rectangle &quot;lags&quot; behind a bit at start. I think it may be caused by what you mentioned earlier, `So I think what you are seeing is multiple small movements from the system keyboard repeat. The lag is the delay from keyboard repeat which is deliberately built in at the system level.`. How do I fix that?","body":"@James_D Added reproducible example. On this example I can also see that the Rectangle &quot;lags&quot; behind a bit at start. I think it may be caused by what you mentioned earlier, <code>So I think what you are seeing is multiple small movements from the system keyboard repeat. The lag is the delay from keyboard repeat which is deliberately built in at the system level.</code>. How do I fix that?"},{"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"score":1,"creation_date":1691516060,"post_id":76860798,"comment_id":135501237,"body_markdown":"I think I see the issue now. If I modify the code as following for a condition                     `if (KeyCode.UP.equals(keyEvent.getCode())) addTop = true;` and then on the AnimationTimer I do this `if (addTop)  yDelta -= 10;` then the animation becomes much smoother. If you can post an answer to this question so that I can approve it along with an explanation of _why_ this is happening I will be glad. Thanks for your help.","body":"I think I see the issue now. If I modify the code as following for a condition                     <code>if (KeyCode.UP.equals(keyEvent.getCode())) addTop = true;</code> and then on the AnimationTimer I do this <code>if (addTop)  yDelta -= 10;</code> then the animation becomes much smoother. If you can post an answer to this question so that I can approve it along with an explanation of <i>why</i> this is happening I will be glad. Thanks for your help."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1691517144,"post_id":76860798,"comment_id":135501430,"body_markdown":"As others have said, the use of volatile, AtomicInteger, and shouldRun seems suspect.  It implies you may be running your own animation loop (possibly even as a spin loop) which you should not do.  No loops are needed to perform your animation, and you should not need any additional threads.","body":"As others have said, the use of volatile, AtomicInteger, and shouldRun seems suspect.  It implies you may be running your own animation loop (possibly even as a spin loop) which you should not do.  No loops are needed to perform your animation, and you should not need any additional threads."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691519190,"post_id":76860798,"comment_id":135501783,"body_markdown":"I don&#39;t know what `playerEntity.getRunImages()` and `playerEntity.getIdleImages()` do.  I assume that they get a list of cached, preloaded images rather than loading new images each time.  If that is not the case, then that could be another source of delay.","body":"I don&#39;t know what <code>playerEntity.getRunImages()</code> and <code>playerEntity.getIdleImages()</code> do.  I assume that they get a list of cached, preloaded images rather than loading new images each time.  If that is not the case, then that could be another source of delay."},{"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"score":1,"creation_date":1691535204,"post_id":76860798,"comment_id":135504191,"body_markdown":"@jewelsea Correct, those methods are simple getters that are retrieving pre-loaded assets. The issue with my approach is explained clearly by James D answer.","body":"@jewelsea Correct, those methods are simple getters that are retrieving pre-loaded assets. The issue with my approach is explained clearly by James D answer."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691520308,"creation_date":1691516444,"answer_id":76861995,"question_id":76860798,"body_markdown":"Your animation timer sets `deltaX` and `deltaY` back to zero when it uses them:\r\n\r\n        new AnimationTimer() {\r\n            @Override\r\n            public void handle(long now) {\r\n                // This is executing constantly, I know of the implications but it&#39;s good for now\r\n                int xDelta = xDeltaCounter.getAndSet(0);\r\n                if (xDelta != 0) {\r\n                    rect.setLayoutX(rect.getLayoutX() + xDelta);\r\n                }\r\n                int yDelta = yDeltaCounter.getAndSet(0);\r\n                if (yDelta != 0) {\r\n                    rect.setLayoutY(rect.getLayoutY() + yDelta);\r\n                }\r\n            }\r\n        }.start();\r\n\r\nThey will only be made non-zero again when the key listener is invoked, i.e. when the appropriate keys are pressed again. Consequently, the rectangle moves 10 pixels in the appropriate direction *for each key press*. \r\n\r\nWhat you really want is for it to move continuously *while the key is held down*. \r\n\r\nThe reason it appears to move repeatedly is because of the operating system&#39;s keyboard repeat, which sends multiple key press events if a key is held down. There is a delay on this, which is why you see a delay before the rectangle starts repeatedly moving. (If you observe closely, you will see one isolated movement when the key is first pressed, then the delay, then the repeated movement.) You&#39;ll also notice the movement is not smooth, because it is moving in 10 pixel increments at discrete times (which are determined by the operating system, so it will move at different speeds on different systems).\r\n\r\nThe correct strategy for this is simply to keep track of which keys are down, and then to calculate the amount of horizontal and vertical movement in the animation timer depending on those keys. You probably want to make the amount of movement dependent on the amount of time since the last animation frame, so that you can accurately control the speed.\r\n\r\nNote that since everything is on the same thread, there is no need at all for `AtomicInteger` etc.\r\n\r\nHere is a working solution that implements these ideas:\r\n\r\n\r\n    import javafx.animation.AnimationTimer;\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Point2D;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.input.KeyCode;\r\n    import javafx.scene.layout.AnchorPane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    public class Main extends Application {\r\n    \r\n        private final Set&lt;KeyCode&gt; keysPressed = new HashSet&lt;&gt;();\r\n        private static final double SPEED = 200.0 ; // pixels per second\r\n    \r\n        private Point2D delta = Point2D.ZERO;\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            AnchorPane pane = new AnchorPane();\r\n            Scene scene = new Scene(pane, 800, 800);\r\n            scene.setOnKeyReleased(keyEvent -&gt; keysPressed.remove(keyEvent.getCode()));\r\n            scene.setOnKeyPressed(keyEvent -&gt; keysPressed.add(keyEvent.getCode()));\r\n    \r\n            primaryStage = new Stage();\r\n            primaryStage.setScene(scene);\r\n            Rectangle rect = new Rectangle(100, 100);\r\n            rect.setFill(Color.RED);\r\n    \r\n    \r\n            new AnimationTimer() {\r\n                private long lastUpdate ;\r\n    \r\n                @Override\r\n                public void handle(long now) {\r\n                    long elapsedNanos = now - lastUpdate;\r\n                    double elapsedSeconds = elapsedNanos / 1_000_000_000.0;\r\n                    delta = getDelta(elapsedSeconds);\r\n                    rect.setLayoutX(rect.getLayoutX() + delta.getX());\r\n                    rect.setLayoutY(rect.getLayoutY() + delta.getY());\r\n                    lastUpdate = now;\r\n                }\r\n            }.start();\r\n    \r\n            pane.getChildren().add(rect);\r\n            primaryStage.show();\r\n        }\r\n    \r\n    \r\n    \r\n        public Point2D getDelta(double elapsedSeconds) {\r\n            double distance = SPEED * elapsedSeconds;\r\n            int xDelta = 0 ;\r\n            int yDelta = 0 ;\r\n            if (keysPressed.contains(KeyCode.LEFT)) xDelta--;\r\n            if (keysPressed.contains(KeyCode.RIGHT)) xDelta++;\r\n            if (keysPressed.contains(KeyCode.UP)) yDelta--;\r\n            if (keysPressed.contains(KeyCode.DOWN)) yDelta++;\r\n            return new Point2D(xDelta, yDelta).normalize().multiply(distance);\r\n        }\r\n    }\r\n\r\nJust to demonstrate that the movement (from one `AnimationTimer`) is completely independent of the sprite animation in your original (defined in another `AnimationTimer`), the following snippet will mimic the sprite animation (alternating colors while the rectangle moves, instead of alternating images). Just add this in the `start()` method.\r\n\r\n        // alternate colors while moving:\r\n        new AnimationTimer() {\r\n            private long lastUpdate ;\r\n            private final Color[] colors = new Color[] {Color.BLUE, Color.RED};\r\n            private int currentColor = 0 ;\r\n\r\n            @Override\r\n            public void handle(long now) {\r\n                if (delta.equals(Point2D.ZERO)) {\r\n                    currentColor = 0;\r\n                } else {\r\n                    long elapsedNanos = now - lastUpdate;\r\n                    double elapsedSeconds = elapsedNanos / 1_000_000_000.0;\r\n                    if (elapsedSeconds &gt; 0.25) {\r\n                        currentColor = (currentColor + 1) % colors.length;\r\n                        lastUpdate = now;\r\n                    }\r\n                }\r\n                rect.setFill(colors[currentColor]);\r\n            }\r\n        }.start();","title":"Input lag when changing layoutX &amp; layoutY on an ImageView using keyboard input","body":"<p>Your animation timer sets <code>deltaX</code> and <code>deltaY</code> back to zero when it uses them:</p>\n<pre><code>    new AnimationTimer() {\n        @Override\n        public void handle(long now) {\n            // This is executing constantly, I know of the implications but it's good for now\n            int xDelta = xDeltaCounter.getAndSet(0);\n            if (xDelta != 0) {\n                rect.setLayoutX(rect.getLayoutX() + xDelta);\n            }\n            int yDelta = yDeltaCounter.getAndSet(0);\n            if (yDelta != 0) {\n                rect.setLayoutY(rect.getLayoutY() + yDelta);\n            }\n        }\n    }.start();\n</code></pre>\n<p>They will only be made non-zero again when the key listener is invoked, i.e. when the appropriate keys are pressed again. Consequently, the rectangle moves 10 pixels in the appropriate direction <em>for each key press</em>.</p>\n<p>What you really want is for it to move continuously <em>while the key is held down</em>.</p>\n<p>The reason it appears to move repeatedly is because of the operating system's keyboard repeat, which sends multiple key press events if a key is held down. There is a delay on this, which is why you see a delay before the rectangle starts repeatedly moving. (If you observe closely, you will see one isolated movement when the key is first pressed, then the delay, then the repeated movement.) You'll also notice the movement is not smooth, because it is moving in 10 pixel increments at discrete times (which are determined by the operating system, so it will move at different speeds on different systems).</p>\n<p>The correct strategy for this is simply to keep track of which keys are down, and then to calculate the amount of horizontal and vertical movement in the animation timer depending on those keys. You probably want to make the amount of movement dependent on the amount of time since the last animation frame, so that you can accurately control the speed.</p>\n<p>Note that since everything is on the same thread, there is no need at all for <code>AtomicInteger</code> etc.</p>\n<p>Here is a working solution that implements these ideas:</p>\n<pre><code>import javafx.animation.AnimationTimer;\nimport javafx.application.Application;\nimport javafx.geometry.Point2D;\nimport javafx.scene.Scene;\nimport javafx.scene.input.KeyCode;\nimport javafx.scene.layout.AnchorPane;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class Main extends Application {\n\n    private final Set&lt;KeyCode&gt; keysPressed = new HashSet&lt;&gt;();\n    private static final double SPEED = 200.0 ; // pixels per second\n\n    private Point2D delta = Point2D.ZERO;\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        AnchorPane pane = new AnchorPane();\n        Scene scene = new Scene(pane, 800, 800);\n        scene.setOnKeyReleased(keyEvent -&gt; keysPressed.remove(keyEvent.getCode()));\n        scene.setOnKeyPressed(keyEvent -&gt; keysPressed.add(keyEvent.getCode()));\n\n        primaryStage = new Stage();\n        primaryStage.setScene(scene);\n        Rectangle rect = new Rectangle(100, 100);\n        rect.setFill(Color.RED);\n\n\n        new AnimationTimer() {\n            private long lastUpdate ;\n\n            @Override\n            public void handle(long now) {\n                long elapsedNanos = now - lastUpdate;\n                double elapsedSeconds = elapsedNanos / 1_000_000_000.0;\n                delta = getDelta(elapsedSeconds);\n                rect.setLayoutX(rect.getLayoutX() + delta.getX());\n                rect.setLayoutY(rect.getLayoutY() + delta.getY());\n                lastUpdate = now;\n            }\n        }.start();\n\n        pane.getChildren().add(rect);\n        primaryStage.show();\n    }\n\n\n\n    public Point2D getDelta(double elapsedSeconds) {\n        double distance = SPEED * elapsedSeconds;\n        int xDelta = 0 ;\n        int yDelta = 0 ;\n        if (keysPressed.contains(KeyCode.LEFT)) xDelta--;\n        if (keysPressed.contains(KeyCode.RIGHT)) xDelta++;\n        if (keysPressed.contains(KeyCode.UP)) yDelta--;\n        if (keysPressed.contains(KeyCode.DOWN)) yDelta++;\n        return new Point2D(xDelta, yDelta).normalize().multiply(distance);\n    }\n}\n</code></pre>\n<p>Just to demonstrate that the movement (from one <code>AnimationTimer</code>) is completely independent of the sprite animation in your original (defined in another <code>AnimationTimer</code>), the following snippet will mimic the sprite animation (alternating colors while the rectangle moves, instead of alternating images). Just add this in the <code>start()</code> method.</p>\n<pre><code>    // alternate colors while moving:\n    new AnimationTimer() {\n        private long lastUpdate ;\n        private final Color[] colors = new Color[] {Color.BLUE, Color.RED};\n        private int currentColor = 0 ;\n\n        @Override\n        public void handle(long now) {\n            if (delta.equals(Point2D.ZERO)) {\n                currentColor = 0;\n            } else {\n                long elapsedNanos = now - lastUpdate;\n                double elapsedSeconds = elapsedNanos / 1_000_000_000.0;\n                if (elapsedSeconds &gt; 0.25) {\n                    currentColor = (currentColor + 1) % colors.length;\n                    lastUpdate = now;\n                }\n            }\n            rect.setFill(colors[currentColor]);\n        }\n    }.start();\n</code></pre>\n"}],"owner":{"account_id":12133016,"reputation":168,"user_id":8859325,"display_name":"Haris"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76861995,"answer_count":1,"score":0,"last_activity_date":1691520308,"creation_date":1691506742,"question_id":76860798,"body_markdown":"My use case is the following:\r\n\r\n```\r\nGiven an ImageView element, move that around the Pane by using keyboard UP/DOWN/LEFT/RIGHT buttons. \r\nThe ImageView should by cycling between different images and the source images \r\nwill change when movement is detected.\r\n```\r\n\r\nI am using two different AnimateTimers for that. The first one is used to &quot;cycle&quot; through a list of Images and update given list when movement is detected.\r\n\r\n```java\r\npublic class MultipleImageListAnimation extends AbstractAnimationTimer {\r\n\r\n    @Getter\r\n    private final SimpleObjectProperty&lt;Image&gt; imageProp;\r\n    @Getter\r\n    private final SimpleIntegerProperty scaleProp;\r\n    private volatile List&lt;List&lt;Image&gt;&gt; spriteImagesLists;\r\n    private volatile List&lt;Image&gt; displayedImageList;\r\n    private int imageIndex = 0;\r\n    private int listIndex = 0;\r\n\r\n    public MultipleImageListAnimation(List&lt;List&lt;Image&gt;&gt; spriteImagesLists) {\r\n        super(1);\r\n        this.imageProp = new SimpleObjectProperty&lt;&gt;();\r\n        this.scaleProp = new SimpleIntegerProperty(1);\r\n        this.spriteImagesLists = spriteImagesLists;\r\n        this.displayedImageList = spriteImagesLists.get(0);\r\n        if (displayedImageList.size() &gt; 0) {\r\n            super.setFramesPerSecond(displayedImageList.size() * 2);\r\n        }\r\n    }\r\n\r\n    public void changeSpriteImages(List&lt;List&lt;Image&gt;&gt; images) {\r\n        this.stop();\r\n        this.spriteImagesLists = images;\r\n        this.listIndex = ThreadLocalRandom.current().nextInt(images.size());\r\n        this.imageIndex = 0;\r\n        this.displayedImageList = images.get(listIndex);\r\n        super.setFramesPerSecond(displayedImageList.size() * 2);\r\n        this.start();\r\n    }\r\n\r\n    public void setScaleProp(int angle) {\r\n        scaleProp.set(angle);\r\n    }\r\n\r\n    @Override\r\n    public void handle(long now) {\r\n        // shouldRun() is a typical FPS method\r\n        if (shouldRun(now)) {\r\n            Image image = displayedImageList.get(imageIndex);\r\n            imageProp.set(image);\r\n            if (++imageIndex &gt;= displayedImageList.size()) {\r\n                listIndex = ThreadLocalRandom.current().nextInt(spriteImagesLists.size());\r\n                displayedImageList = spriteImagesLists.get(listIndex);\r\n                imageIndex = 0;\r\n                super.setFramesPerSecond(spriteImagesLists.get(listIndex).size() * 2);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe second one is updating the layoutX &amp; layoutY properties of the image. \r\n\r\n```java\r\n        new AnimationTimer() {\r\n            @Override\r\n            public void handle(long now) {\r\n                int xDelta = playerMovementListener.getXDeltaAndReset();\r\n                if (xDelta != 0) {\r\n                    playerImageView.setLayoutX(playerImageView.getLayoutX() + xDelta);\r\n                }\r\n                int yDelta = playerMovementListener.getYDeltaAndReset();\r\n                if (yDelta != 0) {\r\n                    playerImageView.setLayoutY(playerImageView.getLayoutY() + yDelta);\r\n                }\r\n            }\r\n        }.start();\r\n```\r\n\r\nThose are updated through an EventHandler as shown below\r\n\r\n```java\r\npublic class PlayerMovementListener implements EventHandler&lt;KeyEvent&gt; {\r\n\r\n    private final GameViewManager gameViewManager;\r\n    // Using a Set of keys because I want to detect diagonal movement as well such as UP + LEFT etc.\r\n    private final Set&lt;KeyCode&gt; keysPressed;\r\n    private final AtomicInteger xDeltaCounter;\r\n    private final AtomicInteger yDeltaCounter;\r\n\r\n    public PlayerMovementListener(GameViewManager gameViewManager) {\r\n        this.gameViewManager = gameViewManager;\r\n        this.keysPressed = new HashSet&lt;&gt;();\r\n        this.xDeltaCounter = new AtomicInteger(0);\r\n        this.yDeltaCounter = new AtomicInteger(0);\r\n    }\r\n\r\n    public int getXDeltaAndReset() {\r\n        return xDeltaCounter.getAndSet(0);\r\n    }\r\n\r\n    public int getYDeltaAndReset() {\r\n        return yDeltaCounter.getAndSet(0);\r\n    }\r\n\r\n    @Override\r\n    public void handle(KeyEvent keyEvent) {\r\n        if (KeyEvent.KEY_RELEASED.equals(keyEvent.getEventType())) {\r\n            keysPressed.remove(keyEvent.getCode());\r\n            // Stopping movement on any key released\r\n            // This is fine for now.\r\n            gameViewManager.stopPlayerMoving();\r\n        } else if (KeyEvent.KEY_PRESSED.equals(keyEvent.getEventType())) {\r\n            keysPressed.add(keyEvent.getCode());\r\n\r\n            if (KeyCode.RIGHT.equals(keyEvent.getCode())) {\r\n                gameViewManager.rotatePlayerAnimation(1);\r\n            }\r\n\r\n            if (KeyCode.LEFT.equals(keyEvent.getCode())) {\r\n                gameViewManager.rotatePlayerAnimation(-1);\r\n            }\r\n\r\n            if (Arrays.asList(KeyCode.UP, KeyCode.DOWN, KeyCode.RIGHT, KeyCode.LEFT).contains(keyEvent.getCode())) {\r\n                yDeltaCounter.addAndGet(MovementInput.getLayoutYDelta(keysPressed));\r\n                xDeltaCounter.addAndGet(MovementInput.getLayoutXDelta(keysPressed));\r\n                gameViewManager.startPlayerMoving();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd the relevant methods of the `GameViewManager`\r\n\r\n```java\r\npublic class GameViewManager {\r\n\r\n    private AnchorPane gamePane = ...;\r\n    private PlayerEntity playerEntity = ...;\r\n    private ImageView playerImageView;\r\n    private MultipleImageListAnimation playerAnimationTimer;\r\n    private boolean isPlayerMoving = false;\r\n\r\n    public void startPlayerMoving() {\r\n        Platform.runLater(() -&gt; {\r\n            if (!isPlayerMoving) {\r\n                isPlayerMoving = true;\r\n                playerAnimationTimer.changeSpriteImages(List.of(playerEntity.getRunImages()));\r\n            }\r\n        });\r\n    }\r\n\r\n    public void stopPlayerMoving() {\r\n        Platform.runLater(() -&gt; {\r\n            if (isPlayerMoving) {\r\n                isPlayerMoving = false;\r\n                playerAnimationTimer.changeSpriteImages(List.of(playerEntity.getIdleImages()));\r\n            }\r\n        });\r\n    }\r\n\r\n    public void rotatePlayerAnimation(int angle) {\r\n        playerAnimationTimer.setScaleProp(angle);\r\n    }\r\n\r\n    private void initializeKeyboardListeners() {\r\n        PlayerMovementListener playerMovementListener = new PlayerMovementListener(this);\r\n        gameScene.setOnKeyPressed(playerMovementListener);\r\n        gameScene.setOnKeyReleased(playerMovementListener);\r\n\r\n        new AnimationTimer() {\r\n            @Override\r\n            public void handle(long now) {\r\n                // This is executing constantly, I know of the implications but it&#39;s good for now\r\n                int xDelta = playerMovementListener.getXDeltaAndReset();\r\n                if (xDelta != 0) {\r\n                    playerImageView.setLayoutX(playerImageView.getLayoutX() + xDelta);\r\n                }\r\n                int yDelta = playerMovementListener.getYDeltaAndReset();\r\n                if (yDelta != 0) {\r\n                    playerImageView.setLayoutY(playerImageView.getLayoutY() + yDelta);\r\n                }\r\n            }\r\n        }.start();\r\n    }\r\n\r\n    private void initializePlayerImageView() {\r\n        this.playerImageView = new ImageView();\r\n        playerImageView.setLayoutX(STARTING_WIDTH);\r\n        playerImageView.setLayoutY(STARTING_HEIGHT);\r\n        playerAnimationTimer = new MultipleImageListAnimation(Arrays.asList(playerEntity.getIdleImages()));\r\n        playerAnimationTimer.start();\r\n\r\n        playerImageView.imageProperty().bind(playerAnimationTimer.getImageProp());\r\n        playerImageView.scaleXProperty().bind(playerAnimationTimer.getScaleProp());\r\n        gamePane.getChildren().add(this.playerImageView);\r\n    }\r\n}\r\n```\r\n\r\n---\r\n\r\nNow this approach is working fine for my use case. However I can&#39;t help but notice that there is a very slight but noticeable &quot;lag&quot; when an input key is pressed and until the View actually moves. I can see that the images are cycled to the &quot;running&quot; state immediately but the sprite is not moving until later.  Once it does there is no more lagging on processing the input. Releasing the key and pressing another one displays the same lag at the start of movement. [You can see a recording of this behavior here][1]. I do not know what&#39;s causing this and how I can fix this so any input is appreciated.\r\n\r\n\r\n  [1]: https://imgur.com/a/Se0awZH\r\n\r\n---\r\nEdit: The AbstractAnimationTimer class\r\n\r\n```\r\n  public abstract class AbstractAnimationTimer extends AnimationTimer {\r\n\r\n    public long now;\r\n    protected long FPS_BREAKPOINT;\r\n\r\n    public AbstractAnimationTimer(int framesPerSecond) {\r\n        this.now = 0;\r\n        this.FPS_BREAKPOINT = 1_000_000_000 / framesPerSecond;\r\n    }\r\n\r\n    protected void setFramesPerSecond(int framesPerSecond) {\r\n        this.FPS_BREAKPOINT = 1_000_000_000 / framesPerSecond;\r\n    }\r\n\r\n    public boolean shouldRun(long now) {\r\n        if (now - this.now &gt; this.FPS_BREAKPOINT) {\r\n            this.now = now;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n```\r\n\r\n---\r\n\r\nEdit 2: Reproducible example\r\n\r\n```java\r\nimport javafx.animation.AnimationTimer;\r\nimport javafx.application.Application;\r\nimport javafx.event.EventHandler;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.input.KeyCode;\r\nimport javafx.scene.input.KeyEvent;\r\nimport javafx.scene.layout.AnchorPane;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.scene.shape.Rectangle;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\npublic class Main extends Application {\r\n\r\n    private final Set&lt;KeyCode&gt; keysPressed = new HashSet&lt;&gt;();\r\n    private final AtomicInteger yDeltaCounter = new AtomicInteger(0);\r\n    private final AtomicInteger xDeltaCounter = new AtomicInteger(0);\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n        AnchorPane pane = new AnchorPane();\r\n        Scene scene = new Scene(pane, 800, 800);\r\n        scene.setOnKeyReleased(new EventHandler&lt;KeyEvent&gt;() {\r\n            @Override\r\n            public void handle(KeyEvent keyEvent) {\r\n                keysPressed.clear();\r\n            }\r\n        });\r\n        scene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {\r\n            @Override\r\n            public void handle(KeyEvent keyEvent) {\r\n                if (KeyEvent.KEY_PRESSED.equals(keyEvent.getEventType())) {\r\n                    keysPressed.add(keyEvent.getCode());\r\n                    if (Arrays.asList(KeyCode.UP, KeyCode.DOWN, KeyCode.RIGHT, KeyCode.LEFT).contains(keyEvent.getCode())) {\r\n                        yDeltaCounter.addAndGet(getLayoutYDelta(keysPressed));\r\n                        xDeltaCounter.addAndGet(getLayoutXDelta(keysPressed));\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        primaryStage = new Stage();\r\n        primaryStage.setScene(scene);\r\n        Rectangle rect = new Rectangle(100, 100);\r\n        rect.setFill(Color.RED);\r\n\r\n\r\n        new AnimationTimer() {\r\n            @Override\r\n            public void handle(long now) {\r\n                // This is executing constantly, I know of the implications but it&#39;s good for now\r\n                int xDelta = xDeltaCounter.getAndSet(0);\r\n                if (xDelta != 0) {\r\n                    rect.setLayoutX(rect.getLayoutX() + xDelta);\r\n                }\r\n                int yDelta = yDeltaCounter.getAndSet(0);\r\n                if (yDelta != 0) {\r\n                    rect.setLayoutY(rect.getLayoutY() + yDelta);\r\n                }\r\n            }\r\n        }.start();\r\n\r\n        pane.getChildren().add(rect);\r\n        primaryStage.show();\r\n    }\r\n\r\n    public static int getLayoutXDelta(Set&lt;KeyCode&gt; keysPressed) {\r\n        int xDelta = 0;\r\n        if (keysPressed.isEmpty()) {\r\n            return xDelta;\r\n        }\r\n        if (keysPressed.contains(KeyCode.RIGHT)) {\r\n            xDelta += 10;\r\n        }\r\n        if (keysPressed.contains(KeyCode.LEFT)) {\r\n            xDelta -= 10;\r\n        }\r\n        return xDelta;\r\n    }\r\n\r\n    public static int getLayoutYDelta(Set&lt;KeyCode&gt; keysPressed) {\r\n        int yDelta = 0;\r\n        if (keysPressed.isEmpty()) {\r\n            return yDelta;\r\n        }\r\n        if (keysPressed.contains(KeyCode.UP)) {\r\n            yDelta -= 10;\r\n        }\r\n        if (keysPressed.contains(KeyCode.DOWN)) {\r\n            yDelta += 10;\r\n        }\r\n        return yDelta;\r\n    }\r\n}\r\n```","title":"Input lag when changing layoutX &amp; layoutY on an ImageView using keyboard input","body":"<p>My use case is the following:</p>\n<pre><code>Given an ImageView element, move that around the Pane by using keyboard UP/DOWN/LEFT/RIGHT buttons. \nThe ImageView should by cycling between different images and the source images \nwill change when movement is detected.\n</code></pre>\n<p>I am using two different AnimateTimers for that. The first one is used to &quot;cycle&quot; through a list of Images and update given list when movement is detected.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MultipleImageListAnimation extends AbstractAnimationTimer {\n\n    @Getter\n    private final SimpleObjectProperty&lt;Image&gt; imageProp;\n    @Getter\n    private final SimpleIntegerProperty scaleProp;\n    private volatile List&lt;List&lt;Image&gt;&gt; spriteImagesLists;\n    private volatile List&lt;Image&gt; displayedImageList;\n    private int imageIndex = 0;\n    private int listIndex = 0;\n\n    public MultipleImageListAnimation(List&lt;List&lt;Image&gt;&gt; spriteImagesLists) {\n        super(1);\n        this.imageProp = new SimpleObjectProperty&lt;&gt;();\n        this.scaleProp = new SimpleIntegerProperty(1);\n        this.spriteImagesLists = spriteImagesLists;\n        this.displayedImageList = spriteImagesLists.get(0);\n        if (displayedImageList.size() &gt; 0) {\n            super.setFramesPerSecond(displayedImageList.size() * 2);\n        }\n    }\n\n    public void changeSpriteImages(List&lt;List&lt;Image&gt;&gt; images) {\n        this.stop();\n        this.spriteImagesLists = images;\n        this.listIndex = ThreadLocalRandom.current().nextInt(images.size());\n        this.imageIndex = 0;\n        this.displayedImageList = images.get(listIndex);\n        super.setFramesPerSecond(displayedImageList.size() * 2);\n        this.start();\n    }\n\n    public void setScaleProp(int angle) {\n        scaleProp.set(angle);\n    }\n\n    @Override\n    public void handle(long now) {\n        // shouldRun() is a typical FPS method\n        if (shouldRun(now)) {\n            Image image = displayedImageList.get(imageIndex);\n            imageProp.set(image);\n            if (++imageIndex &gt;= displayedImageList.size()) {\n                listIndex = ThreadLocalRandom.current().nextInt(spriteImagesLists.size());\n                displayedImageList = spriteImagesLists.get(listIndex);\n                imageIndex = 0;\n                super.setFramesPerSecond(spriteImagesLists.get(listIndex).size() * 2);\n            }\n        }\n    }\n}\n</code></pre>\n<p>The second one is updating the layoutX &amp; layoutY properties of the image.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        new AnimationTimer() {\n            @Override\n            public void handle(long now) {\n                int xDelta = playerMovementListener.getXDeltaAndReset();\n                if (xDelta != 0) {\n                    playerImageView.setLayoutX(playerImageView.getLayoutX() + xDelta);\n                }\n                int yDelta = playerMovementListener.getYDeltaAndReset();\n                if (yDelta != 0) {\n                    playerImageView.setLayoutY(playerImageView.getLayoutY() + yDelta);\n                }\n            }\n        }.start();\n</code></pre>\n<p>Those are updated through an EventHandler as shown below</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PlayerMovementListener implements EventHandler&lt;KeyEvent&gt; {\n\n    private final GameViewManager gameViewManager;\n    // Using a Set of keys because I want to detect diagonal movement as well such as UP + LEFT etc.\n    private final Set&lt;KeyCode&gt; keysPressed;\n    private final AtomicInteger xDeltaCounter;\n    private final AtomicInteger yDeltaCounter;\n\n    public PlayerMovementListener(GameViewManager gameViewManager) {\n        this.gameViewManager = gameViewManager;\n        this.keysPressed = new HashSet&lt;&gt;();\n        this.xDeltaCounter = new AtomicInteger(0);\n        this.yDeltaCounter = new AtomicInteger(0);\n    }\n\n    public int getXDeltaAndReset() {\n        return xDeltaCounter.getAndSet(0);\n    }\n\n    public int getYDeltaAndReset() {\n        return yDeltaCounter.getAndSet(0);\n    }\n\n    @Override\n    public void handle(KeyEvent keyEvent) {\n        if (KeyEvent.KEY_RELEASED.equals(keyEvent.getEventType())) {\n            keysPressed.remove(keyEvent.getCode());\n            // Stopping movement on any key released\n            // This is fine for now.\n            gameViewManager.stopPlayerMoving();\n        } else if (KeyEvent.KEY_PRESSED.equals(keyEvent.getEventType())) {\n            keysPressed.add(keyEvent.getCode());\n\n            if (KeyCode.RIGHT.equals(keyEvent.getCode())) {\n                gameViewManager.rotatePlayerAnimation(1);\n            }\n\n            if (KeyCode.LEFT.equals(keyEvent.getCode())) {\n                gameViewManager.rotatePlayerAnimation(-1);\n            }\n\n            if (Arrays.asList(KeyCode.UP, KeyCode.DOWN, KeyCode.RIGHT, KeyCode.LEFT).contains(keyEvent.getCode())) {\n                yDeltaCounter.addAndGet(MovementInput.getLayoutYDelta(keysPressed));\n                xDeltaCounter.addAndGet(MovementInput.getLayoutXDelta(keysPressed));\n                gameViewManager.startPlayerMoving();\n            }\n        }\n    }\n}\n</code></pre>\n<p>And the relevant methods of the <code>GameViewManager</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GameViewManager {\n\n    private AnchorPane gamePane = ...;\n    private PlayerEntity playerEntity = ...;\n    private ImageView playerImageView;\n    private MultipleImageListAnimation playerAnimationTimer;\n    private boolean isPlayerMoving = false;\n\n    public void startPlayerMoving() {\n        Platform.runLater(() -&gt; {\n            if (!isPlayerMoving) {\n                isPlayerMoving = true;\n                playerAnimationTimer.changeSpriteImages(List.of(playerEntity.getRunImages()));\n            }\n        });\n    }\n\n    public void stopPlayerMoving() {\n        Platform.runLater(() -&gt; {\n            if (isPlayerMoving) {\n                isPlayerMoving = false;\n                playerAnimationTimer.changeSpriteImages(List.of(playerEntity.getIdleImages()));\n            }\n        });\n    }\n\n    public void rotatePlayerAnimation(int angle) {\n        playerAnimationTimer.setScaleProp(angle);\n    }\n\n    private void initializeKeyboardListeners() {\n        PlayerMovementListener playerMovementListener = new PlayerMovementListener(this);\n        gameScene.setOnKeyPressed(playerMovementListener);\n        gameScene.setOnKeyReleased(playerMovementListener);\n\n        new AnimationTimer() {\n            @Override\n            public void handle(long now) {\n                // This is executing constantly, I know of the implications but it's good for now\n                int xDelta = playerMovementListener.getXDeltaAndReset();\n                if (xDelta != 0) {\n                    playerImageView.setLayoutX(playerImageView.getLayoutX() + xDelta);\n                }\n                int yDelta = playerMovementListener.getYDeltaAndReset();\n                if (yDelta != 0) {\n                    playerImageView.setLayoutY(playerImageView.getLayoutY() + yDelta);\n                }\n            }\n        }.start();\n    }\n\n    private void initializePlayerImageView() {\n        this.playerImageView = new ImageView();\n        playerImageView.setLayoutX(STARTING_WIDTH);\n        playerImageView.setLayoutY(STARTING_HEIGHT);\n        playerAnimationTimer = new MultipleImageListAnimation(Arrays.asList(playerEntity.getIdleImages()));\n        playerAnimationTimer.start();\n\n        playerImageView.imageProperty().bind(playerAnimationTimer.getImageProp());\n        playerImageView.scaleXProperty().bind(playerAnimationTimer.getScaleProp());\n        gamePane.getChildren().add(this.playerImageView);\n    }\n}\n</code></pre>\n<hr />\n<p>Now this approach is working fine for my use case. However I can't help but notice that there is a very slight but noticeable &quot;lag&quot; when an input key is pressed and until the View actually moves. I can see that the images are cycled to the &quot;running&quot; state immediately but the sprite is not moving until later.  Once it does there is no more lagging on processing the input. Releasing the key and pressing another one displays the same lag at the start of movement. <a href=\"https://imgur.com/a/Se0awZH\" rel=\"nofollow noreferrer\">You can see a recording of this behavior here</a>. I do not know what's causing this and how I can fix this so any input is appreciated.</p>\n<hr />\n<p>Edit: The AbstractAnimationTimer class</p>\n<pre><code>  public abstract class AbstractAnimationTimer extends AnimationTimer {\n\n    public long now;\n    protected long FPS_BREAKPOINT;\n\n    public AbstractAnimationTimer(int framesPerSecond) {\n        this.now = 0;\n        this.FPS_BREAKPOINT = 1_000_000_000 / framesPerSecond;\n    }\n\n    protected void setFramesPerSecond(int framesPerSecond) {\n        this.FPS_BREAKPOINT = 1_000_000_000 / framesPerSecond;\n    }\n\n    public boolean shouldRun(long now) {\n        if (now - this.now &gt; this.FPS_BREAKPOINT) {\n            this.now = now;\n            return true;\n        }\n        return false;\n    }\n</code></pre>\n<hr />\n<p>Edit 2: Reproducible example</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.animation.AnimationTimer;\nimport javafx.application.Application;\nimport javafx.event.EventHandler;\nimport javafx.scene.Scene;\nimport javafx.scene.input.KeyCode;\nimport javafx.scene.input.KeyEvent;\nimport javafx.scene.layout.AnchorPane;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class Main extends Application {\n\n    private final Set&lt;KeyCode&gt; keysPressed = new HashSet&lt;&gt;();\n    private final AtomicInteger yDeltaCounter = new AtomicInteger(0);\n    private final AtomicInteger xDeltaCounter = new AtomicInteger(0);\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        AnchorPane pane = new AnchorPane();\n        Scene scene = new Scene(pane, 800, 800);\n        scene.setOnKeyReleased(new EventHandler&lt;KeyEvent&gt;() {\n            @Override\n            public void handle(KeyEvent keyEvent) {\n                keysPressed.clear();\n            }\n        });\n        scene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {\n            @Override\n            public void handle(KeyEvent keyEvent) {\n                if (KeyEvent.KEY_PRESSED.equals(keyEvent.getEventType())) {\n                    keysPressed.add(keyEvent.getCode());\n                    if (Arrays.asList(KeyCode.UP, KeyCode.DOWN, KeyCode.RIGHT, KeyCode.LEFT).contains(keyEvent.getCode())) {\n                        yDeltaCounter.addAndGet(getLayoutYDelta(keysPressed));\n                        xDeltaCounter.addAndGet(getLayoutXDelta(keysPressed));\n                    }\n                }\n            }\n        });\n\n        primaryStage = new Stage();\n        primaryStage.setScene(scene);\n        Rectangle rect = new Rectangle(100, 100);\n        rect.setFill(Color.RED);\n\n\n        new AnimationTimer() {\n            @Override\n            public void handle(long now) {\n                // This is executing constantly, I know of the implications but it's good for now\n                int xDelta = xDeltaCounter.getAndSet(0);\n                if (xDelta != 0) {\n                    rect.setLayoutX(rect.getLayoutX() + xDelta);\n                }\n                int yDelta = yDeltaCounter.getAndSet(0);\n                if (yDelta != 0) {\n                    rect.setLayoutY(rect.getLayoutY() + yDelta);\n                }\n            }\n        }.start();\n\n        pane.getChildren().add(rect);\n        primaryStage.show();\n    }\n\n    public static int getLayoutXDelta(Set&lt;KeyCode&gt; keysPressed) {\n        int xDelta = 0;\n        if (keysPressed.isEmpty()) {\n            return xDelta;\n        }\n        if (keysPressed.contains(KeyCode.RIGHT)) {\n            xDelta += 10;\n        }\n        if (keysPressed.contains(KeyCode.LEFT)) {\n            xDelta -= 10;\n        }\n        return xDelta;\n    }\n\n    public static int getLayoutYDelta(Set&lt;KeyCode&gt; keysPressed) {\n        int yDelta = 0;\n        if (keysPressed.isEmpty()) {\n            return yDelta;\n        }\n        if (keysPressed.contains(KeyCode.UP)) {\n            yDelta -= 10;\n        }\n        if (keysPressed.contains(KeyCode.DOWN)) {\n            yDelta += 10;\n        }\n        return yDelta;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","authentication","ldap"],"answers":[{"tags":[],"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1691520180,"creation_date":1571215009,"answer_id":58409091,"question_id":58391319,"body_markdown":"An error response with LDAP error [code 49 ... data 52e][1] &quot;Returns when username is valid **but password/credential is invalid**.&quot; \r\n\r\nThere could be infrastructure issues such as [when the domain controller computer account may not be synchronized with the Key Distribution Center (KDC)][2]. However you would probably have a lot more other issues when this condition exists.\r\n\r\n\r\n  [1]:https://ldapwiki.com/wiki/Wiki.jsp?page=Common%20Active%20Directory%20Bind%20Errors\r\n  [2]: https://learn.microsoft.com/en-us/previous-versions/tn-archive/cc526636(v=technet.10)?redirectedfrom=MSDN","title":"LDAP error code 49 AcceptSecurityContext error data 52e v2580 even with the correct credentials","body":"<p>An error response with LDAP error <a href=\"https://ldapwiki.com/wiki/Wiki.jsp?page=Common%20Active%20Directory%20Bind%20Errors\" rel=\"nofollow noreferrer\">code 49 ... data 52e</a> &quot;Returns when username is valid <strong>but password/credential is invalid</strong>.&quot;</p>\n<p>There could be infrastructure issues such as <a href=\"https://learn.microsoft.com/en-us/previous-versions/tn-archive/cc526636(v=technet.10)?redirectedfrom=MSDN\" rel=\"nofollow noreferrer\">when the domain controller computer account may not be synchronized with the Key Distribution Center (KDC)</a>. However you would probably have a lot more other issues when this condition exists.</p>\n"},{"tags":[],"owner":{"account_id":61488,"reputation":2363,"user_id":183240,"accept_rate":67,"display_name":"Aaron C. de Bruyn"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1603321167,"creation_date":1603321167,"answer_id":64472857,"question_id":58391319,"body_markdown":"This can occur when your account requires a SmartCard to sign in.\r\n\r\nThere is a setting in Active Directory called &quot;Smart card is required for interactive logon&quot;.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c2E8W.png","title":"LDAP error code 49 AcceptSecurityContext error data 52e v2580 even with the correct credentials","body":"<p>This can occur when your account requires a SmartCard to sign in.</p>\n<p>There is a setting in Active Directory called &quot;Smart card is required for interactive logon&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/c2E8W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c2E8W.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":9572330,"reputation":924,"user_id":7930987,"accept_rate":50,"display_name":"BabaNew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675542818,"creation_date":1675450932,"answer_id":75339991,"question_id":58391319,"body_markdown":"You might get this error in Active directory (Windows popular implementation of LDAP) if you specify the username but not the windows domain.\r\n\r\nThis is what you should do:\r\n\r\nUSERNAME: &lt;YOUR_WINDOWS_DOMAIN&gt;\\\\&lt;YOUR_USERNAME&gt;\r\n\r\nPASSWORD: &lt;YOUR_PASSWORD&gt;","title":"LDAP error code 49 AcceptSecurityContext error data 52e v2580 even with the correct credentials","body":"<p>You might get this error in Active directory (Windows popular implementation of LDAP) if you specify the username but not the windows domain.</p>\n<p>This is what you should do:</p>\n<p>USERNAME: &lt;YOUR_WINDOWS_DOMAIN&gt;\\&lt;YOUR_USERNAME&gt;</p>\n<p>PASSWORD: &lt;YOUR_PASSWORD&gt;</p>\n"}],"owner":{"account_id":7750531,"reputation":119,"user_id":5866599,"display_name":"Sajith Wijerathne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37974,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1691520180,"creation_date":1571131261,"question_id":58391319,"body_markdown":"I&#39;m adding LDAP authentication to the spring-boot application. All set accordingly and I&#39;m getting &quot;LDAP error code 49 AcceptSecurityContext error data 52e v2580&quot; error even after providing correct credentials.\r\n\r\nI&#39;m using `import javax.naming.Context;` and have mentioned the code below.\r\n```java\r\nString url = ldap_url;\r\nString domain = ldap_domain;\r\nString uname = request.getUsername();\r\nString pwd = request.getPassword();\r\nboolean authentication = false;\r\nboolean error = true;\r\nString msg;\r\nString ldapSearchBase = &quot;OU=TEST_OU, DC=DC2, DC=DC1&quot;;\r\n   \r\n// create env for initial context\r\nHashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\r\nenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\nenv.put(Context.PROVIDER_URL, url);\r\nenv.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\nenv.put(Context.SECURITY_PRINCIPAL, &quot;CN=&quot; + uname + &quot;@&quot; + domain + &quot;,&quot; + ldapSearchBase);\r\nenv.put(Context.SECURITY_CREDENTIALS, pwd);\r\nNamingEnumeration results = null;\r\n\r\ntry {\r\n    LdapContext ctx = new InitialLdapContext(env, null);\r\n    authentication = true;\r\n    error = false;\r\n} catch (NamingException e) {\r\n    logger.error(&quot;LDAP error for :{NamingException}&quot; + e);\r\n    return ResponseEntity.ok(new ApiResponse(true, e.getMessage()));\r\n} finally {\r\n    if (!error) {\r\n        msg = &quot;Login success!!!&quot;;\r\n    } else {\r\n        msg = &quot;Authentication failed!&quot;;\r\n    }\r\n}\r\n\r\nlogger.info(&quot;exitinig...&quot;);\r\n\r\nif (authentication) {\r\n    return ResponseEntity.ok(new ApiResponse(false, msg));\r\n} else {\r\n    return ResponseEntity.ok(new ApiResponse(true, msg));\r\n}\r\n```\r\nError is catching as `NamingException`.","title":"LDAP error code 49 AcceptSecurityContext error data 52e v2580 even with the correct credentials","body":"<p>I'm adding LDAP authentication to the spring-boot application. All set accordingly and I'm getting \"LDAP error code 49 AcceptSecurityContext error data 52e v2580\" error even after providing correct credentials.</p>\n\n<p>I'm using <code>import javax.naming.Context;</code> and have mentioned the code below.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String url = ldap_url;\nString domain = ldap_domain;\nString uname = request.getUsername();\nString pwd = request.getPassword();\nboolean authentication = false;\nboolean error = true;\nString msg;\nString ldapSearchBase = \"OU=TEST_OU, DC=DC2, DC=DC1\";\n\n// create env for initial context\nHashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\nenv.put(Context.INITIAL_CONTEXT_FACTORY, \"com.sun.jndi.ldap.LdapCtxFactory\");\nenv.put(Context.PROVIDER_URL, url);\nenv.put(Context.SECURITY_AUTHENTICATION, \"simple\");\nenv.put(Context.SECURITY_PRINCIPAL, \"CN=\" + uname + \"@\" + domain + \",\" + ldapSearchBase);\nenv.put(Context.SECURITY_CREDENTIALS, pwd);\nNamingEnumeration results = null;\n\ntry {\n    LdapContext ctx = new InitialLdapContext(env, null);\n    authentication = true;\n    error = false;\n} catch (NamingException e) {\n    logger.error(\"LDAP error for :{NamingException}\" + e);\n    return ResponseEntity.ok(new ApiResponse(true, e.getMessage()));\n} finally {\n    if (!error) {\n        msg = \"Login success!!!\";\n    } else {\n        msg = \"Authentication failed!\";\n    }\n}\n\nlogger.info(\"exitinig...\");\n\nif (authentication) {\n    return ResponseEntity.ok(new ApiResponse(false, msg));\n} else {\n    return ResponseEntity.ok(new ApiResponse(true, msg));\n}\n</code></pre>\n\n<p>Error is catching as <code>NamingException</code>.</p>\n"},{"tags":["java","integration","aem","akamai","purge"],"answers":[{"tags":[],"owner":{"account_id":29186923,"reputation":71,"user_id":22359883,"display_name":"Dana A"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691520164,"creation_date":1691520164,"answer_id":76862390,"question_id":76759721,"body_markdown":"The way we did it was to add replication actions carried out by an akamai replication agent - it was a fairly complex system to set up. Especially since all the dynamic includes on a given page need to be purged with their specific urls, not just the main published page (this may not be the case for you)\r\n\r\nuse https://mvnrepository.com/artifact/com.akamai.edgegrid\r\n\r\nIn the replicator, create an org.apache.sling.event.job.JobManager object and add a job for each url or set of up to 10 urls that need to be addressed (invalidated in akamai, usually).\r\n\r\nin each job, create the com.akamai.edgegrid.signer.ClientCredential and the ApacheHttpClientEdgeGridInterceptor and ApacheHttpClientEdgeGridRoutePlanner objects\r\n\r\nbuild the request according to the instructions you read - then build your post using the EdgeGridInterceptor and RoutePlanner with HttpClientBuilder\r\n\r\nthen when you post it, it will get to the right place in akamai.\r\n\r\n","title":"How to integrate Akamai FastPurgeAPI into AEM using Java code?","body":"<p>The way we did it was to add replication actions carried out by an akamai replication agent - it was a fairly complex system to set up. Especially since all the dynamic includes on a given page need to be purged with their specific urls, not just the main published page (this may not be the case for you)</p>\n<p>use <a href=\"https://mvnrepository.com/artifact/com.akamai.edgegrid\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.akamai.edgegrid</a></p>\n<p>In the replicator, create an org.apache.sling.event.job.JobManager object and add a job for each url or set of up to 10 urls that need to be addressed (invalidated in akamai, usually).</p>\n<p>in each job, create the com.akamai.edgegrid.signer.ClientCredential and the ApacheHttpClientEdgeGridInterceptor and ApacheHttpClientEdgeGridRoutePlanner objects</p>\n<p>build the request according to the instructions you read - then build your post using the EdgeGridInterceptor and RoutePlanner with HttpClientBuilder</p>\n<p>then when you post it, it will get to the right place in akamai.</p>\n"}],"owner":{"account_id":13059388,"reputation":163,"user_id":9437111,"display_name":"Bhavani K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691520164,"creation_date":1690263593,"question_id":76759721,"body_markdown":"I am trying to integrate FastPurge API into my AEM Event listener. I have read documentation but couldn&#39;t follow it.\r\n\r\nBelow, I have attached my listener.\r\n\r\n    public class PublishListener implements EventHandler() \r\n    private static final Logger logger LoggerFactory.getLogger(PublishListener.class);\r\n    \r\n        public void handleEvent (Event event) {\r\n        \r\n        try {\r\n        \r\n        logger.info(&quot;in Event type:{}&quot;, event.getTopic());\r\n        \r\n        if (ReplicationAction, fromEvent (event).getType().equals(ReplicationActionType.ACTIVATE))\r\n        \r\n    logger.info(&quot;\\n Page Published: ()&quot;, ReplicationAction.fromEvent (event).getPath());\r\n        \r\n        if(ReplicationAction.fromEvent (event).getType().equals(ReplicationActionType.DEACTIVATE) || ReplicationAction.fromEvent (event).getType().equals(ReplicationActionType.DELETE)) \r\n    `logger.info(&quot;In Page Deactivated: (), ReplicationAction.fromEvent (event).getPath())`;\r\n        \r\n        } \r\n    catch (Exception e) {\r\n        \r\n        logger.info(&quot;in Error&quot;, e.getMessage());}}\r\n\r\n\r\nCould you please help me to integrate the code with fastpurge API of akamai to purge?\r\n\r\nThanks in Advance!\r\n","title":"How to integrate Akamai FastPurgeAPI into AEM using Java code?","body":"<p>I am trying to integrate FastPurge API into my AEM Event listener. I have read documentation but couldn't follow it.</p>\n<p>Below, I have attached my listener.</p>\n<pre><code>public class PublishListener implements EventHandler() \nprivate static final Logger logger LoggerFactory.getLogger(PublishListener.class);\n\n    public void handleEvent (Event event) {\n    \n    try {\n    \n    logger.info(&quot;in Event type:{}&quot;, event.getTopic());\n    \n    if (ReplicationAction, fromEvent (event).getType().equals(ReplicationActionType.ACTIVATE))\n    \nlogger.info(&quot;\\n Page Published: ()&quot;, ReplicationAction.fromEvent (event).getPath());\n    \n    if(ReplicationAction.fromEvent (event).getType().equals(ReplicationActionType.DEACTIVATE) || ReplicationAction.fromEvent (event).getType().equals(ReplicationActionType.DELETE)) \n`logger.info(&quot;In Page Deactivated: (), ReplicationAction.fromEvent (event).getPath())`;\n    \n    } \ncatch (Exception e) {\n    \n    logger.info(&quot;in Error&quot;, e.getMessage());}}\n</code></pre>\n<p>Could you please help me to integrate the code with fastpurge API of akamai to purge?</p>\n<p>Thanks in Advance!</p>\n"},{"tags":["java","eclipse","jpa","eclipselink"],"answers":[{"tags":[],"owner":{"account_id":157771,"reputation":30404,"user_id":375953,"accept_rate":53,"display_name":"dira"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1296043058,"creation_date":1296043058,"answer_id":4804292,"question_id":4804025,"body_markdown":"IF you use `maven`\r\n\r\n 1. Issue `mvn eclipse:eclipse -DdownloadSource=true` command, to download the sources jars to local `.m2` repo.\r\n 2. refresh the project in eclipse.\r\n\r\nIf you use `m2eclipse` plugin, \r\n\r\n 1. right click on project --&gt; Maven --&gt; Download Sources.\r\n 2. right click on project --&gt; Maven --&gt; Update Project Configuration.","title":"javax.persistence.* sources, where?","body":"<p>IF you use <code>maven</code></p>\n\n<ol>\n<li>Issue <code>mvn eclipse:eclipse -DdownloadSource=true</code> command, to download the sources jars to local <code>.m2</code> repo.</li>\n<li>refresh the project in eclipse.</li>\n</ol>\n\n<p>If you use <code>m2eclipse</code> plugin, </p>\n\n<ol>\n<li>right click on project --> Maven --> Download Sources.</li>\n<li>right click on project --> Maven --> Update Project Configuration.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":51415,"reputation":24508,"user_id":153621,"accept_rate":88,"display_name":"nanda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1296043254,"creation_date":1296043254,"answer_id":4804330,"question_id":4804025,"body_markdown":"Maybe you used different version for the classes jar and the sources jar?","title":"javax.persistence.* sources, where?","body":"<p>Maybe you used different version for the classes jar and the sources jar?</p>\n"},{"tags":[],"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1296050067,"creation_date":1296050067,"answer_id":4805303,"question_id":4804025,"body_markdown":"You can get the equivalent from Apache\r\nhttp://repo2.maven.org/maven2/org/apache/geronimo/specs/geronimo-jpa_2.0_spec/1.1/\r\nand that directory has source and runtime jar. And that&#39;s under a more flexible Apache 2 license","title":"javax.persistence.* sources, where?","body":"<p>You can get the equivalent from Apache\n<a href=\"http://repo2.maven.org/maven2/org/apache/geronimo/specs/geronimo-jpa_2.0_spec/1.1/\" rel=\"nofollow\">http://repo2.maven.org/maven2/org/apache/geronimo/specs/geronimo-jpa_2.0_spec/1.1/</a>\nand that directory has source and runtime jar. And that's under a more flexible Apache 2 license</p>\n"},{"tags":[],"owner":{"account_id":181890,"reputation":17919,"user_id":416206,"accept_rate":40,"display_name":"James"},"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1296050431,"creation_date":1296050431,"answer_id":4805363,"question_id":4804025,"body_markdown":"I think if you create a JPA project type in Eclipse you will be able to see the JPA source, or perhaps load the JPA module.\r\n\r\nOnly the source code to EclipseLink is in the eclipselink-src.jar, you can access the source to JPA from the EclipseLink repository,\r\n\r\nhttp://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/jpa/plugins/\r\n\r\nThe source is not that interesting for JPA, as it is a spec, and all interfaces, there is little to no real code.\r\n","title":"javax.persistence.* sources, where?","body":"<p>I think if you create a JPA project type in Eclipse you will be able to see the JPA source, or perhaps load the JPA module.</p>\n\n<p>Only the source code to EclipseLink is in the eclipselink-src.jar, you can access the source to JPA from the EclipseLink repository,</p>\n\n<p><a href=\"http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/jpa/plugins/\" rel=\"noreferrer\">http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/jpa/plugins/</a></p>\n\n<p>The source is not that interesting for JPA, as it is a spec, and all interfaces, there is little to no real code.</p>\n"},{"tags":[],"owner":{"account_id":707951,"reputation":2494,"user_id":616903,"display_name":"Andrei Sura"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1691419177,"creation_date":1395878059,"answer_id":22675551,"question_id":4804025,"body_markdown":"# 2023 update\r\n\r\nThe actual implementations of the interfaces can be seen by cloning the git repo:\r\n```\r\n    git clone git@github.com:jakartaee/persistence.git jakartaee_persistence\r\n    cd $_\r\n\r\n    grep -irn &#39;close()&#39; *\r\napi/src/main/java/jakarta/persistence/EntityManagerFactory.java:133:    \r\n    public void close();\r\napi/src/main/java/jakarta/persistence/EntityManager.java:811:    public void close();\r\n```\r\n\r\n# outdated info\r\n    git clone https://github.com/eclipse/javax.persistence.git\r\n    cd javax.persistence\r\n    grep -ir &#39;close()&#39; *\r\n    \r\n\r\n== Then find a specific function\r\n\r\n    grep -ir &#39;close()&#39; *\r\n    src/javax/persistence/EntityManager.java:    public void close();\r\n    src/javax/persistence/EntityManagerFactory.java:    public void close();\r\n    src/javax/persistence/spi/PersistenceProviderResolverHolder.java: in.close();\r\n\r\n","title":"javax.persistence.* sources, where?","body":"<h1>2023 update</h1>\n<p>The actual implementations of the interfaces can be seen by cloning the git repo:</p>\n<pre><code>    git clone git@github.com:jakartaee/persistence.git jakartaee_persistence\n    cd $_\n\n    grep -irn 'close()' *\napi/src/main/java/jakarta/persistence/EntityManagerFactory.java:133:    \n    public void close();\napi/src/main/java/jakarta/persistence/EntityManager.java:811:    public void close();\n</code></pre>\n<h1>outdated info</h1>\n<pre><code>git clone https://github.com/eclipse/javax.persistence.git\ncd javax.persistence\ngrep -ir 'close()' *\n</code></pre>\n<p>== Then find a specific function</p>\n<pre><code>grep -ir 'close()' *\nsrc/javax/persistence/EntityManager.java:    public void close();\nsrc/javax/persistence/EntityManagerFactory.java:    public void close();\nsrc/javax/persistence/spi/PersistenceProviderResolverHolder.java: in.close();\n</code></pre>\n"}],"owner":{"account_id":287076,"reputation":1916,"user_id":586682,"display_name":"pnt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15016,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"closed_date":1437374881,"accepted_answer_id":4805363,"answer_count":5,"score":16,"last_activity_date":1691520064,"creation_date":1296041249,"question_id":4804025,"body_markdown":"I might be missing something really obvious here, but I couldn&#39;t find the sources for a few classes from the javax.persistence package.  \r\n\r\nI&#39;m using EclipseLink as a JPA provider. When I tried Ctrl+left clicking a method of the EntityManager interface, Eclipse said that I should attach the sources since it can&#39;t find them. I tried attaching the EclipseLink ones but it complained it cannot find the source for EntityManager there.  \r\n\r\nWhat sources do I need to attach in order to view the code in Eclipse? Could somebody provide a link?","title":"javax.persistence.* sources, where?","body":"<p>I might be missing something really obvious here, but I couldn't find the sources for a few classes from the javax.persistence package.  </p>\n\n<p>I'm using EclipseLink as a JPA provider. When I tried Ctrl+left clicking a method of the EntityManager interface, Eclipse said that I should attach the sources since it can't find them. I tried attaching the EclipseLink ones but it complained it cannot find the source for EntityManager there.  </p>\n\n<p>What sources do I need to attach in order to view the code in Eclipse? Could somebody provide a link?</p>\n"},{"tags":["java","multithreading","debugging","project-loom","virtual-threads"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1696416439,"post_id":76862339,"comment_id":136149266,"body_markdown":"It’s not a preview anymore. But I don’t know when VisualVM will catch up…","body":"It’s not a preview anymore. But I don’t know when VisualVM will catch up…"},{"owner":{"account_id":6995097,"reputation":1409,"user_id":5363011,"display_name":"George Leung"},"score":1,"creation_date":1697522159,"post_id":76862339,"comment_id":136286721,"body_markdown":"For now you can use `jcmd &lt;pid&gt; Thread.dump_to_file -format=json dump.json`","body":"For now you can use <code>jcmd &lt;pid&gt; Thread.dump_to_file -format=json dump.json</code>"},{"owner":{"account_id":25202,"reputation":2910,"user_id":64635,"accept_rate":100,"display_name":"chesterbr"},"score":0,"creation_date":1697654216,"post_id":76862339,"comment_id":136308443,"body_markdown":"@GeorgeLeung that&#39;s a great idea! Sure, not as practical as VisualVM, but gives me a snapshot (and some inspiration for built-in monitoring until some GUI tool pops up). Thank you!","body":"@GeorgeLeung that&#39;s a great idea! Sure, not as practical as VisualVM, but gives me a snapshot (and some inspiration for built-in monitoring until some GUI tool pops up). Thank you!"},{"owner":{"account_id":6995097,"reputation":1409,"user_id":5363011,"display_name":"George Leung"},"score":1,"creation_date":1697654565,"post_id":76862339,"comment_id":136308503,"body_markdown":"Let&#39;s hope they make it into VisualVM soon.","body":"Let&#39;s hope they make it into VisualVM soon."}],"owner":{"account_id":25202,"reputation":2910,"user_id":64635,"accept_rate":100,"display_name":"chesterbr"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691519813,"creation_date":1691519813,"question_id":76862339,"body_markdown":"I have been using [Project Loom][1] to revive a game server - it&#39;s very old code that was written back when green threads were a thing, so writing a server on one-thread-per-connection model was not unreasonable - and it works quite well, in particular considering it&#39;s a preview feature.\r\n\r\n*(I know, it&#39;s a preview feature, but this is a personal project and I&#39;m happy to adjust if APIs change in the future - beats rewriting battle-tested code that already does its job well)*\r\n\r\nOn a traditional, thread-based app, I&#39;d use the likes of [VisualVM][2] to inspect the running threads - but virtual threads being actually workloads, they won&#39;t show up there (I only see the thread pool that they share). I wonder if someone has already come up with a tool that allows one to inspect the virtual threads (e.g., to know precisely where they are blocked or whether they are running, how many of them are around, etc); it would help me a lot with debugging minor stuff.\r\n\r\nAny advice?\r\n\r\n\r\n  [1]: https://blogs.oracle.com/javamagazine/post/going-inside-javas-project-loom-and-virtual-threads\r\n  [2]: https://visualvm.github.io/","title":"How to inspect Virtual Threads on a running JVM?","body":"<p>I have been using <a href=\"https://blogs.oracle.com/javamagazine/post/going-inside-javas-project-loom-and-virtual-threads\" rel=\"nofollow noreferrer\">Project Loom</a> to revive a game server - it's very old code that was written back when green threads were a thing, so writing a server on one-thread-per-connection model was not unreasonable - and it works quite well, in particular considering it's a preview feature.</p>\n<p><em>(I know, it's a preview feature, but this is a personal project and I'm happy to adjust if APIs change in the future - beats rewriting battle-tested code that already does its job well)</em></p>\n<p>On a traditional, thread-based app, I'd use the likes of <a href=\"https://visualvm.github.io/\" rel=\"nofollow noreferrer\">VisualVM</a> to inspect the running threads - but virtual threads being actually workloads, they won't show up there (I only see the thread pool that they share). I wonder if someone has already come up with a tool that allows one to inspect the virtual threads (e.g., to know precisely where they are blocked or whether they are running, how many of them are around, etc); it would help me a lot with debugging minor stuff.</p>\n<p>Any advice?</p>\n"},{"tags":["java","tomcat","jasper-reports","tomcat8"],"answers":[{"tags":[],"owner":{"account_id":1536584,"reputation":449,"user_id":1432468,"accept_rate":33,"display_name":"G. Plante"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691519591,"creation_date":1691519591,"answer_id":76862310,"question_id":76861438,"body_markdown":"I finally fixed it. The file commons-collections-3.2.2.jar was missing.","title":"Problem running JasperReport 6.6.0 with Tomcat 8 : java.lang.ClassNotFoundException: Unresolved external reference","body":"<p>I finally fixed it. The file commons-collections-3.2.2.jar was missing.</p>\n"}],"owner":{"account_id":1536584,"reputation":449,"user_id":1432468,"accept_rate":33,"display_name":"G. Plante"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1691521750,"answer_count":1,"score":-2,"last_activity_date":1691519591,"creation_date":1691511432,"question_id":76861438,"body_markdown":"I&#39;m running JasperReport Library 6.6.0, openjdk 1.8.0_372, Tomcat 7 and PHP/JAVA Bridge on a Centos 7 server. Everything is working just fine.\r\n\r\nI need to move it to a new server Rocky Linux 9.2 and Tomcat 8. I installed the same openjdk version 1.8.0_372. I copied all JasperReport 6.6.0 files from the old server to the new one.\r\n\r\nWhen I try to run a report, I&#39;m getting the following error message. I&#39;m not able to figure out what could cause it. Despite the fact that this is a different Linux version and a different Tomcat version, all the rest is identical since I copied all files from the old server.\r\n\r\nAny help would be appreciated.\r\n\r\n\r\n    java.lang.ClassNotFoundException: Unresolved external reference: java.lang.NoClassDefFoundError: org/apache/commons/collections/map/ReferenceMap. -- Unable to call the method, see the README section &quot;Java platform issues&quot; for details and DO NOT REPORT THIS PROBLEM TO THE PHP/Java Bridge MAILING LIST!\r\n        at php.java.bridge.JavaBridge.getUnresolvedExternalReferenceException(JavaBridge.java:422)\r\n        at php.java.bridge.JavaBridge.Invoke(JavaBridge.java:1055)\r\n        at php.java.bridge.Request.handleRequest(Request.java:417)\r\n        at php.java.bridge.Request.handleRequests(Request.java:500)\r\n        at php.java.bridge.http.ContextRunner.run(ContextRunner.java:145)\r\n        at php.java.bridge.ThreadPool$Delegate.run(ThreadPool.java:60)\r\n","title":"Problem running JasperReport 6.6.0 with Tomcat 8 : java.lang.ClassNotFoundException: Unresolved external reference","body":"<p>I'm running JasperReport Library 6.6.0, openjdk 1.8.0_372, Tomcat 7 and PHP/JAVA Bridge on a Centos 7 server. Everything is working just fine.</p>\n<p>I need to move it to a new server Rocky Linux 9.2 and Tomcat 8. I installed the same openjdk version 1.8.0_372. I copied all JasperReport 6.6.0 files from the old server to the new one.</p>\n<p>When I try to run a report, I'm getting the following error message. I'm not able to figure out what could cause it. Despite the fact that this is a different Linux version and a different Tomcat version, all the rest is identical since I copied all files from the old server.</p>\n<p>Any help would be appreciated.</p>\n<pre><code>java.lang.ClassNotFoundException: Unresolved external reference: java.lang.NoClassDefFoundError: org/apache/commons/collections/map/ReferenceMap. -- Unable to call the method, see the README section &quot;Java platform issues&quot; for details and DO NOT REPORT THIS PROBLEM TO THE PHP/Java Bridge MAILING LIST!\n    at php.java.bridge.JavaBridge.getUnresolvedExternalReferenceException(JavaBridge.java:422)\n    at php.java.bridge.JavaBridge.Invoke(JavaBridge.java:1055)\n    at php.java.bridge.Request.handleRequest(Request.java:417)\n    at php.java.bridge.Request.handleRequests(Request.java:500)\n    at php.java.bridge.http.ContextRunner.run(ContextRunner.java:145)\n    at php.java.bridge.ThreadPool$Delegate.run(ThreadPool.java:60)\n</code></pre>\n"},{"tags":["java","garbage-collection","heap-memory"],"comments":[{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1511098378,"post_id":47377336,"comment_id":81706877,"body_markdown":"This is probably something you&#39;re going to have to do in whatever&#39;s invoking Java, and thus in a platform-dependent manner.","body":"This is probably something you&#39;re going to have to do in whatever&#39;s invoking Java, and thus in a platform-dependent manner."},{"owner":{"account_id":3862105,"reputation":29203,"user_id":3199595,"accept_rate":84,"display_name":"Malt"},"score":1,"creation_date":1511100440,"post_id":47377336,"comment_id":81707512,"body_markdown":"@OliverCharlesworth That&#39;s what I figured. But it&#39;s strange. The default is defined in terms of a fraction of physical memory, but there&#39;s no switch for changing the 1/4th to say 1/3 or 1/2.","body":"@OliverCharlesworth That&#39;s what I figured. But it&#39;s strange. The default is defined in terms of a fraction of physical memory, but there&#39;s no switch for changing the 1/4th to say 1/3 or 1/2."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1511863798,"post_id":47377336,"comment_id":82013998,"body_markdown":"Since you can&#39;t *change* the heap size of a HotSpot JVM, the &quot;pure Java&quot; solution is to use the techniques in the linked Q&amp;A to find the physical memory size ... then launch a new JVM.  Frankly, you are better off with your &quot;clunky&quot; solution.","body":"Since you can&#39;t <i>change</i> the heap size of a HotSpot JVM, the &quot;pure Java&quot; solution is to use the techniques in the linked Q&amp;A to find the physical memory size ... then launch a new JVM.  Frankly, you are better off with your &quot;clunky&quot; solution."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1691532570,"post_id":47377336,"comment_id":135503919,"body_markdown":"When you&#39;re setting the value, you are generally setting it based on knowing the amount your program actually needs. The JVM does not possess that insight, so it makes a &#39;guess&#39; based on how much physical memory exists. It&#39;s unclear that you, the user, needs to guess.","body":"When you&#39;re setting the value, you are generally setting it based on knowing the amount your program actually needs. The JVM does not possess that insight, so it makes a &#39;guess&#39; based on how much physical memory exists. It&#39;s unclear that you, the user, needs to guess."}],"answers":[{"tags":[],"owner":{"account_id":3598692,"reputation":71,"user_id":3002576,"display_name":"Chronove"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511098427,"creation_date":1511098427,"answer_id":47377450,"question_id":47377336,"body_markdown":"You probably have to do it yourself. Say you&#39;re going for a windows version,\r\nget the max amount of Memory ( parse something like `wmic ComputerSystem get TotalPhysicalMemory` ) , calculate 1/4 of this and set it as the -Xmx option...\r\n\r\nI would like to ask you why you&#39;d need a percentage of the physical memory. The max amount of memory shouldnt affect the memory usage of your application, and if so the application should handle it itself","title":"Java set maximum heap size (Xmx) as a fraction of physical memory","body":"<p>You probably have to do it yourself. Say you're going for a windows version,\nget the max amount of Memory ( parse something like <code>wmic ComputerSystem get TotalPhysicalMemory</code> ) , calculate 1/4 of this and set it as the -Xmx option...</p>\n\n<p>I would like to ask you why you'd need a percentage of the physical memory. The max amount of memory shouldnt affect the memory usage of your application, and if so the application should handle it itself</p>\n"},{"tags":[],"owner":{"account_id":3862105,"reputation":29203,"user_id":3199595,"accept_rate":84,"display_name":"Malt"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1691518584,"creation_date":1615287081,"answer_id":66545477,"question_id":47377336,"body_markdown":"Since [Java 8u191 (October 16, 2018)][1], there are three dedicated JVM options to control the heap size as a fraction of the available memory. They are documented [here][2].\r\n\r\nNote that contrary to what its name suggests, `MinRAMPercentage` also controls the **maximum** heap size\r\n\r\n&gt; **-XX:InitialRAMPercentage=percent**\r\n&gt; \r\n&gt; Sets the initial amount of memory that the JVM will use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option. The default value is 1.5625 percent.\r\n&gt; \r\n&gt; **-XX:MaxRAMPercentage=percent**\r\n&gt; \r\n&gt; Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option. The default value is 25 percent.\r\n&gt; \r\n&gt; \r\n&gt; **-XX:MinRAMPercentage=percent**\r\n&gt; \r\n&gt; Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option for small heaps. A small heap is a heap of approximately 125 MB. The default value is 50 percent.\r\n\r\nHere are some example runs using docker on x64 using jdk 11u10:\r\n\r\n`docker run --memory &lt;limit&gt; openjdk:11 java -XX:MaxRAMPercentage=25 -XX:MinRAMPercentage=50 -XX:InitialRAMPercentage=5 -XX:+PrintFlagsFinal 2&gt;&amp;1 | grep HeapSize`\r\n\r\n    | Memory Limit | Initial Heap Size | Max Heap Size    |\r\n    |--------------|-------------------|------------------|\r\n    | 100Mi        | 10485760 (~10%)   | 52428800 (~50%)  |\r\n    | 256Mi        | 27262976 (~10%)   | 132120576 (~50%) |\r\n    | 512Mi        | 54525952 (~10%)   | 134217728 (~25%) |\r\n    | 1Gi          | 109051904 (~10%)  | 268435456 (~25%) |\r\n\r\n  [1]: https://www.oracle.com/java/technologies/javase/8u191-relnotes.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\r\n  [3]: https://dzone.com/articles/difference-between-initialrampercentage-minramperc","title":"Java set maximum heap size (Xmx) as a fraction of physical memory","body":"<p>Since <a href=\"https://www.oracle.com/java/technologies/javase/8u191-relnotes.html\" rel=\"nofollow noreferrer\">Java 8u191 (October 16, 2018)</a>, there are three dedicated JVM options to control the heap size as a fraction of the available memory. They are documented <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Note that contrary to what its name suggests, <code>MinRAMPercentage</code> also controls the <strong>maximum</strong> heap size</p>\n<blockquote>\n<p><strong>-XX:InitialRAMPercentage=percent</strong></p>\n<p>Sets the initial amount of memory that the JVM will use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option. The default value is 1.5625 percent.</p>\n<p><strong>-XX:MaxRAMPercentage=percent</strong></p>\n<p>Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option. The default value is 25 percent.</p>\n<p><strong>-XX:MinRAMPercentage=percent</strong></p>\n<p>Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option for small heaps. A small heap is a heap of approximately 125 MB. The default value is 50 percent.</p>\n</blockquote>\n<p>Here are some example runs using docker on x64 using jdk 11u10:</p>\n<p><code>docker run --memory &lt;limit&gt; openjdk:11 java -XX:MaxRAMPercentage=25 -XX:MinRAMPercentage=50 -XX:InitialRAMPercentage=5 -XX:+PrintFlagsFinal 2&gt;&amp;1 | grep HeapSize</code></p>\n<pre><code>| Memory Limit | Initial Heap Size | Max Heap Size    |\n|--------------|-------------------|------------------|\n| 100Mi        | 10485760 (~10%)   | 52428800 (~50%)  |\n| 256Mi        | 27262976 (~10%)   | 132120576 (~50%) |\n| 512Mi        | 54525952 (~10%)   | 134217728 (~25%) |\n| 1Gi          | 109051904 (~10%)  | 268435456 (~25%) |\n</code></pre>\n"}],"owner":{"account_id":3862105,"reputation":29203,"user_id":3199595,"accept_rate":84,"display_name":"Malt"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6551,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":66545477,"answer_count":2,"score":8,"last_activity_date":1691518584,"creation_date":1511097716,"question_id":47377336,"body_markdown":"In [JDK 8][1], The default maximum heap size is \r\n&gt; 1/4th of the physical memory or 1GB\r\n\r\nAnd it can be overridden using the `-Xmx` switch:\r\n\r\n&gt; You can override this default using the -Xmx command-line option. \r\n\r\nThe `Xmx` switch works with *bytes*, not fractions. Is there a **straightforward** way of setting the maximum heap to X percent of the physical memory of a machine?\r\n\r\nEdit:\r\n\r\nWhy, you ask? Well, first of all curiosity. I find it strange that the default Xmx is defined in terms of a fraction of the physical memory but as soon as I touch it then it&#39; is suddenly an absolute value. Second, if I deploy the same (or similar) app to two different servers and one of them has more physical memory I&#39;d like to have the option of automatically getting the JVM to take advantage of the extra memory. It doesn&#39;t always make sense, but sometimes it does.\r\n\r\nThe obvious solution is to use a shell script that checks the amount of free space and calculates the Xmx, but that seems like a clunky solution. I imagine it should be somehow possible with pure Java.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gc-ergonomics.html","title":"Java set maximum heap size (Xmx) as a fraction of physical memory","body":"<p>In <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gc-ergonomics.html\" rel=\"nofollow noreferrer\">JDK 8</a>, The default maximum heap size is</p>\n<blockquote>\n<p>1/4th of the physical memory or 1GB</p>\n</blockquote>\n<p>And it can be overridden using the <code>-Xmx</code> switch:</p>\n<blockquote>\n<p>You can override this default using the -Xmx command-line option.</p>\n</blockquote>\n<p>The <code>Xmx</code> switch works with <em>bytes</em>, not fractions. Is there a <strong>straightforward</strong> way of setting the maximum heap to X percent of the physical memory of a machine?</p>\n<p>Edit:</p>\n<p>Why, you ask? Well, first of all curiosity. I find it strange that the default Xmx is defined in terms of a fraction of the physical memory but as soon as I touch it then it' is suddenly an absolute value. Second, if I deploy the same (or similar) app to two different servers and one of them has more physical memory I'd like to have the option of automatically getting the JVM to take advantage of the extra memory. It doesn't always make sense, but sometimes it does.</p>\n<p>The obvious solution is to use a shell script that checks the amount of free space and calculates the Xmx, but that seems like a clunky solution. I imagine it should be somehow possible with pure Java.</p>\n"},{"tags":["java","git","jenkins"],"owner":{"account_id":15886197,"reputation":223,"user_id":11462489,"display_name":"jon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691517024,"creation_date":1691517024,"question_id":76862048,"body_markdown":"Jenkins build is listing similar changes as modified in every build along with actual modified files. This is happening only with one repository. The files listed in below image with + icon are the wrong ones. \r\n\r\nKindly help me how to fix it. [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1kRzU.png","title":"Jenkins build listing unexpected changes in every build","body":"<p>Jenkins build is listing similar changes as modified in every build along with actual modified files. This is happening only with one repository. The files listed in below image with + icon are the wrong ones.</p>\n<p>Kindly help me how to fix it. <a href=\"https://i.stack.imgur.com/1kRzU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1kRzU.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","sql-server","azure","jdbc"],"comments":[{"owner":{"account_id":62482,"reputation":23878,"user_id":185647,"display_name":"Squirrel"},"score":0,"creation_date":1656319019,"post_id":72769027,"comment_id":128533515,"body_markdown":"What is the error message ?","body":"What is the error message ?"},{"owner":{"account_id":25658565,"reputation":11,"user_id":19424601,"display_name":"flteam"},"score":0,"creation_date":1656320584,"post_id":72769027,"comment_id":128534077,"body_markdown":"@Squirrel there is no error message but the connection still with sql server language us_english and not Spanish","body":"@Squirrel there is no error message but the connection still with sql server language us_english and not Spanish"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656320892,"post_id":72769027,"comment_id":128534163,"body_markdown":"To me it seems you are mistaking something. [eu_english](https://en.wikipedia.org/wiki/Date_and_time_notation_in_Europe#:~:text=Official%20EU%20documents%20still%20tend,YYYY%2DMM%2DDD.%22) has format yyyy-MM-dd. The format `mdy` is something you would rather find in the US. And you most probably don&#39;t even need to change the language, just properly parse the parameters, which should automatically happen if you use `PreparedStatement`","body":"To me it seems you are mistaking something. <a href=\"https://en.wikipedia.org/wiki/Date_and_time_notation_in_Europe#:~:text=Official%20EU%20documents%20still%20tend,YYYY%2DMM%2DDD.%22\" rel=\"nofollow noreferrer\">eu_english</a> has format yyyy-MM-dd. The format <code>mdy</code> is something you would rather find in the US. And you most probably don&#39;t even need to change the language, just properly parse the parameters, which should automatically happen if you use <code>PreparedStatement</code>"},{"owner":{"account_id":25658565,"reputation":11,"user_id":19424601,"display_name":"flteam"},"score":0,"creation_date":1656321235,"post_id":72769027,"comment_id":128534291,"body_markdown":"In sql server the language is eu_english and it shows dates in format mdy, if I check available languages it shows actual is eu_english and the date format is mdy it also shown in sql server .... I need to change language but if its possible without changing java code, I mean doing in the connection string or in mybatis config","body":"In sql server the language is eu_english and it shows dates in format mdy, if I check available languages it shows actual is eu_english and the date format is mdy it also shown in sql server .... I need to change language but if its possible without changing java code, I mean doing in the connection string or in mybatis config"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656322341,"post_id":72769027,"comment_id":128534674,"body_markdown":"You don&#39;t need to adjust the language. When saving dates, it doesn&#39;t matter in what format they are **displayed**. And you don&#39;t show any error you are getting making it a guess game on what the proper way forward is","body":"You don&#39;t need to adjust the language. When saving dates, it doesn&#39;t matter in what format they are <b>displayed</b>. And you don&#39;t show any error you are getting making it a guess game on what the proper way forward is"},{"owner":{"account_id":25658565,"reputation":11,"user_id":19424601,"display_name":"flteam"},"score":0,"creation_date":1656322444,"post_id":72769027,"comment_id":128534698,"body_markdown":"For what I need i can&#180;t do what you want, I need to change language of the connection, I&#180;m using mybatis maybe that can help to change language of the connection. If I need to convert from string to date is a problem the default language because default language english, default convert is mdy and I need dmy without using format","body":"For what I need i can&#180;t do what you want, I need to change language of the connection, I&#180;m using mybatis maybe that can help to change language of the connection. If I need to convert from string to date is a problem the default language because default language english, default convert is mdy and I need dmy without using format"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656322854,"post_id":72769027,"comment_id":128534824,"body_markdown":"Well, you don&#39;t really specify what you need, thus making it nearly impossible to help you. If you want good answers, you need to specify your exact problem (which is not the language) as well as what you aim for","body":"Well, you don&#39;t really specify what you need, thus making it nearly impossible to help you. If you want good answers, you need to specify your exact problem (which is not the language) as well as what you aim for"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1656322919,"post_id":72769027,"comment_id":128534853,"body_markdown":"Does this answer your question? [How to set date format in a connection to SQL?](https://stackoverflow.com/questions/6180646/how-to-set-date-format-in-a-connection-to-sql)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/6180646/how-to-set-date-format-in-a-connection-to-sql\">How to set date format in a connection to SQL?</a>"},{"owner":{"account_id":10773302,"reputation":2841,"user_id":7926183,"display_name":"SMor"},"score":2,"creation_date":1656323484,"post_id":72769027,"comment_id":128535058,"body_markdown":"The default language is determined by the **login**. But this is likely a [XY problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem) that is better address by changing your application code. Usually this implies a sql injection problem where you create SQL statements using string concatenation.","body":"The default language is determined by the <b>login</b>. But this is likely a <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> that is better address by changing your application code. Usually this implies a sql injection problem where you create SQL statements using string concatenation."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1656323609,"post_id":72769027,"comment_id":128535113,"body_markdown":"The Microsoft SQL Server JDBC driver doesn&#39;t seem to have a `Language` [connection property](https://learn.microsoft.com/en-us/sql/connect/jdbc/setting-the-connection-properties?view=sql-server-ver16#properties). Why do you think that would work?","body":"The Microsoft SQL Server JDBC driver doesn&#39;t seem to have a <code>Language</code> <a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/setting-the-connection-properties?view=sql-server-ver16#properties\" rel=\"nofollow noreferrer\">connection property</a>. Why do you think that would work?"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":1,"creation_date":1656324235,"post_id":72769027,"comment_id":128535335,"body_markdown":"The database language should be completely irrelevant. Are using parameterized queries and sending `java.util.Date` values via `DATE` JDBC type parameters? If you need to change the database language to make your code work then it sounds like you are subject to SQL Injection attacks because you&#39;re concatenating string snippets to construct SQL queries.","body":"The database language should be completely irrelevant. Are using parameterized queries and sending <code>java.util.Date</code> values via <code>DATE</code> JDBC type parameters? If you need to change the database language to make your code work then it sounds like you are subject to SQL Injection attacks because you&#39;re concatenating string snippets to construct SQL queries."},{"owner":{"account_id":20264817,"reputation":56067,"user_id":14868997,"display_name":"Charlieface"},"score":0,"creation_date":1656331238,"post_id":72769027,"comment_id":128537812,"body_markdown":"Likely easier to just do `SET DATEFORMAT DMY;` but it&#39;s unclear why you need this, likely you are doing SQL ijnection which is another issue","body":"Likely easier to just do <code>SET DATEFORMAT DMY;</code> but it&#39;s unclear why you need this, likely you are doing SQL ijnection which is another issue"}],"answers":[{"tags":[],"owner":{"account_id":25083267,"reputation":621,"user_id":18935775,"display_name":"RajkumarPalnati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656419128,"creation_date":1656419128,"answer_id":72786398,"question_id":72769027,"body_markdown":"According to the post [Change the default language of Azure SQL Database](  https://techcommunity.microsoft.com/t5/azure-database-support-blog/lesson-learned-16-how-to-change-the-default-language-of-azure/ba-p/368844) given by **@Jose Manuel Jurado Diaz**.\r\n\r\nCurrently, using stored procedures or at logging time using `T-SQL` to set the default language at the server level is not supported.\r\n\r\nAs, System messages and datetime formats are determined by the session language.\r\n\r\nThe workaround for this is to use the following command.\r\n\r\n- To mention language in connection string you can specify this keyword [Current Language](https://learn.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlconnection.connectionstring?redirectedfrom=MSDN&amp;view=dotnet-plat-ext-6.0#System_Data_SqlClient_SqlConnection_ConnectionString) with the language you want ex. **`Current Language=Spanish`**\r\n\r\n- If the connection is already established\r\n\r\n```sql\r\nSET LANGUAGE Spanish;\r\n```\r\n\r\n***Changed language from `us_english` to `Spanish` and get date format from MDY to DMY***\r\n\r\n*Below is the sample code and output result:*\r\n```sql\r\nSELECT @@language;\r\nselect format(getdate(),&#39;d&#39;);\r\nSET Language Spanish;\r\nSELECT @@language;\r\nselect format(getdate(),&#39;d&#39;);\r\n```\r\n\r\n***Output:***\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PclL3.jpg","title":"Change language in SQL Server connection string","body":"<p>According to the post <a href=\"https://techcommunity.microsoft.com/t5/azure-database-support-blog/lesson-learned-16-how-to-change-the-default-language-of-azure/ba-p/368844\" rel=\"nofollow noreferrer\">Change the default language of Azure SQL Database</a> given by <strong>@Jose Manuel Jurado Diaz</strong>.</p>\n<p>Currently, using stored procedures or at logging time using <code>T-SQL</code> to set the default language at the server level is not supported.</p>\n<p>As, System messages and datetime formats are determined by the session language.</p>\n<p>The workaround for this is to use the following command.</p>\n<ul>\n<li><p>To mention language in connection string you can specify this keyword <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlconnection.connectionstring?redirectedfrom=MSDN&amp;view=dotnet-plat-ext-6.0#System_Data_SqlClient_SqlConnection_ConnectionString\" rel=\"nofollow noreferrer\">Current Language</a> with the language you want ex. <strong><code>Current Language=Spanish</code></strong></p>\n</li>\n<li><p>If the connection is already established</p>\n</li>\n</ul>\n<pre class=\"lang-sql prettyprint-override\"><code>SET LANGUAGE Spanish;\n</code></pre>\n<p><em><strong>Changed language from <code>us_english</code> to <code>Spanish</code> and get date format from MDY to DMY</strong></em></p>\n<p><em>Below is the sample code and output result:</em></p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT @@language;\nselect format(getdate(),'d');\nSET Language Spanish;\nSELECT @@language;\nselect format(getdate(),'d');\n</code></pre>\n<p><em><strong>Output:</strong></em></p>\n<p><a href=\"https://i.stack.imgur.com/PclL3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PclL3.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2559123,"reputation":337,"user_id":2220516,"display_name":"Roberto Novakosky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691516791,"creation_date":1691516791,"answer_id":76862025,"question_id":72769027,"body_markdown":"Some drivers dont have support to Language= or Current Language= on ConnectionString, so the solution is to execute the SQL command after the sucessfull connection, &quot;SET LANGUAGE Spanish;&quot;\r\n\r\nOther solution is on SQL Server set the default language to your desired user. One way is using Management Studio, click with right button on user, choose properties and so change the Default Language to that user.","title":"Change language in SQL Server connection string","body":"<p>Some drivers dont have support to Language= or Current Language= on ConnectionString, so the solution is to execute the SQL command after the sucessfull connection, &quot;SET LANGUAGE Spanish;&quot;</p>\n<p>Other solution is on SQL Server set the default language to your desired user. One way is using Management Studio, click with right button on user, choose properties and so change the Default Language to that user.</p>\n"}],"owner":{"account_id":25658565,"reputation":11,"user_id":19424601,"display_name":"flteam"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691516791,"creation_date":1656318133,"question_id":72769027,"body_markdown":"I have a SQL Server in Azure, with default language eu_english. That means that the dates are in format mdy and I need them in dmy, I want to put the language to Spanish in the connection string. I have tried this. but it doesn&#39;t work:\r\n\r\n    jdbc:sqlserver://myazureURL:1433;DatabaseName=MyDataBase;Language=Spanish\r\n\r\nI have tried adding Language=Spanish, but it doesn&#39;t work. I have also tried Language=5 because 5 is the Spanish Id of languages of my SQL Server.\r\n\r\nI need this because I can&#39;t change default language from database settings. If I try to change default language with that:\r\n\r\n    EXEC sp_configure &#39;default language&#39;, &#39;Spanish&#39;;\r\n\r\nIt gives me this error:\r\n\r\n    EXEC sp_configure &#39;default language&#39;, &#39;Spanish&#39;;\r\n\r\n\r\nEDIT WITH SOLUTION:\r\nI solved it incluiding this to the connection String so in each connection it sets the language:\r\n\r\n     connectionInitSqls =&quot;SET LANGUAGE Spanish&quot;","title":"Change language in SQL Server connection string","body":"<p>I have a SQL Server in Azure, with default language eu_english. That means that the dates are in format mdy and I need them in dmy, I want to put the language to Spanish in the connection string. I have tried this. but it doesn't work:</p>\n<pre><code>jdbc:sqlserver://myazureURL:1433;DatabaseName=MyDataBase;Language=Spanish\n</code></pre>\n<p>I have tried adding Language=Spanish, but it doesn't work. I have also tried Language=5 because 5 is the Spanish Id of languages of my SQL Server.</p>\n<p>I need this because I can't change default language from database settings. If I try to change default language with that:</p>\n<pre><code>EXEC sp_configure 'default language', 'Spanish';\n</code></pre>\n<p>It gives me this error:</p>\n<pre><code>EXEC sp_configure 'default language', 'Spanish';\n</code></pre>\n<p>EDIT WITH SOLUTION:\nI solved it incluiding this to the connection String so in each connection it sets the language:</p>\n<pre><code> connectionInitSqls =&quot;SET LANGUAGE Spanish&quot;\n</code></pre>\n"},{"tags":["java","android","websocket"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691516770,"post_id":76862008,"comment_id":135501366,"body_markdown":"Hello, welcome to Stack Overflow! Maybe you should [read this](https://stackoverflow.com/help/how-to-ask), and then edit your question.","body":"Hello, welcome to Stack Overflow! Maybe you should <a href=\"https://stackoverflow.com/help/how-to-ask\">read this</a>, and then edit your question."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691577091,"post_id":76862008,"comment_id":135509487,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29186483,"reputation":1,"user_id":22359537,"display_name":"chen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691516543,"creation_date":1691516543,"question_id":76862008,"body_markdown":"Use java to develop Android applications, update the elements of the page after receiving a request from a third partyI use Socket here, what else can I use?\r\n\r\nSince I use Socket, I can&#39;t return the status of my current execution to the third-party service (e.g. whether I updated successfully), so I want to replace it","title":"Android handles third-party requests to update page elements","body":"<p>Use java to develop Android applications, update the elements of the page after receiving a request from a third partyI use Socket here, what else can I use?</p>\n<p>Since I use Socket, I can't return the status of my current execution to the third-party service (e.g. whether I updated successfully), so I want to replace it</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","openapi-generator-maven-plugin"],"owner":{"account_id":250416,"reputation":5418,"user_id":527116,"accept_rate":85,"display_name":"aweis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691516428,"creation_date":1691516428,"question_id":76861994,"body_markdown":"I have a spring boot 3 project that uses multiple data sources for different JPA repositories, and on the rest controllers I use openapi generators such that I can create clients etc. for the controllers.\r\n\r\nMy issue is that I can&#39;t figure out how to correctly configure my profile that I use for the openapi generation, such that my datasources are ignored and the application not trying to connect to the databases, that are not available at this time.\r\n\r\nI have implemented the multiple data sources using this approach [Configure and Use Multiple DataSources in Spring Boot\r\n][1]\r\n\r\nAnd for normal configuration I would exclude the auto configure of JDBC, orm, JPA etc. as such:\r\n\r\n```\r\nspring:\r\n    autoconfigure:\r\n        exclude:\r\n          - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\r\n          - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n          - org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration\r\n```\r\n\r\nBut this still don&#39;t work as I get an error due to the creation of `entityManagerFactoryRef` in the `EnableJpaRepositories`.\r\n\r\nIs there any way to ensure that I can start my spring boot application, without access to any databases, during build time?\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-configure-multiple-datasources","title":"Exclude spring boot JPA repository for code generation","body":"<p>I have a spring boot 3 project that uses multiple data sources for different JPA repositories, and on the rest controllers I use openapi generators such that I can create clients etc. for the controllers.</p>\n<p>My issue is that I can't figure out how to correctly configure my profile that I use for the openapi generation, such that my datasources are ignored and the application not trying to connect to the databases, that are not available at this time.</p>\n<p>I have implemented the multiple data sources using this approach <a href=\"https://www.baeldung.com/spring-boot-configure-multiple-datasources\" rel=\"nofollow noreferrer\">Configure and Use Multiple DataSources in Spring Boot\n</a></p>\n<p>And for normal configuration I would exclude the auto configure of JDBC, orm, JPA etc. as such:</p>\n<pre><code>spring:\n    autoconfigure:\n        exclude:\n          - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\n          - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n          - org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration\n</code></pre>\n<p>But this still don't work as I get an error due to the creation of <code>entityManagerFactoryRef</code> in the <code>EnableJpaRepositories</code>.</p>\n<p>Is there any way to ensure that I can start my spring boot application, without access to any databases, during build time?</p>\n"},{"tags":["java","junit","junit5","jmockit"],"comments":[{"owner":{"account_id":6379952,"reputation":3111,"user_id":4949750,"display_name":"Amongalen"},"score":1,"creation_date":1588075431,"post_id":61479703,"comment_id":108754790,"body_markdown":"&quot;If the JMockit jar comes after the JUnit jar in the classpath, it might cause problems.&quot; - [source](https://stackoverflow.com/a/2906690/4949750). This may be the case here as well.","body":"&quot;If the JMockit jar comes after the JUnit jar in the classpath, it might cause problems.&quot; - <a href=\"https://stackoverflow.com/a/2906690/4949750\">source</a>. This may be the case here as well."},{"owner":{"account_id":18428891,"reputation":71,"user_id":13424510,"display_name":"Sunikkana Sarkar"},"score":0,"creation_date":1588075575,"post_id":61479703,"comment_id":108754866,"body_markdown":"The JMockit jar precedes JUnit5 Library in the project classpath","body":"The JMockit jar precedes JUnit5 Library in the project classpath"},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":0,"creation_date":1588278417,"post_id":61479703,"comment_id":108845672,"body_markdown":"Is it &quot;please check the -javaagent JVM initialization parameter was used&quot; not clear enough? JMockit documentation shows how to specify it.","body":"Is it &quot;please check the -javaagent JVM initialization parameter was used&quot; not clear enough? JMockit documentation shows how to specify it."},{"owner":{"account_id":2197266,"reputation":2881,"user_id":1942602,"accept_rate":48,"display_name":"Xavier DSouza"},"score":1,"creation_date":1594395043,"post_id":61479703,"comment_id":111120744,"body_markdown":"I got same error. Need to provide it as JVM argument - https://jmockit.github.io/tutorial/Introduction.html#runningTests","body":"I got same error. Need to provide it as JVM argument - <a href=\"https://jmockit.github.io/tutorial/Introduction.html#runningTests\" rel=\"nofollow noreferrer\">jmockit.github.io/tutorial/Introduction.html#runningTests</a>"},{"owner":{"account_id":5190973,"reputation":1047,"user_id":4153915,"accept_rate":38,"display_name":"Prashanth Debbadwar"},"score":0,"creation_date":1609325793,"post_id":61479703,"comment_id":115811554,"body_markdown":"@SunikkanaSarkar have you found any solution?","body":"@SunikkanaSarkar have you found any solution?"}],"answers":[{"tags":[],"owner":{"account_id":10480891,"reputation":53,"user_id":7725919,"display_name":"it-is-gut"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1622010354,"creation_date":1622010354,"answer_id":67699563,"question_id":61479703,"body_markdown":"I had the same error while trying to use JMockit 1.49. I also came across [this][1] link and made sure that my JMockit jar comes before the JUnit jar in the classpath. However, this did not work in my case.\r\n\r\nAs already suggested, the error message gives you the solution:\r\n\r\n&gt; check the -javaagent JVM initialization parameter\r\n\r\nIn eclipse, go to the run configurations (Run &gt; Run Configurations). Then select the one you are using to run the JUnit tests. Under the tab &quot;Arguments&quot; you have to add the following line:\r\n\r\n`-javaagent:path-to-your-jmockit-jar/jmockit-1.49.jar`\r\n\r\nThen you should be fine!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2905735/jmockit-initialization-problem/2906690#2906690","title":"JMockit with JUnit5 - JMockit didn&#39;t get initialized","body":"<p>I had the same error while trying to use JMockit 1.49. I also came across <a href=\"https://stackoverflow.com/questions/2905735/jmockit-initialization-problem/2906690#2906690\">this</a> link and made sure that my JMockit jar comes before the JUnit jar in the classpath. However, this did not work in my case.</p>\n<p>As already suggested, the error message gives you the solution:</p>\n<blockquote>\n<p>check the -javaagent JVM initialization parameter</p>\n</blockquote>\n<p>In eclipse, go to the run configurations (Run &gt; Run Configurations). Then select the one you are using to run the JUnit tests. Under the tab &quot;Arguments&quot; you have to add the following line:</p>\n<p><code>-javaagent:path-to-your-jmockit-jar/jmockit-1.49.jar</code></p>\n<p>Then you should be fine!</p>\n"},{"tags":[],"owner":{"account_id":557950,"reputation":1088,"user_id":920554,"accept_rate":100,"display_name":"Mingtao Sun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670892483,"creation_date":1670892483,"answer_id":74778866,"question_id":61479703,"body_markdown":"Add below to the pom.xml\r\n        \r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.22.2&lt;/version&gt;\r\n    \t&lt;configuration&gt;\r\n    \t\t&lt;argLine&gt;-javaagent:${settings.localRepository}/org/jmockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar&lt;/argLine&gt;\r\n    \t&lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"JMockit with JUnit5 - JMockit didn&#39;t get initialized","body":"<p>Add below to the pom.xml</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.22.2&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;argLine&gt;-javaagent:${settings.localRepository}/org/jmockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar&lt;/argLine&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8728107,"reputation":1,"user_id":6529144,"display_name":"Ranchooo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691515426,"creation_date":1691502921,"answer_id":76860235,"question_id":61479703,"body_markdown":"Add below to your gradle file, here is the link https://jmockit.github.io/tutorial/Introduction.html#runningTests\r\n\r\n    test {\r\n        jvmArgs &quot;-javaagent:${classpath.find { it.name.contains(&quot;jmockit&quot;) }.absolutePath}&quot;\r\n    }","title":"JMockit with JUnit5 - JMockit didn&#39;t get initialized","body":"<p>Add below to your gradle file, here is the link <a href=\"https://jmockit.github.io/tutorial/Introduction.html#runningTests\" rel=\"nofollow noreferrer\">https://jmockit.github.io/tutorial/Introduction.html#runningTests</a></p>\n<pre><code>test {\n    jvmArgs &quot;-javaagent:${classpath.find { it.name.contains(&quot;jmockit&quot;) }.absolutePath}&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":18428891,"reputation":71,"user_id":13424510,"display_name":"Sunikkana Sarkar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9178,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1691515426,"creation_date":1588075259,"question_id":61479703,"body_markdown":"When I am using the following Test method using JUnit 5 and JMockit, I am getting an error as:\r\n\r\n**JMockit didn&#39;t get initialized; please check the -javaagent JVM initialization parameter was used**\r\n\r\nThese are my classes which I created and want to test:\r\n\r\n        import java.util.ArrayList;\r\n        import java.util.Collections;\r\n        import java.util.List;\r\n    \r\n        class Employee \r\n        {\r\n    \t    private Integer empId;\r\n    \t    private String empName;\r\n    \t\r\n    \t    public Employee(Integer empId,String empName)\r\n    \t    {\r\n    \t\t    this.empId = empId;\r\n    \t\t    this.empName = empName;\r\n    \t    }\r\n    \t\r\n    \t    public Integer getEmpId() {\r\n    \t\t    return empId;\r\n    \t    }\r\n    \t    public void setEmpId(Integer empId) {\r\n    \t\t    this.empId = empId;\r\n    \t    }\r\n    \t    public String getEmpName() {\r\n    \t\t    return empName;\r\n    \t    }\r\n    \t    public void setEmpName(String empName) {\r\n    \t\t   this.empName = empName;\r\n    \t    }\r\n        }\r\n        class EmployeeDAO\r\n        {\r\n    \t    private static List&lt;Employee&gt; employeeList = new ArrayList&lt;Employee&gt;();\r\n    \t\r\n    \t    static\r\n    \t    {\r\n    \t\t   Employee e1 = new Employee(1001, &quot;John&quot;);\r\n    \t\t   Employee e2 = new Employee(1002, &quot;Jack&quot;);\r\n    \t\t\r\n    \t\t   Collections.addAll(employeeList, e1,e2);\r\n    \t    }\r\n    \r\n    \t    public static List&lt;Employee&gt; getEmployeeList() {\r\n    \t\t   return employeeList;\r\n    \t    }\r\n    \r\n    \t    public static void setEmployeeList(List&lt;Employee&gt; employeeList) {\r\n    \t\t   EmployeeDAO.employeeList = employeeList;\r\n    \t    }\r\n        }\r\n    \r\n        class EmployeeService\r\n        {\r\n    \t   public List&lt;Employee&gt; getEmployees()\r\n    \t   {\r\n    \t\t   List&lt;Employee&gt; empListFromDao = new ArrayList&lt;Employee&gt;();\r\n    \t\t   try\r\n    \t\t   {\r\n    \t\t\t   empListFromDao = EmployeeDAO.getEmployeeList();\r\n    \t\t   }\r\n    \t\t   catch(Exception e)\r\n    \t\t   {\r\n    \t\t\t  throw e;\r\n    \t\t   }\r\n    \t\t   return empListFromDao;\r\n    \t   }\r\n        }\r\n\r\nAnd this is my Test Implementation:\r\n     \r\n    import org.junit.jupiter.api.Assertions;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    \r\n    import mockit.Mock;\r\n    import mockit.MockUp;\r\n    import mockit.integration.junit5.JMockitExtension;\r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    \r\n    @ExtendWith(JMockitExtension.class)\r\n    public class EmployeeTest\r\n    {\r\n          @Test\r\n          public void testMethodForStaticMock$FromService()\r\n          {\r\n    \t      new MockUp&lt;EmployeeDAO&gt;()\r\n    \t  {\r\n    \t\t  @Mock\r\n    \t\t  public List&lt;Employee&gt; getEmployeeList()\r\n    \t\t  {\r\n    \t\t\t  return new ArrayList&lt;Employee&gt;();\r\n    \t\t  }\r\n    \t  };\r\n    \t\r\n    \t      EmployeeService service = new EmployeeService();\r\n    \t      assertEquals(0,service.getEmployees().size());\r\n          }\r\n    }\r\n\r\n\r\nProject Stack I have used:\r\n\r\n - JDK 11.0.1\r\n - Eclipse IDE 2020-03\r\n - JUnit 5 (Added as library in Eclipse to project&#39;s classpath)\r\n - JMockit 1.49 (Added as JAR)\r\n\r\nDue to the above mentioned problem my test case is not passing. \r\nAny suggestions on how to resolve this issue? Or is there any other way to mock a static method?\r\n\r\n","title":"JMockit with JUnit5 - JMockit didn&#39;t get initialized","body":"<p>When I am using the following Test method using JUnit 5 and JMockit, I am getting an error as:</p>\n\n<p><strong>JMockit didn't get initialized; please check the -javaagent JVM initialization parameter was used</strong></p>\n\n<p>These are my classes which I created and want to test:</p>\n\n<pre><code>    import java.util.ArrayList;\n    import java.util.Collections;\n    import java.util.List;\n\n    class Employee \n    {\n        private Integer empId;\n        private String empName;\n\n        public Employee(Integer empId,String empName)\n        {\n            this.empId = empId;\n            this.empName = empName;\n        }\n\n        public Integer getEmpId() {\n            return empId;\n        }\n        public void setEmpId(Integer empId) {\n            this.empId = empId;\n        }\n        public String getEmpName() {\n            return empName;\n        }\n        public void setEmpName(String empName) {\n           this.empName = empName;\n        }\n    }\n    class EmployeeDAO\n    {\n        private static List&lt;Employee&gt; employeeList = new ArrayList&lt;Employee&gt;();\n\n        static\n        {\n           Employee e1 = new Employee(1001, \"John\");\n           Employee e2 = new Employee(1002, \"Jack\");\n\n           Collections.addAll(employeeList, e1,e2);\n        }\n\n        public static List&lt;Employee&gt; getEmployeeList() {\n           return employeeList;\n        }\n\n        public static void setEmployeeList(List&lt;Employee&gt; employeeList) {\n           EmployeeDAO.employeeList = employeeList;\n        }\n    }\n\n    class EmployeeService\n    {\n       public List&lt;Employee&gt; getEmployees()\n       {\n           List&lt;Employee&gt; empListFromDao = new ArrayList&lt;Employee&gt;();\n           try\n           {\n               empListFromDao = EmployeeDAO.getEmployeeList();\n           }\n           catch(Exception e)\n           {\n              throw e;\n           }\n           return empListFromDao;\n       }\n    }\n</code></pre>\n\n<p>And this is my Test Implementation:</p>\n\n<pre><code>import org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\nimport mockit.Mock;\nimport mockit.MockUp;\nimport mockit.integration.junit5.JMockitExtension;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\n@ExtendWith(JMockitExtension.class)\npublic class EmployeeTest\n{\n      @Test\n      public void testMethodForStaticMock$FromService()\n      {\n          new MockUp&lt;EmployeeDAO&gt;()\n      {\n          @Mock\n          public List&lt;Employee&gt; getEmployeeList()\n          {\n              return new ArrayList&lt;Employee&gt;();\n          }\n      };\n\n          EmployeeService service = new EmployeeService();\n          assertEquals(0,service.getEmployees().size());\n      }\n}\n</code></pre>\n\n<p>Project Stack I have used:</p>\n\n<ul>\n<li>JDK 11.0.1</li>\n<li>Eclipse IDE 2020-03</li>\n<li>JUnit 5 (Added as library in Eclipse to project's classpath)</li>\n<li>JMockit 1.49 (Added as JAR)</li>\n</ul>\n\n<p>Due to the above mentioned problem my test case is not passing. \nAny suggestions on how to resolve this issue? Or is there any other way to mock a static method?</p>\n"},{"tags":["java","xml","jackson","jaxb"],"owner":{"account_id":3801209,"reputation":283,"user_id":3154817,"accept_rate":50,"display_name":"raedma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691515149,"creation_date":1691509345,"question_id":76861157,"body_markdown":"I found a problem when switching from a `JAXB` to a `Jackson` based serialization with the `JakartaXmlBindAnnotationModule` of a simple POJO. The POJO has an integer array attribute that is handled differently between the two approaches, see the MWE below.\r\n\r\nFor the `JAXB` based approach, I basically get the result I expect:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;pojo dimensions=&quot;4 3&quot;/&gt;\r\n\r\nFor the `Jackson` variant the output is:\r\n\r\n    &lt;POJO dimensions=&quot;4&quot; dimensions=&quot;3&quot;/&gt;\r\n\r\nwhich later fails during deserialization, as there are now two attributes with the name `dimensions`. Basically, the `Jackson` variant seems to serialize the array with the same approach for `@XmlAttribute` and `@XmlElement`, while the `JAXB` variant seems to recognize that for the use in a `@XmlAttribute` it is not necessary to repeat the attribute name and simply concat the values separated by a space delimiter.\r\n\r\nIs there any way to get the `Jackson`-based variant to behave the same as the `JAXB` one?\r\n\r\n\r\n----------\r\n# MWE #\r\n\r\n## `POJO.java` ##\r\n\r\n    import com.fasterxml.jackson.annotation.JsonTypeInfo;\r\n    import jakarta.xml.bind.annotation.XmlAccessType;\r\n    import jakarta.xml.bind.annotation.XmlAccessorType;\r\n    import jakarta.xml.bind.annotation.XmlAttribute;\r\n    import jakarta.xml.bind.annotation.XmlRootElement;\r\n\r\n    @XmlRootElement\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n\r\n    public class POJO{\r\n        \r\n        @XmlAttribute\r\n        private int[] dimensions;\r\n\r\n        public POJO() {}\r\n\r\n        public POJO(\r\n                int[] dimensions\r\n        ) {\r\n            this.dimensions = dimensions;\r\n        }\r\n\r\n        public void setDimensions(int[] v){this.dimensions = v;}\r\n        public int[] getDimensions(){return dimensions;}\r\n\r\n    }\r\n\r\n## `Main.java` ##\r\n\r\n    import com.fasterxml.jackson.annotation.JsonInclude;\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.DeserializationFeature;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    import com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\n    import com.fasterxml.jackson.module.jakarta.xmlbind.JakartaXmlBindAnnotationModule;\r\n    import jakarta.xml.bind.JAXBContext;\r\n    import jakarta.xml.bind.JAXBException;\r\n    import jakarta.xml.bind.Marshaller;\r\n    import jakarta.xml.bind.Unmarshaller;\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.InputStream;\r\n    import java.io.StringWriter;\r\n    import java.nio.charset.StandardCharsets;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) throws JAXBException, JsonProcessingException {\r\n            \r\n            POJO pojo = new POJO(new int[]{4,3});\r\n            \r\n            jaxb(pojo);\r\n            jackson(pojo);\r\n            \r\n        }\r\n        \r\n        public static void jaxb(POJO pojo) throws JAXBException{\r\n            \r\n            System.out.println(&quot;JAXB&quot;);\r\n            \r\n            // Serialize\r\n            JAXBContext context = JAXBContext.newInstance(pojo.getClass());\r\n\r\n            //Marshaller marshaller = context.createMarshaller();\r\n            Marshaller marshaller = context.createMarshaller();\r\n            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n                \r\n            // Creating the Document object\r\n            StringWriter document = new StringWriter();\r\n\r\n            // Marshaling the User object into a Document object\r\n            marshaller.marshal(pojo, document);\r\n\r\n            //\r\n            String serialized = document.toString();\r\n            \r\n            System.out.println(&quot;serialized:&quot;);\r\n            System.out.println(serialized);\r\n            \r\n            // Deserialize\r\n            Unmarshaller unmarshaller = context.createUnmarshaller();\r\n            InputStream stream = new ByteArrayInputStream(serialized.getBytes(StandardCharsets.UTF_8));\r\n            POJO result = (POJO)unmarshaller.unmarshal(stream);\r\n            \r\n            assert (result != null);\r\n        }\r\n        \r\n        public static void jackson(POJO pojo) throws JsonProcessingException{\r\n            \r\n            System.out.println(&quot;Jackson&quot;);\r\n            \r\n            // Serialize\r\n            ObjectMapper objectMapper = XmlMapper.builder()\r\n                    .defaultUseWrapper(false)\r\n                    .addModule(new JakartaXmlBindAnnotationModule())\r\n                    .enable(SerializationFeature.INDENT_OUTPUT)\r\n                    .serializationInclusion(JsonInclude.Include.NON_EMPTY)\r\n                    .build();\r\n            String serialized = objectMapper.writeValueAsString(pojo);\r\n            \r\n            System.out.println(&quot;serialized:&quot;);\r\n            System.out.println(serialized);\r\n            \r\n            // Deserialize\r\n            XmlMapper objectMapper2 = new XmlMapper();\r\n            objectMapper2.configure(DeserializationFeature.UNWRAP_ROOT_VALUE, false);\r\n            objectMapper2.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\r\n            objectMapper2.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n            objectMapper2.registerModule(new JakartaXmlBindAnnotationModule());      \r\n            \r\n            POJO result = (POJO)objectMapper.readValue(serialized,POJO.class);\r\n            \r\n            assert (result != null);\r\n            \r\n        }\r\n    }\r\n\r\n## `pom.xml` ##\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;de.mr&lt;/groupId&gt;\r\n        &lt;artifactId&gt;qarrayserializationjackson&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n            &lt;!-- Jackson   --&gt;\r\n            &lt;!--&lt;jackson.core.databind.version&gt;2.12.3&lt;/jackson.core.databind.version&gt;--&gt;\r\n            &lt;jackson.dataformat.protobuf.version&gt;2.15.2&lt;/jackson.dataformat.protobuf.version&gt;\r\n            &lt;jackson.dataformat.xml.version&gt;2.15.2&lt;/jackson.dataformat.xml.version&gt;\r\n            &lt;jackson.dataformat.yaml.version&gt;2.15.2&lt;/jackson.dataformat.yaml.version&gt;\r\n            &lt;!-- JAXB --&gt;\r\n            &lt;jakarta.xml.bind.jaxb-api.version&gt;4.0.0&lt;/jakarta.xml.bind.jaxb-api.version&gt;\r\n            &lt;org.glassfish.jaxb.jaxb-runtime.version&gt;4.0.3&lt;/org.glassfish.jaxb.jaxb-runtime.version&gt;\r\n        &lt;/properties&gt;\r\n        \r\n        &lt;!-- DEPENDENCIES --&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;!--           --&gt;\r\n            &lt;!-- 3rd party --&gt;\r\n            &lt;!--           --&gt;\r\n            &lt;!-- Jakarta --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${jakarta.xml.bind.jaxb-api.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n                &lt;version&gt;${org.glassfish.jaxb.jaxb-runtime.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- Jackson --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-dataformat-protobuf&lt;/artifactId&gt;\r\n                &lt;version&gt;${jackson.dataformat.protobuf.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n                &lt;version&gt;${jackson.dataformat.xml.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-module-jakarta-xmlbind-annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;${jackson.dataformat.xml.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\r\n                &lt;version&gt;${jackson.dataformat.yaml.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--           --&gt;\r\n            &lt;!-- Testing   --&gt;\r\n            &lt;!--           --&gt;\r\n            &lt;!-- Own       --&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n# Serialization output #\r\n\r\nsee above\r\n\r\n# Logs #\r\n\r\n## `Jackson` error ##\r\n\r\n    Exception in thread &quot;main&quot; com.fasterxml.jackson.core.JsonParseException: Duplicate attribute &#39;dimensions&#39;.\r\n     at [row,col {unknown-source}]: [1,37]\r\n      at com.fasterxml.jackson.dataformat.xml.XmlFactory._initializeXmlReader(XmlFactory.java:734)","title":"Jackson: Serialization of primitive array leads to problematic differences compared to JAXB","body":"<p>I found a problem when switching from a <code>JAXB</code> to a <code>Jackson</code> based serialization with the <code>JakartaXmlBindAnnotationModule</code> of a simple POJO. The POJO has an integer array attribute that is handled differently between the two approaches, see the MWE below.</p>\n<p>For the <code>JAXB</code> based approach, I basically get the result I expect:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;pojo dimensions=&quot;4 3&quot;/&gt;\n</code></pre>\n<p>For the <code>Jackson</code> variant the output is:</p>\n<pre><code>&lt;POJO dimensions=&quot;4&quot; dimensions=&quot;3&quot;/&gt;\n</code></pre>\n<p>which later fails during deserialization, as there are now two attributes with the name <code>dimensions</code>. Basically, the <code>Jackson</code> variant seems to serialize the array with the same approach for <code>@XmlAttribute</code> and <code>@XmlElement</code>, while the <code>JAXB</code> variant seems to recognize that for the use in a <code>@XmlAttribute</code> it is not necessary to repeat the attribute name and simply concat the values separated by a space delimiter.</p>\n<p>Is there any way to get the <code>Jackson</code>-based variant to behave the same as the <code>JAXB</code> one?</p>\n<hr />\n<h1>MWE</h1>\n<h2><code>POJO.java</code></h2>\n<pre><code>import com.fasterxml.jackson.annotation.JsonTypeInfo;\nimport jakarta.xml.bind.annotation.XmlAccessType;\nimport jakarta.xml.bind.annotation.XmlAccessorType;\nimport jakarta.xml.bind.annotation.XmlAttribute;\nimport jakarta.xml.bind.annotation.XmlRootElement;\n\n@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\n\npublic class POJO{\n    \n    @XmlAttribute\n    private int[] dimensions;\n\n    public POJO() {}\n\n    public POJO(\n            int[] dimensions\n    ) {\n        this.dimensions = dimensions;\n    }\n\n    public void setDimensions(int[] v){this.dimensions = v;}\n    public int[] getDimensions(){return dimensions;}\n\n}\n</code></pre>\n<h2><code>Main.java</code></h2>\n<pre><code>import com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\nimport com.fasterxml.jackson.module.jakarta.xmlbind.JakartaXmlBindAnnotationModule;\nimport jakarta.xml.bind.JAXBContext;\nimport jakarta.xml.bind.JAXBException;\nimport jakarta.xml.bind.Marshaller;\nimport jakarta.xml.bind.Unmarshaller;\nimport java.io.ByteArrayInputStream;\nimport java.io.InputStream;\nimport java.io.StringWriter;\nimport java.nio.charset.StandardCharsets;\n\npublic class Main {\n\n    public static void main(String[] args) throws JAXBException, JsonProcessingException {\n        \n        POJO pojo = new POJO(new int[]{4,3});\n        \n        jaxb(pojo);\n        jackson(pojo);\n        \n    }\n    \n    public static void jaxb(POJO pojo) throws JAXBException{\n        \n        System.out.println(&quot;JAXB&quot;);\n        \n        // Serialize\n        JAXBContext context = JAXBContext.newInstance(pojo.getClass());\n\n        //Marshaller marshaller = context.createMarshaller();\n        Marshaller marshaller = context.createMarshaller();\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n            \n        // Creating the Document object\n        StringWriter document = new StringWriter();\n\n        // Marshaling the User object into a Document object\n        marshaller.marshal(pojo, document);\n\n        //\n        String serialized = document.toString();\n        \n        System.out.println(&quot;serialized:&quot;);\n        System.out.println(serialized);\n        \n        // Deserialize\n        Unmarshaller unmarshaller = context.createUnmarshaller();\n        InputStream stream = new ByteArrayInputStream(serialized.getBytes(StandardCharsets.UTF_8));\n        POJO result = (POJO)unmarshaller.unmarshal(stream);\n        \n        assert (result != null);\n    }\n    \n    public static void jackson(POJO pojo) throws JsonProcessingException{\n        \n        System.out.println(&quot;Jackson&quot;);\n        \n        // Serialize\n        ObjectMapper objectMapper = XmlMapper.builder()\n                .defaultUseWrapper(false)\n                .addModule(new JakartaXmlBindAnnotationModule())\n                .enable(SerializationFeature.INDENT_OUTPUT)\n                .serializationInclusion(JsonInclude.Include.NON_EMPTY)\n                .build();\n        String serialized = objectMapper.writeValueAsString(pojo);\n        \n        System.out.println(&quot;serialized:&quot;);\n        System.out.println(serialized);\n        \n        // Deserialize\n        XmlMapper objectMapper2 = new XmlMapper();\n        objectMapper2.configure(DeserializationFeature.UNWRAP_ROOT_VALUE, false);\n        objectMapper2.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);\n        objectMapper2.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        objectMapper2.registerModule(new JakartaXmlBindAnnotationModule());      \n        \n        POJO result = (POJO)objectMapper.readValue(serialized,POJO.class);\n        \n        assert (result != null);\n        \n    }\n}\n</code></pre>\n<h2><code>pom.xml</code></h2>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;de.mr&lt;/groupId&gt;\n    &lt;artifactId&gt;qarrayserializationjackson&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n        &lt;!-- Jackson   --&gt;\n        &lt;!--&lt;jackson.core.databind.version&gt;2.12.3&lt;/jackson.core.databind.version&gt;--&gt;\n        &lt;jackson.dataformat.protobuf.version&gt;2.15.2&lt;/jackson.dataformat.protobuf.version&gt;\n        &lt;jackson.dataformat.xml.version&gt;2.15.2&lt;/jackson.dataformat.xml.version&gt;\n        &lt;jackson.dataformat.yaml.version&gt;2.15.2&lt;/jackson.dataformat.yaml.version&gt;\n        &lt;!-- JAXB --&gt;\n        &lt;jakarta.xml.bind.jaxb-api.version&gt;4.0.0&lt;/jakarta.xml.bind.jaxb-api.version&gt;\n        &lt;org.glassfish.jaxb.jaxb-runtime.version&gt;4.0.3&lt;/org.glassfish.jaxb.jaxb-runtime.version&gt;\n    &lt;/properties&gt;\n    \n    &lt;!-- DEPENDENCIES --&gt;\n    &lt;dependencies&gt;\n        &lt;!--           --&gt;\n        &lt;!-- 3rd party --&gt;\n        &lt;!--           --&gt;\n        &lt;!-- Jakarta --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;${jakarta.xml.bind.jaxb-api.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n            &lt;version&gt;${org.glassfish.jaxb.jaxb-runtime.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Jackson --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-protobuf&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.dataformat.protobuf.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.dataformat.xml.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-module-jakarta-xmlbind-annotations&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.dataformat.xml.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-yaml&lt;/artifactId&gt;\n            &lt;version&gt;${jackson.dataformat.yaml.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--           --&gt;\n        &lt;!-- Testing   --&gt;\n        &lt;!--           --&gt;\n        &lt;!-- Own       --&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<h1>Serialization output</h1>\n<p>see above</p>\n<h1>Logs</h1>\n<h2><code>Jackson</code> error</h2>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.core.JsonParseException: Duplicate attribute 'dimensions'.\n at [row,col {unknown-source}]: [1,37]\n  at com.fasterxml.jackson.dataformat.xml.XmlFactory._initializeXmlReader(XmlFactory.java:734)\n</code></pre>\n"},{"tags":["java","inheritance","casting"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1664036897,"post_id":73838822,"comment_id":130381826,"body_markdown":"Show the definitions of `Car`, `Truck`, `Sedan`, `Cabriolet` and their relation","body":"Show the definitions of <code>Car</code>, <code>Truck</code>, <code>Sedan</code>, <code>Cabriolet</code> and their relation"},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1664037181,"post_id":73838822,"comment_id":130381884,"body_markdown":"One never instances sub-classes from the class they extend. That&#39;s just illogical... the builder pattern might eventually be the closest to what you&#39;re trying to accomplish there. The whole type-casting is just pointless ... instead `return new Cabriolet()`.","body":"One never instances sub-classes from the class they extend. That&#39;s just illogical... the builder pattern might eventually be the closest to what you&#39;re trying to accomplish there. The whole type-casting is just pointless ... instead <code>return new Cabriolet()</code>."},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1664037665,"post_id":73838822,"comment_id":130381956,"body_markdown":"You can&#39;t cast a `Car` to a `Truck` or `Sedan` or any child class. That&#39;s the same as if you&#39;d try to cast an `Object` to a `String`. It doesn&#39;t matter that `Truck` implements `Car`, because you instantiated `defaultObj` as `new Car(...)`","body":"You can&#39;t cast a <code>Car</code> to a <code>Truck</code> or <code>Sedan</code> or any child class. That&#39;s the same as if you&#39;d try to cast an <code>Object</code> to a <code>String</code>. It doesn&#39;t matter that <code>Truck</code> implements <code>Car</code>, because you instantiated <code>defaultObj</code> as <code>new Car(...)</code>"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691514523,"creation_date":1664036877,"answer_id":73838850,"question_id":73838822,"body_markdown":"`new Car` will always be a `Car` instance. Unless `Truck`, `Sedan`, and `Cabriolet` are all interfaces, `Car` cannot be all of them at the same time (and it would be weird to have `Car implements Truck, Sedan, Cabriolet`; that doesn&#39;t really make sense).\r\n\r\nAnd why are you casting if you are only returning a `Car` from your method anyway? Effectively you execute `return (Car)(Truck)new Car(…);`\r\n\r\nYou cannot cast objects of the base class to a child class, because the base class doesn&#39;t have all the information required to represent instances of the child class.\r\n\r\nConsider the following example:\r\n\r\n```\r\nclass Car {\r\n  int wheels;\r\n  Car(int wheels) { this.wheels = wheels; }\r\n}\r\nclass Truck extends Car {\r\n  int weight;\r\n  Truck(int wheels, int weight) {\r\n    super(wheels);\r\n    this.weight = weight;\r\n  }\r\n}\r\n\r\nclass Program {\r\n  public static void main() {\r\n    Car car = new Car(4);\r\n    Truck truck = (Truck)car;\r\n    // what&#39;s the weight of the truck? impossible to know, because a Car is not a Truck\r\n  }\r\n}\r\n```\r\n\r\nThe above doesn&#39;t work, but the following does:\r\n\r\n```java\r\nclass Program {\r\n  public static void main() {\r\n    Car car = new Truck(4, 1000);\r\n    Truck truck = (Truck)car;\r\n    System.out.println(truck.weight);\r\n  }\r\n}\r\n```","title":"Narrowing Casting problem spoted by Intellij IDEA","body":"<p><code>new Car</code> will always be a <code>Car</code> instance. Unless <code>Truck</code>, <code>Sedan</code>, and <code>Cabriolet</code> are all interfaces, <code>Car</code> cannot be all of them at the same time (and it would be weird to have <code>Car implements Truck, Sedan, Cabriolet</code>; that doesn't really make sense).</p>\n<p>And why are you casting if you are only returning a <code>Car</code> from your method anyway? Effectively you execute <code>return (Car)(Truck)new Car(…);</code></p>\n<p>You cannot cast objects of the base class to a child class, because the base class doesn't have all the information required to represent instances of the child class.</p>\n<p>Consider the following example:</p>\n<pre><code>class Car {\n  int wheels;\n  Car(int wheels) { this.wheels = wheels; }\n}\nclass Truck extends Car {\n  int weight;\n  Truck(int wheels, int weight) {\n    super(wheels);\n    this.weight = weight;\n  }\n}\n\nclass Program {\n  public static void main() {\n    Car car = new Car(4);\n    Truck truck = (Truck)car;\n    // what's the weight of the truck? impossible to know, because a Car is not a Truck\n  }\n}\n</code></pre>\n<p>The above doesn't work, but the following does:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Program {\n  public static void main() {\n    Car car = new Truck(4, 1000);\n    Truck truck = (Truck)car;\n    System.out.println(truck.weight);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":25651489,"reputation":47,"user_id":19418655,"display_name":"Alexander"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73838850,"answer_count":1,"score":1,"last_activity_date":1691514523,"creation_date":1664036691,"question_id":73838822,"body_markdown":"I&#39;m trying to create a &quot;Truck&quot; using downcasting from the parent class (Truck extends Car)\r\n\r\n    private Truck truck;\r\n    \r\n    public void createTruck() {\r\n        Car basicCar = new Car();\r\n        this.truck = (Truck) basicCar;\r\n    }\r\n\r\n\r\n\r\nBut for some reason Intellij IDEA spots a problem\r\n\r\n&gt; Casting &#39;basicCar&#39; to &#39;Truck&#39; will produce &#39;ClassCastException&#39;for any non-null value\r\n\r\nWhat have I done wrong?","title":"Narrowing Casting problem spoted by Intellij IDEA","body":"<p>I'm trying to create a &quot;Truck&quot; using downcasting from the parent class (Truck extends Car)</p>\n<pre><code>private Truck truck;\n\npublic void createTruck() {\n    Car basicCar = new Car();\n    this.truck = (Truck) basicCar;\n}\n</code></pre>\n<p>But for some reason Intellij IDEA spots a problem</p>\n<blockquote>\n<p>Casting 'basicCar' to 'Truck' will produce 'ClassCastException'for any non-null value</p>\n</blockquote>\n<p>What have I done wrong?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9733,"page":259,"page_size":100}
